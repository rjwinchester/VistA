Released PSS*1*204 SEQ #188
Extracted from mail message
**KIDS**:PSS*1.0*204^

**INSTALL NAME**
PSS*1.0*204
"BLD",9736,0)
PSS*1.0*204^PHARMACY DATA MANAGEMENT^0^3170523^y
"BLD",9736,1,0)
^^5^5^3170112^
"BLD",9736,1,1,0)
This build has been created to provide a Packman message-type patch for 
"BLD",9736,1,2,0)
Indications for Use for Prescriptions and Medication Orders. This will 
"BLD",9736,1,3,0)
give the user the ability to enter most common indications and/or
"BLD",9736,1,4,0)
additional indications for the medications in the Pharmacy Orderable Items
"BLD",9736,1,5,0)
file (#50.7).
"BLD",9736,4,0)
^9.64PA^50.7^1
"BLD",9736,4,50.7,0)
50.7
"BLD",9736,4,50.7,2,0)
^9.641^50.713^2
"BLD",9736,4,50.7,2,50.7,0)
PHARMACY ORDERABLE ITEM  (File-top level)
"BLD",9736,4,50.7,2,50.7,1,0)
^9.6411^14^1
"BLD",9736,4,50.7,2,50.7,1,14,0)
DEFAULT INDICATION FOR USE
"BLD",9736,4,50.7,2,50.713,0)
INDICATIONS FOR USE  (sub-file)
"BLD",9736,4,50.7,2,50.713,1,0)
^9.6411^.01^1
"BLD",9736,4,50.7,2,50.713,1,.01,0)
INDICATION FOR USE
"BLD",9736,4,50.7,222)
y^n^p^^^^n^^n
"BLD",9736,4,50.7,224)

"BLD",9736,4,"APDD",50.7,50.7)

"BLD",9736,4,"APDD",50.7,50.7,14)

"BLD",9736,4,"APDD",50.7,50.713)

"BLD",9736,4,"APDD",50.7,50.713,.01)

"BLD",9736,4,"B",50.7,50.7)

"BLD",9736,6.3)
11
"BLD",9736,"INID")
n^n^n
"BLD",9736,"KRN",0)
^9.67PA^779.2^20
"BLD",9736,"KRN",.4,0)
.4
"BLD",9736,"KRN",.4,"NM",0)
^9.68A^^
"BLD",9736,"KRN",.401,0)
.401
"BLD",9736,"KRN",.402,0)
.402
"BLD",9736,"KRN",.403,0)
.403
"BLD",9736,"KRN",.5,0)
.5
"BLD",9736,"KRN",.84,0)
.84
"BLD",9736,"KRN",3.6,0)
3.6
"BLD",9736,"KRN",3.8,0)
3.8
"BLD",9736,"KRN",9.2,0)
9.2
"BLD",9736,"KRN",9.8,0)
9.8
"BLD",9736,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",9736,"KRN",9.8,"NM",1,0)
PSSPOIMO^^0^B142972365
"BLD",9736,"KRN",9.8,"NM",2,0)
PSSPOIM1^^0^B133178041
"BLD",9736,"KRN",9.8,"NM","B","PSSPOIM1",2)

"BLD",9736,"KRN",9.8,"NM","B","PSSPOIMO",1)

"BLD",9736,"KRN",19,0)
19
"BLD",9736,"KRN",19.1,0)
19.1
"BLD",9736,"KRN",101,0)
101
"BLD",9736,"KRN",409.61,0)
409.61
"BLD",9736,"KRN",771,0)
771
"BLD",9736,"KRN",779.2,0)
779.2
"BLD",9736,"KRN",870,0)
870
"BLD",9736,"KRN",8989.51,0)
8989.51
"BLD",9736,"KRN",8989.52,0)
8989.52
"BLD",9736,"KRN",8994,0)
8994
"BLD",9736,"KRN","B",.4,.4)

"BLD",9736,"KRN","B",.401,.401)

"BLD",9736,"KRN","B",.402,.402)

"BLD",9736,"KRN","B",.403,.403)

"BLD",9736,"KRN","B",.5,.5)

"BLD",9736,"KRN","B",.84,.84)

"BLD",9736,"KRN","B",3.6,3.6)

"BLD",9736,"KRN","B",3.8,3.8)

"BLD",9736,"KRN","B",9.2,9.2)

"BLD",9736,"KRN","B",9.8,9.8)

"BLD",9736,"KRN","B",19,19)

"BLD",9736,"KRN","B",19.1,19.1)

"BLD",9736,"KRN","B",101,101)

"BLD",9736,"KRN","B",409.61,409.61)

"BLD",9736,"KRN","B",771,771)

"BLD",9736,"KRN","B",779.2,779.2)

"BLD",9736,"KRN","B",870,870)

"BLD",9736,"KRN","B",8989.51,8989.51)

"BLD",9736,"KRN","B",8989.52,8989.52)

"BLD",9736,"KRN","B",8994,8994)

"BLD",9736,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",9736,"QUES",0)
^9.62^^
"BLD",9736,"REQB",0)
^9.611^2^2
"BLD",9736,"REQB",1,0)
PSS*1.0*189^1
"BLD",9736,"REQB",2,0)
PSS*1.0*198^1
"BLD",9736,"REQB","B","PSS*1.0*189",1)

"BLD",9736,"REQB","B","PSS*1.0*198",2)

"FIA",50.7)
PHARMACY ORDERABLE ITEM
"FIA",50.7,0)
^PS(50.7,
"FIA",50.7,0,0)
50.7I
"FIA",50.7,0,1)
y^n^p^^^^n^^n
"FIA",50.7,0,10)

"FIA",50.7,0,11)

"FIA",50.7,0,"RLRO")

"FIA",50.7,0,"VR")
1.0^PSS
"FIA",50.7,50.7)
1
"FIA",50.7,50.7,13)

"FIA",50.7,50.7,14)

"FIA",50.7,50.713)
1
"FIA",50.7,50.713,.01)

"MBREQ")
0
"PKG",517,-1)
1^1
"PKG",517,0)
PHARMACY DATA MANAGEMENT^PSS^Maintenance of Pharmacy files.
"PKG",517,20,0)
^9.402P^^
"PKG",517,22,0)
^9.49I^1^1
"PKG",517,22,1,0)
1.0^2970930^2971014^11595
"PKG",517,22,1,"PAH",1,0)
204^3170523
"PKG",517,22,1,"PAH",1,1,0)
^^5^5^3170523
"PKG",517,22,1,"PAH",1,1,1,0)
This build has been created to provide a Packman message-type patch for 
"PKG",517,22,1,"PAH",1,1,2,0)
Indications for Use for Prescriptions and Medication Orders. This will 
"PKG",517,22,1,"PAH",1,1,3,0)
give the user the ability to enter most common indications and/or
"PKG",517,22,1,"PAH",1,1,4,0)
additional indications for the medications in the Pharmacy Orderable Items
"PKG",517,22,1,"PAH",1,1,5,0)
file (#50.7).
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","PSSPOIM1")
0^2^B133178041^B131239599
"RTN","PSSPOIM1",1,0)
PSSPOIM1 ;BIR/RTR,WRT-Manual create of Orderable Item continued ;05/12/17  07:10
"RTN","PSSPOIM1",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**29,38,47,141,153,159,166,191,198,204**;9/30/97;Build 11
"RTN","PSSPOIM1",3,0)
 ;
"RTN","PSSPOIM1",4,0)
CHK S PSNO=0 I $G(PSMAN) W !!,"Matching ",PSNAME,!,"   to",!,SPHOLD," ",$P($G(^PS(50.606,+DOSEPTR,0)),"^"),!
"RTN","PSSPOIM1",5,0)
 I '$G(PSMAN) S PSMC=$P($G(^PS(50.7,PSSP,0)),"^") W !!,"Matching ",PSNAME,!,"   to",!,PSMC," ",$P($G(^PS(50.606,+$P(^PS(50.7,PSSP,0),"^",2),0)),"^"),!
"RTN","PSSPOIM1",6,0)
 K DIR S DIR(0)="Y",DIR("B")="YES",DIR("A")="Is this OK" D ^DIR
"RTN","PSSPOIM1",7,0)
 S:Y=0 PSNO=1 I Y'=1,'PSNO S PSOUT=1
"RTN","PSSPOIM1",8,0)
 ;Add trace of whether inactive date is present.
"RTN","PSSPOIM1",9,0)
 ;If one is added erroneously by code logic when the
"RTN","PSSPOIM1",10,0)
 ;orderable item should remain active,
"RTN","PSSPOIM1",11,0)
 ;the inactive date will be deleted at INACT^PSSPOIM1.
"RTN","PSSPOIM1",12,0)
 K ^TMP($J,"INACTIVE_DATE")
"RTN","PSSPOIM1",13,0)
 N PSOITMP
"RTN","PSSPOIM1",14,0)
 S PSOITMP=$S($G(PSPOINT):PSPOINT,$G(PSSP):PSSP,1:"")
"RTN","PSSPOIM1",15,0)
 I PSOITMP]"" S ^TMP($J,"INACTIVE_DATE",PSOITMP)=$P($G(^PS(50.7,PSOITMP,0)),"^",4)
"RTN","PSSPOIM1",16,0)
 K PSMAN,PSOITMP
"RTN","PSSPOIM1",17,0)
 Q
"RTN","PSSPOIM1",18,0)
END K ^TMP($J,"PSSOO"),PSSSSS,PSCREATE,^TMP("PSSLOOP",$J),^TMP($J,"INACTIVE_DATE")
"RTN","PSSPOIM1",19,0)
 K AAA,ANS,APLU,COMM,DA,DIC,DIE,DOSEFORM,DOSEFV,DOSEPTR,DR,FFF,MATCH,NEWSP,NODE,NOFLAG,OTH,POINT,PSCNT,PSIEN,PSMAN,PSMC,PSNAME,PSNO,PSSP,PSND,PSOUT,SPHOLD,SPR,TMPTR,TT,VAGEN,X,Y,ZZ,PSOOOUT,PSXDATE,PSXADATE,PSXSDATE,AAAAA,BBBBB,ZXX,PSXDDATE
"RTN","PSSPOIM1",20,0)
 K PSSDACT,PSSSACT,PSSAACT,PSSINACT,PSSDTENT,PSSCOMP,PSSDGDT,PSSDGIDL,PSSARR,PSSACT,PSSNEWIA
"RTN","PSSPOIM1",21,0)
 Q
"RTN","PSSPOIM1",22,0)
MESS W !!,"This option enables you to match Dispense Drugs to an entry in the Pharmacy",!,"Orderable Item file, or create a new Pharmacy Orderable Item entry for a",!,"Dispense Drug.",! Q
"RTN","PSSPOIM1",23,0)
MESSZ S ^TMP("PSSLOOP",$J,DUZ)="" W !!,"This option is for matching IV Additives, IV Solutions, and all Dispense Drugs",!,"marked with an I, O, or U in the Application Packages' Use field to an",!,"Orderable Item."
"RTN","PSSPOIM1",24,0)
 W !,"You will need to keep accessing this option until all drugs are matched.",!,"A check will be done every time this option is exited to see if the matching",!,"process is complete.",!!
"RTN","PSSPOIM1",25,0)
 K DIR S DIR(0)="E" D ^DIR K DIR I X["^"!($D(DTOUT)) S PSOUT=1
"RTN","PSSPOIM1",26,0)
 Q
"RTN","PSSPOIM1",27,0)
CHECK W !!!,"Checking Drug files, please wait..."
"RTN","PSSPOIM1",28,0)
 S X1=DT,X2=-365 D C^%DTC S PSZXDATE=X,DONEFLAG=1
"RTN","PSSPOIM1",29,0)
 F FFFF=0:0 S FFFF=$O(^PSDRUG(FFFF)) Q:'FFFF!('DONEFLAG)  S QQNM=$P($G(^PSDRUG(FFFF,0)),"^") I QQNM'="",$D(^PSDRUG("B",QQNM)) D  I ZZG I USAGE["O"!(USAGE["I")!(USAGE["U") I '$P($G(^PSDRUG(FFFF,2)),"^") S DONEFLAG=0
"RTN","PSSPOIM1",30,0)
 .S USAGE=$P($G(^PSDRUG(FFFF,2)),"^",3)
"RTN","PSSPOIM1",31,0)
 .S ZZG=1 S PSZZDATE=+$P($G(^PSDRUG(FFFF,"I")),"^") I PSZZDATE,PSZZDATE<PSZXDATE S ZZG=0
"RTN","PSSPOIM1",32,0)
 I DONEFLAG=1 D
"RTN","PSSPOIM1",33,0)
 .F QQQ=0:0 S QQQ=$O(^PS(52.6,QQQ)) Q:'QQQ!('DONEFLAG)  S PSZNAME=$P($G(^PS(52.6,QQQ,0)),"^") I PSZNAME'="",$D(^PS(52.6,"B",PSZNAME)),$P($G(^PS(52.6,QQQ,0)),"^",2),'$P($G(^(0)),"^",11) D  I ZZG S DONEFLAG=0
"RTN","PSSPOIM1",34,0)
 ..S ZZG=1 S PSZZDATE=+$P($G(^PS(52.6,QQQ,"I")),"^") I PSZZDATE,PSZZDATE<PSZXDATE S ZZG=0
"RTN","PSSPOIM1",35,0)
 .I DONEFLAG F QQQ=0:0 S QQQ=$O(^PS(52.7,QQQ)) Q:'QQQ!('DONEFLAG)  S PSZNAME=$P($G(^PS(52.7,QQQ,0)),"^") I PSZNAME'="",$D(^PS(52.7,"B",PSZNAME)),$P($G(^PS(52.7,QQQ,0)),"^",2),'$P($G(^(0)),"^",11) D  I ZZG S DONEFLAG=0
"RTN","PSSPOIM1",36,0)
 ..S ZZG=1 S PSZZDATE=+$P($G(^PS(52.7,QQQ,"I")),"^") I PSZZDATE,PSZZDATE<PSZXDATE S ZZG=0
"RTN","PSSPOIM1",37,0)
MAIL I DONEFLAG W !!!,?3,"You are finished matching to the Orderable Item File!",!!,"A clean-up job is being queued now, and when it is finished, you will"
"RTN","PSSPOIM1",38,0)
 I  W !,"receive a mail message informing you of its completion.",! K DIR S DIR(0)="E",DIR("A")="Press Return to continue" D ^DIR K DIR
"RTN","PSSPOIM1",39,0)
 I $G(DONEFLAG) S PSSOMAIL=1,PSOUDUZ=DUZ S ZTRTN="DATE^PSSPOIM1",ZTIO="",ZTDTH=$H,ZTDESC="ORDERABLE ITEM CLEAN UP",ZTSAVE("DUZ")="",ZTSAVE("PSSOMAIL")="" D ^%ZTLOAD
"RTN","PSSPOIM1",40,0)
 I 'DONEFLAG W $C(7),$C(7),!!?5,"There are still Drugs not matched, you will need to come back",!?5,"and continue matching Drugs!",! K DIR S DIR(0)="E",DIR("A")="Press Return to continue" D ^DIR K DIR
"RTN","PSSPOIM1",41,0)
 K DONEFLAG,QQQ,QQNM,PSZZDATE,PSZXDATE,ZZG,USAGE,FFFF,PSZNAME Q
"RTN","PSSPOIM1",42,0)
OTHER W @IOF W !,"There are other Dispense Drugs with the same VA Generic Name and same Dose",!,"Form already matched to orderable items. Choose a number to match, or enter",!,"'^' to enter a new one.",!!?6,"Disp. drug -> ",PSNAME,! Q
"RTN","PSSPOIM1",43,0)
EN(PSVAR) ;
"RTN","PSSPOIM1",44,0)
 N PSSDACT,PSSSACT,PSSAACT,PSSINACT,PSSDTENT
"RTN","PSSPOIM1",45,0)
 N PSSCOMP,PSSDGDT,PSSDGIDL,PSSARR,PSSACT
"RTN","PSSPOIM1",46,0)
 W !?3,"Now editing Orderable Item:",!?3,$P(^PS(50.7,PSVAR,0),"^"),"   ",$P($G(^PS(50.606,+$P(^(0),"^",2),0)),"^")
"RTN","PSSPOIM1",47,0)
 W ! K DIE,DA,DR N MFLG S PSBEFORE1=+$P(^PS(50.7,PSVAR,0),"^",2),PSAFTER=0,PSINORDE=""
"RTN","PSSPOIM1",48,0)
 S DIE="^PS(50.7,",DA=PSVAR,DR="5;6" D ^DIE K DIE,DA,DR I $D(DTOUT)!($D(Y)>10) Q
"RTN","PSSPOIM1",49,0)
 D INACT
"RTN","PSSPOIM1",50,0)
 I $G(Y)["^"!($D(DTOUT))!($G(DUOUT)) Q
"RTN","PSSPOIM1",51,0)
 D EN1
"RTN","PSSPOIM1",52,0)
 Q
"RTN","PSSPOIM1",53,0)
 ;
"RTN","PSSPOIM1",54,0)
INACT ;
"RTN","PSSPOIM1",55,0)
 ;check to see if an inactive date was added by code logic
"RTN","PSSPOIM1",56,0)
 ;(not by a user) but was erroneously added since there is
"RTN","PSSPOIM1",57,0)
 ;an active component for this orderable item
"RTN","PSSPOIM1",58,0)
 ;
"RTN","PSSPOIM1",59,0)
 ;The inactive date can be erroneously added at EN1+15^PSSPOIDT
"RTN","PSSPOIM1",60,0)
 ;when there is only one active component on an orderable item
"RTN","PSSPOIM1",61,0)
 ;and that component is being edited.
"RTN","PSSPOIM1",62,0)
 ;
"RTN","PSSPOIM1",63,0)
 ;The logic in PSSPOIDT cannot be changed without restructuring
"RTN","PSSPOIM1",64,0)
 ;much of the core logic.  Hence, the decision to insert the
"RTN","PSSPOIM1",65,0)
 ;following check to determine whether the inactive date
"RTN","PSSPOIM1",66,0)
 ;was not present when the user invoked option PSS MAINTAIN
"RTN","PSSPOIM1",67,0)
 ;ORDERABLE ITEM and was erroneously added to file 50.7 by
"RTN","PSSPOIM1",68,0)
 ;EN1^PSSPOIDT.
"RTN","PSSPOIM1",69,0)
 ;
"RTN","PSSPOIM1",70,0)
 D CHECK^PSSPOID2(PSVAR)
"RTN","PSSPOIM1",71,0)
 S PSBEFORE=$P(^PS(50.7,PSVAR,0),"^",4)
"RTN","PSSPOIM1",72,0)
 I $G(^TMP($J,"INACTIVE_DATE",PSVAR))="",PSBEFORE]"" D
"RTN","PSSPOIM1",73,0)
 . ;Information returned by CHECK^PSSPOID2(PSVAR):
"RTN","PSSPOIM1",74,0)
 . ;  PSSDACT = array of active dispense drugs
"RTN","PSSPOIM1",75,0)
 . ;  PSSSACT = array of active solutions
"RTN","PSSPOIM1",76,0)
 . ;  PSSAACT = array of active additives
"RTN","PSSPOIM1",77,0)
 . I $O(PSSDACT(0))!($O(PSSSACT(0)))!($O(PSSAACT(0))) D
"RTN","PSSPOIM1",78,0)
 . . ;Attempt to delete the inactive date since it
"RTN","PSSPOIM1",79,0)
 . . ;may have been added erroneously.
"RTN","PSSPOIM1",80,0)
 . . ;An inactive date may still be present after this call
"RTN","PSSPOIM1",81,0)
 . . ;if all components have an inactive date and
"RTN","PSSPOIM1",82,0)
 . . ;and one or more of those dates are in the future
"RTN","PSSPOIM1",83,0)
 . . S DIE="^PS(50.7,",DA=PSVAR,DR=".04////@" D ^DIE K DIE,DA,DR
"RTN","PSSPOIM1",84,0)
 . . S PSBEFORE=$P(^PS(50.7,PSVAR,0),"^",4)
"RTN","PSSPOIM1",85,0)
 ;
"RTN","PSSPOIM1",86,0)
 ;Check to see if an inactive date did not exist when user
"RTN","PSSPOIM1",87,0)
 ;invoked the option and one has been added that is incorrect.
"RTN","PSSPOIM1",88,0)
 ;This can occur if all components have an inactive date on
"RTN","PSSPOIM1",89,0)
 ;file, and all inactive dates are today or in the past.
"RTN","PSSPOIM1",90,0)
 ;If user is working on a component with the latest inactive
"RTN","PSSPOIM1",91,0)
 ;date, that date was not set as the orderable item inactive
"RTN","PSSPOIM1",92,0)
 ;date as it should have.
"RTN","PSSPOIM1",93,0)
 ;
"RTN","PSSPOIM1",94,0)
 D IACHK
"RTN","PSSPOIM1",95,0)
 I $G(^TMP($J,"INACTIVE_DATE",PSVAR))="",PSSDGIDL]"",PSBEFORE]"",PSSDGIDL'=PSBEFORE D
"RTN","PSSPOIM1",96,0)
 . S PSBEFORE=PSSDGIDL
"RTN","PSSPOIM1",97,0)
 . S DIE="^PS(50.7,",DA=PSVAR,DR=".04////"_PSSDGIDL
"RTN","PSSPOIM1",98,0)
 . D ^DIE K DIE,DA,DR
"RTN","PSSPOIM1",99,0)
 D INACT1
"RTN","PSSPOIM1",100,0)
 I $G(Y)["^"!($D(DTOUT))!($G(DUOUT)) Q
"RTN","PSSPOIM1",101,0)
 D IACHK1
"RTN","PSSPOIM1",102,0)
 Q
"RTN","PSSPOIM1",103,0)
 ;
"RTN","PSSPOIM1",104,0)
INACT1 ;
"RTN","PSSPOIM1",105,0)
 N PSSNEWIA S PSSNEWIA=""
"RTN","PSSPOIM1",106,0)
 ;Does the user wish to add or change the inactive date
"RTN","PSSPOIM1",107,0)
 K DIR S DIR(0)="DO",DIR("A")="INACTIVE DATE" D  D ^DIR K DIR I $G(Y)["^"!($D(DTOUT))!($G(DUOUT)) Q
"RTN","PSSPOIM1",108,0)
 .I $G(PSBEFORE) S Y=PSBEFORE D DD^%DT S DIR("B")=$G(Y)
"RTN","PSSPOIM1",109,0)
 S DIE="^PS(50.7,",DA=PSVAR,PSSNEWIA=Y
"RTN","PSSPOIM1",110,0)
 I $G(PSBEFORE),'PSSNEWIA D
"RTN","PSSPOIM1",111,0)
 . I '$O(PSSDACT(0)),'$O(PSSSACT(0)),'$O(PSSAACT(0)) D  Q
"RTN","PSSPOIM1",112,0)
 . . W !!,?15,"All Drugs/Additives/Solutions matched to this"
"RTN","PSSPOIM1",113,0)
 . . W !,?15,"Orderable Item are inactive."
"RTN","PSSPOIM1",114,0)
 . . W !!,?15,"The INACTIVE DATE cannot be deleted.",!
"RTN","PSSPOIM1",115,0)
 . S DR=".04////@"
"RTN","PSSPOIM1",116,0)
 . D ^DIE K DIE,DA,DR
"RTN","PSSPOIM1",117,0)
 . ;An inactive date may have been set if all components
"RTN","PSSPOIM1",118,0)
 . ;are defined with an inactive date and one or more
"RTN","PSSPOIM1",119,0)
 . ;of those dates are in the future.
"RTN","PSSPOIM1",120,0)
 . I $P(^PS(50.7,PSVAR,0),"^",4)="" D
"RTN","PSSPOIM1",121,0)
 . . W ?35,"The inactive date has been deleted.",!
"RTN","PSSPOIM1",122,0)
 I PSSNEWIA D
"RTN","PSSPOIM1",123,0)
 . S DR=".04////"_PSSNEWIA
"RTN","PSSPOIM1",124,0)
 . D DD^%DT W ?40,Y,!
"RTN","PSSPOIM1",125,0)
 . D ^DIE K DIE,DA,DR
"RTN","PSSPOIM1",126,0)
 S PSSINACT=$P(^PS(50.7,PSVAR,0),"^",4)
"RTN","PSSPOIM1",127,0)
 I PSSINACT="" Q
"RTN","PSSPOIM1",128,0)
 ;
"RTN","PSSPOIM1",129,0)
 ;Inform user if user specified that inactive date should
"RTN","PSSPOIM1",130,0)
 ;be deleted.
"RTN","PSSPOIM1",131,0)
 ;
"RTN","PSSPOIM1",132,0)
 I 'PSSNEWIA D
"RTN","PSSPOIM1",133,0)
 . W !,?15,"The Inactive Date is: "
"RTN","PSSPOIM1",134,0)
 . S Y=PSSINACT D DD^%DT W Y,"."
"RTN","PSSPOIM1",135,0)
 Q
"RTN","PSSPOIM1",136,0)
 ;
"RTN","PSSPOIM1",137,0)
IACHK ;
"RTN","PSSPOIM1",138,0)
 ;Check to see if the inactive date on the orderable item
"RTN","PSSPOIM1",139,0)
 ;is greater than the greatest inactive date on
"RTN","PSSPOIM1",140,0)
 ;corresponding Drugs/Additives/Solutions.
"RTN","PSSPOIM1",141,0)
 ;Not automatically setting to that value unless the inactive date
"RTN","PSSPOIM1",142,0)
 ;was null when user invoked the option.
"RTN","PSSPOIM1",143,0)
 ;Otherwise, leave as is in case user wishes it defined as such.
"RTN","PSSPOIM1",144,0)
 ;
"RTN","PSSPOIM1",145,0)
 S PSSCOMP="",PSSACT=0
"RTN","PSSPOIM1",146,0)
 F  S PSSCOMP=$O(^PS(50.7,"A50",PSVAR,PSSCOMP)) Q:PSSCOMP=""  D
"RTN","PSSPOIM1",147,0)
 . S PSSARR(PSSCOMP)=""
"RTN","PSSPOIM1",148,0)
 ;Latest inactive date = PSSDGIDL
"RTN","PSSPOIM1",149,0)
 ;Inactive date on each component = PSSDGDT
"RTN","PSSPOIM1",150,0)
 S PSSDGIDL=""
"RTN","PSSPOIM1",151,0)
 F  S PSSCOMP=$O(PSSARR(PSSCOMP)) Q:PSSCOMP=""  D
"RTN","PSSPOIM1",152,0)
 . S PSSDGDT=$G(^PSDRUG(PSSCOMP,"I"))
"RTN","PSSPOIM1",153,0)
 . I PSSDGDT="" S PSSACT=1
"RTN","PSSPOIM1",154,0)
 . I PSSDGDT>PSSDGIDL S PSSDGIDL=PSSDGDT
"RTN","PSSPOIM1",155,0)
 Q
"RTN","PSSPOIM1",156,0)
 ;
"RTN","PSSPOIM1",157,0)
IACHK1 ;
"RTN","PSSPOIM1",158,0)
 ;message to user
"RTN","PSSPOIM1",159,0)
 I PSSDGIDL]"",'PSSACT D
"RTN","PSSPOIM1",160,0)
 . S Y=PSSDGIDL D DD^%DT
"RTN","PSSPOIM1",161,0)
 . I PSSDGIDL<PSSINACT D  Q
"RTN","PSSPOIM1",162,0)
 . . W !!,?15,"**** **** NOTE **** ****",!
"RTN","PSSPOIM1",163,0)
 . . W !,?15,"All Drugs/Additives/Solutions for this orderable item"
"RTN","PSSPOIM1",164,0)
 . . W !,?15,"are inactive as of ",Y,".",!
"RTN","PSSPOIM1",165,0)
 . . S Y=$P(^PS(50.7,PSVAR,0),"^",4) D DD^%DT
"RTN","PSSPOIM1",166,0)
 . . W !,?15,"However, the orderable item ",$P(^PS(50.7,PSVAR,0),"^")
"RTN","PSSPOIM1",167,0)
 . . W !,?15,"is inactive on ",Y,".",!
"RTN","PSSPOIM1",168,0)
 . . W !,?15,"You may need to change the inactive date on the orderable item"
"RTN","PSSPOIM1",169,0)
 . . W !,?15,"using option PSS EDIT ORDERABLE ITEMS.",!
"RTN","PSSPOIM1",170,0)
 . . W !,?15,"****    ****    ****    ****    ****",!
"RTN","PSSPOIM1",171,0)
 . ;
"RTN","PSSPOIM1",172,0)
 . W !,?15,"All Drugs/Additives/Solutions matched to this"
"RTN","PSSPOIM1",173,0)
 . W !,?15,"Orderable Item are inactive as of ",Y,".",!
"RTN","PSSPOIM1",174,0)
 Q
"RTN","PSSPOIM1",175,0)
 ;
"RTN","PSSPOIM1",176,0)
EN1 ;
"RTN","PSSPOIM1",177,0)
 ;PSSDTENT is used by routine PSSPOIMO
"RTN","PSSPOIM1",178,0)
 N PSSDTENT
"RTN","PSSPOIM1",179,0)
 S PSSDTENT=PSSINACT
"RTN","PSSPOIM1",180,0)
 S PSSOTH=$P($G(^PS(59.7,1,40.2)),"^"),DIE="^PS(50.7,",DA=PSVAR
"RTN","PSSPOIM1",181,0)
 S DR=".05;@1;D SETF^PSSPOIMO;.06;D DFR^PSSPOIMO(PSBEFORE1);10//YES;I X=""Y"" S Y=""@2"";S:$G(DUOUT) Y=""@3"";" D
"RTN","PSSPOIM1",182,0)
 .S DR=DR_"D PDCHK^PSSPOIMO S:PSSFG Y=""@1"";S:$G(DUOUT) Y=""@3"";@2;K DIE(""NO^""),DIRUT;D MRSEL^PSSPOIMO;.07;.08;1;12//0;7;S:'$G(PSSOTH) Y=""@3"";7.1;@3" ;*191
"RTN","PSSPOIM1",183,0)
 D ^DIE S PSAFTER=$P(^PS(50.7,PSVAR,0),"^",4) K DIE,DA,DR,PSSOTH,^TMP("PSJMR",$J),^TMP("PSSDMR",$J) I $D(PSSOU),'$G(PSSOU) D MRSEL^PSSPOIMO K ^TMP("PSJMR",$J)
"RTN","PSSPOIM1",184,0)
 S:PSBEFORE&('PSAFTER) PSINORDE="D" S:PSAFTER PSINORDE="I"
"RTN","PSSPOIM1",185,0)
 I PSINORDE'="" D REST^PSSPOIDT(PSVAR)
"RTN","PSSPOIM1",186,0)
 K PSBEFORE,PSBEFORE1,PSAFTER,PSINORDE
"RTN","PSSPOIM1",187,0)
 N DIE,DA,DR  ; Indications for Use fields PSS*1*204
"RTN","PSSPOIM1",188,0)
 S DIE="^PS(50.7,",DA=PSVAR,DR="14;13" D ^DIE K DIE
"RTN","PSSPOIM1",189,0)
IMMUN ;PSS*1*141 FOR 'IMMUNIZATIONS DOCUMENTATION BY BCMA'
"RTN","PSSPOIM1",190,0)
 I $O(^PSDRUG("AOC",PSVAR,"IM000"))'["IM" G SYN ;ASK WHEN APPROPRIATE
"RTN","PSSPOIM1",191,0)
 W ! S DIE="^PS(50.7,",DA=PSVAR,DR=9 D ^DIE K DIE
"RTN","PSSPOIM1",192,0)
SYN I $G(Y)["^"!($G(DIRUT))!$D(DTOUT)!($D(Y)>10) G FINS
"RTN","PSSPOIM1",193,0)
 W ! K DIC S:'$D(^PS(50.7,PSVAR,2,0)) ^PS(50.7,PSVAR,2,0)="^50.72^0^0" S DIC="^PS(50.7,"_PSVAR_",2,",DA(1)=PSVAR,DIC(0)="QEAMZL",DIC("A")="Select SYNONYM: ",DLAYGO=50.72 D ^DIC K DIC
"RTN","PSSPOIM1",194,0)
 I Y<0!($D(DTOUT))!($D(DUOUT)) K:'$O(^PS(50.7,PSVAR,2,0)) ^PS(50.7,PSVAR,2,0) G FIN
"RTN","PSSPOIM1",195,0)
 W ! S DA=+Y,DIE="^PS(50.7,"_PSVAR_",2,",DA(1)=PSVAR,DR=.01 D ^DIE K DIE G SYN
"RTN","PSSPOIM1",196,0)
FIN D EN^PSSPOIDT(PSVAR) I $G(PSVAR1) D EN2^PSSHL1(PSVAR,"MAD") G FINS
"RTN","PSSPOIM1",197,0)
 D EN2^PSSHL1(PSVAR,"MUP")
"RTN","PSSPOIM1",198,0)
FINS K PSVAR,PSVAR1 Q
"RTN","PSSPOIM1",199,0)
 ;
"RTN","PSSPOIM1",200,0)
DATE ;
"RTN","PSSPOIM1",201,0)
 F ZZZ=0:0 S ZZZ=$O(^PS(50.7,ZZZ)) Q:'ZZZ  S PSOTYPE=$P($G(^PS(50.7,ZZZ,0)),"^",3) D
"RTN","PSSPOIM1",202,0)
 .I PSOTYPE,'$D(^PS(52.6,"AOI",ZZZ)),'$D(^PS(52.7,"AOI",ZZZ)),'$P($G(^PS(50.7,ZZZ,0)),"^",4) K DIE S DIE="^PS(50.7,",DA=ZZZ,DR=".04////"_DT D ^DIE K DIE Q
"RTN","PSSPOIM1",203,0)
 .Q:PSOTYPE
"RTN","PSSPOIM1",204,0)
 .D SUPP
"RTN","PSSPOIM1",205,0)
 .I '$D(^PSDRUG("ASP",ZZZ)),'$P($G(^PS(50.7,ZZZ,0)),"^",4) K DIE S DIE="^PS(50.7,",DA=ZZZ,DR=".04////"_DT D ^DIE K DIE Q
"RTN","PSSPOIM1",206,0)
 .D:'$P($G(^PS(50.7,ZZZ,0)),"^",4)
"RTN","PSSPOIM1",207,0)
 ..S PSDFLAG=0 F WW=0:0 S WW=$O(^PSDRUG("ASP",ZZZ,WW)) Q:'WW!(PSDFLAG)  S PSAPPL=$P($G(^PSDRUG(WW,2)),"^",3) I PSAPPL["I"!(PSAPPL["O")!(PSAPPL["U") S PSDFLAG=1
"RTN","PSSPOIM1",208,0)
 ..I 'PSDFLAG K DIE S DIE="^PS(50.7,",DA=ZZZ,DR=".04////"_DT D ^DIE K DIE
"RTN","PSSPOIM1",209,0)
 F ZZZ=0:0 S ZZZ=$O(^PS(52.7,ZZZ)) Q:'ZZZ  S RRRR=$P($G(^PS(52.7,ZZZ,0)),"^",11) I RRRR,'$P($G(^PS(50.7,RRRR,0)),"^",3) K DIE S DA=ZZZ,DIE="^PS(52.7,",DR="9////"_"@" D ^DIE K DIE
"RTN","PSSPOIM1",210,0)
 F ZZZ=0:0 S ZZZ=$O(^PS(52.6,ZZZ)) Q:'ZZZ  S RRRR=$P($G(^PS(52.6,ZZZ,0)),"^",11) I RRRR,'$P($G(^PS(50.7,RRRR,0)),"^",3) K DIE S DA=ZZZ,DIE="^PS(52.6,",DR="15////"_"@" D ^DIE K DIE
"RTN","PSSPOIM1",211,0)
 D:$G(PSCREATE) MAIL^PSSCREAT
"RTN","PSSPOIM1",212,0)
 I '$G(PSSOMAIL) K PSOTYPE,DA,DIE,WW,RRRR,PSDFLAG,PSAPPL,GGG,HHH,ZZZZZ Q
"RTN","PSSPOIM1",213,0)
 S PSOTEXT(1)="You have completed the matching process required for the installation of",PSOTEXT(2)="Outpatient V. 7.0 and Inpatient Medications V. 5.0!"
"RTN","PSSPOIM1",214,0)
 S XMDUZ=.5,XMY(DUZ)="",XMTEXT="PSOTEXT(",XMSUB="Pharmacy Orderable Item File" D ^XMD
"RTN","PSSPOIM1",215,0)
 S PSSITE=+$O(^PS(59.7,0)) S $P(^PS(59.7,PSSITE,80),"^",2)=3 K PSSITE
"RTN","PSSPOIM1",216,0)
 D ^%ZISC K PSOTYPE,DA,DIE,WW,RRRR,PSDFLAG,PSAPPL,GGG,HHH,ZZZZZ,PSSOMAIL S:$D(ZTQUEUED) ZTREQ="@" Q
"RTN","PSSPOIM1",217,0)
RMES W !!,"This report takes a long time to first build the data to print, then to",!,"actually print the data. To avoid tying up a terminal for a long period of time,",!,"the report must be QUEUED to a printer."
"RTN","PSSPOIM1",218,0)
 W !!,"This report must be QUEUED to a printer!"
"RTN","PSSPOIM1",219,0)
 Q
"RTN","PSSPOIM1",220,0)
KMES W !!,"Due to the length of this report, and to avoid tying up a terminal for a long",!,"time, this report must be QUEUED to a printer!"
"RTN","PSSPOIM1",221,0)
 Q
"RTN","PSSPOIM1",222,0)
SUPP ;Mark as supply
"RTN","PSSPOIM1",223,0)
 N SSSUP,SSSIN,SSSAP,SSLOOP,SSSQUE,SSSQUEY,SSSQDATE,SLIP,SLDO,SLDP
"RTN","PSSPOIM1",224,0)
 S (SSSQUE,SSSQUEY)=0 F SSLOOP=0:0 S SSLOOP=$O(^PSDRUG("ASP",ZZZ,SSLOOP)) Q:'SSLOOP!(SSSQUEY)  D
"RTN","PSSPOIM1",225,0)
 .I $P($G(^PSDRUG(SSLOOP,0)),"^",3)["S" S SSSAP=$P($G(^(2)),"^",3),SSSIN=$P($G(^("I")),"^") D
"RTN","PSSPOIM1",226,0)
 ..I SSSAP["O"!(SSSAP["I")!(SSSAP["U") I 'SSSIN S $P(^PS(50.7,ZZZ,0),"^",9)=1 S (SSSQUEY,SSSQUE)=1 Q
"RTN","PSSPOIM1",227,0)
 ..I SSSAP["O"!(SSSAP["I")!(SSSAP["U") I +SSSIN>DT S $P(^PS(50.7,ZZZ,0),"^",9)=1 S SSSQUE=1,SSSQDATE($E(SSSIN,1,7))=""
"RTN","PSSPOIM1",228,0)
 I 'SSSQUEY,SSSQUE,$O(SSSQDATE(0)) F SLIP=0:0 S SLIP=$O(SSSQDATE(SLIP)) Q:'SLIP  D
"RTN","PSSPOIM1",229,0)
 .S ZTRTN="ENT^PSSPOIDT",ZTDESC="Supply update for Orderable Item",ZTIO="",ZTDTH=SLIP_.01 S SLDO=$G(PSSORDIT),SLDP=$G(PSSCROSS) S PSSORDIT=ZZZ,PSSCROSS=1 S ZTSAVE("PSSORDIT")="",ZTSAVE("PSSCROSS")="" D ^%ZTLOAD D
"RTN","PSSPOIM1",230,0)
 ..S PSSORDIT=$G(SLDO) K:'PSSORDIT PSSORDIT
"RTN","PSSPOIM1",231,0)
 ..S PSSCROSS=$G(SLDP) K:'PSSCROSS PSSCROSS
"RTN","PSSPOIM1",232,0)
 Q
"RTN","PSSPOIM1",233,0)
 ;
"RTN","PSSPOIMO")
0^1^B142972365^B140931303
"RTN","PSSPOIMO",1,0)
PSSPOIMO ;BIR/RTR/WRT-Edit Orderable Item Name and Inactive date ;05/12/17  07:11
"RTN","PSSPOIMO",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**29,32,38,47,68,102,125,141,153,159,166,172,191,189,204**;9/30/97;Build 11
"RTN","PSSPOIMO",3,0)
 S PSSITE=+$O(^PS(59.7,0)) I +$P($G(^PS(59.7,PSSITE,80)),"^",2)<2 W !!?3,"Orderable Item Auto-Create has not been completed yet!",! K PSSITE K DIR S DIR("A")="Press RETURN to continue",DIR(0)="E" D ^DIR K DIR Q
"RTN","PSSPOIMO",4,0)
 K PSSITE W !!,"This option enables you to edit Orderable Item names, Formulary status,",!,"drug text, Inactive Dates, Indications for Use, and Synonyms."
"RTN","PSSPOIMO",5,0)
EN I $D(PSOIEN) L -^PS(50.7,PSOIEN)
"RTN","PSSPOIMO",6,0)
 K PSSCROSS,DTOUT,DUOUT,DIRUT
"RTN","PSSPOIMO",7,0)
 K DIC ; S PY=$P($G(^PS(59.7,1,31)),"^",2)
"RTN","PSSPOIMO",8,0)
 S PSS1="W ""  ""_$P(^PS(50.606,$P(^PS(50.7,+Y,0),""^"",2),0),""^"")_""  ""_$S($P($G(^PS(50.7,+Y,0)),""^"",4):$E($P(^(0),""^"",4),4,5)_""-""_$E($P(^(0),""^"",4),6,7)_""-""_$E($P(^(0),""^"",4),2,3),1:"""")"
"RTN","PSSPOIMO",9,0)
 S PSS2=" S NF=$P($G(^PS(50.7,+Y,0)),""^"",12) I NF S NF=""   N/F"" W NF"
"RTN","PSSPOIMO",10,0)
 S DIC("W")=PSS1_PSS2,DIC("S")="I '$P($G(^PS(50.7,+Y,0)),""^"",3)"
"RTN","PSSPOIMO",11,0)
 ;PSO*7*102;ONLY SEARCH B AND C X-REFS
"RTN","PSSPOIMO",12,0)
 S $P(PLINE,"-",79)="" W !! K PSOUT S DIC="^PS(50.7,",DIC(0)="QEAMZ",D="B^C" D MIX^DIC1 K DIC,PY,D G:Y<0!($D(DTOUT))!($D(DUOUT)) END
"RTN","PSSPOIMO",13,0)
 S PSOIEN=+Y,PSOINAME=$P(Y,"^",2),PSDOSE=+$P(^PS(50.7,PSOIEN,0),"^",2) L +^PS(50.7,PSOIEN):$S($G(DILOCKTM)>0:DILOCKTM,1:3) I '$T W !,$C(7),"Another person is editing this one." Q
"RTN","PSSPOIMO",14,0)
 W !!!,?5,"Orderable Item -> ",PSOINAME,!?5,"Dosage Form    -> ",$P($G(^PS(50.606,PSDOSE,0)),"^"),!
"RTN","PSSPOIMO",15,0)
 K DIR S DIR("?")=" ",DIR("?",1)="Enter 'Yes' to see all of the Dispense Drugs, IV Additives, and IV Solutions",DIR("?",2)="that are matched to this Orderable Item. IV Additives will be identified with"
"RTN","PSSPOIMO",16,0)
 S DIR("?",3)="an (A), and IV Solutions with an (S)."
"RTN","PSSPOIMO",17,0)
 S DIR(0)="Y",DIR("B")="YES",DIR("A")="List all Drugs/Additives/Solutions tied to this Orderable Item" D ^DIR K DIR I Y["^"!($D(DTOUT))!($D(DUOUT)) G EN
"RTN","PSSPOIMO",18,0)
 I Y D DISP
"RTN","PSSPOIMO",19,0)
EDIT K DIR W ! S DIR(0)="Y",DIR("A")="Are you sure you want to edit this Orderable Item",DIR("B")="NO",DIR("?")="Answer YES to edit the fields associated with this Orderable Item." D ^DIR K DIR I 'Y!($D(DTOUT))!($D(DUOUT)) G EN
"RTN","PSSPOIMO",20,0)
 W !!?3,"Now editing Orderable Item:",!?3,PSOINAME,"   ",$P($G(^PS(50.606,PSDOSE,0)),"^")
"RTN","PSSPOIMO",21,0)
DIR K DIR S DIR(0)="F^3:40",DIR("B")=PSOINAME,DIR("A")="Orderable Item Name" D ^DIR
"RTN","PSSPOIMO",22,0)
 I Y["^"!($D(DUOUT))!($D(DTOUT)) G EN
"RTN","PSSPOIMO",23,0)
 I X[""""!($A(X)=45)!('(X'?1P.E))!(X?2"z".E) W $C(7),!!?5,"??" G DIR
"RTN","PSSPOIMO",24,0)
 I X'=PSOINAME S ZZFLAG=0 D @$S('$P($G(^PS(50.7,PSOIEN,0)),"^",3):"CHECK",1:"ZCHECK") I ZZFLAG G DIR
"RTN","PSSPOIMO",25,0)
 S PSONEW=X,DIE="^PS(50.7,",DA=PSOIEN,DR=".01////"_X D ^DIE I PSONEW'=PSOINAME W !!,"Name changed from  ",PSOINAME,!?15,"to  ",PSONEW
"RTN","PSSPOIMO",26,0)
 S PSSDTENT=0 W ! K DIE N MFLG S PSBEFORE=$P(^PS(50.7,PSOIEN,0),"^",4),PSAFTER=0,PSINORDE="" D
"RTN","PSSPOIMO",27,0)
 .;If reactivate OI, prompt to reactivate DD's only if there are any, then always give message saying OI now Active. If Inactivate, prompt to inactivate any active DD's if there are any, and give message
"RTN","PSSPOIMO",28,0)
 .;but if OI is reactivated, and there are no activities matched to it, and user does not want to activate the drugs, then inactivate the OI again, and give a clear message explaining this.
"RTN","PSSPOIMO",29,0)
 .W !,"This Orderable Item is "_$S($P($G(^PS(50.7,PSOIEN,0)),"^",12):"Non-Formulary.",1:"Formulary."),!
"RTN","PSSPOIMO",30,0)
 .I $P($G(^PS(50.7,PSOIEN,0)),"^",10) W !,"This Orderable Item is marked as a Non-VA Med.",!
"RTN","PSSPOIMO",31,0)
 .S DIE="^PS(50.7,",DA=PSOIEN,DR=6 S PSCREATE=1 D ^DIE K DIE,PSCREATE I $D(DTOUT)!($D(Y)>10) Q
"RTN","PSSPOIMO",32,0)
 .;PSS*1*102;ADD DRUG TEXT AS SYNONYM IS REQUESTED BY USER
"RTN","PSSPOIMO",33,0)
 .D ADDSYN^PSSPOIMP
"RTN","PSSPOIMO",34,0)
 .K DIR S DIR(0)="DO",DIR("A")="INACTIVE DATE" D  D ^DIR K DIR I $G(Y)["^"!($D(DTOUT))!($G(DUOUT)) Q
"RTN","PSSPOIMO",35,0)
 ..I $G(PSBEFORE) S Y=PSBEFORE D DD^%DT S DIR("B")=$G(Y)
"RTN","PSSPOIMO",36,0)
 .I $G(PSBEFORE),'$G(Y) W ?40,"Inactive Date deleted!"
"RTN","PSSPOIMO",37,0)
 .S PSSDTENT=$G(Y) I $G(Y) D DD^%DT W ?40,$G(Y)
"RTN","PSSPOIMO",38,0)
 .S PSSOTH=$S($P($G(^PS(59.7,1,40.2)),"^"):1,1:0)
"RTN","PSSPOIMO",39,0)
 .S DIE="^PS(50.7,",DA=PSOIEN N PSSFG,PSSOU
"RTN","PSSPOIMO",40,0)
 .S DR=".05;@1;D SETF^PSSPOIMO;.06;D DFR^PSSPOIMO(PSDOSE);10//YES;I X=""Y"" S Y=""@2"";S:$G(DUOUT) Y=""@3"";" D
"RTN","PSSPOIMO",41,0)
 ..S DR=DR_"D PDCHK^PSSPOIMO S:PSSFG Y=""@1"";S:$G(DUOUT) Y=""@3"";@2;K DIE(""NO^""),DIRUT;D MRSEL^PSSPOIMO;.07;.08;1;12//0;7;S:'$G(PSSOTH) Y=""@3"";7.1;@3" ;*191
"RTN","PSSPOIMO",42,0)
 .S PSCREATE=1 D ^DIE K DIE,PSCREATE,PSSOTH,^TMP("PSJMR",$J),^TMP("PSSDMR",$J) I $D(PSSOU),'$G(PSSOU) D MRSEL K ^TMP("PSJMR",$J)
"RTN","PSSPOIMO",43,0)
 .S $P(^PS(50.7,PSOIEN,0),"^",4)=PSSDTENT,PSAFTER=PSSDTENT
"RTN","PSSPOIMO",44,0)
 S:PSBEFORE&('$P(^PS(50.7,PSOIEN,0),"^",4)) PSINORDE="D" S:$P(^PS(50.7,PSOIEN,0),"^",4) PSINORDE="I"
"RTN","PSSPOIMO",45,0)
 I PSINORDE'="" D CHECK^PSSPOID2(PSOIEN) D
"RTN","PSSPOIMO",46,0)
 .I PSINORDE="D" D  Q
"RTN","PSSPOIMO",47,0)
 ..I $O(PSSDACTI(0))!($O(PSSSACTI(0)))!($O(PSSAACTI(0))) D
"RTN","PSSPOIMO",48,0)
 ...W !!,"There are inactive "_$S($O(PSSDACTI(0)):"drugs, ",1:"")_$S($O(PSSAACTI(0)):"additives, ",1:"")_$S($O(PSSSACTI(0)):"solutions,",1:""),!,"matched to this Pharmacy Orderable Item."
"RTN","PSSPOIMO",49,0)
 .I $O(PSSDACT(0))!($O(PSSSACT(0)))!($O(PSSAACT(0))) D
"RTN","PSSPOIMO",50,0)
 ..W !!,"There are active "_$S($O(PSSDACT(0)):"drugs, ",1:"")_$S($O(PSSAACT(0)):"additives, ",1:"")_$S($O(PSSSACT(0)):"solutions,",1:""),!,"matched to this Pharmacy Orderable Item."
"RTN","PSSPOIMO",51,0)
 I $G(PSINORDE)="D" I $O(PSSDACTI(0))!($O(PSSSACTI(0)))!($O(PSSAACTI(0))) D REST^PSSPOIDT(PSOIEN)
"RTN","PSSPOIMO",52,0)
 I $G(PSINORDE)="I" I $O(PSSDACT(0))!($O(PSSSACT(0)))!($O(PSSAACT(0))) D REST^PSSPOIDT(PSOIEN)
"RTN","PSSPOIMO",53,0)
 S DIK="^PS(50.7,",DA=PSOIEN,DIK(1)=.04 D EN^DIK K DIK
"RTN","PSSPOIMO",54,0)
 K PSBEFORE,PSAFTER,PSINORDE,PSSDTENT,PSSDACT,PSSDACTI,PSSSACT,PSSSACTI,PSSAACT,PSSAACTI
"RTN","PSSPOIMO",55,0)
 N DIE,DA,DR  ; Indications for Use fields PSS*1*204
"RTN","PSSPOIMO",56,0)
 S DIE="^PS(50.7,",DA=PSOIEN,DR="14;13" D ^DIE K DIE
"RTN","PSSPOIMO",57,0)
IMMUN ;PSS*1*141 FOR 'IMMUNIZATIONS DOCUMENTATION BY BCMA'
"RTN","PSSPOIMO",58,0)
 I $O(^PSDRUG("AOC",PSOIEN,"IM000"))'["IM" G SYN ;ASK WHEN APPROPRIATE
"RTN","PSSPOIMO",59,0)
 W ! S DIE="^PS(50.7,",DA=PSOIEN,DR=9 D ^DIE K DIE
"RTN","PSSPOIMO",60,0)
SYN I $G(Y)["^"!($G(DIRUT))!$D(DTOUT)!($D(Y)>10) G EN
"RTN","PSSPOIMO",61,0)
 W ! K DIC S:'$D(^PS(50.7,PSOIEN,2,0)) ^PS(50.7,PSOIEN,2,0)="^50.72^0^0" S DIC="^PS(50.7,"_PSOIEN_",2,",DA(1)=PSOIEN,DIC(0)="QEAMZL",DIC("A")="Select SYNONYM: ",DLAYGO=50.72 D ^DIC K DIC
"RTN","PSSPOIMO",62,0)
 I Y<0!($D(DUOUT))!($D(DTOUT)) K:'$O(^PS(50.7,PSOIEN,2,0)) ^PS(50.7,PSOIEN,2,0) D EN^PSSPOIDT(PSOIEN),EN2^PSSHL1(PSOIEN,"MUP") G EN
"RTN","PSSPOIMO",63,0)
 W ! S DA=+Y,DIE="^PS(50.7,"_PSOIEN_",2,",DA(1)=PSOIEN,DR=.01 D ^DIE K DIE G SYN
"RTN","PSSPOIMO",64,0)
 D EN^PSSPOIDT(PSOIEN),EN2^PSSHL1(PSOIEN,"MUP")
"RTN","PSSPOIMO",65,0)
 G EN
"RTN","PSSPOIMO",66,0)
END K ZZFLAG,DIC,DIR,DIE,DTOUT,DUOUT,DIRUT,FLAG,PSOINAME,PSOUT,PSDOSE,PSONEW,UPFLAG,VV,ZZ,AA,BB,Y,AAA,SSS,PSOARR,PSOARRAD,PLINE I $D(PSOIEN) L -^PS(50.7,PSOIEN) K PSOIEN
"RTN","PSSPOIMO",67,0)
 Q
"RTN","PSSPOIMO",68,0)
DISP N PSSLFLAG,PSSLDATE S FLAG=1 D HEAD F ZZ=0:0 S ZZ=$O(^PSDRUG("ASP",PSOIEN,ZZ)) Q:'ZZ!($G(PSOUT))  S FLAG=0 D:($Y+5)>IOSL HEAD Q:$G(PSOUT)  I ZZ W !,$P($G(^PSDRUG(ZZ,0)),"^") W:$P($G(^PSDRUG(ZZ,0)),"^",9) "   N/F" D DTE
"RTN","PSSPOIMO",69,0)
 Q:$G(PSOUT)
"RTN","PSSPOIMO",70,0)
 S (FLAG,PSSLFLAG)=0
"RTN","PSSPOIMO",71,0)
 F ZZ=0:0 S ZZ=$O(^PS(52.6,"AOI",PSOIEN,ZZ)) Q:'ZZ!($G(PSOUT))  D:($Y+5)>IOSL HEAD Q:$G(PSOUT)  I ZZ D
"RTN","PSSPOIMO",72,0)
 .S PSSLFLAG=1
"RTN","PSSPOIMO",73,0)
 .W !,$P($G(^PS(52.6,ZZ,0)),"^"),?31," (A) "
"RTN","PSSPOIMO",74,0)
 .W ?40,"Additive Strength: ",$S($$GET1^DIQ(52.6,ZZ,19)'="":$$GET1^DIQ(52.6,ZZ,19)_" "_$$GET1^DIQ(52.6,ZZ,2),1:"N/A")," "
"RTN","PSSPOIMO",75,0)
 .S PSSLDATE=$P($G(^PS(52.6,ZZ,"I")),"^") I PSSLDATE D DTEX
"RTN","PSSPOIMO",76,0)
 Q:$G(PSOUT)
"RTN","PSSPOIMO",77,0)
 ;I $G(PSSLFLAG) W !
"RTN","PSSPOIMO",78,0)
 F ZZ=0:0 S ZZ=$O(^PS(52.7,"AOI",PSOIEN,ZZ)) Q:'ZZ!($G(PSOUT))  D:($Y+5)>IOSL HEAD Q:$G(PSOUT)  I ZZ D
"RTN","PSSPOIMO",79,0)
 .W !,$P($G(^PS(52.7,ZZ,0)),"^"),?31,$P($G(^(0)),"^",3),?42,"(S)"
"RTN","PSSPOIMO",80,0)
 .S PSSLDATE=$P($G(^PS(52.7,ZZ,"I")),"^") I PSSLDATE D DTEX
"RTN","PSSPOIMO",81,0)
 Q
"RTN","PSSPOIMO",82,0)
HEAD I 'FLAG W ! K DIR S DIR(0)="E",DIR("A")="Press RETURN to continue" D ^DIR K DIR I 'Y S PSOUT=1 Q
"RTN","PSSPOIMO",83,0)
 W @IOF W !,?6,"Orderable Item ->  ",PSOINAME,!?6,"Dosage Form    ->  ",$P($G(^PS(50.606,+$P($G(^PS(50.7,PSOIEN,0)),"^",2),0)),"^"),!!,"Dispense Drugs:"_$S('FLAG:" (continued)",1:""),!,"---------------"
"RTN","PSSPOIMO",84,0)
 Q
"RTN","PSSPOIMO",85,0)
ADDIT ;If orderable item is flagged for IV
"RTN","PSSPOIMO",86,0)
 S AA=$O(^PS(52.6,"AOI",PSOIEN,0))
"RTN","PSSPOIMO",87,0)
 S BB=$O(^PS(52.7,"AOI",PSOIEN,0))
"RTN","PSSPOIMO",88,0)
 I 'AA,'BB W $C(7),!,"This Orderable Item is flagged for IV use, but currently there are no IV",!,"Additives or IV Solutions matched to this Orderable Item!" G EDIT
"RTN","PSSPOIMO",89,0)
 G SOL
"RTN","PSSPOIMO",90,0)
CHECK ;
"RTN","PSSPOIMO",91,0)
 S ZZFLAG=0 F VV=0:0 S VV=$O(^PS(50.7,"ADF",X,PSDOSE,VV)) Q:'VV  I VV,'$P($G(^PS(50.7,VV,0)),"^",3) S ZZFLAG=1
"RTN","PSSPOIMO",92,0)
 I ZZFLAG W $C(7),!!?5,"There is already an Orderable Item with this same name and Dosage Form",!?5,"that is not flagged as 'IV'. Use the 'DISPENSE DRUG/ORDERABLE ITEM",!?5,"MAINTENANCE' option if you want to re-match to this Orderable Item!",!
"RTN","PSSPOIMO",93,0)
 Q
"RTN","PSSPOIMO",94,0)
ZCHECK ;
"RTN","PSSPOIMO",95,0)
 S ZZFLAG=0 F VV=0:0 S VV=$O(^PS(50.7,"ADF",X,PSDOSE,VV)) Q:'VV  I VV,$P($G(^PS(50.7,VV,0)),"^",3) S ZZFLAG=1
"RTN","PSSPOIMO",96,0)
 I ZZFLAG W $C(7),!!?5,"There is already an Orderable Item with the same name and Dosage Form,",!?5,"that is flagged for 'IV' use.",!
"RTN","PSSPOIMO",97,0)
 Q
"RTN","PSSPOIMO",98,0)
SOL ;
"RTN","PSSPOIMO",99,0)
 K DIR S DIR(0)="Y",DIR("B")="YES",DIR("A")="List all Additives and Solutions tied to this Orderable Item" D ^DIR K DIR G:Y["^"!($D(DTOUT)) EN G:Y=0 EDIT
"RTN","PSSPOIMO",100,0)
 H 1 K PSOARR,PSOARRAD S AAA=$O(^PS(52.6,"AOI",PSOIEN,0)) I AAA,$D(^PS(52.6,AAA,0)) S PSOARRAD=AAA
"RTN","PSSPOIMO",101,0)
 F SSS=0:0 S SSS=$O(^PS(52.7,"AOI",PSOIEN,SSS)) Q:'SSS  S:$D(^PS(52.7,SSS,0)) PSOARR(SSS)=""
"RTN","PSSPOIMO",102,0)
 S FLAG=1,UPFLAG=0 D SHEAD F ZZ=0:0 S ZZ=$O(PSOARR(ZZ)) Q:'ZZ!($G(PSOUT))!($G(UPFLAG))  S FLAG=0 D:($Y+7)>IOSL SHEAD Q:$G(PSOUT)!($G(UPFLAG))  I ZZ W !,$P($G(^PS(52.7,ZZ,0)),"^"),"   ",$P($G(^(0)),"^",3)
"RTN","PSSPOIMO",103,0)
 G:$G(PSOUT) EN
"RTN","PSSPOIMO",104,0)
 G EDIT
"RTN","PSSPOIMO",105,0)
SHEAD I 'FLAG W ! K DIR S DIR(0)="E",DIR("A")="Press RETURN to continue" D ^DIR K DIR I 'Y S:Y="" PSOUT=1 S:Y=0 UPFLAG=1 Q
"RTN","PSSPOIMO",106,0)
 W @IOF W !?6,"Orderable Item ->  ",PSOINAME,?68,"(IV)",!?6,"Dosage Form    ->  ",$P($G(^PS(50.606,+$P($G(^PS(50.7,PSOIEN,0)),"^",2),0)),"^"),!,PLINE I FLAG,'$G(PSOARRAD) W !?5,"IV Solutions:",!
"RTN","PSSPOIMO",107,0)
 I 'FLAG W !?5,"IV Solutions:",!
"RTN","PSSPOIMO",108,0)
 I FLAG,$G(PSOARRAD) W !,$P($G(^PS(52.6,PSOARRAD,0)),"^"),"    ","(IV Additive)",! I $D(PSOARR) W !?5,"IV Solutions:",!
"RTN","PSSPOIMO",109,0)
 Q
"RTN","PSSPOIMO",110,0)
DTE I $D(^PSDRUG(ZZ,"I")) S Y=$P(^PSDRUG(ZZ,"I"),"^") D DD^%DT W ?50,Y K Y
"RTN","PSSPOIMO",111,0)
 Q
"RTN","PSSPOIMO",112,0)
DTEX S Y=$G(PSSLDATE) D DD^%DT W ?50,$G(Y) K Y
"RTN","PSSPOIMO",113,0)
 Q
"RTN","PSSPOIMO",114,0)
IVMSG ; display a message if the CORRESPONDING IV field is entered
"RTN","PSSPOIMO",115,0)
 ;
"RTN","PSSPOIMO",116,0)
 S PSSIVMSG=$P(^PS(50.7,PSOIEN,0),"^",11) I PSSIVMSG="" Q
"RTN","PSSPOIMO",117,0)
 S PSSIVFRM=$P(^PS(50.7,PSSIVMSG,0),"^",2) I PSSIVFRM S PSSIVFRM=$P(^PS(50.606,PSSIVFRM,0),"^")
"RTN","PSSPOIMO",118,0)
 S PSSIVMSG=$P(^PS(50.7,PSSIVMSG,0),"^")_" "_PSSIVFRM
"RTN","PSSPOIMO",119,0)
 W !!,"The Corresponding IV Item is currently identified as: "_PSSIVMSG,!
"RTN","PSSPOIMO",120,0)
 K PSSIVFRM,PSSIVMSG
"RTN","PSSPOIMO",121,0)
 Q
"RTN","PSSPOIMO",122,0)
UDMSG ; display a message if the CORRESPONDING UD field is entered
"RTN","PSSPOIMO",123,0)
 ;
"RTN","PSSPOIMO",124,0)
 S PSSUDMSG=$P(^PS(50.7,PSOIEN,0),"^",10) I PSSUDMSG="" Q
"RTN","PSSPOIMO",125,0)
 S PSSUDFRM=$P(^PS(50.7,PSSUDMSG,0),"^",2) I PSSUDFRM S PSSUDFRM=$P(^PS(50.606,PSSUDFRM,0),"^")
"RTN","PSSPOIMO",126,0)
 S PSSUDMSG=$P(^PS(50.7,PSSUDMSG,0),"^")_" "_PSSUDFRM
"RTN","PSSPOIMO",127,0)
 W !!,"The Corresponding UD Item is currently identified as: "_PSSUDMSG,!
"RTN","PSSPOIMO",128,0)
 K PSSUDMSG,PSSUDFRM
"RTN","PSSPOIMO",129,0)
 Q
"RTN","PSSPOIMO",130,0)
DFR(PSDOSE) ; dosage form med routes - called by DR string at DIR+20^PSSPOIMO
"RTN","PSSPOIMO",131,0)
 D SETF
"RTN","PSSPOIMO",132,0)
 N MR,MRNODE,XX K ^TMP("PSSDMR",$J)
"RTN","PSSPOIMO",133,0)
 S (MCT,MR)=0 F  S MR=$O(^PS(50.606,PSDOSE,"MR",MR)) Q:'MR  D
"RTN","PSSPOIMO",134,0)
 .S XX=+$G(^PS(50.606,PSDOSE,"MR",MR,0)) Q:'XX  S MRNODE=$G(^PS(51.2,XX,0)) I $P($G(MRNODE),"^",4)'=1 Q
"RTN","PSSPOIMO",135,0)
 .S MCT=MCT+1,^TMP("PSSDMR",$J,MCT)=$P(MRNODE,U),^TMP("PSSDMR",$J,"B",XX)=""
"RTN","PSSPOIMO",136,0)
 D DFRL
"RTN","PSSPOIMO",137,0)
 Q
"RTN","PSSPOIMO",138,0)
DFRL W !!," List of med routes associated with the DOSAGE FORM of the orderable item:",!
"RTN","PSSPOIMO",139,0)
 S MCT=0 I '$O(^TMP("PSSDMR",$J,MCT)) W !,?3,"NO MED ROUTE DEFINED"
"RTN","PSSPOIMO",140,0)
 F  S MCT=$O(^TMP("PSSDMR",$J,MCT)) Q:'MCT  W !,?3,$G(^(MCT))
"RTN","PSSPOIMO",141,0)
 D EN^DDIOL(" If you answer YES to the next prompt, the DEFAULT MED ROUTE (if populated)",,"!!")
"RTN","PSSPOIMO",142,0)
 D EN^DDIOL(" and this list (if populated) will be displayed as selectable med routes",,"!")
"RTN","PSSPOIMO",143,0)
 D EN^DDIOL(" during medication ordering dialog. If you answer NO, the DEFAULT MED ROUTE",,"!")
"RTN","PSSPOIMO",144,0)
 D EN^DDIOL(" (if populated) and POSSIBLE MED ROUTES list will be displayed instead.",,"!") W !
"RTN","PSSPOIMO",145,0)
 ;K ^TMP("PSSMR",$J)
"RTN","PSSPOIMO",146,0)
 Q
"RTN","PSSPOIMO",147,0)
PDR ; possible med routes - called by DR string at DIR+20^PSSPOIMO
"RTN","PSSPOIMO",148,0)
 N MCT,MR,MRNODE,XX K ^TMP("PSSMR",$J)
"RTN","PSSPOIMO",149,0)
 S (XX,MCT)=0 F  S XX=$O(^PS(50.7,$S($G(PSVAR):PSVAR,1:PSOIEN),3,"B",XX)) Q:'XX  S MRNODE=$G(^PS(51.2,XX,0)),MCT=MCT+1,^TMP("PSSMR",$J,MCT)=$P(MRNODE,U)
"RTN","PSSPOIMO",150,0)
 I $O(^TMP("PSSMR",$J,0)) D
"RTN","PSSPOIMO",151,0)
 .W !!," List of Possible Med Routes associated with the orderable item:",!
"RTN","PSSPOIMO",152,0)
 .S MCT=0 F  S MCT=$O(^TMP("PSSMR",$J,MCT)) Q:'MCT  W !,?3,$G(^(MCT))
"RTN","PSSPOIMO",153,0)
 W ! K ^TMP("PSSMR",$J)
"RTN","PSSPOIMO",154,0)
 Q
"RTN","PSSPOIMO",155,0)
PDCHK ; called by DR string at DIR+20^PSSPOIMO
"RTN","PSSPOIMO",156,0)
 N ANS,D,DIC,DIE,DO,DICR,DR,DIR,PSOUT,PSSDA,PSSX,PSSXA,PSSY,Q,X,Y,Z
"RTN","PSSPOIMO",157,0)
 S DIR(0)="PO^51.2:EMZ",DIR("A")="POSSIBLE MED ROUTES",DIR("S")="I $P(^(0),U,4)" S PSOUT=0
"RTN","PSSPOIMO",158,0)
 S DIR("PRE")="I X=""?"" D MRTHLP^PSSPOIMO"
"RTN","PSSPOIMO",159,0)
 F  D PDR,^DIR D  I PSOUT Q
"RTN","PSSPOIMO",160,0)
 .I (X="")!$D(DTOUT)!$D(DUOUT) S PSOUT=1 Q
"RTN","PSSPOIMO",161,0)
 .I X="@",$D(PSSY) S ANS=DA D:$$DASK  Q
"RTN","PSSPOIMO",162,0)
 ..N DIK,DA S DA(1)=ANS,DIK="^PS(50.7,"_DA(1)_",3,"
"RTN","PSSPOIMO",163,0)
 ..S DA=$O(^PS(50.7,DA(1),3,"B",PSSY,"")) I DA="" Q
"RTN","PSSPOIMO",164,0)
 ..D ^DIK K PSSY,DIR("B")
"RTN","PSSPOIMO",165,0)
 .I Y="" W "  ??" Q
"RTN","PSSPOIMO",166,0)
 .I $D(^PS(50.7,DA,3,"B",+Y)) D  Q
"RTN","PSSPOIMO",167,0)
 ..I $D(DIR("B")) K PSSY,DIR("B") Q
"RTN","PSSPOIMO",168,0)
 ..S DIR("B")=Y(0,0),PSSY=+Y Q
"RTN","PSSPOIMO",169,0)
 .S PSSXA=Y(0,0),PSSX=+Y D DFR(+$P(^PS(50.7,DA,0),"^",2))
"RTN","PSSPOIMO",170,0)
 .I $G(PSSX) S ANS=$$ASK() I 'ANS Q
"RTN","PSSPOIMO",171,0)
 .S PSSDA(50.711,"+1,"_DA_",",.01)=+PSSX
"RTN","PSSPOIMO",172,0)
 .D UPDATE^DIE("","PSSDA")
"RTN","PSSPOIMO",173,0)
 .K ^TMP("PSSMR",$J)
"RTN","PSSPOIMO",174,0)
 D DP
"RTN","PSSPOIMO",175,0)
 Q
"RTN","PSSPOIMO",176,0)
ASK() ; confirm adding the new entry
"RTN","PSSPOIMO",177,0)
 N DIR,X,Y W ! S DIR(0)="YO",DIR("B")="YES"
"RTN","PSSPOIMO",178,0)
 I $D(^TMP("PSSDMR",$J)),'$D(^TMP("PSSDMR",$J,"B",PSSX)) S DIR("B")="NO",DIR("A",1)="The selected entry does not match to any of the dosage form med routes."
"RTN","PSSPOIMO",179,0)
 W $C(7) S DIR("A")="  Are you adding '"_PSSXA_"' as a new POSSIBLE MED ROUTE" D ^DIR
"RTN","PSSPOIMO",180,0)
 Q $S(Y=1:1,1:0)
"RTN","PSSPOIMO",181,0)
DASK() ; delete possible med route
"RTN","PSSPOIMO",182,0)
 N DIR
"RTN","PSSPOIMO",183,0)
 W $C(7) S DIR("A")="     SURE YOU WANT TO DELETE ",DIR(0)="Y" D ^DIR
"RTN","PSSPOIMO",184,0)
 Q $S(Y=1:1,1:0)
"RTN","PSSPOIMO",185,0)
MRTHLP ; help of possible med route
"RTN","PSSPOIMO",186,0)
 N DIC,RTE,D
"RTN","PSSPOIMO",187,0)
 S RTE=0 F  S RTE=$O(^PS(50.7,DA,3,"B",RTE)) Q:'RTE   D EN^DDIOL($P($G(^PS(51.2,RTE,0)),"^"),,"!,?4")
"RTN","PSSPOIMO",188,0)
 W ! D EN^DDIOL("Enter the most common MED ROUTE associated with this Orderable Item.",,"!,?5")
"RTN","PSSPOIMO",189,0)
 D EN^DDIOL("ONLY MED ROUTES MARKED FOR USE BY ALL PACKAGES ARE SELECTABLE.",,"!,?5")
"RTN","PSSPOIMO",190,0)
 Q
"RTN","PSSPOIMO",191,0)
DP ; check the existence of Default Med Route & Possible Med Routes
"RTN","PSSPOIMO",192,0)
 N D,DIC,DIE,DO,DICR,DR,DIR,Q,X,Y,Z
"RTN","PSSPOIMO",193,0)
 I '$P($G(^PS(50.7,$S($G(PSVAR):PSVAR,1:PSOIEN),0)),"^",6)&('$O(^PS(50.7,$S($G(PSVAR):PSVAR,1:PSOIEN),3,0))) D
"RTN","PSSPOIMO",194,0)
 .S PSR(1)=" You have not selected ANY med routes to display during order entry. In"
"RTN","PSSPOIMO",195,0)
 .S PSR(2)=" order to have med routes displayed during order entry, you must either"
"RTN","PSSPOIMO",196,0)
 .S PSR(3)=" define a DEFAULT MED ROUTE and/or at least one POSSIBLE MED ROUTE, or"
"RTN","PSSPOIMO",197,0)
 .S PSR(4)=" answer YES to the USE DOSAGE FORM MED ROUTE LIST prompt."
"RTN","PSSPOIMO",198,0)
 .S PSR(5)=" **WITH THE CURRENT SETTINGS, NO MED ROUTES WILL DISPLAY FOR SELECTION ",PSR(5,"F")="!!"
"RTN","PSSPOIMO",199,0)
 .S PSR(6)=" DURING ORDER ENTRY FOR THIS ORDERABLE ITEM**"
"RTN","PSSPOIMO",200,0)
 .D EN^DDIOL(.PSR),EN^DDIOL(" ","","!")
"RTN","PSSPOIMO",201,0)
 .K DIR S DIR(0)="Y",DIR("?",1)="If you select NO, you will continue to loop back to the Default Med Route"
"RTN","PSSPOIMO",202,0)
 .S DIR("?")="prompt until either a selection is made or you answer YES to this prompt to proceed."
"RTN","PSSPOIMO",203,0)
 .S DIR("A",1)="",DIR("A",2)="The current setting is usually only appropriate for supply items."
"RTN","PSSPOIMO",204,0)
 .S DIR("A")="Continue with NO med route displaying for selection during order entry",DIR("B")="NO"
"RTN","PSSPOIMO",205,0)
 .D ^DIR K DIR W ! I 'Y!($D(DTOUT))!($D(DUOUT)) S PSSFG=1
"RTN","PSSPOIMO",206,0)
 .S:Y PSSFG=0
"RTN","PSSPOIMO",207,0)
 E  S PSSFG=0
"RTN","PSSPOIMO",208,0)
 Q
"RTN","PSSPOIMO",209,0)
 ;
"RTN","PSSPOIMO",210,0)
SETF ;
"RTN","PSSPOIMO",211,0)
 S PSSOU=0 K ^TMP("PSJMR",$J) D MEDRT^PSSJORDF($S($G(PSVAR):PSVAR,1:PSOIEN))
"RTN","PSSPOIMO",212,0)
 I '$D(^TMP("PSJMR",$J)) S DIE("NO^")="",PSSFG=1
"RTN","PSSPOIMO",213,0)
 E  S PSSFG=0 K DIE("NO^")
"RTN","PSSPOIMO",214,0)
 Q
"RTN","PSSPOIMO",215,0)
MRSEL ;
"RTN","PSSPOIMO",216,0)
 K ^TMP("PSJMR",$J) D MEDRT^PSSJORDF($S($G(PSVAR):PSVAR,1:PSOIEN))
"RTN","PSSPOIMO",217,0)
 W !,"The following Med Routes will now be displayed during order entry:"
"RTN","PSSPOIMO",218,0)
 N I S (PSSOU,I)=0 F  S I=$O(^TMP("PSJMR",$J,I)) Q:'I   W !,$P(^(I),"^",2) S PSSOU=1
"RTN","PSSPOIMO",219,0)
 W:'PSSOU !,"(None)"
"RTN","PSSPOIMO",220,0)
 W ! S PSSOU=1
"RTN","PSSPOIMO",221,0)
 Q
"RTN","PSSPOIMO",222,0)
 ;
"UP",50.7,50.713,-1)
50.7^IND
"UP",50.7,50.713,0)
50.713
"VER")
8.0^22.2
"^DD",50.7,50.7,13,0)
INDICATIONS FOR USE^50.713A^^IND;0
"^DD",50.7,50.7,13,21,0)
^^2^2^3170501^
"^DD",50.7,50.7,13,21,1,0)
This multiple field contains the possible Indications for the Use of
"^DD",50.7,50.7,13,21,2,0)
medications ordered through CPRS and Backdoor Pharmacy.
"^DD",50.7,50.7,13,"DT")
3160921
"^DD",50.7,50.7,14,0)
MOST COMMON INDICATION FOR USE^FJ40X^^4;2^K:$L(X)>40!($L(X)<3) X
"^DD",50.7,50.7,14,3)
Answer must be 3-40 characters in length.
"^DD",50.7,50.7,14,4)

"^DD",50.7,50.7,14,21,0)
^.001^3^3^3170222^^^
"^DD",50.7,50.7,14,21,1,0)
This field contains the most common Indication for Use for the Orderable
"^DD",50.7,50.7,14,21,2,0)
Item, if one exists, and displays as the first choice in the list of
"^DD",50.7,50.7,14,21,3,0)
Indications.
"^DD",50.7,50.7,14,"DT")
3170222
"^DD",50.7,50.713,0)
INDICATIONS FOR USE SUB-FIELD^^.01^1
"^DD",50.7,50.713,0,"NM","INDICATIONS FOR USE")

"^DD",50.7,50.713,.01,0)
INDICATIONS FOR USE^MFJ40^^0;1^K:$L(X)>40!($L(X)<3) X
"^DD",50.7,50.713,.01,1,0)
^.1^^-1
"^DD",50.7,50.713,.01,1,1,0)
50.713^B
"^DD",50.7,50.713,.01,1,1,1)
S ^PS(50.7,DA(1),"IND","B",$E(X,1,30),DA)=""
"^DD",50.7,50.713,.01,1,1,2)
K ^PS(50.7,DA(1),"IND","B",$E(X,1,30),DA)
"^DD",50.7,50.713,.01,1,1,"DT")
3170217
"^DD",50.7,50.713,.01,3)
Answer must be 3-40 characters in length.
"^DD",50.7,50.713,.01,"DT")
3170501
"BLD",9736,6)
^188
**END**
**END**

