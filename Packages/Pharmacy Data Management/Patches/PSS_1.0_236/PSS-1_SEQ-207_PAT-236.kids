Released PSS*1*236 SEQ #207
Extracted from mail message
**KIDS**:PSS*1.0*236^

**INSTALL NAME**
PSS*1.0*236
"BLD",11437,0)
PSS*1.0*236^PHARMACY DATA MANAGEMENT^0^3190923^y
"BLD",11437,1,0)
^^2^2^3190328^^
"BLD",11437,1,1,0)
The description of this build can be found in the National Patch Module 
"BLD",11437,1,2,0)
under PSS*1*236.
"BLD",11437,4,0)
^9.64PA^50^1
"BLD",11437,4,50,0)
50
"BLD",11437,4,50,2,0)
^9.641^50^1
"BLD",11437,4,50,2,50,0)
DRUG  (File-top level)
"BLD",11437,4,50,2,50,1,0)
^9.6411^13^2
"BLD",11437,4,50,2,50,1,13,0)
PRICE PER ORDER UNIT
"BLD",11437,4,50,2,50,1,15,0)
DISPENSE UNITS PER ORDER UNIT
"BLD",11437,4,50,222)
y^y^p^^^^n^^n
"BLD",11437,4,50,224)

"BLD",11437,4,"APDD",50,50)

"BLD",11437,4,"APDD",50,50,13)

"BLD",11437,4,"APDD",50,50,15)

"BLD",11437,4,"B",50,50)

"BLD",11437,6.3)
6
"BLD",11437,"ABPKG")
n
"BLD",11437,"KRN",0)
^9.67PA^1.5^24
"BLD",11437,"KRN",.4,0)
.4
"BLD",11437,"KRN",.401,0)
.401
"BLD",11437,"KRN",.402,0)
.402
"BLD",11437,"KRN",.403,0)
.403
"BLD",11437,"KRN",.5,0)
.5
"BLD",11437,"KRN",.84,0)
.84
"BLD",11437,"KRN",1.5,0)
1.5
"BLD",11437,"KRN",1.6,0)
1.6
"BLD",11437,"KRN",1.61,0)
1.61
"BLD",11437,"KRN",1.62,0)
1.62
"BLD",11437,"KRN",3.6,0)
3.6
"BLD",11437,"KRN",3.8,0)
3.8
"BLD",11437,"KRN",9.2,0)
9.2
"BLD",11437,"KRN",9.8,0)
9.8
"BLD",11437,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",11437,"KRN",9.8,"NM",1,0)
PSSPRICE^^0^B8639633
"BLD",11437,"KRN",9.8,"NM","B","PSSPRICE",1)

"BLD",11437,"KRN",19,0)
19
"BLD",11437,"KRN",19.1,0)
19.1
"BLD",11437,"KRN",101,0)
101
"BLD",11437,"KRN",409.61,0)
409.61
"BLD",11437,"KRN",771,0)
771
"BLD",11437,"KRN",779.2,0)
779.2
"BLD",11437,"KRN",870,0)
870
"BLD",11437,"KRN",8989.51,0)
8989.51
"BLD",11437,"KRN",8989.52,0)
8989.52
"BLD",11437,"KRN",8994,0)
8994
"BLD",11437,"KRN","B",.4,.4)

"BLD",11437,"KRN","B",.401,.401)

"BLD",11437,"KRN","B",.402,.402)

"BLD",11437,"KRN","B",.403,.403)

"BLD",11437,"KRN","B",.5,.5)

"BLD",11437,"KRN","B",.84,.84)

"BLD",11437,"KRN","B",1.5,1.5)

"BLD",11437,"KRN","B",1.6,1.6)

"BLD",11437,"KRN","B",1.61,1.61)

"BLD",11437,"KRN","B",1.62,1.62)

"BLD",11437,"KRN","B",3.6,3.6)

"BLD",11437,"KRN","B",3.8,3.8)

"BLD",11437,"KRN","B",9.2,9.2)

"BLD",11437,"KRN","B",9.8,9.8)

"BLD",11437,"KRN","B",19,19)

"BLD",11437,"KRN","B",19.1,19.1)

"BLD",11437,"KRN","B",101,101)

"BLD",11437,"KRN","B",409.61,409.61)

"BLD",11437,"KRN","B",771,771)

"BLD",11437,"KRN","B",779.2,779.2)

"BLD",11437,"KRN","B",870,870)

"BLD",11437,"KRN","B",8989.51,8989.51)

"BLD",11437,"KRN","B",8989.52,8989.52)

"BLD",11437,"KRN","B",8994,8994)

"BLD",11437,"QUES",0)
^9.62^^
"BLD",11437,"REQB",0)
^9.611^1^1
"BLD",11437,"REQB",1,0)
PSS*1.0*227^2
"BLD",11437,"REQB","B","PSS*1.0*227",1)

"FIA",50)
DRUG
"FIA",50,0)
^PSDRUG(
"FIA",50,0,0)
50I
"FIA",50,0,1)
y^y^p^^^^n^^n
"FIA",50,0,10)

"FIA",50,0,11)

"FIA",50,0,"RLRO")

"FIA",50,0,"VR")
1.0^PSS
"FIA",50,50)
1
"FIA",50,50,13)

"FIA",50,50,15)

"MBREQ")
0
"PKG",488,-1)
1^1
"PKG",488,0)
PHARMACY DATA MANAGEMENT^PSS^Maintenance of Pharmacy files.
"PKG",488,22,0)
^9.49I^1^1
"PKG",488,22,1,0)
1.0^2970930^3000316^66481
"PKG",488,22,1,"PAH",1,0)
236^3190923
"PKG",488,22,1,"PAH",1,1,0)
^^2^2^3190923
"PKG",488,22,1,"PAH",1,1,1,0)
The description of this build can be found in the National Patch Module 
"PKG",488,22,1,"PAH",1,1,2,0)
under PSS*1*236.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSSPRICE")
0^1^B8639633^B5169572
"RTN","PSSPRICE",1,0)
PSSPRICE ;EPIP/WC - PHARMACY PRICE TRACKER FILE 50;03-06-2017  ; 22 May 2018  10:11 AM
"RTN","PSSPRICE",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**227,236**;2/28/17;Build 6
"RTN","PSSPRICE",3,0)
 Q  ; call by line tag
"RTN","PSSPRICE",4,0)
 ; UDPATE^DIE supported by ICR #2053
"RTN","PSSPRICE",5,0)
 ; ^XMD supported by ICR #10113
"RTN","PSSPRICE",6,0)
ST(PSSIEN,PSSDUZ,PSSFLD) ;
"RTN","PSSPRICE",7,0)
 ;  PSSIEN=DRUG IEN
"RTN","PSSPRICE",8,0)
 ;  PSSNEW=NEW PRICE
"RTN","PSSPRICE",9,0)
 ;  PSSDUZ=USER CHANGING PRICE
"RTN","PSSPRICE",10,0)
 ;  PSSFLD=13-PRICE PER ORDER UNIT, 15-DISPENSE UNITS PER ORDER UNIT ;p236
"RTN","PSSPRICE",11,0)
 ; CLASS 3 CROSS REFER ON FILE 50 FIELD #16 
"RTN","PSSPRICE",12,0)
 N DA,DIE,X,Y,DIC
"RTN","PSSPRICE",13,0)
 N PSSNEW
"RTN","PSSPRICE",14,0)
 ;LEAST GET THE TIME THE CHANGE WAS MADE
"RTN","PSSPRICE",15,0)
 H 1 D NOW^%DTC S PSSTIME=%
"RTN","PSSPRICE",16,0)
 S PSSNEW=$P($G(^PSDRUG(PSSIEN,660)),"^",6)
"RTN","PSSPRICE",17,0)
 ;
"RTN","PSSPRICE",18,0)
QUE ;ENTER THE DATA IN FILE 50 MULTIPLE FIELD 950 
"RTN","PSSPRICE",19,0)
 S ZTRTN="HIS^PSSPRICE"
"RTN","PSSPRICE",20,0)
 S ZTDESC="PHARMACY PRICE TRACKER "
"RTN","PSSPRICE",21,0)
 S ZTSAVE("PSSIEN")=""
"RTN","PSSPRICE",22,0)
 S ZTSAVE("PSSNEW")=""
"RTN","PSSPRICE",23,0)
 S ZTSAVE("PSSDUZ")=""
"RTN","PSSPRICE",24,0)
 S ZTSAVE("PSSTIME")=""
"RTN","PSSPRICE",25,0)
 S ZTSAVE("PSSFLD")=""
"RTN","PSSPRICE",26,0)
 S ZTIO=""
"RTN","PSSPRICE",27,0)
 D NOW^%DTC S ZTDTH=%
"RTN","PSSPRICE",28,0)
 D ^%ZTLOAD
"RTN","PSSPRICE",29,0)
 D HOME^%ZIS
"RTN","PSSPRICE",30,0)
 Q
"RTN","PSSPRICE",31,0)
HIS ;LOGS CHANGES IN FILE 50 HISTORY PRICE DISPENSE #950
"RTN","PSSPRICE",32,0)
 ; first delete any price updates prior to the retention limit set up in the paramater PSS DRUG AUDIT RETENTION MOS 
"RTN","PSSPRICE",33,0)
 N DEFDT,PSIEN2 S DEFDT=+$$GET^XPAR("ALL","PSS DRUG AUDIT RETENTION MOS")
"RTN","PSSPRICE",34,0)
 S DEFMOS=$S(DEFDT>0:DEFDT,1:999999999)
"RTN","PSSPRICE",35,0)
 S X1=$$NOW^XLFDT,X2=DEFMOS*30 D C^%DTC S ENDDT=X
"RTN","PSSPRICE",36,0)
 S X1=$P($$NOW^XLFDT,".",1)
"RTN","PSSPRICE",37,0)
 S ENDDT=$$FMADD^XLFDT(DT,"-"_(DEFMOS*30))
"RTN","PSSPRICE",38,0)
 I $O(^PSDRUG(PSSIEN,950,0)) D
"RTN","PSSPRICE",39,0)
 . F  S PSIEN2=$O(^PSDRUG(PSSIEN,950,0)) Q:'PSIEN2  Q:^(PSIEN2,0)>ENDDT  D  ;p236
"RTN","PSSPRICE",40,0)
 . . N DIK,DA
"RTN","PSSPRICE",41,0)
 . . S DIK="^PSDRUG(PSSIEN,950,",DA(1)=PSSIEN,DA=PSIEN2 D ^DIK  ; Delete old data
"RTN","PSSPRICE",42,0)
 N PSSPDU S PSSPDU=99999,PSSPDU=$O(^PSDRUG(PSSIEN,950,PSSPDU),-1) ; p236
"RTN","PSSPRICE",43,0)
 I PSSPDU>0,PSSNEW=$P($G(^PSDRUG(PSSIEN,950,PSSPDU,0)),"^",3) Q  ; p236 Quit if no changes to PRICE PER DISPENSE UNIT
"RTN","PSSPRICE",44,0)
 N FDA
"RTN","PSSPRICE",45,0)
 S FDA(50.095,"?+1,"_PSSIEN_",",.01)=PSSTIME
"RTN","PSSPRICE",46,0)
 S FDA(50.095,"?+1,"_PSSIEN_",",1)=PSSDUZ
"RTN","PSSPRICE",47,0)
 S FDA(50.095,"?+1,"_PSSIEN_",",3)=PSSNEW
"RTN","PSSPRICE",48,0)
 D UPDATE^DIE("","FDA")
"RTN","PSSPRICE",49,0)
 S PSSNAME=$$GET1^DIQ(200,PSSDUZ_",",.01)
"RTN","PSSPRICE",50,0)
BULL ;Generate the bulletin.
"RTN","PSSPRICE",51,0)
 S XMY("G.PSS DEE AUDIT")=""
"RTN","PSSPRICE",52,0)
 S XMSUB="Pharmacy Price Tracker",XMDUZ=.5
"RTN","PSSPRICE",53,0)
 S ^UTILITY($J,"PHARM TRACK",1)=PSSNAME_" has changed the "_$S(PSSFLD=13:"PRICE PER ORDER UNIT",1:"DISPENSE UNITS PER ORDER UNIT") ;p236
"RTN","PSSPRICE",54,0)
 S ^UTILITY($J,"PHARM TRACK",2)="The PRICE PER DISPENSE UNIT of:"
"RTN","PSSPRICE",55,0)
 S ^UTILITY($J,"PHARM TRACK",3)=$P($G(^PSDRUG(PSSIEN,0)),"^",1)_" is: "_PSSNEW
"RTN","PSSPRICE",56,0)
 S ^UTILITY($J,"PHARM TRACK",4)="" ;p236
"RTN","PSSPRICE",57,0)
 S ^UTILITY($J,"PHARM TRACK",5)="Date/Time changed: "_$$FMTE^XLFDT(PSSTIME) ;p236
"RTN","PSSPRICE",58,0)
 S XMTEXT="^UTILITY($J,""PHARM TRACK""," D ^XMD
"RTN","PSSPRICE",59,0)
 K %,PSSTIME,PSSIEN,PSSNAME,PSSOLD,PSSNEW,PSSDUZ,PSSFLD,^UTILITY($J),XMSUB,XMTEXT,XMDUZ
"RTN","PSSPRICE",60,0)
 Q
"RTN","PSSPRICE",61,0)
 ;
"VER")
8.0^22.2
"^DD",50,50,13,0)
PRICE PER ORDER UNIT^NJ7,2X^^660;3^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>99999)!(X<0)!(X?.E1"."3.N) X
"^DD",50,50,13,.1)

"^DD",50,50,13,1,0)
^.1^^-1
"^DD",50,50,13,1,1,0)
^^TRIGGER^50^16
"^DD",50,50,13,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S Y(1)=$S($D(^PSDRUG(D0,660)):^(660),1:"") S X=$P(Y(1),U,5)>0 I X S X=DIV S Y(1)=$S($D(^PSDRUG(D0,660)):^(660),1:"") S X=$P(Y(1),U,6),X=X S DIU=X K Y X ^DD(50,13,1,1,1.1) X ^DD(50,13,1,1,1.4)
"^DD",50,50,13,1,1,1.1)
S X=DIV S Y(1)=$S($D(^PSDRUG(D0,660)):^(660),1:"") S X=DIV,X=$S($P(Y(1),U,5):X/$P(Y(1),U,5),1:"*******"),Y(2)=$G(X) S X=1,Y(3)=$G(X) S X=4,X=$J(Y(2),Y(3),X)
"^DD",50,50,13,1,1,1.4)
S DIH=$G(^PSDRUG(DIV(0),660)),DIV=X S $P(^(660),U,6)=DIV,DIH=50,DIG=16 D ^DICR
"^DD",50,50,13,1,1,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^PSDRUG(D0,660)):^(660),1:"") S X=$P(Y(1),U,6),X=X S DIU=X K Y S X="" S DIH=$G(^PSDRUG(DIV(0),660)),DIV=X S $P(^(660),U,6)=DIV,DIH=50,DIG=16 D ^DICR
"^DD",50,50,13,1,1,"CREATE CONDITION")
#15>0
"^DD",50,50,13,1,1,"CREATE VALUE")
$J(#13/#15,1,4)
"^DD",50,50,13,1,1,"DELETE VALUE")
@
"^DD",50,50,13,1,1,"DT")
3130327
"^DD",50,50,13,1,1,"FIELD")
#16
"^DD",50,50,13,1,2,0)
50^PRC^MUMPS
"^DD",50,50,13,1,2,1)
D ST^PSSPRICE(DA,DUZ,DI)
"^DD",50,50,13,1,2,2)
S:X'="" X=X
"^DD",50,50,13,1,2,"%D",0)
^.101^2^2^3190822^^
"^DD",50,50,13,1,2,"%D",1,0)
Cross-reference to set history of price change multiple (field #950) for
"^DD",50,50,13,1,2,"%D",2,0)
changes to this field.
"^DD",50,50,13,1,2,"DT")
3190822
"^DD",50,50,13,3)
Type a Dollar Amount between 0 and 99999, 2 Decimal Digits.
"^DD",50,50,13,20,0)
^.3LA^1^1
"^DD",50,50,13,20,1,0)
PS
"^DD",50,50,13,21,0)
^^1^1^3060407^^
"^DD",50,50,13,21,1,0)
  This is the price per order unit for this drug.
"^DD",50,50,13,"AUDIT")

"^DD",50,50,13,"DT")
3190923
"^DD",50,50,15,0)
DISPENSE UNITS PER ORDER UNIT^NJ10,4^^660;5^K:+X'=X!(X>99999)!(X<1)!(X?.E1"."5N.N) X
"^DD",50,50,15,1,0)
^.1
"^DD",50,50,15,1,1,0)
^^TRIGGER^50^16
"^DD",50,50,15,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S X=Y(0)>0 I X S X=DIV S Y(1)=$S($D(^PSDRUG(D0,660)):^(660),1:"") S X=$P(Y(1),U,6),X=X S DIU=X K Y X ^DD(50,15,1,1,1.1) X ^DD(50,15,1,1,1.4)
"^DD",50,50,15,1,1,1.1)
S X=DIV S Y(1)=$S($D(^PSDRUG(D0,660)):^(660),1:"") S X=$P(Y(1),U,3),X=$S(DIV:X/DIV,1:"*******"),Y(2)=$G(X) S X=1,Y(3)=$G(X) S X=4,X=$J(Y(2),Y(3),X)
"^DD",50,50,15,1,1,1.4)
S DIH=$G(^PSDRUG(DIV(0),660)),DIV=X S $P(^(660),U,6)=DIV,DIH=50,DIG=16 D ^DICR
"^DD",50,50,15,1,1,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^PSDRUG(D0,660)):^(660),1:"") S X=$P(Y(1),U,6),X=X S DIU=X K Y S X="" S DIH=$G(^PSDRUG(DIV(0),660)),DIV=X S $P(^(660),U,6)=DIV,DIH=50,DIG=16 D ^DICR
"^DD",50,50,15,1,1,"CREATE CONDITION")
#15>0
"^DD",50,50,15,1,1,"CREATE VALUE")
$J(#13/#15,1,4)
"^DD",50,50,15,1,1,"DELETE VALUE")
@
"^DD",50,50,15,1,1,"DT")
3130327
"^DD",50,50,15,1,1,"FIELD")
#16
"^DD",50,50,15,1,2,0)
50^DUO^MUMPS
"^DD",50,50,15,1,2,1)
D ST^PSSPRICE(DA,DUZ,DI)
"^DD",50,50,15,1,2,2)
S:X'="" X=X
"^DD",50,50,15,1,2,"%D",0)
^.101^3^3^3190822^^
"^DD",50,50,15,1,2,"%D",1,0)
Cross-reference to set history of price change multiple (field #950) for
"^DD",50,50,15,1,2,"%D",2,0)
changes to this field. Also, the bulletin Pharmacy Price Tracker will be
"^DD",50,50,15,1,2,"%D",3,0)
created and sent to the PSS DEE AUDIT mail group.
"^DD",50,50,15,1,2,"DT")
3190822
"^DD",50,50,15,3)
Type a Number between 1 and 99999, 4 Decimal Digits
"^DD",50,50,15,20,0)
^.3LA^1^1
"^DD",50,50,15,20,1,0)
PS
"^DD",50,50,15,21,0)
^.001^1^1^3190730^^^^
"^DD",50,50,15,21,1,0)
  This is the dispense units per order unit for this drug.
"^DD",50,50,15,23,0)
^.001^1^1^3190730^^^^
"^DD",50,50,15,23,1,0)
 
"^DD",50,50,15,"DT")
3190822
"BLD",11437,6)
^207
**END**
**END**

