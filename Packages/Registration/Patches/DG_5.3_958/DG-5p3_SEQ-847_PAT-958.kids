Released DG*5.3*958 SEQ #847
Extracted from mail message
**KIDS**:DG*5.3*958^

**INSTALL NAME**
DG*5.3*958
"BLD",10577,0)
DG*5.3*958^REGISTRATION^0^3180525^y
"BLD",10577,1,0)
^^6^6^3180525^
"BLD",10577,1,1,0)
This patch addresses NSR 20171118. It modifies the option Religion List 
"BLD",10577,1,2,0)
for Inpatients [DG RELIGION LIST] to display only the last four digits of
"BLD",10577,1,3,0)
a patient's Social Security Number (SSN). This option is used to run a
"BLD",10577,1,4,0)
report listing inpatients by religious faith. Currently, this option
"BLD",10577,1,5,0)
unnecessarily displays each patient's full SSN. This modification helps
"BLD",10577,1,6,0)
protect patient privacy and supports national SSN reduction efforts.
"BLD",10577,4,0)
^9.64PA^^
"BLD",10577,6.3)
2
"BLD",10577,"ABPKG")
n
"BLD",10577,"KRN",0)
^9.67PA^779.2^20
"BLD",10577,"KRN",.4,0)
.4
"BLD",10577,"KRN",.401,0)
.401
"BLD",10577,"KRN",.402,0)
.402
"BLD",10577,"KRN",.403,0)
.403
"BLD",10577,"KRN",.5,0)
.5
"BLD",10577,"KRN",.84,0)
.84
"BLD",10577,"KRN",3.6,0)
3.6
"BLD",10577,"KRN",3.8,0)
3.8
"BLD",10577,"KRN",9.2,0)
9.2
"BLD",10577,"KRN",9.8,0)
9.8
"BLD",10577,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10577,"KRN",9.8,"NM",1,0)
DGOREL1^^0^B19715974
"BLD",10577,"KRN",9.8,"NM","B","DGOREL1",1)

"BLD",10577,"KRN",19,0)
19
"BLD",10577,"KRN",19.1,0)
19.1
"BLD",10577,"KRN",101,0)
101
"BLD",10577,"KRN",409.61,0)
409.61
"BLD",10577,"KRN",771,0)
771
"BLD",10577,"KRN",779.2,0)
779.2
"BLD",10577,"KRN",870,0)
870
"BLD",10577,"KRN",8989.51,0)
8989.51
"BLD",10577,"KRN",8989.52,0)
8989.52
"BLD",10577,"KRN",8994,0)
8994
"BLD",10577,"KRN","B",.4,.4)

"BLD",10577,"KRN","B",.401,.401)

"BLD",10577,"KRN","B",.402,.402)

"BLD",10577,"KRN","B",.403,.403)

"BLD",10577,"KRN","B",.5,.5)

"BLD",10577,"KRN","B",.84,.84)

"BLD",10577,"KRN","B",3.6,3.6)

"BLD",10577,"KRN","B",3.8,3.8)

"BLD",10577,"KRN","B",9.2,9.2)

"BLD",10577,"KRN","B",9.8,9.8)

"BLD",10577,"KRN","B",19,19)

"BLD",10577,"KRN","B",19.1,19.1)

"BLD",10577,"KRN","B",101,101)

"BLD",10577,"KRN","B",409.61,409.61)

"BLD",10577,"KRN","B",771,771)

"BLD",10577,"KRN","B",779.2,779.2)

"BLD",10577,"KRN","B",870,870)

"BLD",10577,"KRN","B",8989.51,8989.51)

"BLD",10577,"KRN","B",8989.52,8989.52)

"BLD",10577,"KRN","B",8994,8994)

"BLD",10577,"QUES",0)
^9.62^^
"BLD",10577,"REQB",0)
^9.611^1^1
"BLD",10577,"REQB",1,0)
DG*5.3*162^1
"BLD",10577,"REQB","B","DG*5.3*162",1)

"MBREQ")
0
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2930813^2930930
"PKG",5,22,1,"PAH",1,0)
958^3180525
"PKG",5,22,1,"PAH",1,1,0)
^^6^6^3180525
"PKG",5,22,1,"PAH",1,1,1,0)
This patch addresses NSR 20171118. It modifies the option Religion List 
"PKG",5,22,1,"PAH",1,1,2,0)
for Inpatients [DG RELIGION LIST] to display only the last four digits of
"PKG",5,22,1,"PAH",1,1,3,0)
a patient's Social Security Number (SSN). This option is used to run a
"PKG",5,22,1,"PAH",1,1,4,0)
report listing inpatients by religious faith. Currently, this option
"PKG",5,22,1,"PAH",1,1,5,0)
unnecessarily displays each patient's full SSN. This modification helps
"PKG",5,22,1,"PAH",1,1,6,0)
protect patient privacy and supports national SSN reduction efforts.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","DGOREL1")
0^1^B19715974^B19541164
"RTN","DGOREL1",1,0)
DGOREL1 ;ALB/MAC - PATIENT OUTPUT BY RELIGIOUS AFFILIATIONS (Cont.) ; 5/25/18 8:31am
"RTN","DGOREL1",2,0)
 ;;5.3;Registration;**162,958**;Aug 13, 1993;Build 2
"RTN","DGOREL1",3,0)
START D NOW^%DTC S Y=$E(%,1,12) S DGDT=$$FMTE^XLFDT(Y,1),(DGJ,DGJJ,DGP,DFN,DGW,DGF,DGFLAG,DGU,DGRM)=0,$P(DGCL,"*",81)="",$P(DGCL1,"-",81)=""
"RTN","DGOREL1",4,0)
 I DGL="D" F DGDA=DGBEG:0 S DGDA=$O(^DGPM("AMV1",DGDA)) Q:'DGDA  F DFN=0:0 S DFN=$O(^DGPM("AMV1",DGDA,DFN)) Q:'DFN  F DGCA=0:0 S DGCA=$O(^DGPM("AMV1",DGDA,DFN,DGCA)) Q:'DGCA  I $D(^DGPM(DGCA,0)) I DGDA<DGEND D SET1
"RTN","DGOREL1",5,0)
 I DGL="D" G PR
"RTN","DGOREL1",6,0)
 F X1=0:0 S DGW=$S(VAUTW:$O(^DPT("CN",DGW)),1:$O(VAUTW(DGW))) Q:DGW=""!(DGU)  D DIV,DGSET:'DGF
"RTN","DGOREL1",7,0)
PR I $D(^UTILITY($J,"DGC")) S DGFL=0,DGPG=0 D:IOST?1"C-".E&(DGFLAG) RET I 'DGU D DGUTIL
"RTN","DGOREL1",8,0)
 I '$D(^UTILITY($J,"DGC")) W !,"=====>NO PATIENTS FOUND"
"RTN","DGOREL1",9,0)
 G QUIT
"RTN","DGOREL1",10,0)
DIV S DGDN=$O(^DIC(42,"B",DGW,0)) Q:DGDN=""  I $D(^DIC(42,DGDN,0)) S DGDN=$P(^DIC(42,DGDN,0),"^",11),DGF=$S('VAUTD&('$D(VAUTD(+DGDN))):1,1:0) S DGD=$S(DGDN="":"ZNOT SPECIFIED",1:$P(^DG(40.8,DGDN,0),"^",1))
"RTN","DGOREL1",11,0)
 Q
"RTN","DGOREL1",12,0)
DGUTIL S (DGD,DGW)=0
"RTN","DGOREL1",13,0)
 F J1=0:0 S DGD=$O(^UTILITY($J,"DGC",DGD)) Q:DGD=""!(DGU)  D
"RTN","DGOREL1",14,0)
 . F D1=0:0 S DGW=$O(^UTILITY($J,"DGC",DGD,DGW)) Q:DGW=""!(DGU)  D RET:DGJ=-1 Q:DGU  S DGPG=0 D HEAD F P1=0:0 S DGJ=$O(^UTILITY($J,"DGC",DGD,DGW,DGJ)) S:DGJ="" DGJ=-1 Q:DGJ<0!(DGU)  D RELP,CONT
"RTN","DGOREL1",15,0)
 Q
"RTN","DGOREL1",16,0)
CONT F D1=0:0 S DGP=$O(^UTILITY($J,"DGC",DGD,DGW,DGJ,DGP)) Q:DGP=""!(DGU)  F DFN=0:0 S DFN=$O(^UTILITY($J,"DGC",DGD,DGW,DGJ,DGP,DFN)) Q:'DFN!(DGU)  S DGUT=^(DFN) D DGPR W !
"RTN","DGOREL1",17,0)
 Q
"RTN","DGOREL1",18,0)
DGSET F DFN=0:0 S DFN=$O(^DPT("CN",DGW,DFN)) Q:'DFN  S DGCA=^(DFN) Q:'$D(^DGPM(+DGCA,0))  I $P(^DGPM(DGCA,0),"^",2)=1 S DGAD=^(0) D SET
"RTN","DGOREL1",19,0)
 Q
"RTN","DGOREL1",20,0)
SET1 S DGDD=$P(^DGPM(DGCA,0),"^",17) I DGDD]"" Q:+^DGPM(+DGDD,0)<DGEND
"RTN","DGOREL1",21,0)
 S DGAD=^DGPM(DGCA,0) Q:'$D(^DPT(DFN,.1))  S DGW=^(.1) Q:DGW=""  Q:('VAUTW)&('$D(VAUTW(DGW)))  D DIV Q:DGF
"RTN","DGOREL1",22,0)
SET S DGDAT=^DPT(DFN,0),DGREL=$S($D(^DIC(13,+$P(DGDAT,"^",8),0)):$P(^(0),"^",1),1:"ZNOT SPECIFIED") Q:DGNON=2&(DGREL="ZNOT SPECIFIED")  I $D(DGR) Q:DGR'=DGREL
"RTN","DGOREL1",23,0)
 D PID^VADPT6 S DGRM=$S($D(^DPT(DFN,.101)):^(.101),1:"") I DGHOW["W" S ^UTILITY($J,"DGC",$E(DGD,1,20),$E(DGW,1,20),$E(DGREL,1,19),$E($P(DGDAT,"^",1),1,20),DFN)=$P(DGDAT,"^",1)_"^"_VA("PID")_"^"_+DGAD_"^"_DGRM Q
"RTN","DGOREL1",24,0)
 S ^UTILITY($J,"DGC",$E(DGD,1,20),$E(DGREL,1,19),$E(DGW,1,20),$E($P(DGDAT,"^",1),1,20),DFN)=$P(DGDAT,"^",1)_"^"_VA("PID")_"^"_+DGAD_"^"_DGRM Q
"RTN","DGOREL1",25,0)
 Q
"RTN","DGOREL1",26,0)
RET Q:IOST'?1"C-".E  F X=$Y:1:(IOSL-2) W !
"RTN","DGOREL1",27,0)
 R ?22,"Enter <RET> to continue or ^ to QUIT ",X:DTIME S:X["^"!('$T) DGU=1 Q:DGU  S DGFLAG=1 Q
"RTN","DGOREL1",28,0)
RELP I $Y+6>IOSL D RET:(IOST?1"C-".E) Q:DGU  D HEAD
"RTN","DGOREL1",29,0)
 W:DGFL DGCL1 W !,$S(DGHOW["W":"RELIGION: ",1:"WARD: "),$S(DGJ'="ZNOT SPECIFIED":DGJ,1:$E(DGJ,2,14)),! S DGFL=1 Q
"RTN","DGOREL1",30,0)
 ; DG*5.3*958, truncate SSN to last four numbers and display at tab 43
"RTN","DGOREL1",31,0)
DGPR ;D:$Y+4>IOSL RELP Q:DGU  W ?3,$P(DGUT,"^",4),?15,$P(DGUT,"^",1),?40,$P(DGUT,"^",2),?58 S Y=$P(DGUT,"^",3) X ^DD("DD") W Y Q
"RTN","DGOREL1",32,0)
 D:$Y+4>IOSL RELP Q:DGU  W ?3,$P(DGUT,"^",4),?15,$P(DGUT,"^",1),?43,$E($P(DGUT,"^",2),8,11),?58 S Y=$P(DGUT,"^",3) X ^DD("DD") W Y Q
"RTN","DGOREL1",33,0)
HEAD S DGPG=DGPG+1 W @IOF,!?3,"DIVISION: ",$S(DGD="ZNOT SPECIFIED":"NOT SPECIFIED",1:DGD),?50,DGDT,?63," PAGE ",DGPG,!?24,"INPATIENT RELIGIOUS AFFILIATIONS",!
"RTN","DGOREL1",34,0)
 S DGSP="LISTING BY "_$S(DGHOW["W":"WARD - ",1:"FAITH - ")_$S(DGW'="ZNOT SPECIFIED":DGW,1:$E(DGW,2,14)),DGSP1=40-($L(DGSP)/2)\1,DGFL=0 W ?DGSP1,DGSP,!
"RTN","DGOREL1",35,0)
 I DGL="D" S DGT=$S(DGBEG1=DGEND1:"FOR ",1:"FROM ") S DGT=DGT_$$FMTE^XLFDT(DGBEG1,"1D") I DGEND1'=DGBEG1 S DGT=DGT_" TO "_$$FMTE^XLFDT(DGEND1,"1D")
"RTN","DGOREL1",36,0)
 I DGL="C" S DGT="FOR "_$P(DGDT,"@",1)
"RTN","DGOREL1",37,0)
 S DGY=40-($L(DGT)/2) W ?DGY,DGT,!!?4,"ROOM",?20,"PATIENT",?43,"PT ID",?60,"ADMISSION DATE",!,DGCL Q
"RTN","DGOREL1",38,0)
QUIT D CLOSE^DGUTQ
"RTN","DGOREL1",39,0)
QUIT1 K %,D1,DIC,DFN,DGAD,DGBEG,DGBEG1,DGCA,DGCL,DGCL1,DGDAT,DGDT,DGF,DGD,DGDN,DGDV,DGEND,DGEND1,DGFL,DGFLAG,DGHOW,DGJ,DGJJ,DGL,DGN,DGNON,DGP,DGPG,DGPGM,DGR,DGREL,DGRM
"RTN","DGOREL1",40,0)
 K DGDA,DGDD,DGSP,DGSP1,DGT,DGU,DGUT,DGVAR,DGW,DGWN,DGY,J1,P1,POP,VA("BID"),VA("PID"),VAUTD,VADAT,VADATE,VAUTNI,VAUTW,I,X,X1,Y,Z,^UTILITY($J,"DGC") Q
"VER")
8.0^22.2
"BLD",10577,6)
^847
**END**
**END**

