Released DG*5.3*933 SEQ #835
Extracted from mail message
**KIDS**:DG*5.3*933^

**INSTALL NAME**
DG*5.3*933
"BLD",10052,0)
DG*5.3*933^REGISTRATION^0^3171011^y
"BLD",10052,1,0)
^^5^5^3170831^^^^
"BLD",10052,1,1,0)
This patch implements Demographics domain changes required by the
"BLD",10052,1,2,0)
Collaborative Terminology Tooling & Data Management (CTT & DM) Native
"BLD",10052,1,3,0)
Standardization (NDS) project.
"BLD",10052,1,4,0)
 
"BLD",10052,1,5,0)
Please see FORUM for full patch description and installation instructions.
"BLD",10052,4,0)
^9.64PA^13.99^6
"BLD",10052,4,10,0)
10
"BLD",10052,4,10,2,0)
^9.641^10^1
"BLD",10052,4,10,2,10,0)
RACE  (File-top level)
"BLD",10052,4,10,2,10,1,0)
^9.6411^90^1
"BLD",10052,4,10,2,10,1,90,0)
RACE MASTER
"BLD",10052,4,10,222)
y^y^p^^^^n^^n
"BLD",10052,4,10,224)

"BLD",10052,4,10.99,0)
10.99
"BLD",10052,4,10.99,222)
y^y^f^^^^n
"BLD",10052,4,11,0)
11
"BLD",10052,4,11,2,0)
^9.641^11^1
"BLD",10052,4,11,2,11,0)
MARITAL STATUS  (File-top level)
"BLD",10052,4,11,2,11,1,0)
^9.6411^90^1
"BLD",10052,4,11,2,11,1,90,0)
MASTER MARITAL STATUS
"BLD",10052,4,11,222)
y^y^p^^^^n^^n
"BLD",10052,4,11,224)

"BLD",10052,4,11.99,0)
11.99
"BLD",10052,4,11.99,222)
y^y^f^^^^n
"BLD",10052,4,13,0)
13
"BLD",10052,4,13,2,0)
^9.641^13^1
"BLD",10052,4,13,2,13,0)
RELIGION  (File-top level)
"BLD",10052,4,13,2,13,1,0)
^9.6411^90^1
"BLD",10052,4,13,2,13,1,90,0)
MASTER RELIGION
"BLD",10052,4,13,222)
y^y^p^^^^n^^n
"BLD",10052,4,13,224)

"BLD",10052,4,13.99,0)
13.99
"BLD",10052,4,13.99,222)
y^y^f^^^^n
"BLD",10052,4,"APDD",10,10)

"BLD",10052,4,"APDD",10,10,90)

"BLD",10052,4,"APDD",11,11)

"BLD",10052,4,"APDD",11,11,90)

"BLD",10052,4,"APDD",13,13)

"BLD",10052,4,"APDD",13,13,90)

"BLD",10052,4,"B",10,10)

"BLD",10052,4,"B",10.99,10.99)

"BLD",10052,4,"B",11,11)

"BLD",10052,4,"B",11.99,11.99)

"BLD",10052,4,"B",13,13)

"BLD",10052,4,"B",13.99,13.99)

"BLD",10052,6)
3^
"BLD",10052,6.3)
44
"BLD",10052,"ABPKG")
n
"BLD",10052,"INIT")
DG933PO
"BLD",10052,"KRN",0)
^9.67PA^779.2^20
"BLD",10052,"KRN",.4,0)
.4
"BLD",10052,"KRN",.401,0)
.401
"BLD",10052,"KRN",.402,0)
.402
"BLD",10052,"KRN",.402,"NM",0)
^9.68A^3^3
"BLD",10052,"KRN",.402,"NM",1,0)
DGMF AMREL    FILE #13^13^0
"BLD",10052,"KRN",.402,"NM",2,0)
DGMF ARACE    FILE #10^10^0
"BLD",10052,"KRN",.402,"NM",3,0)
DGMF AMSTAT    FILE #11^11^0
"BLD",10052,"KRN",.402,"NM","B","DGMF AMREL    FILE #13",1)

"BLD",10052,"KRN",.402,"NM","B","DGMF AMSTAT    FILE #11",3)

"BLD",10052,"KRN",.402,"NM","B","DGMF ARACE    FILE #10",2)

"BLD",10052,"KRN",.403,0)
.403
"BLD",10052,"KRN",.5,0)
.5
"BLD",10052,"KRN",.84,0)
.84
"BLD",10052,"KRN",3.6,0)
3.6
"BLD",10052,"KRN",3.8,0)
3.8
"BLD",10052,"KRN",9.2,0)
9.2
"BLD",10052,"KRN",9.2,"NM",0)
^9.68A^^
"BLD",10052,"KRN",9.8,0)
9.8
"BLD",10052,"KRN",9.8,"NM",0)
^9.68A^12^11
"BLD",10052,"KRN",9.8,"NM",2,0)
DG933PO^^0^B27885525
"BLD",10052,"KRN",9.8,"NM",3,0)
DGMFR13^^0^B62970443
"BLD",10052,"KRN",9.8,"NM",4,0)
DGMFR11^^0^B68721321
"BLD",10052,"KRN",9.8,"NM",5,0)
DGMFR10^^0^B72687376
"BLD",10052,"KRN",9.8,"NM",6,0)
DGMFA10^^0^B14104060
"BLD",10052,"KRN",9.8,"NM",7,0)
DGMFA11^^0^B14590448
"BLD",10052,"KRN",9.8,"NM",8,0)
DGMFA13^^0^B13906961
"BLD",10052,"KRN",9.8,"NM",9,0)
DGMFASS^^0^B3776607
"BLD",10052,"KRN",9.8,"NM",10,0)
DGMFRPT^^0^B3969553
"BLD",10052,"KRN",9.8,"NM",11,0)
DGNDSU^^0^B33380048
"BLD",10052,"KRN",9.8,"NM",12,0)
DGZRT^^0^B36061811
"BLD",10052,"KRN",9.8,"NM","B","DG933PO",2)

"BLD",10052,"KRN",9.8,"NM","B","DGMFA10",6)

"BLD",10052,"KRN",9.8,"NM","B","DGMFA11",7)

"BLD",10052,"KRN",9.8,"NM","B","DGMFA13",8)

"BLD",10052,"KRN",9.8,"NM","B","DGMFASS",9)

"BLD",10052,"KRN",9.8,"NM","B","DGMFR10",5)

"BLD",10052,"KRN",9.8,"NM","B","DGMFR11",4)

"BLD",10052,"KRN",9.8,"NM","B","DGMFR13",3)

"BLD",10052,"KRN",9.8,"NM","B","DGMFRPT",10)

"BLD",10052,"KRN",9.8,"NM","B","DGNDSU",11)

"BLD",10052,"KRN",9.8,"NM","B","DGZRT",12)

"BLD",10052,"KRN",19,0)
19
"BLD",10052,"KRN",19,"NM",0)
^9.68A^10^4
"BLD",10052,"KRN",19,"NM",3,0)
DGMF MENU^^0
"BLD",10052,"KRN",19,"NM",8,0)
DG SYSTEM DEFINITION MENU^^2
"BLD",10052,"KRN",19,"NM",9,0)
DGMF AMAIN^^0
"BLD",10052,"KRN",19,"NM",10,0)
DGMF RMAIN^^0
"BLD",10052,"KRN",19,"NM","B","DG SYSTEM DEFINITION MENU",8)

"BLD",10052,"KRN",19,"NM","B","DGMF AMAIN",9)

"BLD",10052,"KRN",19,"NM","B","DGMF MENU",3)

"BLD",10052,"KRN",19,"NM","B","DGMF RMAIN",10)

"BLD",10052,"KRN",19.1,0)
19.1
"BLD",10052,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",10052,"KRN",101,0)
101
"BLD",10052,"KRN",101,"NM",0)
^9.68A^^
"BLD",10052,"KRN",409.61,0)
409.61
"BLD",10052,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",10052,"KRN",771,0)
771
"BLD",10052,"KRN",771,"NM",0)
^9.68A^^
"BLD",10052,"KRN",779.2,0)
779.2
"BLD",10052,"KRN",779.2,"NM",0)
^9.68A^^
"BLD",10052,"KRN",870,0)
870
"BLD",10052,"KRN",870,"NM",0)
^9.68A^^
"BLD",10052,"KRN",8989.51,0)
8989.51
"BLD",10052,"KRN",8989.51,"NM",0)
^9.68A^^
"BLD",10052,"KRN",8989.52,0)
8989.52
"BLD",10052,"KRN",8994,0)
8994
"BLD",10052,"KRN","B",.4,.4)

"BLD",10052,"KRN","B",.401,.401)

"BLD",10052,"KRN","B",.402,.402)

"BLD",10052,"KRN","B",.403,.403)

"BLD",10052,"KRN","B",.5,.5)

"BLD",10052,"KRN","B",.84,.84)

"BLD",10052,"KRN","B",3.6,3.6)

"BLD",10052,"KRN","B",3.8,3.8)

"BLD",10052,"KRN","B",9.2,9.2)

"BLD",10052,"KRN","B",9.8,9.8)

"BLD",10052,"KRN","B",19,19)

"BLD",10052,"KRN","B",19.1,19.1)

"BLD",10052,"KRN","B",101,101)

"BLD",10052,"KRN","B",409.61,409.61)

"BLD",10052,"KRN","B",771,771)

"BLD",10052,"KRN","B",779.2,779.2)

"BLD",10052,"KRN","B",870,870)

"BLD",10052,"KRN","B",8989.51,8989.51)

"BLD",10052,"KRN","B",8989.52,8989.52)

"BLD",10052,"KRN","B",8994,8994)

"BLD",10052,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",10052,"QUES",0)
^9.62^^
"BLD",10052,"REQB",0)
^9.611^2^2
"BLD",10052,"REQB",1,0)
DG*5.3*782^2
"BLD",10052,"REQB",2,0)
HDI*1.0*19^2
"BLD",10052,"REQB","B","DG*5.3*782",1)

"BLD",10052,"REQB","B","HDI*1.0*19",2)

"FIA",10)
RACE
"FIA",10,0)
^DIC(10,
"FIA",10,0,0)
10I
"FIA",10,0,1)
y^y^p^^^^n^^n
"FIA",10,0,10)

"FIA",10,0,11)

"FIA",10,0,"RLRO")

"FIA",10,0,"VR")
5.3^DG
"FIA",10,10)
1
"FIA",10,10,90)

"FIA",10.99)
RACE MASTER
"FIA",10.99,0)
^DGRAM(10.99,
"FIA",10.99,0,0)
10.99
"FIA",10.99,0,1)
y^y^f^^^^n
"FIA",10.99,0,10)

"FIA",10.99,0,11)

"FIA",10.99,0,"RLRO")

"FIA",10.99,0,"VR")
5.3^DG
"FIA",10.99,10.99)
0
"FIA",10.99,10.9901)
0
"FIA",10.99,10.99901)
0
"FIA",11)
MARITAL STATUS
"FIA",11,0)
^DIC(11,
"FIA",11,0,0)
11
"FIA",11,0,1)
y^y^p^^^^n^^n
"FIA",11,0,10)

"FIA",11,0,11)

"FIA",11,0,"RLRO")

"FIA",11,0,"VR")
5.3^DG
"FIA",11,11)
1
"FIA",11,11,90)

"FIA",11.99)
MASTER MARITAL STATUS
"FIA",11.99,0)
^DGMMS(11.99,
"FIA",11.99,0,0)
11.99
"FIA",11.99,0,1)
y^y^f^^^^n
"FIA",11.99,0,10)

"FIA",11.99,0,11)

"FIA",11.99,0,"RLRO")

"FIA",11.99,0,"VR")
5.3^DG
"FIA",11.99,11.99)
0
"FIA",11.99,11.9901)
0
"FIA",11.99,11.99901)
0
"FIA",13)
RELIGION
"FIA",13,0)
^DIC(13,
"FIA",13,0,0)
13I
"FIA",13,0,1)
y^y^p^^^^n^^n
"FIA",13,0,10)

"FIA",13,0,11)

"FIA",13,0,"RLRO")

"FIA",13,0,"VR")
5.3^DG
"FIA",13,13)
1
"FIA",13,13,90)

"FIA",13.99)
MASTER RELIGION
"FIA",13.99,0)
^DGMR(13.99,
"FIA",13.99,0,0)
13.99
"FIA",13.99,0,1)
y^y^f^^^^n
"FIA",13.99,0,10)

"FIA",13.99,0,11)

"FIA",13.99,0,"RLRO")

"FIA",13.99,0,"VR")
5.3^DG
"FIA",13.99,13.99)
0
"FIA",13.99,13.9901)
0
"FIA",13.99,13.99901)
0
"INIT")
DG933PO
"IX",10.99,10.99,"AMASTERVUID",0)
10.99^AMASTERVUID^This cross reference identifies the Master Entry for a VUID.^R^^R^IR^I^10.99^^^^^S
"IX",10.99,10.99,"AMASTERVUID",.1,0)
^^3^3^3170804^
"IX",10.99,10.99,"AMASTERVUID",.1,1,0)
If multiple entries have the same VUID in the file, this cross-reference 
"IX",10.99,10.99,"AMASTERVUID",.1,2,0)
can be used to identify the Master entry for a VUID associated with a
"IX",10.99,10.99,"AMASTERVUID",.1,3,0)
Term/Concept.  
"IX",10.99,10.99,"AMASTERVUID",1)
S ^DGRAM(10.99,"AMASTERVUID",$E(X(1),1,30),X(2),DA)=""
"IX",10.99,10.99,"AMASTERVUID",2)
K ^DGRAM(10.99,"AMASTERVUID",$E(X(1),1,30),X(2),DA)
"IX",10.99,10.99,"AMASTERVUID",2.5)
K ^DGRAM(10.99,"AMASTERVUID")
"IX",10.99,10.99,"AMASTERVUID",11.1,0)
^.114IA^2^2
"IX",10.99,10.99,"AMASTERVUID",11.1,1,0)
1^F^10.99^99.99^30^1^F
"IX",10.99,10.99,"AMASTERVUID",11.1,2,0)
2^F^10.99^99.98^^2^F
"IX",11.99,11.99,"AMASTERVUID",0)
11.99^AMASTERVUID^This cross reference identifies the Master entry for a VUID.^R^^R^IR^I^11.99^^^^^S
"IX",11.99,11.99,"AMASTERVUID",.1,0)
^^3^3^3170804^
"IX",11.99,11.99,"AMASTERVUID",.1,1,0)
If multiple entries have the same VUID in the file, this cross-reference 
"IX",11.99,11.99,"AMASTERVUID",.1,2,0)
can be used to identify the Master entry for a VUID associated with a
"IX",11.99,11.99,"AMASTERVUID",.1,3,0)
Term/Concept.  
"IX",11.99,11.99,"AMASTERVUID",1)
S ^DGMMS(11.99,"AMASTERVUID",$E(X(1),1,30),X(2),DA)=""
"IX",11.99,11.99,"AMASTERVUID",2)
K ^DGMMS(11.99,"AMASTERVUID",$E(X(1),1,30),X(2),DA)
"IX",11.99,11.99,"AMASTERVUID",2.5)
K ^DGMMS(11.99,"AMASTERVUID")
"IX",11.99,11.99,"AMASTERVUID",11.1,0)
^.114IA^2^2
"IX",11.99,11.99,"AMASTERVUID",11.1,1,0)
1^F^11.99^99.99^30^1^F
"IX",11.99,11.99,"AMASTERVUID",11.1,2,0)
2^F^11.99^99.98^^2^F
"IX",13.99,13.99,"AMASTERVUID",0)
13.99^AMASTERVUID^This cross reference identifies the Master entry for a VUID.^R^^R^IR^I^13.99^^^^^S
"IX",13.99,13.99,"AMASTERVUID",.1,0)
^^3^3^3170804^
"IX",13.99,13.99,"AMASTERVUID",.1,1,0)
If multiple entries have the same VUID in the file, this cross-reference 
"IX",13.99,13.99,"AMASTERVUID",.1,2,0)
can be used to identify the Master entry for a VUID associated with a
"IX",13.99,13.99,"AMASTERVUID",.1,3,0)
Term/Concept.  
"IX",13.99,13.99,"AMASTERVUID",1)
S ^DGMR(13.99,"AMASTERVUID",$E(X(1),1,30),X(2),DA)=""
"IX",13.99,13.99,"AMASTERVUID",2)
K ^DGMR(13.99,"AMASTERVUID",$E(X(1),1,30),X(2),DA)
"IX",13.99,13.99,"AMASTERVUID",2.5)
K ^DGMR(13.99,"AMASTERVUID")
"IX",13.99,13.99,"AMASTERVUID",11.1,0)
^.114IA^2^2
"IX",13.99,13.99,"AMASTERVUID",11.1,1,0)
1^F^13.99^99.99^30^1^F
"IX",13.99,13.99,"AMASTERVUID",11.1,1,3)

"IX",13.99,13.99,"AMASTERVUID",11.1,2,0)
2^F^13.99^99.98^^2^F
"IX",13.99,13.99,"AMASTERVUID",11.1,2,3)

"KRN",.402,2788,-1)
0^2
"KRN",.402,2788,0)
DGMF ARACE^3170815.1642^^10^^^3171010
"KRN",.402,2788,"DIAB",3,0,10,0)
RACE MASTER;"Associated RACE MASTER"
"KRN",.402,2788,"DR",1,10)
W !!,"Enter the Race Master entry associated with the VA";W !,"Race. NOTE: Race Master names are case sensitive.",!;90Associated RACE MASTER~;
"KRN",.402,2789,-1)
0^3
"KRN",.402,2789,0)
DGMF AMSTAT^3170815.1649^^11^^^3171010
"KRN",.402,2789,"DIAB",4,0,11,0)
MASTER MARITAL STATUS;"Associated Marital Status"
"KRN",.402,2789,"DR",1,11)
W !!,"Enter the Master Marital Status entry associated";W !,"with the VA Marital Status.";W !,"NOTE: Master Marital Status names are case sensitive.",!;90Associated Marital Status~;
"KRN",.402,2790,-1)
0^1
"KRN",.402,2790,0)
DGMF AMREL^3170815.165^^13^^^3171010
"KRN",.402,2790,"DIAB",4,0,13,0)
MASTER RELIGION;"Associated Master Religion"
"KRN",.402,2790,"DR",1,13)
W !!,"Enter the Master Religion entry associated";W !,"WITH the VA Religion.";W !,"NOTE: Master Religion names are case sensitive.",!;90Associated Master Religion~;
"KRN",19,2495,-1)
2^8
"KRN",19,2495,0)
DG SYSTEM DEFINITION MENU^ADT System Definition Menu^^M^.5^^^^^^^5
"KRN",19,2495,10,0)
^19.01IP^18^18
"KRN",19,2495,10,18,0)
2921511
"KRN",19,2495,10,18,"^")
DGMF MENU
"KRN",19,2495,"U")
ADT SYSTEM DEFINITION MENU
"KRN",19,2921511,-1)
0^3
"KRN",19,2921511,0)
DGMF MENU^Master Demographics Files^^M^^^^^^^^REGISTRATION^^
"KRN",19,2921511,1,0)
^19.06^1^1^3170914^^
"KRN",19,2921511,1,1,0)
This menu provides access to the Demographics domain master file options.
"KRN",19,2921511,10,0)
^19.01IP^2^2
"KRN",19,2921511,10,1,0)
2921516^AM
"KRN",19,2921511,10,1,"^")
DGMF AMAIN
"KRN",19,2921511,10,2,0)
2921517^RM
"KRN",19,2921511,10,2,"^")
DGMF RMAIN
"KRN",19,2921511,20)

"KRN",19,2921511,99)
64566,62059
"KRN",19,2921511,"U")
MASTER DEMOGRAPHICS FILES
"KRN",19,2921516,-1)
0^9
"KRN",19,2921516,0)
DGMF AMAIN^Master File Association Enter/Edit^^R^^^^^^^^REGISTRATION
"KRN",19,2921516,1,0)
^19.06^11^11^3170823^^^^
"KRN",19,2921516,1,1,0)
This option allows entries from the RACE file(#10)  MARITAL STATUS (#11) 
"KRN",19,2921516,1,2,0)
file, and RELIGION file to be associated with an entry from a 
"KRN",19,2921516,1,3,0)
corresponding MASTER file containing a set of standard entries.
"KRN",19,2921516,1,4,0)
The files and associated Master files
"KRN",19,2921516,1,5,0)
 
"KRN",19,2921516,1,6,0)
 
"KRN",19,2921516,1,7,0)
 'Local' File         ->  Corresponding Master File
"KRN",19,2921516,1,8,0)
 --------------------     -------------------------------
"KRN",19,2921516,1,9,0)
 RACE (#10)           ->  RACE MASTER (#10.99)
"KRN",19,2921516,1,10,0)
 MARITAL STATUS (#11) ->  MASTER MARITRAL STATUS (#11.99)
"KRN",19,2921516,1,11,0)
 RELIGION (#13)       ->  MASTER RELIGION (#13.99)
"KRN",19,2921516,25)
EN^DGMFASS
"KRN",19,2921516,"U")
MASTER FILE ASSOCIATION ENTER/
"KRN",19,2921517,-1)
0^10
"KRN",19,2921517,0)
DGMF RMAIN^Master File Reports^^R^^^^^^^^REGISTRATION
"KRN",19,2921517,1,0)
^19.06^3^3^3170811^^
"KRN",19,2921517,1,1,0)
This option prints entries from the RACE file(#10),MARITAL STATUS (#11) 
"KRN",19,2921517,1,2,0)
file, and RELIGION file (#13) and their association with its 
"KRN",19,2921517,1,3,0)
corresponding MASTER file containing a set of standard entries.
"KRN",19,2921517,25)
EN^DGMFRPT
"KRN",19,2921517,"U")
MASTER FILE REPORTS
"MBREQ")
0
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2930813^2930930
"PKG",5,22,1,"PAH",1,0)
933^3171011^520651136
"PKG",5,22,1,"PAH",1,1,0)
^^5^5^3171011
"PKG",5,22,1,"PAH",1,1,1,0)
This patch implements Demographics domain changes required by the
"PKG",5,22,1,"PAH",1,1,2,0)
Collaborative Terminology Tooling & Data Management (CTT & DM) Native
"PKG",5,22,1,"PAH",1,1,3,0)
Standardization (NDS) project.
"PKG",5,22,1,"PAH",1,1,4,0)
 
"PKG",5,22,1,"PAH",1,1,5,0)
Please see FORUM for full patch description and installation instructions.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
11
"RTN","DG933PO")
0^2^B27885525^n/a
"RTN","DG933PO",1,0)
DG933PO ;DAL/JCH - PATCH DG*5.3*933 POST INSTALL ;06/18/2017
"RTN","DG933PO",2,0)
 ;;5.3;Registration;**933**;Aug 13, 1993;Build 44
"RTN","DG933PO",3,0)
 ; This routine uses the following IAs:
"RTN","DG933PO",4,0)
 ; #4640 - ^HDISVF01 calls (supported)
"RTN","DG933PO",5,0)
 ; #4639 - ^HDISVCMR calls     (supported)
"RTN","DG933PO",6,0)
 ; #4651 - ^HDISVF09 calls     (supported)
"RTN","DG933PO",7,0)
 ;
"RTN","DG933PO",8,0)
EN ;MAIN ENTRY POINT
"RTN","DG933PO",9,0)
 N SUCCESS,DEMFAC,X,Y,DA,X1,X2,ZTRTN,ZTDESC,ZTDTH,TMP,DOMPTR,DIE,DA,DR,FIL,DOMPTR,DOMAIN
"RTN","DG933PO",10,0)
 S DEMFAC=$$KSP^XUPARAM("INST")
"RTN","DG933PO",11,0)
 S DOMAIN="DEMOGRAPHICS"
"RTN","DG933PO",12,0)
 S SUCCESS=$$GETIEN^HDISVF09(DOMAIN,.DOMPTR)
"RTN","DG933PO",13,0)
 I 'SUCCESS!'+$G(DOMPTR) D  Q
"RTN","DG933PO",14,0)
 .D MES^XPDUTL("***** Error retrieving the IEN for the "_DOMAIN_" domain.")
"RTN","DG933PO",15,0)
 .D PSTHALT("Seeding for files #10.99, #11.99, and #13.99 was not peformed.")
"RTN","DG933PO",16,0)
 F FIL=10.99,11.99,13.99 D HDIS(FIL,DOMPTR,DOMAIN)
"RTN","DG933PO",17,0)
 Q
"RTN","DG933PO",18,0)
 ;
"RTN","DG933PO",19,0)
HDIS(FIL,DOMPTR,DOMAIN) ; Do dummy 'seeding'
"RTN","DG933PO",20,0)
 N TMP,HDIMSG,B,C
"RTN","DG933PO",21,0)
 ;
"RTN","DG933PO",22,0)
 ; New file can't be seeded if there is no data?
"RTN","DG933PO",23,0)
 I FIL=10.99 D  Q
"RTN","DG933PO",24,0)
 .I '$O(^DGRAM(10.99,0)) D DUMSEED(10.99,"SEEDGRAM")
"RTN","DG933PO",25,0)
 .D PSEED(10.99,DOMPTR,DOMAIN)
"RTN","DG933PO",26,0)
 I FIL=11.99 D  Q
"RTN","DG933PO",27,0)
 .I '$O(^DGMMS(11.99,0)) D DUMSEED(11.99,"SEEDGMMS")
"RTN","DG933PO",28,0)
 .D PSEED(11.99,DOMPTR,DOMAIN)
"RTN","DG933PO",29,0)
 I FIL=13.99 D  Q
"RTN","DG933PO",30,0)
 .I '$O(^DGMR(13.99,0)) D DUMSEED(13.99,"SEEDGMR")
"RTN","DG933PO",31,0)
 .D PSEED(13.99,DOMPTR,DOMAIN)
"RTN","DG933PO",32,0)
 ;
"RTN","DG933PO",33,0)
 Q
"RTN","DG933PO",34,0)
 ;
"RTN","DG933PO",35,0)
PSEED(FIL,DOMPTR,DOMAIN)  ;  Check for previous "seeding"(deployment), quit if already done.
"RTN","DG933PO",36,0)
 N ASTATUS,TMP,XPROD,DGSITE,XMSUB,XMDUZ,XMY,HDITEXT,FILNAM,MSG,XMTEXT,XMZ
"RTN","DG933PO",37,0)
 ;
"RTN","DG933PO",38,0)
 S ASTATUS=$P($$GETSTAT^HDISVF01(FIL),U)
"RTN","DG933PO",39,0)
 I ASTATUS>3 S MSG="File: "_FIL_" Has already been seeded. Status is: "_ASTATUS D PSTHALT(MSG) Q
"RTN","DG933PO",40,0)
 ;
"RTN","DG933PO",41,0)
 ; set the seeding status to complete for data deployments.
"RTN","DG933PO",42,0)
 D SETSTAT^HDISVF01(FIL,,4)
"RTN","DG933PO",43,0)
 ;
"RTN","DG933PO",44,0)
 ; send message to STS that patch is installed and the current status
"RTN","DG933PO",45,0)
 D FILE^DID(FIL,"","NAME","FILNAM","ERR")
"RTN","DG933PO",46,0)
 S FILNAM=$G(FILNAM("NAME"))
"RTN","DG933PO",47,0)
 S XPROD=$$PROD^XUPROD()
"RTN","DG933PO",48,0)
 S DGSITE=$$SITE^VASITE()
"RTN","DG933PO",49,0)
 S XMSUB="Site: "_$P(DGSITE,"^",2)_" File: "_FIL_" in "_($S(XPROD:"PRODUCTION",1:"TEST"))_" ready for ERT Update"
"RTN","DG933PO",50,0)
 S XMY("G.HDIS ERT NOTIFICATION@FORUM.DOMAIN.EXT")=""
"RTN","DG933PO",51,0)
 S XMDUZ="Site: "_$P(DGSITE,"^",3)_" Patch Install DG*5.3*933 is Complete"
"RTN","DG933PO",52,0)
 S XMY(DUZ)=""
"RTN","DG933PO",53,0)
 K HDITEXT
"RTN","DG933PO",54,0)
 S HDITEXT(1)=""
"RTN","DG933PO",55,0)
 S HDITEXT(2)="Site: "_$P(DGSITE,"^",2)_" - "_$P(DGSITE,"^",3)
"RTN","DG933PO",56,0)
 S HDITEXT(2)=HDITEXT(2)_" with Domain/IP Address of "_$G(^XMB("NETNAME"))  ;facility name
"RTN","DG933PO",57,0)
 S HDITEXT(3)="Has Installed Patch DG*5.3*933 into their "_$S(XPROD:"PRODUCTION",1:"TEST")_" System Environment"
"RTN","DG933PO",58,0)
 S HDITEXT(4)="The Patch was Installed on: "
"RTN","DG933PO",59,0)
 S B=$$NOW^XLFDT N Y S Y=B D DD^%DT S HDITEXT(4)=HDITEXT(4)_Y ;date/time
"RTN","DG933PO",60,0)
 S HDITEXT(5)=""
"RTN","DG933PO",61,0)
 S HDITEXT(6)="Patch DG*5.3*933 has standardized file: "_FILNAM_" (#"_FIL_")"
"RTN","DG933PO",62,0)
 S HDITEXT(7)=""
"RTN","DG933PO",63,0)
 S HDITEXT(8)="The current HDIS status of file #"_FIL_"is:  "_$P($$GETSTAT^HDISVF01(FIL),U)
"RTN","DG933PO",64,0)
 S HDITEXT(9)=""
"RTN","DG933PO",65,0)
 S HDITEXT(10)="Site: "_$P(DGSITE,"^",2)_" - "_$P(DGSITE,"^",3)_"  needs full file update of the "_FILNAM_" file (#"_FIL_" as soon as possible."
"RTN","DG933PO",66,0)
 S HDITEXT(11)=""
"RTN","DG933PO",67,0)
 N DIFROM S XMTEXT="HDITEXT(" D ^XMD K DIFROM
"RTN","DG933PO",68,0)
 S MSG="File: "_FIL_" Has been 'seeded'. Message Number: "_$G(XMZ) D PSTDONE(MSG)
"RTN","DG933PO",69,0)
 Q
"RTN","DG933PO",70,0)
 ;
"RTN","DG933PO",71,0)
PSTDONE(MSG) ; display FINISHED message
"RTN","DG933PO",72,0)
 N HDIMSG
"RTN","DG933PO",73,0)
 S HDIMSG(1)=""
"RTN","DG933PO",74,0)
 S HDIMSG(2)=MSG
"RTN","DG933PO",75,0)
 S HDIMSG(3)="***** Post-installation of Patch DG*5.3*933 HDIS 'seeding' "_FILNAM_" file (#"_FIL_") has Completed."
"RTN","DG933PO",76,0)
 S HDIMSG(4)="***** An update message has been sent to Enterprise VistA Support."
"RTN","DG933PO",77,0)
 S HDIMSG(5)=""
"RTN","DG933PO",78,0)
 D MES^XPDUTL(.HDIMSG)
"RTN","DG933PO",79,0)
 Q
"RTN","DG933PO",80,0)
 ;
"RTN","DG933PO",81,0)
DUMSEED(DGMFILE,DGDTAG) ; New file <#nn.99> contains no data, can't be seeded unless there is at least one entry
"RTN","DG933PO",82,0)
 ; RACE MASTER (#10.99) file initial population data elements from DAT1099 line tag
"RTN","DG933PO",83,0)
 ; MASTER MARITAL STATUS (#11.99) file initial population data elements from DAT1199 line tag;
"RTN","DG933PO",84,0)
 ; MASTER RELIGION (#13.99) file initial population data elements from DAT1399 line tag;
"RTN","DG933PO",85,0)
 ;
"RTN","DG933PO",86,0)
 ;   DGDATA ";" PIECE - FIELD # - FIELD NAME
"RTN","DG933PO",87,0)
 ;          PIECE #1  -   n/a   - IEN 
"RTN","DG933PO",88,0)
 ;          PIECE #2  -  .01    - NAME
"RTN","DG933PO",89,0)
 ;          PIECE #3  -    1    - CODE
"RTN","DG933PO",90,0)
 ;
"RTN","DG933PO",91,0)
 N DGMFI,DGDATA,DGDATLN,DGFDA,DGRSLT,XUMF
"RTN","DG933PO",92,0)
 S XUMF=1
"RTN","DG933PO",93,0)
 F DGDATLN=1:1 S DGDATA=$P($T(@DGDTAG+DGDATLN),";",3,10) Q:DGDATA=""  D
"RTN","DG933PO",94,0)
 .N DGMFI,DGFDA,DGFDAIEN,DGEFFDT
"RTN","DG933PO",95,0)
 .S DGMFI=$P(DGDATA,";")
"RTN","DG933PO",96,0)
 .S DGFDA(DGMFILE,"+1,",.01)=$P(DGDATA,";",2)
"RTN","DG933PO",97,0)
 .S DGFDA(DGMFILE,"+1,",1)=$P(DGDATA,";",3)
"RTN","DG933PO",98,0)
 .S DGRSLT=$$INSREC(DGMFILE,DGMFI,.DGFDA)
"RTN","DG933PO",99,0)
 Q
"RTN","DG933PO",100,0)
 ;
"RTN","DG933PO",101,0)
INSREC(DGFILE,DGIEN,DGFDA) ; Insert DGIEN into file DGFILE with data in DGFDA
"RTN","DG933PO",102,0)
 I ('$G(DGFILE)) Q "0^Invalid parameter"
"RTN","DG933PO",103,0)
 N DGDERR
"RTN","DG933PO",104,0)
 D UPDATE^DIE("","DGFDA","","DGDERR")
"RTN","DG933PO",105,0)
 I $D(DGDERR) Q -1
"RTN","DG933PO",106,0)
 Q +$G(DGFDA)
"RTN","DG933PO",107,0)
 ;
"RTN","DG933PO",108,0)
PSTHALT(MSG) ; display error message
"RTN","DG933PO",109,0)
 S HDIMSG(1)=""
"RTN","DG933PO",110,0)
 S HDIMSG(2)=MSG
"RTN","DG933PO",111,0)
 S HDIMSG(3)="***** Post-installation of Patch DG*5.3*933 HDIS 'seeding' has been halted."
"RTN","DG933PO",112,0)
 S HDIMSG(4)="***** Please contact Enterprise VistA Support."
"RTN","DG933PO",113,0)
 S HDIMSG(5)=""
"RTN","DG933PO",114,0)
 D MES^XPDUTL(.HDIMSG)
"RTN","DG933PO",115,0)
 Q
"RTN","DG933PO",116,0)
 ;
"RTN","DG933PO",117,0)
SEEDGRAM  ; Data to populate the RACE MASTER (#10.99) file.
"RTN","DG933PO",118,0)
 ;;1;American Indian or Alaska Native;1002-5
"RTN","DG933PO",119,0)
 ;;2;Asian;2028-9
"RTN","DG933PO",120,0)
 ;;3;Black or African American;2054-5
"RTN","DG933PO",121,0)
 ;;4;Native Hawaiian or Other Pacific Islander;2076-8
"RTN","DG933PO",122,0)
 ;;5;White;2106-3
"RTN","DG933PO",123,0)
 Q
"RTN","DG933PO",124,0)
 ;
"RTN","DG933PO",125,0)
SEEDGMMS  ; Data to populate the MASTER MARITAL STATUS (#11.99) file.
"RTN","DG933PO",126,0)
 ;;1;Annulled;A
"RTN","DG933PO",127,0)
 ;;2;Divorced;D
"RTN","DG933PO",128,0)
 ;;3;Interlocutory;I
"RTN","DG933PO",129,0)
 ;;4;Legally Separated;L
"RTN","DG933PO",130,0)
 ;;5;Married;M
"RTN","DG933PO",131,0)
 Q
"RTN","DG933PO",132,0)
 ;
"RTN","DG933PO",133,0)
SEEDGMR  ; Data to populated the MASTER RELIGION (#13.99) file.
"RTN","DG933PO",134,0)
 ;;1;Adventist;1001
"RTN","DG933PO",135,0)
 ;;2;African Religions;1002
"RTN","DG933PO",136,0)
 ;;3;Afro-Caribbean Religions;1003
"RTN","DG933PO",137,0)
 ;;4;Agnosticism;1004
"RTN","DG933PO",138,0)
 ;;5;Anglican;1005
"RTN","DG933PO",139,0)
 Q
"RTN","DGMFA10")
0^6^B14104060^n/a
"RTN","DGMFA10",1,0)
DGMFA10 ;DAL/JCH - NDS DEMOGRAPHICS RACE ASSOCIATION ;15-AUG-2017
"RTN","DGMFA10",2,0)
 ;;5.3;Registration;**933**;Aug 13, 1993;Build 44
"RTN","DGMFA10",3,0)
 ;
"RTN","DGMFA10",4,0)
 Q
"RTN","DGMFA10",5,0)
 ; 
"RTN","DGMFA10",6,0)
 ; Available at Master File Association Enter/Edit [DGMF AMAIN] option, at the following menu path:
"RTN","DGMFA10",7,0)
 ;    Supervisor ADT Menu [DG SUPERVISOR MENU]
"RTN","DGMFA10",8,0)
 ;      ADT System Definition Menu [DG SYSTEM DEFINITION MENU]
"RTN","DGMFA10",9,0)
 ;        Master Demographics Files [DGMF MENU]
"RTN","DGMFA10",10,0)
 ;          Master File Association Enter/Edit [DGMF AMAIN]
"RTN","DGMFA10",11,0)
 ;
"RTN","DGMFA10",12,0)
EN  ; Allow users to populate the RACE MASTER field (#90) in RACE file (#10)
"RTN","DGMFA10",13,0)
 D INFO        ; Display option info
"RTN","DGMFA10",14,0)
 D KILLTMP     ; Kill ^TMP($J,"DGMFR10"
"RTN","DGMFA10",15,0)
 N DGDONE      ; Signal from user - Q:DGDONE
"RTN","DGMFA10",16,0)
 S DGDONE=0
"RTN","DGMFA10",17,0)
 ; Prompt for RACE file (#10) entries until user quits
"RTN","DGMFA10",18,0)
 F  Q:DGDONE  D
"RTN","DGMFA10",19,0)
 .N DIE,DA,DR,DIC,X,Y,DIR,DUOUT,DGRACI,DGMISV
"RTN","DGMFA10",20,0)
 .N DGRAC0,DGMRAC0,DGEMRACI,DGMDONE,DGESUM
"RTN","DGMFA10",21,0)
 .; 
"RTN","DGMFA10",22,0)
 .S DGRACI=$$GETRACE(.DGDONE) Q:DGDONE     ; Get Race IEN
"RTN","DGMFA10",23,0)
 .; Get relevant info from 10 and 10.99, store in ^TMP($J
"RTN","DGMFA10",24,0)
 .D GETDATA(DGRACI,.DGMISV)
"RTN","DGMFA10",25,0)
 .; Use MRAC report to print RACE details
"RTN","DGMFA10",26,0)
 .S DGSUM=2 D PRINRAC^DGMFR10(DGRACI)
"RTN","DGMFA10",27,0)
 .;  
"RTN","DGMFA10",28,0)
 .D UPDRACE(DGRACI)    ; Update Race file pointer to RACE MASTER (#10.99)
"RTN","DGMFA10",29,0)
 .D GETDATA(DGRACI,.DGMRACI)    ; Get updated data
"RTN","DGMFA10",30,0)
 .I $G(DGMRACI)'=$G(DGMISV) D REDISP(DGRACI)  ; RACE MASTER pointer changed, re-display updated info
"RTN","DGMFA10",31,0)
 .;
"RTN","DGMFA10",32,0)
 .S DIR(0)="EA",DIR("A",1)="",DIR("A",2)="",DIR("A")="Press Return to continue " D ^DIR
"RTN","DGMFA10",33,0)
 .D INFO
"RTN","DGMFA10",34,0)
 D KILLTMP
"RTN","DGMFA10",35,0)
 Q
"RTN","DGMFA10",36,0)
 ;
"RTN","DGMFA10",37,0)
GETRACE(DGDONE)  ; Prompt for race file (#10) entry
"RTN","DGMFA10",38,0)
 N DIC,X,Y
"RTN","DGMFA10",39,0)
 S DIC=10,DIC(0)="QEAMZ"
"RTN","DGMFA10",40,0)
 F  Q:$G(Y)>0!$G(DGDONE)  D
"RTN","DGMFA10",41,0)
 .W ! D ^DIC I $G(DUOUT)!$G(DTOUT)!($G(Y)<0) S DGDONE=1 Q  ; Nothing selected, quit
"RTN","DGMFA10",42,0)
 .N DGONAM
"RTN","DGMFA10",43,0)
 .S DGONAM=$P($G(^DIC(10,+Y,0)),"^")
"RTN","DGMFA10",44,0)
 .Q:'$D(^DGRAM(10.99,"AC",DGONAM))
"RTN","DGMFA10",45,0)
 .; Use MRAC report to print RACE details
"RTN","DGMFA10",46,0)
 .D GETDATA(+Y)
"RTN","DGMFA10",47,0)
 .S DGSUM=2 D PRINRAC^DGMFR10(+Y)
"RTN","DGMFA10",48,0)
 .W !!," * This entry has been associated to the RACE MASTER *",!," *  file by Standards & Terminology Services (STS)   *"
"RTN","DGMFA10",49,0)
 .W !," *  and may only be updated via the Master File Server (MFS). *"
"RTN","DGMFA10",50,0)
 .K Y
"RTN","DGMFA10",51,0)
 S DGRACI=+$G(Y)
"RTN","DGMFA10",52,0)
 Q DGRACI
"RTN","DGMFA10",53,0)
 ;
"RTN","DGMFA10",54,0)
UPDRACE(DGRACI)   ; Use DG RACM input template to restrict input to MRAC field
"RTN","DGMFA10",55,0)
 S DIE="^DIC(10,"
"RTN","DGMFA10",56,0)
 S DR="[DGMF ARACE]"
"RTN","DGMFA10",57,0)
 S DA=DGRACI
"RTN","DGMFA10",58,0)
 D ^DIE
"RTN","DGMFA10",59,0)
 Q
"RTN","DGMFA10",60,0)
 ;
"RTN","DGMFA10",61,0)
REDISP(DGRACI)  ; Redisplay update RACE file (#10) entry
"RTN","DGMFA10",62,0)
 W !!,"Update Successful...."
"RTN","DGMFA10",63,0)
 S DGSUM=1 D PRINRAC^DGMFR10(DGRACI)   ; display summarized TOP entry info
"RTN","DGMFA10",64,0)
 Q
"RTN","DGMFA10",65,0)
 ;
"RTN","DGMFA10",66,0)
INFO ; Display message, clear screen
"RTN","DGMFA10",67,0)
 N MSG
"RTN","DGMFA10",68,0)
 S MSG(1)="   This option allows RACE file entries to be"
"RTN","DGMFA10",69,0)
 S MSG(2)="   associated with the RACE MASTER file to enhance "
"RTN","DGMFA10",70,0)
 S MSG(3)="   interoperablity. The RACE MASTER file contains"
"RTN","DGMFA10",71,0)
 S MSG(4)="   standard Health Level Seven (HL7) races."
"RTN","DGMFA10",72,0)
 S MSG(5)=""
"RTN","DGMFA10",73,0)
 D CLEAR^VALM1
"RTN","DGMFA10",74,0)
 D BMES^XPDUTL(.MSG)
"RTN","DGMFA10",75,0)
 Q
"RTN","DGMFA10",76,0)
 ;
"RTN","DGMFA10",77,0)
GETDATA(DGRACI,DGMRACI) ; Define local variables and set into ^TMP($J
"RTN","DGMFA10",78,0)
 S DGRAC0=$G(^DIC(10,DGRACI,0))
"RTN","DGMFA10",79,0)
 S DGMRACI=+$G(^DIC(10,DGRACI,"MASTER"))
"RTN","DGMFA10",80,0)
 S DGRACST=+$G(^DIC(10,DGRACI,.02)),DGRACST=$S(DGRACST:"INACTIVE",1:"ACTIVE")
"RTN","DGMFA10",81,0)
 S DGMRAC0=$S($G(DGMRACI):$G(^DGRAM(10.99,+DGMRACI,0)),1:"Not Mapped")
"RTN","DGMFA10",82,0)
 I DGMRACI S $P(DGMRAC0,"^",4)=DGMRACI
"RTN","DGMFA10",83,0)
 S ^TMP($J,"DGMFR10",DGRAC0,DGRACI,"RACE")=$G(DGRAC0)
"RTN","DGMFA10",84,0)
 S ^TMP($J,"DGMFR10",DGRAC0,DGRACI,"MRACE")=$G(DGMRAC0)
"RTN","DGMFA10",85,0)
 S ^TMP($J,"DGMFR10",DGRAC0,DGRACI,"STATUS")=DGRACST
"RTN","DGMFA10",86,0)
 Q
"RTN","DGMFA10",87,0)
 ;
"RTN","DGMFA10",88,0)
KILLTMP  ; Kill ^TMP global
"RTN","DGMFA10",89,0)
 K ^TMP($J,"DGMFR10")
"RTN","DGMFA10",90,0)
 Q
"RTN","DGMFA11")
0^7^B14590448^n/a
"RTN","DGMFA11",1,0)
DGMFA11 ;DAL/JCH - NDS DEMOGRAPHICS MARITAL STATUS ASSOCIATION ;15-AUG-2017
"RTN","DGMFA11",2,0)
 ;;5.3;Registration;**933**;Aug 13, 1993;Build 44
"RTN","DGMFA11",3,0)
 ;
"RTN","DGMFA11",4,0)
 Q
"RTN","DGMFA11",5,0)
 ; 
"RTN","DGMFA11",6,0)
 ; Available at Master File Association Enter/Edit [DGMF AMAIN] option, at the following menu path:
"RTN","DGMFA11",7,0)
 ;    Supervisor ADT Menu [DG SUPERVISOR MENU]
"RTN","DGMFA11",8,0)
 ;      ADT System Definition Menu [DG SYSTEM DEFINITION MENU]
"RTN","DGMFA11",9,0)
 ;        Master Demographics Files [DGMF MENU]
"RTN","DGMFA11",10,0)
 ;          Master File Association Enter/Edit [DGMF AMAIN]
"RTN","DGMFA11",11,0)
 ;
"RTN","DGMFA11",12,0)
EN  ; Allow users to populate the MASTER MARITAL STATUS field (#90) in MARITAL STATUS file (#11)
"RTN","DGMFA11",13,0)
 D INFO        ; Display option info
"RTN","DGMFA11",14,0)
 D KILLTMP     ; Kill ^TMP($J,"DGMFR11"
"RTN","DGMFA11",15,0)
 N DGDONE      ; Signal from user - Q:DGDONE
"RTN","DGMFA11",16,0)
 S DGDONE=0
"RTN","DGMFA11",17,0)
 ; Prompt for MARITAL STATUS file (#11) entries until user quits
"RTN","DGMFA11",18,0)
 F  Q:DGDONE  D
"RTN","DGMFA11",19,0)
 .N DIE,DA,DR,DIC,X,Y,DIR,DUOUT,DGMSI,DGMMSIV
"RTN","DGMFA11",20,0)
 .N DGMSNAM,DGMS0,DGMMS0,DGEMMSI,DGMDONE,DGSUM
"RTN","DGMFA11",21,0)
 .;
"RTN","DGMFA11",22,0)
 .S DGMSI=$$GETMS(.DGDONE) Q:$G(DGDONE)  ; Get Marital Status IEN
"RTN","DGMFA11",23,0)
 .; Get info from 11 (inclding pointer to 10.99), store in ^TMP($J
"RTN","DGMFA11",24,0)
 .D GETDATA(DGMSI,.DGMMSIV)
"RTN","DGMFA11",25,0)
 .; Use MMS report to print MARITAL STATUS details
"RTN","DGMFA11",26,0)
 .S DGSUM=1 D PRINMS^DGMFR11(DGMSI)
"RTN","DGMFA11",27,0)
 .;
"RTN","DGMFA11",28,0)
 .D UPDMS(DGMSI)
"RTN","DGMFA11",29,0)
 .D GETDATA(DGMSI,.DGMMSI)    ; Get updated data
"RTN","DGMFA11",30,0)
 .I DGMMSI'=DGMMSIV D REDISP(DGMSI)  ; Pointer chagned, display updated record
"RTN","DGMFA11",31,0)
 .;
"RTN","DGMFA11",32,0)
 .S DIR(0)="EA",DIR("A",1)="",DIR("A",2)="",DIR("A")="Press Return to continue " D ^DIR
"RTN","DGMFA11",33,0)
 .D INFO
"RTN","DGMFA11",34,0)
 D KILLTMP
"RTN","DGMFA11",35,0)
 Q
"RTN","DGMFA11",36,0)
 ;
"RTN","DGMFA11",37,0)
GETMS(DGDONE)  ; Prompt user for Marital Status file (#11) entry
"RTN","DGMFA11",38,0)
 N DIC,X,Y
"RTN","DGMFA11",39,0)
 S DIC=11,DIC(0)="QEAMZ"
"RTN","DGMFA11",40,0)
 F  Q:$G(Y)>0!$G(DGDONE)  D
"RTN","DGMFA11",41,0)
 .W ! D ^DIC I $G(DUOUT)!$G(DTOUT)!($G(Y)<0) S DGDONE=1 Q  ; Nothing selected, quit
"RTN","DGMFA11",42,0)
 .N DGONAM
"RTN","DGMFA11",43,0)
 .S DGONAM=$P($G(^DIC(11,+Y,0)),"^")
"RTN","DGMFA11",44,0)
 .Q:'$D(^DGMMS(11.99,"AC",DGONAM))
"RTN","DGMFA11",45,0)
 .; Use MFR11 report to print MARITAL STATUS details
"RTN","DGMFA11",46,0)
 .D GETDATA(+Y)
"RTN","DGMFA11",47,0)
 .S DGSUM=2 D PRINMS^DGMFR11(+Y)
"RTN","DGMFA11",48,0)
 .W !!," *   This entry has been associated to the MASTER MARITAL     *",!," *   STATUS file by Standards & Terminology Services (STS)    *"
"RTN","DGMFA11",49,0)
 .W !," *   and can only be edited via the Master File Server (MFS). *"
"RTN","DGMFA11",50,0)
 .K Y
"RTN","DGMFA11",51,0)
 S DGMSI=+Y,DGMSNAM=$P(Y,"^",2)
"RTN","DGMFA11",52,0)
 Q DGMSI
"RTN","DGMFA11",53,0)
 ;
"RTN","DGMFA11",54,0)
UPDMS(DGMSI)   ; Use DG AMSTAT input template to restrict input to Master Marital Status field
"RTN","DGMFA11",55,0)
 S DIE="^DIC(11,"
"RTN","DGMFA11",56,0)
 S DR="[DGMF AMSTAT]"
"RTN","DGMFA11",57,0)
 S DA=DGMSI
"RTN","DGMFA11",58,0)
 D ^DIE
"RTN","DGMFA11",59,0)
 Q
"RTN","DGMFA11",60,0)
 ;
"RTN","DGMFA11",61,0)
REDISP(DGMSI)  ; Redisplay update RACE file (#10) entry
"RTN","DGMFA11",62,0)
 W !!,"Update Successful...."
"RTN","DGMFA11",63,0)
 D PRINMS^DGMFR11(DGMSI)   ; display summarized Marital Status entry info
"RTN","DGMFA11",64,0)
 Q
"RTN","DGMFA11",65,0)
 ;
"RTN","DGMFA11",66,0)
INFO ; Display message, clear screen
"RTN","DGMFA11",67,0)
 N MSG
"RTN","DGMFA11",68,0)
 S MSG(1)="   This option allows MARITAL STATUS file entries to be"
"RTN","DGMFA11",69,0)
 S MSG(2)="   associated with the MASTER MARITAL STATUS file to enhance"
"RTN","DGMFA11",70,0)
 S MSG(3)="   interoperablity. The MASTER MARITAL STATUS file contains"
"RTN","DGMFA11",71,0)
 S MSG(4)="   standard Health Level Seven (HL7) marital statuses."
"RTN","DGMFA11",72,0)
 S MSG(5)=""
"RTN","DGMFA11",73,0)
 D CLEAR^VALM1
"RTN","DGMFA11",74,0)
 D BMES^XPDUTL(.MSG)
"RTN","DGMFA11",75,0)
 Q
"RTN","DGMFA11",76,0)
 ;
"RTN","DGMFA11",77,0)
GETDATA(DGMSI,DGMMSI) ; Define local variables and set into ^TMP($J
"RTN","DGMFA11",78,0)
 S DGMS0=$G(^DIC(11,DGMSI,0))
"RTN","DGMFA11",79,0)
 S DGMMSI=+$G(^DIC(11,DGMSI,"MASTER"))
"RTN","DGMFA11",80,0)
 S DGMSST=+$G(^DIC(11,DGMSI,.02)),DGMSST=$S(DGMSST:"INACTIVE",1:"ACTIVE")
"RTN","DGMFA11",81,0)
 S DGMMS0=$S($G(DGMMSI):$G(^DGMMS(11.99,+DGMMSI,0)),1:"Not Mapped")
"RTN","DGMFA11",82,0)
 I DGMMSI S $P(DGMMS0,"^",4)=DGMMSI
"RTN","DGMFA11",83,0)
 S ^TMP($J,"DGMFR11",DGMS0,DGMSI,"MSE")=$G(DGMS0)
"RTN","DGMFA11",84,0)
 S ^TMP($J,"DGMFR11",DGMS0,DGMSI,"MMSE")=$G(DGMMS0)
"RTN","DGMFA11",85,0)
 Q
"RTN","DGMFA11",86,0)
 ;
"RTN","DGMFA11",87,0)
KILLTMP  ; Kill ^TMP global
"RTN","DGMFA11",88,0)
 K ^TMP($J,"DGMFR11")
"RTN","DGMFA11",89,0)
 Q
"RTN","DGMFA13")
0^8^B13906961^n/a
"RTN","DGMFA13",1,0)
DGMFA13 ;DAL/JCH - NDS DEMOGRAPHICS RELIGION ASSOCIATION ;15-AUG-2017
"RTN","DGMFA13",2,0)
 ;;5.3;Registration;**933**;Aug 13, 1993;Build 44
"RTN","DGMFA13",3,0)
 ;
"RTN","DGMFA13",4,0)
 Q
"RTN","DGMFA13",5,0)
 ; 
"RTN","DGMFA13",6,0)
 ; Available at Master File Association Enter/Edit [DGMF AMAIN] option, at the following menu path:
"RTN","DGMFA13",7,0)
 ;    Supervisor ADT Menu [DG SUPERVISOR MENU]
"RTN","DGMFA13",8,0)
 ;      ADT System Definition Menu [DG SYSTEM DEFINITION MENU]
"RTN","DGMFA13",9,0)
 ;        Master Demographics Files [DGMF MENU]
"RTN","DGMFA13",10,0)
 ;          Master File Association Enter/Edit [DGMF AMAIN]
"RTN","DGMFA13",11,0)
 ;
"RTN","DGMFA13",12,0)
EN  ; Allow users to populate the MASTER RELIGION field (#90) in RELIGION file (#13)
"RTN","DGMFA13",13,0)
 D INFO        ; Display option info
"RTN","DGMFA13",14,0)
 D KILLTMP     ; Kill ^TMP($J,"DGMFR13"
"RTN","DGMFA13",15,0)
 N DGDONE      ; Signal from user - Q:DGDONE
"RTN","DGMFA13",16,0)
 S DGDONE=0
"RTN","DGMFA13",17,0)
 ; Prompt for RELIGION (#13) entries until user quits
"RTN","DGMFA13",18,0)
 F  Q:DGDONE  D
"RTN","DGMFA13",19,0)
 .N DIE,DA,DR,DIC,X,Y,DIR,DUOUT,DGMRI,DGMMRIV
"RTN","DGMFA13",20,0)
 .N DGMRNAM,DGMR0,DGMMR0,DGEMMRI,DGMDONE,DGSUM
"RTN","DGMFA13",21,0)
 .;
"RTN","DGMFA13",22,0)
 .S DGMRI=$$GETMR(.DGDONE) Q:$G(DGDONE)   ; Get Religion file (#13) entry
"RTN","DGMFA13",23,0)
 .; Get info from 13 (including pointer to 13.99), store in ^TMP($J
"RTN","DGMFA13",24,0)
 .D GETDATA(DGMRI,.DGMMRIV)
"RTN","DGMFA13",25,0)
 .; Use report to print details
"RTN","DGMFA13",26,0)
 .S DGSUM=1 D PRINMR^DGMFR13(DGMRI)
"RTN","DGMFA13",27,0)
 .;
"RTN","DGMFA13",28,0)
 .D UPDMR(DGMRI)
"RTN","DGMFA13",29,0)
 .D GETDATA(DGMRI,.DGMMRIV)   ; Done editing, get data again
"RTN","DGMFA13",30,0)
 .I DGMMRI'=DGMMRIV D REDISP(DGMRI)  ; Pointer changed, display updated record
"RTN","DGMFA13",31,0)
 .;
"RTN","DGMFA13",32,0)
 .S DIR(0)="EA",DIR("A",1)="",DIR("A",2)="",DIR("A")="Press Return to continue " D ^DIR
"RTN","DGMFA13",33,0)
 .D INFO
"RTN","DGMFA13",34,0)
 D KILLTMP
"RTN","DGMFA13",35,0)
 Q
"RTN","DGMFA13",36,0)
 ;
"RTN","DGMFA13",37,0)
GETMR(DGDONE)  ; Prompt user for RELIGION file (#13) entry
"RTN","DGMFA13",38,0)
 N DIC
"RTN","DGMFA13",39,0)
 S DIC=13,DIC(0)="QEAMZ"
"RTN","DGMFA13",40,0)
 F  Q:$G(Y)>0!$G(DGDONE)  D
"RTN","DGMFA13",41,0)
 .W ! D ^DIC I $G(DUOUT)!$G(DTOUT)!($G(Y)<0) S DGDONE=1 Q  ; Nothing selected, quit
"RTN","DGMFA13",42,0)
 .N DGONAM
"RTN","DGMFA13",43,0)
 .S DGONAM=$P($G(^DIC(13,+Y,0)),"^")
"RTN","DGMFA13",44,0)
 .Q:'$D(^DGMR(13.99,"AC",DGONAM))
"RTN","DGMFA13",45,0)
 .; Use MFR13 report to print RELIGION details
"RTN","DGMFA13",46,0)
 .D GETDATA(+Y)
"RTN","DGMFA13",47,0)
 .S DGSUM=2 D PRINMR^DGMFR13(+Y)
"RTN","DGMFA13",48,0)
 .W !!," *  This entry has been associated to the MASTER RELIGION *",!," *  file by Standards & Terminology Services (STS) and    *"
"RTN","DGMFA13",49,0)
 .W !," *  may only be edited via the Master File Server (MFS).  *"
"RTN","DGMFA13",50,0)
 .K Y
"RTN","DGMFA13",51,0)
 S DGMRI=+Y,DGMRNAM=$P(Y,"^",2)
"RTN","DGMFA13",52,0)
 Q DGMRI
"RTN","DGMFA13",53,0)
 ;
"RTN","DGMFA13",54,0)
UPDMR(DGMRI)  ; Use DGF AMREL input template to restrict input to Master Marital Status field
"RTN","DGMFA13",55,0)
 S DIE="^DIC(13,"
"RTN","DGMFA13",56,0)
 S DR="[DGMF AMREL]"
"RTN","DGMFA13",57,0)
 S DA=DGMRI
"RTN","DGMFA13",58,0)
 D ^DIE
"RTN","DGMFA13",59,0)
 Q
"RTN","DGMFA13",60,0)
 ;
"RTN","DGMFA13",61,0)
REDISP(DGMRI)  ; Redisplay updated MARITAL STATUS file (#13) entry
"RTN","DGMFA13",62,0)
 W !!,"Update Successful..."
"RTN","DGMFA13",63,0)
 D PRINMR^DGMFR13(DGMRI)   ; display summarized plan info
"RTN","DGMFA13",64,0)
 Q
"RTN","DGMFA13",65,0)
 L
"RTN","DGMFA13",66,0)
INFO ; Display message, clear screen
"RTN","DGMFA13",67,0)
 N MSG
"RTN","DGMFA13",68,0)
 S MSG(1)="   This option allows RELIGION file entries to be"
"RTN","DGMFA13",69,0)
 S MSG(2)="   associated with the MASTER RELIGION file to enhance "
"RTN","DGMFA13",70,0)
 S MSG(3)="   interoperablity. The MASTER RELIGION file contains"
"RTN","DGMFA13",71,0)
 S MSG(4)="   standard Health Level Seven (HL7) religions."
"RTN","DGMFA13",72,0)
 S MSG(5)=""
"RTN","DGMFA13",73,0)
 D CLEAR^VALM1
"RTN","DGMFA13",74,0)
 D BMES^XPDUTL(.MSG)
"RTN","DGMFA13",75,0)
 Q
"RTN","DGMFA13",76,0)
 ;
"RTN","DGMFA13",77,0)
GETDATA(DGMRI,DGMMRI) ; Define local variables and set into ^TMP($J
"RTN","DGMFA13",78,0)
 S DGMR0=$G(^DIC(13,DGMRI,0))
"RTN","DGMFA13",79,0)
 S DGMMRI=+$G(^DIC(13,DGMRI,"MASTER"))
"RTN","DGMFA13",80,0)
 S DGMRST=+$G(^DIC(13,DGMRI,.02)),DGMRST=$S(DGMRST:"INACTIVE",1:"ACTIVE")
"RTN","DGMFA13",81,0)
 S DGMMR0=$S($G(DGMMRI):$G(^DGMR(13.99,+DGMMRI,0)),1:"Not Mapped")
"RTN","DGMFA13",82,0)
 I DGMMRI S $P(DGMMR0,"^",4)=DGMMRI
"RTN","DGMFA13",83,0)
 S ^TMP($J,"DGMFR13",DGMR0,DGMRI,"MRE")=$G(DGMR0)
"RTN","DGMFA13",84,0)
 S ^TMP($J,"DGMFR13",DGMR0,DGMRI,"MMRE")=$G(DGMMR0)
"RTN","DGMFA13",85,0)
 Q
"RTN","DGMFA13",86,0)
 ;
"RTN","DGMFA13",87,0)
KILLTMP  ; Kill ^TMP global
"RTN","DGMFA13",88,0)
 K ^TMP($J,"DGMFR13")
"RTN","DGMFA13",89,0)
 Q
"RTN","DGMFASS")
0^9^B3776607^n/a
"RTN","DGMFASS",1,0)
DGMFASS ;DAL/JCH - NDS DEMOGRAPHICS MASTER FILE ASSOCIATIONS ;15-AUG-2017
"RTN","DGMFASS",2,0)
 ;;5.3;Registration;**933**;Aug 13, 1993;Build 44
"RTN","DGMFASS",3,0)
 ;
"RTN","DGMFASS",4,0)
 Q
"RTN","DGMFASS",5,0)
 ; 
"RTN","DGMFASS",6,0)
 ; Available at Master File Association Enter Edit [DGMF AMAIN] option, at the following menu path:
"RTN","DGMFASS",7,0)
 ;    Supervisor ADT Menu [DG SUPERVISOR MENU]
"RTN","DGMFASS",8,0)
 ;      ADT System Definition Menu [DG SYSTEM DEFINITION MENU]
"RTN","DGMFASS",9,0)
 ;        Master Demographics Files [DGMF MENU]
"RTN","DGMFASS",10,0)
 ;          Master File Association Enter/Edit [DGMF AMAIN]
"RTN","DGMFASS",11,0)
 ;
"RTN","DGMFASS",12,0)
EN  ; Allow users to populate the RACE MASTER field (#90) in RACE file (#10)
"RTN","DGMFASS",13,0)
 D INFO        ; Display option info
"RTN","DGMFASS",14,0)
 N DGDONE      ; Signal from user - Q:DGDONE
"RTN","DGMFASS",15,0)
 S DGDONE=0
"RTN","DGMFASS",16,0)
 ; Prompt for Demographics files (#10, #11, #13) entries until user quits
"RTN","DGMFASS",17,0)
 F  Q:DGDONE  D
"RTN","DGMFASS",18,0)
 .N DGFILE
"RTN","DGMFASS",19,0)
 .S DGFILE=$$ASKFILE()
"RTN","DGMFASS",20,0)
 .I 'DGFILE S DGDONE=1 Q
"RTN","DGMFASS",21,0)
 .S ROU=$S(DGFILE=10:"EN^DGMFA10",DGFILE=11:"EN^DGMFA11",DGFILE=13:"EN^DGMFA13",1:"")
"RTN","DGMFASS",22,0)
 .I ROU="" W !," ??" Q
"RTN","DGMFASS",23,0)
 .D @ROU
"RTN","DGMFASS",24,0)
 .D INFO
"RTN","DGMFASS",25,0)
 Q
"RTN","DGMFASS",26,0)
 ;
"RTN","DGMFASS",27,0)
INFO ; Display message, clear screen
"RTN","DGMFASS",28,0)
 N MSG
"RTN","DGMFASS",29,0)
 S MSG(1)=" This option allows entries from the RACE file (#10),"
"RTN","DGMFASS",30,0)
 S MSG(2)=" MARITAL STATUS (#11) file, and RELIGION file (#13),"
"RTN","DGMFASS",31,0)
 S MSG(3)=" to be associated with an entry from a corresponding"
"RTN","DGMFASS",32,0)
 S MSG(4)=" MASTER file containing a set of standard entries."
"RTN","DGMFASS",33,0)
 S MSG(5)=""
"RTN","DGMFASS",34,0)
 D CLEAR^VALM1
"RTN","DGMFASS",35,0)
 D BMES^XPDUTL(.MSG)
"RTN","DGMFASS",36,0)
 Q
"RTN","DGMFASS",37,0)
 ;
"RTN","DGMFASS",38,0)
ASKFILE()  ; Ask user to enter local file to associate
"RTN","DGMFASS",39,0)
 N DIR
"RTN","DGMFASS",40,0)
 S DIR(0)="SO^10:RACE;11:MARITAL STATUS;13:RELIGION"
"RTN","DGMFASS",41,0)
 S DIR("L",1)="   RACE file           (10)"
"RTN","DGMFASS",42,0)
 S DIR("L",2)="   MARITAL STATUS file (11)"
"RTN","DGMFASS",43,0)
 S DIR("L")="   RELIGION file       (13)"
"RTN","DGMFASS",44,0)
 S DIR("A")="Enter the file name or number "
"RTN","DGMFASS",45,0)
 D ^DIR
"RTN","DGMFASS",46,0)
 Q $S(Y>0:+Y,1:"")
"RTN","DGMFR10")
0^5^B72687376^n/a
"RTN","DGMFR10",1,0)
DGMFR10 ;DAL/JCH - NDS DEMOGRAPHICS RACE MASTER ASSOCIATIONS REPORT ;15-AUG-2017
"RTN","DGMFR10",2,0)
 ;;5.3;Registration;**933**;Aug 13, 1993;Build 44
"RTN","DGMFR10",3,0)
 ;
"RTN","DGMFR10",4,0)
 ; Available at Master File Reports [DGMF RMAIN] option, at the following menu path:
"RTN","DGMFR10",5,0)
 ;    Supervisor ADT Menu [DG SUPERVISOR MENU]
"RTN","DGMFR10",6,0)
 ;      ADT System Definition Menu [DG SYSTEM DEFINITION MENU]
"RTN","DGMFR10",7,0)
 ;        Master File Menu [DGMF MNU]
"RTN","DGMFR10",8,0)
 ;          Master File Reports [DGMF RMAIN]
"RTN","DGMFR10",9,0)
 Q
"RTN","DGMFR10",10,0)
 ;
"RTN","DGMFR10",11,0)
EN ; MRAC Report Entry point
"RTN","DGMFR10",12,0)
 N DGOUT
"RTN","DGMFR10",13,0)
 S DGOUT=0
"RTN","DGMFR10",14,0)
 F  Q:$G(DGOUT)  D
"RTN","DGMFR10",15,0)
 .D MAIN Q:DGOUT
"RTN","DGMFR10",16,0)
 .N DIR W !!
"RTN","DGMFR10",17,0)
 .S DIR(0)="Y",DIR("B")="Y",DIR("A")="Run report again" D ^DIR
"RTN","DGMFR10",18,0)
 .S:X'="Y" DGOUT=1
"RTN","DGMFR10",19,0)
 Q
"RTN","DGMFR10",20,0)
 ;
"RTN","DGMFR10",21,0)
MAIN ; Driver loop
"RTN","DGMFR10",22,0)
 N DGSUM,DGMUA,DGSRAC,DGOUTP
"RTN","DGMFR10",23,0)
 S DGSRAC=0
"RTN","DGMFR10",24,0)
 ;
"RTN","DGMFR10",25,0)
 D INFO
"RTN","DGMFR10",26,0)
 ; Select (M)apped, (U)nmapped, or (A)ll entries from RACE (#10) file.
"RTN","DGMFR10",27,0)
 W ! D MUA(.DGMUA) I '$D(DGMUA)!$G(DGOUT) S DGOUT=1 Q
"RTN","DGMFR10",28,0)
 ;
"RTN","DGMFR10",29,0)
 ; Select summary report or detailed
"RTN","DGMFR10",30,0)
 S DGSUM=$$SUMMARY I 'DGSUM Q
"RTN","DGMFR10",31,0)
 ;
"RTN","DGMFR10",32,0)
 ; Select output format
"RTN","DGMFR10",33,0)
 S DGOUTP=$$OUT I DGSRAC Q
"RTN","DGMFR10",34,0)
 ;
"RTN","DGMFR10",35,0)
 ; Select device
"RTN","DGMFR10",36,0)
 I $$SELDEV()!DGSRAC Q
"RTN","DGMFR10",37,0)
 ;
"RTN","DGMFR10",38,0)
 I DGOUTP="R" W !!,"<*> please wait <*>"
"RTN","DGMFR10",39,0)
 U IO D DQ
"RTN","DGMFR10",40,0)
 ;
"RTN","DGMFR10",41,0)
 Q
"RTN","DGMFR10",42,0)
 ;
"RTN","DGMFR10",43,0)
DQ ;  report (queue) starts here
"RTN","DGMFR10",44,0)
 N DGRACI,DGMRACI,DGRAC0,DGMRAC0
"RTN","DGMFR10",45,0)
 ;
"RTN","DGMFR10",46,0)
 K ^TMP($J,"DGMFR10")
"RTN","DGMFR10",47,0)
 ;  build list of races
"RTN","DGMFR10",48,0)
 S DGRACI=0 F  S DGRACI=$O(^DIC(10,DGRACI)) Q:'DGRACI  D
"RTN","DGMFR10",49,0)
 .S DGRAC0=$G(^DIC(10,DGRACI,0))
"RTN","DGMFR10",50,0)
 .S DGRACP02=+$G(^DIC(10,DGRACI,.02))
"RTN","DGMFR10",51,0)
 .S DGMRACI=+$G(^DIC(10,DGRACI,"MASTER"))
"RTN","DGMFR10",52,0)
 .I $G(DGMUA)="U",$G(DGMRACI) Q
"RTN","DGMFR10",53,0)
 .I $G(DGMUA)="M",'$G(DGMRACI) Q
"RTN","DGMFR10",54,0)
 .S DGMRAC0=$S($G(DGMRACI):$G(^DGRAM(10.99,+DGMRACI,0)),1:"Not Mapped")
"RTN","DGMFR10",55,0)
 .I DGMRACI S $P(DGMRAC0,"^",4)=DGMRACI
"RTN","DGMFR10",56,0)
 .S ^TMP($J,"DGMFR10",DGRAC0,DGRACI,"RAC")=$G(DGRAC0)
"RTN","DGMFR10",57,0)
 .S ^TMP($J,"DGMFR10",DGRAC0,DGRACI,"STATUS")=DGRACP02
"RTN","DGMFR10",58,0)
 .S ^TMP($J,"DGMFR10",DGRAC0,DGRACI,"MRACE")=$G(DGMRAC0)
"RTN","DGMFR10",59,0)
 ;
"RTN","DGMFR10",60,0)
 D PRINT
"RTN","DGMFR10",61,0)
 ;
"RTN","DGMFR10",62,0)
 D ^%ZISC
"RTN","DGMFR10",63,0)
 K ^TMP($J,"DGMFR10")
"RTN","DGMFR10",64,0)
 Q
"RTN","DGMFR10",65,0)
 ;
"RTN","DGMFR10",66,0)
PRINT ; Print output
"RTN","DGMFR10",67,0)
 N MAXCNT,DGSRAC,DGPGCNT,DGHDR,CRT,DGDELHD
"RTN","DGMFR10",68,0)
 I IOST["C-" S MAXCNT=IOSL-10,CRT=1
"RTN","DGMFR10",69,0)
 E  S MAXCNT=IOSL-6,CRT=0
"RTN","DGMFR10",70,0)
 I DGSUM=1 S MAXCNT=MAXCNT+5
"RTN","DGMFR10",71,0)
 S DGPGCNT=0,DGSRAC=0
"RTN","DGMFR10",72,0)
 ;
"RTN","DGMFR10",73,0)
 I '$D(^TMP($J,"DGMFR10")) D HEADER W !!!?5,"No Data Found" Q
"RTN","DGMFR10",74,0)
 ;
"RTN","DGMFR10",75,0)
 N DGRACI,DGRAC0
"RTN","DGMFR10",76,0)
 S DGRAC0="" F  S DGRAC0=$O(^TMP($J,"DGMFR10",DGRAC0)) Q:DGRAC0=""  D PRINT2(DGRAC0)
"RTN","DGMFR10",77,0)
 Q
"RTN","DGMFR10",78,0)
 ;
"RTN","DGMFR10",79,0)
PRINT2(DGRAC0) ; Get details
"RTN","DGMFR10",80,0)
 S DGRACI=0 F  S DGRACI=$O(^TMP($J,"DGMFR10",DGRAC0,DGRACI)) Q:'DGRACI!DGSRAC  D
"RTN","DGMFR10",81,0)
 .N DGMRAC0,DGCT,DGCTS,DGCTX,DGRACST
"RTN","DGMFR10",82,0)
 .N DGMTST,DGMTED,DGMRACI,DGMTEDI,DGMPAR,DGMPARX
"RTN","DGMFR10",83,0)
 .N DGMREPL,DGMREPX,DGMV0
"RTN","DGMFR10",84,0)
 .;
"RTN","DGMFR10",85,0)
 .I $G(DGOUTP)="E" D DELIM(DGRAC0,DGRACI) Q
"RTN","DGMFR10",86,0)
 .;
"RTN","DGMFR10",87,0)
 .I ($Y+1>MAXCNT)!'DGPGCNT D HEADER Q:DGSRAC
"RTN","DGMFR10",88,0)
 .S DGRAC0=$G(^TMP($J,"DGMFR10",DGRAC0,DGRACI,"RAC"))
"RTN","DGMFR10",89,0)
 .S DGRACST=+$G(^TMP($J,"DGMFR10",DGRAC0,DGRACI,"STATUS")),DGRACST=$S(DGRACST:"INACTIVE",1:"ACTIVE")
"RTN","DGMFR10",90,0)
 .D PRINRAC(DGRACI)
"RTN","DGMFR10",91,0)
 .;
"RTN","DGMFR10",92,0)
 .Q:'DGMRACI
"RTN","DGMFR10",93,0)
 .I $G(DGSUM)=2 D
"RTN","DGMFR10",94,0)
 ..W !?3,"Master Code: ",$P(^TMP($J,"DGMFR10",DGRAC0,DGRACI,"MRACE"),"^",2)
"RTN","DGMFR10",95,0)
 ..S DGMTED=$$NOW^XLFDT,DGMTED=$O(^DGRAM(10.99,DGMRACI,"TERMSTATUS","B",DGMTED),-1)
"RTN","DGMFR10",96,0)
 ..I DGMTED D  ; This should always be true, if data came from STS MFS process
"RTN","DGMFR10",97,0)
 ...S DGMTEDI="",DGMTEDI=$O(^DGRAM(10.99,DGMRACI,"TERMSTATUS","B",DGMTED,DGMTEDI))
"RTN","DGMFR10",98,0)
 ...S DGMTST=$P(^DGRAM(10.99,DGMRACI,"TERMSTATUS",DGMTEDI,0),"^",2)
"RTN","DGMFR10",99,0)
 ...W ?25," Master Status: ",$S(DGMTST:"ACTIVE",1:"INACTIVE")
"RTN","DGMFR10",100,0)
 ..S DGMV0=$G(^DGRAM(10.99,DGMRACI,"VUID"))
"RTN","DGMFR10",101,0)
 ..I $G(DGMV0) W !?3,"VUID: ",$P(DGMV0,"^")
"RTN","DGMFR10",102,0)
 Q
"RTN","DGMFR10",103,0)
 ;
"RTN","DGMFR10",104,0)
MUA(DGMUA) ; Select (M)apped, (U)nmapped, or(A)ll - entries from 10 mapped to 10.99
"RTN","DGMFR10",105,0)
 N DIR,DIRUT,Y
"RTN","DGMFR10",106,0)
 W ! S DIR(0)="SAO^M:(M)apped;U:(U)nmapped;A:(A)ll"
"RTN","DGMFR10",107,0)
 S DIR("?")="Enter ^ to exit"
"RTN","DGMFR10",108,0)
 S DIR("A",1)="Run the report for"
"RTN","DGMFR10",109,0)
 S DIR("A")="(M)apped, (U)nmapped, or (A)ll Race entries: ",DIR("B")="A" D ^DIR
"RTN","DGMFR10",110,0)
 I $D(DIRUT) S DGOUT=1 Q
"RTN","DGMFR10",111,0)
 S DGMUA=Y
"RTN","DGMFR10",112,0)
 Q
"RTN","DGMFR10",113,0)
 ;
"RTN","DGMFR10",114,0)
SUMMARY() ;  ask to print detailed or summary report
"RTN","DGMFR10",115,0)
 N DIR,DIRUT,X,Y
"RTN","DGMFR10",116,0)
 S DIR(0)="SOA^D:Detailed;S:Summary;",DIR("B")="Summary"
"RTN","DGMFR10",117,0)
 S DIR("A")="Type of report to print: "
"RTN","DGMFR10",118,0)
 W ! D ^DIR
"RTN","DGMFR10",119,0)
 I $D(DIRUT) S DGSRAC=1 Q 0
"RTN","DGMFR10",120,0)
 Q $S(Y="S":1,Y="D":2,1:0)
"RTN","DGMFR10",121,0)
 ;
"RTN","DGMFR10",122,0)
OUT() ; select Excel or Report format
"RTN","DGMFR10",123,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,Y
"RTN","DGMFR10",124,0)
 W !
"RTN","DGMFR10",125,0)
 S DIR(0)="SA^E:Excel;R:Report"
"RTN","DGMFR10",126,0)
 S DIR("A")="(E)xcel Format or (R)eport Format: "
"RTN","DGMFR10",127,0)
 S DIR("B")="Report"
"RTN","DGMFR10",128,0)
 D ^DIR I $D(DIRUT) S DGSRAC=1 Q ""
"RTN","DGMFR10",129,0)
 Q Y
"RTN","DGMFR10",130,0)
 ;
"RTN","DGMFR10",131,0)
DELIM(DGRAC0,DGRACI)  ; Print output in "^" delimited format
"RTN","DGMFR10",132,0)
 ; Print data in (E)xcel format, e.g., "data^data^data"
"RTN","DGMFR10",133,0)
 I '$G(DGDELHD) S DGDELHD=1 D
"RTN","DGMFR10",134,0)
 .I $G(DGSUM)=1 W !,"VA Race^Mapped/Not Mapped^Race Master"
"RTN","DGMFR10",135,0)
 .I $G(DGSUM)=2 W !,"VA Race^VA Race Abbreviation^VA Race Status^VA Race HL7 Code^VA Race PTF Code^Mapped/Not Mapped^Race Master Name^Race Master Code^Race Master Status^VUID"
"RTN","DGMFR10",136,0)
 S DGRACST=$G(^TMP($J,"DGMFR10",DGRAC0,DGRACI,"STATUS"))
"RTN","DGMFR10",137,0)
 S DGRACST=$S(DGRACST:"INACTIVE",1:"ACTIVE")
"RTN","DGMFR10",138,0)
 W !,$P(DGRAC0,"^")
"RTN","DGMFR10",139,0)
 I $G(DGSUM)=2 D
"RTN","DGMFR10",140,0)
 .W "^",$P(DGRAC0,"^",2)
"RTN","DGMFR10",141,0)
 .W "^",DGRACST
"RTN","DGMFR10",142,0)
 .S DGCT=$P(DGRAC0,"^",3) I $L(DGCT) D
"RTN","DGMFR10",143,0)
 ..D FIELD^DID(10,90,"","POINTER","DGCTS")
"RTN","DGMFR10",144,0)
 ..S DGCTX=$P(DGCTS("POINTER"),+DGCT_":",2),DGCTX=$P(DGCTX,";")
"RTN","DGMFR10",145,0)
 ..I $L(DGCTX) W "^",DGCTX
"RTN","DGMFR10",146,0)
 .W "^",$P(DGRAC0,"^",3)
"RTN","DGMFR10",147,0)
 .W "^",$P(DGRAC0,"^",5)
"RTN","DGMFR10",148,0)
 S DGMRAC0=$G(^TMP($J,"DGMFR10",DGRAC0,DGRACI,"MRACE"))
"RTN","DGMFR10",149,0)
 S DGMRACI=+$P(DGMRAC0,"^",4)
"RTN","DGMFR10",150,0)
 W "^",$S(DGMRACI:"MAPPED",1:"NOT MAPPED")
"RTN","DGMFR10",151,0)
 Q:'DGMRACI
"RTN","DGMFR10",152,0)
 W "^",$P(DGMRAC0,"^") ;$P(^TMP($J,"DGMFR10",DGRAC0,DGRACI,"MRACE"),"^")
"RTN","DGMFR10",153,0)
 I $G(DGSUM)=2 D
"RTN","DGMFR10",154,0)
 .W "^",$P(DGMRAC0,"^",2)
"RTN","DGMFR10",155,0)
 .S DGMTED=$$NOW^XLFDT,DGMTED=$O(^DGRAM(10.99,DGMRACI,"TERMSTATUS","B",DGMTED),-1)
"RTN","DGMFR10",156,0)
 .I DGMTED D
"RTN","DGMFR10",157,0)
 ..S DGMTEDI="",DGMTEDI=$O(^DGRAM(10.99,DGMRACI,"TERMSTATUS","B",DGMTED,DGMTEDI))
"RTN","DGMFR10",158,0)
 ..S DGMTST=$P(^DGRAM(10.99,DGMRACI,"TERMSTATUS",DGMTEDI,0),"^",2)
"RTN","DGMFR10",159,0)
 ..W "^",$S(DGMTST:"ACTIVE",1:"INACTIVE")
"RTN","DGMFR10",160,0)
 .S DGMV0=$P($G(^DGRAM(10.99,DGMRACI,"VUID")),"^")
"RTN","DGMFR10",161,0)
 .W "^",$P(DGMV0,"^")
"RTN","DGMFR10",162,0)
 Q
"RTN","DGMFR10",163,0)
 ;
"RTN","DGMFR10",164,0)
SELDEV()  ; Propmt for output device, return 1 if queued
"RTN","DGMFR10",165,0)
 I DGOUTP="E" D
"RTN","DGMFR10",166,0)
 .N DIR,X,Y
"RTN","DGMFR10",167,0)
 .S DIR("A",1)=""
"RTN","DGMFR10",168,0)
 .S DIR("A",2)="     ************************************************************"
"RTN","DGMFR10",169,0)
 .S DIR("A",3)="     **  You selected a Delimited report. Please verify you    **"
"RTN","DGMFR10",170,0)
 .S DIR("A",4)="     **  you have turned logging on to capture the output.     **"
"RTN","DGMFR10",171,0)
 .S DIR("A",5)="     **                                                        **"
"RTN","DGMFR10",172,0)
 .S DIR("A",6)="     **  To avoid undesired wrapping, enter '0;199;999' at     **"
"RTN","DGMFR10",173,0)
 .S DIR("A",7)="     **  the 'DEVICE:' prompt. The Terminal Session display    **"
"RTN","DGMFR10",174,0)
 .S DIR("A",8)="     **  may need to be set to 199 columns.                    **"
"RTN","DGMFR10",175,0)
 .S DIR("A",9)="     ************************************************************"
"RTN","DGMFR10",176,0)
 .S DIR("A",10)=""
"RTN","DGMFR10",177,0)
 .S DIR("A",11)="",DIR("A",12)=""
"RTN","DGMFR10",178,0)
 .S DIR("A")=" Press return to continue"
"RTN","DGMFR10",179,0)
 .S DIR(0)="EA" D ^DIR W !
"RTN","DGMFR10",180,0)
 ;
"RTN","DGMFR10",181,0)
 N DGDONE
"RTN","DGMFR10",182,0)
 W !,"You may queue this report to print at a later time.",!
"RTN","DGMFR10",183,0)
 F  Q:$G(DGSRAC)!$G(DGDONE)  D
"RTN","DGMFR10",184,0)
 .K %ZIS,IOP,POP,ZTSK N I S DGION=$I,%ZIS="QM"
"RTN","DGMFR10",185,0)
 .D ^%ZIS K %ZIS
"RTN","DGMFR10",186,0)
 .I POP S IOP=DGION D ^%ZIS K IOP,DGION D  Q
"RTN","DGMFR10",187,0)
 ..N DIR,X,Y
"RTN","DGMFR10",188,0)
 ..S DIR(0)="YA",DIR("A",1)="  ** No Device Selected **",DIR("A")="Select a different device? (Y/N) " D ^DIR
"RTN","DGMFR10",189,0)
 ..S:'Y DGSRAC=1
"RTN","DGMFR10",190,0)
 .S DGDONE=1
"RTN","DGMFR10",191,0)
 I $D(IO("Q")) D  Q 1
"RTN","DGMFR10",192,0)
 .N ZTDESC,ZTSAVE,ZTRTN
"RTN","DGMFR10",193,0)
 .S ZTDESC="Race to Race Master Mapping Report",ZTRTN="DQ^DGMFR10"
"RTN","DGMFR10",194,0)
 .S ZTSAVE("DATE*")="",ZTSAVE("DG*")="",ZTSAVE("ZTREQ")="@"
"RTN","DGMFR10",195,0)
 .K IO("Q") D ^%ZTLOAD W:$D(ZTSK) !,"Report is Queued to print!" K ZTSK
"RTN","DGMFR10",196,0)
 Q:$G(DGSRAC) -1
"RTN","DGMFR10",197,0)
 Q 0
"RTN","DGMFR10",198,0)
 ;
"RTN","DGMFR10",199,0)
HEADER ; page break and report header information
"RTN","DGMFR10",200,0)
 N DGHDR,DGTAB,DGSPACE
"RTN","DGMFR10",201,0)
 S DGSRAC=0
"RTN","DGMFR10",202,0)
 I CRT,DGPGCNT>0,'$D(ZTQUEUED) D  Q:DGSRAC
"RTN","DGMFR10",203,0)
 .N DIR,LIN
"RTN","DGMFR10",204,0)
 .I MAXCNT<51 F LIN=1:1:(MAXCNT-$Y) W !
"RTN","DGMFR10",205,0)
 .W !
"RTN","DGMFR10",206,0)
 .S DIR(0)="E" D ^DIR K DIR
"RTN","DGMFR10",207,0)
 .I 'Y S DGSRAC=1 Q
"RTN","DGMFR10",208,0)
 S DGPGCNT=DGPGCNT+1
"RTN","DGMFR10",209,0)
 W @IOF,!
"RTN","DGMFR10",210,0)
 S $P(DGSPACE," ",132)=""
"RTN","DGMFR10",211,0)
 S DGHDR=" Race to Race Master Report     "
"RTN","DGMFR10",212,0)
 S DGHDR=DGHDR_"Page: "_DGPGCNT,DGTAB=132-$L(DGHDR)-1
"RTN","DGMFR10",213,0)
 W ?DGTAB,DGHDR
"RTN","DGMFR10",214,0)
 Q
"RTN","DGMFR10",215,0)
 ;
"RTN","DGMFR10",216,0)
PRINRAC(DGRACI)  ; Print Race file (#10) entry
"RTN","DGMFR10",217,0)
 W !!,"Race: ",$P(DGRAC0,"^")
"RTN","DGMFR10",218,0)
 N DGCT2
"RTN","DGMFR10",219,0)
 I $G(DGSUM)=2 D
"RTN","DGMFR10",220,0)
 .W !,"Abbreviation: ",$P(DGRAC0,"^",2)
"RTN","DGMFR10",221,0)
 .W ?30,"Status: ",DGRACST
"RTN","DGMFR10",222,0)
 .S DGCT=$P(DGRAC0,"^",3) I $L(DGCT) W !?3,"HL7 Value: ",DGCT
"RTN","DGMFR10",223,0)
 .S DGCT2=$P(DGRAC0,"^",5) I $L(DGCT2) W ?27,"PTF Value: ",DGCT2
"RTN","DGMFR10",224,0)
 S DGMRAC0=$G(^TMP($J,"DGMFR10",DGRAC0,DGRACI,"MRACE"))
"RTN","DGMFR10",225,0)
 S DGMRACI=+$P(DGMRAC0,"^",4)
"RTN","DGMFR10",226,0)
 W !,"Mapped to Race Master: ",$S(DGMRACI:"YES",1:"NO")
"RTN","DGMFR10",227,0)
 Q:'DGMRACI
"RTN","DGMFR10",228,0)
 W !?3,"Race Master Name: ",$P(^TMP($J,"DGMFR10",DGRAC0,DGRACI,"MRACE"),"^")
"RTN","DGMFR10",229,0)
 Q
"RTN","DGMFR10",230,0)
 ;
"RTN","DGMFR10",231,0)
INFO ; Display message, clear screen
"RTN","DGMFR10",232,0)
 N MSG
"RTN","DGMFR10",233,0)
 S MSG(1)=" This report prints Races from the RACE file (#10) and each"
"RTN","DGMFR10",234,0)
 S MSG(2)=" race's mapping relationship to the RACE MASTER (#10.99) file."
"RTN","DGMFR10",235,0)
 S MSG(3)=""
"RTN","DGMFR10",236,0)
 D CLEAR^VALM1
"RTN","DGMFR10",237,0)
 D BMES^XPDUTL(.MSG)
"RTN","DGMFR10",238,0)
 Q
"RTN","DGMFR11")
0^4^B68721321^n/a
"RTN","DGMFR11",1,0)
DGMFR11 ;DAL/JCH - NDS DEMOGRAPHICS MASTER MARITAL STATUS ASSOCIATIONS REPORT ;15-AUG-2017
"RTN","DGMFR11",2,0)
 ;;5.3;Registration;**933**;Aug 13, 1993;Build 44
"RTN","DGMFR11",3,0)
 ;
"RTN","DGMFR11",4,0)
 ; Available at Master File Reports [DGMF RMAIN] option, at the following menu path:
"RTN","DGMFR11",5,0)
 ;    Supervisor ADT Menu [DG SUPERVISOR MENU]
"RTN","DGMFR11",6,0)
 ;      ADT System Definition Menu [DG SYSTEM DEFINITION MENU]
"RTN","DGMFR11",7,0)
 ;        Master File Menu [DGMF MNU]
"RTN","DGMFR11",8,0)
 ;          Master File Reports [DGMF RMAIN]
"RTN","DGMFR11",9,0)
 Q
"RTN","DGMFR11",10,0)
 ;
"RTN","DGMFR11",11,0)
EN ; MMS Report Entry point
"RTN","DGMFR11",12,0)
 N DGOUT
"RTN","DGMFR11",13,0)
 S DGOUT=0
"RTN","DGMFR11",14,0)
 F  Q:$G(DGOUT)  D
"RTN","DGMFR11",15,0)
 .D MAIN Q:DGOUT
"RTN","DGMFR11",16,0)
 .N DIR W !!
"RTN","DGMFR11",17,0)
 .S DIR(0)="Y",DIR("B")="Y",DIR("A")="Run report again" D ^DIR
"RTN","DGMFR11",18,0)
 .S:X'="Y" DGOUT=1
"RTN","DGMFR11",19,0)
 Q
"RTN","DGMFR11",20,0)
 ;
"RTN","DGMFR11",21,0)
MAIN ; Driver loop
"RTN","DGMFR11",22,0)
 N DGSUM,DGMUA,DGSMS,DGOUTP
"RTN","DGMFR11",23,0)
 S DGSMS=0
"RTN","DGMFR11",24,0)
 ;
"RTN","DGMFR11",25,0)
 D INFO
"RTN","DGMFR11",26,0)
 ; Select (M)apped, (U)nmapped, or (A)ll entries from Marital Status (#11) file.
"RTN","DGMFR11",27,0)
 D MUA(.DGMUA) I '$D(DGMUA)!$G(DGOUT) S DGOUT=1 Q
"RTN","DGMFR11",28,0)
 S DGSUM=$$SUMMARY I 'DGSUM Q
"RTN","DGMFR11",29,0)
 ;
"RTN","DGMFR11",30,0)
 ; Select output format
"RTN","DGMFR11",31,0)
 S DGOUTP=$$OUT I DGSMS Q
"RTN","DGMFR11",32,0)
 ;
"RTN","DGMFR11",33,0)
 ; Select device
"RTN","DGMFR11",34,0)
 I $$SELDEV()!DGSMS Q
"RTN","DGMFR11",35,0)
 ;
"RTN","DGMFR11",36,0)
 I DGOUTP="R" W !!,"<*> please wait <*>"
"RTN","DGMFR11",37,0)
 U IO D DQ
"RTN","DGMFR11",38,0)
 Q
"RTN","DGMFR11",39,0)
 ;
"RTN","DGMFR11",40,0)
DQ ;  report (queue) starts here
"RTN","DGMFR11",41,0)
 N DGMSI,DGMMSI,DGMS0,DGMMS0
"RTN","DGMFR11",42,0)
 ;
"RTN","DGMFR11",43,0)
 K ^TMP($J,"DGMFR11")
"RTN","DGMFR11",44,0)
 ;  build list of Marital Statuses
"RTN","DGMFR11",45,0)
 S DGMSI=0 F  S DGMSI=$O(^DIC(11,DGMSI)) Q:'DGMSI  D
"RTN","DGMFR11",46,0)
 .S DGMS0=$G(^DIC(11,DGMSI,0))
"RTN","DGMFR11",47,0)
 .S DGMSP02=+$G(^DIC(11,DGMSI,.02))
"RTN","DGMFR11",48,0)
 .S DGMMSI=+$G(^DIC(11,DGMSI,"MASTER"))
"RTN","DGMFR11",49,0)
 .I $G(DGMUA)="U",$G(DGMMSI) Q
"RTN","DGMFR11",50,0)
 .I $G(DGMUA)="M",'$G(DGMMSI) Q
"RTN","DGMFR11",51,0)
 .S DGMMS0=$S($G(DGMMSI):$G(^DGMMS(11.99,+DGMMSI,0)),1:"Not Mapped")
"RTN","DGMFR11",52,0)
 .I DGMMSI S $P(DGMMS0,"^",4)=DGMMSI
"RTN","DGMFR11",53,0)
 .S ^TMP($J,"DGMFR11",DGMS0,DGMSI,"MS")=$G(DGMS0)
"RTN","DGMFR11",54,0)
 .S ^TMP($J,"DGMFR11",DGMS0,DGMSI,"STATUS")=DGMSP02
"RTN","DGMFR11",55,0)
 .S ^TMP($J,"DGMFR11",DGMS0,DGMSI,"MMSE")=$G(DGMMS0)
"RTN","DGMFR11",56,0)
 ;
"RTN","DGMFR11",57,0)
 D PRINT
"RTN","DGMFR11",58,0)
 ;
"RTN","DGMFR11",59,0)
 D ^%ZISC
"RTN","DGMFR11",60,0)
 K ^TMP($J,"DGMFR11")
"RTN","DGMFR11",61,0)
 Q
"RTN","DGMFR11",62,0)
 ;
"RTN","DGMFR11",63,0)
PRINT ; Print output
"RTN","DGMFR11",64,0)
 N MAXCNT,DGSMS,DGPGCNT,DGHDR,CRT,DGMS0,DGDELHD
"RTN","DGMFR11",65,0)
 I IOST["C-" S MAXCNT=IOSL-10,CRT=1
"RTN","DGMFR11",66,0)
 E  S MAXCNT=IOSL-6,CRT=0
"RTN","DGMFR11",67,0)
 I DGSUM=1 S MAXCNT=MAXCNT+5
"RTN","DGMFR11",68,0)
 S DGPGCNT=0,DGSMS=0
"RTN","DGMFR11",69,0)
 ;
"RTN","DGMFR11",70,0)
 I '$D(^TMP($J,"DGMFR11")) D HEADER W !!!?5,"No Data Found" Q
"RTN","DGMFR11",71,0)
 ;
"RTN","DGMFR11",72,0)
 S DGMS0="" F  S DGMS0=$O(^TMP($J,"DGMFR11",DGMS0)) Q:DGMS0=""  D PRINT2(DGMS0)
"RTN","DGMFR11",73,0)
 Q
"RTN","DGMFR11",74,0)
PRINT2(DGMS0) ; Get details
"RTN","DGMFR11",75,0)
 N DGMSI
"RTN","DGMFR11",76,0)
 S DGMSI=0 F  S DGMSI=$O(^TMP($J,"DGMFR11",DGMS0,DGMSI)) Q:'DGMSI!DGSMS  D
"RTN","DGMFR11",77,0)
 .N DGMMS0,DGCT,DGCTS,DGCTX,DGMSST
"RTN","DGMFR11",78,0)
 .N DGMTST,DGMTED,DGMMSI,DGMTEDI,DGMPAR,DGMPARX
"RTN","DGMFR11",79,0)
 .N DGMREPL,DGMREPX,DGMV0
"RTN","DGMFR11",80,0)
 .;
"RTN","DGMFR11",81,0)
 .I $G(DGOUTP)="E" D DELIM(DGMS0,DGMSI) Q
"RTN","DGMFR11",82,0)
 .;
"RTN","DGMFR11",83,0)
 .I ($Y+1>MAXCNT)!'DGPGCNT D HEADER Q:DGSMS
"RTN","DGMFR11",84,0)
 .S DGMS0=$G(^TMP($J,"DGMFR11",DGMS0,DGMSI,"MS"))
"RTN","DGMFR11",85,0)
 .S DGMSST=+$G(^TMP($J,"DGMFR11",DGMS0,DGMSI,"STATUS")),DGMSST=$S(DGMSST:"INACTIVE",1:"ACTIVE")
"RTN","DGMFR11",86,0)
 .D PRINMS(DGMSI)
"RTN","DGMFR11",87,0)
 .;
"RTN","DGMFR11",88,0)
 .Q:'DGMMSI
"RTN","DGMFR11",89,0)
 .I $G(DGSUM)=2 D
"RTN","DGMFR11",90,0)
 ..S DGMTED=$$NOW^XLFDT,DGMTED=$O(^DGMMS(11.99,DGMMSI,"TERMSTATUS","B",DGMTED),-1)
"RTN","DGMFR11",91,0)
 ..I DGMTED D  ; This should always be true, if data came from STS MFS process
"RTN","DGMFR11",92,0)
 ...S DGMTEDI="",DGMTEDI=$O(^DGMMS(11.99,DGMMSI,"TERMSTATUS","B",DGMTED,DGMTEDI))
"RTN","DGMFR11",93,0)
 ...S DGMTST=$P(^DGMMS(11.99,DGMMSI,"TERMSTATUS",DGMTEDI,0),"^",2)
"RTN","DGMFR11",94,0)
 ...W ?25,"Master Status: ",$S(DGMTST:"ACTIVE",1:"INACTIVE")
"RTN","DGMFR11",95,0)
 ..S DGMV0=$G(^DGMMS(11.99,DGMMSI,"VUID"))
"RTN","DGMFR11",96,0)
 ..W !?3,"VUID: ",$P(DGMV0,"^")
"RTN","DGMFR11",97,0)
 Q
"RTN","DGMFR11",98,0)
 ;
"RTN","DGMFR11",99,0)
MUA(DGMUA) ; Select (M)apped, (U)nmapped, or(A)ll - entries from 11 mapped to 11.99
"RTN","DGMFR11",100,0)
 N DIR,DIRUT,Y
"RTN","DGMFR11",101,0)
 W ! S DIR(0)="SAO^M:(M)apped;U:(U)nmapped;A:(A)ll"
"RTN","DGMFR11",102,0)
 S DIR("?")="Enter ^ to exit"
"RTN","DGMFR11",103,0)
 S DIR("A",1)="Run the report for"
"RTN","DGMFR11",104,0)
 S DIR("A")="(M)apped, (U)nmapped, or (A)ll Marital Status entries: ",DIR("B")="A" D ^DIR
"RTN","DGMFR11",105,0)
 I $D(DIRUT) S DGOUT=1 Q
"RTN","DGMFR11",106,0)
 S DGMUA=Y
"RTN","DGMFR11",107,0)
 Q
"RTN","DGMFR11",108,0)
 ;
"RTN","DGMFR11",109,0)
SUMMARY() ;  ask to print detailed or summary report
"RTN","DGMFR11",110,0)
 N DIR,DIRUT,X,Y
"RTN","DGMFR11",111,0)
 S DIR(0)="SOA^D:Detailed;S:Summary;",DIR("B")="Summary"
"RTN","DGMFR11",112,0)
 S DIR("A")="Type of report to print: "
"RTN","DGMFR11",113,0)
 W ! D ^DIR
"RTN","DGMFR11",114,0)
 I $D(DIRUT) S DGSMS=1 Q 0
"RTN","DGMFR11",115,0)
 Q $S(Y="S":1,Y="D":2,1:0)
"RTN","DGMFR11",116,0)
 ;
"RTN","DGMFR11",117,0)
OUT() ; select Excel or Report format
"RTN","DGMFR11",118,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,Y
"RTN","DGMFR11",119,0)
 W !
"RTN","DGMFR11",120,0)
 S DIR(0)="SA^E:Excel;R:Report"
"RTN","DGMFR11",121,0)
 S DIR("A")="(E)xcel Format or (R)eport Format: "
"RTN","DGMFR11",122,0)
 S DIR("B")="Report"
"RTN","DGMFR11",123,0)
 D ^DIR I $D(DIRUT) S DGSMS=1 Q ""
"RTN","DGMFR11",124,0)
 Q Y
"RTN","DGMFR11",125,0)
 ;
"RTN","DGMFR11",126,0)
DELIM(DGMS0,DGMSI)  ; Print output in "^" delimited format
"RTN","DGMFR11",127,0)
 ; Print data in (E)xcel format, e.g., "data^data^data"
"RTN","DGMFR11",128,0)
 I '$G(DGDELHD) S DGDELHD=1 D
"RTN","DGMFR11",129,0)
 .I $G(DGSUM)=1 W !,"VA Marital Status^Mapped/Not Mapped^Master Marital Status"
"RTN","DGMFR11",130,0)
 .I $G(DGSUM)=2 W !,"VA Marital Status^VA Abbreviation^VA Status^VA Code^Mapped/Not Mapped^Master MS Name^Master MS Code^Master Status^VUID"
"RTN","DGMFR11",131,0)
 S DGMSST=$P(DGMS0,"^",4)
"RTN","DGMFR11",132,0)
 S DGMSST=$S(DGMSST:"INACTIVE",1:"ACTIVE")
"RTN","DGMFR11",133,0)
 W !,$P(DGMS0,"^")
"RTN","DGMFR11",134,0)
 I $G(DGSUM)=2 D
"RTN","DGMFR11",135,0)
 .W "^",$P(DGMS0,"^",2)
"RTN","DGMFR11",136,0)
 .W "^",DGMSST
"RTN","DGMFR11",137,0)
 .S DGCT=$P(DGMS0,"^",3) W "^",DGCT
"RTN","DGMFR11",138,0)
 S DGMMS0=$G(^TMP($J,"DGMFR11",DGMS0,DGMSI,"MMSE"))
"RTN","DGMFR11",139,0)
 S DGMMSI=+$P(DGMMS0,"^",4)
"RTN","DGMFR11",140,0)
 W "^",$S(DGMMSI:"MAPPED",1:"NOT MAPPED")
"RTN","DGMFR11",141,0)
 Q:'DGMMSI
"RTN","DGMFR11",142,0)
 W "^",$P(DGMMS0,"^")  ; $P(^TMP($J,"DGMFR11",DGMS0,DGMSI,"MMSE"),"^")
"RTN","DGMFR11",143,0)
 I $G(DGSUM)=2 D
"RTN","DGMFR11",144,0)
 .W "^",$P(DGMMS0,"^",2)
"RTN","DGMFR11",145,0)
 .S DGMTED=$$NOW^XLFDT,DGMTED=$O(^DGMMS(11.99,DGMMSI,"TERMSTATUS","B",DGMTED),-1)
"RTN","DGMFR11",146,0)
 .I $G(DGMTED) D
"RTN","DGMFR11",147,0)
 ..S DGMTEDI="",DGMTEDI=$O(^DGMMS(11.99,DGMMSI,"TERMSTATUS","B",DGMTED,DGMTEDI))
"RTN","DGMFR11",148,0)
 ..S DGMTST=$P(^DGMMS(11.99,DGMMSI,"TERMSTATUS",DGMTEDI,0),"^",2)
"RTN","DGMFR11",149,0)
 ..W "^",$S(DGMTST:"ACTIVE",1:"INACTIVE")
"RTN","DGMFR11",150,0)
 .S DGMV0=$G(^DGMMS(11.99,DGMMSI,"VUID"))
"RTN","DGMFR11",151,0)
 .W "^",$P(DGMV0,"^")
"RTN","DGMFR11",152,0)
 Q
"RTN","DGMFR11",153,0)
 ;
"RTN","DGMFR11",154,0)
SELDEV()  ; Propmt for output device, return 1 if queued
"RTN","DGMFR11",155,0)
 I DGOUTP="E" D
"RTN","DGMFR11",156,0)
 .N DIR,X,Y
"RTN","DGMFR11",157,0)
 .S DIR("A",1)=""
"RTN","DGMFR11",158,0)
 .S DIR("A",2)="     ************************************************************"
"RTN","DGMFR11",159,0)
 .S DIR("A",3)="     **  You selected a Delimited report. Please verify you    **"
"RTN","DGMFR11",160,0)
 .S DIR("A",4)="     **  you have turned logging on to capture the output.     **"
"RTN","DGMFR11",161,0)
 .S DIR("A",5)="     **                                                        **"
"RTN","DGMFR11",162,0)
 .S DIR("A",6)="     **  To avoid undesired wrapping, enter '0;199;999' at     **"
"RTN","DGMFR11",163,0)
 .S DIR("A",7)="     **  the 'DEVICE:' prompt. The Terminal Session display    **"
"RTN","DGMFR11",164,0)
 .S DIR("A",8)="     **  may need to be set to 199 columns.                    **"
"RTN","DGMFR11",165,0)
 .S DIR("A",9)="     ************************************************************"
"RTN","DGMFR11",166,0)
 .S DIR("A",10)=""
"RTN","DGMFR11",167,0)
 .S DIR("A",11)="",DIR("A",12)=""
"RTN","DGMFR11",168,0)
 .S DIR("A")=" Press return to continue"
"RTN","DGMFR11",169,0)
 .S DIR(0)="EA" D ^DIR W !
"RTN","DGMFR11",170,0)
 ;
"RTN","DGMFR11",171,0)
 N DGDONE
"RTN","DGMFR11",172,0)
 W !,"You may queue this report to print at a later time.",!
"RTN","DGMFR11",173,0)
 F  Q:$G(DGSMS)!$G(DGDONE)  D
"RTN","DGMFR11",174,0)
 .K %ZIS,IOP,POP,ZTSK N I S DGION=$I,%ZIS="QM"
"RTN","DGMFR11",175,0)
 .D ^%ZIS K %ZIS
"RTN","DGMFR11",176,0)
 .I POP S IOP=DGION D ^%ZIS K IOP,DGION D  Q
"RTN","DGMFR11",177,0)
 ..N DIR,X,Y
"RTN","DGMFR11",178,0)
 ..S DIR(0)="YA",DIR("A",1)="  ** No Device Selected **",DIR("A")="Select a different device? (Y/N) " D ^DIR
"RTN","DGMFR11",179,0)
 ..S:'Y DGSMS=1
"RTN","DGMFR11",180,0)
 .S DGDONE=1
"RTN","DGMFR11",181,0)
 I $D(IO("Q")) D  Q 1
"RTN","DGMFR11",182,0)
 .N ZTDESC,ZTSAVE,ZTRTN
"RTN","DGMFR11",183,0)
 .S ZTDESC="Marital Status to Master Marital Status Mapping Report",ZTRTN="DQ^DGMFR11"
"RTN","DGMFR11",184,0)
 .S ZTSAVE("DATE*")="",ZTSAVE("DG*")="",ZTSAVE("ZTREQ")="@"
"RTN","DGMFR11",185,0)
 .K IO("Q") D ^%ZTLOAD W:$D(ZTSK) !,"Report is Queued to print!" K ZTSK
"RTN","DGMFR11",186,0)
 Q:$G(DGSMS) -1
"RTN","DGMFR11",187,0)
 Q 0
"RTN","DGMFR11",188,0)
 ;
"RTN","DGMFR11",189,0)
HEADER ; page break and report header information
"RTN","DGMFR11",190,0)
 N DGHDR,DGTAB,DGSPACE
"RTN","DGMFR11",191,0)
 S DGSMS=0
"RTN","DGMFR11",192,0)
 I CRT,DGPGCNT>0,'$D(ZTQUEUED) D  Q:DGSMS
"RTN","DGMFR11",193,0)
 .N DIR,LIN
"RTN","DGMFR11",194,0)
 .I MAXCNT<51 F LIN=1:1:(MAXCNT-$Y) W !
"RTN","DGMFR11",195,0)
 .W !
"RTN","DGMFR11",196,0)
 .S DIR(0)="E" D ^DIR K DIR
"RTN","DGMFR11",197,0)
 .I 'Y S DGSMS=1 Q
"RTN","DGMFR11",198,0)
 S DGPGCNT=DGPGCNT+1
"RTN","DGMFR11",199,0)
 W @IOF,!
"RTN","DGMFR11",200,0)
 S $P(DGSPACE," ",132)=""
"RTN","DGMFR11",201,0)
 S DGHDR=" Marital Status to Master Marital Status Report     "
"RTN","DGMFR11",202,0)
 S DGHDR=DGHDR_"Page: "_DGPGCNT,DGTAB=132-$L(DGHDR)-1
"RTN","DGMFR11",203,0)
 W ?DGTAB,DGHDR
"RTN","DGMFR11",204,0)
 Q
"RTN","DGMFR11",205,0)
 ;
"RTN","DGMFR11",206,0)
PRINMS(DGMSI)  ; Print Marital Status file (#11) entry
"RTN","DGMFR11",207,0)
 W !!,"Marital Status: ",$P(DGMS0,"^")
"RTN","DGMFR11",208,0)
 N DGCT2
"RTN","DGMFR11",209,0)
 I $G(DGSUM)=2 D
"RTN","DGMFR11",210,0)
 .W !,"Abbreviation: ",$P(DGMS0,"^",2)
"RTN","DGMFR11",211,0)
 .W ?30,"Status: ",DGMSST
"RTN","DGMFR11",212,0)
 .S DGCT=$P(DGMS0,"^",3) I $L(DGCT) W !?3,"Code: ",DGCT
"RTN","DGMFR11",213,0)
 S DGMMS0=$G(^TMP($J,"DGMFR11",DGMS0,DGMSI,"MMSE"))
"RTN","DGMFR11",214,0)
 S DGMMSI=+$P(DGMMS0,"^",4)
"RTN","DGMFR11",215,0)
 W !,"Mapped to Master Marital Status : ",$S(DGMMSI:"YES",1:"NO")
"RTN","DGMFR11",216,0)
 Q:'DGMMSI
"RTN","DGMFR11",217,0)
 W !?3,"Master MS Name: ",$P(^TMP($J,"DGMFR11",DGMS0,DGMSI,"MMSE"),"^")
"RTN","DGMFR11",218,0)
 I $G(DGSUM)=2 W !?3,"Master Code: ",$P(^TMP($J,"DGMFR11",DGMS0,DGMSI,"MMSE"),"^",2)
"RTN","DGMFR11",219,0)
 Q
"RTN","DGMFR11",220,0)
 ;
"RTN","DGMFR11",221,0)
INFO ; Display message, clear screen
"RTN","DGMFR11",222,0)
 N MSG
"RTN","DGMFR11",223,0)
 S MSG(1)="  This report prints Marital Statuses from the MARITAL"
"RTN","DGMFR11",224,0)
 S MSG(2)="  STATUS file (#11), and each Marital Status' relationship"
"RTN","DGMFR11",225,0)
 S MSG(3)="  to the Master Marital Status (#11.99) file."
"RTN","DGMFR11",226,0)
 S MSG(4)=""
"RTN","DGMFR11",227,0)
 D CLEAR^VALM1
"RTN","DGMFR11",228,0)
 D BMES^XPDUTL(.MSG)
"RTN","DGMFR11",229,0)
 Q
"RTN","DGMFR13")
0^3^B62970443^n/a
"RTN","DGMFR13",1,0)
DGMFR13 ;DAL/JCH - NDS DEMOGRAPHICS MASTER RELIGION ASSOCIATIONS REPORT ;15-AUG-2017
"RTN","DGMFR13",2,0)
 ;;5.3;Registration;**933**;Aug 13, 1993;Build 44
"RTN","DGMFR13",3,0)
 ;
"RTN","DGMFR13",4,0)
 ; Available at Master File Reports [DGMF RMAIN] option, at the following menu path:
"RTN","DGMFR13",5,0)
 ;    Supervisor ADT Menu [DG SUPERVISOR MENU]
"RTN","DGMFR13",6,0)
 ;      ADT System Definition Menu [DG SYSTEM DEFINITION MENU]
"RTN","DGMFR13",7,0)
 ;        Master File Menu [DGMF MNU]
"RTN","DGMFR13",8,0)
 ;          Master File Reports [DGMF RMAIN]
"RTN","DGMFR13",9,0)
 Q
"RTN","DGMFR13",10,0)
 ;
"RTN","DGMFR13",11,0)
EN ; MMR Report Entry point
"RTN","DGMFR13",12,0)
 N DGOUT
"RTN","DGMFR13",13,0)
 S DGOUT=0
"RTN","DGMFR13",14,0)
 F  Q:$G(DGOUT)  D
"RTN","DGMFR13",15,0)
 .D MAIN Q:DGOUT
"RTN","DGMFR13",16,0)
 .N DIR W !!
"RTN","DGMFR13",17,0)
 .S DIR(0)="Y",DIR("B")="Y",DIR("A")="Run report again" D ^DIR
"RTN","DGMFR13",18,0)
 .S:X'="Y" DGOUT=1
"RTN","DGMFR13",19,0)
 Q
"RTN","DGMFR13",20,0)
 ;
"RTN","DGMFR13",21,0)
MAIN ; Driver loop
"RTN","DGMFR13",22,0)
 N DGSUM,DGMUA,DGSMR,DGOUTP
"RTN","DGMFR13",23,0)
 S DGSMR=0
"RTN","DGMFR13",24,0)
 ;
"RTN","DGMFR13",25,0)
 D INFO
"RTN","DGMFR13",26,0)
 ; Select (M)apped, (U)nmapped, or (A)ll entries from Religion (#13) file.
"RTN","DGMFR13",27,0)
 D MUA(.DGMUA) I '$D(DGMUA)!$G(DGOUT) S DGOUT=1 Q
"RTN","DGMFR13",28,0)
 S DGSUM=$$SUMMARY I 'DGSUM Q
"RTN","DGMFR13",29,0)
 ;
"RTN","DGMFR13",30,0)
 ; Select output format
"RTN","DGMFR13",31,0)
 S DGOUTP=$$OUT I DGSMR Q
"RTN","DGMFR13",32,0)
 ;
"RTN","DGMFR13",33,0)
 ; Select device
"RTN","DGMFR13",34,0)
 I $$SELDEV()!DGSMR Q
"RTN","DGMFR13",35,0)
 ;
"RTN","DGMFR13",36,0)
 I DGOUTP="R" W !!,"<*> please wait <*>"
"RTN","DGMFR13",37,0)
 U IO D DQ
"RTN","DGMFR13",38,0)
 Q
"RTN","DGMFR13",39,0)
 ;
"RTN","DGMFR13",40,0)
DQ ;  report (queue) starts here
"RTN","DGMFR13",41,0)
 N DGMRI,DGMMRI,DGMR0,DGMMR0
"RTN","DGMFR13",42,0)
 ;
"RTN","DGMFR13",43,0)
 K ^TMP($J,"DGMFR13")
"RTN","DGMFR13",44,0)
 ;  build list of religions types
"RTN","DGMFR13",45,0)
 S DGMRI=0 F  S DGMRI=$O(^DIC(13,DGMRI)) Q:'DGMRI  D
"RTN","DGMFR13",46,0)
 .S DGMR0=$G(^DIC(13,DGMRI,0))
"RTN","DGMFR13",47,0)
 .S DGMMRI=+$G(^DIC(13,DGMRI,"MASTER"))
"RTN","DGMFR13",48,0)
 .I $G(DGMUA)="U",$G(DGMMRI) Q
"RTN","DGMFR13",49,0)
 .I $G(DGMUA)="M",'$G(DGMMRI) Q
"RTN","DGMFR13",50,0)
 .S DGMMR0=$S($G(DGMMRI):$G(^DGMR(13.99,+DGMMRI,0)),1:"Not Mapped")
"RTN","DGMFR13",51,0)
 .I DGMMRI S $P(DGMMR0,"^",4)=DGMMRI
"RTN","DGMFR13",52,0)
 .S ^TMP($J,"DGMFR13",DGMR0,DGMRI,"MR")=$G(DGMR0)
"RTN","DGMFR13",53,0)
 .S ^TMP($J,"DGMFR13",DGMR0,DGMRI,"MMRE")=$G(DGMMR0)
"RTN","DGMFR13",54,0)
 ;
"RTN","DGMFR13",55,0)
 D PRINT
"RTN","DGMFR13",56,0)
 ;
"RTN","DGMFR13",57,0)
 D ^%ZISC
"RTN","DGMFR13",58,0)
 K ^TMP($J,"DGMFR13")
"RTN","DGMFR13",59,0)
 Q
"RTN","DGMFR13",60,0)
 ;
"RTN","DGMFR13",61,0)
PRINT ; Print output
"RTN","DGMFR13",62,0)
 N MAXCNT,DGSMR,DGPGCNT,DGHDR,CRT,DGMR0,DGDELHD
"RTN","DGMFR13",63,0)
 I IOST["C-" S MAXCNT=IOSL-10,CRT=1
"RTN","DGMFR13",64,0)
 E  S MAXCNT=IOSL-6,CRT=0
"RTN","DGMFR13",65,0)
 I DGSUM=1 S MAXCNT=MAXCNT+5
"RTN","DGMFR13",66,0)
 S DGPGCNT=0,DGSMR=0
"RTN","DGMFR13",67,0)
 ;
"RTN","DGMFR13",68,0)
 I '$D(^TMP($J,"DGMFR13")) D HEADER W !!!?5,"No Data Found" Q
"RTN","DGMFR13",69,0)
 ;
"RTN","DGMFR13",70,0)
 S DGMR0="" F  S DGMR0=$O(^TMP($J,"DGMFR13",DGMR0)) Q:DGMR0=""  D PRINT2(DGMR0)
"RTN","DGMFR13",71,0)
 Q
"RTN","DGMFR13",72,0)
 ;
"RTN","DGMFR13",73,0)
PRINT2(DGMR0) ; Get details
"RTN","DGMFR13",74,0)
 N DGMRI
"RTN","DGMFR13",75,0)
 S DGMRI=0 F  S DGMRI=$O(^TMP($J,"DGMFR13",DGMR0,DGMRI)) Q:'DGMRI!DGSMR  D
"RTN","DGMFR13",76,0)
 .N DGMMR0,DGCT,DGCTS,DGCTX,DGMRST,DGMRCOD
"RTN","DGMFR13",77,0)
 .N DGMTST,DGMTED,DGMMRI,DGMTEDI,DGMPAR,DGMPARX
"RTN","DGMFR13",78,0)
 .N DGMREPL,DGMREPX,DGMV0
"RTN","DGMFR13",79,0)
 .;
"RTN","DGMFR13",80,0)
 .I $G(DGOUTP)="E" D DELIM(DGMR0,DGMRI) Q
"RTN","DGMFR13",81,0)
 .;
"RTN","DGMFR13",82,0)
 .I ($Y+1>MAXCNT)!'DGPGCNT D HEADER Q:DGSMR
"RTN","DGMFR13",83,0)
 .S DGMR0=$G(^TMP($J,"DGMFR13",DGMR0,DGMRI,"MR"))
"RTN","DGMFR13",84,0)
 .S DGMRST=+$G(^TMP($J,"DGMFR13",DGMR0,DGMRI,"STATUS")),DGMRST=$S(DGMRST:"INACTIVE",1:"ACTIVE")
"RTN","DGMFR13",85,0)
 .D PRINMR(DGMRI)
"RTN","DGMFR13",86,0)
 .;
"RTN","DGMFR13",87,0)
 .Q:'DGMMRI
"RTN","DGMFR13",88,0)
 .I $G(DGSUM)=2 D
"RTN","DGMFR13",89,0)
 ..S DGMTED=$$NOW^XLFDT,DGMTED=$O(^DGMR(13.99,DGMMRI,"TERMSTATUS","B",DGMTED),-1)
"RTN","DGMFR13",90,0)
 ..I DGMTED D  ; This should always be true, if data came from STS MFS process
"RTN","DGMFR13",91,0)
 ...S DGMTEDI="",DGMTEDI=$O(^DGMR(13.99,DGMMRI,"TERMSTATUS","B",DGMTED,DGMTEDI))
"RTN","DGMFR13",92,0)
 ...S DGMTST=$P(^DGMR(13.99,DGMMRI,"TERMSTATUS",DGMTEDI,0),"^",2)
"RTN","DGMFR13",93,0)
 ...W ?30," Status: ",$S(DGMTST:"ACTIVE",1:"INACTIVE")
"RTN","DGMFR13",94,0)
 ..S DGMV0=$G(^DGMR(13.99,DGMMRI,"VUID"))
"RTN","DGMFR13",95,0)
 ..W !?3,"VUID: ",$P(DGMV0,"^")
"RTN","DGMFR13",96,0)
 Q
"RTN","DGMFR13",97,0)
 ;
"RTN","DGMFR13",98,0)
MUA(DGMUA) ; Select (M)apped, (U)nmapped, or(A)ll - entries from 13 mapped to 13.99
"RTN","DGMFR13",99,0)
 N DIR,DIRUT,Y
"RTN","DGMFR13",100,0)
 W ! S DIR(0)="SAO^M:(M)apped;U:(U)nmapped;A:(A)ll"
"RTN","DGMFR13",101,0)
 S DIR("?")="Enter ^ to exit"
"RTN","DGMFR13",102,0)
 S DIR("A",1)="Run the report for"
"RTN","DGMFR13",103,0)
 S DIR("A")="(M)apped, (U)nmapped, or (A)ll Religion entries: ",DIR("B")="A" D ^DIR
"RTN","DGMFR13",104,0)
 I $D(DIRUT) S DGOUT=1 Q
"RTN","DGMFR13",105,0)
 S DGMUA=Y
"RTN","DGMFR13",106,0)
 Q
"RTN","DGMFR13",107,0)
 ;
"RTN","DGMFR13",108,0)
SUMMARY() ;  ask to print detailed or summary report
"RTN","DGMFR13",109,0)
 N DIR,DIRUT,X,Y
"RTN","DGMFR13",110,0)
 S DIR(0)="SOA^D:Detailed;S:Summary;",DIR("B")="Summary"
"RTN","DGMFR13",111,0)
 S DIR("A")="Type of report to print: "
"RTN","DGMFR13",112,0)
 W ! D ^DIR
"RTN","DGMFR13",113,0)
 I $D(DIRUT) S DGSMR=1 Q 0
"RTN","DGMFR13",114,0)
 Q $S(Y="S":1,Y="D":2,1:0)
"RTN","DGMFR13",115,0)
 ;
"RTN","DGMFR13",116,0)
OUT() ; select Excel or Report format
"RTN","DGMFR13",117,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,Y
"RTN","DGMFR13",118,0)
 W !
"RTN","DGMFR13",119,0)
 S DIR(0)="SA^E:Excel;R:Report"
"RTN","DGMFR13",120,0)
 S DIR("A")="(E)xcel Format or (R)eport Format: "
"RTN","DGMFR13",121,0)
 S DIR("B")="Report"
"RTN","DGMFR13",122,0)
 D ^DIR I $D(DIRUT) S DGSMR=1 Q ""
"RTN","DGMFR13",123,0)
 Q Y
"RTN","DGMFR13",124,0)
 ;
"RTN","DGMFR13",125,0)
DELIM(DGMR0,DGMRI)  ; Print output in "^" delimited format
"RTN","DGMFR13",126,0)
 ; Print data in (E)xcel format, e.g., "data^data^data"
"RTN","DGMFR13",127,0)
 I '$G(DGDELHD) S DGDELHD=1 D
"RTN","DGMFR13",128,0)
 .I $G(DGSUM)=1 W !,"VA Religion^Mapped/Not Mapped^Master Religion Name"
"RTN","DGMFR13",129,0)
 .I $G(DGSUM)=2 W !,"VA Religion^VA Religion Code^Mapped/Not Mapped^Master Religion Name^Master Religion Code^Master Religion Status^VUID"
"RTN","DGMFR13",130,0)
 W !,$P(DGMR0,"^")
"RTN","DGMFR13",131,0)
 I $G(DGSUM)=2 W "^",$P(DGMR0,"^",4)
"RTN","DGMFR13",132,0)
 S DGMMR0=$G(^TMP($J,"DGMFR13",DGMR0,DGMRI,"MMRE"))
"RTN","DGMFR13",133,0)
 S DGMMRI=+$P(DGMMR0,"^",4)
"RTN","DGMFR13",134,0)
 W "^",$S(DGMMRI:"MAPPED",1:"NOT MAPPED")
"RTN","DGMFR13",135,0)
 Q:'DGMMRI
"RTN","DGMFR13",136,0)
 W "^",$P(^TMP($J,"DGMFR13",DGMR0,DGMRI,"MMRE"),"^")
"RTN","DGMFR13",137,0)
 I $G(DGSUM)=2 D
"RTN","DGMFR13",138,0)
 .W "^",$P(^TMP($J,"DGMFR13",DGMR0,DGMRI,"MMRE"),"^",2)
"RTN","DGMFR13",139,0)
 .S DGMTED=$$NOW^XLFDT,DGMTED=$O(^DGMR(13.99,DGMMRI,"TERMSTATUS","B",DGMTED),-1)
"RTN","DGMFR13",140,0)
 .I $G(DGMTED) D
"RTN","DGMFR13",141,0)
 ..S DGMTEDI="",DGMTEDI=$O(^DGMR(13.99,DGMMRI,"TERMSTATUS","B",DGMTED,DGMTEDI))
"RTN","DGMFR13",142,0)
 ..S DGMTST=$P(^DGMR(13.99,DGMMRI,"TERMSTATUS",DGMTEDI,0),"^",2)
"RTN","DGMFR13",143,0)
 ..W "^",$S(DGMTST:"ACTIVE",1:"INACTIVE")
"RTN","DGMFR13",144,0)
 .S DGMV0=$G(^DGMR(13.99,DGMMRI,"VUID"))
"RTN","DGMFR13",145,0)
 .W "^",$P(DGMV0,"^")
"RTN","DGMFR13",146,0)
 Q
"RTN","DGMFR13",147,0)
 ;
"RTN","DGMFR13",148,0)
SELDEV()  ; Prompt for output device, return 1 if queued
"RTN","DGMFR13",149,0)
 I DGOUTP="E" D
"RTN","DGMFR13",150,0)
 .N DIR,X,Y
"RTN","DGMFR13",151,0)
 .S DIR("A",1)=""
"RTN","DGMFR13",152,0)
 .S DIR("A",2)="     ************************************************************"
"RTN","DGMFR13",153,0)
 .S DIR("A",3)="     **  You selected a Delimited report. Please verify you    **"
"RTN","DGMFR13",154,0)
 .S DIR("A",4)="     **  you have turned logging on to capture the output.     **"
"RTN","DGMFR13",155,0)
 .S DIR("A",5)="     **                                                        **"
"RTN","DGMFR13",156,0)
 .S DIR("A",6)="     **  To avoid undesired wrapping, enter '0;199;999' at     **"
"RTN","DGMFR13",157,0)
 .S DIR("A",7)="     **  the 'DEVICE:' prompt. The Terminal Session display    **"
"RTN","DGMFR13",158,0)
 .S DIR("A",8)="     **  may need to be set to 199 columns.                    **"
"RTN","DGMFR13",159,0)
 .S DIR("A",9)="     ************************************************************"
"RTN","DGMFR13",160,0)
 .S DIR("A",10)=""
"RTN","DGMFR13",161,0)
 .S DIR("A",11)="",DIR("A",12)=""
"RTN","DGMFR13",162,0)
 .S DIR("A")=" Press return to continue"
"RTN","DGMFR13",163,0)
 .S DIR(0)="EA" D ^DIR W !
"RTN","DGMFR13",164,0)
 ;
"RTN","DGMFR13",165,0)
 N DGDONE
"RTN","DGMFR13",166,0)
 W !,"You may queue this report to print at a later time.",!
"RTN","DGMFR13",167,0)
 F  Q:$G(DGSMR)!$G(DGDONE)  D
"RTN","DGMFR13",168,0)
 .K %ZIS,IOP,POP,ZTSK N I S DGION=$I,%ZIS="QM"
"RTN","DGMFR13",169,0)
 .D ^%ZIS K %ZIS
"RTN","DGMFR13",170,0)
 .I POP S IOP=DGION D ^%ZIS K IOP,DGION D  Q
"RTN","DGMFR13",171,0)
 ..N DIR,X,Y
"RTN","DGMFR13",172,0)
 ..S DIR(0)="YA",DIR("A",1)="  ** No Device Selected **",DIR("A")="Select a different device? (Y/N) " D ^DIR
"RTN","DGMFR13",173,0)
 ..S:'Y DGSMR=1
"RTN","DGMFR13",174,0)
 .S DGDONE=1
"RTN","DGMFR13",175,0)
 I $D(IO("Q")) D  Q 1
"RTN","DGMFR13",176,0)
 .N ZTDESC,ZTSAVE,ZTRTN
"RTN","DGMFR13",177,0)
 .S ZTDESC="Religion to Master Religion Mapping Report",ZTRTN="DQ^DGMFR13"
"RTN","DGMFR13",178,0)
 .S ZTSAVE("DATE*")="",ZTSAVE("DG*")="",ZTSAVE("ZTREQ")="@"
"RTN","DGMFR13",179,0)
 .K IO("Q") D ^%ZTLOAD W:$D(ZTSK) !,"Report is Queued to print!" K ZTSK
"RTN","DGMFR13",180,0)
 Q:$G(DGSMR) -1
"RTN","DGMFR13",181,0)
 Q 0
"RTN","DGMFR13",182,0)
 ;
"RTN","DGMFR13",183,0)
HEADER ; page break and report header information
"RTN","DGMFR13",184,0)
 N DGHDR,DGTAB,DGSPACE
"RTN","DGMFR13",185,0)
 S DGSMR=0
"RTN","DGMFR13",186,0)
 I CRT,DGPGCNT>0,'$D(ZTQUEUED) D  Q:DGSMR
"RTN","DGMFR13",187,0)
 .N DIR,LIN
"RTN","DGMFR13",188,0)
 .I MAXCNT<51 F LIN=1:1:(MAXCNT-$Y) W !
"RTN","DGMFR13",189,0)
 .W !
"RTN","DGMFR13",190,0)
 .S DIR(0)="E" D ^DIR K DIR
"RTN","DGMFR13",191,0)
 .I 'Y S DGSMR=1 Q
"RTN","DGMFR13",192,0)
 S DGPGCNT=DGPGCNT+1
"RTN","DGMFR13",193,0)
 W @IOF,!
"RTN","DGMFR13",194,0)
 S $P(DGSPACE," ",132)=""
"RTN","DGMFR13",195,0)
 S DGHDR=" Religion to Master Religion Report     "
"RTN","DGMFR13",196,0)
 S DGHDR=DGHDR_"Page: "_DGPGCNT,DGTAB=132-$L(DGHDR)-1
"RTN","DGMFR13",197,0)
 W ?DGTAB,DGHDR
"RTN","DGMFR13",198,0)
 Q
"RTN","DGMFR13",199,0)
 ;
"RTN","DGMFR13",200,0)
PRINMR(DGMRI)  ; Print Religion file (#13) entry
"RTN","DGMFR13",201,0)
 N DGCT2
"RTN","DGMFR13",202,0)
 W !!,"VA Religion: ",$P(DGMR0,"^")
"RTN","DGMFR13",203,0)
 I $G(DGSUM)=2 D
"RTN","DGMFR13",204,0)
 .W !,"VA Religion Code: ",$P(DGMR0,"^",4)
"RTN","DGMFR13",205,0)
 S DGMMR0=$G(^TMP($J,"DGMFR13",DGMR0,DGMRI,"MMRE"))
"RTN","DGMFR13",206,0)
 S DGMMRI=+$P(DGMMR0,"^",4)
"RTN","DGMFR13",207,0)
 W !,"Mapped to Master Religion: ",$S(DGMMRI:"YES",1:"NO")
"RTN","DGMFR13",208,0)
 Q:'DGMMRI
"RTN","DGMFR13",209,0)
 W !?3,"Master Religion Name: ",$P(^TMP($J,"DGMFR13",DGMR0,DGMRI,"MMRE"),"^")
"RTN","DGMFR13",210,0)
 I $G(DGSUM)=2 W !?3,"Master Code: ",$P(^TMP($J,"DGMFR13",DGMR0,DGMRI,"MMRE"),"^",2)
"RTN","DGMFR13",211,0)
 Q
"RTN","DGMFR13",212,0)
 ;
"RTN","DGMFR13",213,0)
INFO ; Display message, clear screen
"RTN","DGMFR13",214,0)
 N MSG
"RTN","DGMFR13",215,0)
 S MSG(1)="  This report prints Religions from the RELIGION"
"RTN","DGMFR13",216,0)
 S MSG(2)="  file (#13), and each Religion' relationship"
"RTN","DGMFR13",217,0)
 S MSG(3)="  to the Master Religion (#13.99) file."
"RTN","DGMFR13",218,0)
 S MSG(4)=""
"RTN","DGMFR13",219,0)
 D CLEAR^VALM1
"RTN","DGMFR13",220,0)
 D BMES^XPDUTL(.MSG)
"RTN","DGMFR13",221,0)
 Q
"RTN","DGMFRPT")
0^10^B3969553^n/a
"RTN","DGMFRPT",1,0)
DGMFRPT ;DAL/JCH - NDS DEMOGRAPHICS MASTER FILE REPORTS ;15-AUG-2017
"RTN","DGMFRPT",2,0)
 ;;5.3;Registration;**933**;Aug 13, 1993;Build 44
"RTN","DGMFRPT",3,0)
 ;
"RTN","DGMFRPT",4,0)
 ; Available at Master File Reports [DGMF RMAIN] option, at the following menu path:
"RTN","DGMFRPT",5,0)
 ;    Supervisor ADT Menu [DG SUPERVISOR MENU]
"RTN","DGMFRPT",6,0)
 ;      ADT System Definition Menu [DG SYSTEM DEFINITION MENU]
"RTN","DGMFRPT",7,0)
 ;        Master Demographics Files [DGMF MENU]
"RTN","DGMFRPT",8,0)
 ;          Master File Reports [DGMF RMAIN]
"RTN","DGMFRPT",9,0)
 Q
"RTN","DGMFRPT",10,0)
 ;
"RTN","DGMFRPT",11,0)
EN  ; Allow users to print Demographics Master files
"RTN","DGMFRPT",12,0)
 D INFO        ; Display option info
"RTN","DGMFRPT",13,0)
 N DGDONE      ; Signal from user - Q:DGDONE
"RTN","DGMFRPT",14,0)
 S DGDONE=0
"RTN","DGMFRPT",15,0)
 ; Prompt for Demographics files (#10, #11, or #13) entries until user quits
"RTN","DGMFRPT",16,0)
 F  Q:DGDONE  D
"RTN","DGMFRPT",17,0)
 .N DGFILE
"RTN","DGMFRPT",18,0)
 .S DGFILE=$$ASKFILE()
"RTN","DGMFRPT",19,0)
 .I 'DGFILE S DGDONE=1 Q
"RTN","DGMFRPT",20,0)
 .S ROU=$S(DGFILE=10:"EN^DGMFR10",DGFILE=11:"EN^DGMFR11",DGFILE=13:"EN^DGMFR13",1:"")
"RTN","DGMFRPT",21,0)
 .I ROU="" W !," ??" Q
"RTN","DGMFRPT",22,0)
 .D @ROU
"RTN","DGMFRPT",23,0)
 .D INFO
"RTN","DGMFRPT",24,0)
 Q
"RTN","DGMFRPT",25,0)
 ;
"RTN","DGMFRPT",26,0)
INFO ; Display message, clear screen
"RTN","DGMFRPT",27,0)
 N MSG
"RTN","DGMFRPT",28,0)
 S MSG(1)=" This option prints entries from the RACE file(#10),"
"RTN","DGMFRPT",29,0)
 S MSG(2)=" MARITAL STATUS (#11) file, and RELIGION file (#13),"
"RTN","DGMFRPT",30,0)
 S MSG(3)=" and their association with its corresponding"
"RTN","DGMFRPT",31,0)
 S MSG(4)=" MASTER file containing a set of standard entries."
"RTN","DGMFRPT",32,0)
 S MSG(5)=""
"RTN","DGMFRPT",33,0)
 D CLEAR^VALM1
"RTN","DGMFRPT",34,0)
 D BMES^XPDUTL(.MSG)
"RTN","DGMFRPT",35,0)
 Q
"RTN","DGMFRPT",36,0)
 ;
"RTN","DGMFRPT",37,0)
ASKFILE()  ; Ask user to enter local file to print
"RTN","DGMFRPT",38,0)
 N DIR
"RTN","DGMFRPT",39,0)
 S DIR(0)="SO^10:RACE;11:MARITAL STATUS;13:RELIGION"
"RTN","DGMFRPT",40,0)
 S DIR("?")="Select a file to print its Master File associations."
"RTN","DGMFRPT",41,0)
 S DIR("L",1)="   RACE file           (10)"
"RTN","DGMFRPT",42,0)
 S DIR("L",2)="   MARITAL STATUS file (11)"
"RTN","DGMFRPT",43,0)
 S DIR("L")="   RELIGION file       (13)"
"RTN","DGMFRPT",44,0)
 S DIR("A")="Enter the file name or number "
"RTN","DGMFRPT",45,0)
 D ^DIR
"RTN","DGMFRPT",46,0)
 Q $S(Y>0:+Y,1:"")
"RTN","DGNDSU")
0^11^B33380048^n/a
"RTN","DGNDSU",1,0)
DGNDSU ;DAL/JCH - DEMOGRAPHICS NDS UTILITIES ;06/18/2017
"RTN","DGNDSU",2,0)
 ;;5.3;Registration;**933**;Aug 13, 1993;Build 44
"RTN","DGNDSU",3,0)
 ;
"RTN","DGNDSU",4,0)
 Q
"RTN","DGNDSU",5,0)
 ;
"RTN","DGNDSU",6,0)
QUE ; Task off to run in background
"RTN","DGNDSU",7,0)
 N ZTRTN,ZTDESC,ZTDTH
"RTN","DGNDSU",8,0)
 ;
"RTN","DGNDSU",9,0)
 S ZTRTN="EN^DGNDSU"
"RTN","DGNDSU",10,0)
 S ZTDESC="Demographics NDS Master File Associations"
"RTN","DGNDSU",11,0)
 S ZTDTH=$$NOW^XLFDT
"RTN","DGNDSU",12,0)
 S ZTIO=""
"RTN","DGNDSU",13,0)
 ;
"RTN","DGNDSU",14,0)
 D ^%ZTLOAD
"RTN","DGNDSU",15,0)
 Q
"RTN","DGNDSU",16,0)
 ;
"RTN","DGNDSU",17,0)
EN ; Update Demographics pointers to MASTER files
"RTN","DGNDSU",18,0)
 N DGFL,XUMF
"RTN","DGNDSU",19,0)
 ; Update Demographics file pointers to MASTER file
"RTN","DGNDSU",20,0)
 ;  RACE MASTER (#90) field in RACE (#10) points to RACE MASTER (#10.99) file
"RTN","DGNDSU",21,0)
 ;  MASTER MARITAL STATUS(#90) field in MARITAL STATUS points to MASTER MARITAL STATUS file (#11.99)
"RTN","DGNDSU",22,0)
 ;  MASTER RELIGION(#90) field in RELIGION (#13) points to MASTER RELIGION file (#13.99)
"RTN","DGNDSU",23,0)
 S XUMF=1
"RTN","DGNDSU",24,0)
 F DGFL=10,11,13 D UPDATE(DGFL)
"RTN","DGNDSU",25,0)
 Q
"RTN","DGNDSU",26,0)
 ;
"RTN","DGNDSU",27,0)
UPDATE(OFILE) ; Update MASTER FILE multiple (#90) field pointers in legacy file (OFILE).
"RTN","DGNDSU",28,0)
 ; Check ASSOCIATED VA <concept> field (#90) in MASTER file, add pointers in OFILE to MASTER file. 
"RTN","DGNDSU",29,0)
 D SCANM(OFILE)
"RTN","DGNDSU",30,0)
 ; Check pointers to MASTER file in OFILE, remove pointers if MASTER file entry doesn't exist.
"RTN","DGNDSU",31,0)
 D SCANO(OFILE)
"RTN","DGNDSU",32,0)
 ;
"RTN","DGNDSU",33,0)
 K ^TMP($J,"DGNDS")
"RTN","DGNDSU",34,0)
 Q
"RTN","DGNDSU",35,0)
 ;
"RTN","DGNDSU",36,0)
SCANM(OFILE) ; Get ASSOCIATED VA <concept> field (#99) values from MASTER file MFILE, update pointers in OFILE
"RTN","DGNDSU",37,0)
 N ASSOC,MIEN,MGLO,MERR,MFILE
"RTN","DGNDSU",38,0)
 D FIELD^DID(OFILE,90,"","POINTER","MGLO","MERR")      ; Get global name and related MASTER file of OFILE
"RTN","DGNDSU",39,0)
 S MGLO="^"_$G(MGLO("POINTER"))                        ; MASTER file global
"RTN","DGNDSU",40,0)
 S MFILE=+$P(MGLO,"(",2)                               ; MASTER file number
"RTN","DGNDSU",41,0)
 S ASSOC="" F  S ASSOC=$O(@(MGLO_"""AC"",ASSOC)")) Q:ASSOC=""  D      ; ASSOCIATED VA <concept> multiple (#99)
"RTN","DGNDSU",42,0)
 .S MIEN=0 F  S MIEN=$O(@(MGLO_"""AC"",ASSOC,MIEN)")) Q:'MIEN  D
"RTN","DGNDSU",43,0)
 ..S MIEN(1)=MIEN
"RTN","DGNDSU",44,0)
 ..D UPDPTR(ASSOC,.MIEN,"ADD",OFILE)
"RTN","DGNDSU",45,0)
 Q
"RTN","DGNDSU",46,0)
 ;
"RTN","DGNDSU",47,0)
SCANO(OFILE) ; Get MASTER <concept> field (#90) values from legacy file OFILE, verify MASTER entry has matching ASSOCIATED entry
"RTN","DGNDSU",48,0)
 ;   Unless - if the local file (OFILE) entry has NEVER been filed into ANY ASSOCIATED VA <concept> fields, assume it's a local
"RTN","DGNDSU",49,0)
 ;   (non-standard or orphan) entry in local file OFILE and allow it to be mapped to MASTER. Check Audit trail for OFILE to see
"RTN","DGNDSU",50,0)
 ;   if MASTER file pointer has ever been updated via MFS process for the OFILE entry, if not, quit and allow it to remain.
"RTN","DGNDSU",51,0)
 N OFILIEN,OGLO,OERR,MPTR,MFILE,MGLO,DGAUGLO,DGAUDT
"RTN","DGNDSU",52,0)
 S DGAUGLO="^TMP($J,""DGNDS"")",DGAUDT=$$NOW^XLFDT()
"RTN","DGNDSU",53,0)
 D CHANGED^DIAUTL(OFILE,90,"O",DGAUGLO,"",DGAUDT)
"RTN","DGNDSU",54,0)
 D FILE^DID(OFILE,"","GLOBAL NAME","OGLO","OERR")   ; Get global name for OFILE 
"RTN","DGNDSU",55,0)
 S OGLO=$G(OGLO("GLOBAL NAME"))
"RTN","DGNDSU",56,0)
 D FIELD^DID(OFILE,90,"","POINTER","MGLO","MERR")   ; Get MASTER <concept> file global name and file number
"RTN","DGNDSU",57,0)
 S MGLO="^"_$G(MGLO("POINTER"))
"RTN","DGNDSU",58,0)
 S MFILE=+$P(MGLO,"(",2)
"RTN","DGNDSU",59,0)
 S OFILIEN=0 F  S OFILIEN=$O(@(OGLO_OFILIEN_")")) Q:'OFILIEN  D   ; Loop through pointers to MASTER file field (#90)
"RTN","DGNDSU",60,0)
 .S MPTR=$G(@(OGLO_OFILIEN_","_"""MASTER"")")) Q:'MPTR
"RTN","DGNDSU",61,0)
 .N DGRESULT,ONAME,ODA,MNAME,MFILESUB,DGERROR
"RTN","DGNDSU",62,0)
 .D FIND^DIC(OFILE,,,"A",OFILIEN,,,,,"RESULT")                    ; Find entries in 
"RTN","DGNDSU",63,0)
 .S ONAME=$G(RESULT("DILIST",1,1))
"RTN","DGNDSU",64,0)
 .Q:'$D(^TMP($J,"DGNDS",OFILIEN))     ; Allow local mappings, if local file name associated with OFILIEN was never filed into ASSOCIATED VA <concept> (audited)
"RTN","DGNDSU",65,0)
 .K RESULT
"RTN","DGNDSU",66,0)
 .D FIND^DIC(MFILE,,,"A",MPTR,,,,,"RESULT")
"RTN","DGNDSU",67,0)
 .S MNAME=$G(RESULT("DILIST",1,1))
"RTN","DGNDSU",68,0)
 .S MFILESUB=MFILE_901
"RTN","DGNDSU",69,0)
 .D FIND^DIC(MFILESUB,","_MPTR_",",".01","",ONAME,,,,,"DGRESULT","DGERROR")
"RTN","DGNDSU",70,0)
 .I '$G(DGRESULT("DILIST",2,1)) S ODA(1)=MPTR D UPDPTR(ONAME,.ODA,"DEL",OFILE)
"RTN","DGNDSU",71,0)
 Q
"RTN","DGNDSU",72,0)
 ;
"RTN","DGNDSU",73,0)
UPDPTR(DGVANAM,DGDA,DGACT,DGFILE) ; Update MASTER VA <concept> field (#90) in <concept> file 
"RTN","DGNDSU",74,0)
 ; anytime the ASSOCIATED VA <concept>(S) field (#99) in the MASTER <concept> file (#10.99, 11.99, or 13.99) is updated.
"RTN","DGNDSU",75,0)
 ;   DGFILE   :   The VA File Number (#10, #11, or #13) that points to the MASTER file (#10.99, #11.99, #13.99) 
"RTN","DGNDSU",76,0)
 ;   DGXVAL   :   Value of ASSOCIATED VA <concept>(S) field (#99) in the MASTER <concept> file (#10.99, 11.99, or 13.99).
"RTN","DGNDSU",77,0)
 ;   DGDA(1)  :   Value of DA()
"RTN","DGNDSU",78,0)
 ;                  DGDA  = ASSOCIATED VA <concept>(S) sub-file (#10.99901, 11.99901, or 13.99901) IEN value
"RTN","DGNDSU",79,0)
 ;                DGDA(1) = IEN of the entry in the MASTER <concept> (#10.99, 11.99, or 13.99) file.
"RTN","DGNDSU",80,0)
 ;   DGACT    : Action to perform on MASTER <concept> (#90) multiple in <concept> (#10):
"RTN","DGNDSU",81,0)
 ;                 "ADD"  = Add a pointer to the DGMIEN entry in MASTER <concept> (#10.99, 11.99, or 13.99) file, if it doesn't already exist
"RTN","DGNDSU",82,0)
 ;                 "DEL"  = Delete pointer to the DGMIEN entry in MASTER <concept> (#10.99, 11.99, or 13.99) file, if it exists
"RTN","DGNDSU",83,0)
 N DGMFILE   ; MASTER <concept> file (#10.99, #11.99, or 13.99), retrieved from "MASTER <concept>" field (#90) in <concept> file (#10, 11, or #13)
"RTN","DGNDSU",84,0)
 N DGNDSGLO  ; Data global for MASTER <concept> file (10.99, 11.99, or 13.99)
"RTN","DGNDSU",85,0)
 N DGMSUB    ; MASTER <concept> file's ASSOCATED VA <concepts> field's (#99) SUB-FILE number. (10.99901, 11.99901, or 13.99901)
"RTN","DGNDSU",86,0)
 N DGFDA     ; FDA_ROOT array for FILE^DIE call.
"RTN","DGNDSU",87,0)
 N DGERR     ; Error returned by FILE^DIE call. Not used, provided for maintenance/troubleshooting.
"RTN","DGNDSU",88,0)
 N DGMIEN    ; IEN of the MASTER <concept> (#10.99, 11.99, or 13.99) file entry being modified 
"RTN","DGNDSU",89,0)
 N DGVAIEN   ; The IEN(s) in the <concept> (#10, #11, OR #13) file, whose MASTER <concept> multiple (#90) is being updated by this routine.
"RTN","DGNDSU",90,0)
 N DGVAMPTR  ; The current value of the MASTER <concept> multiple (#90) in the <concept> (#10, #11, OR #13) file, pointing to MASTER <concept> (#10.99, 11.99, or 13.99).
"RTN","DGNDSU",91,0)
 N DGVANAMS  ; <concept> (#10) file NAME (.01) value truncated to 30 characters to check "B" x-ref, which only contains max of 30 chars.
"RTN","DGNDSU",92,0)
 ;
"RTN","DGNDSU",93,0)
 S DGMIEN=$G(DGDA(1))
"RTN","DGNDSU",94,0)
 Q:'DGMIEN!'$L(DGVANAM)!'$L(DGACT)!'$G(DGFILE)
"RTN","DGNDSU",95,0)
 S DGVANAMS=$E(DGVANAM,1,30)
"RTN","DGNDSU",96,0)
 ;
"RTN","DGNDSU",97,0)
 ; Get MASTER <concept> file number and data global. File number must be 10.99 (MASTER RACE), 11.99 (MASTER MARITAL STATUS), or 13.99 (MASTER RELIGION)
"RTN","DGNDSU",98,0)
 ; Get data global reference
"RTN","DGNDSU",99,0)
 D FIELD^DID(DGFILE,90,"","POINTER","DGNDSGLO","DGERR")
"RTN","DGNDSU",100,0)
 S DGNDSGLO="^"_$G(DGNDSGLO("POINTER"))
"RTN","DGNDSU",101,0)
 S DGMFILE=+$P(DGNDSGLO,"(",2)
"RTN","DGNDSU",102,0)
 Q:(",10.99,11.99,13.99,")'[(","_DGMFILE_",")
"RTN","DGNDSU",103,0)
 ; 
"RTN","DGNDSU",104,0)
 ; Get MASTER <concept> file's ASSOCATED VA <concepts> field's (#99) SUB-FILE number. Must be 10.99901, 11.99901, or 13.99901
"RTN","DGNDSU",105,0)
 S DGMSUB=DGMFILE_"901"
"RTN","DGNDSU",106,0)
 Q:(",10.99901,11.99901,13.99901,")'[(","_DGMSUB_",")
"RTN","DGNDSU",107,0)
 ; Search for and delete old MASTER <concept> (#90) field entries from <concept> (#10,#11, or #13) file that are being replaced
"RTN","DGNDSU",108,0)
 S DGVAIEN=0 F  S DGVAIEN=$O(^DIC(DGFILE,"B",DGVANAMS,DGVAIEN)) Q:'DGVAIEN  D
"RTN","DGNDSU",109,0)
 .I DGACT="ADD" D  Q
"RTN","DGNDSU",110,0)
 ..S DGVAMPTR=+$G(^DIC(DGFILE,DGVAIEN,"MASTER"))
"RTN","DGNDSU",111,0)
 ..I $G(^DIC(DGFILE,DGVAIEN,"MASTER",DGVAMPTR,0))=DGMIEN Q   ; Already there, don't file duplicate entry.
"RTN","DGNDSU",112,0)
 ..S DGFDA(DGFILE,DGVAIEN_",",90)=+DGMIEN
"RTN","DGNDSU",113,0)
 ..D FILE^DIE("","DGFDA","DGERR")
"RTN","DGNDSU",114,0)
 .I DGACT="DEL" D  Q     ;   Delete the MASTER <concept> (#90) field pointer from <concept> (#10) file entry DGVAIEN
"RTN","DGNDSU",115,0)
 ..Q:$G(^DIC(DGFILE,DGVAIEN,"MASTER"))'=DGMIEN    ; This should not happen, but, if it does, do no harm. X-ref is different than field value.
"RTN","DGNDSU",116,0)
 ..S DGFDA(DGFILE,DGVAIEN_",",90)="@"
"RTN","DGNDSU",117,0)
 ..D FILE^DIE("","DGFDA","DGERR")
"RTN","DGNDSU",118,0)
 Q
"RTN","DGZRT")
0^12^B36061811^n/a
"RTN","DGZRT",1,0)
DGZRT ;DAL/JCH - DEMOGRAPHICS ENTRY POINTS FOR ZRT SEGMENT MFS UPDATE ;05/18/2017
"RTN","DGZRT",2,0)
 ;;5.3;Registration;**933**;Aug 13, 1993;Build 44
"RTN","DGZRT",3,0)
 ;
"RTN","DGZRT",4,0)
 Q
"RTN","DGZRT",5,0)
ZRT ;Manipulate update of MFN ZRT segment for Demographics files
"RTN","DGZRT",6,0)
 I IEN,((NAME="Term")!(NAME="Status")) K XXIEN ;This is the indication that it's first update for any subfile
"RTN","DGZRT",7,0)
 S:$D(HLNODE(1)) HLNODE=HLNODE_HLNODE(1)
"RTN","DGZRT",8,0)
 G XX99:(IFN=10.99!(IFN=11.99)!(IFN=13.99)) ;!(IFN=50.60699))
"RTN","DGZRT",9,0)
 Q
"RTN","DGZRT",10,0)
 ;
"RTN","DGZRT",11,0)
XX99 ;1399 ;Manipulate update of MFN ZRT segment for RELIGION (#13.99) File
"RTN","DGZRT",12,0)
 N X,XX,ERR,IENS,IEN1,IENX,X1,X2,X4,DA,DIK,I,FDAA,VALUE,IFN9
"RTN","DGZRT",13,0)
 S IFN9=IFN+.00901
"RTN","DGZRT",14,0)
 I IEN,NAME="VistA_Related_Record" D  Q  ;ZRT^VistA_CodingSystem_Mapping^LOINC:90701,90743
"RTN","DGZRT",15,0)
 .S (X,VALUE)=$$UNESC^XUMF0($P(HLNODE,HLFS,3),.HL)
"RTN","DGZRT",16,0)
 .I '$L(X)!(X="""""") D DS(IFN9,IEN) S OUT=1 Q  ;Q:$G(OUT)  ;If there is nothing coming from Push, wipe anything was there before
"RTN","DGZRT",17,0)
 .I '$G(XXIEN(IFN9)) D DS(IFN9,IEN)  S XXIEN(IFN9)=1 ;CLEAN SUBFILE ENTRY
"RTN","DGZRT",18,0)
 .S IENS=IEN_","
"RTN","DGZRT",19,0)
 .S IEN1="+1,",FDAA(IFN9,"+1,"_IENS,.01)=X  ;NOT RIGHT
"RTN","DGZRT",20,0)
 .S VALUE=$$VAL^XUMF0(IFN9,.01,"",VALUE,"?+1,"_IENS)
"RTN","DGZRT",21,0)
 .Q:ERROR  Q:VALUE="^"
"RTN","DGZRT",22,0)
 .D:$D(FDAA) UPDATE^DIE("","FDAA",,"ERR")
"RTN","DGZRT",23,0)
 .I $D(ERR) D  Q
"RTN","DGZRT",24,0)
 ..S ERROR="1^subfile update error SUBFILE#: "_IFN9_"  HLNODE:"_HLNODE
"RTN","DGZRT",25,0)
 ..D EM^XUMF1H(ERROR,.ERR)
"RTN","DGZRT",26,0)
 .Q:$G(ERROR)
"RTN","DGZRT",27,0)
 .S OUT=1
"RTN","DGZRT",28,0)
 Q
"RTN","DGZRT",29,0)
POST ;Post processing logic
"RTN","DGZRT",30,0)
 ; IFN = File #  aka 13.99
"RTN","DGZRT",31,0)
 ; IFNM File associated with IFN aka 13
"RTN","DGZRT",32,0)
 ;Scan all enries from file 13 field 90 and see if some dangling pointers are there, or if entries can be repointed.
"RTN","DGZRT",33,0)
 Q:$G(ERROR)
"RTN","DGZRT",34,0)
 ;^DIC(13,"ACMF",3,136)=""
"RTN","DGZRT",35,0)
 ;^DIC(13,136,0)="SATANISM^^^66"
"RTN","DGZRT",36,0)
 ;^DIC(13,136,"MASTER")=3
"RTN","DGZRT",37,0)
 ;^DGMR(13.99,"AC","SATANISM",3,1)=""
"RTN","DGZRT",38,0)
 ;^DGMR(13.99,3,"ASSOC",1,0)="SATANISM"
"RTN","DGZRT",39,0)
 ;X0=3   N13="SATANISM"   X1=136
"RTN","DGZRT",40,0)
 ;IFNA1 = ^DGMR(IFN,"AC",N13,X0)
"RTN","DGZRT",41,0)
 ;IFNA2 = ^DGMR(IFN,"AC",N13,0)
"RTN","DGZRT",42,0)
 ;IFNA3 = ^DGMR(IFN,Q2,0)
"RTN","DGZRT",43,0)
 ;IFNA4 = ^DGMR(IFN,Q3,0)
"RTN","DGZRT",44,0)
 ;IFNA  = ^DGMR(IFN,"AC",N13)
"RTN","DGZRT",45,0)
 ;IFNB1 = ^DIC(IFNM,X1)
"RTN","DGZRT",46,0)
 ;IFNB2 = ^DIC(IFNM,X1,0)
"RTN","DGZRT",47,0)
 ;IFNB3 = ^DIC(IFNM,"ACMF"
"RTN","DGZRT",48,0)
 ;IFNB =  ^DIC(IFNM,X1,"MASTER")
"RTN","DGZRT",49,0)
 ;Get the pointers from 13 to be repointed to 13.99
"RTN","DGZRT",50,0)
 ;first see if we have some NUUL pointer
"RTN","DGZRT",51,0)
 N X0,X1,X2,C,TEXT,N13,IFNM,IFNA,IFNA1,IFNA2,IFNA3,IFNA4,IFNB,IFNB1,IFNB2,IFNB3,IFNC,MDF,DUPL,Q1,Q2,Q3
"RTN","DGZRT",52,0)
 ;S C=10,IFNM=IFN\1,IFNA=^DIC(IFN,0,"GL"),IFNB=^DIC(IFNM,0,"GL")
"RTN","DGZRT",53,0)
 S C=10,IFNM=IFN\1,IFNA=^DIC(IFN,0,"GL"),IFNB=^DIC(IFNM,0,"GL")
"RTN","DGZRT",54,0)
 ;S:IFNM=50 IFNM=50.606
"RTN","DGZRT",55,0)
 S IFNC=IFNB_"X0,0)" ;^DIC(13,X0,0)
"RTN","DGZRT",56,0)
 ;S IFNA1=IFNA_"""AC"",N13,X0)",IFNA2=IFNA_"IFN,""AC"",N13,0)",IFNA=IFNA_"IFN,""AC"",N13)"
"RTN","DGZRT",57,0)
 S IFNA1=IFNA_"""AC"",N13,X0)",IFNA2=IFNA_"""AC"",N13,0)",IFNA3=IFNA_"Q2,0)",IFNA4=IFNA_"Q3,0)",IFNA=IFNA_"""AC"",N13)"
"RTN","DGZRT",58,0)
 ;S IFNB1=IFNB_"IFNM,X1)",IFNB2=IFNB_"IFNM,X1,0)",IFNB=IFNB_"IFNM,X1,""MASTER"")"
"RTN","DGZRT",59,0)
 S IFNB1=IFNB_"X1)",IFNB2=IFNB_"X1,0)",IFNB3=IFNB_"""ACMF"",IENS)",IFNB=IFNB_"X1,""MASTER"")"
"RTN","DGZRT",60,0)
 ;S MDF=$S(IFNM=50.606:12,1:90)
"RTN","DGZRT",61,0)
 S MDF=90
"RTN","DGZRT",62,0)
 ;Check for duplicates in 11.99,99      ASSOCIATED VA MARITAL STATUSES ASSOC;0 Multiple #11.99901
"RTN","DGZRT",63,0)
 S N13="" F  S N13=$O(@IFNA) Q:'$L(N13)  D  ;IFNA  = ^DGMR(IFN,"AC",N13)
"RTN","DGZRT",64,0)
 .K DUPL M DUPL=@IFNA S Q1="DUPL",Q1=$Q(@Q1),Q2=Q1,Q2=+$P(Q2,"(",2),Q1=$Q(@Q1) Q:'$L(Q1)  ;Quit if only one multiple,.. no duplicates.
"RTN","DGZRT",65,0)
 .F  D  S Q1=$Q(@Q1) Q:'$L(Q1)
"RTN","DGZRT",66,0)
 ..S Q3=+$P(Q1,"(",2),Q3=$P(@(IFNA4),U)
"RTN","DGZRT",67,0)
 ..S TEXT="  File: "_IFN_" Local IEN: "_+$P(Q1,"(",2)_" "_Q3_" Associated "_N13_"  Is Duplicate to Ass. in IEN: "_Q2_"  "_$P(@(IFNA3),U)
"RTN","DGZRT",68,0)
 ..S C=C+1,ERR("DIERR",1,"TEXT",C)=TEXT
"RTN","DGZRT",69,0)
 .Q
"RTN","DGZRT",70,0)
 I $D(ERR) D  Q
"RTN","DGZRT",71,0)
 .S ERR("DIERR",1,"TEXT",10)="List of Association duplicates in "_IFN_"  Site:"_$$SITE^VASITE()
"RTN","DGZRT",72,0)
 .S ERROR="1^Records in file "_IFN_" have Association duplictes.  Listing of duplicates see in MFS ERROR/WARNING/INFO"
"RTN","DGZRT",73,0)
 .D EM^XUMF0
"RTN","DGZRT",74,0)
 .K ERR
"RTN","DGZRT",75,0)
 ;
"RTN","DGZRT",76,0)
 ;S X1=0 F  S X1=$O(^DIC(IFNM,X1)) Q:'X1  S N13=$P($G(^DIC(IFNM,X1,0)),U) Q:'$L(N13)  S X0=+$G(^DIC(IFNM,X1,"MASTER")) Q:$D(^DGMR(IFN,"AC",N13,X0))  D
"RTN","DGZRT",77,0)
 ;S X1=0 F  S X1=$O(^DIC(IFNM,X1)) Q:'X1  S N13=$P($G(^DIC(IFNM,X1,0)),U) Q:'$L(N13)  S X0=+$G(^DIC(IFNM,X1,"MASTER")) Q:$D(@IFNA1)  D
"RTN","DGZRT",78,0)
 ;S X1=0 F  S X1=$O(@IFNB1) Q:'X1  S N13=$P($G(@IFNB2),U) Q:'$L(N13)  S X0=+$G(@IFNB) Q:$D(@IFNA1)  D
"RTN","DGZRT",79,0)
 ;S X1=0 F  S X1=$O(@IFNB1) Q:'X1  Q:$G(ERROR)  S N13=$P($G(@IFNB2),U) I $L(N13) S X0=+$G(@IFNB) D:'$D(@IFNA1)  ;X0=Master pointer to 13.99
"RTN","DGZRT",80,0)
 S X1=0 F  S X1=$O(@IFNB1) Q:'X1  Q:$G(ERROR)  S N13=$P($G(@IFNB2),U) I $L(N13) S X0=+$G(@IFNB) D:'$D(@IFNA1)  ;X0=Master pointer to 13.99
"RTN","DGZRT",81,0)
 .;I $D(^DGMR(IFN,"AC",N13))  D  Q  ;No MASTER pointer into file 13 or MASTER needs to be repointed
"RTN","DGZRT",82,0)
 .I $D(@IFNA) D  Q  ;No MASTER pointer into file 13 or MASTER needs to be repointed
"RTN","DGZRT",83,0)
 ..N FDA,ERR,ZZZ
"RTN","DGZRT",84,0)
 ..;S X0=$O(^DGMR(IFN,"AC",N13,0))
"RTN","DGZRT",85,0)
 ..S X0=$O(@IFNA2)
"RTN","DGZRT",86,0)
 ..D GETS^DIQ(IFN,X0_",","99.991*","I","ZZZ","ERR")
"RTN","DGZRT",87,0)
 ..I $D(ERR) D  Q
"RTN","DGZRT",88,0)
 ...S ERROR="1^Error in Retrievig status of IEN: "_X0_" in file"_IFN
"RTN","DGZRT",89,0)
 ...S ERRCNT=+$G(ERRCNT) D EM^XUMF1H(ERROR,.ERR)
"RTN","DGZRT",90,0)
 ..;ZZZ(11.9901,"1,17,",.01,"I")=3170915.170227
"RTN","DGZRT",91,0)
 ..;ZZZ(11.9901,"1,17,",.02,"I")=1
"RTN","DGZRT",92,0)
 ..;ZZZ(11.9901,"2,17,",.01,"I")=3170915.200528
"RTN","DGZRT",93,0)
 ..;ZZZ(11.9901,"2,17,",.02,"I")=0
"RTN","DGZRT",94,0)
 ..Q:'@($Q(ZZZ(99999999999),-1))   ; Ignore "Invalid or wrong number of arguments to a function" XINDEX warning.
"RTN","DGZRT",95,0)
 ..S FDA(IFNM,X1_",",MDF)=X0
"RTN","DGZRT",96,0)
 ..D FILE^DIE(,"FDA","ERR")
"RTN","DGZRT",97,0)
 ..I $D(ERR) D
"RTN","DGZRT",98,0)
 ...S ERROR="1^Repointing entry: "_X1_" in file"_IFNM_" error."
"RTN","DGZRT",99,0)
 ...S ERRCNT=+$G(ERRCNT) D EM^XUMF1H(ERROR,.ERR)
"RTN","DGZRT",100,0)
 ...K ERR
"RTN","DGZRT",101,0)
 ..Q
"RTN","DGZRT",102,0)
 .Q:$G(ERROR)
"RTN","DGZRT",103,0)
 .; Local entry in master file doesn't exist send e-mail ito XUMF ERROR
"RTN","DGZRT",104,0)
 .;S TEXT="  File: "_13_" Local IEN: "_X1_"  "_N13_"  Is missing in file 13.99 and can NOT be "_$S('X0:"SET",1:"RESET") ;
"RTN","DGZRT",105,0)
 .S:X0 Q2=X0,Q2=$P($G(@IFNA3),U)
"RTN","DGZRT",106,0)
 .S TEXT="  File: "_IFNM_" Local IEN: "_X1_"  "_N13_"  Is missing in file"_IFN_" and can NOT be "_$S('X0:"SET",1:"RESET From: "_Q2) ;
"RTN","DGZRT",107,0)
 .;S C=C+1,ERR("DIERR",1,"TEXT",C)=X0_TEXT
"RTN","DGZRT",108,0)
 .S C=C+1,ERR("DIERR",1,"TEXT",C)=TEXT
"RTN","DGZRT",109,0)
 .;S:X0 C=C+1,ERR("DIERR",1,"TEXT",C)="   Master IEN before: "_X0_"  "_$P($G(^DIC(13.99,X0,0)),U)
"RTN","DGZRT",110,0)
 .S:X0 C=C+1,ERR("DIERR",1,"TEXT",C)="   Master IEN before: "_X0_"  "_$P($G(@IFNC),U)
"RTN","DGZRT",111,0)
 Q:$G(ERROR)
"RTN","DGZRT",112,0)
 I $D(ERR) D  Q
"RTN","DGZRT",113,0)
 .S ERR("DIERR",1,"TEXT",10)="List of records from file "_IFNM_" not synchronised with file "_IFN_"  Site:"_$$SITE^VASITE()
"RTN","DGZRT",114,0)
 .S ERROR="0^Records of file "_IFN_" are not synchronised with File "_IFNM_"  Listing of records see in MFS ERROR/WARNING/INFO"
"RTN","DGZRT",115,0)
 .D EM^XUMF0
"RTN","DGZRT",116,0)
 .K ERR
"RTN","DGZRT",117,0)
 Q
"RTN","DGZRT",118,0)
 ;
"RTN","DGZRT",119,0)
DS(SUBFILE,IENS) ;Delete subfile
"RTN","DGZRT",120,0)
 D DS1(IENS)
"RTN","DGZRT",121,0)
 Q:$G(ERROR)
"RTN","DGZRT",122,0)
 N ROOT,IDX,X
"RTN","DGZRT",123,0)
 ;K @(IFNB3) ;Delete field 90 pointers from 11 to 11.99   K ^DIC(11,"ACMF",IENS)
"RTN","DGZRT",124,0)
 S ROOT=$$ROOT^DILFD(SUBFILE,","_IENS,1)
"RTN","DGZRT",125,0)
 S IDX=0 F  S IDX=$O(@ROOT@(IDX)) Q:'IDX  D
"RTN","DGZRT",126,0)
 .N DA,DIK,DIC S DA(1)=+IENS,DA=IDX,DIK=$P(ROOT,")")_"," D ^DIK
"RTN","DGZRT",127,0)
 Q
"RTN","DGZRT",128,0)
DS1(IEN) ; Delete coresponding fields 90 in file 11
"RTN","DGZRT",129,0)
 N IFNM,FDA,IDX,IFNB,IFNB3
"RTN","DGZRT",130,0)
 S IFNM=IFN\1
"RTN","DGZRT",131,0)
 S IFNB=^DIC(IFNM,0,"GL"),IFNB3=IFNB_"""ACMF"",IEN,IDX)"
"RTN","DGZRT",132,0)
 S IDX=0 F  S IDX=$O(@IFNB3) Q:'IDX  S FDA(IFNM,IDX_",",90)="@"
"RTN","DGZRT",133,0)
 Q:'$D(FDA)
"RTN","DGZRT",134,0)
 D FILE^DIE(,"FDA","ERR")
"RTN","DGZRT",135,0)
 Q:'$D(ERR)
"RTN","DGZRT",136,0)
 S ERROR="1^Error in update of field 90 in file: "_IFNM
"RTN","DGZRT",137,0)
 S ERRCNT=+$G(ERRCNT) D EM^XUMF1H(ERROR,.ERR)
"RTN","DGZRT",138,0)
 ;K ERR
"RTN","DGZRT",139,0)
 Q
"SEC","^DIC",10.99,10.99,0,"AUDIT")
@
"SEC","^DIC",10.99,10.99,0,"DD")
@
"SEC","^DIC",10.99,10.99,0,"DEL")
@
"SEC","^DIC",10.99,10.99,0,"LAYGO")
@
"SEC","^DIC",10.99,10.99,0,"RD")

"SEC","^DIC",10.99,10.99,0,"WR")
@
"SEC","^DIC",11.99,11.99,0,"AUDIT")
@
"SEC","^DIC",11.99,11.99,0,"DD")
@
"SEC","^DIC",11.99,11.99,0,"DEL")
@
"SEC","^DIC",11.99,11.99,0,"LAYGO")
@
"SEC","^DIC",11.99,11.99,0,"RD")

"SEC","^DIC",11.99,11.99,0,"WR")
@
"SEC","^DIC",13.99,13.99,0,"AUDIT")
@
"SEC","^DIC",13.99,13.99,0,"DD")
@
"SEC","^DIC",13.99,13.99,0,"DEL")
@
"SEC","^DIC",13.99,13.99,0,"LAYGO")
@
"SEC","^DIC",13.99,13.99,0,"RD")

"SEC","^DIC",13.99,13.99,0,"WR")
@
"VER")
8.0^22.2
"^DD",10,10,90,0)
RACE MASTER^*P10.99'a^DGRAM(10.99,^MASTER;1^S DIC("S")="I '$$SCREEN^XTID(10.99,.01,+Y_"","")" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",10,10,90,1,0)
^.1
"^DD",10,10,90,1,1,0)
10^ACMF
"^DD",10,10,90,1,1,1)
S ^DIC(10,"ACMF",$E(X,1,30),DA)=""
"^DD",10,10,90,1,1,2)
K ^DIC(10,"ACMF",$E(X,1,30),DA)
"^DD",10,10,90,1,1,"%D",0)
^^2^2^3170807^
"^DD",10,10,90,1,1,"%D",1,0)
This cross references races with the RACE MASTER file (#10.99) entry to 
"^DD",10,10,90,1,1,"%D",2,0)
which they are mapped.
"^DD",10,10,90,1,1,"DT")
3170807
"^DD",10,10,90,3)
Enter the Race Master entry associated with the VA Race.  NOTE: Race Master names are case sensitive.
"^DD",10,10,90,12)
Only active Race Master entries may be selected.
"^DD",10,10,90,12.1)
S DIC("S")="I '$$SCREEN^XTID(10.99,.01,+Y_"","")"
"^DD",10,10,90,21,0)
^.001^2^2^3170821^^
"^DD",10,10,90,21,1,0)
This is the external Standards Development Organization (SDO) Race
"^DD",10,10,90,21,2,0)
associated with this VHA Race.
"^DD",10,10,90,"AUDIT")
y
"^DD",10,10,90,"AX")
I $G(XUMF)
"^DD",10,10,90,"DT")
3170914
"^DD",10.99,10.99,0)
FIELD^^99^7
"^DD",10.99,10.99,0,"DT")
3171010
"^DD",10.99,10.99,0,"IX","AC",10.99901,.01)

"^DD",10.99,10.99,0,"IX","AREPLACETERM",10.99,99.97)

"^DD",10.99,10.99,0,"IX","B",10.99,.01)

"^DD",10.99,10.99,0,"NM","RACE MASTER")

"^DD",10.99,10.99,0,"PT",10,90)

"^DD",10.99,10.99,0,"PT",10.99,99.97)

"^DD",10.99,10.99,0,"VRPK")
DG
"^DD",10.99,10.99,.01,0)
NAME^RFJ60^^0;1^K:$L(X)>60!($L(X)<3)!'(X'?1P.E) X
"^DD",10.99,10.99,.01,1,0)
^.1
"^DD",10.99,10.99,.01,1,1,0)
10.99^B
"^DD",10.99,10.99,.01,1,1,1)
S ^DGRAM(10.99,"B",$E(X,1,60),DA)=""
"^DD",10.99,10.99,.01,1,1,2)
K ^DGRAM(10.99,"B",$E(X,1,60),DA)
"^DD",10.99,10.99,.01,3)
Answer must be 3-60 characters in length.
"^DD",10.99,10.99,.01,7.5)
I $G(DIC(0))["L",'$D(XUMF) K X D EN^DDIOL("Entries must be edited via the Master File Server (MFS).","","!?5,$C(7)")
"^DD",10.99,10.99,.01,9)
^
"^DD",10.99,10.99,.01,21,0)
^.001^1^1^3170808^^^^
"^DD",10.99,10.99,.01,21,1,0)
The descriptive text name of the HL7 race.
"^DD",10.99,10.99,.01,"DEL",1,0)
D:'$D(XUMF) EN^DDIOL("Entries must be inactivated via the Master File Server (MFS).","","!?5,$C(7)")
"^DD",10.99,10.99,.01,"DT")
3170803
"^DD",10.99,10.99,.01,"LAYGO",1,0)
D:'$D(XUMF) EN^DDIOL("Entries must be added via the Master File Server (MFS).","","!?5,$C(7)") I $D(XUMF)
"^DD",10.99,10.99,1,0)
CODE^RFJ30^^0;2^K:$L(X)>30!($L(X)<2) X
"^DD",10.99,10.99,1,3)
Answer must be 2-30 characters in length.
"^DD",10.99,10.99,1,9)
^
"^DD",10.99,10.99,1,21,0)
^^2^2^3170803^
"^DD",10.99,10.99,1,21,1,0)
The RxNorm Concept Unique Identifier (RXCUI) code representing the HL7
"^DD",10.99,10.99,1,21,2,0)
Race concept.
"^DD",10.99,10.99,1,"DT")
3170803
"^DD",10.99,10.99,99,0)
ASSOCIATED VA RACES^10.99901A^^ASSOC;0
"^DD",10.99,10.99,99,9)
^
"^DD",10.99,10.99,99,21,0)
^.001^2^2^3170914^^
"^DD",10.99,10.99,99,21,1,0)
This contains the VA Races associated with this Health Level Seven (HL7) 
"^DD",10.99,10.99,99,21,2,0)
Master file entry.
"^DD",10.99,10.99,99,"DT")
3170803
"^DD",10.99,10.99,99.97,0)
REPLACED BY VHA STANDARD TERM^P10.99'^DGRAM(10.99,^VUID;3^Q
"^DD",10.99,10.99,99.97,1,0)
^.1
"^DD",10.99,10.99,99.97,1,1,0)
10.99^AREPLACETERM
"^DD",10.99,10.99,99.97,1,1,1)
S ^DGRAM(10.99,"AREPLACETERM",$E(X,1,30),DA)=""
"^DD",10.99,10.99,99.97,1,1,2)
K ^DGRAM(10.99,"AREPLACETERM",$E(X,1,30),DA)
"^DD",10.99,10.99,99.97,1,1,"%D",0)
^^2^2^3170804^
"^DD",10.99,10.99,99.97,1,1,"%D",1,0)
This cross reference can be used to identify the replacement entries 
"^DD",10.99,10.99,99.97,1,1,"%D",2,0)
associated with a Term/Concept.
"^DD",10.99,10.99,99.97,1,1,"DT")
3170804
"^DD",10.99,10.99,99.97,3)
Enter the Term/Concept that replaces this entry.
"^DD",10.99,10.99,99.97,9)
^
"^DD",10.99,10.99,99.97,21,0)
^^3^3^3170816^
"^DD",10.99,10.99,99.97,21,1,0)
This field is populated when one Term/Concept replaces another 
"^DD",10.99,10.99,99.97,21,2,0)
Term/Concept. This field is controlled by standardization and should only
"^DD",10.99,10.99,99.97,21,3,0)
be changed by standardization processes. 
"^DD",10.99,10.99,99.97,"DT")
3170816
"^DD",10.99,10.99,99.98,0)
MASTER ENTRY FOR VUID^S^1:YES;0:NO;^VUID;2^Q
"^DD",10.99,10.99,99.98,3)
Enter 1 if this is the master entry.
"^DD",10.99,10.99,99.98,9)
^
"^DD",10.99,10.99,99.98,21,0)
^^2^2^3170804^
"^DD",10.99,10.99,99.98,21,1,0)
This field identifies the Master entry for a VUID associated with a
"^DD",10.99,10.99,99.98,21,2,0)
Term/Concept.
"^DD",10.99,10.99,99.98,"DT")
3170804
"^DD",10.99,10.99,99.99,0)
VUID^RFJ20^^VUID;1^K:$L(X)>20!($L(X)<1) X
"^DD",10.99,10.99,99.99,3)
Answer must be 1-20 characters in length.
"^DD",10.99,10.99,99.99,9)
^
"^DD",10.99,10.99,99.99,21,0)
^^2^2^3170801^
"^DD",10.99,10.99,99.99,21,1,0)
VHA Unique ID (VUID). A unique, arbitrarily-assigned integer assigned to 
"^DD",10.99,10.99,99.99,21,2,0)
reference terms, and used to identify the terms across the VHA enterprise.
"^DD",10.99,10.99,99.99,"DT")
3170804
"^DD",10.99,10.99,99.991,0)
EFFECTIVE DATE/TIME^10.9901DA^^TERMSTATUS;0
"^DD",10.99,10.99,99.991,9)
^
"^DD",10.99,10.99,99.991,21,0)
^^2^2^3170816^
"^DD",10.99,10.99,99.991,21,1,0)
This sub-file contains the current status of the term/concept and the 
"^DD",10.99,10.99,99.991,21,2,0)
date/time the term/concept's status went into effect. 
"^DD",10.99,10.9901,0)
EFFECTIVE DATE/TIME SUB-FIELD^^.02^2
"^DD",10.99,10.9901,0,"DT")
3170801
"^DD",10.99,10.9901,0,"IX","B",10.9901,.01)

"^DD",10.99,10.9901,0,"NM","EFFECTIVE DATE/TIME")

"^DD",10.99,10.9901,0,"UP")
10.99
"^DD",10.99,10.9901,.01,0)
EFFECTIVE DATE/TIME^RD^^0;1^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",10.99,10.9901,.01,1,0)
^.1
"^DD",10.99,10.9901,.01,1,1,0)
10.9901^B
"^DD",10.99,10.9901,.01,1,1,1)
S ^DGRAM(10.99,DA(1),"TERMSTATUS","B",$E(X,1,30),DA)=""
"^DD",10.99,10.9901,.01,1,1,2)
K ^DGRAM(10.99,DA(1),"TERMSTATUS","B",$E(X,1,30),DA)
"^DD",10.99,10.9901,.01,3)
Enter the Date/Time the status became effective.
"^DD",10.99,10.9901,.01,9)
^
"^DD",10.99,10.9901,.01,21,0)
^^2^2^3170816^
"^DD",10.99,10.9901,.01,21,1,0)
This is the date/time when the status of the reference term was 
"^DD",10.99,10.9901,.01,21,2,0)
established.
"^DD",10.99,10.9901,.01,"DT")
3170801
"^DD",10.99,10.9901,.02,0)
STATUS^RS^1:ACTIVE;0:INACTIVE;^0;2^Q
"^DD",10.99,10.9901,.02,3)
Enter the status of this term.
"^DD",10.99,10.9901,.02,9)
^
"^DD",10.99,10.9901,.02,21,0)
^^4^4^3170801^
"^DD",10.99,10.9901,.02,21,1,0)
The Status of a reference term is either 'ACTIVE' or 'INACTIVE'. If 
"^DD",10.99,10.9901,.02,21,2,0)
'ACTIVE', then the term will be accessible by end-users to document a 
"^DD",10.99,10.9901,.02,21,3,0)
particular patient event. If 'INACTIVE', then the term will only be 
"^DD",10.99,10.9901,.02,21,4,0)
accessible by the application to display legacy data.
"^DD",10.99,10.9901,.02,"DT")
3170801
"^DD",10.99,10.99901,0)
ASSOCIATED VA RACES SUB-FIELD^^.01^1
"^DD",10.99,10.99901,0,"DT")
3170915
"^DD",10.99,10.99901,0,"IX","B",10.99901,.01)

"^DD",10.99,10.99901,0,"NM","ASSOCIATED VA RACES")

"^DD",10.99,10.99901,0,"UP")
10.99
"^DD",10.99,10.99901,.01,0)
ASSOCIATED VA RACE(S)^FJ45Xa^^0;1^K:$L(X)>45!($L(X)<4) X
"^DD",10.99,10.99901,.01,1,0)
^.1
"^DD",10.99,10.99901,.01,1,1,0)
10.99901^B
"^DD",10.99,10.99901,.01,1,1,1)
S ^DGRAM(10.99,DA(1),"ASSOC","B",$E(X,1,45),DA)=""
"^DD",10.99,10.99901,.01,1,1,2)
K ^DGRAM(10.99,DA(1),"ASSOC","B",$E(X,1,45),DA)
"^DD",10.99,10.99901,.01,1,2,0)
10.99^AC
"^DD",10.99,10.99901,.01,1,2,1)
S ^DGRAM(10.99,"AC",$E(X,1,45),DA(1),DA)=""
"^DD",10.99,10.99901,.01,1,2,2)
K ^DGRAM(10.99,"AC",$E(X,1,45),DA(1),DA)
"^DD",10.99,10.99901,.01,1,2,"%D",0)
^^2^2^3170807^
"^DD",10.99,10.99901,.01,1,2,"%D",1,0)
This cross reference sorts ASSOCIATED VA RACES (#90) field values by RACE 
"^DD",10.99,10.99901,.01,1,2,"%D",2,0)
MASTER (#10.99) entry.
"^DD",10.99,10.99901,.01,1,2,"DT")
3170807
"^DD",10.99,10.99901,.01,3)
Answer must be 4-45 characters in length.
"^DD",10.99,10.99901,.01,21,0)
^.001^2^2^3170914^^^^
"^DD",10.99,10.99901,.01,21,1,0)
This field contains an entry from the VA RACE file (#10) associated
"^DD",10.99,10.99901,.01,21,2,0)
with this Master entry.
"^DD",10.99,10.99901,.01,"AUDIT")
y
"^DD",10.99,10.99901,.01,"AX")
D QUE^DGNDSU I $G(XUMF)
"^DD",10.99,10.99901,.01,"DT")
3170915
"^DD",11,11,90,0)
MASTER MARITAL STATUS^*P11.99'a^DGMMS(11.99,^MASTER;1^S DIC("S")="I '$$SCREEN^XTID(11.99,.01,+Y_"","")" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",11,11,90,1,0)
^.1
"^DD",11,11,90,1,1,0)
11^ACMF
"^DD",11,11,90,1,1,1)
S ^DIC(11,"ACMF",$E(X,1,30),DA)=""
"^DD",11,11,90,1,1,2)
K ^DIC(11,"ACMF",$E(X,1,30),DA)
"^DD",11,11,90,1,1,"%D",0)
^^2^2^3170807^
"^DD",11,11,90,1,1,"%D",1,0)
This cross references marital statuses with the MASTER MARITAL STATUS 
"^DD",11,11,90,1,1,"%D",2,0)
file (#11.99) entry to which they are mapped.
"^DD",11,11,90,1,1,"DT")
3170807
"^DD",11,11,90,3)
Enter the Master Marital Status associated with the VA Marital Status. NOTE: Master Marital Status is case sensitive.
"^DD",11,11,90,12)
Only active Master Marital Statuses may be selected.
"^DD",11,11,90,12.1)
S DIC("S")="I '$$SCREEN^XTID(11.99,.01,+Y_"","")"
"^DD",11,11,90,21,0)
^.001^2^2^3170914^^^
"^DD",11,11,90,21,1,0)
This is the external Standards Development Organization (SDO) Marital
"^DD",11,11,90,21,2,0)
Status associated with this VHA Marital Status.
"^DD",11,11,90,"AUDIT")
y
"^DD",11,11,90,"AX")
I $G(XUMF)
"^DD",11,11,90,"DT")
3170914
"^DD",11.99,11.99,0)
FIELD^^99^7
"^DD",11.99,11.99,0,"DT")
3171010
"^DD",11.99,11.99,0,"IX","AC",11.99901,.01)

"^DD",11.99,11.99,0,"IX","AREPLACETERM",11.99,99.97)

"^DD",11.99,11.99,0,"IX","B",11.99,.01)

"^DD",11.99,11.99,0,"NM","MASTER MARITAL STATUS")

"^DD",11.99,11.99,0,"PT",11,90)

"^DD",11.99,11.99,0,"PT",11.99,99.97)

"^DD",11.99,11.99,0,"VRPK")
DG
"^DD",11.99,11.99,.01,0)
NAME^RFJ60^^0;1^K:$L(X)>60!($L(X)<3)!'(X'?1P.E) X
"^DD",11.99,11.99,.01,1,0)
^.1
"^DD",11.99,11.99,.01,1,1,0)
11.99^B
"^DD",11.99,11.99,.01,1,1,1)
S ^DGMMS(11.99,"B",$E(X,1,60),DA)=""
"^DD",11.99,11.99,.01,1,1,2)
K ^DGMMS(11.99,"B",$E(X,1,60),DA)
"^DD",11.99,11.99,.01,3)
Answer must be 3-60 characters in length.
"^DD",11.99,11.99,.01,7.5)
I $G(DIC(0))["L",'$D(XUMF) K X D EN^DDIOL("Entries must be edited via the Master File Server (MFS).","","!?5,$C(7)")
"^DD",11.99,11.99,.01,9)
^
"^DD",11.99,11.99,.01,"DEL",1,0)
D:'$D(XUMF) EN^DDIOL("Entries must be inactivated via the Master File Server (MFS).","","!?5,$C(7)")
"^DD",11.99,11.99,.01,"DT")
3170807
"^DD",11.99,11.99,.01,"LAYGO",1,0)
D:'$D(XUMF) EN^DDIOL("Entries must be added via the Master File Server (MFS).","","!?5,$C(7)") I $D(XUMF)
"^DD",11.99,11.99,1,0)
CODE^FJ30^^0;2^K:$L(X)>30!($L(X)<1) X
"^DD",11.99,11.99,1,3)
Answer must be 1-30 characters in length.
"^DD",11.99,11.99,1,9)
^
"^DD",11.99,11.99,1,21,0)
^^1^1^3170802^
"^DD",11.99,11.99,1,21,1,0)
This field contains the code representing the HL7 Standard Marital Status.
"^DD",11.99,11.99,1,"DT")
3170802
"^DD",11.99,11.99,99,0)
ASSOCIATED VA MARITAL STATUSES^11.99901A^^ASSOC;0
"^DD",11.99,11.99,99,9)
^
"^DD",11.99,11.99,99,21,0)
^.001^2^2^3170913^^^
"^DD",11.99,11.99,99,21,1,0)
This contains the VA Marital Status(es) associated with this Health
"^DD",11.99,11.99,99,21,2,0)
Level Seven (HL7) Master File entry.
"^DD",11.99,11.99,99.97,0)
REPLACED BY VHA STANDARD TERM^P11.99'^DGMMS(11.99,^VUID;3^Q
"^DD",11.99,11.99,99.97,1,0)
^.1
"^DD",11.99,11.99,99.97,1,1,0)
11.99^AREPLACETERM
"^DD",11.99,11.99,99.97,1,1,1)
S ^DGMMS(11.99,"AREPLACETERM",$E(X,1,30),DA)=""
"^DD",11.99,11.99,99.97,1,1,2)
K ^DGMMS(11.99,"AREPLACETERM",$E(X,1,30),DA)
"^DD",11.99,11.99,99.97,1,1,"%D",0)
^^2^2^3170804^
"^DD",11.99,11.99,99.97,1,1,"%D",1,0)
This cross reference can be used to identify the replacement entries 
"^DD",11.99,11.99,99.97,1,1,"%D",2,0)
associated with a Term/Concept.
"^DD",11.99,11.99,99.97,1,1,"DT")
3170804
"^DD",11.99,11.99,99.97,3)
Enter the Term/Concept that replaces this entry.
"^DD",11.99,11.99,99.97,9)
^
"^DD",11.99,11.99,99.97,21,0)
^^3^3^3170816^
"^DD",11.99,11.99,99.97,21,1,0)
This field is populated when one Term/Concept replaces another
"^DD",11.99,11.99,99.97,21,2,0)
Term/Concept. This field is controlled by standardization and 
"^DD",11.99,11.99,99.97,21,3,0)
should only be changed by standardization processes. 
"^DD",11.99,11.99,99.97,"DT")
3170804
"^DD",11.99,11.99,99.98,0)
MASTER ENTRY FOR VUID^S^1:YES;0:NO;^VUID;2^Q
"^DD",11.99,11.99,99.98,3)
Enter YES if this is the master entry for the Term/Concept.
"^DD",11.99,11.99,99.98,9)
^
"^DD",11.99,11.99,99.98,21,0)
^.001^2^2^3170815^^
"^DD",11.99,11.99,99.98,21,1,0)
This field identifies the Master Entry for a VUID associated with a  
"^DD",11.99,11.99,99.98,21,2,0)
Term/Concept.  
"^DD",11.99,11.99,99.98,"DT")
3170804
"^DD",11.99,11.99,99.99,0)
VUID^RFJ20^^VUID;1^K:$L(X)>20!($L(X)<1) X
"^DD",11.99,11.99,99.99,3)
Answer must be 1-20 characters in length.
"^DD",11.99,11.99,99.99,9)
^
"^DD",11.99,11.99,99.99,21,0)
^^2^2^3170802^
"^DD",11.99,11.99,99.99,21,1,0)
VHA Unique ID (VUID). A unique, arbitrarily-assigned integer assigned to 
"^DD",11.99,11.99,99.99,21,2,0)
reference terms, and used to identify the terms across the VHA enterprise.
"^DD",11.99,11.99,99.99,"DT")
3170804
"^DD",11.99,11.99,99.991,0)
EFFECTIVE DATE/TIME^11.9901DA^^TERMSTATUS;0
"^DD",11.99,11.99,99.991,9)
^
"^DD",11.99,11.99,99.991,21,0)
^^2^2^3170816^
"^DD",11.99,11.99,99.991,21,1,0)
This sub-file contains the current status of the term/concept and the 
"^DD",11.99,11.99,99.991,21,2,0)
date/time the term/concept's status went into effect. 
"^DD",11.99,11.9901,0)
EFFECTIVE DATE/TIME SUB-FIELD^^.02^2
"^DD",11.99,11.9901,0,"DT")
3170802
"^DD",11.99,11.9901,0,"IX","B",11.9901,.01)

"^DD",11.99,11.9901,0,"NM","EFFECTIVE DATE/TIME")

"^DD",11.99,11.9901,0,"UP")
11.99
"^DD",11.99,11.9901,.01,0)
EFFECTIVE DATE/TIME^RD^^0;1^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",11.99,11.9901,.01,1,0)
^.1
"^DD",11.99,11.9901,.01,1,1,0)
11.9901^B
"^DD",11.99,11.9901,.01,1,1,1)
S ^DGMMS(11.99,DA(1),"TERMSTATUS","B",$E(X,1,30),DA)=""
"^DD",11.99,11.9901,.01,1,1,2)
K ^DGMMS(11.99,DA(1),"TERMSTATUS","B",$E(X,1,30),DA)
"^DD",11.99,11.9901,.01,3)
Enter the Date/Time the Term status went into effect.
"^DD",11.99,11.9901,.01,9)
^
"^DD",11.99,11.9901,.01,21,0)
^^2^2^3170802^
"^DD",11.99,11.9901,.01,21,1,0)
This is the date/time when the status of the reference term was
"^DD",11.99,11.9901,.01,21,2,0)
established.
"^DD",11.99,11.9901,.01,"DT")
3170802
"^DD",11.99,11.9901,.02,0)
STATUS^RS^0:INACTIVE;1:ACTIVE;^0;2^Q
"^DD",11.99,11.9901,.02,3)
Enter the status of this term.
"^DD",11.99,11.9901,.02,9)
^
"^DD",11.99,11.9901,.02,21,0)
^^4^4^3170802^
"^DD",11.99,11.9901,.02,21,1,0)
The Status of a reference term is either 'ACTIVE' or 'INACTIVE'. If 
"^DD",11.99,11.9901,.02,21,2,0)
'ACTIVE', then the term will be accessible by end-users to document
"^DD",11.99,11.9901,.02,21,3,0)
a particular patient event. If 'INACTIVE', then the term will only be
"^DD",11.99,11.9901,.02,21,4,0)
accessible by the application to display legacy data.
"^DD",11.99,11.9901,.02,"DT")
3170802
"^DD",11.99,11.99901,0)
ASSOCIATED VA MARITAL STATUSES SUB-FIELD^^.01^1
"^DD",11.99,11.99901,0,"DT")
3170915
"^DD",11.99,11.99901,0,"IX","B",11.99901,.01)

"^DD",11.99,11.99901,0,"NM","ASSOCIATED VA MARITAL STATUSES")

"^DD",11.99,11.99901,0,"UP")
11.99
"^DD",11.99,11.99901,.01,0)
ASSOCIATED VA MARITAL STATUSES^FJ15Xa^^0;1^K:$L(X)>15!($L(X)<2) X
"^DD",11.99,11.99901,.01,1,0)
^.1
"^DD",11.99,11.99901,.01,1,1,0)
11.99901^B
"^DD",11.99,11.99901,.01,1,1,1)
S ^DGMMS(11.99,DA(1),"ASSOC","B",$E(X,1,15),DA)=""
"^DD",11.99,11.99901,.01,1,1,2)
K ^DGMMS(11.99,DA(1),"ASSOC","B",$E(X,1,15),DA)
"^DD",11.99,11.99901,.01,1,2,0)
11.99^AC
"^DD",11.99,11.99901,.01,1,2,1)
S ^DGMMS(11.99,"AC",$E(X,1,15),DA(1),DA)=""
"^DD",11.99,11.99901,.01,1,2,2)
K ^DGMMS(11.99,"AC",$E(X,1,15),DA(1),DA)
"^DD",11.99,11.99901,.01,1,2,"%D",0)
^^2^2^3170807^
"^DD",11.99,11.99901,.01,1,2,"%D",1,0)
This cross reference sorts ASSOCIATED VA MARITAL STATUSES (#90) field 
"^DD",11.99,11.99901,.01,1,2,"%D",2,0)
values by MASTER MARITAL STATUSES (#11.99) file entry.
"^DD",11.99,11.99901,.01,1,2,"DT")
3170807
"^DD",11.99,11.99901,.01,3)
Answer must be 2-15 characters in length.
"^DD",11.99,11.99901,.01,21,0)
^.001^2^2^3170914^^^^
"^DD",11.99,11.99901,.01,21,1,0)
This field contains the name of a VA MARITAL STATUS file (#11) entry 
"^DD",11.99,11.99901,.01,21,2,0)
associated with this Health Level Seven (HL7) Term/Concept.
"^DD",11.99,11.99901,.01,"AUDIT")
y
"^DD",11.99,11.99901,.01,"AX")
I $G(XUMF)
"^DD",11.99,11.99901,.01,"DT")
3170915
"^DD",13,13,90,0)
MASTER RELIGION^*P13.99'a^DGMR(13.99,^MASTER;1^S DIC("S")="I '$$SCREEN^XTID(13.99,.01,+Y_"","")" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",13,13,90,1,0)
^.1
"^DD",13,13,90,1,1,0)
13^ACMF
"^DD",13,13,90,1,1,1)
S ^DIC(13,"ACMF",$E(X,1,30),DA)=""
"^DD",13,13,90,1,1,2)
K ^DIC(13,"ACMF",$E(X,1,30),DA)
"^DD",13,13,90,1,1,"%D",0)
^^2^2^3170807^
"^DD",13,13,90,1,1,"%D",1,0)
This cross references religions with the MASTER RELIGION file (#13.99) 
"^DD",13,13,90,1,1,"%D",2,0)
entry to which they are mapped.
"^DD",13,13,90,1,1,"DT")
3170807
"^DD",13,13,90,3)
Enter the Master Religion associated with the VA Religion. NOTE: Master Religion is case sensitive.
"^DD",13,13,90,12)
Only active Master Religion entries may be selected.
"^DD",13,13,90,12.1)
S DIC("S")="I '$$SCREEN^XTID(13.99,.01,+Y_"","")"
"^DD",13,13,90,21,0)
^.001^2^2^3170914^^^
"^DD",13,13,90,21,1,0)
This is the external Standards Development Organization (SDO) Religion
"^DD",13,13,90,21,2,0)
associated with this VHA Religion.
"^DD",13,13,90,"AUDIT")
y
"^DD",13,13,90,"AX")
I $G(XUMF)
"^DD",13,13,90,"DT")
3170914
"^DD",13.99,13.99,0)
FIELD^^1^7
"^DD",13.99,13.99,0,"DT")
3171010
"^DD",13.99,13.99,0,"IX","AC",13.99901,.01)

"^DD",13.99,13.99,0,"IX","AREPLACETERM",13.99,99.97)

"^DD",13.99,13.99,0,"IX","B",13.99,.01)

"^DD",13.99,13.99,0,"NM","MASTER RELIGION")

"^DD",13.99,13.99,0,"PT",13,90)

"^DD",13.99,13.99,0,"PT",13.99,99.97)

"^DD",13.99,13.99,0,"VRPK")
DG
"^DD",13.99,13.99,.01,0)
NAME^RFJ60^^0;1^K:$L(X)>60!($L(X)<3)!'(X'?1P.E) X
"^DD",13.99,13.99,.01,1,0)
^.1
"^DD",13.99,13.99,.01,1,1,0)
13.99^B
"^DD",13.99,13.99,.01,1,1,1)
S ^DGMR(13.99,"B",$E(X,1,60),DA)=""
"^DD",13.99,13.99,.01,1,1,2)
K ^DGMR(13.99,"B",$E(X,1,60),DA)
"^DD",13.99,13.99,.01,3)
Answer must be 3-60 characters in length.
"^DD",13.99,13.99,.01,7.5)
I $G(DIC(0))["L",'$D(XUMF) K X D EN^DDIOL("Entries must be edited via the Master File Server (MFS).","","!?5,$C(7)")
"^DD",13.99,13.99,.01,9)
^
"^DD",13.99,13.99,.01,21,0)
^.001^1^1^3170807^^^
"^DD",13.99,13.99,.01,21,1,0)
The name of the standard Health Level Seven (HL7) religion Term/Concept.
"^DD",13.99,13.99,.01,"DEL",1,0)
D:'$D(XUMF) EN^DDIOL("Entries must be inactivated via the Master File Server (MFS).","","!?5,$C(7)")
"^DD",13.99,13.99,.01,"DT")
3170807
"^DD",13.99,13.99,.01,"LAYGO",1,0)
D:'$D(XUMF) EN^DDIOL("Entries must be added via the Master File Server (MFS).","","!?5,$C(7)") I $D(XUMF)
"^DD",13.99,13.99,1,0)
CODE^RFJ30^^0;2^K:$L(X)>30!($L(X)<1) X
"^DD",13.99,13.99,1,3)
Answer must be 1-30 characters in length.
"^DD",13.99,13.99,1,9)
^
"^DD",13.99,13.99,1,21,0)
^^2^2^3170802^
"^DD",13.99,13.99,1,21,1,0)
This field contains the code representing the Health Level Seven (HL7) 
"^DD",13.99,13.99,1,21,2,0)
Term/Concept.
"^DD",13.99,13.99,1,"DT")
3170802
"^DD",13.99,13.99,99,0)
ASSOCIATED VA RELIGIONS^13.99901A^^ASSOC;0
"^DD",13.99,13.99,99,9)
^
"^DD",13.99,13.99,99,21,0)
^.001^4^4^3170914^^
"^DD",13.99,13.99,99,21,1,0)
This field contains the VA Religion(s) associated with this Health 
"^DD",13.99,13.99,99,21,2,0)
Level Seven (HL7) Master File entry.
"^DD",13.99,13.99,99,21,3,0)
 
"^DD",13.99,13.99,99,21,4,0)
entry.
"^DD",13.99,13.99,99,"DT")
3170804
"^DD",13.99,13.99,99.97,0)
REPLACED BY VHA STANDARD TERM^P13.99'^DGMR(13.99,^VUID;3^Q
"^DD",13.99,13.99,99.97,1,0)
^.1
"^DD",13.99,13.99,99.97,1,1,0)
13.99^AREPLACETERM
"^DD",13.99,13.99,99.97,1,1,1)
S ^DGMR(13.99,"AREPLACETERM",$E(X,1,30),DA)=""
"^DD",13.99,13.99,99.97,1,1,2)
K ^DGMR(13.99,"AREPLACETERM",$E(X,1,30),DA)
"^DD",13.99,13.99,99.97,1,1,"%D",0)
^^2^2^3170804^
"^DD",13.99,13.99,99.97,1,1,"%D",1,0)
This cross reference can be used to identify the replacement entries 
"^DD",13.99,13.99,99.97,1,1,"%D",2,0)
associated with a Term/Concept.
"^DD",13.99,13.99,99.97,1,1,"DT")
3170804
"^DD",13.99,13.99,99.97,3)
Enter the Term/Concept that replaces this entry.
"^DD",13.99,13.99,99.97,9)
^
"^DD",13.99,13.99,99.97,21,0)
^^3^3^3170816^
"^DD",13.99,13.99,99.97,21,1,0)
This is populated when one Term/Concept replaces another Term/Concept. 
"^DD",13.99,13.99,99.97,21,2,0)
This field is controlled by standardization and should only be changed by
"^DD",13.99,13.99,99.97,21,3,0)
standardization processes. 
"^DD",13.99,13.99,99.97,"DT")
3170804
"^DD",13.99,13.99,99.98,0)
MASTER ENTRY FOR VUID^RS^1:YES;0:NO;^VUID;2^Q
"^DD",13.99,13.99,99.98,3)
Enter YES if this is the Master entry.
"^DD",13.99,13.99,99.98,9)
^
"^DD",13.99,13.99,99.98,21,0)
^^2^2^3170802^
"^DD",13.99,13.99,99.98,21,1,0)
This field identifies the Master Entry for a VUID associated with a 
"^DD",13.99,13.99,99.98,21,2,0)
Term/Concept.
"^DD",13.99,13.99,99.98,"DT")
3170804
"^DD",13.99,13.99,99.99,0)
VUID^RFJ20^^VUID;1^K:$L(X)>20!($L(X)<1) X
"^DD",13.99,13.99,99.99,3)
Answer must be 1-20 characters in length.
"^DD",13.99,13.99,99.99,9)
^
"^DD",13.99,13.99,99.99,21,0)
^^2^2^3170802^
"^DD",13.99,13.99,99.99,21,1,0)
VHA Unique ID (VUID). A unique, arbitrarily-assigned integer assigned to 
"^DD",13.99,13.99,99.99,21,2,0)
reference terms, and used to identify the terms across the VHA enterprise.
"^DD",13.99,13.99,99.99,"DT")
3170804
"^DD",13.99,13.99,99.991,0)
EFFECTIVE DATE/TIME^13.9901DA^^TERMSTATUS;0
"^DD",13.99,13.99,99.991,9)
^
"^DD",13.99,13.99,99.991,21,0)
^^2^2^3170805^
"^DD",13.99,13.99,99.991,21,1,0)
This sub-file contains the current status of the term/concept and the 
"^DD",13.99,13.99,99.991,21,2,0)
date/time the term/concept's status went into effect.
"^DD",13.99,13.9901,0)
EFFECTIVE DATE/TIME SUB-FIELD^^.02^2
"^DD",13.99,13.9901,0,"DT")
3170802
"^DD",13.99,13.9901,0,"IX","B",13.9901,.01)

"^DD",13.99,13.9901,0,"NM","EFFECTIVE DATE/TIME")

"^DD",13.99,13.9901,0,"UP")
13.99
"^DD",13.99,13.9901,.01,0)
EFFECTIVE DATE/TIME^RD^^0;1^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",13.99,13.9901,.01,1,0)
^.1
"^DD",13.99,13.9901,.01,1,1,0)
13.9901^B
"^DD",13.99,13.9901,.01,1,1,1)
S ^DGMR(13.99,DA(1),"TERMSTATUS","B",$E(X,1,30),DA)=""
"^DD",13.99,13.9901,.01,1,1,2)
K ^DGMR(13.99,DA(1),"TERMSTATUS","B",$E(X,1,30),DA)
"^DD",13.99,13.9901,.01,3)
Enter the Date/Time the status became effective.
"^DD",13.99,13.9901,.01,9)
^
"^DD",13.99,13.9901,.01,21,0)
^.001^2^2^3170805^^
"^DD",13.99,13.9901,.01,21,1,0)
This is the date/time when the status of the reference term was 
"^DD",13.99,13.9901,.01,21,2,0)
established.
"^DD",13.99,13.9901,.01,"DT")
3170802
"^DD",13.99,13.9901,.02,0)
STATUS^RS^0:INACTIVE;1:ACTIVE;^0;2^Q
"^DD",13.99,13.9901,.02,3)
Enter the Status of this term.
"^DD",13.99,13.9901,.02,9)
^
"^DD",13.99,13.9901,.02,21,0)
^^4^4^3170802^
"^DD",13.99,13.9901,.02,21,1,0)
The Status of a reference term is either 'ACTIVE' or 'INACTIVE'. If 
"^DD",13.99,13.9901,.02,21,2,0)
'ACTIVE', then the term will be accessible by end-users to document
"^DD",13.99,13.9901,.02,21,3,0)
a particular patient event. If 'INACTIVE', then the term will only be
"^DD",13.99,13.9901,.02,21,4,0)
accessible by the application to display legacy data.
"^DD",13.99,13.9901,.02,"DT")
3170802
"^DD",13.99,13.99901,0)
ASSOCIATED VA RELIGIONS SUB-FIELD^^.01^1
"^DD",13.99,13.99901,0,"DT")
3170915
"^DD",13.99,13.99901,0,"IX","B",13.99901,.01)

"^DD",13.99,13.99901,0,"NM","ASSOCIATED VA RELIGIONS")

"^DD",13.99,13.99901,0,"UP")
13.99
"^DD",13.99,13.99901,.01,0)
ASSOCIATED VA RELIGIONS^FJ30Xa^^0;1^K:$L(X)>30!($L(X)<1) X
"^DD",13.99,13.99901,.01,1,0)
^.1
"^DD",13.99,13.99901,.01,1,1,0)
13.99901^B
"^DD",13.99,13.99901,.01,1,1,1)
S ^DGMR(13.99,DA(1),"ASSOC","B",$E(X,1,30),DA)=""
"^DD",13.99,13.99901,.01,1,1,2)
K ^DGMR(13.99,DA(1),"ASSOC","B",$E(X,1,30),DA)
"^DD",13.99,13.99901,.01,1,2,0)
13.99^AC
"^DD",13.99,13.99901,.01,1,2,1)
S ^DGMR(13.99,"AC",$E(X,1,30),DA(1),DA)=""
"^DD",13.99,13.99901,.01,1,2,2)
K ^DGMR(13.99,"AC",$E(X,1,30),DA(1),DA)
"^DD",13.99,13.99901,.01,1,2,"%D",0)
^^2^2^3170807^
"^DD",13.99,13.99901,.01,1,2,"%D",1,0)
This cross reference sorts ASSOCIATED VA RELIGIONS (#90) field values by 
"^DD",13.99,13.99901,.01,1,2,"%D",2,0)
MASTER RELIGION (#13.99) file entry.
"^DD",13.99,13.99901,.01,1,2,"DT")
3170807
"^DD",13.99,13.99901,.01,3)
Answer must be 1-30 characters in length.
"^DD",13.99,13.99901,.01,21,0)
^.001^2^2^3170914^^^^
"^DD",13.99,13.99901,.01,21,1,0)
This field contains the names of VA RELIGION file (#13) entries
"^DD",13.99,13.99901,.01,21,2,0)
associated with the Health Level Seven (HL7) Religion Term/Concept.
"^DD",13.99,13.99901,.01,"AUDIT")
y
"^DD",13.99,13.99901,.01,"AX")
D QUE^DGNDSU I $G(XUMF)
"^DD",13.99,13.99901,.01,"DT")
3170915
"^DIC",10.99,10.99,0)
RACE MASTER^10.99
"^DIC",10.99,10.99,0,"GL")
^DGRAM(10.99,
"^DIC",10.99,10.99,"%",0)
^1.005^^0
"^DIC",10.99,10.99,"%D",0)
^1.001^11^11^3170807^^^
"^DIC",10.99,10.99,"%D",1,0)
The Race Master file contains standard Health Level Seven (HL7) race
"^DIC",10.99,10.99,"%D",2,0)
codes.
"^DIC",10.99,10.99,"%D",3,0)
 
"^DIC",10.99,10.99,"%D",4,0)
Per VHA Directive 2005-044, this file has been "locked down" by Data 
"^DIC",10.99,10.99,"%D",5,0)
Standardization (DS).  The file definition (i.e. data dictionary) shall 
"^DIC",10.99,10.99,"%D",6,0)
not be modified.  All additions, changes and deletions to entries in the
"^DIC",10.99,10.99,"%D",7,0)
file shall be done by Enterprise Reference Terminology (ERT) using the
"^DIC",10.99,10.99,"%D",8,0)
Master File Server (MFS), provided by Common Services (CS).  Creating
"^DIC",10.99,10.99,"%D",9,0)
and/or editing locally defined fields in the file are not permitted.  Use
"^DIC",10.99,10.99,"%D",10,0)
of locally defined fields that were created prior to the VHA Directive's
"^DIC",10.99,10.99,"%D",11,0)
2005-044 effective date shall not be supported.
"^DIC",10.99,"B","RACE MASTER",10.99)

"^DIC",11.99,11.99,0)
MASTER MARITAL STATUS^11.99
"^DIC",11.99,11.99,0,"GL")
^DGMMS(11.99,
"^DIC",11.99,11.99,"%",0)
^1.005^^0
"^DIC",11.99,11.99,"%D",0)
^^11^11^3170807^
"^DIC",11.99,11.99,"%D",1,0)
The MASTER MARITAL STATUS file (#11.99) contains the standard set of 
"^DIC",11.99,11.99,"%D",2,0)
marital statuses from the HL7 Standards Development Organization (SDO).
"^DIC",11.99,11.99,"%D",3,0)
 
"^DIC",11.99,11.99,"%D",4,0)
Per VHA Directive 2005-044, this file has been "locked down" by Data 
"^DIC",11.99,11.99,"%D",5,0)
Standardization (DS).  The file definition (i.e. data dictionary) shall
"^DIC",11.99,11.99,"%D",6,0)
not be modified. All additions, changes and deletions to entries in the
"^DIC",11.99,11.99,"%D",7,0)
file shall be done by Enterprise Reference Terminology (ERT) using the
"^DIC",11.99,11.99,"%D",8,0)
Master File Server (MFS), provided by Common Services (CS).
"^DIC",11.99,11.99,"%D",9,0)
Creating and/or editing locally defined fields in the file are not 
"^DIC",11.99,11.99,"%D",10,0)
permitted.  Use of locally defined fields that were created prior to the
"^DIC",11.99,11.99,"%D",11,0)
VHA Directive's 2005-044 effective date shall not be supported.
"^DIC",11.99,"B","MASTER MARITAL STATUS",11.99)

"^DIC",13.99,13.99,0)
MASTER RELIGION^13.99
"^DIC",13.99,13.99,0,"GL")
^DGMR(13.99,
"^DIC",13.99,13.99,"%",0)
^1.005^^0
"^DIC",13.99,13.99,"%D",0)
^^11^11^3170807^
"^DIC",13.99,13.99,"%D",1,0)
This MASTER RELIGION file contains the Health Level Seven (HL7) standard 
"^DIC",13.99,13.99,"%D",2,0)
set of religions.
"^DIC",13.99,13.99,"%D",3,0)
 
"^DIC",13.99,13.99,"%D",4,0)
Per VHA Directive 2005-044, this file has been "locked down" by Data 
"^DIC",13.99,13.99,"%D",5,0)
Standardization (DS).  The file definition (i.e. data dictionary) shall
"^DIC",13.99,13.99,"%D",6,0)
not be modified. All additions, changes and deletions to entries in the
"^DIC",13.99,13.99,"%D",7,0)
file shall be done by Enterprise Reference Terminology (ERT) using the
"^DIC",13.99,13.99,"%D",8,0)
Master File Server (MFS), provided by Common Services (CS).
"^DIC",13.99,13.99,"%D",9,0)
Creating and/or editing locally defined fields in the file are not 
"^DIC",13.99,13.99,"%D",10,0)
permitted.  Use of locally defined fields that were created prior to the
"^DIC",13.99,13.99,"%D",11,0)
VHA Directive's 2005-044 effective date shall not be supported.
"^DIC",13.99,"B","MASTER RELIGION",13.99)

"BLD",10052,6)
^835
**END**
**END**

