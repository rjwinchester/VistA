$TXT Created by                  DEVCRN.DOMAIN.EXT  (KIDS) on Thursday, 11/17/16 at 15:18
=============================================================================
Run Date: DEC 14, 2016                     Designation: DG*5.3*926
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #815                    Status: Released
                  Compliance Date: DEC 28, 2016
=============================================================================

Associated patches: (v)DG*5.3*901  <<= must be installed BEFORE `DG*5.3*926'
                    (v)DG*5.3*902  <<= must be installed BEFORE `DG*5.3*926'
                    (v)DG*5.3*915  <<= must be installed BEFORE `DG*5.3*926'
                    (v)DG*5.3*919  <<= must be installed BEFORE `DG*5.3*926'

Subject: MASTER VETERAN INDEX VISTA ENHANCEMENTS - ITERATION 16 RELEASE 2

Category: 
  - Routine
  - Data Dictionary
  - Enhancement (Mandatory)
  - Other

Description:
============

 *************************************************************************
 * This patch may be installed with users on the system, however because *
 * the patient lookup routines are being exported with this patch, we    *
 * strongly advise that it be installed after business hours.            *
 *************************************************************************
  
 DG*5.3*901, DG*5.3*902, DG*5.3*915 and DG*5.3*919 are the required builds
 for patch DG*5.3*926.
  
 NOTE: Master Patient Index (MPI) enhancements are being distributed in
       four VistA namespaces: DG, MPIF, RG and FB.
       The only build enforced requirements are that:
         - FB*3.5*173 and DG*5.3*926 be installed prior to MPIF*1.0*64 
         - DG*5.3*926 be installed prior to RG*1.0*65
       Therefore non-legacy sites can install FB*3.5*173 and DG*5.3*926
       in any order, then install MPIF*1.0*64 and RG*1.0*65 patches in any
       order (Do NOT install MPIF*1.0*64 or RG*1.0*65 on legacy sites). 
  
 NOTE: Legacy sites can install just the DG*5.3*926 and FB*3.5*173 patches.
       MPIF*1.0*64 and RG*1.0*65 should NOT be installed on legacy sites.
  
 Enhancements
 The following enhancements exported in this patch will allow the Master
 Veteran Index (MVI) to support the Date of Death of patients at the
 medical facilities. 
  
 Enhancement #1
 The following Data Dictionary changes have been made to support the
 patient's Date of Death process.
  
   - Added a new SUPPORTING DOCUMENTATION TYPES (#47.75) file, that will
     identify the available documents detailing how a patient's death
     was recorded.
     NOTE: File will be exported with data.
   - Added a new SOURCE OF NOTIFICATIONS (#47.76) file, that will 
     identify the sources for who first notified the Veteran Affairs (VA)
     of a patient's death.
     NOTE: File will be exported with data.
   - Modified the SOURCE OF NOTIFICATION (#.353) field in the PATIENT
     (#2) file from a SET OF CODES to POINTER to the SOURCE OF 
     NOTIFICATIONS (#47.76) file.
     NOTE: This modification was done as the additional notifications
           being added in this patch exceeded the size limit of the
           SET OF CODES.
     NOTE: The old code and the new internal entry number (IEN) in
           the new file are the same, so no additional data modifications
           to existing patient records in the PATIENT (#2) file is
           required.
   - Added the new field SUPPORTING DOCUMENT TYPE (#.357) to the 
     PATIENT (#2) file which points to the SUPPORTING DOCUMENTATION
     TYPES (#47.75) file. Auditing has been enabled.
   - Added a FIELD INDEX type cross-reference (X-REF) on the following
     field:
     
        Field Number     Field Name                    X-Ref
        -------------------------------------------------------
        .357             SUPPORTING DOCUMENT TYPE      AVAFC357
   
        This new cross-references makes use of the DG FIELD MONITOR 
        tool that was released in patch DG*5.3*527. This tool utilizes
        the VAFC MPIPD FIELD TRIGGER protocol, which creates an entry
        in the ADT/HL7 PIVOT (#391.71) file, as well as sets the VAFCF
        variable to capture the fields that have been modified during
        an edit. This field will be included in the Health Level Seven
        (HL7) 2.4 messages generated by the MPI/PD applications. Routine
        VAFCTR supports this effort.   
   
   - Added the new field DATE OF DEATH OPTION USED (#.358) to the
     PATIENT (#2) file which is a SET OF CODES identifying the option
     used when modifying a patient's Date of Death at the Medical
     Facility. Auditing has been enabled.
   - Added the new field PROCESS MVI DOD UPDATE? (#1401) to the MAS
     PARAMETERS (#43) file, which will determine whether the site 
     should process Date of Death messages from the MVI.
  
 Enhancement #2
 Routine DGDEATH was updated to prompt the user for the SUPPORTING 
 DOCUMENT TYPE (field #.357 in the PATIENT (#2) file) and the DATE OF
 DEATH OPTION USED (field #.358 in the PATIENT (#2) file) when the date
 of death is entered. The previous field values will also be deleted from
 the PATIENT (#2) file when the date of death is deleted. 
   Note: The restriction of deleting the Date of Death when the death
         entry is NOT from the local site has now been removed, thus
         allowing the Date of Death to now be deleted regardless of where
         the death data entry occurred.
 In addition, SOURCE OF NOTIFICATION (field #353 in the PATIENT (#2) file)
 has been restricted to only allow selection of VAMC INPATIENT DEATH or
 SPOUSE/NEXT OF KIN/OTHER PERSON for deceased patients. Finally, if the
 death is related to a patient movement, then this information will
 automatically be populated.
  
 Enhancement #3
 A new remote procedure (RPC) [VAFC DOD ACCEPT SET/DISPLAY] was created to
 allow the MVI to toggle the PROCESS MVI DOD UPDATE? (#1401) field in the
 MAS PARAMETERS (#43) file on and off, which will determine if the site
 should process Date of Death messages from the MVI. Routine VAFCDODA was
 created to support the functionality in this RPC. In addition, an 
 Application Program Interface (API) entry point (CHK^VAFCDODA) was 
 created in this routine to allow a quick check of the current setting of
 this field during execution of updates.
 NOTE: This RPC is a fail-safe in case issues arise processing Date of 
       Death messages at the site. It will allow MVI to immediately turn
       Date of Death processing off until the issue(s) have been resolved,
       instead of requiring the site back out the patches. 
  
 Enhancement #4
 Routine VAFCPDAT was updated to include all of the Date of Death data
 if they are populated when the PATIENT MPI/PD DATA INQUIRY menu option
 is executed. Date of Death fields in the PATIENT (#2) file to display
 include:
      - DATE OF DEATH (#.351)
      - DEATH ENTERED BY (#.352)
      - SOURCE OF NOTIFICATION (#.353)
      - DATE OF DEATH LAST UPDATED (#.354)
      - LAST EDITED BY (#.355)
      - SUPPORTING DOCUMENT TYPE (#.357)
      - DATE OF DEATH OPTION USED (#.358)
  
 Enhancement #5
 Routines VAFCQRY and VAFCSB were updated to parse and build the OBX
 Health Level Seven (HL7) message segments for Date of Death data in the
 A08, A31 and A19 HL7 messages. 
  
 Issue #1
 Routine DPTLK7 was updated to move the pseudo Social Security Number (SSN)
 reason prompt directly under the SSN prompt, so that if a user enters a
 pseudo SSN they are immediately prompted for a reason, which will now be
 a required response. This will eliminate the non-required pseudo reason 
 prompt that was displayed later on in the process.
  
 Issue #2
 Finally, routine DGREG was updated to restore the Insurance Data retrieval
 call in the REGISTER A PATIENT [DG REGISTER PATIENT] menu option, which
 was inadvertently left out of Enterprise Registration.
  
 Patch Components
 ================
   
 Files & Fields Associated:
   
 File Name (Number)         Field Name (Number)    New/Modified/Deleted
 ------------------         -------------------    --------------------
 MAS PARAMETERS (#43)       PROCESS MVI DOD        NEW
                             UPDATE? (#1401)
 PATIENT (#2)               SOURCE OF              MODIFIED
                             NOTIFICATION (#.353)   
                            SUPPORTING DOCUMENT    NEW
                             TYPE (#.357)
                            DATE OF DEATH OPTION   NEW
                             USED (#.358)
 SOURCE OF NOTIFICATIONS (#47.76)                  NEW File 
  (Data Exported)
 SUPPORTING DOCUMENT TYPES (#47.75)                NEW File 
  (Data Exported)
   
 Forms Associated:
   
 Form Name             File #       New/Modified/Deleted
 ---------             ------       --------------------
 N/A
   
   
 Mail Groups Associated:
   
 Mail Group Name          New/Modified/Deleted
 ---------------          --------------------
 N/A
   
   
 Options Associated:
   
 Option Name            Type               New/Modified/Deleted
 -----------            ----               -------------------- 
 N/A
   
   
 Protocols Associated:
   
 Protocol Name       New/Modified/Deleted
 -------------       -------------------- 
 N/A
  
 Remote Procedures Associated:
   
 Remote Procedure Name             New/Modified/Deleted
 ---------------------------       -------------------- 
 VAFC DOD ACCEPT SET/DISPLAY       NEW
   
 Security Keys Associated:
   
 Security Key Name
 -----------------
 N/A
   
   
 Templates Associated:
   
 Template Name      Type      File Name (Number)  New/Modified/Deleted 
 -------------      ----      ------------------  --------------------
 N/A
   
   
 Additional Information:
   
 New Service Requests (NSRs)
 ----------------------------  
 N/A
   
   
 Patient Safety Issues (PSIs)
 -----------------------------
 N/A
   
   
 CA Ticket(s) & Overview
 ---------------------------
 1. I10555752FY16/I8707336FY16 - Patient Treatment File (PTF) issue
                                 caused by Pseudo SSN.
  
 Problem:
 --------
 Sites have reported issues when registering patients with a pseudo
 SSN, detailing that their messages are being rejected by Austin. This
 is due to the fact that pseudo SSN reason is not always being populated
 for patients with pseudo SSNs. Pseudo SSN reason is required for Austin
 when the patient has a pseudo SSN, but is not a required field in the
 PATIENT file (#2). 
 In addition, the pseudo SSN reason is also not required to be
 populated for a patient who is assigned a pseudo SSN in the REGISTER
 A PATIENT ([DG REGISTER PATIENT] menu option) process for Enterprise 
 Registration. However, it is required when adding a patient through
 the LOAD/EDIT PATIENT DATA [DG LOAD PATIENT DATA] menu option.
   
 Resolution:
 -----------
 Routine DPTLK7 was updated so that pseudo SSN reason will now be a
 required prompt in the Enterprise Registration process when the
 patient is assigned a pseudo SSN.
  Note: The pseudo SSN reason prompt will be moved so it is directly
        underneath the SSN prompt. The user will only be prompted 
        for this reason if they assign a pseudo SSN to the patient
        and a response will now be required to continue the 
        registration process.
        The non-required pseudo SSN reason prompt that was previously
        displayed later on in the registration process will be removed.
   
 2. I9418203FY16 - Insurance inconsistency questions during the
                   Registration process.
  
 Problem:
 --------
 Sites have reported that when using the REGISTER A PATIENT
 [DG REGISTER PATIENT] menu option that the Insurance data retrieval
 was removed when the Register Once functionality was replaced with
 Enterprise Registration.
  
 Resolution:
 -----------
 Routine DGREG was updated to restore the inadvertently removed 
 Insurance data retrieval call from the REGISTER A PATIENT
 [DG REGISTER PATIENT] menu option for Enterprise Registration.
   
  
 Test Sites:
 ----------
 Central Alabama HCS
 Indianapolis VAMC
 Louisville VAMC
    
  
 Software and Documentation Retrieval Instructions:
 ---------------------------------------------------- 
 Software being released as a host file and/or documentation describing 
 the new functionality introduced by this patch are available.
  
 The preferred method is to retrieve files from download.vista.domain.ext.
 This transmits the files from the first available server. Sites may 
 also elect to retrieve files directly from a specific server. 
  
 Sites may retrieve the software and/or documentation directly using Secure 
 File Transfer Protocol (SFTP) from the ANONYMOUS.SOFTWARE directory at 
 the following OI Field Offices:
    
 Albany:                 domain.ext
 Hines:                  domain.ext    
 Salt Lake City:         domain.ext
    
 PIMS ADT Documentation can also be found on the VA Software Documentation
 Library at: http://www4.domain.ext/vdl/application.asp?appid=55
   
 Title                                       File Name              FTP Mode
 ---------------------------------------------------------------------------
 PIMS ADT User Manual - Bed Control Menu     DG_5_3_P926_BC_UM.PDF  (binary)
 PIMS ADT User Manual - Registration Menu    DG_5_3_P926_REG_UM.PDF (binary)
  
 MPI/PD VistA Documentation can also be found on the VA Software 
 Documentation Library at: http://www.domain.ext/vdl/application.asp?appid=16
   
 Title                                       File Name              FTP Mode
 ---------------------------------------------------------------------------
 MPI/PD VISTA User Manual                    RG_1_0_P65_UM.PDF      (binary)
 MPI/PD VISTA Programmer Manual              RG_1_0_P65_PM.PDF      (binary)
 MPI/PD VISTA Technical Manual               RG_1_0_P65_TM.PDF      (binary)
  
   
 Patch Installation:
   
  
 Pre/Post Installation Overview
 ------------------------------
 There are no Pre/Post installation routine processes.   
   
  
 Pre-Installation Instructions
 ----------------------------- 
 This patch takes less than 2 minutes to install.  This patch may be 
 installed with users on the system. However, because the patient lookup
 routines are impacted, we strongly advise that it be installed after
 business hours.  
  
 The following OPTIONs should be disabled during installation:
      Load/Edit Patient Data                      [DG LOAD PATIENT DATA]
      Register a Patient                          [DG REGISTER PATIENT]
      Preregister a Patient                       [DGPRE PRE-REGISTER OPTION]
      Electronic 10-10EZ Processing               [EAS EZ 1010EZ PROCESSING] 
      Local/Missing ICN Resolution Background Job [MPIF LOC/MIS ICN RES]
  
 The HL7 incoming filers should be stopped.  Use the Monitor, Start, Stop
 Filers [HL FILER MONITOR] option on the Filer and Link Management Options
 [HL MENU FILER LINK MGT] menu on the HL7 Main Menu [HL MAIN MENU].
   
  
 Installation Instructions
 -------------------------
 1.  Choose the PackMan message containing this patch.
   
 2.  Choose the INSTALL/CHECK MESSAGE PackMan option.  
   
 3.  From the Kernel Installation and Distribution System Menu, select
     the Installation Menu.  From this menu, you may elect to use the
     following options. When prompted for the INSTALL enter the patch 
     number (i.e. DG*5.3*926):
   
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch. It will not
         backup any other changes such as DDs or templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
         (routines, DDs, templates, etc.).
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
       
 4.  From the Installation Menu, select the Install Package(s) option and
     choose the patch to install.
   
 5.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
     Install? NO//', respond as per your facility's policy.  If you
     choose to answer YES, then at the end of the patch installation,
     KIDS will rebuild the menus which may take several hours and could
     disrupt CPRS users.  If your facility has the XQBUILDTREEQUE
     nightly batch job tasked to run, answer NO to this question.
     The nightly job will rebuild the menus as scheduled.
   
 6.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? NO//',
     respond NO.
   
 7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
     and Protocols? NO// respond YES.  The following OPTIONS should be
     disabled during the installation.
       
      Load/Edit Patient Data                      [DG LOAD PATIENT DATA]
      Register a Patient                          [DG REGISTER PATIENT]
      Preregister a Patient                       [DGPRE PRE-REGISTER OPTION]
      Electronic 10-10EZ Processing               [EAS EZ 1010EZ PROCESSING] 
      Local/Missing ICN Resolution Background Job [MPIF LOC/MIS ICN RES]
   
 8.  If prompted "Delay Install (Minutes):  (0 - 60): 0// respond 0.
  
  
 Post-Installation Instructions
 ------------------------------
 After patch installation has completed, restart the HL7 incoming filers.
 Use the Monitor, Start, Stop Filers [HL FILER MONITOR] option on the Filer
 and Link Management Options [HL MENU FILER LINK MGT] menu on the HL7 Main
 Menu [HL MAIN MENU].

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.3;Registration;**[Patch List]**;Aug 13, 1993;Build 6

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: DGDEATH
    Before: B44578937   After: B59149786  **45,84,101,149,392,545,595,
                                           568,563,725,772,863,901,926**
Routine Name: DGREG
    Before: B51312405   After: B55364867  **1,32,108,147,149,182,245,250,
                                           513,425,533,574,563,624,658,
                                           864,886,915,926**
Routine Name: DPTLK7
    Before:B185524079   After:B199396274  **915,919,926**
Routine Name: VAFCDODA
    Before:       n/a   After:  B4999443  **926**
Routine Name: VAFCPDAT
    Before: B52424341   After: B63310519  **333,414,474,505,707,712,837,
                                           863,876,902,926**
Routine Name: VAFCQRY
    Before: B23196961   After: B26626095  **428,575,627,707,863,902,926**
Routine Name: VAFCSB
    Before: B32788021   After: B45868659  **707,756,825,876,902,926**
Routine Name: VAFCTR
    Before:  B4435550   After:  B4717959  **575,648,653,712,876,902,926**
 
Routine list of preceding patches: 901, 902, 919

=============================================================================
User Information:
Entered By  :                               Date Entered  : FEB 08, 2016
Completed By:                               Date Completed: DEC 07, 2016
Released By :                               Date Released : DEC 14, 2016
=============================================================================


Packman Mail Message:
=====================

$END TXT
