Released PRS*4*140 SEQ #131
Extracted from mail message
**KIDS**:PRS*4.0*140^

**INSTALL NAME**
PRS*4.0*140
"BLD",9483,0)
PRS*4.0*140^PAID^0^3140812^y
"BLD",9483,1,0)
^^4^4^3140812^
"BLD",9483,1,1,0)
This patch addresses two issues:  
"BLD",9483,1,2,0)
1.Part time Physician Memorandums have incorrect pay period 
"BLD",9483,1,3,0)
  designations after 2012.
"BLD",9483,1,4,0)
2.Two new codes need to be added to the Telework Code file.
"BLD",9483,4,0)
^9.64PA^^
"BLD",9483,6.3)
6
"BLD",9483,"ABPKG")
n
"BLD",9483,"INID")
^n
"BLD",9483,"INIT")
START^PRSXP140
"BLD",9483,"KRN",0)
^9.67PA^779.2^20
"BLD",9483,"KRN",.4,0)
.4
"BLD",9483,"KRN",.401,0)
.401
"BLD",9483,"KRN",.402,0)
.402
"BLD",9483,"KRN",.403,0)
.403
"BLD",9483,"KRN",.5,0)
.5
"BLD",9483,"KRN",.84,0)
.84
"BLD",9483,"KRN",3.6,0)
3.6
"BLD",9483,"KRN",3.8,0)
3.8
"BLD",9483,"KRN",9.2,0)
9.2
"BLD",9483,"KRN",9.8,0)
9.8
"BLD",9483,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",9483,"KRN",9.8,"NM",1,0)
PRSXP140^^0^B13173934
"BLD",9483,"KRN",9.8,"NM","B","PRSXP140",1)

"BLD",9483,"KRN",19,0)
19
"BLD",9483,"KRN",19.1,0)
19.1
"BLD",9483,"KRN",101,0)
101
"BLD",9483,"KRN",409.61,0)
409.61
"BLD",9483,"KRN",771,0)
771
"BLD",9483,"KRN",779.2,0)
779.2
"BLD",9483,"KRN",870,0)
870
"BLD",9483,"KRN",8989.51,0)
8989.51
"BLD",9483,"KRN",8989.52,0)
8989.52
"BLD",9483,"KRN",8994,0)
8994
"BLD",9483,"KRN","B",.4,.4)

"BLD",9483,"KRN","B",.401,.401)

"BLD",9483,"KRN","B",.402,.402)

"BLD",9483,"KRN","B",.403,.403)

"BLD",9483,"KRN","B",.5,.5)

"BLD",9483,"KRN","B",.84,.84)

"BLD",9483,"KRN","B",3.6,3.6)

"BLD",9483,"KRN","B",3.8,3.8)

"BLD",9483,"KRN","B",9.2,9.2)

"BLD",9483,"KRN","B",9.8,9.8)

"BLD",9483,"KRN","B",19,19)

"BLD",9483,"KRN","B",19.1,19.1)

"BLD",9483,"KRN","B",101,101)

"BLD",9483,"KRN","B",409.61,409.61)

"BLD",9483,"KRN","B",771,771)

"BLD",9483,"KRN","B",779.2,779.2)

"BLD",9483,"KRN","B",870,870)

"BLD",9483,"KRN","B",8989.51,8989.51)

"BLD",9483,"KRN","B",8989.52,8989.52)

"BLD",9483,"KRN","B",8994,8994)

"BLD",9483,"QDEF")
^^^^^^^^^^YES
"BLD",9483,"QUES",0)
^9.62^^
"BLD",9483,"REQB",0)
^9.611^^
"INIT")
START^PRSXP140
"MBREQ")
0
"PKG",408,-1)
1^1
"PKG",408,0)
PAID^PRS^PAID
"PKG",408,20,0)
^9.402P^^
"PKG",408,22,0)
^9.49I^1^1
"PKG",408,22,1,0)
4.0^2950912^2960130
"PKG",408,22,1,"PAH",1,0)
140^3140812^123456793
"PKG",408,22,1,"PAH",1,1,0)
^^4^4^3140812
"PKG",408,22,1,"PAH",1,1,1,0)
This patch addresses two issues:  
"PKG",408,22,1,"PAH",1,1,2,0)
1.Part time Physician Memorandums have incorrect pay period 
"PKG",408,22,1,"PAH",1,1,3,0)
  designations after 2012.
"PKG",408,22,1,"PAH",1,1,4,0)
2.Two new codes need to be added to the Telework Code file.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PRSXP140")
0^1^B13173934^n/a
"RTN","PRSXP140",1,0)
PRSXP140 ;WCIOFO/RRG-CORRECT INCORRECT ESR PAY PERIODS ;08/05/2014
"RTN","PRSXP140",2,0)
 ;;4.0;PAID;**140**;Sep 21, 1995;Build 6
"RTN","PRSXP140",3,0)
 ;;Per VHA Directive 6402, this routine should not be modified.
"RTN","PRSXP140",4,0)
 ;
"RTN","PRSXP140",5,0)
 Q
"RTN","PRSXP140",6,0)
 ;
"RTN","PRSXP140",7,0)
 ; This program will correct PT Physician Memorandums with incorrect 
"RTN","PRSXP140",8,0)
 ; pay period designations.
"RTN","PRSXP140",9,0)
 ;
"RTN","PRSXP140",10,0)
START ; Main Driver
"RTN","PRSXP140",11,0)
 ;
"RTN","PRSXP140",12,0)
 K ^TMP($J)
"RTN","PRSXP140",13,0)
 N DA,DR,DIE,PRSMIEN,PRSOLDPPD,PRSNEWPPD,PRSPPIEN,DASH,TIME,Y,PRSPTP,PRSPTPNAME,%
"RTN","PRSXP140",14,0)
 D NOW^%DTC S Y=%
"RTN","PRSXP140",15,0)
 D DD^%DT S TIME=Y
"RTN","PRSXP140",16,0)
 D BMES^XPDUTL("Routine PRSXP140 beginning at "_TIME_".")
"RTN","PRSXP140",17,0)
 D MEMO
"RTN","PRSXP140",18,0)
 I $D(^TMP($J)) D DISPLAY
"RTN","PRSXP140",19,0)
 D BMES^XPDUTL("Routine PRSXP140 processing complete.")
"RTN","PRSXP140",20,0)
 K DA,DR,DIE,PRSMIEN,PRSOLDPPD,PRSNEWPPD,PRSPPIEN,DASH,TIME,Y,PRSPTP,^TMP($J),%,PRSPTPNAME
"RTN","PRSXP140",21,0)
 Q
"RTN","PRSXP140",22,0)
 ;
"RTN","PRSXP140",23,0)
MEMO ; Loop through memos - correct bad pay period records
"RTN","PRSXP140",24,0)
 K DA,DA(1),DR,DIE
"RTN","PRSXP140",25,0)
 S PRSMIEN=0,PRSOLDPPD="",PRSIEN=""
"RTN","PRSXP140",26,0)
 F  S PRSMIEN=$O(^PRST(458.7,PRSMIEN)) Q:PRSMIEN]999999!(PRSMIEN="")  D
"RTN","PRSXP140",27,0)
 . I '$D(^PRST(458.7,PRSMIEN,9)) Q
"RTN","PRSXP140",28,0)
 . F  S PRSOLDPPD=$O(^PRST(458.7,PRSMIEN,9,"B",PRSOLDPPD)) Q:PRSOLDPPD=""  S PRSPPIEN="" D
"RTN","PRSXP140",29,0)
 . . I PRSOLDPPD'["12-" Q
"RTN","PRSXP140",30,0)
 . . I PRSOLDPPD']"12-27" Q
"RTN","PRSXP140",31,0)
 . . S PRSPPIEN=$O(^PRST(458.7,PRSMIEN,9,"B",PRSOLDPPD,PRSPPIEN)) Q:PRSPPIEN=""
"RTN","PRSXP140",32,0)
 . . S PRSNEWPPD="" D  Q:PRSNEWPPD=""
"RTN","PRSXP140",33,0)
 . . . S PRSNEWPPD=$S(PRSOLDPPD="12-28":"13-01",PRSOLDPPD="12-29":"13-02",PRSOLDPPD="12-30":"13-03",PRSOLDPPD="12-31":"13-04",PRSOLDPPD="12-32":"13-05",PRSOLDPPD="12-33":"13-06",PRSOLDPPD="12-34":"13-07",PRSOLDPPD="12-35":"13-08",1:PRSNEWPPD)
"RTN","PRSXP140",34,0)
 . . . S PRSNEWPPD=$S(PRSOLDPPD="12-36":"13-09",PRSOLDPPD="12-37":"13-10",PRSOLDPPD="12-38":"13-11",PRSOLDPPD="12-39":"13-12",PRSOLDPPD="12-40":"13-13",PRSOLDPPD="12-41":"13-14",PRSOLDPPD="12-42":"13-15",PRSOLDPPD="12-43":"13-16",1:PRSNEWPPD)
"RTN","PRSXP140",35,0)
 . . . S PRSNEWPPD=$S(PRSOLDPPD="12-44":"13-17",PRSOLDPPD="12-45":"13-18",PRSOLDPPD="12-46":"13-19",PRSOLDPPD="12-47":"13-20",PRSOLDPPD="12-48":"13-21",PRSOLDPPD="12-49":"13-22",PRSOLDPPD="12-50":"13-23",PRSOLDPPD="12-51":"13-24",1:PRSNEWPPD)
"RTN","PRSXP140",36,0)
 . . . S PRSNEWPPD=$S(PRSOLDPPD="12-52":"13-25",PRSOLDPPD="12-53":"13-26",1:PRSNEWPPD)
"RTN","PRSXP140",37,0)
 . . S DA=PRSPPIEN,DA(1)=PRSMIEN,DR=".01///^S X=PRSNEWPPD",DIE="^PRST(458.7,PRSMIEN,9,"
"RTN","PRSXP140",38,0)
 . . D ^DIE
"RTN","PRSXP140",39,0)
 . . K DA,DA(1),DR,DIE
"RTN","PRSXP140",40,0)
 . . N PRSIEN,PRSPPI
"RTN","PRSXP140",41,0)
 . . S PRSIEN=$P(^PRST(458.7,PRSMIEN,0),"^",1),PRSPPI=$O(^PRST(458,"B",PRSNEWPPD,"")) D
"RTN","PRSXP140",42,0)
 . . . Q:PRSPPI=""
"RTN","PRSXP140",43,0)
 . . . I PRSNEWPPD["13-" D PTP^PRSASR1(PRSIEN,PRSPPI) ;UPDATE MEMO WITH ESR HOURS
"RTN","PRSXP140",44,0)
 . . S ^TMP($J,PRSMIEN)=$P(^PRST(458.7,PRSMIEN,0),"^",1)
"RTN","PRSXP140",45,0)
 Q
"RTN","PRSXP140",46,0)
 ;
"RTN","PRSXP140",47,0)
DISPLAY ; Display PT Physicians with corrected memorandums
"RTN","PRSXP140",48,0)
 S $P(DASH,"-",53)="",PRSMIEN=""
"RTN","PRSXP140",49,0)
 D BMES^XPDUTL("Pay periods corrected for these Part-Time Physicians")
"RTN","PRSXP140",50,0)
 D MES^XPDUTL(DASH)
"RTN","PRSXP140",51,0)
 ; Note naked reference to ^TMP($J) in loop body
"RTN","PRSXP140",52,0)
 F  S PRSMIEN=$O(^TMP($J,PRSMIEN)) Q:PRSMIEN=""  D
"RTN","PRSXP140",53,0)
 . S PRSPTP=^(PRSMIEN) D MES^XPDUTL($P($G(^PRSPC(PRSPTP,0)),"^",1))
"RTN","PRSXP140",54,0)
 Q
"RTN","PRSXP140",55,0)
 ;
"VER")
8.0^22.0
"BLD",9483,6)
^131
**END**
**END**

