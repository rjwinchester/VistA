Released PRS*4*141 SEQ #132
Extracted from mail message
**KIDS**:PRS*4.0*141^

**INSTALL NAME**
PRS*4.0*141
"BLD",9490,0)
PRS*4.0*141^PAID^0^3140501^y
"BLD",9490,1,0)
^^4^4^3140501^
"BLD",9490,1,1,0)
This patch addresses three issues:
"BLD",9490,1,2,0)
1. Additional Occupation Series & Title codes to be added to hybrid table.
"BLD",9490,1,3,0)
2. Healthcare worker codes should not be included in hybrid table.
"BLD",9490,1,4,0)
3. Spelling error will be corrected.
"BLD",9490,4,0)
^9.64PA^^0
"BLD",9490,6.3)
3
"BLD",9490,"ABPKG")
n
"BLD",9490,"KRN",0)
^9.67PA^779.2^20
"BLD",9490,"KRN",.4,0)
.4
"BLD",9490,"KRN",.401,0)
.401
"BLD",9490,"KRN",.402,0)
.402
"BLD",9490,"KRN",.403,0)
.403
"BLD",9490,"KRN",.5,0)
.5
"BLD",9490,"KRN",.84,0)
.84
"BLD",9490,"KRN",3.6,0)
3.6
"BLD",9490,"KRN",3.8,0)
3.8
"BLD",9490,"KRN",9.2,0)
9.2
"BLD",9490,"KRN",9.8,0)
9.8
"BLD",9490,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",9490,"KRN",9.8,"NM",1,0)
PRSRL41^^0^B25853276
"BLD",9490,"KRN",9.8,"NM",2,0)
PRSAENT1^^0^B74143649
"BLD",9490,"KRN",9.8,"NM","B","PRSAENT1",2)

"BLD",9490,"KRN",9.8,"NM","B","PRSRL41",1)

"BLD",9490,"KRN",19,0)
19
"BLD",9490,"KRN",19.1,0)
19.1
"BLD",9490,"KRN",101,0)
101
"BLD",9490,"KRN",409.61,0)
409.61
"BLD",9490,"KRN",771,0)
771
"BLD",9490,"KRN",779.2,0)
779.2
"BLD",9490,"KRN",870,0)
870
"BLD",9490,"KRN",8989.51,0)
8989.51
"BLD",9490,"KRN",8989.52,0)
8989.52
"BLD",9490,"KRN",8994,0)
8994
"BLD",9490,"KRN","B",.4,.4)

"BLD",9490,"KRN","B",.401,.401)

"BLD",9490,"KRN","B",.402,.402)

"BLD",9490,"KRN","B",.403,.403)

"BLD",9490,"KRN","B",.5,.5)

"BLD",9490,"KRN","B",.84,.84)

"BLD",9490,"KRN","B",3.6,3.6)

"BLD",9490,"KRN","B",3.8,3.8)

"BLD",9490,"KRN","B",9.2,9.2)

"BLD",9490,"KRN","B",9.8,9.8)

"BLD",9490,"KRN","B",19,19)

"BLD",9490,"KRN","B",19.1,19.1)

"BLD",9490,"KRN","B",101,101)

"BLD",9490,"KRN","B",409.61,409.61)

"BLD",9490,"KRN","B",771,771)

"BLD",9490,"KRN","B",779.2,779.2)

"BLD",9490,"KRN","B",870,870)

"BLD",9490,"KRN","B",8989.51,8989.51)

"BLD",9490,"KRN","B",8989.52,8989.52)

"BLD",9490,"KRN","B",8994,8994)

"BLD",9490,"QDEF")
^^^^^^^^^^YES
"BLD",9490,"QUES",0)
^9.62^^
"BLD",9490,"REQB",0)
^9.611^2^2
"BLD",9490,"REQB",1,0)
PRS*4.0*69^2
"BLD",9490,"REQB",2,0)
PRS*4.0*138^2
"BLD",9490,"REQB","B","PRS*4.0*138",2)

"BLD",9490,"REQB","B","PRS*4.0*69",1)

"MBREQ")
0
"PKG",408,-1)
1^1
"PKG",408,0)
PAID^PRS^PAID
"PKG",408,20,0)
^9.402P^^
"PKG",408,22,0)
^9.49I^1^1
"PKG",408,22,1,0)
4.0^2950912^2960130
"PKG",408,22,1,"PAH",1,0)
141^3140501
"PKG",408,22,1,"PAH",1,1,0)
^^4^4^3140501
"PKG",408,22,1,"PAH",1,1,1,0)
This patch addresses three issues:
"PKG",408,22,1,"PAH",1,1,2,0)
1. Additional Occupation Series & Title codes to be added to hybrid table.
"PKG",408,22,1,"PAH",1,1,3,0)
2. Healthcare worker codes should not be included in hybrid table.
"PKG",408,22,1,"PAH",1,1,4,0)
3. Spelling error will be corrected.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","PRSAENT1")
0^2^B74143649^B68586352
"RTN","PRSAENT1",1,0)
PRSAENT1 ;HISC/MGD-Entitlement String ;10/19/04
"RTN","PRSAENT1",2,0)
 ;;4.0;PAID;**96,130,135,138,141**;Sep 21, 1995;Build 3
"RTN","PRSAENT1",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSAENT1",4,0)
 ;
"RTN","PRSAENT1",5,0)
 Q
"RTN","PRSAENT1",6,0)
 ;
"RTN","PRSAENT1",7,0)
HYBRID(IEN) ;
"RTN","PRSAENT1",8,0)
 ;----------------------------------------------------------------------
"RTN","PRSAENT1",9,0)
 ; The following code was added to address Public Law 
"RTN","PRSAENT1",10,0)
 ; P.L. 107-135 which adds mandatory Saturday (SP/SQ) and Sunday 
"RTN","PRSAENT1",11,0)
 ; (SA/SE) Premium Pay for all "Hybrid" title 38 employees.
"RTN","PRSAENT1",12,0)
 ;
"RTN","PRSAENT1",13,0)
 ; Input Vars:
"RTN","PRSAENT1",14,0)
 ;  IEN - the ien number of the employee in the PAID EMPLOYEE (#450)
"RTN","PRSAENT1",15,0)
 ;        file.
"RTN","PRSAENT1",16,0)
 ;
"RTN","PRSAENT1",17,0)
 ; Local Vars:
"RTN","PRSAENT1",18,0)
 ;     C0 - the 0 node of the employee from the PAID EMPLOYEE (#450)
"RTN","PRSAENT1",19,0)
 ;          file.
"RTN","PRSAENT1",20,0)
 ; HYBRID - Is the employee a Hybrid that qualifies for Saturday and
"RTN","PRSAENT1",21,0)
 ;          Sunday premium pay after the passing of Public Law
"RTN","PRSAENT1",22,0)
 ;          P.L. 107-135.
"RTN","PRSAENT1",23,0)
 ;          1 : Entitled to Saturday or Sunday Premium pay.
"RTN","PRSAENT1",24,0)
 ;          0 : Not Entitled to Saturday or Sunday Premium pay.
"RTN","PRSAENT1",25,0)
 ;  OCODE - The employee's OCCUPATION SERIES & TITLE code.
"RTN","PRSAENT1",26,0)
 ;
"RTN","PRSAENT1",27,0)
 ; Output: HYBRID
"RTN","PRSAENT1",28,0)
 ; 
"RTN","PRSAENT1",29,0)
 ;----------------------------------------------------------------------
"RTN","PRSAENT1",30,0)
 ;
"RTN","PRSAENT1",31,0)
 N C0,HYBRID,OCODE,PREM
"RTN","PRSAENT1",32,0)
 S (HYBRID,PREM)=0
"RTN","PRSAENT1",33,0)
 ;
"RTN","PRSAENT1",34,0)
 Q:'+IEN HYBRID  ; Quit if no IEN passed in.
"RTN","PRSAENT1",35,0)
 ;
"RTN","PRSAENT1",36,0)
 S C0=$G(^PRSPC(IEN,0))
"RTN","PRSAENT1",37,0)
 Q:C0="" HYBRID  ; Quit if no 0 node in 450
"RTN","PRSAENT1",38,0)
 ;
"RTN","PRSAENT1",39,0)
 S PREM=$P($G(^PRSPC(IEN,"PREMIUM")),U,6)
"RTN","PRSAENT1",40,0)
 I "^E^F^"[("^"_PREM_"^") S PREM=1
"RTN","PRSAENT1",41,0)
 ;
"RTN","PRSAENT1",42,0)
 ; Check for Pay Plan A and Type of Appointment 5 or 6
"RTN","PRSAENT1",43,0)
 I $P(C0,U,21)="A","^5^6^"[(U_$P(C0,U,43)_U),'PREM D
"RTN","PRSAENT1",44,0)
 .;Check Occupational Series Code and Title Code.
"RTN","PRSAENT1",45,0)
 . S OCODE=$P(C0,U,17)
"RTN","PRSAENT1",46,0)
 . Q:OCODE=""
"RTN","PRSAENT1",47,0)
 . ;
"RTN","PRSAENT1",48,0)
 . ; For any OCC codes applicable to Hybrid employees translate any
"RTN","PRSAENT1",49,0)
 . ; 6th position Alphas in the Title Code to its corresponding
"RTN","PRSAENT1",50,0)
 . ; numerical equivalent before making the final comparison.
"RTN","PRSAENT1",51,0)
 . ;
"RTN","PRSAENT1",52,0)
 . ;I "^0080^0081^0083^0085^0086^0301^0303^0350^3566^4805^7304^7305^"[$E(OCODE,1,4) D  ;PRS*4*138
"RTN","PRSAENT1",53,0)
 . ;. S $E(OCODE,6)=$TR($E(OCODE,6),"ABCDEFGHIJKLMNOPQR","123456789123456789")
"RTN","PRSAENT1",54,0)
 . ;I "^7404^7408^5406^4742^5415^5309^5402^5703^4801^5306^1046^1001^"[$E(OCODE,1,4) D  ;PRS*4*138
"RTN","PRSAENT1",55,0)
 . ;. S $E(OCODE,6)=$TR($E(OCODE,6),"ABCDEFGHIJKLMNOPQR","123456789123456789")
"RTN","PRSAENT1",56,0)
 . I "^0101^0180^0185^0601^0620^0621^0630^0631^0633^0635^0636^"[$E(OCODE,1,4) D  ;PRS*4*130 and PRS*4*138
"RTN","PRSAENT1",57,0)
 . . S $E(OCODE,6)=$TR($E(OCODE,6),"ABCDEFGHIJKLMNOPQR","123456789123456789")
"RTN","PRSAENT1",58,0)
 . I "^0640^0644^0647^0648^0649^0660^0661^0665^0667^"[$E(OCODE,1,4) D
"RTN","PRSAENT1",59,0)
 . . S $E(OCODE,6)=$TR($E(OCODE,6),"ABCDEFGHIJKLMNOPQR","123456789123456789")
"RTN","PRSAENT1",60,0)
 . I "^0669^0672^0675^0679^0681^0682^0685^"[$E(OCODE,1,4) D  ;PRS*4*135
"RTN","PRSAENT1",61,0)
 . . S $E(OCODE,6)=$TR($E(OCODE,6),"ABCDEFGHIJKLMNOPQR","123456789123456789")
"RTN","PRSAENT1",62,0)
 . ;
"RTN","PRSAENT1",63,0)
 . ; Check individual OCC codes
"RTN","PRSAENT1",64,0)
 . ;
"RTN","PRSAENT1",65,0)
 . ;I $E(OCODE,1,4)="0080" D       ; Security Officer
"RTN","PRSAENT1",66,0)
 . ;. I "^02^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*138
"RTN","PRSAENT1",67,0)
 . ;I $E(OCODE,1,4)="0081" D       ; Firefighter
"RTN","PRSAENT1",68,0)
 . ;. I "^03^04^05^07^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*138
"RTN","PRSAENT1",69,0)
 . ;I $E(OCODE,1,4)="0083" D       ; Detective
"RTN","PRSAENT1",70,0)
 . ;. I "^02^03^05^"[(U_$E(OCODE,5,6)_U) S HYBRID=1  ;PRS*4*138
"RTN","PRSAENT1",71,0)
 . ;I $E(OCODE,1,4)="0085" D       ; Security Guard
"RTN","PRSAENT1",72,0)
 . ;. I "^04^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*138
"RTN","PRSAENT1",73,0)
 . ;I $E(OCODE,1,4)="0086" D       ; Security Clerk
"RTN","PRSAENT1",74,0)
 . ;. I "^01^02^04^"[(U_$E(OCODE,5,6)_U) S HYBRID=1  ;PRS*4*138
"RTN","PRSAENT1",75,0)
 . ;I $E(OCODE,1,4)="0301" D       ; Patient Representative
"RTN","PRSAENT1",76,0)
 . ;. I "^68^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*138
"RTN","PRSAENT1",77,0)
 . ;I $E(OCODE,1,4)="0303" D       ; Medical Admin Assistant
"RTN","PRSAENT1",78,0)
 . ;. I "^03^04^16^19^45^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*138
"RTN","PRSAENT1",79,0)
 . ;I $E(OCODE,1,4)="0350" D       ; X-Ray Film Proc Equ
"RTN","PRSAENT1",80,0)
 . ;. I "^09^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*138
"RTN","PRSAENT1",81,0)
 . I $E(OCODE,1,4)="0101" D       ; Marriage Family Therapist, Licensed Mental Health Provider
"RTN","PRSAENT1",82,0)
 . . I "^06^17^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*138
"RTN","PRSAENT1",83,0)
 . I $E(OCODE,1,4)="0180" D       ; Psychologist
"RTN","PRSAENT1",84,0)
 . . I "^02^03^04^05^07^10^11^26^85^86^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",85,0)
 . . I "^87^92^95^96^97^98^"[(U_$E(OCODE,5,6)_U) S HYBRID=1
"RTN","PRSAENT1",86,0)
 . I $E(OCODE,1,4)="0185" D       ; Social Worker
"RTN","PRSAENT1",87,0)
 . . I "^02^03^04^05^10^51^57^58^59^61^62^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",88,0)
 . . I "^63^64^66^71^72^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",89,0)
 . I $E(OCODE,1,4)="0601" D       ; Registered Respiratory Therapist
"RTN","PRSAENT1",90,0)
 . . I "^22^23^25^31^43^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",91,0)
 . I $E(OCODE,1,4)="0601" D       ; Nuclear Med Technologist
"RTN","PRSAENT1",92,0)
 . . I "^08^13^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",93,0)
 . I $E(OCODE,1,4)="0601" D       ; Vist Coordinator
"RTN","PRSAENT1",94,0)
 . . I "^67^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*141
"RTN","PRSAENT1",95,0)
 . I $E(OCODE,1,4)="0601" D       ; Blind Rehab Specialist
"RTN","PRSAENT1",96,0)
 . . I "^68^69^71^72^73^74^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*141
"RTN","PRSAENT1",97,0)
 . I $E(OCODE,1,4)="0620" D       ; Vocational/Practical Nurse
"RTN","PRSAENT1",98,0)
 . . I "^01^02^03^04^05^06^12^13^14^"[(U_$E(OCODE,5,6)_U) S HYBRID=1
"RTN","PRSAENT1",99,0)
 . I $E(OCODE,1,4)="0621" D       ; Nursing Assistant
"RTN","PRSAENT1",100,0)
 . . I "^02^05^08^14^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",101,0)
 . I $E(OCODE,1,4)="0630" D       ; Dietitian
"RTN","PRSAENT1",102,0)
 . . I "^09^10^18^20^59^61^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",103,0)
 . I $E(OCODE,1,4)="0631" D       ; Occupational Therapist
"RTN","PRSAENT1",104,0)
 . . I "^04^"[(U_$E(OCODE,5,6)_U) S HYBRID=1
"RTN","PRSAENT1",105,0)
 . I $E(OCODE,1,4)="0633" D       ; Physical Therapist
"RTN","PRSAENT1",106,0)
 . . I "^02^15^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*141
"RTN","PRSAENT1",107,0)
 . I $E(OCODE,1,4)="0635" D       ; Corrective Therapist
"RTN","PRSAENT1",108,0)
 . . I "^02^"[(U_$E(OCODE,5,6)_U) S HYBRID=1
"RTN","PRSAENT1",109,0)
 . I $E(OCODE,1,4)="0636" D       ; Therapy Assistant
"RTN","PRSAENT1",110,0)
 . . I "^15^16^17^18^"[(U_$E(OCODE,5,6)_U) S HYBRID=1
"RTN","PRSAENT1",111,0)
 . I $E(OCODE,1,4)="0640" D       ;Certified Respiratory Therapy Tech
"RTN","PRSAENT1",112,0)
 . . I "^75^"[(U_$E(OCODE,5,6)_U) S HYBRID=1
"RTN","PRSAENT1",113,0)
 . I $E(OCODE,1,4)="0644" D       ; Medical Technologist
"RTN","PRSAENT1",114,0)
 . . I "^02^03^05^10^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",115,0)
 . I $E(OCODE,1,4)="0647" D       ; Diagnostic Radiologic
"RTN","PRSAENT1",116,0)
 . . I "^11^12^13^14^15^16^17^"[(U_$E(OCODE,5,6)_U) S HYBRID=1
"RTN","PRSAENT1",117,0)
 . . I "^19^21^22^23^24^25^26^27^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",118,0)
 . I $E(OCODE,1,4)="0648" D       ; Therapeutic Radiologic
"RTN","PRSAENT1",119,0)
 . . I "^14^15^16^17^"[(U_$E(OCODE,5,6)_U) S HYBRID=1
"RTN","PRSAENT1",120,0)
 . I $E(OCODE,1,4)="0649" D       ; Medical Instrument Technician
"RTN","PRSAENT1",121,0)
 . . I "^15^16^17^18^19^21^22^23^24^25^"[(U_$E(OCODE,5,6)_U) S HYBRID=1
"RTN","PRSAENT1",122,0)
 . . I "^27^28^32^33^34^35^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",123,0)
 . . I "^36^37^38^39^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*141
"RTN","PRSAENT1",124,0)
 . I $E(OCODE,1,4)="0660" D       ; Pharmacist
"RTN","PRSAENT1",125,0)
 . . I "^02^03^04^05^08^09^"[(U_$E(OCODE,5,6)_U) S HYBRID=1
"RTN","PRSAENT1",126,0)
 . . I "^10^13^15^20^21^41^50^70^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",127,0)
 . . I "^16^17^18^19^81^82^83^84^86^87^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*141
"RTN","PRSAENT1",128,0)
 . I $E(OCODE,1,4)="0661" D       ; Pharmacy Aid/Technician
"RTN","PRSAENT1",129,0)
 . . I "^03^04^06^08^09^"[(U_$E(OCODE,5,6)_U) S HYBRID=1
"RTN","PRSAENT1",130,0)
 . I $E(OCODE,1,4)="0665" D       ; Audiologist/Speech
"RTN","PRSAENT1",131,0)
 . . I "^02^04^05^06^07^08^12^15^18^65^68^75^82^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",132,0)
 . I $E(OCODE,1,4)="0667" D       ; Orthotist
"RTN","PRSAENT1",133,0)
 . . I "^02^12^22^23^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",134,0)
 . I $E(OCODE,1,4)="0669" D       ; Medical Records Administration
"RTN","PRSAENT1",135,0)
 . . I "^03^04^05^07^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",136,0)
 . I $E(OCODE,1,4)="0672" D       ; Prosthetic
"RTN","PRSAENT1",137,0)
 . . I "^05^06^07^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",138,0)
 . I $E(OCODE,1,4)="0675" D       ; Medical Records Technician
"RTN","PRSAENT1",139,0)
 . . I "^01^02^04^05^06^07^08^09^11^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*130
"RTN","PRSAENT1",140,0)
 . I $E(OCODE,1,4)="0679" S HYBRID=1    ;Medical Support Assistant   ;PRS*4*135
"RTN","PRSAENT1",141,0)
 . I $E(OCODE,1,4)="0681" D       ; Dental Assistant
"RTN","PRSAENT1",142,0)
 . . I "^03^05^06^07^09^42^"[(U_$E(OCODE,5,6)_U) S HYBRID=1
"RTN","PRSAENT1",143,0)
 . I $E(OCODE,1,4)="0682" D       ; Dental Hygienist
"RTN","PRSAENT1",144,0)
 . . I "^02^"[(U_$E(OCODE,5,6)_U) S HYBRID=1
"RTN","PRSAENT1",145,0)
 . I $E(OCODE,1,4)="0858" D       ; Biomedical Engineer
"RTN","PRSAENT1",146,0)
 . . I "^02^03^04^"[(U_$E(OCODE,5,6)_U) S HYBRID=1
"RTN","PRSAENT1",147,0)
 . ;I $E(OCODE,1,4)="3566" D       ; Housekeeping Aid
"RTN","PRSAENT1",148,0)
 . ;. I "^10^30^40^60^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*138
"RTN","PRSAENT1",149,0)
 . ;I $E(OCODE,1,4)="4805" D       ; Medical Equipment
"RTN","PRSAENT1",150,0)
 . ;. I "^10^20^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*138
"RTN","PRSAENT1",151,0)
 . ;I $E(OCODE,1,4)="7304" D       ; Laundry Worker
"RTN","PRSAENT1",152,0)
 . ;. I "^10^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*138
"RTN","PRSAENT1",153,0)
 . ;I $E(OCODE,1,4)="7305" D       ; Laundry Machine Operator
"RTN","PRSAENT1",154,0)
 . ;. I "^50^60^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*138
"RTN","PRSAENT1",155,0)
 . ;I $E(OCODE,1,4)="7404" D       ; Cook
"RTN","PRSAENT1",156,0)
 . ;. I "^20^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*138
"RTN","PRSAENT1",157,0)
 . ;I $E(OCODE,1,4)="7408" D       ; Food Service Worker
"RTN","PRSAENT1",158,0)
 . ;. I "^10^20^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*138
"RTN","PRSAENT1",159,0)
 . ;I $E(OCODE,1,4)="5406" D       ; Utility Systems Operator
"RTN","PRSAENT1",160,0)
 . ;. I "^30^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ;PRS*4*138
"RTN","PRSAENT1",161,0)
 . ;I $E(OCODE,1,4)="4742" S HYBRID=1     ; Utility Systems Operator ; PRS*4*138
"RTN","PRSAENT1",162,0)
 . ;I $E(OCODE,1,4)="5415" D       ; Air Conditioning Equipment Operator
"RTN","PRSAENT1",163,0)
 . ;. I "^20^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ; PRS*4*138
"RTN","PRSAENT1",164,0)
 . ;I $E(OCODE,1,4)="5309" D       ; Boiler Plant Equipment Mechanic
"RTN","PRSAENT1",165,0)
 . ;. I "^20^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ; PRS*4*138
"RTN","PRSAENT1",166,0)
 . ;I $E(OCODE,1,4)="5402" D       ; Boiler Plant Operator
"RTN","PRSAENT1",167,0)
 . ;. I "^20^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ; PRS*4*138
"RTN","PRSAENT1",168,0)
 . ;I $E(OCODE,1,4)="5703" D       ; Motor Vehicle Operator
"RTN","PRSAENT1",169,0)
 . ;. I "^60^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ; PRS*4*138
"RTN","PRSAENT1",170,0)
 . ;I $E(OCODE,1,4)="4801" S HYBRID=1     ; Lead Equipment Servicer ; PRS*4*138
"RTN","PRSAENT1",171,0)
 . ;I $E(OCODE,1,4)="5306" D       ; Air Conditioning Equipment Mechanic
"RTN","PRSAENT1",172,0)
 . ;. I "^20^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ; PRS*4*138
"RTN","PRSAENT1",173,0)
 . ;I $E(OCODE,1,4)="1046" D       ; Clerk Translator
"RTN","PRSAENT1",174,0)
 . ;. I "^02^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ; PRS*4*138
"RTN","PRSAENT1",175,0)
 . ;I $E(OCODE,1,4)="1001" D       ; Interpreter
"RTN","PRSAENT1",176,0)
 . ;. I "^11^"[(U_$E(OCODE,5,6)_U) S HYBRID=1 ; PRS*4*138
"RTN","PRSAENT1",177,0)
 ;
"RTN","PRSAENT1",178,0)
 Q HYBRID  ; Return whether or not the employee qualifies.
"RTN","PRSRL41")
0^1^B25853276^B25133729
"RTN","PRSRL41",1,0)
PRSRL41 ;HISC/JH-INDIVIDUAL EMPLOYEE LEAVE USAGE PATTERN (Continued) ;09/24/01
"RTN","PRSRL41",2,0)
 ;;4.0;PAID;**2,19,21,35,69,141**;Sep 21, 1995;Build 3
"RTN","PRSRL41",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified
"RTN","PRSRL41",4,0)
 ;
"RTN","PRSRL41",5,0)
 S ORG=$E(ORG,1,12)
"RTN","PRSRL41",6,0)
 D HDR1
"RTN","PRSRL41",7,0)
 S (PP(1),DAY(1),DATT(1))=""
"RTN","PRSRL41",8,0)
 S DATE(1)=0
"RTN","PRSRL41",9,0)
 ;
"RTN","PRSRL41",10,0)
 ;initialize leave arrays, subscripted by ("AL","SL","ML","WP"...)
"RTN","PRSRL41",11,0)
 F I=1:1 S X=$P($P(LVT,";",I+1),":") Q:X=""  S LEV(X)="",TLEV(X)=""
"RTN","PRSRL41",12,0)
 D TYPSTF^PRSRUT0
"RTN","PRSRL41",13,0)
 S INX=0
"RTN","PRSRL41",14,0)
 ;
"RTN","PRSRL41",15,0)
 ;Loop through LEAVE pattern temp global.
"RTN","PRSRL41",16,0)
 ;
"RTN","PRSRL41",17,0)
 ;debug line
"RTN","PRSRL41",18,0)
 ;W !!,"LEAVE PATTERN TEMP GLOBAL: "," ^TMP(",$J,",USE," Q
"RTN","PRSRL41",19,0)
 F I=0:0 S INX=$O(^TMP($J,"USE",INX)) Q:INX'>0  D  Q:POUT
"RTN","PRSRL41",20,0)
 .;
"RTN","PRSRL41",21,0)
 .; Loop through each pay period.
"RTN","PRSRL41",22,0)
 .  S PP=""
"RTN","PRSRL41",23,0)
 .  F I=0:0 S PP=$O(^TMP($J,"USE",INX,PP)) Q:PP=""  S SW(1)=0 D  Q:POUT
"RTN","PRSRL41",24,0)
 ..;
"RTN","PRSRL41",25,0)
 ..;  Loop through the dates within the pay period.
"RTN","PRSRL41",26,0)
 ..   S DATE=0
"RTN","PRSRL41",27,0)
 ..   F I=0:0 S DATE=$O(^TMP($J,"USE",INX,PP,DATE)) Q:DATE'>0  D  Q:POUT
"RTN","PRSRL41",28,0)
 ...;
"RTN","PRSRL41",29,0)
 ...; Loop through days of week (even though only one per loop)
"RTN","PRSRL41",30,0)
 ...    S DAY=""
"RTN","PRSRL41",31,0)
 ...    F I=0:0 S DAY=$O(^TMP($J,"USE",INX,PP,DATE,DAY)) Q:DAY=""  S TOUR=$G(^(DAY)) Q:TOUR=""  S SW(3)=0 D  Q:POUT
"RTN","PRSRL41",32,0)
 ....;
"RTN","PRSRL41",33,0)
 ....     D:($Y>(IOSL-5)) HDR Q:POUT
"RTN","PRSRL41",34,0)
 ....     S DATT=$E(DATE,4,5)_"/"_$E(DATE,6,7)_"/"_$E(DATE,2,3)
"RTN","PRSRL41",35,0)
 ....     D CHK,VLIN0:X>1
"RTN","PRSRL41",36,0)
 ....     W !,"|"
"RTN","PRSRL41",37,0)
 ....     W $S(PP'=PP(1):$E(PP,3,7),1:"")
"RTN","PRSRL41",38,0)
 ....     W ?7,"|",DAY,?12,"|"
"RTN","PRSRL41",39,0)
 ....     W $S(DATT'=DATT(1):DATT,1:""),?22,"|" D
"RTN","PRSRL41",40,0)
 .....    D:TOUR["DO" DAY
"RTN","PRSRL41",41,0)
 .....    I TOUR'["DO" F K=1:4 Q:$P(TOUR,"^",K+2)=""  S LEV=$P(TOUR,"^",K+2),%=$F(LVT,";"_LEV_":") W:SW(3) !,"|",?7,"|",?12,"|",?22,"|" D
"RTN","PRSRL41",42,0)
 ......     W:%>0 ?23,LEV
"RTN","PRSRL41",43,0)
 ......     W ?27,"|",$P(TOUR,"^",K)
"RTN","PRSRL41",44,0)
 ......     W ?35,"|",$P(TOUR,"^",K+1)
"RTN","PRSRL41",45,0)
 ......     W ?43,"|"
"RTN","PRSRL41",46,0)
 ......     S Z="^^"_DATE_"^"_$P(TOUR,"^",K)_"^"_DATE_"^"_$P(TOUR,"^",K+1) D
"RTN","PRSRL41",47,0)
 .......    S COM=$G(^TMP($J,"US",INX))
"RTN","PRSRL41",48,0)
 .......    D D^PRSRLL:$P($E(LVT,%,999),";")="ML"!(SW(2)=77),H^PRSRLL:$P($E(LVT,%,999),";")'="ML"&(SW(2)=73) W $S(SW(2)=77:$J(TIM,6),1:$J(TIM,6,2)),?($X+1),TYL,?52,"|",$S($D(COM):$E(COM,1,26),1:""),?79,"|" D
"RTN","PRSRL41",49,0)
 ........     S LEV(LEV)=LEV(LEV)+TIM,TLEV(LEV)=TLEV(LEV)+TIM S SW(1)=SW(1)+1,SW(3)=1
"RTN","PRSRL41",50,0)
 ........  Q
"RTN","PRSRL41",51,0)
 .......  Q
"RTN","PRSRL41",52,0)
 ......  Q
"RTN","PRSRL41",53,0)
 .....  S PP(1)=PP,DATT(1)=DATT,DAY(1)=DAY,DATE(1)=DATE Q
"RTN","PRSRL41",54,0)
 ....  Q
"RTN","PRSRL41",55,0)
 ...  Q
"RTN","PRSRL41",56,0)
 ..  Q
"RTN","PRSRL41",57,0)
 .  Q
"RTN","PRSRL41",58,0)
 ;
"RTN","PRSRL41",59,0)
 ; Print Totals
"RTN","PRSRL41",60,0)
 ;
"RTN","PRSRL41",61,0)
 Q:POUT
"RTN","PRSRL41",62,0)
 D:$Y>(IOSL-7) VLIN0,HDR Q:POUT
"RTN","PRSRL41",63,0)
 I SW(1) D VLIN0 W !,"|",?7,"|",?12,"|",?15,"TOTALS:" S (SW(3),TLEV)=0,X="" D
"RTN","PRSRL41",64,0)
 .  F I=0:0 S X=$O(TLEV(X)) Q:X=""  D:$Y>(IOSL-5) HDR Q:POUT  S %=$F(LVT,";"_X_":") W:SW(3)&(TLEV(X)'="") !,"|",?7,"|",?12,"|",?22,"|" S TLEV=TLEV+TLEV(X) D
"RTN","PRSRL41",65,0)
 ..  W:TLEV(X)'="" ?24,$P($E(LVT,%,999),";"),?44,$S(SW(2)=77:$J($G(TLEV(X)),6),1:$J($G(TLEV(X)),6,2)),?($X+1),TYL,?52,"|",?79,"|" S:'SW(3)&(TLEV(X)'="") SW(3)=1
"RTN","PRSRL41",66,0)
 ..  Q
"RTN","PRSRL41",67,0)
 .  Q
"RTN","PRSRL41",68,0)
 I IOSL<66 F I=$Y:1:IOSL-6 D VLIN0
"RTN","PRSRL41",69,0)
 Q
"RTN","PRSRL41",70,0)
CHK S X1=DATE,X2=DATE(1) D ^%DTC Q
"RTN","PRSRL41",71,0)
DAY W TOUR,?27,"|",?35,"|",?43,"|",?52,"|",?79,"|" S SW(1)=SW(1)+1 Q
"RTN","PRSRL41",72,0)
HDR S CODE="L005",FOOT="VA TIME & ATTENDANCE SYSTEM" D VLIDSH0,FOOT2^PRSRUT0
"RTN","PRSRL41",73,0)
 I $E(IOST)="C"!($G(IOT)="VTRM") R !,"Press Return/Enter to continue. ",II:DTIME S:II="^" POUT=1 Q:POUT
"RTN","PRSRL41",74,0)
 Q:POUT
"RTN","PRSRL41",75,0)
HDR1 ; Main header for report contains:
"RTN","PRSRL41",76,0)
 ; Title, ALL/ONLY, date, date range, employee, cost center, T&L unit
"RTN","PRSRL41",77,0)
 ;
"RTN","PRSRL41",78,0)
 ; Subheader according to type of report user selected
"RTN","PRSRL41",79,0)
 S SUBHDR=$S(ALOO="A":"All Leave Taken With Days Off",1:"Every Occurrence of Leave, ONLY Before And After Days Off")
"RTN","PRSRL41",80,0)
 W @IOF
"RTN","PRSRL41",81,0)
 W !?29,^TMP($J,"USE"),?66
"RTN","PRSRL41",82,0)
 W "DATE: ",DAT,!?22,"from: ",XX," to ",YY
"RTN","PRSRL41",83,0)
 W !,?(80-$L(SUBHDR))\2,SUBHDR ;tab depending on length of subheader
"RTN","PRSRL41",84,0)
 W !?25,"for: ",NAM," - "
"RTN","PRSRL41",85,0)
 W ORG,!,?33
"RTN","PRSRL41",86,0)
 W "T&L Unit:  ",TLE
"RTN","PRSRL41",87,0)
 D VLIDSH0
"RTN","PRSRL41",88,0)
 W !,"|","P/P",?7,"|","DAY",?12,"|","DATE",?22,"|","TYPE",?27,"|","FROM",?35,"|","TO",?43,"|","LENGTH",?52,"|","COMMENT",?79,"|" D VLIDSH0 Q
"RTN","PRSRL41",89,0)
VLIDSH0 W !,"|------|----|---------|----|-------|-------|--------|--------------------------|" Q
"RTN","PRSRL41",90,0)
VLIN0 W !,"|",?7,"|",?12,"|",?22,"|",?27,"|",?35,"|",?43,"|",?52,"|",?79,"|" Q
"RTN","PRSRL41",91,0)
ASKDSPLY() ; Ask user if they want to see all leave, including days off and
"RTN","PRSRL41",92,0)
 ; Holidays or if they want to see only leave taken immediately
"RTN","PRSRL41",93,0)
 ; before or after Holidays and days off.
"RTN","PRSRL41",94,0)
 N DIR
"RTN","PRSRL41",95,0)
 S RTN=""
"RTN","PRSRL41",96,0)
 S DIR(0)="SM^A:All leave;O:Only around days off & holidays"
"RTN","PRSRL41",97,0)
 S DIR("A")="     Choose A or O "
"RTN","PRSRL41",98,0)
 S DIR("A",1)="You may display ALL leave taken within the date range"
"RTN","PRSRL41",99,0)
 S DIR("A",2)="or ONLY leave taken the day before and after holidays"
"RTN","PRSRL41",100,0)
 S DIR("A",3)="and scheduled days off."
"RTN","PRSRL41",101,0)
 S DIR("A",4)=""
"RTN","PRSRL41",102,0)
 S DIR("?",1)="If you select ONLY leave around days off and holidays,"
"RTN","PRSRL41",103,0)
 S DIR("?",2)="then for example, when an employee with weekends off has"
"RTN","PRSRL41",104,0)
 S DIR("?",3)="taken annual leave for the entire week (Mon-Fri), only"
"RTN","PRSRL41",105,0)
 S DIR("?",4)="the leave for Monday and Friday will be displayed."
"RTN","PRSRL41",106,0)
 S DIR("?")="Selecting ALL, will display all leave taken."
"RTN","PRSRL41",107,0)
 D ^DIR S RTN=Y
"RTN","PRSRL41",108,0)
 Q RTN
"VER")
8.0^22.0
"BLD",9490,6)
^132
**END**
**END**

