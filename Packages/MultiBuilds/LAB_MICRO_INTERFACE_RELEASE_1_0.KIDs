KIDS Distribution saved on Dec 20, 2016@11:55:47
LAB MICRO INTERFACE RELEASE 1.0
**KIDS**:LA*5.2*90^LR*5.2*474^

**INSTALL NAME**
LA*5.2*90
"BLD",9415,0)
LA*5.2*90^AUTOMATED LAB INSTRUMENTS^0^3161220^y
"BLD",9415,1,0)
^^405^405^3161220^
"BLD",9415,1,1,0)
The build for this patch is distributed as part of a multi-package build 
"BLD",9415,1,2,0)
that contains LR*5.2*474 and LA*5.2*90 and contains functionality that 
"BLD",9415,1,3,0)
will allow Microbiology instrumentation to utilize the Lab Universal
"BLD",9415,1,4,0)
Interface. 
"BLD",9415,1,5,0)
 
"BLD",9415,1,6,0)
By utilizing the Universal interface and middleware sites will be able to 
"BLD",9415,1,7,0)
interface microbiology devices to a UI standard interface. New
"BLD",9415,1,8,0)
functionality will be applied that will allow for a "MI" subscripted test
"BLD",9415,1,9,0)
to be added to the Auto Instrument file. There will also be enhanced
"BLD",9415,1,10,0)
result processing and verify/release functions (see LR*5.2*474 patch
"BLD",9415,1,11,0)
descriptions for additional details).
"BLD",9415,1,12,0)
 
"BLD",9415,1,13,0)
This patch is distributed in support of the VistA Laboratory Enhancement
"BLD",9415,1,14,0)
(VLE) Microbiology/Data Innovations interface utilizing the Laboratory
"BLD",9415,1,15,0)
Universal Interface.
"BLD",9415,1,16,0)
 
"BLD",9415,1,17,0)
The patch contains a modification to the AUTO INSTRUMENT (#62.4) file 
"BLD",9415,1,18,0)
that will change the name of the "CHEM TESTS" (#30) field to "LABORATORY
"BLD",9415,1,19,0)
TESTS" and modify the input screen to allow "MI" subscripted tests to be
"BLD",9415,1,20,0)
added to an Auto Instrument entry. The trigger on the TEST (#.01) field
"BLD",9415,1,21,0)
was also modified so that only tests with a value in the LOCATION (DATA
"BLD",9415,1,22,0)
NAME) (#5) will set the ROUTINE STORAGE (#11) field.
"BLD",9415,1,23,0)
 
"BLD",9415,1,24,0)
Additional Information:
"BLD",9415,1,25,0)
-----------------------
"BLD",9415,1,26,0)
This patch contains an enhancement to the antibiotic susceptibility 
"BLD",9415,1,27,0)
result processing to accommodate the need for laboratories to 
"BLD",9415,1,28,0)
report/document variations in susceptibility testing related to 
"BLD",9415,1,29,0)
differences between in vitro susceptibility testing and in vivo action. 
"BLD",9415,1,30,0)
An example is extended-spectrum_Beta-lactamases (ESBL).
"BLD",9415,1,31,0)
 
"BLD",9415,1,32,0)
Susceptibility results received as coded entries can be from the SNOMED 
"BLD",9415,1,33,0)
CT code system or a site-designated local code (L).
"BLD",9415,1,34,0)
 
"BLD",9415,1,35,0)
The interface supports the following SNOMED CT codes to report 
"BLD",9415,1,36,0)
susceptibility to antimicrobial agents.
"BLD",9415,1,37,0)
 
"BLD",9415,1,38,0)
131196009    susceptible
"BLD",9415,1,39,0)
260357007    moderately susceptible
"BLD",9415,1,40,0)
264841006    intermediately susceptible
"BLD",9415,1,41,0)
30714006     resistant
"BLD",9415,1,42,0)
10828004     positive
"BLD",9415,1,43,0)
260385009    negative
"BLD",9415,1,44,0)
 
"BLD",9415,1,45,0)
Local codes in the role of answers can be entered on an interface 
"BLD",9415,1,46,0)
specific basis using the option Add/Edit Local Identifier [LA7V 62.47 
"BLD",9415,1,47,0)
LOCAL IDENTIFIER]
"BLD",9415,1,48,0)
 
"BLD",9415,1,49,0)
An example of reporting ESBL status is the following HL7 OBX segment 
"BLD",9415,1,50,0)
fragment.
"BLD",9415,1,51,0)
 
"BLD",9415,1,52,0)
OBX|1|CWE|6984-9^ESBL:SUSC:PT:ISLT:ORDQN:AGAR 
"BLD",9415,1,53,0)
DIFFUSION^LN^^^^2.19^^ESBL||ESBL^ESBL^L^^^^20160721^^+|||+
"BLD",9415,1,54,0)
 
"BLD",9415,1,55,0)
Routines related to this enhancement are:
"BLD",9415,1,56,0)
LA7VIN2A
"BLD",9415,1,57,0)
LA7VIN7
"BLD",9415,1,58,0)
LA7VIN7A
"BLD",9415,1,59,0)
LA7VIN7B
"BLD",9415,1,60,0)
LA7VHLU6
"BLD",9415,1,61,0)
 
"BLD",9415,1,62,0)
Blood Bank Review:
"BLD",9415,1,63,0)
==================
"BLD",9415,1,64,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LA*5.2*90 does not 
"BLD",9415,1,65,0)
contain any changes to the VISTA BLOOD BANK Software as defined by ProPath
"BLD",9415,1,66,0)
standard titled: BBM Team Review of VistA Patches.
"BLD",9415,1,67,0)
 
"BLD",9415,1,68,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LA*5.2*90 does not 
"BLD",9415,1,69,0)
alter or modify any software design safeguards or safety critical elements
"BLD",9415,1,70,0)
functions.
"BLD",9415,1,71,0)
 
"BLD",9415,1,72,0)
RISK ANALYSIS: Changes made by patch LA*5.2*90 have no effect on Blood 
"BLD",9415,1,73,0)
Bank software functionality, therefore RISK is none.
"BLD",9415,1,74,0)
 
"BLD",9415,1,75,0)
VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes 
"BLD",9415,1,76,0)
made, no specific validation requirements exist as a result of
"BLD",9415,1,77,0)
installation of this patch.
"BLD",9415,1,78,0)
 
"BLD",9415,1,79,0)
 
"BLD",9415,1,80,0)
Patch Components:
"BLD",9415,1,81,0)
-----------------
"BLD",9415,1,82,0)
None
"BLD",9415,1,83,0)
 
"BLD",9415,1,84,0)
Files & Fields Associated:
"BLD",9415,1,85,0)
 
"BLD",9415,1,86,0)
File Name (Number)         Field Name (Number)     New/Modified/Deleted
"BLD",9415,1,87,0)
------------------         -------------------     --------------------
"BLD",9415,1,88,0)
AUTO INSTRUMENT (#62.4)    LABORATORY TESTS (#30   Modified
"BLD",9415,1,89,0)
 
"BLD",9415,1,90,0)
 
"BLD",9415,1,91,0)
Forms Associated:
"BLD",9415,1,92,0)
 
"BLD",9415,1,93,0)
Form Name                    File #               New/Modified/Deleted
"BLD",9415,1,94,0)
---------                    ------               --------------------
"BLD",9415,1,95,0)
N/A
"BLD",9415,1,96,0)
 
"BLD",9415,1,97,0)
 
"BLD",9415,1,98,0)
Mail Groups Associated:
"BLD",9415,1,99,0)
 
"BLD",9415,1,100,0)
Mail Group Name          New/Modified/Deleted
"BLD",9415,1,101,0)
---------------          --------------------
"BLD",9415,1,102,0)
N/A
"BLD",9415,1,103,0)
 
"BLD",9415,1,104,0)
 
"BLD",9415,1,105,0)
Options Associated:
"BLD",9415,1,106,0)
 
"BLD",9415,1,107,0)
Option Name            Type               New/Modified/Deleted
"BLD",9415,1,108,0)
-----------            ----               -------------------- 
"BLD",9415,1,109,0)
N/A
"BLD",9415,1,110,0)
 
"BLD",9415,1,111,0)
 
"BLD",9415,1,112,0)
Protocols Associated:
"BLD",9415,1,113,0)
 
"BLD",9415,1,114,0)
Protocol Name       New/Modified/Deleted
"BLD",9415,1,115,0)
-------------       -------------------- 
"BLD",9415,1,116,0)
N/A
"BLD",9415,1,117,0)
 
"BLD",9415,1,118,0)
 
"BLD",9415,1,119,0)
Security Keys Associated:
"BLD",9415,1,120,0)
 
"BLD",9415,1,121,0)
Security Key Name
"BLD",9415,1,122,0)
-----------------
"BLD",9415,1,123,0)
N/A
"BLD",9415,1,124,0)
 
"BLD",9415,1,125,0)
 
"BLD",9415,1,126,0)
Templates Associated:
"BLD",9415,1,127,0)
 
"BLD",9415,1,128,0)
Template Name      Type      File Name (Number)  New/Modified/Deleted 
"BLD",9415,1,129,0)
-------------      ----      ------------------  --------------------
"BLD",9415,1,130,0)
N/A
"BLD",9415,1,131,0)
 
"BLD",9415,1,132,0)
 
"BLD",9415,1,133,0)
 
"BLD",9415,1,134,0)
Below shows the Data Dictionary as modified with the installation of this
"BLD",9415,1,135,0)
Patch for the Auto Instrument File. 
"BLD",9415,1,136,0)
 
"BLD",9415,1,137,0)
STANDARD DATA DICTIONARY #62.41 -- LABORATORY TESTS SUB-FILE   
"BLD",9415,1,138,0)
                                               JUN 8,2016@12:37:17  PAGE 1
"BLD",9415,1,139,0)
STORED IN ^LAB(62.4,D0,3,   SITE: TEST.CHEYENNE.domain.ext   UCI: 
"BLD",9415,1,140,0)
VISTA,ROU
"BLD",9415,1,141,0)
 
"BLD",9415,1,142,0)
DATA          NAME                  GLOBAL        DATA
"BLD",9415,1,143,0)
ELEMENT       TITLE                 LOCATION      TYPE
"BLD",9415,1,144,0)
--------------------------------------------------------------------------
"BLD",9415,1,145,0)
 
"BLD",9415,1,146,0)
62.41,.01     TEST                   0;1 POINTER TO LABORATORY TEST FILE (
"BLD",9415,1,147,0)
                                #60) (Required) (Multiply asked)
"BLD",9415,1,148,0)
 
"BLD",9415,1,149,0)
              INPUT TRANSFORM:  S DIC("S")="I $D(^LAB(60,Y,.2))!(""MI""[$P
"BLD",9415,1,150,0)
                                (^LAB(60,Y,0),U,4))" D ^DIC K DIC S DIC=DI
"BLD",9415,1,151,0)
                                E,X=+Y K:Y<0 X
"BLD",9415,1,152,0)
              LAST EDITED:      JUN 07, 2016 
"BLD",9415,1,153,0)
              HELP-PROMPT:      Enter the name of a test for which the 
"BLD",9415,1,154,0)
                                instrument will send data. 
"BLD",9415,1,155,0)
              DESCRIPTION:      This contains the test names for this
"BLD",9415,1,156,0)
                                instrument.  
"BLD",9415,1,157,0)
 
"BLD",9415,1,158,0)
              SCREEN:           S DIC("S")="I $D(^LAB(60,Y,.2))!(""MI""[$P
"BLD",9415,1,159,0)
                                (^LAB(60,Y,0),U,4))"
"BLD",9415,1,160,0)
              EXPLANATION:      Allow CH atomic test or Microbiology subsc
"BLD",9415,1,161,0)
                                ript test
"BLD",9415,1,162,0)
              FIELD INDEX:      AD (#867)    MUMPS    IR    ACTION
"BLD",9415,1,163,0)
                  Short Descr:  Set "ROUTINE STORAGE" field with CH
"BLD",9415,1,164,0)
                                subscripted test data name number
"BLD",9415,1,165,0)
                  Description:  This trigger cross reference will only
"BLD",9415,1,166,0)
                                populate the "ROUTINE STORAGE" field with
"BLD",9415,1,167,0)
                                63.04 data location file number for CH
"BLD",9415,1,168,0)
                                (Chemistry) atomic subscripted test having
"BLD",9415,1,169,0)
                                data name field populated. See example
"BLD",9415,1,170,0)
                                below.  MI (Microbiology) subscripted test
"BLD",9415,1,171,0)
                                have no data name, therefore the "AUTO 
"BLD",9415,1,172,0)
                                INSTRUMENT" file # 62.4, "TEST" field #30,
"BLD",9415,1,173,0)
                                (#62.41), subfile #62.41, "ROUTINE
"BLD",9415,1,174,0)
                                STORAGE" file #11 will NOT be set.  
"BLD",9415,1,175,0)
                                 
"BLD",9415,1,176,0)
                                EXAMPLE: CH subscripted test having DATA
"BLD",9415,1,177,0)
                                NAME will populate the ROUTINE STORAGE 
"BLD",9415,1,178,0)
                                field with: TV(#,1) MI subscripted test
"BLD",9415,1,179,0)
                                will NOT set the ROUTINE STORAGE field.  
"BLD",9415,1,180,0)
                    Set Logic:  S $P(^LAB(62.4,DA(1),3,DA,1),U)="TV("_X2(3
"BLD",9415,1,181,0)
                                )_",1)"
"BLD",9415,1,182,0)
                     Set Cond:  S X=(X2(2)="CH")&(X2(3)'="")
"BLD",9415,1,183,0)
                   Kill Logic:  S $P(^LAB(62.4,DA(1),3,DA,1),U)=""
"BLD",9415,1,184,0)
                         X(1):  TEST  (62.41,.01)  (Subscr 1)  (Len 10)
"BLD",9415,1,185,0)
                                (forwards)
"BLD",9415,1,186,0)
                                  Transform (Display):   
"BLD",9415,1,187,0)
                         X(2):  Computed Code: S X=$P($G(^LAB(60,X(1),0)),
"BLD",9415,1,188,0)
                                U,4)
"BLD",9415,1,189,0)
                                  (Subscr 2)
"BLD",9415,1,190,0)
                         X(3):  Computed Code: S X=$P($G(^LAB(60,X(1),.2))
"BLD",9415,1,191,0)
                                ,U)
"BLD",9415,1,192,0)
                                  (Subscr 3)
"BLD",9415,1,193,0)
 
"BLD",9415,1,194,0)
 
"BLD",9415,1,195,0)
 
"BLD",9415,1,196,0)
      FILES POINTED TO                      FIELDS
"BLD",9415,1,197,0)
 
"BLD",9415,1,198,0)
LABORATORY TEST (#60)             TEST (#.01)
"BLD",9415,1,199,0)
 
"BLD",9415,1,200,0)
New Service Requests (NSRs):
"BLD",9415,1,201,0)
----------------------------  
"BLD",9415,1,202,0)
NSR #20131213
"BLD",9415,1,203,0)
Carbapenem Resistant Enterobacteriaceae (CRE) Naming Conventions
"BLD",9415,1,204,0)
Electronic Interfacing of Automated Identification and Susceptibility 
"BLD",9415,1,205,0)
Testing Instruments
"BLD",9415,1,206,0)
 
"BLD",9415,1,207,0)
NSR #20140801
"BLD",9415,1,208,0)
Tracking Multi-Drug Resistant Organisms
"BLD",9415,1,209,0)
 
"BLD",9415,1,210,0)
 
"BLD",9415,1,211,0)
Patient Safety Issues (PSIs):
"BLD",9415,1,212,0)
-----------------------------
"BLD",9415,1,213,0)
N/A
"BLD",9415,1,214,0)
 
"BLD",9415,1,215,0)
 
"BLD",9415,1,216,0)
Remedy Ticket(s) & Overview:
"BLD",9415,1,217,0)
----------------------------
"BLD",9415,1,218,0)
 
"BLD",9415,1,219,0)
N/A
"BLD",9415,1,220,0)
 
"BLD",9415,1,221,0)
Problem:
"BLD",9415,1,222,0)
-------
"BLD",9415,1,223,0)
N/A
"BLD",9415,1,224,0)
 
"BLD",9415,1,225,0)
Resolution:
"BLD",9415,1,226,0)
----------
"BLD",9415,1,227,0)
N/A
"BLD",9415,1,228,0)
 
"BLD",9415,1,229,0)
Test Sites:
"BLD",9415,1,230,0)
----------
"BLD",9415,1,231,0)
James A. Haley Veterans Hospital
"BLD",9415,1,232,0)
Iowa City VA Healthcare System
"BLD",9415,1,233,0)
Lexington VA Medical Center
"BLD",9415,1,234,0)
 
"BLD",9415,1,235,0)
Software and Documentation Retrieval Information 
"BLD",9415,1,236,0)
================================================
"BLD",9415,1,237,0)
VistA Laboratory patch LR*5.2*474 software is distributed by Host File,
"BLD",9415,1,238,0)
along with LA*5.2*90.  Software is available on the SOFTWARE.DIR directory
"BLD",9415,1,239,0)
at one of the following Office of Information (OI) Field Offices.  The
"BLD",9415,1,240,0)
preferred method is to retrieve the file using Secure File Transfer
"BLD",9415,1,241,0)
Protocol (SFTP) from download.vista.domain.ext, which transmits files from
"BLD",9415,1,242,0)
the first available SFTP server.
"BLD",9415,1,243,0)
        Albany                     ftp.fo-albany.domain.ext 
"BLD",9415,1,244,0)
        Hines                      ftp.fo-hines.domain.ext 
"BLD",9415,1,245,0)
        Salt Lake City             ftp.fo-slc.domain.ext 
"BLD",9415,1,246,0)
                                   
"BLD",9415,1,247,0)
File Name                   Contents               Retrieval Format 
"BLD",9415,1,248,0)
------------------          --------------------   ----------------
"BLD",9415,1,249,0)
LAB_MICRO_INTERFACE_        Host File containing   ASCII
"BLD",9415,1,250,0)
RELEASE_1_0.KID             KIDS software distribution 
"BLD",9415,1,251,0)
 
"BLD",9415,1,252,0)
LAB_MICRO_INTERFACE_RELEASE_1_0_DOCS.ZIP, which contains both .pdf and 
"BLD",9415,1,253,0)
.docx formatted files of the following documents. Retrieval format is 
"BLD",9415,1,254,0)
BINARY:
"BLD",9415,1,255,0)
 
"BLD",9415,1,256,0)
       VLE Micro_Lab_Micro_Interface_Release_1.0_Technical_Manual
"BLD",9415,1,257,0)
       VLE Micro_Lab_Micro_Interface_Release_1.0_User_Guide
"BLD",9415,1,258,0)
       VLE Micro_Deployment_Installation_Roll Back_Back Out_Guide
"BLD",9415,1,259,0)
 
"BLD",9415,1,260,0)
 
"BLD",9415,1,261,0)
The VistA Documentation Library (VDL) web site will also contain the 
"BLD",9415,1,262,0)
above referenced documents. This website is usually updated within 1-3
"BLD",9415,1,263,0)
days of the patch release date. The VDL web address for Laboratory
"BLD",9415,1,264,0)
Universal Interface user documentation is:
"BLD",9415,1,265,0)
http://www.domain.ext/vdl/application.asp?appid=120
"BLD",9415,1,266,0)
 
"BLD",9415,1,267,0)
Note: These previously released documents contain configuration and
"BLD",9415,1,268,0)
mapping information that is useful to the implementation of the Universal
"BLD",9415,1,269,0)
Interface for Microbiology tests.
"BLD",9415,1,270,0)
------------------------------------------------------------------------
"BLD",9415,1,271,0)
LEDI IV Installation Guide     LAB_LEDI_IV_IG.PDF            binary
"BLD",9415,1,272,0)
LEDI IV User Manual            LAB_LEDI_IV_UM.PDF            binary
"BLD",9415,1,273,0)
LEDI IV Update AP/MICRO        LEDI_IV__AP__MICRO_           binary
"BLD",9415,1,274,0)
Configuration Guide            CONFIGURATION_GUIDE.PDF       binary
"BLD",9415,1,275,0)
     
"BLD",9415,1,276,0)
Patch Installation:
"BLD",9415,1,277,0)
 
"BLD",9415,1,278,0)
 
"BLD",9415,1,279,0)
Pre/Post Installation Overview:
"BLD",9415,1,280,0)
-------------------------------
"BLD",9415,1,281,0)
This patch install must be coordinated with the Laboratory ADPAC to 
"BLD",9415,1,282,0)
ensure that all Lab Interface related activities are halted.
"BLD",9415,1,283,0)
 His 
"BLD",9415,1,284,0)
 
"BLD",9415,1,285,0)
Pre-Installation Instructions:  
"BLD",9415,1,286,0)
------------------------------
"BLD",9415,1,287,0)
Ensure that all Lab Interface activity has been halted !!
"BLD",9415,1,288,0)
 
"BLD",9415,1,289,0)
This would include:
"BLD",9415,1,290,0)
-Editing of an Auto Instrument file entry, 
"BLD",9415,1,291,0)
-Turn off the Auto Downloading process to prevent the building and 
"BLD",9415,1,292,0)
downloading of a Load/Worklist to the Instrument Manager.
"BLD",9415,1,293,0)
-Shut down all LA7UI logical links and any other HL7 process (HLZTCP or 
"BLD",9415,1,294,0)
HLLP processes) to prevent the processing of result messages from the IM.
"BLD",9415,1,295,0)
 
"BLD",9415,1,296,0)
This patch may be installed with users on the system as long as the above 
"BLD",9415,1,297,0)
process controls have been followed.
"BLD",9415,1,298,0)
 
"BLD",9415,1,299,0)
 
"BLD",9415,1,300,0)
Installation Instructions:
"BLD",9415,1,301,0)
--------------------------
"BLD",9415,1,302,0)
This patch may be installed with users on the system although it is 
"BLD",9415,1,303,0)
recommended that it be installed during non-peak hours to minimize 
"BLD",9415,1,304,0)
potential disruption to users.  This patch should take less than 5 
"BLD",9415,1,305,0)
minutes to install.
"BLD",9415,1,306,0)
 
"BLD",9415,1,307,0)
 
"BLD",9415,1,308,0)
This installation will modify the CHEM TESTS field (#30) in the AUTO 
"BLD",9415,1,309,0)
INSTRUMENT file (#62.4) by changing the following:
"BLD",9415,1,310,0)
 
"BLD",9415,1,311,0)
  The name of the field will be changed to LABORATORY TESTS
"BLD",9415,1,312,0)
  The screen on the field will now allow "MI" subscripted tests
"BLD",9415,1,313,0)
  The ROUTINE STORAGE (#11) value set by the trigger on the TESTS 
"BLD",9415,1,314,0)
  (#.01) field will not happen for "MI" subscripted tests
"BLD",9415,1,315,0)
  The original ROUTINE STORAGE trigger code has been replace with a new 
"BLD",9415,1,316,0)
  style AD cross-reference.
"BLD",9415,1,317,0)
   
"BLD",9415,1,318,0)
1.      DOWNLOAD HOST KIDS FILE 
"BLD",9415,1,319,0)
        ----------------------
"BLD",9415,1,320,0)
        Download the KIDS file LAB_MICRO_INTERFACE_RELEASE_1_0.KID from 
"BLD",9415,1,321,0)
        the ANONYMOUS.SOFTWARE directory of Albany, Hines, or the Salt
"BLD",9415,1,322,0)
        Lake OIFO to the appropriate directory on your system.
"BLD",9415,1,323,0)
 
"BLD",9415,1,324,0)
2.      LOAD DISTRIBUTION 
"BLD",9415,1,325,0)
        -----------------
"BLD",9415,1,326,0)
        Use the 'LOAD A DISTRIBUTION' option on the KIDS 
"BLD",9415,1,327,0)
        INSTALLATION menu, and enter:  the directory onto which you 
"BLD",9415,1,328,0)
        have downloaded the host file, followed by 
"BLD",9415,1,329,0)
        LAB_MICRO_INTERFACE_RELEASE_1_0.KID, the host file name. 
"BLD",9415,1,330,0)
 
"BLD",9415,1,331,0)
3.      START UP KIDS 
"BLD",9415,1,332,0)
        -------------
"BLD",9415,1,333,0)
        Start up the Kernel Installation and Distribution System Menu 
"BLD",9415,1,334,0)
        [XPD MAIN]:
"BLD",9415,1,335,0)
        Edits and Distribution ...  
"BLD",9415,1,336,0)
        Utilities ...  
"BLD",9415,1,337,0)
        Installation ...  
"BLD",9415,1,338,0)
 
"BLD",9415,1,339,0)
        Select Kernel Installation & Distribution System Option: 
"BLD",9415,1,340,0)
        Installation 
"BLD",9415,1,341,0)
        -------------
"BLD",9415,1,342,0)
 
"BLD",9415,1,343,0)
            Load a Distribution 
"BLD",9415,1,344,0)
            Print Transport Global 
"BLD",9415,1,345,0)
            Compare Transport Global to Current System 
"BLD",9415,1,346,0)
            Verify Checksums in Transport Global 
"BLD",9415,1,347,0)
            Install Package(s) 
"BLD",9415,1,348,0)
            Restart Install of Package(s) 
"BLD",9415,1,349,0)
            Unload a Distribution 
"BLD",9415,1,350,0)
            Backup a Transport Global 
"BLD",9415,1,351,0)
 
"BLD",9415,1,352,0)
4.      Select Installation Option: 
"BLD",9415,1,353,0)
     ---------------------------
"BLD",9415,1,354,0)
   
"BLD",9415,1,355,0)
   a.   Use the Load a Distribution and select Host File: 
"BLD",9415,1,356,0)
        LAB_MICRO_INTERFACE_RELEASE_1_0.KID
"BLD",9415,1,357,0)
        b.  Backup a Transport Global - This option will create a backup
"BLD",9415,1,358,0)
        message of any routines exported with this patch. It will not
"BLD",9415,1,359,0)
        backup any other changes such as DDs or templates.
"BLD",9415,1,360,0)
        c.  Compare Transport Global to Current System - This option will
"BLD",9415,1,361,0)
        allow you to view all changes that will be made when this patch
"BLD",9415,1,362,0)
        is installed.  It compares all components of this patch
"BLD",9415,1,363,0)
        (routines, DDs, templates, etc.).
"BLD",9415,1,364,0)
        d.  Verify Checksums in Transport Global - This option will allow
"BLD",9415,1,365,0)
        you to ensure the integrity of the routines that are in the
"BLD",9415,1,366,0)
        transport global.
"BLD",9415,1,367,0)
     
"BLD",9415,1,368,0)
 
"BLD",9415,1,369,0)
5.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
"BLD",9415,1,370,0)
    Install? NO//'     
"BLD",9415,1,371,0)
    Respond: NO
"BLD",9415,1,372,0)
 
"BLD",9415,1,373,0)
6.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
"BLD",9415,1,374,0)
    NO//'
"BLD",9415,1,375,0)
    Respond: NO
"BLD",9415,1,376,0)
 
"BLD",9415,1,377,0)
7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
"BLD",9415,1,378,0)
    and Protocols? NO//' 
"BLD",9415,1,379,0)
    Respond: NO
"BLD",9415,1,380,0)
 
"BLD",9415,1,381,0)
8.  If prompted 'Delay Install (Minutes): (0 - 60): 0//' 
"BLD",9415,1,382,0)
    Respond: 0.
"BLD",9415,1,383,0)
 
"BLD",9415,1,384,0)
 
"BLD",9415,1,385,0)
Post-Installation Instructions:
"BLD",9415,1,386,0)
-------------------------------
"BLD",9415,1,387,0)
Below is an example of how an micro instrument might be defined in the 
"BLD",9415,1,388,0)
Auto Instrument file. Refer to the Install. We recommend that the Install 
"BLD",9415,1,389,0)
and User manuals be followed for more completely documented 
"BLD",9415,1,390,0)
instructions. 
"BLD",9415,1,391,0)
 
"BLD",9415,1,392,0)
AUTO INSTRUMENT (#62.4:
"BLD",9415,1,393,0)
 
"BLD",9415,1,394,0)
NUMBER: 3                               NAME: BAC-TEC
"BLD",9415,1,395,0)
  LOAD/WORK LIST: BAC-TEC
"BLD",9415,1,396,0)
  ENTRY for LAGEN ROUTINE: Accession cross-reference
"BLD",9415,1,397,0)
  CROSS LINKED BY: IDE                  MESSAGE CONFIGURATION: LA7UI2
"BLD",9415,1,398,0)
  METHOD: BACTEC                        DEFAULT ACCESSION AREA: BLOOD 
"BLD",9415,1,399,0)
CULTURE
"BLD",9415,1,400,0)
  OVERLAY DATA: YES                     STORE REMARKS: YES
"BLD",9415,1,401,0)
NUMBER: 1                               TEST: BLOOD CULTURE
"BLD",9415,1,402,0)
  UI TEST CODE: BLD CX                  ACCESSION AREA: MICROBIOLOGY
"BLD",9415,1,403,0)
  FILE BUILD ENTRY: EN                  FILE BUILD ROUTINE: LA7UID
"BLD",9415,1,404,0)
  AUTO DOWNLOAD: NO                     WKLD METHOD: BACT/ALERT
"BLD",9415,1,405,0)
  WKLD CODE METHOD NAME: BACT/ALERT     WKLD CODE SUFFIX: .7086
"BLD",9415,4,0)
^9.64PA^62.4^1
"BLD",9415,4,62.4,0)
62.4
"BLD",9415,4,62.4,2,0)
^9.641^62.41^2
"BLD",9415,4,62.4,2,62.4,0)
AUTO INSTRUMENT  (File-top level)
"BLD",9415,4,62.4,2,62.4,1,0)
^9.6411^^
"BLD",9415,4,62.4,2,62.41,0)
LABORATORY TESTS  (sub-file)
"BLD",9415,4,62.4,2,62.41,1,0)
^9.6411^11^2
"BLD",9415,4,62.4,2,62.41,1,.01,0)
TEST
"BLD",9415,4,62.4,2,62.41,1,11,0)
ROUTINE STORAGE
"BLD",9415,4,62.4,222)
y^n^p^^^^n^^n
"BLD",9415,4,62.4,224)
 
"BLD",9415,4,"APDD",62.4,62.4)
 
"BLD",9415,4,"APDD",62.4,62.41)
 
"BLD",9415,4,"APDD",62.4,62.41,.01)
 
"BLD",9415,4,"APDD",62.4,62.41,11)
 
"BLD",9415,4,"B",62.4,62.4)
 
"BLD",9415,6)
2^
"BLD",9415,6.3)
17
"BLD",9415,"ABPKG")
n
"BLD",9415,"INI")
PRE^LA90A
"BLD",9415,"INID")
n^n^n
"BLD",9415,"INIT")
POST^LA90A
"BLD",9415,"KRN",0)
^9.67PA^779.2^20
"BLD",9415,"KRN",.4,0)
.4
"BLD",9415,"KRN",.401,0)
.401
"BLD",9415,"KRN",.402,0)
.402
"BLD",9415,"KRN",.403,0)
.403
"BLD",9415,"KRN",.5,0)
.5
"BLD",9415,"KRN",.84,0)
.84
"BLD",9415,"KRN",3.6,0)
3.6
"BLD",9415,"KRN",3.8,0)
3.8
"BLD",9415,"KRN",9.2,0)
9.2
"BLD",9415,"KRN",9.8,0)
9.8
"BLD",9415,"KRN",9.8,"NM",0)
^9.68A^6^5
"BLD",9415,"KRN",9.8,"NM",2,0)
LA7VHLU6^^0^B58736241
"BLD",9415,"KRN",9.8,"NM",3,0)
LA7VIN7A^^0^B61187996
"BLD",9415,"KRN",9.8,"NM",4,0)
LA7VIN7B^^0^B65792075
"BLD",9415,"KRN",9.8,"NM",5,0)
LA7VIN7^^0^B83943151
"BLD",9415,"KRN",9.8,"NM",6,0)
LA7VIN2A^^0^B34485992
"BLD",9415,"KRN",9.8,"NM","B","LA7VHLU6",2)

"BLD",9415,"KRN",9.8,"NM","B","LA7VIN2A",6)

"BLD",9415,"KRN",9.8,"NM","B","LA7VIN7",5)

"BLD",9415,"KRN",9.8,"NM","B","LA7VIN7A",3)

"BLD",9415,"KRN",9.8,"NM","B","LA7VIN7B",4)

"BLD",9415,"KRN",19,0)
19
"BLD",9415,"KRN",19.1,0)
19.1
"BLD",9415,"KRN",101,0)
101
"BLD",9415,"KRN",409.61,0)
409.61
"BLD",9415,"KRN",771,0)
771
"BLD",9415,"KRN",779.2,0)
779.2
"BLD",9415,"KRN",870,0)
870
"BLD",9415,"KRN",8989.51,0)
8989.51
"BLD",9415,"KRN",8989.52,0)
8989.52
"BLD",9415,"KRN",8994,0)
8994
"BLD",9415,"KRN","B",.4,.4)
 
"BLD",9415,"KRN","B",.401,.401)
 
"BLD",9415,"KRN","B",.402,.402)
 
"BLD",9415,"KRN","B",.403,.403)
 
"BLD",9415,"KRN","B",.5,.5)
 
"BLD",9415,"KRN","B",.84,.84)
 
"BLD",9415,"KRN","B",3.6,3.6)
 
"BLD",9415,"KRN","B",3.8,3.8)
 
"BLD",9415,"KRN","B",9.2,9.2)
 
"BLD",9415,"KRN","B",9.8,9.8)
 
"BLD",9415,"KRN","B",19,19)
 
"BLD",9415,"KRN","B",19.1,19.1)
 
"BLD",9415,"KRN","B",101,101)
 
"BLD",9415,"KRN","B",409.61,409.61)
 
"BLD",9415,"KRN","B",771,771)
 
"BLD",9415,"KRN","B",779.2,779.2)
 
"BLD",9415,"KRN","B",870,870)
 
"BLD",9415,"KRN","B",8989.51,8989.51)
 
"BLD",9415,"KRN","B",8989.52,8989.52)
 
"BLD",9415,"KRN","B",8994,8994)
 
"BLD",9415,"PRE")
LA90A
"BLD",9415,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",9415,"QUES",0)
^9.62^^
"BLD",9415,"REQB",0)
^9.611^2^2
"BLD",9415,"REQB",1,0)
LA*5.2*74^2
"BLD",9415,"REQB",2,0)
LA*5.2*88^2
"BLD",9415,"REQB","B","LA*5.2*74",1)

"BLD",9415,"REQB","B","LA*5.2*88",2)

"FIA",62.4)
AUTO INSTRUMENT
"FIA",62.4,0)
^LAB(62.4,
"FIA",62.4,0,0)
62.4
"FIA",62.4,0,1)
y^n^f^^^^n^^n
"FIA",62.4,0,10)

"FIA",62.4,0,11)
 
"FIA",62.4,0,"RLRO")

"FIA",62.4,0,"VR")
5.2^LA
"FIA",62.4,62.4)
0
"FIA",62.4,62.41)
0
"FIA",62.4,62.41,.01)
 
"FIA",62.4,62.41,11)
 
"FIA",62.4,62.4107)
0
"FIA",62.4,62.41071)
0
"FIA",62.4,62.42)
0
"FIA",62.4,62.43)
0
"FIA",62.4,62.44)
0
"FIA",62.4,62.45)
0
"FIA",62.4,62.46)
0
"FIA",62.4,62.461)
0
"INI")
PRE^LA90A
"INIT")
POST^LA90A
"IX",62.4,62.41,"AD",0)
62.41^AD^Set "ROUTINE STORAGE" field with CH subscripted test data name number^MU^^F^IR^I^62.41^^^^^A
"IX",62.4,62.41,"AD",.1,0)
^^12^12^3160607^
"IX",62.4,62.41,"AD",.1,1,0)
This trigger cross reference will only populate the "ROUTINE STORAGE"
"IX",62.4,62.41,"AD",.1,2,0)
field with 63.04 data location file number for CH (Chemistry) atomic
"IX",62.4,62.41,"AD",.1,3,0)
subscripted test having data name field populated. See example below.
"IX",62.4,62.41,"AD",.1,4,0)
MI (Microbiology) subscripted test have no data name, therefore the "AUTO
"IX",62.4,62.41,"AD",.1,5,0)
INSTRUMENT" file # 62.4, "TEST" field #30, (#62.41), subfile #62.41,
"IX",62.4,62.41,"AD",.1,6,0)
"ROUTINE STORAGE" file #11 will NOT be set.
"IX",62.4,62.41,"AD",.1,7,0)
 
"IX",62.4,62.41,"AD",.1,8,0)
EXAMPLE:
"IX",62.4,62.41,"AD",.1,9,0)
CH subscripted test having DATA NAME will populate the ROUTINE STORAGE
"IX",62.4,62.41,"AD",.1,10,0)
field with:
"IX",62.4,62.41,"AD",.1,11,0)
TV(#,1)
"IX",62.4,62.41,"AD",.1,12,0)
MI subscripted test will NOT set the ROUTINE STORAGE field.
"IX",62.4,62.41,"AD",1)
S $P(^LAB(62.4,DA(1),3,DA,1),U)="TV("_X2(3)_",1)"
"IX",62.4,62.41,"AD",1.4)
S X=(X2(2)="CH")&(X2(3)'="")
"IX",62.4,62.41,"AD",2)
S $P(^LAB(62.4,DA(1),3,DA,1),U)=""
"IX",62.4,62.41,"AD",11.1,0)
^.114IA^3^3
"IX",62.4,62.41,"AD",11.1,1,0)
1^F^62.41^.01^10^1^F
"IX",62.4,62.41,"AD",11.1,1,3)
 
"IX",62.4,62.41,"AD",11.1,2,0)
2^C^^^^2
"IX",62.4,62.41,"AD",11.1,2,1.5)
S X=$P($G(^LAB(60,X(1),0)),U,4)
"IX",62.4,62.41,"AD",11.1,3,0)
3^C^^^^3
"IX",62.4,62.41,"AD",11.1,3,1.5)
S X=$P($G(^LAB(60,X(1),.2)),U)
"MBREQ")
0
"PKG",53,-1)
1^1
"PKG",53,0)
AUTOMATED LAB INSTRUMENTS^LA^Lab Auto-Instrument Package
"PKG",53,20,0)
^9.402P^^
"PKG",53,22,0)
^9.49I^1^1
"PKG",53,22,1,0)
5.2^2940927^2950611
"PKG",53,22,1,"PAH",1,0)
90^3161220^520736434
"PKG",53,22,1,"PAH",1,1,0)
^^405^405^3161220
"PKG",53,22,1,"PAH",1,1,1,0)
The build for this patch is distributed as part of a multi-package build 
"PKG",53,22,1,"PAH",1,1,2,0)
that contains LR*5.2*474 and LA*5.2*90 and contains functionality that 
"PKG",53,22,1,"PAH",1,1,3,0)
will allow Microbiology instrumentation to utilize the Lab Universal
"PKG",53,22,1,"PAH",1,1,4,0)
Interface. 
"PKG",53,22,1,"PAH",1,1,5,0)
 
"PKG",53,22,1,"PAH",1,1,6,0)
By utilizing the Universal interface and middleware sites will be able to 
"PKG",53,22,1,"PAH",1,1,7,0)
interface microbiology devices to a UI standard interface. New
"PKG",53,22,1,"PAH",1,1,8,0)
functionality will be applied that will allow for a "MI" subscripted test
"PKG",53,22,1,"PAH",1,1,9,0)
to be added to the Auto Instrument file. There will also be enhanced
"PKG",53,22,1,"PAH",1,1,10,0)
result processing and verify/release functions (see LR*5.2*474 patch
"PKG",53,22,1,"PAH",1,1,11,0)
descriptions for additional details).
"PKG",53,22,1,"PAH",1,1,12,0)
 
"PKG",53,22,1,"PAH",1,1,13,0)
This patch is distributed in support of the VistA Laboratory Enhancement
"PKG",53,22,1,"PAH",1,1,14,0)
(VLE) Microbiology/Data Innovations interface utilizing the Laboratory
"PKG",53,22,1,"PAH",1,1,15,0)
Universal Interface.
"PKG",53,22,1,"PAH",1,1,16,0)
 
"PKG",53,22,1,"PAH",1,1,17,0)
The patch contains a modification to the AUTO INSTRUMENT (#62.4) file 
"PKG",53,22,1,"PAH",1,1,18,0)
that will change the name of the "CHEM TESTS" (#30) field to "LABORATORY
"PKG",53,22,1,"PAH",1,1,19,0)
TESTS" and modify the input screen to allow "MI" subscripted tests to be
"PKG",53,22,1,"PAH",1,1,20,0)
added to an Auto Instrument entry. The trigger on the TEST (#.01) field
"PKG",53,22,1,"PAH",1,1,21,0)
was also modified so that only tests with a value in the LOCATION (DATA
"PKG",53,22,1,"PAH",1,1,22,0)
NAME) (#5) will set the ROUTINE STORAGE (#11) field.
"PKG",53,22,1,"PAH",1,1,23,0)
 
"PKG",53,22,1,"PAH",1,1,24,0)
Additional Information:
"PKG",53,22,1,"PAH",1,1,25,0)
-----------------------
"PKG",53,22,1,"PAH",1,1,26,0)
This patch contains an enhancement to the antibiotic susceptibility 
"PKG",53,22,1,"PAH",1,1,27,0)
result processing to accommodate the need for laboratories to 
"PKG",53,22,1,"PAH",1,1,28,0)
report/document variations in susceptibility testing related to 
"PKG",53,22,1,"PAH",1,1,29,0)
differences between in vitro susceptibility testing and in vivo action. 
"PKG",53,22,1,"PAH",1,1,30,0)
An example is extended-spectrum_Beta-lactamases (ESBL).
"PKG",53,22,1,"PAH",1,1,31,0)
 
"PKG",53,22,1,"PAH",1,1,32,0)
Susceptibility results received as coded entries can be from the SNOMED 
"PKG",53,22,1,"PAH",1,1,33,0)
CT code system or a site-designated local code (L).
"PKG",53,22,1,"PAH",1,1,34,0)
 
"PKG",53,22,1,"PAH",1,1,35,0)
The interface supports the following SNOMED CT codes to report 
"PKG",53,22,1,"PAH",1,1,36,0)
susceptibility to antimicrobial agents.
"PKG",53,22,1,"PAH",1,1,37,0)
 
"PKG",53,22,1,"PAH",1,1,38,0)
131196009    susceptible
"PKG",53,22,1,"PAH",1,1,39,0)
260357007    moderately susceptible
"PKG",53,22,1,"PAH",1,1,40,0)
264841006    intermediately susceptible
"PKG",53,22,1,"PAH",1,1,41,0)
30714006     resistant
"PKG",53,22,1,"PAH",1,1,42,0)
10828004     positive
"PKG",53,22,1,"PAH",1,1,43,0)
260385009    negative
"PKG",53,22,1,"PAH",1,1,44,0)
 
"PKG",53,22,1,"PAH",1,1,45,0)
Local codes in the role of answers can be entered on an interface 
"PKG",53,22,1,"PAH",1,1,46,0)
specific basis using the option Add/Edit Local Identifier [LA7V 62.47 
"PKG",53,22,1,"PAH",1,1,47,0)
LOCAL IDENTIFIER]
"PKG",53,22,1,"PAH",1,1,48,0)
 
"PKG",53,22,1,"PAH",1,1,49,0)
An example of reporting ESBL status is the following HL7 OBX segment 
"PKG",53,22,1,"PAH",1,1,50,0)
fragment.
"PKG",53,22,1,"PAH",1,1,51,0)
 
"PKG",53,22,1,"PAH",1,1,52,0)
OBX|1|CWE|6984-9^ESBL:SUSC:PT:ISLT:ORDQN:AGAR 
"PKG",53,22,1,"PAH",1,1,53,0)
DIFFUSION^LN^^^^2.19^^ESBL||ESBL^ESBL^L^^^^20160721^^+|||+
"PKG",53,22,1,"PAH",1,1,54,0)
 
"PKG",53,22,1,"PAH",1,1,55,0)
Routines related to this enhancement are:
"PKG",53,22,1,"PAH",1,1,56,0)
LA7VIN2A
"PKG",53,22,1,"PAH",1,1,57,0)
LA7VIN7
"PKG",53,22,1,"PAH",1,1,58,0)
LA7VIN7A
"PKG",53,22,1,"PAH",1,1,59,0)
LA7VIN7B
"PKG",53,22,1,"PAH",1,1,60,0)
LA7VHLU6
"PKG",53,22,1,"PAH",1,1,61,0)
 
"PKG",53,22,1,"PAH",1,1,62,0)
Blood Bank Review:
"PKG",53,22,1,"PAH",1,1,63,0)
==================
"PKG",53,22,1,"PAH",1,1,64,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LA*5.2*90 does not 
"PKG",53,22,1,"PAH",1,1,65,0)
contain any changes to the VISTA BLOOD BANK Software as defined by ProPath
"PKG",53,22,1,"PAH",1,1,66,0)
standard titled: BBM Team Review of VistA Patches.
"PKG",53,22,1,"PAH",1,1,67,0)
 
"PKG",53,22,1,"PAH",1,1,68,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LA*5.2*90 does not 
"PKG",53,22,1,"PAH",1,1,69,0)
alter or modify any software design safeguards or safety critical elements
"PKG",53,22,1,"PAH",1,1,70,0)
functions.
"PKG",53,22,1,"PAH",1,1,71,0)
 
"PKG",53,22,1,"PAH",1,1,72,0)
RISK ANALYSIS: Changes made by patch LA*5.2*90 have no effect on Blood 
"PKG",53,22,1,"PAH",1,1,73,0)
Bank software functionality, therefore RISK is none.
"PKG",53,22,1,"PAH",1,1,74,0)
 
"PKG",53,22,1,"PAH",1,1,75,0)
VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes 
"PKG",53,22,1,"PAH",1,1,76,0)
made, no specific validation requirements exist as a result of
"PKG",53,22,1,"PAH",1,1,77,0)
installation of this patch.
"PKG",53,22,1,"PAH",1,1,78,0)
 
"PKG",53,22,1,"PAH",1,1,79,0)
 
"PKG",53,22,1,"PAH",1,1,80,0)
Patch Components:
"PKG",53,22,1,"PAH",1,1,81,0)
-----------------
"PKG",53,22,1,"PAH",1,1,82,0)
None
"PKG",53,22,1,"PAH",1,1,83,0)
 
"PKG",53,22,1,"PAH",1,1,84,0)
Files & Fields Associated:
"PKG",53,22,1,"PAH",1,1,85,0)
 
"PKG",53,22,1,"PAH",1,1,86,0)
File Name (Number)         Field Name (Number)     New/Modified/Deleted
"PKG",53,22,1,"PAH",1,1,87,0)
------------------         -------------------     --------------------
"PKG",53,22,1,"PAH",1,1,88,0)
AUTO INSTRUMENT (#62.4)    LABORATORY TESTS (#30   Modified
"PKG",53,22,1,"PAH",1,1,89,0)
 
"PKG",53,22,1,"PAH",1,1,90,0)
 
"PKG",53,22,1,"PAH",1,1,91,0)
Forms Associated:
"PKG",53,22,1,"PAH",1,1,92,0)
 
"PKG",53,22,1,"PAH",1,1,93,0)
Form Name                    File #               New/Modified/Deleted
"PKG",53,22,1,"PAH",1,1,94,0)
---------                    ------               --------------------
"PKG",53,22,1,"PAH",1,1,95,0)
N/A
"PKG",53,22,1,"PAH",1,1,96,0)
 
"PKG",53,22,1,"PAH",1,1,97,0)
 
"PKG",53,22,1,"PAH",1,1,98,0)
Mail Groups Associated:
"PKG",53,22,1,"PAH",1,1,99,0)
 
"PKG",53,22,1,"PAH",1,1,100,0)
Mail Group Name          New/Modified/Deleted
"PKG",53,22,1,"PAH",1,1,101,0)
---------------          --------------------
"PKG",53,22,1,"PAH",1,1,102,0)
N/A
"PKG",53,22,1,"PAH",1,1,103,0)
 
"PKG",53,22,1,"PAH",1,1,104,0)
 
"PKG",53,22,1,"PAH",1,1,105,0)
Options Associated:
"PKG",53,22,1,"PAH",1,1,106,0)
 
"PKG",53,22,1,"PAH",1,1,107,0)
Option Name            Type               New/Modified/Deleted
"PKG",53,22,1,"PAH",1,1,108,0)
-----------            ----               -------------------- 
"PKG",53,22,1,"PAH",1,1,109,0)
N/A
"PKG",53,22,1,"PAH",1,1,110,0)
 
"PKG",53,22,1,"PAH",1,1,111,0)
 
"PKG",53,22,1,"PAH",1,1,112,0)
Protocols Associated:
"PKG",53,22,1,"PAH",1,1,113,0)
 
"PKG",53,22,1,"PAH",1,1,114,0)
Protocol Name       New/Modified/Deleted
"PKG",53,22,1,"PAH",1,1,115,0)
-------------       -------------------- 
"PKG",53,22,1,"PAH",1,1,116,0)
N/A
"PKG",53,22,1,"PAH",1,1,117,0)
 
"PKG",53,22,1,"PAH",1,1,118,0)
 
"PKG",53,22,1,"PAH",1,1,119,0)
Security Keys Associated:
"PKG",53,22,1,"PAH",1,1,120,0)
 
"PKG",53,22,1,"PAH",1,1,121,0)
Security Key Name
"PKG",53,22,1,"PAH",1,1,122,0)
-----------------
"PKG",53,22,1,"PAH",1,1,123,0)
N/A
"PKG",53,22,1,"PAH",1,1,124,0)
 
"PKG",53,22,1,"PAH",1,1,125,0)
 
"PKG",53,22,1,"PAH",1,1,126,0)
Templates Associated:
"PKG",53,22,1,"PAH",1,1,127,0)
 
"PKG",53,22,1,"PAH",1,1,128,0)
Template Name      Type      File Name (Number)  New/Modified/Deleted 
"PKG",53,22,1,"PAH",1,1,129,0)
-------------      ----      ------------------  --------------------
"PKG",53,22,1,"PAH",1,1,130,0)
N/A
"PKG",53,22,1,"PAH",1,1,131,0)
 
"PKG",53,22,1,"PAH",1,1,132,0)
 
"PKG",53,22,1,"PAH",1,1,133,0)
 
"PKG",53,22,1,"PAH",1,1,134,0)
Below shows the Data Dictionary as modified with the installation of this
"PKG",53,22,1,"PAH",1,1,135,0)
Patch for the Auto Instrument File. 
"PKG",53,22,1,"PAH",1,1,136,0)
 
"PKG",53,22,1,"PAH",1,1,137,0)
STANDARD DATA DICTIONARY #62.41 -- LABORATORY TESTS SUB-FILE   
"PKG",53,22,1,"PAH",1,1,138,0)
                                               JUN 8,2016@12:37:17  PAGE 1
"PKG",53,22,1,"PAH",1,1,139,0)
STORED IN ^LAB(62.4,D0,3,   SITE: TEST.CHEYENNE.domain.ext   UCI: 
"PKG",53,22,1,"PAH",1,1,140,0)
VISTA,ROU
"PKG",53,22,1,"PAH",1,1,141,0)
 
"PKG",53,22,1,"PAH",1,1,142,0)
DATA          NAME                  GLOBAL        DATA
"PKG",53,22,1,"PAH",1,1,143,0)
ELEMENT       TITLE                 LOCATION      TYPE
"PKG",53,22,1,"PAH",1,1,144,0)
--------------------------------------------------------------------------
"PKG",53,22,1,"PAH",1,1,145,0)
 
"PKG",53,22,1,"PAH",1,1,146,0)
62.41,.01     TEST                   0;1 POINTER TO LABORATORY TEST FILE (
"PKG",53,22,1,"PAH",1,1,147,0)
                                #60) (Required) (Multiply asked)
"PKG",53,22,1,"PAH",1,1,148,0)
 
"PKG",53,22,1,"PAH",1,1,149,0)
              INPUT TRANSFORM:  S DIC("S")="I $D(^LAB(60,Y,.2))!(""MI""[$P
"PKG",53,22,1,"PAH",1,1,150,0)
                                (^LAB(60,Y,0),U,4))" D ^DIC K DIC S DIC=DI
"PKG",53,22,1,"PAH",1,1,151,0)
                                E,X=+Y K:Y<0 X
"PKG",53,22,1,"PAH",1,1,152,0)
              LAST EDITED:      JUN 07, 2016 
"PKG",53,22,1,"PAH",1,1,153,0)
              HELP-PROMPT:      Enter the name of a test for which the 
"PKG",53,22,1,"PAH",1,1,154,0)
                                instrument will send data. 
"PKG",53,22,1,"PAH",1,1,155,0)
              DESCRIPTION:      This contains the test names for this
"PKG",53,22,1,"PAH",1,1,156,0)
                                instrument.  
"PKG",53,22,1,"PAH",1,1,157,0)
 
"PKG",53,22,1,"PAH",1,1,158,0)
              SCREEN:           S DIC("S")="I $D(^LAB(60,Y,.2))!(""MI""[$P
"PKG",53,22,1,"PAH",1,1,159,0)
                                (^LAB(60,Y,0),U,4))"
"PKG",53,22,1,"PAH",1,1,160,0)
              EXPLANATION:      Allow CH atomic test or Microbiology subsc
"PKG",53,22,1,"PAH",1,1,161,0)
                                ript test
"PKG",53,22,1,"PAH",1,1,162,0)
              FIELD INDEX:      AD (#867)    MUMPS    IR    ACTION
"PKG",53,22,1,"PAH",1,1,163,0)
                  Short Descr:  Set "ROUTINE STORAGE" field with CH
"PKG",53,22,1,"PAH",1,1,164,0)
                                subscripted test data name number
"PKG",53,22,1,"PAH",1,1,165,0)
                  Description:  This trigger cross reference will only
"PKG",53,22,1,"PAH",1,1,166,0)
                                populate the "ROUTINE STORAGE" field with
"PKG",53,22,1,"PAH",1,1,167,0)
                                63.04 data location file number for CH
"PKG",53,22,1,"PAH",1,1,168,0)
                                (Chemistry) atomic subscripted test having
"PKG",53,22,1,"PAH",1,1,169,0)
                                data name field populated. See example
"PKG",53,22,1,"PAH",1,1,170,0)
                                below.  MI (Microbiology) subscripted test
"PKG",53,22,1,"PAH",1,1,171,0)
                                have no data name, therefore the "AUTO 
"PKG",53,22,1,"PAH",1,1,172,0)
                                INSTRUMENT" file # 62.4, "TEST" field #30,
"PKG",53,22,1,"PAH",1,1,173,0)
                                (#62.41), subfile #62.41, "ROUTINE
"PKG",53,22,1,"PAH",1,1,174,0)
                                STORAGE" file #11 will NOT be set.  
"PKG",53,22,1,"PAH",1,1,175,0)
                                 
"PKG",53,22,1,"PAH",1,1,176,0)
                                EXAMPLE: CH subscripted test having DATA
"PKG",53,22,1,"PAH",1,1,177,0)
                                NAME will populate the ROUTINE STORAGE 
"PKG",53,22,1,"PAH",1,1,178,0)
                                field with: TV(#,1) MI subscripted test
"PKG",53,22,1,"PAH",1,1,179,0)
                                will NOT set the ROUTINE STORAGE field.  
"PKG",53,22,1,"PAH",1,1,180,0)
                    Set Logic:  S $P(^LAB(62.4,DA(1),3,DA,1),U)="TV("_X2(3
"PKG",53,22,1,"PAH",1,1,181,0)
                                )_",1)"
"PKG",53,22,1,"PAH",1,1,182,0)
                     Set Cond:  S X=(X2(2)="CH")&(X2(3)'="")
"PKG",53,22,1,"PAH",1,1,183,0)
                   Kill Logic:  S $P(^LAB(62.4,DA(1),3,DA,1),U)=""
"PKG",53,22,1,"PAH",1,1,184,0)
                         X(1):  TEST  (62.41,.01)  (Subscr 1)  (Len 10)
"PKG",53,22,1,"PAH",1,1,185,0)
                                (forwards)
"PKG",53,22,1,"PAH",1,1,186,0)
                                  Transform (Display):   
"PKG",53,22,1,"PAH",1,1,187,0)
                         X(2):  Computed Code: S X=$P($G(^LAB(60,X(1),0)),
"PKG",53,22,1,"PAH",1,1,188,0)
                                U,4)
"PKG",53,22,1,"PAH",1,1,189,0)
                                  (Subscr 2)
"PKG",53,22,1,"PAH",1,1,190,0)
                         X(3):  Computed Code: S X=$P($G(^LAB(60,X(1),.2))
"PKG",53,22,1,"PAH",1,1,191,0)
                                ,U)
"PKG",53,22,1,"PAH",1,1,192,0)
                                  (Subscr 3)
"PKG",53,22,1,"PAH",1,1,193,0)
 
"PKG",53,22,1,"PAH",1,1,194,0)
 
"PKG",53,22,1,"PAH",1,1,195,0)
 
"PKG",53,22,1,"PAH",1,1,196,0)
      FILES POINTED TO                      FIELDS
"PKG",53,22,1,"PAH",1,1,197,0)
 
"PKG",53,22,1,"PAH",1,1,198,0)
LABORATORY TEST (#60)             TEST (#.01)
"PKG",53,22,1,"PAH",1,1,199,0)
 
"PKG",53,22,1,"PAH",1,1,200,0)
New Service Requests (NSRs):
"PKG",53,22,1,"PAH",1,1,201,0)
----------------------------  
"PKG",53,22,1,"PAH",1,1,202,0)
NSR #20131213
"PKG",53,22,1,"PAH",1,1,203,0)
Carbapenem Resistant Enterobacteriaceae (CRE) Naming Conventions
"PKG",53,22,1,"PAH",1,1,204,0)
Electronic Interfacing of Automated Identification and Susceptibility 
"PKG",53,22,1,"PAH",1,1,205,0)
Testing Instruments
"PKG",53,22,1,"PAH",1,1,206,0)
 
"PKG",53,22,1,"PAH",1,1,207,0)
NSR #20140801
"PKG",53,22,1,"PAH",1,1,208,0)
Tracking Multi-Drug Resistant Organisms
"PKG",53,22,1,"PAH",1,1,209,0)
 
"PKG",53,22,1,"PAH",1,1,210,0)
 
"PKG",53,22,1,"PAH",1,1,211,0)
Patient Safety Issues (PSIs):
"PKG",53,22,1,"PAH",1,1,212,0)
-----------------------------
"PKG",53,22,1,"PAH",1,1,213,0)
N/A
"PKG",53,22,1,"PAH",1,1,214,0)
 
"PKG",53,22,1,"PAH",1,1,215,0)
 
"PKG",53,22,1,"PAH",1,1,216,0)
Remedy Ticket(s) & Overview:
"PKG",53,22,1,"PAH",1,1,217,0)
----------------------------
"PKG",53,22,1,"PAH",1,1,218,0)
 
"PKG",53,22,1,"PAH",1,1,219,0)
N/A
"PKG",53,22,1,"PAH",1,1,220,0)
 
"PKG",53,22,1,"PAH",1,1,221,0)
Problem:
"PKG",53,22,1,"PAH",1,1,222,0)
-------
"PKG",53,22,1,"PAH",1,1,223,0)
N/A
"PKG",53,22,1,"PAH",1,1,224,0)
 
"PKG",53,22,1,"PAH",1,1,225,0)
Resolution:
"PKG",53,22,1,"PAH",1,1,226,0)
----------
"PKG",53,22,1,"PAH",1,1,227,0)
N/A
"PKG",53,22,1,"PAH",1,1,228,0)
 
"PKG",53,22,1,"PAH",1,1,229,0)
Test Sites:
"PKG",53,22,1,"PAH",1,1,230,0)
----------
"PKG",53,22,1,"PAH",1,1,231,0)
James A. Haley Veterans Hospital
"PKG",53,22,1,"PAH",1,1,232,0)
Iowa City VA Healthcare System
"PKG",53,22,1,"PAH",1,1,233,0)
Lexington VA Medical Center
"PKG",53,22,1,"PAH",1,1,234,0)
 
"PKG",53,22,1,"PAH",1,1,235,0)
Software and Documentation Retrieval Information 
"PKG",53,22,1,"PAH",1,1,236,0)
================================================
"PKG",53,22,1,"PAH",1,1,237,0)
VistA Laboratory patch LR*5.2*474 software is distributed by Host File,
"PKG",53,22,1,"PAH",1,1,238,0)
along with LA*5.2*90.  Software is available on the SOFTWARE.DIR directory
"PKG",53,22,1,"PAH",1,1,239,0)
at one of the following Office of Information (OI) Field Offices.  The
"PKG",53,22,1,"PAH",1,1,240,0)
preferred method is to retrieve the file using Secure File Transfer
"PKG",53,22,1,"PAH",1,1,241,0)
Protocol (SFTP) from download.vista.domain.ext, which transmits files from
"PKG",53,22,1,"PAH",1,1,242,0)
the first available SFTP server.
"PKG",53,22,1,"PAH",1,1,243,0)
        Albany                     ftp.fo-albany.domain.ext 
"PKG",53,22,1,"PAH",1,1,244,0)
        Hines                      ftp.fo-hines.domain.ext 
"PKG",53,22,1,"PAH",1,1,245,0)
        Salt Lake City             ftp.fo-slc.domain.ext 
"PKG",53,22,1,"PAH",1,1,246,0)
                                   
"PKG",53,22,1,"PAH",1,1,247,0)
File Name                   Contents               Retrieval Format 
"PKG",53,22,1,"PAH",1,1,248,0)
------------------          --------------------   ----------------
"PKG",53,22,1,"PAH",1,1,249,0)
LAB_MICRO_INTERFACE_        Host File containing   ASCII
"PKG",53,22,1,"PAH",1,1,250,0)
RELEASE_1_0.KID             KIDS software distribution 
"PKG",53,22,1,"PAH",1,1,251,0)
 
"PKG",53,22,1,"PAH",1,1,252,0)
LAB_MICRO_INTERFACE_RELEASE_1_0_DOCS.ZIP, which contains both .pdf and 
"PKG",53,22,1,"PAH",1,1,253,0)
.docx formatted files of the following documents. Retrieval format is 
"PKG",53,22,1,"PAH",1,1,254,0)
BINARY:
"PKG",53,22,1,"PAH",1,1,255,0)
 
"PKG",53,22,1,"PAH",1,1,256,0)
       VLE Micro_Lab_Micro_Interface_Release_1.0_Technical_Manual
"PKG",53,22,1,"PAH",1,1,257,0)
       VLE Micro_Lab_Micro_Interface_Release_1.0_User_Guide
"PKG",53,22,1,"PAH",1,1,258,0)
       VLE Micro_Deployment_Installation_Roll Back_Back Out_Guide
"PKG",53,22,1,"PAH",1,1,259,0)
 
"PKG",53,22,1,"PAH",1,1,260,0)
 
"PKG",53,22,1,"PAH",1,1,261,0)
The VistA Documentation Library (VDL) web site will also contain the 
"PKG",53,22,1,"PAH",1,1,262,0)
above referenced documents. This website is usually updated within 1-3
"PKG",53,22,1,"PAH",1,1,263,0)
days of the patch release date. The VDL web address for Laboratory
"PKG",53,22,1,"PAH",1,1,264,0)
Universal Interface user documentation is:
"PKG",53,22,1,"PAH",1,1,265,0)
http://www.domain.ext/vdl/application.asp?appid=120
"PKG",53,22,1,"PAH",1,1,266,0)
 
"PKG",53,22,1,"PAH",1,1,267,0)
Note: These previously released documents contain configuration and
"PKG",53,22,1,"PAH",1,1,268,0)
mapping information that is useful to the implementation of the Universal
"PKG",53,22,1,"PAH",1,1,269,0)
Interface for Microbiology tests.
"PKG",53,22,1,"PAH",1,1,270,0)
------------------------------------------------------------------------
"PKG",53,22,1,"PAH",1,1,271,0)
LEDI IV Installation Guide     LAB_LEDI_IV_IG.PDF            binary
"PKG",53,22,1,"PAH",1,1,272,0)
LEDI IV User Manual            LAB_LEDI_IV_UM.PDF            binary
"PKG",53,22,1,"PAH",1,1,273,0)
LEDI IV Update AP/MICRO        LEDI_IV__AP__MICRO_           binary
"PKG",53,22,1,"PAH",1,1,274,0)
Configuration Guide            CONFIGURATION_GUIDE.PDF       binary
"PKG",53,22,1,"PAH",1,1,275,0)
     
"PKG",53,22,1,"PAH",1,1,276,0)
Patch Installation:
"PKG",53,22,1,"PAH",1,1,277,0)
 
"PKG",53,22,1,"PAH",1,1,278,0)
 
"PKG",53,22,1,"PAH",1,1,279,0)
Pre/Post Installation Overview:
"PKG",53,22,1,"PAH",1,1,280,0)
-------------------------------
"PKG",53,22,1,"PAH",1,1,281,0)
This patch install must be coordinated with the Laboratory ADPAC to 
"PKG",53,22,1,"PAH",1,1,282,0)
ensure that all Lab Interface related activities are halted.
"PKG",53,22,1,"PAH",1,1,283,0)
 His 
"PKG",53,22,1,"PAH",1,1,284,0)
 
"PKG",53,22,1,"PAH",1,1,285,0)
Pre-Installation Instructions:  
"PKG",53,22,1,"PAH",1,1,286,0)
------------------------------
"PKG",53,22,1,"PAH",1,1,287,0)
Ensure that all Lab Interface activity has been halted !!
"PKG",53,22,1,"PAH",1,1,288,0)
 
"PKG",53,22,1,"PAH",1,1,289,0)
This would include:
"PKG",53,22,1,"PAH",1,1,290,0)
-Editing of an Auto Instrument file entry, 
"PKG",53,22,1,"PAH",1,1,291,0)
-Turn off the Auto Downloading process to prevent the building and 
"PKG",53,22,1,"PAH",1,1,292,0)
downloading of a Load/Worklist to the Instrument Manager.
"PKG",53,22,1,"PAH",1,1,293,0)
-Shut down all LA7UI logical links and any other HL7 process (HLZTCP or 
"PKG",53,22,1,"PAH",1,1,294,0)
HLLP processes) to prevent the processing of result messages from the IM.
"PKG",53,22,1,"PAH",1,1,295,0)
 
"PKG",53,22,1,"PAH",1,1,296,0)
This patch may be installed with users on the system as long as the above 
"PKG",53,22,1,"PAH",1,1,297,0)
process controls have been followed.
"PKG",53,22,1,"PAH",1,1,298,0)
 
"PKG",53,22,1,"PAH",1,1,299,0)
 
"PKG",53,22,1,"PAH",1,1,300,0)
Installation Instructions:
"PKG",53,22,1,"PAH",1,1,301,0)
--------------------------
"PKG",53,22,1,"PAH",1,1,302,0)
This patch may be installed with users on the system although it is 
"PKG",53,22,1,"PAH",1,1,303,0)
recommended that it be installed during non-peak hours to minimize 
"PKG",53,22,1,"PAH",1,1,304,0)
potential disruption to users.  This patch should take less than 5 
"PKG",53,22,1,"PAH",1,1,305,0)
minutes to install.
"PKG",53,22,1,"PAH",1,1,306,0)
 
"PKG",53,22,1,"PAH",1,1,307,0)
 
"PKG",53,22,1,"PAH",1,1,308,0)
This installation will modify the CHEM TESTS field (#30) in the AUTO 
"PKG",53,22,1,"PAH",1,1,309,0)
INSTRUMENT file (#62.4) by changing the following:
"PKG",53,22,1,"PAH",1,1,310,0)
 
"PKG",53,22,1,"PAH",1,1,311,0)
  The name of the field will be changed to LABORATORY TESTS
"PKG",53,22,1,"PAH",1,1,312,0)
  The screen on the field will now allow "MI" subscripted tests
"PKG",53,22,1,"PAH",1,1,313,0)
  The ROUTINE STORAGE (#11) value set by the trigger on the TESTS 
"PKG",53,22,1,"PAH",1,1,314,0)
  (#.01) field will not happen for "MI" subscripted tests
"PKG",53,22,1,"PAH",1,1,315,0)
  The original ROUTINE STORAGE trigger code has been replace with a new 
"PKG",53,22,1,"PAH",1,1,316,0)
  style AD cross-reference.
"PKG",53,22,1,"PAH",1,1,317,0)
   
"PKG",53,22,1,"PAH",1,1,318,0)
1.      DOWNLOAD HOST KIDS FILE 
"PKG",53,22,1,"PAH",1,1,319,0)
        ----------------------
"PKG",53,22,1,"PAH",1,1,320,0)
        Download the KIDS file LAB_MICRO_INTERFACE_RELEASE_1_0.KID from 
"PKG",53,22,1,"PAH",1,1,321,0)
        the ANONYMOUS.SOFTWARE directory of Albany, Hines, or the Salt
"PKG",53,22,1,"PAH",1,1,322,0)
        Lake OIFO to the appropriate directory on your system.
"PKG",53,22,1,"PAH",1,1,323,0)
 
"PKG",53,22,1,"PAH",1,1,324,0)
2.      LOAD DISTRIBUTION 
"PKG",53,22,1,"PAH",1,1,325,0)
        -----------------
"PKG",53,22,1,"PAH",1,1,326,0)
        Use the 'LOAD A DISTRIBUTION' option on the KIDS 
"PKG",53,22,1,"PAH",1,1,327,0)
        INSTALLATION menu, and enter:  the directory onto which you 
"PKG",53,22,1,"PAH",1,1,328,0)
        have downloaded the host file, followed by 
"PKG",53,22,1,"PAH",1,1,329,0)
        LAB_MICRO_INTERFACE_RELEASE_1_0.KID, the host file name. 
"PKG",53,22,1,"PAH",1,1,330,0)
 
"PKG",53,22,1,"PAH",1,1,331,0)
3.      START UP KIDS 
"PKG",53,22,1,"PAH",1,1,332,0)
        -------------
"PKG",53,22,1,"PAH",1,1,333,0)
        Start up the Kernel Installation and Distribution System Menu 
"PKG",53,22,1,"PAH",1,1,334,0)
        [XPD MAIN]:
"PKG",53,22,1,"PAH",1,1,335,0)
        Edits and Distribution ...  
"PKG",53,22,1,"PAH",1,1,336,0)
        Utilities ...  
"PKG",53,22,1,"PAH",1,1,337,0)
        Installation ...  
"PKG",53,22,1,"PAH",1,1,338,0)
 
"PKG",53,22,1,"PAH",1,1,339,0)
        Select Kernel Installation & Distribution System Option: 
"PKG",53,22,1,"PAH",1,1,340,0)
        Installation 
"PKG",53,22,1,"PAH",1,1,341,0)
        -------------
"PKG",53,22,1,"PAH",1,1,342,0)
 
"PKG",53,22,1,"PAH",1,1,343,0)
            Load a Distribution 
"PKG",53,22,1,"PAH",1,1,344,0)
            Print Transport Global 
"PKG",53,22,1,"PAH",1,1,345,0)
            Compare Transport Global to Current System 
"PKG",53,22,1,"PAH",1,1,346,0)
            Verify Checksums in Transport Global 
"PKG",53,22,1,"PAH",1,1,347,0)
            Install Package(s) 
"PKG",53,22,1,"PAH",1,1,348,0)
            Restart Install of Package(s) 
"PKG",53,22,1,"PAH",1,1,349,0)
            Unload a Distribution 
"PKG",53,22,1,"PAH",1,1,350,0)
            Backup a Transport Global 
"PKG",53,22,1,"PAH",1,1,351,0)
 
"PKG",53,22,1,"PAH",1,1,352,0)
4.      Select Installation Option: 
"PKG",53,22,1,"PAH",1,1,353,0)
     ---------------------------
"PKG",53,22,1,"PAH",1,1,354,0)
   
"PKG",53,22,1,"PAH",1,1,355,0)
   a.   Use the Load a Distribution and select Host File: 
"PKG",53,22,1,"PAH",1,1,356,0)
        LAB_MICRO_INTERFACE_RELEASE_1_0.KID
"PKG",53,22,1,"PAH",1,1,357,0)
        b.  Backup a Transport Global - This option will create a backup
"PKG",53,22,1,"PAH",1,1,358,0)
        message of any routines exported with this patch. It will not
"PKG",53,22,1,"PAH",1,1,359,0)
        backup any other changes such as DDs or templates.
"PKG",53,22,1,"PAH",1,1,360,0)
        c.  Compare Transport Global to Current System - This option will
"PKG",53,22,1,"PAH",1,1,361,0)
        allow you to view all changes that will be made when this patch
"PKG",53,22,1,"PAH",1,1,362,0)
        is installed.  It compares all components of this patch
"PKG",53,22,1,"PAH",1,1,363,0)
        (routines, DDs, templates, etc.).
"PKG",53,22,1,"PAH",1,1,364,0)
        d.  Verify Checksums in Transport Global - This option will allow
"PKG",53,22,1,"PAH",1,1,365,0)
        you to ensure the integrity of the routines that are in the
"PKG",53,22,1,"PAH",1,1,366,0)
        transport global.
"PKG",53,22,1,"PAH",1,1,367,0)
     
"PKG",53,22,1,"PAH",1,1,368,0)
 
"PKG",53,22,1,"PAH",1,1,369,0)
5.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
"PKG",53,22,1,"PAH",1,1,370,0)
    Install? NO//'     
"PKG",53,22,1,"PAH",1,1,371,0)
    Respond: NO
"PKG",53,22,1,"PAH",1,1,372,0)
 
"PKG",53,22,1,"PAH",1,1,373,0)
6.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
"PKG",53,22,1,"PAH",1,1,374,0)
    NO//'
"PKG",53,22,1,"PAH",1,1,375,0)
    Respond: NO
"PKG",53,22,1,"PAH",1,1,376,0)
 
"PKG",53,22,1,"PAH",1,1,377,0)
7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
"PKG",53,22,1,"PAH",1,1,378,0)
    and Protocols? NO//' 
"PKG",53,22,1,"PAH",1,1,379,0)
    Respond: NO
"PKG",53,22,1,"PAH",1,1,380,0)
 
"PKG",53,22,1,"PAH",1,1,381,0)
8.  If prompted 'Delay Install (Minutes): (0 - 60): 0//' 
"PKG",53,22,1,"PAH",1,1,382,0)
    Respond: 0.
"PKG",53,22,1,"PAH",1,1,383,0)
 
"PKG",53,22,1,"PAH",1,1,384,0)
 
"PKG",53,22,1,"PAH",1,1,385,0)
Post-Installation Instructions:
"PKG",53,22,1,"PAH",1,1,386,0)
-------------------------------
"PKG",53,22,1,"PAH",1,1,387,0)
Below is an example of how an micro instrument might be defined in the 
"PKG",53,22,1,"PAH",1,1,388,0)
Auto Instrument file. Refer to the Install. We recommend that the Install 
"PKG",53,22,1,"PAH",1,1,389,0)
and User manuals be followed for more completely documented 
"PKG",53,22,1,"PAH",1,1,390,0)
instructions. 
"PKG",53,22,1,"PAH",1,1,391,0)
 
"PKG",53,22,1,"PAH",1,1,392,0)
AUTO INSTRUMENT (#62.4:
"PKG",53,22,1,"PAH",1,1,393,0)
 
"PKG",53,22,1,"PAH",1,1,394,0)
NUMBER: 3                               NAME: BAC-TEC
"PKG",53,22,1,"PAH",1,1,395,0)
  LOAD/WORK LIST: BAC-TEC
"PKG",53,22,1,"PAH",1,1,396,0)
  ENTRY for LAGEN ROUTINE: Accession cross-reference
"PKG",53,22,1,"PAH",1,1,397,0)
  CROSS LINKED BY: IDE                  MESSAGE CONFIGURATION: LA7UI2
"PKG",53,22,1,"PAH",1,1,398,0)
  METHOD: BACTEC                        DEFAULT ACCESSION AREA: BLOOD 
"PKG",53,22,1,"PAH",1,1,399,0)
CULTURE
"PKG",53,22,1,"PAH",1,1,400,0)
  OVERLAY DATA: YES                     STORE REMARKS: YES
"PKG",53,22,1,"PAH",1,1,401,0)
NUMBER: 1                               TEST: BLOOD CULTURE
"PKG",53,22,1,"PAH",1,1,402,0)
  UI TEST CODE: BLD CX                  ACCESSION AREA: MICROBIOLOGY
"PKG",53,22,1,"PAH",1,1,403,0)
  FILE BUILD ENTRY: EN                  FILE BUILD ROUTINE: LA7UID
"PKG",53,22,1,"PAH",1,1,404,0)
  AUTO DOWNLOAD: NO                     WKLD METHOD: BACT/ALERT
"PKG",53,22,1,"PAH",1,1,405,0)
  WKLD CODE METHOD NAME: BACT/ALERT     WKLD CODE SUFFIX: .7086
"PRE")
LA90A
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
6
"RTN","LA7VHLU6")
0^2^B58736241
"RTN","LA7VHLU6",1,0)
LA7VHLU6 ;DALOI/JMC - HL7 Code Sets utility ;08/10/16  13:30
"RTN","LA7VHLU6",2,0)
 ;;5.2;AUTOMATED LAB INSTRUMENTS;**74,90**;Sep 27, 1994;Build 17
"RTN","LA7VHLU6",3,0)
 ;
"RTN","LA7VHLU6",4,0)
 ; Utility to resolve SNOMED CT, LOINC and local codes.
"RTN","LA7VHLU6",5,0)
 ;
"RTN","LA7VHLU6",6,0)
 Q
"RTN","LA7VHLU6",7,0)
 ;
"RTN","LA7VHLU6",8,0)
IEN2SCT(FILE,IEN,DATE,LA7ALT) ; Return SCT code for a given file entry
"RTN","LA7VHLU6",9,0)
 ; Call with FILE = file #
"RTN","LA7VHLU6",10,0)
 ;            IEN = internal entry number in FILE
"RTN","LA7VHLU6",11,0)
 ;           DATE = as of date
"RTN","LA7VHLU6",12,0)
 ;         LA7ALT = SNOMED CT ID to use as alternate
"RTN","LA7VHLU6",13,0)
 ;
"RTN","LA7VHLU6",14,0)
 ; Returns   LA7Y = SNOMED CT code (Code^Code Text^Code System^Version^Error Code^Error Text)
"RTN","LA7VHLU6",15,0)
 ;
"RTN","LA7VHLU6",16,0)
 N LA7FIELD,LA7SCT,LA7X,LA7Y,LA7Z,X,Y
"RTN","LA7VHLU6",17,0)
 S LA7Y="",FILE=+$G(FILE),IEN=+$G(IEN),LA7ALT=$G(LA7ALT)
"RTN","LA7VHLU6",18,0)
 ;
"RTN","LA7VHLU6",19,0)
 ; If entry mapped to SNOMED CT then retrieve code info from Lexicon.
"RTN","LA7VHLU6",20,0)
 S LA7FIELD=$S(FILE=61:20,FILE=61.2:20,FILE=62:20,1:20)
"RTN","LA7VHLU6",21,0)
 I LA7ALT'="" S LA7X=LA7ALT
"RTN","LA7VHLU6",22,0)
 E  S LA7X=$$GET1^DIQ(FILE,IEN_",",LA7FIELD)
"RTN","LA7VHLU6",23,0)
 I LA7X D
"RTN","LA7VHLU6",24,0)
 . S LA7Z=$$CODE^LEXTRAN(LA7X,"SCT",DATE,"LA7SCT")
"RTN","LA7VHLU6",25,0)
 . I LA7Z>0 S LA7Y=$P(LA7SCT(0),"^")_"^"_LA7SCT("F")_"^SCT^"_$P(LA7SCT(0),"^",3) Q
"RTN","LA7VHLU6",26,0)
 . S $P(LA7Y,"^",5,6)=$P(LA7Z,"^",1,2) ; return error code/text in 5th/6th pieces
"RTN","LA7VHLU6",27,0)
 . I $P(LA7Z,"^")=-1 Q
"RTN","LA7VHLU6",28,0)
 . I $P(LA7Z,"^")=-2 Q
"RTN","LA7VHLU6",29,0)
 . I $P(LA7Z,"^")=-4 D  Q
"RTN","LA7VHLU6",30,0)
 . . S $P(LA7Y,"^",1,4)=$P(LA7SCT(0),"^")_"^"_$G(LA7SCT("F"))_"^SCT^"_$P(LA7SCT(0),"^",3)
"RTN","LA7VHLU6",31,0)
 . . S X=$P(LA7Z,"not active for ",2)
"RTN","LA7VHLU6",32,0)
 . . I X?1(7N,7N1"."1.N) S $P(LA7Y,"not active for ",2)=$$FMTE^XLFDT(X,"MZ")
"RTN","LA7VHLU6",33,0)
 . I $P(LA7Z,"^")=-8 D  Q
"RTN","LA7VHLU6",34,0)
 . . S X=+$P(LA7Z," ",2)
"RTN","LA7VHLU6",35,0)
 . . I X?1(7N,7N1"."1.N) S $P(LA7Y," ",2)=$$FMTE^XLFDT(X,"MZ")
"RTN","LA7VHLU6",36,0)
 . . I DATE=DT Q
"RTN","LA7VHLU6",37,0)
 . . N LA7Z,LA7SCT
"RTN","LA7VHLU6",38,0)
 . . S LA7Z=$$CODE^LEXTRAN(LA7X,"SCT",DT,"LA7SCT")
"RTN","LA7VHLU6",39,0)
 . . I LA7Z>0 S $P(LA7Y,"^",1,4)=$P(LA7SCT(0),"^")_"^"_LA7SCT("F")_"^SCT^"_$P(LA7SCT(0),"^",3)
"RTN","LA7VHLU6",40,0)
 ;
"RTN","LA7VHLU6",41,0)
 Q LA7Y
"RTN","LA7VHLU6",42,0)
 ;
"RTN","LA7VHLU6",43,0)
 ;
"RTN","LA7VHLU6",44,0)
SCT2IEN(CODE,TEXT,VERSION,FILE,LA76247,LA76248) ; Return file ien for a given SNOMED CT code
"RTN","LA7VHLU6",45,0)
 ; Call with CODE = SNOMED CT code
"RTN","LA7VHLU6",46,0)
 ;           TEXT = code text
"RTN","LA7VHLU6",47,0)
 ;        VERSION = code system version
"RTN","LA7VHLU6",48,0)
 ;           FILE = destination VistA file # (file where the SCT term resides)
"RTN","LA7VHLU6",49,0)
 ;        LA76247 = ien of concept to screen on
"RTN","LA7VHLU6",50,0)
 ;        LA76248 = related Lab Messaging configuration for non-standard code lookup (optional)
"RTN","LA7VHLU6",51,0)
 ;                  used when code is only for a specific interface
"RTN","LA7VHLU6",52,0)
 ;
"RTN","LA7VHLU6",53,0)
 ; Returns LA7IEN = file internal entry number
"RTN","LA7VHLU6",54,0)
 ;
"RTN","LA7VHLU6",55,0)
 N LA7CNT,LA7IEN,LA7X,LA7Y
"RTN","LA7VHLU6",56,0)
 S (LA7CNT,LA7X)=0,LA7IEN=""
"RTN","LA7VHLU6",57,0)
 F  S LA7X=$O(^LAB(FILE,"F",CODE,LA7X)) Q:'LA7X  S LA7CNT=LA7CNT+1,LA7IEN=LA7X,LA7Y(LA7X)=^LAB(FILE,LA7X,"SCT")
"RTN","LA7VHLU6",58,0)
 ;
"RTN","LA7VHLU6",59,0)
 ; If multiple entries mapped then check for closest match
"RTN","LA7VHLU6",60,0)
 ;  - try P if no P then try S or L for text match
"RTN","LA7VHLU6",61,0)
 ;    - if none then select S
"RTN","LA7VHLU6",62,0)
 ;      - if none then select L
"RTN","LA7VHLU6",63,0)
 I LA7CNT>1 D
"RTN","LA7VHLU6",64,0)
 . N LA7QUIT
"RTN","LA7VHLU6",65,0)
 . S TEXT=$$UP^XLFSTR(TEXT)
"RTN","LA7VHLU6",66,0)
 . S (LA7QUIT,LA7X)=0
"RTN","LA7VHLU6",67,0)
 . F  S LA7X=$O(LA7Y(LA7X)) Q:'LA7X  D  Q:LA7QUIT
"RTN","LA7VHLU6",68,0)
 . . S LA7IEN=LA7X
"RTN","LA7VHLU6",69,0)
 . . I $P(LA7Y(LA7X),"^",2)="P" S LA7QUIT=1 Q
"RTN","LA7VHLU6",70,0)
 . . I $P(LA7Y(LA7X),"^",2)?1(1"S",1"L"),TEXT=$$UP^XLFSTR($P(^LAB(FILE,LA7X,0),"^")) S LA7QUIT=1
"RTN","LA7VHLU6",71,0)
 . I LA7QUIT Q
"RTN","LA7VHLU6",72,0)
 . S (LA7IEN,LA7X)=0
"RTN","LA7VHLU6",73,0)
 . F  S LA7X=$O(LA7Y(LA7X)) Q:'LA7X  D
"RTN","LA7VHLU6",74,0)
 . . I $P(LA7Y(LA7X),"^",2)="S" S LA7IEN=LA7X
"RTN","LA7VHLU6",75,0)
 . . I 'LA7IEN,$P(LA7Y(LA7X),"^",2)="L" S LA7IEN=LA7X
"RTN","LA7VHLU6",76,0)
 ;
"RTN","LA7VHLU6",77,0)
 ;
"RTN","LA7VHLU6",78,0)
 Q LA7IEN
"RTN","LA7VHLU6",79,0)
 ;
"RTN","LA7VHLU6",80,0)
 ;
"RTN","LA7VHLU6",81,0)
HL2LAH(CODE,TEXT,NCS,VERSION,LA76248,LA7SS) ; Determine storage location for a code system sent in OBX-3
"RTN","LA7VHLU6",82,0)
 ; Call with CODE = code id
"RTN","LA7VHLU6",83,0)
 ;           TEXT = code text
"RTN","LA7VHLU6",84,0)
 ;            NCS = name of coding system (LOINC, NLT, SCT, 99xxx, L)
"RTN","LA7VHLU6",85,0)
 ;        VERSION = code system version id
"RTN","LA7VHLU6",86,0)
 ;        LA76248 = related Lab Messaging configuration for non-standard code lookup (optional)
"RTN","LA7VHLU6",87,0)
 ;                  used when code is only for a specific interface
"RTN","LA7VHLU6",88,0)
 ;          LA7SS = specific lab subscript to screen standard codes - used when same code used in multiple areas
"RTN","LA7VHLU6",89,0)
 ;
"RTN","LA7VHLU6",90,0)
 ; Returns   LA7Y = CONCEPT^SUBSCRIPT^FILE/SUBFILE^FIELD NUMBER^SCT HIERARCHY
"RTN","LA7VHLU6",91,0)
 ;
"RTN","LA7VHLU6",92,0)
 N DA,LA76247,LA764,LA764061,LA7ROOT,LA7X,LA7Y,LOCAL,X,Y
"RTN","LA7VHLU6",93,0)
 S (DA,DA(1),LA7Y,LA76247)="",LA7SS=$G(LA7SS),LA764061=0
"RTN","LA7VHLU6",94,0)
 S LOCAL=$S(NCS="99VA64":0,NCS="L":1,$E(NCS,1,2)="99":1,1:0)
"RTN","LA7VHLU6",95,0)
 ;
"RTN","LA7VHLU6",96,0)
 ; Check for subscript specific code first.
"RTN","LA7VHLU6",97,0)
 ; If VA NLT suffixed code and not in x-ref then try non-suffixed version of code.
"RTN","LA7VHLU6",98,0)
 I LA7SS'="" D
"RTN","LA7VHLU6",99,0)
 . S LA7ROOT=$Q(^LAB(62.47,"AC2",LA7SS,NCS,CODE))
"RTN","LA7VHLU6",100,0)
 . I LA7ROOT="",NCS="99VA64",CODE#1 S CODE=$P(CODE,".")_".0000",LA7ROOT=$Q(^LAB(62.47,"AC2",LA7SS,NCS,CODE))
"RTN","LA7VHLU6",101,0)
 . I LA7ROOT'="",$QS(LA7ROOT,2)="AC2",$QS(LA7ROOT,3)=LA7SS,$QS(LA7ROOT,4)=NCS,$QS(LA7ROOT,5)=CODE D
"RTN","LA7VHLU6",102,0)
 . . S LA764061=$QS(LA7ROOT,6),(DA(1),LA7Y)=$QS(LA7ROOT,7)
"RTN","LA7VHLU6",103,0)
 . . I LA764061 S LA7Y=LA7Y_"^"_$P($G(^LAB(64.061,LA764061,63)),"^",1,4)
"RTN","LA7VHLU6",104,0)
 . . S DA=$QS(LA7ROOT,8)
"RTN","LA7VHLU6",105,0)
 . . I $P(^LAB(62.47,DA(1),1,DA,0),"^",4) D LAHOVR S $P(LA7Y,"^",6)=$QS(LA7ROOT,7)
"RTN","LA7VHLU6",106,0)
 ;
"RTN","LA7VHLU6",107,0)
 ; Check for non-subscript specific code
"RTN","LA7VHLU6",108,0)
 ; If VA NLT suffixed code and not in x-ref then try non-suffixed version of code.
"RTN","LA7VHLU6",109,0)
 I LA7Y="" D
"RTN","LA7VHLU6",110,0)
 . S LA7ROOT=$Q(^LAB(62.47,"AC",NCS,CODE))
"RTN","LA7VHLU6",111,0)
 . I LA7ROOT="",NCS="99VA64",CODE#1 S CODE=$P(CODE,".")_".0000",LA7ROOT=$Q(^LAB(62.47,"AC",NCS,CODE))
"RTN","LA7VHLU6",112,0)
 . I LA7ROOT'="",$QS(LA7ROOT,2)="AC",$QS(LA7ROOT,3)=NCS,$QS(LA7ROOT,4)=CODE D
"RTN","LA7VHLU6",113,0)
 . . S LA764061=$QS(LA7ROOT,5),(DA(1),LA7Y)=$QS(LA7ROOT,6)
"RTN","LA7VHLU6",114,0)
 . . I LA764061 S LA7Y=LA7Y_"^"_$P($G(^LAB(64.061,LA764061,63)),"^",1,4)
"RTN","LA7VHLU6",115,0)
 . . S DA=$QS(LA7ROOT,7)
"RTN","LA7VHLU6",116,0)
 . . I $P(^LAB(62.47,DA(1),1,DA,0),"^",4) D LAHOVR S $P(LA7Y,"^",6)=$QS(LA7ROOT,6)
"RTN","LA7VHLU6",117,0)
 ;
"RTN","LA7VHLU6",118,0)
 ; If for a specific interface
"RTN","LA7VHLU6",119,0)
 I LA76248 D
"RTN","LA7VHLU6",120,0)
 . S LA7ROOT=$Q(^LAB(62.47,"AC1",LA76248,NCS,CODE))
"RTN","LA7VHLU6",121,0)
 . I LA7ROOT'="",$QS(LA7ROOT,2)="AC1",$QS(LA7ROOT,3)=LA76248,$QS(LA7ROOT,4)=NCS,$QS(LA7ROOT,5)=CODE D
"RTN","LA7VHLU6",122,0)
 . . S LA764061=$QS(LA7ROOT,6),(DA(1),LA7Y)=$QS(LA7ROOT,7)
"RTN","LA7VHLU6",123,0)
 . . I LA764061 S LA7Y=LA7Y_"^"_$P($G(^LAB(64.061,LA764061,63)),"^",1,4)
"RTN","LA7VHLU6",124,0)
 . . S DA=$QS(LA7ROOT,8)
"RTN","LA7VHLU6",125,0)
 . . I $P(^LAB(62.47,DA(1),1,DA,0),"^",4) D LAHOVR S $P(LA7Y,"^",6)=$QS(LA7ROOT,7)
"RTN","LA7VHLU6",126,0)
 ;
"RTN","LA7VHLU6",127,0)
 ; Set bacterial/mycobacteria susceptibility field
"RTN","LA7VHLU6",128,0)
 I LA764061=9332!(LA764061=9333) D
"RTN","LA7VHLU6",129,0)
 . S LA7X=$G(^LAB(62.47,DA(1),1,DA,2))
"RTN","LA7VHLU6",130,0)
 . I $P($P(LA7X,"^"),";",2)'="LAB(62.06," Q
"RTN","LA7VHLU6",131,0)
 . S X=$G(^LAB(62.06,+LA7X,0))
"RTN","LA7VHLU6",132,0)
 . I LA764061=9332,$P(X,"^",4) S $P(LA7Y,"^",4)=$P(X,"^",4) Q
"RTN","LA7VHLU6",133,0)
 . I LA764061=9333,$P(X,"^",8) S $P(LA7Y,"^",4)=$P(X,"^",8)
"RTN","LA7VHLU6",134,0)
 ;
"RTN","LA7VHLU6",135,0)
 ; If code system is SNOMED CT
"RTN","LA7VHLU6",136,0)
 ; Currently VistA should not receive a SNOMED CT code in an OBX-3 field.
"RTN","LA7VHLU6",137,0)
 I NCS="SCT" D
"RTN","LA7VHLU6",138,0)
 . Q
"RTN","LA7VHLU6",139,0)
 ;
"RTN","LA7VHLU6",140,0)
 Q LA7Y
"RTN","LA7VHLU6",141,0)
 ;
"RTN","LA7VHLU6",142,0)
 ;
"RTN","LA7VHLU6",143,0)
LAHOVR ; Override HL2LAH concept code mapping.
"RTN","LA7VHLU6",144,0)
 ;ZEXCEPT: DA,LA76247,LA764061,LA7Y
"RTN","LA7VHLU6",145,0)
 ;
"RTN","LA7VHLU6",146,0)
 S LA76247=$P(^LAB(62.47,DA(1),1,DA,0),"^",4)
"RTN","LA7VHLU6",147,0)
 S LA764061=$P(^LAB(62.47,LA76247,0),"^",3)
"RTN","LA7VHLU6",148,0)
 S LA7Y=LA76247_"^"_$G(^LAB(64.061,LA764061,63))
"RTN","LA7VHLU6",149,0)
 Q
"RTN","LA7VHLU6",150,0)
 ;
"RTN","LA7VHLU6",151,0)
 ;
"RTN","LA7VHLU6",152,0)
ALCONCPT(LA76247) ; Determine alternate concept for a concept
"RTN","LA7VHLU6",153,0)
 ; Call with LA76247 = ien of concept
"RTN","LA7VHLU6",154,0)
 ;
"RTN","LA7VHLU6",155,0)
 ; Returns LACONPT =  alternate concept
"RTN","LA7VHLU6",156,0)
 ;
"RTN","LA7VHLU6",157,0)
 N LACONCPT
"RTN","LA7VHLU6",158,0)
 S LACONCPT=""
"RTN","LA7VHLU6",159,0)
 I $G(LA76247)>0 S LACONCPT=+$P($G(^LAB(62.47,LA76247,0)),"^",4)
"RTN","LA7VHLU6",160,0)
 Q LACONCPT
"RTN","LA7VHLU6",161,0)
 ;
"RTN","LA7VHLU6",162,0)
 ;
"RTN","LA7VHLU6",163,0)
PRID(CODE,NCS,LA764061) ; Determine if a code represents the presence/absence or the identity of a concept in OBX-5
"RTN","LA7VHLU6",164,0)
 ; Used to determine if identity of organism or presence/absence
"RTN","LA7VHLU6",165,0)
 ; Call with CODE = code id
"RTN","LA7VHLU6",166,0)
 ;            NCS = name of coding system
"RTN","LA7VHLU6",167,0)
 ;        LA64061 = related Lab database code
"RTN","LA7VHLU6",168,0)
 ;
"RTN","LA7VHLU6",169,0)
 ; Returns   LA7Y = hierarchy of the code ^ related VistA file
"RTN","LA7VHLU6",170,0)
 ;
"RTN","LA7VHLU6",171,0)
 N LA7Y,LA7X
"RTN","LA7VHLU6",172,0)
 S LA7Y=""
"RTN","LA7VHLU6",173,0)
 ;
"RTN","LA7VHLU6",174,0)
 ; If code system is SNOMED CT
"RTN","LA7VHLU6",175,0)
 I NCS="SCT" D
"RTN","LA7VHLU6",176,0)
 . S LA7Y=$$GET1^DIQ(64.061,LA764061_",",63.3)
"RTN","LA7VHLU6",177,0)
 . S LA7X=$$GET1^DIQ(64.061,LA764061_",",63.3,"I")
"RTN","LA7VHLU6",178,0)
 . I LA7X S $P(LA7Y,"^",2)=$P($G(^LAB(64.061,LA7X,63)),"^",5)
"RTN","LA7VHLU6",179,0)
 ;
"RTN","LA7VHLU6",180,0)
 Q LA7Y
"RTN","LA7VHLU6",181,0)
 ;
"RTN","LA7VHLU6",182,0)
 ;
"RTN","LA7VHLU6",183,0)
HL2VA(CODE,TEXT,NCS,VERSION,LA76247,LA76248) ; Resolve code to internal VA file entry, used to resolve value of OBX-5 coded entry
"RTN","LA7VHLU6",184,0)
 ; Call with CODE = code id
"RTN","LA7VHLU6",185,0)
 ;            NCS = name of coding system (SCT, 99xxx, L)
"RTN","LA7VHLU6",186,0)
 ;           TEXT = code text
"RTN","LA7VHLU6",187,0)
 ;        VERSION = code system version id
"RTN","LA7VHLU6",188,0)
 ;        LA76247 = ien of concept to screen on
"RTN","LA7VHLU6",189,0)
 ;        LA76248 = related Lab Messaging configuration for non-standard code lookup (optional)
"RTN","LA7VHLU6",190,0)
 ;                  used when code is only for a specific interface
"RTN","LA7VHLU6",191,0)
 ;
"RTN","LA7VHLU6",192,0)
 ; Returns  LA7Y = variable pointer format^database storage location
"RTN","LA7VHLU6",193,0)
 ;                 OR
"RTN","LA7VHLU6",194,0)
 ;                 -1^^^^ien of override concept (if override concept)
"RTN","LA7VHLU6",195,0)
 ;
"RTN","LA7VHLU6",196,0)
 N DA,LA764061,LA7FILE,LA7HIER,LA7ROOT,LA7X,LA7Y,LOCAL,X,Y
"RTN","LA7VHLU6",197,0)
 S LA76247=$G(LA76247)
"RTN","LA7VHLU6",198,0)
 I 'LA76247 Q 0
"RTN","LA7VHLU6",199,0)
 S LA7FILE=""
"RTN","LA7VHLU6",200,0)
 S LOCAL=$S(NCS="L":1,$E(NCS,1,2)="99":1,1:0)
"RTN","LA7VHLU6",201,0)
 S LA764061=$P($G(^LAB(62.47,LA76247,0)),"^",3),LA7Y="^"_$P($G(^LAB(64.061,LA764061,63)),"^",1,3)
"RTN","LA7VHLU6",202,0)
 ;
"RTN","LA7VHLU6",203,0)
 ; If code system is SNOMED CT
"RTN","LA7VHLU6",204,0)
 I NCS="SCT" D
"RTN","LA7VHLU6",205,0)
 . S LA7ROOT=$Q(^LAB(62.47,"AD",LA76247,NCS,CODE))
"RTN","LA7VHLU6",206,0)
 . I LA7ROOT'="",$QS(LA7ROOT,2)="AD",$QS(LA7ROOT,3)=LA76247,$QS(LA7ROOT,4)=NCS,$QS(LA7ROOT,5)=CODE D  Q
"RTN","LA7VHLU6",207,0)
 . . S X=$QS(LA7ROOT,6)
"RTN","LA7VHLU6",208,0)
 . . I X S LA7Y="-1^^^^"_X
"RTN","LA7VHLU6",209,0)
 . I $S(LA76247=7:1,LA76247=21:1,1:0) S LA7Y=$$SCT2KB(CODE,TEXT,NCS,VERSION) D  Q
"RTN","LA7VHLU6",210,0)
 . . I LA7Y="" S LA7Y=$$SCT2PN(CODE,TEXT,NCS,VERSION)
"RTN","LA7VHLU6",211,0)
 . S LA7HIER=$$PRID(CODE,NCS,LA764061)
"RTN","LA7VHLU6",212,0)
 . S LA7FILE=$P(LA7HIER,"^",2)
"RTN","LA7VHLU6",213,0)
 . I LA7FILE S LA7Y=$$SCT2IEN(CODE,TEXT,VERSION,LA7FILE,LA76247,LA76248)_";"_$P($$ROOT^DILFD(LA7FILE),"^",2)_LA7Y
"RTN","LA7VHLU6",214,0)
 ;
"RTN","LA7VHLU6",215,0)
 ; If code system is LOCAL (HL7 "L" OR "99XXX") and for a specific interface
"RTN","LA7VHLU6",216,0)
 I LOCAL,LA76248 D
"RTN","LA7VHLU6",217,0)
 . S LA7ROOT=$Q(^LAB(62.47,"AD1",LA76247,LA76248,NCS,CODE)),LA764061=0
"RTN","LA7VHLU6",218,0)
 . I LA7ROOT="" Q
"RTN","LA7VHLU6",219,0)
 . I $QS(LA7ROOT,2)="AD1",$QS(LA7ROOT,3)=LA76247,$QS(LA7ROOT,4)=LA76248,$QS(LA7ROOT,5)=NCS,$QS(LA7ROOT,6)=CODE D
"RTN","LA7VHLU6",220,0)
 . . S LA764061=$QS(LA7ROOT,7),DA=$QS(LA7ROOT,8)
"RTN","LA7VHLU6",221,0)
 . . S X=$P(^LAB(62.47,LA76247,1,DA,0),"^",4)
"RTN","LA7VHLU6",222,0)
 . . I X S LA7Y="-1^^^^"_X Q
"RTN","LA7VHLU6",223,0)
 . . S LA7FILE=$P($G(^LAB(62.47,LA76247,1,DA,2)),"^")
"RTN","LA7VHLU6",224,0)
 . . I LA7FILE S LA7Y=LA7FILE
"RTN","LA7VHLU6",225,0)
 . . I LA764061 S LA7Y=LA7Y_"^"_$P($G(^LAB(64.061,LA764061,63)),"^",1,3)
"RTN","LA7VHLU6",226,0)
 ;
"RTN","LA7VHLU6",227,0)
 Q LA7Y
"RTN","LA7VHLU6",228,0)
 ;
"RTN","LA7VHLU6",229,0)
 ;
"RTN","LA7VHLU6",230,0)
SCT2KB(CODE,TEXT,NCS,VERSION) ; Convert Susceptibility codes to local codes.
"RTN","LA7VHLU6",231,0)
 ; Call with  CODE = susceptibility code
"RTN","LA7VHLU6",232,0)
 ;            TEXT = code text
"RTN","LA7VHLU6",233,0)
 ;             NCS = name of coding system (SCT, 99xxx, L)
"RTN","LA7VHLU6",234,0)
 ;         VERSION = code system version id
"RTN","LA7VHLU6",235,0)
 ;
"RTN","LA7VHLU6",236,0)
 ; Returns    LA7Y = local susceptibility code
"RTN","LA7VHLU6",237,0)
 ;
"RTN","LA7VHLU6",238,0)
 N LA7Y
"RTN","LA7VHLU6",239,0)
 S LA7Y=""
"RTN","LA7VHLU6",240,0)
 I NCS="SCT" S LA7Y=$S(CODE=131196009:"S",CODE=260357007:"MS",CODE=30714006:"R",CODE=264841006:"I",1:"")
"RTN","LA7VHLU6",241,0)
 ;
"RTN","LA7VHLU6",242,0)
 ; Convert local codes
"RTN","LA7VHLU6",243,0)
 I $S(NCS="L":1,$E(NCS,1,2)="99":1,1:0) S LA7Y=TEXT
"RTN","LA7VHLU6",244,0)
 ;
"RTN","LA7VHLU6",245,0)
 Q LA7Y
"RTN","LA7VHLU6",246,0)
 ;
"RTN","LA7VHLU6",247,0)
 ;
"RTN","LA7VHLU6",248,0)
SCT2PSTG(CODE,TEXT,NCS,VERSION) ; Convert Parasite Stage codes to local codes.
"RTN","LA7VHLU6",249,0)
 ; Call with  CODE = parasite stage code
"RTN","LA7VHLU6",250,0)
 ;            TEXT = code text
"RTN","LA7VHLU6",251,0)
 ;             NCS = name of coding system (SCT, 99xxx, L)
"RTN","LA7VHLU6",252,0)
 ;         VERSION = code system version id
"RTN","LA7VHLU6",253,0)
 ;
"RTN","LA7VHLU6",254,0)
 ; Returns    LA7Y = local parasite stage code
"RTN","LA7VHLU6",255,0)
 ;
"RTN","LA7VHLU6",256,0)
 N LA7Y
"RTN","LA7VHLU6",257,0)
 S LA7Y=""
"RTN","LA7VHLU6",258,0)
 I NCS="SCT" S LA7Y=$S(CODE=103551003:"T",CODE=103552005:"C",CODE=116990009:"E",CODE=48458007:"L",CODE=284701003:"S",CODE=103537003:"G",CODE=2105009:"M",CODE=103568004:"R",CODE=2105009:"F",1:"")
"RTN","LA7VHLU6",259,0)
 Q LA7Y
"RTN","LA7VHLU6",260,0)
 ;
"RTN","LA7VHLU6",261,0)
 ;
"RTN","LA7VHLU6",262,0)
SCT2PN(CODE,TEXT,NCS,VERSION) ; Convert Positive/Negative to local codes.
"RTN","LA7VHLU6",263,0)
 ; Call with  CODE = positive/negative
"RTN","LA7VHLU6",264,0)
 ;            TEXT = code text
"RTN","LA7VHLU6",265,0)
 ;             NCS = name of coding system (SCT, 99xxx, L)
"RTN","LA7VHLU6",266,0)
 ;         VERSION = code system version id
"RTN","LA7VHLU6",267,0)
 ;
"RTN","LA7VHLU6",268,0)
 ; Returns    LA7Y = local positive/negative code
"RTN","LA7VHLU6",269,0)
 ;
"RTN","LA7VHLU6",270,0)
 N LA7Y
"RTN","LA7VHLU6",271,0)
 S LA7Y=""
"RTN","LA7VHLU6",272,0)
 I NCS="SCT" S LA7Y=$S(CODE=10828004:"P",CODE=260385009:"N",1:"")
"RTN","LA7VHLU6",273,0)
 ;
"RTN","LA7VHLU6",274,0)
 ; Convert local codes
"RTN","LA7VHLU6",275,0)
 I $S(NCS="L":1,$E(NCS,1,2)="99":1,1:0) S LA7Y=TEXT
"RTN","LA7VHLU6",276,0)
 ;
"RTN","LA7VHLU6",277,0)
 Q LA7Y
"RTN","LA7VIN2A")
0^6^B34485992
"RTN","LA7VIN2A",1,0)
LA7VIN2A ;DALOI/JMC - Process Incoming UI Msgs, continued ;12/20/16  11:20
"RTN","LA7VIN2A",2,0)
 ;;5.2;AUTOMATED LAB INSTRUMENTS;**74,88,90**;Sep 27, 1994;Build 17
"RTN","LA7VIN2A",3,0)
 ;
"RTN","LA7VIN2A",4,0)
 ;This routine is a continuation of LA7VIN2 and is only called from there.
"RTN","LA7VIN2A",5,0)
 Q
"RTN","LA7VIN2A",6,0)
 ;
"RTN","LA7VIN2A",7,0)
NTE ; Process NTE segment
"RTN","LA7VIN2A",8,0)
 ; NTE segments contain comments from instruments or other facilities.
"RTN","LA7VIN2A",9,0)
 ; NTE segments following OBR's contain comments which refer to the entire test battery.
"RTN","LA7VIN2A",10,0)
 ; NTE segments following OBX's contain comments which are test specific.
"RTN","LA7VIN2A",11,0)
 ;
"RTN","LA7VIN2A",12,0)
 ; For comments in ORU messages:
"RTN","LA7VIN2A",13,0)
 ;  Test specific comments can be prefaced with a site defined prefix -
"RTN","LA7VIN2A",14,0)
 ;  see field REMARK PREFIX (#19) in CHEM TEST multiple of AUTOMATED INSTRUMENT (#62.4 file.
"RTN","LA7VIN2A",15,0)
 ;  There can be more than one NTE, each will be stored as a comment in ^LAH.
"RTN","LA7VIN2A",16,0)
 ;
"RTN","LA7VIN2A",17,0)
 N LA7,LA7CMTYP,LA7I,LA7NTE,LA7SOC,X,Y
"RTN","LA7VIN2A",18,0)
 ;
"RTN","LA7VIN2A",19,0)
 S LA7SOC=$$P^LA7VHLU(.LA7SEG,3,LA7FS)
"RTN","LA7VIN2A",20,0)
 S LA7NTE=$$P^LA7VHLU(.LA7SEG,4,LA7FS)
"RTN","LA7VIN2A",21,0)
 S LA7CMTYP=$$P^LA7VHLU(.LA7SEG,5,LA7FS)
"RTN","LA7VIN2A",22,0)
 D FLD2ARR^LA7VHLU7(.LA7CMTYP,LA7FS_LA7ECH)
"RTN","LA7VIN2A",23,0)
 ;
"RTN","LA7VIN2A",24,0)
 ; Trim trailing spaces.
"RTN","LA7VIN2A",25,0)
 I LA7NTE'="" S LA7NTE=$$TRIM^XLFSTR(LA7NTE,"R"," ")
"RTN","LA7VIN2A",26,0)
 I LA7NTE="" S LA7NTE=" "
"RTN","LA7VIN2A",27,0)
 ;
"RTN","LA7VIN2A",28,0)
 I LA7MTYP="ORM" D OCOM Q
"RTN","LA7VIN2A",29,0)
 ;
"RTN","LA7VIN2A",30,0)
 ; Check for repeating comments in NTE segment and process
"RTN","LA7VIN2A",31,0)
 ; If "^" in remark then translate to "~" to store.
"RTN","LA7VIN2A",32,0)
 F LA7I=1:1:$L(LA7NTE,$E(LA7ECH,2)) D
"RTN","LA7VIN2A",33,0)
 . S LA7RMK=$P(LA7NTE,$E(LA7ECH,2),LA7I)
"RTN","LA7VIN2A",34,0)
 . I LA7RMK="" Q
"RTN","LA7VIN2A",35,0)
 . S LA7RMK=$$UNESC^LA7VHLU3(LA7RMK,LA7FS_LA7ECH)
"RTN","LA7VIN2A",36,0)
 . I LA7RMK["^" S LA7RMK=$TR(LA7RMK,"^","~")
"RTN","LA7VIN2A",37,0)
 . I LA7MTYP="ORU" D RCOM Q
"RTN","LA7VIN2A",38,0)
 . I LA7MTYP="ORR",$G(LA7OTYPE)="UA" D RCOM Q
"RTN","LA7VIN2A",39,0)
 ;
"RTN","LA7VIN2A",40,0)
 ; Clean up LA7RMK except for LA7RMK(0)
"RTN","LA7VIN2A",41,0)
 K X M X=LA7RMK(0) K LA7RMK M LA7RMK(0)=X
"RTN","LA7VIN2A",42,0)
 ;
"RTN","LA7VIN2A",43,0)
 Q
"RTN","LA7VIN2A",44,0)
 ;
"RTN","LA7VIN2A",45,0)
 ;
"RTN","LA7VIN2A",46,0)
RCOM ; Store result comments in ORU messages
"RTN","LA7VIN2A",47,0)
 ;
"RTN","LA7VIN2A",48,0)
 ; Check there's pointers to LAH
"RTN","LA7VIN2A",49,0)
 I $G(LA7LWL)=""!($G(LA7ISQN)="") Q
"RTN","LA7VIN2A",50,0)
 ;
"RTN","LA7VIN2A",51,0)
 ; Don't store remark if same as specimen comment (without "~").
"RTN","LA7VIN2A",52,0)
 I $G(LA7AA),$G(LA7AD),$G(LA7AN),LA7RMK=$TR($P($G(^LRO(68,LA7AA,1,LA7AD,1,LA7AN,3)),"^",6),"~") Q
"RTN","LA7VIN2A",53,0)
 ; Or patient info (#.091 in file 63) - info previously downloaded
"RTN","LA7VIN2A",54,0)
 I $G(LA7AA),$G(LA7AD),$G(LA7AN),LA7RMK=$G(^LR(+$G(^LRO(68,LA7AA,1,LA7AD,1,LA7AN,0)),.091)) Q
"RTN","LA7VIN2A",55,0)
 ;
"RTN","LA7VIN2A",56,0)
 ; If test specific, store comment prefix with comments (see LA7VIN5)
"RTN","LA7VIN2A",57,0)
 I $G(LA7SS)="CH",$O(LA7RMK(0,0)) D  Q
"RTN","LA7VIN2A",58,0)
 . N LA7I
"RTN","LA7VIN2A",59,0)
 . S LA7I=0
"RTN","LA7VIN2A",60,0)
 . F  S LA7I=$O(LA7RMK(0,LA7I)) Q:'LA7I  D
"RTN","LA7VIN2A",61,0)
 . . I $G(LA7AUTORELEASE) D RMKSET^LASET(LA7LWL,LA7ISQN,LA7RMK,$P(LA7RMK(0,LA7I),"^",2)) Q
"RTN","LA7VIN2A",62,0)
 . . I '$P(LA7RMK(0,LA7I),"^") Q
"RTN","LA7VIN2A",63,0)
 . . ; Don't store if status not "FINAL"
"RTN","LA7VIN2A",64,0)
 . . I $P(LA7RMK(0,LA7I),"^")=2,"CFUX"'[$G(LA7ORS) Q
"RTN","LA7VIN2A",65,0)
 . . D RMKSET^LASET(LA7LWL,LA7ISQN,LA7RMK,$P(LA7RMK(0,LA7I),"^",2))
"RTN","LA7VIN2A",66,0)
 ;
"RTN","LA7VIN2A",67,0)
 ; Store comment in 1 node of ^LAH global
"RTN","LA7VIN2A",68,0)
 I $G(LA7SS)="CH" D  Q
"RTN","LA7VIN2A",69,0)
 . I $P(LA7624(0),"^",17)!($G(LA7AUTORELEASE)) D RMKSET^LASET(LA7LWL,LA7ISQN,LA7RMK,"")
"RTN","LA7VIN2A",70,0)
 ;
"RTN","LA7VIN2A",71,0)
 ; Store "MI" subscript comments/remarks in specific places.
"RTN","LA7VIN2A",72,0)
 ;  - Don't store comments from ORR messages - handled by mail bulletin
"RTN","LA7VIN2A",73,0)
 I $G(LA7SS)="MI",LA7MTYP'="ORR" D  Q
"RTN","LA7VIN2A",74,0)
 . N LA7ISQN2,LA7ISQN3,LA7ISQN4,LA7ND,LACONCPT,LAPREFIX
"RTN","LA7VIN2A",75,0)
 . S (LA7ISQN2,LA7ISQN3,LA7ISQN4,LA7ND)=""
"RTN","LA7VIN2A",76,0)
 . I $G(LA7CMTYP(3))="HL70364",$E($G(LA7CMTYP(1)),1,7)="VA-LRMI" D MISPC
"RTN","LA7VIN2A",77,0)
 . S LACONCPT=$P($G(LA7RMK(0,0)),"^"),LAPREFIX=$P($G(LA7RMK(0,0)),"^",3)
"RTN","LA7VIN2A",78,0)
 . D MICMT,UPD0
"RTN","LA7VIN2A",79,0)
 ;
"RTN","LA7VIN2A",80,0)
 ; Store AP subscripts comments/remarks in specific places.
"RTN","LA7VIN2A",81,0)
 ; - Don't store comments from ORR messages - handled by mail bulletin
"RTN","LA7VIN2A",82,0)
 I $G(LA7SS)'="","SPCYEM"[LA7SS,LA7MTYP'="ORR" D  Q
"RTN","LA7VIN2A",83,0)
 . N LA7ISQN2,LAPREFIX
"RTN","LA7VIN2A",84,0)
 . S LA7ND=99,LAPREFIX=$P($G(LA7RMK(0,0)),"^",3),(LA7ISQN2,LA7ISQN3,LA7ISQN4)=""
"RTN","LA7VIN2A",85,0)
 . S LA7ISQN2=$O(^LAH(LA7LWL,1,LA7ISQN,LA7SS,99,"A"),-1)+1
"RTN","LA7VIN2A",86,0)
 . S ^LAH(LWL,1,LA7ISQN,LA7SS,99,LA7ISQN2,0)=LAPREFIX_LA7RMK
"RTN","LA7VIN2A",87,0)
 . D UPD0
"RTN","LA7VIN2A",88,0)
 ;
"RTN","LA7VIN2A",89,0)
 Q
"RTN","LA7VIN2A",90,0)
 ;
"RTN","LA7VIN2A",91,0)
 ;
"RTN","LA7VIN2A",92,0)
OCOM ; Store order comments from ORM messages in file #69.6
"RTN","LA7VIN2A",93,0)
 ; Check for repeating comments in NTE segment and process
"RTN","LA7VIN2A",94,0)
 ; If "^" in remark then translate to "~" to store.
"RTN","LA7VIN2A",95,0)
 ;
"RTN","LA7VIN2A",96,0)
 ; If source of comment (LA7SOC) is "RQ" then comment is from CHCS which
"RTN","LA7VIN2A",97,0)
 ; uses a composite data type for NTE-3. VistA only extracts component #9
"RTN","LA7VIN2A",98,0)
 ; which contains the external value of the comment.
"RTN","LA7VIN2A",99,0)
 ;
"RTN","LA7VIN2A",100,0)
 N LA7DIE,LA7RMK,LA7WP,X
"RTN","LA7VIN2A",101,0)
 I $G(LA7696)<1 Q
"RTN","LA7VIN2A",102,0)
 F LA7I=1:1:$L(LA7NTE,$E(LA7ECH,2)) D
"RTN","LA7VIN2A",103,0)
 . S LA7RMK=$P(LA7NTE,$E(LA7ECH,2),LA7I)
"RTN","LA7VIN2A",104,0)
 . I LA7SOC="RQ" D
"RTN","LA7VIN2A",105,0)
 . . S X=$P(LA7RMK,$E(LA7ECH),9)
"RTN","LA7VIN2A",106,0)
 . . I X'="" S LA7RMK=X
"RTN","LA7VIN2A",107,0)
 . I LA7RMK="" Q
"RTN","LA7VIN2A",108,0)
 . S LA7RMK=$$UNESC^LA7VHLU3(LA7RMK,LA7FS_LA7ECH)
"RTN","LA7VIN2A",109,0)
 . I LA7RMK["^" S LA7RMK=$TR(LA7RMK,"^","~")
"RTN","LA7VIN2A",110,0)
 . S LA7WP(LA7I,0)=LA7RMK
"RTN","LA7VIN2A",111,0)
 D WP^DIE(69.6,LA7696_",",99,"A","LA7WP","LA7DIE(99)")
"RTN","LA7VIN2A",112,0)
 Q
"RTN","LA7VIN2A",113,0)
 ;
"RTN","LA7VIN2A",114,0)
 ;
"RTN","LA7VIN2A",115,0)
MISPC ; Process special VistA Lab MI preliminary reports/test/remarks comment types
"RTN","LA7VIN2A",116,0)
 ;
"RTN","LA7VIN2A",117,0)
 N LA7I
"RTN","LA7VIN2A",118,0)
 S LA7I=+$E(LA7CMTYP(1),8,99)
"RTN","LA7VIN2A",119,0)
 ;
"RTN","LA7VIN2A",120,0)
 ; Comment on Specimen: VA-LRMI001 node = 99
"RTN","LA7VIN2A",121,0)
 ; Bacterial preliminary/report/tests remark: VA-LRMI010:VA-LRMI013 nodes = 4,19,26,25
"RTN","LA7VIN2A",122,0)
 ; Parasite preliminary/report/tests remark: VA-LRMI020:VA-LRMI023 nodes = 7,21,27,24
"RTN","LA7VIN2A",123,0)
 ; Fungal preliminary/report/tests remark: VA-LRMI030:VA-LRMI033 nodes = 10,22,28,15
"RTN","LA7VIN2A",124,0)
 ; Mycobacteria preliminary/report/tests remark: VA-LRMI040:VA-LRMI042 nodes = 13,23,29
"RTN","LA7VIN2A",125,0)
 ; Viral preliminary/report/tests remark: VA-LRMI050:VA-LRMI052 nodes = 18,20,30
"RTN","LA7VIN2A",126,0)
 ; Sterility Results: VA-LRMI060 node = 31
"RTN","LA7VIN2A",127,0)
 ;
"RTN","LA7VIN2A",128,0)
 S LA7ND=$P("99^^^^^^^^^4^19^26^25^^^^^^^7^21^27^24^^^^^^^10^22^28^15^^^^^^^13^23^29^^^^^^^^18^20^30^^^^^^^^31","^",LA7I)
"RTN","LA7VIN2A",129,0)
 ;
"RTN","LA7VIN2A",130,0)
 Q
"RTN","LA7VIN2A",131,0)
 ;
"RTN","LA7VIN2A",132,0)
 ;
"RTN","LA7VIN2A",133,0)
MICMT ; Store MI comments/remarks
"RTN","LA7VIN2A",134,0)
 ; From above
"RTN","LA7VIN2A",135,0)
 I LACONCPT=13 D  Q
"RTN","LA7VIN2A",136,0)
 . S LA7ND=6,LA7ISQN2=$P($P(LA7RMK(0,0),"^",2),","),LA7ISQN3=$P($P(LA7RMK(0,0),"^",2),",",2)
"RTN","LA7VIN2A",137,0)
 . S LA7ISQN4=$O(^LAH(LWL,1,LA7ISQN,"MI",6,LA7ISQN2,1,LA7ISQN3,1,"A"),-1)+1
"RTN","LA7VIN2A",138,0)
 . S ^LAH(LWL,1,LA7ISQN,"MI",6,LA7ISQN2,1,LA7ISQN3,1,LA7ISQN4,0)=LAPREFIX_LA7RMK
"RTN","LA7VIN2A",139,0)
 ;
"RTN","LA7VIN2A",140,0)
 I LACONCPT=3!(LACONCPT=7)!(LACONCPT=10)!(LACONCPT=4) D  Q
"RTN","LA7VIN2A",141,0)
 . S LA7ND=$S(LACONCPT=4:12,1:3)
"RTN","LA7VIN2A",142,0)
 . S LA7ISQN2=$P($P(LA7RMK(0,0),"^",2),","),LA7ISQN3=$O(^LAH(LWL,1,LA7ISQN,"MI",LA7ND,LA7ISQN2,1,"A"),-1)+1
"RTN","LA7VIN2A",143,0)
 . S ^LAH(LWL,1,LA7ISQN,"MI",LA7ND,LA7ISQN2,1,LA7ISQN3,0)=LAPREFIX_LA7RMK
"RTN","LA7VIN2A",144,0)
 ;
"RTN","LA7VIN2A",145,0)
 ; Store all other concepts here.
"RTN","LA7VIN2A",146,0)
 I LA7ND="" S LA7ND=$S(LACONCPT<2:4,LACONCPT=12:7,LACONCPT=15:10,LACONCPT=22:13,LACONCPT=79:13,LACONCPT=85:13,LACONCPT=30:18,1:4)
"RTN","LA7VIN2A",147,0)
 S LA7ISQN2=$O(^LAH(LWL,1,LA7ISQN,"MI",LA7ND,"A"),-1)+1
"RTN","LA7VIN2A",148,0)
 S ^LAH(LWL,1,LA7ISQN,"MI",LA7ND,LA7ISQN2,0)=LAPREFIX_LA7RMK
"RTN","LA7VIN2A",149,0)
 ;
"RTN","LA7VIN2A",150,0)
 Q
"RTN","LA7VIN2A",151,0)
 ;
"RTN","LA7VIN2A",152,0)
 ;
"RTN","LA7VIN2A",153,0)
UPD0 ; Update the remarks/comments zeroth node with status
"RTN","LA7VIN2A",154,0)
 ;
"RTN","LA7VIN2A",155,0)
 N LA7STAT,LA7PL,LA7X
"RTN","LA7VIN2A",156,0)
 ;
"RTN","LA7VIN2A",157,0)
 ; Don't update status/performing lab when processing Lab UI interface (1) messages.
"RTN","LA7VIN2A",158,0)
 ;   User releasing report indicates status and performing lab.
"RTN","LA7VIN2A",159,0)
 I LA7INTYP=1 Q
"RTN","LA7VIN2A",160,0)
 ;
"RTN","LA7VIN2A",161,0)
 ; Attempt to identify performing lab from OBX-15 (NTE following OBX) or OBR-32 (NTE following OBR)
"RTN","LA7VIN2A",162,0)
 S LA7PL=$G(LA7PRODID)
"RTN","LA7VIN2A",163,0)
 I LA7PL="",$G(LA7OBR32(7))'="" S LA7PL=$$RESFID^LA7VHLU2(LA7OBR32(7),LA7SFAC,LA7CS)
"RTN","LA7VIN2A",164,0)
 ;
"RTN","LA7VIN2A",165,0)
 S LA7STAT=$S($G(LA7ORS)'="":LA7ORS,1:$G(LA7OBR25))
"RTN","LA7VIN2A",166,0)
 ;
"RTN","LA7VIN2A",167,0)
 I LA7ISQN4 D  Q
"RTN","LA7VIN2A",168,0)
 . I LA7PL'="" S $P(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,LA7ISQN2,1,LA7ISQN3,1,0),"^")=LA7PL
"RTN","LA7VIN2A",169,0)
 . I $P($G(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,LA7ISQN2,1,LA7ISQN3,0)),"^",4)'="" Q
"RTN","LA7VIN2A",170,0)
 . I LA7STAT'="" S $P(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,LA7ISQN2,1,LA7ISQN3,1,0),"^",4)=LA7STAT
"RTN","LA7VIN2A",171,0)
 ;
"RTN","LA7VIN2A",172,0)
 I LA7ISQN3 D  Q
"RTN","LA7VIN2A",173,0)
 . I LA7PL'="" S $P(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,LA7ISQN2,1,0),"^")=LA7PL
"RTN","LA7VIN2A",174,0)
 . I $P($G(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,LA7ISQN2,0)),"^",4)'="" Q
"RTN","LA7VIN2A",175,0)
 . S $P(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,LA7ISQN2,1,0),"^",4)=LA7STAT
"RTN","LA7VIN2A",176,0)
 ;
"RTN","LA7VIN2A",177,0)
 I LA7ISQN2 D  Q
"RTN","LA7VIN2A",178,0)
 . I LA7PL'="" S $P(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,0),"^")=LA7PL
"RTN","LA7VIN2A",179,0)
 . I $P($G(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,0)),"^",4)'="" Q
"RTN","LA7VIN2A",180,0)
 . S $P(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,0),"^",4)=LA7STAT
"RTN","LA7VIN2A",181,0)
 Q
"RTN","LA7VIN7")
0^5^B83943151
"RTN","LA7VIN7",1,0)
LA7VIN7 ;DALOI/JDB - HANDLE ORU OBX FOR MICRO/AP ;12/20/16  11:20
"RTN","LA7VIN7",2,0)
 ;;5.2;AUTOMATED LAB INSTRUMENTS;**74,90**;Sep 27, 1994;Build 17
"RTN","LA7VIN7",3,0)
 ;
"RTN","LA7VIN7",4,0)
 ; Continuation of LA7VIN1 and is only called from there.
"RTN","LA7VIN7",5,0)
 ; Process OBX segments for "MI" subscript tests.
"RTN","LA7VIN7",6,0)
 Q
"RTN","LA7VIN7",7,0)
 ;
"RTN","LA7VIN7",8,0)
 ;
"RTN","LA7VIN7",9,0)
OBX ;
"RTN","LA7VIN7",10,0)
 ;
"RTN","LA7VIN7",11,0)
 N ALTCONC,CODSYS,DATA,DIERR,DSOBX3,DSOBX5,ISCOMP,OBX3,OBX4,OBX5,OBX6,OBX8,OBX11,OBX15
"RTN","LA7VIN7",12,0)
 N LA76247,LA7612,LA74,LA7RLNC,LA7RNLT,LA7SCT,LA7SUBFL,LA7VTYP,LAX,LAY
"RTN","LA7VIN7",13,0)
 ;
"RTN","LA7VIN7",14,0)
 ; Note: LA7OBR25 holds the OBR's report status (OBR-25)
"RTN","LA7VIN7",15,0)
 K LA7RMK,^TMP("LA7TREE",$J)
"RTN","LA7VIN7",16,0)
 ;
"RTN","LA7VIN7",17,0)
 ; OBX Set ID
"RTN","LA7VIN7",18,0)
 S LA7SOBX=$$P^LA7VHLU(.LA7SEG,2,LA7FS)
"RTN","LA7VIN7",19,0)
 ;
"RTN","LA7VIN7",20,0)
 ; Value type - type of data from Table 0125
"RTN","LA7VIN7",21,0)
 S LA7VTYP=$P($$P^LA7VHLU(.LA7SEG,3,LA7FS),LA7CS)
"RTN","LA7VIN7",22,0)
 ;
"RTN","LA7VIN7",23,0)
 S OBX3=$$FIELD^LA7VHLU7(3)
"RTN","LA7VIN7",24,0)
 D FLD2ARR^LA7VHLU7(.OBX3)
"RTN","LA7VIN7",25,0)
 I $D(OBX3)>1 S ISCOMP("OBX3")=1
"RTN","LA7VIN7",26,0)
 ; step through code tuplets until we find one we can process
"RTN","LA7VIN7",27,0)
 S DSOBX3=$$DBSTORE^LA7VHLU7(.OBX3,1,,,LA76248,.DATA)
"RTN","LA7VIN7",28,0)
 ; check for LN and/or 99VA64 code systems
"RTN","LA7VIN7",29,0)
 K CODSYS D CODSYS^LA7VHLU7(.OBX3,.CODSYS)
"RTN","LA7VIN7",30,0)
 ; Result's LOINC code
"RTN","LA7VIN7",31,0)
 S LAX=+$O(CODSYS("B","LN",0))
"RTN","LA7VIN7",32,0)
 S LA7RLNC=""
"RTN","LA7VIN7",33,0)
 I LAX S LA7RLNC=OBX3(LAX-2) S LA7RLNC(1)=OBX3(LAX-1)
"RTN","LA7VIN7",34,0)
 ; Result's NLT code
"RTN","LA7VIN7",35,0)
 S LAX=+$O(CODSYS("B","99VA64",0))
"RTN","LA7VIN7",36,0)
 S LA7RNLT=""
"RTN","LA7VIN7",37,0)
 I LAX S LA7RNLT=OBX3(LAX-2) S LA7RNLT(1)=OBX3(LAX-1)
"RTN","LA7VIN7",38,0)
 K CODSYS
"RTN","LA7VIN7",39,0)
 ;
"RTN","LA7VIN7",40,0)
 ; OBX3 cannot be mapped. Stop processing.
"RTN","LA7VIN7",41,0)
 ; No File #62.47 mapping found for OBX-3
"RTN","LA7VIN7",42,0)
 I +DSOBX3'>0 D  Q  ;
"RTN","LA7VIN7",43,0)
 . N LA7OBX3
"RTN","LA7VIN7",44,0)
 . S LA7OBX3=OBX3 ;needed for log
"RTN","LA7VIN7",45,0)
 . S LA7OBX3=$$UNESC^LA7VHLU3(LA7OBX3,LA7FS_LA7ECH)
"RTN","LA7VIN7",46,0)
 . D CREATE^LA7LOG(200)
"RTN","LA7VIN7",47,0)
 . S LA7KILAH=1 S LA7QUIT=2
"RTN","LA7VIN7",48,0)
 ;
"RTN","LA7VIN7",49,0)
 S LA76247=$P(DSOBX3,"^",1)
"RTN","LA7VIN7",50,0)
 ;
"RTN","LA7VIN7",51,0)
 ;
"RTN","LA7VIN7",52,0)
 S OBX4=$$FIELD^LA7VHLU7(4)
"RTN","LA7VIN7",53,0)
 S OBX5=$$FIELD^LA7VHLU7(5)
"RTN","LA7VIN7",54,0)
 I OBX5="" D CREATE^LA7LOG(17) Q
"RTN","LA7VIN7",55,0)
 ;
"RTN","LA7VIN7",56,0)
 S (DSOBX5,LA7SCT)="",LA7612=0
"RTN","LA7VIN7",57,0)
 ;
"RTN","LA7VIN7",58,0)
 ; String Data/ Formatted Text/ Text Data
"RTN","LA7VIN7",59,0)
 ;I LA7VTYP?1(1"FT",1"ST",1"TX") D
"RTN","LA7VIN7",60,0)
 ;I LA7VTYP="FT" D
"RTN","LA7VIN7",61,0)
 ;. K LAX
"RTN","LA7VIN7",62,0)
 ;. D PA^LA7VHLU(.LA7SEG,6,LA7FS,.LAX)
"RTN","LA7VIN7",63,0)
 ;. D UNESCFT^LA7VHLU3(.LAX,LA7FS_LA7ECH,.LA7WP)
"RTN","LA7VIN7",64,0)
 ;
"RTN","LA7VIN7",65,0)
 I LA7VTYP?1(1"CE",1"CM",1"CNE",1"CWE") D
"RTN","LA7VIN7",66,0)
 . D FLD2ARR^LA7VHLU7(.OBX5)
"RTN","LA7VIN7",67,0)
 . I $D(OBX5)>1 S ISCOMP("OBX5")=1
"RTN","LA7VIN7",68,0)
 . ; step through code tuplets until we find one we can process
"RTN","LA7VIN7",69,0)
 . K DATA
"RTN","LA7VIN7",70,0)
 . S DSOBX5=$$DBSTORE^LA7VHLU7(.OBX5,2,1,+LA76247,+$G(LA76248),.DATA)
"RTN","LA7VIN7",71,0)
 . K CODSYS
"RTN","LA7VIN7",72,0)
 . D CODSYS^LA7VHLU7(.OBX5,.CODSYS)
"RTN","LA7VIN7",73,0)
 . ; No Coding System found is an error
"RTN","LA7VIN7",74,0)
 . ; Prevent new File #61.2 entries created from bad OBX-5
"RTN","LA7VIN7",75,0)
 . I $O(CODSYS("B",0))="" D  Q  ;
"RTN","LA7VIN7",76,0)
 . . N LA7VOBX5
"RTN","LA7VIN7",77,0)
 . . S LA7VOBX5=OBX5
"RTN","LA7VIN7",78,0)
 . . S LA7VOBX5=$$UNESC^LA7VHLU3(LA7VOBX5,LA7FS_LA7ECH)
"RTN","LA7VIN7",79,0)
 . . D CREATE^LA7LOG(203)
"RTN","LA7VIN7",80,0)
 . . S LA7KILAH=1 S LA7QUIT=2
"RTN","LA7VIN7",81,0)
 . ;
"RTN","LA7VIN7",82,0)
 . ; get SCT code if present
"RTN","LA7VIN7",83,0)
 . S LAX=$O(CODSYS("B","SCT",0)) I LAX S LA7SCT=$G(OBX5(LAX-2))
"RTN","LA7VIN7",84,0)
 . ;
"RTN","LA7VIN7",85,0)
 ;
"RTN","LA7VIN7",86,0)
 Q:$G(LA7QUIT)
"RTN","LA7VIN7",87,0)
 ;
"RTN","LA7VIN7",88,0)
 ; Need to check data storage type of DSOBX3 and compare to data in OBX-5.
"RTN","LA7VIN7",89,0)
 ; If OBX5 is a CE but DSOBX3 shows text (data type mismatch)
"RTN","LA7VIN7",90,0)
 ; then check if there's an ALTERNATIVE CONCEPT for LA76247
"RTN","LA7VIN7",91,0)
 S ALTCONC=$$ALCONCPT^LA7VHLU6(LA76247)
"RTN","LA7VIN7",92,0)
 I ALTCONC>0 I ALTCONC'=LA76247 D  ;
"RTN","LA7VIN7",93,0)
 . N R64061,SS,TLC,X,FILE,FLD,LAOUT,LAMSG,LADT1,LADT2
"RTN","LA7VIN7",94,0)
 . N DATAOK,X
"RTN","LA7VIN7",95,0)
 . S DATAOK=0
"RTN","LA7VIN7",96,0)
 . S FILE=$P(DSOBX3,"^",3)
"RTN","LA7VIN7",97,0)
 . S FLD=$P(DSOBX3,"^",4)
"RTN","LA7VIN7",98,0)
 . ; data type of current storage location
"RTN","LA7VIN7",99,0)
 . S LADT1=$$GET1^DID(FILE,FLD,"","TYPE","LAOUT","LAMSG")
"RTN","LA7VIN7",100,0)
 . I LADT1["POINTER",LA7VTYP?1(1"CE",1"CM",1"CNE",1"CWE") Q
"RTN","LA7VIN7",101,0)
 . S DATAOK=0
"RTN","LA7VIN7",102,0)
 . I LADT1="SET" D  Q:DATAOK  ;
"RTN","LA7VIN7",103,0)
 . . ; 7,21 can be reported as CE/SCT which get translated to SET
"RTN","LA7VIN7",104,0)
 . . I "^7^21^"[("^"_LA76247_"^") S DATAOK=1 Q
"RTN","LA7VIN7",105,0)
 . . S DATAOK=$$DATAOK(FILE,FLD,OBX5)
"RTN","LA7VIN7",106,0)
 . ;
"RTN","LA7VIN7",107,0)
 . I LADT1'="SET",LADT1'["POINTER",LA7VTYP'?1(1"CE",1"CM",1"CNE",1"CWE") Q
"RTN","LA7VIN7",108,0)
 . Q:DATAOK
"RTN","LA7VIN7",109,0)
 . ; get alternate concept data
"RTN","LA7VIN7",110,0)
 . S X=$G(^LAB(62.47,ALTCONC,0))
"RTN","LA7VIN7",111,0)
 . S R64061=$P(X,U,3)
"RTN","LA7VIN7",112,0)
 . S SS=$P(X,U,2)
"RTN","LA7VIN7",113,0)
 . S X=$G(^LAB(64.061,R64061,63))
"RTN","LA7VIN7",114,0)
 . S FILE=$P(X,U,2)
"RTN","LA7VIN7",115,0)
 . S FLD=$P(X,U,3)
"RTN","LA7VIN7",116,0)
 . I 'FILE I 'FLD Q
"RTN","LA7VIN7",117,0)
 . S TLC=$P(X,U,4) ;SCT Top Level
"RTN","LA7VIN7",118,0)
 . S LADT2=$$GET1^DID(FILE,FLD,"","TYPE","LAOUT","LAMSG")
"RTN","LA7VIN7",119,0)
 . I LADT1=LADT2 Q
"RTN","LA7VIN7",120,0)
 . I LA7VTYP?1(1"CE",1"CM",1"CNE",1"CWE") D
"RTN","LA7VIN7",121,0)
 . . I LADT1["POINTER" Q
"RTN","LA7VIN7",122,0)
 . . S DSOBX3(1)=DSOBX3
"RTN","LA7VIN7",123,0)
 . . S DSOBX3=ALTCONC_"^"_SS_"^"_FILE_"^"_FLD_"^"_TLC
"RTN","LA7VIN7",124,0)
 . I LA7VTYP'?1(1"CE",1"CM",1"CNE",1"CWE") D
"RTN","LA7VIN7",125,0)
 . . I LADT1'["POINTER" Q
"RTN","LA7VIN7",126,0)
 . . S DSOBX3(1)=DSOBX3
"RTN","LA7VIN7",127,0)
 . . S DSOBX3=ALTCONC_"^"_SS_"^"_FILE_"^"_FLD_"^"_TLC
"RTN","LA7VIN7",128,0)
 . ;
"RTN","LA7VIN7",129,0)
 ;
"RTN","LA7VIN7",130,0)
 ;
"RTN","LA7VIN7",131,0)
 I LA7VTYP?1(1"CE",1"CM",1"CNE",1"CWE") D
"RTN","LA7VIN7",132,0)
 . ; Do only if Concept (#62.47) is not a susceptibility concept (susc reported as SCT code)
"RTN","LA7VIN7",133,0)
 . ; Create new file entry if needed
"RTN","LA7VIN7",134,0)
 . I LA76247'=7,LA76247'=21,LA7SS="MI",(+DSOBX5<-1!(+DSOBX5=0)) D
"RTN","LA7VIN7",135,0)
 . . ; Stage Result may be reported as SCT code
"RTN","LA7VIN7",136,0)
 . . I LA76247=13 I LA7SCT'="" S X=$$SCT2PSTG^LA7VHLU6(LA7SCT,,"SCT") Q:X'=""
"RTN","LA7VIN7",137,0)
 . . ; add entry (add local code to #62.47 if needed?)
"RTN","LA7VIN7",138,0)
 . . ; If SCT was passed use that one, else use primary component
"RTN","LA7VIN7",139,0)
 . . N FILE,TXT,FLD,MSG
"RTN","LA7VIN7",140,0)
 . . S FILE=$P(DSOBX3,"^",3)
"RTN","LA7VIN7",141,0)
 . . S FLD=$P(DSOBX3,"^",4)
"RTN","LA7VIN7",142,0)
 . . S X=$$GET1^DID(FILE,FLD,"","TYPE","","MSG")
"RTN","LA7VIN7",143,0)
 . . I X'="POINTER" S FILE=""
"RTN","LA7VIN7",144,0)
 . . I X="POINTER" S FILE=$$GET1^DID(FILE,FLD,"","POINTER","","MSG")
"RTN","LA7VIN7",145,0)
 . . I FILE'="" D  ;
"RTN","LA7VIN7",146,0)
 . . . ; no API to convert global root [ie LAHM(62.48)] to file #
"RTN","LA7VIN7",147,0)
 . . . S FILE="^"_FILE
"RTN","LA7VIN7",148,0)
 . . . S FILE=$$TRIM^XLFSTR(FILE,"R",",")
"RTN","LA7VIN7",149,0)
 . . . I $P(FILE,"(",2)'="" S FILE=FILE_"," ;^XX( or ^XX(nn
"RTN","LA7VIN7",150,0)
 . . . S FILE=FILE_"0)"
"RTN","LA7VIN7",151,0)
 . . . I FILE'="" S FILE=$G(@FILE)
"RTN","LA7VIN7",152,0)
 . . . S FILE=+$P(FILE,U,2)
"RTN","LA7VIN7",153,0)
 . . ;
"RTN","LA7VIN7",154,0)
 . . N LAHLSEGS,LA74,SCTINOBX
"RTN","LA7VIN7",155,0)
 . . S SCTINOBX=0
"RTN","LA7VIN7",156,0)
 . . ;S TXT=OBX5(2)
"RTN","LA7VIN7",157,0)
 . . I LA7SCT'="" D  ;
"RTN","LA7VIN7",158,0)
 . . . S LAX=$O(CODSYS("B","SCT",0))
"RTN","LA7VIN7",159,0)
 . . . I LAX S SCTINOBX=LAX
"RTN","LA7VIN7",160,0)
 . . . ;S TXT=OBX5(LAX-1)
"RTN","LA7VIN7",161,0)
 . . ;S TXT=$$UNESC^LA7VHLU3(TXT,LA7FS_LA7ECH)
"RTN","LA7VIN7",162,0)
 . . S LA74=$$LKUP^XUAF4(LA7SFAC)
"RTN","LA7VIN7",163,0)
 . . S LAHLSEGS("R4")=LA74
"RTN","LA7VIN7",164,0)
 . . S LAHLSEGS("R6247")=$G(LA76247)
"RTN","LA7VIN7",165,0)
 . . S LAHLSEGS("FSEC")=LA7FS_LA7ECH
"RTN","LA7VIN7",166,0)
 . . S LAHLSEGS("MSH",3)=LA7SAP
"RTN","LA7VIN7",167,0)
 . . S LAHLSEGS("MSH",4)=LA7SFAC
"RTN","LA7VIN7",168,0)
 . . S LAHLSEGS("MSH",5)=LA7RAP
"RTN","LA7VIN7",169,0)
 . . S LAHLSEGS("MSH",6)=LA7RFAC
"RTN","LA7VIN7",170,0)
 . . S LAHLSEGS("MSH",11)=$G(LA7MID)
"RTN","LA7VIN7",171,0)
 . . S LAHLSEGS("OBX",3)=OBX3
"RTN","LA7VIN7",172,0)
 . . S LAHLSEGS("OBX",5)=OBX5
"RTN","LA7VIN7",173,0)
 . . ; ? Should we try SCT first no matter which codeset it is?
"RTN","LA7VIN7",174,0)
 . . ; try primary codeset first
"RTN","LA7VIN7",175,0)
 . . S TXT=$G(OBX5(2))
"RTN","LA7VIN7",176,0)
 . . S TXT=$$UNESC^LA7VHLU3(TXT,LA7FS_LA7ECH)
"RTN","LA7VIN7",177,0)
 . . S X=$S(SCTINOBX=3:LA7SCT,1:"") ;SCT in 1st component?
"RTN","LA7VIN7",178,0)
 . . S X=$$EN^LRSCTX(FILE,TXT,X,.LAHLSEGS,,1)
"RTN","LA7VIN7",179,0)
 . . ; try secondary codeset
"RTN","LA7VIN7",180,0)
 . . I X'>0 D  ;
"RTN","LA7VIN7",181,0)
 . . . S TXT=$G(OBX5(5))
"RTN","LA7VIN7",182,0)
 . . . S TXT=$$UNESC^LA7VHLU3(TXT,LA7FS_LA7ECH)
"RTN","LA7VIN7",183,0)
 . . . I TXT="" S X=0 Q
"RTN","LA7VIN7",184,0)
 . . . S X=$S(SCTINOBX=6:LA7SCT,1:"") ;SCT in 2nd component?
"RTN","LA7VIN7",185,0)
 . . . S X=$$EN^LRSCTX(FILE,TXT,X,.LAHLSEGS,,1)
"RTN","LA7VIN7",186,0)
 . . ; no matches so add new entry using codeset 1
"RTN","LA7VIN7",187,0)
 . . ; if LEDI interface (10) and no matches then add new entry and codeset 1
"RTN","LA7VIN7",188,0)
 . . I LA7INTYP=10,X'>0 D  ;
"RTN","LA7VIN7",189,0)
 . . . S TXT=$G(OBX5(2))
"RTN","LA7VIN7",190,0)
 . . . S TXT=$$UNESC^LA7VHLU3(TXT,LA7FS_LA7ECH)
"RTN","LA7VIN7",191,0)
 . . . S X=$S(SCTINOBX=3:LA7SCT,1:"")
"RTN","LA7VIN7",192,0)
 . . . S X=$$EN^LRSCTX(FILE,TXT,X,.LAHLSEGS)
"RTN","LA7VIN7",193,0)
 . . I X'>0 D  Q  ; create error log:  Could not create new entry in file
"RTN","LA7VIN7",194,0)
 . . . N LA7STR,LRFILE,LRINFO
"RTN","LA7VIN7",195,0)
 . . . S LA7STR("^")="~U~",LRFILE=FILE,LRINFO="for OBX sequence "_LA7SOBX_" OBX(5) data: "_$$REPLACE^XLFSTR(OBX5,.LA7STR)
"RTN","LA7VIN7",196,0)
 . . . D CREATE^LA7LOG(206)
"RTN","LA7VIN7",197,0)
 . . . S LA7KILAH=1,LA7QUIT=2
"RTN","LA7VIN7",198,0)
 . . . ;
"RTN","LA7VIN7",199,0)
 . . I FILE=61.2 S LA7612=+X
"RTN","LA7VIN7",200,0)
 . . K DATA,LAHLSEGS
"RTN","LA7VIN7",201,0)
 . . S DSOBX5=$$DBSTORE^LA7VHLU7(.OBX5,2,1,+LA76247,+$G(LA76248),.DATA)
"RTN","LA7VIN7",202,0)
 . . K DATA
"RTN","LA7VIN7",203,0)
 . S LAX=OBX5 K OBX5 S OBX5=LAX ;delete OBX5 array but keep OBX5
"RTN","LA7VIN7",204,0)
 . K CODSYS
"RTN","LA7VIN7",205,0)
 ;
"RTN","LA7VIN7",206,0)
 Q:$G(LA7QUIT)
"RTN","LA7VIN7",207,0)
 ;
"RTN","LA7VIN7",208,0)
 ;
"RTN","LA7VIN7",209,0)
 S OBX6=$$FIELD^LA7VHLU7(6)
"RTN","LA7VIN7",210,0)
 S OBX8=$$FIELD^LA7VHLU7(8)
"RTN","LA7VIN7",211,0)
 ;
"RTN","LA7VIN7",212,0)
 ; Observation result status - Table 0085
"RTN","LA7VIN7",213,0)
 S OBX11=$$FIELD^LA7VHLU7(11)
"RTN","LA7VIN7",214,0)
 ;
"RTN","LA7VIN7",215,0)
 ; Producer's ID
"RTN","LA7VIN7",216,0)
 S OBX15=$$FIELD^LA7VHLU7(15)
"RTN","LA7VIN7",217,0)
 S (LA74,LA7PRODID)=""
"RTN","LA7VIN7",218,0)
 ; Store where test was performed except for UI (LA7INTYP=1) interfaces.
"RTN","LA7VIN7",219,0)
 I LA7INTYP'=1 S (LA74,LA7PRODID)=$$RESFID^LA7VHLU2(OBX15,LA7SFAC,LA7CS)
"RTN","LA7VIN7",220,0)
 ;
"RTN","LA7VIN7",221,0)
 ; Responsible Observer
"RTN","LA7VIN7",222,0)
 S LA7RO=$$XCNTFM^LA7VHLU9($$FIELD^LA7VHLU7(16),LA7ECH)
"RTN","LA7VIN7",223,0)
 S LA7SUBFL=""
"RTN","LA7VIN7",224,0)
 ;
"RTN","LA7VIN7",225,0)
 ; Process MI or AP subscripts
"RTN","LA7VIN7",226,0)
 I $G(LA7SS)'="" D
"RTN","LA7VIN7",227,0)
 . I LA7SS="MI" D  Q
"RTN","LA7VIN7",228,0)
 . . D PROCESS^LA7VIN71
"RTN","LA7VIN7",229,0)
 . . S LA7SUBFL=63.05
"RTN","LA7VIN7",230,0)
 . I LA7SS?1(1"SP",1"CY",1"EM") D  Q
"RTN","LA7VIN7",231,0)
 . . D PROCESS^LA7VIN6
"RTN","LA7VIN7",232,0)
 . . S LA7SUBFL=$S(LA7SS="SP":63.08,LA7SS="CY":63.09,LA7SS="EM":63.02,1:"")
"RTN","LA7VIN7",233,0)
 ;
"RTN","LA7VIN7",234,0)
 ; Set flags for alerts and bulletins
"RTN","LA7VIN7",235,0)
 I LA7INTYP=10,LA7MTYP="ORU",OBX11'="" D  ;
"RTN","LA7VIN7",236,0)
 . I "CDW"'[OBX11 D  Q
"RTN","LA7VIN7",237,0)
 . . ; flag for new results alert
"RTN","LA7VIN7",238,0)
 . . S ^TMP("LA7-ORU",$J,LA76248,LA76249,LA7SS)=""
"RTN","LA7VIN7",239,0)
 . ;
"RTN","LA7VIN7",240,0)
 . Q:'LA7SUBFL
"RTN","LA7VIN7",241,0)
 . ; Set flag to send amended results bulletin
"RTN","LA7VIN7",242,0)
 . N DATA,X,X2,Y,LA7I
"RTN","LA7VIN7",243,0)
 . S LA7I=$O(^TMP("LA7 AMENDED RESULTS",$J,""),-1)
"RTN","LA7VIN7",244,0)
 . S LA7I=LA7I+1
"RTN","LA7VIN7",245,0)
 . S DATA=LA7LWL_"^"_LA7ISQN_"^"_LA7SUBFL_"^"_LA76248_"^"_LA76249_"^"_$TR(OBX11,"^","?")
"RTN","LA7VIN7",246,0)
 . S X2=""
"RTN","LA7VIN7",247,0)
 . I LA7RNLT'="" S X2=LA7RNLT_"^"_LA7RNLT(1)
"RTN","LA7VIN7",248,0)
 . I LA7RLNC'="" S X2=LA7RLNC_"^"_LA7RLNC(1)
"RTN","LA7VIN7",249,0)
 . ; If no NLT or LOINC use 1st codeset of OBX3
"RTN","LA7VIN7",250,0)
 . I X2="" D  ;
"RTN","LA7VIN7",251,0)
 . . S Y=OBX3
"RTN","LA7VIN7",252,0)
 . . D FLD2ARR^LA7VHLU7(.OBX3,LA7FS_LA7ECH)
"RTN","LA7VIN7",253,0)
 . . S X2=$$UNESC^LA7VHLU3($G(OBX3(1)),LA7FS_LA7ECH)
"RTN","LA7VIN7",254,0)
 . . S X2=X2_"^"_$$UNESC^LA7VHLU3($G(OBX3(2)),LA7FS_LA7ECH)
"RTN","LA7VIN7",255,0)
 . . K OBX3 S OBX3=Y
"RTN","LA7VIN7",256,0)
 . S DATA=DATA_"^"_X2_"^"_$TR(OBX8,"^","?")
"RTN","LA7VIN7",257,0)
 . ; only register amended if not already registered
"RTN","LA7VIN7",258,0)
 . I LA7UID'="" I '$D(^LAH("LA7 AMENDED RESULTS",LA7UID,LA7SUBFL,LA7LWL,LA7ISQN)) D  ;
"RTN","LA7VIN7",259,0)
 . . S ^TMP("LA7 AMENDED RESULTS",$J,LA7I)=DATA
"RTN","LA7VIN7",260,0)
 . ;
"RTN","LA7VIN7",261,0)
 . I LA7UID'="" S ^LAH("LA7 AMENDED RESULTS",LA7UID,LA7SUBFL,LA7LWL,LA7ISQN)=DATA
"RTN","LA7VIN7",262,0)
 ;
"RTN","LA7VIN7",263,0)
 Q
"RTN","LA7VIN7",264,0)
 ;
"RTN","LA7VIN7",265,0)
 ;
"RTN","LA7VIN7",266,0)
DATAOK(FILE,FLD,VAL) ;
"RTN","LA7VIN7",267,0)
 ; Checks if a value is appropriate for storing in the field
"RTN","LA7VIN7",268,0)
 ; Inputs
"RTN","LA7VIN7",269,0)
 ;  FILE : File #
"RTN","LA7VIN7",270,0)
 ;   FLD : Field #
"RTN","LA7VIN7",271,0)
 ;   VAL : Value of the field
"RTN","LA7VIN7",272,0)
 ;
"RTN","LA7VIN7",273,0)
 ; Returns 0 (invalid) or 1 (valid)
"RTN","LA7VIN7",274,0)
 ;
"RTN","LA7VIN7",275,0)
 N LRNOECHO,MSG,OUT,STATUS
"RTN","LA7VIN7",276,0)
 ;
"RTN","LA7VIN7",277,0)
 ; LRNOECHO used to suppress echo when input transform calls COM^LRNUM
"RTN","LA7VIN7",278,0)
 S STATUS=0,LRNOECHO=1
"RTN","LA7VIN7",279,0)
 D CHK^DIE(FILE,FLD,"",VAL,.OUT,"MSG")
"RTN","LA7VIN7",280,0)
 I $G(OUT)'="^" S STATUS=1
"RTN","LA7VIN7",281,0)
 I $D(MSG) S STATUS=0
"RTN","LA7VIN7",282,0)
 ;
"RTN","LA7VIN7",283,0)
 Q STATUS
"RTN","LA7VIN7A")
0^3^B61187996
"RTN","LA7VIN7A",1,0)
LA7VIN7A ;DALOI/JDB - Process ORU's OBX for Micro ;08/05/16  07:32
"RTN","LA7VIN7A",2,0)
 ;;5.2;AUTOMATED LAB INSTRUMENTS;**74,90**;Sep 27, 1994;Build 17
"RTN","LA7VIN7A",3,0)
 ;
"RTN","LA7VIN7A",4,0)
 ; Continuation of LA7VIN7 and is only called from there - process OBX segments for "MI" subscript tests.
"RTN","LA7VIN7A",5,0)
 Q
"RTN","LA7VIN7A",6,0)
 ;
"RTN","LA7VIN7A",7,0)
 ;
"RTN","LA7VIN7A",8,0)
1 ; Gram Stain (Subscript 2)
"RTN","LA7VIN7A",9,0)
 ;
"RTN","LA7VIN7A",10,0)
 N ISQN2,LA7X,SUB,X
"RTN","LA7VIN7A",11,0)
 ;
"RTN","LA7VIN7A",12,0)
 ; Store gram stain comment
"RTN","LA7VIN7A",13,0)
 S ISQN2=$O(^LAH(LWL,1,LA7ISQN,"MI",2,"A"),-1)+1
"RTN","LA7VIN7A",14,0)
 S SUB="2,"_ISQN2_",0"
"RTN","LA7VIN7A",15,0)
 S X=OBX5_$S(OBX6'="":" "_OBX6,1:"")
"RTN","LA7VIN7A",16,0)
 S X=$TR(X,"^"," ")
"RTN","LA7VIN7A",17,0)
 D LAH(SUB,1,X) ;Value
"RTN","LA7VIN7A",18,0)
 ;
"RTN","LA7VIN7A",19,0)
 ; Store gram stain supporting info.
"RTN","LA7VIN7A",20,0)
 S SUB="2,"_ISQN2_",0,0"
"RTN","LA7VIN7A",21,0)
 D LAH(SUB,1,LA74) ; perf lab
"RTN","LA7VIN7A",22,0)
 ;
"RTN","LA7VIN7A",23,0)
 ; If LEDI interface then use LRLAB,HL as user.
"RTN","LA7VIN7A",24,0)
 I LA7INTYP=10 S LA7X=^XTMP("LA7 PROXY","LRLAB,HL")
"RTN","LA7VIN7A",25,0)
 E  S LA7X=$P(LA7RO,"^",3)
"RTN","LA7VIN7A",26,0)
 I LA7X D LAH(SUB,2,LA7X) ;resp observer
"RTN","LA7VIN7A",27,0)
 ;
"RTN","LA7VIN7A",28,0)
 D LAH(SUB,3,LA7RLNC) ; LOINC IEN
"RTN","LA7VIN7A",29,0)
 D LAH(SUB,4,LA7RNLT) ; NLT code
"RTN","LA7VIN7A",30,0)
 D LAH(SUB,5,OBX11) ; Observ result code
"RTN","LA7VIN7A",31,0)
 ;
"RTN","LA7VIN7A",32,0)
 D NTE
"RTN","LA7VIN7A",33,0)
 Q
"RTN","LA7VIN7A",34,0)
 ;
"RTN","LA7VIN7A",35,0)
 ;
"RTN","LA7VIN7A",36,0)
3 ; Process organism (Subscript 3)
"RTN","LA7VIN7A",37,0)
 ;
"RTN","LA7VIN7A",38,0)
 N X,SUB,ISQN2
"RTN","LA7VIN7A",39,0)
 I DDS<0!(DDP<1) D DDERR Q
"RTN","LA7VIN7A",40,0)
 I LA7612<1 D  Q  ;
"RTN","LA7VIN7A",41,0)
 . ; Unknown entity in OBX-5
"RTN","LA7VIN7A",42,0)
 . N LA7VOBX5
"RTN","LA7VIN7A",43,0)
 . S LA7VOBX5=OBX5 ;needed for log
"RTN","LA7VIN7A",44,0)
 . S LA7VOBX5=$$UNESC^LA7VHLU3(LA7VOBX5,LA7FS_LA7ECH)
"RTN","LA7VIN7A",45,0)
 . D CREATE^LA7LOG(204)
"RTN","LA7VIN7A",46,0)
 . S LA7KILAH=1 S LA7QUIT=2
"RTN","LA7VIN7A",47,0)
 ;
"RTN","LA7VIN7A",48,0)
 S ISQN2=0
"RTN","LA7VIN7A",49,0)
 I SUBID'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",3,SUBID)
"RTN","LA7VIN7A",50,0)
 I SUBID="" I $G(PSUBID)'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",3,PSUBID)
"RTN","LA7VIN7A",51,0)
 I 'ISQN2 D  Q  ;
"RTN","LA7VIN7A",52,0)
 . D SUBIDERR^LA7VIN71
"RTN","LA7VIN7A",53,0)
 ;
"RTN","LA7VIN7A",54,0)
 D LAH("3,0",-1,"")
"RTN","LA7VIN7A",55,0)
 S SUB="3,"_ISQN2_",0"
"RTN","LA7VIN7A",56,0)
 D LAH(SUB,DDP,LA7612) ; organism #61.2 IEN
"RTN","LA7VIN7A",57,0)
 S SUB="3,"_ISQN2_",.1"
"RTN","LA7VIN7A",58,0)
 D LAH(SUB,1,SUBID) ; isolate id
"RTN","LA7VIN7A",59,0)
 S SUB="3,"_ISQN2_","_DDS_",.01"
"RTN","LA7VIN7A",60,0)
 D LAH(SUB,1,LA7RLNC) ; LOINC IEN
"RTN","LA7VIN7A",61,0)
 D LAH(SUB,2,LA7RNLT) ; NLT code
"RTN","LA7VIN7A",62,0)
 D LAH(SUB,3,LA7SCT) ; SCT Code
"RTN","LA7VIN7A",63,0)
 S SUB="3,"_ISQN2_","_DDS_",.01,0"
"RTN","LA7VIN7A",64,0)
 D LAH(SUB,1,OBX11) ;
"RTN","LA7VIN7A",65,0)
 S SUB="3,"_ISQN2_","_DDS_",.01,1"
"RTN","LA7VIN7A",66,0)
 D LAH(SUB,1,LA74)
"RTN","LA7VIN7A",67,0)
 S X=$P(LA7RO,"^",3)
"RTN","LA7VIN7A",68,0)
 D LAH(SUB,2,X)
"RTN","LA7VIN7A",69,0)
 D NTE
"RTN","LA7VIN7A",70,0)
 Q
"RTN","LA7VIN7A",71,0)
 ;
"RTN","LA7VIN7A",72,0)
 ;
"RTN","LA7VIN7A",73,0)
6(COM) ; Process bact rpt rmk (Subscript 4)
"RTN","LA7VIN7A",74,0)
 ;
"RTN","LA7VIN7A",75,0)
 ; Input
"RTN","LA7VIN7A",76,0)
 ;  COM : <opt> The text to use for the remark (comment)
"RTN","LA7VIN7A",77,0)
 ;      : If not defined, copy of sym table variable OBX5 is used.
"RTN","LA7VIN7A",78,0)
 ;      : If OBX5 used, TEXT2 will be HL7 unescaped. If COM
"RTN","LA7VIN7A",79,0)
 ;      : is used it's text is not HL7 unescaped.
"RTN","LA7VIN7A",80,0)
 ;
"RTN","LA7VIN7A",81,0)
 N X,SUB,ISQN2,TEXT,MAXLEN,TEXT2
"RTN","LA7VIN7A",82,0)
 ; Dont initialize COM
"RTN","LA7VIN7A",83,0)
 S SUB="4,0"
"RTN","LA7VIN7A",84,0)
 D LAH(SUB,1,LA74)
"RTN","LA7VIN7A",85,0)
 S X=$P(LA7RO,"^",3)
"RTN","LA7VIN7A",86,0)
 D LAH(SUB,2,X) ; resp obsv
"RTN","LA7VIN7A",87,0)
 D LAH(SUB,3,LA7RLNC) ; LOINC
"RTN","LA7VIN7A",88,0)
 D LAH(SUB,4,OBX11) ;obsv status
"RTN","LA7VIN7A",89,0)
 S ISQN2=$O(^LAH(LWL,1,LA7ISQN,"MI",4,"A"),-1)+1
"RTN","LA7VIN7A",90,0)
 ; pull comment from COM or OBX5
"RTN","LA7VIN7A",91,0)
 S TEXT="OBX5"
"RTN","LA7VIN7A",92,0)
 I $D(COM)=1 S TEXT="COM"
"RTN","LA7VIN7A",93,0)
 S MAXLEN=68 ; COMMENTS field size
"RTN","LA7VIN7A",94,0)
 S SUB="4,"_ISQN2_",0"
"RTN","LA7VIN7A",95,0)
 ; insert separator line if needed
"RTN","LA7VIN7A",96,0)
 I ISQN2>1 D LAH(SUB,1," ") S ISQN2=ISQN2+1 S SUB="4,"_ISQN2_",0"
"RTN","LA7VIN7A",97,0)
 ;
"RTN","LA7VIN7A",98,0)
 ; if this an override insert Original Concept name
"RTN","LA7VIN7A",99,0)
 I $P(DSOBX3,"^",6) I $P(DSOBX3,"^",1)'=$P(DSOBX3,"^",6) D  ;
"RTN","LA7VIN7A",100,0)
 . S X=$P(DSOBX3,"^",6) ;original concept
"RTN","LA7VIN7A",101,0)
 . S X=$G(^LAB(62.47,X,0))
"RTN","LA7VIN7A",102,0)
 . S X=$P(X,U,1)
"RTN","LA7VIN7A",103,0)
 . Q:X=""
"RTN","LA7VIN7A",104,0)
 . D LAH(SUB,1,"["_X_"]")
"RTN","LA7VIN7A",105,0)
 . S ISQN2=ISQN2+1 S SUB="13,"_ISQN2_",0"
"RTN","LA7VIN7A",106,0)
 ;
"RTN","LA7VIN7A",107,0)
 ; modify MAXLEN for prefixed Subid
"RTN","LA7VIN7A",108,0)
 I TEXT="OBX5" S TEXT2=$$UNESC^LA7VHLU3(OBX5,LA7FS_LA7ECH)
"RTN","LA7VIN7A",109,0)
 I TEXT="COM" S TEXT2=$G(COM)
"RTN","LA7VIN7A",110,0)
 I $L(TEXT2)'>MAXLEN D  ;
"RTN","LA7VIN7A",111,0)
 . D LAH(SUB,1,TEXT2)
"RTN","LA7VIN7A",112,0)
 ;
"RTN","LA7VIN7A",113,0)
 I $L(TEXT2)>MAXLEN D  ;
"RTN","LA7VIN7A",114,0)
 . N I,Y,PASS
"RTN","LA7VIN7A",115,0)
 . S PASS=$L(TEXT2)\MAXLEN
"RTN","LA7VIN7A",116,0)
 . S:($L(TEXT2)#MAXLEN)>0 PASS=PASS+1
"RTN","LA7VIN7A",117,0)
 . F I=0:1:PASS-1 S Y=(I*MAXLEN)+1 D  ;
"RTN","LA7VIN7A",118,0)
 . . D LAH(SUB,1,$E(TEXT2,Y,(Y+MAXLEN)-1))
"RTN","LA7VIN7A",119,0)
 . . S Y=Y+MAXLEN
"RTN","LA7VIN7A",120,0)
 . . S ISQN2=ISQN2+1
"RTN","LA7VIN7A",121,0)
 . . S SUB="4,"_ISQN2_",0"
"RTN","LA7VIN7A",122,0)
 . ;
"RTN","LA7VIN7A",123,0)
 D NTE^LA7VIN71(LA76247,ISQN)
"RTN","LA7VIN7A",124,0)
 Q
"RTN","LA7VIN7A",125,0)
 ;
"RTN","LA7VIN7A",126,0)
 ;
"RTN","LA7VIN7A",127,0)
7 ; Process antimicrobial susceptibilities (Subscript 3)
"RTN","LA7VIN7A",128,0)
 ;
"RTN","LA7VIN7A",129,0)
 N ASCRN,ISQN2,LA7X,SUB,X,X2
"RTN","LA7VIN7A",130,0)
 I DDS<0!(DDP'>0) D DDERR Q
"RTN","LA7VIN7A",131,0)
 S ISQN2=0
"RTN","LA7VIN7A",132,0)
 I SUBID'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",3,SUBID)
"RTN","LA7VIN7A",133,0)
 I SUBID="" I $G(PSUBID)'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",3,PSUBID)
"RTN","LA7VIN7A",134,0)
 I 'ISQN2 D  Q  ;
"RTN","LA7VIN7A",135,0)
 . D SUBIDERR^LA7VIN71
"RTN","LA7VIN7A",136,0)
 ;
"RTN","LA7VIN7A",137,0)
 D LAH("3,0",-1,"")
"RTN","LA7VIN7A",138,0)
 S ASCRN=$$FIELD^LA7VHLU7(13)
"RTN","LA7VIN7A",139,0)
 I ASCRN'="" D  ;
"RTN","LA7VIN7A",140,0)
 . N X,DATA
"RTN","LA7VIN7A",141,0)
 . S X=$P(DSOBX3,"^",4)
"RTN","LA7VIN7A",142,0)
 . S X=X+.2
"RTN","LA7VIN7A",143,0)
 . D CHK^DIE(63.3,X,"",ASCRN,.DATA)
"RTN","LA7VIN7A",144,0)
 . S ASCRN=$P(DATA,"^",1)
"RTN","LA7VIN7A",145,0)
 S SUB="3,"_ISQN2_","_DDS
"RTN","LA7VIN7A",146,0)
 S X=OBX5_$S(OBX6'="":" "_OBX6,1:"")
"RTN","LA7VIN7A",147,0)
 ;
"RTN","LA7VIN7A",148,0)
 ; convert SCT susc code to local code
"RTN","LA7VIN7A",149,0)
 I LA7VTYP?1(1"CE",1"CM",1"CNE",1"CWE") D
"RTN","LA7VIN7A",150,0)
 . N LA7I,VAR,VER,X2
"RTN","LA7VIN7A",151,0)
 . S X2="",VAR=OBX5 D FLD2ARR^LA7VHLU7(.VAR,LA7FS_LA7ECH)
"RTN","LA7VIN7A",152,0)
 . F LA7I=1,4 D  Q:X2'=""
"RTN","LA7VIN7A",153,0)
 . . I $G(VAR(LA7I))="",$G(VAR(LA7I+1))="" Q  ; Quit if no code or text for this tuple
"RTN","LA7VIN7A",154,0)
 . . S VER=$S(LA7I=1:7,1:8)
"RTN","LA7VIN7A",155,0)
 . . S X2=$$SCT2KB^LA7VHLU6($G(VAR(LA7I)),$G(VAR(LA7I+1)),$G(VAR(LA7I+2)),$G(VAR(VER)))
"RTN","LA7VIN7A",156,0)
 . . I X2'="" S X=X2 Q
"RTN","LA7VIN7A",157,0)
 . . S X2=$$SCT2PN^LA7VHLU6($G(VAR(LA7I)),$G(VAR(LA7I+1)),$G(VAR(LA7I+2)),$G(VAR(VER)))
"RTN","LA7VIN7A",158,0)
 . . I X2'="" S X=X2
"RTN","LA7VIN7A",159,0)
 ;
"RTN","LA7VIN7A",160,0)
 S X=$TR(X,"^"," ")
"RTN","LA7VIN7A",161,0)
 ;
"RTN","LA7VIN7A",162,0)
 D LAH(SUB,DDP,X) ; result
"RTN","LA7VIN7A",163,0)
 D LAH(SUB,2,OBX8) ; interpretation
"RTN","LA7VIN7A",164,0)
 D LAH(SUB,3,ASCRN) ; screen
"RTN","LA7VIN7A",165,0)
 S SUB="3,"_ISQN2_","_DDS_",.01"
"RTN","LA7VIN7A",166,0)
 D LAH(SUB,1,LA7RLNC) ; LOINC
"RTN","LA7VIN7A",167,0)
 D LAH(SUB,2,LA7RNLT) ; NLT code
"RTN","LA7VIN7A",168,0)
 D LAH(SUB,3,LA7SCT) ; SCT
"RTN","LA7VIN7A",169,0)
 S SUB="3,"_ISQN2_","_DDS_",.01,0"
"RTN","LA7VIN7A",170,0)
 D LAH(SUB,1,OBX11) ;obsv status
"RTN","LA7VIN7A",171,0)
 S SUB="3,"_ISQN2_","_DDS_",.01,1"
"RTN","LA7VIN7A",172,0)
 D LAH(SUB,1,LA74) ; #4 IEN
"RTN","LA7VIN7A",173,0)
 S X=$P(LA7RO,"^",3)
"RTN","LA7VIN7A",174,0)
 D LAH(SUB,2,X) ; resp observer
"RTN","LA7VIN7A",175,0)
 ;
"RTN","LA7VIN7A",176,0)
 ; Set prefix to antibiotic abbrevation or full name to annotate comments.
"RTN","LA7VIN7A",177,0)
 S LA7X=$$ABPREFIX(1,LA7DD)
"RTN","LA7VIN7A",178,0)
 I LA7X="" S LA7X=LA7DD("LABEL")
"RTN","LA7VIN7A",179,0)
 D NTE^LA7VIN71(LA76247,ISQN2,LA7X)
"RTN","LA7VIN7A",180,0)
 Q
"RTN","LA7VIN7A",181,0)
 ;
"RTN","LA7VIN7A",182,0)
 ;
"RTN","LA7VIN7A",183,0)
10 ; Organism Colony Count (Subscript 3)
"RTN","LA7VIN7A",184,0)
 ;
"RTN","LA7VIN7A",185,0)
 N X,SUB,ISQN2,UNITS
"RTN","LA7VIN7A",186,0)
 I DDS<0!(DDP'>0) D DDERR Q
"RTN","LA7VIN7A",187,0)
 S ISQN2=0
"RTN","LA7VIN7A",188,0)
 I SUBID'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",3,SUBID)
"RTN","LA7VIN7A",189,0)
 I SUBID="" I $G(PSUBID)'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",3,PSUBID)
"RTN","LA7VIN7A",190,0)
 I 'ISQN2 D  Q  ;
"RTN","LA7VIN7A",191,0)
 . D SUBIDERR^LA7VIN71
"RTN","LA7VIN7A",192,0)
 D LAH("3,0",-1,"")
"RTN","LA7VIN7A",193,0)
 S SUB="3,"_ISQN2_",0"
"RTN","LA7VIN7A",194,0)
 S X=$$UNESC^LA7VHLU3(OBX5,LA7FS_LA7ECH)
"RTN","LA7VIN7A",195,0)
 S UNITS=$$UNESC^LA7VHLU3(OBX6,LA7FS_LA7ECH)
"RTN","LA7VIN7A",196,0)
 I UNITS'="" S X=X_" "_UNITS
"RTN","LA7VIN7A",197,0)
 D LAH(SUB,2,X) ;quantity
"RTN","LA7VIN7A",198,0)
 S SUB="3,"_ISQN2_","_DDS_",1"
"RTN","LA7VIN7A",199,0)
 D LAH(SUB,1,LA7RLNC) ; LOINC
"RTN","LA7VIN7A",200,0)
 S SUB="3,"_ISQN2_","_DDS_",1,0"
"RTN","LA7VIN7A",201,0)
 D LAH(SUB,1,OBX11)
"RTN","LA7VIN7A",202,0)
 S SUB="3,"_ISQN2_","_DDS_",1,1"
"RTN","LA7VIN7A",203,0)
 D LAH(SUB,1,LA74) ; #4 IEN
"RTN","LA7VIN7A",204,0)
 S X=$P(LA7RO,"^",3)
"RTN","LA7VIN7A",205,0)
 D LAH(SUB,2,X) ; resp observer
"RTN","LA7VIN7A",206,0)
 D NTE
"RTN","LA7VIN7A",207,0)
 Q
"RTN","LA7VIN7A",208,0)
 ;
"RTN","LA7VIN7A",209,0)
 ;
"RTN","LA7VIN7A",210,0)
16 ; Urine Screen (Subscript 1)
"RTN","LA7VIN7A",211,0)
 ;
"RTN","LA7VIN7A",212,0)
 N LAMSG,X,X2,Z
"RTN","LA7VIN7A",213,0)
 ;
"RTN","LA7VIN7A",214,0)
 S X=$$UNESC^LA7VHLU3(OBX5,LA7FS_LA7ECH)
"RTN","LA7VIN7A",215,0)
 ;
"RTN","LA7VIN7A",216,0)
 ; convert SCT positive/negative code to local code
"RTN","LA7VIN7A",217,0)
 I LA7SCT D
"RTN","LA7VIN7A",218,0)
 . S X2=$$SCT2PN^LA7VHLU6(LA7SCT,,"SCT",1)
"RTN","LA7VIN7A",219,0)
 . I X2'="" S X=X2
"RTN","LA7VIN7A",220,0)
 ;
"RTN","LA7VIN7A",221,0)
 D  ;
"RTN","LA7VIN7A",222,0)
 . N Z,LAMSG,LRNOECHO
"RTN","LA7VIN7A",223,0)
 . S LRNOECHO=1
"RTN","LA7VIN7A",224,0)
 . D CHK^DIE(63.05,11.57,"",X,.Z,"LAMSG")
"RTN","LA7VIN7A",225,0)
 . I $G(Z)'="^" S X=Z
"RTN","LA7VIN7A",226,0)
 ;
"RTN","LA7VIN7A",227,0)
 S DATAOK=$$DATAOK^LA7VIN7(63.05,11.57,X)
"RTN","LA7VIN7A",228,0)
 ;
"RTN","LA7VIN7A",229,0)
 S SUB="1,0"
"RTN","LA7VIN7A",230,0)
 D LAH(SUB,6,X)
"RTN","LA7VIN7A",231,0)
 ;
"RTN","LA7VIN7A",232,0)
 S SUB="1,0,.02"
"RTN","LA7VIN7A",233,0)
 D LAH(SUB,1,LA7RLNC) ; LOINC
"RTN","LA7VIN7A",234,0)
 S SUB="1,0,.02,0"
"RTN","LA7VIN7A",235,0)
 D LAH(SUB,1,OBX11) ; Obsv Results
"RTN","LA7VIN7A",236,0)
 S SUB="1,0,.02,1"
"RTN","LA7VIN7A",237,0)
 D LAH(SUB,1,LA74)
"RTN","LA7VIN7A",238,0)
 S X=$P(LA7RO,"^",3)
"RTN","LA7VIN7A",239,0)
 D LAH(SUB,2,X) ; Resp Obsv.
"RTN","LA7VIN7A",240,0)
 D NTE^LA7VIN71(LA76247,ISQN)
"RTN","LA7VIN7A",241,0)
 ;
"RTN","LA7VIN7A",242,0)
 Q
"RTN","LA7VIN7A",243,0)
 ;
"RTN","LA7VIN7A",244,0)
 ;
"RTN","LA7VIN7A",245,0)
17 ; Sputum Screen (Subscript 1)
"RTN","LA7VIN7A",246,0)
 ;
"RTN","LA7VIN7A",247,0)
 N X,SUB,ISQN2,UNITS,DATAOK
"RTN","LA7VIN7A",248,0)
 ;
"RTN","LA7VIN7A",249,0)
 S X=$$UNESC^LA7VHLU3(OBX5,LA7FS_LA7ECH)
"RTN","LA7VIN7A",250,0)
 S DATAOK=$$DATAOK^LA7VIN7(63.05,11.58,X)
"RTN","LA7VIN7A",251,0)
 ; Workaround 01/10/2007 (store anything in Set of Codes)
"RTN","LA7VIN7A",252,0)
 S SUB="1,0"
"RTN","LA7VIN7A",253,0)
 D LAH(SUB,5,X)
"RTN","LA7VIN7A",254,0)
 I DATAOK D LAH(SUB,5,X)
"RTN","LA7VIN7A",255,0)
 ;
"RTN","LA7VIN7A",256,0)
 S SUB="1,0,.01"
"RTN","LA7VIN7A",257,0)
 D LAH(SUB,1,LA7RLNC) ; LOINC
"RTN","LA7VIN7A",258,0)
 S SUB="1,0,.01,0"
"RTN","LA7VIN7A",259,0)
 D LAH(SUB,1,OBX11) ; Obsv Results
"RTN","LA7VIN7A",260,0)
 S SUB="1,0,.01,1"
"RTN","LA7VIN7A",261,0)
 D LAH(SUB,1,LA74)
"RTN","LA7VIN7A",262,0)
 S X=$P(LA7RO,"^",3)
"RTN","LA7VIN7A",263,0)
 D LAH(SUB,2,X) ; Resp Obsv.
"RTN","LA7VIN7A",264,0)
 D NTE^LA7VIN71(LA76247,ISQN)
"RTN","LA7VIN7A",265,0)
 ;
"RTN","LA7VIN7A",266,0)
 Q
"RTN","LA7VIN7A",267,0)
 ;
"RTN","LA7VIN7A",268,0)
 ;
"RTN","LA7VIN7A",269,0)
DDERR ;
"RTN","LA7VIN7A",270,0)
 ; If unknown storage location flag error
"RTN","LA7VIN7A",271,0)
 ; No File #63 field mapping found for OBX-3
"RTN","LA7VIN7A",272,0)
 N LA7OBX3
"RTN","LA7VIN7A",273,0)
 S LA7OBX3=OBX3 ;needed for log
"RTN","LA7VIN7A",274,0)
 D CREATE^LA7LOG(201)
"RTN","LA7VIN7A",275,0)
 S LA7KILAH=1 S LA7QUIT=2
"RTN","LA7VIN7A",276,0)
 Q
"RTN","LA7VIN7A",277,0)
 ;
"RTN","LA7VIN7A",278,0)
 ;
"RTN","LA7VIN7A",279,0)
LAH(LASUB,LAP,LAVAL) ;
"RTN","LA7VIN7A",280,0)
 ; Convenience method
"RTN","LA7VIN7A",281,0)
 I LAP'=-1 I LAVAL="" Q
"RTN","LA7VIN7A",282,0)
 D LAH^LAGEN(+$G(LWL),+$G(LA7ISQN),"MI",LASUB,LAP,LAVAL)
"RTN","LA7VIN7A",283,0)
 Q
"RTN","LA7VIN7A",284,0)
 ;
"RTN","LA7VIN7A",285,0)
 ;
"RTN","LA7VIN7A",286,0)
NTE ;
"RTN","LA7VIN7A",287,0)
 ; Convenience method
"RTN","LA7VIN7A",288,0)
 D NTE^LA7VIN71(LA76247,ISQN2)
"RTN","LA7VIN7A",289,0)
 Q
"RTN","LA7VIN7A",290,0)
 ;
"RTN","LA7VIN7A",291,0)
 ;
"RTN","LA7VIN7A",292,0)
ABPREFIX(LA7TYPE,LA7DD) ; Get prefix of antibiotic full name to annotate comments.
"RTN","LA7VIN7A",293,0)
 ; Call with LA7TYPE = type of antimicrobial (1=bacterial, 2=mycobacterial)
"RTN","LA7VIN7A",294,0)
 ;             LA7DD = drug node in file #63, MI subscript
"RTN","LA7VIN7A",295,0)
 ;
"RTN","LA7VIN7A",296,0)
 ; Returns      LA7Y = drug abbreviation or full name from file #62.06
"RTN","LA7VIN7A",297,0)
 ;
"RTN","LA7VIN7A",298,0)
 N LA76206,LA7Y,LA7XREF
"RTN","LA7VIN7A",299,0)
 S (LA76206,LA7Y)="",LA7TYPE=$G(LA7TYPE),LA7DD=$P($G(LA7DD),";")
"RTN","LA7VIN7A",300,0)
 S LA7XREF=$S(LA7TYPE=1:"AD",LA7TYPE=2:"AD1",1:"")
"RTN","LA7VIN7A",301,0)
 ;
"RTN","LA7VIN7A",302,0)
 I LA7XREF'="",LA7DD S LA76206=$O(^LAB(62.06,LA7XREF,LA7DD,0))
"RTN","LA7VIN7A",303,0)
 ;
"RTN","LA7VIN7A",304,0)
 I LA76206 D
"RTN","LA7VIN7A",305,0)
 . S LA76206(0)=$G(^LAB(62.06,LA76206,0))
"RTN","LA7VIN7A",306,0)
 . S LA7Y="For "_$P(LA76206(0),"^")_": "
"RTN","LA7VIN7A",307,0)
 ;
"RTN","LA7VIN7A",308,0)
 Q LA7Y
"RTN","LA7VIN7B")
0^4^B65792075
"RTN","LA7VIN7B",1,0)
LA7VIN7B ;DALOI/JDB - Process ORU's OBX for Micro ;08/05/16  08:16
"RTN","LA7VIN7B",2,0)
 ;;5.2;AUTOMATED LAB INSTRUMENTS;**74,90**;Sep 27, 1994;Build 17
"RTN","LA7VIN7B",3,0)
 ;
"RTN","LA7VIN7B",4,0)
 ; Continuation of LA7VIN7 and is only called from there.
"RTN","LA7VIN7B",5,0)
 ; Process OBX segments for "MI" subscript tests.
"RTN","LA7VIN7B",6,0)
 Q
"RTN","LA7VIN7B",7,0)
 ;
"RTN","LA7VIN7B",8,0)
 ;
"RTN","LA7VIN7B",9,0)
4 ;
"RTN","LA7VIN7B",10,0)
 ; process Mycobaterium (Subscript 12)
"RTN","LA7VIN7B",11,0)
 N X,SUB,ISQN2
"RTN","LA7VIN7B",12,0)
 I DDS<0!(DDP<1) D DDERR^LA7VIN7A Q
"RTN","LA7VIN7B",13,0)
 I LA7612<1 D  Q  ;
"RTN","LA7VIN7B",14,0)
 . ; Unknown entity in OBX-5
"RTN","LA7VIN7B",15,0)
 . N LA7VOBX5
"RTN","LA7VIN7B",16,0)
 . S LA7VOBX5=OBX5 ;needed for log
"RTN","LA7VIN7B",17,0)
 . S LA7VOBX5=$$UNESC^LA7VHLU3(LA7VOBX5,LA7FS_LA7ECH)
"RTN","LA7VIN7B",18,0)
 . D CREATE^LA7LOG(204)
"RTN","LA7VIN7B",19,0)
 . S LA7KILAH=1 S LA7QUIT=2
"RTN","LA7VIN7B",20,0)
 ;
"RTN","LA7VIN7B",21,0)
 S ISQN2=0
"RTN","LA7VIN7B",22,0)
 I SUBID'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",12,SUBID)
"RTN","LA7VIN7B",23,0)
 I SUBID="" I $G(PSUBID)'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",12,PSUBID)
"RTN","LA7VIN7B",24,0)
 I 'ISQN2 D  Q  ;
"RTN","LA7VIN7B",25,0)
 . D SUBIDERR^LA7VIN71
"RTN","LA7VIN7B",26,0)
 ;
"RTN","LA7VIN7B",27,0)
 S SUB="12,"_ISQN2_",0"
"RTN","LA7VIN7B",28,0)
 D LAH(SUB,DDP,LA7612) ; organism #61.2 IEN
"RTN","LA7VIN7B",29,0)
 S X=OBX5_$S(OBX6'="":" "_OBX6,1:"")
"RTN","LA7VIN7B",30,0)
 S SUB="12,"_ISQN2_",.1"
"RTN","LA7VIN7B",31,0)
 D LAH(SUB,1,SUBID) ; isolate id
"RTN","LA7VIN7B",32,0)
 S SUB="12,"_ISQN2_","_DDS_",.01"
"RTN","LA7VIN7B",33,0)
 D LAH(SUB,1,LA7RLNC) ; LOINC IEN
"RTN","LA7VIN7B",34,0)
 D LAH(SUB,2,LA7RNLT) ; NLT code
"RTN","LA7VIN7B",35,0)
 D LAH(SUB,3,LA7SCT) ; SCT Code
"RTN","LA7VIN7B",36,0)
 S SUB="12,"_ISQN2_","_DDS_",.01,0"
"RTN","LA7VIN7B",37,0)
 D LAH(SUB,1,OBX11) ;
"RTN","LA7VIN7B",38,0)
 S SUB="12,"_ISQN2_","_DDS_",.01,1"
"RTN","LA7VIN7B",39,0)
 D LAH(SUB,1,LA74)
"RTN","LA7VIN7B",40,0)
 S X=$P(LA7RO,"^",3)
"RTN","LA7VIN7B",41,0)
 D LAH(SUB,2,X)
"RTN","LA7VIN7B",42,0)
 D NTE
"RTN","LA7VIN7B",43,0)
 Q
"RTN","LA7VIN7B",44,0)
 ;
"RTN","LA7VIN7B",45,0)
 ;
"RTN","LA7VIN7B",46,0)
9 ;
"RTN","LA7VIN7B",47,0)
 ; Process fungus (Subscript 9)
"RTN","LA7VIN7B",48,0)
 N X,SUB,ISQN2
"RTN","LA7VIN7B",49,0)
 I LA7612<1 D  Q  ;
"RTN","LA7VIN7B",50,0)
 . ; Unknown entity in OBX-5
"RTN","LA7VIN7B",51,0)
 . N LA7VOBX5
"RTN","LA7VIN7B",52,0)
 . S LA7VOBX5=OBX5 ;needed for log
"RTN","LA7VIN7B",53,0)
 . S LA7VOBX5=$$UNESC^LA7VHLU3(LA7VOBX5,LA7FS_LA7ECH)
"RTN","LA7VIN7B",54,0)
 . D CREATE^LA7LOG(204)
"RTN","LA7VIN7B",55,0)
 . S LA7KILAH=1 S LA7QUIT=2
"RTN","LA7VIN7B",56,0)
 ;
"RTN","LA7VIN7B",57,0)
 S ISQN2=0
"RTN","LA7VIN7B",58,0)
 I SUBID'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",9,SUBID)
"RTN","LA7VIN7B",59,0)
 I SUBID="" I $G(PSUBID)'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",9,PSUBID)
"RTN","LA7VIN7B",60,0)
 I 'ISQN2 D  Q  ;
"RTN","LA7VIN7B",61,0)
 . D SUBIDERR^LA7VIN71
"RTN","LA7VIN7B",62,0)
 ;
"RTN","LA7VIN7B",63,0)
 S SUB="9,"_ISQN2_",0"
"RTN","LA7VIN7B",64,0)
 D LAH(SUB,1,LA7612) ; #61.2 IEN
"RTN","LA7VIN7B",65,0)
 S SUB="9,"_ISQN2_",.1"
"RTN","LA7VIN7B",66,0)
 D LAH(SUB,1,SUBID) ; isolate id
"RTN","LA7VIN7B",67,0)
 S SUB="9,"_ISQN2_",0,.01"
"RTN","LA7VIN7B",68,0)
 D LAH(SUB,1,LA7RLNC) ; LOINC IEN
"RTN","LA7VIN7B",69,0)
 D LAH(SUB,2,LA7RNLT) ; NLT code
"RTN","LA7VIN7B",70,0)
 D LAH(SUB,3,LA7SCT) ; SCT Code
"RTN","LA7VIN7B",71,0)
 S SUB="9,"_ISQN2_",0,.01,0"
"RTN","LA7VIN7B",72,0)
 D LAH(SUB,1,OBX11) ;
"RTN","LA7VIN7B",73,0)
 S SUB="9,"_ISQN2_",0,.01,1"
"RTN","LA7VIN7B",74,0)
 D LAH(SUB,1,LA74)
"RTN","LA7VIN7B",75,0)
 S X=$P(LA7RO,"^",3)
"RTN","LA7VIN7B",76,0)
 D LAH(SUB,2,X)
"RTN","LA7VIN7B",77,0)
 D NTE
"RTN","LA7VIN7B",78,0)
 Q
"RTN","LA7VIN7B",79,0)
 ;
"RTN","LA7VIN7B",80,0)
 ;
"RTN","LA7VIN7B",81,0)
11 ;
"RTN","LA7VIN7B",82,0)
 ; Process Fungal Colony Count (Subscript 9)
"RTN","LA7VIN7B",83,0)
 N X,SUB,ISQN2,UNITS
"RTN","LA7VIN7B",84,0)
 S ISQN2=0
"RTN","LA7VIN7B",85,0)
 I SUBID'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",9,SUBID)
"RTN","LA7VIN7B",86,0)
 I SUBID="" I $G(PSUBID)'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",9,PSUBID)
"RTN","LA7VIN7B",87,0)
 I 'ISQN2 D  Q  ;
"RTN","LA7VIN7B",88,0)
 . D SUBIDERR^LA7VIN71
"RTN","LA7VIN7B",89,0)
 ;
"RTN","LA7VIN7B",90,0)
 D LAH("9,0",-1,"")
"RTN","LA7VIN7B",91,0)
 S SUB="9,"_ISQN2_",0"
"RTN","LA7VIN7B",92,0)
 S X=$$UNESC^LA7VHLU3(OBX5,LA7FS_LA7ECH)
"RTN","LA7VIN7B",93,0)
 S UNITS=$$UNESC^LA7VHLU3(OBX6,LA7FS_LA7ECH)
"RTN","LA7VIN7B",94,0)
 I UNITS'="" S X=X_" "_UNITS
"RTN","LA7VIN7B",95,0)
 D LAH(SUB,2,X) ;quantity
"RTN","LA7VIN7B",96,0)
 S SUB="9,"_ISQN2_",0,1"
"RTN","LA7VIN7B",97,0)
 D LAH(SUB,1,LA7RLNC) ; LOINC
"RTN","LA7VIN7B",98,0)
 S SUB="9,"_ISQN2_",0,1,0"
"RTN","LA7VIN7B",99,0)
 D LAH(SUB,1,OBX11) ; Obsv Results
"RTN","LA7VIN7B",100,0)
 S SUB="9,"_ISQN2_",0,1,1"
"RTN","LA7VIN7B",101,0)
 D LAH(SUB,1,LA74)
"RTN","LA7VIN7B",102,0)
 S X=$P(LA7RO,"^",3)
"RTN","LA7VIN7B",103,0)
 D LAH(SUB,2,X) ; Resp Obsv.
"RTN","LA7VIN7B",104,0)
 D NTE
"RTN","LA7VIN7B",105,0)
 Q
"RTN","LA7VIN7B",106,0)
 ;
"RTN","LA7VIN7B",107,0)
 ;
"RTN","LA7VIN7B",108,0)
15(COM) ;
"RTN","LA7VIN7B",109,0)
 ; Process Mycology Rpt Remark (Subscript 10)
"RTN","LA7VIN7B",110,0)
 ; Input
"RTN","LA7VIN7B",111,0)
 ;  COM : <opt> The text to use for the remark (comment)
"RTN","LA7VIN7B",112,0)
 ;      :  If empty OBX5 is used
"RTN","LA7VIN7B",113,0)
 ;
"RTN","LA7VIN7B",114,0)
 N X,SUB,ISQN2,TEXT,TEXT2,MAXLEN
"RTN","LA7VIN7B",115,0)
 ; dont initialize COM
"RTN","LA7VIN7B",116,0)
 S SUB="10,0"
"RTN","LA7VIN7B",117,0)
 D LAH(SUB,1,LA74)
"RTN","LA7VIN7B",118,0)
 S X=$P(LA7RO,"^",3)
"RTN","LA7VIN7B",119,0)
 D LAH(SUB,2,X) ; resp obsv
"RTN","LA7VIN7B",120,0)
 D LAH(SUB,3,LA7RLNC) ; LOINC
"RTN","LA7VIN7B",121,0)
 D LAH(SUB,4,OBX11) ;obsv status
"RTN","LA7VIN7B",122,0)
 S ISQN2=$O(^LAH(LWL,1,LA7ISQN,"MI",10,"A"),-1)+1
"RTN","LA7VIN7B",123,0)
 ; pull comment from COM or OBX5
"RTN","LA7VIN7B",124,0)
 S TEXT="OBX5"
"RTN","LA7VIN7B",125,0)
 I $D(COM)=1 S TEXT="COM"
"RTN","LA7VIN7B",126,0)
 I TEXT="OBX5" S TEXT2=$$UNESC^LA7VHLU3(OBX5,LA7FS_LA7ECH)
"RTN","LA7VIN7B",127,0)
 I TEXT="COM" S TEXT2=$G(COM)
"RTN","LA7VIN7B",128,0)
 S MAXLEN=68 ; COMMENTS field size
"RTN","LA7VIN7B",129,0)
 S SUB="10,"_ISQN2_",0"
"RTN","LA7VIN7B",130,0)
 ; insert separator line if needed
"RTN","LA7VIN7B",131,0)
 I ISQN2>1 D LAH(SUB,1," ") S ISQN2=ISQN2+1 S SUB="10,"_ISQN2_",0"
"RTN","LA7VIN7B",132,0)
 ;
"RTN","LA7VIN7B",133,0)
 ; if this an override insert Original Concept name
"RTN","LA7VIN7B",134,0)
 I $P(DSOBX3,"^",6) I $P(DSOBX3,"^",1)'=$P(DSOBX3,"^",6) D  ;
"RTN","LA7VIN7B",135,0)
 . S X=$P(DSOBX3,"^",6) ;original concept
"RTN","LA7VIN7B",136,0)
 . S X=$G(^LAB(62.47,X,0))
"RTN","LA7VIN7B",137,0)
 . S X=$P(X,U,1)
"RTN","LA7VIN7B",138,0)
 . Q:X=""
"RTN","LA7VIN7B",139,0)
 . D LAH(SUB,1,"["_X_"]")
"RTN","LA7VIN7B",140,0)
 . S ISQN2=ISQN2+1 S SUB="13,"_ISQN2_",0"
"RTN","LA7VIN7B",141,0)
 ;
"RTN","LA7VIN7B",142,0)
 ; modify MAXLEN for prefixed Subid
"RTN","LA7VIN7B",143,0)
 I $L(TEXT2)'>MAXLEN D  ;
"RTN","LA7VIN7B",144,0)
 . D LAH(SUB,1,TEXT2)
"RTN","LA7VIN7B",145,0)
 I $L(TEXT2)>MAXLEN D  ;
"RTN","LA7VIN7B",146,0)
 . N I,Y,PASS
"RTN","LA7VIN7B",147,0)
 . S PASS=$L(TEXT2)\MAXLEN
"RTN","LA7VIN7B",148,0)
 . S:($L(TEXT2)#MAXLEN)>0 PASS=PASS+1
"RTN","LA7VIN7B",149,0)
 . F I=0:1:PASS-1 S Y=(I*MAXLEN)+1 D  ;
"RTN","LA7VIN7B",150,0)
 . . D LAH(SUB,1,$E(TEXT2,Y,(Y+MAXLEN)-1))
"RTN","LA7VIN7B",151,0)
 . . S Y=Y+MAXLEN
"RTN","LA7VIN7B",152,0)
 . . S ISQN2=ISQN2+1
"RTN","LA7VIN7B",153,0)
 . . S SUB="10,"_ISQN2_",0"
"RTN","LA7VIN7B",154,0)
 . ;
"RTN","LA7VIN7B",155,0)
 D NTE^LA7VIN71(LA76247,ISQN)
"RTN","LA7VIN7B",156,0)
 Q
"RTN","LA7VIN7B",157,0)
 ;
"RTN","LA7VIN7B",158,0)
 ;
"RTN","LA7VIN7B",159,0)
20 ;
"RTN","LA7VIN7B",160,0)
 ; Process Mycobacterium Colony Count (Subscript 12)
"RTN","LA7VIN7B",161,0)
 N X,SUB,ISQN2,UNITS
"RTN","LA7VIN7B",162,0)
 S ISQN2=0
"RTN","LA7VIN7B",163,0)
 I SUBID'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",12,SUBID)
"RTN","LA7VIN7B",164,0)
 I SUBID="" I $G(PSUBID)'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",12,PSUBID)
"RTN","LA7VIN7B",165,0)
 I 'ISQN2 D  Q  ;
"RTN","LA7VIN7B",166,0)
 . D SUBIDERR^LA7VIN71
"RTN","LA7VIN7B",167,0)
 ;
"RTN","LA7VIN7B",168,0)
 S SUB="12,"_ISQN2_",0"
"RTN","LA7VIN7B",169,0)
 S X=$$UNESC^LA7VHLU3(OBX5,LA7FS_LA7ECH)
"RTN","LA7VIN7B",170,0)
 S UNITS=$$UNESC^LA7VHLU3(OBX6,LA7FS_LA7ECH)
"RTN","LA7VIN7B",171,0)
 I UNITS'="" S X=X_" "_UNITS
"RTN","LA7VIN7B",172,0)
 D LAH(SUB,2,X) ;quantity
"RTN","LA7VIN7B",173,0)
 S SUB="12,"_ISQN2_",0,1"
"RTN","LA7VIN7B",174,0)
 D LAH(SUB,1,LA7RLNC) ; LOINC
"RTN","LA7VIN7B",175,0)
 S SUB="12,"_ISQN2_",0,1,0"
"RTN","LA7VIN7B",176,0)
 D LAH(SUB,1,OBX11) ; Obsv Results
"RTN","LA7VIN7B",177,0)
 S SUB="12,"_ISQN2_",0,1,1"
"RTN","LA7VIN7B",178,0)
 D LAH(SUB,1,LA74)
"RTN","LA7VIN7B",179,0)
 S X=$P(LA7RO,"^",3)
"RTN","LA7VIN7B",180,0)
 D LAH(SUB,2,X) ; Resp Obsv.
"RTN","LA7VIN7B",181,0)
 D NTE
"RTN","LA7VIN7B",182,0)
 Q
"RTN","LA7VIN7B",183,0)
 ;
"RTN","LA7VIN7B",184,0)
 ;
"RTN","LA7VIN7B",185,0)
21 ;
"RTN","LA7VIN7B",186,0)
 ; Process mycobacteria susceptibilities (Subscript 12)
"RTN","LA7VIN7B",187,0)
 N LA76206,LA7X,X,X2,SUB,ISQN2,ASCRN
"RTN","LA7VIN7B",188,0)
 I DDS<0!(DDP'>0) D DDERR^LA7VIN7A Q
"RTN","LA7VIN7B",189,0)
 S ISQN2=0
"RTN","LA7VIN7B",190,0)
 I SUBID'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",12,SUBID)
"RTN","LA7VIN7B",191,0)
 I SUBID="" I $G(PSUBID)'="" S ISQN2=$$SUBID^LAGEN(LWL,LA7ISQN,"MI",12,PSUBID)
"RTN","LA7VIN7B",192,0)
 I 'ISQN2 D  Q  ;
"RTN","LA7VIN7B",193,0)
 . D SUBIDERR^LA7VIN71
"RTN","LA7VIN7B",194,0)
 ;
"RTN","LA7VIN7B",195,0)
 S ASCRN=$$FIELD^LA7VHLU7(13)
"RTN","LA7VIN7B",196,0)
 I ASCRN'="" D  ;
"RTN","LA7VIN7B",197,0)
 . N X,DATA
"RTN","LA7VIN7B",198,0)
 . S X=$P(DSOBX3,"^",4)
"RTN","LA7VIN7B",199,0)
 . S X=X+.2
"RTN","LA7VIN7B",200,0)
 . D CHK^DIE(63.3,X,"",ASCRN,.DATA)
"RTN","LA7VIN7B",201,0)
 . S ASCRN=$P(DATA,"^",1)
"RTN","LA7VIN7B",202,0)
 S SUB="12,"_ISQN2_","_DDS
"RTN","LA7VIN7B",203,0)
 S X=OBX5_$S(OBX6'="":" "_OBX6,1:"")
"RTN","LA7VIN7B",204,0)
 ; convert SCT susc code to local code
"RTN","LA7VIN7B",205,0)
 I LA7VTYP?1(1"CE",1"CM",1"CNE",1"CWE") D
"RTN","LA7VIN7B",206,0)
 . N LA7I,VAR,VER,X2
"RTN","LA7VIN7B",207,0)
 . S X2="",VAR=OBX5 D FLD2ARR^LA7VHLU7(.VAR,LA7FS_LA7ECH)
"RTN","LA7VIN7B",208,0)
 . F LA7I=1,4 D  Q:X2'=""
"RTN","LA7VIN7B",209,0)
 . . I $G(VAR(LA7I))="",$G(VAR(LA7I+1))="" Q  ; Quit if no code or text for this tuple
"RTN","LA7VIN7B",210,0)
 . . S VER=$S(LA7I=1:7,1:8)
"RTN","LA7VIN7B",211,0)
 . . S X2=$$SCT2KB^LA7VHLU6($G(VAR(LA7I)),$G(VAR(LA7I+1)),$G(VAR(LA7I+2)),$G(VAR(VER)))
"RTN","LA7VIN7B",212,0)
 . . I X2'="" S X=X2 Q
"RTN","LA7VIN7B",213,0)
 . . S X2=$$SCT2PN^LA7VHLU6($G(VAR(LA7I)),$G(VAR(LA7I+1)),$G(VAR(LA7I+2)),$G(VAR(VER)))
"RTN","LA7VIN7B",214,0)
 . . I X2'="" S X=X2
"RTN","LA7VIN7B",215,0)
 ;
"RTN","LA7VIN7B",216,0)
 S X=$TR(X,"^"," ")
"RTN","LA7VIN7B",217,0)
 D LAH(SUB,DDP,X) ; result
"RTN","LA7VIN7B",218,0)
 S SUB="12,"_ISQN2_","_DDS_",.01"
"RTN","LA7VIN7B",219,0)
 D LAH(SUB,1,LA7RLNC) ; LOINC
"RTN","LA7VIN7B",220,0)
 D LAH(SUB,2,LA7RNLT) ; NLT code
"RTN","LA7VIN7B",221,0)
 D LAH(SUB,3,LA7SCT) ; SCT
"RTN","LA7VIN7B",222,0)
 S SUB="12,"_ISQN2_","_DDS_",.01,0"
"RTN","LA7VIN7B",223,0)
 D LAH(SUB,1,OBX11) ;obsv status
"RTN","LA7VIN7B",224,0)
 S SUB="12,"_ISQN2_","_DDS_",.01,1"
"RTN","LA7VIN7B",225,0)
 D LAH(SUB,1,LA74) ; #4 IEN
"RTN","LA7VIN7B",226,0)
 S X=$P(LA7RO,"^",3)
"RTN","LA7VIN7B",227,0)
 D LAH(SUB,2,X) ; resp observer
"RTN","LA7VIN7B",228,0)
 ;
"RTN","LA7VIN7B",229,0)
 ; Set prefix to antibiotic abbrevation or full name to annotate comments.
"RTN","LA7VIN7B",230,0)
 S LA7X=$$ABPREFIX^LA7VIN7A(2,LA7DD)
"RTN","LA7VIN7B",231,0)
 I LA7X="" S LA7X=LA7DD("LABEL")
"RTN","LA7VIN7B",232,0)
 D NTE^LA7VIN71(LA76247,ISQN2,LA7X)
"RTN","LA7VIN7B",233,0)
 Q
"RTN","LA7VIN7B",234,0)
 ;
"RTN","LA7VIN7B",235,0)
 ;
"RTN","LA7VIN7B",236,0)
79 ;
"RTN","LA7VIN7B",237,0)
 ; Process Acid Fast Stain (Subscript 11)
"RTN","LA7VIN7B",238,0)
 N X,SUB,ISQN2,UNITS,DATAOK
"RTN","LA7VIN7B",239,0)
 S SUB="11,0"
"RTN","LA7VIN7B",240,0)
 S X=$$UNESC^LA7VHLU3(OBX5,LA7FS_LA7ECH)
"RTN","LA7VIN7B",241,0)
 D  ;
"RTN","LA7VIN7B",242,0)
 . N Z,LAMSG
"RTN","LA7VIN7B",243,0)
 . D CHK^DIE(63.05,24,"",X,.Z,"LAMSG")
"RTN","LA7VIN7B",244,0)
 . I $G(Z)'="^" S X=Z
"RTN","LA7VIN7B",245,0)
 S DATAOK=$$DATAOK^LA7VIN7(63.05,24,X)
"RTN","LA7VIN7B",246,0)
 S UNITS=$$UNESC^LA7VHLU3(OBX6,LA7FS_LA7ECH)
"RTN","LA7VIN7B",247,0)
 ; Workaround 01/10/2007 (store anything in Set of Codes)
"RTN","LA7VIN7B",248,0)
 D LAH(SUB,3,X)
"RTN","LA7VIN7B",249,0)
 I DATAOK D  ;
"RTN","LA7VIN7B",250,0)
 . D LAH(SUB,3,X)
"RTN","LA7VIN7B",251,0)
 ;
"RTN","LA7VIN7B",252,0)
 I 'DATAOK D  ;
"RTN","LA7VIN7B",253,0)
 . I UNITS'="" S X=X_" "_UNITS
"RTN","LA7VIN7B",254,0)
 . D LAH(SUB,4,X) ;quantity
"RTN","LA7VIN7B",255,0)
 ;
"RTN","LA7VIN7B",256,0)
 S SUB="11,0,.01"
"RTN","LA7VIN7B",257,0)
 D LAH(SUB,1,LA7RLNC) ; LOINC
"RTN","LA7VIN7B",258,0)
 S SUB="11,0,.01,0"
"RTN","LA7VIN7B",259,0)
 D LAH(SUB,1,OBX11) ; Obsv Results
"RTN","LA7VIN7B",260,0)
 S SUB="11,0,.01,1"
"RTN","LA7VIN7B",261,0)
 D LAH(SUB,1,LA74)
"RTN","LA7VIN7B",262,0)
 S X=$P(LA7RO,"^",3)
"RTN","LA7VIN7B",263,0)
 D LAH(SUB,2,X) ; Resp Obsv.
"RTN","LA7VIN7B",264,0)
 D NTE^LA7VIN71(LA76247,ISQN)
"RTN","LA7VIN7B",265,0)
 Q
"RTN","LA7VIN7B",266,0)
 ;
"RTN","LA7VIN7B",267,0)
 ;
"RTN","LA7VIN7B",268,0)
85 ;
"RTN","LA7VIN7B",269,0)
 ; Process Acid Fast Stain Quantity (Subscript 11)
"RTN","LA7VIN7B",270,0)
 N X,SUB,ISQN2,UNITS
"RTN","LA7VIN7B",271,0)
 S SUB="11,0"
"RTN","LA7VIN7B",272,0)
 S X=$$UNESC^LA7VHLU3(OBX5,LA7FS_LA7ECH)
"RTN","LA7VIN7B",273,0)
 S UNITS=$$UNESC^LA7VHLU3(OBX6,LA7FS_LA7ECH)
"RTN","LA7VIN7B",274,0)
 I UNITS'="" S X=X_" "_UNITS
"RTN","LA7VIN7B",275,0)
 D LAH(SUB,4,X)
"RTN","LA7VIN7B",276,0)
 ;
"RTN","LA7VIN7B",277,0)
 S SUB="11,0,.02"
"RTN","LA7VIN7B",278,0)
 D LAH(SUB,1,LA7RLNC) ; LOINC
"RTN","LA7VIN7B",279,0)
 S SUB="11,0,.02,0"
"RTN","LA7VIN7B",280,0)
 D LAH(SUB,1,OBX11) ; Obsv Results
"RTN","LA7VIN7B",281,0)
 S SUB="11,0,.02,1"
"RTN","LA7VIN7B",282,0)
 D LAH(SUB,1,LA74)
"RTN","LA7VIN7B",283,0)
 S X=$P(LA7RO,"^",3)
"RTN","LA7VIN7B",284,0)
 D LAH(SUB,2,X) ; Resp Obsv.
"RTN","LA7VIN7B",285,0)
 D NTE^LA7VIN71(LA76247,ISQN)
"RTN","LA7VIN7B",286,0)
 Q
"RTN","LA7VIN7B",287,0)
 ;
"RTN","LA7VIN7B",288,0)
 ;
"RTN","LA7VIN7B",289,0)
LAH(LASUB,LAP,LAVAL) ;
"RTN","LA7VIN7B",290,0)
 ; Convenience method
"RTN","LA7VIN7B",291,0)
 D LAH^LAGEN(+$G(LWL),+$G(LA7ISQN),"MI",LASUB,LAP,LAVAL)
"RTN","LA7VIN7B",292,0)
 Q
"RTN","LA7VIN7B",293,0)
 ;
"RTN","LA7VIN7B",294,0)
 ;
"RTN","LA7VIN7B",295,0)
NTE ;
"RTN","LA7VIN7B",296,0)
 ; Convenience method
"RTN","LA7VIN7B",297,0)
 D NTE^LA7VIN71(LA76247,ISQN2)
"RTN","LA7VIN7B",298,0)
 Q
"RTN","LA90A")
0^^B5670536
"RTN","LA90A",1,0)
LA90A ;DSS/FHS - VLE MICRO ENHANCEMENT INSTALL SUPPORT;12/06/16  10:27
"RTN","LA90A",2,0)
 ;;5.2;AUTOMATED LAB INSTRUMENTS;**90**;Sep 27, 1994;Build 17
"RTN","LA90A",3,0)
EN ; Does not prevent loading of the transport global.
"RTN","LA90A",4,0)
 ; Environment check is done only during the install.
"RTN","LA90A",5,0)
 Q:'$G(XPDENV)
"RTN","LA90A",6,0)
 D CHECK
"RTN","LA90A",7,0)
 D EXIT
"RTN","LA90A",8,0)
 Q
"RTN","LA90A",9,0)
 ;
"RTN","LA90A",10,0)
CHECK ; Perform environment check
"RTN","LA90A",11,0)
 N VER
"RTN","LA90A",12,0)
 I $S('$G(IOM):1,'$G(IOSL):1,$G(U)'="^":1,1:0) D  Q
"RTN","LA90A",13,0)
 . D BMES("Terminal Device is not defined")
"RTN","LA90A",14,0)
 . S XPDQUIT=2
"RTN","LA90A",15,0)
 I $S('$G(DUZ):1,$D(DUZ)[0:1,$D(DUZ(0))[0:1,1:0) D  Q
"RTN","LA90A",16,0)
 . D BMES("Please log in to set local DUZ... variables")
"RTN","LA90A",17,0)
 . S XPDQUIT=2
"RTN","LA90A",18,0)
 I '$D(^VA(200,+$G(DUZ),0))#2 D  Q
"RTN","LA90A",19,0)
 . D BMES("You are not a valid user on this system")
"RTN","LA90A",20,0)
 . S XPDQUIT=2
"RTN","LA90A",21,0)
 S XPDIQ("XPZ1","B")="NO"
"RTN","LA90A",22,0)
 Q
"RTN","LA90A",23,0)
 ;
"RTN","LA90A",24,0)
EXIT ;
"RTN","LA90A",25,0)
 I $G(XPDQUIT) D BMES("--- Install Environment Check FAILED ---")
"RTN","LA90A",26,0)
 I '$G(XPDQUIT) D BMES("--- Environment Check is Ok ---")
"RTN","LA90A",27,0)
 Q
"RTN","LA90A",28,0)
 ;
"RTN","LA90A",29,0)
PRE ; KIDS Pre install for LA*5.2*90
"RTN","LA90A",30,0)
 N XQA,XQAMSG,MSG,LRCROSS,LRROOT,LRMSG
"RTN","LA90A",31,0)
 S XQAMSG="Installation of patch "_$G(XPDNM,"Unknown patch")
"RTN","LA90A",32,0)
 S XQAMSG=XQAMSG_" started on "_$$HTE^XLFDT($H)
"RTN","LA90A",33,0)
 S XQA("G.LMI")=""
"RTN","LA90A",34,0)
 D SETUP^XQALERT
"RTN","LA90A",35,0)
 ;
"RTN","LA90A",36,0)
 S MSG="Sending install started alert to mail group G.LMI"
"RTN","LA90A",37,0)
 D BMES(MSG)
"RTN","LA90A",38,0)
 D BMES("*** Pre install started ***")
"RTN","LA90A",39,0)
 S LRCROSS=0
"RTN","LA90A",40,0)
 F  S LRCROSS=+$O(^DD(62.41,.01,1,LRCROSS)) Q:LRCROSS<1  Q:$P(^(LRCROSS,0),U,3)="TRIGGER"
"RTN","LA90A",41,0)
 I LRCROSS<1 D BMES("--- No actions required for pre install ---")
"RTN","LA90A",42,0)
 I LRCROSS D
"RTN","LA90A",43,0)
 . D BMES("Deleting Traditional Cross Reference")
"RTN","LA90A",44,0)
 . D DELIX^DDMOD(62.41,.01,LRCROSS,"K","LRROOT","LRMSG")
"RTN","LA90A",45,0)
 D BMES("*** Pre install completed ***")
"RTN","LA90A",46,0)
 Q
"RTN","LA90A",47,0)
 ;
"RTN","LA90A",48,0)
POST ; KIDS Post install for LA*5.2*90
"RTN","LA90A",49,0)
 S XQAMSG="Installation of patch "_$G(XPDNM,"Unknown patch")
"RTN","LA90A",50,0)
 S XQAMSG=XQAMSG_" completed on "_$$HTE^XLFDT($H)
"RTN","LA90A",51,0)
 S XQA("G.LMI")=""
"RTN","LA90A",52,0)
 D SETUP^XQALERT
"RTN","LA90A",53,0)
 ;
"RTN","LA90A",54,0)
 D BMES("Installation completed")
"RTN","LA90A",55,0)
 Q
"RTN","LA90A",56,0)
BMES(STR) ;Print string to screen and package install file
"RTN","LA90A",57,0)
 D BMES^XPDUTL($$CJ^XLFSTR(STR,IOM))
"VER")
8.0^22.0
"^DD",62.4,62.4,0)
FIELD^NL^107^45
"^DD",62.4,62.4,0,"DDA")
N
"^DD",62.4,62.4,0,"DT")
3160531
"^DD",62.4,62.4,0,"IX","AC",62.4,100)

"^DD",62.4,62.4,0,"IX","AD",62.4,3)

"^DD",62.4,62.4,0,"IX","AE",62.4,98)

"^DD",62.4,62.4,0,"IX","AS",62.4,5)

"^DD",62.4,62.4,0,"IX","B",62.4,.01)

"^DD",62.4,62.4,0,"IX","C",62.4,2)

"^DD",62.4,62.4,0,"IX","D",62.4,10)

"^DD",62.4,62.4,0,"NM","AUTO INSTRUMENT")
 
"^DD",62.4,62.4,0,"PT",62.4,100)

"^DD",62.4,62.4,0,"PT",68.07,.01)
 
"^DD",62.4,62.4,0,"PT",68.09,.01)
 
"^DD",62.4,62.4,0,"VRPK")
LA
"^DD",62.4,62.4,0,"VRRV")
LA*5.2*57
"^DD",62.4,62.4,.001,0)
NUMBER^NJ3,0^^ ^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X
"^DD",62.4,62.4,.001,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 999
"^DD",62.4,62.4,.001,21,0)
^^1^1^2901016^^
"^DD",62.4,62.4,.001,21,1,0)
The internal number for this auto instrument.  It ties the routines running on a line or data concentrator to this particular file for the rest of the information within the file.
"^DD",62.4,62.4,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(+X=X)!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",62.4,62.4,.01,1,0)
^.1
"^DD",62.4,62.4,.01,1,1,0)
62.4^B
"^DD",62.4,62.4,.01,1,1,1)
S ^LAB(62.4,"B",$E(X,1,30),DA)=""
"^DD",62.4,62.4,.01,1,1,2)
K ^LAB(62.4,"B",$E(X,1,30),DA)
"^DD",62.4,62.4,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",62.4,62.4,.01,21,0)
^^1^1^2841114^
"^DD",62.4,62.4,.01,21,1,0)
The name of the instrument.
"^DD",62.4,62.4,.01,"DT")
2890209
"^DD",62.4,62.4,.02,0)
VENDOR CARD ADDRESS^F^^9;9^K:$L(X)>7!($L(X)<1) X
"^DD",62.4,62.4,.02,3)
Answer must be 1-7 characters in length.
"^DD",62.4,62.4,.02,21,0)
^^2^2^2950918^^^
"^DD",62.4,62.4,.02,21,1,0)
 The vendor card address should be stored in this field for Lab HL7
"^DD",62.4,62.4,.02,21,2,0)
 message downloads using Lab Universal Interface software.
"^DD",62.4,62.4,.02,"DT")
2950915
"^DD",62.4,62.4,.04,0)
SHORT ACCESSION # LENGTH^NJ2,0^^9;10^K:+X'=X!(X>10)!(X<1)!(X?.E1"."1N.N) X
"^DD",62.4,62.4,.04,3)
Type a Number between 1 and 10, 0 Decimal Digits
"^DD",62.4,62.4,.04,21,0)
^^2^2^2960226^^
"^DD",62.4,62.4,.04,21,1,0)
This field should be used to pad accession numbers based on the
"^DD",62.4,62.4,.04,21,2,0)
fixed length entered for this instrument.
"^DD",62.4,62.4,.04,"DT")
2960220
"^DD",62.4,62.4,.14,0)
WKLD METHOD^P64.2'^LAB(64.2,^SUF;1^Q
"^DD",62.4,62.4,.14,1,0)
^.1
"^DD",62.4,62.4,.14,1,1,0)
^^TRIGGER^62.4^.15
"^DD",62.4,62.4,.14,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^LAB(62.4,D0,"SUF")):^("SUF"),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y X ^DD(62.4,.14,1,1,1.1) X ^DD(62.4,.14,1,1,1.4)
"^DD",62.4,62.4,.14,1,1,1.1)
S X=DIV S X=$P(^LAB(64.2,DIV,0),U)
"^DD",62.4,62.4,.14,1,1,1.4)
S DIH=$S($D(^LAB(62.4,DIV(0),"SUF")):^("SUF"),1:""),DIV=X S $P(^("SUF"),U,2)=DIV,DIH=62.4,DIG=.15 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",62.4,62.4,.14,1,1,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^LAB(62.4,D0,"SUF")):^("SUF"),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y S X="" X ^DD(62.4,.14,1,1,2.4)
"^DD",62.4,62.4,.14,1,1,2.4)
S DIH=$S($D(^LAB(62.4,DIV(0),"SUF")):^("SUF"),1:""),DIV=X S $P(^("SUF"),U,2)=DIV,DIH=62.4,DIG=.15 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",62.4,62.4,.14,1,1,"CREATE VALUE")
S X=$P(^LAB(64.2,DIV,0),U)
"^DD",62.4,62.4,.14,1,1,"DELETE VALUE")
@
"^DD",62.4,62.4,.14,1,1,"DT")
2940817
"^DD",62.4,62.4,.14,1,1,"FIELD")
WKLD CODE METHOD NAME
"^DD",62.4,62.4,.14,1,2,0)
^^TRIGGER^62.4^.16
"^DD",62.4,62.4,.14,1,2,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^LAB(62.4,D0,"SUF")):^("SUF"),1:"") S X=$P(Y(1),U,3),X=X S DIU=X K Y X ^DD(62.4,.14,1,2,1.1) X ^DD(62.4,.14,1,2,1.4)
"^DD",62.4,62.4,.14,1,2,1.1)
S X=DIV S X=$P(^LAB(64.2,DIV,0),U,2)
"^DD",62.4,62.4,.14,1,2,1.4)
S DIH=$S($D(^LAB(62.4,DIV(0),"SUF")):^("SUF"),1:""),DIV=X S $P(^("SUF"),U,3)=DIV,DIH=62.4,DIG=.16 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",62.4,62.4,.14,1,2,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^LAB(62.4,D0,"SUF")):^("SUF"),1:"") S X=$P(Y(1),U,3),X=X S DIU=X K Y S X="" X ^DD(62.4,.14,1,2,2.4)
"^DD",62.4,62.4,.14,1,2,2.4)
S DIH=$S($D(^LAB(62.4,DIV(0),"SUF")):^("SUF"),1:""),DIV=X S $P(^("SUF"),U,3)=DIV,DIH=62.4,DIG=.16 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",62.4,62.4,.14,1,2,"CREATE VALUE")
S X=$P(^LAB(64.2,DIV,0),U,2)
"^DD",62.4,62.4,.14,1,2,"DELETE VALUE")
@
"^DD",62.4,62.4,.14,1,2,"DT")
2940817
"^DD",62.4,62.4,.14,1,2,"FIELD")
WKLD CODE SUFFIX
"^DD",62.4,62.4,.14,21,0)
^^2^2^2930325^
"^DD",62.4,62.4,.14,21,1,0)
Indicate what method the system should use as a default value for workload
"^DD",62.4,62.4,.14,21,2,0)
identification purposes.
"^DD",62.4,62.4,.14,"DT")
2940817
"^DD",62.4,62.4,.15,0)
WKLD CODE METHOD NAME^F^^SUF;2^K:$L(X)>40!($L(X)<1) X
"^DD",62.4,62.4,.15,3)
Answer must be 1-40 characters in length.
"^DD",62.4,62.4,.15,5,1,0)
62.4^.14^1
"^DD",62.4,62.4,.15,9)
^
"^DD",62.4,62.4,.15,21,0)
^^2^2^2930325^
"^DD",62.4,62.4,.15,21,1,0)
 This field is automatically filled in when a selection of wkld code method
"^DD",62.4,62.4,.15,21,2,0)
name is made. I represents an eye readable name of the code selected.
"^DD",62.4,62.4,.15,"DT")
2901221
"^DD",62.4,62.4,.16,0)
WKLD CODE SUFFIX^FX^^SUF;3^K:$L(X)>5!($L(X)<4) X
"^DD",62.4,62.4,.16,3)
Answer must be 4-5 characters in length.
"^DD",62.4,62.4,.16,5,1,0)
62.4^.14^2
"^DD",62.4,62.4,.16,9)
^
"^DD",62.4,62.4,.16,21,0)
^^1^1^2930325^
"^DD",62.4,62.4,.16,21,1,0)
 Indicate what suffix should be used as a default value for this instrument.
"^DD",62.4,62.4,.16,"DT")
2920707
"^DD",62.4,62.4,1,0)
ECHO DEVICE^*P3.5'X^%ZIS(1,^0;2^K:$L(X)>20!($L(X)<1) X I $D(X) S DIC(0)="EMQ" D ^DIC S X=$P(Y,U,2),DIC=DIE K:Y<1 X
"^DD",62.4,62.4,1,3)
Enter the name of the device to echo input to.  If this is a system line, this is the name of the computer port the LSI is connected to.
"^DD",62.4,62.4,1,21,0)
^^5^5^2870505^^^^
"^DD",62.4,62.4,1,21,1,0)
This is the port name under ZIS which would echo the information from the
"^DD",62.4,62.4,1,21,2,0)
 automated instrument which has gone through the data concentrating device
"^DD",62.4,62.4,1,21,3,0)
 to the main computer back to the laboratory to indicate that all the data
"^DD",62.4,62.4,1,21,4,0)
 lines are intact, and that the values are actually getting all the way
"^DD",62.4,62.4,1,21,5,0)
 back to the computer.
"^DD",62.4,62.4,1,"DT")
2870430
"^DD",62.4,62.4,2,0)
PROGRAM^FX^^0;3^K:X[""""!(X'?.ANP)!(X<0) X I $D(X) K:$L(X)>8!($L(X)<2) X I $D(X) S %=$O(^LAB(62.4,"C",X,0)) K:%>0&(%<100) X
"^DD",62.4,62.4,2,1,0)
^.1
"^DD",62.4,62.4,2,1,1,0)
62.4^C
"^DD",62.4,62.4,2,1,1,1)
S ^LAB(62.4,"C",$E(X,1,30),DA)=""
"^DD",62.4,62.4,2,1,1,2)
K ^LAB(62.4,"C",$E(X,1,30),DA)
"^DD",62.4,62.4,2,3)
ANSWER MUST BE 2-8 CHARACTERS IN LENGTH
"^DD",62.4,62.4,2,4)
W !,"Name can't be used twice:" S X="" F I=0:0 S X=$O(^LAB(62.4,"C",X)) Q:X=""  W !?5,X,?15,$O(^(X,0))
"^DD",62.4,62.4,2,9)
@
"^DD",62.4,62.4,2,21,0)
^.001^4^4^3010305^^^^
"^DD",62.4,62.4,2,21,1,0)
The name of the processing program for this instrument. The program name
"^DD",62.4,62.4,2,21,2,0)
must be unique for each entry in this file. The program that monitors the
"^DD",62.4,62.4,2,21,3,0)
data coming from the instruments is designated LAB.  It is run by the
"^DD",62.4,62.4,2,21,4,0)
task manager and runs continuously.
"^DD",62.4,62.4,2,"DT")
2990618
"^DD",62.4,62.4,3,0)
LOAD/WORK LIST^RP68.2'^LRO(68.2,^0;4^Q
"^DD",62.4,62.4,3,1,0)
^.1
"^DD",62.4,62.4,3,1,1,0)
62.4^AD^MUMPS
"^DD",62.4,62.4,3,1,1,1)
I $P(^LAB(62.4,DA,0),U,6)="SEQN" S ^LRO(68.2,"AS",X,DA)=""
"^DD",62.4,62.4,3,1,1,2)
K ^LRO(68.2,"AS",X,DA)
"^DD",62.4,62.4,3,21,0)
^^1^1^2841114^
"^DD",62.4,62.4,3,21,1,0)
This points to the single worklist where processed data from the LA global is to be directed.
"^DD",62.4,62.4,3,"DT")
2860218
"^DD",62.4,62.4,5,0)
ENTRY for LAGEN ROUTINE^RS^LOG:Accession cross-reference;LLIST:Tray-cup or sequence x-ref;IDENT:Invoice number cross-reference;SEQN:Run order;^0;6^Q
"^DD",62.4,62.4,5,1,0)
^.1
"^DD",62.4,62.4,5,1,1,0)
62.4^AS^MUMPS
"^DD",62.4,62.4,5,1,1,1)
I $P(^LAB(62.4,DA,0),U,4),X="SEQN" S ^LRO(68.2,"AS",$P(^(0),U,4),DA)=""
"^DD",62.4,62.4,5,1,1,2)
I X="SEQN" K ^LRO(68.2,"AS",+$P(^LAB(62.4,DA,0),U,4),DA)
"^DD",62.4,62.4,5,3)
Use the one that matches the way your lab runs this instrument..
"^DD",62.4,62.4,5,4)
W !,"Most LABs will use the LOG or LLIST method."
"^DD",62.4,62.4,5,21,0)
^^1^1^2841114^^
"^DD",62.4,62.4,5,21,1,0)
This is a line label in the LAGEN routine designating the entry point.
"^DD",62.4,62.4,5,"DT")
2860218
"^DD",62.4,62.4,6,0)
CROSS LINKED BY^RFX^^0;7^K:$L(X)>40!($L(X)<2) X I $D(X) S LR=X,X="S X="_LR D ^DIM S:$D(X) X=LR
"^DD",62.4,62.4,6,3)
ANSWER MUST BE 2-40 CHAR. VARIABLE NAME (ID, IDE, CUP)
"^DD",62.4,62.4,6,21,0)
^^5^5^2860904^^
"^DD",62.4,62.4,6,21,1,0)
The variable internal to the the Program (field 2), contains the
"^DD",62.4,62.4,6,21,2,0)
value used in the Entry for LAGEN Routine (field 5).
"^DD",62.4,62.4,6,21,3,0)
This entry is generally supplied when the program is written for
"^DD",62.4,62.4,6,21,4,0)
the instrument.  Also see documentation on LAPX routine in technical
"^DD",62.4,62.4,6,21,5,0)
manual.
"^DD",62.4,62.4,6,"DT")
2850722
"^DD",62.4,62.4,8,0)
MESSAGE CONFIGURATION^P62.48'^LAHM(62.48,^0;8^Q
"^DD",62.4,62.4,8,3)
Enter a configuration to use when sending or receiving messages.
"^DD",62.4,62.4,8,"DT")
2940516
"^DD",62.4,62.4,9,0)
*ECHO ALL INPUT^S^0:NO;1:YES;^0;9^Q
"^DD",62.4,62.4,9,3)
A YES WILL HAVE ALL INPUT STRINGS ECHOED TO THE ECHO DEVICE.
"^DD",62.4,62.4,9,21,0)
^^3^3^2850131^^
"^DD",62.4,62.4,9,21,1,0)
If this field is set, then all input strings to the LA routine will
"^DD",62.4,62.4,9,21,2,0)
be echoed to the echo device.  That is, all raw data from the instrument
"^DD",62.4,62.4,9,21,3,0)
will be echoed before any cross-referencing is done.
"^DD",62.4,62.4,9,"DT")
2850115
"^DD",62.4,62.4,10,0)
METHOD^F^^0;10^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>10!($L(X)<1) X
"^DD",62.4,62.4,10,1,0)
^.1
"^DD",62.4,62.4,10,1,1,0)
62.4^D
"^DD",62.4,62.4,10,1,1,1)
S ^LAB(62.4,"D",$E(X,1,30),DA)=""
"^DD",62.4,62.4,10,1,1,2)
K ^LAB(62.4,"D",$E(X,1,30),DA)
"^DD",62.4,62.4,10,3)
ANSWER MUST BE 1-10 CHARACTERS IN LENGTH
"^DD",62.4,62.4,10,21,0)
^^1^1^2841114^
"^DD",62.4,62.4,10,21,1,0)
This is the name of the method or instrument used.
"^DD",62.4,62.4,10,"DT")
2840119
"^DD",62.4,62.4,11,0)
DEFAULT ACCESSION AREA^*P68'^LRO(68,^0;11^S DIC("S")="I '$L($P(^(0),U,17))" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",62.4,62.4,11,12)
You can not select an accession areaa designated Work Area Only.
"^DD",62.4,62.4,11,12.1)
S DIC("S")="I '$L($P(^(0),U,17))"
"^DD",62.4,62.4,11,21,0)
^^2^2^2841114^^
"^DD",62.4,62.4,11,21,1,0)
This field contains the default accession list name for this instrument.
"^DD",62.4,62.4,11,21,2,0)
Points to FILE #68.
"^DD",62.4,62.4,11,"DT")
2920105
"^DD",62.4,62.4,12,0)
OVERLAY DATA^S^0:NO;1:YES;^0;12^Q
"^DD",62.4,62.4,12,21,0)
^^2^2^2870505^^^
"^DD",62.4,62.4,12,21,1,0)
Setting this field to YES will cause a rerun of instrument data
"^DD",62.4,62.4,12,21,2,0)
to overlay existing data.
"^DD",62.4,62.4,12,"DT")
2840514
"^DD",62.4,62.4,18,0)
STORE REMARKS^S^0:NO;1:YES;^0;17^Q
"^DD",62.4,62.4,18,3)
Answer 'Yes" if you want specimen comments to be stored.
"^DD",62.4,62.4,18,21,0)
^^5^5^3010831^^
"^DD",62.4,62.4,18,21,1,0)
This field controls if comments that are associated with an accession
"^DD",62.4,62.4,18,21,2,0)
or specimen are stored with the results. The default is NO.
"^DD",62.4,62.4,18,21,3,0)
 
"^DD",62.4,62.4,18,21,4,0)
There is a similar companion field at the test level which controls
"^DD",62.4,62.4,18,21,5,0)
comments associated with tests results.
"^DD",62.4,62.4,18,"DT")
3010831
"^DD",62.4,62.4,20,0)
NEW DATA^KX^^1;E1,200^K:$L(X)>200!($L(X)<2) X D ^DIM:$D(X)
"^DD",62.4,62.4,20,3)
NORMAL INSTRUMENT ENTER 'D NEW^LASET'
"^DD",62.4,62.4,20,9)
@
"^DD",62.4,62.4,20,21,0)
^^1^1^2901016^^^
"^DD",62.4,62.4,20,21,1,0)
This is a string of executable code which is used whenever a new string of data starts to come from the automated instrument.
"^DD",62.4,62.4,20,"DT")
2901016
"^DD",62.4,62.4,25,0)
RESTART^KX^^2;E1,200^K:$L(X)>200!($L(X)<2) X D ^DIM:$D(X)
"^DD",62.4,62.4,25,3)
ANSWER MUST BE 2-200 CHARACTERS IN LENGTH
"^DD",62.4,62.4,25,9)
@
"^DD",62.4,62.4,25,21,0)
^^1^1^2841114^
"^DD",62.4,62.4,25,21,1,0)
This is a string of executable code which restarts everything for this particular instrument if there has been a power failure, or if the routines have become totally lost.  If error conditions have occurred, it can restart itself.
"^DD",62.4,62.4,25,"DT")
2901016
"^DD",62.4,62.4,26,0)
HANDSHAKE RESPONSE^KX^^.5;E1,200^K:$L(X)>200!($L(X)<1) X D ^DIM:$D(X)
"^DD",62.4,62.4,26,3)
Code to set OUT to the handshake response
"^DD",62.4,62.4,26,9)
@
"^DD",62.4,62.4,26,21,0)
^^4^4^2860521^
"^DD",62.4,62.4,26,21,1,0)
If the instrument requires a handshake response, this field contains
"^DD",62.4,62.4,26,21,2,0)
the executable MUMPS code to set the response into the variable OUT.
"^DD",62.4,62.4,26,21,3,0)
eg.  S OUT=$C(6)
"^DD",62.4,62.4,26,21,4,0)
(OUT contains the ASCII character 6 "ACK")
"^DD",62.4,62.4,26,"DT")
2901016
"^DD",62.4,62.4,27,0)
ACK TRIGGER VALUE^NJ2,0^^0;13^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",62.4,62.4,27,3)
This is the decimal value that will triger the ACK response. (0-99)
"^DD",62.4,62.4,27,21,0)
^^2^2^2940316^^
"^DD",62.4,62.4,27,21,1,0)
 This field contains the sequence used to acknowledge an auto instrument.
"^DD",62.4,62.4,27,21,2,0)
Not all instruments utilize this field.
"^DD",62.4,62.4,27,"DT")
2870318
"^DD",62.4,62.4,28,0)
ACK RESPONSE VALUE^NJ2,0^^0;14^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",62.4,62.4,28,3)
This is the decimal value that will be the ACK response. (0-99)
"^DD",62.4,62.4,28,21,0)
^^4^4^2940316^^
"^DD",62.4,62.4,28,21,1,0)
 If this instrument setup instructions indicate a standard ack value
"^DD",62.4,62.4,28,21,2,0)
is required by the instrument, enter the $C(X) for the acknowledgment.
"^DD",62.4,62.4,28,21,3,0)
 Not all instruments make use of this field.
"^DD",62.4,62.4,28,21,4,0)
  Where X= the ascii number of the ACK character.
"^DD",62.4,62.4,29,0)
DIRECT DEVICE^*P3.5'X^%ZIS(1,^.75;1^K:$L(X)>20!($L(X)<2) X I $D(X) S DIC(0)="QENM" D ^DIC S X=$P(Y,U,2) K:Y<1 X
"^DD",62.4,62.4,29,3)
Device used as a direct connect device in ^LAPORTXX.
"^DD",62.4,62.4,29,21,0)
^^3^3^2940303^
"^DD",62.4,62.4,29,21,1,0)
This field is used when bypassing the LSI.  It is the name
"^DD",62.4,62.4,29,21,2,0)
of the device that is used to communicate with a direct connect
"^DD",62.4,62.4,29,21,3,0)
instrument.
"^DD",62.4,62.4,29,23,0)
^^3^3^2940303^^^
"^DD",62.4,62.4,29,23,1,0)
This field is a free text pointer to the Device file.  It stores the 
"^DD",62.4,62.4,29,23,2,0)
free text name of the device.  The name is used in the ^LAPORTXX 
"^DD",62.4,62.4,29,23,3,0)
routine to set IOP before calling ^%ZIS.
"^DD",62.4,62.4,29,"DT")
2940207
"^DD",62.4,62.4,30,0)
LABORATORY TESTS^62.41P^^3;0
"^DD",62.4,62.4,30,21,0)
^.001^10^10^3160531^^^^
"^DD",62.4,62.4,30,21,1,0)
This is a multiple field that keeps track of tests being done in the
"^DD",62.4,62.4,30,21,2,0)
instrument  It allows one to be exclusive of tests which the instrument
"^DD",62.4,62.4,30,21,3,0)
 passes, as well as inclusive of the tests the machine passes which had
"^DD",62.4,62.4,30,21,4,0)
 not been ordered from the test panel for the patient.  It means, for
"^DD",62.4,62.4,30,21,5,0)
 example, if the order was glucose, sodium, and a number of other tests,
"^DD",62.4,62.4,30,21,6,0)
 but not the entire ASTRA panel, but the laboratory chooses to run on the
"^DD",62.4,62.4,30,21,7,0)
 ASTRA, all the tests can be included in the verified data.  To exclude
"^DD",62.4,62.4,30,21,8,0)
 large amounts of data, for example, the Hematrak passes distribution data
"^DD",62.4,62.4,30,21,9,0)
 about the slide that it has examined, information which may or may not be
"^DD",62.4,62.4,30,21,10,0)
 appropriate for the laboratory to pass on to the ward.
"^DD",62.4,62.4,30,"DT")
3160531
"^DD",62.4,62.4,31,0)
LOAD CHEM TESTS^S^T:TC ARRAY;U:TMP GLOBAL;N:NOTHING DONE;^0;5^Q
"^DD",62.4,62.4,31,3)
Set according to needs of instrument routine.
"^DD",62.4,62.4,31,21,0)
^^7^7^2901016^^
"^DD",62.4,62.4,31,21,1,0)
This field is used by the LASET routine to determine what to do with
"^DD",62.4,62.4,31,21,2,0)
the chem test sub-file.
"^DD",62.4,62.4,31,21,3,0)
   T or blank moves the data into the TC array.
"^DD",62.4,62.4,31,21,4,0)
   U moves the data into the ^UTILITY("LA",$J, global.
"^DD",62.4,62.4,31,21,5,0)
   N don't move at all.
"^DD",62.4,62.4,31,21,6,0)
 
"^DD",62.4,62.4,31,21,7,0)
The value will be returned in LALCT.
"^DD",62.4,62.4,31,"DT")
2860522
"^DD",62.4,62.4,40,0)
ALARM TERMINAL^62.42A^^4;0
"^DD",62.4,62.4,40,21,0)
^^1^1^2901016^^
"^DD",62.4,62.4,40,21,1,0)
This is a multiple field.  It contains the names/numbers of devices which will report the status of the interface.
"^DD",62.4,62.4,40,21,2,0)
  This field is inactive for V 4.16
"^DD",62.4,62.4,60,0)
MICRO CARD TYPE^62.43^^7;0
"^DD",62.4,62.4,60,21,0)
^^9^9^2901016^^^^
"^DD",62.4,62.4,60,21,1,0)
This entire sub-field is at present devoted to supporting BI-DIRECTIONAL
"^DD",62.4,62.4,60,21,2,0)
interfacing of Microbiology instrumentation.
"^DD",62.4,62.4,60,21,3,0)
 
"^DD",62.4,62.4,60,21,4,0)
 If you are not attempting to interface one these types of instruments,
"^DD",62.4,62.4,60,21,5,0)
you may ignore this entire sub-field.
"^DD",62.4,62.4,60,21,6,0)
 
"^DD",62.4,62.4,60,21,7,0)
 If you are attempting to interface such an instrument, there are examples
"^DD",62.4,62.4,60,21,8,0)
available for various instruments.
"^DD",62.4,62.4,60,21,9,0)
 Check FORUM for a current listing of instruments which are interfacable.
"^DD",62.4,62.4,70,0)
INTERFACE NOTES^62.45^^8;0
"^DD",62.4,62.4,70,21,0)
^^2^2^2901016^^
"^DD",62.4,62.4,70,21,1,0)
Notes on how to setup the instrument to run with the lab package,
"^DD",62.4,62.4,70,21,2,0)
and other useful information on interfacing this instrument.
"^DD",62.4,62.4,91,0)
DOWNLOAD ENTRY^F^^9;1^K:$L(X)>8!($L(X)<1)!'(X?1A.7AN) X
"^DD",62.4,62.4,91,3)
ANSWER MUST BE 1-8 CHARACTERS IN LENGTH
"^DD",62.4,62.4,91,9)
@
"^DD",62.4,62.4,91,21,0)
^.001^2^2^3000508^^
"^DD",62.4,62.4,91,21,1,0)
   Enter the line tag of the routine used to down load data to the instrument.
"^DD",62.4,62.4,91,21,2,0)
DO NOT USE '^' ON THIS LINE TAG. IT WILL BE HANDLED BY THE PROCESSING ROUTINE.
"^DD",62.4,62.4,91,"DT")
2870806
"^DD",62.4,62.4,92,0)
DOWNLOAD PROTOCOL ROUTINE^F^^9;2^K:$L(X)>8!($L(X)<1)!'(X?1A.7AN) X
"^DD",62.4,62.4,92,3)
ANSWER MUST BE 1-8 CHARACTERS IN LENGTH
"^DD",62.4,62.4,92,9)
@
"^DD",62.4,62.4,92,21,0)
^^1^1^2881113^
"^DD",62.4,62.4,92,21,1,0)
    Enter the name of the routine used to down load data to the instrument.
"^DD",62.4,62.4,92,"DT")
3000509
"^DD",62.4,62.4,93,0)
FILE BUILD ENTRY^F^^9;3^K:$L(X)>8!($L(X)<1)!'(X?1A.7AN) X
"^DD",62.4,62.4,93,3)
ANSWER MUST BE 1-8 CHARACTERS IN LENGTH
"^DD",62.4,62.4,93,9)
@
"^DD",62.4,62.4,93,21,0)
^^2^2^2901016^^
"^DD",62.4,62.4,93,21,1,0)
    If it is necessary to build down load files for the instrument, enter
"^DD",62.4,62.4,93,21,2,0)
the line Tag of the routine that builds the fields.
"^DD",62.4,62.4,94,0)
FILE BUILD ROUTINE^F^^9;4^K:$L(X)>8!($L(X)<1)!'(X?1A.7AN) X
"^DD",62.4,62.4,94,3)
ANSWER MUST BE 1-8 CHARACTERS IN LENGTH
"^DD",62.4,62.4,94,9)
@
"^DD",62.4,62.4,94,21,0)
^.001^2^2^3000509^^
"^DD",62.4,62.4,94,21,1,0)
Enter the name of the routine used to build the down load files for 
"^DD",62.4,62.4,94,21,2,0)
this instrument.
"^DD",62.4,62.4,94,"DT")
2870806
"^DD",62.4,62.4,95,0)
SEND TRAY/CUP LOCATION^S^N:no;Y:yes;^9;5^Q
"^DD",62.4,62.4,95,3)
What do you want the default to be for Send TRAY/CUP Location.
"^DD",62.4,62.4,95,21,0)
^^2^2^2881113^
"^DD",62.4,62.4,95,21,1,0)
   This field will contain the default answer to the question,
"^DD",62.4,62.4,95,21,2,0)
Send Tray/Cup location, used by some Bi-Directional routines. 
"^DD",62.4,62.4,95,"DT")
2880415
"^DD",62.4,62.4,96,0)
QUEUE BUILD^S^N:no;Y:yes;^9;6^Q
"^DD",62.4,62.4,96,3)
What do you want the defualt to be for QUEUE WORK.
"^DD",62.4,62.4,96,21,0)
^^1^1^2881113^
"^DD",62.4,62.4,96,21,1,0)
    This field contains the Default answer to Queue to build Question.
"^DD",62.4,62.4,96,"DT")
2880415
"^DD",62.4,62.4,97,0)
MICRO INTERPRETATION CHECK^S^F:CHECK ANTIMICROBIAL FILE INTERPRETATION ONLY;I:CHECK INSTRUMENT INTERPRETATION ONLY;B:CHECK BOTH FILE AND INSTRUMENT INTERPRETATION OVERWRITE WITH FILE;^9;7^Q
"^DD",62.4,62.4,97,3)
FOR MICROSCAN ENTER HOW YOU WANT TO INTERPRET MIC VALUES
"^DD",62.4,62.4,97,21,0)
^^1^1^2930325^
"^DD",62.4,62.4,97,21,1,0)
 This field specifies how the data being processed should be handled.
"^DD",62.4,62.4,97,"DT")
2890807
"^DD",62.4,62.4,98,0)
AUTO DOWNLOAD^S^0:NO;1:YES;^9;8^Q
"^DD",62.4,62.4,98,1,0)
^.1
"^DD",62.4,62.4,98,1,1,0)
62.4^AE^MUMPS
"^DD",62.4,62.4,98,1,1,1)
S:X ^LAB(62.4,"AE",DA,X)=""
"^DD",62.4,62.4,98,1,1,2)
K ^LAB(62.4,"AE",DA)
"^DD",62.4,62.4,98,1,1,"%D",0)
^^2^2^2950202^
"^DD",62.4,62.4,98,1,1,"%D",1,0)
User by LAB MESSAGING to determine if site is autodownloading test orders
"^DD",62.4,62.4,98,1,1,"%D",2,0)
to lab auto instruments and which instruments to send to.
"^DD",62.4,62.4,98,1,1,"DT")
2950202
"^DD",62.4,62.4,98,3)
Enter "YES" if this instrument is to be automatically downloaded when tests are accessioned.
"^DD",62.4,62.4,98,"DT")
2960229
"^DD",62.4,62.4,99,0)
AUTO RELEASE^S^0:NO;1:YES;2:AUTO VERIFY ONLY;3:USER RELEASE ONLY;^9;11^Q
"^DD",62.4,62.4,99,3)
Choose the type of auto release for this entry. Enter "??" for additional help.
"^DD",62.4,62.4,99,21,0)
^^15^15^3150519^^^
"^DD",62.4,62.4,99,21,1,0)
If results received via this auto instrument entry can be associated with 
"^DD",62.4,62.4,99,21,2,0)
an external auto or user verification system then enable this field.
"^DD",62.4,62.4,99,21,3,0)
 
"^DD",62.4,62.4,99,21,4,0)
This field will be checked in conjunction with the auto release master 
"^DD",62.4,62.4,99,21,5,0)
switch parameter LA7UI AUTO RELEASE MASTER and the specific HL7 message 
"^DD",62.4,62.4,99,21,6,0)
containing the results to determine if the lab results should be processed
"^DD",62.4,62.4,99,21,7,0)
by the Laboratory Auto Release process.
"^DD",62.4,62.4,99,21,8,0)
 
"^DD",62.4,62.4,99,21,9,0)
It can be configured at several levels of granularity.
"^DD",62.4,62.4,99,21,10,0)
 
"^DD",62.4,62.4,99,21,11,0)
 0 - no auto release for this auto instrument
"^DD",62.4,62.4,99,21,12,0)
 1 - yes instrument is enabled for auto and user verification
"^DD",62.4,62.4,99,21,13,0)
 2 - yes however only process results that have been auto verified
"^DD",62.4,62.4,99,21,14,0)
 3 - yes however only process results that have been user verified,
"^DD",62.4,62.4,99,21,15,0)
     no auto verification.
"^DD",62.4,62.4,99,"DT")
3151113
"^DD",62.4,62.4,100,0)
METH NAME^P62.4'^LAB(62.4,^5;1^Q
"^DD",62.4,62.4,100,1,0)
^.1
"^DD",62.4,62.4,100,1,1,0)
62.4^AC
"^DD",62.4,62.4,100,1,1,1)
S ^LAB(62.4,"AC",$E(X,1,30),DA)=""
"^DD",62.4,62.4,100,1,1,2)
K ^LAB(62.4,"AC",$E(X,1,30),DA)
"^DD",62.4,62.4,100,3)
 
"^DD",62.4,62.4,100,21,0)
^^1^1^2850830^^^
"^DD",62.4,62.4,100,21,1,0)
This is a statistical method name to be used by this instrument.  Example:  Bull Algorithm.  See for example the MANUAL BULL ALGOR. entry.  The entry usually would point to itself.
"^DD",62.4,62.4,100,21,2,0)
  Example:  Bull Algorithm.
"^DD",62.4,62.4,100,21,3,0)
See for example the MANUAL BULL ALGOR. entry.  The entry usually would
"^DD",62.4,62.4,100,21,4,0)
point to itself.
"^DD",62.4,62.4,100,"DT")
2831106
"^DD",62.4,62.4,101,0)
MEAN DATA VALUE 1^NJ7,3^^5;2^K:+X'=X!(X>999)!(X<-99)!(X?.E1"."4N.N) X
"^DD",62.4,62.4,101,3)
TYPE A NUMBER BETWEEN -99 AND 999
"^DD",62.4,62.4,101,21,0)
^^2^2^2841126^^
"^DD",62.4,62.4,101,21,1,0)
Expected mean value for Bull's algorithm for first of three results.
"^DD",62.4,62.4,101,21,2,0)
E.g., MCV on a blood count determination.
"^DD",62.4,62.4,101,"DT")
2831027
"^DD",62.4,62.4,102,0)
MEAN DATA VALUE 2^NJ7,3^^5;3^K:+X'=X!(X>999)!(X<-99)!(X?.E1"."4N.N) X
"^DD",62.4,62.4,102,3)
TYPE A NUMBER BETWEEN -99 AND 999
"^DD",62.4,62.4,102,21,0)
^^2^2^2841126^
"^DD",62.4,62.4,102,21,1,0)
Expected mean value for Bull's algorithm for second of three results.
"^DD",62.4,62.4,102,21,2,0)
E.g., MCH on a blood count determination.
"^DD",62.4,62.4,103,0)
MEAN DATA VALUE 3^NJ7,3^^5;4^K:+X'=X!(X>999)!(X<-99)!(X?.E1"."4N.N) X
"^DD",62.4,62.4,103,3)
TYPE A NUMBER BETWEEN -99 AND 999
"^DD",62.4,62.4,103,21,0)
^^2^2^2841126^
"^DD",62.4,62.4,103,21,1,0)
Expected mean value for Bull's algorithm for third of three results.
"^DD",62.4,62.4,103,21,2,0)
E.g., MCHC on a blood count determination.
"^DD",62.4,62.4,105,0)
MICRO AUTO APPROVAL METHOD^S^RE:Results Entry;VT:Verification by Tech;VS:Verification by Supervisor;^0;15^Q
"^DD",62.4,62.4,105,21,0)
^^10^10^2930226^^^^
"^DD",62.4,62.4,105,21,1,0)
Select the method to be used with this instrument during verification.
"^DD",62.4,62.4,105,21,2,0)
This entry will allow RPT DATE APPROVAL prompt during verification.
"^DD",62.4,62.4,105,21,3,0)
 The default is VS [Verify Supervisor]
"^DD",62.4,62.4,105,21,4,0)
If one wants the reports to released and verified, enter VS. Other
"^DD",62.4,62.4,105,21,5,0)
wise a supervisor must release the reports before being verified and
"^DD",62.4,62.4,105,21,6,0)
printed to the cumulative.
"^DD",62.4,62.4,105,21,7,0)
    Note. This field is associated with the field MICRO APPROVAL 
"^DD",62.4,62.4,105,21,8,0)
METHOD in Lab Reports file. Make sure they agree and are appropriate
"^DD",62.4,62.4,105,21,9,0)
for your site.
"^DD",62.4,62.4,105,21,10,0)
  THIS FIELD IS ONLY USED FOR MICROBIOLOGY AUTOMATED INSTRUMENTS.
"^DD",62.4,62.4,105,23,0)
^^1^1^2930226^
"^DD",62.4,62.4,105,23,1,0)
  The routine LAMIAUT0 set the default value of 'VS'.
"^DD",62.4,62.4,105,"DT")
2900312
"^DD",62.4,62.4,106,0)
DEFAULT AUTO MICRO TEST^P60'^LAB(60,^0;16^Q
"^DD",62.4,62.4,106,21,0)
^^3^3^2911209^
"^DD",62.4,62.4,106,21,1,0)
 This is the default laboratory test name to be used to record
"^DD",62.4,62.4,106,21,2,0)
workload for each organism when using the automated Micro instrument
"^DD",62.4,62.4,106,21,3,0)
to verify test.
"^DD",62.4,62.4,106,"DT")
2911209
"^DD",62.4,62.4,107,0)
SITE NOTES DATE^62.4107D^^6;0
"^DD",62.4,62.4,107,21,0)
^^1^1^2930912^
"^DD",62.4,62.4,107,21,1,0)
 Date of the note.
"^DD",62.4,62.41,0)
LABORATORY TESTS SUB-FIELD^NL^22^21
"^DD",62.4,62.41,0,"DT")
3160531
"^DD",62.4,62.41,0,"IX","AC",62.41,6)

"^DD",62.4,62.41,0,"NM","LABORATORY TESTS")
 
"^DD",62.4,62.41,0,"UP")
62.4
"^DD",62.4,62.41,.001,0)
NUMBER^NJ5,0^^ ^K:+X'=X!(X>99999)!(X<1)!(X?.E1"."1.N) X
"^DD",62.4,62.41,.001,3)
Type a number between 1 and 99999, 0 Decimal Digits
"^DD",62.4,62.41,.001,21,0)
^^2^2^3071210^^
"^DD",62.4,62.41,.001,21,1,0)
The test entries may be number meaningful.  E.g., the ACA identifies the
"^DD",62.4,62.41,.001,21,2,0)
test by number.
"^DD",62.4,62.41,.001,"DT")
3071210
"^DD",62.4,62.41,.01,0)
TEST^MR*P60'^LAB(60,^0;1^S DIC("S")="I $D(^LAB(60,Y,.2))!(""MI""[$P(^LAB(60,Y,0),U,4))" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",62.4,62.41,.01,1,0)
^.1^^0
"^DD",62.4,62.41,.01,3)
Enter the name of a test for which the instrument will send data.
"^DD",62.4,62.41,.01,12)
Allow CH atomic test or Microbiology subscript test
"^DD",62.4,62.41,.01,12.1)
S DIC("S")="I $D(^LAB(60,Y,.2))!(""MI""[$P(^LAB(60,Y,0),U,4))"
"^DD",62.4,62.41,.01,21,0)
^.001^1^1^3160531^^^^
"^DD",62.4,62.41,.01,21,1,0)
This contains the test names for this instrument.
"^DD",62.4,62.41,.01,"DT")
3160607
"^DD",62.4,62.41,2,0)
PARAM 1^FX^^0;2^K:$L(X)>100!($L(X)<2)!(X[U) X D:$D(X) ^DIM
"^DD",62.4,62.41,2,3)
ANSWER MUST BE 2-100 CHARACTERS IN LENGTH and valid mumps code.
"^DD",62.4,62.41,2,9)
@
"^DD",62.4,62.41,2,10)
 
"^DD",62.4,62.41,2,21,0)
^^1^1^2920609^^
"^DD",62.4,62.41,2,21,1,0)
This is used to extract a test from a data stream.  It may contain a line number or character number.
"^DD",62.4,62.41,2,21,2,0)
Set by LASET into TC(I,2)
"^DD",62.4,62.41,2,21,3,0)
this field. Check the interface notes or review the routine.
"^DD",62.4,62.41,2,"DT")
3001107
"^DD",62.4,62.41,3,0)
PARAM 2^NJ5,0^^0;3^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",62.4,62.41,3,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 10000
"^DD",62.4,62.41,3,21,0)
^^1^1^2841114^
"^DD",62.4,62.41,3,21,1,0)
This is used to extract a test from a data stream.  It may contain a line number or character number.
"^DD",62.4,62.41,3,21,2,0)
Set by LASET into TC(I,3).
"^DD",62.4,62.41,3,"DT")
2841211
"^DD",62.4,62.41,4,0)
PARAM 3^F^^0;4^K:$L(X)>100!($L(X)<1) X
"^DD",62.4,62.41,4,3)
ANSWER MUST BE 1-100 CHARACTERS IN LENGTH
"^DD",62.4,62.41,4,21,0)
^^2^2^2841211^
"^DD",62.4,62.41,4,21,1,0)
This is used to extract a test from a data stream. It may contain a line number or character number.
"^DD",62.4,62.41,4,21,2,0)
Set by LASET into TC(I,4).
"^DD",62.4,62.41,4,21,3,0)
  Not all interfaced instruments use this field.
"^DD",62.4,62.41,4,"DT")
2851219
"^DD",62.4,62.41,6,0)
UI TEST CODE^F^^0;6^K:$L(X)>30!($L(X)<1) X
"^DD",62.4,62.41,6,.1)
Universal Interface Test Code
"^DD",62.4,62.41,6,1,0)
^.1
"^DD",62.4,62.41,6,1,1,0)
62.41^AC
"^DD",62.4,62.41,6,1,1,1)
S ^LAB(62.4,DA(1),3,"AC",$E(X,1,30),DA)=""
"^DD",62.4,62.41,6,1,1,2)
K ^LAB(62.4,DA(1),3,"AC",$E(X,1,30),DA)
"^DD",62.4,62.41,6,1,1,3)
REQUIRED TO PROCESS RESULTS
"^DD",62.4,62.41,6,1,1,"DT")
2940602
"^DD",62.4,62.41,6,3)
Answer must be 1-30 characters in length.
"^DD",62.4,62.41,6,21,0)
^^18^18^2960126^^^^
"^DD",62.4,62.41,6,21,1,0)
For traditional interfaces:
"^DD",62.4,62.41,6,21,2,0)
 
"^DD",62.4,62.41,6,21,3,0)
This is the code to send the instrument for downloading of load lists
"^DD",62.4,62.41,6,21,4,0)
that this test is requested.
"^DD",62.4,62.41,6,21,5,0)
  This field used by various BI-DIRECTIONAL INTERFACES
"^DD",62.4,62.41,6,21,6,0)
  eg. for test BUN enter / as the download code for the ETACHEM instrument.
"^DD",62.4,62.41,6,21,7,0)
 
"^DD",62.4,62.41,6,21,8,0)
For Universal Interfaces:
"^DD",62.4,62.41,6,21,9,0)
 
"^DD",62.4,62.41,6,21,10,0)
For sites using this instrument in a Universal Interface configuration, 
"^DD",62.4,62.41,6,21,11,0)
this field is used to define the instrument 'name' for a test. This 
"^DD",62.4,62.41,6,21,12,0)
'name' is used as an identifier for the test in all messages sent to
"^DD",62.4,62.41,6,21,13,0)
and from the instrument.  It is important that the Universal Interface
"^DD",62.4,62.41,6,21,14,0)
PC has the name defined in this instrument's configuration exactly as
"^DD",62.4,62.41,6,21,15,0)
it is here in the auto instrument file, including upper and lower case.
"^DD",62.4,62.41,6,21,16,0)
This field does NOT have to be the test name, but can be.  The name of 
"^DD",62.4,62.41,6,21,17,0)
this field should not be taken literally, it is used for both uploading
"^DD",62.4,62.41,6,21,18,0)
and downloading, uni-directional as well as bi-directional.
"^DD",62.4,62.41,6,23,0)
^^9^9^2960126^^^
"^DD",62.4,62.41,6,23,1,0)
In a Universal Interface configuration this field is used as the 
"^DD",62.4,62.41,6,23,2,0)
primary identifier in all of the HL7 messages passed between DHCP
"^DD",62.4,62.41,6,23,3,0)
and the UI PC.  It must be defined on the PC exacly as it is entered
"^DD",62.4,62.41,6,23,4,0)
here. It can be any alphanumeric string that passes the transform.
"^DD",62.4,62.41,6,23,5,0)
There is an "AC" cross reference on this field that is used as a 
"^DD",62.4,62.41,6,23,6,0)
lookup when a message is received.  If test results are not being
"^DD",62.4,62.41,6,23,7,0)
downloaded or uploaded for this test, it might be because the 
"^DD",62.4,62.41,6,23,8,0)
Download Code does not match exactly with the idenitifer on the PC
"^DD",62.4,62.41,6,23,9,0)
for this instrument configuration.
"^DD",62.4,62.41,6,"DT")
2960126
"^DD",62.4,62.41,7,0)
ACCESSION AREA^P68'^LRO(68,^2;12^Q
"^DD",62.4,62.41,7,3)
Enter the accession area to screen this test
"^DD",62.4,62.41,7,21,0)
^.001^3^3^3000505^^
"^DD",62.4,62.41,7,21,1,0)
This field is used to limit the building of tests on a HL7 Order message.
"^DD",62.4,62.41,7,21,2,0)
If an accession area is entered then the accession must be from this
"^DD",62.4,62.41,7,21,3,0)
accession area for this test to build on a HL7 Order message.
"^DD",62.4,62.41,7,"DT")
3000505
"^DD",62.4,62.41,8,0)
SPECIMEN^P61'^LAB(61,^2;13^Q
"^DD",62.4,62.41,8,3)
Enter the specimen type to screen this test.
"^DD",62.4,62.41,8,21,0)
^^3^3^3000505^
"^DD",62.4,62.41,8,21,1,0)
This field is used to limit the building of tests on a HL7 Order message.
"^DD",62.4,62.41,8,21,2,0)
If a specimen is entered then the specimen on the accession must match
"^DD",62.4,62.41,8,21,3,0)
for this test to build on a HL7 Order message. 
"^DD",62.4,62.41,8,"DT")
3000505
"^DD",62.4,62.41,9,0)
URGENCY^P62.05'^LAB(62.05,^2;14^Q
"^DD",62.4,62.41,9,3)
Enter the urgency to screen this test.
"^DD",62.4,62.41,9,21,0)
^^3^3^3000505^
"^DD",62.4,62.41,9,21,1,0)
This field is used to limit the building of tests on a HL7 Order message.
"^DD",62.4,62.41,9,21,2,0)
If an urgency is entered then the urgency of the test must match for this
"^DD",62.4,62.41,9,21,3,0)
test to build on a HL7 Order message. 
"^DD",62.4,62.41,9,"DT")
3000505
"^DD",62.4,62.41,11,0)
ROUTINE STORAGE^F^^1;1^K:$L(X)>15!($L(X)<2) X
"^DD",62.4,62.41,11,3)
ANSWER MUST BE 2-15 CHARACTERS IN LENGTH
"^DD",62.4,62.41,11,9)
^
"^DD",62.4,62.41,11,21,0)
^^2^2^2941228^^^
"^DD",62.4,62.41,11,21,1,0)
This data is triggered by the test field.  It contains the internal
"^DD",62.4,62.41,11,21,2,0)
storage location in file 63.
"^DD",62.4,62.41,12,0)
NUMBER OF DECIMAL PLACES^NJ2,0^^2;1^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",62.4,62.41,12,3)
Type a Number between 0 and 99, 0 Decimal Digits. If nothing is entered the decimal place of the result will not be modified.  Rounding will take place if the number of decimal places is exceeded.
"^DD",62.4,62.41,12,21,0)
^^20^20^2941228^^^^
"^DD",62.4,62.41,12,21,1,0)
This field is used to modify the result returned by the instrument.  It
"^DD",62.4,62.41,12,21,2,0)
is used to force the result to a certain number of decimal places.  If
"^DD",62.4,62.41,12,21,3,0)
the result has more decimal places than the number entered for this field,
"^DD",62.4,62.41,12,21,4,0)
the result will be rounded to the number of decimal places specified.  For
"^DD",62.4,62.41,12,21,5,0)
example, if this field's value was '2' and the instrument returned a 
"^DD",62.4,62.41,12,21,6,0)
result of '34.678', the result would be modified to '34.68'.
"^DD",62.4,62.41,12,21,7,0)
 
"^DD",62.4,62.41,12,21,8,0)
If MUMPS code exists in PARAM 1, it will be executed before any modification
"^DD",62.4,62.41,12,21,9,0)
to the result.  If the code in PARAM 1 changes the result such that it is
"^DD",62.4,62.41,12,21,10,0)
no longer a canonic number, no modification to decimal places will take
"^DD",62.4,62.41,12,21,11,0)
place.
"^DD",62.4,62.41,12,21,12,0)
 
"^DD",62.4,62.41,12,21,13,0)
To round of the result based on other factors, or in other words - 
"^DD",62.4,62.41,12,21,14,0)
'On the fly', you can set a variable in PARAM 1 as follows:
"^DD",62.4,62.41,12,21,15,0)
 
"^DD",62.4,62.41,12,21,16,0)
PARAM 1: S:(CONDITION) LA7XFORM(1)=3
"^DD",62.4,62.41,12,21,17,0)
 
"^DD",62.4,62.41,12,21,18,0)
Where CONDITION is some MUMPS value that equates to true or false, and 3
"^DD",62.4,62.41,12,21,19,0)
represents the number of decimal places. 3 is just an example, you can use
"^DD",62.4,62.41,12,21,20,0)
any number you want, including zero. Consult a programmer before trying this.
"^DD",62.4,62.41,12,"DT")
2941114
"^DD",62.4,62.41,13,0)
CONVERT RESULT TO REMARK^S^0:NO;1:YES;^2;2^Q
"^DD",62.4,62.41,13,3)
Answer Yes or No.  If nothing is entered the default will be 'No'.
"^DD",62.4,62.41,13,21,0)
^^16^16^2941228^^^
"^DD",62.4,62.41,13,21,1,0)
This field should be set to 'Yes' if you want the result to be converted
"^DD",62.4,62.41,13,21,2,0)
to a comment or remark.  
"^DD",62.4,62.41,13,21,3,0)
 
"^DD",62.4,62.41,13,21,4,0)
If MUMPS code exists in PARAM 1, it will be executed before converting the 
"^DD",62.4,62.41,13,21,5,0)
result to a comment.
"^DD",62.4,62.41,13,21,6,0)
 
"^DD",62.4,62.41,13,21,7,0)
Be aware that if field 17 'REMOVE SPACES FROM RESULT' is set to 'Yes',
"^DD",62.4,62.41,13,21,8,0)
the comment will have all spaces removed.
"^DD",62.4,62.41,13,21,9,0)
 
"^DD",62.4,62.41,13,21,10,0)
To convert the result to a comment based on other factors, or in other words - 
"^DD",62.4,62.41,13,21,11,0)
'On the fly', you can set a variable in PARAM 1 as follows:
"^DD",62.4,62.41,13,21,12,0)
 
"^DD",62.4,62.41,13,21,13,0)
PARAM 1: S:(CONDITION) LA7XFORM(2)=1
"^DD",62.4,62.41,13,21,14,0)
 
"^DD",62.4,62.41,13,21,15,0)
Where CONDITION is some MUMPS value that equates to true or false.  Consult
"^DD",62.4,62.41,13,21,16,0)
a programmer before trying this.
"^DD",62.4,62.41,13,"DT")
2941114
"^DD",62.4,62.41,14,0)
ACCEPT RESULTS FOR THIS TEST^S^0:NO;1:YES;2:FINAL ONLY;^2;3^Q
"^DD",62.4,62.41,14,3)
Select if results for this test are accepted.
"^DD",62.4,62.41,14,21,0)
^^40^40^2990330^^^^
"^DD",62.4,62.41,14,21,1,0)
Determines if results (HL7 OBX segments) are processed and stored.
"^DD",62.4,62.41,14,21,2,0)
If nothing is entered, the default will be 'Yes'. 
"^DD",62.4,62.41,14,21,3,0)
 
"^DD",62.4,62.41,14,21,4,0)
If "YES" is selected then all test results are processed and stored.
"^DD",62.4,62.41,14,21,5,0)
 
"^DD",62.4,62.41,14,21,6,0)
Select "NO" to suppress the processing and storing any test result.
"^DD",62.4,62.41,14,21,7,0)
 
"^DD",62.4,62.41,14,21,8,0)
Selecting "FINAL ONLY" will only process/store test results when the
"^DD",62.4,62.41,14,21,9,0)
result has a status of C,F,U as defined in table 0085 below.
"^DD",62.4,62.41,14,21,10,0)
 
"^DD",62.4,62.41,14,21,11,0)
If there is MUMPS code in PARAM 1, it will be executed regardless of how
"^DD",62.4,62.41,14,21,12,0)
this field is set.
"^DD",62.4,62.41,14,21,13,0)
 
"^DD",62.4,62.41,14,21,14,0)
To accept results for this test based on other factors, or in other words - 
"^DD",62.4,62.41,14,21,15,0)
'On the fly', you can set a variable in PARAM 1 as follows:
"^DD",62.4,62.41,14,21,16,0)
 
"^DD",62.4,62.41,14,21,17,0)
PARAM 1: S:(CONDITION) LA7XFORM(3)=1
"^DD",62.4,62.41,14,21,18,0)
 
"^DD",62.4,62.41,14,21,19,0)
Where CONDITION is some MUMPS value that equates to true or false.  Consult
"^DD",62.4,62.41,14,21,20,0)
a programmer before trying this.
"^DD",62.4,62.41,14,21,21,0)
 
"^DD",62.4,62.41,14,21,22,0)
 
"^DD",62.4,62.41,14,21,23,0)
 
"^DD",62.4,62.41,14,21,24,0)
        Table 0085 - Observation result status codes interpretation
"^DD",62.4,62.41,14,21,25,0)
 
"^DD",62.4,62.41,14,21,26,0)
 Value  Description
"^DD",62.4,62.41,14,21,27,0)
 C      Record coming over is a correction and thus replaces a final
"^DD",62.4,62.41,14,21,28,0)
        result
"^DD",62.4,62.41,14,21,29,0)
 D      Deletes the OBX record
"^DD",62.4,62.41,14,21,30,0)
 F      Final results;  Can only be changed with a corrected result.
"^DD",62.4,62.41,14,21,31,0)
 I      Specimen in lab; results pending
"^DD",62.4,62.41,14,21,32,0)
 P      Preliminary results
"^DD",62.4,62.41,14,21,33,0)
 R      Results entered -- not verified
"^DD",62.4,62.41,14,21,34,0)
 S      Partial results
"^DD",62.4,62.41,14,21,35,0)
 X      Results cannot be obtained for this observation
"^DD",62.4,62.41,14,21,36,0)
 U      Results status change to Final.  without retransmitting results
"^DD",62.4,62.41,14,21,37,0)
        already sent as 'preliminary.'  E.g., radiology changes status
"^DD",62.4,62.41,14,21,38,0)
        from preliminary to final
"^DD",62.4,62.41,14,21,39,0)
 W      Post original as wrong, e.g., transmitted for wrong patient
"^DD",62.4,62.41,14,21,40,0)
 
"^DD",62.4,62.41,14,"DT")
2990329
"^DD",62.4,62.41,15,0)
DOWNLOAD TO INSTRUMENT^S^0:NO;1:YES;^2;4^Q
"^DD",62.4,62.41,15,3)
Enter Yes or No.  If nothing is entered the default will be 'Yes'.
"^DD",62.4,62.41,15,21,0)
^^7^7^2941114^
"^DD",62.4,62.41,15,21,1,0)
This field should be set to 'Yes' if the test is to be downloaded
"^DD",62.4,62.41,15,21,2,0)
to the instrument.  This might be set to 'No' in cases where the
"^DD",62.4,62.41,15,21,3,0)
instrument always performs and reports a computed value, but it
"^DD",62.4,62.41,15,21,4,0)
is not orderable.
"^DD",62.4,62.41,15,21,5,0)
 
"^DD",62.4,62.41,15,21,6,0)
If there is MUMPS code in PARAM 1, it will be executed regardless of
"^DD",62.4,62.41,15,21,7,0)
how this field is answered.
"^DD",62.4,62.41,15,"DT")
2941114
"^DD",62.4,62.41,16,0)
IGNORE RESULTS NOT ORDERED^S^0:NO;1:YES;^2;5^Q
"^DD",62.4,62.41,16,3)
Enter Yes or No.  If nothing is entered the default will be 'No'.
"^DD",62.4,62.41,16,21,0)
^^19^19^2941228^^
"^DD",62.4,62.41,16,21,1,0)
This field should be set to 'Yes' if you want to restrict results to
"^DD",62.4,62.41,16,21,2,0)
only those tests that were ordered.
"^DD",62.4,62.41,16,21,3,0)
 
"^DD",62.4,62.41,16,21,4,0)
For example, if an electolytes panel was ordered consisting of:
"^DD",62.4,62.41,16,21,5,0)
  Sodium
"^DD",62.4,62.41,16,21,6,0)
  Potassium
"^DD",62.4,62.41,16,21,7,0)
  Chloride
"^DD",62.4,62.41,16,21,8,0)
  CO2
"^DD",62.4,62.41,16,21,9,0)
 
"^DD",62.4,62.41,16,21,10,0)
And the instrument running the sample also reported a BUN result, the
"^DD",62.4,62.41,16,21,11,0)
BUN would not be reported if this field was set to 'Yes'.
"^DD",62.4,62.41,16,21,12,0)
 
"^DD",62.4,62.41,16,21,13,0)
To ignore results not ordered based on other factors, or in other words - 
"^DD",62.4,62.41,16,21,14,0)
'On the fly', you can set a variable in PARAM 1 as follows:
"^DD",62.4,62.41,16,21,15,0)
 
"^DD",62.4,62.41,16,21,16,0)
PARAM 1: S:(CONDITION) LA7XFORM(5)=1
"^DD",62.4,62.41,16,21,17,0)
 
"^DD",62.4,62.41,16,21,18,0)
Where CONDITION is some MUMPS value that equates to true or false.  Consult
"^DD",62.4,62.41,16,21,19,0)
a programmer before trying this.
"^DD",62.4,62.41,16,"DT")
2941114
"^DD",62.4,62.41,17,0)
REMOVE SPACES FROM RESULT^S^0:NO;1:YES;^2;6^Q
"^DD",62.4,62.41,17,3)
Answer 'Yes' if you want to strip all space characters from the result before storing it.  This is generally done but not required.
"^DD",62.4,62.41,17,21,0)
^^14^14^2941228^
"^DD",62.4,62.41,17,21,1,0)
If answered 'Yes' the result from the instrument will be changed so that
"^DD",62.4,62.41,17,21,2,0)
it contains NO spaces, e.g.  > 3.2 would be >3.2.  If this test is set up
"^DD",62.4,62.41,17,21,3,0)
to be converted to a comment (see field 13) the spaces will NOT be removed
"^DD",62.4,62.41,17,21,4,0)
regardless of how you answer this field. MUMPS code in PARAM 1 will
"^DD",62.4,62.41,17,21,5,0)
always be executed before any other transformation of the result takes
"^DD",62.4,62.41,17,21,6,0)
place, including the stripping of spaces.
"^DD",62.4,62.41,17,21,7,0)
 
"^DD",62.4,62.41,17,21,8,0)
To strip spaces conditionally based on other factors, or in other words - 
"^DD",62.4,62.41,17,21,9,0)
'On the fly', you can set a variable in PARAM 1 as follows:
"^DD",62.4,62.41,17,21,10,0)
 
"^DD",62.4,62.41,17,21,11,0)
PARAM 1: S:(CONDITION) LA7XFORM(6)=1
"^DD",62.4,62.41,17,21,12,0)
 
"^DD",62.4,62.41,17,21,13,0)
Where CONDITION is some MUMPS value that equates to true or false.  Consult
"^DD",62.4,62.41,17,21,14,0)
a programmer before trying this.
"^DD",62.4,62.41,17,"DT")
2941228
"^DD",62.4,62.41,18,0)
STORE REMARKS^S^0:NO;1:YES;2:FINAL ONLY;^2;7^Q
"^DD",62.4,62.41,18,3)
Enter "YES" if remarks should be stored.
"^DD",62.4,62.41,18,21,0)
^.001^32^32^3001205^^^^
"^DD",62.4,62.41,18,21,1,0)
Determines if remarks/comments (HL7 NTE segments) are processed and
"^DD",62.4,62.41,18,21,2,0)
stored with results. This applies only to remarks/comments that
"^DD",62.4,62.41,18,21,3,0)
relate to a test.
"^DD",62.4,62.41,18,21,4,0)
 
"^DD",62.4,62.41,18,21,5,0)
Select "NO" to suppress the processing and storing of any
"^DD",62.4,62.41,18,21,6,0)
remarks/comments associated with a test result. 
"^DD",62.4,62.41,18,21,7,0)
 
"^DD",62.4,62.41,18,21,8,0)
If "YES" is selected then all remarks/comments associated with a
"^DD",62.4,62.41,18,21,9,0)
test result are processed and stored.
"^DD",62.4,62.41,18,21,10,0)
 
"^DD",62.4,62.41,18,21,11,0)
The default value is "NO".
"^DD",62.4,62.41,18,21,12,0)
 
"^DD",62.4,62.41,18,21,13,0)
Selecting "FINAL ONLY" will only process and store remarks/comments
"^DD",62.4,62.41,18,21,14,0)
when the associated test result has a status of C,F,U as defined in
"^DD",62.4,62.41,18,21,15,0)
table 0085 below. This only applies to NTE segments that follow OBX
"^DD",62.4,62.41,18,21,16,0)
segments.
"^DD",62.4,62.41,18,21,17,0)
 
"^DD",62.4,62.41,18,21,18,0)
        Table 0085 - Observation result status codes interpretation
"^DD",62.4,62.41,18,21,19,0)
 
"^DD",62.4,62.41,18,21,20,0)
 Value  Description
"^DD",62.4,62.41,18,21,21,0)
 C      Record coming over is a correction and thus replaces a final
"^DD",62.4,62.41,18,21,22,0)
        result
"^DD",62.4,62.41,18,21,23,0)
 D      Deletes the OBX record
"^DD",62.4,62.41,18,21,24,0)
 F      Final results;  Can only be changed with a corrected result.
"^DD",62.4,62.41,18,21,25,0)
 I      Specimen in lab; results pending
"^DD",62.4,62.41,18,21,26,0)
 P      Preliminary results
"^DD",62.4,62.41,18,21,27,0)
 R      Results entered -- not verified
"^DD",62.4,62.41,18,21,28,0)
 S      Partial results
"^DD",62.4,62.41,18,21,29,0)
 X      Results cannot be obtained for this observation
"^DD",62.4,62.41,18,21,30,0)
 U      Results status change to Final.  without retransmitting results
"^DD",62.4,62.41,18,21,31,0)
        already sent as 'preliminary.'  E.g., radiology changes status
"^DD",62.4,62.41,18,21,32,0)
        from preliminary to final
"^DD",62.4,62.41,18,"DT")
3001205
"^DD",62.4,62.41,19,0)
REMARK PREFIX^F^^2;8^K:$L(X)>30!($L(X)<1) X
"^DD",62.4,62.41,19,3)
Answer must be 1-30 characters in length.
"^DD",62.4,62.41,19,21,0)
^^13^13^3010831^^
"^DD",62.4,62.41,19,21,1,0)
Used by the Lab Universal Interface software when processing HL7
"^DD",62.4,62.41,19,21,2,0)
messages that contain NTE (notes) segments which follow OBX (test results)
"^DD",62.4,62.41,19,21,3,0)
segments. These NTE segments apply to the test, not to the specimen.
"^DD",62.4,62.41,19,21,4,0)
 
"^DD",62.4,62.41,19,21,5,0)
This field is used in conjunction with field STORE REMARKS (#18)
"^DD",62.4,62.41,19,21,6,0)
in the CHEM TESTS multiple. If field STORE REMARKS is set to YES
"^DD",62.4,62.41,19,21,7,0)
then the value of this field, if any, will be used as the prefix
"^DD",62.4,62.41,19,21,8,0)
to the remarks when storing the remark in the LAH global.
"^DD",62.4,62.41,19,21,9,0)
 
"^DD",62.4,62.41,19,21,10,0)
Example: If the text "For test POTASSIUM: " is entered in this field
"^DD",62.4,62.41,19,21,11,0)
and a remark is received associated with this test that states
"^DD",62.4,62.41,19,21,12,0)
"Specimen hemolyzed" then the remark which will be stored is
"^DD",62.4,62.41,19,21,13,0)
"For test POTASSIUM: Specimen hemolyzed".
"^DD",62.4,62.41,19,"DT")
3010831
"^DD",62.4,62.41,20,0)
STORE PRODUCER'S ID^S^0:NO;1:YES;^2;9^Q
"^DD",62.4,62.41,20,3)
Store the name and identifier of performing lab
"^DD",62.4,62.41,20,10)
Field OBX-15 Producer's ID in HL7 ORU result message 
"^DD",62.4,62.41,20,21,0)
^^6^6^3010906^^
"^DD",62.4,62.41,20,21,1,0)
Used to determine if a remark(comment) should be created and
"^DD",62.4,62.41,20,21,2,0)
stored with the results which indicates the producer of the
"^DD",62.4,62.41,20,21,3,0)
test result. Used in conjuction with field REMARK PREFIX (#19)
"^DD",62.4,62.41,20,21,4,0)
which if defined will be the prefix added to the producer's
"^DD",62.4,62.41,20,21,5,0)
name/id. This remark is generated from the value, if any, of
"^DD",62.4,62.41,20,21,6,0)
field OBX-15 Producer's ID from the HL7 ORU result message.
"^DD",62.4,62.41,20,"DT")
3010906
"^DD",62.4,62.41,21,0)
STORE REFERENCE RANGE^S^0:NO;1:YES;^2;10^Q
"^DD",62.4,62.41,21,3)
Store the reference range with results
"^DD",62.4,62.41,21,10)
Field OBX-7 References Range in HL7 ORU result message
"^DD",62.4,62.41,21,21,0)
^^19^19^3041129^^^
"^DD",62.4,62.41,21,21,1,0)
Laboratory Electronic Data Interchange (LEDI):
"^DD",62.4,62.41,21,21,2,0)
Previous versions of LEDI used this field. Current versions of LEDI
"^DD",62.4,62.41,21,21,3,0)
do NOT use this field. References ranges reported by reference
"^DD",62.4,62.41,21,21,4,0)
laboratories are always stored with results.
"^DD",62.4,62.41,21,21,5,0)
  
"^DD",62.4,62.41,21,21,6,0)
 
"^DD",62.4,62.41,21,21,7,0)
Laboratory Point of Care (POC):
"^DD",62.4,62.41,21,21,8,0)
Used to determine if reference ranges reported by POC system
"^DD",62.4,62.41,21,21,9,0)
with the results should be processed and stored with the results.
"^DD",62.4,62.41,21,21,10,0)
Some POC systems have references ranges that are fixed within 
"^DD",62.4,62.41,21,21,11,0)
the POC system and may not be appropriate or accurate on the VistA
"^DD",62.4,62.41,21,21,12,0)
Laboratory system. 
"^DD",62.4,62.41,21,21,13,0)
 
"^DD",62.4,62.41,21,21,14,0)
Set this field to 'YES' to use the reference ranges reported by the
"^DD",62.4,62.41,21,21,15,0)
POC system.
"^DD",62.4,62.41,21,21,16,0)
 
"^DD",62.4,62.41,21,21,17,0)
Set this field to 'NO' to disregard any reference ranges transmitted
"^DD",62.4,62.41,21,21,18,0)
by the POC system and instead use the reference ranges specified in
"^DD",62.4,62.41,21,21,19,0)
LABORATORY TEST file (#60) for this test/specimen.
"^DD",62.4,62.41,21,"DT")
3041129
"^DD",62.4,62.41,22,0)
NOTIFY ABNORMAL FLAGS^S^0:NO;1:YES;^2;11^Q
"^DD",62.4,62.41,22,3)
Send alert/bulletin when results are abnormal.
"^DD",62.4,62.41,22,10)
Field OBX-8 Abnormal Flags in HL7 ORU result message
"^DD",62.4,62.41,22,21,0)
^^4^4^3030722^^
"^DD",62.4,62.41,22,21,1,0)
Used to determine if an alert and bulletin should be created when
"^DD",62.4,62.41,22,21,2,0)
results are processed with an associated abnormal flag. Generated
"^DD",62.4,62.41,22,21,3,0)
from the value of field OBX-8 Abnormal Flags from the HL7 ORU result
"^DD",62.4,62.41,22,21,4,0)
message. 
"^DD",62.4,62.41,22,"DT")
3030722
"^DD",62.4,62.4107,0)
SITE NOTES DATE SUB-FIELD^^1^2
"^DD",62.4,62.4107,0,"DT")
2930912
"^DD",62.4,62.4107,0,"IX","B",62.4107,.01)

"^DD",62.4,62.4107,0,"NM","SITE NOTES DATE")
 
"^DD",62.4,62.4107,0,"UP")
62.4
"^DD",62.4,62.4107,.01,0)
SITE NOTES DATE^D^^0;1^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",62.4,62.4107,.01,1,0)
^.1
"^DD",62.4,62.4107,.01,1,1,0)
62.4107^B
"^DD",62.4,62.4107,.01,1,1,1)
S ^LAB(62.4,DA(1),6,"B",$E(X,1,30),DA)=""
"^DD",62.4,62.4107,.01,1,1,2)
K ^LAB(62.4,DA(1),6,"B",$E(X,1,30),DA)
"^DD",62.4,62.4107,.01,"DT")
2930912
"^DD",62.4,62.4107,1,0)
TEXT^62.41071^^1;0
"^DD",62.4,62.4107,1,21,0)
^^1^1^2930912^
"^DD",62.4,62.4107,1,21,1,0)
 The actual text of the note.
"^DD",62.4,62.41071,0)
TEXT SUB-FIELD^^.01^1
"^DD",62.4,62.41071,0,"DT")
2930912
"^DD",62.4,62.41071,0,"NM","TEXT")
 
"^DD",62.4,62.41071,0,"UP")
62.4107
"^DD",62.4,62.41071,.01,0)
TEXT^W^^0;1^Q
"^DD",62.4,62.41071,.01,"DT")
2930912
"^DD",62.4,62.42,0)
ALARM TERMINAL SUB-FIELD^NL^.01^1
"^DD",62.4,62.42,0,"NM","ALARM TERMINAL")
 
"^DD",62.4,62.42,0,"UP")
62.4
"^DD",62.4,62.42,.01,0)
ALARM TERMINAL^MFX^^0;1^K:$L(X)>8!($L(X)<1) X I $D(X) S IOP=X,%ZIS="N" D ^%ZIS S X=ION K:POP X
"^DD",62.4,62.42,.01,3)
ENTER THE DEVICE NAMES THAT SHOULD BE TOLD OF A LSI INTERFACE STOP.
"^DD",62.4,62.42,.01,21,0)
^^2^2^2841114^^
"^DD",62.4,62.42,.01,21,1,0)
This field contains the names/numbers of devices which will report the status of the interface.
"^DD",62.4,62.42,.01,21,2,0)
Points to the DEVICE FILE.
"^DD",62.4,62.42,.01,"DT")
2910228
"^DD",62.4,62.43,0)
MICRO CARD TYPE SUB-FIELD^NL^3^6
"^DD",62.4,62.43,0,"DT")
2930406
"^DD",62.4,62.43,0,"ID",.5)
W "   ",$P(^(0),U,2)
"^DD",62.4,62.43,0,"IX","B",62.43,.01)

"^DD",62.4,62.43,0,"IX","C",62.44,.01)
 
"^DD",62.4,62.43,0,"IX","D",62.44,1)
 
"^DD",62.4,62.43,0,"NM","MICRO CARD TYPE")
 
"^DD",62.4,62.43,0,"UP")
62.4
"^DD",62.4,62.43,.01,0)
MICRO CARD TYPE^MF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>4!($L(X)<1) X
"^DD",62.4,62.43,.01,1,0)
^.1
"^DD",62.4,62.43,.01,1,1,0)
62.43^B
"^DD",62.4,62.43,.01,1,1,1)
S ^LAB(62.4,DA(1),7,"B",$E(X,1,30),DA)=""
"^DD",62.4,62.43,.01,1,1,2)
K ^LAB(62.4,DA(1),7,"B",$E(X,1,30),DA)
"^DD",62.4,62.43,.01,3)
ANSWER MUST BE 1-4 CHARACTERS IN LENGTH. Instrument card type.
"^DD",62.4,62.43,.01,21,0)
^^2^2^2881113^^
"^DD",62.4,62.43,.01,21,1,0)
   Enter the Micro Card Type. This is a HEX code which represent the card type.
"^DD",62.4,62.43,.01,21,2,0)
eg. 0E = GRAM NEG
"^DD",62.4,62.43,.01,"DT")
2860331
"^DD",62.4,62.43,.5,0)
CARD NAME^F^^0;2^K:$L(X)>20!($L(X)<1) X
"^DD",62.4,62.43,.5,3)
ANSWER MUST BE 1-20 CHARACTERS IN LENGTH
"^DD",62.4,62.43,.5,21,0)
^^1^1^2881113^
"^DD",62.4,62.43,.5,21,1,0)
  Enter the Card type name. eg. Gram Neg Id Card Name.
"^DD",62.4,62.43,.5,"DT")
2860319
"^DD",62.4,62.43,.7,0)
PROCESS CARD CALL^FX^^3;E1,200^K:$L(X)>200!($L(X)<1) X I $D(X) D ^DIM
"^DD",62.4,62.43,.7,3)
MUMPS code to call routine to process this card
"^DD",62.4,62.43,.7,9)
@
"^DD",62.4,62.43,.7,21,0)
^^2^2^2901016^^^^
"^DD",62.4,62.43,.7,21,1,0)
   If a routine is required to process in coming data from the instrument,
"^DD",62.4,62.43,.7,21,2,0)
enter routine name.  See interface notes for routine(s) names.
"^DD",62.4,62.43,.7,"DT")
2870505
"^DD",62.4,62.43,1,0)
ORGANISM^62.44I^^1;0
"^DD",62.4,62.43,1,12)
Only alow Bacteria, Fungi, or Mycobacteria
"^DD",62.4,62.43,1,12.1)
S DIC("S")="I ""BFM""[$P(^(0),U,5)"
"^DD",62.4,62.43,1,21,0)
^^3^3^2901016^^
"^DD",62.4,62.43,1,21,1,0)
   This sub field contains a list of possible identifiable organism which
"^DD",62.4,62.43,1,21,2,0)
can be identified on or by this card. It is a multiple field and contains
"^DD",62.4,62.43,1,21,3,0)
particulars for each organism.
"^DD",62.4,62.43,2,0)
DRUG^62.46I^^2;0
"^DD",62.4,62.43,2,21,0)
^^2^2^2881113^
"^DD",62.4,62.43,2,21,1,0)
   This sub-field contains a list of drugs which this Card is capable of
"^DD",62.4,62.43,2,21,2,0)
testing and reporting.
"^DD",62.4,62.43,3,0)
MESSAGE^62.461I^^4;0
"^DD",62.4,62.43,3,21,0)
^^1^1^2881113^
"^DD",62.4,62.43,3,21,1,0)
 For each card code, there can be associated a message to represent that code. This sub-field setup that relationship.
"^DD",62.4,62.44,0)
ORGANISM SUB-FIELD^NL^1^2
"^DD",62.4,62.44,0,"ID",1)
W "   ",$P(^(0),U,2)
"^DD",62.4,62.44,0,"IX","B",62.44,.01)

"^DD",62.4,62.44,0,"IX","B",62.44,1)
 
"^DD",62.4,62.44,0,"IX","C",62.44,1)

"^DD",62.4,62.44,0,"NM","ORGANISM")
 
"^DD",62.4,62.44,0,"UP")
62.43
"^DD",62.4,62.44,.01,0)
ORGANISM^M*P61.2'^LAB(61.2,^0;1^S DIC("S")="I $L($P(^(0),U,5)),""BFMPVR""[$P(^(0),U,5)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",62.4,62.44,.01,1,0)
^.1
"^DD",62.4,62.44,.01,1,1,0)
62.44^B
"^DD",62.4,62.44,.01,1,1,1)
S ^LAB(62.4,DA(2),7,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",62.4,62.44,.01,1,1,2)
K ^LAB(62.4,DA(2),7,DA(1),1,"B",$E(X,1,30),DA)
"^DD",62.4,62.44,.01,12)
Only alow Bacteria, Fungi, or Mycobacteria
"^DD",62.4,62.44,.01,12.1)
S DIC("S")="I $L($P(^(0),U,5)),""BFMPVR""[$P(^(0),U,5)"
"^DD",62.4,62.44,.01,21,0)
^^4^4^2881113^
"^DD",62.4,62.44,.01,21,1,0)
   Enter the name of organism which is in Etiology File (61.2)
"^DD",62.4,62.44,.01,21,2,0)
 
"^DD",62.4,62.44,.01,21,3,0)
   This file will only allow organism which are either Bacterium,
"^DD",62.4,62.44,.01,21,4,0)
Fungus or Mycobacterium identifiers.
"^DD",62.4,62.44,.01,"DT")
2900510
"^DD",62.4,62.44,1,0)
CARD CODE FOR ORGANISM^RF^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>4!($L(X)<1) X
"^DD",62.4,62.44,1,1,0)
^.1
"^DD",62.4,62.44,1,1,1,0)
62.44^C
"^DD",62.4,62.44,1,1,1,1)
S ^LAB(62.4,DA(2),7,DA(1),1,"C",$E(X,1,30),DA)=""
"^DD",62.4,62.44,1,1,1,2)
K ^LAB(62.4,DA(2),7,DA(1),1,"C",$E(X,1,30),DA)
"^DD",62.4,62.44,1,3)
This is the code from the card to lookup on, HEX for VITEK.
"^DD",62.4,62.44,1,21,0)
^^2^2^2881113^
"^DD",62.4,62.44,1,21,1,0)
   Enter the card code for this organism. It is usually a two digit
"^DD",62.4,62.44,1,21,2,0)
Hex code.
"^DD",62.4,62.44,1,"DT")
2900510
"^DD",62.4,62.45,0)
INTERFACE NOTES SUB-FIELD^^.01^1
"^DD",62.4,62.45,0,"DT")
2930406
"^DD",62.4,62.45,0,"NM","INTERFACE NOTES")
 
"^DD",62.4,62.45,0,"UP")
62.4
"^DD",62.4,62.45,.01,0)
INTERFACE NOTES^W^^0;1^Q
"^DD",62.4,62.45,.01,"DT")
2930406
"^DD",62.4,62.46,0)
DRUG SUB-FIELD^NL^10^8
"^DD",62.4,62.46,0,"DT")
2930406
"^DD",62.4,62.46,0,"ID",1)
W "   ",$P(^(0),U,2)
"^DD",62.4,62.46,0,"IX","AC",62.46,4)

"^DD",62.4,62.46,0,"IX","C",62.46,3)

"^DD",62.4,62.46,0,"NM","DRUG")
 
"^DD",62.4,62.46,0,"UP")
62.43
"^DD",62.4,62.46,.001,0)
NUMBER^NJ2,0^^ ^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",62.4,62.46,.001,3)
Enter 1-99 matching the index from the instrument.
"^DD",62.4,62.46,.001,21,0)
^^2^2^2881113^
"^DD",62.4,62.46,.001,21,1,0)
  Enter the number used by the instrument to identy the drug in uploaded
"^DD",62.4,62.46,.001,21,2,0)
data stream.
"^DD",62.4,62.46,.001,"DT")
2860403
"^DD",62.4,62.46,.01,0)
DRUG^MP62.06'^LAB(62.06,^0;1^Q
"^DD",62.4,62.46,.01,1,0)
^.1
"^DD",62.4,62.46,.01,1,1,0)
^^TRIGGER^62.46^1
"^DD",62.4,62.46,.01,1,1,1)
K DIV S DIV=X,D0=DA(2),DIV(0)=D0,D1=DA(1),DIV(1)=D1,D2=DA,DIV(2)=D2 S Y(1)=$S($D(^LAB(62.4,D0,7,D1,2,D2,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y X ^DD(62.46,.01,1,1,1.1) X ^DD(62.46,.01,1,1,1.4)
"^DD",62.4,62.46,.01,1,1,1.1)
S X=DIV X ^DD(62.46,.01,1,1,49.2) S X=$P(Y(101),U,2) S D0=I(0,0) S D1=I(1,0) S D2=I(2,0)
"^DD",62.4,62.46,.01,1,1,1.4)
S DIH=$S($D(^LAB(62.4,DIV(0),7,DIV(1),2,DIV(2),0)):^(0),1:""),DIV=X S %=$P(DIH,U,3,999),DIU=$P(DIH,U,2),^(0)=$P(DIH,U,1,1)_U_DIV_$S(%]"":U_%,1:""),DIH=62.46,DIG=1 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",62.4,62.46,.01,1,1,2)
K DIV S DIV=X,D0=DA(2),DIV(0)=D0,D1=DA(1),DIV(1)=D1,D2=DA,DIV(2)=D2 S Y(1)=$S($D(^LAB(62.4,D0,7,D1,2,D2,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y S X="" X ^DD(62.46,.01,1,1,2.4)
"^DD",62.4,62.46,.01,1,1,2.4)
S DIH=$S($D(^LAB(62.4,DIV(0),7,DIV(1),2,DIV(2),0)):^(0),1:""),DIV=X S %=$P(DIH,U,3,999),DIU=$P(DIH,U,2),^(0)=$P(DIH,U,1,1)_U_DIV_$S(%]"":U_%,1:""),DIH=62.46,DIG=1 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",62.4,62.46,.01,1,1,49.2)
S I(2,0)=$S($D(D2):D2,1:""),I(1,0)=$S($D(D1):D1,1:""),I(0,0)=$S($D(D0):D0,1:""),D0=DIV S:'$D(^LAB(62.06,+D0,0)) D0=-1 S Y(101)=$S($D(^LAB(62.06,D0,0)):^(0),1:"")
"^DD",62.4,62.46,.01,1,1,"CREATE VALUE")
DRUG:BUG NODE
"^DD",62.4,62.46,.01,1,1,"DELETE VALUE")
@
"^DD",62.4,62.46,.01,1,1,"FIELD")
DRUG NODE
"^DD",62.4,62.46,.01,3)
 
"^DD",62.4,62.46,.01,"DT")
2860403
"^DD",62.4,62.46,1,0)
DRUG NODE^RFIX^^0;2^K:$L(X)>20!($L(X<1)) X
"^DD",62.4,62.46,1,3)
ANSWER MUST BE 1-20 CHARACTERS IN LENGTH
"^DD",62.4,62.46,1,5,1,0)
62.46^.01^1
"^DD",62.4,62.46,1,12)
Find the global location from the DD.
"^DD",62.4,62.46,1,12.1)
S DIC("S")="I $P(^(0),U,3)=""B"""
"^DD",62.4,62.46,1,21,0)
^^1^1^2881113^
"^DD",62.4,62.46,1,21,1,0)
   Enter the drug name which the number corresponds to in File 62.06.
"^DD",62.4,62.46,1,"DT")
2910228
"^DD",62.4,62.46,2,0)
PARAM1^FX^^0;3^K:$L(X)>80!($L(X)<1) X D ^DIM:$D(X)
"^DD",62.4,62.46,2,3)
MUMPS CODE TO SET S-I-R INTO V FROM CARD DATA
"^DD",62.4,62.46,2,9)
@
"^DD",62.4,62.46,2,21,0)
^^3^3^2901016^^
"^DD",62.4,62.46,2,21,1,0)
   Enter a MUMPS code string needed to convert/extract data into the variable
"^DD",62.4,62.46,2,21,2,0)
V. This field is similar to Param Fields in other auto instruments.
"^DD",62.4,62.46,2,21,3,0)
   The name has been changed to prevent confusion in referring to the two fields.
"^DD",62.4,62.46,2,"DT")
2860715
"^DD",62.4,62.46,3,0)
CARD CODE^RF^^0;4^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>3!($L(X)<1) X
"^DD",62.4,62.46,3,1,0)
^.1
"^DD",62.4,62.46,3,1,1,0)
62.46^C
"^DD",62.4,62.46,3,1,1,1)
S ^LAB(62.4,DA(2),7,DA(1),2,"C",$E(X,1,30),DA)=""
"^DD",62.4,62.46,3,1,1,2)
K ^LAB(62.4,DA(2),7,DA(1),2,"C",$E(X,1,30),DA)
"^DD",62.4,62.46,3,3)
This is the code from the card to do the lookup on.
"^DD",62.4,62.46,3,21,0)
^^3^3^2901016^^^^
"^DD",62.4,62.46,3,21,1,0)
   On each card it is possible to have codes represent different 
"^DD",62.4,62.46,3,21,2,0)
messages or canned comments. This sub field identifies the relationship.
"^DD",62.4,62.46,3,21,3,0)
  Enter the code the card upload data will contain.
"^DD",62.4,62.46,3,"DT")
2901128
"^DD",62.4,62.46,4,0)
DISPLAY ORDER^RNJ3,0^^0;5^K:+X'=X!(X>100)!(X<0)!(X?.E1"."1N.N) X
"^DD",62.4,62.46,4,1,0)
^.1
"^DD",62.4,62.46,4,1,1,0)
62.46^AC
"^DD",62.4,62.46,4,1,1,1)
S ^LAB(62.4,DA(2),7,DA(1),2,"AC",$E(X,1,30),DA)=""
"^DD",62.4,62.46,4,1,1,2)
K ^LAB(62.4,DA(2),7,DA(1),2,"AC",$E(X,1,30),DA)
"^DD",62.4,62.46,4,3)
Enter a number between 1-100 for display order, or '0' for file entry order
"^DD",62.4,62.46,4,"DT")
2890524
"^DD",62.4,62.46,9,0)
SECTION^F^^0;10^K:$L(X)>30!($L(X)<2) X
"^DD",62.4,62.46,9,3)
ANSWER MUST BE 2-30 CHARACTERS IN LENGTH
"^DD",62.4,62.46,10,0)
BIT POSITION^NJ2,0^^0;6^K:+X'=X!(X>12)!(X<0)!(X?.E1"."1N.N) X
"^DD",62.4,62.46,10,3)
Enter Bit Position on Card 1-12
"^DD",62.4,62.46,10,21,0)
^^3^3^2930406^^
"^DD",62.4,62.46,10,21,1,0)
 What bit (number of characters from the left) position the drug is located.
"^DD",62.4,62.46,10,21,2,0)
  THIS FIELD IS NOT USED. RESERVED FOR LATER VERSIONS OF AUTO-INSTRUMENT
"^DD",62.4,62.46,10,21,3,0)
RELEASES.
"^DD",62.4,62.46,10,"DT")
2930406
"^DD",62.4,62.461,0)
MESSAGE SUB-FIELD^^3^4
"^DD",62.4,62.461,0,"IX","B",62.461,.01)

"^DD",62.4,62.461,0,"NM","MESSAGE")
 
"^DD",62.4,62.461,0,"UP")
62.43
"^DD",62.4,62.461,.001,0)
NUMBER^NJ3,0^^ ^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X
"^DD",62.4,62.461,.001,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 999
"^DD",62.4,62.461,.001,21,0)
^^2^2^2901016^^
"^DD",62.4,62.461,.001,21,1,0)
  This field represents the internal file number for this message.
"^DD",62.4,62.461,.001,21,2,0)
This number must be unique to the file.
"^DD",62.4,62.461,.001,"DT")
2860716
"^DD",62.4,62.461,.01,0)
CODE^MF^^0;1^K:$L(X)>10!($L(X)<1) X
"^DD",62.4,62.461,.01,1,0)
^.1
"^DD",62.4,62.461,.01,1,1,0)
62.461^B
"^DD",62.4,62.461,.01,1,1,1)
S ^LAB(62.4,DA(2),7,DA(1),4,"B",$E(X,1,30),DA)=""
"^DD",62.4,62.461,.01,1,1,2)
K ^LAB(62.4,DA(2),7,DA(1),4,"B",$E(X,1,30),DA)
"^DD",62.4,62.461,.01,3)
Message CODE, 1-10 char.
"^DD",62.4,62.461,.01,"DT")
2860716
"^DD",62.4,62.461,2,0)
FLAG VALUE^F^^0;2^K:$L(X)>8!($L(X)<1) X
"^DD",62.4,62.461,2,3)
Value if matches flag then include msg. 1-8 char.
"^DD",62.4,62.461,2,21,0)
^^2^2^2881113^
"^DD",62.4,62.461,2,21,1,0)
  This field contains the flag value sent by the instrument with the uploaded
"^DD",62.4,62.461,2,21,2,0)
data.
"^DD",62.4,62.461,2,"DT")
2860716
"^DD",62.4,62.461,3,0)
MESSAGE^F^^0;3^K:$L(X)>80!($L(X)<1) X
"^DD",62.4,62.461,3,3)
ANSWER MUST BE 1-80 CHARACTERS IN LENGTH
"^DD",62.4,62.461,3,21,0)
^^3^3^2901016^^
"^DD",62.4,62.461,3,21,1,0)
   When the flag value is detected this message will be used.
"^DD",62.4,62.461,3,21,2,0)
This field is similar to the Lab Description File and Expanded 
"^DD",62.4,62.461,3,21,3,0)
comments.
"^DD",62.4,62.461,3,"DT")
2860716
"^DIC",62.4,62.4,0)
AUTO INSTRUMENT^62.4
"^DIC",62.4,62.4,0,"GL")
^LAB(62.4,
"^DIC",62.4,62.4,"%D",0)
^^2^2^2940925^^^^
"^DIC",62.4,62.4,"%D",1,0)
Master file controlling how the Lab system interprets the running of
"^DIC",62.4,62.4,"%D",2,0)
the instruments interfaced to the CORE system.
"^DIC",62.4,"B","AUTO INSTRUMENT",62.4)

**INSTALL NAME**
LR*5.2*474
"BLD",9426,0)
LR*5.2*474^LAB SERVICE^0^3161220^y
"BLD",9426,1,0)
^^499^499^3161220^
"BLD",9426,1,1,0)
Associated Patch: LA*5.2*90; which will be installed first as a part of
"BLD",9426,1,2,0)
this combined build.
"BLD",9426,1,3,0)
 
"BLD",9426,1,4,0)
The build for this patch is distributed as part of a multi-package build 
"BLD",9426,1,5,0)
that contains LA*5.2*90 and LR*5.2*474. The build contains functionality 
"BLD",9426,1,6,0)
that will allow Microbiology instrumentation to utilize the Lab Universal
"BLD",9426,1,7,0)
Interface. 
"BLD",9426,1,8,0)
 
"BLD",9426,1,9,0)
By utilizing the Universal Interface and Instrument Manager (IM) 
"BLD",9426,1,10,0)
middleware, sites will be able to switch from using class III interfaces
"BLD",9426,1,11,0)
to a UI standard interface. New functionality will be applied that will
"BLD",9426,1,12,0)
allow for an "MI" subscripted test to be added to the VistA Auto
"BLD",9426,1,13,0)
Instrument file (#64.2). There will also be enhanced result processing and
"BLD",9426,1,14,0)
verify/release functions (see LA*5.2*90 patch descriptions for additional
"BLD",9426,1,15,0)
details).
"BLD",9426,1,16,0)
 
"BLD",9426,1,17,0)
The build for this patch is distributed in support of the VistA 
"BLD",9426,1,18,0)
Laboratory Enhancement (VLE) Microbiology/Data Innovations interface 
"BLD",9426,1,19,0)
utilizing the Laboratory Universal Interface.
"BLD",9426,1,20,0)
 
"BLD",9426,1,21,0)
The patch provide new functionality provides for the Enter/Verify data 
"BLD",9426,1,22,0)
(Auto Instrument) option which will allow the technologist with the 
"BLD",9426,1,23,0)
authority to release three release actions.
"BLD",9426,1,24,0)
 
"BLD",9426,1,25,0)
 
"BLD",9426,1,26,0)
Blood Bank Review:
"BLD",9426,1,27,0)
==================
"BLD",9426,1,28,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*474 does not 
"BLD",9426,1,29,0)
contain any changes to the VISTA BLOOD BANK Software as defined by ProPath
"BLD",9426,1,30,0)
standard titled: BBM Team Review of VistA Patches.
"BLD",9426,1,31,0)
 
"BLD",9426,1,32,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*474 does not 
"BLD",9426,1,33,0)
alter or modify any software design safeguards or safety critical elements
"BLD",9426,1,34,0)
functions.
"BLD",9426,1,35,0)
 
"BLD",9426,1,36,0)
RISK ANALYSIS: Changes made by patch LR*5.2*474 have no effect on Blood 
"BLD",9426,1,37,0)
Bank software functionality, therefore RISK is none.
"BLD",9426,1,38,0)
 
"BLD",9426,1,39,0)
VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes 
"BLD",9426,1,40,0)
made, no specific validation requirements exist as a result of
"BLD",9426,1,41,0)
installation of this patch.
"BLD",9426,1,42,0)
 
"BLD",9426,1,43,0)
 
"BLD",9426,1,44,0)
Patch Components:
"BLD",9426,1,45,0)
-----------------
"BLD",9426,1,46,0)
None
"BLD",9426,1,47,0)
 
"BLD",9426,1,48,0)
Files & Fields Associated:
"BLD",9426,1,49,0)
 
"BLD",9426,1,50,0)
File Name (Number)         Field Name (Number)     New/Modified/Deleted
"BLD",9426,1,51,0)
------------------         -------------------     --------------------
"BLD",9426,1,52,0)
N/A
"BLD",9426,1,53,0)
 
"BLD",9426,1,54,0)
 
"BLD",9426,1,55,0)
Forms Associated:
"BLD",9426,1,56,0)
 
"BLD",9426,1,57,0)
Form Name                    File #               New/Modified/Deleted
"BLD",9426,1,58,0)
---------                    ------               --------------------
"BLD",9426,1,59,0)
N/A
"BLD",9426,1,60,0)
 
"BLD",9426,1,61,0)
 
"BLD",9426,1,62,0)
Mail Groups Associated:
"BLD",9426,1,63,0)
 
"BLD",9426,1,64,0)
Mail Group Name          New/Modified/Deleted
"BLD",9426,1,65,0)
---------------          --------------------
"BLD",9426,1,66,0)
N/A
"BLD",9426,1,67,0)
 
"BLD",9426,1,68,0)
 
"BLD",9426,1,69,0)
Options Associated:
"BLD",9426,1,70,0)
 
"BLD",9426,1,71,0)
Option Name            Type               New/Modified/Deleted
"BLD",9426,1,72,0)
-----------            ----               -------------------- 
"BLD",9426,1,73,0)
N/A
"BLD",9426,1,74,0)
 
"BLD",9426,1,75,0)
 
"BLD",9426,1,76,0)
Protocols Associated:
"BLD",9426,1,77,0)
 
"BLD",9426,1,78,0)
Protocol Name       New/Modified/Deleted
"BLD",9426,1,79,0)
-------------       -------------------- 
"BLD",9426,1,80,0)
N/A
"BLD",9426,1,81,0)
 
"BLD",9426,1,82,0)
 
"BLD",9426,1,83,0)
Security Keys Associated:
"BLD",9426,1,84,0)
 
"BLD",9426,1,85,0)
Security Key Name
"BLD",9426,1,86,0)
-----------------
"BLD",9426,1,87,0)
N/A
"BLD",9426,1,88,0)
 
"BLD",9426,1,89,0)
 
"BLD",9426,1,90,0)
Templates Associated:
"BLD",9426,1,91,0)
 
"BLD",9426,1,92,0)
Template Name      Type      File Name (Number)  New/Modified/Deleted 
"BLD",9426,1,93,0)
-------------      ----      ------------------  --------------------
"BLD",9426,1,94,0)
LR USER                      PARAMETER TEMPLATE  NEW
"BLD",9426,1,95,0)
                              FILE (8989.52)
"BLD",9426,1,96,0)
LR PKG                       PARAMETER TEMPLATE  NEW
"BLD",9426,1,97,0)
                              FILE (8989.52)
"BLD",9426,1,98,0)
 
"BLD",9426,1,99,0)
Parameters Associated:
"BLD",9426,1,100,0)
 
"BLD",9426,1,101,0)
Parameter Name            New/Modified/Deleted
"BLD",9426,1,102,0)
--------------            --------------------
"BLD",9426,1,103,0)
LR MI UI RELEASE DEFAULT   NEW
"BLD",9426,1,104,0)
 
"BLD",9426,1,105,0)
Additional Information:
"BLD",9426,1,106,0)
 
"BLD",9426,1,107,0)
N/A 
"BLD",9426,1,108,0)
 
"BLD",9426,1,109,0)
New Service Requests (NSRs):
"BLD",9426,1,110,0)
----------------------------  
"BLD",9426,1,111,0)
NSR #20131213 
"BLD",9426,1,112,0)
Carbapenem Resistant Enterobacteriaceae (CRE) Naming Conventions
"BLD",9426,1,113,0)
Electronic Interfacing of Automated Identification and Susceptibility 
"BLD",9426,1,114,0)
Testing Instruments
"BLD",9426,1,115,0)
 
"BLD",9426,1,116,0)
NSR #20140801
"BLD",9426,1,117,0)
Tracking Multi-Drug Resistant Organisms 
"BLD",9426,1,118,0)
Patient Safety Issues (PSIs):
"BLD",9426,1,119,0)
-----------------------------
"BLD",9426,1,120,0)
N/A
"BLD",9426,1,121,0)
 
"BLD",9426,1,122,0)
 
"BLD",9426,1,123,0)
Remedy Ticket(s) & Overview:
"BLD",9426,1,124,0)
----------------------------
"BLD",9426,1,125,0)
 
"BLD",9426,1,126,0)
N/A
"BLD",9426,1,127,0)
 
"BLD",9426,1,128,0)
Problem:
"BLD",9426,1,129,0)
-------
"BLD",9426,1,130,0)
N/A
"BLD",9426,1,131,0)
 
"BLD",9426,1,132,0)
Resolution:
"BLD",9426,1,133,0)
----------
"BLD",9426,1,134,0)
N/A
"BLD",9426,1,135,0)
 
"BLD",9426,1,136,0)
Test Sites:
"BLD",9426,1,137,0)
----------
"BLD",9426,1,138,0)
Tampa (alpha)
"BLD",9426,1,139,0)
Iowa City
"BLD",9426,1,140,0)
Lexington
"BLD",9426,1,141,0)
 
"BLD",9426,1,142,0)
Software and Documentation Retrieval Information 
"BLD",9426,1,143,0)
==============================
"BLD",9426,1,144,0)
VistA Laboratory patch LR*5.2*474 software is distributed by Host File,
"BLD",9426,1,145,0)
along with LA*5.2*90.  
"BLD",9426,1,146,0)
 
"BLD",9426,1,147,0)
The preferred method is to retrieve files from download.vista.domain.ext.
"BLD",9426,1,148,0)
This transmits the files from the first available server. Sites may 
"BLD",9426,1,149,0)
also elect to retrieve files directly from a specific server. 
"BLD",9426,1,150,0)
 
"BLD",9426,1,151,0)
Sites may retrieve the software and/or documentation directly using 
"BLD",9426,1,152,0)
Secure File Transfer Protocol (SFTP) from the ANONYMOUS.SOFTWARE directory
"BLD",9426,1,153,0)
at the following OI Field Offices:
"BLD",9426,1,154,0)
   
"BLD",9426,1,155,0)
Albany:                 fo-albany.domain.ext
"BLD",9426,1,156,0)
Hines:                  fo-hines.domain.ext    
"BLD",9426,1,157,0)
Salt Lake City:         fo-slc.domain.ext
"BLD",9426,1,158,0)
                                   
"BLD",9426,1,159,0)
File Name                   Contents               Retrieval Format 
"BLD",9426,1,160,0)
------------------          --------------------   ----------------
"BLD",9426,1,161,0)
LAB_MICRO_INTERFACE_        Host File containing   ASCII
"BLD",9426,1,162,0)
RELEASE_1_0.KID             KIDS software distribution 
"BLD",9426,1,163,0)
 
"BLD",9426,1,164,0)
LAB_MICRO_INTERFACE_RELEASE_1_0_DOCS.ZIP, which contains both .pdf and 
"BLD",9426,1,165,0)
.doc formatted file of the following documents. Retrieval format is 
"BLD",9426,1,166,0)
BINARY:
"BLD",9426,1,167,0)
 
"BLD",9426,1,168,0)
Lab Micro Interface Release 1.0 User Guide
"BLD",9426,1,169,0)
Lab Micro Interface Release 1.0 Technical Manual and Security Guide     
"BLD",9426,1,170,0)
Lab Micro Deployment, Installation, Back-Out, and Rollback 
"BLD",9426,1,171,0)
Guide           
"BLD",9426,1,172,0)
 
"BLD",9426,1,173,0)
The VistA Documentation Library (VDL) web site will also contain the 
"BLD",9426,1,174,0)
above referenced documents. This website is usually updated within 1-3
"BLD",9426,1,175,0)
days of the patch release date. The VDL web address for Laboratory
"BLD",9426,1,176,0)
Universal Interface user documentation is:
"BLD",9426,1,177,0)
http://www.domain.ext/vdl/application.asp?appid=120
"BLD",9426,1,178,0)
 
"BLD",9426,1,179,0)
Note: These previously released documents contain configuration and
"BLD",9426,1,180,0)
mapping information that is useful to the implementation of the Universal
"BLD",9426,1,181,0)
Interface for Microbiology tests.
"BLD",9426,1,182,0)
------------------------------------------------------------------------
"BLD",9426,1,183,0)
LEDI IV Installation Guide     LAB_LEDI_IV_IG.PDF            binary
"BLD",9426,1,184,0)
LEDI IV User Manual            LAB_LEDI_IV_UM.PDF            binary
"BLD",9426,1,185,0)
LEDI IV Update AP/MICRO        LEDI_IV__AP__MICRO_           binary
"BLD",9426,1,186,0)
Configuration Guide            CONFIGURATION_GUIDE.PDF       binary
"BLD",9426,1,187,0)
 
"BLD",9426,1,188,0)
     
"BLD",9426,1,189,0)
Patch Installation:
"BLD",9426,1,190,0)
-------------------
"BLD",9426,1,191,0)
 
"BLD",9426,1,192,0)
 
"BLD",9426,1,193,0)
Pre/Post Installation Overview:
"BLD",9426,1,194,0)
-------------------------------
"BLD",9426,1,195,0)
This patch, LR*5.2*474 is part of a combined build for the Laboratory 
"BLD",9426,1,196,0)
Microbiology Interface Enhancement patch.
"BLD",9426,1,197,0)
 
"BLD",9426,1,198,0)
This patch install must be coordinated with the Laboratory ADPAC to 
"BLD",9426,1,199,0)
ensure that all Lab Interface related activities are halted.
"BLD",9426,1,200,0)
 
"BLD",9426,1,201,0)
This installation will modify the Enter/verify data (auto instrument)
"BLD",9426,1,202,0)
option for the Microbiology Universal Interface process by providing the
"BLD",9426,1,203,0)
following release options:
"BLD",9426,1,204,0)
 
"BLD",9426,1,205,0)
Select RELEASE action: Edit (full)// ?
"BLD",9426,1,206,0)
 
"BLD",9426,1,207,0)
Entering 0 will abort review/release.
"BLD",9426,1,208,0)
Entering 1 will allow release 'as is' with no editing.
"BLD",9426,1,209,0)
Entering 2 will allow you to enter/edit comments then release.
"BLD",9426,1,210,0)
Entering 3 will allow you to enter full edit, similar to 'Results entry' 
"BLD",9426,1,211,0)
option.
"BLD",9426,1,212,0)
 
"BLD",9426,1,213,0)
Selections 1-3 will allow editing of status and approved date/time.
"BLD",9426,1,214,0)
 
"BLD",9426,1,215,0)
     Select one of the following:
"BLD",9426,1,216,0)
 
"BLD",9426,1,217,0)
          0         Quit
"BLD",9426,1,218,0)
          1         Release
"BLD",9426,1,219,0)
          2         Comments/Release
"BLD",9426,1,220,0)
          3         Edit (full)
"BLD",9426,1,221,0)
 
"BLD",9426,1,222,0)
 
"BLD",9426,1,223,0)
Pre-Installation Instructions:
"BLD",9426,1,224,0)
------------------------------
"BLD",9426,1,225,0)
Ensure that all Lab Interface activity has been halted !!
"BLD",9426,1,226,0)
 
"BLD",9426,1,227,0)
This would include:
"BLD",9426,1,228,0)
-Editing of an Auto Instrument file entry, 
"BLD",9426,1,229,0)
-Turn off the Auto Downloading process to prevent the building and 
"BLD",9426,1,230,0)
downloading 
"BLD",9426,1,231,0)
of a Load/Worklist to the Instrument Manager. 
"BLD",9426,1,232,0)
-Shut down all LA7UI logical links and any other HL7 process (HLZTCP or 
"BLD",9426,1,233,0)
HLLP processes) 
"BLD",9426,1,234,0)
to prevent the processing of result messages from the IM.
"BLD",9426,1,235,0)
 
"BLD",9426,1,236,0)
This patch may be installed with users on the system as long as the above 
"BLD",9426,1,237,0)
process controls have been followed.
"BLD",9426,1,238,0)
 
"BLD",9426,1,239,0)
 
"BLD",9426,1,240,0)
Installation Instructions:
"BLD",9426,1,241,0)
--------------------------
"BLD",9426,1,242,0)
This patch may be installed with users on the system although it is 
"BLD",9426,1,243,0)
 recommended that it be installed during non-peak hours to minimize 
"BLD",9426,1,244,0)
 potential disruption to users.  This patch should take less than 5 
"BLD",9426,1,245,0)
 minutes to install.
"BLD",9426,1,246,0)
 
"BLD",9426,1,247,0)
   
"BLD",9426,1,248,0)
1.      DOWNLOAD HOST KIDS FILE 
"BLD",9426,1,249,0)
        ----------------------
"BLD",9426,1,250,0)
        Download the KIDS file LAB_MICRO_INTERFACE_RELEASE_1_0.KID from 
"BLD",9426,1,251,0)
        the ANONYMOUS.SOFTWARE directory of Albany, Hines, or the Salt
"BLD",9426,1,252,0)
        Lake OIFO to the appropriate directory on your system.
"BLD",9426,1,253,0)
 
"BLD",9426,1,254,0)
2.      LOAD DISTRIBUTION 
"BLD",9426,1,255,0)
        -----------------
"BLD",9426,1,256,0)
        Use the 'LOAD A DISTRIBUTION' option on the KIDS 
"BLD",9426,1,257,0)
        INSTALLATION menu, and enter:  the directory onto which you 
"BLD",9426,1,258,0)
        have downloaded the host file, followed by 
"BLD",9426,1,259,0)
        LAB_MICRO_INTERFACE_RELEASE_1_0.KID, the host file name. 
"BLD",9426,1,260,0)
 
"BLD",9426,1,261,0)
3.      START UP KIDS 
"BLD",9426,1,262,0)
        -------------
"BLD",9426,1,263,0)
        Start up the Kernel Installation and Distribution System Menu 
"BLD",9426,1,264,0)
        [XPD MAIN]:
"BLD",9426,1,265,0)
        Edits and Distribution ...  
"BLD",9426,1,266,0)
        Utilities ...  
"BLD",9426,1,267,0)
        Installation ...  
"BLD",9426,1,268,0)
 
"BLD",9426,1,269,0)
        Select Kernel Installation & Distribution System Option: 
"BLD",9426,1,270,0)
        Installation 
"BLD",9426,1,271,0)
        -------------
"BLD",9426,1,272,0)
 
"BLD",9426,1,273,0)
            Load a Distribution 
"BLD",9426,1,274,0)
            Print Transport Global 
"BLD",9426,1,275,0)
            Compare Transport Global to Current System 
"BLD",9426,1,276,0)
            Verify Checksums in Transport Global 
"BLD",9426,1,277,0)
            Install Package(s) 
"BLD",9426,1,278,0)
            Restart Install of Package(s) 
"BLD",9426,1,279,0)
            Unload a Distribution 
"BLD",9426,1,280,0)
            Backup a Transport Global 
"BLD",9426,1,281,0)
 
"BLD",9426,1,282,0)
4.      Select Installation Option: 
"BLD",9426,1,283,0)
     ---------------------------
"BLD",9426,1,284,0)
   
"BLD",9426,1,285,0)
   a.   Use the Load a Distribution and select Host File: 
"BLD",9426,1,286,0)
        LAB_MICRO_INTERFACE_RELEASE_1_0.KID
"BLD",9426,1,287,0)
        b.  Backup a Transport Global - This option will create a backup
"BLD",9426,1,288,0)
        message of any routines exported with this patch. It will not
"BLD",9426,1,289,0)
        backup any other changes such as DDs or templates.
"BLD",9426,1,290,0)
        c.  Compare Transport Global to Current System - This option will
"BLD",9426,1,291,0)
        allow you to view all changes that will be made when this patch
"BLD",9426,1,292,0)
        is installed.  It compares all components of this patch
"BLD",9426,1,293,0)
        (routines, DDs, templates, etc.).
"BLD",9426,1,294,0)
        d.  Verify Checksums in Transport Global - This option will allow
"BLD",9426,1,295,0)
        you to ensure the integrity of the routines that are in the
"BLD",9426,1,296,0)
        transport global.
"BLD",9426,1,297,0)
     
"BLD",9426,1,298,0)
 
"BLD",9426,1,299,0)
5.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
"BLD",9426,1,300,0)
    Install? NO//'     
"BLD",9426,1,301,0)
    Respond: NO
"BLD",9426,1,302,0)
 
"BLD",9426,1,303,0)
6.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
"BLD",9426,1,304,0)
    NO//'
"BLD",9426,1,305,0)
    Respond: NO
"BLD",9426,1,306,0)
 
"BLD",9426,1,307,0)
7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
"BLD",9426,1,308,0)
    and Protocols? NO//' 
"BLD",9426,1,309,0)
    Respond: NO
"BLD",9426,1,310,0)
 
"BLD",9426,1,311,0)
8.  If prompted 'Delay Install (Minutes): (0 - 60): 0//' 
"BLD",9426,1,312,0)
    Respond: 0.
"BLD",9426,1,313,0)
 
"BLD",9426,1,314,0)
 
"BLD",9426,1,315,0)
Post-Installation Instructions:
"BLD",9426,1,316,0)
-------------------------------
"BLD",9426,1,317,0)
ADPAC and Microbiology Tech instructions:
"BLD",9426,1,318,0)
 
"BLD",9426,1,319,0)
1.      After data has been received from the Data Innovations for an 
"BLD",9426,1,320,0)
automated Microbiology instrument, the releasing Microbiology Technologist
"BLD",9426,1,321,0)
will be presented with the following options:
"BLD",9426,1,322,0)
 
"BLD",9426,1,323,0)
Select RELEASE action: Edit (full)// ?
"BLD",9426,1,324,0)
 
"BLD",9426,1,325,0)
Entering 0 will abort review/release.
"BLD",9426,1,326,0)
Entering 1 will allow release 'as is' with no editing.
"BLD",9426,1,327,0)
Entering 2 will allow you to enter/edit comments then release.
"BLD",9426,1,328,0)
Entering 3 will allow you to enter full edit, similar to 'Results entry' 
"BLD",9426,1,329,0)
option.
"BLD",9426,1,330,0)
Selections 1-3 will allow editing of status and approved date/time.
"BLD",9426,1,331,0)
 
"BLD",9426,1,332,0)
     Select one of the following:
"BLD",9426,1,333,0)
 
"BLD",9426,1,334,0)
          0         Quit
"BLD",9426,1,335,0)
          1         Release
"BLD",9426,1,336,0)
          2         Comments/Release
"BLD",9426,1,337,0)
          3         Edit (full)
"BLD",9426,1,338,0)
 
"BLD",9426,1,339,0)
Select RELEASE action: Edit (full)// 0  Quit
"BLD",9426,1,340,0)
 
"BLD",9426,1,341,0)
Do you want to PURGE these results? NO//
"BLD",9426,1,342,0)
 
"BLD",9426,1,343,0)
 
"BLD",9426,1,344,0)
2.       A new parameter LR MI UI RELEASE DEFAULT is included with this 
"BLD",9426,1,345,0)
patch and it provides the VAMC site the ability to set the release default
"BLD",9426,1,346,0)
at the package and user levels.
"BLD",9426,1,347,0)
 
"BLD",9426,1,348,0)
Example configuration:
"BLD",9426,1,349,0)
 
"BLD",9426,1,350,0)
Select OE/RR interface parameters <TEST ACCOUNT> Option: Select Lab
"BLD",9426,1,351,0)
 liaison menu <TEST ACCOUNT> Option: OE/RR interface parameters
"BLD",9426,1,352,0)
 
"BLD",9426,1,353,0)
 
"BLD",9426,1,354,0)
   EH     Edit HOSPITAL SITE parameters
"BLD",9426,1,355,0)
   AS     Edit a lab administration schedule
"BLD",9426,1,356,0)
   IL     Inquire to a Lab administration schedule
"BLD",9426,1,357,0)
   CC     Update CPRS Parameters ...
"BLD",9426,1,358,0)
 
"BLD",9426,1,359,0)
Select OE/RR interface parameters <TEST ACCOUNT> Option: CC Update CPRS
"BLD",9426,1,360,0)
Parameters
"BLD",9426,1,361,0)
 
"BLD",9426,1,362,0)
 
"BLD",9426,1,363,0)
   PA     Update CPRS with Lab order parameters
"BLD",9426,1,364,0)
   SI     Update CPRS with Single Lab test
"BLD",9426,1,365,0)
   UP     Update CPRS with all Lab test parameters
"BLD",9426,1,366,0)
   DO     Domain Level Parameter Edit
"BLD",9426,1,367,0)
   LO     Location Level Parameter Edit
"BLD",9426,1,368,0)
   PP     Package Level Parameter Edit
"BLD",9426,1,369,0)
   UL     Display Lab User Parameters
"BLD",9426,1,370,0)
 
"BLD",9426,1,371,0)
Select Update CPRS Parameters <TEST ACCOUNT> Option: PP Package Level 
"BLD",9426,1,372,0)
Parameter Edit
"BLD",9426,1,373,0)
 
"BLD",9426,1,374,0)
Lab Package Level Parameters for Package: LAB SERVICE
"BLD",9426,1,375,0)
--------------------------------------------------------------------------
"BLD",9426,1,376,0)
Collect on Monday                                 YES
"BLD",9426,1,377,0)
Collect on Tuesday                                YES
"BLD",9426,1,378,0)
Collect on Wednesday                              YES
"BLD",9426,1,379,0)
Collect on Thursday                               YES
"BLD",9426,1,380,0)
Collect on Friday                                 YES
"BLD",9426,1,381,0)
Collect on Saturday                               YES
"BLD",9426,1,382,0)
Collect on Sunday                                 YES
"BLD",9426,1,383,0)
Lab Collects on Holidays                          YES
"BLD",9426,1,384,0)
Lab Collect Days Allowed in Future                7
"BLD",9426,1,385,0)
Maximum Days for Continuous Orders                
"BLD",9426,1,386,0)
Default manual verify method                      
"BLD",9426,1,387,0)
Default load/work list verify method
"BLD",9426,1,388,0)
Display Provider in Micro Result Entry            
"BLD",9426,1,389,0)
Default Micro Instrument Release Action VITEK     Edit (full)
"BLD",9426,1,390,0)
Prompt CPRS Alert in Micro Result Entry           Don't Ask
"BLD",9426,1,391,0)
Prompt CPRS Alert in CH Result Entry              
"BLD",9426,1,392,0)
EGFR Creatinine IDMS-traceable Method             
"BLD",9426,1,393,0)
EGFR Patient's Age Cutoff                         
"BLD",9426,1,394,0)
EGFR Result Cutoff                                
"BLD",9426,1,395,0)
Send an alert after AP release                    
"BLD",9426,1,396,0)
Default AP Report Selection Prompt                
"BLD",9426,1,397,0)
Ask Performing Lab AP                             YES
"BLD",9426,1,398,0)
Ask Performing Lab Micro                          YES
"BLD",9426,1,399,0)
Print SNOMED Code System                          SNOMED I
"BLD",9426,1,400,0)
Document Surgery Package Case Info                NO
"BLD",9426,1,401,0)
Chemistry GUI Report Right Margin                 
"BLD",9426,1,402,0)
Microbiology GUI Report Right Margin              
"BLD",9426,1,403,0)
AP GUI Report Right Margin                        
"BLD",9426,1,404,0)
Method of Assigning AP Accession Number
"BLD",9426,1,405,0)
Default Accessioning Specimen
"BLD",9426,1,406,0)
Default Accessioning Collection Sample
"BLD",9426,1,407,0)
Default Accessioning Lab Test
"BLD",9426,1,408,0)
Exclude removed tests from building
"BLD",9426,1,409,0)
Use default accession dates
"BLD",9426,1,410,0)
Print Reporting/Printing Facility                 None
"BLD",9426,1,411,0)
Days to keep of instrument data 1                 2
"BLD",9426,1,412,0)
Lab STS Default Mapping Files Directory           
"BLD",9426,1,413,0)
Lab STS Default Mapping Filespec                  *.TXT
"BLD",9426,1,414,0)
--------------------------------------------------------------------------
"BLD",9426,1,415,0)
COLLECT MONDAY: YES// 
"BLD",9426,1,416,0)
COLLECT TUESDAY: YES// 
"BLD",9426,1,417,0)
COLLECT WEDNESDAY: YES// 
"BLD",9426,1,418,0)
COLLECT THURSDAY: YES// 
"BLD",9426,1,419,0)
COLLECT FRIDAY: YES// 
"BLD",9426,1,420,0)
COLLECT SATURDAY: YES// 
"BLD",9426,1,421,0)
COLLECT SUNDAY: YES// 
"BLD",9426,1,422,0)
IGNORE HOLIDAYS: YES// 
"BLD",9426,1,423,0)
LAB COLLECT DAYS ALLOWED IN FUTURE: 7// 
"BLD",9426,1,424,0)
MAXIMUM DAYS FOR CONTINUOUS ORDERS: 
"BLD",9426,1,425,0)
Default manual verify method: 
"BLD",9426,1,426,0)
 
"BLD",9426,1,427,0)
For Default load/work list verify method -
"BLD",9426,1,428,0)
Select Accession Area: 
"BLD",9426,1,429,0)
Display Provider in Micro Result Entry: 
"BLD",9426,1,430,0)
 
"BLD",9426,1,431,0)
For Default Micro Instrument Release Action -
"BLD",9426,1,432,0)
Select Load/Work List: VITEK  
"BLD",9426,1,433,0)
 
"BLD",9426,1,434,0)
Load/Work List: VITEK//   VITEK   VITEK
"BLD",9426,1,435,0)
Default load/work list verify method: Edit (full)// 
"BLD",9426,1,436,0)
 
"BLD",9426,1,437,0)
For Default Micro Instrument Release Action -
"BLD",9426,1,438,0)
Select Load/Work List: 
"BLD",9426,1,439,0)
   NOTE: This parameter will allow the default release action to be
"BLD",9426,1,440,0)
   Load/Work List specific.
"BLD",9426,1,441,0)
 
"BLD",9426,1,442,0)
 
"BLD",9426,1,443,0)
3.       Setting the default release action for a user:
"BLD",9426,1,444,0)
 
"BLD",9426,1,445,0)
Select Information-help menu <TEST ACCOUNT> Option: PP  General Lab User 
"BLD",9426,1,446,0)
Parameters
"BLD",9426,1,447,0)
 
"BLD",9426,1,448,0)
Lab User Level Parameters for User: TECH,MICRO
"BLD",9426,1,449,0)
--------------------------------------------------------------------------
"BLD",9426,1,450,0)
Default lab label printer
"BLD",9426,1,451,0)
Display previous comments for test
"BLD",9426,1,452,0)
Default Performing Laboratory                     
"BLD",9426,1,453,0)
Ask Performing Lab AP                             
"BLD",9426,1,454,0)
Ask Performing Lab Micro                          
"BLD",9426,1,455,0)
Display Provider in Micro Result Entry            
"BLD",9426,1,456,0)
Prompt CPRS Alert in CH Result Entry              
"BLD",9426,1,457,0)
Prompt CPRS Alert in Micro Result Entry           
"BLD",9426,1,458,0)
Default Micro Instrument Release Action VITEK     Release
"BLD",9426,1,459,0)
Default AP Report Selection Prompt                
"BLD",9426,1,460,0)
Send an alert after AP release                    
"BLD",9426,1,461,0)
Default Accessioning Specimen
"BLD",9426,1,462,0)
Default Accessioning Collection Sample
"BLD",9426,1,463,0)
Default Accessioning Lab Test
"BLD",9426,1,464,0)
Exclude removed tests from building
"BLD",9426,1,465,0)
Use default accession dates
"BLD",9426,1,466,0)
Lab Messaging - Parse HL7 Messages                
"BLD",9426,1,467,0)
Lab Messaging - Display using Browser             
"BLD",9426,1,468,0)
Lab Messaging - Show Identifiers                  
"BLD",9426,1,469,0)
Chemistry GUI Report Right Margin                 
"BLD",9426,1,470,0)
Microbiology GUI Report Right Margin              132
"BLD",9426,1,471,0)
AP GUI Report Right Margin                        240
"BLD",9426,1,472,0)
Lab STS Default Mapping Files Directory           
"BLD",9426,1,473,0)
Lab STS Default Mapping Filespec                  
"BLD",9426,1,474,0)
--------------------------------------------------------------------------
"BLD",9426,1,475,0)
 
"BLD",9426,1,476,0)
For Default lab label printer -
"BLD",9426,1,477,0)
Select Division:  
"BLD",9426,1,478,0)
 
"BLD",9426,1,479,0)
For Display previous comments for test -
"BLD",9426,1,480,0)
Select Laboratory Test: 
"BLD",9426,1,481,0)
Default Performing Laboratory: 
"BLD",9426,1,482,0)
Ask Performing Lab AP: 
"BLD",9426,1,483,0)
Ask Performing Lab for MICRO: 
"BLD",9426,1,484,0)
Display Provider in Micro Result Entry: 
"BLD",9426,1,485,0)
Send CPRS Alert in CH Result Entry: 
"BLD",9426,1,486,0)
Send CPRS Alert in Micro Result Entry: 
"BLD",9426,1,487,0)
 
"BLD",9426,1,488,0)
For Default Micro Instrument Release Action -
"BLD",9426,1,489,0)
Select Load/Work List: VITEK  
"BLD",9426,1,490,0)
Are you adding VITEK as a new Load/Work List? Yes//   YES
"BLD",9426,1,491,0)
 
"BLD",9426,1,492,0)
Load/Work List: VITEK//   VITEK   VITEK
"BLD",9426,1,493,0)
Default load/work list verify method: Release
"BLD",9426,1,494,0)
 
"BLD",9426,1,495,0)
For Default Micro Instrument Release Action -
"BLD",9426,1,496,0)
Select Load/Work List:   
"BLD",9426,1,497,0)
   NOTE: This parameter will allow the default release action to be
"BLD",9426,1,498,0)
   Load/Work List specific.
"BLD",9426,1,499,0)
AP Report Selection Default: ^
"BLD",9426,4,0)
^9.64PA^^
"BLD",9426,6.3)
14
"BLD",9426,"ABPKG")
n
"BLD",9426,"KRN",0)
^9.67PA^779.2^20
"BLD",9426,"KRN",.4,0)
.4
"BLD",9426,"KRN",.401,0)
.401
"BLD",9426,"KRN",.402,0)
.402
"BLD",9426,"KRN",.403,0)
.403
"BLD",9426,"KRN",.5,0)
.5
"BLD",9426,"KRN",.84,0)
.84
"BLD",9426,"KRN",3.6,0)
3.6
"BLD",9426,"KRN",3.8,0)
3.8
"BLD",9426,"KRN",9.2,0)
9.2
"BLD",9426,"KRN",9.8,0)
9.8
"BLD",9426,"KRN",9.8,"NM",0)
^9.68A^7^7
"BLD",9426,"KRN",9.8,"NM",1,0)
LRVRMI2^^0^B36282264
"BLD",9426,"KRN",9.8,"NM",2,0)
LRVRMI2A^^0^B78602425
"BLD",9426,"KRN",9.8,"NM",3,0)
LRVRMI3^^0^B26756120
"BLD",9426,"KRN",9.8,"NM",4,0)
LRVRMI4^^0^B39771458
"BLD",9426,"KRN",9.8,"NM",5,0)
LRVRMI4A^^0^B96471289
"BLD",9426,"KRN",9.8,"NM",6,0)
LRVR0^^0^B154172378
"BLD",9426,"KRN",9.8,"NM",7,0)
LRMIEDZ2^^0^B72283385
"BLD",9426,"KRN",9.8,"NM","B","LRMIEDZ2",7)

"BLD",9426,"KRN",9.8,"NM","B","LRVR0",6)

"BLD",9426,"KRN",9.8,"NM","B","LRVRMI2",1)

"BLD",9426,"KRN",9.8,"NM","B","LRVRMI2A",2)

"BLD",9426,"KRN",9.8,"NM","B","LRVRMI3",3)

"BLD",9426,"KRN",9.8,"NM","B","LRVRMI4",4)

"BLD",9426,"KRN",9.8,"NM","B","LRVRMI4A",5)

"BLD",9426,"KRN",19,0)
19
"BLD",9426,"KRN",19,"NM",0)
^9.68A^^0
"BLD",9426,"KRN",19.1,0)
19.1
"BLD",9426,"KRN",101,0)
101
"BLD",9426,"KRN",409.61,0)
409.61
"BLD",9426,"KRN",771,0)
771
"BLD",9426,"KRN",779.2,0)
779.2
"BLD",9426,"KRN",870,0)
870
"BLD",9426,"KRN",8989.51,0)
8989.51
"BLD",9426,"KRN",8989.51,"NM",0)
^9.68A^1^1
"BLD",9426,"KRN",8989.51,"NM",1,0)
LR MI UI RELEASE DEFAULT^^0
"BLD",9426,"KRN",8989.51,"NM","B","LR MI UI RELEASE DEFAULT",1)

"BLD",9426,"KRN",8989.52,0)
8989.52
"BLD",9426,"KRN",8989.52,"NM",0)
^9.68A^2^2
"BLD",9426,"KRN",8989.52,"NM",1,0)
LR PKG^^0
"BLD",9426,"KRN",8989.52,"NM",2,0)
LR USER^^0
"BLD",9426,"KRN",8989.52,"NM","B","LR PKG",1)

"BLD",9426,"KRN",8989.52,"NM","B","LR USER",2)

"BLD",9426,"KRN",8994,0)
8994
"BLD",9426,"KRN","B",.4,.4)

"BLD",9426,"KRN","B",.401,.401)

"BLD",9426,"KRN","B",.402,.402)

"BLD",9426,"KRN","B",.403,.403)

"BLD",9426,"KRN","B",.5,.5)

"BLD",9426,"KRN","B",.84,.84)

"BLD",9426,"KRN","B",3.6,3.6)

"BLD",9426,"KRN","B",3.8,3.8)

"BLD",9426,"KRN","B",9.2,9.2)

"BLD",9426,"KRN","B",9.8,9.8)

"BLD",9426,"KRN","B",19,19)

"BLD",9426,"KRN","B",19.1,19.1)

"BLD",9426,"KRN","B",101,101)

"BLD",9426,"KRN","B",409.61,409.61)

"BLD",9426,"KRN","B",771,771)

"BLD",9426,"KRN","B",779.2,779.2)

"BLD",9426,"KRN","B",870,870)

"BLD",9426,"KRN","B",8989.51,8989.51)

"BLD",9426,"KRN","B",8989.52,8989.52)

"BLD",9426,"KRN","B",8994,8994)

"BLD",9426,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",9426,"QUES",0)
^9.62^^
"BLD",9426,"REQB",0)
^9.611^7^7
"BLD",9426,"REQB",1,0)
LR*5.2*221^2
"BLD",9426,"REQB",2,0)
LR*5.2*291^2
"BLD",9426,"REQB",3,0)
LR*5.2*416^2
"BLD",9426,"REQB",4,0)
LR*5.2*422^2
"BLD",9426,"REQB",5,0)
LR*5.2*433^2
"BLD",9426,"REQB",6,0)
LR*5.2*453^2
"BLD",9426,"REQB",7,0)
LA*5.2*90^2
"BLD",9426,"REQB","B","LA*5.2*90",7)

"BLD",9426,"REQB","B","LR*5.2*221",1)

"BLD",9426,"REQB","B","LR*5.2*291",2)

"BLD",9426,"REQB","B","LR*5.2*416",3)

"BLD",9426,"REQB","B","LR*5.2*422",4)

"BLD",9426,"REQB","B","LR*5.2*433",5)

"BLD",9426,"REQB","B","LR*5.2*453",6)

"KRN",8989.5,301456,0)
26;DIC(9.4,^LR MI UI RELEASE DEFAULT^64
"KRN",8989.5,301456,1)
3
"KRN",8989.51,19,0)
LR IGNORE HOLIDAYS^Lab Collects on Holidays^^^IGNORE HOLIDAYS
"KRN",8989.51,19,1)
Y^^Enter 'Yes' if full lab service operates on federal holidays.
"KRN",8989.51,19,20,0)
^^2^2^2950816^
"KRN",8989.51,19,20,1,0)
This indicates if this institution operates at full service during
"KRN",8989.51,19,20,2,0)
federal holidays.
"KRN",8989.51,19,30,0)
^8989.513I^2^2
"KRN",8989.51,19,30,1,0)
1^4.2
"KRN",8989.51,19,30,2,0)
2^9.4
"KRN",8989.51,20,0)
LR MAX DAYS CONTINUOUS^Maximum Days for Continuous Orders^^^MAXIMUM DAYS FOR CONTINUOUS ORDERS^0
"KRN",8989.51,20,1)
N^1:370^Enter the maximum number of days that multiple-continuous orders can be placed.
"KRN",8989.51,20,20,0)
^^2^2^3000211^^^^
"KRN",8989.51,20,20,1,0)
This is the maximum number of days that multiple-continuous orders may be
"KRN",8989.51,20,20,2,0)
placed.  The number may be specific to each hospital location.
"KRN",8989.51,20,30,0)
^8989.513I^3^3
"KRN",8989.51,20,30,1,0)
1^44
"KRN",8989.51,20,30,2,0)
2^4.2
"KRN",8989.51,20,30,3,0)
3^9.4
"KRN",8989.51,74,0)
LR COLLECT FRIDAY^Collect on Friday^^^COLLECT FRIDAY
"KRN",8989.51,74,1)
Y^0:1^Enter 1 if routine collection is done on this day
"KRN",8989.51,74,20,0)
^^1^1^2951010^
"KRN",8989.51,74,20,1,0)
This determines if routine collection is done on this day.
"KRN",8989.51,74,30,0)
^8989.513I^2^2
"KRN",8989.51,74,30,1,0)
1^4.2
"KRN",8989.51,74,30,2,0)
2^9.4
"KRN",8989.51,75,0)
LR COLLECT THURSDAY^Collect on Thursday^^^COLLECT THURSDAY
"KRN",8989.51,75,1)
Y^0:1^Enter 1 if routine collection is done on this day
"KRN",8989.51,75,20,0)
^^1^1^2951010^
"KRN",8989.51,75,20,1,0)
This determines if routine collection is done on this day.
"KRN",8989.51,75,30,0)
^8989.513I^2^2
"KRN",8989.51,75,30,1,0)
1^4.2
"KRN",8989.51,75,30,2,0)
2^9.4
"KRN",8989.51,76,0)
LR COLLECT WEDNESDAY^Collect on Wednesday^^^COLLECT WEDNESDAY
"KRN",8989.51,76,1)
Y^0:1^Enter 1 if routine collection is done on this day
"KRN",8989.51,76,20,0)
^^1^1^2951010^
"KRN",8989.51,76,20,1,0)
This determines if routine collection is done on this day.
"KRN",8989.51,76,30,0)
^8989.513I^2^2
"KRN",8989.51,76,30,1,0)
1^4.2
"KRN",8989.51,76,30,2,0)
2^9.4
"KRN",8989.51,77,0)
LR COLLECT TUESDAY^Collect on Tuesday^^^COLLECT TUESDAY
"KRN",8989.51,77,1)
Y^0:1^Enter 1 if routine collection is done on this day
"KRN",8989.51,77,20,0)
^^1^1^2951010^
"KRN",8989.51,77,20,1,0)
This determines if routine collection is done on this day.
"KRN",8989.51,77,30,0)
^8989.513I^2^2
"KRN",8989.51,77,30,1,0)
1^4.2
"KRN",8989.51,77,30,2,0)
2^9.4
"KRN",8989.51,78,0)
LR COLLECT MONDAY^Collect on Monday^^^COLLECT MONDAY
"KRN",8989.51,78,1)
Y^0:1^Enter 1 if routine collection is done on this day
"KRN",8989.51,78,20,0)
^^1^1^2951010^
"KRN",8989.51,78,20,1,0)
This determines if routine collection is done on this day.
"KRN",8989.51,78,30,0)
^8989.513I^2^2
"KRN",8989.51,78,30,1,0)
1^4.2
"KRN",8989.51,78,30,2,0)
2^9.4
"KRN",8989.51,79,0)
LR COLLECT SUNDAY^Collect on Sunday^^^COLLECT SUNDAY
"KRN",8989.51,79,1)
Y^0:1^Enter 1 if routine collection is done on this day
"KRN",8989.51,79,20,0)
^^1^1^2951010^
"KRN",8989.51,79,20,1,0)
This determines if routine collection is done on this day.
"KRN",8989.51,79,30,0)
^8989.513I^2^2
"KRN",8989.51,79,30,1,0)
1^4.2
"KRN",8989.51,79,30,2,0)
2^9.4
"KRN",8989.51,80,0)
LR COLLECT SATURDAY^Collect on Saturday^^^COLLECT SATURDAY
"KRN",8989.51,80,1)
Y^0:1^Enter 1 if routine collection is done on this day
"KRN",8989.51,80,20,0)
^^1^1^2951010^
"KRN",8989.51,80,20,1,0)
This determines if routine collection is done on this day.
"KRN",8989.51,80,30,0)
^8989.513I^2^2
"KRN",8989.51,80,30,1,0)
1^4.2
"KRN",8989.51,80,30,2,0)
2^9.4
"KRN",8989.51,375,0)
LR VER DISPLAY PREV COMMENT^Display previous comments for test^1^Laboratory Test^Display previous result's comments^0
"KRN",8989.51,375,1)
Y^^Answer with yes/no to display previous result's comments during verification.
"KRN",8989.51,375,6)
P^60
"KRN",8989.51,375,8)
I $P(^(0),"^",4)="CH"
"KRN",8989.51,375,20,0)
^8989.512^2^2^3040707^^^^
"KRN",8989.51,375,20,1,0)
Select whether the user wants comments associated with previous results to
"KRN",8989.51,375,20,2,0)
display with those results during lab verification process.
"KRN",8989.51,375,30,0)
^8989.513I^1^1
"KRN",8989.51,375,30,1,0)
1^200
"KRN",8989.51,726,0)
LR VER EA VERIFY BY UID^Default load/work list verify method^1^Accession Area^Default load/work list verify method^0
"KRN",8989.51,726,1)
S^0:Accession Number;1:Unique Identifier (UID);2:Only UID^Specify the default result verification method presented to user.
"KRN",8989.51,726,4,0)
^8989.514^1^1
"KRN",8989.51,726,4,1,0)
UID
"KRN",8989.51,726,4,"B","UID",1)

"KRN",8989.51,726,6)
P^68
"KRN",8989.51,726,20,0)
^8989.512^9^9^3070911^^^^
"KRN",8989.51,726,20,1,0)
Used to designate the default verification method presented to
"KRN",8989.51,726,20,2,0)
the user when verifying laboratory results in the "CH" subscript
"KRN",8989.51,726,20,3,0)
via options that use a load/work list. Parameter is associated
"KRN",8989.51,726,20,4,0)
with the accession area linked to the load/worklist profile
"KRN",8989.51,726,20,5,0)
selected by the user.
"KRN",8989.51,726,20,6,0)

"KRN",8989.51,726,20,7,0)
Parameter can be set at the package or user level. 
"KRN",8989.51,726,20,8,0)
User level takes precedence over division level.
"KRN",8989.51,726,20,9,0)
Site can also force verification by UID only.
"KRN",8989.51,726,30,0)
^8989.513I^2^2
"KRN",8989.51,726,30,1,0)
1^200
"KRN",8989.51,726,30,2,0)
2^9.4
"KRN",8989.51,727,0)
LA7UTILA PARSE^Lab Messaging - Parse HL7 Messages^0^^Lab Messaging - Parse HL7 Messages
"KRN",8989.51,727,1)
S^Y:YES;N:NO;L:LAST
"KRN",8989.51,727,2)

"KRN",8989.51,727,3)

"KRN",8989.51,727,20,0)
^8989.512^5^5^3090904^^^^
"KRN",8989.51,727,20,1,0)
Allows the User to select the default setting for "Parse HL7 Message
"KRN",8989.51,727,20,2,0)
" prompt when using OPTION [LA7 PRINT LAB UI MESSAGE].
"KRN",8989.51,727,20,3,0)
 
"KRN",8989.51,727,20,4,0)
"LAST" means the User wants the system to keep track of their last
"KRN",8989.51,727,20,5,0)
response to this prompt and use that as their default. 
"KRN",8989.51,727,30,0)
^8989.513I^2^2
"KRN",8989.51,727,30,1,0)
1^200
"KRN",8989.51,727,30,2,0)
2^4.2
"KRN",8989.51,728,0)
LA7UTILA USE BROWSER^Lab Messaging - Display using Browser^^^Lab Messaging - Use Browser to display
"KRN",8989.51,728,1)
S^Y:YES;N:NO;L:LAST
"KRN",8989.51,728,2)

"KRN",8989.51,728,3)

"KRN",8989.51,728,20,0)
^8989.512^5^5^3061208^^^
"KRN",8989.51,728,20,1,0)
Allows the User to select the default setting for "Use Browser to display 
"KRN",8989.51,728,20,2,0)
HL7 Message" prompt when using OPTION [LA7 PRINT LAB UI MESSAGE].
"KRN",8989.51,728,20,3,0)
 
"KRN",8989.51,728,20,4,0)
"LAST" means the User wants the system to keep track of their last
"KRN",8989.51,728,20,5,0)
response to this prompt and use that as their default.
"KRN",8989.51,728,30,0)
^8989.513I^2^2
"KRN",8989.51,728,30,1,0)
1^200
"KRN",8989.51,728,30,2,0)
2^4.2
"KRN",8989.51,729,0)
LR LABEL PRINTER DEFAULT^Default lab label printer^1^Division^Lab Label Device^0
"KRN",8989.51,729,1)
P^3.5^Select the label printer to use as your default.
"KRN",8989.51,729,4,0)
^8989.514^1^1
"KRN",8989.51,729,4,1,0)
LABLABEL
"KRN",8989.51,729,4,"B","LABLABEL",1)

"KRN",8989.51,729,6)
P^4^Select the divisions which you log into.
"KRN",8989.51,729,7)

"KRN",8989.51,729,8)
N LRDIV S LRDIV=$$DIV4^XUSER(.LRDIV,DUZ) I $D(LRDIV(Y))
"KRN",8989.51,729,20,0)
^8989.512^3^3^3070831^^^^
"KRN",8989.51,729,20,1,0)
Allows selection of default lab label printer presented to the user when selecting
"KRN",8989.51,729,20,2,0)
the label device to use to print accession and order labels.
"KRN",8989.51,729,20,3,0)
User can specify default printer by division.
"KRN",8989.51,729,30,0)
^8989.513I^1^1
"KRN",8989.51,729,30,1,0)
1^200
"KRN",8989.51,730,0)
LR EGFR METHOD^EGFR Creatinine IDMS-traceable Method^0^IDMS-traceable^Creatinine IDMS-traceable Method^0
"KRN",8989.51,730,1)
Y^^Answer with yes/no if the Creatinine method is traceable to an IDMS method.
"KRN",8989.51,730,4,0)
^8989.514^2^2
"KRN",8989.51,730,4,1,0)
EGFR
"KRN",8989.51,730,4,2,0)
IDMS
"KRN",8989.51,730,4,"B","EGFR",1)

"KRN",8989.51,730,4,"B","IDMS",2)

"KRN",8989.51,730,6)
Y
"KRN",8989.51,730,20,0)
^8989.512^3^3^3111006^^^
"KRN",8989.51,730,20,1,0)
Used to designate if the EGFR calculation should calculate the
"KRN",8989.51,730,20,2,0)
EGFR based on a IDMS-traceable method. This parameter is configurable
"KRN",8989.51,730,20,3,0)
at both the package and division level.
"KRN",8989.51,730,30,0)
^8989.513I^2^2
"KRN",8989.51,730,30,1,0)
1^4
"KRN",8989.51,730,30,2,0)
2^9.4
"KRN",8989.51,731,0)
LR EGFR AGE CUTOFF^EGFR Patient's Age Cutoff^0^^Suppress EGFR When Patient's Age^0
"KRN",8989.51,731,1)
S^0:NEVER;1:<18 YEARS;2:>70 YEARS;3:BOTH^Select when the patient's age should suppress reporting of the patient's EGFR.
"KRN",8989.51,731,4,0)
^8989.514^1^1
"KRN",8989.51,731,4,1,0)
EGFR
"KRN",8989.51,731,4,"B","EGFR",1)

"KRN",8989.51,731,6)
^^
"KRN",8989.51,731,20,0)
^8989.512^5^5^3111006^^^^
"KRN",8989.51,731,20,1,0)
Used to designate if the EGFR calculation should not be performed 
"KRN",8989.51,731,20,2,0)
on creatinine when executing the delta check EGFR when the
"KRN",8989.51,731,20,3,0)
patient's age is <18 or >70. This parameter is configurable
"KRN",8989.51,731,20,4,0)
at both the package and division level and can be set for
"KRN",8989.51,731,20,5,0)
either or both age cutoffs.
"KRN",8989.51,731,30,0)
^8989.513I^2^2
"KRN",8989.51,731,30,1,0)
1^4
"KRN",8989.51,731,30,2,0)
2^9.4
"KRN",8989.51,732,0)
LR EGFR RESULT SUPPRESS^EGFR Result Cutoff^0^>60 Result Suppression^Report EGFR as >60^0
"KRN",8989.51,732,1)
Y^^Answer with yes/no if EGFR values >60 should be reported as ">60".
"KRN",8989.51,732,4,0)
^8989.514^1^1
"KRN",8989.51,732,4,1,0)
EGFR
"KRN",8989.51,732,4,"B","EGFR",1)

"KRN",8989.51,732,20,0)
^8989.512^4^4^3111006^^^
"KRN",8989.51,732,20,1,0)
Used to designate if the EGFR calculation should be suppressed
"KRN",8989.51,732,20,2,0)
when the value is >60. If enabled then ">60" is reported in
"KRN",8989.51,732,20,3,0)
lieu of the actual EGFR calculated value. This parameter is
"KRN",8989.51,732,20,4,0)
configurable at both the package and division level.
"KRN",8989.51,732,30,0)
^8989.513I^2^2
"KRN",8989.51,732,30,1,0)
1^4
"KRN",8989.51,732,30,2,0)
2^9.4
"KRN",8989.51,733,0)
LR VER EM VERIFY BY UID^Default manual verify method^0^^Default manual verify method^0
"KRN",8989.51,733,1)
S^0:Accession Number;1:Unique Identifier (UID);2:Only UID^Specify the default result verification method presented to user.
"KRN",8989.51,733,4,0)
^8989.514^1^1
"KRN",8989.51,733,4,1,0)
UID
"KRN",8989.51,733,4,"B","UID",1)

"KRN",8989.51,733,6)
^
"KRN",8989.51,733,20,0)
^8989.512^7^7^3070911^^^^
"KRN",8989.51,733,20,1,0)
Used to designate the default verification method presented to
"KRN",8989.51,733,20,2,0)
the user when verifying laboratory results in the "CH" subscript
"KRN",8989.51,733,20,3,0)
via options that do not use a load/work list.
"KRN",8989.51,733,20,4,0)
Parameter can be set at the package, division or user
"KRN",8989.51,733,20,5,0)
level. Division level takes precedence over the package level.
"KRN",8989.51,733,20,6,0)
User level takes precedence over division level.
"KRN",8989.51,733,20,7,0)
Site can also force verification by UID only.
"KRN",8989.51,733,30,0)
^8989.513I^3^3
"KRN",8989.51,733,30,1,0)
1^200
"KRN",8989.51,733,30,2,0)
2^4
"KRN",8989.51,733,30,3,0)
3^9.4
"KRN",8989.51,734,0)
LA7UTILA SHOIDS^Lab Messaging - Show Identifiers^0^^Lab Messaging - Show Identifiers
"KRN",8989.51,734,1)
S^Y:YES;N:NO;L:LAST
"KRN",8989.51,734,20,0)
^8989.512^3^3^3071021^
"KRN",8989.51,734,20,1,0)
Allows the user to select the default setting for the "Display 
"KRN",8989.51,734,20,2,0)
identifiers during message selection?" prompt when using OPTION [LA7 
"KRN",8989.51,734,20,3,0)
PRINT LAB UI MESSAGE].
"KRN",8989.51,734,30,0)
^8989.513I^2^2
"KRN",8989.51,734,30,1,0)
1^200
"KRN",8989.51,734,30,2,0)
2^4.2
"KRN",8989.51,735,0)
LRAPRES1 AP ALERT^Send an alert after AP release^0^^Send alert for released AP^0
"KRN",8989.51,735,1)
Y
"KRN",8989.51,735,20,0)
^8989.512^2^2^3071116^^^^
"KRN",8989.51,735,20,1,0)
After Anatomic Pathology report is released, this will be the default 
"KRN",8989.51,735,20,2,0)
answer to the "Send an alert" message.
"KRN",8989.51,735,30,0)
^8989.513I^3^3
"KRN",8989.51,735,30,1,0)
1^200
"KRN",8989.51,735,30,2,0)
5^4
"KRN",8989.51,735,30,3,0)
10^9.4
"KRN",8989.51,736,0)
LR AP REPORT SELECTION^Default AP Report Selection Prompt^0^^AP Report Selection Default^0
"KRN",8989.51,736,1)
S^1:Accession Number;2:Unique Identifier (UID);3:Patient Name^Specify the default report selection method presented to user.
"KRN",8989.51,736,4,0)
^8989.514
"KRN",8989.51,736,30,0)
^8989.513I^3^3
"KRN",8989.51,736,30,1,0)
1^200
"KRN",8989.51,736,30,2,0)
2^4
"KRN",8989.51,736,30,3,0)
3^9.4
"KRN",8989.51,737,0)
LR AP SNOMED SYSTEM PRINT^Print SNOMED Code System^0^^Print SNOMED Version
"KRN",8989.51,737,1)
S^1:SNOMED I;2:SNOMED CT;3:BOTH^Select which version of SNOMED to print on AP reports
"KRN",8989.51,737,20,0)
^^2^2^3090227^
"KRN",8989.51,737,20,1,0)
Parameter to allow the site/division to indicate which version of SNOMED
"KRN",8989.51,737,20,2,0)
to print or display on Anatomic Pathology reports.
"KRN",8989.51,737,30,0)
^8989.513I^2^2
"KRN",8989.51,737,30,1,0)
1^4
"KRN",8989.51,737,30,2,0)
2^9.4
"KRN",8989.51,738,0)
LR MAPPING DEFAULT DIRECTORY^Lab STS Default Mapping Files Directory^0^^Default Directory^0
"KRN",8989.51,738,1)
F^3:245^The directory that contains the STS mapping files
"KRN",8989.51,738,4,0)
^8989.514^2^2
"KRN",8989.51,738,4,1,0)
MAPPING
"KRN",8989.51,738,4,2,0)
STANDARDIZATION
"KRN",8989.51,738,4,"B","MAPPING",1)

"KRN",8989.51,738,4,"B","STANDARDIZATION",2)

"KRN",8989.51,738,20,0)
^8989.512^5^5^3110105^^^^
"KRN",8989.51,738,20,1,0)
This parameter holds the name of the default directory
"KRN",8989.51,738,20,2,0)
which contains the STS mapping of standard code sets to VistA
"KRN",8989.51,738,20,3,0)
Laboratory system files.
"KRN",8989.51,738,20,4,0)
 
"KRN",8989.51,738,20,5,0)
Should be expressed as a full directory specification.
"KRN",8989.51,738,30,0)
^8989.513I^3^3
"KRN",8989.51,738,30,1,0)
1^200
"KRN",8989.51,738,30,2,0)
2^9.4
"KRN",8989.51,738,30,3,0)
3^4.2
"KRN",8989.51,740,0)
LR MAPPING DEFAULT FILESPEC^Lab STS Default Mapping Filespec^0^^Default FileSpec^0
"KRN",8989.51,740,1)
F^3:70^The filespec to screen the display of files
"KRN",8989.51,740,4,0)
^8989.514^2^2
"KRN",8989.51,740,4,1,0)
MAPPING
"KRN",8989.51,740,4,2,0)
STANDARDIZATION
"KRN",8989.51,740,4,"B","MAPPING",1)

"KRN",8989.51,740,4,"B","STANDARDIZATION",2)

"KRN",8989.51,740,20,0)
^8989.512^5^5^3110105^^^
"KRN",8989.51,740,20,1,0)
This parameter holds the file specification used to screen which
"KRN",8989.51,740,20,2,0)
files is a given directory are presented to the user for loading.
"KRN",8989.51,740,20,3,0)
These files contain the STS mapping of standard code sets to VistA
"KRN",8989.51,740,20,4,0)
Laboratory system files.
"KRN",8989.51,740,20,5,0)

"KRN",8989.51,740,30,0)
^8989.513I^3^3
"KRN",8989.51,740,30,1,0)
1^200
"KRN",8989.51,740,30,2,0)
2^9.4
"KRN",8989.51,740,30,3,0)
3^4.2
"KRN",8989.51,743,0)
LR CH GUI REPORT RIGHT MARGIN^Chemistry GUI Report Right Margin^0^^Chemistry GUI Report Right Margin^0
"KRN",8989.51,743,1)
N^80:240:0^Enter the value to be used for the right margin when formatting lab reports
"KRN",8989.51,743,20,0)
^8989.512^3^3^3080421^^^^
"KRN",8989.51,743,20,1,0)
This is the value to use for the right margin (column) when formatting
"KRN",8989.51,743,20,2,0)
chemistry/hematology type laboratory reports within a GUI display/client.
"KRN",8989.51,743,20,3,0)

"KRN",8989.51,743,30,0)
^8989.513I^3^3
"KRN",8989.51,743,30,1,0)
1^200
"KRN",8989.51,743,30,2,0)
2^4
"KRN",8989.51,743,30,3,0)
3^9.4
"KRN",8989.51,744,0)
LR MI GUI REPORT RIGHT MARGIN^Microbiology GUI Report Right Margin^0^^Microbiology GUI Report Right Margin^0
"KRN",8989.51,744,1)
N^80:240:0^Enter the value to be used for the right margin when formatting lab reports
"KRN",8989.51,744,20,0)
^8989.512^3^3^3080421^^^^
"KRN",8989.51,744,20,1,0)
This is the value to use for the right margin (column) when formatting
"KRN",8989.51,744,20,2,0)
microbiology type laboratory reports within a GUI display/client.
"KRN",8989.51,744,20,3,0)

"KRN",8989.51,744,30,0)
^8989.513I^3^3
"KRN",8989.51,744,30,1,0)
1^200
"KRN",8989.51,744,30,2,0)
2^4
"KRN",8989.51,744,30,3,0)
3^9.4
"KRN",8989.51,745,0)
LR AP GUI REPORT RIGHT MARGIN^AP GUI Report Right Margin^0^^AP GUI Report Right Margin^0
"KRN",8989.51,745,1)
N^80:240:0^Enter the value to be used for the right margin when foramtting lab reports
"KRN",8989.51,745,20,0)
^8989.512^3^3^3080421^^^^
"KRN",8989.51,745,20,1,0)
This is the value to use for the right margin (column) when formatting
"KRN",8989.51,745,20,2,0)
anatomic pathology type laboratory reports within a GUI display/client.
"KRN",8989.51,745,20,3,0)

"KRN",8989.51,745,30,0)
^8989.513I^3^3
"KRN",8989.51,745,30,1,0)
1^200
"KRN",8989.51,745,30,2,0)
2^4
"KRN",8989.51,745,30,3,0)
3^9.4
"KRN",8989.51,746,0)
LR MI VERIFY DISPLAY PROVIDER^Display Provider in Micro Result Entry^0^^Display Provider in Micro Result Entry^0
"KRN",8989.51,746,1)
Y^^Enter yes/no to display ordering provider information during micro result entry
"KRN",8989.51,746,20,0)
^8989.512^3^3^3111006^^^^
"KRN",8989.51,746,20,1,0)
This parameter allows the site/division/user to indicate if the ordering
"KRN",8989.51,746,20,2,0)
provider information should be displayed to the user during microbiology
"KRN",8989.51,746,20,3,0)
result data entry.
"KRN",8989.51,746,30,0)
^8989.513I^3^3
"KRN",8989.51,746,30,1,0)
1^200
"KRN",8989.51,746,30,2,0)
2^4
"KRN",8989.51,746,30,3,0)
3^9.4
"KRN",8989.51,748,0)
LR ACCESSION DEFAULT SPECIMEN^Default Accessioning Specimen^1^Lab Section^Default Specimen
"KRN",8989.51,748,1)
P^61^Select the Lab Section for this default specimen
"KRN",8989.51,748,4,0)
^8989.514^1^1
"KRN",8989.51,748,4,1,0)
AP DEFAULTS
"KRN",8989.51,748,4,"B","AP DEFAULTS",1)

"KRN",8989.51,748,6)
P^68
"KRN",8989.51,748,7)

"KRN",8989.51,748,8)
I $P(^(0),U,2)?1(1"SP",1"CY",1"EM")
"KRN",8989.51,748,20,0)
^8989.512^2^2^3081007^^^^
"KRN",8989.51,748,20,1,0)
Allows the package/facility/user to set a default topography presented
"KRN",8989.51,748,20,2,0)
to the user when accessioning specimens into the Laboratory system.
"KRN",8989.51,748,30,0)
^8989.513I^3^3
"KRN",8989.51,748,30,1,0)
1^200
"KRN",8989.51,748,30,2,0)
2^4
"KRN",8989.51,748,30,3,0)
3^9.4
"KRN",8989.51,749,0)
LR ACCESSION DEFAULT COL SAMP^Default Accessioning Collection Sample^1^Lab Section^Default Collection Sample
"KRN",8989.51,749,1)
P^62^Select the Lab Section for this default collection sample
"KRN",8989.51,749,4,0)
^8989.514^1^1
"KRN",8989.51,749,4,1,0)
AP DEFAULTS
"KRN",8989.51,749,4,"B","AP DEFAULTS",1)

"KRN",8989.51,749,6)
P^68
"KRN",8989.51,749,8)
I $P(^(0),U,2)?1(1"SP",1"CY",1"EM")
"KRN",8989.51,749,20,0)
^8989.512^4^4^3111216^^^^
"KRN",8989.51,749,20,1,0)
Allows the package/facility/user to set a default collection sample
"KRN",8989.51,749,20,2,0)
presented to the user when accessioning specimens into the Laboratory
"KRN",8989.51,749,20,3,0)
system.
"KRN",8989.51,749,20,4,0)

"KRN",8989.51,749,30,0)
^8989.513I^3^3
"KRN",8989.51,749,30,1,0)
1^200
"KRN",8989.51,749,30,2,0)
2^4
"KRN",8989.51,749,30,3,0)
3^9.4
"KRN",8989.51,750,0)
LR ACCESSION DEFAULT LAB TEST^Default Accessioning Lab Test^1^Lab Section^Default Laboratory Test
"KRN",8989.51,750,1)
P^60^Select the Lab Section for this default lab test
"KRN",8989.51,750,4,0)
^8989.514^1^1
"KRN",8989.51,750,4,1,0)
AP DEFAULTS
"KRN",8989.51,750,4,"B","AP DEFAULTS",1)

"KRN",8989.51,750,6)
P^68
"KRN",8989.51,750,8)
I $P(^(0),U,2)?1(1"SP",1"CY",1"EM")
"KRN",8989.51,750,20,0)
^8989.512^3^3^3081007^^^^
"KRN",8989.51,750,20,1,0)
Allows the package/facility/user to set a default laboratory test presented
"KRN",8989.51,750,20,2,0)
to the user when accessioning specimens into the Laboratory system.
"KRN",8989.51,750,20,3,0)

"KRN",8989.51,750,30,0)
^8989.513I^3^3
"KRN",8989.51,750,30,1,0)
1^200
"KRN",8989.51,750,30,2,0)
2^4
"KRN",8989.51,750,30,3,0)
3^9.4
"KRN",8989.51,751,0)
LR MANIFEST EXC PREV TEST^Exclude removed tests from building^1^Shipping Configuration^Exclude removed tests default^0
"KRN",8989.51,751,1)
Y^^Answer with yes/no to exclude previously removed tests building on manifest
"KRN",8989.51,751,6)
P^62.9
"KRN",8989.51,751,8)
I $P(^LAHM(62.9,Y,0),U,2)=DUZ(2),$P(^LAHM(62.9,Y,0),U,4)
"KRN",8989.51,751,20,0)
^8989.512^3^3^3120418^^^^
"KRN",8989.51,751,20,1,0)
Allows package or user to select the default value presented to the user 
"KRN",8989.51,751,20,2,0)
when building a shipping configuration to the prompt "Exclude previously
"KRN",8989.51,751,20,3,0)
removed tests from building?"
"KRN",8989.51,751,30,0)
^8989.513I^2^2
"KRN",8989.51,751,30,1,0)
1^200
"KRN",8989.51,751,30,2,0)
10^9.4
"KRN",8989.51,752,0)
LR VER DEFAULT PERFORMING LAB^Default Performing Laboratory^0^Institution^Default Performing Laboratory
"KRN",8989.51,752,1)
P^4^Choose the institution that you want presented as the default performing lab.
"KRN",8989.51,752,2)

"KRN",8989.51,752,3)
I $$SCRNPL^LRVERA(1)
"KRN",8989.51,752,20,0)
^8989.512^4^4^3081103^^
"KRN",8989.51,752,20,1,0)
Allows the user to designate a default performing lab that is
"KRN",8989.51,752,20,2,0)
presented to the user when specifying the performing lab. 
"KRN",8989.51,752,20,3,0)
Normally the lab software defaults to the user's institution.
"KRN",8989.51,752,20,4,0)
This parameter allows the user to specify a different institution.
"KRN",8989.51,752,30,0)
^8989.513I^1^1
"KRN",8989.51,752,30,1,0)
1^200
"KRN",8989.51,753,0)
LR AP SURGERY REFERENCE^Document Surgery Package Case Info^0^^Document Surgery Case Info^0
"KRN",8989.51,753,1)
Y^^Answer YES/NO if a source statement is included when copying surgical case info.
"KRN",8989.51,753,20,0)
^8989.512^3^3^3081126^
"KRN",8989.51,753,20,1,0)
Allows site/division to indicate when copying surgical case information from
"KRN",8989.51,753,20,2,0)
the Surgery package during surgical pathology login if a statement is also
"KRN",8989.51,753,20,3,0)
added to the copied information documenting the source of the copied information.
"KRN",8989.51,753,30,0)
^8989.513I^2^2
"KRN",8989.51,753,30,1,0)
1^4
"KRN",8989.51,753,30,2,0)
2^9.4
"KRN",8989.51,754,0)
LR MI VERIFY CPRS ALERT^Prompt CPRS Alert in Micro Result Entry^0^^Send CPRS Alert in Micro Result Entry^0
"KRN",8989.51,754,1)
S^0:Don't Ask;1:Ask - Default NO;2:Ask - Default YES^Specify if user should be prompted to send a CPRS Alert
"KRN",8989.51,754,4,0)
^8989.514^1^1
"KRN",8989.51,754,4,1,0)
MICRO
"KRN",8989.51,754,4,"B","MICRO",1)

"KRN",8989.51,754,20,0)
^8989.512^6^6^3090508^^
"KRN",8989.51,754,20,1,0)
Used to allow the user to determine if they want to be prompted
"KRN",8989.51,754,20,2,0)
to send a CPRS alert after editing a microbiology accession.
"KRN",8989.51,754,20,3,0)
 
"KRN",8989.51,754,20,4,0)
The user can indicate:
"KRN",8989.51,754,20,5,0)
 1. They do not want to be asked
"KRN",8989.51,754,20,6,0)
 2. They want to be asked with a default of YES/NO to send an alert.
"KRN",8989.51,754,30,0)
^8989.513I^3^3
"KRN",8989.51,754,30,1,0)
1^200
"KRN",8989.51,754,30,2,0)
2^4
"KRN",8989.51,754,30,3,0)
3^9.4
"KRN",8989.51,755,0)
LR CH VERIFY CPRS ALERT^Prompt CPRS Alert in CH Result Entry^0^^Send CPRS Alert in CH Result Entry^0
"KRN",8989.51,755,1)
S^0:Don't Ask;1:Ask - Default NO;2:Ask - Default YES^Specify if user should be prompted to send a CPRS Alert
"KRN",8989.51,755,4,0)
^8989.514^1^1
"KRN",8989.51,755,4,1,0)
CHEM/HEME
"KRN",8989.51,755,4,"B","CHEM/HEME",1)

"KRN",8989.51,755,20,0)
^^6^6^3090629^
"KRN",8989.51,755,20,1,0)
Used to allow the user to determine if they want to be prompted
"KRN",8989.51,755,20,2,0)
to send a CPRS alert after editing a Chem/Heme accession.
"KRN",8989.51,755,20,3,0)
 
"KRN",8989.51,755,20,4,0)
The user can indicate:
"KRN",8989.51,755,20,5,0)
 1. They do not want to be asked
"KRN",8989.51,755,20,6,0)
 2. They want to be asked with a default of YES/NO to send an alert.
"KRN",8989.51,755,30,0)
^8989.513I^3^3
"KRN",8989.51,755,30,1,0)
1^200
"KRN",8989.51,755,30,2,0)
2^4
"KRN",8989.51,755,30,3,0)
3^9.4
"KRN",8989.51,756,0)
LR REPORTS FACILITY PRINT^Print Reporting/Printing Facility^0^^Print Reporting/Printing Facility^0
"KRN",8989.51,756,1)
S^0:None;1:Reporting Facility;2:Printing Facility;3:Both^Should name of reporting and/or printing facility appear on Lab reports.
"KRN",8989.51,756,4,0)
^8989.514^1^1
"KRN",8989.51,756,4,1,0)
REPORTS
"KRN",8989.51,756,4,"B","REPORTS",1)

"KRN",8989.51,756,20,0)
^^6^6^3091110^
"KRN",8989.51,756,20,1,0)
 
"KRN",8989.51,756,20,2,0)
Determines if the name and address of the:
"KRN",8989.51,756,20,3,0)
 1. Laboratory that is responsible for the report display on the Laboratory report.
"KRN",8989.51,756,20,4,0)
 2. Facility where the report is printed display on the Laboratory report.
"KRN",8989.51,756,20,5,0)
 3. Both names display on the Laboratory report.
"KRN",8989.51,756,20,6,0)

"KRN",8989.51,756,30,0)
^8989.513I^3^2
"KRN",8989.51,756,30,2,0)
1^4
"KRN",8989.51,756,30,3,0)
2^9.4
"KRN",8989.51,757,0)
LR MANIFEST DEFLT ACCESSION^Use default accession dates^1^Shipping Configuration^Use default accession dates default^0
"KRN",8989.51,757,1)
Y^^Answer with yes/no to Use default accession dates prompt
"KRN",8989.51,757,6)
P^62.9
"KRN",8989.51,757,8)
I $P(^LAHM(62.9,Y,0),U,2)=DUZ(2),$P(^LAHM(62.9,Y,0),U,4)
"KRN",8989.51,757,20,0)
^8989.512^3^3^3120418^^^^
"KRN",8989.51,757,20,1,0)
Allows package or user to select the default value presented to the user 
"KRN",8989.51,757,20,2,0)
when building a shipping configuration to the prompt "Use default 
"KRN",8989.51,757,20,3,0)
accession dates?"
"KRN",8989.51,757,30,0)
^8989.513I^2^2
"KRN",8989.51,757,30,1,0)
1^200
"KRN",8989.51,757,30,2,0)
10^9.4
"KRN",8989.51,758,0)
LR ASK PERFORMING LAB MICRO^Ask Performing Lab Micro^0^^Ask Performing Lab for MICRO^0
"KRN",8989.51,758,1)
Y^^Enter yes to be prompted for Performing Lab for Microbiology tests.
"KRN",8989.51,758,4,0)
^8989.514^1^1
"KRN",8989.51,758,4,1,0)
PERFORMING LAB
"KRN",8989.51,758,4,"B","PERFORMING LAB",1)

"KRN",8989.51,758,6)

"KRN",8989.51,758,20,0)
^8989.512^5^5^3111028^^^^
"KRN",8989.51,758,20,1,0)
Enter Yes to be prompted for Performing Lab.
"KRN",8989.51,758,20,2,0)
Enter No to not be prompted for Performing Lab.
"KRN",8989.51,758,20,3,0)
The performing lab is the user's 'Default Performing Laboratory' parameter
"KRN",8989.51,758,20,4,0)
and if the parameter is not set for the user it defaults to the user's
"KRN",8989.51,758,20,5,0)
Institution (DUZ(2)).
"KRN",8989.51,758,30,0)
^8989.513I^3^3
"KRN",8989.51,758,30,1,0)
1^200
"KRN",8989.51,758,30,2,0)
2^4
"KRN",8989.51,758,30,3,0)
3^9.4
"KRN",8989.51,759,0)
LR ASK PERFORMING LAB AP^Ask Performing Lab AP^0^^Ask Performing Lab AP^0
"KRN",8989.51,759,1)
Y^^Enter yes to be prompted for Performing Lab for Anatomic Pathology tests.
"KRN",8989.51,759,4,0)
^8989.514^1^1
"KRN",8989.51,759,4,1,0)
PERFORMING LAB
"KRN",8989.51,759,4,"B","PERFORMING LAB",1)

"KRN",8989.51,759,6)

"KRN",8989.51,759,20,0)
^8989.512^5^5^3111205^^^^
"KRN",8989.51,759,20,1,0)
Enter Yes to be prompted for Performing Lab.
"KRN",8989.51,759,20,2,0)
Enter No to not be prompted for Performing Lab.
"KRN",8989.51,759,20,3,0)
The performing lab is the user's 'Default Performing Laboratory' parameter
"KRN",8989.51,759,20,4,0)
and if the parameter is not set for the user it defaults to the user's
"KRN",8989.51,759,20,5,0)
Institution (DUZ(2)).
"KRN",8989.51,759,30,0)
^8989.513I^3^3
"KRN",8989.51,759,30,1,0)
1^200
"KRN",8989.51,759,30,2,0)
2^4
"KRN",8989.51,759,30,3,0)
3^9.4
"KRN",8989.51,788,0)
LR AP DEFAULT ACCESSION NUMBER^Method of Assigning AP Accession Number^1^Lab Section^Default Method
"KRN",8989.51,788,1)
S^1:First Available Number;2:Next Available Sequential Number^Select the method the system will use to assign a default accession number.
"KRN",8989.51,788,4,0)
^8989.514^1^1
"KRN",8989.51,788,4,1,0)
AP DEFAULTS
"KRN",8989.51,788,4,"B","AP DEFAULTS",1)

"KRN",8989.51,788,6)
P^68
"KRN",8989.51,788,8)
I $P(^(0),U,2)?1(1"SP",1"CY",1"EM")
"KRN",8989.51,788,20,0)
^^21^21^3121031^
"KRN",8989.51,788,20,1,0)
When an Anatomic Pathology (AP) case is accessioned, this parameter will 
"KRN",8989.51,788,20,2,0)
control how the system should assign a default accession number to the 
"KRN",8989.51,788,20,3,0)
case being logged in. (Note: The user will still be able to override the 
"KRN",8989.51,788,20,4,0)
default, and select a different accession number, if they so choose).
"KRN",8989.51,788,20,5,0)
 
"KRN",8989.51,788,20,6,0)
'First Available Number' - The system will start searching from number 
"KRN",8989.51,788,20,7,0)
one, and the first available accession number that is found in that
"KRN",8989.51,788,20,8,0)
accession area will be used as the default accession number for the new
"KRN",8989.51,788,20,9,0)
case being logged in. Choosing this method will minimize the likelihood of
"KRN",8989.51,788,20,10,0)
having any gaps in the accession numbering, however, there is the
"KRN",8989.51,788,20,11,0)
possibility that some accessions might be out of sequence.
"KRN",8989.51,788,20,12,0)
 
"KRN",8989.51,788,20,13,0)
'Next Available Sequential Number' - The system will start searching from 
"KRN",8989.51,788,20,14,0)
the last accession number that was logged in, and the next available 
"KRN",8989.51,788,20,15,0)
number that is found in that accession area will be used as the default 
"KRN",8989.51,788,20,16,0)
accession number for the new case being logged in. Choosing this method 
"KRN",8989.51,788,20,17,0)
should better keep the accession numbers in sequence, but there is the 
"KRN",8989.51,788,20,18,0)
possibility that some gaps in the numbering might be introduced.
"KRN",8989.51,788,20,19,0)
 
"KRN",8989.51,788,20,20,0)
If no selection is made, the system will default to 'First Available 
"KRN",8989.51,788,20,21,0)
Number'.
"KRN",8989.51,788,30,0)
^8989.513I^1^1
"KRN",8989.51,788,30,1,0)
10^9.4
"KRN",8989.51,799,0)
LR WORKLIST DATA CLEANUP^Days to keep of instrument data^1^LOAD/WORK LIST^Number of days to keep in LAH global^0
"KRN",8989.51,799,1)
N^0:365:0^Answer with the number of days to keep in LAH before automatic purge
"KRN",8989.51,799,6)
P^68.2
"KRN",8989.51,799,8)

"KRN",8989.51,799,20,0)
2^8989.512^2^2^3160129^
"KRN",8989.51,799,20,1,0)
Allows site to specify the number of days of instrument data to keep in 
"KRN",8989.51,799,20,2,0)
LAH global before it's automatically purged by nightly process.
"KRN",8989.51,799,30,0)
^8989.513I^2^1
"KRN",8989.51,799,30,2,0)
10^9.4
"KRN",8989.51,800,-1)
0^1
"KRN",8989.51,800,0)
LR MI UI RELEASE DEFAULT^Default Micro Instrument Release Action^1^Load/Work List^Default load/work list verify method^0
"KRN",8989.51,800,1)
S^0:Quit;1:Release;2:Comments/Release;3:Edit (full)^Specify the default result release action presented to user.
"KRN",8989.51,800,4,0)
^8989.514^1^1
"KRN",8989.51,800,4,1,0)
MICRO UI
"KRN",8989.51,800,4,"B","MICRO UI",1)

"KRN",8989.51,800,6)
P^68.2
"KRN",8989.51,800,20,0)
^8989.512^7^7^3160902^^
"KRN",8989.51,800,20,1,0)
Used to designate the default release action presented to the user when
"KRN",8989.51,800,20,2,0)
verifying automated microbiology results in the "MI" subscript via options
"KRN",8989.51,800,20,3,0)
that use a load/work list. Parameter is associated with the load/worklist
"KRN",8989.51,800,20,4,0)
selected by the user.
"KRN",8989.51,800,20,5,0)
 
"KRN",8989.51,800,20,6,0)
Parameter can be set at the package or user level. 
"KRN",8989.51,800,20,7,0)
User level takes precedence over package level.
"KRN",8989.51,800,30,0)
^8989.513I^2^2
"KRN",8989.51,800,30,1,0)
1^200
"KRN",8989.51,800,30,2,0)
2^9.4
"KRN",8989.51,4662,0)
LR LAB COLLECT FUTURE^Lab Collect Days Allowed in Future^^^LAB COLLECT DAYS ALLOWED IN FUTURE^0
"KRN",8989.51,4662,1)
N^1:370^Enter the number of days allowed to collect 'Lab Collect' future orders.
"KRN",8989.51,4662,20,0)
^^2^2^3000211^^^^
"KRN",8989.51,4662,20,1,0)
This is the maximum number of days that 'Lab Collect' orders may be
"KRN",8989.51,4662,20,2,0)
placed.  The number may be specific to each hospital location.
"KRN",8989.51,4662,30,0)
^8989.513I^4^4
"KRN",8989.51,4662,30,1,0)
1^44
"KRN",8989.51,4662,30,2,0)
2^4
"KRN",8989.51,4662,30,3,0)
3^4.2
"KRN",8989.51,4662,30,4,0)
4^9.4
"KRN",8989.52,112,-1)
0^2
"KRN",8989.52,112,0)
LR USER^Lab User Level Parameters^200
"KRN",8989.52,112,10,0)
^8989.521IA^24^24
"KRN",8989.52,112,10,1,0)
100^LR VER DISPLAY PREV COMMENT
"KRN",8989.52,112,10,2,0)
200^LA7UTILA PARSE
"KRN",8989.52,112,10,3,0)
210^LA7UTILA USE BROWSER
"KRN",8989.52,112,10,4,0)
50^LR LABEL PRINTER DEFAULT
"KRN",8989.52,112,10,5,0)
220^LA7UTILA SHOIDS
"KRN",8989.52,112,10,6,0)
125^LRAPRES1 AP ALERT
"KRN",8989.52,112,10,7,0)
120^LR AP REPORT SELECTION
"KRN",8989.52,112,10,8,0)
300^LR CH GUI REPORT RIGHT MARGIN
"KRN",8989.52,112,10,9,0)
305^LR MI GUI REPORT RIGHT MARGIN
"KRN",8989.52,112,10,10,0)
310^LR AP GUI REPORT RIGHT MARGIN
"KRN",8989.52,112,10,11,0)
110^LR MI VERIFY DISPLAY PROVIDER
"KRN",8989.52,112,10,12,0)
130.1^LR ACCESSION DEFAULT SPECIMEN
"KRN",8989.52,112,10,13,0)
130.2^LR ACCESSION DEFAULT COL SAMP
"KRN",8989.52,112,10,14,0)
130.3^LR ACCESSION DEFAULT LAB TEST
"KRN",8989.52,112,10,15,0)
150.1^LR MANIFEST EXC PREV TEST
"KRN",8989.52,112,10,16,0)
102^LR VER DEFAULT PERFORMING LAB
"KRN",8989.52,112,10,17,0)
112.6^LR MI VERIFY CPRS ALERT
"KRN",8989.52,112,10,18,0)
112.3^LR CH VERIFY CPRS ALERT
"KRN",8989.52,112,10,19,0)
150.2^LR MANIFEST DEFLT ACCESSION
"KRN",8989.52,112,10,20,0)
900^LR MAPPING DEFAULT DIRECTORY
"KRN",8989.52,112,10,21,0)
900.1^LR MAPPING DEFAULT FILESPEC
"KRN",8989.52,112,10,22,0)
104^LR ASK PERFORMING LAB AP
"KRN",8989.52,112,10,23,0)
105^LR ASK PERFORMING LAB MICRO
"KRN",8989.52,112,10,24,0)
113^LR MI UI RELEASE DEFAULT
"KRN",8989.52,119,-1)
0^1
"KRN",8989.52,119,0)
LR PKG^Lab Package Level Parameters^9.4
"KRN",8989.52,119,10,0)
^8989.521IA^41^38
"KRN",8989.52,119,10,1,0)
1^LR COLLECT MONDAY
"KRN",8989.52,119,10,2,0)
2^LR COLLECT TUESDAY
"KRN",8989.52,119,10,3,0)
3^LR COLLECT WEDNESDAY
"KRN",8989.52,119,10,4,0)
4^LR COLLECT THURSDAY
"KRN",8989.52,119,10,5,0)
5^LR COLLECT FRIDAY
"KRN",8989.52,119,10,6,0)
6^LR COLLECT SATURDAY
"KRN",8989.52,119,10,7,0)
7^LR COLLECT SUNDAY
"KRN",8989.52,119,10,8,0)
8^LR IGNORE HOLIDAYS
"KRN",8989.52,119,10,10,0)
11^LR EGFR METHOD
"KRN",8989.52,119,10,11,0)
12^LR EGFR AGE CUTOFF
"KRN",8989.52,119,10,12,0)
13^LR EGFR RESULT SUPPRESS
"KRN",8989.52,119,10,13,0)
9.2^LR VER EA VERIFY BY UID
"KRN",8989.52,119,10,14,0)
9.1^LR VER EM VERIFY BY UID
"KRN",8989.52,119,10,15,0)
20^LRAPRES1 AP ALERT
"KRN",8989.52,119,10,16,0)
21^LR AP REPORT SELECTION
"KRN",8989.52,119,10,17,0)
24^LR AP SNOMED SYSTEM PRINT
"KRN",8989.52,119,10,18,0)
50^LR CH GUI REPORT RIGHT MARGIN
"KRN",8989.52,119,10,19,0)
52^LR MI GUI REPORT RIGHT MARGIN
"KRN",8989.52,119,10,20,0)
54^LR AP GUI REPORT RIGHT MARGIN
"KRN",8989.52,119,10,21,0)
9.3^LR MI VERIFY DISPLAY PROVIDER
"KRN",8989.52,119,10,22,0)
130.1^LR ACCESSION DEFAULT SPECIMEN
"KRN",8989.52,119,10,23,0)
130.2^LR ACCESSION DEFAULT COL SAMP
"KRN",8989.52,119,10,24,0)
130.3^LR ACCESSION DEFAULT LAB TEST
"KRN",8989.52,119,10,26,0)
25^LR AP SURGERY REFERENCE
"KRN",8989.52,119,10,27,0)
9.35^LR MI VERIFY CPRS ALERT
"KRN",8989.52,119,10,28,0)
9.36^LR CH VERIFY CPRS ALERT
"KRN",8989.52,119,10,29,0)
8.1^LR LAB COLLECT FUTURE
"KRN",8989.52,119,10,30,0)
8.11^LR MAX DAYS CONTINUOUS
"KRN",8989.52,119,10,31,0)
200^LR REPORTS FACILITY PRINT
"KRN",8989.52,119,10,33,0)
900^LR MAPPING DEFAULT DIRECTORY
"KRN",8989.52,119,10,34,0)
900.1^LR MAPPING DEFAULT FILESPEC
"KRN",8989.52,119,10,35,0)
22^LR ASK PERFORMING LAB AP
"KRN",8989.52,119,10,36,0)
23^LR ASK PERFORMING LAB MICRO
"KRN",8989.52,119,10,37,0)
150.1^LR MANIFEST EXC PREV TEST
"KRN",8989.52,119,10,38,0)
150.2^LR MANIFEST DEFLT ACCESSION
"KRN",8989.52,119,10,39,0)
120^LR AP DEFAULT ACCESSION NUMBER
"KRN",8989.52,119,10,40,0)
210^LR WORKLIST DATA CLEANUP
"KRN",8989.52,119,10,41,0)
9.305^LR MI UI RELEASE DEFAULT
"MBREQ")
0
"ORD",20,8989.51)
8989.51;20;;;PAR1E1^XPDTA2;PAR1F1^XPDIA3;PAR1E1^XPDIA3;PAR1F2^XPDIA3;;PAR1DEL^XPDIA3(%)
"ORD",20,8989.51,0)
PARAMETER DEFINITION
"ORD",21,8989.52)
8989.52;21;1;;PAR2E1^XPDTA2;PAR2F1^XPDIA3;PAR2E1^XPDIA3;PAR2F2^XPDIA3;;PAR2DEL^XPDIA3(%)
"ORD",21,8989.52,0)
PARAMETER TEMPLATE
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,20,0)
^9.402P^1^1
"PKG",26,20,1,0)
2^^LRXDRPT
"PKG",26,20,1,1)

"PKG",26,20,"B",2,1)

"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2950611
"PKG",26,22,1,"PAH",1,0)
474^3161220
"PKG",26,22,1,"PAH",1,1,0)
^^499^499^3161220
"PKG",26,22,1,"PAH",1,1,1,0)
Associated Patch: LA*5.2*90; which will be installed first as a part of
"PKG",26,22,1,"PAH",1,1,2,0)
this combined build.
"PKG",26,22,1,"PAH",1,1,3,0)
 
"PKG",26,22,1,"PAH",1,1,4,0)
The build for this patch is distributed as part of a multi-package build 
"PKG",26,22,1,"PAH",1,1,5,0)
that contains LA*5.2*90 and LR*5.2*474. The build contains functionality 
"PKG",26,22,1,"PAH",1,1,6,0)
that will allow Microbiology instrumentation to utilize the Lab Universal
"PKG",26,22,1,"PAH",1,1,7,0)
Interface. 
"PKG",26,22,1,"PAH",1,1,8,0)
 
"PKG",26,22,1,"PAH",1,1,9,0)
By utilizing the Universal Interface and Instrument Manager (IM) 
"PKG",26,22,1,"PAH",1,1,10,0)
middleware, sites will be able to switch from using class III interfaces
"PKG",26,22,1,"PAH",1,1,11,0)
to a UI standard interface. New functionality will be applied that will
"PKG",26,22,1,"PAH",1,1,12,0)
allow for an "MI" subscripted test to be added to the VistA Auto
"PKG",26,22,1,"PAH",1,1,13,0)
Instrument file (#64.2). There will also be enhanced result processing and
"PKG",26,22,1,"PAH",1,1,14,0)
verify/release functions (see LA*5.2*90 patch descriptions for additional
"PKG",26,22,1,"PAH",1,1,15,0)
details).
"PKG",26,22,1,"PAH",1,1,16,0)
 
"PKG",26,22,1,"PAH",1,1,17,0)
The build for this patch is distributed in support of the VistA 
"PKG",26,22,1,"PAH",1,1,18,0)
Laboratory Enhancement (VLE) Microbiology/Data Innovations interface 
"PKG",26,22,1,"PAH",1,1,19,0)
utilizing the Laboratory Universal Interface.
"PKG",26,22,1,"PAH",1,1,20,0)
 
"PKG",26,22,1,"PAH",1,1,21,0)
The patch provide new functionality provides for the Enter/Verify data 
"PKG",26,22,1,"PAH",1,1,22,0)
(Auto Instrument) option which will allow the technologist with the 
"PKG",26,22,1,"PAH",1,1,23,0)
authority to release three release actions.
"PKG",26,22,1,"PAH",1,1,24,0)
 
"PKG",26,22,1,"PAH",1,1,25,0)
 
"PKG",26,22,1,"PAH",1,1,26,0)
Blood Bank Review:
"PKG",26,22,1,"PAH",1,1,27,0)
==================
"PKG",26,22,1,"PAH",1,1,28,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*474 does not 
"PKG",26,22,1,"PAH",1,1,29,0)
contain any changes to the VISTA BLOOD BANK Software as defined by ProPath
"PKG",26,22,1,"PAH",1,1,30,0)
standard titled: BBM Team Review of VistA Patches.
"PKG",26,22,1,"PAH",1,1,31,0)
 
"PKG",26,22,1,"PAH",1,1,32,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*474 does not 
"PKG",26,22,1,"PAH",1,1,33,0)
alter or modify any software design safeguards or safety critical elements
"PKG",26,22,1,"PAH",1,1,34,0)
functions.
"PKG",26,22,1,"PAH",1,1,35,0)
 
"PKG",26,22,1,"PAH",1,1,36,0)
RISK ANALYSIS: Changes made by patch LR*5.2*474 have no effect on Blood 
"PKG",26,22,1,"PAH",1,1,37,0)
Bank software functionality, therefore RISK is none.
"PKG",26,22,1,"PAH",1,1,38,0)
 
"PKG",26,22,1,"PAH",1,1,39,0)
VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes 
"PKG",26,22,1,"PAH",1,1,40,0)
made, no specific validation requirements exist as a result of
"PKG",26,22,1,"PAH",1,1,41,0)
installation of this patch.
"PKG",26,22,1,"PAH",1,1,42,0)
 
"PKG",26,22,1,"PAH",1,1,43,0)
 
"PKG",26,22,1,"PAH",1,1,44,0)
Patch Components:
"PKG",26,22,1,"PAH",1,1,45,0)
-----------------
"PKG",26,22,1,"PAH",1,1,46,0)
None
"PKG",26,22,1,"PAH",1,1,47,0)
 
"PKG",26,22,1,"PAH",1,1,48,0)
Files & Fields Associated:
"PKG",26,22,1,"PAH",1,1,49,0)
 
"PKG",26,22,1,"PAH",1,1,50,0)
File Name (Number)         Field Name (Number)     New/Modified/Deleted
"PKG",26,22,1,"PAH",1,1,51,0)
------------------         -------------------     --------------------
"PKG",26,22,1,"PAH",1,1,52,0)
N/A
"PKG",26,22,1,"PAH",1,1,53,0)
 
"PKG",26,22,1,"PAH",1,1,54,0)
 
"PKG",26,22,1,"PAH",1,1,55,0)
Forms Associated:
"PKG",26,22,1,"PAH",1,1,56,0)
 
"PKG",26,22,1,"PAH",1,1,57,0)
Form Name                    File #               New/Modified/Deleted
"PKG",26,22,1,"PAH",1,1,58,0)
---------                    ------               --------------------
"PKG",26,22,1,"PAH",1,1,59,0)
N/A
"PKG",26,22,1,"PAH",1,1,60,0)
 
"PKG",26,22,1,"PAH",1,1,61,0)
 
"PKG",26,22,1,"PAH",1,1,62,0)
Mail Groups Associated:
"PKG",26,22,1,"PAH",1,1,63,0)
 
"PKG",26,22,1,"PAH",1,1,64,0)
Mail Group Name          New/Modified/Deleted
"PKG",26,22,1,"PAH",1,1,65,0)
---------------          --------------------
"PKG",26,22,1,"PAH",1,1,66,0)
N/A
"PKG",26,22,1,"PAH",1,1,67,0)
 
"PKG",26,22,1,"PAH",1,1,68,0)
 
"PKG",26,22,1,"PAH",1,1,69,0)
Options Associated:
"PKG",26,22,1,"PAH",1,1,70,0)
 
"PKG",26,22,1,"PAH",1,1,71,0)
Option Name            Type               New/Modified/Deleted
"PKG",26,22,1,"PAH",1,1,72,0)
-----------            ----               -------------------- 
"PKG",26,22,1,"PAH",1,1,73,0)
N/A
"PKG",26,22,1,"PAH",1,1,74,0)
 
"PKG",26,22,1,"PAH",1,1,75,0)
 
"PKG",26,22,1,"PAH",1,1,76,0)
Protocols Associated:
"PKG",26,22,1,"PAH",1,1,77,0)
 
"PKG",26,22,1,"PAH",1,1,78,0)
Protocol Name       New/Modified/Deleted
"PKG",26,22,1,"PAH",1,1,79,0)
-------------       -------------------- 
"PKG",26,22,1,"PAH",1,1,80,0)
N/A
"PKG",26,22,1,"PAH",1,1,81,0)
 
"PKG",26,22,1,"PAH",1,1,82,0)
 
"PKG",26,22,1,"PAH",1,1,83,0)
Security Keys Associated:
"PKG",26,22,1,"PAH",1,1,84,0)
 
"PKG",26,22,1,"PAH",1,1,85,0)
Security Key Name
"PKG",26,22,1,"PAH",1,1,86,0)
-----------------
"PKG",26,22,1,"PAH",1,1,87,0)
N/A
"PKG",26,22,1,"PAH",1,1,88,0)
 
"PKG",26,22,1,"PAH",1,1,89,0)
 
"PKG",26,22,1,"PAH",1,1,90,0)
Templates Associated:
"PKG",26,22,1,"PAH",1,1,91,0)
 
"PKG",26,22,1,"PAH",1,1,92,0)
Template Name      Type      File Name (Number)  New/Modified/Deleted 
"PKG",26,22,1,"PAH",1,1,93,0)
-------------      ----      ------------------  --------------------
"PKG",26,22,1,"PAH",1,1,94,0)
LR USER                      PARAMETER TEMPLATE  NEW
"PKG",26,22,1,"PAH",1,1,95,0)
                              FILE (8989.52)
"PKG",26,22,1,"PAH",1,1,96,0)
LR PKG                       PARAMETER TEMPLATE  NEW
"PKG",26,22,1,"PAH",1,1,97,0)
                              FILE (8989.52)
"PKG",26,22,1,"PAH",1,1,98,0)
 
"PKG",26,22,1,"PAH",1,1,99,0)
Parameters Associated:
"PKG",26,22,1,"PAH",1,1,100,0)
 
"PKG",26,22,1,"PAH",1,1,101,0)
Parameter Name            New/Modified/Deleted
"PKG",26,22,1,"PAH",1,1,102,0)
--------------            --------------------
"PKG",26,22,1,"PAH",1,1,103,0)
LR MI UI RELEASE DEFAULT   NEW
"PKG",26,22,1,"PAH",1,1,104,0)
 
"PKG",26,22,1,"PAH",1,1,105,0)
Additional Information:
"PKG",26,22,1,"PAH",1,1,106,0)
 
"PKG",26,22,1,"PAH",1,1,107,0)
N/A 
"PKG",26,22,1,"PAH",1,1,108,0)
 
"PKG",26,22,1,"PAH",1,1,109,0)
New Service Requests (NSRs):
"PKG",26,22,1,"PAH",1,1,110,0)
----------------------------  
"PKG",26,22,1,"PAH",1,1,111,0)
NSR #20131213 
"PKG",26,22,1,"PAH",1,1,112,0)
Carbapenem Resistant Enterobacteriaceae (CRE) Naming Conventions
"PKG",26,22,1,"PAH",1,1,113,0)
Electronic Interfacing of Automated Identification and Susceptibility 
"PKG",26,22,1,"PAH",1,1,114,0)
Testing Instruments
"PKG",26,22,1,"PAH",1,1,115,0)
 
"PKG",26,22,1,"PAH",1,1,116,0)
NSR #20140801
"PKG",26,22,1,"PAH",1,1,117,0)
Tracking Multi-Drug Resistant Organisms 
"PKG",26,22,1,"PAH",1,1,118,0)
Patient Safety Issues (PSIs):
"PKG",26,22,1,"PAH",1,1,119,0)
-----------------------------
"PKG",26,22,1,"PAH",1,1,120,0)
N/A
"PKG",26,22,1,"PAH",1,1,121,0)
 
"PKG",26,22,1,"PAH",1,1,122,0)
 
"PKG",26,22,1,"PAH",1,1,123,0)
Remedy Ticket(s) & Overview:
"PKG",26,22,1,"PAH",1,1,124,0)
----------------------------
"PKG",26,22,1,"PAH",1,1,125,0)
 
"PKG",26,22,1,"PAH",1,1,126,0)
N/A
"PKG",26,22,1,"PAH",1,1,127,0)
 
"PKG",26,22,1,"PAH",1,1,128,0)
Problem:
"PKG",26,22,1,"PAH",1,1,129,0)
-------
"PKG",26,22,1,"PAH",1,1,130,0)
N/A
"PKG",26,22,1,"PAH",1,1,131,0)
 
"PKG",26,22,1,"PAH",1,1,132,0)
Resolution:
"PKG",26,22,1,"PAH",1,1,133,0)
----------
"PKG",26,22,1,"PAH",1,1,134,0)
N/A
"PKG",26,22,1,"PAH",1,1,135,0)
 
"PKG",26,22,1,"PAH",1,1,136,0)
Test Sites:
"PKG",26,22,1,"PAH",1,1,137,0)
----------
"PKG",26,22,1,"PAH",1,1,138,0)
Tampa (alpha)
"PKG",26,22,1,"PAH",1,1,139,0)
Iowa City
"PKG",26,22,1,"PAH",1,1,140,0)
Lexington
"PKG",26,22,1,"PAH",1,1,141,0)
 
"PKG",26,22,1,"PAH",1,1,142,0)
Software and Documentation Retrieval Information 
"PKG",26,22,1,"PAH",1,1,143,0)
==============================
"PKG",26,22,1,"PAH",1,1,144,0)
VistA Laboratory patch LR*5.2*474 software is distributed by Host File,
"PKG",26,22,1,"PAH",1,1,145,0)
along with LA*5.2*90.  
"PKG",26,22,1,"PAH",1,1,146,0)
 
"PKG",26,22,1,"PAH",1,1,147,0)
The preferred method is to retrieve files from download.vista.domain.ext.
"PKG",26,22,1,"PAH",1,1,148,0)
This transmits the files from the first available server. Sites may 
"PKG",26,22,1,"PAH",1,1,149,0)
also elect to retrieve files directly from a specific server. 
"PKG",26,22,1,"PAH",1,1,150,0)
 
"PKG",26,22,1,"PAH",1,1,151,0)
Sites may retrieve the software and/or documentation directly using 
"PKG",26,22,1,"PAH",1,1,152,0)
Secure File Transfer Protocol (SFTP) from the ANONYMOUS.SOFTWARE directory
"PKG",26,22,1,"PAH",1,1,153,0)
at the following OI Field Offices:
"PKG",26,22,1,"PAH",1,1,154,0)
   
"PKG",26,22,1,"PAH",1,1,155,0)
Albany:                 fo-albany.domain.ext
"PKG",26,22,1,"PAH",1,1,156,0)
Hines:                  fo-hines.domain.ext    
"PKG",26,22,1,"PAH",1,1,157,0)
Salt Lake City:         fo-slc.domain.ext
"PKG",26,22,1,"PAH",1,1,158,0)
                                   
"PKG",26,22,1,"PAH",1,1,159,0)
File Name                   Contents               Retrieval Format 
"PKG",26,22,1,"PAH",1,1,160,0)
------------------          --------------------   ----------------
"PKG",26,22,1,"PAH",1,1,161,0)
LAB_MICRO_INTERFACE_        Host File containing   ASCII
"PKG",26,22,1,"PAH",1,1,162,0)
RELEASE_1_0.KID             KIDS software distribution 
"PKG",26,22,1,"PAH",1,1,163,0)
 
"PKG",26,22,1,"PAH",1,1,164,0)
LAB_MICRO_INTERFACE_RELEASE_1_0_DOCS.ZIP, which contains both .pdf and 
"PKG",26,22,1,"PAH",1,1,165,0)
.doc formatted file of the following documents. Retrieval format is 
"PKG",26,22,1,"PAH",1,1,166,0)
BINARY:
"PKG",26,22,1,"PAH",1,1,167,0)
 
"PKG",26,22,1,"PAH",1,1,168,0)
Lab Micro Interface Release 1.0 User Guide
"PKG",26,22,1,"PAH",1,1,169,0)
Lab Micro Interface Release 1.0 Technical Manual and Security Guide     
"PKG",26,22,1,"PAH",1,1,170,0)
Lab Micro Deployment, Installation, Back-Out, and Rollback 
"PKG",26,22,1,"PAH",1,1,171,0)
Guide           
"PKG",26,22,1,"PAH",1,1,172,0)
 
"PKG",26,22,1,"PAH",1,1,173,0)
The VistA Documentation Library (VDL) web site will also contain the 
"PKG",26,22,1,"PAH",1,1,174,0)
above referenced documents. This website is usually updated within 1-3
"PKG",26,22,1,"PAH",1,1,175,0)
days of the patch release date. The VDL web address for Laboratory
"PKG",26,22,1,"PAH",1,1,176,0)
Universal Interface user documentation is:
"PKG",26,22,1,"PAH",1,1,177,0)
http://www.domain.ext/vdl/application.asp?appid=120
"PKG",26,22,1,"PAH",1,1,178,0)
 
"PKG",26,22,1,"PAH",1,1,179,0)
Note: These previously released documents contain configuration and
"PKG",26,22,1,"PAH",1,1,180,0)
mapping information that is useful to the implementation of the Universal
"PKG",26,22,1,"PAH",1,1,181,0)
Interface for Microbiology tests.
"PKG",26,22,1,"PAH",1,1,182,0)
------------------------------------------------------------------------
"PKG",26,22,1,"PAH",1,1,183,0)
LEDI IV Installation Guide     LAB_LEDI_IV_IG.PDF            binary
"PKG",26,22,1,"PAH",1,1,184,0)
LEDI IV User Manual            LAB_LEDI_IV_UM.PDF            binary
"PKG",26,22,1,"PAH",1,1,185,0)
LEDI IV Update AP/MICRO        LEDI_IV__AP__MICRO_           binary
"PKG",26,22,1,"PAH",1,1,186,0)
Configuration Guide            CONFIGURATION_GUIDE.PDF       binary
"PKG",26,22,1,"PAH",1,1,187,0)
 
"PKG",26,22,1,"PAH",1,1,188,0)
     
"PKG",26,22,1,"PAH",1,1,189,0)
Patch Installation:
"PKG",26,22,1,"PAH",1,1,190,0)
-------------------
"PKG",26,22,1,"PAH",1,1,191,0)
 
"PKG",26,22,1,"PAH",1,1,192,0)
 
"PKG",26,22,1,"PAH",1,1,193,0)
Pre/Post Installation Overview:
"PKG",26,22,1,"PAH",1,1,194,0)
-------------------------------
"PKG",26,22,1,"PAH",1,1,195,0)
This patch, LR*5.2*474 is part of a combined build for the Laboratory 
"PKG",26,22,1,"PAH",1,1,196,0)
Microbiology Interface Enhancement patch.
"PKG",26,22,1,"PAH",1,1,197,0)
 
"PKG",26,22,1,"PAH",1,1,198,0)
This patch install must be coordinated with the Laboratory ADPAC to 
"PKG",26,22,1,"PAH",1,1,199,0)
ensure that all Lab Interface related activities are halted.
"PKG",26,22,1,"PAH",1,1,200,0)
 
"PKG",26,22,1,"PAH",1,1,201,0)
This installation will modify the Enter/verify data (auto instrument)
"PKG",26,22,1,"PAH",1,1,202,0)
option for the Microbiology Universal Interface process by providing the
"PKG",26,22,1,"PAH",1,1,203,0)
following release options:
"PKG",26,22,1,"PAH",1,1,204,0)
 
"PKG",26,22,1,"PAH",1,1,205,0)
Select RELEASE action: Edit (full)// ?
"PKG",26,22,1,"PAH",1,1,206,0)
 
"PKG",26,22,1,"PAH",1,1,207,0)
Entering 0 will abort review/release.
"PKG",26,22,1,"PAH",1,1,208,0)
Entering 1 will allow release 'as is' with no editing.
"PKG",26,22,1,"PAH",1,1,209,0)
Entering 2 will allow you to enter/edit comments then release.
"PKG",26,22,1,"PAH",1,1,210,0)
Entering 3 will allow you to enter full edit, similar to 'Results entry' 
"PKG",26,22,1,"PAH",1,1,211,0)
option.
"PKG",26,22,1,"PAH",1,1,212,0)
 
"PKG",26,22,1,"PAH",1,1,213,0)
Selections 1-3 will allow editing of status and approved date/time.
"PKG",26,22,1,"PAH",1,1,214,0)
 
"PKG",26,22,1,"PAH",1,1,215,0)
     Select one of the following:
"PKG",26,22,1,"PAH",1,1,216,0)
 
"PKG",26,22,1,"PAH",1,1,217,0)
          0         Quit
"PKG",26,22,1,"PAH",1,1,218,0)
          1         Release
"PKG",26,22,1,"PAH",1,1,219,0)
          2         Comments/Release
"PKG",26,22,1,"PAH",1,1,220,0)
          3         Edit (full)
"PKG",26,22,1,"PAH",1,1,221,0)
 
"PKG",26,22,1,"PAH",1,1,222,0)
 
"PKG",26,22,1,"PAH",1,1,223,0)
Pre-Installation Instructions:
"PKG",26,22,1,"PAH",1,1,224,0)
------------------------------
"PKG",26,22,1,"PAH",1,1,225,0)
Ensure that all Lab Interface activity has been halted !!
"PKG",26,22,1,"PAH",1,1,226,0)
 
"PKG",26,22,1,"PAH",1,1,227,0)
This would include:
"PKG",26,22,1,"PAH",1,1,228,0)
-Editing of an Auto Instrument file entry, 
"PKG",26,22,1,"PAH",1,1,229,0)
-Turn off the Auto Downloading process to prevent the building and 
"PKG",26,22,1,"PAH",1,1,230,0)
downloading 
"PKG",26,22,1,"PAH",1,1,231,0)
of a Load/Worklist to the Instrument Manager. 
"PKG",26,22,1,"PAH",1,1,232,0)
-Shut down all LA7UI logical links and any other HL7 process (HLZTCP or 
"PKG",26,22,1,"PAH",1,1,233,0)
HLLP processes) 
"PKG",26,22,1,"PAH",1,1,234,0)
to prevent the processing of result messages from the IM.
"PKG",26,22,1,"PAH",1,1,235,0)
 
"PKG",26,22,1,"PAH",1,1,236,0)
This patch may be installed with users on the system as long as the above 
"PKG",26,22,1,"PAH",1,1,237,0)
process controls have been followed.
"PKG",26,22,1,"PAH",1,1,238,0)
 
"PKG",26,22,1,"PAH",1,1,239,0)
 
"PKG",26,22,1,"PAH",1,1,240,0)
Installation Instructions:
"PKG",26,22,1,"PAH",1,1,241,0)
--------------------------
"PKG",26,22,1,"PAH",1,1,242,0)
This patch may be installed with users on the system although it is 
"PKG",26,22,1,"PAH",1,1,243,0)
 recommended that it be installed during non-peak hours to minimize 
"PKG",26,22,1,"PAH",1,1,244,0)
 potential disruption to users.  This patch should take less than 5 
"PKG",26,22,1,"PAH",1,1,245,0)
 minutes to install.
"PKG",26,22,1,"PAH",1,1,246,0)
 
"PKG",26,22,1,"PAH",1,1,247,0)
   
"PKG",26,22,1,"PAH",1,1,248,0)
1.      DOWNLOAD HOST KIDS FILE 
"PKG",26,22,1,"PAH",1,1,249,0)
        ----------------------
"PKG",26,22,1,"PAH",1,1,250,0)
        Download the KIDS file LAB_MICRO_INTERFACE_RELEASE_1_0.KID from 
"PKG",26,22,1,"PAH",1,1,251,0)
        the ANONYMOUS.SOFTWARE directory of Albany, Hines, or the Salt
"PKG",26,22,1,"PAH",1,1,252,0)
        Lake OIFO to the appropriate directory on your system.
"PKG",26,22,1,"PAH",1,1,253,0)
 
"PKG",26,22,1,"PAH",1,1,254,0)
2.      LOAD DISTRIBUTION 
"PKG",26,22,1,"PAH",1,1,255,0)
        -----------------
"PKG",26,22,1,"PAH",1,1,256,0)
        Use the 'LOAD A DISTRIBUTION' option on the KIDS 
"PKG",26,22,1,"PAH",1,1,257,0)
        INSTALLATION menu, and enter:  the directory onto which you 
"PKG",26,22,1,"PAH",1,1,258,0)
        have downloaded the host file, followed by 
"PKG",26,22,1,"PAH",1,1,259,0)
        LAB_MICRO_INTERFACE_RELEASE_1_0.KID, the host file name. 
"PKG",26,22,1,"PAH",1,1,260,0)
 
"PKG",26,22,1,"PAH",1,1,261,0)
3.      START UP KIDS 
"PKG",26,22,1,"PAH",1,1,262,0)
        -------------
"PKG",26,22,1,"PAH",1,1,263,0)
        Start up the Kernel Installation and Distribution System Menu 
"PKG",26,22,1,"PAH",1,1,264,0)
        [XPD MAIN]:
"PKG",26,22,1,"PAH",1,1,265,0)
        Edits and Distribution ...  
"PKG",26,22,1,"PAH",1,1,266,0)
        Utilities ...  
"PKG",26,22,1,"PAH",1,1,267,0)
        Installation ...  
"PKG",26,22,1,"PAH",1,1,268,0)
 
"PKG",26,22,1,"PAH",1,1,269,0)
        Select Kernel Installation & Distribution System Option: 
"PKG",26,22,1,"PAH",1,1,270,0)
        Installation 
"PKG",26,22,1,"PAH",1,1,271,0)
        -------------
"PKG",26,22,1,"PAH",1,1,272,0)
 
"PKG",26,22,1,"PAH",1,1,273,0)
            Load a Distribution 
"PKG",26,22,1,"PAH",1,1,274,0)
            Print Transport Global 
"PKG",26,22,1,"PAH",1,1,275,0)
            Compare Transport Global to Current System 
"PKG",26,22,1,"PAH",1,1,276,0)
            Verify Checksums in Transport Global 
"PKG",26,22,1,"PAH",1,1,277,0)
            Install Package(s) 
"PKG",26,22,1,"PAH",1,1,278,0)
            Restart Install of Package(s) 
"PKG",26,22,1,"PAH",1,1,279,0)
            Unload a Distribution 
"PKG",26,22,1,"PAH",1,1,280,0)
            Backup a Transport Global 
"PKG",26,22,1,"PAH",1,1,281,0)
 
"PKG",26,22,1,"PAH",1,1,282,0)
4.      Select Installation Option: 
"PKG",26,22,1,"PAH",1,1,283,0)
     ---------------------------
"PKG",26,22,1,"PAH",1,1,284,0)
   
"PKG",26,22,1,"PAH",1,1,285,0)
   a.   Use the Load a Distribution and select Host File: 
"PKG",26,22,1,"PAH",1,1,286,0)
        LAB_MICRO_INTERFACE_RELEASE_1_0.KID
"PKG",26,22,1,"PAH",1,1,287,0)
        b.  Backup a Transport Global - This option will create a backup
"PKG",26,22,1,"PAH",1,1,288,0)
        message of any routines exported with this patch. It will not
"PKG",26,22,1,"PAH",1,1,289,0)
        backup any other changes such as DDs or templates.
"PKG",26,22,1,"PAH",1,1,290,0)
        c.  Compare Transport Global to Current System - This option will
"PKG",26,22,1,"PAH",1,1,291,0)
        allow you to view all changes that will be made when this patch
"PKG",26,22,1,"PAH",1,1,292,0)
        is installed.  It compares all components of this patch
"PKG",26,22,1,"PAH",1,1,293,0)
        (routines, DDs, templates, etc.).
"PKG",26,22,1,"PAH",1,1,294,0)
        d.  Verify Checksums in Transport Global - This option will allow
"PKG",26,22,1,"PAH",1,1,295,0)
        you to ensure the integrity of the routines that are in the
"PKG",26,22,1,"PAH",1,1,296,0)
        transport global.
"PKG",26,22,1,"PAH",1,1,297,0)
     
"PKG",26,22,1,"PAH",1,1,298,0)
 
"PKG",26,22,1,"PAH",1,1,299,0)
5.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
"PKG",26,22,1,"PAH",1,1,300,0)
    Install? NO//'     
"PKG",26,22,1,"PAH",1,1,301,0)
    Respond: NO
"PKG",26,22,1,"PAH",1,1,302,0)
 
"PKG",26,22,1,"PAH",1,1,303,0)
6.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
"PKG",26,22,1,"PAH",1,1,304,0)
    NO//'
"PKG",26,22,1,"PAH",1,1,305,0)
    Respond: NO
"PKG",26,22,1,"PAH",1,1,306,0)
 
"PKG",26,22,1,"PAH",1,1,307,0)
7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
"PKG",26,22,1,"PAH",1,1,308,0)
    and Protocols? NO//' 
"PKG",26,22,1,"PAH",1,1,309,0)
    Respond: NO
"PKG",26,22,1,"PAH",1,1,310,0)
 
"PKG",26,22,1,"PAH",1,1,311,0)
8.  If prompted 'Delay Install (Minutes): (0 - 60): 0//' 
"PKG",26,22,1,"PAH",1,1,312,0)
    Respond: 0.
"PKG",26,22,1,"PAH",1,1,313,0)
 
"PKG",26,22,1,"PAH",1,1,314,0)
 
"PKG",26,22,1,"PAH",1,1,315,0)
Post-Installation Instructions:
"PKG",26,22,1,"PAH",1,1,316,0)
-------------------------------
"PKG",26,22,1,"PAH",1,1,317,0)
ADPAC and Microbiology Tech instructions:
"PKG",26,22,1,"PAH",1,1,318,0)
 
"PKG",26,22,1,"PAH",1,1,319,0)
1.      After data has been received from the Data Innovations for an 
"PKG",26,22,1,"PAH",1,1,320,0)
automated Microbiology instrument, the releasing Microbiology Technologist
"PKG",26,22,1,"PAH",1,1,321,0)
will be presented with the following options:
"PKG",26,22,1,"PAH",1,1,322,0)
 
"PKG",26,22,1,"PAH",1,1,323,0)
Select RELEASE action: Edit (full)// ?
"PKG",26,22,1,"PAH",1,1,324,0)
 
"PKG",26,22,1,"PAH",1,1,325,0)
Entering 0 will abort review/release.
"PKG",26,22,1,"PAH",1,1,326,0)
Entering 1 will allow release 'as is' with no editing.
"PKG",26,22,1,"PAH",1,1,327,0)
Entering 2 will allow you to enter/edit comments then release.
"PKG",26,22,1,"PAH",1,1,328,0)
Entering 3 will allow you to enter full edit, similar to 'Results entry' 
"PKG",26,22,1,"PAH",1,1,329,0)
option.
"PKG",26,22,1,"PAH",1,1,330,0)
Selections 1-3 will allow editing of status and approved date/time.
"PKG",26,22,1,"PAH",1,1,331,0)
 
"PKG",26,22,1,"PAH",1,1,332,0)
     Select one of the following:
"PKG",26,22,1,"PAH",1,1,333,0)
 
"PKG",26,22,1,"PAH",1,1,334,0)
          0         Quit
"PKG",26,22,1,"PAH",1,1,335,0)
          1         Release
"PKG",26,22,1,"PAH",1,1,336,0)
          2         Comments/Release
"PKG",26,22,1,"PAH",1,1,337,0)
          3         Edit (full)
"PKG",26,22,1,"PAH",1,1,338,0)
 
"PKG",26,22,1,"PAH",1,1,339,0)
Select RELEASE action: Edit (full)// 0  Quit
"PKG",26,22,1,"PAH",1,1,340,0)
 
"PKG",26,22,1,"PAH",1,1,341,0)
Do you want to PURGE these results? NO//
"PKG",26,22,1,"PAH",1,1,342,0)
 
"PKG",26,22,1,"PAH",1,1,343,0)
 
"PKG",26,22,1,"PAH",1,1,344,0)
2.       A new parameter LR MI UI RELEASE DEFAULT is included with this 
"PKG",26,22,1,"PAH",1,1,345,0)
patch and it provides the VAMC site the ability to set the release default
"PKG",26,22,1,"PAH",1,1,346,0)
at the package and user levels.
"PKG",26,22,1,"PAH",1,1,347,0)
 
"PKG",26,22,1,"PAH",1,1,348,0)
Example configuration:
"PKG",26,22,1,"PAH",1,1,349,0)
 
"PKG",26,22,1,"PAH",1,1,350,0)
Select OE/RR interface parameters <TEST ACCOUNT> Option: Select Lab
"PKG",26,22,1,"PAH",1,1,351,0)
 liaison menu <TEST ACCOUNT> Option: OE/RR interface parameters
"PKG",26,22,1,"PAH",1,1,352,0)
 
"PKG",26,22,1,"PAH",1,1,353,0)
 
"PKG",26,22,1,"PAH",1,1,354,0)
   EH     Edit HOSPITAL SITE parameters
"PKG",26,22,1,"PAH",1,1,355,0)
   AS     Edit a lab administration schedule
"PKG",26,22,1,"PAH",1,1,356,0)
   IL     Inquire to a Lab administration schedule
"PKG",26,22,1,"PAH",1,1,357,0)
   CC     Update CPRS Parameters ...
"PKG",26,22,1,"PAH",1,1,358,0)
 
"PKG",26,22,1,"PAH",1,1,359,0)
Select OE/RR interface parameters <TEST ACCOUNT> Option: CC Update CPRS
"PKG",26,22,1,"PAH",1,1,360,0)
Parameters
"PKG",26,22,1,"PAH",1,1,361,0)
 
"PKG",26,22,1,"PAH",1,1,362,0)
 
"PKG",26,22,1,"PAH",1,1,363,0)
   PA     Update CPRS with Lab order parameters
"PKG",26,22,1,"PAH",1,1,364,0)
   SI     Update CPRS with Single Lab test
"PKG",26,22,1,"PAH",1,1,365,0)
   UP     Update CPRS with all Lab test parameters
"PKG",26,22,1,"PAH",1,1,366,0)
   DO     Domain Level Parameter Edit
"PKG",26,22,1,"PAH",1,1,367,0)
   LO     Location Level Parameter Edit
"PKG",26,22,1,"PAH",1,1,368,0)
   PP     Package Level Parameter Edit
"PKG",26,22,1,"PAH",1,1,369,0)
   UL     Display Lab User Parameters
"PKG",26,22,1,"PAH",1,1,370,0)
 
"PKG",26,22,1,"PAH",1,1,371,0)
Select Update CPRS Parameters <TEST ACCOUNT> Option: PP Package Level 
"PKG",26,22,1,"PAH",1,1,372,0)
Parameter Edit
"PKG",26,22,1,"PAH",1,1,373,0)
 
"PKG",26,22,1,"PAH",1,1,374,0)
Lab Package Level Parameters for Package: LAB SERVICE
"PKG",26,22,1,"PAH",1,1,375,0)
--------------------------------------------------------------------------
"PKG",26,22,1,"PAH",1,1,376,0)
Collect on Monday                                 YES
"PKG",26,22,1,"PAH",1,1,377,0)
Collect on Tuesday                                YES
"PKG",26,22,1,"PAH",1,1,378,0)
Collect on Wednesday                              YES
"PKG",26,22,1,"PAH",1,1,379,0)
Collect on Thursday                               YES
"PKG",26,22,1,"PAH",1,1,380,0)
Collect on Friday                                 YES
"PKG",26,22,1,"PAH",1,1,381,0)
Collect on Saturday                               YES
"PKG",26,22,1,"PAH",1,1,382,0)
Collect on Sunday                                 YES
"PKG",26,22,1,"PAH",1,1,383,0)
Lab Collects on Holidays                          YES
"PKG",26,22,1,"PAH",1,1,384,0)
Lab Collect Days Allowed in Future                7
"PKG",26,22,1,"PAH",1,1,385,0)
Maximum Days for Continuous Orders                
"PKG",26,22,1,"PAH",1,1,386,0)
Default manual verify method                      
"PKG",26,22,1,"PAH",1,1,387,0)
Default load/work list verify method
"PKG",26,22,1,"PAH",1,1,388,0)
Display Provider in Micro Result Entry            
"PKG",26,22,1,"PAH",1,1,389,0)
Default Micro Instrument Release Action VITEK     Edit (full)
"PKG",26,22,1,"PAH",1,1,390,0)
Prompt CPRS Alert in Micro Result Entry           Don't Ask
"PKG",26,22,1,"PAH",1,1,391,0)
Prompt CPRS Alert in CH Result Entry              
"PKG",26,22,1,"PAH",1,1,392,0)
EGFR Creatinine IDMS-traceable Method             
"PKG",26,22,1,"PAH",1,1,393,0)
EGFR Patient's Age Cutoff                         
"PKG",26,22,1,"PAH",1,1,394,0)
EGFR Result Cutoff                                
"PKG",26,22,1,"PAH",1,1,395,0)
Send an alert after AP release                    
"PKG",26,22,1,"PAH",1,1,396,0)
Default AP Report Selection Prompt                
"PKG",26,22,1,"PAH",1,1,397,0)
Ask Performing Lab AP                             YES
"PKG",26,22,1,"PAH",1,1,398,0)
Ask Performing Lab Micro                          YES
"PKG",26,22,1,"PAH",1,1,399,0)
Print SNOMED Code System                          SNOMED I
"PKG",26,22,1,"PAH",1,1,400,0)
Document Surgery Package Case Info                NO
"PKG",26,22,1,"PAH",1,1,401,0)
Chemistry GUI Report Right Margin                 
"PKG",26,22,1,"PAH",1,1,402,0)
Microbiology GUI Report Right Margin              
"PKG",26,22,1,"PAH",1,1,403,0)
AP GUI Report Right Margin                        
"PKG",26,22,1,"PAH",1,1,404,0)
Method of Assigning AP Accession Number
"PKG",26,22,1,"PAH",1,1,405,0)
Default Accessioning Specimen
"PKG",26,22,1,"PAH",1,1,406,0)
Default Accessioning Collection Sample
"PKG",26,22,1,"PAH",1,1,407,0)
Default Accessioning Lab Test
"PKG",26,22,1,"PAH",1,1,408,0)
Exclude removed tests from building
"PKG",26,22,1,"PAH",1,1,409,0)
Use default accession dates
"PKG",26,22,1,"PAH",1,1,410,0)
Print Reporting/Printing Facility                 None
"PKG",26,22,1,"PAH",1,1,411,0)
Days to keep of instrument data 1                 2
"PKG",26,22,1,"PAH",1,1,412,0)
Lab STS Default Mapping Files Directory           
"PKG",26,22,1,"PAH",1,1,413,0)
Lab STS Default Mapping Filespec                  *.TXT
"PKG",26,22,1,"PAH",1,1,414,0)
--------------------------------------------------------------------------
"PKG",26,22,1,"PAH",1,1,415,0)
COLLECT MONDAY: YES// 
"PKG",26,22,1,"PAH",1,1,416,0)
COLLECT TUESDAY: YES// 
"PKG",26,22,1,"PAH",1,1,417,0)
COLLECT WEDNESDAY: YES// 
"PKG",26,22,1,"PAH",1,1,418,0)
COLLECT THURSDAY: YES// 
"PKG",26,22,1,"PAH",1,1,419,0)
COLLECT FRIDAY: YES// 
"PKG",26,22,1,"PAH",1,1,420,0)
COLLECT SATURDAY: YES// 
"PKG",26,22,1,"PAH",1,1,421,0)
COLLECT SUNDAY: YES// 
"PKG",26,22,1,"PAH",1,1,422,0)
IGNORE HOLIDAYS: YES// 
"PKG",26,22,1,"PAH",1,1,423,0)
LAB COLLECT DAYS ALLOWED IN FUTURE: 7// 
"PKG",26,22,1,"PAH",1,1,424,0)
MAXIMUM DAYS FOR CONTINUOUS ORDERS: 
"PKG",26,22,1,"PAH",1,1,425,0)
Default manual verify method: 
"PKG",26,22,1,"PAH",1,1,426,0)
 
"PKG",26,22,1,"PAH",1,1,427,0)
For Default load/work list verify method -
"PKG",26,22,1,"PAH",1,1,428,0)
Select Accession Area: 
"PKG",26,22,1,"PAH",1,1,429,0)
Display Provider in Micro Result Entry: 
"PKG",26,22,1,"PAH",1,1,430,0)
 
"PKG",26,22,1,"PAH",1,1,431,0)
For Default Micro Instrument Release Action -
"PKG",26,22,1,"PAH",1,1,432,0)
Select Load/Work List: VITEK  
"PKG",26,22,1,"PAH",1,1,433,0)
 
"PKG",26,22,1,"PAH",1,1,434,0)
Load/Work List: VITEK//   VITEK   VITEK
"PKG",26,22,1,"PAH",1,1,435,0)
Default load/work list verify method: Edit (full)// 
"PKG",26,22,1,"PAH",1,1,436,0)
 
"PKG",26,22,1,"PAH",1,1,437,0)
For Default Micro Instrument Release Action -
"PKG",26,22,1,"PAH",1,1,438,0)
Select Load/Work List: 
"PKG",26,22,1,"PAH",1,1,439,0)
   NOTE: This parameter will allow the default release action to be
"PKG",26,22,1,"PAH",1,1,440,0)
   Load/Work List specific.
"PKG",26,22,1,"PAH",1,1,441,0)
 
"PKG",26,22,1,"PAH",1,1,442,0)
 
"PKG",26,22,1,"PAH",1,1,443,0)
3.       Setting the default release action for a user:
"PKG",26,22,1,"PAH",1,1,444,0)
 
"PKG",26,22,1,"PAH",1,1,445,0)
Select Information-help menu <TEST ACCOUNT> Option: PP  General Lab User 
"PKG",26,22,1,"PAH",1,1,446,0)
Parameters
"PKG",26,22,1,"PAH",1,1,447,0)
 
"PKG",26,22,1,"PAH",1,1,448,0)
Lab User Level Parameters for User: TECH,MICRO
"PKG",26,22,1,"PAH",1,1,449,0)
--------------------------------------------------------------------------
"PKG",26,22,1,"PAH",1,1,450,0)
Default lab label printer
"PKG",26,22,1,"PAH",1,1,451,0)
Display previous comments for test
"PKG",26,22,1,"PAH",1,1,452,0)
Default Performing Laboratory                     
"PKG",26,22,1,"PAH",1,1,453,0)
Ask Performing Lab AP                             
"PKG",26,22,1,"PAH",1,1,454,0)
Ask Performing Lab Micro                          
"PKG",26,22,1,"PAH",1,1,455,0)
Display Provider in Micro Result Entry            
"PKG",26,22,1,"PAH",1,1,456,0)
Prompt CPRS Alert in CH Result Entry              
"PKG",26,22,1,"PAH",1,1,457,0)
Prompt CPRS Alert in Micro Result Entry           
"PKG",26,22,1,"PAH",1,1,458,0)
Default Micro Instrument Release Action VITEK     Release
"PKG",26,22,1,"PAH",1,1,459,0)
Default AP Report Selection Prompt                
"PKG",26,22,1,"PAH",1,1,460,0)
Send an alert after AP release                    
"PKG",26,22,1,"PAH",1,1,461,0)
Default Accessioning Specimen
"PKG",26,22,1,"PAH",1,1,462,0)
Default Accessioning Collection Sample
"PKG",26,22,1,"PAH",1,1,463,0)
Default Accessioning Lab Test
"PKG",26,22,1,"PAH",1,1,464,0)
Exclude removed tests from building
"PKG",26,22,1,"PAH",1,1,465,0)
Use default accession dates
"PKG",26,22,1,"PAH",1,1,466,0)
Lab Messaging - Parse HL7 Messages                
"PKG",26,22,1,"PAH",1,1,467,0)
Lab Messaging - Display using Browser             
"PKG",26,22,1,"PAH",1,1,468,0)
Lab Messaging - Show Identifiers                  
"PKG",26,22,1,"PAH",1,1,469,0)
Chemistry GUI Report Right Margin                 
"PKG",26,22,1,"PAH",1,1,470,0)
Microbiology GUI Report Right Margin              132
"PKG",26,22,1,"PAH",1,1,471,0)
AP GUI Report Right Margin                        240
"PKG",26,22,1,"PAH",1,1,472,0)
Lab STS Default Mapping Files Directory           
"PKG",26,22,1,"PAH",1,1,473,0)
Lab STS Default Mapping Filespec                  
"PKG",26,22,1,"PAH",1,1,474,0)
--------------------------------------------------------------------------
"PKG",26,22,1,"PAH",1,1,475,0)
 
"PKG",26,22,1,"PAH",1,1,476,0)
For Default lab label printer -
"PKG",26,22,1,"PAH",1,1,477,0)
Select Division:  
"PKG",26,22,1,"PAH",1,1,478,0)
 
"PKG",26,22,1,"PAH",1,1,479,0)
For Display previous comments for test -
"PKG",26,22,1,"PAH",1,1,480,0)
Select Laboratory Test: 
"PKG",26,22,1,"PAH",1,1,481,0)
Default Performing Laboratory: 
"PKG",26,22,1,"PAH",1,1,482,0)
Ask Performing Lab AP: 
"PKG",26,22,1,"PAH",1,1,483,0)
Ask Performing Lab for MICRO: 
"PKG",26,22,1,"PAH",1,1,484,0)
Display Provider in Micro Result Entry: 
"PKG",26,22,1,"PAH",1,1,485,0)
Send CPRS Alert in CH Result Entry: 
"PKG",26,22,1,"PAH",1,1,486,0)
Send CPRS Alert in Micro Result Entry: 
"PKG",26,22,1,"PAH",1,1,487,0)
 
"PKG",26,22,1,"PAH",1,1,488,0)
For Default Micro Instrument Release Action -
"PKG",26,22,1,"PAH",1,1,489,0)
Select Load/Work List: VITEK  
"PKG",26,22,1,"PAH",1,1,490,0)
Are you adding VITEK as a new Load/Work List? Yes//   YES
"PKG",26,22,1,"PAH",1,1,491,0)
 
"PKG",26,22,1,"PAH",1,1,492,0)
Load/Work List: VITEK//   VITEK   VITEK
"PKG",26,22,1,"PAH",1,1,493,0)
Default load/work list verify method: Release
"PKG",26,22,1,"PAH",1,1,494,0)
 
"PKG",26,22,1,"PAH",1,1,495,0)
For Default Micro Instrument Release Action -
"PKG",26,22,1,"PAH",1,1,496,0)
Select Load/Work List:   
"PKG",26,22,1,"PAH",1,1,497,0)
   NOTE: This parameter will allow the default release action to be
"PKG",26,22,1,"PAH",1,1,498,0)
   Load/Work List specific.
"PKG",26,22,1,"PAH",1,1,499,0)
AP Report Selection Default: ^
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
7
"RTN","LRMIEDZ2")
0^7^B72283385
"RTN","LRMIEDZ2",1,0)
LRMIEDZ2 ;DALIO/JMC - MICROBIOLOGY EDIT ROUTINE ;09/07/16  08:06
"RTN","LRMIEDZ2",2,0)
 ;;5.2;LAB SERVICE;**23,104,242,295,350,427,474**;Sep 27, 1994;Build 14
"RTN","LRMIEDZ2",3,0)
 ;
"RTN","LRMIEDZ2",4,0)
 ; from LRFAST,LRMIEDZ,LRVER
"RTN","LRMIEDZ2",5,0)
 ;
"RTN","LRMIEDZ2",6,0)
 ; Reference to ^DIE global supported by ICR #5002
"RTN","LRMIEDZ2",7,0)
 ;
"RTN","LRMIEDZ2",8,0)
PAT ;
"RTN","LRMIEDZ2",9,0)
 N LRUID
"RTN","LRMIEDZ2",10,0)
 ;
"RTN","LRMIEDZ2",11,0)
 I '$D(LRAN) S LRAN=""
"RTN","LRMIEDZ2",12,0)
 F  S:LRAN="" LRAN=$$ACCPRMPT(LRAA,LRAD) Q:LRAN<0  D
"RTN","LRMIEDZ2",13,0)
 . I +LRAN=0 D  Q
"RTN","LRMIEDZ2",14,0)
 . . D QUES
"RTN","LRMIEDZ2",15,0)
 . . S LRAN=""
"RTN","LRMIEDZ2",16,0)
 . ;
"RTN","LRMIEDZ2",17,0)
 . S LRANOK=1
"RTN","LRMIEDZ2",18,0)
 . S LRCAPOK=1
"RTN","LRMIEDZ2",19,0)
 . D PAT1
"RTN","LRMIEDZ2",20,0)
 . L -^LR(LRDFN,"MI",LRIDT)
"RTN","LRMIEDZ2",21,0)
 . D LEDI^LRVR0
"RTN","LRMIEDZ2",22,0)
 . K LRTS
"RTN","LRMIEDZ2",23,0)
 . I LRCAPOK&($P(LRPARAM,U,14)) D ^LRCAPV1
"RTN","LRMIEDZ2",24,0)
 . S LRAN=""
"RTN","LRMIEDZ2",25,0)
 ;
"RTN","LRMIEDZ2",26,0)
 ;
"RTN","LRMIEDZ2",27,0)
 Q
"RTN","LRMIEDZ2",28,0)
 ;
"RTN","LRMIEDZ2",29,0)
 ;
"RTN","LRMIEDZ2",30,0)
ACCPRMPT(LRAA,LRAD) ;Prompt for accession number or UID
"RTN","LRMIEDZ2",31,0)
 ;
"RTN","LRMIEDZ2",32,0)
 ; Call with LRAA = Accession Area
"RTN","LRMIEDZ2",33,0)
 ;           LRAD = Accession Date
"RTN","LRMIEDZ2",34,0)
 ;
"RTN","LRMIEDZ2",35,0)
 ; Accession number/UID entered must have the same accession
"RTN","LRMIEDZ2",36,0)
 ; area and date as LRAA and LRAD
"RTN","LRMIEDZ2",37,0)
 ;
"RTN","LRMIEDZ2",38,0)
 ;   Returns LRAN = 0  (not valid input)
"RTN","LRMIEDZ2",39,0)
 ;                = -1 (user wants to exit - they entered up-arrow, pressed the Enter/Return key, or timed out)
"RTN","LRMIEDZ2",40,0)
 ;                = >0 (valid accession number)
"RTN","LRMIEDZ2",41,0)
 ;
"RTN","LRMIEDZ2",42,0)
 N DIR,DIRUT,DTOUT,DUOUT,LRAN,LRANOK,LRX,LRY,X,Y
"RTN","LRMIEDZ2",43,0)
 ;
"RTN","LRMIEDZ2",44,0)
 S LRAN=0
"RTN","LRMIEDZ2",45,0)
 ;
"RTN","LRMIEDZ2",46,0)
 W !!
"RTN","LRMIEDZ2",47,0)
 ;
"RTN","LRMIEDZ2",48,0)
 S DIR(0)="FO^1:30",DIR("A")="Select MICROBIOLOGY Accession or UID"
"RTN","LRMIEDZ2",49,0)
 S DIR("?")="^D QUES^LRMIEDZ2"
"RTN","LRMIEDZ2",50,0)
 D ^DIR
"RTN","LRMIEDZ2",51,0)
 I Y=""!$D(DIRUT) Q -1
"RTN","LRMIEDZ2",52,0)
 S LRX=Y
"RTN","LRMIEDZ2",53,0)
 ;
"RTN","LRMIEDZ2",54,0)
 S:$L(LRX)>2 ^DISV(DUZ,"LRACC")=LRX
"RTN","LRMIEDZ2",55,0)
 S:LRX=" " LRX=$S($D(^DISV(DUZ,"LRACC")):^("LRACC"),1:"?")
"RTN","LRMIEDZ2",56,0)
 ;
"RTN","LRMIEDZ2",57,0)
 I $D(^LRO(68,"C",LRX)) D  Q LRAN
"RTN","LRMIEDZ2",58,0)
 . S LRY=$$CHECKUID^LRWU4(LRX,"MI")
"RTN","LRMIEDZ2",59,0)
 . I 'LRY Q
"RTN","LRMIEDZ2",60,0)
 . I $P(LRY,U,2)'=LRAA!($P(LRY,U,3)'=LRAD) Q
"RTN","LRMIEDZ2",61,0)
 . S LRAN=$P(LRY,U,4)
"RTN","LRMIEDZ2",62,0)
 . W " (",$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,.2)),"^"),")"
"RTN","LRMIEDZ2",63,0)
 ;
"RTN","LRMIEDZ2",64,0)
 S LRANOK=1
"RTN","LRMIEDZ2",65,0)
 S X=LRX
"RTN","LRMIEDZ2",66,0)
 D LRANX^LRMIU4
"RTN","LRMIEDZ2",67,0)
 I 'LRANOK S LRAN=0
"RTN","LRMIEDZ2",68,0)
 ;
"RTN","LRMIEDZ2",69,0)
 Q LRAN
"RTN","LRMIEDZ2",70,0)
 ;
"RTN","LRMIEDZ2",71,0)
 ;
"RTN","LRMIEDZ2",72,0)
QUES ;
"RTN","LRMIEDZ2",73,0)
 ;
"RTN","LRMIEDZ2",74,0)
 W $C(7),!,"Enter the accession number or the unique identifier (UID)."
"RTN","LRMIEDZ2",75,0)
 W !,"If entering the accession number, enter just the number portion."
"RTN","LRMIEDZ2",76,0)
 W !,?5," e.g., if the accession is MICRO 13 30173, enter 30173."
"RTN","LRMIEDZ2",77,0)
 W !,?5," Only accessions from subscript MI are selectable."
"RTN","LRMIEDZ2",78,0)
 W !,"If entering the UID, enter the entire 10-15 characters."
"RTN","LRMIEDZ2",79,0)
 W !
"RTN","LRMIEDZ2",80,0)
 W !,"The accession number/UID entered must have the same accession"
"RTN","LRMIEDZ2",81,0)
 W !,"area and date as the first accession entered."
"RTN","LRMIEDZ2",82,0)
 ;
"RTN","LRMIEDZ2",83,0)
 Q
"RTN","LRMIEDZ2",84,0)
 ;
"RTN","LRMIEDZ2",85,0)
 ;
"RTN","LRMIEDZ2",86,0)
PAT1 ; Called from above and LRFAST
"RTN","LRMIEDZ2",87,0)
 ;
"RTN","LRMIEDZ2",88,0)
 ; Set LRANOK if called from LRFAST and not set
"RTN","LRMIEDZ2",89,0)
 I $G(LRANOK)="" N LRANOK S LRANOK=1
"RTN","LRMIEDZ2",90,0)
 ;
"RTN","LRMIEDZ2",91,0)
 S LRDFN=+^LRO(68,LRAA,1,LRAD,1,LRAN,0)
"RTN","LRMIEDZ2",92,0)
 S LRUID=$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,.3)),"^")
"RTN","LRMIEDZ2",93,0)
 S LRIDT=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),"^",5),LRCDT=+^(3),LREAL=$P(^(3),U,2),LRI=+$O(^(5,0)),LRSPEC=$S($D(^(LRI,0)):+^(0),1:"")
"RTN","LRMIEDZ2",94,0)
 ;
"RTN","LRMIEDZ2",95,0)
 I '$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,0)) D  Q
"RTN","LRMIEDZ2",96,0)
 . W !,"No tests associated with this accession" S LRANOK=0
"RTN","LRMIEDZ2",97,0)
 . Q:$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,.2))," ")=$P(^LRO(68,LRAA,0),U,11)
"RTN","LRMIEDZ2",98,0)
 . W !,"Verify with accession #: ",$G(^LRO(68,LRAA,1,LRAD,1,LRAN,.2))
"RTN","LRMIEDZ2",99,0)
 ;
"RTN","LRMIEDZ2",100,0)
 ; Insure DILOCKTM is defined
"RTN","LRMIEDZ2",101,0)
 I $G(DILOCKTM)="" D
"RTN","LRMIEDZ2",102,0)
 . N DIQUIET
"RTN","LRMIEDZ2",103,0)
 . S DIQUIET=1 D DT^DICRW
"RTN","LRMIEDZ2",104,0)
 ;
"RTN","LRMIEDZ2",105,0)
 L +^LR(LRDFN,"MI",LRIDT):DILOCKTM
"RTN","LRMIEDZ2",106,0)
 I '$T W !!?10,"Someone else is editing this accession ",!,$C(7) S LRANOK=0 Q
"RTN","LRMIEDZ2",107,0)
 I '$D(^LR(LRDFN,"MI",LRIDT,0)) D BB S (LRCAPOK,LRANOK)=0 Q
"RTN","LRMIEDZ2",108,0)
 S (LRBG0,Y(0))=^LR(LRDFN,"MI",LRIDT,0)
"RTN","LRMIEDZ2",109,0)
 ;
"RTN","LRMIEDZ2",110,0)
 D PATINFO
"RTN","LRMIEDZ2",111,0)
 ;
"RTN","LRMIEDZ2",112,0)
 I $$GET^XPAR("USR^DIV^PKG","LR MI VERIFY DISPLAY PROVIDER",1,"Q") D PROV
"RTN","LRMIEDZ2",113,0)
 ;
"RTN","LRMIEDZ2",114,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT
"RTN","LRMIEDZ2",115,0)
 I $P(^LR(LRDFN,"MI",LRIDT,0),U,3) D
"RTN","LRMIEDZ2",116,0)
 . S DIR("A",1)="Final report has been verified by microbiology supervisor."
"RTN","LRMIEDZ2",117,0)
 . S DIR("A",2)="If you proceed in editing, this report will need to be reverified."
"RTN","LRMIEDZ2",118,0)
 . S DIR("B")="NO"
"RTN","LRMIEDZ2",119,0)
 E  S DIR("B")="YES"
"RTN","LRMIEDZ2",120,0)
 S DIR(0)="YO",DIR("A")="Edit this accession"
"RTN","LRMIEDZ2",121,0)
 D ^DIR
"RTN","LRMIEDZ2",122,0)
 I Y<1 S (LRCAPOK,LRANOK)=0 D ASKXQA W ! Q
"RTN","LRMIEDZ2",123,0)
 ;
"RTN","LRMIEDZ2",124,0)
 ;
"RTN","LRMIEDZ2",125,0)
AUDRTN ;
"RTN","LRMIEDZ2",126,0)
 ; Also called from LRVR0 when verifying Lab UI instrument results and user wants to do full edit.
"RTN","LRMIEDZ2",127,0)
 ;
"RTN","LRMIEDZ2",128,0)
 I $P(^LR(LRDFN,"MI",LRIDT,0),U,3)!$P(^LR(LRDFN,"MI",LRIDT,0),U,9) S LRUNDO=1
"RTN","LRMIEDZ2",129,0)
 ;
"RTN","LRMIEDZ2",130,0)
 D EC^LRMIEDZ4
"RTN","LRMIEDZ2",131,0)
 I N=0 W !,"No Tests on Accession" S (LRCAPOK,LRANOK)=0 Q
"RTN","LRMIEDZ2",132,0)
 I '$D(LRNPTP) D
"RTN","LRMIEDZ2",133,0)
 . I N=1 S LRI=1 Q
"RTN","LRMIEDZ2",134,0)
 . N DIR,DIROUT,DIRUT,DTOUT,DUOUT
"RTN","LRMIEDZ2",135,0)
 . S DIR(0)="NO^1:"_N_":0",DIR("A")="Select Test",DIR("B")=1
"RTN","LRMIEDZ2",136,0)
 . D ^DIR
"RTN","LRMIEDZ2",137,0)
 . I Y<1 S (LRCAPOK,LRANOK)=0 Q
"RTN","LRMIEDZ2",138,0)
 . S LRI=Y
"RTN","LRMIEDZ2",139,0)
 I LRANOK=0 Q
"RTN","LRMIEDZ2",140,0)
 I LRTX(LRI)="" W !,"EDIT CODE IN FILE 60 NOT DEFINED.",! S (LRCAPOK,LRANOK)=0 Q
"RTN","LRMIEDZ2",141,0)
 ;
"RTN","LRMIEDZ2",142,0)
 S LRTS=LRTS(LRI) D:LRUNDO UNDO^LRMIEDZ
"RTN","LRMIEDZ2",143,0)
 K DR
"RTN","LRMIEDZ2",144,0)
 S DA=LRIDT,DA(1)=LRDFN,DIE="^LR(LRDFN,""MI"","
"RTN","LRMIEDZ2",145,0)
 ;
"RTN","LRMIEDZ2",146,0)
 S LRSB=$S(LRTX(LRI)["11.5":1,LRTX(LRI)["23":11,LRTX(LRI)["19":8,LRTX(LRI)["15":5,LRTX(LRI)["34":16,1:"")
"RTN","LRMIEDZ2",147,0)
 S LRFIFO=LRTX(LRI)["FIFO",(LREND,LRSAME)=0 D:'LRFIFO TIME^LRMIEDZ3 I LREND K DR Q
"RTN","LRMIEDZ2",148,0)
 ;
"RTN","LRMIEDZ2",149,0)
 S LRSSC=$P(^LR(LRDFN,"MI",LRIDT,0),U,5)_U_$P(^(0),U,11)
"RTN","LRMIEDZ2",150,0)
 ;
"RTN","LRMIEDZ2",151,0)
 ;
"RTN","LRMIEDZ2",152,0)
AUDPT ;
"RTN","LRMIEDZ2",153,0)
 ; Check for "B" x-ref on #.01 field.
"RTN","LRMIEDZ2",154,0)
 F I=3,6,9,12,17 I $D(^LR(LRDFN,"MI",LRIDT,I)),'$D(^LR(LRDFN,"MI",LRIDT,I,"B")) D SETBINDX^LRMIBUG(LRDFN,LRIDT,I)
"RTN","LRMIEDZ2",155,0)
 ;
"RTN","LRMIEDZ2",156,0)
 I $D(LRLEDI) Q
"RTN","LRMIEDZ2",157,0)
 ;
"RTN","LRMIEDZ2",158,0)
 ; Set Y(0) for backward compatibility
"RTN","LRMIEDZ2",159,0)
 S Y(0)=LRBG0
"RTN","LRMIEDZ2",160,0)
 ;
"RTN","LRMIEDZ2",161,0)
 ; Execute code does not contain an edit template but fields/code
"RTN","LRMIEDZ2",162,0)
 I LRTX(LRI)'["S DR=""[",LRSB D  Q
"RTN","LRMIEDZ2",163,0)
 . X LRTX(LRI)
"RTN","LRMIEDZ2",164,0)
 . I $G(LREDITTYPE)=3 Q  ; If called from LRVR0 then return to complete post actions.
"RTN","LRMIEDZ2",165,0)
 . D EDIT^LRRPLU(LRDFN,LRSS,LRIDT) ; performing lab
"RTN","LRMIEDZ2",166,0)
 . D UPDATE^LRPXRM(LRDFN,"MI",LRIDT) ; clinical reminders
"RTN","LRMIEDZ2",167,0)
 . D:'LREND EC3 K DR
"RTN","LRMIEDZ2",168,0)
 . D:LRUNDO&$P($G(^LR(LRDFN,"MI",LRIDT,LRSB)),U)'="" VT^LRMIUT1
"RTN","LRMIEDZ2",169,0)
 . D ASKXQA ; ask CPRS alerts
"RTN","LRMIEDZ2",170,0)
 ;
"RTN","LRMIEDZ2",171,0)
 ; Execute code contains an edit template name
"RTN","LRMIEDZ2",172,0)
 S (X,DR)=$P($P(LRTX(LRI),"[",2),"]",1) S:X'="" X=+$O(^DIE("B",X,0)) I X<1,'$D(^DIE(+X,"DR",2,63.05)) W !,DR," template doesn't exist for Microbiology." K DR  Q
"RTN","LRMIEDZ2",173,0)
 S J=1 F  S J=+$O(^DIE(X,"DR",J)) Q:J<1  S K=+$O(^DIE(X,"DR",J,0)),DR(J-1,K)=^DIE(X,"DR",J,K)
"RTN","LRMIEDZ2",174,0)
 S DR=DR(1,63.05)
"RTN","LRMIEDZ2",175,0)
 D ^DIE
"RTN","LRMIEDZ2",176,0)
 ;
"RTN","LRMIEDZ2",177,0)
 ; If called from LRVR0 then return to complete post actions.
"RTN","LRMIEDZ2",178,0)
 I $G(LREDITTYPE)=3 Q
"RTN","LRMIEDZ2",179,0)
 ;
"RTN","LRMIEDZ2",180,0)
 ; Ask for performing laboratory assignment
"RTN","LRMIEDZ2",181,0)
 D EDIT^LRRPLU(LRDFN,LRSS,LRIDT)
"RTN","LRMIEDZ2",182,0)
 ;
"RTN","LRMIEDZ2",183,0)
 ; Call clincial reminders
"RTN","LRMIEDZ2",184,0)
 D UPDATE^LRPXRM(LRDFN,"MI",LRIDT)
"RTN","LRMIEDZ2",185,0)
 ;
"RTN","LRMIEDZ2",186,0)
 D EC3
"RTN","LRMIEDZ2",187,0)
 ;
"RTN","LRMIEDZ2",188,0)
 ; Ask to send CPRS alert
"RTN","LRMIEDZ2",189,0)
 D ASKXQA
"RTN","LRMIEDZ2",190,0)
 ;
"RTN","LRMIEDZ2",191,0)
 K DR
"RTN","LRMIEDZ2",192,0)
 Q
"RTN","LRMIEDZ2",193,0)
 ;
"RTN","LRMIEDZ2",194,0)
 ;
"RTN","LRMIEDZ2",195,0)
BB ;
"RTN","LRMIEDZ2",196,0)
 W !,">>>>ERROR - NO ENTRY IN FILE #63 - PLEASE NOTIFY SYSTEM MANAGER<<^ <<<",!
"RTN","LRMIEDZ2",197,0)
 Q
"RTN","LRMIEDZ2",198,0)
 ;
"RTN","LRMIEDZ2",199,0)
 ;
"RTN","LRMIEDZ2",200,0)
EC3 ;
"RTN","LRMIEDZ2",201,0)
 S LRSSCN=$P(^LR(LRDFN,"MI",LRIDT,0),U,5)_U_$P(^(0),U,11)
"RTN","LRMIEDZ2",202,0)
 D:LRSSCN'=LRSSC UPDATE
"RTN","LRMIEDZ2",203,0)
 K LRSSCN,LRSSC S LRSAME=1
"RTN","LRMIEDZ2",204,0)
 D TIME^LRMIEDZ3 D:'LREND STF^LRMIUT
"RTN","LRMIEDZ2",205,0)
 Q
"RTN","LRMIEDZ2",206,0)
 ;
"RTN","LRMIEDZ2",207,0)
 ;
"RTN","LRMIEDZ2",208,0)
UPDATE ;
"RTN","LRMIEDZ2",209,0)
 D CHECK
"RTN","LRMIEDZ2",210,0)
 K LRSSCOM,LRSSCOM1,LRSSCA,LRSSCAA,LRSSCAY,LRSSCAN,LRSSCOD,LRSSCON
"RTN","LRMIEDZ2",211,0)
 Q
"RTN","LRMIEDZ2",212,0)
 ;
"RTN","LRMIEDZ2",213,0)
 ;
"RTN","LRMIEDZ2",214,0)
CHECK ;
"RTN","LRMIEDZ2",215,0)
 S LRSSCA=$P(^LR(LRDFN,"MI",LRIDT,0),U,6),LRSSCAA=+$O(^LRO(68,"B",$P(LRSSCA," "),0))
"RTN","LRMIEDZ2",216,0)
 S X=$P(LRSSCA," ",2) D ^%DT S LRSSCAY=Y,LRSSCAN=$P(LRSSCA," ",3)
"RTN","LRMIEDZ2",217,0)
 S J=0 F  S J=+$O(^LRO(68,LRSSCAA,1,LRSSCAY,1,LRSSCAN,5,J)) Q:J<1  I ^(J,0)=LRSSC S ^(0)=LRSSCN Q
"RTN","LRMIEDZ2",218,0)
 I J<1 Q
"RTN","LRMIEDZ2",219,0)
 S LRSSCOD=$P(^LRO(68,LRSSCAA,1,LRSSCAY,1,LRSSCAN,0),U,4),LRSSCON=^(.1)
"RTN","LRMIEDZ2",220,0)
 S J=0 F  S J=+$O(^LRO(69,LRSSCOD,1,J)) Q:J<1  I $D(^(J,.1)),^(.1)=LRSSCON D ORDER Q
"RTN","LRMIEDZ2",221,0)
 Q
"RTN","LRMIEDZ2",222,0)
 ;
"RTN","LRMIEDZ2",223,0)
 ;
"RTN","LRMIEDZ2",224,0)
ORDER ;
"RTN","LRMIEDZ2",225,0)
 S $P(^LRO(69,LRSSCOD,1,J,0),U,3)=$P(LRSSCN,U,2)
"RTN","LRMIEDZ2",226,0)
 S K=0 F  S K=+$O(^LRO(69,LRSSCOD,1,J,4,K)) Q:K<1  I ^(K,0)=LRSSC S ^(0)=LRSSCN Q
"RTN","LRMIEDZ2",227,0)
 Q
"RTN","LRMIEDZ2",228,0)
 ;
"RTN","LRMIEDZ2",229,0)
 ;
"RTN","LRMIEDZ2",230,0)
PATINFO ; Display patient information
"RTN","LRMIEDZ2",231,0)
 S LRDPF=$P(^LR(LRDFN,0),U,2),DFN=$P(^(0),U,3),LRUNDO=0
"RTN","LRMIEDZ2",232,0)
 D PT^LRX
"RTN","LRMIEDZ2",233,0)
 W !!,?5,PNM,"   SSN: ",SSN
"RTN","LRMIEDZ2",234,0)
 I LRDPF=2 W "   LOC: ",$S(LRWRD'="":LRWRD,1:$S($D(^LR(LRDFN,.1)):^(.1),1:"??")),!
"RTN","LRMIEDZ2",235,0)
 ;
"RTN","LRMIEDZ2",236,0)
 I LRDPF?1(1"62.3",1"67.2",1"67.3",1"67.4") Q
"RTN","LRMIEDZ2",237,0)
 ;
"RTN","LRMIEDZ2",238,0)
 W !,"Pat Info: ",$P($G(^LR(LRDFN,.091)),U)
"RTN","LRMIEDZ2",239,0)
 W ?34," Sex: ",$S(SEX="M":"MALE",SEX="F":"FEMALE",1:SEX)
"RTN","LRMIEDZ2",240,0)
 W ?48," Age: ",$$CALCAGE^LRRPU(DOB,LRCDT)," as of ",$$FMTE^XLFDT(LRCDT,"1D")
"RTN","LRMIEDZ2",241,0)
 Q
"RTN","LRMIEDZ2",242,0)
 ;
"RTN","LRMIEDZ2",243,0)
 ;
"RTN","LRMIEDZ2",244,0)
PROV ; Display provider and contact numbers.
"RTN","LRMIEDZ2",245,0)
 N LRPRAC,LRX
"RTN","LRMIEDZ2",246,0)
 S LRPRAC=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,8)
"RTN","LRMIEDZ2",247,0)
 I LRPRAC>0,LRPRAC=+LRPRAC D GETS^DIQ(200,LRPRAC_",",".01;.132;.137;.138","E","LRPRAC(LRPRAC)","LRERR")
"RTN","LRMIEDZ2",248,0)
 ;
"RTN","LRMIEDZ2",249,0)
 W !,"Provider: "
"RTN","LRMIEDZ2",250,0)
 ;
"RTN","LRMIEDZ2",251,0)
 I LRPRAC,$D(LRPRAC(LRPRAC,200)) D  Q
"RTN","LRMIEDZ2",252,0)
 . W LRPRAC(LRPRAC,200,LRPRAC_",",.01,"E"),?40," Voice pager: ",LRPRAC(LRPRAC,200,LRPRAC_",",.137,"E")
"RTN","LRMIEDZ2",253,0)
 . W !,"   Phone: ",LRPRAC(LRPRAC,200,LRPRAC_",",.132,"E"),?38," Digital pager: ",LRPRAC(LRPRAC,200,LRPRAC_",",.138,"E")
"RTN","LRMIEDZ2",254,0)
 ;
"RTN","LRMIEDZ2",255,0)
 S LRX=""
"RTN","LRMIEDZ2",256,0)
 I LRPRAC?1"REF:"1.AN!(LRDPF=67) S LRX=$$REFDOC^LRRP1(LRDFN,LRSS,LRIDT)
"RTN","LRMIEDZ2",257,0)
 I LRX'="" W LRX
"RTN","LRMIEDZ2",258,0)
 E  W LRPRAC
"RTN","LRMIEDZ2",259,0)
 ;
"RTN","LRMIEDZ2",260,0)
 Q
"RTN","LRMIEDZ2",261,0)
 ;
"RTN","LRMIEDZ2",262,0)
 ;
"RTN","LRMIEDZ2",263,0)
ASKXQA ; Determine if user should be ask to send CPRS Alert
"RTN","LRMIEDZ2",264,0)
 ;
"RTN","LRMIEDZ2",265,0)
 N LRDEFAULT
"RTN","LRMIEDZ2",266,0)
 ;
"RTN","LRMIEDZ2",267,0)
 ; No CPRS alert for non-PATIENT file (#2) patients
"RTN","LRMIEDZ2",268,0)
 I +LRDPF'=2 Q
"RTN","LRMIEDZ2",269,0)
 ;
"RTN","LRMIEDZ2",270,0)
 S LRDEFAULT=$$GET^XPAR("USR^DIV^PKG","LR MI VERIFY CPRS ALERT",1,"Q")
"RTN","LRMIEDZ2",271,0)
 I LRDEFAULT>0 D ASKXQA^LR7ORB3(LRDFN,"MI",LRIDT,LRUID,LRDEFAULT)
"RTN","LRMIEDZ2",272,0)
 ;
"RTN","LRMIEDZ2",273,0)
 Q
"RTN","LRVR0")
0^6^B154172378
"RTN","LRVR0",1,0)
LRVR0 ;DALOI/STAFF - LEDI MI/AP Data Verification ;12/20/16  09:51
"RTN","LRVR0",2,0)
 ;;5.2;LAB SERVICE;**350,427,474**;Sep 27, 1994;Build 14
"RTN","LRVR0",3,0)
 ;
"RTN","LRVR0",4,0)
 ; LEDI MI/AP Auto-instrument verification
"RTN","LRVR0",5,0)
 ; Called from LRVR
"RTN","LRVR0",6,0)
 Q
"RTN","LRVR0",7,0)
 ;
"RTN","LRVR0",8,0)
 ;
"RTN","LRVR0",9,0)
EN ;
"RTN","LRVR0",10,0)
 N EAMODE,LA7X,LRANYAA,LRAO,LRBG0,LRCFL,LRCMNT,LRDINST,LREND,LRFIFO,LRFLAG,LRINTYPE,LRLEDI,LRLLT,LRMIDEF,LRMIOTH
"RTN","LRVR0",11,0)
 N LRNOP,LRONESPC,LRONETST,LRPG,LRPTP,LRSAME,LRSB,LRSS,LRTM60,LRTX,LRUID,LRWRDVEW,LRX,X,Y
"RTN","LRVR0",12,0)
 ;
"RTN","LRVR0",13,0)
 S LRSS=$P($G(^LRO(68,+$G(LRAA),0)),U,2) Q:LRSS=""
"RTN","LRVR0",14,0)
 I LRSS'?1(1"MI",1"SP",1"CY",1"EM") Q
"RTN","LRVR0",15,0)
 ;
"RTN","LRVR0",16,0)
 S LRDINST=+$$KSP^XUPARAM("INST")
"RTN","LRVR0",17,0)
 S LRLEDI=1,LRCFL="",EAMODE=1,LRWRDVEW=1
"RTN","LRVR0",18,0)
 S LRX=$S(+$P($G(^LAB(69.9,1,0)),U,7):+$P(^(0),U,7),1:1)
"RTN","LRVR0",19,0)
 S LRANYAA=+$P($G(^LRO(68.2,LRLL,10,LRPROF,0)),"^",3)
"RTN","LRVR0",20,0)
 I $G(LRVBY)=1 D ACC
"RTN","LRVR0",21,0)
 I $G(LRVBY)=2 S LRUID="" D UID
"RTN","LRVR0",22,0)
 D CLEAN
"RTN","LRVR0",23,0)
 Q
"RTN","LRVR0",24,0)
 ;
"RTN","LRVR0",25,0)
 ;
"RTN","LRVR0",26,0)
UID ;UID driven look-up
"RTN","LRVR0",27,0)
 N DIR,DIRUT,DTOUT,DUOUT,X,Y
"RTN","LRVR0",28,0)
 ;
"RTN","LRVR0",29,0)
 F  D  Q:$G(LREND)
"RTN","LRVR0",30,0)
 . N LRMULTSQ
"RTN","LRVR0",31,0)
 . I $G(IOF)'="" W @IOF
"RTN","LRVR0",32,0)
 . K C5,DIC,DIR,DIRUT,DTOUT,DUOUT,LRAB,LRDEL,LRDL,LRFP,LRLDT,LRNG,LRNM,LRNOP,LRSET,LRTEST,LRVER,T,X,Y,Z
"RTN","LRVR0",33,0)
 . S X=DUZ D DUZ^LRX S LRTEC=LRUSI
"RTN","LRVR0",34,0)
 . D WLN^LRVRA I $G(LRNOP) D NEXT^LRVRA Q
"RTN","LRVR0",35,0)
 . ;
"RTN","LRVR0",36,0)
 . F  Q:$G(LRNOP)  D
"RTN","LRVR0",37,0)
 . . N LRSEQCNT
"RTN","LRVR0",38,0)
 . . D ISQN
"RTN","LRVR0",39,0)
 . . I $G(LRSEQCNT)>1 S LRMULTSQ=1
"RTN","LRVR0",40,0)
 . . I $G(LRNOP) Q
"RTN","LRVR0",41,0)
 . . D ACCSET
"RTN","LRVR0",42,0)
 . . I $G(LRNOP) Q
"RTN","LRVR0",43,0)
 . . I "SPCYEM"[LRSS D ^LRVRAP4
"RTN","LRVR0",44,0)
 . . I LRSS="MI" D PROC,ACCEPT
"RTN","LRVR0",45,0)
 . . I $G(LRNOP) Q
"RTN","LRVR0",46,0)
 . . I $G(LRSEQCNT)<2 S LRNOP=1 Q
"RTN","LRVR0",47,0)
 . . I $G(IOF)'="" W @IOF
"RTN","LRVR0",48,0)
 . . W !,PNM,?30,SSN,"  Age: ",AGE(2)
"RTN","LRVR0",49,0)
 . . W !,"ORDER #: ",LRCEN,"    ",LRACC,"    ["_LRUID,"]"
"RTN","LRVR0",50,0)
 . . W !
"RTN","LRVR0",51,0)
 . . S (ISQN,LRISQN)=0
"RTN","LRVR0",52,0)
 . ;
"RTN","LRVR0",53,0)
 . D UNLOCK,NEXT^LRVRA
"RTN","LRVR0",54,0)
 D CLEAN
"RTN","LRVR0",55,0)
 Q
"RTN","LRVR0",56,0)
 ;
"RTN","LRVR0",57,0)
 ;
"RTN","LRVR0",58,0)
ERR1 ;Look-up Error
"RTN","LRVR0",59,0)
 W !,"No data for "_LRUID_" in file"
"RTN","LRVR0",60,0)
 Q
"RTN","LRVR0",61,0)
 ;
"RTN","LRVR0",62,0)
 ;
"RTN","LRVR0",63,0)
CLEAN ;
"RTN","LRVR0",64,0)
 ;
"RTN","LRVR0",65,0)
 ; Task of background jobs for workload and HL7 message processing
"RTN","LRVR0",66,0)
 D ^LRCAPV2
"RTN","LRVR0",67,0)
 ;
"RTN","LRVR0",68,0)
 K ^TMP("LRMI",$J)
"RTN","LRVR0",69,0)
 K AGE,DFN,I,LRACC,LRCDT,DIRUT
"RTN","LRVR0",70,0)
 K LRCEN,LRDFN,LRDPF,LRNOP,LRLOCK,LRPUID,LRISQN,LRODT,LROU3,LRPROF
"RTN","LRVR0",71,0)
 K LRSN,LRSTATUS,LRTEC,LRUSI,LRVBY,PNM,SSN,X,Y
"RTN","LRVR0",72,0)
 K ZTRTN,ZTIO,ZTDTH,ZTDESC
"RTN","LRVR0",73,0)
 D ^LRVRKIL
"RTN","LRVR0",74,0)
 Q
"RTN","LRVR0",75,0)
 ;
"RTN","LRVR0",76,0)
 ;
"RTN","LRVR0",77,0)
ACC ; Accession number look-up
"RTN","LRVR0",78,0)
 D ADATE^LRWU
"RTN","LRVR0",79,0)
 I LRAD<1 S LRNOP=1 Q
"RTN","LRVR0",80,0)
 S LRAN=0
"RTN","LRVR0",81,0)
 F  D  Q:$G(LRDBUG,$G(LREND))
"RTN","LRVR0",82,0)
 . N LRMULTSQ
"RTN","LRVR0",83,0)
 . I $G(IOF)'="" W @IOF
"RTN","LRVR0",84,0)
 . K DIR,DIC,Y,LRNOP
"RTN","LRVR0",85,0)
 . S LRAN=$O(^LAH(LRLL,1,"C",LRAN)) I 'LRAN D ACCMSG Q
"RTN","LRVR0",86,0)
 . S Y=LRAN
"RTN","LRVR0",87,0)
 . S LRISQN=$O(^LAH(LRLL,1,"C",LRAN,0)) I 'LRISQN D ACCMSG Q
"RTN","LRVR0",88,0)
 . I '$O(^LAH(LRLL,1,LRISQN,0)) D ACCMSG Q
"RTN","LRVR0",89,0)
 . S DIR(0)="FO^1:10",DIR("A")="Enter Accession number part",DIR("?")="^D LW^LRVR"
"RTN","LRVR0",90,0)
 . S DIR("S")="I $O(^LAH(LRLL,1,""C"","_Y_",0)"
"RTN","LRVR0",91,0)
 . I $G(LRAN) S DIR("B")=LRAN
"RTN","LRVR0",92,0)
 . D ^DIR
"RTN","LRVR0",93,0)
 . I $D(DIRUT) D STOP^LRVR S LRNOP=1 Q
"RTN","LRVR0",94,0)
 . S LRAN=+Y I Y<1 D ACCMSG Q
"RTN","LRVR0",95,0)
 . ;
"RTN","LRVR0",96,0)
 . F  Q:$G(LRNOP)  D
"RTN","LRVR0",97,0)
 . . N LRSEQCNT
"RTN","LRVR0",98,0)
 . . D ISQN
"RTN","LRVR0",99,0)
 . . I $G(LRSEQCNT)>1 S LRMULTSQ=1
"RTN","LRVR0",100,0)
 . . I $G(LRNOP) Q
"RTN","LRVR0",101,0)
 . . D ACCSET
"RTN","LRVR0",102,0)
 . . S LRTM60=$$LRTM60^LRVR(LRCDT)
"RTN","LRVR0",103,0)
 . . I $G(LRNOP) Q
"RTN","LRVR0",104,0)
 . . I "SPCYEM"[LRSS D ^LRVRAP4
"RTN","LRVR0",105,0)
 . . I LRSS="MI" D PROC,ACCEPT
"RTN","LRVR0",106,0)
 . . I $G(LRNOP) Q
"RTN","LRVR0",107,0)
 . . I $G(LRSEQCNT)<2 S LRNOP=1 Q
"RTN","LRVR0",108,0)
 . . I $G(IOF)'="" W @IOF
"RTN","LRVR0",109,0)
 . . S (ISQN,LRISQN)=0
"RTN","LRVR0",110,0)
 . D UNLOCK
"RTN","LRVR0",111,0)
 ;
"RTN","LRVR0",112,0)
 D CLEAN
"RTN","LRVR0",113,0)
 Q
"RTN","LRVR0",114,0)
 ;
"RTN","LRVR0",115,0)
 ;
"RTN","LRVR0",116,0)
ACCMSG ;
"RTN","LRVR0",117,0)
 W !,"  No accession available for this Load/Worklist",!
"RTN","LRVR0",118,0)
 D STOP^LRVR S LRNOP=1
"RTN","LRVR0",119,0)
 Q
"RTN","LRVR0",120,0)
 ;
"RTN","LRVR0",121,0)
 ;
"RTN","LRVR0",122,0)
PROC ;Process the entry from LAH(LRLL
"RTN","LRVR0",123,0)
 Q:$$LEDIERR^LRVRMI0(LRLL,LRISQN,0,1)
"RTN","LRVR0",124,0)
 ;
"RTN","LRVR0",125,0)
 ; Set MI specific variables
"RTN","LRVR0",126,0)
 S LRBG0=^LR(LRDFN,"MI",LRIDT,0),LRSSC=$P(LRBG0,U,5)_U_$P(LRBG0,U,11),LRFIFO=1
"RTN","LRVR0",127,0)
 ;
"RTN","LRVR0",128,0)
 D EN^LRVRMI1
"RTN","LRVR0",129,0)
 Q
"RTN","LRVR0",130,0)
 ;
"RTN","LRVR0",131,0)
 ;
"RTN","LRVR0",132,0)
ACCSET ;Set up accession variables
"RTN","LRVR0",133,0)
 N DA,DIC,DIR,DIRUT,DTOUT,DUOUT,LRCNT,LRLAHD,LRI,LRNODE
"RTN","LRVR0",134,0)
 K LRERR
"RTN","LRVR0",135,0)
 S (LRLOCK,LRNOP)=0,LRLAHD=$G(^LAH(LRLL,1,LRISQN,0))
"RTN","LRVR0",136,0)
 I LRLAHD="" D  Q
"RTN","LRVR0",137,0)
 . W !,"^LAH("_LRLL_",1,"_LRISQN_",0)  Global is corrupt"
"RTN","LRVR0",138,0)
 . D ZAP S LRNOP=1
"RTN","LRVR0",139,0)
 ;
"RTN","LRVR0",140,0)
 S LRAA=$P(LRLAHD,U,3)
"RTN","LRVR0",141,0)
 I $P(^LRO(68,LRAA,0),U,2)'=LRSS  W !,"Not a "_LRSS_" Area - Abort",! S LRNOP=1 Q
"RTN","LRVR0",142,0)
 S LRAN=$P(LRLAHD,U,5),LRAD=$P(LRLAHD,U,4)
"RTN","LRVR0",143,0)
 ;
"RTN","LRVR0",144,0)
 I LRAA=""!(LRAD="")!(LRAN="") D  Q
"RTN","LRVR0",145,0)
 . W !,"^LAH("_LRLL_",1,"_LRISQN_",0)  Global is corrupt"
"RTN","LRVR0",146,0)
 . D ZAP S LRNOP=1
"RTN","LRVR0",147,0)
 I '$D(^LRO(68,LRAA,1,LRAD,1,LRAN,0)) D  Q
"RTN","LRVR0",148,0)
 . W !,"Accession does not exist in ACCESSION file (#68)"
"RTN","LRVR0",149,0)
 . D ZAP S LRNOP=1
"RTN","LRVR0",150,0)
 ;
"RTN","LRVR0",151,0)
 S LRDFN=+^LRO(68,LRAA,1,LRAD,1,LRAN,0),LRCEN=$S($D(^(.1)):^(.1),1:0)
"RTN","LRVR0",152,0)
 S LRACC=$G(^LRO(68,LRAA,1,LRAD,1,LRAN,.2)),LRCDT=$P($G(^(3)),U)
"RTN","LRVR0",153,0)
 S LRODT=$S($P(^(0),U,4):$P(^(0),U,4),1:$P(^(0),U,3)),LRSN=$P(^(0),U,5)
"RTN","LRVR0",154,0)
 S LRORU3=$G(^LRO(68,LRAA,1,LRAD,1,LRAN,.3)),LRIDT=$P(^(3),U,5)
"RTN","LRVR0",155,0)
 S LRUID=$P(LRORU3,U),LRTS=""
"RTN","LRVR0",156,0)
 ;
"RTN","LRVR0",157,0)
 S LRI=0
"RTN","LRVR0",158,0)
 F  S LRI=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRI)) Q:LRI<1!$G(LRTS)  S LRNODE=^(LRI,0) I $P(LRNODE,U,2)<50 S LRTS=+LRNODE
"RTN","LRVR0",159,0)
 S LRDPF=$P(^LR(LRDFN,0),U,2),DFN=$P(^(0),U,3)
"RTN","LRVR0",160,0)
 D PT^LRX
"RTN","LRVR0",161,0)
 ;
"RTN","LRVR0",162,0)
 ; Patient info displayed during UID lookup - display here when lookup by accession number
"RTN","LRVR0",163,0)
 I $G(LRVBY)'=2 D
"RTN","LRVR0",164,0)
 . W !,PNM,?30,SSN,"  Age: ",AGE(2)
"RTN","LRVR0",165,0)
 . W !,"ORDER #: ",LRCEN,"    ",LRACC,"    ["_LRUID,"]"
"RTN","LRVR0",166,0)
 ;
"RTN","LRVR0",167,0)
 I $$GET^XPAR("USR^DIV^PKG","LR MI VERIFY DISPLAY PROVIDER",1,"Q") D PROV^LRMIEDZ2
"RTN","LRVR0",168,0)
 ;
"RTN","LRVR0",169,0)
 S DIR(0)="E"
"RTN","LRVR0",170,0)
 D ^DIR
"RTN","LRVR0",171,0)
 I $D(DIRUT) S LRNOP=1 Q
"RTN","LRVR0",172,0)
 ;
"RTN","LRVR0",173,0)
 K LRERR
"RTN","LRVR0",174,0)
 S X=$$GETLOCK^LRUTIL("^LR(LRDFN,LRSS,LRIDT)",10,1)
"RTN","LRVR0",175,0)
 I 'X S LRERR=1 D NOLOCK Q
"RTN","LRVR0",176,0)
 S X=$$GETLOCK^LRUTIL("^LRO(68,LRAA,1,LRAD,1,LRAN)",10,1)
"RTN","LRVR0",177,0)
 I 'X S LRERR=2 D NOLOCK Q
"RTN","LRVR0",178,0)
 ;
"RTN","LRVR0",179,0)
 S LRLOCK=1
"RTN","LRVR0",180,0)
 I '$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,3)),"^",3) D
"RTN","LRVR0",181,0)
 . N LRAA,LRAD,LRAN
"RTN","LRVR0",182,0)
 . S LRSTATUS="C" D P15^LROE1
"RTN","LRVR0",183,0)
 . I LRCDT<1 S LRNOP=1
"RTN","LRVR0",184,0)
 ;
"RTN","LRVR0",185,0)
 I '$G(LRNOP),$P($G(^LRO(69,LRODT,1,LRSN,1)),U,4)'="C" D
"RTN","LRVR0",186,0)
 . W !,"You cannot verify an accession which has not been collected.",$C(7)
"RTN","LRVR0",187,0)
 . S LRNOP=1
"RTN","LRVR0",188,0)
 ;
"RTN","LRVR0",189,0)
 ; Determine if one or more tests on accession.
"RTN","LRVR0",190,0)
 S (LRI,LRCNT,LRPTP)=0
"RTN","LRVR0",191,0)
 F  S LRI=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRI)) Q:'LRI  D
"RTN","LRVR0",192,0)
 . I $P(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRI,0),"^",2)<50 S LRCNT=LRCNT+1,LRPTP=LRI
"RTN","LRVR0",193,0)
 ;
"RTN","LRVR0",194,0)
 ; If more than one test on accession then select the test to work with (URGENCY<50 - non-workload tests).
"RTN","LRVR0",195,0)
 I LRCNT>1 D
"RTN","LRVR0",196,0)
 . K DA,DIC
"RTN","LRVR0",197,0)
 . S DIC="^LRO(68,LRAA,1,LRAD,1,LRAN,4,",DIC(0)="AEMOQ",DIC("A")="Select TEST/PROCEDURE: ",DIC("S")="I $P(^(0),U,2)<50"
"RTN","LRVR0",198,0)
 . S DA(2)=LRAA,DA(1)=LRAD,DA=LRAN,LRPTP=0
"RTN","LRVR0",199,0)
 . D ^DIC
"RTN","LRVR0",200,0)
 . I Y<1 S LRNOP=1 Q
"RTN","LRVR0",201,0)
 . S LRPTP=+Y
"RTN","LRVR0",202,0)
 ;
"RTN","LRVR0",203,0)
 I $G(LRNOP) Q
"RTN","LRVR0",204,0)
 ;
"RTN","LRVR0",205,0)
 S LRMIDEF=$P(^LAB(69.9,1,1),U,10),LRMIOTH=$P(^(1),U,11)
"RTN","LRVR0",206,0)
 ;
"RTN","LRVR0",207,0)
 ; Set interface type
"RTN","LRVR0",208,0)
 S LRINTYPE=$P(^LAH(LRLL,1,LRISQN,0),"^",12)
"RTN","LRVR0",209,0)
 ;
"RTN","LRVR0",210,0)
 Q
"RTN","LRVR0",211,0)
 ;
"RTN","LRVR0",212,0)
 ;
"RTN","LRVR0",213,0)
NOLOCK ; Not able to lock message
"RTN","LRVR0",214,0)
 W !!,$S($G(LRERR)=1:" **Accession** ",$G(LRERR)=2:"**Patient's ^LR( file**",1:"Record")_" is locked by another user. " H 5
"RTN","LRVR0",215,0)
 S LRNOP=1
"RTN","LRVR0",216,0)
 Q
"RTN","LRVR0",217,0)
 ;
"RTN","LRVR0",218,0)
 ;
"RTN","LRVR0",219,0)
UNLOCK ; Unlock accession and ^LR( global
"RTN","LRVR0",220,0)
 Q:'$G(LRLOCK)
"RTN","LRVR0",221,0)
 L -^LRO(68,$G(LRAA),1,$G(LRAD),1,$G(LRAN))
"RTN","LRVR0",222,0)
 L -^LR($G(LRDFN),$G(LRSS),$G(LRIDT))
"RTN","LRVR0",223,0)
 Q
"RTN","LRVR0",224,0)
 ;
"RTN","LRVR0",225,0)
 ;
"RTN","LRVR0",226,0)
ACCEPT ;Display results and accept data
"RTN","LRVR0",227,0)
 N LRBATCH,LREDITTYPE,LRMODE,LRNPTP
"RTN","LRVR0",228,0)
 I $G(LREND) S LREND=0 Q
"RTN","LRVR0",229,0)
 ;
"RTN","LRVR0",230,0)
 S LRMODE="LDSI",LRBATCH=1,LREDITTYPE=1
"RTN","LRVR0",231,0)
 D DQ^LRMIPSZ1
"RTN","LRVR0",232,0)
 ;
"RTN","LRVR0",233,0)
 ;
"RTN","LRVR0",234,0)
 N DIR,DIROUT,DIRUT,DUOUT
"RTN","LRVR0",235,0)
 I LRINTYPE=1 D
"RTN","LRVR0",236,0)
 . S DIR(0)="SAO^0:Quit;1:Release;2:Comments/Release;3:Edit (full)"
"RTN","LRVR0",237,0)
 . S DIR("A")="Select RELEASE action: "
"RTN","LRVR0",238,0)
 . S DIR("B")=$$GET^XPAR("USR^PKG","LR MI UI RELEASE DEFAULT","`"_+LRLL,"E")
"RTN","LRVR0",239,0)
 . I DIR("B")="" S DIR("B")="Edit (full)"
"RTN","LRVR0",240,0)
 . S DIR("?")="Selections 1-3 will allow editing of status and approved date/time."
"RTN","LRVR0",241,0)
 . S DIR("?",1)="Entering 0 will abort review/release."
"RTN","LRVR0",242,0)
 . S DIR("?",2)="Entering 1 will allow release 'as is' with no editing."
"RTN","LRVR0",243,0)
 . S DIR("?",3)="Entering 2 will allow you to enter/edit comments then release."
"RTN","LRVR0",244,0)
 . S DIR("?",4)="Entering 3 will allow you to enter full edit, similar to 'Results entry' option."
"RTN","LRVR0",245,0)
 ;
"RTN","LRVR0",246,0)
 E  D
"RTN","LRVR0",247,0)
 . S DIR(0)="Y"
"RTN","LRVR0",248,0)
 . S DIR("A")="Do you want to APPROVE these results",DIR("B")="NO"
"RTN","LRVR0",249,0)
 . S DIR("?")="Enter Y if you want to approve these results"
"RTN","LRVR0",250,0)
 . S DIR("?",1)="Entering Y will store the results in the Lab System"
"RTN","LRVR0",251,0)
 ;
"RTN","LRVR0",252,0)
 D ^DIR
"RTN","LRVR0",253,0)
 S LREDITTYPE=+Y
"RTN","LRVR0",254,0)
 I $D(DIRUT) S LRNOP=1 Q
"RTN","LRVR0",255,0)
 I Y=0 D PURG Q
"RTN","LRVR0",256,0)
 I Y<1 S LRNOP=1 Q
"RTN","LRVR0",257,0)
 ;
"RTN","LRVR0",258,0)
 ; If user just accepting or doing comments then ask for tests.
"RTN","LRVR0",259,0)
 I LREDITTYPE<3 D
"RTN","LRVR0",260,0)
 . D EC^LRMIEDZ4
"RTN","LRVR0",261,0)
 . S LRTS=LRTS(LRI)
"RTN","LRVR0",262,0)
 ;
"RTN","LRVR0",263,0)
 D EN^LRVRMI4
"RTN","LRVR0",264,0)
 ;
"RTN","LRVR0",265,0)
 ; If Lab UI interface then allow editing remarks (#13), status (#11.5) and approved date/time (#11)
"RTN","LRVR0",266,0)
 I LRINTYPE=1,LREDITTYPE<3 D
"RTN","LRVR0",267,0)
 . N DA,DIE,DR
"RTN","LRVR0",268,0)
 . S DA=LRIDT,DA(1)=LRDFN,DIE="^LR(LRDFN,""MI"","
"RTN","LRVR0",269,0)
 . S DR=$S(LREDITTYPE=2:"13;",1:"")_"11.5;11"
"RTN","LRVR0",270,0)
 . D ^DIE
"RTN","LRVR0",271,0)
 ;
"RTN","LRVR0",272,0)
 ; If Lab UI interface and user wants to do full editing
"RTN","LRVR0",273,0)
 I LRINTYPE=1,LREDITTYPE=3 D
"RTN","LRVR0",274,0)
 . N LRANOK,LRLEDI,LRCAPO,LRUNDO
"RTN","LRVR0",275,0)
 . S (LRCAPOK,LRANOK)=1,LRUNDO=0
"RTN","LRVR0",276,0)
 . D AUDRTN^LRMIEDZ2
"RTN","LRVR0",277,0)
 ;
"RTN","LRVR0",278,0)
 ; Store performing lab info
"RTN","LRVR0",279,0)
 I $D(^TMP("LRPL",$J)) D ROLLUPPL^LRRPLUA(LRDFN,LRSS,LRIDT)
"RTN","LRVR0",280,0)
 ;
"RTN","LRVR0",281,0)
 ; Ask for performing laboratory assignment
"RTN","LRVR0",282,0)
 W !! D EDIT^LRRPLU(LRDFN,"MI",LRIDT)
"RTN","LRVR0",283,0)
 ;
"RTN","LRVR0",284,0)
 ; Store reporting lab
"RTN","LRVR0",285,0)
 D SETRL^LRVERA(LRDFN,LRSS,LRIDT,DUZ(2))
"RTN","LRVR0",286,0)
 ;
"RTN","LRVR0",287,0)
 ; Update clinical reminders
"RTN","LRVR0",288,0)
 D UPDATE^LRPXRM(LRDFN,"MI",LRIDT)
"RTN","LRVR0",289,0)
 ;
"RTN","LRVR0",290,0)
 ; Ask to send CPRS alert
"RTN","LRVR0",291,0)
 D ASKXQA^LRMIEDZ2
"RTN","LRVR0",292,0)
 ;
"RTN","LRVR0",293,0)
 ; Update accession and order
"RTN","LRVR0",294,0)
 D EC3^LRMIEDZ2
"RTN","LRVR0",295,0)
 ;
"RTN","LRVR0",296,0)
 ; Queue results if LEDI and cleanup
"RTN","LRVR0",297,0)
 D LEDI,ZAP
"RTN","LRVR0",298,0)
 K ^TMP("LRMI",$J)
"RTN","LRVR0",299,0)
 ;
"RTN","LRVR0",300,0)
 Q
"RTN","LRVR0",301,0)
 ;
"RTN","LRVR0",302,0)
 ;
"RTN","LRVR0",303,0)
PURG ; Ask if the entry should be purged from ^LAH(
"RTN","LRVR0",304,0)
 W !
"RTN","LRVR0",305,0)
 N DIR,DIROUT,DIRUT,DUOUT
"RTN","LRVR0",306,0)
 S DIR(0)="Y",DIR("A")="Do you want to PURGE these results",DIR("B")="NO"
"RTN","LRVR0",307,0)
 S DIR("?",1)="Enter NO if you want to process these results at a later time"
"RTN","LRVR0",308,0)
 S DIR("?")="Enter YES to remove these results from the list"
"RTN","LRVR0",309,0)
 D ^DIR
"RTN","LRVR0",310,0)
 I $D(DIRUT) S LRNOP=1 Q
"RTN","LRVR0",311,0)
 I Y=1 D ZAP
"RTN","LRVR0",312,0)
 Q
"RTN","LRVR0",313,0)
 ;
"RTN","LRVR0",314,0)
 ;
"RTN","LRVR0",315,0)
ZAP ; Remove entry from ^LAH( global
"RTN","LRVR0",316,0)
 N REC
"RTN","LRVR0",317,0)
 S REC=$S($G(ISQN):ISQN,1:$G(LRISQN))
"RTN","LRVR0",318,0)
 I LRLL,REC D ZAPALL^LRVR3(LRLL,REC)
"RTN","LRVR0",319,0)
 Q
"RTN","LRVR0",320,0)
 ;
"RTN","LRVR0",321,0)
 ;
"RTN","LRVR0",322,0)
SETACC ;
"RTN","LRVR0",323,0)
 N LRFILE,LRIENS,LRFDA,LRERR
"RTN","LRVR0",324,0)
 S LRFILE=68.04,LRERR=""
"RTN","LRVR0",325,0)
 S LRIENS=LRTS_","_LRAN_","_LRAD_","_LRAA_","
"RTN","LRVR0",326,0)
 S LRFDA(1,LRFILE,LRIENS,3)=DUZ
"RTN","LRVR0",327,0)
 S LRFDA(1,LRFILE,LRIENS,4)=$$NOW^XLFDT
"RTN","LRVR0",328,0)
 S LRFDA(1,LRFILE,LRIENS,8)=$G(LRCDEF)
"RTN","LRVR0",329,0)
 D FILE^DIE("KS","LRFDA(1)","LRERR")
"RTN","LRVR0",330,0)
 Q
"RTN","LRVR0",331,0)
 ;
"RTN","LRVR0",332,0)
 ;
"RTN","LRVR0",333,0)
LEDI ; If LEDI put results in queue to return to collecting lab
"RTN","LRVR0",334,0)
 ; Called from above, LRMIEDZ2, LRMISTF1 and LRVRAP4.
"RTN","LRVR0",335,0)
 N IEN,LRCDEFX,LRERR,LRIDT,LRORDT,LRORU3,LRSS,LRTSDEF
"RTN","LRVR0",336,0)
 Q:'$D(^LRO(68,+$G(LRAA),1,+$G(LRAD),1,+$G(LRAN),0))
"RTN","LRVR0",337,0)
 ;
"RTN","LRVR0",338,0)
 S LRORU3=$G(^LRO(68,LRAA,1,LRAD,1,LRAN,.3))
"RTN","LRVR0",339,0)
 Q:'$P(LRORU3,U,3)
"RTN","LRVR0",340,0)
 ;
"RTN","LRVR0",341,0)
 S LRODT=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,4)
"RTN","LRVR0",342,0)
 S LRSS=$P(^LRO(68,LRAA,0),U,2)
"RTN","LRVR0",343,0)
 S LRIDT=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),U,5)
"RTN","LRVR0",344,0)
 I '$$OK2SEND^LA7SRR D LEDINO Q
"RTN","LRVR0",345,0)
 ;
"RTN","LRVR0",346,0)
 I '$G(LRCDEF) N LRCDEF I "SPEMCY"[LRSS S LRCDEF=3241,LRCDEFX=1
"RTN","LRVR0",347,0)
 I '$G(LRTS) N LRTS D
"RTN","LRVR0",348,0)
 . S IEN=0
"RTN","LRVR0",349,0)
 . F  S IEN=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,IEN)) Q:IEN<1  D  Q:$G(LRTS)
"RTN","LRVR0",350,0)
 . . I $P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,4,IEN,0)),U,2)<50 S LRTS=IEN,LRTSDEF=1
"RTN","LRVR0",351,0)
 I $G(LRTS) D SETACC
"RTN","LRVR0",352,0)
 ;
"RTN","LRVR0",353,0)
 ; Comment out the following line after testing is complete
"RTN","LRVR0",354,0)
 W !!,$$CJ^XLFSTR("Sending report to LEDI collecting site",IOM)
"RTN","LRVR0",355,0)
 D MIAP^LA7VMSG(LRAA,LRAD,LRAN,+$G(LRTS),LRDFN,LRSS,LRIDT,LRODT)
"RTN","LRVR0",356,0)
 Q
"RTN","LRVR0",357,0)
 ;
"RTN","LRVR0",358,0)
 ;
"RTN","LRVR0",359,0)
LEDINO ; LEDI HL7 message sending error message
"RTN","LRVR0",360,0)
 W !!,$$CJ^XLFSTR("Unable to sent report to LEDI collecting site - no date report approved",IOM)
"RTN","LRVR0",361,0)
 Q
"RTN","LRVR0",362,0)
 ;
"RTN","LRVR0",363,0)
 ;
"RTN","LRVR0",364,0)
ISQN ; Find the entry associated with this accession area and accession number
"RTN","LRVR0",365,0)
 N LRI,LRSQ
"RTN","LRVR0",366,0)
 S (LRI,LRSEQCNT)=0
"RTN","LRVR0",367,0)
 F  S LRI=$O(^LAH(LRLL,1,"C",LRAN,LRI)) Q:LRI<1  D
"RTN","LRVR0",368,0)
 . N LRX
"RTN","LRVR0",369,0)
 . S LRX=$G(^LAH(LRLL,1,LRI,0))
"RTN","LRVR0",370,0)
 . ; Quit if different accession area.
"RTN","LRVR0",371,0)
 . I $P(LRX,"^",3),$P(LRX,"^",3)'=LRAA Q
"RTN","LRVR0",372,0)
 . ; Quit if different accession date and not a rollover accession (same original accession date).
"RTN","LRVR0",373,0)
 . I $P(LRX,"^",4),$P(LRX,"^",4)'=LRAD,$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,0)),"^",3)'=$P($G(^LRO(68,LRAA,1,$P(LRX,"^",4),1,LRAN,0)),"^",3) Q
"RTN","LRVR0",374,0)
 . I LRSEQCNT W !
"RTN","LRVR0",375,0)
 . S LRSEQCNT=LRSEQCNT+1,LRSQ=LRI,LRSQ(LRI)=""
"RTN","LRVR0",376,0)
 . W !,?2,"Seq #: ",LRI,?13," Accession: ",$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,.2)),"^")
"RTN","LRVR0",377,0)
 . I $P(LRX,"^",10) W ?40," Results received: ",$$FMTE^XLFDT($P(LRX,"^",10),"1M")
"RTN","LRVR0",378,0)
 . W !,?20,"UID: ",$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,.3),"UNKNOWN"),"^")
"RTN","LRVR0",379,0)
 . I $P(LRX,"^",11) W ?44," Last updated: ",$$FMTE^XLFDT($P(LRX,"^",11),"1M")
"RTN","LRVR0",380,0)
 . I $G(^LAH(LRLL,1,LRI,.1,"OBR","ORDNLT"))'="" D
"RTN","LRVR0",381,0)
 . . N LR64,LRNLT,LRNLTN,LRPIECE
"RTN","LRVR0",382,0)
 . . W !,?13," Order NLT: "
"RTN","LRVR0",383,0)
 . . F LRPIECE=1:1 S LRNLT=$P($G(^LAH(LRLL,1,LRI,.1,"OBR","ORDNLT")),"^",LRPIECE) Q:LRNLT=""  D
"RTN","LRVR0",384,0)
 . . . S LR64=+$O(^LAM("E",LRNLT,0))
"RTN","LRVR0",385,0)
 . . . S LRNLTN=$$GET1^DIQ(64,LR64_",",.01)
"RTN","LRVR0",386,0)
 . . . W ?25,$S(LRNLTN'="":LRNLTN,1:LRNLT),!
"RTN","LRVR0",387,0)
 ;
"RTN","LRVR0",388,0)
 I LRSEQCNT=0 W !,"No data for that accession" S LRNOP=1 Q
"RTN","LRVR0",389,0)
 I LRSEQCNT=1,'$G(LRMULTSQ) S (ISQN,LRISQN)=LRSQ Q
"RTN","LRVR0",390,0)
 ;
"RTN","LRVR0",391,0)
 ; If multiple entries (sequence - overlay data=no) then ask user which one to use.
"RTN","LRVR0",392,0)
 N DIR,DIRUT,DIROUT,DTOUT,DUOUT
"RTN","LRVR0",393,0)
 S DIR(0)=""
"RTN","LRVR0",394,0)
 S I=0 F  S I=$O(LRSQ(I)) Q:'I  S DIR(0)=DIR(0)_$S(I=1:"",1:";")_I_":Seq #"_I
"RTN","LRVR0",395,0)
 S DIR(0)="SO^"_DIR(0),DIR("A")="Choose sequence number"
"RTN","LRVR0",396,0)
 I LRSEQCNT=1,$G(LRMULTSQ) S DIR("B")=LRSQ
"RTN","LRVR0",397,0)
 D ^DIR
"RTN","LRVR0",398,0)
 I $D(DIRUT)!(Y<1) S LRNOP=1 Q
"RTN","LRVR0",399,0)
 S (ISQN,LRISQN)=+Y Q
"RTN","LRVR0",400,0)
 Q
"RTN","LRVRMI2")
0^1^B36282264
"RTN","LRVRMI2",1,0)
LRVRMI2 ;DALOI/STAFF - LAH/TMP TO FILE #63 ;09/07/16  08:07
"RTN","LRVRMI2",2,0)
 ;;5.2;LAB SERVICE;**350,427,474**;Sep 27, 1994;Build 14
"RTN","LRVRMI2",3,0)
 ;
"RTN","LRVRMI2",4,0)
 ; Continuation of LRVRMI4 and is used for extracting results from the LAH global and storing it into LAB DATA FILE (#63).
"RTN","LRVRMI2",5,0)
 ;
"RTN","LRVRMI2",6,0)
 Q
"RTN","LRVRMI2",7,0)
 ;
"RTN","LRVRMI2",8,0)
N7 ; Process Parasite Remarks
"RTN","LRVRMI2",9,0)
 N DIERR,IEN,LRCMT,LRFDA,LRFDAIEN,LRIEN,LRIENS,LRMSG,LRPL,LRX,X,STAT
"RTN","LRVRMI2",10,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,7,0))
"RTN","LRVRMI2",11,0)
 S LRPL=$P(LRX,"^"),STAT=$P(LRX,"^",4)
"RTN","LRVRMI2",12,0)
 D BLDSTAT^LRVRMI4A(63.05,15,STAT,.LRSTATUS)
"RTN","LRVRMI2",13,0)
 M LRCMT=^LR(LRDFN,"MI",LRIDT,7)
"RTN","LRVRMI2",14,0)
 ;
"RTN","LRVRMI2",15,0)
 S IEN=0
"RTN","LRVRMI2",16,0)
 F  S IEN=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,7,IEN)) Q:IEN<1  D  ;
"RTN","LRVRMI2",17,0)
 . S LRX=^TMP("LRMI",$J,LRDFN,"MI",LRIDT,7,IEN,0),LRX=$S(LRX'="":LRX,1:" ")
"RTN","LRVRMI2",18,0)
 . I LRX'=" ",$$DUPCHK^LRVRMI3(LRLL,LRPROF,.LRCMT,LRX) Q
"RTN","LRVRMI2",19,0)
 . S LRIEN="+"_IEN_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI2",20,0)
 . S LRFDA(7,63.36,LRIEN,.01)=LRX
"RTN","LRVRMI2",21,0)
 ;
"RTN","LRVRMI2",22,0)
 I $D(LRFDA) D
"RTN","LRVRMI2",23,0)
 . D UPDATE^DIE("","LRFDA(7)","LRFDAIEN","LRMSG")
"RTN","LRVRMI2",24,0)
 . S IEN=0
"RTN","LRVRMI2",25,0)
 . F  S IEN=$O(LRFDAIEN(IEN)) Q:'IEN  I $G(LRPL) D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_",7,"_LRFDAIEN(IEN),LRPL)
"RTN","LRVRMI2",26,0)
 ;
"RTN","LRVRMI2",27,0)
 K LRFDA,LRIEN,LRMSG,DIERR
"RTN","LRVRMI2",28,0)
 S LRIEN=LRIDT_","_LRDFN_","
"RTN","LRVRMI2",29,0)
 I LRINTYPE=10 S LRFDA(7,63.05,LRIEN,14)=LRNOW
"RTN","LRVRMI2",30,0)
 S LRFDA(7,63.05,LRIEN,15.5)=$S($G(LRDUZ):LRDUZ,1:$G(DUZ))
"RTN","LRVRMI2",31,0)
 D FILE^DIE("","LRFDA(7)","LRMSG")
"RTN","LRVRMI2",32,0)
 S LRRPTAPP=1
"RTN","LRVRMI2",33,0)
 Q
"RTN","LRVRMI2",34,0)
 ;
"RTN","LRVRMI2",35,0)
 ;
"RTN","LRVRMI2",36,0)
N10 ; Process Mycology Remarks
"RTN","LRVRMI2",37,0)
 N DIERR,IEN,LRCMT,LRFDA,LRIEN,LRIENS,LRMSG,LRPL,LRX,STAT
"RTN","LRVRMI2",38,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,10,0))
"RTN","LRVRMI2",39,0)
 S LRPL=$P(LRX,"^"),STAT=$P(LRX,U,4)
"RTN","LRVRMI2",40,0)
 D BLDSTAT^LRVRMI4A(63.05,19,STAT,.LRSTATUS)
"RTN","LRVRMI2",41,0)
 M LRCMT=^LR(LRDFN,"MI",LRIDT,10)
"RTN","LRVRMI2",42,0)
 ;
"RTN","LRVRMI2",43,0)
 S IEN=0
"RTN","LRVRMI2",44,0)
 F  S IEN=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,10,IEN)) Q:IEN<1  D
"RTN","LRVRMI2",45,0)
 . S LRX=^TMP("LRMI",$J,LRDFN,"MI",LRIDT,10,IEN,0),LRX=$S(LRX'="":LRX,1:" ")
"RTN","LRVRMI2",46,0)
 . I LRX'=" ",$$DUPCHK^LRVRMI3(LRLL,LRPROF,.LRCMT,LRX) Q
"RTN","LRVRMI2",47,0)
 . S LRIEN="+"_IEN_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI2",48,0)
 . S LRFDA(10,63.38,LRIEN,.01)=LRX
"RTN","LRVRMI2",49,0)
 I $D(LRFDA) D
"RTN","LRVRMI2",50,0)
 . D UPDATE^DIE("","LRFDA(10)","LRFDAIEN","LRMSG")
"RTN","LRVRMI2",51,0)
 . S IEN=0
"RTN","LRVRMI2",52,0)
 . F  S IEN=$O(LRFDAIEN(IEN)) Q:'IEN  I $G(LRPL) D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_",10,"_LRFDAIEN(IEN),LRPL)
"RTN","LRVRMI2",53,0)
 ;
"RTN","LRVRMI2",54,0)
 K LRFDA,LRIEN,LRMSG,DIERR
"RTN","LRVRMI2",55,0)
 S LRIEN=LRIDT_","_LRDFN_","
"RTN","LRVRMI2",56,0)
 I LRINTYPE=10 S LRFDA(10,63.05,LRIEN,18)=LRNOW
"RTN","LRVRMI2",57,0)
 S LRFDA(10,63.05,LRIEN,19.5)=$S($G(LRDUZ):LRDUZ,1:$G(DUZ))
"RTN","LRVRMI2",58,0)
 D FILE^DIE("","LRFDA(10)","LRMSG")
"RTN","LRVRMI2",59,0)
 S LRRPTAPP=1
"RTN","LRVRMI2",60,0)
 Q
"RTN","LRVRMI2",61,0)
 ;
"RTN","LRVRMI2",62,0)
 ;
"RTN","LRVRMI2",63,0)
N13 ; Process TB Rpt Remarks
"RTN","LRVRMI2",64,0)
 N DIERR,IEN,LRCMT,LRFDA,LRIEN,LRIENS,LRMSG,LRPL,LRX,STAT
"RTN","LRVRMI2",65,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,13,0))
"RTN","LRVRMI2",66,0)
 S LRPL=$P(LRX,"^"),STAT=$P(LRX,U,4)
"RTN","LRVRMI2",67,0)
 D BLDSTAT^LRVRMI4A(63.05,23,STAT,.LRSTATUS)
"RTN","LRVRMI2",68,0)
 M LRCMT=^LR(LRDFN,"MI",LRIDT,13)
"RTN","LRVRMI2",69,0)
 ;
"RTN","LRVRMI2",70,0)
 S IEN=0
"RTN","LRVRMI2",71,0)
 F  S IEN=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,13,IEN)) Q:IEN<1  D
"RTN","LRVRMI2",72,0)
 . S LRX=^TMP("LRMI",$J,LRDFN,"MI",LRIDT,13,IEN,0),LRX=$S(LRX'="":LRX,1:" ")
"RTN","LRVRMI2",73,0)
 . I LRX'=" ",$$DUPCHK^LRVRMI3(LRLL,LRPROF,.LRCMT,LRX) Q
"RTN","LRVRMI2",74,0)
 . S LRIEN="+"_IEN_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI2",75,0)
 . S LRFDA(13,63.41,LRIEN,.01)=LRX
"RTN","LRVRMI2",76,0)
 I $D(LRFDA) D
"RTN","LRVRMI2",77,0)
 . D UPDATE^DIE("","LRFDA(13)","LRFDAIEN","LRMSG")
"RTN","LRVRMI2",78,0)
 . S IEN=0
"RTN","LRVRMI2",79,0)
 . F  S IEN=$O(LRFDAIEN(IEN)) Q:'IEN  I $G(LRPL) D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_",13,"_LRFDAIEN(IEN),LRPL)
"RTN","LRVRMI2",80,0)
 ;
"RTN","LRVRMI2",81,0)
 K LRFDA,LRIEN,LRMSG,DIERR
"RTN","LRVRMI2",82,0)
 S LRIEN=LRIDT_","_LRDFN_","
"RTN","LRVRMI2",83,0)
 I LRINTYPE=10 S LRFDA(13,63.05,LRIEN,22)=LRNOW
"RTN","LRVRMI2",84,0)
 S LRFDA(13,63.05,LRIEN,25.5)=$S($G(LRDUZ):LRDUZ,1:$G(DUZ))
"RTN","LRVRMI2",85,0)
 D FILE^DIE("","LRFDA(13)","LRMSG")
"RTN","LRVRMI2",86,0)
 S LRRPTAPP=1
"RTN","LRVRMI2",87,0)
 Q
"RTN","LRVRMI2",88,0)
 ;
"RTN","LRVRMI2",89,0)
 ;
"RTN","LRVRMI2",90,0)
N15 ; Mycology smear/prep
"RTN","LRVRMI2",91,0)
 N DIERR,IEN,LRCMT,LRFDA,LRIEN,LRIENS,LRMSG,LRPL,LRX
"RTN","LRVRMI2",92,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,15,0))
"RTN","LRVRMI2",93,0)
 S LRPL=$P(LRX,"^"),STAT=$P(LRX,U,4)
"RTN","LRVRMI2",94,0)
 D BLDSTAT^LRVRMI4A(63.05,19,STAT,.LRSTATUS)
"RTN","LRVRMI2",95,0)
 M LRCMT=^LR(LRDFN,"MI",LRIDT,15)
"RTN","LRVRMI2",96,0)
 ;
"RTN","LRVRMI2",97,0)
 S IEN=0
"RTN","LRVRMI2",98,0)
 F  S IEN=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,15,IEN)) Q:IEN<1  D  ;
"RTN","LRVRMI2",99,0)
 . S LRX=^TMP("LRMI",$J,LRDFN,"MI",LRIDT,15,IEN,0),LRX=$S(LRX'="":LRX,1:" ")
"RTN","LRVRMI2",100,0)
 . I LRX'=" ",$$DUPCHK^LRVRMI3(LRLL,LRPROF,.LRCMT,LRX) Q
"RTN","LRVRMI2",101,0)
 . S LRIEN="+"_IEN_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI2",102,0)
 . S LRFDA(15,63.371,LRIEN,.01)=LRX
"RTN","LRVRMI2",103,0)
 ;
"RTN","LRVRMI2",104,0)
 I $D(LRFDA) D
"RTN","LRVRMI2",105,0)
 . D UPDATE^DIE("","LRFDA(15)","LRFDAIEN","LRMSG")
"RTN","LRVRMI2",106,0)
 . S IEN=0
"RTN","LRVRMI2",107,0)
 . F  S IEN=$O(LRFDAIEN(IEN)) Q:'IEN  I $G(LRPL) D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_",15,"_LRFDAIEN(IEN),LRPL)
"RTN","LRVRMI2",108,0)
 ;
"RTN","LRVRMI2",109,0)
 K LRFDA,LRIEN,LRMSG,DIERR
"RTN","LRVRMI2",110,0)
 S LRIEN=LRIDT_","_LRDFN_","
"RTN","LRVRMI2",111,0)
 I LRINTYPE=10 S LRFDA(15,63.05,LRIEN,18)=LRNOW
"RTN","LRVRMI2",112,0)
 S LRFDA(15,63.05,LRIEN,19.5)=$S($G(LRDUZ):LRDUZ,1:$G(DUZ))
"RTN","LRVRMI2",113,0)
 D FILE^DIE("","LRFDA(15)","LRMSG")
"RTN","LRVRMI2",114,0)
 S LRRPTAPP=1
"RTN","LRVRMI2",115,0)
 Q
"RTN","LRVRMI2",116,0)
 ;
"RTN","LRVRMI2",117,0)
 ;
"RTN","LRVRMI2",118,0)
N18 ; Process Virology Rpt Remarks
"RTN","LRVRMI2",119,0)
 N DIERR,IEN,LRCMT,LRFDA,LRIEN,LRIENS,LRMSG,LRPL,LRX,STAT
"RTN","LRVRMI2",120,0)
 ;
"RTN","LRVRMI2",121,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,18,0))
"RTN","LRVRMI2",122,0)
 S LRPL=$P(LRX,"^"),STAT=$P(LRX,U,4)
"RTN","LRVRMI2",123,0)
 D BLDSTAT^LRVRMI4A(63.05,34,STAT,.LRSTATUS)
"RTN","LRVRMI2",124,0)
 M LRCMT=^LR(LRDFN,"MI",LRIDT,18)
"RTN","LRVRMI2",125,0)
 ;
"RTN","LRVRMI2",126,0)
 S IEN=0
"RTN","LRVRMI2",127,0)
 F  S IEN=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,18,IEN)) Q:IEN<1  D  ;
"RTN","LRVRMI2",128,0)
 . S LRX=^TMP("LRMI",$J,LRDFN,"MI",LRIDT,18,IEN,0),LRX=$S(LRX'="":LRX,1:" ")
"RTN","LRVRMI2",129,0)
 . I LRX'=" ",$$DUPCHK^LRVRMI3(LRLL,LRPROF,.LRCMT,LRX) Q
"RTN","LRVRMI2",130,0)
 . S LRIEN="+"_IEN_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI2",131,0)
 . S LRFDA(18,63.44,LRIEN,.01)=LRX
"RTN","LRVRMI2",132,0)
 I $D(LRFDA) D
"RTN","LRVRMI2",133,0)
 . D UPDATE^DIE("","LRFDA(18)","LRFDAIEN","LRMSG")
"RTN","LRVRMI2",134,0)
 . S IEN=0
"RTN","LRVRMI2",135,0)
 . F  S IEN=$O(LRFDAIEN(IEN)) Q:'IEN  I $G(LRPL) D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_",18,"_LRFDAIEN(IEN),LRPL)
"RTN","LRVRMI2",136,0)
 ;
"RTN","LRVRMI2",137,0)
 K LRFDA,LRIEN,LRMSG,DIERR
"RTN","LRVRMI2",138,0)
 S LRIEN=LRIDT_","_LRDFN_","
"RTN","LRVRMI2",139,0)
 I LRINTYPE=10 S LRFDA(18,63.05,LRIEN,33)=LRNOW
"RTN","LRVRMI2",140,0)
 S LRFDA(18,63.05,LRIEN,35)=$S($G(LRDUZ):LRDUZ,1:$G(DUZ))
"RTN","LRVRMI2",141,0)
 D FILE^DIE("","LRFDA(18)","LRMSG")
"RTN","LRVRMI2",142,0)
 S LRRPTAPP=1
"RTN","LRVRMI2",143,0)
 Q
"RTN","LRVRMI2",144,0)
 ;
"RTN","LRVRMI2",145,0)
 ;
"RTN","LRVRMI2",146,0)
HEAD ;
"RTN","LRVRMI2",147,0)
 ; Start by getting the demographic data from LAH
"RTN","LRVRMI2",148,0)
 S EOL=$G(^LAH(LWL,1,ISQN,.1,"OBR","EOL"))
"RTN","LRVRMI2",149,0)
 S FID=$G(^LAH(LWL,1,ISQN,.1,"OBR","FID"))
"RTN","LRVRMI2",150,0)
 S ORCDT=$G(^LAH(LWL,1,ISQN,.1,"OBR","ORCDT"))
"RTN","LRVRMI2",151,0)
 S ORDNLT=$G(^LAH(LWL,1,ISQN,.1,"OBR","ORDNLT"))
"RTN","LRVRMI2",152,0)
 S ORDP=$G(^LAH(LWL,1,ISQN,.1,"OBR","ORDP"))
"RTN","LRVRMI2",153,0)
 S PEB=$G(^LAH(LWL,1,ISQN,.1,"OBR","PEB"))
"RTN","LRVRMI2",154,0)
 S PVB=$G(^LAH(LWL,1,ISQN,.1,"OBR","PVB"))
"RTN","LRVRMI2",155,0)
 S SID=$G(^LAH(LWL,1,ISQN,.1,"OBR","SID"))
"RTN","LRVRMI2",156,0)
 S DFN=$G(^LAH(LWL,1,ISQN,.1,"PID","DFN"))
"RTN","LRVRMI2",157,0)
 S DOB=$G(^LAH(LWL,1,ISQN,.1,"PID","DOB"))
"RTN","LRVRMI2",158,0)
 S ICN=$G(^LAH(LWL,1,ISQN,.1,"PID","ICN"))
"RTN","LRVRMI2",159,0)
 S LRTDFN=$G(^LAH(LWL,1,ISQN,.1,"PID","LRTDFN"))
"RTN","LRVRMI2",160,0)
 S PNM=$G(^LAH(LWL,1,ISQN,.1,"PID","PNM"))
"RTN","LRVRMI2",161,0)
 S SEX=$G(^LAH(LWL,1,ISQN,.1,"PID","SEX"))
"RTN","LRVRMI2",162,0)
 S SSN=$G(^LAH(LWL,1,ISQN,.1,"PID","SSN"))
"RTN","LRVRMI2",163,0)
 S LRUID=$G(^LAH(LWL,1,ISQN,.3))
"RTN","LRVRMI2",164,0)
 Q
"RTN","LRVRMI2A")
0^2^B78602425
"RTN","LRVRMI2A",1,0)
LRVRMI2A ;DALOI/STAFF - LAH/TMP TO FILE #63 ;09/07/16  08:07
"RTN","LRVRMI2A",2,0)
 ;;5.2;LAB SERVICE;**350,427,474**;Sep 27, 1994;Build 14
"RTN","LRVRMI2A",3,0)
 ;
"RTN","LRVRMI2A",4,0)
 ; Continuation of LRVRMI4 and is used for extracting results from the LAH global and storing it into LAB DATA FILE (#63).
"RTN","LRVRMI2A",5,0)
 ;
"RTN","LRVRMI2A",6,0)
 Q
"RTN","LRVRMI2A",7,0)
 ;
"RTN","LRVRMI2A",8,0)
N9 ; Process Fungus/Yeast
"RTN","LRVRMI2A",9,0)
 N DATA,DIERR,IEN,IEN2,IEN3,ISOID,LRCMT,LRFDA,LRIEN,LRIENS,LRMSG,LRN9,LRX,R6337,STAT
"RTN","LRVRMI2A",10,0)
 ;
"RTN","LRVRMI2A",11,0)
 ;ZEXCEPT: LRDFN,LRDUZ,LRFDAIEN,LRIDT,LRLL,LRNOW,LRPROF,LRSTATUS
"RTN","LRVRMI2A",12,0)
 ;
"RTN","LRVRMI2A",13,0)
 S (IEN,IEN2,IEN3)=0
"RTN","LRVRMI2A",14,0)
 F  S IEN=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,9,IEN)) Q:IEN<1  D N9A
"RTN","LRVRMI2A",15,0)
 ;
"RTN","LRVRMI2A",16,0)
 K LRFDA,LRMSG,LRIENS,DIERR
"RTN","LRVRMI2A",17,0)
 S LRIEN=LRIDT_","_LRDFN_","
"RTN","LRVRMI2A",18,0)
 I LRINTYPE=10 S LRFDA(9,63.05,LRIEN,18)=LRNOW
"RTN","LRVRMI2A",19,0)
 S LRFDA(9,63.05,LRIEN,19.5)=$S($G(LRDUZ):LRDUZ,1:$G(DUZ))
"RTN","LRVRMI2A",20,0)
 D FILE^DIE("","LRFDA(9)","LRMSG")
"RTN","LRVRMI2A",21,0)
 S LRRPTAPP=1
"RTN","LRVRMI2A",22,0)
 Q
"RTN","LRVRMI2A",23,0)
 ;
"RTN","LRVRMI2A",24,0)
 ;
"RTN","LRVRMI2A",25,0)
N9A ; Process fungus yeast organism
"RTN","LRVRMI2A",26,0)
 ;
"RTN","LRVRMI2A",27,0)
 N DIERR,IEN2,ISOID,LRCMT,LRFDA,LRFDAIEN,LRI,LRIEN,LRIENS,LRMSG,LRN9,LRX,R6337,STAT
"RTN","LRVRMI2A",28,0)
 ;
"RTN","LRVRMI2A",29,0)
 S LRN9=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,9,IEN,0))
"RTN","LRVRMI2A",30,0)
 Q:LRN9=""
"RTN","LRVRMI2A",31,0)
 S ISOID=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,9,IEN,.1))
"RTN","LRVRMI2A",32,0)
 Q:ISOID=""
"RTN","LRVRMI2A",33,0)
 ; Delete ISOID if it exists
"RTN","LRVRMI2A",34,0)
 S R6337=$O(^LR(LRDFN,"MI",LRIDT,9,"C",ISOID,0))
"RTN","LRVRMI2A",35,0)
 I R6337 D
"RTN","LRVRMI2A",36,0)
 . K LRFDA,LRMSG,LRIENS,DIERR
"RTN","LRVRMI2A",37,0)
 . S LRIEN=R6337_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI2A",38,0)
 . S LRFDA(9,63.37,LRIEN,.01)="@"
"RTN","LRVRMI2A",39,0)
 . D FILE^DIE("","LRFDA(9)","LRMSG")
"RTN","LRVRMI2A",40,0)
 ;
"RTN","LRVRMI2A",41,0)
 K LRFDA,LRMSG,LRIENS,DIERR
"RTN","LRVRMI2A",42,0)
 S LRIEN="+1,"_LRIDT_","_LRDFN_","
"RTN","LRVRMI2A",43,0)
 S LRFDA(9,63.37,LRIEN,.01)=$P(LRN9,"^") ; fungus/yeast
"RTN","LRVRMI2A",44,0)
 S LRFDA(9,63.37,LRIEN,1)=$P(LRN9,"^",2) ; quantity
"RTN","LRVRMI2A",45,0)
 S LRFDA(9,63.37,LRIEN,.1)=ISOID
"RTN","LRVRMI2A",46,0)
 D UPDATE^DIE("","LRFDA(9)","LRIENS","LRMSG")
"RTN","LRVRMI2A",47,0)
 S R6337=$G(LRIENS(1))
"RTN","LRVRMI2A",48,0)
 Q:'R6337
"RTN","LRVRMI2A",49,0)
 ;
"RTN","LRVRMI2A",50,0)
 ; Store code system references for fungus
"RTN","LRVRMI2A",51,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,9,IEN,0,.01))
"RTN","LRVRMI2A",52,0)
 F LRI=1:1:3 I $P(LRX,"^",LRI) D
"RTN","LRVRMI2A",53,0)
 . N LRDATA
"RTN","LRVRMI2A",54,0)
 . S LRDATA(.01)=LRDFN_",MI,"_LRIDT_",9,"_R6337_",0;1"
"RTN","LRVRMI2A",55,0)
 . S LRDATA(.02)=$S(LRI<3:2,1:3),LRDATA(.03)=$P(LRX,"^",LRI),LRDATA(.04)=$P("LN^NLT^SCT","^",LRI)
"RTN","LRVRMI2A",56,0)
 . D SETREF^LRUCSR(LRDFN,LRDATA(.01),.LRDATA,1)
"RTN","LRVRMI2A",57,0)
 ;
"RTN","LRVRMI2A",58,0)
 ; Store code system references for yeast quantity
"RTN","LRVRMI2A",59,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,9,IEN,0,.02))
"RTN","LRVRMI2A",60,0)
 F LRI=1,2 I $P(LRX,"^",LRI) D
"RTN","LRVRMI2A",61,0)
 . N LRDATA
"RTN","LRVRMI2A",62,0)
 . S LRDATA(.01)=LRDFN_",MI,"_LRIDT_",9,"_R6337_"0;2"
"RTN","LRVRMI2A",63,0)
 . S LRDATA(.02)=2,LRDATA(.03)=$P(LRX,"^",LRI),LRDATA(.04)=$P("LN^NLT","^",LRI)
"RTN","LRVRMI2A",64,0)
 . D SETREF^LRUCSR(LRDFN,LRDATA(.01),.LRDATA,1)
"RTN","LRVRMI2A",65,0)
 ;
"RTN","LRVRMI2A",66,0)
 ; Store performing lab
"RTN","LRVRMI2A",67,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,9,IEN,0,.01,1))
"RTN","LRVRMI2A",68,0)
 I $P(LRX,"^") D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_",9,"_R6337_",0",$P(LRX,"^"))
"RTN","LRVRMI2A",69,0)
 ;
"RTN","LRVRMI2A",70,0)
 S STAT=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,9,IEN,0,.01,0))
"RTN","LRVRMI2A",71,0)
 D BLDSTAT^LRVRMI4A(63.05,19,STAT,.LRSTATUS)
"RTN","LRVRMI2A",72,0)
 ;
"RTN","LRVRMI2A",73,0)
 ; fungus/yeast comments - comments don't have status
"RTN","LRVRMI2A",74,0)
 K LRFDA,LRFDAIEN,LRMSG,LRIENS,DIERR
"RTN","LRVRMI2A",75,0)
 M LRCMT=^LR(LRDFN,"MI",LRIDT,9,IEN,1)
"RTN","LRVRMI2A",76,0)
 S IEN2=0
"RTN","LRVRMI2A",77,0)
 F  S IEN2=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,9,IEN,1,IEN2)) Q:IEN2<1  D
"RTN","LRVRMI2A",78,0)
 . S LRX=^TMP("LRMI",$J,LRDFN,"MI",LRIDT,9,IEN,1,IEN2,0),LRX=$S(LRX'="":LRX,1:" ")
"RTN","LRVRMI2A",79,0)
 . I LRX'=" ",$$DUPCHK^LRVRMI3(LRLL,LRPROF,.LRCMT,LRX) Q
"RTN","LRVRMI2A",80,0)
 . S LRIEN="+"_IEN2_","_R6337_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI2A",81,0)
 . S LRFDA(9,63.372,LRIEN,.01)=LRX
"RTN","LRVRMI2A",82,0)
 ;
"RTN","LRVRMI2A",83,0)
 I $D(LRFDA) D UPDATE^DIE("","LRFDA(9)","","LRMSG")
"RTN","LRVRMI2A",84,0)
 ;
"RTN","LRVRMI2A",85,0)
 Q
"RTN","LRVRMI2A",86,0)
 ;
"RTN","LRVRMI2A",87,0)
 ;
"RTN","LRVRMI2A",88,0)
N11 ; Process Acid Fast
"RTN","LRVRMI2A",89,0)
 N AFS,DIERR,LRFDA,LRIEN,LRIENS,LRMSG,LRX,QTY
"RTN","LRVRMI2A",90,0)
 ;
"RTN","LRVRMI2A",91,0)
 ;ZEXCEPT: LRDFN,LRDUZ,LRI,LRIDT,LRNOW
"RTN","LRVRMI2A",92,0)
 ;
"RTN","LRVRMI2A",93,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,11))
"RTN","LRVRMI2A",94,0)
 D BLDSTAT^LRVRMI4A(63.05,23,$P(LRX,"^",2),.LRSTATUS)
"RTN","LRVRMI2A",95,0)
 ;
"RTN","LRVRMI2A",96,0)
 S LRIEN=LRIDT_","_LRDFN_","
"RTN","LRVRMI2A",97,0)
 I LRINTYPE=10 S LRFDA(11,63.05,LRIEN,22)=LRNOW
"RTN","LRVRMI2A",98,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,11,0))
"RTN","LRVRMI2A",99,0)
 S AFS=$P(LRX,"^",3),QTY=$P(LRX,U,4)
"RTN","LRVRMI2A",100,0)
 S LRFDA(11,63.05,LRIEN,24)=AFS ; Acid Fast Stain
"RTN","LRVRMI2A",101,0)
 ;I $L(QTY)>68 S QTY=$E(QTY,1,65)_"..."
"RTN","LRVRMI2A",102,0)
 S LRFDA(11,63.05,LRIEN,25)=QTY ; Quantity
"RTN","LRVRMI2A",103,0)
 S LRFDA(11,63.05,LRIEN,25.5)=$S($G(LRDUZ):LRDUZ,1:$G(DUZ))
"RTN","LRVRMI2A",104,0)
 ; derive status
"RTN","LRVRMI2A",105,0)
 I AFS'="" D
"RTN","LRVRMI2A",106,0)
 . S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,11,0,.01,0))
"RTN","LRVRMI2A",107,0)
 . D BLDSTAT^LRVRMI4A(63.05,23,$P(LRX,"^"),.LRSTATUS)
"RTN","LRVRMI2A",108,0)
 I QTY'="" D
"RTN","LRVRMI2A",109,0)
 . S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,11,0,.02,0))
"RTN","LRVRMI2A",110,0)
 . D BLDSTAT^LRVRMI4A(63.05,23,$P(LRX,"^"),.LRSTATUS)
"RTN","LRVRMI2A",111,0)
 ;
"RTN","LRVRMI2A",112,0)
 D FILE^DIE("","LRFDA(11)","LRMSG")
"RTN","LRVRMI2A",113,0)
 S LRRPTAPP=1
"RTN","LRVRMI2A",114,0)
 ;
"RTN","LRVRMI2A",115,0)
 ; Store code system references for AFB Stain
"RTN","LRVRMI2A",116,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,11,0,.01))
"RTN","LRVRMI2A",117,0)
 F LRI=1,2 I $P(LRX,"^",LRI) D
"RTN","LRVRMI2A",118,0)
 . N LRDATA
"RTN","LRVRMI2A",119,0)
 . S LRDATA(.01)=LRDFN_",MI,"_LRIDT_",11,0;3"
"RTN","LRVRMI2A",120,0)
 . S LRDATA(.02)=2,LRDATA(.03)=$P(LRX,"^",LRI),LRDATA(.04)=$P("LN^NLT","^",LRI)
"RTN","LRVRMI2A",121,0)
 . D SETREF^LRUCSR(LRDFN,LRDATA(.01),.LRDATA,1)
"RTN","LRVRMI2A",122,0)
 ;
"RTN","LRVRMI2A",123,0)
 ; Store code system references for AFB quantity
"RTN","LRVRMI2A",124,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,11,0,.02))
"RTN","LRVRMI2A",125,0)
 F LRI=1,2 I $P(LRX,"^",LRI) D
"RTN","LRVRMI2A",126,0)
 . N LRDATA
"RTN","LRVRMI2A",127,0)
 . S LRDATA(.01)=LRDFN_",MI,"_LRIDT_",11,0;4"
"RTN","LRVRMI2A",128,0)
 . S LRDATA(.02)=2,LRDATA(.03)=$P(LRX,"^",LRI),LRDATA(.04)=$P("LN^NLT","^",LRI)
"RTN","LRVRMI2A",129,0)
 . D SETREF^LRUCSR(LRDFN,LRDATA(.01),.LRDATA,1)
"RTN","LRVRMI2A",130,0)
 ;
"RTN","LRVRMI2A",131,0)
 Q
"RTN","LRVRMI2A",132,0)
 ;
"RTN","LRVRMI2A",133,0)
 ;
"RTN","LRVRMI2A",134,0)
N12 ; Process Mycobacteria
"RTN","LRVRMI2A",135,0)
 ;
"RTN","LRVRMI2A",136,0)
 N DATA,DIERR,DNFLDS,FLD,IEN,IEN2,ISOID,LRCMT,LRFDA,LRIEN,LRIENS,LRMSG,LRN12,LRX,R6339,STAT
"RTN","LRVRMI2A",137,0)
 ;
"RTN","LRVRMI2A",138,0)
 ;ZEXCEPT: LRDFN,LRIDT,LRLL,LRPROF,LRSTATUS
"RTN","LRVRMI2A",139,0)
 ;
"RTN","LRVRMI2A",140,0)
 S IEN=0
"RTN","LRVRMI2A",141,0)
 F  S IEN=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,12,IEN)) Q:IEN<1  D N12A
"RTN","LRVRMI2A",142,0)
 ;
"RTN","LRVRMI2A",143,0)
 Q
"RTN","LRVRMI2A",144,0)
 ;
"RTN","LRVRMI2A",145,0)
 ;
"RTN","LRVRMI2A",146,0)
N12A ; Process mycobacteria organism
"RTN","LRVRMI2A",147,0)
 ;
"RTN","LRVRMI2A",148,0)
 N DATA,DIERR,DNFLDS,FLD,I,IEN2,ISOID,LRCMT,LRCSR,LRFDA,LRI,LRIEN,LRIENS,LRMSG,LRN12,LRX,R6339,STAT
"RTN","LRVRMI2A",149,0)
 ;
"RTN","LRVRMI2A",150,0)
 ;ZEXCEPT: IEN,LRDFN,LRIDT,LRLL,LRPROF,LRSTATUS
"RTN","LRVRMI2A",151,0)
 ;
"RTN","LRVRMI2A",152,0)
 S LRN12=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,12,IEN,0))
"RTN","LRVRMI2A",153,0)
 Q:LRN12=""
"RTN","LRVRMI2A",154,0)
 S ISOID=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,12,IEN,.1))
"RTN","LRVRMI2A",155,0)
 Q:ISOID=""
"RTN","LRVRMI2A",156,0)
 ;
"RTN","LRVRMI2A",157,0)
 ; Delete ISOID entry if it exists
"RTN","LRVRMI2A",158,0)
 S R6339=$O(^LR(LRDFN,"MI",LRIDT,12,"C",ISOID,0))
"RTN","LRVRMI2A",159,0)
 I R6339 D
"RTN","LRVRMI2A",160,0)
 . K LRFDA,LRMSG,DIERR
"RTN","LRVRMI2A",161,0)
 . S LRIEN=R6339_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI2A",162,0)
 . S LRFDA(12,63.39,LRIEN,.01)="@"
"RTN","LRVRMI2A",163,0)
 . D FILE^DIE("","LRFDA(12)","LRMSG")
"RTN","LRVRMI2A",164,0)
 ; existing ISOID was deleted so always add record
"RTN","LRVRMI2A",165,0)
 ;
"RTN","LRVRMI2A",166,0)
 K LRFDA,LRIENS,LRMSG,DIERR
"RTN","LRVRMI2A",167,0)
 S LRIEN="+1,"_LRIDT_","_LRDFN_","
"RTN","LRVRMI2A",168,0)
 S LRFDA(12,63.39,LRIEN,.01)=$P(LRN12,U)
"RTN","LRVRMI2A",169,0)
 S LRFDA(12,63.39,LRIEN,.1)=ISOID
"RTN","LRVRMI2A",170,0)
 S LRFDA(12,63.39,LRIEN,1)=$P(LRN12,U,2)
"RTN","LRVRMI2A",171,0)
 D UPDATE^DIE("","LRFDA(12)","LRIENS","LRMSG")
"RTN","LRVRMI2A",172,0)
 S R6339=$G(LRIENS(1))
"RTN","LRVRMI2A",173,0)
 Q:'R6339
"RTN","LRVRMI2A",174,0)
 ;
"RTN","LRVRMI2A",175,0)
 ; Store code system references
"RTN","LRVRMI2A",176,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,12,IEN,0,.01))
"RTN","LRVRMI2A",177,0)
 F LRI=1:1:3 I $P(LRX,"^",LRI) D
"RTN","LRVRMI2A",178,0)
 . N LRDATA
"RTN","LRVRMI2A",179,0)
 . S LRDATA(.01)=LRDFN_",MI,"_LRIDT_",12,"_R6339_",0"
"RTN","LRVRMI2A",180,0)
 . S LRDATA(.02)=$S(LRI<3:2,1:3),LRDATA(.03)=$P(LRX,"^",LRI),LRDATA(.04)=$P("LN^NLT^SCT","^",LRI)
"RTN","LRVRMI2A",181,0)
 . D SETREF^LRUCSR(LRDFN,LRDATA(.01),.LRDATA,1)
"RTN","LRVRMI2A",182,0)
 ;
"RTN","LRVRMI2A",183,0)
 ; Store performing lab
"RTN","LRVRMI2A",184,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,12,IEN,0,.01,1))
"RTN","LRVRMI2A",185,0)
 I $P(LRX,"^") D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_",12,"_R6339_",0",$P(LRX,"^"))
"RTN","LRVRMI2A",186,0)
 ;
"RTN","LRVRMI2A",187,0)
 S STAT=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,12,IEN,0,.01,0))
"RTN","LRVRMI2A",188,0)
 D BLDSTAT^LRVRMI4A(63.05,23,STAT,.LRSTATUS)
"RTN","LRVRMI2A",189,0)
 ;
"RTN","LRVRMI2A",190,0)
 ; Process comments
"RTN","LRVRMI2A",191,0)
 K LRFDA,LRIENS,LRMSG,DIERR
"RTN","LRVRMI2A",192,0)
 M LRCMT=^LR(LRDFN,"MI",LRIDT,12,IEN,1)
"RTN","LRVRMI2A",193,0)
 S IEN2=0
"RTN","LRVRMI2A",194,0)
 F  S IEN2=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,12,IEN,1,IEN2)) Q:'IEN2  D
"RTN","LRVRMI2A",195,0)
 . S LRX=^TMP("LRMI",$J,LRDFN,"MI",LRIDT,12,IEN,1,IEN2,0),LRX=$S(LRX'="":LRX,1:" ")
"RTN","LRVRMI2A",196,0)
 . I LRX'=" ",$$DUPCHK^LRVRMI3(LRLL,LRPROF,.LRCMT,LRX) Q
"RTN","LRVRMI2A",197,0)
 . S LRIEN="+"_IEN2_","_R6339_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI2A",198,0)
 . S LRFDA(12,63.4,LRIEN,.01)=LRX
"RTN","LRVRMI2A",199,0)
 I $D(LRFDA) D UPDATE^DIE("","LRFDA(12)","","LRMSG")
"RTN","LRVRMI2A",200,0)
 ;
"RTN","LRVRMI2A",201,0)
 ; Add drug susceptibilities
"RTN","LRVRMI2A",202,0)
 S IEN2=1.999999999,IEN2=2
"RTN","LRVRMI2A",203,0)
 K LRFDA,LRIENS,LRMSG,DIERR
"RTN","LRVRMI2A",204,0)
 F  S IEN2=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,12,IEN,IEN2)) Q:'IEN2  D  ;
"RTN","LRVRMI2A",205,0)
 . S STAT=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,12,IEN,IEN2,.01,0))
"RTN","LRVRMI2A",206,0)
 . D BLDSTAT^LRVRMI4A(63.05,23,STAT,.LRSTATUS)
"RTN","LRVRMI2A",207,0)
 . S LRIEN=R6339_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI2A",208,0)
 . S DATA=^TMP("LRMI",$J,LRDFN,"MI",LRIDT,12,IEN,IEN2)
"RTN","LRVRMI2A",209,0)
 . S DNFLDS=$$DN2FLDS^LRVRMI4A(IEN2,,12)
"RTN","LRVRMI2A",210,0)
 . S FLD=$P(DNFLDS,"^",1)
"RTN","LRVRMI2A",211,0)
 . I FLD S LRFDA(12,63.39,LRIEN,FLD)=DATA
"RTN","LRVRMI2A",212,0)
 . S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,12,IEN,IEN2,.01))
"RTN","LRVRMI2A",213,0)
 . F I=1:1:3 I $P(LRX,"^",I) S LRCSR(IEN2_";1",$S(I<3:2,1:3),$P("LN^NLT^SCT","^",I))=$P(LRX,"^",I)
"RTN","LRVRMI2A",214,0)
 ;
"RTN","LRVRMI2A",215,0)
 ; File susceptibilities
"RTN","LRVRMI2A",216,0)
 I $D(LRFDA) D FILE^DIE("","LRFDA(12)","LRMSG")
"RTN","LRVRMI2A",217,0)
 ;
"RTN","LRVRMI2A",218,0)
 ; Store code system references
"RTN","LRVRMI2A",219,0)
 I $D(LRCSR) D CSR^LRVRMI4A(.LRCSR,LRDFN_",MI,"_LRIDT_",12,"_IEN_",")
"RTN","LRVRMI2A",220,0)
 ;
"RTN","LRVRMI2A",221,0)
 Q
"RTN","LRVRMI2A",222,0)
 ;
"RTN","LRVRMI2A",223,0)
 ;
"RTN","LRVRMI2A",224,0)
N17 ; Process Virology
"RTN","LRVRMI2A",225,0)
 N DIERR,IEN,IEN2,IEN3,LRFDA,LRIEN,LRMSG
"RTN","LRVRMI2A",226,0)
 ;
"RTN","LRVRMI2A",227,0)
 ;ZEXCEPT: LRDFN,LRDUZ,LRIDT,LRNOW
"RTN","LRVRMI2A",228,0)
 ;
"RTN","LRVRMI2A",229,0)
 S (IEN,IEN2,IEN3)=0
"RTN","LRVRMI2A",230,0)
 F  S IEN=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,17,IEN)) Q:IEN<1  D N17A
"RTN","LRVRMI2A",231,0)
 ;
"RTN","LRVRMI2A",232,0)
 S LRIEN=LRIDT_","_LRDFN_","
"RTN","LRVRMI2A",233,0)
 I LRINTYPE=10 S LRFDA(17,63.05,LRIEN,33)=LRNOW
"RTN","LRVRMI2A",234,0)
 S LRFDA(17,63.05,LRIEN,35)=$S($G(LRDUZ):LRDUZ,1:$G(DUZ))
"RTN","LRVRMI2A",235,0)
 D FILE^DIE("","LRFDA(17)","LRMSG")
"RTN","LRVRMI2A",236,0)
 S LRRPTAPP=1
"RTN","LRVRMI2A",237,0)
 Q
"RTN","LRVRMI2A",238,0)
 ;
"RTN","LRVRMI2A",239,0)
 ;
"RTN","LRVRMI2A",240,0)
N17A ; Process virus
"RTN","LRVRMI2A",241,0)
 ;
"RTN","LRVRMI2A",242,0)
 N DIERR,ISOID,LRFDA,LRI,LRIEN,LRMSG,LRN17,LRX,R6343
"RTN","LRVRMI2A",243,0)
 ;
"RTN","LRVRMI2A",244,0)
 ;ZEXCEPT: IEN,LRDFN,LRIDT
"RTN","LRVRMI2A",245,0)
 ;
"RTN","LRVRMI2A",246,0)
 S LRN17=^TMP("LRMI",$J,LRDFN,"MI",LRIDT,17,IEN,0)
"RTN","LRVRMI2A",247,0)
 Q:LRN17=""
"RTN","LRVRMI2A",248,0)
 S ISOID=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,17,IEN,.1))
"RTN","LRVRMI2A",249,0)
 Q:ISOID=""
"RTN","LRVRMI2A",250,0)
 ;
"RTN","LRVRMI2A",251,0)
 ; Delete ISOID if it exists
"RTN","LRVRMI2A",252,0)
 S R6343=$O(^LR(LRDFN,"MI",LRIDT,17,"C",ISOID,0))
"RTN","LRVRMI2A",253,0)
 I R6343 D
"RTN","LRVRMI2A",254,0)
 . K LRFDA,LRMSG,DIERR
"RTN","LRVRMI2A",255,0)
 . S LRIEN=R6343_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI2A",256,0)
 . S LRFDA(17,63.43,LRIEN,.01)="@"
"RTN","LRVRMI2A",257,0)
 . D FILE^DIE("","LRFDA(17)","LRMSG")
"RTN","LRVRMI2A",258,0)
 ;
"RTN","LRVRMI2A",259,0)
 ; Store code system references
"RTN","LRVRMI2A",260,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,17,IEN,0,.01))
"RTN","LRVRMI2A",261,0)
 F LRI=1:1:3 I $P(LRX,"^",LRI) D
"RTN","LRVRMI2A",262,0)
 . N LRDATA
"RTN","LRVRMI2A",263,0)
 . S LRDATA(.01)=LRDFN_",MI,"_LRIDT_",17,"_R6343_",0"
"RTN","LRVRMI2A",264,0)
 . S LRDATA(.02)=$S(LRI<3:2,1:3),LRDATA(.03)=$P(LRX,"^",LRI),LRDATA(.04)=$P("LN^NLT^SCT","^",LRI)
"RTN","LRVRMI2A",265,0)
 . D SETREF^LRUCSR(LRDFN,LRDATA(.01),.LRDATA,1)
"RTN","LRVRMI2A",266,0)
 ;
"RTN","LRVRMI2A",267,0)
 ; Store performing lab
"RTN","LRVRMI2A",268,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,17,IEN,0,.01,1))
"RTN","LRVRMI2A",269,0)
 I $P(LRX,"^") D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_",17,"_R6343_",0",$P(LRX,"^"))
"RTN","LRVRMI2A",270,0)
 ;
"RTN","LRVRMI2A",271,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,17,IEN,0,.01,0))
"RTN","LRVRMI2A",272,0)
 D BLDSTAT^LRVRMI4A(63.05,34,$P(LRX,"^"),.LRSTATUS)
"RTN","LRVRMI2A",273,0)
 ;
"RTN","LRVRMI2A",274,0)
 K LRFDA,LRIEN,LRMSG,DIERR
"RTN","LRVRMI2A",275,0)
 S LRIEN="+1,"_LRIDT_","_LRDFN_","
"RTN","LRVRMI2A",276,0)
 S LRFDA(17,63.43,LRIEN,.01)=LRN17
"RTN","LRVRMI2A",277,0)
 S LRFDA(17,63.43,LRIEN,.1)=ISOID
"RTN","LRVRMI2A",278,0)
 D UPDATE^DIE("","LRFDA(17)","","LRMSG")
"RTN","LRVRMI2A",279,0)
 ;
"RTN","LRVRMI2A",280,0)
 Q
"RTN","LRVRMI3")
0^3^B26756120
"RTN","LRVRMI3",1,0)
LRVRMI3 ;DALOI/STAFF - LAB MICRO LEDI INTERFACE ;09/07/16  08:09
"RTN","LRVRMI3",2,0)
 ;;5.2;LAB SERVICE;**350,427,453,474**;Sep 27, 1994;Build 14
"RTN","LRVRMI3",3,0)
 ;
"RTN","LRVRMI3",4,0)
 ; Part of Micro LEDI interface.  It is a continuation of ^LRVRMI4 and ^LRVRMI2. Processes data in the temp global ^TMP("LRMI")
"RTN","LRVRMI3",5,0)
 ; and stores it into the appropriate sections of the Lab Data Microbiology file (#63.05).
"RTN","LRVRMI3",6,0)
 ;
"RTN","LRVRMI3",7,0)
 ;
"RTN","LRVRMI3",8,0)
NODE(LRNODE) ;  Process similar multiples - nodes 15,19-31
"RTN","LRVRMI3",9,0)
 ; Call with LRNODE = node in MI subscript to process
"RTN","LRVRMI3",10,0)
 ;
"RTN","LRVRMI3",11,0)
 N DIERR,IEN,LRCMT,LRFDA,LRFDAIEN,LRFILE,LRERR,LRIEN,LRMSG,LRPL,LRX,X
"RTN","LRVRMI3",12,0)
 ; Mycology smear/prep^^^^Preliminary bacteriology comment^Preliminary virology comment^Preliminary parasite comment^Preliminary mycology comment^Preliminary TB comment^
"RTN","LRVRMI3",13,0)
 ; Parasitology smear/prep^Bacteriology smear/prep^Bacteriology test^Parasite test^Mycology test^TB test^Virology test^Sterility test
"RTN","LRVRMI3",14,0)
 ;
"RTN","LRVRMI3",15,0)
 S LRFILE=$P("63.371^^^^63.06^63.431^63.1^63.11^63.18^63.341^63.291^63.061^63.361^63.111^63.181^63.432^63.292^","^",LRNODE-14)
"RTN","LRVRMI3",16,0)
 M LRCMT=^LR(LRDFN,"MI",LRIDT,LRNODE)
"RTN","LRVRMI3",17,0)
 ;
"RTN","LRVRMI3",18,0)
 S IEN=0
"RTN","LRVRMI3",19,0)
 F  S IEN=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,LRNODE,IEN)) Q:IEN<1  D
"RTN","LRVRMI3",20,0)
 . S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,LRNODE,IEN,0)),LRX=$S(LRX'="":LRX,1:" ")
"RTN","LRVRMI3",21,0)
 . I LRX'=" ",$$DUPCHK^LRVRMI3(LRLL,LRPROF,.LRCMT,LRX) Q
"RTN","LRVRMI3",22,0)
 . S LRFDA(1,LRFILE,"+"_IEN_","_LRIDT_","_LRDFN_",",.01)=LRX
"RTN","LRVRMI3",23,0)
 . ;S LRFDAIEN(IEN)=IEN
"RTN","LRVRMI3",24,0)
 . ;
"RTN","LRVRMI3",25,0)
 . ; if result came across in NTE, PL and status info will be under ^(0) node
"RTN","LRVRMI3",26,0)
 . I $D(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,LRNODE,0)) D  ;
"RTN","LRVRMI3",27,0)
 . . S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,LRNODE,0))
"RTN","LRVRMI3",28,0)
 . . S X=$P(LRX,"^",4)
"RTN","LRVRMI3",29,0)
 . . D STAT4CMT(LRFILE,X,.LRSTATUS)
"RTN","LRVRMI3",30,0)
 . . I $P(LRX,"^") S LRPL(IEN)=$P(LRX,"^")
"RTN","LRVRMI3",31,0)
 . ;
"RTN","LRVRMI3",32,0)
 . ; if result came across in OBX, PL and status info will be under ^(IEN,0,0) node
"RTN","LRVRMI3",33,0)
 . I $D(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,LRNODE,IEN,0,0)) D  ;
"RTN","LRVRMI3",34,0)
 . . S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,LRNODE,IEN,0,0))
"RTN","LRVRMI3",35,0)
 . . S X=$P(LRX,"^",4)
"RTN","LRVRMI3",36,0)
 . . D STAT4CMT(LRFILE,X,.LRSTATUS)
"RTN","LRVRMI3",37,0)
 . . I $P(LRX,"^") S LRPL(IEN)=$P(LRX,"^")
"RTN","LRVRMI3",38,0)
 . ;
"RTN","LRVRMI3",39,0)
 ;
"RTN","LRVRMI3",40,0)
 I '$D(LRFDA) Q
"RTN","LRVRMI3",41,0)
 ;
"RTN","LRVRMI3",42,0)
 D UPDATE^DIE("","LRFDA(1)","LRFDAIEN","LRERR")
"RTN","LRVRMI3",43,0)
 S IEN=0
"RTN","LRVRMI3",44,0)
 F  S IEN=$O(LRPL(IEN)) Q:'IEN  D
"RTN","LRVRMI3",45,0)
 . I $G(LRFDAIEN(IEN)) D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_","_LRNODE_","_LRFDAIEN(IEN),LRPL(IEN))
"RTN","LRVRMI3",46,0)
 ;
"RTN","LRVRMI3",47,0)
 ;
"RTN","LRVRMI3",48,0)
 ; Update d/t approved and user approving
"RTN","LRVRMI3",49,0)
 S LRX=$$RPTDT(LRDFN,LRIDT,LRNODE,LRNOW,$S($G(LRDUZ):LRDUZ,1:$G(DUZ)))
"RTN","LRVRMI3",50,0)
 ;
"RTN","LRVRMI3",51,0)
 Q
"RTN","LRVRMI3",52,0)
 ;
"RTN","LRVRMI3",53,0)
 ;
"RTN","LRVRMI3",54,0)
SETPL(NODE) ; Setup LRPL array
"RTN","LRVRMI3",55,0)
 ; Call with NODE = node in MI subscript to retrieve the performing lab
"RTN","LRVRMI3",56,0)
 ;
"RTN","LRVRMI3",57,0)
 N LRX
"RTN","LRVRMI3",58,0)
 S LRX=^TMP("LRMI",$J,LRDFN,"MI",LRIDT,NODE,IEN,0,0)
"RTN","LRVRMI3",59,0)
 I $P(LRX,"^") S LRPL(IEN)=$P(LRX,"^")
"RTN","LRVRMI3",60,0)
 Q
"RTN","LRVRMI3",61,0)
 ;
"RTN","LRVRMI3",62,0)
 ;
"RTN","LRVRMI3",63,0)
STOREPL(NODE) ; Set performing lab
"RTN","LRVRMI3",64,0)
 ; Call with NODE = node in MI subscript to retrieve the performing lab
"RTN","LRVRMI3",65,0)
 N IEN
"RTN","LRVRMI3",66,0)
 S IEN=0
"RTN","LRVRMI3",67,0)
 F  S IEN=$O(LRPL(IEN)) Q:'IEN  I $G(LRFDAIEN(IEN)) D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_","_NODE_","_LRFDAIEN(IEN),LRPL(IEN))
"RTN","LRVRMI3",68,0)
 Q
"RTN","LRVRMI3",69,0)
 ;
"RTN","LRVRMI3",70,0)
 ;
"RTN","LRVRMI3",71,0)
DUPCHK(LRLL,LRPROF,LRCMT,LRCOM) ; Check for duplicates - comment stripped if spaces, force to upper case unless
"RTN","LRVRMI3",72,0)
 ; flag set to store duplicates (Field #2.2 of PROFILE multiple in file #68.2)
"RTN","LRVRMI3",73,0)
 ;
"RTN","LRVRMI3",74,0)
 ; Call with  LRLL = load/work list ien
"RTN","LRVRMI3",75,0)
 ;          LRPROF = profile ien in load/worklist
"RTN","LRVRMI3",76,0)
 ;           LRCMT = array containing current comments on file
"RTN","LRVRMI3",77,0)
 ;           LRCOM = new comment to check
"RTN","LRVRMI3",78,0)
 ;
"RTN","LRVRMI3",79,0)
 ; Returns LRDUP = 0 (no duplicate), 1 (duplicate)
"RTN","LRVRMI3",80,0)
 ;
"RTN","LRVRMI3",81,0)
 N LRDUP,LRI,LRX,LRY
"RTN","LRVRMI3",82,0)
 S LRDUP=0
"RTN","LRVRMI3",83,0)
 I '$P($G(^LRO(68.2,LRLL,10,+$G(LRPROF),0)),U,4) D
"RTN","LRVRMI3",84,0)
 . S LRI=0,LRY=$TR(LRCOM," ",""),LRY=$$UP^XLFSTR(LRY)
"RTN","LRVRMI3",85,0)
 . F  S LRI=$O(LRCMT(LRI)) Q:'LRI  D  Q:LRDUP
"RTN","LRVRMI3",86,0)
 . . S LRX=$P(LRCMT(LRI,0),U),LRX=$TR(LRX," ",""),LRX=$$UP^XLFSTR(LRX)
"RTN","LRVRMI3",87,0)
 . . I LRX=LRY S LRDUP=1
"RTN","LRVRMI3",88,0)
 Q LRDUP
"RTN","LRVRMI3",89,0)
 ;
"RTN","LRVRMI3",90,0)
 ;
"RTN","LRVRMI3",91,0)
STAT4CMT(FILE,STAT,LRSTATUS) ; Calculate status for comment nodes (eg BACT SMEAR)
"RTN","LRVRMI3",92,0)
 ; Inputs
"RTN","LRVRMI3",93,0)
 ;       FILE: The file # of the comment field in #63.
"RTN","LRVRMI3",94,0)
 ;       STAT: The status (eg F)
"RTN","LRVRMI3",95,0)
 ;   LRSTATUS:<byref>  Input and Output
"RTN","LRVRMI3",96,0)
 ; Outputs
"RTN","LRVRMI3",97,0)
 ;   LRSTATUS:
"RTN","LRVRMI3",98,0)
 N SUBF,FLD
"RTN","LRVRMI3",99,0)
 S (FLD,SUBF)=""
"RTN","LRVRMI3",100,0)
 ;
"RTN","LRVRMI3",101,0)
 I FILE=63.291 S SUBF=63.05,FLD=11.5 ; Bact Smear
"RTN","LRVRMI3",102,0)
 I FILE=63.341 S SUBF=63.05,FLD=15 ; Para Smear
"RTN","LRVRMI3",103,0)
 I FILE=63.371 S SUBF=63.05,FLD=19 ; Myco Smear
"RTN","LRVRMI3",104,0)
 I FILE=63.06 S SUBF=63.05,FLD=11.5 ; preliminary bacteria comment
"RTN","LRVRMI3",105,0)
 I FILE=63.431 S SUBF=63.05,FLD=34 ; preliminary virus comment
"RTN","LRVRMI3",106,0)
 I FILE=63.1 S SUBF=63.05,FLD=15 ; preliminary parasite comment
"RTN","LRVRMI3",107,0)
 I FILE=63.11 S SUBF=63.05,FLD=19 ; preliminary mycology comment
"RTN","LRVRMI3",108,0)
 I FILE=63.18 S SUBF=63.05,FLD=23 ; preliminary TB comment
"RTN","LRVRMI3",109,0)
 I FILE=63.061 S SUBF=63.05,FLD=11.5 ; bacteria tests
"RTN","LRVRMI3",110,0)
 I FILE=63.361 S SUBF=63.05,FLD=15 ; parasitology tests
"RTN","LRVRMI3",111,0)
 I FILE=63.111 S SUBF=63.05,FLD=19 ; mycology tests
"RTN","LRVRMI3",112,0)
 I FILE=63.181 S SUBF=63.05,FLD=23 ; TB tests
"RTN","LRVRMI3",113,0)
 I FILE=63.432 S SUBF=63.05,FLD=34 ; virology tests
"RTN","LRVRMI3",114,0)
 I FILE=63.292 S SUBF=63.05,FLD=11.5 ; sterility tests
"RTN","LRVRMI3",115,0)
 ;
"RTN","LRVRMI3",116,0)
 I FLD,SUBF D BLDSTAT^LRVRMI4A(SUBF,FLD,STAT,.LRSTATUS)
"RTN","LRVRMI3",117,0)
 ;
"RTN","LRVRMI3",118,0)
 Q
"RTN","LRVRMI3",119,0)
 ;
"RTN","LRVRMI3",120,0)
 ;
"RTN","LRVRMI3",121,0)
RPTDT(LRDFN,LRIDT,SUBSCR,RPTDT,USER) ; File Report Approved Date and Person Reporting
"RTN","LRVRMI3",122,0)
 ; Inputs
"RTN","LRVRMI3",123,0)
 ;  LRDFN: LRDFN
"RTN","LRVRMI3",124,0)
 ;  LRIDT: LRIDT
"RTN","LRVRMI3",125,0)
 ; SUBSCR: MI Result Subscript (eg 19,21,23,24,25,26)
"RTN","LRVRMI3",126,0)
 ;  RPTDT: Report Approved Date/Time
"RTN","LRVRMI3",127,0)
 ;   USER: Person Reporting (#200)
"RTN","LRVRMI3",128,0)
 ; Outputs
"RTN","LRVRMI3",129,0)
 ;  Returns 0^ErrNum^ErrMsg on error, 1 on success
"RTN","LRVRMI3",130,0)
 N DIERR,FLDS,IEN,LRFDA,LRMSG,LRX
"RTN","LRVRMI3",131,0)
 ;
"RTN","LRVRMI3",132,0)
 S LRDFN=$G(LRDFN),LRIDT=$G(LRIDT),SUBSCR=$G(SUBSCR),(FLDS,LRX)=""
"RTN","LRVRMI3",133,0)
 ;
"RTN","LRVRMI3",134,0)
 I $G(RPTDT)'>0 S RPTDT=$$NOW^XLFDT()
"RTN","LRVRMI3",135,0)
 I $G(USER)="" S USER=$S($G(LRDUZ):LRDUZ,1:$G(DUZ))
"RTN","LRVRMI3",136,0)
 I LRDFN,LRIDT,SUBSCR S FLDS=$$NODE2FLD(SUBSCR)
"RTN","LRVRMI3",137,0)
 ;
"RTN","LRVRMI3",138,0)
 I FLDS'="" D
"RTN","LRVRMI3",139,0)
 . S IEN=LRIDT_","_LRDFN_","
"RTN","LRVRMI3",140,0)
 . I LRINTYPE=10 S LRFDA(1,63.05,IEN,$P(FLDS,"^",1))=RPTDT
"RTN","LRVRMI3",141,0)
 . S LRFDA(1,63.05,IEN,$P(FLDS,"^",2))=USER
"RTN","LRVRMI3",142,0)
 . D FILE^DIE("","LRFDA(1)","LRMSG")
"RTN","LRVRMI3",143,0)
 . I '$D(LRMSG) S LRX=1,LRRPTAPP=1 Q
"RTN","LRVRMI3",144,0)
 . S LRX="0^2^FileMan error"
"RTN","LRVRMI3",145,0)
 E  S LRX="0^1^No Field #s found"
"RTN","LRVRMI3",146,0)
 ;
"RTN","LRVRMI3",147,0)
 Q LRX
"RTN","LRVRMI3",148,0)
 ;
"RTN","LRVRMI3",149,0)
 ;
"RTN","LRVRMI3",150,0)
NODE2FLD(NODE) ; Resolve the fields to update based on the node
"RTN","LRVRMI3",151,0)
 ; Call with NODE = node in MI subscript to process
"RTN","LRVRMI3",152,0)
 ;
"RTN","LRVRMI3",153,0)
 ; Returns FIELDS = Report Date Approved^Person Reporting field #s
"RTN","LRVRMI3",154,0)
 ;
"RTN","LRVRMI3",155,0)
 N FIELDS
"RTN","LRVRMI3",156,0)
 S NODE=$G(NODE),FIELDS=""
"RTN","LRVRMI3",157,0)
 ;
"RTN","LRVRMI3",158,0)
 I NODE'="" D
"RTN","LRVRMI3",159,0)
 . I NODE?1(1"19",1"25",1"26",1"31") S FIELDS="11^11.55" Q
"RTN","LRVRMI3",160,0)
 . I NODE?1(1"23",1"29") S FIELDS="22^25.5" Q
"RTN","LRVRMI3",161,0)
 . I NODE?1(1"21",1"24",1"27") S FIELDS="14^15.5" Q
"RTN","LRVRMI3",162,0)
 . I NODE?1(1"15",1"22",1"28") S FIELDS="18^19.5" Q
"RTN","LRVRMI3",163,0)
 . I NODE?1(1"20",1"30") S FIELDS="33^35" Q
"RTN","LRVRMI3",164,0)
 ;
"RTN","LRVRMI3",165,0)
 Q FIELDS
"RTN","LRVRMI4")
0^4^B39771458
"RTN","LRVRMI4",1,0)
LRVRMI4 ;DALOI/STAFF - LAH/TMP TO FILE 63 ;09/07/16  08:09
"RTN","LRVRMI4",2,0)
 ;;5.2;LAB SERVICE;**350,427,474**;Sep 27, 1994;Build 14
"RTN","LRVRMI4",3,0)
 ;
"RTN","LRVRMI4",4,0)
 ; Extracts the information in the ^TMP("LRMI",$J) global and stores it into the Lab Data micro subfile.
"RTN","LRVRMI4",5,0)
 ;
"RTN","LRVRMI4",6,0)
 Q
"RTN","LRVRMI4",7,0)
 ;
"RTN","LRVRMI4",8,0)
EN ;
"RTN","LRVRMI4",9,0)
 N LRNODE,LRNOW,LRRPTAPP,LRSTATUS,LR63539,X,I
"RTN","LRVRMI4",10,0)
 Q:'$D(^TMP("LRMI",$J,LRDFN,"MI",LRIDT))
"RTN","LRVRMI4",11,0)
 S LRNOW=$$NOW^XLFDT
"RTN","LRVRMI4",12,0)
 ; Get IEN of last Micro Audit on file
"RTN","LRVRMI4",13,0)
 S LR63539=0
"RTN","LRVRMI4",14,0)
 S X=$O(^LR(LRDFN,"MI",LRIDT,32,"B","A"),-1)
"RTN","LRVRMI4",15,0)
 I X S LR63539=$O(^LR(LRDFN,"MI",LRIDT,32,"B",X,0))
"RTN","LRVRMI4",16,0)
 ;
"RTN","LRVRMI4",17,0)
 ; If any of these nodes are defined then trigger the audit
"RTN","LRVRMI4",18,0)
 F I=1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18,99 I $D(^LR(LRDFN,"MI",LRIDT,I)) D  Q
"RTN","LRVRMI4",19,0)
 . I $G(LRSB)'>0 N LRSB S LRSB=$S(I<5:1,I<8:5,I<11:8,I<14:11,I<19:16,I=99:.99,1:0)
"RTN","LRVRMI4",20,0)
 . I LRSB>0 D AUDTRG
"RTN","LRVRMI4",21,0)
 ;
"RTN","LRVRMI4",22,0)
 I $O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,2,0)) D N2
"RTN","LRVRMI4",23,0)
 I $O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,3,0)) D N3^LRVRMI4A
"RTN","LRVRMI4",24,0)
 I $O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,4,0)) D N4
"RTN","LRVRMI4",25,0)
 I $O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,0)) D N6^LRVRMI4A
"RTN","LRVRMI4",26,0)
 I $O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,7,0)) D N7^LRVRMI2
"RTN","LRVRMI4",27,0)
 I $O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,9,0)) D N9^LRVRMI2A
"RTN","LRVRMI4",28,0)
 I $O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,10,0)) D N10^LRVRMI2
"RTN","LRVRMI4",29,0)
 I $D(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,11)) D N11^LRVRMI2A
"RTN","LRVRMI4",30,0)
 I $O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,12,0)) D N12^LRVRMI2A
"RTN","LRVRMI4",31,0)
 I $O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,13,0)) D N13^LRVRMI2
"RTN","LRVRMI4",32,0)
 ;I $O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,15,0)) D N15^LRVRMI2
"RTN","LRVRMI4",33,0)
 I $O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,17,0)) D N17^LRVRMI2A
"RTN","LRVRMI4",34,0)
 I $O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,18,0)) D N18^LRVRMI2
"RTN","LRVRMI4",35,0)
 ;
"RTN","LRVRMI4",36,0)
 F LRNODE=15,19:1:31 I $O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,LRNODE,0)) D NODE^LRVRMI3(LRNODE)
"RTN","LRVRMI4",37,0)
 ;
"RTN","LRVRMI4",38,0)
 I $D(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,99)) D N99
"RTN","LRVRMI4",39,0)
 ;
"RTN","LRVRMI4",40,0)
 ; Only release report when receving verified report from external lab (LEDI interface)
"RTN","LRVRMI4",41,0)
 I LRINTYPE=10 D
"RTN","LRVRMI4",42,0)
 . D SETSTAT^LRVRMI4A(.LRSTATUS)
"RTN","LRVRMI4",43,0)
 . I (LRSTATUS(0)="C")!(LRSTATUS(0)="F") D FIN  ; ccr_5439n - Added IF statement to only Do FIN if overall status is final or corrected. LMT 9/6/11
"RTN","LRVRMI4",44,0)
 ;
"RTN","LRVRMI4",45,0)
 I $G(LRRPTAPP) D VT1^LRMIUT1
"RTN","LRVRMI4",46,0)
 ;
"RTN","LRVRMI4",47,0)
 ; Update MICRO AUDIT to reflect corrected status on verified reference lab reports (interface type 10 in file #62.48)
"RTN","LRVRMI4",48,0)
 ;  If audit doesn't exist then create instead of updating.
"RTN","LRVRMI4",49,0)
 I LRINTYPE=10,LRSTATUS(0)="C" D
"RTN","LRVRMI4",50,0)
 . I LR63539<1 D AUDTRG Q
"RTN","LRVRMI4",51,0)
 . N LRFDA,LRIEN,LRMSG,DIERR
"RTN","LRVRMI4",52,0)
 . S LRIEN=LR63539_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI4",53,0)
 . S LRFDA(1,63.539,LRIEN,3)=3 ; Edit Type
"RTN","LRVRMI4",54,0)
 . D FILE^DIE("","LRFDA(1)","LRMSG")
"RTN","LRVRMI4",55,0)
 ;
"RTN","LRVRMI4",56,0)
 Q
"RTN","LRVRMI4",57,0)
 ;
"RTN","LRVRMI4",58,0)
 ;
"RTN","LRVRMI4",59,0)
FIN ; Release report
"RTN","LRVRMI4",60,0)
 N LRFDA,LRIEN,LRMSG,DIERR
"RTN","LRVRMI4",61,0)
 S LRIEN=LRIDT_","_LRDFN_","
"RTN","LRVRMI4",62,0)
 S LRFDA(1,63.05,LRIEN,.04)=$S($G(LRDUZ):LRDUZ,1:$G(DUZ))
"RTN","LRVRMI4",63,0)
 S LRFDA(1,63.05,LRIEN,.03)=LRNOW
"RTN","LRVRMI4",64,0)
 ;S LRFDA(1,63.05,LRIEN,.2)=LRNOW ; ccr_5439n - Commented this line out as there is no field .2 in subfile #63.05. LMT 9/6/11
"RTN","LRVRMI4",65,0)
 D FILE^DIE("","LRFDA(1)","LRMSG")
"RTN","LRVRMI4",66,0)
 Q
"RTN","LRVRMI4",67,0)
 ;
"RTN","LRVRMI4",68,0)
 ;
"RTN","LRVRMI4",69,0)
N2 ; Process gram stain comments
"RTN","LRVRMI4",70,0)
 N DIERR,IEN,LRCMT,LRCSR,LRDATA,LRFDA,LRFDAIEN,LRIEN,LRIENS,LRMSG,LRPL,LRX,STAT
"RTN","LRVRMI4",71,0)
 ;
"RTN","LRVRMI4",72,0)
 M LRCMT=^LR(LRDFN,"MI",LRIDT,2)
"RTN","LRVRMI4",73,0)
 ;
"RTN","LRVRMI4",74,0)
 S IEN=0,STAT=""
"RTN","LRVRMI4",75,0)
 F  S IEN=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,2,IEN)) Q:IEN<1  D
"RTN","LRVRMI4",76,0)
 . S LRX=^TMP("LRMI",$J,LRDFN,"MI",LRIDT,2,IEN,0),LRX=$S(LRX'="":LRX,1:" ")
"RTN","LRVRMI4",77,0)
 . I LRX'=" ",$$DUPCHK^LRVRMI3(LRLL,LRPROF,.LRCMT,LRX) Q
"RTN","LRVRMI4",78,0)
 . S LRIEN="+"_IEN_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI4",79,0)
 . S LRFDA(2,63.29,LRIEN,.01)=LRX
"RTN","LRVRMI4",80,0)
 . S LRX=^TMP("LRMI",$J,LRDFN,"MI",LRIDT,2,IEN,0,0)
"RTN","LRVRMI4",81,0)
 . I $P(LRX,"^") S LRPL(IEN)=$P(LRX,"^")
"RTN","LRVRMI4",82,0)
 . I $P(LRX,"^",3) S LRCSR(IEN,2,"LN")=$P(LRX,"^",3)
"RTN","LRVRMI4",83,0)
 . I $P(LRX,"^",4) S LRCSR(IEN,2,"NLT")=$P(LRX,"^",4)
"RTN","LRVRMI4",84,0)
 . I $P(LRX,"^",5)'="" D BLDSTAT^LRVRMI4A(63.05,11.5,$P(LRX,"^",5),.LRSTATUS)
"RTN","LRVRMI4",85,0)
 I '$D(LRFDA) Q
"RTN","LRVRMI4",86,0)
 ;
"RTN","LRVRMI4",87,0)
 D UPDATE^DIE("","LRFDA(2)","LRFDAIEN","LRMSG")
"RTN","LRVRMI4",88,0)
 ; Store performing lab
"RTN","LRVRMI4",89,0)
 S IEN=0
"RTN","LRVRMI4",90,0)
 F  S IEN=$O(LRPL(IEN)) Q:'IEN  D
"RTN","LRVRMI4",91,0)
 . I $G(LRPL(IEN)),$G(LRFDAIEN(IEN)) D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_",2,"_LRFDAIEN(IEN),LRPL(IEN))
"RTN","LRVRMI4",92,0)
 ;
"RTN","LRVRMI4",93,0)
 ; Store code system references
"RTN","LRVRMI4",94,0)
 I $D(LRCSR) D CSR(.LRCSR,.LRFDAIEN,LRDFN_",MI,"_LRIDT_",2,")
"RTN","LRVRMI4",95,0)
 ;
"RTN","LRVRMI4",96,0)
 K LRFDA,LRIENS,LRMSG,DIERR
"RTN","LRVRMI4",97,0)
 S LRIEN=LRIDT_","_LRDFN_","
"RTN","LRVRMI4",98,0)
 I LRINTYPE=10 S LRFDA(2,63.05,LRIEN,11)=LRNOW
"RTN","LRVRMI4",99,0)
 S LRFDA(2,63.05,LRIEN,11.55)=$S($G(LRDUZ):LRDUZ,1:$G(DUZ))
"RTN","LRVRMI4",100,0)
 D FILE^DIE("","LRFDA(2)","LRMSG")
"RTN","LRVRMI4",101,0)
 S LRRPTAPP=1
"RTN","LRVRMI4",102,0)
 Q
"RTN","LRVRMI4",103,0)
 ;
"RTN","LRVRMI4",104,0)
 ;
"RTN","LRVRMI4",105,0)
N4 ; Bact report remarks
"RTN","LRVRMI4",106,0)
 N DIERR,IEN,LRCMT,LRCSR,LRFDA,LRFDAIEN,LRIEN,LRIENS,LRMSG,LRPL,LRX
"RTN","LRVRMI4",107,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,4,0))
"RTN","LRVRMI4",108,0)
 D BLDSTAT^LRVRMI4A(63.05,11.5,$P(LRX,"^",4),.LRSTATUS)
"RTN","LRVRMI4",109,0)
 S LRPL=$P(LRX,"^")
"RTN","LRVRMI4",110,0)
 M LRCMT=^LR(LRDFN,"MI",LRIDT,4)
"RTN","LRVRMI4",111,0)
 ;
"RTN","LRVRMI4",112,0)
 S IEN=0
"RTN","LRVRMI4",113,0)
 F  S IEN=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,4,IEN)) Q:IEN<1  D  ;
"RTN","LRVRMI4",114,0)
 . S LRX=^TMP("LRMI",$J,LRDFN,"MI",LRIDT,4,IEN,0),LRX=$S(LRX'="":LRX,1:" ")
"RTN","LRVRMI4",115,0)
 . I LRX'=" ",$$DUPCHK^LRVRMI3(LRLL,LRPROF,.LRCMT,LRX) Q
"RTN","LRVRMI4",116,0)
 . S LRIEN="+"_IEN_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI4",117,0)
 . S LRFDA(4,63.33,LRIEN,.01)=LRX
"RTN","LRVRMI4",118,0)
 . I $P(LRX,"^",3) S LRCSR(IEN,2,"LN")=$P(LRX,"^",3)
"RTN","LRVRMI4",119,0)
 . I $P(LRX,"^",4) S LRCSR(IEN,2,"NLT")=$P(LRX,"^",4)
"RTN","LRVRMI4",120,0)
 I '$D(LRFDA) Q
"RTN","LRVRMI4",121,0)
 ;
"RTN","LRVRMI4",122,0)
 D UPDATE^DIE("","LRFDA(4)","LRFDAIEN","LRMSG")
"RTN","LRVRMI4",123,0)
 ;
"RTN","LRVRMI4",124,0)
 ; Store performing lab
"RTN","LRVRMI4",125,0)
 S IEN=0
"RTN","LRVRMI4",126,0)
 F  S IEN=$O(LRFDAIEN(IEN)) Q:'IEN  I LRPL D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_",4,"_LRFDAIEN(IEN),LRPL)
"RTN","LRVRMI4",127,0)
 ;
"RTN","LRVRMI4",128,0)
 ; Store code system references
"RTN","LRVRMI4",129,0)
 I $D(LRCSR) D CSR(.LRCSR,.LRFDAIEN,LRDFN_",MI,"_LRIDT_",4,")
"RTN","LRVRMI4",130,0)
 ;
"RTN","LRVRMI4",131,0)
 K LRFDA,LRIENS,LRMSG,DIERR
"RTN","LRVRMI4",132,0)
 S LRIEN=LRIDT_","_LRDFN_","
"RTN","LRVRMI4",133,0)
 I LRINTYPE=10 D
"RTN","LRVRMI4",134,0)
 . S LRFDA(4,63.05,LRIEN,11)=LRNOW
"RTN","LRVRMI4",135,0)
 . S LRFDA(4,63.05,LRIEN,11.5)=$P($G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,4,0)),U,4)
"RTN","LRVRMI4",136,0)
 S LRFDA(4,63.05,LRIEN,11.55)=$S($G(LRDUZ):LRDUZ,1:$G(DUZ))
"RTN","LRVRMI4",137,0)
 D FILE^DIE("","LRFDA(4)","LRMSG")
"RTN","LRVRMI4",138,0)
 S LRRPTAPP=1
"RTN","LRVRMI4",139,0)
 Q
"RTN","LRVRMI4",140,0)
 ;
"RTN","LRVRMI4",141,0)
 ;
"RTN","LRVRMI4",142,0)
N99 ; Comment on specimen
"RTN","LRVRMI4",143,0)
 N LRDATA,LRFDA,LRMSG,LRX
"RTN","LRVRMI4",144,0)
 S LRDATA=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,99))
"RTN","LRVRMI4",145,0)
 Q:$TR(LRDATA," ","")=""  ; don't file empty comments
"RTN","LRVRMI4",146,0)
 ; Don't file same comment
"RTN","LRVRMI4",147,0)
 I LRDATA=$G(^LR(LRDFN,"MI",LRIDT,99)) Q
"RTN","LRVRMI4",148,0)
 S LRIEN=LRIDT_","_LRDFN_","
"RTN","LRVRMI4",149,0)
 S LRFDA(99,63.05,LRIEN,.99)=LRDATA
"RTN","LRVRMI4",150,0)
 D FILE^DIE("","LRFDA(99)","LRMSG")
"RTN","LRVRMI4",151,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,99,0))
"RTN","LRVRMI4",152,0)
 I $P(LRX,"^") D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_",99",$P(LRX,"^"))
"RTN","LRVRMI4",153,0)
 Q
"RTN","LRVRMI4",154,0)
 ;
"RTN","LRVRMI4",155,0)
 ;
"RTN","LRVRMI4",156,0)
AUDTRG ; Trigger the audit trail
"RTN","LRVRMI4",157,0)
 N LRDATA,LRMODE,LRBATCH
"RTN","LRVRMI4",158,0)
 S LRMODE="LDSI",LRBATCH=1
"RTN","LRVRMI4",159,0)
 S LRDATA(63.539,1)=LRNOW
"RTN","LRVRMI4",160,0)
 S LRDATA(63.539,3)=$S($G(LRSTATUS(0))'="C":1,1:3)
"RTN","LRVRMI4",161,0)
 I LRINTYPE=1 S LRDATA(63.539,4)="Update from lab automated instrument via HL7"
"RTN","LRVRMI4",162,0)
 I LRINTYPE=10 S LRDATA(63.539,4)="Update from performing lab via HL7"
"RTN","LRVRMI4",163,0)
 D LEDI^LRMIAUD(.LRDATA)
"RTN","LRVRMI4",164,0)
 Q
"RTN","LRVRMI4",165,0)
 ;
"RTN","LRVRMI4",166,0)
 ;
"RTN","LRVRMI4",167,0)
CSR(LRCSR,LRFDAIEN,LRREF) ; Store code system references
"RTN","LRVRMI4",168,0)
 ; Call with LRCSR = array of ien/codes to store as references (pass by value)
"RTN","LRVRMI4",169,0)
 ;        LRFDAIEN = FileMan array of entries added by DBA call (pass by value)
"RTN","LRVRMI4",170,0)
 ;           LRREF = root of reference to build full reference to data
"RTN","LRVRMI4",171,0)
 ;
"RTN","LRVRMI4",172,0)
 N IEN,LRDATA,LRDATAREF,LRDFN,LRROOT,ROLE,TYPE
"RTN","LRVRMI4",173,0)
 ;
"RTN","LRVRMI4",174,0)
 S LRROOT="LRCSR",LRDFN=$P(LRREF,",")
"RTN","LRVRMI4",175,0)
 F  S LRROOT=$Q(@LRROOT) Q:LRROOT=""  D
"RTN","LRVRMI4",176,0)
 . S IEN=$QS(LRROOT,1),ROLE=$QS(LRROOT,2),TYPE=$QS(LRROOT,3)
"RTN","LRVRMI4",177,0)
 . I '$G(LRFDAIEN(IEN)) Q
"RTN","LRVRMI4",178,0)
 . S LRDATAREF=LRREF_LRFDAIEN(IEN)
"RTN","LRVRMI4",179,0)
 . S LRDATA(.01)=LRDATAREF,LRDATA(.02)=ROLE,LRDATA(.03)=LRCSR(IEN,ROLE,TYPE),LRDATA(.04)=TYPE
"RTN","LRVRMI4",180,0)
 . D SETREF^LRUCSR(LRDFN,LRDATAREF,.LRDATA,1)
"RTN","LRVRMI4",181,0)
 Q
"RTN","LRVRMI4A")
0^5^B96471289
"RTN","LRVRMI4A",1,0)
LRVRMI4A ;DALOI/STAFF - LAH/TMP TO FILE 63 ;09/07/16  08:09
"RTN","LRVRMI4A",2,0)
 ;;5.2;LAB SERVICE;**350,427,474**;Sep 27, 1994;Build 14
"RTN","LRVRMI4A",3,0)
 ;
"RTN","LRVRMI4A",4,0)
 ; Reference to global ^DD(filenumber,"GL") supported by ICR 999
"RTN","LRVRMI4A",5,0)
 ; Extracts the information in the ^TMP("LRMI",$J) global and stores it into the Lab Data micro subfile.
"RTN","LRVRMI4A",6,0)
 ;
"RTN","LRVRMI4A",7,0)
 Q
"RTN","LRVRMI4A",8,0)
 ;
"RTN","LRVRMI4A",9,0)
N3 ;Process Organism
"RTN","LRVRMI4A",10,0)
 ;
"RTN","LRVRMI4A",11,0)
 N DIERR,IEN,LRFDA,LRIEN,LRIENS,LRMSG
"RTN","LRVRMI4A",12,0)
 ;
"RTN","LRVRMI4A",13,0)
 ;ZEXCEPT: LRDFN,LRDUZ,LRIDT,LRNOW,LRRPTAPP
"RTN","LRVRMI4A",14,0)
 ;
"RTN","LRVRMI4A",15,0)
 S IEN=0
"RTN","LRVRMI4A",16,0)
 F  S IEN=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,3,IEN)) Q:IEN<1  D N3A
"RTN","LRVRMI4A",17,0)
 ;
"RTN","LRVRMI4A",18,0)
 K LRFDA,LRIENS,LRMSG,DIERR
"RTN","LRVRMI4A",19,0)
 S LRIEN=LRIDT_","_LRDFN_","
"RTN","LRVRMI4A",20,0)
 I LRINTYPE=10 S LRFDA(3,63.05,LRIEN,11)=LRNOW
"RTN","LRVRMI4A",21,0)
 S LRFDA(3,63.05,LRIEN,11.55)=$S($G(LRDUZ):LRDUZ,1:$G(DUZ))
"RTN","LRVRMI4A",22,0)
 D FILE^DIE("","LRFDA(3)","LRMSG")
"RTN","LRVRMI4A",23,0)
 S LRRPTAPP=1
"RTN","LRVRMI4A",24,0)
 Q
"RTN","LRVRMI4A",25,0)
 ;
"RTN","LRVRMI4A",26,0)
 ;
"RTN","LRVRMI4A",27,0)
N3A ; Process each organism
"RTN","LRVRMI4A",28,0)
 ;
"RTN","LRVRMI4A",29,0)
 N DATA,DIERR,DNFLDS,FLD,I,IEN2,ISOID
"RTN","LRVRMI4A",30,0)
 N LRCSR,LRCMT,LRDATA,LRFDA,LRI,LRIEN,LRIENS,LRMSG,LRN3,LRX,R633,STAT
"RTN","LRVRMI4A",31,0)
 ;
"RTN","LRVRMI4A",32,0)
 ; ZEXCEPT: IEN,LRDFN,LRIDT,LRLL,LRPROF,LRSTATUS
"RTN","LRVRMI4A",33,0)
 ;
"RTN","LRVRMI4A",34,0)
 S LRN3=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,3,IEN,0))
"RTN","LRVRMI4A",35,0)
 Q:LRN3=""
"RTN","LRVRMI4A",36,0)
 S ISOID=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,3,IEN,.1))
"RTN","LRVRMI4A",37,0)
 Q:ISOID=""
"RTN","LRVRMI4A",38,0)
 ;
"RTN","LRVRMI4A",39,0)
 ; Delete ISOID entry if it exists
"RTN","LRVRMI4A",40,0)
 S R633=$O(^LR(LRDFN,"MI",LRIDT,3,"C",ISOID,0))
"RTN","LRVRMI4A",41,0)
 I R633 D
"RTN","LRVRMI4A",42,0)
 . K LRFDA,LRMSG
"RTN","LRVRMI4A",43,0)
 . S LRIEN=R633_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI4A",44,0)
 . S LRFDA(3,63.3,LRIEN,.01)="@"
"RTN","LRVRMI4A",45,0)
 . D FILE^DIE("","LRFDA(3)","LRMSG")
"RTN","LRVRMI4A",46,0)
 ; existing ISOID was deleted so always add record
"RTN","LRVRMI4A",47,0)
 ;
"RTN","LRVRMI4A",48,0)
 S LRIEN="+1,"_LRIDT_","_LRDFN_","
"RTN","LRVRMI4A",49,0)
 S LRFDA(3,63.3,LRIEN,.01)=$P(LRN3,U)
"RTN","LRVRMI4A",50,0)
 S LRFDA(3,63.3,LRIEN,.1)=ISOID
"RTN","LRVRMI4A",51,0)
 S LRFDA(3,63.3,LRIEN,1)=$P(LRN3,U,2)
"RTN","LRVRMI4A",52,0)
 D UPDATE^DIE("","LRFDA(3)","LRIENS","LRMSG")
"RTN","LRVRMI4A",53,0)
 S R633=$G(LRIENS(1))
"RTN","LRVRMI4A",54,0)
 Q:'R633
"RTN","LRVRMI4A",55,0)
 ;
"RTN","LRVRMI4A",56,0)
 ; Store code system references
"RTN","LRVRMI4A",57,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,3,IEN,0,.01))
"RTN","LRVRMI4A",58,0)
 F LRI=1:1:3 I $P(LRX,"^",LRI) D
"RTN","LRVRMI4A",59,0)
 . N LRDATA
"RTN","LRVRMI4A",60,0)
 . S LRDATA(.01)=LRDFN_",MI,"_LRIDT_",3,"_R633_",0"
"RTN","LRVRMI4A",61,0)
 . S LRDATA(.02)=$S(LRI<3:2,1:3),LRDATA(.03)=$P(LRX,"^",LRI),LRDATA(.04)=$P("LN^NLT^SCT","^",LRI)
"RTN","LRVRMI4A",62,0)
 . D SETREF^LRUCSR(LRDFN,LRDATA(.01),.LRDATA,1)
"RTN","LRVRMI4A",63,0)
 ;
"RTN","LRVRMI4A",64,0)
 ; Store performing lab
"RTN","LRVRMI4A",65,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,3,IEN,0,.01,1))
"RTN","LRVRMI4A",66,0)
 I $P(LRX,"^") D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_",3,"_R633_",0",$P(LRX,"^"))
"RTN","LRVRMI4A",67,0)
 ;
"RTN","LRVRMI4A",68,0)
 S STAT=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,3,IEN,0,.01,0))
"RTN","LRVRMI4A",69,0)
 S STAT=$P(STAT,U,1)
"RTN","LRVRMI4A",70,0)
 D BLDSTAT(63.05,11.5,STAT,.LRSTATUS)
"RTN","LRVRMI4A",71,0)
 ;
"RTN","LRVRMI4A",72,0)
 ; Process organism comments
"RTN","LRVRMI4A",73,0)
 K LRFDA,LRIENS,LRMSG,DIERR
"RTN","LRVRMI4A",74,0)
 M LRCMT=^LR(LRDFN,"MI",LRIDT,3,IEN,1)
"RTN","LRVRMI4A",75,0)
 S IEN2=0
"RTN","LRVRMI4A",76,0)
 F  S IEN2=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,3,IEN,1,IEN2)) Q:'IEN2  D
"RTN","LRVRMI4A",77,0)
 . S DATA=^TMP("LRMI",$J,LRDFN,"MI",LRIDT,3,IEN,1,IEN2,0),DATA=$S(DATA'="":DATA,1:" ")
"RTN","LRVRMI4A",78,0)
 . I DATA'=" ",$$DUPCHK^LRVRMI3(LRLL,LRPROF,.LRCMT,DATA) Q
"RTN","LRVRMI4A",79,0)
 . S LRIEN="+"_IEN2_","_R633_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI4A",80,0)
 . S LRFDA(3,63.31,LRIEN,.01)=DATA
"RTN","LRVRMI4A",81,0)
 I $D(LRFDA) D UPDATE^DIE("","LRFDA(3)","","LRMSG")
"RTN","LRVRMI4A",82,0)
 ;
"RTN","LRVRMI4A",83,0)
 ; Add drug susceptibilities
"RTN","LRVRMI4A",84,0)
 S IEN2=2
"RTN","LRVRMI4A",85,0)
 K LRFDA,LRIENS,LRMSG,DIERR
"RTN","LRVRMI4A",86,0)
 F  S IEN2=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,3,IEN,IEN2)) Q:'IEN2  D
"RTN","LRVRMI4A",87,0)
 . S STAT=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,3,IEN,IEN2,.01,0))
"RTN","LRVRMI4A",88,0)
 . S STAT=$P(STAT,U,1)
"RTN","LRVRMI4A",89,0)
 . D BLDSTAT(63.05,11.5,STAT,.LRSTATUS)
"RTN","LRVRMI4A",90,0)
 . S LRIEN=R633_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI4A",91,0)
 . S DATA=^TMP("LRMI",$J,LRDFN,"MI",LRIDT,3,IEN,IEN2)
"RTN","LRVRMI4A",92,0)
 . S DNFLDS=$$DN2FLDS(IEN2,,3)
"RTN","LRVRMI4A",93,0)
 . F I=1:1:3 D  ;
"RTN","LRVRMI4A",94,0)
 . . S FLD=$P(DNFLDS,"^",I)
"RTN","LRVRMI4A",95,0)
 . . Q:'FLD
"RTN","LRVRMI4A",96,0)
 . . S LRFDA(3,63.3,LRIEN,FLD)=$P(DATA,U,I)
"RTN","LRVRMI4A",97,0)
 . S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,3,IEN,IEN2,.01))
"RTN","LRVRMI4A",98,0)
 . F I=1:1:3 I $P(LRX,"^",I) S LRCSR(IEN2_";1",$S(I<3:2,1:3),$P("LN^NLT^SCT","^",I))=$P(LRX,"^",I)
"RTN","LRVRMI4A",99,0)
 ; File susceptibilities
"RTN","LRVRMI4A",100,0)
 I $D(LRFDA) D FILE^DIE("","LRFDA(3)","LRMSG")
"RTN","LRVRMI4A",101,0)
 ;
"RTN","LRVRMI4A",102,0)
 ; Store code system references
"RTN","LRVRMI4A",103,0)
 I $D(LRCSR) D CSR(.LRCSR,LRDFN_",MI,"_LRIDT_",3,"_IEN_",")
"RTN","LRVRMI4A",104,0)
 ;
"RTN","LRVRMI4A",105,0)
 Q
"RTN","LRVRMI4A",106,0)
 ;
"RTN","LRVRMI4A",107,0)
 ;
"RTN","LRVRMI4A",108,0)
N6 ; Process Parasite
"RTN","LRVRMI4A",109,0)
 ;
"RTN","LRVRMI4A",110,0)
 N DIERR,IEN,LRFDA,LRIEN,LRIENS,LRMSG
"RTN","LRVRMI4A",111,0)
 ;
"RTN","LRVRMI4A",112,0)
 ;ZEXCEPT: LRDFN,LRDUZ,LRIDT,LRLL,LRNOW,LRPROF,LRRPTAPP,LRSTATUS
"RTN","LRVRMI4A",113,0)
 ;
"RTN","LRVRMI4A",114,0)
 S IEN=0
"RTN","LRVRMI4A",115,0)
 F  S IEN=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,IEN)) Q:IEN<1  D N6A
"RTN","LRVRMI4A",116,0)
 ;
"RTN","LRVRMI4A",117,0)
 S LRIEN=LRIDT_","_LRDFN_","
"RTN","LRVRMI4A",118,0)
 I LRINTYPE=10 S LRFDA(6,63.05,LRIEN,14)=LRNOW
"RTN","LRVRMI4A",119,0)
 S LRFDA(6,63.05,LRIEN,15.5)=$S($G(LRDUZ):LRDUZ,1:$G(DUZ))
"RTN","LRVRMI4A",120,0)
 D FILE^DIE("","LRFDA(6)","LRMSG")
"RTN","LRVRMI4A",121,0)
 S LRRPTAPP=1
"RTN","LRVRMI4A",122,0)
 Q
"RTN","LRVRMI4A",123,0)
 ;
"RTN","LRVRMI4A",124,0)
 ;
"RTN","LRVRMI4A",125,0)
N6A ; Process individual parasite result
"RTN","LRVRMI4A",126,0)
 ;
"RTN","LRVRMI4A",127,0)
 N DIERR,IEN2,ISOID,LRFDA,LRI,LRIEN,LRIENS,LRMSG,LRN6,LRX,R6334,STAT
"RTN","LRVRMI4A",128,0)
 ;
"RTN","LRVRMI4A",129,0)
 ;ZEXCEPT: LRDFN,LRIDT,LRSTATUS,IEN
"RTN","LRVRMI4A",130,0)
 ;
"RTN","LRVRMI4A",131,0)
 S LRN6=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,IEN,0))
"RTN","LRVRMI4A",132,0)
 Q:LRN6=""
"RTN","LRVRMI4A",133,0)
 S ISOID=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,IEN,.1))
"RTN","LRVRMI4A",134,0)
 Q:ISOID=""
"RTN","LRVRMI4A",135,0)
 ; Delete ISOID if it exists
"RTN","LRVRMI4A",136,0)
 S R6334=$O(^LR(LRDFN,"MI",LRIDT,6,"C",ISOID,0))
"RTN","LRVRMI4A",137,0)
 I R6334 D
"RTN","LRVRMI4A",138,0)
 . K LRFDA,LRMSG,LRIENS,DIERR
"RTN","LRVRMI4A",139,0)
 . S LRIEN=R6334_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI4A",140,0)
 . S LRFDA(6,63.34,LRIEN,.01)="@"
"RTN","LRVRMI4A",141,0)
 . D FILE^DIE("","LRFDA(6)","LRMSG")
"RTN","LRVRMI4A",142,0)
 ;
"RTN","LRVRMI4A",143,0)
 K LRFDA,LRMSG,LRIENS,DIERR
"RTN","LRVRMI4A",144,0)
 S LRIEN="+1,"_LRIDT_","_LRDFN_","
"RTN","LRVRMI4A",145,0)
 S LRFDA(6,63.34,LRIEN,.01)=LRN6
"RTN","LRVRMI4A",146,0)
 S LRFDA(6,63.34,LRIEN,.1)=ISOID
"RTN","LRVRMI4A",147,0)
 D UPDATE^DIE("","LRFDA(6)","LRIENS","LRMSG")
"RTN","LRVRMI4A",148,0)
 S R6334=$G(LRIENS(1))
"RTN","LRVRMI4A",149,0)
 Q:'R6334
"RTN","LRVRMI4A",150,0)
 ;
"RTN","LRVRMI4A",151,0)
 ; Store code system references
"RTN","LRVRMI4A",152,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,IEN,0,.01))
"RTN","LRVRMI4A",153,0)
 F LRI=1:1:3 I $P(LRX,"^",LRI) D
"RTN","LRVRMI4A",154,0)
 . N LRDATA
"RTN","LRVRMI4A",155,0)
 . S LRDATA(.01)=LRDFN_",MI,"_LRIDT_",6,"_IEN_",0"
"RTN","LRVRMI4A",156,0)
 . S LRDATA(.02)=$S(LRI<3:2,1:3),LRDATA(.03)=$P(LRX,"^",LRI),LRDATA(.04)=$P("LN^NLT^SCT","^",LRI)
"RTN","LRVRMI4A",157,0)
 . D SETREF^LRUCSR(LRDFN,LRDATA(.01),.LRDATA,1)
"RTN","LRVRMI4A",158,0)
 ;
"RTN","LRVRMI4A",159,0)
 ; Store performing lab
"RTN","LRVRMI4A",160,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,IEN,0,.01,1))
"RTN","LRVRMI4A",161,0)
 I $P(LRX,"^") D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_",6,"_R6334_",0",$P(LRX,"^"))
"RTN","LRVRMI4A",162,0)
 ;
"RTN","LRVRMI4A",163,0)
 S STAT=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,IEN,0,.01,0))
"RTN","LRVRMI4A",164,0)
 S STAT=$P(STAT,U,1)
"RTN","LRVRMI4A",165,0)
 D BLDSTAT(63.05,15,STAT,.LRSTATUS)
"RTN","LRVRMI4A",166,0)
 ;
"RTN","LRVRMI4A",167,0)
 ; Stage results
"RTN","LRVRMI4A",168,0)
 K LRFDA,LRMSG,LRIENS,DIERR
"RTN","LRVRMI4A",169,0)
 S IEN2=0
"RTN","LRVRMI4A",170,0)
 F  S IEN2=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,IEN,1,IEN2)) Q:'IEN2  D N6B
"RTN","LRVRMI4A",171,0)
 ;
"RTN","LRVRMI4A",172,0)
 Q
"RTN","LRVRMI4A",173,0)
 ;
"RTN","LRVRMI4A",174,0)
 ;
"RTN","LRVRMI4A",175,0)
N6B ; Process Parasite Stage results
"RTN","LRVRMI4A",176,0)
 ;
"RTN","LRVRMI4A",177,0)
 N DATA,DIERR,IEN3,LRCMT,LRCSR,LRFDA,LRI,LRIEN,LRIENS,LRMSG,LRPL,LRX,R6335,STAGE,STAT
"RTN","LRVRMI4A",178,0)
 ;
"RTN","LRVRMI4A",179,0)
 ;ZEXCEPT: ISOID,LRDFN,LRIDT,LRLL,LRPROF,IEN,IEN2,LRSTATUS,R6334
"RTN","LRVRMI4A",180,0)
 ;
"RTN","LRVRMI4A",181,0)
 ; Delete STAGE if it exists
"RTN","LRVRMI4A",182,0)
 S STAGE=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,IEN,1,IEN2,0))
"RTN","LRVRMI4A",183,0)
 S STAGE=$P(STAGE,U,1)
"RTN","LRVRMI4A",184,0)
 S R6335=$O(^LR(LRDFN,"MI",LRIDT,6,IEN,1,"B",ISOID,0))
"RTN","LRVRMI4A",185,0)
 I R6335 D
"RTN","LRVRMI4A",186,0)
 . K LRFDA,LRMSG,LRIENS,DIERR
"RTN","LRVRMI4A",187,0)
 . S LRIEN=R6335_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI4A",188,0)
 . S LRFDA(6,63.35,LRIEN,.01)="@"
"RTN","LRVRMI4A",189,0)
 . D FILE^DIE("","LRFDA(6)","LRMSG")
"RTN","LRVRMI4A",190,0)
 ;
"RTN","LRVRMI4A",191,0)
 K LRFDA,LRMSG,LRIENS,DIERR
"RTN","LRVRMI4A",192,0)
 S LRIEN="+"_IEN2_","_R6334_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI4A",193,0)
 S DATA=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,IEN,1,IEN2,0))
"RTN","LRVRMI4A",194,0)
 S LRFDA(6,63.35,LRIEN,.01)=$P(DATA,U,1) ;stage
"RTN","LRVRMI4A",195,0)
 S LRFDA(6,63.35,LRIEN,1)=$P(DATA,U,2) ;qty
"RTN","LRVRMI4A",196,0)
 D UPDATE^DIE("","LRFDA(6)","LRIENS","LRMSG")
"RTN","LRVRMI4A",197,0)
 ;
"RTN","LRVRMI4A",198,0)
 S R6335=$G(LRIENS(IEN2))
"RTN","LRVRMI4A",199,0)
 Q:'R6335
"RTN","LRVRMI4A",200,0)
 S STAT=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,IEN,1,IEN2,0,.01,0))
"RTN","LRVRMI4A",201,0)
 S STAT=$P(STAT,U,1)
"RTN","LRVRMI4A",202,0)
 ;
"RTN","LRVRMI4A",203,0)
 ; Store code system references for stage
"RTN","LRVRMI4A",204,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,IEN,1,IEN2,.01))
"RTN","LRVRMI4A",205,0)
 F LRI=1:1:3 I $P(LRX,"^",LRI) D
"RTN","LRVRMI4A",206,0)
 . N LRDATA
"RTN","LRVRMI4A",207,0)
 . S LRDATA(.01)=LRDFN_",MI,"_LRIDT_",6,"_R6334_",1,"_R6335_",0;1"
"RTN","LRVRMI4A",208,0)
 . S LRDATA(.02)=$S(LRI<3:2,1:3),LRDATA(.03)=$P(LRX,"^",LRI),LRDATA(.04)=$P("LN^NLT^SCT","^",LRI)
"RTN","LRVRMI4A",209,0)
 . D SETREF^LRUCSR(LRDFN,LRDATA(.01),.LRDATA,1)
"RTN","LRVRMI4A",210,0)
 ;
"RTN","LRVRMI4A",211,0)
 ; Store code system references for quantity
"RTN","LRVRMI4A",212,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,IEN,1,IEN2,1))
"RTN","LRVRMI4A",213,0)
 F LRI=1:1:3 I $P(LRX,"^",LRI) D
"RTN","LRVRMI4A",214,0)
 . N LRDATA
"RTN","LRVRMI4A",215,0)
 . S LRDATA(.01)=LRDFN_",MI,"_LRIDT_",6,"_R6334_",1,"_R6335_",0;2"
"RTN","LRVRMI4A",216,0)
 . S LRDATA(.02)=$S(LRI<3:2,1:3),LRDATA(.03)=$P(LRX,"^",LRI),LRDATA(.04)=$P("LN^NLT^SCT","^",LRI)
"RTN","LRVRMI4A",217,0)
 . D SETREF^LRUCSR(LRDFN,LRDATA(.01),.LRDATA,1)
"RTN","LRVRMI4A",218,0)
 ;
"RTN","LRVRMI4A",219,0)
 ; Store performing lab
"RTN","LRVRMI4A",220,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",6,IEN,1,IEN2,0,.01,1))
"RTN","LRVRMI4A",221,0)
 I $P(LRX,"^") D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_",6,"_R6334_",1,"_R6335_",0",$P(LRX,"^"))
"RTN","LRVRMI4A",222,0)
 ;
"RTN","LRVRMI4A",223,0)
 D BLDSTAT(63.05,15,STAT,.LRSTATUS)
"RTN","LRVRMI4A",224,0)
 ;
"RTN","LRVRMI4A",225,0)
 ; get stage comments
"RTN","LRVRMI4A",226,0)
 K LRFDA,LRMSG,LRIENS,DIERR
"RTN","LRVRMI4A",227,0)
 M LRCMT=^LR(LRDFN,"MI",LRIDT,6,IEN,1,IEN2,1)
"RTN","LRVRMI4A",228,0)
 S LRX=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,IEN,1,IEN2,1,0))
"RTN","LRVRMI4A",229,0)
 S STAT=$P(LRX,U,4)
"RTN","LRVRMI4A",230,0)
 D BLDSTAT(63.05,15,STAT,.LRSTATUS)
"RTN","LRVRMI4A",231,0)
 S IEN3=0
"RTN","LRVRMI4A",232,0)
 F  S IEN3=$O(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,IEN,1,IEN2,1,IEN3)) Q:IEN3<1  D
"RTN","LRVRMI4A",233,0)
 . S DATA=$G(^TMP("LRMI",$J,LRDFN,"MI",LRIDT,6,IEN,1,IEN2,1,IEN3,0)),DATA=$S(DATA'="":DATA,1:" ")
"RTN","LRVRMI4A",234,0)
 . I DATA'=" ",$$DUPCHK^LRVRMI3(LRLL,LRPROF,.LRCMT,DATA) Q
"RTN","LRVRMI4A",235,0)
 . S LRIEN="+"_IEN3_","_R6335_","_R6334_","_LRIDT_","_LRDFN_","
"RTN","LRVRMI4A",236,0)
 . S LRFDA(6,63.351,LRIEN,.01)=DATA
"RTN","LRVRMI4A",237,0)
 . I $P(LRX,"^") S LRPL(IEN3)=$P(LRX,"^")
"RTN","LRVRMI4A",238,0)
 . I $P(LRX,"^",3) S LRCSR(IEN3,2,"LN")=$P(LRX,"^",3)
"RTN","LRVRMI4A",239,0)
 ;
"RTN","LRVRMI4A",240,0)
 I '$D(LRFDA) Q
"RTN","LRVRMI4A",241,0)
 ;
"RTN","LRVRMI4A",242,0)
 D UPDATE^DIE("","LRFDA(6)","LRIENS","LRMSG")
"RTN","LRVRMI4A",243,0)
 ;
"RTN","LRVRMI4A",244,0)
 ; Store performing lab
"RTN","LRVRMI4A",245,0)
 S IEN3=0
"RTN","LRVRMI4A",246,0)
 F  S IEN3=$O(LRPL(IEN3)) Q:'IEN3  I $G(LRIENS(IEN3)) D SETPL^LRRPLUA(LRDFN_",MI,"_LRIDT_",6,"_LRIENS(IEN3),LRPL(IEN3))
"RTN","LRVRMI4A",247,0)
 ;
"RTN","LRVRMI4A",248,0)
 ; Store code system references
"RTN","LRVRMI4A",249,0)
 I $D(LRCSR) D CSR^LRVRMI4(.LRCSR,.LRIENS,LRDFN_",MI,"_LRIDT_",6,")
"RTN","LRVRMI4A",250,0)
 Q
"RTN","LRVRMI4A",251,0)
 ;
"RTN","LRVRMI4A",252,0)
 ;
"RTN","LRVRMI4A",253,0)
DN2FLDS(DN,FN,SUB) ;
"RTN","LRVRMI4A",254,0)
 ; Convert a drug node to a field number
"RTN","LRVRMI4A",255,0)
 ;File ^DD(filenumber,"GL")/999
"RTN","LRVRMI4A",256,0)
 ; Inputs
"RTN","LRVRMI4A",257,0)
 ;   DN : Drug Node (ie 2.0003)
"RTN","LRVRMI4A",258,0)
 ;   FN : <opt> File Number (ie 63.3)
"RTN","LRVRMI4A",259,0)
 ;  SUB : <opt> Subscript (ie 3)
"RTN","LRVRMI4A",260,0)
 ;       : Note: either FN or SUB must be supplied
"RTN","LRVRMI4A",261,0)
 ; Output
"RTN","LRVRMI4A",262,0)
 ;   The three associated field numbers for the drug node
"RTN","LRVRMI4A",263,0)
 ;     ie 15^15.1^15.2
"RTN","LRVRMI4A",264,0)
 N FLDS,I,X
"RTN","LRVRMI4A",265,0)
 S DN=$G(DN),FN=$G(FN),SUB=$G(SUB)
"RTN","LRVRMI4A",266,0)
 S FLDS=""
"RTN","LRVRMI4A",267,0)
 I FN="" D  ;
"RTN","LRVRMI4A",268,0)
 . I SUB=3 S FN=63.3
"RTN","LRVRMI4A",269,0)
 . I SUB=6 S FN=63.34
"RTN","LRVRMI4A",270,0)
 . I SUB=9 S FN=63.37
"RTN","LRVRMI4A",271,0)
 . I SUB=12 S FN=63.39
"RTN","LRVRMI4A",272,0)
 . I SUB=17 S FN=63.43
"RTN","LRVRMI4A",273,0)
 I $D(^DD(FN,"GL",DN)) D  ;
"RTN","LRVRMI4A",274,0)
 . F I=1:1:3 S X=$O(^DD(FN,"GL",DN,I,0)) I X S $P(FLDS,"^",I)=X
"RTN","LRVRMI4A",275,0)
 Q FLDS
"RTN","LRVRMI4A",276,0)
 ;
"RTN","LRVRMI4A",277,0)
 ;
"RTN","LRVRMI4A",278,0)
BLDSTAT(FN,FLD,STAT,DATA) ;
"RTN","LRVRMI4A",279,0)
 ; Builds the DATA array used for setting status(es)
"RTN","LRVRMI4A",280,0)
 ; Inputs
"RTN","LRVRMI4A",281,0)
 ;   FN : File Number  (ie 63.5)
"RTN","LRVRMI4A",282,0)
 ;  FLD : Field Number  (ie 19)
"RTN","LRVRMI4A",283,0)
 ; STAT : Status  (ie "F")
"RTN","LRVRMI4A",284,0)
 ; DATA <byref> : See Outputs
"RTN","LRVRMI4A",285,0)
 ;
"RTN","LRVRMI4A",286,0)
 ; Outputs
"RTN","LRVRMI4A",287,0)
 ; DATA <byref> : DATA(file#,field#)=status  DATA(63.05,19)="P"
"RTN","LRVRMI4A",288,0)
 ;
"RTN","LRVRMI4A",289,0)
 N CURR
"RTN","LRVRMI4A",290,0)
 I $G(STAT)="" Q
"RTN","LRVRMI4A",291,0)
 I STAT'?1(1"P",1"F",1"C") S STAT="P"
"RTN","LRVRMI4A",292,0)
 S CURR=$G(DATA(FN,FLD))
"RTN","LRVRMI4A",293,0)
 I CURR="" S DATA(FN,FLD)=STAT Q
"RTN","LRVRMI4A",294,0)
 I CURR=STAT Q
"RTN","LRVRMI4A",295,0)
 I CURR="P" Q
"RTN","LRVRMI4A",296,0)
 I CURR="F" D
"RTN","LRVRMI4A",297,0)
 . I STAT="P" S DATA(FN,FLD)="P" Q
"RTN","LRVRMI4A",298,0)
 . I STAT="C" S DATA(FN,FLD)="C" Q
"RTN","LRVRMI4A",299,0)
 Q
"RTN","LRVRMI4A",300,0)
 ;
"RTN","LRVRMI4A",301,0)
 ;
"RTN","LRVRMI4A",302,0)
SETSTAT(DATA) ;
"RTN","LRVRMI4A",303,0)
 ; Goes thru DATA array and files the status(es)
"RTN","LRVRMI4A",304,0)
 ; Inputs
"RTN","LRVRMI4A",305,0)
 ;   DATA <byref> : DATA(file#,field#)=status  ie DATA(63.05,19)="P"
"RTN","LRVRMI4A",306,0)
 ; Outputs
"RTN","LRVRMI4A",307,0)
 ;   DATA <byref> : Sets DATA(0)=overall status (P,F,C)
"RTN","LRVRMI4A",308,0)
 ;
"RTN","LRVRMI4A",309,0)
 N FLD,FN,LRFDA,LRIEN,LRMSG,NODE,STAT,STAT2
"RTN","LRVRMI4A",310,0)
 ;
"RTN","LRVRMI4A",311,0)
 ;ZEXCEPT: LRDFN,LRIDT
"RTN","LRVRMI4A",312,0)
 ;
"RTN","LRVRMI4A",313,0)
 S LRIEN=LRIDT_","_LRDFN_",",STAT2=""
"RTN","LRVRMI4A",314,0)
 S NODE="DATA(0)"
"RTN","LRVRMI4A",315,0)
 F  S NODE=$Q(@NODE) Q:NODE=""  D
"RTN","LRVRMI4A",316,0)
 . S FN=$QS(NODE,1),FLD=$QS(NODE,2)
"RTN","LRVRMI4A",317,0)
 . I 'FN!('FLD) Q
"RTN","LRVRMI4A",318,0)
 . S STAT=DATA(FN,FLD)
"RTN","LRVRMI4A",319,0)
 . ; derive "overall" status
"RTN","LRVRMI4A",320,0)
 . ; P > C > F
"RTN","LRVRMI4A",321,0)
 . I STAT2="" S STAT2=STAT
"RTN","LRVRMI4A",322,0)
 . I STAT="P" S STAT2="P"
"RTN","LRVRMI4A",323,0)
 . I STAT="C",STAT2'="P" S STAT2="C"
"RTN","LRVRMI4A",324,0)
 . I STAT="F",STAT2'="C",STAT2'="P" S STAT2="F"
"RTN","LRVRMI4A",325,0)
 . ;
"RTN","LRVRMI4A",326,0)
 . ;convert "C" to "F"
"RTN","LRVRMI4A",327,0)
 . I STAT="C" S STAT="F"
"RTN","LRVRMI4A",328,0)
 . S LRFDA(1,FN,LRIEN,FLD)=STAT
"RTN","LRVRMI4A",329,0)
 I $D(LRFDA) D FILE^DIE("","LRFDA(1)","LRMSG")
"RTN","LRVRMI4A",330,0)
 S DATA(0)=STAT2
"RTN","LRVRMI4A",331,0)
 Q
"RTN","LRVRMI4A",332,0)
 ;
"RTN","LRVRMI4A",333,0)
 ;
"RTN","LRVRMI4A",334,0)
CSR(LRCSR,LRREF) ; Store code system references
"RTN","LRVRMI4A",335,0)
 ; Call with LRCSR = array of ien/codes to store as references (pass by value)
"RTN","LRVRMI4A",336,0)
 ;           LRREF = root of reference to build full reference to data
"RTN","LRVRMI4A",337,0)
 ;
"RTN","LRVRMI4A",338,0)
 N IEN,LRDATA,LRDATAREF,LRDFN,LRROOT,ROLE,TYPE
"RTN","LRVRMI4A",339,0)
 ;
"RTN","LRVRMI4A",340,0)
 S LRROOT="LRCSR",LRDFN=$P(LRREF,",")
"RTN","LRVRMI4A",341,0)
 F  S LRROOT=$Q(@LRROOT) Q:LRROOT=""  D
"RTN","LRVRMI4A",342,0)
 . S IEN=$QS(LRROOT,1),ROLE=$QS(LRROOT,2),TYPE=$QS(LRROOT,3),LRDATAREF=LRREF_IEN
"RTN","LRVRMI4A",343,0)
 . S LRDATA(.01)=LRDATAREF,LRDATA(.02)=ROLE,LRDATA(.03)=LRCSR(IEN,ROLE,TYPE),LRDATA(.04)=TYPE
"RTN","LRVRMI4A",344,0)
 . D SETREF^LRUCSR(LRDFN,LRDATAREF,.LRDATA,1)
"RTN","LRVRMI4A",345,0)
 Q
"VER")
8.0^22.0
**END**
**END**
