KIDS Distribution saved on Mar 05, 2018@15:35:20
patches SD*5.3*677 and EC*2.0*140
**KIDS**:SD*5.3*677^EC*2.0*140^

**INSTALL NAME**
SD*5.3*677
"BLD",10773,0)
SD*5.3*677^SCHEDULING^0^3180305^y
"BLD",10773,1,0)
^^3^3^3180227^^
"BLD",10773,1,1,0)
SD*5.3*677 provides Fiscal Year 2018 Mid-Year updates to the CLINIC STOP 
"BLD",10773,1,2,0)
(#40.7) file as requested by the Office of Finance, Managerial Cost 
"BLD",10773,1,3,0)
Accounting Office (MCAO).
"BLD",10773,4,0)
^9.64PA^^
"BLD",10773,6.3)
14
"BLD",10773,"INID")
^n
"BLD",10773,"INIT")
POST^SD53MY18
"BLD",10773,"KRN",0)
^9.67PA^779.2^20
"BLD",10773,"KRN",.4,0)
.4
"BLD",10773,"KRN",.401,0)
.401
"BLD",10773,"KRN",.402,0)
.402
"BLD",10773,"KRN",.403,0)
.403
"BLD",10773,"KRN",.5,0)
.5
"BLD",10773,"KRN",.84,0)
.84
"BLD",10773,"KRN",3.6,0)
3.6
"BLD",10773,"KRN",3.8,0)
3.8
"BLD",10773,"KRN",9.2,0)
9.2
"BLD",10773,"KRN",9.8,0)
9.8
"BLD",10773,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10773,"KRN",9.8,"NM",1,0)
SD53MY18^^0^B101891660
"BLD",10773,"KRN",9.8,"NM","B","SD53MY18",1)

"BLD",10773,"KRN",19,0)
19
"BLD",10773,"KRN",19.1,0)
19.1
"BLD",10773,"KRN",101,0)
101
"BLD",10773,"KRN",409.61,0)
409.61
"BLD",10773,"KRN",771,0)
771
"BLD",10773,"KRN",779.2,0)
779.2
"BLD",10773,"KRN",870,0)
870
"BLD",10773,"KRN",8989.51,0)
8989.51
"BLD",10773,"KRN",8989.52,0)
8989.52
"BLD",10773,"KRN",8994,0)
8994
"BLD",10773,"KRN","B",.4,.4)

"BLD",10773,"KRN","B",.401,.401)

"BLD",10773,"KRN","B",.402,.402)

"BLD",10773,"KRN","B",.403,.403)

"BLD",10773,"KRN","B",.5,.5)

"BLD",10773,"KRN","B",.84,.84)

"BLD",10773,"KRN","B",3.6,3.6)

"BLD",10773,"KRN","B",3.8,3.8)

"BLD",10773,"KRN","B",9.2,9.2)

"BLD",10773,"KRN","B",9.8,9.8)

"BLD",10773,"KRN","B",19,19)

"BLD",10773,"KRN","B",19.1,19.1)

"BLD",10773,"KRN","B",101,101)

"BLD",10773,"KRN","B",409.61,409.61)

"BLD",10773,"KRN","B",771,771)

"BLD",10773,"KRN","B",779.2,779.2)

"BLD",10773,"KRN","B",870,870)

"BLD",10773,"KRN","B",8989.51,8989.51)

"BLD",10773,"KRN","B",8989.52,8989.52)

"BLD",10773,"KRN","B",8994,8994)

"BLD",10773,"QUES",0)
^9.62^^
"BLD",10773,"REQB",0)
^9.611^1^1
"BLD",10773,"REQB",1,0)
SD*5.3*663^2
"BLD",10773,"REQB","B","SD*5.3*663",1)

"INIT")
POST^SD53MY18
"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
677^3180305
"PKG",16,22,1,"PAH",1,1,0)
^^3^3^3180305
"PKG",16,22,1,"PAH",1,1,1,0)
SD*5.3*677 provides Fiscal Year 2018 Mid-Year updates to the CLINIC STOP 
"PKG",16,22,1,"PAH",1,1,2,0)
(#40.7) file as requested by the Office of Finance, Managerial Cost 
"PKG",16,22,1,"PAH",1,1,3,0)
Accounting Office (MCAO).
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","SD53MY18")
0^1^B101891660
"RTN","SD53MY18",1,0)
SD53MY18 ;ALB/TXH - MID-FY18 STOP CODE UPDATES;10/18/17
"RTN","SD53MY18",2,0)
 ;;5.3;Scheduling;**677**;AUG 13, 1993;Build 14
"RTN","SD53MY18",3,0)
 ;
"RTN","SD53MY18",4,0)
 ; Post-init routine updating stop codes in CLINIC STOP file (#40.7)
"RTN","SD53MY18",5,0)
 ; for Mid-FY2018 updates - effective 04/01/2018.
"RTN","SD53MY18",6,0)
 ;
"RTN","SD53MY18",7,0)
 Q
"RTN","SD53MY18",8,0)
 ;
"RTN","SD53MY18",9,0)
POST ; Update stop codes in Clinic Stop file 40.7
"RTN","SD53MY18",10,0)
 ;
"RTN","SD53MY18",11,0)
 D BMES^XPDUTL("SD*5.3*677 Post-Install starts...")
"RTN","SD53MY18",12,0)
 D:$P($T(NEW+1),";;",2)'="QUIT" ADD      ; add new stop code
"RTN","SD53MY18",13,0)
 D:$P($T(OFF+1),";;",2)'="QUIT" INACT    ; inactivate
"RTN","SD53MY18",14,0)
 D:$P($T(CHG+1),";;",2)'="QUIT" CHGNM    ; change name
"RTN","SD53MY18",15,0)
 D:$P($T(RT+1),";;",2)'="QUIT" CHGRT     ; change restriction data
"RTN","SD53MY18",16,0)
 D MES^XPDUTL("SD*5.3*677 Post-Install is complete."),MES^XPDUTL("")
"RTN","SD53MY18",17,0)
 K SDIEN,%H,%I,DIC,X,Y
"RTN","SD53MY18",18,0)
 ; 
"RTN","SD53MY18",19,0)
 Q
"RTN","SD53MY18",20,0)
 ;
"RTN","SD53MY18",21,0)
ADD ; Add new stop code
"RTN","SD53MY18",22,0)
 ; SDREC is in format: 
"RTN","SD53MY18",23,0)
 ;   ;;stop code name^code #^restriction type^restriction date^CDR
"RTN","SD53MY18",24,0)
 ;
"RTN","SD53MY18",25,0)
 N SDI,SDREC,SDCODE,SDNM,SDRESTYP,SDFDA,SDADDERR,SDIEN,SDCDR,SDRESIN,SDRESEX
"RTN","SD53MY18",26,0)
 D BMES^XPDUTL(">>> Adding stop code to the CLINIC STOP (#40.7) file...")
"RTN","SD53MY18",27,0)
 D BMES^XPDUTL("    [NOTE: These Stop Codes CANNOT be used UNTIL 04/01/2018]")
"RTN","SD53MY18",28,0)
 ;
"RTN","SD53MY18",29,0)
 ; load all new entries
"RTN","SD53MY18",30,0)
 F SDI=1:1 S SDREC=$P($T(NEW+SDI),";;",2) Q:SDREC="QUIT"  D
"RTN","SD53MY18",31,0)
 . S SDCODE=$P(SDREC,U,2)   ;code
"RTN","SD53MY18",32,0)
 . S SDNM=$P(SDREC,U)       ;name
"RTN","SD53MY18",33,0)
 . S SDRESTYP=$P(SDREC,U,3) ;restriction type
"RTN","SD53MY18",34,0)
 . S (SDRESIN,SDRESEX)=""
"RTN","SD53MY18",35,0)
 . ; restriction date
"RTN","SD53MY18",36,0)
 . I +$P(SDREC,U,4) D
"RTN","SD53MY18",37,0)
 . . S X=$P(SDREC,U,4)
"RTN","SD53MY18",38,0)
 . . S %DT="FTX"
"RTN","SD53MY18",39,0)
 . . D ^%DT
"RTN","SD53MY18",40,0)
 . . I Y<0 S SDRESIN="" Q
"RTN","SD53MY18",41,0)
 . . S SDRESIN=Y
"RTN","SD53MY18",42,0)
 . . D DD^%DT
"RTN","SD53MY18",43,0)
 . . S SDRESEX=Y
"RTN","SD53MY18",44,0)
 . S SDCDR=$P(SDREC,U,5)    ;CDR #
"RTN","SD53MY18",45,0)
 . ;
"RTN","SD53MY18",46,0)
 . ; check if code already exists in file 40.7
"RTN","SD53MY18",47,0)
 . S SDIEN=$$FIND1^DIC(40.7,"","MX",SDCODE,"","","SDADDERR")
"RTN","SD53MY18",48,0)
 . ; quit if error
"RTN","SD53MY18",49,0)
 . I $D(SDADDERR) D  Q
"RTN","SD53MY18",50,0)
 . . D BMES^XPDUTL("       >> ... Unable to add stop code "_SDCODE_" "_SDNM_" to file.")
"RTN","SD53MY18",51,0)
 . . D MES^XPDUTL("        >> ... "_$G(SDADDERR("DIERR",1,"TEXT",1))_".")
"RTN","SD53MY18",52,0)
 . . D MES^XPDUTL("        >> ... Please contact support for assistance...")
"RTN","SD53MY18",53,0)
 . . K SDADDERR
"RTN","SD53MY18",54,0)
 . ;
"RTN","SD53MY18",55,0)
 . ; If code already exists, update it.
"RTN","SD53MY18",56,0)
 . I SDIEN D  Q
"RTN","SD53MY18",57,0)
 . . K SDADDERR
"RTN","SD53MY18",58,0)
 . . S SDFDA(40.7,SDIEN_",",.01)=SDNM
"RTN","SD53MY18",59,0)
 . . S SDFDA(40.7,SDIEN_",",1)=SDCODE
"RTN","SD53MY18",60,0)
 . . S SDFDA(40.7,SDIEN_",",4)=SDCDR
"RTN","SD53MY18",61,0)
 . . S SDFDA(40.7,SDIEN_",",5)=SDRESTYP
"RTN","SD53MY18",62,0)
 . . S SDFDA(40.7,SDIEN_",",6)=SDRESIN
"RTN","SD53MY18",63,0)
 . . D FILE^DIE(,"SDFDA","SDADDERR")
"RTN","SD53MY18",64,0)
 . . ; check if error
"RTN","SD53MY18",65,0)
 . . I '$D(SDADDERR) D  Q
"RTN","SD53MY18",66,0)
 . . . D BMES^XPDUTL("     >> Stop Code "_SDCODE_" "_SDNM_" already exists.")
"RTN","SD53MY18",67,0)
    . . I $D(SDADDERR) D
"RTN","SD53MY18",68,0)
    . . . D BMES^XPDUTL("         ... Unable to add stop code "_SDCODE_" "_SDNM_" to file.")
"RTN","SD53MY18",69,0)
    . . . D MES^XPDUTL("         ... "_$G(SDADDERR("DIERR",1,"TEXT",1))_".")
"RTN","SD53MY18",70,0)
    . . . D MES^XPDUTL("         ... Please contact support for assistance.")
"RTN","SD53MY18",71,0)
    . . . K SDADDERR
"RTN","SD53MY18",72,0)
 . ; if code does not exist, add new entry
"RTN","SD53MY18",73,0)
 . ; set field values of new entry
"RTN","SD53MY18",74,0)
 . S SDFDA(40.7,"+1,",.01)=SDNM
"RTN","SD53MY18",75,0)
 . S SDFDA(40.7,"+1,",1)=SDCODE
"RTN","SD53MY18",76,0)
 . S SDFDA(40.7,"+1,",4)=SDCDR
"RTN","SD53MY18",77,0)
 . S SDFDA(40.7,"+1,",5)=SDRESTYP
"RTN","SD53MY18",78,0)
 . S SDFDA(40.7,"+1,",6)=SDRESIN
"RTN","SD53MY18",79,0)
 . ; add new entry
"RTN","SD53MY18",80,0)
 . D UPDATE^DIE("E","SDFDA","","SDADDERR")
"RTN","SD53MY18",81,0)
 . ; check if error
"RTN","SD53MY18",82,0)
 . I '$D(SDADDERR) D
"RTN","SD53MY18",83,0)
 . . D BMES^XPDUTL("    >> Stop Code "_SDCODE_" "_SDNM_" added to file.")
"RTN","SD53MY18",84,0)
 . I $D(SDADDERR) D
"RTN","SD53MY18",85,0)
 . . D BMES^XPDUTL("    >> ... Unable to add stop code "_SDCODE_" "_SDNM_" to file.")
"RTN","SD53MY18",86,0)
 . . D MES^XPDUTL("    >> ... "_$G(SDADDERR("DIERR",1,"TEXT",1))_".")
"RTN","SD53MY18",87,0)
 . . D MES^XPDUTL("    >> ... Please contact support for assistance.")
"RTN","SD53MY18",88,0)
 . . ; clean out error array b4 processing next code
"RTN","SD53MY18",89,0)
 . . K SDADDERR
"RTN","SD53MY18",90,0)
 ;
"RTN","SD53MY18",91,0)
 D BMES^XPDUTL(">>> Add new stop codes complete.")
"RTN","SD53MY18",92,0)
 D MES^XPDUTL("")
"RTN","SD53MY18",93,0)
 ;
"RTN","SD53MY18",94,0)
 Q
"RTN","SD53MY18",95,0)
 ;
"RTN","SD53MY18",96,0)
INACT ; Inactivate stop code
"RTN","SD53MY18",97,0)
 ; SDREC is in format: ;;code #^^inactivation date (in FileMan format)
"RTN","SD53MY18",98,0)
 ;
"RTN","SD53MY18",99,0)
 N SDI,SDREC,SDCODE,SDEXDT,SDINDT,SDNM,SDINTERR
"RTN","SD53MY18",100,0)
 D BMES^XPDUTL(">>> Inactivating stop codes in CLINIC STOP (#40.7) file...")
"RTN","SD53MY18",101,0)
 D BMES^XPDUTL("  [NOTE: These Stop Codes CANNOT be used AFTER the indicated inactivation date.]")
"RTN","SD53MY18",102,0)
 ;
"RTN","SD53MY18",103,0)
 ; load entries w/ inactivate date
"RTN","SD53MY18",104,0)
 F SDI=1:1 S SDREC=$P($T(OFF+SDI),";;",2) Q:SDREC="QUIT"  D
"RTN","SD53MY18",105,0)
 . S SDCODE=$P(SDREC,U)  ;code
"RTN","SD53MY18",106,0)
 . ; get inactivate date and validate date passed in
"RTN","SD53MY18",107,0)
 . I +$P(SDREC,U,3) D
"RTN","SD53MY18",108,0)
 . . S X=$P(SDREC,U,3)
"RTN","SD53MY18",109,0)
 . . S %DT="FTX"
"RTN","SD53MY18",110,0)
 . . D ^%DT
"RTN","SD53MY18",111,0)
 . . Q:Y<0
"RTN","SD53MY18",112,0)
 . . S SDINDT=Y
"RTN","SD53MY18",113,0)
 . . D DD^%DT
"RTN","SD53MY18",114,0)
 . . S SDEXDT=Y
"RTN","SD53MY18",115,0)
 . . ; check if code already exists
"RTN","SD53MY18",116,0)
 . . S SDIEN=$$FIND1^DIC(40.7,"","MX",SDCODE,"","","SDINTERR")
"RTN","SD53MY18",117,0)
 . . ; quit if unable to find code in 40.7
"RTN","SD53MY18",118,0)
 . . I 'SDIEN D  Q
"RTN","SD53MY18",119,0)
 . . . D BMES^XPDUTL("    >> ... Unable to find stop code: "_SDCODE)
"RTN","SD53MY18",120,0)
 . . . D MES^XPDUTL("    >> ... Please contact support for assistance.")
"RTN","SD53MY18",121,0)
 . . ; check if error
"RTN","SD53MY18",122,0)
 . . I $D(SDINTERR) D  Q
"RTN","SD53MY18",123,0)
 . . . D BMES^XPDUTL("    >> ... Unable to inactivate stop code "_SDCODE)
"RTN","SD53MY18",124,0)
 . . . D MES^XPDUTL("    >> ... "_$G(SDINTERR("DIERR",1,"TEXT",1))_".")
"RTN","SD53MY18",125,0)
 . . . D MES^XPDUTL("    >> ... Please contact support for assistance...")
"RTN","SD53MY18",126,0)
 . . . ; clean out error array b4 processing next code
"RTN","SD53MY18",127,0)
 . . . K SDINTERR
"RTN","SD53MY18",128,0)
 . . ; if no error, check if active
"RTN","SD53MY18",129,0)
 . . I $D(^DIC(40.7,SDIEN,0)) I $P(^(0),U,3)="" D
"RTN","SD53MY18",130,0)
 . . . S SDNM=$P($G(^DIC(40.7,SDIEN,0)),U)   ;code name
"RTN","SD53MY18",131,0)
 . . . ; set field value
"RTN","SD53MY18",132,0)
 . . . K SDFDA
"RTN","SD53MY18",133,0)
 . . . S SDFDA(40.7,SDIEN_",",2)=SDINDT
"RTN","SD53MY18",134,0)
 . . . D FILE^DIE(,"SDFDA","SDINTERR")
"RTN","SD53MY18",135,0)
 . . . ; check if error
"RTN","SD53MY18",136,0)
 . . . I $D(SDINTERR) D  Q
"RTN","SD53MY18",137,0)
 . . . . D BMES^XPDUTL("    >> ... Unable to inactivate stop code: "_SDCODE)
"RTN","SD53MY18",138,0)
 . . . . D MES^XPDUTL("    >> ... "_$G(SDINTERR("DIERR",1,"TEXT",1))_".")
"RTN","SD53MY18",139,0)
 . . . . D MES^XPDUTL("     >> ... Please contact support for assistance.")
"RTN","SD53MY18",140,0)
 . . . . ; clean out error array b4 processing next code
"RTN","SD53MY18",141,0)
 . . . . K SDINTERR
"RTN","SD53MY18",142,0)
 . . . I '$D(SDINTERR) D
"RTN","SD53MY18",143,0)
 . . . . D BMES^XPDUTL("     >> Inactivated: "_+SDCODE_"   "_SDNM_" as of "_SDEXDT)
"RTN","SD53MY18",144,0)
 ;
"RTN","SD53MY18",145,0)
 D BMES^XPDUTL(">>> Inactivation complete.")
"RTN","SD53MY18",146,0)
 D MES^XPDUTL("")
"RTN","SD53MY18",147,0)
 K %,%DT,%H,%I,DIC,X,Y
"RTN","SD53MY18",148,0)
 ;
"RTN","SD53MY18",149,0)
 Q
"RTN","SD53MY18",150,0)
 ;
"RTN","SD53MY18",151,0)
CHGNM ; Change code names
"RTN","SD53MY18",152,0)
 ; SDREC is in format: ;;code name^code #^^new code name
"RTN","SD53MY18",153,0)
 ;
"RTN","SD53MY18",154,0)
 N SDI,SDCODE,SDIEN,SDNEWNM,SDNM,SDREC,SDCHGERR
"RTN","SD53MY18",155,0)
 D BMES^XPDUTL(">>> Changing code names in CLINIC STOP (#40.7) file...")
"RTN","SD53MY18",156,0)
 ;
"RTN","SD53MY18",157,0)
 ; load entries
"RTN","SD53MY18",158,0)
 F SDI=1:1 S SDREC=$P($T(CHG+SDI),";;",2) Q:SDREC="QUIT"  D
"RTN","SD53MY18",159,0)
 . S SDNM=$P(SDREC,U)      ;current name
"RTN","SD53MY18",160,0)
 . S SDCODE=$P(SDREC,U,2)  ;code
"RTN","SD53MY18",161,0)
 . S SDNEWNM=$P(SDREC,U,4) ;new name
"RTN","SD53MY18",162,0)
 . ; check if code already exists
"RTN","SD53MY18",163,0)
 . S SDIEN=$$FIND1^DIC(40.7,"","MX",SDCODE,"","","SDCHGERR")
"RTN","SD53MY18",164,0)
 . ; check if error
"RTN","SD53MY18",165,0)
 . I $D(SDCHGERR) D  Q
"RTN","SD53MY18",166,0)
 . . D BMES^XPDUTL("    >> ... Unable to inactivate stop code: "_SDCODE)
"RTN","SD53MY18",167,0)
 . . D MES^XPDUTL("    >> ... "_$G(SDCHGERR("DIERR",1,"TEXT",1))_".")
"RTN","SD53MY18",168,0)
 . . D MES^XPDUTL("    >> ... Please contact support for assistance...")
"RTN","SD53MY18",169,0)
 . . ; clean out error array b4 processing next code
"RTN","SD53MY18",170,0)
 . . K SDCHGERR
"RTN","SD53MY18",171,0)
 . ; quit if no entry in file
"RTN","SD53MY18",172,0)
 . I 'SDIEN D  Q
"RTN","SD53MY18",173,0)
 . . D BMES^XPDUTL("    >> ... Unable to find stop code: "_SDCODE)
"RTN","SD53MY18",174,0)
 . . D MES^XPDUTL("    >> ... Please contact support for assistance.")
"RTN","SD53MY18",175,0)
 . ; check if code is active
"RTN","SD53MY18",176,0)
 . I $D(^DIC(40.7,SDIEN,0)) I $P(^(0),U,3)="" D
"RTN","SD53MY18",177,0)
 . . K SDFDA
"RTN","SD53MY18",178,0)
 . . S SDFDA(40.7,SDIEN_",",.01)=SDNEWNM
"RTN","SD53MY18",179,0)
 . . D FILE^DIE(,"SDFDA","SDCHGERR")
"RTN","SD53MY18",180,0)
 . . ; check if error
"RTN","SD53MY18",181,0)
 . . I $D(SDCHGERR) D  Q
"RTN","SD53MY18",182,0)
 . . . D BMES^XPDUTL("    >> ... Unable to change name for stop code: "_SDCODE)
"RTN","SD53MY18",183,0)
 . . . D MES^XPDUTL("    >> ... "_$G(SDCHGERR("DIERR",1,"TEXT",1))_".")
"RTN","SD53MY18",184,0)
 . . . D MES^XPDUTL("    >> ... Please contact support for assistance.")
"RTN","SD53MY18",185,0)
 . . . ; clean out error array b4 processing next code
"RTN","SD53MY18",186,0)
 . . . K SDCHGERR
"RTN","SD53MY18",187,0)
 . . I '$D(SDCHGERR) D
"RTN","SD53MY18",188,0)
 . . . D BMES^XPDUTL("    >> Stop Code "_SDCODE_" name changed from: "_SDNM)
"RTN","SD53MY18",189,0)
 . . . D MES^XPDUTL("                                    to: "_SDNEWNM)
"RTN","SD53MY18",190,0)
 . . . I SDNM=SDNEWNM D BMES^XPDUTL("    >> Stop Code "_SDCODE_" name not changed.")
"RTN","SD53MY18",191,0)
 ;
"RTN","SD53MY18",192,0)
 D BMES^XPDUTL(">>> Changing code names complete.")
"RTN","SD53MY18",193,0)
 D MES^XPDUTL("")
"RTN","SD53MY18",194,0)
 ;
"RTN","SD53MY18",195,0)
 Q
"RTN","SD53MY18",196,0)
 ;
"RTN","SD53MY18",197,0)
CHGRT ; Change restriction data
"RTN","SD53MY18",198,0)
 ; SDREC is in format: ;;code name^code #^restriction type^restriction date
"RTN","SD53MY18",199,0)
 N SDI,SDREC,SDNM,SDNUM,SDRTERR,SDIEN,SDOLDRT,SDRD,SDRT,SDX,SDINDT,SDEXRD
"RTN","SD53MY18",200,0)
 D BMES^XPDUTL(">>> Changing restriction data in CLINIC STOP (#40.7) file...")
"RTN","SD53MY18",201,0)
 ; load entry
"RTN","SD53MY18",202,0)
 F SDI=1:1 S SDREC=$P($T(RT+SDI),";;",2) Q:SDREC="QUIT"  D
"RTN","SD53MY18",203,0)
 . S SDNM=$P(SDREC,U)       ; code name
"RTN","SD53MY18",204,0)
 . S SDNUM=$P(SDREC,U,2)    ; code #
"RTN","SD53MY18",205,0)
 . S SDRT=$P(SDREC,U,3)     ; restriction type
"RTN","SD53MY18",206,0)
 . S SDRD=$P(SDREC,U,4)     ; restriction date
"RTN","SD53MY18",207,0)
 . ;
"RTN","SD53MY18",208,0)
 . ; check if code already exists and get code IEN
"RTN","SD53MY18",209,0)
 . S SDIEN=$$FIND1^DIC(40.7,"","MX",SDNUM,"","","SDRTERR")
"RTN","SD53MY18",210,0)
 . ; check if error
"RTN","SD53MY18",211,0)
 . I $D(SDRTERR) D  Q
"RTN","SD53MY18",212,0)
 . . D BMES^XPDUTL("    >> ... Unable to inactivate stop code: "_SDNUM)
"RTN","SD53MY18",213,0)
 . . D MES^XPDUTL("    >> ... "_$G(SDRTERR("DIERR",1,"TEXT",1))_".")
"RTN","SD53MY18",214,0)
 . . D MES^XPDUTL("    >> ... Please contact support for assistance...")
"RTN","SD53MY18",215,0)
 . . ; clean out error array b4 processing next code
"RTN","SD53MY18",216,0)
 . . K SDRTERR
"RTN","SD53MY18",217,0)
 . I 'SDIEN D  Q
"RTN","SD53MY18",218,0)
 . . D BMES^XPDUTL("    >> ... Unable to find stop code: "_SDNUM)
"RTN","SD53MY18",219,0)
 . . D MES^XPDUTL("    >> ... Please contact support for assistance.")
"RTN","SD53MY18",220,0)
 . ; find current restriction type and date
"RTN","SD53MY18",221,0)
 . I $D(^DIC(40.7,SDIEN,0)) I $P(^(0),U,3)="" D
"RTN","SD53MY18",222,0)
 . . S SDOLDRT=$P(^DIC(40.7,SDIEN,0),U,6)
"RTN","SD53MY18",223,0)
 . . S SDEXRD=""
"RTN","SD53MY18",224,0)
 . . S X=$P(^DIC(40.7,SDIEN,0),U,7)
"RTN","SD53MY18",225,0)
 . . S %DT="FTX" D ^%DT Q:Y<0
"RTN","SD53MY18",226,0)
 . . S SDINDT=Y D DD^%DT S SDEXRD=Y
"RTN","SD53MY18",227,0)
 . ; set field value
"RTN","SD53MY18",228,0)
 . K SDFDA
"RTN","SD53MY18",229,0)
 . S SDFDA(40.7,SDIEN_",",5)=SDRT
"RTN","SD53MY18",230,0)
 . S SDFDA(40.7,SDIEN_",",6)=SDRD
"RTN","SD53MY18",231,0)
 . D FILE^DIE(,"SDFDA","SDRTERR")
"RTN","SD53MY18",232,0)
 . D BMES^XPDUTL("    >> Stop Code "_SDNUM_" restriction type changed from: "_SDOLDRT)
"RTN","SD53MY18",233,0)
 . D MES^XPDUTL("                                                to: "_SDRT)
"RTN","SD53MY18",234,0)
 . D MES^XPDUTL("    >>               restriction date changed from: "_SDEXRD)
"RTN","SD53MY18",235,0)
 . D MES^XPDUTL("                                                to: "_SDRD)
"RTN","SD53MY18",236,0)
 D BMES^XPDUTL(">>> Changing restriction data complete.")
"RTN","SD53MY18",237,0)
 D MES^XPDUTL("")
"RTN","SD53MY18",238,0)
    K %,%DT,%H,%I,DIC,X,Y
"RTN","SD53MY18",239,0)
    K SDFDA
"RTN","SD53MY18",240,0)
 Q
"RTN","SD53MY18",241,0)
 ;
"RTN","SD53MY18",242,0)
NEW ; codes to add - ;;stop code name^code #^restriction type^restriction date^CDR
"RTN","SD53MY18",243,0)
 ;;WHEELCHAIR & ADVAN MOBILITY^241^E^
"RTN","SD53MY18",244,0)
 ;;ENVIRON HEALTH REG EXAM^499^S^4/1/2018
"RTN","SD53MY18",245,0)
 ;;QUIT
"RTN","SD53MY18",246,0)
 ;
"RTN","SD53MY18",247,0)
OFF ; codes to be inactivated - ;;code #^^inactive date
"RTN","SD53MY18",248,0)
 ;;306^^4/1/2018
"RTN","SD53MY18",249,0)
 ;;547^^4/1/2018
"RTN","SD53MY18",250,0)
 ;;548^^4/1/2018
"RTN","SD53MY18",251,0)
 ;;610^^4/1/2018
"RTN","SD53MY18",252,0)
 ;;QUIT
"RTN","SD53MY18",253,0)
 ;
"RTN","SD53MY18",254,0)
CHG ; Code name changes - ;;code name^code #^^new code name
"RTN","SD53MY18",255,0)
 ;;ENTEROSTOMAL WOUND/SKIN CARE^142^^WOUND TREAT & OSTOMY CARE
"RTN","SD53MY18",256,0)
 ;;PHYS EXTND NP (NRS PRCNR) 2ND^185^^NURSE PRACTITIONER
"RTN","SD53MY18",257,0)
 ;;PHYS EXTND PA (PHYS ASST) 2ND^186^^PHYSICIAN ASSISTANT
"RTN","SD53MY18",258,0)
 ;;PHYS EXTND CNS (CLN RN SPC)2ND^187^^CLINICAL NURSE SPECIALIST
"RTN","SD53MY18",259,0)
 ;;PHYSICAL MED & REHAB SVC^201^^PM&RS PHYSICIAN
"RTN","SD53MY18",260,0)
 ;;ENDO./METAB (EXCEPT DIABETES)^305^^ENDOCRINOLOGY
"RTN","SD53MY18",261,0)
 ;;RT CLIN VD TH PRV SITE(SAMSTA)^692^^CVT PRV SITE SAME DIV/STA
"RTN","SD53MY18",262,0)
 ;;CVT SAME STA SERVICES^699^^CVT EMERGENCY CONSULT
"RTN","SD53MY18",263,0)
 ;;QUIT
"RTN","SD53MY18",264,0)
 ;
"RTN","SD53MY18",265,0)
RT ; Change Restriction - ;;stop code name^CODE #^rest type^rest date
"RTN","SD53MY18",266,0)
 ;;WOUND TREAT & OSTOMY CARE^142^E^
"RTN","SD53MY18",267,0)
 ;;QUIT
"VER")
8.0^22.2
**INSTALL NAME**
EC*2.0*140
"BLD",10763,0)
EC*2.0*140^EVENT CAPTURE^0^3180305^y
"BLD",10763,1,0)
^^3^3^3171214^^
"BLD",10763,1,1,0)
 This patch will inactivate any DSS Units in the DSS UNIT file (#724) with
"BLD",10763,1,2,0)
 the SEND TO PCE field (#13) set to 'Send No Records' and have an
"BLD",10763,1,3,0)
 inactive/invalid Stop Code.
"BLD",10763,4,0)
^9.64PA^^
"BLD",10763,6.3)
16
"BLD",10763,"ABPKG")
n
"BLD",10763,"INID")
n^n^n
"BLD",10763,"INIT")
POST^EC2P140
"BLD",10763,"KRN",0)
^9.67PA^779.2^20
"BLD",10763,"KRN",.4,0)
.4
"BLD",10763,"KRN",.401,0)
.401
"BLD",10763,"KRN",.402,0)
.402
"BLD",10763,"KRN",.403,0)
.403
"BLD",10763,"KRN",.5,0)
.5
"BLD",10763,"KRN",.84,0)
.84
"BLD",10763,"KRN",3.6,0)
3.6
"BLD",10763,"KRN",3.8,0)
3.8
"BLD",10763,"KRN",9.2,0)
9.2
"BLD",10763,"KRN",9.8,0)
9.8
"BLD",10763,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10763,"KRN",9.8,"NM",1,0)
EC2P140^^0^B2443322
"BLD",10763,"KRN",9.8,"NM","B","EC2P140",1)

"BLD",10763,"KRN",19,0)
19
"BLD",10763,"KRN",19.1,0)
19.1
"BLD",10763,"KRN",101,0)
101
"BLD",10763,"KRN",409.61,0)
409.61
"BLD",10763,"KRN",771,0)
771
"BLD",10763,"KRN",779.2,0)
779.2
"BLD",10763,"KRN",870,0)
870
"BLD",10763,"KRN",8989.51,0)
8989.51
"BLD",10763,"KRN",8989.52,0)
8989.52
"BLD",10763,"KRN",8994,0)
8994
"BLD",10763,"KRN","B",.4,.4)

"BLD",10763,"KRN","B",.401,.401)

"BLD",10763,"KRN","B",.402,.402)

"BLD",10763,"KRN","B",.403,.403)

"BLD",10763,"KRN","B",.5,.5)

"BLD",10763,"KRN","B",.84,.84)

"BLD",10763,"KRN","B",3.6,3.6)

"BLD",10763,"KRN","B",3.8,3.8)

"BLD",10763,"KRN","B",9.2,9.2)

"BLD",10763,"KRN","B",9.8,9.8)

"BLD",10763,"KRN","B",19,19)

"BLD",10763,"KRN","B",19.1,19.1)

"BLD",10763,"KRN","B",101,101)

"BLD",10763,"KRN","B",409.61,409.61)

"BLD",10763,"KRN","B",771,771)

"BLD",10763,"KRN","B",779.2,779.2)

"BLD",10763,"KRN","B",870,870)

"BLD",10763,"KRN","B",8989.51,8989.51)

"BLD",10763,"KRN","B",8989.52,8989.52)

"BLD",10763,"KRN","B",8994,8994)

"BLD",10763,"QUES",0)
^9.62^^
"BLD",10763,"REQB",0)
^9.611^1^1
"BLD",10763,"REQB",1,0)
EC*2.0*136^2
"BLD",10763,"REQB","B","EC*2.0*136",1)

"INIT")
POST^EC2P140
"MBREQ")
0
"PKG",486,-1)
1^1
"PKG",486,0)
EVENT CAPTURE^EC^Event Capture Workload Capture System^
"PKG",486,20,0)
^9.402P^^
"PKG",486,22,0)
^9.49I^1^1
"PKG",486,22,1,0)
2.0^2960508^2981027^66481
"PKG",486,22,1,"PAH",1,0)
140^3180305
"PKG",486,22,1,"PAH",1,1,0)
^^3^3^3180305
"PKG",486,22,1,"PAH",1,1,1,0)
 This patch will inactivate any DSS Units in the DSS UNIT file (#724) with
"PKG",486,22,1,"PAH",1,1,2,0)
 the SEND TO PCE field (#13) set to 'Send No Records' and have an
"PKG",486,22,1,"PAH",1,1,3,0)
 inactive/invalid Stop Code.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","EC2P140")
0^1^B2443322
"RTN","EC2P140",1,0)
EC2P140 ;ALB/MA - Inactive Stop Code DSS Unit Review ;10/19/17
"RTN","EC2P140",2,0)
 ;;2.0;EVENT CAPTURE;**140**;8 May 96;Build 16
"RTN","EC2P140",3,0)
 ;
"RTN","EC2P140",4,0)
 ;this routine is part of a combined build with scheduling to 
"RTN","EC2P140",5,0)
 ;inactivate any DSS units that are set to send no records 
"RTN","EC2P140",6,0)
 ;and have an inactive/invalid stop code
"RTN","EC2P140",7,0)
 ;
"RTN","EC2P140",8,0)
 Q
"RTN","EC2P140",9,0)
 ;
"RTN","EC2P140",10,0)
POST ;entry point
"RTN","EC2P140",11,0)
 N ZTRTN,ZTDTH,ZTDESC,ZTIO,ZTSK
"RTN","EC2P140",12,0)
 D BMES^XPDUTL("Queuing the inactivation of any DSS Units, that are set")
"RTN","EC2P140",13,0)
 D MES^XPDUTL("to send no records and have an inactive/invalid stop code,")
"RTN","EC2P140",14,0)
 D MES^XPDUTL("for 04/01/18 at 1:00 AM. If this patch is installed after that time")
"RTN","EC2P140",15,0)
 D MES^XPDUTL("the post-install will queue immediately.")
"RTN","EC2P140",16,0)
 S ZTRTN="CHKDSS^ECUTL3",ZTDTH=3180401.0100,ZTDESC="Inactivate DSS Units with invalid stop codes",ZTIO="" D ^%ZTLOAD
"RTN","EC2P140",17,0)
 D BMES^XPDUTL("Done. You will receive a MailMan message with the results on 04/01/18.")
"RTN","EC2P140",18,0)
 Q
"VER")
8.0^22.2
**END**
**END**
