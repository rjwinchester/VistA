KIDS Distribution saved on May 07, 2015@09:33:16
Email Address Indicator
**KIDS**:DG*5.3*865^EAS*1.0*107^EAS*1.0*111^

**INSTALL NAME**
DG*5.3*865
"BLD",9507,0)
DG*5.3*865^REGISTRATION^0^3150507^y
"BLD",9507,1,0)
^^3^3^3121119^
"BLD",9507,1,1,0)
This patch contains VistA changes to support technology and business
"BLD",9507,1,2,0)
changes that are occurring with the implementation of the Email Address 
"BLD",9507,1,3,0)
Indicator project.
"BLD",9507,4,0)
^9.64PA^2^1
"BLD",9507,4,2,0)
2
"BLD",9507,4,2,2,0)
^9.641^2^1
"BLD",9507,4,2,2,2,0)
PATIENT  (File-top level)
"BLD",9507,4,2,2,2,1,0)
^9.6411^.1317^2
"BLD",9507,4,2,2,2,1,.1316,0)
EMAIL ADDRESS INDICATOR
"BLD",9507,4,2,2,2,1,.1317,0)
EMAIL ADDRESS IND RESPONSE Y/N
"BLD",9507,4,2,222)
y^n^p^^^^n^^n
"BLD",9507,4,2,224)

"BLD",9507,4,"APDD",2,2)

"BLD",9507,4,"APDD",2,2,.1316)

"BLD",9507,4,"APDD",2,2,.1317)

"BLD",9507,4,"B",2,2)

"BLD",9507,6)
1^
"BLD",9507,6.3)
35
"BLD",9507,"ABPKG")
n
"BLD",9507,"KRN",0)
^9.67PA^779.2^20
"BLD",9507,"KRN",.4,0)
.4
"BLD",9507,"KRN",.401,0)
.401
"BLD",9507,"KRN",.402,0)
.402
"BLD",9507,"KRN",.403,0)
.403
"BLD",9507,"KRN",.5,0)
.5
"BLD",9507,"KRN",.84,0)
.84
"BLD",9507,"KRN",3.6,0)
3.6
"BLD",9507,"KRN",3.8,0)
3.8
"BLD",9507,"KRN",9.2,0)
9.2
"BLD",9507,"KRN",9.8,0)
9.8
"BLD",9507,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",9507,"KRN",9.8,"NM",1,0)
DGRPE^^0^B61220054
"BLD",9507,"KRN",9.8,"NM","B","DGRPE",1)

"BLD",9507,"KRN",19,0)
19
"BLD",9507,"KRN",19.1,0)
19.1
"BLD",9507,"KRN",101,0)
101
"BLD",9507,"KRN",409.61,0)
409.61
"BLD",9507,"KRN",771,0)
771
"BLD",9507,"KRN",779.2,0)
779.2
"BLD",9507,"KRN",870,0)
870
"BLD",9507,"KRN",8989.51,0)
8989.51
"BLD",9507,"KRN",8989.52,0)
8989.52
"BLD",9507,"KRN",8994,0)
8994
"BLD",9507,"KRN","B",.4,.4)

"BLD",9507,"KRN","B",.401,.401)

"BLD",9507,"KRN","B",.402,.402)

"BLD",9507,"KRN","B",.403,.403)

"BLD",9507,"KRN","B",.5,.5)

"BLD",9507,"KRN","B",.84,.84)

"BLD",9507,"KRN","B",3.6,3.6)

"BLD",9507,"KRN","B",3.8,3.8)

"BLD",9507,"KRN","B",9.2,9.2)

"BLD",9507,"KRN","B",9.8,9.8)

"BLD",9507,"KRN","B",19,19)

"BLD",9507,"KRN","B",19.1,19.1)

"BLD",9507,"KRN","B",101,101)

"BLD",9507,"KRN","B",409.61,409.61)

"BLD",9507,"KRN","B",771,771)

"BLD",9507,"KRN","B",779.2,779.2)

"BLD",9507,"KRN","B",870,870)

"BLD",9507,"KRN","B",8989.51,8989.51)

"BLD",9507,"KRN","B",8989.52,8989.52)

"BLD",9507,"KRN","B",8994,8994)

"BLD",9507,"QUES",0)
^9.62^^
"BLD",9507,"REQB",0)
^9.611^1^1
"BLD",9507,"REQB",1,0)
DG*5.3*842^2
"BLD",9507,"REQB","B","DG*5.3*842",1)

"FIA",2)
PATIENT
"FIA",2,0)
^DPT(
"FIA",2,0,0)
2I
"FIA",2,0,1)
y^n^p^^^^n^^n
"FIA",2,0,10)

"FIA",2,0,11)

"FIA",2,0,"RLRO")

"FIA",2,0,"VR")
5.3^DG
"FIA",2,2)
1
"FIA",2,2,.1316)

"FIA",2,2,.1317)

"MBREQ")
0
"PKG",47,-1)
1^1
"PKG",47,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",47,20,0)
^9.402P^^
"PKG",47,22,0)
^9.49I^1^1
"PKG",47,22,1,0)
5.3^2930813^2960613
"PKG",47,22,1,"PAH",1,0)
865^3150507^66481
"PKG",47,22,1,"PAH",1,1,0)
^^3^3^3150507
"PKG",47,22,1,"PAH",1,1,1,0)
This patch contains VistA changes to support technology and business
"PKG",47,22,1,"PAH",1,1,2,0)
changes that are occurring with the implementation of the Email Address 
"PKG",47,22,1,"PAH",1,1,3,0)
Indicator project.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","DGRPE")
0^1^B61220054
"RTN","DGRPE",1,0)
DGRPE ;ALB/MRL,LBD,BRM,TMK,BAJ,PWC - REGISTRATIONS EDITS ;6/24/09 3:03pm
"RTN","DGRPE",2,0)
 ;;5.3;Registration;**32,114,139,169,175,247,190,343,397,342,454,415,489,506,244,547,522,528,555,508,451,626,638,624,677,672,702,689,735,688,797,842,865**;Aug 13, 1993;Build 35
"RTN","DGRPE",3,0)
 ;
"RTN","DGRPE",4,0)
 ;DGDR contains a string of edits; edit=screen*10+item #
"RTN","DGRPE",5,0)
 ;
"RTN","DGRPE",6,0)
 ;line tag screen*10+item*1000 = continuation line
"RTN","DGRPE",7,0)
 ;
"RTN","DGRPE",8,0)
 I DGRPS=1,DGDR["101," D CEDITS^DGRPECE(DFN)
"RTN","DGRPE",9,0)
 I DGRPS=8 D ^DGRPEIS,Q Q  ; family demographic edit...not conventional!!  :)
"RTN","DGRPE",10,0)
 I DGRPS=9 D EDIT9^DGRPEIS2,Q Q  ; income screening data ($$$)
"RTN","DGRPE",11,0)
 I DGRPS=5,DGDR["501," D
"RTN","DGRPE",12,0)
 .I $G(DGPRFLG) D PREG^IBCNBME(DFN) Q
"RTN","DGRPE",13,0)
 .D REG^IBCNBME(DFN)
"RTN","DGRPE",14,0)
 .Q
"RTN","DGRPE",15,0)
 N QUIT S QUIT=0
"RTN","DGRPE",16,0)
 I DGRPS=6,$S(DGDR["601,"!(DGDR["602,")!(DGDR["603,"):1,1:0) D  I QUIT D Q Q  ;Screen 6 subscreens
"RTN","DGRPE",17,0)
 .;Use new ListMan screen for Military Service Episodes (DG*5.3*797)
"RTN","DGRPE",18,0)
 . I DGDR["601," D EN^DGRP61(DFN)   ; MSEs
"RTN","DGRPE",19,0)
 . ; D SETDR("601,",.DR)
"RTN","DGRPE",20,0)
 . ; S (DA,Y)=DFN,DIE="^DPT("
"RTN","DGRPE",21,0)
 . ; D ^DIE I $D(Y) S QUIT=1
"RTN","DGRPE",22,0)
 . ; S DGDR=$P(DGDR,"601,",1)_$P(DGDR,"601,",2,999)
"RTN","DGRPE",23,0)
 . I DGDR["602," D EN^DGRP6CL(DFN,.QUIT)  Q:QUIT  ; Conflicts
"RTN","DGRPE",24,0)
 . I DGDR["603," D EN^DGRP6EF(DFN,.QUIT)  Q:QUIT  ; Exposures
"RTN","DGRPE",25,0)
 I DGRPS=7,(DGDR["702,") D EN^DGRP7CP(DFN,.QUIT) I QUIT D Q Q  ;DG*5.3*842 screen 7 cp subscreen
"RTN","DGRPE",26,0)
 ;-- Tricare screen #15
"RTN","DGRPE",27,0)
 I DGRPS=15 D EDIT^DGRP15,Q Q
"RTN","DGRPE",28,0)
 ;
"RTN","DGRPE",29,0)
 N DGPH,DGPHFLG
"RTN","DGRPE",30,0)
 K DR S (DA,Y)=DFN,DIE="^DPT(",DR="",DGDRS="DR",DGCT=0
"RTN","DGRPE",31,0)
 G ^DGRPE1:DGRPS>6
"RTN","DGRPE",32,0)
 I DGRPS=4 D ^DGRPE4
"RTN","DGRPE",33,0)
 D SETDR(DGDR,.DR)
"RTN","DGRPE",34,0)
 S (DA,Y)=DFN,DIE="^DPT("
"RTN","DGRPE",35,0)
 D ^DIE
"RTN","DGRPE",36,0)
 ;check for Combat Vet status
"RTN","DGRPE",37,0)
 I $G(DGCVFLG)=1,($P($$CVEDT^DGCV(DFN),U,2)']"") D
"RTN","DGRPE",38,0)
 . W !!,"**NOTE-Change(s) made in this session deleted the veteran's Combat Vet status!"
"RTN","DGRPE",39,0)
 . S DIR(0)="EA" D ^DIR K DIR
"RTN","DGRPE",40,0)
 I $G(DGPHFLG)>0 D EDITPH1^DGRPLE()
"RTN","DGRPE",41,0)
Q K DA,DIE,DR,DGCT,DGCVFLG,DGDR,DGDRD,DGDRS,DGRPADI,I,J,J1,DGCOMLOC,DIPA
"RTN","DGRPE",42,0)
 Q
"RTN","DGRPE",43,0)
 ;
"RTN","DGRPE",44,0)
SETDR(DGDR,DR) ; Set up DR string(s) for edit groups selected
"RTN","DGRPE",45,0)
 N DGCT,DGDRS,J1,J2
"RTN","DGRPE",46,0)
 K DR S DR="",DGDRS="DR",DGCT=0
"RTN","DGRPE",47,0)
 F I=1:1 S J=$P(DGDR,",",I) Q:J=""  S J1=J D:$T(@J1)
"RTN","DGRPE",48,0)
 . S DGDRD=$P($T(@J1),";;",2) D S
"RTN","DGRPE",49,0)
 . N J2
"RTN","DGRPE",50,0)
 . F J2=0:1 S J1=J*1000+J2 Q:'$T(@J1)  S DGDRD=$P($T(@J1),";;",2) D S
"RTN","DGRPE",51,0)
 Q
"RTN","DGRPE",52,0)
 ;
"RTN","DGRPE",53,0)
S I $L(@DGDRS)+$L(DGDRD)<241 S @DGDRS=@DGDRS_DGDRD Q
"RTN","DGRPE",54,0)
 S DGCT=DGCT+1,DGDRS="DR(1,2,"_DGCT_")",@DGDRS=DGDRD Q
"RTN","DGRPE",55,0)
 Q
"RTN","DGRPE",56,0)
 ;
"RTN","DGRPE",57,0)
SETFLDS(DGDR) ; Set up fields to edit
"RTN","DGRPE",58,0)
 Q
"RTN","DGRPE",59,0)
 ;
"RTN","DGRPE",60,0)
101 ;;
"RTN","DGRPE",61,0)
102 ;;1;
"RTN","DGRPE",62,0)
103 ;;.091;
"RTN","DGRPE",63,0)
104 ;;N FLG S (FLG(1),FLG(2))=1 D EN^DGREGAED(DFN,.FLG);
"RTN","DGRPE",64,0)
105 ;;.12105//NO;S:X="N" Y="@15" S:X="Y" DIE("NO^")="";.1217;I X']"" W !?4,$C(7),"But I need a Start Date for this Temporary Address." S Y=.12105;.1218;
"RTN","DGRPE",65,0)
105000 ;;N RET S RET=1 D EN^DGREGTED(DFN,"TEMP",.RET) S:'RET Y=.12105;@15;K DIE("NO^");
"RTN","DGRPE",66,0)
109 ;;N FLG S (FLG(1),FLG(2))=1 D EN^DGREGAED(DFN,.FLG);.02;D DR109^DGRPE;6;2;K DR(2,2.02),DR(2,2.06);.05;.08;K DIE("NO^");
"RTN","DGRPE",67,0)
111 ;;.14105//NO;S:X="N" Y="@111" S:X="Y" DIE("NO^")="";.1417;I X']"" W !?4,$C(7),"But I need a Start Date." S Y=.14105;.1418;D DR111^DGRPE;.141;I '$P($$CAACT^DGRPCADD(DFN),U,2) W !?4,"But I need at least one active category." S Y=.14105;
"RTN","DGRPE",68,0)
111000 ;;K DR(2,2.141);N RET S RET=1 D EN^DGREGTED(DFN,"CONF",.RET) S:'RET Y=.14105;@111;K DIE("NO^");
"RTN","DGRPE",69,0)
112 ;;.134;.135;@21;S X=$$YN1316^DGRPE(DFN);S:(X["N")&($P($G(^DPT(DFN,.13)),"^",3)="") Y="@25";S:(X["N")&($P($G(^DPT(DFN,.13)),"^",3)]"") Y="@24";.133;S:($P($G(^DPT(DFN,.13)),U,16)="Y")&($G(X)="") Y="@21";S Y="@25";@24;.133///@;@25;.1317///NOW;
"RTN","DGRPE",70,0)
201 ;;.05;.08;.092;.093;.2401:.2403;57.4//NOT APPLICABLE;
"RTN","DGRPE",71,0)
202 ;;1010.15//NO;S:X'="Y" Y="@22";S DIE("NO^")="";1010.152;I X']"" W !?4,*7,"But I need to know where you were treated most recently." S Y=1010.15;1010.151;1010.154;S:X']"" Y="@22";1010.153;@22;K DIE("NO^");
"RTN","DGRPE",72,0)
203 ;;D DR203^DGRPE;6ETHNICITY;2RACE;K DR(2,2.02),DR(2,2.06);
"RTN","DGRPE",73,0)
205 ;;.181;
"RTN","DGRPE",74,0)
301 ;;.211;S:X']"" Y="@31";.212;D DR301^DGRPE S:DG4=1 Y=.213;.2125//NO;I X="Y" S DGADD=".21" D AD^DGRPE S Y=.21011;.213;K DG4;S:X']"" Y=.216;.214;S:X']"" Y=.216;.215:.217;.2207;.219;.21011;@31;
"RTN","DGRPE",75,0)
302 ;;.2191;S:X']"" Y="@32";.2192;D DR301^DGRPE S:DG4=1 Y=.2193;.21925//NO;I X="Y" S DGADD=".211" D AD^DGRPE S Y=.211011;
"RTN","DGRPE",76,0)
302000 ;;.2193;S:X']"" Y=.2196;.2194;S:X']"" Y=.2196;.2195:.2197;.2203;.2199;.211011;@32;
"RTN","DGRPE",77,0)
303 ;;N DGX1,DGX2;I '$L($P($G(^DPT(DFN,.21)),U)) S Y="@33";.3305//NO;I X="Y" S Y="@34",DGX1=1 S:$D(^DPT(DFN,.22)) $P(^(.22),U,1)=$P(^(.22),U,7);@33;.331;S:X']"" DGX1=2,Y="@34";.332;@34;
"RTN","DGRPE",78,0)
303000 ;;S:$G(DGX1) Y="@341";.333;S:X']"" Y=.336;.334;S:X']"" Y=.336;.335:.337;.2201;.339;.33011;S DGX1=2;@341;
"RTN","DGRPE",79,0)
303001 ;;S:$G(DGX1)=2 Y="@35";S DGX2=$G(^DPT(DA,.21));.331///^S X=$P(DGX2,U);.332///^S X=$P(DGX2,U,2);.333////^S X=$P(DGX2,U,3);.334///^S X=$P(DGX2,U,4);@35;
"RTN","DGRPE",80,0)
303002 ;;S:$G(DGX1)=2 Y="@351";.335///^S X=$P(DGX2,U,5);.336///^S X=$P(DGX2,U,6);.337///^S X=$P(DGX2,U,7);.338///^S X=$P(DGX2,U,8);.339///^S X=$P(DGX2,U,9);.33011///^S X=$P(DGX2,U,11);@351;K DGX1,DGX2;
"RTN","DGRPE",81,0)
304 ;;.3311;S:X']"" Y="@36";.3312;.3313;S:X']"" Y=.3316;.3314;S:X']"" Y=.3316;.3315:.3317;.2204;.3319;.331011;@36;        
"RTN","DGRPE",82,0)
305 ;;N DGX1,DGX2;I '$L($P($G(^DPT(DFN,.21)),U)) S Y="@37";.3405//NO;I X="Y" S DGX1=1,Y="@371" S:$D(^DPT(DFN,.22)) $P(^(.22),U,2)=$P(^(.22),U,7);@37;.341;S:X']"" DGX1=2,Y="@371";.342;@371;
"RTN","DGRPE",83,0)
305000 ;;S:$G(DGX1) Y="@38";.343;S:X']"" Y=.346;.344;S:X']"" Y=.346;.345:.347;.2202;.349;.34011;S DGX1=2;@38;
"RTN","DGRPE",84,0)
305001 ;;S:$G(DGX1)=2 Y="@381";S DGX2=$G(^DPT(DA,.21));.341///^S X=$P(DGX2,U);.342///^S X=$P(DGX2,U,2);.343///^S X=$P(DGX2,U,3);.344///^S X=$P(DGX2,U,4);@381
"RTN","DGRPE",85,0)
305002 ;;S:$G(DGX1)=2 Y="@39";.345///^S X=$P(DGX2,U,5);.346///^S X=$P(DGX2,U,6);.347///^S X=$P(DGX2,U,7);.348///^S X=$P(DGX2,U,8);.349///^S X=$P(DGX2,U,9);.34011///^S X=$P(DGX2,U,11);@39;K DGX1,DGX2;
"RTN","DGRPE",86,0)
401 ;;.01;.31115;S:($S(X']"":1,X=3:1,X=9:1,1:0)) Y="@41" S:(X'=5) Y=.3111;.31116;.3111;S:X']"" Y="@41";.3113;S:X']"" Y=.3116;.3114;S:X']"" Y=.3116;.3115:.3117;.2205;.3119;@41;
"RTN","DGRPE",87,0)
402 ;;.2514;.2515;S:($S(X']"":1,X=3:1,X=9:1,1:0)) Y="@42" S:(X'=5) Y=.251;.2516;.251;S:X']"" Y="@42";.252;S:X']"" Y=.255;.253;S:X']"" Y=.255;.254:.256;.2206;.258;@42;
"RTN","DGRPE",88,0)
501 ;;
"RTN","DGRPE",89,0)
502 ;;.381;.382///NOW;
"RTN","DGRPE",90,0)
503 ;;.383;
"RTN","DGRPE",91,0)
601 ;;Q;
"RTN","DGRPE",92,0)
602 ;;Q;
"RTN","DGRPE",93,0)
603 ;;Q;
"RTN","DGRPE",94,0)
604 ;;.525//NO;S:X'="Y" Y="@62";.526:.528;@62;
"RTN","DGRPE",95,0)
605 ;;.5291//NO;S:X'="Y" Y="@63";.5292:.5294;@63;
"RTN","DGRPE",96,0)
606 ;;I $P($G(^DPT(DFN,.361)),U,3)="H" S Y="@6131";.3602//NO;.3603//NO;S Y="@6132";@6131;.3602;.3603;@6132;
"RTN","DGRPE",97,0)
607 ;;.368//NO;.369//NO;I $S('$D(^DPT(DA,.36)):1,$P(^(.36),U,8)="Y"!($P(^(.36),U,9)="Y"):0,1:1) S Y="@614";.37;@614;
"RTN","DGRPE",98,0)
608 ;;S DGPHFLG=0;.531;S:X'="Y" DGX=X,Y="@616";.532///^S X="PENDING";S Y="@6161";@616;S:DGX'="N" Y="@6162";.533///^S X="VAMC";@6161;S DGPHFLG=1;.535///^S X=$$DIV^DGRPLE();@6162;
"RTN","DGRPE",99,0)
AD N DGZ4,DGPC
"RTN","DGRPE",100,0)
 S X=$S($D(^DPT(DA,.11)):^(.11),1:""),DGZ4=$P(X,U,12),DGPHONE=$S($D(^(.13)):$P(^(.13),U,1),1:""),Y=$S($D(^(DGADD)):^(DGADD),1:""),^(DGADD)=$P(Y,U,1)_U_$P(Y,U,2)_U_$P(X,U,1,6)_U_DGPHONE_U_$P(Y,U,10)
"RTN","DGRPE",101,0)
 I DGZ4 S DGPC=$S((DGADD=.33):1,(DGADD=.34):2,(DGADD=.211):3,(DGADD=.331):4,(DGADD=.311):5,(DGADD=.25):6,(DGADD=.21):7,1:0) S:DGPC $P(^DPT(DFN,.22),U,DGPC)=DGZ4
"RTN","DGRPE",102,0)
 K DGADD,DGPHONE Q
"RTN","DGRPE",103,0)
DR109 ;Drop through (use same logic as DR203)
"RTN","DGRPE",104,0)
DR203 S DR(2,2.02)=".01RACE;I $P($G(^DIC(10.3,+$P($G(^DPT(DA(1),.02,DA,0)),""^"",2),0)),""^"",2)=""S"" S Y=""@2031"";.02;@2031;"
"RTN","DGRPE",105,0)
 S DR(2,2.06)=".01ETHNICITY;I $P($G(^DIC(10.3,+$P($G(^DPT(DA(1),.06,DA,0)),""^"",2),0)),""^"",2)=""S"" S Y=""@2032"";.02;@2032;"
"RTN","DGRPE",106,0)
 Q
"RTN","DGRPE",107,0)
DR111 ;Set DR string for Confidential Address categories
"RTN","DGRPE",108,0)
 S DR(2,2.141)=".01;1//YES;"
"RTN","DGRPE",109,0)
 Q
"RTN","DGRPE",110,0)
DR301 ;set up variables for foreign address
"RTN","DGRPE",111,0)
 N DG3,DG33
"RTN","DGRPE",112,0)
 S DG4=0
"RTN","DGRPE",113,0)
 S DG3=$P($G(^DPT(DFN,.11)),U,10)
"RTN","DGRPE",114,0)
 S DG33=$O(^HL(779.004,"B","USA",""))
"RTN","DGRPE",115,0)
 I $G(DG3)]"",(DG3'=$G(DG33)) S DG4=1
"RTN","DGRPE",116,0)
 Q
"RTN","DGRPE",117,0)
PRF ; Write Proof needed for FV
"RTN","DGRPE",118,0)
 W !?4,$C(7),"Proof is required for Filipino vet."
"RTN","DGRPE",119,0)
 Q
"RTN","DGRPE",120,0)
 ;
"RTN","DGRPE",121,0)
SET32(DA,DIPA,SEQ) ; Extract the .32 node from patient file and set DIPA
"RTN","DGRPE",122,0)
 ; array with the BOS and component data for the SEQ military service
"RTN","DGRPE",123,0)
 ; episode (1-3)
"RTN","DGRPE",124,0)
 N I,Q,Z
"RTN","DGRPE",125,0)
 K DIPA(32,SEQ)
"RTN","DGRPE",126,0)
 S Q=$G(^DPT(DA,.32)),Z=$G(^(.3291))
"RTN","DGRPE",127,0)
 S DIPA(32,SEQ)=$P(Q,U,SEQ*5)_U_$P(Z,U,SEQ),DIPA("X"_SEQ)=$P(DIPA(32,SEQ),U)
"RTN","DGRPE",128,0)
 Q
"RTN","DGRPE",129,0)
 ;
"RTN","DGRPE",130,0)
WARN32(X,DIPA,SEQ,Y) ; Warn if the BOS is changed, then the component will
"RTN","DGRPE",131,0)
 ; be deleted
"RTN","DGRPE",132,0)
 ; Returns Y to skip component if the component should not be asked
"RTN","DGRPE",133,0)
 ;   for this branch of service
"RTN","DGRPE",134,0)
 N Z
"RTN","DGRPE",135,0)
 I '$$CMP(X) S Y="@601"_SEQ
"RTN","DGRPE",136,0)
 S Z=$G(DIPA(32,SEQ))
"RTN","DGRPE",137,0)
 Q:$S($P(Z,U,2)=""!($P(Z,U)=""):1,1:$P(Z,U)=X)
"RTN","DGRPE",138,0)
 ;
"RTN","DGRPE",139,0)
 I '$D(DIQUIET) W !!,*7,"** WARNING - BRANCH OF SERVICE WAS CHANGED SO THE COMPONENT WAS DELETED",!
"RTN","DGRPE",140,0)
 Q
"RTN","DGRPE",141,0)
 ;
"RTN","DGRPE",142,0)
CMP(X) ; Function to determine if service component is valid for
"RTN","DGRPE",143,0)
 ; branch of service ien in X   0 = invalid  1 = valid  
"RTN","DGRPE",144,0)
 ; Component only valid for ARMY/AIR FORCE/MARINES/COAST GUARD/NOAA/USPHS
"RTN","DGRPE",145,0)
 Q $S('$G(X):0,X'>5!(X=9)!(X=10):1,1:0)
"RTN","DGRPE",146,0)
 ;
"RTN","DGRPE",147,0)
YN1316(DFN) ;Email address indicator - DG*5.3*865
"RTN","DGRPE",148,0)
 N %,RSLT
"RTN","DGRPE",149,0)
 S DIE("NO^")=""
"RTN","DGRPE",150,0)
P1316 ;
"RTN","DGRPE",151,0)
 S %=0
"RTN","DGRPE",152,0)
 W !,"DOES THE PATIENT HAVE AN EMAIL ADDRESS? Y/N"
"RTN","DGRPE",153,0)
 D YN^DICN
"RTN","DGRPE",154,0)
 I %=0 W !,"    If the patient has a valid Email Address, please answer with 'Yes'.",!,"    If no Email Address please answer with 'No'." G P1316
"RTN","DGRPE",155,0)
 I %=-1 W !,"    EXIT NOT ALLOWED ??" G P1316
"RTN","DGRPE",156,0)
 S RSLT=$S(%=1:"Y",%=2:"N")
"RTN","DGRPE",157,0)
 N FDA,IENS
"RTN","DGRPE",158,0)
 Q:'$G(DFN)
"RTN","DGRPE",159,0)
 S IENS=DFN_",",FDA(2,IENS,.1316)=RSLT
"RTN","DGRPE",160,0)
 D FILE^DIE("","FDA")
"RTN","DGRPE",161,0)
 Q RSLT
"VER")
8.0^22.0
"^DD",2,2,.1316,0)
EMAIL ADDRESS INDICATOR^RS^Y:YES;N:NO;^.13;16^Q
"^DD",2,2,.1316,.1)
Email Address Indicator
"^DD",2,2,.1316,3)
Does the Veteran have an Email address?
"^DD",2,2,.1316,21,0)
^^1^1^3121121^
"^DD",2,2,.1316,21,1,0)
This field indicates whether or not the Veteran has an Email address.
"^DD",2,2,.1316,"DT")
3121119
"^DD",2,2,.1317,0)
EMAIL ADDRESS INDICATOR DT/TM^D^^.13;17^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",2,2,.1317,.1)
Email Address Indicator date/time
"^DD",2,2,.1317,3)
Enter the date and time of the Email Address Indicator response.
"^DD",2,2,.1317,21,0)
^.001^2^2^3121121^^
"^DD",2,2,.1317,21,1,0)
This field contains the date and time of the last Email Address 
"^DD",2,2,.1317,21,2,0)
Indicator response.
"^DD",2,2,.1317,"DT")
3121120
**INSTALL NAME**
EAS*1.0*107
"BLD",9508,0)
EAS*1.0*107^ENROLLMENT APPLICATION SYSTEM^0^3150507^y
"BLD",9508,4,0)
^9.64PA^^
"BLD",9508,6.3)
32
"BLD",9508,"KRN",0)
^9.67PA^779.2^20
"BLD",9508,"KRN",.4,0)
.4
"BLD",9508,"KRN",.401,0)
.401
"BLD",9508,"KRN",.402,0)
.402
"BLD",9508,"KRN",.403,0)
.403
"BLD",9508,"KRN",.5,0)
.5
"BLD",9508,"KRN",.84,0)
.84
"BLD",9508,"KRN",3.6,0)
3.6
"BLD",9508,"KRN",3.8,0)
3.8
"BLD",9508,"KRN",9.2,0)
9.2
"BLD",9508,"KRN",9.8,0)
9.8
"BLD",9508,"KRN",9.8,"NM",0)
^9.68A^16^16
"BLD",9508,"KRN",9.8,"NM",1,0)
EASEZP61^^0^B36064376
"BLD",9508,"KRN",9.8,"NM",2,0)
EASEZP62^^0^B62742191
"BLD",9508,"KRN",9.8,"NM",3,0)
EASEZP6F^^0^B14707219
"BLD",9508,"KRN",9.8,"NM",4,0)
EASEZP6U^^0^B29982956
"BLD",9508,"KRN",9.8,"NM",5,0)
EASEZPVI^^0^B21671020
"BLD",9508,"KRN",9.8,"NM",6,0)
EASEZU1^^0^B16968808
"BLD",9508,"KRN",9.8,"NM",7,0)
EASEZPU3^^0^B25454503
"BLD",9508,"KRN",9.8,"NM",8,0)
EASEZP63^^0^B17289170
"BLD",9508,"KRN",9.8,"NM",9,0)
EASEZP64^^0^B67534937
"BLD",9508,"KRN",9.8,"NM",10,0)
EASEZPDU^^0^B41360578
"BLD",9508,"KRN",9.8,"NM",11,0)
EASEZRP1^^0^B36453210
"BLD",9508,"KRN",9.8,"NM",12,0)
EASEZRP2^^0^B76633535
"BLD",9508,"KRN",9.8,"NM",13,0)
EASEZRP3^^0^B39915034
"BLD",9508,"KRN",9.8,"NM",14,0)
EASEZRPF^^0^B15520164
"BLD",9508,"KRN",9.8,"NM",15,0)
EASEZP6I^^0^B2999167
"BLD",9508,"KRN",9.8,"NM",16,0)
EASEZRPU^^0^B49046361
"BLD",9508,"KRN",9.8,"NM","B","EASEZP61",1)

"BLD",9508,"KRN",9.8,"NM","B","EASEZP62",2)

"BLD",9508,"KRN",9.8,"NM","B","EASEZP63",8)

"BLD",9508,"KRN",9.8,"NM","B","EASEZP64",9)

"BLD",9508,"KRN",9.8,"NM","B","EASEZP6F",3)

"BLD",9508,"KRN",9.8,"NM","B","EASEZP6I",15)

"BLD",9508,"KRN",9.8,"NM","B","EASEZP6U",4)

"BLD",9508,"KRN",9.8,"NM","B","EASEZPDU",10)

"BLD",9508,"KRN",9.8,"NM","B","EASEZPU3",7)

"BLD",9508,"KRN",9.8,"NM","B","EASEZPVI",5)

"BLD",9508,"KRN",9.8,"NM","B","EASEZRP1",11)

"BLD",9508,"KRN",9.8,"NM","B","EASEZRP2",12)

"BLD",9508,"KRN",9.8,"NM","B","EASEZRP3",13)

"BLD",9508,"KRN",9.8,"NM","B","EASEZRPF",14)

"BLD",9508,"KRN",9.8,"NM","B","EASEZRPU",16)

"BLD",9508,"KRN",9.8,"NM","B","EASEZU1",6)

"BLD",9508,"KRN",19,0)
19
"BLD",9508,"KRN",19.1,0)
19.1
"BLD",9508,"KRN",101,0)
101
"BLD",9508,"KRN",409.61,0)
409.61
"BLD",9508,"KRN",771,0)
771
"BLD",9508,"KRN",779.2,0)
779.2
"BLD",9508,"KRN",870,0)
870
"BLD",9508,"KRN",8989.51,0)
8989.51
"BLD",9508,"KRN",8989.52,0)
8989.52
"BLD",9508,"KRN",8994,0)
8994
"BLD",9508,"KRN","B",.4,.4)

"BLD",9508,"KRN","B",.401,.401)

"BLD",9508,"KRN","B",.402,.402)

"BLD",9508,"KRN","B",.403,.403)

"BLD",9508,"KRN","B",.5,.5)

"BLD",9508,"KRN","B",.84,.84)

"BLD",9508,"KRN","B",3.6,3.6)

"BLD",9508,"KRN","B",3.8,3.8)

"BLD",9508,"KRN","B",9.2,9.2)

"BLD",9508,"KRN","B",9.8,9.8)

"BLD",9508,"KRN","B",19,19)

"BLD",9508,"KRN","B",19.1,19.1)

"BLD",9508,"KRN","B",101,101)

"BLD",9508,"KRN","B",409.61,409.61)

"BLD",9508,"KRN","B",771,771)

"BLD",9508,"KRN","B",779.2,779.2)

"BLD",9508,"KRN","B",870,870)

"BLD",9508,"KRN","B",8989.51,8989.51)

"BLD",9508,"KRN","B",8989.52,8989.52)

"BLD",9508,"KRN","B",8994,8994)

"BLD",9508,"QUES",0)
^9.62^^
"BLD",9508,"REQB",0)
^9.611^1^1
"BLD",9508,"REQB",1,0)
EAS*1.0*103^2
"BLD",9508,"REQB","B","EAS*1.0*103",1)

"MBREQ")
0
"PKG",187,-1)
1^1
"PKG",187,0)
ENROLLMENT APPLICATION SYSTEM^EAS^ENROLLMENT
"PKG",187,20,0)
^9.402P^1^1
"PKG",187,20,1,0)
2^^EASXDR
"PKG",187,20,1,1)
 
"PKG",187,20,"B",2,1)

"PKG",187,22,0)
^9.49I^1^1
"PKG",187,22,1,0)
1.0^3010315^3010321^66481
"PKG",187,22,1,"PAH",1,0)
107^3150507^66481
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
16
"RTN","EASEZP61")
0^1^B36064376
"RTN","EASEZP61",1,0)
EASEZP61 ;ALB/AMA,LBD - Print 1010EZ, Version 6 or greater, Cont. ; 1/28/13 2:27pm
"RTN","EASEZP61",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**51,60,70,107**;Mar 15, 2001;Build 32
"RTN","EASEZP61",3,0)
 ;
"RTN","EASEZP61",4,0)
 ; This routine copied from EASEZPF1; if the version # of the 1010EZ
"RTN","EASEZP61",5,0)
 ; application is 6.0 or greater, then this routine will be executed.
"RTN","EASEZP61",6,0)
 ;
"RTN","EASEZP61",7,0)
EN(EALNE,EAINFO) ;Entry point for VA 10-10EZ, Version 6 or greater, page 1
"RTN","EASEZP61",8,0)
 ; Called from EN^EASEZP6F
"RTN","EASEZP61",9,0)
 N X,EASD
"RTN","EASEZP61",10,0)
 ;
"RTN","EASEZP61",11,0)
 S EASD=$NA(^TMP("EASEZ",$J,1))
"RTN","EASEZP61",12,0)
 D HDRMAIN^EASEZP6F(.EALNE)
"RTN","EASEZP61",13,0)
 D DEM
"RTN","EASEZP61",14,0)
 ;
"RTN","EASEZP61",15,0)
 D FT^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP61",16,0)
 S EAINFO("VET")=@EASD@(2),EAINFO("SSN")=@EASD@(5)
"RTN","EASEZP61",17,0)
 Q
"RTN","EASEZP61",18,0)
 ;
"RTN","EASEZP61",19,0)
DEM ; Print VA 10-10 Section I, Demographic information
"RTN","EASEZP61",20,0)
 ;
"RTN","EASEZP61",21,0)
 W !!?50,"SECTION I - GENERAL INFORMATION"
"RTN","EASEZP61",22,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",23,0)
 W !?18,"Federal law provides criminal penalties, including a fine and/or imprisonment for up to 5 years,"
"RTN","EASEZP61",24,0)
 W !?20,"for concealing a material fact or making a materially false statement.  (See 18 U.S.C. 1001)"
"RTN","EASEZP61",25,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",26,0)
 ;
"RTN","EASEZP61",27,0)
 W !,"1. VETERAN'S NAME (Last, First, Middle Name)",?50,"|2. OTHER NAMES USED",?87,"|3. MOTHER'S MAIDEN NAME",?121,"|4. GENDER"
"RTN","EASEZP61",28,0)
 W !?3,@EASD@(2),?50,"|   ",@EASD@(3),?87,"|   ",@EASD@("3A"),?121,"|   ",@EASD@(4)
"RTN","EASEZP61",29,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",30,0)
 ;
"RTN","EASEZP61",31,0)
 W !,"5. ARE YOU SPANISH, HISPANIC,",?32,"|6. WHAT IS YOUR RACE?   ",@EASD@("4B"),"AMERICAN INDIAN OR ALASKA NATIVE"
"RTN","EASEZP61",32,0)
 W ?103,@EASD@("4C"),"BLACK OR AFRICAN AMERICAN"
"RTN","EASEZP61",33,0)
 W !?3,"OR LATINO?   ",@EASD@("4A"),?32,"|",?57,@EASD@("4E"),"ASIAN"
"RTN","EASEZP61",34,0)
 W ?73,@EASD@("4F"),"WHITE",?87,@EASD@("4D"),"NATIVE HAWAIIAN OR OTHER PACIFIC ISLANDER"
"RTN","EASEZP61",35,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",36,0)
 ;
"RTN","EASEZP61",37,0)
 W !,"7. SOCIAL SECURITY NUMBER",?32,"|8. VA CLAIM NUMBER",?87,"|9. DATE OF BIRTH (mm/dd/yyyy)"
"RTN","EASEZP61",38,0)
 W !?3,@EASD@(5),?32,"|   ",@EASD@(6),?87,"|   ",@EASD@(7)
"RTN","EASEZP61",39,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",40,0)
 ;
"RTN","EASEZP61",41,0)
 W !,"9A. PLACE OF BIRTH (City & State)",?87,"|10. RELIGION"
"RTN","EASEZP61",42,0)
 W !?4,@EASD@("8A"),?87,"|    ",@EASD@(8)
"RTN","EASEZP61",43,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",44,0)
 ;
"RTN","EASEZP61",45,0)
 ;EAS*1.0*70
"RTN","EASEZP61",46,0)
 I $G(@EASD@("9H"))="UNITED STATES" D  I 1  ;Use domestic address field labels
"RTN","EASEZP61",47,0)
 . W !,"11. PERMANENT ADDRESS (Street)",?41,"|11A. CITY",?64,"|11B. STATE",?107,"|11C. ZIP CODE (9 digits)"
"RTN","EASEZP61",48,0)
 . W !?4,@EASD@("9A"),?41,"|     ",@EASD@("9B"),?64,"|     ",@EASD@("9C"),?107,"|     ",@EASD@("9D")
"RTN","EASEZP61",49,0)
 . W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",50,0)
 . ;
"RTN","EASEZP61",51,0)
 . W !,"11D. COUNTY",?35,"|11E. HOME TELEPHONE NUMBER (Include area code)  |11F. E-MAIL ADDRESS"
"RTN","EASEZP61",52,0)
 . W !?5,@EASD@("9E"),?35,"|     ",@EASD@(10),?84,"|     ",@EASD@("11A")
"RTN","EASEZP61",53,0)
 ;
"RTN","EASEZP61",54,0)
 E  D  ;Use foreign address field labels
"RTN","EASEZP61",55,0)
 . W !,"11. PERMANENT ADDRESS (Street)",?41,"|11A. CITY",?64,"|11B. PROVINCE",?107,"|11C. POSTAL CODE"
"RTN","EASEZP61",56,0)
 . W !?4,@EASD@("9A"),?41,"|     ",@EASD@("9B"),?64,"|     ",@EASD@("9F"),?107,"|     ",@EASD@("9G")
"RTN","EASEZP61",57,0)
 . W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",58,0)
 . ;
"RTN","EASEZP61",59,0)
 . W !,"11D. COUNTRY",?35,"|11E. HOME TELEPHONE NUMBER (Include area code)  |11F. E-MAIL ADDRESS"
"RTN","EASEZP61",60,0)
 . W !?5,@EASD@("9H"),?35,"|     ",@EASD@(10),?84,"|     ",@EASD@("11A")
"RTN","EASEZP61",61,0)
 ;
"RTN","EASEZP61",62,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",63,0)
 ;
"RTN","EASEZP61",64,0)
 W !,"11G. CELLULAR TELEPHONE NUMBER (Include area code)",?66,"|12. TYPE OF BENEFIT(S) APPLYING FOR"
"RTN","EASEZP61",65,0)
 W !?5,@EASD@("11G"),?66,"|    ",@EASD@("1A")
"RTN","EASEZP61",66,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",67,0)
 ;
"RTN","EASEZP61",68,0)
 W !,"13. WHICH VA MEDICAL CENTER OR OUTPATIENT CLINIC",?50,"|14. DO YOU WANT AN APPOINTMENT WITH A VA DOCTOR OR PROVIDER AS SOON AS ONE"
"RTN","EASEZP61",69,0)
 W !?4,"DO YOU PREFER?  ",@EASD@("1B"),?50,"|    BECOMES AVAILABLE?  ",@EASD@("11B")
"RTN","EASEZP61",70,0)
 I @EASD@("11B")="NO" W " I am only enrolling in case I need care in the future."
"RTN","EASEZP61",71,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",72,0)
 ;
"RTN","EASEZP61",73,0)
 W !,"15. CURRENT MARITAL STATUS   ",@EASD@(12)
"RTN","EASEZP61",74,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",75,0)
 ;
"RTN","EASEZP61",76,0)
 W !,"16. NAME, ADDRESS AND RELATIONSHIP OF NEXT OF KIN",?83,"|16A. NEXT OF KIN'S HOME TELEPHONE NUMBER"
"RTN","EASEZP61",77,0)
 W !?4,$P(@EASD@("19A"),U)," - ",$P(@EASD@("19A"),U,4),?83,"|     (Include area code)   ",@EASD@("19B")
"RTN","EASEZP61",78,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! F X=1:1:84 W " "
"RTN","EASEZP61",79,0)
 W $E(EALNE("UL"),1,48)
"RTN","EASEZP61",80,0)
 W !?4,$P(@EASD@("19A"),U,2),?83,"|16B. NEXT OF KIN'S WORK TELEPHONE NUMBER"
"RTN","EASEZP61",81,0)
 W !?4,$P(@EASD@("19A"),U,3),?83,"|     (Include area code)   ",@EASD@("19C")
"RTN","EASEZP61",82,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",83,0)
 ;
"RTN","EASEZP61",84,0)
 W !,"17. NAME, ADDRESS AND RELATIONSHIP OF EMERGENCY CONTACT",?83,"|17A. EMERGENCY CONTACT'S HOME TELEPHONE NUMBER"
"RTN","EASEZP61",85,0)
 W !?4,$P(@EASD@("20A"),U)," - ",$P(@EASD@("20A"),U,4),?83,"|     (Include area code)   ",@EASD@("20B")
"RTN","EASEZP61",86,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! F X=1:1:84 W " "
"RTN","EASEZP61",87,0)
 W $E(EALNE("UL"),1,48)
"RTN","EASEZP61",88,0)
 W !?4,$P(@EASD@("20A"),U,2),?83,"|17B. EMERGENCY CONTACT'S WORK TELEPHONE NUMBER"
"RTN","EASEZP61",89,0)
 W !?4,$P(@EASD@("20A"),U,3),?83,"|     (Include area code)   ",@EASD@("20C")
"RTN","EASEZP61",90,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",91,0)
 ;
"RTN","EASEZP61",92,0)
II ; Print SECTION II - INSURANCE INFORMATION
"RTN","EASEZP61",93,0)
 ;
"RTN","EASEZP61",94,0)
 W !!?25,"SECTION II - INSURANCE INFORMATION  (Use Separate Sheet for Additional Insurance)"
"RTN","EASEZP61",95,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",96,0)
 ;
"RTN","EASEZP61",97,0)
 W !,"1. HEALTH INSURANCE COMPANY NAME, ADDRESS AND TELEPHONE NUMBER"
"RTN","EASEZP61",98,0)
 W " (include coverage through spouse or other person)"
"RTN","EASEZP61",99,0)
 W !,"   ",@EASD@("17A"),?50,@EASD@("17J")
"RTN","EASEZP61",100,0)
 I @EASD@("17E")'="" W !,"   ",@EASD@("17E"),", ",@EASD@("17F"),", ",@EASD@("17G")," ",@EASD@("17H")
"RTN","EASEZP61",101,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",102,0)
 ;
"RTN","EASEZP61",103,0)
 W !,"2. NAME OF POLICY HOLDER",?33,"|3. POLICY NUMBER",?57,"|4. GROUP CODE"
"RTN","EASEZP61",104,0)
 W ?78,"|5. ARE YOU ELIG. FOR MEDICAID?",?112,"|5A. EFFECTIVE DATE"
"RTN","EASEZP61",105,0)
 W !?3,@EASD@("17B"),?33,"|   ",@EASD@("17C"),?57,"|   ",@EASD@("17D")
"RTN","EASEZP61",106,0)
 W ?78,"|   ",@EASD@("14J"),?112,"|"
"RTN","EASEZP61",107,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",108,0)
 ;
"RTN","EASEZP61",109,0)
 W !,"6. ARE YOU ENROLLED IN MEDICARE HOSPITAL INSURANCE PART A?  ",@EASD@("14K"),?75,"|6A. EFFECTIVE DATE (mm/dd/yyyy)  ",@EASD@("14K1")
"RTN","EASEZP61",110,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",111,0)
 ;
"RTN","EASEZP61",112,0)
 W !,"7. ARE YOU ENROLLED IN MEDICARE HOSPITAL INSURANCE PART B?  ",@EASD@("14L"),?75,"|7A. EFFECTIVE DATE (mm/dd/yyyy)  ",@EASD@("14L1")
"RTN","EASEZP61",113,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",114,0)
 ;
"RTN","EASEZP61",115,0)
 W !,"8. NAME EXACTLY AS IT APPEARS ON YOUR MEDICARE CARD",?70,"|9. MEDICARE CLAIM NUMBER"
"RTN","EASEZP61",116,0)
 W !?3,@EASD@("14N"),?70,"|   ",@EASD@("14M")
"RTN","EASEZP61",117,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP61",118,0)
 ;
"RTN","EASEZP61",119,0)
 Q
"RTN","EASEZP62")
0^2^B62742191
"RTN","EASEZP62",1,0)
EASEZP62 ;ALB/AMA,ERC,LBD,TDM - Print 1010EZ, Version 6 or greater, Cont., Page 2 ; 1/23/13 10:32am
"RTN","EASEZP62",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**51,60,70,107**;Mar 15, 2001;Build 32
"RTN","EASEZP62",3,0)
 ;
"RTN","EASEZP62",4,0)
 ;This routine copied from EASEZPF2; if the version # of the 1010EZ
"RTN","EASEZP62",5,0)
 ;application is 6.0 or greater, then this routine will be executed.
"RTN","EASEZP62",6,0)
 ;
"RTN","EASEZP62",7,0)
EN(EALNE,EAINFO) ; Entry point, called from EN^EASEZP6F
"RTN","EASEZP62",8,0)
 ;  Input
"RTN","EASEZP62",9,0)
 ;     EALNE  - Array of line formats for output
"RTN","EASEZP62",10,0)
 ;     EAINFO - Application Data array, see SETUP^EASEZP6F
"RTN","EASEZP62",11,0)
 ;
"RTN","EASEZP62",12,0)
 N EASD
"RTN","EASEZP62",13,0)
 ;
"RTN","EASEZP62",14,0)
 D HDR^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP62",15,0)
 S EASD=$NA(^TMP("EASEZ",$J,1))
"RTN","EASEZP62",16,0)
 ;
"RTN","EASEZP62",17,0)
 D EI
"RTN","EASEZP62",18,0)
 D MIL
"RTN","EASEZP62",19,0)
 ;
"RTN","EASEZP62",20,0)
 S EASD=$NA(^TMP("EASEZ",$J,2))
"RTN","EASEZP62",21,0)
 ;
"RTN","EASEZP62",22,0)
 D FIN
"RTN","EASEZP62",23,0)
 D DEP
"RTN","EASEZP62",24,0)
 ;
"RTN","EASEZP62",25,0)
 D FT^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP62",26,0)
 Q
"RTN","EASEZP62",27,0)
 ;
"RTN","EASEZP62",28,0)
 ;
"RTN","EASEZP62",29,0)
EI ; Print SECTION III - EMPLOYMENT INFORMATION
"RTN","EASEZP62",30,0)
 ;
"RTN","EASEZP62",31,0)
 W !!?48,"SECTION III - EMPLOYMENT INFORMATION"
"RTN","EASEZP62",32,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",33,0)
 ;
"RTN","EASEZP62",34,0)
 W !,"1. VETERAN'S EMPLOYMENT STATUS",?47,"|1A. COMPANY NAME, ADDRESS AND TELEPHONE NUMBER"
"RTN","EASEZP62",35,0)
 W !?3,$P(@EASD@("15A"),U),?47,"|    ",$P(@EASD@("15B"),U),"   ",$P(@EASD@("15B"),U,4)
"RTN","EASEZP62",36,0)
 W !,"Date of retirement (mm/dd/yyyy)   ",$P(@EASD@("15A"),U,2),?47,"|    ",$P(@EASD@("15B"),U,2)
"RTN","EASEZP62",37,0)
 W !,"If employed or retired, complete item 1A",?47,"|    ",$P(@EASD@("15B"),U,3)
"RTN","EASEZP62",38,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",39,0)
 ;
"RTN","EASEZP62",40,0)
 W !,"2. SPOUSE'S EMPLOYMENT STATUS",?47,"|2A. COMPANY NAME, ADDRESS AND TELEPHONE NUMBER"
"RTN","EASEZP62",41,0)
 W !?3,$P(@EASD@("16A"),U),?47,"|    ",$P(@EASD@("16B"),U),"   ",$P(@EASD@("16B"),U,4)
"RTN","EASEZP62",42,0)
 W !,"Date of retirement (mm/dd/yyyy)   ",$P(@EASD@("16A"),U,2),?47,"|    ",$P(@EASD@("16B"),U,2)
"RTN","EASEZP62",43,0)
 W !,"If employed or retired, complete item 2A",?47,"|    ",$P(@EASD@("16B"),U,3)
"RTN","EASEZP62",44,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",45,0)
 Q
"RTN","EASEZP62",46,0)
 ;
"RTN","EASEZP62",47,0)
MIL ;  Print out VA 10-10EZ Section IV, Military Service Information
"RTN","EASEZP62",48,0)
 ;
"RTN","EASEZP62",49,0)
 W !!?45,"SECTION IV - MILITARY SERVICE INFORMATION"
"RTN","EASEZP62",50,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",51,0)
 ;
"RTN","EASEZP62",52,0)
 W !,"1. LAST BRANCH OF SERVICE",?28,"|1A. LAST ENTRY DATE",?50,"|1B. LAST DISCHARGE DATE",?76,"|1C. DISCHARGE TYPE",?103,"|1D. MILITARY SERVICE NUMBER"
"RTN","EASEZP62",53,0)
 W !?4,@EASD@("13A"),?28,"|    ",@EASD@("13B"),?50,"|    ",@EASD@("13C"),?76,"|    ",@EASD@("13D"),?103,"|    ",@EASD@("13E")
"RTN","EASEZP62",54,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",55,0)
 ;
"RTN","EASEZP62",56,0)
 W !,"2. ANSWER YES OR NO:"
"RTN","EASEZP62",57,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",58,0)
 ;
"RTN","EASEZP62",59,0)
 ;DG*5.3*688 - change wording from Environmental Contaminants to SW 
"RTN","EASEZP62",60,0)
 ;Asia Conditions.
"RTN","EASEZP62",61,0)
 W !,"  A.  ARE YOU A PURPLE HEART AWARD RECIPIENT?",?58,"| ",@EASD@("14A1"),?64,"|  E. DID YOU SERVE IN SW ASIA DURING THE GULF WAR BETWEEN",?124,"| ",@EASD@("14E")
"RTN","EASEZP62",62,0)
 W !,?58,"|",?64,"|     AUGUST 2, 1990 AND NOVEMBER 11, 1998?",?124,"|"
"RTN","EASEZP62",63,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",64,0)
 ;
"RTN","EASEZP62",65,0)
 W !,"  B.  ARE YOU A FORMER PRISONER OF WAR?",?58,"| ",@EASD@("14A2"),?64,"| F. DID YOU SERVE IN VIETNAM BETWEEN JANUARY 9, 1962 AND",?124,"| ",@EASD@("14F")
"RTN","EASEZP62",66,0)
 W !,?58,"|",?64,"|     MAY 7, 1975?",?124,"|"
"RTN","EASEZP62",67,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",68,0)
 ;
"RTN","EASEZP62",69,0)
 W !,"  C.  DID YOU SERVE IN COMBAT AFTER 11/11/1998?",?58,"| ",@EASD@("14B2"),?64,"|  G. WERE YOU EXPOSED TO RADIATION WHILE IN THE MILITARY?",?124,"| ",@EASD@("14G")
"RTN","EASEZP62",70,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",71,0)
 ;
"RTN","EASEZP62",72,0)
 W !,"  D.  WAS YOUR DISCHARGE FROM MILITARY FOR A DISABILITY",?58,"| ",@EASD@("14D4"),?64,"|  H. DID YOU RECEIVE NOSE & THROAT RADIUM TREATMENTS",?124,"| ",@EASD@("14G1")
"RTN","EASEZP62",73,0)
 W !?6,"INCURRED OR AGGRAVATED IN THE LINE OF DUTY?",?58,"|     |     WHILE IN THE MILITARY?",?124,"|"
"RTN","EASEZP62",74,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",75,0)
 ;
"RTN","EASEZP62",76,0)
 W !,"  D1. ARE YOU RECEIVING DISABILITY RETIREMENT PAY",?58,"| ",@EASD@("14D3"),?64,"|  I. DO YOU HAVE A SPINAL CORD INJURY?",?124,"| ",@EASD@("14I")
"RTN","EASEZP62",77,0)
 W !?6,"INSTEAD OF VA COMPENSATION?",?58,"|     |",?124,"|"
"RTN","EASEZP62",78,0)
 ;
"RTN","EASEZP62",79,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",80,0)
 Q
"RTN","EASEZP62",81,0)
 ;
"RTN","EASEZP62",82,0)
FIN ; Print out VA 10-10EZ Section V, Financial Disclosure information
"RTN","EASEZP62",83,0)
 ;
"RTN","EASEZP62",84,0)
 W !!?50,"SECTION V - FINANCIAL DISCLOSURE"
"RTN","EASEZP62",85,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",86,0)
 ;
"RTN","EASEZP62",87,0)
 W !,"Disclosure allows VA to accurately determine whether certain Veterans will be charged copays for care and medications, their"
"RTN","EASEZP62",88,0)
 W !,"eligibility for other services and enrollment priority. Veterans are not required to disclose their financial information; however,"
"RTN","EASEZP62",89,0)
 W !,"VA is not currently enrolling new applicants who decline to provide their financial information unless they have other qualifying"
"RTN","EASEZP62",90,0)
 W !,"eligibility factors. Recent Combat Veterans are eligible for enrollment without disclosing their financial information but like"
"RTN","EASEZP62",91,0)
 W !,"other Veterans may provide it to establish their eligibility for travel assistance, cost-free medication and/or medical care for"
"RTN","EASEZP62",92,0)
 W !,"services unrelated to military experience."
"RTN","EASEZP62",93,0)
 ;
"RTN","EASEZP62",94,0)
 N EAN,EAY S (EAY,EAN)="___"
"RTN","EASEZP62",95,0)
 ;IF NO ENTRY, THEN NO MEANS TEST, SO NO ANSWER
"RTN","EASEZP62",96,0)
 ;IF @EASD@(998)="Y", THEN VET DECLINES TO GIVE INFO, SO ANSWER "NO"
"RTN","EASEZP62",97,0)
 I $D(@EASD@(998)) D
"RTN","EASEZP62",98,0)
 . S:@EASD@(998)="YES" EAN=" X "
"RTN","EASEZP62",99,0)
 . S:@EASD@(998)="NO" EAY=" X "
"RTN","EASEZP62",100,0)
 ;
"RTN","EASEZP62",101,0)
 W !!?3,EAN," NO, I DO NOT WISH TO PROVIDE INFORMATION IN SECTIONS VI THROUGH IX. I understand that VA is not enrolling new applicants"
"RTN","EASEZP62",102,0)
 W !,"who do not provide this information and who do not have other qualifying eligibility factors [i.e.,a former Prisoner of War; in"
"RTN","EASEZP62",103,0)
 W !,"receipt of a Purple Heart; a recently discharged Combat Veteran (e.g.,OEF/OIF/OND who were discharged within the past 5 years);"
"RTN","EASEZP62",104,0)
 W !,"discharged for a disability incurred or aggravated in the line of duty; receiving VA service-connected disability compensation;"
"RTN","EASEZP62",105,0)
 W !,"receiving VA pension; or in receipt of Medicaid benefits.] (Sign and date the form in Section XII.)"
"RTN","EASEZP62",106,0)
 ;
"RTN","EASEZP62",107,0)
 W !!?3,EAY," YES, I WILL PROVIDE MY HOUSEHOLD FINANCIAL INFORMATION FOR LAST CALENDAR YEAR. Complete applicable sections VI through IX."
"RTN","EASEZP62",108,0)
 W !,"(Sign and date the form in Section XII.)"
"RTN","EASEZP62",109,0)
 W !?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",110,0)
 Q
"RTN","EASEZP62",111,0)
 ;
"RTN","EASEZP62",112,0)
DEP ;  Print out VA 10-10EZ Section VI, Dependent Information
"RTN","EASEZP62",113,0)
 ;
"RTN","EASEZP62",114,0)
 W !!?24,"SECTION VI - DEPENDENT INFORMATION  (Use a separate sheet for additional dependents)"
"RTN","EASEZP62",115,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",116,0)
 ;
"RTN","EASEZP62",117,0)
 W !,"1.  SPOUSE'S NAME (Last, First, Middle Name)",?60,"|2.  CHILD'S NAME (Last, First, Middle Name)"
"RTN","EASEZP62",118,0)
 W !?4,$P(@EASD@(1),U),?60,"|    ",@EASD@(2)
"RTN","EASEZP62",119,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",120,0)
 ;
"RTN","EASEZP62",121,0)
 W !,"1A. SPOUSE'S MAIDEN NAME OR OTHER NAMES USED",?60,"|2A. CHILD'S RELATIONSHIP TO YOU"
"RTN","EASEZP62",122,0)
 W !?4,$P(@EASD@(1),U,2),?60,"|    ",@EASD@(9)
"RTN","EASEZP62",123,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",124,0)
 ;
"RTN","EASEZP62",125,0)
 W !,"1B. SPOUSE'S SOCIAL SECURITY NUMBER",?60,"|2B. CHILD'S SOCIAL SECURITY NUMBER",?99,"|2C. DATE CHILD BECAME YOUR"
"RTN","EASEZP62",126,0)
 W !?4,@EASD@(3),?60,"|    ",@EASD@(7),?99,"|    DEPENDENT   ",@EASD@(11)
"RTN","EASEZP62",127,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",128,0)
 ;
"RTN","EASEZP62",129,0)
 W !,"1C. SPOUSE'S DATE OF BIRTH (mm/dd/yyyy)",?44,"|1D. DATE OF MARRIAGE (mm/dd/yyyy)",?84,"|2D. CHILD'S DATE OF BIRTH (mm/dd/yyyy)"
"RTN","EASEZP62",130,0)
 W !?4,@EASD@(4),?44,"|    ",@EASD@(10),?84,"|    ",@EASD@(5)
"RTN","EASEZP62",131,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",132,0)
 ;
"RTN","EASEZP62",133,0)
 W !,"1E. SPOUSE'S ADDRESS AND TELEPHONE NUMBER (Street, City, State, ZIP)",?84,"|2E. WAS CHILD PERMANENTLY AND TOTALLY"
"RTN","EASEZP62",134,0)
 W !?4,$P(@EASD@(6),U),?84,"|    DISABLED BEFORE THE AGE OF 18?   ",@EASD@(14)
"RTN","EASEZP62",135,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! N Z F Z=1:1:85 W " "
"RTN","EASEZP62",136,0)
 W $E(EALNE("UL"),1,47)
"RTN","EASEZP62",137,0)
 ;
"RTN","EASEZP62",138,0)
 W !?4,$P(@EASD@(6),U,2),?84,"|2F. IF CHILD IS BETWEEN 18 AND 23 YEARS"
"RTN","EASEZP62",139,0)
 W !?4,@EASD@(8),?84,"|    OF AGE, DID CHILD ATTEND SCHOOL LAST"
"RTN","EASEZP62",140,0)
 W !?84,"|    CALENDAR YEAR?   ",@EASD@(15)
"RTN","EASEZP62",141,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",142,0)
 ;
"RTN","EASEZP62",143,0)
 W !,"3. IF YOUR SPOUSE OR DEPENDENT CHILD DID NOT LIVE WITH YOU LAST",?65,"|2G. EXPENSES PAID BY YOUR DEPENDENT CHILD FOR COLLEGE, VOCATIONAL"
"RTN","EASEZP62",144,0)
 W !?3,"YEAR, DID YOU PROVIDE SUPPORT?",?65,"|    REHABILITATION OR TRAINING (e.g., tuition, books, materials)"
"RTN","EASEZP62",145,0)
 W !?40 I $P(@EASD@(12),U)!($P(@EASD@(12),U,2)) W "YES"
"RTN","EASEZP62",146,0)
 W ?65,"|",?73,"$ ",@EASD@(13)
"RTN","EASEZP62",147,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP62",148,0)
 Q
"RTN","EASEZP63")
0^8^B17289170
"RTN","EASEZP63",1,0)
EASEZP63 ; ALB/AMA,LBD - Print 1010EZ, Version 6 or greater, Cont. ; 10/29/12 12:26pm
"RTN","EASEZP63",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**51,60,57,107**;Mar 15, 2001;Build 32
"RTN","EASEZP63",3,0)
 ;
"RTN","EASEZP63",4,0)
 ;This routine copied from EASEZPF3; if the version # of the 1010EZ
"RTN","EASEZP63",5,0)
 ;application is 6.0 or greater, then this routine will be executed.
"RTN","EASEZP63",6,0)
 ;
"RTN","EASEZP63",7,0)
EN(EALNE,EAINFO,EASDG) ; Entry point to print Page 3, called from EN^EASEZP6F
"RTN","EASEZP63",8,0)
 ;  Input
"RTN","EASEZP63",9,0)
 ;     EALNE  - Array of line formats for output
"RTN","EASEZP63",10,0)
 ;     EAINFO - Application Data array, see SETUP^EASEZRPF
"RTN","EASEZP63",11,0)
 ;     EASDG  - Flag variable to signify request to print from DG options
"RTN","EASEZP63",12,0)
 ;
"RTN","EASEZP63",13,0)
 N EASIGN
"RTN","EASEZP63",14,0)
 ;
"RTN","EASEZP63",15,0)
 I $$GET1^DIQ(712,EAINFO("EASAPP")_",",4)]"" D
"RTN","EASEZP63",16,0)
 . S EASIGN=$$GET1^DIQ(712,EAINFO("EASAPP")_",",4.1)
"RTN","EASEZP63",17,0)
 S EASIGN=$G(EASIGN)
"RTN","EASEZP63",18,0)
 ;
"RTN","EASEZP63",19,0)
 D HDR^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP63",20,0)
 S EASD=$NA(^TMP("EASEZ",$J,2))
"RTN","EASEZP63",21,0)
 ;
"RTN","EASEZP63",22,0)
 D INC
"RTN","EASEZP63",23,0)
 D EXP
"RTN","EASEZP63",24,0)
 ;
"RTN","EASEZP63",25,0)
 Q
"RTN","EASEZP63",26,0)
 ;
"RTN","EASEZP63",27,0)
INC ; Print out VA 10-10EZ Section VII, Gross Annual Income information
"RTN","EASEZP63",28,0)
 ;
"RTN","EASEZP63",29,0)
 I $G(EASDG),+@EASD@(999) W !!?6,"SECTION VII - PREVIOUS CALENDAR YEAR GROSS ANNUAL INCOME OF VETERAN, SPOUSE AND DEPENDENT CHILDREN  (INCOME YEAR:  ",@EASD@(999),")"
"RTN","EASEZP63",30,0)
 E  W !!?17,"SECTION VII - PREVIOUS CALENDAR YEAR GROSS ANNUAL INCOME OF VETERAN, SPOUSE AND DEPENDENT CHILDREN"
"RTN","EASEZP63",31,0)
 W !?30,"(Use a separate sheet for additional dependents' financial information)"
"RTN","EASEZP63",32,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",33,0)
 ;
"RTN","EASEZP63",34,0)
 W !?76,"VETERAN",?97,"SPOUSE",?117,"CHILD 1"
"RTN","EASEZP63",35,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",36,0)
 ;
"RTN","EASEZP63",37,0)
 W !,"1. GROSS ANNUAL INCOME FROM EMPLOYMENT (wages, bonuses, tips, etc.)",?69,"|  $ ",$P(@EASD@("2C1"),U),?90,"|  $ ",$P(@EASD@("2C1"),U,2),?110,"|  $ ",$P(@EASD@("2C1"),U,3)
"RTN","EASEZP63",38,0)
 W !,"EXCLUDING INCOME FROM YOUR FARM, RANCH, PROPERTY OR BUSINESS",?69,"|",?90,"|",?110,"|"
"RTN","EASEZP63",39,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",40,0)
 ;
"RTN","EASEZP63",41,0)
 W !,"2. NET INCOME FROM YOUR FARM, RANCH, PROPERTY OR BUSINESS",?69,"|  $ ",$P(@EASD@("2C3"),U),?90,"|  $ ",$P(@EASD@("2C3"),U,2),?110,"|  $ ",$P(@EASD@("2C3"),U,3)
"RTN","EASEZP63",42,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",43,0)
 ;
"RTN","EASEZP63",44,0)
 W !,"3. LIST OTHER INCOME AMOUNTS (Social Security, compensation,",?69,"|  $ ",$P(@EASD@("2C2"),U),?90,"|  $ ",$P(@EASD@("2C2"),U,2),?110,"|  $ ",$P(@EASD@("2C2"),U,3)
"RTN","EASEZP63",45,0)
 W !,"pension, interest, dividends.  Exclude welfare)",?69,"|",?90,"|",?110,"|"
"RTN","EASEZP63",46,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",47,0)
 Q
"RTN","EASEZP63",48,0)
 ;
"RTN","EASEZP63",49,0)
EXP ; Print out VA 10-10EZ Section VIII, Deductible Expense Information
"RTN","EASEZP63",50,0)
 ;
"RTN","EASEZP63",51,0)
 I $G(EASDG),+@EASD@(999) W !!?27,"SECTION VIII - PREVIOUS CALENDAR YEAR DEDUCTIBLE EXPENSES  (INCOME YEAR:  ",@EASD@(999),")"
"RTN","EASEZP63",52,0)
 E  W !!?38,"SECTION VIII - PREVIOUS CALENDAR YEAR DEDUCTIBLE EXPENSES"
"RTN","EASEZP63",53,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",54,0)
 ;
"RTN","EASEZP63",55,0)
 W !,"1. TOTAL NON-REIMBURSED MEDICAL EXPENSES PAID BY YOU OR YOUR SPOUSE (e.g., payments for doctors, dentists,",?110,"|  $ ",@EASD@("2D1")
"RTN","EASEZP63",56,0)
 W !,"medications, Medicare, health insurance, hospital and nursing home)  VA will calculate a deductible and the",?110,"|"
"RTN","EASEZP63",57,0)
 W !,"net medical expenses you may claim.",?110,"|"
"RTN","EASEZP63",58,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",59,0)
 ;
"RTN","EASEZP63",60,0)
 W !,"2. AMOUNT YOU PAID LAST CALENDAR YEAR FOR FUNERAL AND BURIAL EXPENSES FOR YOUR DECEASED SPOUSE OR DEPENDENT",?110,"|  $ ",@EASD@("2D2")
"RTN","EASEZP63",61,0)
 W !,"CHILD  (Also enter spouse or child's information in Section VI.)",?110,"|"
"RTN","EASEZP63",62,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",63,0)
 ;
"RTN","EASEZP63",64,0)
 W !,"3. AMOUNT YOU PAID LAST CALENDAR YEAR FOR YOUR COLLEGE OR VOCATIONAL EDUCATIONAL EXPENSES (e.g., tuition,",?110,"|  $ ",@EASD@("2D3")
"RTN","EASEZP63",65,0)
 W !,"books, fees, materials)  DO NOT LIST YOUR DEPENDENT'S EDUCATIONAL EXPENSES",?110,"|"
"RTN","EASEZP63",66,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",67,0)
 Q
"RTN","EASEZP64")
0^9^B67534937
"RTN","EASEZP64",1,0)
EASEZP64 ; ALB/AMA,LBD - Print 1010EZ, Version 6 or greater, Cont. ; 10/29/12 12:30pm
"RTN","EASEZP64",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**60,57,70,107**;Mar 15, 2001;Build 32
"RTN","EASEZP64",3,0)
 ;
"RTN","EASEZP64",4,0)
 ;This routine carved from EASEZPF3; if the version # of the 1010EZ
"RTN","EASEZP64",5,0)
 ;application is 6.0 or greater, then this routine will be executed.
"RTN","EASEZP64",6,0)
 ;
"RTN","EASEZP64",7,0)
 ;EAS*1.0*107 - The new version of the 10-10EZ form has all these
"RTN","EASEZP64",8,0)
 ;sections as a continuation of page 3.  There is no longer a page 4.
"RTN","EASEZP64",9,0)
 ;
"RTN","EASEZP64",10,0)
EN(EALNE,EAINFO,EASDG)  ;Entry point to print Page 3, called from EN^EASEZP6F
"RTN","EASEZP64",11,0)
 ;  Input
"RTN","EASEZP64",12,0)
 ;     EALNE  - Array of line formats for output
"RTN","EASEZP64",13,0)
 ;     EAINFO - Application Data array, see SETUP^EASEZPF
"RTN","EASEZP64",14,0)
 ;     EASDG  - Flag variable to signify request to print from DG options
"RTN","EASEZP64",15,0)
 ;
"RTN","EASEZP64",16,0)
 N EASIGN,EASD
"RTN","EASEZP64",17,0)
 ;
"RTN","EASEZP64",18,0)
 I $$GET1^DIQ(712,EAINFO("EASAPP")_",",4)]"" D
"RTN","EASEZP64",19,0)
 . S EASIGN=$$GET1^DIQ(712,EAINFO("EASAPP")_",",4.1)
"RTN","EASEZP64",20,0)
 S EASIGN=$G(EASIGN)
"RTN","EASEZP64",21,0)
 ;
"RTN","EASEZP64",22,0)
 S EASD=$NA(^TMP("EASEZ",$J,2))
"RTN","EASEZP64",23,0)
 ;
"RTN","EASEZP64",24,0)
 D NET
"RTN","EASEZP64",25,0)
 D PAP
"RTN","EASEZP64",26,0)
 D CON
"RTN","EASEZP64",27,0)
 D AOB
"RTN","EASEZP64",28,0)
 D FT^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP64",29,0)
 ;
"RTN","EASEZP64",30,0)
 Q
"RTN","EASEZP64",31,0)
 ;
"RTN","EASEZP64",32,0)
NET ;  Print SECTION IX - PREVIOUS CALENDAR YEAR NET WORTH
"RTN","EASEZP64",33,0)
 ;
"RTN","EASEZP64",34,0)
 I $G(EASDG),+@EASD@(999) W !!?2,"SECTION IX - PREVIOUS CALENDAR YEAR NET WORTH  (INCOME YEAR:  ",@EASD@(999),")  (Use a separate sheet for additional dependents)"
"RTN","EASEZP64",35,0)
 E  W !!?38,"SECTION IX - PREVIOUS CALENDAR YEAR NET WORTH  (Use a separate sheet for additional dependents)"
"RTN","EASEZP64",36,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",37,0)
 ;
"RTN","EASEZP64",38,0)
 W !?78,"|",?84,"VETERAN",?96,"|",?102,"SPOUSE",?114,"|",?120,"CHILD 1"
"RTN","EASEZP64",39,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",40,0)
 ;
"RTN","EASEZP64",41,0)
 W !,"1. CASH, AMOUNT IN BANK ACCOUNTS (e.g., checking and savings accounts,",?78,"|  $ ",$P(@EASD@("2E1"),U),?96,"|  $ ",$P(@EASD@("2E1"),U,2),?114,"|  $ ",$P(@EASD@("2E1"),U,3)
"RTN","EASEZP64",42,0)
 W !,"certificates of deposit, individual retirement accounts, stocks and bonds)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZP64",43,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",44,0)
 ;
"RTN","EASEZP64",45,0)
 W !,"2. MARKET VALUE OF LAND AND BUILDINGS MINUS MORTGAGES AND LIENS (e.g., second",?78,"|  $ ",$P(@EASD@("2E2"),U),?96,"|  $ ",$P(@EASD@("2E2"),U,2),?114,"|  $ ",$P(@EASD@("2E2"),U,3)
"RTN","EASEZP64",46,0)
 W !,"homes and non-income-producing property.  Do not count your primary home.)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZP64",47,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",48,0)
 ;
"RTN","EASEZP64",49,0)
 W !,"3. VALUE OF OTHER PROPERTY OR ASSETS (e.g., art, rare coins, collectibles)",?78,"|  $ ",$P(@EASD@("2E3"),U),?96,"|  $ ",$P(@EASD@("2E3"),U,2),?114,"|  $ ",$P(@EASD@("2E3"),U,3)
"RTN","EASEZP64",50,0)
 W !,"MINUS THE AMOUNT YOU OWE ON THESE ITEMS.  INCLUDE VALUE OF FARM, RANCH, OR",?78,"|",?96,"|",?114,"|"
"RTN","EASEZP64",51,0)
 W !,"BUSINESS ASSETS.  Exclude household effects and family vehicles.",?78,"|",?96,"|",?114,"|"
"RTN","EASEZP64",52,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",53,0)
 Q
"RTN","EASEZP64",54,0)
 ;
"RTN","EASEZP64",55,0)
 ;
"RTN","EASEZP64",56,0)
PAP ;  Print SECTION X - PAPERWORK AND PRIVACY ACT INFORMATION
"RTN","EASEZP64",57,0)
 ;
"RTN","EASEZP64",58,0)
 W !!?34,"SECTION X - PAPERWORK REDUCTION ACT AND PRIVACY ACT INFORMATION"
"RTN","EASEZP64",59,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",60,0)
 ;
"RTN","EASEZP64",61,0)
 W !,"The Paperwork Reduction Act of 1995 requires us to notify you that this information collection is in accordance with the"
"RTN","EASEZP64",62,0)
 W !,"clearance requirements of section 3507 of the Paperwork Reduction Act of 1995.  We may not conduct or sponsor, and you are not"
"RTN","EASEZP64",63,0)
 W !,"required to respond to, a collection of information unless it displays a valid OMB number.  We anticipate that the time expended by"
"RTN","EASEZP64",64,0)
 W !,"all individuals who must complete this form will average 45 minutes.  This includes the time it will take to read instructions,"
"RTN","EASEZP64",65,0)
 W !,"gather the necessary facts and fill out the form."
"RTN","EASEZP64",66,0)
 W !,"Privacy Act Information:  VA is asking you to provide the information on this form under 38 U.S.C., sections 1705, 1710, 1712,"
"RTN","EASEZP64",67,0)
 W !,"and 1722 in order for VA to determine your eligibility for medical benefits.  Information you supply may be verified through a"
"RTN","EASEZP64",68,0)
 W !,"computer-matching program.  VA may disclose the information that you put on the form as permitted by law.  VA may make a ""routine"
"RTN","EASEZP64",69,0)
 W !,"use"" disclosure of the information as outlined in the Privacy Act systems of records notices and in accordance with the VHA Notice"
"RTN","EASEZP64",70,0)
 W !,"of Privacy Practices.  Providing the requested information is voluntary, but if any or all of the requested information is not"
"RTN","EASEZP64",71,0)
 W !,"provided, it may delay or result in denial of your request for health care benefits.  Failure to furnish the information will not"
"RTN","EASEZP64",72,0)
 W !,"have any effect on any other benefits to which you may be entitled.  If you provide VA your Social Security Number, VA will use it"
"RTN","EASEZP64",73,0)
 W !,"to administer your VA benefits.  VA may also use this information to identify Veterans and persons claiming or receiving VA"
"RTN","EASEZP64",74,0)
 W !,"benefits and their records, and for other purposes authorized or required by law."
"RTN","EASEZP64",75,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",76,0)
 Q
"RTN","EASEZP64",77,0)
CON ;  Print SECTION XI - CONSENT TO COPAYS
"RTN","EASEZP64",78,0)
 ;
"RTN","EASEZP64",79,0)
 W !!?49,"SECTION XI - CONSENT TO COPAYS"
"RTN","EASEZP64",80,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",81,0)
 ;
"RTN","EASEZP64",82,0)
 W !,"By signing this application you are agreeing to pay the applicable VA copays for treatment or services of your NSC conditions as"
"RTN","EASEZP64",83,0)
 W !,"required by law."
"RTN","EASEZP64",84,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",85,0)
 Q
"RTN","EASEZP64",86,0)
 ;
"RTN","EASEZP64",87,0)
AOB ;  Print SECTION XII - ASSIGNMENT OF BENEFITS
"RTN","EASEZP64",88,0)
 ;
"RTN","EASEZP64",89,0)
 W !!?48,"SECTION XII - ASSIGNMENT OF BENEFITS"
"RTN","EASEZP64",90,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",91,0)
 ;
"RTN","EASEZP64",92,0)
 W !,"I understand that pursuant to 38 U.S.C. section 1729 and 42 U.S.C. 2651, the Department of Veterans Affairs (VA) is authorized to"
"RTN","EASEZP64",93,0)
 W !,"recover or collect from my health plan (HP) or any other legally responsible third party for the reasonable charges of "
"RTN","EASEZP64",94,0)
 W !,"nonservice-connected VA medical care or services furnished or provided to me.  I hereby authorize payment directly to VA from any"
"RTN","EASEZP64",95,0)
 W !,"HP under which I am covered (including coverage provided under my spouse's HP) that is responsible for payment of the charges for"
"RTN","EASEZP64",96,0)
 W !,"my medical care, including benefits otherwise payable to me or my spouse. Furthermore, I hereby assign to the VA any claim I may"
"RTN","EASEZP64",97,0)
 W !,"have against any person or entity who is or may be legally responsible for the payment of the cost of medical services provided to"
"RTN","EASEZP64",98,0)
 W !,"me by the VA. I understand that this assignment shall not limit or prejudice my right to recover for my own benefit any amount in"
"RTN","EASEZP64",99,0)
 W !,"excess of the cost of medical services provided to me by the VA or any other amount to which I may be entitled. I hereby appoint"
"RTN","EASEZP64",100,0)
 W !,"the Attorney General of the United States and the Secretary of Veterans' Affairs and their designees as my Attorneys-in-fact to"
"RTN","EASEZP64",101,0)
 W !,"take all necessary and appropriate actions in order to recover and receive all or part of the amount herein assigned.  I hereby"
"RTN","EASEZP64",102,0)
 W !,"authorize the VA to disclose, to my attorney and to any third party or administrative agency who may be responsible for payment of"
"RTN","EASEZP64",103,0)
 W !,"the cost of medical services provided to me, information from my medical records as necessary to verify my claim. Further, I hereby"
"RTN","EASEZP64",104,0)
 W !,"authorize any such third party or administrative agency to disclose to the VA any information regarding my claim."
"RTN","EASEZP64",105,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",106,0)
 ;
"RTN","EASEZP64",107,0)
 W !!?6,"ALL APPLICANTS MUST SIGN AND DATE THIS FORM.  REFER TO INSTRUCTIONS WHICH DEFINE WHO CAN SIGN ON BEHALF OF THE VETERAN.",!
"RTN","EASEZP64",108,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",109,0)
 ;
"RTN","EASEZP64",110,0)
 W !,"SIGNATURE OF APPLICANT",?90,"| DATE"
"RTN","EASEZP64",111,0)
 I $G(EASIGN)]"" W !,"SIGNATURE OF APPLICANT OR APPLICANT'S REPRESENTATIVE HAS BEEN VERIFIED",?90,"| ",EASIGN,!?90,"|"
"RTN","EASEZP64",112,0)
 E  W !?90,"|",!?90,"|"
"RTN","EASEZP64",113,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",114,0)
 Q
"RTN","EASEZP6F")
0^3^B14707219
"RTN","EASEZP6F",1,0)
EASEZP6F ;ALB/AMA,LBD - Print 1010EZ, Version 6 or greater ; 9/19/12 11:42am
"RTN","EASEZP6F",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**51,60,57,107**;Mar 15, 2001;Build 32
"RTN","EASEZP6F",3,0)
 ;
"RTN","EASEZP6F",4,0)
 ; These routines print a version of the OMB approved VA10-10EZ form.
"RTN","EASEZP6F",5,0)
 ; No local modifications to these routines will be made.  Any changes
"RTN","EASEZP6F",6,0)
 ; will be provided through the National Patch Module  release process.
"RTN","EASEZP6F",7,0)
 ;
"RTN","EASEZP6F",8,0)
 ; This routine was copied from EASEZPF; if the version # of the 1010EZ
"RTN","EASEZP6F",9,0)
 ; application is 6.0 or greater, then this routine will be executed.
"RTN","EASEZP6F",10,0)
 ;
"RTN","EASEZP6F",11,0)
EN ; Entry point to print 1010EZ, Version 6 or greater
"RTN","EASEZP6F",12,0)
 N EALNE,EAINFO,EAABRT,EAADL,ERR,EAMULT
"RTN","EASEZP6F",13,0)
 ;
"RTN","EASEZP6F",14,0)
 D SETUP(.EALNE,.EAINFO,EASAPP,EASDFN)
"RTN","EASEZP6F",15,0)
 ;
"RTN","EASEZP6F",16,0)
 D PAGE1^EASEZP6U
"RTN","EASEZP6F",17,0)
 D PAGE1^EASEZPU3
"RTN","EASEZP6F",18,0)
 D EN^EASEZP61(.EALNE,.EAINFO)
"RTN","EASEZP6F",19,0)
 ;
"RTN","EASEZP6F",20,0)
 D PAGE2^EASEZPU2
"RTN","EASEZP6F",21,0)
 D EN^EASEZP62(.EALNE,.EAINFO)
"RTN","EASEZP6F",22,0)
 ;
"RTN","EASEZP6F",23,0)
 D EN^EASEZP63(.EALNE,.EAINFO)
"RTN","EASEZP6F",24,0)
 D EN^EASEZP64(.EALNE,.EAINFO)   ;EAS*1.0*60
"RTN","EASEZP6F",25,0)
 ;
"RTN","EASEZP6F",26,0)
 ;Print additional insurance pages if more than 1 insurance company
"RTN","EASEZP6F",27,0)
 F EAADL=1:1 D  Q:$G(EAABRT)
"RTN","EASEZP6F",28,0)
 . I '$D(^TMP("EZTEMP",$J,"IA",EAADL)) S EAABRT=1 Q
"RTN","EASEZP6F",29,0)
 . S EAMULT=1
"RTN","EASEZP6F",30,0)
 . D PAGEI^EASEZPU3(EAADL)
"RTN","EASEZP6F",31,0)
 I $G(EAMULT) D EN^EASEZP6I(.EALNE,.EAINFO)
"RTN","EASEZP6F",32,0)
 ;
"RTN","EASEZP6F",33,0)
 ;Print additional dependent pages if more than 1 dependent
"RTN","EASEZP6F",34,0)
 S (EAABRT,EAMULT)=0 F EAADL=1:1 D  Q:$G(EAABRT)
"RTN","EASEZP6F",35,0)
 . I '$D(^TMP("EZTEMP",$J,"IIB",EAADL)) S EAABRT=1 Q
"RTN","EASEZP6F",36,0)
 . S EAMULT=1
"RTN","EASEZP6F",37,0)
 . D PAGEN^EASEZPU3(EAADL)
"RTN","EASEZP6F",38,0)
 I EAMULT D EN^EASEZP6D(.EALNE,.EAINFO)
"RTN","EASEZP6F",39,0)
 ;
"RTN","EASEZP6F",40,0)
 ;Print additional dependent financial pages if more
"RTN","EASEZP6F",41,0)
 ;than 1 dependent, starting with the 2nd one
"RTN","EASEZP6F",42,0)
 ;(since Child 1 info already displayed on pages 2 & 3)
"RTN","EASEZP6F",43,0)
 S (EAABRT,EAMULT)=0 F EAADL=2:1 D  Q:$G(EAABRT)
"RTN","EASEZP6F",44,0)
 . I '$D(^TMP("EZTEMP",$J,"IIF",EAADL)) S EAABRT=1 Q
"RTN","EASEZP6F",45,0)
 . S EAMULT=1
"RTN","EASEZP6F",46,0)
 . D PAGEDFF^EASEZPU2(EAADL)
"RTN","EASEZP6F",47,0)
 S EAABRT=0 F EAADL=2:1 D  Q:$G(EAABRT)
"RTN","EASEZP6F",48,0)
 . I '$D(^TMP("EZTEMP",$J,"IIG",EAADL)) S EAABRT=1 Q
"RTN","EASEZP6F",49,0)
 . S EAMULT=1
"RTN","EASEZP6F",50,0)
 . D PAGEDFG^EASEZPU2(EAADL)
"RTN","EASEZP6F",51,0)
 I EAMULT D EN^EASEZP6M(.EALNE,.EAINFO)
"RTN","EASEZP6F",52,0)
 ;
"RTN","EASEZP6F",53,0)
ENQUIT ; Clean up temp globals after printing is complete
"RTN","EASEZP6F",54,0)
 K ^TMP("EASEZ",$J)
"RTN","EASEZP6F",55,0)
 K ^TMP("EZDATA",$J)
"RTN","EASEZP6F",56,0)
 K ^TMP("EZINDEX",$J)
"RTN","EASEZP6F",57,0)
 K ^TMP("EZTEMP",$J)
"RTN","EASEZP6F",58,0)
 K ^TMP("EZDISP",$J)
"RTN","EASEZP6F",59,0)
 Q
"RTN","EASEZP6F",60,0)
 ;
"RTN","EASEZP6F",61,0)
SETUP(EALNE,EAINFO,EASAPP,EASDFN) ; Set-up print variables
"RTN","EASEZP6F",62,0)
 ; Input
"RTN","EASEZP6F",63,0)
 ;   EALNE   - Line format array
"RTN","EASEZP6F",64,0)
 ;   EAINFO  - Misc Data
"RTN","EASEZP6F",65,0)
 ;      ("CLRK") - Clerk's initials
"RTN","EASEZP6F",66,0)
 ;      ("ID")   - Web ID from #712
"RTN","EASEZP6F",67,0)
 ;      ("PGE")  - Page number
"RTN","EASEZP6F",68,0)
 ;      ("VET" ) - Veteran's name submitting the application
"RTN","EASEZP6F",69,0)
 ;      ("SSN")  - Veteran's SSN
"RTN","EASEZP6F",70,0)
 ;      ("DISC") - Financial Disclosure status
"RTN","EASEZP6F",71,0)
 ;   EASAPP  - IEN of applicant on the 1010EZ HOLDING File, #712
"RTN","EASEZP6F",72,0)
 ;   EASDFN  - DFN of applicant in the PATIENT File, #2
"RTN","EASEZP6F",73,0)
 ;
"RTN","EASEZP6F",74,0)
 N X
"RTN","EASEZP6F",75,0)
 ;
"RTN","EASEZP6F",76,0)
 ; Build Line array for printout
"RTN","EASEZP6F",77,0)
 S EALNE("ULC")=$S('($D(IOST)#2):"-",IOST["C-":"-",1:"_")
"RTN","EASEZP6F",78,0)
 S EALNE("D")="",EALNE("DD")="",EALNE("UL")=""
"RTN","EASEZP6F",79,0)
 S $P(EALNE("D"),"-",133)="",$P(EALNE("DD"),"=",133)="",$P(EALNE("UL"),EALNE("ULC"),133)=""
"RTN","EASEZP6F",80,0)
 ;
"RTN","EASEZP6F",81,0)
 ; Set up information array & get clerk's initials
"RTN","EASEZP6F",82,0)
 S ZUSR=$G(ZUSR)
"RTN","EASEZP6F",83,0)
 I +ZUSR>0 D
"RTN","EASEZP6F",84,0)
 . S EAINFO("CLRK")=$$GET1^DIQ(200,ZUSR,1)
"RTN","EASEZP6F",85,0)
 . I EAINFO("CLRK")']"" D
"RTN","EASEZP6F",86,0)
 . . S X=$$GET1^DIQ(200,ZUSR,.01)
"RTN","EASEZP6F",87,0)
 . . S EAINFO("CLRK")=$E($P(X,",",2),1)_$E($P(X,","),1)
"RTN","EASEZP6F",88,0)
 E  D
"RTN","EASEZP6F",89,0)
 . S EAINFO("CLRK")="unk"
"RTN","EASEZP6F",90,0)
 ;
"RTN","EASEZP6F",91,0)
 ; Set data elements
"RTN","EASEZP6F",92,0)
 S EAINFO("PGE")=0
"RTN","EASEZP6F",93,0)
 S EAINFO("ID")=$$GET1^DIQ(712,EASAPP_",",.1)
"RTN","EASEZP6F",94,0)
 S EAINFO("PD")=$$FMTE^XLFDT($$NOW^XLFDT)
"RTN","EASEZP6F",95,0)
 S EAINFO("DISC")=$$GET1^DIQ(712,EASAPP_",",3.8)
"RTN","EASEZP6F",96,0)
 S EAINFO("EASAPP")=EASAPP
"RTN","EASEZP6F",97,0)
 S EAINFO("VET")=$$GET1^DIQ(712,EASAPP_",",1)
"RTN","EASEZP6F",98,0)
 S EAINFO("SSN")=$$GET1^DIQ(712,EASAPP_",",2)
"RTN","EASEZP6F",99,0)
 ;
"RTN","EASEZP6F",100,0)
 ; Retrieve application data from holding file, #712
"RTN","EASEZP6F",101,0)
 D EN^EASEZC1(EASAPP)
"RTN","EASEZP6F",102,0)
 D SORT^EASEZC3(EASAPP)
"RTN","EASEZP6F",103,0)
SETQ Q
"RTN","EASEZP6F",104,0)
 ;
"RTN","EASEZP6F",105,0)
HDRMAIN(EALNE) ; PRINT THE FIRST PAGE HEADER INFORMATION
"RTN","EASEZP6F",106,0)
 W @IOF
"RTN","EASEZP6F",107,0)
 W ?106,"OMB APPROVED NO. 2900-0091"
"RTN","EASEZP6F",108,0)
 W !?103,"Estimated Burden Avg. 45 min."
"RTN","EASEZP6F",109,0)
 ; Remove expiration date (EAS*1*107)
"RTN","EASEZP6F",110,0)
 ; W !?107,"Expiration Date 6/30/2007",!,EALNE("DD")
"RTN","EASEZP6F",111,0)
 W !,"D E P A R T M E N T   O F   V E T E R A N S   A F F A I R S",?80,"APPLICATION FOR HEALTH BENEFITS",!,EALNE("DD")
"RTN","EASEZP6F",112,0)
 Q
"RTN","EASEZP6F",113,0)
 ;
"RTN","EASEZP6F",114,0)
HDR(EALNE,EAINFO) ; PRINT THE PAGE HEADER INFO FOR PAGES GREATER THAN 1
"RTN","EASEZP6F",115,0)
 W @IOF
"RTN","EASEZP6F",116,0)
 W "APPLICATION FOR HEALTH BENEFITS, Continued",?55,"| VETERAN'S NAME (Last, First, Middle)",?106,"| SOCIAL SECURITY NUMBER"
"RTN","EASEZP6F",117,0)
 W !?55,"| ",EAINFO("VET"),?106,"| ",EAINFO("SSN")
"RTN","EASEZP6F",118,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6F",119,0)
 Q
"RTN","EASEZP6F",120,0)
 ;
"RTN","EASEZP6F",121,0)
FT(EALNE,EAINFO) ; PRINT THE PAGE FOOTER INFORMATION
"RTN","EASEZP6F",122,0)
 W !,EALNE("DD")
"RTN","EASEZP6F",123,0)
 ; Change form date to 2011 (EAS*1*107)
"RTN","EASEZP6F",124,0)
 W !,"VA FORM 10-10EZ FEB 2011",?40,"PRINTED: ",EAINFO("PD")
"RTN","EASEZP6F",125,0)
 W ?80,"Clerk: ",EAINFO("CLRK"),"/",EAINFO("ID")
"RTN","EASEZP6F",126,0)
 W ?120,"PAGE " S EAINFO("PGE")=EAINFO("PGE")+1 W EAINFO("PGE")
"RTN","EASEZP6F",127,0)
 Q
"RTN","EASEZP6I")
0^15^B2999167
"RTN","EASEZP6I",1,0)
EASEZP6I ;ALB/AMA,TDM - Print 1010EZ, Version 6 or greater, Cont. - OTHER INSURANCE PAGE ; 1/31/13 1:48pm
"RTN","EASEZP6I",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**51,60,107**;Mar 15, 2001;Build 32
"RTN","EASEZP6I",3,0)
 ;
"RTN","EASEZP6I",4,0)
 ;New page, to print multiple insurance companies
"RTN","EASEZP6I",5,0)
EN(EALNE,EAINFO) ;Entry point for VA 10-10EZ, Version 6 or greater, page "I"
"RTN","EASEZP6I",6,0)
 ; Called from EN^EASEZP6F
"RTN","EASEZP6I",7,0)
 N X,EASD
"RTN","EASEZP6I",8,0)
 ;
"RTN","EASEZP6I",9,0)
 ;Expecting 4 additional insurance companies or less, and with only 5
"RTN","EASEZP6I",10,0)
 ;lines per entry, so no need to worry about going to another page
"RTN","EASEZP6I",11,0)
 S EASD=$NA(^TMP("EASEZ",$J,"I"))
"RTN","EASEZP6I",12,0)
 D HDR^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP6I",13,0)
 W !!?42,"SECTION II - INSURANCE INFORMATION - ADDITIONAL"
"RTN","EASEZP6I",14,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6I",15,0)
 ;
"RTN","EASEZP6I",16,0)
 F X=1:1 Q:'$D(@EASD@(X))  D
"RTN","EASEZP6I",17,0)
 . I X>1 W !?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6I",18,0)
 . D AI
"RTN","EASEZP6I",19,0)
 ;
"RTN","EASEZP6I",20,0)
 D FT^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP6I",21,0)
 Q
"RTN","EASEZP6I",22,0)
 ;
"RTN","EASEZP6I",23,0)
AI ; Print SECTION II - ADDITIONAL INSURANCE INFORMATION
"RTN","EASEZP6I",24,0)
 ;
"RTN","EASEZP6I",25,0)
 W !,"1."_(X+1)_" HEALTH INSURANCE COMPANY NAME "_(X+1),?50,"|2."_(X+1)_" ADDRESS",?104,"|3."_(X+1)_" TELEPHONE"
"RTN","EASEZP6I",26,0)
 W !?4,@EASD@(X,"17A")
"RTN","EASEZP6I",27,0)
 I @EASD@(X,"17E")'="" W ?50,"|    ",@EASD@(X,"17E"),", ",@EASD@(X,"17F"),", ",@EASD@(X,"17G")," ",@EASD@(X,"17H")
"RTN","EASEZP6I",28,0)
 W ?104,"|    ",@EASD@(X,"17J")
"RTN","EASEZP6I",29,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6I",30,0)
 ;
"RTN","EASEZP6I",31,0)
 W !,"4."_(X+1)_" NAME OF POLICY HOLDER",?50,"|5."_(X+1)_" POLICY NUMBER",?104,"|6."_(X+1)_" GROUP CODE"
"RTN","EASEZP6I",32,0)
 W !?4,@EASD@(X,"17B"),?50,"|    ",@EASD@(X,"17C"),?104,"|    ",@EASD@(X,"17D")
"RTN","EASEZP6I",33,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6I",34,0)
 Q
"RTN","EASEZP6U")
0^4^B29982956
"RTN","EASEZP6U",1,0)
EASEZP6U ;ALB/AMA,LBD - Print utility for 10-10EZ, Version 6 or greater; 10/23/00 ; 9/19/12 11:40am
"RTN","EASEZP6U",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**51,60,57,70,107**;Mar 15, 2001;Build 32
"RTN","EASEZP6U",3,0)
 ;
"RTN","EASEZP6U",4,0)
 Q
"RTN","EASEZP6U",5,0)
 ;Parts of this routine were copied from EASEZPU (the other parts are
"RTN","EASEZP6U",6,0)
 ;in EASEZPU2); if the version # of the 1010EZ application is 6.0 or
"RTN","EASEZP6U",7,0)
 ;greater, then this routine will be executed.
"RTN","EASEZP6U",8,0)
 ;
"RTN","EASEZP6U",9,0)
PAGE1 ;This function retrieves and formats the page 1 application data from
"RTN","EASEZP6U",10,0)
 ;the 1010EZ Holding File, #712, for the printed version of the VistA
"RTN","EASEZP6U",11,0)
 ;10-10EZ form.  If the holding file entry has not been accepted, and
"RTN","EASEZP6U",12,0)
 ;a vista entry is available, the vista entry is printed.
"RTN","EASEZP6U",13,0)
 ;   Called from EN^EASEZP6F
"RTN","EASEZP6U",14,0)
 ;
"RTN","EASEZP6U",15,0)
 ;The ^TMP("EZTEMP") global is built in SETUP^EASEZP6F and
"RTN","EASEZP6U",16,0)
 ;remains until the printed form is complete.
"RTN","EASEZP6U",17,0)
 ; Variables
"RTN","EASEZP6U",18,0)
 ;   ZDATA   - references TMP global for output data
"RTN","EASEZP6U",19,0)
 ;   EZDATA  - references available data from 1010EZ holding file
"RTN","EASEZP6U",20,0)
 ;   EASTR   - Temporary String data variable
"RTN","EASEZP6U",21,0)
 ;   EAX,EAY - Temporary data variables
"RTN","EASEZP6U",22,0)
 ;   EACT    - Temporary city variable
"RTN","EASEZP6U",23,0)
 ;
"RTN","EASEZP6U",24,0)
 N ZDATA,EZDATA,EASTR,EAX,EAY,EACT
"RTN","EASEZP6U",25,0)
 ;
"RTN","EASEZP6U",26,0)
 S ZDATA=$NA(^TMP("EASEZ",$J,1))
"RTN","EASEZP6U",27,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"I",1))
"RTN","EASEZP6U",28,0)
 K @ZDATA
"RTN","EASEZP6U",29,0)
 ;
"RTN","EASEZP6U",30,0)
 ;Type Of Benefits Applied For
"RTN","EASEZP6U",31,0)
 S EASTR="" F EAX="1A.1","1A.2","1A.3","1A.4","1A.5" D
"RTN","EASEZP6U",32,0)
 . I $$PROCESS(EAX)="UNKNOWN" S EASTR="UNKNOWN, ",EAX="1A.5" Q
"RTN","EASEZP6U",33,0)
 . I $$PROCESS(EAX)="YES" S EASTR=EASTR_$$BENEFIT(EAX)_", "
"RTN","EASEZP6U",34,0)
 S @ZDATA@("1A")=$E(EASTR,1,($L(EASTR)-2))   ;remove last comma & space
"RTN","EASEZP6U",35,0)
 ;
"RTN","EASEZP6U",36,0)
 S @ZDATA@("1B")=$$PROCESS("1B.")            ;Which facility?
"RTN","EASEZP6U",37,0)
 S @ZDATA@(2)=$$PROCESS(2.1)                 ;Vet's name
"RTN","EASEZP6U",38,0)
 S @ZDATA@(3)=$E($$PROCESS("3."),1,35)       ;Other names used
"RTN","EASEZP6U",39,0)
 S EAX=$E($$PROCESS("3A."),1,30)             ;Mother's maiden name
"RTN","EASEZP6U",40,0)
 I $E(EAX,$L(EAX))="," S EAX=$E(EAX,1,$L(EAX)-1)
"RTN","EASEZP6U",41,0)
 S @ZDATA@("3A")=EAX
"RTN","EASEZP6U",42,0)
 S @ZDATA@(4)=$$PROCESS("4.")                ;Gender
"RTN","EASEZP6U",43,0)
 ;
"RTN","EASEZP6U",44,0)
 S EAX=$$PROCESS("4A.")   ;Are You Spanish, Hispanic, or Latino?
"RTN","EASEZP6U",45,0)
 ;EAS*1.0*57 - print full word "UNKNOWN"
"RTN","EASEZP6U",46,0)
 S @ZDATA@("4A")=$S($E(EAX)="Y"!($E(EAX,1,3)="YES"):"YES",$E(EAX)="N"!($E(EAX,1,3)="NO"):"NO",$E(EAX,1,7)="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZP6U",47,0)
 ;
"RTN","EASEZP6U",48,0)
 F EAX="4B","4C","4D","4E","4F","4G" D       ;Race
"RTN","EASEZP6U",49,0)
 . I $E($$PROCESS(EAX_"."),1,3)="YES" S @ZDATA@(EAX)=" X " I 1
"RTN","EASEZP6U",50,0)
 . E  S @ZDATA@(EAX)="___"
"RTN","EASEZP6U",51,0)
 ;
"RTN","EASEZP6U",52,0)
 S @ZDATA@(5)=$$PROCESS("5.")                ;SSN
"RTN","EASEZP6U",53,0)
 S @ZDATA@(6)=$$PROCESS("6.")                ;Claim number
"RTN","EASEZP6U",54,0)
 S @ZDATA@(7)=$$PROCESS("7.")                ;Date of birth
"RTN","EASEZP6U",55,0)
 S @ZDATA@(8)=$$PROCESS("8.")                ;Religion
"RTN","EASEZP6U",56,0)
 S EAX=$$PROCESS("8A."),EAY=$$PROCESS("8B.") ;Birth place city & state
"RTN","EASEZP6U",57,0)
 I (EAX]""),(EAY]"") S @ZDATA@("8A")=EAX_", "_EAY
"RTN","EASEZP6U",58,0)
 E  S @ZDATA@("8A")=$S(EAX]"":EAX,EAY]"":EAY,1:"")
"RTN","EASEZP6U",59,0)
 S @ZDATA@("9A")=$E($$PROCESS("9A."),1,35)   ;Address
"RTN","EASEZP6U",60,0)
 S @ZDATA@("9B")=$E($$PROCESS("9B."),1,32)   ;City
"RTN","EASEZP6U",61,0)
 S @ZDATA@("9C")=$$PROCESS("9C.")            ;State
"RTN","EASEZP6U",62,0)
 S @ZDATA@("9D")=$$PROCESS("9D.")            ;Zip
"RTN","EASEZP6U",63,0)
 S @ZDATA@("9E")=$$PROCESS("9E.")            ;County
"RTN","EASEZP6U",64,0)
 S @ZDATA@("9F")=$$PROCESS("9F.")            ;Province    - EAS*1.0*70
"RTN","EASEZP6U",65,0)
 S @ZDATA@("9G")=$$PROCESS("9G.")            ;Postal Code - EAS*1.0*70
"RTN","EASEZP6U",66,0)
 S @ZDATA@("9H")=$$PROCESS("9H.")            ;Country     - EAS*1.0*70
"RTN","EASEZP6U",67,0)
 S @ZDATA@(10)=$$PROCESS("10.1")             ;Home phone
"RTN","EASEZP6U",68,0)
 S @ZDATA@(11)=$$PROCESS("11.1")             ;Work phone
"RTN","EASEZP6U",69,0)
 S @ZDATA@("11A")=$$PROCESS("11A.")          ;E-mail
"RTN","EASEZP6U",70,0)
 S @ZDATA@("11B")=$$PROCESS("11B.")          ;Want an appt?
"RTN","EASEZP6U",71,0)
 S @ZDATA@("11C")=$$PROCESS("11C.")          ;Been seen before?
"RTN","EASEZP6U",72,0)
 S @ZDATA@("11D")=$$PROCESS("11D.")          ;Location seen before
"RTN","EASEZP6U",73,0)
 ;
"RTN","EASEZP6U",74,0)
 ;EAS*1.0*60 -- add cell phone and pager
"RTN","EASEZP6U",75,0)
 S @ZDATA@("11G")=$$PROCESS("11A1.")         ;Cell phone number
"RTN","EASEZP6U",76,0)
 S @ZDATA@("11H")=$$PROCESS("11A3.")         ;Pager number
"RTN","EASEZP6U",77,0)
 ;
"RTN","EASEZP6U",78,0)
 S @ZDATA@(12)=$$PROCESS("12.")              ;Marital status
"RTN","EASEZP6U",79,0)
 S @ZDATA@("13A")=$$PROCESS("13A.")          ;Last branch of service
"RTN","EASEZP6U",80,0)
 S @ZDATA@("13B")=$$PROCESS("13B.")          ;Last entry date
"RTN","EASEZP6U",81,0)
 S @ZDATA@("13C")=$$PROCESS("13C.")          ;Last discharge date
"RTN","EASEZP6U",82,0)
 S @ZDATA@("13D")=$$PROCESS("13D.")          ;Discharge type
"RTN","EASEZP6U",83,0)
 S @ZDATA@("13E")=$$PROCESS("13E.")          ;Military service number
"RTN","EASEZP6U",84,0)
 ;
"RTN","EASEZP6U",85,0)
 F EAX="14A1","14A2","14B","14B2","14D3","14D4","14E","14F","14G","14G1","14I","14J","14K","14L" D
"RTN","EASEZP6U",86,0)
 . S EAY=$$PROCESS(EAX_".")
"RTN","EASEZP6U",87,0)
 . ;EAS*1.0*57 - no room on form here to print full word "UNKNOWN"
"RTN","EASEZP6U",88,0)
 . S @ZDATA@(EAX)=$S(EAY="Y"!(EAY="YES"):"YES",EAY="N"!(EAY="NO"):"NO",EAY="UNKNOWN":"UNK",1:"")
"RTN","EASEZP6U",89,0)
 ;
"RTN","EASEZP6U",90,0)
 S @ZDATA@("14B1")=$$PROCESS("14B1.")   ;Rated percentage
"RTN","EASEZP6U",91,0)
 S @ZDATA@("14K1")=$$PROCESS("14K1.")   ;Medicare Part A effective date
"RTN","EASEZP6U",92,0)
 S @ZDATA@("14L1")=$$PROCESS("14L1.")   ;Medicare Part B effective date
"RTN","EASEZP6U",93,0)
 S @ZDATA@("14M")=$$PROCESS("14M.")     ;Medicare claim number
"RTN","EASEZP6U",94,0)
 S @ZDATA@("14N")=$$PROCESS("14N.")     ;Name on Medicare card
"RTN","EASEZP6U",95,0)
 ;Vet's employment status^Date of retirement
"RTN","EASEZP6U",96,0)
 S @ZDATA@("15A")=$$PROCESS("15A.1")_U_$$PROCESS("15A.2")
"RTN","EASEZP6U",97,0)
 ;
"RTN","EASEZP6U",98,0)
 S EAX=$E($$PROCESS("15B.1"),1,30)            ;Company's name
"RTN","EASEZP6U",99,0)
 S EACT="",EACT=$E($$PROCESS("15B.3"),1,30)   ;Company's city
"RTN","EASEZP6U",100,0)
 I EACT]"" S EACT=EACT_", "   ;if there's a city, add comma & space
"RTN","EASEZP6U",101,0)
 ;Company's name^Street^City, State Zip^Phone
"RTN","EASEZP6U",102,0)
 S EAX=EAX_U_$E($$PROCESS("15B.2"),1,30)_U_EACT_$$PROCESS("15B.4")_" "_$E($$PROCESS("15B.5"),1,10)_U_$$PROCESS("15B.6")
"RTN","EASEZP6U",103,0)
 S @ZDATA@("15B")=EAX
"RTN","EASEZP6U",104,0)
 ;
"RTN","EASEZP6U",105,0)
 ;Spouse's employment status^Date of retirement
"RTN","EASEZP6U",106,0)
 S @ZDATA@("16A")=$$PROCESS("16A.1")_U_$$PROCESS("16A.2")
"RTN","EASEZP6U",107,0)
 ;
"RTN","EASEZP6U",108,0)
 S EAX=$E($$PROCESS("16B.1"),1,30)            ;Spouse's company's name
"RTN","EASEZP6U",109,0)
 S EACT="",EACT=$E($$PROCESS("16B.3"),1,30)   ;Spouse's company's city
"RTN","EASEZP6U",110,0)
 I EACT]"" S EACT=EACT_", "   ;if there's a city, add comma & space
"RTN","EASEZP6U",111,0)
 ;Spouse's company's name^Street^City, State Zip^Phone
"RTN","EASEZP6U",112,0)
 S EAX=EAX_U_$E($$PROCESS("16B.2"),1,30)_U_EACT_$$PROCESS("16B.4")_" "_$E($$PROCESS("16B.5"),1,10)_U_$$PROCESS("16B.6")
"RTN","EASEZP6U",113,0)
 S @ZDATA@("16B")=EAX
"RTN","EASEZP6U",114,0)
 ;
"RTN","EASEZP6U",115,0)
 Q
"RTN","EASEZP6U",116,0)
 ;
"RTN","EASEZP6U",117,0)
PROCESS(KEY) ; Process data value from ^TMP("EZTEMP" array
"RTN","EASEZP6U",118,0)
 ;format = IEN ^ EAS DATA ^ ACCEPT VALUE ^ 712 SUBIEN ^ VISTA DATA
"RTN","EASEZP6U",119,0)
 ;Take #712 value from 2nd piece, if it's accepted;
"RTN","EASEZP6U",120,0)
 ;otherwise, take the Patient File value from the 5th piece
"RTN","EASEZP6U",121,0)
 ;
"RTN","EASEZP6U",122,0)
 N EAV,RSLT
"RTN","EASEZP6U",123,0)
 ;
"RTN","EASEZP6U",124,0)
 I '$D(@EZDATA@(KEY)) G PQ
"RTN","EASEZP6U",125,0)
 S EAV=@EZDATA@(KEY)
"RTN","EASEZP6U",126,0)
 S RSLT=$S(+$P(EAV,U,3):$P(EAV,U,2),1:$P(EAV,U,5))
"RTN","EASEZP6U",127,0)
PQ Q $G(RSLT)
"RTN","EASEZP6U",128,0)
 ;
"RTN","EASEZP6U",129,0)
BENEFIT(X) ; Return External format of benefit applied for
"RTN","EASEZP6U",130,0)
 ;
"RTN","EASEZP6U",131,0)
 Q $S(X="1A.1":"HEALTH SERVICES",X="1A.2":"NURSING HOME",X="1A.3":"DOMICILIARY",X="1A.4":"DENTAL",X="1A.5":"ENROLLMENT",1:"")
"RTN","EASEZPDU")
0^10^B41360578
"RTN","EASEZPDU",1,0)
EASEZPDU ;ALB/AMA,LBD - PRINT 10-10EZ OR EZR FROM DG OPTIONS UTILITIES ; 10/29/12 12:40pm
"RTN","EASEZPDU",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57,70,107**;Mar 15, 2001;Build 32
"RTN","EASEZPDU",3,0)
 ;
"RTN","EASEZPDU",4,0)
 Q
"RTN","EASEZPDU",5,0)
 ;
"RTN","EASEZPDU",6,0)
SETUP(EALNE,EAINFO) ; Set-up print variables
"RTN","EASEZPDU",7,0)
 ; Input
"RTN","EASEZPDU",8,0)
 ;   EALNE   - Line format array
"RTN","EASEZPDU",9,0)
 ;   EAINFO  - Misc Data
"RTN","EASEZPDU",10,0)
 ;      ("CLRK") - Clerk's initials
"RTN","EASEZPDU",11,0)
 ;      ("ID")   - Web ID from #712
"RTN","EASEZPDU",12,0)
 ;      ("PGE")  - Page number
"RTN","EASEZPDU",13,0)
 ;      ("VET" ) - Veteran's name submitting the application
"RTN","EASEZPDU",14,0)
 ;      ("SSN")  - Veteran's SSN
"RTN","EASEZPDU",15,0)
 ;
"RTN","EASEZPDU",16,0)
 N X
"RTN","EASEZPDU",17,0)
 ;
"RTN","EASEZPDU",18,0)
 ; Build Line array for printout
"RTN","EASEZPDU",19,0)
 S EALNE("ULC")=$S('($D(IOST)#2):"-",IOST["C-":"-",1:"_")
"RTN","EASEZPDU",20,0)
 S EALNE("D")="",EALNE("DD")="",EALNE("UL")=""
"RTN","EASEZPDU",21,0)
 S $P(EALNE("D"),"-",133)="",$P(EALNE("DD"),"=",133)="",$P(EALNE("UL"),EALNE("ULC"),133)=""
"RTN","EASEZPDU",22,0)
 ;
"RTN","EASEZPDU",23,0)
 ; Set up information array & get clerk's initials
"RTN","EASEZPDU",24,0)
 S ZUSR=$G(ZUSR)
"RTN","EASEZPDU",25,0)
 I +ZUSR>0 D
"RTN","EASEZPDU",26,0)
 . S EAINFO("CLRK")=$$GET1^DIQ(200,ZUSR,1)
"RTN","EASEZPDU",27,0)
 . I EAINFO("CLRK")']"" D
"RTN","EASEZPDU",28,0)
 . . S X=$$GET1^DIQ(200,ZUSR,.01)
"RTN","EASEZPDU",29,0)
 . . S EAINFO("CLRK")=$E($P(X,",",2),1)_$E($P(X,","),1)
"RTN","EASEZPDU",30,0)
 E  D
"RTN","EASEZPDU",31,0)
 . S EAINFO("CLRK")="unk"
"RTN","EASEZPDU",32,0)
 ;
"RTN","EASEZPDU",33,0)
 ; Set data elements
"RTN","EASEZPDU",34,0)
 S EAINFO("PGE")=0
"RTN","EASEZPDU",35,0)
 S EAINFO("ID")=""
"RTN","EASEZPDU",36,0)
 S EAINFO("PD")=$$FMTE^XLFDT($$NOW^XLFDT)
"RTN","EASEZPDU",37,0)
 S EAINFO("EASAPP")=0
"RTN","EASEZPDU",38,0)
 S EAINFO("VET")=""
"RTN","EASEZPDU",39,0)
 S EAINFO("SSN")=""
"RTN","EASEZPDU",40,0)
 Q
"RTN","EASEZPDU",41,0)
 ;
"RTN","EASEZPDU",42,0)
NETEZ(EALNE,EAINFO,EASDG) ;  Print SECTION X - PREVIOUS CALENDAR YEAR NET WORTH
"RTN","EASEZPDU",43,0)
 ;Copied from EASEZP64
"RTN","EASEZPDU",44,0)
 ; Input
"RTN","EASEZPDU",45,0)
 ;   EALNE   - Line format array
"RTN","EASEZPDU",46,0)
 ;   EAINFO  - Misc Data
"RTN","EASEZPDU",47,0)
 ;      ("CLRK") - Clerk's initials
"RTN","EASEZPDU",48,0)
 ;      ("ID")   - Web ID from #712
"RTN","EASEZPDU",49,0)
 ;      ("PGE")  - Page number
"RTN","EASEZPDU",50,0)
 ;      ("VET" ) - Veteran's name submitting the application
"RTN","EASEZPDU",51,0)
 ;      ("SSN")  - Veteran's SSN
"RTN","EASEZPDU",52,0)
 ;      ("DISC") - Financial Disclosure status
"RTN","EASEZPDU",53,0)
 ;    EASDG  - Flag variable to signify request to print from DG options
"RTN","EASEZPDU",54,0)
 ;
"RTN","EASEZPDU",55,0)
 N EASIGN,EASD
"RTN","EASEZPDU",56,0)
 ;
"RTN","EASEZPDU",57,0)
 I $$GET1^DIQ(712,EAINFO("EASAPP")_",",4)]"" D
"RTN","EASEZPDU",58,0)
 . S EASIGN=$$GET1^DIQ(712,EAINFO("EASAPP")_",",4.1)
"RTN","EASEZPDU",59,0)
 S EASIGN=$G(EASIGN)
"RTN","EASEZPDU",60,0)
 ;
"RTN","EASEZPDU",61,0)
 S EASD=$NA(^TMP("EASEZ",$J,2))
"RTN","EASEZPDU",62,0)
 ;
"RTN","EASEZPDU",63,0)
 I $G(EASDG),+@EASD@(999) W !!?7,"SECTION IX - PREVIOUS CALENDAR YEAR NET WORTH  (INCOME YEAR:  ",@EASD@(999),")  (Use a separate sheet for additional dependents)"
"RTN","EASEZPDU",64,0)
 E  W !!?18,"SECTION IX - PREVIOUS CALENDAR YEAR NET WORTH  (Use a separate sheet for additional dependents)"
"RTN","EASEZPDU",65,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",66,0)
 ;
"RTN","EASEZPDU",67,0)
 W !?78,"|",?84,"VETERAN",?96,"|",?102,"SPOUSE",?114,"|",?120,"CHILD 1"
"RTN","EASEZPDU",68,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",69,0)
 ;
"RTN","EASEZPDU",70,0)
 W !,"1. CASH, AMOUNT IN BANK ACCOUNTS (e.g., checking and savings accounts,",?78,"|  $ ",$P(@EASD@("2E1"),U),?96,"|  $ ",$P(@EASD@("2E1"),U,2),?114,"|"
"RTN","EASEZPDU",71,0)
 I $P(@EASD@("2E1"),U) W "  Included in"
"RTN","EASEZPDU",72,0)
 W !,"certificates of deposit, individual retirement accounts, stocks and bonds)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",73,0)
 I $P(@EASD@("2E1"),U) W "  Veteran amount"
"RTN","EASEZPDU",74,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",75,0)
 ;
"RTN","EASEZPDU",76,0)
 W !,"2. MARKET VALUE OF LAND AND BUILDINGS MINUS MORTGAGES AND LIENS (e.g., second",?78,"|  $ ",$P(@EASD@("2E2"),U),?96,"|  $ ",$P(@EASD@("2E2"),U,2),?114,"|"
"RTN","EASEZPDU",77,0)
 I $P(@EASD@("2E2"),U) W "  Included in"
"RTN","EASEZPDU",78,0)
 W !,"homes and non-income-producing property.  Do not count your primary home.)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",79,0)
 I $P(@EASD@("2E2"),U) W "  Veteran amount"
"RTN","EASEZPDU",80,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",81,0)
 ;
"RTN","EASEZPDU",82,0)
 W !,"3. VALUE OF OTHER PROPERTY OR ASSETS (e.g., art, rare coins, collectibles)",?78,"|  $ ",$P(@EASD@("2E3"),U),?96,"|  $ ",$P(@EASD@("2E3"),U,2),?114,"|"
"RTN","EASEZPDU",83,0)
 I $P(@EASD@("2E3"),U) W "  Included in"
"RTN","EASEZPDU",84,0)
 W !,"MINUS THE AMOUNT YOU OWE ON THESE ITEMS.  INCLUDE VALUE OF FARM, RANCH, OR",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",85,0)
 I $P(@EASD@("2E3"),U) W "  Veteran amount"
"RTN","EASEZPDU",86,0)
 W !,"BUSINESS ASSETS.  Exclude household effects and family vehicles.",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",87,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",88,0)
 ;
"RTN","EASEZPDU",89,0)
 D PAP^EASEZP64       ;EAS*1.0*107
"RTN","EASEZPDU",90,0)
 D CON^EASEZP64
"RTN","EASEZPDU",91,0)
 D AOB^EASEZP64
"RTN","EASEZPDU",92,0)
 D FT^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZPDU",93,0)
 ;
"RTN","EASEZPDU",94,0)
 Q
"RTN","EASEZPDU",95,0)
 ;
"RTN","EASEZPDU",96,0)
NETEZR(EALNE,EAINFO,EASDG) ;  Print SECTION IX - PREVIOUS CALENDAR YEAR NET WORTH
"RTN","EASEZPDU",97,0)
 ;Copied from EASEZRP3
"RTN","EASEZPDU",98,0)
 ; Input
"RTN","EASEZPDU",99,0)
 ;   EALNE   - Line format array
"RTN","EASEZPDU",100,0)
 ;   EAINFO  - Misc Data
"RTN","EASEZPDU",101,0)
 ;      ("CLRK") - Clerk's initials
"RTN","EASEZPDU",102,0)
 ;      ("ID")   - Web ID from #712
"RTN","EASEZPDU",103,0)
 ;      ("PGE")  - Page number
"RTN","EASEZPDU",104,0)
 ;      ("VET" ) - Veteran's name submitting the application
"RTN","EASEZPDU",105,0)
 ;      ("SSN")  - Veteran's SSN
"RTN","EASEZPDU",106,0)
 ;      ("DISC") - Financial Disclosure status
"RTN","EASEZPDU",107,0)
 ;    EASDG  - Flag variable to signify request to print from DG options
"RTN","EASEZPDU",108,0)
 ;
"RTN","EASEZPDU",109,0)
 N EASIGN,EASD
"RTN","EASEZPDU",110,0)
 ;
"RTN","EASEZPDU",111,0)
 I $$GET1^DIQ(712,EAINFO("EASAPP")_",",4)]"" D
"RTN","EASEZPDU",112,0)
 . S EASIGN=$$GET1^DIQ(712,EAINFO("EASAPP")_",",4.1)
"RTN","EASEZPDU",113,0)
 S EASIGN=$G(EASIGN)
"RTN","EASEZPDU",114,0)
 ;
"RTN","EASEZPDU",115,0)
 D HDR^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZPDU",116,0)
 S EASD=$NA(^TMP("EASEZR",$J,2))
"RTN","EASEZPDU",117,0)
 ;
"RTN","EASEZPDU",118,0)
 I $G(EASDG),+@EASD@(999) W !?7,"SECTION VIII - PREVIOUS CALENDAR YEAR NET WORTH  (INCOME YEAR:  ",@EASD@(999),")  (Use a separate sheet for additional dependents)"
"RTN","EASEZPDU",119,0)
 E  W !?18,"SECTION VIII - PREVIOUS CALENDAR YEAR NET WORTH  (Use a separate sheet for additional dependents)"
"RTN","EASEZPDU",120,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",121,0)
 ;
"RTN","EASEZPDU",122,0)
 W !?78,"|",?84,"VETERAN",?96,"|",?102,"SPOUSE",?114,"|",?120,"CHILD 1"
"RTN","EASEZPDU",123,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",124,0)
 ;
"RTN","EASEZPDU",125,0)
 W !,"1. CASH, AMOUNT IN BANK ACCOUNTS (e.g., checking and savings accounts,",?78,"|  $ ",$P(@EASD@("2E1"),U),?96,"|  $ ",$P(@EASD@("2E1"),U,2),?114,"|"
"RTN","EASEZPDU",126,0)
 I $P(@EASD@("2E1"),U) W "  Included in"
"RTN","EASEZPDU",127,0)
 W !,"certificates of deposit, individual retirement accounts, stocks and bonds)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",128,0)
 I $P(@EASD@("2E1"),U) W "  Veteran amount"
"RTN","EASEZPDU",129,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",130,0)
 ;
"RTN","EASEZPDU",131,0)
 W !,"2. MARKET VALUE OF LAND AND BUILDINGS MINUS MORTGAGES AND LIENS (e.g., second",?78,"|  $ ",$P(@EASD@("2E2"),U),?96,"|  $ ",$P(@EASD@("2E2"),U,2),?114,"|"
"RTN","EASEZPDU",132,0)
 I $P(@EASD@("2E2"),U) W "  Included in"
"RTN","EASEZPDU",133,0)
 W !,"homes and non-income-producing property.  Do not include your primary home.)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",134,0)
 I $P(@EASD@("2E2"),U) W "  Veteran amount"
"RTN","EASEZPDU",135,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",136,0)
 ;
"RTN","EASEZPDU",137,0)
 W !,"3. VALUE OF OTHER PROPERTY OR ASSETS (e.g., art, rare coins, collectibles)",?78,"|  $ ",$P(@EASD@("2E3"),U),?96,"|  $ ",$P(@EASD@("2E3"),U,2),?114,"|"
"RTN","EASEZPDU",138,0)
 I $P(@EASD@("2E3"),U) W "  Included in"
"RTN","EASEZPDU",139,0)
 W !,"MINUS THE AMOUNT YOU OWE ON THESE ITEMS.  INCLUDE VALUE OF FARM, RANCH, OR",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",140,0)
 I $P(@EASD@("2E3"),U) W "  Veteran amount"
"RTN","EASEZPDU",141,0)
 W !,"BUSINESS ASSETS.  Exclude household effects and family vehicles.",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",142,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",143,0)
 ;
"RTN","EASEZPDU",144,0)
 D PAP^EASEZRP2
"RTN","EASEZPDU",145,0)
 D CON^EASEZRP3
"RTN","EASEZPDU",146,0)
 D AOB^EASEZRP3
"RTN","EASEZPDU",147,0)
 D FT^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZPDU",148,0)
 Q
"RTN","EASEZPU3")
0^7^B25454503
"RTN","EASEZPU3",1,0)
EASEZPU3 ;ALB/AMA,LBD - Print utility for 10-10EZ, Version 6 or greater; 10/23/00 ; 1/31/13 2:52pm
"RTN","EASEZPU3",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57,107**;Mar 15, 2001;Build 32
"RTN","EASEZPU3",3,0)
 ;
"RTN","EASEZPU3",4,0)
 Q
"RTN","EASEZPU3",5,0)
 ;Split from EASEZP6U
"RTN","EASEZPU3",6,0)
 ;
"RTN","EASEZPU3",7,0)
PAGE1 ;This function retrieves and formats the page 1 application data from
"RTN","EASEZPU3",8,0)
 ;the 1010EZ Holding File, #712, for the printed version of the VistA
"RTN","EASEZPU3",9,0)
 ;10-10EZ form.  If the holding file entry has not been accepted, and
"RTN","EASEZPU3",10,0)
 ;a vista entry is available, the vista entry is printed.
"RTN","EASEZPU3",11,0)
 ;   Called from EN^EASEZP6F
"RTN","EASEZPU3",12,0)
 ;
"RTN","EASEZPU3",13,0)
 ;The ^TMP("EZTEMP") global is built in SETUP^EASEZP6F and
"RTN","EASEZPU3",14,0)
 ;remains until the printed form is complete.
"RTN","EASEZPU3",15,0)
 ; Variables
"RTN","EASEZPU3",16,0)
 ;   ZDATA   - references TMP global for output data
"RTN","EASEZPU3",17,0)
 ;   EZDATA  - references available data from 1010EZ holding file
"RTN","EASEZPU3",18,0)
 ;   EAX     - Temporary data variables
"RTN","EASEZPU3",19,0)
 ;   EACT    - Temporary city variable
"RTN","EASEZPU3",20,0)
 ;
"RTN","EASEZPU3",21,0)
 N ZDATA,EZDATA,EAX,EACT
"RTN","EASEZPU3",22,0)
 ;
"RTN","EASEZPU3",23,0)
 S ZDATA=$NA(^TMP("EASEZ",$J,1))
"RTN","EASEZPU3",24,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"I",1))
"RTN","EASEZPU3",25,0)
 ;
"RTN","EASEZPU3",26,0)
 S EAX=$$PROCESS("17.")   ;Covered by health insurance?
"RTN","EASEZPU3",27,0)
 ;EAS*1.0*57 - print full word "UNKNOWN"
"RTN","EASEZPU3",28,0)
 S @ZDATA@(17)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZPU3",29,0)
 ;
"RTN","EASEZPU3",30,0)
 S @ZDATA@("17A")=$$PROCESS("17A.")           ;Insurance company's name
"RTN","EASEZPU3",31,0)
 S @ZDATA@("17B")=$E($$PROCESS("17B."),1,30)  ;Name of policy holder
"RTN","EASEZPU3",32,0)
 S @ZDATA@("17C")=$$PROCESS("17C.")           ;Policy number
"RTN","EASEZPU3",33,0)
 S @ZDATA@("17D")=$$PROCESS("17D.")           ;Group code
"RTN","EASEZPU3",34,0)
 ;
"RTN","EASEZPU3",35,0)
 S @ZDATA@("17E")=$$PROCESS("17E.")           ;Insurance company's street
"RTN","EASEZPU3",36,0)
 S @ZDATA@("17F")=$$PROCESS("17F.")           ;Insurance company's city
"RTN","EASEZPU3",37,0)
 S @ZDATA@("17G")=$$PROCESS("17G.")           ;Insurance company's state
"RTN","EASEZPU3",38,0)
 S @ZDATA@("17H")=$$PROCESS("17H.")           ;Insurance company's zip
"RTN","EASEZPU3",39,0)
 S @ZDATA@("17J")=$$PROCESS("17J.")           ;Insurance company's phone (Changed KEY to 17J - EAS*1*107)
"RTN","EASEZPU3",40,0)
 ;
"RTN","EASEZPU3",41,0)
 S EACT="",EACT=$E($$PROCESS("19A.4"),1,30)   ;Next-of-kin's city
"RTN","EASEZPU3",42,0)
 I EACT]"" S EACT=EACT_", "   ;if there's a city, add comma & space
"RTN","EASEZPU3",43,0)
 ;Next-of-kin's name^street^city, state zip^relationship
"RTN","EASEZPU3",44,0)
 S @ZDATA@("19A")=$$PROCESS("19A.1")_U_$E($$PROCESS("19A.3"),1,30)_U_EACT_$$PROCESS("19A.5")_" "_$E($$PROCESS("19A.6"),1,10)_U_$$PROCESS("19A.7")
"RTN","EASEZPU3",45,0)
 S @ZDATA@("19B")=$$PROCESS("19B.1")          ;Next-of-kin's home phone
"RTN","EASEZPU3",46,0)
 S @ZDATA@("19C")=$$PROCESS("19C.1")          ;Next-of-kin's work phone
"RTN","EASEZPU3",47,0)
 ;
"RTN","EASEZPU3",48,0)
 S EACT="",EACT=$E($$PROCESS("20A.4"),1,30)   ;Emergency contact's city
"RTN","EASEZPU3",49,0)
 I EACT]"" S EACT=EACT_", "   ;if there's a city, add comma & space
"RTN","EASEZPU3",50,0)
 ;Emergency contact's name^street^city, state zip^relationship
"RTN","EASEZPU3",51,0)
 S @ZDATA@("20A")=$$PROCESS("20A.1")_U_$E($$PROCESS("20A.3"),1,30)_U_EACT_$$PROCESS("20A.5")_" "_$E($$PROCESS("20A.6"),1,10)_U_$$PROCESS("20A.7")
"RTN","EASEZPU3",52,0)
 S @ZDATA@("20B")=$$PROCESS("20B.1")          ;EC's home phone
"RTN","EASEZPU3",53,0)
 S @ZDATA@("20C")=$$PROCESS("20C.1")          ;EC's work phone
"RTN","EASEZPU3",54,0)
 ;
"RTN","EASEZPU3",55,0)
 S @ZDATA@("21")=$$PROCESS("21.")             ;Who receives property?
"RTN","EASEZPU3",56,0)
 S EAX=$$PROCESS("22A.")                      ;On-the-job injury?
"RTN","EASEZPU3",57,0)
 ;EAS*1.0*57 - print full word "UNKNOWN"
"RTN","EASEZPU3",58,0)
 S @ZDATA@("22A")=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",(EAX="UNKNOWN"):"UNKNOWN",1:"")
"RTN","EASEZPU3",59,0)
 ;
"RTN","EASEZPU3",60,0)
 S EAX=$$PROCESS("22B.")                      ;Accident?
"RTN","EASEZPU3",61,0)
 ;EAS*1.0*57 - print full word "UNKNOWN"
"RTN","EASEZPU3",62,0)
 S @ZDATA@("22B")=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",(EAX="UNKNOWN"):"UNKNOWN",1:"")
"RTN","EASEZPU3",63,0)
 Q
"RTN","EASEZPU3",64,0)
 ;
"RTN","EASEZPU3",65,0)
PAGEI(EAINS) ;  Additional Insurance pages
"RTN","EASEZPU3",66,0)
 ; Called from EN^EASEZP6F
"RTN","EASEZPU3",67,0)
 N ZDATA,EZDATA,EACT
"RTN","EASEZPU3",68,0)
 ;
"RTN","EASEZPU3",69,0)
 S ZDATA=$NA(^TMP("EASEZ",$J,"I",EAINS))
"RTN","EASEZPU3",70,0)
 K @ZDATA
"RTN","EASEZPU3",71,0)
 ;
"RTN","EASEZPU3",72,0)
 ; Process Section IA
"RTN","EASEZPU3",73,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"IA",EAINS))
"RTN","EASEZPU3",74,0)
 ;
"RTN","EASEZPU3",75,0)
 S @ZDATA@("17A")=$$PROCESS("17A.")           ;Insurance company's name
"RTN","EASEZPU3",76,0)
 S @ZDATA@("17B")=$E($$PROCESS("17B."),1,30)  ;Name of policy holder
"RTN","EASEZPU3",77,0)
 S @ZDATA@("17C")=$$PROCESS("17C.")           ;Policy number
"RTN","EASEZPU3",78,0)
 S @ZDATA@("17D")=$$PROCESS("17D.")           ;Group code
"RTN","EASEZPU3",79,0)
 S @ZDATA@("17E")=$$PROCESS("17E.")           ;Insurance company's street
"RTN","EASEZPU3",80,0)
 S @ZDATA@("17F")=$$PROCESS("17F.")           ;Insurance company's city
"RTN","EASEZPU3",81,0)
 S @ZDATA@("17G")=$$PROCESS("17G.")           ;Insurance company's state
"RTN","EASEZPU3",82,0)
 S @ZDATA@("17H")=$$PROCESS("17H.")           ;Insurance company's zip
"RTN","EASEZPU3",83,0)
 S @ZDATA@("17J")=$$PROCESS("17J.")           ;Insurance company's phone
"RTN","EASEZPU3",84,0)
 Q
"RTN","EASEZPU3",85,0)
 ;
"RTN","EASEZPU3",86,0)
PAGEN(EADEP) ;  Additional dependent page(s)
"RTN","EASEZPU3",87,0)
 ; Called from EN^EASEZP6F
"RTN","EASEZPU3",88,0)
 N ZDATA,EZDATA,EAX
"RTN","EASEZPU3",89,0)
 ;
"RTN","EASEZPU3",90,0)
 S ZDATA=$NA(^TMP("EASEZ",$J,"D",EADEP))
"RTN","EASEZPU3",91,0)
 K @ZDATA
"RTN","EASEZPU3",92,0)
 ;
"RTN","EASEZPU3",93,0)
 ; Process Section IIB
"RTN","EASEZPU3",94,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"IIB",EADEP))
"RTN","EASEZPU3",95,0)
 ;
"RTN","EASEZPU3",96,0)
 S @ZDATA@(2)=$$PROCESS(1.1)                      ;Child's name
"RTN","EASEZPU3",97,0)
 S @ZDATA@(5)=$$PROCESS("3.")                     ;Date of birth
"RTN","EASEZPU3",98,0)
 S @ZDATA@(7)=$$PROCESS("2.")                     ;SSN
"RTN","EASEZPU3",99,0)
 S @ZDATA@(9)=$$PROCESS("4.")                     ;Relationship
"RTN","EASEZPU3",100,0)
 S @ZDATA@(11)=$$PROCESS("5.")                    ;Date of dependency
"RTN","EASEZPU3",101,0)
 ;Amount contributed
"RTN","EASEZPU3",102,0)
 S EAX=$$PROCESS("6."),@ZDATA@(12)=U_$S(EAX="":"",1:$J(EAX,0,2))
"RTN","EASEZPU3",103,0)
 ;Education expenses
"RTN","EASEZPU3",104,0)
 S EAX=$$PROCESS("7."),@ZDATA@(13)=$S(EAX="":"",1:$J(EAX,0,2))
"RTN","EASEZPU3",105,0)
 ;
"RTN","EASEZPU3",106,0)
 S EAX=$$PROCESS("8.")                            ;Permanently disabled?
"RTN","EASEZPU3",107,0)
 ;EAS*1.0*57 - print full word "UNKNOWN"
"RTN","EASEZPU3",108,0)
 S @ZDATA@(14)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZPU3",109,0)
 S EAX=$$PROCESS("9.")                            ;School last year?
"RTN","EASEZPU3",110,0)
 ;EAS*1.0*57 - print full word "UNKNOWN"
"RTN","EASEZPU3",111,0)
 S @ZDATA@(15)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZPU3",112,0)
 ;
"RTN","EASEZPU3",113,0)
 Q
"RTN","EASEZPU3",114,0)
 ;
"RTN","EASEZPU3",115,0)
PROCESS(KEY) ; Process data value from ^TMP("EZTEMP" array
"RTN","EASEZPU3",116,0)
 ;format = IEN ^ EAS DATA ^ ACCEPT VALUE ^ 712 SUBIEN ^ VISTA DATA
"RTN","EASEZPU3",117,0)
 ;Take #712 value from 2nd piece, if it's accepted;
"RTN","EASEZPU3",118,0)
 ;otherwise, take the Patient File value from the 5th piece
"RTN","EASEZPU3",119,0)
 ;
"RTN","EASEZPU3",120,0)
 N EAV,RSLT
"RTN","EASEZPU3",121,0)
 ;
"RTN","EASEZPU3",122,0)
 I '$D(@EZDATA@(KEY)) G PQ
"RTN","EASEZPU3",123,0)
 S EAV=@EZDATA@(KEY)
"RTN","EASEZPU3",124,0)
 S RSLT=$S(+$P(EAV,U,3):$P(EAV,U,2),1:$P(EAV,U,5))
"RTN","EASEZPU3",125,0)
PQ Q $G(RSLT)
"RTN","EASEZPVI")
0^5^B21671020
"RTN","EASEZPVI",1,0)
EASEZPVI ;ALB/AMA,ERC,SCK,LBD; GATHER VISTA INSURANCE DATA TO PRINT FROM DG OPTIONS ; 10/29/12 1:07pm
"RTN","EASEZPVI",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57,70,103,107**;Mar 15, 2001;Build 32
"RTN","EASEZPVI",3,0)
 ;
"RTN","EASEZPVI",4,0)
 Q
"RTN","EASEZPVI",5,0)
 ;
"RTN","EASEZPVI",6,0)
INSUR(EASDFN) ;GET INSURANCE DATA
"RTN","EASEZPVI",7,0)
 ;   INPUT:
"RTN","EASEZPVI",8,0)
 ;      EASDFN - POINTER TO THE PATIENT FILE
"RTN","EASEZPVI",9,0)
 ;
"RTN","EASEZPVI",10,0)
 ;IF THEY EXIST, FIND INSURANCE COMPANY NAME(S), ADDRESS,
"RTN","EASEZPVI",11,0)
 ;CITY, STATE, ZIP, PHONE, GROUP CODE(S), POLICY NUMBER(S),
"RTN","EASEZPVI",12,0)
 ;NAME(S) OF INSURED, MEDICARE PART A/B, AND EFFECTIVE DATE(S)
"RTN","EASEZPVI",13,0)
 ;
"RTN","EASEZPVI",14,0)
 ; 103 - MODIFY THE GETS^DIQ TO RETRIEVE ONLY NEEDED DATA ELEMENTS TO REDUCE THE THE LARGE NUMBER
"RTN","EASEZPVI",15,0)
 ; OF ELIGIBILITY/BENEFIT SUB-MULTIPLES THAT ARE BEING RETURNED.
"RTN","EASEZPVI",16,0)
 ; 
"RTN","EASEZPVI",17,0)
 N KEY,VDATA,MULTIPLE,INDA,IENS,INSUR,INSORT,FLD,TYPE,IEN,INPTR,NAME
"RTN","EASEZPVI",18,0)
 N STREET,CITY,STPTR,STATE,ZIP,PHONE,GRPCD,POLNO,INNAME,KEYNM,M,CAT,GRPTR
"RTN","EASEZPVI",19,0)
 S KEY=+$$KEY711^EASEZU1("APPLICANT HAS INSURANCE")
"RTN","EASEZPVI",20,0)
 S VDATA=$$GET^EASEZC1(EASDFN,"2^2^.3192")
"RTN","EASEZPVI",21,0)
 I (VDATA=-1)!(VDATA="") S ^TMP("EZDATA",$J,KEY,1,2)="UNKNOWN"
"RTN","EASEZPVI",22,0)
 I (VDATA'=-1),(VDATA'="") S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVI",23,0)
 Q:VDATA'="YES"
"RTN","EASEZPVI",24,0)
 ;
"RTN","EASEZPVI",25,0)
 S MULTIPLE=0
"RTN","EASEZPVI",26,0)
 S INDA=0 F  S INDA=$O(^DPT(EASDFN,.312,INDA)) Q:'INDA  D
"RTN","EASEZPVI",27,0)
 . D GETS^DIQ(2.312,INDA_","_EASDFN,".01;1.09;1;3;17;.18;21;8","IE","INSUR")
"RTN","EASEZPVI",28,0)
 S IENS="" F  S IENS=$O(INSUR(2.312,IENS)) Q:IENS=""  D
"RTN","EASEZPVI",29,0)
 . S FLD=0 F  S FLD=$O(INSUR(2.312,IENS,FLD)) Q:'FLD  D
"RTN","EASEZPVI",30,0)
 . . F TYPE="E","I" S INSORT(2.312,+IENS,FLD,TYPE)=$G(INSUR(2.312,IENS,FLD,TYPE))
"RTN","EASEZPVI",31,0)
 K INSUR
"RTN","EASEZPVI",32,0)
 S IEN=0 F  S IEN=$O(INSORT(2.312,IEN)) Q:'IEN  D
"RTN","EASEZPVI",33,0)
 . Q:'$G(INSORT(2.312,IEN,.18,"I"))
"RTN","EASEZPVI",34,0)
 . S GRPTR=INSORT(2.312,IEN,.18,"I")  ;PTR TO GROUP PLAN FILE (#355.3)
"RTN","EASEZPVI",35,0)
 . Q:$$GET1^DIQ(355.3,GRPTR,.11,"I")   ;INACTIVE FLAG
"RTN","EASEZPVI",36,0)
 . I DT'>$G(INSORT(2.312,IEN,3,"I")) Q   ;INSUR EXPIRATION DATE
"RTN","EASEZPVI",37,0)
 . ;Set INPTR to pointer to INSURANCE COMPANY file (#36) - EAS*1*107
"RTN","EASEZPVI",38,0)
 . S INPTR=$G(INSORT(2.312,IEN,.01,"I")) Q:'INPTR
"RTN","EASEZPVI",39,0)
 . S NAME=$G(INSORT(2.312,IEN,.18,"E"))
"RTN","EASEZPVI",40,0)
 . S STREET=$$GET1^DIQ(36,INPTR,.111),CITY=$$GET1^DIQ(36,INPTR,.114)
"RTN","EASEZPVI",41,0)
 . S STPTR=$$GET1^DIQ(36,INPTR,.115,"I"),STATE=$$GET1^DIQ(5,STPTR,1)
"RTN","EASEZPVI",42,0)
 . S ZIP=$$GET1^DIQ(36,INPTR,.116),PHONE=$$GET1^DIQ(36,INPTR,.131)
"RTN","EASEZPVI",43,0)
 . S GRPCD=$$GET1^DIQ(355.3,GRPTR,.04),POLNO=$G(INSORT(2.312,IEN,1,"E"))
"RTN","EASEZPVI",44,0)
 . S INNAME=$G(INSORT(2.312,IEN,17,"E"))
"RTN","EASEZPVI",45,0)
 . S MULTIPLE=MULTIPLE+1
"RTN","EASEZPVI",46,0)
 . I MULTIPLE=1 S KEYNM="APPLICANT",M=1
"RTN","EASEZPVI",47,0)
 . E  S KEYNM="OTHER(N)",M=MULTIPLE-1
"RTN","EASEZPVI",48,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE COMPANY")
"RTN","EASEZPVI",49,0)
 . I NAME]"" S ^TMP("EZDATA",$J,KEY,M,2)=NAME
"RTN","EASEZPVI",50,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE ADDRESS")
"RTN","EASEZPVI",51,0)
 . I STREET]"" S ^TMP("EZDATA",$J,KEY,M,2)=STREET
"RTN","EASEZPVI",52,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE CITY")
"RTN","EASEZPVI",53,0)
 . I CITY]"" S ^TMP("EZDATA",$J,KEY,M,2)=CITY
"RTN","EASEZPVI",54,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE STATE")
"RTN","EASEZPVI",55,0)
 . I STATE]"" S ^TMP("EZDATA",$J,KEY,M,2)=STATE
"RTN","EASEZPVI",56,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE ZIP")
"RTN","EASEZPVI",57,0)
 . I ZIP]"" S ^TMP("EZDATA",$J,KEY,M,2)=ZIP
"RTN","EASEZPVI",58,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE PHONE NUMBER")
"RTN","EASEZPVI",59,0)
 . I PHONE]"" S ^TMP("EZDATA",$J,KEY,M,2)=PHONE
"RTN","EASEZPVI",60,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE GROUP CODE")
"RTN","EASEZPVI",61,0)
 . I GRPCD]"" S ^TMP("EZDATA",$J,KEY,M,2)=GRPCD
"RTN","EASEZPVI",62,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE POLICY HOLDER")
"RTN","EASEZPVI",63,0)
 . I INNAME]"" S ^TMP("EZDATA",$J,KEY,M,2)=INNAME
"RTN","EASEZPVI",64,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE POLICY NUMBER")
"RTN","EASEZPVI",65,0)
 . I POLNO]"" S ^TMP("EZDATA",$J,KEY,M,2)=POLNO
"RTN","EASEZPVI",66,0)
 . ;
"RTN","EASEZPVI",67,0)
 . I $$GET^EASEZC1(GRPTR,"355.3^355.3^.09")="MEDICARE (M)" D
"RTN","EASEZPVI",68,0)
 . . S CAT=$$GET^EASEZC1(GRPTR,"355.3^355.3^.14")
"RTN","EASEZPVI",69,0)
 . . I (CAT'="MEDICARE PART A"),(CAT'="MEDICARE PART B") Q
"RTN","EASEZPVI",70,0)
 . . S KEY=+$$KEY711^EASEZU1(CAT)
"RTN","EASEZPVI",71,0)
 . . S ^TMP("EZDATA",$J,KEY,M,2)="YES"
"RTN","EASEZPVI",72,0)
 . . S VDATA=$$GET^EASEZC1(EASDFN_";"_INDA,"2^2.312^8")
"RTN","EASEZPVI",73,0)
 . . Q:VDATA=""  Q:VDATA=-1
"RTN","EASEZPVI",74,0)
 . . S KEY=+$$KEY711^EASEZU1(CAT_" EFFECTIVE DATE")
"RTN","EASEZPVI",75,0)
 . . S ^TMP("EZDATA",$J,KEY,M,2)=VDATA
"RTN","EASEZPVI",76,0)
 ;
"RTN","EASEZPVI",77,0)
 Q
"RTN","EASEZPVI",78,0)
 ;
"RTN","EASEZPVI",79,0)
I408(EASDFN,MTDT,EASARRAY) ;retrieve ien(s) to files #408.12,#408.13,#408.21,#408.22
"RTN","EASEZPVI",80,0)
 ;   Modified from I408^EASEZI, called from V408^EASEZPV2
"RTN","EASEZPVI",81,0)
 ;input EASDFN    = ien to #2
"RTN","EASEZPVI",82,0)
 ;        MTDT    = Means Test date
"RTN","EASEZPVI",83,0)
 ;output EASARRAY = ien(s) to files; passed by reference
"RTN","EASEZPVI",84,0)
 ;   array(408,"V",1) = ien_#408.12^ien_#408.13^ien_#408.21^ien#408.22 ;veteran data
"RTN","EASEZPVI",85,0)
 ;   array(408,"S",1) = ien_#408.12^ien_#408.13^ien_#408.21^ien#408.22 ;spouse data
"RTN","EASEZPVI",86,0)
 ;   array(408,"C",multiple) = ien_#408.12^ien_#408.13^ien_#408.21^ien#408.22 ;child data
"RTN","EASEZPVI",87,0)
 ;where ien_#408.13 = ien;global_root
"RTN","EASEZPVI",88,0)
 ;
"RTN","EASEZPVI",89,0)
 N Y,%F,X,%DT,MTDATE
"RTN","EASEZPVI",90,0)
 N SUB1,SUB2,INCYR,DGINC,DGREL,DGINR
"RTN","EASEZPVI",91,0)
 N I21,I22
"RTN","EASEZPVI",92,0)
 ;
"RTN","EASEZPVI",93,0)
 Q:'EASDFN
"RTN","EASEZPVI",94,0)
 S Y=MTDT,%F=5,X=$$FMTE^XLFDT(Y,%F),X=+$P(X,"/",3)-1,%DT="P"
"RTN","EASEZPVI",95,0)
 D ^%DT S MTDATE=Y
"RTN","EASEZPVI",96,0)
 ;retrieve all associated 408 records; refer to api call for docu
"RTN","EASEZPVI",97,0)
 I MTDT D ALL^DGMTU21(EASDFN,"VSC",MTDT)
"RTN","EASEZPVI",98,0)
 ;massage "V" and "S" nodes for clear use in for loop below
"RTN","EASEZPVI",99,0)
 S:$D(DGINC("V")) DGINC("V",1)=DGINC("V")
"RTN","EASEZPVI",100,0)
 S:$D(DGINR("V")) DGINR("V",1)=DGINR("V")
"RTN","EASEZPVI",101,0)
 S:$D(DGREL("V")) DGREL("V",1)=DGREL("V")
"RTN","EASEZPVI",102,0)
 S:$D(DGINC("S")) DGINC("S",1)=DGINC("S")
"RTN","EASEZPVI",103,0)
 S:$D(DGINR("S")) DGINR("S",1)=DGINR("S")
"RTN","EASEZPVI",104,0)
 S:$D(DGREL("S")) DGREL("S",1)=DGREL("S")
"RTN","EASEZPVI",105,0)
 ;
"RTN","EASEZPVI",106,0)
 F SUB1="V","S","C" D
"RTN","EASEZPVI",107,0)
 . Q:'$D(DGREL(SUB1))
"RTN","EASEZPVI",108,0)
 . S SUB2=0
"RTN","EASEZPVI",109,0)
 . F  S SUB2=$O(DGREL(SUB1,SUB2)) Q:'SUB2  D
"RTN","EASEZPVI",110,0)
 . . S EASARRAY(408,SUB1,SUB2)=DGREL(SUB1,SUB2)
"RTN","EASEZPVI",111,0)
 . . S I21=$G(DGINC(SUB1,SUB2))  ; 408.21 ien
"RTN","EASEZPVI",112,0)
 . . Q:'I21
"RTN","EASEZPVI",113,0)
 . . S INCYR=$$GET1^DIQ(408.21,I21_",",.01,"I")
"RTN","EASEZPVI",114,0)
 . . ;NOTE: The following two quit conditions are probably not
"RTN","EASEZPVI",115,0)
 . . ;      not necessary given the arrays being returned from
"RTN","EASEZPVI",116,0)
 . . ;      ALL^DGMTU21
"RTN","EASEZPVI",117,0)
 . . Q:'MTDT
"RTN","EASEZPVI",118,0)
 . . Q:(INCYR<MTDATE)
"RTN","EASEZPVI",119,0)
 . . S I22=$G(DGINR(SUB1,SUB2))  ;408.22 ien
"RTN","EASEZPVI",120,0)
 . . Q:$G(^DGMT(408.22,+I22,"MT"))=""
"RTN","EASEZPVI",121,0)
 . . ;
"RTN","EASEZPVI",122,0)
 . . S EASARRAY(408,SUB1,SUB2)=EASARRAY(408,SUB1,SUB2)_U_I21_U_I22
"RTN","EASEZPVI",123,0)
 Q
"RTN","EASEZPVI",124,0)
 ;
"RTN","EASEZRP1")
0^11^B36453210
"RTN","EASEZRP1",1,0)
EASEZRP1 ;ALB/AMA,TDM - Print 1010EZR ; 3/14/13 10:52am
"RTN","EASEZRP1",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57,70,107**;Mar 15, 2001;Build 32
"RTN","EASEZRP1",3,0)
 ;
"RTN","EASEZRP1",4,0)
EN(EALNE,EAINFO) ;Entry point for VA 10-10EZR, page 1
"RTN","EASEZRP1",5,0)
 ; Called from EN^EASEZRPF
"RTN","EASEZRP1",6,0)
 N EASD,X
"RTN","EASEZRP1",7,0)
 ;
"RTN","EASEZRP1",8,0)
 S EASD=$NA(^TMP("EASEZR",$J,1))
"RTN","EASEZRP1",9,0)
 D HDRMAIN^EASEZRPF(.EALNE)
"RTN","EASEZRP1",10,0)
 D DEM
"RTN","EASEZRP1",11,0)
 D II
"RTN","EASEZRP1",12,0)
 D EI
"RTN","EASEZRP1",13,0)
 D FD^EASEZRP2
"RTN","EASEZRP1",14,0)
 ;
"RTN","EASEZRP1",15,0)
 D FT^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRP1",16,0)
 S EAINFO("VET")=@EASD@(2),EAINFO("SSN")=@EASD@(5)
"RTN","EASEZRP1",17,0)
 Q
"RTN","EASEZRP1",18,0)
 ;
"RTN","EASEZRP1",19,0)
DEM ; Print VA 10-10EZR Section I, Demographic information
"RTN","EASEZRP1",20,0)
 ;
"RTN","EASEZRP1",21,0)
 W !?50,"SECTION I - GENERAL INFORMATION"
"RTN","EASEZRP1",22,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",23,0)
 W !?18,"Federal law provides criminal penalties, including a fine and/or imprisonment for up to 5 years,"
"RTN","EASEZRP1",24,0)
 W !?20,"for concealing a material fact or making a materially false statement.  (See 18 U.S.C. 1001)"
"RTN","EASEZRP1",25,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",26,0)
 ;
"RTN","EASEZRP1",27,0)
 W !,"1. VETERAN'S NAME (Last, First, Middle Name)",?95,"|2. OTHER NAMES USED"
"RTN","EASEZRP1",28,0)
 W !?3,@EASD@(2),?95,"|   ",@EASD@(3)
"RTN","EASEZRP1",29,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",30,0)
 ;
"RTN","EASEZRP1",31,0)
 W !,"3. GENDER",?20,"|4. SOCIAL SECURITY NUMBER",?95,"|5. DATE OF BIRTH (mm/dd/yyyy)"
"RTN","EASEZRP1",32,0)
 W !?3,@EASD@(4),?20,"|   ",@EASD@(5),?95,"|   ",@EASD@(7)
"RTN","EASEZRP1",33,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",34,0)
 ;
"RTN","EASEZRP1",35,0)
 ;EAS*1.0*70 - CHECK FOR FOREIGN ADDRESS
"RTN","EASEZRP1",36,0)
 I $G(@EASD@("9H"))="UNITED STATES" D  I 1  ;Use domestic address field labels
"RTN","EASEZRP1",37,0)
 . W !,"6. PERMANENT ADDRESS (Street)",?46,"|6A. CITY",?85,"|6B. STATE",?105,"|6C. ZIP"
"RTN","EASEZRP1",38,0)
 . W !?3,@EASD@("9A"),?46,"|    ",@EASD@("9B"),?85,"|    ",@EASD@("9C"),?105,"|    ",@EASD@("9D")
"RTN","EASEZRP1",39,0)
 . W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",40,0)
 . ;
"RTN","EASEZRP1",41,0)
 . W !,"6D. COUNTY",?66,"|6E. HOME TELEPHONE NUMBER (Include area code)"
"RTN","EASEZRP1",42,0)
 . W !?4,@EASD@("9E"),?66,"|    ",@EASD@(10)
"RTN","EASEZRP1",43,0)
 ;
"RTN","EASEZRP1",44,0)
 E  D  ;Use foreign address field labels
"RTN","EASEZRP1",45,0)
 . W !,"6. PERMANENT ADDRESS (Street)",?46,"|6A. CITY",?85,"|6B. PROVINCE",?105,"|6C. POSTAL CODE"
"RTN","EASEZRP1",46,0)
 . W !?3,@EASD@("9A"),?46,"|    ",@EASD@("9B"),?85,"|    ",@EASD@("9F"),?105,"|    ",@EASD@("9G")
"RTN","EASEZRP1",47,0)
 . W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",48,0)
 . ;
"RTN","EASEZRP1",49,0)
 . W !,"6D. COUNTRY",?66,"|6E. HOME TELEPHONE NUMBER (Include area code)"
"RTN","EASEZRP1",50,0)
 . W !?4,@EASD@("9H"),?34,"|    ",@EASD@(10)
"RTN","EASEZRP1",51,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",52,0)
 W !,"6F. E-MAIL ADDRESS",?66,"|6G. CELLULAR TELEPHONE NUMBER (Include area code)"
"RTN","EASEZRP1",53,0)
 W !,?4,@EASD@("11A"),?66,"|    ",@EASD@("11G")
"RTN","EASEZRP1",54,0)
 ;
"RTN","EASEZRP1",55,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",56,0)
 ;
"RTN","EASEZRP1",57,0)
 W !,"7. CURRENT MARITAL STATUS"
"RTN","EASEZRP1",58,0)
 W !,?3,@EASD@(12)
"RTN","EASEZRP1",59,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",60,0)
 ;
"RTN","EASEZRP1",61,0)
 W !,"8. NAME, ADDRESS AND RELATIONSHIP OF NEXT OF KIN",?83,"|8A. NEXT OF KIN'S HOME TELEPHONE NUMBER"
"RTN","EASEZRP1",62,0)
 W !?3,$P(@EASD@("19A"),U)," - ",$P(@EASD@("19A"),U,4),?83,"|    (Include area code)   ",@EASD@("19B")
"RTN","EASEZRP1",63,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! F X=1:1:84 W " "
"RTN","EASEZRP1",64,0)
 W $E(EALNE("UL"),1,48)
"RTN","EASEZRP1",65,0)
 W !?3,$P(@EASD@("19A"),U,2),?83,"|8B. NEXT OF KIN'S WORK TELEPHONE NUMBER"
"RTN","EASEZRP1",66,0)
 W !?3,$P(@EASD@("19A"),U,3),?83,"|    (Include area code)   ",@EASD@("19C")
"RTN","EASEZRP1",67,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",68,0)
 ;
"RTN","EASEZRP1",69,0)
 W !,"9. NAME, ADDRESS AND RELATIONSHIP OF EMERGENCY CONTACT",?83,"|9A. EMERGENCY CONTACT'S HOME TELEPHONE NUMBER"
"RTN","EASEZRP1",70,0)
 W !?3,$P(@EASD@("20A"),U)," - ",$P(@EASD@("20A"),U,4),?83,"|    (Include area code)   ",@EASD@("20B")
"RTN","EASEZRP1",71,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! F X=1:1:84 W " "
"RTN","EASEZRP1",72,0)
 W $E(EALNE("UL"),1,48)
"RTN","EASEZRP1",73,0)
 W !?3,$P(@EASD@("20A"),U,2),?83,"|9B. EMERGENCY CONTACT'S WORK TELEPHONE NUMBER"
"RTN","EASEZRP1",74,0)
 W !?3,$P(@EASD@("20A"),U,3),?83,"|    (Include area code)   ",@EASD@("20C")
"RTN","EASEZRP1",75,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",76,0)
 ;
"RTN","EASEZRP1",77,0)
 ;W !,"10. INDIVIDUAL TO RECEIVE POSSESSION OF YOUR PERSONAL PROPERTY LEFT ON PREMISES UNDER VA CONTROL AFTER YOUR DEPARTURE OR AT THE"
"RTN","EASEZRP1",78,0)
 ;W !?4,"TIME OF DEATH.  Note: This does not constitute a will or transfer of title.   ",@EASD@(21)
"RTN","EASEZRP1",79,0)
 ;W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",80,0)
 Q
"RTN","EASEZRP1",81,0)
 ;
"RTN","EASEZRP1",82,0)
II ; Print VA 10-10EZR SECTION II - INSURANCE INFORMATION
"RTN","EASEZRP1",83,0)
 ;
"RTN","EASEZRP1",84,0)
 W !?23,"SECTION II - INSURANCE INFORMATION  (Use a separate sheet for additional information)"
"RTN","EASEZRP1",85,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",86,0)
 ;
"RTN","EASEZRP1",87,0)
 W !,"1. ARE YOU COVERED BY HEALTH INSURANCE,",?49,"|2. HEALTH INSURANCE COMPANY NAME, ADDRESS AND TELEPHONE NUMBER"
"RTN","EASEZRP1",88,0)
 W !?3,"INCLUDING COVERAGE THROUGH A SPOUSE",?49,"|   ",@EASD@("17A")
"RTN","EASEZRP1",89,0)
 W !?3,"OR ANOTHER PERSON?   ",@EASD@(17),?49,"|   "
"RTN","EASEZRP1",90,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W $E(EALNE("UL"),1,49)
"RTN","EASEZRP1",91,0)
 ;
"RTN","EASEZRP1",92,0)
 W !,"3. NAME OF POLICY HOLDER",?49,"|   ",$P(@EASD@("17E"),U,2)
"RTN","EASEZRP1",93,0)
 W !?3,@EASD@("17B"),?49,"|   ",@EASD@("17I")
"RTN","EASEZRP1",94,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",95,0)
 ;
"RTN","EASEZRP1",96,0)
 W !,"4. POLICY NUMBER",?41,"|5. GROUP CODE",?70,"|6. ARE YOU ELIGIBLE FOR MEDICAID?",?111,"|6A. EFFECTIVE DATE"
"RTN","EASEZRP1",97,0)
 W !?3,@EASD@("17C"),?41,"|   ",@EASD@("17D"),?70,"|   ",@EASD@("14J"),?111,"|    "
"RTN","EASEZRP1",98,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",99,0)
 ;
"RTN","EASEZRP1",100,0)
 W !,"7. ARE YOU ENROLLED IN MEDICARE HOSPITAL INSURANCE PART A?",?70,"|7A. EFFECTIVE DATE (mm/dd/yyyy)"
"RTN","EASEZRP1",101,0)
 W !?3,@EASD@("14K"),?70,"|    ",@EASD@("14K1")
"RTN","EASEZRP1",102,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",103,0)
 ;
"RTN","EASEZRP1",104,0)
 W !,"8. ARE YOU ENROLLED IN MEDICARE HOSPITAL INSURANCE PART B?",?70,"|8A. EFFECTIVE DATE (mm/dd/yyyy)"
"RTN","EASEZRP1",105,0)
 W !?3,@EASD@("14L"),?70,"|    ",@EASD@("14L1")
"RTN","EASEZRP1",106,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",107,0)
 ;
"RTN","EASEZRP1",108,0)
 W !,"9. NAME EXACTLY AS IT APPEARS ON YOUR MEDICARE CARD",?70,"|10. MEDICARE CLAIM NUMBER"
"RTN","EASEZRP1",109,0)
 W !?3,@EASD@("14N"),?70,"|    ",@EASD@("14M")
"RTN","EASEZRP1",110,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",111,0)
 Q
"RTN","EASEZRP1",112,0)
 ;
"RTN","EASEZRP1",113,0)
EI ; Print VA 10-10EZR SECTION III - EMPLOYMENT INFORMATION
"RTN","EASEZRP1",114,0)
 ;
"RTN","EASEZRP1",115,0)
 W !?48,"SECTION III - EMPLOYMENT INFORMATION"
"RTN","EASEZRP1",116,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",117,0)
 ;
"RTN","EASEZRP1",118,0)
 W !,"1. VETERAN'S EMPLOYMENT STATUS",?47,"|1A. COMPANY NAME, ADDRESS AND TELEPHONE NUMBER"
"RTN","EASEZRP1",119,0)
 W !?3,$P(@EASD@("15A"),U),?47,"|    ",$P(@EASD@("15B"),U)
"RTN","EASEZRP1",120,0)
 W !,"Date of retirement (mm/dd/yyyy)   ",$P(@EASD@("15A"),U,2),?47,"|    ",$P(@EASD@("15B"),U,2)
"RTN","EASEZRP1",121,0)
 W !,"If employed or retired, complete item 1A",?47,"|    ",$P(@EASD@("15B"),U,3)
"RTN","EASEZRP1",122,0)
 W !?47,"    ",$P(@EASD@("15B"),U,4)
"RTN","EASEZRP1",123,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",124,0)
 ;
"RTN","EASEZRP1",125,0)
 W !,"2. SPOUSE'S EMPLOYMENT STATUS",?47,"|2A. COMPANY NAME, ADDRESS AND TELEPHONE NUMBER"
"RTN","EASEZRP1",126,0)
 W !?3,$P(@EASD@("16A"),U),?47,"|    ",$P(@EASD@("16B"),U)
"RTN","EASEZRP1",127,0)
 W !,"Date of retirement (mm/dd/yyyy)   ",$P(@EASD@("16A"),U,2),?47,"|    ",$P(@EASD@("16B"),U,2)
"RTN","EASEZRP1",128,0)
 W !,"If employed or retired, complete item 2A",?47,"|    ",$P(@EASD@("16B"),U,3)
"RTN","EASEZRP1",129,0)
 W !?47,"|    ",$P(@EASD@("16B"),U,4)
"RTN","EASEZRP1",130,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",131,0)
 Q
"RTN","EASEZRP2")
0^12^B76633535
"RTN","EASEZRP2",1,0)
EASEZRP2 ;ALB/AMA,TDM - Print 1010EZR, Cont., Page 2 ; 2/8/13 12:22pm
"RTN","EASEZRP2",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57,107**;Mar 15, 2001;Build 32
"RTN","EASEZRP2",3,0)
 ;
"RTN","EASEZRP2",4,0)
 Q
"RTN","EASEZRP2",5,0)
 ;
"RTN","EASEZRP2",6,0)
EN(EALNE,EAINFO,EASDG) ; Entry point, called from EN^EASEZRPF
"RTN","EASEZRP2",7,0)
 ;  Input
"RTN","EASEZRP2",8,0)
 ;     EALNE  - Array of line formats for output
"RTN","EASEZRP2",9,0)
 ;     EAINFO - Application Data array, see SETUP^EASEZRPF
"RTN","EASEZRP2",10,0)
 ;     EASDG  - Flag variable to signify request to print from DG options
"RTN","EASEZRP2",11,0)
 ;
"RTN","EASEZRP2",12,0)
 N EASD
"RTN","EASEZRP2",13,0)
 ;
"RTN","EASEZRP2",14,0)
 D HDR^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRP2",15,0)
 S EASD=$NA(^TMP("EASEZR",$J,2))
"RTN","EASEZRP2",16,0)
 ;D PAP
"RTN","EASEZRP2",17,0)
 ;D FD
"RTN","EASEZRP2",18,0)
 D DEP
"RTN","EASEZRP2",19,0)
 D INC
"RTN","EASEZRP2",20,0)
 D EXP
"RTN","EASEZRP2",21,0)
 ;
"RTN","EASEZRP2",22,0)
 D FT^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRP2",23,0)
 Q
"RTN","EASEZRP2",24,0)
 ;
"RTN","EASEZRP2",25,0)
PAP ;  Print SECTION IX - PAPERWORK REDUCTION ACT AND PRIVACY ACT INFORMATION
"RTN","EASEZRP2",26,0)
 ;
"RTN","EASEZRP2",27,0)
 W !?34,"SECTION IX - PAPERWORK REDUCTION ACT AND PRIVACY ACT INFORMATION"
"RTN","EASEZRP2",28,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",29,0)
 ;
"RTN","EASEZRP2",30,0)
 W !?5,"The Paperwork Reduction Act of 1995 requires us to notify you that this information collection is in accordance with the"
"RTN","EASEZRP2",31,0)
 W !,"clearance requirements of Section 3507 of the Paperwork Reduction Act of 1995.  We may not conduct or sponsor, and you are not"
"RTN","EASEZRP2",32,0)
 W !,"required to respond to, a collection of information unless it displays a valid OMB number.  We anticipate that the time expended by"
"RTN","EASEZRP2",33,0)
 W !,"all individuals who must complete this form will average 24 minutes.  This includes the time it will take to read instructions,"
"RTN","EASEZRP2",34,0)
 W !,"gather the necessary facts and fill out the form."
"RTN","EASEZRP2",35,0)
 W !?5,"Privacy Act Information:  VA is asking you to provide the information on this form under 38 U.S.C. Sections 1710, 1712, and"
"RTN","EASEZRP2",36,0)
 W !,"1722 in order for VA to determine your eligibility for medical benefits.  Information you supply may be verified through a"
"RTN","EASEZRP2",37,0)
 W !,"computer-matching program.  VA may disclose the information that you put on the form as permitted by law.  VA may make a ""routine"
"RTN","EASEZRP2",38,0)
 W !,"use"" disclosure of the information as outlined in the Privacy Act systems of records notices and in accordance with the VHA Notice"
"RTN","EASEZRP2",39,0)
 W !,"of Privacy Practices.  Providing the requested information is voluntary, but if any or all of the requested information is not"
"RTN","EASEZRP2",40,0)
 W !,"provided, it may delay or result in denial of your request for health care benefits.  Failure to furnish the information will not"
"RTN","EASEZRP2",41,0)
 W !,"have any affect on any other benefits to which you may be entitled.  If you provide VA your Social Security Number, VA will use it"
"RTN","EASEZRP2",42,0)
 ;
"RTN","EASEZRP2",43,0)
 W !,"to administer your VA benefits.  VA may also use this information to identify veterans and persons claiming or receiving VA"
"RTN","EASEZRP2",44,0)
 W !,"benefits and their records, and for other purposes authorized or required by law."
"RTN","EASEZRP2",45,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",46,0)
 Q
"RTN","EASEZRP2",47,0)
 ;
"RTN","EASEZRP2",48,0)
FD ; Print VA 10-10EZR SECTION IV - FINANCIAL DISCLOSURE
"RTN","EASEZRP2",49,0)
 ;
"RTN","EASEZRP2",50,0)
 W !?49,"SECTION IV - FINANCIAL DISCLOSURE"
"RTN","EASEZRP2",51,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",52,0)
 ;
"RTN","EASEZRP2",53,0)
 W !,"Disclosure allows VA to accurately determine whether certain Veterans will be charged copays for care and medications, their"
"RTN","EASEZRP2",54,0)
 W !,"eligibility for other services and enrollment priority.  Veterans are not required to disclose their financial information.  Recent"
"RTN","EASEZRP2",55,0)
 W !,"Combat Veterans (e.g., OEF/OIF/OND) like other Veterans may answer YES in Section IV and complete Sections V-VIII to have their"
"RTN","EASEZRP2",56,0)
 W !,"priority for enrollment and financial eligibility for travel assistance, cost-free medications and/or medical care for services"
"RTN","EASEZRP2",57,0)
 W !,"unrelated to military experience."
"RTN","EASEZRP2",58,0)
 ;
"RTN","EASEZRP2",59,0)
 N EZRY,EZRN S (EZRY,EZRN)="___"
"RTN","EASEZRP2",60,0)
 ;  IF NO ENTRY, THEN NO MEANS TEST, SO NO ANSWER
"RTN","EASEZRP2",61,0)
 ;  IF @EASD@(998)="Y", THEN VET DECLINES TO GIVE INFO, SO ANSWER "NO"
"RTN","EASEZRP2",62,0)
 I $D(@EASD@(998)) D
"RTN","EASEZRP2",63,0)
 . S:@EASD@(998)="YES" EZRN=" X "
"RTN","EASEZRP2",64,0)
 . S:@EASD@(998)="NO" EZRY=" X "
"RTN","EASEZRP2",65,0)
 ;
"RTN","EASEZRP2",66,0)
 W !?3,EZRN," NO, I DO NOT WISH TO PROVIDE FINANCIAL INFORMATION IN SECTIONS V THROUGH VIII.  If I am enrolled, I agree to pay applicable"
"RTN","EASEZRP2",67,0)
 W !?7,"VA copayments.  Sign and date the form in Section XI."
"RTN","EASEZRP2",68,0)
 ;
"RTN","EASEZRP2",69,0)
 W !,?3,EZRY," YES, I WILL PROVIDE MY HOUSEHOLD FINANCIAL INFORMATION FOR LAST CALENDAR YEAR.  Complete applicable Sections V through VIII."
"RTN","EASEZRP2",70,0)
 W !?7,"Sign and date the form in Section XI."
"RTN","EASEZRP2",71,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",72,0)
 Q
"RTN","EASEZRP2",73,0)
 ;
"RTN","EASEZRP2",74,0)
DEP ;  Print out VA 10-10EZR Section V, Dependent Information
"RTN","EASEZRP2",75,0)
 ;
"RTN","EASEZRP2",76,0)
 W !?24,"SECTION V - DEPENDENT INFORMATION  (Use a separate sheet for additional dependents)"
"RTN","EASEZRP2",77,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",78,0)
 ;
"RTN","EASEZRP2",79,0)
 W !,"1. SPOUSE'S NAME (Last, First, Middle Name)",?57,"|2. CHILD'S NAME (Last, First, Middle Name)"
"RTN","EASEZRP2",80,0)
 W !?3,$P(@EASD@(1),U),?57,"|   ",@EASD@(2)  ;,?94,"|    ",@EASD@(9)
"RTN","EASEZRP2",81,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",82,0)
 ;
"RTN","EASEZRP2",83,0)
 W !,"1A. SPOUSE'S MAIDEN NAME",?57,"|2A. CHILD'S RELATIONSHIP TO YOU"
"RTN","EASEZRP2",84,0)
 W !?4,$P(@EASD@(1),U,2),?57,"|    ",@EASD@(9)
"RTN","EASEZRP2",85,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",86,0)
 ;
"RTN","EASEZRP2",87,0)
 W !,"1B. SPOUSE'S SOCIAL SECURITY NUMBER",?57,"|2B. CHILD'S SOCIAL SECURITY NUMBER",?94,"|2C. DATE CHILD BECAME YOUR DEPENDENT"
"RTN","EASEZRP2",88,0)
 W !,?4,@EASD@(3),?57,"|    ",@EASD@(7),?94,"|    (mm/dd/yyyy)  ",@EASD@(11)
"RTN","EASEZRP2",89,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",90,0)
 ;
"RTN","EASEZRP2",91,0)
 W !,"1C. SPOUSE'S DATE OF BIRTH",?30,"|1D. DATE OF MARRIAGE",?57,"|2D. CHILD'S DATE OF BIRTH (mm/dd/yyyy)"
"RTN","EASEZRP2",92,0)
 W !,"(mm/dd/yyyy) ",@EASD@(4),?30,"|(mm/dd/yyyy) ",@EASD@(10),?57,"|    ",@EASD@(5)   ;,?84,"|    DISABLED BEFORE THE AGE OF 18?   ",@EASD@(14)
"RTN","EASEZRP2",93,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",94,0)
 ;
"RTN","EASEZRP2",95,0)
 W !,"1E. SPOUSE'S ADDRESS AND TELEPHONE NUMBER (Street, City,",?57,"|2E. WAS CHILD PERMANENTLY AND TOTALLY DISABLED BEFORE THE AGE OF 18? "
"RTN","EASEZRP2",96,0)
 W !,?4,"State, ZIP)",?57,"|"
"RTN","EASEZRP2",97,0)
 I $E(@EASD@(14))="Y" W "              X YES     ___NO"
"RTN","EASEZRP2",98,0)
 I $E(@EASD@(14))="N" W "             ___YES      X NO"
"RTN","EASEZRP2",99,0)
 I ($E(@EASD@(14))'="N")&($E(@EASD@(14),1)'="Y") W "             ___YES     ___NO"
"RTN","EASEZRP2",100,0)
 W !?4,$P(@EASD@(6),U),?57,"|",$E(EALNE("UL"),1,74)
"RTN","EASEZRP2",101,0)
 W !?4,$P(@EASD@(6),U,2),?57,"|2F. IF CHILD IS BETWEEN 18 AND 23 YEARS OF AGE, DID CHILD ATTEND SCHOOL"
"RTN","EASEZRP2",102,0)
 W !?4,@EASD@(8),?57,"|    LAST CALENDAR YEAR?   "  ;,@EASD@(15)
"RTN","EASEZRP2",103,0)
 I $E(@EASD@(15))="Y" W "         X YES     ___NO"
"RTN","EASEZRP2",104,0)
 I $E(@EASD@(15))="N" W "        ___YES      X NO"
"RTN","EASEZRP2",105,0)
 I ($E(@EASD@(15))'="N")&($E(@EASD@(15))'="Y") W "        ___YES     ___NO"
"RTN","EASEZRP2",106,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",107,0)
 ;
"RTN","EASEZRP2",108,0)
 W !,"3. IF YOUR SPOUSE OR DEPENDENT CHILD DID NOT LIVE WITH",?57,"|2G. EXPENSES PAID BY YOUR DEPENDENT CHILD FOR COLLEGE, VOCATIONAL"
"RTN","EASEZRP2",109,0)
 W !?3,"YOU LAST YEAR, DID YOU PROVIDE SUPPORT?",?57,"|    REHABILITATION OR TRAINING (e.g., tuition, books, materials)"
"RTN","EASEZRP2",110,0)
 W !?20 I ('$P(@EASD@(12),U))&('$P(@EASD@(12),U)) W "___YES      X NO"
"RTN","EASEZRP2",111,0)
 I ($P(@EASD@(12),U))!($P(@EASD@(12),U)) W " X YES     ___NO"
"RTN","EASEZRP2",112,0)
 W ?57,"|    $",@EASD@(13)
"RTN","EASEZRP2",113,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",114,0)
 Q
"RTN","EASEZRP2",115,0)
 ;
"RTN","EASEZRP2",116,0)
INC ; Print out VA 10-10EZ Section VI, Gross Annual Income information
"RTN","EASEZRP2",117,0)
 ;
"RTN","EASEZRP2",118,0)
 I $G(EASDG),+@EASD@(999) W !?6,"SECTION VI - PREVIOUS CALENDAR YEAR GROSS ANNUAL INCOME OF VETERAN, SPOUSE AND DEPENDENT CHILDREN  (INCOME YEAR:  ",@EASD@(999),")"
"RTN","EASEZRP2",119,0)
 E  W !?17,"SECTION VI - PREVIOUS CALENDAR YEAR GROSS ANNUAL INCOME OF VETERAN, SPOUSE AND DEPENDENT CHILDREN"
"RTN","EASEZRP2",120,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",121,0)
 ;
"RTN","EASEZRP2",122,0)
 W !?69,"|",?76,"VETERAN",?90,"|",?97,"SPOUSE",?110,"|",?117,"CHILD 1"
"RTN","EASEZRP2",123,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",124,0)
 ;
"RTN","EASEZRP2",125,0)
 W !,"1. GROSS ANNUAL INCOME FROM EMPLOYMENT (e.g., wages, bonuses, tips)",?69,"|  $ ",$P(@EASD@("2C1"),U),?90,"|  $ ",$P(@EASD@("2C1"),U,2),?110,"|  $ ",$P(@EASD@("2C1"),U,3)
"RTN","EASEZRP2",126,0)
 W !?3,"EXCLUDING INCOME FROM YOUR FARM, RANCH, PROPERTY OR BUSINESS",?69,"|",?90,"|",?110,"|"
"RTN","EASEZRP2",127,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",128,0)
 ;
"RTN","EASEZRP2",129,0)
 W !,"2. NET INCOME FROM YOUR FARM, RANCH, PROPERTY OR BUSINESS",?69,"|  $ ",$P(@EASD@("2C3"),U),?90,"|  $ ",$P(@EASD@("2C3"),U,2),?110,"|  $ ",$P(@EASD@("2C3"),U,3)
"RTN","EASEZRP2",130,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",131,0)
 ;
"RTN","EASEZRP2",132,0)
 W !,"3. LIST OTHER INCOME AMOUNTS (e.g., Social Security, compensation,",?69,"|  $ ",$P(@EASD@("2C2"),U),?90,"|  $ ",$P(@EASD@("2C2"),U,2),?110,"|  $ ",$P(@EASD@("2C2"),U,3)
"RTN","EASEZRP2",133,0)
 W !?3,"pension, interest, dividends).  EXCLUDING WELFARE",?69,"|",?90,"|",?110,"|"
"RTN","EASEZRP2",134,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",135,0)
 Q
"RTN","EASEZRP2",136,0)
 ;
"RTN","EASEZRP2",137,0)
EXP ; Print out VA 10-10EZR Section VIII, Deductible Expense Information
"RTN","EASEZRP2",138,0)
 ;
"RTN","EASEZRP2",139,0)
 I $G(EASDG),+@EASD@(999) W !?26,"SECTION VII - PREVIOUS CALENDAR YEAR DEDUCTIBLE EXPENSES  (INCOME YEAR:  ",@EASD@(999),")"
"RTN","EASEZRP2",140,0)
 E  W !?37,"SECTION VII - PREVIOUS CALENDAR YEAR DEDUCTIBLE EXPENSES"
"RTN","EASEZRP2",141,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",142,0)
 ;
"RTN","EASEZRP2",143,0)
 W !,"1. NON-REIMBURSED MEDICAL EXPENSES PAID BY YOU OR YOUR SPOUSE (e.g., payments for doctors, dentists,",?110,"|  $ ",@EASD@("2D1")
"RTN","EASEZRP2",144,0)
 W !,"medications, Medicare, health insurance, hospital and nursing home)",?110,"|"
"RTN","EASEZRP2",145,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",146,0)
 ;
"RTN","EASEZRP2",147,0)
 W !,"2. AMOUNT YOU PAID LAST CALENDAR YEAR FOR FUNERAL AND BURIAL EXPENSES FOR YOUR DECEASED SPOUSE OR DEPENDENT",?110,"|  $ ",@EASD@("2D2")
"RTN","EASEZRP2",148,0)
 W !,"CHILD (Also enter spouse or child's information in Section V.)",?110,"|"
"RTN","EASEZRP2",149,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",150,0)
 ;
"RTN","EASEZRP2",151,0)
 W !,"3. AMOUNT YOU PAID LAST CALENDAR YEAR FOR YOUR COLLEGE OR VOCATIONAL EDUCATIONAL EXPENSES (e.g., tuition,",?110,"|  $ ",@EASD@("2D3")
"RTN","EASEZRP2",152,0)
 W !,"books, fees, materials).  DO NOT LIST YOUR DEPENDENTS' EDUCATIONAL EXPENSES.",?110,"|"
"RTN","EASEZRP2",153,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",154,0)
 Q
"RTN","EASEZRP3")
0^13^B39915034
"RTN","EASEZRP3",1,0)
EASEZRP3 ;ALB/AMA,TDM - Print 1010EZR, Cont. ; 1/19/13 5:10pm
"RTN","EASEZRP3",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57,70,107**;Mar 15, 2001;Build 32
"RTN","EASEZRP3",3,0)
 ;
"RTN","EASEZRP3",4,0)
 Q
"RTN","EASEZRP3",5,0)
 ;
"RTN","EASEZRP3",6,0)
EN(EALNE,EAINFO,EASDG) ; Entry point to print Page 3, called from EN^EASEZRPF
"RTN","EASEZRP3",7,0)
 ;  Input
"RTN","EASEZRP3",8,0)
 ;     EALNE  - Array of line formats for output
"RTN","EASEZRP3",9,0)
 ;     EAINFO - Application Data array, see SETUP^EASEZRPF
"RTN","EASEZRP3",10,0)
 ;     EASDG  - Flag variable to signify request to print from DG options
"RTN","EASEZRP3",11,0)
 ;
"RTN","EASEZRP3",12,0)
 N EASIGN,EASD
"RTN","EASEZRP3",13,0)
 ;
"RTN","EASEZRP3",14,0)
 I $$GET1^DIQ(712,EAINFO("EASAPP")_",",4)]"" D
"RTN","EASEZRP3",15,0)
 . S EASIGN=$$GET1^DIQ(712,EAINFO("EASAPP")_",",4.1)
"RTN","EASEZRP3",16,0)
 S EASIGN=$G(EASIGN)
"RTN","EASEZRP3",17,0)
 ;
"RTN","EASEZRP3",18,0)
 D HDR^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRP3",19,0)
 S EASD=$NA(^TMP("EASEZR",$J,2))
"RTN","EASEZRP3",20,0)
 ;
"RTN","EASEZRP3",21,0)
 D NET
"RTN","EASEZRP3",22,0)
 D PAP^EASEZRP2
"RTN","EASEZRP3",23,0)
 D CON
"RTN","EASEZRP3",24,0)
 D AOB
"RTN","EASEZRP3",25,0)
 D FT^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRP3",26,0)
 ;
"RTN","EASEZRP3",27,0)
 Q
"RTN","EASEZRP3",28,0)
 ;
"RTN","EASEZRP3",29,0)
NET ;  Print SECTION VIII - PREVIOUS CALENDAR YEAR NET WORTH
"RTN","EASEZRP3",30,0)
 ;
"RTN","EASEZRP3",31,0)
 I $G(EASDG),+@EASD@(999) W !!?2,"SECTION VIII - PREVIOUS CALENDAR YEAR NET WORTH  (INCOME YEAR:  ",@EASD@(999),")  (Use a separate sheet for additional dependents)"
"RTN","EASEZRP3",32,0)
 E  W !!?38,"SECTION VIII - PREVIOUS CALENDAR YEAR NET WORTH  (Use a separate sheet for additional dependents)"
"RTN","EASEZRP3",33,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",34,0)
 ;
"RTN","EASEZRP3",35,0)
 W !?78,"|",?84,"VETERAN",?96,"|",?102,"SPOUSE",?114,"|",?120,"CHILD 1"
"RTN","EASEZRP3",36,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",37,0)
 ;
"RTN","EASEZRP3",38,0)
 W !,"1. CASH, AMOUNT IN BANK ACCOUNTS (e.g., checking and savings accounts,",?78,"|  $ ",$P(@EASD@("2E1"),U),?96,"|  $ ",$P(@EASD@("2E1"),U,2),?114,"|  $ ",$P(@EASD@("2E1"),U,3)
"RTN","EASEZRP3",39,0)
 W !,"certificates of deposit, individual retirement accounts, stocks and bonds)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZRP3",40,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",41,0)
 ;
"RTN","EASEZRP3",42,0)
 W !,"2. MARKET VALUE OF LAND AND BUILDINGS MINUS MORTGAGES AND LIENS (e.g., second",?78,"|  $ ",$P(@EASD@("2E2"),U),?96,"|  $ ",$P(@EASD@("2E2"),U,2),?114,"|  $ ",$P(@EASD@("2E2"),U,3)
"RTN","EASEZRP3",43,0)
 W !,"homes and non-income-producing property.  Do not include your primary home.)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZRP3",44,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",45,0)
 ;
"RTN","EASEZRP3",46,0)
 W !,"3. VALUE OF OTHER PROPERTY OR ASSETS (e.g., art, rare coins, collectibles)",?78,"|  $ ",$P(@EASD@("2E3"),U),?96,"|  $ ",$P(@EASD@("2E3"),U,2),?114,"|  $ ",$P(@EASD@("2E3"),U,3)
"RTN","EASEZRP3",47,0)
 W !,"MINUS THE AMOUNT YOU OWE ON THESE ITEMS.  INCLUDE VALUE OF FARM, RANCH, OR",?78,"|",?96,"|",?114,"|"
"RTN","EASEZRP3",48,0)
 W !,"BUSINESS ASSETS.  Exclude household effects and family vehicles.",?78,"|",?96,"|",?114,"|"
"RTN","EASEZRP3",49,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",50,0)
 Q
"RTN","EASEZRP3",51,0)
 ;
"RTN","EASEZRP3",52,0)
CON ;  Print SECTION X - CONSENT TO COPAYMENTS
"RTN","EASEZRP3",53,0)
 ;
"RTN","EASEZRP3",54,0)
 W !?49,"SECTION X - CONSENT TO COPAYMENTS"
"RTN","EASEZRP3",55,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",56,0)
 ;
"RTN","EASEZRP3",57,0)
 W !,"By signing this application you are agreeing to pay the applicable VA copays for treatment or services for your NSC conditions as"
"RTN","EASEZRP3",58,0)
 W !,"required by law."
"RTN","EASEZRP3",59,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",60,0)
 Q
"RTN","EASEZRP3",61,0)
 ;
"RTN","EASEZRP3",62,0)
AOB ;  Print SECTION XI - ASSIGNMENT OF BENEFITS
"RTN","EASEZRP3",63,0)
 ;
"RTN","EASEZRP3",64,0)
 W !?48,"SECTION XI - ASSIGNMENT OF BENEFITS"
"RTN","EASEZRP3",65,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",66,0)
 ;
"RTN","EASEZRP3",67,0)
 W !,"I understand that pursuant to 38 U.S.C. Section 1729 and 42 U.S.C. 2651, the Department of Veterans Affairs (VA) is authorized to"
"RTN","EASEZRP3",68,0)
 W !,"recover or collect from my health plan (HP) or any other legally responsible third party for the reasonable charges of nonservice-"
"RTN","EASEZRP3",69,0)
 W !,"connected VA medical care or services furnished or provided to me.  I hereby authorize payment directly to VA from any HP under"
"RTN","EASEZRP3",70,0)
 W !,"which I am covered (including coverage provided under my spouse's HP) that is responsible for payment of the charges for my medical"
"RTN","EASEZRP3",71,0)
 W !,"care, including benefits otherwise payable to me or my spouse.  Furthermore, I hereby assign to the VA any claim I may have against"
"RTN","EASEZRP3",72,0)
 W !,"any person or entity who is or may be legally responsible for the payment of the cost of medical services provided to me by the VA."
"RTN","EASEZRP3",73,0)
 W !,"I understand that this assignment shall not limit or prejudice my right to recover for my own benefit any amount in excess of the"
"RTN","EASEZRP3",74,0)
 W !,"cost of medical services provided to me by the VA or any other amount to which I may be entitled.  I hereby appoint the Attorney"
"RTN","EASEZRP3",75,0)
 W !,"General of the United States and the Secretary of Veterans' Affairs and their designees as my Attorneys-in-fact to take all"
"RTN","EASEZRP3",76,0)
 W !,"necessary and appropriate actions in order to recover and receive all or part of the amount herein assigned.  I hereby authorize"
"RTN","EASEZRP3",77,0)
 W !,"the VA to disclose to my attorney and to any third party or administrative agency who may be responsible for payment of the cost of"
"RTN","EASEZRP3",78,0)
 W !,"medical services provided to me, information from my medical records as necessary to verify my claim.  Further, I hereby authorize"
"RTN","EASEZRP3",79,0)
 W !,"any such third party or administrative agency to disclose to the VA any information regarding my claim."
"RTN","EASEZRP3",80,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",81,0)
 ;
"RTN","EASEZRP3",82,0)
 W !?11,"ALL APPLICANTS MUST SIGN AND DATE THIS FORM.  REFER TO INSTRUCTIONS ON WHO CAN SIGN ON BEHALF OF THE VETERAN.",!
"RTN","EASEZRP3",83,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",84,0)
 ;
"RTN","EASEZRP3",85,0)
 W !,"SIGNATURE OF APPLICANT",?90,"| DATE (mm/dd/yyyy)"
"RTN","EASEZRP3",86,0)
 I $G(EASIGN)]"" W !,"SIGNATURE OF APPLICANT OR APPLICANT'S REPRESENTATIVE HAS BEEN VERIFIED",?90,"| ",EASIGN,!?90,"|"
"RTN","EASEZRP3",87,0)
 E  W !?90,"|",!?90,"|"
"RTN","EASEZRP3",88,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",89,0)
 Q
"RTN","EASEZRPF")
0^14^B15520164
"RTN","EASEZRPF",1,0)
EASEZRPF ;ALB/AMA,TDM - Print 1010EZR ; 2/8/13 12:00pm
"RTN","EASEZRPF",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57,107**;Mar 15, 2001;Build 32
"RTN","EASEZRPF",3,0)
 ;
"RTN","EASEZRPF",4,0)
 ; These routines print a version of the OMB approved VA10-10EZR form.
"RTN","EASEZRPF",5,0)
 ; No local modifications to these routines will be made.  Any changes
"RTN","EASEZRPF",6,0)
 ; will be provided through the National Patch Module release process.
"RTN","EASEZRPF",7,0)
 ;
"RTN","EASEZRPF",8,0)
 Q
"RTN","EASEZRPF",9,0)
EN ; Entry point to print 1010EZR
"RTN","EASEZRPF",10,0)
 N EALNE,EAINFO,EAADL,EAABRT,EAMULT
"RTN","EASEZRPF",11,0)
 ;
"RTN","EASEZRPF",12,0)
 D SETUP(.EALNE,.EAINFO,EASAPP,EASDFN)
"RTN","EASEZRPF",13,0)
 ;
"RTN","EASEZRPF",14,0)
 M ^TMP("EASEZR",$J)=^TMP("EASEZ",$J) K ^TMP("EASEZ",$J)
"RTN","EASEZRPF",15,0)
 M ^TMP("EZRDATA",$J)=^TMP("EZDATA",$J) K ^TMP("EZDATA",$J)
"RTN","EASEZRPF",16,0)
 M ^TMP("EZRINDEX",$J)=^TMP("EZINDEX",$J) K ^TMP("EZINDEX",$J)
"RTN","EASEZRPF",17,0)
 M ^TMP("EZRTEMP",$J)=^TMP("EZTEMP",$J) K ^TMP("EZTEMP",$J)
"RTN","EASEZRPF",18,0)
 M ^TMP("EZRDISP",$J)=^TMP("EZDISP",$J) K ^TMP("EZDISP",$J)
"RTN","EASEZRPF",19,0)
 ;
"RTN","EASEZRPF",20,0)
 D PAGE1^EASEZRPU
"RTN","EASEZRPF",21,0)
 D EN^EASEZRP1(.EALNE,.EAINFO)
"RTN","EASEZRPF",22,0)
 ;
"RTN","EASEZRPF",23,0)
 D PAGE2^EASEZRPP
"RTN","EASEZRPF",24,0)
 D EN^EASEZRP2(.EALNE,.EAINFO)
"RTN","EASEZRPF",25,0)
 ;
"RTN","EASEZRPF",26,0)
 D EN^EASEZRP3(.EALNE,.EAINFO)
"RTN","EASEZRPF",27,0)
 ;
"RTN","EASEZRPF",28,0)
 ;Print additional insurance pages if more than 1 insurance company
"RTN","EASEZRPF",29,0)
 F EAADL=1:1 D  Q:$G(EAABRT)
"RTN","EASEZRPF",30,0)
 . I '$D(^TMP("EZRTEMP",$J,"IA",EAADL)) S EAABRT=1 Q
"RTN","EASEZRPF",31,0)
 . S EAMULT=1
"RTN","EASEZRPF",32,0)
 . D PAGEI^EASEZRPU(EAADL)
"RTN","EASEZRPF",33,0)
 I $G(EAMULT) D EN^EASEZRPI(.EALNE,.EAINFO)
"RTN","EASEZRPF",34,0)
 ;
"RTN","EASEZRPF",35,0)
 ;Print additional dependent pages if more than 1 dependent
"RTN","EASEZRPF",36,0)
 S (EAABRT,EAMULT)=0 F EAADL=1:1 D  Q:$G(EAABRT)
"RTN","EASEZRPF",37,0)
 . I '$D(^TMP("EZRTEMP",$J,"IIB",EAADL)) S EAABRT=1 Q
"RTN","EASEZRPF",38,0)
 . S EAMULT=1
"RTN","EASEZRPF",39,0)
 . D PAGEN^EASEZRPU(EAADL)
"RTN","EASEZRPF",40,0)
 I EAMULT D EN^EASEZRPD(.EALNE,.EAINFO)
"RTN","EASEZRPF",41,0)
 ;
"RTN","EASEZRPF",42,0)
 ;Print additional dependent financial pages if more
"RTN","EASEZRPF",43,0)
 ;than 1 dependent, starting with the 2nd one
"RTN","EASEZRPF",44,0)
 ;(since Child 1 info already displayed on pages 2 & 3)
"RTN","EASEZRPF",45,0)
 S (EAABRT,EAMULT)=0 F EAADL=2:1 D  Q:$G(EAABRT)
"RTN","EASEZRPF",46,0)
 . I '$D(^TMP("EZRTEMP",$J,"IIF",EAADL)) S EAABRT=1 Q
"RTN","EASEZRPF",47,0)
 . S EAMULT=1
"RTN","EASEZRPF",48,0)
 . D PAGEDFF^EASEZRPP(EAADL)
"RTN","EASEZRPF",49,0)
 S EAABRT=0 F EAADL=2:1 D  Q:$G(EAABRT)
"RTN","EASEZRPF",50,0)
 . I '$D(^TMP("EZRTEMP",$J,"IIG",EAADL)) S EAABRT=1 Q
"RTN","EASEZRPF",51,0)
 . S EAMULT=1
"RTN","EASEZRPF",52,0)
 . D PAGEDFG^EASEZRPP(EAADL)
"RTN","EASEZRPF",53,0)
 I EAMULT D EN^EASEZRPM(.EALNE,.EAINFO)
"RTN","EASEZRPF",54,0)
 ;
"RTN","EASEZRPF",55,0)
ENQUIT ; Clean up temp globals after printing is complete
"RTN","EASEZRPF",56,0)
 K ^TMP("EASEZR",$J)
"RTN","EASEZRPF",57,0)
 K ^TMP("EZRDATA",$J)
"RTN","EASEZRPF",58,0)
 K ^TMP("EZRINDEX",$J)
"RTN","EASEZRPF",59,0)
 K ^TMP("EZRTEMP",$J)
"RTN","EASEZRPF",60,0)
 K ^TMP("EZRDISP",$J)
"RTN","EASEZRPF",61,0)
 Q
"RTN","EASEZRPF",62,0)
 ;
"RTN","EASEZRPF",63,0)
SETUP(EALNE,EAINFO,EASAPP,EASDFN) ; Set-up print variables
"RTN","EASEZRPF",64,0)
 ; Input
"RTN","EASEZRPF",65,0)
 ;   EALNE   - Line format array
"RTN","EASEZRPF",66,0)
 ;   EAINFO  - Misc Data
"RTN","EASEZRPF",67,0)
 ;      ("CLRK") - Clerk's initials
"RTN","EASEZRPF",68,0)
 ;      ("ID")   - Web ID from #712
"RTN","EASEZRPF",69,0)
 ;      ("PGE")  - Page number
"RTN","EASEZRPF",70,0)
 ;      ("VET" ) - Veteran's name submitting the application
"RTN","EASEZRPF",71,0)
 ;      ("SSN")  - Veteran's SSN
"RTN","EASEZRPF",72,0)
 ;      ("DISC") - Financial Disclosure status
"RTN","EASEZRPF",73,0)
 ;   EASAPP  - IEN of applicant on the 1010EZ HOLDING File, #712
"RTN","EASEZRPF",74,0)
 ;   EASDFN  - DFN of applicant in the PATIENT File, #2
"RTN","EASEZRPF",75,0)
 ;
"RTN","EASEZRPF",76,0)
 N X
"RTN","EASEZRPF",77,0)
 ;
"RTN","EASEZRPF",78,0)
 ; Build Line array for printout
"RTN","EASEZRPF",79,0)
 S EALNE("ULC")=$S('($D(IOST)#2):"-",IOST["C-":"-",1:"_")
"RTN","EASEZRPF",80,0)
 S EALNE("D")="",EALNE("DD")="",EALNE("UL")=""
"RTN","EASEZRPF",81,0)
 S $P(EALNE("D"),"-",133)="",$P(EALNE("DD"),"=",133)="",$P(EALNE("UL"),EALNE("ULC"),133)=""
"RTN","EASEZRPF",82,0)
 ;
"RTN","EASEZRPF",83,0)
 ; Set up information array & get clerk's initials
"RTN","EASEZRPF",84,0)
 S ZUSR=$G(ZUSR)
"RTN","EASEZRPF",85,0)
 I +ZUSR>0 D
"RTN","EASEZRPF",86,0)
 . S EAINFO("CLRK")=$$GET1^DIQ(200,ZUSR,1)
"RTN","EASEZRPF",87,0)
 . I EAINFO("CLRK")']"" D
"RTN","EASEZRPF",88,0)
 . . S X=$$GET1^DIQ(200,ZUSR,.01)
"RTN","EASEZRPF",89,0)
 . . S EAINFO("CLRK")=$E($P(X,",",2),1)_$E($P(X,","),1)
"RTN","EASEZRPF",90,0)
 E  D
"RTN","EASEZRPF",91,0)
 . S EAINFO("CLRK")="unk"
"RTN","EASEZRPF",92,0)
 ;
"RTN","EASEZRPF",93,0)
 ; Set data elements
"RTN","EASEZRPF",94,0)
 S EAINFO("PGE")=0
"RTN","EASEZRPF",95,0)
 S EAINFO("ID")=$$GET1^DIQ(712,EASAPP_",",.1)
"RTN","EASEZRPF",96,0)
 S EAINFO("PD")=$$FMTE^XLFDT($$NOW^XLFDT)
"RTN","EASEZRPF",97,0)
 S EAINFO("DISC")=$$GET1^DIQ(712,EASAPP_",",3.8)
"RTN","EASEZRPF",98,0)
 S EAINFO("EASAPP")=EASAPP
"RTN","EASEZRPF",99,0)
 S EAINFO("VET")=$$GET1^DIQ(712,EASAPP_",",1)
"RTN","EASEZRPF",100,0)
 S EAINFO("SSN")=$$GET1^DIQ(712,EASAPP_",",2)
"RTN","EASEZRPF",101,0)
 ;
"RTN","EASEZRPF",102,0)
 ; Retrieve application data from holding file, #712
"RTN","EASEZRPF",103,0)
 D EN^EASEZC1(EASAPP)
"RTN","EASEZRPF",104,0)
 D SORT^EASEZC3(EASAPP)
"RTN","EASEZRPF",105,0)
SETQ Q
"RTN","EASEZRPF",106,0)
 ;
"RTN","EASEZRPF",107,0)
HDRMAIN(EALNE) ; PRINT THE FIRST PAGE HEADER INFORMATION
"RTN","EASEZRPF",108,0)
 W @IOF
"RTN","EASEZRPF",109,0)
 W ?44,"OMB APPROVED NO. 2900-0091 / Estimated Burden Avg. 24 min.",!,EALNE("DD")
"RTN","EASEZRPF",110,0)
 W !,"D E P A R T M E N T   O F   V E T E R A N S   A F F A I R S",?76,"HEALTH BENEFITS RENEWAL FORM",!,EALNE("DD")
"RTN","EASEZRPF",111,0)
 Q
"RTN","EASEZRPF",112,0)
 ;
"RTN","EASEZRPF",113,0)
HDR(EALNE,EAINFO) ; PRINT THE PAGE HEADER INFO FOR PAGES GREATER THAN 1
"RTN","EASEZRPF",114,0)
 W @IOF
"RTN","EASEZRPF",115,0)
 W "DEPARTMENT OF VETERANS AFFAIRS",?40,"| VETERAN'S NAME (Last, First, Middle)",?106,"| SOCIAL SECURITY NUMBER"
"RTN","EASEZRPF",116,0)
 W !?40,"| ",EAINFO("VET"),?106,"| ",EAINFO("SSN")
"RTN","EASEZRPF",117,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPF",118,0)
 Q
"RTN","EASEZRPF",119,0)
 ;
"RTN","EASEZRPF",120,0)
FT(EALNE,EAINFO) ; PRINT THE PAGE FOOTER INFORMATION
"RTN","EASEZRPF",121,0)
 W !,EALNE("DD")
"RTN","EASEZRPF",122,0)
 W !,"VA FORM 10-10EZR FEB 2011",?40,"PRINTED: ",EAINFO("PD")
"RTN","EASEZRPF",123,0)
 W ?80,"Clerk: ",EAINFO("CLRK"),"/",EAINFO("ID")
"RTN","EASEZRPF",124,0)
 W ?120,"PAGE " S EAINFO("PGE")=EAINFO("PGE")+1 W EAINFO("PGE")
"RTN","EASEZRPF",125,0)
 Q
"RTN","EASEZRPU")
0^16^B49046361
"RTN","EASEZRPU",1,0)
EASEZRPU ;ALB/AMA,TDM - Print utility for 10-10EZR ; 2/6/13 12:10pm
"RTN","EASEZRPU",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57,70,107**;Mar 15, 2001;Build 32
"RTN","EASEZRPU",3,0)
 ;
"RTN","EASEZRPU",4,0)
 Q
"RTN","EASEZRPU",5,0)
 ;
"RTN","EASEZRPU",6,0)
PAGE1 ;This function retrieves and formats the page 1 application data from
"RTN","EASEZRPU",7,0)
 ;the 1010EZ Holding File, #712, for the printed version of the VistA
"RTN","EASEZRPU",8,0)
 ;10-10EZR form.  If the holding file entry has not been accepted, and
"RTN","EASEZRPU",9,0)
 ;a vista entry is available, the vista entry is printed.
"RTN","EASEZRPU",10,0)
 ;   Called from EN^EASEZRPF
"RTN","EASEZRPU",11,0)
 ;
"RTN","EASEZRPU",12,0)
 ;The ^TMP("EZRTEMP") global is built in SETUP^EASEZRPF and
"RTN","EASEZRPU",13,0)
 ;remains until the printed form is complete.
"RTN","EASEZRPU",14,0)
 ; Variables
"RTN","EASEZRPU",15,0)
 ;   ZDATA   - references TMP global for output data
"RTN","EASEZRPU",16,0)
 ;   EZDATA  - references available data from 1010EZ holding file
"RTN","EASEZRPU",17,0)
 ;   EASTR   - Temporary String data variable
"RTN","EASEZRPU",18,0)
 ;   EAX,EAY - Temporary data variables
"RTN","EASEZRPU",19,0)
 ;   EACT    - Temporary city variable
"RTN","EASEZRPU",20,0)
 ;
"RTN","EASEZRPU",21,0)
 ;THIS ROUTINE WAS COPIED FROM EASEZP6U, AND MODIFIED TO
"RTN","EASEZRPU",22,0)
 ;PROCESS JUST THE DATA ELEMENTS NEEDED FOR THE EZR FORM
"RTN","EASEZRPU",23,0)
 ;
"RTN","EASEZRPU",24,0)
 N ZDATA,EZDATA,EASTR,EAX,EAY,EACT
"RTN","EASEZRPU",25,0)
 ;
"RTN","EASEZRPU",26,0)
 S ZDATA=$NA(^TMP("EASEZR",$J,1))
"RTN","EASEZRPU",27,0)
 S EZDATA=$NA(^TMP("EZRTEMP",$J,"I",1))
"RTN","EASEZRPU",28,0)
 K @ZDATA
"RTN","EASEZRPU",29,0)
 ;
"RTN","EASEZRPU",30,0)
 S @ZDATA@(2)=$$PROCESS(2.1)                 ;Vet's name
"RTN","EASEZRPU",31,0)
 S @ZDATA@(3)=$E($$PROCESS("3."),1,35)       ;Other names used
"RTN","EASEZRPU",32,0)
 S @ZDATA@(4)=$$PROCESS("4.")                ;Gender
"RTN","EASEZRPU",33,0)
 ;
"RTN","EASEZRPU",34,0)
 S @ZDATA@(5)=$$PROCESS("5.")                ;SSN
"RTN","EASEZRPU",35,0)
 S @ZDATA@(7)=$$PROCESS("7.")                ;Date of birth
"RTN","EASEZRPU",36,0)
 S @ZDATA@("9A")=$E($$PROCESS("9A."),1,35)   ;Address
"RTN","EASEZRPU",37,0)
 S @ZDATA@("9B")=$E($$PROCESS("9B."),1,32)   ;City
"RTN","EASEZRPU",38,0)
 S @ZDATA@("9C")=$$PROCESS("9C.")            ;State
"RTN","EASEZRPU",39,0)
 S @ZDATA@("9D")=$$PROCESS("9D.")            ;Zip
"RTN","EASEZRPU",40,0)
 S @ZDATA@("9E")=$$PROCESS("9E.")            ;County
"RTN","EASEZRPU",41,0)
 S @ZDATA@("9F")=$$PROCESS("9F.")            ;Province    - EAS*1.0*70
"RTN","EASEZRPU",42,0)
 S @ZDATA@("9G")=$$PROCESS("9G.")            ;Postal Code - EAS*1.0*70
"RTN","EASEZRPU",43,0)
 S @ZDATA@("9H")=$$PROCESS("9H.")            ;Country     - EAS*1.0*70
"RTN","EASEZRPU",44,0)
 S @ZDATA@(10)=$$PROCESS("10.1")             ;Home phone
"RTN","EASEZRPU",45,0)
 S @ZDATA@("11A")=$$PROCESS("11A.")          ;E-mail
"RTN","EASEZRPU",46,0)
 S @ZDATA@("11G")=$$PROCESS("11A1.")         ;Cell phone number
"RTN","EASEZRPU",47,0)
 S @ZDATA@("11H")=$$PROCESS("11A3.")         ;Pager number
"RTN","EASEZRPU",48,0)
 S @ZDATA@(12)=$$PROCESS("12.")              ;Marital status
"RTN","EASEZRPU",49,0)
 ;
"RTN","EASEZRPU",50,0)
 K EAX
"RTN","EASEZRPU",51,0)
 F EAX="14J","14K","14L" D     ;Medicare eligible, Enrolled in Part A/B?
"RTN","EASEZRPU",52,0)
 . S EAY=$$PROCESS(EAX_".")
"RTN","EASEZRPU",53,0)
 . S @ZDATA@(EAX)=$S(EAY="Y"!(EAY="YES"):"YES",EAY="N"!(EAY="NO"):"NO",EAY="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZRPU",54,0)
 ;
"RTN","EASEZRPU",55,0)
 S @ZDATA@("14K1")=$$PROCESS("14K1.")   ;Medicare Part A effective date
"RTN","EASEZRPU",56,0)
 S @ZDATA@("14L1")=$$PROCESS("14L1.")   ;Medicare Part B effective date
"RTN","EASEZRPU",57,0)
 S @ZDATA@("14M")=$$PROCESS("14M.")     ;Medicare claim number
"RTN","EASEZRPU",58,0)
 S @ZDATA@("14N")=$$PROCESS("14N.")     ;Name on Medicare card
"RTN","EASEZRPU",59,0)
 ;
"RTN","EASEZRPU",60,0)
 ;Vet's employment status^Date of retirement
"RTN","EASEZRPU",61,0)
 S @ZDATA@("15A")=$$PROCESS("15A.1")_U_$$PROCESS("15A.2")
"RTN","EASEZRPU",62,0)
 K EAX
"RTN","EASEZRPU",63,0)
 S EAX=$E($$PROCESS("15B.1"),1,30)            ;Company's name
"RTN","EASEZRPU",64,0)
 S EACT="",EACT=$E($$PROCESS("15B.3"),1,30)   ;Company's city
"RTN","EASEZRPU",65,0)
 I EACT]"" S EACT=EACT_", "   ;if there's a city, add comma & space
"RTN","EASEZRPU",66,0)
 ;Company's name^Street^City, State Zip^Phone
"RTN","EASEZRPU",67,0)
 S EAX=EAX_U_$E($$PROCESS("15B.2"),1,30)_U_EACT_$$PROCESS("15B.4")_" "_$E($$PROCESS("15B.5"),1,10)_U_$$PROCESS("15B.6")
"RTN","EASEZRPU",68,0)
 S @ZDATA@("15B")=EAX
"RTN","EASEZRPU",69,0)
 ;
"RTN","EASEZRPU",70,0)
 ;Spouse's employment status^Date of retirement
"RTN","EASEZRPU",71,0)
 S @ZDATA@("16A")=$$PROCESS("16A.1")_U_$$PROCESS("16A.2")
"RTN","EASEZRPU",72,0)
 ;
"RTN","EASEZRPU",73,0)
 K EAX
"RTN","EASEZRPU",74,0)
 S EAX=$E($$PROCESS("16B.1"),1,30)            ;Spouse's company's name
"RTN","EASEZRPU",75,0)
 S EACT="",EACT=$E($$PROCESS("16B.3"),1,30)   ;Spouse's company's city
"RTN","EASEZRPU",76,0)
 I EACT]"" S EACT=EACT_", "    ;if there's a city, add comma & space
"RTN","EASEZRPU",77,0)
 ;Spouse's company's name^Street^City, State Zip^Phone
"RTN","EASEZRPU",78,0)
 S EAX=EAX_U_$E($$PROCESS("16B.2"),1,30)_U_EACT_$$PROCESS("16B.4")_" "_$E($$PROCESS("16B.5"),1,10)_U_$$PROCESS("16B.6")
"RTN","EASEZRPU",79,0)
 S @ZDATA@("16B")=EAX
"RTN","EASEZRPU",80,0)
 ;
"RTN","EASEZRPU",81,0)
 S EAX=$$PROCESS("17.")   ;Covered by health insurance?
"RTN","EASEZRPU",82,0)
 S @ZDATA@(17)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZRPU",83,0)
 ;
"RTN","EASEZRPU",84,0)
 S @ZDATA@("17A")=$$PROCESS("17A.")           ;Insurance company's name
"RTN","EASEZRPU",85,0)
 S @ZDATA@("17B")=$E($$PROCESS("17B."),1,30)  ;Name of policy holder
"RTN","EASEZRPU",86,0)
 S @ZDATA@("17C")=$$PROCESS("17C.")           ;Policy number
"RTN","EASEZRPU",87,0)
 S @ZDATA@("17D")=$$PROCESS("17D.")           ;Group code
"RTN","EASEZRPU",88,0)
 ;
"RTN","EASEZRPU",89,0)
 S EACT="",EACT=$$PROCESS("17F.")             ;Insurance company's city
"RTN","EASEZRPU",90,0)
 I EACT]"" S EACT=EACT_", "    ;if there's a city, add comma & space
"RTN","EASEZRPU",91,0)
 ;Insurance company's street^city, state zip
"RTN","EASEZRPU",92,0)
 S @ZDATA@("17E")=$$PROCESS("17E.")_U_EACT_$$PROCESS("17G.")_" "_$$PROCESS("17H.")
"RTN","EASEZRPU",93,0)
 S @ZDATA@("17I")=$$PROCESS("17I.")           ;Insurance company's phone
"RTN","EASEZRPU",94,0)
 ;
"RTN","EASEZRPU",95,0)
 S EACT="",EACT=$E($$PROCESS("19A.4"),1,30)   ;Next-of-kin's city
"RTN","EASEZRPU",96,0)
 I EACT]"" S EACT=EACT_", "    ;if there's a city, add comma & space
"RTN","EASEZRPU",97,0)
 ;Next-of-kin's name^street^city, state zip^relationship
"RTN","EASEZRPU",98,0)
 S @ZDATA@("19A")=$$PROCESS("19A.1")_U_$E($$PROCESS("19A.3"),1,30)_U_EACT_$$PROCESS("19A.5")_" "_$E($$PROCESS("19A.6"),1,10)_U_$$PROCESS("19A.7")
"RTN","EASEZRPU",99,0)
 S @ZDATA@("19B")=$$PROCESS("19B.1")          ;Next-of-kin's home phone
"RTN","EASEZRPU",100,0)
 S @ZDATA@("19C")=$$PROCESS("19C.1")          ;Next-of-kin's work phone
"RTN","EASEZRPU",101,0)
 ;
"RTN","EASEZRPU",102,0)
 S EACT="",EACT=$E($$PROCESS("20A.4"),1,30)   ;Emergency contact's city
"RTN","EASEZRPU",103,0)
 I EACT]"" S EACT=EACT_", "    ;if there's a city, add comma & space
"RTN","EASEZRPU",104,0)
 ;Emergency contact's name^street^city, state zip^relationship
"RTN","EASEZRPU",105,0)
 S @ZDATA@("20A")=$$PROCESS("20A.1")_U_$E($$PROCESS("20A.3"),1,30)_U_EACT_$$PROCESS("20A.5")_" "_$E($$PROCESS("20A.6"),1,10)_U_$$PROCESS("20A.7")
"RTN","EASEZRPU",106,0)
 S @ZDATA@("20B")=$$PROCESS("20B.1")          ;EC's home phone
"RTN","EASEZRPU",107,0)
 S @ZDATA@("20C")=$$PROCESS("20C.1")          ;EC's work phone
"RTN","EASEZRPU",108,0)
 S @ZDATA@("21")=$$PROCESS("21.")             ;Who receives property?
"RTN","EASEZRPU",109,0)
 ;
"RTN","EASEZRPU",110,0)
 S EZDATA=$NA(^TMP("EZRTEMP",$J,"IIC",1))
"RTN","EASEZRPU",111,0)
 S @ZDATA@(999)=$$PROCESS(999)                ;Vet income year
"RTN","EASEZRPU",112,0)
 I $D(@EZDATA@(998)) D
"RTN","EASEZRPU",113,0)
 . S @ZDATA@(998)=$$PROCESS(998)              ;Vet Declines To Give Inf
"RTN","EASEZRPU",114,0)
 ;
"RTN","EASEZRPU",115,0)
 Q
"RTN","EASEZRPU",116,0)
 ;
"RTN","EASEZRPU",117,0)
PAGEI(EAINS) ;  Additional Insurance pages
"RTN","EASEZRPU",118,0)
 ; Called from EN^EASEZRPF
"RTN","EASEZRPU",119,0)
 N ZDATA,EZDATA,EACT
"RTN","EASEZRPU",120,0)
 ;
"RTN","EASEZRPU",121,0)
 S ZDATA=$NA(^TMP("EASEZR",$J,"I",EAINS))
"RTN","EASEZRPU",122,0)
 K @ZDATA
"RTN","EASEZRPU",123,0)
 ;
"RTN","EASEZRPU",124,0)
 ; Process Section IA
"RTN","EASEZRPU",125,0)
 S EZDATA=$NA(^TMP("EZRTEMP",$J,"IA",EAINS))
"RTN","EASEZRPU",126,0)
 ;
"RTN","EASEZRPU",127,0)
 S @ZDATA@("17A")=$$PROCESS("17A.")           ;Insurance company's name
"RTN","EASEZRPU",128,0)
 S @ZDATA@("17B")=$E($$PROCESS("17B."),1,30)  ;Name of policy holder
"RTN","EASEZRPU",129,0)
 S @ZDATA@("17C")=$$PROCESS("17C.")           ;Policy number
"RTN","EASEZRPU",130,0)
 S @ZDATA@("17D")=$$PROCESS("17D.")           ;Group code
"RTN","EASEZRPU",131,0)
 S EACT="",EACT=$$PROCESS("17F.")             ;Insurance company's city
"RTN","EASEZRPU",132,0)
 I EACT]"" S EACT=EACT_", "    ;if there's a street, add comma & space
"RTN","EASEZRPU",133,0)
 ;Health insurance company's street^city, state zip
"RTN","EASEZRPU",134,0)
 S @ZDATA@("17E")=$$PROCESS("17E.")_U_EACT_$$PROCESS("17G.")_" "_$$PROCESS("17H.")
"RTN","EASEZRPU",135,0)
 S @ZDATA@("17I")=$$PROCESS("17I.")           ;Insurance company's phone
"RTN","EASEZRPU",136,0)
 ;
"RTN","EASEZRPU",137,0)
 Q
"RTN","EASEZRPU",138,0)
 ;
"RTN","EASEZRPU",139,0)
PAGEN(EADEP) ;  Additional dependent page(s)
"RTN","EASEZRPU",140,0)
 ; Called from EN^EASEZRPF
"RTN","EASEZRPU",141,0)
 N ZDATA,EZDATA,EAX
"RTN","EASEZRPU",142,0)
 ;
"RTN","EASEZRPU",143,0)
 S ZDATA=$NA(^TMP("EASEZR",$J,"D",EADEP))
"RTN","EASEZRPU",144,0)
 K @ZDATA
"RTN","EASEZRPU",145,0)
 ;
"RTN","EASEZRPU",146,0)
 ; Process Section IIB
"RTN","EASEZRPU",147,0)
 S EZDATA=$NA(^TMP("EZRTEMP",$J,"IIB",EADEP))
"RTN","EASEZRPU",148,0)
 ;
"RTN","EASEZRPU",149,0)
 S @ZDATA@(2)=$$PROCESS(1.1)                      ;Child's name
"RTN","EASEZRPU",150,0)
 S @ZDATA@(5)=$$PROCESS("3.")                     ;Date of birth
"RTN","EASEZRPU",151,0)
 S @ZDATA@(7)=$$PROCESS("2.")                     ;SSN
"RTN","EASEZRPU",152,0)
 S @ZDATA@(9)=$$PROCESS("4.")                     ;Relationship
"RTN","EASEZRPU",153,0)
 S @ZDATA@(11)=$$PROCESS("5.")                    ;Date of dependency
"RTN","EASEZRPU",154,0)
 S EAX=$$PROCESS("6.")                            ;Amount contributed
"RTN","EASEZRPU",155,0)
 S @ZDATA@(12)=U_$S(EAX="":"",1:$J(EAX,0,2))
"RTN","EASEZRPU",156,0)
 S EAX=$$PROCESS("7.")                            ;Education expenses
"RTN","EASEZRPU",157,0)
 S @ZDATA@(13)=$S(EAX="":"",1:$J(EAX,0,2))
"RTN","EASEZRPU",158,0)
 ;
"RTN","EASEZRPU",159,0)
 S EAX=$$PROCESS("8.")                            ;Permanently disabled?
"RTN","EASEZRPU",160,0)
 S @ZDATA@(14)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZRPU",161,0)
 S EAX=$$PROCESS("9.")                            ;School last year?
"RTN","EASEZRPU",162,0)
 S @ZDATA@(15)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZRPU",163,0)
 ;
"RTN","EASEZRPU",164,0)
 Q
"RTN","EASEZRPU",165,0)
 ;
"RTN","EASEZRPU",166,0)
PROCESS(KEY) ; Process data value from EZRTEMP array, take #712 value
"RTN","EASEZRPU",167,0)
 ; if it's accepted, otherwise take the Patient File value
"RTN","EASEZRPU",168,0)
 ;
"RTN","EASEZRPU",169,0)
 N EAV,RSLT
"RTN","EASEZRPU",170,0)
 ;
"RTN","EASEZRPU",171,0)
 I '$D(@EZDATA@(KEY)) G PQ
"RTN","EASEZRPU",172,0)
 S EAV=@EZDATA@(KEY)
"RTN","EASEZRPU",173,0)
 S RSLT=$S(+$P(EAV,U,3):$P(EAV,U,2),1:$P(EAV,U,5))
"RTN","EASEZRPU",174,0)
PQ Q $G(RSLT)
"RTN","EASEZU1")
0^6^B16968808
"RTN","EASEZU1",1,0)
EASEZU1 ;ALB/jap,LBD - Utilities for 1010EZ Processing ; 9/19/12 11:28am
"RTN","EASEZU1",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**107**;Mar 15, 2001;Build 32
"RTN","EASEZU1",3,0)
 ;
"RTN","EASEZU1",4,0)
KEY711(EASKEY) ;get file #711 record associated with key
"RTN","EASEZU1",5,0)
 ;input  EASKEY = character string equal to a 1010EZ Assigned Data Name OR Data Key
"RTN","EASEZU1",6,0)
 ;output KEYIEN = pointer to file #711 for the 1010EZ data element is 1st piece;
"RTN","EASEZU1",7,0)
 ;                format: ien^Assigned Data Name^Data Key
"RTN","EASEZU1",8,0)
 ;                returns ".1" if EASKEY is invalid, i.e., data element is unknown
"RTN","EASEZU1",9,0)
 ;
"RTN","EASEZU1",10,0)
 N N,KEYIEN,X,XX,Y,DA,DIE,DR
"RTN","EASEZU1",11,0)
 S KEYIEN=""
"RTN","EASEZU1",12,0)
 ;key passed in is Data Key
"RTN","EASEZU1",13,0)
 I EASKEY[".",EASKEY[";" D
"RTN","EASEZU1",14,0)
 .S KEYIEN=$O(^EAS(711,"C",EASKEY,0)) Q:'KEYIEN
"RTN","EASEZU1",15,0)
 .S X=$P(^EAS(711,KEYIEN,0),U,1)
"RTN","EASEZU1",16,0)
 .S KEYIEN=KEYIEN_U_X_U_EASKEY
"RTN","EASEZU1",17,0)
 ;key passed in is Assigned Data Name
"RTN","EASEZU1",18,0)
 I KEYIEN="" D
"RTN","EASEZU1",19,0)
 .I $L(EASKEY)>50 D
"RTN","EASEZU1",20,0)
 ..;Fix problem when data passed in EASKEY is > 50 chars. (EAS*1*107)
"RTN","EASEZU1",21,0)
 ..S EASKEY=$E(EASKEY,1,50)
"RTN","EASEZU1",22,0)
 ..I $E(EASKEY,50)=" " S EASKEY=$E(EASKEY,1,49)
"RTN","EASEZU1",23,0)
 .S KEYIEN=$O(^EAS(711,"AB",EASKEY,0)) Q:'KEYIEN
"RTN","EASEZU1",24,0)
 .S X=$P(^EAS(711,KEYIEN,0),U,2)
"RTN","EASEZU1",25,0)
 .S KEYIEN=KEYIEN_U_EASKEY_U_X
"RTN","EASEZU1",26,0)
 I KEYIEN="" S KEYIEN=".1"
"RTN","EASEZU1",27,0)
 Q KEYIEN
"RTN","EASEZU1",28,0)
 ;
"RTN","EASEZU1",29,0)
DATA712(EASAPP,EASKEY,EASMM) ;get 1010EZ data associated with data key
"RTN","EASEZU1",30,0)
 ;input  EASAPP  = ien to #712 for Application
"RTN","EASEZU1",31,0)
 ;       EASKEY  = IEN to file #711;
"RTN","EASEZU1",32,0)
 ;                 OR KEYIEN returned by KEY711^EASEZU1
"RTN","EASEZU1",33,0)
 ;       EASMM   = multiple number; default is 1; optional
"RTN","EASEZU1",34,0)
 ;                 pertains to data elements that may be multiple,
"RTN","EASEZU1",35,0)
 ;                 i.e., additional child dependents
"RTN","EASEZU1",36,0)
 ;                 
"RTN","EASEZU1",37,0)
 ;output    RTR  = piece 1 - 1010EZ data associated with Data Key for this Application;
"RTN","EASEZU1",38,0)
 ;                 piece 2 - subrecord ien associated with Data Key for this Application;
"RTN","EASEZU1",39,0)
 ;                 returns ^ if data item not found in this Application
"RTN","EASEZU1",40,0)
 ;
"RTN","EASEZU1",41,0)
 N N,OUT,KEYIEN,MULTIPLE,X,RTR,IN,UP
"RTN","EASEZU1",42,0)
 I '$D(^EAS(712,EASAPP,0)) Q U
"RTN","EASEZU1",43,0)
 ;this is the "unknown" data element
"RTN","EASEZU1",44,0)
 I EASKEY=.1 Q U
"RTN","EASEZU1",45,0)
 I '$G(EASMM) S EASMM=1
"RTN","EASEZU1",46,0)
 S KEYIEN=+EASKEY
"RTN","EASEZU1",47,0)
 S OUT=0,N=0,X="",RTR=U
"RTN","EASEZU1",48,0)
 F  S N=$O(^EAS(712,EASAPP,10,"B",KEYIEN,N)) Q:'N  D  Q:OUT
"RTN","EASEZU1",49,0)
 .S MULTIPLE=$P($G(^EAS(712,EASAPP,10,N,0)),U,2)
"RTN","EASEZU1",50,0)
 .I MULTIPLE=EASMM D
"RTN","EASEZU1",51,0)
 ..;use 'updated' data if present
"RTN","EASEZU1",52,0)
 ..S X=$G(^EAS(712,EASAPP,10,N,1)),IN=$P(X,U,1),UP=$P(X,U,2)
"RTN","EASEZU1",53,0)
 ..S RTR=$S(UP'="":UP,1:IN),RTR=RTR_U_N,OUT=1
"RTN","EASEZU1",54,0)
 Q RTR
"RTN","EASEZU1",55,0)
 ;
"RTN","EASEZU1",56,0)
LINKUP(EASAPP,EASAEL,EASLINK) ;place link into a file #712 Data Element subrecord
"RTN","EASEZU1",57,0)
 ;input  EASAPP  = ien to #712 for Application
"RTN","EASEZU1",58,0)
 ;       EASAEL  = ien to Data Elements subrecord in #712
"RTN","EASEZU1",59,0)
 ;       EASLINK = file ien OR file_ien;subfile_ien to link 1010EZ data
"RTN","EASEZU1",60,0)
 ;                 with existing Patient database record
"RTN","EASEZU1",61,0)
 ;exit if record/subrecord not valid in #712
"RTN","EASEZU1",62,0)
 N DA,DR,DIE,X,Y
"RTN","EASEZU1",63,0)
 Q:'EASAPP  Q:'$D(^EAS(712,EASAPP,0))
"RTN","EASEZU1",64,0)
 Q:'EASAEL  Q:'$D(^EAS(712,EASAPP,10,EASAEL,0))
"RTN","EASEZU1",65,0)
 ;place link in Data Element subrecord of #712
"RTN","EASEZU1",66,0)
 S DA(1)=EASAPP,DA=EASAEL,DR(1)=10
"RTN","EASEZU1",67,0)
 S DIE="^EAS(712,EASAPP,10,"
"RTN","EASEZU1",68,0)
 S DR="2.1///^S X=EASLINK;"
"RTN","EASEZU1",69,0)
 D ^DIE
"RTN","EASEZU1",70,0)
 Q
"RTN","EASEZU1",71,0)
 ;
"RTN","EASEZU1",72,0)
ADD71201(EASAPP,KEYIEN,LINK,MULTIPLE) ;add another subrecord to #712.01
"RTN","EASEZU1",73,0)
 ;used in cases where Patient data exists but 1010EZ data does not;
"RTN","EASEZU1",74,0)
 ;this new subrecord will hold the VistA database ien(s)
"RTN","EASEZU1",75,0)
 ;
"RTN","EASEZU1",76,0)
 ;input EASAPP = ien to file #712
"RTN","EASEZU1",77,0)
 ;      KEYIEN = ien to file #711 for data element
"RTN","EASEZU1",78,0)
 ;      LINK   = ien(s) in VistA database;
"RTN","EASEZU1",79,0)
 ;               format: ien_main_file;ien_subfile
"RTN","EASEZU1",80,0)
 ;      MULTIPLE = default is 1; (optional)
"RTN","EASEZU1",81,0)
 ;                 currently only needed for additional child dependents
"RTN","EASEZU1",82,0)
 ;                 associated with Section IIB of the form.
"RTN","EASEZU1",83,0)
 ;output NEWIEN = ien to new subrecord in sibfile #712.01
"RTN","EASEZU1",84,0)
 N NEWIEN,LASTIEN,DA,DIC,DIE,DR,DLAYGO,DINUM,X,Y
"RTN","EASEZU1",85,0)
 Q:'KEYIEN
"RTN","EASEZU1",86,0)
 Q:LINK=""
"RTN","EASEZU1",87,0)
 S LASTIEN=$O(^EAS(712,EASAPP,10,9999),-1),NEWIEN=LASTIEN+1
"RTN","EASEZU1",88,0)
 ;create subrecord
"RTN","EASEZU1",89,0)
 S DIC="^EAS(712,EASAPP,10,",DIC(0)="L",DLAYGO="",X=KEYIEN,DINUM=NEWIEN
"RTN","EASEZU1",90,0)
 S DA(1)=EASAPP,DIC("P")=$P(^DD(712,10,0),U,2)
"RTN","EASEZU1",91,0)
 K DD,DO D FILE^DICN
"RTN","EASEZU1",92,0)
 ;file data element link
"RTN","EASEZU1",93,0)
 S DIE="^EAS(712,EASAPP,10,",DA=NEWIEN,DA(1)=EASAPP,DR(1)="10;"
"RTN","EASEZU1",94,0)
 S MULTIPLE=$G(MULTIPLE) S:'MULTIPLE MULTIPLE=1
"RTN","EASEZU1",95,0)
 S DR=".1///^S X=MULTIPLE;2.1///^S X=LINK;"
"RTN","EASEZU1",96,0)
 D ^DIE
"RTN","EASEZU1",97,0)
 Q
"RTN","EASEZU1",98,0)
 ;
"RTN","EASEZU1",99,0)
GETANY(EASAPP,EASDFN,EASAEL,EASKEY) ;get data from VistA database for any field related to 1010EZ
"RTN","EASEZU1",100,0)
 ;input  EASAPP  = ien to #712 for Application
"RTN","EASEZU1",101,0)
 ;       EASDFN  = ien to #2 for Applicant
"RTN","EASEZU1",102,0)
 ;       either EASAEL or EASKEY must be non-null
"RTN","EASEZU1",103,0)
 ;       EASAEL  = ien to Data Elements subrecord in #712; optional
"RTN","EASEZU1",104,0)
 ;       EASKEY  = data key from Data Elements subrecord in #712; optional
"RTN","EASEZU1",105,0)
 ;
"RTN","EASEZU1",106,0)
 ;output     RTR = data obtained from Patient database; external format
"RTN","EASEZU1",107,0)
 ;                 OR -1 if invalid input
"RTN","EASEZU1",108,0)
 ;
"RTN","EASEZU1",109,0)
 ;the "link" below is a pointer (ien) to file or subfile record that
"RTN","EASEZU1",110,0)
 ; was previously found to contain data which potentially matches
"RTN","EASEZU1",111,0)
 ; 1010EZ data 
"RTN","EASEZU1",112,0)
 ;
"RTN","EASEZU1",113,0)
 N X,LINK,N,FILE,SUBFILE,FIELD,ARRAY,DIQ,DA,DR,DIC,RTR
"RTN","EASEZU1",114,0)
 S EASKEY=$G(EASKEY),N=0
"RTN","EASEZU1",115,0)
 I 'EASAEL,EASKEY="" Q -1
"RTN","EASEZU1",116,0)
 I 'EASAEL,EASKEY'="" D
"RTN","EASEZU1",117,0)
 .S EASAEL=$P($$DATA712(EASAPP,EASKEY),U,2) Q:'EASAEL
"RTN","EASEZU1",118,0)
 .S N=$O(^EAS(711,"C",EASKEY,0))
"RTN","EASEZU1",119,0)
 I EASKEY="",EASAEL S N=$P($G(^EAS(712,EASAPP,10,EASAEL,0)),U,1)
"RTN","EASEZU1",120,0)
 I 'N Q -1
"RTN","EASEZU1",121,0)
 ;database parameters in #711
"RTN","EASEZU1",122,0)
 S X=$G(^EAS(711,N,1)),FILE=$P(X,U,1),SUBFILE=$P(X,U,2),FIELD=$P(X,U,3)
"RTN","EASEZU1",123,0)
 ;get link ien if other than file #2
"RTN","EASEZU1",124,0)
 S LINK=$P($G(^EAS(712,EASAPP,10,EASAEL,2)),U,2)
"RTN","EASEZU1",125,0)
 ;if data location is main file #2, then link is dfn
"RTN","EASEZU1",126,0)
 I FILE=2,(SUBFILE=2!SUBFILE="") S LINK=EASDFN
"RTN","EASEZU1",127,0)
 ;
"RTN","EASEZU1",128,0)
 ;if no link to database, quit
"RTN","EASEZU1",129,0)
 I 'LINK Q -1
"RTN","EASEZU1",130,0)
 ;otherwise setup FM call & use link to get data
"RTN","EASEZU1",131,0)
 I (SUBFILE="")!(SUBFILE=FILE) D
"RTN","EASEZU1",132,0)
 .;data in main file
"RTN","EASEZU1",133,0)
 .S DIQ="ARRAY",DIQ(0)="E",DA=LINK,DR=FIELD,DIC=FILE
"RTN","EASEZU1",134,0)
 .D EN^DIQ1
"RTN","EASEZU1",135,0)
 .S RTR=$G(ARRAY(FILE,LINK,FIELD,"E"))
"RTN","EASEZU1",136,0)
 I SUBFILE'="",SUBFILE'=FILE D
"RTN","EASEZU1",137,0)
 .;data in subfile
"RTN","EASEZU1",138,0)
 .;in this case LINK = file_ien;subfile_ien
"RTN","EASEZU1",139,0)
 .S DIQ="ARRAY",DIQ(0)="E",DA=$P(LINK,";",1),DIC=FILE
"RTN","EASEZU1",140,0)
 .;get field # for subfile
"RTN","EASEZU1",141,0)
 .S DR=$O(^DD(FILE,"SB",SUBFILE,0))
"RTN","EASEZU1",142,0)
 .S DR(SUBFILE)=FIELD,DA(SUBFILE)=$P(LINK,";",2)
"RTN","EASEZU1",143,0)
 .D EN^DIQ1
"RTN","EASEZU1",144,0)
 .S RTR=$G(ARRAY(SUBFILE,$P(LINK,";",2),FIELD,"E"))
"RTN","EASEZU1",145,0)
 Q RTR
"VER")
8.0^22.0
**INSTALL NAME**
EAS*1.0*111
"BLD",9509,0)
EAS*1.0*111^ENROLLMENT APPLICATION SYSTEM^0^3150507^y
"BLD",9509,1,0)
^^1^1^3130307^
"BLD",9509,1,1,0)
VFA ESR 3.12 Receive Conversion/Reversal Tests from ES Project.
"BLD",9509,4,0)
^9.64PA^^
"BLD",9509,6.3)
59
"BLD",9509,"ABPKG")
n
"BLD",9509,"INIT")
EN^EAS1111P
"BLD",9509,"KRN",0)
^9.67PA^779.2^20
"BLD",9509,"KRN",.4,0)
.4
"BLD",9509,"KRN",.401,0)
.401
"BLD",9509,"KRN",.402,0)
.402
"BLD",9509,"KRN",.403,0)
.403
"BLD",9509,"KRN",.5,0)
.5
"BLD",9509,"KRN",.84,0)
.84
"BLD",9509,"KRN",3.6,0)
3.6
"BLD",9509,"KRN",3.8,0)
3.8
"BLD",9509,"KRN",9.2,0)
9.2
"BLD",9509,"KRN",9.8,0)
9.8
"BLD",9509,"KRN",9.8,"NM",0)
^9.68A^6^5
"BLD",9509,"KRN",9.8,"NM",2,0)
EASPREC3^^0^B11366491
"BLD",9509,"KRN",9.8,"NM",3,0)
EASPREC6^^0^B83152765
"BLD",9509,"KRN",9.8,"NM",4,0)
EASUM9^^0^B40763985
"BLD",9509,"KRN",9.8,"NM",5,0)
EAS1111P^^0^B24211665
"BLD",9509,"KRN",9.8,"NM",6,0)
EASUM6^^0^B30233395
"BLD",9509,"KRN",9.8,"NM","B","EAS1111P",5)

"BLD",9509,"KRN",9.8,"NM","B","EASPREC3",2)

"BLD",9509,"KRN",9.8,"NM","B","EASPREC6",3)

"BLD",9509,"KRN",9.8,"NM","B","EASUM6",6)

"BLD",9509,"KRN",9.8,"NM","B","EASUM9",4)

"BLD",9509,"KRN",19,0)
19
"BLD",9509,"KRN",19,"NM",0)
^9.68A^^
"BLD",9509,"KRN",19.1,0)
19.1
"BLD",9509,"KRN",101,0)
101
"BLD",9509,"KRN",409.61,0)
409.61
"BLD",9509,"KRN",771,0)
771
"BLD",9509,"KRN",779.2,0)
779.2
"BLD",9509,"KRN",870,0)
870
"BLD",9509,"KRN",8989.51,0)
8989.51
"BLD",9509,"KRN",8989.52,0)
8989.52
"BLD",9509,"KRN",8994,0)
8994
"BLD",9509,"KRN","B",.4,.4)

"BLD",9509,"KRN","B",.401,.401)

"BLD",9509,"KRN","B",.402,.402)

"BLD",9509,"KRN","B",.403,.403)

"BLD",9509,"KRN","B",.5,.5)

"BLD",9509,"KRN","B",.84,.84)

"BLD",9509,"KRN","B",3.6,3.6)

"BLD",9509,"KRN","B",3.8,3.8)

"BLD",9509,"KRN","B",9.2,9.2)

"BLD",9509,"KRN","B",9.8,9.8)

"BLD",9509,"KRN","B",19,19)

"BLD",9509,"KRN","B",19.1,19.1)

"BLD",9509,"KRN","B",101,101)

"BLD",9509,"KRN","B",409.61,409.61)

"BLD",9509,"KRN","B",771,771)

"BLD",9509,"KRN","B",779.2,779.2)

"BLD",9509,"KRN","B",870,870)

"BLD",9509,"KRN","B",8989.51,8989.51)

"BLD",9509,"KRN","B",8989.52,8989.52)

"BLD",9509,"KRN","B",8994,8994)

"BLD",9509,"QDEF")
^^^^^^^^^^YES
"BLD",9509,"QUES",0)
^9.62^^
"BLD",9509,"REQB",0)
^9.611^1^1
"BLD",9509,"REQB",1,0)
EAS*1.0*71^2
"BLD",9509,"REQB","B","EAS*1.0*71",1)

"INIT")
EN^EAS1111P
"MBREQ")
0
"PKG",187,-1)
1^1
"PKG",187,0)
ENROLLMENT APPLICATION SYSTEM^EAS^ENROLLMENT
"PKG",187,20,0)
^9.402P^1^1
"PKG",187,20,1,0)
2^^EASXDR
"PKG",187,20,1,1)
 
"PKG",187,20,"B",2,1)

"PKG",187,22,0)
^9.49I^1^1
"PKG",187,22,1,0)
1.0^3010315^3010321^66481
"PKG",187,22,1,"PAH",1,0)
111^3150507^66481
"PKG",187,22,1,"PAH",1,1,0)
^^1^1^3150507
"PKG",187,22,1,"PAH",1,1,1,0)
VFA ESR 3.12 Receive Conversion/Reversal Tests from ES Project.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
5
"RTN","EAS1111P")
0^5^B24211665
"RTN","EAS1111P",1,0)
EAS1111P ;ALB/PJH,BDB - Post-Install ;03/07/2013 5:00pm
"RTN","EAS1111P",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**111**;07-MAR-13;Build 59
"RTN","EAS1111P",3,0)
 ;
"RTN","EAS1111P",4,0)
 ;Install EAS ESR protocols for Z06
"RTN","EAS1111P",5,0)
 ; protocols are installed enabled and use LLESROUT
"RTN","EAS1111P",6,0)
 ;
"RTN","EAS1111P",7,0)
 ;Follow up patch will add disable text to
"RTN","EAS1111P",8,0)
 ; EAS EDB servers and clients
"RTN","EAS1111P",9,0)
 ;
"RTN","EAS1111P",10,0)
EN ;Post Install entry point
"RTN","EAS1111P",11,0)
 N AN,SLLN,STATION
"RTN","EAS1111P",12,0)
 ; Get site's Station #
"RTN","EAS1111P",13,0)
 S STATION=$P($$SITE^VASITE,"^",3),SLLN="LLESROUT"
"RTN","EAS1111P",14,0)
 S AN("S")="ESR",AN("R")="VAMC "_STATION
"RTN","EAS1111P",15,0)
 D PROTOCOL(STATION,SLLN,.AN)
"RTN","EAS1111P",16,0)
 Q
"RTN","EAS1111P",17,0)
 ;
"RTN","EAS1111P",18,0)
PROTOCOL(STATION,SLLN,AN) ;
"RTN","EAS1111P",19,0)
 ;INPUT STATION = Station #
"RTN","EAS1111P",20,0)
 ; SLLN = Sending Logical Link Name
"RTN","EAS1111P",21,0)
 ; AN = Array containing the Application Names
"RTN","EAS1111P",22,0)
 ;
"RTN","EAS1111P",23,0)
 ;OUTPUT None
"RTN","EAS1111P",24,0)
 ;
"RTN","EAS1111P",25,0)
 ;PURPOSE Using the table in line label PROTDAT create the
"RTN","EAS1111P",26,0)
 ; protocols (Subscriber and Event Driver) for the
"RTN","EAS1111P",27,0)
 ; ESR TCP/IP interfaces
"RTN","EAS1111P",28,0)
 ;
"RTN","EAS1111P",29,0)
 N RESULT,SIEN,V,N,N1,LNCNT,LINE,PROTRET,NAM,STOP
"RTN","EAS1111P",30,0)
 ;
"RTN","EAS1111P",31,0)
 ;ON COMPLETION INCLUDE STATION IN PROTOCOL NAME
"RTN","EAS1111P",32,0)
 S N1="EAS ESR "_STATION_" ",V="2.3.1"
"RTN","EAS1111P",33,0)
 ;
"RTN","EAS1111P",34,0)
 S LNCNT=1,STOP=0
"RTN","EAS1111P",35,0)
 F  S LINE=$T(PROTDAT+LNCNT) Q:$P(LINE,";",3)="END"  D  Q:STOP
"RTN","EAS1111P",36,0)
 . N D,DTXT,RESULT
"RTN","EAS1111P",37,0)
 . S DTXT=""
"RTN","EAS1111P",38,0)
 . F N=3:1 Q:$P(LINE,";",N)="LEND"  S D(N)=$$V($P(LINE,";",N))
"RTN","EAS1111P",39,0)
 . S NAM=D(3)_D(4)_D(5)
"RTN","EAS1111P",40,0)
 . D:NAM["CLIENT"
"RTN","EAS1111P",41,0)
 . . S SIEN=$$SP(NAM,D(6),D(7),D(8),D(9),D(10),D(11))
"RTN","EAS1111P",42,0)
 . . I +SIEN<0 D ERROR(SIEN,"Subscriber:"_NAM)
"RTN","EAS1111P",43,0)
 . D:NAM["SERVER"
"RTN","EAS1111P",44,0)
 . . N TMPNAM,ITEMTXT
"RTN","EAS1111P",45,0)
 . . S TMPNAM=D(6)_D(7)_$P(NAM,"SERVER ",2)
"RTN","EAS1111P",46,0)
 . . S ITEMTXT=$$GETIT(TMPNAM)
"RTN","EAS1111P",47,0)
 . . S RESULT=$$EDP(NAM,D(6),D(7),D(8),D(9),D(10),D(11),D(12),ITEMTXT)
"RTN","EAS1111P",48,0)
 . . I +RESULT<0 D ERROR(RESULT,"Event Driver:"_NAM)
"RTN","EAS1111P",49,0)
 . S LNCNT=LNCNT+1
"RTN","EAS1111P",50,0)
 ;
"RTN","EAS1111P",51,0)
 D BMES^XPDUTL("ESR Z06 Protocols installed with enabled status")
"RTN","EAS1111P",52,0)
 Q
"RTN","EAS1111P",53,0)
 ;
"RTN","EAS1111P",54,0)
ERROR(ERRMSG,SUBJ) ;Display error message and set STOP=1
"RTN","EAS1111P",55,0)
 ;
"RTN","EAS1111P",56,0)
 N ARR
"RTN","EAS1111P",57,0)
 S STOP=1
"RTN","EAS1111P",58,0)
 S ARR(1)="===================================================="
"RTN","EAS1111P",59,0)
 S ARR(2)="= ERROR ="
"RTN","EAS1111P",60,0)
 S ARR(3)="===================================================="
"RTN","EAS1111P",61,0)
 S ARR(4)="When creating "_SUBJ
"RTN","EAS1111P",62,0)
 S ARR(5)="===================================================="
"RTN","EAS1111P",63,0)
 S ARR(6)="**ERROR MSG: "_$P(ERRMSG,"^",2)
"RTN","EAS1111P",64,0)
 ;
"RTN","EAS1111P",65,0)
 D BMES^XPDUTL(.ARR)
"RTN","EAS1111P",66,0)
 ;
"RTN","EAS1111P",67,0)
 Q
"RTN","EAS1111P",68,0)
 ;
"RTN","EAS1111P",69,0)
V(VALUE) ;FUNCTION: If variable then pass back value of it.
"RTN","EAS1111P",70,0)
 ;
"RTN","EAS1111P",71,0)
 I $E(VALUE)="@" Q @($E(VALUE,2,$L(VALUE)))
"RTN","EAS1111P",72,0)
 Q VALUE
"RTN","EAS1111P",73,0)
 ;
"RTN","EAS1111P",74,0)
GETIT(N) ;FUNCTION: Given Message Type and Event Type return the
"RTN","EAS1111P",75,0)
 ; Transmission Description.
"RTN","EAS1111P",76,0)
 Q:N="ORUZ06" "MEANS TEST CONVERTED/REVERSED/Unsolicited ESR to VAMC"
"RTN","EAS1111P",77,0)
 Q ""
"RTN","EAS1111P",78,0)
 ;
"RTN","EAS1111P",79,0)
PROTDAT ;;VAMC SIDE PROTOCOLS
"RTN","EAS1111P",80,0)
 ;;@N1;;ORU-Z06 CLIENT;@SLLN;@AN("R");ACK;;D ORU^EASPREC3;@DTXT;LEND
"RTN","EAS1111P",81,0)
 ;;@N1;;ORU-Z06 SERVER;ORU;Z06;@V;@AN("S");;@SIEN;@DTXT;LEND
"RTN","EAS1111P",82,0)
 ;;END
"RTN","EAS1111P",83,0)
 ;
"RTN","EAS1111P",84,0)
SP(PNAME,LL,RECVAPP,RMSGTYP,REVTTYP,MSGPRTN,DTXT) ;
"RTN","EAS1111P",85,0)
 ;INPUT PNAME = Protocol Name
"RTN","EAS1111P",86,0)
 ; LL = Logical Link Name (ex. "LL VAMC 500")
"RTN","EAS1111P",87,0)
 ; RECVAPP = Receiving Application Name (ex. "VAMC 500")
"RTN","EAS1111P",88,0)
 ; RMSGTYP = Response Message Type (ex. "ACK")
"RTN","EAS1111P",89,0)
 ; REVTTYP = Response Event Type. Usually empty, used more
"RTN","EAS1111P",90,0)
 ; in response to a Query with an ORF message.
"RTN","EAS1111P",91,0)
 ; MSGPRTN = Message Processing Routine - Routine to parse
"RTN","EAS1111P",92,0)
 ; regular transmission of data - MUMPS format
"RTN","EAS1111P",93,0)
 ; (ex. "D ^IVMBORU")
"RTN","EAS1111P",94,0)
 ; DTXT = Disable Text
"RTN","EAS1111P",95,0)
 ;
"RTN","EAS1111P",96,0)
 ;OUTPUT IEN entry (#101) for Subscriber Protocol Success
"RTN","EAS1111P",97,0)
 ; -1^Error Message
"RTN","EAS1111P",98,0)
 ;
"RTN","EAS1111P",99,0)
 ;PURPOSE Create a Subscriber Protocol
"RTN","EAS1111P",100,0)
 ;
"RTN","EAS1111P",101,0)
 N DATA,FILE,RETURN,ERROR,DA,DGENDA
"RTN","EAS1111P",102,0)
 S FILE=101
"RTN","EAS1111P",103,0)
 ; If already exists then skip
"RTN","EAS1111P",104,0)
 ;
"RTN","EAS1111P",105,0)
 S RETURN=+$O(^ORD(101,"B",PNAME,0)) I +$G(RETURN)>0 Q RETURN
"RTN","EAS1111P",106,0)
 ;
"RTN","EAS1111P",107,0)
 S DATA(.01)=PNAME ;PROTOCOL NAME
"RTN","EAS1111P",108,0)
 S DATA(2)="" ;DISABLE TEXT 
"RTN","EAS1111P",109,0)
 S DATA(4)="S"                                ;PROTOCOL TYPE
"RTN","EAS1111P",110,0)
 S DATA(770.11)=$O(^HL(771.2,"B",RMSGTYP,0)) ;RESPONSE MSG TYPE
"RTN","EAS1111P",111,0)
 S DATA(770.2)=$O(^HL(771,"B",RECVAPP,0)) ;RECEIVING APP
"RTN","EAS1111P",112,0)
 S:REVTTYP]"" DATA(770.4)=$O(^HL(779.001,"B",REVTTYP,0)) ;EVENT TYPE
"RTN","EAS1111P",113,0)
 S DATA(770.7)=$O(^HLCS(870,"B",LL,0)) ;LOGICAL LINK
"RTN","EAS1111P",114,0)
 S DATA(771)=MSGPRTN ;MSG PROCESSING RTN
"RTN","EAS1111P",115,0)
 S DATA(773.1)=1 ;SEND FACILITY REQUIRED
"RTN","EAS1111P",116,0)
 S DATA(773.2)=1 ;RECV FACILITY REQUIRED
"RTN","EAS1111P",117,0)
 S RETURN=$$ADD^DGENDBS(FILE,"",.DATA,.ERROR)
"RTN","EAS1111P",118,0)
 S:ERROR'=""!(+RETURN=0) RETURN=-1_"^"_ERROR
"RTN","EAS1111P",119,0)
 Q RETURN
"RTN","EAS1111P",120,0)
 ;
"RTN","EAS1111P",121,0)
EDP(PNAME,MTYP,ETYP,VER,SENDAPP,ACKPRTN,SUBIEN,DTXT,ITEMTXT) ;
"RTN","EAS1111P",122,0)
 ;INPUT PNAME = Protocol Name
"RTN","EAS1111P",123,0)
 ; MTYP = Message Type Name (ex. "ORU")
"RTN","EAS1111P",124,0)
 ; ETYP = Event Type Name (ex. "Z06")
"RTN","EAS1111P",125,0)
 ; VER = HL7 Version # (ex. 2.3.1)
"RTN","EAS1111P",126,0)
 ; SENDAPP = Sending Application Name (ex. "VAMC 290")
"RTN","EAS1111P",127,0)
 ; ACKPRTN = Acknowledgement Processing Routine -
"RTN","EAS1111P",128,0)
 ; Routine to parse an ACK transmission - 
"RTN","EAS1111P",129,0)
 ; MUMPs format (ex. "D ^IVMBACK")
"RTN","EAS1111P",130,0)
 ; SUBIEN = IEN of Subscriber Protocol in ^ORD(101)
"RTN","EAS1111P",131,0)
 ; DTXT = Disable Text
"RTN","EAS1111P",132,0)
 ; ITEMTXT = Item Text
"RTN","EAS1111P",133,0)
 ;
"RTN","EAS1111P",134,0)
 ;OUTPUT IEN entry (#101) of Event Driver Protocol Success
"RTN","EAS1111P",135,0)
 ; -1^Error Message Error
"RTN","EAS1111P",136,0)
 ;
"RTN","EAS1111P",137,0)
 ;PURPOSE Create an Event Driver Protocol and the Sub-File to
"RTN","EAS1111P",138,0)
 ; contain pointers to the Subscriber Protocol file
"RTN","EAS1111P",139,0)
 ;
"RTN","EAS1111P",140,0)
 N DATA,FILE,DGENDA,RETURN,ERROR,DA
"RTN","EAS1111P",141,0)
 S FILE=101
"RTN","EAS1111P",142,0)
 ; If already exists then skip
"RTN","EAS1111P",143,0)
 ; 
"RTN","EAS1111P",144,0)
 S RETURN=+$O(^ORD(101,"B",PNAME,0)) I +$G(RETURN)>0 Q RETURN
"RTN","EAS1111P",145,0)
 ;
"RTN","EAS1111P",146,0)
 S DATA(.01)=PNAME ;PROTOCOL NAME
"RTN","EAS1111P",147,0)
 S DATA(1)=ITEMTXT ;ITEM TEXT
"RTN","EAS1111P",148,0)
 S DATA(2)="" ;DISABLE TEXT
"RTN","EAS1111P",149,0)
 S DATA(4)="E"                                ;PROTOCOL TYPE
"RTN","EAS1111P",150,0)
 S DATA(5)=+$G(DUZ) ;CREATOR
"RTN","EAS1111P",151,0)
 S DATA(770.1)=$O(^HL(771,"B",SENDAPP,0)) ;SENDING APP
"RTN","EAS1111P",152,0)
 S DATA(770.3)=$O(^HL(771.2,"B",MTYP,0)) ;MSG TYPE
"RTN","EAS1111P",153,0)
 S DATA(770.4)=$O(^HL(779.001,"B",ETYP,0)) ;EVENT TYPE
"RTN","EAS1111P",154,0)
 S DATA(770.8)=$O(^HL(779.003,"B","AL",0)) ;ACCEPT ACK CODE
"RTN","EAS1111P",155,0)
 S DATA(770.9)=$O(^HL(779.003,"B","AL",0)) ;APPLICATION ACK TYPE
"RTN","EAS1111P",156,0)
 S DATA(770.95)=$O(^HL(771.5,"B",VER,0)) ;VERSION ID
"RTN","EAS1111P",157,0)
 S DATA(772)=ACKPRTN ;ACK PROCESSING RTN
"RTN","EAS1111P",158,0)
 S RETURN=$$ADD^DGENDBS(FILE,"",.DATA,.ERROR)
"RTN","EAS1111P",159,0)
 I ERROR'=""!(+RETURN=0) S RETURN=-1_"^"_ERROR G EDPEXIT
"RTN","EAS1111P",160,0)
 S DGENDA(1)=RETURN
"RTN","EAS1111P",161,0)
 ;
"RTN","EAS1111P",162,0)
 ; ADD SUBSCRIBER SUB-FILE TO EVENT DRIVER PROTOCOL
"RTN","EAS1111P",163,0)
 S FILE=101.0775
"RTN","EAS1111P",164,0)
 K DATA
"RTN","EAS1111P",165,0)
 S DATA(.01)=SUBIEN
"RTN","EAS1111P",166,0)
 S RETURN=$$ADD^DGENDBS(FILE,.DGENDA,.DATA,.ERROR)
"RTN","EAS1111P",167,0)
 S:ERROR'=""!(+RETURN=0) RETURN=-1_"^"_ERROR
"RTN","EAS1111P",168,0)
 ;
"RTN","EAS1111P",169,0)
EDPEXIT Q RETURN
"RTN","EAS1111P",170,0)
 ;
"RTN","EASPREC3")
0^2^B11366491
"RTN","EASPREC3",1,0)
EASPREC3 ;ALB/PJH,BDB,MNH - PROCESS INCOMING HL7 (QRY) MESSAGES ;11/27/07 3:04pm
"RTN","EASPREC3",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**71,111**;15-MAR-01;Build 59
"RTN","EASPREC3",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","EASPREC3",4,0)
 ;
"RTN","EASPREC3",5,0)
 ; CLONED FROM IVMPREC2 (ESR EVENT DRIVER)
"RTN","EASPREC3",6,0)
 ;
"RTN","EASPREC3",7,0)
 ; This routine will process (ORU) HL7 messages received from the
"RTN","EASPREC3",8,0)
 ; IVM center. Event type code indicating type of transmission is
"RTN","EASPREC3",9,0)
 ; in the BHS segment. Routines based on type will be called to
"RTN","EASPREC3",10,0)
 ; process these messages. For each batch an ACK will be sent to
"RTN","EASPREC3",11,0)
 ; the IVM Center indicating errors found. If any errors are found
"RTN","EASPREC3",12,0)
 ; a batch message with AE(indicating error(s)) is sent. If no errors
"RTN","EASPREC3",13,0)
 ; only a MSH and MSA with AA(no errors) is sent. The following event
"RTN","EASPREC3",14,0)
 ; type codes are processed in the following routines:
"RTN","EASPREC3",15,0)
 ;
"RTN","EASPREC3",16,0)
 ; EVENT CODE TRANSMISSION TYPE PROCESSING ROUTINE
"RTN","EASPREC3",17,0)
 ; ==============================================================
"RTN","EASPREC3",18,0)
 ; Z03 SSN TRANSMISSIONS IVMPREC5
"RTN","EASPREC3",19,0)
 ; Z04 INSURANCE TRANSMISSIONS IVMPREC3
"RTN","EASPREC3",20,0)
 ; Z05 DEMOGRAPHIC TRANSMISSIONS IVMPREC6
"RTN","EASPREC3",21,0)
 ; Z06 MEANS TEST TRANSMISSIONS EASPREC6
"RTN","EASPREC3",22,0)
 ; Z08 CASE STATUS TRANSMISSIONS IVMPREC4
"RTN","EASPREC3",23,0)
 ; Z10 INCOME TEST TRANSMISSIONS IVMCM
"RTN","EASPREC3",24,0)
 ; Z11 ENROLLMENT/ELIGIBILTY ORUZ11^DGENUPL
"RTN","EASPREC3",25,0)
 ;
"RTN","EASPREC3",26,0)
 ;
"RTN","EASPREC3",27,0)
ORU ; - Receive Observational Results Unsolicited Message
"RTN","EASPREC3",28,0)
 ;
"RTN","EASPREC3",29,0)
 N DIC,%,%H,%I D NOW^%DTC S HLDT=%
"RTN","EASPREC3",30,0)
 K HLERR,IVMSEG1,IVMSEG2,IVMSEG3
"RTN","EASPREC3",31,0)
 S (HLEVN,IVMCT,IVMERROR,IVMCNTR)=0
"RTN","EASPREC3",32,0)
 ; Make sure POSTMASTER DUZ instead of DUZ of Person who
"RTN","EASPREC3",33,0)
 ; started Incoming Logical Link
"RTN","EASPREC3",34,0)
 S DUZ=.5
"RTN","EASPREC3",35,0)
 ;
"RTN","EASPREC3",36,0)
 ; - get incoming segment from HL7 (#772) file
"RTN","EASPREC3",37,0)
 N IVMRTN,SEGCNT,CNT,STATION,HLEID,HLEIDS
"RTN","EASPREC3",38,0)
 S IVMRTN="IVMPREC2" K ^TMP($J,IVMRTN),^TMP("HLA",$J),^TMP("HLS",$J)
"RTN","EASPREC3",39,0)
 F SEGCNT=1:1 X HLNEXT Q:HLQUIT'>0  D
"RTN","EASPREC3",40,0)
 . S CNT=0
"RTN","EASPREC3",41,0)
 . S ^TMP($J,IVMRTN,SEGCNT,CNT)=HLNODE
"RTN","EASPREC3",42,0)
 . F  S CNT=$O(HLNODE(CNT)) Q:'CNT  S ^TMP($J,IVMRTN,SEGCNT,CNT)=HLNODE(CNT)
"RTN","EASPREC3",43,0)
 ;
"RTN","EASPREC3",44,0)
 S HLDA=HLMTIEN
"RTN","EASPREC3",45,0)
 S IVMSEG=$G(^TMP($J,IVMRTN,1,0)) I IVMSEG']"" G ORUQ
"RTN","EASPREC3",46,0)
 ;
"RTN","EASPREC3",47,0)
 ; - check for BHS 
"RTN","EASPREC3",48,0)
 I $E(IVMSEG,1,3)'="BHS" G ORUQ
"RTN","EASPREC3",49,0)
 ;
"RTN","EASPREC3",50,0)
 ; - get batch control id
"RTN","EASPREC3",51,0)
 S HLFS=HL("FS")
"RTN","EASPREC3",52,0)
 S HLECH=HL("ECH")
"RTN","EASPREC3",53,0)
 S HLQ=$G(HL("HLQ")) S:HLQ="" HLQ=""""""
"RTN","EASPREC3",54,0)
 S IVMHLMID=$P(IVMSEG,HLFS,11)
"RTN","EASPREC3",55,0)
 S STATION=$P(IVMSEG,HLFS,6)
"RTN","EASPREC3",56,0)
 ;
"RTN","EASPREC3",57,0)
 ; - get event type code
"RTN","EASPREC3",58,0)
 S IVMETC=$P($P(IVMSEG,HLFS,9),$E(HLECH),3)
"RTN","EASPREC3",59,0)
 S IVMETC=$P(IVMETC,$E(HLECH,2),2)
"RTN","EASPREC3",60,0)
 S HLEID="EAS ESR "_STATION_" ORU-"_IVMETC_" SERVER"
"RTN","EASPREC3",61,0)
 I IVMETC="Z04" S HLEID=HLEID_" H"  ;HEC TO VAMC
"RTN","EASPREC3",62,0)
 S HLEID=$O(^ORD(101,"B",HLEID,0)),HLEIDS=""
"RTN","EASPREC3",63,0)
 I HLEID]"" S HLEIDS=$O(^ORD(101,HLEID,775,"B",0))
"RTN","EASPREC3",64,0)
 ;
"RTN","EASPREC3",65,0)
 ; - process the message according to the event type code
"RTN","EASPREC3",66,0)
 ;ADD Z06 EAS*1.0*111
"RTN","EASPREC3",67,0)
 S IVMDO=$S(IVMETC="Z03":"EN^IVMPREC5",IVMETC="Z04":"EN^IVMPREC3",IVMETC="Z05":"EN^IVMPREC6",IVMETC="Z06":"EN^EASPREC6",IVMETC="Z08":"EN^IVMPREC4",IVMETC="Z10":"ORU^IVMCM",IVMETC="Z11":"ORUZ11^DGENUPL",1:"ORUQ")
"RTN","EASPREC3",68,0)
 I IVMETC="Z11" D
"RTN","EASPREC3",69,0)
 .D ORUZ11^DGENUPL(HLDA,.IVMERROR)
"RTN","EASPREC3",70,0)
 .S IVMCT=2*IVMERROR
"RTN","EASPREC3",71,0)
 .S HLEVN=IVMERROR
"RTN","EASPREC3",72,0)
 I IVMETC'="Z11" D
"RTN","EASPREC3",73,0)
 .D @IVMDO
"RTN","EASPREC3",74,0)
 Q:IVMDO="ORUQ" 
"RTN","EASPREC3",75,0)
 ;
"RTN","EASPREC3",76,0)
 ; - if no error send ACK 'AA' message
"RTN","EASPREC3",77,0)
 S HLMTN="ACK"
"RTN","EASPREC3",78,0)
 K HLARYTYP,HLMTIENA,HLRESLTA,HLP
"RTN","EASPREC3",79,0)
 I 'IVMERROR S HLMID=IVMHLMID D ACK^IVMPREC S HLARYTYP="GM",HLMTIENA=""
"RTN","EASPREC3",80,0)
 I IVMERROR S HLARYTYP="GB",HLMTIENA=HLMTIEN  ;HLMTIEN comes from ACK^IVMPREC
"RTN","EASPREC3",81,0)
 K ^TMP("HLA",$J) M ^TMP("HLA",$J)=^TMP("HLS",$J) K ^TMP("HLS",$J)
"RTN","EASPREC3",82,0)
 D GENACK^HLMA1(HLEID,HLMTIENS,HLEIDS,HLARYTYP,1,.HLRESLTA,HLMTIENA,.HLP)
"RTN","EASPREC3",83,0)
 ; The following line is added for PFSS Registration. This line will ensure any patient 
"RTN","EASPREC3",84,0)
 ; registration updates received from the HEC are forwarded to a COTS billing application
"RTN","EASPREC3",85,0)
 ; See DBIA#4780 - this line will need re enabling if PFSS is active 
"RTN","EASPREC3",86,0)
 ;S X="DGPFSS1" X ^%ZOSF("TEST") I $T D SEND^DGPFSS1(DFN,0)
"RTN","EASPREC3",87,0)
 ;
"RTN","EASPREC3",88,0)
ORUQ ;
"RTN","EASPREC3",89,0)
 ;
"RTN","EASPREC3",90,0)
 K DFN,IVMCNTR,IVMCT,IVMDA,IVMERR,IVMERROR,IVMHLMID,IVMNDE,IVMPTID
"RTN","EASPREC3",91,0)
 K IVMSEG,IVMSEG1,IVMSEG2,IVMSEG3,IVMTEXT,XMSUB
"RTN","EASPREC3",92,0)
 K HLARYTYP,HLMTIENA,HLRESLTA,HLP
"RTN","EASPREC3",93,0)
 K ^TMP($J,IVMRTN),^TMP("HLA",$J),^TMP("HLS",$J)
"RTN","EASPREC3",94,0)
 Q
"RTN","EASPREC6")
0^3^B83152765
"RTN","EASPREC6",1,0)
EASPREC6 ;ALB/BD,MNH,LMD - ROUTINE TO PROCESS INCOMING (Z06 EVENT TYPE) HL7 MESSAGES ;6/16/04 9:28am
"RTN","EASPREC6",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**111**;21-OCT-94;Build 59
"RTN","EASPREC6",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","EASPREC6",4,0)
 ;
"RTN","EASPREC6",5,0)
 ;** Warning ** currently only one ZMT seg per Z06 can be processed.
"RTN","EASPREC6",6,0)
 ;
"RTN","EASPREC6",7,0)
 ; - added DGMTYPT and passed down thru all calls that need.
"RTN","EASPREC6",8,0)
 ; o DGMTYPT = 1 (Means Test, MT)
"RTN","EASPREC6",9,0)
 ; o DGMTYPT = 2 (RX Copay Test, CT)
"RTN","EASPREC6",10,0)
 ;
"RTN","EASPREC6",11,0)
 ; This routine will process (validate) batch ORU Means Test(event type
"RTN","EASPREC6",12,0)
 ; Z06) HL7 messages received from the IVM center. Format of batch:
"RTN","EASPREC6",13,0)
 ; BHS
"RTN","EASPREC6",14,0)
 ; {MSH
"RTN","EASPREC6",15,0)
 ; PID
"RTN","EASPREC6",16,0)
 ; ZIC
"RTN","EASPREC6",17,0)
 ; ZIR
"RTN","EASPREC6",18,0)
 ; {ZDP
"RTN","EASPREC6",19,0)
 ; ZIC
"RTN","EASPREC6",20,0)
 ; ZIR
"RTN","EASPREC6",21,0)
 ; }
"RTN","EASPREC6",22,0)
 ; ZMT
"RTN","EASPREC6",23,0)
 ; ZIV
"RTN","EASPREC6",24,0)
 ; }
"RTN","EASPREC6",25,0)
 ; BTS
"RTN","EASPREC6",26,0)
 ;
"RTN","EASPREC6",27,0)
EN ; entry point to validate Means Test messages 
"RTN","EASPREC6",28,0)
 ;
"RTN","EASPREC6",29,0)
 N DEPFLG,EDB,CANCFLG,CASEFLG,SEGSTR,SEGMENTS,MISSING,ERRFLG,Z06COM
"RTN","EASPREC6",30,0)
 N IVM2,IVM3,IVM7,IVM8,IVM10,IVM12,IVM17,IVM18,IVM20,IVM25,IVM26,IVMIY
"RTN","EASPREC6",31,0)
 N IVMDA,IVMPAT,IVMMTSTS,MTFND,UPMTS,MTDATE,TYPE,EASMTDT,EASZ06,EXPIRED
"RTN","EASPREC6",32,0)
 N IVM5,EASZ06D,DGMTYPT
"RTN","EASPREC6",33,0)
 S SEGSTR="00000000000"      ;One byte for each segment in message
"RTN","EASPREC6",34,0)
 S SEGMENTS="BHS,MSH,PID,PID,ZIC,ZIR,ZDP,ZIC,ZIR,ZMT,ZIV,BTS"
"RTN","EASPREC6",35,0)
 S Z06COM="Z06 MT via Edb"
"RTN","EASPREC6",36,0)
 S (CASEFLG,DEPFLG,ERRFLG,HLERR,IVMDA,IVMFLGC,MTFND,UPMTS)=0
"RTN","EASPREC6",37,0)
EN1 F  S IVMDA=$O(^TMP($J,IVMRTN,IVMDA)) Q:'IVMDA  D  I $D(HLERR) D ACK^IVMPREC S ERRFLG=1 Q 
"RTN","EASPREC6",38,0)
 .K HLERR
"RTN","EASPREC6",39,0)
 .D GET
"RTN","EASPREC6",40,0)
 .D @IVMSEG1                            ;process each segment type
"RTN","EASPREC6",41,0)
 Q:ERRFLG                               ;Error detected do not continue
"RTN","EASPREC6",42,0)
 S MISSING=$F(SEGSTR,0) ;Ensure all required segments
"RTN","EASPREC6",43,0)
 I MISSING D  I $D(HLERR) D ACK^IVMPREC,CLEANUP Q
"RTN","EASPREC6",44,0)
 . S TYPE=$S(MISSING=3!(MISSING=4):"Veteran's",MISSING>4&(MISSING<8):"Spouse's",1:"")
"RTN","EASPREC6",45,0)
 . S HLERR="Missing "_TYPE_" "_$P(SEGMENTS,",",(MISSING-1))_" Segment"
"RTN","EASPREC6",46,0)
 D PROCESS
"RTN","EASPREC6",47,0)
 I $D(HLERR) D ACK^IVMPREC
"RTN","EASPREC6",48,0)
 ; cleanup
"RTN","EASPREC6",49,0)
CLEANUP K DGLY,DGMTP,IVMDAP,IVMDAS,IVMDAZ,IVMDGLY,CANCFLG,IVMFLGC,IVMMT31
"RTN","EASPREC6",50,0)
 K IVMMTDT,IVMMTIEN,IVMSEG,IVMSEG1,IVMSTAT,IVMTEXT,XMSUB,HLERR,CLOSFLG
"RTN","EASPREC6",51,0)
 K IVMZ10,IVMDAV,ZIVSEG,ZMTSEG
"RTN","EASPREC6",52,0)
 Q
"RTN","EASPREC6",53,0)
 ;
"RTN","EASPREC6",54,0)
 ;Dependent upon type of Z06 sent perform the following;
"RTN","EASPREC6",55,0)
 ;IVM Case Status:
"RTN","EASPREC6",56,0)
 ; Value of 1 = Create/Update Z06 MT/CT, Close Case & Mark REASON CODE
"RTN","EASPREC6",57,0)
 ; as 'Converted'
"RTN","EASPREC6",58,0)
 ; Value of 0 = Cancel Z06 MT/CT and Mark REASON CODE as 'Not Convert'
"RTN","EASPREC6",59,0)
 ;
"RTN","EASPREC6",60,0)
 ; If Z06 MT/CT and IVM Case Status is 1 and Z06 MT/CT doesn't exist then
"RTN","EASPREC6",61,0)
 ; Create new Z06 MT/CT (new Z06 MT/CT becomes primary and existing
"RTN","EASPREC6",62,0)
 ; MT/CT becomes non-primary)
"RTN","EASPREC6",63,0)
 ; Assign REASON CODE of 'Converted' in #301.5
"RTN","EASPREC6",64,0)
 ; If Z06 MT/CT already exists then
"RTN","EASPREC6",65,0)
 ; If IVM Case Status is 0 Then
"RTN","EASPREC6",66,0)
 ; Delete Z06 MT/CT for income year and return old MT/CT to primary
"RTN","EASPREC6",67,0)
 ; Change REASON CODE from 'Converted' to 'Not Converted' in #301.5
"RTN","EASPREC6",68,0)
 ; If IVM Case Status is 1 Then
"RTN","EASPREC6",69,0)
 ; Update MT/CT Z06 and Close/Convert Case
"RTN","EASPREC6",70,0)
 ; Else (Z06 MT/CT, IVM Case Status=0 and Z06 MT/CT does not exist)
"RTN","EASPREC6",71,0)
 ; Send back 'AE' to Edb indicating MT/CT Z06 not available for 
"RTN","EASPREC6",72,0)
 ; cancellation
"RTN","EASPREC6",73,0)
 ;
"RTN","EASPREC6",74,0)
PROCESS N DIC,%,%H,%I,IVMDATE
"RTN","EASPREC6",75,0)
 D NOW^%DTC
"RTN","EASPREC6",76,0)
 S IVMDATE=%
"RTN","EASPREC6",77,0)
 I '$D(ZMTSEG) S HLERR="ZMT Segment is Missing" Q
"RTN","EASPREC6",78,0)
 S EASZ06=1,EXPIRED=0
"RTN","EASPREC6",79,0)
 S:DGMTYPT=2 IVMCEB=$P($$RXST^IBARXEU(DFN),"^",2) ;prev RX sts
"RTN","EASPREC6",80,0)
 I $G(IVMMTIEN)="" D  ; Find any primary for the same year/test type
"RTN","EASPREC6",81,0)
 . S CURMT=$$LST^DGMTU(DFN,IVMMTDT,DGMTYPT)
"RTN","EASPREC6",82,0)
 . I $E($P(CURMT,U,2),1,3)'=$E(IVMMTDT,1,3) Q  ;TMK
"RTN","EASPREC6",83,0)
 . S IVMMTIEN=$P(CURMT,"^",1)
"RTN","EASPREC6",84,0)
 . S IVMMTDT=$P(CURMT,"^",2)
"RTN","EASPREC6",85,0)
 . S IVMMTSTS=$P(CURMT,"^",3)
"RTN","EASPREC6",86,0)
 I $G(IVMMTIEN)]"" D                   ;dgmtp is event driver variable
"RTN","EASPREC6",87,0)
 . S (IVMMT31,DGMTP)=$G(^DGMT(408.31,IVMMTIEN,0))
"RTN","EASPREC6",88,0)
 ;
"RTN","EASPREC6",89,0)
 ; No previous 408.31 test on file
"RTN","EASPREC6",90,0)
 I 'MTFND D  Q
"RTN","EASPREC6",91,0)
 . I CASEFLG D                                ;Case=1 Close/Converted
"RTN","EASPREC6",92,0)
 . . ;change old MT/CT to non-primary
"RTN","EASPREC6",93,0)
 . . I $G(IVMMTIEN)>0 D
"RTN","EASPREC6",94,0)
 . . . S DA=IVMMTIEN,DIE="^DGMT(408.31,",DR="2////0;"
"RTN","EASPREC6",95,0)
 . . . D ^DIE K DA,DIE,DR
"RTN","EASPREC6",96,0)
 . . ;
"RTN","EASPREC6",97,0)
 . . S IVMMTDT=EASMTDT
"RTN","EASPREC6",98,0)
 . . D ^EASUM6 ;Copied from EASUM1 Create New Z06 MT/CT
"RTN","EASPREC6",99,0)
 . . I $G(IVMMTDT)="" S IVMMTDT=EASMTDT
"RTN","EASPREC6",100,0)
 . . I $$EXPIRED^EASPTRN1(DFN,$G(IVMMTDT)) D
"RTN","EASPREC6",101,0)
 . . . S EXPIRED=1,IVMZ10="UPLOAD IN PROGRESS"
"RTN","EASPREC6",102,0)
 . . D CLOSE(IVMIY,DFN,1,6) ;Close Case/Converted
"RTN","EASPREC6",103,0)
 . ;
"RTN","EASPREC6",104,0)
 . I 'CASEFLG D  Q
"RTN","EASPREC6",105,0)
 . . S:DGMTYPT=1 HLERR="Existing Z06 MT not found"
"RTN","EASPREC6",106,0)
 . . S:DGMTYPT=2 HLERR="Existing Z06 CT not found"
"RTN","EASPREC6",107,0)
 ;
"RTN","EASPREC6",108,0)
 ; Previous 408.31 test on file
"RTN","EASPREC6",109,0)
 I MTFND D
"RTN","EASPREC6",110,0)
 . I 'CASEFLG D                             ;Case=0 Close/Not Convert
"RTN","EASPREC6",111,0)
 . . ; Check to see if MT/CT Z06 exists prior to trying to delete
"RTN","EASPREC6",112,0)
 . . ; If NOT defined then send an AE back to Edb
"RTN","EASPREC6",113,0)
 . . I 'UPMTS D  Q                          ;Existing Z06 not found
"RTN","EASPREC6",114,0)
 . . . S:DGMTYPT=1 HLERR="Existing Z06 MT not found"
"RTN","EASPREC6",115,0)
 . . . S:DGMTYPT=2 HLERR="Existing Z06 CT not found"
"RTN","EASPREC6",116,0)
 . . I UPMTS D  Q
"RTN","EASPREC6",117,0)
 . . . N CURMT,IVMMTI,IVMDFN,DGCAT
"RTN","EASPREC6",118,0)
 . . . S IVMDFN=DFN                         ;Save off DFN
"RTN","EASPREC6",119,0)
 . . . I $$EXPIRED^EASPTRN1(DFN,$G(IVMMTDT)) D
"RTN","EASPREC6",120,0)
 . . . . S EXPIRED=1,IVMZ10="UPLOAD IN PROGRESS"
"RTN","EASPREC6",121,0)
 . . . S DGCAT=$P($G(^DG(408.32,IVM3,0)),"^",1),IVM5=""
"RTN","EASPREC6",122,0)
 . . . S EASZ06D=1 ;Set del flag for IB event
"RTN","EASPREC6",123,0)
 . . . D ^EASUM9 ;Delete Z06 MT/CT
"RTN","EASPREC6",124,0)
 . . . S DFN=IVMDFN
"RTN","EASPREC6",125,0)
 . . . I $G(IVMMTDT)="" S IVMMTDT=EASMTDT
"RTN","EASPREC6",126,0)
 . . . D CLOSE(IVMIY,DFN,1,7) ;Close Case/Not Converted
"RTN","EASPREC6",127,0)
 . ;
"RTN","EASPREC6",128,0)
 . I CASEFLG D                              ;Case=1 Close/Converted
"RTN","EASPREC6",129,0)
 . . Q:$G(IVMMTIEN)<1
"RTN","EASPREC6",130,0)
 . . S DA=IVMMTIEN,DIE="^DGMT(408.31,"
"RTN","EASPREC6",131,0)
 . . S DR=".03////^S X=IVM3;.12////^S X=IVM8;.07////^S X=IVM10;"
"RTN","EASPREC6",132,0)
 . . S DR=DR_".09////^S X=IVM25;.11////^S X=IVM7;.18////^S X=IVM12;"
"RTN","EASPREC6",133,0)
 . . S DR=DR_".23////^S X=IVM18;.25////^S X=IVM20;"
"RTN","EASPREC6",134,0)
 . . S DR=DR_"2.02////^S X=IVMDATE;2.03////^S X=IVM26;"
"RTN","EASPREC6",135,0)
 . . D ^DIE K DA,DIE,DR                     ;Update existing Z06
"RTN","EASPREC6",136,0)
 . . I $G(IVMMTDT)="" S IVMMTDT=EASMTDT
"RTN","EASPREC6",137,0)
 . . I $$EXPIRED^EASPTRN1(DFN,$G(IVMMTDT)) D
"RTN","EASPREC6",138,0)
 . . . S EXPIRED=1,IVMZ10="UPLOAD IN PROGRESS"
"RTN","EASPREC6",139,0)
 . . D CLOSE(IVMIY,DFN,1,6) ;Close Case/Converted
"RTN","EASPREC6",140,0)
 . . S DGCAT=$P($G(^DG(408.32,IVM3,0)),"^",1),IVM5=""
"RTN","EASPREC6",141,0)
 . . D MTBULL^EASUM9,MAIL^IVMUFNC() ;Send Bulletin
"RTN","EASPREC6",142,0)
 Q
"RTN","EASPREC6",143,0)
 ;
"RTN","EASPREC6",144,0)
MSH S (HLMID,MSGID)=$P(IVMSEG,HLFS,10) ;Message control id from MSH
"RTN","EASPREC6",145,0)
 Q
"RTN","EASPREC6",146,0)
PID ;Handle wrapped PID segment
"RTN","EASPREC6",147,0)
 N I,IVMPID,PIDSTR,COMP,CNTR,NOPID,TMPARY,PID3ARY,CNTR2
"RTN","EASPREC6",148,0)
 S CNTR=1,NOPID=0,PIDSTR(CNTR)=$P(IVMSEG,"^",2,999)
"RTN","EASPREC6",149,0)
 F  D  Q:NOPID
"RTN","EASPREC6",150,0)
 .S IVMDA=$O(^TMP($J,IVMRTN,IVMDA)),IVMSEG=$G(^(+IVMDA,0))
"RTN","EASPREC6",151,0)
 .I $E(IVMSEG,1,4)="ZIC^" S NOPID=1,IVMDA=IVMDA-1 Q
"RTN","EASPREC6",152,0)
 .S CNTR=CNTR+1,PIDSTR(CNTR)=IVMSEG
"RTN","EASPREC6",153,0)
 .S SEGSTR=$E(SEGSTR,1,IVMDA-1)_"1"_$E(SEGSTR,IVMDA,$L(SEGSTR)) ;Extend SEGSTR for wrapped PID
"RTN","EASPREC6",154,0)
 D BLDPID^IVMPREC6(.PIDSTR,.IVMPID) ;Create IVMPID subscripted by seq #
"RTN","EASPREC6",155,0)
 ;convert "" to null for PID segment
"RTN","EASPREC6",156,0)
 S CNTR="" F  S CNTR=$O(IVMPID(CNTR)) Q:CNTR=""  D
"RTN","EASPREC6",157,0)
 .I $O(IVMPID(CNTR,"")) D  Q
"RTN","EASPREC6",158,0)
 ..S CNTR2="" F  S CNTR2=$O(IVMPID(CNTR,CNTR2)) Q:CNTR2=""  D
"RTN","EASPREC6",159,0)
 ...S IVMPID(CNTR,CNTR2)=$$CLEARF^IVMPRECA(IVMPID(CNTR,CNTR2),$E(HLECH))
"RTN","EASPREC6",160,0)
 .I IVMPID(CNTR)=HLQ S IVMPID(CNTR)=""
"RTN","EASPREC6",161,0)
 M TMPARY(3)=IVMPID(3) D PARSPID3^IVMUFNC(.TMPARY,.PID3ARY)
"RTN","EASPREC6",162,0)
 S DFN=$G(PID3ARY("PI")),ICN=$G(PID3ARY("NI"))
"RTN","EASPREC6",163,0)
 K TMPARY,PID3ARY
"RTN","EASPREC6",164,0)
 I '$$MATCH^IVMUFNC(DFN,ICN,"","","I",.ERRMSG) S HLERR=ERRMSG Q
"RTN","EASPREC6",165,0)
 S IVMDAP=IVMDA ;Save IVMDA for veteran PID segment
"RTN","EASPREC6",166,0)
 Q
"RTN","EASPREC6",167,0)
ZIC I 'DEPFLG S IVMDGLY=$P(IVMSEG,"^",3) ;Income year
"RTN","EASPREC6",168,0)
 Q
"RTN","EASPREC6",169,0)
ZIR Q
"RTN","EASPREC6",170,0)
ZDP S DEPFLG=1
"RTN","EASPREC6",171,0)
 Q
"RTN","EASPREC6",172,0)
 ;Get primary means test
"RTN","EASPREC6",173,0)
 ; IVMMTDT - means test date
"RTN","EASPREC6",174,0)
 ; DGLY - income year
"RTN","EASPREC6",175,0)
 ; If Means Test not in DHCP, don't upload IVM Means Test 
"RTN","EASPREC6",176,0)
 ;
"RTN","EASPREC6",177,0)
ZMT N IVMIEN,MTCODE                                             ;EAS*1*42
"RTN","EASPREC6",178,0)
 S IVMDAZ=IVMDA,ZMTSEG=IVMSEG            ;ZMT segment ivmda
"RTN","EASPREC6",179,0)
 D PARSEZMT(ZMTSEG) ;Retrieve ZMT Values
"RTN","EASPREC6",180,0)
 ;Means test date from ZMT segment
"RTN","EASPREC6",181,0)
 S (EASMTDT,IVMMTDT)=$$FMDATE^HLFNC($P(IVMSEG,HLFS,3))
"RTN","EASPREC6",182,0)
 S DGMTYPT=$G(IVM17) ;int type of test
"RTN","EASPREC6",183,0)
 S:DGMTYPT="" DGMTYPT=1 ;insure type defined
"RTN","EASPREC6",184,0)
 S DGLY=$$LYR^DGMTSCU1(IVMMTDT) ;Get means test to be updated
"RTN","EASPREC6",185,0)
 S MTDATE=-IVMMTDT
"RTN","EASPREC6",186,0)
 S IVMIEN=""
"RTN","EASPREC6",187,0)
 S MTFND=0
"RTN","EASPREC6",188,0)
 F  S IVMIEN=$O(^DGMT(408.31,"AID",DGMTYPT,DFN,MTDATE,IVMIEN)) Q:MTFND!(IVMIEN="")  D
"RTN","EASPREC6",189,0)
 . S IVMMTIEN=IVMIEN
"RTN","EASPREC6",190,0)
 . ; match to MT Z06 from Edb
"RTN","EASPREC6",191,0)
 . S MTCODE=$P($G(^DGMT(408.31,IVMIEN,0)),"^",3)
"RTN","EASPREC6",192,0)
 . I (MTCODE=6)!(MTCODE=16)!(MTCODE=8) D  ;Previous Converted MT/CT - EAS*1.0*111 
"RTN","EASPREC6",193,0)
 . . S UPMTS=IVMIEN
"RTN","EASPREC6",194,0)
 . . S MTFND=1
"RTN","EASPREC6",195,0)
 I IVM7="" S (UPMTS,MTFND)=1  ;- EAS*1.0*111 need override for reversal.
"RTN","EASPREC6",196,0)
 Q
"RTN","EASPREC6",197,0)
ZIV S IVMDAV=IVMDA,ZIVSEG=IVMSEG
"RTN","EASPREC6",198,0)
 S IVMIY=$P(IVMSEG,HLFS,3)
"RTN","EASPREC6",199,0)
 S IVMIY=$$FMDATE^HLFNC(IVMIY)
"RTN","EASPREC6",200,0)
 I $E(IVMIY,4,7)'="0000"!($E(IVMIY,1,3)<292) D  Q
"RTN","EASPREC6",201,0)
 . S HLERR="Invalid Income Year"
"RTN","EASPREC6",202,0)
 I "01"'[$P(IVMSEG,HLFS,9) D  Q
"RTN","EASPREC6",203,0)
 . S HLERR="Case Status not 0 or 1"
"RTN","EASPREC6",204,0)
 I $P(IVMSEG,HLFS,9)=1 S CASEFLG=1 ;Close/Convert Case Flag
"RTN","EASPREC6",205,0)
 I $P(IVMSEG,HLFS,9)=0 S CASEFLG=0 ;Delete/Not Converted MT Flag
"RTN","EASPREC6",206,0)
BHS Q
"RTN","EASPREC6",207,0)
BTS Q
"RTN","EASPREC6",208,0)
 ;
"RTN","EASPREC6",209,0)
GET ; get HL7 segment from ^TMP
"RTN","EASPREC6",210,0)
 ;S IVMDA=$O(^TMP($J,IVMRTN,+IVMDA))
"RTN","EASPREC6",211,0)
 S IVMSEG=$G(^TMP($J,IVMRTN,+IVMDA,0))
"RTN","EASPREC6",212,0)
 S IVMSEG1=$E(IVMSEG,1,3)
"RTN","EASPREC6",213,0)
 S $E(SEGSTR,IVMDA)=1
"RTN","EASPREC6",214,0)
 Q
"RTN","EASPREC6",215,0)
 ;
"RTN","EASPREC6",216,0)
 ;Parse ZMT Segment for MT Data
"RTN","EASPREC6",217,0)
 ;
"RTN","EASPREC6",218,0)
PARSEZMT(ZSEG) ;
"RTN","EASPREC6",219,0)
 N CMPDATE
"RTN","EASPREC6",220,0)
 S IVM2=$$FMDATE^HLFNC($P(ZSEG,"^",3)) ;Means Test Date
"RTN","EASPREC6",221,0)
 S IVM3=$O(^DG(408.32,"C",$P(ZSEG,"^",4),"")) ;Means Test Status 
"RTN","EASPREC6",222,0)
 ;S IVM7=$S($P(ZSEG,"^",8)="Y":1,$P(ZSEG,"^",8)=1:1,$P(ZSEG,"^",8)="":"",1:0) ;Agrees To Deductible
"RTN","EASPREC6",223,0)
 S IVM7=$S($P(ZSEG,"^",8)]"Yy":1,$P(ZSEG,"^",8)=1:1,$P(ZSEG,"^",8)="":"",1:0) ;Agrees To Deductible
"RTN","EASPREC6",224,0)
 S IVM8=$P(ZSEG,"^",9) ;Threshold A
"RTN","EASPREC6",225,0)
 S CMPDATE=$P(ZSEG,"^",11) S:$E($G(CMPDATE),9,14)="000000" CMPDATE=$E(CMPDATE,1,8) S:+CMPDATE=0 CMPDATE="" S IVM10=$$FMDATE^HLFNC(CMPDATE) ;Date/Time Completed
"RTN","EASPREC6",226,0)
 S IVM12=$P(ZSEG,"^",13) ;Number of Dependents
"RTN","EASPREC6",227,0)
 S IVM17=$P(ZSEG,"^",18) ;Type of Test
"RTN","EASPREC6",228,0)
 S IVM18=$P(ZSEG,"^",19) ;Source of Test
"RTN","EASPREC6",229,0)
 S IVM20=$$FMDATE^HLFNC($P(ZSEG,"^",21)) ;IVM Verified MT
"RTN","EASPREC6",230,0)
 S IVM25=$$FMDATE^HLFNC($P(ZSEG,"^",26)) ;D/T Last Changed
"RTN","EASPREC6",231,0)
 S IVM26=$O(^DG(408.32,"C",$P(ZSEG,"^",27),"")) ;Test Determined Status
"RTN","EASPREC6",232,0)
 Q
"RTN","EASPREC6",233,0)
 ;
"RTN","EASPREC6",234,0)
CLOSE(IVMIY,DFN,IVMCS,IVMCR) ; Close IVM case record for a patient
"RTN","EASPREC6",235,0)
 ; Input: DFN -- Pointer to the patient in file #2
"RTN","EASPREC6",236,0)
 ; IVMIY -- Income year of the closed case
"RTN","EASPREC6",237,0)
 ; IVMCS -- Closure source [1=IVM | 2=DHCP]
"RTN","EASPREC6",238,0)
 ; IVMCR -- Pointer to the closure reason in file #301.93
"RTN","EASPREC6",239,0)
 ;
"RTN","EASPREC6",240,0)
 N DA,DIE,DR,X,Y,EVENTS,STATUS,EAEVENT,IVEVENT
"RTN","EASPREC6",241,0)
 I '$G(IVMIY)!'$G(DFN)!'$G(IVMCS)!'$G(IVMCR) G CLOSEQ
"RTN","EASPREC6",242,0)
 S IVMDELMT=1 ; flag indicates deletion
"RTN","EASPREC6",243,0)
 S DA=$O(^IVM(301.5,"APT",+DFN,+IVMIY,0))
"RTN","EASPREC6",244,0)
 I $G(^IVM(301.5,+DA,0))']"" G CLOSEQ
"RTN","EASPREC6",245,0)
 ;
"RTN","EASPREC6",246,0)
 ;don't want closing a case to stop transmission of an enrollment event
"RTN","EASPREC6",247,0)
 S STATUS=1
"RTN","EASPREC6",248,0)
 I ($$STATUS^IVMPLOG(+DA,.EVENTS)=0),EVENTS("ENROLL")=1 S STATUS=0
"RTN","EASPREC6",249,0)
 ;
"RTN","EASPREC6",250,0)
 ; If previous years event make sure Enrollment Event does not get 
"RTN","EASPREC6",251,0)
 ; updated, and the IVM Event does
"RTN","EASPREC6",252,0)
 ;
"RTN","EASPREC6",253,0)
 ;S EAEVENT=1,IVEVENT=2
"RTN","EASPREC6",254,0)
 ;I $G(EXPIRED)=1 S EAEVENT=2,STATUS=0,IVEVENT=1
"RTN","EASPREC6",255,0)
 ;I $G(EXPIRED)=0 S EAEVENT=1,STATUS=0
"RTN","EASPREC6",256,0)
 D NOW^%DTC S DR=".03////"_STATUS_";.04////1;1.01////"_IVMCR_";1.02////"_IVMCS_";1.03////"_%_";30.01////2;30.02////2"
"RTN","EASPREC6",257,0)
 S DIE="^IVM(301.5," D ^DIE
"RTN","EASPREC6",258,0)
CLOSEQ Q
"RTN","EASPREC6",259,0)
 ;
"RTN","EASUM6")
0^6^B30233395
"RTN","EASUM6",1,0)
EASUM6 ;ALB/BDB,MNH - IVM MEANS/COPAY TEST UPLOAD DRIVER ;7/6/04 1:23pm
"RTN","EASUM6",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**111**;21-OCT-94;Build 59
"RTN","EASUM6",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","EASUM6",4,0)
 ;
"RTN","EASUM6",5,0)
 ;Cloned from EASUM1
"RTN","EASUM6",6,0)
 ;
"RTN","EASUM6",7,0)
EN ; this routine will call routines to upload means tests sent by the IVM
"RTN","EASUM6",8,0)
 ; Center in HL7 segments. the required sequence of these segments were
"RTN","EASUM6",9,0)
 ; validated in the calling routine IVMPREC7. this routine will call
"RTN","EASUM6",10,0)
 ; IVMUCHK to ensure that the data is consistent with DHCP means test
"RTN","EASUM6",11,0)
 ; file and software requirements.
"RTN","EASUM6",12,0)
 ;
"RTN","EASUM6",13,0)
 ; entries will be added/modified in the following means test and
"RTN","EASUM6",14,0)
 ; patient files:
"RTN","EASUM6",15,0)
 ;
"RTN","EASUM6",16,0)
 ; PATIENT RELATION (#408.12)
"RTN","EASUM6",17,0)
 ; INCOME PERSON (#408.13)
"RTN","EASUM6",18,0)
 ; INDIVIDUAL ANNUAL INCOME (#408.21)
"RTN","EASUM6",19,0)
 ; INCOME RELATION (#408.22)
"RTN","EASUM6",20,0)
 ; ANNUAL MEANS TEST (#408.31)
"RTN","EASUM6",21,0)
 ; MEANS TEST CHANGES (#408.41)
"RTN","EASUM6",22,0)
 ; PATIENT (#2)
"RTN","EASUM6",23,0)
 ;
"RTN","EASUM6",24,0)
 ; current year is date of means test.
"RTN","EASUM6",25,0)
 ; income year is calendar year before date of means test.
"RTN","EASUM6",26,0)
 ; meant test status is based on income year data.
"RTN","EASUM6",27,0)
 ;
"RTN","EASUM6",28,0)
 ; IVMDAP is pointer to the PID HL7 segment in file #772
"RTN","EASUM6",29,0)
 ; IVMDAZ is pointer to the ZMT segment
"RTN","EASUM6",30,0)
 ;
"RTN","EASUM6",31,0)
 S:'$D(DUZ) DUZ=.5 ; if no DUZ set to postmaster
"RTN","EASUM6",32,0)
 ;
"RTN","EASUM6",33,0)
 ; get copay exemption status (IVMCEB) and means test status (IVMMTB)
"RTN","EASUM6",34,0)
 ; before upload
"RTN","EASUM6",35,0)
 S IVMCEB=$P($$RXST^IBARXEU(DFN),"^",2)
"RTN","EASUM6",36,0)
 S IVMMTB=$P($$LST^DGMTU(DFN),"^",3)
"RTN","EASUM6",37,0)
 ;
"RTN","EASUM6",38,0)
 ; subscript of array IVMAR is ien of 408.12 transmitted by IVM Center
"RTN","EASUM6",39,0)
 ; or created by upload.
"RTN","EASUM6",40,0)
 ;K IVMAR
"RTN","EASUM6",41,0)
 ;S IVMX=$$EN^IVMUCHK() I IVMX]"" S HLERR=IVMX K IVMX Q ; error found in MT data
"RTN","EASUM6",42,0)
 ;
"RTN","EASUM6",43,0)
ADD ; add new annual means test file (408.31) stub
"RTN","EASUM6",44,0)
 ; input DGMTDT (.01) dt of test
"RTN","EASUM6",45,0)
 ; DFN (.02) Patient IEN
"RTN","EASUM6",46,0)
 ; DGMTYPT (.19) type of test (1-means test, 2-Rx Copay test)
"RTN","EASUM6",47,0)
 ; output DGMTI annual means test IEN
"RTN","EASUM6",48,0)
 S DGMTDT=IVMMTDT
"RTN","EASUM6",49,0)
 D ADD^DGMTA
"RTN","EASUM6",50,0)
 I $G(IVMMTIEN)="" S IVMMTIEN=$G(DGMTI) ;Set IEN if only MT on file is Z06 MT
"RTN","EASUM6",51,0)
 ;
"RTN","EASUM6",52,0)
 ;Create new Z06 IVM Means Test
"RTN","EASUM6",53,0)
 ; Make STUB MT primary, add comment that it was created by Edb
"RTN","EASUM6",54,0)
 S DGCOM="Z06 MT via Edb"
"RTN","EASUM6",55,0)
 D PARSEZMT^EASPREC6(ZMTSEG) ;Parse ZMT Segment for MT Data
"RTN","EASUM6",56,0)
 I $$EXPIRED^EASPTRN1(DFN,$G(IVM2)) S DGENUPLD="ENROLLMENT/ELIGIBILITY UPLOAD IN PROGRESS"    ;If MT expired then do not update Enrollment record
"RTN","EASUM6",57,0)
 S DGENUPLD="ENROLLMENT/ELIGIBILITY UPLOAD IN PROGRESS" ;EAS*1.0*111 Do not update Enrollment record.
"RTN","EASUM6",58,0)
 S DA=DGMTI,DIE="^DGMT(408.31,"
"RTN","EASUM6",59,0)
 S DR=".03////^S X=IVM3;.12////^S X=IVM8;.07////^S X=IVM10;.09////^S X=IVM25;.11////^S X=IVM7;.18////^S X=IVM12;"
"RTN","EASUM6",60,0)
 S DR=DR_".23////^S X=IVM18;.25////^S X=IVM20;2////1;2.02////^S X=IVMDATE;2.03////^S X=IVM26;2////1;;50///^S X=DGCOM;"
"RTN","EASUM6",61,0)
 ;
"RTN","EASUM6",62,0)
 ; Linking logic for MT & CT, conditionally set link field 2.06 
"RTN","EASUM6",63,0)
 ; Link the CT to MT (if MT found), or MT to CT (if CT found)
"RTN","EASUM6",64,0)
 ; don't link tests older than Oct. 1999 or not same Year
"RTN","EASUM6",65,0)
 N LNKDAT,LNKMT,LNKDTE,LNKCAT,CURIEN
"RTN","EASUM6",66,0)
 S CURIEN=DGMTI,LNKMT=""
"RTN","EASUM6",67,0)
 S LNKDAT=$$LST^DGMTU(DFN,DGMTDT,$S(DGMTYPT=1:2,1:1)),DGMTI=CURIEN
"RTN","EASUM6",68,0)
 S:LNKDAT LNKMT=+LNKDAT,LNKDTE=$P(LNKDAT,"^",2),LNKCAT=$P(LNKDAT,"^",4)
"RTN","EASUM6",69,0)
 ; set LNKMT off if either of two scenarios below
"RTN","EASUM6",70,0)
 I LNKMT D
"RTN","EASUM6",71,0)
 . I $E(LNKDTE,1,3)'=$E(DGMTDT,1,3) S LNKMT="@" Q
"RTN","EASUM6",72,0)
 . I DGMTDT<2991001 S LNKMT="" Q
"RTN","EASUM6",73,0)
 S:LNKMT'="" DR=DR_";2.06////^S X=LNKMT"
"RTN","EASUM6",74,0)
 ;
"RTN","EASUM6",75,0)
 D ^DIE K DA,DIE,DR                            ;update new 408.31 test
"RTN","EASUM6",76,0)
 ;
"RTN","EASUM6",77,0)
 ; Update other 408.31 related Test, Link field, if link scenario true
"RTN","EASUM6",78,0)
 I LNKMT S DA=LNKMT,DIE="^DGMT(408.31,",DR="2.06////^S X=CURIEN" D ^DIE K DA,DIE,DR
"RTN","EASUM6",79,0)
 ;
"RTN","EASUM6",80,0)
 ;Variables needed for Bulletins
"RTN","EASUM6",81,0)
 ;
"RTN","EASUM6",82,0)
 S DGCAT=$P($G(^DG(408.32,IVM3,0)),"^",1)
"RTN","EASUM6",83,0)
 I '$D(IVM5) S IVM5=""
"RTN","EASUM6",84,0)
 ;
"RTN","EASUM6",85,0)
 D GETREL^DGMTU11(DFN,"V",DGLY,IVMMTIEN)
"RTN","EASUM6",86,0)
 I EASZ06 S (IVMMT31,DGMTP)=$G(^DGMT(408.31,IVMMTIEN,0)) ;dgmtp is event driver variable
"RTN","EASUM6",87,0)
 D COMPLETE
"RTN","EASUM6",88,0)
 Q
"RTN","EASUM6",89,0)
 ;
"RTN","EASUM6",90,0)
 ; add dependent(s) to income person file (408.13)
"RTN","EASUM6",91,0)
 ;
"RTN","EASUM6",92,0)
 ; add spouse if not in 408.13
"RTN","EASUM6",93,0)
 S IVMSPCHV="S" ; spouse/child/vet indicator
"RTN","EASUM6",94,0)
 S IVMDA1=IVMDAP+3 D GET ; spouse ZDP segment
"RTN","EASUM6",95,0)
 D INPIEN^IVMUM2
"RTN","EASUM6",96,0)
 Q:$D(IVMFERR)
"RTN","EASUM6",97,0)
 ;
"RTN","EASUM6",98,0)
 I IVMFLG5 G ADDCHILD ; entry not added - goto add children
"RTN","EASUM6",99,0)
 ;
"RTN","EASUM6",100,0)
 ; add entry to patient relation file (408.12)
"RTN","EASUM6",101,0)
 D EN^IVMUM3
"RTN","EASUM6",102,0)
 ;
"RTN","EASUM6",103,0)
 Q:$D(IVMFERR)
"RTN","EASUM6",104,0)
 ;
"RTN","EASUM6",105,0)
ADDS21 ; add spouse entry to individual annual income file (408.21)
"RTN","EASUM6",106,0)
 S IVMDA1=IVMDAP+4 D GET ; spouse ZIC segment
"RTN","EASUM6",107,0)
 D EN^IVMUM4
"RTN","EASUM6",108,0)
 Q:$D(IVMFERR)
"RTN","EASUM6",109,0)
 ;
"RTN","EASUM6",110,0)
 ; add spouse entry to income relation file (408.22)
"RTN","EASUM6",111,0)
 S IVMDA1=IVMDAP+5 D GET ; spouse ZIR segment
"RTN","EASUM6",112,0)
 D EN^IVMUM5
"RTN","EASUM6",113,0)
 Q:$D(IVMFERR)
"RTN","EASUM6",114,0)
 ;
"RTN","EASUM6",115,0)
ADDCHILD ; add children if not in 408.13
"RTN","EASUM6",116,0)
 S IVMSPCHV="C" ; spouse/child/vet indicator
"RTN","EASUM6",117,0)
 I 'IVMFLGC G ADDV21 ; no dependent children 
"RTN","EASUM6",118,0)
 S IVMCTR2=5
"RTN","EASUM6",119,0)
 F IVMCTR3=1:1:IVMFLGC D  Q:$D(IVMFERR)
"RTN","EASUM6",120,0)
 .S IVMCTR2=IVMCTR2+1
"RTN","EASUM6",121,0)
 .S IVMDA1=IVMDAP+IVMCTR2 D GET ; child ZDP segment
"RTN","EASUM6",122,0)
 .D INPIEN^IVMUM2
"RTN","EASUM6",123,0)
 .Q:$D(IVMFERR)
"RTN","EASUM6",124,0)
 .;
"RTN","EASUM6",125,0)
 .; add child entry to patient relation file (408.12)
"RTN","EASUM6",126,0)
 .D EN^IVMUM3
"RTN","EASUM6",127,0)
 .Q:$D(IVMFERR)
"RTN","EASUM6",128,0)
 .;
"RTN","EASUM6",129,0)
ADDC21 .; add child entry to individual annual income file (408.21)
"RTN","EASUM6",130,0)
 .S IVMCTR2=IVMCTR2+1
"RTN","EASUM6",131,0)
 .S IVMDA1=IVMDAP+IVMCTR2 D GET ; child ZIC segment
"RTN","EASUM6",132,0)
 .D EN^IVMUM4
"RTN","EASUM6",133,0)
 .Q:$D(IVMFERR)
"RTN","EASUM6",134,0)
 .;
"RTN","EASUM6",135,0)
 .; add entry to income relation file (408.22)
"RTN","EASUM6",136,0)
 .S IVMCTR2=IVMCTR2+1
"RTN","EASUM6",137,0)
 .S IVMDA1=IVMDAP+IVMCTR2 D GET ; child ZIR segment
"RTN","EASUM6",138,0)
 .D EN^IVMUM5
"RTN","EASUM6",139,0)
 .Q:$D(IVMFERR)
"RTN","EASUM6",140,0)
 .Q
"RTN","EASUM6",141,0)
 Q:$D(IVMFERR)
"RTN","EASUM6",142,0)
 ;
"RTN","EASUM6",143,0)
ADDV21 ; add vet entry to individual annual income file (408.21)
"RTN","EASUM6",144,0)
 ; get vet patient relation ien
"RTN","EASUM6",145,0)
 S DGPRI=+$G(DGREL("V"))
"RTN","EASUM6",146,0)
 S IVMDA1=IVMDAP+1 D GET ; vet ZIC segment
"RTN","EASUM6",147,0)
 S IVMSPCHV="V" ; spouse/child/vet indicator
"RTN","EASUM6",148,0)
 D EN^IVMUM4
"RTN","EASUM6",149,0)
 Q:$D(IVMFERR)
"RTN","EASUM6",150,0)
 S DGVINI=DGINI ; vet individual annual income ien
"RTN","EASUM6",151,0)
 ;
"RTN","EASUM6",152,0)
 ; add vet entry to income relation file (408.22)
"RTN","EASUM6",153,0)
 S IVMDA1=IVMDAP+2 D GET ; vet ZIR segment
"RTN","EASUM6",154,0)
 D EN^IVMUM5
"RTN","EASUM6",155,0)
 Q:$D(IVMFERR)
"RTN","EASUM6",156,0)
 S DGVIRI=DGIRI ; vet income relation ien
"RTN","EASUM6",157,0)
 ;
"RTN","EASUM6",158,0)
COMPLETE ; complete means test
"RTN","EASUM6",159,0)
 ;
"RTN","EASUM6",160,0)
 ;D EN^IVMUM6
"RTN","EASUM6",161,0)
 ;Call Means Test Event Driver to complete processing
"RTN","EASUM6",162,0)
 ;
"RTN","EASUM6",163,0)
 S DGMTACT="UPL"
"RTN","EASUM6",164,0)
 D AFTER^DGMTEVT
"RTN","EASUM6",165,0)
 S DGMTINF=1 ;Non-Interactive Flag
"RTN","EASUM6",166,0)
 D EN^DGMTEVT
"RTN","EASUM6",167,0)
 D MTBULL^EASUM7,MAIL^IVMUFNC() ;Build Mail Message
"RTN","EASUM6",168,0)
 ;
"RTN","EASUM6",169,0)
 ; cleanup ;EAS*1*42 remove Dgmtypt
"RTN","EASUM6",170,0)
 K DGINI,DGIRI,DGLY,DGMTDT,DGPRI,DGREL,DGVINI,DGVIRI,DGENUPLD
"RTN","EASUM6",171,0)
 K DGCAT,IVMAR,IVMCEB,IVMCTR2,IVMCTR3,IVMDA1,IVMDAP,IVMFERR
"RTN","EASUM6",172,0)
 K IVMFLG2,IVMFLG5,IVMFLGC,IVMMTB,IVMPRN
"RTN","EASUM6",173,0)
 K IVMRELN,IVMRELO,IVMSEG,IVMSPCHV,IVMX
"RTN","EASUM6",174,0)
 Q
"RTN","EASUM6",175,0)
 ; 
"RTN","EASUM6",176,0)
GET ; get HL7 segment from ^HL
"RTN","EASUM6",177,0)
 S IVMSEG=$P($G(^TMP($J,IVMRTN,IVMDA1,0)),"^",2,999)
"RTN","EASUM6",178,0)
 Q
"RTN","EASUM9")
0^4^B40763985
"RTN","EASUM9",1,0)
EASUM9 ;ALB/BDB - DELETE IVM MEANS TEST ; 07/07/2006
"RTN","EASUM9",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**111**;21-OCT-94;Build 59
"RTN","EASUM9",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","EASUM9",4,0)
 ;
"RTN","EASUM9",5,0)
 ; This routine patterned after EASUM7.
"RTN","EASUM9",6,0)
 ;
"RTN","EASUM9",7,0)
EN ; this routine will process an IVM MT/CT delete request
"RTN","EASUM9",8,0)
 ; from the ESR.
"RTN","EASUM9",9,0)
 ;
"RTN","EASUM9",10,0)
 ; delete IVM MT/CT records in the following files:
"RTN","EASUM9",11,0)
 ; 408.22
"RTN","EASUM9",12,0)
 ; 408.21
"RTN","EASUM9",13,0)
 ;
"RTN","EASUM9",14,0)
 ; 408.12 & 408.13 if IVM dependent
"RTN","EASUM9",15,0)
 ; or
"RTN","EASUM9",16,0)
 ; 408.1275 if IVM & VAMC dependent (new 408.1275 record was
"RTN","EASUM9",17,0)
 ; created for each IVM dependent by upload). 
"RTN","EASUM9",18,0)
 ; change back the following fields to VAMC values
"RTN","EASUM9",19,0)
 ; from IVM values:
"RTN","EASUM9",20,0)
 ; 408.12 - relationship
"RTN","EASUM9",21,0)
 ; 408.13 - name, dob, ssn, sex
"RTN","EASUM9",22,0)
 ; or
"RTN","EASUM9",23,0)
 ; 408.1275 if VAMC dependent (new inactivated 408.1275 record
"RTN","EASUM9",24,0)
 ; was created by upload).
"RTN","EASUM9",25,0)
 ;
"RTN","EASUM9",26,0)
 ; 408.31
"RTN","EASUM9",27,0)
 ;
"RTN","EASUM9",28,0)
 ; the "PRIM" node for the VAMC MT will be changed to 1 
"RTN","EASUM9",29,0)
 ;
"RTN","EASUM9",30,0)
 ; the event driver will be called twice
"RTN","EASUM9",31,0)
 ; DGMTACT="DUP"
"RTN","EASUM9",32,0)
 ; DGMTACT="DEL"
"RTN","EASUM9",33,0)
 ;
"RTN","EASUM9",34,0)
 ;
"RTN","EASUM9",35,0)
 ; Input IVMMTDT MT date
"RTN","EASUM9",36,0)
 ; IVMMTIEN primary MT IEN
"RTN","EASUM9",37,0)
 ;
"RTN","EASUM9",38,0)
 ; check primary test is IVM
"RTN","EASUM9",39,0)
 S IVMNO=$G(^DGMT(408.31,IVMMTIEN,0)) ; ivm mt 0th node 
"RTN","EASUM9",40,0)
 S IVMSOT=$P($G(^DG(408.34,+$P(IVMNO,"^",23),0)),"^") ; source of test
"RTN","EASUM9",41,0)
 I IVMSOT'="IVM" D  Q
"RTN","EASUM9",42,0)
 .S HLERR="IVM "_^DG(408.33,DGMTYPT,0)_" for income year "_($E(DGLY,1,3)+1700)_" not found"
"RTN","EASUM9",43,0)
 .D ACK^IVMPREC
"RTN","EASUM9",44,0)
 ;
"RTN","EASUM9",45,0)
 ; get VAMC MT/CT via AD xref (by type) to be re-instated ;EAS*1*42
"RTN","EASUM9",46,0)
 S IVMVAMC="A" ; ivmvamc is vamc ien
"RTN","EASUM9",47,0)
 ; make sure you get the latest test of that type for that date first
"RTN","EASUM9",48,0)
 F  S IVMVAMC=$O(^DGMT(408.31,"AD",DGMTYPT,DFN,IVMMTDT,IVMVAMC),-1) Q:'IVMVAMC  D  Q:$D(IVMVNO)
"RTN","EASUM9",49,0)
 . S IVMVNO=$G(^DGMT(408.31,+IVMVAMC,0)) ; vamc 0th node
"RTN","EASUM9",50,0)
 . S IVMSOT=$P($G(^DG(408.34,+$P(IVMVNO,"^",23),0)),"^") ; source of test
"RTN","EASUM9",51,0)
 . I IVMSOT'="VAMC",IVMSOT'="DCD",IVMSOT'="OTHER FACILITY" K IVMVNO Q
"RTN","EASUM9",52,0)
 . Q
"RTN","EASUM9",53,0)
 ;
"RTN","EASUM9",54,0)
 ; check other dates for that income year EAS*1.0*111
"RTN","EASUM9",55,0)
 I '$D(IVMVNO) D
"RTN","EASUM9",56,0)
 .N IVMVAMCD S IVMVAMCD=IVMMTDT ;ivmvamcd is the mt/ct date to be reinstated
"RTN","EASUM9",57,0)
 .F  S IVMVAMCD=$O(^DGMT(408.31,"AD",DGMTYPT,DFN,IVMVAMCD),-1) Q:$E(IVMVAMCD,1,3)'=$E(IVMMTDT,1,3)  D  Q:$D(IVMVNO)
"RTN","EASUM9",58,0)
 ..S IVMVAMC="A" ; ivmvamc is vamc ien
"RTN","EASUM9",59,0)
 ..F  S IVMVAMC=$O(^DGMT(408.31,"AD",DGMTYPT,DFN,IVMVAMCD,IVMVAMC),-1) Q:'IVMVAMC  D  Q:$D(IVMVNO)
"RTN","EASUM9",60,0)
 ...S IVMVNO=$G(^DGMT(408.31,+IVMVAMC,0)) ; vamc 0th node
"RTN","EASUM9",61,0)
 ...S IVMSOT=$P($G(^DG(408.34,+$P(IVMVNO,"^",23),0)),"^") ; source of test
"RTN","EASUM9",62,0)
 ...I IVMSOT'="VAMC",IVMSOT'="DCD",IVMSOT'="OTHER FACILITY" K IVMVNO Q
"RTN","EASUM9",63,0)
 ...Q
"RTN","EASUM9",64,0)
 ..Q
"RTN","EASUM9",65,0)
 .Q
"RTN","EASUM9",66,0)
 ;
"RTN","EASUM9",67,0)
 ; if no previous VAMC RXCT (type 2) on file, then ;EAS*1*42
"RTN","EASUM9",68,0)
 ; simply delete the IVM RX converted 408.31 record
"RTN","EASUM9",69,0)
 S DGENUPLD="ENROLLMENT/ELIGIBILITY UPLOAD IN PROGRESS"
"RTN","EASUM9",70,0)
 I '$D(IVMVNO),DGMTYPT=2 D EN1^EASUM8 Q
"RTN","EASUM9",71,0)
 ;
"RTN","EASUM9",72,0)
 ; not an error if from esr EAS*1.0*111
"RTN","EASUM9",73,0)
 ;I '$D(IVMVNO) D Q
"RTN","EASUM9",74,0)
 ;.S HLERR=IVMSOT_^DG(408.33,DGMTYPT,0)_" for income year "_($E(DGLY,1,3)+1700)_" not found"
"RTN","EASUM9",75,0)
 ;.D ACK^IVMPREC
"RTN","EASUM9",76,0)
 ;
"RTN","EASUM9",77,0)
 ; get array dginc containing ien(s) of 408.21
"RTN","EASUM9",78,0)
 ; get array dginr containing ien(s) of 408.22
"RTN","EASUM9",79,0)
 ; IVMMTIEN IS THE IEN FOR THE IVM MT, HOWEVER IVMVAMC IS USING A DIFFERENT IEN AND IS THE ONE BEING REVERSED.
"RTN","EASUM9",80,0)
 D ALL^DGMTU21(DFN,"VSC",IVMMTDT,"IR",IVMMTIEN)
"RTN","EASUM9",81,0)
 ;
"RTN","EASUM9",82,0)
 ; delete 408.22
"RTN","EASUM9",83,0)
 ;
"RTN","EASUM9",84,0)
 S DA=$G(DGINR("V")) D
"RTN","EASUM9",85,0)
 .Q:'DA  S DIK="^DGMT(408.22," D ^DIK
"RTN","EASUM9",86,0)
 S DA=$G(DGINR("S")) D
"RTN","EASUM9",87,0)
 .Q:'DA  S DIK="^DGMT(408.22," D ^DIK
"RTN","EASUM9",88,0)
 S IVMN=0
"RTN","EASUM9",89,0)
 F  S IVMN=$O(DGINR("C",IVMN)) Q:'IVMN  S DA=$G(DGINR("C",IVMN)),DIK="^DGMT(408.22," D ^DIK
"RTN","EASUM9",90,0)
 ;
"RTN","EASUM9",91,0)
 ; delete 408.21
"RTN","EASUM9",92,0)
 ;
"RTN","EASUM9",93,0)
 S DA=$G(DGINC("V")) D
"RTN","EASUM9",94,0)
 .Q:'DA  S DIK="^DGMT(408.21," D ^DIK
"RTN","EASUM9",95,0)
 S DA=$G(DGINC("S")) D
"RTN","EASUM9",96,0)
 .Q:'DA  S DIK="^DGMT(408.21," D ^DIK
"RTN","EASUM9",97,0)
 S IVMN=0
"RTN","EASUM9",98,0)
 F  S IVMN=$O(DGINC("C",IVMN)) Q:'IVMN  S DA=$G(DGINC("C",IVMN)),DIK="^DGMT(408.21," D ^DIK
"RTN","EASUM9",99,0)
 ;
"RTN","EASUM9",100,0)
 ; logic for 408.12/408.1275 & 408.13
"RTN","EASUM9",101,0)
 ;
"RTN","EASUM9",102,0)
 D SETUPAR^EASUM8
"RTN","EASUM9",103,0)
 ;
"RTN","EASUM9",104,0)
 ; no "AIVM" x-ref means
"RTN","EASUM9",105,0)
 ; no dependents
"RTN","EASUM9",106,0)
 ; or
"RTN","EASUM9",107,0)
 ; IVM v2.0 means test (no dependent difference)
"RTN","EASUM9",108,0)
 ; only 408.22, 408.21, and 408.31 records will be deleted
"RTN","EASUM9",109,0)
 ;
"RTN","EASUM9",110,0)
 S IVM12="" F  S IVM12=$O(^DGPR(408.12,"AIVM",IVMMTIEN,IVM12)) Q:'IVM12  D  Q:$D(IVMFERR)
"RTN","EASUM9",111,0)
 .I $G(^DGPR(408.12,+IVM12,0))']"" D  Q
"RTN","EASUM9",112,0)
 ..S (IVMTEXT(6),HLERR)="Can't find 408.12 record "_IVM12
"RTN","EASUM9",113,0)
 ..D ERRBULL^IVMPREC7,MAIL^IVMUFNC()
"RTN","EASUM9",114,0)
 ..S IVMFERR=""
"RTN","EASUM9",115,0)
 ..D ACK^IVMPREC
"RTN","EASUM9",116,0)
 ..Q
"RTN","EASUM9",117,0)
 .;
"RTN","EASUM9",118,0)
 .I $P($G(^DGPR(408.12,+IVM12,"E",0)),"^",4)=1 D  Q
"RTN","EASUM9",119,0)
 ..; only 1 multiple record (408.1275) indicates IVM dependent
"RTN","EASUM9",120,0)
 ..; delete 408.12 & 408.13 records for IVM dependent
"RTN","EASUM9",121,0)
 ..S IVM13=$P($P($G(^DGPR(408.12,+IVM12,0)),"^",3),";") I $G(^DGPR(408.13,+IVM13,0))']"" D  Q
"RTN","EASUM9",122,0)
 ...S (IVMTEXT(6),HLERR)="Can't find 408.13 record "_IVM13
"RTN","EASUM9",123,0)
 ...D ERRBULL^IVMPREC7,MAIL^IVMUFNC()
"RTN","EASUM9",124,0)
 ...S IVMFERR=""
"RTN","EASUM9",125,0)
 ...D ACK^IVMPREC
"RTN","EASUM9",126,0)
 ...Q
"RTN","EASUM9",127,0)
 ..S DA=IVM12,DIK="^DGPR(408.12," D ^DIK K DA,DIK
"RTN","EASUM9",128,0)
 ..S DA=IVM13,DIK="^DGPR(408.13," D ^DIK K DA,DIK
"RTN","EASUM9",129,0)
 ..Q
"RTN","EASUM9",130,0)
 .;
"RTN","EASUM9",131,0)
 .; delete 408.1275 record for IVM dependent and
"RTN","EASUM9",132,0)
 .; change demo data in 408.12 & 408.13 back to VAMC values
"RTN","EASUM9",133,0)
 .; or
"RTN","EASUM9",134,0)
 .; delete 408.1275 record for inactivated VAMC dependent
"RTN","EASUM9",135,0)
 .S IVM121="",IVM121=$O(^DGPR(408.12,"AIVM",IVMMTIEN,+IVM12,IVM121))
"RTN","EASUM9",136,0)
 .I $G(^DGPR(408.12,+IVM12,"E",+IVM121,0))']"" D  Q
"RTN","EASUM9",137,0)
 ..S (IVMTEXT(6),HLERR)="Can't find 408.1275 record "_IVM12_" "_IVM121
"RTN","EASUM9",138,0)
 ..D ERRBULL^IVMPREC7,MAIL^IVMUFNC()
"RTN","EASUM9",139,0)
 ..S IVMFERR=""
"RTN","EASUM9",140,0)
 ..D ACK^IVMPREC
"RTN","EASUM9",141,0)
 ..Q
"RTN","EASUM9",142,0)
 .S IVMVAMCA=$P(^(0),"^",2) ; dependent active?
"RTN","EASUM9",143,0)
 .S DA(1)=IVM12,DA=IVM121,DIK="^DGPR(408.12,"_DA(1)_",""E"","
"RTN","EASUM9",144,0)
 .D ^DIK K DA(1),DA,DIK
"RTN","EASUM9",145,0)
 .Q:'IVMVAMCA  ; quit if inactivated VAMC dependent 
"RTN","EASUM9",146,0)
 .S IVM13=+$P($P($G(^DGPR(408.12,+IVM12,0)),"^",3),";")
"RTN","EASUM9",147,0)
 .D EN^EASUM8
"RTN","EASUM9",148,0)
 .Q
"RTN","EASUM9",149,0)
 ;
"RTN","EASUM9",150,0)
 Q:$D(IVMFERR)
"RTN","EASUM9",151,0)
 D EN1^EASUM8
"RTN","EASUM9",152,0)
 Q
"RTN","EASUM9",153,0)
 ;
"RTN","EASUM9",154,0)
ERRBULL ; build mail message for transmission to IVM mail group notifying site
"RTN","EASUM9",155,0)
 ; of upload error.
"RTN","EASUM9",156,0)
 S IVMPAT=$$PT^IVMUFNC4(DFN)
"RTN","EASUM9",157,0)
 S XMSUB="IVM - MEANS TEST UPLOAD"
"RTN","EASUM9",158,0)
 S IVMTEXT(1)="The following error occurred when an Income Verification Match"
"RTN","EASUM9",159,0)
 S IVMTEXT(2)="verified Means Test was being uploaded for the following patient:"
"RTN","EASUM9",160,0)
 S IVMTEXT(3)=" "
"RTN","EASUM9",161,0)
 S IVMTEXT(4)=" NAME: "_$P(IVMPAT,"^")
"RTN","EASUM9",162,0)
 S IVMTEXT(5)=" ID: "_$P(IVMPAT,"^",2)
"RTN","EASUM9",163,0)
 S IVMTEXT(6)=" ERROR: "_IVMTEXT(6)
"RTN","EASUM9",164,0)
 Q
"RTN","EASUM9",165,0)
 ;
"RTN","EASUM9",166,0)
MTBULL ; build mail message for transmission to IVM mail group notifying them
"RTN","EASUM9",167,0)
 ; an IVM verified MT/CT has been uploaded into DHCP for a patient.
"RTN","EASUM9",168,0)
 ;
"RTN","EASUM9",169,0)
 S IVMPAT=$$PT^IVMUFNC4(DFN)
"RTN","EASUM9",170,0)
 S XMSUB="IVM - INCOME TEST UPLOAD for "_$P($P(IVMPAT,"^"),",")_" ("_$P(IVMPAT,"^",3)_")"
"RTN","EASUM9",171,0)
 S IVMTEXT(1)="An Income Verification Match verified "
"RTN","EASUM9",172,0)
 S IVMTEXT(1)=IVMTEXT(1)_^DG(408.33,DGMTYPT,0)_" has been uploaded"
"RTN","EASUM9",173,0)
 S IVMTEXT(2)="for the following patient:"
"RTN","EASUM9",174,0)
 S IVMTEXT(3)=" "
"RTN","EASUM9",175,0)
 S IVMTEXT(4)=" NAME: "_$P(IVMPAT,"^")
"RTN","EASUM9",176,0)
 S IVMTEXT(5)=" ID: "_$P(IVMPAT,"^",2)
"RTN","EASUM9",177,0)
 S Y=IVMMTDT X ^DD("DD")
"RTN","EASUM9",178,0)
 S IVMTEXT(6)=" DATE OF TEST: "_Y
"RTN","EASUM9",179,0)
 ;set previous sts from previous 408.31 or previous RX sts
"RTN","EASUM9",180,0)
 S IVMTEXT(7)=" PREV CATEGORY: "
"RTN","EASUM9",181,0)
 I DGMTYPT=2 D
"RTN","EASUM9",182,0)
 . S IVMTEXT(7)=IVMTEXT(7)_IVMCEB
"RTN","EASUM9",183,0)
 E  D
"RTN","EASUM9",184,0)
 . S IVMTEXT(7)=IVMTEXT(7)_$P($G(^DG(408.32,+$P(IVMMT31,"^",3),0)),"^",1)
"RTN","EASUM9",185,0)
 ;
"RTN","EASUM9",186,0)
 S IVMTEXT(8)=" NEW CATEGORY: "_DGCAT
"RTN","EASUM9",187,0)
 I IVM5 S Y=IVM5 X ^DD("DD") S IVMTEXT(9)=" DATE/TIME OF ADJUDICATION: "_Y
"RTN","EASUM9",188,0)
 Q
"VER")
8.0^22.0
**END**
**END**
