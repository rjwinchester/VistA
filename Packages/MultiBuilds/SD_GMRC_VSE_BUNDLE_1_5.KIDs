KIDS Distribution saved on Mar 20, 2018@10:18:57
SD GMRC VSE BUNDLE 1.5
**KIDS**:SD GMRC VSE BUNDLE 1.5^SD*5.3*679^GMRC*3.0*98^

**INSTALL NAME**
SD GMRC VSE BUNDLE 1.5
"BLD",10323,0)
SD GMRC VSE BUNDLE 1.5^^1^3180320^y
"BLD",10323,1,0)
^^1^1^3180104^
"BLD",10323,1,1,0)
SD GMRC VSE BUNDLE 1.5
"BLD",10323,6.3)
6
"BLD",10323,10,0)
^9.63^2^2
"BLD",10323,10,1,0)
SD*5.3*679^1
"BLD",10323,10,2,0)
GMRC*3.0*98^1
"BLD",10323,10,"B","GMRC*3.0*98",2)

"BLD",10323,10,"B","SD*5.3*679",1)

"BLD",10323,"KRN",0)
^9.67PA^779.2^20
"BLD",10323,"KRN",.4,0)
.4
"BLD",10323,"KRN",.401,0)
.401
"BLD",10323,"KRN",.402,0)
.402
"BLD",10323,"KRN",.403,0)
.403
"BLD",10323,"KRN",.5,0)
.5
"BLD",10323,"KRN",.84,0)
.84
"BLD",10323,"KRN",3.6,0)
3.6
"BLD",10323,"KRN",3.8,0)
3.8
"BLD",10323,"KRN",9.2,0)
9.2
"BLD",10323,"KRN",9.8,0)
9.8
"BLD",10323,"KRN",19,0)
19
"BLD",10323,"KRN",19.1,0)
19.1
"BLD",10323,"KRN",101,0)
101
"BLD",10323,"KRN",409.61,0)
409.61
"BLD",10323,"KRN",771,0)
771
"BLD",10323,"KRN",779.2,0)
779.2
"BLD",10323,"KRN",870,0)
870
"BLD",10323,"KRN",8989.51,0)
8989.51
"BLD",10323,"KRN",8989.52,0)
8989.52
"BLD",10323,"KRN",8994,0)
8994
"BLD",10323,"KRN","B",.4,.4)

"BLD",10323,"KRN","B",.401,.401)

"BLD",10323,"KRN","B",.402,.402)

"BLD",10323,"KRN","B",.403,.403)

"BLD",10323,"KRN","B",.5,.5)

"BLD",10323,"KRN","B",.84,.84)

"BLD",10323,"KRN","B",3.6,3.6)

"BLD",10323,"KRN","B",3.8,3.8)

"BLD",10323,"KRN","B",9.2,9.2)

"BLD",10323,"KRN","B",9.8,9.8)

"BLD",10323,"KRN","B",19,19)

"BLD",10323,"KRN","B",19.1,19.1)

"BLD",10323,"KRN","B",101,101)

"BLD",10323,"KRN","B",409.61,409.61)

"BLD",10323,"KRN","B",771,771)

"BLD",10323,"KRN","B",779.2,779.2)

"BLD",10323,"KRN","B",870,870)

"BLD",10323,"KRN","B",8989.51,8989.51)

"BLD",10323,"KRN","B",8989.52,8989.52)

"BLD",10323,"KRN","B",8994,8994)

"MBREQ")
0
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"VER")
8.0^22.2
**INSTALL NAME**
SD*5.3*679
"BLD",10321,0)
SD*5.3*679^SCHEDULING^0^3180320^y
"BLD",10321,1,0)
^^433^433^3180320^
"BLD",10321,1,1,0)
This patch contains the VistA components necessary to support the 1.5 
"BLD",10321,1,2,0)
release of VistA Scheduling Enhancements (VSE) as well as addressing the
"BLD",10321,1,3,0)
following issues:
"BLD",10321,1,4,0)
 
"BLD",10321,1,5,0)
1. I15980703FY17 - If user has begun to schedule an appointment on a 
"BLD",10321,1,6,0)
                   holiday and ability to book appointments on holidays 
"BLD",10321,1,7,0)
                   is turned off in the meantime, the appointment can be
"BLD",10321,1,8,0)
                   booked.
"BLD",10321,1,9,0)
2. R16256976FY17 - If user enters a zip code in the Veteran's permanent
"BLD",10321,1,10,0)
                   address on the Patient Info form, and the name of the
"BLD",10321,1,11,0)
                   associated county is contained in another county in the
"BLD",10321,1,12,0)
                   same state (such as ROBERTS and ROBERTSON), an error
"BLD",10321,1,13,0)
                   message would be displayed.
"BLD",10321,1,14,0)
3. I16857061FY18 - If a scheduler makes or cancels an appointment for a 
"BLD",10321,1,15,0)
                   consult and the current time ends in a zero (like 
"BLD",10321,1,16,0)
                   9:40), then the event recorded in the consult will
"BLD",10321,1,17,0)
                   display at the end of the consult event history instead
"BLD",10321,1,18,0)
                   of in sequence.
"BLD",10321,1,19,0)
 
"BLD",10321,1,20,0)
The third issue requires a fix to repair existing data effected by the
"BLD",10321,1,21,0)
issue. That repair is done in a separate patch, which will be bundled
"BLD",10321,1,22,0)
with this one. Below is a list of all the applications involved in this
"BLD",10321,1,23,0)
bundle along with their patch number:
"BLD",10321,1,24,0)
 
"BLD",10321,1,25,0)
   APPLICATION/VERSION                                   PATCH
"BLD",10321,1,26,0)
   ---------------------------------------------------------------
"BLD",10321,1,27,0)
   SCHEDULING (SD) V. 5.3                                SD*5.3*679
"BLD",10321,1,28,0)
   CONSULT/REQUEST TRACKING (GMRC) V. 3.0                GMRC*3.0*98
"BLD",10321,1,29,0)
 
"BLD",10321,1,30,0)
Patch Components
"BLD",10321,1,31,0)
================
"BLD",10321,1,32,0)
 
"BLD",10321,1,33,0)
Files & Fields Associated:
"BLD",10321,1,34,0)
 
"BLD",10321,1,35,0)
File Name (#)                                             New/Modified/
"BLD",10321,1,36,0)
  Sub-file Name (#)   Field Name (Number)                   Deleted
"BLD",10321,1,37,0)
-------------------   ---------------------------------   -------------
"BLD",10321,1,38,0)
N/A
"BLD",10321,1,39,0)
 
"BLD",10321,1,40,0)
Bulletins Associated:
"BLD",10321,1,41,0)
                                                          New/Modified/
"BLD",10321,1,42,0)
Bulletin Name                                               Deleted    
"BLD",10321,1,43,0)
-------------                                             -------------
"BLD",10321,1,44,0)
N/A
"BLD",10321,1,45,0)
 
"BLD",10321,1,46,0)
 
"BLD",10321,1,47,0)
 
"BLD",10321,1,48,0)
Dialogs Associated:
"BLD",10321,1,49,0)
                                                          New/Modified/
"BLD",10321,1,50,0)
Dialog Name                                                 Deleted    
"BLD",10321,1,51,0)
-----------                                               -------------
"BLD",10321,1,52,0)
N/A
"BLD",10321,1,53,0)
 
"BLD",10321,1,54,0)
 
"BLD",10321,1,55,0)
 
"BLD",10321,1,56,0)
Forms Associated:
"BLD",10321,1,57,0)
                                                          New/Modified/
"BLD",10321,1,58,0)
Form Name                    File Name (Number)             Deleted    
"BLD",10321,1,59,0)
---------                    ------------------           -------------
"BLD",10321,1,60,0)
N/A
"BLD",10321,1,61,0)
 
"BLD",10321,1,62,0)
 
"BLD",10321,1,63,0)
 
"BLD",10321,1,64,0)
Functions Associated:
"BLD",10321,1,65,0)
                                                          New/Modified/
"BLD",10321,1,66,0)
Function Name                                               Deleted    
"BLD",10321,1,67,0)
-------------                                             -------------
"BLD",10321,1,68,0)
N/A
"BLD",10321,1,69,0)
 
"BLD",10321,1,70,0)
 
"BLD",10321,1,71,0)
 
"BLD",10321,1,72,0)
HL Logical Link:
"BLD",10321,1,73,0)
                                                          New/Modified/
"BLD",10321,1,74,0)
HL Logical Name                                             Deleted    
"BLD",10321,1,75,0)
---------------                                           -------------
"BLD",10321,1,76,0)
N/A
"BLD",10321,1,77,0)
 
"BLD",10321,1,78,0)
 
"BLD",10321,1,79,0)
 
"BLD",10321,1,80,0)
HL7 Application Parameters:
"BLD",10321,1,81,0)
                                                          New/Modified/
"BLD",10321,1,82,0)
HL7 Parameter Name                                          Deleted    
"BLD",10321,1,83,0)
------------------                                        -------------
"BLD",10321,1,84,0)
N/A
"BLD",10321,1,85,0)
 
"BLD",10321,1,86,0)
 
"BLD",10321,1,87,0)
 
"BLD",10321,1,88,0)
HLO Application Registry:
"BLD",10321,1,89,0)
                                                          New/Modified/
"BLD",10321,1,90,0)
HLO Registry Name                                           Deleted    
"BLD",10321,1,91,0)
-----------------                                         -------------
"BLD",10321,1,92,0)
N/A
"BLD",10321,1,93,0)
 
"BLD",10321,1,94,0)
 
"BLD",10321,1,95,0)
 
"BLD",10321,1,96,0)
Help Frames Associated:
"BLD",10321,1,97,0)
                                                          New/Modified/
"BLD",10321,1,98,0)
Help Frame Name                                             Deleted    
"BLD",10321,1,99,0)
---------------                                           -------------
"BLD",10321,1,100,0)
N/A
"BLD",10321,1,101,0)
 
"BLD",10321,1,102,0)
 
"BLD",10321,1,103,0)
 
"BLD",10321,1,104,0)
Mail Groups Associated:
"BLD",10321,1,105,0)
                                                          New/Modified/
"BLD",10321,1,106,0)
Mail Group Name                                             Deleted    
"BLD",10321,1,107,0)
---------------                                           -------------
"BLD",10321,1,108,0)
N/A
"BLD",10321,1,109,0)
 
"BLD",10321,1,110,0)
 
"BLD",10321,1,111,0)
 
"BLD",10321,1,112,0)
Options Associated:
"BLD",10321,1,113,0)
                                                          New/Modified/
"BLD",10321,1,114,0)
Option Name                                    Type         Deleted    
"BLD",10321,1,115,0)
-----------                                    ----       -------------
"BLD",10321,1,116,0)
CLINICAL SCHEDULING PROCEDURE CALLS [SDECRPC]  Broker     MODIFIED
"BLD",10321,1,117,0)
 
"BLD",10321,1,118,0)
 
"BLD",10321,1,119,0)
 
"BLD",10321,1,120,0)
Parameter Definitions:
"BLD",10321,1,121,0)
                                                          New/Modified/
"BLD",10321,1,122,0)
Parameter Name                                              Deleted    
"BLD",10321,1,123,0)
--------------                                            -------------
"BLD",10321,1,124,0)
N/A
"BLD",10321,1,125,0)
 
"BLD",10321,1,126,0)
 
"BLD",10321,1,127,0)
 
"BLD",10321,1,128,0)
Parameter Template:
"BLD",10321,1,129,0)
                                                          New/Modified/
"BLD",10321,1,130,0)
Template Name                                               Deleted    
"BLD",10321,1,131,0)
-------------                                             -------------
"BLD",10321,1,132,0)
N/A
"BLD",10321,1,133,0)
 
"BLD",10321,1,134,0)
 
"BLD",10321,1,135,0)
 
"BLD",10321,1,136,0)
Protocols Associated:
"BLD",10321,1,137,0)
                                                          New/Modified/
"BLD",10321,1,138,0)
Protocol Name                                               Deleted    
"BLD",10321,1,139,0)
-------------                                             -------------
"BLD",10321,1,140,0)
N/A
"BLD",10321,1,141,0)
 
"BLD",10321,1,142,0)
 
"BLD",10321,1,143,0)
 
"BLD",10321,1,144,0)
Remote Procedures Associated:
"BLD",10321,1,145,0)
                                                          New/Modified/
"BLD",10321,1,146,0)
Remote Procedure Name                                       Deleted    
"BLD",10321,1,147,0)
---------------------                                     -------------
"BLD",10321,1,148,0)
SDEC BOOKHLDY                                             New 
"BLD",10321,1,149,0)
 
"BLD",10321,1,150,0)
 
"BLD",10321,1,151,0)
 
"BLD",10321,1,152,0)
Security Keys Associated:
"BLD",10321,1,153,0)
                                                          New/Modified/
"BLD",10321,1,154,0)
Security Key Name                                           Deleted    
"BLD",10321,1,155,0)
-----------------                                         -------------
"BLD",10321,1,156,0)
N/A
"BLD",10321,1,157,0)
 
"BLD",10321,1,158,0)
 
"BLD",10321,1,159,0)
 
"BLD",10321,1,160,0)
Templates, Input Associated:
"BLD",10321,1,161,0)
                                                          New/Modified/
"BLD",10321,1,162,0)
Template Name      Type      File Name (Number)             Deleted    
"BLD",10321,1,163,0)
-------------      ----      ------------------           -------------
"BLD",10321,1,164,0)
N/A
"BLD",10321,1,165,0)
 
"BLD",10321,1,166,0)
 
"BLD",10321,1,167,0)
 
"BLD",10321,1,168,0)
Templates, List Associated:
"BLD",10321,1,169,0)
                                                          New/Modified/
"BLD",10321,1,170,0)
Template Name      Type                                     Deleted    
"BLD",10321,1,171,0)
-------------      ----                                   -------------
"BLD",10321,1,172,0)
N/A
"BLD",10321,1,173,0)
 
"BLD",10321,1,174,0)
 
"BLD",10321,1,175,0)
 
"BLD",10321,1,176,0)
Templates, Print Associated:
"BLD",10321,1,177,0)
                                                          New/Modified/
"BLD",10321,1,178,0)
Template Name      Type      File Name (Number)             Deleted    
"BLD",10321,1,179,0)
-------------      ----      ------------------           -------------
"BLD",10321,1,180,0)
N/A
"BLD",10321,1,181,0)
 
"BLD",10321,1,182,0)
 
"BLD",10321,1,183,0)
 
"BLD",10321,1,184,0)
Templates, Sort Associated:
"BLD",10321,1,185,0)
                                                          New/Modified/
"BLD",10321,1,186,0)
Template Name      Type      File Name (Number)             Deleted    
"BLD",10321,1,187,0)
-------------      ----      ------------------           -------------
"BLD",10321,1,188,0)
N/A
"BLD",10321,1,189,0)
 
"BLD",10321,1,190,0)
 
"BLD",10321,1,191,0)
Additional Information:
"BLD",10321,1,192,0)
N/A
"BLD",10321,1,193,0)
 
"BLD",10321,1,194,0)
 
"BLD",10321,1,195,0)
New Service Requests (NSRs)
"BLD",10321,1,196,0)
----------------------------  
"BLD",10321,1,197,0)
N/A
"BLD",10321,1,198,0)
 
"BLD",10321,1,199,0)
 
"BLD",10321,1,200,0)
Patient Safety Issues (PSIs)
"BLD",10321,1,201,0)
-----------------------------
"BLD",10321,1,202,0)
N/A
"BLD",10321,1,203,0)
 
"BLD",10321,1,204,0)
 
"BLD",10321,1,205,0)
Service Desk Manager (SDM) Ticket(s) & Overview
"BLD",10321,1,206,0)
-----------------------------------------------
"BLD",10321,1,207,0)
1. I15980703FY17 ENH REQ: VSE issue: Scheduling "clinics" on a specific 
"BLD",10321,1,208,0)
                 holiday opens up ALL holidays to scheduling.
"BLD",10321,1,209,0)
  
"BLD",10321,1,210,0)
Problem:
"BLD",10321,1,211,0)
-------
"BLD",10321,1,212,0)
When setting up clinics, VistA recognizes holidays and offers the option 
"BLD",10321,1,213,0)
to schedule in selected clinics on holidays as a second step in the clinic
"BLD",10321,1,214,0)
set up process (includes education day).
"BLD",10321,1,215,0)
 
"BLD",10321,1,216,0)
The clinic day is initially set as a holiday. Then, to be able to 
"BLD",10321,1,217,0)
schedule on a selected holiday such as Education Day, Doreen or Michelle
"BLD",10321,1,218,0)
would go back in and answer "yes" to the question in VistA "Schedule on
"BLD",10321,1,219,0)
holidays?" to be able to subsequently go in and open up slots to be
"BLD",10321,1,220,0)
scheduled into on particular holidays. VistA allows this without opening
"BLD",10321,1,221,0)
up ALL holidays. It seems, however, that VSE does NOT. In VSE, this opens
"BLD",10321,1,222,0)
up ALL holidays to scheduling, ie. it shows the clinics as open for
"BLD",10321,1,223,0)
scheduling. 
"BLD",10321,1,224,0)
 
"BLD",10321,1,225,0)
Resolution:
"BLD",10321,1,226,0)
----------
"BLD",10321,1,227,0)
The VSE GUI Client has been corrected to check that the slot is available 
"BLD",10321,1,228,0)
before attempting to book a holiday appointment.
"BLD",10321,1,229,0)
 
"BLD",10321,1,230,0)
2. R16256976FY17 VS GUI 2.0.0.12 - New Issue? - Error pop up indicating 
"BLD",10321,1,231,0)
county does not belong in state - OVAC Edit 
"BLD",10321,1,232,0)
  
"BLD",10321,1,233,0)
Problem:
"BLD",10321,1,234,0)
-------
"BLD",10321,1,235,0)
When you enter the zip code, the state/county populate correctly, but when
"BLD",10321,1,236,0)
you click OK, you get "County GREEN does not belong to state GREEN."
"BLD",10321,1,237,0)
 
"BLD",10321,1,238,0)
Resolution:
"BLD",10321,1,239,0)
----------
"BLD",10321,1,240,0)
The code that looks up the county ID in the state has been corrected so 
"BLD",10321,1,241,0)
that it no longer encounters this error when one county's name (in this
"BLD",10321,1,242,0)
instance Green county) is contained in another (in this instance, Green
"BLD",10321,1,243,0)
Lake county).
"BLD",10321,1,244,0)
In addition, the error message has been corrected so that the actual state
"BLD",10321,1,245,0)
name is displayed rather than displaying the county name a second time.
"BLD",10321,1,246,0)
 
"BLD",10321,1,247,0)
3. I16857061FY18 Consults are showing activities out of order in CPRS; 
"BLD",10321,1,248,0)
                 VistA FM shows activities in correct chronological order
"BLD",10321,1,249,0)
  
"BLD",10321,1,250,0)
Problem:
"BLD",10321,1,251,0)
-------
"BLD",10321,1,252,0)
Our site is experiencing issues with Consults where the activities being 
"BLD",10321,1,253,0)
recorded are out of order. I originally thought this was a result of the 
"BLD",10321,1,254,0)
CONSULT TOOLBOX tool, but there are multiple sites reporting this issue, 
"BLD",10321,1,255,0)
and the consensus is that this is being caused by VSE.
"BLD",10321,1,256,0)
 
"BLD",10321,1,257,0)
Resolution:
"BLD",10321,1,258,0)
----------
"BLD",10321,1,259,0)
The code that saves the SCHEDULED or STATUS CHANGE event when the 
"BLD",10321,1,260,0)
appointment is scheduled or canceled was corrected to save the timestamp
"BLD",10321,1,261,0)
correctly.
"BLD",10321,1,262,0)
 
"BLD",10321,1,263,0)
 
"BLD",10321,1,264,0)
Test Sites:
"BLD",10321,1,265,0)
----------
"BLD",10321,1,266,0)
TBA
"BLD",10321,1,267,0)
 
"BLD",10321,1,268,0)
 
"BLD",10321,1,269,0)
Documentation Retrieval Instructions
"BLD",10321,1,270,0)
------------------------------------ 
"BLD",10321,1,271,0)
Updated documentation describing the new functionality introduced by this 
"BLD",10321,1,272,0)
patch is available.
"BLD",10321,1,273,0)
 
"BLD",10321,1,274,0)
The preferred method is to FTP the files from 
"BLD",10321,1,275,0)
ftp://download.vista.domain.ext/.
"BLD",10321,1,276,0)
This transmits the files from the first available FTP server. Sites may 
"BLD",10321,1,277,0)
also elect to retrieve software directly from a specific server as 
"BLD",10321,1,278,0)
follows:
"BLD",10321,1,279,0)
 
"BLD",10321,1,280,0)
 Hines          ftp.fo-hines.domain.ext   <ftp://ftp.fo-hines.domain.ext>
"BLD",10321,1,281,0)
 Salt Lake City ftp.fo-slc.domain.ext     <ftp://ftp.fo-slc.domain.ext>
"BLD",10321,1,282,0)
 
"BLD",10321,1,283,0)
Documentation can also be found on the VA Software Documentation Library 
"BLD",10321,1,284,0)
at:
"BLD",10321,1,285,0)
http://www4.domain.ext/vdl/
"BLD",10321,1,286,0)
 
"BLD",10321,1,287,0)
Title                                          File Name          FTP Mode
"BLD",10321,1,288,0)
--------------------------------------------------------------------------
"BLD",10321,1,289,0)
VistA Scheduling Enhancements GUI User Guide   VSE_VA_GUI_UG.PDF  Binary
"BLD",10321,1,290,0)
VistA Scheduling Enhancements Technical Manual VSE_TM.PDF         Binary
"BLD",10321,1,291,0)
 
"BLD",10321,1,292,0)
 
"BLD",10321,1,293,0)
Patch Installation:
"BLD",10321,1,294,0)
 
"BLD",10321,1,295,0)
 
"BLD",10321,1,296,0)
Pre/Post Installation Overview
"BLD",10321,1,297,0)
------------------------------
"BLD",10321,1,298,0)
This patch should take less than 5 minutes to install.
"BLD",10321,1,299,0)
 
"BLD",10321,1,300,0)
This patch should not be installed with VistA Scheduling GUI users on the
"BLD",10321,1,301,0)
system and it is recommended that it be installed during non-peak hours to
"BLD",10321,1,302,0)
minimize potential disruption to other users.
"BLD",10321,1,303,0)
 
"BLD",10321,1,304,0)
This patch contains no PRE Installation processing.
"BLD",10321,1,305,0)
 
"BLD",10321,1,306,0)
The other patch bundled with this one (GMRC*3.0*98) contains a 
"BLD",10321,1,307,0)
post-install routine that will repair bad data created by the consult
"BLD",10321,1,308,0)
comment issue.
"BLD",10321,1,309,0)
 
"BLD",10321,1,310,0)
 
"BLD",10321,1,311,0)
Installation Instructions
"BLD",10321,1,312,0)
-------------------------
"BLD",10321,1,313,0)
This installation will update routines that support VistA Scheduling GUI 
"BLD",10321,1,314,0)
Application Programming Interfaces (APIs).
"BLD",10321,1,315,0)
 
"BLD",10321,1,316,0)
1.  OBTAIN PATCHES
"BLD",10321,1,317,0)
    --------------
"BLD",10321,1,318,0)
    Obtain the host file SD_GMRC_VSE_BUNDLE_1_5.KID, which contains the
"BLD",10321,1,319,0)
    following patches:
"BLD",10321,1,320,0)
  
"BLD",10321,1,321,0)
        SD*5.3*679
"BLD",10321,1,322,0)
        GMRC*3.0*98
"BLD",10321,1,323,0)
  
"BLD",10321,1,324,0)
     Sites can retrieve VistA software from the following FTP addresses.
"BLD",10321,1,325,0)
     The preferred method is to FTP the files from:
"BLD",10321,1,326,0)
  
"BLD",10321,1,327,0)
                    download.vista.domain.ext
"BLD",10321,1,328,0)
  
"BLD",10321,1,329,0)
     This will transmit the files from the first available FTP server.
"BLD",10321,1,330,0)
     Sites may also elect to retrieve software directly from a specific
"BLD",10321,1,331,0)
     server as follows:
"BLD",10321,1,332,0)
  
"BLD",10321,1,333,0)
       Hines                   ftp.fo-hines.domain.ext
"BLD",10321,1,334,0)
       Salt Lake City          ftp.fo-slc.domain.ext
"BLD",10321,1,335,0)
  
"BLD",10321,1,336,0)
     The SD_GMRC_VSE_BUNDLE_1_5.KID host file is located in the
"BLD",10321,1,337,0)
     anonymous.software directory. Use the American Standard Code for 
"BLD",10321,1,338,0)
     Information Interchange (ASCII) Mode when downloading the file.
"BLD",10321,1,339,0)
  
"BLD",10321,1,340,0)
  
"BLD",10321,1,341,0)
  2.  START UP KIDS
"BLD",10321,1,342,0)
      -------------
"BLD",10321,1,343,0)
      Start up the Kernel Installation and Distribution System Menu option
"BLD",10321,1,344,0)
      [XPD MAIN]:
"BLD",10321,1,345,0)
  
"BLD",10321,1,346,0)
         Edits and Distribution ...
"BLD",10321,1,347,0)
         Utilities ...
"BLD",10321,1,348,0)
         Installation ...
"BLD",10321,1,349,0)
  
"BLD",10321,1,350,0)
      Select Kernel Installation & Distribution System Option: 
"BLD",10321,1,351,0)
Installation
"BLD",10321,1,352,0)
                                                               ---
"BLD",10321,1,353,0)
         Load a Distribution
"BLD",10321,1,354,0)
         Print Transport Global
"BLD",10321,1,355,0)
         Compare Transport Global to Current System
"BLD",10321,1,356,0)
         Verify Checksums in Transport Global
"BLD",10321,1,357,0)
         Install Package(s)
"BLD",10321,1,358,0)
         Restart Install of Package(s)
"BLD",10321,1,359,0)
         Unload a Distribution
"BLD",10321,1,360,0)
         Backup a Transport Global
"BLD",10321,1,361,0)
  
"BLD",10321,1,362,0)
      Select Installation Option:
"BLD",10321,1,363,0)
  
"BLD",10321,1,364,0)
3.  LOAD TRANSPORT GLOBAL FOR MULTI-BUILD
"BLD",10321,1,365,0)
    -------------------------------------
"BLD",10321,1,366,0)
    From the Installation menu, select the Load a Distribution option.
"BLD",10321,1,367,0)
  
"BLD",10321,1,368,0)
    When prompted for "Enter a Host File:", enter the full directory path
"BLD",10321,1,369,0)
    where you saved the host file SD_GMRC_VSE_BUNDLE_1_5.KID (e.g.,
"BLD",10321,1,370,0)
    SYS$SYSDEVICE:[ANONYMOUS]SD_GMRC_VSE_BUNDLE_1_5.KID).
"BLD",10321,1,371,0)
  
"BLD",10321,1,372,0)
    When prompted for "OK to continue with Load? NO//", enter "YES."
"BLD",10321,1,373,0)
  
"BLD",10321,1,374,0)
    The following will display:
"BLD",10321,1,375,0)
  
"BLD",10321,1,376,0)
      Loading Distribution...
"BLD",10321,1,377,0)
  
"BLD",10321,1,378,0)
        SD GMRC VSE BUNDLE 1.5
"BLD",10321,1,379,0)
        SD*5.3*679
"BLD",10321,1,380,0)
        GMRC*3.0*98
"BLD",10321,1,381,0)
  
"BLD",10321,1,382,0)
      Use INSTALL NAME: SD GMRC VSE BUNDLE 1.5 to install this
"BLD",10321,1,383,0)
      distribution.
"BLD",10321,1,384,0)
  
"BLD",10321,1,385,0)
4.  RUN OPTIONAL INSTALLATION OPTIONS FOR MULTI-BUILD
"BLD",10321,1,386,0)
    -------------------------------------------------
"BLD",10321,1,387,0)
    From the Installation menu, you may select to use the following
"BLD",10321,1,388,0)
    options (when prompted for the INSTALL NAME, enter
"BLD",10321,1,389,0)
    SD GMRC VSE BUNDLE 1.5):
"BLD",10321,1,390,0)
  
"BLD",10321,1,391,0)
    a.  Backup a Transport Global - This option will create a backup
"BLD",10321,1,392,0)
        message of any routines exported with this patch. It will not
"BLD",10321,1,393,0)
        backup any other changes such as data dictionaries or templates.
"BLD",10321,1,394,0)
    b.  Compare Transport Global to Current System - This option will
"BLD",10321,1,395,0)
        allow you to view all changes that will be made when this patch
"BLD",10321,1,396,0)
        is installed.  It compares all components of this patch
"BLD",10321,1,397,0)
        (routines, data dictionaries, templates, etc.).
"BLD",10321,1,398,0)
    c.  Verify Checksums in Transport Global - This option will allow
"BLD",10321,1,399,0)
        you to ensure the integrity of the routines that are in the
"BLD",10321,1,400,0)
        transport global.
"BLD",10321,1,401,0)
  
"BLD",10321,1,402,0)
5.  INSTALL MULTI-BUILD
"BLD",10321,1,403,0)
    -------------------
"BLD",10321,1,404,0)
    This is the step to start the installation of this KIDS patch.  This
"BLD",10321,1,405,0)
    will need to be run for the SD GMRC VSE BUNDLE 1.5 build.
"BLD",10321,1,406,0)
  
"BLD",10321,1,407,0)
    a.  Choose the Install Package(s) option to start the patch
"BLD",10321,1,408,0)
        install.
"BLD",10321,1,409,0)
    b.  When prompted for the "Select INSTALL NAME:", enter 
"BLD",10321,1,410,0)
        SD GMRC VSE BUNDLE 1.5
"BLD",10321,1,411,0)
    c.  When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of
"BLD",10321,1,412,0)
        Install? NO//", enter NO.
"BLD",10321,1,413,0)
    d.  When prompted "Want KIDS to INHIBIT LOGONs during the install?
"BLD",10321,1,414,0)
        NO//", enter NO.
"BLD",10321,1,415,0)
    e.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
"BLD",10321,1,416,0)
and
"BLD",10321,1,417,0)
        Protocols? NO//' 
"BLD",10321,1,418,0)
          Respond with 'YES'
"BLD",10321,1,419,0)
          Options to mark as out of order:
"BLD",10321,1,420,0)
             Clinical Scheduling Procedure Calls [SDECRPC]
"BLD",10321,1,421,0)
             Scheduling Manager's Menu           [SDMGR]
"BLD",10321,1,422,0)
             Supervisor Menu                     [SDSUP]
"BLD",10321,1,423,0)
             Scheduling Menu                     [SDUSER]
"BLD",10321,1,424,0)
             Clinic Letter Report                [SDRR CLINIC LETTER 
"BLD",10321,1,425,0)
REPORT]
"BLD",10321,1,426,0)
    f.  If prompted 'Delay Install (Minutes):  (0 - 60): 0//' respond 0. 
"BLD",10321,1,427,0)
 
"BLD",10321,1,428,0)
 
"BLD",10321,1,429,0)
Post-Installation Instructions
"BLD",10321,1,430,0)
------------------------------
"BLD",10321,1,431,0)
In order to verify the patch post-installation routine was run 
"BLD",10321,1,432,0)
successfully, please examine the Install File for this patch and 
"BLD",10321,1,433,0)
report any error messages to Product Support.
"BLD",10321,4,0)
^9.64PA^^
"BLD",10321,6.3)
15
"BLD",10321,"KRN",0)
^9.67PA^779.2^20
"BLD",10321,"KRN",.4,0)
.4
"BLD",10321,"KRN",.4,"NM",0)
^9.68A^^
"BLD",10321,"KRN",.401,0)
.401
"BLD",10321,"KRN",.402,0)
.402
"BLD",10321,"KRN",.403,0)
.403
"BLD",10321,"KRN",.5,0)
.5
"BLD",10321,"KRN",.84,0)
.84
"BLD",10321,"KRN",3.6,0)
3.6
"BLD",10321,"KRN",3.8,0)
3.8
"BLD",10321,"KRN",9.2,0)
9.2
"BLD",10321,"KRN",9.8,0)
9.8
"BLD",10321,"KRN",9.8,"NM",0)
^9.68A^6^6
"BLD",10321,"KRN",9.8,"NM",1,0)
SDEC^^0^B133133924
"BLD",10321,"KRN",9.8,"NM",2,0)
SDEC32^^0^B116278285
"BLD",10321,"KRN",9.8,"NM",3,0)
SDEC53^^0^B224580253
"BLD",10321,"KRN",9.8,"NM",4,0)
SDEC07A^^0^B84573487
"BLD",10321,"KRN",9.8,"NM",5,0)
SDEC28^^0^B114287193
"BLD",10321,"KRN",9.8,"NM",6,0)
SDEC09^^0^B94558695
"BLD",10321,"KRN",9.8,"NM","B","SDEC",1)

"BLD",10321,"KRN",9.8,"NM","B","SDEC07A",4)

"BLD",10321,"KRN",9.8,"NM","B","SDEC09",6)

"BLD",10321,"KRN",9.8,"NM","B","SDEC28",5)

"BLD",10321,"KRN",9.8,"NM","B","SDEC32",2)

"BLD",10321,"KRN",9.8,"NM","B","SDEC53",3)

"BLD",10321,"KRN",19,0)
19
"BLD",10321,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",10321,"KRN",19,"NM",1,0)
SDECRPC^^0
"BLD",10321,"KRN",19,"NM","B","SDECRPC",1)

"BLD",10321,"KRN",19.1,0)
19.1
"BLD",10321,"KRN",101,0)
101
"BLD",10321,"KRN",409.61,0)
409.61
"BLD",10321,"KRN",771,0)
771
"BLD",10321,"KRN",779.2,0)
779.2
"BLD",10321,"KRN",870,0)
870
"BLD",10321,"KRN",8989.51,0)
8989.51
"BLD",10321,"KRN",8989.52,0)
8989.52
"BLD",10321,"KRN",8994,0)
8994
"BLD",10321,"KRN",8994,"NM",0)
^9.68A^1^1
"BLD",10321,"KRN",8994,"NM",1,0)
SDEC BOOKHLDY^^0
"BLD",10321,"KRN",8994,"NM","B","SDEC BOOKHLDY",1)

"BLD",10321,"KRN","B",.4,.4)

"BLD",10321,"KRN","B",.401,.401)

"BLD",10321,"KRN","B",.402,.402)

"BLD",10321,"KRN","B",.403,.403)

"BLD",10321,"KRN","B",.5,.5)

"BLD",10321,"KRN","B",.84,.84)

"BLD",10321,"KRN","B",3.6,3.6)

"BLD",10321,"KRN","B",3.8,3.8)

"BLD",10321,"KRN","B",9.2,9.2)

"BLD",10321,"KRN","B",9.8,9.8)

"BLD",10321,"KRN","B",19,19)

"BLD",10321,"KRN","B",19.1,19.1)

"BLD",10321,"KRN","B",101,101)

"BLD",10321,"KRN","B",409.61,409.61)

"BLD",10321,"KRN","B",771,771)

"BLD",10321,"KRN","B",779.2,779.2)

"BLD",10321,"KRN","B",870,870)

"BLD",10321,"KRN","B",8989.51,8989.51)

"BLD",10321,"KRN","B",8989.52,8989.52)

"BLD",10321,"KRN","B",8994,8994)

"BLD",10321,"QUES",0)
^9.62^^
"BLD",10321,"REQB",0)
^9.611^^
"KRN",19,11630,-1)
0^1
"KRN",19,11630,0)
SDECRPC^CLINICAL SCHEDULING PROCEDURE CALLS^^B^^^^^^^^
"KRN",19,11630,1,0)
^19.06^2^2^3180228^^^^
"KRN",19,11630,1,1,0)
This option hosts RPCs in the SDEC namespace.  CLINICAL SCHEDULING users 
"KRN",19,11630,1,2,0)
must have access to this option in order to use CLINICAL SCHEDULING.
"KRN",19,11630,99.1)
64281,43176
"KRN",19,11630,"RPC",0)
^19.05P^205^205
"KRN",19,11630,"RPC",1,0)
SDEC ACCGPTYG
"KRN",19,11630,"RPC",2,0)
SDEC ACCGROUP
"KRN",19,11630,"RPC",3,0)
SDEC ACCTYPE
"KRN",19,11630,"RPC",4,0)
SDEC ADDACCG
"KRN",19,11630,"RPC",5,0)
SDEC ADDACCTY
"KRN",19,11630,"RPC",6,0)
SDEC ADDAGI
"KRN",19,11630,"RPC",7,0)
SDEC ADDRES
"KRN",19,11630,"RPC",8,0)
SDEC ADDRESU
"KRN",19,11630,"RPC",9,0)
SDEC ADDRG
"KRN",19,11630,"RPC",10,0)
SDEC ADDRGI
"KRN",19,11630,"RPC",11,0)
SDEC APBLKALL
"KRN",19,11630,"RPC",12,0)
SDEC APBLKOV
"KRN",19,11630,"RPC",13,0)
SDEC APPADD
"KRN",19,11630,"RPC",14,0)
SDEC APPDEL
"KRN",19,11630,"RPC",15,0)
SDEC APPTEVLG
"KRN",19,11630,"RPC",16,0)
SDEC APPTLETR
"KRN",19,11630,"RPC",17,0)
SDEC APPTYPES
"KRN",19,11630,"RPC",18,0)
SDEC AVADD
"KRN",19,11630,"RPC",19,0)
SDEC AVDEL
"KRN",19,11630,"RPC",20,0)
SDEC AVDELDT
"KRN",19,11630,"RPC",21,0)
SDEC CANCKOUT
"KRN",19,11630,"RPC",22,0)
SDEC CANREAS
"KRN",19,11630,"RPC",23,0)
SDEC CHECKIN
"KRN",19,11630,"RPC",24,0)
SDEC CHECKOUT
"KRN",19,11630,"RPC",25,0)
SDEC CLINALL
"KRN",19,11630,"RPC",26,0)
SDEC CLINCAN
"KRN",19,11630,"RPC",27,0)
SDEC CLINDIS
"KRN",19,11630,"RPC",28,0)
SDEC CLINDISW
"KRN",19,11630,"RPC",29,0)
SDEC CLINLET
"KRN",19,11630,"RPC",30,0)
SDEC CLINLETW
"KRN",19,11630,"RPC",31,0)
SDEC CLINPROV
"KRN",19,11630,"RPC",32,0)
SDEC CLINSET
"KRN",19,11630,"RPC",33,0)
SDEC CLINSTOP
"KRN",19,11630,"RPC",34,0)
SDEC COPYAPPT
"KRN",19,11630,"RPC",35,0)
SDEC CPCANC
"KRN",19,11630,"RPC",36,0)
SDEC CPSTAT
"KRN",19,11630,"RPC",37,0)
SDEC CRSCHED
"KRN",19,11630,"RPC",38,0)
SDEC CSLOTSCH
"KRN",19,11630,"RPC",39,0)
SDEC CURFACG
"KRN",19,11630,"RPC",40,0)
SDEC CVARAPPT
"KRN",19,11630,"RPC",41,0)
SDEC DELAG
"KRN",19,11630,"RPC",42,0)
SDEC DELAGI
"KRN",19,11630,"RPC",43,0)
SDEC DELRESGP
"KRN",19,11630,"RPC",44,0)
SDEC DELRGI
"KRN",19,11630,"RPC",45,0)
SDEC DELRU
"KRN",19,11630,"RPC",46,0)
SDEC EDITAPPT
"KRN",19,11630,"RPC",47,0)
SDEC EHRPT
"KRN",19,11630,"RPC",48,0)
SDEC GETFAC
"KRN",19,11630,"RPC",49,0)
SDEC GETREGA
"KRN",19,11630,"RPC",50,0)
SDEC HLTHSUMM
"KRN",19,11630,"RPC",51,0)
SDEC HOLIDAY
"KRN",19,11630,"RPC",52,0)
SDEC HOSPLOC
"KRN",19,11630,"RPC",53,0)
SDEC IMHERE
"KRN",19,11630,"RPC",54,0)
SDEC NEWPERS
"KRN",19,11630,"RPC",55,0)
SDEC NOSHOPAT
"KRN",19,11630,"RPC",56,0)
SDEC NOSHOW
"KRN",19,11630,"RPC",57,0)
SDEC OVBOOK
"KRN",19,11630,"RPC",58,0)
SDEC PATAPPTD
"KRN",19,11630,"RPC",59,0)
SDEC PATAPPTH
"KRN",19,11630,"RPC",60,0)
SDEC PROVALL
"KRN",19,11630,"RPC",61,0)
SDEC PROVCLIN
"KRN",19,11630,"RPC",62,0)
SDEC PTLOOKRS
"KRN",19,11630,"RPC",63,0)
SDEC PWH
"KRN",19,11630,"RPC",64,0)
SDEC RAISEVNT
"KRN",19,11630,"RPC",65,0)
SDEC REBKCLIN
"KRN",19,11630,"RPC",66,0)
SDEC REBKLIST
"KRN",19,11630,"RPC",67,0)
SDEC REBKNEXT
"KRN",19,11630,"RPC",68,0)
SDEC REGEVENT
"KRN",19,11630,"RPC",69,0)
SDEC RESGPUSR
"KRN",19,11630,"RPC",70,0)
SDEC RESGRPUS
"KRN",19,11630,"RPC",71,0)
SDEC RESLETRF
"KRN",19,11630,"RPC",72,0)
SDEC RESLETRS
"KRN",19,11630,"RPC",73,0)
SDEC RESOURCE
"KRN",19,11630,"RPC",74,0)
SDEC RESUSER
"KRN",19,11630,"RPC",75,0)
SDEC SCHUSR
"KRN",19,11630,"RPC",76,0)
SDEC SEARCHAV
"KRN",19,11630,"RPC",77,0)
SDEC SETFAC
"KRN",19,11630,"RPC",78,0)
SDEC SETRBOOK
"KRN",19,11630,"RPC",79,0)
SDEC SPACEBAR
"KRN",19,11630,"RPC",80,0)
SDEC SUSRINFO
"KRN",19,11630,"RPC",81,0)
SDEC SVSPALL
"KRN",19,11630,"RPC",82,0)
SDEC SYSSTAT
"KRN",19,11630,"RPC",83,0)
SDEC TPBLKOV
"KRN",19,11630,"RPC",84,0)
SDEC UNDOCANA
"KRN",19,11630,"RPC",85,0)
SDEC UNREGEV
"KRN",19,11630,"RPC",86,0)
SDEC WAITLIST
"KRN",19,11630,"RPC",87,0)
SDEC WLCLOSE
"KRN",19,11630,"RPC",88,0)
SDEC WLGET
"KRN",19,11630,"RPC",89,0)
SDEC WLSET
"KRN",19,11630,"RPC",90,0)
SDEC PREFGET
"KRN",19,11630,"RPC",91,0)
SDEC PREFGETV
"KRN",19,11630,"RPC",92,0)
SDEC PREFSET
"KRN",19,11630,"RPC",93,0)
SDEC FAPPTGET
"KRN",19,11630,"RPC",94,0)
SDEC RECAPGET
"KRN",19,11630,"RPC",95,0)
SDEC RECDSET
"KRN",19,11630,"RPC",96,0)
SDEC RECGET
"KRN",19,11630,"RPC",97,0)
SDEC RECPRGET
"KRN",19,11630,"RPC",98,0)
SDEC RECSET
"KRN",19,11630,"RPC",99,0)
SDEC REQGET
"KRN",19,11630,"RPC",100,0)
SDEC PCSTGET
"KRN",19,11630,"RPC",101,0)
SDEC PCST2GET
"KRN",19,11630,"RPC",102,0)
SDEC PCSGET
"KRN",19,11630,"RPC",103,0)
SDEC PTSET
"KRN",19,11630,"RPC",104,0)
SDEC PTINQ
"KRN",19,11630,"RPC",105,0)
SDEC SUMMGET
"KRN",19,11630,"RPC",106,0)
SDEC SUMMAGET
"KRN",19,11630,"RPC",107,0)
SDEC APPIDGET
"KRN",19,11630,"RPC",108,0)
SDEC FACLIST
"KRN",19,11630,"RPC",109,0)
SDEC CGET
"KRN",19,11630,"RPC",110,0)
SDEC ETHGET
"KRN",19,11630,"RPC",111,0)
SDEC ETHCMGET
"KRN",19,11630,"RPC",112,0)
SDEC RACEGET
"KRN",19,11630,"RPC",113,0)
SDEC REP1GET
"KRN",19,11630,"RPC",114,0)
SDEC WLPCSET
"KRN",19,11630,"RPC",115,0)
SDEC APPSDGET
"KRN",19,11630,"RPC",116,0)
SDEC WLOPEN
"KRN",19,11630,"RPC",117,0)
SDEC ARCLOSE
"KRN",19,11630,"RPC",118,0)
SDEC ARDGET
"KRN",19,11630,"RPC",119,0)
SDEC ARGET
"KRN",19,11630,"RPC",120,0)
SDEC ARMRTGET
"KRN",19,11630,"RPC",121,0)
SDEC ARMRTSET
"KRN",19,11630,"RPC",122,0)
SDEC AROPEN
"KRN",19,11630,"RPC",123,0)
SDEC ARPCSET
"KRN",19,11630,"RPC",124,0)
SDEC ARSET
"KRN",19,11630,"RPC",125,0)
SDEC HIDE
"KRN",19,11630,"RPC",126,0)
SDEC PRIV
"KRN",19,11630,"RPC",127,0)
SDEC WLHIDE
"KRN",19,11630,"RPC",128,0)
SDECAR ARAPPT
"KRN",19,11630,"RPC",129,0)
SDECAR ARMRTC
"KRN",19,11630,"RPC",130,0)
SDECDEV DEVICE
"KRN",19,11630,"RPC",131,0)
SDECDIS DISABIL
"KRN",19,11630,"RPC",132,0)
SDECIDX GETREC
"KRN",19,11630,"RPC",133,0)
SDECIDX RECCNT
"KRN",19,11630,"RPC",134,0)
SDECLK LOCK
"KRN",19,11630,"RPC",135,0)
SDECLK UNLOCK
"KRN",19,11630,"RPC",136,0)
SDECLOC PRIVLOC
"KRN",19,11630,"RPC",137,0)
SDECLOC UPDPRIV
"KRN",19,11630,"RPC",138,0)
SDECRMG RECCNT
"KRN",19,11630,"RPC",139,0)
SDECRMG RMG
"KRN",19,11630,"RPC",140,0)
SDECRMG2 URGENCY
"KRN",19,11630,"RPC",141,0)
DG SENSITIVE RECORD ACCESS
"KRN",19,11630,"RPC",142,0)
DG CHK BS5 XREF ARRAY
"KRN",19,11630,"RPC",143,0)
ORPRF HASFLG
"KRN",19,11630,"RPC",144,0)
ORPRF GETFLG
"KRN",19,11630,"RPC",145,0)
ORWPT DIEDON
"KRN",19,11630,"RPC",146,0)
ORWPT ID INFO
"KRN",19,11630,"RPC",147,0)
ORWPT LAST5
"KRN",19,11630,"RPC",148,0)
ORWPT LAST5 RPL
"KRN",19,11630,"RPC",149,0)
ORWU USERINFO
"KRN",19,11630,"RPC",150,0)
SD VSE FILTER RPC
"KRN",19,11630,"RPC",151,0)
SD VSE REPORT RPC
"KRN",19,11630,"RPC",152,0)
SDEC APPSLOTS
"KRN",19,11630,"RPC",154,0)
SDEC NETLOC
"KRN",19,11630,"RPC",155,0)
SDEC NOAVAIL
"KRN",19,11630,"RPC",156,0)
SDECAPP GETYPE
"KRN",19,11630,"RPC",157,0)
SDECAR ARMULT
"KRN",19,11630,"RPC",158,0)
SDECAR AUDITGET
"KRN",19,11630,"RPC",159,0)
SDECCAP CAN
"KRN",19,11630,"RPC",160,0)
SDECCAP GET
"KRN",19,11630,"RPC",161,0)
SDECCAP SET
"KRN",19,11630,"RPC",162,0)
SDECWL AUDITGET
"KRN",19,11630,"RPC",163,0)
ROR LIST STATES
"KRN",19,11630,"RPC",164,0)
XUS SIGNON SETUP
"KRN",19,11630,"RPC",165,0)
XUS GET VISITOR
"KRN",19,11630,"RPC",166,0)
XUS SET VISITOR
"KRN",19,11630,"RPC",167,0)
XUS AV CODE
"KRN",19,11630,"RPC",168,0)
SDEC01 CLINICS
"KRN",19,11630,"RPC",169,0)
SDEC57 OBM
"KRN",19,11630,"RPC",170,0)
SDECAR3 AREDIT
"KRN",19,11630,"RPC",171,0)
SDECDEM MARITAL
"KRN",19,11630,"RPC",172,0)
SDECDEM RELIGION
"KRN",19,11630,"RPC",173,0)
SDECDEM ZIPLINK
"KRN",19,11630,"RPC",174,0)
SDECDEV DEV
"KRN",19,11630,"RPC",175,0)
SDECDEV PRINT
"KRN",19,11630,"RPC",176,0)
SDECRMGP GETRMGUP
"KRN",19,11630,"RPC",177,0)
SDECRMGP PUTRMGUP
"KRN",19,11630,"RPC",178,0)
SDECU4 GETFONT
"KRN",19,11630,"RPC",179,0)
SDECU4 PUTFONT
"KRN",19,11630,"RPC",180,0)
ORWU CLINLOC
"KRN",19,11630,"RPC",181,0)
XUS GET USER INFO
"KRN",19,11630,"RPC",182,0)
XUS GET CCOW TOKEN
"KRN",19,11630,"RPC",183,0)
ORWPT SHARE
"KRN",19,11630,"RPC",184,0)
ORWPT TOP
"KRN",19,11630,"RPC",185,0)
DG SENSITIVE RECORD BULLETIN
"KRN",19,11630,"RPC",186,0)
SDEC EP CLASSIFICATION
"KRN",19,11630,"RPC",187,0)
SDEC EP CPT
"KRN",19,11630,"RPC",188,0)
SDEC EP DEMOGRAPHICS
"KRN",19,11630,"RPC",189,0)
SDEC EP DIAGNOSIS
"KRN",19,11630,"RPC",190,0)
SDEC EP EVENT LOG
"KRN",19,11630,"RPC",191,0)
SDEC EP PROVIDER
"KRN",19,11630,"RPC",192,0)
SDEC EP PT INFO
"KRN",19,11630,"RPC",193,0)
SDEC EP STOP CODE
"KRN",19,11630,"RPC",194,0)
SDEC EP WAIT TIME
"KRN",19,11630,"RPC",195,0)
SDEC APPT STATUS
"KRN",19,11630,"RPC",196,0)
SDEC ELIGIBILITY
"KRN",19,11630,"RPC",197,0)
SDEC CONTACT DISPLAY
"KRN",19,11630,"RPC",198,0)
SDEC CONTACT MULTI-DISPLAY
"KRN",19,11630,"RPC",199,0)
SDEC CONTACT NEW
"KRN",19,11630,"RPC",200,0)
SDEC CONTACT SEQUENCE
"KRN",19,11630,"RPC",201,0)
SDEC CONTACT STOP CODE
"KRN",19,11630,"RPC",202,0)
SDEC CONTACT UPDATE
"KRN",19,11630,"RPC",203,0)
SDEC GETPRER
"KRN",19,11630,"RPC",204,0)
SDEC ELIG RETURN
"KRN",19,11630,"RPC",205,0)
SDEC BOOKHLDY
"KRN",19,11630,"U")
CLINICAL SCHEDULING PROCEDURE 
"KRN",8994,3718,-1)
0^1
"KRN",8994,3718,0)
SDEC BOOKHLDY^BOOKHLDY^SDEC^1^P^0^^^1
"KRN",8994,3718,1,0)
^^2^2^3171201^
"KRN",8994,3718,1,1,0)
Returns value of field 1918.5 (can book on holiday) for a clinic (file 
"KRN",8994,3718,1,2,0)
#44).
"KRN",8994,3718,2,0)
^8994.02A^1^1
"KRN",8994,3718,2,1,0)
SDECCL^1^10^1^1
"KRN",8994,3718,2,1,1,0)
^^1^1^3171201^
"KRN",8994,3718,2,1,1,1,0)
Pointer to file #44.
"KRN",8994,3718,2,"B","SDECCL",1)

"KRN",8994,3718,2,"PARAMSEQ",1,1)

"KRN",8994,3718,3,0)
^^1^1^3171201^
"KRN",8994,3718,3,1,0)
Contents of field #1918.5.
"MBREQ")
1
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",48,-1)
1^1
"PKG",48,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",48,20,0)
^9.402P^^
"PKG",48,22,0)
^9.49I^1^1
"PKG",48,22,1,0)
5.3^3051119^2960613
"PKG",48,22,1,"PAH",1,0)
679^3180320^114
"PKG",48,22,1,"PAH",1,1,0)
^^433^433^3180320
"PKG",48,22,1,"PAH",1,1,1,0)
This patch contains the VistA components necessary to support the 1.5 
"PKG",48,22,1,"PAH",1,1,2,0)
release of VistA Scheduling Enhancements (VSE) as well as addressing the
"PKG",48,22,1,"PAH",1,1,3,0)
following issues:
"PKG",48,22,1,"PAH",1,1,4,0)
 
"PKG",48,22,1,"PAH",1,1,5,0)
1. I15980703FY17 - If user has begun to schedule an appointment on a 
"PKG",48,22,1,"PAH",1,1,6,0)
                   holiday and ability to book appointments on holidays 
"PKG",48,22,1,"PAH",1,1,7,0)
                   is turned off in the meantime, the appointment can be
"PKG",48,22,1,"PAH",1,1,8,0)
                   booked.
"PKG",48,22,1,"PAH",1,1,9,0)
2. R16256976FY17 - If user enters a zip code in the Veteran's permanent
"PKG",48,22,1,"PAH",1,1,10,0)
                   address on the Patient Info form, and the name of the
"PKG",48,22,1,"PAH",1,1,11,0)
                   associated county is contained in another county in the
"PKG",48,22,1,"PAH",1,1,12,0)
                   same state (such as ROBERTS and ROBERTSON), an error
"PKG",48,22,1,"PAH",1,1,13,0)
                   message would be displayed.
"PKG",48,22,1,"PAH",1,1,14,0)
3. I16857061FY18 - If a scheduler makes or cancels an appointment for a 
"PKG",48,22,1,"PAH",1,1,15,0)
                   consult and the current time ends in a zero (like 
"PKG",48,22,1,"PAH",1,1,16,0)
                   9:40), then the event recorded in the consult will
"PKG",48,22,1,"PAH",1,1,17,0)
                   display at the end of the consult event history instead
"PKG",48,22,1,"PAH",1,1,18,0)
                   of in sequence.
"PKG",48,22,1,"PAH",1,1,19,0)
 
"PKG",48,22,1,"PAH",1,1,20,0)
The third issue requires a fix to repair existing data effected by the
"PKG",48,22,1,"PAH",1,1,21,0)
issue. That repair is done in a separate patch, which will be bundled
"PKG",48,22,1,"PAH",1,1,22,0)
with this one. Below is a list of all the applications involved in this
"PKG",48,22,1,"PAH",1,1,23,0)
bundle along with their patch number:
"PKG",48,22,1,"PAH",1,1,24,0)
 
"PKG",48,22,1,"PAH",1,1,25,0)
   APPLICATION/VERSION                                   PATCH
"PKG",48,22,1,"PAH",1,1,26,0)
   ---------------------------------------------------------------
"PKG",48,22,1,"PAH",1,1,27,0)
   SCHEDULING (SD) V. 5.3                                SD*5.3*679
"PKG",48,22,1,"PAH",1,1,28,0)
   CONSULT/REQUEST TRACKING (GMRC) V. 3.0                GMRC*3.0*98
"PKG",48,22,1,"PAH",1,1,29,0)
 
"PKG",48,22,1,"PAH",1,1,30,0)
Patch Components
"PKG",48,22,1,"PAH",1,1,31,0)
================
"PKG",48,22,1,"PAH",1,1,32,0)
 
"PKG",48,22,1,"PAH",1,1,33,0)
Files & Fields Associated:
"PKG",48,22,1,"PAH",1,1,34,0)
 
"PKG",48,22,1,"PAH",1,1,35,0)
File Name (#)                                             New/Modified/
"PKG",48,22,1,"PAH",1,1,36,0)
  Sub-file Name (#)   Field Name (Number)                   Deleted
"PKG",48,22,1,"PAH",1,1,37,0)
-------------------   ---------------------------------   -------------
"PKG",48,22,1,"PAH",1,1,38,0)
N/A
"PKG",48,22,1,"PAH",1,1,39,0)
 
"PKG",48,22,1,"PAH",1,1,40,0)
Bulletins Associated:
"PKG",48,22,1,"PAH",1,1,41,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,42,0)
Bulletin Name                                               Deleted    
"PKG",48,22,1,"PAH",1,1,43,0)
-------------                                             -------------
"PKG",48,22,1,"PAH",1,1,44,0)
N/A
"PKG",48,22,1,"PAH",1,1,45,0)
 
"PKG",48,22,1,"PAH",1,1,46,0)
 
"PKG",48,22,1,"PAH",1,1,47,0)
 
"PKG",48,22,1,"PAH",1,1,48,0)
Dialogs Associated:
"PKG",48,22,1,"PAH",1,1,49,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,50,0)
Dialog Name                                                 Deleted    
"PKG",48,22,1,"PAH",1,1,51,0)
-----------                                               -------------
"PKG",48,22,1,"PAH",1,1,52,0)
N/A
"PKG",48,22,1,"PAH",1,1,53,0)
 
"PKG",48,22,1,"PAH",1,1,54,0)
 
"PKG",48,22,1,"PAH",1,1,55,0)
 
"PKG",48,22,1,"PAH",1,1,56,0)
Forms Associated:
"PKG",48,22,1,"PAH",1,1,57,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,58,0)
Form Name                    File Name (Number)             Deleted    
"PKG",48,22,1,"PAH",1,1,59,0)
---------                    ------------------           -------------
"PKG",48,22,1,"PAH",1,1,60,0)
N/A
"PKG",48,22,1,"PAH",1,1,61,0)
 
"PKG",48,22,1,"PAH",1,1,62,0)
 
"PKG",48,22,1,"PAH",1,1,63,0)
 
"PKG",48,22,1,"PAH",1,1,64,0)
Functions Associated:
"PKG",48,22,1,"PAH",1,1,65,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,66,0)
Function Name                                               Deleted    
"PKG",48,22,1,"PAH",1,1,67,0)
-------------                                             -------------
"PKG",48,22,1,"PAH",1,1,68,0)
N/A
"PKG",48,22,1,"PAH",1,1,69,0)
 
"PKG",48,22,1,"PAH",1,1,70,0)
 
"PKG",48,22,1,"PAH",1,1,71,0)
 
"PKG",48,22,1,"PAH",1,1,72,0)
HL Logical Link:
"PKG",48,22,1,"PAH",1,1,73,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,74,0)
HL Logical Name                                             Deleted    
"PKG",48,22,1,"PAH",1,1,75,0)
---------------                                           -------------
"PKG",48,22,1,"PAH",1,1,76,0)
N/A
"PKG",48,22,1,"PAH",1,1,77,0)
 
"PKG",48,22,1,"PAH",1,1,78,0)
 
"PKG",48,22,1,"PAH",1,1,79,0)
 
"PKG",48,22,1,"PAH",1,1,80,0)
HL7 Application Parameters:
"PKG",48,22,1,"PAH",1,1,81,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,82,0)
HL7 Parameter Name                                          Deleted    
"PKG",48,22,1,"PAH",1,1,83,0)
------------------                                        -------------
"PKG",48,22,1,"PAH",1,1,84,0)
N/A
"PKG",48,22,1,"PAH",1,1,85,0)
 
"PKG",48,22,1,"PAH",1,1,86,0)
 
"PKG",48,22,1,"PAH",1,1,87,0)
 
"PKG",48,22,1,"PAH",1,1,88,0)
HLO Application Registry:
"PKG",48,22,1,"PAH",1,1,89,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,90,0)
HLO Registry Name                                           Deleted    
"PKG",48,22,1,"PAH",1,1,91,0)
-----------------                                         -------------
"PKG",48,22,1,"PAH",1,1,92,0)
N/A
"PKG",48,22,1,"PAH",1,1,93,0)
 
"PKG",48,22,1,"PAH",1,1,94,0)
 
"PKG",48,22,1,"PAH",1,1,95,0)
 
"PKG",48,22,1,"PAH",1,1,96,0)
Help Frames Associated:
"PKG",48,22,1,"PAH",1,1,97,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,98,0)
Help Frame Name                                             Deleted    
"PKG",48,22,1,"PAH",1,1,99,0)
---------------                                           -------------
"PKG",48,22,1,"PAH",1,1,100,0)
N/A
"PKG",48,22,1,"PAH",1,1,101,0)
 
"PKG",48,22,1,"PAH",1,1,102,0)
 
"PKG",48,22,1,"PAH",1,1,103,0)
 
"PKG",48,22,1,"PAH",1,1,104,0)
Mail Groups Associated:
"PKG",48,22,1,"PAH",1,1,105,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,106,0)
Mail Group Name                                             Deleted    
"PKG",48,22,1,"PAH",1,1,107,0)
---------------                                           -------------
"PKG",48,22,1,"PAH",1,1,108,0)
N/A
"PKG",48,22,1,"PAH",1,1,109,0)
 
"PKG",48,22,1,"PAH",1,1,110,0)
 
"PKG",48,22,1,"PAH",1,1,111,0)
 
"PKG",48,22,1,"PAH",1,1,112,0)
Options Associated:
"PKG",48,22,1,"PAH",1,1,113,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,114,0)
Option Name                                    Type         Deleted    
"PKG",48,22,1,"PAH",1,1,115,0)
-----------                                    ----       -------------
"PKG",48,22,1,"PAH",1,1,116,0)
CLINICAL SCHEDULING PROCEDURE CALLS [SDECRPC]  Broker     MODIFIED
"PKG",48,22,1,"PAH",1,1,117,0)
 
"PKG",48,22,1,"PAH",1,1,118,0)
 
"PKG",48,22,1,"PAH",1,1,119,0)
 
"PKG",48,22,1,"PAH",1,1,120,0)
Parameter Definitions:
"PKG",48,22,1,"PAH",1,1,121,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,122,0)
Parameter Name                                              Deleted    
"PKG",48,22,1,"PAH",1,1,123,0)
--------------                                            -------------
"PKG",48,22,1,"PAH",1,1,124,0)
N/A
"PKG",48,22,1,"PAH",1,1,125,0)
 
"PKG",48,22,1,"PAH",1,1,126,0)
 
"PKG",48,22,1,"PAH",1,1,127,0)
 
"PKG",48,22,1,"PAH",1,1,128,0)
Parameter Template:
"PKG",48,22,1,"PAH",1,1,129,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,130,0)
Template Name                                               Deleted    
"PKG",48,22,1,"PAH",1,1,131,0)
-------------                                             -------------
"PKG",48,22,1,"PAH",1,1,132,0)
N/A
"PKG",48,22,1,"PAH",1,1,133,0)
 
"PKG",48,22,1,"PAH",1,1,134,0)
 
"PKG",48,22,1,"PAH",1,1,135,0)
 
"PKG",48,22,1,"PAH",1,1,136,0)
Protocols Associated:
"PKG",48,22,1,"PAH",1,1,137,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,138,0)
Protocol Name                                               Deleted    
"PKG",48,22,1,"PAH",1,1,139,0)
-------------                                             -------------
"PKG",48,22,1,"PAH",1,1,140,0)
N/A
"PKG",48,22,1,"PAH",1,1,141,0)
 
"PKG",48,22,1,"PAH",1,1,142,0)
 
"PKG",48,22,1,"PAH",1,1,143,0)
 
"PKG",48,22,1,"PAH",1,1,144,0)
Remote Procedures Associated:
"PKG",48,22,1,"PAH",1,1,145,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,146,0)
Remote Procedure Name                                       Deleted    
"PKG",48,22,1,"PAH",1,1,147,0)
---------------------                                     -------------
"PKG",48,22,1,"PAH",1,1,148,0)
SDEC BOOKHLDY                                             New 
"PKG",48,22,1,"PAH",1,1,149,0)
 
"PKG",48,22,1,"PAH",1,1,150,0)
 
"PKG",48,22,1,"PAH",1,1,151,0)
 
"PKG",48,22,1,"PAH",1,1,152,0)
Security Keys Associated:
"PKG",48,22,1,"PAH",1,1,153,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,154,0)
Security Key Name                                           Deleted    
"PKG",48,22,1,"PAH",1,1,155,0)
-----------------                                         -------------
"PKG",48,22,1,"PAH",1,1,156,0)
N/A
"PKG",48,22,1,"PAH",1,1,157,0)
 
"PKG",48,22,1,"PAH",1,1,158,0)
 
"PKG",48,22,1,"PAH",1,1,159,0)
 
"PKG",48,22,1,"PAH",1,1,160,0)
Templates, Input Associated:
"PKG",48,22,1,"PAH",1,1,161,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,162,0)
Template Name      Type      File Name (Number)             Deleted    
"PKG",48,22,1,"PAH",1,1,163,0)
-------------      ----      ------------------           -------------
"PKG",48,22,1,"PAH",1,1,164,0)
N/A
"PKG",48,22,1,"PAH",1,1,165,0)
 
"PKG",48,22,1,"PAH",1,1,166,0)
 
"PKG",48,22,1,"PAH",1,1,167,0)
 
"PKG",48,22,1,"PAH",1,1,168,0)
Templates, List Associated:
"PKG",48,22,1,"PAH",1,1,169,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,170,0)
Template Name      Type                                     Deleted    
"PKG",48,22,1,"PAH",1,1,171,0)
-------------      ----                                   -------------
"PKG",48,22,1,"PAH",1,1,172,0)
N/A
"PKG",48,22,1,"PAH",1,1,173,0)
 
"PKG",48,22,1,"PAH",1,1,174,0)
 
"PKG",48,22,1,"PAH",1,1,175,0)
 
"PKG",48,22,1,"PAH",1,1,176,0)
Templates, Print Associated:
"PKG",48,22,1,"PAH",1,1,177,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,178,0)
Template Name      Type      File Name (Number)             Deleted    
"PKG",48,22,1,"PAH",1,1,179,0)
-------------      ----      ------------------           -------------
"PKG",48,22,1,"PAH",1,1,180,0)
N/A
"PKG",48,22,1,"PAH",1,1,181,0)
 
"PKG",48,22,1,"PAH",1,1,182,0)
 
"PKG",48,22,1,"PAH",1,1,183,0)
 
"PKG",48,22,1,"PAH",1,1,184,0)
Templates, Sort Associated:
"PKG",48,22,1,"PAH",1,1,185,0)
                                                          New/Modified/
"PKG",48,22,1,"PAH",1,1,186,0)
Template Name      Type      File Name (Number)             Deleted    
"PKG",48,22,1,"PAH",1,1,187,0)
-------------      ----      ------------------           -------------
"PKG",48,22,1,"PAH",1,1,188,0)
N/A
"PKG",48,22,1,"PAH",1,1,189,0)
 
"PKG",48,22,1,"PAH",1,1,190,0)
 
"PKG",48,22,1,"PAH",1,1,191,0)
Additional Information:
"PKG",48,22,1,"PAH",1,1,192,0)
N/A
"PKG",48,22,1,"PAH",1,1,193,0)
 
"PKG",48,22,1,"PAH",1,1,194,0)
 
"PKG",48,22,1,"PAH",1,1,195,0)
New Service Requests (NSRs)
"PKG",48,22,1,"PAH",1,1,196,0)
----------------------------  
"PKG",48,22,1,"PAH",1,1,197,0)
N/A
"PKG",48,22,1,"PAH",1,1,198,0)
 
"PKG",48,22,1,"PAH",1,1,199,0)
 
"PKG",48,22,1,"PAH",1,1,200,0)
Patient Safety Issues (PSIs)
"PKG",48,22,1,"PAH",1,1,201,0)
-----------------------------
"PKG",48,22,1,"PAH",1,1,202,0)
N/A
"PKG",48,22,1,"PAH",1,1,203,0)
 
"PKG",48,22,1,"PAH",1,1,204,0)
 
"PKG",48,22,1,"PAH",1,1,205,0)
Service Desk Manager (SDM) Ticket(s) & Overview
"PKG",48,22,1,"PAH",1,1,206,0)
-----------------------------------------------
"PKG",48,22,1,"PAH",1,1,207,0)
1. I15980703FY17 ENH REQ: VSE issue: Scheduling "clinics" on a specific 
"PKG",48,22,1,"PAH",1,1,208,0)
                 holiday opens up ALL holidays to scheduling.
"PKG",48,22,1,"PAH",1,1,209,0)
  
"PKG",48,22,1,"PAH",1,1,210,0)
Problem:
"PKG",48,22,1,"PAH",1,1,211,0)
-------
"PKG",48,22,1,"PAH",1,1,212,0)
When setting up clinics, VistA recognizes holidays and offers the option 
"PKG",48,22,1,"PAH",1,1,213,0)
to schedule in selected clinics on holidays as a second step in the clinic
"PKG",48,22,1,"PAH",1,1,214,0)
set up process (includes education day).
"PKG",48,22,1,"PAH",1,1,215,0)
 
"PKG",48,22,1,"PAH",1,1,216,0)
The clinic day is initially set as a holiday. Then, to be able to 
"PKG",48,22,1,"PAH",1,1,217,0)
schedule on a selected holiday such as Education Day, Doreen or Michelle
"PKG",48,22,1,"PAH",1,1,218,0)
would go back in and answer "yes" to the question in VistA "Schedule on
"PKG",48,22,1,"PAH",1,1,219,0)
holidays?" to be able to subsequently go in and open up slots to be
"PKG",48,22,1,"PAH",1,1,220,0)
scheduled into on particular holidays. VistA allows this without opening
"PKG",48,22,1,"PAH",1,1,221,0)
up ALL holidays. It seems, however, that VSE does NOT. In VSE, this opens
"PKG",48,22,1,"PAH",1,1,222,0)
up ALL holidays to scheduling, ie. it shows the clinics as open for
"PKG",48,22,1,"PAH",1,1,223,0)
scheduling. 
"PKG",48,22,1,"PAH",1,1,224,0)
 
"PKG",48,22,1,"PAH",1,1,225,0)
Resolution:
"PKG",48,22,1,"PAH",1,1,226,0)
----------
"PKG",48,22,1,"PAH",1,1,227,0)
The VSE GUI Client has been corrected to check that the slot is available 
"PKG",48,22,1,"PAH",1,1,228,0)
before attempting to book a holiday appointment.
"PKG",48,22,1,"PAH",1,1,229,0)
 
"PKG",48,22,1,"PAH",1,1,230,0)
2. R16256976FY17 VS GUI 2.0.0.12 - New Issue? - Error pop up indicating 
"PKG",48,22,1,"PAH",1,1,231,0)
county does not belong in state - OVAC Edit 
"PKG",48,22,1,"PAH",1,1,232,0)
  
"PKG",48,22,1,"PAH",1,1,233,0)
Problem:
"PKG",48,22,1,"PAH",1,1,234,0)
-------
"PKG",48,22,1,"PAH",1,1,235,0)
When you enter the zip code, the state/county populate correctly, but when
"PKG",48,22,1,"PAH",1,1,236,0)
you click OK, you get "County GREEN does not belong to state GREEN."
"PKG",48,22,1,"PAH",1,1,237,0)
 
"PKG",48,22,1,"PAH",1,1,238,0)
Resolution:
"PKG",48,22,1,"PAH",1,1,239,0)
----------
"PKG",48,22,1,"PAH",1,1,240,0)
The code that looks up the county ID in the state has been corrected so 
"PKG",48,22,1,"PAH",1,1,241,0)
that it no longer encounters this error when one county's name (in this
"PKG",48,22,1,"PAH",1,1,242,0)
instance Green county) is contained in another (in this instance, Green
"PKG",48,22,1,"PAH",1,1,243,0)
Lake county).
"PKG",48,22,1,"PAH",1,1,244,0)
In addition, the error message has been corrected so that the actual state
"PKG",48,22,1,"PAH",1,1,245,0)
name is displayed rather than displaying the county name a second time.
"PKG",48,22,1,"PAH",1,1,246,0)
 
"PKG",48,22,1,"PAH",1,1,247,0)
3. I16857061FY18 Consults are showing activities out of order in CPRS; 
"PKG",48,22,1,"PAH",1,1,248,0)
                 VistA FM shows activities in correct chronological order
"PKG",48,22,1,"PAH",1,1,249,0)
  
"PKG",48,22,1,"PAH",1,1,250,0)
Problem:
"PKG",48,22,1,"PAH",1,1,251,0)
-------
"PKG",48,22,1,"PAH",1,1,252,0)
Our site is experiencing issues with Consults where the activities being 
"PKG",48,22,1,"PAH",1,1,253,0)
recorded are out of order. I originally thought this was a result of the 
"PKG",48,22,1,"PAH",1,1,254,0)
CONSULT TOOLBOX tool, but there are multiple sites reporting this issue, 
"PKG",48,22,1,"PAH",1,1,255,0)
and the consensus is that this is being caused by VSE.
"PKG",48,22,1,"PAH",1,1,256,0)
 
"PKG",48,22,1,"PAH",1,1,257,0)
Resolution:
"PKG",48,22,1,"PAH",1,1,258,0)
----------
"PKG",48,22,1,"PAH",1,1,259,0)
The code that saves the SCHEDULED or STATUS CHANGE event when the 
"PKG",48,22,1,"PAH",1,1,260,0)
appointment is scheduled or canceled was corrected to save the timestamp
"PKG",48,22,1,"PAH",1,1,261,0)
correctly.
"PKG",48,22,1,"PAH",1,1,262,0)
 
"PKG",48,22,1,"PAH",1,1,263,0)
 
"PKG",48,22,1,"PAH",1,1,264,0)
Test Sites:
"PKG",48,22,1,"PAH",1,1,265,0)
----------
"PKG",48,22,1,"PAH",1,1,266,0)
TBA
"PKG",48,22,1,"PAH",1,1,267,0)
 
"PKG",48,22,1,"PAH",1,1,268,0)
 
"PKG",48,22,1,"PAH",1,1,269,0)
Documentation Retrieval Instructions
"PKG",48,22,1,"PAH",1,1,270,0)
------------------------------------ 
"PKG",48,22,1,"PAH",1,1,271,0)
Updated documentation describing the new functionality introduced by this 
"PKG",48,22,1,"PAH",1,1,272,0)
patch is available.
"PKG",48,22,1,"PAH",1,1,273,0)
 
"PKG",48,22,1,"PAH",1,1,274,0)
The preferred method is to FTP the files from 
"PKG",48,22,1,"PAH",1,1,275,0)
ftp://download.vista.domain.ext/.
"PKG",48,22,1,"PAH",1,1,276,0)
This transmits the files from the first available FTP server. Sites may 
"PKG",48,22,1,"PAH",1,1,277,0)
also elect to retrieve software directly from a specific server as 
"PKG",48,22,1,"PAH",1,1,278,0)
follows:
"PKG",48,22,1,"PAH",1,1,279,0)
 
"PKG",48,22,1,"PAH",1,1,280,0)
 Hines          ftp.fo-hines.domain.ext   <ftp://ftp.fo-hines.domain.ext>
"PKG",48,22,1,"PAH",1,1,281,0)
 Salt Lake City ftp.fo-slc.domain.ext     <ftp://ftp.fo-slc.domain.ext>
"PKG",48,22,1,"PAH",1,1,282,0)
 
"PKG",48,22,1,"PAH",1,1,283,0)
Documentation can also be found on the VA Software Documentation Library 
"PKG",48,22,1,"PAH",1,1,284,0)
at:
"PKG",48,22,1,"PAH",1,1,285,0)
http://www4.domain.ext/vdl/
"PKG",48,22,1,"PAH",1,1,286,0)
 
"PKG",48,22,1,"PAH",1,1,287,0)
Title                                          File Name          FTP Mode
"PKG",48,22,1,"PAH",1,1,288,0)
--------------------------------------------------------------------------
"PKG",48,22,1,"PAH",1,1,289,0)
VistA Scheduling Enhancements GUI User Guide   VSE_VA_GUI_UG.PDF  Binary
"PKG",48,22,1,"PAH",1,1,290,0)
VistA Scheduling Enhancements Technical Manual VSE_TM.PDF         Binary
"PKG",48,22,1,"PAH",1,1,291,0)
 
"PKG",48,22,1,"PAH",1,1,292,0)
 
"PKG",48,22,1,"PAH",1,1,293,0)
Patch Installation:
"PKG",48,22,1,"PAH",1,1,294,0)
 
"PKG",48,22,1,"PAH",1,1,295,0)
 
"PKG",48,22,1,"PAH",1,1,296,0)
Pre/Post Installation Overview
"PKG",48,22,1,"PAH",1,1,297,0)
------------------------------
"PKG",48,22,1,"PAH",1,1,298,0)
This patch should take less than 5 minutes to install.
"PKG",48,22,1,"PAH",1,1,299,0)
 
"PKG",48,22,1,"PAH",1,1,300,0)
This patch should not be installed with VistA Scheduling GUI users on the
"PKG",48,22,1,"PAH",1,1,301,0)
system and it is recommended that it be installed during non-peak hours to
"PKG",48,22,1,"PAH",1,1,302,0)
minimize potential disruption to other users.
"PKG",48,22,1,"PAH",1,1,303,0)
 
"PKG",48,22,1,"PAH",1,1,304,0)
This patch contains no PRE Installation processing.
"PKG",48,22,1,"PAH",1,1,305,0)
 
"PKG",48,22,1,"PAH",1,1,306,0)
The other patch bundled with this one (GMRC*3.0*98) contains a 
"PKG",48,22,1,"PAH",1,1,307,0)
post-install routine that will repair bad data created by the consult
"PKG",48,22,1,"PAH",1,1,308,0)
comment issue.
"PKG",48,22,1,"PAH",1,1,309,0)
 
"PKG",48,22,1,"PAH",1,1,310,0)
 
"PKG",48,22,1,"PAH",1,1,311,0)
Installation Instructions
"PKG",48,22,1,"PAH",1,1,312,0)
-------------------------
"PKG",48,22,1,"PAH",1,1,313,0)
This installation will update routines that support VistA Scheduling GUI 
"PKG",48,22,1,"PAH",1,1,314,0)
Application Programming Interfaces (APIs).
"PKG",48,22,1,"PAH",1,1,315,0)
 
"PKG",48,22,1,"PAH",1,1,316,0)
1.  OBTAIN PATCHES
"PKG",48,22,1,"PAH",1,1,317,0)
    --------------
"PKG",48,22,1,"PAH",1,1,318,0)
    Obtain the host file SD_GMRC_VSE_BUNDLE_1_5.KID, which contains the
"PKG",48,22,1,"PAH",1,1,319,0)
    following patches:
"PKG",48,22,1,"PAH",1,1,320,0)
  
"PKG",48,22,1,"PAH",1,1,321,0)
        SD*5.3*679
"PKG",48,22,1,"PAH",1,1,322,0)
        GMRC*3.0*98
"PKG",48,22,1,"PAH",1,1,323,0)
  
"PKG",48,22,1,"PAH",1,1,324,0)
     Sites can retrieve VistA software from the following FTP addresses.
"PKG",48,22,1,"PAH",1,1,325,0)
     The preferred method is to FTP the files from:
"PKG",48,22,1,"PAH",1,1,326,0)
  
"PKG",48,22,1,"PAH",1,1,327,0)
                    download.vista.domain.ext
"PKG",48,22,1,"PAH",1,1,328,0)
  
"PKG",48,22,1,"PAH",1,1,329,0)
     This will transmit the files from the first available FTP server.
"PKG",48,22,1,"PAH",1,1,330,0)
     Sites may also elect to retrieve software directly from a specific
"PKG",48,22,1,"PAH",1,1,331,0)
     server as follows:
"PKG",48,22,1,"PAH",1,1,332,0)
  
"PKG",48,22,1,"PAH",1,1,333,0)
       Hines                   ftp.fo-hines.domain.ext
"PKG",48,22,1,"PAH",1,1,334,0)
       Salt Lake City          ftp.fo-slc.domain.ext
"PKG",48,22,1,"PAH",1,1,335,0)
  
"PKG",48,22,1,"PAH",1,1,336,0)
     The SD_GMRC_VSE_BUNDLE_1_5.KID host file is located in the
"PKG",48,22,1,"PAH",1,1,337,0)
     anonymous.software directory. Use the American Standard Code for 
"PKG",48,22,1,"PAH",1,1,338,0)
     Information Interchange (ASCII) Mode when downloading the file.
"PKG",48,22,1,"PAH",1,1,339,0)
  
"PKG",48,22,1,"PAH",1,1,340,0)
  
"PKG",48,22,1,"PAH",1,1,341,0)
  2.  START UP KIDS
"PKG",48,22,1,"PAH",1,1,342,0)
      -------------
"PKG",48,22,1,"PAH",1,1,343,0)
      Start up the Kernel Installation and Distribution System Menu option
"PKG",48,22,1,"PAH",1,1,344,0)
      [XPD MAIN]:
"PKG",48,22,1,"PAH",1,1,345,0)
  
"PKG",48,22,1,"PAH",1,1,346,0)
         Edits and Distribution ...
"PKG",48,22,1,"PAH",1,1,347,0)
         Utilities ...
"PKG",48,22,1,"PAH",1,1,348,0)
         Installation ...
"PKG",48,22,1,"PAH",1,1,349,0)
  
"PKG",48,22,1,"PAH",1,1,350,0)
      Select Kernel Installation & Distribution System Option: 
"PKG",48,22,1,"PAH",1,1,351,0)
Installation
"PKG",48,22,1,"PAH",1,1,352,0)
                                                               ---
"PKG",48,22,1,"PAH",1,1,353,0)
         Load a Distribution
"PKG",48,22,1,"PAH",1,1,354,0)
         Print Transport Global
"PKG",48,22,1,"PAH",1,1,355,0)
         Compare Transport Global to Current System
"PKG",48,22,1,"PAH",1,1,356,0)
         Verify Checksums in Transport Global
"PKG",48,22,1,"PAH",1,1,357,0)
         Install Package(s)
"PKG",48,22,1,"PAH",1,1,358,0)
         Restart Install of Package(s)
"PKG",48,22,1,"PAH",1,1,359,0)
         Unload a Distribution
"PKG",48,22,1,"PAH",1,1,360,0)
         Backup a Transport Global
"PKG",48,22,1,"PAH",1,1,361,0)
  
"PKG",48,22,1,"PAH",1,1,362,0)
      Select Installation Option:
"PKG",48,22,1,"PAH",1,1,363,0)
  
"PKG",48,22,1,"PAH",1,1,364,0)
3.  LOAD TRANSPORT GLOBAL FOR MULTI-BUILD
"PKG",48,22,1,"PAH",1,1,365,0)
    -------------------------------------
"PKG",48,22,1,"PAH",1,1,366,0)
    From the Installation menu, select the Load a Distribution option.
"PKG",48,22,1,"PAH",1,1,367,0)
  
"PKG",48,22,1,"PAH",1,1,368,0)
    When prompted for "Enter a Host File:", enter the full directory path
"PKG",48,22,1,"PAH",1,1,369,0)
    where you saved the host file SD_GMRC_VSE_BUNDLE_1_5.KID (e.g.,
"PKG",48,22,1,"PAH",1,1,370,0)
    SYS$SYSDEVICE:[ANONYMOUS]SD_GMRC_VSE_BUNDLE_1_5.KID).
"PKG",48,22,1,"PAH",1,1,371,0)
  
"PKG",48,22,1,"PAH",1,1,372,0)
    When prompted for "OK to continue with Load? NO//", enter "YES."
"PKG",48,22,1,"PAH",1,1,373,0)
  
"PKG",48,22,1,"PAH",1,1,374,0)
    The following will display:
"PKG",48,22,1,"PAH",1,1,375,0)
  
"PKG",48,22,1,"PAH",1,1,376,0)
      Loading Distribution...
"PKG",48,22,1,"PAH",1,1,377,0)
  
"PKG",48,22,1,"PAH",1,1,378,0)
        SD GMRC VSE BUNDLE 1.5
"PKG",48,22,1,"PAH",1,1,379,0)
        SD*5.3*679
"PKG",48,22,1,"PAH",1,1,380,0)
        GMRC*3.0*98
"PKG",48,22,1,"PAH",1,1,381,0)
  
"PKG",48,22,1,"PAH",1,1,382,0)
      Use INSTALL NAME: SD GMRC VSE BUNDLE 1.5 to install this
"PKG",48,22,1,"PAH",1,1,383,0)
      distribution.
"PKG",48,22,1,"PAH",1,1,384,0)
  
"PKG",48,22,1,"PAH",1,1,385,0)
4.  RUN OPTIONAL INSTALLATION OPTIONS FOR MULTI-BUILD
"PKG",48,22,1,"PAH",1,1,386,0)
    -------------------------------------------------
"PKG",48,22,1,"PAH",1,1,387,0)
    From the Installation menu, you may select to use the following
"PKG",48,22,1,"PAH",1,1,388,0)
    options (when prompted for the INSTALL NAME, enter
"PKG",48,22,1,"PAH",1,1,389,0)
    SD GMRC VSE BUNDLE 1.5):
"PKG",48,22,1,"PAH",1,1,390,0)
  
"PKG",48,22,1,"PAH",1,1,391,0)
    a.  Backup a Transport Global - This option will create a backup
"PKG",48,22,1,"PAH",1,1,392,0)
        message of any routines exported with this patch. It will not
"PKG",48,22,1,"PAH",1,1,393,0)
        backup any other changes such as data dictionaries or templates.
"PKG",48,22,1,"PAH",1,1,394,0)
    b.  Compare Transport Global to Current System - This option will
"PKG",48,22,1,"PAH",1,1,395,0)
        allow you to view all changes that will be made when this patch
"PKG",48,22,1,"PAH",1,1,396,0)
        is installed.  It compares all components of this patch
"PKG",48,22,1,"PAH",1,1,397,0)
        (routines, data dictionaries, templates, etc.).
"PKG",48,22,1,"PAH",1,1,398,0)
    c.  Verify Checksums in Transport Global - This option will allow
"PKG",48,22,1,"PAH",1,1,399,0)
        you to ensure the integrity of the routines that are in the
"PKG",48,22,1,"PAH",1,1,400,0)
        transport global.
"PKG",48,22,1,"PAH",1,1,401,0)
  
"PKG",48,22,1,"PAH",1,1,402,0)
5.  INSTALL MULTI-BUILD
"PKG",48,22,1,"PAH",1,1,403,0)
    -------------------
"PKG",48,22,1,"PAH",1,1,404,0)
    This is the step to start the installation of this KIDS patch.  This
"PKG",48,22,1,"PAH",1,1,405,0)
    will need to be run for the SD GMRC VSE BUNDLE 1.5 build.
"PKG",48,22,1,"PAH",1,1,406,0)
  
"PKG",48,22,1,"PAH",1,1,407,0)
    a.  Choose the Install Package(s) option to start the patch
"PKG",48,22,1,"PAH",1,1,408,0)
        install.
"PKG",48,22,1,"PAH",1,1,409,0)
    b.  When prompted for the "Select INSTALL NAME:", enter 
"PKG",48,22,1,"PAH",1,1,410,0)
        SD GMRC VSE BUNDLE 1.5
"PKG",48,22,1,"PAH",1,1,411,0)
    c.  When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of
"PKG",48,22,1,"PAH",1,1,412,0)
        Install? NO//", enter NO.
"PKG",48,22,1,"PAH",1,1,413,0)
    d.  When prompted "Want KIDS to INHIBIT LOGONs during the install?
"PKG",48,22,1,"PAH",1,1,414,0)
        NO//", enter NO.
"PKG",48,22,1,"PAH",1,1,415,0)
    e.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
"PKG",48,22,1,"PAH",1,1,416,0)
and
"PKG",48,22,1,"PAH",1,1,417,0)
        Protocols? NO//' 
"PKG",48,22,1,"PAH",1,1,418,0)
          Respond with 'YES'
"PKG",48,22,1,"PAH",1,1,419,0)
          Options to mark as out of order:
"PKG",48,22,1,"PAH",1,1,420,0)
             Clinical Scheduling Procedure Calls [SDECRPC]
"PKG",48,22,1,"PAH",1,1,421,0)
             Scheduling Manager's Menu           [SDMGR]
"PKG",48,22,1,"PAH",1,1,422,0)
             Supervisor Menu                     [SDSUP]
"PKG",48,22,1,"PAH",1,1,423,0)
             Scheduling Menu                     [SDUSER]
"PKG",48,22,1,"PAH",1,1,424,0)
             Clinic Letter Report                [SDRR CLINIC LETTER 
"PKG",48,22,1,"PAH",1,1,425,0)
REPORT]
"PKG",48,22,1,"PAH",1,1,426,0)
    f.  If prompted 'Delay Install (Minutes):  (0 - 60): 0//' respond 0. 
"PKG",48,22,1,"PAH",1,1,427,0)
 
"PKG",48,22,1,"PAH",1,1,428,0)
 
"PKG",48,22,1,"PAH",1,1,429,0)
Post-Installation Instructions
"PKG",48,22,1,"PAH",1,1,430,0)
------------------------------
"PKG",48,22,1,"PAH",1,1,431,0)
In order to verify the patch post-installation routine was run 
"PKG",48,22,1,"PAH",1,1,432,0)
successfully, please examine the Install File for this patch and 
"PKG",48,22,1,"PAH",1,1,433,0)
report any error messages to Product Support.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
6
"RTN","SDEC")
0^1^B133133924
"RTN","SDEC",1,0)
SDEC ;ALB/SAT - VISTA SCHEDULING RPCS ;MAR 15, 2017
"RTN","SDEC",2,0)
 ;;5.3;Scheduling;**627,643,642,651,658,665,672,679,686**;Aug 13, 1993;Build 15
"RTN","SDEC",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified
"RTN","SDEC",4,0)
 Q
"RTN","SDEC",5,0)
 ;
"RTN","SDEC",6,0)
ACCGROUP(SDECY) ;EP return active entries from the SDEC ACCESS GROUP file 409.822
"RTN","SDEC",7,0)
 D ACCGROUP^SDEC45(.SDECY) Q
"RTN","SDEC",8,0)
ACCGPTYG(SDECY) ;EP Get access group types
"RTN","SDEC",9,0)
 D ACCGPTYG^SDEC15(.SDECY) Q
"RTN","SDEC",10,0)
ACCTYPE(SDECY) ;EP return active entries from the SDEC ACCESS TYPE file 409.823
"RTN","SDEC",11,0)
 D ACCTYPE^SDEC45(.SDECY) Q
"RTN","SDEC",12,0)
ADDACCG(SDECY,SDECVAL) ;EP ADD/EDIT ACCESS GROUP
"RTN","SDEC",13,0)
 D ADDACCG^SDEC21(.SDECY,$G(SDECVAL)) Q
"RTN","SDEC",14,0)
ADDACCTY(SDECY,SDECVAL) ;EP ADD/EDIT ACCESS TYPE
"RTN","SDEC",15,0)
 D ADDACCTY^SDEC14(.SDECY,$G(SDECVAL)) Q
"RTN","SDEC",16,0)
ADDAGI(SDECY,SDECIEN,SDECIEN1) ;EP Add access group item - Adds ACCESS GROUP TYPE file entry
"RTN","SDEC",17,0)
 D ADDAGI^SDEC22(.SDECY,$G(SDECIEN),$G(SDECIEN1)) Q
"RTN","SDEC",18,0)
ADDRES(SDECY,SDECVAL) ;EP ADD/EDIT RESOURCE
"RTN","SDEC",19,0)
 D ADDRES^SDEC16(.SDECY,$G(SDECVAL)) Q
"RTN","SDEC",20,0)
ADDRESU(SDECY,SDECVAL) ;EP ADD/EDIT RESOURCE USER
"RTN","SDEC",21,0)
 D ADDRESU^SDEC18(.SDECY,$G(SDECVAL)) Q
"RTN","SDEC",22,0)
ADDRG(SDECY,SDECVAL) ;EP ADD/EDIT RESOURCE GROUP
"RTN","SDEC",23,0)
 D ADDRG^SDEC19(.SDECY,$G(SDECVAL)) Q
"RTN","SDEC",24,0)
ADDRGI(SDECY,SDECIEN,SDECIEN1) ;EP Adds RESOURCEID SDECIEN1 to RESOURCE GROUP entry SDECIEN
"RTN","SDEC",25,0)
 D ADDRGI^SDEC20(.SDECY,$G(SDECIEN),$G(SDECIEN1)) Q
"RTN","SDEC",26,0)
APBLKALL(SDECY,SDECSTART,SDECEND) ;EP List of all appointments for all resources
"RTN","SDEC",27,0)
 D APBLKALL^SDEC05(.SDECY,$G(SDECSTART),$G(SDECEND)) Q
"RTN","SDEC",28,0)
APBLKOV(SDECY,SDECSTART,SDECEND,SDECRES,SDECWI) ;EP APPT BLOCKS OVERLAP
"RTN","SDEC",29,0)
 D APBLKOV^SDEC05(.SDECY,$G(SDECSTART),$G(SDECEND),$G(SDECRES),$G(SDECWI)) Q
"RTN","SDEC",30,0)
APPADD ;EP ADD NEW APPOINTMENT
"RTN","SDEC",31,0)
 Q  ;rpc calls directly to APPADD^SDEC07
"RTN","SDEC",32,0)
APPDEL(SDECY,SDECAPTID,SDECTYP,SDECCR,SDECNOT,SDECDATE,SDUSER) ;EP Cancels appointment
"RTN","SDEC",33,0)
 D APPDEL^SDEC08(.SDECY,$G(SDECAPTID),$G(SDECTYP),$G(SDECCR),$G(SDECNOT),$G(SDECDATE),$G(SDUSER)) Q
"RTN","SDEC",34,0)
APPIDGET(SDECY,SDID) ;GET SDEC APPOINTMENT ien for given External ID
"RTN","SDEC",35,0)
 D APPIDGET^SDEC55(.SDECY,$G(SDID)) Q
"RTN","SDEC",36,0)
APPSDGET(SDECY,MAXREC,LASTSUB,SDBEG,SDEND,NOTEFLG,SDRES,DFN,SDID,SDIEN) ;GET appointment data from SDEC APPOINTMENT file 409.84
"RTN","SDEC",37,0)
 D APPSDGET^SDEC55A(.SDECY,$G(MAXREC),$G(LASTSUB),$G(SDBEG),$G(SDEND),$G(NOTEFLG),$G(SDRES),$G(DFN),$G(SDID),$G(SDIEN)) Q
"RTN","SDEC",38,0)
APPSLOTS(SDECY,SDCL,SDBEG,SDEND) ;return array of appt slots and availability - RPC
"RTN","SDEC",39,0)
 D APPSLOTS^SDEC57(.SDECY,$G(SDCL),$G(SDBEG),$G(SDEND)) Q
"RTN","SDEC",40,0)
APPTEVLG(SDECY,DFN) ;EP return appointment data for given patient - RPC
"RTN","SDEC",41,0)
 D APPTEVLG^SDEC38(.SDECY,$G(DFN)) Q
"RTN","SDEC",42,0)
APPTLETR(SDECY,SDECAPID,LT) ;EP Print Appointment Letter
"RTN","SDEC",43,0)
 D APPTLETR^SDEC40(.SDECY,$G(SDECAPID),$G(LT)) Q
"RTN","SDEC",44,0)
APPTYPES(RET,DFN) ; EP for SDEC APPTYPES - Return all active Appointment types from the APPOINTMENT TYPE file 409.1
"RTN","SDEC",45,0)
 D APPTYPES^SDECWL(.RET,$G(DFN)) Q
"RTN","SDEC",46,0)
ARCLOSE(RET,INP...) ;
"RTN","SDEC",47,0)
 D ARCLOSE^SDECAR(.RET,.INP) Q
"RTN","SDEC",48,0)
ARCLOSE1(RET,INP) ; Appt Request CLOSE  (without ... for VistA calls)
"RTN","SDEC",49,0)
 D ARCLOSE^SDECAR(.RET,.INP) Q
"RTN","SDEC",50,0)
ARDGET(SDECY) ;get values for disposition field of SDEC APPT REQUEST file
"RTN","SDEC",51,0)
 D ARDGET^SDECAR(.SDECY) Q
"RTN","SDEC",52,0)
ARGET(RET,ARIEN1,MAXREC,SDBEG,SDEND,DFN,LASTSUB,SDTOP,SVCL,DESDT,PRL,SVCR,SCVISIT,CLINIC,ORIGDT) ;EP Appt Request GET
"RTN","SDEC",53,0)
 D ARGET^SDECAR1(.RET,$G(ARIEN1),$G(MAXREC),$G(SDBEG),$G(SDEND),$G(DFN),$G(LASTSUB),$G(SDTOP),$G(SVCL),$G(DESDT),$G(PRL),$G(SVCR),$G(SCVISIT),$G(CLINIC),$G(ORIGDT)) Q
"RTN","SDEC",54,0)
ARMRTGET(SDECY,ARIEN) ;GET number of entries and values in MRTC CALC PREF DATES
"RTN","SDEC",55,0)
 D ARMRTGET^SDECAR(.SDECY,$G(ARIEN)) Q
"RTN","SDEC",56,0)
ARMRTSET(SDECY,ARIEN,MRTC) ;SET MRTC CALC PREF DATES dates - clears the multiple and sets the new ones that are passed in
"RTN","SDEC",57,0)
 D ARMRTSET^SDECAR(.SDECY,$G(ARIEN),$G(MRTC)) Q
"RTN","SDEC",58,0)
AROPEN(RET,ARAPP,ARIEN,ARDDT) ;Appt Request Open/re-open
"RTN","SDEC",59,0)
 D AROPEN^SDECAR(.RET,$G(ARAPP),$G(ARIEN),$G(ARDDT)) Q
"RTN","SDEC",60,0)
ARPCSET(SDECY,INP,ARIEN) ;SET update patient contacts in SDEC APPT REQUEST file
"RTN","SDEC",61,0)
 D ARPCSET^SDECAR(.SDECY,$G(INP),$G(ARIEN)) Q
"RTN","SDEC",62,0)
ARSET(RET,INP...) ;EP Appt Request Set
"RTN","SDEC",63,0)
 D ARSET^SDECAR2(.RET,.INP) Q
"RTN","SDEC",64,0)
ARSET1(RET,INP) ;EP Appt Request Set (without ... for VistA calls)
"RTN","SDEC",65,0)
 D ARSET^SDECAR2(.RET,.INP) Q
"RTN","SDEC",66,0)
AVADD(SDECY,SDECSTART,SDECEND,SDECTYPID,SDECRES,SDECSLOTS,SDECNOTE) ;EP SET Create entry in SDEC ACCESS BLOCK
"RTN","SDEC",67,0)
 D AVADD^SDEC12(.SDECY,$G(SDECSTART),$G(SDECEND),$G(SDECTYPID),$G(SDECRES),$G(SDECSLOTS),$G(SDECNOTE)) Q
"RTN","SDEC",68,0)
AVDEL(SDECY,SDECAVID) ;EP Cancel Availability - Deletes Access Block
"RTN","SDEC",69,0)
 D AVDEL^SDEC13(.SDECY,$G(SDECAVID)) Q
"RTN","SDEC",70,0)
AVDELDT(SDECY,SDECRESD,SDECSTART,SDECEND) ;EP Cancel availability in a date range
"RTN","SDEC",71,0)
 D AVDELDT^SDEC13(.SDECY,$G(SDECRESD),$G(SDECSTART),$G(SDECEND)) Q
"RTN","SDEC",72,0)
BOOKHLDY(SDECY,SDECCL) ;  Returns can book on holiday flag for a clinic.  12/1/17 wtc  679 
"RTN","SDEC",73,0)
 D BOOKHLDY^SDEC32(.SDECY,SDECCL) Q  ;
"RTN","SDEC",74,0)
CANCKOUT(SDECY,SDECAPTID) ;EP Cancel Check Out appointment
"RTN","SDEC",75,0)
 D CANCKOUT^SDEC25(.SDECY,$G(SDECAPTID)) Q
"RTN","SDEC",76,0)
CANREAS(SDECY,SDECIN) ;EP return active/inactive entries from the CANCELLATION REASONS table 409.2
"RTN","SDEC",77,0)
 D CANREAS^SDEC45(.SDECY,$G(SDECIN)) Q
"RTN","SDEC",78,0)
CAP(SDECY,DFN,SDAMEVT,SDT,DVBADA,SDAUTORB,SDCANVET) ;
"RTN","SDEC",79,0)
 D CAP^SDEC58(.SDECY,$G(DFN),$G(SDAMEVT),$G(SDT),$G(DVBADA),$G(SDAUTORB),$G(SDCANVET)) Q
"RTN","SDEC",80,0)
CGET(SDECY) ;GET active Countries from the COUNTRY CODE file 779.004
"RTN","SDEC",81,0)
 D CGET^SDEC55(.SDECY) Q
"RTN","SDEC",82,0)
CHECKIN(SDECY,SDECAPTID,SDECCDT,SDECCC,SDECPRV,SDECROU,SDECVCL,SDECVFM,SDECOG,SDECCR,SDECPCC,SDECWHF) ;EP Check in appointment
"RTN","SDEC",83,0)
 D CHECKIN^SDEC25(.SDECY,$G(SDECAPTID),$G(SDECCDT),$G(SDECCC),$G(SDECPRV),$G(SDECROU),$G(SDECVCL),$G(SDECVFM),$G(SDECOG),$G(SDECCR),$G(SDECPCC),$G(SDECWHF)) Q
"RTN","SDEC",84,0)
CHECKOUT(SDECY,DFN,SDT,SDCODT,SDECAPTID,VPRV) ;EP Check Out appointment
"RTN","SDEC",85,0)
 D CHECKOUT^SDEC25(.SDECY,$G(DFN),$G(SDT),$G(SDCODT),$G(SDECAPTID),$G(VPRV)) Q
"RTN","SDEC",86,0)
CLINALL(RET,MAXREC,SDECP) ; EP Return the IEN and NAME for all entries in the SD WL CLINIC LOCATION file
"RTN","SDEC",87,0)
 D CLINALL^SDECWL(.RET,$G(MAXREC),$G(SDECP)) Q
"RTN","SDEC",88,0)
CLINCAN(SDECY,SDECCLST,SDECBEG,SDECEND) ;EP Return recordset of CANCELLED patient appointments
"RTN","SDEC",89,0)
 D CLINCAN^SDEC34(.SDECY,$G(SDECCLST),$G(SDECBEG),$G(SDECEND)) Q
"RTN","SDEC",90,0)
CLINDIS(SDECY,SDECCLST,SDECBEG,SDECEND,SDECWI) ;EP Return formatted text output of the Clinic Schedules Report
"RTN","SDEC",91,0)
 D CLINDIS^SDEC47(.SDECY,$G(SDECCLST),$G(SDECBEG),$G(SDECEND),$G(SDECWI)) Q
"RTN","SDEC",92,0)
CLINDISW(SDECY,SDECCLST,SDECBEG,SDECEND) ;EP Return formatted text output of the Clinic Schedules Report for Walkins
"RTN","SDEC",93,0)
 D CLINDISW^SDEC47(.SDECY,$G(SDECCLST),$G(SDECBEG),$G(SDECEND)) Q
"RTN","SDEC",94,0)
CLINLET(SDECY,SDECCLST,SDECBEG,SDECEND,SDECWI) ;EP CLINIC LETTERS Appointment data
"RTN","SDEC",95,0)
 D CLINLET^SDEC27(.SDECY,$G(SDECCLST),$G(SDECBEG),$G(SDECEND),$G(SDECWI)) Q
"RTN","SDEC",96,0)
CLINLETW(SDECY,SDECCLST,SDECBEG,SDECEND) ;EP CLINIC LETTERS WALK-IN Appointment data for Walk-in Appointments only
"RTN","SDEC",97,0)
 D CLINLETW^SDEC27(.SDECY,$G(SDECCLST),$G(SDECBEG),$G(SDECEND)) Q
"RTN","SDEC",98,0)
CLINPROV(SDECY,SDECCL) ;EP return all providers for a given clinic from the HOSPITAL LOCATION file 44
"RTN","SDEC",99,0)
 D CLINPROV^SDEC45(.SDECY,$G(SDECCL)) Q
"RTN","SDEC",100,0)
CLINSET(SDECY,SDNOSLOT,SDIENS,SDECP,SDNOLET,MAXREC) ;EP Returns CLINIC SETUP PARAMETERS for clinics that are active in the HOSPITAL LOCATION file
"RTN","SDEC",101,0)
 D CLINSET^SDEC32(.SDECY,$G(SDNOSLOT),$G(SDIENS),$G(SDECP),$G(SDNOLET),$G(MAXREC)) Q
"RTN","SDEC",102,0)
CLINSTOP(SDECY,SDP) ;EP CLINIC STOP remote procedure
"RTN","SDEC",103,0)
 D CLINSTOP^SDEC45(.SDECY,$G(SDP)) Q
"RTN","SDEC",104,0)
COPYAPPT(SDECY,SDECRES,SDEC44,SDECBEG,SDECEND) ;EP Copy appointments from HOSPITAL LOCATION to SDEC RESOURCE
"RTN","SDEC",105,0)
 D COPYAPPT^SDEC29(.SDECY,$G(SDECRES),$G(SDEC44),$G(SDECBEG),$G(SDECEND)) Q
"RTN","SDEC",106,0)
CPCANC(SDECY,SDECTSK) ;EP Copy Appointment Cancel
"RTN","SDEC",107,0)
 D CPCANC^SDEC29(.SDECY,$G(SDECTSK)) Q
"RTN","SDEC",108,0)
CPSTAT(SDECY,SDECTSK) ;EP Copy Appointment Status
"RTN","SDEC",109,0)
 D CPSTAT^SDEC29(.SDECY,$G(SDECTSK)) Q
"RTN","SDEC",110,0)
CRSCHED(SDECY,SDECRES,SDECSTART,SDECEND,SDECWKIN,MAXREC,LASTSUB) ;EP Create Resource Appointment Schedule  ;alb/sat 672
"RTN","SDEC",111,0)
 D CRSCHED^SDEC02(.SDECY,$G(SDECRES),$G(SDECSTART),$G(SDECEND),$G(SDECWKIN),$G(MAXREC),$G(LASTSUB)) Q
"RTN","SDEC",112,0)
CSLOTSCH(SDECY,SDECRES,SDECSTART,SDECEND,SDECTYPES,SDECSRCH) ;GET Create Assigned Slot Schedule
"RTN","SDEC",113,0)
 D CSLOTSCH^SDEC04(.SDECY,$G(SDECRES),$G(SDECSTART),$G(SDECEND),$G(SDECTYPES),$G(SDECSRCH)) Q
"RTN","SDEC",114,0)
CURFACG(SDECY,SDECDUZ) ;EP  get current division/facility for given user
"RTN","SDEC",115,0)
 D CURFACG^SDEC46(.SDECY,$G(SDECDUZ)) Q
"RTN","SDEC",116,0)
CVARAPPT(SDECY,SDCL) ;EP IS Clinic Variable Appointment Length
"RTN","SDEC",117,0)
 D CVARAPPT^SDEC37(.SDECY,$G(SDCL)) Q
"RTN","SDEC",118,0)
DELAG(SDECY,SDECGRP) ;EP Deletes entry having IEN SDECGRP from SDEC ACCESS GROUP file
"RTN","SDEC",119,0)
 D DELAG^SDEC21(.SDECY,$G(SDECGRP)) Q
"RTN","SDEC",120,0)
DELAGI(SDECY,SDECIEN,SDECIEN1) ;EP Deletes entry having Access Group SDECIEN and Access Type SDECIEN1 the SDEC ACCESS GROUP TYPE file
"RTN","SDEC",121,0)
 D DELAGI^SDEC22(.SDECY,$G(SDECIEN),$G(SDECIEN1)) Q
"RTN","SDEC",122,0)
DELRESGP(SDECY,SDECGRP) ;EP Deletes entry name SDECGRP from SDEC RESOURCE GROUP file
"RTN","SDEC",123,0)
 D DELRESGP^SDEC19(.SDECY,$G(SDECGRP)) Q
"RTN","SDEC",124,0)
DELRGI(SDECY,SDECIEN,SDECIEN1) ;EP Deletes entry SDECIEN1 from entry SDECIEN in the SDEC RESOURCE GROUP file
"RTN","SDEC",125,0)
 D DELRGI^SDEC20(.SDECY,$G(SDECIEN),$G(SDECIEN1)) Q
"RTN","SDEC",126,0)
DELRU(SDECY,SDECIEN) ;EP Delete Resource User from SDEC RESOURCE USER file
"RTN","SDEC",127,0)
 D DELRU^SDEC18(.SDECY,$G(SDECIEN)) Q
"RTN","SDEC",128,0)
EDITAPPT(SDECY,SDECAPTID,SDECNOTE,SDECLEN) ;EP Edit appointment (only 'note text' and appointment length can be edited)
"RTN","SDEC",129,0)
 D EDITAPPT^SDEC26(.SDECY,$G(SDECAPTID),$G(SDECNOTE),$G(SDECLEN)) Q
"RTN","SDEC",130,0)
EHRPT(SDECY,SDECWID,SDECDFN) ;EP Raise patient selection event to EHR
"RTN","SDEC",131,0)
 D EHRPT^SDEC30(.SDECY,$G(SDECWID),$G(SDECDFN)) Q
"RTN","SDEC",132,0)
ETHGET(SDECY) ;GET active Ethnicities from the ETHNICITY file 10.2
"RTN","SDEC",133,0)
 D ETHGET^SDEC55(.SDECY) Q
"RTN","SDEC",134,0)
ETHCMGET(SDECY) ;GET values from the RACE AND ETHNICITY COLLECTION METHOD file 10.3
"RTN","SDEC",135,0)
 D ETHCMGET^SDEC55(.SDECY) Q
"RTN","SDEC",136,0)
FACLIST(SDECY,DFN) ; Return list of remote facilities for patient
"RTN","SDEC",137,0)
 D PTINQ^SDECPT(.SDECY,$G(DFN)) Q
"RTN","SDEC",138,0)
FAPPTGET(SDECY,DFN,SDBEG,SDEND,SDANC) ;GET Future appointments for given patient and date range
"RTN","SDEC",139,0)
 D FAPPTGET^SDEC50(.SDECY,$G(DFN),$G(SDBEG),$G(SDEND),$G(SDANC)) Q
"RTN","SDEC",140,0)
GETFAC(SDECY,SDECDUZ) ;EP Gets all facilities for a user
"RTN","SDEC",141,0)
 D GETFAC^SDEC46(.SDECY,$G(SDECDUZ)) Q
"RTN","SDEC",142,0)
GETONE(SDECY,SDGMR) ;EP Return data on one consult
"RTN","SDEC",143,0)
 D GETONE^SDEC51(.SDECY,$G(SDGMR)) Q
"RTN","SDEC",144,0)
GETREGA(SDECRET,DFN) ;EP return basic reg info/demographics for given patient
"RTN","SDEC",145,0)
 D GETREGA^SDEC09(.SDECRET,$G(DFN)) Q
"RTN","SDEC",146,0)
GETSITES(SDECY) ;return active National VA site names and station numbers
"RTN","SDEC",147,0)
 D GETSITES^SDEC59(.SDECY) Q
"RTN","SDEC",148,0)
GETVPRV(BGOY,VPRV) ;EP return data from the V PROVIDER file
"RTN","SDEC",149,0)
 D GETVPRV^SDEC44(.BGOY,$G(VPRV)) Q
"RTN","SDEC",150,0)
HIDE(SDECY) ;Return clinics hidden from display
"RTN","SDEC",151,0)
 D HIDE^SDEC45(.SDECY) Q
"RTN","SDEC",152,0)
HOLIDAY(SDECY,SDECBD) ;EP return all entries from the HOLIDAY file 40.5
"RTN","SDEC",153,0)
 D HOLIDAY^SDEC45(.SDECY,$G(SDECBD)) Q
"RTN","SDEC",154,0)
HOSPLOC(SDECY,SDECP,MAXREC,LSUB) ;EP return HOSPITAL LOCATIONs
"RTN","SDEC",155,0)
 D HOSPLOC^SDEC32(.SDECY,$G(SDECP),$G(MAXREC),$G(LSUB)) Q
"RTN","SDEC",156,0)
IMHERE(SDECRES) ;EP I'm Here
"RTN","SDEC",157,0)
 D IMHERE^SDEC31(.SDECRES) Q
"RTN","SDEC",158,0)
NETLOC(SDECY,LOCATION) ;GET data from the NETWORK LOCATION file 2005.2
"RTN","SDEC",159,0)
 D NETLOC^SDEC59(.SDECY,$G(LOCATION)) Q
"RTN","SDEC",160,0)
NEWPERS(SDECY,SDCLASS,SDPART,MAXREC,LSUB,INACT) ;return entries from the USR CLASS MEMBERSHIP file that have the given USR CLASS (default is PROVIDER)
"RTN","SDEC",161,0)
 D NEWPERS^SDEC45(.SDECY,$G(SDCLASS),$G(SDPART),$G(MAXREC),$G(LSUB),$G(INACT)) Q
"RTN","SDEC",162,0)
NOSHOPAT(SDECY,DFN,SDCL) ;EP COLLECT NO-SHOW DATA for Patient
"RTN","SDEC",163,0)
 D NOSHOPAT^SDEC37(.SDECY,$G(DFN),$G(SDCL)) Q
"RTN","SDEC",164,0)
NOSHOW(SDECY,SDECAPTID,SDECNS,USERIEN,SDECDATE) ;EP Sets appointment noshow flag in SDEC APPOINTMENT file
"RTN","SDEC",165,0)
 D NOSHOW^SDEC31(.SDECY,$G(SDECAPTID),$G(SDECNS),$G(USERIEN),$G(SDECDATE)) Q
"RTN","SDEC",166,0)
OVBOOK(SDECY,SDCL,SDBEG,SDECRES) ;EP RPC - OVERBOOK - CHECK FOR OVERBOOK FOR GIVEN CLINIC, DATE, AND RESOURCE
"RTN","SDEC",167,0)
 D OVBOOK^SDEC07A(.SDECY,$G(SDCL),$G(SDBEG),$G(SDECRES)) Q
"RTN","SDEC",168,0)
PATAPPTD(SDECY,DFN) ;EP Return the Patient appointment display
"RTN","SDEC",169,0)
 D PATAPPTD^SDEC27(.SDECY,$G(DFN)) Q
"RTN","SDEC",170,0)
PATAPPTH(SDECY,DFN) ;EP return patient's appointment history for given patient - RPC
"RTN","SDEC",171,0)
 D PATAPPTH^SDEC48(.SDECY,$G(DFN)) Q
"RTN","SDEC",172,0)
PCSGET(SDECY,SDSVSP) ;GET clinics for a service/specialty (clinic stop)
"RTN","SDEC",173,0)
 D PCSGET^SDEC50(.SDECY,$G(SDSVSP)) Q
"RTN","SDEC",174,0)
PCSTGET(SDECY,DFN,SDCL,SDBEG,SDEND) ;GET patient clinic status for a clinic for a given time frame - has the patient been seen by the given Clinic in the past 24 months
"RTN","SDEC",175,0)
 D PCSTGET^SDEC50(.SDECY,$G(DFN),$G(SDCL),$G(SDBEG),$G(SDEND)) Q
"RTN","SDEC",176,0)
PCST2GET(SDECY,DFN,STOP,SDBEG,SDEND) ;GET patient clinic status for a service/specialty (clinic stop) for a given time frame - has the patient been seen any clinics with the given service/specialty (clinic stop) in the past 24 months
"RTN","SDEC",177,0)
 D PCST2GET^SDEC50(.SDECY,$G(DFN),$G(STOP),$G(SDBEG),$G(SDEND)) Q
"RTN","SDEC",178,0)
PREFGET(SDECY,DFN,INAC) ;EP Get values from SDEC PREFERENCES AND SPECIAL NEEDS file for given patient
"RTN","SDEC",179,0)
 D PREFGET^SDEC49(.SDECY,$G(DFN),$G(INAC)) Q
"RTN","SDEC",180,0)
PREFGETV(SDECY) ;EP Get all valid PREFERENCE text from SDEC PREFERENCES AND SPECIAL NEEDS file
"RTN","SDEC",181,0)
 D PREFGETV^SDEC49(.SDECY) Q
"RTN","SDEC",182,0)
PREFSET(SDECY,DFN,PREF,REMARK) ;EP Set values to SDEC PREFERENCES AND SPECIAL NEEDS file  ;alb/sat 658 add REMARK
"RTN","SDEC",183,0)
 D PREFSET^SDEC49(.SDECY,$G(DFN),$G(PREF),$G(REMARK)) Q
"RTN","SDEC",184,0)
PRIV(SDECY,CLINIEN,USER) ;IS this USER in the PRIVILEGED USER multiple for the clinic
"RTN","SDEC",185,0)
 D PRIV^SDEC32(.SDECY,$G(CLINIEN),$G(USER)) Q
"RTN","SDEC",186,0)
PROVALL(SDECY,SDECCL) ;EP return all providers for a given clinic from the HOSPITAL LOCATION file 44
"RTN","SDEC",187,0)
 D PROVALL^SDEC45(.SDECY,$G(SDECCL)) Q
"RTN","SDEC",188,0)
PROVCLIN(SDECY,SDECPRV) ;EP PROVIDER CLINICS remote procedure
"RTN","SDEC",189,0)
 D PROVCLIN^SDEC45(.SDECY,$G(SDECPRV)) Q
"RTN","SDEC",190,0)
PTINQ(SDECY,DFN) ;GET output from ORWPT PTINQ in DataTable format
"RTN","SDEC",191,0)
 D PTINQ^SDECPT(.SDECY,$G(DFN)) Q
"RTN","SDEC",192,0)
PTLOOKRS(SDECY,SDECP,SDECC,LASTSUB) ;EP Patient Lookup
"RTN","SDEC",193,0)
 D PTLOOKRS^SDEC28(.SDECY,$G(SDECP),$G(SDECC),$G(LASTSUB)) Q
"RTN","SDEC",194,0)
PTSET(SDECY,INP...) ;SET patient demographics
"RTN","SDEC",195,0)
 D PTSET^SDEC53(.SDECY,.INP) Q
"RTN","SDEC",196,0)
PTSET1(SDECY,INP) ;SET patient demographics (call from debug)
"RTN","SDEC",197,0)
 D PTSET^SDEC53(.SDECY,.INP) Q
"RTN","SDEC",198,0)
RACEGET(SDECY) ;GET active Race entries from the RACE file 10
"RTN","SDEC",199,0)
 D RACEGET^SDEC55(.SDECY) Q
"RTN","SDEC",200,0)
RAISEVNT(SDECY,SDECEVENT,SDECPARAM,SDECSIP,SDECSPT) ;EP RAISE EVENT
"RTN","SDEC",201,0)
 D RAISEVNT^SDEC23(.SDECY,$G(SDECEVENT),$G(SDECPARAM),$G(SDECSIP),$G(SDECSPT)) Q
"RTN","SDEC",202,0)
REBKCLIN(SDECY,SDECCLST,SDECBEG,SDECEND) ;EP Return recordset of rebooked patient appointments between given dates
"RTN","SDEC",203,0)
 D REBKCLIN^SDEC34(.SDECY,$G(SDECCLST),$G(SDECBEG),$G(SDECEND)) Q
"RTN","SDEC",204,0)
REBKLIST(SDECY,SDECLIST) ;EP patient appointments used in listing REBOOKED appointments for a list of appointmentIDs.
"RTN","SDEC",205,0)
 D REBKLIST^SDEC34(.SDECY,$G(SDECLIST)) Q
"RTN","SDEC",206,0)
REBKNEXT(SDECY,SDECDATE,SDECRES,SDECTPID) ;EP find the next ACCESS BLOCK in resource SDECRES after SDECSTART
"RTN","SDEC",207,0)
 D REBKNEXT^SDEC33(.SDECY,$G(SDECDATE),$G(SDECRES),$G(SDECTPID)) Q
"RTN","SDEC",208,0)
RECIEN(SDECY,RECIEN) ;GET RECALL REMINDERS for given ID
"RTN","SDEC",209,0)
 D RECIEN^SDEC52(.SDECY,$G(RECIEN)) Q
"RTN","SDEC",210,0)
RECGET(SDECY,DFN,SDBEG,SDEND,MAXREC,LASTSUB,RECIEN,SDSTOP,SDFLAGS,SDCLL) ; GET entries from the RECALL REMINDERS file 403.5 for a given Patient and Recall Date range. ;alb/sat 658 add SDCLL
"RTN","SDEC",211,0)
 D RECGET^SDEC52(.SDECY,$G(DFN),$G(SDBEG),$G(SDEND),$G(MAXREC),$G(LASTSUB),$G(RECIEN),$G(SDSTOP),$G(SDFLAGS),$G(SDCLL)) Q
"RTN","SDEC",212,0)
RECSET(SDECY,INP...) ; SET/EDIT/CANCEL/DELETE an entry to the RECALL REMINDERS file 403.5
"RTN","SDEC",213,0)
 D RECSET^SDEC52A(.SDECY,.INP) Q
"RTN","SDEC",214,0)
RECSET1(SDECY,INP) ; SET/EDIT/CANCEL/DELETE an entry to the RECALL REMINDERS file 403.5
"RTN","SDEC",215,0)
 D RECSET^SDEC52A(.SDECY,.INP) Q
"RTN","SDEC",216,0)
RECDSET(SDECY,RECALLIEN,SDRRFTR,SDCOMM) ; DELETE an entry to the RECALL REMINDERS file 403.5
"RTN","SDEC",217,0)
 D RECDSET^SDEC52A(.SDECY,$G(RECALLIEN),$G(SDRRFTR),$G(SDCOMM)) Q
"RTN","SDEC",218,0)
RECAPGET(SDECY) ; GET entries from the RECALL REMINDERS APPT TYPE file 403.51
"RTN","SDEC",219,0)
 D RECAPGET^SDEC52B(.SDECY) Q
"RTN","SDEC",220,0)
RECPRGET(SDECY,RECINACT,SDECP,MAXREC,LASTSUB) ;GET entries from the RECALL REMINDERS PROVIDERS file 403.54
"RTN","SDEC",221,0)
 D RECPRGET^SDEC52B(.SDECY,$G(RECINACT),$G(SDECP),$G(MAXREC),$G(LASTSUB)) Q
"RTN","SDEC",222,0)
REGEVENT(SDECY,SDECEVENT,SDECIP,SDECPORT) ;EP Called by client to inform server of client's interest in SDECEVENT
"RTN","SDEC",223,0)
 D REGEVENT^SDEC23(.SDECY,$G(SDECEVENT),$G(SDECIP),$G(SDECPORT)) Q
"RTN","SDEC",224,0)
REP1GET(SDECY,MAXREC,LASTSUB,PNAME) ;GET clinic data for report
"RTN","SDEC",225,0)
 D REP1GET^SDEC56(.SDECY,$G(MAXREC),$G(LASTSUB),$G(PNAME)) Q
"RTN","SDEC",226,0)
REQGET(SDECY,SDBEG,SDEND,MAXREC,LASTSUB,SDGMR) ; GET entries with an ACTIVITY of RECEIVED, but do not have an ACTIVITY of SCHEDULED from the REQUEST/CONSULTATING file 123
"RTN","SDEC",227,0)
 D REQGET^SDEC51(.SDECY,$G(SDBEG),$G(SDEND),$G(MAXREC),$G(LASTSUB),$G(SDGMR)) Q
"RTN","SDEC",228,0)
RESGPUSR(SDECY,SDECDUZ) ;EP GROUP RESOURCE
"RTN","SDEC",229,0)
 D RESGPUSR^SDEC01(.SDECY,$G(SDECDUZ)) Q
"RTN","SDEC",230,0)
RESGRPUS(SDECY,SDECDUZ) ;EP return ACTIVE resource group names for the given user
"RTN","SDEC",231,0)
 D RESGRPUS^SDEC01(.SDECY,$G(SDECDUZ)) Q
"RTN","SDEC",232,0)
RESLETRF(SDECY,SDECRES,SDECLT) ;EP Return formatted text output of the Resource's Letter - either "LETTER TEXT" (also used as Reminder Letter), NO SHOW LETTER, or CLINIC CANCELLATION LETTER.
"RTN","SDEC",233,0)
 D RESLETRF^SDEC47(.SDECY,$G(SDECRES),$G(SDECLT)) Q
"RTN","SDEC",234,0)
RESLETRS(SDECY,SDECLIST,SDLTR,SDNOS,SDCAN) ;EP GET recordset of RESOURCES and associated LETTERS
"RTN","SDEC",235,0)
 D RESLETRS^SDEC35(.SDECY,$G(SDECLIST),$G(SDLTR),$G(SDNOS),$G(SDCAN)) Q
"RTN","SDEC",236,0)
RESUSER(SDECY,SDRES) ;EP SDEC RESOURCE USER remote procedure returns all entries from the SDEC RESOURCE USER table 409.833
"RTN","SDEC",237,0)
 D RESUSER^SDEC45(.SDECY,$G(SDRES)) Q
"RTN","SDEC",238,0)
RESOURCE(SDECY,SDECDUZ,SDACT,SDTYPE,MAXREC,LASTSUBI,SDIEN,SDECP) ;EP Returns ADO Recordset with ALL RESOURCE names
"RTN","SDEC",239,0)
 D RESOURCE^SDEC01A(.SDECY,$G(SDECDUZ),$G(SDACT),$G(SDTYPE),$G(MAXREC),$G(LASTSUBI),$G(SDIEN),$G(SDECP)) Q
"RTN","SDEC",240,0)
SCHUSR(SDECY) ;EP Return recordset of all users in NEW PERSON having SDECZMENU key
"RTN","SDEC",241,0)
 D SCHUSR^SDEC17(.SDECY) Q
"RTN","SDEC",242,0)
SEARCHAV(SDECY,SDECRES,SDECSTRT,SDECEND,SDECTYPES,SDECAMPM,SDECWKDY) ;EP Searches availability database
"RTN","SDEC",243,0)
 D SEARCHAV^SDEC24(.SDECY,$G(SDECRES),$G(SDECSTRT),$G(SDECEND),$G(SDECTYPES),$G(SDECAMPM),$G(SDECWKDY)) Q
"RTN","SDEC",244,0)
SETFAC(SDECY,SDECDUZ,SDECFAC) ;EP SET FACILITY
"RTN","SDEC",245,0)
 D SETFAC^SDEC46(.SDECY,$G(SDECDUZ),$G(SDECFAC)) Q
"RTN","SDEC",246,0)
SETRBOOK(SDECY,SDECAPPT,SDECDATE) ;EP Sets rebook date into appointment
"RTN","SDEC",247,0)
 D SETRBOOK^SDEC33(.SDECY,$G(SDECAPPT),$G(SDECDATE)) Q
"RTN","SDEC",248,0)
SPACEBAR(SDECY,SDECDIC,SDECVAL) ;EP Update ^DISV with most recent lookup value SDECVAL from file SDECDIC
"RTN","SDEC",249,0)
 D SPACEBAR^SDEC30(.SDECY,$G(SDECDIC),$G(SDECVAL)) Q
"RTN","SDEC",250,0)
SUMMGET(SDECRET,SDBEG,SDEND,USER,LSUB,MAXREC) ;GET Audit Summary for given date range
"RTN","SDEC",251,0)
 D SUMMGET^SDEC54(.SDECRET,$G(SDBEG),$G(SDEND),$G(USER),$G(LSUB),$G(MAXREC)) Q
"RTN","SDEC",252,0)
SUMMGET2(SDECRET,SDBEG,SDEND,USER) ;Get compiled Audit Report for a given date range
"RTN","SDEC",253,0)
 D SUMMGET2^SDECAUD(.SDECRET,$G(SDBEG),$G(SDEND),$G(USER)) Q
"RTN","SDEC",254,0)
SUMMAGET(SDECY,SDBEG,SDEND,USER,LSUB,MAXREC) ;get ALL appointments with a cancel status from SDEC APPOINTMENT for given date range and user
"RTN","SDEC",255,0)
 D SUMMAGET^SDEC54A(.SDECY,$G(SDBEG),$G(SDEND),$G(USER),$G(LSUB),$G(MAXREC)) Q
"RTN","SDEC",256,0)
SUSRINFO(SDECY,SDECDUZ) ;EP SCHEDULING USER INFO
"RTN","SDEC",257,0)
 D SUSRINFO^SDEC01(.SDECY,$G(SDECDUZ)) Q
"RTN","SDEC",258,0)
SVSPALL(RET) ; EP return IEN and NAME for all entries in the SD WL SERVICE/SPECIALTY file
"RTN","SDEC",259,0)
 D SVSPALL^SDECWL(.RET) Q
"RTN","SDEC",260,0)
SYSSTAT(SDECY) ; EP SYSTEM STATUS
"RTN","SDEC",261,0)
 D SYSSTAT^SDECUTL(.SDECY) Q
"RTN","SDEC",262,0)
TPBLKOV(SDECY,SDECSTART,SDECEND,SDECRES) ;EP TYPE BLOCKS OVERLAP
"RTN","SDEC",263,0)
 D TPBLKOV^SDEC06(.SDECY,$G(SDECSTART),$G(SDECEND),$G(SDECRES)) Q
"RTN","SDEC",264,0)
UNDOCANA(SDECY,SDECAPTID) ;EP  Undo Cancel Appointment
"RTN","SDEC",265,0)
 D UNDOCANA^SDEC08(.SDECY,$G(SDECAPTID)) Q
"RTN","SDEC",266,0)
UNREGEV(SDECY,SDECEVENT,SDECIP,SDECPORT) ;EP rpc SDE UNREGEV Called by client to Unregister client's interest in SDECEVENT
"RTN","SDEC",267,0)
 D UNREGEV^SDEC23(.SDECY,$G(SDECEVENT),$G(SDECIP),$G(SDECPORT)) Q
"RTN","SDEC",268,0)
WAITLIST(SDECY,SDECRES) ;EP COLLECT WAITLIST DATA
"RTN","SDEC",269,0)
 D WAITLIST^SDEC36(.SDECY,$G(SDECRES)) Q
"RTN","SDEC",270,0)
WLCLOSE(RET,INP...) ; Waitlist CLOSE
"RTN","SDEC",271,0)
 D WLCLOSE^SDECWL(.RET,.INP) Q
"RTN","SDEC",272,0)
WLCLOSE1(RET,INP) ; Waitlist CLOSE  (without ... for VistA calls)
"RTN","SDEC",273,0)
 D WLCLOSE^SDECWL(.RET,.INP) Q
"RTN","SDEC",274,0)
WLGET(RET,WLIEN1,MAXREC,SDBEG,SDEND,DFN,LASTSUB,SDTOP,SVCL,DESDT,PRI,SVCR,SCVISIT,CLINIC,ORIGDT) ;EP Waitlist GET   ;alb/sat 658 add SVCL-SCVISIT
"RTN","SDEC",275,0)
 D WLGET^SDECWL1(.RET,$G(WLIEN1),$G(MAXREC),$G(SDBEG),$G(SDEND),$G(DFN),$G(LASTSUB),$G(SDTOP),$G(SVCL),$G(DESDT),$G(PRI),$G(SVCR),$G(SCVISIT),$G(CLINIC),$G(ORIGDT)) Q
"RTN","SDEC",276,0)
WLHIDE(SDECY,DFN,WLCL) ;GET wait list entries in which the associated clinic's 'HIDE FROM DISPLAY?' field is 'YES'
"RTN","SDEC",277,0)
 D WLHIDE^SDECWL3(.SDECY,$G(DFN),$G(WLCL)) Q
"RTN","SDEC",278,0)
WLOPEN(RET,WLAPP,WLIEN,WLDDT) ;SET Waitlist Open/re-open
"RTN","SDEC",279,0)
 D WLOPEN^SDECWL(.RET,$G(WLAPP),$G(WLIEN),$G(WLDDT)) Q
"RTN","SDEC",280,0)
WLPCSET(SDECY,INP,WLIEN) ;SET update patient contacts in SD WAIT LIST file
"RTN","SDEC",281,0)
 D WLPCSET^SDECWL(.SDECY,$G(INP),$G(WLIEN)) Q
"RTN","SDEC",282,0)
WLSET(RET,INP...) ;EP Waitlist Set
"RTN","SDEC",283,0)
 D WLSET^SDECWL2(.RET,.INP) Q
"RTN","SDEC",284,0)
WLSET1(RET,INP) ;EP Waitlist Set (without ... for VistA calls)
"RTN","SDEC",285,0)
 D WLSET^SDECWL2(.RET,.INP) Q
"RTN","SDEC07A")
0^4^B84573487
"RTN","SDEC07A",1,0)
SDEC07A ;ALB/SAT - VISTA SCHEDULING RPCS ;JUL 19, 2016
"RTN","SDEC07A",2,0)
 ;;5.3;Scheduling;**627,642,651,686,679**;Aug 13, 1993;Build 15
"RTN","SDEC07A",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified
"RTN","SDEC07A",4,0)
 ;References made to ICR #6185 and #4837
"RTN","SDEC07A",5,0)
 Q
"RTN","SDEC07A",6,0)
 ;
"RTN","SDEC07A",7,0)
OVBOOK(SDECY,SDCL,NSDT,SDECRES) ;RPC - OVERBOOK - Check if Overbook is allowed for given Clinic and Date.
"RTN","SDEC07A",8,0)
 ;OVBOOK(SDECY,SDCL,NSDT,SDECRES)  external parameter tag is in SDEC
"RTN","SDEC07A",9,0)
 ;  .SDECY   = returned pointer to OVERBOOK data
"RTN","SDEC07A",10,0)
 ;   SDCL    = clinic code - pointer to Hospital Location file ^SC
"RTN","SDEC07A",11,0)
 ;   NSDT    = date/time of new appointment
"RTN","SDEC07A",12,0)
 ;   SDECRES = resource to check for overbook
"RTN","SDEC07A",13,0)
 N %DT,AP,SDECI,OB,SDBK,OBCNT,OBMAX,SDCLN,SDCLRES,SDCLSL,SDCNT,SDRET,SDT,SDTD,SDTE,X,Y
"RTN","SDEC07A",14,0)
 N SD30,SDARR,OBCNTSUM
"RTN","SDEC07A",15,0)
 S OBCNTSUM=0
"RTN","SDEC07A",16,0)
 ; SDTD  = new schedule Date only in FM format
"RTN","SDEC07A",17,0)
 ; SDT   = loop value for $o through schedules
"RTN","SDEC07A",18,0)
 ; SDTE  = end of loop schedule
"RTN","SDEC07A",19,0)
 ; NSDT  = new appointment schedule Date/Time will be converted to FM format
"RTN","SDEC07A",20,0)
 S SDECI=0
"RTN","SDEC07A",21,0)
 S SDECY="^TMP(""SDEC"","_$J_")"
"RTN","SDEC07A",22,0)
 K @SDECY
"RTN","SDEC07A",23,0)
 S @SDECY@(0)="T00020ERRORID"_$C(30)
"RTN","SDEC07A",24,0)
 ;check for valid Hospital location
"RTN","SDEC07A",25,0)
 I '+SDCL D ERR1("Invalid Clinic ID - Cannot determine if Overbook is allowed.") Q
"RTN","SDEC07A",26,0)
 I '$D(^SC(SDCL,0)) D ERR1("Invalid Clinic ID - Cannot determine if Overbook is allowed.") Q
"RTN","SDEC07A",27,0)
 ;check for valid resource ID
"RTN","SDEC07A",28,0)
 I '+SDECRES D ERR1("Invalid Resource ID - Cannot determine if Overbook is allowed.") Q
"RTN","SDEC07A",29,0)
 I '$D(^SDEC(409.831,SDECRES,0)) D ERR1("Invalid Resource ID - Cannot determine if Overbook is allowed.") Q
"RTN","SDEC07A",30,0)
 ;check for valid DATE/TIME
"RTN","SDEC07A",31,0)
 S %DT="T"
"RTN","SDEC07A",32,0)
 S X=NSDT
"RTN","SDEC07A",33,0)
 D ^%DT   ; GET FM FORMAT FOR APPOINTMENT DATE/TIME
"RTN","SDEC07A",34,0)
 S NSDT=Y
"RTN","SDEC07A",35,0)
 I NSDT=-1 D ERR1("Invalid Appointment Date.") Q
"RTN","SDEC07A",36,0)
 S SDTD=$P(NSDT,".")
"RTN","SDEC07A",37,0)
 ; data header
"RTN","SDEC07A",38,0)
 ; OVERBOOK  0=not overbooked; 1=overbooked
"RTN","SDEC07A",39,0)
 S @SDECY@(0)="T00020OVERBOOK"_$C(30)
"RTN","SDEC07A",40,0)
 ;get allowed number of overbookings for clinic
"RTN","SDEC07A",41,0)
 S SDCLSL=$G(^SC(SDCL,"SL"))
"RTN","SDEC07A",42,0)
 S OBMAX=$P(SDCLSL,U,7)
"RTN","SDEC07A",43,0)
 I '+OBMAX S (OBCNT,OBMAX)=0 G XIT
"RTN","SDEC07A",44,0)
 N SDAB,SLOTSIZE
"RTN","SDEC07A",45,0)
 S SDAB="^TMP("_$J_",""SDEC"",""BLKS"")"
"RTN","SDEC07A",46,0)
 S SLOTSIZE="^TMP("_$J_",""SDEC"",""SLOTSIZE"")"
"RTN","SDEC07A",47,0)
 K @SDAB,@SLOTSIZE
"RTN","SDEC07A",48,0)
 ;get original slot sizes
"RTN","SDEC07A",49,0)
 D GETSLOTS^SDEC04(SLOTSIZE,SDECRES,SDTD,SDTD_".2359")
"RTN","SDEC07A",50,0)
 ;get current appt availability
"RTN","SDEC07A",51,0)
 D GETSLOTS^SDEC57(SDAB,SDECRES,SDTD,SDTD_".2359")
"RTN","SDEC07A",52,0)
 N IDX,SDR,SDSTART,SDSTOP,SDSLOTS,XX,IDX2,YY
"RTN","SDEC07A",53,0)
 ;restore original slot sizes into appts slots
"RTN","SDEC07A",54,0)
 S IDX="" F  S IDX=$O(@SLOTSIZE@(IDX)) Q:'IDX  D
"RTN","SDEC07A",55,0)
 .S XX=@SLOTSIZE@(IDX)
"RTN","SDEC07A",56,0)
 .S SDSTART=$P(XX,U,2),SDSTOP=$P(XX,U,3),SDSLOTS=$P(XX,U,4)
"RTN","SDEC07A",57,0)
 .S IDX2="" F  S IDX2=$O(@SDAB@(IDX2)) Q:'IDX2  D
"RTN","SDEC07A",58,0)
 ..S YY=@SDAB@(IDX2)
"RTN","SDEC07A",59,0)
 ..S:($P(YY,U,2)'<SDSTART)&($P(YY,U,3)'>SDSTOP) $P(@SDAB@(IDX2),U,4)=SDSLOTS
"RTN","SDEC07A",60,0)
 ;find overbooks
"RTN","SDEC07A",61,0)
 S IDX="" F  S IDX=$O(@SDAB@(IDX)) Q:IDX=""  D
"RTN","SDEC07A",62,0)
 .S XX=@SDAB@(IDX)
"RTN","SDEC07A",63,0)
 .S SDSTART=$P(XX,U,2),SDSTOP=$P(XX,U,3),SDSLOTS=$P(XX,U,4)
"RTN","SDEC07A",64,0)
 .;loop thru schedule
"RTN","SDEC07A",65,0)
 .; SDBK(<appt time>,<appt end time>)=counter starting at 0
"RTN","SDEC07A",66,0)
 .K SDBK  ;overbook counter array
"RTN","SDEC07A",67,0)
 .S SDRET="" D CRSCHED^SDEC(.SDRET,SDECRES,SDSTART,SDSTOP)
"RTN","SDEC07A",68,0)
 .K SDARR
"RTN","SDEC07A",69,0)
 .S SD30=1,SDCNT=0,SDT=0 F  S SDT=$O(@SDRET@(SDT)) Q:SDT=""  D
"RTN","SDEC07A",70,0)
 ..S SDR=$G(@SDRET@(SDT))
"RTN","SDEC07A",71,0)
 ..I $P(SDR,U,1)[$c(30) S SD30=1 Q
"RTN","SDEC07A",72,0)
 ..Q:SD30'=1
"RTN","SDEC07A",73,0)
 ..S SDCNT=SDCNT+1
"RTN","SDEC07A",74,0)
 ..S SDARR($P(SDR,U,1))=""
"RTN","SDEC07A",75,0)
 ..S SD30=0
"RTN","SDEC07A",76,0)
 .S SDCNT=0 F  S SDCNT=$O(SDARR(SDCNT)) Q:SDCNT=""  D
"RTN","SDEC07A",77,0)
 ..S SDR=$G(^SDEC(409.84,+SDCNT,0))
"RTN","SDEC07A",78,0)
 ..S SDT=$P(SDR,U,1)
"RTN","SDEC07A",79,0)
 ..S SDTE=$P(SDR,U,2)
"RTN","SDEC07A",80,0)
 ..Q:$P(SDR,U,12)]""  ;don't count cancelled appts
"RTN","SDEC07A",81,0)
 ..;if time ranges overlap, add to SDBK array
"RTN","SDEC07A",82,0)
 ..I (SDTE>SDT)&(((SDT'<SDSTART)&(SDT<SDSTOP))!((SDTE>SDSTART)&(SDTE'>SDSTOP))!((SDT'>SDSTART)&(SDTE'<SDSTOP))) D
"RTN","SDEC07A",83,0)
 ...D CKOB(SDT,SDTE,.SDBK)
"RTN","SDEC07A",84,0)
 ..;;D CKOB($P(SDT,".")_".0000",$P(SDTE,".")_".2359",.SDBK)
"RTN","SDEC07A",85,0)
 .S OBCNT=$$CNTOB(.SDBK,SDECRES,SDTD,OBMAX,SDAB)
"RTN","SDEC07A",86,0)
 .S OBCNTSUM=OBCNTSUM+OBCNT
"RTN","SDEC07A",87,0)
 .K @SDRET,SDBK
"RTN","SDEC07A",88,0)
XIT ;
"RTN","SDEC07A",89,0)
 S SDECI=SDECI+1
"RTN","SDEC07A",90,0)
 S @SDECY@(SDECI)=$S(OBCNTSUM<OBMAX:"YES",1:"NO")
"RTN","SDEC07A",91,0)
 S SDECI=SDECI+1
"RTN","SDEC07A",92,0)
 S @SDECY@(SDECI)=$C(30)
"RTN","SDEC07A",93,0)
 S SDECI=SDECI+1
"RTN","SDEC07A",94,0)
 S @SDECY@(SDECI)=$C(31)
"RTN","SDEC07A",95,0)
 Q
"RTN","SDEC07A",96,0)
 ;
"RTN","SDEC07A",97,0)
 ;find appointment in SDEC APPOINTMENT file
"RTN","SDEC07A",98,0)
SDECAP(SDECSDT,DFN) ;
"RTN","SDEC07A",99,0)
 N SDECAPN,SDECRES,ID
"RTN","SDEC07A",100,0)
 S SDECRES=0
"RTN","SDEC07A",101,0)
 S ID=0
"RTN","SDEC07A",102,0)
 F  S ID=$O(^SDEC(409.84,"B",SDECSDT,ID)) Q:ID'>0  Q:SDECRES'=0  D
"RTN","SDEC07A",103,0)
 . S SDECAPN=$G(^SDEC(409.84,ID,0))
"RTN","SDEC07A",104,0)
 . I $P(SDECAPN,U,5)=DFN S SDECRES=$P(SDECAPN,U,7)
"RTN","SDEC07A",105,0)
 Q SDECRES
"RTN","SDEC07A",106,0)
 ;
"RTN","SDEC07A",107,0)
 ;check if appointment start/stop is in range of an existing appointment
"RTN","SDEC07A",108,0)
CKOB(START,STOP,SDBK) ;called internally
"RTN","SDEC07A",109,0)
 ;  START   = appointment start date/time in FM format
"RTN","SDEC07A",110,0)
 ;  STOP    = appointment stop date/time in FM format
"RTN","SDEC07A",111,0)
 ; .SDBK    = bookings Array -  SDBK(<appt time>,<appt end time>)=counter starting at 0
"RTN","SDEC07A",112,0)
 N B,E,OB,OBF
"RTN","SDEC07A",113,0)
 S OBF=0
"RTN","SDEC07A",114,0)
 S B=""
"RTN","SDEC07A",115,0)
 F  S B=$O(SDBK(B)) Q:B'>0  D  Q:+OBF
"RTN","SDEC07A",116,0)
 . S E="" F  S E=$O(SDBK(B,E)) Q:E'>0  D  Q:+OBF
"RTN","SDEC07A",117,0)
 . . S OB=SDBK(B,E)
"RTN","SDEC07A",118,0)
 . . S OBF=1
"RTN","SDEC07A",119,0)
 . . ;S OBF=(($$FMADD^XLFDT(START,B,2)'<0)&($$FMADD^XLFDT(START,E,2)<0))!(($$FMADD^XLFDT(STOP,B,2)>0)&($$FMADD^XLFDT(STOP,E,2)'<0))
"RTN","SDEC07A",120,0)
 . . ;S OBF=(($P(START,".",2)'<$P(B,".",2))&($P(START,".",2)'>$P(E,".",2)))!(($P(STOP,".",2)>$P(B,".",2))&($P(STOP,".",2)'>$P(E,".",2)))
"RTN","SDEC07A",121,0)
 . . I OBF S SDBK(B,E)=(OB+1)
"RTN","SDEC07A",122,0)
 I 'OBF S SDBK(START,STOP)=1
"RTN","SDEC07A",123,0)
 ;
"RTN","SDEC07A",124,0)
 Q
"RTN","SDEC07A",125,0)
 ;
"RTN","SDEC07A",126,0)
 ;count overbookings
"RTN","SDEC07A",127,0)
CNTOB(SDBK,SDECRES,SDTD,OBMAX,SDAB) ;called internally
"RTN","SDEC07A",128,0)
 N AB,ABF,ABN,CNT,BK,SLOTS,B,E
"RTN","SDEC07A",129,0)
 S BK=""
"RTN","SDEC07A",130,0)
 S CNT=0
"RTN","SDEC07A",131,0)
 S B="" F  S B=$O(SDBK(B)) Q:B=""  D  Q:CNT'<OBMAX
"RTN","SDEC07A",132,0)
 . S E="" F  S E=$O(SDBK(B,E)) Q:E=""  D  Q:CNT'<OBMAX
"RTN","SDEC07A",133,0)
 . . S BK=SDBK(B,E)
"RTN","SDEC07A",134,0)
 . . Q:'+BK
"RTN","SDEC07A",135,0)
 . . S SLOTS=$$SLOTS(B,E,SDAB)   ;find access block
"RTN","SDEC07A",136,0)
 . . I '+SLOTS S CNT=CNT+BK
"RTN","SDEC07A",137,0)
 . . E  S BK=BK-SLOTS S:BK<0 BK=0 S CNT=CNT+BK
"RTN","SDEC07A",138,0)
 Q CNT
"RTN","SDEC07A",139,0)
SLOTS(B,E,SDAB) ;find access block
"RTN","SDEC07A",140,0)
 N ABF,ABN,SDI,SLOTS
"RTN","SDEC07A",141,0)
 S SLOTS=""
"RTN","SDEC07A",142,0)
 S SDI=0 F  S SDI=$O(@SDAB@(SDI)) Q:SDI'>0  D  Q:+ABF
"RTN","SDEC07A",143,0)
 .S ABN=@SDAB@(SDI)
"RTN","SDEC07A",144,0)
 .S ABF=((B'<$P(ABN,U,2))&(B<$P(ABN,U,3)))!((E>$P(ABN,U,2))&(E'>$P(ABN,U,3)))
"RTN","SDEC07A",145,0)
 .S:ABF SLOTS=+$P(ABN,U,4)
"RTN","SDEC07A",146,0)
 Q SLOTS
"RTN","SDEC07A",147,0)
 ;
"RTN","SDEC07A",148,0)
REQSET(SDRIEN,SDPROV,SDUSR,SDACT,SDECTYP,SDECNOTE,SAVESTRT,SDECRES) ;add SCHEDULED activity to REQUEST/CONSULTATION file
"RTN","SDEC07A",149,0)
 ;INPUT:
"RTN","SDEC07A",150,0)
 ; SDRIEN  - (required) pointer to RFEQUEST/CONSULTATION file 123
"RTN","SDEC07A",151,0)
 ; SDPROV  - (required) Provider pointer to NEW PERSON
"RTN","SDEC07A",152,0)
 ; SDUSR   - (optional) User that entered appointment pointer to NEW PERSON
"RTN","SDEC07A",153,0)
 ; SDACT   - (required) ACTIVITY type to add  1=SCHEDULED  2=STATUS CHANGE
"RTN","SDEC07A",154,0)
 ; SDECTYP - (required if SDACT=2) appointment Status valid values:
"RTN","SDEC07A",155,0)
 ;                          C=CANCELLED BY CLINIC
"RTN","SDEC07A",156,0)
 ;                         PC=CANCELLED BY PATIENT
"RTN","SDEC07A",157,0)
 ; SDECNOTE - Comments from Appointment
"RTN","SDEC07A",158,0)
 ; SAVESTRT - Appointment time in external format    ;alb/sat 651 corrected comment
"RTN","SDEC07A",159,0)
 ; SDECRES  - Appointment Resource
"RTN","SDEC07A",160,0)
 N SDDT,SDFDA,SDI,SDIEN,SDOA,SDOS,SDPDC,SDSCHED,SDSCHEDF,SDSTAT,SDTXT,SDERR,Y,SDPCM
"RTN","SDEC07A",161,0)
 S SDACT=$G(SDACT)
"RTN","SDEC07A",162,0)
 S SAVESTRT=$G(SAVESTRT)
"RTN","SDEC07A",163,0)
 S SDECRES=$G(SDECRES)
"RTN","SDEC07A",164,0)
 Q:"12"'[SDACT
"RTN","SDEC07A",165,0)
 S SDSCHEDF=0
"RTN","SDEC07A",166,0)
 S SDUSR=$G(SDUSR)
"RTN","SDEC07A",167,0)
 S:SDUSR="" SDUSR=DUZ
"RTN","SDEC07A",168,0)
 S:'$D(^VA(200,+SDUSR,0)) SDUSR=DUZ  ;take this out
"RTN","SDEC07A",169,0)
 S SDSCHED=$$GETIEN^SDEC51("SCHEDULED")
"RTN","SDEC07A",170,0)
 S SDSTAT=$$GETIEN^SDEC51("STATUS CHANGE")
"RTN","SDEC07A",171,0)
 S SDPDC=$O(^ORD(100.01,"B","DISCONTINUED",0))
"RTN","SDEC07A",172,0)
 ;ajf ; Check for completed Consult
"RTN","SDEC07A",173,0)
 S SDPCM=$O(^ORD(100.01,"B","COMPLETE",0))
"RTN","SDEC07A",174,0)
 I SDACT=1,SDSCHED="" Q
"RTN","SDEC07A",175,0)
 I SDACT=2,SDSTAT="" Q
"RTN","SDEC07A",176,0)
 ;ajf ; Check for completed Consult
"RTN","SDEC07A",177,0)
 S SDCPS=$$GET1^DIQ(123,SDRIEN_",",8,"I")
"RTN","SDEC07A",178,0)
 Q:SDCPS=SDPDC!(SDCPS=SDPCM) 
"RTN","SDEC07A",179,0)
 ;Q:$$GET1^DIQ(123,SDRIEN_",",8,"I")=SDPDC   ;never update file 123 if CPRS STATUS is DISCONTINUED
"RTN","SDEC07A",180,0)
 ;Q:$$GET1^DIQ(123,SDRIEN_",",8,"I")=SDPCM   ;never update file 123 if CPRS STATUS is COMPLETE
"RTN","SDEC07A",181,0)
 S SDECNOTE=$G(SDECNOTE)
"RTN","SDEC07A",182,0)
 ;it is possible to have multiple scheduled activities; make sure there is not already a SCHEDULED activity
"RTN","SDEC07A",183,0)
 ;S SDI=0 F  S SDI=$O(^GMR(123,SDRIEN,40,SDI)) Q:SDI'>0  D  Q:+SDSCHEDF
"RTN","SDEC07A",184,0)
 ;.I $P($G(^GMR(123,SDRIEN,40,SDI,0)),U,2)=SDSCHED S SDSCHEDF=1 Q
"RTN","SDEC07A",185,0)
 ;Q:+SDSCHEDF
"RTN","SDEC07A",186,0)
 S SDDT=$$NOW^XLFDT()  ;*zeb 12/13/17 679 don't use $E to remove seconds
"RTN","SDEC07A",187,0)
 S SDFDA(123.02,"+1,"_SDRIEN_",",.01)=SDDT                                   ;ICR 6185
"RTN","SDEC07A",188,0)
 S SDFDA(123.02,"+1,"_SDRIEN_",",1)=$S(SDACT=1:SDSCHED,SDACT=2:SDSTAT,1:"")  ;ICR 6185
"RTN","SDEC07A",189,0)
 S SDFDA(123.02,"+1,"_SDRIEN_",",2)=SDDT                                     ;ICR 6185
"RTN","SDEC07A",190,0)
 S SDFDA(123.02,"+1,"_SDRIEN_",",3)=SDPROV                                   ;ICR 6185
"RTN","SDEC07A",191,0)
 S SDFDA(123.02,"+1,"_SDRIEN_",",4)=SDUSR                                    ;ICR 6185
"RTN","SDEC07A",192,0)
 D UPDATE^DIE("","SDFDA","SDIEN")
"RTN","SDEC07A",193,0)
 S SDTXT=""
"RTN","SDEC07A",194,0)
 ;MGH modified to add in note text and appointment data
"RTN","SDEC07A",195,0)
 I SDACT=1 D
"RTN","SDEC07A",196,0)
 .S SDTXT(1)=$P($G(^SDEC(409.831,+SDECRES,0)),U,1)_" Consult Appt. on "_SAVESTRT
"RTN","SDEC07A",197,0)
 .I SDECNOTE'="" S SDTXT(2)=SDECNOTE
"RTN","SDEC07A",198,0)
 I SDACT=2 D
"RTN","SDEC07A",199,0)
 .S SDECTYP=$G(SDECTYP)
"RTN","SDEC07A",200,0)
 .S SDTXT(1)=$P($G(^SDEC(409.831,+SDECRES,0)),U,1)_" Appt. on "_SAVESTRT_" was cancelled"_$S(SDECTYP["P":" by the Patient.",SDECTYP["C":" by the Clinic.",1:".")   ;alb/sat 651 include appt info
"RTN","SDEC07A",201,0)
 .I SDECNOTE'="" S SDTXT(2)="Remarks: "_SDECNOTE
"RTN","SDEC07A",202,0)
 I $D(SDTXT) D
"RTN","SDEC07A",203,0)
 .D WP^DIE(123.02,SDIEN(1)_","_SDRIEN_",",5,"","SDTXT","SDERR")   ;ICR 6185
"RTN","SDEC07A",204,0)
 K SDFDA   ;alb/sat 651
"RTN","SDEC07A",205,0)
 ;set CPRS status field  ICR 6185
"RTN","SDEC07A",206,0)
 S SDOS=$O(^ORD(100.01,"B","SCHEDULED",0))
"RTN","SDEC07A",207,0)
 S SDOA=$O(^ORD(100.01,"B","ACTIVE",0))
"RTN","SDEC07A",208,0)
 I SDOS'="" D
"RTN","SDEC07A",209,0)
 .;K SDFDA  ;alb/sat 651 moved up
"RTN","SDEC07A",210,0)
 .S SDFDA(123,SDRIEN_",",8)=$S(SDACT=1:SDOS,1:SDOA)
"RTN","SDEC07A",211,0)
 .;D UPDATE^DIE("","SDFDA")                          ;ICR 6185  ;alb/sat 651 moved down out of IF scope
"RTN","SDEC07A",212,0)
 S:+$G(SDSCHED) SDFDA(123,SDRIEN_",",9)=$S(SDACT=1:SDSCHED,1:SDSTAT)      ;alb/sat 651 - set LAST ACTION TAKEN   ICR 4837
"RTN","SDEC07A",213,0)
 D:$D(SDFDA) UPDATE^DIE("","SDFDA")   ;alb/sat 651
"RTN","SDEC07A",214,0)
 Q
"RTN","SDEC07A",215,0)
 ;
"RTN","SDEC07A",216,0)
EWL(WLIEN,APPDT,SDCL,SVCP,SVCPR,NOTE,SDAPPTYP) ;update SD WAIT LIST at appointment add
"RTN","SDEC07A",217,0)
 ;INPUT:
"RTN","SDEC07A",218,0)
 ;  WLIEN = Wait List ID pointer to SD WAIT LIST file 409.3
"RTN","SDEC07A",219,0)
 ;  APPDT = Appointment date/time (Scheduled Date of appt) in fm format
"RTN","SDEC07A",220,0)
 ;  SDCL  = Clinic ID pointer to HOSPITAL LOCATION file 44
"RTN","SDEC07A",221,0)
 ;  SVCP  = Service Connected Percentage numeric 0-100
"RTN","SDEC07A",222,0)
 ;  SVCPR = Service Connected Priority  0:NO  1:YES
"RTN","SDEC07A",223,0)
 ;  NOTE  = Comment only 1st 60 characters are used
"RTN","SDEC07A",224,0)
 ;  SDAPPTYP - (optional) Appointment type ID pointer to APPOINTMENT TYPE file 409.1
"RTN","SDEC07A",225,0)
 ;
"RTN","SDEC07A",226,0)
 ;all input must be verified by calling routine
"RTN","SDEC07A",227,0)
 N SDDIV,SDFDA,SDSN
"RTN","SDEC07A",228,0)
 S:+$G(SDAPPTYP) SDFDA(409.3,WLIEN_",",8.7)=SDAPPTYP
"RTN","SDEC07A",229,0)
 S SDFDA(409.3,WLIEN_",",13)=APPDT                     ;SCHEDULED DATE OF APPT       = APPDT  (SDECSTART)
"RTN","SDEC07A",230,0)
 S SDFDA(409.3,WLIEN_",",13.1)=$P($$NOW^XLFDT,".",1)   ;DATE APPT. MADE              = TODAY
"RTN","SDEC07A",231,0)
 S SDFDA(409.3,WLIEN_",",13.2)=SDCL                    ;APPT CLINIC                  = SDCL   (SDECSCD)
"RTN","SDEC07A",232,0)
 S SDFDA(409.3,WLIEN_",",13.3)=$P($G(^SC(SDCL,0)),U,4) ;APPT INSTITUTION             = Get from 44 using SDCL
"RTN","SDEC07A",233,0)
 S SDFDA(409.3,WLIEN_",",13.4)=$P($G(^SC(SDCL,0)),U,7) ;APPT STOP CODE               = Get from 44 using SDCL
"RTN","SDEC07A",234,0)
 S SDDIV=$P($G(^SC(SDCL,0)),U,15)
"RTN","SDEC07A",235,0)
 S SDSN=$S(SDDIV'="":$P($G(^DG(40.8,SDDIV,0)),U,2),1:"")
"RTN","SDEC07A",236,0)
 S SDFDA(409.3,WLIEN_",",13.6)=SDSN                    ;APPT STATION NUMBER
"RTN","SDEC07A",237,0)
 S SDFDA(409.3,WLIEN_",",13.7)=DUZ                     ;APPT CLERK                   = Current User
"RTN","SDEC07A",238,0)
 S SDFDA(409.3,WLIEN_",",13.8)="R"                     ;APPT STATUS                  = R:Scheduled/Kept
"RTN","SDEC07A",239,0)
 S:SVCP'="" SDFDA(409.3,WLIEN_",",14)=SVCP                      ;SERVICE CONNECTED PERCENTAGE = SVCP   (SDSVCP)
"RTN","SDEC07A",240,0)
 S:SVCPR'="" SDFDA(409.3,WLIEN_",",15)=SVCPR                     ;SERVICE CONNECTED PRIORITY   = SVCPR  (SDSVCPR)
"RTN","SDEC07A",241,0)
 S:$G(NOTE)'="" SDFDA(409.3,WLIEN_",",25)=NOTE
"RTN","SDEC07A",242,0)
 S SDFDA(409.3,WLIEN_",",27)="U"                       ;EWL ENROLLEE STATUS          = U:UNDETERMINED
"RTN","SDEC07A",243,0)
 S SDFDA(409.3,WLIEN_",",27.2)=0                       ;EWL ENROLLEE DATABASE FILE   = 0:NONE
"RTN","SDEC07A",244,0)
 S SDFDA(409.3,WLIEN_",",28)=DUZ                       ;EDITING USER                 = Current User
"RTN","SDEC07A",245,0)
 D UPDATE^DIE("","SDFDA")
"RTN","SDEC07A",246,0)
 Q
"RTN","SDEC07A",247,0)
 ;
"RTN","SDEC07A",248,0)
ERROR ;
"RTN","SDEC07A",249,0)
 D ERR1("Error")
"RTN","SDEC07A",250,0)
 Q
"RTN","SDEC07A",251,0)
 ;
"RTN","SDEC07A",252,0)
ERR1(SDECERR) ;Error processing
"RTN","SDEC07A",253,0)
 S SDECI=SDECI+1
"RTN","SDEC07A",254,0)
 S ^TMP("SDEC",$J,SDECI)=SDECERR_$C(30)
"RTN","SDEC07A",255,0)
 S SDECI=SDECI+1
"RTN","SDEC07A",256,0)
 S ^TMP("SDEC",$J,SDECI)=$C(31)
"RTN","SDEC07A",257,0)
 Q
"RTN","SDEC09")
0^6^B94558695
"RTN","SDEC09",1,0)
SDEC09 ;ALB/SAT - VISTA SCHEDULING RPCS ;MAR 15, 2017
"RTN","SDEC09",2,0)
 ;;5.3;Scheduling;**627,642,658,679**;Aug 13, 1993;Build 15
"RTN","SDEC09",3,0)
 ;
"RTN","SDEC09",4,0)
 ;ajf ; adding PCP and MHP to return data
"RTN","SDEC09",5,0)
 Q
"RTN","SDEC09",6,0)
 ;
"RTN","SDEC09",7,0)
 ;
"RTN","SDEC09",8,0)
GETREGA(SDECRET,DFN) ;return basic reg info/demographics for given patient
"RTN","SDEC09",9,0)
 ;GETREGA(SDECRET,DFN)  external parameter tag is in SDEC
"RTN","SDEC09",10,0)
 ;DFN - Patient ID - Pointer to PATIENT file
"RTN","SDEC09",11,0)
 ;Returns IEN^STREET^CITY^STATE^ZIP^NAME^DOB^SSN^HRN
"RTN","SDEC09",12,0)
 ;   10 HOMEPHONE - Residence or Phone #1
"RTN","SDEC09",13,0)
 ;   11 OFCPHONE - Office/Work Phone
"RTN","SDEC09",14,0)
 ;   12 MSGPHONE - Also referred to as Phone #2 and Temporary Phone number
"RTN","SDEC09",15,0)
 ;   13 NOK NAME^RELATIONSHIP^PHONE^STREET^CITY^STATE^NOK_ZIP
"RTN","SDEC09",16,0)
 ;   20 DATAREVIEWED^
"RTN","SDEC09",17,0)
 ;   21 Medicare#^Suffix
"RTN","SDEC09",18,0)
 ;   23 RegistrationComments
"RTN","SDEC09",19,0)
 ;   24 GAF - <text> | <GAF score> | <GAF date> | <diagnosis by IEN> | <diagnosis by name>
"RTN","SDEC09",20,0)
 ;   25 PRACE  - Patient Race pointer to RACE file 10 | separates entries
"RTN","SDEC09",21,0)
 ;   26 PRACEN - Patient Race name from RACE file | separates entries
"RTN","SDEC09",22,0)
 ;   27 PETH   - Patient Ethnicity list separated by pipe |
"RTN","SDEC09",23,0)
 ;               Pointer to ETHNICITY file 10.2
"RTN","SDEC09",24,0)
 ;   28 PETHN  - Patient Ethnicity names separated by pipe |
"RTN","SDEC09",25,0)
 ;   29 PCOUNTRY - Country pointer to COUNTRY CODE file
"RTN","SDEC09",26,0)
 ;   30 GENDER  - Patient Gender - valid values are MALE  FEMALE
"RTN","SDEC09",27,0)
 ;   31 SENSITIVE - Sensitive Record Access data separated by pipe |:
"RTN","SDEC09",28,0)
 ;            1. return code:
"RTN","SDEC09",29,0)
 ;               -1-RPC/API failed
"RTN","SDEC09",30,0)
 ;                  Required variable not defined
"RTN","SDEC09",31,0)
 ;                0-No display/action required
"RTN","SDEC09",32,0)
 ;                  Not accessing own, employee, or sensitive record
"RTN","SDEC09",33,0)
 ;                1-Display warning message
"RTN","SDEC09",34,0)
 ;                  Sensitive and DG SENSITIVITY key holder
"RTN","SDEC09",35,0)
 ;                  or Employee and DG SECURITY OFFICER key holder
"RTN","SDEC09",36,0)
 ;                2-Display warning message/require OK to continue
"RTN","SDEC09",37,0)
 ;                  Sensitive and not a DG SENSITIVITY key holder
"RTN","SDEC09",38,0)
 ;                  Employee and not a DG SECURITY OFFICER key holder
"RTN","SDEC09",39,0)
 ;                3-Access to record denied
"RTN","SDEC09",40,0)
 ;                  Accessing own record
"RTN","SDEC09",41,0)
 ;                4-Access to Patient (#2) file records denied
"RTN","SDEC09",42,0)
 ;                  SSN not defined
"RTN","SDEC09",43,0)
 ;            2. display text/message
"RTN","SDEC09",44,0)
 ;            3. display text/message
"RTN","SDEC09",45,0)
 ;            4. display text/message
"RTN","SDEC09",46,0)
 ;   32 SVCCONN  - Patient's Service Connected status
"RTN","SDEC09",47,0)
 ;                 YES   NO
"RTN","SDEC09",48,0)
 ;   33 SVCCONNP - Patient's Service Connected Percentage
"RTN","SDEC09",49,0)
 ;                 Numeric 0-100
"RTN","SDEC09",50,0)
 ;   34 BADADD   - BAD ADDRESS INDICATOR
"RTN","SDEC09",51,0)
 ;                     1=UNDELIVERABLE
"RTN","SDEC09",52,0)
 ;                     2=HOMELESS
"RTN","SDEC09",53,0)
 ;                     3=OTHER
"RTN","SDEC09",54,0)
 ;                     4=ADDRESS NOT FOUND
"RTN","SDEC09",55,0)
 ;   35. PADDRES2 - Patient Street Address line 2
"RTN","SDEC09",56,0)
 ;   36. PADDRES3 - Patient Street Address line 3
"RTN","SDEC09",57,0)
 ;   37. PCOUNTY   - Patient's County
"RTN","SDEC09",58,0)
 ;   38. PCELL     - Patient's Cell Phone
"RTN","SDEC09",59,0)
 ;   39. PEMAIL    - Patient's Email address
"RTN","SDEC09",60,0)
 ;   40. PMARITAL  - Patient Marital Status
"RTN","SDEC09",61,0)
 ;   41. PRELIGION - Patient Religious Preference
"RTN","SDEC09",62,0)
 ;   42. PTADDRESS1 - Patient Temporary Address Line 1 (.1211)
"RTN","SDEC09",63,0)
 ;   43. PTADDRESS2 - Patient Temporary Address Line 2 (.1212)
"RTN","SDEC09",64,0)
 ;   44. PTADDRESS3 - Patient Temporary Address Line 3 (.1213)
"RTN","SDEC09",65,0)
 ;   45. PTCITY     - Patient Temporary City (.1214)
"RTN","SDEC09",66,0)
 ;   46. PTSTATE    - Patient Temporary State (.1215)
"RTN","SDEC09",67,0)
 ;   47. PTZIP      - Patient Temporary Zip (.1216)
"RTN","SDEC09",68,0)
 ;   48. PTZIP+4    - Patient Temporary Zip+4 (.12112)
"RTN","SDEC09",69,0)
 ;   49. PTCOUNTRY  - Patient Temporary Country (.1223)
"RTN","SDEC09",70,0)
 ;   50. PTCOUNTY   - Patient Temporary County (.12111)
"RTN","SDEC09",71,0)
 ;   51. PTSTART    - Patient Temporary Address Start Date (.1217)
"RTN","SDEC09",72,0)
 ;   52. PTEND      - Patient Temporary Address End Date (.1218)
"RTN","SDEC09",73,0)
 ;   53. KSTREET2   - Primary Next of Kin Street Address [Line 2] (.214)
"RTN","SDEC09",74,0)
 ;   54. KSTREET3   - Primary Next of Kin Street Address [Line 3] (.215)
"RTN","SDEC09",75,0)
 ;   55. NOK2       - Secondary Next of Kin  (.2191)
"RTN","SDEC09",76,0)
 ;   56. K2NAME     - Secondary Next of Kin name  (.2191)
"RTN","SDEC09",77,0)
 ;   57. K2REL      - Secondary Next of Kin Relationship to Patient (.2192)
"RTN","SDEC09",78,0)
 ;   58. K2PHONE    - Secondary Next of Kin Phone (.2199)
"RTN","SDEC09",79,0)
 ;   59. K2STREET   - Secondary Next of Kin Street Address [Line 1] (.2193)
"RTN","SDEC09",80,0)
 ;   60. K2STREET2  - Secondary Next of Kin Street Address [Line 2] (.2194)
"RTN","SDEC09",81,0)
 ;   61. K2STREET3  - Secondary Next of Kin Street Address [Line 3] (.2195)
"RTN","SDEC09",82,0)
 ;   62. K2CITY     - Secondary Next of Kin City (.2196)
"RTN","SDEC09",83,0)
 ;   63. K2STATE    - Secondary Next of Kin State (.2197)
"RTN","SDEC09",84,0)
 ;   64. K2ZIP      - Secondary Next of Kin Zip (.2198)
"RTN","SDEC09",85,0)
 ;   65. PF_FFF     - Patient FUGITIVE FELON FLAG 1=YES
"RTN","SDEC09",86,0)
 ;   66. PF_VCD     - Patient VETERAN CATASTROPHICALLY DISABLED? Y=YES N=NO
"RTN","SDEC09",87,0)
 ;   67. PFNATIONAL - Patient national Flags (PRF ASSIGNMENT/PRF NATIONAL FLAG) separated by ^
"RTN","SDEC09",88,0)
 ;                  Each ^ piece contains the following | pipe pieces:
"RTN","SDEC09",89,0)
 ;                   1. PRFAID   - PRF Assignment ID pointer to PRF ASSIGNMENT file (#26.13)
"RTN","SDEC09",90,0)
 ;                   2. PRFSTAT  - PRF Assignment Status 0=INACTIVE 1=ACTIVE
"RTN","SDEC09",91,0)
 ;                   3. PRFNID   - PRF National Flag ID pointer to PRF NATIONAL FLAG file (#26.15)
"RTN","SDEC09",92,0)
 ;                   4. PRFNNAME - PRF National Flag name
"RTN","SDEC09",93,0)
 ;                   5. PRFNSTAT - PRF National Flag status  0=INACTIVE 1=ACTIVE
"RTN","SDEC09",94,0)
 ;   68. PFLOCAL  - Patient Local Flags (PRF ASSIGNMENT/PRF Local FLAG) separated by ^
"RTN","SDEC09",95,0)
 ;                   Each ^ piece contains the following | pipe pieces:
"RTN","SDEC09",96,0)
 ;                    1. PRFAID   - PRF Assignment ID pointer to PRF ASSIGNMENT file (#26.13)
"RTN","SDEC09",97,0)
 ;                    2. PRFSTAT  - PRF Assignment Status 0=INACTIVE 1=ACTIVE
"RTN","SDEC09",98,0)
 ;                    3. PRFLID   - PRF Local Flag ID pointer to PRF LOCAL FLAG file (#26.11)
"RTN","SDEC09",99,0)
 ;                    4. PRFLNAME - PRF Local Flag name
"RTN","SDEC09",100,0)
 ;                    5. PRFLSTAT - PRF Local Flag status  0=INACTIVE 1=ACTIVE
"RTN","SDEC09",101,0)
 ;   72. PRIGRP   - Patient Enrollment Priority Group
"RTN","SDEC09",102,0)
 ;
"RTN","SDEC09",103,0)
 ;For patient with ien DFN
"RTN","SDEC09",104,0)
 ;K ^TMP("SDEC",$J)
"RTN","SDEC09",105,0)
 N SDDEMO,SDECI,SDECNOD,SDECNAM,SDECTMP,SDSENS,Y
"RTN","SDEC09",106,0)
 N PRACE,PRACEN,PETH,PETHN,PCOUNTRY,SVCCONN,SVCCONNP,SDPCP,SDMHP
"RTN","SDEC09",107,0)
 S SDECRET="^TMP(""SDEC"","_$J_")"
"RTN","SDEC09",108,0)
 K @SDECRET
"RTN","SDEC09",109,0)
 S SDECI=0
"RTN","SDEC09",110,0)
 ;
"RTN","SDEC09",111,0)
 S SDECTMP="T00030IEN^T00030STREET^T00030CITY/STATE^T00030WARD:^T00030ZIP^T00030NAME^D00030DOB^T00030SSN^T00030HRN"  ;9
"RTN","SDEC09",112,0)
 S SDECTMP=SDECTMP_"^T00030HOMEPHONE^T00030OFCPHONE^T00030MSGPHONE"   ;12
"RTN","SDEC09",113,0)
 S SDECTMP=SDECTMP_"^T00030NOK NAME^T00030RELATIONSHIP^T00030PHONE^T00030STREET^T00030CITY^T00030STATE^T00030NOK_ZIP"   ;19
"RTN","SDEC09",114,0)
 S SDECTMP=SDECTMP_"^D00030DATAREVIEWED"   ;20
"RTN","SDEC09",115,0)
 S SDECTMP=SDECTMP_"^T00030Medicare#^T00030Suffix"   ;22
"RTN","SDEC09",116,0)
 S SDECTMP=SDECTMP_"^T00030RegistrationComments^T00100GAF"   ;24
"RTN","SDEC09",117,0)
 S SDECTMP=SDECTMP_"^T00030PRACE^T00030PRACEN^T00030PETH^T00030PETHN^T00030PCOUNTRY^T00030GENDER^T00100SENSITIVE"   ;31
"RTN","SDEC09",118,0)
 S SDECTMP=SDECTMP_"^T00030SVCCONN^T00030SVCCONNP^T00030BADADD"   ;34
"RTN","SDEC09",119,0)
 ;alb/sat 658 added return data
"RTN","SDEC09",120,0)
 ;                         35             36              37            38          39           40
"RTN","SDEC09",121,0)
 S SDECTMP=SDECTMP_"^T00030PADDRES2^T00030PADDRES3^T00030PCOUNTY^T00030PCELL^T00030PEMAIL^T00030PMARITAL"
"RTN","SDEC09",122,0)
 ;                         41              42               43               44               45           46
"RTN","SDEC09",123,0)
 S SDECTMP=SDECTMP_"^T00030PRELIGION^T00030PTADDRESS1^T00030PTADDRESS2^T00030PTADDRESS3^T00030PTCITY^T00030PTSTATE"
"RTN","SDEC09",124,0)
 S SDECTMP=SDECTMP_"^T00030PTZIP^T00030PTZIP+4^T00030PTCOUNTRY^T00030PTCOUNTY^T00030PTSTART^T00030PTEND"   ;52
"RTN","SDEC09",125,0)
 ;                         53           54           55               56         57          58
"RTN","SDEC09",126,0)
 S SDECTMP=SDECTMP_"^T00030KSTREET2^T00030KSTREET3^T00030NOK2^T00030K2NAME^T00030K2REL^T00030K2PHONE"
"RTN","SDEC09",127,0)
 S SDECTMP=SDECTMP_"^T00030K2STREET^T00030K2STREET2^T00030K2STREET3^T00030K2CITY^T00030K2STATE^T00030K2ZIP"   ;64
"RTN","SDEC09",128,0)
 S SDECTMP=SDECTMP_"^T00500PF_FFF^T00500PF_VCD^T00500PFNATIONAL^T00500PFLOCAL^T00030SUBGRP^T00030CAT8G^T01000SIMILAR"   ;71
"RTN","SDEC09",129,0)
 ;ajf ; adding PCP and MHP
"RTN","SDEC09",130,0)
 S SDECTMP=SDECTMP_"^T00030PRIGRP^T00030PCP^T00030MHP"
"RTN","SDEC09",131,0)
 ;alb/sat 658 end additions
"RTN","SDEC09",132,0)
 S ^TMP("SDEC",$J,0)=SDECTMP_$C(30)
"RTN","SDEC09",133,0)
 ;
"RTN","SDEC09",134,0)
 S SDECY="ERROR"
"RTN","SDEC09",135,0)
 I '+DFN S ^TMP("SDEC",$J,1)=$C(31) Q
"RTN","SDEC09",136,0)
 I '$D(^DPT(+DFN,0)) S ^TMP("SDEC",$J,1)=$C(31) Q
"RTN","SDEC09",137,0)
 S SDECY=""
"RTN","SDEC09",138,0)
 S $P(SDECY,U)=DFN
"RTN","SDEC09",139,0)
 S $P(SDECY,U,23)=""
"RTN","SDEC09",140,0)
 S SDECNOD=^DPT(+DFN,0)
"RTN","SDEC09",141,0)
 S $P(SDECY,"^",6)=$P(SDECNOD,U) ;NAME
"RTN","SDEC09",142,0)
 S $P(SDECY,"^",8)=$P(SDECNOD,U,9) ;SSN
"RTN","SDEC09",143,0)
 S Y=$P(SDECNOD,U,3) I Y]""  X ^DD("DD") S Y=$TR(Y,"@"," ")
"RTN","SDEC09",144,0)
 S $P(SDECY,"^",7)=Y ;DOB
"RTN","SDEC09",145,0)
 S $P(SDECY,"^",9)=""
"RTN","SDEC09",146,0)
 I $D(DUZ(2)) I DUZ(2)>0 S $P(SDECY,"^",9)=$P($G(^AUPNPAT(DFN,41,DUZ(2),0)),U,2) ;HRN
"RTN","SDEC09",147,0)
 S $P(SDECY,"^",4)=$G(^DPT(+DFN,.1)) ;WARD
"RTN","SDEC09",148,0)
 D MAIL
"RTN","SDEC09",149,0)
 D PHONE
"RTN","SDEC09",150,0)
 D NOK
"RTN","SDEC09",151,0)
 D GAF
"RTN","SDEC09",152,0)
 D RACELST^SDECU2(DFN,.PRACE,.PRACEN)
"RTN","SDEC09",153,0)
 ;S ($P(SDECY,"^",25),PRACE)=$P(SDECNOD,U,6)   ;get race
"RTN","SDEC09",154,0)
 S $P(SDECY,U,25)=PRACE
"RTN","SDEC09",155,0)
 S $P(SDECY,U,26)=PRACEN
"RTN","SDEC09",156,0)
 ;S $P(SDECY,"^",26)=$S(+PRACE:$P($G(^DIC(10,PRACE,0)),U,1),1:"")
"RTN","SDEC09",157,0)
 D ETH^SDECU2(DFN,.PETH,.PETHN)   ;get ethnicity
"RTN","SDEC09",158,0)
 S:PETH'="" $P(SDECY,"^",27)=PETH
"RTN","SDEC09",159,0)
 S:PETHN'="" $P(SDECY,"^",28)=PETHN
"RTN","SDEC09",160,0)
 S $P(SDECY,"^",30)=$S($P(SDECNOD,U,2)="M":"MALE",$P(SDECNOD,U,2)="F":"FEMALE",1:"")
"RTN","SDEC09",161,0)
 S SDSENS=$$PTSEC^SDECUTL(DFN) S $P(SDECY,"^",31)=SDSENS
"RTN","SDEC09",162,0)
 D PDEMO^SDECU3(.SDDEMO,DFN)   ;alb/sat 658 PDEMO moved to SDECU3
"RTN","SDEC09",163,0)
 S $P(SDECY,"^",29)=SDDEMO("PCOUNTRY")
"RTN","SDEC09",164,0)
 S $P(SDECY,"^",32)=SDDEMO("SVCCONN")
"RTN","SDEC09",165,0)
 S $P(SDECY,"^",33)=SDDEMO("SVCCONNP")
"RTN","SDEC09",166,0)
 S $P(SDECY,"^",34)=SDDEMO("BADADD")
"RTN","SDEC09",167,0)
 ;D DATAREV
"RTN","SDEC09",168,0)
 ;D MEDICARE
"RTN","SDEC09",169,0)
 ;D REGCMT
"RTN","SDEC09",170,0)
 ;alb/sat 658 added return data
"RTN","SDEC09",171,0)
 S $P(SDECY,"^",35)=SDDEMO("PADDRES2")
"RTN","SDEC09",172,0)
 S $P(SDECY,"^",36)=SDDEMO("PADDRES3")
"RTN","SDEC09",173,0)
 S $P(SDECY,"^",37)=SDDEMO("PCOUNTY")
"RTN","SDEC09",174,0)
 S $P(SDECY,"^",38)=SDDEMO("PCELL")
"RTN","SDEC09",175,0)
 S $P(SDECY,"^",39)=SDDEMO("PEMAIL")
"RTN","SDEC09",176,0)
 S $P(SDECY,"^",40)=SDDEMO("PMARITAL")
"RTN","SDEC09",177,0)
 S $P(SDECY,"^",41)=SDDEMO("PRELIGION")
"RTN","SDEC09",178,0)
 S $P(SDECY,"^",42)=SDDEMO("PTADDRESS1")
"RTN","SDEC09",179,0)
 S $P(SDECY,"^",43)=SDDEMO("PTADDRESS2")
"RTN","SDEC09",180,0)
 S $P(SDECY,"^",44)=SDDEMO("PTADDRESS3")
"RTN","SDEC09",181,0)
 S $P(SDECY,"^",45)=SDDEMO("PTCITY")
"RTN","SDEC09",182,0)
 S $P(SDECY,"^",46)=SDDEMO("PTSTATE")
"RTN","SDEC09",183,0)
 S $P(SDECY,"^",47)=SDDEMO("PTZIP")
"RTN","SDEC09",184,0)
 S $P(SDECY,"^",48)=SDDEMO("PTZIP+4")
"RTN","SDEC09",185,0)
 S $P(SDECY,"^",49)=SDDEMO("PTCOUNTRY")
"RTN","SDEC09",186,0)
 S $P(SDECY,"^",50)=SDDEMO("PTCOUNTY")
"RTN","SDEC09",187,0)
 S $P(SDECY,"^",51)=SDDEMO("PTSTART")
"RTN","SDEC09",188,0)
 S $P(SDECY,"^",52)=SDDEMO("PTEND")
"RTN","SDEC09",189,0)
 S $P(SDECY,"^",53)=SDDEMO("KSTREET2")
"RTN","SDEC09",190,0)
 S $P(SDECY,"^",54)=SDDEMO("KSTREET3")
"RTN","SDEC09",191,0)
 S $P(SDECY,"^",55)=SDDEMO("NOK2")
"RTN","SDEC09",192,0)
 S $P(SDECY,"^",56)=SDDEMO("K2NAME")
"RTN","SDEC09",193,0)
 S $P(SDECY,"^",57)=SDDEMO("K2REL")
"RTN","SDEC09",194,0)
 S $P(SDECY,"^",58)=SDDEMO("K2PHONE")
"RTN","SDEC09",195,0)
 S $P(SDECY,"^",59)=SDDEMO("K2STREET")
"RTN","SDEC09",196,0)
 S $P(SDECY,"^",60)=SDDEMO("K2STREET2")
"RTN","SDEC09",197,0)
 S $P(SDECY,"^",61)=SDDEMO("K2STREET3")
"RTN","SDEC09",198,0)
 S $P(SDECY,"^",62)=SDDEMO("K2CITY")
"RTN","SDEC09",199,0)
 S $P(SDECY,"^",63)=SDDEMO("K2STATE")
"RTN","SDEC09",200,0)
 S $P(SDECY,"^",64)=SDDEMO("K2ZIP")
"RTN","SDEC09",201,0)
 S $P(SDECY,"^",65)=SDDEMO("PF_FFF")
"RTN","SDEC09",202,0)
 S $P(SDECY,"^",66)=SDDEMO("PF_VCD")
"RTN","SDEC09",203,0)
 S $P(SDECY,"^",67)=SDDEMO("PFNATIONAL")
"RTN","SDEC09",204,0)
 S $P(SDECY,"^",68)=SDDEMO("PFLOCAL")
"RTN","SDEC09",205,0)
 S $P(SDECY,"^",69)=SDDEMO("SUBGRP")
"RTN","SDEC09",206,0)
 S $P(SDECY,"^",70)=(SDDEMO("PRIGRP")="GROUP 8")&(SDDEMO("SUBGRP")="g")
"RTN","SDEC09",207,0)
 S $P(SDECY,"^",71)=SDDEMO("SIMILAR")
"RTN","SDEC09",208,0)
 S $P(SDECY,"^",72)=SDDEMO("PRIGRP")
"RTN","SDEC09",209,0)
 ;ajf
"RTN","SDEC09",210,0)
 S SDPCP=$$OUTPTPR^SDUTL3(DFN) ;Return Primary Care Provider
"RTN","SDEC09",211,0)
 S $P(SDECY,"^",73)=$P(SDPCP,"^",2)
"RTN","SDEC09",212,0)
 S SDMHP=$$START^SCMCMHTC(DFN) ;Return Mental Health Provider
"RTN","SDEC09",213,0)
 S $P(SDECY,"^",74)=$P(SDMHP,"^",2)
"RTN","SDEC09",214,0)
 ;
"RTN","SDEC09",215,0)
 ; alb/sat 658 end additions
"RTN","SDEC09",216,0)
 S SDECI=SDECI+1 S ^TMP("SDEC",$J,SDECI)=SDECY_$C(30,31)
"RTN","SDEC09",217,0)
 Q
"RTN","SDEC09",218,0)
 ;
"RTN","SDEC09",219,0)
GAF ;24 determine if GAF score needed
"RTN","SDEC09",220,0)
 N GAF,GAFR
"RTN","SDEC09",221,0)
 S GAFR=""
"RTN","SDEC09",222,0)
 S GAF=$$NEWGAF^SDUTL2(DFN)
"RTN","SDEC09",223,0)
 S:GAF="" GAF=-1
"RTN","SDEC09",224,0)
 S $P(GAFR,"|",1)=$S(+GAF:"New GAF Required",1:"No new GAF required")
"RTN","SDEC09",225,0)
 ;S $P(GAFR,"|",2)=$P(GAF,U,2)   ;alb/sat 658 removed 4 lines
"RTN","SDEC09",226,0)
 ;S $P(GAFR,"|",3)=$$FMTE^XLFDT($P(GAF,U,3))
"RTN","SDEC09",227,0)
 ;S $P(GAFR,"|",4)=$P(GAF,U,4)
"RTN","SDEC09",228,0)
 ;S $P(GAFR,"|",5)=$P($G(^VA(200,+$P(GAF,U,4),0)),U,1)
"RTN","SDEC09",229,0)
 S $P(SDECY,"^",24)=GAFR
"RTN","SDEC09",230,0)
 Q
"RTN","SDEC09",231,0)
 ;
"RTN","SDEC09",232,0)
MAIL N SDECST
"RTN","SDEC09",233,0)
 NEW SDECNOD
"RTN","SDEC09",234,0)
 Q:'$D(^DPT(+DFN,.11))
"RTN","SDEC09",235,0)
 S SDECNOD=^DPT(+DFN,.11)
"RTN","SDEC09",236,0)
 Q:SDECNOD=""
"RTN","SDEC09",237,0)
 S $P(SDECY,"^",2)=$E($P(SDECNOD,U),1,50) ;STREET
"RTN","SDEC09",238,0)
 S $P(SDECY,"^",3)=$P(SDECNOD,U,4) ;CITY
"RTN","SDEC09",239,0)
 S SDECST=$P(SDECNOD,U,5)
"RTN","SDEC09",240,0)
 I +SDECST,$D(^DIC(5,+SDECST,0)) S SDECST=$P(^DIC(5,+SDECST,0),U,2)
"RTN","SDEC09",241,0)
 ;S $P(SDECY,"^",4)=SDECST ;STATE
"RTN","SDEC09",242,0)
 S:$L(SDECST) $P(SDECY,"^",3)=$P(SDECY,"^",3)_","_SDECST ;add ,STATE
"RTN","SDEC09",243,0)
 S $P(SDECY,"^",5)=$S($P(SDECNOD,U,12)'="":$P(SDECNOD,U,12),1:$P(SDECNOD,U,6)) ;ZIP   ;alb/sat 658 return zip+4 if available
"RTN","SDEC09",244,0)
 ;S $P(SDECY,"^",29)=$$GET1^DIQ(2,DFN_",",.1173)
"RTN","SDEC09",245,0)
 Q
"RTN","SDEC09",246,0)
 ;
"RTN","SDEC09",247,0)
PHONE ;PHONE 10,11,12 HOME,OFC,MSG
"RTN","SDEC09",248,0)
 N SDECNOD
"RTN","SDEC09",249,0)
 I $D(^DPT(+DFN,.13)) D
"RTN","SDEC09",250,0)
 . S SDECNOD=^DPT(+DFN,.13)
"RTN","SDEC09",251,0)
 . S $P(SDECY,U,10)=$P(SDECNOD,U,1)
"RTN","SDEC09",252,0)
 . S $P(SDECY,U,11)=$P(SDECNOD,U,2)
"RTN","SDEC09",253,0)
 I $D(^DPT(+DFN,.121)) D
"RTN","SDEC09",254,0)
 . S SDECNOD=^DPT(+DFN,.121)
"RTN","SDEC09",255,0)
 . S $P(SDECY,U,12)=$P(SDECNOD,U,10)
"RTN","SDEC09",256,0)
 Q
"RTN","SDEC09",257,0)
 ;
"RTN","SDEC09",258,0)
NOK ;NOK
"RTN","SDEC09",259,0)
 ;   13 NOK NAME^RELATIONSHIP^PHONE^STREET^CITY^STATE^ZIP
"RTN","SDEC09",260,0)
 N Y,SDECST,SDECNOD
"RTN","SDEC09",261,0)
 I $D(^DPT(+DFN,.21)) D
"RTN","SDEC09",262,0)
 . S SDECNOD=^DPT(+DFN,.21)
"RTN","SDEC09",263,0)
 . S $P(SDECY,U,13)=$P(SDECNOD,U,1)
"RTN","SDEC09",264,0)
 . S $P(SDECY,U,14)=""  ;$$VAL^SDECDIQ1(9000001,DFN,2802)
"RTN","SDEC09",265,0)
 . S $P(SDECY,U,15)=$P(SDECNOD,U,9)
"RTN","SDEC09",266,0)
 . S $P(SDECY,U,16)=$P(SDECNOD,U,3)
"RTN","SDEC09",267,0)
 . S $P(SDECY,U,17)=$P(SDECNOD,U,6)
"RTN","SDEC09",268,0)
 . S SDECST=$P(SDECNOD,U,7)
"RTN","SDEC09",269,0)
 . I +SDECST D
"RTN","SDEC09",270,0)
 . . I $D(^DIC(5,+SDECST,0)) S SDECST=$P(^DIC(5,+SDECST,0),U,2),$P(SDECY,U,18)=SDECST
"RTN","SDEC09",271,0)
 . S $P(SDECY,U,19)=$P(SDECNOD,U,8)
"RTN","SDEC09",272,0)
 Q
"RTN","SDEC09",273,0)
 ;
"RTN","SDEC09",274,0)
DATAREV Q  S $P(SDECY,U,20)=""  ;$P($$VAL^SDECDIQ1(9000001,DFN,16651),"@")
"RTN","SDEC09",275,0)
 Q
"RTN","SDEC09",276,0)
 ;
"RTN","SDEC09",277,0)
REGCMT N SDECI,SDECM,SDECR
"RTN","SDEC09",278,0)
 Q
"RTN","SDEC09",279,0)
 S SDECR=""
"RTN","SDEC09",280,0)
 D ENP^SDECDIQ1(9000001,DFN,1301,"SDECM(")
"RTN","SDEC09",281,0)
 S SDECI=0 F  S SDECI=$O(SDECM(1301,SDECI)) Q:'+SDECI  D
"RTN","SDEC09",282,0)
 . S SDECR=SDECR_" "_SDECM(1301,SDECI)
"RTN","SDEC09",283,0)
 S $P(SDECY,U,23)=$TR($E(SDECR,1,1024),U," ") ; MJL 1/17/2007
"RTN","SDEC09",284,0)
 Q
"RTN","SDEC09",285,0)
 ;
"RTN","SDEC09",286,0)
MEDICARE ;
"RTN","SDEC09",287,0)
 S $P(SDECY,U,21)="" ;$$VAL^SDECDIQ1(9000003,DFN,.03)
"RTN","SDEC09",288,0)
 S $P(SDECY,U,22)="" ;$$VAL^SDECDIQ1(9000003,DFN,.04)
"RTN","SDEC09",289,0)
 Q
"RTN","SDEC09",290,0)
 ;
"RTN","SDEC09",291,0)
GETMCARE(SDECY,DFN) ;
"RTN","SDEC09",292,0)
 ;Returns IEN^MEDICARE#^SUFFIX^SUBENTRY#^TYPE^ELIG.BEGIN^ELIG.END |
"RTN","SDEC09",293,0)
 ;File is dinum
"RTN","SDEC09",294,0)
 ;
"RTN","SDEC09",295,0)
 Q
"RTN","SDEC09",296,0)
 N ASDGX,C,N,SDECNUM,SDECSUF,SDECBLD
"RTN","SDEC09",297,0)
 S SDECNUM=$$VAL^SDECDIQ1(9000003,DFN,.03)
"RTN","SDEC09",298,0)
 S SDECSUF=$$VAL^SDECDIQ1(9000003,DFN,.04)
"RTN","SDEC09",299,0)
 D ENPM^SDECDIQ1(9000003.11,DFN_",0",".01:.03","ASDGX(")
"RTN","SDEC09",300,0)
 S C=1,N=0,SDECBLD=""
"RTN","SDEC09",301,0)
 F  S N=$O(ASDGX(N)) Q:'N  D
"RTN","SDEC09",302,0)
 . S $P(SDECY,"|",C)=DFN_U_SDECNUM_U_SDECSUF_U_N_U_ASDGX(N,.03)_U_ASDGX(N,.01)_U_ASDGX(N,.02)
"RTN","SDEC09",303,0)
 . S C=C+1
"RTN","SDEC09",304,0)
 . Q
"RTN","SDEC09",305,0)
 Q
"RTN","SDEC09",306,0)
 ;
"RTN","SDEC09",307,0)
GETPVTIN(SDECY,DFN) ;
"RTN","SDEC09",308,0)
 ;Returns IEN^SUBENTRY^INSURER^POLICYNUMBER^ELIG.BEGIN^ELIG.END|...
"RTN","SDEC09",309,0)
 ;File is dinum
"RTN","SDEC09",310,0)
 ;
"RTN","SDEC09",311,0)
 Q
"RTN","SDEC09",312,0)
 N ASDGX,C,N
"RTN","SDEC09",313,0)
 D ENPM^SDECDIQ1(9000006.11,DFN_",0",".01;.02;.06;.07","ASDGX(")
"RTN","SDEC09",314,0)
 S C=1,N=0
"RTN","SDEC09",315,0)
 F  S N=$O(ASDGX(N)) Q:'N  D
"RTN","SDEC09",316,0)
 . S $P(SDECY,"|",C)=DFN_U_N_U_ASDGX(N,.01)_U_ASDGX(N,.02)_U_ASDGX(N,.06)_U_ASDGX(N,.07)
"RTN","SDEC09",317,0)
 . S C=C+1
"RTN","SDEC09",318,0)
 . Q
"RTN","SDEC09",319,0)
 Q
"RTN","SDEC09",320,0)
 ;
"RTN","SDEC09",321,0)
DFN(FILE,DFN) ; -- returns ien for file
"RTN","SDEC09",322,0)
 Q ""
"RTN","SDEC09",323,0)
 I FILE'[9000004 Q DFN
"RTN","SDEC09",324,0)
 Q +$O(^AUPNMCD("B",DFN,0))
"RTN","SDEC28")
0^5^B114287193
"RTN","SDEC28",1,0)
SDEC28 ;ALB/SAT - VISTA SCHEDULING RPCS ;MAR 15, 2017
"RTN","SDEC28",2,0)
 ;;5.3;Scheduling;**627,642,658,679**;Aug 13, 1993;Build 15
"RTN","SDEC28",3,0)
 ;
"RTN","SDEC28",4,0)
 ; ajf;010318; Adding PCP and MHP to return
"RTN","SDEC28",5,0)
 ;
"RTN","SDEC28",6,0)
 Q
"RTN","SDEC28",7,0)
 ;
"RTN","SDEC28",8,0)
PTLOOKRS(SDECY,SDECP,SDECC,LASTSUB)  ;Patient Lookup
"RTN","SDEC28",9,0)
 ;SDECP   - (optional)    Free-Text - Partial name to look up
"RTN","SDEC28",10,0)
 ;SDECC   - (optional) Max number of patients to return; defaults to 10
"RTN","SDEC28",11,0)
 ;LASTSUB - (optional) last subscripts from previous call
"RTN","SDEC28",12,0)
 ;Find up to SDECC patients matching SDECP*
"RTN","SDEC28",13,0)
 ;Supports DOB Lookup, SSN Lookup
"RTN","SDEC28",14,0)
 ;
"RTN","SDEC28",15,0)
 N SDECI
"RTN","SDEC28",16,0)
 S SDECI=0
"RTN","SDEC28",17,0)
 S SDECP=$TR(SDECP,$C(13),"")
"RTN","SDEC28",18,0)
 S SDECP=$TR(SDECP,$C(10),"")
"RTN","SDEC28",19,0)
 S SDECP=$TR(SDECP,$C(9),"")
"RTN","SDEC28",20,0)
 S:$G(SDECC)="" SDECC=10
"RTN","SDEC28",21,0)
 S LASTSUB=$G(LASTSUB)
"RTN","SDEC28",22,0)
 N GAF,PADDRES1,PADDRES2,PADDRES3,PCITY,PLIST,PSTATE,PCOUNTRY,PZIP4
"RTN","SDEC28",23,0)
 N SDTMP,SDECHRN,SDECZ,SDECRET,SDECDPT,SDECRET,DFN,SDECFILE
"RTN","SDEC28",24,0)
 N SDECIENS,SDECFIELDS,SDECFLAGS,SDECVALUE,SDECNUMBER,SDECINDEXES,SDECSCREEN
"RTN","SDEC28",25,0)
 N SDECTARG,SDECMSG,SDECRSLT,SDECCNT,SDDEMO,%DT,X,Y,SDECIDEN,SDECX,SDSENS
"RTN","SDEC28",26,0)
 N PRACE,PRACEN,PETH,PETHN,SDPCP,SDMHP
"RTN","SDEC28",27,0)
 K ^TMP("SDEC",$J)
"RTN","SDEC28",28,0)
 S SDECY="^TMP(""SDEC"","_$J_")"
"RTN","SDEC28",29,0)
 S ^TMP("SDEC",$J,0)="T00030ERROR_CODE^T00030ERROR_TEXT"_$C(30)
"RTN","SDEC28",30,0)
 I '+$G(DUZ) S SDECI=SDECI+1 S @SDECY@(SDECI)="0^Invalid User."_$C(30)_$C(31) Q
"RTN","SDEC28",31,0)
 I '$D(DUZ(2)) S SDECI=SDECI+1 S @SDECY@(SDECI)="0^Invalid Institution."_$C(30)_$C(31) Q
"RTN","SDEC28",32,0)
 S SDTMP="T00030NAME^T00030HRN^T00030SSN^D00030DOB^T00030IEN^T00030GENDER^I00010INSTIEN^T00030INSTNAME"  ;8
"RTN","SDEC28",33,0)
 S SDTMP=SDTMP_"^I00010USERIEN^T00030USERNAME"  ;10
"RTN","SDEC28",34,0)
 S SDTMP=SDTMP_"^T00030PRIGRP^T00030ELIGIEN^T00030ELIGNAME^T00030SVCCONN^T00030SVCCONNP"  ;15
"RTN","SDEC28",35,0)
 S SDTMP=SDTMP_"^T00030TYPEIEN^T00030TYPENAME^T00030PADDRES1^T00030PADDRES2"              ;19
"RTN","SDEC28",36,0)
 S SDTMP=SDTMP_"^T00030PADDRES3^T00030PCITY^T00030PSTATE^T00030PCOUNTRY^T00030PZIP4"      ;24
"RTN","SDEC28",37,0)
 S SDTMP=SDTMP_"^T00030GAF^T00100SENSITIVE^T00030PRACE^T00030PRACEN^T00030PETH^T00030PETHN"  ;30
"RTN","SDEC28",38,0)
 S SDTMP=SDTMP_"^T00030LASTSUB"                                                              ;31
"RTN","SDEC28",39,0)
 S SDTMP=SDTMP_"^T00030BADADD^T00030HPHONE^T00030OPHONE^T00030NOK^T00030KNAME^T00030KREL^T00030KPHONE"  ;38
"RTN","SDEC28",40,0)
 S SDTMP=SDTMP_"^T00030KSTREET^T00030KSTREET2^T00030KSTREET3^T00030KCITY^T00030KSTATE^T00030KZIP"   ;43
"RTN","SDEC28",41,0)
 S SDTMP=SDTMP_"^T00030NOK2^T00030K2NAME^T00030K2REL^T00030K2PHONE"  ;47
"RTN","SDEC28",42,0)
 S SDTMP=SDTMP_"^T00030K2STREET^T00030K2STREET2^T00030K2STREET3^T00030K2CITY^T00030K2STATE^T00030K2ZIP"   ;53
"RTN","SDEC28",43,0)
 S SDTMP=SDTMP_"^T00030PCOUNTY^T00030PMARITAL^T00030PRELIGION^T00030PTACTIVE"
"RTN","SDEC28",44,0)
 S SDTMP=SDTMP_"^T00030PTADDRESS1^T00030PTADDRESS2^T00030PTADDRESS3^T00030PTCITY^T00030PTSTATE^T00030PTZIP^T00030PTZIP+4"  ;65
"RTN","SDEC28",45,0)
 S SDTMP=SDTMP_"^T00030PTCOUNTRY^T00030PTCOUNTY^T00030PTPHONE^T00030PTSTART^T00030PTEND"   ;70
"RTN","SDEC28",46,0)
 S SDTMP=SDTMP_"^T00030PCELL^T00030PPAGER^T00030PEMAIL^T00030PF_FFF^T00030PF_VCD^T00030PFNATIONAL^T00030PFLOCAL"  ;77
"RTN","SDEC28",47,0)
 S SDTMP=SDTMP_"^T00030SUBGRP^T00030CAT8G^T01000SIMILAR^T00030PCP^T00030MHP"   ;80
"RTN","SDEC28",48,0)
 S ^TMP("SDEC",$J,0)=SDTMP_$C(30)
"RTN","SDEC28",49,0)
 ;
"RTN","SDEC28",50,0)
DFN ;Patient ID passed in
"RTN","SDEC28",51,0)
 I $E(SDECP)="#" D  S SDECI=SDECI+1 S @SDECY@(SDECI)=$C(31) Q
"RTN","SDEC28",52,0)
 . S DFN=$E(SDECP,2,$L(SDECP))
"RTN","SDEC28",53,0)
 . Q:'$D(^DPT(DFN,0))
"RTN","SDEC28",54,0)
 . S SDECHRN=$P($G(^AUPNPAT(DFN,41,DUZ(2),0)),U,2) ;CHART
"RTN","SDEC28",55,0)
 . ;I SDECHRN="" Q  ;NO CHART AT THIS DUZ2
"RTN","SDEC28",56,0)
 . ;I $P($G(^AUPNPAT(DFN,41,DUZ(2),0)),U,3) S SDECHRN=SDECHRN_"(*)" Q  ;HMW 20050721 Record Inactivated
"RTN","SDEC28",57,0)
 . D GET1(DFN,SDECHRN,.SDECI,SDECY)
"RTN","SDEC28",58,0)
 . Q
"RTN","SDEC28",59,0)
 ;
"RTN","SDEC28",60,0)
DOB ;DOB Lookup
"RTN","SDEC28",61,0)
 I +DUZ(2),((SDECP?1.2N1"/"1.2N1"/"1.4N)!(SDECP?1.2N1" "1.2N1" "1.4N)!(SDECP?1.2N1"-"1.2N1"-"1.4N)!(SDECP?1.2N1"."1.2N1"."1.4N)) D  S SDECI=SDECI+1 S @SDECY@(SDECI)=$C(31) Q
"RTN","SDEC28",62,0)
 . S X=SDECP S %DT="P" D ^%DT S SDECP=Y Q:'+Y
"RTN","SDEC28",63,0)
 . Q:'$D(^DPT("ADOB",SDECP))
"RTN","SDEC28",64,0)
 . S DFN=$S($P(LASTSUB,"|",1)'="":$P(LASTSUB,"|",1),1:0)
"RTN","SDEC28",65,0)
 . S LASTSUB=""
"RTN","SDEC28",66,0)
 . F  S DFN=$O(^DPT("ADOB",SDECP,DFN)) Q:'+DFN  D  Q:SDECI'<SDECC
"RTN","SDEC28",67,0)
 . . Q:'$D(^DPT(DFN,0))
"RTN","SDEC28",68,0)
 . . S SDECHRN=$P($G(^AUPNPAT(DFN,41,DUZ(2),0)),U,2) ;CHART
"RTN","SDEC28",69,0)
 . . ;I SDECHRN="" Q  ;NO CHART AT THIS DUZ2
"RTN","SDEC28",70,0)
 . . ;I $P($G(^AUPNPAT(DFN,41,DUZ(2),0)),U,3) S SDECHRN=SDECHRN_"(*)" Q  ;HMW 20050721 Record Inactivated
"RTN","SDEC28",71,0)
 . . D GET1(DFN,SDECHRN,.SDECI,SDECY,DFN)
"RTN","SDEC28",72,0)
 . . Q
"RTN","SDEC28",73,0)
 . I SDECI>0,'+DFN S $P(@SDECY@(SDECI),U,31)=""
"RTN","SDEC28",74,0)
 . Q
"RTN","SDEC28",75,0)
 ;
"RTN","SDEC28",76,0)
 ;SSN Lookup
"RTN","SDEC28",77,0)
 I (SDECP?4.9N)!(SDECP?9N.1"P")!(SDECP?3N1"-"2N1"-"4N.1"P") D  S SDECI=SDECI+1 S @SDECY@(SDECI)=$C(31) Q
"RTN","SDEC28",78,0)
 .;SSN Lookup (BS - last 4)
"RTN","SDEC28",79,0)
 .I SDECP?4N D
"RTN","SDEC28",80,0)
 ..S SDECP1=SDECP
"RTN","SDEC28",81,0)
 ..S DFN=0 F  S DFN=$O(^DPT("BS",SDECP1,DFN)) Q:'+DFN  D
"RTN","SDEC28",82,0)
 ...Q:'$D(^DPT(DFN,0))
"RTN","SDEC28",83,0)
 ...S SDECHRN=$P($G(^AUPNPAT(DFN,41,DUZ(2),0)),U,2) ;CHART
"RTN","SDEC28",84,0)
 ...;I SDECHRN="" Q  ;NO CHART AT THIS DUZ2
"RTN","SDEC28",85,0)
 ...;I $P($G(^AUPNPAT(DFN,41,DUZ(2),0)),U,3) S SDECHRN=SDECHRN_"(*)" Q  ;HMW 20050721 Record Inactivated
"RTN","SDEC28",86,0)
 ...D GET1(DFN,SDECHRN,.SDECI,SDECY)
"RTN","SDEC28",87,0)
 .E  D SSN(SDECP,.SDECI,SDECY)  ;(partial/full ssn)
"RTN","SDEC28",88,0)
 ;
"RTN","SDEC28",89,0)
 ;SSN Lookup (BS5)
"RTN","SDEC28",90,0)
 I SDECP?1A1.4N D  S SDECI=SDECI+1 S @SDECY@(SDECI)=$C(31) Q
"RTN","SDEC28",91,0)
 .S SDECP1=$S(SDECP?1A4N:$E(SDECP,1,4)_$C($A($E(SDECP,5))-1),1:SDECP)
"RTN","SDEC28",92,0)
 .F  S SDECP1=$O(^DPT("BS5",SDECP1)) Q:SDECP1=""  Q:SDECP1'[SDECP  Q:(SDECP?1A4N)&(SDECP1'=SDECP)  D
"RTN","SDEC28",93,0)
 ..S DFN=0 F  S DFN=$O(^DPT("BS5",SDECP1,DFN)) Q:'+DFN  D
"RTN","SDEC28",94,0)
 ...Q:'$D(^DPT(DFN,0))
"RTN","SDEC28",95,0)
 ...S SDECHRN=$P($G(^AUPNPAT(DFN,41,DUZ(2),0)),U,2) ;CHART
"RTN","SDEC28",96,0)
 ...;I SDECHRN="" Q  ;NO CHART AT THIS DUZ2
"RTN","SDEC28",97,0)
 ...;I $P($G(^AUPNPAT(DFN,41,DUZ(2),0)),U,3) S SDECHRN=SDECHRN_"(*)" Q  ;HMW 20050721 Record Inactivated
"RTN","SDEC28",98,0)
 ...D GET1(DFN,SDECHRN,.SDECI,SDECY)
"RTN","SDEC28",99,0)
 ;
"RTN","SDEC28",100,0)
 ;Chart# Lookup  (not currently used)
"RTN","SDEC28",101,0)
 I 0,+DUZ(2),SDECP]"",$D(^AUPNPAT("D",SDECP)) D  S SDECI=SDECI+1 S @SDECY@(SDECI)=$C(31) Q
"RTN","SDEC28",102,0)
 . S DFN=0 F  S DFN=$O(^AUPNPAT("D",SDECP,DFN)) Q:'+DFN  I $D(^AUPNPAT("D",SDECP,DFN,DUZ(2))) D  Q
"RTN","SDEC28",103,0)
 . . Q:'$D(^DPT(DFN,0))
"RTN","SDEC28",104,0)
 . . S SDECHRN=SDECP ;CHART
"RTN","SDEC28",105,0)
 . . ;I $D(^AUPNPAT(DFN,41,DUZ(2),0)),$P(^(0),U,3) S SDECHRN=SDECHRN_"(*)" Q  ;HMW 20050721 Record Inactivated
"RTN","SDEC28",106,0)
 . . D GET1(DFN,SDECHRN,.SDECI,SDECY)
"RTN","SDEC28",107,0)
 . . Q
"RTN","SDEC28",108,0)
 . Q
"RTN","SDEC28",109,0)
 ;
"RTN","SDEC28",110,0)
 ;Partial name
"RTN","SDEC28",111,0)
 N SDARR
"RTN","SDEC28",112,0)
 I SDECP?2.A.E D  Q
"RTN","SDEC28",113,0)
 .;F SDECX=1:1:$P(SDECRSLT("DILIST",0),U) D
"RTN","SDEC28",114,0)
 .S SDECX=$S($P(LASTSUB,U,1)'="":$$GETSUB^SDECU($P(LASTSUB,U,1)),1:$$GETSUB^SDECU(SDECP))
"RTN","SDEC28",115,0)
 .F  S SDECX=$O(^DPT("B",SDECX)) Q:SDECX'[SDECP  Q:SDECX=""  D  Q:SDECI'<SDECC
"RTN","SDEC28",116,0)
 ..S DFN=$S($P(LASTSUB,U,2)'="":$P(LASTSUB,U,2),1:0)
"RTN","SDEC28",117,0)
 ..S LASTSUB=""
"RTN","SDEC28",118,0)
 ..F  S DFN=$O(^DPT("B",SDECX,DFN)) Q:DFN=""  D  Q:SDECI'<SDECC
"RTN","SDEC28",119,0)
 ...Q:$D(SDARR(DFN))
"RTN","SDEC28",120,0)
 ...S SDARR(DFN)=""
"RTN","SDEC28",121,0)
 ...S SDECHRN=$P($G(^AUPNPAT(DFN,41,DUZ(2),0)),U,2) ;CHART
"RTN","SDEC28",122,0)
 ...;I SDECHRN="" Q  ;NO CHART AT THIS DUZ2
"RTN","SDEC28",123,0)
 ...;I $P($G(^AUPNPAT(DFN,41,DUZ(2),0)),U,3) S SDECHRN=SDECHRN_"(*)" Q  ;HMW 20050721 Record Inactivated
"RTN","SDEC28",124,0)
 ...D GET1(DFN,SDECHRN,.SDECI,SDECY,SDECX_"|"_DFN)
"RTN","SDEC28",125,0)
 ...Q
"RTN","SDEC28",126,0)
 .I SDECI>0,(SDECX="")!(SDECX'[SDECP) S $P(@SDECY@(SDECI),U,31)=""
"RTN","SDEC28",127,0)
 .S @SDECY@(SDECI)=@SDECY@(SDECI)_$C(31)
"RTN","SDEC28",128,0)
 ;
"RTN","SDEC28",129,0)
 ;All Patients
"RTN","SDEC28",130,0)
 N FROM,SDSUB
"RTN","SDEC28",131,0)
 ;I SDECP'?1N.E D  S SDECI=SDECI+1 S @SDECY@(SDECI)=$C(31) Q
"RTN","SDEC28",132,0)
 I SDECP="" D  S SDECI=SDECI+1 S @SDECY@(SDECI)=$C(31) Q
"RTN","SDEC28",133,0)
 . K PLIST
"RTN","SDEC28",134,0)
 . S FROM=$S($P(LASTSUB,"|",1)'="":$P(LASTSUB,"|",1),1:"")
"RTN","SDEC28",135,0)
 . D LISTALL^SDECPTPL(.PLIST,FROM,1,SDECC)
"RTN","SDEC28",136,0)
 . S SDECCNT=0 F  S SDECCNT=$O(PLIST(SDECCNT)) Q:'SDECCNT  D
"RTN","SDEC28",137,0)
 . . S DFN=$P(PLIST(SDECCNT),U)
"RTN","SDEC28",138,0)
 . . S SDECHRN=$P($G(^AUPNPAT(DFN,41,DUZ(2),0)),U,2) ;CHART
"RTN","SDEC28",139,0)
 . . ;I SDECHRN="" Q  ;NO CHART AT THIS DUZ2
"RTN","SDEC28",140,0)
 . . ;I $P($G(^AUPNPAT(DFN,41,DUZ(2),0)),U,3) S SDECHRN=SDECHRN_"(*)" Q  ;HMW 20050721 Record Inactivated
"RTN","SDEC28",141,0)
 . . S SDSUB=$P(PLIST(SDECCNT),U,2)
"RTN","SDEC28",142,0)
 . . D GET1(DFN,SDECHRN,.SDECI,SDECY,SDSUB)
"RTN","SDEC28",143,0)
 . . Q
"RTN","SDEC28",144,0)
 . Q
"RTN","SDEC28",145,0)
 S SDECI=SDECI+1 S @SDECY@(SDECI)=$C(31)
"RTN","SDEC28",146,0)
 Q
"RTN","SDEC28",147,0)
 ;
"RTN","SDEC28",148,0)
GET1(DFN,SDECHRN,SDECI,SDECY,LSUB) ;
"RTN","SDEC28",149,0)
 N PETH,PETHN,PRACE,PRACEN
"RTN","SDEC28",150,0)
 N SDECZ,SDECDPT,SDDEMO
"RTN","SDEC28",151,0)
 Q:'+$G(DFN)
"RTN","SDEC28",152,0)
 Q:'$D(^DPT(DFN,0))
"RTN","SDEC28",153,0)
 S SDECI=$G(SDECI)
"RTN","SDEC28",154,0)
 S LSUB=$G(LSUB)
"RTN","SDEC28",155,0)
 S SDECZ=""
"RTN","SDEC28",156,0)
 S SDECZ=$$GET1^DIQ(2,DFN_",",.01)
"RTN","SDEC28",157,0)
 Q:SDECZ=""
"RTN","SDEC28",158,0)
 S $P(SDECZ,U,2)=SDECHRN
"RTN","SDEC28",159,0)
 S SDECDPT=$G(^DPT(DFN,0))
"RTN","SDEC28",160,0)
 S $P(SDECZ,U,3)=$P(SDECDPT,U,9) ;SSN
"RTN","SDEC28",161,0)
 S Y=$P(SDECDPT,U,3) X ^DD("DD")
"RTN","SDEC28",162,0)
 S $P(SDECZ,U,4)=Y ;DOB
"RTN","SDEC28",163,0)
 S $P(SDECZ,U,5)=DFN
"RTN","SDEC28",164,0)
 ; Add Gender
"RTN","SDEC28",165,0)
 S $P(SDECZ,U,6)=$P(SDECDPT,U,2)
"RTN","SDEC28",166,0)
 ; Add Institution IEN and Name
"RTN","SDEC28",167,0)
 S $P(SDECZ,U,7)=DUZ(2)
"RTN","SDEC28",168,0)
 S $P(SDECZ,U,8)=$P(^DIC(4,DUZ(2),0),U)
"RTN","SDEC28",169,0)
 ; Add User IEN and Name
"RTN","SDEC28",170,0)
 S $P(SDECZ,U,9)=DUZ
"RTN","SDEC28",171,0)
 S $P(SDECZ,U,10)=$P(^VA(200,DUZ,0),U)
"RTN","SDEC28",172,0)
 D PDEMO^SDECU3(.SDDEMO,DFN)     ;use to get PATIENT ENROLLMENT data  ;alb/sat 658 PDEMO moved to SDECU3
"RTN","SDEC28",173,0)
 S $P(SDECZ,U,11)=SDDEMO("PRIGRP")
"RTN","SDEC28",174,0)
 S $P(SDECZ,U,12)=SDDEMO("ELIGIEN")
"RTN","SDEC28",175,0)
 S $P(SDECZ,U,13)=SDDEMO("ELIGNAME")
"RTN","SDEC28",176,0)
 S $P(SDECZ,U,14)=SDDEMO("SVCCONN")
"RTN","SDEC28",177,0)
 S $P(SDECZ,U,15)=SDDEMO("SVCCONNP")
"RTN","SDEC28",178,0)
 S $P(SDECZ,U,16)=SDDEMO("TYPEIEN")
"RTN","SDEC28",179,0)
 S $P(SDECZ,U,17)=SDDEMO("TYPENAME")
"RTN","SDEC28",180,0)
 S $P(SDECZ,U,18)=SDDEMO("PADDRES1")   ;18   - Patient Address line 1
"RTN","SDEC28",181,0)
 S $P(SDECZ,U,19)=SDDEMO("PADDRES2")   ;19   - Patient Address line 2
"RTN","SDEC28",182,0)
 S $P(SDECZ,U,20)=SDDEMO("PADDRES3")   ;20  - Patient Address line 3
"RTN","SDEC28",183,0)
 S $P(SDECZ,U,21)=SDDEMO("PCITY")      ;21   - Patient City
"RTN","SDEC28",184,0)
 S $P(SDECZ,U,22)=SDDEMO("PSTATE")     ;22   - Patient state name
"RTN","SDEC28",185,0)
 S $P(SDECZ,U,23)=SDDEMO("PCOUNTRY")   ;23   - Patient country ID
"RTN","SDEC28",186,0)
 S $P(SDECZ,U,24)=SDDEMO("PZIP+4")     ;24   - Patient Zip+4
"RTN","SDEC28",187,0)
 S $P(SDECZ,U,25)=$$GAF^SDECU2(DFN)    ;25
"RTN","SDEC28",188,0)
 S $P(SDECZ,U,26)=$$PTSEC^SDECUTL(DFN) ;26   - sensitivity
"RTN","SDEC28",189,0)
 D RACELST^SDECU2(DFN,.PRACE,.PRACEN)
"RTN","SDEC28",190,0)
 S $P(SDECZ,U,27)=PRACE
"RTN","SDEC28",191,0)
 S $P(SDECZ,U,28)=PRACEN
"RTN","SDEC28",192,0)
 D ETH^SDECU2(DFN,.PETH,.PETHN)   ;get ethnicity
"RTN","SDEC28",193,0)
 S:PETH'="" $P(SDECZ,U,29)=PETH
"RTN","SDEC28",194,0)
 S:PETHN'="" $P(SDECZ,U,30)=PETHN
"RTN","SDEC28",195,0)
 S $P(SDECZ,U,31)=LSUB   ;SDECX_"|"_DFN
"RTN","SDEC28",196,0)
 S $P(SDECZ,U,32)=SDDEMO("BADADD")
"RTN","SDEC28",197,0)
 S $P(SDECZ,U,33)=SDDEMO("HPHONE")
"RTN","SDEC28",198,0)
 S $P(SDECZ,U,34)=SDDEMO("OPHONE")
"RTN","SDEC28",199,0)
 S $P(SDECZ,U,35)=SDDEMO("NOK")
"RTN","SDEC28",200,0)
 S $P(SDECZ,U,36)=SDDEMO("KNAME")
"RTN","SDEC28",201,0)
 S $P(SDECZ,U,37)=SDDEMO("KREL")
"RTN","SDEC28",202,0)
 S $P(SDECZ,U,38)=SDDEMO("KPHONE")
"RTN","SDEC28",203,0)
 S $P(SDECZ,U,39)=SDDEMO("KSTREET")
"RTN","SDEC28",204,0)
 S $P(SDECZ,U,40)=SDDEMO("KSTREET2")
"RTN","SDEC28",205,0)
 S $P(SDECZ,U,41)=SDDEMO("KSTREET3")
"RTN","SDEC28",206,0)
 S $P(SDECZ,U,42)=SDDEMO("KCITY")
"RTN","SDEC28",207,0)
 S $P(SDECZ,U,43)=SDDEMO("KSTATE")
"RTN","SDEC28",208,0)
 S $P(SDECZ,U,44)=SDDEMO("KZIP")
"RTN","SDEC28",209,0)
 S $P(SDECZ,U,45)=SDDEMO("NOK2")
"RTN","SDEC28",210,0)
 S $P(SDECZ,U,46)=SDDEMO("K2NAME")
"RTN","SDEC28",211,0)
 S $P(SDECZ,U,47)=SDDEMO("K2REL")
"RTN","SDEC28",212,0)
 S $P(SDECZ,U,48)=SDDEMO("K2PHONE")
"RTN","SDEC28",213,0)
 S $P(SDECZ,U,49)=SDDEMO("K2STREET")
"RTN","SDEC28",214,0)
 S $P(SDECZ,U,50)=SDDEMO("K2STREET2")
"RTN","SDEC28",215,0)
 S $P(SDECZ,U,51)=SDDEMO("K2STREET3")
"RTN","SDEC28",216,0)
 S $P(SDECZ,U,52)=SDDEMO("K2CITY")
"RTN","SDEC28",217,0)
 S $P(SDECZ,U,53)=SDDEMO("K2STATE")
"RTN","SDEC28",218,0)
 S $P(SDECZ,U,54)=SDDEMO("K2ZIP")
"RTN","SDEC28",219,0)
 S $P(SDECZ,U,55)=SDDEMO("PCOUNTY")
"RTN","SDEC28",220,0)
 S $P(SDECZ,U,56)=SDDEMO("PMARITAL")
"RTN","SDEC28",221,0)
 S $P(SDECZ,U,57)=SDDEMO("PRELIGION")
"RTN","SDEC28",222,0)
 S $P(SDECZ,U,58)=SDDEMO("PTACTIVE")
"RTN","SDEC28",223,0)
 S $P(SDECZ,U,59)=SDDEMO("PTADDRESS1")
"RTN","SDEC28",224,0)
 S $P(SDECZ,U,60)=SDDEMO("PTADDRESS2")
"RTN","SDEC28",225,0)
 S $P(SDECZ,U,61)=SDDEMO("PTADDRESS3")
"RTN","SDEC28",226,0)
 S $P(SDECZ,U,62)=SDDEMO("PTCITY")
"RTN","SDEC28",227,0)
 S $P(SDECZ,U,63)=SDDEMO("PTSTATE")
"RTN","SDEC28",228,0)
 S $P(SDECZ,U,64)=SDDEMO("PTZIP")
"RTN","SDEC28",229,0)
 S $P(SDECZ,U,65)=SDDEMO("PTZIP+4")
"RTN","SDEC28",230,0)
 S $P(SDECZ,U,66)=SDDEMO("PTCOUNTRY")
"RTN","SDEC28",231,0)
 S $P(SDECZ,U,67)=SDDEMO("PTCOUNTY")
"RTN","SDEC28",232,0)
 S $P(SDECZ,U,68)=SDDEMO("PTPHONE")
"RTN","SDEC28",233,0)
 S $P(SDECZ,U,69)=SDDEMO("PTSTART")
"RTN","SDEC28",234,0)
 S $P(SDECZ,U,70)=SDDEMO("PTEND")
"RTN","SDEC28",235,0)
 S $P(SDECZ,U,71)=SDDEMO("PCELL")
"RTN","SDEC28",236,0)
 S $P(SDECZ,U,72)=SDDEMO("PPAGER")
"RTN","SDEC28",237,0)
 S $P(SDECZ,U,73)=SDDEMO("PEMAIL")
"RTN","SDEC28",238,0)
 S $P(SDECZ,U,74)=SDDEMO("PF_FFF")
"RTN","SDEC28",239,0)
 S $P(SDECZ,U,75)=SDDEMO("PF_VCD")
"RTN","SDEC28",240,0)
 S $P(SDECZ,U,76)=SDDEMO("PFNATIONAL")
"RTN","SDEC28",241,0)
 S $P(SDECZ,U,77)=SDDEMO("PFLOCAL")
"RTN","SDEC28",242,0)
 S $P(SDECZ,U,78)=SDDEMO("SUBGRP")
"RTN","SDEC28",243,0)
 S $P(SDECZ,U,79)=(SDDEMO("PRIGRP")="GROUP 8")&(SDDEMO("SUBGRP")="g")
"RTN","SDEC28",244,0)
 S $P(SDECZ,U,80)=SDDEMO("SIMILAR")
"RTN","SDEC28",245,0)
 ;ajf
"RTN","SDEC28",246,0)
 S SDPCP=$$OUTPTPR^SDUTL3(DFN) ;Return Primary Care Provider
"RTN","SDEC28",247,0)
 S $P(SDECZ,U,81)=$P(SDPCP,U,2)
"RTN","SDEC28",248,0)
 S SDMHP=$$START^SCMCMHTC(DFN) ;Return Mental Health Provider
"RTN","SDEC28",249,0)
 S $P(SDECZ,U,82)=$P(SDMHP,U,2)
"RTN","SDEC28",250,0)
 ;
"RTN","SDEC28",251,0)
 S SDECI=SDECI+1 S @SDECY@(SDECI)=SDECZ_$C(30)
"RTN","SDEC28",252,0)
 Q
"RTN","SDEC28",253,0)
 ;
"RTN","SDEC28",254,0)
SSN(SDECP,SDECI,SDECY)  ;
"RTN","SDEC28",255,0)
 I $D(^DPT("SSN",$E(SDECP,1,9)_"P")) D
"RTN","SDEC28",256,0)
 .N SDECP1
"RTN","SDEC28",257,0)
 .S SDECP1=$E(SDECP,1,9)_"O"
"RTN","SDEC28",258,0)
 .S SDECP1=$O(^DPT("SSN",SDECP1)) Q:SDECP1=""  Q:SDECP1'[$E(SDECP,1,9)  D SSN1
"RTN","SDEC28",259,0)
 E  D
"RTN","SDEC28",260,0)
 .N SDLEN S SDLEN=$L(SDECP)
"RTN","SDEC28",261,0)
 .I SDLEN=9 S SDECP1=SDECP D SSN1
"RTN","SDEC28",262,0)
 .E  D
"RTN","SDEC28",263,0)
 ..S SDECP1=SDECP_$$FILL^SDECU(9-SDLEN,0)
"RTN","SDEC28",264,0)
 ..F  S SDECP1=$O(^DPT("SSN",SDECP1)) Q:SDECP1=""  Q:$E(SDECP1,1,SDLEN)'=SDECP  D SSN1
"RTN","SDEC28",265,0)
 Q
"RTN","SDEC28",266,0)
SSN1 ;
"RTN","SDEC28",267,0)
 S DFN=0 F  S DFN=$O(^DPT("SSN",SDECP1,DFN)) Q:'+DFN  D
"RTN","SDEC28",268,0)
 .Q:'$D(^DPT(DFN,0))
"RTN","SDEC28",269,0)
 .S SDECHRN=$P($G(^AUPNPAT(DFN,41,DUZ(2),0)),U,2) ;CHART
"RTN","SDEC28",270,0)
 .;I SDECHRN="" Q  ;NO CHART AT THIS DUZ2
"RTN","SDEC28",271,0)
 .;I $P($G(^AUPNPAT(DFN,41,DUZ(2),0)),U,3) S SDECHRN=SDECHRN_"(*)" Q  ;HMW 20050721 Record Inactivated
"RTN","SDEC28",272,0)
 .D GET1(DFN,SDECHRN,.SDECI,SDECY)
"RTN","SDEC28",273,0)
 .Q
"RTN","SDEC28",274,0)
 Q
"RTN","SDEC28",275,0)
 ;
"RTN","SDEC28",276,0)
ERROR ;
"RTN","SDEC28",277,0)
 D ERR("Error")
"RTN","SDEC28",278,0)
 Q
"RTN","SDEC28",279,0)
 ;
"RTN","SDEC28",280,0)
ERR(ERRNO) ;Error processing
"RTN","SDEC28",281,0)
 S SDECRET="T00030NAME^T00030HRN^T00030SSN^D00030DOB^T00030IEN^T00030GENDER"
"RTN","SDEC28",282,0)
 S SDECRET=SDECRET_"^I00010INSTIEN^T00030INSTNAME^I00010USERIEN^T00030USERNAME"
"RTN","SDEC28",283,0)
 S SDECRET=SDECRET_"^T00030PRIGRP^T00030ELIGIEN^T00030ELIGNAME^T00030SVCCONN^T00030SVCCONNP"_$C(30)_$C(31)
"RTN","SDEC28",284,0)
 Q
"RTN","SDEC32")
0^2^B116278285
"RTN","SDEC32",1,0)
SDEC32 ;ALB/SAT - VISTA SCHEDULING RPCS ;JUL 26, 2017
"RTN","SDEC32",2,0)
 ;;5.3;Scheduling;**627,643,642,658,665,672,679**;Aug 13, 1993;Build 15
"RTN","SDEC32",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified
"RTN","SDEC32",4,0)
 Q
"RTN","SDEC32",5,0)
 ;
"RTN","SDEC32",6,0)
 ;
"RTN","SDEC32",7,0)
ERROR ;
"RTN","SDEC32",8,0)
 D ERR("VistA Error")
"RTN","SDEC32",9,0)
 Q
"RTN","SDEC32",10,0)
 ;
"RTN","SDEC32",11,0)
ERR(SDECERR) ;Error processing
"RTN","SDEC32",12,0)
 S SDECI=SDECI+1
"RTN","SDEC32",13,0)
 S ^TMP("SDEC",$J,SDECI)=$C(31)
"RTN","SDEC32",14,0)
 Q
"RTN","SDEC32",15,0)
 ;
"RTN","SDEC32",16,0)
HOSPLOC(SDECY,SDECP,MAXREC,LSUB) ;return HOSPITAL LOCATIONs
"RTN","SDEC32",17,0)
 ;HOSPLOC(SDECY)  external parameter tag is in SDEC
"RTN","SDEC32",18,0)
 ;INPUT:
"RTN","SDEC32",19,0)
 ;  SDECP  - (optional) Partial name text
"RTN","SDEC32",20,0)
 ;  MAXREC - (optional) Max number of records to return
"RTN","SDEC32",21,0)
 ;  LSUB   - (optional) subscripts from last call to pick up where left off
"RTN","SDEC32",22,0)
 ;RETURN:
"RTN","SDEC32",23,0)
 ;Global Array in which each array entry
"RTN","SDEC32",24,0)
 ;contains HOSPITAL LOCATION data separated by ^:
"RTN","SDEC32",25,0)
 ; 1. HOSPITAL_LOCATION_ID
"RTN","SDEC32",26,0)
 ; 2. HOSPITAL_LOCATION
"RTN","SDEC32",27,0)
 ; 3. DEFAULT_PROVIDER
"RTN","SDEC32",28,0)
 ; 4. STOP_CODE_NUMBER
"RTN","SDEC32",29,0)
 ; 5. INACTIVATE_DATE
"RTN","SDEC32",30,0)
 ; 6. REACTIVATE_DATE
"RTN","SDEC32",31,0)
 ; 7. LASTSUB
"RTN","SDEC32",32,0)
 N SDECI,SDECIEN,SDECNOD,SDECNOD1,SDECNAM,SDECINA,SDECREA,SDECSCOD
"RTN","SDEC32",33,0)
 N SDECIEN1,SDECPRV,SDDUP,SDNAM
"RTN","SDEC32",34,0)
 N LASTSUB,X
"RTN","SDEC32",35,0)
 K ^TMP("SDEC",$J)
"RTN","SDEC32",36,0)
 S SDECY="^TMP(""SDEC"","_$J_")"
"RTN","SDEC32",37,0)
 S SDECI=0
"RTN","SDEC32",38,0)
 S ^TMP("SDEC",$J,SDECI)="I00020HOSPITAL_LOCATION_ID^T00040HOSPITAL_LOCATION^T00030DEFAULT_PROVIDER^T00030STOP_CODE_NUMBER^D00020INACTIVATE_DATE^D00020REACTIVATE_DATE^T00030LASTSUB"_$C(30)
"RTN","SDEC32",39,0)
 ;
"RTN","SDEC32",40,0)
 S SDECP=$G(SDECP)
"RTN","SDEC32",41,0)
 S MAXREC=+$G(MAXREC)
"RTN","SDEC32",42,0)
 S LSUB=$G(LSUB)
"RTN","SDEC32",43,0)
 S:LSUB="" SDECNAM=$S(SDECP'="":$$GETSUB^SDEC56(SDECP),1:"")
"RTN","SDEC32",44,0)
 S:LSUB'="" SDECNAM=$$GETSUB^SDEC56($P(LSUB,"|",1))
"RTN","SDEC32",45,0)
 F  S SDECNAM=$O(^SC("B",SDECNAM)) Q:(SDECP'="")&(SDECNAM'[SDECP)  Q:SDECNAM=""  D  Q:(+MAXREC)&(SDECI'<MAXREC)
"RTN","SDEC32",46,0)
 . S SDECIEN=$S(LSUB'="":$P(LSUB,"|",2),1:0) S LSUB="" F  S SDECIEN=$O(^SC("B",SDECNAM,SDECIEN)) Q:SDECIEN'>0  D  Q:(+MAXREC)&(SDECI'<MAXREC)
"RTN","SDEC32",47,0)
 .. Q:'+SDECIEN>0
"RTN","SDEC32",48,0)
 .. Q:'$D(^SC(+SDECIEN,0))
"RTN","SDEC32",49,0)
 .. Q:$$INACTIVE(+SDECIEN)
"RTN","SDEC32",50,0)
 .. Q:+$$GET1^DIQ(44,SDECIEN_",",50.01,"I")=1  ;OOS?
"RTN","SDEC32",51,0)
 .. S SDECINA=$$GET1^DIQ(44,SDECIEN_",",2505) ;INACTIVATE
"RTN","SDEC32",52,0)
 .. S SDECREA=$$GET1^DIQ(44,SDECIEN_",",2506) ;REACTIVATE
"RTN","SDEC32",53,0)
 .. S SDECNOD=^SC(SDECIEN,0)
"RTN","SDEC32",54,0)
 .. Q:$D(SDDUP(+SDECIEN))
"RTN","SDEC32",55,0)
 .. S SDDUP(+SDECIEN)=""
"RTN","SDEC32",56,0)
 .. S SDNAM=$P(SDECNOD,U)
"RTN","SDEC32",57,0)
 .. S SDECSCOD=$$GET1^DIQ(44,SDECIEN_",",8) ;STOP CODE
"RTN","SDEC32",58,0)
 .. ;Calculate default provider
"RTN","SDEC32",59,0)
 .. S SDECPRV=""
"RTN","SDEC32",60,0)
 .. I $D(^SC(SDECIEN,"PR")) D
"RTN","SDEC32",61,0)
 ... S SDECIEN1=0 F  S SDECIEN1=$O(^SC(SDECIEN,"PR",SDECIEN1)) Q:'+SDECIEN1  Q:SDECPRV]""  D
"RTN","SDEC32",62,0)
 .... S SDECNOD1=$G(^SC(SDECIEN,"PR",SDECIEN1,0))
"RTN","SDEC32",63,0)
 .... S:$P(SDECNOD1,U,2)="1" SDECPRV=$$GET1^DIQ(200,$P(SDECNOD1,U),.01)
"RTN","SDEC32",64,0)
 .... Q
"RTN","SDEC32",65,0)
 ... Q
"RTN","SDEC32",66,0)
 .. S LASTSUB=SDECNAM_"|"_SDECIEN
"RTN","SDEC32",67,0)
 .. S SDECI=SDECI+1
"RTN","SDEC32",68,0)
 .. S ^TMP("SDEC",$J,SDECI)=SDECIEN_U_SDNAM_U_SDECPRV_U_SDECSCOD_U_SDECINA_U_SDECREA_U_LASTSUB_$C(30)
"RTN","SDEC32",69,0)
 .. Q
"RTN","SDEC32",70,0)
 I SDECNAM="",SDECIEN="" S $P(^TMP("SDEC",$J,SDECI),U,7)=""  ;clear lastsub for last entry if finished
"RTN","SDEC32",71,0)
 S ^TMP("SDEC",$J,SDECI)=^TMP("SDEC",$J,SDECI)_$C(31)
"RTN","SDEC32",72,0)
 K SDDUP
"RTN","SDEC32",73,0)
 Q
"RTN","SDEC32",74,0)
 ;
"RTN","SDEC32",75,0)
CLINSET(SDECY,SDNOSLOT,SDIENS,SDECP,SDNOLET,MAXREC) ;Returns CLINIC SETUP PARAMETERS for clinics that are active in the HOSPITAL LOCATION file
"RTN","SDEC32",76,0)
 ;CLINSET(SDECY,SDNOSLOT,SDIENS,SDECP,SDNOLET)  external parameter tag is in SDEC
"RTN","SDEC32",77,0)
 ;INPUT:
"RTN","SDEC32",78,0)
 ; SDNOSLOT - no slots flag - 0=return availability  1=do not return availability
"RTN","SDEC32",79,0)
 ; SDIENS - IENs for individual hospital locations separated by pipes
"RTN","SDEC32",80,0)
 ; SDNOLET - flag to include clinics with no Recall Letter defined
"RTN","SDEC32",81,0)
 ;            in RECALL REMINDERS LETTERS file
"RTN","SDEC32",82,0)
 ;             0 = yes (include all clinics including those with no Recall Letter
"RTN","SDEC32",83,0)
 ;                     defined)  [default]
"RTN","SDEC32",84,0)
 ;             1 = no (only return clinics with a Recall Letter
"RTN","SDEC32",85,0)
 ;                    defined)
"RTN","SDEC32",86,0)
 ;Returns CLINIC SETUP PARAMETERS file entries for clinics which
"RTN","SDEC32",87,0)
 ;are active in ^SC
"RTN","SDEC32",88,0)
 ;MGH Added SDIENS as input parameter to for hospital location IENs
"RTN","SDEC32",89,0)
 ;MGH Added SDECP for partial name lookup
"RTN","SDEC32",90,0)
 ;RETURN
"RTN","SDEC32",91,0)
 ; Global Array in which each array entry contains the following Clinic data separated by ^:
"RTN","SDEC32",92,0)
 ; 1. HOSPITAL_LOCATION_ID
"RTN","SDEC32",93,0)
 ; 2. HOSPITAL_LOCATION
"RTN","SDEC32",94,0)
 ; 3. CREATE_VISIT
"RTN","SDEC32",95,0)
 ; 4. VISIT_SERVICE_CATEGORY
"RTN","SDEC32",96,0)
 ; 5. MULTIPLE_CLINIC_CODES_USED?
"RTN","SDEC32",97,0)
 ; 6. VISIT_PROVIDER_REQUIRED
"RTN","SDEC32",98,0)
 ; 7. GENERATE_PCCPLUS_FORMS?
"RTN","SDEC32",99,0)
 ; 8. MAX_OVERBOOKS
"RTN","SDEC32",100,0)
 ; 9. SDECDAT
"RTN","SDEC32",101,0)
 ;10. SDECDATN
"RTN","SDEC32",102,0)
 ;11. APPTLEN              - 1912   Appointment Length Numeric 10-240
"RTN","SDEC32",103,0)
 ;12. VAPPTLEN
"RTN","SDEC32",104,0)
 ;13. SLOTS
"RTN","SDEC32",105,0)
 ;14. PRIVUSERPRESENT_BOOL
"RTN","SDEC32",106,0)
 ;15. PROTECTED
"RTN","SDEC32",107,0)
 ;16. HOUR_DISPLAY_BEGIN   - 1914   Hour Clinic Display Begins
"RTN","SDEC32",108,0)
 ;17. DISPLAY_INCREMENTS   - 1917   Display increments per hour
"RTN","SDEC32",109,0)
 ;                                  1=60-MIN
"RTN","SDEC32",110,0)
 ;                                  2=30-MIN
"RTN","SDEC32",111,0)
 ;                                  4=15-MIN
"RTN","SDEC32",112,0)
 ;                                  3=20-MIN
"RTN","SDEC32",113,0)
 ;                                  6=10-MIN
"RTN","SDEC32",114,0)
 ;18. HOLIDAYS             - 1918.5 Schedule on Holidays?  Y=YES
"RTN","SDEC32",115,0)
 ;19. SPECIAL              - 1910 SPECIAL INSTRUCTIONS separated by $C(13,10)
"RTN","SDEC32",116,0)
 ;20. CLINIC_STOP          - Stop code Number pointer to CLINIC STOP file 40.7
"RTN","SDEC32",117,0)
 N SDA,SDAPLEN,SDAR,SDDATA,SDF,SDFIELDS,SDI,SDJ,SDK,SDSLOTS,SDVAPL,SDECI,SDECIEN,SDECNOD,SDECNAM,SDECINA,SDECREA,SDTMP  ;alb/sat 665 - add SDF
"RTN","SDEC32",118,0)
 N SDECCRV,SDECDAT,SDECDATN,SDECVSC,SDECMULT,SDECREQ,SDECPCC,SDECMOB,SDECHPRV,SDECPROT,SDECNAM,SDCNT,SDL,SDMAX          ;alb/sat 665 - add vars
"RTN","SDEC32",119,0)
 N SDARR1,SDREF,SDXT,SDV   ;alb/sat 672
"RTN","SDEC32",120,0)
 K ^TMP("SDEC",$J)
"RTN","SDEC32",121,0)
 S (SDCNT,SDMAX)=0
"RTN","SDEC32",122,0)
 S SDF=""
"RTN","SDEC32",123,0)
 S SDV=""   ;alb/sat 672
"RTN","SDEC32",124,0)
 S SDECY="^TMP(""SDEC"","_$J_")"
"RTN","SDEC32",125,0)
 S SDECI=0
"RTN","SDEC32",126,0)
 ;              1                          2                       3                  4
"RTN","SDEC32",127,0)
 S SDTMP="I00020HOSPITAL_LOCATION_ID^T00040HOSPITAL_LOCATION^T00030CREATE_VISIT^T00030VISIT_SERVICE_CATEGORY"
"RTN","SDEC32",128,0)
 ;                     5                                 6                             7
"RTN","SDEC32",129,0)
 S SDTMP=SDTMP_"^T00030MULTIPLE_CLINIC_CODES_USED?^T00030VISIT_PROVIDER_REQUIRED^T00030GENERATE_PCCPLUS_FORMS?"
"RTN","SDEC32",130,0)
 ;                     8                   9             10             11            12             13             14
"RTN","SDEC32",131,0)
 S SDTMP=SDTMP_"^T00030MAX_OVERBOOKS^T00030SDECDAT^T00030SDECDATN^T00030APPTLEN^T00030VAPPTLEN^T00030SLOTS^B00001PRIVUSERPRESENT_BOOL"
"RTN","SDEC32",132,0)
 ;                     15              16                       17                       18
"RTN","SDEC32",133,0)
 S SDTMP=SDTMP_"^B00001PROTECTED^T00030HOUR_DISPLAY_BEGIN^T00030DISPLAY_INCREMENTS^T00030HOLIDAYS^T00030SPECIAL^T00030CLINIC_STOP"
"RTN","SDEC32",134,0)
 ;                     21         22         23
"RTN","SDEC32",135,0)
 S SDTMP=SDTMP_"^T00030ABBR^T00030MORE^T00030DEFAULT_VIEW"   ;alb/sat 672 - add DEFAULT_VIEW
"RTN","SDEC32",136,0)
 S ^TMP("SDEC",$J,SDECI)=SDTMP_$C(30)
"RTN","SDEC32",137,0)
 ;
"RTN","SDEC32",138,0)
 S (SDECDAT,SDECDATN)=""
"RTN","SDEC32",139,0)
 S SDNOSLOT=$G(SDNOSLOT)
"RTN","SDEC32",140,0)
 S SDNOLET=$G(SDNOLET)
"RTN","SDEC32",141,0)
 S MAXREC=$G(MAXREC,50)
"RTN","SDEC32",142,0)
 ;MGH change made for individual locations
"RTN","SDEC32",143,0)
 I $G(SDIENS) D
"RTN","SDEC32",144,0)
 .F SDK=1:1:$L(SDIENS,"|") D
"RTN","SDEC32",145,0)
 ..S SDECIEN=$P(SDIENS,"|",SDK)
"RTN","SDEC32",146,0)
 ..D PROCESS(SDECIEN)
"RTN","SDEC32",147,0)
 ;MGH change made for partial name lookup
"RTN","SDEC32",148,0)
 I $G(SDECP)'="" D
"RTN","SDEC32",149,0)
 .;alb/sat 672 - begin modification; separate string and numeric lookup
"RTN","SDEC32",150,0)
 .S (SDECNAM,SDXT)=$$GETSUB^SDECU(SDECP)
"RTN","SDEC32",151,0)
 .;abbreviation as string
"RTN","SDEC32",152,0)
 .S SDF="ABBRSTR" D
"RTN","SDEC32",153,0)
 ..S SDREF="C" D PART Q
"RTN","SDEC32",154,0)
 .;abbreviation as numeric
"RTN","SDEC32",155,0)
 .S SDF="ABBRNUM",SDECNAM=SDXT_" " D
"RTN","SDEC32",156,0)
 ..S SDREF="C" D PART Q
"RTN","SDEC32",157,0)
 .;name as string
"RTN","SDEC32",158,0)
 .S SDF="FULLSTR",SDECNAM=SDXT D
"RTN","SDEC32",159,0)
 ..S SDREF="B" D PART Q
"RTN","SDEC32",160,0)
 .;name as numeric
"RTN","SDEC32",161,0)
 .S SDF="FULLNUM",SDECNAM=SDXT_" " D
"RTN","SDEC32",162,0)
 ..S SDREF="B" D PART Q
"RTN","SDEC32",163,0)
 .;alb/sat 672 - end modification; separate string and numeric lookup
"RTN","SDEC32",164,0)
 I $G(SDIENS)=""&($G(SDECP)="") S SDECIEN=0 F  S SDECIEN=$O(^SC(SDECIEN)) Q:SDECIEN'>0  D
"RTN","SDEC32",165,0)
 .D PROCESS(SDECIEN)
"RTN","SDEC32",166,0)
 S SDL=-1 F  S SDL=$O(SDAR(SDL)) Q:SDL=""  D
"RTN","SDEC32",167,0)
 .S SDI="" F  S SDI=$O(SDAR(SDL,SDI)) Q:SDI=""  D
"RTN","SDEC32",168,0)
 ..S SDJ="" F  S SDJ=$O(SDAR(SDL,SDI,SDJ)) Q:SDJ=""  D
"RTN","SDEC32",169,0)
 ...S SDTMP=SDAR(SDL,SDI,SDJ)
"RTN","SDEC32",170,0)
 ...S $P(SDTMP,U,22)=$S(+SDMAX:1,1:0)
"RTN","SDEC32",171,0)
 ...S SDECI=SDECI+1
"RTN","SDEC32",172,0)
 ...S ^TMP("SDEC",$J,SDECI)=SDTMP_$C(30)
"RTN","SDEC32",173,0)
 S ^TMP("SDEC",$J,SDECI)=^TMP("SDEC",$J,SDECI)_$C(31)
"RTN","SDEC32",174,0)
 Q
"RTN","SDEC32",175,0)
PART  ;partial name lookup  ;alb/sat 672
"RTN","SDEC32",176,0)
 Q:SDREF=""
"RTN","SDEC32",177,0)
 F  S SDECNAM=$O(^SC(SDREF,SDECNAM)) Q:SDECNAM'[SDECP  D  I SDCNT'<MAXREC S SDECNAM=$O(^SC(SDREF,SDECNAM)) S SDMAX=$S(+SDMAX:1,SDECNAM[SDECP:1,1:0) Q   ;alb/sat 658 - abbreviation lookup if characters length 7 or less
"RTN","SDEC32",178,0)
 .S SDECIEN=0 F  S SDECIEN=$O(^SC(SDREF,SDECNAM,SDECIEN)) Q:SDECIEN=""  D PROCESS(SDECIEN) I SDCNT'<MAXREC S SDMAX=+$O(^SC(SDREF,SDECNAM,SDECIEN)) Q  ;alb/sat 665 loop thru all entries
"RTN","SDEC32",179,0)
 Q
"RTN","SDEC32",180,0)
PROCESS(SDECIEN) ;Process an individual clinic
"RTN","SDEC32",181,0)
 ;MGH broke this out to do all locations or individual ones
"RTN","SDEC32",182,0)
 N SDECABR,SDECNAM,SDI,SDI1,SDDI,SDH,SDHDB,SDSP,SDSTOP
"RTN","SDEC32",183,0)
 Q:'$D(^SC(+SDECIEN,0))
"RTN","SDEC32",184,0)
 Q:$$INACTIVE(+SDECIEN)
"RTN","SDEC32",185,0)
 I SDNOLET,'$O(^SD(403.52,"B",+SDECIEN,0)) Q
"RTN","SDEC32",186,0)
 D RESCLIN1^SDEC01B(SDECIEN)
"RTN","SDEC32",187,0)
 S SDSLOTS=""
"RTN","SDEC32",188,0)
 K SDDATA,SDMSG
"RTN","SDEC32",189,0)
 S SDFIELDS=".01;1;2;8;50.01;1912;1913;1914;1917;1918;1918.5"_$S(SDNOSLOT:"",1:";1920*")_";2505;2506;2507"  ;alb/sat 665 - add abbreviation
"RTN","SDEC32",190,0)
 D GETS^DIQ(44,SDECIEN_",",SDFIELDS,"IE","SDDATA","SDMSG")
"RTN","SDEC32",191,0)
 Q:$G(SDDATA(44,SDECIEN_",",2,"I"))'="C"
"RTN","SDEC32",192,0)
 Q:+$G(SDDATA(44,SDECIEN_",",50.01,"I"))=1  ;OOS?
"RTN","SDEC32",193,0)
 Q:$D(SDARR1(SDECIEN))  ;alb/sat 672 - checking for duplicates
"RTN","SDEC32",194,0)
 S SDARR1(SDECIEN)=""   ;alb/sat 672 - checking for duplicates
"RTN","SDEC32",195,0)
 S SDA="SDDATA(44,"""_SDECIEN_","")"
"RTN","SDEC32",196,0)
 S SDAPLEN=@SDA@(1912,"E")    ;length of appointment
"RTN","SDEC32",197,0)
 S SDVAPL=@SDA@(1913,"I")     ;variable appointment length V means yes
"RTN","SDEC32",198,0)
 S SDHDB=@SDA@(1914,"E")      ;hour clinic display begins
"RTN","SDEC32",199,0)
 S:SDHDB="" SDHDB=8
"RTN","SDEC32",200,0)
 S SDDI=@SDA@(1917,"I")       ;display increments per hour
"RTN","SDEC32",201,0)
 S SDECINA=@SDA@(2505,"E") ;INACTIVATE
"RTN","SDEC32",202,0)
 S SDECREA=@SDA@(2506,"E") ;REACTIVATE
"RTN","SDEC32",203,0)
 S SDECDAT=@SDA@(2507,"I") ;DEFAULT APPOINTMENT TYPE ien
"RTN","SDEC32",204,0)
 S SDECDATN=@SDA@(2507,"E") ;DEFAULT APPOINTMENT TYPE name
"RTN","SDEC32",205,0)
 S SDSTOP=@SDA@(8,"I")      ;STOP CODE NUMBER
"RTN","SDEC32",206,0)
 S SDECNAM=@SDA@(.01,"E")
"RTN","SDEC32",207,0)
 S SDECABR=@SDA@(1,"E")  ;alb/sat 665
"RTN","SDEC32",208,0)
 S SDECNAM=$S((SDF["ABBR")&(@SDA@(1,"E")'=""):@SDA@(1,"E")_" ",1:"")_SDECNAM  ;alb/sat 665 - include abbr in name if found by C xref
"RTN","SDEC32",209,0)
 S SDECMOB=@SDA@(1918,"E")
"RTN","SDEC32",210,0)
 S SDH=@SDA@(1918.5,"I")
"RTN","SDEC32",211,0)
 S SDECCRV=1  ;$$GET1^DIQ(9009017.2,SDECIEN_",",.09)   ;Create Visit at Check-In?
"RTN","SDEC32",212,0)
 S SDECVSC=""  ;$$GET1^DIQ(9009017.2,SDECIEN_",",.12)   ;Visit Service Category
"RTN","SDEC32",213,0)
 S SDECMULT=1 ;$$GET1^DIQ(9009017.2,SDECIEN_",",.13)  ;Multiple Clinic codes used?
"RTN","SDEC32",214,0)
 S SDECREQ=1  ;$$GET1^DIQ(9009017.2,SDECIEN_",",.14)   ;Visit Provider Required
"RTN","SDEC32",215,0)
 S SDECPCC=0  ;$$GET1^DIQ(9009017.2,SDECIEN_",",.15)   ;Generate PCCPlus Forms?
"RTN","SDEC32",216,0)
 S:'SDNOSLOT SDSLOTS=$$GETSLOTS(.SDDATA)
"RTN","SDEC32",217,0)
 S SDECHPRV=$O(^SC(+SDECIEN,"SDPRIV",0))>0
"RTN","SDEC32",218,0)
 S SDECPROT=$G(^SC(+SDECIEN,"SDPROT"))="Y"
"RTN","SDEC32",219,0)
 S SDSP="" S SDI=0 F  S SDI=$O(^SC(+SDECIEN,"SI",SDI)) Q:SDI'>0  S SDI1=$G(^SC(+SDECIEN,"SI",SDI,0)) S:SDI1'="" SDSP=$S(SDSP'="":SDSP_$C(13,10),1:"")_SDI1
"RTN","SDEC32",220,0)
 S:SDECNAM'="" SDV=$$GET^XPAR("PKG.SCHEDULING","SDEC VS GUI CLINIC VIEW",SDECNAM,"B")   ;alb/sat 672
"RTN","SDEC32",221,0)
 S SDV=$S(SDV'="":$P(SDV,U,1),1:"W")  ;alb/sat 672
"RTN","SDEC32",222,0)
 ;       1         2         3         4         5          6         7         8
"RTN","SDEC32",223,0)
 S SDTMP=SDECIEN_U_SDECNAM_U_SDECCRV_U_SDECVSC_U_SDECMULT_U_SDECREQ_U_SDECPCC_U_SDECMOB
"RTN","SDEC32",224,0)
 ;               9         10         11        12           13       14         15
"RTN","SDEC32",225,0)
 S SDTMP=SDTMP_U_SDECDAT_U_SDECDATN_U_+SDAPLEN_U_SDVAPL_U_SDSLOTS_U_SDECHPRV_U_SDECPROT
"RTN","SDEC32",226,0)
 ;               16      17     18    19     20       21       22 23
"RTN","SDEC32",227,0)
 S SDTMP=SDTMP_U_SDHDB_U_SDDI_U_SDH_U_SDSP_U_SDSTOP_U_SDECABR_U_U_SDV    ;alb/sat 672 - add SDV
"RTN","SDEC32",228,0)
 S SDAR(SDF["FULL",SDECNAM,SDECIEN)=SDTMP
"RTN","SDEC32",229,0)
 S SDCNT=SDCNT+1
"RTN","SDEC32",230,0)
 Q
"RTN","SDEC32",231,0)
CHK(SDECP,SDECIEN)  ;alb/sat 665 - stop if 'this' record found in abbreviations  ;alb/sat 672 - removed
"RTN","SDEC32",232,0)
 Q
"RTN","SDEC32",233,0)
 N FND,SDR,SDX
"RTN","SDEC32",234,0)
 S FND=0
"RTN","SDEC32",235,0)
 S SDX=$$GETSUB^SDEC56(SDECP)
"RTN","SDEC32",236,0)
 F  S SDX=$O(^SC("C",SDX)) Q:SDX=""  Q:SDX'[SDECP  D  Q:+FND
"RTN","SDEC32",237,0)
 .S SDR=0 F  S SDR=$O(^SC("C",SDX,SDR)) Q:'+SDR  S FND=SDR=SDECIEN  Q:+FND
"RTN","SDEC32",238,0)
 Q FND
"RTN","SDEC32",239,0)
 ;
"RTN","SDEC32",240,0)
 ;
"RTN","SDEC32",241,0)
GETSLOTS(SDDATA) ;get slots - NUMBER OF PATIENTS in the AVAILABILITY multiple of file 44
"RTN","SDEC32",242,0)
 ;INPUT:
"RTN","SDEC32",243,0)
 ; SDDATA - array from GETS^DIQ against file 44 above to collect timeslots from
"RTN","SDEC32",244,0)
 N SDI,SDDT,SDSLOTS
"RTN","SDEC32",245,0)
 S SDSLOTS=""
"RTN","SDEC32",246,0)
 S SDI="" F  S SDI=$O(SDDATA(44.004,SDI)) Q:SDI=""  D
"RTN","SDEC32",247,0)
 .S SDDT=$P(SDI,",",2)                        ;get date
"RTN","SDEC32",248,0)
 .S SDDT=SDDT_"."_SDDATA(44.004,SDI,.01,"I")  ;get time
"RTN","SDEC32",249,0)
 .S SDDT=$$FMTE^XLFDT(SDDT)
"RTN","SDEC32",250,0)
 .S SDSLOTS=$S(SDSLOTS'="":SDSLOTS_"|",1:"")_SDDT_";;"_SDDATA(44.004,SDI,1,"E")
"RTN","SDEC32",251,0)
 Q SDSLOTS
"RTN","SDEC32",252,0)
 ;
"RTN","SDEC32",253,0)
INACTIVE(SDCL,SDDT) ;determine if clinic is active
"RTN","SDEC32",254,0)
 ; X=0=ACTIVE
"RTN","SDEC32",255,0)
 ; X=1=INACTIVE
"RTN","SDEC32",256,0)
 N SDNODI,N21,N25,X
"RTN","SDEC32",257,0)
 S SDDT=$G(SDDT) I SDDT="" S SDDT=DT
"RTN","SDEC32",258,0)
 S SDDT=$P(SDDT,".",1)
"RTN","SDEC32",259,0)
 S X=1
"RTN","SDEC32",260,0)
 S SDNODI=$G(^SC(SDCL,"I"))
"RTN","SDEC32",261,0)
 Q:SDNODI="" 0
"RTN","SDEC32",262,0)
 S N21=$P(SDNODI,U,1)   ;inactive date/time
"RTN","SDEC32",263,0)
 S N25=$P(SDNODI,U,2)   ;reactive date/time
"RTN","SDEC32",264,0)
 I (N21="") S X=0 Q X
"RTN","SDEC32",265,0)
 I (N21'="")&(N21>SDDT) S X=0 Q X
"RTN","SDEC32",266,0)
 I (N25'="")&(N25'>SDDT) S X=0 Q X
"RTN","SDEC32",267,0)
 Q X
"RTN","SDEC32",268,0)
 ;
"RTN","SDEC32",269,0)
PRIV(SDECY,CLINIEN,USER) ;IS this USER in the PRIVILEGED USER multiple for the clinic
"RTN","SDEC32",270,0)
 ;INPUT:
"RTN","SDEC32",271,0)
 ;  CLINIEN - pointer to HOSPITAL LOCATION file 44
"RTN","SDEC32",272,0)
 ;  USER    - pointer to NEW PERSON file 200
"RTN","SDEC32",273,0)
 ;RETURN:
"RTN","SDEC32",274,0)
 ;  A single boolean entry indicating that the USER is a PRIVILEGED USER for the clinic.
"RTN","SDEC32",275,0)
 ;    RETURNCODE - 0=NO; 1=YES; -1=error
"RTN","SDEC32",276,0)
 ;    MESSAGE
"RTN","SDEC32",277,0)
 N SDRET
"RTN","SDEC32",278,0)
 S SDECY="^TMP(""SDEC32"","_$J_",""PRIV"")"
"RTN","SDEC32",279,0)
 K @SDECY
"RTN","SDEC32",280,0)
 S @SDECY@(0)="T00030RETURNCODE^MESSAGE"_$C(30)
"RTN","SDEC32",281,0)
 S CLINIEN=$G(CLINIEN)
"RTN","SDEC32",282,0)
 I (CLINIEN="")!('$D(^SC(CLINIEN,0))) S @SDECY@(1)="-1^Invalid clinic ID."_$C(30,31) Q
"RTN","SDEC32",283,0)
 S USER=$G(USER)
"RTN","SDEC32",284,0)
 I (USER="")!('$D(^VA(200,USER,0))) S @SDECY@(1)="-1^Invalid user ID."_$C(30,31) Q
"RTN","SDEC32",285,0)
 S SDRET=$D(^SC(CLINIEN,"SDPRIV",USER,0))
"RTN","SDEC32",286,0)
 S $P(SDRET,U,2)=$S(SDRET=1:"YES",1:"NO")
"RTN","SDEC32",287,0)
 S @SDECY@(1)=SDRET_$C(30,31)
"RTN","SDEC32",288,0)
 Q
"RTN","SDEC32",289,0)
 ;
"RTN","SDEC32",290,0)
BOOKHLDY(SDECY,SDECCL) ;  Returns can book on holiday flag for a clinic.  12/1/17 wtc  679 
"RTN","SDEC32",291,0)
 ;
"RTN","SDEC32",292,0)
 ;  Returns value of field 1918.5 in file #44
"RTN","SDEC32",293,0)
 ;
"RTN","SDEC32",294,0)
 ;  SDECY  = return value
"RTN","SDEC32",295,0)
 ;  SDECCL = pointer to file #44
"RTN","SDEC32",296,0)
 ;
"RTN","SDEC32",297,0)
 S SDECY="" ;
"RTN","SDEC32",298,0)
 Q:$G(SDECCL)=""  ;
"RTN","SDEC32",299,0)
 S SDECY=$P($G(^SC(SDECCL,"SL")),"^",8) ;
"RTN","SDEC32",300,0)
 Q  ;
"RTN","SDEC32",301,0)
 ;
"RTN","SDEC53")
0^3^B224580253
"RTN","SDEC53",1,0)
SDEC53 ;ALB/SAT - VISTA SCHEDULING RPCS ;MAR 15, 2017
"RTN","SDEC53",2,0)
 ;;5.3;Scheduling;**627,658,679**;Aug 13, 1993;Build 15
"RTN","SDEC53",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified
"RTN","SDEC53",4,0)
 ;
"RTN","SDEC53",5,0)
 Q
"RTN","SDEC53",6,0)
 ;
"RTN","SDEC53",7,0)
PTSET(SDECY,INP) ;SET patient demographics
"RTN","SDEC53",8,0)
 ;PTSET(SDECY,INP...)  external parameter tag is in SDEC
"RTN","SDEC53",9,0)
 ;INPUT:
"RTN","SDEC53",10,0)
 ;  all input except DFN is optional
"RTN","SDEC53",11,0)
 ;  INP(1)  = DFN       - (required) pointer to PATIENT file
"RTN","SDEC53",12,0)
 ;  INP(2)  = RACE      -  pointer to the RACE file 10
"RTN","SDEC53",13,0)
 ;                         Each pipe piece contains the following pieces (Race1;;Method1|Race2;;Method2):
"RTN","SDEC53",14,0)
 ;                         RACE INFORMATION - pointer to the RACE file 10
"RTN","SDEC53",15,0)
 ;                         METHOD OF COLLECTION - pointer to the RACE AND ETHNICITY COLLECTION METHOD file 10.3
"RTN","SDEC53",16,0)
 ;  INP(3)  = ETHNICITY -  multiple Ethnicity separated by pipe |
"RTN","SDEC53",17,0)
 ;                         Each pipe piece contains the following ;; pieces:
"RTN","SDEC53",18,0)
 ;              ETHNICITY INFORMATION - pointer to the ETHNICITY file 10.2
"RTN","SDEC53",19,0)
 ;              METHOD OF COLLECTION - pointer to the ETHNICITY COLLECTION METHOD file 10.3
"RTN","SDEC53",20,0)
 ;  INP(4)  = ADDRESS1 - Street Address (Line 1) Free text 3-30 characters
"RTN","SDEC53",21,0)
 ;  INP(5)  = ADDRESS2 - Street Address (Line 2) Free text 3-30 characters
"RTN","SDEC53",22,0)
 ;  INP(6)  = ADDRESS3 - Street Address (Line 3) Free text 3-30 characters
"RTN","SDEC53",23,0)
 ;  INP(7)  = ZIP CODE - Zip+4 Free text of 5 or 9 digits
"RTN","SDEC53",24,0)
 ;  INP(8)  = CITY     - Free text 2-15 characters
"RTN","SDEC53",25,0)
 ;  INP(9)  = STATE    - pointer to STATE file 5
"RTN","SDEC53",26,0)
 ;  INP(10)  = COUNTRY  - pointer to COUNTRY CODE file 779.004
"RTN","SDEC53",27,0)
 ;  INP(11) = BAD ADDRESS INDICATOR - Valid Values:
"RTN","SDEC53",28,0)
 ;                  UNDELIVERABLE
"RTN","SDEC53",29,0)
 ;                  HOMELESS
"RTN","SDEC53",30,0)
 ;                  OTHER
"RTN","SDEC53",31,0)
 ;                  ADDRESS NOT FOUND
"RTN","SDEC53",32,0)
 ;  INP(12) = PHONE (RESIDENCE) - free text 4-20 characters  (Phone #1)
"RTN","SDEC53",33,0)
 ;  INP(13) = PHONE (WORK)      - free text 4-20 characters
"RTN","SDEC53",34,0)
 ;  INP(14) = COUNTY name - name of a county from the COUNTY multiple within the STATE file (#5)
"RTN","SDEC53",35,0)
 ;  INP(15) = PHONE NUMBER [CELLULAR]  4-20 characters
"RTN","SDEC53",36,0)
 ;  INP(16) = Patient Email Address - 3-50 characters containing 1 @
"RTN","SDEC53",37,0)
 ;  INP(17) = Marital Status - pointer to MARITAL STATUS file (#11)
"RTN","SDEC53",38,0)
 ;  INP(18) = Religious Preference - pointer to RELIGION file (#13)
"RTN","SDEC53",39,0)
 ;  INP(19) = Patient Temporary Address Active? (.12105) Y:YES N:NO
"RTN","SDEC53",40,0)
 ;            Temporary Address data can only be edited if INP(19) is 'Y' or the 'TEMPORARY ADDRESS ACTIVE?' field is already defined as 'Y'.
"RTN","SDEC53",41,0)
 ;  INP(20) = Patient Temporary Address Line 1 (.1211)
"RTN","SDEC53",42,0)
 ;  INP(21) = Patient Temporary Address Line 2 (.1212)
"RTN","SDEC53",43,0)
 ;  INP(22) = Patient Temporary Address Line 3 (.1213)
"RTN","SDEC53",44,0)
 ;  INP(23) = Patient Temporary City (.1214)
"RTN","SDEC53",45,0)
 ;  INP(24) = Patient Temporary State (.1215)
"RTN","SDEC53",46,0)
 ;  INP(25) = Patient Temporary Zip (.1216)
"RTN","SDEC53",47,0)
 ;  INP(26) = Patient Temporary Zip+4 (.12112)
"RTN","SDEC53",48,0)
 ;  INP(27) = Patient Temporary Country (.1223)
"RTN","SDEC53",49,0)
 ;  INP(28) = Patient Temporary County (.12111)
"RTN","SDEC53",50,0)
 ;  INP(29) = Patient Temporary Phone (.1219)  (also referred to as Phone #2)
"RTN","SDEC53",51,0)
 ;  INP(30) = Patient Temporary Address Start Date (.1217) in external format (no time)
"RTN","SDEC53",52,0)
 ;  INP(31) = Patient Temporary Address End Date (.1218) in external format (no time)
"RTN","SDEC53",53,0)
 ;RETURN:
"RTN","SDEC53",54,0)
 ; Successful Return:
"RTN","SDEC53",55,0)
 ;   Single Value return in the format "0^"
"RTN","SDEC53",56,0)
 ; Caught Exception Return:
"RTN","SDEC53",57,0)
 ;   A single entry in the Global Array in the format "-1^<error text>"
"RTN","SDEC53",58,0)
 ;   "T00020RETURNCODE^T00100TEXT"
"RTN","SDEC53",59,0)
 ; Unexpected Exception Return:
"RTN","SDEC53",60,0)
 ;     Handled by the RPC Broker.
"RTN","SDEC53",61,0)
 ;     M errors are trapped by the use of M and Kernel error handling.
"RTN","SDEC53",62,0)
 ;     The RPC execution stops and the RPC Broker sends the error generated
"RTN","SDEC53",63,0)
 ;     text back to the client.
"RTN","SDEC53",64,0)
 N %DT,DIC,RET,X,Y
"RTN","SDEC53",65,0)
 N ADD1,ADD2,ADD3,BADADD,CITY,COUNTRY,DA,DIK,DFN,ERR,ETH,ETHN,ETHN1,PHONER,PHONEW,RACE,STATE,ZIP
"RTN","SDEC53",66,0)
 N SDECI,SDFDA,SDI,SDIN,SDMSG,RACEN,RACEN1
"RTN","SDEC53",67,0)
 S ERR=0
"RTN","SDEC53",68,0)
 S SDECI=0
"RTN","SDEC53",69,0)
 S SDECY="^TMP(""SDEC53"","_$J_",""PTSET"")"
"RTN","SDEC53",70,0)
 K @SDECY
"RTN","SDEC53",71,0)
 ; data header
"RTN","SDEC53",72,0)
 S @SDECY@(0)="T00030RETURNCODE^T00030TEXT"_$C(30)
"RTN","SDEC53",73,0)
 ;check for valid Patient
"RTN","SDEC53",74,0)
 S DFN=$G(INP(1))
"RTN","SDEC53",75,0)
 I '+DFN D ERR1^SDECERR(-1,"Invalid Patient ID.",SDECI,SDECY) Q
"RTN","SDEC53",76,0)
 I '$D(^DPT(DFN,0)) D ERR1^SDECERR(-1,"Invalid Patient ID.",SDECI,SDECY) Q
"RTN","SDEC53",77,0)
 ;alb/sat 658 - lock patient: There are multiple variations used to lock a patient
"RTN","SDEC53",78,0)
 L +^TMP(DFN,"REGISTRATION IN PROGRESS"):5  I '$T S @SDECY@(1)="-1^Patient is being edited."_$C(30,31) G XIT
"RTN","SDEC53",79,0)
 L +^DPT(DFN):5  I '$T S @SDECY@(1)="-1^Patient is being edited."_$C(30,31) L -^TMP(DFN,"REGISTRATION IN PROGRESS") G XIT
"RTN","SDEC53",80,0)
 S SDFDA="SDFDA(2,DFN_"","")"
"RTN","SDEC53",81,0)
 ;address line 1
"RTN","SDEC53",82,0)
 S INP(4)=$G(INP(4))
"RTN","SDEC53",83,0)
 I INP(4)'="" D
"RTN","SDEC53",84,0)
 .S X=INP(4)
"RTN","SDEC53",85,0)
 .I X'="@",(X[""""!($A(X)=45))!($L(X)>35!($L(X)<3)) S @SDECY@(1)="-1^Invalid street address [line 1] "_INP(4)_"."_$C(30,31),ERR=1 Q
"RTN","SDEC53",86,0)
 .S @SDFDA@(.111)=INP(4)
"RTN","SDEC53",87,0)
 G:ERR EXIT  ;alb/sat 658
"RTN","SDEC53",88,0)
 ;address line 2
"RTN","SDEC53",89,0)
 S INP(5)=$G(INP(5))
"RTN","SDEC53",90,0)
 I INP(5)'="" D
"RTN","SDEC53",91,0)
 .N X S X=INP(5)
"RTN","SDEC53",92,0)
 .I X'="@",(X[""""!($A(X)=45))!($L(X)>30!($L(X)<3)) S @SDECY@(1)="-1^Invalid street address [line 2] "_INP(5)_"."_$C(30,31),ERR=1 Q
"RTN","SDEC53",93,0)
 .S @SDFDA@(.112)=INP(5)
"RTN","SDEC53",94,0)
 G:ERR EXIT  ;alb/sat 658
"RTN","SDEC53",95,0)
 ;address line 3
"RTN","SDEC53",96,0)
 S INP(6)=$G(INP(6))
"RTN","SDEC53",97,0)
 I INP(6)'="" D
"RTN","SDEC53",98,0)
 .N X S X=INP(6)
"RTN","SDEC53",99,0)
 .I X'="@",(X[""""!($A(X)=45))!($L(X)>30!($L(X)<3)) S @SDECY@(1)="-1^Invalid street address [line 3] "_INP(6)_"."_$C(30,31),ERR=1 Q
"RTN","SDEC53",100,0)
 .S @SDFDA@(.113)=INP(6)
"RTN","SDEC53",101,0)
 G:ERR EXIT  ;alb/sat 658
"RTN","SDEC53",102,0)
 ;zip
"RTN","SDEC53",103,0)
 S ZIP=$G(INP(7))
"RTN","SDEC53",104,0)
 I ZIP'="@",ZIP'="" N X S X=ZIP D ZIPIN^VAFADDR S X=$G(X),ZIP=X I $L(ZIP)'=5,$L(ZIP)'=9 S @SDECY@(1)="-1^Invalid ZIP."_$C(30,31) G EXIT  ;alb/sat 658
"RTN","SDEC53",105,0)
 S:ZIP'="" @SDFDA@(.1112)=ZIP
"RTN","SDEC53",106,0)
 ;city
"RTN","SDEC53",107,0)
 S INP(8)=$G(INP(8))
"RTN","SDEC53",108,0)
 I INP(8)'="" D
"RTN","SDEC53",109,0)
 .S X=INP(8)
"RTN","SDEC53",110,0)
 .I $L(X)>15 S ZIP=$S($L(INP(7))'="":INP(7),1:$$GET1^DIQ(2,DFN_",",.1112)) S:ZIP'="" X=$$CITYAB^SDECDEM(ZIP,X)
"RTN","SDEC53",111,0)
 .I X'="@",$L(X)>15!($L(X)<2) S @SDECY@(1)="-1^City name must be 2-15 characters. "_INP(8)_"."_$C(30,31),ERR=1 Q   ;alb/jsm 658 chk for "@"
"RTN","SDEC53",112,0)
 .S @SDFDA@(.114)=X
"RTN","SDEC53",113,0)
 G:ERR EXIT  ;alb/sat 658
"RTN","SDEC53",114,0)
 ;state
"RTN","SDEC53",115,0)
 S STATE=$G(INP(9))
"RTN","SDEC53",116,0)
 I STATE'="@",STATE'="" I '$D(^DIC(5,+STATE,0)) S @SDECY@(1)="-1^Invalid State ID."_$C(30,31) G EXIT  ;alb/sat/jsm 658 chk for "@"
"RTN","SDEC53",117,0)
 S:STATE'="" @SDFDA@(.115)=STATE
"RTN","SDEC53",118,0)
 ;country
"RTN","SDEC53",119,0)
 S COUNTRY=$G(INP(10))
"RTN","SDEC53",120,0)
 I COUNTRY'="@",COUNTRY'="" I '$D(^HL(779.004,+COUNTRY,0)) S @SDECY@(1)="-1^Invalid COUNTRY ID."_$C(30,31) G EXIT  ;alb/sat/jsm 658 chk for "@"
"RTN","SDEC53",121,0)
 S:COUNTRY'="" @SDFDA@(.1173)=COUNTRY
"RTN","SDEC53",122,0)
 ;bad address
"RTN","SDEC53",123,0)
 S BADADD=$G(INP(11))
"RTN","SDEC53",124,0)
 I BADADD'="" S:BADADD'="@" BADADD=$S(BADADD="UNDELIVERABLE":1,BADADD="HOMELESS":2,BADADD="OTHER":3,BADADD="ADDRESS NOT FOUND":4,1:"")
"RTN","SDEC53",125,0)
 S:BADADD'="" @SDFDA@(.121)=BADADD
"RTN","SDEC53",126,0)
 ;phone [residence]
"RTN","SDEC53",127,0)
 S INP(12)=$G(INP(12))
"RTN","SDEC53",128,0)
 I INP(12)'="" D
"RTN","SDEC53",129,0)
 .I INP(12)'="@" D
"RTN","SDEC53",130,0)
 ..I $L(INP(12))>20!($L(INP(12))<4) S @SDECY@(1)="-1^Phone Number [Residence] must be 4-20 characters. "_INP(12)_$C(30,31),ERR=1 Q
"RTN","SDEC53",131,0)
 ..;I 'ERR N CTR,CHR,VAR S VAR=INP(12) F CTR=1:1:20 S CHR=$E(VAR,CTR) I ("1234567890 -()."'[CHR) S ERR=1
"RTN","SDEC53",132,0)
 ..;I ERR S @SDECY@(1)="-1^Invalid Phone Number [Residence] "_INP(12)_$C(30,31),ERR=1 Q
"RTN","SDEC53",133,0)
 .I 'ERR S @SDFDA@(.131)=INP(12)
"RTN","SDEC53",134,0)
 G:ERR EXIT  ;alb/sat 658
"RTN","SDEC53",135,0)
 ;phone [work]
"RTN","SDEC53",136,0)
 S INP(13)=$G(INP(13))
"RTN","SDEC53",137,0)
 I INP(13)'="" D
"RTN","SDEC53",138,0)
 .I INP(13)'="@" D
"RTN","SDEC53",139,0)
 ..I $L(INP(13))>20!($L(INP(13))<4) S @SDECY@(1)="-1^Phone Number [work] must be 4-20 characters. "_INP(13)_$C(30,31),ERR=1 Q
"RTN","SDEC53",140,0)
 ..;I 'ERR N CTR,CHR,VAR S VAR=INP(13) F CTR=1:1:20 S CHR=$E(VAR,CTR) I ("1234567890 -()."'[CHR) S ERR=1
"RTN","SDEC53",141,0)
 ..;I ERR S @SDECY@(1)="-1^Invalid Phone Number [work] "_INP(13)_$C(30,31),ERR=1 Q
"RTN","SDEC53",142,0)
 .I 'ERR S @SDFDA@(.132)=INP(13)
"RTN","SDEC53",143,0)
 G:ERR EXIT  ;alb/sat 658
"RTN","SDEC53",144,0)
 ;pager number .135  ;alb/sat 658
"RTN","SDEC53",145,0)
 S INP(32)=$G(INP(32))
"RTN","SDEC53",146,0)
 I INP(32)'="" D
"RTN","SDEC53",147,0)
 .IF INP(32)'="@" D
"RTN","SDEC53",148,0)
 ..S X=INP(32) I $L(X)>20!($L(X)<4) S @SDECY@(1)="-1^Pager must be 4-20 characters. "_INP(32)_$C(30,31),ERR=1 Q
"RTN","SDEC53",149,0)
 ..I $D(X) N CTR,CHR,VAR S VAR=X F CTR=1:1:20 S CHR=$E(VAR,CTR) I ("1234567890 -()."'[CHR) S @SDECY@(1)="-1^Pager can only contain these characters: 1234567890 -()."_$C(30,31),ERR=1 Q
"RTN","SDEC53",150,0)
 ..S INP(32)=$G(X)
"RTN","SDEC53",151,0)
 .I 'ERR S @SDFDA@(.135)=INP(32)
"RTN","SDEC53",152,0)
 G:ERR EXIT  ;alb/sat 658
"RTN","SDEC53",153,0)
 ;county
"RTN","SDEC53",154,0)
 S INP(14)=$G(INP(14))
"RTN","SDEC53",155,0)
 I INP(14)'="" D
"RTN","SDEC53",156,0)
 .I INP(14)'="@" D  ;alb/jsm 658
"RTN","SDEC53",157,0)
 ..N X,Z0,STNM
"RTN","SDEC53",158,0)
 ..S Z0=$S(STATE'="":STATE,$D(^DPT(DFN,.11)):+$P(^DPT(DFN,.11),"^",5),1:0)
"RTN","SDEC53",159,0)
 ..I 'Z0 S @SDECY@(1)="-1^A state must be defined to update the County."_$C(30,31),ERR=1 Q
"RTN","SDEC53",160,0)
 ..; ajf/ patch 679 / Corrected display of state name, add "O" and removed "E" from DIC(0)
"RTN","SDEC53",161,0)
 ..I $D(^DIC(5,Z0,1,0)) S STNM=$P(^DIC(5,Z0,0),"^",1),DIC="^DIC(5,Z0,1,",DIC(0)="QMO",X=INP(14) D ^DIC S X=+Y I Y'>0 S @SDECY@(1)="-1^County "_INP(14)_" does not belong to state "_STNM_"."_$C(30,31),ERR=1 Q
"RTN","SDEC53",162,0)
 ..S INP(14)=X
"RTN","SDEC53",163,0)
 .I 'ERR S @SDFDA@(.117)=INP(14)
"RTN","SDEC53",164,0)
 G:ERR EXIT  ;alb/sat
"RTN","SDEC53",165,0)
 ;phone [cell]
"RTN","SDEC53",166,0)
 S INP(15)=$G(INP(15))
"RTN","SDEC53",167,0)
 I INP(15)'="" D
"RTN","SDEC53",168,0)
 .I INP(15)'="@" D
"RTN","SDEC53",169,0)
 ..I $L(INP(15))>20!($L(INP(15))<4) S @SDECY@(1)="-1^Phone Number [Cellular] must be 4-20 characters. "_INP(15)_$C(30,31),ERR=1 Q
"RTN","SDEC53",170,0)
 ..I 'ERR N CTR,CHR,VAR S VAR=INP(15) F CTR=1:1:20 S CHR=$E(VAR,CTR) I ("1234567890 -()."'[CHR) S ERR=1
"RTN","SDEC53",171,0)
 ..I ERR S @SDECY@(1)="-1^Invalid Phone Number [Cellular] "_INP(15)_$C(30,31),ERR=1 Q
"RTN","SDEC53",172,0)
 .I 'ERR S @SDFDA@(.134)=INP(15)
"RTN","SDEC53",173,0)
 G:ERR EXIT  ;alb/sat
"RTN","SDEC53",174,0)
 ;email
"RTN","SDEC53",175,0)
 S INP(16)=$G(INP(16))
"RTN","SDEC53",176,0)
 I INP(16)'="" D
"RTN","SDEC53",177,0)
 .I INP(16)'="@" D
"RTN","SDEC53",178,0)
 ..N X S X=INP(16)
"RTN","SDEC53",179,0)
 ..I $L(X)>50!($L(X)<3)!'(X?1.E1"@"1.E1"."1.E) S @SDECY@(1)="-1^Invalid email address "_INP(16)_$C(30,31),ERR=1
"RTN","SDEC53",180,0)
 .I 'ERR S @SDFDA@(.133)=INP(16)
"RTN","SDEC53",181,0)
 G:ERR EXIT  ;alb/sat
"RTN","SDEC53",182,0)
 ;marital status
"RTN","SDEC53",183,0)
 S INP(17)=$G(INP(17))
"RTN","SDEC53",184,0)
 I INP(17)'="" D
"RTN","SDEC53",185,0)
 .I '$D(^DIC(11,INP(17),0)) S @SDECY@(1)="-1^Invalid marital status ID "_INP(17)_$C(30,31),ERR=1
"RTN","SDEC53",186,0)
 .I 'ERR S @SDFDA@(.05)=INP(17)
"RTN","SDEC53",187,0)
 G:ERR EXIT  ;alb/sat
"RTN","SDEC53",188,0)
 ;religious preference
"RTN","SDEC53",189,0)
 S INP(18)=$G(INP(18))
"RTN","SDEC53",190,0)
 I INP(18)'="" D
"RTN","SDEC53",191,0)
 .I '$D(^DIC(13,INP(18),0)) S @SDECY@(1)="-1^Invalid religious preference ID "_INP(18)_$C(30,31),ERR=1
"RTN","SDEC53",192,0)
 .I 'ERR S @SDFDA@(.08)=INP(18)
"RTN","SDEC53",193,0)
 G:ERR EXIT  ;alb/sat
"RTN","SDEC53",194,0)
 ;temporary address active?
"RTN","SDEC53",195,0)
 S INP(19)=$G(INP(19))
"RTN","SDEC53",196,0)
 I INP(19)'="" D
"RTN","SDEC53",197,0)
 .N X S X=INP(19)
"RTN","SDEC53",198,0)
 .S X=$S(X="Y":"Y",X="YES":"Y",X="N":"N",X="NO":"N",1:"")
"RTN","SDEC53",199,0)
 .I X="" S @SDECY@(1)="-1^Invalid 'temporary address active' flag "_INP(19)_$C(30,31),ERR=1
"RTN","SDEC53",200,0)
 .I 'ERR S (INP(19),@SDFDA@(.12105))=X
"RTN","SDEC53",201,0)
 G:ERR EXIT  ;alb/sat
"RTN","SDEC53",202,0)
 ;temporary address line 1
"RTN","SDEC53",203,0)
 S INP(20)=$G(INP(20))
"RTN","SDEC53",204,0)
 I INP(20)'="" D
"RTN","SDEC53",205,0)
 .N X S X=INP(20)
"RTN","SDEC53",206,0)
 .I X'="@",(X[""""!($A(X)=45))!($L(X)>30!($L(X)<2)) S @SDECY@(1)="-1^Invalid temporary street [line 1] "_INP(20)_"."_$C(30,31),ERR=1 Q
"RTN","SDEC53",207,0)
 .I X'="@",INP(19)'="Y",$S(INP(19)="N":1,'$D(^DPT(DFN,.121)):1,$P(^(.121),U,9)'="Y":1,1:0) S (X,INP(20))=""  ; S @SDECY@(1)="-1^Requirement for Temporary Address data not indicated...NO EDITING!",ERR=1 Q
"RTN","SDEC53",208,0)
 .I INP(20)'="",'ERR S @SDFDA@(.1211)=INP(20)
"RTN","SDEC53",209,0)
 G:ERR EXIT  ;alb/sat
"RTN","SDEC53",210,0)
 ;temporary address line 2
"RTN","SDEC53",211,0)
 S INP(21)=$G(INP(21))
"RTN","SDEC53",212,0)
 I INP(21)'="" D
"RTN","SDEC53",213,0)
 .N X S X=INP(21)
"RTN","SDEC53",214,0)
 .I X'="@",(X[""""!($A(X)=45))!($L(X)>30!($L(X)<2)) S @SDECY@(1)="-1^Invalid temporary street [line 2] "_INP(21)_"."_$C(30,31),ERR=1 Q
"RTN","SDEC53",215,0)
 .I X'="@",INP(19)'="Y",$S(INP(19)="N":1,'$D(^DPT(DFN,.121)):1,$P(^(.121),U,9)'="Y":1,1:0) S (X,INP(21))=""  ; S @SDECY@(1)="-1^Requirement for Temporary Address data not indicated...NO EDITING!",ERR=1 Q
"RTN","SDEC53",216,0)
 .I INP(21)'="",'ERR S @SDFDA@(.1212)=INP(21)
"RTN","SDEC53",217,0)
 G:ERR EXIT  ;alb/sat
"RTN","SDEC53",218,0)
 ;temporary address line 3
"RTN","SDEC53",219,0)
 S INP(22)=$G(INP(22))
"RTN","SDEC53",220,0)
 I INP(22)'="" D
"RTN","SDEC53",221,0)
 .N X S X=INP(22)
"RTN","SDEC53",222,0)
 .I X'="@",(X[""""!($A(X)=45))!($L(X)>30!($L(X)<2)) S @SDECY@(1)="-1^Invalid temporary street [line 3] "_INP(22)_"."_$C(30,31),ERR=1 Q
"RTN","SDEC53",223,0)
 .I X'="@",INP(19)'="Y",$S(INP(19)="N":1,'$D(^DPT(DFN,.121)):1,$P(^(.121),U,9)'="Y":1,1:0) S (X,INP(22))=""  ; S @SDECY@(1)="-1^Requirement for Temporary Address data not indicated...NO EDITING!",ERR=1 Q
"RTN","SDEC53",224,0)
 .I INP(22)'="",'ERR S @SDFDA@(.1213)=INP(22)
"RTN","SDEC53",225,0)
 G:ERR EXIT  ;alb/sat
"RTN","SDEC53",226,0)
 ;temporary city
"RTN","SDEC53",227,0)
 S INP(23)=$G(INP(23))
"RTN","SDEC53",228,0)
 I INP(23)'="" D
"RTN","SDEC53",229,0)
 .S X=INP(23)
"RTN","SDEC53",230,0)
 .I $L(X)>30 S ZIP=$S($L(INP(25))'="":INP(25),1:$$GET1^DIQ(2,DFN_",",.12112)) S:ZIP'="" X=$$CITYAB^SDECDEM(ZIP,X)
"RTN","SDEC53",231,0)
 .I X'="@",$L(X)>30!($L(X)<2) S @SDECY@(1)="-1^Invalid temporary city "_INP(23)_"."_$C(30,31),ERR=1 Q  ;alb/jsm 658
"RTN","SDEC53",232,0)
 .I X'="@",INP(19)'="Y",$S(INP(19)="N":1,'$D(^DPT(DFN,.121)):1,$P(^(.121),U,9)'="Y":1,1:0) S (X,INP(23))=""  ; S @SDECY@(1)="-1^Requirement for Temporary Address data not indicated...NO EDITING!",ERR=1 Q
"RTN","SDEC53",233,0)
 .I INP(23)'="",'ERR S @SDFDA@(.1214)=X
"RTN","SDEC53",234,0)
 G:ERR EXIT  ;alb/sat 658
"RTN","SDEC53",235,0)
 ;temporary state
"RTN","SDEC53",236,0)
 S INP(24)=$G(INP(24))
"RTN","SDEC53",237,0)
 I INP(24)'="" D
"RTN","SDEC53",238,0)
 .I INP(24)'="@",'$D(^DIC(5,INP(24),0)) S @SDECY@(1)="-1^Invalid temporary State id "_INP(24)_"."_$C(30,31),ERR=1 Q  ;alb/jsm 658
"RTN","SDEC53",239,0)
 .I INP(24)'="@",INP(19)'="Y",$S(INP(19)="N":1,'$D(^DPT(DFN,.121)):1,$P(^(.121),U,9)'="Y":1,1:0) S INP(24)=""  ; S @SDECY@(1)="-1^Requirement for Temporary Address data not indicated...NO EDITING!",ERR=1 Q
"RTN","SDEC53",240,0)
 .I INP(24)'="",'ERR S @SDFDA@(.1215)=INP(24)
"RTN","SDEC53",241,0)
 G:ERR EXIT  ;alb/sat
"RTN","SDEC53",242,0)
 ;temporary zip
"RTN","SDEC53",243,0)
 S INP(25)=$G(INP(25))
"RTN","SDEC53",244,0)
 I INP(25)'="" D
"RTN","SDEC53",245,0)
 .N X S X=INP(25)
"RTN","SDEC53",246,0)
 .D ZIPIN^VAFADDR S X=$G(X)
"RTN","SDEC53",247,0)
 .I X'="@",X[""""!($A(X)=45),$L(X)>5!($L(X)<5)!'(X?5N) S @SDECY@(1)="-1^Invalid Temporary Zip code "_INP(25)_"."_$C(30,31),ERR=1 Q
"RTN","SDEC53",248,0)
 .I X'="@",INP(19)'="Y",$S(INP(19)="N":1,'$D(^DPT(DFN,.121)):1,$P(^(.121),U,9)'="Y":1,1:0) S (X,INP(25))=""  ; S @SDECY@(1)="-1^Requirement for Temporary Address data not indicated...NO EDITING!",ERR=1 Q
"RTN","SDEC53",249,0)
 .I INP(25)'="",'ERR S @SDFDA@(.1216)=INP(25)
"RTN","SDEC53",250,0)
 G:ERR EXIT  ;alb/sat
"RTN","SDEC53",251,0)
 ;temporary zip+4
"RTN","SDEC53",252,0)
 S INP(26)=$G(INP(26))
"RTN","SDEC53",253,0)
 I INP(26)'="" D
"RTN","SDEC53",254,0)
 .I INP(26)'="@" D  ;alb/jsm 658
"RTN","SDEC53",255,0)
 ..N X S X=INP(26)
"RTN","SDEC53",256,0)
 ..I X'="@",X[""""!($A(X)=45),$L(X)>20!($L(X)<5) S @SDECY@(1)="-1^Invalid Temporary Zip+4 "_INP(26)_"."_$C(30,31),ERR=1 Q
"RTN","SDEC53",257,0)
 ..I X'="@" D ZIPIN^VAFADDR S X=$G(X) I X="" S @SDECY@(1)="-1^Invalid Temporary Zip+4 "_INP(26)_"."_$C(30,31),ERR=1 Q
"RTN","SDEC53",258,0)
 ..I X'="@",INP(19)'="Y",$S(INP(19)="N":1,'$D(^DPT(DFN,.121)):1,$P(^(.121),U,9)'="Y":1,1:0) S (X,INP(26))=""  ; S @SDECY@(1)="-1^Requirement for Temporary Address data not indicated...NO EDITING!",ERR=1 Q
"RTN","SDEC53",259,0)
 .I 'ERR,INP(26)'="" S @SDFDA@(.12112)=INP(26)
"RTN","SDEC53",260,0)
 G:ERR EXIT  ;alb/sat 658
"RTN","SDEC53",261,0)
 ;temporary country
"RTN","SDEC53",262,0)
 S INP(27)=$G(INP(27))
"RTN","SDEC53",263,0)
 I INP(27)'="" D
"RTN","SDEC53",264,0)
 .I INP(27)'="@",'$D(^HL(779.004,INP(27),0)) S @SDECY@(1)="-1^Invalid temporary country ID "_INP(27)_"."_$C(30,31),ERR=1 Q  ;alb/jsm 658
"RTN","SDEC53",265,0)
 .S @SDFDA@(.1223)=INP(27)
"RTN","SDEC53",266,0)
 G:ERR EXIT  ;alb/sat 658
"RTN","SDEC53",267,0)
 ;temporary county
"RTN","SDEC53",268,0)
 S INP(28)=$G(INP(28))
"RTN","SDEC53",269,0)
 I INP(28)'="" D
"RTN","SDEC53",270,0)
 .I INP(28)'="@" D  ;alb/jsm 658
"RTN","SDEC53",271,0)
 ..N X,Z0
"RTN","SDEC53",272,0)
 ..S Z0=$S(INP(24)'="":INP(24),$D(^DPT(DFN,.121)):+$P(^DPT(DFN,.121),"^",5),1:0)
"RTN","SDEC53",273,0)
 ..I 'Z0 S @SDECY@(1)="-1^A state must be defined to update the Temporary County."_$C(30,31),ERR=1 Q
"RTN","SDEC53",274,0)
 ..; ajf/ patch 679 / Corrected display of state name, add "O" and removed "E" from DIC(0)
"RTN","SDEC53",275,0)
 ..I $D(^DIC(5,Z0,1,0)) S STNM=$P(^DIC(5,Z0,0),"^",1),DIC="^DIC(5,Z0,1,",DIC(0)="QMO",X=INP(28) D ^DIC S X=+Y I Y'>0 S @SDECY@(1)="-1^Temporary County "_INP(28)_" does not belong to state "_STNM_"."_$C(30,31),ERR=1
"RTN","SDEC53",276,0)
 ..S INP(28)=X
"RTN","SDEC53",277,0)
 .I 'ERR S @SDFDA@(.12111)=INP(28)
"RTN","SDEC53",278,0)
 G:ERR EXIT  ;alb/sat 658
"RTN","SDEC53",279,0)
 ;temporary phone
"RTN","SDEC53",280,0)
 S INP(29)=$G(INP(29))
"RTN","SDEC53",281,0)
 I INP(29)'="" D
"RTN","SDEC53",282,0)
 .I INP(29)'="@" D
"RTN","SDEC53",283,0)
 ..I $L(INP(29))>20!($L(INP(29))<4) S @SDECY@(1)="-1^Temporary Phone must be 4-20 characters. "_INP(29)_$C(30,31),ERR=1 Q
"RTN","SDEC53",284,0)
 ..;I 'ERR N CTR,CHR,VAR S VAR=INP(29) F CTR=1:1:20 S CHR=$E(VAR,CTR) I ("1234567890 -()."'[CHR) S ERR=1
"RTN","SDEC53",285,0)
 ..;I ERR S @SDECY@(1)="-1^Invalid Temporary Phone Number "_INP(29)_$C(30,31),ERR=1 Q
"RTN","SDEC53",286,0)
 .I 'ERR S @SDFDA@(.1219)=INP(29)
"RTN","SDEC53",287,0)
 G:ERR EXIT  ;alb/sat 658
"RTN","SDEC53",288,0)
 ;temporary address start date
"RTN","SDEC53",289,0)
 S INP(30)=$G(INP(30))
"RTN","SDEC53",290,0)
 I INP(30)'="" D
"RTN","SDEC53",291,0)
 .I INP(30)'="@" D
"RTN","SDEC53",292,0)
 ..N X
"RTN","SDEC53",293,0)
 ..S %DT="E",X=INP(30) D ^%DT I Y<1 S @SDECY@(1)="-1^Invalid Temporary Address Start Date "_INP(30)_$C(30,31),ERR=1 Q
"RTN","SDEC53",294,0)
 ..S (INP(30),X)=Y
"RTN","SDEC53",295,0)
 ..I INP(30)'="@",INP(19)'="Y",$S(INP(19)="N":1,'$D(^DPT(DFN,.121)):1,$P(^(.121),U,9)'="Y":1,1:0) S (X,INP(30))=""  ; S @SDECY@(1)="-1^Requirement for Temporary Address data not indicated...NO EDITING!",ERR=1 Q
"RTN","SDEC53",296,0)
 .I 'ERR,INP(30)'="" S @SDFDA@(.1217)=INP(30)
"RTN","SDEC53",297,0)
 G:ERR EXIT  ;alb/sat 658
"RTN","SDEC53",298,0)
 ;temporary address end date
"RTN","SDEC53",299,0)
 S INP(31)=$G(INP(31))
"RTN","SDEC53",300,0)
 I INP(31)'="" D
"RTN","SDEC53",301,0)
 .I INP(31)'="@" D
"RTN","SDEC53",302,0)
 ..N X
"RTN","SDEC53",303,0)
 ..S %DT="E",X=INP(31) D ^%DT I Y<1 S @SDECY@(1)="-1^Invalid Temporary Address End Date "_INP(31)_$C(30,31),ERR=1 Q
"RTN","SDEC53",304,0)
 ..S (INP(31),X)=Y
"RTN","SDEC53",305,0)
 ..I INP(31)'="@",INP(19)'="Y",$S(INP(19)="N":1,'$D(^DPT(DFN,.121)):1,$P(^(.121),U,9)'="Y":1,1:0) S (X,INP(31))=""  ; S @SDECY@(1)="-1^Requirement for Temporary Address data not indicated...NO EDITING!",ERR=1 Q
"RTN","SDEC53",306,0)
 .I 'ERR,INP(31)'="" S @SDFDA@(.1218)=INP(31)
"RTN","SDEC53",307,0)
 G:ERR EXIT  ;alb/sat 658
"RTN","SDEC53",308,0)
 ;
"RTN","SDEC53",309,0)
 I $D(@SDFDA) D UPDATE^DIE("","SDFDA")
"RTN","SDEC53",310,0)
 I $D(SDMSG) D ERR1^SDECERR(-1,"Error storing data.",SDECI,SDECY) Q
"RTN","SDEC53",311,0)
 ;RACE
"RTN","SDEC53",312,0)
 S RACEN=$G(INP(2))
"RTN","SDEC53",313,0)
 I RACEN'="" D
"RTN","SDEC53",314,0)
 .S RACEN1="" F SDI=1:1:$L(RACEN,"|") D
"RTN","SDEC53",315,0)
 ..S SDIN=$P(RACEN,"|",SDI)
"RTN","SDEC53",316,0)
 ..I $E(SDIN)="@" D  Q
"RTN","SDEC53",317,0)
 ...S SDIN=$E(SDIN,2,$L(SDIN))
"RTN","SDEC53",318,0)
 ...S RACE=$O(^DPT(DFN,.02,"B",$P(SDIN,";;"),0))
"RTN","SDEC53",319,0)
 ...I RACE D
"RTN","SDEC53",320,0)
 ....S DIK="^DPT("_DFN_",.02,"
"RTN","SDEC53",321,0)
 ....S DA=RACE,DA(1)=DFN
"RTN","SDEC53",322,0)
 ....D ^DIK
"RTN","SDEC53",323,0)
 ..I $D(^DIC(10,+$P(SDIN,";;"),0)) D
"RTN","SDEC53",324,0)
 ...I $P(SDIN,";;",2)'="",$D(^DIC(10.3,+$P(SDIN,";;",2),0)) S RACEN1=$S(RACEN1'="":RACEN1_"|",1:"")_SDIN
"RTN","SDEC53",325,0)
 ...I $P(SDIN,";;",2)="" S RACEN1=$S(RACEN1'="":RACEN1_"|",1:"")_SDIN
"RTN","SDEC53",326,0)
 .S RACEN=RACEN1
"RTN","SDEC53",327,0)
 .I RACEN'="" F SDI=1:1:$L(RACEN,"|") D
"RTN","SDEC53",328,0)
 ..K SDFDA
"RTN","SDEC53",329,0)
 ..S SDIN=$P(RACEN,"|",SDI)
"RTN","SDEC53",330,0)
 ..S RACE=$O(^DPT(DFN,.02,"B",$P(SDIN,";;"),0))
"RTN","SDEC53",331,0)
 ..S RACE=$S(RACE'="":RACE,1:"+1")
"RTN","SDEC53",332,0)
 ..S SDFDA="SDFDA(2.02,"_$S(RACE'="":RACE_""",""",1:"""+1")_""","_DFN_",)"
"RTN","SDEC53",333,0)
 ..S SDFDA=$NA(SDFDA(2.02,RACE_","_DFN_","))
"RTN","SDEC53",334,0)
 ..S @SDFDA@(.01)=$P(SDIN,";;")
"RTN","SDEC53",335,0)
 ..S:$P(SDIN,";;",2)'="" @SDFDA@(.02)=$P(SDIN,";;",2)
"RTN","SDEC53",336,0)
 ..D UPDATE^DIE("","SDFDA")
"RTN","SDEC53",337,0)
 ;ethnicity
"RTN","SDEC53",338,0)
 S ETHN=$G(INP(3))
"RTN","SDEC53",339,0)
 I ETHN'="" D
"RTN","SDEC53",340,0)
 .S ETHN1="" F SDI=1:1:$L(ETHN,"|") D
"RTN","SDEC53",341,0)
 ..S SDIN=$P(ETHN,"|",SDI)
"RTN","SDEC53",342,0)
 ..I $E(SDIN)="@" D  Q
"RTN","SDEC53",343,0)
 ...S SDIN=$O(^DPT(DFN,.06,"B",""))
"RTN","SDEC53",344,0)
 ...S ETH=$O(^DPT(DFN,.06,"B",SDIN,0))
"RTN","SDEC53",345,0)
 ...I ETH D
"RTN","SDEC53",346,0)
 ....S DIK="^DPT("_DFN_",.06,"
"RTN","SDEC53",347,0)
 ....S DA=ETH,DA(1)=DFN
"RTN","SDEC53",348,0)
 ....D ^DIK
"RTN","SDEC53",349,0)
 ..I $D(^DIC(10.2,+$P(SDIN,";;",1),0)) D
"RTN","SDEC53",350,0)
 ...I $P(SDIN,";;",2)'="",$D(^DIC(10.3,+$P(SDIN,";;",2),0)) S ETHN1=$S(ETHN1'="":ETHN1_"|",1:"")_SDIN
"RTN","SDEC53",351,0)
 ...I $P(SDIN,";;",2)="" S ETHN1=$S(ETHN1'="":ETHN1_"|",1:"")_SDIN
"RTN","SDEC53",352,0)
 .S ETHN=ETHN1
"RTN","SDEC53",353,0)
 .I ETHN'="" F SDI=1:1:$L(ETHN,"|") D
"RTN","SDEC53",354,0)
 ..K SDFDA
"RTN","SDEC53",355,0)
 ..S SDIN=$P(ETHN,"|",SDI)
"RTN","SDEC53",356,0)
 ..S ETH=$O(^DPT(DFN,.06,"B",$P(SDIN,";;",1),0))
"RTN","SDEC53",357,0)
 ..S ETH=$S(ETH'="":ETH,1:"+1")
"RTN","SDEC53",358,0)
 ..S SDFDA="SDFDA(2.06,"_$S(ETH'="":ETH_""",""",1:"""+1")_""","_DFN_",)"
"RTN","SDEC53",359,0)
 ..S SDFDA=$NA(SDFDA(2.06,ETH_","_DFN_","))
"RTN","SDEC53",360,0)
 ..S @SDFDA@(.01)=$P(SDIN,";;",1)
"RTN","SDEC53",361,0)
 ..S:$P(SDIN,";;",2)'="" @SDFDA@(.02)=$P(SDIN,";;",2)
"RTN","SDEC53",362,0)
 ..D UPDATE^DIE("","SDFDA")
"RTN","SDEC53",363,0)
 S SDECI=SDECI+1 S @SDECY@(SDECI)="0^"_$C(30,31)
"RTN","SDEC53",364,0)
EXIT  ;unlock exit  ;alb/sat 658
"RTN","SDEC53",365,0)
 L -^TMP(DFN,"REGISTRATION IN PROGRESS")
"RTN","SDEC53",366,0)
 L -^DPT(DFN)
"RTN","SDEC53",367,0)
XIT  ;alb/sat 658 - exit tag added
"RTN","SDEC53",368,0)
 Q
"VER")
8.0^22.2
**INSTALL NAME**
GMRC*3.0*98
"BLD",10322,0)
GMRC*3.0*98^CONSULT/REQUEST TRACKING^0^3180320^y
"BLD",10322,1,0)
^^258^258^3171222^
"BLD",10322,1,1,0)
This patch fixes a data integrity issue related to the following issue:
"BLD",10322,1,2,0)
 
"BLD",10322,1,3,0)
1. I16857061FY18 - If a scheduler makes or cancels an appointment for a 
"BLD",10322,1,4,0)
                   consult and the current time ends in a zero (like 
"BLD",10322,1,5,0)
                   9:40), then the event recorded in the consult will
"BLD",10322,1,6,0)
                   display at the end of the consult event history instead
"BLD",10322,1,7,0)
                   of in sequence.
"BLD",10322,1,8,0)
 
"BLD",10322,1,9,0)
This issue requires a fix to repair existing data effected by the issue.
"BLD",10322,1,10,0)
This patch is bundled with a Scheduling patch that addresses this and 
"BLD",10322,1,11,0)
other issues. Below is a list of all the applications involved in this
"BLD",10322,1,12,0)
bundle along with their patch number:
"BLD",10322,1,13,0)
 
"BLD",10322,1,14,0)
   APPLICATION/VERSION                                   PATCH
"BLD",10322,1,15,0)
   ---------------------------------------------------------------
"BLD",10322,1,16,0)
   SCHEDULING (SD) V. 5.3                                SD*5.3*679
"BLD",10322,1,17,0)
   CONSULT/REQUEST TRACKING (GMRC) V. 3.0                GMRC*3.0*98
"BLD",10322,1,18,0)
 
"BLD",10322,1,19,0)
Patch Components
"BLD",10322,1,20,0)
================
"BLD",10322,1,21,0)
 
"BLD",10322,1,22,0)
Files & Fields Associated:
"BLD",10322,1,23,0)
 
"BLD",10322,1,24,0)
File Name (#)                                             New/Modified/
"BLD",10322,1,25,0)
  Sub-file Name (#)   Field Name (Number)                   Deleted
"BLD",10322,1,26,0)
-------------------   ---------------------------------   -------------
"BLD",10322,1,27,0)
N/A
"BLD",10322,1,28,0)
 
"BLD",10322,1,29,0)
Bulletins Associated:
"BLD",10322,1,30,0)
                                                          New/Modified/
"BLD",10322,1,31,0)
Bulletin Name                                               Deleted    
"BLD",10322,1,32,0)
-------------                                             -------------
"BLD",10322,1,33,0)
N/A
"BLD",10322,1,34,0)
 
"BLD",10322,1,35,0)
 
"BLD",10322,1,36,0)
 
"BLD",10322,1,37,0)
Dialogs Associated:
"BLD",10322,1,38,0)
                                                          New/Modified/
"BLD",10322,1,39,0)
Dialog Name                                                 Deleted    
"BLD",10322,1,40,0)
-----------                                               -------------
"BLD",10322,1,41,0)
N/A
"BLD",10322,1,42,0)
 
"BLD",10322,1,43,0)
 
"BLD",10322,1,44,0)
 
"BLD",10322,1,45,0)
Forms Associated:
"BLD",10322,1,46,0)
                                                          New/Modified/
"BLD",10322,1,47,0)
Form Name                    File Name (Number)             Deleted    
"BLD",10322,1,48,0)
---------                    ------------------           -------------
"BLD",10322,1,49,0)
N/A
"BLD",10322,1,50,0)
 
"BLD",10322,1,51,0)
 
"BLD",10322,1,52,0)
 
"BLD",10322,1,53,0)
Functions Associated:
"BLD",10322,1,54,0)
                                                          New/Modified/
"BLD",10322,1,55,0)
Function Name                                               Deleted    
"BLD",10322,1,56,0)
-------------                                             -------------
"BLD",10322,1,57,0)
N/A
"BLD",10322,1,58,0)
 
"BLD",10322,1,59,0)
 
"BLD",10322,1,60,0)
 
"BLD",10322,1,61,0)
HL Logical Link:
"BLD",10322,1,62,0)
                                                          New/Modified/
"BLD",10322,1,63,0)
HL Logical Name                                             Deleted    
"BLD",10322,1,64,0)
---------------                                           -------------
"BLD",10322,1,65,0)
N/A
"BLD",10322,1,66,0)
 
"BLD",10322,1,67,0)
 
"BLD",10322,1,68,0)
 
"BLD",10322,1,69,0)
HL7 Application Parameters:
"BLD",10322,1,70,0)
                                                          New/Modified/
"BLD",10322,1,71,0)
HL7 Parameter Name                                          Deleted    
"BLD",10322,1,72,0)
------------------                                        -------------
"BLD",10322,1,73,0)
N/A
"BLD",10322,1,74,0)
 
"BLD",10322,1,75,0)
 
"BLD",10322,1,76,0)
 
"BLD",10322,1,77,0)
HLO Application Registry:
"BLD",10322,1,78,0)
                                                          New/Modified/
"BLD",10322,1,79,0)
HLO Registry Name                                           Deleted    
"BLD",10322,1,80,0)
-----------------                                         -------------
"BLD",10322,1,81,0)
N/A
"BLD",10322,1,82,0)
 
"BLD",10322,1,83,0)
 
"BLD",10322,1,84,0)
 
"BLD",10322,1,85,0)
Help Frames Associated:
"BLD",10322,1,86,0)
                                                          New/Modified/
"BLD",10322,1,87,0)
Help Frame Name                                             Deleted    
"BLD",10322,1,88,0)
---------------                                           -------------
"BLD",10322,1,89,0)
N/A
"BLD",10322,1,90,0)
 
"BLD",10322,1,91,0)
 
"BLD",10322,1,92,0)
 
"BLD",10322,1,93,0)
Mail Groups Associated:
"BLD",10322,1,94,0)
                                                          New/Modified/
"BLD",10322,1,95,0)
Mail Group Name                                             Deleted    
"BLD",10322,1,96,0)
---------------                                           -------------
"BLD",10322,1,97,0)
N/A
"BLD",10322,1,98,0)
 
"BLD",10322,1,99,0)
 
"BLD",10322,1,100,0)
 
"BLD",10322,1,101,0)
Options Associated:
"BLD",10322,1,102,0)
                                                          New/Modified/
"BLD",10322,1,103,0)
Option Name                  Type                           Deleted    
"BLD",10322,1,104,0)
-----------                  ----                         -------------
"BLD",10322,1,105,0)
N/A
"BLD",10322,1,106,0)
 
"BLD",10322,1,107,0)
 
"BLD",10322,1,108,0)
 
"BLD",10322,1,109,0)
Parameter Definitions:
"BLD",10322,1,110,0)
                                                          New/Modified/
"BLD",10322,1,111,0)
Parameter Name                                              Deleted    
"BLD",10322,1,112,0)
--------------                                            -------------
"BLD",10322,1,113,0)
N/A
"BLD",10322,1,114,0)
 
"BLD",10322,1,115,0)
 
"BLD",10322,1,116,0)
 
"BLD",10322,1,117,0)
Parameter Template:
"BLD",10322,1,118,0)
                                                          New/Modified/
"BLD",10322,1,119,0)
Template Name                                               Deleted    
"BLD",10322,1,120,0)
-------------                                             -------------
"BLD",10322,1,121,0)
N/A
"BLD",10322,1,122,0)
 
"BLD",10322,1,123,0)
 
"BLD",10322,1,124,0)
 
"BLD",10322,1,125,0)
Protocols Associated:
"BLD",10322,1,126,0)
                                                          New/Modified/
"BLD",10322,1,127,0)
Protocol Name                                               Deleted    
"BLD",10322,1,128,0)
-------------                                             -------------
"BLD",10322,1,129,0)
N/A
"BLD",10322,1,130,0)
 
"BLD",10322,1,131,0)
 
"BLD",10322,1,132,0)
 
"BLD",10322,1,133,0)
Remote Procedures Associated:
"BLD",10322,1,134,0)
                                                          New/Modified/
"BLD",10322,1,135,0)
Remote Procedure Name                                       Deleted    
"BLD",10322,1,136,0)
---------------------                                     -------------
"BLD",10322,1,137,0)
N/A
"BLD",10322,1,138,0)
 
"BLD",10322,1,139,0)
 
"BLD",10322,1,140,0)
 
"BLD",10322,1,141,0)
Security Keys Associated:
"BLD",10322,1,142,0)
                                                          New/Modified/
"BLD",10322,1,143,0)
Security Key Name                                           Deleted    
"BLD",10322,1,144,0)
-----------------                                         -------------
"BLD",10322,1,145,0)
N/A
"BLD",10322,1,146,0)
 
"BLD",10322,1,147,0)
 
"BLD",10322,1,148,0)
 
"BLD",10322,1,149,0)
Templates, Input Associated:
"BLD",10322,1,150,0)
                                                          New/Modified/
"BLD",10322,1,151,0)
Template Name      Type      File Name (Number)             Deleted    
"BLD",10322,1,152,0)
-------------      ----      ------------------           -------------
"BLD",10322,1,153,0)
N/A
"BLD",10322,1,154,0)
 
"BLD",10322,1,155,0)
 
"BLD",10322,1,156,0)
 
"BLD",10322,1,157,0)
Templates, List Associated:
"BLD",10322,1,158,0)
                                                          New/Modified/
"BLD",10322,1,159,0)
Template Name      Type                                     Deleted    
"BLD",10322,1,160,0)
-------------      ----                                   -------------
"BLD",10322,1,161,0)
N/A
"BLD",10322,1,162,0)
 
"BLD",10322,1,163,0)
 
"BLD",10322,1,164,0)
 
"BLD",10322,1,165,0)
Templates, Print Associated:
"BLD",10322,1,166,0)
                                                          New/Modified/
"BLD",10322,1,167,0)
Template Name      Type      File Name (Number)             Deleted    
"BLD",10322,1,168,0)
-------------      ----      ------------------           -------------
"BLD",10322,1,169,0)
N/A
"BLD",10322,1,170,0)
 
"BLD",10322,1,171,0)
 
"BLD",10322,1,172,0)
 
"BLD",10322,1,173,0)
Templates, Sort Associated:
"BLD",10322,1,174,0)
                                                          New/Modified/
"BLD",10322,1,175,0)
Template Name      Type      File Name (Number)             Deleted    
"BLD",10322,1,176,0)
-------------      ----      ------------------           -------------
"BLD",10322,1,177,0)
N/A
"BLD",10322,1,178,0)
 
"BLD",10322,1,179,0)
 
"BLD",10322,1,180,0)
Additional Information:
"BLD",10322,1,181,0)
N/A
"BLD",10322,1,182,0)
 
"BLD",10322,1,183,0)
 
"BLD",10322,1,184,0)
New Service Requests (NSRs)
"BLD",10322,1,185,0)
----------------------------  
"BLD",10322,1,186,0)
N/A
"BLD",10322,1,187,0)
 
"BLD",10322,1,188,0)
 
"BLD",10322,1,189,0)
Patient Safety Issues (PSIs)
"BLD",10322,1,190,0)
-----------------------------
"BLD",10322,1,191,0)
N/A
"BLD",10322,1,192,0)
 
"BLD",10322,1,193,0)
 
"BLD",10322,1,194,0)
Service Desk Manager (SDM) Ticket(s) & Overview
"BLD",10322,1,195,0)
-----------------------------------------------
"BLD",10322,1,196,0)
1. I16857061FY18 Consults are showing activities out of order in CPRS; 
"BLD",10322,1,197,0)
                 VistA FM shows activities in correct chronological order
"BLD",10322,1,198,0)
  
"BLD",10322,1,199,0)
Problem:
"BLD",10322,1,200,0)
-------
"BLD",10322,1,201,0)
Our site is experiencing issues with Consults where the activities being 
"BLD",10322,1,202,0)
recorded are out of order. I originally thought this was a result of the 
"BLD",10322,1,203,0)
CONSULT TOOLBOX tool, but there are multiple sites reporting this issue, 
"BLD",10322,1,204,0)
and the consensus is that this is being caused by VSE.
"BLD",10322,1,205,0)
 
"BLD",10322,1,206,0)
Resolution:
"BLD",10322,1,207,0)
----------
"BLD",10322,1,208,0)
The code that saves the SCHEDULED or STATUS CHANGE event when the 
"BLD",10322,1,209,0)
appointment is scheduled or canceled was corrected to save the timestamp
"BLD",10322,1,210,0)
correctly.
"BLD",10322,1,211,0)
 
"BLD",10322,1,212,0)
 
"BLD",10322,1,213,0)
Test Sites:
"BLD",10322,1,214,0)
----------
"BLD",10322,1,215,0)
TBA
"BLD",10322,1,216,0)
 
"BLD",10322,1,217,0)
 
"BLD",10322,1,218,0)
Documentation Retrieval Instructions
"BLD",10322,1,219,0)
------------------------------------ 
"BLD",10322,1,220,0)
Updated documentation describing the new functionality introduced by this 
"BLD",10322,1,221,0)
patch is available.
"BLD",10322,1,222,0)
 
"BLD",10322,1,223,0)
The preferred method is to FTP the files from 
"BLD",10322,1,224,0)
ftp://download.vista.domain.ext/.
"BLD",10322,1,225,0)
This transmits the files from the first available FTP server. Sites may 
"BLD",10322,1,226,0)
also elect to retrieve software directly from a specific server as 
"BLD",10322,1,227,0)
follows:
"BLD",10322,1,228,0)
 
"BLD",10322,1,229,0)
 Hines          ftp.fo-hines.domain.ext   <ftp://ftp.fo-hines.domain.ext>
"BLD",10322,1,230,0)
 Salt Lake City ftp.fo-slc.domain.ext     <ftp://ftp.fo-slc.domain.ext>
"BLD",10322,1,231,0)
 
"BLD",10322,1,232,0)
Documentation can also be found on the VA Software Documentation Library 
"BLD",10322,1,233,0)
at:
"BLD",10322,1,234,0)
http://www4.domain.ext/vdl/
"BLD",10322,1,235,0)
 
"BLD",10322,1,236,0)
Title                                          File Name          FTP Mode
"BLD",10322,1,237,0)
--------------------------------------------------------------------------
"BLD",10322,1,238,0)
VistA Scheduling Enhancements GUI User Guide   VSE_VA_GUI_UG.PDF  Binary
"BLD",10322,1,239,0)
VistA Scheduling Enhancements Technical Manual VSE_TM.PDF         Binary
"BLD",10322,1,240,0)
 
"BLD",10322,1,241,0)
 
"BLD",10322,1,242,0)
Patch Installation:
"BLD",10322,1,243,0)
 
"BLD",10322,1,244,0)
 
"BLD",10322,1,245,0)
  Pre/Post Installation Overview
"BLD",10322,1,246,0)
  ------------------------------
"BLD",10322,1,247,0)
  The components sent with this patch GMRC*3.0*98 have been included in 
"BLD",10322,1,248,0)
  the Host File SD_GMRC_VSE_BUNDLE_1_5.KID. Please follow the instructions
"BLD",10322,1,249,0)
  listed in the INSTALLATION INSTRUCTIONS section of the patch description
"BLD",10322,1,250,0)
  for patch SD*5.3*679.
"BLD",10322,1,251,0)
  
"BLD",10322,1,252,0)
  
"BLD",10322,1,253,0)
  Installation Instructions
"BLD",10322,1,254,0)
  -------------------------
"BLD",10322,1,255,0)
  The components sent with this patch GMRC*3.0*98 have been included in 
"BLD",10322,1,256,0)
  the Host File SD_GMRC_VSE_BUNDLE_1_5.KID. Please follow the instructions
"BLD",10322,1,257,0)
  listed in the INSTALLATION INSTRUCTIONS section of the patch description
"BLD",10322,1,258,0)
  for patch SD*5.3*679.
"BLD",10322,4,0)
^9.64PA^^
"BLD",10322,6.3)
6
"BLD",10322,"INID")
^
"BLD",10322,"INIT")
GMRCP98
"BLD",10322,"KRN",0)
^9.67PA^779.2^20
"BLD",10322,"KRN",.4,0)
.4
"BLD",10322,"KRN",.401,0)
.401
"BLD",10322,"KRN",.402,0)
.402
"BLD",10322,"KRN",.403,0)
.403
"BLD",10322,"KRN",.5,0)
.5
"BLD",10322,"KRN",.84,0)
.84
"BLD",10322,"KRN",3.6,0)
3.6
"BLD",10322,"KRN",3.8,0)
3.8
"BLD",10322,"KRN",9.2,0)
9.2
"BLD",10322,"KRN",9.8,0)
9.8
"BLD",10322,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10322,"KRN",9.8,"NM",1,0)
GMRCP98^^0^B4638919
"BLD",10322,"KRN",9.8,"NM","B","GMRCP98",1)

"BLD",10322,"KRN",19,0)
19
"BLD",10322,"KRN",19.1,0)
19.1
"BLD",10322,"KRN",101,0)
101
"BLD",10322,"KRN",409.61,0)
409.61
"BLD",10322,"KRN",771,0)
771
"BLD",10322,"KRN",779.2,0)
779.2
"BLD",10322,"KRN",870,0)
870
"BLD",10322,"KRN",8989.51,0)
8989.51
"BLD",10322,"KRN",8989.52,0)
8989.52
"BLD",10322,"KRN",8994,0)
8994
"BLD",10322,"KRN","B",.4,.4)

"BLD",10322,"KRN","B",.401,.401)

"BLD",10322,"KRN","B",.402,.402)

"BLD",10322,"KRN","B",.403,.403)

"BLD",10322,"KRN","B",.5,.5)

"BLD",10322,"KRN","B",.84,.84)

"BLD",10322,"KRN","B",3.6,3.6)

"BLD",10322,"KRN","B",3.8,3.8)

"BLD",10322,"KRN","B",9.2,9.2)

"BLD",10322,"KRN","B",9.8,9.8)

"BLD",10322,"KRN","B",19,19)

"BLD",10322,"KRN","B",19.1,19.1)

"BLD",10322,"KRN","B",101,101)

"BLD",10322,"KRN","B",409.61,409.61)

"BLD",10322,"KRN","B",771,771)

"BLD",10322,"KRN","B",779.2,779.2)

"BLD",10322,"KRN","B",870,870)

"BLD",10322,"KRN","B",8989.51,8989.51)

"BLD",10322,"KRN","B",8989.52,8989.52)

"BLD",10322,"KRN","B",8994,8994)

"BLD",10322,"QUES",0)
^9.62^^
"BLD",10322,"REQB",0)
^9.611^^
"INIT")
GMRCP98
"MBREQ")
1
"PKG",44,-1)
1^1
"PKG",44,0)
CONSULT/REQUEST TRACKING^GMRC^CONSULTS/REQUESTS
"PKG",44,22,0)
^9.49I^1^1
"PKG",44,22,1,0)
3.0^3051119^2990416^1
"PKG",44,22,1,"PAH",1,0)
98^3180320^114
"PKG",44,22,1,"PAH",1,1,0)
^^258^258^3180320
"PKG",44,22,1,"PAH",1,1,1,0)
This patch fixes a data integrity issue related to the following issue:
"PKG",44,22,1,"PAH",1,1,2,0)
 
"PKG",44,22,1,"PAH",1,1,3,0)
1. I16857061FY18 - If a scheduler makes or cancels an appointment for a 
"PKG",44,22,1,"PAH",1,1,4,0)
                   consult and the current time ends in a zero (like 
"PKG",44,22,1,"PAH",1,1,5,0)
                   9:40), then the event recorded in the consult will
"PKG",44,22,1,"PAH",1,1,6,0)
                   display at the end of the consult event history instead
"PKG",44,22,1,"PAH",1,1,7,0)
                   of in sequence.
"PKG",44,22,1,"PAH",1,1,8,0)
 
"PKG",44,22,1,"PAH",1,1,9,0)
This issue requires a fix to repair existing data effected by the issue.
"PKG",44,22,1,"PAH",1,1,10,0)
This patch is bundled with a Scheduling patch that addresses this and 
"PKG",44,22,1,"PAH",1,1,11,0)
other issues. Below is a list of all the applications involved in this
"PKG",44,22,1,"PAH",1,1,12,0)
bundle along with their patch number:
"PKG",44,22,1,"PAH",1,1,13,0)
 
"PKG",44,22,1,"PAH",1,1,14,0)
   APPLICATION/VERSION                                   PATCH
"PKG",44,22,1,"PAH",1,1,15,0)
   ---------------------------------------------------------------
"PKG",44,22,1,"PAH",1,1,16,0)
   SCHEDULING (SD) V. 5.3                                SD*5.3*679
"PKG",44,22,1,"PAH",1,1,17,0)
   CONSULT/REQUEST TRACKING (GMRC) V. 3.0                GMRC*3.0*98
"PKG",44,22,1,"PAH",1,1,18,0)
 
"PKG",44,22,1,"PAH",1,1,19,0)
Patch Components
"PKG",44,22,1,"PAH",1,1,20,0)
================
"PKG",44,22,1,"PAH",1,1,21,0)
 
"PKG",44,22,1,"PAH",1,1,22,0)
Files & Fields Associated:
"PKG",44,22,1,"PAH",1,1,23,0)
 
"PKG",44,22,1,"PAH",1,1,24,0)
File Name (#)                                             New/Modified/
"PKG",44,22,1,"PAH",1,1,25,0)
  Sub-file Name (#)   Field Name (Number)                   Deleted
"PKG",44,22,1,"PAH",1,1,26,0)
-------------------   ---------------------------------   -------------
"PKG",44,22,1,"PAH",1,1,27,0)
N/A
"PKG",44,22,1,"PAH",1,1,28,0)
 
"PKG",44,22,1,"PAH",1,1,29,0)
Bulletins Associated:
"PKG",44,22,1,"PAH",1,1,30,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,31,0)
Bulletin Name                                               Deleted    
"PKG",44,22,1,"PAH",1,1,32,0)
-------------                                             -------------
"PKG",44,22,1,"PAH",1,1,33,0)
N/A
"PKG",44,22,1,"PAH",1,1,34,0)
 
"PKG",44,22,1,"PAH",1,1,35,0)
 
"PKG",44,22,1,"PAH",1,1,36,0)
 
"PKG",44,22,1,"PAH",1,1,37,0)
Dialogs Associated:
"PKG",44,22,1,"PAH",1,1,38,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,39,0)
Dialog Name                                                 Deleted    
"PKG",44,22,1,"PAH",1,1,40,0)
-----------                                               -------------
"PKG",44,22,1,"PAH",1,1,41,0)
N/A
"PKG",44,22,1,"PAH",1,1,42,0)
 
"PKG",44,22,1,"PAH",1,1,43,0)
 
"PKG",44,22,1,"PAH",1,1,44,0)
 
"PKG",44,22,1,"PAH",1,1,45,0)
Forms Associated:
"PKG",44,22,1,"PAH",1,1,46,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,47,0)
Form Name                    File Name (Number)             Deleted    
"PKG",44,22,1,"PAH",1,1,48,0)
---------                    ------------------           -------------
"PKG",44,22,1,"PAH",1,1,49,0)
N/A
"PKG",44,22,1,"PAH",1,1,50,0)
 
"PKG",44,22,1,"PAH",1,1,51,0)
 
"PKG",44,22,1,"PAH",1,1,52,0)
 
"PKG",44,22,1,"PAH",1,1,53,0)
Functions Associated:
"PKG",44,22,1,"PAH",1,1,54,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,55,0)
Function Name                                               Deleted    
"PKG",44,22,1,"PAH",1,1,56,0)
-------------                                             -------------
"PKG",44,22,1,"PAH",1,1,57,0)
N/A
"PKG",44,22,1,"PAH",1,1,58,0)
 
"PKG",44,22,1,"PAH",1,1,59,0)
 
"PKG",44,22,1,"PAH",1,1,60,0)
 
"PKG",44,22,1,"PAH",1,1,61,0)
HL Logical Link:
"PKG",44,22,1,"PAH",1,1,62,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,63,0)
HL Logical Name                                             Deleted    
"PKG",44,22,1,"PAH",1,1,64,0)
---------------                                           -------------
"PKG",44,22,1,"PAH",1,1,65,0)
N/A
"PKG",44,22,1,"PAH",1,1,66,0)
 
"PKG",44,22,1,"PAH",1,1,67,0)
 
"PKG",44,22,1,"PAH",1,1,68,0)
 
"PKG",44,22,1,"PAH",1,1,69,0)
HL7 Application Parameters:
"PKG",44,22,1,"PAH",1,1,70,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,71,0)
HL7 Parameter Name                                          Deleted    
"PKG",44,22,1,"PAH",1,1,72,0)
------------------                                        -------------
"PKG",44,22,1,"PAH",1,1,73,0)
N/A
"PKG",44,22,1,"PAH",1,1,74,0)
 
"PKG",44,22,1,"PAH",1,1,75,0)
 
"PKG",44,22,1,"PAH",1,1,76,0)
 
"PKG",44,22,1,"PAH",1,1,77,0)
HLO Application Registry:
"PKG",44,22,1,"PAH",1,1,78,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,79,0)
HLO Registry Name                                           Deleted    
"PKG",44,22,1,"PAH",1,1,80,0)
-----------------                                         -------------
"PKG",44,22,1,"PAH",1,1,81,0)
N/A
"PKG",44,22,1,"PAH",1,1,82,0)
 
"PKG",44,22,1,"PAH",1,1,83,0)
 
"PKG",44,22,1,"PAH",1,1,84,0)
 
"PKG",44,22,1,"PAH",1,1,85,0)
Help Frames Associated:
"PKG",44,22,1,"PAH",1,1,86,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,87,0)
Help Frame Name                                             Deleted    
"PKG",44,22,1,"PAH",1,1,88,0)
---------------                                           -------------
"PKG",44,22,1,"PAH",1,1,89,0)
N/A
"PKG",44,22,1,"PAH",1,1,90,0)
 
"PKG",44,22,1,"PAH",1,1,91,0)
 
"PKG",44,22,1,"PAH",1,1,92,0)
 
"PKG",44,22,1,"PAH",1,1,93,0)
Mail Groups Associated:
"PKG",44,22,1,"PAH",1,1,94,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,95,0)
Mail Group Name                                             Deleted    
"PKG",44,22,1,"PAH",1,1,96,0)
---------------                                           -------------
"PKG",44,22,1,"PAH",1,1,97,0)
N/A
"PKG",44,22,1,"PAH",1,1,98,0)
 
"PKG",44,22,1,"PAH",1,1,99,0)
 
"PKG",44,22,1,"PAH",1,1,100,0)
 
"PKG",44,22,1,"PAH",1,1,101,0)
Options Associated:
"PKG",44,22,1,"PAH",1,1,102,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,103,0)
Option Name                  Type                           Deleted    
"PKG",44,22,1,"PAH",1,1,104,0)
-----------                  ----                         -------------
"PKG",44,22,1,"PAH",1,1,105,0)
N/A
"PKG",44,22,1,"PAH",1,1,106,0)
 
"PKG",44,22,1,"PAH",1,1,107,0)
 
"PKG",44,22,1,"PAH",1,1,108,0)
 
"PKG",44,22,1,"PAH",1,1,109,0)
Parameter Definitions:
"PKG",44,22,1,"PAH",1,1,110,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,111,0)
Parameter Name                                              Deleted    
"PKG",44,22,1,"PAH",1,1,112,0)
--------------                                            -------------
"PKG",44,22,1,"PAH",1,1,113,0)
N/A
"PKG",44,22,1,"PAH",1,1,114,0)
 
"PKG",44,22,1,"PAH",1,1,115,0)
 
"PKG",44,22,1,"PAH",1,1,116,0)
 
"PKG",44,22,1,"PAH",1,1,117,0)
Parameter Template:
"PKG",44,22,1,"PAH",1,1,118,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,119,0)
Template Name                                               Deleted    
"PKG",44,22,1,"PAH",1,1,120,0)
-------------                                             -------------
"PKG",44,22,1,"PAH",1,1,121,0)
N/A
"PKG",44,22,1,"PAH",1,1,122,0)
 
"PKG",44,22,1,"PAH",1,1,123,0)
 
"PKG",44,22,1,"PAH",1,1,124,0)
 
"PKG",44,22,1,"PAH",1,1,125,0)
Protocols Associated:
"PKG",44,22,1,"PAH",1,1,126,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,127,0)
Protocol Name                                               Deleted    
"PKG",44,22,1,"PAH",1,1,128,0)
-------------                                             -------------
"PKG",44,22,1,"PAH",1,1,129,0)
N/A
"PKG",44,22,1,"PAH",1,1,130,0)
 
"PKG",44,22,1,"PAH",1,1,131,0)
 
"PKG",44,22,1,"PAH",1,1,132,0)
 
"PKG",44,22,1,"PAH",1,1,133,0)
Remote Procedures Associated:
"PKG",44,22,1,"PAH",1,1,134,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,135,0)
Remote Procedure Name                                       Deleted    
"PKG",44,22,1,"PAH",1,1,136,0)
---------------------                                     -------------
"PKG",44,22,1,"PAH",1,1,137,0)
N/A
"PKG",44,22,1,"PAH",1,1,138,0)
 
"PKG",44,22,1,"PAH",1,1,139,0)
 
"PKG",44,22,1,"PAH",1,1,140,0)
 
"PKG",44,22,1,"PAH",1,1,141,0)
Security Keys Associated:
"PKG",44,22,1,"PAH",1,1,142,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,143,0)
Security Key Name                                           Deleted    
"PKG",44,22,1,"PAH",1,1,144,0)
-----------------                                         -------------
"PKG",44,22,1,"PAH",1,1,145,0)
N/A
"PKG",44,22,1,"PAH",1,1,146,0)
 
"PKG",44,22,1,"PAH",1,1,147,0)
 
"PKG",44,22,1,"PAH",1,1,148,0)
 
"PKG",44,22,1,"PAH",1,1,149,0)
Templates, Input Associated:
"PKG",44,22,1,"PAH",1,1,150,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,151,0)
Template Name      Type      File Name (Number)             Deleted    
"PKG",44,22,1,"PAH",1,1,152,0)
-------------      ----      ------------------           -------------
"PKG",44,22,1,"PAH",1,1,153,0)
N/A
"PKG",44,22,1,"PAH",1,1,154,0)
 
"PKG",44,22,1,"PAH",1,1,155,0)
 
"PKG",44,22,1,"PAH",1,1,156,0)
 
"PKG",44,22,1,"PAH",1,1,157,0)
Templates, List Associated:
"PKG",44,22,1,"PAH",1,1,158,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,159,0)
Template Name      Type                                     Deleted    
"PKG",44,22,1,"PAH",1,1,160,0)
-------------      ----                                   -------------
"PKG",44,22,1,"PAH",1,1,161,0)
N/A
"PKG",44,22,1,"PAH",1,1,162,0)
 
"PKG",44,22,1,"PAH",1,1,163,0)
 
"PKG",44,22,1,"PAH",1,1,164,0)
 
"PKG",44,22,1,"PAH",1,1,165,0)
Templates, Print Associated:
"PKG",44,22,1,"PAH",1,1,166,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,167,0)
Template Name      Type      File Name (Number)             Deleted    
"PKG",44,22,1,"PAH",1,1,168,0)
-------------      ----      ------------------           -------------
"PKG",44,22,1,"PAH",1,1,169,0)
N/A
"PKG",44,22,1,"PAH",1,1,170,0)
 
"PKG",44,22,1,"PAH",1,1,171,0)
 
"PKG",44,22,1,"PAH",1,1,172,0)
 
"PKG",44,22,1,"PAH",1,1,173,0)
Templates, Sort Associated:
"PKG",44,22,1,"PAH",1,1,174,0)
                                                          New/Modified/
"PKG",44,22,1,"PAH",1,1,175,0)
Template Name      Type      File Name (Number)             Deleted    
"PKG",44,22,1,"PAH",1,1,176,0)
-------------      ----      ------------------           -------------
"PKG",44,22,1,"PAH",1,1,177,0)
N/A
"PKG",44,22,1,"PAH",1,1,178,0)
 
"PKG",44,22,1,"PAH",1,1,179,0)
 
"PKG",44,22,1,"PAH",1,1,180,0)
Additional Information:
"PKG",44,22,1,"PAH",1,1,181,0)
N/A
"PKG",44,22,1,"PAH",1,1,182,0)
 
"PKG",44,22,1,"PAH",1,1,183,0)
 
"PKG",44,22,1,"PAH",1,1,184,0)
New Service Requests (NSRs)
"PKG",44,22,1,"PAH",1,1,185,0)
----------------------------  
"PKG",44,22,1,"PAH",1,1,186,0)
N/A
"PKG",44,22,1,"PAH",1,1,187,0)
 
"PKG",44,22,1,"PAH",1,1,188,0)
 
"PKG",44,22,1,"PAH",1,1,189,0)
Patient Safety Issues (PSIs)
"PKG",44,22,1,"PAH",1,1,190,0)
-----------------------------
"PKG",44,22,1,"PAH",1,1,191,0)
N/A
"PKG",44,22,1,"PAH",1,1,192,0)
 
"PKG",44,22,1,"PAH",1,1,193,0)
 
"PKG",44,22,1,"PAH",1,1,194,0)
Service Desk Manager (SDM) Ticket(s) & Overview
"PKG",44,22,1,"PAH",1,1,195,0)
-----------------------------------------------
"PKG",44,22,1,"PAH",1,1,196,0)
1. I16857061FY18 Consults are showing activities out of order in CPRS; 
"PKG",44,22,1,"PAH",1,1,197,0)
                 VistA FM shows activities in correct chronological order
"PKG",44,22,1,"PAH",1,1,198,0)
  
"PKG",44,22,1,"PAH",1,1,199,0)
Problem:
"PKG",44,22,1,"PAH",1,1,200,0)
-------
"PKG",44,22,1,"PAH",1,1,201,0)
Our site is experiencing issues with Consults where the activities being 
"PKG",44,22,1,"PAH",1,1,202,0)
recorded are out of order. I originally thought this was a result of the 
"PKG",44,22,1,"PAH",1,1,203,0)
CONSULT TOOLBOX tool, but there are multiple sites reporting this issue, 
"PKG",44,22,1,"PAH",1,1,204,0)
and the consensus is that this is being caused by VSE.
"PKG",44,22,1,"PAH",1,1,205,0)
 
"PKG",44,22,1,"PAH",1,1,206,0)
Resolution:
"PKG",44,22,1,"PAH",1,1,207,0)
----------
"PKG",44,22,1,"PAH",1,1,208,0)
The code that saves the SCHEDULED or STATUS CHANGE event when the 
"PKG",44,22,1,"PAH",1,1,209,0)
appointment is scheduled or canceled was corrected to save the timestamp
"PKG",44,22,1,"PAH",1,1,210,0)
correctly.
"PKG",44,22,1,"PAH",1,1,211,0)
 
"PKG",44,22,1,"PAH",1,1,212,0)
 
"PKG",44,22,1,"PAH",1,1,213,0)
Test Sites:
"PKG",44,22,1,"PAH",1,1,214,0)
----------
"PKG",44,22,1,"PAH",1,1,215,0)
TBA
"PKG",44,22,1,"PAH",1,1,216,0)
 
"PKG",44,22,1,"PAH",1,1,217,0)
 
"PKG",44,22,1,"PAH",1,1,218,0)
Documentation Retrieval Instructions
"PKG",44,22,1,"PAH",1,1,219,0)
------------------------------------ 
"PKG",44,22,1,"PAH",1,1,220,0)
Updated documentation describing the new functionality introduced by this 
"PKG",44,22,1,"PAH",1,1,221,0)
patch is available.
"PKG",44,22,1,"PAH",1,1,222,0)
 
"PKG",44,22,1,"PAH",1,1,223,0)
The preferred method is to FTP the files from 
"PKG",44,22,1,"PAH",1,1,224,0)
ftp://download.vista.domain.ext/.
"PKG",44,22,1,"PAH",1,1,225,0)
This transmits the files from the first available FTP server. Sites may 
"PKG",44,22,1,"PAH",1,1,226,0)
also elect to retrieve software directly from a specific server as 
"PKG",44,22,1,"PAH",1,1,227,0)
follows:
"PKG",44,22,1,"PAH",1,1,228,0)
 
"PKG",44,22,1,"PAH",1,1,229,0)
 Hines          ftp.fo-hines.domain.ext   <ftp://ftp.fo-hines.domain.ext>
"PKG",44,22,1,"PAH",1,1,230,0)
 Salt Lake City ftp.fo-slc.domain.ext     <ftp://ftp.fo-slc.domain.ext>
"PKG",44,22,1,"PAH",1,1,231,0)
 
"PKG",44,22,1,"PAH",1,1,232,0)
Documentation can also be found on the VA Software Documentation Library 
"PKG",44,22,1,"PAH",1,1,233,0)
at:
"PKG",44,22,1,"PAH",1,1,234,0)
http://www4.domain.ext/vdl/
"PKG",44,22,1,"PAH",1,1,235,0)
 
"PKG",44,22,1,"PAH",1,1,236,0)
Title                                          File Name          FTP Mode
"PKG",44,22,1,"PAH",1,1,237,0)
--------------------------------------------------------------------------
"PKG",44,22,1,"PAH",1,1,238,0)
VistA Scheduling Enhancements GUI User Guide   VSE_VA_GUI_UG.PDF  Binary
"PKG",44,22,1,"PAH",1,1,239,0)
VistA Scheduling Enhancements Technical Manual VSE_TM.PDF         Binary
"PKG",44,22,1,"PAH",1,1,240,0)
 
"PKG",44,22,1,"PAH",1,1,241,0)
 
"PKG",44,22,1,"PAH",1,1,242,0)
Patch Installation:
"PKG",44,22,1,"PAH",1,1,243,0)
 
"PKG",44,22,1,"PAH",1,1,244,0)
 
"PKG",44,22,1,"PAH",1,1,245,0)
  Pre/Post Installation Overview
"PKG",44,22,1,"PAH",1,1,246,0)
  ------------------------------
"PKG",44,22,1,"PAH",1,1,247,0)
  The components sent with this patch GMRC*3.0*98 have been included in 
"PKG",44,22,1,"PAH",1,1,248,0)
  the Host File SD_GMRC_VSE_BUNDLE_1_5.KID. Please follow the instructions
"PKG",44,22,1,"PAH",1,1,249,0)
  listed in the INSTALLATION INSTRUCTIONS section of the patch description
"PKG",44,22,1,"PAH",1,1,250,0)
  for patch SD*5.3*679.
"PKG",44,22,1,"PAH",1,1,251,0)
  
"PKG",44,22,1,"PAH",1,1,252,0)
  
"PKG",44,22,1,"PAH",1,1,253,0)
  Installation Instructions
"PKG",44,22,1,"PAH",1,1,254,0)
  -------------------------
"PKG",44,22,1,"PAH",1,1,255,0)
  The components sent with this patch GMRC*3.0*98 have been included in 
"PKG",44,22,1,"PAH",1,1,256,0)
  the Host File SD_GMRC_VSE_BUNDLE_1_5.KID. Please follow the instructions
"PKG",44,22,1,"PAH",1,1,257,0)
  listed in the INSTALLATION INSTRUCTIONS section of the patch description
"PKG",44,22,1,"PAH",1,1,258,0)
  for patch SD*5.3*679.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","GMRCP98")
0^1^B4638919
"RTN","GMRCP98",1,0)
GMRCP98 ;ALB/WTC - Database repair for scheduling events ;12/19/17  09:56
"RTN","GMRCP98",2,0)
 ;;3.0;CONSULT/REQUEST TRACKING;**98**;;Build 6
"RTN","GMRCP98",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified
"RTN","GMRCP98",4,0)
 ;
"RTN","GMRCP98",5,0)
REQACT ;  
"RTN","GMRCP98",6,0)
 ;
"RTN","GMRCP98",7,0)
 ;  Correct date/time stored as string in "B" cross-reference.
"RTN","GMRCP98",8,0)
 ;
"RTN","GMRCP98",9,0)
 N D0,D1,DATETIME,NEWDT,FIXED,I,TOTAL,PROGRESS,COMPLETE ;
"RTN","GMRCP98",10,0)
 ;
"RTN","GMRCP98",11,0)
 S (D0,FIXED)=0 ;
"RTN","GMRCP98",12,0)
 S TOTAL=$P(^GMR(123,0),"^",4) ;
"RTN","GMRCP98",13,0)
 F I=10:10:100 S COMPLETE(I)=0 ;
"RTN","GMRCP98",14,0)
 ;
"RTN","GMRCP98",15,0)
 ;  Scan Consult file
"RTN","GMRCP98",16,0)
 ;
"RTN","GMRCP98",17,0)
 F I=1:1 S D0=$O(^GMR(123,D0)) Q:'D0  D  ;
"RTN","GMRCP98",18,0)
 . ;
"RTN","GMRCP98",19,0)
 . ;  Report progress to user
"RTN","GMRCP98",20,0)
 . ;
"RTN","GMRCP98",21,0)
 . I I#1000=0 W "." ;
"RTN","GMRCP98",22,0)
 . S PROGRESS=I/TOTAL*100\1 I PROGRESS>0,PROGRESS#10=0,COMPLETE(PROGRESS)=0 W !,PROGRESS,"% complete." S COMPLETE(PROGRESS)=1 ;
"RTN","GMRCP98",23,0)
 . ;
"RTN","GMRCP98",24,0)
 . ;  Start scan of date/time cross-reference at end of numeric entries
"RTN","GMRCP98",25,0)
 . ;
"RTN","GMRCP98",26,0)
 . S DATETIME=9999999.999999 ;
"RTN","GMRCP98",27,0)
 . F  S DATETIME=$O(^GMR(123,D0,40,"B",DATETIME)) Q:DATETIME=""  D  ;
"RTN","GMRCP98",28,0)
 .. ;
"RTN","GMRCP98",29,0)
 .. ;  Scan activity multiple's date/time cross reference for string entries.
"RTN","GMRCP98",30,0)
 .. ;
"RTN","GMRCP98",31,0)
 .. S D1=0 F  S D1=$O(^GMR(123,D0,40,"B",DATETIME,D1)) Q:'D1  D  ;
"RTN","GMRCP98",32,0)
 ... ;
"RTN","GMRCP98",33,0)
 ... ; Strip off trailing zeroes so date/time is numeric
"RTN","GMRCP98",34,0)
 ... ;
"RTN","GMRCP98",35,0)
 ... S NEWDT=+DATETIME ;
"RTN","GMRCP98",36,0)
 ... ;
"RTN","GMRCP98",37,0)
 ... ;  Update multiple and cross-reference.  Delete string cross-reference entry.
"RTN","GMRCP98",38,0)
 ... ;
"RTN","GMRCP98",39,0)
 ... S $P(^GMR(123,D0,40,D1,0),"^",1)=NEWDT,^GMR(123,D0,40,"B",NEWDT,D1)=""
"RTN","GMRCP98",40,0)
 ... K ^GMR(123,D0,40,"B",DATETIME,D1) ;
"RTN","GMRCP98",41,0)
 ... S FIXED=FIXED+1 ;
"RTN","GMRCP98",42,0)
 ... W !,FIXED,". ",DATETIME," ==> ",NEWDT ;
"RTN","GMRCP98",43,0)
 ;
"RTN","GMRCP98",44,0)
 Q  ;
"RTN","GMRCP98",45,0)
 ;
"VER")
8.0^22.2
**END**
**END**
                     