Released PX*1*220 SEQ #166
Extracted from mail message
**KIDS**:PX*1.0*220^

**INSTALL NAME**
PX*1.0*220
"BLD",10905,0)
PX*1.0*220^PCE PATIENT CARE ENCOUNTER^0^3180227^y
"BLD",10905,1,0)
^^2^2^3180222^
"BLD",10905,1,1,0)
This patch resolves potential runtime errors when $$OCCUP^PXBGPRV is run 
"BLD",10905,1,2,0)
with an invalid provider passed in.
"BLD",10905,4,0)
^9.64PA^^
"BLD",10905,6.3)
5
"BLD",10905,"KRN",0)
^9.67PA^779.2^20
"BLD",10905,"KRN",.4,0)
.4
"BLD",10905,"KRN",.401,0)
.401
"BLD",10905,"KRN",.402,0)
.402
"BLD",10905,"KRN",.403,0)
.403
"BLD",10905,"KRN",.5,0)
.5
"BLD",10905,"KRN",.84,0)
.84
"BLD",10905,"KRN",3.6,0)
3.6
"BLD",10905,"KRN",3.8,0)
3.8
"BLD",10905,"KRN",9.2,0)
9.2
"BLD",10905,"KRN",9.8,0)
9.8
"BLD",10905,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10905,"KRN",9.8,"NM",1,0)
PXBGPRV^^0^B44361527
"BLD",10905,"KRN",9.8,"NM","B","PXBGPRV",1)

"BLD",10905,"KRN",19,0)
19
"BLD",10905,"KRN",19.1,0)
19.1
"BLD",10905,"KRN",101,0)
101
"BLD",10905,"KRN",409.61,0)
409.61
"BLD",10905,"KRN",771,0)
771
"BLD",10905,"KRN",779.2,0)
779.2
"BLD",10905,"KRN",870,0)
870
"BLD",10905,"KRN",8989.51,0)
8989.51
"BLD",10905,"KRN",8989.52,0)
8989.52
"BLD",10905,"KRN",8994,0)
8994
"BLD",10905,"KRN","B",.4,.4)

"BLD",10905,"KRN","B",.401,.401)

"BLD",10905,"KRN","B",.402,.402)

"BLD",10905,"KRN","B",.403,.403)

"BLD",10905,"KRN","B",.5,.5)

"BLD",10905,"KRN","B",.84,.84)

"BLD",10905,"KRN","B",3.6,3.6)

"BLD",10905,"KRN","B",3.8,3.8)

"BLD",10905,"KRN","B",9.2,9.2)

"BLD",10905,"KRN","B",9.8,9.8)

"BLD",10905,"KRN","B",19,19)

"BLD",10905,"KRN","B",19.1,19.1)

"BLD",10905,"KRN","B",101,101)

"BLD",10905,"KRN","B",409.61,409.61)

"BLD",10905,"KRN","B",771,771)

"BLD",10905,"KRN","B",779.2,779.2)

"BLD",10905,"KRN","B",870,870)

"BLD",10905,"KRN","B",8989.51,8989.51)

"BLD",10905,"KRN","B",8989.52,8989.52)

"BLD",10905,"KRN","B",8994,8994)

"BLD",10905,"QDEF")
^^^^NO^^^^NO^^YES
"BLD",10905,"QUES",0)
^9.62^^
"BLD",10905,"REQB",0)
^9.611^1^1
"BLD",10905,"REQB",1,0)
PX*1.0*186^1
"BLD",10905,"REQB","B","PX*1.0*186",1)

"MBREQ")
0
"PKG",413,-1)
1^1
"PKG",413,0)
PCE PATIENT CARE ENCOUNTER^PX^Patient Care Encounter (VA Parent package)^
"PKG",413,20,0)
^9.402P^^
"PKG",413,22,0)
^9.49I^1^1
"PKG",413,22,1,0)
1.0^2960812^2960913^12537
"PKG",413,22,1,"PAH",1,0)
220^3180227
"PKG",413,22,1,"PAH",1,1,0)
^^2^2^3180227
"PKG",413,22,1,"PAH",1,1,1,0)
This patch resolves potential runtime errors when $$OCCUP^PXBGPRV is run 
"PKG",413,22,1,"PAH",1,1,2,0)
with an invalid provider passed in.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PXBGPRV")
0^1^B44361527^B43042405
"RTN","PXBGPRV",1,0)
PXBGPRV ;ISL/JVS,ESW - GATHER PROVIDERS ;12/5/02 11:35am
"RTN","PXBGPRV",2,0)
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**7,11,108,186,220**;Aug 12, 1996;Build 5
"RTN","PXBGPRV",3,0)
 ;
"RTN","PXBGPRV",4,0)
PRV(VISIT,PXBSKY,PXBKY,PXBSAM,PXBCNT,PRVDR,FPRI) ;--Gather the entries in the V PROVIDER file
"RTN","PXBGPRV",5,0)
 ;
"RTN","PXBGPRV",6,0)
 ;Output:
"RTN","PXBGPRV",7,0)
 ;       PXBSKY(PXBC,IEN)=PRVI
"RTN","PXBGPRV",8,0)
 ;       PXBKY(NAME,PXBC)=NAME^P^TYPE^PRVI
"RTN","PXBGPRV",9,0)
 ;       PXBSAM(PXBC)=NAME^P^TYPE^PRVI
"RTN","PXBGPRV",10,0)
 ;       PRVDR("PRIMARY")=NAME^IEN^PRVI
"RTN","PXBGPRV",11,0)
 ;       PXBCNT
"RTN","PXBGPRV",12,0)
 ;       FPRI
"RTN","PXBGPRV",13,0)
 ;where:
"RTN","PXBGPRV",14,0)
 ;       PXBC - sequence in an order of providers name
"RTN","PXBGPRV",15,0)
 ;       IEN  - of ^AUPNVPRV(
"RTN","PXBGPRV",16,0)
 ;       NAME - provider's name (LAST,FIRST...)
"RTN","PXBGPRV",17,0)
 ;       P    - PRIMARY or SECONDARY
"RTN","PXBGPRV",18,0)
 ;       PRVI - IEN of ^VA(200,
"RTN","PXBGPRV",19,0)
 ;       PXBCNT - provider count
"RTN","PXBGPRV",20,0)
 ;       FPRI:
"RTN","PXBGPRV",21,0)
 ;             0 - Primary not selected
"RTN","PXBGPRV",22,0)
 ;             1 - Primary selected
"RTN","PXBGPRV",23,0)
 ;
"RTN","PXBGPRV",24,0)
 N IEN,QUANTITY,PROVIDER,PRIMARY,PRV,GROUP,PXBC
"RTN","PXBGPRV",25,0)
 N DIC,DR,DA,DIQ,PRVI,TYPE
"RTN","PXBGPRV",26,0)
 ;
"RTN","PXBGPRV",27,0)
 K ^TMP("PXBU",$J),PRV,PXBKY,VAUGHN,PXBSAM,PXBSKY,PXBCNT,PXBPRV,FPRI
"RTN","PXBGPRV",28,0)
 K PRVDR
"RTN","PXBGPRV",29,0)
 S FPRI=""
"RTN","PXBGPRV",30,0)
 ; create an array of current providers without duplicates, with their
"RTN","PXBGPRV",31,0)
 ; ^(0) node as a value
"RTN","PXBGPRV",32,0)
 I $D(^AUPNVPRV("AD",VISIT)) D
"RTN","PXBGPRV",33,0)
 .D GETPRV^PXAPIOE(VISIT,"^TMP(""PXBU"",$J,""PRV"")")
"RTN","PXBGPRV",34,0)
 ;
"RTN","PXBGPRV",35,0)
A ;--Set array with PROVIDERS
"RTN","PXBGPRV",36,0)
 ;
"RTN","PXBGPRV",37,0)
 I $G(^TMP("PXBU",$J,"PRV")) D
"RTN","PXBGPRV",38,0)
 .S IEN=0 F  S IEN=$O(^TMP("PXBU",$J,"PRV",IEN)) Q:IEN'>0  D
"RTN","PXBGPRV",39,0)
 ..S PRIMARY=$S($P(^(IEN),U,4)="P":"PRIMARY",1:"SECONDARY")
"RTN","PXBGPRV",40,0)
 ..S PRVI=+^(IEN),TYPEI=$P(^(IEN),U,6)
"RTN","PXBGPRV",41,0)
 ..S DIC=200,DIC1=DIC,DR=.01,DA=PRVI,DIQ="PRVN" D EN^DIQ1 D
"RTN","PXBGPRV",42,0)
 ...S PRV=PRVN(DIC1,DA,DR)
"RTN","PXBGPRV",43,0)
 ..S FPRI=FPRI_$E(PRIMARY,1,3) ;-Creating Flag for Primary prompt
"RTN","PXBGPRV",44,0)
 ..S TYPE=$$OCCUP("","","",2,TYPEI) D
"RTN","PXBGPRV",45,0)
 ...N Y,DATE
"RTN","PXBGPRV",46,0)
 ...S Y=+$P($G(^AUPNVSIT(VISIT,0)),U) X ^DD("DD") S DATE=$P(Y,"@",1)
"RTN","PXBGPRV",47,0)
 ...I TYPEI="" S TYPE=$$GET^XUA4A72(PRVI,+$P($P($G(^AUPNVSIT(VISIT,0)),U),"."))
"RTN","PXBGPRV",48,0)
 ...I +TYPE=-2 S TYPE="*** CLASS not 'ACTIVE' on "_DATE_"***"
"RTN","PXBGPRV",49,0)
 ...I +TYPE=-1 S TYPE=""
"RTN","PXBGPRV",50,0)
 ...;I +TYPE>0 S TYPE="**** DELETE and RE-ENTER PROVIDER****"
"RTN","PXBGPRV",51,0)
 ...I +TYPE>0 S TYPE=""
"RTN","PXBGPRV",52,0)
 ..S GROUP=PRV_U_PRIMARY_U_TYPE_U_PRVI
"RTN","PXBGPRV",53,0)
 ..I PRIMARY["PRI" S PRVDR("PRIMARY")=PRV_U_IEN_U_PRVI
"RTN","PXBGPRV",54,0)
 ..S PRV(PRV,IEN)=GROUP
"RTN","PXBGPRV",55,0)
 K ^TMP("PXBU",$J,"PRV")
"RTN","PXBGPRV",56,0)
 ;
"RTN","PXBGPRV",57,0)
B ;--Add line numbers
"RTN","PXBGPRV",58,0)
 ;create local arrays with data from existing providers
"RTN","PXBGPRV",59,0)
 I $D(PRV) D
"RTN","PXBGPRV",60,0)
 .S PXBC=0,PRV="" F  S PRV=$O(PRV(PRV)) Q:PRV=""  D
"RTN","PXBGPRV",61,0)
 ..S IEN=0 F  S IEN=$O(PRV(PRV,IEN)) Q:IEN=""  S PXBC=PXBC+1 D
"RTN","PXBGPRV",62,0)
 ...S PXBKY(PRV,PXBC)=$G(PRV(PRV,IEN)),PXBSAM(PXBC)=$G(PRV(PRV,IEN))
"RTN","PXBGPRV",63,0)
 ...S PXBSKY(PXBC,IEN)=$P(PRV(PRV,IEN),U,4)
"RTN","PXBGPRV",64,0)
 ...K PRV(PRV,IEN)
"RTN","PXBGPRV",65,0)
FINISH ;--Finish up some variables
"RTN","PXBGPRV",66,0)
 S:FPRI'["PRI" FPRI=0 S:FPRI["PRI" FPRI=1
"RTN","PXBGPRV",67,0)
 ;FPRI=0 Then there is no Primary Selected yet
"RTN","PXBGPRV",68,0)
EXIT ;--set a providers count
"RTN","PXBGPRV",69,0)
 S PXBCNT=+$G(PXBC)
"RTN","PXBGPRV",70,0)
 Q
"RTN","PXBGPRV",71,0)
 ;
"RTN","PXBGPRV",72,0)
OCCUP(IEN,DATE,CODE,RETURN,CLASSIEN) ;--FORMAT PERSON CLASS TO DISPLAY
"RTN","PXBGPRV",73,0)
 ; IEN      = Provider pointer to file# 200
"RTN","PXBGPRV",74,0)
 ; DATE     = Date of occurrence of service
"RTN","PXBGPRV",75,0)
 ; CODE     = Person class Code (if already known)
"RTN","PXBGPRV",76,0)
 ;          **(Required step) If you use code leave IEN and DATE Blank
"RTN","PXBGPRV",77,0)
 ; RETURN   = (Required) Flag to decide what format you want the
"RTN","PXBGPRV",78,0)
 ;          return value.
"RTN","PXBGPRV",79,0)
 ; CLASSIEN = Ien of entry in the PERSON CLASS file#8932.1 If the Ien
"RTN","PXBGPRV",80,0)
 ;            was saved this parameter could be sent in instead of CODE.
"RTN","PXBGPRV",81,0)
 ; 
"RTN","PXBGPRV",82,0)
 ;   1    = IEN^OCCUPATION^SPECIALITY^SUBSPECIALITY^STATUS^DATE INACTIVATED^VA CODE
"RTN","PXBGPRV",83,0)
 ;   2    = Short Description
"RTN","PXBGPRV",84,0)
 ;   3    = Short Description^VA CODE
"RTN","PXBGPRV",85,0)
 ;        *** If only CODE and RETURN = 1 There is no value or other
"RTN","PXBGPRV",86,0)
 ;            value in the STATUS and DATE INACTIVATED fields.
"RTN","PXBGPRV",87,0)
 ;
"RTN","PXBGPRV",88,0)
 ; Output:
"RTN","PXBGPRV",89,0)
 ;        -1 "no comment" function call to person class couldn't find
"RTN","PXBGPRV",90,0)
 ;            a class for that person.
"RTN","PXBGPRV",91,0)
 ;        -1^COMMENT This function is called incorrectly
"RTN","PXBGPRV",92,0)
 ;        -2 "no comment" There is no ACTIVE person class for provider
"RTN","PXBGPRV",93,0)
 ;            based on the date provided.
"RTN","PXBGPRV",94,0)
 ;
"RTN","PXBGPRV",95,0)
 N OCC,SPE,SUB,ENTRY,DIS,OCCL,TYPE,VACODE,ANS
"RTN","PXBGPRV",96,0)
 ;--VALIDATE
"RTN","PXBGPRV",97,0)
 I (+$G(IEN)'>0)&($L(IEN)>0) Q -1_"^INVALID PERSON IEN"
"RTN","PXBGPRV",98,0)
 I '$G(IEN),'$G(DATE),$G(CODE)="",'$G(RETURN),'$G(CLASSIEN) Q -1_"^NO PARAMETERS"
"RTN","PXBGPRV",99,0)
 I '$G(IEN),'$G(DATE),$G(CODE)="",$G(RETURN),'$G(CLASSIEN) Q -1_"^NO PARAMETERS"
"RTN","PXBGPRV",100,0)
 I '$G(RETURN) Q -1_"^NO RETURN PARAMETER (Required)"
"RTN","PXBGPRV",101,0)
 I $G(RETURN)]"",(RETURN'<4!(RETURN'>0)) Q -1_"^RETURN MUST BE 1,2,or 3"
"RTN","PXBGPRV",102,0)
 I DATE]"",+DATE'>0 Q -1_"^INVALID FILEMAN DATE"
"RTN","PXBGPRV",103,0)
 I $G(IEN) Q:'$D(^VA(200,$G(IEN))) -1_"^NO SUCH IEN IN FILE# 200"
"RTN","PXBGPRV",104,0)
 I $G(IEN),$G(DATE) D  I $G(RETURN)=1 Q TYPE
"RTN","PXBGPRV",105,0)
 .S TYPE=$$GET^XUA4A72(IEN,$P(DATE,".")),VACODE=$P(TYPE,U,7)
"RTN","PXBGPRV",106,0)
 I $G(IEN),$G(DATE),+TYPE<0 Q TYPE
"RTN","PXBGPRV",107,0)
 ;
"RTN","PXBGPRV",108,0)
 ;---CONVERT IEN TO CODE
"RTN","PXBGPRV",109,0)
 I $G(CLASSIEN) S CODE=$$IEN2CODE^XUA4A72(CLASSIEN)
"RTN","PXBGPRV",110,0)
 ;
"RTN","PXBGPRV",111,0)
 I $G(CODE)]"",'$G(IEN),'$G(DATE) S TYPE=$O(^USC(8932.1,"F",$G(CODE),0)),VACODE=CODE I $G(RETURN)=1 S ANS=TYPE_U_$G(^USC(8932.1,TYPE,0)) Q ANS
"RTN","PXBGPRV",112,0)
 I '$G(TYPE) Q -1_"UNABLE TO IDENTIFY THE PERSON CLASS IEN" ;Often due to a missing VA CODE field
"RTN","PXBGPRV",113,0)
 S ENTRY=$G(^USC(8932.1,+TYPE,0))
"RTN","PXBGPRV",114,0)
OCC ;---OCCUPATION
"RTN","PXBGPRV",115,0)
 S OCCL=$P(ENTRY,U)
"RTN","PXBGPRV",116,0)
 S OCC=$P($P(ENTRY,U)," ",1)
"RTN","PXBGPRV",117,0)
 I OCCL["Physicians (M.D" S OCC="Physician"
"RTN","PXBGPRV",118,0)
 I OCCL["Physician Assistant" S OCC=OCCL
"RTN","PXBGPRV",119,0)
 I OCCL["Speech, Language" S OCC="Language"
"RTN","PXBGPRV",120,0)
 I OCCL["Technologists" S OCC="Technical"
"RTN","PXBGPRV",121,0)
 I OCCL["Eye and Vision" S OCC="Ophthalmic"
"RTN","PXBGPRV",122,0)
 I OCCL["Respiratory, Rehab" S OCC="Therapist"
"RTN","PXBGPRV",123,0)
 I OCCL["Podiatric" S OCC="Podiatry"
"RTN","PXBGPRV",124,0)
 ;
"RTN","PXBGPRV",125,0)
SPE ;--SPECIALITY
"RTN","PXBGPRV",126,0)
 S SPEL=$P(ENTRY,U,2)
"RTN","PXBGPRV",127,0)
 S SPE=$P(ENTRY,U,2)
"RTN","PXBGPRV",128,0)
 I SPEL["Registered Nurse" S SPE="R.N."
"RTN","PXBGPRV",129,0)
 I SPEL["Dentist" S SPE="Dentist"
"RTN","PXBGPRV",130,0)
 I SPEL["Clinical Services" S SPE="Clinical"
"RTN","PXBGPRV",131,0)
 I SPEL["Non-R.N.s" S SPE="Non R.N."
"RTN","PXBGPRV",132,0)
 I SPEL["Radiologic Sciences" S SPE="Radiology"
"RTN","PXBGPRV",133,0)
 I SPEL["Clinical Path" S SPE=""
"RTN","PXBGPRV",134,0)
 I SPEL["Physical Therap" S SPE="P.T."
"RTN","PXBGPRV",135,0)
 I SPEL["Obstetrics and Gynecology" S SPE="Ob. & Gyn."
"RTN","PXBGPRV",136,0)
 I SPEL["iatry and Neur" S SPE="Psyc & Neuro"
"RTN","PXBGPRV",137,0)
 I SPEL["Clinical Specialist" S SPE="Clinical"
"RTN","PXBGPRV",138,0)
 I SPEL["Registered Dietitian" S SPE="R. Dietitian"
"RTN","PXBGPRV",139,0)
 I SPEL["Rehabilitation Prac" S SPE="Rehabilitation"
"RTN","PXBGPRV",140,0)
 I OCC["Physician"&(SPE["Internal Medicine") S SPE="Internist"
"RTN","PXBGPRV",141,0)
 ;
"RTN","PXBGPRV",142,0)
SUB ;--SUBSPECIALITY
"RTN","PXBGPRV",143,0)
 S SUBL=$P(ENTRY,U,3)
"RTN","PXBGPRV",144,0)
 S SUB=$P(ENTRY,U,3)
"RTN","PXBGPRV",145,0)
 I SUB["Counselor"&(SPE["Counselor") S SPE=""
"RTN","PXBGPRV",146,0)
 I SUB["Therapist"&(SPE["Therapist") S SPE=""
"RTN","PXBGPRV",147,0)
 I SUB["Nurse"&(SPE["Nurse") S SPE=""
"RTN","PXBGPRV",148,0)
 I SUB["Pediatric"&(SPE["Pediatric") S SPE=""
"RTN","PXBGPRV",149,0)
 I SUB["Psychiatry"&(SPE["Psychiatry") S SPE=""
"RTN","PXBGPRV",150,0)
 I SUB["Podiatri"&(SPE["Podiatri") S SPE=""
"RTN","PXBGPRV",151,0)
 I SUB["Clinical and Laboratory Immunology" S SUB="Clin & Lab Immunology"
"RTN","PXBGPRV",152,0)
 I SUB["Clinical & Laboratory Immunology" S SUB="Clin & Lab Immunology"
"RTN","PXBGPRV",153,0)
 I SUB["cine-Envir" S SUB="Occ & Environmental"
"RTN","PXBGPRV",154,0)
 I SUB["Child and Adolescent Psyc" S SUB="Pediatric Mental Health"
"RTN","PXBGPRV",155,0)
 I SUB["ist in Meta" S SUB="Metabolic"
"RTN","PXBGPRV",156,0)
 I SUB["ist in Pedia" S SUB="Pediatric"
"RTN","PXBGPRV",157,0)
 I SUB["ist in Renal" S SUB="Renal"
"RTN","PXBGPRV",158,0)
 I SUB["tion Intern" S SUB="Intern"
"RTN","PXBGPRV",159,0)
 I SUB["tion Coordin" S SUB="Coordinator"
"RTN","PXBGPRV",160,0)
 I SUB["tion Counselor" S SUB="Counselor"
"RTN","PXBGPRV",161,0)
 I SUB["for the Blind" S SUB="Orientation for Blind"
"RTN","PXBGPRV",162,0)
 I SUB["Dosimetrist" S SUB="Planning, Dosimetrist"
"RTN","PXBGPRV",163,0)
 I SPEL["Respiratory Care Pr"&(SUB'="") S SPE=""
"RTN","PXBGPRV",164,0)
 ;
"RTN","PXBGPRV",165,0)
 ;--CALCULATE THE BEST DISPLAY
"RTN","PXBGPRV",166,0)
 S DISL=OCCL_"-"_SPEL_"-"_SUBL
"RTN","PXBGPRV",167,0)
 S DIS=OCC_"/"_SPE_"/"_SUB
"RTN","PXBGPRV",168,0)
 I SUB[SPE S DIS=OCC_"/"_SUB
"RTN","PXBGPRV",169,0)
 I SPE="" S DIS=OCC_"/"_SUB
"RTN","PXBGPRV",170,0)
 I SUB="" S DIS=OCC_"/"_SPE
"RTN","PXBGPRV",171,0)
AND I $L(DIS," and ")>1 D
"RTN","PXBGPRV",172,0)
 .N I F I=1:1:$L(DIS," ") I $P(DIS," ",I)="and" S $P(DIS," ",I)="&"
"RTN","PXBGPRV",173,0)
 I $L(DIS," and ")>1 G AND
"RTN","PXBGPRV",174,0)
 ;Q $E(DIS,1,40)_"   "_$L(DIS)
"RTN","PXBGPRV",175,0)
 ;Q $E(DIS,1,40)_"***"_OCCL
"RTN","PXBGPRV",176,0)
 ;Q SPE_"  ***  "_SPEL
"RTN","PXBGPRV",177,0)
 ;Q SUB_"  ***  "_SUBL
"RTN","PXBGPRV",178,0)
 ;Q DISL_"~"_DIS
"RTN","PXBGPRV",179,0)
 ;Q ""_"~"_DIS
"RTN","PXBGPRV",180,0)
 I $G(RETURN)=2 Q DIS
"RTN","PXBGPRV",181,0)
 I $G(RETURN)=3 Q DIS_U_VACODE
"RTN","PXBGPRV",182,0)
 Q -1_"^SOMETHING BAD WRONG_SHOULDN'T BE HERE"
"VER")
8.0^22.2
"BLD",10905,6)
^166
**END**
**END**

