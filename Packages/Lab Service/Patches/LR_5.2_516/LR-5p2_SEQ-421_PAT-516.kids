Released LR*5.2*516 SEQ #421
Extracted from mail message
**KIDS**:LR*5.2*516^

**INSTALL NAME**
LR*5.2*516
"BLD",11392,0)
LR*5.2*516^LAB SERVICE^0^3190213^y
"BLD",11392,1,0)
^^1^1^3190201^
"BLD",11392,1,1,0)
LAB TEST NOT DISPLAYED IN CPRS MOST RECENT VIEW
"BLD",11392,4,0)
^9.64PA^^
"BLD",11392,6.3)
3
"BLD",11392,"ABPKG")
n
"BLD",11392,"KRN",0)
^9.67PA^1.61^23
"BLD",11392,"KRN",.4,0)
.4
"BLD",11392,"KRN",.401,0)
.401
"BLD",11392,"KRN",.402,0)
.402
"BLD",11392,"KRN",.403,0)
.403
"BLD",11392,"KRN",.5,0)
.5
"BLD",11392,"KRN",.84,0)
.84
"BLD",11392,"KRN",1.6,0)
1.6
"BLD",11392,"KRN",1.61,0)
1.61
"BLD",11392,"KRN",1.62,0)
1.62
"BLD",11392,"KRN",3.6,0)
3.6
"BLD",11392,"KRN",3.8,0)
3.8
"BLD",11392,"KRN",9.2,0)
9.2
"BLD",11392,"KRN",9.8,0)
9.8
"BLD",11392,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",11392,"KRN",9.8,"NM",1,0)
LR7OGMC^^0^B37375586
"BLD",11392,"KRN",9.8,"NM","B","LR7OGMC",1)

"BLD",11392,"KRN",19,0)
19
"BLD",11392,"KRN",19.1,0)
19.1
"BLD",11392,"KRN",101,0)
101
"BLD",11392,"KRN",409.61,0)
409.61
"BLD",11392,"KRN",771,0)
771
"BLD",11392,"KRN",779.2,0)
779.2
"BLD",11392,"KRN",870,0)
870
"BLD",11392,"KRN",8989.51,0)
8989.51
"BLD",11392,"KRN",8989.52,0)
8989.52
"BLD",11392,"KRN",8994,0)
8994
"BLD",11392,"KRN","B",.4,.4)

"BLD",11392,"KRN","B",.401,.401)

"BLD",11392,"KRN","B",.402,.402)

"BLD",11392,"KRN","B",.403,.403)

"BLD",11392,"KRN","B",.5,.5)

"BLD",11392,"KRN","B",.84,.84)

"BLD",11392,"KRN","B",1.6,1.6)

"BLD",11392,"KRN","B",1.61,1.61)

"BLD",11392,"KRN","B",1.62,1.62)

"BLD",11392,"KRN","B",3.6,3.6)

"BLD",11392,"KRN","B",3.8,3.8)

"BLD",11392,"KRN","B",9.2,9.2)

"BLD",11392,"KRN","B",9.8,9.8)

"BLD",11392,"KRN","B",19,19)

"BLD",11392,"KRN","B",19.1,19.1)

"BLD",11392,"KRN","B",101,101)

"BLD",11392,"KRN","B",409.61,409.61)

"BLD",11392,"KRN","B",771,771)

"BLD",11392,"KRN","B",779.2,779.2)

"BLD",11392,"KRN","B",870,870)

"BLD",11392,"KRN","B",8989.51,8989.51)

"BLD",11392,"KRN","B",8989.52,8989.52)

"BLD",11392,"KRN","B",8994,8994)

"BLD",11392,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",11392,"QUES",0)
^9.62^^
"BLD",11392,"REQB",0)
^9.611^1^1
"BLD",11392,"REQB",1,0)
LR*5.2*350^2
"BLD",11392,"REQB","B","LR*5.2*350",1)

"MBREQ")
0
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2981028^66481
"PKG",26,22,1,"PAH",1,0)
516^3190213
"PKG",26,22,1,"PAH",1,1,0)
^^1^1^3190213
"PKG",26,22,1,"PAH",1,1,1,0)
LAB TEST NOT DISPLAYED IN CPRS MOST RECENT VIEW
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","LR7OGMC")
0^1^B37375586^B33832740
"RTN","LR7OGMC",1,0)
LR7OGMC ;DALOI/STAFF- Interim report rpc memo chem ;11/19/09  17:59
"RTN","LR7OGMC",2,0)
 ;;5.2;LAB SERVICE;**187,230,312,286,356,372,395,350,516**;Sep 27, 1994;Build 3
"RTN","LR7OGMC",3,0)
 ;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","LR7OGMC",4,0)
 ;
"RTN","LR7OGMC",5,0)
 ; sets lab data into ^TMP("LR7OG",$J,"TP"
"RTN","LR7OGMC",6,0)
 ; ^TMP("LR7OG",$J,"G")=dfn^pnm^lrdfn^age^sex^lrcw
"RTN","LR7OGMC",7,0)
 ; ^TMP("LR7OG",$J,"TMP",LR Subscript)=ifn of test from 60
"RTN","LR7OGMC",8,0)
 ; ^TMP("LR7OG",$J,"T",ifn 60)=^LAB(60,IFN,0)
"RTN","LR7OGMC",9,0)
 ; ^TMP("LR7OG",$J,"TP",collect date/time)=zero node from data
"RTN","LR7OGMC",10,0)
 ; ^TMP("LR7OG",$J,"TP",collect date/time,printorder)=test#^name^printname^^printcode^dataname^result^flag^units^range^performing site
"RTN","LR7OGMC",11,0)
 ; ^TMP("LR7OG",$J,"TP",collect date/time,printorder,#)=interpretation
"RTN","LR7OGMC",12,0)
 ; ^TMP("LR7OG",$J,"TP",collect date/time,"C",#)=comment
"RTN","LR7OGMC",13,0)
 ; ALL = 1 when coming from INTERIMG^LR7OGM (Most Recent)
"RTN","LR7OGMC",14,0)
 ;
"RTN","LR7OGMC",15,0)
 ;
"RTN","LR7OGMC",16,0)
CH(LRDFN,IDT,ALL,OUTCNT,FORMAT,DONE,SKIP) ; from LR7OGM
"RTN","LR7OGMC",17,0)
 N ACC,AREA,ACDT,CDT,CHSUB,CMNT,GOTNP,INTP,LABSUB,LRAAT,LRAD,NUM,PNODE
"RTN","LR7OGMC",18,0)
 N PORDER,SPEC,TCNT,TESTNUM,TESTSUB,UID,ZERO
"RTN","LR7OGMC",19,0)
 ;
"RTN","LR7OGMC",20,0)
 S GOTNP=0,ZERO=$G(^LR(LRDFN,"CH",IDT,0)),UID=$P($G(^("ORU")),"^")
"RTN","LR7OGMC",21,0)
 I UID'="" S UID=$$CHECKUID^LRWU4(UID)
"RTN","LR7OGMC",22,0)
 S AREA=$P(UID,"^",2),ACDT=$P(UID,"^",3),NUM=$P(UID,"^",4)
"RTN","LR7OGMC",23,0)
 S CDT=+ZERO,LABSUB="CH",TCNT=0,SPEC=$P(ZERO,U,5)
"RTN","LR7OGMC",24,0)
 ;
"RTN","LR7OGMC",25,0)
 D GETNP ;Check for NP comments
"RTN","LR7OGMC",26,0)
 I FORMAT,GOTNP S SKIP=1 Q
"RTN","LR7OGMC",27,0)
 I GOTNP,'$P(ZERO,U,3) D  Q
"RTN","LR7OGMC",28,0)
 . D ACC:UID
"RTN","LR7OGMC",29,0)
 . I $O(^TMP("LR7OG",$J,"TP",CDT,0)) K:FORMAT ^TMP("LR7OG",$J,"TP",CDT) D CHKNP Q
"RTN","LR7OGMC",30,0)
 ;
"RTN","LR7OGMC",31,0)
 D ACC:UID,VER
"RTN","LR7OGMC",32,0)
 I '$O(^TMP("LR7OG",$J,"TP",CDT,0)) S SKIP=1 Q
"RTN","LR7OGMC",33,0)
 I '$O(^LR(LRDFN,"CH",IDT,1)) D CHKNP
"RTN","LR7OGMC",34,0)
 ;
"RTN","LR7OGMC",35,0)
 I FORMAT D
"RTN","LR7OGMC",36,0)
 . S ^TMP("LR7OGX",$J,"OUTPUT",OUTCNT)="0^CH^"_(9999999-IDT)
"RTN","LR7OGMC",37,0)
 . S OUTCNT=OUTCNT+1,DONE=1
"RTN","LR7OGMC",38,0)
 . I 'GOTNP D GRID^LR7OGMG(.OUTCNT)
"RTN","LR7OGMC",39,0)
 ;
"RTN","LR7OGMC",40,0)
 I 'FORMAT D PRINT^LR7OGMP(.OUTCNT)
"RTN","LR7OGMC",41,0)
 ;
"RTN","LR7OGMC",42,0)
 K ^TMP("LR7OG",$J,"TP")
"RTN","LR7OGMC",43,0)
 ;
"RTN","LR7OGMC",44,0)
 Q
"RTN","LR7OGMC",45,0)
 ;
"RTN","LR7OGMC",46,0)
 ;
"RTN","LR7OGMC",47,0)
ACC ;Check Accession
"RTN","LR7OGMC",48,0)
 N ANODE,X0,LRODT,LRSN,LROD0,LROD1,X,STATUS,LROS
"RTN","LR7OGMC",49,0)
 ;
"RTN","LR7OGMC",50,0)
 K ^TMP("LR7OG",$J,"ACC")
"RTN","LR7OGMC",51,0)
 ;
"RTN","LR7OGMC",52,0)
 I '$D(^LRO(68,+AREA,1,+ACDT,1,+NUM)) Q
"RTN","LR7OGMC",53,0)
 ;
"RTN","LR7OGMC",54,0)
 S X0=$G(^LRO(68,+AREA,1,+ACDT,1,+NUM,0)),LRODT=$P(X0,"^",4),LRSN=$P(X0,"^",5),LROD0=$G(^LRO(69,+LRODT,1,LRSN,0)),LROD1=$G(^(1))
"RTN","LR7OGMC",55,0)
 ;
"RTN","LR7OGMC",56,0)
 S TESTNUM=0
"RTN","LR7OGMC",57,0)
 F  S TESTNUM=$O(^LRO(68,+AREA,1,+ACDT,1,+NUM,4,TESTNUM)) Q:'TESTNUM  S ANODE=^(TESTNUM,0) D
"RTN","LR7OGMC",58,0)
 . I $P(ANODE,U,6)'="*Not Performed" Q:$P(ANODE,U,5)  ;complete date
"RTN","LR7OGMC",59,0)
 . I FORMAT,$P(ANODE,U,6)="*Not Performed" Q  ;Don't show NP'd results on Most Recent Report
"RTN","LR7OGMC",60,0)
 . I 'ALL,'$D(^TMP("LR7OG",$J,"T",TESTNUM)),'$D(TESTS(TESTNUM)) Q  ;Selected test not in accession
"RTN","LR7OGMC",61,0)
 . I TESTNUM'=$P(ANODE,"^",9),$P($G(^LRO(68,+AREA,1,+ACDT,1,+NUM,4,+$P(ANODE,"^",9),0)),"^",5) Q  ;complete date on parent
"RTN","LR7OGMC",62,0)
 . S ^TMP("LR7OG",$J,"ACC",TESTNUM)=ANODE
"RTN","LR7OGMC",63,0)
 ;
"RTN","LR7OGMC",64,0)
 I '$O(^TMP("LR7OG",$J,"ACC",0)) Q
"RTN","LR7OGMC",65,0)
 ;
"RTN","LR7OGMC",66,0)
 S TESTNUM=0
"RTN","LR7OGMC",67,0)
 F  S TESTNUM=$O(^TMP("LR7OG",$J,"ACC",TESTNUM)) Q:'TESTNUM  S ANODE=^(TESTNUM) D
"RTN","LR7OGMC",68,0)
 . Q:'$D(^LAB(60,TESTNUM,.1))  S PNODE=^(.1) I '("BO"[$P($G(^(0)),U,3)) Q
"RTN","LR7OGMC",69,0)
 . S PORDER=$P(PNODE,U,6),PORDER=$S(PORDER:PORDER,1:1/1000000)
"RTN","LR7OGMC",70,0)
 . F  Q:'$D(^TMP("LR7OG",$J,"TP",CDT,PORDER))  Q:TESTNUM=+^(PORDER)  S PORDER=PORDER+1
"RTN","LR7OGMC",71,0)
 . I $D(^TMP("LR7OG",$J,"TP",CDT,PORDER)) Q
"RTN","LR7OGMC",72,0)
 . S LROS="Collected - Specimen In Lab"
"RTN","LR7OGMC",73,0)
 . I LROD1'="" S X=$P(LROD1,U,4),LROS=$S(X="C":"Collected - Specimen In Lab",X="U":"Uncollected, cancelled",1:"On Collection List")
"RTN","LR7OGMC",74,0)
 . S STATUS=$S($P(ANODE,"^",6)="*Not Performed":"Test Not Performed",1:LROS)
"RTN","LR7OGMC",75,0)
 . S ^TMP("LR7OG",$J,"TP",CDT,PORDER)=TESTNUM_U_$P(^LAB(60,TESTNUM,0),U)_U_$P(PNODE,U)_U_$P(PNODE,U,2)_U_"X"_U_$P(^(0),U,5)_U_STATUS
"RTN","LR7OGMC",76,0)
 . S TCNT=TCNT+1
"RTN","LR7OGMC",77,0)
 ;
"RTN","LR7OGMC",78,0)
 K ^TMP("LR7OG",$J,"ACC")
"RTN","LR7OGMC",79,0)
 I TCNT S ^TMP("LR7OG",$J,"TP",CDT)=ZERO
"RTN","LR7OGMC",80,0)
 ;
"RTN","LR7OGMC",81,0)
 Q
"RTN","LR7OGMC",82,0)
 ;
"RTN","LR7OGMC",83,0)
 ;
"RTN","LR7OGMC",84,0)
VER ; Check Verified Results
"RTN","LR7OGMC",85,0)
 Q:'$P(ZERO,U,3)
"RTN","LR7OGMC",86,0)
 ;
"RTN","LR7OGMC",87,0)
 I ALL D
"RTN","LR7OGMC",88,0)
 . S TESTSUB=1
"RTN","LR7OGMC",89,0)
 . F  S TESTSUB=$O(^LR(LRDFN,"CH",IDT,TESTSUB)) Q:TESTSUB<1  S TESTNUM=$O(^LAB(60,"C","CH;"_TESTSUB_";1",0)) D CHSETUP
"RTN","LR7OGMC",90,0)
 ;
"RTN","LR7OGMC",91,0)
 I 'ALL D
"RTN","LR7OGMC",92,0)
 . S TESTSUB=1
"RTN","LR7OGMC",93,0)
 . F  S TESTSUB=$O(^TMP("LR7OG",$J,"TMP",TESTSUB)) Q:TESTSUB<1  S TESTNUM=+^(TESTSUB) D CHSETUP
"RTN","LR7OGMC",94,0)
 ;
"RTN","LR7OGMC",95,0)
 I TCNT D
"RTN","LR7OGMC",96,0)
 . S ^TMP("LR7OG",$J,"TP",CDT)=ZERO,CMNT=0
"RTN","LR7OGMC",97,0)
 . F  S CMNT=+$O(^LR(LRDFN,LABSUB,IDT,1,CMNT)) Q:CMNT<1  S ^TMP("LR7OG",$J,"TP",CDT,"C",CMNT)=^(CMNT,0) S TCNT=TCNT+1
"RTN","LR7OGMC",98,0)
 Q
"RTN","LR7OGMC",99,0)
 ;
"RTN","LR7OGMC",100,0)
 ;
"RTN","LR7OGMC",101,0)
CHSETUP ; within scope of CH
"RTN","LR7OGMC",102,0)
 ;
"RTN","LR7OGMC",103,0)
 N LRX
"RTN","LR7OGMC",104,0)
 I 'TESTNUM Q
"RTN","LR7OGMC",105,0)
 Q:'$D(^LAB(60,TESTNUM,.1))  S PNODE=^(.1) I '("BO"[$P($G(^(0)),U,3)) Q
"RTN","LR7OGMC",106,0)
 Q:'$D(^LR(LRDFN,LABSUB,IDT,TESTSUB))  Q:'$L($P(^(TESTSUB),U))
"RTN","LR7OGMC",107,0)
 ;
"RTN","LR7OGMC",108,0)
 S PORDER=$P(PNODE,U,6),PORDER=$S(PORDER:PORDER,1:TESTSUB/1000000)
"RTN","LR7OGMC",109,0)
 F  Q:'$D(^TMP("LR7OG",$J,"TP",CDT,PORDER))  Q:TESTNUM=+^(PORDER)  S PORDER=PORDER+1
"RTN","LR7OGMC",110,0)
 ;
"RTN","LR7OGMC",111,0)
 I $D(^TMP("LR7OG",$J,"TP",CDT,PORDER)) Q
"RTN","LR7OGMC",112,0)
 ;
"RTN","LR7OGMC",113,0)
 S LRX=$$TSTRES^LRRPU(LRDFN,LABSUB,IDT,TESTSUB,TESTNUM)
"RTN","LR7OGMC",114,0)
 S ^TMP("LR7OG",$J,"TP",CDT,PORDER)=TESTNUM_U_$P(^LAB(60,TESTNUM,0),U)_U_$P(PNODE,U)_U_$P(PNODE,U,2)_U_$P(PNODE,U,3)_U_$P(^(0),U,5)_U_$P(LRX,U)_U_$P(LRX,U,2)_U_$P(LRX,U,5)_U_$$EN^LRLRRVF($P(LRX,U,3),$P(LRX,U,4))_U_$P(LRX,U,6)
"RTN","LR7OGMC",115,0)
 ;
"RTN","LR7OGMC",116,0)
 ; Save performing lab ien in list
"RTN","LR7OGMC",117,0)
 I $P(LRX,U,6) S ^TMP("LRPLS",$J,$P(LRX,U,6))=""
"RTN","LR7OGMC",118,0)
 ;
"RTN","LR7OGMC",119,0)
 S TCNT=TCNT+1
"RTN","LR7OGMC",120,0)
 I $D(^LAB(60,TESTNUM,1,SPEC,1,0)) D
"RTN","LR7OGMC",121,0)
 . S INTP=0
"RTN","LR7OGMC",122,0)
 . F  S INTP=+$O(^LAB(60,TESTNUM,1,SPEC,1,INTP)) Q:INTP<1  D
"RTN","LR7OGMC",123,0)
 . . S ^TMP("LR7OG",$J,"TP",CDT,PORDER,INTP)=^(INTP,0)
"RTN","LR7OGMC",124,0)
 . . S TCNT=TCNT+1
"RTN","LR7OGMC",125,0)
 Q
"RTN","LR7OGMC",126,0)
 ;
"RTN","LR7OGMC",127,0)
 ;
"RTN","LR7OGMC",128,0)
CMT ; Retrieve specimen comments
"RTN","LR7OGMC",129,0)
 ;
"RTN","LR7OGMC",130,0)
 S ^TMP("LR7OG",$J,"TP",CDT)=ZERO,CMNT=0
"RTN","LR7OGMC",131,0)
 F  S CMNT=+$O(^LR(LRDFN,LABSUB,IDT,1,CMNT)) Q:CMNT<1  S ^TMP("LR7OG",$J,"TP",CDT,"C",CMNT)=^(CMNT,0) S TCNT=TCNT+1
"RTN","LR7OGMC",132,0)
 ;
"RTN","LR7OGMC",133,0)
 Q
"RTN","LR7OGMC",134,0)
 ;
"RTN","LR7OGMC",135,0)
 ;
"RTN","LR7OGMC",136,0)
CHKNP ; Check for NP comments and no verified results.
"RTN","LR7OGMC",137,0)
 ;
"RTN","LR7OGMC",138,0)
 N LRCAN,X
"RTN","LR7OGMC",139,0)
 S LRCAN=0
"RTN","LR7OGMC",140,0)
 ;*LR*5.2*516
"RTN","LR7OGMC",141,0)
 ;F  S LRCAN=+$O(^LR(LRDFN,"CH",IDT,1,LRCAN)) Q:LRCAN<1  S X=^(LRCAN,0) Q:(($E(X)="*")&(X["Not Performed:"))
"RTN","LR7OGMC",142,0)
 ;
"RTN","LR7OGMC",143,0)
 ; Print if cancel comment and no unverified results.
"RTN","LR7OGMC",144,0)
 ;I LRCAN<1 Q
"RTN","LR7OGMC",145,0)
 N LRTOTO,LRNPCNT
"RTN","LR7OGMC",146,0)
 S LRTOTO=$P($G(^LR(LRDFN,"CH",IDT,"ORUT",0)),U,4) ;total number of orders
"RTN","LR7OGMC",147,0)
 S LRNPCNT=0
"RTN","LR7OGMC",148,0)
 F  S LRCAN=+$O(^LR(LRDFN,"CH",IDT,1,LRCAN)) Q:LRCAN<1  D
"RTN","LR7OGMC",149,0)
 . S X=^(LRCAN,0)
"RTN","LR7OGMC",150,0)
 . I (($E(X)="*")&(X["Not Performed:")) S LRNPCNT=LRNPCNT+1
"RTN","LR7OGMC",151,0)
 ;quit if all orders are marked Not performed:
"RTN","LR7OGMC",152,0)
 I FORMAT!(LRTOTO=LRNPCNT) Q
"RTN","LR7OGMC",153,0)
 ;
"RTN","LR7OGMC",154,0)
 D CMT
"RTN","LR7OGMC",155,0)
 D PRINT^LR7OGMP(.OUTCNT)
"RTN","LR7OGMC",156,0)
 K ^TMP("LR7OG",$J,"TP")
"RTN","LR7OGMC",157,0)
 Q
"RTN","LR7OGMC",158,0)
 ;
"RTN","LR7OGMC",159,0)
 ;
"RTN","LR7OGMC",160,0)
GETNP ;Set NP flag (Not Performed)
"RTN","LR7OGMC",161,0)
 N LRCAN,X
"RTN","LR7OGMC",162,0)
 S LRCAN=0
"RTN","LR7OGMC",163,0)
 ;*LR*5.2*516
"RTN","LR7OGMC",164,0)
 ;F  S LRCAN=+$O(^LR(LRDFN,"CH",IDT,1,LRCAN)) Q:LRCAN<1  S X=^(LRCAN,0) Q:(($E(X)="*")&(X["Not Performed:"))
"RTN","LR7OGMC",165,0)
 ;Q:LRCAN<1
"RTN","LR7OGMC",166,0)
 S LRTOTO=$P($G(^LR(LRDFN,"CH",IDT,"ORUT",0)),U,4) ;total number of orders
"RTN","LR7OGMC",167,0)
 S LRNPCNT=0
"RTN","LR7OGMC",168,0)
 F  S LRCAN=+$O(^LR(LRDFN,"CH",IDT,1,LRCAN)) Q:LRCAN<1  D
"RTN","LR7OGMC",169,0)
 . S X=^(LRCAN,0)
"RTN","LR7OGMC",170,0)
 . I (($E(X)="*")&(X["Not Performed:")) S LRNPCNT=LRNPCNT+1
"RTN","LR7OGMC",171,0)
 ;quit if not all orders are marked Not performed:
"RTN","LR7OGMC",172,0)
 I LRTOTO'=LRNPCNT Q
"RTN","LR7OGMC",173,0)
 I $G(FORMAT) Q:$O(^LR(LRDFN,"CH",IDT,1))
"RTN","LR7OGMC",174,0)
 S GOTNP=1
"RTN","LR7OGMC",175,0)
 Q
"VER")
8.0^22.2
"BLD",11392,6)
^421
**END**
**END**

