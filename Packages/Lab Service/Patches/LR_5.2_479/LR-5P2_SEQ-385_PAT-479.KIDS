Released LR*5.2*479 SEQ #385
Extracted from mail message
**KIDS**:LR*5.2*479^

**INSTALL NAME**
LR*5.2*479
"BLD",9790,0)
LR*5.2*479^LAB SERVICE^0^3170223^y
"BLD",9790,1,0)
^^641^641^3170223^
"BLD",9790,1,1,0)
 This patch contains corrections that address issues related to the
"BLD",9790,1,2,0)
 VistA Lab Enhancements (VLE) released patches LR*5.2*462 and LR*5.2*469.
"BLD",9790,1,3,0)
 The description of the issues can be reviewed in the Problem and
"BLD",9790,1,4,0)
 Resolution sections of this patch description.
"BLD",9790,1,5,0)
 
"BLD",9790,1,6,0)
Blood Bank Review:
"BLD",9790,1,7,0)
==================
"BLD",9790,1,8,0)
 
"BLD",9790,1,9,0)
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*479 does not 
"BLD",9790,1,10,0)
 contain any changes to the VISTA BLOOD BANK Software as defined by 
"BLD",9790,1,11,0)
 ProPath standard titled: BBM Team Review of VistA Patches.
"BLD",9790,1,12,0)
 
"BLD",9790,1,13,0)
 RISK ANALYSIS: Changes made by patch LR*5.2*479 have no effect on Blood 
"BLD",9790,1,14,0)
 Bank software functionality, therefore RISK is none.
"BLD",9790,1,15,0)
 
"BLD",9790,1,16,0)
 VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes 
"BLD",9790,1,17,0)
 made, no specific validation requirements exist as a result of 
"BLD",9790,1,18,0)
 installation of this patch.
"BLD",9790,1,19,0)
 
"BLD",9790,1,20,0)
Patch Components:
"BLD",9790,1,21,0)
--------------------------
"BLD",9790,1,22,0)
 
"BLD",9790,1,23,0)
Files & Fields Associated:
"BLD",9790,1,24,0)
 
"BLD",9790,1,25,0)
File Name (Number)      Field Name (Number)        New/Modified/Deleted
"BLD",9790,1,26,0)
------------------      -------------------        --------------------
"BLD",9790,1,27,0)
LR AP DIALOG CONFIG    69.73,.01 ORDERABLE ITEM    Modified
"BLD",9790,1,28,0)
 (#69.73)
"BLD",9790,1,29,0)
                       69.73,.02 ALLOW OTHER       Modified
"BLD",9790,1,30,0)
                         SPECIMENS
"BLD",9790,1,31,0)
                       69.73,.03 RESTRICT          Modified
"BLD",9790,1,32,0)
                         MULTIPLE SPECIMENS
"BLD",9790,1,33,0)
                       69.73,1 ORDER PROMPTS       Modified
"BLD",9790,1,34,0)
                       69.731,.02 HIDE             Modified
"BLD",9790,1,35,0)
                       69.731,.03 REQUIRED         Modified
"BLD",9790,1,36,0)
                       69.731,.04 DEFAULT          Modified
"BLD",9790,1,37,0)
                       69.73,2 PAGES               Modified
"BLD",9790,1,38,0)
                       69.732,.01 PAGE#            Modified
"BLD",9790,1,39,0)
                       69.732,.02 PAGENAME         Modified
"BLD",9790,1,40,0)
                       69.732,.03 HID              Modified
"BLD",9790,1,41,0)
                       69.732,.04 REUIRED          Modified
"BLD",9790,1,42,0)
                       69.732,.06 W TITLE          Modified
"BLD",9790,1,43,0)
                       69.732,1 BULDER BLOCK       Modified
"BLD",9790,1,44,0)
                       69.7321,.0 PG BLOCK TITLE   Modified
"BLD",9790,1,45,0)
                       69.7321,.2 REQUIRED         Modified
"BLD",9790,1,46,0)
                       69.7321,03 LIST             Modified
"BLD",9790,1,47,0)
                       69.7321.04 DEFAULT          Modified
"BLD",9790,1,48,0)
                       69.7321,1 VALUES            Modified
"BLD",9790,1,49,0)
                       69.73211,.01 VALUE          Modified
"BLD",9790,1,50,0)
                       69.73211,.02 ASSOCIATE WITH Modified
"BLD",9790,1,51,0)
                       69.73211,.03 SPECIAL        Modified
"BLD",9790,1,52,0)
                       69.73,3 SPECIMEN            Modified
"BLD",9790,1,53,0)
                       69.733,.01 SPECIMEN         Modified
"BLD",9790,1,54,0)
                       69.733,.02 HIDE FROM        Modified
"BLD",9790,1,55,0)
                         Description        
"BLD",9790,1,56,0)
                       69.733,.03 Description      Modified 
"BLD",9790,1,57,0)
                         POSITION
"BLD",9790,1,58,0)
                       69.733,1 BUILDER BLOCK      Modified
"BLD",9790,1,59,0)
                       69.7331,.02 INACTIVATE      Modified
"BLD",9790,1,60,0)
                       69.7331,.03 REQUIRED        Modified
"BLD",9790,1,61,0)
                       69.7331,.04 DEFAULT         Modified
"BLD",9790,1,62,0)
                       69.7331,.05 Description     Modified
"BLD",9790,1,63,0)
                         POSITION
"BLD",9790,1,64,0)
                       69.7331,1 VALUES            Modified
"BLD",9790,1,65,0)
                       69.73311,.01 VALUES         Modified
"BLD",9790,1,66,0)
                       69.73311,.02 SPECIAL        Modified
"BLD",9790,1,67,0)
                       69.733,2.1 COLLECTION       Modified
"BLD",9790,1,68,0)
                         SAMPLE HIDE
"BLD",9790,1,69,0)
                       69.733,2.2 COLLECTION       Modified 
"BLD",9790,1,70,0)
                         SAMPLE DEFAULT
"BLD",9790,1,71,0)
                        
"BLD",9790,1,72,0)
  
"BLD",9790,1,73,0)
Forms Associated:
"BLD",9790,1,74,0)
 
"BLD",9790,1,75,0)
Form Name               File #          New/Modified/Deleted
"BLD",9790,1,76,0)
---------               ------          --------------------
"BLD",9790,1,77,0)
N/A
"BLD",9790,1,78,0)
 
"BLD",9790,1,79,0)
 
"BLD",9790,1,80,0)
Mail Groups Associated:
"BLD",9790,1,81,0)
 
"BLD",9790,1,82,0)
Mail Group Name          New/Modified/Deleted
"BLD",9790,1,83,0)
---------------          --------------------
"BLD",9790,1,84,0)
N/A
"BLD",9790,1,85,0)
 
"BLD",9790,1,86,0)
 
"BLD",9790,1,87,0)
Options Associated:
"BLD",9790,1,88,0)
 
"BLD",9790,1,89,0)
Option Name         Type         New/Modified/Deleted
"BLD",9790,1,90,0)
----------          -----        --------------------
"BLD",9790,1,91,0)
LR7OAP CPRS DIALOG  MENU         Modified
"BLD",9790,1,92,0)
 MENU
"BLD",9790,1,93,0)
LR7OAP CPRS DIALOG  PRINT        Modified
"BLD",9790,1,94,0)
 PRINT 
"BLD",9790,1,95,0)
 
"BLD",9790,1,96,0)
  
"BLD",9790,1,97,0)
Protocols Associated:
"BLD",9790,1,98,0)
 
"BLD",9790,1,99,0)
Protocol Name       New/Modified/Deleted
"BLD",9790,1,100,0)
-------------       -------------------- 
"BLD",9790,1,101,0)
N/A
"BLD",9790,1,102,0)
 
"BLD",9790,1,103,0)
 
"BLD",9790,1,104,0)
Security Keys Associated:
"BLD",9790,1,105,0)
 
"BLD",9790,1,106,0)
Security Key Name
"BLD",9790,1,107,0)
-----------------
"BLD",9790,1,108,0)
N/A
"BLD",9790,1,109,0)
 
"BLD",9790,1,110,0)
 
"BLD",9790,1,111,0)
Templates Associated:
"BLD",9790,1,112,0)
 
"BLD",9790,1,113,0)
Template Name      Type      File Name (Number)  New/Modified/Deleted 
"BLD",9790,1,114,0)
-------------      -----     ------------------  --------------------
"BLD",9790,1,115,0)
N/A
"BLD",9790,1,116,0)
 
"BLD",9790,1,117,0)
 
"BLD",9790,1,118,0)
Additional Information:
"BLD",9790,1,119,0)
 
"BLD",9790,1,120,0)
N/A 
"BLD",9790,1,121,0)
 
"BLD",9790,1,122,0)
 
"BLD",9790,1,123,0)
New Service Requests (NSRs):
"BLD",9790,1,124,0)
--------------------------------------------   
"BLD",9790,1,125,0)
#20140511 
"BLD",9790,1,126,0)
 The Anatomic Pathology (AP) laboratory service needs a mechanism for 
"BLD",9790,1,127,0)
 clinicians to provide required patient-specific, procedure-specific, and 
"BLD",9790,1,128,0)
 specimen-specific information to facilitate specimen processing by 
"BLD",9790,1,129,0)
 pathologists. This mechanism must be in place for use by the specimen 
"BLD",9790,1,130,0)
 labeling application in order to generate a primary specimen label that 
"BLD",9790,1,131,0)
 positively identifies the specimen and accurately associates it with the 
"BLD",9790,1,132,0)
 patient.
"BLD",9790,1,133,0)
 
"BLD",9790,1,134,0)
Patient Safety Issues (PSIs):
"BLD",9790,1,135,0)
---------------------------------------
"BLD",9790,1,136,0)
N/A
"BLD",9790,1,137,0)
 
"BLD",9790,1,138,0)
 
"BLD",9790,1,139,0)
CA SDM Ticket(s) & Overview:
"BLD",9790,1,140,0)
--------------------------------------------
"BLD",9790,1,141,0)
 
"BLD",9790,1,142,0)
N/A
"BLD",9790,1,143,0)
 
"BLD",9790,1,144,0)
 
"BLD",9790,1,145,0)
Test Sites:
"BLD",9790,1,146,0)
---------------
"BLD",9790,1,147,0)
AP Dialogs w/OR*3.0*405:
"BLD",9790,1,148,0)
  North Florida/South Georgia Veterans Health System (Gainesville, FL)
"BLD",9790,1,149,0)
  Edward Hines Jr. VA Hospital
"BLD",9790,1,150,0)
  Philadelphia VA Medical Center
"BLD",9790,1,151,0)
 
"BLD",9790,1,152,0)
Problem:
"BLD",9790,1,153,0)
-------
"BLD",9790,1,154,0)
 Sub files 60.0216611,.01 (AOE CPRS SCREEN) and 60.12166,.01 (AOE SCREEN) 
"BLD",9790,1,155,0)
 in the LABORAOTRY TEST file (#60) were erroneously released with the
"BLD",9790,1,156,0)
 distribution of patch LR*5.2*462.
"BLD",9790,1,157,0)
 
"BLD",9790,1,158,0)
Resolution:
"BLD",9790,1,159,0)
-----------
"BLD",9790,1,160,0)
 These two fields will be removed from the data dictionary with the LR479 
"BLD",9790,1,161,0)
 post-install routine.
"BLD",9790,1,162,0)
 
"BLD",9790,1,163,0)
Problem:
"BLD",9790,1,164,0)
--------
"BLD",9790,1,165,0)
Sub file 69.321661,.01 (VFD AOE) in the LAB ORDER ENTRY file (#69) was 
"BLD",9790,1,166,0)
erroneously released with the distribution of patch LR*5.2*462.
"BLD",9790,1,167,0)
 
"BLD",9790,1,168,0)
Resoultion:
"BLD",9790,1,169,0)
-----------
"BLD",9790,1,170,0)
 This field will be removed form the data dictionary with the LR479 
"BLD",9790,1,171,0)
 post-install routine.
"BLD",9790,1,172,0)
 
"BLD",9790,1,173,0)
Problem:
"BLD",9790,1,174,0)
--------
"BLD",9790,1,175,0)
 Specimen Login in VistA does not assign correct accession number when 
"BLD",9790,1,176,0)
 using the new accession process added to the AP Specimen Log In option 
"BLD",9790,1,177,0)
 with patch LR*5.2*462. The order number entered at this point was created
"BLD",9790,1,178,0)
 using the new AP Order Dialog in CPRS. The accession area assigned to the
"BLD",9790,1,179,0)
 Laboratory test in file 60 was not being honored and only SURGICAL 
"BLD",9790,1,180,0)
 PATHOLOGY (SP) and CYTOLOGY (CY) accession areas were being utilized.
"BLD",9790,1,181,0)
 
"BLD",9790,1,182,0)
Resolution:
"BLD",9790,1,183,0)
-----------
"BLD",9790,1,184,0)
 Routine modifications were made to honor the correct accession area as
"BLD",9790,1,185,0)
 defined in the Laboratory test file in association with the division
"BLD",9790,1,186,0)
 of the user accessioning the order.
"BLD",9790,1,187,0)
 
"BLD",9790,1,188,0)
Problem:
"BLD",9790,1,189,0)
--------
"BLD",9790,1,190,0)
 Practitioner field in CPRS displays '0' if Surgeon/Physician is blank in 
"BLD",9790,1,191,0)
 VistA - Backdoor order only.
"BLD",9790,1,192,0)
 
"BLD",9790,1,193,0)
Resolution:
"BLD",9790,1,194,0)
-----------
"BLD",9790,1,195,0)
 Routine modifications were made to correct the storage of a zero when no
"BLD",9790,1,196,0)
 Surgeon/Physician was entered during the accessioning process. 
"BLD",9790,1,197,0)
 
"BLD",9790,1,198,0)
Problem:
"BLD",9790,1,199,0)
--------
"BLD",9790,1,200,0)
 Lock login process of AP Orders via Accessioning menu - Post Release
"BLD",9790,1,201,0)
 LR479.
"BLD",9790,1,202,0)
 
"BLD",9790,1,203,0)
Resolution:
"BLD",9790,1,204,0)
-----------
"BLD",9790,1,205,0)
 Option Accessioning tests ordered by ward order entry [LROE] has been
"BLD",9790,1,206,0)
 modified to not allow Anatomic Pathology orders to be processed. The 
"BLD",9790,1,207,0)
 user will see the following message before exiting the option:
"BLD",9790,1,208,0)
 
"BLD",9790,1,209,0)
    This is an Anatomic Path order                         
"BLD",9790,1,210,0)
 
"BLD",9790,1,211,0)
    Must use 'Log-in, anat path' Option to accession this Order           
"BLD",9790,1,212,0)
 
"BLD",9790,1,213,0)
Problem:
"BLD",9790,1,214,0)
--------
"BLD",9790,1,215,0)
 AP Backdoor order from VistA displays Send Patient to Lab as default 
"BLD",9790,1,216,0)
 Collection Status.
"BLD",9790,1,217,0)
 
"BLD",9790,1,218,0)
Resolution:
"BLD",9790,1,219,0)
-----------
"BLD",9790,1,220,0)
 Routine modifications were made to change the default from SP Send 
"BLD",9790,1,221,0)
 Patient to WC Ward Collect.
"BLD",9790,1,222,0)
 
"BLD",9790,1,223,0)
Problem:
"BLD",9790,1,224,0)
--------
"BLD",9790,1,225,0)
 Backdoor AP Order from VistA does not display patient location in CPRS.
"BLD",9790,1,226,0)
 
"BLD",9790,1,227,0)
Resolution:
"BLD",9790,1,228,0)
-----------
"BLD",9790,1,229,0)
 Routine modifications were made to pass the correct pointer to CPRS so 
"BLD",9790,1,230,0)
 that the ordering location will be reflected correctly.
"BLD",9790,1,231,0)
 
"BLD",9790,1,232,0)
 
"BLD",9790,1,233,0)
Problem:
"BLD",9790,1,234,0)
--------
"BLD",9790,1,235,0)
 Error <SUBSCRIPT>AP+2^LRXREF is being triggered during AP Specimen 
"BLD",9790,1,236,0)
 Log-in accessioning of orders created in CPRS. There was code in the 
"BLD",9790,1,237,0)
 routine that was trying to continue the accessioning process even if the 
"BLD",9790,1,238,0)
 test being accessioned did not have an accession area defined that 
"BLD",9790,1,239,0)
 matched the division of the accessioning person. The default lookup was 
"BLD",9790,1,240,0)
 expecting to find an SP for Surgical Pathology or a CY for Cytopathology 
"BLD",9790,1,241,0)
 accession area abbreviations. If a site has changed these abbreviations 
"BLD",9790,1,242,0)
 to something other than SP and CY the <SUBSCRIPT> error would be 
"BLD",9790,1,243,0)
 triggered.
"BLD",9790,1,244,0)
 
"BLD",9790,1,245,0)
Resolution:
"BLD",9790,1,246,0)
-----------
"BLD",9790,1,247,0)
 Routine modifications were made to remove the default accession area 
"BLD",9790,1,248,0)
 logic and replace it with code that will exit the user with the following
"BLD",9790,1,249,0)
 message:
"BLD",9790,1,250,0)
 
"BLD",9790,1,251,0)
[ TISSUE EXAM]  DOES NOT HAVE AN APPROPRIATE ACCESSION AREA DEFINED       
"BLD",9790,1,252,0)
                                 Log-in Aborted
"BLD",9790,1,253,0)
 
"BLD",9790,1,254,0)
Problem:
"BLD",9790,1,255,0)
--------
"BLD",9790,1,256,0)
 The VLE AP project is unable to acquire an ICR with $$DEFAULT^ORWLRAP1.
"BLD",9790,1,257,0)
 
"BLD",9790,1,258,0)
Resolution:
"BLD",9790,1,259,0)
-----------
"BLD",9790,1,260,0)
 This API was removed from the input transform of the .01 field of file 
"BLD",9790,1,261,0)
 69.73.
"BLD",9790,1,262,0)
 
"BLD",9790,1,263,0)
        DD: 69.73:.01
"BLD",9790,1,264,0)
 
"BLD",9790,1,265,0)
Problem:
"BLD",9790,1,266,0)
--------
"BLD",9790,1,267,0)
 The builder blocks had three misspellings (erosioin,technnique and SLide)
"BLD",9790,1,268,0)
 for selectable values.
"BLD",9790,1,269,0)
 
"BLD",9790,1,270,0)
Resolution:
"BLD",9790,1,271,0)
-----------
"BLD",9790,1,272,0)
 The patch has a post install sub-routine SPELL^LR479 that will search for
"BLD",9790,1,273,0)
 strings that equal "erosioin", "technnique" or "SLide" within the 69.73
"BLD",9790,1,274,0)
 file and set them to "erosion" and "technique" respectively.
"BLD",9790,1,275,0)
 
"BLD",9790,1,276,0)
        Routine: LR479
"BLD",9790,1,277,0)
 
"BLD",9790,1,278,0)
 
"BLD",9790,1,279,0)
Problem:
"BLD",9790,1,280,0)
--------
"BLD",9790,1,281,0)
 For the Urology,Prostate dialog Right Testis specimen the builder block 
"BLD",9790,1,282,0)
 "Submission Type" should be "Specimen Type" and "Specimen Submission" 
"BLD",9790,1,283,0)
 should be "Submission Type".
"BLD",9790,1,284,0)
 
"BLD",9790,1,285,0)
Resolution:
"BLD",9790,1,286,0)
-----------
"BLD",9790,1,287,0)
 The patch has a post install sub-routine TITLE^LR479 that will search for
"BLD",9790,1,288,0)
 a builder block with a value of "Orchiectomy" and if the builder block 
"BLD",9790,1,289,0)
 title reads "Submission Type" it will be changed to "Specimen Type" and 
"BLD",9790,1,290,0)
 the second builder block title will be set to "Submission Type".
"BLD",9790,1,291,0)
 
"BLD",9790,1,292,0)
        Routine: LR479
"BLD",9790,1,293,0)
 
"BLD",9790,1,294,0)
 Documentation Retrieval Instructions:
"BLD",9790,1,295,0)
 ------------------------------------- 
"BLD",9790,1,296,0)
 Software will be released via a PackMan message. 
"BLD",9790,1,297,0)
  
"BLD",9790,1,298,0)
 The preferred method is to retrieve files from download.vista.domain.ext.
"BLD",9790,1,299,0)
 This transmits the files from the first available server. Sites may 
"BLD",9790,1,300,0)
 also elect to retrieve files directly from a specific server. 
"BLD",9790,1,301,0)
  
"BLD",9790,1,302,0)
 Sites may retrieve the software and/or documentation directly using 
"BLD",9790,1,303,0)
 Secure File Transfer Protocol (SFTP) from the ANONYMOUS.SOFTWARE 
"BLD",9790,1,304,0)
 directory at the following OI Field Offices:
"BLD",9790,1,305,0)
    
"BLD",9790,1,306,0)
 Albany:                 domain.ext
"BLD",9790,1,307,0)
 Hines:                  domain.ext    
"BLD",9790,1,308,0)
 Salt Lake City:         domain.ext
"BLD",9790,1,309,0)
    
"BLD",9790,1,310,0)
 Title/File Name                       FTP Mode
"BLD",9790,1,311,0)
 -------------------------------------------------------------------------
"BLD",9790,1,312,0)
 N/A
"BLD",9790,1,313,0)
  
"BLD",9790,1,314,0)
 Documentation can also be found on the VA Software Documentation Library 
"BLD",9790,1,315,0)
 at:
"BLD",9790,1,316,0)
 http://www4.domain.ext/vdl/
"BLD",9790,1,317,0)
 
"BLD",9790,1,318,0)
 
"BLD",9790,1,319,0)
Patch Installation:
"BLD",9790,1,320,0)
  
"BLD",9790,1,321,0)
  
"BLD",9790,1,322,0)
 Pre/Post Installation Overview:
"BLD",9790,1,323,0)
 -------------------------------
"BLD",9790,1,324,0)
 N/A 
"BLD",9790,1,325,0)
  
"BLD",9790,1,326,0)
 Pre-Installation Instructions:
"BLD",9790,1,327,0)
 ------------------------------
"BLD",9790,1,328,0)
 N/A
"BLD",9790,1,329,0)
  
"BLD",9790,1,330,0)
 Installation Instructions:
"BLD",9790,1,331,0)
 --------------------------
"BLD",9790,1,332,0)
 This patch may be installed with users on the system although it is 
"BLD",9790,1,333,0)
 strongly recommended that it be installed during non-peak hours when 
"BLD",9790,1,334,0)
 LAB usage is at a minimum. This patch should take less than 5 minutes to
"BLD",9790,1,335,0)
install.
"BLD",9790,1,336,0)
  
"BLD",9790,1,337,0)
 This installation will install the components necessary to support the 
"BLD",9790,1,338,0)
 CPRS AP Order Dialog future functionality that is being released with
"BLD",9790,1,339,0)
 OR*3.0*405.
"BLD",9790,1,340,0)
  
"BLD",9790,1,341,0)
 1.  Choose the PackMan message containing this patch.
"BLD",9790,1,342,0)
  
"BLD",9790,1,343,0)
 2.  Choose the INSTALL/CHECK MESSAGE PackMan option.  
"BLD",9790,1,344,0)
  
"BLD",9790,1,345,0)
 3.  From the Kernel Installation and Distribution System Menu, select
"BLD",9790,1,346,0)
     the Installation Menu.  From this menu, you may elect to use the
"BLD",9790,1,347,0)
     following options. When prompted for the INSTALL NAME enter the 
"BLD",9790,1,348,0)
     patch LR*5.2*479:
"BLD",9790,1,349,0)
     a.  Backup a Transport Global - This option will create a backup
"BLD",9790,1,350,0)
         message of any routines exported with this patch. It will not
"BLD",9790,1,351,0)
         backup any other changes such as DDs or templates.
"BLD",9790,1,352,0)
     b.  Compare Transport Global to Current System - This option will
"BLD",9790,1,353,0)
         allow you to view all changes that will be made when this patch
"BLD",9790,1,354,0)
         is installed.  It compares all components of this patch
"BLD",9790,1,355,0)
         (routines, DDs, templates, etc.).
"BLD",9790,1,356,0)
     c.  Verify Checksums in Transport Global - This option will allow
"BLD",9790,1,357,0)
         you to ensure the integrity of the routines that are in the
"BLD",9790,1,358,0)
         transport global.
"BLD",9790,1,359,0)
      
"BLD",9790,1,360,0)
 4.  From the Installation Menu, select the Install Package(s) option and
"BLD",9790,1,361,0)
     choose the patch to install.
"BLD",9790,1,362,0)
  
"BLD",9790,1,363,0)
 5.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
"BLD",9790,1,364,0)
     Install? NO//'     
"BLD",9790,1,365,0)
     Respond: NO
"BLD",9790,1,366,0)
  
"BLD",9790,1,367,0)
 6.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
"BLD",9790,1,368,0)
     NO//'
"BLD",9790,1,369,0)
     Respond: NO
"BLD",9790,1,370,0)
  
"BLD",9790,1,371,0)
 7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
"BLD",9790,1,372,0)
     and Protocols? NO//' 
"BLD",9790,1,373,0)
     Respond: NO
"BLD",9790,1,374,0)
  
"BLD",9790,1,375,0)
 8.  If prompted 'Delay Install (Minutes):  (0 - 60): 0//' respond 0.
"BLD",9790,1,376,0)
  
"BLD",9790,1,377,0)
  
"BLD",9790,1,378,0)
 Post-Installation Instructions:
"BLD",9790,1,379,0)
 -------------------------------
"BLD",9790,1,380,0)
 N/A
"BLD",9790,1,381,0)
 
"BLD",9790,1,382,0)
 Back-Out Procedure:
"BLD",9790,1,383,0)
 -------------------
"BLD",9790,1,384,0)
 The build does not make any changes that would affect the operational 
"BLD",9790,1,385,0)
 state of the software and platform settings.
"BLD",9790,1,386,0)
  
"BLD",9790,1,387,0)
1. Back-Out Strategy
"BLD",9790,1,388,0)
     During installation, if the option to back up routines was run as 
"BLD",9790,1,389,0)
     directed, 'Backup a Transport Global', then routines have the ability
"BLD",9790,1,390,0)
     to be restored from the "backup" MailMan message that was generated.
"BLD",9790,1,391,0)
     However, the KIDS installation process does not perform a restore of 
"BLD",9790,1,392,0)
     other VistA components, such as data dictionary, cross-reference, and
"BLD",9790,1,393,0)
     template changes, etc. 
"BLD",9790,1,394,0)
     Prior to attempting a back-out of the software, please contact the VA
"BLD",9790,1,395,0)
     Help Desk at 1-855-673-4357 for support or assistance.
"BLD",9790,1,396,0)
 
"BLD",9790,1,397,0)
     a.  Back-Out Considerations
"BLD",9790,1,398,0)
         The LIM and the Chief of Pathology have the authority to order 
"BLD",9790,1,399,0)
the
"BLD",9790,1,400,0)
         back-out.
"BLD",9790,1,401,0)
 
"BLD",9790,1,402,0)
     b.  Back-Out Criteria
"BLD",9790,1,403,0)
         Criteria for a back-out includes, but are not limited, to the
"BLD",9790,1,404,0)
         following:
"BLD",9790,1,405,0)
         i. Failed baseline testing.
"BLD",9790,1,406,0)
         ii. Non-recoverable software error.
"BLD",9790,1,407,0)
 
"BLD",9790,1,408,0)
     c.  Back-Out Risks
"BLD",9790,1,409,0)
     No back-out risks have been determined at this time.
"BLD",9790,1,410,0)
     d.  Authority for Back-Out
"BLD",9790,1,411,0)
         The LIM, the Lab Manager, and the Chief of Pathology have the
"BLD",9790,1,412,0)
         authority to request and approve the back-out and accept the
"BLD",9790,1,413,0)
         risks.
"BLD",9790,1,414,0)
 
"BLD",9790,1,415,0)
2. Rollback Procedure
"BLD",9790,1,416,0)
    The LR*5.2*479 build as well as any installed dependent patch changes 
"BLD",9790,1,417,0)
    that follow these releases need to be taken out in reverse of the
"BLD",9790,1,418,0)
    order in which they were installed; routines and data dictionary
"BLD",9790,1,419,0)
    modifications and populated data must also be rolled back in reverse
"BLD",9790,1,420,0)
    order.
"BLD",9790,1,421,0)
    Please contact the VA Help Desk at 1-855-763-4357 for support or 
"BLD",9790,1,422,0)
    assistance regarding roll-back procedures.
"BLD",9790,1,423,0)
     
"BLD",9790,1,424,0)
     a.  Rollback Considerations
"BLD",9790,1,425,0)
         No rollback considerations have been determined at this time.
"BLD",9790,1,426,0)
  
"BLD",9790,1,427,0)
     b.  Rollback Criteria
"BLD",9790,1,428,0)
         The only criteria for a rollback that has been determined at this
"BLD",9790,1,429,0)
         time is that the installation failed baseline testing.
"BLD",9790,1,430,0)
     
"BLD",9790,1,431,0)
     c.  Rollback Risks
"BLD",9790,1,432,0)
         The only risk determined at this time is the possibility of
"BLD",9790,1,433,0)
         downtime which would only effect the users of the Laboratory
"BLD",9790,1,434,0)
         package.
"BLD",9790,1,435,0)
  
"BLD",9790,1,436,0)
     d.  Authority for Rollback
"BLD",9790,1,437,0)
         The LIM, the Lab Manager, and the Chief of Pathology have the
"BLD",9790,1,438,0)
         authority to require the rollback and accept the risks.
"BLD",9790,1,439,0)
 
"BLD",9790,1,440,0)
     e.  Rollback Procedure
"BLD",9790,1,441,0)
         The need for a rollback is highly unlikely, however if it is
"BLD",9790,1,442,0)
         required, please contact the Product Support team for
"BLD",9790,1,443,0)
         assistance. The rollback procedure will require Lab downtime and
"BLD",9790,1,444,0)
         a reinstall of any previous KIDS versions.
"BLD",9790,1,445,0)
 
"BLD",9790,1,446,0)
 
"BLD",9790,1,447,0)
 Example of Captured Installation:
"BLD",9790,1,448,0)
 ==================================
"BLD",9790,1,449,0)
 
"BLD",9790,1,450,0)
Enter message action (in IN basket): Ignore// Xtract KIDS
"BLD",9790,1,451,0)
 
"BLD",9790,1,452,0)
Select PackMan function: 6  INSTALL/CHECK MESSAGE
"BLD",9790,1,453,0)
 
"BLD",9790,1,454,0)
Line 389  Message #412245    Unloading KIDS Distribution   LR*5.2*479
"BLD",9790,1,455,0)
   LR*5.2*479
"BLD",9790,1,456,0)
 
"BLD",9790,1,457,0)
Want to Continue with Load? YES// YES
"BLD",9790,1,458,0)
Loading Distribution...
"BLD",9790,1,459,0)
 
"BLD",9790,1,460,0)
   LR*5.2*479
"BLD",9790,1,461,0)
Will first run the Environment Check Routine, LR479
"BLD",9790,1,462,0)
 
"BLD",9790,1,463,0)
 
"BLD",9790,1,464,0)
 
"BLD",9790,1,465,0)
                   --- Environment Check is Ok ---
"BLD",9790,1,466,0)
 
"BLD",9790,1,467,0)
 
"BLD",9790,1,468,0)
             Sending install loaded alert to mail group G.LMI
"BLD",9790,1,469,0)
 
"BLD",9790,1,470,0)
Select PackMan function: 
"BLD",9790,1,471,0)
 
"BLD",9790,1,472,0)
 
"BLD",9790,1,473,0)
Enter message action (in IN basket): Ignore// 
"BLD",9790,1,474,0)
 
"BLD",9790,1,475,0)
 
"BLD",9790,1,476,0)
Select Installation <TEST ACCOUNT> Option: 5  Backup a Transport Global
"BLD",9790,1,477,0)
Select INSTALL NAME:    LR*5.2*479    2/21/17@10:44:12
"BLD",9790,1,478,0)
     => LR*5.2*479
"BLD",9790,1,479,0)
 
"BLD",9790,1,480,0)
This Distribution was loaded on Feb 21, 2017@10:44:12 with header of 
"BLD",9790,1,481,0)
   LR*5.2*479
"BLD",9790,1,482,0)
   It consisted of the following Install(s):
"BLD",9790,1,483,0)
     LR*5.2*479
"BLD",9790,1,484,0)
Subject: Backup of LR*5.2*479 install on Feb 21, 2017
"BLD",9790,1,485,0)
  Replace 
"BLD",9790,1,486,0)
Loading Routines for LR*5.2*479.........
"BLD",9790,1,487,0)
Send mail to: BELSCHWINDER,MICHAEL//   BELSCHWINDER,MICHAEL
"BLD",9790,1,488,0)
Select basket to send to: IN//   
"BLD",9790,1,489,0)
And Send to: 
"BLD",9790,1,490,0)
 
"BLD",9790,1,491,0)
 
"BLD",9790,1,492,0)
Select Installation <TEST ACCOUNT> Option: 4  Compare Transport Global to 
"BLD",9790,1,493,0)
Current System
"BLD",9790,1,494,0)
Select INSTALL NAME:    LR*5.2*479    2/21/17@10:44:12
"BLD",9790,1,495,0)
     => LR*5.2*479
"BLD",9790,1,496,0)
 
"BLD",9790,1,497,0)
This Distribution was loaded on Feb 21, 2017@10:44:12 with header of 
"BLD",9790,1,498,0)
   LR*5.2*479
"BLD",9790,1,499,0)
   It consisted of the following Install(s):
"BLD",9790,1,500,0)
     LR*5.2*479
"BLD",9790,1,501,0)
 
"BLD",9790,1,502,0)
     Select one of the following:
"BLD",9790,1,503,0)
 
"BLD",9790,1,504,0)
          1         Full Comparison
"BLD",9790,1,505,0)
          2         Second line of Routines only
"BLD",9790,1,506,0)
          3         Routines only
"BLD",9790,1,507,0)
          4         Old style Routine compare
"BLD",9790,1,508,0)
 
"BLD",9790,1,509,0)
Type of Compare: 1  Full Comparison
"BLD",9790,1,510,0)
DEVICE: HOME//   TELNET PORT
"BLD",9790,1,511,0)
 
"BLD",9790,1,512,0)
Report is displayed....
"BLD",9790,1,513,0)
 
"BLD",9790,1,514,0)
 
"BLD",9790,1,515,0)
Select Installation <TEST ACCOUNT> Option: 2  Verify Checksums in 
"BLD",9790,1,516,0)
Transport Global
"BLD",9790,1,517,0)
Select INSTALL NAME:    LR*5.2*479    2/21/17@10:44:12
"BLD",9790,1,518,0)
     => LR*5.2*479
"BLD",9790,1,519,0)
 
"BLD",9790,1,520,0)
This Distribution was loaded on Feb 21, 2017@10:44:12 with header of 
"BLD",9790,1,521,0)
   LR*5.2*479
"BLD",9790,1,522,0)
   It consisted of the following Install(s):
"BLD",9790,1,523,0)
     LR*5.2*479
"BLD",9790,1,524,0)
 
"BLD",9790,1,525,0)
Want each Routine Listed with Checksums: Yes//   YES
"BLD",9790,1,526,0)
DEVICE: HOME//   TELNET PORT
"BLD",9790,1,527,0)
 
"BLD",9790,1,528,0)
 
"BLD",9790,1,529,0)
PACKAGE: LR*5.2*479     Feb 21, 2017 10:53 am                         
"BLD",9790,1,530,0)
PAGE 1
"BLD",9790,1,531,0)
--------------------------------------------------------------------------
"BLD",9790,1,532,0)
 
"BLD",9790,1,533,0)
 
"BLD",9790,1,534,0)
LR479     Calculated   18225928
"BLD",9790,1,535,0)
LR7OFAO   Calculated   52676862
"BLD",9790,1,536,0)
LRAP      Calculated   25554526
"BLD",9790,1,537,0)
LRAPKOE   Calculated  175040482
"BLD",9790,1,538,0)
LRAPLG    Calculated   12446427
"BLD",9790,1,539,0)
LRAPLG1   Calculated  181849693
"BLD",9790,1,540,0)
LROE      Calculated   39978878
"BLD",9790,1,541,0)
LRUWLF    Calculated   11960061
"BLD",9790,1,542,0)
LRXREF    Calculated   76007577
"BLD",9790,1,543,0)
 
"BLD",9790,1,544,0)
   9 Routines checked, 0 failed.
"BLD",9790,1,545,0)
 
"BLD",9790,1,546,0)
Select Installation <TEST ACCOUNT> Option: 6  Install Package(s)
"BLD",9790,1,547,0)
Select INSTALL NAME:    LR*5.2*479    2/21/17@10:44:12
"BLD",9790,1,548,0)
     => LR*5.2*479
"BLD",9790,1,549,0)
 
"BLD",9790,1,550,0)
This Distribution was loaded on Feb 21, 2017@10:44:12 with header of 
"BLD",9790,1,551,0)
   LR*5.2*479
"BLD",9790,1,552,0)
   It consisted of the following Install(s):
"BLD",9790,1,553,0)
     LR*5.2*479
"BLD",9790,1,554,0)
Checking Install for Package LR*5.2*479
"BLD",9790,1,555,0)
Will first run the Environment Check Routine, LR479
"BLD",9790,1,556,0)
 
"BLD",9790,1,557,0)
 
"BLD",9790,1,558,0)
 
"BLD",9790,1,559,0)
                        --- Environment Check is Ok 
"BLD",9790,1,560,0)
 
"BLD",9790,1,561,0)
 
"BLD",9790,1,562,0)
          Sending install loaded alert to mail group G.LMI
"BLD",9790,1,563,0)
 
"BLD",9790,1,564,0)
Install Questions for LR*5.2*479
"BLD",9790,1,565,0)
 
"BLD",9790,1,566,0)
Incoming Files:
"BLD",9790,1,567,0)
 
"BLD",9790,1,568,0)
 
"BLD",9790,1,569,0)
   69.73     LR AP DIALOG CONFIG  (Partial Definition)
"BLD",9790,1,570,0)
Note:  You already have the 'LR AP DIALOG CONFIG' File.
"BLD",9790,1,571,0)
 
"BLD",9790,1,572,0)
Want KIDS to Rebuild Menu Trees Upon Completion of Install? NO// 
"BLD",9790,1,573,0)
 
"BLD",9790,1,574,0)
 
"BLD",9790,1,575,0)
Want KIDS to INHIBIT LOGONs during the install? NO// 
"BLD",9790,1,576,0)
Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO// 
"BLD",9790,1,577,0)
 
"BLD",9790,1,578,0)
Enter the Device you want to print the Install messages.
"BLD",9790,1,579,0)
You can queue the install by enter a 'Q' at the device prompt.
"BLD",9790,1,580,0)
Enter a '^' to abort the install.
"BLD",9790,1,581,0)
 
"BLD",9790,1,582,0)
DEVICE: HOME// ;;9999  TELNET PORT
"BLD",9790,1,583,0)
 
"BLD",9790,1,584,0)
 
"BLD",9790,1,585,0)
--------------------------------------------------------------------------
"BLD",9790,1,586,0)
 
"BLD",9790,1,587,0)
 Install Started for LR*5.2*479 : 
"BLD",9790,1,588,0)
               Feb 21, 2017@10:55:15
"BLD",9790,1,589,0)
 
"BLD",9790,1,590,0)
Build Distribution Date: Feb 17, 2017
"BLD",9790,1,591,0)
 
"BLD",9790,1,592,0)
 Installing Routines:
"BLD",9790,1,593,0)
               Feb 21, 2017@10:55:15
"BLD",9790,1,594,0)
 
"BLD",9790,1,595,0)
 Running Pre-Install Routine: PRE^LR479
"BLD",9790,1,596,0)
 
"BLD",9790,1,597,0)
 
"BLD",9790,1,598,0)
                     *** Preinstall completed ***
"BLD",9790,1,599,0)
 
"BLD",9790,1,600,0)
 Installing Data Dictionaries: 
"BLD",9790,1,601,0)
               Feb 21, 2017@10:55:15
"BLD",9790,1,602,0)
 
"BLD",9790,1,603,0)
 Installing PACKAGE COMPONENTS: 
"BLD",9790,1,604,0)
 
"BLD",9790,1,605,0)
 Installing OPTION
"BLD",9790,1,606,0)
               Feb 21, 2017@10:55:16
"BLD",9790,1,607,0)
 
"BLD",9790,1,608,0)
 Running Post-Install Routine: POST^LR479
"BLD",9790,1,609,0)
 
"BLD",9790,1,610,0)
 
"BLD",9790,1,611,0)
                    Correcting Spelling Errors
"BLD",9790,1,612,0)
 
"BLD",9790,1,613,0)
 
"BLD",9790,1,614,0)
               Correcting Builder Block Title Names
"BLD",9790,1,615,0)
 
"BLD",9790,1,616,0)
 
"BLD",9790,1,617,0)
         Sending install completion alert to mail group G.LMI
"BLD",9790,1,618,0)
 
"BLD",9790,1,619,0)
 
"BLD",9790,1,620,0)
         Removing Obsolete fields from LABORATORY TEST (#60) File
"BLD",9790,1,621,0)
 
"BLD",9790,1,622,0)
 
"BLD",9790,1,623,0)
         Remove Obsolete fields from LAB ORDER ENTRY (#69) File
"BLD",9790,1,624,0)
 
"BLD",9790,1,625,0)
 
"BLD",9790,1,626,0)
         Sending install completion alert to mail group G.LMI
"BLD",9790,1,627,0)
 
"BLD",9790,1,628,0)
 Updating Routine file...
"BLD",9790,1,629,0)
 
"BLD",9790,1,630,0)
 Updating KIDS files...
"BLD",9790,1,631,0)
 
"BLD",9790,1,632,0)
 LR*5.2*479 Installed. 
"BLD",9790,1,633,0)
               Feb 21, 2017@10:55:16
"BLD",9790,1,634,0)
 
"BLD",9790,1,635,0)
 Not a production UCI
"BLD",9790,1,636,0)
 
"BLD",9790,1,637,0)
                                   
"BLD",9790,1,638,0)
LR*5.2*479                                   
"BLD",9790,1,639,0)
 
"BLD",9790,1,640,0)
 
"BLD",9790,1,641,0)
Install Completed
"BLD",9790,4,0)
^9.64PA^69.73^1
"BLD",9790,4,69.73,0)
69.73
"BLD",9790,4,69.73,222)
y^y^f^^^^n^^n
"BLD",9790,4,69.73,224)

"BLD",9790,4,"B",69.73,69.73)

"BLD",9790,6.3)
8
"BLD",9790,"INI")
PRE^LR479
"BLD",9790,"INID")
n^n^n
"BLD",9790,"INIT")
POST^LR479
"BLD",9790,"KRN",0)
^9.67PA^779.2^20
"BLD",9790,"KRN",.4,0)
.4
"BLD",9790,"KRN",.401,0)
.401
"BLD",9790,"KRN",.402,0)
.402
"BLD",9790,"KRN",.403,0)
.403
"BLD",9790,"KRN",.5,0)
.5
"BLD",9790,"KRN",.84,0)
.84
"BLD",9790,"KRN",3.6,0)
3.6
"BLD",9790,"KRN",3.8,0)
3.8
"BLD",9790,"KRN",9.2,0)
9.2
"BLD",9790,"KRN",9.8,0)
9.8
"BLD",9790,"KRN",9.8,"NM",0)
^9.68A^8^8
"BLD",9790,"KRN",9.8,"NM",1,0)
LRUWLF^^0^B11960061
"BLD",9790,"KRN",9.8,"NM",2,0)
LRAPLG^^0^B12446427
"BLD",9790,"KRN",9.8,"NM",3,0)
LRAPLG1^^0^B181849693
"BLD",9790,"KRN",9.8,"NM",4,0)
LROE^^0^B39978878
"BLD",9790,"KRN",9.8,"NM",5,0)
LRAPKOE^^0^B175040482
"BLD",9790,"KRN",9.8,"NM",6,0)
LRAP^^0^B25554526
"BLD",9790,"KRN",9.8,"NM",7,0)
LR7OFAO^^0^B52676862
"BLD",9790,"KRN",9.8,"NM",8,0)
LRXREF^^0^B76007577
"BLD",9790,"KRN",9.8,"NM","B","LR7OFAO",7)

"BLD",9790,"KRN",9.8,"NM","B","LRAP",6)

"BLD",9790,"KRN",9.8,"NM","B","LRAPKOE",5)

"BLD",9790,"KRN",9.8,"NM","B","LRAPLG",2)

"BLD",9790,"KRN",9.8,"NM","B","LRAPLG1",3)

"BLD",9790,"KRN",9.8,"NM","B","LROE",4)

"BLD",9790,"KRN",9.8,"NM","B","LRUWLF",1)

"BLD",9790,"KRN",9.8,"NM","B","LRXREF",8)

"BLD",9790,"KRN",19,0)
19
"BLD",9790,"KRN",19,"NM",0)
^9.68A^2^2
"BLD",9790,"KRN",19,"NM",1,0)
LR7OAP CPRS DIALOG MENU^^0
"BLD",9790,"KRN",19,"NM",2,0)
LR7OAP CPRS DIALOG PRINT^^0
"BLD",9790,"KRN",19,"NM","B","LR7OAP CPRS DIALOG MENU",1)

"BLD",9790,"KRN",19,"NM","B","LR7OAP CPRS DIALOG PRINT",2)

"BLD",9790,"KRN",19.1,0)
19.1
"BLD",9790,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",9790,"KRN",101,0)
101
"BLD",9790,"KRN",409.61,0)
409.61
"BLD",9790,"KRN",771,0)
771
"BLD",9790,"KRN",779.2,0)
779.2
"BLD",9790,"KRN",870,0)
870
"BLD",9790,"KRN",8989.51,0)
8989.51
"BLD",9790,"KRN",8989.52,0)
8989.52
"BLD",9790,"KRN",8994,0)
8994
"BLD",9790,"KRN","B",.4,.4)

"BLD",9790,"KRN","B",.401,.401)

"BLD",9790,"KRN","B",.402,.402)

"BLD",9790,"KRN","B",.403,.403)

"BLD",9790,"KRN","B",.5,.5)

"BLD",9790,"KRN","B",.84,.84)

"BLD",9790,"KRN","B",3.6,3.6)

"BLD",9790,"KRN","B",3.8,3.8)

"BLD",9790,"KRN","B",9.2,9.2)

"BLD",9790,"KRN","B",9.8,9.8)

"BLD",9790,"KRN","B",19,19)

"BLD",9790,"KRN","B",19.1,19.1)

"BLD",9790,"KRN","B",101,101)

"BLD",9790,"KRN","B",409.61,409.61)

"BLD",9790,"KRN","B",771,771)

"BLD",9790,"KRN","B",779.2,779.2)

"BLD",9790,"KRN","B",870,870)

"BLD",9790,"KRN","B",8989.51,8989.51)

"BLD",9790,"KRN","B",8989.52,8989.52)

"BLD",9790,"KRN","B",8994,8994)

"BLD",9790,"PRE")
LR479
"BLD",9790,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",9790,"QUES",0)
^9.62^^
"BLD",9790,"REQB",0)
^9.611^5^4
"BLD",9790,"REQB",2,0)
LR*5.2*482^1
"BLD",9790,"REQB",3,0)
LR*5.2*469^1
"BLD",9790,"REQB",4,0)
LR*5.2*450^1
"BLD",9790,"REQB",5,0)
LR*5.2*462^1
"BLD",9790,"REQB","B","LR*5.2*450",4)

"BLD",9790,"REQB","B","LR*5.2*462",5)

"BLD",9790,"REQB","B","LR*5.2*469",3)

"BLD",9790,"REQB","B","LR*5.2*482",2)

"FIA",69.73)
LR AP DIALOG CONFIG
"FIA",69.73,0)
^LAB(69.73,
"FIA",69.73,0,0)
69.73P
"FIA",69.73,0,1)
y^y^f^^^^n^^n
"FIA",69.73,0,10)

"FIA",69.73,0,11)

"FIA",69.73,0,"RLRO")

"FIA",69.73,0,"VR")
5.2^LR
"FIA",69.73,69.73)
0
"FIA",69.73,69.731)
0
"FIA",69.73,69.732)
0
"FIA",69.73,69.7321)
0
"FIA",69.73,69.73211)
0
"FIA",69.73,69.733)
0
"FIA",69.73,69.7331)
0
"FIA",69.73,69.73311)
0
"INI")
PRE^LR479
"INIT")
POST^LR479
"IX",69.73,69.733,"S",0)
69.733^S^Specimen Name^R^^F^IR^I^69.733^^^^^LS
"IX",69.73,69.733,"S",.1,0)
^^2^2^3161020^
"IX",69.73,69.733,"S",.1,1,0)
Used by the RPC: ORWLRAP1 SPEC to return the default specimen list for an 
"IX",69.73,69.733,"S",.1,2,0)
orderable item.
"IX",69.73,69.733,"S",1)
S ^LAB(69.73,DA(1),3,"S",X,DA)=""
"IX",69.73,69.733,"S",2)
K ^LAB(69.73,DA(1),3,"S",X,DA)
"IX",69.73,69.733,"S",2.5)
K ^LAB(69.73,DA(1),3,"S")
"IX",69.73,69.733,"S",11.1,0)
^.114IA^1^1
"IX",69.73,69.733,"S",11.1,1,0)
1^F^69.733^.01^^1^F
"IX",69.73,69.733,"S",11.1,1,2)
S X=$P($G(^LAB(61,+X,0)),U)
"KRN",19,14389,-1)
0^2
"KRN",19,14389,0)
LR7OAP CPRS DIALOG PRINT^CPRS Dialog Print (#69.71)^^P^^^^^^^^LAB SERVICE
"KRN",19,14389,1,0)
^^2^2^3161223^
"KRN",19,14389,1,1,0)
This option will provide a listing of the entries in LR CPRS PARAMETERS
"KRN",19,14389,1,2,0)
(#69.71).
"KRN",19,14389,2)
y
"KRN",19,14389,10.1)
CPRS DIALOG PRT
"KRN",19,14389,30)
LAB(69.71,
"KRN",19,14389,60)
LAB(69.71,
"KRN",19,14389,63)
.01,.05,.06,1,2
"KRN",19,14389,64)
[LR7OAP DIALOG SCREENS]
"KRN",19,14389,65)
100
"KRN",19,14389,66)

"KRN",19,14389,"U")
CPRS DIALOG PRINT (#69.71)
"KRN",19,14391,-1)
0^1
"KRN",19,14391,0)
LR7OAP CPRS DIALOG MENU^CPRS AP Dialog Menu^^M^^^^^^^^LAB SERVICE
"KRN",19,14391,1,0)
^^2^2^3161223^
"KRN",19,14391,1,1,0)
This menu contains options to manage implementation of CPRS AP Dialog 
"KRN",19,14391,1,2,0)
enhancement.
"KRN",19,14391,10,0)
^19.01IP^3^3
"KRN",19,14391,10,2,0)
14389^PRT^2
"KRN",19,14391,10,2,"^")
LR7OAP CPRS DIALOG PRINT
"KRN",19,14391,10.1)
CPRS Dialog Menu
"KRN",19,14391,99)
64065,36782
"KRN",19,14391,"U")
CPRS AP DIALOG MENU
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,20,0)
^9.402P^1^1
"PKG",26,20,1,0)
2^^LRXDRPT
"PKG",26,20,1,1)

"PKG",26,20,"B",2,1)

"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2941128
"PKG",26,22,1,"PAH",1,0)
479^3170223
"PKG",26,22,1,"PAH",1,1,0)
^^641^641^3170223
"PKG",26,22,1,"PAH",1,1,1,0)
 This patch contains corrections that address issues related to the
"PKG",26,22,1,"PAH",1,1,2,0)
 VistA Lab Enhancements (VLE) released patches LR*5.2*462 and LR*5.2*469.
"PKG",26,22,1,"PAH",1,1,3,0)
 The description of the issues can be reviewed in the Problem and
"PKG",26,22,1,"PAH",1,1,4,0)
 Resolution sections of this patch description.
"PKG",26,22,1,"PAH",1,1,5,0)
 
"PKG",26,22,1,"PAH",1,1,6,0)
Blood Bank Review:
"PKG",26,22,1,"PAH",1,1,7,0)
==================
"PKG",26,22,1,"PAH",1,1,8,0)
 
"PKG",26,22,1,"PAH",1,1,9,0)
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*479 does not 
"PKG",26,22,1,"PAH",1,1,10,0)
 contain any changes to the VISTA BLOOD BANK Software as defined by 
"PKG",26,22,1,"PAH",1,1,11,0)
 ProPath standard titled: BBM Team Review of VistA Patches.
"PKG",26,22,1,"PAH",1,1,12,0)
 
"PKG",26,22,1,"PAH",1,1,13,0)
 RISK ANALYSIS: Changes made by patch LR*5.2*479 have no effect on Blood 
"PKG",26,22,1,"PAH",1,1,14,0)
 Bank software functionality, therefore RISK is none.
"PKG",26,22,1,"PAH",1,1,15,0)
 
"PKG",26,22,1,"PAH",1,1,16,0)
 VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes 
"PKG",26,22,1,"PAH",1,1,17,0)
 made, no specific validation requirements exist as a result of 
"PKG",26,22,1,"PAH",1,1,18,0)
 installation of this patch.
"PKG",26,22,1,"PAH",1,1,19,0)
 
"PKG",26,22,1,"PAH",1,1,20,0)
Patch Components:
"PKG",26,22,1,"PAH",1,1,21,0)
--------------------------
"PKG",26,22,1,"PAH",1,1,22,0)
 
"PKG",26,22,1,"PAH",1,1,23,0)
Files & Fields Associated:
"PKG",26,22,1,"PAH",1,1,24,0)
 
"PKG",26,22,1,"PAH",1,1,25,0)
File Name (Number)      Field Name (Number)        New/Modified/Deleted
"PKG",26,22,1,"PAH",1,1,26,0)
------------------      -------------------        --------------------
"PKG",26,22,1,"PAH",1,1,27,0)
LR AP DIALOG CONFIG    69.73,.01 ORDERABLE ITEM    Modified
"PKG",26,22,1,"PAH",1,1,28,0)
 (#69.73)
"PKG",26,22,1,"PAH",1,1,29,0)
                       69.73,.02 ALLOW OTHER       Modified
"PKG",26,22,1,"PAH",1,1,30,0)
                         SPECIMENS
"PKG",26,22,1,"PAH",1,1,31,0)
                       69.73,.03 RESTRICT          Modified
"PKG",26,22,1,"PAH",1,1,32,0)
                         MULTIPLE SPECIMENS
"PKG",26,22,1,"PAH",1,1,33,0)
                       69.73,1 ORDER PROMPTS       Modified
"PKG",26,22,1,"PAH",1,1,34,0)
                       69.731,.02 HIDE             Modified
"PKG",26,22,1,"PAH",1,1,35,0)
                       69.731,.03 REQUIRED         Modified
"PKG",26,22,1,"PAH",1,1,36,0)
                       69.731,.04 DEFAULT          Modified
"PKG",26,22,1,"PAH",1,1,37,0)
                       69.73,2 PAGES               Modified
"PKG",26,22,1,"PAH",1,1,38,0)
                       69.732,.01 PAGE#            Modified
"PKG",26,22,1,"PAH",1,1,39,0)
                       69.732,.02 PAGENAME         Modified
"PKG",26,22,1,"PAH",1,1,40,0)
                       69.732,.03 HID              Modified
"PKG",26,22,1,"PAH",1,1,41,0)
                       69.732,.04 REUIRED          Modified
"PKG",26,22,1,"PAH",1,1,42,0)
                       69.732,.06 W TITLE          Modified
"PKG",26,22,1,"PAH",1,1,43,0)
                       69.732,1 BULDER BLOCK       Modified
"PKG",26,22,1,"PAH",1,1,44,0)
                       69.7321,.0 PG BLOCK TITLE   Modified
"PKG",26,22,1,"PAH",1,1,45,0)
                       69.7321,.2 REQUIRED         Modified
"PKG",26,22,1,"PAH",1,1,46,0)
                       69.7321,03 LIST             Modified
"PKG",26,22,1,"PAH",1,1,47,0)
                       69.7321.04 DEFAULT          Modified
"PKG",26,22,1,"PAH",1,1,48,0)
                       69.7321,1 VALUES            Modified
"PKG",26,22,1,"PAH",1,1,49,0)
                       69.73211,.01 VALUE          Modified
"PKG",26,22,1,"PAH",1,1,50,0)
                       69.73211,.02 ASSOCIATE WITH Modified
"PKG",26,22,1,"PAH",1,1,51,0)
                       69.73211,.03 SPECIAL        Modified
"PKG",26,22,1,"PAH",1,1,52,0)
                       69.73,3 SPECIMEN            Modified
"PKG",26,22,1,"PAH",1,1,53,0)
                       69.733,.01 SPECIMEN         Modified
"PKG",26,22,1,"PAH",1,1,54,0)
                       69.733,.02 HIDE FROM        Modified
"PKG",26,22,1,"PAH",1,1,55,0)
                         Description        
"PKG",26,22,1,"PAH",1,1,56,0)
                       69.733,.03 Description      Modified 
"PKG",26,22,1,"PAH",1,1,57,0)
                         POSITION
"PKG",26,22,1,"PAH",1,1,58,0)
                       69.733,1 BUILDER BLOCK      Modified
"PKG",26,22,1,"PAH",1,1,59,0)
                       69.7331,.02 INACTIVATE      Modified
"PKG",26,22,1,"PAH",1,1,60,0)
                       69.7331,.03 REQUIRED        Modified
"PKG",26,22,1,"PAH",1,1,61,0)
                       69.7331,.04 DEFAULT         Modified
"PKG",26,22,1,"PAH",1,1,62,0)
                       69.7331,.05 Description     Modified
"PKG",26,22,1,"PAH",1,1,63,0)
                         POSITION
"PKG",26,22,1,"PAH",1,1,64,0)
                       69.7331,1 VALUES            Modified
"PKG",26,22,1,"PAH",1,1,65,0)
                       69.73311,.01 VALUES         Modified
"PKG",26,22,1,"PAH",1,1,66,0)
                       69.73311,.02 SPECIAL        Modified
"PKG",26,22,1,"PAH",1,1,67,0)
                       69.733,2.1 COLLECTION       Modified
"PKG",26,22,1,"PAH",1,1,68,0)
                         SAMPLE HIDE
"PKG",26,22,1,"PAH",1,1,69,0)
                       69.733,2.2 COLLECTION       Modified 
"PKG",26,22,1,"PAH",1,1,70,0)
                         SAMPLE DEFAULT
"PKG",26,22,1,"PAH",1,1,71,0)
                        
"PKG",26,22,1,"PAH",1,1,72,0)
  
"PKG",26,22,1,"PAH",1,1,73,0)
Forms Associated:
"PKG",26,22,1,"PAH",1,1,74,0)
 
"PKG",26,22,1,"PAH",1,1,75,0)
Form Name               File #          New/Modified/Deleted
"PKG",26,22,1,"PAH",1,1,76,0)
---------               ------          --------------------
"PKG",26,22,1,"PAH",1,1,77,0)
N/A
"PKG",26,22,1,"PAH",1,1,78,0)
 
"PKG",26,22,1,"PAH",1,1,79,0)
 
"PKG",26,22,1,"PAH",1,1,80,0)
Mail Groups Associated:
"PKG",26,22,1,"PAH",1,1,81,0)
 
"PKG",26,22,1,"PAH",1,1,82,0)
Mail Group Name          New/Modified/Deleted
"PKG",26,22,1,"PAH",1,1,83,0)
---------------          --------------------
"PKG",26,22,1,"PAH",1,1,84,0)
N/A
"PKG",26,22,1,"PAH",1,1,85,0)
 
"PKG",26,22,1,"PAH",1,1,86,0)
 
"PKG",26,22,1,"PAH",1,1,87,0)
Options Associated:
"PKG",26,22,1,"PAH",1,1,88,0)
 
"PKG",26,22,1,"PAH",1,1,89,0)
Option Name         Type         New/Modified/Deleted
"PKG",26,22,1,"PAH",1,1,90,0)
----------          -----        --------------------
"PKG",26,22,1,"PAH",1,1,91,0)
LR7OAP CPRS DIALOG  MENU         Modified
"PKG",26,22,1,"PAH",1,1,92,0)
 MENU
"PKG",26,22,1,"PAH",1,1,93,0)
LR7OAP CPRS DIALOG  PRINT        Modified
"PKG",26,22,1,"PAH",1,1,94,0)
 PRINT 
"PKG",26,22,1,"PAH",1,1,95,0)
 
"PKG",26,22,1,"PAH",1,1,96,0)
  
"PKG",26,22,1,"PAH",1,1,97,0)
Protocols Associated:
"PKG",26,22,1,"PAH",1,1,98,0)
 
"PKG",26,22,1,"PAH",1,1,99,0)
Protocol Name       New/Modified/Deleted
"PKG",26,22,1,"PAH",1,1,100,0)
-------------       -------------------- 
"PKG",26,22,1,"PAH",1,1,101,0)
N/A
"PKG",26,22,1,"PAH",1,1,102,0)
 
"PKG",26,22,1,"PAH",1,1,103,0)
 
"PKG",26,22,1,"PAH",1,1,104,0)
Security Keys Associated:
"PKG",26,22,1,"PAH",1,1,105,0)
 
"PKG",26,22,1,"PAH",1,1,106,0)
Security Key Name
"PKG",26,22,1,"PAH",1,1,107,0)
-----------------
"PKG",26,22,1,"PAH",1,1,108,0)
N/A
"PKG",26,22,1,"PAH",1,1,109,0)
 
"PKG",26,22,1,"PAH",1,1,110,0)
 
"PKG",26,22,1,"PAH",1,1,111,0)
Templates Associated:
"PKG",26,22,1,"PAH",1,1,112,0)
 
"PKG",26,22,1,"PAH",1,1,113,0)
Template Name      Type      File Name (Number)  New/Modified/Deleted 
"PKG",26,22,1,"PAH",1,1,114,0)
-------------      -----     ------------------  --------------------
"PKG",26,22,1,"PAH",1,1,115,0)
N/A
"PKG",26,22,1,"PAH",1,1,116,0)
 
"PKG",26,22,1,"PAH",1,1,117,0)
 
"PKG",26,22,1,"PAH",1,1,118,0)
Additional Information:
"PKG",26,22,1,"PAH",1,1,119,0)
 
"PKG",26,22,1,"PAH",1,1,120,0)
N/A 
"PKG",26,22,1,"PAH",1,1,121,0)
 
"PKG",26,22,1,"PAH",1,1,122,0)
 
"PKG",26,22,1,"PAH",1,1,123,0)
New Service Requests (NSRs):
"PKG",26,22,1,"PAH",1,1,124,0)
--------------------------------------------   
"PKG",26,22,1,"PAH",1,1,125,0)
#20140511 
"PKG",26,22,1,"PAH",1,1,126,0)
 The Anatomic Pathology (AP) laboratory service needs a mechanism for 
"PKG",26,22,1,"PAH",1,1,127,0)
 clinicians to provide required patient-specific, procedure-specific, and 
"PKG",26,22,1,"PAH",1,1,128,0)
 specimen-specific information to facilitate specimen processing by 
"PKG",26,22,1,"PAH",1,1,129,0)
 pathologists. This mechanism must be in place for use by the specimen 
"PKG",26,22,1,"PAH",1,1,130,0)
 labeling application in order to generate a primary specimen label that 
"PKG",26,22,1,"PAH",1,1,131,0)
 positively identifies the specimen and accurately associates it with the 
"PKG",26,22,1,"PAH",1,1,132,0)
 patient.
"PKG",26,22,1,"PAH",1,1,133,0)
 
"PKG",26,22,1,"PAH",1,1,134,0)
Patient Safety Issues (PSIs):
"PKG",26,22,1,"PAH",1,1,135,0)
---------------------------------------
"PKG",26,22,1,"PAH",1,1,136,0)
N/A
"PKG",26,22,1,"PAH",1,1,137,0)
 
"PKG",26,22,1,"PAH",1,1,138,0)
 
"PKG",26,22,1,"PAH",1,1,139,0)
CA SDM Ticket(s) & Overview:
"PKG",26,22,1,"PAH",1,1,140,0)
--------------------------------------------
"PKG",26,22,1,"PAH",1,1,141,0)
 
"PKG",26,22,1,"PAH",1,1,142,0)
N/A
"PKG",26,22,1,"PAH",1,1,143,0)
 
"PKG",26,22,1,"PAH",1,1,144,0)
 
"PKG",26,22,1,"PAH",1,1,145,0)
Test Sites:
"PKG",26,22,1,"PAH",1,1,146,0)
---------------
"PKG",26,22,1,"PAH",1,1,147,0)
AP Dialogs w/OR*3.0*405:
"PKG",26,22,1,"PAH",1,1,148,0)
  North Florida/South Georgia Veterans Health System (Gainesville, FL)
"PKG",26,22,1,"PAH",1,1,149,0)
  Edward Hines Jr. VA Hospital
"PKG",26,22,1,"PAH",1,1,150,0)
  Philadelphia VA Medical Center
"PKG",26,22,1,"PAH",1,1,151,0)
 
"PKG",26,22,1,"PAH",1,1,152,0)
Problem:
"PKG",26,22,1,"PAH",1,1,153,0)
-------
"PKG",26,22,1,"PAH",1,1,154,0)
 Sub files 60.0216611,.01 (AOE CPRS SCREEN) and 60.12166,.01 (AOE SCREEN) 
"PKG",26,22,1,"PAH",1,1,155,0)
 in the LABORAOTRY TEST file (#60) were erroneously released with the
"PKG",26,22,1,"PAH",1,1,156,0)
 distribution of patch LR*5.2*462.
"PKG",26,22,1,"PAH",1,1,157,0)
 
"PKG",26,22,1,"PAH",1,1,158,0)
Resolution:
"PKG",26,22,1,"PAH",1,1,159,0)
-----------
"PKG",26,22,1,"PAH",1,1,160,0)
 These two fields will be removed from the data dictionary with the LR479 
"PKG",26,22,1,"PAH",1,1,161,0)
 post-install routine.
"PKG",26,22,1,"PAH",1,1,162,0)
 
"PKG",26,22,1,"PAH",1,1,163,0)
Problem:
"PKG",26,22,1,"PAH",1,1,164,0)
--------
"PKG",26,22,1,"PAH",1,1,165,0)
Sub file 69.321661,.01 (VFD AOE) in the LAB ORDER ENTRY file (#69) was 
"PKG",26,22,1,"PAH",1,1,166,0)
erroneously released with the distribution of patch LR*5.2*462.
"PKG",26,22,1,"PAH",1,1,167,0)
 
"PKG",26,22,1,"PAH",1,1,168,0)
Resoultion:
"PKG",26,22,1,"PAH",1,1,169,0)
-----------
"PKG",26,22,1,"PAH",1,1,170,0)
 This field will be removed form the data dictionary with the LR479 
"PKG",26,22,1,"PAH",1,1,171,0)
 post-install routine.
"PKG",26,22,1,"PAH",1,1,172,0)
 
"PKG",26,22,1,"PAH",1,1,173,0)
Problem:
"PKG",26,22,1,"PAH",1,1,174,0)
--------
"PKG",26,22,1,"PAH",1,1,175,0)
 Specimen Login in VistA does not assign correct accession number when 
"PKG",26,22,1,"PAH",1,1,176,0)
 using the new accession process added to the AP Specimen Log In option 
"PKG",26,22,1,"PAH",1,1,177,0)
 with patch LR*5.2*462. The order number entered at this point was created
"PKG",26,22,1,"PAH",1,1,178,0)
 using the new AP Order Dialog in CPRS. The accession area assigned to the
"PKG",26,22,1,"PAH",1,1,179,0)
 Laboratory test in file 60 was not being honored and only SURGICAL 
"PKG",26,22,1,"PAH",1,1,180,0)
 PATHOLOGY (SP) and CYTOLOGY (CY) accession areas were being utilized.
"PKG",26,22,1,"PAH",1,1,181,0)
 
"PKG",26,22,1,"PAH",1,1,182,0)
Resolution:
"PKG",26,22,1,"PAH",1,1,183,0)
-----------
"PKG",26,22,1,"PAH",1,1,184,0)
 Routine modifications were made to honor the correct accession area as
"PKG",26,22,1,"PAH",1,1,185,0)
 defined in the Laboratory test file in association with the division
"PKG",26,22,1,"PAH",1,1,186,0)
 of the user accessioning the order.
"PKG",26,22,1,"PAH",1,1,187,0)
 
"PKG",26,22,1,"PAH",1,1,188,0)
Problem:
"PKG",26,22,1,"PAH",1,1,189,0)
--------
"PKG",26,22,1,"PAH",1,1,190,0)
 Practitioner field in CPRS displays '0' if Surgeon/Physician is blank in 
"PKG",26,22,1,"PAH",1,1,191,0)
 VistA - Backdoor order only.
"PKG",26,22,1,"PAH",1,1,192,0)
 
"PKG",26,22,1,"PAH",1,1,193,0)
Resolution:
"PKG",26,22,1,"PAH",1,1,194,0)
-----------
"PKG",26,22,1,"PAH",1,1,195,0)
 Routine modifications were made to correct the storage of a zero when no
"PKG",26,22,1,"PAH",1,1,196,0)
 Surgeon/Physician was entered during the accessioning process. 
"PKG",26,22,1,"PAH",1,1,197,0)
 
"PKG",26,22,1,"PAH",1,1,198,0)
Problem:
"PKG",26,22,1,"PAH",1,1,199,0)
--------
"PKG",26,22,1,"PAH",1,1,200,0)
 Lock login process of AP Orders via Accessioning menu - Post Release
"PKG",26,22,1,"PAH",1,1,201,0)
 LR479.
"PKG",26,22,1,"PAH",1,1,202,0)
 
"PKG",26,22,1,"PAH",1,1,203,0)
Resolution:
"PKG",26,22,1,"PAH",1,1,204,0)
-----------
"PKG",26,22,1,"PAH",1,1,205,0)
 Option Accessioning tests ordered by ward order entry [LROE] has been
"PKG",26,22,1,"PAH",1,1,206,0)
 modified to not allow Anatomic Pathology orders to be processed. The 
"PKG",26,22,1,"PAH",1,1,207,0)
 user will see the following message before exiting the option:
"PKG",26,22,1,"PAH",1,1,208,0)
 
"PKG",26,22,1,"PAH",1,1,209,0)
    This is an Anatomic Path order                         
"PKG",26,22,1,"PAH",1,1,210,0)
 
"PKG",26,22,1,"PAH",1,1,211,0)
    Must use 'Log-in, anat path' Option to accession this Order           
"PKG",26,22,1,"PAH",1,1,212,0)
 
"PKG",26,22,1,"PAH",1,1,213,0)
Problem:
"PKG",26,22,1,"PAH",1,1,214,0)
--------
"PKG",26,22,1,"PAH",1,1,215,0)
 AP Backdoor order from VistA displays Send Patient to Lab as default 
"PKG",26,22,1,"PAH",1,1,216,0)
 Collection Status.
"PKG",26,22,1,"PAH",1,1,217,0)
 
"PKG",26,22,1,"PAH",1,1,218,0)
Resolution:
"PKG",26,22,1,"PAH",1,1,219,0)
-----------
"PKG",26,22,1,"PAH",1,1,220,0)
 Routine modifications were made to change the default from SP Send 
"PKG",26,22,1,"PAH",1,1,221,0)
 Patient to WC Ward Collect.
"PKG",26,22,1,"PAH",1,1,222,0)
 
"PKG",26,22,1,"PAH",1,1,223,0)
Problem:
"PKG",26,22,1,"PAH",1,1,224,0)
--------
"PKG",26,22,1,"PAH",1,1,225,0)
 Backdoor AP Order from VistA does not display patient location in CPRS.
"PKG",26,22,1,"PAH",1,1,226,0)
 
"PKG",26,22,1,"PAH",1,1,227,0)
Resolution:
"PKG",26,22,1,"PAH",1,1,228,0)
-----------
"PKG",26,22,1,"PAH",1,1,229,0)
 Routine modifications were made to pass the correct pointer to CPRS so 
"PKG",26,22,1,"PAH",1,1,230,0)
 that the ordering location will be reflected correctly.
"PKG",26,22,1,"PAH",1,1,231,0)
 
"PKG",26,22,1,"PAH",1,1,232,0)
 
"PKG",26,22,1,"PAH",1,1,233,0)
Problem:
"PKG",26,22,1,"PAH",1,1,234,0)
--------
"PKG",26,22,1,"PAH",1,1,235,0)
 Error <SUBSCRIPT>AP+2^LRXREF is being triggered during AP Specimen 
"PKG",26,22,1,"PAH",1,1,236,0)
 Log-in accessioning of orders created in CPRS. There was code in the 
"PKG",26,22,1,"PAH",1,1,237,0)
 routine that was trying to continue the accessioning process even if the 
"PKG",26,22,1,"PAH",1,1,238,0)
 test being accessioned did not have an accession area defined that 
"PKG",26,22,1,"PAH",1,1,239,0)
 matched the division of the accessioning person. The default lookup was 
"PKG",26,22,1,"PAH",1,1,240,0)
 expecting to find an SP for Surgical Pathology or a CY for Cytopathology 
"PKG",26,22,1,"PAH",1,1,241,0)
 accession area abbreviations. If a site has changed these abbreviations 
"PKG",26,22,1,"PAH",1,1,242,0)
 to something other than SP and CY the <SUBSCRIPT> error would be 
"PKG",26,22,1,"PAH",1,1,243,0)
 triggered.
"PKG",26,22,1,"PAH",1,1,244,0)
 
"PKG",26,22,1,"PAH",1,1,245,0)
Resolution:
"PKG",26,22,1,"PAH",1,1,246,0)
-----------
"PKG",26,22,1,"PAH",1,1,247,0)
 Routine modifications were made to remove the default accession area 
"PKG",26,22,1,"PAH",1,1,248,0)
 logic and replace it with code that will exit the user with the following
"PKG",26,22,1,"PAH",1,1,249,0)
 message:
"PKG",26,22,1,"PAH",1,1,250,0)
 
"PKG",26,22,1,"PAH",1,1,251,0)
[ TISSUE EXAM]  DOES NOT HAVE AN APPROPRIATE ACCESSION AREA DEFINED       
"PKG",26,22,1,"PAH",1,1,252,0)
                                 Log-in Aborted
"PKG",26,22,1,"PAH",1,1,253,0)
 
"PKG",26,22,1,"PAH",1,1,254,0)
Problem:
"PKG",26,22,1,"PAH",1,1,255,0)
--------
"PKG",26,22,1,"PAH",1,1,256,0)
 The VLE AP project is unable to acquire an ICR with $$DEFAULT^ORWLRAP1.
"PKG",26,22,1,"PAH",1,1,257,0)
 
"PKG",26,22,1,"PAH",1,1,258,0)
Resolution:
"PKG",26,22,1,"PAH",1,1,259,0)
-----------
"PKG",26,22,1,"PAH",1,1,260,0)
 This API was removed from the input transform of the .01 field of file 
"PKG",26,22,1,"PAH",1,1,261,0)
 69.73.
"PKG",26,22,1,"PAH",1,1,262,0)
 
"PKG",26,22,1,"PAH",1,1,263,0)
        DD: 69.73:.01
"PKG",26,22,1,"PAH",1,1,264,0)
 
"PKG",26,22,1,"PAH",1,1,265,0)
Problem:
"PKG",26,22,1,"PAH",1,1,266,0)
--------
"PKG",26,22,1,"PAH",1,1,267,0)
 The builder blocks had three misspellings (erosioin,technnique and SLide)
"PKG",26,22,1,"PAH",1,1,268,0)
 for selectable values.
"PKG",26,22,1,"PAH",1,1,269,0)
 
"PKG",26,22,1,"PAH",1,1,270,0)
Resolution:
"PKG",26,22,1,"PAH",1,1,271,0)
-----------
"PKG",26,22,1,"PAH",1,1,272,0)
 The patch has a post install sub-routine SPELL^LR479 that will search for
"PKG",26,22,1,"PAH",1,1,273,0)
 strings that equal "erosioin", "technnique" or "SLide" within the 69.73
"PKG",26,22,1,"PAH",1,1,274,0)
 file and set them to "erosion" and "technique" respectively.
"PKG",26,22,1,"PAH",1,1,275,0)
 
"PKG",26,22,1,"PAH",1,1,276,0)
        Routine: LR479
"PKG",26,22,1,"PAH",1,1,277,0)
 
"PKG",26,22,1,"PAH",1,1,278,0)
 
"PKG",26,22,1,"PAH",1,1,279,0)
Problem:
"PKG",26,22,1,"PAH",1,1,280,0)
--------
"PKG",26,22,1,"PAH",1,1,281,0)
 For the Urology,Prostate dialog Right Testis specimen the builder block 
"PKG",26,22,1,"PAH",1,1,282,0)
 "Submission Type" should be "Specimen Type" and "Specimen Submission" 
"PKG",26,22,1,"PAH",1,1,283,0)
 should be "Submission Type".
"PKG",26,22,1,"PAH",1,1,284,0)
 
"PKG",26,22,1,"PAH",1,1,285,0)
Resolution:
"PKG",26,22,1,"PAH",1,1,286,0)
-----------
"PKG",26,22,1,"PAH",1,1,287,0)
 The patch has a post install sub-routine TITLE^LR479 that will search for
"PKG",26,22,1,"PAH",1,1,288,0)
 a builder block with a value of "Orchiectomy" and if the builder block 
"PKG",26,22,1,"PAH",1,1,289,0)
 title reads "Submission Type" it will be changed to "Specimen Type" and 
"PKG",26,22,1,"PAH",1,1,290,0)
 the second builder block title will be set to "Submission Type".
"PKG",26,22,1,"PAH",1,1,291,0)
 
"PKG",26,22,1,"PAH",1,1,292,0)
        Routine: LR479
"PKG",26,22,1,"PAH",1,1,293,0)
 
"PKG",26,22,1,"PAH",1,1,294,0)
 Documentation Retrieval Instructions:
"PKG",26,22,1,"PAH",1,1,295,0)
 ------------------------------------- 
"PKG",26,22,1,"PAH",1,1,296,0)
 Software will be released via a PackMan message. 
"PKG",26,22,1,"PAH",1,1,297,0)
  
"PKG",26,22,1,"PAH",1,1,298,0)
 The preferred method is to retrieve files from download.vista.domain.ext.
"PKG",26,22,1,"PAH",1,1,299,0)
 This transmits the files from the first available server. Sites may 
"PKG",26,22,1,"PAH",1,1,300,0)
 also elect to retrieve files directly from a specific server. 
"PKG",26,22,1,"PAH",1,1,301,0)
  
"PKG",26,22,1,"PAH",1,1,302,0)
 Sites may retrieve the software and/or documentation directly using 
"PKG",26,22,1,"PAH",1,1,303,0)
 Secure File Transfer Protocol (SFTP) from the ANONYMOUS.SOFTWARE 
"PKG",26,22,1,"PAH",1,1,304,0)
 directory at the following OI Field Offices:
"PKG",26,22,1,"PAH",1,1,305,0)
    
"PKG",26,22,1,"PAH",1,1,306,0)
 Albany:                 domain.ext
"PKG",26,22,1,"PAH",1,1,307,0)
 Hines:                  domain.ext    
"PKG",26,22,1,"PAH",1,1,308,0)
 Salt Lake City:         domain.ext
"PKG",26,22,1,"PAH",1,1,309,0)
    
"PKG",26,22,1,"PAH",1,1,310,0)
 Title/File Name                       FTP Mode
"PKG",26,22,1,"PAH",1,1,311,0)
 -------------------------------------------------------------------------
"PKG",26,22,1,"PAH",1,1,312,0)
 N/A
"PKG",26,22,1,"PAH",1,1,313,0)
  
"PKG",26,22,1,"PAH",1,1,314,0)
 Documentation can also be found on the VA Software Documentation Library 
"PKG",26,22,1,"PAH",1,1,315,0)
 at:
"PKG",26,22,1,"PAH",1,1,316,0)
 http://www4.domain.ext/vdl/
"PKG",26,22,1,"PAH",1,1,317,0)
 
"PKG",26,22,1,"PAH",1,1,318,0)
 
"PKG",26,22,1,"PAH",1,1,319,0)
Patch Installation:
"PKG",26,22,1,"PAH",1,1,320,0)
  
"PKG",26,22,1,"PAH",1,1,321,0)
  
"PKG",26,22,1,"PAH",1,1,322,0)
 Pre/Post Installation Overview:
"PKG",26,22,1,"PAH",1,1,323,0)
 -------------------------------
"PKG",26,22,1,"PAH",1,1,324,0)
 N/A 
"PKG",26,22,1,"PAH",1,1,325,0)
  
"PKG",26,22,1,"PAH",1,1,326,0)
 Pre-Installation Instructions:
"PKG",26,22,1,"PAH",1,1,327,0)
 ------------------------------
"PKG",26,22,1,"PAH",1,1,328,0)
 N/A
"PKG",26,22,1,"PAH",1,1,329,0)
  
"PKG",26,22,1,"PAH",1,1,330,0)
 Installation Instructions:
"PKG",26,22,1,"PAH",1,1,331,0)
 --------------------------
"PKG",26,22,1,"PAH",1,1,332,0)
 This patch may be installed with users on the system although it is 
"PKG",26,22,1,"PAH",1,1,333,0)
 strongly recommended that it be installed during non-peak hours when 
"PKG",26,22,1,"PAH",1,1,334,0)
 LAB usage is at a minimum. This patch should take less than 5 minutes to
"PKG",26,22,1,"PAH",1,1,335,0)
install.
"PKG",26,22,1,"PAH",1,1,336,0)
  
"PKG",26,22,1,"PAH",1,1,337,0)
 This installation will install the components necessary to support the 
"PKG",26,22,1,"PAH",1,1,338,0)
 CPRS AP Order Dialog future functionality that is being released with
"PKG",26,22,1,"PAH",1,1,339,0)
 OR*3.0*405.
"PKG",26,22,1,"PAH",1,1,340,0)
  
"PKG",26,22,1,"PAH",1,1,341,0)
 1.  Choose the PackMan message containing this patch.
"PKG",26,22,1,"PAH",1,1,342,0)
  
"PKG",26,22,1,"PAH",1,1,343,0)
 2.  Choose the INSTALL/CHECK MESSAGE PackMan option.  
"PKG",26,22,1,"PAH",1,1,344,0)
  
"PKG",26,22,1,"PAH",1,1,345,0)
 3.  From the Kernel Installation and Distribution System Menu, select
"PKG",26,22,1,"PAH",1,1,346,0)
     the Installation Menu.  From this menu, you may elect to use the
"PKG",26,22,1,"PAH",1,1,347,0)
     following options. When prompted for the INSTALL NAME enter the 
"PKG",26,22,1,"PAH",1,1,348,0)
     patch LR*5.2*479:
"PKG",26,22,1,"PAH",1,1,349,0)
     a.  Backup a Transport Global - This option will create a backup
"PKG",26,22,1,"PAH",1,1,350,0)
         message of any routines exported with this patch. It will not
"PKG",26,22,1,"PAH",1,1,351,0)
         backup any other changes such as DDs or templates.
"PKG",26,22,1,"PAH",1,1,352,0)
     b.  Compare Transport Global to Current System - This option will
"PKG",26,22,1,"PAH",1,1,353,0)
         allow you to view all changes that will be made when this patch
"PKG",26,22,1,"PAH",1,1,354,0)
         is installed.  It compares all components of this patch
"PKG",26,22,1,"PAH",1,1,355,0)
         (routines, DDs, templates, etc.).
"PKG",26,22,1,"PAH",1,1,356,0)
     c.  Verify Checksums in Transport Global - This option will allow
"PKG",26,22,1,"PAH",1,1,357,0)
         you to ensure the integrity of the routines that are in the
"PKG",26,22,1,"PAH",1,1,358,0)
         transport global.
"PKG",26,22,1,"PAH",1,1,359,0)
      
"PKG",26,22,1,"PAH",1,1,360,0)
 4.  From the Installation Menu, select the Install Package(s) option and
"PKG",26,22,1,"PAH",1,1,361,0)
     choose the patch to install.
"PKG",26,22,1,"PAH",1,1,362,0)
  
"PKG",26,22,1,"PAH",1,1,363,0)
 5.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
"PKG",26,22,1,"PAH",1,1,364,0)
     Install? NO//'     
"PKG",26,22,1,"PAH",1,1,365,0)
     Respond: NO
"PKG",26,22,1,"PAH",1,1,366,0)
  
"PKG",26,22,1,"PAH",1,1,367,0)
 6.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
"PKG",26,22,1,"PAH",1,1,368,0)
     NO//'
"PKG",26,22,1,"PAH",1,1,369,0)
     Respond: NO
"PKG",26,22,1,"PAH",1,1,370,0)
  
"PKG",26,22,1,"PAH",1,1,371,0)
 7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
"PKG",26,22,1,"PAH",1,1,372,0)
     and Protocols? NO//' 
"PKG",26,22,1,"PAH",1,1,373,0)
     Respond: NO
"PKG",26,22,1,"PAH",1,1,374,0)
  
"PKG",26,22,1,"PAH",1,1,375,0)
 8.  If prompted 'Delay Install (Minutes):  (0 - 60): 0//' respond 0.
"PKG",26,22,1,"PAH",1,1,376,0)
  
"PKG",26,22,1,"PAH",1,1,377,0)
  
"PKG",26,22,1,"PAH",1,1,378,0)
 Post-Installation Instructions:
"PKG",26,22,1,"PAH",1,1,379,0)
 -------------------------------
"PKG",26,22,1,"PAH",1,1,380,0)
 N/A
"PKG",26,22,1,"PAH",1,1,381,0)
 
"PKG",26,22,1,"PAH",1,1,382,0)
 Back-Out Procedure:
"PKG",26,22,1,"PAH",1,1,383,0)
 -------------------
"PKG",26,22,1,"PAH",1,1,384,0)
 The build does not make any changes that would affect the operational 
"PKG",26,22,1,"PAH",1,1,385,0)
 state of the software and platform settings.
"PKG",26,22,1,"PAH",1,1,386,0)
  
"PKG",26,22,1,"PAH",1,1,387,0)
1. Back-Out Strategy
"PKG",26,22,1,"PAH",1,1,388,0)
     During installation, if the option to back up routines was run as 
"PKG",26,22,1,"PAH",1,1,389,0)
     directed, 'Backup a Transport Global', then routines have the ability
"PKG",26,22,1,"PAH",1,1,390,0)
     to be restored from the "backup" MailMan message that was generated.
"PKG",26,22,1,"PAH",1,1,391,0)
     However, the KIDS installation process does not perform a restore of 
"PKG",26,22,1,"PAH",1,1,392,0)
     other VistA components, such as data dictionary, cross-reference, and
"PKG",26,22,1,"PAH",1,1,393,0)
     template changes, etc. 
"PKG",26,22,1,"PAH",1,1,394,0)
     Prior to attempting a back-out of the software, please contact the VA
"PKG",26,22,1,"PAH",1,1,395,0)
     Help Desk at 1-855-673-4357 for support or assistance.
"PKG",26,22,1,"PAH",1,1,396,0)
 
"PKG",26,22,1,"PAH",1,1,397,0)
     a.  Back-Out Considerations
"PKG",26,22,1,"PAH",1,1,398,0)
         The LIM and the Chief of Pathology have the authority to order 
"PKG",26,22,1,"PAH",1,1,399,0)
the
"PKG",26,22,1,"PAH",1,1,400,0)
         back-out.
"PKG",26,22,1,"PAH",1,1,401,0)
 
"PKG",26,22,1,"PAH",1,1,402,0)
     b.  Back-Out Criteria
"PKG",26,22,1,"PAH",1,1,403,0)
         Criteria for a back-out includes, but are not limited, to the
"PKG",26,22,1,"PAH",1,1,404,0)
         following:
"PKG",26,22,1,"PAH",1,1,405,0)
         i. Failed baseline testing.
"PKG",26,22,1,"PAH",1,1,406,0)
         ii. Non-recoverable software error.
"PKG",26,22,1,"PAH",1,1,407,0)
 
"PKG",26,22,1,"PAH",1,1,408,0)
     c.  Back-Out Risks
"PKG",26,22,1,"PAH",1,1,409,0)
     No back-out risks have been determined at this time.
"PKG",26,22,1,"PAH",1,1,410,0)
     d.  Authority for Back-Out
"PKG",26,22,1,"PAH",1,1,411,0)
         The LIM, the Lab Manager, and the Chief of Pathology have the
"PKG",26,22,1,"PAH",1,1,412,0)
         authority to request and approve the back-out and accept the
"PKG",26,22,1,"PAH",1,1,413,0)
         risks.
"PKG",26,22,1,"PAH",1,1,414,0)
 
"PKG",26,22,1,"PAH",1,1,415,0)
2. Rollback Procedure
"PKG",26,22,1,"PAH",1,1,416,0)
    The LR*5.2*479 build as well as any installed dependent patch changes 
"PKG",26,22,1,"PAH",1,1,417,0)
    that follow these releases need to be taken out in reverse of the
"PKG",26,22,1,"PAH",1,1,418,0)
    order in which they were installed; routines and data dictionary
"PKG",26,22,1,"PAH",1,1,419,0)
    modifications and populated data must also be rolled back in reverse
"PKG",26,22,1,"PAH",1,1,420,0)
    order.
"PKG",26,22,1,"PAH",1,1,421,0)
    Please contact the VA Help Desk at 1-855-763-4357 for support or 
"PKG",26,22,1,"PAH",1,1,422,0)
    assistance regarding roll-back procedures.
"PKG",26,22,1,"PAH",1,1,423,0)
     
"PKG",26,22,1,"PAH",1,1,424,0)
     a.  Rollback Considerations
"PKG",26,22,1,"PAH",1,1,425,0)
         No rollback considerations have been determined at this time.
"PKG",26,22,1,"PAH",1,1,426,0)
  
"PKG",26,22,1,"PAH",1,1,427,0)
     b.  Rollback Criteria
"PKG",26,22,1,"PAH",1,1,428,0)
         The only criteria for a rollback that has been determined at this
"PKG",26,22,1,"PAH",1,1,429,0)
         time is that the installation failed baseline testing.
"PKG",26,22,1,"PAH",1,1,430,0)
     
"PKG",26,22,1,"PAH",1,1,431,0)
     c.  Rollback Risks
"PKG",26,22,1,"PAH",1,1,432,0)
         The only risk determined at this time is the possibility of
"PKG",26,22,1,"PAH",1,1,433,0)
         downtime which would only effect the users of the Laboratory
"PKG",26,22,1,"PAH",1,1,434,0)
         package.
"PKG",26,22,1,"PAH",1,1,435,0)
  
"PKG",26,22,1,"PAH",1,1,436,0)
     d.  Authority for Rollback
"PKG",26,22,1,"PAH",1,1,437,0)
         The LIM, the Lab Manager, and the Chief of Pathology have the
"PKG",26,22,1,"PAH",1,1,438,0)
         authority to require the rollback and accept the risks.
"PKG",26,22,1,"PAH",1,1,439,0)
 
"PKG",26,22,1,"PAH",1,1,440,0)
     e.  Rollback Procedure
"PKG",26,22,1,"PAH",1,1,441,0)
         The need for a rollback is highly unlikely, however if it is
"PKG",26,22,1,"PAH",1,1,442,0)
         required, please contact the Product Support team for
"PKG",26,22,1,"PAH",1,1,443,0)
         assistance. The rollback procedure will require Lab downtime and
"PKG",26,22,1,"PAH",1,1,444,0)
         a reinstall of any previous KIDS versions.
"PKG",26,22,1,"PAH",1,1,445,0)
 
"PKG",26,22,1,"PAH",1,1,446,0)
 
"PKG",26,22,1,"PAH",1,1,447,0)
 Example of Captured Installation:
"PKG",26,22,1,"PAH",1,1,448,0)
 ==================================
"PKG",26,22,1,"PAH",1,1,449,0)
 
"PKG",26,22,1,"PAH",1,1,450,0)
Enter message action (in IN basket): Ignore// Xtract KIDS
"PKG",26,22,1,"PAH",1,1,451,0)
 
"PKG",26,22,1,"PAH",1,1,452,0)
Select PackMan function: 6  INSTALL/CHECK MESSAGE
"PKG",26,22,1,"PAH",1,1,453,0)
 
"PKG",26,22,1,"PAH",1,1,454,0)
Line 389  Message #412245    Unloading KIDS Distribution   LR*5.2*479
"PKG",26,22,1,"PAH",1,1,455,0)
   LR*5.2*479
"PKG",26,22,1,"PAH",1,1,456,0)
 
"PKG",26,22,1,"PAH",1,1,457,0)
Want to Continue with Load? YES// YES
"PKG",26,22,1,"PAH",1,1,458,0)
Loading Distribution...
"PKG",26,22,1,"PAH",1,1,459,0)
 
"PKG",26,22,1,"PAH",1,1,460,0)
   LR*5.2*479
"PKG",26,22,1,"PAH",1,1,461,0)
Will first run the Environment Check Routine, LR479
"PKG",26,22,1,"PAH",1,1,462,0)
 
"PKG",26,22,1,"PAH",1,1,463,0)
 
"PKG",26,22,1,"PAH",1,1,464,0)
 
"PKG",26,22,1,"PAH",1,1,465,0)
                   --- Environment Check is Ok ---
"PKG",26,22,1,"PAH",1,1,466,0)
 
"PKG",26,22,1,"PAH",1,1,467,0)
 
"PKG",26,22,1,"PAH",1,1,468,0)
             Sending install loaded alert to mail group G.LMI
"PKG",26,22,1,"PAH",1,1,469,0)
 
"PKG",26,22,1,"PAH",1,1,470,0)
Select PackMan function: 
"PKG",26,22,1,"PAH",1,1,471,0)
 
"PKG",26,22,1,"PAH",1,1,472,0)
 
"PKG",26,22,1,"PAH",1,1,473,0)
Enter message action (in IN basket): Ignore// 
"PKG",26,22,1,"PAH",1,1,474,0)
 
"PKG",26,22,1,"PAH",1,1,475,0)
 
"PKG",26,22,1,"PAH",1,1,476,0)
Select Installation <TEST ACCOUNT> Option: 5  Backup a Transport Global
"PKG",26,22,1,"PAH",1,1,477,0)
Select INSTALL NAME:    LR*5.2*479    2/21/17@10:44:12
"PKG",26,22,1,"PAH",1,1,478,0)
     => LR*5.2*479
"PKG",26,22,1,"PAH",1,1,479,0)
 
"PKG",26,22,1,"PAH",1,1,480,0)
This Distribution was loaded on Feb 21, 2017@10:44:12 with header of 
"PKG",26,22,1,"PAH",1,1,481,0)
   LR*5.2*479
"PKG",26,22,1,"PAH",1,1,482,0)
   It consisted of the following Install(s):
"PKG",26,22,1,"PAH",1,1,483,0)
     LR*5.2*479
"PKG",26,22,1,"PAH",1,1,484,0)
Subject: Backup of LR*5.2*479 install on Feb 21, 2017
"PKG",26,22,1,"PAH",1,1,485,0)
  Replace 
"PKG",26,22,1,"PAH",1,1,486,0)
Loading Routines for LR*5.2*479.........
"PKG",26,22,1,"PAH",1,1,487,0)
Send mail to: BELSCHWINDER,MICHAEL//   BELSCHWINDER,MICHAEL
"PKG",26,22,1,"PAH",1,1,488,0)
Select basket to send to: IN//   
"PKG",26,22,1,"PAH",1,1,489,0)
And Send to: 
"PKG",26,22,1,"PAH",1,1,490,0)
 
"PKG",26,22,1,"PAH",1,1,491,0)
 
"PKG",26,22,1,"PAH",1,1,492,0)
Select Installation <TEST ACCOUNT> Option: 4  Compare Transport Global to 
"PKG",26,22,1,"PAH",1,1,493,0)
Current System
"PKG",26,22,1,"PAH",1,1,494,0)
Select INSTALL NAME:    LR*5.2*479    2/21/17@10:44:12
"PKG",26,22,1,"PAH",1,1,495,0)
     => LR*5.2*479
"PKG",26,22,1,"PAH",1,1,496,0)
 
"PKG",26,22,1,"PAH",1,1,497,0)
This Distribution was loaded on Feb 21, 2017@10:44:12 with header of 
"PKG",26,22,1,"PAH",1,1,498,0)
   LR*5.2*479
"PKG",26,22,1,"PAH",1,1,499,0)
   It consisted of the following Install(s):
"PKG",26,22,1,"PAH",1,1,500,0)
     LR*5.2*479
"PKG",26,22,1,"PAH",1,1,501,0)
 
"PKG",26,22,1,"PAH",1,1,502,0)
     Select one of the following:
"PKG",26,22,1,"PAH",1,1,503,0)
 
"PKG",26,22,1,"PAH",1,1,504,0)
          1         Full Comparison
"PKG",26,22,1,"PAH",1,1,505,0)
          2         Second line of Routines only
"PKG",26,22,1,"PAH",1,1,506,0)
          3         Routines only
"PKG",26,22,1,"PAH",1,1,507,0)
          4         Old style Routine compare
"PKG",26,22,1,"PAH",1,1,508,0)
 
"PKG",26,22,1,"PAH",1,1,509,0)
Type of Compare: 1  Full Comparison
"PKG",26,22,1,"PAH",1,1,510,0)
DEVICE: HOME//   TELNET PORT
"PKG",26,22,1,"PAH",1,1,511,0)
 
"PKG",26,22,1,"PAH",1,1,512,0)
Report is displayed....
"PKG",26,22,1,"PAH",1,1,513,0)
 
"PKG",26,22,1,"PAH",1,1,514,0)
 
"PKG",26,22,1,"PAH",1,1,515,0)
Select Installation <TEST ACCOUNT> Option: 2  Verify Checksums in 
"PKG",26,22,1,"PAH",1,1,516,0)
Transport Global
"PKG",26,22,1,"PAH",1,1,517,0)
Select INSTALL NAME:    LR*5.2*479    2/21/17@10:44:12
"PKG",26,22,1,"PAH",1,1,518,0)
     => LR*5.2*479
"PKG",26,22,1,"PAH",1,1,519,0)
 
"PKG",26,22,1,"PAH",1,1,520,0)
This Distribution was loaded on Feb 21, 2017@10:44:12 with header of 
"PKG",26,22,1,"PAH",1,1,521,0)
   LR*5.2*479
"PKG",26,22,1,"PAH",1,1,522,0)
   It consisted of the following Install(s):
"PKG",26,22,1,"PAH",1,1,523,0)
     LR*5.2*479
"PKG",26,22,1,"PAH",1,1,524,0)
 
"PKG",26,22,1,"PAH",1,1,525,0)
Want each Routine Listed with Checksums: Yes//   YES
"PKG",26,22,1,"PAH",1,1,526,0)
DEVICE: HOME//   TELNET PORT
"PKG",26,22,1,"PAH",1,1,527,0)
 
"PKG",26,22,1,"PAH",1,1,528,0)
 
"PKG",26,22,1,"PAH",1,1,529,0)
PACKAGE: LR*5.2*479     Feb 21, 2017 10:53 am                         
"PKG",26,22,1,"PAH",1,1,530,0)
PAGE 1
"PKG",26,22,1,"PAH",1,1,531,0)
--------------------------------------------------------------------------
"PKG",26,22,1,"PAH",1,1,532,0)
 
"PKG",26,22,1,"PAH",1,1,533,0)
 
"PKG",26,22,1,"PAH",1,1,534,0)
LR479     Calculated   18225928
"PKG",26,22,1,"PAH",1,1,535,0)
LR7OFAO   Calculated   52676862
"PKG",26,22,1,"PAH",1,1,536,0)
LRAP      Calculated   25554526
"PKG",26,22,1,"PAH",1,1,537,0)
LRAPKOE   Calculated  175040482
"PKG",26,22,1,"PAH",1,1,538,0)
LRAPLG    Calculated   12446427
"PKG",26,22,1,"PAH",1,1,539,0)
LRAPLG1   Calculated  181849693
"PKG",26,22,1,"PAH",1,1,540,0)
LROE      Calculated   39978878
"PKG",26,22,1,"PAH",1,1,541,0)
LRUWLF    Calculated   11960061
"PKG",26,22,1,"PAH",1,1,542,0)
LRXREF    Calculated   76007577
"PKG",26,22,1,"PAH",1,1,543,0)
 
"PKG",26,22,1,"PAH",1,1,544,0)
   9 Routines checked, 0 failed.
"PKG",26,22,1,"PAH",1,1,545,0)
 
"PKG",26,22,1,"PAH",1,1,546,0)
Select Installation <TEST ACCOUNT> Option: 6  Install Package(s)
"PKG",26,22,1,"PAH",1,1,547,0)
Select INSTALL NAME:    LR*5.2*479    2/21/17@10:44:12
"PKG",26,22,1,"PAH",1,1,548,0)
     => LR*5.2*479
"PKG",26,22,1,"PAH",1,1,549,0)
 
"PKG",26,22,1,"PAH",1,1,550,0)
This Distribution was loaded on Feb 21, 2017@10:44:12 with header of 
"PKG",26,22,1,"PAH",1,1,551,0)
   LR*5.2*479
"PKG",26,22,1,"PAH",1,1,552,0)
   It consisted of the following Install(s):
"PKG",26,22,1,"PAH",1,1,553,0)
     LR*5.2*479
"PKG",26,22,1,"PAH",1,1,554,0)
Checking Install for Package LR*5.2*479
"PKG",26,22,1,"PAH",1,1,555,0)
Will first run the Environment Check Routine, LR479
"PKG",26,22,1,"PAH",1,1,556,0)
 
"PKG",26,22,1,"PAH",1,1,557,0)
 
"PKG",26,22,1,"PAH",1,1,558,0)
 
"PKG",26,22,1,"PAH",1,1,559,0)
                        --- Environment Check is Ok 
"PKG",26,22,1,"PAH",1,1,560,0)
 
"PKG",26,22,1,"PAH",1,1,561,0)
 
"PKG",26,22,1,"PAH",1,1,562,0)
          Sending install loaded alert to mail group G.LMI
"PKG",26,22,1,"PAH",1,1,563,0)
 
"PKG",26,22,1,"PAH",1,1,564,0)
Install Questions for LR*5.2*479
"PKG",26,22,1,"PAH",1,1,565,0)
 
"PKG",26,22,1,"PAH",1,1,566,0)
Incoming Files:
"PKG",26,22,1,"PAH",1,1,567,0)
 
"PKG",26,22,1,"PAH",1,1,568,0)
 
"PKG",26,22,1,"PAH",1,1,569,0)
   69.73     LR AP DIALOG CONFIG  (Partial Definition)
"PKG",26,22,1,"PAH",1,1,570,0)
Note:  You already have the 'LR AP DIALOG CONFIG' File.
"PKG",26,22,1,"PAH",1,1,571,0)
 
"PKG",26,22,1,"PAH",1,1,572,0)
Want KIDS to Rebuild Menu Trees Upon Completion of Install? NO// 
"PKG",26,22,1,"PAH",1,1,573,0)
 
"PKG",26,22,1,"PAH",1,1,574,0)
 
"PKG",26,22,1,"PAH",1,1,575,0)
Want KIDS to INHIBIT LOGONs during the install? NO// 
"PKG",26,22,1,"PAH",1,1,576,0)
Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO// 
"PKG",26,22,1,"PAH",1,1,577,0)
 
"PKG",26,22,1,"PAH",1,1,578,0)
Enter the Device you want to print the Install messages.
"PKG",26,22,1,"PAH",1,1,579,0)
You can queue the install by enter a 'Q' at the device prompt.
"PKG",26,22,1,"PAH",1,1,580,0)
Enter a '^' to abort the install.
"PKG",26,22,1,"PAH",1,1,581,0)
 
"PKG",26,22,1,"PAH",1,1,582,0)
DEVICE: HOME// ;;9999  TELNET PORT
"PKG",26,22,1,"PAH",1,1,583,0)
 
"PKG",26,22,1,"PAH",1,1,584,0)
 
"PKG",26,22,1,"PAH",1,1,585,0)
--------------------------------------------------------------------------
"PKG",26,22,1,"PAH",1,1,586,0)
 
"PKG",26,22,1,"PAH",1,1,587,0)
 Install Started for LR*5.2*479 : 
"PKG",26,22,1,"PAH",1,1,588,0)
               Feb 21, 2017@10:55:15
"PKG",26,22,1,"PAH",1,1,589,0)
 
"PKG",26,22,1,"PAH",1,1,590,0)
Build Distribution Date: Feb 17, 2017
"PKG",26,22,1,"PAH",1,1,591,0)
 
"PKG",26,22,1,"PAH",1,1,592,0)
 Installing Routines:
"PKG",26,22,1,"PAH",1,1,593,0)
               Feb 21, 2017@10:55:15
"PKG",26,22,1,"PAH",1,1,594,0)
 
"PKG",26,22,1,"PAH",1,1,595,0)
 Running Pre-Install Routine: PRE^LR479
"PKG",26,22,1,"PAH",1,1,596,0)
 
"PKG",26,22,1,"PAH",1,1,597,0)
 
"PKG",26,22,1,"PAH",1,1,598,0)
                     *** Preinstall completed ***
"PKG",26,22,1,"PAH",1,1,599,0)
 
"PKG",26,22,1,"PAH",1,1,600,0)
 Installing Data Dictionaries: 
"PKG",26,22,1,"PAH",1,1,601,0)
               Feb 21, 2017@10:55:15
"PKG",26,22,1,"PAH",1,1,602,0)
 
"PKG",26,22,1,"PAH",1,1,603,0)
 Installing PACKAGE COMPONENTS: 
"PKG",26,22,1,"PAH",1,1,604,0)
 
"PKG",26,22,1,"PAH",1,1,605,0)
 Installing OPTION
"PKG",26,22,1,"PAH",1,1,606,0)
               Feb 21, 2017@10:55:16
"PKG",26,22,1,"PAH",1,1,607,0)
 
"PKG",26,22,1,"PAH",1,1,608,0)
 Running Post-Install Routine: POST^LR479
"PKG",26,22,1,"PAH",1,1,609,0)
 
"PKG",26,22,1,"PAH",1,1,610,0)
 
"PKG",26,22,1,"PAH",1,1,611,0)
                    Correcting Spelling Errors
"PKG",26,22,1,"PAH",1,1,612,0)
 
"PKG",26,22,1,"PAH",1,1,613,0)
 
"PKG",26,22,1,"PAH",1,1,614,0)
               Correcting Builder Block Title Names
"PKG",26,22,1,"PAH",1,1,615,0)
 
"PKG",26,22,1,"PAH",1,1,616,0)
 
"PKG",26,22,1,"PAH",1,1,617,0)
         Sending install completion alert to mail group G.LMI
"PKG",26,22,1,"PAH",1,1,618,0)
 
"PKG",26,22,1,"PAH",1,1,619,0)
 
"PKG",26,22,1,"PAH",1,1,620,0)
         Removing Obsolete fields from LABORATORY TEST (#60) File
"PKG",26,22,1,"PAH",1,1,621,0)
 
"PKG",26,22,1,"PAH",1,1,622,0)
 
"PKG",26,22,1,"PAH",1,1,623,0)
         Remove Obsolete fields from LAB ORDER ENTRY (#69) File
"PKG",26,22,1,"PAH",1,1,624,0)
 
"PKG",26,22,1,"PAH",1,1,625,0)
 
"PKG",26,22,1,"PAH",1,1,626,0)
         Sending install completion alert to mail group G.LMI
"PKG",26,22,1,"PAH",1,1,627,0)
 
"PKG",26,22,1,"PAH",1,1,628,0)
 Updating Routine file...
"PKG",26,22,1,"PAH",1,1,629,0)
 
"PKG",26,22,1,"PAH",1,1,630,0)
 Updating KIDS files...
"PKG",26,22,1,"PAH",1,1,631,0)
 
"PKG",26,22,1,"PAH",1,1,632,0)
 LR*5.2*479 Installed. 
"PKG",26,22,1,"PAH",1,1,633,0)
               Feb 21, 2017@10:55:16
"PKG",26,22,1,"PAH",1,1,634,0)
 
"PKG",26,22,1,"PAH",1,1,635,0)
 Not a production UCI
"PKG",26,22,1,"PAH",1,1,636,0)
 
"PKG",26,22,1,"PAH",1,1,637,0)
                                   
"PKG",26,22,1,"PAH",1,1,638,0)
LR*5.2*479                                   
"PKG",26,22,1,"PAH",1,1,639,0)
 
"PKG",26,22,1,"PAH",1,1,640,0)
 
"PKG",26,22,1,"PAH",1,1,641,0)
Install Completed
"PRE")
LR479
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
9
"RTN","LR479")
0^^B18459970^n/a
"RTN","LR479",1,0)
LR479 ;DALOI/FHS/TFF - LR*5.2*462 PATCH ENVIRONMENT CHECK ROUTINE; [2/21/17 9:13am]
"RTN","LR479",2,0)
 ;;5.2;LAB SERVICE;**479**;Sep 27, 1994;Build 8
"RTN","LR479",3,0)
ENV ; Does not prevent loading of the transport global.
"RTN","LR479",4,0)
 ; Environment check is done only during the install.
"RTN","LR479",5,0)
 ;
"RTN","LR479",6,0)
 N XQA,XQAMSG
"RTN","LR479",7,0)
 ;
"RTN","LR479",8,0)
CHKNM ; Make sure the patch name exist
"RTN","LR479",9,0)
 S XUMF=1
"RTN","LR479",10,0)
 I '$D(XPDNM) D  G EXIT
"RTN","LR479",11,0)
 . D BMES("No valid patch name exist")
"RTN","LR479",12,0)
 . S XPDQUIT=2
"RTN","LR479",13,0)
 ;
"RTN","LR479",14,0)
 D CHECK
"RTN","LR479",15,0)
 D EXIT
"RTN","LR479",16,0)
 Q
"RTN","LR479",17,0)
 ;
"RTN","LR479",18,0)
CHECK ; Perform environment check
"RTN","LR479",19,0)
 I $S('$G(IOM):1,'$G(IOSL):1,$G(U)'="^":1,1:0) D
"RTN","LR479",20,0)
 . D BMES("Terminal Device is not defined")
"RTN","LR479",21,0)
 . S XPDQUIT=2
"RTN","LR479",22,0)
 I $S('$G(DUZ):1,$D(DUZ)[0:1,$D(DUZ(0))[0:1,1:0) D
"RTN","LR479",23,0)
 . D BMES("Please log in to set local DUZ... variables")
"RTN","LR479",24,0)
 . S XPDQUIT=2
"RTN","LR479",25,0)
 I $P($$ACTIVE^XUSER(DUZ),"^")'=1 D
"RTN","LR479",26,0)
 . D BMES("You are not a valid user on this system")
"RTN","LR479",27,0)
 . S XPDQUIT=2
"RTN","LR479",28,0)
 S XPDIQ("XPZ1","B")="NO" Q
"RTN","LR479",29,0)
EXIT ;
"RTN","LR479",30,0)
 N XQA
"RTN","LR479",31,0)
 I $G(XPDQUIT) D BMES("--- Install Environment Check FAILED ---") Q
"RTN","LR479",32,0)
 D BMES("--- Environment Check is Ok ---")
"RTN","LR479",33,0)
 S XQAMSG="Loading of patch "_$G(XPDNM,"Unknown patch")_" completed on "_$$HTE^XLFDT($H)
"RTN","LR479",34,0)
 D BMES("Sending install loaded alert to mail group G.LMI")
"RTN","LR479",35,0)
 S XQA("G.LMI")=""
"RTN","LR479",36,0)
 D SETUP^XQALERT
"RTN","LR479",37,0)
 H 5
"RTN","LR479",38,0)
 Q
"RTN","LR479",39,0)
 ;
"RTN","LR479",40,0)
PRE ;Pre-install entry point
"RTN","LR479",41,0)
 Q:'$D(XPDNM)
"RTN","LR479",42,0)
 ;
"RTN","LR479",43,0)
 D BMES("*** Preinstall completed ***")
"RTN","LR479",44,0)
 Q
"RTN","LR479",45,0)
POST ;Post install
"RTN","LR479",46,0)
 ;Clean up file 69.73
"RTN","LR479",47,0)
 D SPELL,TITLE
"RTN","LR479",48,0)
 ;Set up CPRS AP ORDER MESSAGE LOG -
"RTN","LR479",49,0)
 ;CPRS AP ORDER MESSAGE IS STORE HERE FOR PROCESSING BY "TASKAP1^LR7OAPKM"
"RTN","LR479",50,0)
 I '$G(^XTMP("LRAP1",0)) D
"RTN","LR479",51,0)
 . S ^XTMP("LRAP1",0)=$$FMADD^XLFDT(DT+365)_U_DT_U_"CPRS AP ORDER MESSAGE LOG"
"RTN","LR479",52,0)
 . S ^XTMP("LRAP1",1,0)=10
"RTN","LR479",53,0)
 S $P(^XTMP("LRAP1",0),U,3)="CPRS AP ORDER MESSAGE LOG"
"RTN","LR479",54,0)
 D
"RTN","LR479",55,0)
 . D BMES("Sending install completion alert to mail group G.LMI")
"RTN","LR479",56,0)
 . S XQAMSG="Installation of patch "_$G(XPDNM,"Unknown patch")_" Installed on "_$$HTE^XLFDT($H)
"RTN","LR479",57,0)
 . S XQA("G.LMI")=""
"RTN","LR479",58,0)
 . D SETUP^XQALERT
"RTN","LR479",59,0)
 K LRDA,LRPRT,LRVR
"RTN","LR479",60,0)
CLEAN60 ; Remove obsolete fields from file 60
"RTN","LR479",61,0)
 D BMES("Removing Obsolete fields from LABORATORY TEST (#60) File")
"RTN","LR479",62,0)
 ;Clean-up LABORATORY TEST field
"RTN","LR479",63,0)
 N DIC,DIE,DA,DIK,X,Y
"RTN","LR479",64,0)
 ; Delete 60, AOE SCREEN field
"RTN","LR479",65,0)
 S DA(1)=60.01,DA=21661,DIK="^DD(60.01," D ^DIK
"RTN","LR479",66,0)
 ;
"RTN","LR479",67,0)
CLEAN69 ; Remove obsolete field from file 69
"RTN","LR479",68,0)
 ; Clean-up LAB ORDER ENTRY file
"RTN","LR479",69,0)
 ;
"RTN","LR479",70,0)
 D BMES("Remove Obsolete fields from LAB ORDER ENTRY (#69) File")
"RTN","LR479",71,0)
 N DA,DAX,DIK
"RTN","LR479",72,0)
 S DA=21661.1,DA(1)=69.02,DIK="^DD(69.02," D ^DIK ; Delete DIALOG subfile
"RTN","LR479",73,0)
 K DA,DIK F DAX=21661.74 D
"RTN","LR479",74,0)
 . S DA=DAX,DA(1)=69.01,DIK="^DD(69.01," D ^DIK ; Delete Surgery Case #
"RTN","LR479",75,0)
 ;
"RTN","LR479",76,0)
MESLMI ; Notify LIM patch is installed.
"RTN","LR479",77,0)
 N XQA,XQAMSG
"RTN","LR479",78,0)
 D BMES("Sending install completion alert to mail group G.LMI")
"RTN","LR479",79,0)
 ;
"RTN","LR479",80,0)
 S XQAMSG="Installation of patch "_$G(XPDNM,"Unknown patch")_"completed on "_$$HTE^XLFDT($H)
"RTN","LR479",81,0)
 S XQA("G.LMI")=""
"RTN","LR479",82,0)
 D SETUP^XQALERT
"RTN","LR479",83,0)
 Q
"RTN","LR479",84,0)
BMES(STR) ;Write BMES^XPDUTL statements
"RTN","LR479",85,0)
 W !
"RTN","LR479",86,0)
 D BMES^XPDUTL($$CJ^XLFSTR(STR,IOM))
"RTN","LR479",87,0)
 Q
"RTN","LR479",88,0)
MAIL ;Send message to G.LMI local mail group of added 64 codes
"RTN","LR479",89,0)
 N DIFROM,XMSUB,XMDUZ,XMTEXT,XMY,LRIEN,LRN
"RTN","LR479",90,0)
 Q
"RTN","LR479",91,0)
 ;
"RTN","LR479",92,0)
SPELL ; Correct Spelling Errors
"RTN","LR479",93,0)
 D BMES("Correcting Spelling Errors")
"RTN","LR479",94,0)
 N SPEC,ND,WORD,SPELL,LN
"RTN","LR479",95,0)
 S SPEC("Erosioin")="Erosion"
"RTN","LR479",96,0)
 S SPEC("Technnique")="Technique"
"RTN","LR479",97,0)
 S SPEC("SLide")="Slide"
"RTN","LR479",98,0)
 S ND=$NA(^LAB(69.73)) F  S ND=$Q(@ND) Q:ND=""  Q:$QS(ND,1)'=69.73  D
"RTN","LR479",99,0)
 . S WORD="" F  S WORD=$O(SPEC(WORD)) Q:WORD=""  D
"RTN","LR479",100,0)
 . . I @ND[WORD S SPELL(ND)=ND_"="""_$$REPLACE^XLFSTR(@ND,.SPEC)_""""
"RTN","LR479",101,0)
 . . I ND[WORD S SPELL(ND)=$$REPLACE^XLFSTR(ND,.SPEC)_"="""_@ND_""""
"RTN","LR479",102,0)
 Q:'$D(SPELL)
"RTN","LR479",103,0)
 S ND=$NA(SPELL) F  S ND=$Q(@ND) Q:ND=""  D
"RTN","LR479",104,0)
 . K @$QS(ND,1) S LN=@ND S @LN
"RTN","LR479",105,0)
 Q
"RTN","LR479",106,0)
 ;
"RTN","LR479",107,0)
TITLE ; Correct Builder Block Title Names
"RTN","LR479",108,0)
 D BMES("Correcting Builder Block Title Names")
"RTN","LR479",109,0)
 N ND,LN,I
"RTN","LR479",110,0)
 S ND=$NA(^LAB(69.73)) F  S ND=$Q(@ND) Q:ND=""  Q:$QS(ND,1)'=69.73  D
"RTN","LR479",111,0)
 . I @ND="Orchiectomy" D
"RTN","LR479",112,0)
 . . S LN="^LAB(69.73," F I=2:1:5 S LN=LN_$QS(ND,I)_$S(I<5:",",1:")")
"RTN","LR479",113,0)
 . . Q:$G(@LN@(1,0))'="Submission Type"
"RTN","LR479",114,0)
 . . K @LN@("B")
"RTN","LR479",115,0)
 . . S @LN@(1,0)="Specimen Type"
"RTN","LR479",116,0)
 . . S @LN@("B","Specimen Type",1)=""
"RTN","LR479",117,0)
 . . S @LN@(2,0)="Submission Type"
"RTN","LR479",118,0)
 . . S @LN@("B","Submission Type",2)=""
"RTN","LR479",119,0)
 Q
"RTN","LR7OFAO")
0^7^B52676862^B54432906
"RTN","LR7OFAO",1,0)
LR7OFAO ;DALOI/JMC - Setup file 69 for AP orders ;02/17/17  15:58
"RTN","LR7OFAO",2,0)
 ;;5.2;LAB SERVICE;**121,350,450,462,479**;Sep 27, 1994;Build 8
"RTN","LR7OFAO",3,0)
 ;
"RTN","LR7OFAO",4,0)
 ;File 44/10040
"RTN","LR7OFAO",5,0)
 ;
"RTN","LR7OFAO",6,0)
 Q
"RTN","LR7OFAO",7,0)
 ;
"RTN","LR7OFAO",8,0)
EN(LRODT,LRDFN,LRSAMP,LRORDR,LRNT,LRPRAC,LRLLOC,LRSDT,ORIFN,LRSPEC,LRSS,LRTST,LRUID,LRRECINF) ; Called from LDSI^LRAPLG1
"RTN","LR7OFAO",9,0)
 ; LRODT=Order date
"RTN","LR7OFAO",10,0)
 ; LRDFN=Patient Lab ID
"RTN","LR7OFAO",11,0)
 ; LRSAMP=Sample ptr to 62
"RTN","LR7OFAO",12,0)
 ; LRORDR=Collection type
"RTN","LR7OFAO",13,0)
 ; LRNT=d/t Ordered
"RTN","LR7OFAO",14,0)
 ; LRSDT=Start date
"RTN","LR7OFAO",15,0)
 ; ORIFN=OE/RR #
"RTN","LR7OFAO",16,0)
 ; LRSPEC=Specimen ptr to 61
"RTN","LR7OFAO",17,0)
 ; LRSS=Test subscript
"RTN","LR7OFAO",18,0)
 ; LRTST=Ordered test
"RTN","LR7OFAO",19,0)
 ; LRUID=UID
"RTN","LR7OFAO",20,0)
 ; LRRECINF:<byref> Output  Array that holds the record numbers created.
"RTN","LR7OFAO",21,0)
 ;
"RTN","LR7OFAO",22,0)
 N X,Y,LRIENLOC,LRQUIET,LRSN,LRSUM,LRIENLOC,LRLCK1,LRSTOP
"RTN","LR7OFAO",23,0)
 N LRFDA,LRFDAIEN,LRMSG,DIERR
"RTN","LR7OFAO",24,0)
 S LRQUIET=1 D ORDER^LROW2
"RTN","LR7OFAO",25,0)
 ; Make sure top level of File 69 is set up and cross referenced
"RTN","LR7OFAO",26,0)
 K DIERR,LRFDAIEN,LRMSG,LRRECINF
"RTN","LR7OFAO",27,0)
 S LRSTOP=0
"RTN","LR7OFAO",28,0)
 S LRLCK1=$NA(^LRO(69,LRODT))
"RTN","LR7OFAO",29,0)
 I '$D(^LRO(69,LRODT)) D  ;
"RTN","LR7OFAO",30,0)
 . S X=$$GETLOCK^LRUTIL(LRLCK1,360)
"RTN","LR7OFAO",31,0)
 . I 'X D  Q  ;
"RTN","LR7OFAO",32,0)
 . . S LRSTOP=1
"RTN","LR7OFAO",33,0)
 . . N MSG
"RTN","LR7OFAO",34,0)
 . . S MSG(1)="The Lab Order Entry File # 69 is in use.",MSG(1,"F")="!!"
"RTN","LR7OFAO",35,0)
 . . S MSG(2)="Please try to file this accession again."
"RTN","LR7OFAO",36,0)
 . . D EN^DDIOL(.MSG)
"RTN","LR7OFAO",37,0)
 . ;
"RTN","LR7OFAO",38,0)
 . S (LRFDAIEN(1),LRRECINF(69))=LRODT
"RTN","LR7OFAO",39,0)
 . S LRFDA(1,69,"+1,",.01)=LRODT
"RTN","LR7OFAO",40,0)
 . D UPDATE^DIE("S","LRFDA(1)","LRFDAIEN","LRMSG")
"RTN","LR7OFAO",41,0)
 . I $D(LRMSG) S LRSTOP=1 D ERRMSG(.LRMSG)
"RTN","LR7OFAO",42,0)
 ;
"RTN","LR7OFAO",43,0)
 L -@LRLCK1 ;unlock top level and proceed
"RTN","LR7OFAO",44,0)
 I 'LRSTOP D ZSN("",.LRRECINF)
"RTN","LR7OFAO",45,0)
 Q
"RTN","LR7OFAO",46,0)
 ;
"RTN","LR7OFAO",47,0)
 ;
"RTN","LR7OFAO",48,0)
ZSN(LRSN,LRRECINF) ;
"RTN","LR7OFAO",49,0)
 ; Create new LRSN entry for specimen
"RTN","LR7OFAO",50,0)
 ; Expects LRODT,LRDFN,LRAA,LRAD,LRAN
"RTN","LR7OFAO",51,0)
 ; Inputs
"RTN","LR7OFAO",52,0)
 ;   LRSN: <byref><opt> Output only. See Outputs below.
"RTN","LR7OFAO",53,0)
 ;   LRRECINF:<byref>  See Outputs
"RTN","LR7OFAO",54,0)
 ; Outputs
"RTN","LR7OFAO",55,0)
 ;   The LRSN array passed in byref is used to return the
"RTN","LR7OFAO",56,0)
 ;   new LRSN value (record #)
"RTN","LR7OFAO",57,0)
 ;   LRRECINF: Holds the IENs the API created.  LRRECINF(69), LRRECINF(69.01), LRRECINF(69.03)
"RTN","LR7OFAO",58,0)
 ;
"RTN","LR7OFAO",59,0)
 N LRDATA,LRLCK1,LRLCK2,LRSTOP,X,Y,R6903
"RTN","LR7OFAO",60,0)
 N IEN,LRFDA,LRFDAIEN,LRMSG,DIERR
"RTN","LR7OFAO",61,0)
 S LRSN=0
"RTN","LR7OFAO",62,0)
 S LRSTOP=0
"RTN","LR7OFAO",63,0)
 S LRLCK1=$NA(^LRO(69,LRODT,1)) ;lock SPECIMEN subfile
"RTN","LR7OFAO",64,0)
 S X=$$GETLOCK^LRUTIL(LRLCK1,360)
"RTN","LR7OFAO",65,0)
 I 'X D  Q  ;
"RTN","LR7OFAO",66,0)
 . N MSG
"RTN","LR7OFAO",67,0)
 . S MSG(1)="Could not lock SPECIMEN subfile.",MSG(1,"F")="!!"
"RTN","LR7OFAO",68,0)
 . S MSG(2)="Please try to file this accession again."
"RTN","LR7OFAO",69,0)
 . D EN^DDIOL(.MSG)
"RTN","LR7OFAO",70,0)
 ;
"RTN","LR7OFAO",71,0)
 S IEN="+1,"_LRODT_","
"RTN","LR7OFAO",72,0)
 S LRFDA(2,69.01,IEN,.01)=LRDFN
"RTN","LR7OFAO",73,0)
 D UPDATE^DIE("","LRFDA(2)","LRFDAIEN","LRMSG")
"RTN","LR7OFAO",74,0)
 I $D(LRMSG) D  ;
"RTN","LR7OFAO",75,0)
 . S LRSTOP=1
"RTN","LR7OFAO",76,0)
 . D ERRMSG(.LRMSG)
"RTN","LR7OFAO",77,0)
 ;
"RTN","LR7OFAO",78,0)
 L -@LRLCK1  ;unlock SPECIMEN whole file
"RTN","LR7OFAO",79,0)
 S (LRSN,LRRECINF(69.01))=$G(LRFDAIEN(1))
"RTN","LR7OFAO",80,0)
 I LRSTOP Q
"RTN","LR7OFAO",81,0)
 I 'LRSN D  Q  ;
"RTN","LR7OFAO",82,0)
 . N MSG
"RTN","LR7OFAO",83,0)
 . S MSG(1)="Failed to create new SPECIMEN entry in file #69.",MSG(1,"F")="!!"
"RTN","LR7OFAO",84,0)
 . S MSG(2)="Please try to file this accession again."
"RTN","LR7OFAO",85,0)
 . D EN^DDIOL(.MSG)
"RTN","LR7OFAO",86,0)
 ;
"RTN","LR7OFAO",87,0)
 ; lock new SPECIMEN record just created
"RTN","LR7OFAO",88,0)
 S LRLCK1=$NA(^LRO(69,LRODT,1,LRSN))
"RTN","LR7OFAO",89,0)
 S X=$$GETLOCK^LRUTIL(LRLCK1,360)
"RTN","LR7OFAO",90,0)
 I 'X D  Q  ;
"RTN","LR7OFAO",91,0)
 . N MSG
"RTN","LR7OFAO",92,0)
 . S MSG(1)="Could not lock new SPECIMEN entry "_LRSN_" in file #69.",MSG(1,"F")="!!"
"RTN","LR7OFAO",93,0)
 . S MSG(2)="Please try to file this accession again."
"RTN","LR7OFAO",94,0)
 . D EN^DDIOL(.MSG)
"RTN","LR7OFAO",95,0)
 ;
"RTN","LR7OFAO",96,0)
 ; Make sure Hospital Location has a value
"RTN","LR7OFAO",97,0)
 I $G(LRLLOC)="" S LRLLOC="UNK"
"RTN","LR7OFAO",98,0)
 K LRDATA,LRMSG,DIERR
"RTN","LR7OFAO",99,0)
 ; File 44/10040
"RTN","LR7OFAO",100,0)
 D FIND^DIC(44,"","@","BOX",LRLLOC,"","B^C","","","LRDATA","LRMSG")
"RTN","LR7OFAO",101,0)
 S LRIENLOC=""
"RTN","LR7OFAO",102,0)
 S X=$O(LRDATA("DILIST",2,0))
"RTN","LR7OFAO",103,0)
 I X S LRIENLOC=$G(LRDATA("DILIST",2,X))
"RTN","LR7OFAO",104,0)
 I 'LRIENLOC S LRLLOC="UNK"
"RTN","LR7OFAO",105,0)
 ;
"RTN","LR7OFAO",106,0)
 ; Set entries into File 69.01
"RTN","LR7OFAO",107,0)
 K IEN,LRFDA,LRFDAIEN,LRMSG,DIERR
"RTN","LR7OFAO",108,0)
 S IEN=LRSN_","_LRODT_","
"RTN","LR7OFAO",109,0)
 S LRFDA(3,69.01,IEN,9.5)=LRORD
"RTN","LR7OFAO",110,0)
 S LRFDA(3,69.01,IEN,1)=DUZ
"RTN","LR7OFAO",111,0)
 S LRFDA(3,69.01,IEN,3)=LRSAMP
"RTN","LR7OFAO",112,0)
 S LRFDA(3,69.01,IEN,4)=LRORDR
"RTN","LR7OFAO",113,0)
 S LRFDA(3,69.01,IEN,5)=LRNT
"RTN","LR7OFAO",114,0)
 S LRFDA(3,69.01,IEN,7)=LRPRAC
"RTN","LR7OFAO",115,0)
 S LRFDA(3,69.01,IEN,8)=LRLLOC
"RTN","LR7OFAO",116,0)
 S LRFDA(3,69.01,IEN,5.5)=LRSDT
"RTN","LR7OFAO",117,0)
 S LRFDA(3,69.01,IEN,23)=LRIENLOC
"RTN","LR7OFAO",118,0)
 S LRFDA(3,69.01,IEN,.11)=ORIFN
"RTN","LR7OFAO",119,0)
 S LRFDA(3,69.01,IEN,10)=LRSDT
"RTN","LR7OFAO",120,0)
 I $G(LRSRDT) S LRFDA(3,69.01,IEN,20)=LRSRDT
"RTN","LR7OFAO",121,0)
 S LRFDA(3,69.01,IEN,12)=DUZ
"RTN","LR7OFAO",122,0)
 S LRFDA(3,69.01,IEN,13)="C"
"RTN","LR7OFAO",123,0)
 S LRFDA(3,69.01,IEN,25)=DUZ(2)
"RTN","LR7OFAO",124,0)
 D FILE^DIE("","LRFDA(3)","LRMSG")
"RTN","LR7OFAO",125,0)
 I $D(LRMSG) D  ;
"RTN","LR7OFAO",126,0)
 . D ERRMSG(.LRMSG)
"RTN","LR7OFAO",127,0)
 . S LRSTOP=1
"RTN","LR7OFAO",128,0)
 ;
"RTN","LR7OFAO",129,0)
 ; node usually set in #69.01 fld 8's Input Transform
"RTN","LR7OFAO",130,0)
 ; using FILE^DIE with external data causes a READ (from 9.2 DD node)
"RTN","LR7OFAO",131,0)
 I 'LRSTOP S ^LR(+LRDFN,.1)=LRLLOC
"RTN","LR7OFAO",132,0)
 ;
"RTN","LR7OFAO",133,0)
 I 'LRSTOP D
"RTN","LR7OFAO",134,0)
 . ;;
"RTN","LR7OFAO",135,0)
 . ; Set File #61 pointer in #69.02
"RTN","LR7OFAO",136,0)
 . ; LRAPLGX Flag set in LRAPLG Routine
"RTN","LR7OFAO",137,0)
 . N IEN,LRFDA,LRMSG,DIERR
"RTN","LR7OFAO",138,0)
 . ; Set top node for 69.02 - set a single specimen entry
"RTN","LR7OFAO",139,0)
 . I '$G(LRAPLGX) D
"RTN","LR7OFAO",140,0)
 . . S IEN="?+1,"_LRSN_","_LRODT_","
"RTN","LR7OFAO",141,0)
 . . S LRFDA(5,69.02,IEN,.01)=LRSPEC
"RTN","LR7OFAO",142,0)
 . . D UPDATE^DIE("","LRFDA(5)","","LRMSG")
"RTN","LR7OFAO",143,0)
 . . I $D(LRMSG) D  ;
"RTN","LR7OFAO",144,0)
 . . . S LRSTOP=1
"RTN","LR7OFAO",145,0)
 . . . D ERRMSG(.LRMSG)
"RTN","LR7OFAO",146,0)
 . I '$G(LRSTOP),$G(LRAPLGX) N IEN,IEN63,LRMSG,LRNODE,LRSPEC D
"RTN","LR7OFAO",147,0)
 . . S IEN63=0 F  S IEN63=+$O(^LR(LRDFN,LRSS,LRIDT,.1,IEN63)) Q:IEN63<1!($G(LRSTOP))  S LRNODE=^(IEN63,0) D
"RTN","LR7OFAO",148,0)
 . . . S LRSPEC=+$P(LRNODE,U,6) Q:'LRSPEC
"RTN","LR7OFAO",149,0)
 . . . K LRFDA,IEN
"RTN","LR7OFAO",150,0)
 . . . S IEN="+1,"_LRSN_","_LRODT_","
"RTN","LR7OFAO",151,0)
 . . . S LRFDA(5,69.02,IEN,.01)=LRSPEC ; Set Specimen Multiple
"RTN","LR7OFAO",152,0)
 . . . S LRFDA(5,69.02,IEN,.02)=IEN63 ;Set instance of the specimen
"RTN","LR7OFAO",153,0)
 . . . S LRFDA(5,69.02,IEN,1)=$P(LRNODE,U) ;Specimen Description
"RTN","LR7OFAO",154,0)
 . . . S LRFDA(5,69.02,IEN,2)=$P(LRNODE,U,7) ;Collection Sample
"RTN","LR7OFAO",155,0)
 . . . D UPDATE^DIE("","LRFDA(5)","","LRMSG")
"RTN","LR7OFAO",156,0)
 . . . I $D(LRMSG) D
"RTN","LR7OFAO",157,0)
 . . . . S LRSTOP=1
"RTN","LR7OFAO",158,0)
 . . . . D ERRMSG(.LRMSG)
"RTN","LR7OFAO",159,0)
 . ;;;*
"RTN","LR7OFAO",160,0)
 ;
"RTN","LR7OFAO",161,0)
 I 'LRSTOP D  ;
"RTN","LR7OFAO",162,0)
 . ; Set data into File 68.02
"RTN","LR7OFAO",163,0)
 . S LRLCK2=$NA(^LRO(68,1,LRAA,1,LRAD,1,LRAN))
"RTN","LR7OFAO",164,0)
 . S X=$$GETLOCK^LRUTIL(LRLCK2,360)
"RTN","LR7OFAO",165,0)
 . I 'X D  Q  ;
"RTN","LR7OFAO",166,0)
 . . S LRSTOP=1
"RTN","LR7OFAO",167,0)
 . . N MSG
"RTN","LR7OFAO",168,0)
 . . S MSG(1)="Could not lock ACCESSION NUMBER entry "_LRAN_" in file #68.02.",MSG(1,"F")="!!"
"RTN","LR7OFAO",169,0)
 . . S MSG(2)="Please try to file this accession again."
"RTN","LR7OFAO",170,0)
 . . D EN^DDIOL(.MSG)
"RTN","LR7OFAO",171,0)
 . ;
"RTN","LR7OFAO",172,0)
 . K IEN,LRFDA,LRFDAIEN,LRMSG,DIERR
"RTN","LR7OFAO",173,0)
 . S IEN=LRAN_","_LRAD_","_LRAA_","
"RTN","LR7OFAO",174,0)
 . S LRFDA(4,68.02,IEN,3)=LRODT
"RTN","LR7OFAO",175,0)
 . S LRFDA(4,68.02,IEN,4)=LRSN
"RTN","LR7OFAO",176,0)
 . S LRFDA(4,68.02,IEN,14)=LRORD
"RTN","LR7OFAO",177,0)
 . D FILE^DIE("","LRFDA(4)","LRMSG")
"RTN","LR7OFAO",178,0)
 . I $D(LRMSG) D  ;
"RTN","LR7OFAO",179,0)
 . . S LRSTOP=1
"RTN","LR7OFAO",180,0)
 . . D ERRMSG(.LRMSG)
"RTN","LR7OFAO",181,0)
 . ;
"RTN","LR7OFAO",182,0)
 ;
"RTN","LR7OFAO",183,0)
 ; Set test in file 69
"RTN","LR7OFAO",184,0)
 ; Set top node for 69.03
"RTN","LR7OFAO",185,0)
 ; Already have lock (#69.01 is parent)
"RTN","LR7OFAO",186,0)
 S R6903=0
"RTN","LR7OFAO",187,0)
 I 'LRSTOP D  ;
"RTN","LR7OFAO",188,0)
 . K IEN,LRFDA,LRFDAIEN,LRMSG,DIERR
"RTN","LR7OFAO",189,0)
 . S IEN="?+1,"_LRSN_","_LRODT_","
"RTN","LR7OFAO",190,0)
 . S LRFDA(6,69.03,IEN,.01)=LRTST
"RTN","LR7OFAO",191,0)
 . I $G(LROUTINE) S LRFDA(6,69.03,IEN,1)=LROUTINE
"RTN","LR7OFAO",192,0)
 . S LRFDA(6,69.03,IEN,2)=LRAD
"RTN","LR7OFAO",193,0)
 . S LRFDA(6,69.03,IEN,3)=LRAA
"RTN","LR7OFAO",194,0)
 . S LRFDA(6,69.03,IEN,4)=LRAN
"RTN","LR7OFAO",195,0)
 . S LRFDA(6,69.03,IEN,13)=LRUID
"RTN","LR7OFAO",196,0)
 . ;;*
"RTN","LR7OFAO",197,0)
 . S LRFDA(6,69.03,IEN,8)="IP" ;STATUS [IN PROCESS]
"RTN","LR7OFAO",198,0)
 . S LRFDA(6,69.03,IEN,9)="L" ;ORIGIN OF ORDER [LAB]
"RTN","LR7OFAO",199,0)
 . ;;;*
"RTN","LR7OFAO",200,0)
 . D UPDATE^DIE("","LRFDA(6)","LRFDAIEN","LRMSG")
"RTN","LR7OFAO",201,0)
 . I $D(LRMSG) D ERRMSG(.LRMSG) Q
"RTN","LR7OFAO",202,0)
 . S (R6903,LRRECINF(69.03))=$G(LRFDAIEN(1))
"RTN","LR7OFAO",203,0)
 . I 'R6903 D  ;
"RTN","LR7OFAO",204,0)
 . . S LRSTOP=1
"RTN","LR7OFAO",205,0)
 . . N MSG
"RTN","LR7OFAO",206,0)
 . . S MSG(1)="Could not create new #69.03 entry."
"RTN","LR7OFAO",207,0)
 . . D ERRMSG()
"RTN","LR7OFAO",208,0)
 . ;
"RTN","LR7OFAO",209,0)
 ;
"RTN","LR7OFAO",210,0)
 I $G(LRSTOP)=0,$G(LRODT),$G(LRSN),$P($G(^LR(+$G(LRDFN),0)),U,2)=2 D
"RTN","LR7OFAO",211,0)
 . N NATURE S NATURE="5^POLICY^99ORN"
"RTN","LR7OFAO",212,0)
 . S:'$G(DFN) DFN=+$P(^LR(+$G(LRDFN),0),U,3)
"RTN","LR7OFAO",213,0)
 . D NEW^LR7OB1(LRODT,LRSN,"SN",NATURE,,6) ;CALL TO UPDATE CPRS
"RTN","LR7OFAO",214,0)
 L -@LRLCK2
"RTN","LR7OFAO",215,0)
 L -@LRLCK1
"RTN","LR7OFAO",216,0)
 Q
"RTN","LR7OFAO",217,0)
 ;
"RTN","LR7OFAO",218,0)
 ;
"RTN","LR7OFAO",219,0)
ERRMSG(LRARRAY,ARR2) ;
"RTN","LR7OFAO",220,0)
 ; Filing error notification
"RTN","LR7OFAO",221,0)
 ; Inputs
"RTN","LR7OFAO",222,0)
 ;  LRARRAY: <byref><opt> FM compliant message array
"RTN","LR7OFAO",223,0)
 ;     ARR2: <byref><byval><opt> Additional text
"RTN","LR7OFAO",224,0)
 ;
"RTN","LR7OFAO",225,0)
 N MSG,I,II,J
"RTN","LR7OFAO",226,0)
 S MSG(1)="Filing errors in routine LR7OFAO for "_LRODT_" Specimen: "_LRDFN
"RTN","LR7OFAO",227,0)
 ; Add ARR2 nodes
"RTN","LR7OFAO",228,0)
 I $D(ARR2) D  ;
"RTN","LR7OFAO",229,0)
 . S J=+$O(MSG(" "),-1)
"RTN","LR7OFAO",230,0)
 . I J S:J<1 J=1
"RTN","LR7OFAO",231,0)
 . I $G(ARR2)'="" S MSG(J+1)=ARR2
"RTN","LR7OFAO",232,0)
 . S I=0
"RTN","LR7OFAO",233,0)
 . F  S I=$O(ARR2(I)) Q:'I  S J=+$O(MSG(" "),-1) S:J<1&(J) J=1 S MSG(J+1)=ARR2(I)
"RTN","LR7OFAO",234,0)
 ;
"RTN","LR7OFAO",235,0)
 D EN^DDIOL(.MSG)
"RTN","LR7OFAO",236,0)
 I $D(LRARRAY) D MSG^DIALOG("WE","","","","LRARRAY")
"RTN","LR7OFAO",237,0)
 Q
"RTN","LRAP")
0^6^B25554526^B25886264
"RTN","LRAP",1,0)
LRAP ;DALOI/STAFF - ANATOMIC PATH UTILITY ;02/10/17  09:41
"RTN","LRAP",2,0)
 ;;5.2;LAB SERVICE;**72,248,259,350,462,479**;Sep 27, 1994;Build 8
"RTN","LRAP",3,0)
 ;
"RTN","LRAP",4,0)
 ; Called by many routines in AP package
"RTN","LRAP",5,0)
 D END,CK G:Y=-1 END D LRDICS G:Y B
"RTN","LRAP",6,0)
 S DIC=68,DIC(0)="AEOQMZ"
"RTN","LRAP",7,0)
 S DIC("A")="Select ANATOMIC PATHOLOGY SECTION: "
"RTN","LRAP",8,0)
 ;
"RTN","LRAP",9,0)
 ;
"RTN","LRAP",10,0)
 S DIC("S")="I LRDICS[$P(^(0),U,2),$P(^(0),U,2)]"""",$D(^(3,""B"",DUZ(2)))"
"RTN","LRAP",11,0)
 ;
"RTN","LRAP",12,0)
 D ^DIC
"RTN","LRAP",13,0)
 K DIC,LRDICS
"RTN","LRAP",14,0)
 G:Y<1 END
"RTN","LRAP",15,0)
 ;
"RTN","LRAP",16,0)
B ;
"RTN","LRAP",17,0)
 S X=$P(Y,U,2) D ^LRUTL G:Y=-1 END
"RTN","LRAP",18,0)
 Q
"RTN","LRAP",19,0)
 ;
"RTN","LRAP",20,0)
 ;
"RTN","LRAP",21,0)
AU ; log-in autopsy
"RTN","LRAP",22,0)
 Q  ;see routine LRAUAW
"RTN","LRAP",23,0)
 ;
"RTN","LRAP",24,0)
 ;
"RTN","LRAP",25,0)
CY ; log-in cytopath
"RTN","LRAP",26,0)
 S (LRMD,LRSIT)=""
"RTN","LRAP",27,0)
 ;
"RTN","LRAP",28,0)
 D GETDEF
"RTN","LRAP",29,0)
 ;
"RTN","LRAP",30,0)
 S DR=".08///"_$S(LRLLOC["?":"UNKNOWN",1:LRLLOC)
"RTN","LRAP",31,0)
 S DR=DR_";.07;D:X P^LRUA;.011//^S X=LRPRAC(1);.012;.1//NOW"
"RTN","LRAP",32,0)
 S DR=DR_";S LRRC=X;.02;.99;S LRC(5)=X;1"
"RTN","LRAP",33,0)
 S DR(2,63.902)=".01;S LR(63.902)=X;.06R//^S X=LRSPTOP(0);S:X LRSPTOP=X,LRSPTOP(0)=$P(^LAB(61,LRSPTOP,0),U)"
"RTN","LRAP",34,0)
 S DR(2,63.902)=DR(2,63.902)_";.07R//^S X=LRSAMP(0);S:X LRSAMP=X,LRSAMP(0)=$P(^LAB(62,LRSAMP,0),U);S:'LRCAPA Y=""@2"";.02;@2"
"RTN","LRAP",35,0)
 Q
"RTN","LRAP",36,0)
 ;
"RTN","LRAP",37,0)
 ;
"RTN","LRAP",38,0)
EM ; log-in electron microscopy
"RTN","LRAP",39,0)
 S (LRMD,LRSIT)=""
"RTN","LRAP",40,0)
 ;
"RTN","LRAP",41,0)
 D GETDEF
"RTN","LRAP",42,0)
 ;
"RTN","LRAP",43,0)
 S DR=".08///"_$S(LRLLOC["?":"UNKNOWN",1:LRLLOC)
"RTN","LRAP",44,0)
 S DR=DR_";.07;D:X P^LRUA;.011//^S X=LRPRAC(1);.012;.1//NOW;S LRRC=X"
"RTN","LRAP",45,0)
 S DR=DR_";.02;.021;.99;S LRC(5)=X"
"RTN","LRAP",46,0)
 S DR(2,63.202)=".01;.06R//^S X=LRSPTOP(0);S:X LRSPTOP=X,LRSPTOP(0)=$P(^LAB(61,LRSPTOP,0),U)"
"RTN","LRAP",47,0)
 S DR(2,63.202)=DR(2,63.202)_";.07R//^S X=LRSAMP(0);S:X LRSAMP=X,LRSAMP(0)=$P(^LAB(62,LRSAMP,0),U)"
"RTN","LRAP",48,0)
 Q
"RTN","LRAP",49,0)
 ;
"RTN","LRAP",50,0)
 ;
"RTN","LRAP",51,0)
SP ; log-in surg path
"RTN","LRAP",52,0)
 S (LRMD,LRSIT)=""
"RTN","LRAP",53,0)
 S LR("FS")=+$G(^LAB(69.9,1,11))
"RTN","LRAP",54,0)
 ;
"RTN","LRAP",55,0)
 D GETDEF
"RTN","LRAP",56,0)
 ;
"RTN","LRAP",57,0)
 S DR=".08///"_$S(LRLLOC["?":"UNKNOWN",1:LRLLOC)
"RTN","LRAP",58,0)
 S DR=DR_";.07//^S X=LR(.07);D:X P^LRUA;.011//^S X=LRPRAC(1);.012;.1//NOW"
"RTN","LRAP",59,0)
 S DR=DR_";S LRRC=X;.02;.99;S LRC(5)=X;S:'LR(""FS"") Y=""@1"";1.3;@1"
"RTN","LRAP",60,0)
 S DR(2,63.812)=".01;.06R//^S X=LRSPTOP(0);S:X LRSPTOP=X,LRSPTOP(0)=$P(^LAB(61,LRSPTOP,0),U)"
"RTN","LRAP",61,0)
 S DR(2,63.812)=DR(2,63.812)_";.07R//^S X=LRSAMP(0);S:X LRSAMP=X,LRSAMP(0)=$P(^LAB(62,LRSAMP,0),U)"
"RTN","LRAP",62,0)
 ;
"RTN","LRAP",63,0)
 S:LRABV'["SP" LR("FS")=""
"RTN","LRAP",64,0)
 Q
"RTN","LRAP",65,0)
 ;
"RTN","LRAP",66,0)
 ;
"RTN","LRAP",67,0)
M ; edit path report parameters
"RTN","LRAP",68,0)
 W !
"RTN","LRAP",69,0)
 S DIC="^LRO(69.2,",DIC(0)="AEOQM"
"RTN","LRAP",70,0)
 S DIC("S")="I ""AUCYEMSP""[$P(^(0),U,2)&($P(^(0),U,2)]"""")"
"RTN","LRAP",71,0)
 D ^DIC K DIC G:Y<1 END S DA=+Y
"RTN","LRAP",72,0)
 L +^LRO(69.2,DA):5 I '$T D  G M
"RTN","LRAP",73,0)
 . S MSG="This entry is locked by another user.  Please try again later."
"RTN","LRAP",74,0)
 . D EN^DDIOL(MSG,"","!!") K MSG,DIE,DR,DA
"RTN","LRAP",75,0)
 . D END
"RTN","LRAP",76,0)
 S DR="[LRAPHDR]",DIE="^LRO(69.2,"
"RTN","LRAP",77,0)
 D ^DIE
"RTN","LRAP",78,0)
 L -^LRO(69.2,DA)
"RTN","LRAP",79,0)
 K DIE,DR,DA
"RTN","LRAP",80,0)
 G M
"RTN","LRAP",81,0)
 ;
"RTN","LRAP",82,0)
 ;
"RTN","LRAP",83,0)
D ; Edit path descriptions
"RTN","LRAP",84,0)
 W ! S DIC="^LAB(62.5,",DIC(0)="AEQLM"
"RTN","LRAP",85,0)
 S DLAYGO=62.5,DIC("S")="I ""ESCI""[$P(^(0),U,4)"
"RTN","LRAP",86,0)
 D ^DIC K DIC,DLAYGO G:X=""!(X[U) END S DA=+Y
"RTN","LRAP",87,0)
 S DIE("NO^")="",DIE="^LAB(62.5,"
"RTN","LRAP",88,0)
 L +^LAB(62.5,DA):5 I '$T D  G D
"RTN","LRAP",89,0)
 . S MSG="This entry is locked by another user.  Please try again later."
"RTN","LRAP",90,0)
 . D EN^DDIOL(MSG,"","!!") K MSG,DIE,DR,DA
"RTN","LRAP",91,0)
 . D END
"RTN","LRAP",92,0)
 S DR=".01;1;5;I ""ESCI""'[X W $C(7),!,""Enter E, S, C, or I"" S Y=5;10"
"RTN","LRAP",93,0)
 D ^DIE
"RTN","LRAP",94,0)
 L -^LAB(62.5,DA)
"RTN","LRAP",95,0)
 K DIE,DR,DA
"RTN","LRAP",96,0)
 G D
"RTN","LRAP",97,0)
 ;
"RTN","LRAP",98,0)
 ;
"RTN","LRAP",99,0)
V ; input transform DD(63.08,.11,0)
"RTN","LRAP",100,0)
 I $D(LRH(2)),LRH(2)'=$E(X,1,3) K X W !,"Year received must be same as log-in year (",LRH(2)+1700,") "
"RTN","LRAP",101,0)
 Q
"RTN","LRAP",102,0)
 ;
"RTN","LRAP",103,0)
 ;
"RTN","LRAP",104,0)
CK ;
"RTN","LRAP",105,0)
 S Y=1
"RTN","LRAP",106,0)
 I '$D(DUZ(2)) D  Q
"RTN","LRAP",107,0)
 . W !,$C(7)," Something is wrong..."
"RTN","LRAP",108,0)
 . W !!,"I can't tell if you're really here..."
"RTN","LRAP",109,0)
 . W !!,"Ask your IRM why you don't have a DUZ(2) variable defined!",!
"RTN","LRAP",110,0)
 . S Y=-1
"RTN","LRAP",111,0)
 ;
"RTN","LRAP",112,0)
 S LRAA(4)=$P($G(^DIC(4,+DUZ(2),0)),U)
"RTN","LRAP",113,0)
 I LRAA(4)="" D  Q
"RTN","LRAP",114,0)
 . W $C(7),!!,"I can't tell what DIVISION you are from.  Contact your IRM "
"RTN","LRAP",115,0)
 . S Y=-1
"RTN","LRAP",116,0)
 Q
"RTN","LRAP",117,0)
 ;
"RTN","LRAP",118,0)
 ;
"RTN","LRAP",119,0)
LRDICS ;
"RTN","LRAP",120,0)
 S Y=0,X=$G(LRDICS)
"RTN","LRAP",121,0)
 I $L(X)=2,"SPCYEMAU"[X D C I Y K LRDICS Q
"RTN","LRAP",122,0)
 S LRDICS=$S($L($G(LRDICS)):LRDICS,1:"SPCYEMAU")
"RTN","LRAP",123,0)
 Q
"RTN","LRAP",124,0)
 ;
"RTN","LRAP",125,0)
 ;
"RTN","LRAP",126,0)
C ;
"RTN","LRAP",127,0)
 I $D(LRDICS(2)) G CC
"RTN","LRAP",128,0)
 S (A,B)=0
"RTN","LRAP",129,0)
 F  S A=$O(^LRO(68,A)) Q:'A  I $P($G(^LRO(68,A,0)),"^",2)=LRDICS,$G(^(3,DUZ(2),0)) S B=B+1,B(B)=A
"RTN","LRAP",130,0)
 I B=1 S Y=B(1)_U_$P(^LRO(68,B(1),0),U) K A,B Q
"RTN","LRAP",131,0)
 I B>1,$D(LRDICS(1)) S Y=B(1)_U_$P(^LRO(68,B(1),0),U) K A,B
"RTN","LRAP",132,0)
 Q
"RTN","LRAP",133,0)
 ;
"RTN","LRAP",134,0)
 ;
"RTN","LRAP",135,0)
CC ;
"RTN","LRAP",136,0)
 S (A,B)=0
"RTN","LRAP",137,0)
 F  S A=$O(^LRO(68,A)) Q:'A  I $P($G(^LRO(68,A,0)),"^",2)=LRDICS S B=B+1,B(B)=A Q
"RTN","LRAP",138,0)
 I B=1 S Y=B(1)_U_$P(^LRO(68,B(1),0),U) K A,B
"RTN","LRAP",139,0)
 Q
"RTN","LRAP",140,0)
 ;
"RTN","LRAP",141,0)
 ;
"RTN","LRAP",142,0)
END ;
"RTN","LRAP",143,0)
 D V^LRU
"RTN","LRAP",144,0)
 Q
"RTN","LRAP",145,0)
 ;
"RTN","LRAP",146,0)
 ;
"RTN","LRAP",147,0)
GETDEF ; Get defaults for specimen login
"RTN","LRAP",148,0)
 ;
"RTN","LRAP",149,0)
 ; Default values for collection sample/specimen and lab test
"RTN","LRAP",150,0)
 ;
"RTN","LRAP",151,0)
 N X
"RTN","LRAP",152,0)
 ;
"RTN","LRAP",153,0)
 ; Default value for collection sample
"RTN","LRAP",154,0)
 S X=$$GET^XPAR("USR^DIV^PKG","LR ACCESSION DEFAULT COL SAMP","`"_LRAA,"B")
"RTN","LRAP",155,0)
 S LRSAMP=$P(X,"^"),LRSAMP(0)=$P(X,"^",2)
"RTN","LRAP",156,0)
 ;
"RTN","LRAP",157,0)
 ; Default value for specimen(topography)
"RTN","LRAP",158,0)
 S X=$$GET^XPAR("USR^DIV^PKG","LR ACCESSION DEFAULT SPECIMEN","`"_LRAA,"B")
"RTN","LRAP",159,0)
 S LRSPTOP=$P(X,"^"),LRSPTOP(0)=$P(X,"^",2)
"RTN","LRAP",160,0)
 ;
"RTN","LRAP",161,0)
 ; Default value for laboratory test
"RTN","LRAP",162,0)
 S X=$$GET^XPAR("USR^DIV^PKG","LR ACCESSION DEFAULT LAB TEST","`"_LRAA,"B")
"RTN","LRAP",163,0)
 S LRTST=$P(X,"^"),LRTST(0)=$P(X,"^",2)
"RTN","LRAP",164,0)
 Q
"RTN","LRAPKOE")
0^5^B175040482^B164456408
"RTN","LRAPKOE",1,0)
LRAPKOE ;DSS/FHS - CRPS AP LAB ORDER ENTRY AND ACCESSION ;02/16/17  08:48
"RTN","LRAPKOE",2,0)
 ;;5.2;LAB SERVICE;**462,469,479**;Sep 27, 1994;Build 8
"RTN","LRAPKOE",3,0)
 ; Supported calls AI #, 5286,103,3615
"RTN","LRAPKOE",4,0)
EN1 ;
"RTN","LRAPKOE",5,0)
 ; Called from EN^LRAPLG
"RTN","LRAPKOE",6,0)
 ; Process CPRS AP Orders
"RTN","LRAPKOE",7,0)
 N ANS,ANSY,CNT,CONTROL,DA,DIC,DIERR,DIR,DIRUT,DOD,DR
"RTN","LRAPKOE",8,0)
 N DTOUT,DUOUT,ERR,FDA,FDAIEN,FIL,FLD,GOT,IEN,IENX,II
"RTN","LRAPKOE",9,0)
 N LR,LRAA,LRACN,LRACN0,LRAP690,LRAPNT,LRAPSPEC
"RTN","LRAPKOE",10,0)
 N LRAPTST,LRC,LRCAPA,LRCAPLOC,LRCHK
"RTN","LRAPKOE",11,0)
 N LRCOL,LRCOM,LRC5,LRDFN,LRDISC,LRDIE,LRDOC,LRDPF,LREND,LRFDA
"RTN","LRAPKOE",12,0)
 N LRFDAIEN,LRI,LRIDT,LRIEN,LRJ,LRLL,LRLLOC,LRLWC,LRMD,LRMSG
"RTN","LRAPKOE",13,0)
 N LRNATURE,LRNLT,LRNODE69,LRNONE,LROD0,LROD1,LROD3,LRODT,LRODT0
"RTN","LRAPKOE",14,0)
 N LROESTAT,LROLLOC,LRORD,LRORDRR,LROOS,LRORD,LRORDRR
"RTN","LRAPKOE",15,0)
 N LRORIFN,LRORNUM,LRORPOV,LRORTYP,LROS,LROSD,LRPRAC,LRPANEL,LRPHY,LRPL
"RTN","LRAPKOE",16,0)
 N LRPROVL,LRRC,LRROD,LRSAMP,LRSD,LRSIT,LRSN,LRSND
"RTN","LRAPKOE",17,0)
 N LRSP,LRSPCOM,LRSPEC,LRSS,LRSTATUS,LRSUBBY,LRSUBMIT
"RTN","LRAPKOE",18,0)
 N LRSVSN,LRT,LRTM7,LRTSORU,LRTST,LRTSTS,LRUID,LRURG,LRVAL,LRWKCD
"RTN","LRAPKOE",19,0)
 N LRWARD,LRWRDS,LRX,LRXX,LRYI,LRZX,M9,NODE,ODT,ORD
"RTN","LRAPKOE",20,0)
 N PNM,RET,S,SN,SSN,TMPDIAL,VA,VADM,VAIN
"RTN","LRAPKOE",21,0)
 N LREND,LRVAL,LRORPROV,LRSUBBY,X,X3,X4,Y
"RTN","LRAPKOE",22,0)
 ;
"RTN","LRAPKOE",23,0)
 N COBR,COBX,IFN,IFN1,LRA,LRACD,LRANC0,LRAU,LRCS,LRD,LRFIRST
"RTN","LRAPKOE",24,0)
 N LRO,LRP,LRSEL,LRSF,LRSOP,LRSTATI,LRSVC,LRTNAM
"RTN","LRAPKOE",25,0)
 N LRU,LRWARDS,ORBMSG,ORCMSG,SRTN,X10,X5,X6,X7,X9,Z1
"RTN","LRAPKOE",26,0)
 S LREND=0
"RTN","LRAPKOE",27,0)
 D CK^LRAP I Y<0 Q
"RTN","LRAPKOE",28,0)
 N X,Y
"RTN","LRAPKOE",29,0)
 ;;*
"RTN","LRAPKOE",30,0)
 S LRLWC="WC"
"RTN","LRAPKOE",31,0)
 ;;;*
"RTN","LRAPKOE",32,0)
 ; Select peforming laboratory
"RTN","LRAPKOE",33,0)
 I '$G(LRPL) S LRPL=DUZ(2) S LRVAL=$$SELPL^LRVERA(DUZ(2)) D END:LRVAL<1 Q:LRVAL<1  S LRPL=$S(LRVAL'=DUZ(2):LRVAL,1:DUZ(2))
"RTN","LRAPKOE",34,0)
L5 ;
"RTN","LRAPKOE",35,0)
 Q:$G(LREND)
"RTN","LRAPKOE",36,0)
NEXT ;from LROE1
"RTN","LRAPKOE",37,0)
 K DIR,LRYI,LRAPTST,GOT,LRAPDIAL,LRNODE69,LRSUBMIT,LRPHY,LRAD,LRAA,LRLLOC,LROLLOC,LRSUBBY,LRORPROV D KVAR^LRX
"RTN","LRAPKOE",38,0)
 I $D(LROESTAT) D:$P(LRPARAM,U,14) ^LRCAPV I $G(LREND) K LRLONG,LRPANEL Q
"RTN","LRAPKOE",39,0)
 S (LRODT,X,DT)=$$DT^XLFDT(),LRODT0=$$FMTE^XLFDT(DT,5)
"RTN","LRAPKOE",40,0)
 I '$D(^LRO(69,DT,1,0)) S ^LRO(69,DT,0)=DT,^LRO(69,DT,1,0)="^69.01PA^^",^LRO(69,"B",DT,DT)=""
"RTN","LRAPKOE",41,0)
 I $D(^LAB(69.9,1,"RO")),+$H'=+$P(^("RO"),U) D
"RTN","LRAPKOE",42,0)
 . W $C(7),!,"ROLLOVER ",$S($P(^("RO"),U,2):"IS RUNNING.",1:"HAS NOT RUN.")," ACCESSIONING SHOULDN'T BE DONE NOW.",$C(7),!
"RTN","LRAPKOE",43,0)
 . S DIR("A")="  Are you sure you want to continue",DIR(0)="Y",DIR("B")="No"
"RTN","LRAPKOE",44,0)
 I $T D ^DIR D END:$D(DIRUT) I Y'=1 W !,"OK, try later." D EN1
"RTN","LRAPKOE",45,0)
 S X="T-7",%DT="" D ^%DT S LRTM7=+Y
"RTN","LRAPKOE",46,0)
 K DIC,LRSND,LRSN,LRAPDIAL
"RTN","LRAPKOE",47,0)
 W !!,"Select Order number: " R LRORD:DTIME I LRORD["."!($D(LRLONG)&(LRORD="")) W !,"Wrong format" G EN1
"RTN","LRAPKOE",48,0)
 W @IOF S M9=0 G END:LRORD="^"  I LRORD="" W !?5,"No Order Number entered use standard Specimen Log-in process",! Q
"RTN","LRAPKOE",49,0)
 I $L(LRORD)>8 W !,"The order number entered is too long." H 1 G EN1
"RTN","LRAPKOE",50,0)
 S:LRORD?.N LRORD=+LRORD IF LRORD'?.N D QMSG G EN1
"RTN","LRAPKOE",51,0)
 I '$D(^LRO(69,"C",LRORD)) W !!?10,LRORD_" Does not exist, select another ",$C(7),! G EN1
"RTN","LRAPKOE",52,0)
 L +^LRO(69,"C",LRORD):$G(DILOCKTM,3)
"RTN","LRAPKOE",53,0)
 I '$T W !?5,"Someone else is editing this Order",!!,$C(7) G EN1
"RTN","LRAPKOE",54,0)
 S (LRCHK,LRNONE)=1,(M9,LRODT)=0
"RTN","LRAPKOE",55,0)
 F  S LRODT=+$O(^LRO(69,"C",LRORD,LRODT)) Q:LRODT<1  D
"RTN","LRAPKOE",56,0)
 . S DA=0 F  S DA=$O(^LRO(69,"C",LRORD,LRODT,DA)) Q:DA<1  S LRCHK=LRCHK-1 S:LRNONE'=2 LRNONE=0 D LROE2
"RTN","LRAPKOE",57,0)
 G:$G(LREND) EN1
"RTN","LRAPKOE",58,0)
 I DOD'="" S Y=DOD D DD^LRX W !,!,?5,@LRVIDO,"Patient ",PNM," died on: ",Y,@LRVIDOF W !
"RTN","LRAPKOE",59,0)
 D  I Y=0!($D(DIRUT)) K DIRUT,DTOUT,DUOUT,Y D KVAR^LRX G EN1
"RTN","LRAPKOE",60,0)
 . K Y
"RTN","LRAPKOE",61,0)
 . S DIR(0)="Y"
"RTN","LRAPKOE",62,0)
 . S DIR("A")="Do you wish to continue with this accession [Yes/No]"
"RTN","LRAPKOE",63,0)
 . S DIR("T")=120
"RTN","LRAPKOE",64,0)
 . D ^DIR K DIR
"RTN","LRAPKOE",65,0)
 I LRNONE=2,LRCHK<1 W !,"The order has already been partially accessioned." H 1
"RTN","LRAPKOE",66,0)
 I LRNONE=2,LRCHK>0 W !,"The order has already been accessioned." H 1 G NEXT
"RTN","LRAPKOE",67,0)
 I LRNONE=1 W !,"No order exists with that number." H 1 G NEXT
"RTN","LRAPKOE",68,0)
 I '$$GOT(LRORD) W !!,"All tests for this order have been canceled.",! G NEXT
"RTN","LRAPKOE",69,0)
 S LRODT=$O(^LRO(69,"C",LRORD,0)),LRSN=$O(^LRO(69,"C",LRORD,LRODT,0))
"RTN","LRAPKOE",70,0)
 I $P($G(^LRO(69,LRODT,1,LRSN,1)),U,4)'="" W !?5,"Specimen already processed" D END G EN1
"RTN","LRAPKOE",71,0)
 K LRPHY D DOC(.LRPHY,"PATHOLOGIST") I $G(LRPHY)<1 W !,"No Pathologist selected" D END G EN1
"RTN","LRAPKOE",72,0)
 S (LRPROVL,X)=+LRPHY D D^LRUA S LRPRAC(1)=X
"RTN","LRAPKOE",73,0)
 D DATE(.LRCDT,"COLLECTION DATE/TIME") I $G(LRCDT)<1 D END G EN1
"RTN","LRAPKOE",74,0)
 S LRURG=9,LRAD=DT
"RTN","LRAPKOE",75,0)
 S LRNODE69=^LRO(69,LRODT,1,LRSN,0)
"RTN","LRAPKOE",76,0)
 S LRSUBBY="" I $D(^LRO(69,LRODT,1,LRSN,12))#2 S LRSUBBY=^(12) ;SUBMITTED BY
"RTN","LRAPKOE",77,0)
 S LRORNUM=$G(^LRO(69,LRODT,1,LRSN,.1))
"RTN","LRAPKOE",78,0)
 S LRSUBMIT=$P(LRNODE69,U,2),LRSUBMIT=$P(^VA(200,LRSUBMIT,0),U)_U_LRSUBMIT
"RTN","LRAPKOE",79,0)
 S LRORIFN=$P(LRNODE69,U,11),LRORTYP=$P(LRNODE69,U,4)
"RTN","LRAPKOE",80,0)
 S LRORPROV=+$P($G(^LRO(69,LRODT,1,LRSN,11)),U,3) ;Ordering Provider Optional
"RTN","LRAPKOE",81,0)
NEXT2 ;
"RTN","LRAPKOE",82,0)
 S LRAPSPEC="",LRI=0
"RTN","LRAPKOE",83,0)
 F  S LRI=$O(^LRO(69,LRODT,1,LRSN,4,1,1,LRI)) Q:LRI<1  S LRAPSPEC(LRI)=^(LRI,0)
"RTN","LRAPKOE",84,0)
 S LRLLOC=$P(LRNODE69,U,7),LROLLOC=$P(LRNODE69,U,9) S:LRLLOC="" LRLLOC="NO ABRV"
"RTN","LRAPKOE",85,0)
 K LRCOM S LRCOM=""
"RTN","LRAPKOE",86,0)
 N LRYI S LRYI=0 F  S LRYI=$O(^LRO(69,LRODT,1,LRSN,2,1,1,LRYI)) Q:LRYI<1  D
"RTN","LRAPKOE",87,0)
 . S LRCOM(LRYI)=(^(LRYI,0))
"RTN","LRAPKOE",88,0)
 K LRYI K LRAPDIAL
"RTN","LRAPKOE",89,0)
 F LRYI=13,14,15,16 M LRAPDIAL(".0"_LRYI)=^LRO(69,LRODT,1,LRSN,LRYI) K LRAPDIAL(".0"_LRYI,0)
"RTN","LRAPKOE",90,0)
 K LRYI,LRAPTST,LRTST
"RTN","LRAPKOE",91,0)
 S (LRAA,LRSS)=""
"RTN","LRAPKOE",92,0)
 S LRYI=0 F  S LRYI=$O(^LRO(69,LRODT,1,LRSN,2,"B",LRYI)) Q:LRYI<1  S (LRTSORU,LRTST)=LRYI,LRAPTST(LRYI)="" D
"RTN","LRAPKOE",93,0)
 . S LRWKCD=+$G(^LAB(60,+LRTST,64)),LRNLT=$P($G(^LAM(LRWKCD,0)),"^",2),II=1
"RTN","LRAPKOE",94,0)
 . ;Get accession area for institution
"RTN","LRAPKOE",95,0)
 . S LRAA=+$P($G(^LAB(60,LRTST,8,+$G(LRPL),0)),U,2)
"RTN","LRAPKOE",96,0)
 . I 'LRAA D  Q
"RTN","LRAPKOE",97,0)
 . . S LRERR="[ "_$P($G(^LAB(60,LRTST,0)),U)_"]  DOES NOT HAVE AN APPROPRIATE ACCESSION AREA DEFINED"
"RTN","LRAPKOE",98,0)
 . . W !!,$$CJ^XLFSTR(LRERR,IOM)
"RTN","LRAPKOE",99,0)
 . . W !,$$CJ^XLFSTR("Log-in Aborted",IOM),!
"RTN","LRAPKOE",100,0)
 . . S LREND=1
"RTN","LRAPKOE",101,0)
 . I LRAA S LRSS=$P(^LAB(60,LRTST,0),U,4)
"RTN","LRAPKOE",102,0)
 . N LRI
"RTN","LRAPKOE",103,0)
 . S LRI=$O(^LRO(69,LRODT,1,LRSN,2,"B",LRYI,0))
"RTN","LRAPKOE",104,0)
 . S LRAPTST(LRYI)=$P(^LRO(69,LRODT,1,LRSN,2,LRI,0),U,7)
"RTN","LRAPKOE",105,0)
 ;;;*
"RTN","LRAPKOE",106,0)
 I $G(LREND) K LRERR,LREND D END G EN1
"RTN","LRAPKOE",107,0)
 K LRDPF D PT^LRX
"RTN","LRAPKOE",108,0)
 K LRYI D KVA^VADPT
"RTN","LRAPKOE",109,0)
 S LRAPDIAL=1,LRAP690=$G(LROD0),LRSTATUS="C"
"RTN","LRAPKOE",110,0)
 ;;*
"RTN","LRAPKOE",111,0)
 S LROUTINE=9
"RTN","LRAPKOE",112,0)
 S X=$P(^LRO(68,LRAA,0),U) D ^LRUTL
"RTN","LRAPKOE",113,0)
 S (Y,LRAD)=DT D LRAD^LRU
"RTN","LRAPKOE",114,0)
 ;;;*
"RTN","LRAPKOE",115,0)
 D CHECK68^LRWLST1(LRAA,LRAD)
"RTN","LRAPKOE",116,0)
 S:'$D(^LRO(68,LRAA,1,LRAD,1,0)) ^LRO(68,LRAA,1,LRAD,1,0)="^68.02PA^"
"RTN","LRAPKOE",117,0)
 S LRAN=+$P(^LRO(68,LRAA,1,LRAD,1,0),U,3)
"RTN","LRAPKOE",118,0)
 F  Q:'$D(^LRO(68,LRAA,1,LRAD,1,LRAN))  S LRAN=LRAN+1
"RTN","LRAPKOE",119,0)
 S LRAC=$P(^LRO(68,LRAA,0),U,11)_" "_$S(LRAD["0000":$E(LRAD,2,3),1:$E(LRAD,4,7))_" "_LRAN
"RTN","LRAPKOE",120,0)
 D CRE863^LRAPLG1
"RTN","LRAPKOE",121,0)
 K LRXX S LRXX(LRTST)="" D ORDTST
"RTN","LRAPKOE",122,0)
 D MOVE(LRDFN,LRSS,LRIDT)
"RTN","LRAPKOE",123,0)
 ;
"RTN","LRAPKOE",124,0)
SET68 ;Setup ^LRO(68,LRAA,1,LRAD,1,LRAN
"RTN","LRAPKOE",125,0)
 I LRSS'="AU" D
"RTN","LRAPKOE",126,0)
 .  K LRDIE D CRE868^LRAPLG1
"RTN","LRAPKOE",127,0)
 . S X=^LR(LRDFN,LRSS,LRI,0),LRIDT=LRI,LRCAPLOC=""
"RTN","LRAPKOE",128,0)
 . S LRSD=$P(X,U),LRRC=$P(X,U,10),LRACC=$P(X,U,6),LRMD(1)=$P(X,U,7),LRSIT=$P(X,U,5),LRCS=$P(X,U,11),LRLLOC=$P(X,U,8),LRC(5)=""
"RTN","LRAPKOE",129,0)
 . K LRDIE D EN^LRUWLF
"RTN","LRAPKOE",130,0)
 D UPD68
"RTN","LRAPKOE",131,0)
 L
"RTN","LRAPKOE",132,0)
 Q
"RTN","LRAPKOE",133,0)
 ;
"RTN","LRAPKOE",134,0)
MOVE(LRDFN,LRSS,LRI) ;Move CPRS AP Dialog to ^LR(LRDFN,LRSS,LRI)
"RTN","LRAPKOE",135,0)
 ;Check to see if Surgery Package Dialog is available
"RTN","LRAPKOE",136,0)
 D ^LRAPKLG
"RTN","LRAPKOE",137,0)
 ;
"RTN","LRAPKOE",138,0)
 N ANS,X,Y,ERR,IEN,FDA,FIL,LRX
"RTN","LRAPKOE",139,0)
 S FIL=63.08,FLD=.013
"RTN","LRAPKOE",140,0)
 S IEN=LRI_","_LRDFN_","
"RTN","LRAPKOE",141,0)
 S:LRSS="SP" FIL=63.08
"RTN","LRAPKOE",142,0)
 S:LRSS="CY" FIL=63.09
"RTN","LRAPKOE",143,0)
 S:LRSS="EM" FIL=63.02
"RTN","LRAPKOE",144,0)
 S LRX=0 F  S LRX=$O(LRAPDIAL(LRX)) Q:LRX=""  D
"RTN","LRAPKOE",145,0)
 . K ERR D WP^DIE(FIL,IEN,LRX,"A","LRAPDIAL("_LRX_")","ERR")
"RTN","LRAPKOE",146,0)
 Q
"RTN","LRAPKOE",147,0)
 ;
"RTN","LRAPKOE",148,0)
ORDTST ; Ordered test
"RTN","LRAPKOE",149,0)
 N XX
"RTN","LRAPKOE",150,0)
 S LRWKCD=+$G(^LAB(60,+$G(LRTST),64)),LRNLT=$P($G(^LAM(LRWKCD,0)),"^",2),II=1
"RTN","LRAPKOE",151,0)
 S XX=0
"RTN","LRAPKOE",152,0)
 F  S XX=$O(LRXX(XX)) Q:'XX  S $P(LRXX(XX),"^",2)=LRNLT_"^"_+LRTST
"RTN","LRAPKOE",153,0)
 Q
"RTN","LRAPKOE",154,0)
 ;
"RTN","LRAPKOE",155,0)
LROE2 ;
"RTN","LRAPKOE",156,0)
 S LREND=0 I '$D(^LRO(69,LRODT,1,DA,0)) Q
"RTN","LRAPKOE",157,0)
 N IEN,FLD,FIL,ANS
"RTN","LRAPKOE",158,0)
 S FIL=69.01,FLD=13,IEN=DA_","_LRODT_","
"RTN","LRAPKOE",159,0)
 S ANS=$$GET1^DIQ(FIL,IEN,13,,"ANS","ERR")
"RTN","LRAPKOE",160,0)
 I $L(ANS) D  Q
"RTN","LRAPKOE",161,0)
 . W !,$$CJ^XLFSTR("The order# "_LRORD_" has been "_ANS,IOM),!
"RTN","LRAPKOE",162,0)
 . W $$CJ^XLFSTR("Select another order",IOM),!
"RTN","LRAPKOE",163,0)
 . S LREND=1
"RTN","LRAPKOE",164,0)
 I $D(^LRO(69,LRODT,1,DA,1)) D
"RTN","LRAPKOE",165,0)
 . I $P(^LRO(69,LRODT,1,DA,1),U,4)="C" S LRNONE=2,LRCHK=LRCHK+1 Q
"RTN","LRAPKOE",166,0)
 . I $P(^LRO(69,LRODT,1,DA,0),U,4)="LC",$P(^LRO(69,LRODT,1,DA,1),U,4)="" S LRNONE=2,LRCHK=LRCHK+1
"RTN","LRAPKOE",167,0)
 ;
"RTN","LRAPKOE",168,0)
 K LRSN
"RTN","LRAPKOE",169,0)
 S (LRSN,LRSN(DA))=+DA,LREND=0
"RTN","LRAPKOE",170,0)
 I '$D(^LRO(69,LRODT,1,LRSN,0)) Q
"RTN","LRAPKOE",171,0)
 I '$O(^LRO(69,LRODT,1,LRSN,13,0)) W !?5,"No AP Dialog for this order" S LREND=1 Q
"RTN","LRAPKOE",172,0)
 S M9=$G(M9)+1,LRZX=^LRO(69,LRODT,1,LRSN,0),LRDFN=+LRZX,LRDPF=$P(^LR(LRDFN,0),U,2),DFN=$P(^(0),U,3)
"RTN","LRAPKOE",173,0)
 D PT^LRX
"RTN","LRAPKOE",174,0)
 I $G(VA("MRN"))]"" D
"RTN","LRAPKOE",175,0)
 .W !,PNM,?30,$G(VA("MRN",0))_": "_SSN
"RTN","LRAPKOE",176,0)
 .W !,?30,"DOB: "_$P($G(VADM(3)),U,2) S LRWRDS=LRWRD
"RTN","LRAPKOE",177,0)
 E  W !,PNM,?30,SSN S LRWRDS=LRWRD
"RTN","LRAPKOE",178,0)
 W ?45,"Requesting location: ",$P(LRZX,U,7) S Y=$P(LRZX,U,5) D DD^LRX W !,"Date/Time Ordered: ",Y,?45,"By: ",$S($D(^VA(200,+$P(LRZX,U,2),0)):$P(^(0),U),1:"")
"RTN","LRAPKOE",179,0)
 S LRSVSN=LRSN D ORDER^LROS S LRSN=LRSVSN
"RTN","LRAPKOE",180,0)
 Q
"RTN","LRAPKOE",181,0)
 ;
"RTN","LRAPKOE",182,0)
 ;
"RTN","LRAPKOE",183,0)
QMSG W !,"Enter the order entry number assigned when the test was ordered."
"RTN","LRAPKOE",184,0)
 W:'$D(LRLONG) !,"If the test has not been ordered, type the RETURN key to exit."
"RTN","LRAPKOE",185,0)
 W !,"To exit, type the ""^"" key and RETURN key."
"RTN","LRAPKOE",186,0)
 Q
"RTN","LRAPKOE",187,0)
 ;
"RTN","LRAPKOE",188,0)
 ;
"RTN","LRAPKOE",189,0)
END K DIR,DIRUT,GOT
"RTN","LRAPKOE",190,0)
 D ^LRORDK,LROEND^LRORDK,STOP^LRCAPV,CLEAN D KVAR^LRX
"RTN","LRAPKOE",191,0)
 S LREND=1
"RTN","LRAPKOE",192,0)
 Q
"RTN","LRAPKOE",193,0)
 ;
"RTN","LRAPKOE",194,0)
 ;
"RTN","LRAPKOE",195,0)
GOT(ORD) ;See if all tests have been canceled
"RTN","LRAPKOE",196,0)
 N I,SN,ODT
"RTN","LRAPKOE",197,0)
 S (GOT,ODT,SN)=0
"RTN","LRAPKOE",198,0)
 F  S ODT=$O(^LRO(69,"C",ORD,ODT)) Q:ODT<1  D
"RTN","LRAPKOE",199,0)
 . S SN=0 F  S SN=$O(^LRO(69,"C",ORD,ODT,SN)) Q:SN<1!(GOT)  D
"RTN","LRAPKOE",200,0)
 . . Q:'$D(^LRO(69,ODT,1,SN,0))
"RTN","LRAPKOE",201,0)
 . . S I=0 F  S I=$O(^LRO(69,ODT,1,SN,2,I)) Q:I<1  I $D(^(I,0)),'$P(^(0),"^",11) S GOT=1 Q
"RTN","LRAPKOE",202,0)
 Q GOT
"RTN","LRAPKOE",203,0)
 ;
"RTN","LRAPKOE",204,0)
UPD68 ; Update #68 with required test data
"RTN","LRAPKOE",205,0)
 N LRFILE,ERR,IEN,LRI,LRIEN,LRCNT
"RTN","LRAPKOE",206,0)
 S LRFILE=68.04,IEN(1)=LRTST
"RTN","LRAPKOE",207,0)
 S LRIEN="?+1,"_LRAN_","_LRAD_","_LRAA_","
"RTN","LRAPKOE",208,0)
 S FDA(3,LRFILE,LRIEN,.01)=LRTST
"RTN","LRAPKOE",209,0)
 S FDA(3,LRFILE,LRIEN,1)=LROUTINE
"RTN","LRAPKOE",210,0)
 S FDA(3,LRFILE,LRIEN,8.1)=LRTST
"RTN","LRAPKOE",211,0)
 D UPDATE^DIE("","FDA(3)","IEN","ERR(3)")
"RTN","LRAPKOE",212,0)
 ;
"RTN","LRAPKOE",213,0)
 ;
"RTN","LRAPKOE",214,0)
SPEC68 ; Update #68 with specimen data
"RTN","LRAPKOE",215,0)
 S (LRI,LRCNT)=0 F  S LRI=$O(LRAPSPEC(LRI)) Q:LRI<1  D
"RTN","LRAPKOE",216,0)
 .  K LRFILE,FDAIEN,IEN
"RTN","LRAPKOE",217,0)
 .  S LRFILE=68.05,LRCNT=LRCNT+1
"RTN","LRAPKOE",218,0)
 .  S LRSPEC=$P(LRAPSPEC(LRI),U,6)
"RTN","LRAPKOE",219,0)
 .  S LRSAMP=$P(LRAPSPEC(LRI),U,7)
"RTN","LRAPKOE",220,0)
 .  S FDAIEN="?+"_LRCNT_","_LRAN_","_LRAD_","_LRAA_","
"RTN","LRAPKOE",221,0)
 .  S FDA(31,LRFILE,FDAIEN,.01)=LRSPEC
"RTN","LRAPKOE",222,0)
 .  S FDA(31,LRFILE,FDAIEN,1)=LRSAMP
"RTN","LRAPKOE",223,0)
 .  D UPDATE^DIE("","FDA(31)","IEN","LRERR(31)")
"RTN","LRAPKOE",224,0)
 ;
"RTN","LRAPKOE",225,0)
 S LRCAPA=$P(^LAB(69.9,1,0),"^",14)&($P(^LRO(68,LRAA,0),"^",16))
"RTN","LRAPKOE",226,0)
 I $G(LRCAPA) D WKLD ; Stuff workload data into accession.
"RTN","LRAPKOE",227,0)
 ;
"RTN","LRAPKOE",228,0)
 D LR7OB1 ;;Update CPRS to active status
"RTN","LRAPKOE",229,0)
 ;
"RTN","LRAPKOE",230,0)
 D LR7OFAO ;Update ^LRO(69 with accession data.
"RTN","LRAPKOE",231,0)
 ;
"RTN","LRAPKOE",232,0)
 D SPEC63(LRDFN,LRSS,LRIDT,.LRAPSPEC) ;Load AP Specimens into ^LR(
"RTN","LRAPKOE",233,0)
 ;
"RTN","LRAPKOE",234,0)
 D LRCOM(LRDFN,LRSS,LRIDT,.LRCOM) ; Store comments into ^LR(
"RTN","LRAPKOE",235,0)
 ;
"RTN","LRAPKOE",236,0)
 D ORUT^LRWLST11 ;Populate the ^LR(LRDFN,LRSS,LRIDT,"ORUT" with test data
"RTN","LRAPKOE",237,0)
 ;
"RTN","LRAPKOE",238,0)
 D DIS63(LRDFN,LRSS,LRIDT) ; Display ^LR(LRDFN,LRSS,LRIDT) data.
"RTN","LRAPKOE",239,0)
 ;
"RTN","LRAPKOE",240,0)
 W !,$$CJ^XLFSTR("****  Enter Next Order ****",IOM),!
"RTN","LRAPKOE",241,0)
 Q
"RTN","LRAPKOE",242,0)
DOC(RET,LABEL) ; Return provider
"RTN","LRAPKOE",243,0)
 ;IN = RET by reference
"RTN","LRAPKOE",244,0)
 ;     Label is the prompt the user will see
"RTN","LRAPKOE",245,0)
 ;OUT = LREND=1 if user fails to answer the prompt correctly
"RTN","LRAPKOE",246,0)
 ;      RET = +y
"RTN","LRAPKOE",247,0)
 ;      RET(0) = IEN^.01 FIELD
"RTN","LRAPKOE",248,0)
 N DIR,X,Y,DIRUT,DTOUT,DUOUT
"RTN","LRAPKOE",249,0)
 S DIR(0)="P^200:EQMF",LREND=0
"RTN","LRAPKOE",250,0)
 S DIR("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))"
"RTN","LRAPKOE",251,0)
 S DIR("A")=LABEL
"RTN","LRAPKOE",252,0)
 D ^DIR
"RTN","LRAPKOE",253,0)
 I Y<1 S LREND=1 Q
"RTN","LRAPKOE",254,0)
 S RET=+Y,RET(0)=Y
"RTN","LRAPKOE",255,0)
 Q
"RTN","LRAPKOE",256,0)
DATE(RET,LABEL) ;
"RTN","LRAPKOE",257,0)
 ;
"RTN","LRAPKOE",258,0)
 ;IN = RET by reference
"RTN","LRAPKOE",259,0)
 ;     Label is the prompt the user will see
"RTN","LRAPKOE",260,0)
 ;OUT = LREND=1 if user fails to answer the prompt correctly
"RTN","LRAPKOE",261,0)
 ;      RET = Y
"RTN","LRAPKOE",262,0)
 N DIR,X,Y,DIRUT,DTOUT,DUOUT
"RTN","LRAPKOE",263,0)
 S LREND=0,DIR("A")=LABEL,DIR("?")="Date can not be in the future"
"RTN","LRAPKOE",264,0)
 S DIR(0)="D^:-NOW:EXT"
"RTN","LRAPKOE",265,0)
 D ^DIR
"RTN","LRAPKOE",266,0)
 I Y<1 S LREND=1
"RTN","LRAPKOE",267,0)
 S RET=Y
"RTN","LRAPKOE",268,0)
 Q
"RTN","LRAPKOE",269,0)
DA(Y) ; Returns date in eye-readable month format
"RTN","LRAPKOE",270,0)
 Q $$FMTE^XLFDT(Y,"M")
"RTN","LRAPKOE",271,0)
 Q
"RTN","LRAPKOE",272,0)
LR7OB1 ;Update CPRS to active status
"RTN","LRAPKOE",273,0)
 K DIERR,IEN,LRFDA,ERR
"RTN","LRAPKOE",274,0)
 K ERR
"RTN","LRAPKOE",275,0)
 S LRORD=+$G(^LRO(69,LRODT,1,LRSN,.1))
"RTN","LRAPKOE",276,0)
 S IEN=LRSN_","_LRODT_","
"RTN","LRAPKOE",277,0)
 I '$G(^LRO(69,LRODT,1,LRSN,1)) D
"RTN","LRAPKOE",278,0)
 . S LRFDA(1,69.01,IEN,10)=+$G(LRCDT,$$NOW^XLFDT)
"RTN","LRAPKOE",279,0)
 . S LRFDA(1,69.01,IEN,12)=DUZ
"RTN","LRAPKOE",280,0)
 . S LRFDA(1,69.01,IEN,13)="C"
"RTN","LRAPKOE",281,0)
 . I $G(LRPL) S LRFDA(1,69.01,IEN,25)=+$G(LRPL)
"RTN","LRAPKOE",282,0)
 . S LRFDA(1,69.01,IEN,20)=LRNT
"RTN","LRAPKOE",283,0)
 . D UPDATE^DIE("KS","LRFDA(1)","IEN","ERR")
"RTN","LRAPKOE",284,0)
 K ^LRO(69,"AA",LRODT_"|"_LRSN) ;DD 69.01,13 is incorrect
"RTN","LRAPKOE",285,0)
 S ^LRO(69,"AA",LRORD,LRODT_"|"_LRSN)=""
"RTN","LRAPKOE",286,0)
 ;Update status in OR(100,
"RTN","LRAPKOE",287,0)
 S LRORIFN=+$P($G(^LRO(69,LRODT,1,LRSN,2,1,0)),"^",7) D
"RTN","LRAPKOE",288,0)
 . S CONTROL=$S($G(LRORIFN):"SC",1:"SN")
"RTN","LRAPKOE",289,0)
 . D NEW^LR7OB1(LRODT,LRSN,CONTROL,,,6)
"RTN","LRAPKOE",290,0)
 Q
"RTN","LRAPKOE",291,0)
LR7OFAO ;Update ^LRO(69 with accession data.
"RTN","LRAPKOE",292,0)
   ;
"RTN","LRAPKOE",293,0)
 K IEN,LRFDA,LRFDAIEN,LRMSG,DIERR
"RTN","LRAPKOE",294,0)
 S IEN="?+1,"_LRSN_","_LRODT_","
"RTN","LRAPKOE",295,0)
 S LRFDA(6,69.03,IEN,.01)=LRTST
"RTN","LRAPKOE",296,0)
 I $G(LROUTINE) S LRFDA(6,69.03,IEN,1)=LROUTINE
"RTN","LRAPKOE",297,0)
 S LRFDA(6,69.03,IEN,2)=LRAD
"RTN","LRAPKOE",298,0)
 S LRFDA(6,69.03,IEN,3)=LRAA
"RTN","LRAPKOE",299,0)
 S LRFDA(6,69.03,IEN,4)=LRAN
"RTN","LRAPKOE",300,0)
 S LRFDA(6,69.03,IEN,13)=LRUID
"RTN","LRAPKOE",301,0)
 S LRFDA(6,69.03,IEN,8)="IP"
"RTN","LRAPKOE",302,0)
 S LRFDA(6,69.03,IEN,9)="L"
"RTN","LRAPKOE",303,0)
 D UPDATE^DIE("","LRFDA(6)","LRFDAIEN","LRMSG")
"RTN","LRAPKOE",304,0)
 Q
"RTN","LRAPKOE",305,0)
DIS63(LRDFN,LRSS,LRIDT) ;Display ^LR(LRDFN,LRSS,LRIDT data
"RTN","LRAPKOE",306,0)
 Q:'$G(^LR(LRDFN,LRSS,LRIDT,0))
"RTN","LRAPKOE",307,0)
 W @IOF,!!,$$CJ^XLFSTR("-------------------------------------",IOM),!
"RTN","LRAPKOE",308,0)
 W $$CJ^XLFSTR("Display of CPRS data in LAB DATA file",IOM),!
"RTN","LRAPKOE",309,0)
 N ANS,DIC,DA,DR,ERR,CNT,ID,IEN,LREND,LRFILE,LRPAGE,S
"RTN","LRAPKOE",310,0)
 S DA=LRIDT,DA(1)=LRDFN,LREND=0
"RTN","LRAPKOE",311,0)
 S DIC="^LR("_LRDFN_","_""""_LRSS_""""_",",DR=0,S=1
"RTN","LRAPKOE",312,0)
 D EN^DIQ S LRPAGE=S
"RTN","LRAPKOE",313,0)
 S LRFILE=$S(LRSS="SP":63.08,LRSS="CY":63.09,LRSS="EM":63.02,1:0)
"RTN","LRAPKOE",314,0)
 S IEN=DA_","_DA(1)_","
"RTN","LRAPKOE",315,0)
 D GETS^DIQ(LRFILE,IEN,".01:16","ERRZ","ANS","ERR")
"RTN","LRAPKOE",316,0)
 F ID="BRIEF CLINICAL HISTORY","PREOPERATIVE DIAGNOSIS","OPERATIVE FINDINGS","POSTOPERATIVE DIAGNOSIS" Q:$G(LREND)  D
"RTN","LRAPKOE",317,0)
 . I $O(ANS(LRFILE,IEN,ID,0)) W !?5,ID_":" D PAGE Q:$G(LREND)  D
"RTN","LRAPKOE",318,0)
 . . S CNT=0 F  S CNT=$O(ANS(LRFILE,IEN,ID,CNT)) Q:CNT<1!($G(LREND))  D
"RTN","LRAPKOE",319,0)
 . . . W !,ANS(LRFILE,IEN,ID,CNT,0) D PAGE
"RTN","LRAPKOE",320,0)
 W:'$G(LREND) !!,$$CJ^XLFSTR("--- End of CPRS data in LAB DATA file ---",IOM),!
"RTN","LRAPKOE",321,0)
 Q
"RTN","LRAPKOE",322,0)
 ;
"RTN","LRAPKOE",323,0)
SPEC63(LRDFN,LRSS,LRIDT,LRAPSPEC) ;Load AP Specimens into ^LR(
"RTN","LRAPKOE",324,0)
    ; INPUT  LRAPSPEC(1)="CERVICAL CYTOLOGIC MATERIAL,Thin Prep^^^^^6242^55"
"RTN","LRAPKOE",325,0)
 ;
"RTN","LRAPKOE",326,0)
 K LRFDA,IEN,IENX,ERR,ERR2,WPIEN68,NODE,ANS,ANSY,LRSP,LRCOL
"RTN","LRAPKOE",327,0)
 K LRJ,NODE,LRFILE,LRSPCOM,LRSPEC,LRSAMP
"RTN","LRAPKOE",328,0)
 ;
"RTN","LRAPKOE",329,0)
 Q:LRSS="AU"!(LRSS="BB")
"RTN","LRAPKOE",330,0)
 S LRFILE=$S(LRSS="SP":63.812,LRSS="CY":63.902,LRSS="EM":63.202,1:0)
"RTN","LRAPKOE",331,0)
 S IEN="+1,"_LRIDT_","_LRDFN_","
"RTN","LRAPKOE",332,0)
 S:'$G(IENX) IENX=0 F  S IENX=$O(LRAPSPEC(IENX)) Q:IENX<1  D
"RTN","LRAPKOE",333,0)
 . S NODE=LRAPSPEC(IENX),LRSPCOM=$P(NODE,U),LRSPEC=+$P(NODE,U,6),LRSAMP=$P(NODE,U,7)
"RTN","LRAPKOE",334,0)
 . Q:$S('LRSPEC:1,'LRSAMP:1,1:0)
"RTN","LRAPKOE",335,0)
 . K LRFDA,ERR,ANSY
"RTN","LRAPKOE",336,0)
 . S LRFDA(2,LRFILE,IEN,.01)=LRSPCOM ;Specimen Description
"RTN","LRAPKOE",337,0)
 . S LRFDA(2,LRFILE,IEN,.06)=LRSPEC ;Specimen  ^LAB(61,LRSP
"RTN","LRAPKOE",338,0)
 . S LRFDA(2,LRFILE,IEN,.07)=LRSAMP ; Collection Sample ^LAB(62,LRCOL
"RTN","LRAPKOE",339,0)
 . D UPDATE^DIE("KS","LRFDA(2)","ANSY(1)","ERR")
"RTN","LRAPKOE",340,0)
 Q
"RTN","LRAPKOE",341,0)
LRCOM(LRDFN,LRSS,LRIDT,LRCOM) ;Store Comments into ^LR(
"RTN","LRAPKOE",342,0)
 ;IN   LRCOM(1)="~For Test: GYNECOLOGY"
"RTN","LRAPKOE",343,0)
 K LRFILE,LRFDA,IEN,CNT
"RTN","LRAPKOE",344,0)
 S LRFILE=$S(LRSS="CH":63.041,LRSS="MI":63.05,LRSS="SP":63.98,LRSS="CY":63.908,LRSS="EM":63.208,1:"")
"RTN","LRAPKOE",345,0)
 Q:'LRFILE
"RTN","LRAPKOE",346,0)
 S IEN="+1,"_LRIDT_","_LRDFN_",",CNT=0
"RTN","LRAPKOE",347,0)
 F  S CNT=$O(LRCOM(CNT)) Q:CNT<1  D
"RTN","LRAPKOE",348,0)
 . K LRFDA,ERR
"RTN","LRAPKOE",349,0)
 . S LRFDA(9,LRFILE,IEN,.01)=LRCOM(CNT)
"RTN","LRAPKOE",350,0)
 . D UPDATE^DIE("KS","LRFDA(9)","","ERR")
"RTN","LRAPKOE",351,0)
 Q
"RTN","LRAPKOE",352,0)
CLEAN ;Kill variable
"RTN","LRAPKOE",353,0)
 Q
"RTN","LRAPKOE",354,0)
WKLD ;Setup workload info
"RTN","LRAPKOE",355,0)
 ;
"RTN","LRAPKOE",356,0)
 N LR,LRI,LRK,LRRC,LRT,LRW
"RTN","LRAPKOE",357,0)
 S LRI=LRIDT
"RTN","LRAPKOE",358,0)
 S LRRC=$S($G(LRCDT):LRCDT,1:$$NOW^XLFDT)
"RTN","LRAPKOE",359,0)
 S LRCAPA=$P(^LAB(69.9,1,0),"^",14)&($P(^LRO(68,LRAA,0),"^",16))
"RTN","LRAPKOE",360,0)
 ;
"RTN","LRAPKOE",361,0)
 S LR("L")=LRSS_"^LRAP" I LRCAPA,"AUSP"[LRSS S X=$S(LRSS="SP":"H & E STAIN",1:"AUTOPSY H & E") D X^LRUWK I $D(X) S LRW("H&E")=LRT D ^LRAPSWK
"RTN","LRAPKOE",362,0)
 ;
"RTN","LRAPKOE",363,0)
 I LRCAPA,LRSS="EM" S X="THICK SECTION EM" D X^LRUWK I $D(X) S X=11 D SET1 S LRW("SS")=LRT_U_X S X="GRID EM" D X^LRUWK I $D(X) S X=12 D SET1 S LRW("G")=LRT_U_X D ^LRAPSWK
"RTN","LRAPKOE",364,0)
 ;
"RTN","LRAPKOE",365,0)
 I LRCAPA D
"RTN","LRAPKOE",366,0)
 . K LRT S LRT=0 F  S LRT=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRT)) Q:LRT<1  D
"RTN","LRAPKOE",367,0)
 . . Q:$P(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRT,0),U,2)>49
"RTN","LRAPKOE",368,0)
 . . I LRSS="CY" D ^LRAPCWK
"RTN","LRAPKOE",369,0)
 . . I LRSS?1(1"SP",1"EM") D ^LRAPSWK,^LRSPGD
"RTN","LRAPKOE",370,0)
 ;
"RTN","LRAPKOE",371,0)
 Q
"RTN","LRAPKOE",372,0)
SET1 S X=$P($G(^LRO(69.2,LRAA,0)),"^",X) S:'X X=1
"RTN","LRAPKOE",373,0)
 Q
"RTN","LRAPKOE",374,0)
PAGE ;Page Prompt
"RTN","LRAPKOE",375,0)
 Q:$E(IOST,1)'="C"
"RTN","LRAPKOE",376,0)
 S LRPAGE=$G(LRPAGE)+1,LREND=0 Q:LRPAGE<(IOSL-2)
"RTN","LRAPKOE",377,0)
 S DIR(0)="E" D ^DIR K DIR I $G(Y)=0 S LREND=1 Q
"RTN","LRAPKOE",378,0)
 S LRPAGE=2 W @IOF
"RTN","LRAPKOE",379,0)
 Q
"RTN","LRAPLG")
0^2^B12446427^B12374267
"RTN","LRAPLG",1,0)
LRAPLG ;AVAMC/REG/WTY - AP LOG-IN ;01/23/17  03:16
"RTN","LRAPLG",2,0)
 ;;5.2;LAB SERVICE;**72,201,259,462,479**;Sep 27, 1994;Build 8
"RTN","LRAPLG",3,0)
EN ;
"RTN","LRAPLG",4,0)
 ;;*
"RTN","LRAPLG",5,0)
 D END
"RTN","LRAPLG",6,0)
 N LREND,D0,DD S LREND=0
"RTN","LRAPLG",7,0)
 ;
"RTN","LRAPLG",8,0)
 N LRADD
"RTN","LRAPLG",9,0)
 N LRAPLGX,DOD,FDAIEN,H8,LR6802,LRACC,LRCDT,LRCNT,LREAL
"RTN","LRAPLG",10,0)
 N LRFDA,LRIENLOC,LRNLT,LRNT,LROT,LRPCEVSO,LRPROVL,LRSAMP
"RTN","LRAPLG",11,0)
 N LRSF515,LRSPEC,LRSPTOP,LRTSORU,LRTST,LRUID,ORGMDATZ
"RTN","LRAPLG",12,0)
 N ORIFN,SS,TEST,X,X11,Y,OCXSEG,LRLWC
"RTN","LRAPLG",13,0)
 S LRAPLGX=1,(LRORDR,LRLWC)="WC"
"RTN","LRAPLG",14,0)
 ;
"RTN","LRAPLG",15,0)
 D:$G(^LAB(69.9,1,21661)) EN1^LRAPKOE
"RTN","LRAPLG",16,0)
 I $G(LRAPDIAL) K LRAPDIAL D END G EN
"RTN","LRAPLG",17,0)
 D ^LRAP I '$D(Y) D END Q
"RTN","LRAPLG",18,0)
 ;;;*
"RTN","LRAPLG",19,0)
 S LR("L")=LRSS_"^LRAP" I LRCAPA,"AUSP"[LRSS S X=$S(LRSS="SP":"H & E STAIN",1:"AUTOPSY H & E") D X^LRUWK G:'$D(X) END S LRW("H&E")=LRT K LRT
"RTN","LRAPLG",20,0)
 I LRCAPA,LRSS="EM" S X="THICK SECTION EM" D X^LRUWK G:'$D(X) END S X=11 D SET S LRW("SS")=LRT_U_X S X="GRID EM" D X^LRUWK G:'$D(X) END S X=12 D SET S LRW("G")=LRT_U_X K LRT
"RTN","LRAPLG",21,0)
 I LRCAPA D @(LRSS_"^LRAPSWK") G:'$D(X) END
"RTN","LRAPLG",22,0)
 D:"SPEMCY"[LRSS A^LRAPWU W !!,"Log-In for ",LRH(0)," " S %=1 D YN^LRU Q:%<1  S LRAA(3)=1 D XR^LRU
"RTN","LRAPLG",23,0)
 I %=2 S %DT="AE",%DT(0)="-N",%DT("A")="Enter YEAR: " D ^%DT K %DT Q:Y<1  S LRAD=$E(Y,1,3)_"0000",Y=LRAD D D^LRU S LRH(0)=Y
"RTN","LRAPLG",24,0)
 S LRH(2)=$E(LRAD,1,3),LRWHN=$E(LRAD,2,3)
"RTN","LRAPLG",25,0)
 S:'$D(^LRO(68,LRAA,1,0)) ^(0)="^68.01DA^^0"
"RTN","LRAPLG",26,0)
 S:'$D(^LRO(68,LRAA,1,LRAD,0)) ^(0)=LRAD,^LRO(68,LRAA,1,0)=$P(^LRO(68,LRAA,1,0),"^",1,2)_"^"_LRAD_"^"_($P(^(0),"^",4)+1)
"RTN","LRAPLG",27,0)
 S:'$D(^LRO(68,LRAA,1,LRAD,1,0)) ^(0)="^68.02PA^^"
"RTN","LRAPLG",28,0)
 S %DT="",X="T-4" D ^%DT S LRDTI=9999999-Y
"RTN","LRAPLG",29,0)
GETP W ! S LRSIT="",LRDPAF=1 K DIC
"RTN","LRAPLG",30,0)
 D ^LRDPA G:LRDFN<1 END
"RTN","LRAPLG",31,0)
 S:'+$G(LRPRAC) LRPRAC(1)=""
"RTN","LRAPLG",32,0)
 I +$G(LRPRAC) S X=LRPRAC D D^LRUA S LRPRAC(1)=X
"RTN","LRAPLG",33,0)
 I LRSS="SP" S X=0 F  S X=$O(^LR(LRDFN,LRSS,X)) Q:'X!(X>LRDTI)  D
"RTN","LRAPLG",34,0)
 .S Y=^LR(LRDFN,LRSS,X,0)
"RTN","LRAPLG",35,0)
 .W $C(7),!?6,"Accession number assigned for ",$$FMTE^XLFDT(Y,"D")
"RTN","LRAPLG",36,0)
 .W " is: ",$P(Y,"^",6)
"RTN","LRAPLG",37,0)
 ;
"RTN","LRAPLG",38,0)
 I LRSS="SP" S X="SROSPLG" X ^%ZOSF("TEST") I $T D ^SROSPLG
"RTN","LRAPLG",39,0)
 ;
"RTN","LRAPLG",40,0)
 D ADD G GETP
"RTN","LRAPLG",41,0)
ADD I LRSS="AU",'$D(LREXP) W $C(7),!!,"NO DATE DIED ENTERED IN ",LRFNAM," FILE",! Q:+LRDPF=2  S DIE=+LRDPF,DA=DFN,DR=.351 D ^DIE Q:$D(Y)  S LREXP=X
"RTN","LRAPLG",42,0)
 I LRSS="AU",$D(^LR(LRDFN,"AU")),$P(^("AU"),U,6) S Y=^("AU"),X=+$P(Y,U,6),Y(1)=$E(Y,1,3)_"0000" W !,"Yr:",1700+$E(Y,1,3)," Acc#:",X," IN LAB FILE FOR ",$P(@(LRPF_DFN_",0)"),U)," SSN:",$P(^(0),U,9) D CK Q
"RTN","LRAPLG",43,0)
 D:LRPF="^DPT(" ^LRAPPOW ; for AFIP studies
"RTN","LRAPLG",44,0)
 D ^LRAPLG1 K LRMD,DIC,DIE,DR,LRAPDIAL Q
"RTN","LRAPLG",45,0)
CK I +$G(^LRO(68,LRAA,1,Y(1),1,X,0))=LRDFN W $C(7),!!?20,"Also in accession file" Q
"RTN","LRAPLG",46,0)
 W !,"Enter in Accession File " S %=2 D YN^LRU D:%=1 ^LRAPLG2 Q
"RTN","LRAPLG",47,0)
SET S X=$P($G(^LRO(69.2,LRAA,0)),"^",X) S:'X X=1 Q
"RTN","LRAPLG",48,0)
END D V^LRU
"RTN","LRAPLG",49,0)
 ;;*
"RTN","LRAPLG",50,0)
 K LRAPLGX,DOD,FDAIEN,H8,LR6802,LRACC,LRCDT,LRCNT,LREAL
"RTN","LRAPLG",51,0)
 K LRFDA,LRIENLOC,LRNLT,LRNT,LROT,LRPCEVSO,LRPROVL,LRSAMP
"RTN","LRAPLG",52,0)
 K LRSF515,LRSPEC,LRSPTOP,LRTSORU,LRTST,LRUID,ORGMDAT
"RTN","LRAPLG",53,0)
 K ORIFN,SS,TEST,X,X11,Y
"RTN","LRAPLG",54,0)
 K DA,DFN,DIC,DIE,DR,LR,LRAA,LRAD,LRAPDIAL,LRCAPA,LRDFN,LRDPAF
"RTN","LRAPLG",55,0)
 K LRDPF,LRDTI,LREXP,LRFNAM,LRH,LRMD,LRPF,LRPRAC
"RTN","LRAPLG",56,0)
 K LRSIT,LRSS,LRT,LRW,LRWHN
"RTN","LRAPLG",57,0)
 ;;;*
"RTN","LRAPLG",58,0)
 Q
"RTN","LRAPLG1")
0^3^B181849693^B181234041
"RTN","LRAPLG1",1,0)
LRAPLG1 ;DALOI/CKA,JMC,PMK - LOG-IN CONT. ;02/17/17  13:42
"RTN","LRAPLG1",2,0)
 ;;5.2;LAB SERVICE;**72,121,248,308,350,427,433,462,479**;Sep 27, 1994;Build 8
"RTN","LRAPLG1",3,0)
 ;
"RTN","LRAPLG1",4,0)
 ; Reference to DISP^SROSPLG supported by IA #893
"RTN","LRAPLG1",5,0)
 ;
"RTN","LRAPLG1",6,0)
START ; Start logging in the specimens.
"RTN","LRAPLG1",7,0)
 N LRFND,LRMSG,LRXX
"RTN","LRAPLG1",8,0)
 ;
"RTN","LRAPLG1",9,0)
 ; Lock ^LR( and ^LRO
"RTN","LRAPLG1",10,0)
 D LOCK^DILF("^LR(LRDFN,LRSS)")
"RTN","LRAPLG1",11,0)
 I '$T D  Q
"RTN","LRAPLG1",12,0)
 . S LRMSG="This record is locked by another user. Please try later."
"RTN","LRAPLG1",13,0)
 . D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPLG1",14,0)
 ;
"RTN","LRAPLG1",15,0)
 D LOCK^DILF("^LRO(68,LRAA,1,LRAD,1,0)")
"RTN","LRAPLG1",16,0)
 I '$T D  Q
"RTN","LRAPLG1",17,0)
 . L -^LR(LRDFN,LRSS)
"RTN","LRAPLG1",18,0)
 . S LRMSG="Someone else is logging in specimens.  Please wait and try again."
"RTN","LRAPLG1",19,0)
 . D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPLG1",20,0)
 ;
"RTN","LRAPLG1",21,0)
 ; Check that accession date exists first
"RTN","LRAPLG1",22,0)
 D CHECK68^LRWLST1(LRAA,LRAD)
"RTN","LRAPLG1",23,0)
 ;
"RTN","LRAPLG1",24,0)
EN ;
"RTN","LRAPLG1",25,0)
 N LRAPDAN
"RTN","LRAPLG1",26,0)
 ;
"RTN","LRAPLG1",27,0)
 S (LRI,LRIDT)=""
"RTN","LRAPLG1",28,0)
 S LRAN=1
"RTN","LRAPLG1",29,0)
 S LRAPDAN=$$GET^XPAR("ALL","LR AP DEFAULT ACCESSION NUMBER","`"_LRAA,"Q")
"RTN","LRAPLG1",30,0)
 I LRAPDAN=2 S LRAN=+$P(^LRO(68,LRAA,1,LRAD,1,0),U,3)
"RTN","LRAPLG1",31,0)
 F  Q:'$D(^LRO(68,LRAA,1,LRAD,1,LRAN))  S LRAN=LRAN+1
"RTN","LRAPLG1",32,0)
 W !!,"Assign ",LRO(68)," (",LRABV,") accession #: ",LRAN S %=1 D YN^LRU
"RTN","LRAPLG1",33,0)
 I %<1 L -^LRO(68,LRAA,1,LRAD,1,0),-^LR(LRDFN,LRSS) Q
"RTN","LRAPLG1",34,0)
 ;
"RTN","LRAPLG1",35,0)
 I %=1,$D(LRXREF),$D(^LR(LRXREF,LRH(2),LRABV,LRAN)) D  Q:$D(LRFND)
"RTN","LRAPLG1",36,0)
 . I $D(^LRO(68,LRAA,1,LRAD,1,LRAN,0)),$P(^(0),U) S X=LRAN D ^LRUTELL S LRFND=1
"RTN","LRAPLG1",37,0)
 . I '$D(LRFND) D ^LRAPLG2
"RTN","LRAPLG1",38,0)
 . I $D(LRFND) L -^LRO(68,LRAA,1,LRAD,1,0),-^LR(LRDFN,LRSS) Q
"RTN","LRAPLG1",39,0)
 . S %=0
"RTN","LRAPLG1",40,0)
 ;
"RTN","LRAPLG1",41,0)
 I %=1 D CRE868 I $D(LRMSG) G EN
"RTN","LRAPLG1",42,0)
 ;
"RTN","LRAPLG1",43,0)
 I %=2 D OS I $D(LRFND) K LRFND L -^LRO(68,LRAA,1,LRAD,1,0),-^LR(LRDFN,LRSS) Q
"RTN","LRAPLG1",44,0)
 ;
"RTN","LRAPLG1",45,0)
 L -^LRO(68,LRAA,1,LRAD,1,0)
"RTN","LRAPLG1",46,0)
 ;
"RTN","LRAPLG1",47,0)
 S LRAC=$P(^LRO(68,LRAA,0),U,11)_" "_$S(LRAD["0000":$E(LRAD,2,3),1:$E(LRAD,4,7))_" "_LRAN
"RTN","LRAPLG1",48,0)
 ;
"RTN","LRAPLG1",49,0)
AU ; Autopsy Specific
"RTN","LRAPLG1",50,0)
 I LRSS="AU" D ^LRAUAW Q
"RTN","LRAPLG1",51,0)
 S:'$D(^LR(LRDFN,LRSS,0)) ^(0)="^"_LRSF_"DA^0^0"
"RTN","LRAPLG1",52,0)
 ;
"RTN","LRAPLG1",53,0)
 ; If orginal login then create entry in file #63
"RTN","LRAPLG1",54,0)
LR7OFA0 ;
"RTN","LRAPLG1",55,0)
 I LRIDT="" D CRE863
"RTN","LRAPLG1",56,0)
 I LRI="" Q
"RTN","LRAPLG1",57,0)
 ;
"RTN","LRAPLG1",58,0)
 K DA,DTOUT,DIWESUB
"RTN","LRAPLG1",59,0)
 ;S DIWESUB=$E(PNM,1,27-$L(LRACC))_" ["_LRACC_"]"
"RTN","LRAPLG1",60,0)
 S LR(.07)=$S($D(SRDOC):SRDOC,1:"") K SRDOC
"RTN","LRAPLG1",61,0)
 S:LR(.07) LR(.07)=$P($G(^VA(200,LR(.07),0)),"^")
"RTN","LRAPLG1",62,0)
 S DA=LRI,DA(1)=LRDFN
"RTN","LRAPLG1",63,0)
 S DIC(0)="EQLMF",DLAYGO=63,DIE="^LR(LRDFN,LRSS,"
"RTN","LRAPLG1",64,0)
 D @LR("L")
"RTN","LRAPLG1",65,0)
 D ^DIE K DLAYGO
"RTN","LRAPLG1",66,0)
 S:'$D(LRRC) LRRC=LRNT
"RTN","LRAPLG1",67,0)
 ;
"RTN","LRAPLG1",68,0)
 ; Check if topography and collection sample entered on each specimen.
"RTN","LRAPLG1",69,0)
 ; If not entered then define Y to cause entry to be deleted.
"RTN","LRAPLG1",70,0)
 I LRSS?1(1"SP",1"CY",1"EM") D
"RTN","LRAPLG1",71,0)
 . N I,LRJ,X
"RTN","LRAPLG1",72,0)
 . S LRJ=0
"RTN","LRAPLG1",73,0)
 . F  S LRJ=$O(^LR(LRDFN,LRSS,LRI,.1,LRJ)) Q:LRJ<1  D  Q:$D(Y)
"RTN","LRAPLG1",74,0)
 . . S X=$G(^LR(LRDFN,LRSS,LRI,.1,LRJ,0))
"RTN","LRAPLG1",75,0)
 . . F I=6,7 I $P(X,"^",I)="" S Y="" Q
"RTN","LRAPLG1",76,0)
 ;
"RTN","LRAPLG1",77,0)
 ; Delete entry if prompts not answered unless report has been released.
"RTN","LRAPLG1",78,0)
 I $D(DTOUT)!$D(Y) D  Q
"RTN","LRAPLG1",79,0)
 . N DA,DIK
"RTN","LRAPLG1",80,0)
 . I LRSS?1(1"SP",1"CY",1"EM"),($P(^LR(LRDFN,LRSS,LRI,0),"^",11)!$P(^LR(LRDFN,LRSS,LRI,0),"^",15)) Q
"RTN","LRAPLG1",81,0)
 . W $C(7),!!,"All Prompts not answered - <ENTRY DELETED>"
"RTN","LRAPLG1",82,0)
 . S DA(1)=LRDFN,DA=LRI
"RTN","LRAPLG1",83,0)
 . S DIK="^LR("_DA(1)_","""_LRSS_""","
"RTN","LRAPLG1",84,0)
 . D ^DIK,X,END
"RTN","LRAPLG1",85,0)
 ;
"RTN","LRAPLG1",86,0)
 D GETSTCS ; Store specimen topography, coll sample in temp array
"RTN","LRAPLG1",87,0)
 ;
"RTN","LRAPLG1",88,0)
TST ; Get the ordered test and store in temp array
"RTN","LRAPLG1",89,0)
 N II
"RTN","LRAPLG1",90,0)
 D ORDTST
"RTN","LRAPLG1",91,0)
 ; Delete entry if no ordered tests unless report has been released.
"RTN","LRAPLG1",92,0)
 I II=2 D  Q
"RTN","LRAPLG1",93,0)
 . I LRSS?1(1"SP",1"CY",1"EM"),($P(^LR(LRDFN,LRSS,LRI,0),"^",11)!$P(^LR(LRDFN,LRSS,LRI,0),"^",15)) Q
"RTN","LRAPLG1",94,0)
 . N DA,DIK
"RTN","LRAPLG1",95,0)
 . W $C(7),!!,"No ordered test selected - <ENTRY DELETED>"
"RTN","LRAPLG1",96,0)
 . S DA(1)=LRDFN,DA=LRI,DIK="^LR("_DA(1)_","""_LRSS_""","
"RTN","LRAPLG1",97,0)
 . D ^DIK,X,END
"RTN","LRAPLG1",98,0)
 ;
"RTN","LRAPLG1",99,0)
 I LRSS="CY",LRCAPA D CK^LRAPCWK
"RTN","LRAPLG1",100,0)
 ;
"RTN","LRAPLG1",101,0)
 ; Check for surgery case references and move info if user wants surgical case info copied to Lab.
"RTN","LRAPLG1",102,0)
 I LRSS="SP" D SPMOVE
"RTN","LRAPLG1",103,0)
 ;
"RTN","LRAPLG1",104,0)
 ; Fill out the stub accession with related info
"RTN","LRAPLG1",105,0)
 I '$D(LRC(5)) S LRC(5)=""
"RTN","LRAPLG1",106,0)
 D ^LRUWLF
"RTN","LRAPLG1",107,0)
 ;
"RTN","LRAPLG1",108,0)
 I LRCAPA D
"RTN","LRAPLG1",109,0)
 . I LRSS="CY" D ^LRAPCWK
"RTN","LRAPLG1",110,0)
 . I LRSS?1(1"SP",1"EM") D ^LRAPSWK
"RTN","LRAPLG1",111,0)
 ;
"RTN","LRAPLG1",112,0)
 I LRSS?1(1"SP",1"CY",1"EM") D ^LRSPGD
"RTN","LRAPLG1",113,0)
 ;
"RTN","LRAPLG1",114,0)
 I $T(ADD^MAGTP005)'="" N MAGNEWCASE S MAGNEWCASE=1 D ADD^MAGTP005(LRAC) ; add case to file #2005.42 - P433
"RTN","LRAPLG1",115,0)
 ;
"RTN","LRAPLG1",116,0)
 D OERR^LR7OB63D,LDSI
"RTN","LRAPLG1",117,0)
 ;
"RTN","LRAPLG1",118,0)
 I $T(NEW^MAGT7MA)'="" D NEW^MAGT7MA ; invoke Imaging HL7 routine - P433
"RTN","LRAPLG1",119,0)
 ;
"RTN","LRAPLG1",120,0)
 Q
"RTN","LRAPLG1",121,0)
 ;
"RTN","LRAPLG1",122,0)
 ;
"RTN","LRAPLG1",123,0)
LDSI ; LDSI tasks
"RTN","LRAPLG1",124,0)
 ;
"RTN","LRAPLG1",125,0)
 N LRLLOC,LRALOC,LRPRAC,LROUTINE,LROPL,LRODT,LRNT,LRFILE,LRIENS,LRORD,LRSRDT,LRTST
"RTN","LRAPLG1",126,0)
 ;
"RTN","LRAPLG1",127,0)
 ; Get variables for ORUT node
"RTN","LRAPLG1",128,0)
 S LROUTINE=$P($G(^LAB(69.9,1,3)),"^",2)    ;default urgency
"RTN","LRAPLG1",129,0)
 S LRPROVL=LRMD(1)    ;Ordering provider-CKA
"RTN","LRAPLG1",130,0)
 ; Get ORDER TYPE
"RTN","LRAPLG1",131,0)
 ;;*
"RTN","LRAPLG1",132,0)
 S:$G(LRORDR)="" LRORDR="WC" ;Default to 'Ward Collect' for now
"RTN","LRAPLG1",133,0)
 ;;;*
"RTN","LRAPLG1",134,0)
 S LRNT=$$NOW^XLFDT() ;Date ordered = current date/time
"RTN","LRAPLG1",135,0)
 S LRODT=$P(LRNT,".")
"RTN","LRAPLG1",136,0)
 ; Get Provider, Location abbrev, Collection date/time
"RTN","LRAPLG1",137,0)
 S LRFILE=$S(LRSS="SP":63.08,LRSS="CY":63.09,LRSS="EM":63.02,1:"")
"RTN","LRAPLG1",138,0)
 S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPLG1",139,0)
 S LRPRAC=$$GET1^DIQ(LRFILE,LRIENS,.07,"I")
"RTN","LRAPLG1",140,0)
 S LRLLOC=$$GET1^DIQ(LRFILE,LRIENS,.08,"I")
"RTN","LRAPLG1",141,0)
 I LRLLOC="" S LRLLOC="NO ABRV"
"RTN","LRAPLG1",142,0)
 S LRSDT=+$$GET1^DIQ(LRFILE,LRIENS,.01,"I")
"RTN","LRAPLG1",143,0)
 S LRSRDT=$$GET1^DIQ(LRFILE,LRIENS,.1,"I") ; Specimen received date/time
"RTN","LRAPLG1",144,0)
 ; Get CPRS Order #
"RTN","LRAPLG1",145,0)
 S ORIFN="" ; Default to blank for now
"RTN","LRAPLG1",146,0)
 ;
"RTN","LRAPLG1",147,0)
 ; Get Lab Order #, update file #69 and #68
"RTN","LRAPLG1",148,0)
LDSI1 S (LRORD,LRSPEC,LRTST,LRSAMP,LRADD,LROT)="",LRCNT=1
"RTN","LRAPLG1",149,0)
 F  S LRSPEC=$O(LRXX(LRSPEC)) Q:'LRSPEC  D
"RTN","LRAPLG1",150,0)
 . N LRRECINF
"RTN","LRAPLG1",151,0)
 . S LRSAMP=$P(LRXX(LRSPEC),"^",1),LRNLT=$P(LRXX(LRSPEC),"^",2),LRTST=$P(LRXX(LRSPEC),"^",3)
"RTN","LRAPLG1",152,0)
 . Q:'LRTST
"RTN","LRAPLG1",153,0)
 . ;I LRORD,$G(^LAB(69.9,1,21661)) S LRADD=1 D ZSN^LR7OFAO("",.LRRECINF)
"RTN","LRAPLG1",154,0)
 . ; Get Lab Order # first time thru
"RTN","LRAPLG1",155,0)
 . D:'LRORD EN^LR7OFAO(LRODT,LRDFN,LRSAMP,LRORDR,LRNT,LRPRAC,LRLLOC,LRSDT,ORIFN,LRSPEC,LRSS,LRTST,LRUID,.LRRECINF)
"RTN","LRAPLG1",156,0)
 . S LRSN=+$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,5),LRCDT=0,LREAL=""
"RTN","LRAPLG1",157,0)
 . I LRSN>0 S LRCDT=$P($G(^LRO(69,LRODT,1,LRSN,1)),"^",1,2),LREAL=$P(LRCDT,"^",2),LRCDT=+LRCDT
"RTN","LRAPLG1",158,0)
 . D UPD68,UPD63
"RTN","LRAPLG1",159,0)
 . S LRCNT=LRCNT+1
"RTN","LRAPLG1",160,0)
 ;
"RTN","LRAPLG1",161,0)
 Q
"RTN","LRAPLG1",162,0)
 ;
"RTN","LRAPLG1",163,0)
 ;
"RTN","LRAPLG1",164,0)
UPD68 ; Update #68 with required test data
"RTN","LRAPLG1",165,0)
 N LRFILE,LRERR,IEN,LRIEN
"RTN","LRAPLG1",166,0)
 S LRFILE=68.04,IEN(1)=LRTST
"RTN","LRAPLG1",167,0)
 S LRIEN="?+1,"_LRAN_","_LRAD_","_LRAA_","
"RTN","LRAPLG1",168,0)
 S FDA(3,LRFILE,LRIEN,.01)=LRTST
"RTN","LRAPLG1",169,0)
 S FDA(3,LRFILE,LRIEN,1)=LROUTINE
"RTN","LRAPLG1",170,0)
 ;;*
"RTN","LRAPLG1",171,0)
 S FDA(3,LRFILE,LRIEN,8.1)=LRTST
"RTN","LRAPLG1",172,0)
 ;;;*
"RTN","LRAPLG1",173,0)
 D UPDATE^DIE("","FDA(3)","IEN","LRERR(3)")
"RTN","LRAPLG1",174,0)
 I $D(LRERR(3)) D LRMSG("UPD68-3~LRAPLG1",.LRERR)
"RTN","LRAPLG1",175,0)
 ;
"RTN","LRAPLG1",176,0)
 ;
"RTN","LRAPLG1",177,0)
 ; Update #68 with specimen data
"RTN","LRAPLG1",178,0)
 K LRFILE,FDAIEN,IEN
"RTN","LRAPLG1",179,0)
 S LRFILE=68.05
"RTN","LRAPLG1",180,0)
 ; Check or Set top node for 68.05
"RTN","LRAPLG1",181,0)
 S FDAIEN="?+"_LRCNT_","_LRAN_","_LRAD_","_LRAA_","
"RTN","LRAPLG1",182,0)
 S FDA(31,LRFILE,FDAIEN,.01)=LRSPEC
"RTN","LRAPLG1",183,0)
 S FDA(31,LRFILE,FDAIEN,1)=LRSAMP
"RTN","LRAPLG1",184,0)
 D UPDATE^DIE("","FDA(31)","IEN","LRERR(31)")
"RTN","LRAPLG1",185,0)
 I $D(LRERR(31)) D LRMSG("UPD68-31~LRAPLG1",.LRERR)
"RTN","LRAPLG1",186,0)
 ;
"RTN","LRAPLG1",187,0)
 Q
"RTN","LRAPLG1",188,0)
 ;
"RTN","LRAPLG1",189,0)
 ;
"RTN","LRAPLG1",190,0)
UPD63 ; Update ORUT Node in #63
"RTN","LRAPLG1",191,0)
 S LRTSORU=LRTST,LRURG=9,LRI=LRIDT
"RTN","LRAPLG1",192,0)
 D SLRSS^LRWLST11
"RTN","LRAPLG1",193,0)
 D ORUT^LRWLST11
"RTN","LRAPLG1",194,0)
 ;
"RTN","LRAPLG1",195,0)
 ;
"RTN","LRAPLG1",196,0)
 Q
"RTN","LRAPLG1",197,0)
 ;
"RTN","LRAPLG1",198,0)
 ;
"RTN","LRAPLG1",199,0)
X ; from LRAUAW
"RTN","LRAPLG1",200,0)
 I "CYEMSP"[LRSS K ^LR(LRXREF,LRH(2),LRABV,LRAN)
"RTN","LRAPLG1",201,0)
 I LRSS="AU" D
"RTN","LRAPLG1",202,0)
 . I $D(^LR(LRDFN,"AV")) K ^LR(LRDFN,"AV")
"RTN","LRAPLG1",203,0)
 . I $D(^LR(LRDFN,"AW")) K ^LR(LRDFN,"AW")
"RTN","LRAPLG1",204,0)
 . I $D(^LR(LRDFN,"AWI")) K ^LR(LRDFN,"AWI")
"RTN","LRAPLG1",205,0)
 . I $D(LRRC) K ^LR("AAUA",+$E(LRRC,1,3),LRABV,LRAN),^LR("AAU",+LRRC,LRDFN)
"RTN","LRAPLG1",206,0)
 I $G(LRRC)>1 K:LRSS?1(1"SP",1"CY",1"EM") ^LR(LRXR,LRRC,LRDFN,LRI)
"RTN","LRAPLG1",207,0)
 K LRRC
"RTN","LRAPLG1",208,0)
 Q
"RTN","LRAPLG1",209,0)
 ;
"RTN","LRAPLG1",210,0)
 ;
"RTN","LRAPLG1",211,0)
OS ; User choosing accession number
"RTN","LRAPLG1",212,0)
 N DIR,DIROUT,DIRUT,DTOUT,LRSPEC,X,Y
"RTN","LRAPLG1",213,0)
 S DIR(0)="N^1:999999:0^D OSDIR^LRAPLG1"
"RTN","LRAPLG1",214,0)
 S DIR("A")="Enter Accession #"
"RTN","LRAPLG1",215,0)
 D ^DIR
"RTN","LRAPLG1",216,0)
 I $D(DIRUT) S LRFND=1 Q
"RTN","LRAPLG1",217,0)
 S LRAN=Y
"RTN","LRAPLG1",218,0)
 ;
"RTN","LRAPLG1",219,0)
 I $G(^LRO(68,LRAA,1,LRAD,1,LRAN,0)) D  Q
"RTN","LRAPLG1",220,0)
 . I $D(LRXREF),$D(^LR(LRXREF,LRH(2),LRABV,LRAN,LRDFN)) D
"RTN","LRAPLG1",221,0)
 . . S (LRI,LRIDT)=$O(^LR(LRXREF,LRH(2),LRABV,LRAN,LRDFN,0))
"RTN","LRAPLG1",222,0)
 . . I LRIDT S LRSD=$P($G(^LR(LRDFN,LRSS,LRIDT,0)),"^")
"RTN","LRAPLG1",223,0)
 ;
"RTN","LRAPLG1",224,0)
 I $D(LRXREF),$D(^LR(LRXREF,LRH(2),LRABV,LRAN)) D ^LRAPLG2 Q
"RTN","LRAPLG1",225,0)
 ;
"RTN","LRAPLG1",226,0)
 D CRE868
"RTN","LRAPLG1",227,0)
 I $D(LRMSG) S LRFND=1
"RTN","LRAPLG1",228,0)
 Q
"RTN","LRAPLG1",229,0)
 ;
"RTN","LRAPLG1",230,0)
 ;
"RTN","LRAPLG1",231,0)
 ;
"RTN","LRAPLG1",232,0)
OSDIR ; Called from DIR call in OS above
"RTN","LRAPLG1",233,0)
 ;
"RTN","LRAPLG1",234,0)
 ;ZEXCEPT: LRAA,LRAD,LRDFN,X
"RTN","LRAPLG1",235,0)
 ;
"RTN","LRAPLG1",236,0)
 ; Accession number doesn't exist in file #68 - quit, OK to use this number
"RTN","LRAPLG1",237,0)
 I $O(^LRO(68,LRAA,1,LRAD,1,+X,""))="" Q
"RTN","LRAPLG1",238,0)
 ;
"RTN","LRAPLG1",239,0)
 N LRX
"RTN","LRAPLG1",240,0)
 S LRX=$G(^LRO(68,LRAA,1,LRAD,1,+X,0))
"RTN","LRAPLG1",241,0)
 I LRX<1 K X Q
"RTN","LRAPLG1",242,0)
 ;
"RTN","LRAPLG1",243,0)
 ; Stub entry which matches on LRDFN
"RTN","LRAPLG1",244,0)
 I LRX=LRDFN Q
"RTN","LRAPLG1",245,0)
 ;
"RTN","LRAPLG1",246,0)
 I $P(LRX,U)'=LRDFN S X=+X D ^LRUTELL K X
"RTN","LRAPLG1",247,0)
 ;
"RTN","LRAPLG1",248,0)
 Q
"RTN","LRAPLG1",249,0)
 ;
"RTN","LRAPLG1",250,0)
 ;
"RTN","LRAPLG1",251,0)
ORDTST ; Prompt for ordered test(s); translate to NLT code for storage in ORUT
"RTN","LRAPLG1",252,0)
 ; Add NLT code to temp array LRXX (This code currently assumes one ordered test per accession)
"RTN","LRAPLG1",253,0)
 ;
"RTN","LRAPLG1",254,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT,LRNLT,LRWKCD,XX
"RTN","LRAPLG1",255,0)
 S (LRNLT,LRWKCD)="",II=0
"RTN","LRAPLG1",256,0)
 S DIR(0)="P^LAB(60,:AEMOQ",DIR("B")=$G(LRTST(0))
"RTN","LRAPLG1",257,0)
 S DIR("S")="I $P(^LAB(60,Y,0),""^"",4)=LRSS,""IBO""[$P(^LAB(60,Y,0),""^"",3),$P($G(^LAB(60,Y,64)),""^"")"
"RTN","LRAPLG1",258,0)
 D ^DIR
"RTN","LRAPLG1",259,0)
 I $D(DIRUT) S II=2 Q
"RTN","LRAPLG1",260,0)
 S LRWKCD=+$G(^LAB(60,+Y,64)),LRNLT=$P($G(^LAM(LRWKCD,0)),"^",2),II=1
"RTN","LRAPLG1",261,0)
 S XX=0
"RTN","LRAPLG1",262,0)
 F  S XX=$O(LRXX(XX)) Q:'XX  S $P(LRXX(XX),"^",2)=LRNLT_"^"_+Y
"RTN","LRAPLG1",263,0)
 ;
"RTN","LRAPLG1",264,0)
 Q
"RTN","LRAPLG1",265,0)
 ;
"RTN","LRAPLG1",266,0)
 ;
"RTN","LRAPLG1",267,0)
GETSTCS ;Get spec top and coll samp
"RTN","LRAPLG1",268,0)
 N LRI
"RTN","LRAPLG1",269,0)
 K LRXX
"RTN","LRAPLG1",270,0)
 S LRI=0,(LRXX,X)=""
"RTN","LRAPLG1",271,0)
 F  S LRI=$O(^LR(LRDFN,LRSS,LRIDT,.1,LRI)) Q:'LRI  D
"RTN","LRAPLG1",272,0)
 . S X=$G(^LR(LRDFN,LRSS,LRIDT,.1,LRI,0))
"RTN","LRAPLG1",273,0)
 . I $P(X,"^",6)'="" S LRXX($P(X,"^",6))=$P(X,"^",7)_"^"
"RTN","LRAPLG1",274,0)
 Q
"RTN","LRAPLG1",275,0)
 ;
"RTN","LRAPLG1",276,0)
 ;
"RTN","LRAPLG1",277,0)
CRE868 ; Create accession number in file 68
"RTN","LRAPLG1",278,0)
 N LRFDA,LRFDAIEN,LRIEN
"RTN","LRAPLG1",279,0)
 K LRMSG
"RTN","LRAPLG1",280,0)
 S LRIEN="+1,"_LRAD_","_LRAA_","
"RTN","LRAPLG1",281,0)
 S LRFDAIEN(1)=LRAN
"RTN","LRAPLG1",282,0)
 S LRFDA(1,68.02,LRIEN,.01)=LRDFN
"RTN","LRAPLG1",283,0)
 D UPDATE^DIE("S","LRFDA(1)","LRFDAIEN","LRMSG")
"RTN","LRAPLG1",284,0)
 I $D(LRMSG) S LRSD=LRAD D LRMSG("EN~LRAPGL1",.LRMSG) Q
"RTN","LRAPLG1",285,0)
 S X=LRAN
"RTN","LRAPLG1",286,0)
 Q
"RTN","LRAPLG1",287,0)
 ;
"RTN","LRAPLG1",288,0)
 ;
"RTN","LRAPLG1",289,0)
CRE863 ; Create entry in file #63
"RTN","LRAPLG1",290,0)
 ;
"RTN","LRAPLG1",291,0)
 N DIR,DIRUT,DTOUT,DUOUT,X,Y
"RTN","LRAPLG1",292,0)
 S DIR(0)="DO^:NOW:ET"
"RTN","LRAPLG1",293,0)
 S DIR("A")="Date/time Specimen taken",DIR("B")="NOW"
"RTN","LRAPLG1",294,0)
 ;;
"RTN","LRAPLG1",295,0)
 I '$G(LRAPDIAL) D ^DIR K DIR I Y<1 D END Q
"RTN","LRAPLG1",296,0)
 I $G(LRAPDIAL) S Y=LRCDT
"RTN","LRAPLG1",297,0)
 ;;;*
"RTN","LRAPLG1",298,0)
 S (LRY,LRSD)=Y,LRI=9999999-LRY
"RTN","LRAPLG1",299,0)
 ;
"RTN","LRAPLG1",300,0)
 ; Process and get unique LRI
"RTN","LRAPLG1",301,0)
 F  Q:'$D(^LR(LRDFN,LRSS,LRI,0))  D
"RTN","LRAPLG1",302,0)
 . S (LRSD,LRY)=$$FMADD^XLFDT(LRY,,,,1)
"RTN","LRAPLG1",303,0)
 . S LRI=9999999-LRY
"RTN","LRAPLG1",304,0)
 ;
"RTN","LRAPLG1",305,0)
 N LRFDA,LRIEN,LRFILE,LRFDAIEN
"RTN","LRAPLG1",306,0)
 K DIERR,LRMSG
"RTN","LRAPLG1",307,0)
 S LRACC=LRAC,LRNT=$$NOW^XLFDT()
"RTN","LRAPLG1",308,0)
 S LRFILE=$S(LRSS="SP":63.08,LRSS="CY":63.09,LRSS="EM":63.02,1:63.08)
"RTN","LRAPLG1",309,0)
 S LRFDAIEN(1)=LRI
"RTN","LRAPLG1",310,0)
 S LRIEN="+1,"_LRDFN_","
"RTN","LRAPLG1",311,0)
 S LRFDA(2,LRFILE,LRIEN,.01)=LRSD ;DATE/TIME SPECIMEN TAKEN
"RTN","LRAPLG1",312,0)
 S LRFDA(2,LRFILE,LRIEN,.06)=LRACC
"RTN","LRAPLG1",313,0)
 ;;*
"RTN","LRAPLG1",314,0)
 I $G(LRAPDIAL) D   ; STORE ORDERING PROVIDER  - LRAPDIAL SET IN LRAPKOE
"RTN","LRAPLG1",315,0)
 . I $G(LRPHY) S LRFDA(2,LRFILE,LRIEN,.02)=+$G(LRPHY) ;Pathologist
"RTN","LRAPLG1",316,0)
 . I $G(LRORPROV) S LRFDA(2,LRFILE,LRIEN,.07)=LRORPROV ; ORDERING PROVIDER
"RTN","LRAPLG1",317,0)
 . I $G(LRLLOC)'="" S LRFDA(2,LRFILE,LRIEN,.08)=LRLLOC ; ORDER LOCATION
"RTN","LRAPLG1",318,0)
 . I $G(LRSUBBY)'="" S LRFDA(2,LRFILE,LRIEN,.011)=LRSUBBY ; SUBMIT BY
"RTN","LRAPLG1",319,0)
 . S LRFDA(2,LRFILE,LRIEN,.1)=LRNT ;DATE/TIME SPECIMEN RECIEVED
"RTN","LRAPLG1",320,0)
 ;;;*
"RTN","LRAPLG1",321,0)
 ;
"RTN","LRAPLG1",322,0)
 D UPDATE^DIE("","LRFDA(2)","LRFDAIEN","LRMSG")
"RTN","LRAPLG1",323,0)
 L -^LR(LRDFN,LRSS)
"RTN","LRAPLG1",324,0)
 I $D(LRMSG) D LRMSG("F~LRAPLG1",.LRMSG) Q
"RTN","LRAPLG1",325,0)
 ;
"RTN","LRAPLG1",326,0)
 S (LRI,LRIDT)=LRFDAIEN(1)
"RTN","LRAPLG1",327,0)
 ;
"RTN","LRAPLG1",328,0)
 Q
"RTN","LRAPLG1",329,0)
 ;
"RTN","LRAPLG1",330,0)
 ;
"RTN","LRAPLG1",331,0)
SPMOVE ; Copy surgery information into lab package
"RTN","LRAPLG1",332,0)
 ;  - store surgery package reference to retrieve surgeon/attending.
"RTN","LRAPLG1",333,0)
 ;  - LRFLAG used to determine if data copied from Surgery packge and moved to Lab and generate notice.
"RTN","LRAPLG1",334,0)
 ;         if no data before and data after call to SROSPLG then add disclaimer.
"RTN","LRAPLG1",335,0)
 ;
"RTN","LRAPLG1",336,0)
 S X="SROSPLG" X ^%ZOSF("TEST")
"RTN","LRAPLG1",337,0)
 I '$T Q
"RTN","LRAPLG1",338,0)
 ;
"RTN","LRAPLG1",339,0)
 N I,LRFIELD,LRFLAG,LRJ,LRSREF,LRSRTN,LRWP
"RTN","LRAPLG1",340,0)
 S LRFLAG="",LRSRTN=$G(SRTN)
"RTN","LRAPLG1",341,0)
 I LRSRTN D
"RTN","LRAPLG1",342,0)
 . N LRDATA,LRDIE
"RTN","LRAPLG1",343,0)
 . S LRDATA(.01)=LRDFN_","_LRSS_","_LRI_",0"
"RTN","LRAPLG1",344,0)
 . S LRDATA(.02)=1
"RTN","LRAPLG1",345,0)
 . S LRDATA(1)=LRSRTN_";SRF("
"RTN","LRAPLG1",346,0)
 . D SETREF^LRUEPR(LRDFN,LRDATA(.01),.LRDATA,1)
"RTN","LRAPLG1",347,0)
 . F I=.2,.3,.4,.5 I '$O(^LR(LRDFN,LRSS,LRI,I,0)) S $P(LRFLAG,"^",I*10)=1
"RTN","LRAPLG1",348,0)
 ;
"RTN","LRAPLG1",349,0)
 D DISP^SROSPLG
"RTN","LRAPLG1",350,0)
 ;
"RTN","LRAPLG1",351,0)
 ; Create notation on where info came from if site wants reference.
"RTN","LRAPLG1",352,0)
 ;  also store referece as external package reference.
"RTN","LRAPLG1",353,0)
 S LRSREF=$$GET^XPAR("DIV^PKG","LR AP SURGERY REFERENCE",1,"Q")
"RTN","LRAPLG1",354,0)
 S LRFIELD(.013)="(#60) BRIEF CLIN HISTORY"
"RTN","LRAPLG1",355,0)
 S LRFIELD(.014)="(#32) PRINCIPAL PRE-OP DIAGNOSIS, (#.72) OTHER PREOP DIAGNOSIS"
"RTN","LRAPLG1",356,0)
 S LRFIELD(.015)="(#59) OPERATIVE FINDINGS"
"RTN","LRAPLG1",357,0)
 S LRFIELD(.016)="(#34) PRINCIPAL POST-OP DIAG, (#.74) OTHER POSTOP DIAGS"
"RTN","LRAPLG1",358,0)
 S LRWP(1)=" "
"RTN","LRAPLG1",359,0)
 F LRJ=.2,.3,.4,.5 I $P(LRFLAG,"^",LRJ*10),$O(^LR(LRDFN,LRSS,LRI,LRJ,0)) D
"RTN","LRAPLG1",360,0)
 . N LRDATA,LRDIE
"RTN","LRAPLG1",361,0)
 . S LRFIELD=$P("^.013^.014^.015^.016","^",LRJ*10)
"RTN","LRAPLG1",362,0)
 . S LRWP(2)="Information automatically documented from SURGERY package case #"_LRSRTN_" Field "_LRFIELD(LRFIELD)
"RTN","LRAPLG1",363,0)
 . I LRSREF=1 D WP^DIE(63.08,LRI_","_LRDFN_",",LRFIELD,"A","LRWP","LRDIE(LRFIELD)")
"RTN","LRAPLG1",364,0)
 . S LRDATA(.01)=LRDFN_","_LRSS_","_LRI_","_LRJ_",0"
"RTN","LRAPLG1",365,0)
 . S LRDATA(.02)=1
"RTN","LRAPLG1",366,0)
 . S LRDATA(1)=LRSRTN_";SRF(;"_LRWP(2)
"RTN","LRAPLG1",367,0)
 . D SETREF^LRUEPR(LRDFN,LRDATA(.01),.LRDATA,1)
"RTN","LRAPLG1",368,0)
 ;
"RTN","LRAPLG1",369,0)
 Q
"RTN","LRAPLG1",370,0)
 ;
"RTN","LRAPLG1",371,0)
 ;
"RTN","LRAPLG1",372,0)
LRMSG(LRRNAME,LRFMERR) ;
"RTN","LRAPLG1",373,0)
 ; Filing error notification
"RTN","LRAPLG1",374,0)
 ; Inputs
"RTN","LRAPLG1",375,0)
 ;  LRRNAME: Routine name  (TAG~RTN)
"RTN","LRAPLG1",376,0)
 ;  LRFMERR:<byref> FileMan error local array
"RTN","LRAPLG1",377,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT,LRDIE
"RTN","LRAPLG1",378,0)
 S LRRNAME=$TR($G(LRRNAME),"^","~")
"RTN","LRAPLG1",379,0)
 M LRDIE=LRFMERR
"RTN","LRAPLG1",380,0)
 D MAILALRT^LRWLST12(LRRNAME,.LRFMERR)
"RTN","LRAPLG1",381,0)
 S DIR(0)="EA"
"RTN","LRAPLG1",382,0)
 S DIR("A",1)="Filing error in "_LRRNAME_" for this accession/specimen"
"RTN","LRAPLG1",383,0)
 S DIR("A")="Press the return key to continue"
"RTN","LRAPLG1",384,0)
 D ^DIR
"RTN","LRAPLG1",385,0)
 Q
"RTN","LRAPLG1",386,0)
 ;
"RTN","LRAPLG1",387,0)
 ;
"RTN","LRAPLG1",388,0)
OUT ;
"RTN","LRAPLG1",389,0)
 ; Exit point
"RTN","LRAPLG1",390,0)
 Q
"RTN","LRAPLG1",391,0)
 ;
"RTN","LRAPLG1",392,0)
 ;
"RTN","LRAPLG1",393,0)
END ; from LRAUAW, LRAPLG2
"RTN","LRAPLG1",394,0)
 ; Lock Accession file
"RTN","LRAPLG1",395,0)
 D LOCK^DILF("^LRO(68,LRAA,1,LRAD,1,0)")
"RTN","LRAPLG1",396,0)
 I '$T D EN^DDIOL("Someone else is logging in specimens.  Please wait and try again.","","!!") Q
"RTN","LRAPLG1",397,0)
 ;
"RTN","LRAPLG1",398,0)
 N DIK,DA
"RTN","LRAPLG1",399,0)
 S DA=LRAN,DA(1)=LRAD,DA(2)=LRAA
"RTN","LRAPLG1",400,0)
 S DIK="^LRO(68,"_DA(2)_",1,"_DA(1)_",1,"
"RTN","LRAPLG1",401,0)
 D ^DIK
"RTN","LRAPLG1",402,0)
 ;
"RTN","LRAPLG1",403,0)
 L -^LRO(68,LRAA,1,LRAD,1,0)
"RTN","LRAPLG1",404,0)
 Q
"RTN","LRAPLG1",405,0)
 ;
"RTN","LRAPLG1",406,0)
 ;
"RTN","LRAPLG1",407,0)
FIX ; Entry point to delete an orphan AP entry in file #63
"RTN","LRAPLG1",408,0)
 ;
"RTN","LRAPLG1",409,0)
 N DA,DFN,DIC,DIK,DIR,DIROUT,DIRUT,DIQ,DR,DTOUT
"RTN","LRAPLG1",410,0)
 N LRAA,LRABV,LRAC,LRAD,LRAN,LRDFN,LRDPA,LRDPF,LRH,LRI,LRRC,LRSS,LRWHN,LRXR,LRXREF
"RTN","LRAPLG1",411,0)
 N AGE,PNM,SEX,X,Y
"RTN","LRAPLG1",412,0)
 ;
"RTN","LRAPLG1",413,0)
 D ^LRAP Q:'$D(Y)
"RTN","LRAPLG1",414,0)
 D XR^LRU
"RTN","LRAPLG1",415,0)
 ;
"RTN","LRAPLG1",416,0)
 I LRSS'?1(1"SP",1"CY",1"EM") W !,"This program only supports SP, CY and EM subscripts",! Q
"RTN","LRAPLG1",417,0)
 ;
"RTN","LRAPLG1",418,0)
 S LRH(2)=$E(LRAD,1,3),LRWHN=$E(LRAD,2,3)
"RTN","LRAPLG1",419,0)
 ;
"RTN","LRAPLG1",420,0)
 D EN1^LRUPS Q:LRAN=-1
"RTN","LRAPLG1",421,0)
 I $P(^LR(LRDFN,LRSS,LRI,0),"^",11)'="" W !,"Report has been released!",! Q
"RTN","LRAPLG1",422,0)
 I $D(^LR(LRDFN,LRSS,LRI,2005)) D  Q
"RTN","LRAPLG1",423,0)
 . W !,"Report has associated images in IMAGING package!"
"RTN","LRAPLG1",424,0)
 . W !,"Disposition these images before deleting this entry!",!
"RTN","LRAPLG1",425,0)
 ;
"RTN","LRAPLG1",426,0)
 K DR
"RTN","LRAPLG1",427,0)
 S DIC="^LR("_LRDFN_","""_LRSS_""",",DA(1)=LRDFN,DA=LRI,DIQ(0)="ACR"
"RTN","LRAPLG1",428,0)
 D EN^DIQ
"RTN","LRAPLG1",429,0)
 ;
"RTN","LRAPLG1",430,0)
 S DIR(0)="Y",DIR("A")="DELETE this entry",DIR("B")="NO"
"RTN","LRAPLG1",431,0)
 D ^DIR
"RTN","LRAPLG1",432,0)
 I Y<1 Q
"RTN","LRAPLG1",433,0)
 ;
"RTN","LRAPLG1",434,0)
 K DIR
"RTN","LRAPLG1",435,0)
 S DIR(0)="Y",DIR("A")="Are you sure",DIR("B")="NO"
"RTN","LRAPLG1",436,0)
 D ^DIR
"RTN","LRAPLG1",437,0)
 I Y<1 Q
"RTN","LRAPLG1",438,0)
 ;
"RTN","LRAPLG1",439,0)
 ; Lock record
"RTN","LRAPLG1",440,0)
 D LOCK^DILF("^LR(LRDFN,LRSS,LRI)")
"RTN","LRAPLG1",441,0)
 I '$T D  Q
"RTN","LRAPLG1",442,0)
 . D EN^DDIOL("Someone else is accessing this record.  Please wait and try again.","","!!")
"RTN","LRAPLG1",443,0)
 . D KVA^VADPT,V^LRU
"RTN","LRAPLG1",444,0)
 ;
"RTN","LRAPLG1",445,0)
 K DA,DIK
"RTN","LRAPLG1",446,0)
 S DA=LRI,DA(1)=LRDFN,DIK="^LR("_DA(1)_","""_LRSS_""","
"RTN","LRAPLG1",447,0)
 D ^DIK
"RTN","LRAPLG1",448,0)
 ;
"RTN","LRAPLG1",449,0)
 ; Cleanup some cross-references.
"RTN","LRAPLG1",450,0)
 I LRSS?1(1"SP",1"CY",1"EM") D
"RTN","LRAPLG1",451,0)
 . K ^LR(LRXREF,LRH(2),LRABV,LRAN,LRDFN,LRI)
"RTN","LRAPLG1",452,0)
 . I $G(LRRC)>1 K ^LR(LRXR,LRRC,LRDFN,LRI)
"RTN","LRAPLG1",453,0)
 ;
"RTN","LRAPLG1",454,0)
 I LRSS="AU" D
"RTN","LRAPLG1",455,0)
 . I $D(^LR(LRDFN,"AV")) K ^LR(LRDFN,"AV")
"RTN","LRAPLG1",456,0)
 . I $D(^LR(LRDFN,"AW")) K ^LR(LRDFN,"AW")
"RTN","LRAPLG1",457,0)
 . I $D(^LR(LRDFN,"AWI")) K ^LR(LRDFN,"AWI")
"RTN","LRAPLG1",458,0)
 . I $D(LRRC) K ^LR("AAUA",+$E(LRRC,1,3),LRABV,LRAN),^LR("AAU",+LRRC,LRDFN)
"RTN","LRAPLG1",459,0)
 ;
"RTN","LRAPLG1",460,0)
 ; Release lock
"RTN","LRAPLG1",461,0)
 L -^LR(LRDFN,LRSS,LRI)
"RTN","LRAPLG1",462,0)
 ;
"RTN","LRAPLG1",463,0)
 W !!,"Entry deleted",!
"RTN","LRAPLG1",464,0)
 D KVA^VADPT,V^LRU
"RTN","LRAPLG1",465,0)
 ;
"RTN","LRAPLG1",466,0)
 Q
"RTN","LROE")
0^4^B39978878^B35804933
"RTN","LROE",1,0)
LROE ;DALOI/CJS/FHS-LAB ORDER ENTRY AND ACCESSION ;01/23/17  07:34
"RTN","LROE",2,0)
 ;;5.2;LAB SERVICE;**100,121,201,221,263,286,360,423,432,438,450,479**;Sep 27, 1994;Build 8
"RTN","LROE",3,0)
 K LRORIFN,LRNATURE,LREND,LRORDRR
"RTN","LROE",4,0)
 ;;*
"RTN","LROE",5,0)
 N LRSVODT,LRORDR
"RTN","LROE",6,0)
 S (LRORDR,LRLWC)="WC"
"RTN","LROE",7,0)
 ;;;*
"RTN","LROE",8,0)
 D ^LRPARAM
"RTN","LROE",9,0)
 I $G(LREND) S LREND=0 Q
"RTN","LROE",10,0)
L5 ;
"RTN","LROE",11,0)
NEXT ;from LROE1
"RTN","LROE",12,0)
 K DIR,LRSVODT
"RTN","LROE",13,0)
 I $D(LROESTAT) D:$P(LRPARAM,U,14) ^LRCAPV I $G(LREND) K LRLONG,LRPANEL Q
"RTN","LROE",14,0)
 S (LRODT,X,DT)=$$DT^XLFDT(),LRODT0=$$FMTE^XLFDT(DT,5)
"RTN","LROE",15,0)
 I '$D(^LRO(69,DT,1,0)) S ^LRO(69,DT,0)=DT,^LRO(69,DT,1,0)="^69.01PA^^",^LRO(69,"B",DT,DT)=""
"RTN","LROE",16,0)
 I $D(^LAB(69.9,1,"RO")),+$H'=+$P(^("RO"),U) D
"RTN","LROE",17,0)
 . W $C(7),!,"ROLLOVER ",$S($P(^("RO"),U,2):"IS RUNNING.",1:"HAS NOT RUN.")," ACCESSIONING SHOULDN'T BE DONE NOW.",$C(7),!
"RTN","LROE",18,0)
 . S DIR("A")="  Are you sure you want to continue",DIR(0)="Y",DIR("B")="No"
"RTN","LROE",19,0)
 I $T D ^DIR G END:$D(DIRUT) I Y'=1 W !,"OK, try later." Q
"RTN","LROE",20,0)
 S X="T-7",%DT="" D ^%DT S LRTM7=+Y
"RTN","LROE",21,0)
 ;W @IOF
"RTN","LROE",22,0)
 K DIC,LRSND,LRSN
"RTN","LROE",23,0)
 W !!,"Select Order number: " R LRORD:DTIME Q:LRORD["^"!(LRORD[".")!($D(LRLONG)&(LRORD=""))
"RTN","LROE",24,0)
 W @IOF S M9=0 G QUICK^LROE1:LRORD=""
"RTN","LROE",25,0)
 I $L(LRORD)>8 W !,"The order number entered is too long." H 1 G NEXT
"RTN","LROE",26,0)
 S:LRORD?.N LRORD=+LRORD IF LRORD'?.N D QMSG G NEXT
"RTN","LROE",27,0)
 I '$D(^LRO(69,"C",LRORD)) W !!?10,"No order exist with that number ",$C(7),! G NEXT
"RTN","LROE",28,0)
 S (LRCHK,LRNONE)=1,(M9,LRODT)=0
"RTN","LROE",29,0)
 F  S LRODT=+$O(^LRO(69,"C",LRORD,LRODT)) Q:LRODT<1  D
"RTN","LROE",30,0)
 . S DA=0 F  S DA=$O(^LRO(69,"C",LRORD,LRODT,DA)) Q:DA<1  S LRCHK=LRCHK-1 S:LRNONE'=2 LRNONE=0 D LROE2
"RTN","LROE",31,0)
 ;;*
"RTN","LROE",32,0)
 I $G(LRSN),$G(LRSVODT),$O(^LRO(69,LRSVODT,1,LRSN,13,0)) D  G NEXT
"RTN","LROE",33,0)
 . W !,$$CJ^XLFSTR("This is an Anatomic Path order",IOM),!
"RTN","LROE",34,0)
 . W !,$$CJ^XLFSTR("Must use 'Log-in, anat path' Option to accession this Order",IOM),!
"RTN","LROE",35,0)
 . H 5
"RTN","LROE",36,0)
 ;;;*
"RTN","LROE",37,0)
 I DOD'="" S Y=DOD D DD^LRX W !,!,?5,@LRVIDO,"Patient ",PNM," died on: ",Y,@LRVIDOF W !
"RTN","LROE",38,0)
 I '$$GOT(LRORD,LRODT) W !,"All tests for this order have been canceled." H 1 G NEXT
"RTN","LROE",39,0)
 I DOD'="" D  I Y=0!($D(DIRUT)) K DIRUT,DTOUT,DUOUT,Y D KVAR^LRX G NEXT
"RTN","LROE",40,0)
 . K Y
"RTN","LROE",41,0)
 . S DIR(0)="Y"
"RTN","LROE",42,0)
 . S DIR("A")="Do you wish to continue with this accession [Yes/No]"
"RTN","LROE",43,0)
 . S DIR("T")=120
"RTN","LROE",44,0)
 . D ^DIR K DIR
"RTN","LROE",45,0)
 I LRNONE=2,LRCHK<1 W !,"The order has already been partially accessioned." H 1
"RTN","LROE",46,0)
 I LRNONE=2,LRCHK>0 W !,"The order has already been accessioned." H 1 G NEXT
"RTN","LROE",47,0)
 I LRNONE=1 W !,"No order exists with that number." H 1 G NEXT
"RTN","LROE",48,0)
 ;I '$$GOT(LRORD,LRODT) G NEXT ;W !!,"All tests for this order have been canceled.",!,"Are you sure you want to accession it" S %=1 D YN^DICN I %'=1 G NEXT
"RTN","LROE",49,0)
 K DIR S DIR("A")="Is this the correct order",DIR(0)="Y"
"RTN","LROE",50,0)
 S DIR("B")="Yes"
"RTN","LROE",51,0)
 D ^DIR K DIR
"RTN","LROE",52,0)
 I $D(DIRUT)!(Y'=1) K LRSN G NEXT
"RTN","LROE",53,0)
 L +^LRO(69,"C",LRORD):$G(DILOCKTM,3)
"RTN","LROE",54,0)
 I '$T W !?5,"Someone else is editing this Order",!!,$C(7) G NEXT
"RTN","LROE",55,0)
 K %DT
"RTN","LROE",56,0)
 S LRSTATUS="C",%DT("B")=""
"RTN","LROE",57,0)
 D TIME K %DT
"RTN","LROE",58,0)
 D:$G(LRCDT)<1 UNL69 G NEXT:LRCDT<1
"RTN","LROE",59,0)
 S LRTIM=+LRCDT
"RTN","LROE",60,0)
 ;S:'$P(^LRO(69,LRODT,1,LRSN,0),U,8) $P(^(0),U,8)=LRTIM
"RTN","LROE",61,0)
 S LRUN=$P(LRCDT,U,2) K LRCDT,LRSN
"RTN","LROE",62,0)
MORE I M9>1 K DIR S DIR("A")="Do you have the entire order",DIR(0)="Y" D ^DIR K DIR S:Y=1 M9=0
"RTN","LROE",63,0)
 I $D(DIRUT) D UNL69 G NEXT
"RTN","LROE",64,0)
 S (LRODT,LRSND)=0
"RTN","LROE",65,0)
 F  S LRODT=$O(^LRO(69,"C",LRORD,LRODT)) Q:LRODT<1  D
"RTN","LROE",66,0)
 . S LRSND=0
"RTN","LROE",67,0)
 . F  S LRSND=$O(^LRO(69,"C",LRORD,LRODT,LRSND)) Q:LRSND<1  D
"RTN","LROE",68,0)
 . . I $D(^LRO(69,LRODT,1,LRSND,1)),$P(^(1),U,4)="C" Q
"RTN","LROE",69,0)
 . . S LRSN(LRSND)=LRSND,LRSN=LRSND
"RTN","LROE",70,0)
 . . K LRAA D Q15^LROE2 K LRSN
"RTN","LROE",71,0)
 D TASK,UNL69
"RTN","LROE",72,0)
 G NEXT
"RTN","LROE",73,0)
 ;
"RTN","LROE",74,0)
 ;
"RTN","LROE",75,0)
LROE2 ;
"RTN","LROE",76,0)
 I '$D(^LRO(69,LRODT,1,DA,0)) Q
"RTN","LROE",77,0)
 I $D(^LRO(69,LRODT,1,DA,1)) D
"RTN","LROE",78,0)
 . I $P(^LRO(69,LRODT,1,DA,1),U,4)="C" S LRNONE=2,LRCHK=LRCHK+1 Q
"RTN","LROE",79,0)
 . I $P(^LRO(69,LRODT,1,DA,0),U,4)="LC",$P(^LRO(69,LRODT,1,DA,1),U,4)="" S LRNONE=2,LRCHK=LRCHK+1
"RTN","LROE",80,0)
 ;
"RTN","LROE",81,0)
 K LRSN
"RTN","LROE",82,0)
 S (LRSN,LRSN(DA))=+DA
"RTN","LROE",83,0)
 I '$D(^LRO(69,LRODT,1,LRSN,0)) Q
"RTN","LROE",84,0)
 S M9=$G(M9)+1,LRZX=^LRO(69,LRODT,1,LRSN,0),LRDFN=+LRZX,LRDPF=$P(^LR(LRDFN,0),U,2),DFN=$P(^(0),U,3) D PT^LRX W !,PNM,?30,SSN S LRWRDS=LRWRD
"RTN","LROE",85,0)
 W ?45,"Requesting location: ",$P(LRZX,U,7) S Y=$P(LRZX,U,5) D DD^LRX W !,"Date/Time Ordered: ",Y,?45,"By: ",$S($D(^VA(200,+$P(LRZX,U,2),0)):$P(^(0),U),1:"")
"RTN","LROE",86,0)
 ;;*
"RTN","LROE",87,0)
 ;
"RTN","LROE",88,0)
 S LRSVODT=LRODT
"RTN","LROE",89,0)
 D ORDER^LROS
"RTN","LROE",90,0)
 ;;;*
"RTN","LROE",91,0)
 Q
"RTN","LROE",92,0)
 ;
"RTN","LROE",93,0)
 ;
"RTN","LROE",94,0)
QMSG W !,"Enter the order entry number assigned when the test was ordered."
"RTN","LROE",95,0)
 W:'$D(LRLONG) !,"If the test has not been ordered, type the RETURN key to order the test."
"RTN","LROE",96,0)
 W !,"To exit, type the ""^"" key and RETURN key."
"RTN","LROE",97,0)
 Q
"RTN","LROE",98,0)
 ;
"RTN","LROE",99,0)
 ;
"RTN","LROE",100,0)
YN R X:DTIME S:'$T DTOUT=1 Q:X=""!(X["N")!(X["Y")
"RTN","LROE",101,0)
 W !,"Answer 'Y' or 'N': " G YN
"RTN","LROE",102,0)
 ;
"RTN","LROE",103,0)
 ;
"RTN","LROE",104,0)
EN ;
"RTN","LROE",105,0)
LROEN S LRNCWL=1
"RTN","LROE",106,0)
 D LROE,END K LRNCWL
"RTN","LROE",107,0)
 Q
"RTN","LROE",108,0)
 ;
"RTN","LROE",109,0)
 ;
"RTN","LROE",110,0)
EN01 ; ENTER ORDER # THEN ENTER DATA
"RTN","LROE",111,0)
STAT ;
"RTN","LROE",112,0)
 D ^LRPARAM
"RTN","LROE",113,0)
 I '$D(LRLABKY) W !!?10,"You do not have the proper security Keys",! Q
"RTN","LROE",114,0)
 ;
"RTN","LROE",115,0)
 ; Select peforming laboratory
"RTN","LROE",116,0)
 S X=$$SELPL^LRVERA(DUZ(2))
"RTN","LROE",117,0)
 I X<1 D END Q
"RTN","LROE",118,0)
 I X'=DUZ(2) N LRPL S LRPL=X
"RTN","LROE",119,0)
 ;
"RTN","LROE",120,0)
 S LRLONG="",LRPANEL=0,LROESTAT=""
"RTN","LROE",121,0)
 S %H=$H-60 D YMD^LRX S LRTM60=9999999-X
"RTN","LROE",122,0)
 D LROE K LRTM60,LRLONG,LREND,LROESTAT
"RTN","LROE",123,0)
 D END
"RTN","LROE",124,0)
 Q
"RTN","LROE",125,0)
 ;
"RTN","LROE",126,0)
 ;
"RTN","LROE",127,0)
TIME ;from LROE1, LRORD1
"RTN","LROE",128,0)
 S %DT="SET" W !,"Collection Date@Time: ",$S($D(%DT("B")):%DT("B"),1:"NOW"),"//" R X:DTIME I '$T!(X="^") S LRCDT=-1 Q
"RTN","LROE",129,0)
 S:X="" X=$S($D(%DT("B")):%DT("B"),1:"N")
"RTN","LROE",130,0)
 W:X["?" !!,"You may enter ""T@U"" or just ""U"", for Today at Unknown time",!!
"RTN","LROE",131,0)
 I X["@U",$P(X,"@U",2)="" S X=$P(X,"@U",1) D ^%DT G TIME:Y<1 S LRCDT=+Y_"^1" Q
"RTN","LROE",132,0)
 S:X="U" LRCDT=DT_"^1"
"RTN","LROE",133,0)
 I X'="U" D ^%DT D:X'["?" TIME1 G TIME:X["?" S LRCDT=+Y_"^" G TIME:Y'["."
"RTN","LROE",134,0)
 Q
"RTN","LROE",135,0)
 ;
"RTN","LROE",136,0)
TIME1 S X1=X,Y1=Y D TIME2 S X=X1,Y=Y1 K X1,Y1
"RTN","LROE",137,0)
 Q
"RTN","LROE",138,0)
 ;
"RTN","LROE",139,0)
TIME2 S X="N",%DT="ST" D ^%DT Q:Y1'>Y  F  W !,"You have specified a collection time in the future.  Are you sure" S %=2 D YN^DICN Q:%  W !,"Answer 'Y'es or 'N'o."
"RTN","LROE",140,0)
 S:%'=1 X="?" S X1=X
"RTN","LROE",141,0)
 Q
"RTN","LROE",142,0)
 ;
"RTN","LROE",143,0)
 ;
"RTN","LROE",144,0)
TASK ;
"RTN","LROE",145,0)
 I $D(LRLABLIO),$D(LRLBL) S ZTRTN="ENT^LRLABLD",ZTDTH=$H,ZTDESC="LAB LABELS",ZTIO=LRLABLIO,ZTSAVE("LRLBL(")="" D ^%ZTLOAD
"RTN","LROE",146,0)
 K LRLBL
"RTN","LROE",147,0)
 I $D(LRCSQ),'$O(^XTMP("LRCAP",LRCSQ,DUZ,0)) K ^XTMP("LRCAP",LRCSQ,DUZ),LRCSQ
"RTN","LROE",148,0)
 I $D(LRCSQ),$P($G(^LRO(68,+LRAA,0)),U,16) D STD^LRCAPV
"RTN","LROE",149,0)
 D STOP^LRCAPV K LRCOM,LRSPCDSC,LRCCOM,LRTCOM
"RTN","LROE",150,0)
 Q
"RTN","LROE",151,0)
 ;
"RTN","LROE",152,0)
 ;
"RTN","LROE",153,0)
END K DIR,DIRUT,GOT
"RTN","LROE",154,0)
 D ^LRORDK,LROEND^LRORDK,STOP^LRCAPV
"RTN","LROE",155,0)
 Q
"RTN","LROE",156,0)
 ;
"RTN","LROE",157,0)
 ;
"RTN","LROE",158,0)
GOT(ORD,ODT) ;See if all tests have been canceled
"RTN","LROE",159,0)
 N I,SN,ODT
"RTN","LROE",160,0)
 S (GOT,ODT,SN)=0
"RTN","LROE",161,0)
 F  S ODT=$O(^LRO(69,"C",ORD,ODT)) Q:ODT<1  D
"RTN","LROE",162,0)
 . S SN=0 F  S SN=$O(^LRO(69,"C",ORD,ODT,SN)) Q:SN<1!(GOT)  D
"RTN","LROE",163,0)
 . . Q:'$D(^LRO(69,ODT,1,SN,0))
"RTN","LROE",164,0)
 . . S I=0 F  S I=$O(^LRO(69,ODT,1,SN,2,I)) Q:I<1  I $D(^(I,0)),'$P(^(0),"^",11),$P(^(0),U,9)'="CA" S GOT=1 Q
"RTN","LROE",165,0)
 Q GOT
"RTN","LROE",166,0)
 ;
"RTN","LROE",167,0)
 ;
"RTN","LROE",168,0)
UNL69 ;
"RTN","LROE",169,0)
 L -^LRO(69,"C",+$G(LRORD))
"RTN","LROE",170,0)
 Q
"RTN","LRUWLF")
0^1^B11960061^B10789696
"RTN","LRUWLF",1,0)
LRUWLF ;DALOI/STAFF - FILE #68 UTILITY ;01/23/17  01:14
"RTN","LRUWLF",2,0)
 ;;5.2;LAB SERVICE;**72,350,462,479**;Sep 27, 1994;Build 8
"RTN","LRUWLF",3,0)
 ;
"RTN","LRUWLF",4,0)
 ;
"RTN","LRUWLF",5,0)
EN ;
"RTN","LRUWLF",6,0)
 ;
"RTN","LRUWLF",7,0)
 S:'$D(LRCS) LRCS=""
"RTN","LRUWLF",8,0)
 ;
"RTN","LRUWLF",9,0)
STF ;
"RTN","LRUWLF",10,0)
 S:'$D(LRSIT) LRSIT=LRU S:'$D(LRSVC) LRSVC=""
"RTN","LRUWLF",11,0)
 ;
"RTN","LRUWLF",12,0)
 ;;*
"RTN","LRUWLF",13,0)
 I '$G(LRAPDIAL) S LRACC=LRABV_" "_LRWHN_" "_LRAN
"RTN","LRUWLF",14,0)
 ;
"RTN","LRUWLF",15,0)
 ; File information in file #68 for this accession
"RTN","LRUWLF",16,0)
 K LRFDA,LR6802,LRDIE
"RTN","LRUWLF",17,0)
 ;;;*
"RTN","LRUWLF",18,0)
 S LR6802=LRAN_","_LRAD_","_LRAA_","
"RTN","LRUWLF",19,0)
 S LRFDA(1,68.02,LR6802,.01)=LRDFN
"RTN","LRUWLF",20,0)
 S LRFDA(1,68.02,LR6802,1)=+LRDPF
"RTN","LRUWLF",21,0)
 S LRFDA(1,68.02,LR6802,2)=LRAD
"RTN","LRUWLF",22,0)
 ;;*
"RTN","LRUWLF",23,0)
 I $G(LRODT) S LRFDA(1,68.02,LR6802,3)=LRODT ;ORDER DATE
"RTN","LRUWLF",24,0)
 I $G(LRSN) S LRFDA(1,68.02,LR6802,4)=LRSN ; ORDER DATE IEN
"RTN","LRUWLF",25,0)
 I $G(LROLLOC) S LRFDA(1,68.02,LR6802,94)=LROLLOC ; ORDER LOCATION POINTER
"RTN","LRUWLF",26,0)
 ;;;*
"RTN","LRUWLF",27,0)
 S LRFDA(1,68.02,LR6802,6)=LRLLOC
"RTN","LRUWLF",28,0)
 ;
"RTN","LRUWLF",29,0)
 ; No ordering provider/location on controls
"RTN","LRUWLF",30,0)
 I LRDPF'=62.3 D
"RTN","LRUWLF",31,0)
 . S LRFDA(1,68.02,LR6802,6.5)=LRMD(1)
"RTN","LRUWLF",32,0)
 . ;;*
"RTN","LRUWLF",33,0)
 . I $G(LROLLOC) S LRFDA(1,68.02,LR6802,94)=LROLLOC
"RTN","LRUWLF",34,0)
 . ;;;*
"RTN","LRUWLF",35,0)
 ;
"RTN","LRUWLF",36,0)
 ; Only store treating specialty on file #2 patients
"RTN","LRUWLF",37,0)
 ; If no treating specialty then use specialty from file #44 location
"RTN","LRUWLF",38,0)
 I LRDPF=2 D
"RTN","LRUWLF",39,0)
 . N LRTREA
"RTN","LRUWLF",40,0)
 . S LRTREA=$P($G(^DPT(DFN,.103)),U)
"RTN","LRUWLF",41,0)
 . ;;*
"RTN","LRUWLF",42,0)
 . ;I 'LRTREA S LRTREA=$P($G(^SC(+LRLLOC,0)),U,20)
"RTN","LRUWLF",43,0)
 . I 'LRTREA,$G(LROLLOC) S LRTREA=$P($G(^SC(LROLLOC,0)),U,20)
"RTN","LRUWLF",44,0)
 . I LRTREA S LRFDA(1,68.02,LR6802,6.6)=LRTREA
"RTN","LRUWLF",45,0)
 ;
"RTN","LRUWLF",46,0)
 S LRFDA(1,68.02,LR6802,6.7)=DUZ
"RTN","LRUWLF",47,0)
 S LRFDA(1,68.02,LR6802,9)=LRSD
"RTN","LRUWLF",48,0)
 S LRFDA(1,68.02,LR6802,12)=LRRC
"RTN","LRUWLF",49,0)
 S LRFDA(1,68.02,LR6802,13.5)=LRI
"RTN","LRUWLF",50,0)
 I LRC(5)'="" S LRFDA(1,68.02,LR6802,13.6)=LRC(5)
"RTN","LRUWLF",51,0)
 ;;*
"RTN","LRUWLF",52,0)
 I $G(LRORD) S LRFDA(1,68.02,LR6802,14)=LRORD
"RTN","LRUWLF",53,0)
 ;;;*
"RTN","LRUWLF",54,0)
 S LRFDA(1,68.02,LR6802,15)=LRACC
"RTN","LRUWLF",55,0)
 S LRFDA(1,68.02,LR6802,26)=DUZ(2)
"RTN","LRUWLF",56,0)
 S LRFDA(1,68.02,LR6802,92)=LRCAPLOC
"RTN","LRUWLF",57,0)
 D FILE^DIE("S","LRFDA(1)","LRDIE(1)")
"RTN","LRUWLF",58,0)
 I $D(LRDIE(1)) D MAILALRT^LRWLST12("STF~LRUWLF")
"RTN","LRUWLF",59,0)
 ;
"RTN","LRUWLF",60,0)
 ; Create and store UID on accession.
"RTN","LRUWLF",61,0)
 S LRUID=$$LRUID^LRX(LRAA,LRAD,LRAN)
"RTN","LRUWLF",62,0)
 ;
"RTN","LRUWLF",63,0)
 I LRSS="CY" D
"RTN","LRUWLF",64,0)
 . S ^LRO(69.2,LRAA,1,LRAN,0)=LRDFN_"^"_LRI_"^"_LRH(0)
"RTN","LRUWLF",65,0)
 . L +^LRO(69.2,LRAA,1):DILOCKTM
"RTN","LRUWLF",66,0)
 . S X=^LRO(69.2,LRAA,1,0),^(0)=$P(X,"^",1,2)_"^"_LRAN_"^"_($P(X,"^",4)+1)
"RTN","LRUWLF",67,0)
 . L -^LRO(69.2,LRAA,1)
"RTN","LRUWLF",68,0)
 Q
"RTN","LRUWLF",69,0)
 ;
"RTN","LRUWLF",70,0)
 ;
"RTN","LRUWLF",71,0)
EN1 ; add more tests ;used by LRUTAD
"RTN","LRUWLF",72,0)
 S:'$D(^LRO(68,LRAA,1,LRAD,1,LRAN,4,0)) ^LRO(68,LRAA,1,LRAD,1,LRAN,4,0)="^68.04PA^^"
"RTN","LRUWLF",73,0)
 W !
"RTN","LRUWLF",74,0)
 ;
"RTN","LRUWLF",75,0)
TST ;
"RTN","LRUWLF",76,0)
 K LRTEST
"RTN","LRUWLF",77,0)
 S DIC=60,DIC("A")="   Add Test/Procedure: ",DIC(0)="AEMOQZ",DIC("S")="I $P(^(0),U,4)=LRAA(2),$A($P(^(0),U,3))<78"
"RTN","LRUWLF",78,0)
 D ^DIC K DIC
"RTN","LRUWLF",79,0)
 I Y<1 S LRSIT="" Q
"RTN","LRUWLF",80,0)
 ;
"RTN","LRUWLF",81,0)
 S (LRTEST,Y)=+Y,LRTNAM=$P(Y,U,2)
"RTN","LRUWLF",82,0)
 S N=0
"RTN","LRUWLF",83,0)
 F  S N=$O(^LAB(60,LRTEST,1,N)) Q:'N  S LRTEST(1)=$S($D(^LAB(60,LRTEST,1,N,0)):+^LAB(60,LRTEST,1,N,0),1:"") Q:LRTEST(1)=LRSIT
"RTN","LRUWLF",84,0)
 I LRSS="CH",N<1 W $C(7),!!,"CANNOT ORDER ",LRTNAM," FOR ",$P(^LAB(61,LRSIT,0),U) G TST
"RTN","LRUWLF",85,0)
 D SUM
"RTN","LRUWLF",86,0)
 K LRRP
"RTN","LRUWLF",87,0)
 G TST
"RTN","LRUWLF",88,0)
 ;
"RTN","LRUWLF",89,0)
 ;
"RTN","LRUWLF",90,0)
SUM ;
"RTN","LRUWLF",91,0)
 ;
"RTN","LRUWLF",92,0)
 S N=0
"RTN","LRUWLF",93,0)
 F X=0:1 S N=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,N)) Q:'N  S:Y=N LRRP=1
"RTN","LRUWLF",94,0)
 Q:$D(LRRP)
"RTN","LRUWLF",95,0)
 S ^LRO(68,LRAA,1,LRAD,1,LRAN,4,Y,0)=LRTEST_"^^"
"RTN","LRUWLF",96,0)
 I $P(^LRO(68,LRAA,1,LRAD,1,LRAN,4,0),"^",4)<1 S ^(0)="^68.04PA^"_Y_"^"_1 Q
"RTN","LRUWLF",97,0)
 S ^LRO(68,LRAA,1,LRAD,1,LRAN,4,0)="^68.04PA^"_Y_"^"_($P(^LRO(68,LRAA,1,LRAD,1,LRAN,4,0),"^",4)+1)
"RTN","LRUWLF",98,0)
 ;
"RTN","LRUWLF",99,0)
 Q
"RTN","LRXREF")
0^8^B76007577^B75229218
"RTN","LRXREF",1,0)
LRXREF ;DALOI/STAFF - BUILD CROSS-REFERENCES FOR RE-INDEX ;02/17/17  10:43
"RTN","LRXREF",2,0)
 ;;5.2;LAB SERVICE;**70,153,263,350,479**;Sep 27, 1994;Build 8
"RTN","LRXREF",3,0)
 ;
"RTN","LRXREF",4,0)
 ;
"RTN","LRXREF",5,0)
 ; ZEXCEPT is used to identify variables which are external to a specific TAG
"RTN","LRXREF",6,0)
 ;         used in conjunction with Eclipse M-editor.
"RTN","LRXREF",7,0)
 ;
"RTN","LRXREF",8,0)
AVS1 ; Rebuild "AVS" cross-reference in file 68 for Re-index utility - DATE/TIME RESULTS AVAILABLE  (68.02,13)
"RTN","LRXREF",9,0)
 I $D(DIU(0)),$P(^LRO(68,DA(2),1,DA(1),1,DA,3),U,4)="" S ^LRO(68,"AVS",DA(2),DA(1),DA)=$P(^LRO(68,DA(2),1,DA(1),1,DA,0),U)_"^"_$P(^(3),U,5)
"RTN","LRXREF",10,0)
 Q
"RTN","LRXREF",11,0)
 ;
"RTN","LRXREF",12,0)
 ;
"RTN","LRXREF",13,0)
AVS2 ; Rebuild "AVS" cross-reference in file 68 for Re-index utility - DATE/TIME RESULTS AVAILABLE  (68.02,13)
"RTN","LRXREF",14,0)
 I $D(DIU(0)),$P(^LRO(68,DA(2),1,DA(1),1,DA,3),U,4)'="" K ^LRO(68,"AVS",DA(2),DA(1),DA)
"RTN","LRXREF",15,0)
 Q
"RTN","LRXREF",16,0)
 ;
"RTN","LRXREF",17,0)
 ;
"RTN","LRXREF",18,0)
AVS3 ; Rebuild "AVS" cross-reference in fie #68 for re-index utility - DATE/TIME RESULTS AVAILABLE  (68.02,13)
"RTN","LRXREF",19,0)
 I '$D(DIU(0)),$P(^LRO(68,DA(2),1,DA(1),1,DA,3),U,4)'="" K ^LRO(68,"AVS",DA(2),DA(1),DA)
"RTN","LRXREF",20,0)
 Q
"RTN","LRXREF",21,0)
 ;
"RTN","LRXREF",22,0)
 ;
"RTN","LRXREF",23,0)
AVS4 ; Rebuild "AVS" cross-reference in file 68 for Re-index utility - DATE/TIME RESULTS AVAILABLE  (68.02,13)
"RTN","LRXREF",24,0)
 I '$D(DIU(0)),$P(^LRO(68,DA(2),1,DA(1),1,DA,3),U,4)="" S ^LRO(68,"AVS",DA(2),DA(1),DA)=$P(^LRO(68,DA(2),1,DA(1),1,DA,0),U)_"^"_$P(^(3),U,5)
"RTN","LRXREF",25,0)
 Q
"RTN","LRXREF",26,0)
 ;
"RTN","LRXREF",27,0)
 ;
"RTN","LRXREF",28,0)
AC1 ; Build "AC" cross-reference when comment is deleted from a verified test in File 63. Audit trail only.
"RTN","LRXREF",29,0)
 I '$D(DIU(0)),$D(DUZ),$P(^LR(DA(2),"CH",DA(1),0),U,3) S ^LR(DA(2),"CH",DA(1),1,"AC",DUZ,$H)=$P(^LR(DA(2),"CH",DA(1),0),U,3,4)_"^"_X
"RTN","LRXREF",30,0)
 Q
"RTN","LRXREF",31,0)
 ;
"RTN","LRXREF",32,0)
 ;
"RTN","LRXREF",33,0)
AN1 ; Build logic "AN"" cross-reference in File 69, when results available
"RTN","LRXREF",34,0)
 S ^LRO(69,"AN",$E($P(^LRO(69,DA(1),1,DA,0),U,7),1,20),$P(^(0),U),9999999-$P(^LRO(69,DA(1),1,DA,1),U))=""
"RTN","LRXREF",35,0)
 Q
"RTN","LRXREF",36,0)
 ;
"RTN","LRXREF",37,0)
 ;
"RTN","LRXREF",38,0)
AN2 ; Kill logic for "AN"" cross-reference in File 69, when results available
"RTN","LRXREF",39,0)
 K ^LRO(69,"AN",$E($P(^LRO(69,DA(1),1,DA,0),U,7),1,20),$P(^(0),U),9999999-$P(^LRO(69,DA(1),1,DA,1),U))
"RTN","LRXREF",40,0)
 Q
"RTN","LRXREF",41,0)
 ;
"RTN","LRXREF",42,0)
 ;
"RTN","LRXREF",43,0)
AR1 ; Setup variables for set/kill "AR" cross-reference in File 69, when results available
"RTN","LRXREF",44,0)
 S LRDT=$E(X,1,7),LRLLOC=$E($P(^LRO(69,DA(1),1,DA,0),U,7),1,20)
"RTN","LRXREF",45,0)
 S LRDFN=$P(^(0),U),LRDPF=$P(^LR(LRDFN,0),U,2),DFN=$P(^(0),U,3)
"RTN","LRXREF",46,0)
 S LRGN=$$GET1^DID(+LRDPF,"","","GLOBAL NAME")_DFN_",0)"
"RTN","LRXREF",47,0)
 S LRGN=$S($D(@LRGN):@LRGN,1:"") S LRPNM=$P(LRGN,U)
"RTN","LRXREF",48,0)
 Q
"RTN","LRXREF",49,0)
 ;
"RTN","LRXREF",50,0)
 ;
"RTN","LRXREF",51,0)
AR2 ; Build "AR" cross-reference in File 69, when results available
"RTN","LRXREF",52,0)
 N LRDT,LRGN,LRDFN,LRLLOC,LRPNM
"RTN","LRXREF",53,0)
 D AR1
"RTN","LRXREF",54,0)
 S ^LRO(69,LRDT,1,"AR",LRLLOC,LRPNM,LRDFN)=""
"RTN","LRXREF",55,0)
 Q
"RTN","LRXREF",56,0)
 ;
"RTN","LRXREF",57,0)
 ;
"RTN","LRXREF",58,0)
AR3 ; Kill "AR" cross-reference in File 69, when results available
"RTN","LRXREF",59,0)
 N LRDT,LRGN,LRDFN,LRLLOC,LRPNM
"RTN","LRXREF",60,0)
 D AR1
"RTN","LRXREF",61,0)
 K ^LRO(69,LRDT,1,"AR",LRLLOC,LRPNM,LRDFN)
"RTN","LRXREF",62,0)
 Q
"RTN","LRXREF",63,0)
 ;
"RTN","LRXREF",64,0)
 ;
"RTN","LRXREF",65,0)
LRKILL ; This cross-reference will be reset when the cumulative runs.  Due to the complexity of the cumulative reporting it was felt that
"RTN","LRXREF",66,0)
 ; it was better to have reprinted data rather than possibly having some data not printed at all.
"RTN","LRXREF",67,0)
 K ^LAC("LRKILL")
"RTN","LRXREF",68,0)
 Q
"RTN","LRXREF",69,0)
 ;
"RTN","LRXREF",70,0)
 ;
"RTN","LRXREF",71,0)
AP ; Setup variables for set/kill "AP" cross-reference in File 69, when results available
"RTN","LRXREF",72,0)
 S LRDATE=$P($P(^LRO(69,DA(1),1,DA,3),U),".")
"RTN","LRXREF",73,0)
 ;;*
"RTN","LRXREF",74,0)
 S LRPHY=+$P(^LRO(69,DA(1),1,DA,0),U,6)
"RTN","LRXREF",75,0)
 S LRPHY=$S($D(^VA(200,LRPHY,0)):$E($P(^(0),U),1,20),1:"UNK")
"RTN","LRXREF",76,0)
 ;;;*
"RTN","LRXREF",77,0)
 S LRDFN=$P(^LRO(69,DA(1),1,DA,0),U),LRDPF=$P(^LR(LRDFN,0),U,2),DFN=$P(^(0),U,3)
"RTN","LRXREF",78,0)
 S LRGN=$$GET1^DID(+LRDPF,"","","GLOBAL NAME")_DFN_",0)"
"RTN","LRXREF",79,0)
 S LRGN=$S($D(@LRGN):@LRGN,1:""),LRPNM=$P(LRGN,U)
"RTN","LRXREF",80,0)
 Q
"RTN","LRXREF",81,0)
 ;
"RTN","LRXREF",82,0)
 ;
"RTN","LRXREF",83,0)
AP1 ; Build "AP" cross-reference in File 69, when results available
"RTN","LRXREF",84,0)
 N LRDATE,LRPHY,LRPNM,LRDFN,LRGN,LRDPF,DFN
"RTN","LRXREF",85,0)
 D AP
"RTN","LRXREF",86,0)
 S ^LRO(69,LRDATE,1,"AP",LRPHY,LRPNM,LRDFN)=""
"RTN","LRXREF",87,0)
 Q
"RTN","LRXREF",88,0)
 ;
"RTN","LRXREF",89,0)
 ;
"RTN","LRXREF",90,0)
AP2 ; Kill "AP" cross-reference in File 69, when results available
"RTN","LRXREF",91,0)
 N LRDATE,LRPHY,LRPNM,LRDFN,LRGN,LRDPF,DFN
"RTN","LRXREF",92,0)
 D AP
"RTN","LRXREF",93,0)
 K ^LRO(69,LRDATE,1,"AP",LRPHY,LRPNM,LRDFN)
"RTN","LRXREF",94,0)
 Q
"RTN","LRXREF",95,0)
 ;
"RTN","LRXREF",96,0)
 ;
"RTN","LRXREF",97,0)
AL ; Setup variables for set/kill "AL" cross-reference in File 69, when results available
"RTN","LRXREF",98,0)
 S LRDATE=$P($P(^LRO(69,DA(1),1,DA,3),U),"."),LRDFN=$P(^LRO(69,DA(1),1,DA,0),U),LRDPF=$P(^LR(LRDFN,0),U,2),DFN=$P(^(0),U,3)
"RTN","LRXREF",99,0)
 S LRGN=$$GET1^DID(+LRDPF,"","","GLOBAL NAME")_DFN_",0)"
"RTN","LRXREF",100,0)
 S LRGN=$S($D(@LRGN):@LRGN,1:"") S LRPNM=$P(LRGN,U)
"RTN","LRXREF",101,0)
 S LRLLOC=$E($P(^LRO(69,DA(1),1,DA,0),U,7),1,20)
"RTN","LRXREF",102,0)
 Q
"RTN","LRXREF",103,0)
 ;
"RTN","LRXREF",104,0)
 ;
"RTN","LRXREF",105,0)
AL1 ; Build "AL" cross-reference in File 69, when results available
"RTN","LRXREF",106,0)
 N LRDATE,LRPNM,LRDFN,LRGN,LRDPF,DFN,LRLLOC
"RTN","LRXREF",107,0)
 D AL
"RTN","LRXREF",108,0)
 S ^LRO(69,LRDATE,1,"AL",LRLLOC,LRPNM,LRDFN)=""
"RTN","LRXREF",109,0)
 Q
"RTN","LRXREF",110,0)
 ;
"RTN","LRXREF",111,0)
 ;
"RTN","LRXREF",112,0)
AL2 ; Kill "AL" cross-reference in File 69, when results available
"RTN","LRXREF",113,0)
 N LRDATE,LRPNM,LRDFN,LRGN,LRDPF,DFN,LRLLOC
"RTN","LRXREF",114,0)
 D AL
"RTN","LRXREF",115,0)
 K ^LRO(69,LRDATE,1,"AL",LRLLOC,LRPNM,LRDFN)
"RTN","LRXREF",116,0)
 Q
"RTN","LRXREF",117,0)
 ;
"RTN","LRXREF",118,0)
 ;
"RTN","LRXREF",119,0)
UP ; Convert lower to upper case.
"RTN","LRXREF",120,0)
 S X=$$UP^XLFSTR(X)
"RTN","LRXREF",121,0)
 Q
"RTN","LRXREF",122,0)
 ;
"RTN","LRXREF",123,0)
 ;
"RTN","LRXREF",124,0)
TRIG ; Trigger LAB Workload
"RTN","LRXREF",125,0)
 ; Stuff the Cap Code Name into field .03 of field 4 of field 1 of field 1 of ^LRO(67.9 LAB MONTHLY WORKLOAD
"RTN","LRXREF",126,0)
 S X=$P($G(^LAM($O(^LAM("E",$P(^LRO(67.9,DA(3),1,DA(2),1,DA(1),1,DA,0),U),0)),0)),U)
"RTN","LRXREF",127,0)
 Q
"RTN","LRXREF",128,0)
 ;
"RTN","LRXREF",129,0)
 ;
"RTN","LRXREF",130,0)
TRIGTS ; Trigger to stuff treating specialty name into .03 field of ^DD(67.91148
"RTN","LRXREF",131,0)
 S X=$P($G(^DIC(42.4,+$P($G(^LRO(67.9,DA(4),1,DA(3),1,DA(2),1,DA(1),1,DA,0)),U),0)),U) S:'$L(X) X="AMBULATORY CARE"
"RTN","LRXREF",132,0)
 Q
"RTN","LRXREF",133,0)
 ;
"RTN","LRXREF",134,0)
 ;
"RTN","LRXREF",135,0)
TRIG9 ; Trigger for LAB Workload
"RTN","LRXREF",136,0)
 ; Stuff the Cap Code Name into field .03 of field 4 of field 1 of field 1 of ^LRO(67.99999 ARCHIVED LAB MONTHLY WORKLOAD
"RTN","LRXREF",137,0)
 S X=$P($G(^LAM($O(^LAM("E",$P(^LRO(67.99999,DA(3),1,DA(2),1,DA(1),1,DA,0),U),0)),0)),U)
"RTN","LRXREF",138,0)
 Q
"RTN","LRXREF",139,0)
 ;
"RTN","LRXREF",140,0)
 ;
"RTN","LRXREF",141,0)
TRIGTS9 ; Trigger to stuff treating specialty name into .03 field of ^DD(67.999991148
"RTN","LRXREF",142,0)
 S X=$P($G(^DIC(42.4,+$P($G(^LRO(67.99999,DA(4),1,DA(3),1,DA(2),1,DA(1),1,DA,0)),U),0)),U) S:'$L(X) X="AMBULATORY CARE"
"RTN","LRXREF",143,0)
 Q
"RTN","LRXREF",144,0)
 ;
"RTN","LRXREF",145,0)
 ;
"RTN","LRXREF",146,0)
LAM185 ; Trigger logic to set TYPE(#5) of CODE (#18) of WKLD CODE (#64)
"RTN","LRXREF",147,0)
 N %1
"RTN","LRXREF",148,0)
 S %1=$P(X,";",2),X=$S(%1="ICPT(":"CPT",%1="LAB(61.1,":"SNO",%1="ICD9(":"ICD",1:"NOS")
"RTN","LRXREF",149,0)
 Q
"RTN","LRXREF",150,0)
 ;
"RTN","LRXREF",151,0)
 ;
"RTN","LRXREF",152,0)
SCTCHK(LRSCT,LR612,LRSCT1) ;
"RTN","LRXREF",153,0)
 ; File #61.2 SNOMEDCT field check - Coded to work within FM DD calls
"RTN","LRXREF",154,0)
 ; Inputs
"RTN","LRXREF",155,0)
 ;   LRSCT : SNOMED CT code
"RTN","LRXREF",156,0)
 ;   LR612 : File #61.2 IEN
"RTN","LRXREF",157,0)
 ;  LRSCT1 : <opt>"old" value of SNOMED CT ID field
"RTN","LRXREF",158,0)
 ; Output
"RTN","LRXREF",159,0)
 ;    1 = OK to add code
"RTN","LRXREF",160,0)
 ;   -1 = SCT code not valid
"RTN","LRXREF",161,0)
 ;
"RTN","LRXREF",162,0)
 N LRSTAT,LRX,LRCNT,LRT
"RTN","LRXREF",163,0)
 S LRT=$T ;save $T
"RTN","LRXREF",164,0)
 S LRSCT=$G(LRSCT),LRSCT1=$G(LRSCT1),LR612=+$G(LR612),LRSTAT=1
"RTN","LRXREF",165,0)
 Q:LRSCT="" 1
"RTN","LRXREF",166,0)
 Q:$G(LR612F20)=1 1
"RTN","LRXREF",167,0)
 S LRX=$$CODE^LRSCT(LRSCT,"SCT")
"RTN","LRXREF",168,0)
 ; invalid SCT
"RTN","LRXREF",169,0)
 S:+LRX=-1 LRSTAT=-1
"RTN","LRXREF",170,0)
 ;
"RTN","LRXREF",171,0)
 I LRT ;reset $T
"RTN","LRXREF",172,0)
 Q LRSTAT
"RTN","LRXREF",173,0)
 ;
"RTN","LRXREF",174,0)
 ;
"RTN","LRXREF",175,0)
DELSCT(LR612) ;
"RTN","LRXREF",176,0)
 ; Delete File #61.2 field 20 (SNOMED CT ID) - For use within FM DD calls and SCTCHK API
"RTN","LRXREF",177,0)
 N DA,DI,DIC,DIERR,X,Y,LRFDA,LRMSG,LRT
"RTN","LRXREF",178,0)
 S LRT=$T
"RTN","LRXREF",179,0)
 S LR612=+$G(LR612)
"RTN","LRXREF",180,0)
 S LRFDA(1,61.2,LR612_",",20)="@"
"RTN","LRXREF",181,0)
 D FILE^DIE("I","LRFDA(1)","LRMSG")
"RTN","LRXREF",182,0)
 I LRT ;reset $T
"RTN","LRXREF",183,0)
 Q
"RTN","LRXREF",184,0)
 ;
"RTN","LRXREF",185,0)
 ;
"RTN","LRXREF",186,0)
IT61F20 ; Input transform for file #61, field 20
"RTN","LRXREF",187,0)
 ; $C(32) tricks EN^DDIOL to not insert a linefeed
"RTN","LRXREF",188,0)
 ;
"RTN","LRXREF",189,0)
 ;ZEXCEPT: DIUTIL,LRFMERTS,X
"RTN","LRXREF",190,0)
 ;
"RTN","LRXREF",191,0)
 N LROUT,LRSTATUS
"RTN","LRXREF",192,0)
 ;
"RTN","LRXREF",193,0)
 Q:$G(X)=""
"RTN","LRXREF",194,0)
 ;
"RTN","LRXREF",195,0)
 ; Check if SCT ID is valid
"RTN","LRXREF",196,0)
 S LRSTATUS=$$CODE^LEXTRAN(X,"SCT",DT,"LROUT")
"RTN","LRXREF",197,0)
 I LRSTATUS<1 K X
"RTN","LRXREF",198,0)
 ;
"RTN","LRXREF",199,0)
 ; Display term if not "quiet" or via FileMan Verify Fields option
"RTN","LRXREF",200,0)
 I '$$ISQUIET(),$G(DIUTIL)'="VERIFY FIELDS" D
"RTN","LRXREF",201,0)
 . I $G(LROUT("F"))'="" D EN^DDIOL(LROUT("F"),"","$C(32)")
"RTN","LRXREF",202,0)
 . I LRSTATUS<1 D EN^DDIOL("  "_$P(LRSTATUS,"^",2),"","$C(32)")
"RTN","LRXREF",203,0)
 ;
"RTN","LRXREF",204,0)
 ; If not FileMan Verify Fields and not editing via lab software then kill X to lock down local edits.
"RTN","LRXREF",205,0)
 I $D(X),$G(DIUTIL)'="VERIFY FIELDS",'$G(LRFMERTS) K X
"RTN","LRXREF",206,0)
 ;
"RTN","LRXREF",207,0)
 Q
"RTN","LRXREF",208,0)
 ;
"RTN","LRXREF",209,0)
 ;
"RTN","LRXREF",210,0)
IT612F20 ; Input Transform for File #61.2 field 20
"RTN","LRXREF",211,0)
 ; $C(32) tricks EN^DDIOL to not insert a linefeed
"RTN","LRXREF",212,0)
 ;
"RTN","LRXREF",213,0)
 ;ZEXCEPT: DA,DIUTIL,LRFMERTS,X,Y
"RTN","LRXREF",214,0)
 ;
"RTN","LRXREF",215,0)
 N LRX,LRT
"RTN","LRXREF",216,0)
 ;
"RTN","LRXREF",217,0)
 S LRT=$T ;save $T
"RTN","LRXREF",218,0)
 ;
"RTN","LRXREF",219,0)
 Q:$G(X)=""
"RTN","LRXREF",220,0)
 ;
"RTN","LRXREF",221,0)
 ; Y=Old Value
"RTN","LRXREF",222,0)
 ;  Is this SCT code used in #62.47?
"RTN","LRXREF",223,0)
 I $G(Y)'="",$D(^LAB(62.47,"AF","SCT",Y)) D  Q
"RTN","LRXREF",224,0)
 . K X
"RTN","LRXREF",225,0)
 . I '$$ISQUIET(),$G(DIUTIL)'="VERIFY FIELDS" D EN^DDIOL("**Mapped in File #62.47**",,"$C(32)")
"RTN","LRXREF",226,0)
 . I LRT ; reset $T
"RTN","LRXREF",227,0)
 ;
"RTN","LRXREF",228,0)
 Q:+$G(DA)<1
"RTN","LRXREF",229,0)
 S LRX=$$SCTCHK(X,DA,$G(Y))
"RTN","LRXREF",230,0)
 ;
"RTN","LRXREF",231,0)
 I +LRX=-1 D
"RTN","LRXREF",232,0)
 . K X
"RTN","LRXREF",233,0)
 . I '$$ISQUIET(),$G(DIUTIL)'="VERIFY FIELDS" D EN^DDIOL("**Invalid SCT code**",,"$C(32)")
"RTN","LRXREF",234,0)
 ;
"RTN","LRXREF",235,0)
 ; If not FileMan Verify Fields and not editing via lab software then kill X to lock down local edits.
"RTN","LRXREF",236,0)
 I $D(X),$G(DIUTIL)'="VERIFY FIELDS",'$G(LRFMERTS) K X
"RTN","LRXREF",237,0)
 ;
"RTN","LRXREF",238,0)
 I LRT ; reset $T
"RTN","LRXREF",239,0)
 Q
"RTN","LRXREF",240,0)
 ;
"RTN","LRXREF",241,0)
 ;
"RTN","LRXREF",242,0)
IT62F20 ; Input transform for file #62, field 20
"RTN","LRXREF",243,0)
 ; $C(32) tricks EN^DDIOL to not insert a linefeed
"RTN","LRXREF",244,0)
 ;
"RTN","LRXREF",245,0)
 ;ZEXCEPT: DIUTIL,LRFMERTS,X
"RTN","LRXREF",246,0)
 ;
"RTN","LRXREF",247,0)
 N LROUT,LRSTATUS
"RTN","LRXREF",248,0)
 ;
"RTN","LRXREF",249,0)
 Q:$G(X)=""
"RTN","LRXREF",250,0)
 ;
"RTN","LRXREF",251,0)
 ; Check if SCT ID is valid
"RTN","LRXREF",252,0)
 S LRSTATUS=$$CODE^LEXTRAN(X,"SCT",DT,"LROUT")
"RTN","LRXREF",253,0)
 I LRSTATUS<1 K X
"RTN","LRXREF",254,0)
 ;
"RTN","LRXREF",255,0)
 ; Display term if not "quiet" or via FileMan Verify Fields option
"RTN","LRXREF",256,0)
 I '$$ISQUIET(),$G(DIUTIL)'="VERIFY FIELDS" D
"RTN","LRXREF",257,0)
 . I $G(LROUT("F"))'="" D EN^DDIOL(LROUT("F"),"","$C(32)")
"RTN","LRXREF",258,0)
 . I LRSTATUS<1 D EN^DDIOL("  "_$P(LRSTATUS,"^",2),"","$C(32)")
"RTN","LRXREF",259,0)
 ;
"RTN","LRXREF",260,0)
 ; If not FileMan Verify Fields and not editing via lab software then kill X to lock down local edits.
"RTN","LRXREF",261,0)
 I $D(X),$G(DIUTIL)'="VERIFY FIELDS",'$G(LRFMERTS) K X
"RTN","LRXREF",262,0)
 ;
"RTN","LRXREF",263,0)
 Q
"RTN","LRXREF",264,0)
 ;
"RTN","LRXREF",265,0)
 ;
"RTN","LRXREF",266,0)
ISQUIET() ;
"RTN","LRXREF",267,0)
 ; Is "Quiet" or not (Should we Write output?)
"RTN","LRXREF",268,0)
 N QUIET
"RTN","LRXREF",269,0)
 S QUIET=0
"RTN","LRXREF",270,0)
 S:$G(LRQUIET) QUIET=1
"RTN","LRXREF",271,0)
 S:$G(DIQUIET) QUIET=1
"RTN","LRXREF",272,0)
 Q QUIET
"RTN","LRXREF",273,0)
 ;
"RTN","LRXREF",274,0)
 ;
"RTN","LRXREF",275,0)
SETISOID(LRSUB) ;
"RTN","LRXREF",276,0)
 ; Called from #63.05 fields Cross reference
"RTN","LRXREF",277,0)
 ; Create and stuff ISOLATE ID when .01 field entered
"RTN","LRXREF",278,0)
 ; Inputs
"RTN","LRXREF",279,0)
 ;  LRSUB : The global subscript for this isolate
"RTN","LRXREF",280,0)
 ;
"RTN","LRXREF",281,0)
 N LRFDA,LRMSG,LRIENS,LRX,LRSUBFL
"RTN","LRXREF",282,0)
 S LRSUB=$G(LRSUB)
"RTN","LRXREF",283,0)
 Q:'$G(DA)
"RTN","LRXREF",284,0)
 S LRSUBFL=0
"RTN","LRXREF",285,0)
 I LRSUB=3 S LRSUBFL=63.3
"RTN","LRXREF",286,0)
 I LRSUB=6 S LRSUBFL=63.34
"RTN","LRXREF",287,0)
 I LRSUB=9 S LRSUBFL=63.37
"RTN","LRXREF",288,0)
 I LRSUB=12 S LRSUBFL=63.39
"RTN","LRXREF",289,0)
 I LRSUB=17 S LRSUBFL=63.43
"RTN","LRXREF",290,0)
 Q:'LRSUBFL
"RTN","LRXREF",291,0)
 ;
"RTN","LRXREF",292,0)
 ; build IENS
"RTN","LRXREF",293,0)
 S LRIENS=$$IENS^DILF(.DA)
"RTN","LRXREF",294,0)
 S LRX=$$MAKEISO^LRVRMI1(+$$KSP^XUPARAM("INST"),LRSUB_"-"_DA)
"RTN","LRXREF",295,0)
 S LRFDA(1,LRSUBFL,LRIENS,.1)=LRX
"RTN","LRXREF",296,0)
 D  ;
"RTN","LRXREF",297,0)
 . N DA,X,Y,X1,X2,DIE,DIC,DIERR
"RTN","LRXREF",298,0)
 . D FILE^DIE("","LRFDA(1)","LRMSG")
"RTN","LRXREF",299,0)
 Q
"RTN","LRXREF",300,0)
 ;
"RTN","LRXREF",301,0)
 ;
"RTN","LRXREF",302,0)
IT600201 ;
"RTN","LRXREF",303,0)
 ; Input Transform for Sub-File #60.02 field #.01
"RTN","LRXREF",304,0)
 ; Expects X (#60 IEN of test being added to panel) and DA array -- DA(1)=^LAB(60,IEN)  DA=^LAB(60,DA(1),2,DA)
"RTN","LRXREF",305,0)
 I $P(^LAB(60,DA(1),0),U,5)'="" D  Q  ;
"RTN","LRXREF",306,0)
 . K X
"RTN","LRXREF",307,0)
 . D EN^DDIOL("NO CAN DO",,"!")
"RTN","LRXREF",308,0)
 ;
"RTN","LRXREF",309,0)
 Q:$G(DIUTIL)="VERIFY FIELDS"
"RTN","LRXREF",310,0)
 I X=DA(1) D  Q  ;
"RTN","LRXREF",311,0)
 . K X
"RTN","LRXREF",312,0)
 . D EN^DDIOL("CAN'T ADD TEST TO ITSELF",,"!,$C(7)")
"RTN","LRXREF",313,0)
 ;
"RTN","LRXREF",314,0)
 Q:'$D(X)
"RTN","LRXREF",315,0)
 ; Check for recursive panel entries
"RTN","LRXREF",316,0)
 N LRRECUR,LR60C,LR60P
"RTN","LRXREF",317,0)
 S LR60C=X ;child
"RTN","LRXREF",318,0)
 S LR60P=DA(1) ;parent
"RTN","LRXREF",319,0)
 ; If they're both panels then check for recursion
"RTN","LRXREF",320,0)
 I $O(^LAB(60,LR60C,2,0)) I $O(^LAB(60,LR60P,2,0)) D  ;
"RTN","LRXREF",321,0)
 . K ^TMP($J,"LRXREF-PANELCHK")
"RTN","LRXREF",322,0)
 . S ^TMP($J,"LRXREF-PANELCHK",LR60C)=""
"RTN","LRXREF",323,0)
 . S ^TMP($J,"LRXREF-PANELCHK",LR60P)=""
"RTN","LRXREF",324,0)
 . S LRRECUR=0
"RTN","LRXREF",325,0)
 . D PANELCHK(LR60P,.LRRECUR) ;check parent
"RTN","LRXREF",326,0)
 . I 'LRRECUR D PANELCHK(LR60C,.LRRECUR) ;check the one we're adding
"RTN","LRXREF",327,0)
 . K ^TMP($J,"LRXREF-PANELCHK")
"RTN","LRXREF",328,0)
 . I LRRECUR D  Q  ;
"RTN","LRXREF",329,0)
 . . K X
"RTN","LRXREF",330,0)
 . . D EN^DDIOL("RECURSION DETECTED -- TEST NOT ADDED",,"!,$C(7)")
"RTN","LRXREF",331,0)
 . ;
"RTN","LRXREF",332,0)
 Q
"RTN","LRXREF",333,0)
 ;
"RTN","LRXREF",334,0)
 ;
"RTN","LRXREF",335,0)
PANELCHK(LR60,LRRECUR) ;
"RTN","LRXREF",336,0)
 ; Private method for IT600201 above
"RTN","LRXREF",337,0)
 ; This is a recursive method.
"RTN","LRXREF",338,0)
 ; Called from DD (Input Transform). Must be FileMan safe.
"RTN","LRXREF",339,0)
 ; Caller must kill ^TMP($J,"LRXREF-PANELCHK") before
"RTN","LRXREF",340,0)
 ; first call and after last call.  Parent and Child panel tests
"RTN","LRXREF",341,0)
 ; should be added to ^TMP($J,"LRXREF-PANELCHK",IEN) before calling:
"RTN","LRXREF",342,0)
 ;  I $O(^LAB(60,IEN,2,0)) S ^TMP($J,"LRXREF-PANELCHK",IEN)=""
"RTN","LRXREF",343,0)
 ;
"RTN","LRXREF",344,0)
 ; Inputs
"RTN","LRXREF",345,0)
 ;     LR60: #60 IEN of panel
"RTN","LRXREF",346,0)
 ;  LRRECUR: <byref> See Outputs
"RTN","LRXREF",347,0)
 ;
"RTN","LRXREF",348,0)
 ; Outputs
"RTN","LRXREF",349,0)
 ;  LRRECUR: 1=recursion found   0=no recursion
"RTN","LRXREF",350,0)
 ;  LRRECUR(1): The parent #60 IEN and child #60 IEN that
"RTN","LRXREF",351,0)
 ;              caused the recursion.
"RTN","LRXREF",352,0)
 ;
"RTN","LRXREF",353,0)
 N LR60B,LR6002,LRDATA,DA,X
"RTN","LRXREF",354,0)
 S LR60=$G(LR60)
"RTN","LRXREF",355,0)
 S LRRECUR=$G(LRRECUR,0)
"RTN","LRXREF",356,0)
 Q:LRRECUR
"RTN","LRXREF",357,0)
 S LR6002=0
"RTN","LRXREF",358,0)
 F  S LR6002=$O(^LAB(60,LR60,2,LR6002)) Q:'LR6002  D  Q:LRRECUR  ;
"RTN","LRXREF",359,0)
 . S LR60B=LR60
"RTN","LRXREF",360,0)
 . S LRDATA=^LAB(60,LR60,2,LR6002,0)
"RTN","LRXREF",361,0)
 . N LR60
"RTN","LRXREF",362,0)
 . S LR60=$P(LRDATA,U,1)
"RTN","LRXREF",363,0)
 . Q:'LR60
"RTN","LRXREF",364,0)
 . Q:'$O(^LAB(60,LR60,2,0))  ;not a panel test
"RTN","LRXREF",365,0)
 . I $D(^TMP($J,"LRXREF-PANELCHK",LR60)) D  Q  ;
"RTN","LRXREF",366,0)
 . . S LRRECUR=1
"RTN","LRXREF",367,0)
 . . S LRRECUR(1)=LR60B_"^"_LR60
"RTN","LRXREF",368,0)
 . ;
"RTN","LRXREF",369,0)
 . S ^TMP($J,"LRXREF-PANELCHK",LR60)=""
"RTN","LRXREF",370,0)
 . D PANELCHK(LR60,.LRRECUR) ;recursive call
"RTN","LRXREF",371,0)
 ;
"RTN","LRXREF",372,0)
 Q
"SEC","^DIC",69.73,69.73,0,"AUDIT")
@
"SEC","^DIC",69.73,69.73,0,"DD")
@
"VER")
8.0^22.2
"^DD",69.73,69.73,0)
FIELD^^.03^7
"^DD",69.73,69.73,0,"DDA")
N
"^DD",69.73,69.73,0,"DT")
3170104
"^DD",69.73,69.73,0,"IX","B",69.73,.01)

"^DD",69.73,69.73,0,"NM","LR AP DIALOG CONFIG")

"^DD",69.73,69.73,0,"VRPK")
LR
"^DD",69.73,69.73,.01,0)
ORDERABLE ITEM^R*P101.43'X^ORD(101.43,^0;1^S DIC("S")="I ""^SP^CY^EM^""[(U_$P($G(^(""LR"")),U,6)_U)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",69.73,69.73,.01,1,0)
^.1
"^DD",69.73,69.73,.01,1,1,0)
69.73^B
"^DD",69.73,69.73,.01,1,1,1)
S ^LAB(69.73,"B",$E(X,1,30),DA)=""
"^DD",69.73,69.73,.01,1,1,2)
K ^LAB(69.73,"B",$E(X,1,30),DA)
"^DD",69.73,69.73,.01,3)
Select an orderable item associated with a surgical pathology, cytology, or electron microscopy type lab test.
"^DD",69.73,69.73,.01,12)
Only orderable items associated with a surgical pathology, cytology, or electron microscopy type lab test.
"^DD",69.73,69.73,.01,12.1)
S DIC("S")="I ""^SP^CY^EM^""[(U_$P($G(^(""LR"")),U,6)_U)"
"^DD",69.73,69.73,.01,21,0)
^^3^3^3170210^
"^DD",69.73,69.73,.01,21,1,0)
This is the laboratory orderable item defined by the screen as being 
"^DD",69.73,69.73,.01,21,2,0)
associated with a surgical pathology, cytology, or electron microscopy 
"^DD",69.73,69.73,.01,21,3,0)
lab test.
"^DD",69.73,69.73,.01,"DT")
3161219
"^DD",69.73,69.73,.02,0)
ALLOW OTHER SPECIMENS^S^0:FALSE;1:TRUE;^0;2^Q
"^DD",69.73,69.73,.02,3)
Select TRUE to allow users to enter any specimen for this orderable item configuration.
"^DD",69.73,69.73,.02,21,0)
^^5^5^3161020^
"^DD",69.73,69.73,.02,21,1,0)
By allowing the item of 'OTHER' to display as a choice in the specimen 
"^DD",69.73,69.73,.02,21,2,0)
selection you will be allowing the user to select any entry from file 61 
"^DD",69.73,69.73,.02,21,3,0)
as a specimen for the selected orderable item. If there are no default 
"^DD",69.73,69.73,.02,21,4,0)
specimens configured then 'OTHER' will display regardless of the value 
"^DD",69.73,69.73,.02,21,5,0)
stored here.
"^DD",69.73,69.73,.02,"DT")
3160210
"^DD",69.73,69.73,.03,0)
RESTRICT MULTIPLE SPECIMEN^S^0:FALSE;1:TRUE;^0;3^Q
"^DD",69.73,69.73,.03,3)
For multi specimen orders select TRUE to force the user in selecting multiple specimens of the same specimen.
"^DD",69.73,69.73,.03,21,0)
^^9^9^3161021^
"^DD",69.73,69.73,.03,21,1,0)
When an orderable item is assigned multiple specimens it will, when this 
"^DD",69.73,69.73,.03,21,2,0)
field is true, hide all other specimens when the user selects one 
"^DD",69.73,69.73,.03,21,3,0)
specimen from the list. When this happens the down arrow for the combobox 
"^DD",69.73,69.73,.03,21,4,0)
in the GUI is changed to a plus sign "+" meaning that the user can only 
"^DD",69.73,69.73,.03,21,5,0)
add a duplicate specimen to the order rather than the others in this 
"^DD",69.73,69.73,.03,21,6,0)
configuration. In order to change the currently selected specimen 
"^DD",69.73,69.73,.03,21,7,0)
the user would need to delete all selections. Likewise, when this field 
"^DD",69.73,69.73,.03,21,8,0)
is not set the user will be allowed to associate all configured specimens 
"^DD",69.73,69.73,.03,21,9,0)
with their order.
"^DD",69.73,69.73,.03,"DT")
3160624
"^DD",69.73,69.73,1,0)
ORDER PROMPTS^69.731S^^1;0
"^DD",69.73,69.73,1,21,0)
^^2^2^3161020^
"^DD",69.73,69.73,1,21,1,0)
Order Prompts refer to fields originally part of the Laboratory Order 
"^DD",69.73,69.73,1,21,2,0)
Dialog and have logic associated to them outside of AP.
"^DD",69.73,69.73,1,"DT")
3160210
"^DD",69.73,69.73,2,0)
PAGES^69.732^^2;0
"^DD",69.73,69.73,2,21,0)
^^5^5^3161020^
"^DD",69.73,69.73,2,21,1,0)
A page represents a word processing field for the order. Each page must 
"^DD",69.73,69.73,2,21,2,0)
be labeled (PAGE NAME) and have a RESPONSE ID. If no additional 
"^DD",69.73,69.73,2,21,3,0)
configuration is provided then it will just be a word processing field; 
"^DD",69.73,69.73,2,21,4,0)
otherwise, builder blocks can be created to assist with populating the 
"^DD",69.73,69.73,2,21,5,0)
word processing field.
"^DD",69.73,69.73,3,0)
SPECIMEN^69.733P^^3;0
"^DD",69.73,69.73,3,21,0)
^^6^6^3161021^
"^DD",69.73,69.73,3,21,1,0)
When a specimen is added here you will be able to add builder blocks to 
"^DD",69.73,69.73,3,21,2,0)
it to assist the user in creating a specimen description. These specimen 
"^DD",69.73,69.73,3,21,3,0)
will be the only specimen selectable for this order unless 'Other' has 
"^DD",69.73,69.73,3,21,4,0)
been allowed. Additionally, if there are no specimen here then the user 
"^DD",69.73,69.73,3,21,5,0)
will be presented with 'Other' in which they can associate any specimen 
"^DD",69.73,69.73,3,21,6,0)
to this orderable item.
"^DD",69.73,69.73,4,0)
PROMPT CHANGE MESSAGE^F^^4;1^K:$L(X)>245!($L(X)<1) X
"^DD",69.73,69.73,4,3)
Type a response of 1-245 characters that will be displayed to the user as a warning message when a specimen builder block is set to change the value of an ORDER PROMPTS control.
"^DD",69.73,69.73,4,21,0)
^.001^9^9^3160729^^
"^DD",69.73,69.73,4,21,1,0)
The 'PROMPT MESSAGE' is displayed when a specimen builder block is set to 
"^DD",69.73,69.73,4,21,2,0)
change an order prompt value. When this happens you have the option to 
"^DD",69.73,69.73,4,21,3,0)
notify the user of this change. There are three values that you will have 
"^DD",69.73,69.73,4,21,4,0)
access to that can be used in your message: cType = the order prompt such 
"^DD",69.73,69.73,4,21,5,0)
as URGENCY, oVal = the value of the order prompt before the change, and 
"^DD",69.73,69.73,4,21,6,0)
nVal = is the value of the order prompt after the change, this value is 
"^DD",69.73,69.73,4,21,7,0)
also provided because it could be that the intended change was 
"^DD",69.73,69.73,4,21,8,0)
unsuccessful, thus nVal <> the value to change to even if it does. You 
"^DD",69.73,69.73,4,21,9,0)
can include line breaks by using characters 13,10.
"^DD",69.73,69.73,4,"DT")
3160225
"^DD",69.73,69.731,0)
ORDER PROMPTS SUB-FIELD^^.04^4
"^DD",69.73,69.731,0,"DT")
3160825
"^DD",69.73,69.731,0,"IX","B",69.731,.01)

"^DD",69.73,69.731,0,"NM","ORDER PROMPTS")

"^DD",69.73,69.731,0,"UP")
69.73
"^DD",69.73,69.731,.01,0)
ORDER PROMPT^MS^OPURG:URGENCY;OPCDT:COLLECTION DATE/TIME;OPSSB:SPECIMEN SUBMITTED BY;OPCTY:COLLECTION TYPE;OPHOF:HOW OFTEN;OPSPH:SURGEON/PHYSICIAN;OPODC:ORDER COMMENT;^0;1^Q
"^DD",69.73,69.731,.01,1,0)
^.1
"^DD",69.73,69.731,.01,1,1,0)
69.731^B
"^DD",69.73,69.731,.01,1,1,1)
S ^LAB(69.73,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",69.73,69.731,.01,1,1,2)
K ^LAB(69.73,DA(1),1,"B",$E(X,1,30),DA)
"^DD",69.73,69.731,.01,3)
Select the dialog control (legacy) in which you wish to apply configuration for.
"^DD",69.73,69.731,.01,21,0)
^^2^2^3161020^
"^DD",69.73,69.731,.01,21,1,0)
Order Prompts refer to fields originally part of the Laboratory Order 
"^DD",69.73,69.731,.01,21,2,0)
Dialog and have logic associated to them outside of AP.
"^DD",69.73,69.731,.01,"DT")
3160825
"^DD",69.73,69.731,.02,0)
HIDE^S^0:FALSE;1:TRUE;^0;2^Q
"^DD",69.73,69.731,.02,3)
Select TRUE to hide the associated control from view which prevents the user from changing the default response. If the associated control is required but not valued it will NOT be hidden.
"^DD",69.73,69.731,.02,21,0)
^.001^3^3^3170104^^
"^DD",69.73,69.731,.02,21,1,0)
If an order prompt is required but hidden and not given a default value 
"^DD",69.73,69.731,.02,21,2,0)
either through here or legacy lab, then it will show regardless of this 
"^DD",69.73,69.731,.02,21,3,0)
setting.
"^DD",69.73,69.731,.02,"DT")
3160108
"^DD",69.73,69.731,.03,0)
REQUIRED^S^0:FALSE;1:TRUE;^0;3^Q
"^DD",69.73,69.731,.03,3)
Select TRUE to make this control required which will prevent an order from being accepted if the associated control is not valued.
"^DD",69.73,69.731,.03,21,0)
^.001^2^2^3161020^^
"^DD",69.73,69.731,.03,21,1,0)
If an order prompt is required it will prevent an order from being 
"^DD",69.73,69.731,.03,21,2,0)
accepted if the associated control is not valued.
"^DD",69.73,69.731,.03,"DT")
3160108
"^DD",69.73,69.731,.04,0)
DEFAULT^F^^0;4^K:$L(X)>20!($L(X)<1) X
"^DD",69.73,69.731,.04,3)
Type a response of 1-20 characters which will be used as the value for the associated control. This value will override any of lab's default responses.
"^DD",69.73,69.731,.04,21,0)
^.001^6^6^3170104^^
"^DD",69.73,69.731,.04,21,1,0)
This value will be used as what would be the user's response if the user 
"^DD",69.73,69.731,.04,21,2,0)
is unable to change it when the associated control is presented to them 
"^DD",69.73,69.731,.04,21,3,0)
(if it is hidden). This value must be appropriate with the prompt, for 
"^DD",69.73,69.731,.04,21,4,0)
example, Specimen Submitted by is a free text control so anything typed 
"^DD",69.73,69.731,.04,21,5,0)
here could be populated in this control; however, a default of NOW for 
"^DD",69.73,69.731,.04,21,6,0)
Urgency would not update the control as NOW is not a lab urgency.
"^DD",69.73,69.731,.04,"DT")
3160204
"^DD",69.73,69.732,0)
PAGES SUB-FIELD^^.06^7
"^DD",69.73,69.732,0,"DT")
3170104
"^DD",69.73,69.732,0,"IX","B",69.732,.01)

"^DD",69.73,69.732,0,"NM","PAGES")

"^DD",69.73,69.732,0,"UP")
69.73
"^DD",69.73,69.732,.01,0)
PAGE#^MNJ1,0X^^0;1^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X S:$D(X) DINUM=X
"^DD",69.73,69.732,.01,1,0)
^.1
"^DD",69.73,69.732,.01,1,1,0)
69.732^B
"^DD",69.73,69.732,.01,1,1,1)
S ^LAB(69.73,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",69.73,69.732,.01,1,1,2)
K ^LAB(69.73,DA(1),2,"B",$E(X,1,30),DA)
"^DD",69.73,69.732,.01,3)
Type a number between 1 and 99, 0 decimal digits. This number does not determine placement within the GUI.
"^DD",69.73,69.732,.01,21,0)
^^2^2^3161020^
"^DD",69.73,69.732,.01,21,1,0)
This is the page number which is used to identify internally this page 
"^DD",69.73,69.732,.01,21,2,0)
configuration.
"^DD",69.73,69.732,.01,"DT")
3160121
"^DD",69.73,69.732,.02,0)
PAGE NAME^F^^0;2^K:$L(X)>50!($L(X)<1) X
"^DD",69.73,69.732,.02,3)
Type a response of 1-50 characters. This value will be used as the tab caption within the GUI.
"^DD",69.73,69.732,.02,21,0)
^^2^2^3161020^
"^DD",69.73,69.732,.02,21,1,0)
This value will be used as the tab caption for this page configuration in 
"^DD",69.73,69.732,.02,21,2,0)
the GUI.
"^DD",69.73,69.732,.02,"DT")
3160121
"^DD",69.73,69.732,.03,0)
HIDE^S^0:FALSE;1:TRUE;^0;3^Q
"^DD",69.73,69.732,.03,3)
Select TRUE to hide a page which saves the configuration but prevents it from being used in the GUI.
"^DD",69.73,69.732,.03,21,0)
^^2^2^3161020^
"^DD",69.73,69.732,.03,21,1,0)
If true then this page will NOT be sent over to the GUI to be rendered 
"^DD",69.73,69.732,.03,21,2,0)
and included in the order.
"^DD",69.73,69.732,.03,"DT")
3160107
"^DD",69.73,69.732,.04,0)
REQUIRED^S^0:FALSE;1:TRUE;^0;4^Q
"^DD",69.73,69.732,.04,3)
Select TRUE to make a page required which will prevent an order from being accepted if left blank.
"^DD",69.73,69.732,.04,21,0)
^^2^2^3161020^
"^DD",69.73,69.732,.04,21,1,0)
If true this page will prevent an order from being accepted if the 
"^DD",69.73,69.732,.04,21,2,0)
associated control(s) (builder block or word processing) is not valued.
"^DD",69.73,69.732,.04,"DT")
3160107
"^DD",69.73,69.732,.05,0)
RESPONSE ID^F^^0;5^K:$L(X)>20!($L(X)<1) X
"^DD",69.73,69.732,.05,3)
Type a response of 1-20 characters that matches an entry in the ORDER DIALOG file ID field.
"^DD",69.73,69.732,.05,21,0)
^.001^3^3^3160729^^
"^DD",69.73,69.732,.05,21,1,0)
Select the ORDER DIALOG this page will be linked to. This ORDER DIALOG 
"^DD",69.73,69.732,.05,21,2,0)
should be a word processing type and must have an ID; otherwise, it 
"^DD",69.73,69.732,.05,21,3,0)
cannot be saved to the order.
"^DD",69.73,69.732,.05,"DT")
3160729
"^DD",69.73,69.732,.06,0)
WP TITLE^FJ30^^0;6^K:$L(X)>30!($L(X)<1) X
"^DD",69.73,69.732,.06,3)
Answer must be 1-30 characters in length.
"^DD",69.73,69.732,.06,21,0)
^.001^2^2^3170104^^
"^DD",69.73,69.732,.06,21,1,0)
This optional value will populate a label presented just above the word 
"^DD",69.73,69.732,.06,21,2,0)
processing field within the page.
"^DD",69.73,69.732,.06,"DT")
3170104
"^DD",69.73,69.732,1,0)
BUILDER BLOCK^69.7321^^1;0
"^DD",69.73,69.732,1,21,0)
^.001^2^2^3170104^^
"^DD",69.73,69.732,1,21,1,0)
This configuration represents an object used to assist the user in 
"^DD",69.73,69.732,1,21,2,0)
populating a free text field.
"^DD",69.73,69.732,1,"DT")
3160121
"^DD",69.73,69.7321,0)
BUILDER BLOCK SUB-FIELD^^1^5
"^DD",69.73,69.7321,0,"DT")
3161213
"^DD",69.73,69.7321,0,"IX","B",69.7321,.01)

"^DD",69.73,69.7321,0,"NM","BUILDER BLOCK")

"^DD",69.73,69.7321,0,"UP")
69.732
"^DD",69.73,69.7321,.01,0)
PG BLOCK TITLE^MF^^0;1^K:$L(X)>50!($L(X)<1) X
"^DD",69.73,69.7321,.01,1,0)
^.1
"^DD",69.73,69.7321,.01,1,1,0)
69.7321^B
"^DD",69.73,69.7321,.01,1,1,1)
S ^LAB(69.73,DA(2),2,DA(1),1,"B",X,DA)=""
"^DD",69.73,69.7321,.01,1,1,2)
K ^LAB(69.73,DA(2),2,DA(1),1,"B",X,DA)
"^DD",69.73,69.7321,.01,3)
Type a response of 1-50 characters that will populate the object's caption.
"^DD",69.73,69.7321,.01,21,0)
^^1^1^3161020^
"^DD",69.73,69.7321,.01,21,1,0)
This value will populate the object's caption.
"^DD",69.73,69.7321,.01,"DT")
3160210
"^DD",69.73,69.7321,.02,0)
REQUIRED^S^0:FALSE;1:TRUE;^0;2^Q
"^DD",69.73,69.7321,.02,3)
Select TRUE to make this object required which will prevent the order from being accepted if not valued.
"^DD",69.73,69.7321,.02,21,0)
^^2^2^3161020^
"^DD",69.73,69.7321,.02,21,1,0)
If true this will prevent an order from being accepted if the object is 
"^DD",69.73,69.7321,.02,21,2,0)
not valued.
"^DD",69.73,69.7321,.02,"DT")
3160107
"^DD",69.73,69.7321,.03,0)
LIST^S^0:FALSE;1:TRUE;^0;3^Q
"^DD",69.73,69.7321,.03,3)
Select TRUE to make this object a list type. A page can only support one list.
"^DD",69.73,69.7321,.03,21,0)
^^2^2^3161020^
"^DD",69.73,69.7321,.03,21,1,0)
If true then this object will be displayed as a multi selectable list 
"^DD",69.73,69.7321,.03,21,2,0)
with checkboxes. Only one object pre page can be a list.
"^DD",69.73,69.7321,.03,"DT")
3160107
"^DD",69.73,69.7321,.04,0)
DEFAULT^FJ150^^0;4^K:$L(X)>150!($L(X)<1) X
"^DD",69.73,69.7321,.04,3)
Type 1 to 150 characters that, if matches a value in the values list, will be auto selected on creation.
"^DD",69.73,69.7321,.04,21,0)
^.001^2^2^3161213^^
"^DD",69.73,69.7321,.04,21,1,0)
This value will be used as what would be the user's response if left 
"^DD",69.73,69.7321,.04,21,2,0)
unchanged.
"^DD",69.73,69.7321,.04,"DT")
3161213
"^DD",69.73,69.7321,1,0)
VALUES^69.73211^^1;0
"^DD",69.73,69.7321,1,21,0)
^^1^1^3161020^
"^DD",69.73,69.7321,1,21,1,0)
These are the possible user selections for this object.
"^DD",69.73,69.73211,0)
VALUES SUB-FIELD^^.04^4
"^DD",69.73,69.73211,0,"DT")
3161213
"^DD",69.73,69.73211,0,"IX","B",69.73211,.01)

"^DD",69.73,69.73211,0,"NM","VALUES")

"^DD",69.73,69.73211,0,"UP")
69.7321
"^DD",69.73,69.73211,.01,0)
VALUE^MFJ150^^0;1^K:$L(X)>150!($L(X)<1) X
"^DD",69.73,69.73211,.01,1,0)
^.1
"^DD",69.73,69.73211,.01,1,1,0)
69.73211^B
"^DD",69.73,69.73211,.01,1,1,1)
S ^LAB(69.73,DA(3),2,DA(2),1,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",69.73,69.73211,.01,1,1,2)
K ^LAB(69.73,DA(3),2,DA(2),1,DA(1),1,"B",$E(X,1,30),DA)
"^DD",69.73,69.73211,.01,3)
Type 1 to 50 characters that will one of the values selectable by the user for this object.
"^DD",69.73,69.73211,.01,21,0)
^.001^5^5^3161213^^
"^DD",69.73,69.73211,.01,21,1,0)
The number of values determine the appearance of the builder block 
"^DD",69.73,69.73211,.01,21,2,0)
element. Having no values will result in a free text edit field being 
"^DD",69.73,69.73211,.01,21,3,0)
created, having 1-3 will create a group of radio buttons (unless those 
"^DD",69.73,69.73211,.01,21,4,0)
values are very long), anything else (more than 3 or long values) will 
"^DD",69.73,69.73211,.01,21,5,0)
result in a dropdown.
"^DD",69.73,69.73211,.01,"DT")
3161213
"^DD",69.73,69.73211,.02,0)
ASSOCIATE WITH^S^D:DATE;E:EDIT;^0;2^Q
"^DD",69.73,69.73211,.02,3)
Select 'D' to associate this value with a date/time picker or 'E' to associated it with a free text field (only works when the control is a radio group).
"^DD",69.73,69.73211,.02,21,0)
^^4^4^3161021^
"^DD",69.73,69.73211,.02,21,1,0)
When a 'D', a date/time control is created and when an 'E', an edit 
"^DD",69.73,69.73211,.02,21,2,0)
control is created. The associated control is linked to the value so when 
"^DD",69.73,69.73211,.02,21,3,0)
the value is selected this control is enabled and when not selected this 
"^DD",69.73,69.73211,.02,21,4,0)
control is cleared and disabled.
"^DD",69.73,69.73211,.02,"DT")
3160120
"^DD",69.73,69.73211,.03,0)
SPECIAL^NJ4,0^^0;3^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",69.73,69.73211,.03,3)
Type a number between 0 and 9999 that equals the IEN of another builder block of this page you wish to be made required when this value for this control is selected.
"^DD",69.73,69.73211,.03,21,0)
^.001^3^3^3161213^^^^
"^DD",69.73,69.73211,.03,21,1,0)
Special allows a value of one element to require another element. So this 
"^DD",69.73,69.73211,.03,21,2,0)
field should be populated with the IEN of the element that needs to be 
"^DD",69.73,69.73211,.03,21,3,0)
made required when this value is selected.
"^DD",69.73,69.73211,.03,"DT")
3161213
"^DD",69.73,69.73211,.04,0)
DATE RESTRICTION^S^PDT:PAST DATE/TIME;FDT:FUTURE DATE/TIME;PD:PAST DATE ONLY;FD:FUTURE DATE ONLY;^0;4^Q
"^DD",69.73,69.73211,.04,3)
Select a code to configure a date/time picker if the ASSOCIATED WITH field for this value equals 'D' and this control is a radio group.
"^DD",69.73,69.73211,.04,21,0)
^^8^8^3160729^
"^DD",69.73,69.73211,.04,21,1,0)
Only valid if the value is associated with a date/time picker. This can 
"^DD",69.73,69.73211,.04,21,2,0)
be used to restrict that associated control to "D" date only or "DT" to 
"^DD",69.73,69.73211,.04,21,3,0)
allow time ("DT" is used if no choice is made) - "DT" does not force 
"^DD",69.73,69.73211,.04,21,4,0)
time, it only allows time.
"^DD",69.73,69.73211,.04,21,5,0)
 
"^DD",69.73,69.73211,.04,21,6,0)
This code also restricts the date range based 
"^DD",69.73,69.73211,.04,21,7,0)
on the first character of the code (P for Past and F for Future), this 
"^DD",69.73,69.73211,.04,21,8,0)
restriction always uses NOW (P = date < NOW and F = date > NOW).
"^DD",69.73,69.73211,.04,"DT")
3160622
"^DD",69.73,69.733,0)
SPECIMEN SUB-FIELD^^.03^6
"^DD",69.73,69.733,0,"DT")
3160802
"^DD",69.73,69.733,0,"IX","B",69.733,.01)

"^DD",69.73,69.733,0,"NM","SPECIMEN")

"^DD",69.73,69.733,0,"UP")
69.73
"^DD",69.73,69.733,.01,0)
SPECIMEN^MP61'X^LAB(61,^0;1^S:$D(X) DINUM=X
"^DD",69.73,69.733,.01,1,0)
^.1^^-1
"^DD",69.73,69.733,.01,1,1,0)
69.733^B
"^DD",69.73,69.733,.01,1,1,1)
S ^LAB(69.73,DA(1),3,"B",$E(X,1,30),DA)=""
"^DD",69.73,69.733,.01,1,1,2)
K ^LAB(69.73,DA(1),3,"B",$E(X,1,30),DA)
"^DD",69.73,69.733,.01,3)
Select a specimen you wish to appear in the specimen dropdown in the order dialog. Only specimen in this list can be configured.
"^DD",69.73,69.733,.01,21,0)
^^6^6^3161021^
"^DD",69.73,69.733,.01,21,1,0)
When a specimen is added here you will be able to add builder blocks to 
"^DD",69.73,69.733,.01,21,2,0)
it to assist the user in creating a specimen description. These specimen 
"^DD",69.73,69.733,.01,21,3,0)
will be the only specimen selectable for this order unless 'Other' has 
"^DD",69.73,69.733,.01,21,4,0)
been allowed. Additionally, if there are no specimen here then the user 
"^DD",69.73,69.733,.01,21,5,0)
will be presented with 'Other' in which they can associate any specimen 
"^DD",69.73,69.733,.01,21,6,0)
to this orderable item.
"^DD",69.73,69.733,.01,"DT")
3160108
"^DD",69.73,69.733,.02,0)
HIDE FROM DESCRIPTION^S^0:FALSE;1:TRUE;^0;2^Q
"^DD",69.73,69.733,.02,3)
Select TRUE if you wish this specimen name to be absent from the specimen description.
"^DD",69.73,69.733,.02,21,0)
^^3^3^3161020^
"^DD",69.73,69.733,.02,21,1,0)
If true then the specimen name will not be added to the specimen 
"^DD",69.73,69.733,.02,21,2,0)
description. The user is still able to type it into the specimen 
"^DD",69.73,69.733,.02,21,3,0)
description if desired.
"^DD",69.73,69.733,.02,"DT")
3160210
"^DD",69.73,69.733,.03,0)
DESCRIPTION POSITION^NJ1,0^^0;3^K:+X'=X!(X>6)!(X<0)!(X?.E1"."1N.N) X
"^DD",69.73,69.733,.03,3)
Select a number between 0-6 to indicate the piece position you wish to have the specimen name appear within the specimen description. 
"^DD",69.73,69.733,.03,21,0)
^^9^9^3161020^
"^DD",69.73,69.733,.03,21,1,0)
The specimen description is broken up into sections with every other 
"^DD",69.73,69.733,.03,21,2,0)
section controlled by an object represented by a specimen multiple. 
"^DD",69.73,69.733,.03,21,3,0)
Therefore, one builder block would result in three sections of the 
"^DD",69.73,69.733,.03,21,4,0)
specimen description (four if the specimen is not hidden) - for each 
"^DD",69.73,69.733,.03,21,5,0)
builder block here is a free text section before and after.
"^DD",69.73,69.733,.03,21,6,0)
 
"^DD",69.73,69.733,.03,21,7,0)
Ignoring free text sections you are choosing the order in which the 
"^DD",69.73,69.733,.03,21,8,0)
specimen name appears in the specimen description among the builder 
"^DD",69.73,69.733,.03,21,9,0)
blocks.
"^DD",69.73,69.733,.03,"DT")
3160802
"^DD",69.73,69.733,1,0)
BUILDER BLOCK^69.7331^^1;0
"^DD",69.73,69.733,1,21,0)
^^7^7^3161020^
"^DD",69.73,69.733,1,21,1,0)
A builder block represents a selection that can be quickly used to 
"^DD",69.73,69.733,1,21,2,0)
populate a portion of the specimen description. You can build up to six 
"^DD",69.73,69.733,1,21,3,0)
of these elements per specimen.  Different specimen for any one orderable 
"^DD",69.73,69.733,1,21,4,0)
item can have different builder elements.  Builder elements will not be 
"^DD",69.73,69.733,1,21,5,0)
carried over to other orderable items using the same specimen. If no 
"^DD",69.73,69.733,1,21,6,0)
builder elements are defined there will still be the free text input that 
"^DD",69.73,69.733,1,21,7,0)
will directly populate the description.
"^DD",69.73,69.733,1,"DT")
3160121
"^DD",69.73,69.733,2.1,0)
COLLECTION SAMPLE HIDE^S^0:FALSE;1:TRUE;^2;1^Q
"^DD",69.73,69.733,2.1,3)
Select TRUE if you wish to hide the collection sample for this specimen. If there is no default value it will not be hidden.
"^DD",69.73,69.733,2.1,21,0)
^^3^3^3161020^
"^DD",69.73,69.733,2.1,21,1,0)
If true then this specimen's collection sample will be hidden which will 
"^DD",69.73,69.733,2.1,21,2,0)
prevent the user from changing the default value. If there is no default 
"^DD",69.73,69.733,2.1,21,3,0)
value the associated control will not be hidden.
"^DD",69.73,69.733,2.1,"DT")
3160210
"^DD",69.73,69.733,2.2,0)
COLLECTION SAMPLE DEFAULT^P62'^LAB(62,^2;2^Q
"^DD",69.73,69.733,2.2,3)
Select the collection sample you wish to apply to this specimen. If hidden the user will be unable to change this value.
"^DD",69.73,69.733,2.2,21,0)
^^3^3^3161020^
"^DD",69.73,69.733,2.2,21,1,0)
This is the value for the collection sample for this specimen. This value 
"^DD",69.73,69.733,2.2,21,2,0)
updates the associated control after legacy lab. If the control is hidden 
"^DD",69.73,69.733,2.2,21,3,0)
the user will be unable to change this value.
"^DD",69.73,69.733,2.2,"DT")
3160210
"^DD",69.73,69.7331,0)
BUILDER BLOCK SUB-FIELD^^.05^6
"^DD",69.73,69.7331,0,"DT")
3160802
"^DD",69.73,69.7331,0,"IX","B",69.7331,.01)

"^DD",69.73,69.7331,0,"NM","BUILDER BLOCK")

"^DD",69.73,69.7331,0,"UP")
69.733
"^DD",69.73,69.7331,.01,0)
SP BLOCK TITLE^MF^^0;1^K:$L(X)>20!($L(X)<1) X
"^DD",69.73,69.7331,.01,1,0)
^.1
"^DD",69.73,69.7331,.01,1,1,0)
69.7331^B
"^DD",69.73,69.7331,.01,1,1,1)
S ^LAB(69.73,DA(2),3,DA(1),1,"B",X,DA)=""
"^DD",69.73,69.7331,.01,1,1,2)
K ^LAB(69.73,DA(2),3,DA(1),1,"B",X,DA)
"^DD",69.73,69.7331,.01,3)
Type 1-20 characters that will appear as this builder element's caption.
"^DD",69.73,69.7331,.01,21,0)
^^7^7^3160802^
"^DD",69.73,69.7331,.01,21,1,0)
A builder block represents a selection that can be quickly used to 
"^DD",69.73,69.7331,.01,21,2,0)
populate a portion of the specimen description. You can build up to six 
"^DD",69.73,69.7331,.01,21,3,0)
of these elements per specimen. Different specimen for any one orderable 
"^DD",69.73,69.7331,.01,21,4,0)
item can have different builder elements. Builder elements will not be 
"^DD",69.73,69.7331,.01,21,5,0)
carried over to other orderable items using the same specimen. If no 
"^DD",69.73,69.7331,.01,21,6,0)
builder elements are defined there will still be the free text input that 
"^DD",69.73,69.7331,.01,21,7,0)
will directly populate the description.
"^DD",69.73,69.7331,.01,"DT")
3160210
"^DD",69.73,69.7331,.02,0)
INACTIVATE^S^0:FALSE;1:TRUE;^0;2^Q
"^DD",69.73,69.7331,.02,3)
Select TRUE to prevent this object from being built within the order dialog.
"^DD",69.73,69.7331,.02,21,0)
^^1^1^3161020^
"^DD",69.73,69.7331,.02,21,1,0)
If true this builder block will not be built within the order dialog.
"^DD",69.73,69.7331,.02,"DT")
3160210
"^DD",69.73,69.7331,.03,0)
REQUIRED^S^0:FALSE;1:TRUE;^0;3^Q
"^DD",69.73,69.7331,.03,3)
Select TRUE to make this object required which will prevent the order from being accepted if left unvalued.
"^DD",69.73,69.7331,.03,21,0)
^^2^2^3161020^
"^DD",69.73,69.7331,.03,21,1,0)
If true this object will prevent an order from being accepted if left 
"^DD",69.73,69.7331,.03,21,2,0)
unvalued.
"^DD",69.73,69.7331,.03,"DT")
3160108
"^DD",69.73,69.7331,.04,0)
DEFAULT^F^^0;4^K:$L(X)>75!($L(X)<1) X
"^DD",69.73,69.7331,.04,3)
Type a response of 1-75 characters which will be used as the user's response if left unchanged.
"^DD",69.73,69.7331,.04,21,0)
^^2^2^3161020^
"^DD",69.73,69.7331,.04,21,1,0)
This value will be used as what would be the user's response if left 
"^DD",69.73,69.7331,.04,21,2,0)
unchanged.
"^DD",69.73,69.7331,.04,"DT")
3160802
"^DD",69.73,69.7331,.05,0)
DESCRIPTION POSITION^NJ1,0^^0;5^K:+X'=X!(X>6)!(X<0)!(X?.E1"."1N.N) X
"^DD",69.73,69.7331,.05,3)
Select a number between 0-6 to indicate the piece position you wish to have this object's value appear within the specimen description.
"^DD",69.73,69.7331,.05,21,0)
^^9^9^3161020^
"^DD",69.73,69.7331,.05,21,1,0)
The specimen description is broken up into sections with every other 
"^DD",69.73,69.7331,.05,21,2,0)
section controlled by an object represented by a specimen multiple. 
"^DD",69.73,69.7331,.05,21,3,0)
Therefore, one builder block would result in three sections of the 
"^DD",69.73,69.7331,.05,21,4,0)
specimen description (four if the specimen is not hidden) - for each 
"^DD",69.73,69.7331,.05,21,5,0)
builder block here is a free text section before and after.
"^DD",69.73,69.7331,.05,21,6,0)
 
"^DD",69.73,69.7331,.05,21,7,0)
Ignoring free text sections you are choosing the order in which this 
"^DD",69.73,69.7331,.05,21,8,0)
object's value appears in the specimen description among other builder 
"^DD",69.73,69.7331,.05,21,9,0)
blocks.
"^DD",69.73,69.7331,.05,"DT")
3160802
"^DD",69.73,69.7331,1,0)
VALUES^69.73311^^1;0
"^DD",69.73,69.7331,1,21,0)
^^1^1^3161020^
"^DD",69.73,69.7331,1,21,1,0)
These are the possible user selections for this object.
"^DD",69.73,69.73311,0)
VALUES SUB-FIELD^^.02^2
"^DD",69.73,69.73311,0,"DT")
3161213
"^DD",69.73,69.73311,0,"IX","B",69.73311,.01)

"^DD",69.73,69.73311,0,"NM","VALUES")

"^DD",69.73,69.73311,0,"UP")
69.7331
"^DD",69.73,69.73311,.01,0)
VALUES^MF^^0;1^K:$L(X)>75!($L(X)<1) X
"^DD",69.73,69.73311,.01,1,0)
^.1
"^DD",69.73,69.73311,.01,1,1,0)
69.73311^B
"^DD",69.73,69.73311,.01,1,1,1)
S ^LAB(69.73,DA(3),3,DA(2),1,DA(1),1,"B",X,DA)=""
"^DD",69.73,69.73311,.01,1,1,2)
K ^LAB(69.73,DA(3),3,DA(2),1,DA(1),1,"B",X,DA)
"^DD",69.73,69.73311,.01,3)
Type 1-75 characters which will appear as a selectable choice for this object.
"^DD",69.73,69.73311,.01,21,0)
^.001^5^5^3161020^^^
"^DD",69.73,69.73311,.01,21,1,0)
The number of values determine the appearance of the builder block 
"^DD",69.73,69.73311,.01,21,2,0)
element. Having no values will result in a free text edit field being 
"^DD",69.73,69.73311,.01,21,3,0)
created, having 1-3 will create a group of radio buttons (unless those 
"^DD",69.73,69.73311,.01,21,4,0)
values are very long), anything else (more than 3 or long values) will 
"^DD",69.73,69.73311,.01,21,5,0)
result in a dropdown.
"^DD",69.73,69.73311,.01,"DT")
3160209
"^DD",69.73,69.73311,.02,0)
SPECIAL^FJ50^^0;2^K:$L(X)>50!($L(X)<1) X
"^DD",69.73,69.73311,.02,3)
Type a coded value of 1 to 50 characters to indicate on selection of this value which order prompt to change and to what value to change it to (example: URG;1).
"^DD",69.73,69.73311,.02,21,0)
^.001^4^4^3161213^^^^
"^DD",69.73,69.73311,.02,21,1,0)
This coded value will be used to select an order prompt and update its 
"^DD",69.73,69.73311,.02,21,2,0)
value when this value is selected. An example of "URG;1" would mean that 
"^DD",69.73,69.73311,.02,21,3,0)
when this value is selected update the Urgency order prompt with a value 
"^DD",69.73,69.73311,.02,21,4,0)
of 1 which is STAT.
"^DD",69.73,69.73311,.02,"DT")
3161213
"^DIC",69.73,69.73,0)
LR AP DIALOG CONFIG^69.73
"^DIC",69.73,69.73,0,"GL")
^LAB(69.73,
"^DIC",69.73,69.73,"%",0)
^1.005^^
"^DIC",69.73,69.73,"%D",0)
^^7^7^3160729^
"^DIC",69.73,69.73,"%D",1,0)
This file contains the information for the configuration of the LR AP 
"^DIC",69.73,69.73,"%D",2,0)
Dialog for CPRS for AP ordering. There is one LR AP Dialog form which can 
"^DIC",69.73,69.73,"%D",3,0)
be reused for any orderable item for AP. This configuration will allow 
"^DIC",69.73,69.73,"%D",4,0)
for control over default values, the ability to find controls/prompts, 
"^DIC",69.73,69.73,"%D",5,0)
and to build prompt assistance elements (builder blocks) that aid the 
"^DIC",69.73,69.73,"%D",6,0)
user in populating the specimen description or word processing fields 
"^DIC",69.73,69.73,"%D",7,0)
such as clinical history.
"^DIC",69.73,"B","LR AP DIALOG CONFIG",69.73)

"BLD",9790,6)
^385
**END**
**END**

