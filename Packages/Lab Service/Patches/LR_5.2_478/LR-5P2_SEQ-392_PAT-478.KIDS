Released LR*5.2*478 SEQ #392
Extracted from mail message
**KIDS**:LR*5.2*478^

**INSTALL NAME**
LR*5.2*478
"BLD",10408,0)
LR*5.2*478^LAB SERVICE^0^3170914^y
"BLD",10408,1,0)
^^9^9^3161201^
"BLD",10408,1,1,0)
This is a general maintenance patch for the laboratory
"BLD",10408,1,2,0)
package by the Vista Maintenance team that addresses an
"BLD",10408,1,3,0)
issue with the search criteria associated with the Howdy
"BLD",10408,1,4,0)
Patient Wait Time report.
"BLD",10408,1,5,0)
 
"BLD",10408,1,6,0)
ASSOCIATED SERVICE DESK TICKET:
"BLD",10408,1,7,0)
==============================
"BLD",10408,1,8,0)
1.      R11469217FY17  -  Entries outside entered search criteria
"BLD",10408,1,9,0)
                          included on Patient Wait Time report
"BLD",10408,4,0)
^9.64PA^^
"BLD",10408,6)
1^
"BLD",10408,6.3)
2
"BLD",10408,"ABPKG")
n
"BLD",10408,"KRN",0)
^9.67PA^779.2^20
"BLD",10408,"KRN",.4,0)
.4
"BLD",10408,"KRN",.401,0)
.401
"BLD",10408,"KRN",.402,0)
.402
"BLD",10408,"KRN",.403,0)
.403
"BLD",10408,"KRN",.5,0)
.5
"BLD",10408,"KRN",.84,0)
.84
"BLD",10408,"KRN",3.6,0)
3.6
"BLD",10408,"KRN",3.8,0)
3.8
"BLD",10408,"KRN",9.2,0)
9.2
"BLD",10408,"KRN",9.8,0)
9.8
"BLD",10408,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10408,"KRN",9.8,"NM",1,0)
LRHY4X^^0^B64243347
"BLD",10408,"KRN",9.8,"NM","B","LRHY4X",1)

"BLD",10408,"KRN",19,0)
19
"BLD",10408,"KRN",19.1,0)
19.1
"BLD",10408,"KRN",101,0)
101
"BLD",10408,"KRN",409.61,0)
409.61
"BLD",10408,"KRN",771,0)
771
"BLD",10408,"KRN",779.2,0)
779.2
"BLD",10408,"KRN",870,0)
870
"BLD",10408,"KRN",8989.51,0)
8989.51
"BLD",10408,"KRN",8989.52,0)
8989.52
"BLD",10408,"KRN",8994,0)
8994
"BLD",10408,"KRN","B",.4,.4)

"BLD",10408,"KRN","B",.401,.401)

"BLD",10408,"KRN","B",.402,.402)

"BLD",10408,"KRN","B",.403,.403)

"BLD",10408,"KRN","B",.5,.5)

"BLD",10408,"KRN","B",.84,.84)

"BLD",10408,"KRN","B",3.6,3.6)

"BLD",10408,"KRN","B",3.8,3.8)

"BLD",10408,"KRN","B",9.2,9.2)

"BLD",10408,"KRN","B",9.8,9.8)

"BLD",10408,"KRN","B",19,19)

"BLD",10408,"KRN","B",19.1,19.1)

"BLD",10408,"KRN","B",101,101)

"BLD",10408,"KRN","B",409.61,409.61)

"BLD",10408,"KRN","B",771,771)

"BLD",10408,"KRN","B",779.2,779.2)

"BLD",10408,"KRN","B",870,870)

"BLD",10408,"KRN","B",8989.51,8989.51)

"BLD",10408,"KRN","B",8989.52,8989.52)

"BLD",10408,"KRN","B",8994,8994)

"BLD",10408,"QUES",0)
^9.62^^
"BLD",10408,"REQB",0)
^9.611^1^1
"BLD",10408,"REQB",1,0)
LR*5.2*430^2
"BLD",10408,"REQB","B","LR*5.2*430",1)

"MBREQ")
0
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,20,0)
^9.402P^1^1
"PKG",26,20,1,0)
2^^LRXDRPT
"PKG",26,20,1,1)

"PKG",26,20,"B",2,1)

"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2950304
"PKG",26,22,1,"PAH",1,0)
478^3170914^33274
"PKG",26,22,1,"PAH",1,1,0)
^^9^9^3170914
"PKG",26,22,1,"PAH",1,1,1,0)
This is a general maintenance patch for the laboratory
"PKG",26,22,1,"PAH",1,1,2,0)
package by the Vista Maintenance team that addresses an
"PKG",26,22,1,"PAH",1,1,3,0)
issue with the search criteria associated with the Howdy
"PKG",26,22,1,"PAH",1,1,4,0)
Patient Wait Time report.
"PKG",26,22,1,"PAH",1,1,5,0)
 
"PKG",26,22,1,"PAH",1,1,6,0)
ASSOCIATED SERVICE DESK TICKET:
"PKG",26,22,1,"PAH",1,1,7,0)
==============================
"PKG",26,22,1,"PAH",1,1,8,0)
1.      R11469217FY17  -  Entries outside entered search criteria
"PKG",26,22,1,"PAH",1,1,9,0)
                          included on Patient Wait Time report
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","LRHY4X")
0^1^B64243347^B64257320
"RTN","LRHY4X",1,0)
LRHY4X ;DALOI/HOAK - PHLEBOTOMY TAT ; 12/1/16 11:20am
"RTN","LRHY4X",2,0)
 ;;5.2;LAB SERVICE;**405,417,430,478**;Sep 27, 1994;Build 2
"RTN","LRHY4X",3,0)
 ;
"RTN","LRHY4X",4,0)
 ;
"RTN","LRHY4X",5,0)
START ;
"RTN","LRHY4X",6,0)
 ;
"RTN","LRHY4X",7,0)
G ;
"RTN","LRHY4X",8,0)
 K ^TMP("LRHYMEDTAT",$J)
"RTN","LRHY4X",9,0)
 ;
"RTN","LRHY4X",10,0)
 K ^TMP("LRHYCOLLECTOR",$J)
"RTN","LRHY4X",11,0)
 ;
"RTN","LRHY4X",12,0)
 K ^TMP("LRHYTATDALLAS",$J)
"RTN","LRHY4X",13,0)
 K LRHYTECH1
"RTN","LRHY4X",14,0)
 K %DT
"RTN","LRHY4X",15,0)
 S %DT="AET"
"RTN","LRHY4X",16,0)
 S %DT("A")="Please enter date and time to start search: "
"RTN","LRHY4X",17,0)
 D ^%DT
"RTN","LRHY4X",18,0)
 Q:Y=-1
"RTN","LRHY4X",19,0)
 S LRSDT=Y
"RTN","LRHY4X",20,0)
 S LRODT=LRSDT
"RTN","LRHY4X",21,0)
 S %DT("A")="Please enter date and time to end search: "
"RTN","LRHY4X",22,0)
 D ^%DT
"RTN","LRHY4X",23,0)
 Q:Y=-1
"RTN","LRHY4X",24,0)
 S LREDT=Y
"RTN","LRHY4X",25,0)
 ;
"RTN","LRHY4X",26,0)
 D DEVICE
"RTN","LRHY4X",27,0)
 K ^TMP("LRHYMEDTAT",$J),^TMP("LRHYMEDFINAL",$J)
"RTN","LRHY4X",28,0)
 K ^TMP("LRHYCOLLECTOR",$J),^TMP("LRHYTATDALLAS",$J)
"RTN","LRHY4X",29,0)
 QUIT
"RTN","LRHY4X",30,0)
PAT ;
"RTN","LRHY4X",31,0)
 ;
"RTN","LRHY4X",32,0)
 ;
"RTN","LRHY4X",33,0)
 S LREND=0
"RTN","LRHY4X",34,0)
 S DIC="^DPT("
"RTN","LRHY4X",35,0)
 S DIC(0)="AEMQZ"
"RTN","LRHY4X",36,0)
 D ^DIC
"RTN","LRHY4X",37,0)
 S DFN=+Y
"RTN","LRHY4X",38,0)
 S LRDFN=$G(^DPT(DFN,"LR"))
"RTN","LRHY4X",39,0)
 D ^VADPT,INP^VADPT
"RTN","LRHY4X",40,0)
 ;
"RTN","LRHY4X",41,0)
 QUIT
"RTN","LRHY4X",42,0)
 ;
"RTN","LRHY4X",43,0)
LRO69 ;
"RTN","LRHY4X",44,0)
Q ;
"RTN","LRHY4X",45,0)
 U IO
"RTN","LRHY4X",46,0)
 S LREND=0
"RTN","LRHY4X",47,0)
 S LRSTAR=0
"RTN","LRHY4X",48,0)
 D HEAD
"RTN","LRHY4X",49,0)
 S LRSN=0
"RTN","LRHY4X",50,0)
 S LRSTOP=0
"RTN","LRHY4X",51,0)
 S LRDRAW1=LRODT
"RTN","LRHY4X",52,0)
 F  S LRDRAW1=$O(^LRHY(69.87,"COLT",LRDRAW1)) Q:+LRDRAW1'>0!(LRDRAW1>LREDT)!(LRSTOP)  D
"RTN","LRHY4X",53,0)
 .  S LRUID=""
"RTN","LRHY4X",54,0)
 .  F  S LRUID=$O(^LRHY(69.87,"COLT",LRDRAW1,LRUID)) Q:LRUID=""  D
"RTN","LRHY4X",55,0)
 ..  ;
"RTN","LRHY4X",56,0)
 ..  S LRUID=$G(^LRHY(69.87,LRUID,0))
"RTN","LRHY4X",57,0)
 ..  I '$O(^LRO(68,"C",LRUID,0)) QUIT
"RTN","LRHY4X",58,0)
 ..  S LRAA=$O(^LRO(68,"C",LRUID,0))
"RTN","LRHY4X",59,0)
 ..  S LRAD=$O(^LRO(68,"C",LRUID,LRAA,0))
"RTN","LRHY4X",60,0)
 ..  S LRAN=$O(^LRO(68,"C",LRUID,LRAA,LRAD,0))
"RTN","LRHY4X",61,0)
 ..  D IN
"RTN","LRHY4X",62,0)
 D DISP
"RTN","LRHY4X",63,0)
 QUIT
"RTN","LRHY4X",64,0)
IN ;
"RTN","LRHY4X",65,0)
 S LR6987=$O(^LRHY(69.87,"B",LRUID,0)) Q:'$G(LR6987)
"RTN","LRHY4X",66,0)
 D
"RTN","LRHY4X",67,0)
 .  S LREND=0
"RTN","LRHY4X",68,0)
 .  K LRARIVE
"RTN","LRHY4X",69,0)
 .  S LRSN=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,5),LRORDT=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,4)
"RTN","LRHY4X",70,0)
 .  S LRACCTM=$G(^LRHY(69.87,LR6987,2))
"RTN","LRHY4X",71,0)
 .  S LRTKX=$G(^LRHY(69.87,LR6987,6))
"RTN","LRHY4X",72,0)
 .  S LRARIVE=$G(^LRHY(69.87,LR6987,8))
"RTN","LRHY4X",73,0)
 .  K LRNCOL
"RTN","LRHY4X",74,0)
 .  S LR3D=$P(LRDRAW1,".",2)
"RTN","LRHY4X",75,0)
 .  I $L(LR3D)'>3 S LR3D=LR3D_"0"
"RTN","LRHY4X",76,0)
 .  S LR3D=$E(LR3D,1,2)*60+$E(LR3D,3,4)
"RTN","LRHY4X",77,0)
 .  S LR3T=$P(LRACCTM,".",2)
"RTN","LRHY4X",78,0)
 .  I $L(LR3T)'>3 S LR3T=LR3T_"0"
"RTN","LRHY4X",79,0)
 .  S LR3T=$E(LR3T,1,2)*60+$E(LR3T,3,4)
"RTN","LRHY4X",80,0)
 .  S LRTAT=(LR3D-LR3T)
"RTN","LRHY4X",81,0)
 .  S LRDRAW=$E($P(LRDRAW1,".",2),1,2)_":"_$E($P(LRDRAW1,".",2),3,4)
"RTN","LRHY4X",82,0)
 .  S LRARIVE=$E($P(LRACCTM,".",2),1,2)_":"_$E($P(LRACCTM,".",2),3,4)
"RTN","LRHY4X",83,0)
 .  ;
"RTN","LRHY4X",84,0)
 .  K LRDFN
"RTN","LRHY4X",85,0)
 .  S LRDFN=+^LRO(68,LRAA,1,LRAD,1,LRAN,0)
"RTN","LRHY4X",86,0)
 .  K LRDPF D PT^LRX
"RTN","LRHY4X",87,0)
 .  S LRSSN=$P(SSN,"-",3)
"RTN","LRHY4X",88,0)
 .  S LRAC1=$G(^LRO(68,LRAA,1,LRAD,1,LRAN,.2))
"RTN","LRHY4X",89,0)
 .  I LRAC1="" S LRAC1=$E($P(^LRO(68,LRAA,0),U),1,2)_" "_$E(LRAD,4,7)_" "_LRAN
"RTN","LRHY4X",90,0)
 .  S LRAANAME=$P(^LRO(68,LRAA,0),U)
"RTN","LRHY4X",91,0)
 .  ; check specimen not urine
"RTN","LRHY4X",92,0)
 .  S LRLLOC=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,7)
"RTN","LRHY4X",93,0)
 .  S LRSC0=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,13)
"RTN","LRHY4X",94,0)
 .  I $P($G(LRNCOL),U,4) S ^TMP("LRHYCOLLECTOR",$J,LRORDT_U_LRSN_U_LRUID,$P(LRNCOL,U,4))=""
"RTN","LRHY4X",95,0)
 .  K LRHYTECH
"RTN","LRHY4X",96,0)
 .  S LRHYTECH=$G(^LRHY(69.87,LR6987,12))
"RTN","LRHY4X",97,0)
 .  ;
"RTN","LRHY4X",98,0)
 .  ;
"RTN","LRHY4X",99,0)
 .  S LRHYTECH=$G(LRTKX)
"RTN","LRHY4X",100,0)
 .  I LRHYTECH S ^TMP("LRHYCOLLECTOR",$J,LRORDT_U_LRSN_U_LRUID,LRHYTECH)=""
"RTN","LRHY4X",101,0)
 .  ;
"RTN","LRHY4X",102,0)
 .  S LRSTAR=0
"RTN","LRHY4X",103,0)
 .  ;
"RTN","LRHY4X",104,0)
 .  S ^TMP("LRHYTATDALLAS",$J,$E(LRDRAW,1,2),LRORDT_U_LRSN_U_LRUID)=LRDRAW_U_PNM_U_LRSSN_U_LRARIVE_U_LRTAT_U_LRAC1_U_$G(LRSTAR)_U_$G(LRLLOC)
"RTN","LRHY4X",105,0)
 ;
"RTN","LRHY4X",106,0)
 QUIT
"RTN","LRHY4X",107,0)
 ;
"RTN","LRHY4X",108,0)
DISP ;
"RTN","LRHY4X",109,0)
 ;
"RTN","LRHY4X",110,0)
 ;
"RTN","LRHY4X",111,0)
 S LRTOTAL=0
"RTN","LRHY4X",112,0)
 S LRHYCT=0
"RTN","LRHY4X",113,0)
 U IO
"RTN","LRHY4X",114,0)
 S LRD=0
"RTN","LRHY4X",115,0)
 S LR7MORE=0
"RTN","LRHY4X",116,0)
 S LR7LESS=0
"RTN","LRHY4X",117,0)
 S LR700=0
"RTN","LRHY4X",118,0)
 N LRE,LRTECH,LREXLINE
"RTN","LRHY4X",119,0)
 ;
"RTN","LRHY4X",120,0)
 F  S LRD=$O(^TMP("LRHYTATDALLAS",$J,LRD)) Q:+LRD'>0  D
"RTN","LRHY4X",121,0)
 .  S LRE=""
"RTN","LRHY4X",122,0)
 .  F  S LRE=$O(^TMP("LRHYTATDALLAS",$J,LRD,LRE)) Q:+LRE'>0  S LRN=^(LRE) D
"RTN","LRHY4X",123,0)
 ..  S LRSN=$P(LRE,U,2)
"RTN","LRHY4X",124,0)
 ..  S LRDRAW=+LRN
"RTN","LRHY4X",125,0)
 ..  S LRDRAW=$P(LRN,U)
"RTN","LRHY4X",126,0)
 ..  S PNM=$P(LRN,U,2)
"RTN","LRHY4X",127,0)
 ..  S LRSSN=$P(LRN,U,3)
"RTN","LRHY4X",128,0)
 ..  S LRARIVE=$P(LRN,U,4)
"RTN","LRHY4X",129,0)
 ..  S LRTAT=$P(LRN,U,5)
"RTN","LRHY4X",130,0)
 ..  I LRTAT>7 S LR7MORE=LR7MORE+1
"RTN","LRHY4X",131,0)
 ..  I LRTAT<7 S LR7LESS=LR7LESS+1
"RTN","LRHY4X",132,0)
 ..  I LRTAT=7 S LR700=LR700+1
"RTN","LRHY4X",133,0)
 ..  S LRAC1=$P(LRN,U,6)
"RTN","LRHY4X",134,0)
 ..  S LRTECH=$O(^TMP("LRHYCOLLECTOR",$J,LRE,0))
"RTN","LRHY4X",135,0)
 ..  S LREXLINE=$S($L(LRTECH)>6:1,1:0)
"RTN","LRHY4X",136,0)
 ..  D CHK Q:LRSTOP
"RTN","LRHY4X",137,0)
 ..  K LREXLINE
"RTN","LRHY4X",138,0)
 ..  W !,+$E(LRD,1,2),?4,$E(PNM,1,14)," ",LRSSN,?25,"BLD",?30,LRARIVE,?37,LRDRAW,?44,LRTAT
"RTN","LRHY4X",139,0)
 ..  W ?49,LRTECH
"RTN","LRHY4X",140,0)
 ..  ;I $P(LRN,U,7)=1 W "*"
"RTN","LRHY4X",141,0)
 ..  I $L(LRTECH)>6 W !
"RTN","LRHY4X",142,0)
 ..  W ?56,LRAC1 ;accession
"RTN","LRHY4X",143,0)
 ..  W ?73,$E($P(LRN,U,8),1,7) ;clinic
"RTN","LRHY4X",144,0)
 ..  S LRHYCT=LRHYCT+1 S LRTOTAL=LRTOTAL+LRTAT
"RTN","LRHY4X",145,0)
 ..  S ^TMP("LRHYMEDTAT",$J,LRE)=LRTAT
"RTN","LRHY4X",146,0)
 Q:'LRHYCT
"RTN","LRHY4X",147,0)
 W !!,?10,"Mean TAT: "
"RTN","LRHY4X",148,0)
 W ?35,$P(LRTOTAL/LRHYCT,".")_"."_$E($P(LRTOTAL/LRHYCT,".",2),1,1),?41
"RTN","LRHY4X",149,0)
 D MEDIAN W ?41," Minutes"
"RTN","LRHY4X",150,0)
 W !,?10,"Total Time: ",?35,LRTOTAL,?41," Minutes"
"RTN","LRHY4X",151,0)
 W !,?10,"Total Patients Drawn: ",?35,LRHYCT,!
"RTN","LRHY4X",152,0)
 W !,?15,"TAT > 7 minutes: ",LR7MORE
"RTN","LRHY4X",153,0)
 W !,?15,"TAT < 7 minutes: ",LR7LESS
"RTN","LRHY4X",154,0)
 W !,?15,"TAT = 7 minutes: ",LR700
"RTN","LRHY4X",155,0)
 I LRHYCT=0 S LRHYCT=1
"RTN","LRHY4X",156,0)
 ;
"RTN","LRHY4X",157,0)
 ;
"RTN","LRHY4X",158,0)
 W !,?5,"Collectors: "
"RTN","LRHY4X",159,0)
 S LRN5=0
"RTN","LRHY4X",160,0)
 F  S LRN5=$O(^TMP("LRHYCOLLECTOR",$J,LRN5)) Q:+LRN5'>0  D
"RTN","LRHY4X",161,0)
 .  S LRHYTECH=0
"RTN","LRHY4X",162,0)
 .  F  S LRHYTECH=$O(^TMP("LRHYCOLLECTOR",$J,LRN5,LRHYTECH)) Q:+LRHYTECH'>0  D
"RTN","LRHY4X",163,0)
 ..  S LRHYTECH1(LRHYTECH,LRN5)=""
"RTN","LRHY4X",164,0)
 S LRHYTECH=0
"RTN","LRHY4X",165,0)
 F  S LRHYTECH=$O(LRHYTECH1(LRHYTECH)) Q:+LRHYTECH'>0  D
"RTN","LRHY4X",166,0)
 .  S LRHYCTC=0 S LRT0=0
"RTN","LRHY4X",167,0)
 .  F  S LRT0=$O(LRHYTECH1(LRHYTECH,LRT0)) Q:+LRT0'>0  D
"RTN","LRHY4X",168,0)
 ..  S LRHYCTC=LRHYCTC+1
"RTN","LRHY4X",169,0)
 .  I $D(^VA(200,LRHYTECH)) W !,?10,$P(^VA(200,LRHYTECH,0),U)
"RTN","LRHY4X",170,0)
 .  W ?40,LRHYCTC,?45," Drawn"
"RTN","LRHY4X",171,0)
 K DIR I IOST["C-" S DIR(0)="E" D ^DIR
"RTN","LRHY4X",172,0)
 D ^%ZISC
"RTN","LRHY4X",173,0)
 QUIT
"RTN","LRHY4X",174,0)
MEDIAN ;
"RTN","LRHY4X",175,0)
 N LR334 S LR334=0
"RTN","LRHY4X",176,0)
 F  S LR334=$O(^TMP("LRHYMEDTAT",$J,LR334)) Q:+LR334'>0  I +$G(^TMP("LRHYMEDTAT",$J,LR334))'>0 S ^TMP("LRHYMEDTAT",$J,LR334)=1
"RTN","LRHY4X",177,0)
 S LRSTUCK=0
"RTN","LRHY4X",178,0)
 K ^TMP("LRHYMEDFINAL",$J)
"RTN","LRHY4X",179,0)
 K LRTATN
"RTN","LRHY4X",180,0)
 S LRHYCT3=1
"RTN","LRHY4X",181,0)
BAK S LRX=0 S LRKIL=0 S LRNONONO=0 S LRM3=0
"RTN","LRHY4X",182,0)
 I $D(^TMP("LRHYMEDFINAL",$J)) D
"RTN","LRHY4X",183,0)
 .  I '$D(^TMP("LRHYMEDFINAL",$J,LRHYCT3)) S LRSTUCK=LRSTUCK+1
"RTN","LRHY4X",184,0)
STUCK I $G(LRSTUCK)>2 K ^TMP("LRHYMEDTAT",$J,LRDUP) S LRSTUCK=0
"RTN","LRHY4X",185,0)
 I '$D(^TMP("LRHYMEDTAT",$J)) G DONE QUIT
"RTN","LRHY4X",186,0)
 S LRHYCT3=LRHYCT3+1
"RTN","LRHY4X",187,0)
 S LRM1=$O(^TMP("LRHYMEDTAT",$J,LRX)) S (LRX,LRDUP)=LRM1
"RTN","LRHY4X",188,0)
 S LRM1=$G(^TMP("LRHYMEDTAT",$J,LRM1))
"RTN","LRHY4X",189,0)
TIC F  S LRX=$O(^TMP("LRHYMEDTAT",$J,LRX)) Q:+LRX'>0  S LRM2=^(LRX) D
"RTN","LRHY4X",190,0)
 .  S LRKIL=LRX
"RTN","LRHY4X",191,0)
 .  I LRM2=LRM1 S LRKIL=LRX S LRNOT=0 D
"RTN","LRHY4X",192,0)
 ..  F LRY=1:1:LRHYCT3 Q:'$D(^TMP("LRHYMEDFINAL",$J,LRY))  D
"RTN","LRHY4X",193,0)
 ...  I LRM1>+$O(^TMP("LRHYMEDFINAL",$J,LRY,0)) S LRNOT=1
"RTN","LRHY4X",194,0)
 K ^TMP("LRHYMEDTAT",$J,LRDUP) S LRKIL=LRX
"RTN","LRHY4X",195,0)
 I $G(LRNOT)=1 S LRX=LRX+.05 S LRNOT=0 G TIC
"RTN","LRHY4X",196,0)
 I LRKIL K ^TMP("LRHYMEDTAT",$J,LRKIL)
"RTN","LRHY4X",197,0)
 I +$O(^TMP("LRHYMEDTAT",$J,0)) G BAK
"RTN","LRHY4X",198,0)
 S LRHYCT3=0
"RTN","LRHY4X",199,0)
 S LRX=0
"RTN","LRHY4X",200,0)
 F  S LRX=$O(^TMP("LRHYMEDFINAL",$J,LRX)) Q:+LRX'>0  D
"RTN","LRHY4X",201,0)
 .  S LRHYCT3=LRHYCT3+1
"RTN","LRHY4X",202,0)
 .  S LRYTAT=$O(^TMP("LRHYMEDFINAL",$J,LRX,0))
"RTN","LRHY4X",203,0)
 .  S LRTATN(LRHYCT3)=LRYTAT
"RTN","LRHY4X",204,0)
 S LRX=LRHYCT3/2
"RTN","LRHY4X",205,0)
 Q:'LRX
"RTN","LRHY4X",206,0)
 I LRX[.5 S LRX1=$P(LRX,".") Q:'LRX1  S LRX2=LRX1+1 D
"RTN","LRHY4X",207,0)
 .  S LRX3=(LRTATN(LRX1)+LRTATN(LRX2))/2
"RTN","LRHY4X",208,0)
 E  S LRX3=LRTATN(LRX)
"RTN","LRHY4X",209,0)
 W !,?10,"Median TAT:",?35,LRX3
"RTN","LRHY4X",210,0)
 ;
"RTN","LRHY4X",211,0)
 QUIT
"RTN","LRHY4X",212,0)
HEAD ;
"RTN","LRHY4X",213,0)
 S LRSTOP=0
"RTN","LRHY4X",214,0)
 W @IOF
"RTN","LRHY4X",215,0)
 W "Date:",$$Y2K^LRX(DT)," ",$$CJ^XLFSTR("PATIENT WAIT TIME",IOM)
"RTN","LRHY4X",216,0)
 W !,"Time",?5,"Patient Name",?25,"Type",?30,"Arrive"
"RTN","LRHY4X",217,0)
 W ?37,"Drawn",?44,"TAT",?49,"TECH",?57,"ACCN"
"RTN","LRHY4X",218,0)
 W ?73,"Clinic"
"RTN","LRHY4X",219,0)
 QUIT
"RTN","LRHY4X",220,0)
CHK ;
"RTN","LRHY4X",221,0)
 Q:LRSTOP
"RTN","LRHY4X",222,0)
 S LRLINE=(IOSL-$Y)
"RTN","LRHY4X",223,0)
 I $E(IOST,1,2)["P-" D  QUIT
"RTN","LRHY4X",224,0)
 .  I LRLINE<(7+$G(LREXLINE)) D HEAD QUIT
"RTN","LRHY4X",225,0)
 ;
"RTN","LRHY4X",226,0)
 I LRLINE<(2+$G(LREXLINE)) D
"RTN","LRHY4X",227,0)
 .  Q:$E(IOST,1,2)'["C-"
"RTN","LRHY4X",228,0)
 .  K DIR S DIR(0)="E" D ^DIR
"RTN","LRHY4X",229,0)
 .  I $D(DUOUT)!($D(DIRUT)) S LRSTOP=1 Q
"RTN","LRHY4X",230,0)
 .  D HEAD
"RTN","LRHY4X",231,0)
 QUIT
"RTN","LRHY4X",232,0)
DONE ;
"RTN","LRHY4X",233,0)
 S LRHYCT3=0
"RTN","LRHY4X",234,0)
 S LRX=0
"RTN","LRHY4X",235,0)
 F  S LRX=$O(^TMP("LRHYMEDFINAL",$J,LRX)) Q:+LRX'>0  D
"RTN","LRHY4X",236,0)
 .  S LRHYCT3=LRHYCT3+1
"RTN","LRHY4X",237,0)
 .  S LRYTAT=$O(^TMP("LRHYMEDFINAL",$J,LRX,0))
"RTN","LRHY4X",238,0)
 .  S LRTATN(LRHYCT3)=LRYTAT
"RTN","LRHY4X",239,0)
 S LRX=LRHYCT3/2
"RTN","LRHY4X",240,0)
 I LRX[.5 S LRX1=$P(LRX,".") Q:'LRX1  S LRX2=LRX1+1 D
"RTN","LRHY4X",241,0)
 .  S LRX3=(LRTATN(LRX1)+LRTATN(LRX2))/2
"RTN","LRHY4X",242,0)
 E  S LRX3=LRTATN(LRX)
"RTN","LRHY4X",243,0)
 W !,?10,"Median TAT:",?35,LRX3
"RTN","LRHY4X",244,0)
 QUIT
"RTN","LRHY4X",245,0)
DEVICE ;
"RTN","LRHY4X",246,0)
 S ZTRTN="Q^LRHY4X"
"RTN","LRHY4X",247,0)
 ;
"RTN","LRHY4X",248,0)
 D IO^LRWU
"RTN","LRHY4X",249,0)
 ;
"RTN","LRHY4X",250,0)
 QUIT
"RTN","LRHY4X",251,0)
 QUIT
"VER")
8.0^22.2
"BLD",10408,6)
^392
**END**
**END**

