EMERGENCY Released LR*5.2*482 SEQ #381
Extracted from mail message
**KIDS**:LR*5.2*482^

**INSTALL NAME**
LR*5.2*482
"BLD",9849,0)
LR*5.2*482^LAB SERVICE^0^3170125^y
"BLD",9849,1,0)
^^247^247^3170125^
"BLD",9849,1,1,0)
Subject:  ANATOMIC PATHOLOGY ORDER DIALOG ENHANCEMENT - FIX FOR AUTOPSY 
"BLD",9849,1,2,0)
ERROR
"BLD",9849,1,3,0)
 
"BLD",9849,1,4,0)
Category:  PATCH FOR A PATCH
"BLD",9849,1,5,0)
           EMERGENCY PATCH
"BLD",9849,1,6,0)
 
"BLD",9849,1,7,0)
Description:
"BLD",9849,1,8,0)
===========
"BLD",9849,1,9,0)
 
"BLD",9849,1,10,0)
Associated Patches: LR*5.2*462
"BLD",9849,1,11,0)
 
"BLD",9849,1,12,0)
The build for this patch is distributed in support of the VistA Lab 
"BLD",9849,1,13,0)
Enhancement (VLE) Anatomic Pathology order dialog enhancements. This 
"BLD",9849,1,14,0)
patch is to fix an error to released patch LR*5.2*462 [ANATOMIC PATHOLOGY 
"BLD",9849,1,15,0)
ORDER DIALOG ENHANCEMENT]. It resolves the error generated when using the 
"BLD",9849,1,16,0)
option "Verify/release reports, anat path" [LRAPR] to verify/release an 
"BLD",9849,1,17,0)
Autopsy (AU) accession. This patch is being released as an emergency 
"BLD",9849,1,18,0)
patch with a compliance date of Feb 5, 2017 to coincide with the 
"BLD",9849,1,19,0)
LR*5.2*462 compliance date of Feb 5, 2017
"BLD",9849,1,20,0)
 
"BLD",9849,1,21,0)
Defect Addressed - 451608
"BLD",9849,1,22,0)
 
"BLD",9849,1,23,0)
The patch contains two routine, no option or menus.
"BLD",9849,1,24,0)
 
"BLD",9849,1,25,0)
Blood Bank Review:
"BLD",9849,1,26,0)
==================
"BLD",9849,1,27,0)
All of the above changes have been reviewed by the VISTA Blood Bank 
"BLD",9849,1,28,0)
Developer and found to have no impact on the VISTA BLOOD BANK SOFTWARE 
"BLD",9849,1,29,0)
control functions.
"BLD",9849,1,30,0)
 
"BLD",9849,1,31,0)
RISK ANALYSIS: Changes made by patch LR*5.2*482 have no effect on Blood 
"BLD",9849,1,32,0)
Bank software functionality, therefore RISK is none.
"BLD",9849,1,33,0)
 
"BLD",9849,1,34,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*482 does not 
"BLD",9849,1,35,0)
alter or modify any software design safeguards or safety critical 
"BLD",9849,1,36,0)
elements functions.
"BLD",9849,1,37,0)
 
"BLD",9849,1,38,0)
POTENTIAL IMPACT ON SITES: This patch contains changes to routines and 
"BLD",9849,1,39,0)
files identified in ProPath standard titled: BBM Team Review of VistA 
"BLD",9849,1,40,0)
Patches, group B listing. The changes have no effect on Blood Bank 
"BLD",9849,1,41,0)
functionality or medical device control functions. There is no adverse 
"BLD",9849,1,42,0)
potential to sites.
"BLD",9849,1,43,0)
 
"BLD",9849,1,44,0)
 
"BLD",9849,1,45,0)
Patch Components:
"BLD",9849,1,46,0)
-----------------
"BLD",9849,1,47,0)
 
"BLD",9849,1,48,0)
N/A
"BLD",9849,1,49,0)
 
"BLD",9849,1,50,0)
Forms Associated:
"BLD",9849,1,51,0)
 
"BLD",9849,1,52,0)
Form Name                    File #               New/Modified/Deleted
"BLD",9849,1,53,0)
---------                    ------               --------------------
"BLD",9849,1,54,0)
N/A
"BLD",9849,1,55,0)
 
"BLD",9849,1,56,0)
 
"BLD",9849,1,57,0)
Mail Groups Associated:
"BLD",9849,1,58,0)
 
"BLD",9849,1,59,0)
Mail Group Name          New/Modified/Deleted
"BLD",9849,1,60,0)
---------------          --------------------
"BLD",9849,1,61,0)
N/A
"BLD",9849,1,62,0)
 
"BLD",9849,1,63,0)
 
"BLD",9849,1,64,0)
Options Associated:
"BLD",9849,1,65,0)
 
"BLD",9849,1,66,0)
N/A
"BLD",9849,1,67,0)
 
"BLD",9849,1,68,0)
 
"BLD",9849,1,69,0)
 
"BLD",9849,1,70,0)
 
"BLD",9849,1,71,0)
Protocols Associated:
"BLD",9849,1,72,0)
 
"BLD",9849,1,73,0)
Protocol Name       New/Modified/Deleted
"BLD",9849,1,74,0)
-------------       -------------------- 
"BLD",9849,1,75,0)
N/A
"BLD",9849,1,76,0)
 
"BLD",9849,1,77,0)
 
"BLD",9849,1,78,0)
Security Keys Associated:
"BLD",9849,1,79,0)
 
"BLD",9849,1,80,0)
Security Key Name
"BLD",9849,1,81,0)
-----------------
"BLD",9849,1,82,0)
N/A
"BLD",9849,1,83,0)
 
"BLD",9849,1,84,0)
 
"BLD",9849,1,85,0)
Templates Associated:
"BLD",9849,1,86,0)
 
"BLD",9849,1,87,0)
N/A
"BLD",9849,1,88,0)
 
"BLD",9849,1,89,0)
Additional Information:
"BLD",9849,1,90,0)
 
"BLD",9849,1,91,0)
N/A 
"BLD",9849,1,92,0)
 
"BLD",9849,1,93,0)
 
"BLD",9849,1,94,0)
New Service Requests (NSRs):
"BLD",9849,1,95,0)
----------------------------   
"BLD",9849,1,96,0)
#20140511
"BLD",9849,1,97,0)
The Anatomic Pathology (AP) laboratory service needs a mechanism for 
"BLD",9849,1,98,0)
clinicians to provide required patient-specific, procedure-specific, and 
"BLD",9849,1,99,0)
specimen-specific information to facilitate specimen processing by 
"BLD",9849,1,100,0)
pathologists. This mechanism must be in place for use by the specimen 
"BLD",9849,1,101,0)
labeling application in order to generate a primary specimen label that 
"BLD",9849,1,102,0)
positively identifies the specimen and accurately associates it with the 
"BLD",9849,1,103,0)
patient.
"BLD",9849,1,104,0)
 
"BLD",9849,1,105,0)
Patient Safety Issues (PSIs):
"BLD",9849,1,106,0)
-----------------------------
"BLD",9849,1,107,0)
N/A
"BLD",9849,1,108,0)
 
"BLD",9849,1,109,0)
 
"BLD",9849,1,110,0)
Remedy Ticket(s) & Overview:
"BLD",9849,1,111,0)
----------------------------
"BLD",9849,1,112,0)
 
"BLD",9849,1,113,0)
N/A
"BLD",9849,1,114,0)
 
"BLD",9849,1,115,0)
Problem:
"BLD",9849,1,116,0)
-------
"BLD",9849,1,117,0)
N/A
"BLD",9849,1,118,0)
 
"BLD",9849,1,119,0)
Resolution:
"BLD",9849,1,120,0)
----------
"BLD",9849,1,121,0)
N/A
"BLD",9849,1,122,0)
 
"BLD",9849,1,123,0)
Test Sites:
"BLD",9849,1,124,0)
----------
"BLD",9849,1,125,0)
AP Dialogs w/OR*3.0*405:
"BLD",9849,1,126,0)
  North Florida/South Georgia Veterans Health System (Gainesville, FL)
"BLD",9849,1,127,0)
  Central California VA Health Care System (Fresno, CA)
"BLD",9849,1,128,0)
  VA Northern  California Health Care System
"BLD",9849,1,129,0)
  Edward Hines Jr. VA Hospital
"BLD",9849,1,130,0)
  Philadelphia VA Medical Center
"BLD",9849,1,131,0)
 
"BLD",9849,1,132,0)
 
"BLD",9849,1,133,0)
Documentation Retrieval Instructions:
"BLD",9849,1,134,0)
------------------------------------- 
"BLD",9849,1,135,0)
Software being released as a host file and/or documentation describing 
"BLD",9849,1,136,0)
the new functionality introduced by this patch are available.
"BLD",9849,1,137,0)
 
"BLD",9849,1,138,0)
The preferred method is to retrieve files from download.vista.domain.ext.
"BLD",9849,1,139,0)
This transmits the files from the first available server. Sites may 
"BLD",9849,1,140,0)
also elect to retrieve files directly from a specific server. 
"BLD",9849,1,141,0)
 
"BLD",9849,1,142,0)
Sites may retrieve the software and/or documentation directly using 
"BLD",9849,1,143,0)
Secure 
"BLD",9849,1,144,0)
File Transfer Protocol (SFTP) from the ANONYMOUS.SOFTWARE directory at 
"BLD",9849,1,145,0)
the following OI Field Offices:
"BLD",9849,1,146,0)
   
"BLD",9849,1,147,0)
Albany:                 domain.ext
"BLD",9849,1,148,0)
Hines:                  domain.ext    
"BLD",9849,1,149,0)
Salt Lake City:         domain.ext
"BLD",9849,1,150,0)
   
"BLD",9849,1,151,0)
Documentation can also be found on the VA Software Documentation Library 
"BLD",9849,1,152,0)
at:
"BLD",9849,1,153,0)
http://www4.domain.ext/vdl/
"BLD",9849,1,154,0)
 
"BLD",9849,1,155,0)
Title                         File Name                       FTP Mode
"BLD",9849,1,156,0)
-----------------------------------------------------------------------
"BLD",9849,1,157,0)
VistA laboratory Enhancements  AP_VIP_Deployment_Installation_  Binary
"BLD",9849,1,158,0)
(VLE) Anatomic Pathlogy (AP)   Roll Back_Back-Out_Guide.DOC
"BLD",9849,1,159,0)
Order Dialogs
"BLD",9849,1,160,0)
VistA laboratory Enhancements  AP_VIP_Deployment_Installation_  Binary
"BLD",9849,1,161,0)
(VLE) Anatomic Pathlogy (AP)   Roll Back_Back-Out_Guide.PDF
"BLD",9849,1,162,0)
Order Dialogs
"BLD",9849,1,163,0)
          
"BLD",9849,1,164,0)
      
"BLD",9849,1,165,0)
Patch Installation:
"BLD",9849,1,166,0)
 
"BLD",9849,1,167,0)
 
"BLD",9849,1,168,0)
Pre/Post Installation Overview:
"BLD",9849,1,169,0)
-------------------------------
"BLD",9849,1,170,0)
This patch is a fix for an Autopsy error that is triggered when users 
"BLD",9849,1,171,0)
'Verify/Release Autopsy report in VistA. 
"BLD",9849,1,172,0)
 
"BLD",9849,1,173,0)
Pre-Installation Instructions:
"BLD",9849,1,174,0)
------------------------------
"BLD",9849,1,175,0)
This patch may be installed with users on the system although it is 
"BLD",9849,1,176,0)
strongly recommended that it be installed during non-peak hours when 
"BLD",9849,1,177,0)
LAB usage is at a minimum.
"BLD",9849,1,178,0)
 
"BLD",9849,1,179,0)
 
"BLD",9849,1,180,0)
Installation Instructions:
"BLD",9849,1,181,0)
--------------------------
"BLD",9849,1,182,0)
This patch may be installed with users on the system although it is 
"BLD",9849,1,183,0)
 recommended that it be installed during non-peak hours to minimize 
"BLD",9849,1,184,0)
 potential disruption to users.  This patch should take less than 5 
"BLD",9849,1,185,0)
 minutes to install.
"BLD",9849,1,186,0)
 
"BLD",9849,1,187,0)
This installation will install the components necessary to support the 
"BLD",9849,1,188,0)
CPRS AP Order Dialog functionality released with OR*3.0*405.
"BLD",9849,1,189,0)
 
"BLD",9849,1,190,0)
1.  Choose the PackMan message containing this patch.
"BLD",9849,1,191,0)
 
"BLD",9849,1,192,0)
2.  Choose the INSTALL/CHECK MESSAGE PackMan option.  
"BLD",9849,1,193,0)
 
"BLD",9849,1,194,0)
3.  From the Kernel Installation and Distribution System Menu, select
"BLD",9849,1,195,0)
    the Installation Menu.  From this menu, you may elect to use the
"BLD",9849,1,196,0)
    following options. When prompted for the INSTALL NAME enter the patch 
"BLD",9849,1,197,0)
    LR*5.2*462:
"BLD",9849,1,198,0)
    a.  Backup a Transport Global - This option will create a backup
"BLD",9849,1,199,0)
        message of any routines exported with this patch. It will not
"BLD",9849,1,200,0)
        backup any other changes such as DDs or templates.
"BLD",9849,1,201,0)
   b.  Compare Transport Global to Current System - This option will
"BLD",9849,1,202,0)
        allow you to view all changes that will be made when this patch
"BLD",9849,1,203,0)
        is installed.  It compares all components of this patch
"BLD",9849,1,204,0)
        (routines, DDs, templates, etc.).
"BLD",9849,1,205,0)
    c.  Verify Checksums in Transport Global - This option will allow
"BLD",9849,1,206,0)
        you to ensure the integrity of the routines that are in the
"BLD",9849,1,207,0)
        transport global.
"BLD",9849,1,208,0)
     
"BLD",9849,1,209,0)
4.  From the Installation Menu, select the Install Package(s) option and
"BLD",9849,1,210,0)
    choose the patch to install.
"BLD",9849,1,211,0)
 
"BLD",9849,1,212,0)
5.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
"BLD",9849,1,213,0)
    Install? NO//'     
"BLD",9849,1,214,0)
    Respond: NO
"BLD",9849,1,215,0)
 
"BLD",9849,1,216,0)
6.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
"BLD",9849,1,217,0)
    NO//'
"BLD",9849,1,218,0)
    Respond: NO
"BLD",9849,1,219,0)
 
"BLD",9849,1,220,0)
7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
"BLD",9849,1,221,0)
    and Protocols? NO//' 
"BLD",9849,1,222,0)
    Respond: NO
"BLD",9849,1,223,0)
 
"BLD",9849,1,224,0)
8.  If prompted 'Delay Install (Minutes):  (0 - 60): 0//' respond 0.
"BLD",9849,1,225,0)
 
"BLD",9849,1,226,0)
 
"BLD",9849,1,227,0)
Post-Installation Instructions:
"BLD",9849,1,228,0)
-------------------------------
"BLD",9849,1,229,0)
N/A
"BLD",9849,1,230,0)
 
"BLD",9849,1,231,0)
 
"BLD",9849,1,232,0)
Routine Information:
"BLD",9849,1,233,0)
====================
"BLD",9849,1,234,0)
 
"BLD",9849,1,235,0)
The second line of each of these routines now looks like:
"BLD",9849,1,236,0)
;;5.2;LAB SERVICE;**[Patch List]**;Sep 27, 1994;Build 1
"BLD",9849,1,237,0)
 
"BLD",9849,1,238,0)
The checksums below are new checksums, and
"BLD",9849,1,239,0)
can be checked with CHECK1^XTSUMBLD.
"BLD",9849,1,240,0)
 
"BLD",9849,1,241,0)
Routine Name: LR482
"BLD",9849,1,242,0)
    Before:       n/a   After:  B4627709  **482**
"BLD",9849,1,243,0)
Routine Name: LRAPRES1
"BLD",9849,1,244,0)
    Before: B70400068   After: B71690317  **259,336,369,365,397,413,350,
"BLD",9849,1,245,0)
                                           462,482**
"BLD",9849,1,246,0)
 
"BLD",9849,1,247,0)
Routine list of preceding patches: 462
"BLD",9849,4,0)
^9.64PA^^
"BLD",9849,6.3)
2
"BLD",9849,"ABPKG")
n
"BLD",9849,"INI")
PRE^LR482
"BLD",9849,"INID")
n^n^n
"BLD",9849,"INIT")
POST^LR482
"BLD",9849,"KRN",0)
^9.67PA^779.2^20
"BLD",9849,"KRN",.4,0)
.4
"BLD",9849,"KRN",.401,0)
.401
"BLD",9849,"KRN",.402,0)
.402
"BLD",9849,"KRN",.403,0)
.403
"BLD",9849,"KRN",.5,0)
.5
"BLD",9849,"KRN",.84,0)
.84
"BLD",9849,"KRN",3.6,0)
3.6
"BLD",9849,"KRN",3.8,0)
3.8
"BLD",9849,"KRN",9.2,0)
9.2
"BLD",9849,"KRN",9.8,0)
9.8
"BLD",9849,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",9849,"KRN",9.8,"NM",1,0)
LRAPRES1^^0^B71690317
"BLD",9849,"KRN",9.8,"NM",2,0)
LR482^^0^B4627709
"BLD",9849,"KRN",9.8,"NM","B","LR482",2)

"BLD",9849,"KRN",9.8,"NM","B","LRAPRES1",1)

"BLD",9849,"KRN",19,0)
19
"BLD",9849,"KRN",19.1,0)
19.1
"BLD",9849,"KRN",101,0)
101
"BLD",9849,"KRN",409.61,0)
409.61
"BLD",9849,"KRN",771,0)
771
"BLD",9849,"KRN",779.2,0)
779.2
"BLD",9849,"KRN",870,0)
870
"BLD",9849,"KRN",8989.51,0)
8989.51
"BLD",9849,"KRN",8989.52,0)
8989.52
"BLD",9849,"KRN",8994,0)
8994
"BLD",9849,"KRN","B",.4,.4)

"BLD",9849,"KRN","B",.401,.401)

"BLD",9849,"KRN","B",.402,.402)

"BLD",9849,"KRN","B",.403,.403)

"BLD",9849,"KRN","B",.5,.5)

"BLD",9849,"KRN","B",.84,.84)

"BLD",9849,"KRN","B",3.6,3.6)

"BLD",9849,"KRN","B",3.8,3.8)

"BLD",9849,"KRN","B",9.2,9.2)

"BLD",9849,"KRN","B",9.8,9.8)

"BLD",9849,"KRN","B",19,19)

"BLD",9849,"KRN","B",19.1,19.1)

"BLD",9849,"KRN","B",101,101)

"BLD",9849,"KRN","B",409.61,409.61)

"BLD",9849,"KRN","B",771,771)

"BLD",9849,"KRN","B",779.2,779.2)

"BLD",9849,"KRN","B",870,870)

"BLD",9849,"KRN","B",8989.51,8989.51)

"BLD",9849,"KRN","B",8989.52,8989.52)

"BLD",9849,"KRN","B",8994,8994)

"BLD",9849,"PRE")
LR482
"BLD",9849,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",9849,"QUES",0)
^9.62^^
"BLD",9849,"REQB",0)
^9.611^1^1
"BLD",9849,"REQB",1,0)
LR*5.2*462^1
"BLD",9849,"REQB","B","LR*5.2*462",1)

"INI")
PRE^LR482
"INIT")
POST^LR482
"MBREQ")
0
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,20,0)
^9.402P^1^1
"PKG",26,20,1,0)
2^^LRXDRPT
"PKG",26,20,1,1)

"PKG",26,20,"B",2,1)

"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2941128
"PKG",26,22,1,"PAH",1,0)
482^3170125
"PKG",26,22,1,"PAH",1,1,0)
^^247^247^3170125
"PKG",26,22,1,"PAH",1,1,1,0)
Subject:  ANATOMIC PATHOLOGY ORDER DIALOG ENHANCEMENT - FIX FOR AUTOPSY 
"PKG",26,22,1,"PAH",1,1,2,0)
ERROR
"PKG",26,22,1,"PAH",1,1,3,0)
 
"PKG",26,22,1,"PAH",1,1,4,0)
Category:  PATCH FOR A PATCH
"PKG",26,22,1,"PAH",1,1,5,0)
           EMERGENCY PATCH
"PKG",26,22,1,"PAH",1,1,6,0)
 
"PKG",26,22,1,"PAH",1,1,7,0)
Description:
"PKG",26,22,1,"PAH",1,1,8,0)
===========
"PKG",26,22,1,"PAH",1,1,9,0)
 
"PKG",26,22,1,"PAH",1,1,10,0)
Associated Patches: LR*5.2*462
"PKG",26,22,1,"PAH",1,1,11,0)
 
"PKG",26,22,1,"PAH",1,1,12,0)
The build for this patch is distributed in support of the VistA Lab 
"PKG",26,22,1,"PAH",1,1,13,0)
Enhancement (VLE) Anatomic Pathology order dialog enhancements. This 
"PKG",26,22,1,"PAH",1,1,14,0)
patch is to fix an error to released patch LR*5.2*462 [ANATOMIC PATHOLOGY 
"PKG",26,22,1,"PAH",1,1,15,0)
ORDER DIALOG ENHANCEMENT]. It resolves the error generated when using the 
"PKG",26,22,1,"PAH",1,1,16,0)
option "Verify/release reports, anat path" [LRAPR] to verify/release an 
"PKG",26,22,1,"PAH",1,1,17,0)
Autopsy (AU) accession. This patch is being released as an emergency 
"PKG",26,22,1,"PAH",1,1,18,0)
patch with a compliance date of Feb 5, 2017 to coincide with the 
"PKG",26,22,1,"PAH",1,1,19,0)
LR*5.2*462 compliance date of Feb 5, 2017
"PKG",26,22,1,"PAH",1,1,20,0)
 
"PKG",26,22,1,"PAH",1,1,21,0)
Defect Addressed - 451608
"PKG",26,22,1,"PAH",1,1,22,0)
 
"PKG",26,22,1,"PAH",1,1,23,0)
The patch contains two routine, no option or menus.
"PKG",26,22,1,"PAH",1,1,24,0)
 
"PKG",26,22,1,"PAH",1,1,25,0)
Blood Bank Review:
"PKG",26,22,1,"PAH",1,1,26,0)
==================
"PKG",26,22,1,"PAH",1,1,27,0)
All of the above changes have been reviewed by the VISTA Blood Bank 
"PKG",26,22,1,"PAH",1,1,28,0)
Developer and found to have no impact on the VISTA BLOOD BANK SOFTWARE 
"PKG",26,22,1,"PAH",1,1,29,0)
control functions.
"PKG",26,22,1,"PAH",1,1,30,0)
 
"PKG",26,22,1,"PAH",1,1,31,0)
RISK ANALYSIS: Changes made by patch LR*5.2*482 have no effect on Blood 
"PKG",26,22,1,"PAH",1,1,32,0)
Bank software functionality, therefore RISK is none.
"PKG",26,22,1,"PAH",1,1,33,0)
 
"PKG",26,22,1,"PAH",1,1,34,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*482 does not 
"PKG",26,22,1,"PAH",1,1,35,0)
alter or modify any software design safeguards or safety critical 
"PKG",26,22,1,"PAH",1,1,36,0)
elements functions.
"PKG",26,22,1,"PAH",1,1,37,0)
 
"PKG",26,22,1,"PAH",1,1,38,0)
POTENTIAL IMPACT ON SITES: This patch contains changes to routines and 
"PKG",26,22,1,"PAH",1,1,39,0)
files identified in ProPath standard titled: BBM Team Review of VistA 
"PKG",26,22,1,"PAH",1,1,40,0)
Patches, group B listing. The changes have no effect on Blood Bank 
"PKG",26,22,1,"PAH",1,1,41,0)
functionality or medical device control functions. There is no adverse 
"PKG",26,22,1,"PAH",1,1,42,0)
potential to sites.
"PKG",26,22,1,"PAH",1,1,43,0)
 
"PKG",26,22,1,"PAH",1,1,44,0)
 
"PKG",26,22,1,"PAH",1,1,45,0)
Patch Components:
"PKG",26,22,1,"PAH",1,1,46,0)
-----------------
"PKG",26,22,1,"PAH",1,1,47,0)
 
"PKG",26,22,1,"PAH",1,1,48,0)
N/A
"PKG",26,22,1,"PAH",1,1,49,0)
 
"PKG",26,22,1,"PAH",1,1,50,0)
Forms Associated:
"PKG",26,22,1,"PAH",1,1,51,0)
 
"PKG",26,22,1,"PAH",1,1,52,0)
Form Name                    File #               New/Modified/Deleted
"PKG",26,22,1,"PAH",1,1,53,0)
---------                    ------               --------------------
"PKG",26,22,1,"PAH",1,1,54,0)
N/A
"PKG",26,22,1,"PAH",1,1,55,0)
 
"PKG",26,22,1,"PAH",1,1,56,0)
 
"PKG",26,22,1,"PAH",1,1,57,0)
Mail Groups Associated:
"PKG",26,22,1,"PAH",1,1,58,0)
 
"PKG",26,22,1,"PAH",1,1,59,0)
Mail Group Name          New/Modified/Deleted
"PKG",26,22,1,"PAH",1,1,60,0)
---------------          --------------------
"PKG",26,22,1,"PAH",1,1,61,0)
N/A
"PKG",26,22,1,"PAH",1,1,62,0)
 
"PKG",26,22,1,"PAH",1,1,63,0)
 
"PKG",26,22,1,"PAH",1,1,64,0)
Options Associated:
"PKG",26,22,1,"PAH",1,1,65,0)
 
"PKG",26,22,1,"PAH",1,1,66,0)
N/A
"PKG",26,22,1,"PAH",1,1,67,0)
 
"PKG",26,22,1,"PAH",1,1,68,0)
 
"PKG",26,22,1,"PAH",1,1,69,0)
 
"PKG",26,22,1,"PAH",1,1,70,0)
 
"PKG",26,22,1,"PAH",1,1,71,0)
Protocols Associated:
"PKG",26,22,1,"PAH",1,1,72,0)
 
"PKG",26,22,1,"PAH",1,1,73,0)
Protocol Name       New/Modified/Deleted
"PKG",26,22,1,"PAH",1,1,74,0)
-------------       -------------------- 
"PKG",26,22,1,"PAH",1,1,75,0)
N/A
"PKG",26,22,1,"PAH",1,1,76,0)
 
"PKG",26,22,1,"PAH",1,1,77,0)
 
"PKG",26,22,1,"PAH",1,1,78,0)
Security Keys Associated:
"PKG",26,22,1,"PAH",1,1,79,0)
 
"PKG",26,22,1,"PAH",1,1,80,0)
Security Key Name
"PKG",26,22,1,"PAH",1,1,81,0)
-----------------
"PKG",26,22,1,"PAH",1,1,82,0)
N/A
"PKG",26,22,1,"PAH",1,1,83,0)
 
"PKG",26,22,1,"PAH",1,1,84,0)
 
"PKG",26,22,1,"PAH",1,1,85,0)
Templates Associated:
"PKG",26,22,1,"PAH",1,1,86,0)
 
"PKG",26,22,1,"PAH",1,1,87,0)
N/A
"PKG",26,22,1,"PAH",1,1,88,0)
 
"PKG",26,22,1,"PAH",1,1,89,0)
Additional Information:
"PKG",26,22,1,"PAH",1,1,90,0)
 
"PKG",26,22,1,"PAH",1,1,91,0)
N/A 
"PKG",26,22,1,"PAH",1,1,92,0)
 
"PKG",26,22,1,"PAH",1,1,93,0)
 
"PKG",26,22,1,"PAH",1,1,94,0)
New Service Requests (NSRs):
"PKG",26,22,1,"PAH",1,1,95,0)
----------------------------   
"PKG",26,22,1,"PAH",1,1,96,0)
#20140511
"PKG",26,22,1,"PAH",1,1,97,0)
The Anatomic Pathology (AP) laboratory service needs a mechanism for 
"PKG",26,22,1,"PAH",1,1,98,0)
clinicians to provide required patient-specific, procedure-specific, and 
"PKG",26,22,1,"PAH",1,1,99,0)
specimen-specific information to facilitate specimen processing by 
"PKG",26,22,1,"PAH",1,1,100,0)
pathologists. This mechanism must be in place for use by the specimen 
"PKG",26,22,1,"PAH",1,1,101,0)
labeling application in order to generate a primary specimen label that 
"PKG",26,22,1,"PAH",1,1,102,0)
positively identifies the specimen and accurately associates it with the 
"PKG",26,22,1,"PAH",1,1,103,0)
patient.
"PKG",26,22,1,"PAH",1,1,104,0)
 
"PKG",26,22,1,"PAH",1,1,105,0)
Patient Safety Issues (PSIs):
"PKG",26,22,1,"PAH",1,1,106,0)
-----------------------------
"PKG",26,22,1,"PAH",1,1,107,0)
N/A
"PKG",26,22,1,"PAH",1,1,108,0)
 
"PKG",26,22,1,"PAH",1,1,109,0)
 
"PKG",26,22,1,"PAH",1,1,110,0)
Remedy Ticket(s) & Overview:
"PKG",26,22,1,"PAH",1,1,111,0)
----------------------------
"PKG",26,22,1,"PAH",1,1,112,0)
 
"PKG",26,22,1,"PAH",1,1,113,0)
N/A
"PKG",26,22,1,"PAH",1,1,114,0)
 
"PKG",26,22,1,"PAH",1,1,115,0)
Problem:
"PKG",26,22,1,"PAH",1,1,116,0)
-------
"PKG",26,22,1,"PAH",1,1,117,0)
N/A
"PKG",26,22,1,"PAH",1,1,118,0)
 
"PKG",26,22,1,"PAH",1,1,119,0)
Resolution:
"PKG",26,22,1,"PAH",1,1,120,0)
----------
"PKG",26,22,1,"PAH",1,1,121,0)
N/A
"PKG",26,22,1,"PAH",1,1,122,0)
 
"PKG",26,22,1,"PAH",1,1,123,0)
Test Sites:
"PKG",26,22,1,"PAH",1,1,124,0)
----------
"PKG",26,22,1,"PAH",1,1,125,0)
AP Dialogs w/OR*3.0*405:
"PKG",26,22,1,"PAH",1,1,126,0)
  North Florida/South Georgia Veterans Health System (Gainesville, FL)
"PKG",26,22,1,"PAH",1,1,127,0)
  Central California VA Health Care System (Fresno, CA)
"PKG",26,22,1,"PAH",1,1,128,0)
  VA Northern  California Health Care System
"PKG",26,22,1,"PAH",1,1,129,0)
  Edward Hines Jr. VA Hospital
"PKG",26,22,1,"PAH",1,1,130,0)
  Philadelphia VA Medical Center
"PKG",26,22,1,"PAH",1,1,131,0)
 
"PKG",26,22,1,"PAH",1,1,132,0)
 
"PKG",26,22,1,"PAH",1,1,133,0)
Documentation Retrieval Instructions:
"PKG",26,22,1,"PAH",1,1,134,0)
------------------------------------- 
"PKG",26,22,1,"PAH",1,1,135,0)
Software being released as a host file and/or documentation describing 
"PKG",26,22,1,"PAH",1,1,136,0)
the new functionality introduced by this patch are available.
"PKG",26,22,1,"PAH",1,1,137,0)
 
"PKG",26,22,1,"PAH",1,1,138,0)
The preferred method is to retrieve files from download.vista.domain.ext.
"PKG",26,22,1,"PAH",1,1,139,0)
This transmits the files from the first available server. Sites may 
"PKG",26,22,1,"PAH",1,1,140,0)
also elect to retrieve files directly from a specific server. 
"PKG",26,22,1,"PAH",1,1,141,0)
 
"PKG",26,22,1,"PAH",1,1,142,0)
Sites may retrieve the software and/or documentation directly using 
"PKG",26,22,1,"PAH",1,1,143,0)
Secure 
"PKG",26,22,1,"PAH",1,1,144,0)
File Transfer Protocol (SFTP) from the ANONYMOUS.SOFTWARE directory at 
"PKG",26,22,1,"PAH",1,1,145,0)
the following OI Field Offices:
"PKG",26,22,1,"PAH",1,1,146,0)
   
"PKG",26,22,1,"PAH",1,1,147,0)
Albany:                 domain.ext
"PKG",26,22,1,"PAH",1,1,148,0)
Hines:                  domain.ext    
"PKG",26,22,1,"PAH",1,1,149,0)
Salt Lake City:         domain.ext
"PKG",26,22,1,"PAH",1,1,150,0)
   
"PKG",26,22,1,"PAH",1,1,151,0)
Documentation can also be found on the VA Software Documentation Library 
"PKG",26,22,1,"PAH",1,1,152,0)
at:
"PKG",26,22,1,"PAH",1,1,153,0)
http://www4.domain.ext/vdl/
"PKG",26,22,1,"PAH",1,1,154,0)
 
"PKG",26,22,1,"PAH",1,1,155,0)
Title                         File Name                       FTP Mode
"PKG",26,22,1,"PAH",1,1,156,0)
-----------------------------------------------------------------------
"PKG",26,22,1,"PAH",1,1,157,0)
VistA laboratory Enhancements  AP_VIP_Deployment_Installation_  Binary
"PKG",26,22,1,"PAH",1,1,158,0)
(VLE) Anatomic Pathlogy (AP)   Roll Back_Back-Out_Guide.DOC
"PKG",26,22,1,"PAH",1,1,159,0)
Order Dialogs
"PKG",26,22,1,"PAH",1,1,160,0)
VistA laboratory Enhancements  AP_VIP_Deployment_Installation_  Binary
"PKG",26,22,1,"PAH",1,1,161,0)
(VLE) Anatomic Pathlogy (AP)   Roll Back_Back-Out_Guide.PDF
"PKG",26,22,1,"PAH",1,1,162,0)
Order Dialogs
"PKG",26,22,1,"PAH",1,1,163,0)
          
"PKG",26,22,1,"PAH",1,1,164,0)
      
"PKG",26,22,1,"PAH",1,1,165,0)
Patch Installation:
"PKG",26,22,1,"PAH",1,1,166,0)
 
"PKG",26,22,1,"PAH",1,1,167,0)
 
"PKG",26,22,1,"PAH",1,1,168,0)
Pre/Post Installation Overview:
"PKG",26,22,1,"PAH",1,1,169,0)
-------------------------------
"PKG",26,22,1,"PAH",1,1,170,0)
This patch is a fix for an Autopsy error that is triggered when users 
"PKG",26,22,1,"PAH",1,1,171,0)
'Verify/Release Autopsy report in VistA. 
"PKG",26,22,1,"PAH",1,1,172,0)
 
"PKG",26,22,1,"PAH",1,1,173,0)
Pre-Installation Instructions:
"PKG",26,22,1,"PAH",1,1,174,0)
------------------------------
"PKG",26,22,1,"PAH",1,1,175,0)
This patch may be installed with users on the system although it is 
"PKG",26,22,1,"PAH",1,1,176,0)
strongly recommended that it be installed during non-peak hours when 
"PKG",26,22,1,"PAH",1,1,177,0)
LAB usage is at a minimum.
"PKG",26,22,1,"PAH",1,1,178,0)
 
"PKG",26,22,1,"PAH",1,1,179,0)
 
"PKG",26,22,1,"PAH",1,1,180,0)
Installation Instructions:
"PKG",26,22,1,"PAH",1,1,181,0)
--------------------------
"PKG",26,22,1,"PAH",1,1,182,0)
This patch may be installed with users on the system although it is 
"PKG",26,22,1,"PAH",1,1,183,0)
 recommended that it be installed during non-peak hours to minimize 
"PKG",26,22,1,"PAH",1,1,184,0)
 potential disruption to users.  This patch should take less than 5 
"PKG",26,22,1,"PAH",1,1,185,0)
 minutes to install.
"PKG",26,22,1,"PAH",1,1,186,0)
 
"PKG",26,22,1,"PAH",1,1,187,0)
This installation will install the components necessary to support the 
"PKG",26,22,1,"PAH",1,1,188,0)
CPRS AP Order Dialog functionality released with OR*3.0*405.
"PKG",26,22,1,"PAH",1,1,189,0)
 
"PKG",26,22,1,"PAH",1,1,190,0)
1.  Choose the PackMan message containing this patch.
"PKG",26,22,1,"PAH",1,1,191,0)
 
"PKG",26,22,1,"PAH",1,1,192,0)
2.  Choose the INSTALL/CHECK MESSAGE PackMan option.  
"PKG",26,22,1,"PAH",1,1,193,0)
 
"PKG",26,22,1,"PAH",1,1,194,0)
3.  From the Kernel Installation and Distribution System Menu, select
"PKG",26,22,1,"PAH",1,1,195,0)
    the Installation Menu.  From this menu, you may elect to use the
"PKG",26,22,1,"PAH",1,1,196,0)
    following options. When prompted for the INSTALL NAME enter the patch 
"PKG",26,22,1,"PAH",1,1,197,0)
    LR*5.2*462:
"PKG",26,22,1,"PAH",1,1,198,0)
    a.  Backup a Transport Global - This option will create a backup
"PKG",26,22,1,"PAH",1,1,199,0)
        message of any routines exported with this patch. It will not
"PKG",26,22,1,"PAH",1,1,200,0)
        backup any other changes such as DDs or templates.
"PKG",26,22,1,"PAH",1,1,201,0)
   b.  Compare Transport Global to Current System - This option will
"PKG",26,22,1,"PAH",1,1,202,0)
        allow you to view all changes that will be made when this patch
"PKG",26,22,1,"PAH",1,1,203,0)
        is installed.  It compares all components of this patch
"PKG",26,22,1,"PAH",1,1,204,0)
        (routines, DDs, templates, etc.).
"PKG",26,22,1,"PAH",1,1,205,0)
    c.  Verify Checksums in Transport Global - This option will allow
"PKG",26,22,1,"PAH",1,1,206,0)
        you to ensure the integrity of the routines that are in the
"PKG",26,22,1,"PAH",1,1,207,0)
        transport global.
"PKG",26,22,1,"PAH",1,1,208,0)
     
"PKG",26,22,1,"PAH",1,1,209,0)
4.  From the Installation Menu, select the Install Package(s) option and
"PKG",26,22,1,"PAH",1,1,210,0)
    choose the patch to install.
"PKG",26,22,1,"PAH",1,1,211,0)
 
"PKG",26,22,1,"PAH",1,1,212,0)
5.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
"PKG",26,22,1,"PAH",1,1,213,0)
    Install? NO//'     
"PKG",26,22,1,"PAH",1,1,214,0)
    Respond: NO
"PKG",26,22,1,"PAH",1,1,215,0)
 
"PKG",26,22,1,"PAH",1,1,216,0)
6.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
"PKG",26,22,1,"PAH",1,1,217,0)
    NO//'
"PKG",26,22,1,"PAH",1,1,218,0)
    Respond: NO
"PKG",26,22,1,"PAH",1,1,219,0)
 
"PKG",26,22,1,"PAH",1,1,220,0)
7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
"PKG",26,22,1,"PAH",1,1,221,0)
    and Protocols? NO//' 
"PKG",26,22,1,"PAH",1,1,222,0)
    Respond: NO
"PKG",26,22,1,"PAH",1,1,223,0)
 
"PKG",26,22,1,"PAH",1,1,224,0)
8.  If prompted 'Delay Install (Minutes):  (0 - 60): 0//' respond 0.
"PKG",26,22,1,"PAH",1,1,225,0)
 
"PKG",26,22,1,"PAH",1,1,226,0)
 
"PKG",26,22,1,"PAH",1,1,227,0)
Post-Installation Instructions:
"PKG",26,22,1,"PAH",1,1,228,0)
-------------------------------
"PKG",26,22,1,"PAH",1,1,229,0)
N/A
"PKG",26,22,1,"PAH",1,1,230,0)
 
"PKG",26,22,1,"PAH",1,1,231,0)
 
"PKG",26,22,1,"PAH",1,1,232,0)
Routine Information:
"PKG",26,22,1,"PAH",1,1,233,0)
====================
"PKG",26,22,1,"PAH",1,1,234,0)
 
"PKG",26,22,1,"PAH",1,1,235,0)
The second line of each of these routines now looks like:
"PKG",26,22,1,"PAH",1,1,236,0)
;;5.2;LAB SERVICE;**[Patch List]**;Sep 27, 1994;Build 1
"PKG",26,22,1,"PAH",1,1,237,0)
 
"PKG",26,22,1,"PAH",1,1,238,0)
The checksums below are new checksums, and
"PKG",26,22,1,"PAH",1,1,239,0)
can be checked with CHECK1^XTSUMBLD.
"PKG",26,22,1,"PAH",1,1,240,0)
 
"PKG",26,22,1,"PAH",1,1,241,0)
Routine Name: LR482
"PKG",26,22,1,"PAH",1,1,242,0)
    Before:       n/a   After:  B4627709  **482**
"PKG",26,22,1,"PAH",1,1,243,0)
Routine Name: LRAPRES1
"PKG",26,22,1,"PAH",1,1,244,0)
    Before: B70400068   After: B71690317  **259,336,369,365,397,413,350,
"PKG",26,22,1,"PAH",1,1,245,0)
                                           462,482**
"PKG",26,22,1,"PAH",1,1,246,0)
 
"PKG",26,22,1,"PAH",1,1,247,0)
Routine list of preceding patches: 462
"PRE")
LR482
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","LR482")
0^2^B4627709^n/a
"RTN","LR482",1,0)
LR482 ;DALOI/FHS/TFF - LR*5.2*462 PATCH ENVIRONMENT CHECK ROUTINE; [1/25/17 3:17pm]
"RTN","LR482",2,0)
 ;;5.2;LAB SERVICE;**482**;Sep 27, 1994;Build 2
"RTN","LR482",3,0)
ENV ; Does not prevent loading of the transport global.
"RTN","LR482",4,0)
 ; Environment check is done only during the install.
"RTN","LR482",5,0)
 ;
"RTN","LR482",6,0)
 N XQA,XQAMSG
"RTN","LR482",7,0)
 ;
"RTN","LR482",8,0)
CHKNM ; Make sure the patch name exist
"RTN","LR482",9,0)
 S XUMF=1
"RTN","LR482",10,0)
 I '$D(XPDNM) D  G EXIT
"RTN","LR482",11,0)
 . D BMES("No valid patch name exist")
"RTN","LR482",12,0)
 . S XPDQUIT=2
"RTN","LR482",13,0)
 ;
"RTN","LR482",14,0)
 D CHECK
"RTN","LR482",15,0)
 D EXIT
"RTN","LR482",16,0)
 Q
"RTN","LR482",17,0)
 ;
"RTN","LR482",18,0)
CHECK ; Perform environment check
"RTN","LR482",19,0)
 I $S('$G(IOM):1,'$G(IOSL):1,$G(U)'="^":1,1:0) D
"RTN","LR482",20,0)
 . D BMES("Terminal Device is not defined")
"RTN","LR482",21,0)
 . S XPDQUIT=2
"RTN","LR482",22,0)
 I $S('$G(DUZ):1,$D(DUZ)[0:1,$D(DUZ(0))[0:1,1:0) D
"RTN","LR482",23,0)
 . D BMES("Please log in to set local DUZ... variables")
"RTN","LR482",24,0)
 . S XPDQUIT=2
"RTN","LR482",25,0)
 I $P($$ACTIVE^XUSER(DUZ),"^")'=1 D
"RTN","LR482",26,0)
 . D BMES("You are not a valid user on this system")
"RTN","LR482",27,0)
 . S XPDQUIT=2
"RTN","LR482",28,0)
 S XPDIQ("XPZ1","B")="NO" Q
"RTN","LR482",29,0)
EXIT ;
"RTN","LR482",30,0)
 N XQA
"RTN","LR482",31,0)
 I $G(XPDQUIT) D BMES("--- Install Environment Check FAILED ---") Q
"RTN","LR482",32,0)
 D BMES("--- Environment Check is Ok ---")
"RTN","LR482",33,0)
 S XQAMSG="Loading of patch "_$G(XPDNM,"Unknown patch")_" completed on "_$$HTE^XLFDT($H)
"RTN","LR482",34,0)
 D BMES("Sending install loaded alert to mail group G.LMI")
"RTN","LR482",35,0)
 S XQA("G.LMI")=""
"RTN","LR482",36,0)
 D SETUP^XQALERT
"RTN","LR482",37,0)
 H 5
"RTN","LR482",38,0)
 Q
"RTN","LR482",39,0)
 ;
"RTN","LR482",40,0)
PRE ;Pre-install entry point
"RTN","LR482",41,0)
 Q:'$D(XPDNM)
"RTN","LR482",42,0)
 ;
"RTN","LR482",43,0)
 D BMES("*** Preinstall completed ***")
"RTN","LR482",44,0)
 Q
"RTN","LR482",45,0)
POST ;Post install
"RTN","LR482",46,0)
 D
"RTN","LR482",47,0)
 . D BMES("Sending install completion alert to mail group G.LMI")
"RTN","LR482",48,0)
 . S XQAMSG="Installation of patch "_$G(XPDNM,"Unknown patch")_" Installed on "_$$HTE^XLFDT($H)
"RTN","LR482",49,0)
 . S XQA("G.LMI")=""
"RTN","LR482",50,0)
 . D SETUP^XQALERT
"RTN","LR482",51,0)
 K LRDA,LRPRT,LRVR
"RTN","LR482",52,0)
 Q
"RTN","LR482",53,0)
BMES(STR) ;Write BMES^XPDUTL statements
"RTN","LR482",54,0)
 D BMES^XPDUTL($$CJ^XLFSTR(STR,IOM))
"RTN","LR482",55,0)
 Q
"RTN","LR482",56,0)
 ;
"RTN","LRAPRES1")
0^1^B71690317^B70400068
"RTN","LRAPRES1",1,0)
LRAPRES1 ;DALOI/STAFF - AP ESIG RELEASE REPORT/ALERT ;01/24/17  14:51
"RTN","LRAPRES1",2,0)
 ;;5.2;LAB SERVICE;**259,336,369,365,397,413,350,462,482**;Sep 27, 1994;Build 2
"RTN","LRAPRES1",3,0)
 ;
"RTN","LRAPRES1",4,0)
 ; Reference to FILE^TIUSRVP supported by ICR #3540
"RTN","LRAPRES1",5,0)
 ; Reference to ^TIULQ supported by ICR #2693
"RTN","LRAPRES1",6,0)
 ; Reference to LAB^ORB3LAB supported by ICR #4287
"RTN","LRAPRES1",7,0)
 ;
"RTN","LRAPRES1",8,0)
MAIN(LRDFN,LRSS,LRI,LRSF,LRP,LRAC) ;Main subroutine
"RTN","LRAPRES1",9,0)
 Q:'$D(LRDFN)!('$D(LRSS))!('$D(LRP))!('$D(LRAC))
"RTN","LRAPRES1",10,0)
 ;
"RTN","LRAPRES1",11,0)
 N DIR,DIRUT,DTOUT,DUOUT,LRDOCS,LRMSG,LRC,LRNUM,LRADL,LRMORE,LRQUIT,LRXQA,X,Y,DIC,XQA,XQAMSG
"RTN","LRAPRES1",12,0)
 ;
"RTN","LRAPRES1",13,0)
 S LRQUIT=0
"RTN","LRAPRES1",14,0)
 ;
"RTN","LRAPRES1",15,0)
 ; CPRS alerts only sent for "patients" related to PATIENT file (#2)
"RTN","LRAPRES1",16,0)
 I $P($G(^LR(LRDFN,0)),"^",2)'=2 Q
"RTN","LRAPRES1",17,0)
 ;
"RTN","LRAPRES1",18,0)
 D DOCS,MORE
"RTN","LRAPRES1",19,0)
 I LRMORE D LOOKUP
"RTN","LRAPRES1",20,0)
 D ALERT
"RTN","LRAPRES1",21,0)
 ;;*
"RTN","LRAPRES1",22,0)
LR7OB1 ;Update CPRS package reference and status of complete
"RTN","LRAPRES1",23,0)
 D
"RTN","LRAPRES1",24,0)
 . Q:LRSS="AU"  ;Do not update CPRS for Autopsy - AU does not update CPRS
"RTN","LRAPRES1",25,0)
 . NEW LRX,LR
"RTN","LRAPRES1",26,0)
 . S LRX=$G(^LRO(68,LRAA,1,LRAD,1,LRAN,0))
"RTN","LRAPRES1",27,0)
 . Q:'$G(LRX)
"RTN","LRAPRES1",28,0)
 . S LR(4)=$P(LRX,U,4),LR(5)=$P(LRX,U,5)
"RTN","LRAPRES1",29,0)
 . Q:$S('LR(4):1,'LR(5):1,1:0)
"RTN","LRAPRES1",30,0)
 . D NEW^LR7OB1(LR(4),LR(5),"RE",,+LRT)
"RTN","LRAPRES1",31,0)
 ;;;*
"RTN","LRAPRES1",32,0)
 Q
"RTN","LRAPRES1",33,0)
 ;
"RTN","LRAPRES1",34,0)
 ;
"RTN","LRAPRES1",35,0)
DOCS ; Get ordering provider and PCP/attending to send alert
"RTN","LRAPRES1",36,0)
 N LRNUM,LRMSG
"RTN","LRAPRES1",37,0)
 S:$G(LRSF)="" LRSF=63
"RTN","LRAPRES1",38,0)
 D GETDOCS^LRAPUTL(.LRDOCS,LRDFN,LRSS,$G(LRI),LRSF)
"RTN","LRAPRES1",39,0)
 S (LRNUM,LRQUIT)=1,LRC=0
"RTN","LRAPRES1",40,0)
 F  S LRC=$O(LRDOCS(LRC)) Q:LRC<1  D
"RTN","LRAPRES1",41,0)
 . I $D(LRXQA(+LRDOCS(LRC))) S LRXQA(+LRDOCS(LRC))=LRXQA(+LRDOCS(LRC))_"/"_$P(LRDOCS(LRC),"^",3) Q
"RTN","LRAPRES1",42,0)
 . S LRXQA(+LRDOCS(LRC))=$P(LRDOCS(LRC),"^",3),LRQUIT=0
"RTN","LRAPRES1",43,0)
 ;
"RTN","LRAPRES1",44,0)
 I 'LRQUIT D
"RTN","LRAPRES1",45,0)
 . S LRC=0,LRMSG(LRNUM)="Mandatory Alert will be sent to: ",LRMSG(LRNUM,"F")="!!"
"RTN","LRAPRES1",46,0)
 . F  S LRC=$O(LRDOCS(LRC)) Q:LRC<1  D
"RTN","LRAPRES1",47,0)
 . . S LRNUM=LRNUM+1,LRMSG(LRNUM)=$P(LRDOCS(LRC),"^",2)_"  ["_$P(LRDOCS(LRC),"^",3)_"]"
"RTN","LRAPRES1",48,0)
 . . S LRMSG(LRNUM,"F")=$S(LRNUM>2:"!",1:"")_"?33"
"RTN","LRAPRES1",49,0)
 I LRQUIT S LRMSG(LRNUM)="No Ordering Provider or PCP selected for alert",LRMSG(LRNUM,"F")="!!",LRQUIT=0
"RTN","LRAPRES1",50,0)
 D EN^DDIOL(.LRMSG)
"RTN","LRAPRES1",51,0)
 Q
"RTN","LRAPRES1",52,0)
 ;
"RTN","LRAPRES1",53,0)
 ;
"RTN","LRAPRES1",54,0)
MORE ; Add names or mail groups to the lookup list?
"RTN","LRAPRES1",55,0)
 N DIR,DIRUT,DTOUT,DUOUT,X,Y
"RTN","LRAPRES1",56,0)
 W !
"RTN","LRAPRES1",57,0)
 S LRMORE=1
"RTN","LRAPRES1",58,0)
 S DIR(0)="Y"
"RTN","LRAPRES1",59,0)
 S DIR("A")="Send the alert to additional recipients and/or mail groups"
"RTN","LRAPRES1",60,0)
 S X=$$GET^XPAR("USR^DIV^PKG","LRAPRES1 AP ALERT",1,"Q")
"RTN","LRAPRES1",61,0)
 S DIR("B")=$S(X=1:"YES",1:"NO")
"RTN","LRAPRES1",62,0)
 S DIR("?")="^D AHELP^LRAPRES1"
"RTN","LRAPRES1",63,0)
 D ^DIR
"RTN","LRAPRES1",64,0)
 I Y=0 S LRMORE=0 Q
"RTN","LRAPRES1",65,0)
 I $D(DUOUT)!($D(DTOUT)) S LRQUIT=1
"RTN","LRAPRES1",66,0)
 Q
"RTN","LRAPRES1",67,0)
 ;
"RTN","LRAPRES1",68,0)
 ;
"RTN","LRAPRES1",69,0)
LOOKUP ; Add additional names or mail groups to alert list.
"RTN","LRAPRES1",70,0)
 N DIC,DIR,DIRUT,DTOUT,DUOUT,LRADL,LRDELETE,X,Y
"RTN","LRAPRES1",71,0)
 S LRQUIT=0
"RTN","LRAPRES1",72,0)
 F  D  Q:LRQUIT
"RTN","LRAPRES1",73,0)
 . W !
"RTN","LRAPRES1",74,0)
 . K DIR
"RTN","LRAPRES1",75,0)
 . S LRDELETE=0
"RTN","LRAPRES1",76,0)
 . S DIR(0)="FO^3:30^I X["".""&(X'?1""G."".E) K X"
"RTN","LRAPRES1",77,0)
 . S DIR("A")="Enter name or mail group"
"RTN","LRAPRES1",78,0)
 . S DIR("?",1)="Prefix selection with '-' to delete a recipient"
"RTN","LRAPRES1",79,0)
 . S DIR("?",2)="Enter lastname,firstname OR G.mailgroup OR ^ to exit"
"RTN","LRAPRES1",80,0)
 . S DIR("?")="Enter '??' for additional help and listing of currently selected recipients."
"RTN","LRAPRES1",81,0)
 . S DIR("??")="^D AHELP2^LRAPRES1"
"RTN","LRAPRES1",82,0)
 . S DIR("PRE")="I '$D(DTOUT),$E(X)=""-"" S X=$E(X,2,9999),LRDELETE=1"
"RTN","LRAPRES1",83,0)
 . D ^DIR
"RTN","LRAPRES1",84,0)
 . I $D(DIRUT) S LRQUIT=1 Q
"RTN","LRAPRES1",85,0)
 . S LRADL="",Y=$$UP^XLFSTR(Y)
"RTN","LRAPRES1",86,0)
 . I Y["." S LRADL=$P(Y,"."),X=$P(Y,".",2)
"RTN","LRAPRES1",87,0)
 . K DIC
"RTN","LRAPRES1",88,0)
 . S DIC(0)="QEZ"
"RTN","LRAPRES1",89,0)
 . S DIC=$S(LRADL="G":3.8,1:200)
"RTN","LRAPRES1",90,0)
 . D ^DIC
"RTN","LRAPRES1",91,0)
 . Q:Y=-1
"RTN","LRAPRES1",92,0)
 . I LRDELETE D
"RTN","LRAPRES1",93,0)
 . . I LRADL="" K XQA($P(Y,"^")) Q
"RTN","LRAPRES1",94,0)
 . . I LRADL="G" K XQA("G."_$P(Y,"^",2))
"RTN","LRAPRES1",95,0)
 . E  D
"RTN","LRAPRES1",96,0)
 . . I LRADL="",'$D(XQA($P(Y,"^"))) S XQA($P(Y,"^"))="Additional User" Q
"RTN","LRAPRES1",97,0)
 . . I LRADL="G" S XQA("G."_$P(Y,"^",2))="Additional Mail Group"
"RTN","LRAPRES1",98,0)
 . K LRMSG
"RTN","LRAPRES1",99,0)
 . S LRMSG=$S(LRADL="G":"Mail group ",1:"User ")_$P(Y,"^",2)_$S(LRDELETE:" deleted from",1:" added to")_" alert list."
"RTN","LRAPRES1",100,0)
 . D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPRES1",101,0)
 Q
"RTN","LRAPRES1",102,0)
 ;
"RTN","LRAPRES1",103,0)
 ;
"RTN","LRAPRES1",104,0)
ALERT ; Send the alert
"RTN","LRAPRES1",105,0)
 ;
"RTN","LRAPRES1",106,0)
 M XQA=LRXQA
"RTN","LRAPRES1",107,0)
 I '$D(XQA) D EN^DDIOL("Alerts NOT sent - no alert recipients identified!","","!!") Q
"RTN","LRAPRES1",108,0)
 ;
"RTN","LRAPRES1",109,0)
 D LAB^ORB3LAB(DFN,LRDFN,LRI,$G(LRA),LRSS,.XQA)
"RTN","LRAPRES1",110,0)
 ;
"RTN","LRAPRES1",111,0)
 D EN^DDIOL("Alerts have been sent.","","!!")
"RTN","LRAPRES1",112,0)
 Q
"RTN","LRAPRES1",113,0)
 ;
"RTN","LRAPRES1",114,0)
 ;
"RTN","LRAPRES1",115,0)
AHELP ; Help Frame
"RTN","LRAPRES1",116,0)
 N LRI,LRJ,LRMSG
"RTN","LRAPRES1",117,0)
 S LRMSG(1)="Enter either 'Y' or 'N'."
"RTN","LRAPRES1",118,0)
 S LRMSG(2)="If answered 'Yes', you will also have the opportunity to send alerts",LRMSG(2,"F")="!!"
"RTN","LRAPRES1",119,0)
 S LRMSG(3)="to additional recipients and/or mail groups."
"RTN","LRAPRES1",120,0)
 S LRMSG(4)="A mandatory alert is sent to the ordering provider/surgeon and the primary care",LRMSG(4,"F")="!!"
"RTN","LRAPRES1",121,0)
 S LRMSG(5)="provider/attending that this report has been electronically signed and is now"
"RTN","LRAPRES1",122,0)
 S LRMSG(6)="available for viewing."
"RTN","LRAPRES1",123,0)
 S LRJ=6
"RTN","LRAPRES1",124,0)
 D CHELP
"RTN","LRAPRES1",125,0)
 Q
"RTN","LRAPRES1",126,0)
 ;
"RTN","LRAPRES1",127,0)
AHELP2 ; Help frame entry point for additional recipients selection
"RTN","LRAPRES1",128,0)
 ;
"RTN","LRAPRES1",129,0)
 N LRI,LRJ,LRMSG
"RTN","LRAPRES1",130,0)
 S LRMSG(1)="A mandatory alert is sent to the ordering provider/surgeon and the primary care",LRMSG(4,"F")="!!"
"RTN","LRAPRES1",131,0)
 S LRMSG(2)="provider/attending that this report has been electronically signed and is now"
"RTN","LRAPRES1",132,0)
 S LRMSG(3)="available for viewing."
"RTN","LRAPRES1",133,0)
 S LRJ=3
"RTN","LRAPRES1",134,0)
 D CHELP
"RTN","LRAPRES1",135,0)
 Q
"RTN","LRAPRES1",136,0)
 ;
"RTN","LRAPRES1",137,0)
 ;
"RTN","LRAPRES1",138,0)
CHELP ; Display common help
"RTN","LRAPRES1",139,0)
 ;
"RTN","LRAPRES1",140,0)
 I '$D(LRXQA) S LRJ=LRJ+1,LRMSG(LRJ)="No mandatory recipients listed",LRMSG(LRJ,"F")="!!"
"RTN","LRAPRES1",141,0)
 E  D
"RTN","LRAPRES1",142,0)
 . S LRI=0,LRJ=LRJ+1,LRMSG(LRJ)="The current mandatory recipients will be:",LRMSG(LRJ,"F")="!!"
"RTN","LRAPRES1",143,0)
 . F  S LRI=$O(LRXQA(LRI)) Q:LRI<1  S LRJ=LRJ+1,LRMSG(LRJ)=$$NAME^XUSER(LRI,"F")_"  ["_LRXQA(LRI)_"]"
"RTN","LRAPRES1",144,0)
 ;
"RTN","LRAPRES1",145,0)
 I '$D(XQA) S LRJ=LRJ+1,LRMSG(LRJ)="No additional recipients listed",LRMSG(LRJ,"F")="!!"
"RTN","LRAPRES1",146,0)
 E  D
"RTN","LRAPRES1",147,0)
 . S LRI="",LRJ=LRJ+1,LRMSG(LRJ)="The current additional recipients will be:",LRMSG(LRJ,"F")="!!"
"RTN","LRAPRES1",148,0)
 . F  S LRI=$O(XQA(LRI)) Q:LRI=""  S LRJ=LRJ+1,LRMSG(LRJ)=$S(LRI:$$NAME^XUSER(LRI,"F"),1:LRI)_"  ["_XQA(LRI)_"]"
"RTN","LRAPRES1",149,0)
 ;
"RTN","LRAPRES1",150,0)
 D EN^DDIOL(.LRMSG)
"RTN","LRAPRES1",151,0)
 Q
"RTN","LRAPRES1",152,0)
 ;
"RTN","LRAPRES1",153,0)
 ;
"RTN","LRAPRES1",154,0)
RETRACT(LRDFN,LRSS,LRI,LRTIUPTR) ;
"RTN","LRAPRES1",155,0)
 ; Change prior TIU versions of report to RETRACTED status
"RTN","LRAPRES1",156,0)
 N LRROOT,LRIENS,LRFILE,LRTIUP,LRTIUAR,LRERR,LRSTAT,LRTIUX,LREXRR
"RTN","LRAPRES1",157,0)
 I LRSS=""!("AUSPEMCY"'[LRSS) S LRPTR=0 Q
"RTN","LRAPRES1",158,0)
 I LRSS="AU" D
"RTN","LRAPRES1",159,0)
 . S LRROOT="^LR(LRDFN,101,""C""",LRIENS=LRDFN_","
"RTN","LRAPRES1",160,0)
 . S LRFILE=63.101
"RTN","LRAPRES1",161,0)
 I LRSS'="AU" D
"RTN","LRAPRES1",162,0)
 . S LRROOT="^LR(LRDFN,LRSS,LRI,.05,""C"""
"RTN","LRAPRES1",163,0)
 . S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPRES1",164,0)
 . S LRFILE=$S(LRSS="SP":63.19,LRSS="CY":63.47,LRSS="EM":63.49,1:"")
"RTN","LRAPRES1",165,0)
 Q:'$D(@(LRROOT_")"))
"RTN","LRAPRES1",166,0)
 S LRTIUP=0,LRTIUX(.05)=15
"RTN","LRAPRES1",167,0)
 F  S LRTIUP=$O(@(LRROOT_",LRTIUP)"))  Q:LRTIUP'>0!(LRTIUP=LRTIUPTR)  D
"RTN","LRAPRES1",168,0)
 . K LRTIUAR S (LRSTAT,LRERR)=0
"RTN","LRAPRES1",169,0)
 . D EXTRACT^TIULQ(LRTIUP,"LRTIUAR",.LRERR,".05",,,"I")
"RTN","LRAPRES1",170,0)
 . Q:+LRERR
"RTN","LRAPRES1",171,0)
 . M LRSTAT=LRTIUAR(LRTIUP,.05,"I")
"RTN","LRAPRES1",172,0)
 . Q:LRSTAT'=7  ;Quit if current status is not COMPLETED
"RTN","LRAPRES1",173,0)
 . D FILE^TIUSRVP(.LREXRR,LRTIUP,.LRTIUX)
"RTN","LRAPRES1",174,0)
 . ; Update new TIU version of report with previous TIU pointer value
"RTN","LRAPRES1",175,0)
 . N LREXRR,LRTIUX
"RTN","LRAPRES1",176,0)
 . S LRTIUX(1406)=LRTIUP
"RTN","LRAPRES1",177,0)
 . D FILE^TIUSRVP(.LREXRR,LRTIUPTR,.LRTIUX)
"RTN","LRAPRES1",178,0)
 Q
"RTN","LRAPRES1",179,0)
 ;
"RTN","LRAPRES1",180,0)
 ;
"RTN","LRAPRES1",181,0)
CLSSCHK(DUZ,LREND) ; Determine if user has the proper class settings and PROVIDER key
"RTN","LRAPRES1",182,0)
 ;
"RTN","LRAPRES1",183,0)
 N LRMSG,LRPRCLSS,LRPCEXP,LRVCDE,LRPCSTR,LRMTCH
"RTN","LRAPRES1",184,0)
 ; First, check for PROVIDER key
"RTN","LRAPRES1",185,0)
 I '$D(^XUSEC("PROVIDER",DUZ)) D  Q
"RTN","LRAPRES1",186,0)
 . D EN^DDIOL($C(7)_"Electronic signature not authorized.  Missing PROVIDER key.","","!!")
"RTN","LRAPRES1",187,0)
 . S LREND=1
"RTN","LRAPRES1",188,0)
 ; Next, check the provider class
"RTN","LRAPRES1",189,0)
 ; PROVIDER CL must contain PHYSICIAN, or CYTOTECH only for CY section
"RTN","LRAPRES1",190,0)
 ; or DENTIST for ORAL AND MAXILLOFACIAL PATHOLOGY
"RTN","LRAPRES1",191,0)
 S LRPRCLSS=$$GET1^DIQ(200,DUZ_",",53.5)
"RTN","LRAPRES1",192,0)
 S LRMTCH=0
"RTN","LRAPRES1",193,0)
 I LRPRCLSS'["PHYSICIAN",LRPRCLSS'["DENTIST" D
"RTN","LRAPRES1",194,0)
 . I LRPRCLSS'["CYTOTECH" S LRMTCH=1
"RTN","LRAPRES1",195,0)
 . I LRSS'="CY" S LRMTCH=1
"RTN","LRAPRES1",196,0)
 I LRMTCH=1 D  Q
"RTN","LRAPRES1",197,0)
 . N LRMSG
"RTN","LRAPRES1",198,0)
 . S LRMSG(1)=$C(7)_"You are not authorized to electronically sign reports.",LRMSG(1,"F")="!!"
"RTN","LRAPRES1",199,0)
 . S LRMSG(2)="PROVIDER CLASS must include PHYSICIAN,"
"RTN","LRAPRES1",200,0)
 . S LRMSG(3)=" or CYTOTECHNOLOGIST for CY SECTIONS ONLY,"
"RTN","LRAPRES1",201,0)
 . S LRMSG(4)=" or DENTIST for ORAL AND MAXILLOFACIAL PATHOLOGY."
"RTN","LRAPRES1",202,0)
 . D EN^DDIOL(.LRMSG)
"RTN","LRAPRES1",203,0)
 . S LREND=1
"RTN","LRAPRES1",204,0)
 ;
"RTN","LRAPRES1",205,0)
 ; Finally, check the person class
"RTN","LRAPRES1",206,0)
 S LRPCSTR=$$GET^XUA4A72(DUZ)
"RTN","LRAPRES1",207,0)
 I LRPCSTR<0 D  Q
"RTN","LRAPRES1",208,0)
 . D EN^DDIOL("PERSON CLASS is inactive or undefined.  Electronic signature is not authorized.","","!!")
"RTN","LRAPRES1",209,0)
 . S LREND=1
"RTN","LRAPRES1",210,0)
 S LRPCEXP=+$P(LRPCSTR,"^",6)
"RTN","LRAPRES1",211,0)
 I LRPCEXP,LRPCEXP<DT D  Q
"RTN","LRAPRES1",212,0)
 . D EN^DDIOL("PERSON CLASS has expired.  Electronic signature is not authorized.","","!!")
"RTN","LRAPRES1",213,0)
 . S LREND=1
"RTN","LRAPRES1",214,0)
 S LRVCDE=$P(LRPCSTR,"^",7),LRMTCH=0
"RTN","LRAPRES1",215,0)
 ;
"RTN","LRAPRES1",216,0)
 ; Correct PERSON Class should match PROVIDER Class
"RTN","LRAPRES1",217,0)
 I LRPRCLSS["PHYSICIAN" D
"RTN","LRAPRES1",218,0)
 . I $E(LRVCDE,1,6)="V11370","123568"[+$E(LRVCDE,7) S LRMTCH=1 Q
"RTN","LRAPRES1",219,0)
 . I $E(LRVCDE,1,6)="V11371","03"[+$E(LRVCDE,7) S LRMTCH=1 Q
"RTN","LRAPRES1",220,0)
 . I $E(LRVCDE,1,6)="V18240","124579"[+$E(LRVCDE,7) S LRMTCH=1 Q
"RTN","LRAPRES1",221,0)
 . I LRVCDE="V182413" S LRMTCH=1
"RTN","LRAPRES1",222,0)
 ;
"RTN","LRAPRES1",223,0)
 I LRPRCLSS["CYTOTECH",LRVCDE="V150113" S LRMTCH=1
"RTN","LRAPRES1",224,0)
 I LRPRCLSS["DENTIST",LRVCDE="V030503" S LRMTCH=1
"RTN","LRAPRES1",225,0)
 ;
"RTN","LRAPRES1",226,0)
 I 'LRMTCH D
"RTN","LRAPRES1",227,0)
 . D EN^DDIOL("Invalid PERSON CLASS.  Electronic Signature is not authorized.","","!!")
"RTN","LRAPRES1",228,0)
 . S LREND=1
"RTN","LRAPRES1",229,0)
 Q
"VER")
8.0^22
"BLD",9849,6)
^381
**END**
**END**

