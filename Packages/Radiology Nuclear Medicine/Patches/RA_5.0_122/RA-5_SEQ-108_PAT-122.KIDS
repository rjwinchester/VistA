Released RA*5*122 SEQ #108
Extracted from mail message
**KIDS**:RA*5.0*122^

**INSTALL NAME**
RA*5.0*122
"BLD",9046,0)
RA*5.0*122^RADIOLOGY/NUCLEAR MEDICINE^0^3150507^y
"BLD",9046,1,0)
^^1^1^3150326^
"BLD",9046,1,1,0)
CORRECT ABNORMAL NOTATION IN CPRS REPORT LIST
"BLD",9046,4,0)
^9.64PA^^
"BLD",9046,6.3)
3
"BLD",9046,"KRN",0)
^9.67PA^779.2^20
"BLD",9046,"KRN",.4,0)
.4
"BLD",9046,"KRN",.401,0)
.401
"BLD",9046,"KRN",.402,0)
.402
"BLD",9046,"KRN",.403,0)
.403
"BLD",9046,"KRN",.5,0)
.5
"BLD",9046,"KRN",.84,0)
.84
"BLD",9046,"KRN",3.6,0)
3.6
"BLD",9046,"KRN",3.8,0)
3.8
"BLD",9046,"KRN",9.2,0)
9.2
"BLD",9046,"KRN",9.8,0)
9.8
"BLD",9046,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",9046,"KRN",9.8,"NM",1,0)
RAO7PC1A^^0^B50553247
"BLD",9046,"KRN",9.8,"NM","B","RAO7PC1A",1)

"BLD",9046,"KRN",19,0)
19
"BLD",9046,"KRN",19.1,0)
19.1
"BLD",9046,"KRN",101,0)
101
"BLD",9046,"KRN",409.61,0)
409.61
"BLD",9046,"KRN",771,0)
771
"BLD",9046,"KRN",779.2,0)
779.2
"BLD",9046,"KRN",870,0)
870
"BLD",9046,"KRN",8989.51,0)
8989.51
"BLD",9046,"KRN",8989.52,0)
8989.52
"BLD",9046,"KRN",8994,0)
8994
"BLD",9046,"KRN","B",.4,.4)

"BLD",9046,"KRN","B",.401,.401)

"BLD",9046,"KRN","B",.402,.402)

"BLD",9046,"KRN","B",.403,.403)

"BLD",9046,"KRN","B",.5,.5)

"BLD",9046,"KRN","B",.84,.84)

"BLD",9046,"KRN","B",3.6,3.6)

"BLD",9046,"KRN","B",3.8,3.8)

"BLD",9046,"KRN","B",9.2,9.2)

"BLD",9046,"KRN","B",9.8,9.8)

"BLD",9046,"KRN","B",19,19)

"BLD",9046,"KRN","B",19.1,19.1)

"BLD",9046,"KRN","B",101,101)

"BLD",9046,"KRN","B",409.61,409.61)

"BLD",9046,"KRN","B",771,771)

"BLD",9046,"KRN","B",779.2,779.2)

"BLD",9046,"KRN","B",870,870)

"BLD",9046,"KRN","B",8989.51,8989.51)

"BLD",9046,"KRN","B",8989.52,8989.52)

"BLD",9046,"KRN","B",8994,8994)

"BLD",9046,"QUES",0)
^9.62^^
"BLD",9046,"REQB",0)
^9.611^1^1
"BLD",9046,"REQB",1,0)
RA*5.0*56^1
"BLD",9046,"REQB","B","RA*5.0*56",1)

"MBREQ")
0
"PKG",18,-1)
1^1
"PKG",18,0)
RADIOLOGY/NUCLEAR MEDICINE^RA^REGISTERS PATIENTS,RECORDS EXAMS,PROFILES,AMIS REPORTS
"PKG",18,20,0)
^9.402P^^
"PKG",18,22,0)
^9.49I^1^1
"PKG",18,22,1,0)
5.0^3051109^2980407^50
"PKG",18,22,1,"PAH",1,0)
122^3150507
"PKG",18,22,1,"PAH",1,1,0)
^^1^1^3150507
"PKG",18,22,1,"PAH",1,1,1,0)
CORRECT ABNORMAL NOTATION IN CPRS REPORT LIST
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","RAO7PC1A")
0^1^B50553247^B43220557
"RTN","RAO7PC1A",1,0)
RAO7PC1A ;HISC/GJC-Procedure Call utilities (cont) ;1/22/03  12:41
"RTN","RAO7PC1A",2,0)
 ;;5.0;Radiology/Nuclear Medicine;**1,10,26,31,36,45,56,122**;Mar 16, 1998;Build 3
"RTN","RAO7PC1A",3,0)
 ; 03/31/2015 KAM RA*5*122 Rem Ticket 1113213 Missing 'Abnormal' Notation in CPRS report list
"RTN","RAO7PC1A",4,0)
 ;Supported IA #10040 ^SC(
"RTN","RAO7PC1A",5,0)
 ;Supported IA #10103 DT^XLFDT, FMADD^XLFDT
"RTN","RAO7PC1A",6,0)
 ;Supported IA #2056 GET1^DIQ
"RTN","RAO7PC1A",7,0)
 ;Supported IA #10104 LOW^XLFSTR, UP^XLFSTR
"RTN","RAO7PC1A",8,0)
SETDATA ; Called from within the EN1 subroutine of RAO7PC1
"RTN","RAO7PC1A",9,0)
 ; Sets the ^TMP($J,"RAE1",patient ien,Exam ID) node.
"RTN","RAO7PC1A",10,0)
 ; See EN1^RAO7PC1 for further explanation.
"RTN","RAO7PC1A",11,0)
 ;
"RTN","RAO7PC1A",12,0)
 ; Output (new) :
"RTN","RAO7PC1A",13,0)
 ; ^TMP($J,"RAE1",Patient IEN,Exam ID,"CMOD",1)=cptmod^cptmodname
"RTN","RAO7PC1A",14,0)
 ;                                          ,2)=cptmod^cptmodname
"RTN","RAO7PC1A",15,0)
 N RA,RA1,RA2,RA3
"RTN","RAO7PC1A",16,0)
 S RANO=0,RAREX(0)=$G(^RADPT(RADFN,"DT",RAIBDT,0))
"RTN","RAO7PC1A",17,0)
 S RAITY=+$P(RAREX(0),"^",2),RAILOC=+$P(RAREX(0),"^",4)
"RTN","RAO7PC1A",18,0)
 S RAILOC=$P($G(^SC(+$P($G(^RA(79.1,RAILOC,0)),"^"),0)),"^")
"RTN","RAO7PC1A",19,0)
 S RAITY(0)=$G(^RA(79.2,RAITY,0))
"RTN","RAO7PC1A",20,0)
 F  S RANO=$O(^RADPT(RADFN,"DT",RAIBDT,"P",RANO)) Q:RANO'>0  D  Q:RAXIT
"RTN","RAO7PC1A",21,0)
 . S RAXAM(0)=$G(^RADPT(RADFN,"DT",RAIBDT,"P",RANO,0))
"RTN","RAO7PC1A",22,0)
 . Q:RAXAM(0)=""
"RTN","RAO7PC1A",23,0)
 . S RAORDER=+$P(RAXAM(0),"^",11)
"RTN","RAO7PC1A",24,0)
 . ; quit if exam is WAITING and its order status isn't ACTIVE
"RTN","RAO7PC1A",25,0)
 . ; because this means exam hasn't finished being registered
"RTN","RAO7PC1A",26,0)
 . I $P($G(^RA(72,+$P(RAXAM(0),U,3),0)),U,3)=1,$P($G(^RAO(75.1,RAORDER,0)),U,5)'=6 Q
"RTN","RAO7PC1A",27,0)
 . S RAORDER(7)=$P($G(^RAO(75.1,RAORDER,0)),"^",7) ; CPRS order ien
"RTN","RAO7PC1A",28,0)
 . S RAXSTAT=+$P(RAXAM(0),"^",3),RAXSTAT(0)=$G(^RA(72,RAXSTAT,0))
"RTN","RAO7PC1A",29,0)
 . S RAXID=RAIBDT_"-"_RANO
"RTN","RAO7PC1A",30,0)
 . S RACSE=$S($P(RAXAM(0),U)]"":$P(RAXAM(0),U),1:"Unknown")
"RTN","RAO7PC1A",31,0)
 . S RAPRC=$G(^RAMIS(71,+$P(RAXAM(0),U,2),0))
"RTN","RAO7PC1A",32,0)
 . S RACPT=+$P(RAPRC,"^",9) ; pntr to 81
"RTN","RAO7PC1A",33,0)
 . S RACPT=$$NAMCODE^RACPTMSC(RACPT,DT)
"RTN","RAO7PC1A",34,0)
 . S RACPT=$S($P(RACPT,"^",2)]"":$P(RACPT,"^"),1:"")
"RTN","RAO7PC1A",35,0)
 . S RAPRC=$S($P(RAPRC,U)]"":$P(RAPRC,U),1:"Unknown")
"RTN","RAO7PC1A",36,0)
 . ; quit if cancelled exam, and cancelled exams not requested
"RTN","RAO7PC1A",37,0)
 . I ('$G(RACINC)),($P($G(^RA(72,+$P(RAXAM(0),"^",3),0)),"^",3)=0) Q
"RTN","RAO7PC1A",38,0)
 . S RADIAG=+$P(RAXAM(0),U,13),RARPT=+$P(RAXAM(0),U,17)
"RTN","RAO7PC1A",39,0)
 .; E3R 17541, 15507
"RTN","RAO7PC1A",40,0)
 .; if want cancel'd cases returned, and this case is cancelled, then
"RTN","RAO7PC1A",41,0)
 .; also require div param ALLOW RPTS ON CANCELLED CASES? = Y and
"RTN","RAO7PC1A",42,0)
 .; presence of report, else skip this case
"RTN","RAO7PC1A",43,0)
 . I $G(RACINC),($P($G(^RA(72,+$P(RAXAM(0),"^",3),0)),"^",3)=0) D  Q:RASHOCAN=0
"RTN","RAO7PC1A",44,0)
 .. S RASHOCAN=0
"RTN","RAO7PC1A",45,0)
 .. I $P($G(^RA(79,+$P(RAREX(0),"^",3),.1)),"^",22)="Y",RARPT S RASHOCAN=1
"RTN","RAO7PC1A",46,0)
 .. Q
"RTN","RAO7PC1A",47,0)
 . S RABNOR=$$UP^XLFSTR($P($G(^RA(78.3,RADIAG,0)),U,4))
"RTN","RAO7PC1A",48,0)
 . ;
"RTN","RAO7PC1A",49,0)
 . ; 03/31/2015 KAM RA*5*122 Rem Ticket 1113213
"RTN","RAO7PC1A",50,0)
 . ; Added the next 5 lines
"RTN","RAO7PC1A",51,0)
 . ;
"RTN","RAO7PC1A",52,0)
 . N RADX,RADIAG2
"RTN","RAO7PC1A",53,0)
 . I RABNOR'="Y" D
"RTN","RAO7PC1A",54,0)
 .. S RADX=0 F  S RADX=$O(^RADPT(RADFN,"DT",RAIBDT,"P",RANO,"DX",RADX)) Q:(RADX'?1N)!(RADX="")!(RABNOR="Y")  D
"RTN","RAO7PC1A",55,0)
 ... S RADIAG2=$P(^RADPT(RADFN,"DT",RAIBDT,"P",RANO,"DX",RADX,0),"^")
"RTN","RAO7PC1A",56,0)
 ... S RABNOR=$$UP^XLFSTR($P($G(^RA(78.3,RADIAG2,0)),U,4))
"RTN","RAO7PC1A",57,0)
 . ;
"RTN","RAO7PC1A",58,0)
 . S:RABNOR'="Y" RABNOR=""
"RTN","RAO7PC1A",59,0)
 . S RABNORMR=$$UP^XLFSTR($P($G(^RA(78.3,RADIAG,0)),U,3))
"RTN","RAO7PC1A",60,0)
 . ;
"RTN","RAO7PC1A",61,0)
 . ; 03/31/2015 KAM RA*5*122 Rem Ticket 1113213  Added the next line
"RTN","RAO7PC1A",62,0)
 . ;
"RTN","RAO7PC1A",63,0)
 . I (RABNORMR'="Y"),($G(RADIAG2)'="") S RABNORMR=$$UP^XLFSTR($P($G(^RA(78.3,RADIAG2,0)),U,3))
"RTN","RAO7PC1A",64,0)
 . ;
"RTN","RAO7PC1A",65,0)
 . S:RABNORMR'="Y" RABNORMR=""
"RTN","RAO7PC1A",66,0)
 . S RARPTST=$$RSTAT(),RARPTST=$$UL(RARPTST)
"RTN","RAO7PC1A",67,0)
 . S ^TMP($J,"RAE1",RADFN,RAXID)=RAPRC_U_RACSE_U_RARPTST_U_RABNOR_U_$S(RARPT=0:"",1:RARPT)_U_$P(RAXSTAT(0),"^",3)_"~"_$P(RAXSTAT(0),"^")_U_RAILOC_U_$P(RAITY(0),"^",3)_"~"_$P(RAITY(0),"^")_U_RABNORMR_U_RACPT_U_$G(RAORDER(7))
"RTN","RAO7PC1A",68,0)
 . S ^TMP($J,"RAE1",RADFN,RAXID)=^TMP($J,"RAE1",RADFN,RAXID)_U_$S($O(^RARPT(RARPT,2005,0)):"Y",1:"N")
"RTN","RAO7PC1A",69,0)
 . D CPTMOD
"RTN","RAO7PC1A",70,0)
 . S RACNT=RACNT+1
"RTN","RAO7PC1A",71,0)
 .;
"RTN","RAO7PC1A",72,0)
 .; Condensed Radiology Display in CPRS GUI:
"RTN","RAO7PC1A",73,0)
 .; subtract from count if counting parent; count only 1 case from printset
"RTN","RAO7PC1A",74,0)
 .; and
"RTN","RAO7PC1A",75,0)
 .; store values of MEMBER OF SET and ordered parent procedure name
"RTN","RAO7PC1A",76,0)
 . I $D(RAEXNP),$E(RAEXNP,$L(RAEXNP))="P" D
"RTN","RAO7PC1A",77,0)
 .. I $P(RAXAM(0),U,25)="2",$O(^RADPT(RADFN,"DT",RAIBDT,"P",RANO),-1) S RACNT=RACNT-1
"RTN","RAO7PC1A",78,0)
 .. I $P(RAXAM(0),U,25) D
"RTN","RAO7PC1A",79,0)
 ... S RA3=$S('RAORDER:"",1:$P($G(^RAMIS(71,+$P($G(^RAO(75.1,+RAORDER,0)),U,2),0)),U))
"RTN","RAO7PC1A",80,0)
 ... S RA3=$S(RA3'="":RA3,1:"PARENT PROCEDURE")
"RTN","RAO7PC1A",81,0)
 ... S ^TMP($J,"RAE1",RADFN,RAXID,"CPRS")=$P(RAXAM(0),U,25)_U_RA3
"RTN","RAO7PC1A",82,0)
 ... Q
"RTN","RAO7PC1A",83,0)
 .. Q
"RTN","RAO7PC1A",84,0)
 . S:RACNT=RAEXN RAXIT=1
"RTN","RAO7PC1A",85,0)
 .; Condensed Radiology Display in CPRS GUI:
"RTN","RAO7PC1A",86,0)
 .; do not exit until all cases of printset have been stored
"RTN","RAO7PC1A",87,0)
 . I $D(RAEXNP),$E(RAEXNP,$L(RAEXNP))="P",$O(^RADPT(RADFN,"DT",RAIBDT,"P",RANO)) S RAXIT=0
"RTN","RAO7PC1A",88,0)
 . K RAXSTAT,RAORDER
"RTN","RAO7PC1A",89,0)
 . Q
"RTN","RAO7PC1A",90,0)
 K RAILOC,RAITY
"RTN","RAO7PC1A",91,0)
 Q
"RTN","RAO7PC1A",92,0)
CASE ; Return the case numbers and the total number of case numbers
"RTN","RAO7PC1A",93,0)
 ; associated with a particular order.  Called from CASE^RAO7PC1.
"RTN","RAO7PC1A",94,0)
 ; Sets RARRAY(case #)="" for all cases associated with an order.
"RTN","RAO7PC1A",95,0)
 ; Sets first piece of RATTL to the number of cases found for an
"RTN","RAO7PC1A",96,0)
 ; order, and the second piece is PRINTSET if the report covers
"RTN","RAO7PC1A",97,0)
 ; multiple cases.  See CASE^RAO7PC1 for more information.
"RTN","RAO7PC1A",98,0)
 I '$D(^RAO(75.1,RAOIFN,0))#2 S RATTL="-1^invalid order ien" Q
"RTN","RAO7PC1A",99,0)
 I '$D(^RADPT("AO",RAOIFN)) D  Q  ; case has yet to be registered
"RTN","RAO7PC1A",100,0)
 . S RATTL="-2^no case registered to date"
"RTN","RAO7PC1A",101,0)
 . Q
"RTN","RAO7PC1A",102,0)
 N RACNI,RADFN,RADTI,RAEXAM S RADFN=0
"RTN","RAO7PC1A",103,0)
 F  S RADFN=$O(^RADPT("AO",RAOIFN,RADFN)) Q:RADFN'>0  D
"RTN","RAO7PC1A",104,0)
 . S RADTI=0
"RTN","RAO7PC1A",105,0)
 . F  S RADTI=$O(^RADPT("AO",RAOIFN,RADFN,RADTI)) Q:RADTI'>0  D
"RTN","RAO7PC1A",106,0)
 .. S RACNI=0
"RTN","RAO7PC1A",107,0)
 .. F  S RACNI=$O(^RADPT("AO",RAOIFN,RADFN,RADTI,RACNI)) Q:RACNI'>0  D
"RTN","RAO7PC1A",108,0)
 ... S RAEXAM=$G(^RADPT(RADFN,"DT",RADTI,"P",RACNI,0))
"RTN","RAO7PC1A",109,0)
 ... Q:$P($G(^RA(72,+$P(RAEXAM,"^",3),0)),"^",3)=0  ; xam cancelled
"RTN","RAO7PC1A",110,0)
 ... S RATTL=+$G(RATTL)+1,@(RARRAY_"("_+RAEXAM_")")=""
"RTN","RAO7PC1A",111,0)
 ... Q
"RTN","RAO7PC1A",112,0)
 .. Q
"RTN","RAO7PC1A",113,0)
 . Q
"RTN","RAO7PC1A",114,0)
 I 'RATTL S RATTL="-2^cases cancelled" Q
"RTN","RAO7PC1A",115,0)
 S:$P(RAEXAM,"^",25)=2 RATTL=RATTL_"^PRINTSET" ; combined reports
"RTN","RAO7PC1A",116,0)
 Q
"RTN","RAO7PC1A",117,0)
 ;
"RTN","RAO7PC1A",118,0)
EN2 ; IA: 2012, Return last 7 days of non-cancelled exams
"RTN","RAO7PC1A",119,0)
 ; Required: RADFN (valid patient ien) called from EN2^RAO7PC1
"RTN","RAO7PC1A",120,0)
 ; Output:
"RTN","RAO7PC1A",121,0)
 ; ^TMP($J,"RAE7",Patient IEN,Exam ID)=procedure name^case number^
"RTN","RAO7PC1A",122,0)
 ;       report status^imaging location IEN^imaging location name^
"RTN","RAO7PC1A",123,0)
 ;       contrast medium or media used
"RTN","RAO7PC1A",124,0)
 ;       Note: Single characters in parenthesis indicate contrast
"RTN","RAO7PC1A",125,0)
 ;       involvement: (I)=Iodinated ionic; (N)=Iodinated non-ionic;
"RTN","RAO7PC1A",126,0)
 ;        (L)=Gadolinium; (C)=Oral Cholecystographic; (G)=Gastrografin;
"RTN","RAO7PC1A",127,0)
 ;        (B)=Barium; (M)=unspecified contrast media
"RTN","RAO7PC1A",128,0)
 ;
"RTN","RAO7PC1A",129,0)
 ; Exam ID: exam date/time (inverse) concatenated with the case IEN
"RTN","RAO7PC1A",130,0)
 ;
"RTN","RAO7PC1A",131,0)
 Q:'$D(RADFN)  Q:'RADFN  K ^TMP($J,"RAE7")
"RTN","RAO7PC1A",132,0)
 N I,RABDT,RACNST,RACSE,RADT,RAEDT,RAIBDT,RAIEDT,RALOC,RACMEDIA,RANO
"RTN","RAO7PC1A",133,0)
 N RAPRC,RAREX,RARPT,RARPTST,RAXAM,RAXID,RAXSTAT
"RTN","RAO7PC1A",134,0)
 S RADT=$S($D(DT)#2:DT,1:$$DT^XLFDT()),RACNST=9999999.9999
"RTN","RAO7PC1A",135,0)
 S RABDT=$$FMADD^XLFDT(RADT,-7,0,0,0),RAEDT=RADT
"RTN","RAO7PC1A",136,0)
 S RAIBDT=RACNST-(RAEDT+.9999),RAIEDT=RACNST-(RABDT-.0001)
"RTN","RAO7PC1A",137,0)
 F  S RAIBDT=$O(^RADPT(RADFN,"DT",RAIBDT)) Q:RAIBDT'>0!(RAIBDT>RAIEDT)  D
"RTN","RAO7PC1A",138,0)
 . S RANO=0,RAREX(0)=$G(^RADPT(RADFN,"DT",RAIBDT,0))
"RTN","RAO7PC1A",139,0)
 . S RALOC=+$P(RAREX(0),U,4),RALOC(0)=$G(^RA(79.1,RALOC,0))
"RTN","RAO7PC1A",140,0)
 . S RALOC=$P($G(^SC(+RALOC(0),0)),"^")
"RTN","RAO7PC1A",141,0)
 . F  S RANO=$O(^RADPT(RADFN,"DT",RAIBDT,"P",RANO)) Q:RANO'>0  D
"RTN","RAO7PC1A",142,0)
 .. S RAXAM(0)=$G(^RADPT(RADFN,"DT",RAIBDT,"P",RANO,0))
"RTN","RAO7PC1A",143,0)
 .. S RAXID=RAIBDT_"-"_RANO
"RTN","RAO7PC1A",144,0)
 .. S RACSE=$S($P(RAXAM(0),U)]"":$P(RAXAM(0),U),1:"Unknown")
"RTN","RAO7PC1A",145,0)
 .. S RAPRC=$G(^RAMIS(71,+$P(RAXAM(0),U,2),0))
"RTN","RAO7PC1A",146,0)
 .. S RAPRC=$S($P(RAPRC,U)]"":$P(RAPRC,U),1:"Unknown")
"RTN","RAO7PC1A",147,0)
 .. Q:$P($G(^RA(72,+$P(RAXAM(0),"^",3),0)),"^",3)=0  ; cancelled xam
"RTN","RAO7PC1A",148,0)
 .. S I=0,RACMEDIA="" F  S I=$O(^RADPT(RADFN,"DT",RAIBDT,"P",RANO,"CM",I)) Q:'I  S RACMEDIA=RACMEDIA_$P(^(I,0),U) ;RA*5*45
"RTN","RAO7PC1A",149,0)
 .. S RARPT=+$P(RAXAM(0),U,17)
"RTN","RAO7PC1A",150,0)
 .. S RARPTST=$$RSTAT(),RARPTST=$$UL(RARPTST)
"RTN","RAO7PC1A",151,0)
 .. S ^TMP($J,"RAE7",RADFN,RAXID)=RAPRC_U_RACSE_U_RARPTST_U_+RALOC(0)_U_RALOC_U_RACMEDIA
"RTN","RAO7PC1A",152,0)
 .. Q
"RTN","RAO7PC1A",153,0)
 . Q
"RTN","RAO7PC1A",154,0)
 Q
"RTN","RAO7PC1A",155,0)
CPTMOD ;extract cpt modifiers if any
"RTN","RAO7PC1A",156,0)
 ;RA loop var, RA1 counter, RA2 intermed vars
"RTN","RAO7PC1A",157,0)
 Q:'$O(^RADPT(RADFN,"DT",RAIBDT,"P",RANO,"CMOD",0))
"RTN","RAO7PC1A",158,0)
 S RA=0,RA1=1
"RTN","RAO7PC1A",159,0)
 F  S RA=$O(^RADPT(RADFN,"DT",RAIBDT,"P",RANO,"CMOD",RA)) Q:'RA  I $D(^(RA,0)) D
"RTN","RAO7PC1A",160,0)
 . S RA2=$P(^RADPT(RADFN,"DT",RAIBDT,"P",RANO,"CMOD",RA,0),"^")
"RTN","RAO7PC1A",161,0)
 . S RA2=$$BASICMOD^RACPTMSC(RA2,+RAREX(0)) Q:+RA2<0
"RTN","RAO7PC1A",162,0)
 . S ^TMP($J,"RAE1",RADFN,RAXID,"CMOD",RA1)=$P(RA2,"^",2)_"^"_$P(RA2,"^",3),RA1=RA1+1
"RTN","RAO7PC1A",163,0)
 Q
"RTN","RAO7PC1A",164,0)
RSTAT() ; Get report status name from GET1^DIQ
"RTN","RAO7PC1A",165,0)
 ; RARPT is IEN of file 74
"RTN","RAO7PC1A",166,0)
 N R,DIERR
"RTN","RAO7PC1A",167,0)
 S R=$S($G(RARPT)>0:$$GET1^DIQ(74,+RARPT,5),1:"")
"RTN","RAO7PC1A",168,0)
 S:R="" R="NO REPORT"
"RTN","RAO7PC1A",169,0)
 Q R
"RTN","RAO7PC1A",170,0)
UL(R) ;Upper and Lower case
"RTN","RAO7PC1A",171,0)
 ;First convert all chars to lower case, then
"RTN","RAO7PC1A",172,0)
 ;capitalize 1st char AND (char after /  OR  char after blank)
"RTN","RAO7PC1A",173,0)
 N L,R2
"RTN","RAO7PC1A",174,0)
 S R2=$E(R,1)_$$LOW^XLFSTR($E(R,2,$L(R))) ; 1st char must be in caps
"RTN","RAO7PC1A",175,0)
 S L=$F(R2,"/") ; If str has /, cap char after / but not char after blank
"RTN","RAO7PC1A",176,0)
 I L S R2=$E(R2,1,L-1)_$$UP^XLFSTR($E(R2,L))_$E(R2,L+1,$L(R2)) G UPQ
"RTN","RAO7PC1A",177,0)
 S L=$F(R2," ") ; If str has one blank, then cap the char after the blank
"RTN","RAO7PC1A",178,0)
 I L S R2=$E(R2,1,L-1)_$$UP^XLFSTR($E(R2,L))_$E(R2,L+1,$L(R2))
"RTN","RAO7PC1A",179,0)
UPQ Q R2
"VER")
8.0^22.0
"BLD",9046,6)
^108
**END**
**END**

