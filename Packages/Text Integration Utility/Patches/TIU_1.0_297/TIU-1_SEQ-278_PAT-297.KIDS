Released TIU*1*297 SEQ #278
Extracted from mail message
**KIDS**:TIU*1.0*297^

**INSTALL NAME**
TIU*1.0*297
"BLD",9820,0)
TIU*1.0*297^TEXT INTEGRATION UTILITIES^0^3170522^y
"BLD",9820,4,0)
^9.64PA^8925.99^2
"BLD",9820,4,8925.99,0)
8925.99
"BLD",9820,4,8925.99,2,0)
^9.641^8925.99^1
"BLD",9820,4,8925.99,2,8925.99,0)
TIU PARAMETERS  (File-top level)
"BLD",9820,4,8925.99,2,8925.99,1,0)
^9.6411^6^2
"BLD",9820,4,8925.99,2,8925.99,1,.23,0)
ENABLE DICTATION CONTROL
"BLD",9820,4,8925.99,2,8925.99,1,6,0)
DICTATION INSTRUCTIONS
"BLD",9820,4,8925.99,222)
y^n^p^^^^n^^n
"BLD",9820,4,8925.99,224)

"BLD",9820,4,8927.9,0)
8927.9
"BLD",9820,4,8927.9,222)
y^y^f^^y^^y^o^n
"BLD",9820,4,"APDD",8925.99,8925.99)

"BLD",9820,4,"APDD",8925.99,8925.99,.23)

"BLD",9820,4,"APDD",8925.99,8925.99,6)

"BLD",9820,4,"B",8925.99,8925.99)

"BLD",9820,4,"B",8927.9,8927.9)

"BLD",9820,6)
5^
"BLD",9820,6.3)
40
"BLD",9820,"ABPKG")
n
"BLD",9820,"INID")
^y
"BLD",9820,"INIT")
OPTFIX^TIUPS297
"BLD",9820,"KRN",0)
^9.67PA^779.2^20
"BLD",9820,"KRN",.4,0)
.4
"BLD",9820,"KRN",.4,"NM",0)
^9.68A^^
"BLD",9820,"KRN",.401,0)
.401
"BLD",9820,"KRN",.401,"NM",0)
^9.68A^^
"BLD",9820,"KRN",.402,0)
.402
"BLD",9820,"KRN",.402,"NM",0)
^9.68A^2^2
"BLD",9820,"KRN",.402,"NM",1,0)
TIU TEXT EVENT EDIT    FILE #8925.71^8925.71^1^
"BLD",9820,"KRN",.402,"NM",2,0)
TIU BASIC PARAMETER EDIT    FILE #8925.99^8925.99^0
"BLD",9820,"KRN",.402,"NM","B","TIU BASIC PARAMETER EDIT    FILE #8925.99",2)

"BLD",9820,"KRN",.402,"NM","B","TIU TEXT EVENT EDIT    FILE #8925.71",1)

"BLD",9820,"KRN",.403,0)
.403
"BLD",9820,"KRN",.403,"NM",0)
^9.68A^^
"BLD",9820,"KRN",.5,0)
.5
"BLD",9820,"KRN",.5,"NM",0)
^9.68A^^
"BLD",9820,"KRN",.84,0)
.84
"BLD",9820,"KRN",3.6,0)
3.6
"BLD",9820,"KRN",3.8,0)
3.8
"BLD",9820,"KRN",9.2,0)
9.2
"BLD",9820,"KRN",9.8,0)
9.8
"BLD",9820,"KRN",9.8,"NM",0)
^9.68A^7^7
"BLD",9820,"KRN",9.8,"NM",1,0)
TIUABBV^^0^B7597487
"BLD",9820,"KRN",9.8,"NM",2,0)
TIUABBVC^^0^B5804430
"BLD",9820,"KRN",9.8,"NM",3,0)
TIUABBVP^^0^B9842666
"BLD",9820,"KRN",9.8,"NM",4,0)
TIULP^^0^B61391624
"BLD",9820,"KRN",9.8,"NM",5,0)
TIUABBV1^^0^B58892280
"BLD",9820,"KRN",9.8,"NM",6,0)
TIUPS297^^0^B1090642
"BLD",9820,"KRN",9.8,"NM",7,0)
TIUDCT^^0^B8195446
"BLD",9820,"KRN",9.8,"NM","B","TIUABBV",1)

"BLD",9820,"KRN",9.8,"NM","B","TIUABBV1",5)

"BLD",9820,"KRN",9.8,"NM","B","TIUABBVC",2)

"BLD",9820,"KRN",9.8,"NM","B","TIUABBVP",3)

"BLD",9820,"KRN",9.8,"NM","B","TIUDCT",7)

"BLD",9820,"KRN",9.8,"NM","B","TIULP",4)

"BLD",9820,"KRN",9.8,"NM","B","TIUPS297",6)

"BLD",9820,"KRN",19,0)
19
"BLD",9820,"KRN",19,"NM",0)
^9.68A^5^4
"BLD",9820,"KRN",19,"NM",2,0)
TIU IRM MAINTENANCE MENU^^2
"BLD",9820,"KRN",19,"NM",3,0)
TIU ABBV ENTER EDIT^^0^
"BLD",9820,"KRN",19,"NM",4,0)
TIU ABBV LIST^^0^
"BLD",9820,"KRN",19,"NM",5,0)
TIU TEXT EVENT EDIT^^0^
"BLD",9820,"KRN",19,"NM","B","TIU ABBV ENTER EDIT",3)

"BLD",9820,"KRN",19,"NM","B","TIU ABBV LIST",4)

"BLD",9820,"KRN",19,"NM","B","TIU IRM MAINTENANCE MENU",2)

"BLD",9820,"KRN",19,"NM","B","TIU TEXT EVENT EDIT",5)

"BLD",9820,"KRN",19.1,0)
19.1
"BLD",9820,"KRN",19.1,"NM",0)
^9.68A^1^1
"BLD",9820,"KRN",19.1,"NM",1,0)
TIUDCT^^0
"BLD",9820,"KRN",19.1,"NM","B","TIUDCT",1)

"BLD",9820,"KRN",101,0)
101
"BLD",9820,"KRN",101,"NM",0)
^9.68A^^
"BLD",9820,"KRN",409.61,0)
409.61
"BLD",9820,"KRN",771,0)
771
"BLD",9820,"KRN",779.2,0)
779.2
"BLD",9820,"KRN",870,0)
870
"BLD",9820,"KRN",8989.51,0)
8989.51
"BLD",9820,"KRN",8989.52,0)
8989.52
"BLD",9820,"KRN",8994,0)
8994
"BLD",9820,"KRN","B",.4,.4)

"BLD",9820,"KRN","B",.401,.401)

"BLD",9820,"KRN","B",.402,.402)

"BLD",9820,"KRN","B",.403,.403)

"BLD",9820,"KRN","B",.5,.5)

"BLD",9820,"KRN","B",.84,.84)

"BLD",9820,"KRN","B",3.6,3.6)

"BLD",9820,"KRN","B",3.8,3.8)

"BLD",9820,"KRN","B",9.2,9.2)

"BLD",9820,"KRN","B",9.8,9.8)

"BLD",9820,"KRN","B",19,19)

"BLD",9820,"KRN","B",19.1,19.1)

"BLD",9820,"KRN","B",101,101)

"BLD",9820,"KRN","B",409.61,409.61)

"BLD",9820,"KRN","B",771,771)

"BLD",9820,"KRN","B",779.2,779.2)

"BLD",9820,"KRN","B",870,870)

"BLD",9820,"KRN","B",8989.51,8989.51)

"BLD",9820,"KRN","B",8989.52,8989.52)

"BLD",9820,"KRN","B",8994,8994)

"BLD",9820,"QDEF")
^^^^NO^^^^NO^^YES
"BLD",9820,"QUES",0)
^9.62^^
"BLD",9820,"REQB",0)
^9.611^4^4
"BLD",9820,"REQB",1,0)
TIU*1.0*256^2
"BLD",9820,"REQB",2,0)
TIU*1.0*296^2
"BLD",9820,"REQB",3,0)
TIU*1.0*218^2
"BLD",9820,"REQB",4,0)
TIU*1.0*225^2
"BLD",9820,"REQB","B","TIU*1.0*218",3)

"BLD",9820,"REQB","B","TIU*1.0*225",4)

"BLD",9820,"REQB","B","TIU*1.0*256",1)

"BLD",9820,"REQB","B","TIU*1.0*296",2)

"DATA",8927.9,1,0)
IU^L^1^I
"DATA",8927.9,2,0)
MS^L^1^I^
"DATA",8927.9,3,0)
MSO4^L^1^I^
"DATA",8927.9,4,0)
MgSO4^L^1^I
"DATA",8927.9,5,0)
Q.D.^L^1^I
"DATA",8927.9,6,0)
Q.O.D.^L^1^I
"DATA",8927.9,7,0)
QD^L^1^I
"DATA",8927.9,8,0)
QOD^L^1^I^
"DATA",8927.9,9,0)
U^L^1^I
"DATA",8927.9,10,0)
q.d.^L^1^I
"DATA",8927.9,11,0)
q.o.d.^L^1^I
"DATA",8927.9,12,0)
qd^L^1^I
"DATA",8927.9,13,0)
qod^L^1^I
"DATA",8927.9,14,0)
u^L^1^I
"FIA",8925.99)
TIU PARAMETERS
"FIA",8925.99,0)
^TIU(8925.99,
"FIA",8925.99,0,0)
8925.99P
"FIA",8925.99,0,1)
y^n^p^^^^n^^n
"FIA",8925.99,0,10)

"FIA",8925.99,0,11)

"FIA",8925.99,0,"RLRO")

"FIA",8925.99,0,"VR")
1.0^TIU
"FIA",8925.99,8925.99)
1
"FIA",8925.99,8925.99,.23)

"FIA",8925.99,8925.99,6)

"FIA",8925.99,8925.9902)
0
"FIA",8927.9)
TIU UNAUTHORIZED ABBREVIATION
"FIA",8927.9,0)
^TIU(8927.9,
"FIA",8927.9,0,0)
8927.9I
"FIA",8927.9,0,1)
y^y^f^^y^^y^o^n
"FIA",8927.9,0,10)

"FIA",8927.9,0,11)

"FIA",8927.9,0,"RLRO")

"FIA",8927.9,0,"VR")
1.0^TIU
"FIA",8927.9,8927.9)
0
"INIT")
OPTFIX^TIUPS297
"IX",8927.9,8927.9,"AC",0)
8927.9^AC^For easy retrieval.^R^^R^IR^I^8927.9^^^^^S
"IX",8927.9,8927.9,"AC",.1,0)
^^22^22^3160120^
"IX",8927.9,8927.9,"AC",.1,1,0)
This index facilitates retrieval of entries by STATUS and CLASS and 
"IX",8927.9,8927.9,"AC",.1,2,0)
UNAUTHORIZED ABBREVIATION and ABBREVIATION EXACT MATCH as
"IX",8927.9,8927.9,"AC",.1,3,0)
 
"IX",8927.9,8927.9,"AC",.1,4,0)
^TIU(8927.9,"AC",[STATUS],[CLASS],[UNAUTHORIZED 
"IX",8927.9,8927.9,"AC",.1,5,0)
ABBREVIATION],[ABBREVIATION EXACT MATCH],DA)
"IX",8927.9,8927.9,"AC",.1,6,0)
 
"IX",8927.9,8927.9,"AC",.1,7,0)
Examples:
"IX",8927.9,8927.9,"AC",.1,8,0)
 
"IX",8927.9,8927.9,"AC",.1,9,0)
^TIU(8927.9,"AC","A","L","IU",1,1)=""
"IX",8927.9,8927.9,"AC",.1,10,0)
^TIU(8927.9,"AC","A","L","MS",1,2)=""
"IX",8927.9,8927.9,"AC",.1,11,0)
^TIU(8927.9,"AC","A","L","MSO4",1,3)=""
"IX",8927.9,8927.9,"AC",.1,12,0)
^TIU(8927.9,"AC","A","L","MgSO4",1,4)=""
"IX",8927.9,8927.9,"AC",.1,13,0)
^TIU(8927.9,"AC","A","L","Q.D.",1,5)=""
"IX",8927.9,8927.9,"AC",.1,14,0)
^TIU(8927.9,"AC","A","L","Q.O.D.",1,6)=""
"IX",8927.9,8927.9,"AC",.1,15,0)
^TIU(8927.9,"AC","A","L","QD",1,7)=""
"IX",8927.9,8927.9,"AC",.1,16,0)
^TIU(8927.9,"AC","A","L","QOD",1,8)=""
"IX",8927.9,8927.9,"AC",.1,17,0)
^TIU(8927.9,"AC","A","L","U",1,9)=""
"IX",8927.9,8927.9,"AC",.1,18,0)
^TIU(8927.9,"AC","A","L","q.d.",1,10)=""
"IX",8927.9,8927.9,"AC",.1,19,0)
^TIU(8927.9,"AC","A","L","q.o.d.",1,11)=""
"IX",8927.9,8927.9,"AC",.1,20,0)
^TIU(8927.9,"AC","A","L","qd",1,12)=""
"IX",8927.9,8927.9,"AC",.1,21,0)
^TIU(8927.9,"AC","A","L","qod",1,13)=""
"IX",8927.9,8927.9,"AC",.1,22,0)
^TIU(8927.9,"AC","A","L","u",1,14)=""
"IX",8927.9,8927.9,"AC",1)
S ^TIU(8927.9,"AC",$E(X(1),1,1),$E(X(2),1,1),$E(X(3),1,30),$E(X(4),1,1),DA)=""
"IX",8927.9,8927.9,"AC",2)
K ^TIU(8927.9,"AC",$E(X(1),1,1),$E(X(2),1,1),$E(X(3),1,30),$E(X(4),1,1),DA)
"IX",8927.9,8927.9,"AC",2.5)
K ^TIU(8927.9,"AC")
"IX",8927.9,8927.9,"AC",11.1,0)
^.114IA^4^4
"IX",8927.9,8927.9,"AC",11.1,1,0)
1^F^8927.9^.04^1^1^F
"IX",8927.9,8927.9,"AC",11.1,2,0)
2^F^8927.9^.02^1^2^F
"IX",8927.9,8927.9,"AC",11.1,3,0)
3^F^8927.9^.01^30^3^F
"IX",8927.9,8927.9,"AC",11.1,4,0)
4^F^8927.9^.03^1^4^F
"KRN",.402,1980,-1)
0^2
"KRN",.402,1980,0)
TIU BASIC PARAMETER EDIT^3170331.1543^^8925.99^^^3170508
"KRN",.402,1980,"DR",1,8925.99)
.02;1.07;.05;I +$P($G(^TIU(8925.99,+DA,0)),U,4)'>0 S Y="@1";.04///@;@1;.14;.03;.06;.07;.08;1.06;3.1;3.2;3.3;.23;I '$P($G(^TIU(8925.99,+DA,0)),U,23) S Y="@2";6;@2;
"KRN",.402,2279,-1)
1^1
"KRN",.402,2279,0)
TIU TEXT EVENT EDIT    FILE #8925.71
"KRN",19,10438,-1)
2^2
"KRN",19,10438,0)
TIU IRM MAINTENANCE MENU^TIU Maintenance Menu^^M^17^^^^^^^516^y^1^1
"KRN",19,10438,10,0)
^19.01IP^16^16
"KRN",19,10438,10,14,0)
14293^9^9
"KRN",19,10438,10,14,"^")
TIU TEXT EVENT EDIT
"KRN",19,10438,10,15,0)
14411^10^10
"KRN",19,10438,10,15,"^")
TIU ABBV ENTER EDIT
"KRN",19,10438,10,16,0)
14410^11^11
"KRN",19,10438,10,16,"^")
TIU ABBV LIST
"KRN",19,10438,"U")
TIU MAINTENANCE MENU
"KRN",19,14293,-1)
0^5
"KRN",19,14293,0)
TIU TEXT EVENT EDIT^Text Event Edit^^E^^^^^^^^^^1^1
"KRN",19,14293,1,0)
^19.06^1^1^3160420^^^^
"KRN",19,14293,1,1,0)
This option edits the TIU TEXT EVENT file for the text event alert.
"KRN",19,14293,15)
K DIDEL,TIUX
"KRN",19,14293,20)
S (DLAYGO,DIDEL)=8925.71
"KRN",19,14293,30)
TIU(8925.71,
"KRN",19,14293,31)
AELMQ
"KRN",19,14293,50)
TIU(8925.71,
"KRN",19,14293,51)
S DIDEL=8925.71;.01;.02;1;S TIUX=X;I TIUX="",$G(^TIU(8925.71,DA,1))="",$G(^(3))]"" S TIUX="@";3///^S X=TIUX;.03;.04;2;2.1;4;5;5.1;S DLAYGO=8925.71
"KRN",19,14293,52)
DR
"KRN",19,14293,53)
N
"KRN",19,14293,"U")
TEXT EVENT EDIT
"KRN",19,14410,-1)
0^4
"KRN",19,14410,0)
TIU ABBV LIST^List Unauthorized Abbreviations^^R^^^^^^^^
"KRN",19,14410,1,0)
^19.06^2^2^3160320^^
"KRN",19,14410,1,1,0)
This option provides the ability to generate a report that lists the 
"KRN",19,14410,1,2,0)
unauthorized abbreviations. 
"KRN",19,14410,25)
TIUABBVP
"KRN",19,14410,"U")
LIST UNAUTHORIZED ABBREVIATION
"KRN",19,14411,-1)
0^3
"KRN",19,14411,0)
TIU ABBV ENTER EDIT^Unauthorized Abbreviations (Enter/Edit)^^R^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,14411,1,0)
^19.06^2^2^3160320^^^^
"KRN",19,14411,1,1,0)
This option provides the ability to enter and edit fields contained in the
"KRN",19,14411,1,2,0)
UNAUTHORIZED ABBREVIATIONS file (#8927.9)
"KRN",19,14411,25)
EN^TIUABBV1
"KRN",19,14411,30)

"KRN",19,14411,31)

"KRN",19,14411,34)

"KRN",19,14411,36)

"KRN",19,14411,50)

"KRN",19,14411,51)

"KRN",19,14411,"U")
UNAUTHORIZED ABBREVIATIONS (EN
"KRN",19.1,718,-1)
0^1
"KRN",19.1,718,0)
TIUDCT^Dictation control Security Key
"KRN",19.1,718,1,0)
^^8^8^3170406^
"KRN",19.1,718,1,1,0)
The TIUDCT key is to be used with the new TIU Dictation Control 
"KRN",19.1,718,1,2,0)
functionality released with patch TIU*1.0*297. To use this functionality 
"KRN",19.1,718,1,3,0)
this security key must be assigned to any CPRS user who enters TIU 
"KRN",19.1,718,1,4,0)
documents and is authorized to dictate to a transcription service, 
"KRN",19.1,718,1,5,0)
typically the HIM Chief and the Transcription Supervisor/staff, to 
"KRN",19.1,718,1,6,0)
provide that user with dictation   privileges. Please refer to the TIU 
"KRN",19.1,718,1,7,0)
User Manual for more detailed information regarding the TIU Dictation 
"KRN",19.1,718,1,8,0)
Control functionality.
"MBREQ")
0
"ORD",3,19.1)
19.1;3;;;KEY^XPDTA1;KEYF1^XPDIA1;KEYE1^XPDIA1;KEYF2^XPDIA1;;KEYDEL^XPDIA1
"ORD",3,19.1,0)
SECURITY KEY
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",516,-1)
1^1
"PKG",516,0)
TEXT INTEGRATION UTILITIES^TIU^Text Integration Utilities 
"PKG",516,20,0)
^9.402P^^
"PKG",516,22,0)
^9.49I^1^1
"PKG",516,22,1,0)
1.0^3000126^2970815^11712
"PKG",516,22,1,"PAH",1,0)
297^3170522^11959
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
7
"RTN","TIUABBV")
0^1^B7597487^n/a
"RTN","TIUABBV",1,0)
TIUABBV ;BPOIFO/EL - Input transforms for UNAUTHORIZED ABBREVIATIONS ;7/10/2015
"RTN","TIUABBV",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**297**;JUN 20, 1997;Build 40
"RTN","TIUABBV",3,0)
 ;
"RTN","TIUABBV",4,0)
 ; External Reference DBIA#:
"RTN","TIUABBV",5,0)
 ; -------------------------
"RTN","TIUABBV",6,0)
 ; #10142 - DDIOL call (Supported)
"RTN","TIUABBV",7,0)
 ; #10104 - XLFSTR call (Supported)
"RTN","TIUABBV",8,0)
 ;
"RTN","TIUABBV",9,0)
 Q
"RTN","TIUABBV",10,0)
 ;
"RTN","TIUABBV",11,0)
LABBV(X) ; LOCAL Unauthorized Abbreviation check
"RTN","TIUABBV",12,0)
 ; Check and prevent National Abbreviation to be edited
"RTN","TIUABBV",13,0)
 I $P($G(^TIU(8927.9,+$G(DA),0)),U,2)="N" D  Q 0
"RTN","TIUABBV",14,0)
 . D EN^DDIOL("National Unauthorized Abbreviation cannot be altered.")
"RTN","TIUABBV",15,0)
 ;
"RTN","TIUABBV",16,0)
CKABBV ;NATIONAL AND LOCAL Unauthorized Abbreviation check 
"RTN","TIUABBV",17,0)
 I $L(X)>30!($L(X)<1) D  Q 0
"RTN","TIUABBV",18,0)
 .  D EN^DDIOL("Abbreviation has to be within 1 to 30 character(s)")
"RTN","TIUABBV",19,0)
 I $F(X,"|")!$F(X,"^")!$F(X,"&")!$F(X,"~")!$F(X,"\") D  Q 0
"RTN","TIUABBV",20,0)
 .  D EN^DDIOL("Abbreviation cannot contain the following punctuations: |^&~\:;,!?")
"RTN","TIUABBV",21,0)
 I $F(X,":")!$F(X,";")!$F(X,",")!$F(X,"!")!$F(X,"?") D  Q 0
"RTN","TIUABBV",22,0)
 .  D EN^DDIOL("Abbreviation cannot contain the following punctuations: |^&~\:;,!?")
"RTN","TIUABBV",23,0)
 I $F(X," ") D  Q 0
"RTN","TIUABBV",24,0)
 .  D EN^DDIOL("Abbreviation has to be one word without space.")
"RTN","TIUABBV",25,0)
 I $L(X)=1,$A($$UP^XLFSTR(X))<65!($A($$UP^XLFSTR(X))>90) D  Q 0
"RTN","TIUABBV",26,0)
 .  D EN^DDIOL("Abbreviation cannot be one non-alpha character.")
"RTN","TIUABBV",27,0)
 I X?1P.P D  Q 0
"RTN","TIUABBV",28,0)
 .  D EN^DDIOL("Abbreviation cannot contain all punctuations.")
"RTN","TIUABBV",29,0)
 I ($G(Y)="-1"),'$D(^TIU(8927.9,"B",$G(X))) G SETABBV ;Q 1
"RTN","TIUABBV",30,0)
 I $G(Y)=$G(X),($G(X)'="") G SETABBV ;Q 1
"RTN","TIUABBV",31,0)
 I '$D(^TIU(8927.9,"B",$G(X))) G SETABBV ;Q 1
"RTN","TIUABBV",32,0)
 I +$G(DA)>0,($G(^TIU(8927.9,+$G(DA),0),U)'=""),($G(Y)'=$G(X)) D  Q 0
"RTN","TIUABBV",33,0)
 . D EN^DDIOL("Unauthorized Abbreviation cannot be modified once created but allows to inactivate STATUS.")
"RTN","TIUABBV",34,0)
 I ($G(Y)'=$G(X)),$D(^TIU(8927.9,"B",$G(X))) D  G SETABBV
"RTN","TIUABBV",35,0)
 . D EN^DDIOL("The abbreviation "_X_" already exists.")
"RTN","TIUABBV",36,0)
SETABBV ; 
"RTN","TIUABBV",37,0)
 S X=""""_X_""""
"RTN","TIUABBV",38,0)
 Q 1
"RTN","TIUABBV",39,0)
 ;
"RTN","TIUABBV",40,0)
ABBV(X) ;NATIONAL ABBREVIATIONS check 
"RTN","TIUABBV",41,0)
 G CKABBV
"RTN","TIUABBV",42,0)
 ;
"RTN","TIUABBV",43,0)
 ;
"RTN","TIUABBV",44,0)
CLASS(X) ;NATIONAL ABBREVIATIONS CLASS check
"RTN","TIUABBV",45,0)
 I ($P($G(^TIU(8927.9,+$G(DA),0)),U,2))=$G(X) Q 1
"RTN","TIUABBV",46,0)
 I (DUZ(0)="@"),(X="N") Q 1
"RTN","TIUABBV",47,0)
 I (DUZ(0)'="@"),(X="N") D  Q 0
"RTN","TIUABBV",48,0)
 . D EN^DDIOL("You are not allowed to create NATIONAL Class.")
"RTN","TIUABBV",49,0)
 G CKCLASS
"RTN","TIUABBV",50,0)
 ;
"RTN","TIUABBV",51,0)
 ;
"RTN","TIUABBV",52,0)
LCLASS(X) ;LOCAL ABBREVIATIONS CLASS check
"RTN","TIUABBV",53,0)
 I ($P($G(^TIU(8927.9,+$G(DA),0)),U,2)="N"),(X'="N") D  Q 0
"RTN","TIUABBV",54,0)
 . D EN^DDIOL("National Abbreviation Class cannot be altered.")
"RTN","TIUABBV",55,0)
CKCLASS ;
"RTN","TIUABBV",56,0)
 I ($P($G(^TIU(8927.9,+$G(DA),0)),U,2))=$G(X) Q 1
"RTN","TIUABBV",57,0)
 I (X'="L") D  Q 0
"RTN","TIUABBV",58,0)
 . D EN^DDIOL("Local site can only create LOCAL Class.")
"RTN","TIUABBV",59,0)
 Q 1
"RTN","TIUABBV",60,0)
 ;
"RTN","TIUABBV1")
0^5^B58892280^n/a
"RTN","TIUABBV1",1,0)
TIUABBV1 ;BPOIFO/JLTP/EL - Entries for UNAUTHORIZED ABBREVIATIONS ;9/23/2015
"RTN","TIUABBV1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**297**;JUN 20, 1997;Build 40
"RTN","TIUABBV1",3,0)
 ;
"RTN","TIUABBV1",4,0)
 ; External Reference DBIA#:
"RTN","TIUABBV1",5,0)
 ; -------------------------
"RTN","TIUABBV1",6,0)
 ; #10009 - DICN call (Supported)
"RTN","TIUABBV1",7,0)
 ; #2052 - DID call (Supported)
"RTN","TIUABBV1",8,0)
 ; #2053 - DIE call (Supported)
"RTN","TIUABBV1",9,0)
 ; #2055 - DILFD call (Supported)
"RTN","TIUABBV1",10,0)
 ; #2056 - DIQ call (Supported)
"RTN","TIUABBV1",11,0)
 ; #10026 - DIR call (Supported)
"RTN","TIUABBV1",12,0)
 ; #510 - DISV reference (Controlled Subscription)
"RTN","TIUABBV1",13,0)
 ; #10104 - XLFSTR call (Supported)
"RTN","TIUABBV1",14,0)
 ;
"RTN","TIUABBV1",15,0)
 Q
"RTN","TIUABBV1",16,0)
 ;
"RTN","TIUABBV1",17,0)
EN ;Manage Unauthorized Abbreviations
"RTN","TIUABBV1",18,0)
 N ABBV,ABBVU,ACT,ASK,C,CLS,DA,DESC,DR,EXACT,FLD,FILE,FILENAME
"RTN","TIUABBV1",19,0)
 N H1,H2,HLP,I,J,L,L1,L2,L3,L4,L5,MCH,NEW,RESP,RESP1,SEQ,STOP
"RTN","TIUABBV1",20,0)
 N TIUINP,TP,TPUN,TRET,TSEQ,TWAIT,X,X1,X2,X3,X4,X5,XX,Y,ZZ
"RTN","TIUABBV1",21,0)
 N DIC,DIE,DIR,DIRUT,DUOUT
"RTN","TIUABBV1",22,0)
 S TPUN="!@#$%^&*()_-+={}[]|\/:;""'<>?,.~`"
"RTN","TIUABBV1",23,0)
 S (FILE,FILENAME,TWAIT)="",STOP=0
"RTN","TIUABBV1",24,0)
 S FILE="8927.9",FILENAME=$P(^DIC(FILE,0),U)
"RTN","TIUABBV1",25,0)
 S (DIC,DIE)="^TIU("_FILE_","
"RTN","TIUABBV1",26,0)
 S TWAIT=300
"RTN","TIUABBV1",27,0)
 I $G(DTIME)'="" S TWAIT=DTIME
"RTN","TIUABBV1",28,0)
 ;
"RTN","TIUABBV1",29,0)
ENTER ;
"RTN","TIUABBV1",30,0)
 I $G(STOP)=1 Q
"RTN","TIUABBV1",31,0)
 D HD
"RTN","TIUABBV1",32,0)
 K DIC,DIE,TP,ZZ
"RTN","TIUABBV1",33,0)
 S (ABBV,ACT,CLS,DA,DESC,DR,MCH,NEW,X,XX,Y)=""
"RTN","TIUABBV1",34,0)
 S DIC("A")="Enter Unauthorized Abbreviation: "
"RTN","TIUABBV1",35,0)
 D TIUDIC
"RTN","TIUABBV1",36,0)
 I $G(Y)<0!($G(Y)="") S STOP=1 G ENTER
"RTN","TIUABBV1",37,0)
 I $G(Y)=0 W ! D STOP G ENTER
"RTN","TIUABBV1",38,0)
 S DA=$P(Y,U),ABBV=$P(Y,U,2),NEW=$P(Y,U,3),DIE="^TIU("_FILE_","
"RTN","TIUABBV1",39,0)
 D RECALL^DILFD(FILE,DA_",",+($G(DUZ)))
"RTN","TIUABBV1",40,0)
 I '$G(NEW) D  D STOP G ENTER
"RTN","TIUABBV1",41,0)
 . S X=Y(0),CLS=$P(X,U,2),MCH=$P(X,U,3),ACT=$P(X,U,4),DESC=$P(X,U,5)
"RTN","TIUABBV1",42,0)
 . I $E(CLS)="N" W !!,"The Abbreviation '"_ABBV_"' has a NATIONAL class. Therefore, it cannot be modified.",!  Q
"RTN","TIUABBV1",43,0)
 . W !!,"Unauthorized Abbreviation: ",ABBV
"RTN","TIUABBV1",44,0)
 . S DR=".03;.04;.05" W !
"RTN","TIUABBV1",45,0)
 . L +^TIU(FILE,DA):1 I '$T W *7,!!,"Other user is editing this abbreviation '",ABBV,"'. Try later.",!! Q
"RTN","TIUABBV1",46,0)
 . D ^DIE
"RTN","TIUABBV1",47,0)
 . L -^TIU(FILE,DA)
"RTN","TIUABBV1",48,0)
 . S XX="",XX="STATUS for this Unauthorized Abbreviation '"_ABBV_"' is "
"RTN","TIUABBV1",49,0)
 . S XX=XX_$$GETFLD(FILE,SEQ,".04")_" now."
"RTN","TIUABBV1",50,0)
 . W !!,XX,!!
"RTN","TIUABBV1",51,0)
 S DR=".02///L;.03///1;.04///A"
"RTN","TIUABBV1",52,0)
 D ^DIE
"RTN","TIUABBV1",53,0)
 W !!,"** New Local '",ABBV,"' has been added. **"
"RTN","TIUABBV1",54,0)
 W !,"Abbreviation Exact Match: "_$$GETFLD(FILE,SEQ,".03")
"RTN","TIUABBV1",55,0)
 W !,"Status: "_$$GETFLD(FILE,SEQ,".04")
"RTN","TIUABBV1",56,0)
 W !!,"Unauthorized Abbreviation: ",ABBV
"RTN","TIUABBV1",57,0)
 S DR=".02///^S X=""LOCAL"";.03//^S X=""YES"";.04//^S X=""ACTIVE"";.05"
"RTN","TIUABBV1",58,0)
 D ^DIE
"RTN","TIUABBV1",59,0)
 S XX="",XX="STATUS for this Unauthorized Abbreviation '"_ABBV_"' is "
"RTN","TIUABBV1",60,0)
 S XX=XX_$$GETFLD(FILE,SEQ,".04")_" now."
"RTN","TIUABBV1",61,0)
 W !!,XX,!!
"RTN","TIUABBV1",62,0)
 D STOP
"RTN","TIUABBV1",63,0)
 G ENTER
"RTN","TIUABBV1",64,0)
 ;
"RTN","TIUABBV1",65,0)
STOP ; 
"RTN","TIUABBV1",66,0)
 S J="",STOP=0
"RTN","TIUABBV1",67,0)
 R !,"Enter <RETURN> to continue or '^' to exit: ",J:TWAIT S:'$T J=U
"RTN","TIUABBV1",68,0)
 I $G(J)=U S STOP=1
"RTN","TIUABBV1",69,0)
 Q
"RTN","TIUABBV1",70,0)
 ;
"RTN","TIUABBV1",71,0)
 ;
"RTN","TIUABBV1",72,0)
HD ; Header for Enter/Edit Unauthorized Abbreviation
"RTN","TIUABBV1",73,0)
 S (H1,H2,I,X)=""
"RTN","TIUABBV1",74,0)
 S H1="Enter/Edit Unauthorized Abbreviation(s)"
"RTN","TIUABBV1",75,0)
 F I=1:1:$L(H1) S H2=H2_"="
"RTN","TIUABBV1",76,0)
 I $G(IOM)="" S IOM=80
"RTN","TIUABBV1",77,0)
 S X=(IOM-$L(H1))/2
"RTN","TIUABBV1",78,0)
 W @IOF,!! F I=1:1:X W " "
"RTN","TIUABBV1",79,0)
 W H1,! F I=1:1:X W " "
"RTN","TIUABBV1",80,0)
 W H2
"RTN","TIUABBV1",81,0)
 Q
"RTN","TIUABBV1",82,0)
 ;
"RTN","TIUABBV1",83,0)
TIUDIC ;
"RTN","TIUABBV1",84,0)
 S (ASK,C,I,RESP,SEQ,TP,X,XX,Y)=""
"RTN","TIUABBV1",85,0)
 W !!,DIC("A") R X:TWAIT S:'$T X=U I U[X S Y=-1 Q
"RTN","TIUABBV1",86,0)
 I X=" ",$D(^DISV(DUZ,"^TIU("_FILE_",")) D  I $G(Y)="" S Y=-1 Q
"RTN","TIUABBV1",87,0)
 . S Y=$G(^DISV(DUZ,"^TIU("_FILE_","))
"RTN","TIUABBV1",88,0)
 . I $G(Y)="" Q
"RTN","TIUABBV1",89,0)
 . S X=$P($G(^TIU(FILE,Y,0)),U) W X
"RTN","TIUABBV1",90,0)
 W !
"RTN","TIUABBV1",91,0)
 I X="?"!(X="??") D DICHLP S Y=0 Q
"RTN","TIUABBV1",92,0)
 S TIUINP=$$GET1^DID(FILE,.01,"","INPUT TRANSFORM")
"RTN","TIUABBV1",93,0)
 I $G(TIUINP)]"" X TIUINP
"RTN","TIUABBV1",94,0)
 I '$D(X)#2 S Y=0 Q
"RTN","TIUABBV1",95,0)
 K TP S RESP=X,C=0,TP(C)=0
"RTN","TIUABBV1",96,0)
 D SEARCH(RESP,.TP)
"RTN","TIUABBV1",97,0)
 W !
"RTN","TIUABBV1",98,0)
 I $G(C)'>0 S ASK=$$ASK(RESP) D  Q
"RTN","TIUABBV1",99,0)
 .  W !
"RTN","TIUABBV1",100,0)
 .  I '$G(ASK) S Y=0
"RTN","TIUABBV1",101,0)
 .  E  S Y=ASK,SEQ=$P(ASK,U),Y(0)=$G(^TIU(FILE,SEQ,0))
"RTN","TIUABBV1",102,0)
 K DIR S DIR("T")=TWAIT
"RTN","TIUABBV1",103,0)
 S DIR(0)="NO^1:"_C
"RTN","TIUABBV1",104,0)
 I $P(TP(0),U)=1 S DIR("A")="For EDIT Unauthorized Abbreviation, Select number"
"RTN","TIUABBV1",105,0)
 E  S DIR("A")="For EDIT or CREATE Unauthorized Abbreviation, Select number"
"RTN","TIUABBV1",106,0)
 F I=1:1:C S DIR("A",I)=I_") "_$E($P(TP(I),U,3),1,75)
"RTN","TIUABBV1",107,0)
 S DIR("A",C+1)=""
"RTN","TIUABBV1",108,0)
 D ^DIR
"RTN","TIUABBV1",109,0)
 I $D(DUOUT) W !!,"No action has been taken !!",! S Y=0 Q
"RTN","TIUABBV1",110,0)
 I TP(0)=1,X="" W !!,"Nothing is selected !!",! S Y=0 Q
"RTN","TIUABBV1",111,0)
 I Y="" W !!,"Nothing is selected !!",! S Y=0 Q
"RTN","TIUABBV1",112,0)
 I $G(Y(0))="NO" W !!,"No action has been taken !!",! S Y=0 Q
"RTN","TIUABBV1",113,0)
 I $G(Y(0))="YES"!($E($P(TP(X),U,3),1,3)="** ") D  Q
"RTN","TIUABBV1",114,0)
 . I $P(TP(0),U,2)'="" D  I $G(STOP)=1 Q
"RTN","TIUABBV1",115,0)
 . . S XX="",XX=$P(TP(0),U,2)
"RTN","TIUABBV1",116,0)
 . . W !!,"The EXACT-MATCH for the following active abbreviation is set to """_"NO"_""""_": "
"RTN","TIUABBV1",117,0)
 . . W !,"    "_XX
"RTN","TIUABBV1",118,0)
 . . W !,"As a result, this abbreviation '"_RESP_"' will be flagged as unauthorized.",!
"RTN","TIUABBV1",119,0)
 . . K DIR S DIR("T")=TWAIT
"RTN","TIUABBV1",120,0)
 . . S DIR(0)="Y"
"RTN","TIUABBV1",121,0)
 . . S DIR("A")="Do you still want to add '"_RESP_"'"
"RTN","TIUABBV1",122,0)
 . . S DIR("B")="NO"
"RTN","TIUABBV1",123,0)
 . . D ^DIR
"RTN","TIUABBV1",124,0)
 . . I $D(DIRUT)!('Y) W !!,"No action has been taken !!",! S Y=0,STOP=1 Q
"RTN","TIUABBV1",125,0)
 . S DIC="^TIU(FILE,",DIC(0)="",X=RESP D FILE^DICN
"RTN","TIUABBV1",126,0)
 . S SEQ=$P(Y,U),Y(0)=$G(^TIU(FILE,SEQ,0))
"RTN","TIUABBV1",127,0)
 I $G(Y)'="" S SEQ=$P(TP(Y),U,1),Y=$P(TP(Y),U,1,2),Y(0)=$G(^TIU(FILE,SEQ,0)) Q
"RTN","TIUABBV1",128,0)
 Q
"RTN","TIUABBV1",129,0)
 ;
"RTN","TIUABBV1",130,0)
SEARCH(RESP,TP) ; Search for matching ABBREVIATION
"RTN","TIUABBV1",131,0)
 S (ABBV,ABBVU,C,EXACT,L1,L2,L3,L4,L5,RESP1)=""
"RTN","TIUABBV1",132,0)
 S (SEQ,X1,X2,X3,X4,X5,XX)=""
"RTN","TIUABBV1",133,0)
 S (C,EXACT,L1,L2,L3,L4,L5)=0 S TP(0)=EXACT
"RTN","TIUABBV1",134,0)
 S RESP1=$$UP^XLFSTR(RESP)
"RTN","TIUABBV1",135,0)
 S ABBV=""
"RTN","TIUABBV1",136,0)
S10 S ABBV=$O(^TIU(FILE,"B",ABBV)) G:$G(ABBV)="" SOUT
"RTN","TIUABBV1",137,0)
 S ABBVU=$$UP^XLFSTR(ABBV)
"RTN","TIUABBV1",138,0)
 I $TR(ABBVU,TPUN)'=$TR(RESP1,TPUN) G S10
"RTN","TIUABBV1",139,0)
 I ABBV=RESP S EXACT=1,$P(TP(0),U)=EXACT
"RTN","TIUABBV1",140,0)
 S SEQ=""
"RTN","TIUABBV1",141,0)
S20 S SEQ=$O(^TIU(FILE,"B",ABBV,SEQ)) G:$G(SEQ)="" S10
"RTN","TIUABBV1",142,0)
 S XX="",XX=$G(^TIU(FILE,SEQ,0))
"RTN","TIUABBV1",143,0)
 I $G(XX)="" G S20
"RTN","TIUABBV1",144,0)
 S C=C+1
"RTN","TIUABBV1",145,0)
 S (X1,X2,X3,X4,X5)=""
"RTN","TIUABBV1",146,0)
 S X1=$P(XX,U),X2=$P(XX,U,2),X3=$P(XX,U,3),X4=$P(XX,U,4),X5=$P(XX,U,5)
"RTN","TIUABBV1",147,0)
 I $G(X3)=0,($G(X4)="A") D
"RTN","TIUABBV1",148,0)
 . I $P(TP(0),U,2)'="" S $P(TP(0),U,2)=$P(TP(0),U,2)_", "_X1
"RTN","TIUABBV1",149,0)
 . E  S $P(TP(0),U,2)=X1
"RTN","TIUABBV1",150,0)
 I $L(X1)>L1 S L1=$L(X1)
"RTN","TIUABBV1",151,0)
 S X2=$$GETFLD(FILE,SEQ,".02"),X2="CLASS="_X2
"RTN","TIUABBV1",152,0)
 I $L(X2)>L2 S L2=$L(X2)
"RTN","TIUABBV1",153,0)
 S X3=$$GETFLD(FILE,SEQ,".03"),X3="EXACT-MATCH="_X3
"RTN","TIUABBV1",154,0)
 I $L(X3)>L3 S L3=$L(X3)
"RTN","TIUABBV1",155,0)
 S X4=$$GETFLD(FILE,SEQ,".04"),X4="STATUS="_X4
"RTN","TIUABBV1",156,0)
 I $L(X4)>L4 S L4=$L(X4)
"RTN","TIUABBV1",157,0)
 I $G(X5)'="" S X5="NOTE: "_X5
"RTN","TIUABBV1",158,0)
 S TP(C)=SEQ_U_ABBV_U_X1_","_X2_","_X3_","_X4_","_X5
"RTN","TIUABBV1",159,0)
 G S20
"RTN","TIUABBV1",160,0)
 ;
"RTN","TIUABBV1",161,0)
SOUT ; OUT from SEARCH
"RTN","TIUABBV1",162,0)
 I C'>0 Q
"RTN","TIUABBV1",163,0)
 S (I,J,L,X1,X2,X3,X4,X5,XX)=""
"RTN","TIUABBV1",164,0)
 S I=0
"RTN","TIUABBV1",165,0)
S30 S I=$O(TP(I)) G:$G(I)="" S40
"RTN","TIUABBV1",166,0)
 S (J,L,X1,X2,X3,X4,X5,XX)=""
"RTN","TIUABBV1",167,0)
 S XX=$P(TP(I),U,3)
"RTN","TIUABBV1",168,0)
 S X1=$P(XX,",",1),L=L1-$L(X1) I L>0 F J=1:1:L S X1=X1_" "
"RTN","TIUABBV1",169,0)
 S X2=$P(XX,",",2),L=L2-$L(X2) I L>0 F J=1:1:L S X2=X2_" "
"RTN","TIUABBV1",170,0)
 S X3=$P(XX,",",3),L=L3-$L(X3) I L>0 F J=1:1:L S X3=X3_" "
"RTN","TIUABBV1",171,0)
 S X4=$P(XX,",",4),L=L4-$L(X4) I L>0 F J=1:1:L S X4=X4_" "
"RTN","TIUABBV1",172,0)
 S X5=$P(XX,",",5)
"RTN","TIUABBV1",173,0)
 S $P(TP(I),U,3)=X1_" :   "_X3_"   "_X4_"   "_X2
"RTN","TIUABBV1",174,0)
 G S30
"RTN","TIUABBV1",175,0)
 ;
"RTN","TIUABBV1",176,0)
S40 I '$D(^TIU(8927.9,"B",RESP)) D  Q
"RTN","TIUABBV1",177,0)
 .  S SEQ=$P(^TIU(FILE,0),U,3),SEQ=$G(SEQ)+1,C=C+1
"RTN","TIUABBV1",178,0)
 .  S TP(C)=SEQ_U_RESP_U_"** Create a new entry '"_RESP_"' as new Unauthorized Abbreviation."
"RTN","TIUABBV1",179,0)
 Q
"RTN","TIUABBV1",180,0)
 ;
"RTN","TIUABBV1",181,0)
ASK(RESP) ; Ask if adding a new entry
"RTN","TIUABBV1",182,0)
 K DIC,DIR
"RTN","TIUABBV1",183,0)
 S DIR("T")=TWAIT
"RTN","TIUABBV1",184,0)
 S DIR(0)="Y",DIR("A")="Are you adding '"_RESP_"' as a new "_FILENAME
"RTN","TIUABBV1",185,0)
 S DIR("B")="No" D ^DIR Q:$D(DIRUT)!('Y) 0
"RTN","TIUABBV1",186,0)
 S DIC="^TIU(FILE,",DIC(0)="",X=RESP D FILE^DICN
"RTN","TIUABBV1",187,0)
 Q Y
"RTN","TIUABBV1",188,0)
 ;
"RTN","TIUABBV1",189,0)
GETFLD(FILE,SEQ,FLD) ; Get field value
"RTN","TIUABBV1",190,0)
 S (TRET,TSEQ)=""
"RTN","TIUABBV1",191,0)
 S TSEQ=SEQ_","
"RTN","TIUABBV1",192,0)
 D GETS^DIQ(FILE,TSEQ,FLD,"E","ZZ")
"RTN","TIUABBV1",193,0)
 S TRET=$G(ZZ(FILE,TSEQ,FLD,"E"))
"RTN","TIUABBV1",194,0)
 Q $G(TRET)
"RTN","TIUABBV1",195,0)
 ;
"RTN","TIUABBV1",196,0)
DICHLP ; Help for lookup
"RTN","TIUABBV1",197,0)
 K DIR S (HLP,C,J,X1,X2,X3,X4,X5,ABBV,SEQ)=""
"RTN","TIUABBV1",198,0)
 S DIR("T")=TWAIT
"RTN","TIUABBV1",199,0)
 W !! D HELP^DIE(8927.9,"",.01,"??","HLP")
"RTN","TIUABBV1",200,0)
 S HLP=HLP("DIHELP") F HLP=3:1:HLP("DIHELP") W !,HLP("DIHELP",HLP)
"RTN","TIUABBV1",201,0)
 S DIR(0)="Y"
"RTN","TIUABBV1",202,0)
 s DIR("A")="Do you want the list of Unauthorized Abbreviation(s)"
"RTN","TIUABBV1",203,0)
 S DIR("B")="Yes" W !! D ^DIR Q:$D(DIRUT)!('Y)
"RTN","TIUABBV1",204,0)
 S ABBV="",C=0 W !
"RTN","TIUABBV1",205,0)
H10 S ABBV=$O(^TIU(FILE,"B",ABBV)) Q:$G(ABBV)=""
"RTN","TIUABBV1",206,0)
 S SEQ=0
"RTN","TIUABBV1",207,0)
H20 S SEQ=$O(^TIU(FILE,"B",ABBV,SEQ)) G:$G(SEQ)="" H10
"RTN","TIUABBV1",208,0)
 S XX="",XX=$G(^TIU(FILE,SEQ,0))
"RTN","TIUABBV1",209,0)
 I $G(XX)="" G H20
"RTN","TIUABBV1",210,0)
 S C=C+1
"RTN","TIUABBV1",211,0)
 I C#20'>0 R !!,"Enter <RETURN> to continue or '^' to exit: ",J:DIR("T") S:'$T J=U Q:$G(J)=U
"RTN","TIUABBV1",212,0)
 S (X1,X2,X3,X4,X5)=""
"RTN","TIUABBV1",213,0)
 S X1=$P(XX,U),X2=$P(XX,U,2),X3=$P(XX,U,3)
"RTN","TIUABBV1",214,0)
 S X4=$P(XX,U,4),X5=$P(XX,U,5)
"RTN","TIUABBV1",215,0)
 S X1=X1_" :   "
"RTN","TIUABBV1",216,0)
 S X2=$$GETFLD(FILE,SEQ,".02"),X2="CLASS="_X2
"RTN","TIUABBV1",217,0)
 S X3=$$GETFLD(FILE,SEQ,".03"),X3="EXACT-MATCH="_X3_"   "
"RTN","TIUABBV1",218,0)
 S X4=$$GETFLD(FILE,SEQ,".04"),X4="STATUS="_X4_"   "
"RTN","TIUABBV1",219,0)
 S XX=X1_X3_X4_X2
"RTN","TIUABBV1",220,0)
 W !,C,")",?6,$E(XX,1,74)
"RTN","TIUABBV1",221,0)
 G H20
"RTN","TIUABBV1",222,0)
 ;
"RTN","TIUABBVC")
0^2^B5804430^n/a
"RTN","TIUABBVC",1,0)
TIUABBVC ;BPOIFO/EL - Check for UNAUTHORIZED ABBREVIATIONS ;9/2/2015
"RTN","TIUABBVC",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**297**;JUN 20, 1997;Build 40
"RTN","TIUABBVC",3,0)
 ;
"RTN","TIUABBVC",4,0)
 ; External Reference DBIA#:
"RTN","TIUABBVC",5,0)
 ; #10104 - XLFSTR call (Supported)
"RTN","TIUABBVC",6,0)
 ;
"RTN","TIUABBVC",7,0)
 Q
"RTN","TIUABBVC",8,0)
 ;
"RTN","TIUABBVC",9,0)
EN(TIUDA) ; Check Unauthorized Abbreviation in Progress Note
"RTN","TIUABBVC",10,0)
 N GLBAB,GLBABV
"RTN","TIUABBVC",11,0)
 N I,L,TABBV,TCLA,TCNT,TEXT,TIUFIL,TIUNOTE
"RTN","TIUABBVC",12,0)
 N TLEN,TMAT,TMES,TPUN,TRES,TSEQ,X,X1,X2,XX
"RTN","TIUABBVC",13,0)
 S (GLBAB,GLBABV,I,L,TABBV,TCLA,TEXT,TIUFIL,TIUNOTE,TMAT,TMES)=""
"RTN","TIUABBVC",14,0)
 S (TPUN,TRES,X,X1,X2,XX)=""
"RTN","TIUABBVC",15,0)
 S (TCNT,TLEN,TSEQ)=0
"RTN","TIUABBVC",16,0)
 S TIUFIL=8927.9,TIUNOTE=8925
"RTN","TIUABBVC",17,0)
 S TPUN="|^&~\:;,.!?@#$%*()_-+={}[]/""'<>`"
"RTN","TIUABBVC",18,0)
 S TCLA=""
"RTN","TIUABBVC",19,0)
AB S TCLA=$O(^TIU(TIUFIL,"AC","A",TCLA)) G ABV:$G(TCLA)=""
"RTN","TIUABBVC",20,0)
 S TABBV=""
"RTN","TIUABBVC",21,0)
AB1 S TABBV=$O(^TIU(TIUFIL,"AC","A",TCLA,TABBV)) G AB:$G(TABBV)=""
"RTN","TIUABBVC",22,0)
 S TMAT=""
"RTN","TIUABBVC",23,0)
AB2 S TMAT=$O(^TIU(TIUFIL,"AC","A",TCLA,TABBV,TMAT)) G AB1:$G(TMAT)=""
"RTN","TIUABBVC",24,0)
 I $G(TMAT)=1 S GLBAB(TABBV,1)=""
"RTN","TIUABBVC",25,0)
 E  I $G(TMAT)=0 D  S GLBAB(X,0)=""
"RTN","TIUABBVC",26,0)
 .  S X="",X=$TR($$UP^XLFSTR(TABBV),TPUN)
"RTN","TIUABBVC",27,0)
 G AB2
"RTN","TIUABBVC",28,0)
 ;
"RTN","TIUABBVC",29,0)
ABV S TRES="",(TCNT,TLEN,TSEQ)=0
"RTN","TIUABBVC",30,0)
ABV1 S TSEQ=$O(^TIU(TIUNOTE,TIUDA,"TEXT",TSEQ)) G PUT:$G(TSEQ)=""
"RTN","TIUABBVC",31,0)
 I $G(^TIU(TIUNOTE,TIUDA,"TEXT",TSEQ,0))="" G ABV1
"RTN","TIUABBVC",32,0)
 S TEXT="",TEXT=$G(^TIU(TIUNOTE,TIUDA,"TEXT",TSEQ,0))
"RTN","TIUABBVC",33,0)
 S TLEN=$L(TEXT," ")
"RTN","TIUABBVC",34,0)
 F I=1:1:TLEN S TABBV="",TABBV=$P(TEXT," ",I) I $G(TABBV)'="" D
"RTN","TIUABBVC",35,0)
 . S TMAT=0,X=TABBV
"RTN","TIUABBVC",36,0)
 . I $D(GLBAB(TABBV)) D SET Q
"RTN","TIUABBVC",37,0)
 . S (L,X,X1,X2,XX)=""
"RTN","TIUABBVC",38,0)
 . S L=$L(TABBV),X1=$E(TABBV,1,L-1),X2=$TR($E(TABBV,L,L),TPUN),X=X1_X2
"RTN","TIUABBVC",39,0)
 . I $G(X)="" Q
"RTN","TIUABBVC",40,0)
 . I $D(GLBAB(X)) S TABBV=X D SET Q
"RTN","TIUABBVC",41,0)
 . E  D  Q:$G(XX)=""
"RTN","TIUABBVC",42,0)
 . .  S XX="",XX=$TR($$UP^XLFSTR(TABBV),TPUN)
"RTN","TIUABBVC",43,0)
 . .  I $G(XX)="" Q
"RTN","TIUABBVC",44,0)
 . .  I $D(GLBAB(XX,0)) S TABBV=X D SET Q
"RTN","TIUABBVC",45,0)
 G ABV1
"RTN","TIUABBVC",46,0)
 ;
"RTN","TIUABBVC",47,0)
SET ;
"RTN","TIUABBVC",48,0)
 I $D(GLBABV(TABBV)) Q
"RTN","TIUABBVC",49,0)
 S TRES=TRES_TABBV_", ",TCNT=TCNT+1,GLBABV(TABBV)=""
"RTN","TIUABBVC",50,0)
 Q
"RTN","TIUABBVC",51,0)
 ;
"RTN","TIUABBVC",52,0)
PUT ;
"RTN","TIUABBVC",53,0)
 K GLBAB,GLBABV
"RTN","TIUABBVC",54,0)
 S TMES=""
"RTN","TIUABBVC",55,0)
 I $G(TCNT)'>0 Q TMES
"RTN","TIUABBVC",56,0)
 S TRES=$P(TRES,",",1,TCNT)
"RTN","TIUABBVC",57,0)
 I $G(TCNT)>1 S TMES="0^These abbreviations have "
"RTN","TIUABBVC",58,0)
 E  S TMES="0^This abbreviation has "
"RTN","TIUABBVC",59,0)
 S TMES=TMES_"been identified as a safety concern and must be spelled out: "
"RTN","TIUABBVC",60,0)
 S TMES=TMES_TRES
"RTN","TIUABBVC",61,0)
 Q TMES
"RTN","TIUABBVC",62,0)
 ;
"RTN","TIUABBVP")
0^3^B9842666^n/a
"RTN","TIUABBVP",1,0)
TIUABBVP ;BPOIFO/JLTP - Print Functions ;11/09/2015
"RTN","TIUABBVP",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**297**;JUN 20, 1997;Build 40
"RTN","TIUABBVP",3,0)
 ;
"RTN","TIUABBVP",4,0)
 ; External Reference DBIA#:
"RTN","TIUABBVP",5,0)
 ; -------------------------
"RTN","TIUABBVP",6,0)
 ; #10086 - %ZIS call (Supported)
"RTN","TIUABBVP",7,0)
 ; #10089 - %ZISC call (Supported) 
"RTN","TIUABBVP",8,0)
 ; #10063 - %ZTLOAD call (Supported)
"RTN","TIUABBVP",9,0)
 ; #999 - DD reference (Controlled Subscription)
"RTN","TIUABBVP",10,0)
 ; #10026 - DIR call (Supported)
"RTN","TIUABBVP",11,0)
 ; #10103 - XLFDT call (Supported)
"RTN","TIUABBVP",12,0)
 ; #10104 - XLFSTR call (Supported)
"RTN","TIUABBVP",13,0)
 ;
"RTN","TIUABBVP",14,0)
LA ; List All
"RTN","TIUABBVP",15,0)
 N INACT
"RTN","TIUABBVP",16,0)
 W ! D LI Q:'$D(INACT)
"RTN","TIUABBVP",17,0)
 D:$$DEV("DQ1^TIUABBVP","INACT","List of Unauthorized Abbreviations") DQ1
"RTN","TIUABBVP",18,0)
 Q
"RTN","TIUABBVP",19,0)
DQ1 ; List of Unauthorized Abbreviations
"RTN","TIUABBVP",20,0)
 U IO K ^TMP($J) N ABBV,ACT,CLS,DESC,DLINE,H1,H2,IFN,LINE,MCH,STOP,X,Y
"RTN","TIUABBVP",21,0)
 S (STOP,IFN)=0 F  S IFN=$O(^TIU(8927.9,IFN)) Q:'IFN  D
"RTN","TIUABBVP",22,0)
 .S X=^TIU(8927.9,IFN,0),ABBV=$P(X,U),CLS=$P(X,U,2),MCH=$P(X,U,3),ACT=$P(X,U,4),DESC=$P(X,U,5)
"RTN","TIUABBVP",23,0)
 .I ACT]"" S ^TMP($J,ACT,$$UP^XLFSTR(ABBV),IFN)=ABBV_U_CLS_U_MCH_U_DESC
"RTN","TIUABBVP",24,0)
 D P1("A","Active Unauthorized Abbreviations","No active entries on file.") D:'$G(STOP) PG
"RTN","TIUABBVP",25,0)
 I INACT,'$G(STOP) D P1("I","Inactive Unauthorized Abbreviations","No inactive entries on file.") D:'$G(STOP) PG
"RTN","TIUABBVP",26,0)
 K ^TMP($J) D ^%ZISC
"RTN","TIUABBVP",27,0)
 Q
"RTN","TIUABBVP",28,0)
P1(ACT,H1,NONE) ; Print one STATUS
"RTN","TIUABBVP",29,0)
 N ABBV,CLASS,EXACT,IFN,LINE,NOTE,REC,UABBV
"RTN","TIUABBVP",30,0)
 S $P(LINE,"-",IOM)="" D DHD
"RTN","TIUABBVP",31,0)
 I '$D(^TMP($J,ACT)) W !,NONE,!
"RTN","TIUABBVP",32,0)
 S UABBV="" F  S UABBV=$O(^TMP($J,ACT,UABBV)) Q:UABBV=""!($G(STOP))  D
"RTN","TIUABBVP",33,0)
 .S IFN=0 F  S IFN=$O(^TMP($J,ACT,UABBV,IFN)) Q:'IFN!($G(STOP))  S REC=^(IFN) D
"RTN","TIUABBVP",34,0)
 ..I $Y>(IOSL-5) D:$E(IOST)="C" PG Q:STOP  D DHD
"RTN","TIUABBVP",35,0)
 ..S ABBV=$P(REC,U),CLASS=$P(REC,U,2),EXACT=$P(REC,U,3),NOTE=$P(REC,U,4)
"RTN","TIUABBVP",36,0)
 ..W !,ABBV,?32,$$SET(CLASS,.02),?52,$$SET(EXACT,.03),!?3,"Note: ",NOTE
"RTN","TIUABBVP",37,0)
 ..W !,LINE
"RTN","TIUABBVP",38,0)
 Q
"RTN","TIUABBVP",39,0)
DHD ; Report Heading
"RTN","TIUABBVP",40,0)
 ;;Abbreviation                    Class               Exact Match
"RTN","TIUABBVP",41,0)
 N PRTTIM,DLINE,H2
"RTN","TIUABBVP",42,0)
 S $P(DLINE,"=",IOM)="",H2=$P($T(DHD+1),";;",2),PRTTIM=$$FMTE^XLFDT($$NOW^XLFDT,5)
"RTN","TIUABBVP",43,0)
 S PRTTIM=$P(PRTTIM,"@")_" @"_$P(PRTTIM,"@",2)
"RTN","TIUABBVP",44,0)
 W @IOF W !,$$CNTR(H1),!
"RTN","TIUABBVP",45,0)
 W $$CNTR("Printed: "_PRTTIM),!!,H2,!,DLINE
"RTN","TIUABBVP",46,0)
 Q
"RTN","TIUABBVP",47,0)
PG ; Stop for page break
"RTN","TIUABBVP",48,0)
 N X,Y
"RTN","TIUABBVP",49,0)
 I $E(IOST)="C" S DIR(0)="E" D ^DIR S STOP='Y W @IOF
"RTN","TIUABBVP",50,0)
 I $E(IOST)'="C" S STOP=0
"RTN","TIUABBVP",51,0)
 Q
"RTN","TIUABBVP",52,0)
CNTR(X) ; Center X based on IOM
"RTN","TIUABBVP",53,0)
 N LM,Y S LM=(IOM\2)-($L(X)\2),Y="",$P(Y," ",LM)=""
"RTN","TIUABBVP",54,0)
 Q Y_X
"RTN","TIUABBVP",55,0)
SET(INT,FLD) ; Get External Set-of-Codes Value
"RTN","TIUABBVP",56,0)
 N DD,I,P,VAL
"RTN","TIUABBVP",57,0)
 S DD=$P(^DD(8927.9,FLD,0),U,3),VAL=""
"RTN","TIUABBVP",58,0)
 F I=1:1 S P=$P(DD,";",I) Q:'$L(P)  I $P(P,":")=INT S VAL=$P(P,":",2) Q
"RTN","TIUABBVP",59,0)
 Q VAL
"RTN","TIUABBVP",60,0)
WR(X,LMARG,WIDTH) ; Word wrap
"RTN","TIUABBVP",61,0)
 N I,SIZ,Y
"RTN","TIUABBVP",62,0)
 S SIZ=WIDTH-LMARG-1,I=$L(X)
"RTN","TIUABBVP",63,0)
 F  Q:$L(X)<1  D:$L(X)>SIZ  W ?LMARG,X S X=$E(X,I+1,$L(X))
"RTN","TIUABBVP",64,0)
 .F I=SIZ:-1 Q:I<1  Q:$E(X,I)?1P
"RTN","TIUABBVP",65,0)
 .S:I<1 I=SIZ S Y=$E(X,1,I) W ?LMARG,Y,! S X=$E(X,I+1,$L(X))
"RTN","TIUABBVP",66,0)
 Q
"RTN","TIUABBVP",67,0)
LI ; Ask to List Inactive Abbreviations
"RTN","TIUABBVP",68,0)
 N DIR,DIRUT,X,Y
"RTN","TIUABBVP",69,0)
 S DIR(0)="Y",DIR("A")="Include inactive entries",DIR("B")="No"
"RTN","TIUABBVP",70,0)
 D ^DIR Q:$D(DIRUT)  S INACT=+Y
"RTN","TIUABBVP",71,0)
 Q
"RTN","TIUABBVP",72,0)
DEV(R,VARS,DESC) ; Device Selection
"RTN","TIUABBVP",73,0)
 N %ZIS,POP,ZTDESC,ZTRTN,ZTSAVE
"RTN","TIUABBVP",74,0)
 S %ZIS="QM" W !! D ^%ZIS Q:POP 0 Q:'$D(%ZIS("Q")) 1
"RTN","TIUABBVP",75,0)
 S ZTRTN=R,ZTSAVE(VARS)="",ZTDESC=DESC D ^%ZTLOAD,^%ZISC
"RTN","TIUABBVP",76,0)
 Q 0
"RTN","TIUDCT")
0^7^B8195446^n/a
"RTN","TIUDCT",1,0)
TIUDCT ;BPOIFO/JLTP/EL - Dictation of Progress Notes ;04/11/2016
"RTN","TIUDCT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**297**;JUN 20, 1997;Build 40
"RTN","TIUDCT",3,0)
 ;
"RTN","TIUDCT",4,0)
DICTATE(TIUDA) ; Check document for TO BE DICTATED
"RTN","TIUDCT",5,0)
 ; Called from TIULP
"RTN","TIUDCT",6,0)
 N CNT,EMSG,TBD,TIUI,TIUINST,TIUOK,TIUQUIT,X
"RTN","TIUDCT",7,0)
 S (EMSG,TBD,TIUINST,TIUOK,X)=""
"RTN","TIUDCT",8,0)
 S (CNT,TIUI,TIUQUIT)=0
"RTN","TIUDCT",9,0)
 S TBD="BEGIN-DICTATION"
"RTN","TIUDCT",10,0)
 I '$D(^TIU(8925,TIUDA)) D  Q TIUOK
"RTN","TIUDCT",11,0)
 . S EMSG="TIU Document File entry (#"_TIUDA_") does not exist."
"RTN","TIUDCT",12,0)
 . S TIUOK="0^"_EMSG
"RTN","TIUDCT",13,0)
 F  S TIUI=$O(^TIU(8925,TIUDA,"TEXT",TIUI)) Q:'TIUI!(TIUQUIT)!(CNT)  D
"RTN","TIUDCT",14,0)
 . I $$UP^XLFSTR($G(^TIU(8925,TIUDA,"TEXT",TIUI,0)))[TBD S (TIUOK,TIUQUIT)=1
"RTN","TIUDCT",15,0)
 . S CNT=CNT+1
"RTN","TIUDCT",16,0)
 Q:'TIUOK "" ; TO BE DICTATED not found on first line of document.
"RTN","TIUDCT",17,0)
 ;
"RTN","TIUDCT",18,0)
 S X=+$G(DUZ(2)),TIUINST=+$O(^TIU(8925.99,"B",X,0))
"RTN","TIUDCT",19,0)
 ; Check to See Whether Dictation Control is Enabled
"RTN","TIUDCT",20,0)
 S TIUOK=+$P($G(^TIU(8925.99,+TIUINST,0)),U,23)
"RTN","TIUDCT",21,0)
 Q:'TIUOK "" ; Dictation Control Is Disabled
"RTN","TIUDCT",22,0)
 I '$D(^XUSEC("TIUDCT",DUZ)) D  Q TIUOK ; User doesn't have access
"RTN","TIUDCT",23,0)
 . S EMSG="You are not a holder of the TIUDCT security key."
"RTN","TIUDCT",24,0)
 . S TIUOK="0^"_EMSG
"RTN","TIUDCT",25,0)
 I '$D(^TIU(8925.99,TIUINST,6)) D  Q TIUOK ; Dictation Instruction Setup
"RTN","TIUDCT",26,0)
 . S EMSG="The Dictation Instruction in TIU Parameters File has not been setup."
"RTN","TIUDCT",27,0)
 . S TIUOK="0^"_EMSG
"RTN","TIUDCT",28,0)
 Q TIUOK
"RTN","TIUDCT",29,0)
 ;
"RTN","TIUDCT",30,0)
UPDATE(TIUDA) ; Update progress note with dictation instructions
"RTN","TIUDCT",31,0)
 ; Called from TIULP
"RTN","TIUDCT",32,0)
 N EMSG,FDA,I,TIUERR,TIUINST,TIUL5,TIUOK,X
"RTN","TIUDCT",33,0)
 S (EMSG,I,TIUINST,TIUL5,TIUOK,X)=""
"RTN","TIUDCT",34,0)
 S TIUOK=1
"RTN","TIUDCT",35,0)
 ;
"RTN","TIUDCT",36,0)
 S TIUL5=$$TIUL5(TIUDA),X=+$G(DUZ(2))
"RTN","TIUDCT",37,0)
 S TIUINST=+$O(^TIU(8925.99,"B",X,0)) Q:'TIUINST 0
"RTN","TIUDCT",38,0)
 K ^TMP("TIUDCT",$J)
"RTN","TIUDCT",39,0)
 S I=0
"RTN","TIUDCT",40,0)
 F  S I=$O(^TIU(8925.99,TIUINST,6,I)) Q:$G(I)=""  D
"RTN","TIUDCT",41,0)
 . S X=$G(^TIU(8925.99,TIUINST,6,I,0))
"RTN","TIUDCT",42,0)
 . S ^TMP("TIUDCT",$J,I)=$$FILL(X)
"RTN","TIUDCT",43,0)
 D WP^DIE(8925,TIUDA_",",2,"K","^TMP(""TIUDCT"",$J)","TIUERR")
"RTN","TIUDCT",44,0)
 K ^TMP("TIUDCT")
"RTN","TIUDCT",45,0)
 I $D(TIUERR) D  Q TIUOK
"RTN","TIUDCT",46,0)
 . S EMSG="Error during replacing NOTE entry (#"_$G(TIUDA)_") with Dictation Instruction."
"RTN","TIUDCT",47,0)
 . S TIUOK="0^"_EMSG
"RTN","TIUDCT",48,0)
 ;
"RTN","TIUDCT",49,0)
 ; Set status to "undictated"
"RTN","TIUDCT",50,0)
 S FDA(8925,TIUDA_",",.05)=1
"RTN","TIUDCT",51,0)
 D FILE^DIE("K","FDA","TIUERR")
"RTN","TIUDCT",52,0)
 I $D(TIUERR) D  Q TIUOK
"RTN","TIUDCT",53,0)
 . S EMSG="Error during updating STATUS in TIU Document File entry (#"_$G(TIUDA)_")."
"RTN","TIUDCT",54,0)
 . S TIUOK="0^"_EMSG
"RTN","TIUDCT",55,0)
 ;
"RTN","TIUDCT",56,0)
 D ALERTDEL^TIUALRT(TIUDA)
"RTN","TIUDCT",57,0)
 S TIUOK=1
"RTN","TIUDCT",58,0)
 Q TIUOK
"RTN","TIUDCT",59,0)
 ;
"RTN","TIUDCT",60,0)
TIUL5(X) ; Only last five digits of record # as document number
"RTN","TIUDCT",61,0)
 N L,Z
"RTN","TIUDCT",62,0)
 S Z="00000",L=$L(X),X=$S(L<5:$E(Z,1,5-L)_X,L=5:X,1:$E(X,L-4,L))
"RTN","TIUDCT",63,0)
 Q X
"RTN","TIUDCT",64,0)
 ;
"RTN","TIUDCT",65,0)
FILL(X) ; Fill in local variables
"RTN","TIUDCT",66,0)
 N VAR
"RTN","TIUDCT",67,0)
 F  Q:X'["|"  S VAR=$P(X,"|",2) D  S X=$P(X,"|")_VAR_$P(X,"|",3,255)
"RTN","TIUDCT",68,0)
 . I $L($G(VAR)) D
"RTN","TIUDCT",69,0)
 . . I $G(@VAR)'="" S VAR=$G(@VAR)
"RTN","TIUDCT",70,0)
 . . E  S VAR="("_VAR_" is not defined)"
"RTN","TIUDCT",71,0)
 Q X
"RTN","TIULP")
0^4^B61391624^B55451451
"RTN","TIULP",1,0)
TIULP ; SLC/JER - Functions determining privilege ; 3/7/12 4:20pm
"RTN","TIULP",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**98,100,116,109,138,152,175,157,182,184,217,236,234,232,241,256,297**;Jun 20, 1997;Build 40
"RTN","TIULP",3,0)
 ; CANDO^USRLA: ICA 2325, ISA^USRLM: ICA 2324
"RTN","TIULP",4,0)
 ; 8930.1,2,8: IACS 3129,3128,3104 
"RTN","TIULP",5,0)
CANDO(TIUDA,TIUACT,PERSON) ; Can PERSON perform action now
"RTN","TIULP",6,0)
 ; Receives: TIUDA=Record number in file 8925
"RTN","TIULP",7,0)
 ;           TIUACT=Name of user action in 8930.8 (USR ACTION)
"RTN","TIULP",8,0)
 ;           PERSON=New Person file IFN.
"RTN","TIULP",9,0)
 ;                  Assumed to be DUZ if not received.
"RTN","TIULP",10,0)
 ;                  New **100** ID param, backward compatible.
"RTN","TIULP",11,0)
 ;  Returns:   TIUY=1:yes,0:no_"^"_why not message
"RTN","TIULP",12,0)
 N TIUI,TIUTYP,TIUROLE,STATUS,TIUY,TIUATYP,MSG,WHO,MODIFIER,TIUD0,TIUACTW
"RTN","TIULP",13,0)
 S TIUY=0 I '$G(PERSON) S PERSON=DUZ
"RTN","TIULP",14,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)) I 'TIUD0 G CANDOX
"RTN","TIULP",15,0)
 I $$ISPRFDOC^TIUPRF(TIUDA),((TIUACT="ATTACH ID ENTRY")!(TIUACT="ATTACH TO ID NOTE")) S TIUY="0^Patient Record Flag notes may not be used as Interdisciplinary notes." G CANDOX
"RTN","TIULP",16,0)
 S TIUACTW=$G(TIUACT)
"RTN","TIULP",17,0)
 ;VMP/AM P256 Only Hims/Mis Chiefs and Privacy Act Officers are allowed to delete NIRs and ARs
"RTN","TIULP",18,0)
 I (($G(XQY0)["OR CPRS GUI CHART")!($G(XQY0)["TIU ")),$$ISSURG^TIULP3(+TIUDA),$G(TIUACTW)["DELETE ",'$$AUTHUSR^TIULP3(PERSON) D  G CANDOX
"RTN","TIULP",19,0)
 .  S TIUY="0^ Only Privacy Act Officers or MIS/HIMS Chiefs may DELETE this Document."
"RTN","TIULP",20,0)
 ;**100** was I +TIUACT'>0 S TIUACT etc.
"RTN","TIULP",21,0)
 S TIUACT=$$USREVNT(TIUACT) I +TIUACT'>0 G CANDOX
"RTN","TIULP",22,0)
 ; -- Historical Procedures - Prohibit actions detailed in
"RTN","TIULP",23,0)
 ;    HPCAN^TIUCP: P182
"RTN","TIULP",24,0)
 N HPCAN I $$ISHISTCP^TIUCP(+TIUD0) S HPCAN=$$HPCAN^TIUCP(+TIUACT) I 'HPCAN S TIUY=HPCAN G CANDOX
"RTN","TIULP",25,0)
 ; **152 Get status
"RTN","TIULP",26,0)
 S STATUS=+$P(TIUD0,U,5)
"RTN","TIULP",27,0)
 ; **152[234] prevents editing or sending back a completed or uncosigned document.
"RTN","TIULP",28,0)
 I STATUS>5,(+TIUACT=9)!(+TIUACT=17) D  G CANDOX
"RTN","TIULP",29,0)
 . ; **152[234] Displays message to user
"RTN","TIULP",30,0)
 . I +TIUACT=9 S TIUY="0^ You may not edit uncosigned or completed documents."
"RTN","TIULP",31,0)
 . I +TIUACT=17 S TIUY="0^You may not send back uncosigned or completed documents."
"RTN","TIULP",32,0)
 ; -- In case business rules have changed, & children already existed:
"RTN","TIULP",33,0)
 I +TIUACT=24,$D(^TIU(8925,"GDAD",TIUDA)) D  G CANDOX
"RTN","TIULP",34,0)
 . S TIUY="0^ This note cannot be attached; it has its own children."
"RTN","TIULP",35,0)
 I +TIUACT=25,+$G(^TIU(8925,TIUDA,21)) D  G CANDOX
"RTN","TIULP",36,0)
 . S TIUY="0^ This note cannot receive interdisciplinary children; it is itself a child."
"RTN","TIULP",37,0)
 ;VMP/AM P241 If note is administratively closed, then bypass check for blank characters
"RTN","TIULP",38,0)
 I $P($G(^TIU(8925,+TIUDA,16)),U,13)'="S",+TIUACT=4!(+TIUACT=5),+$$BLANK^TIULC(TIUDA) D  G CANDOX ;Sets TIUPRM1
"RTN","TIULP",39,0)
 . S TIUY="0^ Contains blanks ("_$P(TIUPRM1,U,6)_") which must be filled before "_$P(TIUACT,U,2)_"ATURE."
"RTN","TIULP",40,0)
 ;
"RTN","TIULP",41,0)
 ; **Beginning changes entered with TIU*1*297** 
"RTN","TIULP",42,0)
 ; Check for Unauthorized Abbreviation in Progress Note
"RTN","TIULP",43,0)
 I +TIUACT=4,STATUS'=7,$G(XQY0)="OR CPRS GUI CHART" D  I $G(TIUY)'="" G CANDOX
"RTN","TIULP",44,0)
 . S TIUY="",TIUY=$$EN^TIUABBVC(TIUDA)
"RTN","TIULP",45,0)
 ; Check document for "to be dictated"
"RTN","TIULP",46,0)
 I STATUS<6,+TIUACT=7 D  G:'TIUY CANDOX
"RTN","TIULP",47,0)
 . N TIUDCTY S TIUDCTY=$$DICTATE^TIUDCT(TIUDA) I TIUDCTY="" S TIUY=1 Q  ; Do nothing
"RTN","TIULP",48,0)
 . I 'TIUDCTY S TIUY=TIUDCTY Q  ; Return error status
"RTN","TIULP",49,0)
 . S TIUDCTY=$$UPDATE^TIUDCT(TIUDA) S TIUY=TIUDCTY
"RTN","TIULP",50,0)
 ;** End changes added for TIU*1*297 ***
"RTN","TIULP",51,0)
 ;
"RTN","TIULP",52,0)
 S TIUROLE=$$USRROLE(TIUDA,PERSON)
"RTN","TIULP",53,0)
 S TIUTYP=+TIUD0
"RTN","TIULP",54,0)
 I $$ISADDNDM^TIULC1(+TIUDA) S TIUATYP=TIUTYP,TIUTYP=+$G(^TIU(8925,+$P(TIUD0,U,6),0))
"RTN","TIULP",55,0)
 I TIUROLE']"" S TIUY=$$CANDO^USRLA(TIUTYP,STATUS,+TIUACT,PERSON)
"RTN","TIULP",56,0)
 F TIUI=1:1:($L(TIUROLE,U)-1) D  Q:+$G(TIUY)>0
"RTN","TIULP",57,0)
 . S TIUY=$$CANDO^USRLA(TIUTYP,STATUS,+TIUACT,PERSON,$P(TIUROLE,U,TIUI))
"RTN","TIULP",58,0)
 I +$G(TIUATYP) S TIUTYP=+$G(TIUATYP)
"RTN","TIULP",59,0)
 ;VMP/AM P256 Hims/Mis Chiefs and Privacy Act Officers are allowed to delete NIRs and ARs regardless of business rules
"RTN","TIULP",60,0)
 I ($$ISSURG^TIULP3(+TIUDA)&$$AUTHUSR^TIULP3(PERSON)),$G(TIUACTW)["DELETE" S TIUY=1
"RTN","TIULP",61,0)
 ;**100** update for PERSON param; update for verb modifier:
"RTN","TIULP",62,0)
 I +TIUY'>0 D  G CANDOX
"RTN","TIULP",63,0)
 . S WHO=" You"
"RTN","TIULP",64,0)
 . ;I PERSON'=DUZ S WHO=$P(^VA(200,PERSON,0),U),WHO=$$NAME^TIULS(WHO,"FIRST LAST")
"RTN","TIULP",65,0)
 . I PERSON'=DUZ S WHO=$$NAME^TIULS($$GET1^DIQ(200,PERSON,.01),"FIRST LAST") ;P182
"RTN","TIULP",66,0)
 . S MODIFIER=$P(TIUACT,U,3) I $L(MODIFIER) S MODIFIER=" "_MODIFIER
"RTN","TIULP",67,0)
 . ;e.g. "You may not ATTACH this UNSIGNED TELEPHONE NOTE TO AN ID NOTE."
"RTN","TIULP",68,0)
 . S MSG=WHO_" may not "_$P(TIUACT,U,2)_" this "_$P($G(^TIU(8925.6,+STATUS,0)),U)_" "_$$PNAME^TIULC1(TIUTYP)_MODIFIER_"."
"RTN","TIULP",69,0)
 . S TIUY=TIUY_U_MSG
"RTN","TIULP",70,0)
 I +TIUACT=15,$$HASIMG^TIURB2(+TIUDA) D  G CANDOX
"RTN","TIULP",71,0)
 . S TIUY="0^ This document contains linked images. You must ""delete"" the Images using the Imaging package before proceeding."
"RTN","TIULP",72,0)
 ;VMP/ELR P217. Do not allow deletion of a parent with child
"RTN","TIULP",73,0)
 I $G(TIUACTW)["DELETE RECORD",$$HASIDKID^TIUGBR(+TIUDA) D  G CANDOX
"RTN","TIULP",74,0)
 . ;VMP/ELR P232. Create new error msg.
"RTN","TIULP",75,0)
 . NEW TIUMSG D IDMSG^TIULP3(.TIUMSG) S TIUY="0^"_TIUMSG
"RTN","TIULP",76,0)
 ;VMP/ELR P232 do not allow edit, delete or addendum on NIR and Anesthesia report  IA3356 FOR XQY0
"RTN","TIULP",77,0)
 ;VMP/AM P256 Only Hims/Mis Chiefs and Privacy Act Officers are allowed to delete NIRs and ARs
"RTN","TIULP",78,0)
 I (($G(XQY0)["OR CPRS GUI CHART")!($G(XQY0)["TIU ")),$$ACTION^TIULP3($G(TIUACTW)),$$ISSURG^TIULP3(+TIUDA) D  G CANDOX
"RTN","TIULP",79,0)
 . S TIUY="0^ "_$$SURMSG^TIULP3($G(TIUACTW))
"RTN","TIULP",80,0)
CANDOX Q TIUY
"RTN","TIULP",81,0)
 ;
"RTN","TIULP",82,0)
CANLINK(TIUTYP) ; Can user (DUZ) link (attach) a document of a particular type
"RTN","TIULP",83,0)
 ;to an ID note.
"RTN","TIULP",84,0)
 ; For use in ADD NEW ID NOTE, where docmt is not entered yet.
"RTN","TIULP",85,0)
 ; Assume most favorable circumstances (user will complete
"RTN","TIULP",86,0)
 ;the note, so if user still can't attach, can tell them no,
"RTN","TIULP",87,0)
 ;when they first select title for the new entry.
"RTN","TIULP",88,0)
 ; Rule out if TIUTYP can be an ID parent, since ID parent
"RTN","TIULP",89,0)
 ;and ID kid function as mutually exclusive, (regardless of
"RTN","TIULP",90,0)
 ;business rules).
"RTN","TIULP",91,0)
 N TIUACT,STATUS,USRROLE,TIUY
"RTN","TIULP",92,0)
 S TIUACT=$$USREVNT("ATTACH TO ID NOTE"),STATUS=7 ; complete
"RTN","TIULP",93,0)
 S USRROLE=+$O(^USR(8930.2,"B","COMPLETER",0))
"RTN","TIULP",94,0)
 S TIUY=$$CANDO^USRLA(TIUTYP,STATUS,+TIUACT,DUZ,USRROLE)
"RTN","TIULP",95,0)
 I '$G(TIUY) S TIUY="0^ You may not use this title for interdisciplinary child entries." Q TIUY
"RTN","TIULP",96,0)
 ; -- If user can attach a certain note, but note can also receive
"RTN","TIULP",97,0)
 ;    ID entries, don't let user attach it. --
"RTN","TIULP",98,0)
 I $$POSSPRNT^TIULP(TIUTYP) S TIUY="0^ This interdisciplinary PARENT title cannot be used for CHILD entries."
"RTN","TIULP",99,0)
 ; -- If selected type is a CWAD, don't let user attach it: --
"RTN","TIULP",100,0)
 I $$ISCWAD^TIULX(TIUTYP) S TIUY="0^ CWAD titles cannot be used for interdisciplinary entries."
"RTN","TIULP",101,0)
 ; -- If selected type is a PRF, don't let user attach it: --
"RTN","TIULP",102,0)
 I $$ISPFTTL^TIUPRFL(TIUTYP) S TIUY="0^ Patient Record Flag titles cannot be used for interdisciplinary entries."
"RTN","TIULP",103,0)
 ; -- If selected type is a consult, don't let user attach it: --
"RTN","TIULP",104,0)
 I $$ISA^TIULX(TIUTYP,+$$CLASS^TIUCNSLT) S TIUY="0^ Consult titles cannot be used for interdisciplinary entries."
"RTN","TIULP",105,0)
 Q TIUY
"RTN","TIULP",106,0)
 ;
"RTN","TIULP",107,0)
POSSPRNT(TIUTYP) ; Is a docmt intended as a possible ID parent?
"RTN","TIULP",108,0)
 ;Returns 1^WHYCAN'TATTACH if there are business rules permitting ANYONE
"RTN","TIULP",109,0)
 ;to attach ID entries to notes of type TIUTYP.
"RTN","TIULP",110,0)
 ;Else returns 0.
"RTN","TIULP",111,0)
 N TIUACT,STATUS,TIUY,DADTYP
"RTN","TIULP",112,0)
 S TIUY=0,TIUACT=+$$USREVNT("ATTACH ID ENTRY")
"RTN","TIULP",113,0)
 F STATUS=6,7,8 D  G:TIUY POSSX
"RTN","TIULP",114,0)
 . I $O(^USR(8930.1,"AR",TIUTYP,STATUS,TIUACT,0)) S TIUY=1 Q
"RTN","TIULP",115,0)
 . I $O(^USR(8930.1,"AC",TIUTYP,STATUS,TIUACT,0)) S TIUY=1
"RTN","TIULP",116,0)
 ; -- If no rules for TIUTYP, try its parent: --
"RTN","TIULP",117,0)
 S DADTYP=$O(^TIU(8925.1,"AD",TIUTYP,0)) G:DADTYP'>0 POSSX
"RTN","TIULP",118,0)
 S TIUY=$$POSSPRNT(DADTYP)
"RTN","TIULP",119,0)
POSSX I TIUY S TIUY="1^ Interdisciplinary PARENT notes cannot be attached as CHILD entries."
"RTN","TIULP",120,0)
 Q TIUY
"RTN","TIULP",121,0)
 ;
"RTN","TIULP",122,0)
CANENTR(TIUTYP) ; Evaluate privilege to enter a document of a particular type
"RTN","TIULP",123,0)
 N TIUACT,STATUS,USRROLE,TIUY
"RTN","TIULP",124,0)
 S TIUACT=$$USREVNT("ENTRY"),STATUS=2 ; untranscribed
"RTN","TIULP",125,0)
 S USRROLE=3 ; transcriber
"RTN","TIULP",126,0)
 S TIUY=$$CANDO^USRLA(TIUTYP,STATUS,+TIUACT,DUZ,USRROLE)
"RTN","TIULP",127,0)
 Q TIUY
"RTN","TIULP",128,0)
USRROLE(TIUDA,PERSON) ; Identify the user's role with respect to the document
"RTN","TIULP",129,0)
 ; 3/20/00 **100** Added role COMPLETER
"RTN","TIULP",130,0)
 ; 3/20/00 **100** Added PERSON param
"RTN","TIULP",131,0)
 N TIU0,TIU12,TIU13,TIUY,TIU15,COMPLTR,STATUS
"RTN","TIULP",132,0)
 S PERSON=$G(PERSON,DUZ)
"RTN","TIULP",133,0)
 S TIU0=$G(^TIU(8925,+TIUDA,0)),STATUS=$P(TIU0,U,5)
"RTN","TIULP",134,0)
 S TIU12=$G(^TIU(8925,+TIUDA,12))
"RTN","TIULP",135,0)
 S TIU13=$G(^TIU(8925,+TIUDA,13)),TIU15=$G(^TIU(8925,+TIUDA,15))
"RTN","TIULP",136,0)
 I PERSON=+$P(TIU13,U,2) S TIUY=+$O(^USR(8930.2,"B","TRANSCRIBER",0))_U
"RTN","TIULP",137,0)
 I PERSON=+$P(TIU12,U,2) S TIUY=$G(TIUY)_+$O(^USR(8930.2,"B","AUTHOR/DICTATOR",0))_U
"RTN","TIULP",138,0)
 I PERSON=+$P(TIU12,U,9) S TIUY=$G(TIUY)_+$O(^USR(8930.2,"B","ATTENDING PHYSICIAN",0))_U
"RTN","TIULP",139,0)
 I PERSON=+$P(TIU12,U,4) S TIUY=$G(TIUY)_+$O(^USR(8930.2,"B","EXPECTED SIGNER",0))_U
"RTN","TIULP",140,0)
 I PERSON=+$P(TIU12,U,8) S TIUY=$G(TIUY)_+$O(^USR(8930.2,"B","EXPECTED COSIGNER",0))_U
"RTN","TIULP",141,0)
 I $$ASURG^TIUADSIG(TIUDA) S TIUY=$G(TIUY)_+$O(^USR(8930.2,"B","SURROGATE",0))_U ;P157
"RTN","TIULP",142,0)
 ;Check if the person can be an Interpreter for this document via a Consult API
"RTN","TIULP",143,0)
 I $$CPINTERP^GMRCCP(+TIUDA,PERSON) S TIUY=$G(TIUY)_+$O(^USR(8930.2,"B","INTERPRETER",0))_U
"RTN","TIULP",144,0)
 I STATUS>6 D  I COMPLTR S TIUY=$G(TIUY)_+$O(^USR(8930.2,"B","COMPLETER",0))_U
"RTN","TIULP",145,0)
 . S COMPLTR=0
"RTN","TIULP",146,0)
 . I PERSON=+$P(TIU15,U,8) S COMPLTR=1 Q
"RTN","TIULP",147,0)
 . I '$P(TIU15,U,8),PERSON=+$P(TIU15,U,2) S COMPLTR=1
"RTN","TIULP",148,0)
 I +$O(^TIU(8925.7,"AE",+TIUDA,+PERSON,0)) D
"RTN","TIULP",149,0)
 . N TIUXTRA S TIUXTRA=+$O(^TIU(8925.7,"AE",+TIUDA,+PERSON,0))
"RTN","TIULP",150,0)
 . I +$P($G(^TIU(8925.7,+TIUXTRA,0)),U,4) Q
"RTN","TIULP",151,0)
 . S TIUY=$G(TIUY)_+$O(^USR(8930.2,"B","ADDITIONAL SIGNER",0))_U
"RTN","TIULP",152,0)
 Q $G(TIUY)
"RTN","TIULP",153,0)
USREVNT(EVENT) ; Given event name, return:
"RTN","TIULP",154,0)
 ;EVENT = event pointer^user verb^verb modifier
"RTN","TIULP",155,0)
 ; **100** added verb modifier piece (.07)
"RTN","TIULP",156,0)
 N TIUY,TIUDA,NODE0
"RTN","TIULP",157,0)
 S TIUDA=+$O(^USR(8930.8,"B",EVENT,0))
"RTN","TIULP",158,0)
 S NODE0=$G(^USR(8930.8,TIUDA,0))
"RTN","TIULP",159,0)
 S TIUY=TIUDA_U_$P(NODE0,U,5)_U_$P(NODE0,U,7)
"RTN","TIULP",160,0)
 Q TIUY
"RTN","TIULP",161,0)
CANPICK(TIUTYP) ; Screens selection of title by title status and
"RTN","TIULP",162,0)
 ;(for status TEST), by owner.
"RTN","TIULP",163,0)
 N TIUPOWN,TIUCOWN,TIUT0,TIUTSTAT,TIUY S TIUY=0
"RTN","TIULP",164,0)
 S TIUT0=$G(^TIU(8925.1,+TIUTYP,0)),TIUTSTAT=$P(TIUT0,U,7)
"RTN","TIULP",165,0)
 I TIUTSTAT']"" S TIUY=0 G CANPIX
"RTN","TIULP",166,0)
 I TIUTSTAT=13 S TIUY=0 G CANPIX
"RTN","TIULP",167,0)
 I TIUTSTAT=11 S TIUY=1 G CANPIX
"RTN","TIULP",168,0)
 S TIUPOWN=$P(TIUT0,U,5),TIUCOWN=+$P(TIUT0,U,6)
"RTN","TIULP",169,0)
 I TIUTSTAT=10 S TIUY=$S(TIUPOWN=DUZ:1,+$$ISA^USRLM(DUZ,TIUCOWN):1,1:0)
"RTN","TIULP",170,0)
CANPIX Q +$G(TIUY)
"RTN","TIULP",171,0)
REQCOSIG(TIUTYP,TIUDA,USER,TIUDT) ; Evaluate whether user requires cosignature
"RTN","TIULP",172,0)
 N TIUI,TIUY,TIUDPRM S USER=$S(+$G(USER):+$G(USER),1:+$G(DUZ))
"RTN","TIULP",173,0)
 D DOCPRM^TIULC1(TIUTYP,.TIUDPRM,+$G(TIUDA))
"RTN","TIULP",174,0)
 I $G(TIUDPRM(5))="" G REQCOSX
"RTN","TIULP",175,0)
 I +$G(TIUDT)'>0 S TIUDT=+$P($P(+$G(^TIU(8925,+$G(TIUDA),13)),U),".")
"RTN","TIULP",176,0)
 F TIUI=1:1:$L(TIUDPRM(5),U) D  Q:+TIUY>0
"RTN","TIULP",177,0)
 . S TIUY=+$$ISA^USRLM(+USER,+$P(TIUDPRM(5),U,TIUI),,+$G(TIUDT))
"RTN","TIULP",178,0)
REQCOSX Q +$G(TIUY)
"RTN","TIULP",179,0)
 ;
"RTN","TIULP",180,0)
REQCPF(TIUCDA) ;Check if clinical procedure fields are required
"RTN","TIULP",181,0)
 ; Input  -- TIUCDA   Request/Consult File (#123) IEN
"RTN","TIULP",182,0)
 ; Output -- 1=Required and 0=Not Required
"RTN","TIULP",183,0)
 N TIUCPACT,REQF
"RTN","TIULP",184,0)
 I '$G(TIUCDA) G REQCPFQ
"RTN","TIULP",185,0)
 S TIUCPACT=$$CPACTM^GMRCCP(TIUCDA)
"RTN","TIULP",186,0)
 I TIUCPACT=1!(TIUCPACT=3) S REQF=1
"RTN","TIULP",187,0)
REQCPFQ Q +$G(REQF)
"RTN","TIUPS297")
0^6^B1090642^n/a
"RTN","TIUPS297",1,0)
TIUPS297 ;BPOIFO/EL - Post-Install for TIU MAINT MENU Cleanup ;4/29/2016
"RTN","TIUPS297",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**297**;JUN 20, 1997;Build 40
"RTN","TIUPS297",3,0)
 ;
"RTN","TIUPS297",4,0)
 ; This routine will use the following IA:
"RTN","TIUPS297",5,0)
 ; #1157 - $$ADD^XPDMENU (SUPPORTED)
"RTN","TIUPS297",6,0)
 Q
"RTN","TIUPS297",7,0)
 ;
"RTN","TIUPS297",8,0)
OPTFIX ; Fixed Synonym and Display in OPTION NAME
"RTN","TIUPS297",9,0)
 N TIUDIS,TIUFLG,TIUMENU,TIUOPT,TIUSYN
"RTN","TIUPS297",10,0)
 S (TIUDIS,TIUFLG,TIUMENU,TIUOPT,TIUSYN)=""
"RTN","TIUPS297",11,0)
 S TIUMENU="TIU IRM MAINTENANCE MENU"
"RTN","TIUPS297",12,0)
 S TIUOPT="TIU ACTIVE TITLE CLEANUP"
"RTN","TIUPS297",13,0)
 S (TIUSYN,TIUDIS)=6
"RTN","TIUPS297",14,0)
 S TIUFLG=$$ADD^XPDMENU(TIUMENU,TIUOPT,TIUSYN,TIUDIS)
"RTN","TIUPS297",15,0)
 S TIUOPT="TIU MAP TITLES MENU"
"RTN","TIUPS297",16,0)
 S (TIUSYN,TIUDIS)=8
"RTN","TIUPS297",17,0)
 S TIUFLG=$$ADD^XPDMENU(TIUMENU,TIUOPT,TIUSYN,TIUDIS)
"RTN","TIUPS297",18,0)
 S TIUOPT="TIU TEXT EVENT EDIT"
"RTN","TIUPS297",19,0)
 S (TIUSYN,TIUDIS)=9
"RTN","TIUPS297",20,0)
 S TIUFLG=$$ADD^XPDMENU(TIUMENU,TIUOPT,TIUSYN,TIUDIS)
"RTN","TIUPS297",21,0)
 Q
"RTN","TIUPS297",22,0)
 ;
"SEC","^DIC",8927.9,8927.9,0,"AUDIT")
@
"SEC","^DIC",8927.9,8927.9,0,"DD")
@
"SEC","^DIC",8927.9,8927.9,0,"DEL")
@
"SEC","^DIC",8927.9,8927.9,0,"LAYGO")

"SEC","^DIC",8927.9,8927.9,0,"RD")

"SEC","^DIC",8927.9,8927.9,0,"WR")

"UP",8925.99,8925.9902,-1)
8925.99^6
"UP",8925.99,8925.9902,0)
8925.9902
"VER")
8.0^22.2
"^DD",8925.99,8925.99,.23,0)
ENABLE DICTATION CONTROL^S^0:NO;1:YES;^0;23^Q
"^DD",8925.99,8925.99,.23,3)
Select YES to turn on dictation functionality.
"^DD",8925.99,8925.99,.23,21,0)
^^9^9^3170420^
"^DD",8925.99,8925.99,.23,21,1,0)
A YES in this field will turn on dictation functionality introduced by 
"^DD",8925.99,8925.99,.23,21,2,0)
patch TIU*1*297.  A NO or lack of entry will turn off this dictation 
"^DD",8925.99,8925.99,.23,21,3,0)
functionality.
"^DD",8925.99,8925.99,.23,21,4,0)
 
"^DD",8925.99,8925.99,.23,21,5,0)
When dictation functionality is turned on and a progress note is started
"^DD",8925.99,8925.99,.23,21,6,0)
and the phrase "TO BE DICTATED" is entered in the very first line by an
"^DD",8925.99,8925.99,.23,21,7,0)
author who holds the TIUDCT security key, the entire note will be replaced
"^DD",8925.99,8925.99,.23,21,8,0)
with dictation instructions taken from the DICTATION INSTRUCTIONS
"^DD",8925.99,8925.99,.23,21,9,0)
Field (#6).
"^DD",8925.99,8925.99,.23,"DT")
3170420
"^DD",8925.99,8925.99,6,0)
DICTATION INSTRUCTIONS^8925.9902^^6;0
"^DD",8925.99,8925.99,6,21,0)
^^14^14^3170423^
"^DD",8925.99,8925.99,6,21,1,0)
This field is only meaningful when the ENABLE DICTATION CONTROL (#.23) 
"^DD",8925.99,8925.99,6,21,2,0)
field is set to YES.  This field should contain text instructions specific
"^DD",8925.99,8925.99,6,21,3,0)
to this institution for dictating text into a patient's progress note.
"^DD",8925.99,8925.99,6,21,4,0)
 
"^DD",8925.99,8925.99,6,21,5,0)
Within this field you may reference local variables or expressions by 
"^DD",8925.99,8925.99,6,21,6,0)
placing them between vertical bars.  For example to reference the internal
"^DD",8925.99,8925.99,6,21,7,0)
entry number of this document type |TIUDA|.
"^DD",8925.99,8925.99,6,21,8,0)
 
"^DD",8925.99,8925.99,6,21,9,0)
Local variables available are TIUDA, TIUL5, and TIUINST. TIUDA is the
"^DD",8925.99,8925.99,6,21,10,0)
internal entry number of the current document. TIUL5 is the last 5 digits
"^DD",8925.99,8925.99,6,21,11,0)
of TIUDA. TIUINST is the internal entry number of the INSTITUTION of the
"^DD",8925.99,8925.99,6,21,12,0)
currently logged in user.  Kernel's software-wide variables as defined in
"^DD",8925.99,8925.99,6,21,13,0)
the kernel technical manual and FileMan's package-wide variables as
"^DD",8925.99,8925.99,6,21,14,0)
defined in the FileMan technical manual may be used as well.
"^DD",8925.99,8925.9902,0)
DICTATION INSTRUCTIONS SUB-FIELD^^.01^1
"^DD",8925.99,8925.9902,0,"DT")
3170423
"^DD",8925.99,8925.9902,0,"NM","DICTATION INSTRUCTIONS")

"^DD",8925.99,8925.9902,0,"UP")
8925.99
"^DD",8925.99,8925.9902,.01,0)
DICTATION INSTRUCTIONS^W^^0;1
"^DD",8925.99,8925.9902,.01,3)
Enter instruction for this Dictation Control
"^DD",8925.99,8925.9902,.01,"DT")
3170423
"^DD",8927.9,8927.9,0)
FIELD^^.05^5
"^DD",8927.9,8927.9,0,"DDA")
N
"^DD",8927.9,8927.9,0,"DT")
3170423
"^DD",8927.9,8927.9,0,"ID",.02)
W "   ",@("$P($P($C(59)_$S($D(^DD(8927.9,.02,0)):$P(^(0),U,3),1:0)_$E("_DIC_"Y,0),0),$C(59)_$P(^(0),U,2)_"":"",2),$C(59),1)")
"^DD",8927.9,8927.9,0,"ID",.03)
W "   ",@("$P($P($C(59)_$S($D(^DD(8927.9,.03,0)):$P(^(0),U,3),1:0)_$E("_DIC_"Y,0),0),$C(59)_$P(^(0),U,3)_"":"",2),$C(59),1)")
"^DD",8927.9,8927.9,0,"ID",.04)
W "   ",@("$P($P($C(59)_$S($D(^DD(8927.9,.04,0)):$P(^(0),U,3),1:0)_$E("_DIC_"Y,0),0),$C(59)_$P(^(0),U,4)_"":"",2),$C(59),1)")
"^DD",8927.9,8927.9,0,"IX","B",8927.9,.01)

"^DD",8927.9,8927.9,0,"NM","TIU UNAUTHORIZED ABBREVIATION")

"^DD",8927.9,8927.9,0,"VRPK")
TIU
"^DD",8927.9,8927.9,.01,0)
UNAUTHORIZED ABBREVIATION^RFJ30XI^^0;1^K:'$$LABBV^TIUABBV(X) X
"^DD",8927.9,8927.9,.01,1,0)
^.1^^-1
"^DD",8927.9,8927.9,.01,1,1,0)
8927.9^B
"^DD",8927.9,8927.9,.01,1,1,1)
S ^TIU(8927.9,"B",$E(X,1,30),DA)=""
"^DD",8927.9,8927.9,.01,1,1,2)
K ^TIU(8927.9,"B",$E(X,1,30),DA)
"^DD",8927.9,8927.9,.01,3)
UNAUTHORIZED ABBREVIATION must be 1 to 30 characters and cannot contain the following punctuations: |^&~\:,!?
"^DD",8927.9,8927.9,.01,21,0)
^^5^5^3170422^
"^DD",8927.9,8927.9,.01,21,1,0)
Once an UNAUTHORIZED ABBREVIATION field is 
"^DD",8927.9,8927.9,.01,21,2,0)
created, it cannot be modified or deleted.
"^DD",8927.9,8927.9,.01,21,3,0)
The STATUS field is set to ACTIVE initially,
"^DD",8927.9,8927.9,.01,21,4,0)
but only LOCAL class entry can be toggled 
"^DD",8927.9,8927.9,.01,21,5,0)
or inactivated.  
"^DD",8927.9,8927.9,.01,"DEL",.01,0)
I 1 D EN^DDIOL("DELETION IS NOT ALLOWED!","","!?10")
"^DD",8927.9,8927.9,.01,"DEL",1,0)
I ($P($G(^TIU(8927.9,+$G(DA),0)),U,2)="N"&('$G(XUMF)))
"^DD",8927.9,8927.9,.01,"DT")
3170423
"^DD",8927.9,8927.9,.02,0)
CLASS^RSXa^N:NATIONAL;L:LOCAL;^0;2^K:'$$LCLASS^TIUABBV(X) X
"^DD",8927.9,8927.9,.02,3)
Local staff is only allowed to enter "LOCAL" for the CLASS.
"^DD",8927.9,8927.9,.02,21,0)
^^5^5^3170422^
"^DD",8927.9,8927.9,.02,21,1,0)
The value for the CLASS field is either
"^DD",8927.9,8927.9,.02,21,2,0)
"NATIONAL" or "LOCAL". When adding a new
"^DD",8927.9,8927.9,.02,21,3,0)
"Unauthorized Abbreviation" entry,
"^DD",8927.9,8927.9,.02,21,4,0)
the CLASS field is automatically defaulted
"^DD",8927.9,8927.9,.02,21,5,0)
to "LOCAL" and cannot be edited locally.
"^DD",8927.9,8927.9,.02,"AUDIT")
y
"^DD",8927.9,8927.9,.02,"DT")
3170422
"^DD",8927.9,8927.9,.03,0)
ABBREVIATION EXACT MATCH^RSXa^1:YES;0:NO;^0;3^Q
"^DD",8927.9,8927.9,.03,3)
Select 'YES' if case sensitive check for this UNAUTHORIZED ABBREVIATION is required.
"^DD",8927.9,8927.9,.03,21,0)
^^6^6^3170422^
"^DD",8927.9,8927.9,.03,21,1,0)
The value of this field is either YES or NO.
"^DD",8927.9,8927.9,.03,21,2,0)
If the value is "YES", the system will flag
"^DD",8927.9,8927.9,.03,21,3,0)
an abbreviation only if the text is matched
"^DD",8927.9,8927.9,.03,21,4,0)
exactly. If the value is "NO", the system
"^DD",8927.9,8927.9,.03,21,5,0)
will flag an abbreviation with the same
"^DD",8927.9,8927.9,.03,21,6,0)
spelling regardless of case sensitivity.
"^DD",8927.9,8927.9,.03,"AUDIT")
y
"^DD",8927.9,8927.9,.03,"DT")
3170422
"^DD",8927.9,8927.9,.04,0)
STATUS^RSa^A:ACTIVE;I:INACTIVE;^0;4^Q
"^DD",8927.9,8927.9,.04,1,0)
^.1^^0
"^DD",8927.9,8927.9,.04,3)
Select ACTIVE if this abbreviation is prohibited. Otherwise, enter INACTIVE.
"^DD",8927.9,8927.9,.04,21,0)
^^7^7^3170422^
"^DD",8927.9,8927.9,.04,21,1,0)
The STATUS of an unauthorized abbreviation
"^DD",8927.9,8927.9,.04,21,2,0)
is either 'ACTIVE' or 'INACTIVE'. If this
"^DD",8927.9,8927.9,.04,21,3,0)
field is set to ACTIVE, the abbreviation
"^DD",8927.9,8927.9,.04,21,4,0)
is identified as unauthorized and is
"^DD",8927.9,8927.9,.04,21,5,0)
prohibited from being used in the CPRS
"^DD",8927.9,8927.9,.04,21,6,0)
user's note.  If this field is set to INACTIVE,
"^DD",8927.9,8927.9,.04,21,7,0)
the abbreviation is no longer unauthorized.
"^DD",8927.9,8927.9,.04,"AUDIT")
y
"^DD",8927.9,8927.9,.04,"DT")
3170422
"^DD",8927.9,8927.9,.05,0)
NOTE^Fa^^0;5^K:$L(X)>80!($L(X)<1) X
"^DD",8927.9,8927.9,.05,3)
Answer must be 1-80 characters in length.
"^DD",8927.9,8927.9,.05,21,0)
^^3^3^3170422^
"^DD",8927.9,8927.9,.05,21,1,0)
This field is used to provide more information
"^DD",8927.9,8927.9,.05,21,2,0)
about the abbreviation and the reason of
"^DD",8927.9,8927.9,.05,21,3,0)
the entry.
"^DD",8927.9,8927.9,.05,"AUDIT")
y
"^DD",8927.9,8927.9,.05,"DT")
3170422
"^DIC",8927.9,8927.9,0)
TIU UNAUTHORIZED ABBREVIATION^8927.9
"^DIC",8927.9,8927.9,0,"GL")
^TIU(8927.9,
"^DIC",8927.9,8927.9,"%",0)
^1.005^^0
"^DIC",8927.9,8927.9,"%D",0)
^^7^7^3160314^
"^DIC",8927.9,8927.9,"%D",1,0)
This file contains a list of UNAUTHORIZED 
"^DIC",8927.9,8927.9,"%D",2,0)
ABBREVIATIONS. The UNAUTHORIZED ABBREVIATION field (.01)
"^DIC",8927.9,8927.9,"%D",3,0)
cannot be modified once it is created.  If the CLASS
"^DIC",8927.9,8927.9,"%D",4,0)
field (.02) is set to "NATIONAL", the entry cannot be
"^DIC",8927.9,8927.9,"%D",5,0)
altered locally.  If the CLASS field (.02) is set to
"^DIC",8927.9,8927.9,"%D",6,0)
"LOCAL", then the rest of the fields can be added or
"^DIC",8927.9,8927.9,"%D",7,0)
modified locally.
"^DIC",8927.9,"B","TIU UNAUTHORIZED ABBREVIATION",8927.9)

"BLD",9820,6)
^278
**END**
**END**

