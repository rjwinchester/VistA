Released TIU*1*278 SEQ #257
Extracted from mail message
**KIDS**:TIU*1.0*278^

**INSTALL NAME**
TIU*1.0*278
"BLD",9234,0)
TIU*1.0*278^TEXT INTEGRATION UTILITIES^0^3130312^y
"BLD",9234,1,0)
^^5^5^3130306^
"BLD",9234,1,1,0)
This patch will resolve the following issues in the Text Integration
"BLD",9234,1,2,0)
Utilities package:
"BLD",9234,1,3,0)
 
"BLD",9234,1,4,0)
-Redundant progress notes title display
"BLD",9234,1,5,0)
-Spelling error in TIU Template field
"BLD",9234,4,0)
^9.64PA^^0
"BLD",9234,4,8927.1,2,8927.1,1,10,0)
ITEMS
"BLD",9234,4,"APDD",8927.1,8927.1,10)

"BLD",9234,6.3)
5
"BLD",9234,"INID")
^y
"BLD",9234,"INIT")
EN^TIU10278
"BLD",9234,"KRN",0)
^9.67PA^779.2^20
"BLD",9234,"KRN",.4,0)
.4
"BLD",9234,"KRN",.401,0)
.401
"BLD",9234,"KRN",.402,0)
.402
"BLD",9234,"KRN",.403,0)
.403
"BLD",9234,"KRN",.5,0)
.5
"BLD",9234,"KRN",.84,0)
.84
"BLD",9234,"KRN",3.6,0)
3.6
"BLD",9234,"KRN",3.8,0)
3.8
"BLD",9234,"KRN",9.2,0)
9.2
"BLD",9234,"KRN",9.8,0)
9.8
"BLD",9234,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",9234,"KRN",9.8,"NM",1,0)
TIUDD1^^0^B59361058
"BLD",9234,"KRN",9.8,"NM","B","TIUDD1",1)

"BLD",9234,"KRN",19,0)
19
"BLD",9234,"KRN",19.1,0)
19.1
"BLD",9234,"KRN",101,0)
101
"BLD",9234,"KRN",409.61,0)
409.61
"BLD",9234,"KRN",771,0)
771
"BLD",9234,"KRN",779.2,0)
779.2
"BLD",9234,"KRN",870,0)
870
"BLD",9234,"KRN",8989.51,0)
8989.51
"BLD",9234,"KRN",8989.52,0)
8989.52
"BLD",9234,"KRN",8994,0)
8994
"BLD",9234,"KRN","B",.4,.4)

"BLD",9234,"KRN","B",.401,.401)

"BLD",9234,"KRN","B",.402,.402)

"BLD",9234,"KRN","B",.403,.403)

"BLD",9234,"KRN","B",.5,.5)

"BLD",9234,"KRN","B",.84,.84)

"BLD",9234,"KRN","B",3.6,3.6)

"BLD",9234,"KRN","B",3.8,3.8)

"BLD",9234,"KRN","B",9.2,9.2)

"BLD",9234,"KRN","B",9.8,9.8)

"BLD",9234,"KRN","B",19,19)

"BLD",9234,"KRN","B",19.1,19.1)

"BLD",9234,"KRN","B",101,101)

"BLD",9234,"KRN","B",409.61,409.61)

"BLD",9234,"KRN","B",771,771)

"BLD",9234,"KRN","B",779.2,779.2)

"BLD",9234,"KRN","B",870,870)

"BLD",9234,"KRN","B",8989.51,8989.51)

"BLD",9234,"KRN","B",8989.52,8989.52)

"BLD",9234,"KRN","B",8994,8994)

"BLD",9234,"QUES",0)
^9.62^^
"BLD",9234,"REQB",0)
^9.611^1^1
"BLD",9234,"REQB",1,0)
TIU*1.0*224^2
"BLD",9234,"REQB","B","TIU*1.0*224",1)

"FIA",8927.1)
TIU TEMPLATE FIELD
"FIA",8927.1,0)
^TIU(8927.1,
"FIA",8927.1,0,0)
8927.1
"FIA",8927.1,0,1)
^^f
"FIA",8927.1,0,10)

"FIA",8927.1,0,11)

"FIA",8927.1,0,"RLRO")

"FIA",8927.1,0,"VR")
1.0^TIU
"FIA",8927.1,8927.1)
0
"FIA",8927.1,8927.11)
0
"FIA",8927.1,8927.12)
0
"INIT")
EN^TIU10278
"IX",8927.1,8927.1,"B",0)
8927.1^B^UNIQUE NAME XREF^R^^F^IR^I^8927.1^^^^^LS
"IX",8927.1,8927.1,"B",.1,0)
^^1^1^3000907^^
"IX",8927.1,8927.1,"B",.1,1,0)
This cross-reference is used to guarantee a unique name.
"IX",8927.1,8927.1,"B",1)
S ^TIU(8927.1,"B",$E(X,1,60),DA)=""
"IX",8927.1,8927.1,"B",2)
K ^TIU(8927.1,"B",$E(X,1,60),DA)
"IX",8927.1,8927.1,"B",2.5)
K ^TIU(8927.1,"B")
"IX",8927.1,8927.1,"B",11.1,0)
^.114IA^1^1
"IX",8927.1,8927.1,"B",11.1,1,0)
1^F^8927.1^.01^60^1^F
"KEY",8927.1,8927.1,"A",0)
8927.1^A^P^86
"KEY",8927.1,8927.1,"A",2,0)
^.312IA^1^1
"KEY",8927.1,8927.1,"A",2,1,0)
.01^8927.1^1
"KEYPTR",8927.1,8927.1,"A")
8927.1^B
"MBREQ")
0
"PKG",470,-1)
1^1
"PKG",470,0)
TEXT INTEGRATION UTILITIES^TIU^Text Integration Utilities 
"PKG",470,20,0)
^9.402P^^
"PKG",470,22,0)
^9.49I^1^1
"PKG",470,22,1,0)
1.0^3010801^3010806^66481
"PKG",470,22,1,"PAH",1,0)
278^3130312
"PKG",470,22,1,"PAH",1,1,0)
^^5^5^3130312
"PKG",470,22,1,"PAH",1,1,1,0)
This patch will resolve the following issues in the Text Integration
"PKG",470,22,1,"PAH",1,1,2,0)
Utilities package:
"PKG",470,22,1,"PAH",1,1,3,0)
 
"PKG",470,22,1,"PAH",1,1,4,0)
-Redundant progress notes title display
"PKG",470,22,1,"PAH",1,1,5,0)
-Spelling error in TIU Template field
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","TIU10278")
0^^B224996^n/a
"RTN","TIU10278",1,0)
TIU10278 ;BP-OIFO/JME - POST INSTALL FOR PATCH TIU*1.0*278 ; Compiled September 20, 2011 8:50
"RTN","TIU10278",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**278**;Feb 20, 2013;Build 5
"RTN","TIU10278",3,0)
 ;
"RTN","TIU10278",4,0)
EN ;
"RTN","TIU10278",5,0)
 D EN1,EN2 Q
"RTN","TIU10278",6,0)
EN1 
"RTN","TIU10278",7,0)
 N DA,NAME
"RTN","TIU10278",8,0)
 S DA=0 F  S DA=$O(^TIU(8925.1,DA)) Q:'DA  D
"RTN","TIU10278",9,0)
 . S NAME=$P(^TIU(8925.1,DA,0),U,1)
"RTN","TIU10278",10,0)
 . D KACL^TIUDD1(NAME,.01)
"RTN","TIU10278",11,0)
 . D SACL^TIUDD1(NAME,.01)
"RTN","TIU10278",12,0)
 Q
"RTN","TIU10278",13,0)
EN2
"RTN","TIU10278",14,0)
 N DA,TIUARR
"RTN","TIU10278",15,0)
 S DA=$O(^TIU(8927.1,"B","JJS WA BS ACT",0)) Q:DA=""
"RTN","TIU10278",16,0)
 I ^TIU(8927.1,DA,10,4,0)'="4 = Walks Freguently" Q
"RTN","TIU10278",17,0)
 S TIUARR("JJS WA BS ACT",1,0)="1 = Bedfast"
"RTN","TIU10278",18,0)
 S TIUARR("JJS WA BS ACT",2,0)="2 = Chairfast"
"RTN","TIU10278",19,0)
 S TIUARR("JJS WA BS ACT",3,0)="3 = Walks Occasionally"
"RTN","TIU10278",20,0)
 S TIUARR("JJS WA BS ACT",4,0)="4 = Walks Frequently"
"RTN","TIU10278",21,0)
 D WP^DIE(8927.1,DA_",",10,"K","TIUARR(""JJS WA BS ACT"")")
"RTN","TIU10278",22,0)
 Q
"RTN","TIUDD1")
0^1^B59361058^B57939687
"RTN","TIUDD1",1,0)
TIUDD1 ; SLC/JER - XREFs for file 8925.1 ;19-OCT-2001 10:05:37 [7/28/04 9:08am]
"RTN","TIUDD1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**7,51,115,163,224,278**;Jun 20, 1997;Build 5
"RTN","TIUDD1",3,0)
SACL(X,FLD) ; Set logic for ACL cross-reference
"RTN","TIUDD1",4,0)
 ; Called from fields .01 (NAME), .07 (STATUS), .03 (PRINT NAME),
"RTN","TIUDD1",5,0)
 ; .02 (ABBREVIATION), and Subfield .01 of ITEM sub-file
"RTN","TIUDD1",6,0)
 N TIUCLASS,TIUSTTS,TIUTTL
"RTN","TIUDD1",7,0)
 I FLD=10.01 D
"RTN","TIUDD1",8,0)
 . ; Include only TITLES in the index
"RTN","TIUDD1",9,0)
 . I $P($G(^TIU(8925.1,+X,0)),U,4)'="DOC" Q
"RTN","TIUDD1",10,0)
 . S TIUSTTS=$P($G(^TIU(8925.1,+X,0)),U,7)
"RTN","TIUDD1",11,0)
 . ; Include only TEST or ACTIVE titles
"RTN","TIUDD1",12,0)
 . I $S(TIUSTTS=10:0,TIUSTTS=11:0,1:1) Q
"RTN","TIUDD1",13,0)
 . S TIUTTL=$P($G(^TIU(8925.1,+X,0)),U)
"RTN","TIUDD1",14,0)
 . Q:TIUTTL']""
"RTN","TIUDD1",15,0)
 . ; First build x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",16,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+X)
"RTN","TIUDD1",17,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",18,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+X)=""
"RTN","TIUDD1",19,0)
 . S ^TIU(8925.1,"ACL",38,TIUTTL,+X)=""
"RTN","TIUDD1",20,0)
 . D SACLKWIC(TIUTTL,TIUCLASS,+X)
"RTN","TIUDD1",21,0)
 . ; Now build x-ref for document classes
"RTN","TIUDD1",22,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+X)
"RTN","TIUDD1",23,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",24,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+X)=""
"RTN","TIUDD1",25,0)
 . D SACLKWIC(TIUTTL,TIUCLASS,+X)
"RTN","TIUDD1",26,0)
 ; For Abbreviation and Print Name fields, just set the Synonym subscript
"RTN","TIUDD1",27,0)
 I $S(FLD=.02:1,FLD=.03:1,1:0) D  Q
"RTN","TIUDD1",28,0)
 . N TIUDA
"RTN","TIUDD1",29,0)
 . Q:X']""
"RTN","TIUDD1",30,0)
 . S TIUDA=$S(+$G(DA(1)):+$G(DA(1)),1:+$G(DA))
"RTN","TIUDD1",31,0)
 . I $P($G(^TIU(8925.1,+TIUDA,0)),U,4)'="DOC" Q
"RTN","TIUDD1",32,0)
 . S TIUSTTS=$P($G(^TIU(8925.1,+TIUDA,0)),U,7)
"RTN","TIUDD1",33,0)
 . ;VMPELR P 224 allow the update of inactive titles
"RTN","TIUDD1",34,0)
 . ; Include only TEST or ACTIVE or INACTIVE TITLES
"RTN","TIUDD1",35,0)
 . I $S(TIUSTTS=10:0,TIUSTTS=11:0,TIUSTTS=13:0,1:1) Q
"RTN","TIUDD1",36,0)
 . S TIUTTL=$P($G(^TIU(8925.1,+TIUDA,0)),U)
"RTN","TIUDD1",37,0)
 . Q:TIUTTL']""
"RTN","TIUDD1",38,0)
 . S X=$$UP^XLFSTR(X)
"RTN","TIUDD1",39,0)
 . Q:X=TIUTTL
"RTN","TIUDD1",40,0)
 . S TIUTTL=X_"  <"_TIUTTL_">"
"RTN","TIUDD1",41,0)
 . ; First build x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",42,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+TIUDA)
"RTN","TIUDD1",43,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",44,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)=""
"RTN","TIUDD1",45,0)
 . S ^TIU(8925.1,"ACL",38,TIUTTL,+TIUDA)=""
"RTN","TIUDD1",46,0)
 . ; Now build x-ref for document classes
"RTN","TIUDD1",47,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+TIUDA)
"RTN","TIUDD1",48,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",49,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)=""
"RTN","TIUDD1",50,0)
 I FLD=.07 D  Q
"RTN","TIUDD1",51,0)
 . N TIUDA
"RTN","TIUDD1",52,0)
 . S TIUDA=$S(+$G(DA(1)):+$G(DA(1)),1:+$G(DA))
"RTN","TIUDD1",53,0)
 . I $P($G(^TIU(8925.1,+TIUDA,0)),U,4)'="DOC" Q
"RTN","TIUDD1",54,0)
 . S TIUSTTS=$P($G(^TIU(8925.1,+TIUDA,0)),U,7)
"RTN","TIUDD1",55,0)
 . ; Include only TEST or ACTIVE titles
"RTN","TIUDD1",56,0)
 . I $S(TIUSTTS=10:0,TIUSTTS=11:0,1:1) Q
"RTN","TIUDD1",57,0)
 . S TIUTTL=$P($G(^TIU(8925.1,+TIUDA,0)),U)
"RTN","TIUDD1",58,0)
 . Q:TIUTTL']""
"RTN","TIUDD1",59,0)
 . ; First build x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",60,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+TIUDA)
"RTN","TIUDD1",61,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",62,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)=""
"RTN","TIUDD1",63,0)
 . S ^TIU(8925.1,"ACL",38,TIUTTL,+TIUDA)=""
"RTN","TIUDD1",64,0)
 . D SACLKWIC(TIUTTL,TIUCLASS,+TIUDA)
"RTN","TIUDD1",65,0)
 . ; Now build x-ref for document classes
"RTN","TIUDD1",66,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+TIUDA)
"RTN","TIUDD1",67,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",68,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)=""
"RTN","TIUDD1",69,0)
 . D SACLKWIC(TIUTTL,TIUCLASS,+TIUDA)
"RTN","TIUDD1",70,0)
 I FLD=.01 D
"RTN","TIUDD1",71,0)
 . N TIUDA
"RTN","TIUDD1",72,0)
 . S TIUDA=$S(+$G(DA(1)):+$G(DA(1)),1:+$G(DA))
"RTN","TIUDD1",73,0)
 . I $P($G(^TIU(8925.1,+TIUDA,0)),U,4)'="DOC" Q
"RTN","TIUDD1",74,0)
 . S TIUSTTS=$P($G(^TIU(8925.1,+TIUDA,0)),U,7)
"RTN","TIUDD1",75,0)
 . ; Include only TEST or ACTIVE OR inactive titles
"RTN","TIUDD1",76,0)
 . I $S(TIUSTTS=10:0,TIUSTTS=11:0,TIUSTTS=13:0,1:1) Q
"RTN","TIUDD1",77,0)
 . ; First build x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",78,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+TIUDA)
"RTN","TIUDD1",79,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",80,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,X,+TIUDA)=""
"RTN","TIUDD1",81,0)
 . S ^TIU(8925.1,"ACL",38,X,+TIUDA)=""
"RTN","TIUDD1",82,0)
 . S TIUABV=$P($G(^TIU(8925.1,+TIUDA,0)),U,2)
"RTN","TIUDD1",83,0)
 . ;*278 - Do not set print name or abbreviation if same as name
"RTN","TIUDD1",84,0)
 . I TIUABV]"",TIUABV'=X S TIUABV=TIUABV_"  <"_X_">" S ^TIU(8925.1,"ACL",TIUCLASS,TIUABV,+TIUDA)="",^TIU(8925.1,"ACL",38,TIUABV,+TIUDA)=""
"RTN","TIUDD1",85,0)
 . S TIUPN=$P($G(^TIU(8925.1,+TIUDA,0)),U,3)
"RTN","TIUDD1",86,0)
 . I TIUPN]"",TIUPN'=X S TIUPN=TIUPN_"  <"_X_">" S ^TIU(8925.1,"ACL",TIUCLASS,TIUPN,+TIUDA)="",^TIU(8925.1,"ACL",38,TIUPN,+TIUDA)=""
"RTN","TIUDD1",87,0)
 . D SACLKWIC(X,TIUCLASS,+TIUDA)
"RTN","TIUDD1",88,0)
 . ; Now build x-ref for document classes
"RTN","TIUDD1",89,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+TIUDA)
"RTN","TIUDD1",90,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",91,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,X,+TIUDA)=""
"RTN","TIUDD1",92,0)
 . ;VMP/ELR PATCH 224 ADDED NEXT 4 LINES
"RTN","TIUDD1",93,0)
 . S TIUABV=$P($G(^TIU(8925.1,+TIUDA,0)),U,2)
"RTN","TIUDD1",94,0)
 . I TIUABV]"",TIUABV'=X S TIUABV=TIUABV_"  <"_X_">" S ^TIU(8925.1,"ACL",TIUCLASS,TIUABV,+TIUDA)=""
"RTN","TIUDD1",95,0)
 . S TIUPN=$P($G(^TIU(8925.1,+TIUDA,0)),U,3)
"RTN","TIUDD1",96,0)
 . I TIUPN]"",TIUPN'=X S TIUPN=TIUPN_"  <"_X_">" S ^TIU(8925.1,"ACL",TIUCLASS,TIUPN,+TIUDA)=""
"RTN","TIUDD1",97,0)
 . D SACLKWIC(X,TIUCLASS,+TIUDA)
"RTN","TIUDD1",98,0)
 Q
"RTN","TIUDD1",99,0)
SACLKWIC(X,TIUCLASS,TIUDA) ; Set logic for KWIC analog
"RTN","TIUDD1",100,0)
 N TIUI,TIUJ,TIUC S TIUI=1
"RTN","TIUDD1",101,0)
 F TIUJ=1:1:$L(X)+1 D
"RTN","TIUDD1",102,0)
 . S TIUC=$E(X,TIUJ)
"RTN","TIUDD1",103,0)
 . I "(,.?! '-/&:;)"[TIUC S TIUC=$E($E(X,TIUI,TIUJ-1),1,30),TIUI=TIUJ+1
"RTN","TIUDD1",104,0)
 . I  I $L(TIUC)>2,(^DD("KWIC")'[TIUC),(TIUC'=X) S (^TIU(8925.1,"ACL",TIUCLASS,TIUC_"  <"_X_">",TIUDA),^TIU(8925.1,"ACL",38,TIUC_"  <"_X_">",TIUDA))=""
"RTN","TIUDD1",105,0)
 Q
"RTN","TIUDD1",106,0)
KACL(X,FLD) ; KILL Logic for ACL cross-reference
"RTN","TIUDD1",107,0)
 N TIUCLASS,TIUTTL,TIUDA
"RTN","TIUDD1",108,0)
 I FLD=10.01 D
"RTN","TIUDD1",109,0)
 . ; First remove x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",110,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+X)
"RTN","TIUDD1",111,0)
 . S TIUTTL=$P($G(^TIU(8925.1,+X,0)),U)
"RTN","TIUDD1",112,0)
 . Q:TIUTTL']""
"RTN","TIUDD1",113,0)
 . Q:X=TIUTTL
"RTN","TIUDD1",114,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+X)
"RTN","TIUDD1",115,0)
 . K ^TIU(8925.1,"ACL",38,TIUTTL,+X)
"RTN","TIUDD1",116,0)
 . D KACLKWIC(TIUTTL,TIUCLASS,+X)
"RTN","TIUDD1",117,0)
 . ; Now remove x-ref for document classes
"RTN","TIUDD1",118,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+X)
"RTN","TIUDD1",119,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+X)
"RTN","TIUDD1",120,0)
 . D KACLKWIC(TIUTTL,TIUCLASS,+X)
"RTN","TIUDD1",121,0)
 I $S(FLD=.02:1,FLD=.03:1,1:0) D  Q
"RTN","TIUDD1",122,0)
 . N TIUDA
"RTN","TIUDD1",123,0)
 . Q:X']""
"RTN","TIUDD1",124,0)
 . S TIUDA=$S(+$G(DA(1)):+$G(DA(1)),1:+$G(DA))
"RTN","TIUDD1",125,0)
 . I $P($G(^TIU(8925.1,+TIUDA,0)),U,4)'="DOC" Q
"RTN","TIUDD1",126,0)
 . S TIUSTTS=$P($G(^TIU(8925.1,+TIUDA,0)),U,7)
"RTN","TIUDD1",127,0)
 . ; Include only TEST or ACTIVE or INACTIVE titles
"RTN","TIUDD1",128,0)
 . I $S(TIUSTTS=10:0,TIUSTTS=11:0,TIUSTTS=13:0,1:1) Q
"RTN","TIUDD1",129,0)
 . S TIUTTL=$P($G(^TIU(8925.1,+TIUDA,0)),U)
"RTN","TIUDD1",130,0)
 . Q:TIUTTL']""
"RTN","TIUDD1",131,0)
 . S TIUTTL=X_"  <"_TIUTTL_">"
"RTN","TIUDD1",132,0)
 . ; First build x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",133,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+TIUDA)
"RTN","TIUDD1",134,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",135,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)
"RTN","TIUDD1",136,0)
 . K ^TIU(8925.1,"ACL",38,TIUTTL,+TIUDA)
"RTN","TIUDD1",137,0)
 . ; Now build x-ref for document classes
"RTN","TIUDD1",138,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+TIUDA)
"RTN","TIUDD1",139,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",140,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)
"RTN","TIUDD1",141,0)
 I FLD=.07 D
"RTN","TIUDD1",142,0)
 . N TIUDA
"RTN","TIUDD1",143,0)
 . S TIUDA=$S(+$G(DA(1)):+$G(DA(1)),1:+$G(DA))
"RTN","TIUDD1",144,0)
 . ; First remove x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",145,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+TIUDA)
"RTN","TIUDD1",146,0)
 . S TIUTTL=$P($G(^TIU(8925.1,+TIUDA,0)),U)
"RTN","TIUDD1",147,0)
 . Q:TIUTTL']""
"RTN","TIUDD1",148,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)
"RTN","TIUDD1",149,0)
 . K ^TIU(8925.1,"ACL",38,TIUTTL,+TIUDA)
"RTN","TIUDD1",150,0)
 . D KACLKWIC(TIUTTL,TIUCLASS,+TIUDA)
"RTN","TIUDD1",151,0)
 . ; Now remove x-ref for document classes
"RTN","TIUDD1",152,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+TIUDA)
"RTN","TIUDD1",153,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)
"RTN","TIUDD1",154,0)
 . D KACLKWIC(TIUTTL,TIUCLASS,+TIUDA)
"RTN","TIUDD1",155,0)
 I FLD=.01 D
"RTN","TIUDD1",156,0)
 . N TIUDA,TIUABV,TIUPN
"RTN","TIUDD1",157,0)
 . S TIUDA=$S(+$G(DA(1)):+$G(DA(1)),1:+$G(DA))
"RTN","TIUDD1",158,0)
 . ; First remove x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",159,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+TIUDA)
"RTN","TIUDD1",160,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,X,+TIUDA)
"RTN","TIUDD1",161,0)
 . K ^TIU(8925.1,"ACL",38,X,+TIUDA)
"RTN","TIUDD1",162,0)
 . S TIUABV=$P($G(^TIU(8925.1,+TIUDA,0)),U,2)
"RTN","TIUDD1",163,0)
 . I TIUABV]"" S TIUABV=TIUABV_"  <"_X_">" K ^TIU(8925.1,"ACL",TIUCLASS,TIUABV,+TIUDA),^TIU(8925.1,"ACL",38,TIUABV,+TIUDA)
"RTN","TIUDD1",164,0)
 . S TIUPN=$P($G(^TIU(8925.1,+TIUDA,0)),U,3)
"RTN","TIUDD1",165,0)
 . I TIUPN]"" S TIUPN=TIUPN_"  <"_X_">" K ^TIU(8925.1,"ACL",TIUCLASS,TIUPN,+TIUDA),^TIU(8925.1,"ACL",38,TIUPN,+TIUDA)
"RTN","TIUDD1",166,0)
 . D KACLKWIC(X,TIUCLASS,+TIUDA)
"RTN","TIUDD1",167,0)
 . ; Now remove x-ref for document classes
"RTN","TIUDD1",168,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+TIUDA)
"RTN","TIUDD1",169,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,X,+TIUDA)
"RTN","TIUDD1",170,0)
 . ;VMP/ELR PATCH 224 ADDED NEXT 4 LINES
"RTN","TIUDD1",171,0)
 . S TIUABV=$P($G(^TIU(8925.1,+TIUDA,0)),U,2)
"RTN","TIUDD1",172,0)
 . I TIUABV]"" S TIUABV=TIUABV_"  <"_X_">" K ^TIU(8925.1,"ACL",TIUCLASS,TIUABV,+TIUDA)
"RTN","TIUDD1",173,0)
 . S TIUPN=$P($G(^TIU(8925.1,+TIUDA,0)),U,3)
"RTN","TIUDD1",174,0)
 . I TIUPN]"" S TIUPN=TIUPN_"  <"_X_">" K ^TIU(8925.1,"ACL",TIUCLASS,TIUPN,+TIUDA)
"RTN","TIUDD1",175,0)
 . D KACLKWIC(X,TIUCLASS,+TIUDA)
"RTN","TIUDD1",176,0)
 Q
"RTN","TIUDD1",177,0)
KACLKWIC(X,TIUCLASS,TIUDA) ; KILL Logic for KWIC analog
"RTN","TIUDD1",178,0)
 N TIUI,TIUJ,TIUC S TIUI=1
"RTN","TIUDD1",179,0)
 F TIUJ=1:1:$L(X)+1 D
"RTN","TIUDD1",180,0)
 . S TIUC=$E(X,TIUJ)
"RTN","TIUDD1",181,0)
 . I "(,.?! '-/&:;)"[TIUC S TIUC=$E($E(X,TIUI,TIUJ-1),1,30),TIUI=TIUJ+1
"RTN","TIUDD1",182,0)
 . I  I $L(TIUC)>2 K ^TIU(8925.1,"ACL",TIUCLASS,TIUC_"  <"_X_">",TIUDA),^TIU(8925.1,"ACL",38,TIUC_"  <"_X_">",TIUDA)
"RTN","TIUDD1",183,0)
 Q 
"VER")
8.0^22.0
"^DD",8927.1,8927.1,0)
FIELD^^10^19
"^DD",8927.1,8927.1,0,"DDA")
N
"^DD",8927.1,8927.1,0,"DT")
3010320
"^DD",8927.1,8927.1,0,"NM","TIU TEMPLATE FIELD")
 
"^DD",8927.1,8927.1,0,"VRPK")
TIU
"^DD",8927.1,8927.1,.01,0)
NAME^RFX^^0;1^S X=$$UP^XLFSTR(X) K:$L(X)>60!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",8927.1,8927.1,.01,1,0)
^.1^^0
"^DD",8927.1,8927.1,.01,3)
Answer must be 3-60 characters in length.  Name must be unique.
"^DD",8927.1,8927.1,.01,21,0)
^.001^1^1^3010202^^^^
"^DD",8927.1,8927.1,.01,21,1,0)
Unique Dialog Field Name.
"^DD",8927.1,8927.1,.01,"DT")
3010202
"^DD",8927.1,8927.1,.02,0)
TYPE^RS^E:Edit Box;C:Combo Box;B:Button;X:Check Boxes;R:Radio Buttons;D:Date;N:Numeric;H:Hyperlink;W:Word Processing;T:Text;^0;2^Q
"^DD",8927.1,8927.1,.02,3)
Enter the type of template field
"^DD",8927.1,8927.1,.02,21,0)
^^1^1^3000801^^^
"^DD",8927.1,8927.1,.02,21,1,0)
Type of template field.
"^DD",8927.1,8927.1,.02,"DT")
3010216
"^DD",8927.1,8927.1,.03,0)
INACTIVE^S^0:NO;1:YES;^0;3^Q
"^DD",8927.1,8927.1,.03,3)
Template Field Inactive?
"^DD",8927.1,8927.1,.03,21,0)
^^1^1^3000801^^
"^DD",8927.1,8927.1,.03,21,1,0)
Disable template field
"^DD",8927.1,8927.1,.03,"DT")
3000801
"^DD",8927.1,8927.1,.04,0)
LENGTH^NJ2,0^^0;4^K:+X'=X!(X>74)!(X<0)!(X?.E1"."1.N) X
"^DD",8927.1,8927.1,.04,3)
Type a number between 0 and 74, 0 Decimal Digits
"^DD",8927.1,8927.1,.04,21,0)
^.001^1^1^3010212^^^
"^DD",8927.1,8927.1,.04,21,1,0)
This is the display length of edit and combo boxes.
"^DD",8927.1,8927.1,.04,"DT")
3010320
"^DD",8927.1,8927.1,.05,0)
DEFAULT TEXT^F^^0;5^K:$L(X)>70!($L(X)<1) X
"^DD",8927.1,8927.1,.05,3)
Answer must be 1-70 characters in length.
"^DD",8927.1,8927.1,.05,21,0)
^.001^1^1^3010212^^^
"^DD",8927.1,8927.1,.05,21,1,0)
Default text.
"^DD",8927.1,8927.1,.05,"DT")
3000727
"^DD",8927.1,8927.1,.06,0)
LIST MANAGER TEXT^F^^0;6^K:$L(X)>70!($L(X)<1) X
"^DD",8927.1,8927.1,.06,3)
List Manager Only Text
"^DD",8927.1,8927.1,.06,21,0)
^^2^2^3000801^
"^DD",8927.1,8927.1,.06,21,1,0)
This is the text to insert into a boilerplate when expanded from
"^DD",8927.1,8927.1,.06,21,2,0)
a list manager interface.
"^DD",8927.1,8927.1,.06,"DT")
3000801
"^DD",8927.1,8927.1,.07,0)
DEFAULT INDEX^NJ4,0^^0;7^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1.N) X
"^DD",8927.1,8927.1,.07,3)
Type a number between 0 and 9999, 0 Decimal Digits
"^DD",8927.1,8927.1,.07,21,0)
^.001^1^1^3010213^^^
"^DD",8927.1,8927.1,.07,21,1,0)
Line # of default item in the ITEMS field.
"^DD",8927.1,8927.1,.07,"DT")
3010320
"^DD",8927.1,8927.1,.08,0)
REQUIRED^S^0:NO;1:YES;^0;8^Q
"^DD",8927.1,8927.1,.08,3)
Is Template Field Required
"^DD",8927.1,8927.1,.08,21,0)
^^1^1^3001109^
"^DD",8927.1,8927.1,.08,21,1,0)
Indicates that entry into the template field is required.
"^DD",8927.1,8927.1,.08,"DT")
3001109
"^DD",8927.1,8927.1,.09,0)
SEPARATE LINES^S^0:NO;1:YES;^0;9^Q
"^DD",8927.1,8927.1,.09,3)
Enter 1 (Yes) if Check Box or Radio Button fields should display on separate lines.
"^DD",8927.1,8927.1,.09,21,0)
^^2^2^3010118^
"^DD",8927.1,8927.1,.09,21,1,0)
This field determines if Check Box or Radio Group fields should be
"^DD",8927.1,8927.1,.09,21,2,0)
displayed on separate lines, or if they should wrap.
"^DD",8927.1,8927.1,.09,"DT")
3010118
"^DD",8927.1,8927.1,.1,0)
MAX LENGTH^NJ3,0^^0;10^K:+X'=X!(X>240)!(X<0)!(X?.E1"."1.N) X
"^DD",8927.1,8927.1,.1,3)
Type a number between 0 and 240, 0 Decimal Digits
"^DD",8927.1,8927.1,.1,21,0)
^^3^3^3010212^
"^DD",8927.1,8927.1,.1,21,1,0)
This is the maximum number of characters that can be typed
"^DD",8927.1,8927.1,.1,21,2,0)
in an edit box or combo box.  This can be longer than the
"^DD",8927.1,8927.1,.1,21,3,0)
Length field, which is the display width of the control.
"^DD",8927.1,8927.1,.1,"DT")
3010212
"^DD",8927.1,8927.1,.11,0)
INDENT^NJ2,0^^0;11^K:+X'=X!(X>30)!(X<0)!(X?.E1"."1.N) X
"^DD",8927.1,8927.1,.11,3)
Type a number between 0 and 30, 0 Decimal Digits
"^DD",8927.1,8927.1,.11,21,0)
^^2^2^3010213^
"^DD",8927.1,8927.1,.11,21,1,0)
The number of characters to indent the control in the dialog.  Has no
"^DD",8927.1,8927.1,.11,21,2,0)
affect on the spacing of text generated from the control.
"^DD",8927.1,8927.1,.11,"DT")
3010202
"^DD",8927.1,8927.1,.12,0)
PAD^NJ2,0^^0;12^K:+X'=X!(X>30)!(X<0)!(X?.E1"."1.N) X
"^DD",8927.1,8927.1,.12,3)
Type a number between 0 and 30, 0 Decimal Digits
"^DD",8927.1,8927.1,.12,21,0)
^^3^3^3010213^
"^DD",8927.1,8927.1,.12,21,1,0)
The number of characters to indent the text generated
"^DD",8927.1,8927.1,.12,21,2,0)
from the control.  Has no affect on the position of
"^DD",8927.1,8927.1,.12,21,3,0)
the control in the dialog.
"^DD",8927.1,8927.1,.12,"DT")
3010202
"^DD",8927.1,8927.1,.13,0)
MIN VALUE^NJ4,0^^0;13^K:+X'=X!(X>9999)!(X<-9999)!(X?.E1"."1.N) X
"^DD",8927.1,8927.1,.13,3)
Type a number between -9999 and 9999, 0 Decimal Digits
"^DD",8927.1,8927.1,.13,21,0)
^^1^1^3010213^
"^DD",8927.1,8927.1,.13,21,1,0)
Min allowed value on numeric fields.
"^DD",8927.1,8927.1,.13,"DT")
3010202
"^DD",8927.1,8927.1,.14,0)
MAX VALUE^NJ4,0^^0;14^K:+X'=X!(X>9999)!(X<-9999)!(X?.E1"."1.N) X
"^DD",8927.1,8927.1,.14,3)
Type a number between -9999 and 9999, 0 Decimal Digits
"^DD",8927.1,8927.1,.14,21,0)
^^1^1^3010213^
"^DD",8927.1,8927.1,.14,21,1,0)
Max allowed value on numeric fields.
"^DD",8927.1,8927.1,.14,"DT")
3010202
"^DD",8927.1,8927.1,.15,0)
INCREMENT^NJ3,0^^0;15^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1.N) X
"^DD",8927.1,8927.1,.15,3)
Type a number between 0 and 999, 0 Decimal Digits
"^DD",8927.1,8927.1,.15,21,0)
^^2^2^3010213^
"^DD",8927.1,8927.1,.15,21,1,0)
Amount to increment numeric fields with the up
"^DD",8927.1,8927.1,.15,21,2,0)
and down arrow buttons are used.
"^DD",8927.1,8927.1,.15,"DT")
3010320
"^DD",8927.1,8927.1,.16,0)
DATE TYPE^S^D:DATE;T:DATE & TIME;R:DATE & REQUIRED TIME;C:COMBO STYLE;Y:COMBO YEAR ONLY;M:COMBO YEAR & MONTH;^0;16^Q
"^DD",8927.1,8927.1,.16,3)
Enter Date Type
"^DD",8927.1,8927.1,.16,21,0)
^.001^1^1^3010213^^
"^DD",8927.1,8927.1,.16,21,1,0)
Indicates the type of control to use to represent a date value.
"^DD",8927.1,8927.1,.16,"DT")
3010207
"^DD",8927.1,8927.1,2,0)
DESCRIPTION^8927.12^^2;0
"^DD",8927.1,8927.1,2,21,0)
^^2^2^3010213^
"^DD",8927.1,8927.1,2,21,1,0)
A word processing field containing a description of the field, or other 
"^DD",8927.1,8927.1,2,21,2,0)
notes and history information.
"^DD",8927.1,8927.1,3,0)
URL^F^^3;1^K:$L(X)>240!($L(X)<1) X
"^DD",8927.1,8927.1,3,3)
Answer must be 1-240 characters in length
"^DD",8927.1,8927.1,3,21,0)
^^1^1^3010213^
"^DD",8927.1,8927.1,3,21,1,0)
Web address of hyperlink fields.
"^DD",8927.1,8927.1,3,"DT")
3010202
"^DD",8927.1,8927.1,10,0)
ITEMS^8927.11^^10;0
"^DD",8927.1,8927.1,10,21,0)
^^2^2^3010213^
"^DD",8927.1,8927.1,10,21,1,0)
Word processing field representing either the list of items that can
"^DD",8927.1,8927.1,10,21,2,0)
be selected, or the default word processing text.
"^DD",8927.1,8927.11,0)
ITEMS SUB-FIELD^^.01^1
"^DD",8927.1,8927.11,0,"DT")
3000725
"^DD",8927.1,8927.11,0,"NM","ITEMS")
 
"^DD",8927.1,8927.11,0,"UP")
8927.1
"^DD",8927.1,8927.11,.01,0)
ITEMS^WL^^0;1^Q
"^DD",8927.1,8927.11,.01,3)
Text Items
"^DD",8927.1,8927.11,.01,21,0)
^^1^1^3000725^
"^DD",8927.1,8927.11,.01,21,1,0)
Text Items
"^DD",8927.1,8927.11,.01,"DT")
3000725
"^DD",8927.1,8927.12,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",8927.1,8927.12,0,"DT")
3000801
"^DD",8927.1,8927.12,0,"NM","DESCRIPTION")
 
"^DD",8927.1,8927.12,0,"UP")
8927.1
"^DD",8927.1,8927.12,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",8927.1,8927.12,.01,3)
Template Field Description
"^DD",8927.1,8927.12,.01,"DT")
3000801
"^DIC",8927.1,8927.1,0)
TIU TEMPLATE FIELD^8927.1
"^DIC",8927.1,8927.1,0,"GL")
^TIU(8927.1,
"^DIC",8927.1,8927.1,"%",0)
^1.005^^0
"^DIC",8927.1,"B","TIU TEMPLATE FIELD",8927.1)

"BLD",9234,6)
^257
**END**
**END**

