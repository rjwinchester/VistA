Released IB*2*620 SEQ #563
Extracted from mail message
**KIDS**:IB*2.0*620^

**INSTALL NAME**
IB*2.0*620
"BLD",11006,0)
IB*2.0*620^INTEGRATED BILLING^0^3180308^y
"BLD",11006,1,0)
^^1^1^3180308^
"BLD",11006,1,1,0)
The patch will re-instate the 2017 BILLING THRESHOLD (#354.3) values.
"BLD",11006,4,0)
^9.64PA^^
"BLD",11006,6.3)
1
"BLD",11006,"INID")
^n
"BLD",11006,"INIT")
THRESH^IB20P620
"BLD",11006,"KRN",0)
^9.67PA^779.2^20
"BLD",11006,"KRN",.4,0)
.4
"BLD",11006,"KRN",.401,0)
.401
"BLD",11006,"KRN",.402,0)
.402
"BLD",11006,"KRN",.403,0)
.403
"BLD",11006,"KRN",.5,0)
.5
"BLD",11006,"KRN",.84,0)
.84
"BLD",11006,"KRN",3.6,0)
3.6
"BLD",11006,"KRN",3.8,0)
3.8
"BLD",11006,"KRN",9.2,0)
9.2
"BLD",11006,"KRN",9.8,0)
9.8
"BLD",11006,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",11006,"KRN",9.8,"NM",1,0)
IB20P620^^0^B12733125
"BLD",11006,"KRN",9.8,"NM","B","IB20P620",1)

"BLD",11006,"KRN",19,0)
19
"BLD",11006,"KRN",19.1,0)
19.1
"BLD",11006,"KRN",101,0)
101
"BLD",11006,"KRN",409.61,0)
409.61
"BLD",11006,"KRN",771,0)
771
"BLD",11006,"KRN",779.2,0)
779.2
"BLD",11006,"KRN",870,0)
870
"BLD",11006,"KRN",8989.51,0)
8989.51
"BLD",11006,"KRN",8989.52,0)
8989.52
"BLD",11006,"KRN",8994,0)
8994
"BLD",11006,"KRN","B",.4,.4)

"BLD",11006,"KRN","B",.401,.401)

"BLD",11006,"KRN","B",.402,.402)

"BLD",11006,"KRN","B",.403,.403)

"BLD",11006,"KRN","B",.5,.5)

"BLD",11006,"KRN","B",.84,.84)

"BLD",11006,"KRN","B",3.6,3.6)

"BLD",11006,"KRN","B",3.8,3.8)

"BLD",11006,"KRN","B",9.2,9.2)

"BLD",11006,"KRN","B",9.8,9.8)

"BLD",11006,"KRN","B",19,19)

"BLD",11006,"KRN","B",19.1,19.1)

"BLD",11006,"KRN","B",101,101)

"BLD",11006,"KRN","B",409.61,409.61)

"BLD",11006,"KRN","B",771,771)

"BLD",11006,"KRN","B",779.2,779.2)

"BLD",11006,"KRN","B",870,870)

"BLD",11006,"KRN","B",8989.51,8989.51)

"BLD",11006,"KRN","B",8989.52,8989.52)

"BLD",11006,"KRN","B",8994,8994)

"BLD",11006,"QUES",0)
^9.62^^
"BLD",11006,"REQB",0)
^9.611^1^1
"BLD",11006,"REQB",1,0)
IB*2.0*611^2
"BLD",11006,"REQB","B","IB*2.0*611",1)

"INIT")
THRESH^IB20P620
"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^1^1
"PKG",200,20,1,0)
2^^IBAXDR
"PKG",200,20,1,1)

"PKG",200,20,"B",2,1)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321^2990406^2447
"PKG",200,22,1,"PAH",1,0)
620^3180308
"PKG",200,22,1,"PAH",1,1,0)
^^1^1^3180308
"PKG",200,22,1,"PAH",1,1,1,0)
The patch will re-instate the 2017 BILLING THRESHOLD (#354.3) values.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","IB20P620")
0^1^B12733125^n/a
"RTN","IB20P620",1,0)
IB20P620 ;MNT/BJR - POST-INIT FOR IB*2.0*620 ;Mar 8,2018@8:29am
"RTN","IB20P620",2,0)
 ;;2.0;INTEGRATED BILLING;**620**;21-MAR-94;Build 1
"RTN","IB20P620",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","IB20P620",4,0)
 ;
"RTN","IB20P620",5,0)
 Q
"RTN","IB20P620",6,0)
THRESH ; Pension Threshold
"RTN","IB20P620",7,0)
 N IBA,IBERRM,IBRN,IBTYPE,IBX,DA,DIK,IBADLDEP
"RTN","IB20P620",8,0)
 S IBTYPE="Pension Threshold"
"RTN","IB20P620",9,0)
 D BMES^XPDUTL("Filing CY 2017 Pension Threshold rates.")
"RTN","IB20P620",10,0)
 I $D(^IBE(354.3,"B",3161201)) D  ; remove 12/01/2016 if exists befre filing
"RTN","IB20P620",11,0)
 . S IBRN=0
"RTN","IB20P620",12,0)
 . F  S IBRN=$O(^IBE(354.3,"B",3161201,IBRN)) Q:'IBRN  D
"RTN","IB20P620",13,0)
 .. S DIK="^IBE(354.3,",DA=IBRN D ^DIK
"RTN","IB20P620",14,0)
 S IBA(354.3,"+1,",.01)=3161201 ; effective date for CY 2017 values
"RTN","IB20P620",15,0)
 S IBA(354.3,"+1,",.02)=1 ;     internal value 1 = BASIC PENSION
"RTN","IB20P620",16,0)
 S IBA(354.3,"+1,",.03)=12907 ;  base rate for veteran
"RTN","IB20P620",17,0)
 S IBA(354.3,"+1,",.04)=16902 ; 1 dependent
"RTN","IB20P620",18,0)
 S IBADLDEP=2205 ;  additional dependent amount
"RTN","IB20P620",19,0)
 F IBX=.05:.01:.11 S IBA(354.3,"+1,",IBX)=IBA(354.3,"+1,",IBX-.01)+IBADLDEP ;2 thru 8 dependents
"RTN","IB20P620",20,0)
 S IBA(354.3,"+1,",.12)=IBADLDEP  ;  additional dependent amount
"RTN","IB20P620",21,0)
 D UPDATE^DIE("","IBA","","IBERRM") ; file the new record for CY 2017
"RTN","IB20P620",22,0)
 I $D(IBERRM) D
"RTN","IB20P620",23,0)
 . D BMES^XPDUTL("Unable to file the new rates.  The error message is as follows:")
"RTN","IB20P620",24,0)
 . S IBRN=0
"RTN","IB20P620",25,0)
 . F  S IBRN=$O(IBERRM("DIERR",1,"TEXT",IBRN)) Q:IBRN=""  D MES^XPDUTL(IBERRM("DIERR",1,"TEXT",IBRN))
"RTN","IB20P620",26,0)
 . D BMES^XPDUTL("Please check the database and then file the new rates manually.")
"RTN","IB20P620",27,0)
 . D MMSG
"RTN","IB20P620",28,0)
 E  D COMPLETE
"RTN","IB20P620",29,0)
 Q
"RTN","IB20P620",30,0)
 ;
"RTN","IB20P620",31,0)
MMSG ; MailMan message to report update problem to billing groups, patch installer and patch developer
"RTN","IB20P620",32,0)
 N DA,IBC,IBGROUP,IBPARAM,IBTXT,XMDUZ,XMSUB,XMTEXT,XMY
"RTN","IB20P620",33,0)
 S XMSUB="Integrated Billing Annual Rate Update Error"
"RTN","IB20P620",34,0)
 S XMDUZ=DUZ,XMTEXT="IBTXT"
"RTN","IB20P620",35,0)
 S IBPARAM("FROM")="PATCH IB*2.0*620 CY 2017 RATE UPDATE"
"RTN","IB20P620",36,0)
 F IBGROUP="IB EDI SUPERVISOR","IB ERROR","MCCR" D
"RTN","IB20P620",37,0)
 . I $D(^XMB(3.8,"B",IBGROUP)) S IBGROUP="G."_IBGROUP,XMY(IBGROUP)=""
"RTN","IB20P620",38,0)
 S XMY(DUZ)=""
"RTN","IB20P620",39,0)
 ;
"RTN","IB20P620",40,0)
 S IBC=0
"RTN","IB20P620",41,0)
 S IBC=IBC+1,IBTXT(IBC)="This message has been sent by patch IB*2.0*620. If you have received this"
"RTN","IB20P620",42,0)
 S IBC=IBC+1,IBTXT(IBC)="message, it indicates that the patch encountered some difficulty in filing"
"RTN","IB20P620",43,0)
 S IBC=IBC+1,IBTXT(IBC)="the CY 2017 "_IBTYPE_" rates as outlined in the patch description."
"RTN","IB20P620",44,0)
 S IBC=IBC+1,IBTXT(IBC)="Please verify the integrity of files 354.3 - BILLING THRESHOLDS and"
"RTN","IB20P620",45,0)
 S IBC=IBC+1,IBTXT(IBC)="350.2 - IB ACTION CHARGE and then enter the new rates manually."
"RTN","IB20P620",46,0)
 S IBC=IBC+1,IBTXT(IBC)="You can consult the IB*2.0*620 patch description for additional information."
"RTN","IB20P620",47,0)
 S IBC=IBC+1,IBTXT(IBC)="  "
"RTN","IB20P620",48,0)
 S IBC=IBC+1,IBTXT(IBC)="This action only needs to be done by one person.  Please verify with the"
"RTN","IB20P620",49,0)
 S IBC=IBC+1,IBTXT(IBC)="appropriate billing supervisor that the update has been accomplished."
"RTN","IB20P620",50,0)
 D SENDMSG^XMXAPI(XMDUZ,XMSUB,XMTEXT,.XMY,.IBPARAM,"","")
"RTN","IB20P620",51,0)
MMSGQ Q  ; end of Mail Message subroutine
"RTN","IB20P620",52,0)
 ;
"RTN","IB20P620",53,0)
COMPLETE ; display message that step has completed successfully
"RTN","IB20P620",54,0)
 D BMES^XPDUTL("Step complete.")
"RTN","IB20P620",55,0)
 Q
"RTN","IB20P620",56,0)
 ;
"VER")
8.0^22.2
"BLD",11006,6)
^563
**END**
**END**

