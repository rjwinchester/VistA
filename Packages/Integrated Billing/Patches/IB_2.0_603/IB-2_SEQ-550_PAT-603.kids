Released IB*2*603 SEQ #550
Extracted from mail message
**KIDS**:IB*2.0*603^

**INSTALL NAME**
IB*2.0*603
"BLD",10726,0)
IB*2.0*603^INTEGRATED BILLING^0^3170914^y
"BLD",10726,1,0)
^^4^4^3170914^
"BLD",10726,1,1,0)
This patch contains one update:
"BLD",10726,1,2,0)
 
"BLD",10726,1,3,0)
* 68 Cost Based and Inter-Agency billing rates with an effective date of 
"BLD",10726,1,4,0)
  08/29/2017 in the CHARGE ITEM file (#363.2).
"BLD",10726,4,0)
^9.64PA^^
"BLD",10726,6)
^527
"BLD",10726,6.3)
23
"BLD",10726,"INIT")
POST^IB20P603
"BLD",10726,"KRN",0)
^9.67PA^779.2^20
"BLD",10726,"KRN",.4,0)
.4
"BLD",10726,"KRN",.401,0)
.401
"BLD",10726,"KRN",.402,0)
.402
"BLD",10726,"KRN",.403,0)
.403
"BLD",10726,"KRN",.5,0)
.5
"BLD",10726,"KRN",.84,0)
.84
"BLD",10726,"KRN",3.6,0)
3.6
"BLD",10726,"KRN",3.8,0)
3.8
"BLD",10726,"KRN",9.2,0)
9.2
"BLD",10726,"KRN",9.8,0)
9.8
"BLD",10726,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10726,"KRN",9.8,"NM",1,0)
IB20P603^^0^B38241545
"BLD",10726,"KRN",9.8,"NM","B","IB20P603",1)

"BLD",10726,"KRN",19,0)
19
"BLD",10726,"KRN",19.1,0)
19.1
"BLD",10726,"KRN",101,0)
101
"BLD",10726,"KRN",409.61,0)
409.61
"BLD",10726,"KRN",771,0)
771
"BLD",10726,"KRN",779.2,0)
779.2
"BLD",10726,"KRN",870,0)
870
"BLD",10726,"KRN",8989.51,0)
8989.51
"BLD",10726,"KRN",8989.52,0)
8989.52
"BLD",10726,"KRN",8994,0)
8994
"BLD",10726,"KRN","B",.4,.4)

"BLD",10726,"KRN","B",.401,.401)

"BLD",10726,"KRN","B",.402,.402)

"BLD",10726,"KRN","B",.403,.403)

"BLD",10726,"KRN","B",.5,.5)

"BLD",10726,"KRN","B",.84,.84)

"BLD",10726,"KRN","B",3.6,3.6)

"BLD",10726,"KRN","B",3.8,3.8)

"BLD",10726,"KRN","B",9.2,9.2)

"BLD",10726,"KRN","B",9.8,9.8)

"BLD",10726,"KRN","B",19,19)

"BLD",10726,"KRN","B",19.1,19.1)

"BLD",10726,"KRN","B",101,101)

"BLD",10726,"KRN","B",409.61,409.61)

"BLD",10726,"KRN","B",771,771)

"BLD",10726,"KRN","B",779.2,779.2)

"BLD",10726,"KRN","B",870,870)

"BLD",10726,"KRN","B",8989.51,8989.51)

"BLD",10726,"KRN","B",8989.52,8989.52)

"BLD",10726,"KRN","B",8994,8994)

"BLD",10726,"QUES",0)
^9.62^^
"BLD",10726,"REQB",0)
^9.611^^
"INIT")
POST^IB20P603
"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^1^1
"PKG",200,20,1,0)
2^^IBAXDR
"PKG",200,20,1,1)

"PKG",200,20,"B",2,1)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321^2990406^2447
"PKG",200,22,1,"PAH",1,0)
603^3170914
"PKG",200,22,1,"PAH",1,1,0)
^^4^4^3170914
"PKG",200,22,1,"PAH",1,1,1,0)
This patch contains one update:
"PKG",200,22,1,"PAH",1,1,2,0)
 
"PKG",200,22,1,"PAH",1,1,3,0)
* 68 Cost Based and Inter-Agency billing rates with an effective date of 
"PKG",200,22,1,"PAH",1,1,4,0)
  08/29/2017 in the CHARGE ITEM file (#363.2).
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","IB20P603")
0^1^B38241545^n/a
"RTN","IB20P603",1,0)
IB20P603 ;ALB/CXW - IB*2.0*603 COST-BASED & INTER-AGENCY RATE UPDATE;08/29/17
"RTN","IB20P603",2,0)
 ;;2.0;INTEGRATED BILLING;**603**;21-MAR-94;Build 23
"RTN","IB20P603",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","IB20P603",4,0)
 ; 
"RTN","IB20P603",5,0)
 ;
"RTN","IB20P603",6,0)
 ; Add CY2017 Cost Based/Interagency Charges to Charge Master 363.2
"RTN","IB20P603",7,0)
 Q
"RTN","IB20P603",8,0)
POST ;
"RTN","IB20P603",9,0)
 N IBEFFDT,IBA,U S U="^"
"RTN","IB20P603",10,0)
 D MSG("    IB*2.0*603 Post-Install .....")
"RTN","IB20P603",11,0)
 S IBEFFDT=3170829 ; effective date of 08/29/2017
"RTN","IB20P603",12,0)
 D ADDCI(IBEFFDT)  ; add Charge Items (363.2) with new rates
"RTN","IB20P603",13,0)
 D MSG("    IB*2.0*603 Post-Install Complete")
"RTN","IB20P603",14,0)
 Q
"RTN","IB20P603",15,0)
 ;
"RTN","IB20P603",16,0)
ADDCI(IBEFFDT) ; Add Charge Items (363.2) needs Charge Sets, pass in the effective date of the new charges
"RTN","IB20P603",17,0)
 N IBC,IBCHG,IBCNT,IBCNT1,IBCI,IBCS,IBDFLTDT,IBDT,IBFN,IBI,IBLN,IBPE,IBRVCD,IBX,IBXRF,IBZ,DA,DD,DO,DLAYGO,DIC,DIE,DR,X,Y
"RTN","IB20P603",18,0)
 ; 
"RTN","IB20P603",19,0)
 D MSG("")
"RTN","IB20P603",20,0)
 S (IBCNT,IBCNT1)=0,IBDFLTDT=+$G(IBEFFDT)
"RTN","IB20P603",21,0)
 I 'IBDFLTDT D MSG("** Error: No Effective Date, No Charges Added") G CIQ
"RTN","IB20P603",22,0)
 ;
"RTN","IB20P603",23,0)
 F IBI=1:1 S IBLN=$P($T(CIF+IBI),";;",2) Q:+IBLN!(IBLN="")  I $E(IBLN)?1A D SETCI
"RTN","IB20P603",24,0)
 ;
"RTN","IB20P603",25,0)
 I +IBCNT1 D MSG("       "_IBCNT1_" Duplicate Charge Items already exist, not re-added")
"RTN","IB20P603",26,0)
 ;
"RTN","IB20P603",27,0)
CIQ D MSG("    >> "_IBCNT_" Cost Based/Interagency Charge Items added (#363.2).")
"RTN","IB20P603",28,0)
 D MSG("")
"RTN","IB20P603",29,0)
 Q
"RTN","IB20P603",30,0)
 ;
"RTN","IB20P603",31,0)
SETCI ; set Charge Item (duplicates based on item, CS, eff dt, rev cd)
"RTN","IB20P603",32,0)
 ;
"RTN","IB20P603",33,0)
 S IBCS=$P(IBLN,U,2),IBCS=+$O(^IBE(363.1,"B",IBCS,0)) I 'IBCS D MSG("** Error: Charge Set "_$P(IBLN,U,2)_" undefined") Q
"RTN","IB20P603",34,0)
 S IBCI=+$$MCCRUTL($P(IBLN,U,1),5) I 'IBCI D MSG("** Error: Bed Section "_$P(IBLN,U,1)_" undefined") Q
"RTN","IB20P603",35,0)
 S IBDT=IBDFLTDT I +$P(IBLN,U,3) S IBDT=+$P(IBLN,U,3)
"RTN","IB20P603",36,0)
 S IBRVCD=$$RVCD($P(IBLN,U,4))
"RTN","IB20P603",37,0)
 S IBCHG=+$P(IBLN,U,5)
"RTN","IB20P603",38,0)
 S IBXRF="AIVDTS"_IBCS
"RTN","IB20P603",39,0)
 ;
"RTN","IB20P603",40,0)
 S IBX=0 F  S IBX=$O(^IBA(363.2,IBXRF,IBCI,-IBDT,IBX)) Q:'IBX  S IBZ=$G(^IBA(363.2,IBX,0)) I $P(IBZ,U,6)=IBRVCD D
"RTN","IB20P603",41,0)
 . S IBCI=0,IBCNT1=IBCNT1+1 I +$P(IBZ,U,5)'=IBCHG D MSG("** Error: Item exists, wrong charge: "_IBLN)
"RTN","IB20P603",42,0)
 Q:'IBCI
"RTN","IB20P603",43,0)
 ;
"RTN","IB20P603",44,0)
 K DD,DO S DLAYGO=363.2,DIC="^IBA(363.2,",DIC(0)="L",X=IBCI_";DGCR(399.1," D FILE^DICN K DIC
"RTN","IB20P603",45,0)
 I Y<1 D MSG("** Error: when adding the charge item "_$P(IBLN,U,2)_" with rate "_IBCHG_" to the file, Log a ticket!") K X,Y Q
"RTN","IB20P603",46,0)
 S IBFN=+Y,IBCNT=IBCNT+1
"RTN","IB20P603",47,0)
 ;
"RTN","IB20P603",48,0)
 S DR=".02///"_IBCS_";.03///"_IBDT_";.05///"_IBCHG I +IBRVCD S DR=DR_";.06///"_IBRVCD
"RTN","IB20P603",49,0)
 S DIE="^IBA(363.2,",DA=+IBFN D ^DIE K DIE,DA,DR,X,Y
"RTN","IB20P603",50,0)
 Q
"RTN","IB20P603",51,0)
 ;
"RTN","IB20P603",52,0)
 ;
"RTN","IB20P603",53,0)
MCCRUTL(IBC,IBPE) ; returns IEN in 399.1 if Name is found and piece P is true
"RTN","IB20P603",54,0)
 N IBX,IBY S IBY=""
"RTN","IB20P603",55,0)
 I $G(IBC)'="" S IBX=0 F  S IBX=$O(^DGCR(399.1,"B",IBC,IBX)) Q:'IBX  I $P($G(^DGCR(399.1,IBX,0)),U,+$G(IBPE)) S IBY=IBX
"RTN","IB20P603",56,0)
 Q IBY
"RTN","IB20P603",57,0)
 ;
"RTN","IB20P603",58,0)
RVCD(RVCD) ; returns IFN if revenue code is valid and active
"RTN","IB20P603",59,0)
 N IBX,IBY S IBY=""
"RTN","IB20P603",60,0)
 I +$G(RVCD) S IBX=$G(^DGCR(399.2,+RVCD,0)) I +$P(IBX,U,3) S IBY=+RVCD
"RTN","IB20P603",61,0)
 Q IBY
"RTN","IB20P603",62,0)
 ;
"RTN","IB20P603",63,0)
MSG(IBA) ;
"RTN","IB20P603",64,0)
 D MES^XPDUTL(IBA)
"RTN","IB20P603",65,0)
 Q
"RTN","IB20P603",66,0)
 ;
"RTN","IB20P603",67,0)
CIF ; 68 Charge Items (363.2): Bedsection ^ Charge Set ^Effective Date ^ Revenue Code ^ Charge
"RTN","IB20P603",68,0)
 ;;     
"RTN","IB20P603",69,0)
TORT ;; Cost Based (Tortiously Liable) - All Inclusive
"RTN","IB20P603",70,0)
 ;;        
"RTN","IB20P603",71,0)
 ;;ALCOHOL AND DRUG TREATMENT^TL-INPT (INCLUSIVE)^^^1814
"RTN","IB20P603",72,0)
 ;;BLIND REHABILITATION^TL-INPT (INCLUSIVE)^^^1726
"RTN","IB20P603",73,0)
 ;;GENERAL MEDICAL CARE^TL-INPT (INCLUSIVE)^^^3805
"RTN","IB20P603",74,0)
 ;;INTERMEDIATE CARE^TL-INPT (INCLUSIVE)^^^2123
"RTN","IB20P603",75,0)
 ;;NEUROLOGY^TL-INPT (INCLUSIVE)^^^3806
"RTN","IB20P603",76,0)
 ;;NURSING HOME CARE^TL-INPT (INCLUSIVE)^^^1209
"RTN","IB20P603",77,0)
 ;;POLYTRAUMA INPATIENT^TL-INPT (INCLUSIVE)^^^3070
"RTN","IB20P603",78,0)
 ;;PRRTP^TL-INPT (INCLUSIVE)^^^705
"RTN","IB20P603",79,0)
 ;;PSYCHIATRIC CARE^TL-INPT (INCLUSIVE)^^^1849
"RTN","IB20P603",80,0)
 ;;REHABILITATION MEDICINE^TL-INPT (INCLUSIVE)^^^2489
"RTN","IB20P603",81,0)
 ;;SPINAL CORD INJURY CARE^TL-INPT (INCLUSIVE)^^^2285
"RTN","IB20P603",82,0)
 ;;SURGICAL CARE^TL-INPT (INCLUSIVE)^^^6388
"RTN","IB20P603",83,0)
 ;;             
"RTN","IB20P603",84,0)
 ;; Non-Professional: Nursing/Room/Board 101 & Ancillary 240    
"RTN","IB20P603",85,0)
 ;;ALCOHOL AND DRUG TREATMENT^TL-INPT (NPF)^^101^1221
"RTN","IB20P603",86,0)
 ;;ALCOHOL AND DRUG TREATMENT^TL-INPT (NPF)^^240^420
"RTN","IB20P603",87,0)
 ;;BLIND REHABILITATION^TL-INPT (NPF)^^101^730
"RTN","IB20P603",88,0)
 ;;BLIND REHABILITATION^TL-INPT (NPF)^^240^857
"RTN","IB20P603",89,0)
 ;;GENERAL MEDICAL CARE^TL-INPT (NPF)^^101^2358
"RTN","IB20P603",90,0)
 ;;GENERAL MEDICAL CARE^TL-INPT (NPF)^^240^992
"RTN","IB20P603",91,0)
 ;;INTERMEDIATE CARE^TL-INPT (NPF)^^101^1708
"RTN","IB20P603",92,0)
 ;;INTERMEDIATE CARE^TL-INPT (NPF)^^240^311
"RTN","IB20P603",93,0)
 ;;NEUROLOGY^TL-INPT (NPF)^^101^2244
"RTN","IB20P603",94,0)
 ;;NEUROLOGY^TL-INPT (NPF)^^240^1005
"RTN","IB20P603",95,0)
 ;;NURSING HOME CARE^TL-INPT (NPF)^^101^1007
"RTN","IB20P603",96,0)
 ;;NURSING HOME CARE^TL-INPT (NPF)^^240^164
"RTN","IB20P603",97,0)
 ;;POLYTRAUMA INPATIENT^TL-INPT (NPF)^^101^1783
"RTN","IB20P603",98,0)
 ;;POLYTRAUMA INPATIENT^TL-INPT (NPF)^^240^938
"RTN","IB20P603",99,0)
 ;;PRRTP^TL-INPT (NPF)^^101^587
"RTN","IB20P603",100,0)
 ;;PRRTP^TL-INPT (NPF)^^240^74
"RTN","IB20P603",101,0)
 ;;PSYCHIATRIC CARE^TL-INPT (NPF)^^101^1383
"RTN","IB20P603",102,0)
 ;;PSYCHIATRIC CARE^TL-INPT (NPF)^^240^291
"RTN","IB20P603",103,0)
 ;;REHABILITATION MEDICINE^TL-INPT (NPF)^^101^1446
"RTN","IB20P603",104,0)
 ;;REHABILITATION MEDICINE^TL-INPT (NPF)^^240^760
"RTN","IB20P603",105,0)
 ;;SPINAL CORD INJURY CARE^TL-INPT (NPF)^^101^1427
"RTN","IB20P603",106,0)
 ;;SPINAL CORD INJURY CARE^TL-INPT (NPF)^^240^575
"RTN","IB20P603",107,0)
 ;;SURGICAL CARE^TL-INPT (NPF)^^101^3747
"RTN","IB20P603",108,0)
 ;;SURGICAL CARE^TL-INPT (NPF)^^240^1937
"RTN","IB20P603",109,0)
 ;;              
"RTN","IB20P603",110,0)
 ;; Professional Physician
"RTN","IB20P603",111,0)
 ;;ALCOHOL AND DRUG TREATMENT^TL-INPT (PF)^^^173
"RTN","IB20P603",112,0)
 ;;BLIND REHABILITATION^TL-INPT (PF)^^^139
"RTN","IB20P603",113,0)
 ;;GENERAL MEDICAL CARE^TL-INPT (PF)^^^455
"RTN","IB20P603",114,0)
 ;;INTERMEDIATE CARE^TL-INPT (PF)^^^104
"RTN","IB20P603",115,0)
 ;;NEUROLOGY^TL-INPT (PF)^^^557
"RTN","IB20P603",116,0)
 ;;NURSING HOME CARE^TL-INPT (PF)^^^38
"RTN","IB20P603",117,0)
 ;;POLYTRAUMA INPATIENT^TL-INPT (PF)^^^349
"RTN","IB20P603",118,0)
 ;;PRRTP^TL-INPT (PF)^^^44
"RTN","IB20P603",119,0)
 ;;PSYCHIATRIC CARE^TL-INPT (PF)^^^175
"RTN","IB20P603",120,0)
 ;;REHABILITATION MEDICINE^TL-INPT (PF)^^^283
"RTN","IB20P603",121,0)
 ;;SPINAL CORD INJURY CARE^TL-INPT (PF)^^^283
"RTN","IB20P603",122,0)
 ;;SURGICAL CARE^TL-INPT (PF)^^^704
"RTN","IB20P603",123,0)
 ;;                    
"RTN","IB20P603",124,0)
 ;; Outpatient Care Other
"RTN","IB20P603",125,0)
 ;;OUTPATIENT DENTAL^TL-OPT DENTAL^^^347
"RTN","IB20P603",126,0)
 ;;OUTPATIENT VISIT^TL-OPT VST^^^347
"RTN","IB20P603",127,0)
 ;;POLYTRAUMA OUTPATIENT VISIT^TL-OPT VST POLYTRAUMA^^^546
"RTN","IB20P603",128,0)
 ;;PM&RS OUTPATIENT VISIT^TL-OPT VST PM&RS^^^212
"RTN","IB20P603",129,0)
 ;;          
"RTN","IB20P603",130,0)
IA ;; Interagency
"RTN","IB20P603",131,0)
 ;;            
"RTN","IB20P603",132,0)
 ;;ALCOHOL AND DRUG TREATMENT^IA-INPT^^^1727
"RTN","IB20P603",133,0)
 ;;BLIND REHABILITATION^IA-INPT^^^1646
"RTN","IB20P603",134,0)
 ;;GENERAL MEDICAL CARE^IA-INPT^^^3645
"RTN","IB20P603",135,0)
 ;;INTERMEDIATE CARE^IA-INPT^^^2025
"RTN","IB20P603",136,0)
 ;;NEUROLOGY^IA-INPT^^^3644
"RTN","IB20P603",137,0)
 ;;NURSING HOME CARE^IA-INPT^^^1154
"RTN","IB20P603",138,0)
 ;;POLYTRAUMA INPATIENT^IA-INPT^^^2927
"RTN","IB20P603",139,0)
 ;;PRRTP^IA-INPT^^^671
"RTN","IB20P603",140,0)
 ;;PSYCHIATRIC CARE^IA-INPT^^^1761
"RTN","IB20P603",141,0)
 ;;REHABILITATION MEDICINE^IA-INPT^^^2372
"RTN","IB20P603",142,0)
 ;;SPINAL CORD INJURY CARE^IA-INPT^^^2182
"RTN","IB20P603",143,0)
 ;;SURGICAL CARE^IA-INPT^^^6119
"RTN","IB20P603",144,0)
 ;;OUTPATIENT DENTAL^IA-OPT DENTAL^^^333
"RTN","IB20P603",145,0)
 ;;OUTPATIENT VISIT^IA-OPT VST^^^333
"RTN","IB20P603",146,0)
 ;;POLYTRAUMA OUTPATIENT VISIT^IA-OPT VST POLYTRAUMA^^^522
"RTN","IB20P603",147,0)
 ;;PM&RS OUTPATIENT VISIT^IA-OPT VST PM&RS^^^201
"RTN","IB20P603",148,0)
 ;;
"RTN","IB20P603",149,0)
 Q
"VER")
8.0^22.2
"BLD",10726,6)
^550
**END**
**END**

