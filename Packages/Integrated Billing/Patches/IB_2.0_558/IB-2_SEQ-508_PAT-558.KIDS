Released IB*2*558 SEQ #508
Extracted from mail message
**KIDS**:IB*2.0*558^

**INSTALL NAME**
IB*2.0*558
"BLD",10076,0)
IB*2.0*558^INTEGRATED BILLING^0^3151127^y
"BLD",10076,1,0)
^^4^4^3151127^
"BLD",10076,1,1,0)
This patch addresses two issues. The first issue contains the TRICARE
"BLD",10076,1,2,0)
pharmacy administrative fee update based on a new dispensing fee of $12.19
"BLD",10076,1,3,0)
with an effective date of January 1st, 2016. The second issue is about
"BLD",10076,1,4,0)
the update of the Place of Service file (#353.1).
"BLD",10076,4,0)
^9.64PA^^
"BLD",10076,6)
^491
"BLD",10076,6.3)
32
"BLD",10076,"ABPKG")
n
"BLD",10076,"INIT")
POST^IB20P558
"BLD",10076,"KRN",0)
^9.67PA^779.2^20
"BLD",10076,"KRN",.4,0)
.4
"BLD",10076,"KRN",.401,0)
.401
"BLD",10076,"KRN",.402,0)
.402
"BLD",10076,"KRN",.403,0)
.403
"BLD",10076,"KRN",.5,0)
.5
"BLD",10076,"KRN",.84,0)
.84
"BLD",10076,"KRN",3.6,0)
3.6
"BLD",10076,"KRN",3.8,0)
3.8
"BLD",10076,"KRN",9.2,0)
9.2
"BLD",10076,"KRN",9.8,0)
9.8
"BLD",10076,"KRN",9.8,"NM",0)
^9.68A^^0
"BLD",10076,"KRN",19,0)
19
"BLD",10076,"KRN",19,"NM",0)
^9.68A^^
"BLD",10076,"KRN",19.1,0)
19.1
"BLD",10076,"KRN",101,0)
101
"BLD",10076,"KRN",409.61,0)
409.61
"BLD",10076,"KRN",771,0)
771
"BLD",10076,"KRN",779.2,0)
779.2
"BLD",10076,"KRN",870,0)
870
"BLD",10076,"KRN",8989.51,0)
8989.51
"BLD",10076,"KRN",8989.52,0)
8989.52
"BLD",10076,"KRN",8994,0)
8994
"BLD",10076,"KRN","B",.4,.4)

"BLD",10076,"KRN","B",.401,.401)

"BLD",10076,"KRN","B",.402,.402)

"BLD",10076,"KRN","B",.403,.403)

"BLD",10076,"KRN","B",.5,.5)

"BLD",10076,"KRN","B",.84,.84)

"BLD",10076,"KRN","B",3.6,3.6)

"BLD",10076,"KRN","B",3.8,3.8)

"BLD",10076,"KRN","B",9.2,9.2)

"BLD",10076,"KRN","B",9.8,9.8)

"BLD",10076,"KRN","B",19,19)

"BLD",10076,"KRN","B",19.1,19.1)

"BLD",10076,"KRN","B",101,101)

"BLD",10076,"KRN","B",409.61,409.61)

"BLD",10076,"KRN","B",771,771)

"BLD",10076,"KRN","B",779.2,779.2)

"BLD",10076,"KRN","B",870,870)

"BLD",10076,"KRN","B",8989.51,8989.51)

"BLD",10076,"KRN","B",8989.52,8989.52)

"BLD",10076,"KRN","B",8994,8994)

"BLD",10076,"QDEF")
^^^^^^^^^^
"BLD",10076,"QUES",0)
^9.62^^
"BLD",10076,"REQB",0)
^9.611^^0
"INIT")
POST^IB20P558
"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^1^1
"PKG",200,20,1,0)
2^^IBAXDR
"PKG",200,20,1,1)

"PKG",200,20,"B",2,1)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321^2990406^2447
"PKG",200,22,1,"PAH",1,0)
558^3151127
"PKG",200,22,1,"PAH",1,1,0)
^^4^4^3151127
"PKG",200,22,1,"PAH",1,1,1,0)
This patch addresses two issues. The first issue contains the TRICARE
"PKG",200,22,1,"PAH",1,1,2,0)
pharmacy administrative fee update based on a new dispensing fee of $12.19
"PKG",200,22,1,"PAH",1,1,3,0)
with an effective date of January 1st, 2016. The second issue is about
"PKG",200,22,1,"PAH",1,1,4,0)
the update of the Place of Service file (#353.1).
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","IB20P558")
0^^B12608050^n/a
"RTN","IB20P558",1,0)
IB20P558 ;ALB/CXW - UPDATE POS & TRICARE RX ADMINISTRATIVE FEE; 11/23/2015
"RTN","IB20P558",2,0)
 ;;2.0;INTEGRATED BILLING;**558**;21-MAR-94;Build 32
"RTN","IB20P558",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","IB20P558",4,0)
 Q
"RTN","IB20P558",5,0)
POST ; 
"RTN","IB20P558",6,0)
 ; Update pos code in place of service file 353.1
"RTN","IB20P558",7,0)
 ; Update tricare pharmacy administrative fee in Rate Schedule file 363
"RTN","IB20P558",8,0)
 N IBA,U S U="^"
"RTN","IB20P558",9,0)
 D MSG("IB*2.0*558 Post-Install starts.....")
"RTN","IB20P558",10,0)
 D TRXAF,POS
"RTN","IB20P558",11,0)
 D MSG("IB*2.0*558 Post-Install is complete.")
"RTN","IB20P558",12,0)
 Q
"RTN","IB20P558",13,0)
 ;
"RTN","IB20P558",14,0)
POS ; Place Of Service
"RTN","IB20P558",15,0)
 N IBCNT,IBI,IBX,IBY,IBZ,DA,DD,DO,DLAYGO,DIC,DIE,DR,X,Y
"RTN","IB20P558",16,0)
 S IBCNT=0
"RTN","IB20P558",17,0)
 D MSG(" >>>Place of Service Code")
"RTN","IB20P558",18,0)
 F IBI=1:1 S IBX=$P($T(POSU+IBI),";;",2) Q:IBX="Q"  D
"RTN","IB20P558",19,0)
 . S IBY=$P(IBX,U,1)
"RTN","IB20P558",20,0)
 . S IBZ=$P(IBX,U,1)_" "_$P(IBX,U,2)
"RTN","IB20P558",21,0)
 . S IBY=$O(^IBE(353.1,"B",IBY,0))
"RTN","IB20P558",22,0)
 . I 'IBY D  Q
"RTN","IB20P558",23,0)
 .. S DLAYGO=353.1,DIC="^IBE(353.1,",DIC(0)="L",X=$P(IBX,U,1) D FILE^DICN
"RTN","IB20P558",24,0)
 .. I Y<1 K X,Y D MSG(" >>>ERROR when adding #"_IBZ_" to the file, Log a Remedy ticket!") Q
"RTN","IB20P558",25,0)
 .. S DA=+Y,DIE=DIC,DR=".02///"_$P(IBX,U,2)_";.03///"_$P(IBX,U,3) D ^DIE
"RTN","IB20P558",26,0)
 .. D MSG("    "_IBZ_" added")
"RTN","IB20P558",27,0)
 .. S IBCNT=IBCNT+1
"RTN","IB20P558",28,0)
 . I $G(^IBE(353.1,IBY,0))=$P(IBX,U,1,3) D MSG("    "_IBZ_" already exists, no change") Q
"RTN","IB20P558",29,0)
 . S DA=IBY,DIE="^IBE(353.1,",DR=".02///"_$P(IBX,U,2)_";.03///"_$P(IBX,U,3) D ^DIE
"RTN","IB20P558",30,0)
 . D MSG("    "_IBZ_" updated")
"RTN","IB20P558",31,0)
 . S IBCNT=IBCNT+1
"RTN","IB20P558",32,0)
 D MSG(" Total "_IBCNT_" code"_$S(IBCNT>1:"s",1:"")_" updated in the Place of Service file (#353.1)")
"RTN","IB20P558",33,0)
 D MSG("")
"RTN","IB20P558",34,0)
 Q
"RTN","IB20P558",35,0)
 ;
"RTN","IB20P558",36,0)
TRXAF ; Rate Schedule
"RTN","IB20P558",37,0)
 N IBCT,IBI,IBT,IBMSG,IBX,IBRS,IBRSIN,IBRATY,IBEFFDT,IBADFE,IBDISP,IBADJUST
"RTN","IB20P558",38,0)
 D MSG(""),MSG(" >>>Rate Schedule")
"RTN","IB20P558",39,0)
 S IBMSG="Rx Administrative Fee "
"RTN","IB20P558",40,0)
 S IBADFE="",IBEFFDT="3160101",IBCT=0
"RTN","IB20P558",41,0)
 F IBX=1:1 S IBT=$P($T(RSF+IBX),";;",2) Q:IBT="Q"  D
"RTN","IB20P558",42,0)
 . S IBRATY=$P(IBT,U)
"RTN","IB20P558",43,0)
 . S IBRSIN=$O(^DGCR(399.3,"B",IBRATY,0))
"RTN","IB20P558",44,0)
 . I 'IBRSIN D MSG("    "_IBRATY_" Rate Type not defined, the "_IBMSG_"not added") Q
"RTN","IB20P558",45,0)
 . ; latest entry
"RTN","IB20P558",46,0)
 . S IBRSIN=$O(^DGCR(399.3,"B",IBRATY,99999),-1)
"RTN","IB20P558",47,0)
 . I $P($G(^DGCR(399.3,+IBRSIN,0)),U,3) D MSG("    "_IBRATY_" Rate Type not active, the "_IBMSG_" not added") Q
"RTN","IB20P558",48,0)
 . I $$RSEXIST(IBEFFDT,IBRSIN) D MSG("    CY2016 "_IBRATY_" "_IBMSG_"already exists, no change") Q
"RTN","IB20P558",49,0)
 . S IBDISP=$P(IBT,U,2)
"RTN","IB20P558",50,0)
 . S IBADJUST=$P(IBT,U,3)
"RTN","IB20P558",51,0)
 . ; procedure of outpatient rx administrative fee update
"RTN","IB20P558",52,0)
 . D ENT^IB3PSOU(IBRATY,IBEFFDT,IBADFE,IBDISP,IBADJUST)
"RTN","IB20P558",53,0)
 . ; double check
"RTN","IB20P558",54,0)
 . I $$RSEXIST(IBEFFDT,IBRSIN) S IBCT=IBCT+1 D MSG("    CY2016 "_IBRATY_" "_IBMSG_"added")
"RTN","IB20P558",55,0)
 D MSG(" Total "_IBCT_$S(IBCT>1:" entries",1:" entry")_" updated in the Rate Schedule file (#363)")
"RTN","IB20P558",56,0)
 D MSG("")
"RTN","IB20P558",57,0)
 Q
"RTN","IB20P558",58,0)
 ;
"RTN","IB20P558",59,0)
RSEXIST(IBEFFDT,IBRSIN) ; return RS IFN if Rate Schedule exists for Effective Date
"RTN","IB20P558",60,0)
 N IBX,IBRSFN,IBRS0 S IBX=0
"RTN","IB20P558",61,0)
 S IBRSFN=0 F  S IBRSFN=$O(^IBE(363,IBRSFN))  Q:'IBRSFN  D  I IBX Q
"RTN","IB20P558",62,0)
 . S IBRS0=$G(^IBE(363,IBRSFN,0))
"RTN","IB20P558",63,0)
 . I $P(IBRS0,U,2)=IBRSIN,$P(IBRS0,U,5)=IBEFFDT S IBX=IBRSFN
"RTN","IB20P558",64,0)
 Q IBX
"RTN","IB20P558",65,0)
 ;
"RTN","IB20P558",66,0)
MSG(IBA) ;
"RTN","IB20P558",67,0)
 D MES^XPDUTL(IBA)
"RTN","IB20P558",68,0)
 Q
"RTN","IB20P558",69,0)
 ;
"RTN","IB20P558",70,0)
POSU ; Place of Service code^name^abbreviation
"RTN","IB20P558",71,0)
 ;;17^WALK-IN RETAIL HEALTH CLINIC^WLK-IN RET HLTH CL
"RTN","IB20P558",72,0)
 ;;19^OFF CAMPUS-OUTPATIENT HOSPITAL^OFF CAMP OP HOSP
"RTN","IB20P558",73,0)
 ;;22^ON CAMPUS-OUTPATIENT HOSPITAL^ON CAMP OP HOSP
"RTN","IB20P558",74,0)
 ;;Q
"RTN","IB20P558",75,0)
 ;
"RTN","IB20P558",76,0)
RSF ; Rate type^dispensing fee^adjustment
"RTN","IB20P558",77,0)
 ;;TRICARE REIMB. INS.^12.19^S X=X+12.19
"RTN","IB20P558",78,0)
 ;;TRICARE^12.19^S X=X+12.19
"RTN","IB20P558",79,0)
 ;;Q
"RTN","IB20P558",80,0)
 ;
"VER")
8.0^22.0
"BLD",10076,6)
^508
**END**
**END**

