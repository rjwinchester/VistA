Released IB*2*590 SEQ #538
Extracted from mail message
**KIDS**:IB*2.0*590^

**INSTALL NAME**
IB*2.0*590
"BLD",9646,0)
IB*2.0*590^INTEGRATED BILLING^0^3170302^y
"BLD",9646,4,0)
^9.64PA^^
"BLD",9646,6.3)
3
"BLD",9646,"INIT")
POSTINT^IB20P590
"BLD",9646,"KRN",0)
^9.67PA^779.2^20
"BLD",9646,"KRN",.4,0)
.4
"BLD",9646,"KRN",.401,0)
.401
"BLD",9646,"KRN",.402,0)
.402
"BLD",9646,"KRN",.403,0)
.403
"BLD",9646,"KRN",.5,0)
.5
"BLD",9646,"KRN",.84,0)
.84
"BLD",9646,"KRN",3.6,0)
3.6
"BLD",9646,"KRN",3.8,0)
3.8
"BLD",9646,"KRN",9.2,0)
9.2
"BLD",9646,"KRN",9.8,0)
9.8
"BLD",9646,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",9646,"KRN",9.8,"NM",1,0)
IB20P590^^0^B8021048
"BLD",9646,"KRN",9.8,"NM","B","IB20P590",1)

"BLD",9646,"KRN",19,0)
19
"BLD",9646,"KRN",19.1,0)
19.1
"BLD",9646,"KRN",101,0)
101
"BLD",9646,"KRN",409.61,0)
409.61
"BLD",9646,"KRN",771,0)
771
"BLD",9646,"KRN",779.2,0)
779.2
"BLD",9646,"KRN",870,0)
870
"BLD",9646,"KRN",8989.51,0)
8989.51
"BLD",9646,"KRN",8989.52,0)
8989.52
"BLD",9646,"KRN",8994,0)
8994
"BLD",9646,"KRN","B",.4,.4)

"BLD",9646,"KRN","B",.401,.401)

"BLD",9646,"KRN","B",.402,.402)

"BLD",9646,"KRN","B",.403,.403)

"BLD",9646,"KRN","B",.5,.5)

"BLD",9646,"KRN","B",.84,.84)

"BLD",9646,"KRN","B",3.6,3.6)

"BLD",9646,"KRN","B",3.8,3.8)

"BLD",9646,"KRN","B",9.2,9.2)

"BLD",9646,"KRN","B",9.8,9.8)

"BLD",9646,"KRN","B",19,19)

"BLD",9646,"KRN","B",19.1,19.1)

"BLD",9646,"KRN","B",101,101)

"BLD",9646,"KRN","B",409.61,409.61)

"BLD",9646,"KRN","B",771,771)

"BLD",9646,"KRN","B",779.2,779.2)

"BLD",9646,"KRN","B",870,870)

"BLD",9646,"KRN","B",8989.51,8989.51)

"BLD",9646,"KRN","B",8989.52,8989.52)

"BLD",9646,"KRN","B",8994,8994)

"BLD",9646,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",9646,"QUES",0)
^9.62^^
"BLD",9646,"REQB",0)
^9.611^1^1
"BLD",9646,"REQB",1,0)
IB*2.0*563^2
"BLD",9646,"REQB","B","IB*2.0*563",1)

"INIT")
POSTINT^IB20P590
"MBREQ")
0
"PKG",192,-1)
1^1
"PKG",192,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",192,20,0)
^9.402P^1^1
"PKG",192,20,1,0)
2^^IBAXDR
"PKG",192,20,1,1)

"PKG",192,20,"B",2,1)

"PKG",192,22,0)
^9.49I^1^1
"PKG",192,22,1,0)
2.0^2940321^2940414
"PKG",192,22,1,"PAH",1,0)
590^3170302
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","IB20P590")
0^1^B8021048^n/a
"RTN","IB20P590",1,0)
IB20P590 ;OAK/ELZ - IB*2*590 INSTALL ROUTINE ;1-MAR-2017
"RTN","IB20P590",2,0)
 ;;2.0;INTEGRATED BILLING;**590**;21-MAR-94;Build 3
"RTN","IB20P590",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","IB20P590",4,0)
 ;
"RTN","IB20P590",5,0)
POSTINT ; - post-install
"RTN","IB20P590",6,0)
 D BMES^XPDUTL("Starting Post-install")
"RTN","IB20P590",7,0)
 D OLDCH
"RTN","IB20P590",8,0)
 D NEWCH
"RTN","IB20P590",9,0)
 D BMES^XPDUTL("Post-install finished")
"RTN","IB20P590",10,0)
 Q
"RTN","IB20P590",11,0)
 ;
"RTN","IB20P590",12,0)
OLDCH ; - populate old action type charges
"RTN","IB20P590",13,0)
 ;
"RTN","IB20P590",14,0)
 D BMES^XPDUTL("Populating default tier into old Fee Prescription IB Action Charges")
"RTN","IB20P590",15,0)
 ;
"RTN","IB20P590",16,0)
 ; this will loop through all old fee pharmacy action types and populate the default tier of 2
"RTN","IB20P590",17,0)
 N IBX,IBC,IBZ,DIE,DA,DR
"RTN","IB20P590",18,0)
 S (IBC,IBX)=0 F  S IBX=$O(^IBE(350.2,IBX)) Q:'IBX  D
"RTN","IB20P590",19,0)
 . S IBZ=$G(^IBE(350.2,IBX,0)) Q:$E(IBZ,1,11)'="FEE SERV RX"
"RTN","IB20P590",20,0)
 . Q:$P(IBZ,"^",2)>3170101
"RTN","IB20P590",21,0)
 . Q:$P(IBZ,"^",7)
"RTN","IB20P590",22,0)
 . S DIE="^IBE(350.2,",DA=IBX,DR=".07///2" D ^DIE
"RTN","IB20P590",23,0)
 . S IBC=IBC+1
"RTN","IB20P590",24,0)
 D BMES^XPDUTL(IBC_" IB Fee Action Charges updated")
"RTN","IB20P590",25,0)
 Q
"RTN","IB20P590",26,0)
 ;
"RTN","IB20P590",27,0)
NEWCH ; - populate new action type charges
"RTN","IB20P590",28,0)
 ;
"RTN","IB20P590",29,0)
 D BMES^XPDUTL("Adding new Fee Prescription IB Action Charges")
"RTN","IB20P590",30,0)
 N IBC,IBI,IBX,DO,IBTIER,IBATYPE,DIC,X,IBCHRG,IBDT,Y
"RTN","IB20P590",31,0)
 S IBC=0
"RTN","IB20P590",32,0)
 F IBI=2:1 S IBX=$P($T(DATA3502+IBI),";;",2) Q:IBX=""  D
"RTN","IB20P590",33,0)
 . S IBDT=$P(IBX,"^",2),IBTIER=$P(IBX,"^",5),IBCHRG=$P(IBX,"^",4)
"RTN","IB20P590",34,0)
 . S IBATYPE=$O(^IBE(350.1,"B",$P(IBX,"^",3),0))
"RTN","IB20P590",35,0)
 . I 'IBATYPE D  Q
"RTN","IB20P590",36,0)
 .. D BMES^XPDUTL("****ERROR: ACTION TYPE (#350.1) "_$P(IBX,"^",3)_" not found!!!")
"RTN","IB20P590",37,0)
 . Q:$D(^IBE(350.2,"AC",IBATYPE,IBTIER,-IBDT))
"RTN","IB20P590",38,0)
 . ;
"RTN","IB20P590",39,0)
 . S X=$P(IBX,"^"),DIC="^IBE(350.2,",DIC(0)=""
"RTN","IB20P590",40,0)
 . S DIC("DR")=".02///^S X=IBDT;.03///^S X=""`""_IBATYPE;.04///^S X=IBCHRG;.07///^S X=IBTIER"
"RTN","IB20P590",41,0)
 . D FILE^DICN
"RTN","IB20P590",42,0)
 . I Y<1 D  Q
"RTN","IB20P590",43,0)
 .. D BMES^XPDUTL("****ERROR: Cannot add charge for Key"_$P(IBX,"^")_" for Tier "_IBTIER_".")
"RTN","IB20P590",44,0)
 . S IBC=IBC+1
"RTN","IB20P590",45,0)
 D BMES^XPDUTL("Added "_IBC_" new Fee Prescription IB Action Charges")
"RTN","IB20P590",46,0)
 Q
"RTN","IB20P590",47,0)
 ;
"RTN","IB20P590",48,0)
DATA3502 ; - data for the new 350.2 entries
"RTN","IB20P590",49,0)
 ; format key^eff date^action type (350.1)^unit charge^tier
"RTN","IB20P590",50,0)
 ;;FEE SERV RX1^3170227^FEE SERV NSC RX COPAY NEW^5^1
"RTN","IB20P590",51,0)
 ;;FEE SERV RX3^3170227^FEE SERV NSC RX COPAY CANCEL^5^1
"RTN","IB20P590",52,0)
 ;;FEE SERV RX4^3170227^FEE SERV NSC RX COPAY UPDATE^5^1
"RTN","IB20P590",53,0)
 ;;FEE SERV RX1^3170227^FEE SERV NSC RX COPAY NEW^8^2
"RTN","IB20P590",54,0)
 ;;FEE SERV RX3^3170227^FEE SERV NSC RX COPAY CANCEL^8^2
"RTN","IB20P590",55,0)
 ;;FEE SERV RX4^3170227^FEE SERV NSC RX COPAY UPDATE^8^2
"RTN","IB20P590",56,0)
 ;;FEE SERV RX1^3170227^FEE SERV NSC RX COPAY NEW^11^3
"RTN","IB20P590",57,0)
 ;;FEE SERV RX3^3170227^FEE SERV NSC RX COPAY CANCEL^11^3
"RTN","IB20P590",58,0)
 ;;FEE SERV RX4^3170227^FEE SERV NSC RX COPAY UPDATE^11^3
"RTN","IB20P590",59,0)
 ;;
"VER")
8.0^22.0
"BLD",9646,6)
^538
**END**
**END**

