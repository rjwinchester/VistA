Released IB*2*632 SEQ #579
Extracted from mail message
**KIDS**:IB*2.0*632^

**INSTALL NAME**
IB*2.0*632
"BLD",11255,0)
IB*2.0*632^INTEGRATED BILLING^0^3181022^y
"BLD",11255,1,0)
^^18^18^3181022^
"BLD",11255,1,1,0)
This patch will update the administrative charge based on different rate
"BLD",11255,1,2,0)
types with new dispensing fee for third party pharmacy prescription
"BLD",11255,1,3,0)
claims with an effective date of January 1st, 2019.
"BLD",11255,1,4,0)
 
"BLD",11255,1,5,0)
    Rate Type                 Dispensing Fee
"BLD",11255,1,6,0)
    -------------------       --------------
"BLD",11255,1,7,0)
    DENTAL REIMB. INS.            17.66
"BLD",11255,1,8,0)
    HUMANITARIAN                  17.66
"BLD",11255,1,9,0)
    HUMANITARIAN REIMB. INS.      17.66
"BLD",11255,1,10,0)
    INELIGIBLE                    17.66
"BLD",11255,1,11,0)
    INELIGIBLE REIMB. INS.        17.66
"BLD",11255,1,12,0)
    INTERAGENCY                   17.66
"BLD",11255,1,13,0)
    NO FAULT INS.                 17.66
"BLD",11255,1,14,0)
    REIMBURSABLE INS.             17.66
"BLD",11255,1,15,0)
    TORT FEASOR                   17.66
"BLD",11255,1,16,0)
    WORKERS' COMP.                17.66
"BLD",11255,1,17,0)
    TRICARE                       14.73
"BLD",11255,1,18,0)
    TRICARE REIMB. INS.           14.73
"BLD",11255,4,0)
^9.64PA^^
"BLD",11255,6.3)
2
"BLD",11255,"INIT")
POST^IB20P632
"BLD",11255,"KRN",0)
^9.67PA^779.2^20
"BLD",11255,"KRN",.4,0)
.4
"BLD",11255,"KRN",.4,"NM",0)
^9.68A^^
"BLD",11255,"KRN",.401,0)
.401
"BLD",11255,"KRN",.402,0)
.402
"BLD",11255,"KRN",.403,0)
.403
"BLD",11255,"KRN",.5,0)
.5
"BLD",11255,"KRN",.84,0)
.84
"BLD",11255,"KRN",3.6,0)
3.6
"BLD",11255,"KRN",3.8,0)
3.8
"BLD",11255,"KRN",9.2,0)
9.2
"BLD",11255,"KRN",9.8,0)
9.8
"BLD",11255,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",11255,"KRN",9.8,"NM",1,0)
IB20P632^^0^B10977808
"BLD",11255,"KRN",9.8,"NM","B","IB20P632",1)

"BLD",11255,"KRN",19,0)
19
"BLD",11255,"KRN",19.1,0)
19.1
"BLD",11255,"KRN",101,0)
101
"BLD",11255,"KRN",409.61,0)
409.61
"BLD",11255,"KRN",771,0)
771
"BLD",11255,"KRN",779.2,0)
779.2
"BLD",11255,"KRN",870,0)
870
"BLD",11255,"KRN",8989.51,0)
8989.51
"BLD",11255,"KRN",8989.52,0)
8989.52
"BLD",11255,"KRN",8994,0)
8994
"BLD",11255,"KRN","B",.4,.4)

"BLD",11255,"KRN","B",.401,.401)

"BLD",11255,"KRN","B",.402,.402)

"BLD",11255,"KRN","B",.403,.403)

"BLD",11255,"KRN","B",.5,.5)

"BLD",11255,"KRN","B",.84,.84)

"BLD",11255,"KRN","B",3.6,3.6)

"BLD",11255,"KRN","B",3.8,3.8)

"BLD",11255,"KRN","B",9.2,9.2)

"BLD",11255,"KRN","B",9.8,9.8)

"BLD",11255,"KRN","B",19,19)

"BLD",11255,"KRN","B",19.1,19.1)

"BLD",11255,"KRN","B",101,101)

"BLD",11255,"KRN","B",409.61,409.61)

"BLD",11255,"KRN","B",771,771)

"BLD",11255,"KRN","B",779.2,779.2)

"BLD",11255,"KRN","B",870,870)

"BLD",11255,"KRN","B",8989.51,8989.51)

"BLD",11255,"KRN","B",8989.52,8989.52)

"BLD",11255,"KRN","B",8994,8994)

"INIT")
POST^IB20P632
"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^1^1
"PKG",200,20,1,0)
2^^IBAXDR
"PKG",200,20,1,1)

"PKG",200,20,"B",2,1)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321^2990406^2447
"PKG",200,22,1,"PAH",1,0)
632^3181022
"PKG",200,22,1,"PAH",1,1,0)
^^18^18^3181022
"PKG",200,22,1,"PAH",1,1,1,0)
This patch will update the administrative charge based on different rate
"PKG",200,22,1,"PAH",1,1,2,0)
types with new dispensing fee for third party pharmacy prescription
"PKG",200,22,1,"PAH",1,1,3,0)
claims with an effective date of January 1st, 2019.
"PKG",200,22,1,"PAH",1,1,4,0)
 
"PKG",200,22,1,"PAH",1,1,5,0)
    Rate Type                 Dispensing Fee
"PKG",200,22,1,"PAH",1,1,6,0)
    -------------------       --------------
"PKG",200,22,1,"PAH",1,1,7,0)
    DENTAL REIMB. INS.            17.66
"PKG",200,22,1,"PAH",1,1,8,0)
    HUMANITARIAN                  17.66
"PKG",200,22,1,"PAH",1,1,9,0)
    HUMANITARIAN REIMB. INS.      17.66
"PKG",200,22,1,"PAH",1,1,10,0)
    INELIGIBLE                    17.66
"PKG",200,22,1,"PAH",1,1,11,0)
    INELIGIBLE REIMB. INS.        17.66
"PKG",200,22,1,"PAH",1,1,12,0)
    INTERAGENCY                   17.66
"PKG",200,22,1,"PAH",1,1,13,0)
    NO FAULT INS.                 17.66
"PKG",200,22,1,"PAH",1,1,14,0)
    REIMBURSABLE INS.             17.66
"PKG",200,22,1,"PAH",1,1,15,0)
    TORT FEASOR                   17.66
"PKG",200,22,1,"PAH",1,1,16,0)
    WORKERS' COMP.                17.66
"PKG",200,22,1,"PAH",1,1,17,0)
    TRICARE                       14.73
"PKG",200,22,1,"PAH",1,1,18,0)
    TRICARE REIMB. INS.           14.73
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","IB20P632")
0^1^B10977808^n/a
"RTN","IB20P632",1,0)
IB20P632 ;ALB/CXW - UPDATE RX ADMINISTRATIVE FEE FOR CY2019;09/03/2018
"RTN","IB20P632",2,0)
 ;;2.0;INTEGRATED BILLING;**632**;21-MAR-94;Build 2
"RTN","IB20P632",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","IB20P632",4,0)
 Q
"RTN","IB20P632",5,0)
POST ; 
"RTN","IB20P632",6,0)
 ; Update pharmacy administrative fee for CY19 in Rate Schedule file 363
"RTN","IB20P632",7,0)
 N IBA,U S U="^"
"RTN","IB20P632",8,0)
 D MSG("IB*2.0*632 Post-Install starts.....")
"RTN","IB20P632",9,0)
 D TRXAF
"RTN","IB20P632",10,0)
 D MSG("IB*2.0*632 Post-Install is complete.")
"RTN","IB20P632",11,0)
 Q
"RTN","IB20P632",12,0)
 ;
"RTN","IB20P632",13,0)
TRXAF ; Rate Schedule
"RTN","IB20P632",14,0)
 N IBCT,IBI,IBT,IBX,IBRS,IBRSIN,IBRATY,IBEFFDT,IBADFE,IBDISP,IBADJUST
"RTN","IB20P632",15,0)
 D MSG("")
"RTN","IB20P632",16,0)
 D MSG("  >>>Effect. JAN 01, 2019 of RX Rate Schedule Adjustment for the Rate Type:"),MSG("")
"RTN","IB20P632",17,0)
 S IBADFE="",IBEFFDT="3190101",IBDRX="DTR-RX",IBCT=0
"RTN","IB20P632",18,0)
 F IBX=1:1 S IBT=$P($T(RSF+IBX),";;",2) Q:IBT="Q"  D
"RTN","IB20P632",19,0)
 . S IBRATY=$P(IBT,U)
"RTN","IB20P632",20,0)
 . S IBRSIN=$O(^DGCR(399.3,"B",IBRATY,0))
"RTN","IB20P632",21,0)
 . I 'IBRSIN D MSG("       "_IBRATY_" not defined in the Rate Type file (#399.3), not added") Q
"RTN","IB20P632",22,0)
 . ; latest entry
"RTN","IB20P632",23,0)
 . S IBRSIN=$O(^DGCR(399.3,"B",IBRATY,99999),-1)
"RTN","IB20P632",24,0)
 . I $P($G(^DGCR(399.3,+IBRSIN,0)),U,3) D MSG("       "_IBRATY_" inactivated in the Rate Type file (#399.3), not added") Q
"RTN","IB20P632",25,0)
 . I $$RSEXIST(IBEFFDT,IBRSIN) D MSG("       "_IBRATY_" already exists") Q
"RTN","IB20P632",26,0)
 . I IBRATY="DENTAL REIMB. INS.",'$O(^IBE(363,"B",IBDRX,0)),'$$DENT(IBRSIN,IBDRX) D MSG("       "_IBRATY_" not added") Q
"RTN","IB20P632",27,0)
 . S IBDISP=$P(IBT,U,2)
"RTN","IB20P632",28,0)
 . S IBADJUST=$P(IBT,U,3)
"RTN","IB20P632",29,0)
 . ; inactivate rx entry for cy2018 and add new rx entry for cy2019
"RTN","IB20P632",30,0)
 . D ENT^IB3PSOU(IBRATY,IBEFFDT,IBADFE,IBDISP,IBADJUST)
"RTN","IB20P632",31,0)
 . ; double check
"RTN","IB20P632",32,0)
 . I '$$RSEXIST(IBEFFDT,IBRSIN) D MSG("       "_IBRATY_" not added") Q
"RTN","IB20P632",33,0)
 . S IBCT=IBCT+1 D MSG("       "_IBRATY_" added")
"RTN","IB20P632",34,0)
 D MSG("")
"RTN","IB20P632",35,0)
 D MSG("     Total "_IBCT_$S(IBCT>1:" entries",1:" entry")_" added to the Rate Schedule file (#363)")
"RTN","IB20P632",36,0)
 D MSG("")
"RTN","IB20P632",37,0)
 Q
"RTN","IB20P632",38,0)
DENT(IBRSIN,IBDRX) ; return 1 if initial cs added for dental reim. ins. 
"RTN","IB20P632",39,0)
 N IBCS,DA,DLAYGO,DIC,DIE,DR,X,Y
"RTN","IB20P632",40,0)
 S IBCS="RX COST"
"RTN","IB20P632",41,0)
 I '$O(^IBE(363.1,"B",IBCS,0)) Q 0
"RTN","IB20P632",42,0)
 S DLAYGO=363,(DIC,DIE)="^IBE(363,",DIC(0)="L",X=IBDRX D FILE^DICN
"RTN","IB20P632",43,0)
 I Y<1 Q 0
"RTN","IB20P632",44,0)
 S DA=+Y,DR=".02///"_IBRSIN_";.03///"_"OUTPATIENT"_";.05///3180101" D ^DIE
"RTN","IB20P632",45,0)
 ; charge set
"RTN","IB20P632",46,0)
 S DA(1)=DA,DIC="^IBE(363,"_DA(1)_",11,",X=IBCS,DIC(0)="L",DIC("P")="363.0011P",DIC("DR")=".02///"_1 D ^DIC
"RTN","IB20P632",47,0)
 Q 1
"RTN","IB20P632",48,0)
 ;
"RTN","IB20P632",49,0)
RSEXIST(IBEFFDT,IBRSIN) ; return RS IFN if Rate Schedule exists for Effective Date
"RTN","IB20P632",50,0)
 N IBX,IBRSFN,IBRS0 S IBX=0
"RTN","IB20P632",51,0)
 S IBRSFN=0 F  S IBRSFN=$O(^IBE(363,IBRSFN))  Q:'IBRSFN  D  I IBX Q
"RTN","IB20P632",52,0)
 . S IBRS0=$G(^IBE(363,IBRSFN,0))
"RTN","IB20P632",53,0)
 . I $P(IBRS0,U,2)=IBRSIN,$P(IBRS0,U,5)=IBEFFDT S IBX=IBRSFN
"RTN","IB20P632",54,0)
 Q IBX
"RTN","IB20P632",55,0)
 ;
"RTN","IB20P632",56,0)
MSG(IBA) ;
"RTN","IB20P632",57,0)
 D MES^XPDUTL(IBA)
"RTN","IB20P632",58,0)
 Q
"RTN","IB20P632",59,0)
 ;
"RTN","IB20P632",60,0)
RSF ; Rate type^dispensing fee^adjustment
"RTN","IB20P632",61,0)
 ;;DENTAL REIMB. INS.^17.66^S X=X+17.66
"RTN","IB20P632",62,0)
 ;;HUMANITARIAN^17.66^S X=X+17.66
"RTN","IB20P632",63,0)
 ;;HUMANITARIAN REIMB. INS.^17.66^S X=X+17.66
"RTN","IB20P632",64,0)
 ;;INELIGIBLE^17.66^S X=X+17.66
"RTN","IB20P632",65,0)
 ;;INTERAGENCY^17.66^S X=X+17.66
"RTN","IB20P632",66,0)
 ;;INELIGIBLE REIMB. INS.^17.66^S X=X+17.66
"RTN","IB20P632",67,0)
 ;;NO FAULT INS.^17.66^S X=X+17.66
"RTN","IB20P632",68,0)
 ;;REIMBURSABLE INS.^17.66^S X=X+17.66
"RTN","IB20P632",69,0)
 ;;TORT FEASOR^17.66^S X=X+17.66
"RTN","IB20P632",70,0)
 ;;WORKERS' COMP.^17.66^S X=X+17.66
"RTN","IB20P632",71,0)
 ;;TRICARE^14.73^S X=X+14.73
"RTN","IB20P632",72,0)
 ;;TRICARE REIMB. INS.^14.73^S X=X+14.73
"RTN","IB20P632",73,0)
 ;;Q
"RTN","IB20P632",74,0)
 ;
"VER")
8.0^22.2
"BLD",11255,6)
^579
**END**
**END**

