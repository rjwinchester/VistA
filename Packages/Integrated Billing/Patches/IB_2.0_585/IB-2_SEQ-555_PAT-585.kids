Released IB*2*585 SEQ #555
Extracted from mail message
**KIDS**:IB*2.0*585^

**INSTALL NAME**
IB*2.0*585
"BLD",10063,0)
IB*2.0*585^INTEGRATED BILLING^0^3170901^y
"BLD",10063,1,0)
^^5^5^3170809^^^^
"BLD",10063,1,1,0)
This patch implements Payers domain changes required by the
"BLD",10063,1,2,0)
Collaborative Terminology Tooling & Data Management (CTT & DM) Native
"BLD",10063,1,3,0)
Domain Standardization (NDS) project. 
"BLD",10063,1,4,0)
 
"BLD",10063,1,5,0)
Please see FORUM for full patch description and installation instructions.
"BLD",10063,4,0)
^9.64PA^355.99^2
"BLD",10063,4,355.1,0)
355.1
"BLD",10063,4,355.1,2,0)
^9.641^355.1^1
"BLD",10063,4,355.1,2,355.1,0)
TYPE OF PLAN  (File-top level)
"BLD",10063,4,355.1,2,355.1,1,0)
^9.6411^15^1
"BLD",10063,4,355.1,2,355.1,1,15,0)
MASTER TYPE OF PLAN
"BLD",10063,4,355.1,222)
y^y^p^^^^n^^n
"BLD",10063,4,355.1,224)

"BLD",10063,4,355.99,0)
355.99
"BLD",10063,4,355.99,222)
y^y^f^^^^n^^
"BLD",10063,4,355.99,224)

"BLD",10063,4,"APDD",355.1,355.1)

"BLD",10063,4,"APDD",355.1,355.1,15)

"BLD",10063,4,"B",355.1,355.1)

"BLD",10063,4,"B",355.99,355.99)

"BLD",10063,6.3)
68
"BLD",10063,"ABPKG")
n
"BLD",10063,"INID")
^n
"BLD",10063,"INIT")
EN^IBE585PO
"BLD",10063,"KRN",0)
^9.67PA^779.2^20
"BLD",10063,"KRN",.4,0)
.4
"BLD",10063,"KRN",.401,0)
.401
"BLD",10063,"KRN",.402,0)
.402
"BLD",10063,"KRN",.402,"NM",0)
^9.68A^1^1
"BLD",10063,"KRN",.402,"NM",1,0)
IB TOPM    FILE #355.1^355.1^0
"BLD",10063,"KRN",.402,"NM","B","IB TOPM    FILE #355.1",1)

"BLD",10063,"KRN",.403,0)
.403
"BLD",10063,"KRN",.5,0)
.5
"BLD",10063,"KRN",.84,0)
.84
"BLD",10063,"KRN",3.6,0)
3.6
"BLD",10063,"KRN",3.8,0)
3.8
"BLD",10063,"KRN",9.2,0)
9.2
"BLD",10063,"KRN",9.8,0)
9.8
"BLD",10063,"KRN",9.8,"NM",0)
^9.68A^5^3
"BLD",10063,"KRN",9.8,"NM",3,0)
IBENDS^^0^B13732020
"BLD",10063,"KRN",9.8,"NM",4,0)
IBE585PO^^0^B25508579
"BLD",10063,"KRN",9.8,"NM",5,0)
IBENDS1^^0^B88591296
"BLD",10063,"KRN",9.8,"NM","B","IBE585PO",4)

"BLD",10063,"KRN",9.8,"NM","B","IBENDS",3)

"BLD",10063,"KRN",9.8,"NM","B","IBENDS1",5)

"BLD",10063,"KRN",19,0)
19
"BLD",10063,"KRN",19,"NM",0)
^9.68A^7^4
"BLD",10063,"KRN",19,"NM",4,0)
IB SYSTEM DEFINITION MENU^^2
"BLD",10063,"KRN",19,"NM",5,0)
IBMTOP ASSN^^0
"BLD",10063,"KRN",19,"NM",6,0)
IBMTOP MNU^^0
"BLD",10063,"KRN",19,"NM",7,0)
IBMTOP RPT^^0
"BLD",10063,"KRN",19,"NM","B","IB SYSTEM DEFINITION MENU",4)

"BLD",10063,"KRN",19,"NM","B","IBMTOP ASSN",5)

"BLD",10063,"KRN",19,"NM","B","IBMTOP MNU",6)

"BLD",10063,"KRN",19,"NM","B","IBMTOP RPT",7)

"BLD",10063,"KRN",19.1,0)
19.1
"BLD",10063,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",10063,"KRN",101,0)
101
"BLD",10063,"KRN",409.61,0)
409.61
"BLD",10063,"KRN",771,0)
771
"BLD",10063,"KRN",779.2,0)
779.2
"BLD",10063,"KRN",870,0)
870
"BLD",10063,"KRN",8989.51,0)
8989.51
"BLD",10063,"KRN",8989.52,0)
8989.52
"BLD",10063,"KRN",8994,0)
8994
"BLD",10063,"KRN","B",.4,.4)

"BLD",10063,"KRN","B",.401,.401)

"BLD",10063,"KRN","B",.402,.402)

"BLD",10063,"KRN","B",.403,.403)

"BLD",10063,"KRN","B",.5,.5)

"BLD",10063,"KRN","B",.84,.84)

"BLD",10063,"KRN","B",3.6,3.6)

"BLD",10063,"KRN","B",3.8,3.8)

"BLD",10063,"KRN","B",9.2,9.2)

"BLD",10063,"KRN","B",9.8,9.8)

"BLD",10063,"KRN","B",19,19)

"BLD",10063,"KRN","B",19.1,19.1)

"BLD",10063,"KRN","B",101,101)

"BLD",10063,"KRN","B",409.61,409.61)

"BLD",10063,"KRN","B",771,771)

"BLD",10063,"KRN","B",779.2,779.2)

"BLD",10063,"KRN","B",870,870)

"BLD",10063,"KRN","B",8989.51,8989.51)

"BLD",10063,"KRN","B",8989.52,8989.52)

"BLD",10063,"KRN","B",8994,8994)

"BLD",10063,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",10063,"QUES",0)
^9.62^^
"BLD",10063,"REQB",0)
^9.611^2^2
"BLD",10063,"REQB",1,0)
IB*2.0*528^2
"BLD",10063,"REQB",2,0)
HDI*1.0*20^2
"BLD",10063,"REQB","B","HDI*1.0*20",2)

"BLD",10063,"REQB","B","IB*2.0*528",1)

"FIA",355.1)
TYPE OF PLAN
"FIA",355.1,0)
^IBE(355.1,
"FIA",355.1,0,0)
355.1I
"FIA",355.1,0,1)
y^y^p^^^^n^^n
"FIA",355.1,0,10)

"FIA",355.1,0,11)

"FIA",355.1,0,"RLRO")

"FIA",355.1,0,"VR")
2.0^IB
"FIA",355.1,355.1)
1
"FIA",355.1,355.1,15)

"FIA",355.99)
MASTER TYPE OF PLAN
"FIA",355.99,0)
^IBEMTOP(355.99,
"FIA",355.99,0,0)
355.99I
"FIA",355.99,0,1)
y^y^f^^^^n^^
"FIA",355.99,0,10)

"FIA",355.99,0,11)

"FIA",355.99,0,"RLRO")

"FIA",355.99,0,"VR")
2.0^IB
"FIA",355.99,355.99)
0
"FIA",355.99,355.9901)
0
"INIT")
EN^IBE585PO
"IX",355.99,355.99,"AMASTERVUID",0)
355.99^AMASTERVUID^This cross-reference identifies the Master entry for a VUID.^R^^R^IR^I^355.99^^^^^S
"IX",355.99,355.99,"AMASTERVUID",.1,0)
^^3^3^3170804^^
"IX",355.99,355.99,"AMASTERVUID",.1,1,0)
If multiple entries have the same VUID in the file, this cross-reference 
"IX",355.99,355.99,"AMASTERVUID",.1,2,0)
can be used to identify the Master entry for a VUID associated with a 
"IX",355.99,355.99,"AMASTERVUID",.1,3,0)
Term/Concept.
"IX",355.99,355.99,"AMASTERVUID",1)
S ^IBEMTOP(355.99,"AMASTERVUID",$E(X(1),1,30),X(2),DA)=""
"IX",355.99,355.99,"AMASTERVUID",2)
K ^IBEMTOP(355.99,"AMASTERVUID",$E(X(1),1,30),X(2),DA)
"IX",355.99,355.99,"AMASTERVUID",2.5)
K ^IBEMTOP(355.99,"AMASTERVUID")
"IX",355.99,355.99,"AMASTERVUID",11.1,0)
^.114IA^2^2
"IX",355.99,355.99,"AMASTERVUID",11.1,1,0)
1^F^355.99^99.99^30^1^F
"IX",355.99,355.99,"AMASTERVUID",11.1,2,0)
2^F^355.99^99.98^^2^F
"KRN",.402,2787,-1)
0^1
"KRN",.402,2787,0)
IB TOPM^3170830.1337^@^355.1^^@^3170830
"KRN",.402,2787,"%D",0)
^.4021^2^2^3170815^^^
"KRN",.402,2787,"%D",1,0)
Allow write access to the MASTER TYPE OF PLAN field (#15) in the TYPE OF 
"KRN",.402,2787,"%D",2,0)
PLAN file (#355.1) to associate the Plan Types to Master Plan Types.
"KRN",.402,2787,"DIAB",4,0,355.1,0)
MASTER TYPE OF PLAN;"PHDSC Source of Payment"
"KRN",.402,2787,"DR",1,355.1)
W !!," Enter the Master Type of Plan (MTOP) PHDSC Source";W !," of Payment associated with the Type of Plan. ";W !,"NOTE: Names are case sensitive.",!;15PHDSC Source of Payment~;
"KRN",19,3102,-1)
2^4
"KRN",19,3102,0)
IB SYSTEM DEFINITION MENU^MCCR System Definition Menu^^M^568^IB SUPERVISOR^^^^^y^230
"KRN",19,3102,10,0)
^19.01IP^22^22
"KRN",19,3102,10,22,0)
2921508^MTOP^
"KRN",19,3102,10,22,"^")
IBMTOP MNU
"KRN",19,3102,"U")
MCCR SYSTEM DEFINITION MENU
"KRN",19,2921485,-1)
0^7
"KRN",19,2921485,0)
IBMTOP RPT^Master Type of Plan Report^^R^^^^^^^^INTEGRATED BILLING
"KRN",19,2921485,1,0)
^^5^5^3170809^
"KRN",19,2921485,1,1,0)
This option prints the TYPE OF PLAN file (#355.1) entries and their 
"KRN",19,2921485,1,2,0)
association to the MASTER TYPE OF PLAN file (#355.99).
"KRN",19,2921485,1,3,0)
 
"KRN",19,2921485,1,4,0)
The MASTER TYPE OF PLAN file (#355.99) represents the Source of Payment
"KRN",19,2921485,1,5,0)
Typology developed by the Public Health Data Standards Consortium (PHDSC).
"KRN",19,2921485,25)
EN^IBENDS1
"KRN",19,2921485,"U")
MASTER TYPE OF PLAN REPORT
"KRN",19,2921507,-1)
0^5
"KRN",19,2921507,0)
IBMTOP ASSN^Master Type of Plan Association^^R^^^^^^^^INTEGRATED BILLING
"KRN",19,2921507,1,0)
^^4^4^3170809^
"KRN",19,2921507,1,1,0)
This option is provided to allow TYPE OF PLAN file (#355.1) entries to be 
"KRN",19,2921507,1,2,0)
associated with entries from the MASTER TYPE OF PLAN file (#355.99). The 
"KRN",19,2921507,1,3,0)
MASTER TYPE OF PLAN file (#355.99) represents the Source of Payment 
"KRN",19,2921507,1,4,0)
Typology developed by the Public Health Data Standards Consortium (PHDSC).
"KRN",19,2921507,25)
EN^IBENDS
"KRN",19,2921507,51)

"KRN",19,2921507,"U")
MASTER TYPE OF PLAN ASSOCIATIO
"KRN",19,2921508,-1)
0^6
"KRN",19,2921508,0)
IBMTOP MNU^Master Type of Plan Menu^^M^^^^^^^^
"KRN",19,2921508,1,0)
^19.06^4^4^3170814^^^
"KRN",19,2921508,1,1,0)
This menu contains options designed to maintain TYPE OF PLAN file
"KRN",19,2921508,1,2,0)
(#355.1) associations to the MASTER TYPE OF PLAN file (#355.99).
"KRN",19,2921508,1,3,0)
The MASTER TYPE OF PLAN file (#355.99) represents the Source of Payment
"KRN",19,2921508,1,4,0)
Typology developed by the Public Health Data Standards Consortium (PHDSC).
"KRN",19,2921508,10,0)
^19.01IP^2^2
"KRN",19,2921508,10,1,0)
2921507^ASSN^1
"KRN",19,2921508,10,1,"^")
IBMTOP ASSN
"KRN",19,2921508,10,2,0)
2921485^RPT^2
"KRN",19,2921508,10,2,"^")
IBMTOP RPT
"KRN",19,2921508,99)
64504,61619
"KRN",19,2921508,"U")
MASTER TYPE OF PLAN MENU
"MBREQ")
0
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",230,-1)
1^1
"PKG",230,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",230,20,0)
^9.402P^1^1
"PKG",230,20,1,0)
2^^IBAXDR
"PKG",230,20,1,1)

"PKG",230,20,"B",2,1)

"PKG",230,22,0)
^9.49I^1^1
"PKG",230,22,1,0)
2.0^2940321^2940525
"PKG",230,22,1,"PAH",1,0)
585^3170901
"PKG",230,22,1,"PAH",1,1,0)
^^5^5^3170901
"PKG",230,22,1,"PAH",1,1,1,0)
This patch implements Payers domain changes required by the
"PKG",230,22,1,"PAH",1,1,2,0)
Collaborative Terminology Tooling & Data Management (CTT & DM) Native
"PKG",230,22,1,"PAH",1,1,3,0)
Domain Standardization (NDS) project. 
"PKG",230,22,1,"PAH",1,1,4,0)
 
"PKG",230,22,1,"PAH",1,1,5,0)
Please see FORUM for full patch description and installation instructions.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","IBE585PO")
0^4^B25508579^n/a
"RTN","IBE585PO",1,0)
IBE585PO ;DAL/JCH - Patch IB*2.0*585 Post Install ;22-JUN-17
"RTN","IBE585PO",2,0)
 ;;2.0;INTEGRATED BILLING;**585**;21-MAR-94;Build 68
"RTN","IBE585PO",3,0)
 ; This routine uses the following IAs:
"RTN","IBE585PO",4,0)
 ; #4640 - ^HDISVF01 calls (supported)
"RTN","IBE585PO",5,0)
 ; #4639 - ^HDISVCMR calls     (supported)
"RTN","IBE585PO",6,0)
 ; #4651 - ^HDISVF09 calls     (supported)
"RTN","IBE585PO",7,0)
 ;
"RTN","IBE585PO",8,0)
EN ;MAIN ENTRY POINT
"RTN","IBE585PO",9,0)
 N SUCCESS,DEMFAC,X,Y,DA,X1,X2,ZTRTN,ZTDESC,ZTDTH,TMP,DOMPTR,DIE,DA,DR,FIL,DOMPTR,DOMAIN
"RTN","IBE585PO",10,0)
 S DEMFAC=$$KSP^XUPARAM("INST")
"RTN","IBE585PO",11,0)
 S DOMAIN="PAYERS"
"RTN","IBE585PO",12,0)
 S SUCCESS=$$GETIEN^HDISVF09(DOMAIN,.DOMPTR)
"RTN","IBE585PO",13,0)
 I 'SUCCESS!'+$G(DOMPTR) D  Q
"RTN","IBE585PO",14,0)
 .D MES^XPDUTL("***** Error retrieving the IEN for the "_DOMAIN_" domain.")
"RTN","IBE585PO",15,0)
 .D PSTHALT("File #355.99 'seeding' was not performed.")
"RTN","IBE585PO",16,0)
 S FIL=355.99 D HDIS(FIL,DOMPTR,DOMAIN)
"RTN","IBE585PO",17,0)
 Q
"RTN","IBE585PO",18,0)
 ;
"RTN","IBE585PO",19,0)
HDIS(FIL,DOMPTR,DOMAIN) ; do HDIS "seeding"
"RTN","IBE585PO",20,0)
 N TMP,HDIMSG,B,C
"RTN","IBE585PO",21,0)
 ;
"RTN","IBE585PO",22,0)
 ; New file can't be seeded if there is no data?
"RTN","IBE585PO",23,0)
 I '$O(^IBEMTOP(355.99,0)) D DUMSEED
"RTN","IBE585PO",24,0)
 D PSEED(355.99,DOMPTR,DOMAIN)
"RTN","IBE585PO",25,0)
 ;
"RTN","IBE585PO",26,0)
 Q
"RTN","IBE585PO",27,0)
 ;
"RTN","IBE585PO",28,0)
PSEED(FIL,DOMPTR,DOMAIN)  ;  Check for previous "seeding"(deployment), quit if already done.
"RTN","IBE585PO",29,0)
 N ASTATUS,TMP,XPROD,IBSITE,XMSUB,XMDUZ,XMY,HDITEXT,FILNAM,MSG,XMTEXT,XMZ
"RTN","IBE585PO",30,0)
 ;
"RTN","IBE585PO",31,0)
 S ASTATUS=$P($$GETSTAT^HDISVF01(FIL),U)
"RTN","IBE585PO",32,0)
 I ASTATUS>3 S MSG="File: "_FIL_" Has already been seeded. Status is: "_ASTATUS D PSTHALT(MSG) Q
"RTN","IBE585PO",33,0)
 ;
"RTN","IBE585PO",34,0)
 ; set the seeding status to complete for data deployments.
"RTN","IBE585PO",35,0)
 D SETSTAT^HDISVF01(FIL,,4)
"RTN","IBE585PO",36,0)
 ;
"RTN","IBE585PO",37,0)
 ; send message to STS that patch is installed and the current status
"RTN","IBE585PO",38,0)
 D FILE^DID(FIL,"","NAME","FILNAM","ERR")
"RTN","IBE585PO",39,0)
 S FILNAM=$G(FILNAM("NAME"))
"RTN","IBE585PO",40,0)
 S XPROD=$$PROD^XUPROD()
"RTN","IBE585PO",41,0)
 S IBSITE=$$SITE^VASITE()
"RTN","IBE585PO",42,0)
 S XMSUB="Site: "_$P(IBSITE,"^",2)_" File: "_FIL_" in "_($S(XPROD:"PRODUCTION",1:"TEST"))_" ready for ERT Update"
"RTN","IBE585PO",43,0)
 S XMY("G.HDIS ERT NOTIFICATION@FORUM.DOMAIN.EXT")=""
"RTN","IBE585PO",44,0)
 S XMDUZ="Site: "_$P(IBSITE,"^",3)_" Patch Install IB*2.0*585 is Complete"
"RTN","IBE585PO",45,0)
 S XMY(DUZ)=""
"RTN","IBE585PO",46,0)
 K HDITEXT
"RTN","IBE585PO",47,0)
 S HDITEXT(1)=""
"RTN","IBE585PO",48,0)
 S HDITEXT(2)="Site: "_$P(IBSITE,"^",2)_" - "_$P(IBSITE,"^",3)
"RTN","IBE585PO",49,0)
 S HDITEXT(2)=HDITEXT(2)_" with Domain/IP Address of "_$G(^XMB("NETNAME"))  ;facility name
"RTN","IBE585PO",50,0)
 S HDITEXT(3)="Has Installed Patch IB*2.0*585 into their "_$S(XPROD:"PRODUCTION",1:"TEST")_" System Environment"
"RTN","IBE585PO",51,0)
 S HDITEXT(4)="The Patch was Installed on: "
"RTN","IBE585PO",52,0)
 S B=$$NOW^XLFDT N Y S Y=B D DD^%DT S HDITEXT(4)=HDITEXT(4)_Y ;date/time
"RTN","IBE585PO",53,0)
 S HDITEXT(5)=""
"RTN","IBE585PO",54,0)
 S HDITEXT(6)="Patch IB*2.0*585 has standardized file: "_FILNAM_" (#"_FIL_")"
"RTN","IBE585PO",55,0)
 S HDITEXT(7)=""
"RTN","IBE585PO",56,0)
 S HDITEXT(8)="The current HDIS status of file #"_FIL_"is:  "_$P($$GETSTAT^HDISVF01(FIL),U)
"RTN","IBE585PO",57,0)
 S HDITEXT(9)=""
"RTN","IBE585PO",58,0)
 S HDITEXT(10)="Site: "_$P(IBSITE,"^",2)_" - "_$P(IBSITE,"^",3)_"  needs full file update of the "_FILNAM_" file (#"_FIL_" as soon as possible."
"RTN","IBE585PO",59,0)
 S HDITEXT(11)=""
"RTN","IBE585PO",60,0)
 N DIFROM S XMTEXT="HDITEXT(" D ^XMD K DIFROM
"RTN","IBE585PO",61,0)
 S MSG="File: "_FIL_" Has been 'seeded'. Message Number: "_$G(XMZ) D PSTDONE(MSG)
"RTN","IBE585PO",62,0)
 Q
"RTN","IBE585PO",63,0)
 ;
"RTN","IBE585PO",64,0)
PSTDONE(MSG) ; display FINISHED message
"RTN","IBE585PO",65,0)
 N HDIMSG
"RTN","IBE585PO",66,0)
 S HDIMSG(1)=""
"RTN","IBE585PO",67,0)
 S HDIMSG(2)=MSG
"RTN","IBE585PO",68,0)
 S HDIMSG(3)="***** Post-installation of Patch IB*2.0*585 HDIS 'seeding' "_FILNAM_" file (#"_FIL_") has Completed."
"RTN","IBE585PO",69,0)
 S HDIMSG(4)="***** An update message has been sent to Enterprise VistA Support."
"RTN","IBE585PO",70,0)
 S HDIMSG(5)=""
"RTN","IBE585PO",71,0)
 D MES^XPDUTL(.HDIMSG)
"RTN","IBE585PO",72,0)
 Q
"RTN","IBE585PO",73,0)
 ;
"RTN","IBE585PO",74,0)
PSTHALT(MSG) ; display error message
"RTN","IBE585PO",75,0)
 S HDIMSG(1)=""
"RTN","IBE585PO",76,0)
 S HDIMSG(2)=MSG
"RTN","IBE585PO",77,0)
 S HDIMSG(3)="***** Post-installation of Patch IB*2.0*585 HDIS 'seeding' has been halted."
"RTN","IBE585PO",78,0)
 S HDIMSG(4)="***** Please contact Enterprise VistA Support."
"RTN","IBE585PO",79,0)
 S HDIMSG(5)=""
"RTN","IBE585PO",80,0)
 D MES^XPDUTL(.HDIMSG)
"RTN","IBE585PO",81,0)
 Q
"RTN","IBE585PO",82,0)
 ;
"RTN","IBE585PO",83,0)
DUMSEED ; New file 355.99 contains no data, can't be seeded unless there is at least one entry?
"RTN","IBE585PO",84,0)
 ;
"RTN","IBE585PO",85,0)
 ; MASTER TYPE OF PLAN (#355.99) file initial population data elements from DAT35599 line tag;
"RTN","IBE585PO",86,0)
 ;
"RTN","IBE585PO",87,0)
 ; IBDATA ";" PIECE - FIELD # - FIELD NAME
"RTN","IBE585PO",88,0)
 ;        PIECE #1  -   n/a   - IEN 
"RTN","IBE585PO",89,0)
 ;        PIECE #2  -  .01    - PLAN NAME
"RTN","IBE585PO",90,0)
 ;        PIECE #3  -    1    - PHDSC SOURCE OF PAYMENT
"RTN","IBE585PO",91,0)
 ;
"RTN","IBE585PO",92,0)
 N IBMTOPI,IBMFILE,IBDATA,IBDATLN,IBFDA,IBRSLT,XUMF
"RTN","IBE585PO",93,0)
 S IBMFILE=355.99
"RTN","IBE585PO",94,0)
 S XUMF=1
"RTN","IBE585PO",95,0)
 F IBDATLN=1:1 S IBDATA=$P($T(DAT35599+IBDATLN),";",3,10) Q:IBDATA=""  D
"RTN","IBE585PO",96,0)
 .N IBMTOPI,IBFDA,IBFDAIEN,IBEFFDT
"RTN","IBE585PO",97,0)
 .S IBMTOPI=$P(IBDATA,";")
"RTN","IBE585PO",98,0)
 .S IBFDA(355.99,"+1,",.01)=$P(IBDATA,";",2)
"RTN","IBE585PO",99,0)
 .S IBFDA(355.99,"+1,",1)=$P(IBDATA,";",3)
"RTN","IBE585PO",100,0)
 .S IBFDAIEN(1)=IBMTOPI
"RTN","IBE585PO",101,0)
 .S IBRSLT=$$INSREC(IBMFILE,IBMTOPI,.IBFDA,.IBFDAIEN)
"RTN","IBE585PO",102,0)
 Q
"RTN","IBE585PO",103,0)
 ;
"RTN","IBE585PO",104,0)
INSREC(IBFILE,IBIEN,IBFDA,IBFDAIEN) ; Insert IBIEN into file IBFILE with data in IBFDA
"RTN","IBE585PO",105,0)
 I ('$G(IBFILE)) Q "0^Invalid parameter"
"RTN","IBE585PO",106,0)
 N IBDERR
"RTN","IBE585PO",107,0)
 I '$G(IBFDAIEN(1)) S IBFDAIEN="",IBFDAIEN(1)=""
"RTN","IBE585PO",108,0)
 D UPDATE^DIE("","IBFDA","IBFDAIEN","IBDERR")
"RTN","IBE585PO",109,0)
 I $D(IBDERR) Q -1
"RTN","IBE585PO",110,0)
 Q +$G(IBFDA)
"RTN","IBE585PO",111,0)
 ;
"RTN","IBE585PO",112,0)
 ;
"RTN","IBE585PO",113,0)
 ; IBDATA ";" PIECE - FIELD # - FIELD NAME
"RTN","IBE585PO",114,0)
 ;        PIECE #1  -   n/a   - IEN 
"RTN","IBE585PO",115,0)
 ;        PIECE #2  -  .01    - PLAN NAME
"RTN","IBE585PO",116,0)
 ;        PIECE #3  -    1    - PHDSC SOURCE OF PAYMENT
"RTN","IBE585PO",117,0)
 ;
"RTN","IBE585PO",118,0)
DAT35599 ; Data to populate the MASTER TYPE OF PLAN (#355.99) file
"RTN","IBE585PO",119,0)
 ;;1;MEDICARE;1
"RTN","IBE585PO",120,0)
 ;;2;Medicare (Managed Care);11
"RTN","IBE585PO",121,0)
 ;;3;Medicare HMO;111
"RTN","IBE585PO",122,0)
 ;;4;Medicare PPO;112
"RTN","IBE585PO",123,0)
 ;;5;Medicare POS;113
"RTN","IBE585PO",124,0)
 ;;6;Medicare Managed Care Other;119
"RTN","IBE585PO",125,0)
 ;;7;Medicare (Non-managed Care);12
"RTN","IBE585PO",126,0)
 ;;8;Medicare FFS;121
"RTN","IBE585PO",127,0)
 ;;9;Medicare Drug Benefit;122
"RTN","IBE585PO",128,0)
 ;;10;Medicare Medical Savings Account (MSA);123
"RTN","IBE585PO",129,0)
 ;;11;Medicare Non-managed Care Other;129
"RTN","IBE585PO",130,0)
 ;;12;Medicare Hospice;13
"RTN","IBE585PO",131,0)
 ;;13;Dual Eligibility Medicare/Medicaid Organization;14
"RTN","IBE585PO",132,0)
 ;;14;Medicare Other;19
"RTN","IBE585PO",133,0)
 ;;15;Medicare Pharmacy Benefit Manager;191
"RTN","IBE585PO",134,0)
 Q
"RTN","IBENDS")
0^3^B13732020^n/a
"RTN","IBENDS",1,0)
IBENDS ;DAL/JCH - NDS PAYERS MTOP UTILITIES ;15-JUN-2017
"RTN","IBENDS",2,0)
 ;;2.0;INTEGRATED BILLING;**585**;21-MAR-94;Build 68
"RTN","IBENDS",3,0)
 ;
"RTN","IBENDS",4,0)
 Q
"RTN","IBENDS",5,0)
 ; 
"RTN","IBENDS",6,0)
 ; Available at Master Type of Plan Association [IBMTOP ASSN] option, at the following menu path:
"RTN","IBENDS",7,0)
 ;    Billing Supervisor Menu [IB BILLING SUPERVISOR MENU]
"RTN","IBENDS",8,0)
 ;      MCCR System Definition Menu [MCCR SYSTEM DEFINITION MENU]
"RTN","IBENDS",9,0)
 ;        Master Type of Plan Menu [IBMTOP MNU]
"RTN","IBENDS",10,0)
 ;          Master Type of Plan Association [IBMTOP ASSN]
"RTN","IBENDS",11,0)
 ;
"RTN","IBENDS",12,0)
EN  ; Allow users to populate the MASTER TYPE OF PLAN field (#15) in TYPE OF PLAN file (#355.1)
"RTN","IBENDS",13,0)
 D INFO,KILLTMP     ; Display option info, kill ^TMP($J,"IBENDS1"
"RTN","IBENDS",14,0)
 N IBDONE           ; Signal from user - Q:IBDONE
"RTN","IBENDS",15,0)
 N IBENAME          ; TOP Name
"RTN","IBENDS",16,0)
 S IBDONE=0
"RTN","IBENDS",17,0)
 ; Prompt for TYPE OF PLAN (#355.1) entries until user quits
"RTN","IBENDS",18,0)
 F  Q:IBDONE  D
"RTN","IBENDS",19,0)
 .N DIE,DA,DR,DIC,X,Y,DIR,DUOUT,IBETOPY,IBETOPI,IBTOPNAM,IBETOP0,IBEMTOP0,IBEMTOPI,IBESUM,IBEMISV
"RTN","IBENDS",20,0)
 .;
"RTN","IBENDS",21,0)
 .; Prompt for TOP
"RTN","IBENDS",22,0)
 .S IBETOPI=+$$GETOP(.IBTOPNAM,.IBDONE) Q:$G(IBDONE)
"RTN","IBENDS",23,0)
 .;
"RTN","IBENDS",24,0)
 .; Get relevant info from 355.1 and 355.9, store in ^TMP($J
"RTN","IBENDS",25,0)
 .D GETDATA($G(IBTOPNAM),IBETOPI)
"RTN","IBENDS",26,0)
 .S IBENAME=$P(IBETOP0,"^")
"RTN","IBENDS",27,0)
 .S IBEMISV=$G(IBEMTOPI)  ; Save associated master IEN, so we can check later if it's changed
"RTN","IBENDS",28,0)
 .;
"RTN","IBENDS",29,0)
 .; display Type of Plan record details, prompt for new MTOP pointer in TOP file
"RTN","IBENDS",30,0)
 .S IBESUM=2 D PRINTOP^IBENDS1(IBENAME,IBETOPI)
"RTN","IBENDS",31,0)
 .D UPDMTOP(IBETOPI) Q:$G(DUOUT)!$G(DTOUT)
"RTN","IBENDS",32,0)
 .D GETDATA($G(IBTOPNAM),IBETOPI)               ; Get updated TOP (#355.1) details
"RTN","IBENDS",33,0)
 .;
"RTN","IBENDS",34,0)
 .I $G(IBEMTOPI)'=$G(IBEMISV) D    ; MTOP pointer changed, re-display updated info
"RTN","IBENDS",35,0)
 ..D REDISP(IBENAME,IBETOPI)
"RTN","IBENDS",36,0)
 .;
"RTN","IBENDS",37,0)
 .S DIR(0)="EA",DIR("A",1)="",DIR("A",2)="",DIR("A")="Press Return to continue "
"RTN","IBENDS",38,0)
 .D ^DIR
"RTN","IBENDS",39,0)
 .D INFO
"RTN","IBENDS",40,0)
 D KILLTMP
"RTN","IBENDS",41,0)
 Q
"RTN","IBENDS",42,0)
 ;
"RTN","IBENDS",43,0)
INFO ; Display message, clear screen
"RTN","IBENDS",44,0)
 N MSG
"RTN","IBENDS",45,0)
 S MSG(1)="  This option allows VA TYPE OF PLAN file entries to be associated with"
"RTN","IBENDS",46,0)
 S MSG(2)="  MASTER TYPE OF PLAN file entries to enhance interoperability. MASTER"
"RTN","IBENDS",47,0)
 S MSG(3)="  TYPE OF PLAN file entries represent the Source of Payment Typology"
"RTN","IBENDS",48,0)
 S MSG(4)="  developed by the Public Health Data Standards Consortium (PHDSC)."
"RTN","IBENDS",49,0)
 S MSG(5)=""
"RTN","IBENDS",50,0)
 D CLEAR^VALM1
"RTN","IBENDS",51,0)
 D BMES^XPDUTL(.MSG)
"RTN","IBENDS",52,0)
 Q
"RTN","IBENDS",53,0)
 ;
"RTN","IBENDS",54,0)
GETOP(IBTOPNAM,IBDONE)  ; Prompt for Type of Plan
"RTN","IBENDS",55,0)
 N DIC
"RTN","IBENDS",56,0)
 S DIC=355.1
"RTN","IBENDS",57,0)
 S DIC(0)="QEAMZ"
"RTN","IBENDS",58,0)
 W ! D ^DIC I Y<0 S IBDONE=1,Y=""
"RTN","IBENDS",59,0)
 S IBTOPNAM=$P(Y,"^",2)
"RTN","IBENDS",60,0)
 Q +Y
"RTN","IBENDS",61,0)
 ;
"RTN","IBENDS",62,0)
UPDMTOP(IBMTOPI)  ; Update Master Type of Plan field (#90) in TOP file (#355.1)
"RTN","IBENDS",63,0)
 ; Use IB TOPM input template to restrict input to MTOP field
"RTN","IBENDS",64,0)
 N DIE,DR,DA
"RTN","IBENDS",65,0)
 S DIE="^IBE(355.1,"
"RTN","IBENDS",66,0)
 S DR="[IB TOPM]"
"RTN","IBENDS",67,0)
 S DA=IBETOPI
"RTN","IBENDS",68,0)
 D ^DIE
"RTN","IBENDS",69,0)
 Q
"RTN","IBENDS",70,0)
 ;
"RTN","IBENDS",71,0)
GETDATA(IBENAME,IBETOPI) ; Define local variables and set into ^TMP($J
"RTN","IBENDS",72,0)
 S IBETOP0=$G(^IBE(355.1,IBETOPI,0)),IBEMTOPI=$P(IBETOP0,"^",5)
"RTN","IBENDS",73,0)
 S IBTOPST=$P(IBETOP0,"^",4),IBTOPST=$S(IBTOPST:"INACTIVE",1:"ACTIVE")
"RTN","IBENDS",74,0)
 S IBEMTOP0=$S($G(IBEMTOPI):$G(^IBEMTOP(355.99,+IBEMTOPI,0)),1:"Not Mapped")
"RTN","IBENDS",75,0)
 I IBEMTOPI S $P(IBEMTOP0,"^",4)=IBEMTOPI
"RTN","IBENDS",76,0)
 S ^TMP($J,"IBENDS1",IBENAME,IBETOPI,"TOP")=$G(IBETOP0)
"RTN","IBENDS",77,0)
 S ^TMP($J,"IBENDS1",IBENAME,IBETOPI,"MTOP")=$G(IBEMTOP0)
"RTN","IBENDS",78,0)
 Q
"RTN","IBENDS",79,0)
 ;
"RTN","IBENDS",80,0)
REDISP(IBENAME,IBETOPI)  ; Redisplay updated Type of Plan (#355.1) entry
"RTN","IBENDS",81,0)
 W !!,"Update Successful...."
"RTN","IBENDS",82,0)
 S IBESUM=1 D PRINTOP^IBENDS1(IBENAME,IBETOPI)   ; display summarized TOP entry info
"RTN","IBENDS",83,0)
 Q
"RTN","IBENDS",84,0)
 ;
"RTN","IBENDS",85,0)
KILLTMP  ; Kill ^TMP global
"RTN","IBENDS",86,0)
 K ^TMP($J,"IBENDS1")
"RTN","IBENDS",87,0)
 Q
"RTN","IBENDS1")
0^5^B88591296^n/a
"RTN","IBENDS1",1,0)
IBENDS1 ;DAL/JCH - NDS PAYERS MTOP UTILITIES ;15-JUN-2017
"RTN","IBENDS1",2,0)
 ;;2.0;INTEGRATED BILLING;**585**;21-MAR-94;Build 68
"RTN","IBENDS1",3,0)
 ;
"RTN","IBENDS1",4,0)
 ; Type of Plan (#355.1) to Master Type of Plan (#355.99) associations
"RTN","IBENDS1",5,0)
 ; Available at Master Type of Plan Report [IBMTOP RPT] option, at the following menu path:
"RTN","IBENDS1",6,0)
 ;    Billing Supervisor Menu [IB BILLING SUPERVISOR MENU]
"RTN","IBENDS1",7,0)
 ;      MCCR System Definition Menu [MCCR SYSTEM DEFINITION MENU]
"RTN","IBENDS1",8,0)
 ;        Master Type of Plan Menu [IBMTOP MNU]
"RTN","IBENDS1",9,0)
 ;          Master Type of Plan Report [IBMTOP RPT]
"RTN","IBENDS1",10,0)
 Q
"RTN","IBENDS1",11,0)
 ;
"RTN","IBENDS1",12,0)
EN ; MTOP Report Entry point
"RTN","IBENDS1",13,0)
 N IBEOUT,IBEION
"RTN","IBENDS1",14,0)
 S IBEOUT=0
"RTN","IBENDS1",15,0)
 F  Q:$G(IBEOUT)  D
"RTN","IBENDS1",16,0)
 .D MAIN Q:IBEOUT
"RTN","IBENDS1",17,0)
 .N DIR W !!
"RTN","IBENDS1",18,0)
 .S DIR(0)="Y",DIR("B")="Y",DIR("A")="Run report again" D ^DIR
"RTN","IBENDS1",19,0)
 .S:X'="Y" IBEOUT=1
"RTN","IBENDS1",20,0)
 Q
"RTN","IBENDS1",21,0)
 ;
"RTN","IBENDS1",22,0)
MAIN ; Driver loop
"RTN","IBENDS1",23,0)
 N IBESUM,IBEMUA,IBESTOP,IBEOUTP
"RTN","IBENDS1",24,0)
 S IBESTOP=0
"RTN","IBENDS1",25,0)
 ;
"RTN","IBENDS1",26,0)
 D CLEAR^VALM1
"RTN","IBENDS1",27,0)
 ;
"RTN","IBENDS1",28,0)
 W !!?2,"This report will print Plan Types from the TYPE OF PLAN"
"RTN","IBENDS1",29,0)
 W !?2,"(#355.1) file and each Plan Type's mapping relationship"
"RTN","IBENDS1",30,0)
 W !?2,"to the Public Health Data Standards Consortium (PHDSC)"
"RTN","IBENDS1",31,0)
 w !?2,"Source of Payment in the MASTER TYPE OF PLAN (#355.99) file."
"RTN","IBENDS1",32,0)
 ;
"RTN","IBENDS1",33,0)
 ; Select (M)apped, (U)nmapped, or (A)ll entries from TYPE OF PLAN (#355.1) file.
"RTN","IBENDS1",34,0)
 W ! D MUA(.IBEMUA) I '$D(IBEMUA)!$G(IBEOUT) S IBEOUT=1 Q
"RTN","IBENDS1",35,0)
 ;
"RTN","IBENDS1",36,0)
 ; Select summary report or detailed
"RTN","IBENDS1",37,0)
 S IBESUM=$$SUMMARY I 'IBESUM Q
"RTN","IBENDS1",38,0)
 ;
"RTN","IBENDS1",39,0)
 ; Select output format
"RTN","IBENDS1",40,0)
 S IBEOUTP=$$OUT I IBESTOP Q
"RTN","IBENDS1",41,0)
 ;
"RTN","IBENDS1",42,0)
 ; Select device
"RTN","IBENDS1",43,0)
 I $$SELDEV()!IBESTOP Q
"RTN","IBENDS1",44,0)
 ;
"RTN","IBENDS1",45,0)
 I IBEOUTP="R" W !!,"<*> please wait <*>"
"RTN","IBENDS1",46,0)
 U IO D DQ
"RTN","IBENDS1",47,0)
 ;
"RTN","IBENDS1",48,0)
 Q
"RTN","IBENDS1",49,0)
 ;
"RTN","IBENDS1",50,0)
DQ ;  report (queue) starts here
"RTN","IBENDS1",51,0)
 N IBETOPI,IBEMTOPI,IBETOP0,IBEMTOP0,IBENAME
"RTN","IBENDS1",52,0)
 ;
"RTN","IBENDS1",53,0)
 K ^TMP($J,"IBENDS1")
"RTN","IBENDS1",54,0)
 ;  build list of plan types
"RTN","IBENDS1",55,0)
 S IBETOPI=0 F  S IBETOPI=$O(^IBE(355.1,IBETOPI)) Q:'IBETOPI  D
"RTN","IBENDS1",56,0)
 .S IBETOP0=$G(^IBE(355.1,IBETOPI,0)),IBEMTOPI=$P(IBETOP0,"^",5)
"RTN","IBENDS1",57,0)
 .I $G(IBEMUA)="U",$G(IBEMTOPI) Q
"RTN","IBENDS1",58,0)
 .I $G(IBEMUA)="M",'$G(IBEMTOPI) Q
"RTN","IBENDS1",59,0)
 .S IBEMTOP0=$S($G(IBEMTOPI):$G(^IBEMTOP(355.99,+IBEMTOPI,0)),1:"Not Mapped")
"RTN","IBENDS1",60,0)
 .I IBEMTOPI S $P(IBEMTOP0,"^",4)=IBEMTOPI
"RTN","IBENDS1",61,0)
 .S IBENAME=$P(IBETOP0,"^")
"RTN","IBENDS1",62,0)
 .S ^TMP($J,"IBENDS1",IBENAME,IBETOPI,"TOP")=$G(IBETOP0)
"RTN","IBENDS1",63,0)
 .S ^TMP($J,"IBENDS1",IBENAME,IBETOPI,"MTOP")=$G(IBEMTOP0)
"RTN","IBENDS1",64,0)
 ;
"RTN","IBENDS1",65,0)
 D PRINT
"RTN","IBENDS1",66,0)
 ;
"RTN","IBENDS1",67,0)
 D ^%ZISC
"RTN","IBENDS1",68,0)
 K ^TMP($J,"IBENDS1")
"RTN","IBENDS1",69,0)
 Q
"RTN","IBENDS1",70,0)
 ;
"RTN","IBENDS1",71,0)
PRINT ; Print output
"RTN","IBENDS1",72,0)
 N MAXCNT,IBESTOP,IBEPGCNT,IBEHDR,CRT,IBCNT
"RTN","IBENDS1",73,0)
 I IOST["C-" S MAXCNT=IOSL-10,CRT=1
"RTN","IBENDS1",74,0)
 E  S MAXCNT=IOSL-6,CRT=0
"RTN","IBENDS1",75,0)
 I IBESUM=1 S MAXCNT=MAXCNT+5
"RTN","IBENDS1",76,0)
 S IBEPGCNT=0,IBESTOP=0
"RTN","IBENDS1",77,0)
 ;
"RTN","IBENDS1",78,0)
 I '$D(^TMP($J,"IBENDS1")) D HEADER W !!!?5,"No Data Found" Q
"RTN","IBENDS1",79,0)
 ;
"RTN","IBENDS1",80,0)
 N IBETOPI,IBENAME
"RTN","IBENDS1",81,0)
 S IBENAME="" F IBCNT=1:1 S IBENAME=$O(^TMP($J,"IBENDS1",IBENAME)) Q:IBENAME=""!IBESTOP  D
"RTN","IBENDS1",82,0)
 .S IBETOPI=0 F  S IBETOPI=$O(^TMP($J,"IBENDS1",IBENAME,IBETOPI)) Q:'IBETOPI!IBESTOP  D
"RTN","IBENDS1",83,0)
 ..D PRINT2(IBENAME,IBETOPI)
"RTN","IBENDS1",84,0)
 Q
"RTN","IBENDS1",85,0)
 ;
"RTN","IBENDS1",86,0)
PRINT2(IBENAME,IBETOPI)  ; Continue printing output
"RTN","IBENDS1",87,0)
 N IBETOP0,IBEMTOP0,IBECT,IBECTS,IBECTX,IBTOPST
"RTN","IBENDS1",88,0)
 N IBEMTST,IBEMTED,IBEMTOPI,IBEMTEDI,IBEMPAR,IBEMPARX
"RTN","IBENDS1",89,0)
 N IBEMREPL,IBEMREPX,IBEMV0
"RTN","IBENDS1",90,0)
 ;
"RTN","IBENDS1",91,0)
 I $G(IBEOUTP)="E" D DELIM(IBENAME,IBETOPI) Q
"RTN","IBENDS1",92,0)
 ;
"RTN","IBENDS1",93,0)
 I ($Y+1>MAXCNT)!'IBEPGCNT D HEADER Q:IBESTOP
"RTN","IBENDS1",94,0)
 S IBETOP0=$G(^TMP($J,"IBENDS1",IBENAME,IBETOPI,"TOP"))
"RTN","IBENDS1",95,0)
 S IBTOPST=$P(IBETOP0,"^",4),IBTOPST=$S(IBTOPST:"INACTIVE",1:"ACTIVE")
"RTN","IBENDS1",96,0)
 D PRINTOP(IBENAME,IBETOPI)
"RTN","IBENDS1",97,0)
 ;
"RTN","IBENDS1",98,0)
 Q:'IBEMTOPI
"RTN","IBENDS1",99,0)
 I $G(IBESUM)=2 D
"RTN","IBENDS1",100,0)
 .S IBEMTED=$$NOW^XLFDT,IBEMTED=$O(^IBEMTOP(355.99,IBEMTOPI,"TERMSTATUS","B",IBEMTED),-1)
"RTN","IBENDS1",101,0)
 .I IBEMTED D  ; This should always be true, if data came from STS MFS process
"RTN","IBENDS1",102,0)
 ..S IBEMTEDI="",IBEMTEDI=$O(^IBEMTOP(355.99,IBEMTOPI,"TERMSTATUS","B",IBEMTED,IBEMTEDI))
"RTN","IBENDS1",103,0)
 ..S IBEMTST=$P(^IBEMTOP(355.99,IBEMTOPI,"TERMSTATUS",IBEMTEDI,0),"^",2)
"RTN","IBENDS1",104,0)
 ..W ?22,"  PHDSC Status: ",$S(IBEMTST:"ACTIVE",1:"INACTIVE")
"RTN","IBENDS1",105,0)
 .S IBEMPAR=$P(IBEMTOP0,"^",3) I IBEMPAR S IBEMPARX=$P($G(^IBEMTOP(355.99,IBEMPAR,0)),"^")
"RTN","IBENDS1",106,0)
 .I $L($G(IBEMPARX)) W !,"PHDSC Parent: ",IBEMPARX
"RTN","IBENDS1",107,0)
 .S IBEMV0=$G(^IBEMTOP(355.99,IBEMTOPI,"VUID"))
"RTN","IBENDS1",108,0)
 .S IBEMREPL=$P(IBEMV0,"^",3) I IBEMREPL S IBEMREPX=$P($G(^IBEMTOP(355.99,IBEMREPL,0)),"^")
"RTN","IBENDS1",109,0)
 .I $L($G(IBEMREPX)) W !,"MTOP PHDSC Replaced By: ",IBEMREPX
"RTN","IBENDS1",110,0)
 Q
"RTN","IBENDS1",111,0)
 ;
"RTN","IBENDS1",112,0)
MUA(IBEMUA) ; Select (M)apped, (U)nmapped, or(A)ll - entries from 355.1 mapped to 355.99
"RTN","IBENDS1",113,0)
 N DIR,DIRUT,Y
"RTN","IBENDS1",114,0)
 W ! S DIR(0)="SAO^M:(M)apped;U:(U)nmapped;A:(A)ll"
"RTN","IBENDS1",115,0)
 S DIR("?")="Enter ^ to exit"
"RTN","IBENDS1",116,0)
 S DIR("A",1)="Run the report for"
"RTN","IBENDS1",117,0)
 S DIR("A")="(M)apped, (U)nmapped, or (A)ll Type of Plan entries: ",DIR("B")="A" D ^DIR
"RTN","IBENDS1",118,0)
 I $D(DIRUT) S IBEOUT=1 Q
"RTN","IBENDS1",119,0)
 S IBEMUA=Y
"RTN","IBENDS1",120,0)
 Q
"RTN","IBENDS1",121,0)
 ;
"RTN","IBENDS1",122,0)
SUMMARY() ;  ask to print detailed or summary report
"RTN","IBENDS1",123,0)
 N DIR,DIRUT,X,Y
"RTN","IBENDS1",124,0)
 S DIR(0)="SOA^D:Detailed;S:Summary;",DIR("B")="Summary"
"RTN","IBENDS1",125,0)
 S DIR("A")="Type of report to print: "
"RTN","IBENDS1",126,0)
 W ! D ^DIR
"RTN","IBENDS1",127,0)
 I $D(DIRUT) S IBESTOP=1 Q 0
"RTN","IBENDS1",128,0)
 Q $S(Y="S":1,Y="D":2,1:0)
"RTN","IBENDS1",129,0)
 ;
"RTN","IBENDS1",130,0)
OUT() ; select Excel or Report format
"RTN","IBENDS1",131,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,Y
"RTN","IBENDS1",132,0)
 W !
"RTN","IBENDS1",133,0)
 S DIR(0)="SA^E:Excel;R:Report"
"RTN","IBENDS1",134,0)
 S DIR("A")="(E)xcel Format or (R)eport Format: "
"RTN","IBENDS1",135,0)
 S DIR("B")="Report"
"RTN","IBENDS1",136,0)
 D ^DIR I $D(DIRUT) S IBESTOP=1 Q ""
"RTN","IBENDS1",137,0)
 Q Y
"RTN","IBENDS1",138,0)
 ;
"RTN","IBENDS1",139,0)
DELIM(IBENAME,IBETOPI)  ; Print output in "^" delimited format
"RTN","IBENDS1",140,0)
 ; Print data in (E)xcel format, e.g., "data^data^data"
"RTN","IBENDS1",141,0)
 N IBSTRING,IBABB,IBCATX,IBTOPST
"RTN","IBENDS1",142,0)
 N IBMCOD,IBMNAM,IBMSTAT,IBMAP
"RTN","IBENDS1",143,0)
 I IBCNT=1 D
"RTN","IBENDS1",144,0)
 .I IBESUM=2 W !,"TYPE OF PLAN NAME^PLAN ABBREVIATION^PLAN STATUS^MAJOR CATEGORY^MAPPED/NOT MAPPED^MTOP PHDSC NAME^MTOP PHDSC CODE^MTOP PHDSC STATUS^PARENT^REPLACED BY"
"RTN","IBENDS1",145,0)
 .I IBESUM=1 W !,"TYPE OF PLAN NAME^MAPPED/NOT MAPPED^MTOP PHDSC NAME"
"RTN","IBENDS1",146,0)
 S IBETOP0=$G(^TMP($J,"IBENDS1",IBENAME,IBETOPI,"TOP"))
"RTN","IBENDS1",147,0)
 S IBTOPST=$P(IBETOP0,"^",4),IBTOPST=$S(IBTOPST:"INACTIVE",1:"ACTIVE")
"RTN","IBENDS1",148,0)
 S IBABB=$P(IBETOP0,"^",2)
"RTN","IBENDS1",149,0)
 S IBECT=$P(IBETOP0,"^",3) D
"RTN","IBENDS1",150,0)
 .N IBECTS,IBERR
"RTN","IBENDS1",151,0)
 .S IBCATX=""
"RTN","IBENDS1",152,0)
 .D FIND^DIC(355.1,,".01;.03","A","`"_+$G(IBETOPI),,,,,"IBECTS","IBERR")
"RTN","IBENDS1",153,0)
 .I $G(IBENAME)=$G(IBECTS("DILIST","ID",1,.01)) S IBCATX=$G(IBECTS("DILIST","ID",1,.03))
"RTN","IBENDS1",154,0)
 S IBEMTOP0=$G(^TMP($J,"IBENDS1",IBENAME,IBETOPI,"MTOP"))
"RTN","IBENDS1",155,0)
 S IBEMTOPI=+$P(IBEMTOP0,"^",4)
"RTN","IBENDS1",156,0)
 S IBMNAM=$P(IBEMTOP0,"^"),IBMCOD=$P(IBEMTOP0,"^",2)
"RTN","IBENDS1",157,0)
 S IBMAP=$S(IBEMTOPI:"MAPPED",1:"NOT MAPPED")
"RTN","IBENDS1",158,0)
 I 'IBEMTOPI D  Q
"RTN","IBENDS1",159,0)
 .I IBESUM=2 S IBSTRING=IBENAME_"^"_IBABB_"^"_IBTOPST_"^"_IBCATX_"^"_IBMAP
"RTN","IBENDS1",160,0)
 .I IBESUM'=2 S IBSTRING=IBENAME_"^"_IBMAP
"RTN","IBENDS1",161,0)
 .W !,IBSTRING
"RTN","IBENDS1",162,0)
 S IBEMTED=$$NOW^XLFDT,IBEMTED=$O(^IBEMTOP(355.99,IBEMTOPI,"TERMSTATUS","B",IBEMTED),-1)
"RTN","IBENDS1",163,0)
 S IBEMTEDI="",IBEMTEDI=$O(^IBEMTOP(355.99,IBEMTOPI,"TERMSTATUS","B",IBEMTED,IBEMTEDI))
"RTN","IBENDS1",164,0)
 S IBEMTST=$P(^IBEMTOP(355.99,IBEMTOPI,"TERMSTATUS",IBEMTEDI,0),"^",2)
"RTN","IBENDS1",165,0)
 S IBMSTAT=$S(IBEMTST:"ACTIVE",1:"INACTIVE")
"RTN","IBENDS1",166,0)
 S IBEMPAR=+$P(IBEMTOP0,"^",3)
"RTN","IBENDS1",167,0)
 S IBEMPARX=$P($G(^IBEMTOP(355.99,IBEMPAR,0)),"^")
"RTN","IBENDS1",168,0)
 S IBEMV0=$G(^IBEMTOP(355.99,IBEMTOPI,"VUID"))
"RTN","IBENDS1",169,0)
 S IBEMREPL=+$P(IBEMV0,"^",3)
"RTN","IBENDS1",170,0)
 S IBEMREPX=$P($G(^IBEMTOP(355.99,IBEMREPL,0)),"^")
"RTN","IBENDS1",171,0)
 I IBESUM=2 S IBSTRING=IBENAME_"^"_IBABB_"^"_IBTOPST_"^"_IBCATX_"^"_IBMAP_"^"_IBMNAM_"^"_IBMCOD_"^"_IBMSTAT_"^"_IBEMPARX_"^"_IBEMREPX
"RTN","IBENDS1",172,0)
 I IBESUM'=2 S IBSTRING=IBENAME_"^"_IBMAP_"^"_IBMNAM
"RTN","IBENDS1",173,0)
 W !,IBSTRING
"RTN","IBENDS1",174,0)
 Q
"RTN","IBENDS1",175,0)
 ;
"RTN","IBENDS1",176,0)
SELDEV()  ; Prompt for output device, return 1 if queued
"RTN","IBENDS1",177,0)
 I IBEOUTP="E" D
"RTN","IBENDS1",178,0)
 .N DIR,X,Y
"RTN","IBENDS1",179,0)
 .S DIR("A",1)=""
"RTN","IBENDS1",180,0)
 .S DIR("A",2)="     ************************************************************"
"RTN","IBENDS1",181,0)
 .S DIR("A",3)="     **  You selected a Delimited report. Please verify you    **"
"RTN","IBENDS1",182,0)
 .S DIR("A",4)="     **  you have turned logging on to capture the output.     **"
"RTN","IBENDS1",183,0)
 .S DIR("A",5)="     **                                                        **"
"RTN","IBENDS1",184,0)
 .S DIR("A",6)="     **  To avoid undesired wrapping, enter '0;199;999' at     **"
"RTN","IBENDS1",185,0)
 .S DIR("A",7)="     **  the 'DEVICE:' prompt. The Terminal Session display    **"
"RTN","IBENDS1",186,0)
 .S DIR("A",8)="     **  may need to be set to 199 columns.                    **"
"RTN","IBENDS1",187,0)
 .S DIR("A",9)="     ************************************************************"
"RTN","IBENDS1",188,0)
 .S DIR("A",10)=""
"RTN","IBENDS1",189,0)
 .S DIR("A",11)="",DIR("A",12)=""
"RTN","IBENDS1",190,0)
 .S DIR("A")=" Press return to continue"
"RTN","IBENDS1",191,0)
 .S DIR(0)="EA" D ^DIR W !
"RTN","IBENDS1",192,0)
 ;
"RTN","IBENDS1",193,0)
 N IBEDONE
"RTN","IBENDS1",194,0)
 W !,"You may queue this report to print at a later time.",!
"RTN","IBENDS1",195,0)
 F  Q:$G(IBESTOP)!$G(IBEDONE)  D
"RTN","IBENDS1",196,0)
 .K %ZIS,IOP,POP,ZTSK N I S IBEION=$I,%ZIS="QM"
"RTN","IBENDS1",197,0)
 .D ^%ZIS K %ZIS
"RTN","IBENDS1",198,0)
 .I POP S IOP=IBEION D ^%ZIS K IOP,IBEION D  Q
"RTN","IBENDS1",199,0)
 ..N DIR,X,Y
"RTN","IBENDS1",200,0)
 ..S DIR(0)="YA",DIR("A",1)="  ** No Device Selected **",DIR("A")="Select a different device? (Y/N) " D ^DIR
"RTN","IBENDS1",201,0)
 ..S:'Y IBESTOP=1
"RTN","IBENDS1",202,0)
 .S IBEDONE=1
"RTN","IBENDS1",203,0)
 I $D(IO("Q")) D  Q 1
"RTN","IBENDS1",204,0)
 .N ZTDESC,ZTSAVE,ZTRTN
"RTN","IBENDS1",205,0)
 .S ZTDESC="Type of Plan to MTOP Mapping Report",ZTRTN="DQ^IBENDS1"
"RTN","IBENDS1",206,0)
 .S ZTSAVE("DATE*")="",ZTSAVE("IBE*")="",ZTSAVE("ZTREQ")="@"
"RTN","IBENDS1",207,0)
 .K IO("Q") D ^%ZTLOAD W:$D(ZTSK) !,"Report is Queued to print!" K ZTSK
"RTN","IBENDS1",208,0)
 Q:$G(IBESTOP) -1
"RTN","IBENDS1",209,0)
 Q 0
"RTN","IBENDS1",210,0)
 ;
"RTN","IBENDS1",211,0)
HEADER ; page break and report header information
"RTN","IBENDS1",212,0)
 N IBEHDR,IBETAB,IBESPACE
"RTN","IBENDS1",213,0)
 S IBESTOP=0
"RTN","IBENDS1",214,0)
 I CRT,IBEPGCNT>0,'$D(ZTQUEUED) D  Q:IBESTOP
"RTN","IBENDS1",215,0)
 .N DIR,LIN
"RTN","IBENDS1",216,0)
 .I MAXCNT<51 F LIN=1:1:(MAXCNT-$Y) W !
"RTN","IBENDS1",217,0)
 .W !
"RTN","IBENDS1",218,0)
 .S DIR(0)="E" D ^DIR K DIR
"RTN","IBENDS1",219,0)
 .I 'Y S IBESTOP=1 Q
"RTN","IBENDS1",220,0)
 S IBEPGCNT=IBEPGCNT+1
"RTN","IBENDS1",221,0)
 W @IOF,!
"RTN","IBENDS1",222,0)
 S $P(IBESPACE," ",132)=""
"RTN","IBENDS1",223,0)
 S IBEHDR=" Type Of Plan Map to Master Type of Plan (MTOP)    "
"RTN","IBENDS1",224,0)
 S IBEHDR(1)="    PHDSC Source of Payment Typology Report"
"RTN","IBENDS1",225,0)
 S IBEHDR=IBEHDR_"Page: "_IBEPGCNT,IBETAB=132-$L(IBEHDR)-1
"RTN","IBENDS1",226,0)
 W IBEHDR
"RTN","IBENDS1",227,0)
 W !,IBEHDR(1)
"RTN","IBENDS1",228,0)
 Q
"RTN","IBENDS1",229,0)
 ;
"RTN","IBENDS1",230,0)
PRINTOP(IBENAME,IBETOPI)  ; Print Type of Plan file (#355.1) entry
"RTN","IBENDS1",231,0)
 W !!,"Type of Plan: ",$P(IBETOP0,"^")
"RTN","IBENDS1",232,0)
 I $G(IBESUM)=2 D
"RTN","IBENDS1",233,0)
 .W !,"Abbreviation: ",$P(IBETOP0,"^",2)
"RTN","IBENDS1",234,0)
 .W ?30,"Status: ",IBTOPST
"RTN","IBENDS1",235,0)
 .S IBECT=$P(IBETOP0,"^",3) I $L(IBECT) D
"RTN","IBENDS1",236,0)
 ..D FIELD^DID(355.1,.03,"","POINTER","IBECTS")
"RTN","IBENDS1",237,0)
 ..S IBECTX=$P(IBECTS("POINTER"),+IBECT_":",2),IBECTX=$P(IBECTX,";")
"RTN","IBENDS1",238,0)
 ..I $L(IBECTX) W !?4,"Category: ",IBECTX
"RTN","IBENDS1",239,0)
 S IBEMTOP0=$G(^TMP($J,"IBENDS1",IBENAME,IBETOPI,"MTOP"))
"RTN","IBENDS1",240,0)
 S IBEMTOPI=+$P(IBEMTOP0,"^",4)
"RTN","IBENDS1",241,0)
 W !?2,"Mapped to PHDSC Source of Payment?: ",$S(IBEMTOPI:"YES",1:"NO")
"RTN","IBENDS1",242,0)
 Q:'IBEMTOPI
"RTN","IBENDS1",243,0)
 W !?2,"PHDSC Name: ",$P(^TMP($J,"IBENDS1",IBENAME,IBETOPI,"MTOP"),"^")
"RTN","IBENDS1",244,0)
 W !?2,"PHDSC Code: ",$P(^TMP($J,"IBENDS1",IBENAME,IBETOPI,"MTOP"),"^",2)
"RTN","IBENDS1",245,0)
 Q
"SEC","^DD",355.99,355.99,2,9)

"SEC","^DIC",355.99,355.99,0,"AUDIT")
@
"SEC","^DIC",355.99,355.99,0,"DD")
@
"SEC","^DIC",355.99,355.99,0,"DEL")
@
"SEC","^DIC",355.99,355.99,0,"LAYGO")
@
"SEC","^DIC",355.99,355.99,0,"RD")

"SEC","^DIC",355.99,355.99,0,"WR")
@
"VER")
8.0^22.2
"^DD",355.1,355.1,15,0)
MASTER TYPE OF PLAN^*P355.99'^IBEMTOP(355.99,^0;5^S DIC("S")="I '$$SCREEN^XTID(355.99,.01,+Y_"","")" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",355.1,355.1,15,1,0)
^.1
"^DD",355.1,355.1,15,1,1,0)
355.1^MTOP
"^DD",355.1,355.1,15,1,1,1)
S ^IBE(355.1,"MTOP",$E(X,1,30),DA)=""
"^DD",355.1,355.1,15,1,1,2)
K ^IBE(355.1,"MTOP",$E(X,1,30),DA)
"^DD",355.1,355.1,15,1,1,"%D",0)
^^1^1^3170717^
"^DD",355.1,355.1,15,1,1,"%D",1,0)
This cross references MASTER TYPE OF PLAN (#15) field entries. 
"^DD",355.1,355.1,15,1,1,"DT")
3170717
"^DD",355.1,355.1,15,3)
Enter the Master Type of Plan (MTOP) PHDSC Source of Payment associated with the Type of Plan. NOTE: MTOP names are case sensitive.
"^DD",355.1,355.1,15,12)
Only active Master Type of Plan entries may be selected.
"^DD",355.1,355.1,15,12.1)
S DIC("S")="I '$$SCREEN^XTID(355.99,.01,+Y_"","")"
"^DD",355.1,355.1,15,21,0)
^.001^2^2^3170830^^^^
"^DD",355.1,355.1,15,21,1,0)
This field points to the MASTER TYPE OF PLAN file (#355.99). This is a 
"^DD",355.1,355.1,15,21,2,0)
link to the national standard names for source of payment.
"^DD",355.1,355.1,15,"DT")
3170830
"^DD",355.99,355.99,0)
FIELD^^99.991^7
"^DD",355.99,355.99,0,"DT")
3170809
"^DD",355.99,355.99,0,"ID","W1")
W "   ",$P(^(0),U,2)
"^DD",355.99,355.99,0,"IX","AREPLACETERM",355.99,99.97)

"^DD",355.99,355.99,0,"IX","AVUID",355.99,99.99)

"^DD",355.99,355.99,0,"IX","B",355.99,.01)

"^DD",355.99,355.99,0,"IX","C",355.99,1)

"^DD",355.99,355.99,0,"NM","MASTER TYPE OF PLAN")

"^DD",355.99,355.99,0,"PT",355.1,15)

"^DD",355.99,355.99,0,"PT",355.99,2)

"^DD",355.99,355.99,0,"PT",355.99,99.97)

"^DD",355.99,355.99,.01,0)
PLAN NAME^RFJ150a^^0;1^K:$L(X)>150!($L(X)<3) X
"^DD",355.99,355.99,.01,1,0)
^.1
"^DD",355.99,355.99,.01,1,1,0)
355.99^B
"^DD",355.99,355.99,.01,1,1,1)
S ^IBEMTOP(355.99,"B",$E(X,1,150),DA)=""
"^DD",355.99,355.99,.01,1,1,2)
K ^IBEMTOP(355.99,"B",$E(X,1,150),DA)
"^DD",355.99,355.99,.01,3)
Answer must be 3-150 characters in length.
"^DD",355.99,355.99,.01,7.5)
I $G(DIC(0))["L",'$D(XUMF) K X D EN^DDIOL("Entries must be edited via the Master File Server (MFS).","","!?5,$C(7)")
"^DD",355.99,355.99,.01,9)
^
"^DD",355.99,355.99,.01,21,0)
^.001^5^5^3170621^^
"^DD",355.99,355.99,.01,21,1,0)
This is a standard Source of Payment published by the Public Health Data
"^DD",355.99,355.99,.01,21,2,0)
Standards Consortium (PHDSC).
"^DD",355.99,355.99,.01,21,3,0)
 
"^DD",355.99,355.99,.01,21,4,0)
This is used to associate entries from the TYPE OF PLAN (#355.1) file
"^DD",355.99,355.99,.01,21,5,0)
to standard PHDSC Source of Payment codes and should not be edited.
"^DD",355.99,355.99,.01,"AUDIT")
y
"^DD",355.99,355.99,.01,"DEL",1,0)
D:'$D(XUMF) EN^DDIOL("Entries must be inactivated via the Master File Server (MFS).","","!?5,$C(7)")
"^DD",355.99,355.99,.01,"DT")
3170812
"^DD",355.99,355.99,.01,"LAYGO",1,0)
D:'$D(XUMF) EN^DDIOL("Entries must be added via the Master File Server (MFS).","","!?5,$C(7)") I $D(XUMF)
"^DD",355.99,355.99,1,0)
PHDSC SOURCE OF PAYMENT CODE^RNJ8,0^^0;2^K:+X'=X!(X>99999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",355.99,355.99,1,1,0)
^.1
"^DD",355.99,355.99,1,1,1,0)
355.99^C
"^DD",355.99,355.99,1,1,1,1)
S ^IBEMTOP(355.99,"C",$E(X,1,30),DA)=""
"^DD",355.99,355.99,1,1,1,2)
K ^IBEMTOP(355.99,"C",$E(X,1,30),DA)
"^DD",355.99,355.99,1,1,1,"%D",0)
^.101^3^3^3170811^^
"^DD",355.99,355.99,1,1,1,"%D",1,0)
This cross references the Public Health Data Standards Consortium (PHDSC) 
"^DD",355.99,355.99,1,1,1,"%D",2,0)
Source of Payment name by the code stored in the PHDSC SOURCE OF PAYMENT
"^DD",355.99,355.99,1,1,1,"%D",3,0)
CODE (#1) field.
"^DD",355.99,355.99,1,1,1,"DT")
3170622
"^DD",355.99,355.99,1,3)
Type a number between 1 and 99999999, 0 decimal digits.
"^DD",355.99,355.99,1,9)
^
"^DD",355.99,355.99,1,21,0)
^.001^2^2^3170710^^^
"^DD",355.99,355.99,1,21,1,0)
This is the Public Health Standards Consortium (PHDSC) Source of Payment 
"^DD",355.99,355.99,1,21,2,0)
code.
"^DD",355.99,355.99,1,"DT")
3170809
"^DD",355.99,355.99,2,0)
PARENT^P355.99^IBEMTOP(355.99,^0;3^Q
"^DD",355.99,355.99,2,3)
Enter the Parent PHDSC Code associated with this entry.
"^DD",355.99,355.99,2,21,0)
^.001^9^9^3170615^^^^
"^DD",355.99,355.99,2,21,1,0)
This is the MASTER TYPE OF PLAN that represents the next higher, or
"^DD",355.99,355.99,2,21,2,0)
broader, category to which this MASTER TYPE OF PLAN entry belongs.
"^DD",355.99,355.99,2,21,3,0)
 
"^DD",355.99,355.99,2,21,4,0)
An MASTER TYPE OF PLAN's parent code may be computed from its PHDSC 
"^DD",355.99,355.99,2,21,5,0)
SOURCE OF PAYMENT CODE by truncating the code's last digit. 
"^DD",355.99,355.99,2,21,6,0)
 
"^DD",355.99,355.99,2,21,7,0)
Example: 
"^DD",355.99,355.99,2,21,8,0)
 PHDSC SOURCE OF PAYMENT CODE=31, PARENT CODE=3
"^DD",355.99,355.99,2,21,9,0)
 PHDSC SOURCE OF PAYMENT CODE=123, PARENT CODE=12. 
"^DD",355.99,355.99,2,"DT")
3170809
"^DD",355.99,355.99,99.97,0)
REPLACED BY VHA STANDARD TERM^P355.99'^IBEMTOP(355.99,^VUID;3^Q
"^DD",355.99,355.99,99.97,1,0)
^.1
"^DD",355.99,355.99,99.97,1,1,0)
355.99^AREPLACETERM
"^DD",355.99,355.99,99.97,1,1,1)
S ^IBEMTOP(355.99,"AREPLACETERM",$E(X,1,30),DA)=""
"^DD",355.99,355.99,99.97,1,1,2)
K ^IBEMTOP(355.99,"AREPLACETERM",$E(X,1,30),DA)
"^DD",355.99,355.99,99.97,1,1,"%D",0)
^.101^2^2^3170804^^^
"^DD",355.99,355.99,99.97,1,1,"%D",1,0)
This cross reference can be used to identify the replacement entries 
"^DD",355.99,355.99,99.97,1,1,"%D",2,0)
associated with a Term/Concept.
"^DD",355.99,355.99,99.97,1,1,"DT")
3170606
"^DD",355.99,355.99,99.97,3)
Enter the Term/Concept that replaces this entry.
"^DD",355.99,355.99,99.97,9)
^
"^DD",355.99,355.99,99.97,21,0)
^.001^4^4^3170816^^
"^DD",355.99,355.99,99.97,21,1,0)
This is populated when one Term/Concept replaces another Term/Concept. 
"^DD",355.99,355.99,99.97,21,2,0)
This field is controlled by standardization and should only be changed by 
"^DD",355.99,355.99,99.97,21,3,0)
standardization processes. This field contains a pointer to a VHA 
"^DD",355.99,355.99,99.97,21,4,0)
standard term that replaces this entry.
"^DD",355.99,355.99,99.97,"DT")
3170606
"^DD",355.99,355.99,99.98,0)
MASTER ENTRY FOR VUID^RS^1:YES;0:NO;^VUID;2^Q
"^DD",355.99,355.99,99.98,3)
Enter YES if this is the Master entry.
"^DD",355.99,355.99,99.98,9)
^
"^DD",355.99,355.99,99.98,21,0)
^^2^2^3170606^
"^DD",355.99,355.99,99.98,21,1,0)
This field identifies the Master Entry for a VUID associated with a 
"^DD",355.99,355.99,99.98,21,2,0)
Term/Concept.
"^DD",355.99,355.99,99.98,"DT")
3170606
"^DD",355.99,355.99,99.99,0)
VUID^RFJ20aIX^^VUID;1^K:$L(X)>20!($L(X)<1)!'(X?1.20N) X
"^DD",355.99,355.99,99.99,1,0)
^.1
"^DD",355.99,355.99,99.99,1,1,0)
355.99^AVUID
"^DD",355.99,355.99,99.99,1,1,1)
S ^IBEMTOP(355.99,"AVUID",$E(X,1,30),DA)=""
"^DD",355.99,355.99,99.99,1,1,2)
K ^IBEMTOP(355.99,"AVUID",$E(X,1,30),DA)
"^DD",355.99,355.99,99.99,1,1,"%D",0)
^.101^1^1^3170728^^
"^DD",355.99,355.99,99.99,1,1,"%D",1,0)
This cross reference is by VHA Unique ID (VUID).
"^DD",355.99,355.99,99.99,1,1,"DT")
3170615
"^DD",355.99,355.99,99.99,3)
Answer must be 1-20 characters in length.
"^DD",355.99,355.99,99.99,9)
^
"^DD",355.99,355.99,99.99,21,0)
^.001^2^2^3170615^^
"^DD",355.99,355.99,99.99,21,1,0)
VHA Unique ID (VUID). A unique, arbitrarily-assigned integer assigned to 
"^DD",355.99,355.99,99.99,21,2,0)
reference terms VHA wide.
"^DD",355.99,355.99,99.99,"AUDIT")
y
"^DD",355.99,355.99,99.99,"DT")
3170615
"^DD",355.99,355.99,99.991,0)
EFFECTIVE DATE/TIME^355.9901DA^^TERMSTATUS;0
"^DD",355.99,355.99,99.991,9)
^
"^DD",355.99,355.99,99.991,21,0)
^.001^1^1^3170622^^^^
"^DD",355.99,355.99,99.991,21,1,0)
Describes the pair Status and Effective Date/Time for each reference term.
"^DD",355.99,355.9901,0)
EFFECTIVE DATE/TIME SUB-FIELD^^.02^2
"^DD",355.99,355.9901,0,"DT")
3170622
"^DD",355.99,355.9901,0,"IX","B",355.9901,.01)

"^DD",355.99,355.9901,0,"NM","EFFECTIVE DATE/TIME")

"^DD",355.99,355.9901,0,"UP")
355.99
"^DD",355.99,355.9901,.01,0)
EFFECTIVE DATE/TIME^RD^^0;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",355.99,355.9901,.01,1,0)
^.1
"^DD",355.99,355.9901,.01,1,1,0)
355.9901^B
"^DD",355.99,355.9901,.01,1,1,1)
S ^IBEMTOP(355.99,DA(1),"TERMSTATUS","B",$E(X,1,30),DA)=""
"^DD",355.99,355.9901,.01,1,1,2)
K ^IBEMTOP(355.99,DA(1),"TERMSTATUS","B",$E(X,1,30),DA)
"^DD",355.99,355.9901,.01,3)
Enter the Date/Time the status became effective.
"^DD",355.99,355.9901,.01,9)
^
"^DD",355.99,355.9901,.01,21,0)
^.001^2^2^3170622^^^^
"^DD",355.99,355.9901,.01,21,1,0)
This is the date/time when the status of the reference term was 
"^DD",355.99,355.9901,.01,21,2,0)
established.
"^DD",355.99,355.9901,.01,"DT")
3170622
"^DD",355.99,355.9901,.02,0)
STATUS^RS^0:INACTIVE;1:ACTIVE;^0;2^Q
"^DD",355.99,355.9901,.02,3)
Enter the Status of this term.
"^DD",355.99,355.9901,.02,9)
^
"^DD",355.99,355.9901,.02,21,0)
^.001^4^4^3170616^^^
"^DD",355.99,355.9901,.02,21,1,0)
The Status of a reference term is either 'ACTIVE' or 'INACTIVE'. If 
"^DD",355.99,355.9901,.02,21,2,0)
'ACTIVE', then the term will be accessible by end-users to document a 
"^DD",355.99,355.9901,.02,21,3,0)
particular patient event. If 'INACTIVE', then the term will only be 
"^DD",355.99,355.9901,.02,21,4,0)
accessible by the application to display legacy data.
"^DD",355.99,355.9901,.02,"DT")
3170616
"^DIC",355.99,355.99,0)
MASTER TYPE OF PLAN^355.99
"^DIC",355.99,355.99,0,"GL")
^IBEMTOP(355.99,
"^DIC",355.99,355.99,"%",0)
^1.005^^
"^DIC",355.99,355.99,"%D",0)
^1.001^11^11^3170829^^^^
"^DIC",355.99,355.99,"%D",1,0)
Master Type of Plan contains standard sources of payment from the the
"^DIC",355.99,355.99,"%D",2,0)
Public Health Data Standards Consortium (PHDSC).
"^DIC",355.99,355.99,"%D",3,0)
 
"^DIC",355.99,355.99,"%D",4,0)
Per VHA Directive 2005-044, this file has been "locked down" by Data 
"^DIC",355.99,355.99,"%D",5,0)
Standardization (DS).  The file definition (i.e. data dictionary) shall 
"^DIC",355.99,355.99,"%D",6,0)
not be modified.  All additions, changes and deletions to entries in the
"^DIC",355.99,355.99,"%D",7,0)
file shall be done by Enterprise Reference Terminology (ERT) using the
"^DIC",355.99,355.99,"%D",8,0)
Master File Server (MFS), provided by Common Services (CS).  Creating
"^DIC",355.99,355.99,"%D",9,0)
and/or editing locally defined fields in the file are not permitted.  Use
"^DIC",355.99,355.99,"%D",10,0)
of locally defined fields that were created prior to the VHA Directive's
"^DIC",355.99,355.99,"%D",11,0)
2005-044 effective date shall not be supported.
"^DIC",355.99,"B","MASTER TYPE OF PLAN",355.99)

"BLD",10063,6)
^555
**END**
**END**

