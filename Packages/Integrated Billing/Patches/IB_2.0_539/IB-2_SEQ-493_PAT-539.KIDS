Released IB*2*539 SEQ #493
Extracted from mail message
**KIDS**:IB*2.0*539^

**INSTALL NAME**
IB*2.0*539
"BLD",9869,0)
IB*2.0*539^INTEGRATED BILLING^0^3141124^y
"BLD",9869,1,0)
^^2^2^3141124^
"BLD",9869,1,1,0)
This patch will install the Cost-Based and Inter-agency billing rates
"BLD",9869,1,2,0)
into the Charge Item file (#363.2), with an effective date of 11/04/2014.
"BLD",9869,4,0)
^9.64PA^^0
"BLD",9869,6)
^422
"BLD",9869,6.3)
17
"BLD",9869,"ABPKG")
n
"BLD",9869,"INIT")
POST^IB20P539
"BLD",9869,"KRN",0)
^9.67PA^779.2^20
"BLD",9869,"KRN",.4,0)
.4
"BLD",9869,"KRN",.401,0)
.401
"BLD",9869,"KRN",.402,0)
.402
"BLD",9869,"KRN",.402,"NM",0)
^9.68A^^0
"BLD",9869,"KRN",.403,0)
.403
"BLD",9869,"KRN",.5,0)
.5
"BLD",9869,"KRN",.84,0)
.84
"BLD",9869,"KRN",3.6,0)
3.6
"BLD",9869,"KRN",3.8,0)
3.8
"BLD",9869,"KRN",9.2,0)
9.2
"BLD",9869,"KRN",9.8,0)
9.8
"BLD",9869,"KRN",9.8,"NM",0)
^9.68A^^0
"BLD",9869,"KRN",19,0)
19
"BLD",9869,"KRN",19,"NM",0)
^9.68A^^
"BLD",9869,"KRN",19.1,0)
19.1
"BLD",9869,"KRN",101,0)
101
"BLD",9869,"KRN",409.61,0)
409.61
"BLD",9869,"KRN",771,0)
771
"BLD",9869,"KRN",779.2,0)
779.2
"BLD",9869,"KRN",870,0)
870
"BLD",9869,"KRN",8989.51,0)
8989.51
"BLD",9869,"KRN",8989.52,0)
8989.52
"BLD",9869,"KRN",8994,0)
8994
"BLD",9869,"KRN","B",.4,.4)

"BLD",9869,"KRN","B",.401,.401)

"BLD",9869,"KRN","B",.402,.402)

"BLD",9869,"KRN","B",.403,.403)

"BLD",9869,"KRN","B",.5,.5)

"BLD",9869,"KRN","B",.84,.84)

"BLD",9869,"KRN","B",3.6,3.6)

"BLD",9869,"KRN","B",3.8,3.8)

"BLD",9869,"KRN","B",9.2,9.2)

"BLD",9869,"KRN","B",9.8,9.8)

"BLD",9869,"KRN","B",19,19)

"BLD",9869,"KRN","B",19.1,19.1)

"BLD",9869,"KRN","B",101,101)

"BLD",9869,"KRN","B",409.61,409.61)

"BLD",9869,"KRN","B",771,771)

"BLD",9869,"KRN","B",779.2,779.2)

"BLD",9869,"KRN","B",870,870)

"BLD",9869,"KRN","B",8989.51,8989.51)

"BLD",9869,"KRN","B",8989.52,8989.52)

"BLD",9869,"KRN","B",8994,8994)

"BLD",9869,"QUES",0)
^9.62^^
"BLD",9869,"REQB",0)
^9.611^^0
"INIT")
POST^IB20P539
"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^1^1
"PKG",200,20,1,0)
2^^IBAXDR
"PKG",200,20,1,1)

"PKG",200,20,"B",2,1)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321^2990406^2447
"PKG",200,22,1,"PAH",1,0)
539^3141124
"PKG",200,22,1,"PAH",1,1,0)
^^2^2^3141124
"PKG",200,22,1,"PAH",1,1,1,0)
This patch will install the Cost-Based and Inter-agency billing rates
"PKG",200,22,1,"PAH",1,1,2,0)
into the Charge Item file (#363.2), with an effective date of 11/04/2014.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","IB20P539")
0^^B37049724^n/a
"RTN","IB20P539",1,0)
IB20P539 ;ALB/CXW - IB*2*539 POST INIT: COST-BASED/INTERAGENCY RATE ; 11/18/2014
"RTN","IB20P539",2,0)
 ;;2.0;INTEGRATED BILLING;**539**;21-MAR-94;Build 17
"RTN","IB20P539",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","IB20P539",4,0)
 ; 
"RTN","IB20P539",5,0)
 ;
"RTN","IB20P539",6,0)
 ; Add FY2015 Cost Based and Interagency Charges to the Charge Master
"RTN","IB20P539",7,0)
 Q
"RTN","IB20P539",8,0)
POST ;
"RTN","IB20P539",9,0)
 N IBEFFDT,IBA,U S U="^"
"RTN","IB20P539",10,0)
 D MSG("    IB*2.0*539 Post-Install .....")
"RTN","IB20P539",11,0)
 S IBEFFDT=3141104 ; effective date of 11/04/2014
"RTN","IB20P539",12,0)
 D ADDCI(IBEFFDT)  ; add Charge Items (363.2) with new 66 rates
"RTN","IB20P539",13,0)
 D MSG("    IB*2*539 Post-Install Complete")
"RTN","IB20P539",14,0)
 Q
"RTN","IB20P539",15,0)
 ;
"RTN","IB20P539",16,0)
ADDCI(IBEFFDT) ; Add Charge Items (363.2) needs Charge Sets, pass in the effective date of the new charges
"RTN","IB20P539",17,0)
 N IBCHG,IBCNT,IBCNT1,IBCI,IBCS,IBDFLTDT,IBDT,IBFN,IBI,IBLN,IBRVCD,IBX,IBXRF,IBZ,DD,DO,DLAYGO,DIC,DIE,DA,DR,X,Y
"RTN","IB20P539",18,0)
 ; 
"RTN","IB20P539",19,0)
 D MSG("")
"RTN","IB20P539",20,0)
 S (IBCNT,IBCNT1)=0,IBDFLTDT=+$G(IBEFFDT)
"RTN","IB20P539",21,0)
 I 'IBDFLTDT D MSG("** Error: No Effective Date, No Charges Added") G CIQ
"RTN","IB20P539",22,0)
 ;
"RTN","IB20P539",23,0)
 F IBI=1:1 S IBLN=$P($T(CIF+IBI),";;",2) Q:+IBLN!(IBLN="")  I $E(IBLN)?1A D SETCI
"RTN","IB20P539",24,0)
 ;
"RTN","IB20P539",25,0)
 I +IBCNT1 D MSG(IBCNT1_" Duplicate Charge Items already exist, not re-added")
"RTN","IB20P539",26,0)
 ;
"RTN","IB20P539",27,0)
CIQ D MSG("      >> "_IBCNT_" Cost Based/Interagency Charge Items added (363.2).")
"RTN","IB20P539",28,0)
 D MSG("")
"RTN","IB20P539",29,0)
 Q
"RTN","IB20P539",30,0)
 ;
"RTN","IB20P539",31,0)
SETCI ; set Charge Item (duplicates based on item, CS, eff dt, rev cd)
"RTN","IB20P539",32,0)
 ;
"RTN","IB20P539",33,0)
 S IBCS=$P(IBLN,U,2),IBCS=+$O(^IBE(363.1,"B",IBCS,0)) I 'IBCS D MSG("** Error: Charge Set "_$P(IBLN,U,2)_" undefined") Q
"RTN","IB20P539",34,0)
 S IBCI=+$$MCCRUTL($P(IBLN,U,1),5) I 'IBCI D MSG("** Error: Bed Section "_$P(IBLN,U,1)_" undefined") Q
"RTN","IB20P539",35,0)
 S IBDT=IBDFLTDT I +$P(IBLN,U,3) S IBDT=+$P(IBLN,U,3)
"RTN","IB20P539",36,0)
 S IBRVCD=$$RVCD($P(IBLN,U,4))
"RTN","IB20P539",37,0)
 S IBCHG=+$P(IBLN,U,5)
"RTN","IB20P539",38,0)
 S IBXRF="AIVDTS"_IBCS
"RTN","IB20P539",39,0)
 ;
"RTN","IB20P539",40,0)
 S IBX=0 F  S IBX=$O(^IBA(363.2,IBXRF,IBCI,-IBDT,IBX)) Q:'IBX  S IBZ=$G(^IBA(363.2,IBX,0)) I $P(IBZ,U,6)=IBRVCD D
"RTN","IB20P539",41,0)
 . S IBCI=0,IBCNT1=IBCNT1+1 I +$P(IBZ,U,5)'=IBCHG D MSG("** Error: Item exists, wrong charge: "_IBLN)
"RTN","IB20P539",42,0)
 Q:'IBCI
"RTN","IB20P539",43,0)
 ;
"RTN","IB20P539",44,0)
 K DD,DO S DLAYGO=363.2,DIC="^IBA(363.2,",DIC(0)="L",X=IBCI_";DGCR(399.1," D FILE^DICN K DIC
"RTN","IB20P539",45,0)
 I Y<1 D MSG("** Error: when adding the charge item "_IBCS_" with rate "_IBCHG_" to the file, Log a Remedy ticket!") K X,Y Q
"RTN","IB20P539",46,0)
 S IBFN=+Y,IBCNT=IBCNT+1
"RTN","IB20P539",47,0)
 ;
"RTN","IB20P539",48,0)
 S DR=".02///"_IBCS_";.03///"_IBDT_";.05///"_IBCHG I +IBRVCD S DR=DR_";.06///"_IBRVCD
"RTN","IB20P539",49,0)
 S DIE="^IBA(363.2,",DA=+IBFN D ^DIE K DIE,DA,DR,X,Y
"RTN","IB20P539",50,0)
 Q
"RTN","IB20P539",51,0)
 ;
"RTN","IB20P539",52,0)
 ;
"RTN","IB20P539",53,0)
MCCRUTL(X,P) ; returns IFN of item in 399.1 if Name is found and piece P is true
"RTN","IB20P539",54,0)
 N IBX,IBY S IBY=""
"RTN","IB20P539",55,0)
 I $G(X)'="" S IBX=0 F  S IBX=$O(^DGCR(399.1,"B",X,IBX)) Q:'IBX  I $P($G(^DGCR(399.1,IBX,0)),U,+$G(P)) S IBY=IBX
"RTN","IB20P539",56,0)
 Q IBY
"RTN","IB20P539",57,0)
 ;
"RTN","IB20P539",58,0)
RVCD(RVCD) ; returns IFN if revenue code is valid and active
"RTN","IB20P539",59,0)
 N IBX,IBY S IBY=""
"RTN","IB20P539",60,0)
 I +$G(RVCD) S IBX=$G(^DGCR(399.2,+RVCD,0)) I +$P(IBX,U,3) S IBY=+RVCD
"RTN","IB20P539",61,0)
 Q IBY
"RTN","IB20P539",62,0)
 ;
"RTN","IB20P539",63,0)
MSG(IBA) ;
"RTN","IB20P539",64,0)
 D MES^XPDUTL(IBA)
"RTN","IB20P539",65,0)
 Q
"RTN","IB20P539",66,0)
 ;
"RTN","IB20P539",67,0)
CIF ; 66 Charge Items (363.2): Bedsection ^ Charge Set ^Effective Date ^ Revenue Code ^ Charge
"RTN","IB20P539",68,0)
 ;;     
"RTN","IB20P539",69,0)
TORT ;; Tortiously Liable All Inclusive 
"RTN","IB20P539",70,0)
 ;;        
"RTN","IB20P539",71,0)
 ;;ALCOHOL AND DRUG TREATMENT^TL-INPT (INCLUSIVE)^^^1363
"RTN","IB20P539",72,0)
 ;;BLIND REHABILITATION^TL-INPT (INCLUSIVE)^^^1641
"RTN","IB20P539",73,0)
 ;;GENERAL MEDICAL CARE^TL-INPT (INCLUSIVE)^^^3313
"RTN","IB20P539",74,0)
 ;;INTERMEDIATE CARE^TL-INPT (INCLUSIVE)^^^2249
"RTN","IB20P539",75,0)
 ;;NEUROLOGY^TL-INPT (INCLUSIVE)^^^3152
"RTN","IB20P539",76,0)
 ;;NURSING HOME CARE^TL-INPT (INCLUSIVE)^^^1082
"RTN","IB20P539",77,0)
 ;;POLYTRAUMA INPATIENT^TL-INPT (INCLUSIVE)^^^3217
"RTN","IB20P539",78,0)
 ;;PRRTP^TL-INPT (INCLUSIVE)^^^650
"RTN","IB20P539",79,0)
 ;;PSYCHIATRIC CARE^TL-INPT (INCLUSIVE)^^^1611
"RTN","IB20P539",80,0)
 ;;REHABILITATION MEDICINE^TL-INPT (INCLUSIVE)^^^2480
"RTN","IB20P539",81,0)
 ;;SPINAL CORD INJURY CARE^TL-INPT (INCLUSIVE)^^^2201
"RTN","IB20P539",82,0)
 ;;SURGICAL CARE^TL-INPT (INCLUSIVE)^^^5165
"RTN","IB20P539",83,0)
 ;;             
"RTN","IB20P539",84,0)
 ;; Tortiously Liable Non-Professional
"RTN","IB20P539",85,0)
 ;;ALCOHOL AND DRUG TREATMENT^TL-INPT (NPF)^^101^918
"RTN","IB20P539",86,0)
 ;;ALCOHOL AND DRUG TREATMENT^TL-INPT (NPF)^^240^315
"RTN","IB20P539",87,0)
 ;;BLIND REHABILITATION^TL-INPT (NPF)^^101^694
"RTN","IB20P539",88,0)
 ;;BLIND REHABILITATION^TL-INPT (NPF)^^240^815
"RTN","IB20P539",89,0)
 ;;GENERAL MEDICAL CARE^TL-INPT (NPF)^^101^2053
"RTN","IB20P539",90,0)
 ;;GENERAL MEDICAL CARE^TL-INPT (NPF)^^240^863
"RTN","IB20P539",91,0)
 ;;INTERMEDIATE CARE^TL-INPT (NPF)^^101^1808
"RTN","IB20P539",92,0)
 ;;INTERMEDIATE CARE^TL-INPT (NPF)^^240^330
"RTN","IB20P539",93,0)
 ;;NEUROLOGY^TL-INPT (NPF)^^101^1859
"RTN","IB20P539",94,0)
 ;;NEUROLOGY^TL-INPT (NPF)^^240^832
"RTN","IB20P539",95,0)
 ;;NURSING HOME CARE^TL-INPT (NPF)^^101^902
"RTN","IB20P539",96,0)
 ;;NURSING HOME CARE^TL-INPT (NPF)^^240^146
"RTN","IB20P539",97,0)
 ;;POLYTRAUMA INPATIENT^TL-INPT (NPF)^^101^1869
"RTN","IB20P539",98,0)
 ;;POLYTRAUMA INPATIENT^TL-INPT (NPF)^^240^983
"RTN","IB20P539",99,0)
 ;;PRRTP^TL-INPT (NPF)^^101^541
"RTN","IB20P539",100,0)
 ;;PRRTP^TL-INPT (NPF)^^240^68
"RTN","IB20P539",101,0)
 ;;PSYCHIATRIC CARE^TL-INPT (NPF)^^101^1205
"RTN","IB20P539",102,0)
 ;;PSYCHIATRIC CARE^TL-INPT (NPF)^^240^254
"RTN","IB20P539",103,0)
 ;;REHABILITATION MEDICINE^TL-INPT (NPF)^^101^1440
"RTN","IB20P539",104,0)
 ;;REHABILITATION MEDICINE^TL-INPT (NPF)^^240^758
"RTN","IB20P539",105,0)
 ;;SPINAL CORD INJURY CARE^TL-INPT (NPF)^^101^1374
"RTN","IB20P539",106,0)
 ;;SPINAL CORD INJURY CARE^TL-INPT (NPF)^^240^554
"RTN","IB20P539",107,0)
 ;;SURGICAL CARE^TL-INPT (NPF)^^101^3029
"RTN","IB20P539",108,0)
 ;;SURGICAL CARE^TL-INPT (NPF)^^240^1567
"RTN","IB20P539",109,0)
 ;;              
"RTN","IB20P539",110,0)
 ;; Tortiously Liable Professional
"RTN","IB20P539",111,0)
 ;;ALCOHOL AND DRUG TREATMENT^TL-INPT (PF)^^^130
"RTN","IB20P539",112,0)
 ;;BLIND REHABILITATION^TL-INPT (PF)^^^132
"RTN","IB20P539",113,0)
 ;;GENERAL MEDICAL CARE^TL-INPT (PF)^^^397
"RTN","IB20P539",114,0)
 ;;INTERMEDIATE CARE^TL-INPT (PF)^^^111
"RTN","IB20P539",115,0)
 ;;NEUROLOGY^TL-INPT (PF)^^^461
"RTN","IB20P539",116,0)
 ;;NURSING HOME CARE^TL-INPT (PF)^^^34
"RTN","IB20P539",117,0)
 ;;POLYTRAUMA INPATIENT^TL-INPT (PF)^^^365
"RTN","IB20P539",118,0)
 ;;PRRTP^TL-INPT (PF)^^^41
"RTN","IB20P539",119,0)
 ;;PSYCHIATRIC CARE^TL-INPT (PF)^^^152
"RTN","IB20P539",120,0)
 ;;REHABILITATION MEDICINE^TL-INPT (PF)^^^282
"RTN","IB20P539",121,0)
 ;;SPINAL CORD INJURY CARE^TL-INPT (PF)^^^273
"RTN","IB20P539",122,0)
 ;;SURGICAL CARE^TL-INPT (PF)^^^569
"RTN","IB20P539",123,0)
 ;;                    
"RTN","IB20P539",124,0)
 ;; Tortiously Liable Other
"RTN","IB20P539",125,0)
 ;;OUTPATIENT VISIT^TL-OPT VST^^^236
"RTN","IB20P539",126,0)
 ;;PM&RS OUTPATIENT VISIT^TL-OPT VST PM&RS^^^443
"RTN","IB20P539",127,0)
 ;;POLYTRAUMA OUTPATIENT VISIT^TL-OPT VST POLYTRAUMA^^^586
"RTN","IB20P539",128,0)
 ;;          
"RTN","IB20P539",129,0)
 ;;         
"RTN","IB20P539",130,0)
IA ;; Interagency
"RTN","IB20P539",131,0)
 ;;            
"RTN","IB20P539",132,0)
 ;;ALCOHOL AND DRUG TREATMENT^IA-INPT^^^1294
"RTN","IB20P539",133,0)
 ;;BLIND REHABILITATION^IA-INPT^^^1557
"RTN","IB20P539",134,0)
 ;;GENERAL MEDICAL CARE^IA-INPT^^^3142
"RTN","IB20P539",135,0)
 ;;INTERMEDIATE CARE^IA-INPT^^^2135
"RTN","IB20P539",136,0)
 ;;NEUROLOGY^IA-INPT^^^2993
"RTN","IB20P539",137,0)
 ;;NURSING HOME CARE^IA-INPT^^^1025
"RTN","IB20P539",138,0)
 ;;POLYTRAUMA INPATIENT^IA-INPT^^^3058
"RTN","IB20P539",139,0)
 ;;PRRTP^IA-INPT^^^616
"RTN","IB20P539",140,0)
 ;;PSYCHIATRIC CARE^IA-INPT^^^1527
"RTN","IB20P539",141,0)
 ;;REHABILITATION MEDICINE^IA-INPT^^^2353
"RTN","IB20P539",142,0)
 ;;SPINAL CORD INJURY CARE^IA-INPT^^^2089
"RTN","IB20P539",143,0)
 ;;SURGICAL CARE^IA-INPT^^^4899
"RTN","IB20P539",144,0)
 ;;            
"RTN","IB20P539",145,0)
 ;;OUTPATIENT VISIT^IA-OPT VST^^^222
"RTN","IB20P539",146,0)
 ;;PM&RS OUTPATIENT VISIT^IA-OPT VST PM&RS^^^419
"RTN","IB20P539",147,0)
 ;;POLYTRAUMA OUTPATIENT VISIT^IA-OPT VST POLYTRAUMA^^^561
"RTN","IB20P539",148,0)
 ;;
"RTN","IB20P539",149,0)
 Q
"VER")
8.0^22.0
"BLD",9869,6)
^493
**END**
**END**

