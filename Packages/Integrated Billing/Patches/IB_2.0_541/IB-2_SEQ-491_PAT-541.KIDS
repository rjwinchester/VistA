Released IB*2*541 SEQ #491
Extracted from mail message
**KIDS**:IB*2.0*541^

**INSTALL NAME**
IB*2.0*541
"BLD",9878,0)
IB*2.0*541^INTEGRATED BILLING^0^3141210^y
"BLD",9878,1,0)
^^3^3^3141210^
"BLD",9878,1,1,0)
This patch will update the pharmacy administrative charge based on a new 
"BLD",9878,1,2,0)
dispensing fee of $11.16 for Tricare and Tricare Reimbursement Insurance 
"BLD",9878,1,3,0)
prescription claims with an effective date of February 20, 2015.
"BLD",9878,4,0)
^9.64PA^^
"BLD",9878,6)
^467
"BLD",9878,6.3)
31
"BLD",9878,"ABPKG")
n
"BLD",9878,"INIT")
POST^IB20P541
"BLD",9878,"KRN",0)
^9.67PA^779.2^20
"BLD",9878,"KRN",.4,0)
.4
"BLD",9878,"KRN",.401,0)
.401
"BLD",9878,"KRN",.402,0)
.402
"BLD",9878,"KRN",.403,0)
.403
"BLD",9878,"KRN",.5,0)
.5
"BLD",9878,"KRN",.84,0)
.84
"BLD",9878,"KRN",3.6,0)
3.6
"BLD",9878,"KRN",3.8,0)
3.8
"BLD",9878,"KRN",9.2,0)
9.2
"BLD",9878,"KRN",9.8,0)
9.8
"BLD",9878,"KRN",9.8,"NM",0)
^9.68A^^0
"BLD",9878,"KRN",19,0)
19
"BLD",9878,"KRN",19,"NM",0)
^9.68A^^
"BLD",9878,"KRN",19.1,0)
19.1
"BLD",9878,"KRN",101,0)
101
"BLD",9878,"KRN",409.61,0)
409.61
"BLD",9878,"KRN",771,0)
771
"BLD",9878,"KRN",779.2,0)
779.2
"BLD",9878,"KRN",870,0)
870
"BLD",9878,"KRN",8989.51,0)
8989.51
"BLD",9878,"KRN",8989.52,0)
8989.52
"BLD",9878,"KRN",8994,0)
8994
"BLD",9878,"KRN","B",.4,.4)

"BLD",9878,"KRN","B",.401,.401)

"BLD",9878,"KRN","B",.402,.402)

"BLD",9878,"KRN","B",.403,.403)

"BLD",9878,"KRN","B",.5,.5)

"BLD",9878,"KRN","B",.84,.84)

"BLD",9878,"KRN","B",3.6,3.6)

"BLD",9878,"KRN","B",3.8,3.8)

"BLD",9878,"KRN","B",9.2,9.2)

"BLD",9878,"KRN","B",9.8,9.8)

"BLD",9878,"KRN","B",19,19)

"BLD",9878,"KRN","B",19.1,19.1)

"BLD",9878,"KRN","B",101,101)

"BLD",9878,"KRN","B",409.61,409.61)

"BLD",9878,"KRN","B",771,771)

"BLD",9878,"KRN","B",779.2,779.2)

"BLD",9878,"KRN","B",870,870)

"BLD",9878,"KRN","B",8989.51,8989.51)

"BLD",9878,"KRN","B",8989.52,8989.52)

"BLD",9878,"KRN","B",8994,8994)

"BLD",9878,"QDEF")
^^^^^^^^^^
"BLD",9878,"QUES",0)
^9.62^^
"BLD",9878,"REQB",0)
^9.611^^0
"INIT")
POST^IB20P541
"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^1^1
"PKG",200,20,1,0)
2^^IBAXDR
"PKG",200,20,1,1)

"PKG",200,20,"B",2,1)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321^2990406^2447
"PKG",200,22,1,"PAH",1,0)
541^3141210
"PKG",200,22,1,"PAH",1,1,0)
^^3^3^3141210
"PKG",200,22,1,"PAH",1,1,1,0)
This patch will update the pharmacy administrative charge based on a new 
"PKG",200,22,1,"PAH",1,1,2,0)
dispensing fee of $11.16 for Tricare and Tricare Reimbursement Insurance 
"PKG",200,22,1,"PAH",1,1,3,0)
prescription claims with an effective date of February 20, 2015.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","IB20P541")
0^^B6888273^n/a
"RTN","IB20P541",1,0)
IB20P541 ;ALB/CXW - IB*2.0*541 Post Init: Administrative Charge Update; 12-10-2014 
"RTN","IB20P541",2,0)
 ;;2.0;INTEGRATED BILLING;**541**;21-MAR-94;Build 31
"RTN","IB20P541",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","IB20P541",4,0)
 Q
"RTN","IB20P541",5,0)
 ;
"RTN","IB20P541",6,0)
 ;
"RTN","IB20P541",7,0)
POST ; post-install of patch installation
"RTN","IB20P541",8,0)
 ; use default rate types of rx 3rd party to update RS in #363
"RTN","IB20P541",9,0)
 ; ibraty=rate type names from file #399.3
"RTN","IB20P541",10,0)
 ; ibeffdt=effective external date (mm/dd/yyyy)
"RTN","IB20P541",11,0)
 ; ibadfe=administrative fee (dollar.cent)
"RTN","IB20P541",12,0)
 ; ibdisp=dispensing fee (dollar.cent)
"RTN","IB20P541",13,0)
 ; ibadjust=adjustment mumps code
"RTN","IB20P541",14,0)
 ;
"RTN","IB20P541",15,0)
 N IBCT,IBI,IBJ,IBT,IBMSG,IBX,IBRS,IBRSIN,IBRATY,IBEFFDT,IBADFE,IBDISP,IBADJUST
"RTN","IB20P541",16,0)
 D MES^XPDUTL("Patch IB*2.0*541 Post-Install starts...")
"RTN","IB20P541",17,0)
 D MES^XPDUTL("")
"RTN","IB20P541",18,0)
 S IBMSG="rate schedule with adjustments"
"RTN","IB20P541",19,0)
 S IBADFE="",IBEFFDT="3150220",IBCT=0
"RTN","IB20P541",20,0)
 F IBX=1:1 S IBT=$P($T(RSF+IBX),";",3) Q:'$L(IBT)  D
"RTN","IB20P541",21,0)
 . S IBRATY=$P(IBT,U),IBRATY=$TR(IBRATY,"/",U)
"RTN","IB20P541",22,0)
 . S IBRS=""
"RTN","IB20P541",23,0)
 . F IBI=1:1 S IBJ=$P(IBRATY,U,IBI) Q:IBJ=""  D
"RTN","IB20P541",24,0)
 .. S IBRSIN=$O(^DGCR(399.3,"B",IBJ,0))
"RTN","IB20P541",25,0)
 .. I 'IBRSIN D MES^XPDUTL("     >>>"_IBJ_" not defined, the "_IBMSG_" not added") Q
"RTN","IB20P541",26,0)
 .. I $P($G(^DGCR(399.3,+IBRSIN,0)),U,3) S IBRSIN=$O(^DGCR(399.3,"B",IBJ,99999),-1)
"RTN","IB20P541",27,0)
 .. I $P($G(^DGCR(399.3,+IBRSIN,0)),U,3) D MES^XPDUTL("    >>>"_IBJ_" not active, the "_IBMSG_" not added") Q
"RTN","IB20P541",28,0)
 .. I $$RSEXIST(IBEFFDT,IBRSIN) D MES^XPDUTL("    >>>"_IBJ_" "_IBMSG_" already exists") Q
"RTN","IB20P541",29,0)
 .. S IBRS=IBRS_U_IBJ
"RTN","IB20P541",30,0)
 . S IBRATY=$E(IBRS,2,$L(IBRS)) Q:IBRS=""
"RTN","IB20P541",31,0)
 . S IBDISP=$P(IBT,U,2)
"RTN","IB20P541",32,0)
 . S IBADJUST=$P(IBT,U,3)
"RTN","IB20P541",33,0)
 . D ENT^IB3PSOU(IBRATY,IBEFFDT,IBADFE,IBDISP,IBADJUST)
"RTN","IB20P541",34,0)
 . F IBI=1:1 S IBJ=$P(IBRATY,U,IBI) Q:IBJ=""  D
"RTN","IB20P541",35,0)
 .. S IBRSIN=$O(^DGCR(399.3,"B",IBJ,0))
"RTN","IB20P541",36,0)
 .. I $$RSEXIST(IBEFFDT,IBRSIN) S IBCT=IBCT+1 D MES^XPDUTL("    >>>"_IBJ_" "_IBMSG_" added")
"RTN","IB20P541",37,0)
 D MES^XPDUTL("  Total "_IBCT_$S(IBCT=1:" entry",1:" entries")_" updated in the Rate Schedule file (#363)")
"RTN","IB20P541",38,0)
 D MES^XPDUTL("")
"RTN","IB20P541",39,0)
 D MES^XPDUTL("Patch IB*2.0*541 Post-Install is complete.")
"RTN","IB20P541",40,0)
 Q
"RTN","IB20P541",41,0)
 ;
"RTN","IB20P541",42,0)
RSEXIST(IBEFFDT,IBRSIN) ; return RS IFN if Rate Schedule exists for Effective Date
"RTN","IB20P541",43,0)
 N IBX,IBRSFN,IBRS0 S IBX=0
"RTN","IB20P541",44,0)
 S IBRSFN=0 F  S IBRSFN=$O(^IBE(363,IBRSFN))  Q:'IBRSFN  D  I IBX Q
"RTN","IB20P541",45,0)
 . S IBRS0=$G(^IBE(363,IBRSFN,0))
"RTN","IB20P541",46,0)
 . I $P(IBRS0,U,2)=IBRSIN,$P(IBRS0,U,5)=IBEFFDT S IBX=IBRSFN
"RTN","IB20P541",47,0)
 Q IBX
"RTN","IB20P541",48,0)
 ;
"RTN","IB20P541",49,0)
RSF ; 2 rate types separated by '/'^dispensing fee^adjustment
"RTN","IB20P541",50,0)
 ;;TRICARE REIMB. INS./TRICARE^11.16^S X=X+11.16
"RTN","IB20P541",51,0)
 ;
"VER")
8.0^22.0
"BLD",9878,6)
^491
**END**
**END**

