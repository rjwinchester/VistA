Released IB*2*610 SEQ #554
Extracted from mail message
**KIDS**:IB*2.0*610^

**INSTALL NAME**
IB*2.0*610
"BLD",10736,0)
IB*2.0*610^INTEGRATED BILLING^0^3171011^y
"BLD",10736,1,0)
^^15^15^3171002^
"BLD",10736,1,1,0)
This patch will update the administrative charge based on different rate 
"BLD",10736,1,2,0)
types with new dispensing fees for third party pharmacy prescription
"BLD",10736,1,3,0)
claims with an effective date of January 1st, 2018.
"BLD",10736,1,4,0)
   
"BLD",10736,1,5,0)
   Rate Type             Dispensing Fee
"BLD",10736,1,6,0)
   -------------------   --------------
"BLD",10736,1,7,0)
   HUMANITARIAN          16.64
"BLD",10736,1,8,0)
   INELIGIBLE            16.64
"BLD",10736,1,9,0)
   INTERAGENCY           16.64
"BLD",10736,1,10,0)
   NO FAULT INS.         16.64
"BLD",10736,1,11,0)
   REIMBURSABLE INS.     16.64
"BLD",10736,1,12,0)
   TORT FEASOR           16.64
"BLD",10736,1,13,0)
   WORKERS' COMP.        16.64
"BLD",10736,1,14,0)
   TRICARE REIMB. INS.   13.91
"BLD",10736,1,15,0)
   TRICARE               13.91
"BLD",10736,4,0)
^9.64PA^^
"BLD",10736,6)
^535
"BLD",10736,6.3)
5
"BLD",10736,"INID")
^n
"BLD",10736,"INIT")
POST^IB20P610
"BLD",10736,"KRN",0)
^9.67PA^779.2^20
"BLD",10736,"KRN",.4,0)
.4
"BLD",10736,"KRN",.401,0)
.401
"BLD",10736,"KRN",.402,0)
.402
"BLD",10736,"KRN",.403,0)
.403
"BLD",10736,"KRN",.5,0)
.5
"BLD",10736,"KRN",.84,0)
.84
"BLD",10736,"KRN",3.6,0)
3.6
"BLD",10736,"KRN",3.8,0)
3.8
"BLD",10736,"KRN",9.2,0)
9.2
"BLD",10736,"KRN",9.8,0)
9.8
"BLD",10736,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10736,"KRN",9.8,"NM",1,0)
IB20P610^^0^B7444938
"BLD",10736,"KRN",9.8,"NM","B","IB20P610",1)

"BLD",10736,"KRN",19,0)
19
"BLD",10736,"KRN",19.1,0)
19.1
"BLD",10736,"KRN",101,0)
101
"BLD",10736,"KRN",409.61,0)
409.61
"BLD",10736,"KRN",771,0)
771
"BLD",10736,"KRN",779.2,0)
779.2
"BLD",10736,"KRN",870,0)
870
"BLD",10736,"KRN",8989.51,0)
8989.51
"BLD",10736,"KRN",8989.52,0)
8989.52
"BLD",10736,"KRN",8994,0)
8994
"BLD",10736,"KRN","B",.4,.4)

"BLD",10736,"KRN","B",.401,.401)

"BLD",10736,"KRN","B",.402,.402)

"BLD",10736,"KRN","B",.403,.403)

"BLD",10736,"KRN","B",.5,.5)

"BLD",10736,"KRN","B",.84,.84)

"BLD",10736,"KRN","B",3.6,3.6)

"BLD",10736,"KRN","B",3.8,3.8)

"BLD",10736,"KRN","B",9.2,9.2)

"BLD",10736,"KRN","B",9.8,9.8)

"BLD",10736,"KRN","B",19,19)

"BLD",10736,"KRN","B",19.1,19.1)

"BLD",10736,"KRN","B",101,101)

"BLD",10736,"KRN","B",409.61,409.61)

"BLD",10736,"KRN","B",771,771)

"BLD",10736,"KRN","B",779.2,779.2)

"BLD",10736,"KRN","B",870,870)

"BLD",10736,"KRN","B",8989.51,8989.51)

"BLD",10736,"KRN","B",8989.52,8989.52)

"BLD",10736,"KRN","B",8994,8994)

"BLD",10736,"QUES",0)
^9.62^^
"BLD",10736,"REQB",0)
^9.611^^
"INIT")
POST^IB20P610
"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^1^1
"PKG",200,20,1,0)
2^^IBAXDR
"PKG",200,20,1,1)

"PKG",200,20,"B",2,1)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321^2990406^2447
"PKG",200,22,1,"PAH",1,0)
610^3171011
"PKG",200,22,1,"PAH",1,1,0)
^^15^15^3171011
"PKG",200,22,1,"PAH",1,1,1,0)
This patch will update the administrative charge based on different rate 
"PKG",200,22,1,"PAH",1,1,2,0)
types with new dispensing fees for third party pharmacy prescription
"PKG",200,22,1,"PAH",1,1,3,0)
claims with an effective date of January 1st, 2018.
"PKG",200,22,1,"PAH",1,1,4,0)
   
"PKG",200,22,1,"PAH",1,1,5,0)
   Rate Type             Dispensing Fee
"PKG",200,22,1,"PAH",1,1,6,0)
   -------------------   --------------
"PKG",200,22,1,"PAH",1,1,7,0)
   HUMANITARIAN          16.64
"PKG",200,22,1,"PAH",1,1,8,0)
   INELIGIBLE            16.64
"PKG",200,22,1,"PAH",1,1,9,0)
   INTERAGENCY           16.64
"PKG",200,22,1,"PAH",1,1,10,0)
   NO FAULT INS.         16.64
"PKG",200,22,1,"PAH",1,1,11,0)
   REIMBURSABLE INS.     16.64
"PKG",200,22,1,"PAH",1,1,12,0)
   TORT FEASOR           16.64
"PKG",200,22,1,"PAH",1,1,13,0)
   WORKERS' COMP.        16.64
"PKG",200,22,1,"PAH",1,1,14,0)
   TRICARE REIMB. INS.   13.91
"PKG",200,22,1,"PAH",1,1,15,0)
   TRICARE               13.91
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","IB20P610")
0^1^B7444938^n/a
"RTN","IB20P610",1,0)
IB20P610 ;ALB/CXW - UPDATE RX ADMINISTRATIVE FEE FOR CY2018 ;10-12-2017
"RTN","IB20P610",2,0)
 ;;2.0;INTEGRATED BILLING;**610**;21-MAR-94;Build 5
"RTN","IB20P610",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","IB20P610",4,0)
 Q
"RTN","IB20P610",5,0)
POST ; 
"RTN","IB20P610",6,0)
 ; Update pharmacy administrative fee for CY18 in Rate Schedule file 363
"RTN","IB20P610",7,0)
 N IBA,U S U="^"
"RTN","IB20P610",8,0)
 D MSG("IB*2.0*610 Post-Install starts.....")
"RTN","IB20P610",9,0)
 D TRXAF
"RTN","IB20P610",10,0)
 D MSG("IB*2.0*610 Post-Install is complete.")
"RTN","IB20P610",11,0)
 Q
"RTN","IB20P610",12,0)
 ;
"RTN","IB20P610",13,0)
TRXAF ; Rate Schedule
"RTN","IB20P610",14,0)
 N IBCT,IBI,IBT,IBMSG,IBX,IBRS,IBRSIN,IBRATY,IBEFFDT,IBADFE,IBDISP,IBADJUST
"RTN","IB20P610",15,0)
 D MSG("")
"RTN","IB20P610",16,0)
 D MSG("  >>>Effect. JAN 01, 2018 of RX Rate Schedule Adjustment for the Rate Type:")
"RTN","IB20P610",17,0)
 S IBADFE="",IBEFFDT="3180101",IBCT=0
"RTN","IB20P610",18,0)
 F IBX=1:1 S IBT=$P($T(RSF+IBX),";;",2) Q:IBT="Q"  D
"RTN","IB20P610",19,0)
 . S IBRATY=$P(IBT,U)
"RTN","IB20P610",20,0)
 . S IBRSIN=$O(^DGCR(399.3,"B",IBRATY,0))
"RTN","IB20P610",21,0)
 . I 'IBRSIN D MSG("       "_IBRATY_" not defined in the Rate Type file (#399.3), not added") Q
"RTN","IB20P610",22,0)
 . ; latest entry
"RTN","IB20P610",23,0)
 . S IBRSIN=$O(^DGCR(399.3,"B",IBRATY,99999),-1)
"RTN","IB20P610",24,0)
 . I $P($G(^DGCR(399.3,+IBRSIN,0)),U,3) D MSG("       "_IBRATY_" inactivated in the Rate Type file (#399.3), not added") Q
"RTN","IB20P610",25,0)
 . I $$RSEXIST(IBEFFDT,IBRSIN) D MSG("       "_IBRATY_" already exists") Q
"RTN","IB20P610",26,0)
 . S IBDISP=$P(IBT,U,2)
"RTN","IB20P610",27,0)
 . S IBADJUST=$P(IBT,U,3)
"RTN","IB20P610",28,0)
 . ; inactivate rx entry for cy2017 and add new rx entry for cy2018
"RTN","IB20P610",29,0)
 . D ENT^IB3PSOU(IBRATY,IBEFFDT,IBADFE,IBDISP,IBADJUST)
"RTN","IB20P610",30,0)
 . ; double check
"RTN","IB20P610",31,0)
 . I '$$RSEXIST(IBEFFDT,IBRSIN) D MSG("       "_IBRATY_" not added") Q
"RTN","IB20P610",32,0)
 . S IBCT=IBCT+1 D MSG("       "_IBRATY_" added")
"RTN","IB20P610",33,0)
 D MSG("")
"RTN","IB20P610",34,0)
 D MSG("     Total "_IBCT_$S(IBCT>1:" entries",1:" entry")_" added to the RATE SCHEDULE file (#363)")
"RTN","IB20P610",35,0)
 D MSG("")
"RTN","IB20P610",36,0)
 Q
"RTN","IB20P610",37,0)
 ;
"RTN","IB20P610",38,0)
RSEXIST(IBEFFDT,IBRSIN) ; return RS IFN if Rate Schedule exists for Effective Date
"RTN","IB20P610",39,0)
 N IBX,IBRSFN,IBRS0 S IBX=0
"RTN","IB20P610",40,0)
 S IBRSFN=0 F  S IBRSFN=$O(^IBE(363,IBRSFN))  Q:'IBRSFN  D  I IBX Q
"RTN","IB20P610",41,0)
 . S IBRS0=$G(^IBE(363,IBRSFN,0))
"RTN","IB20P610",42,0)
 . I $P(IBRS0,U,2)=IBRSIN,$P(IBRS0,U,5)=IBEFFDT S IBX=IBRSFN
"RTN","IB20P610",43,0)
 Q IBX
"RTN","IB20P610",44,0)
 ;
"RTN","IB20P610",45,0)
MSG(IBA) ;
"RTN","IB20P610",46,0)
 D MES^XPDUTL(IBA)
"RTN","IB20P610",47,0)
 Q
"RTN","IB20P610",48,0)
 ;
"RTN","IB20P610",49,0)
RSF ; Rate type^dispensing fee^adjustment
"RTN","IB20P610",50,0)
 ;;HUMANITARIAN^16.64^S X=X+16.64
"RTN","IB20P610",51,0)
 ;;INELIGIBLE^16.64^S X=X+16.64
"RTN","IB20P610",52,0)
 ;;INTERAGENCY^16.64^S X=X+16.64
"RTN","IB20P610",53,0)
 ;;NO FAULT INS.^16.64^S X=X+16.64
"RTN","IB20P610",54,0)
 ;;REIMBURSABLE INS.^16.64^S X=X+16.64
"RTN","IB20P610",55,0)
 ;;TORT FEASOR^16.64^S X=X+16.64
"RTN","IB20P610",56,0)
 ;;WORKERS' COMP.^16.64^S X=X+16.64
"RTN","IB20P610",57,0)
 ;;TRICARE REIMB. INS.^13.91^S X=X+13.91
"RTN","IB20P610",58,0)
 ;;TRICARE^13.91^S X=X+13.91
"RTN","IB20P610",59,0)
 ;;Q
"RTN","IB20P610",60,0)
 ;
"VER")
8.0^22.2
"BLD",10736,6)
^554
**END**
**END**

