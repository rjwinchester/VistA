Released IB*2*564 SEQ #553
Extracted from mail message
**KIDS**:IB*2.0*564^

**INSTALL NAME**
IB*2.0*564
"BLD",10668,0)
IB*2.0*564^INTEGRATED BILLING^0^3170829^y
"BLD",10668,1,0)
^^10^10^3170724^^
"BLD",10668,1,1,0)
This patch addresses two issues.
"BLD",10668,1,2,0)
 
"BLD",10668,1,3,0)
The first issue is about missing timeframe of bill data in the associated
"BLD",10668,1,4,0)
display field when 'O NON-PAY/ZERO CLAIM' is selected in the Enter/Edit
"BLD",10668,1,5,0)
Billing information [IB EDIT BILLING INFO] option.
"BLD",10668,1,6,0)
 
"BLD",10668,1,7,0)
The second issue concerns the Technical Component (TC) modifier which
"BLD",10668,1,8,0)
doesn't automatically populate to any procedure on an institutional bill
"BLD",10668,1,9,0)
if the only professional charge on the procedure is 26 modified in the
"BLD",10668,1,10,0)
Enter/Edit Billing information [IB EDIT BILLING INFO] option.
"BLD",10668,4,0)
^9.64PA^399^1
"BLD",10668,4,399,0)
399
"BLD",10668,4,399,2,0)
^9.641^399^1
"BLD",10668,4,399,2,399,0)
BILL/CLAIMS  (File-top level)
"BLD",10668,4,399,2,399,1,0)
^9.6411^.26^2
"BLD",10668,4,399,2,399,1,.06,0)
TIMEFRAME OF BILL
"BLD",10668,4,399,2,399,1,.26,0)
UB-04 TIMEFRAME OF BILL
"BLD",10668,4,399,222)
y^n^p^^^^n^^n
"BLD",10668,4,399,224)

"BLD",10668,4,"APDD",399,399)

"BLD",10668,4,"APDD",399,399,.06)

"BLD",10668,4,"APDD",399,399,.26)

"BLD",10668,4,"B",399,399)

"BLD",10668,6)
^390
"BLD",10668,6.3)
25
"BLD",10668,"INIT")
POST^IB20P564
"BLD",10668,"KRN",0)
^9.67PA^779.2^20
"BLD",10668,"KRN",.4,0)
.4
"BLD",10668,"KRN",.401,0)
.401
"BLD",10668,"KRN",.402,0)
.402
"BLD",10668,"KRN",.402,"NM",0)
^9.68A^^0
"BLD",10668,"KRN",.403,0)
.403
"BLD",10668,"KRN",.5,0)
.5
"BLD",10668,"KRN",.84,0)
.84
"BLD",10668,"KRN",3.6,0)
3.6
"BLD",10668,"KRN",3.8,0)
3.8
"BLD",10668,"KRN",9.2,0)
9.2
"BLD",10668,"KRN",9.8,0)
9.8
"BLD",10668,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",10668,"KRN",9.8,"NM",1,0)
IBCU7A^^0^B49515881
"BLD",10668,"KRN",9.8,"NM",2,0)
IB20P564^^0^B3579589
"BLD",10668,"KRN",9.8,"NM","B","IB20P564",2)

"BLD",10668,"KRN",9.8,"NM","B","IBCU7A",1)

"BLD",10668,"KRN",19,0)
19
"BLD",10668,"KRN",19,"NM",0)
^9.68A^^
"BLD",10668,"KRN",19.1,0)
19.1
"BLD",10668,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",10668,"KRN",101,0)
101
"BLD",10668,"KRN",101,"NM",0)
^9.68A^^
"BLD",10668,"KRN",409.61,0)
409.61
"BLD",10668,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",10668,"KRN",771,0)
771
"BLD",10668,"KRN",771,"NM",0)
^9.68A^^
"BLD",10668,"KRN",779.2,0)
779.2
"BLD",10668,"KRN",779.2,"NM",0)
^9.68A^^
"BLD",10668,"KRN",870,0)
870
"BLD",10668,"KRN",8989.51,0)
8989.51
"BLD",10668,"KRN",8989.52,0)
8989.52
"BLD",10668,"KRN",8994,0)
8994
"BLD",10668,"KRN","B",.4,.4)

"BLD",10668,"KRN","B",.401,.401)

"BLD",10668,"KRN","B",.402,.402)

"BLD",10668,"KRN","B",.403,.403)

"BLD",10668,"KRN","B",.5,.5)

"BLD",10668,"KRN","B",.84,.84)

"BLD",10668,"KRN","B",3.6,3.6)

"BLD",10668,"KRN","B",3.8,3.8)

"BLD",10668,"KRN","B",9.2,9.2)

"BLD",10668,"KRN","B",9.8,9.8)

"BLD",10668,"KRN","B",19,19)

"BLD",10668,"KRN","B",19.1,19.1)

"BLD",10668,"KRN","B",101,101)

"BLD",10668,"KRN","B",409.61,409.61)

"BLD",10668,"KRN","B",771,771)

"BLD",10668,"KRN","B",779.2,779.2)

"BLD",10668,"KRN","B",870,870)

"BLD",10668,"KRN","B",8989.51,8989.51)

"BLD",10668,"KRN","B",8989.52,8989.52)

"BLD",10668,"KRN","B",8994,8994)

"BLD",10668,"QDEF")
^^^^^^^^^^
"BLD",10668,"QUES",0)
^9.62^^
"BLD",10668,"REQB",0)
^9.611^1^1
"BLD",10668,"REQB",1,0)
IB*2.0*483^2
"BLD",10668,"REQB","B","IB*2.0*483",1)

"FIA",399)
BILL/CLAIMS
"FIA",399,0)
^DGCR(399,
"FIA",399,0,0)
399I
"FIA",399,0,1)
y^n^p^^^^n^^n
"FIA",399,0,10)

"FIA",399,0,11)

"FIA",399,0,"RLRO")

"FIA",399,0,"VR")
2.0^IB
"FIA",399,399)
1
"FIA",399,399,.06)

"FIA",399,399,.26)

"INIT")
POST^IB20P564
"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^1^1
"PKG",200,20,1,0)
2^^IBAXDR
"PKG",200,20,1,1)

"PKG",200,20,"B",2,1)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321^2990406^2447
"PKG",200,22,1,"PAH",1,0)
564^3170829
"PKG",200,22,1,"PAH",1,1,0)
^^10^10^3170829
"PKG",200,22,1,"PAH",1,1,1,0)
This patch addresses two issues.
"PKG",200,22,1,"PAH",1,1,2,0)
 
"PKG",200,22,1,"PAH",1,1,3,0)
The first issue is about missing timeframe of bill data in the associated
"PKG",200,22,1,"PAH",1,1,4,0)
display field when 'O NON-PAY/ZERO CLAIM' is selected in the Enter/Edit
"PKG",200,22,1,"PAH",1,1,5,0)
Billing information [IB EDIT BILLING INFO] option.
"PKG",200,22,1,"PAH",1,1,6,0)
 
"PKG",200,22,1,"PAH",1,1,7,0)
The second issue concerns the Technical Component (TC) modifier which
"PKG",200,22,1,"PAH",1,1,8,0)
doesn't automatically populate to any procedure on an institutional bill
"PKG",200,22,1,"PAH",1,1,9,0)
if the only professional charge on the procedure is 26 modified in the
"PKG",200,22,1,"PAH",1,1,10,0)
Enter/Edit Billing information [IB EDIT BILLING INFO] option.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","IB20P564")
0^2^B3579589^n/a
"RTN","IB20P564",1,0)
IB20P564 ;ALB/CXW - IB*2.0*564 POST INIT: TIMEFRAME OF BILL UPDATE ;06-19-2017
"RTN","IB20P564",2,0)
 ;;2.0;INTEGRATED BILLING;**564**;21-MAR-94;Build 25
"RTN","IB20P564",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","IB20P564",4,0)
 Q
"RTN","IB20P564",5,0)
 ;
"RTN","IB20P564",6,0)
POST ; replace 'O' with '0' for timeframe of bill in #.06/399 & #.26/399
"RTN","IB20P564",7,0)
TBU ; old data stores in XTMP for tracking for 30 days from install date
"RTN","IB20P564",8,0)
 N IBA,IBC,IBCNT,IBIFN,IBTF,IBTFUB,IBRCD,IB564,DA,DIE,DR,DT,X,X1,X2
"RTN","IB20P564",9,0)
 S (IBC,IBCNT)=0,IB564="IB20P564"
"RTN","IB20P564",10,0)
 K ^XTMP(IB564)
"RTN","IB20P564",11,0)
 S DT=$$DT^XLFDT,X1=DT,X2=30 D C^%DTC
"RTN","IB20P564",12,0)
 S ^XTMP(IB564,0)=X_U_DT_U_"IB*2.0*564 POST INIT"
"RTN","IB20P564",13,0)
 D MSG("    Timeframe of Bill Fix Post-Install .....")
"RTN","IB20P564",14,0)
 S IBIFN=0 F  S IBIFN=$O(^DGCR(399,IBIFN)) Q:'IBIFN  S DR="" D
"RTN","IB20P564",15,0)
 . S IBRCD=$G(^DGCR(399,IBIFN,0))
"RTN","IB20P564",16,0)
 . S IBTF=$P(IBRCD,U,6)
"RTN","IB20P564",17,0)
 . S IBTFUB=$P(IBRCD,U,26)
"RTN","IB20P564",18,0)
 . S IBC=IBC+1
"RTN","IB20P564",19,0)
 . I IBC#1000=0 W "."
"RTN","IB20P564",20,0)
 . I IBTF="O" S DR=".06///0"
"RTN","IB20P564",21,0)
 . I IBTFUB="O" S DR=DR_";.26///0"
"RTN","IB20P564",22,0)
 . I DR'="" D
"RTN","IB20P564",23,0)
 .. S DIE="^DGCR(399,",DA=IBIFN D ^DIE
"RTN","IB20P564",24,0)
 .. S IBCNT=IBCNT+1,^XTMP(IB564,IBIFN)=IBRCD
"RTN","IB20P564",25,0)
 S ^XTMP(IB564,0)=^XTMP(IB564,0)_U_IBCNT
"RTN","IB20P564",26,0)
 D MSG(">>>>Total "_IBCNT_" bill"_$S(IBCNT'=1:"s",1:"")_" updated in the Bill/Claims (#399) file")
"RTN","IB20P564",27,0)
 ;
"RTN","IB20P564",28,0)
RCP ; input template compilation for timeframe of bill
"RTN","IB20P564",29,0)
 N DMAX,IBN,IBX
"RTN","IB20P564",30,0)
 S DMAX=$$ROUSIZE^DILF
"RTN","IB20P564",31,0)
 F IBN=1:1 S IBX=$P($T(TMPL+IBN),";;",2) Q:IBX=""  D COMP(IBX,DMAX)
"RTN","IB20P564",32,0)
 D MSG("    Timeframe of Bill Fix Post-Install Complete")
"RTN","IB20P564",33,0)
 Q
"RTN","IB20P564",34,0)
 ;
"RTN","IB20P564",35,0)
COMP(IBX,DMAX) ;
"RTN","IB20P564",36,0)
 N IBIEN,IBRTN,X,Y
"RTN","IB20P564",37,0)
 S IBIEN=$O(^DIE("B",IBX,0)) Q:'IBIEN
"RTN","IB20P564",38,0)
 S IBRTN=$P($G(^DIE(IBIEN,"ROUOLD")),U) Q:IBRTN=""
"RTN","IB20P564",39,0)
 S X=IBRTN,Y=IBIEN
"RTN","IB20P564",40,0)
 D EN^DIEZ
"RTN","IB20P564",41,0)
 Q
"RTN","IB20P564",42,0)
TMPL ;
"RTN","IB20P564",43,0)
 ;;IB SCREEN6
"RTN","IB20P564",44,0)
 ;;IB SCREEN7
"RTN","IB20P564",45,0)
 ;;
"RTN","IB20P564",46,0)
MSG(IBA) ;
"RTN","IB20P564",47,0)
 D MES^XPDUTL(IBA)
"RTN","IB20P564",48,0)
 Q
"RTN","IBCU7A")
0^1^B49515881^B47720475
"RTN","IBCU7A",1,0)
IBCU7A ;ALB/ARH - BILL PROCEDURE MANIPULATIONS ; 10-OCT-03
"RTN","IBCU7A",2,0)
 ;;2.0;INTEGRATED BILLING;**245,287,483,564**;21-MAR-94;Build 25
"RTN","IBCU7A",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","IBCU7A",4,0)
 ;
"RTN","IBCU7A",5,0)
 ; Based on Reasonable Charges v2.0+, certain CPT codes should be reported in a certain way
"RTN","IBCU7A",6,0)
 ; this set of routines manipulates the bill's procedure to conform to the charges and proper billing
"RTN","IBCU7A",7,0)
 ;
"RTN","IBCU7A",8,0)
 ; criteria:  bill must be a Reasonable Charges bill
"RTN","IBCU7A",9,0)
 ;            charges must be v2.0 or greater
"RTN","IBCU7A",10,0)
 ;
"RTN","IBCU7A",11,0)
 ; called after bill created and populated to reset procedures
"RTN","IBCU7A",12,0)
 ;
"RTN","IBCU7A",13,0)
PROC(IBIFN,EDIT) ; manipulate bill procedures base on charges and the clinical data
"RTN","IBCU7A",14,0)
 ; EDIT is a flag for which manipulations should be completed, if true then only the charge significant manipulations are preformed
"RTN","IBCU7A",15,0)
 N IB0,IBBCT,IBPBTYP S EDIT=$G(EDIT)
"RTN","IBCU7A",16,0)
 I '$O(^DGCR(399,+$G(IBIFN),"CP",0)) Q
"RTN","IBCU7A",17,0)
 S IB0=$G(^DGCR(399,+IBIFN,0)) Q:IB0=""  S IBBCT=$P(IB0,U,27) Q:'IBBCT
"RTN","IBCU7A",18,0)
 I +$P($G(^DGCR(399,+IBIFN,"U")),U,2)<$$VERSDT^IBCRU8(2) Q
"RTN","IBCU7A",19,0)
 I '$$BILLRATE^IBCRU3($P(IB0,U,7),$P(IB0,U,5),$P(IB0,U,3),"RC") Q
"RTN","IBCU7A",20,0)
 ;
"RTN","IBCU7A",21,0)
 S IBPBTYP=$P($$RCDV^IBCRU8(+$P(IB0,U,22)),U,3) Q:'IBPBTYP
"RTN","IBCU7A",22,0)
 ;
"RTN","IBCU7A",23,0)
 I 'EDIT,IBPBTYP<3 D DELCLN(IBIFN) ; delete TC/26 component clinical procedures from bills
"RTN","IBCU7A",24,0)
 I 'EDIT,IBPBTYP<3 D ADDCLN(IBIFN) ; add 26 modified clinical procedures to bill
"RTN","IBCU7A",25,0)
 ;
"RTN","IBCU7A",26,0)
 ; *483 - add TC modifier to procedures on a provider based facility bill if the only professional charge for the procedure is 26 modified
"RTN","IBCU7A",27,0)
 ;I 'EDIT,IBPBTYP<3 D DELTC(IBIFN) ; delete all TC modifiers from institutional bills
"RTN","IBCU7A",28,0)
 D MODTC(IBIFN)
"RTN","IBCU7A",29,0)
 ;
"RTN","IBCU7A",30,0)
 D MOD26(IBIFN) ; if only professional charge is a 26 charge then add or delete modifier 26 on procedure
"RTN","IBCU7A",31,0)
 ;
"RTN","IBCU7A",32,0)
 D BNDL^IBCU7A1(IBIFN) ; split or combine bundled procedures
"RTN","IBCU7A",33,0)
 ;
"RTN","IBCU7A",34,0)
 K ^UTILITY($J)
"RTN","IBCU7A",35,0)
 Q
"RTN","IBCU7A",36,0)
 ;
"RTN","IBCU7A",37,0)
 ;
"RTN","IBCU7A",38,0)
 ;
"RTN","IBCU7A",39,0)
DELTC(IBIFN) ; delete TC modifier from all procedures on RC v2.0+ Institutional bills
"RTN","IBCU7A",40,0)
 N IB0,IBBCT,IBTC,IBBCPT,IBLN,IBEVDT,IBMODS,IBV2,IBCHANGE S IBCHANGE=0
"RTN","IBCU7A",41,0)
 S IB0=$G(^DGCR(399,+$G(IBIFN),0)) Q:IB0=""  S IBBCT=$P(IB0,U,27) I IBBCT'=1 Q
"RTN","IBCU7A",42,0)
 S IBTC=+$$MOD^ICPTMOD("TC","E") Q:IBTC<1  S IBV2=$$VERSDT^IBCRU8(2)
"RTN","IBCU7A",43,0)
 ;
"RTN","IBCU7A",44,0)
 S IBBCPT=0 F  S IBBCPT=$O(^DGCR(399,IBIFN,"CP",IBBCPT)) Q:'IBBCPT  D
"RTN","IBCU7A",45,0)
 . S IBLN=$G(^DGCR(399,IBIFN,"CP",IBBCPT,0)),IBEVDT=$P(IBLN,U,2) Q:IBLN'[";ICPT("
"RTN","IBCU7A",46,0)
 . I IBEVDT<IBV2 Q
"RTN","IBCU7A",47,0)
 . S IBMODS=","_$$GETMOD^IBEFUNC(IBIFN,IBBCPT)_","
"RTN","IBCU7A",48,0)
 . I IBMODS[IBTC D DELMOD^IBCU73(IBIFN,IBBCPT,IBTC) S IBCHANGE=IBCHANGE+1
"RTN","IBCU7A",49,0)
 I '$D(ZTQUEUED),'$G(IBAUTO),+IBCHANGE W !,"Modifier TC Deleted from all Procedures ("_IBCHANGE_")."
"RTN","IBCU7A",50,0)
 Q
"RTN","IBCU7A",51,0)
 ;
"RTN","IBCU7A",52,0)
DELCLN(IBIFN) ; remove clinical procedures from RC v2.0+ bills
"RTN","IBCU7A",53,0)
 ; - remove from institutional bill any procedures with a 26 in the clinical data
"RTN","IBCU7A",54,0)
 ; - remove from professional bill any procedures with a TC in the clinical data
"RTN","IBCU7A",55,0)
 ; to delete a procedure the outpatient encounter pointer must match the clinical encounter
"RTN","IBCU7A",56,0)
 ; (checks for non-modified procedure on bill in case modifier was manually removed)
"RTN","IBCU7A",57,0)
 ;
"RTN","IBCU7A",58,0)
 N IB0,IBBCT,IBMODE,IBMOD,IBX,IBLN,IBOE,IBCM,IBCPT,IBBCPT,IBLN1,IBFND,IBEND,IBV2,IBCHANGE S IBCHANGE=0
"RTN","IBCU7A",59,0)
 S IB0=$G(^DGCR(399,+$G(IBIFN),0)) Q:IB0=""  S IBBCT=$P(IB0,U,27) I 'IBBCT Q
"RTN","IBCU7A",60,0)
 S IBMODE=$S(IBBCT=1:26,IBBCT=2:"TC",1:"") Q:IBMODE=""  S IBV2=$$VERSDT^IBCRU8(2)
"RTN","IBCU7A",61,0)
 S IBMOD=+$$MOD^ICPTMOD(IBMODE,"E") Q:IBMOD<1
"RTN","IBCU7A",62,0)
 ;
"RTN","IBCU7A",63,0)
 D GETSD^IBCU7U(IBIFN)
"RTN","IBCU7A",64,0)
 S IBX=0 F  S IBX=$O(^UTILITY($J,"CPT-CNT",IBX)) Q:'IBX  D
"RTN","IBCU7A",65,0)
 . S IBLN=$G(^UTILITY($J,"CPT-CNT",IBX)),(IBEND,IBFND)=0
"RTN","IBCU7A",66,0)
 . I +$P(IBLN,U,2)<IBV2 Q
"RTN","IBCU7A",67,0)
 . S IBOE=+$P(IBLN,U,11),IBCM=","_$P(IBLN,U,10)_","
"RTN","IBCU7A",68,0)
 . ;
"RTN","IBCU7A",69,0)
 . I IBCM[(","_IBMOD_",") D
"RTN","IBCU7A",70,0)
 .. S IBCPT=+IBLN_";ICPT(",IBBCPT=0 F  S IBBCPT=$O(^DGCR(399,IBIFN,"CP","B",IBCPT,IBBCPT)) Q:'IBBCPT  D  Q:IBEND
"RTN","IBCU7A",71,0)
 ... S IBLN1=$G(^DGCR(399,IBIFN,"CP",IBBCPT,0))
"RTN","IBCU7A",72,0)
 ... I IBOE=$P(IBLN1,U,20) S IBFND=IBBCPT I $O(^DGCR(399,IBIFN,"CP",IBBCPT,"MOD","C",IBMOD,0)) S IBEND=1
"RTN","IBCU7A",73,0)
 .. I +IBFND,+$$DELCPT^IBCU7U(IBIFN,IBBCPT) S IBCHANGE=IBCHANGE+1
"RTN","IBCU7A",74,0)
 I '$D(ZTQUEUED),'$G(IBAUTO),+IBCHANGE W !,"Modifier "_IBMODE_" Procedures Deleted ("_IBCHANGE_")."
"RTN","IBCU7A",75,0)
 Q
"RTN","IBCU7A",76,0)
 ;
"RTN","IBCU7A",77,0)
ADDCLN(IBIFN) ; add 26 modified clinical procedures to RC v2.0+ bills
"RTN","IBCU7A",78,0)
 ; - add to professional bill any procedures with a 26 in the clinical data
"RTN","IBCU7A",79,0)
 ; to add the clinical procedure the bill must not already have that procedure for the date
"RTN","IBCU7A",80,0)
 ; (checks for non-modified procedure on bill in case modifier was manually removed)
"RTN","IBCU7A",81,0)
 ;
"RTN","IBCU7A",82,0)
 N IB0,IBBCT,IBMOD,IBX,IBLN,IBEVDT,IBCM,IBCPT,IBBCPT,IBLN1,IBFND,IBEND,IBV2,IBCHANGE S IBCHANGE=0
"RTN","IBCU7A",83,0)
 S IB0=$G(^DGCR(399,+$G(IBIFN),0)) Q:IB0=""  S IBBCT=$P(IB0,U,27) I IBBCT'=2 Q
"RTN","IBCU7A",84,0)
 S IBMOD=+$$MOD^ICPTMOD("26","E") Q:IBMOD<1  S IBV2=$$VERSDT^IBCRU8(2)
"RTN","IBCU7A",85,0)
 ;
"RTN","IBCU7A",86,0)
 D GETSD^IBCU7U(IBIFN)
"RTN","IBCU7A",87,0)
 S IBX=0 F  S IBX=$O(^UTILITY($J,"CPT-CNT",IBX)) Q:'IBX  D
"RTN","IBCU7A",88,0)
 . S IBLN=$G(^UTILITY($J,"CPT-CNT",IBX)),(IBEND,IBFND)=0
"RTN","IBCU7A",89,0)
 . S IBEVDT=+$P(IBLN,U,2),IBCM=","_$P(IBLN,U,10)_","
"RTN","IBCU7A",90,0)
 . I IBEVDT<IBV2 Q
"RTN","IBCU7A",91,0)
 . ;
"RTN","IBCU7A",92,0)
 . I IBCM[(","_IBMOD_",") D
"RTN","IBCU7A",93,0)
 .. S IBCPT=+IBLN_";ICPT(",IBBCPT=0 F  S IBBCPT=$O(^DGCR(399,IBIFN,"CP","B",IBCPT,IBBCPT)) Q:'IBBCPT  D  Q:IBEND
"RTN","IBCU7A",94,0)
 ... S IBLN1=$G(^DGCR(399,IBIFN,"CP",IBBCPT,0))
"RTN","IBCU7A",95,0)
 ... I IBEVDT=$P(IBLN1,U,2) S IBFND=IBBCPT I $O(^DGCR(399,IBIFN,"CP",IBBCPT,"MOD","C",IBMOD,0)) S IBEND=1
"RTN","IBCU7A",96,0)
 .. I 'IBFND,+$$ADDCPT^IBCU7U(IBIFN,IBLN) S IBCHANGE=IBCHANGE+1
"RTN","IBCU7A",97,0)
 I '$D(ZTQUEUED),'$G(IBAUTO),+IBCHANGE W !,"Modifier 26 Procedures Added ("_IBCHANGE_")."
"RTN","IBCU7A",98,0)
 Q
"RTN","IBCU7A",99,0)
 ;
"RTN","IBCU7A",100,0)
MOD26(IBIFN) ; add/delete modifier 26 to procedure if that is the only professional charge available
"RTN","IBCU7A",101,0)
 ; added on professional bill, deleted from institutional bill
"RTN","IBCU7A",102,0)
 N IB0,IBBCT,IB26,IBBCPT,IBLN,IBEVDT,IBMODS,IBV2,IBCHANGE,IBCHGS S IBCHANGE=0
"RTN","IBCU7A",103,0)
 S IB0=$G(^DGCR(399,+$G(IBIFN),0)) Q:IB0=""  S IBBCT=$P(IB0,U,27) I 'IBBCT Q
"RTN","IBCU7A",104,0)
 S IB26=+$$MOD^ICPTMOD("26","E") Q:IB26<1  S IBV2=$$VERSDT^IBCRU8(2)
"RTN","IBCU7A",105,0)
 ;
"RTN","IBCU7A",106,0)
 S IBBCPT=0 F  S IBBCPT=$O(^DGCR(399,IBIFN,"CP",IBBCPT)) Q:'IBBCPT  D
"RTN","IBCU7A",107,0)
 . S IBLN=$G(^DGCR(399,IBIFN,"CP",IBBCPT,0)),IBEVDT=$P(IBLN,U,2) Q:IBLN'[";ICPT("
"RTN","IBCU7A",108,0)
 . I IBEVDT<IBV2 Q
"RTN","IBCU7A",109,0)
 . S IBMODS=","_$$GETMOD^IBEFUNC(IBIFN,IBBCPT)_","
"RTN","IBCU7A",110,0)
 . ;
"RTN","IBCU7A",111,0)
 . S IBCHGS=$$CHGMOD^IBCRCU1(IBIFN,+IBLN,IBEVDT,2) I (+IBCHGS'=1)!(+$P(IBCHGS,":",3)'=IB26) Q
"RTN","IBCU7A",112,0)
 . ; *484
"RTN","IBCU7A",113,0)
 . I IBBCT=1,$F(IBMODS,","_IB26_",") D DELMOD^IBCU73(IBIFN,IBBCPT,IB26) S IBCHANGE=IBCHANGE+1
"RTN","IBCU7A",114,0)
 . I IBBCT=2,IBMODS'[IB26 D ADDMOD^IBCU73(IBIFN,IBBCPT,IB26) S IBCHANGE=IBCHANGE+1
"RTN","IBCU7A",115,0)
 ;
"RTN","IBCU7A",116,0)
 I '$D(ZTQUEUED),'$G(IBAUTO),+IBCHANGE W !,"Modifier 26 "_$S(IBBCT=1:"Deleted from",1:"Added to")_" Procedures ("_IBCHANGE_")."
"RTN","IBCU7A",117,0)
 Q
"RTN","IBCU7A",118,0)
 ;
"RTN","IBCU7A",119,0)
MODTC(IBIFN) ; add TC modifier to procedures on the institutional bill
"RTN","IBCU7A",120,0)
 ; *564 remove TC modifier from procedures on the professional bill
"RTN","IBCU7A",121,0)
 N IB0,IBBCT,IBCHGS,IBTC,IB26,IBBCPT,IBLN,IBEVDT,IBMODS,IBV2,IBCHANGE
"RTN","IBCU7A",122,0)
 S IBCHANGE=0,IBV2=$$VERSDT^IBCRU8(2)
"RTN","IBCU7A",123,0)
 S IB0=$G(^DGCR(399,+$G(IBIFN),0)) Q:IB0=""
"RTN","IBCU7A",124,0)
 S IBBCT=$P(IB0,U,27) Q:'IBBCT
"RTN","IBCU7A",125,0)
 S IBTC=+$$MOD^ICPTMOD("TC","E") Q:IBTC<1
"RTN","IBCU7A",126,0)
 S IB26=+$$MOD^ICPTMOD("26","E") Q:IB26<1
"RTN","IBCU7A",127,0)
 ;
"RTN","IBCU7A",128,0)
 S IBBCPT=0 F  S IBBCPT=$O(^DGCR(399,IBIFN,"CP",IBBCPT)) Q:'IBBCPT  D
"RTN","IBCU7A",129,0)
 . S IBLN=$G(^DGCR(399,IBIFN,"CP",IBBCPT,0)),IBEVDT=$P(IBLN,U,2) Q:IBLN'[";ICPT("
"RTN","IBCU7A",130,0)
 . I IBEVDT<IBV2 Q
"RTN","IBCU7A",131,0)
 . S IBMODS=","_$$GETMOD^IBEFUNC(IBIFN,IBBCPT)_","
"RTN","IBCU7A",132,0)
 . S IBCHGS=$$CHGMOD^IBCRCU1(IBIFN,+IBLN,IBEVDT,2) I (+IBCHGS'=1)!(+$P(IBCHGS,":",3)'=IB26) Q
"RTN","IBCU7A",133,0)
 . I IBBCT=2,$F(IBMODS,","_IBTC_",") D DELMOD^IBCU73(IBIFN,IBBCPT,IBTC) S IBCHANGE=IBCHANGE+1
"RTN","IBCU7A",134,0)
 . I IBBCT=1,IBMODS'[IBTC D ADDMOD^IBCU73(IBIFN,IBBCPT,IBTC) S IBCHANGE=IBCHANGE+1
"RTN","IBCU7A",135,0)
 I '$D(ZTQUEUED),'$G(IBAUTO),+IBCHANGE W !,"Modifier TC "_$S(IBBCT=2:"Deleted from",1:"Added to")_" Procedures ("_IBCHANGE_")."
"RTN","IBCU7A",136,0)
 Q
"RTN","IBCU7A",137,0)
 ;
"RTN","IBCU7A",138,0)
ASK(IBIFN) ; ask if the bill procedure modifications should be executed
"RTN","IBCU7A",139,0)
 N DIR,DIRUT,DUOUT,DTOUT,X,Y
"RTN","IBCU7A",140,0)
 I '$O(^DGCR(399,+$G(IBIFN),"CP",0)) Q
"RTN","IBCU7A",141,0)
 S DIR("?")="Enter Yes to apply the bill procedure modifications for charges."
"RTN","IBCU7A",142,0)
 S DIR("?",1)="For Reasonable Charges some procedures must be billed in a certain way to"
"RTN","IBCU7A",143,0)
 S DIR("?",2)="receive a charge.  The bill procedure modifications apply rules to the bill"
"RTN","IBCU7A",144,0)
 S DIR("?",3)="procedures to ensure the correct Reasonable Charge.",DIR("?",4)=""
"RTN","IBCU7A",145,0)
 S DIR("?",5)="- Modifier 26 will be added/removed from procedures if it affects the charges."
"RTN","IBCU7A",146,0)
 S DIR("?",6)="- Certain global procedures with no charge will be split into their component"
"RTN","IBCU7A",147,0)
 S DIR("?",7)="  procedures which do have charges.",DIR("?",8)=""
"RTN","IBCU7A",148,0)
 ;
"RTN","IBCU7A",149,0)
 S DIR("A")="Apply Procedure Updates for Charges" W !!
"RTN","IBCU7A",150,0)
 S DIR(0)="Y",DIR("B")="YES" D ^DIR K DIR,X I Y=1 D PROC(+IBIFN,1) W !
"RTN","IBCU7A",151,0)
 Q
"VER")
8.0^22.2
"^DD",399,399,.06,0)
TIMEFRAME OF BILL^RS^1:ADMIT THRU DISCHARGE;2:INTERIM - FIRST CLAIM;3:INTERIM - CONTINUING CLAIM;4:INTERIM - LAST CLAIM;5:LATE CHARGES ONLY;6:ADJUSTMENT PRIOR CLAIM;7:REPLACEMENT PRIOR CLAIM;8:VOID/CANCEL PRIOR CLAIM;0:NON-PAY/ZERO CLAIM;^0;6^Q
"^DD",399,399,.06,.1)
TYPE OF BILL (3RD DIGIT)
"^DD",399,399,.06,1,0)
^.1
"^DD",399,399,.06,1,1,0)
^^TRIGGER^399^.26
"^DD",399,399,.06,1,1,1)
X ^DD(399,.06,1,1,1.3) I X S X=DIV S Y(1)=$S($D(^DGCR(399,D0,0)):^(0),1:"") S X=$P(Y(1),U,26),X=X S DIU=X K Y S X=DIV S X=DIV,X=X S DIH=$G(^DGCR(399,DIV(0),0)),DIV=X S $P(^(0),U,26)=DIV,DIH=399,DIG=.26 D ^DICR
"^DD",399,399,.06,1,1,1.3)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(399,.26,0)),U,3),Y(1)=$S($D(^DGCR(399,D0,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,26)_":",2),$C(59))=""
"^DD",399,399,.06,1,1,2)
Q
"^DD",399,399,.06,1,1,3)
Do not delete
"^DD",399,399,.06,1,1,"%D",0)
^^2^2^3070116^
"^DD",399,399,.06,1,1,"%D",1,0)
This trigger forces the same initial value into the UB-04 TIMEFRAME OF
"^DD",399,399,.06,1,1,"%D",2,0)
BILL field as the system-calculated TIMEFRAME OF BILL field.
"^DD",399,399,.06,1,1,"CREATE CONDITION")
UB-04 TIMEFRAME OF BILL=""
"^DD",399,399,.06,1,1,"CREATE VALUE")
INTERNAL(TIMEFRAME OF BILL)
"^DD",399,399,.06,1,1,"DELETE VALUE")
NO EFFECT
"^DD",399,399,.06,1,1,"DT")
3070116
"^DD",399,399,.06,1,1,"FIELD")
UB-04 TIMEFRAME OF BILL
"^DD",399,399,.06,3)
Enter the code which defines the frequency of this bill.
"^DD",399,399,.06,5,1,0)
399^.26^1
"^DD",399,399,.06,21,0)
^.001^1^1^3170627^^^^
"^DD",399,399,.06,21,1,0)
This code defines the frequency of this bill.
"^DD",399,399,.06,"DT")
3170627
"^DD",399,399,.26,0)
UB-04 TIMEFRAME OF BILL^RS^1:ADMIT THRU DISCHARGE;2:INTERIM - 1ST CLAIM;3:INTERIM - CONTINUING CLAIM;4:INTERIM - LAST CLAIM;5:LATE CHARGES ONLY;6:ADJUSTMENT CLAIM;7:REPLACEMENT CLAIM;8:VOID/CANCEL PRIOR CLAIM;0:NON-PAY/ZERO CLAIM;^0;26^Q
"^DD",399,399,.26,1,0)
^.1
"^DD",399,399,.26,1,1,0)
^^TRIGGER^399^.06
"^DD",399,399,.26,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^DGCR(399,D0,0)):^(0),1:"") S X=$P(Y(1),U,6),X=X S DIU=X K Y S X=DIV S X=DIV,X=X S DIH=$G(^DGCR(399,DIV(0),0)),DIV=X S $P(^(0),U,6)=DIV,DIH=399,DIG=.06 D ^DICR
"^DD",399,399,.26,1,1,2)
Q
"^DD",399,399,.26,1,1,"CREATE VALUE")
INTERNAL(UB-04 TIMEFRAME OF BILL)
"^DD",399,399,.26,1,1,"DELETE VALUE")
NO EFFECT
"^DD",399,399,.26,1,1,"DT")
3070212
"^DD",399,399,.26,1,1,"FIELD")
TIMEFRAME OF BILL
"^DD",399,399,.26,3)
Enter the appropriate UB-04 timeframe of bill
"^DD",399,399,.26,5,1,0)
399^.06^1
"^DD",399,399,.26,21,0)
^.001^3^3^3170627^^^^
"^DD",399,399,.26,21,1,0)
This field contains the code representing the timeframe of the bill
"^DD",399,399,.26,21,2,0)
value for the bill.  This is the 3rd digit of the 3-digit UB-04 type
"^DD",399,399,.26,21,3,0)
of bill.
"^DD",399,399,.26,"DT")
3170627
"BLD",10668,6)
^553
**END**
**END**

