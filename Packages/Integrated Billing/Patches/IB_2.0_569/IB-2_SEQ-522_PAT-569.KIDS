Released IB*2*569 SEQ #522
Extracted from mail message
**KIDS**:IB*2.0*569^

**INSTALL NAME**
IB*2.0*569
"BLD",10296,0)
IB*2.0*569^INTEGRATED BILLING^0^3160706^y
"BLD",10296,1,0)
^^3^3^3160705^
"BLD",10296,1,1,0)
This patch will update the administrative charge based on a new
"BLD",10296,1,2,0)
dispensing fee $14.29 for third party pharmacy prescription claims with
"BLD",10296,1,3,0)
an effective date of January 1st, 2016.
"BLD",10296,4,0)
^9.64PA^^
"BLD",10296,6)
^424
"BLD",10296,6.3)
6
"BLD",10296,"INIT")
POST^IB20P569
"BLD",10296,"KRN",0)
^9.67PA^779.2^20
"BLD",10296,"KRN",.4,0)
.4
"BLD",10296,"KRN",.401,0)
.401
"BLD",10296,"KRN",.402,0)
.402
"BLD",10296,"KRN",.403,0)
.403
"BLD",10296,"KRN",.5,0)
.5
"BLD",10296,"KRN",.84,0)
.84
"BLD",10296,"KRN",3.6,0)
3.6
"BLD",10296,"KRN",3.8,0)
3.8
"BLD",10296,"KRN",9.2,0)
9.2
"BLD",10296,"KRN",9.8,0)
9.8
"BLD",10296,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10296,"KRN",9.8,"NM",1,0)
IB20P569^^0^B7434699
"BLD",10296,"KRN",9.8,"NM","B","IB20P569",1)

"BLD",10296,"KRN",19,0)
19
"BLD",10296,"KRN",19.1,0)
19.1
"BLD",10296,"KRN",101,0)
101
"BLD",10296,"KRN",409.61,0)
409.61
"BLD",10296,"KRN",771,0)
771
"BLD",10296,"KRN",779.2,0)
779.2
"BLD",10296,"KRN",870,0)
870
"BLD",10296,"KRN",8989.51,0)
8989.51
"BLD",10296,"KRN",8989.52,0)
8989.52
"BLD",10296,"KRN",8994,0)
8994
"BLD",10296,"KRN","B",.4,.4)

"BLD",10296,"KRN","B",.401,.401)

"BLD",10296,"KRN","B",.402,.402)

"BLD",10296,"KRN","B",.403,.403)

"BLD",10296,"KRN","B",.5,.5)

"BLD",10296,"KRN","B",.84,.84)

"BLD",10296,"KRN","B",3.6,3.6)

"BLD",10296,"KRN","B",3.8,3.8)

"BLD",10296,"KRN","B",9.2,9.2)

"BLD",10296,"KRN","B",9.8,9.8)

"BLD",10296,"KRN","B",19,19)

"BLD",10296,"KRN","B",19.1,19.1)

"BLD",10296,"KRN","B",101,101)

"BLD",10296,"KRN","B",409.61,409.61)

"BLD",10296,"KRN","B",771,771)

"BLD",10296,"KRN","B",779.2,779.2)

"BLD",10296,"KRN","B",870,870)

"BLD",10296,"KRN","B",8989.51,8989.51)

"BLD",10296,"KRN","B",8989.52,8989.52)

"BLD",10296,"KRN","B",8994,8994)

"BLD",10296,"QUES",0)
^9.62^^
"BLD",10296,"REQB",0)
^9.611^^
"INIT")
POST^IB20P569
"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^1^1
"PKG",200,20,1,0)
2^^IBAXDR
"PKG",200,20,1,1)

"PKG",200,20,"B",2,1)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321^2990406^2447
"PKG",200,22,1,"PAH",1,0)
569^3160706
"PKG",200,22,1,"PAH",1,1,0)
^^3^3^3160706
"PKG",200,22,1,"PAH",1,1,1,0)
This patch will update the administrative charge based on a new
"PKG",200,22,1,"PAH",1,1,2,0)
dispensing fee $14.29 for third party pharmacy prescription claims with
"PKG",200,22,1,"PAH",1,1,3,0)
an effective date of January 1st, 2016.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","IB20P569")
0^1^B7434699^n/a
"RTN","IB20P569",1,0)
IB20P569 ;ALB/CXW - IB*2.0*569 Post Init: Administrative Charge Update;06-27-2016 
"RTN","IB20P569",2,0)
 ;;2.0;INTEGRATED BILLING;**569**;21-MAR-94;Build 6
"RTN","IB20P569",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","IB20P569",4,0)
 Q
"RTN","IB20P569",5,0)
 ;
"RTN","IB20P569",6,0)
POST ; post-install of patch installation
"RTN","IB20P569",7,0)
 ; use default rate type of rx 3rd party bill to update RS in #363
"RTN","IB20P569",8,0)
 ;
"RTN","IB20P569",9,0)
 N U,IBA,IBCT,IBI,IBJ,IBT,IBX,IBY,IBRS,IBRSIN,IBRATY,IBEFFDT,IBADFE,IBDISP,IBADJUST,Y
"RTN","IB20P569",10,0)
 D MSG("Patch IB*2.0*569 Post-Install starts...")
"RTN","IB20P569",11,0)
 D MSG("")
"RTN","IB20P569",12,0)
 S IBADFE="",IBCT=0,U="^"
"RTN","IB20P569",13,0)
 D MSG("  >>>Effect. JAN 01, 2016 of RX Rate Schedule Adjustment for the Rate Type:")
"RTN","IB20P569",14,0)
 F IBX=1:1 S IBT=$P($T(RSF+IBX),";",3) Q:'$L(IBT)  D
"RTN","IB20P569",15,0)
 . S IBRS=""
"RTN","IB20P569",16,0)
 . S IBRATY=$P(IBT,U),IBRATY=$TR(IBRATY,"/",U)
"RTN","IB20P569",17,0)
 . S IBDISP=$P(IBT,U,2)
"RTN","IB20P569",18,0)
 . S IBADJUST=$P(IBT,U,3)
"RTN","IB20P569",19,0)
 . S IBEFFDT=$P(IBT,U,4)
"RTN","IB20P569",20,0)
 . F IBI=1:1 S IBJ=$P(IBRATY,U,IBI) Q:IBJ=""  D
"RTN","IB20P569",21,0)
 .. S IBRSIN=$O(^DGCR(399.3,"B",IBJ,0))
"RTN","IB20P569",22,0)
 .. I 'IBRSIN D MSG("       "_IBJ_" not defined in the Rate Type file (#399.3), not added") Q
"RTN","IB20P569",23,0)
 .. ; find the latest ien if multiple
"RTN","IB20P569",24,0)
 .. I $P($G(^DGCR(399.3,+IBRSIN,0)),U,3) S IBRSIN=$O(^DGCR(399.3,"B",IBJ,999999),-1)
"RTN","IB20P569",25,0)
 .. I $P($G(^DGCR(399.3,+IBRSIN,0)),U,3) D MSG("       "_IBJ_" inactivated in the Rate Type file (#399.3), not added") Q
"RTN","IB20P569",26,0)
 .. I $$RSEXIST(IBEFFDT,IBRSIN) D MSG("       "_IBJ_" already exists") Q
"RTN","IB20P569",27,0)
 .. ; add new entry for cy2016 and inactivate date for cy2015 
"RTN","IB20P569",28,0)
 .. D ENT^IB3PSOU(IBJ,IBEFFDT,IBADFE,IBDISP,IBADJUST)
"RTN","IB20P569",29,0)
 .. ; double check
"RTN","IB20P569",30,0)
 .. I '$$RSEXIST(IBEFFDT,IBRSIN) D MSG("       "_IBJ_" not added") Q
"RTN","IB20P569",31,0)
 .. S IBCT=IBCT+1 D MSG("       "_IBJ_" added")
"RTN","IB20P569",32,0)
 D MSG("")
"RTN","IB20P569",33,0)
 D MSG("     Total "_IBCT_$S(IBCT=1:" entry",1:" entries")_" added to the Rate Schedule file (#363)")
"RTN","IB20P569",34,0)
 D MSG("")
"RTN","IB20P569",35,0)
 D MSG("Patch IB*2.0*569 Post-Install is complete.")
"RTN","IB20P569",36,0)
 Q
"RTN","IB20P569",37,0)
 ;
"RTN","IB20P569",38,0)
RSEXIST(IBEFFDT,IBRSIN) ; return RS IFN if Rate Schedule exists for Effective Date
"RTN","IB20P569",39,0)
 N IBX,IBRSFN,IBRS0 S IBX=0
"RTN","IB20P569",40,0)
 S IBRSFN=0 F  S IBRSFN=$O(^IBE(363,IBRSFN))  Q:'IBRSFN  D  I IBX Q
"RTN","IB20P569",41,0)
 . S IBRS0=$G(^IBE(363,IBRSFN,0))
"RTN","IB20P569",42,0)
 . I $P(IBRS0,U,2)=IBRSIN,$P(IBRS0,U,5)=IBEFFDT S IBX=IBRSFN
"RTN","IB20P569",43,0)
 Q IBX
"RTN","IB20P569",44,0)
 ;
"RTN","IB20P569",45,0)
MSG(IBA) ;
"RTN","IB20P569",46,0)
 D MES^XPDUTL(IBA)
"RTN","IB20P569",47,0)
 Q
"RTN","IB20P569",48,0)
 ;
"RTN","IB20P569",49,0)
RSF ; rate type separated by '/'^dispensing fee^adjustment^effective date
"RTN","IB20P569",50,0)
 ;;HUMANITARIAN/INELIGIBLE/INTERAGENCY/NO FAULT INS./REIMBURSABLE INS./TORT FEASOR/WORKERS' COMP.^14.29^S X=X+14.29^3160101
"RTN","IB20P569",51,0)
 ;
"VER")
8.0^22.0
"BLD",10296,6)
^522
**END**
**END**

