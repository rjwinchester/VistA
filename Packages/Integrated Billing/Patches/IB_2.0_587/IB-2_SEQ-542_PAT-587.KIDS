Released IB*2*587 SEQ #542
Extracted from mail message
**KIDS**:IB*2.0*587^

**INSTALL NAME**
IB*2.0*587
"BLD",10480,0)
IB*2.0*587^INTEGRATED BILLING^0^3170321^y
"BLD",10480,1,0)
^^3^3^3170320^
"BLD",10480,1,1,0)
This patch involves updates to the MCCR UTILITY (#399.1) file, the REVENUE
"BLD",10480,1,2,0)
CODE (#399.2) file, the PLACE OF SERVICE (#353.1) file and the CLAIMS
"BLD",10480,1,3,0)
TRACKING NON-BILLABLE REASONS (#356.8) file for 2017.
"BLD",10480,4,0)
^9.64PA^^0
"BLD",10480,6)
^511
"BLD",10480,6.3)
25
"BLD",10480,"ABPKG")
n
"BLD",10480,"INIT")
POST^IB20P587
"BLD",10480,"KRN",0)
^9.67PA^779.2^20
"BLD",10480,"KRN",.4,0)
.4
"BLD",10480,"KRN",.401,0)
.401
"BLD",10480,"KRN",.402,0)
.402
"BLD",10480,"KRN",.403,0)
.403
"BLD",10480,"KRN",.5,0)
.5
"BLD",10480,"KRN",.84,0)
.84
"BLD",10480,"KRN",3.6,0)
3.6
"BLD",10480,"KRN",3.8,0)
3.8
"BLD",10480,"KRN",9.2,0)
9.2
"BLD",10480,"KRN",9.8,0)
9.8
"BLD",10480,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10480,"KRN",9.8,"NM",1,0)
IB20P587^^0^B37599689
"BLD",10480,"KRN",9.8,"NM","B","IB20P587",1)

"BLD",10480,"KRN",19,0)
19
"BLD",10480,"KRN",19.1,0)
19.1
"BLD",10480,"KRN",101,0)
101
"BLD",10480,"KRN",409.61,0)
409.61
"BLD",10480,"KRN",771,0)
771
"BLD",10480,"KRN",779.2,0)
779.2
"BLD",10480,"KRN",870,0)
870
"BLD",10480,"KRN",8989.51,0)
8989.51
"BLD",10480,"KRN",8989.52,0)
8989.52
"BLD",10480,"KRN",8994,0)
8994
"BLD",10480,"KRN","B",.4,.4)

"BLD",10480,"KRN","B",.401,.401)

"BLD",10480,"KRN","B",.402,.402)

"BLD",10480,"KRN","B",.403,.403)

"BLD",10480,"KRN","B",.5,.5)

"BLD",10480,"KRN","B",.84,.84)

"BLD",10480,"KRN","B",3.6,3.6)

"BLD",10480,"KRN","B",3.8,3.8)

"BLD",10480,"KRN","B",9.2,9.2)

"BLD",10480,"KRN","B",9.8,9.8)

"BLD",10480,"KRN","B",19,19)

"BLD",10480,"KRN","B",19.1,19.1)

"BLD",10480,"KRN","B",101,101)

"BLD",10480,"KRN","B",409.61,409.61)

"BLD",10480,"KRN","B",771,771)

"BLD",10480,"KRN","B",779.2,779.2)

"BLD",10480,"KRN","B",870,870)

"BLD",10480,"KRN","B",8989.51,8989.51)

"BLD",10480,"KRN","B",8989.52,8989.52)

"BLD",10480,"KRN","B",8994,8994)

"BLD",10480,"QUES",0)
^9.62^^
"BLD",10480,"REQB",0)
^9.611^^0
"INIT")
POST^IB20P587
"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^1^1
"PKG",200,20,1,0)
2^^IBAXDR
"PKG",200,20,1,1)

"PKG",200,20,"B",2,1)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321^2990406^2447
"PKG",200,22,1,"PAH",1,0)
587^3170321
"PKG",200,22,1,"PAH",1,1,0)
^^3^3^3170321
"PKG",200,22,1,"PAH",1,1,1,0)
This patch involves updates to the MCCR UTILITY (#399.1) file, the REVENUE
"PKG",200,22,1,"PAH",1,1,2,0)
CODE (#399.2) file, the PLACE OF SERVICE (#353.1) file and the CLAIMS
"PKG",200,22,1,"PAH",1,1,3,0)
TRACKING NON-BILLABLE REASONS (#356.8) file for 2017.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","IB20P587")
0^1^B37599689^n/a
"RTN","IB20P587",1,0)
IB20P587 ;ALB/CXW - UPDATE MCCR UTILITY & REVENUE & POS & RNB ;01/31/2017
"RTN","IB20P587",2,0)
 ;;2.0;INTEGRATED BILLING;**587**;21-MAR-94;Build 25
"RTN","IB20P587",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","IB20P587",4,0)
 Q
"RTN","IB20P587",5,0)
POST ; 
"RTN","IB20P587",6,0)
 ; Update value/occurrence/condition codes in mccr utility file 399.1
"RTN","IB20P587",7,0)
 ; Update revenue codes in revenue code file 399.2
"RTN","IB20P587",8,0)
 ; Update pos code in place of service file 353.1
"RTN","IB20P587",9,0)
 ; Update CT non-billable reasons file 356.8
"RTN","IB20P587",10,0)
 N IBZ,U S U="^"
"RTN","IB20P587",11,0)
 D MSG("    IB*2.0*587 Post-Install starts .....")
"RTN","IB20P587",12,0)
 D MCR,RVC,POS,RNB
"RTN","IB20P587",13,0)
 D MSG("    IB*2.0*587 Post-Install is complete.")
"RTN","IB20P587",14,0)
 Q
"RTN","IB20P587",15,0)
 ;
"RTN","IB20P587",16,0)
MCR ; 3 types of codes
"RTN","IB20P587",17,0)
 N IBCNT,IBCOD,IBPE,IBFD,IBFD2,IBI,IBX S IBFD2=""
"RTN","IB20P587",18,0)
 ; Value code flag in field #.18/piece 11
"RTN","IB20P587",19,0)
 S IBCNT=0,IBPE=11,IBFD=.18
"RTN","IB20P587",20,0)
 D MSG(""),MSG(" >>>Value Code")
"RTN","IB20P587",21,0)
 F IBI=1:1 S IBX=$P($T(VALU+IBI),";;",2) Q:IBX="Q"  D MFILE
"RTN","IB20P587",22,0)
 ;
"RTN","IB20P587",23,0)
 ; Condition code flag in field #.22/piece 15
"RTN","IB20P587",24,0)
 S IBPE=15,IBFD=.22
"RTN","IB20P587",25,0)
 D MSG(""),MSG(" >>>Condition Code")
"RTN","IB20P587",26,0)
 F IBI=1:1 S IBX=$P($T(CONU+IBI),";;",2) Q:IBX="Q"  D MFILE
"RTN","IB20P587",27,0)
 ;
"RTN","IB20P587",28,0)
 ; Occurrence span code flag in fields #.11/piece 4, #.17/piece 10
"RTN","IB20P587",29,0)
 S IBPE=4,IBFD=.11,IBFD2=.17
"RTN","IB20P587",30,0)
 D MSG(""),MSG(" >>>Occurrence Span Code")
"RTN","IB20P587",31,0)
 F IBI=1:1 S IBX=$P($T(OCCPU+IBI),";;",2) Q:IBX="Q"  D MFILE
"RTN","IB20P587",32,0)
 ; 
"RTN","IB20P587",33,0)
 D MSG("Total "_IBCNT_" code"_$S(IBCNT'=1:"s",1:"")_" updated in the MCCR Utility (#399.1) file")
"RTN","IB20P587",34,0)
 Q
"RTN","IB20P587",35,0)
 ;
"RTN","IB20P587",36,0)
MFILE ; store in mccr utility file
"RTN","IB20P587",37,0)
 N IBA,IBB,IBC,IBFN,IBMS,IBX3,IBY,DLAYGO,DIC,DIE,DA,DD,DO,DR,X,Y
"RTN","IB20P587",38,0)
 S IBA=$P(IBX,U),IBB=$P(IBX,U,2)
"RTN","IB20P587",39,0)
 S IBY="    #"_IBA_" "_IBB
"RTN","IB20P587",40,0)
 S IBFN=+$$EXCODE(IBA,IBPE)
"RTN","IB20P587",41,0)
 I IBFN D  Q:'IBFN
"RTN","IB20P587",42,0)
 . S IBX3=$G(^DGCR(399.1,IBFN,0)),IBC=IBB_U_IBA
"RTN","IB20P587",43,0)
 . I $P(IBX3,U,1,2)=IBC S IBFN=0 D MSG(IBY_" already exists") Q
"RTN","IB20P587",44,0)
 . S DA=IBFN,IBMS="updated"
"RTN","IB20P587",45,0)
 ;
"RTN","IB20P587",46,0)
 ; 4 slashes to override flag in #.17
"RTN","IB20P587",47,0)
 I 'IBFN D  Q:Y<1
"RTN","IB20P587",48,0)
 . S DLAYGO=399.1,DIC="^DGCR(399.1,",DIC(0)="L",X=IBB D FILE^DICN
"RTN","IB20P587",49,0)
 . I Y<1 D MSG(" >> ERROR when adding "_$S(IBPE=11:"Value",IBPE=15:"Condition",1:"Occurrence Span")_" Code #"_IBA_" to the #399.1 file, Log a ticket!") Q
"RTN","IB20P587",50,0)
 . S DA=+Y,IBMS="added"
"RTN","IB20P587",51,0)
 S DIE="^DGCR(399.1,",DR=".01///"_IBB_";.02///"_IBA_";"_IBFD_"///1"
"RTN","IB20P587",52,0)
 S:IBFD2 DR=DR_";"_IBFD2_"////1" D ^DIE
"RTN","IB20P587",53,0)
 S IBCNT=IBCNT+1 D MSG(IBY_" "_IBMS)
"RTN","IB20P587",54,0)
 Q
"RTN","IB20P587",55,0)
 ;
"RTN","IB20P587",56,0)
EXCODE(IBCOD,IBPE) ; Returns IEN if code found in the IBPE piece
"RTN","IB20P587",57,0)
 N IBX,IBY S IBY=""
"RTN","IB20P587",58,0)
 I $G(IBCOD)'="" S IBX=0 F  S IBX=$O(^DGCR(399.1,"C",IBCOD,IBX)) Q:'IBX  I $P($G(^DGCR(399.1,IBX,0)),U,+$G(IBPE)) S IBY=IBX
"RTN","IB20P587",59,0)
 Q IBY
"RTN","IB20P587",60,0)
 ;
"RTN","IB20P587",61,0)
RVC ; Revenue code in fields #1/piece 2, #2/piece 3, #3/piece 4
"RTN","IB20P587",62,0)
 N IBA,IBB,IBC,IBCNT,IBD,IBF,IBI,IBMS,IBX,IBY,IBX3,DA,DIE,DR,X,Y
"RTN","IB20P587",63,0)
 S IBCNT=0
"RTN","IB20P587",64,0)
 D MSG(""),MSG(" >>>Revenue Code")
"RTN","IB20P587",65,0)
 F IBI=1:1 S IBX=$P($T(RVCU+IBI),";;",2) Q:IBX="Q"  D
"RTN","IB20P587",66,0)
 . S IBA=$P(IBX,U),IBB=$P(IBX,U,2),IBC=$P(IBX,U,3)
"RTN","IB20P587",67,0)
 . S IBY="    #"_IBA_" "_IBC,IBD=IBA_U_IBB_U_1_U_IBC
"RTN","IB20P587",68,0)
 . S IBF=+$O(^DGCR(399.2,"B",IBA,0)) Q:'IBF
"RTN","IB20P587",69,0)
 . S IBX3=$G(^DGCR(399.2,IBF,0))
"RTN","IB20P587",70,0)
 . I $P(IBX3,U,1,4)=IBD D MSG(IBY_" already exists") Q
"RTN","IB20P587",71,0)
 . S IBMS=$S($P(IBX3,U,2)="*RESERVED":"added",$P(IBX3,U,4)="*RESERVED":"added",1:"updated")
"RTN","IB20P587",72,0)
 . ;4 slashes to override the letter '*'
"RTN","IB20P587",73,0)
 . S DR="1////"_IBB_";3////"_IBC_";2///1"
"RTN","IB20P587",74,0)
 . S DIE="^DGCR(399.2,",DA=+IBF D ^DIE
"RTN","IB20P587",75,0)
 . S IBCNT=IBCNT+1 D MSG(IBY_" "_IBMS)
"RTN","IB20P587",76,0)
 D MSG("Total "_IBCNT_" code"_$S(IBCNT'=1:"s",1:"")_" updated in the Revenue (#399.2) file")
"RTN","IB20P587",77,0)
 Q
"RTN","IB20P587",78,0)
 ;
"RTN","IB20P587",79,0)
POS ; Place Of Service in fields #.01/piece 1, #.02/piece 2, #.03/piece 3
"RTN","IB20P587",80,0)
 N IBA,IBB,IBC,IBCNT,IBD,IBF,IBI,IBMS,IBX,IBX3,IBY,DA,DIC,DIE,DLAYGO,DD,DO,DR,X,Y
"RTN","IB20P587",81,0)
 S IBCNT=0
"RTN","IB20P587",82,0)
 D MSG(""),MSG(" >>>Place of Service Code")
"RTN","IB20P587",83,0)
 F IBI=1:1 S IBX=$P($T(POSU+IBI),";;",2) Q:IBX="Q"  D
"RTN","IB20P587",84,0)
 . S IBA=$P(IBX,U,1),IBB=$P(IBX,U,2),IBC=$P(IBX,U,3)
"RTN","IB20P587",85,0)
 . S IBY="    #"_IBA_" "_IBB,IBD=IBA_U_IBB_U_IBC
"RTN","IB20P587",86,0)
 . S IBF=+$O(^IBE(353.1,"B",IBA,0))
"RTN","IB20P587",87,0)
 . I IBF D  Q:'IBF
"RTN","IB20P587",88,0)
 .. S IBX3=$G(^IBE(353.1,IBF,0)),DA=IBF,IBMS="updated"
"RTN","IB20P587",89,0)
 .. I $P(IBX3,U,1,3)=IBD D MSG(IBY_" already exists") S IBF=0
"RTN","IB20P587",90,0)
 . I 'IBF D  Q:Y<1
"RTN","IB20P587",91,0)
 .. S DLAYGO=353.1,DIC="^IBE(353.1,",DIC(0)="L",X=IBA D FILE^DICN
"RTN","IB20P587",92,0)
 .. I Y<1 D MSG(" >> ERROR when adding #"_IBA_" "_IBB_" to the #353.1 file, Log a ticket!") Q 
"RTN","IB20P587",93,0)
 .. S DA=+Y,IBMS="added"
"RTN","IB20P587",94,0)
 . S DIE="^IBE(353.1,",DR=".02///"_IBB_";.03///"_IBC D ^DIE
"RTN","IB20P587",95,0)
 . S IBCNT=IBCNT+1 D MSG(IBY_" "_IBMS)
"RTN","IB20P587",96,0)
 D MSG("Total "_IBCNT_" code"_$S(IBCNT'=1:"s",1:"")_" updated in the Place of Service (#353.1) file")
"RTN","IB20P587",97,0)
 Q
"RTN","IB20P587",98,0)
 ;
"RTN","IB20P587",99,0)
RNB ; RNB in fields #.01/piece 1, #.02/piece 2, #.03/piece 3, #.04/piece
"RTN","IB20P587",100,0)
 N IBA,IBB,IBC,IBCNT,IBD,IBE,IBF,IBI,IBMS,IBX,IBY,IBX3,DA,DLAYGO,DIE,DINUM,DR,X,Y
"RTN","IB20P587",101,0)
 S IBCNT=0
"RTN","IB20P587",102,0)
 D MSG(""),MSG(" >>>Reasons Not Billable")
"RTN","IB20P587",103,0)
 F IBI=1:1 S IBX=$P($T(NRNB+IBI),";;",2) Q:IBX="Q"  D
"RTN","IB20P587",104,0)
 . S IBA=$P(IBX,U),IBB=$P(IBX,U,2),IBC=$P(IBX,U,3),IBD=$P(IBX,U,4)
"RTN","IB20P587",105,0)
 . S IBY="    #"_IBA_" "_IBB,IBE=IBB_U_IBC_U_IBD_U_IBA
"RTN","IB20P587",106,0)
 . S IBF=+$O(^IBE(356.8,"B",IBB,0))
"RTN","IB20P587",107,0)
 . I IBF D  Q:'IBF
"RTN","IB20P587",108,0)
 .. S IBX3=$G(^IBE(356.8,IBF,0)),DA=IBF,IBMS="updated"
"RTN","IB20P587",109,0)
 .. I $P(IBX3,U,1,4)=IBE D MSG(IBY_" already exists") S IBF=0 Q
"RTN","IB20P587",110,0)
 . I 'IBF D  Q:Y<1
"RTN","IB20P587",111,0)
 .. F IBF=100:1 S IBX3=$G(^IBE(356.8,IBF,0)) I IBX3="" S DINUM=IBF Q 
"RTN","IB20P587",112,0)
 .. S DLAYGO=356.8,DIC="^IBE(356.8,",DIC(0)="L",X=IBB D FILE^DICN
"RTN","IB20P587",113,0)
 .. I Y<1 D MSG(" >> ERROR when adding "_IBY_" to the #356.8 file, log a ticket!") Q
"RTN","IB20P587",114,0)
 .. S DA=+Y,IBMS="added"
"RTN","IB20P587",115,0)
 . S DIE="^IBE(356.8,",DR=".04///"_IBA_";.02///"_IBC_";.03///"_IBD D ^DIE
"RTN","IB20P587",116,0)
 . S IBCNT=IBCNT+1 D MSG(IBY_" "_IBMS)
"RTN","IB20P587",117,0)
 D MSG("Total "_IBCNT_" code"_$S(IBCNT'=1:"s",1:"")_" updated in the Claims Tracking Non-Billable Reasons (#356.8) file")
"RTN","IB20P587",118,0)
 D MSG("")
"RTN","IB20P587",119,0)
 Q
"RTN","IB20P587",120,0)
 ;
"RTN","IB20P587",121,0)
MSG(IBZ) ;
"RTN","IB20P587",122,0)
 D MES^XPDUTL(IBZ) Q
"RTN","IB20P587",123,0)
 ;
"RTN","IB20P587",124,0)
RVCU ; Revenue code^standard abbreviation^description^update (2)
"RTN","IB20P587",125,0)
 ;;815^ACQUISITION OF BODY COMPONENTS-STEM CELLS-ALLOGENIC^ACQUISITION OF BODY COMPONENTS-STEM CELLS-ALLOGENIC^1
"RTN","IB20P587",126,0)
 ;;826^HEMODIALYSIS OP/HOME HEMODIALYSIS SHORT DURATION^HEMODIALYSIS OP/HOME HEMODIALYSIS SHORT DURATION
"RTN","IB20P587",127,0)
 ;;Q
"RTN","IB20P587",128,0)
 ;
"RTN","IB20P587",129,0)
VALU ; Value code^name (1)
"RTN","IB20P587",130,0)
 ;;84^SHORTER DURATION HEMODIALYSIS
"RTN","IB20P587",131,0)
 ;;Q
"RTN","IB20P587",132,0)
 ;
"RTN","IB20P587",133,0)
CONU ; Condition code^name^update (7)
"RTN","IB20P587",134,0)
 ;;53^INIT PLCMNT MED DEV PART CLINICAL TRIAL OR A FREE SAMPLE
"RTN","IB20P587",135,0)
 ;;55^SNF BED NOT AVAILABLE^1
"RTN","IB20P587",136,0)
 ;;70^SELF ADMINISTERED ANEMIA MANAGEMENT DRUG^1
"RTN","IB20P587",137,0)
 ;;84^DIALYSIS FOR ACUTE KIDNEY INJURY (AKI)
"RTN","IB20P587",138,0)
 ;;85^DELAYED RECERTIFICATION OF HOSPICE TERMINAL ILLNESS
"RTN","IB20P587",139,0)
 ;;86^ADDNL HEMODIALYSIS TREATMENTS WITH MEDICAL JUSTIFICATION
"RTN","IB20P587",140,0)
 ;;87^ESRD SELF CARE RE-TRAINING
"RTN","IB20P587",141,0)
 ;;Q
"RTN","IB20P587",142,0)
 ;
"RTN","IB20P587",143,0)
OCCPU ; Occurrence span code^name (1)
"RTN","IB20P587",144,0)
 ;;MR^RESERVED FOR DISASTER RELATED OCCURRENCE SPAN CODE
"RTN","IB20P587",145,0)
 ;;Q
"RTN","IB20P587",146,0)
 ;
"RTN","IB20P587",147,0)
POSU ; Place of Service code^name^abbreviation (1)
"RTN","IB20P587",148,0)
 ;;02^TELEHEALTH-LOCAT-HLTH SVCS/RELATED SVCS TELEC SYS^TELEHEALTH SVCS
"RTN","IB20P587",149,0)
 ;;Q
"RTN","IB20P587",150,0)
 ;
"RTN","IB20P587",151,0)
NRNB ; code^name^ecme flag^ecme paper flag (2)
"RTN","IB20P587",152,0)
 ;;CV28^CHAMPVA PT SEEN AS VETERAN^1^0
"RTN","IB20P587",153,0)
 ;;MC26^LOD NOT OBTAINED
"RTN","IB20P587",154,0)
 ;;Q
"RTN","IB20P587",155,0)
 ;
"VER")
8.0^22.0
"BLD",10480,6)
^542
**END**
**END**

