Released PSU*4*19 SEQ #18
Extracted from mail message
**KIDS**:PSU*4.0*19^

**INSTALL NAME**
PSU*4.0*19
"BLD",8835,0)
PSU*4.0*19^PHARMACY BENEFITS MANAGEMENT^0^3140716^y
"BLD",8835,4,0)
^9.64PA^^
"BLD",8835,6)
^14
"BLD",8835,6.3)
28
"BLD",8835,"ABPKG")
n
"BLD",8835,"KRN",0)
^9.67PA^779.2^20
"BLD",8835,"KRN",.4,0)
.4
"BLD",8835,"KRN",.401,0)
.401
"BLD",8835,"KRN",.402,0)
.402
"BLD",8835,"KRN",.403,0)
.403
"BLD",8835,"KRN",.5,0)
.5
"BLD",8835,"KRN",.84,0)
.84
"BLD",8835,"KRN",3.6,0)
3.6
"BLD",8835,"KRN",3.8,0)
3.8
"BLD",8835,"KRN",9.2,0)
9.2
"BLD",8835,"KRN",9.8,0)
9.8
"BLD",8835,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",8835,"KRN",9.8,"NM",1,0)
PSUDEM2^^0^B24836351
"BLD",8835,"KRN",9.8,"NM",2,0)
PSUDEM8^^0^B36485136
"BLD",8835,"KRN",9.8,"NM",3,0)
PSUDEM9^^0^B13080794
"BLD",8835,"KRN",9.8,"NM","B","PSUDEM2",1)

"BLD",8835,"KRN",9.8,"NM","B","PSUDEM8",2)

"BLD",8835,"KRN",9.8,"NM","B","PSUDEM9",3)

"BLD",8835,"KRN",19,0)
19
"BLD",8835,"KRN",19.1,0)
19.1
"BLD",8835,"KRN",101,0)
101
"BLD",8835,"KRN",409.61,0)
409.61
"BLD",8835,"KRN",771,0)
771
"BLD",8835,"KRN",779.2,0)
779.2
"BLD",8835,"KRN",870,0)
870
"BLD",8835,"KRN",8989.51,0)
8989.51
"BLD",8835,"KRN",8989.52,0)
8989.52
"BLD",8835,"KRN",8994,0)
8994
"BLD",8835,"KRN","B",.4,.4)

"BLD",8835,"KRN","B",.401,.401)

"BLD",8835,"KRN","B",.402,.402)

"BLD",8835,"KRN","B",.403,.403)

"BLD",8835,"KRN","B",.5,.5)

"BLD",8835,"KRN","B",.84,.84)

"BLD",8835,"KRN","B",3.6,3.6)

"BLD",8835,"KRN","B",3.8,3.8)

"BLD",8835,"KRN","B",9.2,9.2)

"BLD",8835,"KRN","B",9.8,9.8)

"BLD",8835,"KRN","B",19,19)

"BLD",8835,"KRN","B",19.1,19.1)

"BLD",8835,"KRN","B",101,101)

"BLD",8835,"KRN","B",409.61,409.61)

"BLD",8835,"KRN","B",771,771)

"BLD",8835,"KRN","B",779.2,779.2)

"BLD",8835,"KRN","B",870,870)

"BLD",8835,"KRN","B",8989.51,8989.51)

"BLD",8835,"KRN","B",8989.52,8989.52)

"BLD",8835,"KRN","B",8994,8994)

"BLD",8835,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",8835,"QUES",0)
^9.62^^
"BLD",8835,"REQB",0)
^9.611^3^3
"BLD",8835,"REQB",1,0)
PSU*4.0*15^2
"BLD",8835,"REQB",2,0)
LEX*2.0*80^2
"BLD",8835,"REQB",3,0)
ICD*18.0*57^2
"BLD",8835,"REQB","B","ICD*18.0*57",3)

"BLD",8835,"REQB","B","LEX*2.0*80",2)

"BLD",8835,"REQB","B","PSU*4.0*15",1)

"MBREQ")
0
"PKG",97,-1)
1^1
"PKG",97,0)
PHARMACY BENEFITS MANAGEMENT^PSU^PHARMACY BENEFITS MANAGEMENT
"PKG",97,20,0)
^9.402P^^
"PKG",97,22,0)
^9.49I^1^1
"PKG",97,22,1,0)
4.0^3050622^3050718^66481
"PKG",97,22,1,"PAH",1,0)
19^3140716^11748
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","PSUDEM2")
0^1^B24836351^B20686228
"RTN","PSUDEM2",1,0)
PSUDEM2 ;BIR/DAM - Outpatient Visits Extract ;1/23/09 3:10pm
"RTN","PSUDEM2",2,0)
 ;;4.0;PHARMACY BENEFITS MANAGEMENT;**15,19**;MARCH, 2005;Build 28
"RTN","PSUDEM2",3,0)
 ;
"RTN","PSUDEM2",4,0)
 ;DBIA's
"RTN","PSUDEM2",5,0)
 ; Reference to file 2            supported by DBIA 10035
"RTN","PSUDEM2",6,0)
 ; Reference to file 9000010.07   supported by DBIA 3094
"RTN","PSUDEM2",7,0)
 ; Reference to file 9000010      supported by DBIA 3512
"RTN","PSUDEM2",8,0)
 ; Reference to file 4.3          supported by DBIA 2496
"RTN","PSUDEM2",9,0)
 ; Reference to file 9000010.18   supported by DBIA 3560
"RTN","PSUDEM2",10,0)
 ; Reference to file 81           supported by DBIA 2815
"RTN","PSUDEM2",11,0)
 ; Reference to ICDEX Utility     supported by DBIA 5747
"RTN","PSUDEM2",12,0)
EN ;EN Called from PSUCP
"RTN","PSUDEM2",13,0)
 K ^XTMP("PSU_"_PSUJOB,"PSUOPV"),^XTMP("PSU_"_PSUJOB,"PSUTMP")
"RTN","PSUDEM2",14,0)
 K NONE
"RTN","PSUDEM2",15,0)
 NEW CPTDA,CPTNM,ICDXDA,ICDXNM,PSUICN,PSUSSN,PSUSUB,PSUTEDT
"RTN","PSUDEM2",16,0)
 NEW PSUVSTDT,PSUX,PSUY,PTSTAT,SEG,VCPTDA,XX,J
"RTN","PSUDEM2",17,0)
 D DAT1
"RTN","PSUDEM2",18,0)
 I '$D(^XTMP("PSU_"_PSUJOB,"PSUTMP")) D NODATA
"RTN","PSUDEM2",19,0)
 D XMD
"RTN","PSUDEM2",20,0)
EX K ^XTMP("PSU_"_PSUJOB,"PSUPDFLAG")
"RTN","PSUDEM2",21,0)
 K ^XTMP("PSU_"_PSUJOB,"PSUOPV")
"RTN","PSUDEM2",22,0)
 K ^XTMP("PSU_"_PSUJOB,"PSUXMD")
"RTN","PSUDEM2",23,0)
 K ^XTMP("PSU_"_PSUJOB,"PSUTMP")
"RTN","PSUDEM2",24,0)
 Q
"RTN","PSUDEM2",25,0)
 ;
"RTN","PSUDEM2",26,0)
 ;
"RTN","PSUDEM2",27,0)
DAT1 ;Find visits from V POV file that fall within the date range
"RTN","PSUDEM2",28,0)
 S PSUTEDT=PSUEDT
"RTN","PSUDEM2",29,0)
 S PSUDT=PSUSDT-1,PSUX=9999999-PSUDT,PSUY=9999999-PSUEDT N PSUEDT
"RTN","PSUDEM2",30,0)
 S PSUY=PSUSDT-.0001
"RTN","PSUDEM2",31,0)
 F  S PSUY=$O(^AUPNVSIT("B",PSUY)) Q:PSUY'>0  Q:((PSUY\1)>PSUTEDT)  D
"RTN","PSUDEM2",32,0)
 . S PSUVIEN=0 F  S PSUVIEN=$O(^AUPNVSIT("B",PSUY,PSUVIEN)) Q:$G(PSUVIEN)'>0  D
"RTN","PSUDEM2",33,0)
 .. S PSUPT=$$VALI^PSUTL(9000010,PSUVIEN,.05)
"RTN","PSUDEM2",34,0)
 .. D DAT2
"RTN","PSUDEM2",35,0)
 Q
"RTN","PSUDEM2",36,0)
DAT2 ;
"RTN","PSUDEM2",37,0)
 S PSUPOV=0 F  S PSUPOV=$O(^AUPNVPOV("AD",PSUVIEN,PSUPOV)) Q:PSUPOV'>0  D
"RTN","PSUDEM2",38,0)
 .N PSUVIEN
"RTN","PSUDEM2",39,0)
 .S PSUVIEN=$P($G(^AUPNVPOV(PSUPOV,0)),U,3)
"RTN","PSUDEM2",40,0)
 .Q:PSUVIEN=""
"RTN","PSUDEM2",41,0)
 .Q:$D(^XTMP("PSU"_PSUJOB,"PSUOPV",PSUVIEN))  ; quit if visit psuvien already stored
"RTN","PSUDEM2",42,0)
 . D POVS
"RTN","PSUDEM2",43,0)
 .S PSUVSTDT=$P($G(^AUPNVSIT(PSUVIEN,0)),U)\1
"RTN","PSUDEM2",44,0)
 .S PSUSSN=$P(^DPT(PSUPT,0),U,9)
"RTN","PSUDEM2",45,0)
 .S PSUICN=$$GETICN^MPIF001(PSUPT)
"RTN","PSUDEM2",46,0)
 .I PSUICN[-1 S PSUICN=""
"RTN","PSUDEM2",47,0)
 .;PSU*4*15 Protect from empty 150 nodes
"RTN","PSUDEM2",48,0)
 .S PTSTAT=$P($G(^AUPNVSIT(PSUVIEN,150)),U,2),PTSTAT=$S(+PTSTAT:"I",1:"O")
"RTN","PSUDEM2",49,0)
 .D SET
"RTN","PSUDEM2",50,0)
 Q
"RTN","PSUDEM2",51,0)
POVS ;several POVs can have same visit, work all when the first is found
"RTN","PSUDEM2",52,0)
 ;N PSUPOV
"RTN","PSUDEM2",53,0)
 N PSUPOV,ICDDATA
"RTN","PSUDEM2",54,0)
 ;PSU*4*15 move kills out of loop.
"RTN","PSUDEM2",55,0)
 K ALLICD,ALLICDX,ALLCPT,PSUCSYS
"RTN","PSUDEM2",56,0)
 S PSUPOV=0 F  S PSUPOV=$O(^AUPNVPOV("AD",PSUVIEN,PSUPOV)) Q:PSUPOV'>0  D
"RTN","PSUDEM2",57,0)
 .;LOOP CPTs linked by visit
"RTN","PSUDEM2",58,0)
 .S VCPTDA=0 F  S VCPTDA=$O(^AUPNVCPT("AD",PSUVIEN,VCPTDA)) Q:VCPTDA'>0  D
"RTN","PSUDEM2",59,0)
 ..; get/gather cpts
"RTN","PSUDEM2",60,0)
 ..S CPTDA=$P($G(^AUPNVCPT(VCPTDA,0)),U),CPTNM=$P($G(^ICPT(CPTDA,0)),U) S:$L(CPTNM) ALLCPT(CPTNM)=""
"RTN","PSUDEM2",61,0)
 ..;get/gather icds 
"RTN","PSUDEM2",62,0)
 ..S PSUXDA=$P($G(^AUPNVCPT(VCPTDA,0)),U,5) I PSUXDA S ICDDATA=$$ICDDX^ICDEX(PSUXDA,,,"I"),ICDXNM=$P(ICDDATA,U,2)
"RTN","PSUDEM2",63,0)
 ..I $G(ICDXNM)]"" S ALLICDX($S($P(ICDDATA,U,20)=1:"9",$P(ICDDATA,U,20)=30:"10",1:"-null-"),ICDXNM)=""
"RTN","PSUDEM2",64,0)
 .;get original icd
"RTN","PSUDEM2",65,0)
 .S PSUXDA=$P($G(^AUPNVPOV(PSUPOV,0)),U) I PSUXDA S ICDDATA=$$ICDDX^ICDEX(PSUXDA,,,"I"),ICDXNM=$P(ICDDATA,U,2)
"RTN","PSUDEM2",66,0)
 .I $G(ICDXNM)]"" S ALLICDX($S($P(ICDDATA,U,20)=1:"9",$P(ICDDATA,U,20)=30:"10",1:"-null-"),ICDXNM)=""
"RTN","PSUDEM2",67,0)
 Q
"RTN","PSUDEM2",68,0)
SET ; Set segment
"RTN","PSUDEM2",69,0)
 ;Figure Code System for SEG
"RTN","PSUDEM2",70,0)
 I $D(ALLICDX("9")),($D(ALLICDX("10"))) S PSUCSYS="U"
"RTN","PSUDEM2",71,0)
 I '$D(ALLICDX("9")),($D(ALLICDX("10"))) S PSUCSYS="10"
"RTN","PSUDEM2",72,0)
 I $D(ALLICDX("9")),('$D(ALLICDX("10"))) S PSUCSYS="9"
"RTN","PSUDEM2",73,0)
 F I="9","10","-null-"  S J="" F  S J=$O(ALLICDX(I,J)) Q:J=""  S ALLICD(J)=""
"RTN","PSUDEM2",74,0)
 I '$D(ALLICD),'$D(ALLCPT) Q  ;ensure visit has either CPT or ICD
"RTN","PSUDEM2",75,0)
 ;assemble elements and set
"RTN","PSUDEM2",76,0)
 S SEG=U_PSUSNDR_U_PTSTAT_U_PSUVSTDT_U_PSUSSN_U_PSUICN_U
"RTN","PSUDEM2",77,0)
 I $D(ALLICD) S ICDXNM="" F I=7:1:16 S ICDXNM=$O(ALLICD(ICDXNM)) Q:ICDXNM=""  S $P(SEG,U,I)=ICDXNM
"RTN","PSUDEM2",78,0)
 I $D(ALLCPT) S CPTNM="" F J=17:1:26 S CPTNM=$O(ALLCPT(CPTNM)) Q:CPTNM=""  S $P(SEG,U,J)=CPTNM
"RTN","PSUDEM2",79,0)
 S ($P(SEG,U,27),ICDXNM,CPTNM)=""
"RTN","PSUDEM2",80,0)
 S $P(SEG,U,$L(SEG,U))=$G(PSUCSYS,"")
"RTN","PSUDEM2",81,0)
 S ^XTMP("PSU_"_PSUJOB,"PSUTMP",PSUVIEN)=SEG
"RTN","PSUDEM2",82,0)
 Q
"RTN","PSUDEM2",83,0)
 ;
"RTN","PSUDEM2",84,0)
XMD ;Format mailman message and send.
"RTN","PSUDEM2",85,0)
 S PSUAB=0
"RTN","PSUDEM2",86,0)
 F PSUPL=1:1 S PSUAB=$O(^XTMP("PSU_"_PSUJOB,"PSUTMP",PSUAB)) Q:PSUAB'>0  S XX=^(PSUAB) D
"RTN","PSUDEM2",87,0)
 . S ^XTMP("PSU_"_PSUJOB,"PSUOPV",PSUPL)=XX
"RTN","PSUDEM2",88,0)
 NEW PSUMAX,PSULC,PSUTMC,PSUTLC,PSUMC
"RTN","PSUDEM2",89,0)
 S PSUMAX=$$VAL^PSUTL(4.3,1,8.3)
"RTN","PSUDEM2",90,0)
 S PSUMAX=$S(PSUMAX="":10000,PSUMAX>10000:10000,1:PSUMAX)
"RTN","PSUDEM2",91,0)
 S PSUMC=1,PSUMLC=0
"RTN","PSUDEM2",92,0)
 F PSULC=1:1 S X=$G(^XTMP("PSU_"_PSUJOB,"PSUOPV",PSULC)) Q:X=""  D
"RTN","PSUDEM2",93,0)
 .S PSUMLC=PSUMLC+1
"RTN","PSUDEM2",94,0)
 .I PSUMLC>PSUMAX S PSUMC=PSUMC+1,PSUMLC=0,PSULC=PSULC-1 Q  ; +  message
"RTN","PSUDEM2",95,0)
 .I $L(X)<235 S ^XTMP("PSU_"_PSUJOB,"PSUXMD",PSUMC,PSUMLC)=X Q
"RTN","PSUDEM2",96,0)
 .F I=235:-1:1 S Z=$E(X,I) Q:Z="^"
"RTN","PSUDEM2",97,0)
 .S ^XTMP("PSU_"_PSUJOB,"PSUXMD",PSUMC,PSUMLC)=$E(X,1,I)
"RTN","PSUDEM2",98,0)
 .S PSUMLC=PSUMLC+1
"RTN","PSUDEM2",99,0)
 .S ^XTMP("PSU_"_PSUJOB,"PSUXMD",PSUMC,PSUMLC)="*"_$E(X,I+1,999)
"RTN","PSUDEM2",100,0)
 ;
"RTN","PSUDEM2",101,0)
TLC ;   Count Lines sent
"RTN","PSUDEM2",102,0)
 S PSUTLC=0
"RTN","PSUDEM2",103,0)
 F PSUM=1:1:PSUMC S X=$O(^XTMP("PSU_"_PSUJOB,"PSUXMD",PSUM,""),-1),PSUTLC=PSUTLC+X
"RTN","PSUDEM2",104,0)
 ;
"RTN","PSUDEM2",105,0)
 F PSUM=1:1:PSUMC D OPV^PSUDEM5
"RTN","PSUDEM2",106,0)
 D CONF
"RTN","PSUDEM2",107,0)
 Q
"RTN","PSUDEM2",108,0)
CONF ;Construct globals for confirmation message
"RTN","PSUDEM2",109,0)
 ;
"RTN","PSUDEM2",110,0)
 I $G(NONE) S PSUTLC=0
"RTN","PSUDEM2",111,0)
 N PSUDIVIS
"RTN","PSUDEM2",112,0)
 S PSUDIVIS=$P(^XTMP("PSU_"_PSUJOB,"PSUSITE"),U,1)
"RTN","PSUDEM2",113,0)
 S PSUSUB="PSU_"_PSUJOB
"RTN","PSUDEM2",114,0)
 S ^XTMP(PSUSUB,"CONFIRM",PSUDIVIS,8,"M")=PSUMC
"RTN","PSUDEM2",115,0)
 S ^XTMP(PSUSUB,"CONFIRM",PSUDIVIS,8,"L")=PSUTLC
"RTN","PSUDEM2",116,0)
 Q
"RTN","PSUDEM2",117,0)
 ;
"RTN","PSUDEM2",118,0)
NODATA ;Generate a 'No data' message if there is no data in the extract
"RTN","PSUDEM2",119,0)
 ;
"RTN","PSUDEM2",120,0)
 S NONE=1
"RTN","PSUDEM2",121,0)
 M PSUXMYH=PSUXMYS1
"RTN","PSUDEM2",122,0)
 S PSUM=1
"RTN","PSUDEM2",123,0)
 S ^XTMP("PSU_"_PSUJOB,"PSUXMD",PSUM,1)="No data to report"
"RTN","PSUDEM2",124,0)
 Q
"RTN","PSUDEM2",125,0)
REC ;EN If "^" is contained in any record, replace it with "'"
"RTN","PSUDEM2",126,0)
 ;
"RTN","PSUDEM2",127,0)
 I PSUREC["^" S PSUREC=$TR(PSUREC,"^","'")
"RTN","PSUDEM2",128,0)
 Q
"RTN","PSUDEM8")
0^2^B36485136^B17454400
"RTN","PSUDEM8",1,0)
PSUDEM8 ;BIR/DAM - ICD9 Codes for Inpatient PTF Record Extract ;20 DEC 2001
"RTN","PSUDEM8",2,0)
 ;;4.0;PHARMACY BENEFITS MANAGEMENT;**19**;MARCH, 2005;Build 28
"RTN","PSUDEM8",3,0)
 ;
"RTN","PSUDEM8",4,0)
 ;DBIA's
"RTN","PSUDEM8",5,0)
 ; Reference to file 45         supported by DBIA 3511
"RTN","PSUDEM8",6,0)
 ; Reference to file 80         supported by DBIA 10082
"RTN","PSUDEM8",7,0)
 ; Reference to ICDEX           supported by DBIA 5747
"RTN","PSUDEM8",8,0)
 ; Reference to ICDXCODE        supported by DBIA 5699
"RTN","PSUDEM8",9,0)
 ;
"RTN","PSUDEM8",10,0)
EN ;EN  CALLED FROM PSUDEM7
"RTN","PSUDEM8",11,0)
 D PTFIEN
"RTN","PSUDEM8",12,0)
 Q
"RTN","PSUDEM8",13,0)
 ;
"RTN","PSUDEM8",14,0)
PTFIEN ;$O through ^XTMP("PSU_"_PSUJOB,"PSUIPV" to get all the PTF IEN's
"RTN","PSUDEM8",15,0)
 ;
"RTN","PSUDEM8",16,0)
 ;S PSUC=0
"RTN","PSUDEM8",17,0)
 S PSUC=0
"RTN","PSUDEM8",18,0)
 F  S PSUC=$O(^XTMP("PSU_"_PSUJOB,"PSUIPV",PSUC)) Q:'PSUC  D
"RTN","PSUDEM8",19,0)
 .D PTF70     ;gather ICD9 data on ^DGPT(D0,70 node
"RTN","PSUDEM8",20,0)
 .D PTFM      ;gather ICD9 data on ^DGPT(D0,"M","AC" node
"RTN","PSUDEM8",21,0)
 .D FIN K ^XTMP("PSU_"_PSUJOB,"PSUTMP3")
"RTN","PSUDEM8",22,0)
 .D EN^PSUDEM9    ;gather CPT data on 2 separate ^DGPT nodes
"RTN","PSUDEM8",23,0)
 Q
"RTN","PSUDEM8",24,0)
 ;
"RTN","PSUDEM8",25,0)
PTF70 ;Find all ICD pointers present on ^DGPT(D0,70 node
"RTN","PSUDEM8",26,0)
 ;drp 2/13/2012 added second line to each line in old block
"RTN","PSUDEM8",27,0)
 ;N PSU1,PSU2,PSU3,PSU4,PSU5,PSU6,PSU7,PSU8,PSU9,PSU10,PSU11
"RTN","PSUDEM8",28,0)
 N PSU1,PSU2,PSU3,PSU4,PSU5,PSU6,PSU7,PSU8,PSU9,PSU10,PSU11,CSYS
"RTN","PSUDEM8",29,0)
 ;
"RTN","PSUDEM8",30,0)
 S PSU1=$P($G(^DGPT(PSUC,70)),U,10) S:PSU1="" PSU1="NULL"  ;Ptr 1 PRINCIPAL[10P:80
"RTN","PSUDEM8",31,0)
 S:PSU1'="NULL" CSYS(1)=$$CSI^ICDEX(80,PSU1),PSU1("ICDSYS")=$S(CSYS(1)=1:9,CSYS(1)=30:10,1:"")
"RTN","PSUDEM8",32,0)
 ;
"RTN","PSUDEM8",33,0)
 S PSU2=$P($G(^DGPT(PSUC,70)),U,16) S:PSU2="" PSU2="NULL"  ;Ptr 2 SECONDARY[16P:80]
"RTN","PSUDEM8",34,0)
 S:PSU2'="NULL" CSYS(2)=$$CSI^ICDEX(80,PSU2),PSU2("ICDSYS")=$S(CSYS(2)=1:9,CSYS(2)=30:10,1:"")
"RTN","PSUDEM8",35,0)
 ;
"RTN","PSUDEM8",36,0)
 S PSU3=$P($G(^DGPT(PSUC,70)),U,17) S:PSU3="" PSU3="NULL"  ;Ptr 3
"RTN","PSUDEM8",37,0)
 S:PSU3'="NULL" CSYS(3)=$$CSI^ICDEX(80,PSU3),PSU3("ICDSYS")=$S(CSYS(3)=1:9,CSYS(3)=30:10,1:"")
"RTN","PSUDEM8",38,0)
 ;
"RTN","PSUDEM8",39,0)
 S PSU4=$P($G(^DGPT(PSUC,70)),U,18) S:PSU4="" PSU4="NULL"  ;Ptr 4
"RTN","PSUDEM8",40,0)
 S:PSU4'="NULL" CSYS(4)=$$CSI^ICDEX(80,PSU4),PSU4("ICDSYS")=$S(CSYS(4)=1:9,CSYS(4)=30:10,1:"")
"RTN","PSUDEM8",41,0)
 ;
"RTN","PSUDEM8",42,0)
 S PSU5=$P($G(^DGPT(PSUC,70)),U,19) S:PSU5="" PSU5="NULL"  ;Ptr 5
"RTN","PSUDEM8",43,0)
 S:PSU5'="NULL" CSYS(5)=$$CSI^ICDEX(80,PSU5),PSU5("ICDSYS")=$S(CSYS(5)=1:9,CSYS(5)=30:10,1:"")
"RTN","PSUDEM8",44,0)
 ;
"RTN","PSUDEM8",45,0)
 S PSU6=$P($G(^DGPT(PSUC,70)),U,20) S:PSU6="" PSU6="NULL"  ;Ptr 6
"RTN","PSUDEM8",46,0)
 S:PSU6'="NULL" CSYS(6)=$$CSI^ICDEX(80,PSU6),PSU6("ICDSYS")=$S(CSYS(6)=1:9,CSYS(6)=30:10,1:"")
"RTN","PSUDEM8",47,0)
 ;
"RTN","PSUDEM8",48,0)
 S PSU7=$P($G(^DGPT(PSUC,70)),U,21) S:PSU7="" PSU7="NULL"  ;Ptr 7
"RTN","PSUDEM8",49,0)
 S:PSU7'="NULL" CSYS(7)=$$CSI^ICDEX(80,PSU7),PSU7("ICDSYS")=$S(CSYS(7)=1:9,CSYS(7)=30:10,1:"")
"RTN","PSUDEM8",50,0)
 ;
"RTN","PSUDEM8",51,0)
 S PSU8=$P($G(^DGPT(PSUC,70)),U,22) S:PSU8="" PSU8="NULL"  ;Ptr 8
"RTN","PSUDEM8",52,0)
 S:PSU8'="NULL" CSYS(8)=$$CSI^ICDEX(80,PSU8),PSU8("ICDSYS")=$S(CSYS(8)=1:9,CSYS(8)=30:10,1:"")
"RTN","PSUDEM8",53,0)
 ;
"RTN","PSUDEM8",54,0)
 S PSU9=$P($G(^DGPT(PSUC,70)),U,23) S:PSU9="" PSU9="NULL"  ;Ptr 9
"RTN","PSUDEM8",55,0)
 S:PSU9'="NULL" CSYS(9)=$$CSI^ICDEX(80,PSU9),PSU9("ICDSYS")=$S(CSYS(9)=1:9,CSYS(9)=30:10,1:"")
"RTN","PSUDEM8",56,0)
 ;
"RTN","PSUDEM8",57,0)
 S PSU10=$P($G(^DGPT(PSUC,70)),U,24) S:PSU10="" PSU10="NULL"  ;Ptr 10
"RTN","PSUDEM8",58,0)
 S:PSU10'="NULL" CSYS(10)=$$CSI^ICDEX(80,PSU10),PSU10("ICDSYS")=$S(CSYS(10)=1:9,CSYS(10)=30:10,1:"")
"RTN","PSUDEM8",59,0)
 ;
"RTN","PSUDEM8",60,0)
 S PSU11=$P($G(^DGPT(PSUC,70)),U,11) S:PSU11="" PSU11="NULL"  ;Ptr 11 PRINCIPAL DIAGNOSIS pre 1986 [11P:80]
"RTN","PSUDEM8",61,0)
 S:PSU11'="NULL" CSYS(11)=$$CSI^ICDEX(80,PSU11),PSU11("ICDSYS")=$S(CSYS(11)=1:9,CSYS(11)=30:10,1:"")
"RTN","PSUDEM8",62,0)
 D ICD91
"RTN","PSUDEM8",63,0)
 Q
"RTN","PSUDEM8",64,0)
 ;
"RTN","PSUDEM8",65,0)
ICD91 ;Find ICD codes from pointer on ^DGPT(D0,70 node and place in
"RTN","PSUDEM8",66,0)
 ;an array
"RTN","PSUDEM8",67,0)
 ;
"RTN","PSUDEM8",68,0)
 N PSUID1,PSUID2,PSUID3,PSUID4,PSUID5,PSUID6,PSUID7,PSUID8,PSUID9
"RTN","PSUDEM8",69,0)
 N PSUID10,PSUID11
"RTN","PSUDEM8",70,0)
 S:PSU1'["N" PSUID1=$P($$ICDDATA^ICDXCODE(CSYS(1),PSU1),U,2) D
"RTN","PSUDEM8",71,0)
 .I $D(PSUID1) S ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,1,PSUID1)=$G(PSU1("ICDSYS"))   ;1ST ICD CODE
"RTN","PSUDEM8",72,0)
 S:PSU2'["N" PSUID2=$P($$ICDDATA^ICDXCODE(CSYS(2),PSU2),U,2) D
"RTN","PSUDEM8",73,0)
 .I $D(PSUID2) S ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,2,PSUID2)=$G(PSU2("ICDSYS"))   ;2ND ICD CODE
"RTN","PSUDEM8",74,0)
 S:PSU3'["N" PSUID3=$P($$ICDDATA^ICDXCODE(CSYS(3),PSU3),U,2) D
"RTN","PSUDEM8",75,0)
 .I $D(PSUID3) S ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,3,PSUID3)=$G(PSU3("ICDSYS"))   ;3rd ICD CODE
"RTN","PSUDEM8",76,0)
 S:PSU4'["N" PSUID4=$P($$ICDDATA^ICDXCODE(CSYS(4),PSU4),U,2) D
"RTN","PSUDEM8",77,0)
 .I $D(PSUID4) S ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,4,PSUID4)=$G(PSU4("ICDSYS"))   ;4th ICD CODE
"RTN","PSUDEM8",78,0)
 S:PSU5'["N" PSUID5=$P($$ICDDATA^ICDXCODE(CSYS(5),PSU5),U,2) D
"RTN","PSUDEM8",79,0)
 .I $D(PSUID5) S ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,5,PSUID5)=$G(PSU5("ICDSYS"))   ;5th ICD CODE
"RTN","PSUDEM8",80,0)
 S:PSU6'["N" PSUID6=$P($$ICDDATA^ICDXCODE(CSYS(6),PSU6),U,2) D
"RTN","PSUDEM8",81,0)
 .I $D(PSUID6) S ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,6,PSUID6)=$G(PSU6("ICDSYS"))   ;6th ICD CODE
"RTN","PSUDEM8",82,0)
 S:PSU7'["N" PSUID7=$P($$ICDDATA^ICDXCODE(CSYS(7),PSU7),U,2) D
"RTN","PSUDEM8",83,0)
 .I $D(PSUID7) S ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,7,PSUID7)=$G(PSU7("ICDSYS"))   ;7th ICD CODE
"RTN","PSUDEM8",84,0)
 S:PSU8'["N" PSUID8=$P($$ICDDATA^ICDXCODE(CSYS(8),PSU8),U,2) D
"RTN","PSUDEM8",85,0)
 .I $D(PSUID8) S ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,8,PSUID8)=$G(PSU8("ICDSYS"))   ;8th ICD CODE
"RTN","PSUDEM8",86,0)
 S:PSU9'["N" PSUID9=$P($$ICDDATA^ICDXCODE(CSYS(9),PSU9),U,2) D
"RTN","PSUDEM8",87,0)
 .I $D(PSUID9) S ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,9,PSUID9)=$G(PSU9("ICDSYS"))   ;9th ICD CODE
"RTN","PSUDEM8",88,0)
 S:PSU10'["N" PSUID10=$P($$ICDDATA^ICDXCODE(CSYS(10),PSU10),U,2) D
"RTN","PSUDEM8",89,0)
 .I $D(PSUID10) S ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,10,PSUID10)=$G(PSU10("ICDSYS"))  ;10th ICD CODE
"RTN","PSUDEM8",90,0)
 S:PSU11'["N" PSUID11=$P($$ICDDATA^ICDXCODE(CSYS(11),PSU11),U,2) D
"RTN","PSUDEM8",91,0)
 .I $D(PSUID11) S ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,11,PSUID11)=$G(PSU11("ICDSYS"))  ;11th ICD CODE
"RTN","PSUDEM8",92,0)
 Q
"RTN","PSUDEM8",93,0)
 ;
"RTN","PSUDEM8",94,0)
PTFM ;
"RTN","PSUDEM8",95,0)
 S PSUCD=0
"RTN","PSUDEM8",96,0)
 S I=12
"RTN","PSUDEM8",97,0)
 F  S PSUCD=$O(^DGPT(PSUC,"M","AC",PSUCD)) Q:'PSUCD  D
"RTN","PSUDEM8",98,0)
 .I PSUCD="" S PSUCD="N"
"RTN","PSUDEM8",99,0)
 .N PSUIDT
"RTN","PSUDEM8",100,0)
 .I PSUCD'="N" D
"RTN","PSUDEM8",101,0)
 ..S CSYS(I)=$$CSI^ICDEX(80,PSUCD),PSUIDT=$P(($$ICDDATA^ICDXCODE(CSYS(I),PSUCD)),U,2)
"RTN","PSUDEM8",102,0)
 ..S ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,I,PSUIDT)=$S(CSYS(I)=1:9,CSYS(I)=30:10,1:"")
"RTN","PSUDEM8",103,0)
 ..D DEL
"RTN","PSUDEM8",104,0)
 ..S I=I+1
"RTN","PSUDEM8",105,0)
 .Q
"RTN","PSUDEM8",106,0)
 Q
"RTN","PSUDEM8",107,0)
 ;
"RTN","PSUDEM8",108,0)
DEL ;Delete duplicates
"RTN","PSUDEM8",109,0)
 ;
"RTN","PSUDEM8",110,0)
 F N=1:1:10 I $D(^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,N,PSUIDT)) D
"RTN","PSUDEM8",111,0)
 .K ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,I,PSUIDT)
"RTN","PSUDEM8",112,0)
 Q
"RTN","PSUDEM8",113,0)
 ;
"RTN","PSUDEM8",114,0)
FIN ;$O through array, and set codes into the Inpatient Record 
"RTN","PSUDEM8",115,0)
 ;global ^XTMP("PSU_"_PSUJOB,"PSUIPV", ISYSCODE and SYSCODE are the coding system values
"RTN","PSUDEM8",116,0)
 ;DRP 2/13/2012 ADDED SYSCODE LOGIC
"RTN","PSUDEM8",117,0)
 N SYSCODE,ISYSCODE
"RTN","PSUDEM8",118,0)
 S T=0,N=8
"RTN","PSUDEM8",119,0)
 F  S T=$O(^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,T)) Q:'T  Q:N=29  D
"RTN","PSUDEM8",120,0)
 .S PSUIDF=""
"RTN","PSUDEM8",121,0)
 .F  S PSUIDF=$O(^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,T,PSUIDF)) Q:'(PSUIDF]"")  D
"RTN","PSUDEM8",122,0)
 ..S SYSCODE=$G(^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,T,PSUIDF)) S:$G(ISYSCODE)="" ISYSCODE=SYSCODE
"RTN","PSUDEM8",123,0)
 ..S:SYSCODE'="" SYSCODE=$S(SYSCODE=ISYSCODE:SYSCODE,1:"U") ; Set to "U" if there has been a change
"RTN","PSUDEM8",124,0)
 ..I SYSCODE="U",ISYSCODE'="U" S ISYSCODE="U" ;
"RTN","PSUDEM8",125,0)
 ..S $P(^XTMP("PSU_"_PSUJOB,"PSUIPV",PSUC),U,N)=PSUIDF
"RTN","PSUDEM8",126,0)
 ..S N=N+1
"RTN","PSUDEM8",127,0)
 F N=8:1:28 I '($P(^XTMP("PSU_"_PSUJOB,"PSUIPV",PSUC),U,N)]"") D
"RTN","PSUDEM8",128,0)
 .S $P(^XTMP("PSU_"_PSUJOB,"PSUIPV",PSUC),U,N)=""    ;Set unfilled pieces to null
"RTN","PSUDEM8",129,0)
 .Q
"RTN","PSUDEM8",130,0)
 K PSUCSYS1 S PSUCSYS1=$G(SYSCODE,"")
"RTN","PSUDEM8",131,0)
 Q
"RTN","PSUDEM9")
0^3^B13080794^B7601492
"RTN","PSUDEM9",1,0)
PSUDEM9 ;BIR/DAM - CPT Codes for Inpatient PTF Record Extract ;20 DEC 2001
"RTN","PSUDEM9",2,0)
 ;;4.0;PHARMACY BENEFITS MANAGEMENT;**19**;MARCH, 2005;Build 28
"RTN","PSUDEM9",3,0)
 ;
"RTN","PSUDEM9",4,0)
 ;DBIA's
"RTN","PSUDEM9",5,0)
 ; Reference to file 45         supported by DBIA 3511
"RTN","PSUDEM9",6,0)
 ; Reference to ICDEX           supported by DBIA 5747
"RTN","PSUDEM9",7,0)
 ;
"RTN","PSUDEM9",8,0)
EN ;EN      Called from PSUDEM8
"RTN","PSUDEM9",9,0)
 K PSUCSYS,SCOUNT S SCOUNT=0   ; code system marker  "9","10",or "U"
"RTN","PSUDEM9",10,0)
 D CPTP
"RTN","PSUDEM9",11,0)
 D P
"RTN","PSUDEM9",12,0)
 D AO
"RTN","PSUDEM9",13,0)
 D FIN
"RTN","PSUDEM9",14,0)
 K PSUCSYS,SCOUNT
"RTN","PSUDEM9",15,0)
 ;
"RTN","PSUDEM9",16,0)
 Q
"RTN","PSUDEM9",17,0)
 ;
"RTN","PSUDEM9",18,0)
CPTP ;Find CPT pointers for the ^DGPT(D0,"401P" node by $ ordering
"RTN","PSUDEM9",19,0)
 ;through the ^DGPT(D0,"AP",Pointer) cross reference
"RTN","PSUDEM9",20,0)
 ;
"RTN","PSUDEM9",21,0)
 S I=17
"RTN","PSUDEM9",22,0)
 S PSUAP=0
"RTN","PSUDEM9",23,0)
 F  S PSUAP=$O(^DGPT(PSUC,"AP",PSUAP)) Q:PSUAP=""  Q:SCOUNT>15  D
"RTN","PSUDEM9",24,0)
 .N PSUCPT
"RTN","PSUDEM9",25,0)
 .S PSUCPT=$$ICDOP^ICDEX(PSUAP,,,"I")
"RTN","PSUDEM9",26,0)
 .S:+PSUCPT>0 PSUCSYS(PSUC,$P(PSUCPT,U,15))="",PSUCPT=$P(PSUCPT,U,2)   ;Set code system per CPT also
"RTN","PSUDEM9",27,0)
 .I $G(PSUCPT)]"" S ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,I,PSUCPT)=""    ;Set temp global
"RTN","PSUDEM9",28,0)
 .S I=I+1,SCOUNT=SCOUNT+1
"RTN","PSUDEM9",29,0)
 Q
"RTN","PSUDEM9",30,0)
 ;
"RTN","PSUDEM9",31,0)
P ;Find CPT pointers for the ^DGPT(D0,"P" node by $O through
"RTN","PSUDEM9",32,0)
 ;the ^DGPT(D0,"P","AP6",pointer,D1) cross reference.   ANY NUMBER
"RTN","PSUDEM9",33,0)
 ;
"RTN","PSUDEM9",34,0)
 S I=22
"RTN","PSUDEM9",35,0)
 S PSUP=0
"RTN","PSUDEM9",36,0)
 F  S PSUP=$O(^DGPT(PSUC,"P","AP6",PSUP)) Q:PSUP=""  Q:SCOUNT>15  D
"RTN","PSUDEM9",37,0)
 .N PSUCPT
"RTN","PSUDEM9",38,0)
 .S PSUCPT=$$ICDOP^ICDEX(PSUP,,,"I")
"RTN","PSUDEM9",39,0)
 .S:+PSUCPT>0 PSUCSYS(PSUC,$P(PSUCPT,U,15))="",PSUCPT=$P(PSUCPT,U,2)
"RTN","PSUDEM9",40,0)
 .I $G(PSUCPT)]"" S ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,I,PSUCPT)=""    ;Set temp global
"RTN","PSUDEM9",41,0)
 .D DEL
"RTN","PSUDEM9",42,0)
 .S I=I+1,SCOUNT=SCOUNT+1
"RTN","PSUDEM9",43,0)
 Q
"RTN","PSUDEM9",44,0)
 ;
"RTN","PSUDEM9",45,0)
DEL ;Delete duplicates
"RTN","PSUDEM9",46,0)
 ;
"RTN","PSUDEM9",47,0)
 F N=17:1:21 I $D(^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,N,PSUCPT)) D
"RTN","PSUDEM9",48,0)
 .K ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,I,PSUCPT) S SCOUNT=SCOUNT-1
"RTN","PSUDEM9",49,0)
 Q
"RTN","PSUDEM9",50,0)
 ;
"RTN","PSUDEM9",51,0)
AO ;Find CPT pointers for the ^DGPT(D0,"P" node by $O through
"RTN","PSUDEM9",52,0)
 ;the ^DGPT(D0,"S","AO",pointer,D1) cross reference.   ANY NUMBER
"RTN","PSUDEM9",53,0)
 ;
"RTN","PSUDEM9",54,0)
 S I=27
"RTN","PSUDEM9",55,0)
 S PSUBP=0
"RTN","PSUDEM9",56,0)
 F  S PSUBP=$O(^DGPT(PSUC,"S","AO",PSUBP)) Q:PSUBP=""  Q:SCOUNT>15  D
"RTN","PSUDEM9",57,0)
 .N PSUCPT
"RTN","PSUDEM9",58,0)
 .S PSUCPT=$$ICDOP^ICDEX(PSUBP,,,"I")
"RTN","PSUDEM9",59,0)
 .S:+PSUCPT>0 PSUCSYS(PSUC,$P(PSUCPT,U,15))="",PSUCPT=$P(PSUCPT,U,2)
"RTN","PSUDEM9",60,0)
 .I $G(PSUCPT)]"" S ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,I,PSUCPT)=""    ;Set temp global
"RTN","PSUDEM9",61,0)
 .D DEL1
"RTN","PSUDEM9",62,0)
 .S I=I+1,SCOUNT=SCOUNT+1
"RTN","PSUDEM9",63,0)
 Q
"RTN","PSUDEM9",64,0)
 ;
"RTN","PSUDEM9",65,0)
DEL1 ;Delete duplicates
"RTN","PSUDEM9",66,0)
 ;
"RTN","PSUDEM9",67,0)
 F N=17:1:26 I $D(^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,N,PSUCPT)) D
"RTN","PSUDEM9",68,0)
 .K ^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,I,PSUCPT) S SCOUNT=SCOUNT-1
"RTN","PSUDEM9",69,0)
 Q
"RTN","PSUDEM9",70,0)
 ;
"RTN","PSUDEM9",71,0)
FIN ;$O through temp global, and set codes into the Inpatient Record
"RTN","PSUDEM9",72,0)
 ;global, ^XTMP("PSU_"_PSUJOB,"PSUIPV"
"RTN","PSUDEM9",73,0)
 ;
"RTN","PSUDEM9",74,0)
 S T=0,N=28
"RTN","PSUDEM9",75,0)
 F  S T=$O(^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,T)) Q:'T  Q:N=44  D
"RTN","PSUDEM9",76,0)
 .S PSUIDF=0
"RTN","PSUDEM9",77,0)
 .F  S PSUIDF=$O(^XTMP("PSU_"_PSUJOB,"PSUTMP3",PSUC,T,PSUIDF)) Q:'(PSUIDF]"")  D
"RTN","PSUDEM9",78,0)
 ..S $P(^XTMP("PSU_"_PSUJOB,"PSUIPV",PSUC),U,N)=PSUIDF
"RTN","PSUDEM9",79,0)
 ..S N=N+1
"RTN","PSUDEM9",80,0)
 ;
"RTN","PSUDEM9",81,0)
 F N=28:1:44 I '($P(^XTMP("PSU_"_PSUJOB,"PSUIPV",PSUC),U,N)]"") D
"RTN","PSUDEM9",82,0)
 .S $P(^XTMP("PSU_"_PSUJOB,"PSUIPV",PSUC),U,N)=""    ;Set unfilled pieces to null
"RTN","PSUDEM9",83,0)
 S $P(^XTMP("PSU_"_PSUJOB,"PSUIPV",PSUC),U,44)=""    ;Place "^" at end of record
"RTN","PSUDEM9",84,0)
 ;
"RTN","PSUDEM9",85,0)
 ; Place code system per record in  LAST "^"piece  =    "9","10","U"(both)
"RTN","PSUDEM9",86,0)
 ;
"RTN","PSUDEM9",87,0)
 S PSUCSYS=$G(PSUCSYS1,"")
"RTN","PSUDEM9",88,0)
 I $D(PSUCSYS(PSUC,2)),$D(PSUCSYS(PSUC,31)) S PSUCSYS="U"
"RTN","PSUDEM9",89,0)
 I $D(PSUCSYS(PSUC,2)),($G(PSUCSYS,"")'["U") S PSUCSYS=$S(+PSUCSYS=10:"U",1:"9")
"RTN","PSUDEM9",90,0)
 I $D(PSUCSYS(PSUC,31)),($G(PSUCSYS,"")'["U") S PSUCSYS=$S(+PSUCSYS=9:"U",1:"10")
"RTN","PSUDEM9",91,0)
 S $P(^XTMP("PSU_"_PSUJOB,"PSUIPV",PSUC),U,$L(^XTMP("PSU_"_PSUJOB,"PSUIPV",PSUC),U))=PSUCSYS
"RTN","PSUDEM9",92,0)
 K PSUCSYS1
"RTN","PSUDEM9",93,0)
 Q
"VER")
8.0^22.0
"BLD",8835,6)
^18
**END**
**END**

