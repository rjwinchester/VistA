Released GMRC*3*86 SEQ #76
Extracted from mail message
**KIDS**:GMRC*3.0*86^

**INSTALL NAME**
GMRC*3.0*86
"BLD",9601,0)
GMRC*3.0*86^CONSULT/REQUEST TRACKING^0^3160826^y
"BLD",9601,4,0)
^9.64PA^^
"BLD",9601,6.3)
18
"BLD",9601,"ABPKG")
n
"BLD",9601,"INIT")
POST^GMRCXR
"BLD",9601,"KRN",0)
^9.67PA^779.2^20
"BLD",9601,"KRN",.4,0)
.4
"BLD",9601,"KRN",.401,0)
.401
"BLD",9601,"KRN",.402,0)
.402
"BLD",9601,"KRN",.403,0)
.403
"BLD",9601,"KRN",.5,0)
.5
"BLD",9601,"KRN",.84,0)
.84
"BLD",9601,"KRN",3.6,0)
3.6
"BLD",9601,"KRN",3.8,0)
3.8
"BLD",9601,"KRN",9.2,0)
9.2
"BLD",9601,"KRN",9.8,0)
9.8
"BLD",9601,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",9601,"KRN",9.8,"NM",1,0)
GMRCXR^^0^B47022377
"BLD",9601,"KRN",9.8,"NM",2,0)
GMRCGUIB^^0^B52185635
"BLD",9601,"KRN",9.8,"NM","B","GMRCGUIB",2)

"BLD",9601,"KRN",9.8,"NM","B","GMRCXR",1)

"BLD",9601,"KRN",19,0)
19
"BLD",9601,"KRN",19.1,0)
19.1
"BLD",9601,"KRN",101,0)
101
"BLD",9601,"KRN",409.61,0)
409.61
"BLD",9601,"KRN",771,0)
771
"BLD",9601,"KRN",779.2,0)
779.2
"BLD",9601,"KRN",870,0)
870
"BLD",9601,"KRN",8989.51,0)
8989.51
"BLD",9601,"KRN",8989.52,0)
8989.52
"BLD",9601,"KRN",8994,0)
8994
"BLD",9601,"KRN","B",.4,.4)

"BLD",9601,"KRN","B",.401,.401)

"BLD",9601,"KRN","B",.402,.402)

"BLD",9601,"KRN","B",.403,.403)

"BLD",9601,"KRN","B",.5,.5)

"BLD",9601,"KRN","B",.84,.84)

"BLD",9601,"KRN","B",3.6,3.6)

"BLD",9601,"KRN","B",3.8,3.8)

"BLD",9601,"KRN","B",9.2,9.2)

"BLD",9601,"KRN","B",9.8,9.8)

"BLD",9601,"KRN","B",19,19)

"BLD",9601,"KRN","B",19.1,19.1)

"BLD",9601,"KRN","B",101,101)

"BLD",9601,"KRN","B",409.61,409.61)

"BLD",9601,"KRN","B",771,771)

"BLD",9601,"KRN","B",779.2,779.2)

"BLD",9601,"KRN","B",870,870)

"BLD",9601,"KRN","B",8989.51,8989.51)

"BLD",9601,"KRN","B",8989.52,8989.52)

"BLD",9601,"KRN","B",8994,8994)

"BLD",9601,"QUES",0)
^9.62^^
"BLD",9601,"REQB",0)
^9.611^2^2
"BLD",9601,"REQB",1,0)
GMRC*3.0*83^1
"BLD",9601,"REQB",2,0)
GMRC*3.0*75^1
"BLD",9601,"REQB","B","GMRC*3.0*75",2)

"BLD",9601,"REQB","B","GMRC*3.0*83",1)

"INIT")
POST^GMRCXR
"MBREQ")
0
"PKG",44,-1)
1^1
"PKG",44,0)
CONSULT/REQUEST TRACKING^GMRC^CONSULTS/REQUESTS
"PKG",44,20,0)
^9.402P^^
"PKG",44,22,0)
^9.49I^1^1
"PKG",44,22,1,0)
3.0^^2981119^66481
"PKG",44,22,1,"PAH",1,0)
86^3160826
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","GMRCGUIB")
0^2^B52185635^B51487660
"RTN","GMRCGUIB",1,0)
GMRCGUIB ;SLC/DCM,JFR,MA - GUI actions for consults ;5/23/16
"RTN","GMRCGUIB",2,0)
 ;;3.0;CONSULT/REQUEST TRACKING;**4,12,18,20,17,22,29,30,35,45,53,55,64,46,75,86**;DEC 27, 1997;Build 18
"RTN","GMRCGUIB",3,0)
 ;
"RTN","GMRCGUIB",4,0)
 ; This routine invokes IA #2980
"RTN","GMRCGUIB",5,0)
 ;
"RTN","GMRCGUIB",6,0)
SETDA() ;set DA of where audit actions are to be filed
"RTN","GMRCGUIB",7,0)
 S:'$D(^GMR(123,+GMRCO,40,0)) ^GMR(123,GMRCO,40,0)="^123.02DA^^"
"RTN","GMRCGUIB",8,0)
 S DA=$S($P(^GMR(123,+GMRCO,40,0),"^",3):$P(^(0),"^",3)+1,1:1)
"RTN","GMRCGUIB",9,0)
 S $P(^GMR(123,+GMRCO,40,0),"^",3,4)=DA_"^"_DA
"RTN","GMRCGUIB",10,0)
 Q DA
"RTN","GMRCGUIB",11,0)
REASON(GMRCFN,GMRCRQ,GMRCDT) ;Load the reason for the request into ^GMR(123,GMRCO,20
"RTN","GMRCGUIB",12,0)
 ;GMRCFN=File 123 IFN; GMRCRQ=Array containing Reason For Request
"RTN","GMRCGUIB",13,0)
 ;GMRCDT=Date time of entry
"RTN","GMRCGUIB",14,0)
 S ^GMR(123,GMRCFN,20,0)="^^^"_GMRCDT_"^"
"RTN","GMRCGUIB",15,0)
 S L=0,LN=1 F  S L=$O(GMRCRQ(L)) Q:L=""  S ^GMR(123,GMRCFN,20,LN,0)=GMRCRQ(L),LN=LN+1
"RTN","GMRCGUIB",16,0)
 S LN=LN-1,$P(^GMR(123,GMRCFN,20,0),"^",3)=LN
"RTN","GMRCGUIB",17,0)
 K LN,L
"RTN","GMRCGUIB",18,0)
 Q
"RTN","GMRCGUIB",19,0)
SETCOM(COMMENT,WHO) ;Set comment array into tracking actions
"RTN","GMRCGUIB",20,0)
 N GMRCNOW,DR,DIE
"RTN","GMRCGUIB",21,0)
 S GMRCNOW=$$NOW^XLFDT
"RTN","GMRCGUIB",22,0)
 I $P($G(^GMR(123,+GMRCO,0)),"^",11)=$G(GMRCPA) S GMRCPA=""
"RTN","GMRCGUIB",23,0)
 S DIE="^GMR(123,GMRCO,40,",DA(1)=GMRCO,DR=".01////^S X=GMRCNOW;1////^S X=GMRCA;2////^S X=GMRCAD;3////^S X=$G(GMRCORNP);4////^S X=$S($G(WHO):WHO,1:DUZ);6////^S X=$G(GMRCFR);8////^S X=$G(GMRCFF);7////^S X=$G(GMRCPA)"
"RTN","GMRCGUIB",24,0)
 D ^DIE
"RTN","GMRCGUIB",25,0)
 S ^GMR(123,GMRCO,40,DA,1,0)="^^^^"_GMRCAD_"^"
"RTN","GMRCGUIB",26,0)
 S (GMRCND,GMRCND1)=0 F  S GMRCND1=$O(COMMENT(GMRCND1)) Q:GMRCND1=""  S GMRCND=GMRCND+1,^GMR(123,GMRCO,40,DA,1,GMRCND,0)=COMMENT(GMRCND)
"RTN","GMRCGUIB",27,0)
 S $P(^GMR(123,GMRCO,40,DA,1,0),"^",3)=GMRCND,$P(^(0),"^",4)=GMRCND,^GMR(123,GMRCO,40,"B",GMRCNOW,DA)=""
"RTN","GMRCGUIB",28,0)
 D:$D(^GMR(123,+GMRCO,0)) AG123S1^GMRCXR(+GMRCO)  ;alb/sat 86 - update AG xref
"RTN","GMRCGUIB",29,0)
 ;
"RTN","GMRCGUIB",30,0)
 ; if an IFC, call event handler to generate a msg to remote site
"RTN","GMRCGUIB",31,0)
 I $D(^GMR(123,+GMRCO,12)),$D(^(40,DA)) D TRIGR^GMRCIEVT(GMRCO,DA)
"RTN","GMRCGUIB",32,0)
 ;
"RTN","GMRCGUIB",33,0)
 K GMRCND,GMRCND1
"RTN","GMRCGUIB",34,0)
 Q
"RTN","GMRCGUIB",35,0)
CMT(GMRCO,GMRCOM,GMRCADUZ,GMRCWHN,GMRCWHO) ;add comment to consult 
"RTN","GMRCGUIB",36,0)
 ; GMRCO = IEN from file 123
"RTN","GMRCGUIB",37,0)
 ; GMRCOM = array of comments in format GMRCOM(1)="xxxx", GMRCOM(2)="xxx"
"RTN","GMRCGUIB",38,0)
 ; GMRCADUZ = array of alert recipients as GMRCADUZ(DUZ)="" (optional)
"RTN","GMRCGUIB",39,0)
 ; GMRCWHO = IEN from file 200 who's responsible activity (optional)
"RTN","GMRCGUIB",40,0)
 ; GMRCWHN = date time of activity in FM format
"RTN","GMRCGUIB",41,0)
 ;
"RTN","GMRCGUIB",42,0)
 N DA,GMRCA,GMRCAD,GMRCORTX,GMRCDFN,GMRCTM,GMRCRP,GMRCUPD
"RTN","GMRCGUIB",43,0)
 S DA=$$SETDA ; get next activity tracking entry
"RTN","GMRCGUIB",44,0)
 S GMRCA=20,GMRCAD=GMRCWHN S:$G(GMRCWHO) GMRCORNP=GMRCWHO
"RTN","GMRCGUIB",45,0)
 D SETCOM(.GMRCOM,$G(GMRCWHO))
"RTN","GMRCGUIB",46,0)
 ;if a Non VA Care consult, notify HCP of the comment
"RTN","GMRCGUIB",47,0)
 I $$FEE^GMRCHL7H($$GET1^DIQ(123,+GMRCO,1,"I")) D COMMENT^GMRCHL7H(+GMRCO)
"RTN","GMRCGUIB",48,0)
 D  ;update LAST ACTION field even though no status change
"RTN","GMRCGUIB",49,0)
 . N GMRCDR,GMRCSTS
"RTN","GMRCGUIB",50,0)
 . S GMRCSTS="",GMRCDR="9////20"
"RTN","GMRCGUIB",51,0)
 . D STATUS^GMRCP
"RTN","GMRCGUIB",52,0)
 S GMRCDFN=$P(^GMR(123,+GMRCO,0),"^",2)
"RTN","GMRCGUIB",53,0)
 S GMRCORTX="Comment Added to Consult "
"RTN","GMRCGUIB",54,0)
 I $P($G(^GMR(123,GMRCO,12)),U,5)="P" D
"RTN","GMRCGUIB",55,0)
 . S GMRCORTX="Comment Added to remote consult "
"RTN","GMRCGUIB",56,0)
 S GMRCORTX=GMRCORTX_$$ORTX^GMRCAU(+GMRCO)
"RTN","GMRCGUIB",57,0)
 S GMRCRP=+$P(^GMR(123,GMRCO,0),U,14)
"RTN","GMRCGUIB",58,0)
 S GMRCUPD=$$VALID^GMRCAU($P(^GMR(123,+GMRCO,0),U,5),GMRCO,DUZ)
"RTN","GMRCGUIB",59,0)
 I GMRCRP=DUZ D  ;alert team if ord. prov. takes the action
"RTN","GMRCGUIB",60,0)
 . S GMRCTM=1
"RTN","GMRCGUIB",61,0)
 I GMRCUPD>1,GMRCRP'=DUZ D  ; alert ord. prov if update users takes action
"RTN","GMRCGUIB",62,0)
 . S GMRCADUZ(GMRCRP)=""
"RTN","GMRCGUIB",63,0)
 I '$G(GMRCTM),GMRCUPD<2 D  ;alert both if not ord. prov or update user
"RTN","GMRCGUIB",64,0)
 . S GMRCTM=1,GMRCADUZ(GMRCRP)=""
"RTN","GMRCGUIB",65,0)
 D MSG^GMRCP(GMRCDFN,GMRCORTX,+GMRCO,63,.GMRCADUZ,$G(GMRCTM))
"RTN","GMRCGUIB",66,0)
 Q
"RTN","GMRCGUIB",67,0)
SFILE(GMRCO,GMRCA,GMRCSF,GMRCORNP,GMRCDUZ,GMRCOM,GMRCALF,GMRCATO,GMRCAD) ;Process various file update functions from the GUI for a consult
"RTN","GMRCGUIB",68,0)
 ; ADMIN COMPLETE or SIGNIFICANT FINDINGS
"RTN","GMRCGUIB",69,0)
 ;Input variables:
"RTN","GMRCGUIB",70,0)
 ;GMRCO=File 123 IEN of the consult record
"RTN","GMRCGUIB",71,0)
 ;GMRCA=pointer to REQUEST ACTION TYPES (#123.1) 10=complete, 4=Sig find.
"RTN","GMRCGUIB",72,0)
 ;GMRCSF=Significant Findings flag: 'Y'= significant finding
"RTN","GMRCGUIB",73,0)
 ;                                : 'N'= no significant finding
"RTN","GMRCGUIB",74,0)
 ;                                : 'U'=unknown significant finding
"RTN","GMRCGUIB",75,0)
 ;GMRCORNP=Provider Responsible for action
"RTN","GMRCGUIB",76,0)
 ;GMRCDUZ=Person actually doing the action
"RTN","GMRCGUIB",77,0)
 ;GMRCOM=An array of comments by reference ARRAY(1)="xxx",ARRAY(2)="xxx"
"RTN","GMRCGUIB",78,0)
 ;GMRCALF=Flag to signal that alerts are to be sent; 'N'=NO, 'Y'=YES
"RTN","GMRCGUIB",79,0)
 ;GMRCATO=Who alerts are to be sent to; a comma delimited string of DUZ's
"RTN","GMRCGUIB",80,0)
 ;GMRCAD =FM date/time of activity
"RTN","GMRCGUIB",81,0)
 ;
"RTN","GMRCGUIB",82,0)
 ;Output:
"RTN","GMRCGUIB",83,0)
 ; GMRCERR=Error Flag: 0 if no error, 1 if error occurred
"RTN","GMRCGUIB",84,0)
 ; GMRCERMS - Error message or null
"RTN","GMRCGUIB",85,0)
 ;    returned as GMRCERR^GMRCERMS
"RTN","GMRCGUIB",86,0)
 ;
"RTN","GMRCGUIB",87,0)
 N GMRCERR,GMRCERMS,GMRCTM
"RTN","GMRCGUIB",88,0)
 L +^GMR(123,GMRCO):5 I '$T S GMRCERR=1,GMRCERMS="Record Locked. File Update Not Accomplished." Q GMRCERR_"^"_GMRCERMS
"RTN","GMRCGUIB",89,0)
 S GMRCERR=0,GMRCTM=0,GMRCERMS="",DR="",GMRCORTX=""
"RTN","GMRCGUIB",90,0)
 N GMRCADUZ S GMRCADUZ=""
"RTN","GMRCGUIB",91,0)
 S GMRCNOW=$$NOW^XLFDT,GMRCSTS=$P(^GMR(123,+GMRCO,0),"^",12),GMRCDFN=$P(^(0),"^",2)
"RTN","GMRCGUIB",92,0)
 I '$G(GMRCDUZ) S GMRCDUZ=DUZ
"RTN","GMRCGUIB",93,0)
 I '$G(GMRCAD) S GMRCAD=GMRCNOW
"RTN","GMRCGUIB",94,0)
 ;Insure comment array contains text for Complete action.
"RTN","GMRCGUIB",95,0)
 I GMRCA=10 D  I GMRCERR=1 S GMRCERMS="Comment field must contain a text value!" Q GMRCERR_"^"_GMRCERMS
"RTN","GMRCGUIB",96,0)
 . S GMRCERR=1
"RTN","GMRCGUIB",97,0)
 . I '$D(GMRCOM) Q
"RTN","GMRCGUIB",98,0)
 . N GMRCOM1 S GMRCOM1=""
"RTN","GMRCGUIB",99,0)
 . F  S GMRCOM1=$O(GMRCOM(GMRCOM1)) Q:(GMRCOM1=""!(GMRCERR=0))  D
"RTN","GMRCGUIB",100,0)
 .. I $TR($G(GMRCOM(GMRCOM1))," ","")'="" S GMRCERR=0 Q
"RTN","GMRCGUIB",101,0)
 I +$G(GMRCA),GMRCA=10 D
"RTN","GMRCGUIB",102,0)
 .S GMRCSF=$G(GMRCSF,"")
"RTN","GMRCGUIB",103,0)
 .S GMRCSTS=2
"RTN","GMRCGUIB",104,0)
 .S DR="8////^S X=GMRCSTS;9////^S X=GMRCA;15////^S X=GMRCSF"
"RTN","GMRCGUIB",105,0)
 .S GMRCORTX="Completed Consult "_$$ORTX^GMRCAU(+GMRCO)_$S(GMRCSF="Y":" with Sig Findings",GMRCSF="N":" with no Sig Findings",1:"")
"RTN","GMRCGUIB",106,0)
 .I $P($G(^GMR(123,+GMRCO,0)),U,14),$P($G(^GMR(123,+GMRCO,0)),U,14)'=DUZ S GMRCADUZ($P($G(^(0)),U,14))=""
"RTN","GMRCGUIB",107,0)
 .Q
"RTN","GMRCGUIB",108,0)
 I $G(GMRCALF)=1 D
"RTN","GMRCGUIB",109,0)
 .N I
"RTN","GMRCGUIB",110,0)
 .F I=1:1  S X=$P(GMRCATO,";",I) Q:X=""  S GMRCADUZ(X)=""
"RTN","GMRCGUIB",111,0)
 .Q
"RTN","GMRCGUIB",112,0)
 I $L(GMRCA),GMRCA=4 S DR=DR_$S($L(DR):";",1:"")_"9////^S X=GMRCA;15////^S X=GMRCSF" D
"RTN","GMRCGUIB",113,0)
 .S GMRCORTX=$S(GMRCSF="Y":"Sig Findings ",GMRCSF="N":"No Sig Findings ",1:"Unknown Sig Findings ")_"for consult "_$$ORTX^GMRCAU(GMRCO)
"RTN","GMRCGUIB",114,0)
 .I $P($G(^GMR(123,+GMRCO,0)),U,14),$P($G(^GMR(123,+GMRCO,0)),U,14)'=DUZ S GMRCADUZ($P($G(^(0)),U,14))=""
"RTN","GMRCGUIB",115,0)
 .S GMRCUPD=$$VALID^GMRCAU($P(^GMR(123,+GMRCO,0),U,5),GMRCO,DUZ)
"RTN","GMRCGUIB",116,0)
 .I +GMRCUPD<2 S GMRCTM=1
"RTN","GMRCGUIB",117,0)
 .I +GMRCUPD>1,+$P($G(^GMR(123,+GMRCO,0)),U,14)=DUZ S GMRCTM=1
"RTN","GMRCGUIB",118,0)
 .Q
"RTN","GMRCGUIB",119,0)
 I $L(DR) S DIE="^GMR(123,",DA=GMRCO D ^DIE K DIE,DR
"RTN","GMRCGUIB",120,0)
 I '$O(GMRCOM(0)) D AUDIT^GMRCP
"RTN","GMRCGUIB",121,0)
 I $D(GMRCOM),$O(GMRCOM(0)) D
"RTN","GMRCGUIB",122,0)
 .N DA
"RTN","GMRCGUIB",123,0)
 .S DA=$$SETDA()
"RTN","GMRCGUIB",124,0)
 .D SETCOM(.GMRCOM,GMRCDUZ)
"RTN","GMRCGUIB",125,0)
 .Q
"RTN","GMRCGUIB",126,0)
 L -^GMR(123,GMRCO)
"RTN","GMRCGUIB",127,0)
 ;
"RTN","GMRCGUIB",128,0)
 D MSG^GMRCP(GMRCDFN,GMRCORTX,+GMRCO,$S(GMRCA=20:63,1:23),.GMRCADUZ,GMRCTM)
"RTN","GMRCGUIB",129,0)
 ;
"RTN","GMRCGUIB",130,0)
 I $S(GMRCA=10:1,(GMRCA=4&($P(^GMR(123,GMRCO,0),U,12)=2)):1,1:0) D
"RTN","GMRCGUIB",131,0)
 . D EN^GMRCHL7($P(^GMR(123,GMRCO,0),"^",2),GMRCO,$G(GMRCTYPE),$G(GMRCRB),"RE",GMRCORNP,$G(GMRCVSIT),.GMRCOM,,GMRCAD)
"RTN","GMRCGUIB",132,0)
 K DIE,DR,DA,GMRCDT,GMRCNOW,GMRCAD,GMRCORNP,GMRCDUZ,GMRCRSLT,GMRCSTS,GMRCADUZ,GMRCORTX,GMRCDFN
"RTN","GMRCGUIB",133,0)
 Q GMRCERR_"^"_GMRCERMS
"RTN","GMRCGUIB",134,0)
 ;
"RTN","GMRCGUIB",135,0)
SCH(GMRCO,GMRCORNP,GMRCAD,GMRCADUZ,GMRCMT) ;schedule a consult API
"RTN","GMRCGUIB",136,0)
 ; Input variables:
"RTN","GMRCGUIB",137,0)
 ;GMRCO - The internal file number of the consult from File 123
"RTN","GMRCGUIB",138,0)
 ;GMRCORNP - Name of the person who actually 'Received' the consult 
"RTN","GMRCGUIB",139,0)
 ;GMRCAD - Actual date time that consult was received into the service.
"RTN","GMRCGUIB",140,0)
 ;GMRCADUZ - array of alert recipients as chosen by user (by reference)
"RTN","GMRCGUIB",141,0)
 ;   ARRAY(DUZ)="" 
"RTN","GMRCGUIB",142,0)
 ;GMRCMT - array of comments if entered (by reference)
"RTN","GMRCGUIB",143,0)
 ;   ARRAY(1)="FIRST LINE OF COMMENT"
"RTN","GMRCGUIB",144,0)
 ;   ARRAY(2)="SECOND LINE OF COMMENT"
"RTN","GMRCGUIB",145,0)
 ;
"RTN","GMRCGUIB",146,0)
 ;Output:
"RTN","GMRCGUIB",147,0)
 ;GMRCERR - Error Condition Code: 0 = NO error, 1=error
"RTN","GMRCGUIB",148,0)
 ;GMRCERMS - Error message or null
"RTN","GMRCGUIB",149,0)
 ;  returned as GMRCERR^GMRCERMS
"RTN","GMRCGUIB",150,0)
        ;
"RTN","GMRCGUIB",151,0)
 N DFN,GMRCSTS,GMRCNOW,GMRCERR,GMRCERMS
"RTN","GMRCGUIB",152,0)
 S GMRCERR=0,GMRCERMS="",GMRCNOW=$$NOW^XLFDT
"RTN","GMRCGUIB",153,0)
 S:$G(GMRCAD)="" GMRCAD=GMRCNOW
"RTN","GMRCGUIB",154,0)
 S:'$G(GMRCDUZ) GMRCDUZ=DUZ
"RTN","GMRCGUIB",155,0)
 S DFN=$P($G(^GMR(123,GMRCO,0)),"^",2) I DFN="" D  Q GMRCERR_"^"_GMRCERMS
"RTN","GMRCGUIB",156,0)
 . S GMRCERR="1",GMRCERMS="Not A Valid Consult - File Not Found."
"RTN","GMRCGUIB",157,0)
 . D EXIT^GMRCGUIA
"RTN","GMRCGUIB",158,0)
 S GMRCSTS=8,GMRCA=8
"RTN","GMRCGUIB",159,0)
 D STATUS^GMRCP I $D(GMRCQUT) D EXIT^GMRCGUIA Q GMRCERR_"^"_GMRCERMS
"RTN","GMRCGUIB",160,0)
 I '$O(GMRCMT(0)) D AUDIT^GMRCP
"RTN","GMRCGUIB",161,0)
 I $O(GMRCMT(0)) D
"RTN","GMRCGUIB",162,0)
 . S DA=$$SETDA
"RTN","GMRCGUIB",163,0)
 . D SETCOM(.GMRCMT,GMRCDUZ)
"RTN","GMRCGUIB",164,0)
 D EN^GMRCHL7(DFN,GMRCO,"","","SC",GMRCORNP,"","","",GMRCAD)
"RTN","GMRCGUIB",165,0)
 D  ;send alerts
"RTN","GMRCGUIB",166,0)
 . N GMRCUPD,GMRCTM,TXT
"RTN","GMRCGUIB",167,0)
 . S TXT="Scheduled Consult: "_$$ORTX^GMRCAU(GMRCO)
"RTN","GMRCGUIB",168,0)
 . S GMRCTM=0
"RTN","GMRCGUIB",169,0)
 . I $P(^GMR(123,+GMRCO,0),U,14),$P(^GMR(123,+GMRCO,0),U,14)'=DUZ S GMRCADUZ($P(^(0),U,14))=""
"RTN","GMRCGUIB",170,0)
 . S GMRCUPD=$$VALID^GMRCAU($P(^GMR(123,+GMRCO,0),U,5),GMRCO,DUZ)
"RTN","GMRCGUIB",171,0)
 . I +GMRCUPD<2 S GMRCTM=1
"RTN","GMRCGUIB",172,0)
 . I +GMRCUPD>1,+$P($G(^GMR(123,+GMRCO,0)),U,14)=DUZ S GMRCTM=1
"RTN","GMRCGUIB",173,0)
 . D MSG^GMRCP(DFN,TXT,GMRCO,63,.GMRCADUZ,GMRCTM)
"RTN","GMRCGUIB",174,0)
 D EXIT^GMRCGUIA
"RTN","GMRCGUIB",175,0)
 Q GMRCERR_"^"_GMRCERMS
"RTN","GMRCGUIB",176,0)
DOCLIST(GMRCAR,GMRCDA,GMRCMED)  ;return list of linked results
"RTN","GMRCGUIB",177,0)
 ; Input:
"RTN","GMRCGUIB",178,0)
 ;  GMRCAR - array to return list, passed by reference
"RTN","GMRCGUIB",179,0)
 ;  GMRCDA - ien from file 123
"RTN","GMRCGUIB",180,0)
 ;  GMRCMED- 1 = include med results; 0 = only TIU docs
"RTN","GMRCGUIB",181,0)
 ;
"RTN","GMRCGUIB",182,0)
 ; Output:
"RTN","GMRCGUIB",183,0)
 ;  GMRCAR - array in format
"RTN","GMRCGUIB",184,0)
 ;       GMRCAR(0)=zero node of record
"RTN","GMRCGUIB",185,0)
 ;       GMRCAR(50,1)="ien;global ref," e.g. 5;TIU(8925, or 3;MCAR(691,
"RTN","GMRCGUIB",186,0)
 ;       GMRCAR(50,2)="ien;global ref,"
"RTN","GMRCGUIB",187,0)
 ;
"RTN","GMRCGUIB",188,0)
 I '$D(^GMR(123,GMRCDA,0)) Q
"RTN","GMRCGUIB",189,0)
 S GMRCAR(0)=^GMR(123,GMRCDA,0),$P(GMRCAR(0),U,20)=""
"RTN","GMRCGUIB",190,0)
 N RES,CNT S RES="",CNT=1
"RTN","GMRCGUIB",191,0)
 F  S RES=$O(^GMR(123,GMRCDA,50,"B",RES)) Q:RES=""  D
"RTN","GMRCGUIB",192,0)
 . I '$G(GMRCMED) Q:RES'["TIU(8925"
"RTN","GMRCGUIB",193,0)
 . S GMRCAR(50,CNT)=RES
"RTN","GMRCGUIB",194,0)
 . I RES["MCAR" D
"RTN","GMRCGUIB",195,0)
 .. N ARR,STR
"RTN","GMRCGUIB",196,0)
 .. D MEDLKUP^MCARUTL3(.ARR,+$P(RES,"MCAR(",2),+RES)
"RTN","GMRCGUIB",197,0)
 .. I '+ARR K GMRCAR(50,CNT) Q
"RTN","GMRCGUIB",198,0)
 .. S STR=$P(ARR,U,9)_U_$P(ARR,U,6)_$S($P(ARR,U,10):"^^^^^^^^1",1:"")
"RTN","GMRCGUIB",199,0)
 .. S GMRCAR(50,CNT)=GMRCAR(50,CNT)_U_STR
"RTN","GMRCGUIB",200,0)
 . S CNT=CNT+1
"RTN","GMRCGUIB",201,0)
 Q
"RTN","GMRCXR")
0^1^B47022377^B34169214
"RTN","GMRCXR",1,0)
GMRCXR ; ALB/SAT - GMR DD UTILITY ;AUG 25, 2016
"RTN","GMRCXR",2,0)
 ;;3.0;CONSULT/REQUEST TRACKING;**83,86**;Dec 27, 1997;Build 18
"RTN","GMRCXR",3,0)
 ;DD support for VISTA SCHEDULING ENHANCEMENT SD*5.3*627
"RTN","GMRCXR",4,0)
 ;Reference is made to ICR #6184
"RTN","GMRCXR",5,0)
 ;
"RTN","GMRCXR",6,0)
 Q
"RTN","GMRCXR",7,0)
AG123S1(GMRCDA1,GMRCDR) ;build AG xref ;called by 'Set Logic' and 'Kill Logic' of the New Style AG cross reference #336 in file 123
"RTN","GMRCXR",8,0)
 ;GMRCDA1  = DA(1) IEN pointer to REQUEST/CONSULTATION file 123
"RTN","GMRCXR",9,0)
 ;GMRCDR        = DATE OF REQUEST in FM format from field 3 of top level of file 123
"RTN","GMRCXR",10,0)
 N CHK
"RTN","GMRCXR",11,0)
 S GMRCDA1=$G(GMRCDA1) Q:'+GMRCDA1
"RTN","GMRCXR",12,0)
 S GMRCDR=$G(GMRCDR,0) S:'GMRCDR GMRCDR=$P($G(^GMR(123,GMRCDA1,0)),U,7)   ;alb/sat 86 setup GMRCDR if not passed in
"RTN","GMRCXR",13,0)
 Q:GMRCDR=""   ;alb/sat 86 do not include if DATE OF REQUEST is not defined
"RTN","GMRCXR",14,0)
 S CHK=$$REQCHK(GMRCDA1)
"RTN","GMRCXR",15,0)
 S:(CHK=0)&(GMRCDR'="") ^GMR(123,"AG",GMRCDR,GMRCDA1)=""
"RTN","GMRCXR",16,0)
 K:(+CHK)&(GMRCDR'="") ^GMR(123,"AG",GMRCDR,GMRCDA1)
"RTN","GMRCXR",17,0)
 Q
"RTN","GMRCXR",18,0)
 ;
"RTN","GMRCXR",19,0)
REQCHK(GMRCID) ;check activities to determine if the REQUEST/CONSULTATION entry is still active and not scheduled
"RTN","GMRCXR",20,0)
 N GMRCCAN,GMRCCANF,GMRCDC,GMRCDONE,GMRCES,GMRCESF,GMRCNOD,GMRCPDC,GMRC40,GMRCACT,GMRCRPA,GMRCSCH,GMRCSCHF,GMRCSER,GMRCST,GMRCSTF
"RTN","GMRCXR",21,0)
 N GMRCCS,GMRCFD,GMRCPA
"RTN","GMRCXR",22,0)
 N GMRCNOS,X,X1,X2   ;alb/sat 86
"RTN","GMRCXR",23,0)
 S GMRCPA=$O(^ORD(100.01,"B","ACTIVE",0))
"RTN","GMRCXR",24,0)
 S GMRCPDC=$O(^ORD(100.01,"B","DISCONTINUED",0))
"RTN","GMRCXR",25,0)
 S GMRCCS=$$GET1^DIQ(123,GMRCID_",",8,"I")
"RTN","GMRCXR",26,0)
 Q:GMRCCS=GMRCPDC 1   ;don't return this entry if CPRS STATUS is DISCONTINUED
"RTN","GMRCXR",27,0)
 ;Q:$$GET1^DIQ(123,GMRCID_",",8,"I")=GMRCPDC 1   ;don't include this entry if CPRS STATUS is DISCONTINUED  ;alb/sat 86 removed redundant check
"RTN","GMRCXR",28,0)
 S GMRCFD=$P($$GET1^DIQ(123,GMRCID_",",.01,"I"),".",1)   ;alb/sat 86 - get FILE ENTRY DATE
"RTN","GMRCXR",29,0)
 Q:$$FMADD^XLFDT(DT,-365)>GMRCFD 1  ;alb/sat 86 - do not include records with FILE ENTRY DATE older than 1 year
"RTN","GMRCXR",30,0)
 S GMRCSCH=$$GETIEN("SCHEDULED")
"RTN","GMRCXR",31,0)
 S GMRCST=$$GETIEN("STATUS CHANGE")
"RTN","GMRCXR",32,0)
 S GMRCCAN=$$GETIEN("CANCELLED")
"RTN","GMRCXR",33,0)
 S GMRCDONE=$$GETIEN("COMPLETE/UPDATE")
"RTN","GMRCXR",34,0)
 S GMRCDC=$$GETIEN("DISCONTINUED")
"RTN","GMRCXR",35,0)
 S GMRCES=$$GETIEN("EDIT/RESUBMITTED")
"RTN","GMRCXR",36,0)
 S GMRCNOD=$G(^GMR(123,GMRCID,0))
"RTN","GMRCXR",37,0)
 S GMRCSER=$P(GMRCNOD,U,5)
"RTN","GMRCXR",38,0)
 S DFN=$P(GMRCNOD,U,2)
"RTN","GMRCXR",39,0)
 S (GMRCCANF,GMRCESF,GMRCSCHF,GMRCSTF)=0
"RTN","GMRCXR",40,0)
 ;alb/sat 86 - start modification
"RTN","GMRCXR",41,0)
 I GMRCCS=13 D  G REQCHKX     ;cancel/no-show  ;13 is cancel - see A+7^SDCNSLT SD*5.3*627
"RTN","GMRCXR",42,0)
 .S GMRCCANF=1
"RTN","GMRCXR",43,0)
 .S GMRCNOS=$O(^GMR(123,GMRCID,40,":"),-1) Q:'+GMRCNOS       ;ICR 6185
"RTN","GMRCXR",44,0)
 .S GMRCNOS=$O(^GMR(123,GMRCID,40,GMRCNOS),-1) Q:'+GMRCNOS
"RTN","GMRCXR",45,0)
 .S X2=$P($G(^GMR(123,GMRCID,40,GMRCNOS,0)),U),X1=DT D ^%DTC Q:X'=""&(X>180)   ;ICR 6185
"RTN","GMRCXR",46,0)
 .I $$FINDTXT(GMRCID,GMRCNOS) D
"RTN","GMRCXR",47,0)
 ..S GMRCCANF=0
"RTN","GMRCXR",48,0)
 ;alb/sat 86 - end modification
"RTN","GMRCXR",49,0)
 ;GMRCESF - if 1 we have determined this request should be returned (return 0)
"RTN","GMRCXR",50,0)
 S GMRCRPA=9999999 F  S GMRCRPA=$O(^GMR(123,GMRCID,40,GMRCRPA),-1) Q:GMRCRPA'>0  D  Q:GMRCCANF=1  Q:GMRCSCHF=1  Q:GMRCESF=1
"RTN","GMRCXR",51,0)
 .S GMRC40=$G(^GMR(123,GMRCID,40,GMRCRPA,0))
"RTN","GMRCXR",52,0)
 .S GMRCACT=$P(GMRC40,U,2)   ;ACTIVITY field 1
"RTN","GMRCXR",53,0)
 .I GMRCACT'=GMRCSCH,GMRCACT'=GMRCST,GMRCACT'=GMRCCAN,GMRCACT'=GMRCDONE,GMRCACT'=GMRCDC,GMRCACT'=GMRCES Q  ;only watch the ones we need
"RTN","GMRCXR",54,0)
 .I GMRCACT=GMRCCAN!(GMRCACT=GMRCDONE)!(GMRCACT=GMRCDC) S GMRCCANF=1 Q    ;skip completed consults/mgh
"RTN","GMRCXR",55,0)
 .I GMRCACT=GMRCES S GMRCESF=1 Q
"RTN","GMRCXR",56,0)
 .I GMRCACT=GMRCSCH,GMRCSTF=1 S GMRCESF=1 Q
"RTN","GMRCXR",57,0)
 .I GMRCACT=GMRCSCH,GMRCSTF'=1,$$SCHED(DFN,$P(GMRC40,U,3),GMRCSER) S GMRCSCHF=1 Q
"RTN","GMRCXR",58,0)
 .;I GMRCACT=GMRCST,$$FINDTXT(GMRCID,GMRCRPA) S GMRCSTF=1
"RTN","GMRCXR",59,0)
 .I GMRCACT=GMRCST,GMRCCS=GMRCPA S GMRCSTF=1
"RTN","GMRCXR",60,0)
REQCHKX ; exit  ;alb/sat 86 - add REQCHKX tag
"RTN","GMRCXR",61,0)
 Q:GMRCSCHF GMRCSCHF
"RTN","GMRCXR",62,0)
 Q:GMRCCANF GMRCCANF
"RTN","GMRCXR",63,0)
 Q:GMRCESF 0
"RTN","GMRCXR",64,0)
 Q 0
"RTN","GMRCXR",65,0)
 ;
"RTN","GMRCXR",66,0)
GETIEN(GMRCNM) ;get ID from REQUEST ACTION TYPES file 123.1
"RTN","GMRCXR",67,0)
 N Y
"RTN","GMRCXR",68,0)
 S Y=$O(^GMR(123.1,"B",GMRCNM,0))
"RTN","GMRCXR",69,0)
 Q Y
"RTN","GMRCXR",70,0)
 ;
"RTN","GMRCXR",71,0)
SCHED(DFN,GMRCDT,GMRCSVC) ;look for appointment with stop code matching one in REQUEST SERVICES
"RTN","GMRCXR",72,0)
 ;INPUT:
"RTN","GMRCXR",73,0)
 ; DFN     - patient ID pointer to PATIENT file
"RTN","GMRCXR",74,0)
 ; GMRCDT - actual activity date in FM format
"RTN","GMRCXR",75,0)
 ; GMRCSVC  - request services ID pointer to REQUEST SERVICES file 123.5
"RTN","GMRCXR",76,0)
 ;RETURN:
"RTN","GMRCXR",77,0)
 ; 0 = no appointment found with matching stop code
"RTN","GMRCXR",78,0)
 ; 1 = appointment found with matching stop code
"RTN","GMRCXR",79,0)
 ;Q 1   ;do not check for match for now
"RTN","GMRCXR",80,0)
 N GMRCAPI,GMRCARR,GMRCI,GMRCJ,GMRCRET,GMRCSTP,GMRCSTPL
"RTN","GMRCXR",81,0)
 S GMRCRET=0
"RTN","GMRCXR",82,0)
 S GMRCSVC=$G(GMRCSVC)
"RTN","GMRCXR",83,0)
 Q:GMRCSVC="" 0
"RTN","GMRCXR",84,0)
 S GMRCDT=$P($G(GMRCDT),".",1)
"RTN","GMRCXR",85,0)
 I GMRCDT'?7N S GMRCDT=1000103
"RTN","GMRCXR",86,0)
 S GMRCI=0 F  S GMRCI=$O(^GMR(123.5,GMRCSVC,688,GMRCI)) Q:GMRCI'>0  D
"RTN","GMRCXR",87,0)
 .S GMRCSTPL(+$P($G(^GMR(123.5,GMRCSVC,688,GMRCI,0)),U,1))=""
"RTN","GMRCXR",88,0)
 K ^TMP($J,"SDAMA301"),GMRCARR
"RTN","GMRCXR",89,0)
 S GMRCARR(1)=$P($$FMADD^XLFDT(GMRCDT,-1),".",1)_";"   ;go back 1 day and look forward for appt with matching stop code
"RTN","GMRCXR",90,0)
 S GMRCARR(4)=DFN
"RTN","GMRCXR",91,0)
 S GMRCARR("FLDS")="2;13"
"RTN","GMRCXR",92,0)
 S GMRCAPI=$$SDAPI^SDAMA301(.GMRCARR)
"RTN","GMRCXR",93,0)
 ;GMRCI - pointer to file 44; GMRCJ - appt date/time
"RTN","GMRCXR",94,0)
 S GMRCI=0 F  S GMRCI=$O(^TMP($J,"SDAMA301",DFN,GMRCI)) Q:GMRCI'>0  D  Q:+GMRCRET
"RTN","GMRCXR",95,0)
 .S GMRCJ=0 F  S GMRCJ=$O(^TMP($J,"SDAMA301",DFN,GMRCI,GMRCJ)) Q:GMRCJ'>0  D  Q:+GMRCRET
"RTN","GMRCXR",96,0)
 ..S GMRCSTP=+$P($G(^TMP($J,"SDAMA301",DFN,GMRCI,GMRCJ)),U,13)
"RTN","GMRCXR",97,0)
 ..I $P($G(^TMP($J,"SDAMA301",DFN,GMRCI,GMRCJ)),U,25)="",$D(GMRCSTPL(+GMRCSTP)) S GMRCRET=1   ;alb/sat 86
"RTN","GMRCXR",98,0)
 ..;S:$D(GMRCSTPL(+GMRCSTP)) GMRCRET=1
"RTN","GMRCXR",99,0)
 K ^TMP($J,"SDAMA301"),GMRCARR
"RTN","GMRCXR",100,0)
 Q GMRCRET
"RTN","GMRCXR",101,0)
 ;
"RTN","GMRCXR",102,0)
FINDTXT(GMRCID,GMRCRPA,GMRCTXT) ;find text in word processing field   ;alb/sat 86 - removed unused 3rd parameter
"RTN","GMRCXR",103,0)
 ;INPUT:
"RTN","GMRCXR",104,0)
 ; GMRCID - Pointer to REQUEST/CONSULTATION file
"RTN","GMRCXR",105,0)
 ; GMRCRPA - Pointer to REQUEST PROCESSING ACTIVITY in REQUEST/CONSULTATION file
"RTN","GMRCXR",106,0)
 ;RETURN:
"RTN","GMRCXR",107,0)
 ; 1=Text Fount; 0=Not Found
"RTN","GMRCXR",108,0)
 ;alb/sat 86 begin modification
"RTN","GMRCXR",109,0)
 N GMRCI,GMRCJ,GMRCLINE,GMRCMSG,GMRCPREV,GMRCRET,GMRCTHIS,GMRCWP,X
"RTN","GMRCXR",110,0)
 S (GMRCTHIS,GMRCPREV)=""
"RTN","GMRCXR",111,0)
 S GMRCRET=0
"RTN","GMRCXR",112,0)
 S GMRCTXT=$G(GMRCTXT) S:GMRCTXT'="" GMRCTXT=$$UP^XLFSTR(GMRCTXT)  ;alb/sat 86
"RTN","GMRCXR",113,0)
 K GMRCWP S X=$$GET1^DIQ(123.02,GMRCRPA_","_GMRCID_",",5,"","GMRCWP","GMRCMSG")   ;ICR 6185
"RTN","GMRCXR",114,0)
 S GMRCI=0 F  S GMRCI=$O(GMRCWP(GMRCI)) Q:GMRCI=""  D  Q:GMRCRET=1
"RTN","GMRCXR",115,0)
 .S GMRCTHIS=GMRCWP(GMRCI)
"RTN","GMRCXR",116,0)
 .S GMRCLINE=$$UP^XLFSTR(GMRCPREV_GMRCTHIS)
"RTN","GMRCXR",117,0)
 .I GMRCTXT'="" S:GMRCLINE[GMRCTXT GMRCRET=1 Q
"RTN","GMRCXR",118,0)
 .F GMRCJ=1:1 S GMRCTXT=$P($T(GMRCTXT+GMRCJ),";;",2) Q:GMRCTXT=""  D  Q:GMRCRET=1
"RTN","GMRCXR",119,0)
 ..S:GMRCLINE[GMRCTXT GMRCRET=1
"RTN","GMRCXR",120,0)
 .;alb/sat 86 end modification
"RTN","GMRCXR",121,0)
 .S GMRCPREV=GMRCTHIS  ;keep 'this' line for next iteration in case the phrase wraps around onto 2 lines
"RTN","GMRCXR",122,0)
 Q GMRCRET
"RTN","GMRCXR",123,0)
 ;
"RTN","GMRCXR",124,0)
 ;alb/sat 86
"RTN","GMRCXR",125,0)
GMRCTXT  ;
"RTN","GMRCXR",126,0)
 ;;CANCEL
"RTN","GMRCXR",127,0)
 ;;NOSHOW
"RTN","GMRCXR",128,0)
 ;;NO-SHOW
"RTN","GMRCXR",129,0)
 ;;NO SHOW
"RTN","GMRCXR",130,0)
 ;
"RTN","GMRCXR",131,0)
 ;
"RTN","GMRCXR",132,0)
POST ;post install for GMRC*3*86
"RTN","GMRCXR",133,0)
 D XREF
"RTN","GMRCXR",134,0)
 Q
"RTN","GMRCXR",135,0)
XREF  ;create and build NEW style AG for all REQUEST/CONSULTATION entries in file 123
"RTN","GMRCXR",136,0)
 N GMRCXR,GMRCRES,GMRCOUT
"RTN","GMRCXR",137,0)
 S GMRCXR("FILE")=123
"RTN","GMRCXR",138,0)
 S GMRCXR("NAME")="AG"
"RTN","GMRCXR",139,0)
 S GMRCXR("SHORT DESCR")="Index of active REQUEST/CONSULTs with no appointment scheduled."
"RTN","GMRCXR",140,0)
 S GMRCXR("TYPE")="M"
"RTN","GMRCXR",141,0)
 S GMRCXR("EXECUTION")="F"
"RTN","GMRCXR",142,0)
 S GMRCXR("ACTIVITY")="IR"
"RTN","GMRCXR",143,0)
 S GMRCXR("ROOT TYPE")="W"
"RTN","GMRCXR",144,0)
 S GMRCXR("ROOT FILE")=123.02
"RTN","GMRCXR",145,0)
 S GMRCXR("USE")="S"
"RTN","GMRCXR",146,0)
 S GMRCXR("DESCR",1)="This cross reference contains entries of the REQUEST/CONSULTATION file"
"RTN","GMRCXR",147,0)
 S GMRCXR("DESCR",2)="that do not have an appointment scheduled."
"RTN","GMRCXR",148,0)
 S GMRCXR("DESCR",3)="This is determined based on the content and order of the entries in"
"RTN","GMRCXR",149,0)
 S GMRCXR("DESCR",4)="the REQUEST PROCESSING ACTIVITY multiple field 40.  This cross"
"RTN","GMRCXR",150,0)
 S GMRCXR("DESCR",5)="reference will be updated with any update to the ACTIVITY field under"
"RTN","GMRCXR",151,0)
 S GMRCXR("DESCR",6)="the REQUEST PROCESSING ACTIVITY multiple and that update will be"
"RTN","GMRCXR",152,0)
 S GMRCXR("DESCR",7)="determined based on all REQUEST PROCESSING ACTIVITY entries."
"RTN","GMRCXR",153,0)
 S GMRCXR("DESCR",8)="This cross reference was added in GMRC*3.0*83."
"RTN","GMRCXR",154,0)
 S GMRCXR("SET")="D AG123S1^GMRCXR(DA(1),X)"
"RTN","GMRCXR",155,0)
 S GMRCXR("KILL")="D AG123S1^GMRCXR(DA(1),X)"
"RTN","GMRCXR",156,0)
 S GMRCXR("WHOLE KILL")="K ^GMR(123,""AG"")"
"RTN","GMRCXR",157,0)
 S GMRCXR("VAL",1)="S X=+$P($G(^GMR(123,DA(1),0)),U,7)"
"RTN","GMRCXR",158,0)
 S GMRCXR("VAL",1,"TYP")="C"
"RTN","GMRCXR",159,0)
 S GMRCXR("VAL",1,"SUBSCRIPT")=1
"RTN","GMRCXR",160,0)
 S GMRCXR("VAL",1,"COLLATION")="F"
"RTN","GMRCXR",161,0)
 D CREIXN^DDMOD(.GMRCXR,"S",.GMRCRES,"GMRCOUT")
"RTN","GMRCXR",162,0)
 Q
"VER")
8.0^22.0
"BLD",9601,6)
^76
**END**
**END**

