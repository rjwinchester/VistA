Released GMPL*2*46 SEQ #40
Extracted from mail message
**KIDS**:GMPL*2.0*46^

**INSTALL NAME**
GMPL*2.0*46
"BLD",9777,0)
GMPL*2.0*46^PROBLEM LIST^0^3141021^y
"BLD",9777,1,0)
^^1^1^3141003^
"BLD",9777,1,1,0)
RESOLVES <UNDEFINED>DT+37^GMPLHIST SERVER ERROR
"BLD",9777,4,0)
^9.64PA^^
"BLD",9777,6.3)
2
"BLD",9777,"ABPKG")
n
"BLD",9777,"KRN",0)
^9.67PA^779.2^20
"BLD",9777,"KRN",.4,0)
.4
"BLD",9777,"KRN",.401,0)
.401
"BLD",9777,"KRN",.402,0)
.402
"BLD",9777,"KRN",.403,0)
.403
"BLD",9777,"KRN",.5,0)
.5
"BLD",9777,"KRN",.84,0)
.84
"BLD",9777,"KRN",3.6,0)
3.6
"BLD",9777,"KRN",3.8,0)
3.8
"BLD",9777,"KRN",9.2,0)
9.2
"BLD",9777,"KRN",9.8,0)
9.8
"BLD",9777,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",9777,"KRN",9.8,"NM",1,0)
GMPLHIST^^0^B21393527
"BLD",9777,"KRN",9.8,"NM","B","GMPLHIST",1)

"BLD",9777,"KRN",19,0)
19
"BLD",9777,"KRN",19.1,0)
19.1
"BLD",9777,"KRN",101,0)
101
"BLD",9777,"KRN",409.61,0)
409.61
"BLD",9777,"KRN",771,0)
771
"BLD",9777,"KRN",779.2,0)
779.2
"BLD",9777,"KRN",870,0)
870
"BLD",9777,"KRN",8989.51,0)
8989.51
"BLD",9777,"KRN",8989.52,0)
8989.52
"BLD",9777,"KRN",8994,0)
8994
"BLD",9777,"KRN","B",.4,.4)

"BLD",9777,"KRN","B",.401,.401)

"BLD",9777,"KRN","B",.402,.402)

"BLD",9777,"KRN","B",.403,.403)

"BLD",9777,"KRN","B",.5,.5)

"BLD",9777,"KRN","B",.84,.84)

"BLD",9777,"KRN","B",3.6,3.6)

"BLD",9777,"KRN","B",3.8,3.8)

"BLD",9777,"KRN","B",9.2,9.2)

"BLD",9777,"KRN","B",9.8,9.8)

"BLD",9777,"KRN","B",19,19)

"BLD",9777,"KRN","B",19.1,19.1)

"BLD",9777,"KRN","B",101,101)

"BLD",9777,"KRN","B",409.61,409.61)

"BLD",9777,"KRN","B",771,771)

"BLD",9777,"KRN","B",779.2,779.2)

"BLD",9777,"KRN","B",870,870)

"BLD",9777,"KRN","B",8989.51,8989.51)

"BLD",9777,"KRN","B",8989.52,8989.52)

"BLD",9777,"KRN","B",8994,8994)

"BLD",9777,"QUES",0)
^9.62^^
"BLD",9777,"REQB",0)
^9.611^1^1
"BLD",9777,"REQB",1,0)
GMPL*2.0*42^2
"BLD",9777,"REQB","B","GMPL*2.0*42",1)

"MBREQ")
0
"PKG",394,-1)
1^1
"PKG",394,0)
PROBLEM LIST^GMPL^Automated Patient Problem List
"PKG",394,20,0)
^9.402P^^
"PKG",394,22,0)
^9.49I^1^1
"PKG",394,22,1,0)
2.0^2940825^2950304
"PKG",394,22,1,"PAH",1,0)
46^3141021
"PKG",394,22,1,"PAH",1,1,0)
^^1^1^3141021
"PKG",394,22,1,"PAH",1,1,1,0)
RESOLVES <UNDEFINED>DT+37^GMPLHIST SERVER ERROR
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","GMPLHIST")
0^1^B21393527^B21062644
"RTN","GMPLHIST",1,0)
GMPLHIST ; SLC/MKB/KER/TC -- Problem List Historical data ;08/21/12  14:16
"RTN","GMPLHIST",2,0)
 ;;2.0;Problem List;**7,26,31,35,36,42,46**;Aug 25, 1994;Build 2
"RTN","GMPLHIST",3,0)
 ;
"RTN","GMPLHIST",4,0)
 ; External References
"RTN","GMPLHIST",5,0)
 ;   DBIA 10060  ^VA(200
"RTN","GMPLHIST",6,0)
 ;
"RTN","GMPLHIST",7,0)
DT ; Add historical data (audit trail) to DT list
"RTN","GMPLHIST",8,0)
 ;   Called from ^GMPLDISP, requires AIFN and adds to GMPDT()
"RTN","GMPLHIST",9,0)
 N NODE,DATE,FLD,PROV,OLD,OLDVAL,NEW,NEWVAL,ROOT,CHNGE,GMPLCSYS
"RTN","GMPLHIST",10,0)
 S NODE=$G(^GMPL(125.8,AIFN,0)) Q:NODE=""
"RTN","GMPLHIST",11,0)
 S DATE=$$EXTDT^GMPLX($P(NODE,U,3)),FLD=+$P(NODE,U,2),PROV=+$P(NODE,U,8)
"RTN","GMPLHIST",12,0)
 S:'PROV PROV=$P(NODE,U,4)
"RTN","GMPLHIST",13,0)
 S PROV=$S(PROV=".5":"NTRT",1:$P($G(^VA(200,PROV,0)),U))
"RTN","GMPLHIST",14,0)
 S FLD=FLD_U_$$FLDNAME(+FLD)
"RTN","GMPLHIST",15,0)
 S OLD=$P(NODE,U,5),NEW=$P(NODE,U,6),LCNT=LCNT+1
"RTN","GMPLHIST",16,0)
 I +FLD=1101 D  Q
"RTN","GMPLHIST",17,0)
 . N REASON
"RTN","GMPLHIST",18,0)
 . S REASON=" removed by "
"RTN","GMPLHIST",19,0)
 . S:OLD="C" REASON=" changed by "
"RTN","GMPLHIST",20,0)
 . S NODE=$G(^GMPL(125.8,AIFN,1))
"RTN","GMPLHIST",21,0)
 . S GMPDT(LCNT,0)=$J(DATE,10)_": NOTE "_$$EXTDT^GMPLX($P(NODE,U,5))_REASON_PROV_":"
"RTN","GMPLHIST",22,0)
 . S LCNT=LCNT+1,GMPDT(LCNT,0)="            "_$P(NODE,U,3)
"RTN","GMPLHIST",23,0)
 I +FLD=1.02 D  Q
"RTN","GMPLHIST",24,0)
 . S CHNGE=$S(NEW="H":"removed",OLD="T":"verified",1:"placed back on list")
"RTN","GMPLHIST",25,0)
 . S GMPDT(LCNT,0)=$J(DATE,10)_": PROBLEM "_CHNGE_" by "_PROV
"RTN","GMPLHIST",26,0)
 S GMPDT(LCNT,0)=$J(DATE,10)_": "_$P(FLD,U,2)_$S(OLD]"":" changed",1:" added")_" by "_PROV,LCNT=LCNT+1
"RTN","GMPLHIST",27,0)
 I +FLD=.01 D  Q
"RTN","GMPLHIST",28,0)
 . N CSYSOLD,CSYSNEW
"RTN","GMPLHIST",29,0)
 . S CSYSOLD=$$CSI^ICDEX(80,OLD),CSYSNEW=$$CSI^ICDEX(80,NEW)
"RTN","GMPLHIST",30,0)
 . S GMPDT(LCNT,0)=$J("from ",17)_$S(CSYSOLD=30:"(ICD-10-CM ",1:"(ICD-9-CM ")_$P($$ICDDATA^ICDXCODE(CSYSOLD,OLD,DT,"I"),U,2)_")"_" to "_$S(CSYSNEW=30:"(ICD-10-CM ",1:"(ICD-9-CM ")_$P($$ICDDATA^ICDXCODE(CSYSNEW,NEW,DT,"I"),U,2)_")"
"RTN","GMPLHIST",31,0)
 I +FLD=.12 S GMPDT(LCNT,0)=$J("from ",17)_$S(OLD="A":"ACTIVE",OLD="I":"INACTIVE",1:"UNKNOWN")_" to "_$S(NEW="A":"ACTIVE",NEW="I":"INACTIVE",1:"UNKNOWN") Q
"RTN","GMPLHIST",32,0)
 I (+FLD=.13)!(+FLD=1.07) S GMPDT(LCNT,0)=$J("from ",17)_$$EXTDT^GMPLX(OLD)_" to "_$$EXTDT^GMPLX(NEW) Q
"RTN","GMPLHIST",33,0)
 I +FLD=1.14 S GMPDT(LCNT,0)=$J("from ",17)_$S(OLD="A":"ACUTE",OLD="C":"CHRONIC",1:"UNSPECIFIED")_" to "_$S(NEW="A":"ACUTE",NEW="C":"CHRONIC",1:"UNSPECIFIED") Q
"RTN","GMPLHIST",34,0)
 I +FLD=80005 S GMPDT(LCNT,0)=$J("from ",17)_$S(OLD=1:"PENDING",OLD=2:"COMPLETED",1:"N/A")_" to "_$S(NEW=1:"PENDING",NEW="2":"COMPLETED",1:"N/A") Q
"RTN","GMPLHIST",35,0)
 I +FLD=302 D  Q
"RTN","GMPLHIST",36,0)
 . I NEW]"" D
"RTN","GMPLHIST",37,0)
 . . I OLD="" S GMPDT(LCNT,0)=$J(" as ",17)_NEW
"RTN","GMPLHIST",38,0)
 . . E  S GMPDT(LCNT,0)=$J("from ",17)_OLD_$$PAD^GMPLX(OLD,6)_" to "_NEW
"RTN","GMPLHIST",39,0)
 . E  S GMPDT(LCNT,0)=$J(OLD_$$PAD^GMPLX(OLD,6),23)_" removed."
"RTN","GMPLHIST",40,0)
 I (+FLD>1.09)&(+FLD<=1.18) S GMPDT(LCNT,0)=$J("from ",17)_$S(+OLD:"YES",OLD=0:"NO",1:"UNKNOWN")_" to "_$S(+NEW:"YES",NEW=0:"NO",1:"UNKNOWN") Q
"RTN","GMPLHIST",41,0)
 I (+FLD=80001)!(+FLD=80002) S GMPDT(LCNT,0)=$J("from ",17)_OLD_" to "_NEW
"RTN","GMPLHIST",42,0)
 I "^.05^1.01^1.04^1.05^1.06^1.08^"[(U_+FLD_U) D
"RTN","GMPLHIST",43,0)
 . S ROOT=$S(+FLD=.05:"AUTNPOV(",+FLD=1.01:"LEX(757.01,",(+FLD=1.04)!(+FLD=1.05):"VA(200,",+FLD=1.06:"DIC(49,",+FLD=1.08:"SC(",1:"") Q:ROOT=""
"RTN","GMPLHIST",44,0)
 . S OLDVAL=$S(OLD="":"",1:$P($G(@(U_ROOT_OLD_",0)")),U))
"RTN","GMPLHIST",45,0)
 . S NEWVAL=$S(NEW="":"",1:$P($G(@(U_ROOT_NEW_",0)")),U))
"RTN","GMPLHIST",46,0)
 . S GMPDT(LCNT,0)=$J("from ",17)_$S(OLDVAL'="":OLDVAL_$$PAD^GMPLX(OLDVAL,6),1:"UNSPECIFIED")
"RTN","GMPLHIST",47,0)
 . S LCNT=LCNT+1,GMPDT(LCNT,0)=$J("to ",17)_$S(NEWVAL'="":NEWVAL,1:"UNSPECIFIED")
"RTN","GMPLHIST",48,0)
 Q
"RTN","GMPLHIST",49,0)
 ;
"RTN","GMPLHIST",50,0)
FLDNAME(NUM) ; Returns Field Name for Display
"RTN","GMPLHIST",51,0)
 N NAME,NM1,NM2,I,J S J=0,NAME="" D NUM(.NM1),ALP(.NM2) S:+($G(NM1(+NUM)))=+NUM J=+NUM
"RTN","GMPLHIST",52,0)
 S:$L($G(NM2(+J))) NAME=$G(NM2(+J))
"RTN","GMPLHIST",53,0)
 Q NAME
"RTN","GMPLHIST",54,0)
ALP(X) ; Alpha Field Names
"RTN","GMPLHIST",55,0)
 S X(.01)="DIAGNOSIS",X(.02)="PATIENT NAME",X(.03)="DATE LAST MODIFIED",X(.04)="CLASS",X(.05)="PROVIDER NARRATIVE"
"RTN","GMPLHIST",56,0)
 S X(.06)="FACILITY",X(.07)="NUMBER",X(.08)="DATE ENTERED",X(.12)="STATUS",X(.13)="DATE OF ONSET",X(1.01)="PROBLEM",X(1.02)="CONDITION"
"RTN","GMPLHIST",57,0)
 S X(1.03)="ENTERED BY",X(1.04)="RECORDING PROVIDER",X(1.05)="RESPONSIBLE PROVIDER",X(1.06)="SERVICE",X(1.07)="DATE RESOLVED"
"RTN","GMPLHIST",58,0)
 S X(1.08)="CLINIC",X(1.09)="DATE RECORDED",X(1.1)="SERVICE CONNECTED",X(1.11)="AGENT ORANGE EXP",X(1.12)="RADIATION EXP",X(1.13)="ENV CONTAMINANTS EXP"
"RTN","GMPLHIST",59,0)
 S X(1.14)="IMMEDIACY",X(1.15)="HEAD/NECK CANCER",X(1.16)="MIL SEXUAL TRAUMA",X(1.17)="COMBAT VET",X(1.18)="SHAD",X(80001)="SNOMED CT CONCEPT",X(80002)="SNOMED CT DESIGNATION"
"RTN","GMPLHIST",60,0)
 S X(80003)="VHAT CONCEPT",X(80004)="VHAT DESIGNATION",X(80005)="MAP STATUS"
"RTN","GMPLHIST",61,0)
 S X(302)="SECONDARY DIAGNOSIS",X(1101)="NOTE"
"RTN","GMPLHIST",62,0)
 Q
"RTN","GMPLHIST",63,0)
NUM(X) ; Numeric Field Designations
"RTN","GMPLHIST",64,0)
 N FN F FN=.01:.01:.08 S X(+FN)=+FN
"RTN","GMPLHIST",65,0)
 F FN=.12:.01:.13 S X(+FN)=+FN
"RTN","GMPLHIST",66,0)
 F FN=1.01:.01:1.18 S X(+FN)=+FN
"RTN","GMPLHIST",67,0)
 F FN=80001:1:80005 S X(+FN)=+FN
"RTN","GMPLHIST",68,0)
 S X(1101)=1101,X(302)=302
"RTN","GMPLHIST",69,0)
 Q
"VER")
8.0^22.0
"BLD",9777,6)
^40
**END**
**END**

