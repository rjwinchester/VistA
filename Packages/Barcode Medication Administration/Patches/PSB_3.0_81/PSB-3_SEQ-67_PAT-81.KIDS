Released PSB*3*81 SEQ #67
Extracted from mail message
**KIDS**:PSB*3.0*81^

**INSTALL NAME**
PSB*3.0*81
"BLD",9702,0)
PSB*3.0*81^BAR CODE MED ADMIN^0^3140724^y
"BLD",9702,1,0)
^^17^17^3140512^
"BLD",9702,1,1,0)
This Patch Addresses 5 issues:
"BLD",9702,1,2,0)
 
"BLD",9702,1,3,0)
1. The Bar Code Medication Administration (BCMA) Medication History
"BLD",9702,1,4,0)
report displays data prior to the report start date when run in the
"BLD",9702,1,5,0)
Computerized Records System (CPRS) application.  
"BLD",9702,1,6,0)
2. BCMA Labels for Unit dose drugs are missing the Indian Health 
"BLD",9702,1,7,0)
Services (HIS) Health Record Number (HRN) in place of Last 4 digits of a
"BLD",9702,1,8,0)
patient's Social Security Number (SSN) as the patient Identifier.
"BLD",9702,1,9,0)
3. The BCMA Unknown Actions Report does not display IHS HRN in place
"BLD",9702,1,10,0)
of Last 4 digits of a patient's Social Security Number (SSN) as the 
"BLD",9702,1,11,0)
patient identifier.
"BLD",9702,1,12,0)
4. A dangling "AADT" index causes an undefined error to occur when
"BLD",9702,1,13,0)
a site runs the BCMA Extract (ECXBCM) option. 
"BLD",9702,1,14,0)
5. The Meds on Patient section of the BCMA Virtual Due List (VDL) 
"BLD",9702,1,15,0)
displays an Intravenous (IV) bag as infusing after it has been marked
"BLD",9702,1,16,0)
completed if the Action Date/Time was edited using the Edit Med Log
"BLD",9702,1,17,0)
option.
"BLD",9702,4,0)
^9.64PA^53.79^1
"BLD",9702,4,53.79,0)
53.79
"BLD",9702,4,53.79,2,0)
^9.641^53.79^1
"BLD",9702,4,53.79,2,53.79,0)
BCMA MEDICATION LOG  (File-top level)
"BLD",9702,4,53.79,2,53.79,1,0)
^9.6411^.06^2
"BLD",9702,4,53.79,2,53.79,1,.01,0)
PATIENT NAME
"BLD",9702,4,53.79,2,53.79,1,.06,0)
ACTION DATE/TIME
"BLD",9702,4,53.79,222)
y^y^p^^^^n^^n
"BLD",9702,4,53.79,224)

"BLD",9702,4,"APDD",53.79,53.79)

"BLD",9702,4,"APDD",53.79,53.79,.01)

"BLD",9702,4,"APDD",53.79,53.79,.06)

"BLD",9702,4,"B",53.79,53.79)

"BLD",9702,6.3)
6
"BLD",9702,"INID")
^y
"BLD",9702,"INIT")
EN^PSB381P
"BLD",9702,"KRN",0)
^9.67PA^779.2^20
"BLD",9702,"KRN",.4,0)
.4
"BLD",9702,"KRN",.401,0)
.401
"BLD",9702,"KRN",.402,0)
.402
"BLD",9702,"KRN",.403,0)
.403
"BLD",9702,"KRN",.5,0)
.5
"BLD",9702,"KRN",.84,0)
.84
"BLD",9702,"KRN",3.6,0)
3.6
"BLD",9702,"KRN",3.8,0)
3.8
"BLD",9702,"KRN",9.2,0)
9.2
"BLD",9702,"KRN",9.8,0)
9.8
"BLD",9702,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",9702,"KRN",9.8,"NM",1,0)
PSBOXA^^0^B25770439
"BLD",9702,"KRN",9.8,"NM",2,0)
PSBOBL^^0^B11869712
"BLD",9702,"KRN",9.8,"NM",3,0)
PSBOBZ^^0^B20385498
"BLD",9702,"KRN",9.8,"NM",4,0)
PSBOPM1^^0^B7894847
"BLD",9702,"KRN",9.8,"NM","B","PSBOBL",2)

"BLD",9702,"KRN",9.8,"NM","B","PSBOBZ",3)

"BLD",9702,"KRN",9.8,"NM","B","PSBOPM1",4)

"BLD",9702,"KRN",9.8,"NM","B","PSBOXA",1)

"BLD",9702,"KRN",19,0)
19
"BLD",9702,"KRN",19.1,0)
19.1
"BLD",9702,"KRN",101,0)
101
"BLD",9702,"KRN",409.61,0)
409.61
"BLD",9702,"KRN",771,0)
771
"BLD",9702,"KRN",779.2,0)
779.2
"BLD",9702,"KRN",870,0)
870
"BLD",9702,"KRN",8989.51,0)
8989.51
"BLD",9702,"KRN",8989.52,0)
8989.52
"BLD",9702,"KRN",8994,0)
8994
"BLD",9702,"KRN","B",.4,.4)

"BLD",9702,"KRN","B",.401,.401)

"BLD",9702,"KRN","B",.402,.402)

"BLD",9702,"KRN","B",.403,.403)

"BLD",9702,"KRN","B",.5,.5)

"BLD",9702,"KRN","B",.84,.84)

"BLD",9702,"KRN","B",3.6,3.6)

"BLD",9702,"KRN","B",3.8,3.8)

"BLD",9702,"KRN","B",9.2,9.2)

"BLD",9702,"KRN","B",9.8,9.8)

"BLD",9702,"KRN","B",19,19)

"BLD",9702,"KRN","B",19.1,19.1)

"BLD",9702,"KRN","B",101,101)

"BLD",9702,"KRN","B",409.61,409.61)

"BLD",9702,"KRN","B",771,771)

"BLD",9702,"KRN","B",779.2,779.2)

"BLD",9702,"KRN","B",870,870)

"BLD",9702,"KRN","B",8989.51,8989.51)

"BLD",9702,"KRN","B",8989.52,8989.52)

"BLD",9702,"KRN","B",8994,8994)

"BLD",9702,"QDEF")
^^^^^^^^^^YES
"BLD",9702,"QUES",0)
^9.62^^
"BLD",9702,"REQB",0)
^9.611^3^3
"BLD",9702,"REQB",1,0)
PSB*3.0*70^2
"BLD",9702,"REQB",2,0)
PSB*3.0*17^2
"BLD",9702,"REQB",3,0)
PSB*3.0*13^2
"BLD",9702,"REQB","B","PSB*3.0*13",3)

"BLD",9702,"REQB","B","PSB*3.0*17",2)

"BLD",9702,"REQB","B","PSB*3.0*70",1)

"FIA",53.79)
BCMA MEDICATION LOG
"FIA",53.79,0)
^PSB(53.79,
"FIA",53.79,0,0)
53.79IP
"FIA",53.79,0,1)
y^y^p^^^^n^^n
"FIA",53.79,0,10)

"FIA",53.79,0,11)

"FIA",53.79,0,"RLRO")

"FIA",53.79,0,"VR")
3.0^PSB
"FIA",53.79,53.79)
1
"FIA",53.79,53.79,.01)

"FIA",53.79,53.79,.06)

"INIT")
EN^PSB381P
"IX",53.79,53.79,"AINFUSING",0)
53.79^AINFUSING^Index of IV's still with a status of Infusing.^R^^R^IR^I^53.79^^^^^S
"IX",53.79,53.79,"AINFUSING",.1,0)
^^3^3^3120821^
"IX",53.79,53.79,"AINFUSING",.1,1,0)
Updates AINFUSING when DFN or admin date/time changes and Action Status 
"IX",53.79,53.79,"AINFUSING",.1,2,0)
is "I" for infusing or kill index when Action Status changes from "I" to 
"IX",53.79,53.79,"AINFUSING",.1,3,0)
anything.
"IX",53.79,53.79,"AINFUSING",1)
S ^PSB(53.79,"AINFUSING",X(1),X(2),DA)=""
"IX",53.79,53.79,"AINFUSING",1.4)
S X=0 I $P(^PSB(53.79,DA,0),U,9)="I",$P(^PSB(53.79,DA,0),U,10)]"" S X=1
"IX",53.79,53.79,"AINFUSING",2)
K ^PSB(53.79,"AINFUSING",X(1),X(2),DA)
"IX",53.79,53.79,"AINFUSING",2.4)

"IX",53.79,53.79,"AINFUSING",2.5)
K ^PSB(53.79,"AINFUSING")
"IX",53.79,53.79,"AINFUSING",11.1,0)
^.114IA^2^2
"IX",53.79,53.79,"AINFUSING",11.1,1,0)
1^F^53.79^.01^^1^F
"IX",53.79,53.79,"AINFUSING",11.1,2,0)
2^F^53.79^.06^^2^F
"IX",53.79,53.79,"AINJ",0)
53.79^AINJ^By patient, action date/time, & inject site^R^^R^IR^I^53.79^^^^^S
"IX",53.79,53.79,"AINJ",1)
S ^PSB(53.79,"AINJ",X(1),X(2),$E(X(3),1,30),DA)=""
"IX",53.79,53.79,"AINJ",2)
K ^PSB(53.79,"AINJ",X(1),X(2),$E(X(3),1,30),DA)
"IX",53.79,53.79,"AINJ",2.5)
K ^PSB(53.79,"AINJ")
"IX",53.79,53.79,"AINJ",11.1,0)
^.114IA^3^3
"IX",53.79,53.79,"AINJ",11.1,1,0)
1^F^53.79^.01^^1^F
"IX",53.79,53.79,"AINJ",11.1,2,0)
2^F^53.79^.06^^2^F
"IX",53.79,53.79,"AINJ",11.1,3,0)
3^F^53.79^.16^30^3^F
"IX",53.79,53.79,"AINJOI",0)
53.79^AINJOI^By patient, orderable item, action date/time, & inject site^R^^R^IR^I^53.79^^^^^S
"IX",53.79,53.79,"AINJOI",1)
S ^PSB(53.79,"AINJOI",X(1),X(2),X(3),$E(X(4),1,30),DA)=""
"IX",53.79,53.79,"AINJOI",2)
K ^PSB(53.79,"AINJOI",X(1),X(2),X(3),$E(X(4),1,30),DA)
"IX",53.79,53.79,"AINJOI",2.5)
K ^PSB(53.79,"AINJOI")
"IX",53.79,53.79,"AINJOI",11.1,0)
^.114IA^4^4
"IX",53.79,53.79,"AINJOI",11.1,1,0)
1^F^53.79^.01^^1^F
"IX",53.79,53.79,"AINJOI",11.1,2,0)
2^F^53.79^.08^^2^F
"IX",53.79,53.79,"AINJOI",11.1,3,0)
3^F^53.79^.06^^3^F
"IX",53.79,53.79,"AINJOI",11.1,4,0)
4^F^53.79^.16^30^4^F
"IX",53.79,53.79,"AORDX",0)
53.79^AORDX^DFN,ORDER NUMBER,ADMIN DATE/TIME^R^^R^IR^I^53.79^^^^^S
"IX",53.79,53.79,"AORDX",.1,0)
^^2^2^3001106^
"IX",53.79,53.79,"AORDX",.1,1,0)
Cross reference by; .01 PATIENT NAME; .11 ORDER REFERENCE NUMBER; and .06
"IX",53.79,53.79,"AORDX",.1,2,0)
ADMINISTRATION DATE/TIME.
"IX",53.79,53.79,"AORDX",1)
S ^PSB(53.79,"AORDX",$E(X(1),1,30),$E(X(2),1,15),$E(X(3),1,15),DA)=""
"IX",53.79,53.79,"AORDX",2)
K ^PSB(53.79,"AORDX",$E(X(1),1,30),$E(X(2),1,15),$E(X(3),1,15),DA)
"IX",53.79,53.79,"AORDX",2.5)
K ^PSB(53.79,"AORDX")
"IX",53.79,53.79,"AORDX",11.1,0)
^.114IA^3^3
"IX",53.79,53.79,"AORDX",11.1,1,0)
1^F^53.79^.01^30^1^F
"IX",53.79,53.79,"AORDX",11.1,2,0)
2^F^53.79^.11^15^2^F
"IX",53.79,53.79,"AORDX",11.1,3,0)
3^F^53.79^.06^15^3^F
"IX",53.79,53.79,"APATCH",0)
53.79^APATCH^Updates APATCH when DFN or admin date/time changes.^R^^F^IR^I^53.79^^^^^S
"IX",53.79,53.79,"APATCH",1)
S ^PSB(53.79,"APATCH",X(1),X(2),DA)=""
"IX",53.79,53.79,"APATCH",1.4)
S X=0 N I S I=0 F  S I=$O(^PSB(53.79,DA,.5,I)) Q:'I  I ($P($G(^(I,0)),U,4)="PATCH")&($P(^PSB(53.79,DA,0),U,9)="G") S X=1 Q
"IX",53.79,53.79,"APATCH",2)
K ^PSB(53.79,"APATCH",X(1),X(2),DA)
"IX",53.79,53.79,"APATCH",2.4)
S X=0 N I S I=0 F  S I=$O(^PSB(53.79,DA,.5,I)) Q:'I  I $P($G(^(I,0)),U,4)="PATCH" S X=1 Q
"IX",53.79,53.79,"APATCH",2.5)
K ^PSB(53.79,"APATCH")
"IX",53.79,53.79,"APATCH",11.1,0)
^.114IA^2^2
"IX",53.79,53.79,"APATCH",11.1,1,0)
1^F^53.79^.01^^1^F
"IX",53.79,53.79,"APATCH",11.1,2,0)
2^F^53.79^.06^^2^F
"IX",53.79,53.79,"ASTOPPED",0)
53.79^ASTOPPED^Index of IV's that are status Stopped.^R^^R^IR^I^53.79^^^^^S
"IX",53.79,53.79,"ASTOPPED",.1,0)
^^3^3^3120910^
"IX",53.79,53.79,"ASTOPPED",.1,1,0)
Updates ASTOPPED when DFN or admin date/time changes and Action Status  
"IX",53.79,53.79,"ASTOPPED",.1,2,0)
is "S" for stopped or kill index when Action Status changes from "S" to 
"IX",53.79,53.79,"ASTOPPED",.1,3,0)
anything else.
"IX",53.79,53.79,"ASTOPPED",1)
S ^PSB(53.79,"ASTOPPED",X(1),X(2),DA)=""
"IX",53.79,53.79,"ASTOPPED",1.4)
S X=0 I $P(^PSB(53.79,DA,0),U,9)="S",$P(^PSB(53.79,DA,0),U,10)]"" S X=1
"IX",53.79,53.79,"ASTOPPED",2)
K ^PSB(53.79,"ASTOPPED",X(1),X(2),DA)
"IX",53.79,53.79,"ASTOPPED",2.4)
S X=0 I $P(^PSB(53.79,DA,0),U,9)'="S" S X=1
"IX",53.79,53.79,"ASTOPPED",2.5)
K ^PSB(53.79,"ASTOPPED")
"IX",53.79,53.79,"ASTOPPED",11.1,0)
^.114IA^2^2
"IX",53.79,53.79,"ASTOPPED",11.1,1,0)
1^F^53.79^.01^^1^F
"IX",53.79,53.79,"ASTOPPED",11.1,1,3)

"IX",53.79,53.79,"ASTOPPED",11.1,2,0)
2^F^53.79^.06^^2^F
"IX",53.79,53.79,"ASTOPPED",11.1,2,3)

"IX",53.79,53.79,"AUID",0)
53.79^AUID^cross reference of dfn, order number, and unique id^R^^R^IR^I^53.79^^^^^S
"IX",53.79,53.79,"AUID",1)
S ^PSB(53.79,"AUID",X(1),$E(X(2),1,30),$E(X(3),1,30),DA)=""
"IX",53.79,53.79,"AUID",2)
K ^PSB(53.79,"AUID",X(1),$E(X(2),1,30),$E(X(3),1,30),DA)
"IX",53.79,53.79,"AUID",2.5)
K ^PSB(53.79,"AUID")
"IX",53.79,53.79,"AUID",11.1,0)
^.114IA^3^3
"IX",53.79,53.79,"AUID",11.1,1,0)
1^F^53.79^.01^^1^F
"IX",53.79,53.79,"AUID",11.1,1,3)

"IX",53.79,53.79,"AUID",11.1,2,0)
2^F^53.79^.11^30^2^F
"IX",53.79,53.79,"AUID",11.1,2,3)

"IX",53.79,53.79,"AUID",11.1,3,0)
3^F^53.79^.26^30^3^F
"IX",53.79,53.79,"AUID",11.1,3,3)

"MBREQ")
0
"PKG",550,-1)
1^1
"PKG",550,0)
BAR CODE MED ADMIN^PSB^BAR CODE MEDICATION ADMINISTRATION
"PKG",550,20,0)
^9.402P^^
"PKG",550,22,0)
^9.49I^1^1
"PKG",550,22,1,0)
3.0^3040224^3040311^66481
"PKG",550,22,1,"PAH",1,0)
81^3140724
"PKG",550,22,1,"PAH",1,1,0)
^^17^17^3140724
"PKG",550,22,1,"PAH",1,1,1,0)
This Patch Addresses 5 issues:
"PKG",550,22,1,"PAH",1,1,2,0)
 
"PKG",550,22,1,"PAH",1,1,3,0)
1. The Bar Code Medication Administration (BCMA) Medication History
"PKG",550,22,1,"PAH",1,1,4,0)
report displays data prior to the report start date when run in the
"PKG",550,22,1,"PAH",1,1,5,0)
Computerized Records System (CPRS) application.  
"PKG",550,22,1,"PAH",1,1,6,0)
2. BCMA Labels for Unit dose drugs are missing the Indian Health 
"PKG",550,22,1,"PAH",1,1,7,0)
Services (HIS) Health Record Number (HRN) in place of Last 4 digits of a
"PKG",550,22,1,"PAH",1,1,8,0)
patient's Social Security Number (SSN) as the patient Identifier.
"PKG",550,22,1,"PAH",1,1,9,0)
3. The BCMA Unknown Actions Report does not display IHS HRN in place
"PKG",550,22,1,"PAH",1,1,10,0)
of Last 4 digits of a patient's Social Security Number (SSN) as the 
"PKG",550,22,1,"PAH",1,1,11,0)
patient identifier.
"PKG",550,22,1,"PAH",1,1,12,0)
4. A dangling "AADT" index causes an undefined error to occur when
"PKG",550,22,1,"PAH",1,1,13,0)
a site runs the BCMA Extract (ECXBCM) option. 
"PKG",550,22,1,"PAH",1,1,14,0)
5. The Meds on Patient section of the BCMA Virtual Due List (VDL) 
"PKG",550,22,1,"PAH",1,1,15,0)
displays an Intravenous (IV) bag as infusing after it has been marked
"PKG",550,22,1,"PAH",1,1,16,0)
completed if the Action Date/Time was edited using the Edit Med Log
"PKG",550,22,1,"PAH",1,1,17,0)
option.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
5
"RTN","PSB381P")
0^^B4386771^n/a
"RTN","PSB381P",1,0)
PSB381P ;MNT/BJR - Move Units Given field to Units Ordered ;
"RTN","PSB381P",2,0)
 ;;3.0;BAR CODE MED ADMIN;**81**;Mar 2004;Build 6
"RTN","PSB381P",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PSB381P",4,0)
 ;
"RTN","PSB381P",5,0)
 Q
"RTN","PSB381P",6,0)
EN ;This routine will delete any "AADT" indexes that do not have a corresponding 0 node for the last 60 days for patch PSB*3*81
"RTN","PSB381P",7,0)
 ;This routine will also delete any "AINFUSING" indexes for completed bags.
"RTN","PSB381P",8,0)
 D MES^XPDUTL("")
"RTN","PSB381P",9,0)
 D MES^XPDUTL("*** PSB*3*81 Post Install Running ***")
"RTN","PSB381P",10,0)
 D MES^XPDUTL("")
"RTN","PSB381P",11,0)
 N PSBDFN,PSBBEGIN,PSBSTRT,PSBIEN
"RTN","PSB381P",12,0)
 D NOW^%DTC S PSBBEGIN=$$FMADD^XLFDT(X,-60)
"RTN","PSB381P",13,0)
 S PSBDFN=0 F  S PSBDFN=$O(^PSB(53.79,"AADT",PSBDFN)) Q:'PSBDFN  D
"RTN","PSB381P",14,0)
 .S PSBSTRT=PSBBEGIN F  S PSBSTRT=$O(^PSB(53.79,"AADT",PSBDFN,PSBSTRT)) Q:'PSBSTRT  D
"RTN","PSB381P",15,0)
 ..S PSBIEN=0 F  S PSBIEN=$O(^PSB(53.79,"AADT",PSBDFN,PSBSTRT,PSBIEN)) Q:'PSBIEN  D
"RTN","PSB381P",16,0)
 ...I '$D(^PSB(53.79,PSBIEN,0)) K ^PSB(53.79,"AADT",PSBDFN,PSBSTRT,PSBIEN)  D MES^XPDUTL("AADT Index Deleted for record "_PSBIEN)
"RTN","PSB381P",17,0)
 S PSBDFN=0 F  S PSBDFN=$O(^PSB(53.79,"AINFUSING",PSBDFN)) Q:'PSBDFN  D
"RTN","PSB381P",18,0)
 .S PSBSTRT=0 F  S PSBSTRT=$O(^PSB(53.79,"AINFUSING",PSBDFN,PSBSTRT)) Q:'PSBSTRT  D
"RTN","PSB381P",19,0)
 ..S PSBIEN=0 F  S PSBIEN=$O(^PSB(53.79,"AINFUSING",PSBDFN,PSBSTRT,PSBIEN)) Q:'PSBIEN  D
"RTN","PSB381P",20,0)
 ...I $$GET1^DIQ(53.79,PSBIEN_",",.09,"I")="C" K ^PSB(53.79,"AINFUSING",PSBDFN,PSBSTRT,PSBIEN)  D MES^XPDUTL("AINFUSING Index Deleted for record "_PSBIEN)
"RTN","PSB381P",21,0)
 D MES^XPDUTL("")
"RTN","PSB381P",22,0)
 D MES^XPDUTL("*** PSB*3*81 Post Install Completed ***")
"RTN","PSB381P",23,0)
 D MES^XPDUTL("") 
"RTN","PSB381P",24,0)
 Q
"RTN","PSBOBL")
0^2^B11869712^B10430547
"RTN","PSBOBL",1,0)
PSBOBL ;BIRMINGHAM/EFC-BAR CODE LABELS (ZEBRA SPECIFIC) ; 5/12/14 2:45pm
"RTN","PSBOBL",2,0)
 ;;3.0;BAR CODE MED ADMIN;**70,81**;Mar 2004;Build 6
"RTN","PSBOBL",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PSBOBL",4,0)
 ;
"RTN","PSBOBL",5,0)
 ; Reference/IA
"RTN","PSBOBL",6,0)
 ; File 50/221
"RTN","PSBOBL",7,0)
 ;
"RTN","PSBOBL",8,0)
 ;*70 - 1459: Adding clinic to BL and BZ chui labels.
"RTN","PSBOBL",9,0)
 ;
"RTN","PSBOBL",10,0)
EN ;
"RTN","PSBOBL",11,0)
 N PSBIENS,PSBBAR,PSBDRUG,PSBQTY,PSBDOSE,PSBNAME,PSBWARD,PSBLOT
"RTN","PSBOBL",12,0)
 N PSBEXP,PSBMFG,PSBFCB,PSBSYM,PSBCNT,PSBANS,PSBORD,PSBCLIN   ;[*70-1459]
"RTN","PSBOBL",13,0)
 S PSBIENS=PSBRPT_","
"RTN","PSBOBL",14,0)
 S PSBBAR=$P($P($G(^PSB(53.69,PSBRPT,.3)),U,1),"~",2)
"RTN","PSBOBL",15,0)
 ;
"RTN","PSBOBL",16,0)
 S PSBPRE=$$GET^XPAR("DIV","PSB DEFAULT BARCODE PREFIX")
"RTN","PSBOBL",17,0)
 S:PSBPRE]"" PSBBAR=PSBPRE_$S(PSBPRE?1.N:"-",1:"")_PSBBAR
"RTN","PSBOBL",18,0)
 ;
"RTN","PSBOBL",19,0)
 S PSBDRUG=$$GET1^DIQ(53.69,PSBIENS,.31)
"RTN","PSBOBL",20,0)
 S PSBQTY=+$$GET1^DIQ(53.69,PSBIENS,.35)
"RTN","PSBOBL",21,0)
 S:PSBQTY PSBDRUG=PSBDRUG_" (Qty: "_PSBQTY_")"
"RTN","PSBOBL",22,0)
 S PSBDOSE=$$GET1^DIQ(53.69,PSBIENS,.39)
"RTN","PSBOBL",23,0)
 S PSBNAME=$$GET1^DIQ(53.69,PSBIENS,.12)
"RTN","PSBOBL",24,0)
 I PSBNAME]"" S PSBNAME=PSBNAME_" ("_$S(DUZ("AG")="I":$$HRN^AUPNPAT($P($G(^PSB(53.69,+PSBIENS,.1)),U,2),$P(^(0),U,4)),1:$E($$GET1^DIQ(53.69,PSBIENS,.121),6,9))_")" ;add code for IHS, PSB*3*81
"RTN","PSBOBL",25,0)
 S PSBWARD=$$GET1^DIQ(53.69,PSBIENS,.122)
"RTN","PSBOBL",26,0)
 S PSBCLIN=$$GET1^DIQ(53.69,PSBIENS,5)                        ;[*70-1459]
"RTN","PSBOBL",27,0)
 S PSBLOT=$$GET1^DIQ(53.69,PSBIENS,.32)
"RTN","PSBOBL",28,0)
 S PSBEXP=$$GET1^DIQ(53.69,PSBIENS,.33)
"RTN","PSBOBL",29,0)
 S PSBMFG=$$GET1^DIQ(53.69,PSBIENS,.34)
"RTN","PSBOBL",30,0)
 S PSBFCB=$$GET1^DIQ(53.69,PSBIENS,.36)_"/"_$$GET1^DIQ(53.69,PSBIENS,.37)
"RTN","PSBOBL",31,0)
 S PSBSYM=$$GET^XPAR("DIV","PSB DEFAULT BARCODE FORMAT",,"E")
"RTN","PSBOBL",32,0)
 F PSBCNT=1:1:+$P(PSBRPT(.3),U,8) D LABEL
"RTN","PSBOBL",33,0)
 Q
"RTN","PSBOBL",34,0)
 ;
"RTN","PSBOBL",35,0)
LABEL ; Print the Label
"RTN","PSBOBL",36,0)
 W "^XA"
"RTN","PSBOBL",37,0)
 W !,"^LH0,0^FS"
"RTN","PSBOBL",38,0)
 W $$DATA(20,25,"Drug:")
"RTN","PSBOBL",39,0)
 W $$DATA(100,25,PSBDRUG)
"RTN","PSBOBL",40,0)
 I PSBDOSE]"" W $$DATA(20,60,"Dosage:") W $$DATA(100,60,PSBDOSE)
"RTN","PSBOBL",41,0)
 I PSBNAME]"" W $$DATA(350,60,PSBNAME)
"RTN","PSBOBL",42,0)
 I PSBCLIN]"" W $$DATA(350,90,"Clinic:") W $$DATA(400,90,PSBCLIN)            ;[*70-1459]
"RTN","PSBOBL",43,0)
 I PSBCLIN="",PSBWARD]"" W $$DATA(350,90,"Ward:") W $$DATA(400,90,PSBWARD)   ;[*70-1459]
"RTN","PSBOBL",44,0)
 I PSBLOT]"" W $$DATA(350,120,"Lot#:") W $$DATA(400,120,PSBLOT)
"RTN","PSBOBL",45,0)
 I PSBEXP]"" W $$DATA(500,120,"Exp:") W $$DATA(550,120,PSBEXP)
"RTN","PSBOBL",46,0)
 I PSBMFG]"" W $$DATA(350,150,"Mfg:") W $$DATA(400,150,PSBMFG)
"RTN","PSBOBL",47,0)
 W $$DATA(350,180,"Filled/Checked By:") W $$DATA(520,180,PSBFCB)
"RTN","PSBOBL",48,0)
 ;
"RTN","PSBOBL",49,0)
 ; Code 39
"RTN","PSBOBL",50,0)
 I PSBSYM="C39" W !,"^BY2,3.0^FO20,100^B3N,N,80,Y,N^FR^FD"_PSBBAR_"^FS"
"RTN","PSBOBL",51,0)
 ;
"RTN","PSBOBL",52,0)
 ; Code 128
"RTN","PSBOBL",53,0)
 I PSBSYM="128" W !,"^BY2,3.0^FO20,100^BCN,80,Y,N,N^FR^FD>:"_PSBBAR_"^FS"
"RTN","PSBOBL",54,0)
 ;
"RTN","PSBOBL",55,0)
 ; Code I 2 of 5
"RTN","PSBOBL",56,0)
 I PSBSYM="I25" W !,"^BY2,3.0^FO20,100^B2N,80,Y,N,N^FR^FD"_PSBBAR_"^FS"
"RTN","PSBOBL",57,0)
 ;
"RTN","PSBOBL",58,0)
 I PSBSYM="" W $$DATA(20,100,"PSB DEFAULT BARCODE FORMAT Undefined.")
"RTN","PSBOBL",59,0)
 ;
"RTN","PSBOBL",60,0)
 ; Close Label
"RTN","PSBOBL",61,0)
 W !,"^XZ",!
"RTN","PSBOBL",62,0)
 H 2
"RTN","PSBOBL",63,0)
 Q
"RTN","PSBOBL",64,0)
 ;
"RTN","PSBOBL",65,0)
DATA(X,Y,TEXT) ; Code to place the data on the label
"RTN","PSBOBL",66,0)
 W !,"^FO"_X_","_Y_"^A0N,30,20^CI13^FR^FD"_TEXT_"^FS"
"RTN","PSBOBL",67,0)
 Q ""
"RTN","PSBOBL",68,0)
 ;
"RTN","PSBOBL",69,0)
INPTR ;Input transform for DRUG field (#.31) in file 53.69.
"RTN","PSBOBL",70,0)
 K:$L(X)>40!($L(X)<1) X I $D(X) D
"RTN","PSBOBL",71,0)
 .S X=$TR(X,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","PSBOBL",72,0)
 .N DIC S DIC="^PSDRUG(",DIC(0)="EQNM",D="B^C^VAPN^VAC^NDC^XATC"
"RTN","PSBOBL",73,0)
 .S DIC("S")="I '$G(^PSDRUG(+Y,""I""))!($G(^(""I""))>DT),$P($G(^PSDRUG(+Y,2)),U,3)[""I""!($P($G(^PSDRUG(+Y,2)),U,3)[""U"")"
"RTN","PSBOBL",74,0)
 .D:+X'>0 MIX^DIC1
"RTN","PSBOBL",75,0)
 .D:+X>0 ^DIC
"RTN","PSBOBL",76,0)
 .S:+Y>0 X=$$GET1^DIQ(50,+Y_",",.01)_"~"_+Y K:+Y<1 X
"RTN","PSBOBL",77,0)
 Q
"RTN","PSBOBL",78,0)
 ;
"RTN","PSBOBZ")
0^3^B20385498^B19545874
"RTN","PSBOBZ",1,0)
PSBOBZ ;BIRMINGHAM/TTH-BAR CODE LABELS (MAIN) ;11/08/12 3:23pm
"RTN","PSBOBZ",2,0)
 ;;3.0;BAR CODE MED ADMIN;**2,70,81**;Mar 2004;Build 6
"RTN","PSBOBZ",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PSBOBZ",4,0)
 ;
"RTN","PSBOBZ",5,0)
 ; Reference/IA
"RTN","PSBOBZ",6,0)
 ; ^%ZIS(2/3435
"RTN","PSBOBZ",7,0)
 ; File 50/221
"RTN","PSBOBZ",8,0)
 ;
"RTN","PSBOBZ",9,0)
 ;*70 - 1459: Adding clinic to BL and BZ chui labels.
"RTN","PSBOBZ",10,0)
 ;
"RTN","PSBOBZ",11,0)
EN ;
"RTN","PSBOBZ",12,0)
 N PSBI,PSBIENS,PSBQTY,PSBDOSE,PSBDRUG,PSBNAME,PSBNODE3,PSBWARD,PSBLOT,PSBBAR,PSBTLE,SL
"RTN","PSBOBZ",13,0)
 N PSBEXP,PSBFD,PSBMFG,PSBCB,PSBFB,PSBFCB,PSBCNT,PSBANS,PSBORD,PSBPRE,PSBX,PSBY,PSBSYM,TEXT,PSBCLIN   ;[*70-1459]
"RTN","PSBOBZ",14,0)
 ;
"RTN","PSBOBZ",15,0)
 N PSBXX,PSBYY,PSBCODE
"RTN","PSBOBZ",16,0)
 S PSBXX=0 F  S PSBXX=$O(^%ZIS(2,IOST(0),55,PSBXX)) Q:'PSBXX  S PSBYY=$G(^(PSBXX,0)) I PSBYY]"" S PSBX=$P(PSBYY,"^"),PSBY=^(1),PSBCODE(PSBX)=PSBY
"RTN","PSBOBZ",17,0)
 ;
"RTN","PSBOBZ",18,0)
 ;The PSBRPT variable and PSBRPT(.3) array are set in the PSBO routine.  It is the internal
"RTN","PSBOBZ",19,0)
 ;entry number from the BCMA REPORT REQUEST file (#53.69). This entry is created
"RTN","PSBOBZ",20,0)
 ;when the user submits the completed ScreenMan form from the Label Print option.
"RTN","PSBOBZ",21,0)
 ;
"RTN","PSBOBZ",22,0)
 ;
"RTN","PSBOBZ",23,0)
 S PSBIENS=PSBRPT_","
"RTN","PSBOBZ",24,0)
 S PSBBAR=$P($P($G(PSBRPT(.3)),U,1),"~",2)
"RTN","PSBOBZ",25,0)
 S PSBPRE=$$GET^XPAR("DIV","PSB DEFAULT BARCODE PREFIX")
"RTN","PSBOBZ",26,0)
 S:PSBPRE]"" PSBBAR=PSBPRE_$S(PSBPRE?1.N:"-",1:"")_PSBBAR
"RTN","PSBOBZ",27,0)
 S PSBDRUG=$P($P($G(PSBRPT(.3)),U,1),"~",1)
"RTN","PSBOBZ",28,0)
 S PSBQTY=+$P($G(PSBRPT(.3)),U,5)
"RTN","PSBOBZ",29,0)
 S:PSBQTY PSBDRUG=PSBDRUG_" (Qty: "_PSBQTY_")"
"RTN","PSBOBZ",30,0)
 I PSBQTY=0 S PSBDRUG=PSBDRUG_" (Qty:      )"
"RTN","PSBOBZ",31,0)
 S PSBDOSE=$P($G(PSBRPT(.3)),U,9)
"RTN","PSBOBZ",32,0)
 I PSBDOSE]"" S PSBDOSE="Dose:"_PSBDOSE
"RTN","PSBOBZ",33,0)
 I PSBDOSE="" S PSBDOSE="Dose:"
"RTN","PSBOBZ",34,0)
 S PSBNAME=$$GET1^DIQ(53.69,PSBIENS,.12)
"RTN","PSBOBZ",35,0)
 I PSBNAME]"" S PSBNAME=PSBNAME_" ("_$S(DUZ("AG")="I":$$HRN^AUPNPAT($P($G(^PSB(53.69,+PSBIENS,.1)),U,2),$P(^(0),U,4)),1:$E($$GET1^DIQ(53.69,PSBIENS,.121),6,9))_")" ;add code for IHS, PSB*3*81
"RTN","PSBOBZ",36,0)
 I PSBNAME="" S PSBNAME="Patient:"
"RTN","PSBOBZ",37,0)
 S PSBWARD=$$GET1^DIQ(53.69,PSBIENS,.122)
"RTN","PSBOBZ",38,0)
 S PSBCLIN=$$GET1^DIQ(53.69,PSBIENS,5)                        ;[*70-1459]
"RTN","PSBOBZ",39,0)
 I PSBWARD]"" S PSBWARD="Ward: "_PSBWARD
"RTN","PSBOBZ",40,0)
 I PSBWARD="" S PSBWARD="Ward: "
"RTN","PSBOBZ",41,0)
 I PSBCLIN]"" S PSBWARD="Clinic: "_PSBCLIN                    ;[*70-1459]
"RTN","PSBOBZ",42,0)
 S PSBLOT=$P($G(PSBRPT(.3)),U,2)
"RTN","PSBOBZ",43,0)
 I PSBLOT]"" S PSBLOT="Lot: "_PSBLOT
"RTN","PSBOBZ",44,0)
 I PSBLOT="" S PSBLOT="Lot: "
"RTN","PSBOBZ",45,0)
 S PSBFD=$P($G(PSBRPT(.3)),U,3)
"RTN","PSBOBZ",46,0)
 S PSBEXP=$$FMTE^XLFDT(PSBFD,5)
"RTN","PSBOBZ",47,0)
 I PSBEXP]"" S PSBEXP="Exp: "_PSBEXP
"RTN","PSBOBZ",48,0)
 I PSBEXP="" S PSBEXP="Exp: "
"RTN","PSBOBZ",49,0)
 S PSBMFG=$P($G(PSBRPT(.3)),U,4)
"RTN","PSBOBZ",50,0)
 I PSBMFG]"" S PSBMFG="Mfg: "_PSBMFG
"RTN","PSBOBZ",51,0)
 I PSBMFG="" S PSBMFG="Mfg: "
"RTN","PSBOBZ",52,0)
 S PSBFB=$P($G(PSBRPT(.3)),U,6) I PSBFB="" S PSBFB="_____"
"RTN","PSBOBZ",53,0)
 S PSBCB=$P($G(PSBRPT(.3)),U,7) I PSBCB="" S PSBCB="_____"
"RTN","PSBOBZ",54,0)
 S PSBFCB=PSBFB_"/"_PSBCB
"RTN","PSBOBZ",55,0)
 F PSBCNT=1:1:+$P(PSBRPT(.3),U,8) D LABEL
"RTN","PSBOBZ",56,0)
 Q
"RTN","PSBOBZ",57,0)
 ;
"RTN","PSBOBZ",58,0)
LABEL ;Get Barcode Label Type
"RTN","PSBOBZ",59,0)
 ;Barcode Type
"RTN","PSBOBZ",60,0)
 S PSBSYM=$$GET^XPAR("DIV","PSB DEFAULT BARCODE FORMAT",,"E")
"RTN","PSBOBZ",61,0)
 ;
"RTN","PSBOBZ",62,0)
INIT ;Initialize barcode printer
"RTN","PSBOBZ",63,0)
 I $D(PSBCODE("FI")) X PSBCODE("FI")
"RTN","PSBOBZ",64,0)
 I $D(PSBCODE("FI1")) X PSBCODE("FI1")
"RTN","PSBOBZ",65,0)
 I $D(PSBCODE("FI2")) X PSBCODE("FI2")
"RTN","PSBOBZ",66,0)
 ;
"RTN","PSBOBZ",67,0)
 ;Additional format settings
"RTN","PSBOBZ",68,0)
 I PSBSYM]"",$D(PSBCODE("SBF")) X PSBCODE("SBF")
"RTN","PSBOBZ",69,0)
 I PSBSYM="",$D(PSBCODE("EBF")) X PSBCODE("EBF")
"RTN","PSBOBZ",70,0)
 ;
"RTN","PSBOBZ",71,0)
 D START ;execute control codes to start label
"RTN","PSBOBZ",72,0)
 D PRINT ;execute control codes to print label
"RTN","PSBOBZ",73,0)
 ;
"RTN","PSBOBZ",74,0)
 ;Print Barcode Strip
"RTN","PSBOBZ",75,0)
 ;If barcode type is defined.
"RTN","PSBOBZ",76,0)
 I PSBSYM]"",$D(PSBCODE("SB")) S TEXT=PSBBAR X PSBCODE("SB")
"RTN","PSBOBZ",77,0)
 ;If barcode type is not define.
"RTN","PSBOBZ",78,0)
 I PSBSYM="",$D(PSBCODE("SB")) S TEXT="*NO BARCODE TYPE*" X PSBCODE("SB")
"RTN","PSBOBZ",79,0)
 ;
"RTN","PSBOBZ",80,0)
END ; Close Label or End of Label
"RTN","PSBOBZ",81,0)
 I $G(PSBCODE("EL"))]"" X PSBCODE("EL")
"RTN","PSBOBZ",82,0)
 H 2
"RTN","PSBOBZ",83,0)
 Q
"RTN","PSBOBZ",84,0)
 ;
"RTN","PSBOBZ",85,0)
START ;Start Label Print Process
"RTN","PSBOBZ",86,0)
 I $G(PSBCODE("SL"))]"" X PSBCODE("SL")
"RTN","PSBOBZ",87,0)
 Q
"RTN","PSBOBZ",88,0)
 ;
"RTN","PSBOBZ",89,0)
PRINT ;Print barcode label
"RTN","PSBOBZ",90,0)
 ;
"RTN","PSBOBZ",91,0)
 I PSBDRUG]"" S PSBTLE="PSBDRUG",TEXT="Drug: "_PSBDRUG  D PROCESS
"RTN","PSBOBZ",92,0)
 I PSBDOSE]"" S PSBTLE="PSBDOSE",TEXT=PSBDOSE D PROCESS
"RTN","PSBOBZ",93,0)
 I PSBNAME]"" S PSBTLE="PSBNAME",TEXT=PSBNAME  D PROCESS
"RTN","PSBOBZ",94,0)
 I PSBWARD]"" S PSBTLE="PSBWARD",TEXT=PSBWARD  D PROCESS
"RTN","PSBOBZ",95,0)
 I PSBLOT]"" S PSBTLE="PSBLOT",TEXT=PSBLOT  D PROCESS
"RTN","PSBOBZ",96,0)
 I PSBEXP]"" S PSBTLE="PSBEXP",TEXT=PSBEXP  D PROCESS
"RTN","PSBOBZ",97,0)
 I PSBMFG]"" S PSBTLE="PSBMFG",TEXT=PSBMFG  D PROCESS
"RTN","PSBOBZ",98,0)
 I PSBFCB]"" S PSBTLE="PSBFCB",TEXT="Filled/Checked By: "_PSBFCB  D PROCESS
"RTN","PSBOBZ",99,0)
 Q
"RTN","PSBOBZ",100,0)
 ;
"RTN","PSBOBZ",101,0)
PROCESS ;Process control code and field data.
"RTN","PSBOBZ",102,0)
 I $D(PSBCODE("STF")) X PSBCODE("STF")
"RTN","PSBOBZ",103,0)
 I $D(PSBCODE("ST")) X PSBCODE("ST")
"RTN","PSBOBZ",104,0)
 Q
"RTN","PSBOBZ",105,0)
 ;
"RTN","PSBOBZ",106,0)
INPTR ;Input transform for DRUG field (#.31) in file 53.69.
"RTN","PSBOBZ",107,0)
 N PSBIAD,PSBDEA,D,Y
"RTN","PSBOBZ",108,0)
 K:$L(X)>40!($L(X)<1) X  I $D(X) D
"RTN","PSBOBZ",109,0)
 .S X=$TR(X,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","PSBOBZ",110,0)
 .N DIC S DIC="^PSDRUG(",DIC(0)="EQNM",D="B^C^VAPN^VAC^NDC^XATC"
"RTN","PSBOBZ",111,0)
 .S DIC("S")="I (($P($G(^PSDRUG(+Y,2)),U,3)[""I"")!($P($G(^(2)),U,3)[""U"")),(('$G(^PSDRUG(+Y,""I"")))!(DT'>$G(^(""I""))))"
"RTN","PSBOBZ",112,0)
 .D:+X'>0 MIX^DIC1
"RTN","PSBOBZ",113,0)
 .D:+X>0 ^DIC
"RTN","PSBOBZ",114,0)
 .S:+Y>0 X=$$GET1^DIQ(50,+Y_",",.01)_"~"_+Y K:+Y<1 X
"RTN","PSBOBZ",115,0)
 Q
"RTN","PSBOPM1")
0^4^B7894847^B7334610
"RTN","PSBOPM1",1,0)
PSBOPM1 ;BIRMINGHAM/BSR-BCMA OIT HISTORY API ;Oct 2005
"RTN","PSBOPM1",2,0)
 ;;3.0;BAR CODE MED ADMIN;**17,81**;Mar 2004;Build 6
"RTN","PSBOPM1",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PSBOPM1",4,0)
 ;
"RTN","PSBOPM1",5,0)
 ; Reference/IA
"RTN","PSBOPM1",6,0)
 ; FILE 53.79
"RTN","PSBOPM1",7,0)
 ; X-REF AOIP
"RTN","PSBOPM1",8,0)
 ; X-REF AOIP3
"RTN","PSBOPM1",9,0)
 ; X-REF AOIP4
"RTN","PSBOPM1",10,0)
 ;
"RTN","PSBOPM1",11,0)
 ;
"RTN","PSBOPM1",12,0)
GETORD(PSBORDNM) ;
"RTN","PSBOPM1",13,0)
 N XA,NDE
"RTN","PSBOPM1",14,0)
 S PSBORD=0,XA=PSBORDNM,PSBDT=$P($G(PSBSTRT),"."),NDE=.1 ;start with orders from start date/time of report, PSB*3*81
"RTN","PSBOPM1",15,0)
 Q:PSBORDNM="" PSBORD
"RTN","PSBOPM1",16,0)
 Q:'$D(^PSB(53.79,"AOIP",DFN,XA)) PSBORD
"RTN","PSBOPM1",17,0)
 F  S PSBDT=$O(^PSB(53.79,"AOIP",DFN,XA,PSBDT)) Q:PSBDT=""  D
"RTN","PSBOPM1",18,0)
 .S PSBIEN="" F  S PSBIEN=$O(^PSB(53.79,"AOIP",DFN,XA,PSBDT,PSBIEN)) Q:PSBIEN=""  D
"RTN","PSBOPM1",19,0)
 ..Q:$P($G(^PSB(53.79,PSBIEN,0)),U,9)="N"
"RTN","PSBOPM1",20,0)
 ..Q:'$D(^PSB(53.79,PSBIEN,NDE))
"RTN","PSBOPM1",21,0)
 ..S PSBORD=$P(^PSB(53.79,PSBIEN,NDE),U)
"RTN","PSBOPM1",22,0)
 ..I PSBORD S PSBORDNM=PSBORD
"RTN","PSBOPM1",23,0)
 ..S:'PSBORD!(PSBORD="") PSBORD=0,TMP("PSBOIS",$J,XA)=""
"RTN","PSBOPM1",24,0)
 Q PSBORD
"RTN","PSBOPM1",25,0)
 ;
"RTN","PSBOPM1",26,0)
FINDIENS ; USE PSBOIS,PSBADDS AND PSBSOLS TO FIND ALL IENS FOR THE RPT
"RTN","PSBOPM1",27,0)
 ;SEARCH FOR UNIT DOSE IENS
"RTN","PSBOPM1",28,0)
 I $D(TMP("PSBOIS",$J)) S XA="" F  S XA=$O(TMP("PSBOIS",$J,XA)) Q:XA=""  D
"RTN","PSBOPM1",29,0)
 .S PSBDT="" F  S PSBDT=$O(^PSB(53.79,"AOIP",DFN,XA,PSBDT)) Q:PSBDT=""  D
"RTN","PSBOPM1",30,0)
 ..Q:PSBDT>PSBSTOP
"RTN","PSBOPM1",31,0)
 ..Q:PSBDT<PSBSTRT
"RTN","PSBOPM1",32,0)
 ..S PSBIEN="" F  S PSBIEN=$O(^PSB(53.79,"AOIP",DFN,XA,PSBDT,PSBIEN)) Q:PSBIEN=""  D
"RTN","PSBOPM1",33,0)
 ...Q:$P(^PSB(53.79,PSBIEN,0),U,9)="N"
"RTN","PSBOPM1",34,0)
 ...S TMP("PSBIENS",$J,"UD",$$GET1^DIQ(53.79,PSBIEN_",",.06,"I"),PSBIEN)=""
"RTN","PSBOPM1",35,0)
 ;
"RTN","PSBOPM1",36,0)
 ;SEARCH FOR ADDITIVES
"RTN","PSBOPM1",37,0)
 I $D(TMP("PSBADDS",$J)) S XA="" F  S XA=$O(TMP("PSBADDS",$J,XA)) Q:XA=""  D
"RTN","PSBOPM1",38,0)
 .S PSBIEN="" F  S PSBIEN=$O(^PSB(53.79,"AOIP3",DFN,PSBIEN)) Q:PSBIEN=""  D
"RTN","PSBOPM1",39,0)
 ..S XB="" F  S XB=$O(^PSB(53.79,"AOIP3",DFN,PSBIEN,XB)) Q:XB=""  D
"RTN","PSBOPM1",40,0)
 ...Q:XB'=XA
"RTN","PSBOPM1",41,0)
 ...Q:$P(^PSB(53.79,PSBIEN,0),U,9)="N"
"RTN","PSBOPM1",42,0)
 ...I $P(^PSB(53.79,PSBIEN,0),"^",6)>PSBSTRT,$P(^PSB(53.79,PSBIEN,0),"^",6)<PSBSTOP D
"RTN","PSBOPM1",43,0)
 ....S TMP("PSBIENS",$J,"ADD",$$GET1^DIQ(53.79,PSBIEN_",",.06,"I"),PSBIEN)=""
"RTN","PSBOPM1",44,0)
 ....S TMP("PSBADDS",$J,XA)=1
"RTN","PSBOPM1",45,0)
 ;
"RTN","PSBOPM1",46,0)
 ;SEARCH FOR SOLUTIONS
"RTN","PSBOPM1",47,0)
 I $D(TMP("PSBSOLS",$J)) S XA="" F  S XA=$O(TMP("PSBSOLS",$J,XA)) Q:XA=""  D
"RTN","PSBOPM1",48,0)
 .S PSBIEN="" F  S PSBIEN=$O(^PSB(53.79,"AOIP4",DFN,PSBIEN)) Q:PSBIEN=""  D
"RTN","PSBOPM1",49,0)
 ..S XB="" F  S XB=$O(^PSB(53.79,"AOIP4",DFN,PSBIEN,XB)) Q:XB=""  D
"RTN","PSBOPM1",50,0)
 ...Q:XB'=XA
"RTN","PSBOPM1",51,0)
 ...Q:$P(^PSB(53.79,PSBIEN,0),U,9)="N"
"RTN","PSBOPM1",52,0)
 ...I $P(^PSB(53.79,PSBIEN,0),"^",6)>PSBSTRT,$P(^PSB(53.79,PSBIEN,0),"^",6)<PSBSTOP D
"RTN","PSBOPM1",53,0)
 ....S TMP("PSBIENS",$J,"SOL",$$GET1^DIQ(53.79,PSBIEN_",",.06,"I"),PSBIEN)=""
"RTN","PSBOPM1",54,0)
 ....S TMP("PSBSOLS",$J,XA)=1
"RTN","PSBOPM1",55,0)
 Q
"RTN","PSBOPM1",56,0)
 ;
"RTN","PSBOXA")
0^1^B25770439^B24284983
"RTN","PSBOXA",1,0)
PSBOXA ;BIRMINGHAM/EFC-MEDICATION LOG ;Mar 2004
"RTN","PSBOXA",2,0)
 ;;3.0;BAR CODE MED ADMIN;**13,81**;Mar 2004;Build 6
"RTN","PSBOXA",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PSBOXA",4,0)
 ;
"RTN","PSBOXA",5,0)
 ; Reference/IA
"RTN","PSBOXA",6,0)
 ;
"RTN","PSBOXA",7,0)
 ; File 4/10090
"RTN","PSBOXA",8,0)
 ;
"RTN","PSBOXA",9,0)
 ;
"RTN","PSBOXA",10,0)
 ; Entry Point -   Report OPTION used by PSB MANAGER key holders to locate
"RTN","PSBOXA",11,0)
 ;                "UNKNOWN" Action Status entries in the BCMA Medication Log File.
"RTN","PSBOXA",12,0)
 ;
"RTN","PSBOXA",13,0)
EN ;  UNKNOWN Action Status Report - creation!
"RTN","PSBOXA",14,0)
 ;
"RTN","PSBOXA",15,0)
 S PSBDTST=+$P(PSBRPT(.1),U,6)
"RTN","PSBOXA",16,0)
 S PSBDTSP=+$P(PSBRPT(.1),U,8)
"RTN","PSBOXA",17,0)
 D NOW^%DTC S Y=% D DD^%DT S PSBDTTM=Y
"RTN","PSBOXA",18,0)
 S PSBLIST=""
"RTN","PSBOXA",19,0)
 S (PSBPGNUM,PSBLNTOT,PSBTOT,PSBX1)=""
"RTN","PSBOXA",20,0)
 F  S PSBX1=$O(^PSB(53.79,"AADT",PSBX1)) Q:PSBX1=""  D
"RTN","PSBOXA",21,0)
 .S PSBX2=$$FMADD^XLFDT(PSBDTST,,,,-.1) F  S PSBX2=$O(^PSB(53.79,"AADT",PSBX1,PSBX2)) Q:(PSBX2>$$FMADD^XLFDT(PSBDTSP,,23.9999))!(+PSBX2=0)  D
"RTN","PSBOXA",22,0)
 ..S PSBX3="" F  S PSBX3=$O(^PSB(53.79,"AADT",PSBX1,PSBX2,PSBX3)) Q:+PSBX3=0  D
"RTN","PSBOXA",23,0)
 ...Q:('$D(^PSB(53.79,PSBX3,0)))!$D(PSBLIST(PSBX3))
"RTN","PSBOXA",24,0)
 ...I $P(^PSB(53.79,PSBX3,0),U,9)="" I $$GET1^DIQ(4,$P(PSBRPT(0),U,4)_",",.01)=$$GET1^DIQ(4,$P(^PSB(53.79,PSBX3,0),U,3)_",",.01) D
"RTN","PSBOXA",25,0)
 ....L +^PSB(53.79,PSBX3):1 I  L -^PSB(53.79,PSBX3) S PSBTOT=PSBTOT+1,PSBLIST(PSBX3)=""
"RTN","PSBOXA",26,0)
 I +PSBTOT=0 K PSBLIST
"RTN","PSBOXA",27,0)
 S Y=PSBDTST D DD^%DT S Y1=Y S Y=PSBDTSP D DD^%DT S Y2=Y
"RTN","PSBOXA",28,0)
 D BLDRPT
"RTN","PSBOXA",29,0)
 D WRTRPT
"RTN","PSBOXA",30,0)
 Q
"RTN","PSBOXA",31,0)
 ;
"RTN","PSBOXA",32,0)
BLDRPT ;
"RTN","PSBOXA",33,0)
 ;
"RTN","PSBOXA",34,0)
 K PSBOUTP
"RTN","PSBOXA",35,0)
 S (PSBPGNUM,PSBX1)=""
"RTN","PSBOXA",36,0)
 I '$D(PSBLIST) D  Q
"RTN","PSBOXA",37,0)
 .S PSBPGNUM=1
"RTN","PSBOXA",38,0)
 .S PSBOUTP(0,14)="W !!,""<<<< NO """"UNKNOWN ACTION STATUS"""" ENTRIES FOUND FOR THIS DATE RANGE >>>>"",!!"
"RTN","PSBOXA",39,0)
 S PSBPGNUM=1,PSBTOT1=0
"RTN","PSBOXA",40,0)
 F  S PSBX1=$O(PSBLIST(PSBX1))  Q:+PSBX1=0  D
"RTN","PSBOXA",41,0)
 .S PSBTOT1=PSBTOT1+1
"RTN","PSBOXA",42,0)
 .D CLEAN^PSBVT,PSJ1^PSBVT($$GET1^DIQ(53.79,PSBX1_",",.01,"I"),$$GET1^DIQ(53.79,PSBX1_",",.11))
"RTN","PSBOXA",43,0)
 .S PSBOUTP($$PGTOT,PSBLNTOT)="W """_PSBTOT1_".)"",!,?5,""Action Status...: "_$S($$GET1^DIQ(53.79,PSBX1_",",.09)']"":"*UNKNOWN*",1:$$GET1^DIQ(53.79,PSBX1_",",.09))_""""
"RTN","PSBOXA",44,0)
 .S PSBOUTP($$PGTOT,PSBLNTOT)="W !,?5,""Patient.........: ("_$S(DUZ("AG")="I":$$HRN^AUPNPAT(PSBDFN,DUZ(2)),1:$$GET1^DIQ(2,PSBDFN_",",.09))_") "_$$GET1^DIQ(2,PSBDFN_",",.01)_"""" ;add code for IHS, PSB*3*81
"RTN","PSBOXA",45,0)
 .S PSBOUTP($$PGTOT,PSBLNTOT)="W !,?5,""Ward/Bed........: "_$$GET1^DIQ(2,PSBDFN_",",.1)_$S($$GET1^DIQ(2,PSBDFN_",",.101)']"":"",1:"/"_$$GET1^DIQ(2,PSBDFN_",",.101))_""""
"RTN","PSBOXA",46,0)
 .S PSBOUTP($$PGTOT,PSBLNTOT)="W !,?5,""Order Number....: "_PSBONX_""""
"RTN","PSBOXA",47,0)
 .S PSBOUTP($$PGTOT,PSBLNTOT)="W !,?5,""Orderable Item..: "_PSBOITX_""""
"RTN","PSBOXA",48,0)
 .S PSBOUTP($$PGTOT,PSBLNTOT)="W !,?5,""Schedule........: "_PSBSCH_""""
"RTN","PSBOXA",49,0)
 .S PSBOUTP($$PGTOT,PSBLNTOT)="W !,?5,""Scheduled Adm Tm: "_$S($$GET1^DIQ(53.79,PSBX1_",",.13)']"":"AS NEEDED",1:$$GET1^DIQ(53.79,PSBX1_",",.13))_""""
"RTN","PSBOXA",50,0)
 .S PSBOUTP($$PGTOT,PSBLNTOT)="W !,?5,""Created Dt/Tm...: "_$$GET1^DIQ(53.79,PSBX1_",",.06)_""""
"RTN","PSBOXA",51,0)
 .S PSBOUTP($$PGTOT,PSBLNTOT)="W !,?5,""Created By......: ("_$$GET1^DIQ(53.79,PSBX1_",",.07,"I")_") "_$$GET1^DIQ(53.79,PSBX1_",",.07)_""""
"RTN","PSBOXA",52,0)
 .S PSBOUTP($$PGTOT(3),PSBLNTOT)="W !,$TR($J("""",IOM),"" "",""-""),!!"
"RTN","PSBOXA",53,0)
 Q
"RTN","PSBOXA",54,0)
 ;
"RTN","PSBOXA",55,0)
WRTRPT ;  Actually "WRITE" the report to output device
"RTN","PSBOXA",56,0)
 ;
"RTN","PSBOXA",57,0)
 I $O(PSBOUTP(""),-1)<1 D  Q
"RTN","PSBOXA",58,0)
 .D HDR
"RTN","PSBOXA",59,0)
 .X PSBOUTP($O(PSBOUTP(""),-1),14)
"RTN","PSBOXA",60,0)
 .D FTR
"RTN","PSBOXA",61,0)
 S PSBPGNUM=1
"RTN","PSBOXA",62,0)
 D HDR
"RTN","PSBOXA",63,0)
 S PSBX1="" F  S PSBX1=$O(PSBOUTP(PSBX1)) Q:PSBX1=""  D
"RTN","PSBOXA",64,0)
 .I PSBPGNUM'=PSBX1 D FTR S PSBPGNUM=PSBX1 D HDR
"RTN","PSBOXA",65,0)
 .S PSBX2="" F  S PSBX2=$O(PSBOUTP(PSBX1,PSBX2)) Q:PSBX2=""  D
"RTN","PSBOXA",66,0)
 ..X PSBOUTP(PSBX1,PSBX2)
"RTN","PSBOXA",67,0)
 D FTR
"RTN","PSBOXA",68,0)
 Q
"RTN","PSBOXA",69,0)
 ;
"RTN","PSBOXA",70,0)
HDR ;  Create Report Header
"RTN","PSBOXA",71,0)
 ;
"RTN","PSBOXA",72,0)
 ;
"RTN","PSBOXA",73,0)
 ;   BAR CODE MEDICATION ADMINISTRATION (BCMA) UNKNOWN ACTION STATUS REPORT
"RTN","PSBOXA",74,0)
 ;   Date/Time: NOW
"RTN","PSBOXA",75,0)
 ;   Date Range:   Y1  to  Y2   (inculsive)
"RTN","PSBOXA",76,0)
 ;   
"RTN","PSBOXA",77,0)
 ;   
"RTN","PSBOXA",78,0)
 ;   This is a report of entries, created within the given date range, in the
"RTN","PSBOXA",79,0)
 ;   BCMA Medication Log File with UNKNOWN Action Status data.
"RTN","PSBOXA",80,0)
 ;   These entries may be corrected via the BCMA GUI "Edit Med Log".   
"RTN","PSBOXA",81,0)
 ;   
"RTN","PSBOXA",82,0)
 ;----------------------------------------------------------------
"RTN","PSBOXA",83,0)
 ;
"RTN","PSBOXA",84,0)
 W:$Y>1 @IOF
"RTN","PSBOXA",85,0)
 W:$X>1 !
"RTN","PSBOXA",86,0)
 S PSBPG="Page: "_PSBPGNUM_" of "_$S($O(PSBOUTP(""),-1)=0:1,1:$O(PSBOUTP(""),-1))
"RTN","PSBOXA",87,0)
 S PSBPGRM=IOM-($L(PSBPG)+5)
"RTN","PSBOXA",88,0)
 I $P(PSBRPT(0),U,4)="" S $P(PSBRPT(0),U,4)=DUZ(2)
"RTN","PSBOXA",89,0)
 S PSBDIVN="Division: "_$$GET1^DIQ(4,$P(PSBRPT(0),U,4)_",",.01)
"RTN","PSBOXA",90,0)
 W !!,"BCMA UNKNOWN ACTION STATUS REPORT" W ?PSBPGRM,PSBPG
"RTN","PSBOXA",91,0)
 W !,"Date/Time: "_PSBDTTM,!,"Report Date Range:  Start Date: "_Y1_"   Stop Date: "_Y2
"RTN","PSBOXA",92,0)
 W !,PSBDIVN,?(IOM-($L("Total *UNKNOWN* entries found: "_+PSBTOT)+5)),"Total *UNKNOWN* entries found: "_+PSBTOT
"RTN","PSBOXA",93,0)
 W !!,?5,"This is a report of entries, created within the given date range,"
"RTN","PSBOXA",94,0)
 W !,?5,"in the BCMA Medication Log File with UNKNOWN Action Status data."
"RTN","PSBOXA",95,0)
 W !,?5,"These entries can be corrected using the BCMA GUI ""Edit Med Log""."
"RTN","PSBOXA",96,0)
 W !!,$TR($J("",IOM)," ","="),!!
"RTN","PSBOXA",97,0)
 ;
"RTN","PSBOXA",98,0)
 Q
"RTN","PSBOXA",99,0)
 ;
"RTN","PSBOXA",100,0)
FTR ;  Create Report Footer
"RTN","PSBOXA",101,0)
 ;
"RTN","PSBOXA",102,0)
 I (IOSL<100) F  Q:$Y>(IOSL-7)  W !
"RTN","PSBOXA",103,0)
 W !,$TR($J("",IOM)," ","="),!
"RTN","PSBOXA",104,0)
 W !,PSBDTTM,!,"BCMA UNKNOWN ACTION STATUS REPORT - footer -"
"RTN","PSBOXA",105,0)
 W ?PSBPGRM,PSBPG,!
"RTN","PSBOXA",106,0)
 Q
"RTN","PSBOXA",107,0)
 ;
"RTN","PSBOXA",108,0)
PGTOT(X) ;Keep track of lines and PAGE Number...
"RTN","PSBOXA",109,0)
 ;
"RTN","PSBOXA",110,0)
 S:'$D(X) PSBLNTOT=PSBLNTOT+1
"RTN","PSBOXA",111,0)
 S:$D(X) PSBLNTOT=PSBLNTOT+X
"RTN","PSBOXA",112,0)
 I PSBPGNUM=1,(PSBLNTOT=1) S PSBLNTOT=14 S PSBMORE=PSBLNTOT+12 Q PSBPGNUM
"RTN","PSBOXA",113,0)
 I PSBLNTOT=PSBMORE D
"RTN","PSBOXA",114,0)
 .S PSBMORE=PSBLNTOT+12
"RTN","PSBOXA",115,0)
 .I PSBMORE>(IOSL-7) S PSBPGNUM=PSBPGNUM+1,PSBLNTOT=14 S PSBMORE=PSBLNTOT+12
"RTN","PSBOXA",116,0)
 Q PSBPGNUM
"VER")
8.0^22.0
"^DD",53.79,53.79,.01,0)
PATIENT NAME^RP2'^DPT(^0;1^Q
"^DD",53.79,53.79,.01,1,0)
^.1^^-1
"^DD",53.79,53.79,.01,1,1,0)
53.79^B
"^DD",53.79,53.79,.01,1,1,1)
S ^PSB(53.79,"B",$E(X,1,30),DA)=""
"^DD",53.79,53.79,.01,1,1,2)
K ^PSB(53.79,"B",$E(X,1,30),DA)
"^DD",53.79,53.79,.01,3)
Enter the patient that received the medication.
"^DD",53.79,53.79,.01,21,0)
^^2^2^3140512^
"^DD",53.79,53.79,.01,21,1,0)
This field contains a pointer to the PATIENT File (#2) and is the patient
"^DD",53.79,53.79,.01,21,2,0)
that received the medication.
"^DD",53.79,53.79,.01,"DT")
3140512
"^DD",53.79,53.79,.06,0)
ACTION DATE/TIME^RD^^0;6^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",53.79,53.79,.06,1,0)
^.1^^-1
"^DD",53.79,53.79,.06,1,1,0)
53.79^AADT^MUMPS
"^DD",53.79,53.79,.06,1,1,1)
S ^PSB(53.79,"AADT",$P(^PSB(53.79,DA,0),U),X,DA)=""
"^DD",53.79,53.79,.06,1,1,2)
K ^PSB(53.79,"AADT",$P(^PSB(53.79,DA,0),U),X,DA)
"^DD",53.79,53.79,.06,1,1,"%D",0)
^.101^3^3^3140512^^^^
"^DD",53.79,53.79,.06,1,1,"%D",1,0)
Creates a cross reference by patient for administration times
"^DD",53.79,53.79,.06,1,1,"%D",2,0)
 
"^DD",53.79,53.79,.06,1,1,"%D",3,0)
  ^PSB(53.79,"AADT",dfn,administration d/t,DA)=""
"^DD",53.79,53.79,.06,1,1,"DT")
3140512
"^DD",53.79,53.79,.06,1,2,0)
53.79^AOIP1^MUMPS^^^^^^G
"^DD",53.79,53.79,.06,1,2,1)
I $P(^PSB(53.79,DA,0),U,8) S ^PSB(53.79,"AOIP",$P(^PSB(53.79,DA,0),U),$P(^PSB(53.79,DA,0),U,8),X,DA)=""
"^DD",53.79,53.79,.06,1,2,2)
I $P(^PSB(53.79,DA,0),U,8) K ^PSB(53.79,"AOIP",$P(^PSB(53.79,DA,0),U),$P(^PSB(53.79,DA,0),U,8),X,DA)
"^DD",53.79,53.79,.06,1,2,"%D",0)
^.101^6^6^3020410^^
"^DD",53.79,53.79,.06,1,2,"%D",1,0)
Creates a cross reference by patient for orderable items and
"^DD",53.79,53.79,.06,1,2,"%D",2,0)
administration date/time
"^DD",53.79,53.79,.06,1,2,"%D",3,0)
 
"^DD",53.79,53.79,.06,1,2,"%D",4,0)
  ^PSB(53.79,"AOIP",dfn,orderable item,administration d/t,DA)=""
"^DD",53.79,53.79,.06,1,2,"%D",5,0)
 
"^DD",53.79,53.79,.06,1,2,"%D",6,0)
Same as field ADMINISTRATION MEDICATION (#.08)
"^DD",53.79,53.79,.06,1,2,"DT")
2990427
"^DD",53.79,53.79,.06,1,4,0)
53.79^AU06^MUMPS
"^DD",53.79,53.79,.06,1,4,1)
D AUDIT^PSBUTL(DA,53.79,.06,X,"S")
"^DD",53.79,53.79,.06,1,4,2)
D AUDIT^PSBUTL(DA,53.79,.06,X,"K")
"^DD",53.79,53.79,.06,1,4,"%D",0)
^.101^1^1^3020412^^^^
"^DD",53.79,53.79,.06,1,4,"%D",1,0)
Creates an entry in this items audit log whenever changed or deleted.
"^DD",53.79,53.79,.06,1,4,"DT")
2990409
"^DD",53.79,53.79,.06,1,8,0)
^^TRIGGER^53.79^.14
"^DD",53.79,53.79,.06,1,8,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X I $P($G(^PSB(53.79,DA,.1)),U,2)="C"&($P($G(^(.1)),U,3)]"") I X S X=DIV S Y(1)=$S($D(^PSB(53.79,D0,.1)):^(.1),1:"") S X=$P(Y(1),U,4),X=X S DIU=X K Y X ^DD(53.79,.06,1,8,1.1) X ^DD(53.79,.06,1,8,1.4)
"^DD",53.79,53.79,.06,1,8,1.1)
S X=DIV X ^DD(53.79,.06,1,8,49.2) S X1=Y(1) S Y=$E(X1_"000",9,10)-$E(X_"000",9,10)*60+$E(X1_"00000",11,12)-$E(X_"00000",11,12),X2=X,X=$P(X,".",1)'=$P(X1,".",1) D ^%DTC:X S X=X*1440+Y
"^DD",53.79,53.79,.06,1,8,1.4)
S DIH=$S($D(^PSB(53.79,DIV(0),.1)):^(.1),1:""),DIV=X S $P(^(.1),U,4)=DIV,DIH=53.79,DIG=.14 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",53.79,53.79,.06,1,8,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X I $P($G(^PSB(53.79,DA,.1)),U,2)="C"&($P($G(^(.1)),U,3)]"") I X S X=DIV S Y(1)=$S($D(^PSB(53.79,D0,.1)):^(.1),1:"") S X=$P(Y(1),U,4),X=X S DIU=X K Y S X="" X ^DD(53.79,.06,1,8,2.4)
"^DD",53.79,53.79,.06,1,8,2.4)
S DIH=$S($D(^PSB(53.79,DIV(0),.1)):^(.1),1:""),DIV=X S $P(^(.1),U,4)=DIV,DIH=53.79,DIG=.14 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",53.79,53.79,.06,1,8,49.2)
S Y(2)=$S($D(^PSB(53.79,D0,.1)):^(.1),1:"") S X=DIV,Y(1)=X S X=$P(Y(2),U,3)
"^DD",53.79,53.79,.06,1,8,"CREATE CONDITION")
I $P($G(^PSB(53.79,DA,.1)),U,2)="C"&($P($G(^(.1)),U,3)]"")
"^DD",53.79,53.79,.06,1,8,"CREATE VALUE")
MINUTES(#.06,#.13)
"^DD",53.79,53.79,.06,1,8,"DELETE CONDITION")
I $P($G(^PSB(53.79,DA,.1)),U,2)="C"&($P($G(^(.1)),U,3)]"")
"^DD",53.79,53.79,.06,1,8,"DELETE VALUE")
@
"^DD",53.79,53.79,.06,1,8,"DT")
2990314
"^DD",53.79,53.79,.06,1,8,"FIELD")
#.14
"^DD",53.79,53.79,.06,3)
Enter the date/time the medication was administered.
"^DD",53.79,53.79,.06,21,0)
^.001^1^1^3020711^^^^
"^DD",53.79,53.79,.06,21,1,0)
Fileman Date/Time containing the actual time the med was administered.
"^DD",53.79,53.79,.06,"DT")
3140512
"BLD",9702,6)
^67
**END**
**END**

