Released FB*3.5*162 SEQ #134
Extracted from mail message
**KIDS**:FB*3.5*162^

**INSTALL NAME**
FB*3.5*162
"BLD",10021,0)
FB*3.5*162^FEE BASIS^0^3150708^y
"BLD",10021,1,0)
^^2^2^3150708^
"BLD",10021,1,1,0)
1. Error when queuing Post Commitments option for Contract Nursing
"BLD",10021,1,2,0)
   Home (CNH) obligations. 
"BLD",10021,4,0)
^9.64PA^^
"BLD",10021,6.3)
2
"BLD",10021,"ABPKG")
n
"BLD",10021,"KRN",0)
^9.67PA^779.2^20
"BLD",10021,"KRN",.4,0)
.4
"BLD",10021,"KRN",.401,0)
.401
"BLD",10021,"KRN",.402,0)
.402
"BLD",10021,"KRN",.403,0)
.403
"BLD",10021,"KRN",.5,0)
.5
"BLD",10021,"KRN",.84,0)
.84
"BLD",10021,"KRN",3.6,0)
3.6
"BLD",10021,"KRN",3.8,0)
3.8
"BLD",10021,"KRN",9.2,0)
9.2
"BLD",10021,"KRN",9.8,0)
9.8
"BLD",10021,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10021,"KRN",9.8,"NM",1,0)
FBNHPC^^0^B14845789
"BLD",10021,"KRN",9.8,"NM","B","FBNHPC",1)

"BLD",10021,"KRN",19,0)
19
"BLD",10021,"KRN",19.1,0)
19.1
"BLD",10021,"KRN",101,0)
101
"BLD",10021,"KRN",409.61,0)
409.61
"BLD",10021,"KRN",771,0)
771
"BLD",10021,"KRN",779.2,0)
779.2
"BLD",10021,"KRN",870,0)
870
"BLD",10021,"KRN",8989.51,0)
8989.51
"BLD",10021,"KRN",8989.52,0)
8989.52
"BLD",10021,"KRN",8994,0)
8994
"BLD",10021,"KRN","B",.4,.4)

"BLD",10021,"KRN","B",.401,.401)

"BLD",10021,"KRN","B",.402,.402)

"BLD",10021,"KRN","B",.403,.403)

"BLD",10021,"KRN","B",.5,.5)

"BLD",10021,"KRN","B",.84,.84)

"BLD",10021,"KRN","B",3.6,3.6)

"BLD",10021,"KRN","B",3.8,3.8)

"BLD",10021,"KRN","B",9.2,9.2)

"BLD",10021,"KRN","B",9.8,9.8)

"BLD",10021,"KRN","B",19,19)

"BLD",10021,"KRN","B",19.1,19.1)

"BLD",10021,"KRN","B",101,101)

"BLD",10021,"KRN","B",409.61,409.61)

"BLD",10021,"KRN","B",771,771)

"BLD",10021,"KRN","B",779.2,779.2)

"BLD",10021,"KRN","B",870,870)

"BLD",10021,"KRN","B",8989.51,8989.51)

"BLD",10021,"KRN","B",8989.52,8989.52)

"BLD",10021,"KRN","B",8994,8994)

"BLD",10021,"QDEF")
^^^^^^^^^^YES
"BLD",10021,"QUES",0)
^9.62^^
"BLD",10021,"REQB",0)
^9.611^1^1
"BLD",10021,"REQB",1,0)
FB*3.5*153^2
"BLD",10021,"REQB","B","FB*3.5*153",1)

"MBREQ")
0
"PKG",60,-1)
1^1
"PKG",60,0)
FEE BASIS^FB^Used to pay private vendors
"PKG",60,20,0)
^9.402P^^0
"PKG",60,22,0)
^9.49I^1^1
"PKG",60,22,1,0)
3.5^2950130^2950313
"PKG",60,22,1,"PAH",1,0)
162^3150708
"PKG",60,22,1,"PAH",1,1,0)
^^2^2^3150708
"PKG",60,22,1,"PAH",1,1,1,0)
1. Error when queuing Post Commitments option for Contract Nursing
"PKG",60,22,1,"PAH",1,1,2,0)
   Home (CNH) obligations. 
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","FBNHPC")
0^1^B14845789^B14162859
"RTN","FBNHPC",1,0)
FBNHPC ;AISC/GRR-POST COMMITMENTS TO 1358 ;1DEC00
"RTN","FBNHPC",2,0)
 ;;3.5;FEE BASIS;**25,153,162**;JAN 30, 1995;Build 2
"RTN","FBNHPC",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","FBNHPC",4,0)
 ;
"RTN","FBNHPC",5,0)
 ;FB*3.5*153 Save requested site internal to insure obligation found in file
"RTN","FBNHPC",6,0)
 ;           FB7078 for time period selected is from the same station selected
"RTN","FBNHPC",7,0)
 ;           during option process.  This is true for both monthly activity
"RTN","FBNHPC",8,0)
 ;           as well as carry over activity and Insufficient Authorization 
"RTN","FBNHPC",9,0)
 ;           Rate data on file
"RTN","FBNHPC",10,0)
 ;
"RTN","FBNHPC",11,0)
 ;FB*3.5*162 Modify task process to include PRC("site")
"RTN","FBNHPC",12,0)
 ;
"RTN","FBNHPC",13,0)
 S PRCS("TYPE")="FB",(FBNHCC,FBTOT)=0,PRCS("A")="Select Obligation Number: " K PRCS("X") D EN1^PRCS58 G:Y<0 Q S FBOBN=$P(Y,"^",2),FBSTA=PRC("SST")   ;FB*3.5*153
"RTN","FBNHPC",14,0)
 ;entry point for estimate report FBNHCC=1,(FBSEQ,FBOBN)=""
"RTN","FBNHPC",15,0)
EN1 I FBNHCC D STA^PRCSUT Q:'$D(PRC("SITE"))  S FBSTA=PRC("SST")     ;FB*3.5*153
"RTN","FBNHPC",16,0)
 S FBTOT=0,%DT=$S(FBNHCC:"AEPMX",1:"AEPMX"),%DT("A")=$S(FBNHCC:"Calculate ",1:"Post ")_"Commitments for which Month/Year: " D ^%DT G:X="^"!(X="") Q S FBPAYDT=$E(+Y,1,5)_"00",FBMM=$E(+Y,4,5),FBYY=$E(+Y,2,3),X=+Y D DAYS^FBAAUTL1 S FBDAYS=X
"RTN","FBNHPC",17,0)
 S VAR="FBOBN^FBPAYDT^FBMM^FBYY^FBDAYS^FBNHCC^FBSTA^PRC(""SITE"")",VAL=FBOBN_"^"_FBPAYDT_"^"_FBMM_"^"_FBYY_"^"_FBDAYS_"^"_FBNHCC,PGM="START^FBNHPC" D ZIS^FBAAUTL G:FBPOP END   ;FB*3.5*162
"RTN","FBNHPC",18,0)
 ;
"RTN","FBNHPC",19,0)
START K ^TMP($J,"FBNHPC") S (FBPAYEDT,FBENDDT)=$E(FBPAYDT,1,5)_FBDAYS,Q="",$P(Q,"=",80)="=",(FBTOT,FBTOTAL,FBOUT)=0 U IO W:$E(IOST,1,2)["C-" @IOF D HED^FBNHPC1
"RTN","FBNHPC",20,0)
 N FBCNT S FBCNT=0
"RTN","FBNHPC",21,0)
 S FBIFN=0,^XTMP("FBPOST",0)=$$CDTC^FBUCUTL(DT,1)_"^"_DT
"RTN","FBNHPC",22,0)
 F FBDD=FBPAYDT:0 S FBDD=$O(^FB7078("AD",7,FBDD)) Q:FBDD'>0!(FBOUT)  D
"RTN","FBNHPC",23,0)
 .F  S FBIFN=$O(^FB7078("AD",7,FBDD,FBIFN)) Q:'FBIFN!(FBOUT)  I $D(^FB7078(FBIFN,0)) S FBZ=^(0) I $P(FBZ,U,9)'="DC" S (FBHIFN,FB7078)=FBIFN,FBABD=$P(FBZ,"^",4),IFN=+$P(FBZ,"^",2),DFN=+$P(FBZ,"^",3) D
"RTN","FBNHPC",24,0)
 ..D L(FBIFN,1) I $G(FBLERR) S FBNAME=$$NAME^FBCHREQ2(DFN),FBSSN=$$SSN^FBAAUTL(DFN),Y="Another user is editing 7078." D ERR K FBLERR,Y W ! Q
"RTN","FBNHPC",25,0)
 ..I '$D(^XTMP("FBPOST",FBIFN)) D CHECK^FBNHPC1,L(FBIFN,2)
"RTN","FBNHPC",26,0)
 G END:FBOUT
"RTN","FBNHPC",27,0)
 D PRT^FBNHPC1
"RTN","FBNHPC",28,0)
 I $$WRT() W !!?10,"No funds currently need to be posted.",! G END
"RTN","FBNHPC",29,0)
Q W !!,?10,"Total ",$S(FBNHCC:"Estimated: ",1:"Posted: "),$J(FBTOT,10,2),?50,"Total Days: ",$S($D(FBTOTAL):FBTOTAL,1:0),!
"RTN","FBNHPC",30,0)
 ;
"RTN","FBNHPC",31,0)
END K FBMM,FBYY,FBDEFP,FBABD,FBPAYDT,FBDAYS,FBIFN,Z1,Z2,FBVCAR,FBCD,FBSEQ,FBOBN,FBNAME,FBSSN,FBPOSDT,FBNHCC,FBTOTAL,FBPAYEDT,FB7078,FBAABDT,FBX1,FBOUT,DFN,FBVEN,FBENDFLG,FBLERR
"RTN","FBNHPC",32,0)
 K %,%DT,DIC,FBDD,FBERR,FBTOT,IFN,PGM,Q,VAL,VAR,Z,FBEDT,FBENDDT,FBHIFN,FBRIFN,FBTDT,FBTRDYS,FBZ,FB,I,PRCS,Y,PRC,PRCSCPAN,X,X1,^TMP($J,"FBNHPC")
"RTN","FBNHPC",33,0)
 K FBSTA,FBOBIEN,FBOBNO,PRC23,FBPOP,FBCNT,FBHIN,FBMM
"RTN","FBNHPC",34,0)
 K ^XTMP("FBPOST") D CLOSE^FBAAUTL Q
"RTN","FBNHPC",35,0)
 ;
"RTN","FBNHPC",36,0)
WRT() ;determine if write to output
"RTN","FBNHPC",37,0)
 ;return 1 if nothing to post
"RTN","FBNHPC",38,0)
 Q $S('$G(FBTOT):1,'$G(FBTOTAL):1,1:0)
"RTN","FBNHPC",39,0)
 ;
"RTN","FBNHPC",40,0)
ERR W !!,*7,"Unable to Post the following transaction because of the following:",!,Y,!?7,FBNAME,?40,FBSSN I '$G(FBLERR) W ?60,"$"_$FN(FBDEFP,",",2)
"RTN","FBNHPC",41,0)
 Q
"RTN","FBNHPC",42,0)
 ;
"RTN","FBNHPC",43,0)
L(FBDA,FBL) ;lock/unlock 7078
"RTN","FBNHPC",44,0)
 ;INPUT:  FBDA = ien (fbifn) of 7078 file
"RTN","FBNHPC",45,0)
 ;        FBL = lock code:  1 to lock, 2 to unlock
"RTN","FBNHPC",46,0)
 ;OUTPUT:  no output variables; fb7078 entry will be locked or unlocked
"RTN","FBNHPC",47,0)
 N FBLCTR S FBLCTR=0
"RTN","FBNHPC",48,0)
L1 I $S('+$G(FBDA):1,'+$G(FBL):1,1:0) Q
"RTN","FBNHPC",49,0)
 I FBL=1 L +^FB7078(FBDA):2 I '$T S FBLCTR=FBLCTR+1 G:FBLCTR<5 L1 S FBLERR=1 Q
"RTN","FBNHPC",50,0)
 I FBL=2 K ^XTMP("FBPOST",FBDA) L -^FB7078(FBDA)
"RTN","FBNHPC",51,0)
 Q
"VER")
8.0^22.0
"BLD",10021,6)
^134
**END**
**END**

