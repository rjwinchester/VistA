Released VIAB*1*9 SEQ #10
Extracted from mail message
**KIDS**:VIAB*1.0*9^

**INSTALL NAME**
VIAB*1.0*9
"BLD",10010,0)
VIAB*1.0*9^VISTA INTEGRATION ADAPTER^0^3170421^y
"BLD",10010,4,0)
^9.64PA^^
"BLD",10010,6.3)
1
"BLD",10010,"ABPKG")
n
"BLD",10010,"KRN",0)
^9.67PA^779.2^20
"BLD",10010,"KRN",.4,0)
.4
"BLD",10010,"KRN",.4,"NM",0)
^9.68A^^
"BLD",10010,"KRN",.401,0)
.401
"BLD",10010,"KRN",.402,0)
.402
"BLD",10010,"KRN",.403,0)
.403
"BLD",10010,"KRN",.5,0)
.5
"BLD",10010,"KRN",.84,0)
.84
"BLD",10010,"KRN",3.6,0)
3.6
"BLD",10010,"KRN",3.8,0)
3.8
"BLD",10010,"KRN",9.2,0)
9.2
"BLD",10010,"KRN",9.8,0)
9.8
"BLD",10010,"KRN",9.8,"NM",0)
^9.68A^5^4
"BLD",10010,"KRN",9.8,"NM",1,0)
VIABRPC4^^0^B50170669
"BLD",10010,"KRN",9.8,"NM",3,0)
VIABRPC3^^0^B17129149
"BLD",10010,"KRN",9.8,"NM",4,0)
VIABRPC^^0^B70456024
"BLD",10010,"KRN",9.8,"NM",5,0)
VIABEFR^^0^B29267172
"BLD",10010,"KRN",9.8,"NM","B","VIABEFR",5)

"BLD",10010,"KRN",9.8,"NM","B","VIABRPC",4)

"BLD",10010,"KRN",9.8,"NM","B","VIABRPC3",3)

"BLD",10010,"KRN",9.8,"NM","B","VIABRPC4",1)

"BLD",10010,"KRN",19,0)
19
"BLD",10010,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",10010,"KRN",19,"NM",1,0)
VIAB WEB SERVICES OPTION^^0
"BLD",10010,"KRN",19,"NM","B","VIAB WEB SERVICES OPTION",1)

"BLD",10010,"KRN",19.1,0)
19.1
"BLD",10010,"KRN",101,0)
101
"BLD",10010,"KRN",409.61,0)
409.61
"BLD",10010,"KRN",771,0)
771
"BLD",10010,"KRN",779.2,0)
779.2
"BLD",10010,"KRN",870,0)
870
"BLD",10010,"KRN",8989.51,0)
8989.51
"BLD",10010,"KRN",8989.52,0)
8989.52
"BLD",10010,"KRN",8994,0)
8994
"BLD",10010,"KRN",8994,"NM",0)
^9.68A^56^28
"BLD",10010,"KRN",8994,"NM",20,0)
VIAB SRGY RPTLIST^^0
"BLD",10010,"KRN",8994,"NM",21,0)
VIAB ALLSAMP^^0
"BLD",10010,"KRN",8994,"NM",22,0)
VIAB ALLSPEC^^0
"BLD",10010,"KRN",8994,"NM",23,0)
VIAB DEA SIGINFO^^0
"BLD",10010,"KRN",8994,"NM",24,0)
VIABDXC ON^^0
"BLD",10010,"KRN",8994,"NM",26,0)
VIAB EFR^^0
"BLD",10010,"KRN",8994,"NM",27,0)
VIAB GET IMMUNIZATION TYPE^^0
"BLD",10010,"KRN",8994,"NM",28,0)
VIAB GET LAB TIMES^^0
"BLD",10010,"KRN",8994,"NM",29,0)
VIAB IMOLOC^^0
"BLD",10010,"KRN",8994,"NM",30,0)
VIAB INPLOC^^0
"BLD",10010,"KRN",8994,"NM",31,0)
VIAB ISPROSVC^^0
"BLD",10010,"KRN",8994,"NM",33,0)
VIAB LOC TYPE^^0
"BLD",10010,"KRN",8994,"NM",34,0)
VIAB MAXDAYS^^0
"BLD",10010,"KRN",8994,"NM",38,0)
VIAB PROVDX^^0
"BLD",10010,"KRN",8994,"NM",40,0)
VIAB SCDIS^^0
"BLD",10010,"KRN",8994,"NM",41,0)
VIAB SCHALL^^0
"BLD",10010,"KRN",8994,"NM",42,0)
VIAB SCSEL^^0
"BLD",10010,"KRN",8994,"NM",43,0)
VIAB VALSCH^^0
"BLD",10010,"KRN",8994,"NM",44,0)
VIAB VISIT^^0
"BLD",10010,"KRN",8994,"NM",46,0)
VIAB DEATEXT^^0
"BLD",10010,"KRN",8994,"NM",47,0)
VIAB DOWSCH^^0
"BLD",10010,"KRN",8994,"NM",48,0)
VIAB FUTURE LAB COLLECTS^^0
"BLD",10010,"KRN",8994,"NM",50,0)
VIAB IC VALID^^0
"BLD",10010,"KRN",8994,"NM",51,0)
VIAB TIU SECVST^^0
"BLD",10010,"KRN",8994,"NM",52,0)
VIAB IMMED COLLECT^^0
"BLD",10010,"KRN",8994,"NM",54,0)
VIAB ADMIN^^0
"BLD",10010,"KRN",8994,"NM",55,0)
VIAB DFLTSPLY^^0
"BLD",10010,"KRN",8994,"NM",56,0)
VIAB DEVICE^^0
"BLD",10010,"KRN",8994,"NM","B","VIAB ADMIN",54)

"BLD",10010,"KRN",8994,"NM","B","VIAB ALLSAMP",21)

"BLD",10010,"KRN",8994,"NM","B","VIAB ALLSPEC",22)

"BLD",10010,"KRN",8994,"NM","B","VIAB DEA SIGINFO",23)

"BLD",10010,"KRN",8994,"NM","B","VIAB DEATEXT",46)

"BLD",10010,"KRN",8994,"NM","B","VIAB DEVICE",56)

"BLD",10010,"KRN",8994,"NM","B","VIAB DFLTSPLY",55)

"BLD",10010,"KRN",8994,"NM","B","VIAB DOWSCH",47)

"BLD",10010,"KRN",8994,"NM","B","VIAB EFR",26)

"BLD",10010,"KRN",8994,"NM","B","VIAB FUTURE LAB COLLECTS",48)

"BLD",10010,"KRN",8994,"NM","B","VIAB GET IMMUNIZATION TYPE",27)

"BLD",10010,"KRN",8994,"NM","B","VIAB GET LAB TIMES",28)

"BLD",10010,"KRN",8994,"NM","B","VIAB IC VALID",50)

"BLD",10010,"KRN",8994,"NM","B","VIAB IMMED COLLECT",52)

"BLD",10010,"KRN",8994,"NM","B","VIAB IMOLOC",29)

"BLD",10010,"KRN",8994,"NM","B","VIAB INPLOC",30)

"BLD",10010,"KRN",8994,"NM","B","VIAB ISPROSVC",31)

"BLD",10010,"KRN",8994,"NM","B","VIAB LOC TYPE",33)

"BLD",10010,"KRN",8994,"NM","B","VIAB MAXDAYS",34)

"BLD",10010,"KRN",8994,"NM","B","VIAB PROVDX",38)

"BLD",10010,"KRN",8994,"NM","B","VIAB SCDIS",40)

"BLD",10010,"KRN",8994,"NM","B","VIAB SCHALL",41)

"BLD",10010,"KRN",8994,"NM","B","VIAB SCSEL",42)

"BLD",10010,"KRN",8994,"NM","B","VIAB SRGY RPTLIST",20)

"BLD",10010,"KRN",8994,"NM","B","VIAB TIU SECVST",51)

"BLD",10010,"KRN",8994,"NM","B","VIAB VALSCH",43)

"BLD",10010,"KRN",8994,"NM","B","VIAB VISIT",44)

"BLD",10010,"KRN",8994,"NM","B","VIABDXC ON",24)

"BLD",10010,"KRN","B",.4,.4)

"BLD",10010,"KRN","B",.401,.401)

"BLD",10010,"KRN","B",.402,.402)

"BLD",10010,"KRN","B",.403,.403)

"BLD",10010,"KRN","B",.5,.5)

"BLD",10010,"KRN","B",.84,.84)

"BLD",10010,"KRN","B",3.6,3.6)

"BLD",10010,"KRN","B",3.8,3.8)

"BLD",10010,"KRN","B",9.2,9.2)

"BLD",10010,"KRN","B",9.8,9.8)

"BLD",10010,"KRN","B",19,19)

"BLD",10010,"KRN","B",19.1,19.1)

"BLD",10010,"KRN","B",101,101)

"BLD",10010,"KRN","B",409.61,409.61)

"BLD",10010,"KRN","B",771,771)

"BLD",10010,"KRN","B",779.2,779.2)

"BLD",10010,"KRN","B",870,870)

"BLD",10010,"KRN","B",8989.51,8989.51)

"BLD",10010,"KRN","B",8989.52,8989.52)

"BLD",10010,"KRN","B",8994,8994)

"BLD",10010,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",10010,"QUES",0)
^9.62^^
"BLD",10010,"REQB",0)
^9.611^1^1
"BLD",10010,"REQB",1,0)
VIAB*1.0*8^1
"BLD",10010,"REQB","B","VIAB*1.0*8",1)

"KRN",19,2921669,-1)
0^1
"KRN",19,2921669,0)
VIAB WEB SERVICES OPTION^VIAB Web Services Option^^B^^^^^^^^VISTA INTEGRATION ADAPTER
"KRN",19,2921669,1,0)
^19.06^3^3^3140829^^^^
"KRN",19,2921669,1,1,0)
This option is required by the Kernel Broker to give 
"KRN",19,2921669,1,2,0)
access to the RPCs used by the Vista Integration Adapter 
"KRN",19,2921669,1,3,0)
(VIA) team.
"KRN",19,2921669,99.1)
63218,50689
"KRN",19,2921669,"RPC",0)
^19.05P^227^180
"KRN",19,2921669,"RPC",1,0)
DG SENSITIVE RECORD ACCESS
"KRN",19,2921669,"RPC",2,0)
DG SENSITIVE RECORD BULLETIN
"KRN",19,2921669,"RPC",3,0)
ORPRF HASFLG
"KRN",19,2921669,"RPC",4,0)
ORQPT CLINIC PATIENTS
"KRN",19,2921669,"RPC",5,0)
ORQPT PROVIDER PATIENTS
"KRN",19,2921669,"RPC",6,0)
ORQPT SPECIALTIES
"KRN",19,2921669,"RPC",7,0)
ORQPT SPECIALTY PATIENTS
"KRN",19,2921669,"RPC",8,0)
ORQPT TEAM PATIENTS
"KRN",19,2921669,"RPC",9,0)
ORQPT TEAMS
"KRN",19,2921669,"RPC",10,0)
ORQPT WARDRMBED
"KRN",19,2921669,"RPC",11,0)
ORQPT WARDS
"KRN",19,2921669,"RPC",12,0)
ORQQCN DETAIL
"KRN",19,2921669,"RPC",13,0)
ORQQCN GET ORDER NUMBER
"KRN",19,2921669,"RPC",14,0)
ORQQCN LIST
"KRN",19,2921669,"RPC",15,0)
ORVAA VAA
"KRN",19,2921669,"RPC",16,0)
ORWCIRN FACLIST
"KRN",19,2921669,"RPC",17,0)
ORWCV DTLVST
"KRN",19,2921669,"RPC",18,0)
ORWCV VST
"KRN",19,2921669,"RPC",19,0)
ORWDX LOADRSP
"KRN",19,2921669,"RPC",20,0)
ORWDX LOCK ORDER
"KRN",19,2921669,"RPC",21,0)
ORWDX UNLOCK ORDER
"KRN",19,2921669,"RPC",22,0)
ORWDXA OFCPLX
"KRN",19,2921669,"RPC",23,0)
ORWDXC SESSION
"KRN",19,2921669,"RPC",24,0)
ORWDXM DLGNAME
"KRN",19,2921669,"RPC",25,0)
ORWDXM1 BLDQRSP
"KRN",19,2921669,"RPC",26,0)
ORWLRR ALLTESTS
"KRN",19,2921669,"RPC",27,0)
ORWLRR INFO
"KRN",19,2921669,"RPC",28,0)
ORWLRR INTERIMG
"KRN",19,2921669,"RPC",29,0)
ORWORDG MAPSEQ
"KRN",19,2921669,"RPC",30,0)
ORWORR AGET
"KRN",19,2921669,"RPC",31,0)
ORWORR GET4LST
"KRN",19,2921669,"RPC",32,0)
ORWPS ACTIVE
"KRN",19,2921669,"RPC",33,0)
ORWPS DETAIL
"KRN",19,2921669,"RPC",34,0)
ORWPT ADMITLST
"KRN",19,2921669,"RPC",35,0)
ORWPT BYWARD
"KRN",19,2921669,"RPC",36,0)
ORWPT DIEDON
"KRN",19,2921669,"RPC",37,0)
ORWPT ID INFO
"KRN",19,2921669,"RPC",38,0)
ORWPT LIST ALL
"KRN",19,2921669,"RPC",39,0)
ORWPT PTINQ
"KRN",19,2921669,"RPC",40,0)
ORWPT SELECT
"KRN",19,2921669,"RPC",41,0)
ORWPT1 PCDETAIL
"KRN",19,2921669,"RPC",42,0)
ORWPT1 PRCARE
"KRN",19,2921669,"RPC",43,0)
ORWPT16 ID INFO
"KRN",19,2921669,"RPC",44,0)
ORWRP REPORT TEXT
"KRN",19,2921669,"RPC",45,0)
ORWRP2 HS COMPONENTS
"KRN",19,2921669,"RPC",46,0)
ORWRP2 HS REPORT TEXT
"KRN",19,2921669,"RPC",47,0)
ORWSR RPTLIST
"KRN",19,2921669,"RPC",48,0)
ORWTIU CHKTXT
"KRN",19,2921669,"RPC",49,0)
ORWU CLINLOC
"KRN",19,2921669,"RPC",50,0)
ORWU DT
"KRN",19,2921669,"RPC",51,0)
ORWU NEWPERS
"KRN",19,2921669,"RPC",52,0)
ORWU USERINFO
"KRN",19,2921669,"RPC",53,0)
ORWU VALIDSIG
"KRN",19,2921669,"RPC",54,0)
ORWU1 NEWLOC
"KRN",19,2921669,"RPC",55,0)
SC GETS ENTRY DATA
"KRN",19,2921669,"RPC",56,0)
SC LISTER
"KRN",19,2921669,"RPC",57,0)
TIU AUTHORIZATION
"KRN",19,2921669,"RPC",58,0)
TIU CREATE RECORD
"KRN",19,2921669,"RPC",59,0)
TIU DOCUMENTS BY CONTEXT
"KRN",19,2921669,"RPC",60,0)
TIU GET PRF ACTIONS
"KRN",19,2921669,"RPC",61,0)
TIU GET RECORD TEXT
"KRN",19,2921669,"RPC",62,0)
TIU HAS AUTHOR SIGNED?
"KRN",19,2921669,"RPC",63,0)
TIU IS THIS A CONSULT?
"KRN",19,2921669,"RPC",64,0)
TIU IS THIS A SURGERY?
"KRN",19,2921669,"RPC",65,0)
TIU ISPRF
"KRN",19,2921669,"RPC",66,0)
TIU LOCK RECORD
"KRN",19,2921669,"RPC",67,0)
TIU LONG LIST OF TITLES
"KRN",19,2921669,"RPC",68,0)
TIU ONE VISIT NOTE?
"KRN",19,2921669,"RPC",69,0)
TIU REQUIRES COSIGNATURE
"KRN",19,2921669,"RPC",70,0)
TIU SET DOCUMENT TEXT
"KRN",19,2921669,"RPC",71,0)
TIU SIGN RECORD
"KRN",19,2921669,"RPC",72,0)
TIU UNLOCK RECORD
"KRN",19,2921669,"RPC",73,0)
TIU UPDATE RECORD
"KRN",19,2921669,"RPC",74,0)
TIU WAS THIS SAVED?
"KRN",19,2921669,"RPC",75,0)
TIU WHICH SIGNATURE ACTION
"KRN",19,2921669,"RPC",78,0)
ORQQAL LIST
"KRN",19,2921669,"RPC",79,0)
ORQQVI VITALS
"KRN",19,2921669,"RPC",80,0)
ORWDX LOCK
"KRN",19,2921669,"RPC",81,0)
ORWDX SEND
"KRN",19,2921669,"RPC",82,0)
ORWDX UNLOCK
"KRN",19,2921669,"RPC",83,0)
ORWPT FULLSSN
"KRN",19,2921669,"RPC",84,0)
ORWPT LAST5
"KRN",19,2921669,"RPC",85,0)
VAFCTFU CONVERT ICN TO DFN
"KRN",19,2921669,"RPC",86,0)
VPR GET PATIENT DATA
"KRN",19,2921669,"RPC",87,0)
ORALWORD ALLWORD
"KRN",19,2921669,"RPC",88,0)
ORCHECK GETXTRA
"KRN",19,2921669,"RPC",89,0)
ORDDPAPI CLOZMSG
"KRN",19,2921669,"RPC",90,0)
OREVNTX1 GETSTS
"KRN",19,2921669,"RPC",92,0)
ORQQCN STATUS
"KRN",19,2921669,"RPC",93,0)
ORQQCN SVC W/SYNONYMS
"KRN",19,2921669,"RPC",94,0)
ORWD1 PRINTGUI
"KRN",19,2921669,"RPC",95,0)
ORWD1 RVPRINT
"KRN",19,2921669,"RPC",96,0)
ORWD2 DEVINFO
"KRN",19,2921669,"RPC",97,0)
ORWDCN32 ORDRMSG
"KRN",19,2921669,"RPC",98,0)
ORWDPS1 FAILDEA
"KRN",19,2921669,"RPC",99,0)
ORWDPS1 ODSLCT
"KRN",19,2921669,"RPC",100,0)
ORWDPS2 DAY2QTY
"KRN",19,2921669,"RPC",101,0)
ORWDPS2 MAXREF
"KRN",19,2921669,"RPC",102,0)
ORWDPS2 QTY2DAY
"KRN",19,2921669,"RPC",103,0)
ORWDPS32 DRUGMSG
"KRN",19,2921669,"RPC",104,0)
ORWDPS32 ISSPLY
"KRN",19,2921669,"RPC",105,0)
ORWDPS32 VALQTY
"KRN",19,2921669,"RPC",106,0)
ORWDPS32 VALROUTE
"KRN",19,2921669,"RPC",107,0)
ORWDRA32 APPROVAL
"KRN",19,2921669,"RPC",108,0)
ORWDRA32 DEF
"KRN",19,2921669,"RPC",110,0)
ORWDX DGNM
"KRN",19,2921669,"RPC",111,0)
ORWDX2 DCREASON
"KRN",19,2921669,"RPC",112,0)
ORWDXA ISACTOI
"KRN",19,2921669,"RPC",113,0)
ORWDXR RNWFLDS
"KRN",19,2921669,"RPC",114,0)
ORWDXR01 CANCHG
"KRN",19,2921669,"RPC",115,0)
ORWGRPC ITEMDATA
"KRN",19,2921669,"RPC",116,0)
ORWGRPC ITEMS
"KRN",19,2921669,"RPC",117,0)
ORWOR1 GETDSCH
"KRN",19,2921669,"RPC",118,0)
ORWRP GET DEFAULT PRINTER
"KRN",19,2921669,"RPC",120,0)
ORWTPD GETDFLT
"KRN",19,2921669,"RPC",121,0)
TIU DETAILED DISPLAY
"KRN",19,2921669,"RPC",125,0)
VIABPCE2 GET HFACTORS TYPE
"KRN",19,2921669,"RPC",126,0)
VIABPCE4 LEX
"KRN",19,2921669,"RPC",127,0)
VIABU EXTNAME
"KRN",19,2921669,"RPC",128,0)
TIU SET ADMINISTRATIVE CLOSURE
"KRN",19,2921669,"RPC",129,0)
VIAB GETSURR
"KRN",19,2921669,"RPC",133,0)
ORWMC PATIENT PROCEDURES1
"KRN",19,2921669,"RPC",137,0)
ORQPT PROVIDERS
"KRN",19,2921669,"RPC",158,0)
VIAB GET USER DIVISIONS
"KRN",19,2921669,"RPC",160,0)
ORWRP REPORT LISTS
"KRN",19,2921669,"RPC",161,0)
TIU CREATE ADDENDUM RECORD
"KRN",19,2921669,"RPC",162,0)
TIU UPDATE ADDITIONAL SIGNERS
"KRN",19,2921669,"RPC",163,0)
VIAB SITENAME
"KRN",19,2921669,"RPC",164,0)
VIAB ACTPROB
"KRN",19,2921669,"RPC",165,0)
VIAB BMS
"KRN",19,2921669,"RPC",166,0)
VIAB CPTMODS
"KRN",19,2921669,"RPC",167,0)
VIAB DEFAULT REQUEST REASON
"KRN",19,2921669,"RPC",168,0)
VIAB EDIT DEFAULT REASON
"KRN",19,2921669,"RPC",173,0)
VIAB NOTEVSTR
"KRN",19,2921669,"RPC",179,0)
VIAB CURSPE
"KRN",19,2921669,"RPC",180,0)
VIAB RADSRC
"KRN",19,2921669,"RPC",181,0)
MBAA LIST CANCELLATION REASONS
"KRN",19,2921669,"RPC",182,0)
MBAA VERIFY CLINIC ACCESS
"KRN",19,2921669,"RPC",183,0)
MBAA APPOINTMENT LIST BY NAME
"KRN",19,2921669,"RPC",184,0)
MBAA APPOINTMENT MAKE
"KRN",19,2921669,"RPC",185,0)
MBAA FACILITY WAIT LIST
"KRN",19,2921669,"RPC",186,0)
MBAA CANCEL APPOINTMENT
"KRN",19,2921669,"RPC",187,0)
MBAA PATIENT PENDING APPT
"KRN",19,2921669,"RPC",188,0)
MBAA REMOVE FROM EWL
"KRN",19,2921669,"RPC",189,0)
MBAA PROVIDERS BY CLINIC
"KRN",19,2921669,"RPC",190,0)
MBAA GET CLINIC AVAILABILITY
"KRN",19,2921669,"RPC",191,0)
MBAA GET CLINIC DETAILS
"KRN",19,2921669,"RPC",192,0)
MBAA WAIT LIST BY DFN
"KRN",19,2921669,"RPC",193,0)
PX SAVE DATA
"KRN",19,2921669,"RPC",194,0)
MD CLIO
"KRN",19,2921669,"RPC",195,0)
VIAB DEA SIGINFO
"KRN",19,2921669,"RPC",196,0)
VIAB DEATEXT
"KRN",19,2921669,"RPC",197,0)
VIAB DOWSCH
"KRN",19,2921669,"RPC",198,0)
VIAB EFR
"KRN",19,2921669,"RPC",199,0)
VIAB FUTURE LAB COLLECTS
"KRN",19,2921669,"RPC",200,0)
VIAB GET IMMUNIZATION TYPE
"KRN",19,2921669,"RPC",201,0)
VIAB GET LAB TIMES
"KRN",19,2921669,"RPC",202,0)
VIAB IMOLOC
"KRN",19,2921669,"RPC",203,0)
VIAB INPLOC
"KRN",19,2921669,"RPC",204,0)
VIAB ISPROSVC
"KRN",19,2921669,"RPC",206,0)
VIAB LOC TYPE
"KRN",19,2921669,"RPC",207,0)
VIAB MAXDAYS
"KRN",19,2921669,"RPC",209,0)
VIAB PROVDX
"KRN",19,2921669,"RPC",210,0)
VIAB SCDIS
"KRN",19,2921669,"RPC",211,0)
VIAB SCHALL
"KRN",19,2921669,"RPC",212,0)
VIAB SCSEL
"KRN",19,2921669,"RPC",213,0)
VIAB SRGY RPTLIST
"KRN",19,2921669,"RPC",214,0)
VIAB VALSCH
"KRN",19,2921669,"RPC",215,0)
VIAB VISIT
"KRN",19,2921669,"RPC",218,0)
VIABDXC ON
"KRN",19,2921669,"RPC",219,0)
VIAB IC VALID
"KRN",19,2921669,"RPC",220,0)
VIAB TIU SECVST
"KRN",19,2921669,"RPC",221,0)
VIAB ADMIN
"KRN",19,2921669,"RPC",223,0)
VIAB IMMED COLLECT
"KRN",19,2921669,"RPC",224,0)
VIAB DFLTSPLY
"KRN",19,2921669,"RPC",225,0)
VIAB DEVICE
"KRN",19,2921669,"RPC",226,0)
VIAB ALLSAMP
"KRN",19,2921669,"RPC",227,0)
VIAB ALLSPEC
"KRN",19,2921669,"U")
VIAB WEB SERVICES OPTION
"KRN",8994,3693,-1)
0^26
"KRN",8994,3693,0)
VIAB EFR^EN^VIABEFR^4^R^^^1^^^1
"KRN",8994,3693,1,0)
^8994.01^2^2^3160906^^^
"KRN",8994,3693,1,1,0)
This RPC supports the Embedded Fragment Registry (EFR) project. It reads
"KRN",8994,3693,1,2,0)
and returns data from the RESEARCH File #67.1 and the LAB DATA File #63.
"KRN",8994,3693,2,0)
^8994.02A^1^1
"KRN",8994,3693,2,1,0)
VIA^2^^^1
"KRN",8994,3693,2,"B","VIA",1)

"KRN",8994,3693,2,"PARAMSEQ",1,1)

"KRN",8994,3693,3,0)
^^13^13^3160906^
"KRN",8994,3693,3,1,0)
Returns a list of lab identifiers from RESEARCH File #67.1 and LAB DATA 
"KRN",8994,3693,3,2,0)
File #63.04.
"KRN",8994,3693,3,3,0)
   Builds the ^TMP("VIABEFR",$J) array
"KRN",8994,3693,3,4,0)
   ^TMP("VIABEFR",$J,1)="[Data"] or if there is an error 
"KRN",8994,3693,3,5,0)
   ^TMP("VIABEFR",$J,1)="[Errors"]
"KRN",8994,3693,3,6,0)
   ^TMP("VIABEFR",$J,2)=IEN^.01 NAME^9 IDENTIFIER^63 LABORATORY REFERENCE
"KRN",8994,3693,3,7,0)
   ^TMP("VIABEFR",$J,2,1)=IEN^.01 DATE/TIME SPECIMEN TAKEN^.06 ACCESSION^
"KRN",8994,3693,3,8,0)
                          4 CREATININE^31 COPPER^32 ZINC (Bef. 11/92)^33
"KRN",8994,3693,3,9,0)
                          ARSENIC^35 LEAD (SK)^101 CADMIUM^106 CHROMIUM^
"KRN",8994,3693,3,10,0)
                          108 COBALT^116 MANGANESE (SK)^205 ALUMINUM^322
"KRN",8994,3693,3,11,0)
                          NICKEL (SK)^750 IRON (Bef. 11/92)^
"KRN",8994,3693,3,12,0)
                          797 VOLUME^.03 DATE REPORT COMPLETED^840 ELAPSED
"KRN",8994,3693,3,13,0)
                          TIME
"KRN",8994,4082,-1)
0^40
"KRN",8994,4082,0)
VIAB SCDIS^SCDIS^VIABRPC^2^R^^^^^^1
"KRN",8994,4082,2,0)
^8994.02A^1^1
"KRN",8994,4082,2,1,0)
DFN^1^^1^1
"KRN",8994,4082,2,1,1,0)
^^1^1^3160803^
"KRN",8994,4082,2,1,1,1,0)
DFN - The IEN of the PATIENT File #2.
"KRN",8994,4082,2,"B","DFN",1)

"KRN",8994,4082,2,"PARAMSEQ",1,1)

"KRN",8994,4082,3,0)
^8994.03^1^1^3160803^^^
"KRN",8994,4082,3,1,0)
Returns service connected percentage and rated disabilities for a patient.
"KRN",8994,4083,-1)
0^42
"KRN",8994,4083,0)
VIAB SCSEL^SCSEL^VIABRPC^1^R^^^^^^1
"KRN",8994,4083,2,0)
^8994.02A^4^4
"KRN",8994,4083,2,1,0)
DFN^^^^1
"KRN",8994,4083,2,1,1,0)
^^1^1^3160803^
"KRN",8994,4083,2,1,1,1,0)
DFN - IEN of patient (PATIENT File #2).
"KRN",8994,4083,2,2,0)
APPDT^^^^2
"KRN",8994,4083,2,2,1,0)
^^1^1^3160803^
"KRN",8994,4083,2,2,1,1,0)
APPDT - date and time of the encounter.
"KRN",8994,4083,2,3,0)
HLOC^^^^3
"KRN",8994,4083,2,3,1,0)
^^1^1^3160803^
"KRN",8994,4083,2,3,1,1,0)
HLOC - Hospital Location of the enocunter.
"KRN",8994,4083,2,4,0)
VST^^^^4
"KRN",8994,4083,2,4,1,0)
^^1^1^3160803^
"KRN",8994,4083,2,4,1,1,0)
VST - The visit that is being used (optional).
"KRN",8994,4083,2,"B","APPDT",2)

"KRN",8994,4083,2,"B","DFN",1)

"KRN",8994,4083,2,"B","HLOC",3)

"KRN",8994,4083,2,"B","VST",4)

"KRN",8994,4083,2,"PARAMSEQ",1,1)

"KRN",8994,4083,2,"PARAMSEQ",2,2)

"KRN",8994,4083,2,"PARAMSEQ",3,3)

"KRN",8994,4083,2,"PARAMSEQ",4,4)

"KRN",8994,4083,3,0)
^^1^1^3160803^
"KRN",8994,4083,3,1,0)
Returns a list of the patient's service connected conditions.
"KRN",8994,4086,-1)
0^38
"KRN",8994,4086,0)
VIAB PROVDX^PROVDX^VIABRPC^1^R^^^^^^1
"KRN",8994,4086,2,0)
^8994.02A^1^1
"KRN",8994,4086,2,1,0)
VIAIEN^1^^1
"KRN",8994,4086,2,1,1,0)
^^1^1^3160804^
"KRN",8994,4086,2,1,1,1,0)
IEN to File #123.5 ("#;99CON") or File #123.3 ("#;99PRC").
"KRN",8994,4086,2,"B","VIAIEN",1)

"KRN",8994,4086,3,0)
^^3^3^3160804^
"KRN",8994,4086,3,1,0)
     Returns:  string  A^B
"KRN",8994,4086,3,2,0)
        A = O (optional), R (required) or S (suppress)
"KRN",8994,4086,3,3,0)
        B = F (free-text) or L (lexicon)
"KRN",8994,4090,-1)
0^27
"KRN",8994,4090,0)
VIAB GET IMMUNIZATION TYPE^IMMTYPE^VIABRPC^2^R^^^^^^1
"KRN",8994,4090,2,0)
^8994.02A^^0
"KRN",8994,4090,3,0)
^8994.03^1^1^3160805^^
"KRN",8994,4090,3,1,0)
Returns a list of active immunizations.
"KRN",8994,4091,-1)
0^31
"KRN",8994,4091,0)
VIAB ISPROSVC^ISPROSVC^VIABRPC^1^R^^^^^^1
"KRN",8994,4091,2,0)
^8994.02A^1^1
"KRN",8994,4091,2,1,0)
GMRCIEN^1
"KRN",8994,4091,2,1,1,0)
^^1^1^3160808^
"KRN",8994,4091,2,1,1,1,0)
GMRCIEN - IEN of File #123.5.
"KRN",8994,4091,2,"B","GMRCIEN",1)

"KRN",8994,4091,3,0)
^^2^2^3160808^
"KRN",8994,4091,3,1,0)
RPC will return 1 or 0 if the input IEN for File #123.5 is marked as part
"KRN",8994,4091,3,2,0)
of the Consults-Prosthetics interface.
"KRN",8994,4096,-1)
0^44
"KRN",8994,4096,0)
VIAB VISIT^VISIT^VIABRPC^2^R^^^^^^1
"KRN",8994,4096,1,0)
^^1^1^3160906^
"KRN",8994,4096,1,1,0)
Get list of visit types for clinic.
"KRN",8994,4096,2,0)
^8994.02A^2^2
"KRN",8994,4096,2,1,0)
CLINIC^^^^1
"KRN",8994,4096,2,2,0)
VIADATE^^^^2
"KRN",8994,4096,2,"B","CLINIC",1)

"KRN",8994,4096,2,"B","VIADATE",2)

"KRN",8994,4096,2,"PARAMSEQ",1,1)

"KRN",8994,4096,2,"PARAMSEQ",2,2)

"KRN",8994,4096,3,0)
^8994.03^1^1^3160906^^
"KRN",8994,4096,3,1,0)
Returns a list of visit types for a clinic.
"KRN",8994,4097,-1)
0^20
"KRN",8994,4097,0)
VIAB SRGY RPTLIST^RPTLIST^VIABRPC4^4^R^^^1^^^1
"KRN",8994,4097,1,0)
^^1^1^3161011^
"KRN",8994,4097,1,1,0)
Return list of surgery data for a patient.
"KRN",8994,4097,2,0)
^8994.02A^1^1
"KRN",8994,4097,2,1,0)
VIADFN^1^^1
"KRN",8994,4097,2,1,1,0)
^^1^1^3161011^
"KRN",8994,4097,2,1,1,1,0)
VIADFN - Patient IEN, File #2.
"KRN",8994,4097,2,"B","VIADFN",1)

"KRN",8994,4098,-1)
0^24
"KRN",8994,4098,0)
VIABDXC ON^ON^VIABRPC4^1^R^^^^^^1
"KRN",8994,4098,1,0)
^^1^1^3161013^
"KRN",8994,4098,1,1,0)
Returns E if order checking enabled, otherwise D.
"KRN",8994,4099,-1)
0^23
"KRN",8994,4099,0)
VIAB DEA SIGINFO^SIGINFO^VIABRPC4^3^R^^^1^^^1
"KRN",8994,4099,1,0)
^^2^2^3161013^
"KRN",8994,4099,1,1,0)
Returns the provider/patient info that must be displayed when signing a 
"KRN",8994,4099,1,2,0)
controlled substance order(s).
"KRN",8994,4100,-1)
0^41
"KRN",8994,4100,0)
VIAB SCHALL^SCHALL^VIABRPC4^2^R^^^^^^1
"KRN",8994,4100,1,0)
^8994.01^1^1^3161017^^
"KRN",8994,4100,1,1,0)
Returns a list of schedules.
"KRN",8994,4100,2,0)
^8994.02A^1^1
"KRN",8994,4100,2,1,0)
LOCIEN^1
"KRN",8994,4100,2,1,1,0)
^^1^1^3161017^
"KRN",8994,4100,2,1,1,1,0)
This is a pointer to the Hospital Location file #44.
"KRN",8994,4100,2,"B","LOCIEN",1)

"KRN",8994,4100,3,0)
^8994.03^1^1^3161017^^^
"KRN",8994,4100,3,1,0)
Returns a list of schedules for a location.
"KRN",8994,4101,-1)
0^43
"KRN",8994,4101,0)
VIAB VALSCH^VALSCH^VIABRPC4^1^R^^^^^^1
"KRN",8994,4101,1,0)
^^1^1^3161018^
"KRN",8994,4101,1,1,0)
Validate a schedule, return 1 if valid, 0 if not,
"KRN",8994,4101,3,0)
^^1^1^3161018^
"KRN",8994,4101,3,1,0)
Returns return 1 if valid, 0 if not for a schedule.
"KRN",8994,4102,-1)
0^22
"KRN",8994,4102,0)
VIAB ALLSPEC^ALLSPEC^VIABRPC3^2^S^^^^^^1
"KRN",8994,4102,1,0)
^^1^1^3161011^
"KRN",8994,4102,1,1,0)
Returns a list of specimens from the TOPOGRAPHY FIELD file (#61).
"KRN",8994,4102,2,0)
^8994.02A^2^2
"KRN",8994,4102,2,1,0)
FROM^1^^0^1
"KRN",8994,4102,2,1,1,0)
^^2^2^3161011^
"KRN",8994,4102,2,1,1,1,0)
This is the starting point for the search. If null, the search stars at 
"KRN",8994,4102,2,1,1,2,0)
the top of the B cross reference.
"KRN",8994,4102,2,2,0)
DIR^1^1^1^2
"KRN",8994,4102,2,2,1,0)
^^2^2^3161011^
"KRN",8994,4102,2,2,1,1,0)
The direction to search. 1 results in searching forward from the starting 
"KRN",8994,4102,2,2,1,2,0)
point, -1 results in searching backwards from the starting point.
"KRN",8994,4102,2,"B","DIR",2)

"KRN",8994,4102,2,"B","FROM",1)

"KRN",8994,4102,2,"PARAMSEQ",1,1)

"KRN",8994,4102,2,"PARAMSEQ",2,2)

"KRN",8994,4102,3,0)
^^2^2^3161011^
"KRN",8994,4102,3,1,0)
Returns an array in the format:
"KRN",8994,4102,3,2,0)
IEN ^ Name_(SNOMED CODE)
"KRN",8994,4103,-1)
0^28
"KRN",8994,4103,0)
VIAB GET LAB TIMES^GETLABTM^VIABRPC3^2^S^^^^^^1
"KRN",8994,4103,1,0)
^^1^1^3161011^
"KRN",8994,4103,1,1,0)
Returns a list of lab collect times for a date and location.
"KRN",8994,4103,2,0)
^8994.02A^2^2
"KRN",8994,4103,2,1,0)
VIADATE^1^12^1^1
"KRN",8994,4103,2,1,1,0)
^8994.021^1^1^3170406^^
"KRN",8994,4103,2,1,1,1,0)
Date and Time for the search.
"KRN",8994,4103,2,2,0)
VIALOC^1^12^1^2
"KRN",8994,4103,2,2,1,0)
^8994.021^2^2^3170406^^
"KRN",8994,4103,2,2,1,1,0)
The internal entry number (IEN) for the location in the Hospital Location 
"KRN",8994,4103,2,2,1,2,0)
File (#44).
"KRN",8994,4103,2,"B","VIADATE",1)

"KRN",8994,4103,2,"B","VIALOC",2)

"KRN",8994,4103,2,"PARAMSEQ",1,1)

"KRN",8994,4103,2,"PARAMSEQ",2,2)

"KRN",8994,4103,3,0)
^8994.03^1^1^3170406^^^
"KRN",8994,4103,3,1,0)
Returns the list of collection times for the specified date and location.
"KRN",8994,4104,-1)
0^33
"KRN",8994,4104,0)
VIAB LOC TYPE^LOCTYPE^VIARPC3^1^S^^^^^^1
"KRN",8994,4104,1,0)
^8994.01^2^2^3170406^^
"KRN",8994,4104,1,1,0)
Returns C for a Clinic and W for a Ward or -1 if not a clinic or ward 
"KRN",8994,4104,1,2,0)
type.
"KRN",8994,4104,2,0)
^8994.02A^1^1
"KRN",8994,4104,2,1,0)
VIALOC^1^12^1^1
"KRN",8994,4104,2,1,1,0)
^8994.021^1^1^3170406^^
"KRN",8994,4104,2,1,1,1,0)
The IEN for the location in the Hospital Location File (#44).
"KRN",8994,4104,2,"B","VIALOC",1)

"KRN",8994,4104,2,"PARAMSEQ",1,1)

"KRN",8994,4104,3,0)
^8994.03^2^2^3170406^^^
"KRN",8994,4104,3,1,0)
Returns C for a Clinic and W for a Ward or -1 if not a clinic or ward 
"KRN",8994,4104,3,2,0)
type.
"KRN",8994,4106,-1)
0^29
"KRN",8994,4106,0)
VIAB IMOLOC^IMOLOC^VIABRPC4^1^^^^^^^1
"KRN",8994,4106,1,0)
^^1^1^3170117^
"KRN",8994,4106,1,1,0)
RPC returns - Is it an IMO order?
"KRN",8994,4107,-1)
0^30
"KRN",8994,4107,0)
VIAB INPLOC^INPLOC^VIABRPC4^2^^^^^^^1
"KRN",8994,4107,1,0)
^^1^1^3170106^
"KRN",8994,4107,1,1,0)
Returns a list of wards from the HOSPITAL LOCATION file.
"KRN",8994,4108,-1)
0^21
"KRN",8994,4108,0)
VIAB ALLSAMP^ALLSAMP^VIABRPC4^2^^^^^^^1
"KRN",8994,4108,1,0)
^^2^2^3170109^
"KRN",8994,4108,1,1,0)
Returns all collection samples in the format:
"KRN",8994,4108,1,2,0)
   n^SampIEN^SampName^SpecPtr^TubeTop^^^LabCollect^^SpecName
"KRN",8994,4109,-1)
0^34
"KRN",8994,4109,0)
VIAB MAXDAYS^MAXDAYS^VIABRPC4^1^^^^^^^1
"KRN",8994,4109,1,0)
^^1^1^3170109^
"KRN",8994,4109,1,1,0)
Returns the maximum number of days for a continuous lab order.
"KRN",8994,4129,-1)
0^47
"KRN",8994,4129,0)
VIAB DOWSCH^DOWSCH^VIABRPC3^2^^^^^1^^1
"KRN",8994,4129,1,0)
^8994.01^2^2^3161026^^
"KRN",8994,4129,1,1,0)
This RPC returns a list of schedule that have a frequency defined and the 
"KRN",8994,4129,1,2,0)
frequency is less than or equal to 1440 minutes.
"KRN",8994,4129,2,0)
^8994.02A^2^2
"KRN",8994,4129,2,1,0)
DFN^1^^1^1
"KRN",8994,4129,2,1,1,0)
^^1^1^3161026^
"KRN",8994,4129,2,1,1,1,0)
The Patient DFN.
"KRN",8994,4129,2,2,0)
LOCIEN^1^^1^2
"KRN",8994,4129,2,2,1,0)
^8994.021^1^1^3161026^^
"KRN",8994,4129,2,2,1,1,0)
The IEN for the location in the Hospital Location File (#44).
"KRN",8994,4129,2,"B","DFN",1)

"KRN",8994,4129,2,"B","LOCIEN",2)

"KRN",8994,4129,2,"PARAMSEQ",1,1)

"KRN",8994,4129,2,"PARAMSEQ",2,2)

"KRN",8994,4129,3,0)
^^10^10^3161026^
"KRN",8994,4129,3,1,0)
Returns an array containing schedules and frequency in the format:
"KRN",8994,4129,3,2,0)
PSSARRY(n) = IEN^NAME^OUTPATIEN EXPANSION^SCHEDULE TYPE^ADMIN TIME
"KRN",8994,4129,3,3,0)
                                     
"KRN",8994,4129,3,4,0)
 IEN = Ward location (File #42) of the patient.
"KRN",8994,4129,3,5,0)
 NAME = Schedule Name 
"KRN",8994,4129,3,6,0)
 OUTPATIENT EXPANSION = Display name of the schedule for Outpatient
"KRN",8994,4129,3,7,0)
 Pharmacy.  
"KRN",8994,4129,3,8,0)
 SCHEDULE TYPE = Schedule type of the schedule
"KRN",8994,4129,3,9,0)
 ADMIN TIME = Either the Standard Administration Times for the schedule or
"KRN",8994,4129,3,10,0)
 the Ward-Specific Administration Times for the schedule, if defined.
"KRN",8994,4130,-1)
0^48
"KRN",8994,4130,0)
VIAB FUTURE LAB COLLECTS^LCFUTR^VIABRPC3^1^^^^^1^^1
"KRN",8994,4130,1,0)
^8994.01^1^1^3170406^^
"KRN",8994,4130,1,1,0)
Returns the number of days in the future to allow lab collects.
"KRN",8994,4130,2,0)
^8994.02A^3^2
"KRN",8994,4130,2,2,0)
VIALOC
"KRN",8994,4130,2,3,0)
VIADIV^1^^0
"KRN",8994,4130,2,"B","VIADIV",3)

"KRN",8994,4130,2,"B","VIALOC",2)

"KRN",8994,4130,3,0)
^8994.03^1^1^3170406^^
"KRN",8994,4130,3,1,0)
Returns the number of days in the future.
"KRN",8994,4131,-1)
0^46
"KRN",8994,4131,0)
VIAB DEATEXT^DEATEXT^VIABRPC3^3^^^^1^1^^1
"KRN",8994,4131,1,0)
^^2^2^3161026^
"KRN",8994,4131,1,1,0)
Returns the text to show on the signature dialog mandated by DEA for when 
"KRN",8994,4131,1,2,0)
a controlled substance order is selected to be signed.
"KRN",8994,4131,3,0)
^^2^2^3161026^
"KRN",8994,4131,3,1,0)
Returns the mandatory DEA text to show when a user checks a controlled 
"KRN",8994,4131,3,2,0)
substance order to be signed on the signature dialog.
"KRN",8994,4132,-1)
0^50
"KRN",8994,4132,0)
VIAB IC VALID^ICVALID^VIABRPC3^1^^^^^1^^1
"KRN",8994,4132,1,0)
^8994.01^2^2^3161026^^
"KRN",8994,4132,1,1,0)
Determines whether the supplied time is a valid lab immediate collect 
"KRN",8994,4132,1,2,0)
time.
"KRN",8994,4132,2,0)
^8994.02A^1^1
"KRN",8994,4132,2,1,0)
TIME^1^20^1^1
"KRN",8994,4132,2,1,1,0)
^8994.021^1^1^3161026^^
"KRN",8994,4132,2,1,1,1,0)
The date/time in FileMan format for the collection time.
"KRN",8994,4132,2,"B","TIME",1)

"KRN",8994,4132,2,"PARAMSEQ",1,1)

"KRN",8994,4132,3,0)
^^1^1^3161026^
"KRN",8994,4132,3,1,0)
Returns 1^Message is the time is valid, otherwise returns 0^Message.
"KRN",8994,4133,-1)
0^51
"KRN",8994,4133,0)
VIAB TIU SECVST^SECVST^VIABRPC^1^^^^^^^1
"KRN",8994,4133,1,0)
^8994.01^2^2^3170207^^
"KRN",8994,4133,1,1,0)
This RPC save the secondary visit IEN (field #1207) in TIU (File #8925),
"KRN",8994,4133,1,2,0)
if inpatient.
"KRN",8994,4133,2,0)
^8994.02A^4^4
"KRN",8994,4133,2,1,0)
NOTEIEN^1^^1^1
"KRN",8994,4133,2,1,1,0)
^8994.021^1^1^3170207^^
"KRN",8994,4133,2,1,1,1,0)
IEN of File #8925.
"KRN",8994,4133,2,2,0)
VIADFN^1^^1^2
"KRN",8994,4133,2,2,1,0)
^^1^1^3170207^
"KRN",8994,4133,2,2,1,1,0)
IEN of File #2.
"KRN",8994,4133,2,3,0)
VIAENCDT^1^^1^3
"KRN",8994,4133,2,3,1,0)
^^1^1^3170207^
"KRN",8994,4133,2,3,1,1,0)
Date/time of encounter.
"KRN",8994,4133,2,4,0)
VIAHLOC^1^^1^4
"KRN",8994,4133,2,4,1,0)
^^1^1^3170207^
"KRN",8994,4133,2,4,1,1,0)
IEN of File #44.
"KRN",8994,4133,2,"B","NOTEIEN",1)

"KRN",8994,4133,2,"B","VIADFN",2)

"KRN",8994,4133,2,"B","VIAENCDT",3)

"KRN",8994,4133,2,"B","VIAHLOC",4)

"KRN",8994,4133,2,"PARAMSEQ",1,1)

"KRN",8994,4133,2,"PARAMSEQ",2,2)

"KRN",8994,4133,2,"PARAMSEQ",3,3)

"KRN",8994,4133,2,"PARAMSEQ",4,4)

"KRN",8994,4134,-1)
0^52
"KRN",8994,4134,0)
VIAB IMMED COLLECT^IMMCOLL^VIABRPC^2^^^^^^^1
"KRN",8994,4134,1,0)
^8994.01^2^2^3170221^^
"KRN",8994,4134,1,1,0)
Returns help text showing lab immediate collect times for the user's
"KRN",8994,4134,1,2,0)
division.
"KRN",8994,4136,-1)
0^54
"KRN",8994,4136,0)
VIAB ADMIN^ADMIN^VIABRPC^1^^^^^^^1
"KRN",8994,4136,1,0)
^^2^2^3170223^
"KRN",8994,4136,1,1,0)
This RPC returns administration time infomation: -
"KRN",8994,4136,1,2,0)
    StartText^StartTime^Duration^FirstAdmin
"KRN",8994,4137,-1)
0^55
"KRN",8994,4137,0)
VIAB DFLTSPLY^DFLTSPLY^VIABRPC^1^^^^^^^1
"KRN",8994,4137,1,0)
^8994.01^1^1^3170223^^
"KRN",8994,4137,1,1,0)
This RPC returns days supply given quantity.
"KRN",8994,4138,-1)
0^56
"KRN",8994,4138,0)
VIAB DEVICE^DEVICE^VIABRPC^2^^^^^^^1
"KRN",8994,4138,1,0)
^8994.01^1^1^3170306^^
"KRN",8994,4138,1,1,0)
This RPC returns a list of print devices.
"KRN",8994,4138,2,0)
^8994.02A^3^3
"KRN",8994,4138,2,1,0)
FROM^1^^^1
"KRN",8994,4138,2,1,1,0)
^^3^3^3170306^
"KRN",8994,4138,2,1,1,1,0)
List all printers start from (text to $O from)
"KRN",8994,4138,2,1,1,2,0)
     C (all device with name start *WITH* C)
"KRN",8994,4138,2,1,1,3,0)
     C* (all device with name start *FROM* C)
"KRN",8994,4138,2,2,0)
DIR^1^^^2
"KRN",8994,4138,2,2,1,0)
^^1^1^3170306^
"KRN",8994,4138,2,2,1,1,0)
Ascending order (1) or Descending order (-1) ($O direction).
"KRN",8994,4138,2,3,0)
MARGIN^1^^^3
"KRN",8994,4138,2,3,1,0)
^8994.021^1^1^3170306^^
"KRN",8994,4138,2,3,1,1,0)
Right margin (e.g, 80, 132 or "80-132").
"KRN",8994,4138,2,"B","DIR",2)

"KRN",8994,4138,2,"B","FROM",1)

"KRN",8994,4138,2,"B","MARGIN",3)

"KRN",8994,4138,2,"PARAMSEQ",1,1)

"KRN",8994,4138,2,"PARAMSEQ",2,2)

"KRN",8994,4138,2,"PARAMSEQ",3,3)

"KRN",8994,4138,3,0)
^^2^2^3170306^
"KRN",8994,4138,3,1,0)
Local array contains VistA printers based on input criteria.
"KRN",8994,4138,3,2,0)
      RESULT(1..n)=IEN^Name^DisplayName^Location^RMar^PLen
"MBREQ")
0
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",656,-1)
1^1
"PKG",656,0)
VISTA INTEGRATION ADAPTER^VIAB^VIAB APP
"PKG",656,20,0)
^9.402P^^
"PKG",656,22,0)
^9.49I^1^1
"PKG",656,22,1,0)
1.0
"PKG",656,22,1,"PAH",1,0)
9^3170421
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","VIABEFR")
0^5^B29267172^n/a
"RTN","VIABEFR",1,0)
VIABEFR ;AAC/JMC - VIA EFR RPCs ;05/17/2016
"RTN","VIABEFR",2,0)
 ;;1.0;VISTA INTEGRATION ADAPTER;**9**;06-FEB-2014;Build 1
"RTN","VIABEFR",3,0)
 ;
"RTN","VIABEFR",4,0)
 ;The following RPC is in support of the Embedded Fragment Registry (EFR). This RPC reads data from the
"RTN","VIABEFR",5,0)
 ;RESEARCH File #67.1 and the LAB DATA File #63. 
"RTN","VIABEFR",6,0)
 ;
"RTN","VIABEFR",7,0)
 ; RPC VIAB EFR
"RTN","VIABEFR",8,0)
 ; ICR 2052     Database Server API: Data Dictionary Utilities
"RTN","VIABEFR",9,0)
 ; ICR 6743     VIAB LAB [File 63, "CH" node] (private)
"RTN","VIABEFR",10,0)
 ; ICR 6476     RESEARCH [File #67.1, fields #.01,9,63] (private)
"RTN","VIABEFR",11,0)
 ;
"RTN","VIABEFR",12,0)
 Q
"RTN","VIABEFR",13,0)
 ;
"RTN","VIABEFR",14,0)
EN(RESULT,VIA) ; entry point for RPC
"RTN","VIABEFR",15,0)
 D PARSE(.VIA)
"RTN","VIABEFR",16,0)
 D TMP
"RTN","VIABEFR",17,0)
 D DTCHK
"RTN","VIABEFR",18,0)
 D LAB671
"RTN","VIABEFR",19,0)
 D KVAR
"RTN","VIABEFR",20,0)
 Q
"RTN","VIABEFR",21,0)
 ;
"RTN","VIABEFR",22,0)
PARSE(VIA) ; -- array parsing to parameters and initializing variables
"RTN","VIABEFR",23,0)
 ;Input parameters
"RTN","VIABEFR",24,0)
 ;        VIA("FROM")=value to start from in Files #67.1 & #63.04 [optional]
"RTN","VIABEFR",25,0)
 ;        VIA("SDATE")=Start Date for search [optional]
"RTN","VIABEFR",26,0)
 ;        VIA("EDATE")=End Date for search [optional]
"RTN","VIABEFR",27,0)
 ;        VIA("IDS")=List of Patient Identifiers separated by a semicolon [optional]
"RTN","VIABEFR",28,0)
 ;        VIA("FIELDS")=list of extra fields to return data, separate by semicolon (;)[optional]
"RTN","VIABEFR",29,0)
 ;           Example:  VIA("FIELDS")="631807;631568;631567;631007;631808;631798;631799;631800;631801;631809"
"RTN","VIABEFR",30,0)
 ;        VIA("MAX")=n [optional]
"RTN","VIABEFR",31,0)
 N SFLDS,IFLDS,I,X
"RTN","VIABEFR",32,0)
 S VIAFIELDS=$G(VIA("FIELDS"))
"RTN","VIABEFR",33,0)
 S VIAMAX=$G(VIA("MAX")) I VIAMAX>1000 S VIAMAX=1000
"RTN","VIABEFR",34,0)
 I $G(VIAMAX)="" S VIAMAX=1000
"RTN","VIABEFR",35,0)
 S VIAFROM=$G(VIA("FROM"))
"RTN","VIABEFR",36,0)
 S VIABFRM=VIAFROM
"RTN","VIABEFR",37,0)
 S VIASDT=$G(VIA("SDATE"))
"RTN","VIABEFR",38,0)
 S VIAEDT=$G(VIA("EDATE"))
"RTN","VIABEFR",39,0)
 S VIAIDS=$G(VIA("IDS"))
"RTN","VIABEFR",40,0)
 Q 
"RTN","VIABEFR",41,0)
 ;
"RTN","VIABEFR",42,0)
TMP ; -- temporary environment variables sets until kernel tools arrives
"RTN","VIABEFR",43,0)
 IF '$G(DUZ) D
"RTN","VIABEFR",44,0)
 . S DUZ=.5,DUZ(0)="@",U="^",DTIME=300
"RTN","VIABEFR",45,0)
 . D NOW^%DTC S DT=X
"RTN","VIABEFR",46,0)
 Q
"RTN","VIABEFR",47,0)
 ;
"RTN","VIABEFR",48,0)
LAB671 ; -- returns a list of lab identifiers from RESEARCH File #67.1
"RTN","VIABEFR",49,0)
 ; Builds the ^TMP("VIABEFR",$J) array
"RTN","VIABEFR",50,0)
 ;  ^TMP("VIABEFR",$J,1)="[Data"] or if there is an error ^TMP("VIABEFR",$J,1)="[Errors"]
"RTN","VIABEFR",51,0)
 ;  ^TMP("VIABEFR",$J,n)=67.1:IEN^.01 NAME^9 IDENTIFIER^63 LABORATORY REFERENCE
"RTN","VIABEFR",52,0)
 ;              where n is a numeric value starting from 2
"RTN","VIABEFR",53,0)
 ;
"RTN","VIABEFR",54,0)
 N VIACNT,VIA671,IENS,QFLG,LRIEN,VIAC,XREF,STR671
"RTN","VIABEFR",55,0)
 K ^TMP("VIABEFR",$J)
"RTN","VIABEFR",56,0)
 S VIAC=1,(VIACNT,QFLG)=0
"RTN","VIABEFR",57,0)
 S ^TMP("VIABEFR",$J,1)="[Data]"
"RTN","VIABEFR",58,0)
 I VIAIDS'="" D IDS Q
"RTN","VIABEFR",59,0)
 I VIAFROM'="" S VIAFROM=$$STRTFRM() I VIAFROM="" D  Q
"RTN","VIABEFR",60,0)
 . S ^TMP("VIABEFR",$J,1)="[Errors]"
"RTN","VIABEFR",61,0)
 . S ^TMP("VIABEFR",$J,2)="Starting Entry not found" K RESULT S RESULT=$NA(^TMP("VIABEFR",$J)) Q
"RTN","VIABEFR",62,0)
 S XREF=$S(VIAFROM'="":VIAFROM,1:"")
"RTN","VIABEFR",63,0)
 F  S XREF=$O(^LRT(67.1,"B",XREF)) Q:XREF=""  D  I QFLG Q
"RTN","VIABEFR",64,0)
 . S IENS=0 F  S IENS=$O(^LRT(67.1,"B",XREF,IENS)) Q:'IENS  D  I QFLG Q
"RTN","VIABEFR",65,0)
 . . S LRIEN=$$GET1^DIQ(67.1,IENS,63,"I") I LRIEN="" Q
"RTN","VIABEFR",66,0)
 . . S $P(VIA671,U)=$$GET1^DIQ(67.1,IENS,.01,"I"),$P(VIA671,U,9)=$$GET1^DIQ(67.1,IENS,9,"I")
"RTN","VIABEFR",67,0)
 . . S STR671="67.1:"_IENS_U_$P(VIA671,U)_U_$P(VIA671,U,9)_U_LRIEN
"RTN","VIABEFR",68,0)
 . . D LAB6304
"RTN","VIABEFR",69,0)
 K RESULT
"RTN","VIABEFR",70,0)
 S RESULT=$NA(^TMP("VIABEFR",$J))
"RTN","VIABEFR",71,0)
 Q
"RTN","VIABEFR",72,0)
 ; 
"RTN","VIABEFR",73,0)
IDS ; -- return lab results for list of identifiers
"RTN","VIABEFR",74,0)
 N VIAID,I,X,Y
"RTN","VIABEFR",75,0)
 ; parse identifiers into array
"RTN","VIABEFR",76,0)
 F I=1:1:$L(VIAIDS,";") S Y=$P(VIAIDS,";",I) I Y'="" S VIAID(Y)=""
"RTN","VIABEFR",77,0)
 S XREF="" F  S XREF=$O(VIAID(XREF)) Q:XREF=""  D:$D(^LRT(67.1,"C",XREF))  I QFLG Q
"RTN","VIABEFR",78,0)
 . S IENS=0 F  S IENS=$O(^LRT(67.1,"C",XREF,IENS)) Q:'IENS  D  I QFLG Q
"RTN","VIABEFR",79,0)
 . . S LRIEN=$$GET1^DIQ(67.1,IENS,63,"I") I LRIEN="" Q
"RTN","VIABEFR",80,0)
 . . S $P(VIA671,U)=$$GET1^DIQ(67.1,IENS,.01,"I"),$P(VIA671,U,9)=$$GET1^DIQ(67.1,IENS,9,"I")
"RTN","VIABEFR",81,0)
 . . S STR671="67.1:"_IENS_U_$P(VIA671,U)_U_$P(VIA671,U,9)_U_LRIEN
"RTN","VIABEFR",82,0)
 . . D LAB6304
"RTN","VIABEFR",83,0)
 K RESULT
"RTN","VIABEFR",84,0)
 S RESULT=$NA(^TMP("VIABEFR",$J))
"RTN","VIABEFR",85,0)
 Q
"RTN","VIABEFR",86,0)
 ;
"RTN","VIABEFR",87,0)
LAB6304 ; -- Using the LAB IEN from File #67.1, get data from LAB DATA File #63.04
"RTN","VIABEFR",88,0)
 ; Builds ^TMP("VIABEFR",$J,n)=list of standard fields returned by the RPC. n is a numeric value.
"RTN","VIABEFR",89,0)
 ;        ^TMP("VIABEFR",$J,n+1)=63:04:IEN^.01 DATE/TIME SPECIMEN TAKEN^.06 ACCESSION^.03 DATE REPORT COMPLETED
"RTN","VIABEFR",90,0)
 ;        ^TMP("VIABEFR",$J,n+2)=4 CREATININE
"RTN","VIABEFR",91,0)
 ;        ^TMP("VIABEFR",$J,n+3)=31 COPPER
"RTN","VIABEFR",92,0)
 ;        ^TMP("VIABEFR",$J,n+4)=32 ZINC
"RTN","VIABEFR",93,0)
 ;        ^TMP("VIABEFR",$J,n+5)=33 ARSENIC
"RTN","VIABEFR",94,0)
 ;        ^TMP("VIABEFR",$J,n+6)=35 LEAD (SK)
"RTN","VIABEFR",95,0)
 ;        ^TMP("VIABEFR",$J,n+7)=101 CADMIUM
"RTN","VIABEFR",96,0)
 ;        ^TMP("VIABEFR",$J,n+8)=106 CHROMIUM
"RTN","VIABEFR",97,0)
 ;        ^TMP("VIABEFR",$J,n+9)=108 COBALT
"RTN","VIABEFR",98,0)
 ;        ^TMP("VIABEFR",$J,n+10)=116 MANGANESE (SK)
"RTN","VIABEFR",99,0)
 ;        ^TMP("VIABEFR",$J,n+11)=205 ALUMINUM
"RTN","VIABEFR",100,0)
 ;        ^TMP("VIABEFR",$J,n+12)=322 NICKEL (SK)
"RTN","VIABEFR",101,0)
 ;        ^TMP("VIABEFR",$J,n+13)=750 IRON
"RTN","VIABEFR",102,0)
 ;        ^TMP("VIABEFR",$J,n+14)=797 VOLUME
"RTN","VIABEFR",103,0)
 ;        ^TMP("VIABEFR",$J,n+15)=840 ELAPSED TIME
"RTN","VIABEFR",104,0)
 ; VIAEFLDS - custom fields passed in as input parameter and returned by the RPC are stored after the standard fields.
"RTN","VIABEFR",105,0)
 ;        ^TMP("VIABEFR",$J,n+16)=TESTNAME;NUMBER^RESULT
"RTN","VIABEFR",106,0)
 ;
"RTN","VIABEFR",107,0)
 N X,VIAEFLDS,VIASFLDS,VIASFLDS1,VIASTR,IVDT,J,FLD,F671,VIAVAL
"RTN","VIABEFR",108,0)
 S VIASFLDS=".01;.06;.03",VIASFLDS1="4;31;32;33;35;101;106;108;116;205;322;750;797;840",F671=1
"RTN","VIABEFR",109,0)
 S VIAEFLDS=VIAFIELDS,IVDT=$S(VIABFRM'="":$P($P(VIABFRM,"^",2),",",2),1:VIASDT)
"RTN","VIABEFR",110,0)
 F  S IVDT=$O(^LR(LRIEN,"CH",IVDT)) Q:'IVDT  Q:(IVDT>VIAEDT)  D  I VIACNT>VIAMAX S QFLG=1 D SETFRM Q
"RTN","VIABEFR",111,0)
 . I F671 S VIAC=VIAC+1,^TMP("VIABEFR",$J,VIAC)=STR671,VIACNT=VIACNT+1,F671=0
"RTN","VIABEFR",112,0)
 . S VIAVAL="",VIACNT=VIACNT+1
"RTN","VIABEFR",113,0)
 . F J=1:1:$L(VIASFLDS,";") S FLD=$P(VIASFLDS,";",J) I FLD'="" D
"RTN","VIABEFR",114,0)
 . . S VIASTR=$$GET1^DIQ(63.04,IVDT_","_LRIEN_",",FLD,"I")
"RTN","VIABEFR",115,0)
 . . S VIAVAL=VIAVAL_$S(VIAVAL="":"",1:"^")_VIASTR
"RTN","VIABEFR",116,0)
 . S VIAC=VIAC+1,^TMP("VIABEFR",$J,VIAC)="63.04:"_IVDT_"^"_VIAVAL
"RTN","VIABEFR",117,0)
 . ; get data for remaining standard fields; get entire node since these are stored in non-standard FileMan format.
"RTN","VIABEFR",118,0)
 . F J=1:1:$L(VIASFLDS1,";") S FLD=$P(VIASFLDS1,";",J) I FLD'="" D STMP
"RTN","VIABEFR",119,0)
 . ; get data for additional fields passed in input parameter
"RTN","VIABEFR",120,0)
 . F J=1:1:$L(VIAEFLDS,";") S FLD=$P(VIAEFLDS,";",J) I FLD'="" D STMP
"RTN","VIABEFR",121,0)
 Q
"RTN","VIABEFR",122,0)
 ;
"RTN","VIABEFR",123,0)
STMP ;set ^TMP("VIAEFR"
"RTN","VIABEFR",124,0)
 N FLDNM,VIASTR
"RTN","VIABEFR",125,0)
 D FIELD^DID(63.04,FLD,,"LABEL","VIALB") S FLDNM=$$UP^XLFSTR($G(VIALB("LABEL")))
"RTN","VIABEFR",126,0)
 S VIASTR=$G(^LR(LRIEN,"CH",IVDT,FLD))
"RTN","VIABEFR",127,0)
 I VIASTR'="" S VIAC=VIAC+1,^TMP("VIABEFR",$J,VIAC)=FLDNM_";"_FLD_"^"_VIASTR
"RTN","VIABEFR",128,0)
 K VIALB
"RTN","VIABEFR",129,0)
 Q
"RTN","VIABEFR",130,0)
 ;
"RTN","VIABEFR",131,0)
STRTFRM() ; find where to start File 67.1 search
"RTN","VIABEFR",132,0)
 N STR
"RTN","VIABEFR",133,0)
 S STR=$P($P(VIAFROM,U),",")
"RTN","VIABEFR",134,0)
 I $D(^LRT(67.1,"B",STR)) S VIAFROM=$O(^LRT(67.1,"B",STR),-1) Q VIAFROM
"RTN","VIABEFR",135,0)
 S STR=$G(^LRT(67.1,+$P($P(VIAFROM,U),",",2),0)) I STR'="" S VIAFROM=$O(^LRT(67.1,"B",STR),-1) Q VIAFROM
"RTN","VIABEFR",136,0)
 Q ""
"RTN","VIABEFR",137,0)
 ;
"RTN","VIABEFR",138,0)
SETFRM ; entry to start list.
"RTN","VIABEFR",139,0)
 S VIAC=VIAC+1,^TMP("VIABEFR",$J,VIAC)="[Misc]"
"RTN","VIABEFR",140,0)
 S VIAC=VIAC+1,^TMP("VIABEFR",$J,VIAC)="MORE"_U_$P(VIA671,U)_","_IENS_U_LRIEN_","_$G(IVDT)
"RTN","VIABEFR",141,0)
 Q
"RTN","VIABEFR",142,0)
 ;
"RTN","VIABEFR",143,0)
DTCHK ;check/set date
"RTN","VIABEFR",144,0)
 I $G(VIAEDT)<$G(VIASDT) S X=$G(VIAEDT),VIAEDT=$G(VIASDT),VIASDT=X
"RTN","VIABEFR",145,0)
 I $G(VIAEDT) S VIAEDT=$S($L(VIAEDT,".")=2:VIAEDT+.000001,1:VIAEDT+1)
"RTN","VIABEFR",146,0)
 S VIASDT=$S($G(VIASDT):9999999-VIASDT,1:9999999),VIAEDT=$S($G(VIAEDT):9999999-VIAEDT,1:1)
"RTN","VIABEFR",147,0)
 S X=VIAEDT,VIAEDT=VIASDT,VIASDT=X
"RTN","VIABEFR",148,0)
 Q
"RTN","VIABEFR",149,0)
 ;
"RTN","VIABEFR",150,0)
KVAR ;Clean-up
"RTN","VIABEFR",151,0)
 K VIAFIELDS,VIAEDT,VIAMAX,VIASDT,VIAFROM,VIABFRM,VIAIDS,X,Y
"RTN","VIABEFR",152,0)
 Q
"RTN","VIABEFR",153,0)
 ;
"RTN","VIABRPC")
0^4^B70456024^B22947290
"RTN","VIABRPC",1,0)
VIABRPC ;AAC/JMC - VIA RPCs ;04/05/2016
"RTN","VIABRPC",2,0)
 ;;1.0;VISTA INTEGRATION ADAPTER;**7,8,9**;06-FEB-2014;Build 1
"RTN","VIABRPC",3,0)
 ; ICR 10090    INSTITUTION FILE (Supported)
"RTN","VIABRPC",4,0)
 ; ICR 3213     XQALSURO (Supported)
"RTN","VIABRPC",5,0)
 ; ICR 2533     DBIA2533 (Controlled)
"RTN","VIABRPC",6,0)
 ; ICR 3119     Consult Default Reason for Request [GETDEF^GMRCDRFR & $$REAF^GMRCDRFR]
"RTN","VIABRPC",7,0)
 ; ICR 2968     Direct access to file 34
"RTN","VIABRPC",8,0)
 ; ICR 2664     OBSERVATION API [$$PT^DGPMOBS] (Supported)
"RTN","VIABRPC",9,0)
 ; ICR 1365     DBIA1365 [DSELECT^GMPLENFM] (controlled)
"RTN","VIABRPC",10,0)
 ; ICR 4075     OR CALL TO TIUSRVP [VSTRBLD^TIUSRVP] (private)
"RTN","VIABRPC",11,0)
 ; ICR 3121     Consult Ordering Utilities [$$PROVDX^GMRCUTL1]
"RTN","VIABRPC",12,0)
 ; ICR 1894     DBIA1889-F [GETENC^PXAPI](controlled)
"RTN","VIABRPC",13,0)
 ; ICR 3540     TIUSRVP, Entry Point: FILE [FILE^TIUSRVP] (controlled)
"RTN","VIABRPC",14,0)
 ; ICR 142      DBIA142-A [File #31, field #.01] (controlled)
"RTN","VIABRPC",15,0)
 ; ICR 649      DBIA186-I [File 391, field .02] (controlled)
"RTN","VIABRPC",16,0)
 ; ICR 2348     SERVICE CONNECTED CONDITIONS [SCCOND^PXUTLSCC] (controlled)
"RTN","VIABRPC",17,0)
 ; ICR 1296     DBIA 1296 GETLST~IBDF18A [GETLST^IBDF18A] (Controlled)
"RTN","VIABRPC",18,0)
 ; ICR 6473     ICR6473 - PROSTHETICS SERVICE [Read field #131 of File #123.5] (private)
"RTN","VIABRPC",19,0)
 ; ICR 6663     PXVIMM IMM SHORT LIST [IMMSHORT^PXVRPC4] (controlled)
"RTN","VIABRPC",20,0)
 ; ICR 2429     USE OF LR7OV4 CALLS [SHOW^LR7OV4] (controlled)
"RTN","VIABRPC",21,0)
 ; ICR 3167     3167 [STARTSTP^PSJORPOE]
"RTN","VIABRPC",22,0)
 ; ICR 3771     XUDHGUI [DEVICE^XUDHGUI] (supported)
"RTN","VIABRPC",23,0)
 ;
"RTN","VIABRPC",24,0)
GETSURR(RESULT,USER) ; surrogate info.
"RTN","VIABRPC",25,0)
 ;RPC VIAB GETSURR
"RTN","VIABRPC",26,0)
 ; get user's surrogate info
"RTN","VIABRPC",27,0)
 I $G(USER)="" S RESULT="" Q
"RTN","VIABRPC",28,0)
 S RESULT=$$GETSURO^XQALSURO(USER) ;ICR(DBIA) #3213 
"RTN","VIABRPC",29,0)
 I +RESULT<1 S RESULT=""
"RTN","VIABRPC",30,0)
 Q
"RTN","VIABRPC",31,0)
SNAME(RET,SID) ; get station/site name
"RTN","VIABRPC",32,0)
 ;RPC VIAB SITENAME
"RTN","VIABRPC",33,0)
 N SIEN
"RTN","VIABRPC",34,0)
 I $G(SID)="" S RET="-1^Missing Station Number or Site ID" Q
"RTN","VIABRPC",35,0)
 S SIEN=$O(^DIC(4,"D",SID,0)) I 'SIEN S RET="-1^No site found for this Station Number or Site ID" Q
"RTN","VIABRPC",36,0)
 ; ICR(DBIA) #10090 (SUPPORTED)
"RTN","VIABRPC",37,0)
 S RET=$$GET1^DIQ(4,SIEN,.01,"E")
"RTN","VIABRPC",38,0)
 Q
"RTN","VIABRPC",39,0)
USERDIV(RESULT,VIADUZ) ; station IEN^station number^station name^default division
"RTN","VIABRPC",40,0)
 ;RPC GET USER DIVISIONS
"RTN","VIABRPC",41,0)
 K RESULT
"RTN","VIABRPC",42,0)
 N VIADX,VIADR,VIADC
"RTN","VIABRPC",43,0)
 S VIADC=0
"RTN","VIABRPC",44,0)
 D DIV4^XUSER(.VIADR,VIADUZ)
"RTN","VIABRPC",45,0)
 S VIADX=0
"RTN","VIABRPC",46,0)
 F  S VIADX=$O(VIADR(VIADX)) Q:'VIADX!($D(RESULT(1)))  D
"RTN","VIABRPC",47,0)
 .I VIADR(VIADX)=1 S VIADC=VIADC+1,RESULT(VIADC)=VIADX_"^"_$$GET1^DIQ(4,+VIADX,99)_"^"_$$GET1^DIQ(4,+VIADX,.01,)_"^1" K VIADR(VIADX)
"RTN","VIABRPC",48,0)
 S VIADX=0
"RTN","VIABRPC",49,0)
 F  S VIADX=$O(VIADR(VIADX)) Q:'VIADX  D
"RTN","VIABRPC",50,0)
 .S VIADC=VIADC+1
"RTN","VIABRPC",51,0)
 .S RESULT(VIADC)=VIADX_"^"_$$GET1^DIQ(4,+VIADX,99)_"^"_$$GET1^DIQ(4,+VIADX,.01)_"^0"
"RTN","VIABRPC",52,0)
 Q
"RTN","VIABRPC",53,0)
 ; 
"RTN","VIABRPC",54,0)
DEFRFREQ(RESULT,VIAIEN,VIADFN,RESOLVE) ;Return default reason for request for service - ICR #3119
"RTN","VIABRPC",55,0)
 ;RPC VIAB DEFAULT REQUEST REASON
"RTN","VIABRPC",56,0)
 ; VIAIEN=pointer to file 123.5
"RTN","VIABRPC",57,0)
 ; VIADFN=patient, if RESOLVE=1
"RTN","VIABRPC",58,0)
 ; RESOLVE=1 to resolve boilerplate, 0 to not resolve
"RTN","VIABRPC",59,0)
 Q:+$G(VIAIEN)=0
"RTN","VIABRPC",60,0)
 I +RESOLVE,(+$G(VIADFN)=0) Q
"RTN","VIABRPC",61,0)
 S RESULT=$NA(^TMP("VIABREQ",$J))
"RTN","VIABRPC",62,0)
 S:$G(RESOLVE)="" RESOLVE=0
"RTN","VIABRPC",63,0)
 D GETDEF^GMRCDRFR(.RESULT,VIAIEN,VIADFN,RESOLVE)
"RTN","VIABRPC",64,0)
 K @RESULT@(0)
"RTN","VIABRPC",65,0)
 Q
"RTN","VIABRPC",66,0)
 ;
"RTN","VIABRPC",67,0)
EDITDRFR(RESULT,VIAIEN) ; Allow editing of reason for request? - ICR #3119
"RTN","VIABRPC",68,0)
 ;RPC VIAB EDIT DEFAULT REASON
"RTN","VIABRPC",69,0)
 S RESULT=$$REAF^GMRCDRFR(VIAIEN)
"RTN","VIABRPC",70,0)
 Q
"RTN","VIABRPC",71,0)
 ;
"RTN","VIABRPC",72,0)
RADSRC(RESULT,SRCTYPE) ; return list of available contract/sharing/research sources - ICR #2968
"RTN","VIABRPC",73,0)
 ;RPC VIAB RADSRC
"RTN","VIABRPC",74,0)
 N VIAX
"RTN","VIABRPC",75,0)
 S VIAX=0
"RTN","VIABRPC",76,0)
 F I=1:1 S VIAX=$O(^DIC(34,VIAX)) Q:+VIAX=0  D
"RTN","VIABRPC",77,0)
 . Q:($P(^DIC(34,VIAX,0),U,2)'=SRCTYPE)
"RTN","VIABRPC",78,0)
 . I $D(^DIC(34,VIAX,"I")),(^DIC(34,VIAX,"I")<$$NOW^XLFDT) Q
"RTN","VIABRPC",79,0)
 . S RESULT(I)=VIAX_U_$P(^DIC(34,VIAX,0),U,1)
"RTN","VIABRPC",80,0)
 Q
"RTN","VIABRPC",81,0)
 ;
"RTN","VIABRPC",82,0)
CURSPE(RESULT,PTDFN) ; Return current treating specialty - ICR #2664
"RTN","VIABRPC",83,0)
 ;RPC VIAB CURSPE
"RTN","VIABRPC",84,0)
 Q:'PTDFN
"RTN","VIABRPC",85,0)
 N SPEC S SPEC=$$PT^DGPMOBS(PTDFN),RESULT=""
"RTN","VIABRPC",86,0)
 I SPEC'<0 S RESULT=$P(SPEC,U,3)_U_$P(SPEC,U,2)_U_$P(SPEC,U) ;name^ien^obs flag
"RTN","VIABRPC",87,0)
 Q
"RTN","VIABRPC",88,0)
 ;
"RTN","VIABRPC",89,0)
CPTMODS(RESULT,VIACPTCOD,VIADATE) ;Return CPT Modifiers for a CPT Code - ICR #1995
"RTN","VIABRPC",90,0)
 ;RPC VIAB CPTMODS
"RTN","VIABRPC",91,0)
 N VIAM,VIAIDX,VIAI,MODNAME
"RTN","VIABRPC",92,0)
 S:'+$G(VIADATE) VIADATE=DT
"RTN","VIABRPC",93,0)
 I +($$CODM^ICPTCOD(VIACPTCOD,$NA(VIAM),0,VIADATE)),+$D(VIAM) D
"RTN","VIABRPC",94,0)
 . S VIAIDX="",VIAI=0
"RTN","VIABRPC",95,0)
 . F  S VIAIDX=$O(VIAM(VIAIDX)) Q:(VIAIDX="")  D
"RTN","VIABRPC",96,0)
 . . S VIAI=VIAI+1,MODNAME=$P(VIAM(VIAIDX),U,1)
"RTN","VIABRPC",97,0)
 . . S RESULT(MODNAME_VIAI)=$P(VIAM(VIAIDX),U,2)_U_MODNAME_U_VIAIDX
"RTN","VIABRPC",98,0)
 Q
"RTN","VIABRPC",99,0)
 ;
"RTN","VIABRPC",100,0)
ACTPROB(RESULT,DFN,VIADATE) ;get list of patient's active problems - ICR #1365
"RTN","VIABRPC",101,0)
 ;RPC VIAB ACTPROB
"RTN","VIABRPC",102,0)
 N VIAPROB,VIAPROBIX,VIAPRCNT,GMPINDT,VIAIMPDT
"RTN","VIABRPC",103,0)
 K ^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS")
"RTN","VIABRPC",104,0)
 S:'+$G(VIADATE) VIADATE=DT
"RTN","VIABRPC",105,0)
 S GMPINDT=VIADATE,VIAIMPDT=$$IMPDATE^LEXU("10D")
"RTN","VIABRPC",106,0)
 D DSELECT^GMPLENFM  ;DBIA 1365
"RTN","VIABRPC",107,0)
 S VIAPRCNT=0
"RTN","VIABRPC",108,0)
 S VIAPROBIX=0
"RTN","VIABRPC",109,0)
 F  S VIAPROBIX=$O(^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS",VIAPROBIX)) Q:'VIAPROBIX  D  ;DBIA 1365
"RTN","VIABRPC",110,0)
 . I (VIADATE<VIAIMPDT)&($P(^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS",VIAPROBIX),"^",14)="10D") K ^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS",VIAPROBIX) Q
"RTN","VIABRPC",111,0)
 . S VIAPROB=$P(^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS",VIAPROBIX),"^",2,3)
"RTN","VIABRPC",112,0)
 . I $L(VIAPROB)>255 S $P(VIAPROB,U)=$E($P(VIAPROB,U),1,245)
"RTN","VIABRPC",113,0)
 . I $E(VIAPROB,1)="$" S VIAPROB=$E(VIAPROB,2,255)
"RTN","VIABRPC",114,0)
 . I '$D(VIAPROB(VIAPROB)) D
"RTN","VIABRPC",115,0)
 .. S VIAPROB(VIAPROB)=""
"RTN","VIABRPC",116,0)
 .. S VIAPRCNT=VIAPRCNT+1
"RTN","VIABRPC",117,0)
 .. S $P(^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS",VIAPROBIX),"^",2,3)=VIAPROB
"RTN","VIABRPC",118,0)
 . E  K ^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS",VIAPROBIX)
"RTN","VIABRPC",119,0)
 S ^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS",0)=VIAPRCNT
"RTN","VIABRPC",120,0)
 S RESULT=$NA(^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS"))
"RTN","VIABRPC",121,0)
 Q
"RTN","VIABRPC",122,0)
 ;
"RTN","VIABRPC",123,0)
NOTEVSTR(RESULT,IEN) ; return the VSTR^AUTHOR for a note -; ICR#4075
"RTN","VIABRPC",124,0)
 ;RPC VIAB NOTEVSTR
"RTN","VIABRPC",125,0)
 N X0,X12,VISIT
"RTN","VIABRPC",126,0)
 S X0=$G(^TIU(8925,+IEN,0)),X12=$G(^(12)),VISIT=$P(X12,U,7)
"RTN","VIABRPC",127,0)
 I +VISIT S RESULT=$$VSTRBLD^TIUSRVP(VISIT) I 1
"RTN","VIABRPC",128,0)
 E  S RESULT=$P(X12,U,11)_";"_$P(X0,U,7)_";"_$P(X0,U,13)
"RTN","VIABRPC",129,0)
 Q
"RTN","VIABRPC",130,0)
 ;
"RTN","VIABRPC",131,0)
PROVDX(RESULT,VIAIEN) ;Return provisional dx prompting info for service; ICR#3121
"RTN","VIABRPC",132,0)
 ;This RPC is a similar to ORQQCN PROVDX
"RTN","VIABRPC",133,0)
 ;RPC VIAB PROVDX
"RTN","VIABRPC",134,0)
 S RESULT=$$PROVDX^GMRCUTL1($G(VIAIEN))
"RTN","VIABRPC",135,0)
 Q
"RTN","VIABRPC",136,0)
 ;
"RTN","VIABRPC",137,0)
ISPROSVC(RESULT,GMRCIEN) ; Is this service part of the consults-prosthetics interface? ICR #6473
"RTN","VIABRPC",138,0)
 ;RPC VIAB ISPROSVC
"RTN","VIABRPC",139,0)
 ;This RPC is a similar to ORQQCN ISPROSVC
"RTN","VIABRPC",140,0)
 ;GMRCIEN - IEN of selected service
"RTN","VIABRPC",141,0)
 I $$GET1^DIQ(123.5,+$G(GMRCIEN),131,"I")=1 S RESULT=1
"RTN","VIABRPC",142,0)
 Q 
"RTN","VIABRPC",143,0)
 ;
"RTN","VIABRPC",144,0)
SECVST(RESULT,NOTEIEN,VIADFN,VIAENCDT,VIAHLOC) ; save secondary visit in TIU, if inpatient; ICR#1894,#3540
"RTN","VIABRPC",145,0)
 ;RPC VIAB TIU SECVST
"RTN","VIABRPC",146,0)
 N VIAVST
"RTN","VIABRPC",147,0)
 S RESULT=0
"RTN","VIABRPC",148,0)
 I +$G(NOTEIEN),+$G(VIADFN),+$G(VIAENCDT),$G(VIAHLOC)'="" D  ; NOTEIEN only set on inpatient encounters
"RTN","VIABRPC",149,0)
 . S VIAVST=$$GETENC^PXAPI(VIADFN,VIAENCDT,VIAHLOC)
"RTN","VIABRPC",150,0)
 . I +VIAVST>0 D
"RTN","VIABRPC",151,0)
 . . ;I $$GET1^DIQ(8925,NOTEIEN,.03,"I")=VIAVST Q
"RTN","VIABRPC",152,0)
 . . N VIAOK,VIAX
"RTN","VIABRPC",153,0)
 . . S VIAX(1207)=VIAVST
"RTN","VIABRPC",154,0)
 . . D FILE^TIUSRVP(.VIAOK,NOTEIEN,.VIAX,1)
"RTN","VIABRPC",155,0)
 . . M RESULT=VIAOK
"RTN","VIABRPC",156,0)
 Q
"RTN","VIABRPC",157,0)
 ;
"RTN","VIABRPC",158,0)
SCDIS(RESULT,DFN) ; Return service connected % and rated disabilities; ICR#10061,#649,#4807,#142
"RTN","VIABRPC",159,0)
 ;RPC VIAB SCDIS
"RTN","VIABRPC",160,0)
 ;This RPC is a similar to ORWPCE SCDIS
"RTN","VIABRPC",161,0)
 N VAEL,VAERR,VIARR,I,ILST,DIS,SC,X
"RTN","VIABRPC",162,0)
 D ELIG^VADPT
"RTN","VIABRPC",163,0)
 S RESULT(1)="Service Connected: "_$S(+VAEL(3):$P(VAEL(3),U,2)_"%",1:"NO")
"RTN","VIABRPC",164,0)
 I 'VAEL(4),'$$GET1^DIQ(391,+VAEL(6),.02,"I") S RESULT(2)="NOT A VETERAN." Q 
"RTN","VIABRPC",165,0)
 D RDIS^DGRPDB(DFN,.VIARR)
"RTN","VIABRPC",166,0)
 S I=0,ILST=1 F  S I=$O(VIARR(I)) Q:'I  S X=VIARR(I) D
"RTN","VIABRPC",167,0)
 . S DIS=$$GET1^DIQ(31,+X,.01,"I") Q:DIS=""
"RTN","VIABRPC",168,0)
 . S SC=$S($P(X,U,3):"SC",$P(X,U,3)']"":"not specified",1:"NSC")
"RTN","VIABRPC",169,0)
 . S ILST=ILST+1,RESULT(ILST)=DIS_" ("_$P(X,U,2)_"% "_SC_")"
"RTN","VIABRPC",170,0)
 I ILST=1 S RESULT(2)="Rated Disabilities: NONE STATED"
"RTN","VIABRPC",171,0)
 Q
"RTN","VIABRPC",172,0)
 ;
"RTN","VIABRPC",173,0)
SCSEL(RESULT,DFN,APPDT,HLOC,VST) ; return SC conditions that maRESULT be selected; ICR#2348
"RTN","VIABRPC",174,0)
 ;RPC VIAB SCSEL
"RTN","VIABRPC",175,0)
 ;This RPC is a similar to ORWPCE SCSEL
"RTN","VIABRPC",176,0)
 ; RESULT=SCallow^SCdflt;AOallow^AOdflt;IRallow^IRdflt;ECallow^ECdflt;
"RTN","VIABRPC",177,0)
 ;     MSTallow^MSTdflt;HNCallow^HNCdflt;CVAllow^CVDflt;SHADAllow^SHADDflt
"RTN","VIABRPC",178,0)
 N VIAB,S
"RTN","VIABRPC",179,0)
 S S=";"
"RTN","VIABRPC",180,0)
 D SCCOND^PXUTLSCC(DFN,APPDT,HLOC,$G(VST),.VIAB)
"RTN","VIABRPC",181,0)
 S RESULT=$G(VIAB("SC"))_S_$G(VIAB("AO"))_S_$G(VIAB("IR"))_S_$G(VIAB("EC"))_S_$G(VIAB("MST"))_S_$G(VIAB("HNC"))_S_$G(VIAB("CV"))_S_$G(VIAB("SHAD"))
"RTN","VIABRPC",182,0)
 Q
"RTN","VIABRPC",183,0)
 ;
"RTN","VIABRPC",184,0)
VISIT(RESULT,CLINIC,VIADATE) ; get list of visit types for clinic; ICR#1296
"RTN","VIABRPC",185,0)
 ;RPC VIAB VISIT
"RTN","VIABRPC",186,0)
 ;This RPC is a similar to ORWPCE VISIT
"RTN","VIABRPC",187,0)
 S:'+$G(VIADATE) VIADATE=DT
"RTN","VIABRPC",188,0)
 D GETLST^IBDF18A(CLINIC,"DG SELECT VISIT TYPE CPT PROCEDURES","RESULT",,,,VIADATE)
"RTN","VIABRPC",189,0)
 Q
"RTN","VIABRPC",190,0)
 ;
"RTN","VIABRPC",191,0)
IMMTYPE(RESULT) ;get the list of active immunizations; ICR#6663
"RTN","VIABRPC",192,0)
 ;RPC VIAB GET IMMUNIZATION TYPE
"RTN","VIABRPC",193,0)
 N CNT,X,Y,VIARES,VIARY
"RTN","VIABRPC",194,0)
 S CNT=0
"RTN","VIABRPC",195,0)
 D IMMSHORT^PXVRPC4(.VIARES,"A")
"RTN","VIABRPC",196,0)
 S X="" F  S X=$O(VIARES(X)) Q:X=""  S Y=VIARES(X) I $P(Y,"^")="IMM" S VIARY($P(Y,"^",3)_"^"_$P(Y,"^",2))=""
"RTN","VIABRPC",197,0)
 S X="" F  S X=$O(VIARY(X)) Q:X=""  S CNT=CNT+1,RESULT(CNT)=$P(X,"^",2)_"^"_$P(X,"^")
"RTN","VIABRPC",198,0)
 Q
"RTN","VIABRPC",199,0)
 ;
"RTN","VIABRPC",200,0)
IMMCOLL(RESULT) ; Return help screen showing immediate collect times;ICR#-2429
"RTN","VIABRPC",201,0)
 ;RPC VIAB IMMED COLLECT
"RTN","VIABRPC",202,0)
 ;This RPC is a similar to ORWDLR32 IMMED COLLECT
"RTN","VIABRPC",203,0)
 I $G(DUZ(2))="" Q
"RTN","VIABRPC",204,0)
 D SHOW^LR7OV4(DUZ(2),.RESULT)
"RTN","VIABRPC",205,0)
 Q
"RTN","VIABRPC",206,0)
 ;
"RTN","VIABRPC",207,0)
ADMIN(RESULT,DFN,SCH,OI,LOC,ADMIN) ; return administration time info;ICR-#2843,10040,10035,3167
"RTN","VIABRPC",208,0)
 ;RPC VIAB ADMIN
"RTN","VIABRPC",209,0)
 ;This RPC is a similar to ORWDPS2 ADMIN
"RTN","VIABRPC",210,0)
 ; RESULT: StartText^StartTime^Duration^FirstAdmin
"RTN","VIABRPC",211,0)
 I ($G(OI)="")!($G(LOC)="") Q
"RTN","VIABRPC",212,0)
 S OI=+$$GET1^DIQ(101.43,+OI,2,"I")
"RTN","VIABRPC",213,0)
 S LOC=+$$GET1^DIQ(44,+LOC,42,"I"),RESULT=""
"RTN","VIABRPC",214,0)
 I $L($G(^DPT(DFN,.1))) S RESULT=$$FIRST(DFN,LOC,OI,$G(SCH),"",$G(ADMIN))
"RTN","VIABRPC",215,0)
 Q
"RTN","VIABRPC",216,0)
 ;
"RTN","VIABRPC",217,0)
FIRST(DFN,WARD,OI,DATA,ORDER,ADMIN)   ; -- Return expected first admin time of order;ICR-#3167
"RTN","VIABRPC",218,0)
 N CNT,ORCNT,ORI,J,ORZ,Y,SCH,ORX,TNUM
"RTN","VIABRPC",219,0)
 I '$G(DFN)!'$G(OI) Q ""
"RTN","VIABRPC",220,0)
 S ORCNT=0 F ORI=1:1:$L(DATA,"^") S ORZ=$P(DATA,U,ORI) D  Q:$E(ORZ)="T"
"RTN","VIABRPC",221,0)
 .S TNUM=$$NUMCHAR(ORZ,";") Q:TNUM=0
"RTN","VIABRPC",222,0)
 .F CNT=1:1:TNUM D
"RTN","VIABRPC",223,0)
 .. S SCH=$P(ORZ,";",CNT+1) Q:'$L(SCH)  S ORCNT=ORCNT+1
"RTN","VIABRPC",224,0)
 .. I ORCNT>1 S ADMIN=""
"RTN","VIABRPC",225,0)
 .. S ORX(ORCNT)=$$STARTSTP^PSJORPOE(DFN,SCH,OI,WARD,$G(ORDER),$G(ADMIN))
"RTN","VIABRPC",226,0)
 S Y=9999999,J=0
"RTN","VIABRPC",227,0)
 F ORI=1:1:ORCNT S ORZ=$P(ORX(ORI),U,4) I ORZ<Y S Y=ORZ,J=ORI ;earliest
"RTN","VIABRPC",228,0)
 S Y=$S(J:ORX(J),1:"")
"RTN","VIABRPC",229,0)
 Q Y
"RTN","VIABRPC",230,0)
 ;
"RTN","VIABRPC",231,0)
NUMCHAR(STRING,SUB) ;
"RTN","VIABRPC",232,0)
 N CNT,RESULT
"RTN","VIABRPC",233,0)
 S RESULT=0
"RTN","VIABRPC",234,0)
 F CNT=1:1:$L(STRING) I $E(STRING,CNT)=SUB S RESULT=RESULT+1
"RTN","VIABRPC",235,0)
 Q RESULT
"RTN","VIABRPC",236,0)
 ; 
"RTN","VIABRPC",237,0)
DFLTSPLY(RESULT,UPD,SCH,PAT,DRG,OI) ; return days supply given quantity;ICR-#2843,3278
"RTN","VIABRPC",238,0)
 ;RPC VIAB DFLTSPLY
"RTN","VIABRPC",239,0)
 ;This RPC is a similar to ORWDPS1 DFLTSPLY
"RTN","VIABRPC",240,0)
 ; RESULT: default days supply
"RTN","VIABRPC",241,0)
 N VIABX,I,PSOI,TPKG
"RTN","VIABRPC",242,0)
 S VIABX("PATIENT")=$G(PAT)
"RTN","VIABRPC",243,0)
 I $G(DRG) S VIABX("DRUG")=DRG
"RTN","VIABRPC",244,0)
 I $D(OI) D
"RTN","VIABRPC",245,0)
 . S TPKG=$$GET1^DIQ(101.43,+$G(OI),2,"I") Q:TPKG'["PS"
"RTN","VIABRPC",246,0)
 . S PSOI=+TPKG Q:PSOI'>0
"RTN","VIABRPC",247,0)
 . S VIABX("OI")=PSOI
"RTN","VIABRPC",248,0)
 F I=1:1:$L($G(UPD),U)-1 D
"RTN","VIABRPC",249,0)
 . S VIABX("DOSE ORDERED",I)=$P($G(UPD),U,I)
"RTN","VIABRPC",250,0)
 . S VIABX("SCHEDULE",I)=$P($G(SCH),U,I)
"RTN","VIABRPC",251,0)
 D DSUP^PSOSIGDS(.VIABX)
"RTN","VIABRPC",252,0)
 S RESULT=$G(VIABX("DAYS SUPPLY"))
"RTN","VIABRPC",253,0)
 Q
"RTN","VIABRPC",254,0)
 ;
"RTN","VIABRPC",255,0)
DEVICE(RESULT,FROM,DIR,MARGIN) ; Return a subset of printer entries from the Device file;ICR-#3771
"RTN","VIABRPC",256,0)
 ;RPC VIAB DEVICE
"RTN","VIABRPC",257,0)
 ; -- Return up to 20 entries from the Device file based on Input criteria
"RTN","VIABRPC",258,0)
 ; INPUT
"RTN","VIABRPC",259,0)
 ;   FROM   : List all printers start from (text to $O from)
"RTN","VIABRPC",260,0)
 ;            B (all device with name start *WITH* B)
"RTN","VIABRPC",261,0)
 ;            B* (all device with name start *FROM* B)
"RTN","VIABRPC",262,0)
 ;   DIR    : Ascending order (1) or Descending order (-1) ($O direction)
"RTN","VIABRPC",263,0)
 ;   MARGIN - Right margin (e.g, 80, 132 or "80-132") 
"RTN","VIABRPC",264,0)
 ;
"RTN","VIABRPC",265,0)
 ; OUTPUT
"RTN","VIABRPC",266,0)
 ;   RESULT : By reference local array contains VistA printers based on input criteria
"RTN","VIABRPC",267,0)
 ;                        RESULT(1..n)=IEN^Name^DisplayName^Location^RMar^PLen
"RTN","VIABRPC",268,0)
 ;
"RTN","VIABRPC",269,0)
 K RESULT
"RTN","VIABRPC",270,0)
 S FROM=$G(FROM)
"RTN","VIABRPC",271,0)
 S DIR=$G(DIR,1)
"RTN","VIABRPC",272,0)
 S MARGIN=$G(MARGIN)
"RTN","VIABRPC",273,0)
 D DEVICE^XUDHGUI(.RESULT,FROM,DIR,MARGIN)
"RTN","VIABRPC",274,0)
 Q
"RTN","VIABRPC",275,0)
 ;
"RTN","VIABRPC3")
0^3^B17129149^n/a
"RTN","VIABRPC3",1,0)
VIABRPC3 ;AAC/PB - VIA RPCs ;10/06/2016
"RTN","VIABRPC3",2,0)
 ;;1.0;VISTA INTEGRATION ADAPTER;**9**;06-FEB-2014;Build 1
"RTN","VIABRPC3",3,0)
 ;
"RTN","VIABRPC3",4,0)
 ; DBIA 10040   ^SC(
"RTN","VIABRPC3",5,0)
 ; DBIA 2263    XPAR APIS
"RTN","VIABRPC3",6,0)
 ; DBIA 4546    PSSP51P
"RTN","VIABRPC3",7,0)
 ; DBIA 2388    ^LAB(61
"RTN","VIABRPC3",8,0)
 ;
"RTN","VIABRPC3",9,0)
 ; This is routine contains several OR RPCs that have been cloned into the VIAB namespace
"RTN","VIABRPC3",10,0)
 Q
"RTN","VIABRPC3",11,0)
 ;
"RTN","VIABRPC3",12,0)
ALLSPEC(RESULT,FROM,DIR) ; Return a set of specimens from topography file, clonded from ORWDLR32 ALLSPEC RPC
"RTN","VIABRPC3",13,0)
 ;Called by VIAB ALLSPEC RPC
"RTN","VIABRPC3",14,0)
 ;RESULT - Return results IEN for the entry in File 61 ^ .01 FIELD for the entry in File 61 (SNOMED CODE)
"RTN","VIABRPC3",15,0)
 ;Input 
"RTN","VIABRPC3",16,0)
 ;FROM - starting point of the search
"RTN","VIABRPC3",17,0)
 ;DIR - Direction to search, forwards or backwards in the cross reference
"RTN","VIABRPC3",18,0)
 ;Returns the first 44 entries starting from the FROM parameter. 
"RTN","VIABRPC3",19,0)
 N I,IEN,CNT,A,%,NOW,B
"RTN","VIABRPC3",20,0)
 D NOW^%DTC S NOW=$P(%,".")
"RTN","VIABRPC3",21,0)
 S I=0,CNT=44
"RTN","VIABRPC3",22,0)
 F  Q:I'<CNT  S FROM=$O(^LAB(61,"B",FROM),DIR) Q:FROM=""  D
"RTN","VIABRPC3",23,0)
 . S IEN=0 F  S IEN=$O(^LAB(61,"B",FROM,IEN)) Q:'IEN  D
"RTN","VIABRPC3",24,0)
 . . S A=$G(^LAB(61,IEN,64.91)) S B=$P(A,"^",3) I B]"",B'>NOW Q
"RTN","VIABRPC3",25,0)
 . . S I=I+1,RESULT(I)=IEN_U_FROM_"  ("_$P($G(^LAB(61,IEN,0)),U,2)_")"
"RTN","VIABRPC3",26,0)
 Q
"RTN","VIABRPC3",27,0)
 ;
"RTN","VIABRPC3",28,0)
GETLABTM(RESULT,VIADATE,VIALOC) ;Return list of lab collect times for a date and location
"RTN","VIABRPC3",29,0)
 ;Called by VIAB GET LAB TIMES
"RTN","VIABRPC3",30,0)
 ;This RPC is a similar to ORWDLR32 GET LAB TIMES
"RTN","VIABRPC3",31,0)
 ;RESULT - Returns the results
"RTN","VIABRPC3",32,0)
 ;Input:
"RTN","VIABRPC3",33,0)
 ;VIADATE - order datetime
"RTN","VIABRPC3",34,0)
 ;VIALOC - IEN for the location in the Hospital Location File (#44)
"RTN","VIABRPC3",35,0)
 N VIADA,VIATI,VIANOW,VIADOW,X,%,%H
"RTN","VIABRPC3",36,0)
 S RESULT(0)=0 Q:'$G(VIADATE)!($G(VIADATE)<0)!('$G(VIALOC))
"RTN","VIABRPC3",37,0)
 S VIADA=$P(VIADATE,".",1)
"RTN","VIABRPC3",38,0)
 S VIANOW=$$NOW^XLFDT,VIATI=$P(VIANOW,".",2)
"RTN","VIABRPC3",39,0)
 I VIADA<$P(VIANOW,".",1) S RESULT(0)="-1^Dates in the past are not allowed." Q
"RTN","VIABRPC3",40,0)
 I '+$$GET^XPAR(VIALOC_";SC(","LR EXCEPTED LOCATIONS",1,"Q") D
"RTN","VIABRPC3",41,0)
 . S X=VIADA D DW^%DTC S VIADOW=X
"RTN","VIABRPC3",42,0)
 . I '+$$GET^XPAR("ALL","LR COLLECT "_VIADOW,1,"Q") S RESULT(0)="-1^No collections on "_VIADOW Q
"RTN","VIABRPC3",43,0)
 . I '+$$GET^XPAR("ALL","LR IGNORE HOLIDAYS",1,"Q"),$D(^HOLIDAY(VIADA,0)) S RESULT(0)="-1^No holiday collections" Q
"RTN","VIABRPC3",44,0)
 I +RESULT(0)>-1 D 
"RTN","VIABRPC3",45,0)
 . D GETLST^XPAR(.RESULT,"ALL","LR PHLEBOTOMY COLLECTION","Q")
"RTN","VIABRPC3",46,0)
 . I +$G(RESULT)=0 S RESULT(0)="-1^No lab collect times defined for this division" Q
"RTN","VIABRPC3",47,0)
 S I=0 F  S I=$O(RESULT(I)) Q:'I  D
"RTN","VIABRPC3",48,0)
 . D NOW^%DTC S VIATI=%,%H=+%H_","_+RESULT(I) D YMD^%DTC
"RTN","VIABRPC3",49,0)
 . I (VIADA=$P(VIATI,".",1)),(+(VIADA+%)<+VIATI) K RESULT(I) S RESULT=RESULT-1 Q   ; cutoff time has passed for this collect time
"RTN","VIABRPC3",50,0)
 . S RESULT(I)=$P(RESULT(I),U,2)
"RTN","VIABRPC3",51,0)
 I +$G(RESULT)=0,('$D(RESULT(0))) S RESULT(0)="-1^All of today's collection times have passed."
"RTN","VIABRPC3",52,0)
 Q
"RTN","VIABRPC3",53,0)
 ;
"RTN","VIABRPC3",54,0)
LOCTYPE(RESULT,VIALOC) ; Returns type of location (C,W)
"RTN","VIABRPC3",55,0)
 ;Called by VIAB LOC TYPE RPC
"RTN","VIABRPC3",56,0)
 ;Returns C for Clinic or W for Ward, if the location is not a Ward or Clinic returns a -1
"RTN","VIABRPC3",57,0)
 ;Input:
"RTN","VIABRPC3",58,0)
 ;VIALOC = IEN for the location in the Hospital Location File ($44)
"RTN","VIABRPC3",59,0)
 S RESULT=-1
"RTN","VIABRPC3",60,0)
 Q:$G(VIALOC)=""
"RTN","VIABRPC3",61,0)
 S RESULT=$P($G(^SC(+$G(VIALOC),0)),U,3)
"RTN","VIABRPC3",62,0)
 Q
"RTN","VIABRPC3",63,0)
 ;
"RTN","VIABRPC3",64,0)
DOWSCH(RESULT,DFN,LOCIEN)     ; return all schedules
"RTN","VIABRPC3",65,0)
 ;Called by VIAB DOWSCH
"RTN","VIABRPC3",66,0)
 ;This RPC is a similar to ORWDPS1 DOWSCH
"RTN","VIABRPC3",67,0)
 ;DFN - Patient DFN
"RTN","VIABRPC3",68,0)
 ;LOCIEN - IEN for the location in the Hospital Location File (#44)
"RTN","VIABRPC3",69,0)
 N CNT,FREQ,ILST,VIABARRAY,WIEN
"RTN","VIABRPC3",70,0)
 S WIEN=$$WARDIEN(+$G(LOCIEN))
"RTN","VIABRPC3",71,0)
 D SCHED^PSS51P1(WIEN,.VIABARRAY)
"RTN","VIABRPC3",72,0)
 S ILST=0
"RTN","VIABRPC3",73,0)
 S CNT=0 F  S CNT=$O(VIABARRAY(CNT)) Q:CNT'>0  D
"RTN","VIABRPC3",74,0)
 .N NODE
"RTN","VIABRPC3",75,0)
 .S NODE=$G(VIABARRAY(CNT))
"RTN","VIABRPC3",76,0)
 .I $P(NODE,U,4)="C" D
"RTN","VIABRPC3",77,0)
 ..K ^TMP($J,"VIABRPC3 DOWSCH")
"RTN","VIABRPC3",78,0)
 ..D ZERO^PSS51P1($P(NODE,U),,,,"VIABRPC3 DOWSCH")
"RTN","VIABRPC3",79,0)
 ..S FREQ=$G(^TMP($J,"VIABRPC3 DOWSCH",$P(NODE,U),2))
"RTN","VIABRPC3",80,0)
 ..K ^TMP($J,"VIABRPC3 DOWSCH")
"RTN","VIABRPC3",81,0)
 ..I +FREQ=0 Q
"RTN","VIABRPC3",82,0)
 ..I +FREQ>1440 Q
"RTN","VIABRPC3",83,0)
 ..S ILST=ILST+1,RESULT(ILST)=$P(VIABARRAY(CNT),U,2,5)
"RTN","VIABRPC3",84,0)
 Q
"RTN","VIABRPC3",85,0)
 ;
"RTN","VIABRPC3",86,0)
WARDIEN(LOCIEN) ;
"RTN","VIABRPC3",87,0)
 N RESULT
"RTN","VIABRPC3",88,0)
 S RESULT=0
"RTN","VIABRPC3",89,0)
 I LOCIEN=0 Q RESULT
"RTN","VIABRPC3",90,0)
 I $P($G(^SC(LOCIEN,42)),U)="" Q RESULT
"RTN","VIABRPC3",91,0)
 S RESULT=+$P($G(^SC(LOCIEN,42)),U)
"RTN","VIABRPC3",92,0)
 Q RESULT
"RTN","VIABRPC3",93,0)
 ;
"RTN","VIABRPC3",94,0)
LCFUTR(RESULT,VIALOC,VIADIV)  ;Get # of days for future Lab Collects
"RTN","VIABRPC3",95,0)
 ;Called by VIAB FUTURE LAB COLLECTS
"RTN","VIABRPC3",96,0)
 ;This RPC is a similar to ORWDLR33 FUTURE LAB COLLECTS
"RTN","VIABRPC3",97,0)
 ; For Event Delay Order
"RTN","VIABRPC3",98,0)
 ;  --VIALOC Event default location
"RTN","VIABRPC3",99,0)
 ;  --VIADIV Event default division
"RTN","VIABRPC3",100,0)
 S RESULT=0
"RTN","VIABRPC3",101,0)
 Q:'$$FIND1^DIC(8989.51,,"X","LR LAB COLLECT FUTURE","B")
"RTN","VIABRPC3",102,0)
 I $G(VIADIV) S RESULT=+$$GET^XPAR(+$G(VIALOC)_";SC("_"^"_+$G(VIADIV)_";DIC(4,^SYS^PKG","LR LAB COLLECT FUTURE",1,"I")
"RTN","VIABRPC3",103,0)
 E  S RESULT=+$$GET^XPAR(+$G(VIALOC)_";SC("_"^DIV^SYS^PKG","LR LAB COLLECT FUTURE",1,"I")
"RTN","VIABRPC3",104,0)
 Q
"RTN","VIABRPC3",105,0)
 ;
"RTN","VIABRPC3",106,0)
ICVALID(RESULT,VIATIME) ;Is the time a valid immediate collect time?
"RTN","VIABRPC3",107,0)
 ;Called by VIAB IC VALID
"RTN","VIABRPC3",108,0)
 ;This RPC is a similar to ORWDLR32 IC VALID
"RTN","VIABRPC3",109,0)
 ;VIATIME - Date/time in FileMan format
"RTN","VIABRPC3",110,0)
 S VIATIME=$P(VIATIME,".",1)_"."_$E($P(VIATIME,".",2),1,4)
"RTN","VIABRPC3",111,0)
 S RESULT=$$VALID^LR7OV4(DUZ(2),VIATIME)
"RTN","VIABRPC3",112,0)
 Q
"RTN","VIABRPC3",113,0)
 ;
"RTN","VIABRPC3",114,0)
DEATEXT(RESULT) ;returns the mandatory dea text to show when a user checks a controlled substance order to be signed on the signature dialog
"RTN","VIABRPC3",115,0)
 ;Called by VIAB DEATEXT
"RTN","VIABRPC3",116,0)
 ;This RPC is a similar to ORDEA DEATEXT
"RTN","VIABRPC3",117,0)
 N I,VIAY
"RTN","VIABRPC3",118,0)
 D GETWP^XPAR(.VIAY,"SYS","OR DEA TEXT")
"RTN","VIABRPC3",119,0)
 S I=0 F  S I=$O(VIAY(I)) Q:'I  S RESULT(I)=VIAY(I,0)
"RTN","VIABRPC3",120,0)
 Q
"RTN","VIABRPC4")
0^1^B50170669^n/a
"RTN","VIABRPC4",1,0)
VIABRPC4 ;AAC/JMC - VIA RPCs ;10/11/2016
"RTN","VIABRPC4",2,0)
 ;;1.0;VISTA INTEGRATION ADAPTER;**9**;06-FEB-2014;Build 1
"RTN","VIABRPC4",3,0)
 ; ICR 3533     Calls to Routine SROESTV [LIST^SROESTV] (Controlled)
"RTN","VIABRPC4",4,0)
 ; ICR 3969     GMTSROB [STATUS^GMTSROB] (Controlled)
"RTN","VIABRPC4",5,0)
 ; ICR 10090    INSTITUTION FILE [Read File #4] (Supported)
"RTN","VIABRPC4",6,0)
 ; ICR 2343     DBIA2343 [DEA^XUSER, DETOX^XUSER] (Supported)
"RTN","VIABRPC4",7,0)
 ; ICR 2946     Calls to PSSGSGUI [EN^PSSGSGUI] (Controlled)
"RTN","VIABRPC4",8,0)
 ; ICR 4133     IMO QUALIFIER [SDIMO^SDAMA203] (Controlled)
"RTN","VIABRPC4",9,0)
 ; ICR 4422     READ OF AE CROSS REFERENCE [read ^SC("AE"] (Controlled)
"RTN","VIABRPC4",10,0)
 ; ICR 2389     LAB(62 USAGE IN OE/RR [File #62, fields .01;2;3;7;64.9101] (private)
"RTN","VIABRPC4",11,0)
 ; ICR 10055    TOPOGRAPHY FIELD FILE [File #61, field .01] (supported)
"RTN","VIABRPC4",12,0)
 ; ICR 2843     DBIA2843 [File #101.43, Fields .01;2] (controlled)
"RTN","VIABRPC4",13,0)
 ; ICR 6486     NAME: VIA USE OF ORDERABLE ITEMS FILE (101.43) [File 101.43, fields .01,2,8,"S." xref] private
"RTN","VIABRPC4",14,0)
 ; ICR 6730     VIAB SRGY RPTLIST [read fields #.04,15,27,39,49 from File #130] (private)
"RTN","VIABRPC4",15,0)
 ; ICR 6725     VIAB CALL TO FIRST~ORCDPS3 [$$FIRST^ORCDPS3] (private)
"RTN","VIABRPC4",16,0)
 ; ICR 10035    PATIENT FILE {File #2, field .1] (supported)
"RTN","VIABRPC4",17,0)
 ; ICR 3278     DBIA3278 [DSUP^PSOSIGDS] (private)
"RTN","VIABRPC4",18,0)
 ; ICR 4872     SURGERY PROCEDURE/DIAGNOSIS CODES [File #136, field .02] (controlled)
"RTN","VIABRPC4",19,0)
 ; ICR 6484     VIAB USE OF DISPLAY GROUP FILE (100.98) [File #100.98, field .01] (private)
"RTN","VIABRPC4",20,0)
 ;
"RTN","VIABRPC4",21,0)
RPTLIST(RESULT,VIADFN) ;Return list of surgery reports for reports tab; ICR-10141,#10112,#6730,#3533,#3969,#1995,#4872
"RTN","VIABRPC4",22,0)
 ;RPC VIAB SRGY RPTLIST
"RTN","VIABRPC4",23,0)
 ;This RPC is a similar to ORWSR RPTLIST
"RTN","VIABRPC4",24,0)
 Q:'$$PATCH^XPDUTL("SR*3.0*100")
"RTN","VIABRPC4",25,0)
 Q:'+VIADFN
"RTN","VIABRPC4",26,0)
 N VIABDT,VIAEDT,VIAMAX,I,SHOWDOCS,X,SITE,Z,SPEC,GMN,STATUS,DCTDTM,TRSDTM,Y,VIALW,PXDT,C
"RTN","VIABRPC4",27,0)
 S (VIABDT,VIAEDT,VIAMAX)="",SHOWDOCS=0
"RTN","VIABRPC4",28,0)
 S RESULT=$NA(^TMP("VIABLIST",$J))
"RTN","VIABRPC4",29,0)
 S SITE=$$SITE^VASITE,SITE=$P(SITE,"^",2)_";"_$P(SITE,"^",3)
"RTN","VIABRPC4",30,0)
 D LIST^SROESTV(.RESULT,VIADFN,VIABDT,VIAEDT,VIAMAX,SHOWDOCS)
"RTN","VIABRPC4",31,0)
 S I=0
"RTN","VIABRPC4",32,0)
 F  S I=$O(@RESULT@(I)) Q:+I=0  D
"RTN","VIABRPC4",33,0)
 . S PXDT=$P(@RESULT@(I),U,3)
"RTN","VIABRPC4",34,0)
 . S X=$P(@RESULT@(I),U,2),$P(@RESULT@(I),U,2)=$P(@RESULT@(I),U,3),$P(@RESULT@(I),U,3)=X
"RTN","VIABRPC4",35,0)
 . S $P(@RESULT@(I),U,4)=$P($P(@RESULT@(I),U,4),";",2)
"RTN","VIABRPC4",36,0)
 . S GMN=$P(@RESULT@(I),U)
"RTN","VIABRPC4",37,0)
 . ;*347 Use Fileman calls.
"RTN","VIABRPC4",38,0)
 . K VIALW D GETS^DIQ(130,GMN,"49","","VIALW") S Z=$Q(VIALW) S:Z']"" Z="Z" S $P(@RESULT@(I),U,6)="LAB WORK-"_$S($D(@Z)>1:"Yes",1:"No") ; Lab work
"RTN","VIABRPC4",39,0)
 . D STATUS^GMTSROB S:'$D(STATUS) STATUS="UNKNOWN"
"RTN","VIABRPC4",40,0)
 . S $P(@RESULT@(I),U,7)="STATUS-"_STATUS ; op status
"RTN","VIABRPC4",41,0)
 . S Z=$$GET1^DIQ(130,GMN,.04,"I") I Z>0 S Y=Z,C=$P(^DD(130,.04,0),U,2) D Y^DIQ S SPEC=Y K Y
"RTN","VIABRPC4",42,0)
 . S $P(@RESULT@(I),U,8)="SPEC-"_$G(SPEC) ; Surgical specialty
"RTN","VIABRPC4",43,0)
 . S Z=$$GET1^DIQ(136,GMN,.02,"I") I +Z S Z=Z_" "_$P($$CPT^ICPTCOD(Z,PXDT),U,3)
"RTN","VIABRPC4",44,0)
 . S $P(@RESULT@(I),U,11)="PRINPX-"_Z ; Prin Procedure Code
"RTN","VIABRPC4",45,0)
 . ;*347 Reset variables for each item.
"RTN","VIABRPC4",46,0)
 . K SPEC,DCTDTM,TRSDTM,STATUS,Y,Z
"RTN","VIABRPC4",47,0)
 . S @RESULT@(I)=SITE_U_@RESULT@(I)
"RTN","VIABRPC4",48,0)
 Q
"RTN","VIABRPC4",49,0)
 ;
"RTN","VIABRPC4",50,0)
DATE(X) ;convert fm date to readable format with 4 digits in year.
"RTN","VIABRPC4",51,0)
 N VIAX,YY
"RTN","VIABRPC4",52,0)
 S VIAX=X
"RTN","VIABRPC4",53,0)
 S X=$$REGDTM4(X)
"RTN","VIABRPC4",54,0)
 Q X
"RTN","VIABRPC4",55,0)
 ;
"RTN","VIABRPC4",56,0)
REGDTM4(X) ;Receives X in internal date.time, and returns X in MM/DD/YYYY TT:TT
"RTN","VIABRPC4",57,0)
 ; DBIA 10103 call $$FMTE^XLFDT
"RTN","VIABRPC4",58,0)
 Q $TR($$FMTE^XLFDT(X,"5ZM"),"@"," ")
"RTN","VIABRPC4",59,0)
 ;
"RTN","VIABRPC4",60,0)
ON(RESULT) ; returns E if order checking enabled, otherwise D;ICR-#2263
"RTN","VIABRPC4",61,0)
 ;RPC VIABDXC ON
"RTN","VIABRPC4",62,0)
 ;This RPC is a similar to ORWDXC ON
"RTN","VIABRPC4",63,0)
 S RESULT=$$GET^XPAR("DIV^SYS^PKG","ORK SYSTEM ENABLE/DISABLE")
"RTN","VIABRPC4",64,0)
 Q
"RTN","VIABRPC4",65,0)
 ;
"RTN","VIABRPC4",66,0)
SIGINFO(RESULT,VIADFN,VIAPROV) ;returns the provider/patient info that must be displayed when signing controlled substance orders
"RTN","VIABRPC4",67,0)
 ;ICR-#10061,10060,10090,2343
"RTN","VIABRPC4",68,0)
 ;RPC VIAB DEA SIGINFO
"RTN","VIABRPC4",69,0)
 ;This RPC is a similar to ORDEA SIGINFO
"RTN","VIABRPC4",70,0)
 N VIAI S VIAI=0
"RTN","VIABRPC4",71,0)
 ;patient name
"RTN","VIABRPC4",72,0)
 S VIAI=VIAI+1,DFN=VIADFN
"RTN","VIABRPC4",73,0)
 D DEM^VADPT
"RTN","VIABRPC4",74,0)
 S RESULT(VIAI)=VADM(1)
"RTN","VIABRPC4",75,0)
 ;date of issuance
"RTN","VIABRPC4",76,0)
 S VIAI=VIAI+1,RESULT(VIAI)="Date of Issuance: "_$$FMTE^XLFDT($$DT^XLFDT)
"RTN","VIABRPC4",77,0)
 ;provider name
"RTN","VIABRPC4",78,0)
 S VIAI=VIAI+1,RESULT(VIAI)="Provider: "_$$GET1^DIQ(200,VIAPROV,.01,"E")
"RTN","VIABRPC4",79,0)
 ;provider address (facility address)
"RTN","VIABRPC4",80,0)
 N VIAINST
"RTN","VIABRPC4",81,0)
 D GETS^DIQ(4,DUZ(2),".01;.02;1.01;1.02;1.03;1.04","E","VIAINST")
"RTN","VIABRPC4",82,0)
 N VIADDNUM S VIADDNUM=0
"RTN","VIABRPC4",83,0)
 I $L(VIAINST(4,DUZ(2)_",",1.01,"E"))>0 S VIAI=VIAI+1,RESULT(VIAI)=VIAINST(4,DUZ(2)_",",1.01,"E"),VIADDNUM=VIADDNUM+1
"RTN","VIABRPC4",84,0)
 I $L(VIAINST(4,DUZ(2)_",",1.02,"E"))>0 S VIAI=VIAI+1,RESULT(VIAI)=VIAINST(4,DUZ(2)_",",1.02,"E"),VIADDNUM=VIADDNUM+1
"RTN","VIABRPC4",85,0)
 I $L(VIAINST(4,DUZ(2)_",",1.03,"E"))>0 S VIAI=VIAI+1,RESULT(VIAI)=VIAINST(4,DUZ(2)_",",1.03,"E"),VIADDNUM=VIADDNUM+1
"RTN","VIABRPC4",86,0)
 I $L(VIAINST(4,DUZ(2)_",",.02,"E"))>0 S RESULT(VIAI)=RESULT(VIAI)_", "_VIAINST(4,DUZ(2)_",",.02,"E"),VIADDNUM=VIADDNUM+1
"RTN","VIABRPC4",87,0)
 I $L(VIAINST(4,DUZ(2)_",",1.04,"E"))>0 S RESULT(VIAI)=RESULT(VIAI)_"  "_VIAINST(4,DUZ(2)_",",1.04,"E"),VIADDNUM=VIADDNUM+1
"RTN","VIABRPC4",88,0)
 I VIADDNUM=0 D
"RTN","VIABRPC4",89,0)
 .S VIAI=VIAI+1,RESULT(VIAI)="No Address on record"
"RTN","VIABRPC4",90,0)
 .I $L(VIAINST(4,DUZ(2)_",",.01,"E"))>0 S VIAI=VIAI+1,RESULT(VIAI)="for "_VIAINST(4,DUZ(2)_",",.01,"E")
"RTN","VIABRPC4",91,0)
 ;dea #
"RTN","VIABRPC4",92,0)
 S VIAI=VIAI+1,RESULT(VIAI)="DEA: "_$$DEA^XUSER(,VIAPROV)
"RTN","VIABRPC4",93,0)
 ;detox #
"RTN","VIABRPC4",94,0)
 N VIADETOX S VIADETOX=$$DETOX^XUSER(VIAPROV)
"RTN","VIABRPC4",95,0)
 I $L(VIADETOX)>0 S VIAI=VIAI+1,RESULT(VIAI)="Detox: "_VIADETOX
"RTN","VIABRPC4",96,0)
 D KVA^VADPT
"RTN","VIABRPC4",97,0)
 Q
"RTN","VIABRPC4",98,0)
 ;
"RTN","VIABRPC4",99,0)
SCHALL(RESULT,LOCIEN)     ; return all schedules;ICR-#10040,4546
"RTN","VIABRPC4",100,0)
 ;RPC VIAB SCHALL
"RTN","VIABRPC4",101,0)
 ;This RPC is a similar to ORWDPS1 SCHALL
"RTN","VIABRPC4",102,0)
 N CNT,ILST,ORARRAY,WIEN
"RTN","VIABRPC4",103,0)
 S WIEN=$$WARDIEN(+$G(LOCIEN))
"RTN","VIABRPC4",104,0)
 D SCHED^PSS51P1(WIEN,.ORARRAY)
"RTN","VIABRPC4",105,0)
 S ILST=0
"RTN","VIABRPC4",106,0)
 S CNT=0 F  S CNT=$O(ORARRAY(CNT)) Q:CNT'>0  D
"RTN","VIABRPC4",107,0)
 .S ILST=ILST+1,RESULT(ILST)=$P(ORARRAY(CNT),U,2,5)
"RTN","VIABRPC4",108,0)
 Q
"RTN","VIABRPC4",109,0)
 ;
"RTN","VIABRPC4",110,0)
WARDIEN(LOCIEN) ;
"RTN","VIABRPC4",111,0)
 N RESULT
"RTN","VIABRPC4",112,0)
 S RESULT=0
"RTN","VIABRPC4",113,0)
 I LOCIEN=0 Q RESULT
"RTN","VIABRPC4",114,0)
 I $P($G(^SC(LOCIEN,42)),U)="" Q RESULT
"RTN","VIABRPC4",115,0)
 S RESULT=+$P($G(^SC(LOCIEN,42)),U)
"RTN","VIABRPC4",116,0)
 Q RESULT
"RTN","VIABRPC4",117,0)
 ;
"RTN","VIABRPC4",118,0)
VALSCH(RESULT,X,PSTYPE)    ; validate a schedule, return 1 if valid, 0 if not;ICR-#2946
"RTN","VIABRPC4",119,0)
 ;RPC VIAB VALSCH
"RTN","VIABRPC4",120,0)
 ;This RPC is a similar to ORWDPS32 VALSCH
"RTN","VIABRPC4",121,0)
 I '$L($T(EN^PSSGSGUI)) S RESULT=-1 Q
"RTN","VIABRPC4",122,0)
 I $E($T(EN^PSSGSGUI),1,4)="EN(X" D
"RTN","VIABRPC4",123,0)
 . N ORX S ORX=$G(X) D EN^PSSGSGUI(.ORX,$G(PSTYPE,"I"))
"RTN","VIABRPC4",124,0)
 . K X S:$D(ORX) X=ORX
"RTN","VIABRPC4",125,0)
 E  D
"RTN","VIABRPC4",126,0)
 . D EN^PSSGSGUI
"RTN","VIABRPC4",127,0)
 S RESULT=$S($D(X):1,1:0)
"RTN","VIABRPC4",128,0)
 Q
"RTN","VIABRPC4",129,0)
 ;
"RTN","VIABRPC4",130,0)
IMOLOC(RESULT,VIALOC,VIADFN) ;RESULT>=0: VIALOC is an IMO authorized location; ICR-#4133,10040,6347,4422
"RTN","VIABRPC4",131,0)
 ;RPC VIAB IMOLOC
"RTN","VIABRPC4",132,0)
 ;This RPC is a similar to ORIMO IMOLOC
"RTN","VIABRPC4",133,0)
 N A,TYPE
"RTN","VIABRPC4",134,0)
 S RESULT=-1
"RTN","VIABRPC4",135,0)
 K ^TMP($J,"VIAIMO")
"RTN","VIABRPC4",136,0)
 S RESULT=$$SDIMO^SDAMA203(VIALOC,VIADFN)
"RTN","VIABRPC4",137,0)
 ;if RSA returns an error then check against Clinic Loc.
"RTN","VIABRPC4",138,0)
 I RESULT=-3 D
"RTN","VIABRPC4",139,0)
 . S TYPE=$$GET1^DIQ(44,VIALOC,2,"E") I TYPE'="C" Q
"RTN","VIABRPC4",140,0)
 . I $D(^SC("AE",1,VIALOC))=1 S RESULT=1
"RTN","VIABRPC4",141,0)
 K SDIMO(1)
"RTN","VIABRPC4",142,0)
 I $D(^TMP($J,"OR MOB APP1")) K ^("OR MOB APP1") D
"RTN","VIABRPC4",143,0)
 . D ALL^PSJ53P46(+VIALOC,"VIAIMO")
"RTN","VIABRPC4",144,0)
 . S A=$G(^TMP($J,"VIAIMO",0))
"RTN","VIABRPC4",145,0)
 . I A'>0!(+$G(^TMP($J,"VIAIMO",A,3))=0) S RESULT=-1
"RTN","VIABRPC4",146,0)
 K SDIMO
"RTN","VIABRPC4",147,0)
 Q
"RTN","VIABRPC4",148,0)
 ;
"RTN","VIABRPC4",149,0)
ALLSAMP(RESULT) ; procedure;ICR-2389,10055
"RTN","VIABRPC4",150,0)
 ;RPC VIAB ALLSAMP
"RTN","VIABRPC4",151,0)
 ;This RPC is a similar to ORWDLR32 ALLSAMP
"RTN","VIABRPC4",152,0)
 ; returns all collection samples
"RTN","VIABRPC4",153,0)
 ; n^SampIEN^SampName^SpecPtr^TubeTop^^^LabCollect^^SpecName
"RTN","VIABRPC4",154,0)
 N SMP,SPC,ILST,IEN,X,A,%,INC,X2,X3,X7
"RTN","VIABRPC4",155,0)
 S ILST=0,RESULT($$NXT)="~CollSamp"
"RTN","VIABRPC4",156,0)
 S SMP="" F  S SMP=$O(^LAB(62,"B",SMP)) Q:SMP=""  D
"RTN","VIABRPC4",157,0)
 . S IEN=0 F  S IEN=$O(^LAB(62,"B",SMP,IEN)) Q:'IEN  D
"RTN","VIABRPC4",158,0)
 . . S INC=1,A=$$GET1^DIQ(62,IEN,64.9101,"I")
"RTN","VIABRPC4",159,0)
 . . D NOW^%DTC I A]"",A'>$P(%,".") S INC=0 Q
"RTN","VIABRPC4",160,0)
 . . S X2=$$GET1^DIQ(62,IEN,2,"I"),X3=$$GET1^DIQ(62,IEN,3,"I"),X7=$$GET1^DIQ(62,IEN,7,"I")
"RTN","VIABRPC4",161,0)
 . . S X="i"_U_IEN_U_SMP_U_X2_U_X3_U_U_U_X7
"RTN","VIABRPC4",162,0)
 . . I X2 D
"RTN","VIABRPC4",163,0)
 . . . S $P(X,U,10)=$$GET1^DIQ(61,+X2,.01,"I")
"RTN","VIABRPC4",164,0)
 . . . S SPC($P(X,U,4))=$P(X,U,10)
"RTN","VIABRPC4",165,0)
 . . S RESULT($$NXT)=X
"RTN","VIABRPC4",166,0)
 S RESULT($$NXT)="~Specimens"
"RTN","VIABRPC4",167,0)
 S SPC=0 F  S SPC=$O(SPC(SPC)) Q:'SPC  S RESULT($$NXT)=SPC_U_SPC(SPC)
"RTN","VIABRPC4",168,0)
 Q
"RTN","VIABRPC4",169,0)
 ;
"RTN","VIABRPC4",170,0)
NXT() ; increments ILST
"RTN","VIABRPC4",171,0)
 S ILST=ILST+1
"RTN","VIABRPC4",172,0)
 Q ILST
"RTN","VIABRPC4",173,0)
 ;
"RTN","VIABRPC4",174,0)
MAXDAYS(RESULT,LOC,SCHED) ; Return max number of days for a continuing order;ICR -#4546,2263
"RTN","VIABRPC4",175,0)
 ;RPC VIAB MAXDAYS
"RTN","VIABRPC4",176,0)
 ;This RPC is a similar to ORWDLR32 MAXDAYS
"RTN","VIABRPC4",177,0)
 N TMP1,TMP2
"RTN","VIABRPC4",178,0)
 K ^TMP($J,"ORWDLR33 MAXDAYS")
"RTN","VIABRPC4",179,0)
 S TMP1=$$GET^XPAR("ALL^LOC.`"_+LOC,"LR MAX DAYS CONTINUOUS",1,"Q")
"RTN","VIABRPC4",180,0)
 I +TMP1=0 S RESULT="-1" Q
"RTN","VIABRPC4",181,0)
 I +$G(SCHED)>0 D ZERO^PSS51P1(SCHED,,,,"ORWDLR33 MAXDAYS") S TMP2=$G(^TMP($J,"ORWDLR33 MAXDAYS",SCHED,2.5)) K ^TMP($J,"ORWDLR33 MAXDAYS")
"RTN","VIABRPC4",182,0)
 E  S TMP2=0
"RTN","VIABRPC4",183,0)
 I +TMP1=0,+TMP2>0 S RESULT=TMP2 Q
"RTN","VIABRPC4",184,0)
 I +TMP2=0,+TMP1>0 S RESULT=TMP1 Q
"RTN","VIABRPC4",185,0)
 S RESULT=$S(+TMP1>+TMP2:+TMP2,+TMP2>+TMP1:+TMP1,+TMP1=+TMP2:+TMP1,1:0)
"RTN","VIABRPC4",186,0)
 K ^TMP($J,"ORWDLR33 MAXDAYS")
"RTN","VIABRPC4",187,0)
 Q
"RTN","VIABRPC4",188,0)
 ;
"RTN","VIABRPC4",189,0)
INPLOC(RESULT,FROM,DIR) ;Return a set of wards from HOSPITAL LOCATION
"RTN","VIABRPC4",190,0)
 ;RPC VIAB INPLOC
"RTN","VIABRPC4",191,0)
 ;This RPC is a similar to ORWU INPLOC
"RTN","VIABRPC4",192,0)
 ; .RESULT=returned list, FROM=text to $O from, DIR=$O direction,
"RTN","VIABRPC4",193,0)
 N I,IEN,CNT S I=0,CNT=44
"RTN","VIABRPC4",194,0)
 F  Q:I'<CNT  S FROM=$O(^SC("B",FROM),DIR) Q:FROM=""  D  ; IA# 10040.
"RTN","VIABRPC4",195,0)
 . S IEN="" F  S IEN=$O(^SC("B",FROM,IEN),DIR) Q:'IEN  D
"RTN","VIABRPC4",196,0)
 . . I ($P($G(^SC(IEN,0)),U,3)'="W") Q
"RTN","VIABRPC4",197,0)
 . . I '$$ACTLOC(IEN) Q
"RTN","VIABRPC4",198,0)
 . . S I=I+1,RESULT(I)=IEN_"^"_FROM
"RTN","VIABRPC4",199,0)
 Q
"RTN","VIABRPC4",200,0)
ACTLOC(LOC) ; Function: returns TRUE if active hospital location-ICR-#10040,1246
"RTN","VIABRPC4",201,0)
 ; IA# 10040.
"RTN","VIABRPC4",202,0)
 N D0,X I +$G(^SC(LOC,"OOS")) Q 0                ; screen out OOS entry
"RTN","VIABRPC4",203,0)
 S D0=+$G(^SC(LOC,42)) I D0 D WIN^DGPMDDCF Q 'X  ; chk out of svc wards
"RTN","VIABRPC4",204,0)
 S X=$G(^SC(LOC,"I")) I +X=0 Q 1                 ; no inactivate date
"RTN","VIABRPC4",205,0)
 I DT>$P(X,U)&($P(X,U,2)=""!(DT<$P(X,U,2))) Q 0  ; chk reactivate date
"RTN","VIABRPC4",206,0)
 Q 1                                             ; must still be active
"RTN","VIABRPC4",207,0)
 ;
"VER")
8.0^22.2
"BLD",10010,6)
^10
**END**
**END**

