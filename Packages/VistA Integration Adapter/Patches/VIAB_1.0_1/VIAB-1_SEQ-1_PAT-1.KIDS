Released VIAB*1*1 SEQ #1
Extracted from mail message
**KIDS**:VIAB*1.0*1^

**INSTALL NAME**
VIAB*1.0*1
"BLD",20428,0)
VIAB*1.0*1^VISTA INTEGRATION ADAPTER^0^3140310^y
"BLD",20428,1,0)
^^26^26^3140310^^^^
"BLD",20428,1,1,0)
The VistA Integration Adapter (VIA) team needs to create two new proxy
"BLD",20428,1,2,0)
users in order to connect via VistALink and to allow Remote Procedure
"BLD",20428,1,3,0)
Calls (RPC) to be invoked.  These users are VIABCONNECTORPROXY,VIAB
"BLD",20428,1,4,0)
for the Connector Proxy and VIABAPPLICATIONPROXY,VIAB for the
"BLD",20428,1,5,0)
Application Proxy.  In addition, a new menu option is created.
"BLD",20428,1,6,0)
 
"BLD",20428,1,7,0)
In order to implement the changes required for this patch, a
"BLD",20428,1,8,0)
combination of patch updates and post-installation steps are required.
"BLD",20428,1,9,0)
The new VIAB WEB SERVICES OPTION option is installed by the patch
"BLD",20428,1,10,0)
and the new Application Proxy is implemented by the post-init routine
"BLD",20428,1,11,0)
VIABRPC5.  After successful installation, the site will need to
"BLD",20428,1,12,0)
manually create the Connector Proxy utilizing Foundations Manager
"BLD",20428,1,13,0)
as detailed in the Post-Installation instructions.
"BLD",20428,1,14,0)
 
"BLD",20428,1,15,0)
 
"BLD",20428,1,16,0)
 
"BLD",20428,1,17,0)
************************ Important Information ***********************
"BLD",20428,1,18,0)
**                                                                  **
"BLD",20428,1,19,0)
** Note: A VistaLink listener port needs to be open, available and  **
"BLD",20428,1,20,0)
**       maintained by each production site.                        **
"BLD",20428,1,21,0)
**                                                                  **
"BLD",20428,1,22,0)
** Note: The host name/address and VistALink port must be correctly **
"BLD",20428,1,23,0)
**       defined in the VistALink                                   **
"BLD",20428,1,24,0)
**       gov.va.med.vistalink.connectorConfig.xml file              **
"BLD",20428,1,25,0)
**                                                                  **
"BLD",20428,1,26,0)
**********************************************************************
"BLD",20428,4,0)
^9.64PA^^
"BLD",20428,6)
3^
"BLD",20428,6.3)
25
"BLD",20428,"ABPKG")
n
"BLD",20428,"INID")
^n
"BLD",20428,"INIT")
RUNALL^VIABRPC5
"BLD",20428,"KRN",0)
^9.67PA^779.2^18
"BLD",20428,"KRN",.401,0)
.401
"BLD",20428,"KRN",.402,0)
.402
"BLD",20428,"KRN",.5,0)
.5
"BLD",20428,"KRN",.84,0)
.84
"BLD",20428,"KRN",3.6,0)
3.6
"BLD",20428,"KRN",3.8,0)
3.8
"BLD",20428,"KRN",9.2,0)
9.2
"BLD",20428,"KRN",9.8,0)
9.8
"BLD",20428,"KRN",9.8,"NM",0)
^9.68A^^0
"BLD",20428,"KRN",19,0)
19
"BLD",20428,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",20428,"KRN",19,"NM",1,0)
VIAB WEB SERVICES OPTION^^0
"BLD",20428,"KRN",19,"NM","B","VIAB WEB SERVICES OPTION",1)

"BLD",20428,"KRN",19.1,0)
19.1
"BLD",20428,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",20428,"KRN",101,0)
101
"BLD",20428,"KRN",101,"NM",0)
^9.68A^^
"BLD",20428,"KRN",409.61,0)
409.61
"BLD",20428,"KRN",771,0)
771
"BLD",20428,"KRN",779.2,0)
779.2
"BLD",20428,"KRN",870,0)
870
"BLD",20428,"KRN",8989.51,0)
8989.51
"BLD",20428,"KRN",8989.52,0)
8989.52
"BLD",20428,"KRN",8994,0)
8994
"BLD",20428,"KRN","B",.401,.401)

"BLD",20428,"KRN","B",.402,.402)

"BLD",20428,"KRN","B",.5,.5)

"BLD",20428,"KRN","B",.84,.84)

"BLD",20428,"KRN","B",3.6,3.6)

"BLD",20428,"KRN","B",3.8,3.8)

"BLD",20428,"KRN","B",9.2,9.2)

"BLD",20428,"KRN","B",9.8,9.8)

"BLD",20428,"KRN","B",19,19)

"BLD",20428,"KRN","B",19.1,19.1)

"BLD",20428,"KRN","B",101,101)

"BLD",20428,"KRN","B",409.61,409.61)

"BLD",20428,"KRN","B",771,771)

"BLD",20428,"KRN","B",779.2,779.2)

"BLD",20428,"KRN","B",870,870)

"BLD",20428,"KRN","B",8989.51,8989.51)

"BLD",20428,"KRN","B",8989.52,8989.52)

"BLD",20428,"KRN","B",8994,8994)

"BLD",20428,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",20428,"QUES",0)
^9.62^^
"BLD",20428,"REQB",0)
^9.611^^
"INIT")
RUNALL^VIABRPC5
"KRN",19,13294,-1)
0^1
"KRN",19,13294,0)
VIAB WEB SERVICES OPTION^VIAB Web Services Option^^B^^^^^^^^VISTA INTEGRATION ADAPTER
"KRN",19,13294,1,0)
^19.06^3^3^3140228^^
"KRN",19,13294,1,1,0)
This option is required by the Kernel Broker to give 
"KRN",19,13294,1,2,0)
access to the RPCs used by the Vista Integration Adapter 
"KRN",19,13294,1,3,0)
(VIA) team.
"KRN",19,13294,99.1)
63218,50689
"KRN",19,13294,"RPC",0)
^19.05P^84^84
"KRN",19,13294,"RPC",1,0)
DG SENSITIVE RECORD ACCESS
"KRN",19,13294,"RPC",2,0)
DG SENSITIVE RECORD BULLETIN
"KRN",19,13294,"RPC",3,0)
ORPRF HASFLG
"KRN",19,13294,"RPC",4,0)
ORQPT CLINIC PATIENTS
"KRN",19,13294,"RPC",5,0)
ORQPT PROVIDER PATIENTS
"KRN",19,13294,"RPC",6,0)
ORQPT SPECIALTIES
"KRN",19,13294,"RPC",7,0)
ORQPT SPECIALTY PATIENTS
"KRN",19,13294,"RPC",8,0)
ORQPT TEAM PATIENTS
"KRN",19,13294,"RPC",9,0)
ORQPT TEAMS
"KRN",19,13294,"RPC",10,0)
ORQPT WARDRMBED
"KRN",19,13294,"RPC",11,0)
ORQPT WARDS
"KRN",19,13294,"RPC",12,0)
ORQQCN DETAIL
"KRN",19,13294,"RPC",13,0)
ORQQCN GET ORDER NUMBER
"KRN",19,13294,"RPC",14,0)
ORQQCN LIST
"KRN",19,13294,"RPC",15,0)
ORVAA VAA
"KRN",19,13294,"RPC",16,0)
ORWCIRN FACLIST
"KRN",19,13294,"RPC",17,0)
ORWCV DTLVST
"KRN",19,13294,"RPC",18,0)
ORWCV VST
"KRN",19,13294,"RPC",19,0)
ORWDX LOADRSP
"KRN",19,13294,"RPC",20,0)
ORWDX LOCK ORDER
"KRN",19,13294,"RPC",21,0)
ORWDX UNLOCK ORDER
"KRN",19,13294,"RPC",22,0)
ORWDXA OFCPLX
"KRN",19,13294,"RPC",23,0)
ORWDXC SESSION
"KRN",19,13294,"RPC",24,0)
ORWDXM DLGNAME
"KRN",19,13294,"RPC",25,0)
ORWDXM1 BLDQRSP
"KRN",19,13294,"RPC",26,0)
ORWLRR ALLTESTS
"KRN",19,13294,"RPC",27,0)
ORWLRR INFO
"KRN",19,13294,"RPC",28,0)
ORWLRR INTERIMG
"KRN",19,13294,"RPC",29,0)
ORWORDG MAPSEQ
"KRN",19,13294,"RPC",30,0)
ORWORR AGET
"KRN",19,13294,"RPC",31,0)
ORWORR GET4LST
"KRN",19,13294,"RPC",32,0)
ORWPS ACTIVE
"KRN",19,13294,"RPC",33,0)
ORWPS DETAIL
"KRN",19,13294,"RPC",34,0)
ORWPT ADMITLST
"KRN",19,13294,"RPC",35,0)
ORWPT BYWARD
"KRN",19,13294,"RPC",36,0)
ORWPT DIEDON
"KRN",19,13294,"RPC",37,0)
ORWPT ID INFO
"KRN",19,13294,"RPC",38,0)
ORWPT LIST ALL
"KRN",19,13294,"RPC",39,0)
ORWPT PTINQ
"KRN",19,13294,"RPC",40,0)
ORWPT SELECT
"KRN",19,13294,"RPC",41,0)
ORWPT1 PCDETAIL
"KRN",19,13294,"RPC",42,0)
ORWPT1 PRCARE
"KRN",19,13294,"RPC",43,0)
ORWPT16 ID INFO
"KRN",19,13294,"RPC",44,0)
ORWRP REPORT TEXT
"KRN",19,13294,"RPC",45,0)
ORWRP2 HS COMPONENTS
"KRN",19,13294,"RPC",46,0)
ORWRP2 HS REPORT TEXT
"KRN",19,13294,"RPC",47,0)
ORWSR RPTLIST
"KRN",19,13294,"RPC",48,0)
ORWTIU CHKTXT
"KRN",19,13294,"RPC",49,0)
ORWU CLINLOC
"KRN",19,13294,"RPC",50,0)
ORWU DT
"KRN",19,13294,"RPC",51,0)
ORWU NEWPERS
"KRN",19,13294,"RPC",52,0)
ORWU USERINFO
"KRN",19,13294,"RPC",53,0)
ORWU VALIDSIG
"KRN",19,13294,"RPC",54,0)
ORWU1 NEWLOC
"KRN",19,13294,"RPC",55,0)
SC GETS ENTRY DATA
"KRN",19,13294,"RPC",56,0)
SC LISTER
"KRN",19,13294,"RPC",57,0)
TIU AUTHORIZATION
"KRN",19,13294,"RPC",58,0)
TIU CREATE RECORD
"KRN",19,13294,"RPC",59,0)
TIU DOCUMENTS BY CONTEXT
"KRN",19,13294,"RPC",60,0)
TIU GET PRF ACTIONS
"KRN",19,13294,"RPC",61,0)
TIU GET RECORD TEXT
"KRN",19,13294,"RPC",62,0)
TIU HAS AUTHOR SIGNED?
"KRN",19,13294,"RPC",63,0)
TIU IS THIS A CONSULT?
"KRN",19,13294,"RPC",64,0)
TIU IS THIS A SURGERY?
"KRN",19,13294,"RPC",65,0)
TIU ISPRF
"KRN",19,13294,"RPC",66,0)
TIU LOCK RECORD
"KRN",19,13294,"RPC",67,0)
TIU LONG LIST OF TITLES
"KRN",19,13294,"RPC",68,0)
TIU ONE VISIT NOTE?
"KRN",19,13294,"RPC",69,0)
TIU REQUIRES COSIGNATURE
"KRN",19,13294,"RPC",70,0)
TIU SET DOCUMENT TEXT
"KRN",19,13294,"RPC",71,0)
TIU SIGN RECORD
"KRN",19,13294,"RPC",72,0)
TIU UNLOCK RECORD
"KRN",19,13294,"RPC",73,0)
TIU UPDATE RECORD
"KRN",19,13294,"RPC",74,0)
TIU WAS THIS SAVED?
"KRN",19,13294,"RPC",75,0)
TIU WHICH SIGNATURE ACTION
"KRN",19,13294,"RPC",78,0)
ORQQAL LIST
"KRN",19,13294,"RPC",79,0)
ORQQVI VITALS
"KRN",19,13294,"RPC",80,0)
ORWDX LOCK
"KRN",19,13294,"RPC",81,0)
ORWDX SEND
"KRN",19,13294,"RPC",82,0)
ORWDX UNLOCK
"KRN",19,13294,"RPC",83,0)
ORWPT FULLSSN
"KRN",19,13294,"RPC",84,0)
ORWPT LAST5
"KRN",19,13294,"U")
VIAB WEB SERVICES OPTION
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",424,-1)
1^1
"PKG",424,0)
VISTA INTEGRATION ADAPTER^VIAB^VIAB APP
"PKG",424,20,0)
^9.402P^^
"PKG",424,22,0)
^9.49I^1^1
"PKG",424,22,1,0)
1.0
"PKG",424,22,1,"PAH",1,0)
1^3140310^123456789093
"PKG",424,22,1,"PAH",1,1,0)
^^26^26^3140310
"PKG",424,22,1,"PAH",1,1,1,0)
The VistA Integration Adapter (VIA) team needs to create two new proxy
"PKG",424,22,1,"PAH",1,1,2,0)
users in order to connect via VistALink and to allow Remote Procedure
"PKG",424,22,1,"PAH",1,1,3,0)
Calls (RPC) to be invoked.  These users are VIABCONNECTORPROXY,VIAB
"PKG",424,22,1,"PAH",1,1,4,0)
for the Connector Proxy and VIABAPPLICATIONPROXY,VIAB for the
"PKG",424,22,1,"PAH",1,1,5,0)
Application Proxy.  In addition, a new menu option is created.
"PKG",424,22,1,"PAH",1,1,6,0)
 
"PKG",424,22,1,"PAH",1,1,7,0)
In order to implement the changes required for this patch, a
"PKG",424,22,1,"PAH",1,1,8,0)
combination of patch updates and post-installation steps are required.
"PKG",424,22,1,"PAH",1,1,9,0)
The new VIAB WEB SERVICES OPTION option is installed by the patch
"PKG",424,22,1,"PAH",1,1,10,0)
and the new Application Proxy is implemented by the post-init routine
"PKG",424,22,1,"PAH",1,1,11,0)
VIABRPC5.  After successful installation, the site will need to
"PKG",424,22,1,"PAH",1,1,12,0)
manually create the Connector Proxy utilizing Foundations Manager
"PKG",424,22,1,"PAH",1,1,13,0)
as detailed in the Post-Installation instructions.
"PKG",424,22,1,"PAH",1,1,14,0)
 
"PKG",424,22,1,"PAH",1,1,15,0)
 
"PKG",424,22,1,"PAH",1,1,16,0)
 
"PKG",424,22,1,"PAH",1,1,17,0)
************************ Important Information ***********************
"PKG",424,22,1,"PAH",1,1,18,0)
**                                                                  **
"PKG",424,22,1,"PAH",1,1,19,0)
** Note: A VistaLink listener port needs to be open, available and  **
"PKG",424,22,1,"PAH",1,1,20,0)
**       maintained by each production site.                        **
"PKG",424,22,1,"PAH",1,1,21,0)
**                                                                  **
"PKG",424,22,1,"PAH",1,1,22,0)
** Note: The host name/address and VistALink port must be correctly **
"PKG",424,22,1,"PAH",1,1,23,0)
**       defined in the VistALink                                   **
"PKG",424,22,1,"PAH",1,1,24,0)
**       gov.va.med.vistalink.connectorConfig.xml file              **
"PKG",424,22,1,"PAH",1,1,25,0)
**                                                                  **
"PKG",424,22,1,"PAH",1,1,26,0)
**********************************************************************
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","VIABRPC5")
0^^B3766964^n/a
"RTN","VIABRPC5",1,0)
VIABRPC5 ;BAY/PIJ - Create Application Proxy user for VIA team ;06-FEB-14 3:36pm
"RTN","VIABRPC5",2,0)
 ;;1.0;VISTA INTEGRATION ADAPTER;**1**;06-FEB-14;Build 25
"RTN","VIABRPC5",3,0)
 ;
"RTN","VIABRPC5",4,0)
 ; ICR #4677 = $$CREATE^XUSAP (API for Application Proxy)
"RTN","VIABRPC5",5,0)
 ; ICR #10141 = BMES^XPDUTL & MES^XPDUTL
"RTN","VIABRPC5",6,0)
 ; 
"RTN","VIABRPC5",7,0)
 ; Application Proxy name = "VIABAPPLICATIONPROXY,VIAB"
"RTN","VIABRPC5",8,0)
 ; Secondary Menu Option name = "VIAB WEB SERVICES OPTION"
"RTN","VIABRPC5",9,0)
 ;
"RTN","VIABRPC5",10,0)
RUNALL ; Entry point in the (Patch - VIAB*1.0*1 v2) to run ALL 2 steps
"RTN","VIABRPC5",11,0)
 D BMSG("Starting Post-Init")
"RTN","VIABRPC5",12,0)
 D PROXY
"RTN","VIABRPC5",13,0)
 D MSG("Post-Init Complete")
"RTN","VIABRPC5",14,0)
 Q
"RTN","VIABRPC5",15,0)
 ;
"RTN","VIABRPC5",16,0)
PROXY ; Create an Application Proxy for VIAB application
"RTN","VIABRPC5",17,0)
 N X
"RTN","VIABRPC5",18,0)
 S X=$$CREATE^XUSAP("VIABAPPLICATIONPROXY,VIAB","","VIAB WEB SERVICES OPTION")
"RTN","VIABRPC5",19,0)
 ;
"RTN","VIABRPC5",20,0)
 I +X=0 D  Q
"RTN","VIABRPC5",21,0)
 . D BMSG("   Application Proxy User - 'VIABAPPLICATIONPROXY,VIAB'")
"RTN","VIABRPC5",22,0)
 . D MSG("   already exists in the NEW PERSON file (#200)"),MSG("")
"RTN","VIABRPC5",23,0)
 ;
"RTN","VIABRPC5",24,0)
 I +X=-1 D  Q
"RTN","VIABRPC5",25,0)
 . D BMSG("   Application Proxy User - 'VIABAPPLICATIONPROXY,VIAB'")
"RTN","VIABRPC5",26,0)
 . D MSG("   Unsuccessful; could not create Application Proxy User")
"RTN","VIABRPC5",27,0)
 . D MSG("   OR error in call to UPDATE^DIE)"),MSG("")
"RTN","VIABRPC5",28,0)
 ;
"RTN","VIABRPC5",29,0)
 D BMSG("   ********************************************************************")
"RTN","VIABRPC5",30,0)
 D MSG("   ** Application Proxy User - 'VIABAPPLICATIONPROXY,VIAB' = created **")
"RTN","VIABRPC5",31,0)
 D MSG("   ** Secondary Menu Option - 'VIAB WEB SERVICES OPTION' = linked    **")
"RTN","VIABRPC5",32,0)
 D MSG("   **                         to the Application Proxy.              **")
"RTN","VIABRPC5",33,0)
 D MSG("   ********************************************************************")
"RTN","VIABRPC5",34,0)
 D MSG("")
"RTN","VIABRPC5",35,0)
 Q
"RTN","VIABRPC5",36,0)
 ;
"RTN","VIABRPC5",37,0)
 ; A message is also recorded in INSTALL file
"RTN","VIABRPC5",38,0)
 ; (#9.7) entry for the installation.
"RTN","VIABRPC5",39,0)
 ;
"RTN","VIABRPC5",40,0)
 ; Output a message.
"RTN","VIABRPC5",41,0)
MSG(MSG) ; Integration Agreement #10141
"RTN","VIABRPC5",42,0)
 D MES^XPDUTL(MSG)
"RTN","VIABRPC5",43,0)
 Q
"RTN","VIABRPC5",44,0)
 ;
"RTN","VIABRPC5",45,0)
 ; Output a message with a blank line added.
"RTN","VIABRPC5",46,0)
BMSG(MSG) ; Integration Agreement #10141
"RTN","VIABRPC5",47,0)
 D BMES^XPDUTL(MSG)
"RTN","VIABRPC5",48,0)
 Q
"VER")
8.0^22.0
"BLD",20428,6)
^1
**END**
**END**

