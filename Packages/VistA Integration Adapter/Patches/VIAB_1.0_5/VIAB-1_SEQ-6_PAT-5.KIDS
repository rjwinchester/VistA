Released VIAB*1*5 SEQ #6
Extracted from mail message
**KIDS**:VIAB*1.0*5^

**INSTALL NAME**
VIAB*1.0*5
"BLD",9383,0)
VIAB*1.0*5^VISTA INTEGRATION ADAPTER^0^3160212^y
"BLD",9383,1,0)
^^2^2^3160212^
"BLD",9383,1,1,0)
Vista Integration Adapter enhancements updates for Increments 1 and 3. 
"BLD",9383,1,2,0)
Updated VIAB WEB SERVICES OPTION to include new RPC's. Added 3 new RPC's.
"BLD",9383,4,0)
^9.64PA^^
"BLD",9383,6.3)
8
"BLD",9383,"ABPKG")
n
"BLD",9383,"KRN",0)
^9.67PA^779.2^20
"BLD",9383,"KRN",.4,0)
.4
"BLD",9383,"KRN",.401,0)
.401
"BLD",9383,"KRN",.402,0)
.402
"BLD",9383,"KRN",.403,0)
.403
"BLD",9383,"KRN",.5,0)
.5
"BLD",9383,"KRN",.84,0)
.84
"BLD",9383,"KRN",3.6,0)
3.6
"BLD",9383,"KRN",3.8,0)
3.8
"BLD",9383,"KRN",9.2,0)
9.2
"BLD",9383,"KRN",9.8,0)
9.8
"BLD",9383,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",9383,"KRN",9.8,"NM",1,0)
VIABPCE2^^0^B815065
"BLD",9383,"KRN",9.8,"NM",2,0)
VIABPCE4^^0^B25145408
"BLD",9383,"KRN",9.8,"NM",3,0)
VIABU^^0^B165382
"BLD",9383,"KRN",9.8,"NM","B","VIABPCE2",1)

"BLD",9383,"KRN",9.8,"NM","B","VIABPCE4",2)

"BLD",9383,"KRN",9.8,"NM","B","VIABU",3)

"BLD",9383,"KRN",19,0)
19
"BLD",9383,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",9383,"KRN",19,"NM",1,0)
VIAB WEB SERVICES OPTION^^0
"BLD",9383,"KRN",19,"NM","B","VIAB WEB SERVICES OPTION",1)

"BLD",9383,"KRN",19.1,0)
19.1
"BLD",9383,"KRN",101,0)
101
"BLD",9383,"KRN",409.61,0)
409.61
"BLD",9383,"KRN",771,0)
771
"BLD",9383,"KRN",779.2,0)
779.2
"BLD",9383,"KRN",870,0)
870
"BLD",9383,"KRN",8989.51,0)
8989.51
"BLD",9383,"KRN",8989.52,0)
8989.52
"BLD",9383,"KRN",8994,0)
8994
"BLD",9383,"KRN",8994,"NM",0)
^9.68A^3^3
"BLD",9383,"KRN",8994,"NM",1,0)
VIABPCE2 GET HFACTORS TYPE^^0
"BLD",9383,"KRN",8994,"NM",2,0)
VIABPCE4 LEX^^0
"BLD",9383,"KRN",8994,"NM",3,0)
VIABU EXTNAME^^0
"BLD",9383,"KRN",8994,"NM","B","VIABPCE2 GET HFACTORS TYPE",1)

"BLD",9383,"KRN",8994,"NM","B","VIABPCE4 LEX",2)

"BLD",9383,"KRN",8994,"NM","B","VIABU EXTNAME",3)

"BLD",9383,"KRN","B",.4,.4)

"BLD",9383,"KRN","B",.401,.401)

"BLD",9383,"KRN","B",.402,.402)

"BLD",9383,"KRN","B",.403,.403)

"BLD",9383,"KRN","B",.5,.5)

"BLD",9383,"KRN","B",.84,.84)

"BLD",9383,"KRN","B",3.6,3.6)

"BLD",9383,"KRN","B",3.8,3.8)

"BLD",9383,"KRN","B",9.2,9.2)

"BLD",9383,"KRN","B",9.8,9.8)

"BLD",9383,"KRN","B",19,19)

"BLD",9383,"KRN","B",19.1,19.1)

"BLD",9383,"KRN","B",101,101)

"BLD",9383,"KRN","B",409.61,409.61)

"BLD",9383,"KRN","B",771,771)

"BLD",9383,"KRN","B",779.2,779.2)

"BLD",9383,"KRN","B",870,870)

"BLD",9383,"KRN","B",8989.51,8989.51)

"BLD",9383,"KRN","B",8989.52,8989.52)

"BLD",9383,"KRN","B",8994,8994)

"BLD",9383,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",9383,"QUES",0)
^9.62^^
"BLD",9383,"REQB",0)
^9.611^3^3
"BLD",9383,"REQB",1,0)
TIU*1.0*300^2
"BLD",9383,"REQB",2,0)
OR*3.0*426^2
"BLD",9383,"REQB",3,0)
VIAB*1.0*3^2
"BLD",9383,"REQB","B","OR*3.0*426",2)

"BLD",9383,"REQB","B","TIU*1.0*300",1)

"BLD",9383,"REQB","B","VIAB*1.0*3",3)

"KRN",19,2921669,-1)
0^1
"KRN",19,2921669,0)
VIAB WEB SERVICES OPTION^VIAB Web Services Option^^B^^^^^^^^VISTA INTEGRATION ADAPTER
"KRN",19,2921669,1,0)
^19.06^3^3^3140829^^^^
"KRN",19,2921669,1,1,0)
This option is required by the Kernel Broker to give 
"KRN",19,2921669,1,2,0)
access to the RPCs used by the Vista Integration Adapter 
"KRN",19,2921669,1,3,0)
(VIA) team.
"KRN",19,2921669,99.1)
63218,50689
"KRN",19,2921669,"RPC",0)
^19.05P^128^122
"KRN",19,2921669,"RPC",1,0)
DG SENSITIVE RECORD ACCESS
"KRN",19,2921669,"RPC",2,0)
DG SENSITIVE RECORD BULLETIN
"KRN",19,2921669,"RPC",3,0)
ORPRF HASFLG
"KRN",19,2921669,"RPC",4,0)
ORQPT CLINIC PATIENTS
"KRN",19,2921669,"RPC",5,0)
ORQPT PROVIDER PATIENTS
"KRN",19,2921669,"RPC",6,0)
ORQPT SPECIALTIES
"KRN",19,2921669,"RPC",7,0)
ORQPT SPECIALTY PATIENTS
"KRN",19,2921669,"RPC",8,0)
ORQPT TEAM PATIENTS
"KRN",19,2921669,"RPC",9,0)
ORQPT TEAMS
"KRN",19,2921669,"RPC",10,0)
ORQPT WARDRMBED
"KRN",19,2921669,"RPC",11,0)
ORQPT WARDS
"KRN",19,2921669,"RPC",12,0)
ORQQCN DETAIL
"KRN",19,2921669,"RPC",13,0)
ORQQCN GET ORDER NUMBER
"KRN",19,2921669,"RPC",14,0)
ORQQCN LIST
"KRN",19,2921669,"RPC",15,0)
ORVAA VAA
"KRN",19,2921669,"RPC",16,0)
ORWCIRN FACLIST
"KRN",19,2921669,"RPC",17,0)
ORWCV DTLVST
"KRN",19,2921669,"RPC",18,0)
ORWCV VST
"KRN",19,2921669,"RPC",19,0)
ORWDX LOADRSP
"KRN",19,2921669,"RPC",20,0)
ORWDX LOCK ORDER
"KRN",19,2921669,"RPC",21,0)
ORWDX UNLOCK ORDER
"KRN",19,2921669,"RPC",22,0)
ORWDXA OFCPLX
"KRN",19,2921669,"RPC",23,0)
ORWDXC SESSION
"KRN",19,2921669,"RPC",24,0)
ORWDXM DLGNAME
"KRN",19,2921669,"RPC",25,0)
ORWDXM1 BLDQRSP
"KRN",19,2921669,"RPC",26,0)
ORWLRR ALLTESTS
"KRN",19,2921669,"RPC",27,0)
ORWLRR INFO
"KRN",19,2921669,"RPC",28,0)
ORWLRR INTERIMG
"KRN",19,2921669,"RPC",29,0)
ORWORDG MAPSEQ
"KRN",19,2921669,"RPC",30,0)
ORWORR AGET
"KRN",19,2921669,"RPC",31,0)
ORWORR GET4LST
"KRN",19,2921669,"RPC",32,0)
ORWPS ACTIVE
"KRN",19,2921669,"RPC",33,0)
ORWPS DETAIL
"KRN",19,2921669,"RPC",34,0)
ORWPT ADMITLST
"KRN",19,2921669,"RPC",35,0)
ORWPT BYWARD
"KRN",19,2921669,"RPC",36,0)
ORWPT DIEDON
"KRN",19,2921669,"RPC",37,0)
ORWPT ID INFO
"KRN",19,2921669,"RPC",38,0)
ORWPT LIST ALL
"KRN",19,2921669,"RPC",39,0)
ORWPT PTINQ
"KRN",19,2921669,"RPC",40,0)
ORWPT SELECT
"KRN",19,2921669,"RPC",41,0)
ORWPT1 PCDETAIL
"KRN",19,2921669,"RPC",42,0)
ORWPT1 PRCARE
"KRN",19,2921669,"RPC",43,0)
ORWPT16 ID INFO
"KRN",19,2921669,"RPC",44,0)
ORWRP REPORT TEXT
"KRN",19,2921669,"RPC",45,0)
ORWRP2 HS COMPONENTS
"KRN",19,2921669,"RPC",46,0)
ORWRP2 HS REPORT TEXT
"KRN",19,2921669,"RPC",47,0)
ORWSR RPTLIST
"KRN",19,2921669,"RPC",48,0)
ORWTIU CHKTXT
"KRN",19,2921669,"RPC",49,0)
ORWU CLINLOC
"KRN",19,2921669,"RPC",50,0)
ORWU DT
"KRN",19,2921669,"RPC",51,0)
ORWU NEWPERS
"KRN",19,2921669,"RPC",52,0)
ORWU USERINFO
"KRN",19,2921669,"RPC",53,0)
ORWU VALIDSIG
"KRN",19,2921669,"RPC",54,0)
ORWU1 NEWLOC
"KRN",19,2921669,"RPC",55,0)
SC GETS ENTRY DATA
"KRN",19,2921669,"RPC",56,0)
SC LISTER
"KRN",19,2921669,"RPC",57,0)
TIU AUTHORIZATION
"KRN",19,2921669,"RPC",58,0)
TIU CREATE RECORD
"KRN",19,2921669,"RPC",59,0)
TIU DOCUMENTS BY CONTEXT
"KRN",19,2921669,"RPC",60,0)
TIU GET PRF ACTIONS
"KRN",19,2921669,"RPC",61,0)
TIU GET RECORD TEXT
"KRN",19,2921669,"RPC",62,0)
TIU HAS AUTHOR SIGNED?
"KRN",19,2921669,"RPC",63,0)
TIU IS THIS A CONSULT?
"KRN",19,2921669,"RPC",64,0)
TIU IS THIS A SURGERY?
"KRN",19,2921669,"RPC",65,0)
TIU ISPRF
"KRN",19,2921669,"RPC",66,0)
TIU LOCK RECORD
"KRN",19,2921669,"RPC",67,0)
TIU LONG LIST OF TITLES
"KRN",19,2921669,"RPC",68,0)
TIU ONE VISIT NOTE?
"KRN",19,2921669,"RPC",69,0)
TIU REQUIRES COSIGNATURE
"KRN",19,2921669,"RPC",70,0)
TIU SET DOCUMENT TEXT
"KRN",19,2921669,"RPC",71,0)
TIU SIGN RECORD
"KRN",19,2921669,"RPC",72,0)
TIU UNLOCK RECORD
"KRN",19,2921669,"RPC",73,0)
TIU UPDATE RECORD
"KRN",19,2921669,"RPC",74,0)
TIU WAS THIS SAVED?
"KRN",19,2921669,"RPC",75,0)
TIU WHICH SIGNATURE ACTION
"KRN",19,2921669,"RPC",78,0)
ORQQAL LIST
"KRN",19,2921669,"RPC",79,0)
ORQQVI VITALS
"KRN",19,2921669,"RPC",80,0)
ORWDX LOCK
"KRN",19,2921669,"RPC",81,0)
ORWDX SEND
"KRN",19,2921669,"RPC",82,0)
ORWDX UNLOCK
"KRN",19,2921669,"RPC",83,0)
ORWPT FULLSSN
"KRN",19,2921669,"RPC",84,0)
ORWPT LAST5
"KRN",19,2921669,"RPC",85,0)
VAFCTFU CONVERT ICN TO DFN
"KRN",19,2921669,"RPC",86,0)
VPR GET PATIENT DATA
"KRN",19,2921669,"RPC",87,0)
ORALWORD ALLWORD
"KRN",19,2921669,"RPC",88,0)
ORCHECK GETXTRA
"KRN",19,2921669,"RPC",89,0)
ORDDPAPI CLOZMSG
"KRN",19,2921669,"RPC",90,0)
OREVNTX1 GETSTS
"KRN",19,2921669,"RPC",92,0)
ORQQCN STATUS
"KRN",19,2921669,"RPC",93,0)
ORQQCN SVC W/SYNONYMS
"KRN",19,2921669,"RPC",94,0)
ORWD1 PRINTGUI
"KRN",19,2921669,"RPC",95,0)
ORWD1 RVPRINT
"KRN",19,2921669,"RPC",96,0)
ORWD2 DEVINFO
"KRN",19,2921669,"RPC",97,0)
ORWDCN32 ORDRMSG
"KRN",19,2921669,"RPC",98,0)
ORWDPS1 FAILDEA
"KRN",19,2921669,"RPC",99,0)
ORWDPS1 ODSLCT
"KRN",19,2921669,"RPC",100,0)
ORWDPS2 DAY2QTY
"KRN",19,2921669,"RPC",101,0)
ORWDPS2 MAXREF
"KRN",19,2921669,"RPC",102,0)
ORWDPS2 QTY2DAY
"KRN",19,2921669,"RPC",103,0)
ORWDPS32 DRUGMSG
"KRN",19,2921669,"RPC",104,0)
ORWDPS32 ISSPLY
"KRN",19,2921669,"RPC",105,0)
ORWDPS32 VALQTY
"KRN",19,2921669,"RPC",106,0)
ORWDPS32 VALROUTE
"KRN",19,2921669,"RPC",107,0)
ORWDRA32 APPROVAL
"KRN",19,2921669,"RPC",108,0)
ORWDRA32 DEF
"KRN",19,2921669,"RPC",110,0)
ORWDX DGNM
"KRN",19,2921669,"RPC",111,0)
ORWDX2 DCREASON
"KRN",19,2921669,"RPC",112,0)
ORWDXA ISACTOI
"KRN",19,2921669,"RPC",113,0)
ORWDXR RNWFLDS
"KRN",19,2921669,"RPC",114,0)
ORWDXR01 CANCHG
"KRN",19,2921669,"RPC",115,0)
ORWGRPC ITEMDATA
"KRN",19,2921669,"RPC",116,0)
ORWGRPC ITEMS
"KRN",19,2921669,"RPC",117,0)
ORWOR1 GETDSCH
"KRN",19,2921669,"RPC",118,0)
ORWRP GET DEFAULT PRINTER
"KRN",19,2921669,"RPC",120,0)
ORWTPD GETDFLT
"KRN",19,2921669,"RPC",121,0)
TIU DETAILED DISPLAY
"KRN",19,2921669,"RPC",125,0)
VIABPCE2 GET HFACTORS TYPE
"KRN",19,2921669,"RPC",126,0)
VIABPCE4 LEX
"KRN",19,2921669,"RPC",127,0)
VIABU EXTNAME
"KRN",19,2921669,"RPC",128,0)
TIU SET ADMINISTRATIVE CLOSURE
"KRN",19,2921669,"U")
VIAB WEB SERVICES OPTION
"KRN",8994,3559,-1)
0^1
"KRN",8994,3559,0)
VIABPCE2 GET HFACTORS TYPE^HFTYPE^VIABPCE2^2^^^^^^^1
"KRN",8994,3559,1,0)
^8994.01^1^1^3151204^
"KRN",8994,3559,1,1,0)
Returns a list of active health factor types.
"KRN",8994,3560,-1)
0^2
"KRN",8994,3560,0)
VIABPCE4 LEX^LEX^VIABPCE4^2^^^^^^^1
"KRN",8994,3560,1,0)
^^1^1^3151204^
"KRN",8994,3560,1,1,0)
Returns list of coded elements based on lexicon look-up.
"KRN",8994,3561,-1)
0^3
"KRN",8994,3561,0)
VIABU EXTNAME^EXTNAME^VIABU^1^^^^^^^1
"KRN",8994,3561,1,0)
^^2^2^3151204^
"KRN",8994,3561,1,1,0)
Returns the external form of a pointer value given the IEN and file
"KRN",8994,3561,1,2,0)
number.
"MBREQ")
0
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",656,-1)
1^1
"PKG",656,0)
VISTA INTEGRATION ADAPTER^VIAB^VIAB APP
"PKG",656,20,0)
^9.402P^^
"PKG",656,22,0)
^9.49I^1^1
"PKG",656,22,1,0)
1.0
"PKG",656,22,1,"PAH",1,0)
5^3160212
"PKG",656,22,1,"PAH",1,1,0)
^^2^2^3160212
"PKG",656,22,1,"PAH",1,1,1,0)
Vista Integration Adapter enhancements updates for Increments 1 and 3. 
"PKG",656,22,1,"PAH",1,1,2,0)
Updated VIAB WEB SERVICES OPTION to include new RPC's. Added 3 new RPC's.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","VIABPCE2")
0^1^B815065^n/a
"RTN","VIABPCE2",1,0)
VIABPCE2 ;AITC/BWF - wrap calls to PCE ;2/12/16  15:13
"RTN","VIABPCE2",2,0)
 ;;1.0;VISTA INTEGRATION ADAPTER;**5**;06-FEB-2014;Build 8
"RTN","VIABPCE2",3,0)
 Q
"RTN","VIABPCE2",4,0)
HFTYPE(VIALST,ADDCATS) ;get the list of active  health factors
"RTN","VIABPCE2",5,0)
 N IEN,CNT,BINDEX,REC
"RTN","VIABPCE2",6,0)
 S (CNT,BINDEX)=0,ADDCATS=+$G(ADDCATS)
"RTN","VIABPCE2",7,0)
 F  S BINDEX=$O(^AUTTHF("B",BINDEX)) Q:BINDEX']""  D
"RTN","VIABPCE2",8,0)
 .S IEN=0 F  S IEN=$O(^AUTTHF("B",BINDEX,IEN)) Q:'+IEN  D
"RTN","VIABPCE2",9,0)
 ..S REC=$G(^AUTTHF(IEN,0))
"RTN","VIABPCE2",10,0)
 ..I +$P(REC,U,11) S REC=""
"RTN","VIABPCE2",11,0)
 ..I 'ADDCATS,$P(REC,U,10)="C" S REC=""
"RTN","VIABPCE2",12,0)
 ..I REC'="" D
"RTN","VIABPCE2",13,0)
 ...S CNT=CNT+1,VIALST(CNT)=IEN_U_$P(REC,U)
"RTN","VIABPCE2",14,0)
 ...I ADDCATS S VIALST(CNT)=VIALST(CNT)_U_$P(REC,U,10)_U_$P(REC,U,3)
"RTN","VIABPCE2",15,0)
 Q
"RTN","VIABPCE4")
0^2^B25145408^n/a
"RTN","VIABPCE4",1,0)
VIABPCE4 ;AITC/BWF - wrap calls to PCE and AICS ;2/12/16  15:13
"RTN","VIABPCE4",2,0)
 ;;1.0;VISTA INTEGRATION ADAPTER;**5**;06-FEB-2014;Build 8
"RTN","VIABPCE4",3,0)
 ;
"RTN","VIABPCE4",4,0)
 ; DBIA 2950   LOOK^LEXA          ^TMP("LEXFND",$J)
"RTN","VIABPCE4",5,0)
 ; DBIA 1609   CONFIG^LEXSET      ^TMP("LEXSCH",$J)
"RTN","VIABPCE4",6,0)
 ; DBIA 3991   $$STATCHK^ICDAPIU
"RTN","VIABPCE4",7,0)
 ;
"RTN","VIABPCE4",8,0)
 ; This is a clone of ORWPCE4.
"RTN","VIABPCE4",9,0)
 Q
"RTN","VIABPCE4",10,0)
LEX(LST,X,APP,VIADATE,VIAXTND,VIAINSYN) ; return list after lexicon lookup
"RTN","VIABPCE4",11,0)
 ; Call with: X           (Required) The search text entered by the user
"RTN","VIABPCE4",12,0)
 ;            APP         (Required) The Lexicon APP parameter (e.g., "GMPX"
"RTN","VIABPCE4",13,0)
 ;                                   for Problem List Subset, "10D" for ICD-10-CM, etc.
"RTN","VIABPCE4",14,0)
 ;            [VIADATE]    (Optional) the date of interest (Defaults to TODAY - should
"RTN","VIABPCE4",15,0)
 ;                                   be passed as DATE OF SERVICE if not TODAY)
"RTN","VIABPCE4",16,0)
 ;            [VIAXTND]    (Optional) Boolean flag specifying whether or not to
"RTN","VIABPCE4",17,0)
 ;                                   use an extended search (Initial search is PL Subset
"RTN","VIABPCE4",18,0)
 ;                                   of SCT, extended search is ICD (or 10D after impl.)
"RTN","VIABPCE4",19,0)
 ;                                   (Defaults to 0 (FALSE))
"RTN","VIABPCE4",20,0)
 ;            [VIAINSYN]  (Optional) Boolean flag specifying whether or not to
"RTN","VIABPCE4",21,0)
 ;                                   include synonyms for SNOMED CT Concepts
"RTN","VIABPCE4",22,0)
 ;                                   (Defaults to 0 (FALSE))
"RTN","VIABPCE4",23,0)
 ;
"RTN","VIABPCE4",24,0)
 ;   Returns: LST=local array name passed by ref, which contains search result set as:
"RTN","VIABPCE4",25,0)
 ;            <lvn>(1..n)=LEXIEN^PREFTEXT^CODESYS^CONCEPTID^ICDVER^DESIGID^PARENTSUBSCRIPT
"RTN","VIABPCE4",26,0)
 ;
"RTN","VIABPCE4",27,0)
 N LEX,ILST,I,IEN,IMPLDT,SUBSET,FILTER
"RTN","VIABPCE4",28,0)
 S FILTER=""
"RTN","VIABPCE4",29,0)
 S IMPLDT=$$IMPDATE^LEXU("10D")
"RTN","VIABPCE4",30,0)
 S:APP="CPT" APP="CHP" ; LEX PATCH 10
"RTN","VIABPCE4",31,0)
 I APP="ICD",'+$G(VIAXTND) S APP=$S($E(X,1,3)?.1A2.3N:"ICD",1:"GMPX")
"RTN","VIABPCE4",32,0)
 S:'+$G(VIADATE) VIADATE=DT
"RTN","VIABPCE4",33,0)
 S VIAINSYN=+$G(VIAINSYN)
"RTN","VIABPCE4",34,0)
 I APP="ICD",(VIADATE'<IMPLDT) S APP="10D"
"RTN","VIABPCE4",35,0)
 S SUBSET=$S(APP="GMPX":$S(VIADATE<IMPLDT:"PLS",1:"CLF"),1:APP)
"RTN","VIABPCE4",36,0)
 ; call CONFIG^LEXSET to set-up the constraints of the Lexicon search
"RTN","VIABPCE4",37,0)
 D CONFIG^LEXSET(APP,SUBSET,VIADATE)  ;DBIA 1609
"RTN","VIABPCE4",38,0)
 I APP="CHP" D
"RTN","VIABPCE4",39,0)
 . ; Set the filter for CPT only using CS APIs - format is the same as for DIC("S")
"RTN","VIABPCE4",40,0)
 . S ^TMP("LEXSCH",$J,"FIL",0)="I $L($$CPTONE^LEXU(+Y,$G(VIADATE)))!($L($$CPCONE^LEXU(+Y,$G(VIADATE))))"  ;DBIA 1609
"RTN","VIABPCE4",41,0)
 . ; Set Applications Default Flag (Lexicon can not overwrite filter)
"RTN","VIABPCE4",42,0)
 . S ^TMP("LEXSCH",$J,"ADF",0)=1
"RTN","VIABPCE4",43,0)
 ; setup and/or search
"RTN","VIABPCE4",44,0)
 S X=$$UP^XLFSTR(X)
"RTN","VIABPCE4",45,0)
 ; execute the search
"RTN","VIABPCE4",46,0)
 D SRCH(.LST,X,APP,SUBSET,VIADATE,VIAINSYN)
"RTN","VIABPCE4",47,0)
LEXX K ^TMP("LEXFND",$J),^TMP("LEXHIT",$J),^TMP("LEXSCH",$J),^TMP("LEXLE",$J)
"RTN","VIABPCE4",48,0)
 Q
"RTN","VIABPCE4",49,0)
SRCH(LST,X,APP,SUBSET,VIADATE,VIAINSYN) ; call LOOK^LEXA to execute the search
"RTN","VIABPCE4",50,0)
 N LEX,I,IEN,ILST
"RTN","VIABPCE4",51,0)
 D LOOK^LEXA(X,APP,1,SUBSET,VIADATE)
"RTN","VIABPCE4",52,0)
 I '$D(LEX("LIST",1)) D  G LEXX
"RTN","VIABPCE4",53,0)
 . S LST(1)="-1^No matches found.^"_APP
"RTN","VIABPCE4",54,0)
 S ILST=0
"RTN","VIABPCE4",55,0)
 S LEX("LIST",1)=$$LEXXFRM(LEX("LIST",1),VIADATE,APP)
"RTN","VIABPCE4",56,0)
 I $S(APP="GMPX":1,APP="ICD":1,1:0),($P(LEX("LIST",1),U,6)'="799.9") D  I 1
"RTN","VIABPCE4",57,0)
 . I APP="ICD",($E($P(LEX("LIST",1),U,3),1,3)'="ICD") Q
"RTN","VIABPCE4",58,0)
 . S LST(1)=LEX("LIST",1),ILST=1
"RTN","VIABPCE4",59,0)
 E  S LST(1)=LEX("LIST",1),ILST=1
"RTN","VIABPCE4",60,0)
 I APP="GMPX",+$G(VIAINSYN) D SYNONYMS(.LST,.ILST,"SCT",$P(LST(1),U,4),VIADATE)
"RTN","VIABPCE4",61,0)
 S (I,IEN)=""
"RTN","VIABPCE4",62,0)
 F  S I=$O(^TMP("LEXFND",$J,I)) Q:I=""  D  ;DBIA 2950
"RTN","VIABPCE4",63,0)
 .F  S IEN=$O(^TMP("LEXFND",$J,I,IEN)) Q:IEN=""  D
"RTN","VIABPCE4",64,0)
 ..N TXT,ELEMENT S TXT=^TMP("LEXFND",$J,I,IEN)
"RTN","VIABPCE4",65,0)
 ..S ELEMENT=IEN_U_TXT
"RTN","VIABPCE4",66,0)
 ..S ELEMENT=$$LEXXFRM(ELEMENT,VIADATE,APP) Q:$S(APP="GMPX":1,APP="ICD":1,1:0)&($P(ELEMENT,U,6)="799.9")
"RTN","VIABPCE4",67,0)
 ..I APP="ICD",($E($P(ELEMENT,U,3),1,3)'="ICD") Q
"RTN","VIABPCE4",68,0)
 ..S ILST=ILST+1,LST(ILST)=ELEMENT
"RTN","VIABPCE4",69,0)
 ..I APP="GMPX",+$G(VIAINSYN) D SYNONYMS(.LST,.ILST,"SCT",$P(LST(ILST),U,4),VIADATE)
"RTN","VIABPCE4",70,0)
 I '$D(LST(1)) S LST(1)="-1^No matches found.^"_APP
"RTN","VIABPCE4",71,0)
 Q
"RTN","VIABPCE4",72,0)
LEXXFRM(VIAX,VIADATE,VIAAPP) ; Transform text for SCT look-up
"RTN","VIABPCE4",73,0)
 N VIALEX,VIAY,VIAICD,VIASCT,VIATXT,VIACSYS,VIACCODE,VIADCODE
"RTN","VIABPCE4",74,0)
 S VIALEX=$P(VIAX,U),VIATXT=$P(VIAX,U,2),(VIACCODE,VIACSYS)=""
"RTN","VIABPCE4",75,0)
 I (VIATXT["("),(VIATXT[")") D
"RTN","VIABPCE4",76,0)
 . S VIACSYS=$RE($P($P($RE(VIATXT),"("),")",2))
"RTN","VIABPCE4",77,0)
 . S VIACCODE=$RE($P($RE(VIACSYS)," ")),VIACSYS=$RE($P($RE(VIACSYS)," ",2,99))
"RTN","VIABPCE4",78,0)
 . S VIATXT=$$TRIM^XLFSTR($RE($P($RE(VIATXT),"(",2,99)))
"RTN","VIABPCE4",79,0)
 S VIAY=$$SETELEM(VIALEX,VIATXT,VIACSYS,VIACCODE,VIADATE)
"RTN","VIABPCE4",80,0)
 Q VIAY
"RTN","VIABPCE4",81,0)
SYNONYMS(LST,ILST,VIACSYS,VIACCODE,VIADT) ; Get synonyms fVIA expression
"RTN","VIABPCE4",82,0)
 N VIASYN,VIAI,VIADAD S VIADT=$G(VIADT,DT),VIADAD=ILST
"RTN","VIABPCE4",83,0)
 D GETSYN^LEXTRAN1(VIACSYS,VIACCODE,VIADT,"VIASYN",1)
"RTN","VIABPCE4",84,0)
 S VIAI=0 F  S VIAI=$O(VIASYN("S",VIAI)) Q:+VIAI'>0  D
"RTN","VIABPCE4",85,0)
 . N ELEMENT,TXT,IEN,VIADCODE
"RTN","VIABPCE4",86,0)
 . S IEN=$P(VIASYN("S",VIAI),U,2),TXT=$P(VIASYN("S",VIAI),U)
"RTN","VIABPCE4",87,0)
 . S ELEMENT=$$SETELEM(IEN,TXT,"SNOMED CT",VIACCODE,VIADT)_U_VIADAD
"RTN","VIABPCE4",88,0)
 . S ILST=ILST+1,LST(ILST)=ELEMENT
"RTN","VIABPCE4",89,0)
 Q
"RTN","VIABPCE4",90,0)
SETELEM(VIALEX,VIATXT,VIACSYS,VIACCODE,VIADATE) ; Set List Element
"RTN","VIABPCE4",91,0)
 ;LEXIEN^PREFTEXT^CODESYS^CONCEPTID^ICDVER^ICDCODE^DESIGID^PARENTSUBSCRIPT
"RTN","VIABPCE4",92,0)
 N VIAY,VIADCODE,VIAIMPDT,VIAICD
"RTN","VIABPCE4",93,0)
 S VIAIMPDT=$$IMPDATE^LEXU("10D")
"RTN","VIABPCE4",94,0)
 S VIAY=VIALEX_U_VIATXT_U_VIACSYS_U_VIACCODE
"RTN","VIABPCE4",95,0)
 I $S(VIACSYS["SNOMED":1,VIACSYS["VHAT":1,1:0) D
"RTN","VIABPCE4",96,0)
 .S VIAY=VIAY_U_$S(VIADATE<VIAIMPDT:"ICD-9-CM",1:""),VIAICD=""
"RTN","VIABPCE4",97,0)
 .S:VIADATE<VIAIMPDT VIAICD=$$GETDX(VIACCODE,VIACSYS,VIADATE)
"RTN","VIABPCE4",98,0)
 .S VIADCODE=$$GETDES^LEXTRAN1("SCT",VIATXT,VIADATE)
"RTN","VIABPCE4",99,0)
 .S VIADCODE=$S(+VIADCODE=1:$P(VIADCODE,U,2),1:"")
"RTN","VIABPCE4",100,0)
 .S VIAY=VIAY_U_VIAICD_U_VIADCODE
"RTN","VIABPCE4",101,0)
 E  S VIAY=VIAY_U_U
"RTN","VIABPCE4",102,0)
 Q VIAY
"RTN","VIABPCE4",103,0)
GETDX(CODE,SYS,VIAIDT) ; Get ICD associated with SNOMED CT VIA VHAT Code
"RTN","VIABPCE4",104,0)
 N LEX,VIAI,VIAY,VIAUH,IMPLDT,VIASYSPR
"RTN","VIABPCE4",105,0)
 S VIAIDT=$G(VIAIDT,DT)
"RTN","VIABPCE4",106,0)
 S VIAY=0,IMPLDT=$$IMPDATE^LEXU("10D")
"RTN","VIABPCE4",107,0)
 S VIAUH=$S(VIAIDT<IMPLDT:"799.9",1:"R69.")
"RTN","VIABPCE4",108,0)
 S VIASYSPR=$S(VIAIDT<IMPLDT:1,1:30)
"RTN","VIABPCE4",109,0)
 I SYS["VHAT" D  I 1
"RTN","VIABPCE4",110,0)
 . I VIAIDT<IMPLDT S VIAY=$$GETASSN^LEXTRAN1(CODE,"VHAT2ICD") I 1
"RTN","VIABPCE4",111,0)
 . E  S VIAY=0
"RTN","VIABPCE4",112,0)
 E  D
"RTN","VIABPCE4",113,0)
 . I VIAIDT<IMPLDT S VIAY=$$GETASSN^LEXTRAN1(CODE,"SCT2ICD") I 1
"RTN","VIABPCE4",114,0)
 . E  S VIAY=0
"RTN","VIABPCE4",115,0)
 I $S(+VIAY'>0:1,+$P(VIAY,U,2)'>0:1,+LEX'>0:1,1:0) S VIAY=VIAUH G GETDXX
"RTN","VIABPCE4",116,0)
 S VIAI=0,VIAY=""
"RTN","VIABPCE4",117,0)
 F  S VIAI=$O(LEX(VIAI)) Q:+VIAI'>0  D
"RTN","VIABPCE4",118,0)
 . N ICD
"RTN","VIABPCE4",119,0)
 . S ICD=$O(LEX(VIAI,""))
"RTN","VIABPCE4",120,0)
 . S:'+$$STATCHK^ICDXCODE(VIASYSPR,ICD,VIAIDT) ICD=""
"RTN","VIABPCE4",121,0)
 . I ICD]"" S VIAY=$S(VIAY'="":VIAY_"/",1:"")_ICD
"RTN","VIABPCE4",122,0)
 I (VIAY]""),(VIAY'[".") S VIAY=VIAY_"."
"RTN","VIABPCE4",123,0)
GETDXX Q VIAY
"RTN","VIABU")
0^3^B165382^n/a
"RTN","VIABU",1,0)
VIABU ;AITC/BWF - General Utilites for Windows Calls;2/12/16  15:15
"RTN","VIABU",2,0)
 ;;1.0;VISTA INTEGRATION ADAPTER;**5**;06-FEB-2014;Build 8
"RTN","VIABU",3,0)
 ;
"RTN","VIABU",4,0)
EXTNAME(VAL,IEN,FN) ; return external form of pointer
"RTN","VIABU",5,0)
 ; IEN=internal number, FN=file number
"RTN","VIABU",6,0)
 N REF S REF=$G(^DIC(FN,0,"GL")),VAL=""
"RTN","VIABU",7,0)
 I $L(REF),+IEN S VAL=$P($G(@(REF_IEN_",0)")),U)
"RTN","VIABU",8,0)
 Q
"VER")
8.0^22.0
"BLD",9383,6)
^6
**END**
**END**

