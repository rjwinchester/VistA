Released MPIF*1*71 SEQ #68
Extracted from mail message
**KIDS**:MPIF*1.0*71^

**INSTALL NAME**
MPIF*1.0*71
"BLD",3406,0)
MPIF*1.0*71^MASTER PATIENT INDEX VISTA^0^3190909^y
"BLD",3406,1,0)
^^3^3^3190826^
"BLD",3406,1,1,0)
MASTER VETERAN INDEX VISTA ENHANCEMENTS - EHRM SUPPORT
"BLD",3406,1,2,0)
Refer to patch MPIF*1.0*71 in the FORUM Patch Module for a complete
"BLD",3406,1,3,0)
description.
"BLD",3406,4,0)
^9.64PA^^
"BLD",3406,6.3)
2
"BLD",3406,"KRN",0)
^9.67PA^1.5^24
"BLD",3406,"KRN",.4,0)
.4
"BLD",3406,"KRN",.401,0)
.401
"BLD",3406,"KRN",.402,0)
.402
"BLD",3406,"KRN",.403,0)
.403
"BLD",3406,"KRN",.5,0)
.5
"BLD",3406,"KRN",.84,0)
.84
"BLD",3406,"KRN",1.5,0)
1.5
"BLD",3406,"KRN",1.6,0)
1.6
"BLD",3406,"KRN",1.61,0)
1.61
"BLD",3406,"KRN",1.62,0)
1.62
"BLD",3406,"KRN",3.6,0)
3.6
"BLD",3406,"KRN",3.8,0)
3.8
"BLD",3406,"KRN",9.2,0)
9.2
"BLD",3406,"KRN",9.8,0)
9.8
"BLD",3406,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",3406,"KRN",9.8,"NM",1,0)
MPIFXMLI^^0^B41378999
"BLD",3406,"KRN",9.8,"NM","B","MPIFXMLI",1)

"BLD",3406,"KRN",19,0)
19
"BLD",3406,"KRN",19.1,0)
19.1
"BLD",3406,"KRN",101,0)
101
"BLD",3406,"KRN",409.61,0)
409.61
"BLD",3406,"KRN",771,0)
771
"BLD",3406,"KRN",779.2,0)
779.2
"BLD",3406,"KRN",870,0)
870
"BLD",3406,"KRN",8989.51,0)
8989.51
"BLD",3406,"KRN",8989.52,0)
8989.52
"BLD",3406,"KRN",8994,0)
8994
"BLD",3406,"KRN","B",.4,.4)

"BLD",3406,"KRN","B",.401,.401)

"BLD",3406,"KRN","B",.402,.402)

"BLD",3406,"KRN","B",.403,.403)

"BLD",3406,"KRN","B",.5,.5)

"BLD",3406,"KRN","B",.84,.84)

"BLD",3406,"KRN","B",1.5,1.5)

"BLD",3406,"KRN","B",1.6,1.6)

"BLD",3406,"KRN","B",1.61,1.61)

"BLD",3406,"KRN","B",1.62,1.62)

"BLD",3406,"KRN","B",3.6,3.6)

"BLD",3406,"KRN","B",3.8,3.8)

"BLD",3406,"KRN","B",9.2,9.2)

"BLD",3406,"KRN","B",9.8,9.8)

"BLD",3406,"KRN","B",19,19)

"BLD",3406,"KRN","B",19.1,19.1)

"BLD",3406,"KRN","B",101,101)

"BLD",3406,"KRN","B",409.61,409.61)

"BLD",3406,"KRN","B",771,771)

"BLD",3406,"KRN","B",779.2,779.2)

"BLD",3406,"KRN","B",870,870)

"BLD",3406,"KRN","B",8989.51,8989.51)

"BLD",3406,"KRN","B",8989.52,8989.52)

"BLD",3406,"KRN","B",8994,8994)

"BLD",3406,"QDEF")
^^^^NO^^^^NO^^YES
"BLD",3406,"QUES",0)
^9.62^^
"BLD",3406,"REQB",0)
^9.611^2^2
"BLD",3406,"REQB",1,0)
MPIF*1.0*61^2
"BLD",3406,"REQB",2,0)
DG*5.3*981^2
"BLD",3406,"REQB","B","DG*5.3*981",2)

"BLD",3406,"REQB","B","MPIF*1.0*61",1)

"MBREQ")
0
"PKG",282,-1)
1^1
"PKG",282,0)
MASTER PATIENT INDEX VISTA^MPIF^Master Patient Index VistA side
"PKG",282,22,0)
^9.49I^1^1
"PKG",282,22,1,0)
1.0^2990428
"PKG",282,22,1,"PAH",1,0)
71^3190909
"PKG",282,22,1,"PAH",1,1,0)
^^3^3^3190909
"PKG",282,22,1,"PAH",1,1,1,0)
MASTER VETERAN INDEX VISTA ENHANCEMENTS - EHRM SUPPORT
"PKG",282,22,1,"PAH",1,1,2,0)
Refer to patch MPIF*1.0*71 in the FORUM Patch Module for a complete
"PKG",282,22,1,"PAH",1,1,3,0)
description.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","MPIFXMLI")
0^1^B41378999^B39708353
"RTN","MPIFXMLI",1,0)
MPIFXMLI ;ALB/CKN - MPIF IMPLICIT/EXPLICIT ADD ; 9/6/19 5:05pm
"RTN","MPIFXMLI",2,0)
 ;;1.0;MASTER PATIENT INDEX VISTA;**61,71**;30 Apr 99;Build 2
"RTN","MPIFXMLI",3,0)
 Q
"RTN","MPIFXMLI",4,0)
GETICN(MPIDATA,MPIARR) ; Explicit add for user traits - ICN is returned
"RTN","MPIFXMLI",5,0)
 N MPIXML,MPIXMLR
"RTN","MPIFXMLI",6,0)
 K MPIDATA
"RTN","MPIFXMLI",7,0)
 S MPIXML=$$XMLBLD(.MPIARR)
"RTN","MPIFXMLI",8,0)
 D POST^MPIFHWSC(MPIXML,.MPIXMLR)
"RTN","MPIFXMLI",9,0)
 I '$D(MPIXMLR) S MPIDATA("ICN")=-1,MPIDATA("ERRTXT")="No results returned" Q
"RTN","MPIFXMLI",10,0)
 D PARSE(.MPIDATA,.MPIXMLR)
"RTN","MPIFXMLI",11,0)
 Q
"RTN","MPIFXMLI",12,0)
 ;
"RTN","MPIFXMLI",13,0)
XMLBLD(MPIARR) ; setup xml for explicit Add
"RTN","MPIFXMLI",14,0)
 ; MPIARR - Array contains traits for ADD
"RTN","MPIFXMLI",15,0)
 ;    Returns XML for explicit ADD
"RTN","MPIFXMLI",16,0)
 N MPIXML,MPISITE,QUOTE,MPITHRES,MPIDT,MPIDUZ,MPIPRID,ADDTYPE,PATARR
"RTN","MPIFXMLI",17,0)
 S QUOTE="""",ADDTYPE=$S(MPIARR("AddType")="Explicit":"ADD ICN OVERRIDE",1:"ADD ICN") ;Setting add type on implicit or explicit flag
"RTN","MPIFXMLI",18,0)
 M PATARR=MPIARR(1)
"RTN","MPIFXMLI",19,0)
 S MPISITE=$P($$SITE^VASITE,"^",3)
"RTN","MPIFXMLI",20,0)
 S MPIPRID=$P($$PARAM^HLCS2,"^",3)
"RTN","MPIFXMLI",21,0)
 S MPIDT=$$FMTHL7^XLFDT($$NOW^XLFDT)
"RTN","MPIFXMLI",22,0)
 S MPIDUZ=$P(^VA(200,DUZ,0),"^") D STDNAME^XLFNAME(.MPIDUZ,"C")
"RTN","MPIFXMLI",23,0)
 S MPITHRES=80
"RTN","MPIFXMLI",24,0)
 ;
"RTN","MPIFXMLI",25,0)
 S MPIXML="<IDM_REQUEST type="_QUOTE_"ADD_PROFILE"_QUOTE_"><METADATA>"
"RTN","MPIFXMLI",26,0)
 S MPIXML=MPIXML_"<FIELD name="_QUOTE_"PROCESSINGID"_QUOTE_" value="
"RTN","MPIFXMLI",27,0)
 S MPIXML=MPIXML_QUOTE_MPIPRID_QUOTE_"/><FIELD name="_QUOTE_"SENDINGFACILITY"
"RTN","MPIFXMLI",28,0)
 S MPIXML=MPIXML_QUOTE_" value="_QUOTE_MPISITE_QUOTE_"/><FIELD name="_QUOTE
"RTN","MPIFXMLI",29,0)
 S MPIXML=MPIXML_"SENDINGAPPLICATIONNAME"_QUOTE_" value="_QUOTE_"VistAEnterpriseReg"_QUOTE
"RTN","MPIFXMLI",30,0)
 I $G(MPIARR("mcid"))'="" D
"RTN","MPIFXMLI",31,0)
 .S MPIXML=MPIXML_"/><FIELD name="_QUOTE_"attentionLine"_QUOTE
"RTN","MPIFXMLI",32,0)
 .S MPIXML=MPIXML_" value="_QUOTE_MPIARR("mcid")_QUOTE ;search token
"RTN","MPIFXMLI",33,0)
 ;**71 - Story 841885 (ckn)
"RTN","MPIFXMLI",34,0)
 S MPIXML=MPIXML_"/><FIELD name="_QUOTE_"selectedIdentifier"_QUOTE
"RTN","MPIFXMLI",35,0)
 S MPIXML=MPIXML_" value="_QUOTE_$G(MPIARR("SelIdentifier"))_QUOTE
"RTN","MPIFXMLI",36,0)
 S MPIXML=MPIXML_"/></METADATA><IDMHEADER><SENDING_FACILITY>"_MPISITE
"RTN","MPIFXMLI",37,0)
 S MPIXML=MPIXML_"</SENDING_FACILITY><PROCESSING_ID>"_MPIPRID_"</PROCESSING_ID>"
"RTN","MPIFXMLI",38,0)
 S MPIXML=MPIXML_"<TRIGGER><ACTOR>"
"RTN","MPIFXMLI",39,0)
 S MPIXML=MPIXML_"<IDENTIFIER type='PN'><ID>"_DUZ_"</ID><SOURCE>"_MPISITE_"</SOURCE>"
"RTN","MPIFXMLI",40,0)
 S MPIXML=MPIXML_"<ISSUER>USVHA</ISSUER></IDENTIFIER><NAME type='U'>"
"RTN","MPIFXMLI",41,0)
 S MPIXML=MPIXML_"<LASTNAME>"_$G(MPIDUZ("FAMILY"))_"</LASTNAME>"
"RTN","MPIFXMLI",42,0)
 S MPIXML=MPIXML_"<FIRSTNAME>"_$G(MPIDUZ("GIVEN"))_"</FIRSTNAME>"
"RTN","MPIFXMLI",43,0)
 S MPIXML=MPIXML_"</NAME></ACTOR></TRIGGER></IDMHEADER><ARGUMENTS>"
"RTN","MPIFXMLI",44,0)
 S MPIXML=MPIXML_"<ARGUMENT name="_QUOTE_"ACTIVEPROFILE"_QUOTE_"><PROFILE>"
"RTN","MPIFXMLI",45,0)
 ;Name Traits
"RTN","MPIFXMLI",46,0)
 S MPIXML=MPIXML_"<NAME type="_QUOTE_"L"_QUOTE_">"
"RTN","MPIFXMLI",47,0)
 D IFADD("FirstName",.PATARR,.MPIXML,"FIRSTNAME")
"RTN","MPIFXMLI",48,0)
 D IFADD("MiddleName",.PATARR,.MPIXML,"MIDDLENAME")
"RTN","MPIFXMLI",49,0)
 D IFADD("Suffix",.PATARR,.MPIXML,"SUFFIX")
"RTN","MPIFXMLI",50,0)
 D IFADD("Surname",.PATARR,.MPIXML,"LASTNAME")
"RTN","MPIFXMLI",51,0)
 S MPIXML=MPIXML_"</NAME>"
"RTN","MPIFXMLI",52,0)
 ;Source ID
"RTN","MPIFXMLI",53,0)
 S MPIXML=MPIXML_"<IDENTIFIER type='PI'><ID>"_$G(PATARR("DFN"))_"</ID>"
"RTN","MPIFXMLI",54,0)
 S MPIXML=MPIXML_"<SOURCE>"_MPISITE_"</SOURCE><ISSUER>USVHA</ISSUER></IDENTIFIER>"
"RTN","MPIFXMLI",55,0)
 I $G(PATARR("SSN"))'="" D
"RTN","MPIFXMLI",56,0)
 .S MPIXML=MPIXML_"<IDENTIFIER type='SS' subtype='ACTIVE'>"
"RTN","MPIFXMLI",57,0)
 .S MPIXML=MPIXML_"<ID>"_PATARR("SSN")_"</ID>"
"RTN","MPIFXMLI",58,0)
 .S MPIXML=MPIXML_"<ISSUER>USSSA</ISSUER></IDENTIFIER>"
"RTN","MPIFXMLI",59,0)
 I $G(PATARR("DOB"))'="" D
"RTN","MPIFXMLI",60,0)
 .S MPIXML=MPIXML_"<ATTRIBUTE type='DOB'><VALUE>"_$$FMTHL7^XLFDT(PATARR("DOB"))
"RTN","MPIFXMLI",61,0)
 .S MPIXML=MPIXML_"</VALUE></ATTRIBUTE>"
"RTN","MPIFXMLI",62,0)
 I $G(PATARR("Gender"))'="" D
"RTN","MPIFXMLI",63,0)
 .S MPIXML=MPIXML_"<ATTRIBUTE type='GENDER'><VALUE>"
"RTN","MPIFXMLI",64,0)
 .S MPIXML=MPIXML_PATARR("Gender")_"</VALUE></ATTRIBUTE>"
"RTN","MPIFXMLI",65,0)
 I $G(PATARR("MMN"))'="" D
"RTN","MPIFXMLI",66,0)
 . S MPIXML=MPIXML_"<ATTRIBUTE type='MMN'>"
"RTN","MPIFXMLI",67,0)
 . S MPIXML=MPIXML_"<VALUE>"_PATARR("MMN")_"</VALUE></ATTRIBUTE>"
"RTN","MPIFXMLI",68,0)
 I $G(PATARR("MBI"))'="" D
"RTN","MPIFXMLI",69,0)
 . S MPIXML=MPIXML_"<ATTRIBUTE type='MULTIBIRTH'>"
"RTN","MPIFXMLI",70,0)
 . S MPIXML=MPIXML_"<VALUE>"_PATARR("MBI")_"</VALUE></ATTRIBUTE>"
"RTN","MPIFXMLI",71,0)
 ;POB stuff
"RTN","MPIFXMLI",72,0)
 S PATARR("MPIVar")=$$CONV($G(PATARR("POBCity")))
"RTN","MPIFXMLI",73,0)
 I PATARR("MPIVar")'=""!($G(PATARR("POBState"))'="") D
"RTN","MPIFXMLI",74,0)
 . S MPIXML=MPIXML_"<ADDRESS type='N'>"
"RTN","MPIFXMLI",75,0)
 . D IFADD("MPIVar",.PATARR,.MPIXML,"CITY")
"RTN","MPIFXMLI",76,0)
 . D IFADD("POBState",.PATARR,.MPIXML,"STATE")
"RTN","MPIFXMLI",77,0)
 . S MPIXML=MPIXML_"</ADDRESS>"
"RTN","MPIFXMLI",78,0)
 ;address stuff
"RTN","MPIFXMLI",79,0)
 N PROVINCE,PCODE
"RTN","MPIFXMLI",80,0)
 S PROVINCE=$G(PATARR("ResAddProvince")),PCODE=$G(PATARR("ResAddPCode"))
"RTN","MPIFXMLI",81,0)
 I $G(PATARR("ResAddL1"))'=""!($G(PATARR("ResAddL2"))'="")!($G(PATARR("ResAddCity"))'="")!($G(PATARR("ResAddZip4"))'="")!($G(PATARR("ResAddL3"))'="")!($G(PATARR("ResAddState"))'="")!(PROVINCE'="")!(PCODE'="") D
"RTN","MPIFXMLI",82,0)
 . S MPIXML=MPIXML_"<ADDRESS type='P'>"
"RTN","MPIFXMLI",83,0)
 . S PATARR("MPIVar")=$$CONV($G(PATARR("ResAddL1")))
"RTN","MPIFXMLI",84,0)
 . D IFADD("MPIVar",.PATARR,.MPIXML,"STREET1")
"RTN","MPIFXMLI",85,0)
 . S PATARR("MPIVar")=$$CONV($G(PATARR("ResAddL2")))
"RTN","MPIFXMLI",86,0)
 . D IFADD("MPIVar",.PATARR,.MPIXML,"STREET2")
"RTN","MPIFXMLI",87,0)
 . S PATARR("MPIVar")=$$CONV($G(PATARR("ResAddL3")))
"RTN","MPIFXMLI",88,0)
 . D IFADD("MPIVar",.PATARR,.MPIXML,"STREET3")
"RTN","MPIFXMLI",89,0)
 . S PATARR("MPIVar")=$$CONV($G(PATARR("ResAddCity")))
"RTN","MPIFXMLI",90,0)
 . D IFADD("MPIVar",.PATARR,.MPIXML,"CITY")
"RTN","MPIFXMLI",91,0)
 . D IFADD("ResAddState",.PATARR,.MPIXML,"STATE")
"RTN","MPIFXMLI",92,0)
 . D IFADD("ResAddZip4",.PATARR,.MPIXML,"ZIPCODE")
"RTN","MPIFXMLI",93,0)
 . D IFADD("ResAddProvince",.PATARR,.MPIXML,"PROVINCECODE")
"RTN","MPIFXMLI",94,0)
 . D IFADD("ResAddPCode",.PATARR,.MPIXML,"POSTALCODE")
"RTN","MPIFXMLI",95,0)
 . D IFADD("ResAddCountry",.PATARR,.MPIXML,"COUNTRY")
"RTN","MPIFXMLI",96,0)
 . S MPIXML=MPIXML_"</ADDRESS>"
"RTN","MPIFXMLI",97,0)
 ; phone
"RTN","MPIFXMLI",98,0)
 I $G(PATARR("ResPhone"))'=""&($G(PATARR("ResPhone"))'["""") D
"RTN","MPIFXMLI",99,0)
 . S PATARR("MPIVar")=$$CONV($G(PATARR("ResPhone")))
"RTN","MPIFXMLI",100,0)
 . I PATARR("MPIVar")'="" D
"RTN","MPIFXMLI",101,0)
 .. S MPIXML=MPIXML_"<PHONE type='HOME'><NUMBER>"
"RTN","MPIFXMLI",102,0)
 .. S MPIXML=MPIXML_PATARR("MPIVar")_"</NUMBER></PHONE>"
"RTN","MPIFXMLI",103,0)
 ; date of death
"RTN","MPIFXMLI",104,0)
 I $G(PATARR("DOD"))'="" D
"RTN","MPIFXMLI",105,0)
 . S MPIXML=MPIXML_"<ATTRIBUTE type='DOD'><VALUE>"
"RTN","MPIFXMLI",106,0)
 . S MPIXML=MPIXML_$$FMTHL7^XLFDT(PATARR("DOD"))_"</VALUE></ATTRIBUTE>"
"RTN","MPIFXMLI",107,0)
 S MPIXML=MPIXML_"</PROFILE></ARGUMENT>"
"RTN","MPIFXMLI",108,0)
 S MPIXML=MPIXML_"<ARGUMENT name="_QUOTE_"ADDTYPE"_QUOTE_">"
"RTN","MPIFXMLI",109,0)
 S MPIXML=MPIXML_"<VALUE>"_ADDTYPE_"</VALUE></ARGUMENT>"
"RTN","MPIFXMLI",110,0)
 S MPIXML=MPIXML_"</ARGUMENTS></IDM_REQUEST>"
"RTN","MPIFXMLI",111,0)
 Q MPIXML
"RTN","MPIFXMLI",112,0)
 ;
"RTN","MPIFXMLI",113,0)
IFADD(MPIVAR,PATARR,MPIXML,MPIXMLN) ;check if there, if so add it to the XML
"RTN","MPIFXMLI",114,0)
 ; MPIVAR is the PATARR variable name
"RTN","MPIFXMLI",115,0)
 ; MPIXMLN is the name of the XML to encase
"RTN","MPIFXMLI",116,0)
 ; modifies MPIXML to add if it is there
"RTN","MPIFXMLI",117,0)
 I $G(PATARR(MPIVAR))'="" D
"RTN","MPIFXMLI",118,0)
 . S MPIXML=MPIXML_"<"_MPIXMLN_">"_PATARR(MPIVAR)_"</"_MPIXMLN_">"
"RTN","MPIFXMLI",119,0)
 Q
"RTN","MPIFXMLI",120,0)
CONV(FIELD) ;check for &, ', > and <
"RTN","MPIFXMLI",121,0)
 I FIELD["&" S FIELD=$P(FIELD,"&")_"&amp;"_$P(FIELD,"&",2)
"RTN","MPIFXMLI",122,0)
 I FIELD["'" S FIELD=$P(FIELD,"'")_"&apos;"_$P(FIELD,"'",2)
"RTN","MPIFXMLI",123,0)
 S:(FIELD["<") FIELD=$$CONVA(FIELD,"<")
"RTN","MPIFXMLI",124,0)
 S:(FIELD[">") FIELD=$$CONVA(FIELD,">")
"RTN","MPIFXMLI",125,0)
 Q FIELD
"RTN","MPIFXMLI",126,0)
CONVA(FIELD,ENCHAR) ;handle <<pob city>>
"RTN","MPIFXMLI",127,0)
 N I,X,VAL
"RTN","MPIFXMLI",128,0)
 S VAL="",I=$L(FIELD,ENCHAR) F X=1:1:I S VAL=VAL_$P(FIELD,ENCHAR,X)
"RTN","MPIFXMLI",129,0)
 Q VAL
"RTN","MPIFXMLI",130,0)
PARSE(MPIDATA,MPIXML) ;Parse XML for results
"RTN","MPIFXMLI",131,0)
 ;
"RTN","MPIFXMLI",132,0)
 ; EN^MXMLPRSE - #4149
"RTN","MPIFXMLI",133,0)
 ;
"RTN","MPIFXMLI",134,0)
 K ^TMP($J,"MPIFXMLI")
"RTN","MPIFXMLI",135,0)
 N MPICB,MPIUSE,MPIVAR,MPIIDN,MPILOC
"RTN","MPIFXMLI",136,0)
 S MPICB("STARTELEMENT")="SE^MPIFXMLI"
"RTN","MPIFXMLI",137,0)
 S MPICB("CHARACTERS")="VALUE^MPIFXMLI"
"RTN","MPIFXMLI",138,0)
 S ^TMP($J,"MPIFXMLI",1)=MPIXML
"RTN","MPIFXMLI",139,0)
 D EN^MXMLPRSE($NA(^TMP($J,"MPIFXMLI")),.MPICB)
"RTN","MPIFXMLI",140,0)
 K ^TMP($J,"MPIFXMLI")
"RTN","MPIFXMLI",141,0)
 Q
"RTN","MPIFXMLI",142,0)
SE(MPIN,MPIA) ; - used for the parser to call back with STARTELEMENT
"RTN","MPIFXMLI",143,0)
 ; just to protect the process
"RTN","MPIFXMLI",144,0)
 S MPIN=$G(MPIN)
"RTN","MPIFXMLI",145,0)
 S MPIA("type")=$G(MPIA("type"))
"RTN","MPIFXMLI",146,0)
 ;No need for these tags
"RTN","MPIFXMLI",147,0)
 I MPIN="IDM_RESPONSE"!(MPIN="RESULT")!(MPIN="ERROR") Q
"RTN","MPIFXMLI",148,0)
 S MPILOC="MPIDATA("
"RTN","MPIFXMLI",149,0)
 I MPIN="TEXT" D  Q
"RTN","MPIFXMLI",150,0)
 . S MPIVAR="""ERRTXT"")",MPIDATA("ICN")=-1
"RTN","MPIFXMLI",151,0)
 I MPIN="ID" S MPIVAR="""ICN"")" Q
"RTN","MPIFXMLI",152,0)
 Q
"RTN","MPIFXMLI",153,0)
 ;
"RTN","MPIFXMLI",154,0)
VALUE(MPIT) ;used by the parser to call back with CHARACTERS
"RTN","MPIFXMLI",155,0)
 S:$D(MPIVAR) @(MPILOC_MPIVAR)=MPIT K MPIVAR Q
"RTN","MPIFXMLI",156,0)
 Q
"VER")
8.0^22.2
"BLD",3406,6)
^68
**END**
**END**

