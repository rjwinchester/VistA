Released MPIF*1*65 SEQ #62
Extracted from mail message
**KIDS**:MPIF*1.0*65^

**INSTALL NAME**
MPIF*1.0*65
"BLD",3222,0)
MPIF*1.0*65^MASTER PATIENT INDEX VISTA^0^3170804^y
"BLD",3222,1,0)
^^3^3^3170804^
"BLD",3222,1,1,0)
MASTER VETERAN INDEX VISTA ENHANCEMENTS
"BLD",3222,1,2,0)
Refer to patch MPIF*1.0*65 in the FORUM Patch Module for a complete
"BLD",3222,1,3,0)
description.
"BLD",3222,4,0)
^9.64PA^^
"BLD",3222,6.3)
3
"BLD",3222,"KRN",0)
^9.67PA^779.2^20
"BLD",3222,"KRN",.4,0)
.4
"BLD",3222,"KRN",.401,0)
.401
"BLD",3222,"KRN",.402,0)
.402
"BLD",3222,"KRN",.403,0)
.403
"BLD",3222,"KRN",.5,0)
.5
"BLD",3222,"KRN",.84,0)
.84
"BLD",3222,"KRN",3.6,0)
3.6
"BLD",3222,"KRN",3.8,0)
3.8
"BLD",3222,"KRN",9.2,0)
9.2
"BLD",3222,"KRN",9.8,0)
9.8
"BLD",3222,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",3222,"KRN",9.8,"NM",1,0)
MPIFVER^^0^B54930971
"BLD",3222,"KRN",9.8,"NM","B","MPIFVER",1)

"BLD",3222,"KRN",19,0)
19
"BLD",3222,"KRN",19.1,0)
19.1
"BLD",3222,"KRN",101,0)
101
"BLD",3222,"KRN",409.61,0)
409.61
"BLD",3222,"KRN",771,0)
771
"BLD",3222,"KRN",779.2,0)
779.2
"BLD",3222,"KRN",870,0)
870
"BLD",3222,"KRN",8989.51,0)
8989.51
"BLD",3222,"KRN",8989.52,0)
8989.52
"BLD",3222,"KRN",8994,0)
8994
"BLD",3222,"KRN","B",.4,.4)

"BLD",3222,"KRN","B",.401,.401)

"BLD",3222,"KRN","B",.402,.402)

"BLD",3222,"KRN","B",.403,.403)

"BLD",3222,"KRN","B",.5,.5)

"BLD",3222,"KRN","B",.84,.84)

"BLD",3222,"KRN","B",3.6,3.6)

"BLD",3222,"KRN","B",3.8,3.8)

"BLD",3222,"KRN","B",9.2,9.2)

"BLD",3222,"KRN","B",9.8,9.8)

"BLD",3222,"KRN","B",19,19)

"BLD",3222,"KRN","B",19.1,19.1)

"BLD",3222,"KRN","B",101,101)

"BLD",3222,"KRN","B",409.61,409.61)

"BLD",3222,"KRN","B",771,771)

"BLD",3222,"KRN","B",779.2,779.2)

"BLD",3222,"KRN","B",870,870)

"BLD",3222,"KRN","B",8989.51,8989.51)

"BLD",3222,"KRN","B",8989.52,8989.52)

"BLD",3222,"KRN","B",8994,8994)

"BLD",3222,"QDEF")
^^^^NO^^^^NO^^YES
"BLD",3222,"QUES",0)
^9.62^^
"BLD",3222,"REQB",0)
^9.611^1^1
"BLD",3222,"REQB",1,0)
MPIF*1.0*62^2
"BLD",3222,"REQB","B","MPIF*1.0*62",1)

"MBREQ")
0
"PKG",282,-1)
1^1
"PKG",282,0)
MASTER PATIENT INDEX VISTA^MPIF^Master Patient Index VistA side
"PKG",282,22,0)
^9.49I^1^1
"PKG",282,22,1,0)
1.0^2990428
"PKG",282,22,1,"PAH",1,0)
65^3170804
"PKG",282,22,1,"PAH",1,1,0)
^^3^3^3170804
"PKG",282,22,1,"PAH",1,1,1,0)
MASTER VETERAN INDEX VISTA ENHANCEMENTS
"PKG",282,22,1,"PAH",1,1,2,0)
Refer to patch MPIF*1.0*65 in the FORUM Patch Module for a complete
"PKG",282,22,1,"PAH",1,1,3,0)
description.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","MPIFVER")
0^1^B54930971^B53549265
"RTN","MPIFVER",1,0)
MPIFVER ;ALB/CKN,VISTA ENTERPRISE REGISTRATION ; 7/26/17 2:18pm
"RTN","MPIFVER",2,0)
 ;;1.0;MASTER PATIENT INDEX VISTA;**61,62,65**;30 Apr 99;Build 3
"RTN","MPIFVER",3,0)
 Q
"RTN","MPIFVER",4,0)
ENP(RESULTS,ALTRSHLD,TKTRSHLD) ;
"RTN","MPIFVER",5,0)
 N XCNT,XCNTR,DFN,TMPRESLT
"RTN","MPIFVER",6,0)
 S XCNT="",XCNTR="",DFN=""
"RTN","MPIFVER",7,0)
 D DISPLAY
"RTN","MPIFVER",8,0)
 I XCNTR'="" D
"RTN","MPIFVER",9,0)
 . M TMPRESLT(1)=RESULTS(XCNTR)
"RTN","MPIFVER",10,0)
 . K RESULTS M RESULTS=TMPRESLT
"RTN","MPIFVER",11,0)
 S DFN=$$BR(XCNTR)
"RTN","MPIFVER",12,0)
 Q DFN
"RTN","MPIFVER",13,0)
BR(XCNTR) ;Business rules
"RTN","MPIFVER",14,0)
 N ICN,SSN,MPIIDS
"RTN","MPIFVER",15,0)
 ;If no record is selected by user, return empty RESULTS and no DFN
"RTN","MPIFVER",16,0)
 I XCNTR="" K RESULTS  Q ""
"RTN","MPIFVER",17,0)
 ;
"RTN","MPIFVER",18,0)
 S ICN=$G(RESULTS(1,"ICN")),SSN=$G(RESULTS(1,"SSN"))
"RTN","MPIFVER",19,0)
 ;If user select record with NO ICN value, return no DFN and single
"RTN","MPIFVER",20,0)
 ;record in RESULTS
"RTN","MPIFVER",21,0)
 I ICN="" Q DFN
"RTN","MPIFVER",22,0)
 ;If user select record with ICN value, check PATIENT file for
"RTN","MPIFVER",23,0)
 ;ICN. If it exist, return DFN. If it does not exist, check for
"RTN","MPIFVER",24,0)
 ;SSN. If SSN exist, Notify user and return empty DFN and RESULTS to
"RTN","MPIFVER",25,0)
 ;go back to select patient prompt.
"RTN","MPIFVER",26,0)
 I $D(^DPT("AICN",+ICN)) D  Q DFN
"RTN","MPIFVER",27,0)
 . S DFN=$O(^DPT("AICN",+ICN,""))
"RTN","MPIFVER",28,0)
 . K RESULTS
"RTN","MPIFVER",29,0)
 I SSN'="",($D(^DPT("SSN",SSN))) D  Q DFN
"RTN","MPIFVER",30,0)
 . N IEN,NAME
"RTN","MPIFVER",31,0)
 . S IEN=$O(^DPT("SSN",SSN,"")),NAME=$P($G(^DPT(IEN,0)),"^"),DFN=-1
"RTN","MPIFVER",32,0)
 . W !,"SSN in selected record already exist in PATIENT file..."
"RTN","MPIFVER",33,0)
 . K RESULTS
"RTN","MPIFVER",34,0)
 ;If existing patient not found in VistA,
"RTN","MPIFVER",35,0)
 ;Call Enterprise Get Corresponding IDs, confirm MVI doesn't know
"RTN","MPIFVER",36,0)
 ;this site already (active record) - if the site is already known
"RTN","MPIFVER",37,0)
 ;need use that DFN.
"RTN","MPIFVER",38,0)
 D GETIDS^MPIFXMLG(.MPIIDS,RESULTS(1,"ICN"))
"RTN","MPIFVER",39,0)
 N ID,CN,STNUM,QFLG
"RTN","MPIFVER",40,0)
 S STNUM=$P($$SITE^VASITE(),"^",3),QFLG=0
"RTN","MPIFVER",41,0)
 S CN=0 F  S CN=$O(MPIIDS(CN)) Q:+CN=0!(QFLG)  D
"RTN","MPIFVER",42,0)
 . I $G(MPIIDS(CN,"IDType"))="PI",($G(MPIIDS(CN,"Source"))=STNUM) D  Q
"RTN","MPIFVER",43,0)
 .. S DFN=$G(MPIIDS(CN,"ID")),QFLG=1
"RTN","MPIFVER",44,0)
 .. K RESULTS
"RTN","MPIFVER",45,0)
 .;If 200ESR is one of the site, set a flag to trigger Z11 query.
"RTN","MPIFVER",46,0)
 . I $G(MPIIDS(CN,"Source"))="200ESR" S RESULTS(1,"Z11")=1
"RTN","MPIFVER",47,0)
 Q DFN
"RTN","MPIFVER",48,0)
DISPLAY ;
"RTN","MPIFVER",49,0)
 N CNT1,NAME,FNAME,MNAME,SCORE,SSN,DOB,ICN,SEX,LNAME,M,XMPIVER,EFLG,ECNT
"RTN","MPIFVER",50,0)
 S CNT1=0,EFLG=0
"RTN","MPIFVER",51,0)
 F  S CNT1=$O(RESULTS(CNT1)) Q:+CNT1=0  D
"RTN","MPIFVER",52,0)
 . S FNAME=$G(RESULTS(CNT1,"FirstName")),SSN=$G(RESULTS(CNT1,"SSN"))
"RTN","MPIFVER",53,0)
 . S DOB=$G(RESULTS(CNT1,"DOB")),ICN=$G(RESULTS(CNT1,"ICN"))
"RTN","MPIFVER",54,0)
 . S SEX=$G(RESULTS(CNT1,"Gender")),LNAME=$G(RESULTS(CNT1,"Surname"))
"RTN","MPIFVER",55,0)
 . S MNAME=$G(RESULTS(CNT1,"MiddleName"))
"RTN","MPIFVER",56,0)
 . S SCORE=+$G(RESULTS(CNT1,"Score")),NAME=LNAME_","_FNAME_" "_MNAME
"RTN","MPIFVER",57,0)
 . I ICN="",($D(RESULTS(CNT1,"IDS"))) D
"RTN","MPIFVER",58,0)
 .. S EFLG=1,ECNT=0 F  S ECNT=$O(RESULTS(CNT1,"IDS",ECNT)) Q:+ECNT=0  D
"RTN","MPIFVER",59,0)
 ... I $G(RESULTS(CNT1,"IDS",ECNT,"SOURCE"))="200DOD" S ICN=$G(RESULTS(CNT1,"IDS",ECNT,"ID"))  ;Get EDIPI instead of ICN if from DoD
"RTN","MPIFVER",60,0)
 . S M=$S(SCORE>=ALTRSHLD:"E",1:"P")
"RTN","MPIFVER",61,0)
 . ;Rearranging array for sectional view display
"RTN","MPIFVER",62,0)
 . S XMPIVER("MPIVER",M,SCORE,CNT1)=NAME_"^"_SSN_"^"_DOB_"^"_SEX_"^"_ICN
"RTN","MPIFVER",63,0)
DISP2 ;
"RTN","MPIFVER",64,0)
 N DIR,DA,DR,Y,X,DATA,ENOUGH,COUNT,I,SCORE,CNTR
"RTN","MPIFVER",65,0)
 S COUNT=0
"RTN","MPIFVER",66,0)
 W @IOF
"RTN","MPIFVER",67,0)
 F I="E","P" D
"RTN","MPIFVER",68,0)
 . I $D(XMPIVER("MPIVER",I)) D HDR($S(I="E":"",I="P":" POTENTIAL",1:""))
"RTN","MPIFVER",69,0)
 . S SCORE=9999999 F  S SCORE=$O(XMPIVER("MPIVER",I,SCORE),-1) Q:SCORE=""  D
"RTN","MPIFVER",70,0)
 .. S CNTR=0 F  S CNTR=$O(XMPIVER("MPIVER",I,SCORE,CNTR)) Q:CNTR=""  D
"RTN","MPIFVER",71,0)
 ... S COUNT=COUNT+1
"RTN","MPIFVER",72,0)
 ... S XMPIVER("MPIVER",I,SCORE,CNTR,COUNT)=""
"RTN","MPIFVER",73,0)
 ... S DATA=$G(XMPIVER("MPIVER",I,SCORE,CNTR))
"RTN","MPIFVER",74,0)
 ... D HDR1
"RTN","MPIFVER",75,0)
 ... W !,COUNT_") ",?3,$P(DATA,"^",5),?21,$P(DATA,"^"),?53,$P(DATA,"^",2),?64,$$FMTE^XLFDT($P(DATA,"^",3),2),?76,$P(DATA,"^",4)
"RTN","MPIFVER",76,0)
 S XMPIVER("COUNT")=$G(COUNT)
"RTN","MPIFVER",77,0)
 S ENOUGH=0
"RTN","MPIFVER",78,0)
 W !
"RTN","MPIFVER",79,0)
 D ASK I ENOUGH G ASK2
"RTN","MPIFVER",80,0)
 I XCNT'="" W !,"Please wait..." D EXDISP(XCNT)
"RTN","MPIFVER",81,0)
 W !!
"RTN","MPIFVER",82,0)
 K DIR,DA S DIR(0)="Y",DIR("B")="NO",DIR("A")="Would you like to see another record" D ^DIR
"RTN","MPIFVER",83,0)
 I $D(DTOUT)!($D(DUOUT))!(Y=0) S ENOUGH=1 G ASK2
"RTN","MPIFVER",84,0)
 I Y G DISP2
"RTN","MPIFVER",85,0)
EXIT K DA,X,Y,XMPIVER("MPIVER") W !! Q
"RTN","MPIFVER",86,0)
HDR(HDL) ;Header
"RTN","MPIFVER",87,0)
 W !,"--- Records meet the"_HDL_" MATCH criteria ---"
"RTN","MPIFVER",88,0)
 Q
"RTN","MPIFVER",89,0)
HDR1 ;Repeating header
"RTN","MPIFVER",90,0)
 W !,?3,$S(EFLG=1:"EDIPI",1:"ICN"),?21,"NAME",?53,"SSN",?64,"DOB",?76,"SEX"
"RTN","MPIFVER",91,0)
 Q
"RTN","MPIFVER",92,0)
ASK ;
"RTN","MPIFVER",93,0)
 N COUNT,DIR,DA,DR,ND,SC,CNTR,BC,QFLG
"RTN","MPIFVER",94,0)
 S BC=1,COUNT=$G(XMPIVER("COUNT"))
"RTN","MPIFVER",95,0)
 K DIR,X,Y S DIR(0)="NA^"_BC_":"_COUNT,DIR("A")="Enter the Number to display the details: ",DIR("?")="Enter the number from range of "_BC_" to "_COUNT D ^DIR
"RTN","MPIFVER",96,0)
 I $D(DTOUT)!($D(DUOUT)) S ENOUGH=1 Q
"RTN","MPIFVER",97,0)
 I Y S XCNT=$$CNTR(Y)
"RTN","MPIFVER",98,0)
 Q
"RTN","MPIFVER",99,0)
 ;
"RTN","MPIFVER",100,0)
CNTR(Y) ;
"RTN","MPIFVER",101,0)
 N SC,ND,CNTR,QFLG
"RTN","MPIFVER",102,0)
 S QFLG=0,XCNT=""
"RTN","MPIFVER",103,0)
 F I="E","P" D
"RTN","MPIFVER",104,0)
 . S SC=0 F  S SC=$O(XMPIVER("MPIVER",I,SC)) Q:+SC=0!(QFLG)  D
"RTN","MPIFVER",105,0)
 .. S CNTR=0 F  S CNTR=$O(XMPIVER("MPIVER",I,SC,CNTR)) Q:+CNTR=0!(QFLG)  D
"RTN","MPIFVER",106,0)
 ... S ND=$O(XMPIVER("MPIVER",I,SC,CNTR,""))
"RTN","MPIFVER",107,0)
 ... I ND=+Y S QFLG=1,XCNT=CNTR
"RTN","MPIFVER",108,0)
 Q XCNT
"RTN","MPIFVER",109,0)
ASK2 ;
"RTN","MPIFVER",110,0)
 N X,Y,DIR,DA,DR,BC,COUNT
"RTN","MPIFVER",111,0)
 S BC=1
"RTN","MPIFVER",112,0)
 S COUNT=$G(XMPIVER("COUNT"))
"RTN","MPIFVER",113,0)
 ;**65 - Story 557826 (ckn)
"RTN","MPIFVER",114,0)
 ;For below prompt - set default value to YES only if any query result
"RTN","MPIFVER",115,0)
 ;have at least one Exact match returned. set to NO if only Potential
"RTN","MPIFVER",116,0)
 ;matches are returned.
"RTN","MPIFVER",117,0)
 K DIR,X,Y S DIR(0)="Y",DIR("B")=$S($D(XMPIVER("MPIVER","E")):"YES",1:"NO"),DIR("A")="Would you like to select a patient from above Enterprise Search" D ^DIR
"RTN","MPIFVER",118,0)
 I $D(DTOUT)!($D(DUOUT)) S ENOUGH=1 G EXIT
"RTN","MPIFVER",119,0)
 I Y D
"RTN","MPIFVER",120,0)
 .K DIR,X,Y S DIR(0)="NA^"_BC_":"_COUNT,DIR("A")="Enter the Number to select the patient: ",DIR("?")="Enter the number from range of "_BC_" to "_COUNT D ^DIR
"RTN","MPIFVER",121,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","MPIFVER",122,0)
 I Y S XCNTR=$$CNTR(Y) D
"RTN","MPIFVER",123,0)
 .;W !,"Patient: "_XCNTR_" selected"
"RTN","MPIFVER",124,0)
 Q
"RTN","MPIFVER",125,0)
EXDISP(XCNT) ;Extended display for selected patient
"RTN","MPIFVER",126,0)
 ;Get all traits from original results
"RTN","MPIFVER",127,0)
 N FNAME,LNAME,MNAME,CITY,COUNTRY,DOB,GENDER,ICN,L1,L2,L3,MMN,PCODE
"RTN","MPIFVER",128,0)
 N POBCTY,POBCNTRY,POBST,PREF,SUFFIX,PROVINCE,RESCITY,RESCNTRY
"RTN","MPIFVER",129,0)
 N RESADD1,RESADD2,RESADD3,RESPCODE,RESPROV,RESST,RESZIP,RESPHN
"RTN","MPIFVER",130,0)
 N SSN,ALFNM,ALLNM,ALSSN,ALSFX,ALCNT,ALMNM
"RTN","MPIFVER",131,0)
 S FNAME=$G(RESULTS(XCNT,"FirstName")),LNAME=$G(RESULTS(XCNT,"Surname"))
"RTN","MPIFVER",132,0)
 S MNAME=$G(RESULTS(XCNT,"MiddleName")),DOB=$G(RESULTS(XCNT,"DOB"))
"RTN","MPIFVER",133,0)
 S GENDER=$G(RESULTS(XCNT,"Gender")),ICN=$G(RESULTS(XCNT,"ICN"))
"RTN","MPIFVER",134,0)
 S MMN=$G(RESULTS(XCNT,"MMN")),POBCTY=$G(RESULTS(XCNT,"POBCity"))
"RTN","MPIFVER",135,0)
 S POBCNTRY=$G(RESULTS(XCNT,"POBCountry")),POBST=$G(RESULTS(XCNT,"POBState"))
"RTN","MPIFVER",136,0)
 S PREF=$G(RESULTS(XCNT,"Prefix")),SUFFIX=$G(RESULTS(XCNT,"Suffix"))
"RTN","MPIFVER",137,0)
 S RESCITY=$G(RESULTS(XCNT,"ResAddCity")),RESCNTRY=$G(RESULTS(XCNT,"ResAddCountry"))
"RTN","MPIFVER",138,0)
 S RESADD1=$G(RESULTS(XCNT,"ResAddL1")),RESADD2=$G(RESULTS(XCNT,"ResAddL2"))
"RTN","MPIFVER",139,0)
 S RESADD3=$G(RESULTS(XCNT,"ResAddL3")),RESPCODE=$G(RESULTS(XCNT,"ResAddPCode"))
"RTN","MPIFVER",140,0)
 S RESPROV=$G(RESULTS(XCNT,"ResAddProvince")),SSN=$G(RESULTS(XCNT,"SSN"))
"RTN","MPIFVER",141,0)
 S RESST=$G(RESULTS(XCNT,"ResAddState")),RESZIP=$G(RESULTS(XCNT,"ResAddZip4"))
"RTN","MPIFVER",142,0)
 S RESPHN=$G(RESULTS(XCNT,"ResPhone"))
"RTN","MPIFVER",143,0)
 W !
"RTN","MPIFVER",144,0)
 W !,?5,"ICN",?17,": "_ICN
"RTN","MPIFVER",145,0)
 W !,?5,"Name",?17,": "_LNAME_","_FNAME_" "_MNAME
"RTN","MPIFVER",146,0)
 W !,?5,"SSN",?17,": "_SSN
"RTN","MPIFVER",147,0)
 W !,?5,"DOB",?17,": "_$$FMTE^XLFDT(DOB)
"RTN","MPIFVER",148,0)
 W !,?5,"Gender",?17,": "_GENDER
"RTN","MPIFVER",149,0)
 W !,?5,"MMN",?17,": "_MMN
"RTN","MPIFVER",150,0)
 I POBCTY'="" W !,?5,"POB City",?17,": "_POBCTY
"RTN","MPIFVER",151,0)
 I POBST'="" W !,?5,"POB State",?17,": "_POBST
"RTN","MPIFVER",152,0)
 I POBCNTRY'="" W !,?5,"POB Country",?17,": "_POBCNTRY
"RTN","MPIFVER",153,0)
 I RESADD1'=""!(RESADD2'="")!(RESADD3'="")!(RESCNTRY'="")!(RESCITY'="")!(RESST'="")!(RESPCODE'="")!(RESPROV'="")!(RESZIP'="") D
"RTN","MPIFVER",154,0)
 . W !!,"Address:"
"RTN","MPIFVER",155,0)
 . I RESADD1'="" W !,?5,RESADD1
"RTN","MPIFVER",156,0)
 . I RESADD2'="" W !,?5,RESADD2
"RTN","MPIFVER",157,0)
 . I RESADD3'="" W !,?5,RESADD3
"RTN","MPIFVER",158,0)
 . I RESCNTRY'="",(RESCNTRY="USA") D
"RTN","MPIFVER",159,0)
 .. W !,?5,RESCITY_","_RESST_" "_RESZIP
"RTN","MPIFVER",160,0)
 . I RESCNTRY'="",(RESCNTRY'="USA") D
"RTN","MPIFVER",161,0)
 .. W !,?5,RESCITY_","_RESPROV_" "_RESPCODE
"RTN","MPIFVER",162,0)
 I RESCNTRY'="" W !,?5,RESCNTRY
"RTN","MPIFVER",163,0)
 I RESPHN'="" W !,?5,"Phone: "_RESPHN
"RTN","MPIFVER",164,0)
 I $D(RESULTS(XCNT,"ALIAS")) D
"RTN","MPIFVER",165,0)
 . W !!,"ALIAS Information"
"RTN","MPIFVER",166,0)
 . W !,?5,"NAME",?45,"SSN"
"RTN","MPIFVER",167,0)
 . S ALCNT=0 F  S ALCNT=$O(RESULTS(XCNT,"ALIAS",ALCNT)) Q:+ALCNT=0  D
"RTN","MPIFVER",168,0)
 .. S ALFNM=$G(RESULTS(XCNT,"ALIAS",ALCNT,"FirstName"))
"RTN","MPIFVER",169,0)
 .. S ALLNM=$G(RESULTS(XCNT,"ALIAS",ALCNT,"Surname"))
"RTN","MPIFVER",170,0)
 .. S ALSSN=$G(RESULTS(XCNT,"ALIAS",ALCNT,"SSN"))
"RTN","MPIFVER",171,0)
 .. S ALSFX=$G(RESULTS(XCNT,"ALIAS",ALCNT,"Suffix"))
"RTN","MPIFVER",172,0)
 .. S ALMNM=$G(RESULTS(XCNT,"ALIAS",ALCNT,"MiddleName"))
"RTN","MPIFVER",173,0)
 .. W !,?5,ALLNM_","_ALFNM_" "_ALMNM_" "_ALSFX,?45,ALSSN
"RTN","MPIFVER",174,0)
 Q
"VER")
8.0^22.2
"BLD",3222,6)
^62
**END**
**END**

