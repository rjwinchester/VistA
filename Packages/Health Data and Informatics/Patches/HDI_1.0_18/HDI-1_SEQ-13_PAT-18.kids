Released HDI*1*18 SEQ #13
Extracted from mail message
**KIDS**:HDI*1.0*18^

**INSTALL NAME**
HDI*1.0*18
"BLD",9907,0)
HDI*1.0*18^HEALTH DATA & INFORMATICS^0^3170713^y
"BLD",9907,4,0)
^9.64PA^^
"BLD",9907,6.3)
4
"BLD",9907,"ABPKG")
n
"BLD",9907,"INID")
^n
"BLD",9907,"INIT")
HDI1018A
"BLD",9907,"KRN",0)
^9.67PA^779.2^20
"BLD",9907,"KRN",.4,0)
.4
"BLD",9907,"KRN",.4,"NM",0)
^9.68A^^
"BLD",9907,"KRN",.401,0)
.401
"BLD",9907,"KRN",.402,0)
.402
"BLD",9907,"KRN",.403,0)
.403
"BLD",9907,"KRN",.5,0)
.5
"BLD",9907,"KRN",.84,0)
.84
"BLD",9907,"KRN",3.6,0)
3.6
"BLD",9907,"KRN",3.8,0)
3.8
"BLD",9907,"KRN",9.2,0)
9.2
"BLD",9907,"KRN",9.8,0)
9.8
"BLD",9907,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",9907,"KRN",9.8,"NM",1,0)
HDI1018A^^0^B5374443
"BLD",9907,"KRN",9.8,"NM",2,0)
HDISVCMR^^0^B10067220
"BLD",9907,"KRN",9.8,"NM","B","HDI1018A",1)

"BLD",9907,"KRN",9.8,"NM","B","HDISVCMR",2)

"BLD",9907,"KRN",19,0)
19
"BLD",9907,"KRN",19.1,0)
19.1
"BLD",9907,"KRN",101,0)
101
"BLD",9907,"KRN",409.61,0)
409.61
"BLD",9907,"KRN",771,0)
771
"BLD",9907,"KRN",779.2,0)
779.2
"BLD",9907,"KRN",870,0)
870
"BLD",9907,"KRN",8989.51,0)
8989.51
"BLD",9907,"KRN",8989.52,0)
8989.52
"BLD",9907,"KRN",8994,0)
8994
"BLD",9907,"KRN","B",.4,.4)

"BLD",9907,"KRN","B",.401,.401)

"BLD",9907,"KRN","B",.402,.402)

"BLD",9907,"KRN","B",.403,.403)

"BLD",9907,"KRN","B",.5,.5)

"BLD",9907,"KRN","B",.84,.84)

"BLD",9907,"KRN","B",3.6,3.6)

"BLD",9907,"KRN","B",3.8,3.8)

"BLD",9907,"KRN","B",9.2,9.2)

"BLD",9907,"KRN","B",9.8,9.8)

"BLD",9907,"KRN","B",19,19)

"BLD",9907,"KRN","B",19.1,19.1)

"BLD",9907,"KRN","B",101,101)

"BLD",9907,"KRN","B",409.61,409.61)

"BLD",9907,"KRN","B",771,771)

"BLD",9907,"KRN","B",779.2,779.2)

"BLD",9907,"KRN","B",870,870)

"BLD",9907,"KRN","B",8989.51,8989.51)

"BLD",9907,"KRN","B",8989.52,8989.52)

"BLD",9907,"KRN","B",8994,8994)

"BLD",9907,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",9907,"QUES",0)
^9.62^^
"BLD",9907,"REQB",0)
^9.611^2^2
"BLD",9907,"REQB",1,0)
HDI*1.0*6^1
"BLD",9907,"REQB",2,0)
XU*8.0*677^1
"BLD",9907,"REQB","B","HDI*1.0*6",1)

"BLD",9907,"REQB","B","XU*8.0*677",2)

"INIT")
HDI1018A
"MBREQ")
0
"PKG",633,-1)
1^1
"PKG",633,0)
HEALTH DATA & INFORMATICS^HDI^Data Standardization
"PKG",633,20,0)
^9.402P^^
"PKG",633,22,0)
^9.49I^1^1
"PKG",633,22,1,0)
1.0^3050426^3050602^568
"PKG",633,22,1,"PAH",1,0)
18^3170713
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","HDI1018A")
0^1^B5374443^n/a
"RTN","HDI1018A",1,0)
HDI1018A ;BPO/DTG - PATCH 18 POST INSTALL ; 22 Aug 2016  12:49 PM
"RTN","HDI1018A",2,0)
 ;;1.0;HEALTH DATA & INFORMATICS;**18**;Feb 22, 2005;Build 4
"RTN","HDI1018A",3,0)
 ;
"RTN","HDI1018A",4,0)
POST ;
"RTN","HDI1018A",5,0)
 N DOMAIN,HDIDOM,HDIERROR,HDIMSG
"RTN","HDI1018A",6,0)
 ;
"RTN","HDI1018A",7,0)
 S HDIMSG(1)="Post-Installation (POST^HDI1018A) will now be run."
"RTN","HDI1018A",8,0)
 S HDIMSG(2)=" "
"RTN","HDI1018A",9,0)
 D MES^XPDUTL(.HDIMSG) K HDIMSG
"RTN","HDI1018A",10,0)
 ;
"RTN","HDI1018A",11,0)
 S DOMAIN="PROVIDERS" ; domain to be added to HDIS DOMAIN File #7115.1
"RTN","HDI1018A",12,0)
 ;
"RTN","HDI1018A",13,0)
 ; add domain
"RTN","HDI1018A",14,0)
 I '+$$UPDTDOM^HDISVCUT(DOMAIN) D  Q
"RTN","HDI1018A",15,0)
 . D MES^XPDUTL("***** Error adding the "_DOMAIN_" domain to the HDIS DOMAIN FILE #7115.1."),PSTHALT("")
"RTN","HDI1018A",16,0)
 ;
"RTN","HDI1018A",17,0)
 ; get domain IEN
"RTN","HDI1018A",18,0)
 I '+$$GETIEN^HDISVF09(DOMAIN,.HDIDOM) D  Q
"RTN","HDI1018A",19,0)
 . D MES^XPDUTL("***** Error retrieving the IEN for the "_DOMAIN_" domain."),PSTHALT("")
"RTN","HDI1018A",20,0)
 ;
"RTN","HDI1018A",21,0)
 ; verify domain IEN
"RTN","HDI1018A",22,0)
 I '+HDIDOM D  Q
"RTN","HDI1018A",23,0)
 . D MES^XPDUTL("***** Error verifying the IEN for the "_DOMAIN_" domain."),PSTHALT("")
"RTN","HDI1018A",24,0)
 ;
"RTN","HDI1018A",25,0)
 ; get files & fields to be added to File #7115.6
"RTN","HDI1018A",26,0)
 N DATA,LINE F LINE=1:1 S DATA=$P($T(DATA+LINE),";;",2) Q:DATA=""  D
"RTN","HDI1018A",27,0)
 . N FILE,FIELD,HDIDATA,HDIERMSG
"RTN","HDI1018A",28,0)
 . S FILE=$P(DATA,U),FIELD=$P(DATA,U,2)
"RTN","HDI1018A",29,0)
 . I +$$GETIEN^HDISVF05(FILE,FIELD) Q  ; quit if entry already exists
"RTN","HDI1018A",30,0)
 . S HDIDATA(FILE)=FIELD
"RTN","HDI1018A",31,0)
 . ; add entry to HDIS FILE/FIELD File #7115.6
"RTN","HDI1018A",32,0)
 . I '+$$ADDDFFS^HDISVF09(HDIDOM,.HDIDATA,.HDIERMSG) D
"RTN","HDI1018A",33,0)
 . . I '$D(HDIERROR) D MES^XPDUTL("***** "_"Error updating File #7115.6")
"RTN","HDI1018A",34,0)
 . . S HDIERROR=1
"RTN","HDI1018A",35,0)
 . . D MES^XPDUTL("***** "_HDIERMSG)
"RTN","HDI1018A",36,0)
 ;
"RTN","HDI1018A",37,0)
 I +$D(HDIERROR) D PSTHALT("") Q
"RTN","HDI1018A",38,0)
 ;
"RTN","HDI1018A",39,0)
 S HDIMSG(1)="Post-Installation complete."
"RTN","HDI1018A",40,0)
 S HDIMSG(2)=""
"RTN","HDI1018A",41,0)
 D MES^XPDUTL(.HDIMSG)
"RTN","HDI1018A",42,0)
 Q
"RTN","HDI1018A",43,0)
PSTHALT(MSG) ; display error message
"RTN","HDI1018A",44,0)
 S HDIMSG(1)=""
"RTN","HDI1018A",45,0)
 S HDIMSG(2)=MSG
"RTN","HDI1018A",46,0)
 S HDIMSG(3)="***** Post-installation has been halted."
"RTN","HDI1018A",47,0)
 S HDIMSG(4)="***** Please contact Enterprise VistA Support."
"RTN","HDI1018A",48,0)
 S HDIMSG(5)=""
"RTN","HDI1018A",49,0)
 D MES^XPDUTL(.HDIMSG)
"RTN","HDI1018A",50,0)
 Q
"RTN","HDI1018A",51,0)
DATA ;
"RTN","HDI1018A",52,0)
 ;;8932.1^.01
"RTN","HDI1018A",53,0)
 ;;
"RTN","HDI1018A",54,0)
 Q
"RTN","HDISVCMR")
0^2^B10067220^B8749465
"RTN","HDISVCMR",1,0)
HDISVCMR ;CT/GRR Data Standardization ; 06 Oct 2005  2:12 PM
"RTN","HDISVCMR",2,0)
 ;;1.0;HEALTH DATA & INFORMATICS;**1,2,18**;Feb 22, 2005;Build 4
"RTN","HDISVCMR",3,0)
 ;
"RTN","HDISVCMR",4,0)
EN(HDISDOM,HDISFILE) ;
"RTN","HDISVCMR",5,0)
 ;Input parameter:
"RTN","HDISVCMR",6,0)
 ;       HDISDOM - IEN to the HDIS Domain file (Required)
"RTN","HDISVCMR",7,0)
 ;       HDISFILE - Specific file # to be seeded (if not all domain files) (Optional)
"RTN","HDISVCMR",8,0)
 N HDISNM,HDISDT,HDERR,HDISFILS,HDISOK,HDISFLIS,HDISDA,HDISOUT,HDISSDT
"RTN","HDISVCMR",9,0)
 S HDISFLIS=""
"RTN","HDISVCMR",10,0)
 S HDISFN=.01
"RTN","HDISVCMR",11,0)
 S HDISNM=$G(^XMB("NETNAME"))
"RTN","HDISVCMR",12,0)
 S HDISDT=$$NOW^XLFDT(),HDISSDT=$$FMTXML^HDISVU01(HDISDT)
"RTN","HDISVCMR",13,0)
 I $G(HDISDOM)="" S HDISMESS="Required parameter (Domain) empty, File: "_HDISFILE_", Field: "_HDISFN D ERR^HDISVF09(HDISNM,HDISDT,HDISMESS) Q
"RTN","HDISVCMR",14,0)
 I '$D(^HDIS(7115.1,HDISDOM)) S HDISMESS="Domain ("_HDISDOM_") does not exist.  File: "_HDISFILE_", Field: "_HDISFN D ERR^HDISVF09(HDISNM,HDISDT,HDISMESS) Q
"RTN","HDISVCMR",15,0)
 I $$GETVFAIL^HDISVF02() S HDISMESS="VUID DS processer called but is in failsafe mode" D ERR^HDISVF09(HDISNM,HDISDT,HDISMESS) Q
"RTN","HDISVCMR",16,0)
 S HDISOK=$$GETFILS^HDISVF09(HDISDOM,0,.HDISFILS)
"RTN","HDISVCMR",17,0)
 I 'HDISOK S HDISMESS="No files are pending VUID processing in Domain "_$P(^HDIS(7115.1,HDISDOM,0),"^",1) D ERR^HDISVF09(HDISNM,HDISDT,HDISMESS) Q  ;modified 5/16/05 p-1
"RTN","HDISVCMR",18,0)
 I $G(HDISFILE)]"" D  Q
"RTN","HDISVCMR",19,0)
 .I $D(HDISFILS(HDISFILE)) D CREATE(HDISDOM,HDISFILE,HDISFN) I 1
"RTN","HDISVCMR",20,0)
 .E  D ERR^HDISVF09(HDISNM,HDISDT,"File: "_HDISFILE_" is not awaiting processing")
"RTN","HDISVCMR",21,0)
 S HDISDA=0 F  S HDISDA=$O(HDISFILS(HDISDA)) Q:HDISDA'>0  D CREATE(HDISDOM,HDISDA,.01)
"RTN","HDISVCMR",22,0)
 Q
"RTN","HDISVCMR",23,0)
 ;
"RTN","HDISVCMR",24,0)
CREATE(HDISDOM,HDISFILE,HDISFN) ;
"RTN","HDISVCMR",25,0)
 N HDISARRY,HDISMESS
"RTN","HDISVCMR",26,0)
 ;Update local status
"RTN","HDISVCMR",27,0)
 S HDISOUT=$$STATUPD^HDISVCUT(HDISFILE,HDISFN,1)
"RTN","HDISVCMR",28,0)
 S HDISARRY=$NA(^TMP("HDIS",$J)) ;Pavel fix the error if this variable is not defined.
"RTN","HDISVCMR",29,0)
 ;I 'HDISOUT S HDISMESS=$P(HDISOUT,"^",2) D ERR^HDISVF09(HDISNM,HDISDT,HDISMESS) G CR8OUT
"RTN","HDISVCMR",30,0)
 I 'HDISOUT S HDISMESS=$P(HDISOUT,"^",2) D  G CR8OUT
"RTN","HDISVCMR",31,0)
 . D ERR^HDISVF09(HDISNM,HDISDT,HDISMESS)
"RTN","HDISVCMR",32,0)
 . Q:'$D(XPD)
"RTN","HDISVCMR",33,0)
 . D BMES^XPDUTL("Local Status update of file: "_HDISFILE_" Failed - INSTALLATION ABORTED Reason: "_HDISMESS)
"RTN","HDISVCMR",34,0)
 . S XPDABORT=1
"RTN","HDISVCMR",35,0)
 ;
"RTN","HDISVCMR",36,0)
 ;Create XML doc containing facility data
"RTN","HDISVCMR",37,0)
 ;S HDISARRY=$NA(^TMP("HDIS",$J)) ;Pavel fix the error if this variable is not defined.
"RTN","HDISVCMR",38,0)
 S HDISOUT=$$FILE^HDISVCFX(HDISDOM,HDISFILE,HDISFN,HDISARRY)
"RTN","HDISVCMR",39,0)
 I 'HDISOUT S HDISMESS=$P(HDISOUT,"^",2) D ERR^HDISVF09(HDISNM,HDISDT,HDISMESS) G CR8OUT
"RTN","HDISVCMR",40,0)
 ;
"RTN","HDISVCMR",41,0)
 ; Send XML doc to Central Server
"RTN","HDISVCMR",42,0)
 S HDISOUT=$$SNDXML^HDISVM02(HDISARRY,1,"") ;removed last parameter 8/10/05 p-2
"RTN","HDISVCMR",43,0)
 I 'HDISOUT S HDISMESS=$P(HDISOUT,"^",2) D ERR^HDISVF09(HDISNM,HDISDT,HDISMESS) G CR8OUT
"RTN","HDISVCMR",44,0)
 ;
"RTN","HDISVCMR",45,0)
 ;Update local status file
"RTN","HDISVCMR",46,0)
 S HDISOUT=$$STATUPD^HDISVCUT(HDISFILE,HDISFN,2)
"RTN","HDISVCMR",47,0)
 I 'HDISOUT S HDISMESS=$P(HDISOUT,"^",2) D ERR^HDISVF09(HDISNM,HDISDT,HDISMESS) G CR8OUT
"RTN","HDISVCMR",48,0)
 ;
"RTN","HDISVCMR",49,0)
CR8OUT K @HDISARRY
"RTN","HDISVCMR",50,0)
 Q
"VER")
8.0^22.2
"BLD",9907,6)
^13
**END**
**END**

