Released ICD*18*82 SEQ #77
Extracted from mail message
**KIDS**:ICD*18.0*82^

**INSTALL NAME**
ICD*18.0*82
"BLD",9917,0)
ICD*18.0*82^DRG GROUPER^0^3160106^y
"BLD",9917,1,0)
^^1^1^3150921^^^
"BLD",9917,1,1,0)
This patch provides the annual update to the MS-DRG Grouper v33.0.
"BLD",9917,4,0)
^9.64PA^^
"BLD",9917,6)
3^
"BLD",9917,6.3)
21
"BLD",9917,"ABPKG")
n
"BLD",9917,"INI")
EN^ICD1882P
"BLD",9917,"INID")
^y
"BLD",9917,"INIT")
EN2^ICD1882P
"BLD",9917,"KRN",0)
^9.67PA^779.2^20
"BLD",9917,"KRN",.4,0)
.4
"BLD",9917,"KRN",.401,0)
.401
"BLD",9917,"KRN",.402,0)
.402
"BLD",9917,"KRN",.403,0)
.403
"BLD",9917,"KRN",.5,0)
.5
"BLD",9917,"KRN",.84,0)
.84
"BLD",9917,"KRN",3.6,0)
3.6
"BLD",9917,"KRN",3.8,0)
3.8
"BLD",9917,"KRN",9.2,0)
9.2
"BLD",9917,"KRN",9.8,0)
9.8
"BLD",9917,"KRN",9.8,"NM",0)
^9.68A^24^23
"BLD",9917,"KRN",9.8,"NM",1,0)
ICDEXD2^^0^B50967420
"BLD",9917,"KRN",9.8,"NM",2,0)
ICDEXLK2^^0^B168140554
"BLD",9917,"KRN",9.8,"NM",3,0)
ICDEXLK3^^0^B102652955
"BLD",9917,"KRN",9.8,"NM",4,0)
ICDEXLK4^^0^B27639305
"BLD",9917,"KRN",9.8,"NM",5,0)
ICDEXLK5^^0^B70506378
"BLD",9917,"KRN",9.8,"NM",7,0)
ICD10TB4^^0^B8872895
"BLD",9917,"KRN",9.8,"NM",8,0)
ICDDRGX^^0^B28133255
"BLD",9917,"KRN",9.8,"NM",9,0)
ICDDRGX2^^0^B103632057
"BLD",9917,"KRN",9.8,"NM",10,0)
ICDDRGX3^^0^B57991156
"BLD",9917,"KRN",9.8,"NM",11,0)
ICD1882A^^0^B164569535
"BLD",9917,"KRN",9.8,"NM",12,0)
ICD1882B^^0^B85768283
"BLD",9917,"KRN",9.8,"NM",13,0)
ICD1882X^^0^B74155132
"BLD",9917,"KRN",9.8,"NM",14,0)
ICD1882P^^0^B236433
"BLD",9917,"KRN",9.8,"NM",15,0)
ICD1882O^^0^B2720636
"BLD",9917,"KRN",9.8,"NM",16,0)
ICD1882F^^0^B57686037
"BLD",9917,"KRN",9.8,"NM",17,0)
ICD1882G^^0^B63064849
"BLD",9917,"KRN",9.8,"NM",18,0)
ICD1882H^^0^B59090507
"BLD",9917,"KRN",9.8,"NM",19,0)
ICD1882I^^0^B57502638
"BLD",9917,"KRN",9.8,"NM",20,0)
ICD1882J^^0^B59944026
"BLD",9917,"KRN",9.8,"NM",21,0)
ICD1882K^^0^B62951725
"BLD",9917,"KRN",9.8,"NM",22,0)
ICDDG010^^0^B87506701
"BLD",9917,"KRN",9.8,"NM",23,0)
ICD10TB2^^0^B18058052
"BLD",9917,"KRN",9.8,"NM",24,0)
ICD10TB8^^0^B8641752
"BLD",9917,"KRN",9.8,"NM","B","ICD10TB2",23)

"BLD",9917,"KRN",9.8,"NM","B","ICD10TB4",7)

"BLD",9917,"KRN",9.8,"NM","B","ICD10TB8",24)

"BLD",9917,"KRN",9.8,"NM","B","ICD1882A",11)

"BLD",9917,"KRN",9.8,"NM","B","ICD1882B",12)

"BLD",9917,"KRN",9.8,"NM","B","ICD1882F",16)

"BLD",9917,"KRN",9.8,"NM","B","ICD1882G",17)

"BLD",9917,"KRN",9.8,"NM","B","ICD1882H",18)

"BLD",9917,"KRN",9.8,"NM","B","ICD1882I",19)

"BLD",9917,"KRN",9.8,"NM","B","ICD1882J",20)

"BLD",9917,"KRN",9.8,"NM","B","ICD1882K",21)

"BLD",9917,"KRN",9.8,"NM","B","ICD1882O",15)

"BLD",9917,"KRN",9.8,"NM","B","ICD1882P",14)

"BLD",9917,"KRN",9.8,"NM","B","ICD1882X",13)

"BLD",9917,"KRN",9.8,"NM","B","ICDDG010",22)

"BLD",9917,"KRN",9.8,"NM","B","ICDDRGX",8)

"BLD",9917,"KRN",9.8,"NM","B","ICDDRGX2",9)

"BLD",9917,"KRN",9.8,"NM","B","ICDDRGX3",10)

"BLD",9917,"KRN",9.8,"NM","B","ICDEXD2",1)

"BLD",9917,"KRN",9.8,"NM","B","ICDEXLK2",2)

"BLD",9917,"KRN",9.8,"NM","B","ICDEXLK3",3)

"BLD",9917,"KRN",9.8,"NM","B","ICDEXLK4",4)

"BLD",9917,"KRN",9.8,"NM","B","ICDEXLK5",5)

"BLD",9917,"KRN",19,0)
19
"BLD",9917,"KRN",19.1,0)
19.1
"BLD",9917,"KRN",101,0)
101
"BLD",9917,"KRN",409.61,0)
409.61
"BLD",9917,"KRN",771,0)
771
"BLD",9917,"KRN",779.2,0)
779.2
"BLD",9917,"KRN",870,0)
870
"BLD",9917,"KRN",8989.51,0)
8989.51
"BLD",9917,"KRN",8989.52,0)
8989.52
"BLD",9917,"KRN",8994,0)
8994
"BLD",9917,"KRN","B",.4,.4)

"BLD",9917,"KRN","B",.401,.401)

"BLD",9917,"KRN","B",.402,.402)

"BLD",9917,"KRN","B",.403,.403)

"BLD",9917,"KRN","B",.5,.5)

"BLD",9917,"KRN","B",.84,.84)

"BLD",9917,"KRN","B",3.6,3.6)

"BLD",9917,"KRN","B",3.8,3.8)

"BLD",9917,"KRN","B",9.2,9.2)

"BLD",9917,"KRN","B",9.8,9.8)

"BLD",9917,"KRN","B",19,19)

"BLD",9917,"KRN","B",19.1,19.1)

"BLD",9917,"KRN","B",101,101)

"BLD",9917,"KRN","B",409.61,409.61)

"BLD",9917,"KRN","B",771,771)

"BLD",9917,"KRN","B",779.2,779.2)

"BLD",9917,"KRN","B",870,870)

"BLD",9917,"KRN","B",8989.51,8989.51)

"BLD",9917,"KRN","B",8989.52,8989.52)

"BLD",9917,"KRN","B",8994,8994)

"BLD",9917,"QDEF")
^^^^NO^^^^^^YES
"BLD",9917,"QUES",0)
^9.62^^
"BLD",9917,"REQB",0)
^9.611^3^3
"BLD",9917,"REQB",1,0)
ICD*18.0*64^1
"BLD",9917,"REQB",2,0)
ICD*18.0*67^1
"BLD",9917,"REQB",3,0)
LEX*2.0*101^1
"BLD",9917,"REQB","B","ICD*18.0*64",1)

"BLD",9917,"REQB","B","ICD*18.0*67",2)

"BLD",9917,"REQB","B","LEX*2.0*101",3)

"INI")
EN^ICD1882P
"INIT")
EN2^ICD1882P
"MBREQ")
0
"PKG",185,-1)
1^1
"PKG",185,0)
DRG GROUPER^ICD^DRG GROUPER
"PKG",185,22,0)
^9.49I^1^1
"PKG",185,22,1,0)
18.0^3001024^3001201^568
"PKG",185,22,1,"PAH",1,0)
82^3160106^520736428
"PKG",185,22,1,"PAH",1,1,0)
^^1^1^3160106
"PKG",185,22,1,"PAH",1,1,1,0)
This patch provides the annual update to the MS-DRG Grouper v33.0.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
23
"RTN","ICD10TB2")
0^23^B18058052^B18222140
"RTN","ICD10TB2",1,0)
ICD10TB2 ;KUM - GROUPER UTILITY FUNCTIONS;08/04/2015
"RTN","ICD10TB2",2,0)
 ;;18.0;DRG Grouper;**64,82**;Oct 20, 2000;Build 21
"RTN","ICD10TB2",3,0)
 ;
"RTN","ICD10TB2",4,0)
 ;DRG200 ; D DRG200^ICDTBL2D   -- See ICD10TB1
"RTN","ICD10TB2",5,0)
 ;DRG201 ;I ICDSD["c" S ICDRG=200 Q  -- See ICD10TB1
"RTN","ICD10TB2",6,0)
DRG202 ;
"RTN","ICD10TB2",7,0)
DRG203 S ICDRG=$S(ICDMCC>0:202,1:203) Q
"RTN","ICD10TB2",8,0)
DRG204 S ICDRG=204 Q
"RTN","ICD10TB2",9,0)
DRG205 ;
"RTN","ICD10TB2",10,0)
DRG206 S ICDRG=$S(ICDMCC=2:205,1:206) Q
"RTN","ICD10TB2",11,0)
DRG207 ;
"RTN","ICD10TB2",12,0)
DRG208 ;
"RTN","ICD10TB2",13,0)
DRG209 ;
"RTN","ICD10TB2",14,0)
DRG210 ;
"RTN","ICD10TB2",15,0)
 Q
"RTN","ICD10TB2",16,0)
DRG211 ;
"RTN","ICD10TB2",17,0)
 Q
"RTN","ICD10TB2",18,0)
DRG212 ;
"RTN","ICD10TB2",19,0)
 Q
"RTN","ICD10TB2",20,0)
DRG214 ;
"RTN","ICD10TB2",21,0)
DRG215 ;
"RTN","ICD10TB2",22,0)
DRG216 ;
"RTN","ICD10TB2",23,0)
DRG217 ;
"RTN","ICD10TB2",24,0)
DRG218 ;
"RTN","ICD10TB2",25,0)
DRG219 ;
"RTN","ICD10TB2",26,0)
DRG220 ;
"RTN","ICD10TB2",27,0)
 Q
"RTN","ICD10TB2",28,0)
DRG221 ;
"RTN","ICD10TB2",29,0)
DRG222 ;
"RTN","ICD10TB2",30,0)
DRG223 ;
"RTN","ICD10TB2",31,0)
DRG224 ;
"RTN","ICD10TB2",32,0)
DRG225 ;
"RTN","ICD10TB2",33,0)
DRG226 ;
"RTN","ICD10TB2",34,0)
DRG227 ;
"RTN","ICD10TB2",35,0)
 Q
"RTN","ICD10TB2",36,0)
DRG228 ;
"RTN","ICD10TB2",37,0)
DRG229 ;
"RTN","ICD10TB2",38,0)
DRG230 ;
"RTN","ICD10TB2",39,0)
 S ICDRG=$S(ICDMCC=2:228,ICDMCC=1:229,1:230)
"RTN","ICD10TB2",40,0)
 Q
"RTN","ICD10TB2",41,0)
DRG231 ;
"RTN","ICD10TB2",42,0)
DRG232 ;
"RTN","ICD10TB2",43,0)
DRG233 ;
"RTN","ICD10TB2",44,0)
DRG234 ;
"RTN","ICD10TB2",45,0)
DRG235 ;
"RTN","ICD10TB2",46,0)
DRG236 ;
"RTN","ICD10TB2",47,0)
 Q
"RTN","ICD10TB2",48,0)
 ;DRG237 ;
"RTN","ICD10TB2",49,0)
 ;DRG238 ;
"RTN","ICD10TB2",50,0)
 ;S ICDRG=$S(ICDMCC=2:237,1:238)
"RTN","ICD10TB2",51,0)
 ;Q
"RTN","ICD10TB2",52,0)
DRG239 ;
"RTN","ICD10TB2",53,0)
DRG240 ;
"RTN","ICD10TB2",54,0)
DRG241 ;
"RTN","ICD10TB2",55,0)
 S ICDRG=$S(ICDMCC=2:239,ICDMCC=1:240,1:241)
"RTN","ICD10TB2",56,0)
 Q
"RTN","ICD10TB2",57,0)
DRG242 ; called from CMS115
"RTN","ICD10TB2",58,0)
DRG243 ;
"RTN","ICD10TB2",59,0)
DRG244 ;
"RTN","ICD10TB2",60,0)
 S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244)
"RTN","ICD10TB2",61,0)
 Q
"RTN","ICD10TB2",62,0)
DRG245 ;
"RTN","ICD10TB2",63,0)
 S ICDRG=245 Q
"RTN","ICD10TB2",64,0)
DRG246 ;
"RTN","ICD10TB2",65,0)
DRG247 ;
"RTN","ICD10TB2",66,0)
DRG248 ;
"RTN","ICD10TB2",67,0)
DRG249 ;
"RTN","ICD10TB2",68,0)
 Q
"RTN","ICD10TB2",69,0)
DRG250 ;
"RTN","ICD10TB2",70,0)
DRG251 S ICDRG=$S(ICDMCC=2:250,1:251) Q
"RTN","ICD10TB2",71,0)
DRG252 ;
"RTN","ICD10TB2",72,0)
DRG253 ;
"RTN","ICD10TB2",73,0)
DRG254 S ICDRG=$S(ICDMCC=2:252,ICDMCC=1:253,1:254) Q
"RTN","ICD10TB2",74,0)
DRG255 ;
"RTN","ICD10TB2",75,0)
DRG256 ;
"RTN","ICD10TB2",76,0)
DRG257 S ICDRG=$S(ICDMCC=2:255,ICDMCC=1:256,1:257) Q
"RTN","ICD10TB2",77,0)
DRG258 ;
"RTN","ICD10TB2",78,0)
DRG259 ;
"RTN","ICD10TB2",79,0)
 S ICDRG=$S(ICDMCC=2:258,1:259) Q
"RTN","ICD10TB2",80,0)
DRG260 ;
"RTN","ICD10TB2",81,0)
DRG261 ;
"RTN","ICD10TB2",82,0)
DRG262 ;
"RTN","ICD10TB2",83,0)
 S ICDRG=$S(ICDMCC=2:260,ICDMCC=1:261,1:262)
"RTN","ICD10TB2",84,0)
 Q
"RTN","ICD10TB2",85,0)
DRG263 S ICDRG=263 Q
"RTN","ICD10TB2",86,0)
DRG264 S ICDRG=264 Q
"RTN","ICD10TB2",87,0)
DRG265 S ICDRG=265 Q
"RTN","ICD10TB2",88,0)
DRG266 ;
"RTN","ICD10TB2",89,0)
 S ICDRG=266 Q
"RTN","ICD10TB2",90,0)
DRG267 ;
"RTN","ICD10TB2",91,0)
 S ICDRG=267 Q
"RTN","ICD10TB2",92,0)
DRG268 ;
"RTN","ICD10TB2",93,0)
 S ICDRG=268 Q
"RTN","ICD10TB2",94,0)
DRG269 ;
"RTN","ICD10TB2",95,0)
 S ICDRG=269 Q
"RTN","ICD10TB2",96,0)
DRG270 ;
"RTN","ICD10TB2",97,0)
 S ICDRG=270 Q
"RTN","ICD10TB2",98,0)
DRG271 ;
"RTN","ICD10TB2",99,0)
 S ICDRG=271 Q
"RTN","ICD10TB2",100,0)
DRG272 ;
"RTN","ICD10TB2",101,0)
 S ICDRG=272 Q
"RTN","ICD10TB2",102,0)
DRG273 ;
"RTN","ICD10TB2",103,0)
 S ICDRG=273 Q
"RTN","ICD10TB2",104,0)
DRG274 ;
"RTN","ICD10TB2",105,0)
 S ICDRG=274 Q
"RTN","ICD10TB2",106,0)
DRG275 ;
"RTN","ICD10TB2",107,0)
 S ICDRG=275 Q
"RTN","ICD10TB2",108,0)
DRG276 ;
"RTN","ICD10TB2",109,0)
 S ICDRG=276 Q
"RTN","ICD10TB2",110,0)
DRG277 ;
"RTN","ICD10TB2",111,0)
 S ICDRG=277 Q
"RTN","ICD10TB2",112,0)
DRG278 ;
"RTN","ICD10TB2",113,0)
 S ICDRG=278 Q
"RTN","ICD10TB2",114,0)
DRG279 ;
"RTN","ICD10TB2",115,0)
 S ICDRG=279 Q
"RTN","ICD10TB2",116,0)
DRG280 ;
"RTN","ICD10TB2",117,0)
DRG281 ;
"RTN","ICD10TB2",118,0)
DRG282 ;
"RTN","ICD10TB2",119,0)
DRG283 ;
"RTN","ICD10TB2",120,0)
DRG284 ;
"RTN","ICD10TB2",121,0)
DRG285 ;
"RTN","ICD10TB2",122,0)
 Q
"RTN","ICD10TB2",123,0)
DRG286 ;
"RTN","ICD10TB2",124,0)
DRG287 ;
"RTN","ICD10TB2",125,0)
 S ICDRG=$S(ICDMCC=2:286,1:287) Q
"RTN","ICD10TB2",126,0)
DRG288 ;
"RTN","ICD10TB2",127,0)
DRG289 ;
"RTN","ICD10TB2",128,0)
DRG290 S ICDRG=$S(ICDMCC=2:288,ICDMCC=1:289,1:290) Q
"RTN","ICD10TB2",129,0)
DRG291 ;
"RTN","ICD10TB2",130,0)
DRG292 ;
"RTN","ICD10TB2",131,0)
DRG293 ;
"RTN","ICD10TB2",132,0)
 S ICDRG=$S(ICDMCC=2:291,ICDMCC=1:292,1:293) Q
"RTN","ICD10TB2",133,0)
DRG294 ;
"RTN","ICD10TB2",134,0)
DRG295 S ICDRG=$S(ICDMCC>0:294,1:295) Q
"RTN","ICD10TB2",135,0)
DRG296 ;
"RTN","ICD10TB2",136,0)
DRG297 ;
"RTN","ICD10TB2",137,0)
DRG298 ;
"RTN","ICD10TB2",138,0)
 S ICDRG=$S(ICDMCC=2:296,ICDMCC=1:297,1:298) Q
"RTN","ICD10TB2",139,0)
DRG299 ;
"RTN","ICD10TB2",140,0)
DRG300 ;
"RTN","ICD10TB2",141,0)
DRG301 ;
"RTN","ICD10TB2",142,0)
 S ICDRG=$S(ICDMCC=2:299,ICDMCC=1:300,1:301) Q
"RTN","ICD10TB2",143,0)
 Q
"RTN","ICD10TB2",144,0)
CMS115 ;convert DRG115^ICDTLB2C code - no MS-DRG 115 existed
"RTN","ICD10TB2",145,0)
 D EN1^ICDDRG5
"RTN","ICD10TB2",146,0)
 I ICDOR[7 S ICDRG=$S(ICDMCC=2:260,ICDMCC=1:261,1:262) Q
"RTN","ICD10TB2",147,0)
 I ICDPD'["I"&(ICDOR'["p")&(ICDCC2=0)&(ICDCC3=0) D  Q
"RTN","ICD10TB2",148,0)
 .I ICDSD["V" S ICDMCC=0
"RTN","ICD10TB2",149,0)
 .S ICDRG=$S(ICDMCC=2:291,ICDMCC=1:292,1:293)
"RTN","ICD10TB2",150,0)
 I ICDCC2=1!(ICDCC3=1) D DRG242
"RTN","ICD10TB2",151,0)
 I ((ICDRG>241)&(ICDRG<245)) Q
"RTN","ICD10TB2",152,0)
 ; ICDCC2 identifies AICD LEAD OR GNRTR
"RTN","ICD10TB2",153,0)
 I ICDCC2=1!(ICDCC3=1) D  Q
"RTN","ICD10TB2",154,0)
 . S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244) Q
"RTN","ICD10TB2",155,0)
  I ICDOR["p" D  Q
"RTN","ICD10TB2",156,0)
 . S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244) Q
"RTN","ICD10TB2",157,0)
 Q
"RTN","ICD10TB2",158,0)
CMS516 ;convert DRG516^ICDTLB6C code - no MS-DRG 516 exists
"RTN","ICD10TB2",159,0)
 S ICDRG=250
"RTN","ICD10TB2",160,0)
 I '$D(ICDOP(" 36.06"))&'$D(ICDOP(" 92.27"))&'$D(ICDOP(" 36.07")) D DRG251
"RTN","ICD10TB2",161,0)
 E  D DRG248
"RTN","ICD10TB2",162,0)
 I $D(ICDOP(" 36.07")) D DRG246
"RTN","ICD10TB2",163,0)
 Q
"RTN","ICD10TB2",164,0)
MCV ; checks to see if case qualifies as an MCV (major cardiovascular complications or complex conditions)
"RTN","ICD10TB2",165,0)
 S (ICDMCV,ICDMCV1,ICDMCV2)=0
"RTN","ICD10TB2",166,0)
 ; ICDPD=identifier for prime dx  ICDSD=identifier for any secondary dx
"RTN","ICD10TB2",167,0)
 ; DGDX(1)=prime dx  ICDDX(1)=ien of prime dx ICDDXT=any secondary dx  
"RTN","ICD10TB2",168,0)
 I ICDPD["c"!(ICDSD["c") S ICDMCV=1
"RTN","ICD10TB2",169,0)
 I ICDSD["s" S ICDMCV=1
"RTN","ICD10TB2",170,0)
 ;I DGDX(1)["426.0"!(DGDX(1)["426.53")!(DGDX(1)["426.54") S ICDMCV1=1
"RTN","ICD10TB2",171,0)
 I $G(ICDDX(1))=9056!($G(ICDDX(1))=2548)!($G(ICDDX(1))=2549) S ICDMCV1=1
"RTN","ICD10TB2",172,0)
 I $D(ICDDXT("426.0"))!($D(ICDDXT("426.53")))!($D(ICDDXT("426.54"))) S ICDMCV1=1
"RTN","ICD10TB2",173,0)
 ;I DGDX(1)["411.1"!(DGDX(1)["411.81") S ICDMCV2=1
"RTN","ICD10TB2",174,0)
 I $G(ICDDX(1))=2500!($G(ICDDX(1))=12477) S ICDMCV2=1
"RTN","ICD10TB2",175,0)
 I $D(ICDDXT("411.1"))!($D(ICDDXT("411.81"))) S ICDMCV2=1
"RTN","ICD10TB2",176,0)
 Q
"RTN","ICD10TB4")
0^7^B8872895^B9167308
"RTN","ICD10TB4",1,0)
ICD10TB4 ;KUM - GROUPER UTILITY FUNCTIONS;08/04/2015
"RTN","ICD10TB4",2,0)
 ;;18.0;DRG Grouper;**64,82**;Oct 20, 2000;Build 21
"RTN","ICD10TB4",3,0)
 ;
"RTN","ICD10TB4",4,0)
DRG400 ;
"RTN","ICD10TB4",5,0)
DRG401 ;
"RTN","ICD10TB4",6,0)
DRG402 ;
"RTN","ICD10TB4",7,0)
DRG403 ;
"RTN","ICD10TB4",8,0)
DRG404 ;
"RTN","ICD10TB4",9,0)
 Q
"RTN","ICD10TB4",10,0)
DRG405 ;
"RTN","ICD10TB4",11,0)
DRG406 ;
"RTN","ICD10TB4",12,0)
DRG407 S ICDRG=$S(ICDMCC=2:405,ICDMCC=1:406,1:407) Q
"RTN","ICD10TB4",13,0)
DRG408 ;
"RTN","ICD10TB4",14,0)
DRG409 ;
"RTN","ICD10TB4",15,0)
DRG410 ;
"RTN","ICD10TB4",16,0)
 S ICDRG=$S(ICDMCC=2:408,ICDMCC=1:409,1:410) Q
"RTN","ICD10TB4",17,0)
 Q
"RTN","ICD10TB4",18,0)
DRG411 ;
"RTN","ICD10TB4",19,0)
DRG412 ;
"RTN","ICD10TB4",20,0)
DRG413 ;
"RTN","ICD10TB4",21,0)
DRG414 ;
"RTN","ICD10TB4",22,0)
DRG415 ;
"RTN","ICD10TB4",23,0)
DRG416 ;
"RTN","ICD10TB4",24,0)
DRG417 ;
"RTN","ICD10TB4",25,0)
DRG418 ;
"RTN","ICD10TB4",26,0)
DRG419 ;
"RTN","ICD10TB4",27,0)
 Q
"RTN","ICD10TB4",28,0)
DRG420 ;
"RTN","ICD10TB4",29,0)
DRG421 ;
"RTN","ICD10TB4",30,0)
DRG422 ;
"RTN","ICD10TB4",31,0)
 S ICDRG=$S(ICDMCC=2:420,ICDMCC=1:421,1:422) Q
"RTN","ICD10TB4",32,0)
DRG423 ;
"RTN","ICD10TB4",33,0)
DRG424 ;
"RTN","ICD10TB4",34,0)
DRG425 S ICDRG=$S(ICDMCC=2:423,ICDMCC=1:424,1:425) Q
"RTN","ICD10TB4",35,0)
DRG426 ;
"RTN","ICD10TB4",36,0)
DRG427 ;
"RTN","ICD10TB4",37,0)
DRG428 ;
"RTN","ICD10TB4",38,0)
DRG429 ;
"RTN","ICD10TB4",39,0)
DRG430 ;
"RTN","ICD10TB4",40,0)
DRG431 ;
"RTN","ICD10TB4",41,0)
 Q
"RTN","ICD10TB4",42,0)
DRG432 ;
"RTN","ICD10TB4",43,0)
DRG433 ;
"RTN","ICD10TB4",44,0)
DRG434 S ICDRG=$S(ICDMCC=2:432,ICDMCC=1:433,1:434) Q
"RTN","ICD10TB4",45,0)
DRG435 ;
"RTN","ICD10TB4",46,0)
DRG436 ;
"RTN","ICD10TB4",47,0)
DRG437 ;
"RTN","ICD10TB4",48,0)
 S ICDRG=$S(ICDMCC=2:435,ICDMCC=1:436,1:437) Q
"RTN","ICD10TB4",49,0)
DRG438 ;
"RTN","ICD10TB4",50,0)
DRG439 ;
"RTN","ICD10TB4",51,0)
DRG440 ;
"RTN","ICD10TB4",52,0)
 S ICDRG=$S(ICDMCC=2:438,ICDMCC=1:439,1:440) Q
"RTN","ICD10TB4",53,0)
DRG441 ;
"RTN","ICD10TB4",54,0)
DRG442 ;
"RTN","ICD10TB4",55,0)
DRG443 S ICDRG=$S(ICDMCC=2:441,ICDMCC=1:442,1:443) Q
"RTN","ICD10TB4",56,0)
DRG444 ;
"RTN","ICD10TB4",57,0)
DRG445 ;
"RTN","ICD10TB4",58,0)
DRG446 S ICDRG=$S(ICDMCC=2:444,ICDMCC=1:445,1:446) Q
"RTN","ICD10TB4",59,0)
DRG447 ;
"RTN","ICD10TB4",60,0)
DRG448 ;
"RTN","ICD10TB4",61,0)
DRG449 ;
"RTN","ICD10TB4",62,0)
DRG450 ;
"RTN","ICD10TB4",63,0)
DRG451 ;
"RTN","ICD10TB4",64,0)
DRG452 ;
"RTN","ICD10TB4",65,0)
DRG453 ;
"RTN","ICD10TB4",66,0)
DRG454 ;
"RTN","ICD10TB4",67,0)
DRG455 ;
"RTN","ICD10TB4",68,0)
 S ICDRG=$S(ICDMCC=2:453,ICDMCC=1:454,1:455) Q
"RTN","ICD10TB4",69,0)
DRG456 ;
"RTN","ICD10TB4",70,0)
DRG457 ;
"RTN","ICD10TB4",71,0)
DRG458 ;
"RTN","ICD10TB4",72,0)
 S ICDRG=$S(ICDMCC=2:456,ICDMCC=1:457,1:458) Q
"RTN","ICD10TB4",73,0)
DRG459 ;
"RTN","ICD10TB4",74,0)
DRG460 S ICDRG=$S(ICDMCC=2:459,1:460) Q
"RTN","ICD10TB4",75,0)
DRG461 ;
"RTN","ICD10TB4",76,0)
DRG462 ;
"RTN","ICD10TB4",77,0)
 S ICDRG=$S(ICDMCC=2:461,1:462) Q
"RTN","ICD10TB4",78,0)
DRG463 ;
"RTN","ICD10TB4",79,0)
DRG464 ;
"RTN","ICD10TB4",80,0)
DRG465 S ICDRG=$S(ICDMCC=2:463,ICDMCC=1:464,1:465) Q
"RTN","ICD10TB4",81,0)
DRG466 ;
"RTN","ICD10TB4",82,0)
DRG467 ;
"RTN","ICD10TB4",83,0)
DRG468 S ICDRG=$S(ICDMCC=2:466,ICDMCC=1:467,1:468) Q
"RTN","ICD10TB4",84,0)
DRG469 ;
"RTN","ICD10TB4",85,0)
DRG470 ;
"RTN","ICD10TB4",86,0)
 S ICDRG=$S(ICDMCC=2:469,1:470) Q
"RTN","ICD10TB4",87,0)
DRG471 ;
"RTN","ICD10TB4",88,0)
DRG472 ;
"RTN","ICD10TB4",89,0)
DRG473 S ICDRG=$S(ICDMCC=2:471,ICDMCC=1:472,1:473) Q
"RTN","ICD10TB4",90,0)
DRG474 ;
"RTN","ICD10TB4",91,0)
DRG475 ;
"RTN","ICD10TB4",92,0)
DRG476 S ICDRG=$S(ICDMCC=2:474,ICDMCC=1:475,1:476) Q
"RTN","ICD10TB4",93,0)
DRG477 ;
"RTN","ICD10TB4",94,0)
DRG478 ;
"RTN","ICD10TB4",95,0)
DRG479 S ICDRG=$S(ICDMCC=2:477,ICDMCC=1:478,1:479) Q
"RTN","ICD10TB4",96,0)
DRG480 ;
"RTN","ICD10TB4",97,0)
DRG481 ;
"RTN","ICD10TB4",98,0)
DRG482 S ICDRG=$S(ICDMCC=2:480,ICDMCC=1:481,1:482) Q
"RTN","ICD10TB4",99,0)
DRG483 S ICDRG=483 Q
"RTN","ICD10TB4",100,0)
 ;DRG484 S ICDRG=$S(ICDMCC>0:483,1:484) Q
"RTN","ICD10TB4",101,0)
DRG485 ;
"RTN","ICD10TB4",102,0)
DRG486 ;
"RTN","ICD10TB4",103,0)
DRG487 ;
"RTN","ICD10TB4",104,0)
DRG488 ;
"RTN","ICD10TB4",105,0)
DRG489 ;
"RTN","ICD10TB4",106,0)
 I $D(ICD10PD("k")) S ICDRG=$S(ICDMCC=2:485,ICDMCC=1:486,1:487) Q
"RTN","ICD10TB4",107,0)
 S ICDRG=$S(ICDMCC>0:488,1:489)
"RTN","ICD10TB4",108,0)
 Q
"RTN","ICD10TB4",109,0)
 ;DRG490 ; 
"RTN","ICD10TB4",110,0)
 ;DRG491 ; 
"RTN","ICD10TB4",111,0)
DRG492 ;
"RTN","ICD10TB4",112,0)
DRG493 ;
"RTN","ICD10TB4",113,0)
DRG494 S ICDRG=$S(ICDMCC=2:492,ICDMCC=1:493,1:494) Q
"RTN","ICD10TB4",114,0)
DRG495 ;
"RTN","ICD10TB4",115,0)
DRG496 ;
"RTN","ICD10TB4",116,0)
DRG497 S ICDRG=$S(ICDMCC=2:495,ICDMCC=1:496,1:497) Q
"RTN","ICD10TB4",117,0)
DRG498 ;
"RTN","ICD10TB4",118,0)
DRG499 S ICDRG=$S(ICDMCC>0:498,1:499) Q
"RTN","ICD10TB4",119,0)
 Q
"RTN","ICD10TB8")
0^24^B8641752^B7326303
"RTN","ICD10TB8",1,0)
ICD10TB8 ;KUM - GROUPER UTILITY FUNCTIONS;05/04/2012
"RTN","ICD10TB8",2,0)
 ;;18.0;DRG Grouper;**64,82**;Oct 20, 2000;Build 21
"RTN","ICD10TB8",3,0)
 ;
"RTN","ICD10TB8",4,0)
 ;DRG800 ; D DRG800^ICDTBL8D - See ICD10TB7
"RTN","ICD10TB8",5,0)
 ;DRG801 S ICDRG=$S(ICDMCC=2:799,ICDMCC=1:800,1:801) Q  - See ICD10TB7
"RTN","ICD10TB8",6,0)
DRG802 ;
"RTN","ICD10TB8",7,0)
DRG803 ;
"RTN","ICD10TB8",8,0)
DRG804 S ICDRG=$S(ICDMCC=2:802,ICDMCC=1:803,1:804) Q
"RTN","ICD10TB8",9,0)
DRG805 ;
"RTN","ICD10TB8",10,0)
DRG806 ;
"RTN","ICD10TB8",11,0)
DRG807 ;
"RTN","ICD10TB8",12,0)
 Q
"RTN","ICD10TB8",13,0)
DRG808 ;
"RTN","ICD10TB8",14,0)
DRG809 ;
"RTN","ICD10TB8",15,0)
DRG810 S ICDRG=$S(ICDMCC=2:808,ICDMCC=1:809,1:810) Q
"RTN","ICD10TB8",16,0)
DRG811 ;
"RTN","ICD10TB8",17,0)
DRG812 S ICDRG=$S(ICDMCC=2:811,1:812) Q
"RTN","ICD10TB8",18,0)
DRG813 ;
"RTN","ICD10TB8",19,0)
 Q
"RTN","ICD10TB8",20,0)
DRG814 ;
"RTN","ICD10TB8",21,0)
DRG815 ;
"RTN","ICD10TB8",22,0)
DRG816 S ICDRG=$S(ICDMCC=2:814,ICDMCC=1:815,1:816) Q
"RTN","ICD10TB8",23,0)
DRG817 ;
"RTN","ICD10TB8",24,0)
DRG818 ;
"RTN","ICD10TB8",25,0)
DRG819 ;
"RTN","ICD10TB8",26,0)
 Q
"RTN","ICD10TB8",27,0)
DRG820 ;
"RTN","ICD10TB8",28,0)
DRG821 ;
"RTN","ICD10TB8",29,0)
DRG822 ;
"RTN","ICD10TB8",30,0)
 Q
"RTN","ICD10TB8",31,0)
DRG823 ;
"RTN","ICD10TB8",32,0)
DRG824 ;
"RTN","ICD10TB8",33,0)
DRG825 ;
"RTN","ICD10TB8",34,0)
 Q
"RTN","ICD10TB8",35,0)
DRG826 ;
"RTN","ICD10TB8",36,0)
DRG827 ;
"RTN","ICD10TB8",37,0)
DRG828 ;
"RTN","ICD10TB8",38,0)
DRG829 ;
"RTN","ICD10TB8",39,0)
DRG830 ;
"RTN","ICD10TB8",40,0)
 Q
"RTN","ICD10TB8",41,0)
DRG831 ;
"RTN","ICD10TB8",42,0)
DRG832 ;
"RTN","ICD10TB8",43,0)
DRG833 ;
"RTN","ICD10TB8",44,0)
 Q
"RTN","ICD10TB8",45,0)
DRG834 ;
"RTN","ICD10TB8",46,0)
DRG835 ;
"RTN","ICD10TB8",47,0)
DRG836 ;
"RTN","ICD10TB8",48,0)
 Q
"RTN","ICD10TB8",49,0)
DRG837 ;
"RTN","ICD10TB8",50,0)
DRG838 ;
"RTN","ICD10TB8",51,0)
DRG839 ;
"RTN","ICD10TB8",52,0)
 Q
"RTN","ICD10TB8",53,0)
DRG840 ;
"RTN","ICD10TB8",54,0)
DRG841 ;
"RTN","ICD10TB8",55,0)
DRG842 ;
"RTN","ICD10TB8",56,0)
 S ICDRG=$S(ICDMCC=2:840,ICDMCC=1:841,1:842)
"RTN","ICD10TB8",57,0)
DRG843 ;
"RTN","ICD10TB8",58,0)
DRG844 ;
"RTN","ICD10TB8",59,0)
DRG845 ;
"RTN","ICD10TB8",60,0)
 Q
"RTN","ICD10TB8",61,0)
DRG846 ;
"RTN","ICD10TB8",62,0)
DRG847 ;
"RTN","ICD10TB8",63,0)
DRG848 ;
"RTN","ICD10TB8",64,0)
 S ICDRG=$S(ICDMCC=2:846,ICDMCC=1:847,1:848) Q
"RTN","ICD10TB8",65,0)
DRG849 ;
"RTN","ICD10TB8",66,0)
DRG850 ;
"RTN","ICD10TB8",67,0)
DRG851 ;
"RTN","ICD10TB8",68,0)
DRG852 ;
"RTN","ICD10TB8",69,0)
 Q
"RTN","ICD10TB8",70,0)
DRG853 ;
"RTN","ICD10TB8",71,0)
DRG854 ;
"RTN","ICD10TB8",72,0)
DRG855  ;
"RTN","ICD10TB8",73,0)
 Q
"RTN","ICD10TB8",74,0)
DRG856 ;
"RTN","ICD10TB8",75,0)
DRG857 ;
"RTN","ICD10TB8",76,0)
DRG858 ;
"RTN","ICD10TB8",77,0)
 Q
"RTN","ICD10TB8",78,0)
DRG859 ;
"RTN","ICD10TB8",79,0)
DRG860 ;
"RTN","ICD10TB8",80,0)
DRG861 ;
"RTN","ICD10TB8",81,0)
 Q
"RTN","ICD10TB8",82,0)
DRG862 ;
"RTN","ICD10TB8",83,0)
DRG863 ;
"RTN","ICD10TB8",84,0)
 S ICDRG=$S(ICDMCC=2:862,1:863) Q
"RTN","ICD10TB8",85,0)
DRG864 ;
"RTN","ICD10TB8",86,0)
 Q
"RTN","ICD10TB8",87,0)
DRG865 ;
"RTN","ICD10TB8",88,0)
DRG866 ;
"RTN","ICD10TB8",89,0)
 S ICDRG=$S(ICDMCC=2:865,1:866) Q
"RTN","ICD10TB8",90,0)
DRG867 ;
"RTN","ICD10TB8",91,0)
DRG868 ;
"RTN","ICD10TB8",92,0)
DRG869 S ICDRG=$S(ICDMCC=2:867,ICDMCC=1:868,1:869) Q
"RTN","ICD10TB8",93,0)
DRG870 ;
"RTN","ICD10TB8",94,0)
DRG871 ;
"RTN","ICD10TB8",95,0)
DRG872 ;
"RTN","ICD10TB8",96,0)
 Q
"RTN","ICD10TB8",97,0)
DRG876 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",98,0)
 Q
"RTN","ICD10TB8",99,0)
DRG880 S ICDRG=880 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",100,0)
 Q
"RTN","ICD10TB8",101,0)
DRG881 S ICDRG=881 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",102,0)
 Q
"RTN","ICD10TB8",103,0)
DRG882 S ICDRG=882 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",104,0)
 Q
"RTN","ICD10TB8",105,0)
DRG883 S ICDRG=883 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",106,0)
 Q
"RTN","ICD10TB8",107,0)
DRG884 S ICDRG=884 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",108,0)
 Q
"RTN","ICD10TB8",109,0)
DRG885 S ICDRG=885 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",110,0)
 Q
"RTN","ICD10TB8",111,0)
DRG886 S ICDRG=886 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",112,0)
 Q
"RTN","ICD10TB8",113,0)
DRG887 S ICDRG=887 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",114,0)
 Q
"RTN","ICD10TB8",115,0)
DRG888 ;
"RTN","ICD10TB8",116,0)
DRG889 ;
"RTN","ICD10TB8",117,0)
DRG890 ;
"RTN","ICD10TB8",118,0)
DRG891 ;
"RTN","ICD10TB8",119,0)
DRG892 ;
"RTN","ICD10TB8",120,0)
DRG893 ;
"RTN","ICD10TB8",121,0)
DRG894 I ICDDX(1)=503659,ICDMDC=20,$D(ICDOP(" 06743DZ")) D DRG981^ICD10TB9 Q
"RTN","ICD10TB8",122,0)
 I ICDDX(1)=504018,ICDMDC=20,$D(ICDOP(" 0BBK4ZZ")) D DRG981^ICD10TB9 Q
"RTN","ICD10TB8",123,0)
 Q
"RTN","ICD10TB8",124,0)
DRG895 ;
"RTN","ICD10TB8",125,0)
DRG896 ;
"RTN","ICD10TB8",126,0)
DRG897 ;
"RTN","ICD10TB8",127,0)
 Q
"RTN","ICD10TB8",128,0)
DRG898 ;
"RTN","ICD10TB8",129,0)
DRG899 ;
"RTN","ICD10TB8",130,0)
DRG900 ;
"RTN","ICD10TB8",131,0)
 Q
"RTN","ICD1882A")
0^11^B164569535^n/a
"RTN","ICD1882A",1,0)
ICD1882A ;ALB/JDG - POST INSTALL ROUTINE;8/1/2015
"RTN","ICD1882A",2,0)
 ;;18.0;DRG Grouper;**82**;Oct 20, 2000;Build 21
"RTN","ICD1882A",3,0)
 ;
"RTN","ICD1882A",4,0)
 Q
"RTN","ICD1882A",5,0)
 ;
"RTN","ICD1882A",6,0)
PRE ;delete data
"RTN","ICD1882A",7,0)
 ;if previously installed then delete files 80.5,80.6,82.11,82.12
"RTN","ICD1882A",8,0)
 D DELFILES^ICD1882B
"RTN","ICD1882A",9,0)
 Q
"RTN","ICD1882A",10,0)
 ;
"RTN","ICD1882A",11,0)
POST ;
"RTN","ICD1882A",12,0)
 N ICDX,ICDY,ICDHIST,ICDCSYS,ICDIEN,ICDPRE,ICDST,ICDCODE,ICDR,ICDEFF,ICDDX9,ICDDTTX,ICDF,ICDMDCF,ICDVAR,ICDCC
"RTN","ICD1882A",13,0)
 N ICDSTA,ICDI,ICDMIEN,ICDRGIEN,ICDFN,ICDDESC,ICDIX,ICDSTOP,ICDFILE,ICDFILE2,ICDAIDA,ICDMULT,ICDDAP,ICDCCMCC,ICDCCIEN
"RTN","ICD1882A",14,0)
 N ICDPDX,ICD103,ICD40,ICD14,ICD40IEN,ICD73IEN,ICD82,ICD821,ICD82T,ICDA,ICDB,ICDBLIEN,ICDBLK,ICDC,ICDCT,ICDDA,ICDDRGS,ICDDXCC
"RTN","ICD1882A",15,0)
 N ICDDXIEN,ICDEXCL,ICDEXIEN,ICDF2,ICDFI,ICDFILE,ICDFILE1,ICDFILE2,ICDFILE3,ICDFILE4,ICDFLAG,ICDFR,ICDFT,ICDMAC,ICDIEN2
"RTN","ICD1882A",16,0)
 N ICDLET,ICDMDDRG,ICDMDIEN,ICDONEI,ICDORCD,ICDOWN,ICDPCS,ICDPRIEN,ICDPRIM,ICDREC,ICDTO,ICDTY,ICDWIDTH,ICDXIEN,ICDYES,ICDWITH
"RTN","ICD1882A",17,0)
 N ICDN,ICDX,ICDIEN,ICDIEN9,ICDDX,ICDDAIEN,ICDFDA,ICDERR,ICDI,ICDDRG,ICDMDC,ICDBAD,ICDIDEN,ICDDX9,ICDMDC,ICDMDC24,ICDMDC25,ICDDRGN
"RTN","ICD1882A",18,0)
 N ICDORD,ICDDRG,ICDCC,ICDHAC,ICDA,ICDSUM,ICD73,DIK,ICDNODE
"RTN","ICD1882A",19,0)
 S U="^"
"RTN","ICD1882A",20,0)
 I $G(XPDQUES("POS1"))=0 S XPDABORT=1,XPDQUIT=1,XPDQUIT("ICD*18.0*82")=1 D BMES^XPDUTL("Load was aborted by the user.") Q
"RTN","ICD1882A",21,0)
 I $G(XPDQUES("POS3"))=0 S XPDABORT=1,XPDQUIT=1,XPDQUIT("ICD*18.0*82")=1 D BMES^XPDUTL("DRG load was aborted by the user.") Q
"RTN","ICD1882A",22,0)
 D BMES^XPDUTL("Starting DRG update...")
"RTN","ICD1882A",23,0)
 D UPDATING
"RTN","ICD1882A",24,0)
 D CLEANUP^ICD1882B
"RTN","ICD1882A",25,0)
 D BMES^XPDUTL("DRG data has been loaded. Messages are in the file #9.7 IEN "_XPDA)
"RTN","ICD1882A",26,0)
 Q
"RTN","ICD1882A",27,0)
 ;
"RTN","ICD1882A",28,0)
UPDATING ;
"RTN","ICD1882A",29,0)
 ;
"RTN","ICD1882A",30,0)
 S ICDN=0,DIK="^ICDID(" F  S ICDN=$O(^ICDID(ICDN)) Q:'ICDN  S DA=ICDN D ^DIK
"RTN","ICD1882A",31,0)
 S ICDN=0,DIK="^ICDIP(" F  S ICDN=$O(^ICDIP(ICDN)) Q:'ICDN  S DA=ICDN D ^DIK
"RTN","ICD1882A",32,0)
 K ^TMP("ICDLD82",$J),ICDSUM
"RTN","ICD1882A",33,0)
 S ICDEFF=$$IMPDATE^LEXU("10D") I $P(ICDEFF,U,1)=-1 D BMES^XPDUTL("Bad Implementation Date: "_ICDEFF_" Aborting.") Q
"RTN","ICD1882A",34,0)
 D UP82^ICD1882B
"RTN","ICD1882A",35,0)
 D UP82ADD^ICD1882B
"RTN","ICD1882A",36,0)
 D UP80
"RTN","ICD1882A",37,0)
 D UP801
"RTN","ICD1882A",38,0)
 D UPID10
"RTN","ICD1882A",39,0)
 D UP802
"RTN","ICD1882A",40,0)
 D UP805
"RTN","ICD1882A",41,0)
 D UP806
"RTN","ICD1882A",42,0)
 D UP8211^ICD1882B
"RTN","ICD1882A",43,0)
 D UP8211B^ICD1882B
"RTN","ICD1882A",44,0)
 D UP8213^ICD1882B
"RTN","ICD1882A",45,0)
 D MAJOROR^ICD1882B
"RTN","ICD1882A",46,0)
 K ^TMP("ICDLD82",$J)
"RTN","ICD1882A",47,0)
 Q
"RTN","ICD1882A",48,0)
 ;
"RTN","ICD1882A",49,0)
UP80 ;
"RTN","ICD1882A",50,0)
 ;Load file #80 - Appendix B
"RTN","ICD1882A",51,0)
 D BMES^XPDUTL("Starting File #80 "_$$DTTIME)
"RTN","ICD1882A",52,0)
 S ICDN="",U="^"
"RTN","ICD1882A",53,0)
 F  S ICDN=$O(^ICDLD82(80,"A",ICDN)) Q:ICDN=""  S ICDX=^ICDLD82(80,"A",ICDN),ICDDX=$P(ICDX,U,1),ICDIEN=$O(^ICD9("BA",ICDDX_" ","")) Q:'ICDIEN  D
"RTN","ICD1882A",54,0)
 .S ICD73=0 F  S ICD73=$O(^ICD9(ICDIEN,73,ICD73)) Q:'ICD73  K DA S DA=ICD73,DA(1)=ICDIEN,DIK="^ICD9("_DA(1)_",73," D ^DIK
"RTN","ICD1882A",55,0)
 .S ICDNODE=0 F  S ICDNODE=$O(^ICD9(ICDIEN,3,ICDNODE)) Q:'ICDNODE  K DA S DA=ICDNODE,DA(1)=ICDIEN,DIK="^ICD9("_DA(1)_",3," D ^DIK
"RTN","ICD1882A",56,0)
 .S ICDNODE=0 F  S ICDNODE=$O(^ICD9(ICDIEN,4,ICDNODE)) Q:'ICDNODE  K DA S DA=ICDNODE,DA(1)=ICDIEN,DIK="^ICD9("_DA(1)_",4," D ^DIK
"RTN","ICD1882A",57,0)
 .S ICDNODE=0 F  S ICDNODE=$O(^ICD9(ICDIEN,69,ICDNODE)) Q:'ICDNODE  K DA S DA=ICDNODE,DA(1)=ICDIEN,DIK="^ICD9("_DA(1)_",69," D ^DIK
"RTN","ICD1882A",58,0)
 S ICDN="",U="^"
"RTN","ICD1882A",59,0)
 F  S ICDN=$O(^ICDLD82(80,"A",ICDN)) Q:ICDN=""  S ICDX=^ICDLD82(80,"A",ICDN),ICDDX=$P(ICDX,U,1),ICDIEN=$O(^ICD9("BA",ICDDX_" ","")) D
"RTN","ICD1882A",60,0)
 .I ICDIEN="" D BMES^XPDUTL("ICD Code: "_ICDDX_" not in file #80") S ICDSUM(80,"B")=$G(ICDSUM(80,"B"))+1 Q
"RTN","ICD1882A",61,0)
 .I '$D(^ICD9(ICDIEN,0)) D BMES^XPDUTL("ICD Code: "_ICDDX_" bad x-ref IEN: "_ICDIEN) S ICDSUM(80,"B")=$G(ICDSUM(80,"B"))+1 Q
"RTN","ICD1882A",62,0)
 .S ^TMP("ICDLD82",$J)="80: "_ICDDX_" "_ICDIEN,ICDSUM(80,"G")=$G(ICDSUM(80,"G"))+1
"RTN","ICD1882A",63,0)
 .S ICD73=0 F  S ICD73=$O(^ICD9(ICDIEN,73,ICD73)) Q:'ICD73  K DA S DA=ICD73,DA(1)=ICDIEN,DIK="^ICD9("_DA(1)_",73," D ^DIK
"RTN","ICD1882A",64,0)
 .S ICDDAIEN=$O(^ICD9(ICDIEN,3,"B",ICDEFF,"")) I 'ICDDAIEN D
"RTN","ICD1882A",65,0)
 ..K ICDFDA S ICDFDA("80.071","+1,"_ICDIEN_",",.01)=ICDEFF K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",66,0)
 ..S ICDDAIEN=$O(^ICD9(ICDIEN,3,"B",ICDEFF,""))
"RTN","ICD1882A",67,0)
 .I ICDDAIEN S ICDDRGS=$P(ICDX,U,3) I ICDDRGS'="" S ICDFR=+$P(ICDDRGS,"-",1),ICDTO=+$P(ICDDRGS,"-",2) S:ICDTO=0 ICDTO=ICDFR F ICDDRG=ICDFR:1:ICDTO D:$O(^ICD9(ICDIEN,3,ICDDAIEN,1,"B",ICDDRG,""))=""
"RTN","ICD1882A",68,0)
 ..I $O(^ICD("B","DRG"_ICDDRG,""))="" D BMES^XPDUTL(ICDDX_" Grouper Code: "_ICDDRG_" not in file #80.2") Q
"RTN","ICD1882A",69,0)
 ..K ICDFDA S ICDFDA("80.711","+1,"_ICDDAIEN_","_ICDIEN_",",.01)=ICDDRG K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",70,0)
 .S ICDMDC=+$P(ICDX,U,2) I ICDMDC>0 I '$D(^ICM(ICDMDC,0)) D BMES^XPDUTL(ICDDX_" MDC Code: "_ICDDRG_" not in file #80.3") Q
"RTN","ICD1882A",71,0)
 .S ICDDX9=$O(^ICDLD82("GEM-10-9",ICDDX,"")),ICDIEN9=0 I ICDDX9'="" S ICDIEN9=^ICDLD82("GEM-10-9",ICDDX,ICDDX9)
"RTN","ICD1882A",72,0)
 .I ICDIEN9 D
"RTN","ICD1882A",73,0)
 ..;Next block copies MDC13, MDC24, MDC25 from ICD-9 record to ICD-10 record
"RTN","ICD1882A",74,0)
 ..F ICDF=1:1:3 S ICDMDCF="1."_(ICDF+3) K ICDFDA D  K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",75,0)
 ...S ICDVAR=$P($G(^ICD9(ICDIEN9,1)),U,ICDF+3)
"RTN","ICD1882A",76,0)
 ...I ICDF=1 D
"RTN","ICD1882A",77,0)
 ....I $D(^ICDLD82("MDC13","DX",ICDDX)) S ICDVAR=13
"RTN","ICD1882A",78,0)
 ....I $D(^ICDLD82("MDC12","DX",ICDDX)) S ICDVAR=""
"RTN","ICD1882A",79,0)
 ...I ICDF=2,$D(^ICDLD82("MDC24","DX",ICDDX)) S ICDVAR=^ICDLD82("MDC24","DX",ICDDX)
"RTN","ICD1882A",80,0)
 ...I ICDF=3,$D(^ICDLD82("MDC25","DX",ICDDX)) S ICDVAR=$P(^ICDLD82("MDC25","DX",ICDDX),U,1)
"RTN","ICD1882A",81,0)
 ...S ICDFDA(80,ICDIEN_",",ICDMDCF)=ICDVAR
"RTN","ICD1882A",82,0)
 .;Set Field #80,1.9 POA Exempt
"RTN","ICD1882A",83,0)
 .K ICDFDA,ICDERR S ICDFDA(80,ICDIEN_",",1.9)=$S($D(^ICDLD82("APPJ",ICDDX)):1,1:0) D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",84,0)
 .;Next block updates #80,72 - Effective Date multiple with MDC
"RTN","ICD1882A",85,0)
 .S ICDDAIEN=$O(^ICD9(ICDIEN,4,"B",ICDEFF,"")) I 'ICDDAIEN D
"RTN","ICD1882A",86,0)
 ..K ICDFDA S ICDFDA("80.072","+1,"_ICDIEN_",",.01)=ICDEFF K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",87,0)
 .S ICDDAIEN=$O(^ICD9(ICDIEN,4,"B",ICDEFF,"")) I ICDDAIEN D
"RTN","ICD1882A",88,0)
 ..K ICDFDA S ICDFDA("80.072",ICDDAIEN_","_ICDIEN_",",1)=ICDMDC K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",89,0)
 .;Next block update new Field #80,0103.1 CC and #80,0103,2 PRIMARY
"RTN","ICD1882A",90,0)
 .S ICD103=$O(^ICD9(ICDIEN,69,"B",ICDEFF,"")) I ICD103="" D
"RTN","ICD1882A",91,0)
 ..K ICDFDA,ICDERR S ICDFDA(80.0103,"+1,"_ICDIEN_",",.01)=ICDEFF D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",92,0)
 ..S ICD103=$O(^ICD9(ICDIEN,69,"B",ICDEFF,""))
"RTN","ICD1882A",93,0)
 .S ICDOWN=0 I $D(^ICDLD82("APPG","PDXOWNCC",ICDDX))!($D(^ICDLD82("APPH","PDXOWNMCC",ICDDX))) S ICDOWN=1
"RTN","ICD1882A",94,0)
 .;GET ICDCC VALUE FROM ICD9 GLOBAL INSTEAD OF CMS WEBSITE
"RTN","ICD1882A",95,0)
 .;I $D(^ICDLD82("APPH","MCCIFALIVE",ICDDX)) S ICDCC=3 K ICDFDA,ICDERR S ICDFDA(80.0103,ICD103_","_ICDIEN_",",1)=ICDCC D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",96,0)
 .S ICDCC=$S($D(^ICDLD82("APPH","MCCIFALIVE",ICDDX)):3,$D(^ICDLD82("APPH","MCCEXPTAPPC",ICDDX)):2,$D(^ICDLD82("APPG","CCEXPTAPPC",ICDDX)):1,1:0)
"RTN","ICD1882A",97,0)
 .K ICDFDA,ICDERR S ICDFDA(80.0103,ICD103_","_ICDIEN_",",1)=ICDCC D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",98,0)
 .K ICDFDA,ICDERR S ICDFDA(80.0103,ICD103_","_ICDIEN_",",2)=ICDOWN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",99,0)
 .;Next block loads the ICD-9 Identifier field to put in the ICD-10 code 1.2 field
"RTN","ICD1882A",100,0)
 .S ICDIDEN="" S:ICDIEN9 ICDIDEN=$P($G(^ICD9(ICDIEN9,1)),U,2)
"RTN","ICD1882A",101,0)
 .S DA=ICDIEN,DIE="^ICD9(",IDENT="@",DR="1.2///^S X=IDENT" D ^DIE
"RTN","ICD1882A",102,0)
 .K ICDFDA S ICDFDA(80,ICDIEN_",",1.2)=ICDIDEN K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",103,0)
 .;Set new field #80,73 with Identifiers from #80,1.2
"RTN","ICD1882A",104,0)
 .I ICDIDEN'="" F ICDLET=1:1:$L(ICDIDEN) D 8073(80,ICDDX,$E(ICDIDEN,ICDLET)) ;Update new 80,73 multiple with ICD-10 Identifier codes
"RTN","ICD1882A",105,0)
 Q
"RTN","ICD1882A",106,0)
 ;
"RTN","ICD1882A",107,0)
UP801 ;
"RTN","ICD1882A",108,0)
 ;#80.1 Appendix E
"RTN","ICD1882A",109,0)
 D BMES^XPDUTL("Starting #80.1 "_$$DTTIME)
"RTN","ICD1882A",110,0)
 S ICDN="",U="^"
"RTN","ICD1882A",111,0)
 F  S ICDN=$O(^ICDLD82(80.1,"A",ICDN)) Q:ICDN=""  S ICDREC=^ICDLD82(80.1,"A",ICDN),ICDDX=$P(ICDREC,U,1),ICDIEN=$O(^ICD0("BA",ICDDX_" ","")) Q:'ICDIEN  D
"RTN","ICD1882A",112,0)
 .S ICD73=0 F  S ICD73=$O(^ICD0(ICDIEN,73,ICD73)) Q:'ICD73  K DA S DA=ICD73,DA(1)=ICDIEN,DIK="^ICD0("_DA(1)_",73," D ^DIK
"RTN","ICD1882A",113,0)
 .S ICDNODE=0 F  S ICDNODE=$O(^ICD0(ICDIEN,2,ICDNODE)) Q:'ICDNODE  K DA S DA=ICDNODE,DA(1)=ICDIEN,DIK="^ICD0("_DA(1)_",2," D ^DIK
"RTN","ICD1882A",114,0)
 S ICDN11=""
"RTN","ICD1882A",115,0)
 F  S ICDN11=$O(^ICDLD82("APPE","OPEDIT",ICDN11)) Q:ICDN11=""  S ICDIEN=$O(^ICD0("BA",ICDN11_" ","")) Q:'ICDIEN  D
"RTN","ICD1882A",116,0)
 .S ICDNODE1=0 F  S ICDNODE1=$O(^ICD0(ICDIEN,2,ICDNODE1)) Q:'ICDNODE1  K DA S DA=ICDNODE1,DA(1)=ICDIEN,DIK="^ICD0("_DA(1)_",2," D ^DIK
"RTN","ICD1882A",117,0)
 .S ICD73=0 F  S ICD73=$O(^ICD0(ICDIEN,73,ICD73)) Q:'ICD73  K DA S DA=ICD73,DA(1)=ICDIEN,DIK="^ICD0("_DA(1)_",73," D ^DIK
"RTN","ICD1882A",118,0)
 S ICDN=""
"RTN","ICD1882A",119,0)
 F  S ICDN=$O(^ICDLD82(80.1,"A",ICDN)) Q:ICDN=""  S ICDREC=^ICDLD82(80.1,"A",ICDN),ICDDX=$P(ICDREC,U,1),ICDIEN=$O(^ICD0("BA",ICDDX_" ","")) D
"RTN","ICD1882A",120,0)
 .I ICDIEN="" D BMES^XPDUTL("ICD Procedure Code: "_ICDDX_" not in file #80.1") S ICDSUM(80.1,"B")=$G(ICDSUM(80.1,"B"))+1 Q
"RTN","ICD1882A",121,0)
 .I '$D(^ICD0(ICDIEN,0)) D BMES^XPDUTL("ICD Procedure Code: "_ICDDX_" bad x-ref IEN: "_ICDIEN) S ICDSUM(80.1,"B")=$G(ICDSUM(80.1,"B"))+1 Q
"RTN","ICD1882A",122,0)
 .S ^TMP("ICDDRGLD",$J)="80.1: "_ICDDX_" "_ICDIEN,ICDSUM(80.1,"G")=$G(ICDSUM(80.1,"G"))+1
"RTN","ICD1882A",123,0)
 .S ICDDAIEN=$O(^ICD0(ICDIEN,2,"B",ICDEFF,"")) I 'ICDDAIEN D
"RTN","ICD1882A",124,0)
 ..;Create Eff. Date entry
"RTN","ICD1882A",125,0)
 ..K ICDFDA S ICDFDA("80.171","+1,"_ICDIEN_",",.01)=ICDEFF K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",126,0)
 ..S ICDDAIEN=$O(^ICD0(ICDIEN,2,"B",ICDEFF,""))
"RTN","ICD1882A",127,0)
 .S ICDMIEN=0 I ICDDAIEN S ICDMDC=+$P(ICDREC,U,2),ICDMIEN=$O(^ICD0(ICDIEN,2,ICDDAIEN,1,"B",ICDMDC,"")) I 'ICDMIEN D
"RTN","ICD1882A",128,0)
 ..;Create MDC entry
"RTN","ICD1882A",129,0)
 ..K ICDFDA S ICDFDA("80.1711","+1,"_ICDDAIEN_","_ICDIEN_",",.01)=ICDMDC K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",130,0)
 ..S ICDMIEN=$O(^ICD0(ICDIEN,2,ICDDAIEN,1,"B",ICDMDC,""))
"RTN","ICD1882A",131,0)
 .I ICDMIEN D
"RTN","ICD1882A",132,0)
 ..S ICDY=$P(ICDREC,U,3),ICDFR=+$P(ICDY,"-",1),ICDTO=+$P(ICDY,"-",2) S:ICDTO=0 ICDTO=ICDFR F ICDDRG=ICDFR:1:ICDTO S ICDRGIEN=$O(^ICD0(ICDIEN,2,ICDDAIEN,1,ICDMIEN,1,"B",ICDDRG,"")) I 'ICDRGIEN D
"RTN","ICD1882A",133,0)
 ...;Create DRG entry
"RTN","ICD1882A",134,0)
 ...K ICDFDA S ICDFDA("80.17111","+1,"_ICDMIEN_","_ICDDAIEN_","_ICDIEN_",",.01)=ICDDRG K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",135,0)
 ...S ICDRGIEN=$O(^ICD0(ICDIEN,2,ICDDAIEN,1,"B",ICDDRG,""))
"RTN","ICD1882A",136,0)
 .;Next line checks the GEM file to find equivalent ICD-9-PCS code, and then loads the Identifier field to put in the ICD-10-PCS code
"RTN","ICD1882A",137,0)
 .S ICDDX9=$O(^ICDLD82("GEM-10-9-PCS",ICDDX,"")),ICDIEN9=0 I ICDDX9'="" S ICDIEN9=^ICDLD82("GEM-10-9-PCS",ICDDX,ICDDX9)
"RTN","ICD1882A",138,0)
 .S DA=ICDIEN,DIE="^ICD0(",IDENT="@",DR="1.5///^S X=IDENT" D ^DIE
"RTN","ICD1882A",139,0)
 .I ICDIEN9 S ICDMDC24=$P($G(^ICD0(ICDIEN9,1)),U,5) D  K ICDFDA S ICDFDA(80.1,ICDIEN_",",1.5)=ICDMDC24 K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",140,0)
 ..I $D(^ICDLD82("MDC24P","DX",ICDDX)) S ICDMDC24=^ICDLD82("MDC24P","DX",ICDDX)
"RTN","ICD1882A",141,0)
 .S ICDIDEN="" S:ICDIEN9 ICDIDEN=$P($G(^ICD0(ICDIEN9,1)),U,2)
"RTN","ICD1882A",142,0)
 .I $D(^ICDLD82("APPE","OR",ICDDX)) S:ICDIDEN'["O" ICDIDEN=ICDIDEN_"O"
"RTN","ICD1882A",143,0)
 .I $D(^ICDLD82("APPF","NONEXTENSIVE",ICDDX)) S:ICDIDEN'["z" ICDIDEN=ICDIDEN_"z"
"RTN","ICD1882A",144,0)
 .E  S:ICDIDEN'["x" ICDIDEN=ICDIDEN_"x"
"RTN","ICD1882A",145,0)
 .I $D(^ICDLD82("APPF","PROSTATIC",ICDDX)) S:ICDIDEN'["y" ICDIDEN=ICDIDEN_"y"
"RTN","ICD1882A",146,0)
 .S DA=ICDIEN,DIE="^ICD0(",IDENT="@",DR="1.2///^S X=IDENT" D ^DIE
"RTN","ICD1882A",147,0)
 .K ICDFDA S ICDFDA(80.1,ICDIEN_",",1.2)=ICDIDEN K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",148,0)
 .I ICDIDEN'="" F ICDLET=1:1:$L(ICDIDEN) D 8073(80.1,ICDDX,$E(ICDIDEN,ICDLET)) ;Update new 80.1,73 multiple with ICD-10 Identifier codes
"RTN","ICD1882A",149,0)
 Q
"RTN","ICD1882A",150,0)
 ;
"RTN","ICD1882A",151,0)
UPID10 ;Now Populate #80 #80.1 Multiple 73
"RTN","ICD1882A",152,0)
 ;
"RTN","ICD1882A",153,0)
 D BMES^XPDUTL("Adding ICD-10 Identifiers to #80 and #80.1 Multiple 73 "_$$DTTIME)
"RTN","ICD1882A",154,0)
 S ICDDESC="" F  S ICDDESC=$O(^ICDLD82("ID10",ICDDESC)) Q:ICDDESC=""  D
"RTN","ICD1882A",155,0)
 .F ICDTY=1:1:4 I $D(^ICDLD82("ID10",ICDDESC,ICDTY)) S ICDFILE=$S(ICDTY=1!(ICDTY=2):82,1:82.1),ICDFILE2=$S(ICDTY=1!(ICDTY=2):"^ICDID",1:"^ICDIP") D
"RTN","ICD1882A",156,0)
 ..S ICDFILE3=$S(ICDTY=1!(ICDTY=2):80,1:80.1)
"RTN","ICD1882A",157,0)
 ..S ICDIEN=$O(@ICDFILE2@("C",ICDDESC,"")) I 'ICDIEN D
"RTN","ICD1882A",158,0)
 ...;Add this flag to File 82/82.1
"RTN","ICD1882A",159,0)
 ...K ICDFDA,ICDERR S ICDCODE=$O(@ICDFILE2@("B","*"),-1)+1,ICDFDA(ICDFILE,"+1,",.01)=ICDCODE,ICDFDA(ICDFILE,"+1,",1)=ICDDESC D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",160,0)
 ...S ICDIEN=$O(@ICDFILE2@("C",ICDDESC,""))
"RTN","ICD1882A",161,0)
 ..S ICDID="" I ICDIEN S ICDID=$P(@ICDFILE2@(ICDIEN,0),U,1)
"RTN","ICD1882A",162,0)
 ..I ICDID="" Q
"RTN","ICD1882A",163,0)
 ..S ICDA="" F  S ICDA=$O(^ICDLD82("ID10",ICDDESC,ICDTY,ICDA)) Q:ICDA=""  D
"RTN","ICD1882A",164,0)
 ...S ICDB="" F  S ICDB=$O(^ICDLD82("ID10",ICDDESC,ICDTY,ICDA,ICDB)) Q:ICDB=""  D
"RTN","ICD1882A",165,0)
 ....S ICDC="" F  S ICDC=$O(^ICDLD82("ID10",ICDDESC,ICDTY,ICDA,ICDB,ICDC)) Q:ICDC=""  D
"RTN","ICD1882A",166,0)
 .....I ICDTY=1!(ICDTY=3) D
"RTN","ICD1882A",167,0)
 ......S ICDDX=ICDC S:ICDTY=1 ICDDX=$E(ICDC,1,3)_"."_$E(ICDC,4,$L(ICDC))
"RTN","ICD1882A",168,0)
 ......D 8073(ICDFILE3,ICDDX,ICDID)
"RTN","ICD1882A",169,0)
 ;
"RTN","ICD1882A",170,0)
 Q
"RTN","ICD1882A",171,0)
 ;
"RTN","ICD1882A",172,0)
UP802 ;
"RTN","ICD1882A",173,0)
 ;#80.2 New field #2 - CC/MCC flag
"RTN","ICD1882A",174,0)
 D BMES^XPDUTL("Starting File #80.2 "_$$DTTIME)
"RTN","ICD1882A",175,0)
 S ICDCC="" F  S ICDCC=$O(^ICDLD82(80.2,"CC/MCC",ICDCC)) Q:ICDCC=""  S ICDDRG="" F  S ICDDRG=$O(^ICDLD82(80.2,"CC/MCC",ICDCC,ICDDRG)) Q:ICDDRG=""  S ICDDRGN="DRG"_(+ICDDRG),ICDIEN=$O(^ICD("B",ICDDRGN,"")) D
"RTN","ICD1882A",176,0)
 .I 'ICDIEN D BMES^XPDUTL("DRG code "_ICDDRGN_" not in file #80.2") Q
"RTN","ICD1882A",177,0)
 .S ICDIEN2=$O(^ICD(ICDIEN,2,"B",ICDEFF,"")) I 'ICDIEN2 K ICDFDA S ICDFDA("80.271","+1,"_ICDIEN_",",.01)=ICDEFF K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR Q
"RTN","ICD1882A",178,0)
 .S ICDIEN2=$O(^ICD(ICDIEN,2,"B",ICDEFF,"")) K ICDFDA S ICDFDA("80.271",ICDIEN2_","_ICDIEN_",",2)=ICDCC K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR Q
"RTN","ICD1882A",179,0)
 .;Hardcoded rules ICD10TB0-9
"RTN","ICD1882A",180,0)
 .S ICDY=+ICDDRG,ICDX="ICD10TB"_$S(ICDY<100:0,ICDY>99&(ICDY<202):1,ICDY>201&(ICDY<302):2,ICDY>301&(ICDY<400):3,ICDY>399&(ICDY<500):4,ICDY>499&(ICDY<602):5,ICDY>601&(ICDY<701):6,ICDY>700&(ICDY<802):7,ICDY>801&(ICDY<901):8,1:9)
"RTN","ICD1882A",181,0)
 .K ICDFDA S ICDFDA("80.271",ICDIEN2_","_ICDIEN_",",1)=ICDX K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR Q
"RTN","ICD1882A",182,0)
 Q
"RTN","ICD1882A",183,0)
 ;
"RTN","ICD1882A",184,0)
UP805 ;
"RTN","ICD1882A",185,0)
 ;Load #80.5 - ^ICDRS (Surgical Hierarchy)
"RTN","ICD1882A",186,0)
 D BMES^XPDUTL("Starting #80.5... ")
"RTN","ICD1882A",187,0)
 S ICDSTOP=0
"RTN","ICD1882A",188,0)
 S ICDMDC="" F  S ICDMDC=$O(^ICDLD82("80.5",ICDMDC)) Q:ICDMDC=""  S ICDORD="" D
"RTN","ICD1882A",189,0)
 .F  S ICDORD=$O(^ICDLD82(80.5,ICDMDC,ICDORD)) Q:ICDORD=""!(ICDSTOP)  S ICDDRG=^ICDLD82(80.5,ICDMDC,ICDORD),ICDDA=$O(^ICDRS("B",ICDEFF_".1"),-1) D
"RTN","ICD1882A",190,0)
 ..I 'ICDDA K ICDFDA S ICDFDA("80.5","+1,",.01)=ICDEFF K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") S ICDDA=$O(^ICDRS("B",ICDEFF_".1"),-1) I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1882A",191,0)
 ..S ICDIEN=$O(^ICDRS("B",ICDDA,""))
"RTN","ICD1882A",192,0)
 ..S ICDMIEN=$O(^ICDRS(ICDIEN,1,"B",ICDMDC,"")) I 'ICDMIEN D
"RTN","ICD1882A",193,0)
 ...K ICDFDA S ICDFDA("80.51","+1,"_ICDIEN_",",.01)=ICDMDC K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") S ICDMIEN=$O(^ICDRS(ICDIEN,1,"B",ICDMDC,"")) I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1882A",194,0)
 ..K ICDFDA S ICDFDA("80.511","+1,"_ICDMIEN_","_ICDIEN_",",.01)=ICDDRG,ICDFDA("80.511","+1,"_ICDMIEN_","_ICDIEN_",",1)=ICDORD
"RTN","ICD1882A",195,0)
 ..K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1882A",196,0)
 Q
"RTN","ICD1882A",197,0)
 ;
"RTN","ICD1882A",198,0)
UP806 ;#80.6 - ^ICDHAC (HAC)
"RTN","ICD1882A",199,0)
 D BMES^XPDUTL("Starting #80.6 "_$$DTTIME)
"RTN","ICD1882A",200,0)
 S ICDDX="" F  S ICDDX=$O(^ICDLD82("APPI",ICDDX)) Q:ICDDX=""  D
"RTN","ICD1882A",201,0)
 .S ICDCODE=$E(ICDDX,1,3)_"."_$E(ICDDX,4,$L(ICDDX)),ICDDXIEN=$O(^ICD9("BA",ICDCODE_" ","")) I 'ICDDXIEN W !,"HAC: Code ",ICDCODE," not found in File #80" Q
"RTN","ICD1882A",202,0)
 .S ICDHAC="" F  S ICDHAC=$O(^ICDLD82("APPI",ICDDX,ICDHAC)) Q:ICDHAC=""  D
"RTN","ICD1882A",203,0)
 ..S ICDX=^ICDLD82("APPI",ICDDX,ICDHAC),ICDPRIM=$S($P(ICDX,U,1)=1:1,1:0),ICDDESC=$P(ICDX,U,2)
"RTN","ICD1882A",204,0)
 ..S ICDIEN=$O(^ICDHAC("B",ICDHAC,"")) I 'ICDIEN D
"RTN","ICD1882A",205,0)
 ...K ICDFDA,ICDERR S ICDFDA(80.6,"+1,",.01)=ICDHAC,ICDFDA(80.6,"+1,",1)=ICDDESC
"RTN","ICD1882A",206,0)
 ...D UPDATE^DIE("S","ICDFDA","","ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",207,0)
 ...S ICDIEN=$O(^ICDHAC("B",ICDHAC,""))
"RTN","ICD1882A",208,0)
 ..I '$D(^ICDHAC("C",ICDDXIEN)) D
"RTN","ICD1882A",209,0)
 ...K ICDFDA,ICDERR S ICDFDA(80.62,"+1,"_ICDIEN_",",.01)=ICDDXIEN,ICDFDA(80.62,"+1,"_ICDIEN_",",1)=ICDPRIM
"RTN","ICD1882A",210,0)
 ...D UPDATE^DIE("S","ICDFDA","","ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882A",211,0)
 Q
"RTN","ICD1882A",212,0)
 ;
"RTN","ICD1882A",213,0)
8073(ICDFILE,ICDDX,ICDIDEN) ;
"RTN","ICD1882A",214,0)
 ; Input        ICDFILE = 80 or 80.1
"RTN","ICD1882A",215,0)
 ;              ICDDX = DX or PCS Code  Ex: A00.0 or 0TCS0ZZ
"RTN","ICD1882A",216,0)
 ;              ICDIDEN = Identifier  Ex: "A" or 44 or 245
"RTN","ICD1882A",217,0)
 N ICDIEN,ICDF,ICDI,ICDX,ICDID,ICDIDIEN
"RTN","ICD1882A",218,0)
 S ICDF=$S(ICDFILE=80:"^ICD9",1:"^ICD0"),ICDIEN=$O(@ICDF@("BA",ICDDX_" ","")) Q:ICDIEN=""
"RTN","ICD1882A",219,0)
 S ICDF2=$S(ICDFILE=80:"80",1:"80.1")
"RTN","ICD1882A",220,0)
 S ICDFT=$S(ICDFILE=80:"80.073",1:"80.173")
"RTN","ICD1882A",221,0)
 S ICDFI=$S(ICDFILE=80:"^ICDID",1:"^ICDIP")
"RTN","ICD1882A",222,0)
 S ICDIEN=$O(@ICDF@("BA",ICDDX_" ","")) I ICDIEN="" Q
"RTN","ICD1882A",223,0)
 I $D(^ICDLD82("APPE","OPEDIT",ICDDX)) Q
"RTN","ICD1882A",224,0)
 S ICDIDIEN=$O(@ICDFI@("B",ICDIDEN,"")) I ICDIDIEN'="" D
"RTN","ICD1882A",225,0)
 .S ICD73IEN=$O(@ICDF@(ICDIEN,73,"B",ICDIDIEN,"")) I ICD73IEN="" D
"RTN","ICD1882A",226,0)
 ..K ICDFDA,ICDERR S ICDFDA(ICDFT,"+1,"_ICDIEN_",",.01)=ICDIDIEN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR Q
"RTN","ICD1882A",227,0)
 Q
"RTN","ICD1882A",228,0)
 ;
"RTN","ICD1882A",229,0)
ERR ;
"RTN","ICD1882A",230,0)
 I $D(ICDERR("DIERR",1,"PARAM","FILE")) D BMES^XPDUTL("FileMan error - FILE: "_ICDERR("DIERR",1,"PARAM","FILE"))
"RTN","ICD1882A",231,0)
 I $D(ICDERR("DIERR",1,"PARAM","IENS")) D BMES^XPDUTL("FileMan error - IENS: "_ICDERR("DIERR",1,"PARAM","IENS"))
"RTN","ICD1882A",232,0)
 I $D(ICDERR("DIERR",1,"PARAM","TEXT")) D BMES^XPDUTL("FileMan error - TEXT: "_ICDERR("DIERR",1,"PARAM","TEXT"))
"RTN","ICD1882A",233,0)
 Q
"RTN","ICD1882A",234,0)
 ;
"RTN","ICD1882A",235,0)
DTTIME() ;
"RTN","ICD1882A",236,0)
 S Y=$$NOW^XLFDT D DD^%DT
"RTN","ICD1882A",237,0)
 Q Y
"RTN","ICD1882A",238,0)
 ;
"RTN","ICD1882A",239,0)
 ;ICD1882A
"RTN","ICD1882B")
0^12^B85768283^n/a
"RTN","ICD1882B",1,0)
ICD1882B ;ALB/JDG - POST INSTALL ROUTINE-PART 2;8/1/2015
"RTN","ICD1882B",2,0)
 ;;18.0;DRG Grouper;**82**;Oct 20, 2000;Build 21
"RTN","ICD1882B",3,0)
 ;
"RTN","ICD1882B",4,0)
 N ICDX,ICDY,ICDHIST,ICDCSYS,ICDIEN,ICDPRE,ICDST,ICDCODE,ICDR,ICDEFF,ICDDX9,ICDDTTX,ICDF,ICDMDCF,ICDVAR,ICDCC
"RTN","ICD1882B",5,0)
 N ICDSTA,ICDI,ICDMIEN,ICDRGIEN,ICDFN,ICDDESC,ICDIX,ICDSTOP,ICDFILE,ICDFILE2,ICDAIDA,ICDMULT,ICDDAP,ICDCCMCC,ICDCCIEN
"RTN","ICD1882B",6,0)
 N ICDPDX,ICD103,ICD40,ICD14,ICD40IEN,ICD73IEN,ICD82,ICD821,ICD82T,ICDA,ICDB,ICDBLIEN,ICDBLK,ICDC,ICDCT,ICDDA,ICDDRGS,ICDDXCC
"RTN","ICD1882B",7,0)
 N ICDDXIEN,ICDEXCL,ICDEXIEN,ICDF2,ICDFI,ICDFILE,ICDFILE1,ICDFILE2,ICDFILE3,ICDFILE4,ICDFLAG,ICDFR,ICDFT,ICDMAC,ICDIEN2
"RTN","ICD1882B",8,0)
 N ICDLET,ICDMDDRG,ICDMDIEN,ICDONEI,ICDORCD,ICDOWN,ICDPCS,ICDPRIEN,ICDPRIM,ICDREC,ICDTO,ICDTY,ICDWIDTH,ICDXIEN,ICDYES,ICDWITH
"RTN","ICD1882B",9,0)
 N ICDN,ICDX,ICDIEN,ICDIEN9,ICDDX,ICDDAIEN,ICDFDA,ICDERR,ICDI,ICDDRG,ICDMDC,ICDBAD,ICDIDEN,ICDDX9,ICDMDC,ICDMDC24,ICDMDC25,ICDDRGN
"RTN","ICD1882B",10,0)
 N ICDORD,ICDDRG,ICDCC,ICDHAC,ICDA,ICDSUM,ICD73,ICDIDIEN
"RTN","ICD1882B",11,0)
 ;
"RTN","ICD1882B",12,0)
UP82 ;Set up #82 and #82.1 with IDENTIFIERS in ICDHLPD and ICDHLPO
"RTN","ICD1882B",13,0)
 ;
"RTN","ICD1882B",14,0)
 D BMES^XPDUTL("Starting #82 and #82.1 "_$$DTTIME)
"RTN","ICD1882B",15,0)
 S ICDSTOP=0
"RTN","ICD1882B",16,0)
 F ICDI="DX","PCS" D  Q:ICDSTOP
"RTN","ICD1882B",17,0)
 .S ICDFILE=$S(ICDI="DX":82,1:82.1),ICDN="",ICDFILE1=$S(ICDI="DX":"^ICDID",1:"^ICDIP")
"RTN","ICD1882B",18,0)
 .F  S ICDN=$O(^ICDLD82("ID",ICDI,ICDN)) Q:ICDN=""!(ICDSTOP)  S ICDX=^ICDLD82("ID",ICDI,ICDN) D
"RTN","ICD1882B",19,0)
 ..S ICDIEN=$O(@ICDFILE1@("B",ICDN,"")) I 'ICDIEN D
"RTN","ICD1882B",20,0)
 ...K ICDFDA,ICDERR S ICDFDA(ICDFILE,"+1,",.01)=ICDN D UPDATE^DIE("S","ICDFDA","","ICDERR") I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1882B",21,0)
 ..S ICDIEN=$O(@ICDFILE1@("B",ICDN,""))
"RTN","ICD1882B",22,0)
 ..K ICDFDA,ICDERR S ICDFDA(ICDFILE,ICDIEN_",",1)=ICDX D UPDATE^DIE("S","ICDFDA","","ICDERR") I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1882B",23,0)
 I '$O(^ICDID("B","o","")) D
"RTN","ICD1882B",24,0)
 .K ICDFDA,ICDERR S ICDFDA(82,"+1,",.01)="o" S ICDFDA(82,"+1,",1)="ovary" D UPDATE^DIE("S","ICDFDA","","ICDERR") I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1882B",25,0)
 Q
"RTN","ICD1882B",26,0)
 ;
"RTN","ICD1882B",27,0)
UP82ADD ;Then add ICD-10 IDENTIFIERS extracted from MDC files to Files #82 and #82.1
"RTN","ICD1882B",28,0)
 ;First, numerically assign new Identifier Codes in range 10 -->
"RTN","ICD1882B",29,0)
 D BMES^XPDUTL("Adding ICD-10 Identifiers to File #82 and #82.1 "_$$DTTIME)
"RTN","ICD1882B",30,0)
 S ICDDESC="",ICDDESC="",ICDSTOP=0,ICD82=+$G(^ICDLD82("MV",80)),ICD821=+$G(^ICDLD82("MV",80.1))
"RTN","ICD1882B",31,0)
 F  S ICDDESC=$O(^ICDLD82("ID10",ICDDESC)) Q:ICDDESC=""!(ICDSTOP)  D
"RTN","ICD1882B",32,0)
 .I $D(^ICDLD82("ID10",ICDDESC,1))!($D(^ICDLD82("ID10",ICDDESC,2))) D  ;DX
"RTN","ICD1882B",33,0)
 ..I '$D(^ICDID("C",ICDDESC)) K ICDFDA,ICDERR D  S ICDFDA(82,"+1,",.01)=ICD82T,ICDFDA(82,"+1,",1)=$P(ICDDESC,$C(13)) D UPDATE^DIE("S","ICDFDA","","ICDERR") I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1882B",34,0)
 ...S ICD82T=$G(^ICDLD82("MV",80,ICDDESC)) S:ICD82T="" ICD82=ICD82+1,ICD82T=ICD82
"RTN","ICD1882B",35,0)
 .I $D(^ICDLD82("ID10",ICDDESC,3))!($D(^ICDLD82("ID10",ICDDESC,4))) D  ;PCS
"RTN","ICD1882B",36,0)
 ..I '$D(^ICDIP("C",ICDDESC)) K ICDFDA,ICDERR D  S ICDFDA(82.1,"+1,",.01)=ICD82T,ICDFDA(82.1,"+1,",1)=$P(ICDDESC,$C(13)) D UPDATE^DIE("S","ICDFDA","","ICDERR") I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1882B",37,0)
 ...S ICD82T=$G(^ICDLD82("MV",80.1,ICDDESC)) S:ICD82T="" ICD821=ICD821+1,ICD82T=ICD821
"RTN","ICD1882B",38,0)
 Q
"RTN","ICD1882B",39,0)
 ;
"RTN","ICD1882B",40,0)
UP8211 ;Populate File #82.11 from ^ICDLD82(82.11) - Procedure code Combinations/Clusters that came from Appendix E
"RTN","ICD1882B",41,0)
 ;
"RTN","ICD1882B",42,0)
 D BMES^XPDUTL("Starting Files #82.11 and #82.12 "_$$DTTIME^ICD1882A)
"RTN","ICD1882B",43,0)
 S ICDFLAG="" F  S ICDFLAG=$O(^ICDLD82(82.11,ICDFLAG)) Q:ICDFLAG=""  D
"RTN","ICD1882B",44,0)
 .S ICDIEN=$O(^ICDIP("C",ICDFLAG,"")) I 'ICDIEN D
"RTN","ICD1882B",45,0)
 ..;Add this flag to File 82.1 and then use the IEN to update #82.11
"RTN","ICD1882B",46,0)
 ..K ICDFDA,ICDERR S ICDIEN=$O(^ICDIP("B","A"),-1)+1,ICDFDA(82.1,"+1,",.01)=ICDIEN,ICDFDA(82.1,"+1,",1)=ICDFLAG D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882B",47,0)
 ..S ICDIEN=$O(^ICDIP("C",ICDFLAG,""))
"RTN","ICD1882B",48,0)
 .S ICDIDIEN=$O(^ICDIDP("B",ICDIEN,"")) I 'ICDIDIEN D
"RTN","ICD1882B",49,0)
 ..;Add IDENTIFIER CODE entry (IEN from 82.1 file) to File #82.11
"RTN","ICD1882B",50,0)
 ..K ICDFDA,ICDERR S ICDFDA(82.11,"+1,",.01)=ICDIEN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882B",51,0)
 ..S ICDIDIEN=$O(^ICDIDP("B",ICDIEN,""))
"RTN","ICD1882B",52,0)
 .S ICDBLK=0 F  S ICDBLK=$O(^ICDLD82(82.11,ICDFLAG,ICDBLK)) Q:'ICDBLK  D  S ICDONEI=0
"RTN","ICD1882B",53,0)
 ..K ICDFDA,ICDERR S ICDFDA(82.111,"+1,"_ICDIDIEN_",",.01)=ICDBLK D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882B",54,0)
 ..S ICDBLIEN=$O(^ICDIDP(ICDIDIEN,"BL","B",ICDBLK,""))
"RTN","ICD1882B",55,0)
 ..;Each level 1 (One-Of) get all levels below
"RTN","ICD1882B",56,0)
 ..S ICDWITH="" F  S ICDWITH=$O(^ICDLD82(82.11,ICDFLAG,ICDBLK,ICDWITH)) Q:'ICDWITH  D
"RTN","ICD1882B",57,0)
 ...S ICDCODE="" F  S ICDCODE=$O(^ICDLD82(82.11,ICDFLAG,ICDBLK,ICDWITH,ICDCODE)) Q:ICDCODE=""  D
"RTN","ICD1882B",58,0)
 ....S ICDMDDRG=^ICDLD82(82.11,ICDFLAG,ICDBLK,ICDWITH,ICDCODE)
"RTN","ICD1882B",59,0)
 ....S ICDPRIEN=$O(^ICD0("BA",ICDCODE_" ","")) I ICDPRIEN D  ;If in File #80.1
"RTN","ICD1882B",60,0)
 .....K ICDFDA,ICDERR S ICDFILE=$P("82.1111/82.1112/82.1113/82.1114/82.1115/","/",ICDWITH)
"RTN","ICD1882B",61,0)
 .....S ICDFDA(ICDFILE,"+1,"_ICDBLIEN_","_ICDIDIEN_",",.01)=ICDPRIEN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882B",62,0)
 .....F ICDI=1:2 S ICDMDC=+$P(ICDMDDRG,U,ICDI) Q:ICDMDC=0  S ICDDRGS=$P(ICDMDDRG,U,ICDI+1) I ICDDRGS'="" S ICDFR=+$P(ICDDRGS,"-",1),ICDTO=+$P(ICDDRGS,"-",2) D
"RTN","ICD1882B",63,0)
 ......S:ICDTO=0 ICDTO=ICDFR F ICDDRG=ICDFR:1:ICDTO D
"RTN","ICD1882B",64,0)
 .......S ICDMDIEN=$O(^ICDIDP(ICDIDIEN,"BL",ICDBLIEN,"MDC","B",ICDMDC,"")) I 'ICDMDIEN D
"RTN","ICD1882B",65,0)
 ........K ICDFDA,ICDERR S ICDFDA("82.1116","+1,"_ICDBLIEN_","_ICDIDIEN_",",.01)=ICDMDC D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR Q
"RTN","ICD1882B",66,0)
 .......S ICDMDIEN=$O(^ICDIDP(ICDIDIEN,"BL",ICDBLIEN,"MDC","B",ICDMDC,""))
"RTN","ICD1882B",67,0)
 .......S ICDRGIEN=$O(^ICDIDP(ICDIDIEN,"BL",ICDBLIEN,"MDC",ICDMDIEN,"DRG","B",ICDDRG,"")) I ICDRGIEN="" D
"RTN","ICD1882B",68,0)
 ........K ICDFDA,ICDERR S ICDFDA("82.11161","+1,"_ICDMDIEN_","_ICDBLIEN_","_ICDIDIEN_",",.01)=ICDDRG D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882B",69,0)
 ;
"RTN","ICD1882B",70,0)
 Q
"RTN","ICD1882B",71,0)
 ;
"RTN","ICD1882B",72,0)
UP8211B ;Now Populate Files #82.11 and #82.12 from clusters in ^ICDLD82("ID10") that came from the MDC files
"RTN","ICD1882B",73,0)
 ;
"RTN","ICD1882B",74,0)
 D BMES^XPDUTL("Adding Clusters to Files #82.11 and #82.12 "_$$DTTIME^ICD1882A)
"RTN","ICD1882B",75,0)
 S ICDDESC="" F  S ICDDESC=$O(^ICDLD82("ID10",ICDDESC)) Q:ICDDESC=""  D
"RTN","ICD1882B",76,0)
 .F ICDTY=1:1:4 I $D(^ICDLD82("ID10",ICDDESC,ICDTY)) S ICDFILE=$S(ICDTY=1!(ICDTY=2):82,1:82.1),ICDFILE2=$S(ICDTY=1!(ICDTY=2):"^ICDID",1:"^ICDIP"),ICDFILE3=$S(ICDTY=1!(ICDTY=2):82.12,1:82.11),ICDFILE4=$S(ICDTY=1!(ICDTY=2):"^ICDIDD",1:"^ICDIDP") D
"RTN","ICD1882B",77,0)
 ..S ICDIEN=$O(@ICDFILE2@("C",ICDDESC,"")) I 'ICDIEN D
"RTN","ICD1882B",78,0)
 ...;Add this flag to File 82/82.1 and then use the IEN to update #82.11/12
"RTN","ICD1882B",79,0)
 ...K ICDFDA,ICDERR S ICDCODE=$O(@ICDFILE2@("B","*"),-1)+1,ICDFDA(ICDFILE,"+1,",.01)=ICDCODE,ICDFDA(ICDFILE,"+1,",1)=ICDDESC D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882B",80,0)
 ...S ICDIEN=$O(@ICDFILE2@("C",ICDDESC,""))
"RTN","ICD1882B",81,0)
 ..I ICDTY=1!(ICDTY=3) Q
"RTN","ICD1882B",82,0)
 ..S ICDIDIEN=$O(@ICDFILE4@("B",ICDIEN,"")) I 'ICDIDIEN D
"RTN","ICD1882B",83,0)
 ...;Add IDENTIFIER CODE entry (IEN from 82.1/82 file) to File #82.11/12
"RTN","ICD1882B",84,0)
 ...K ICDFDA,ICDERR S ICDFDA(ICDFILE3,"+1,",.01)=ICDIEN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882B",85,0)
 ...S ICDIDIEN=$O(@ICDFILE4@("B",ICDIEN,""))
"RTN","ICD1882B",86,0)
 ..S ICDBLK=0 F  S ICDBLK=$O(^ICDLD82("ID10",ICDDESC,ICDTY,ICDBLK)) Q:ICDBLK=""  D
"RTN","ICD1882B",87,0)
 ...K ICDFDA,ICDERR S ICDFDA(ICDFILE3_"1","+1,"_ICDIDIEN_",",.01)=ICDBLK D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882B",88,0)
 ...S ICDBLIEN=$O(@ICDFILE4@(ICDIDIEN,"BL","B",ICDBLK,""))
"RTN","ICD1882B",89,0)
 ...;Each level 1 (One-Of) get all levels below
"RTN","ICD1882B",90,0)
 ...S ICDWITH="" F  S ICDWITH=$O(^ICDLD82("ID10",ICDDESC,ICDTY,ICDBLK,ICDWITH)) Q:ICDWITH=""  S ICDCT="" F  S ICDCT=$O(^ICDLD82("ID10",ICDDESC,ICDTY,ICDBLK,ICDWITH,ICDCT)) Q:ICDCT=""  D
"RTN","ICD1882B",91,0)
 ....S ICDCODE="" F  S ICDCODE=$O(^ICDLD82("ID10",ICDDESC,ICDTY,ICDBLK,ICDWITH,ICDCT,ICDCODE)) Q:ICDCODE=""  S ICDX=^ICDLD82("ID10",ICDDESC,ICDTY,ICDBLK,ICDWITH,ICDCT,ICDCODE),ICDMDC=$P(ICDX,U,1) D
"RTN","ICD1882B",92,0)
 .....S ICDDX=ICDCODE I ICDTY=2 S ICDDX=$E(ICDCODE,1,3)_"."_$E(ICDCODE,4,$L(ICDCODE))
"RTN","ICD1882B",93,0)
 .....S:ICDTY=4 ICDPRIEN=$O(^ICD0("BA",ICDDX_" ","")) S:ICDTY=2 ICDPRIEN=$O(^ICD9("BA",ICDDX_" ","")) I ICDPRIEN D  ;If in File #80.1/80
"RTN","ICD1882B",94,0)
 ......S ICDXIEN=$O(@ICDFILE4@(ICDIDIEN,"BL",ICDBLIEN,$P("ONE/WITH1/WITH2/WITH3/WITH4/","/",ICDWITH),"B",ICDPRIEN,"")) I 'ICDXIEN D
"RTN","ICD1882B",95,0)
 .......K ICDFDA,ICDERR S ICDFDA(ICDFILE3_$P("11/12/13/14/15/","/",ICDWITH),"+1,"_ICDBLIEN_","_ICDIDIEN_",",.01)=ICDPRIEN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882B",96,0)
 ......I ICDMDC'="" S ICDMDC=+ICDMDC S:ICDMDC=0 ICDMDC=98 S ICDMDIEN=$O(@ICDFILE4@(ICDIDIEN,"BL",ICDBLIEN,"MDC","B",ICDMDC,"")) I 'ICDMDIEN D
"RTN","ICD1882B",97,0)
 .......K ICDFDA,ICDERR S ICDFDA(ICDFILE3_"16","+1,"_ICDBLIEN_","_ICDIDIEN_",",.01)=ICDMDC D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882B",98,0)
 .......S ICDMDIEN=$O(@ICDFILE4@(ICDIDIEN,"BL",ICDBLIEN,"MDC","B",ICDMDC,""))
"RTN","ICD1882B",99,0)
 .......S ICDDRG="" F  S ICDDRG=$O(^ICDLD82("ID10",ICDDESC,ICDTY,ICDBLK,ICDWITH,ICDCT,ICDCODE,"DRG",ICDDRG)) Q:ICDDRG=""  D
"RTN","ICD1882B",100,0)
 ........S ICDRGIEN=$O(@ICDFILE4@(ICDIDIEN,"BL",ICDBLIEN,"MDC",ICDMDIEN,"DRG","B",+ICDDRG,"")) I ICDRGIEN="" D
"RTN","ICD1882B",101,0)
 .........K ICDFDA,ICDERR S ICDFDA(ICDFILE3_"161","+1,"_ICDMDIEN_","_ICDBLIEN_","_ICDIDIEN_",",.01)=+ICDDRG D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882B",102,0)
 Q
"RTN","ICD1882B",103,0)
 ;
"RTN","ICD1882B",104,0)
UP8213 ;
"RTN","ICD1882B",105,0)
 D BMES^XPDUTL("Starting File #82.13 "_$$DTTIME^ICD1882A)
"RTN","ICD1882B",106,0)
 S ICDDX="" F  S ICDDX=$O(^ICDLD82("APPC","DX",ICDDX)) Q:ICDDX=""  D
"RTN","ICD1882B",107,0)
 .S ICDX=^ICDLD82("APPC","DX",ICDDX),ICDEXCL=$P(ICDX,U,2) D
"RTN","ICD1882B",108,0)
 ..S ICDIEN=$O(^ICD9("BA",ICDDX_" ","")) I 'ICDIEN D BMES^XPDUTL("ICD Code: "_ICDDX_" not in file #80") Q
"RTN","ICD1882B",109,0)
 ..;S ICDNODE=0 F  S ICDNODE=$O(^ICDCCEX(ICDEXCL,1,ICDNODE,"")) Q:'ICDNODE  K DA S DA=ICDNODE,DA(1)=ICDEXCL,DIK="^ICDCCEX("_DA(1)_"," D ^DIK Q
"RTN","ICD1882B",110,0)
 ..S ICDYES=0,ICDEXIEN=$O(^ICDCCEX("B",+ICDEXCL,"")) I ICDEXIEN="" D
"RTN","ICD1882B",111,0)
 ...K ICDFDA,ICDERR S ICDFDA(82.13,"+1,",.01)=+ICDEXCL D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882B",112,0)
 ...S ICDEXIEN=$O(^ICDCCEX("B",+ICDEXCL,"")),ICDYES=1
"RTN","ICD1882B",113,0)
 ..K ICDFDA,ICDERR S ICDFDA(80,ICDIEN_",",1.11)=ICDEXIEN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882B",114,0)
 ..I ICDYES S ICDDXCC="" F  S ICDDXCC=$O(^ICDLD82("APPC","PDX",ICDEXCL,ICDDXCC)) Q:ICDDXCC=""  I ICDDX'=ICDDXCC S ICD40IEN=$O(^ICD9("BA",ICDDXCC_" ","")) I ICD40IEN D
"RTN","ICD1882B",115,0)
 ...K ICDFDA,ICDERR S ICDFDA(82.131,"+1,"_ICDEXIEN_",",.01)=ICD40IEN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1882B",116,0)
 Q
"RTN","ICD1882B",117,0)
 ;
"RTN","ICD1882B",118,0)
MAJOROR ;
"RTN","ICD1882B",119,0)
 ;This sets up ICD-10 Identifer 80 (Major O.R. Procedures) in Multiple 73 of #80.1 for all Procedure Codes that are neither "PROSTATIC" "y" nor "NONEXTENSIVE" "z"
"RTN","ICD1882B",120,0)
 D BMES^XPDUTL("Setting Major O.R. flags in File# 80.1 Field 73 "_$$DTTIME^ICD1882A)
"RTN","ICD1882B",121,0)
 S ICDORCD=$O(^ICDIP("C","MAJOR O.R. PROCEDURES","")) I ICDORCD="" D BMES^XPDUTL("IEN for MAJOR O.R. PROCEDURES not found in File #82.1") Q
"RTN","ICD1882B",122,0)
 S ICDORCD=$P(^ICDIP(ICDORCD,0),U,1)
"RTN","ICD1882B",123,0)
 S ICDPCS="",ICDCT=0 F  S ICDPCS=$O(^ICDLD82(80.1,"MAJOR-OR",ICDPCS)) Q:ICDPCS=""  D
"RTN","ICD1882B",124,0)
 . D 8073^ICD1882A(80.1,ICDPCS,ICDORCD) S ICDCT=ICDCT+1
"RTN","ICD1882B",125,0)
 Q
"RTN","ICD1882B",126,0)
 ;
"RTN","ICD1882B",127,0)
ERR ;
"RTN","ICD1882B",128,0)
 I $D(ICDERR("DIERR",1,"PARAM","FILE")) D BMES^XPDUTL("FileMan error - FILE: "_ICDERR("DIERR",1,"PARAM","FILE"))
"RTN","ICD1882B",129,0)
 I $D(ICDERR("DIERR",1,"PARAM","IENS")) D BMES^XPDUTL("FileMan error - IENS: "_ICDERR("DIERR",1,"PARAM","IENS"))
"RTN","ICD1882B",130,0)
 I $D(ICDERR("DIERR",1,"PARAM","TEXT")) D BMES^XPDUTL("FileMan error - TEXT: "_ICDERR("DIERR",1,"PARAM","TEXT"))
"RTN","ICD1882B",131,0)
 Q
"RTN","ICD1882B",132,0)
 ;
"RTN","ICD1882B",133,0)
 ;if previously installed then delete files 80.5,80.6,82.11,82.12,82.13
"RTN","ICD1882B",134,0)
DELFILES ;
"RTN","ICD1882B",135,0)
 D MES^XPDUTL("Deleting entries in the file #80.5") D
"RTN","ICD1882B",136,0)
 . N DIK,DA S DIK="^ICDRS(" S DA=0 F  S DA=$O(^ICDRS(DA)) Q:+DA=0  D ^DIK
"RTN","ICD1882B",137,0)
 D MES^XPDUTL("Deleting entries in the file #80.6") D
"RTN","ICD1882B",138,0)
 . N DIK,DA S DIK="^ICDHAC(" S DA=0 F  S DA=$O(^ICDHAC(DA)) Q:+DA=0  D ^DIK
"RTN","ICD1882B",139,0)
 D MES^XPDUTL("Deleting entries in the file #82.11") D
"RTN","ICD1882B",140,0)
 . N DIK,DA S DIK="^ICDIDP(" S DA=0 F  S DA=$O(^ICDIDP(DA)) Q:+DA=0  D ^DIK
"RTN","ICD1882B",141,0)
 D MES^XPDUTL("Deleting entries in the file #82.12") D
"RTN","ICD1882B",142,0)
 . N DIK,DA S DIK="^ICDIDD(" S DA=0 F  S DA=$O(^ICDIDD(DA)) Q:+DA=0  D ^DIK
"RTN","ICD1882B",143,0)
 D MES^XPDUTL("Deleting entries in the file #82.13") D
"RTN","ICD1882B",144,0)
 . N DIK,DA S DIK="^ICDCCEX(" S DA=0 F  S DA=$O(^ICDCCEX(DA)) Q:+DA=0  D ^DIK
"RTN","ICD1882B",145,0)
 Q
"RTN","ICD1882B",146,0)
 ;
"RTN","ICD1882B",147,0)
 ;kill ^ICDLD82 after installation
"RTN","ICD1882B",148,0)
CLEANUP ;
"RTN","ICD1882B",149,0)
 ;D $system.Process.GlobalKillDisabled(0)
"RTN","ICD1882B",150,0)
 ;K ^ICDLD82
"RTN","ICD1882B",151,0)
 ;D $system.Process.GlobalKillDisabled(1)
"RTN","ICD1882B",152,0)
 Q
"RTN","ICD1882B",153,0)
 ;
"RTN","ICD1882B",154,0)
DTTIME() ;
"RTN","ICD1882B",155,0)
 S Y=$$NOW^XLFDT D DD^%DT
"RTN","ICD1882B",156,0)
 Q Y
"RTN","ICD1882B",157,0)
 ;
"RTN","ICD1882B",158,0)
 ;ICD1882B
"RTN","ICD1882F")
0^16^B57686037^n/a
"RTN","ICD1882F",1,0)
ICD1882F ;ALB/JDG - YEARLY DRG UPDATE;8/1/2015
"RTN","ICD1882F",2,0)
 ;;18.0;DRG Grouper;**82**;Oct 20, 2000;Build 21
"RTN","ICD1882F",3,0)
 ;
"RTN","ICD1882F",4,0)
 ;Updates for DRGS 0-168
"RTN","ICD1882F",5,0)
 Q
"RTN","ICD1882F",6,0)
 ;
"RTN","ICD1882F",7,0)
MSDRG ;;MS-DRG^MDC^TYPE^MS-DRG TITLE^WEIGHTS^GEOMETRIC MEAN LOS
"RTN","ICD1882F",8,0)
 ;;1^98^SURG^HEART TRANSPLANT OR IMPLANT OF HEART ASSIST SYSTEM W MCC^26.2466^29.4
"RTN","ICD1882F",9,0)
 ;;2^98^SURG^HEART TRANSPLANT OR IMPLANT OF HEART ASSIST SYSTEM W/O MCC^14.6448^16.6
"RTN","ICD1882F",10,0)
 ;;3^98^SURG^ECMO OR TRACH W MV >96 HRS OR PDX EXC FACE, MOUTH & NECK W MAJ O.R.^17.6569^25.5
"RTN","ICD1882F",11,0)
 ;;4^98^SURG^TRACH W MV >96 HRS OR PDX EXC FACE, MOUTH & NECK W/O MAJ O.R.^10.9458^20.0
"RTN","ICD1882F",12,0)
 ;;5^98^SURG^LIVER TRANSPLANT W MCC OR INTESTINAL TRANSPLANT^10.7263^15.3
"RTN","ICD1882F",13,0)
 ;;6^98^SURG^LIVER TRANSPLANT W/O MCC^4.8330^7.9
"RTN","ICD1882F",14,0)
 ;;7^98^SURG^LUNG TRANSPLANT^9.7007^15.8
"RTN","ICD1882F",15,0)
 ;;8^98^SURG^SIMULTANEOUS PANCREAS/KIDNEY TRANSPLANT^5.4338^9.8
"RTN","ICD1882F",16,0)
 ;;10^98^SURG^PANCREAS TRANSPLANT^4.3039^8.1
"RTN","ICD1882F",17,0)
 ;;11^98^SURG^TRACHEOSTOMY FOR FACE,MOUTH & NECK DIAGNOSES W MCC^4.7501^11.3
"RTN","ICD1882F",18,0)
 ;;12^98^SURG^TRACHEOSTOMY FOR FACE,MOUTH & NECK DIAGNOSES W CC^3.4047^8.4
"RTN","ICD1882F",19,0)
 ;;13^98^SURG^TRACHEOSTOMY FOR FACE,MOUTH & NECK DIAGNOSES W/O CC/MCC^2.1906^5.8
"RTN","ICD1882F",20,0)
 ;;14^98^SURG^ALLOGENEIC BONE MARROW TRANSPLANT^11.5928^22.7
"RTN","ICD1882F",21,0)
 ;;16^98^SURG^AUTOLOGOUS BONE MARROW TRANSPLANT W CC/MCC^6.1746^17.8
"RTN","ICD1882F",22,0)
 ;;17^98^SURG^AUTOLOGOUS BONE MARROW TRANSPLANT W/O CC/MCC^4.3721^10.0
"RTN","ICD1882F",23,0)
 ;;20^1^SURG^INTRACRANIAL VASCULAR PROCEDURES W PDX HEMORRHAGE W MCC^9.7571^13.6
"RTN","ICD1882F",24,0)
 ;;21^1^SURG^INTRACRANIAL VASCULAR PROCEDURES W PDX HEMORRHAGE W CC^7.1549^12.3
"RTN","ICD1882F",25,0)
 ;;22^1^SURG^INTRACRANIAL VASCULAR PROCEDURES W PDX HEMORRHAGE W/O CC/MCC^4.9977^6.7
"RTN","ICD1882F",26,0)
 ;;23^1^SURG^CRANIO W MAJOR DEV IMPL/ACUTE COMPLEX CNS PDX W MCC OR CHEMO IMPLANT^5.3486^7.9
"RTN","ICD1882F",27,0)
 ;;24^1^SURG^CRANIO W MAJOR DEV IMPL/ACUTE COMPLEX CNS PDX W/O MCC^3.7976^4.2
"RTN","ICD1882F",28,0)
 ;;25^1^SURG^CRANIOTOMY & ENDOVASCULAR INTRACRANIAL PROCEDURES W MCC^4.2965^7.2
"RTN","ICD1882F",29,0)
 ;;26^1^SURG^CRANIOTOMY & ENDOVASCULAR INTRACRANIAL PROCEDURES W CC^2.9958^4.6
"RTN","ICD1882F",30,0)
 ;;27^1^SURG^CRANIOTOMY & ENDOVASCULAR INTRACRANIAL PROCEDURES W/O CC/MCC^2.2835^2.4
"RTN","ICD1882F",31,0)
 ;;28^1^SURG^SPINAL PROCEDURES W MCC^5.3695^9.3
"RTN","ICD1882F",32,0)
 ;;29^1^SURG^SPINAL PROCEDURES W CC OR SPINAL NEUROSTIMULATORS^3.0548^4.8
"RTN","ICD1882F",33,0)
 ;;30^1^SURG^SPINAL PROCEDURES W/O CC/MCC^1.7982^2.6
"RTN","ICD1882F",34,0)
 ;;31^1^SURG^VENTRICULAR SHUNT PROCEDURES W MCC^3.7834^7.4
"RTN","ICD1882F",35,0)
 ;;32^1^SURG^VENTRICULAR SHUNT PROCEDURES W CC^2.0352^3.3
"RTN","ICD1882F",36,0)
 ;;33^1^SURG^VENTRICULAR SHUNT PROCEDURES W/O CC/MCC^1.5734^2.0
"RTN","ICD1882F",37,0)
 ;;34^1^SURG^CAROTID ARTERY STENT PROCEDURE W MCC^3.6851^4.8
"RTN","ICD1882F",38,0)
 ;;35^1^SURG^CAROTID ARTERY STENT PROCEDURE W CC^2.3048^2.1
"RTN","ICD1882F",39,0)
 ;;36^1^SURG^CAROTID ARTERY STENT PROCEDURE W/O CC/MCC^1.7180^1.3
"RTN","ICD1882F",40,0)
 ;;37^1^SURG^EXTRACRANIAL PROCEDURES W MCC^3.0888^5.3
"RTN","ICD1882F",41,0)
 ;;38^1^SURG^EXTRACRANIAL PROCEDURES W CC^1.5560^2.3
"RTN","ICD1882F",42,0)
 ;;39^1^SURG^EXTRACRANIAL PROCEDURES W/O CC/MCC^1.0609^1.3
"RTN","ICD1882F",43,0)
 ;;40^1^SURG^PERIPH/CRANIAL NERVE & OTHER NERV SYST PROC W MCC^3.8044^8.2
"RTN","ICD1882F",44,0)
 ;;41^1^SURG^PERIPH/CRANIAL NERVE & OTHER NERV SYST PROC W CC OR PERIPH NEUROSTIM^2.1354^4.7
"RTN","ICD1882F",45,0)
 ;;42^1^SURG^PERIPH/CRANIAL NERVE & OTHER NERV SYST PROC W/O CC/MCC^1.9242^2.7
"RTN","ICD1882F",46,0)
 ;;52^1^MED^SPINAL DISORDERS & INJURIES W CC/MCC^1.4915^4.1
"RTN","ICD1882F",47,0)
 ;;53^1^MED^SPINAL DISORDERS & INJURIES W/O CC/MCC^.8625^2.8
"RTN","ICD1882F",48,0)
 ;;54^1^MED^NERVOUS SYSTEM NEOPLASMS W MCC^1.3570^4.0
"RTN","ICD1882F",49,0)
 ;;55^1^MED^NERVOUS SYSTEM NEOPLASMS W/O MCC^1.0401^3.0
"RTN","ICD1882F",50,0)
 ;;56^1^MED^DEGENERATIVE NERVOUS SYSTEM DISORDERS W MCC^1.8513^5.2
"RTN","ICD1882F",51,0)
 ;;57^1^MED^DEGENERATIVE NERVOUS SYSTEM DISORDERS W/O MCC^1.0716^3.7
"RTN","ICD1882F",52,0)
 ;;58^1^MED^MULTIPLE SCLEROSIS & CEREBELLAR ATAXIA W MCC^1.7198^5.5
"RTN","ICD1882F",53,0)
 ;;59^1^MED^MULTIPLE SCLEROSIS & CEREBELLAR ATAXIA W CC^1.0134^3.7
"RTN","ICD1882F",54,0)
 ;;60^1^MED^MULTIPLE SCLEROSIS & CEREBELLAR ATAXIA W/O CC/MCC^.8130^3.1
"RTN","ICD1882F",55,0)
 ;;61^1^MED^ACUTE ISCHEMIC STROKE W USE OF THROMBOLYTIC AGENT W MCC^2.6843^5.4
"RTN","ICD1882F",56,0)
 ;;62^1^MED^ACUTE ISCHEMIC STROKE W USE OF THROMBOLYTIC AGENT W CC^1.8918^3.9
"RTN","ICD1882F",57,0)
 ;;63^1^MED^ACUTE ISCHEMIC STROKE W USE OF THROMBOLYTIC AGENT W/O CC/MCC^1.5238^2.9
"RTN","ICD1882F",58,0)
 ;;64^1^MED^INTRACRANIAL HEMORRHAGE OR CEREBRAL INFARCTION W MCC^1.7326^4.5
"RTN","ICD1882F",59,0)
 ;;65^1^MED^INTRACRANIAL HEMORRHAGE OR CEREBRAL INFARCTION W CC OR TPA IN 24 HRS^1.0593^3.3
"RTN","ICD1882F",60,0)
 ;;66^1^MED^INTRACRANIAL HEMORRHAGE OR CEREBRAL INFARCTION W/O CC/MCC^.7574^2.4
"RTN","ICD1882F",61,0)
 ;;67^1^MED^NONSPECIFIC CVA & PRECEREBRAL OCCLUSION W/O INFARCT W MCC^1.4338^4.0
"RTN","ICD1882F",62,0)
 ;;68^1^MED^NONSPECIFIC CVA & PRECEREBRAL OCCLUSION W/O INFARCT W/O MCC^.8731^2.4
"RTN","ICD1882F",63,0)
 ;;69^1^MED^TRANSIENT ISCHEMIA^.7227^2.1
"RTN","ICD1882F",64,0)
 ;;70^1^MED^NONSPECIFIC CEREBROVASCULAR DISORDERS W MCC^1.6283^4.7
"RTN","ICD1882F",65,0)
 ;;71^1^MED^NONSPECIFIC CEREBROVASCULAR DISORDERS W CC^1.0079^3.5
"RTN","ICD1882F",66,0)
 ;;72^1^MED^NONSPECIFIC CEREBROVASCULAR DISORDERS W/O CC/MCC^.7329^2.4
"RTN","ICD1882F",67,0)
 ;;73^1^MED^CRANIAL & PERIPHERAL NERVE DISORDERS W MCC^1.3359^3.8
"RTN","ICD1882F",68,0)
 ;;74^1^MED^CRANIAL & PERIPHERAL NERVE DISORDERS W/O MCC^.9063^3.0
"RTN","ICD1882F",69,0)
 ;;75^1^MED^VIRAL MENINGITIS W CC/MCC^1.6917^5.3
"RTN","ICD1882F",70,0)
 ;;76^1^MED^VIRAL MENINGITIS W/O CC/MCC^.8302^2.9
"RTN","ICD1882F",71,0)
 ;;77^1^MED^HYPERTENSIVE ENCEPHALOPATHY W MCC^1.5448^4.4
"RTN","ICD1882F",72,0)
 ;;78^1^MED^HYPERTENSIVE ENCEPHALOPATHY W CC^.9676^3.1
"RTN","ICD1882F",73,0)
 ;;79^1^MED^HYPERTENSIVE ENCEPHALOPATHY W/O CC/MCC^.6862^2.3
"RTN","ICD1882F",74,0)
 ;;80^1^MED^NONTRAUMATIC STUPOR & COMA W MCC^1.2159^3.7
"RTN","ICD1882F",75,0)
 ;;81^1^MED^NONTRAUMATIC STUPOR & COMA W/O MCC^.7651^2.7
"RTN","ICD1882F",76,0)
 ;;82^1^MED^TRAUMATIC STUPOR & COMA, COMA >1 HR W MCC^2.0170^3.4
"RTN","ICD1882F",77,0)
 ;;83^1^MED^TRAUMATIC STUPOR & COMA, COMA >1 HR W CC^1.3006^3.3
"RTN","ICD1882F",78,0)
 ;;84^1^MED^TRAUMATIC STUPOR & COMA, COMA >1 HR W/O CC/MCC^.8469^2.1
"RTN","ICD1882F",79,0)
 ;;85^1^MED^TRAUMATIC STUPOR & COMA, COMA <1 HR W MCC^2.0357^4.7
"RTN","ICD1882F",80,0)
 ;;86^1^MED^TRAUMATIC STUPOR & COMA, COMA <1 HR W CC^1.1394^3.3
"RTN","ICD1882F",81,0)
 ;;87^1^MED^TRAUMATIC STUPOR & COMA, COMA <1 HR W/O CC/MCC^.7918^2.2
"RTN","ICD1882F",82,0)
 ;;88^1^MED^CONCUSSION W MCC^1.3653^3.7
"RTN","ICD1882F",83,0)
 ;;89^1^MED^CONCUSSION W CC^.9759^2.8
"RTN","ICD1882F",84,0)
 ;;90^1^MED^CONCUSSION W/O CC/MCC^.7394^1.9
"RTN","ICD1882F",85,0)
 ;;91^1^MED^OTHER DISORDERS OF NERVOUS SYSTEM W MCC^1.5880^4.2
"RTN","ICD1882F",86,0)
 ;;92^1^MED^OTHER DISORDERS OF NERVOUS SYSTEM W CC^.9075^3.1
"RTN","ICD1882F",87,0)
 ;;93^1^MED^OTHER DISORDERS OF NERVOUS SYSTEM W/O CC/MCC^.6981^2.2
"RTN","ICD1882F",88,0)
 ;;94^1^MED^BACTERIAL & TUBERCULOUS INFECTIONS OF NERVOUS SYSTEM W MCC^3.4429^8.2
"RTN","ICD1882F",89,0)
 ;;95^1^MED^BACTERIAL & TUBERCULOUS INFECTIONS OF NERVOUS SYSTEM W CC^2.3282^5.7
"RTN","ICD1882F",90,0)
 ;;96^1^MED^BACTERIAL & TUBERCULOUS INFECTIONS OF NERVOUS SYSTEM W/O CC/MCC^2.1855^4.8
"RTN","ICD1882F",91,0)
 ;;97^1^MED^NON-BACTERIAL INFECT OF NERVOUS SYS EXC VIRAL MENINGITIS W MCC^3.1221^8.1
"RTN","ICD1882F",92,0)
 ;;98^1^MED^NON-BACTERIAL INFECT OF NERVOUS SYS EXC VIRAL MENINGITIS W CC^1.8410^5.7
"RTN","ICD1882F",93,0)
 ;;99^1^MED^NON-BACTERIAL INFECT OF NERVOUS SYS EXC VIRAL MENINGITIS W/O CC/MCC^1.2570^4.1
"RTN","ICD1882F",94,0)
 ;;100^1^MED^SEIZURES W MCC^1.5639^4.2
"RTN","ICD1882F",95,0)
 ;;101^1^MED^SEIZURES W/O MCC^.7942^2.6
"RTN","ICD1882F",96,0)
 ;;102^1^MED^HEADACHES W MCC^1.0685^3.1
"RTN","ICD1882F",97,0)
 ;;103^1^MED^HEADACHES W/O MCC^.7199^2.3
"RTN","ICD1882F",98,0)
 ;;113^2^SURG^ORBITAL PROCEDURES W CC/MCC^2.0118^4.0
"RTN","ICD1882F",99,0)
 ;;114^2^SURG^ORBITAL PROCEDURES W/O CC/MCC^1.2094^2.4
"RTN","ICD1882F",100,0)
 ;;115^2^SURG^EXTRAOCULAR PROCEDURES EXCEPT ORBIT^1.3151^3.5
"RTN","ICD1882F",101,0)
 ;;116^2^SURG^INTRAOCULAR PROCEDURES W CC/MCC^1.5015^3.5
"RTN","ICD1882F",102,0)
 ;;117^2^SURG^INTRAOCULAR PROCEDURES W/O CC/MCC^.8340^2.0
"RTN","ICD1882F",103,0)
 ;;121^2^MED^ACUTE MAJOR EYE INFECTIONS W CC/MCC^.9934^3.8
"RTN","ICD1882F",104,0)
 ;;122^2^MED^ACUTE MAJOR EYE INFECTIONS W/O CC/MCC^.5850^3.0
"RTN","ICD1882F",105,0)
 ;;123^2^MED^NEUROLOGICAL EYE DISORDERS^.7171^2.1
"RTN","ICD1882F",106,0)
 ;;124^2^MED^OTHER DISORDERS OF THE EYE W MCC^1.2163^3.8
"RTN","ICD1882F",107,0)
 ;;125^2^MED^OTHER DISORDERS OF THE EYE W/O MCC^.7256^2.5
"RTN","ICD1882F",108,0)
 ;;129^3^SURG^MAJOR HEAD & NECK PROCEDURES W CC/MCC OR MAJOR DEVICE^2.2292^3.7
"RTN","ICD1882F",109,0)
 ;;130^3^SURG^MAJOR HEAD & NECK PROCEDURES W/O CC/MCC^1.3596^2.3
"RTN","ICD1882F",110,0)
 ;;131^3^SURG^CRANIAL/FACIAL PROCEDURES W CC/MCC^2.4094^4.3
"RTN","ICD1882F",111,0)
 ;;132^3^SURG^CRANIAL/FACIAL PROCEDURES W/O CC/MCC^1.4401^2.2
"RTN","ICD1882F",112,0)
 ;;133^3^SURG^OTHER EAR, NOSE, MOUTH & THROAT O.R. PROCEDURES W CC/MCC^1.8573^3.8
"RTN","ICD1882F",113,0)
 ;;134^3^SURG^OTHER EAR, NOSE, MOUTH & THROAT O.R. PROCEDURES W/O CC/MCC^1.0635^1.9
"RTN","ICD1882F",114,0)
 ;;135^3^SURG^SINUS & MASTOID PROCEDURES W CC/MCC^1.9100^4.1
"RTN","ICD1882F",115,0)
 ;;136^3^SURG^SINUS & MASTOID PROCEDURES W/O CC/MCC^1.1905^1.9
"RTN","ICD1882F",116,0)
 ;;137^3^SURG^MOUTH PROCEDURES W CC/MCC^1.4261^3.8
"RTN","ICD1882F",117,0)
 ;;138^3^SURG^MOUTH PROCEDURES W/O CC/MCC^.8272^2.0
"RTN","ICD1882F",118,0)
 ;;139^3^SURG^SALIVARY GLAND PROCEDURES^.9828^1.6
"RTN","ICD1882F",119,0)
 ;;146^3^MED^EAR, NOSE, MOUTH & THROAT MALIGNANCY W MCC^1.8740^5.7
"RTN","ICD1882F",120,0)
 ;;147^3^MED^EAR, NOSE, MOUTH & THROAT MALIGNANCY W CC^1.2419^3.9
"RTN","ICD1882F",121,0)
 ;;148^3^MED^EAR, NOSE, MOUTH & THROAT MALIGNANCY W/O CC/MCC^.8094^2.2
"RTN","ICD1882F",122,0)
 ;;149^3^MED^DYSEQUILIBRIUM^.6707^2.1
"RTN","ICD1882F",123,0)
 ;;150^3^MED^EPISTAXIS W MCC^1.2560^3.6
"RTN","ICD1882F",124,0)
 ;;151^3^MED^EPISTAXIS W/O MCC^.7033^2.3
"RTN","ICD1882F",125,0)
 ;;152^3^MED^OTITIS MEDIA & URI W MCC^1.0612^3.4
"RTN","ICD1882F",126,0)
 ;;153^3^MED^OTITIS MEDIA & URI W/O MCC^.7042^2.5
"RTN","ICD1882F",127,0)
 ;;154^3^MED^OTHER EAR, NOSE, MOUTH & THROAT DIAGNOSES W MCC^1.4090^4.0
"RTN","ICD1882F",128,0)
 ;;155^3^MED^OTHER EAR, NOSE, MOUTH & THROAT DIAGNOSES W CC^.8733^3.1
"RTN","ICD1882F",129,0)
 ;;156^3^MED^OTHER EAR, NOSE, MOUTH & THROAT DIAGNOSES W/O CC/MCC^.6662^2.3
"RTN","ICD1882F",130,0)
 ;;157^3^MED^DENTAL & ORAL DISEASES W MCC^1.4949^4.5
"RTN","ICD1882F",131,0)
 ;;158^3^MED^DENTAL & ORAL DISEASES W CC^.8582^3.0
"RTN","ICD1882F",132,0)
 ;;159^3^MED^DENTAL & ORAL DISEASES W/O CC/MCC^.6176^2.1
"RTN","ICD1882F",133,0)
 ;;163^4^SURG^MAJOR CHEST PROCEDURES W MCC^5.0016^10.5
"RTN","ICD1882F",134,0)
 ;;164^4^SURG^MAJOR CHEST PROCEDURES W CC^2.5822^5.3
"RTN","ICD1882F",135,0)
 ;;165^4^SURG^MAJOR CHEST PROCEDURES W/O CC/MCC^1.8148^3.1
"RTN","ICD1882F",136,0)
 ;;166^4^SURG^OTHER RESP SYSTEM O.R. PROCEDURES W MCC^3.6796^8.5
"RTN","ICD1882F",137,0)
 ;;167^4^SURG^OTHER RESP SYSTEM O.R. PROCEDURES W CC^1.9367^5.0
"RTN","ICD1882F",138,0)
 ;;168^4^SURG^OTHER RESP SYSTEM O.R. PROCEDURES W/O CC/MCC^1.2950^2.9
"RTN","ICD1882F",139,0)
 ;;EXIT
"RTN","ICD1882G")
0^17^B63064849^n/a
"RTN","ICD1882G",1,0)
ICD1882G ;ALB/JDG - YEARLY DRG UPDATE;8/1/2015
"RTN","ICD1882G",2,0)
 ;;18.0;DRG Grouper;**82**;Oct 20, 2000;Build 21
"RTN","ICD1882G",3,0)
 ;
"RTN","ICD1882G",4,0)
 ; Updates for DRGS 175-329
"RTN","ICD1882G",5,0)
 Q
"RTN","ICD1882G",6,0)
 ;
"RTN","ICD1882G",7,0)
MSDRG ;;MS-DRG^MDC^TYPE^MS-DRG TITLE^WEIGHTS^GEOMETRIC MEAN LOS
"RTN","ICD1882G",8,0)
 ;;175^4^MED^PULMONARY EMBOLISM W MCC^1.4839^4.9
"RTN","ICD1882G",9,0)
 ;;176^4^MED^PULMONARY EMBOLISM W/O MCC^.9375^3.3
"RTN","ICD1882G",10,0)
 ;;177^4^MED^RESPIRATORY INFECTIONS & INFLAMMATIONS W MCC^1.9033^6.0
"RTN","ICD1882G",11,0)
 ;;178^4^MED^RESPIRATORY INFECTIONS & INFLAMMATIONS W CC^1.3575^4.8
"RTN","ICD1882G",12,0)
 ;;179^4^MED^RESPIRATORY INFECTIONS & INFLAMMATIONS W/O CC/MCC^.9659^3.6
"RTN","ICD1882G",13,0)
 ;;180^4^MED^RESPIRATORY NEOPLASMS W MCC^1.6767^5.2
"RTN","ICD1882G",14,0)
 ;;181^4^MED^RESPIRATORY NEOPLASMS W CC^1.1775^3.7
"RTN","ICD1882G",15,0)
 ;;182^4^MED^RESPIRATORY NEOPLASMS W/O CC/MCC^.8553^2.6
"RTN","ICD1882G",16,0)
 ;;183^4^MED^MAJOR CHEST TRAUMA W MCC^1.4723^4.7
"RTN","ICD1882G",17,0)
 ;;184^4^MED^MAJOR CHEST TRAUMA W CC^1.0125^3.4
"RTN","ICD1882G",18,0)
 ;;185^4^MED^MAJOR CHEST TRAUMA W/O CC/MCC^.7182^2.5
"RTN","ICD1882G",19,0)
 ;;186^4^MED^PLEURAL EFFUSION W MCC^1.5734^4.7
"RTN","ICD1882G",20,0)
 ;;187^4^MED^PLEURAL EFFUSION W CC^1.0835^3.5
"RTN","ICD1882G",21,0)
 ;;188^4^MED^PLEURAL EFFUSION W/O CC/MCC^.7860^2.7
"RTN","ICD1882G",22,0)
 ;;189^4^MED^PULMONARY EDEMA & RESPIRATORY FAILURE^1.2265^3.9
"RTN","ICD1882G",23,0)
 ;;190^4^MED^CHRONIC OBSTRUCTIVE PULMONARY DISEASE W MCC^1.1578^4.0
"RTN","ICD1882G",24,0)
 ;;191^4^MED^CHRONIC OBSTRUCTIVE PULMONARY DISEASE W CC^.9321^3.3
"RTN","ICD1882G",25,0)
 ;;192^4^MED^CHRONIC OBSTRUCTIVE PULMONARY DISEASE W/O CC/MCC^.7313^2.7
"RTN","ICD1882G",26,0)
 ;;193^4^MED^SIMPLE PNEUMONIA & PLEURISY W MCC^1.4261^4.8
"RTN","ICD1882G",27,0)
 ;;194^4^MED^SIMPLE PNEUMONIA & PLEURISY W CC^.9695^3.7
"RTN","ICD1882G",28,0)
 ;;195^4^MED^SIMPLE PNEUMONIA & PLEURISY W/O CC/MCC^.7111^2.8
"RTN","ICD1882G",29,0)
 ;;196^4^MED^INTERSTITIAL LUNG DISEASE W MCC^1.6315^5.2
"RTN","ICD1882G",30,0)
 ;;197^4^MED^INTERSTITIAL LUNG DISEASE W CC^1.0406^3.6
"RTN","ICD1882G",31,0)
 ;;198^4^MED^INTERSTITIAL LUNG DISEASE W/O CC/MCC^.7775^2.8
"RTN","ICD1882G",32,0)
 ;;199^4^MED^PNEUMOTHORAX W MCC^1.7503^5.7
"RTN","ICD1882G",33,0)
 ;;200^4^MED^PNEUMOTHORAX W CC^1.0443^3.5
"RTN","ICD1882G",34,0)
 ;;201^4^MED^PNEUMOTHORAX W/O CC/MCC^.7354^2.7
"RTN","ICD1882G",35,0)
 ;;202^4^MED^BRONCHITIS & ASTHMA W CC/MCC^.8980^3.1
"RTN","ICD1882G",36,0)
 ;;203^4^MED^BRONCHITIS & ASTHMA W/O CC/MCC^.6697^2.5
"RTN","ICD1882G",37,0)
 ;;204^4^MED^RESPIRATORY SIGNS & SYMPTOMS^.7291^2.2
"RTN","ICD1882G",38,0)
 ;;205^4^MED^OTHER RESPIRATORY SYSTEM DIAGNOSES W MCC^1.4478^4.1
"RTN","ICD1882G",39,0)
 ;;206^4^MED^OTHER RESPIRATORY SYSTEM DIAGNOSES W/O MCC^.8164^2.5
"RTN","ICD1882G",40,0)
 ;;207^4^MED^RESPIRATORY SYSTEM DIAGNOSIS W VENTILATOR SUPPORT >96 HOURS^5.3498^12.2
"RTN","ICD1882G",41,0)
 ;;208^4^MED^RESPIRATORY SYSTEM DIAGNOSIS W VENTILATOR SUPPORT <96 HOURS^2.3055^4.9
"RTN","ICD1882G",42,0)
 ;;215^5^SURG^OTHER HEART ASSIST SYSTEM IMPLANT^15.8738^12.0
"RTN","ICD1882G",43,0)
 ;;216^5^SURG^CARDIAC VALVE & OTH MAJ CARDIOTHORACIC PROC W CARD CATH W MCC^9.4642^12.7
"RTN","ICD1882G",44,0)
 ;;217^5^SURG^CARDIAC VALVE & OTH MAJ CARDIOTHORACIC PROC W CARD CATH W CC^6.2576^8.5
"RTN","ICD1882G",45,0)
 ;;218^5^SURG^CARDIAC VALVE & OTH MAJ CARDIOTHORACIC PROC W CARD CATH W/O CC/MCC^5.4815^6.5
"RTN","ICD1882G",46,0)
 ;;219^5^SURG^CARDIAC VALVE & OTH MAJ CARDIOTHORACIC PROC W/O CARD CATH W MCC^7.5590^9.6
"RTN","ICD1882G",47,0)
 ;;220^5^SURG^CARDIAC VALVE & OTH MAJ CARDIOTHORACIC PROC W/O CARD CATH W CC^5.1074^6.5
"RTN","ICD1882G",48,0)
 ;;221^5^SURG^CARDIAC VALVE & OTH MAJ CARDIOTHORACIC PROC W/O CARD CATH W/O CC/MCC^4.5406^4.8
"RTN","ICD1882G",49,0)
 ;;222^5^SURG^CARDIAC DEFIB IMPLANT W CARDIAC CATH W AMI/HF/SHOCK W MCC^8.5188^10.2
"RTN","ICD1882G",50,0)
 ;;223^5^SURG^CARDIAC DEFIB IMPLANT W CARDIAC CATH W AMI/HF/SHOCK W/O MCC^6.4026^5.4
"RTN","ICD1882G",51,0)
 ;;224^5^SURG^CARDIAC DEFIB IMPLANT W CARDIAC CATH W/O AMI/HF/SHOCK W MCC^7.6140^8.0
"RTN","ICD1882G",52,0)
 ;;225^5^SURG^CARDIAC DEFIB IMPLANT W CARDIAC CATH W/O AMI/HF/SHOCK W/O MCC^5.8561^4.1
"RTN","ICD1882G",53,0)
 ;;226^5^SURG^CARDIAC DEFIBRILLATOR IMPLANT W/O CARDIAC CATH W MCC^6.9737^6.8
"RTN","ICD1882G",54,0)
 ;;227^5^SURG^CARDIAC DEFIBRILLATOR IMPLANT W/O CARDIAC CATH W/O MCC^5.4816^3.1
"RTN","ICD1882G",55,0)
 ;;228^5^SURG^OTHER CARDIOTHORACIC PROCEDURES W MCC^6.9512^10.8
"RTN","ICD1882G",56,0)
 ;;229^5^SURG^OTHER CARDIOTHORACIC PROCEDURES W CC^4.5589^6.5
"RTN","ICD1882G",57,0)
 ;;230^5^SURG^OTHER CARDIOTHORACIC PROCEDURES W/O CC/MCC^4.3018^4.3
"RTN","ICD1882G",58,0)
 ;;231^5^SURG^CORONARY BYPASS W PTCA W MCC^7.8056^9.9
"RTN","ICD1882G",59,0)
 ;;232^5^SURG^CORONARY BYPASS W PTCA W/O MCC^5.7779^7.9
"RTN","ICD1882G",60,0)
 ;;233^5^SURG^CORONARY BYPASS W CARDIAC CATH W MCC^7.3581^11.6
"RTN","ICD1882G",61,0)
 ;;234^5^SURG^CORONARY BYPASS W CARDIAC CATH W/O MCC^4.9076^8.0
"RTN","ICD1882G",62,0)
 ;;235^5^SURG^CORONARY BYPASS W/O CARDIAC CATH W MCC^5.8103^8.9
"RTN","ICD1882G",63,0)
 ;;236^5^SURG^CORONARY BYPASS W/O CARDIAC CATH W/O MCC^3.8013^6.0
"RTN","ICD1882G",64,0)
 ;;239^5^SURG^AMPUTATION FOR CIRC SYS DISORDERS EXC UPPER LIMB & TOE W MCC^4.8380^10.5
"RTN","ICD1882G",65,0)
 ;;240^5^SURG^AMPUTATION FOR CIRC SYS DISORDERS EXC UPPER LIMB & TOE W CC^2.6835^7.0
"RTN","ICD1882G",66,0)
 ;;241^5^SURG^AMPUTATION FOR CIRC SYS DISORDERS EXC UPPER LIMB & TOE W/O CC/MCC^1.4476^4.5
"RTN","ICD1882G",67,0)
 ;;242^5^SURG^PERMANENT CARDIAC PACEMAKER IMPLANT W MCC^3.7836^5.7
"RTN","ICD1882G",68,0)
 ;;243^5^SURG^PERMANENT CARDIAC PACEMAKER IMPLANT W CC^2.6444^3.6
"RTN","ICD1882G",69,0)
 ;;244^5^SURG^PERMANENT CARDIAC PACEMAKER IMPLANT W/O CC/MCC^2.1394^2.5
"RTN","ICD1882G",70,0)
 ;;245^5^SURG^AICD GENERATOR PROCEDURES^4.6864^4.0
"RTN","ICD1882G",71,0)
 ;;246^5^SURG^PERC CARDIOVASC PROC W DRUG-ELUTING STENT W MCC OR 4+ VESSELS/STENTS^3.2494^4.1
"RTN","ICD1882G",72,0)
 ;;247^5^SURG^PERC CARDIOVASC PROC W DRUG-ELUTING STENT W/O MCC^2.1307^2.2
"RTN","ICD1882G",73,0)
 ;;248^5^SURG^PERC CARDIOVASC PROC W NON-DRUG-ELUTING STENT W MCC OR 4+ VES/STENTS^3.0696^4.8
"RTN","ICD1882G",74,0)
 ;;249^5^SURG^PERC CARDIOVASC PROC W NON-DRUG-ELUTING STENT W/O MCC^1.9140^2.5
"RTN","ICD1882G",75,0)
 ;;250^5^SURG^PERC CARDIOVASC PROC W/O CORONARY ARTERY STENT W MCC^2.6975^4.2
"RTN","ICD1882G",76,0)
 ;;251^5^SURG^PERC CARDIOVASC PROC W/O CORONARY ARTERY STENT W/O MCC^1.6863^2.4
"RTN","ICD1882G",77,0)
 ;;252^5^SURG^OTHER VASCULAR PROCEDURES W MCC^3.2872^5.5
"RTN","ICD1882G",78,0)
 ;;253^5^SURG^OTHER VASCULAR PROCEDURES W CC^2.6028^4.3
"RTN","ICD1882G",79,0)
 ;;254^5^SURG^OTHER VASCULAR PROCEDURES W/O CC/MCC^1.7232^2.4
"RTN","ICD1882G",80,0)
 ;;255^5^SURG^UPPER LIMB & TOE AMPUTATION FOR CIRC SYSTEM DISORDERS W MCC^2.6202^6.8
"RTN","ICD1882G",81,0)
 ;;256^5^SURG^UPPER LIMB & TOE AMPUTATION FOR CIRC SYSTEM DISORDERS W CC^1.6241^5.3
"RTN","ICD1882G",82,0)
 ;;257^5^SURG^UPPER LIMB & TOE AMPUTATION FOR CIRC SYSTEM DISORDERS W/O CC/MCC^1.0844^3.4
"RTN","ICD1882G",83,0)
 ;;258^5^SURG^CARDIAC PACEMAKER DEVICE REPLACEMENT W MCC^2.8590^4.9
"RTN","ICD1882G",84,0)
 ;;259^5^SURG^CARDIAC PACEMAKER DEVICE REPLACEMENT W/O MCC^1.9456^2.9
"RTN","ICD1882G",85,0)
 ;;260^5^SURG^CARDIAC PACEMAKER REVISION EXCEPT DEVICE REPLACEMENT W MCC^3.7299^7.6
"RTN","ICD1882G",86,0)
 ;;261^5^SURG^CARDIAC PACEMAKER REVISION EXCEPT DEVICE REPLACEMENT W CC^1.8639^3.5
"RTN","ICD1882G",87,0)
 ;;262^5^SURG^CARDIAC PACEMAKER REVISION EXCEPT DEVICE REPLACEMENT W/O CC/MCC^1.5125^2.5
"RTN","ICD1882G",88,0)
 ;;263^5^SURG^VEIN LIGATION & STRIPPING^2.0854^4.1
"RTN","ICD1882G",89,0)
 ;;264^5^SURG^OTHER CIRCULATORY SYSTEM O.R. PROCEDURES^2.8080^5.8
"RTN","ICD1882G",90,0)
 ;;265^5^SURG^AICD LEAD PROCEDURES^2.9681^3.1
"RTN","ICD1882G",91,0)
 ;;266^5^SURG^ENDOVASCULAR CARDIAC VALVE REPLACEMENT W MCC^8.5986^7.3
"RTN","ICD1882G",92,0)
 ;;267^5^SURG^ENDOVASCULAR CARDIAC VALVE REPLACEMENT W/O MCC^6.5575^4.4
"RTN","ICD1882G",93,0)
 ;;268^5^SURG^AORTIC AND HEART ASSIST PROCEDURES EXCEPT PULSATION BALLOON W MCC^6.2807^6.9
"RTN","ICD1882G",94,0)
 ;;269^5^SURG^AORTIC AND HEART ASSIST PROCEDURES EXCEPT PULSATION BALLOON W/O MCC^3.9041^1.9
"RTN","ICD1882G",95,0)
 ;;270^5^SURG^OTHER MAJOR CARDIOVASCULAR PROCEDURES W MCC^4.7349^6.5
"RTN","ICD1882G",96,0)
 ;;271^5^SURG^OTHER MAJOR CARDIOVASCULAR PROCEDURES W CC^3.1426^4.5
"RTN","ICD1882G",97,0)
 ;;272^5^SURG^OTHER MAJOR CARDIOVASCULAR PROCEDURES W/O CC/MCC^2.2508^2.3
"RTN","ICD1882G",98,0)
 ;;273^5^SURG^PERCUTANEOUS INTRACARDIAC PROCEDURES W MCC^3.5499^6.0
"RTN","ICD1882G",99,0)
 ;;274^5^SURG^PERCUTANEOUS INTRACARDIAC PROCEDURES W/O MCC^2.4197^2.7
"RTN","ICD1882G",100,0)
 ;;280^5^MED^ACUTE MYOCARDIAL INFARCTION, DISCHARGED ALIVE W MCC^1.6971^4.5
"RTN","ICD1882G",101,0)
 ;;281^5^MED^ACUTE MYOCARDIAL INFARCTION, DISCHARGED ALIVE W CC^1.0232^2.9
"RTN","ICD1882G",102,0)
 ;;282^5^MED^ACUTE MYOCARDIAL INFARCTION, DISCHARGED ALIVE W/O CC/MCC^.7557^2.0
"RTN","ICD1882G",103,0)
 ;;283^5^MED^ACUTE MYOCARDIAL INFARCTION, EXPIRED W MCC^1.6613^2.9
"RTN","ICD1882G",104,0)
 ;;284^5^MED^ACUTE MYOCARDIAL INFARCTION, EXPIRED W CC^.7827^1.8
"RTN","ICD1882G",105,0)
 ;;285^5^MED^ACUTE MYOCARDIAL INFARCTION, EXPIRED W/O CC/MCC^.5473^1.4
"RTN","ICD1882G",106,0)
 ;;286^5^MED^CIRCULATORY DISORDERS EXCEPT AMI, W CARD CATH W MCC^2.1775^5.1
"RTN","ICD1882G",107,0)
 ;;287^5^MED^CIRCULATORY DISORDERS EXCEPT AMI, W CARD CATH W/O MCC^1.1562^2.5
"RTN","ICD1882G",108,0)
 ;;288^5^MED^ACUTE & SUBACUTE ENDOCARDITIS W MCC^2.7933^7.5
"RTN","ICD1882G",109,0)
 ;;289^5^MED^ACUTE & SUBACUTE ENDOCARDITIS W CC^1.6969^5.6
"RTN","ICD1882G",110,0)
 ;;290^5^MED^ACUTE & SUBACUTE ENDOCARDITIS W/O CC/MCC^1.0546^3.7
"RTN","ICD1882G",111,0)
 ;;291^5^MED^HEART FAILURE & SHOCK W MCC^1.4809^4.6
"RTN","ICD1882G",112,0)
 ;;292^5^MED^HEART FAILURE & SHOCK W CC^.9707^3.6
"RTN","ICD1882G",113,0)
 ;;293^5^MED^HEART FAILURE & SHOCK W/O CC/MCC^.6737^2.6
"RTN","ICD1882G",114,0)
 ;;294^5^MED^DEEP VEIN THROMBOPHLEBITIS W CC/MCC^.9826^3.8
"RTN","ICD1882G",115,0)
 ;;295^5^MED^DEEP VEIN THROMBOPHLEBITIS W/O CC/MCC^.7427^3.2
"RTN","ICD1882G",116,0)
 ;;296^5^MED^CARDIAC ARREST, UNEXPLAINED W MCC^1.2864^1.9
"RTN","ICD1882G",117,0)
 ;;297^5^MED^CARDIAC ARREST, UNEXPLAINED W CC^.6488^1.3
"RTN","ICD1882G",118,0)
 ;;298^5^MED^CARDIAC ARREST, UNEXPLAINED W/O CC/MCC^.4477^1.1
"RTN","ICD1882G",119,0)
 ;;299^5^MED^PERIPHERAL VASCULAR DISORDERS W MCC^1.4216^4.3
"RTN","ICD1882G",120,0)
 ;;300^5^MED^PERIPHERAL VASCULAR DISORDERS W CC^.9994^3.5
"RTN","ICD1882G",121,0)
 ;;301^5^MED^PERIPHERAL VASCULAR DISORDERS W/O CC/MCC^.7023^2.6
"RTN","ICD1882G",122,0)
 ;;302^5^MED^ATHEROSCLEROSIS W MCC^1.0590^2.9
"RTN","ICD1882G",123,0)
 ;;303^5^MED^ATHEROSCLEROSIS W/O MCC^.6427^2.0
"RTN","ICD1882G",124,0)
 ;;304^5^MED^HYPERTENSION W MCC^1.0109^3.3
"RTN","ICD1882G",125,0)
 ;;305^5^MED^HYPERTENSION W/O MCC^.6626^2.2
"RTN","ICD1882G",126,0)
 ;;306^5^MED^CARDIAC CONGENITAL & VALVULAR DISORDERS W MCC^1.4029^4.0
"RTN","ICD1882G",127,0)
 ;;307^5^MED^CARDIAC CONGENITAL & VALVULAR DISORDERS W/O MCC^.8044^2.5
"RTN","ICD1882G",128,0)
 ;;308^5^MED^CARDIAC ARRHYTHMIA & CONDUCTION DISORDERS W MCC^1.2150^3.8
"RTN","ICD1882G",129,0)
 ;;309^5^MED^CARDIAC ARRHYTHMIA & CONDUCTION DISORDERS W CC^.7851^2.6
"RTN","ICD1882G",130,0)
 ;;310^5^MED^CARDIAC ARRHYTHMIA & CONDUCTION DISORDERS W/O CC/MCC^.5608^2.0
"RTN","ICD1882G",131,0)
 ;;311^5^MED^ANGINA PECTORIS^.6091^1.8
"RTN","ICD1882G",132,0)
 ;;312^5^MED^SYNCOPE & COLLAPSE^.7630^2.4
"RTN","ICD1882G",133,0)
 ;;313^5^MED^CHEST PAIN^.6621^1.8
"RTN","ICD1882G",134,0)
 ;;314^5^MED^OTHER CIRCULATORY SYSTEM DIAGNOSES W MCC^1.9334^4.9
"RTN","ICD1882G",135,0)
 ;;315^5^MED^OTHER CIRCULATORY SYSTEM DIAGNOSES W CC^.9722^3.1
"RTN","ICD1882G",136,0)
 ;;316^5^MED^OTHER CIRCULATORY SYSTEM DIAGNOSES W/O CC/MCC^.6498^2.0
"RTN","ICD1882G",137,0)
 ;;326^6^SURG^STOMACH, ESOPHAGEAL & DUODENAL PROC W MCC^5.4452^11.0
"RTN","ICD1882G",138,0)
 ;;327^6^SURG^STOMACH, ESOPHAGEAL & DUODENAL PROC W CC^2.6399^5.7
"RTN","ICD1882G",139,0)
 ;;328^6^SURG^STOMACH, ESOPHAGEAL & DUODENAL PROC W/O CC/MCC^1.5154^2.5
"RTN","ICD1882G",140,0)
 ;;329^6^SURG^MAJOR SMALL & LARGE BOWEL PROCEDURES W MCC^5.0709^11.5
"RTN","ICD1882G",141,0)
 ;;EXIT
"RTN","ICD1882H")
0^18^B59090507^n/a
"RTN","ICD1882H",1,0)
ICD1882H ;ALB/JDG - YEARLY DRG UPDATE;8/1/2015
"RTN","ICD1882H",2,0)
 ;;18.0;DRG Grouper;**82**;Oct 20, 2000;Build 21
"RTN","ICD1882H",3,0)
 ;
"RTN","ICD1882H",4,0)
 ; Updates for DRGS 330-480
"RTN","ICD1882H",5,0)
 Q
"RTN","ICD1882H",6,0)
 ;
"RTN","ICD1882H",7,0)
MSDRG ;;MS-DRG^MDC^TYPE^MS-DRG TITLE^WEIGHTS^GEOMETRIC MEAN LOS
"RTN","ICD1882H",8,0)
 ;;330^6^SURG^MAJOR SMALL & LARGE BOWEL PROCEDURES W CC^2.5511^7.0
"RTN","ICD1882H",9,0)
 ;;331^6^SURG^MAJOR SMALL & LARGE BOWEL PROCEDURES W/O CC/MCC^1.6491^4.1
"RTN","ICD1882H",10,0)
 ;;332^6^SURG^RECTAL RESECTION W MCC^4.5570^10.2
"RTN","ICD1882H",11,0)
 ;;333^6^SURG^RECTAL RESECTION W CC^2.4254^6.0
"RTN","ICD1882H",12,0)
 ;;334^6^SURG^RECTAL RESECTION W/O CC/MCC^1.6480^3.5
"RTN","ICD1882H",13,0)
 ;;335^6^SURG^PERITONEAL ADHESIOLYSIS W MCC^4.1261^10.4
"RTN","ICD1882H",14,0)
 ;;336^6^SURG^PERITONEAL ADHESIOLYSIS W CC^2.3340^6.7
"RTN","ICD1882H",15,0)
 ;;337^6^SURG^PERITONEAL ADHESIOLYSIS W/O CC/MCC^1.5675^4.0
"RTN","ICD1882H",16,0)
 ;;338^6^SURG^APPENDECTOMY W COMPLICATED PRINCIPAL DIAG W MCC^2.9719^7.5
"RTN","ICD1882H",17,0)
 ;;339^6^SURG^APPENDECTOMY W COMPLICATED PRINCIPAL DIAG W CC^1.7693^4.8
"RTN","ICD1882H",18,0)
 ;;340^6^SURG^APPENDECTOMY W COMPLICATED PRINCIPAL DIAG W/O CC/MCC^1.1773^2.9
"RTN","ICD1882H",19,0)
 ;;341^6^SURG^APPENDECTOMY W/O COMPLICATED PRINCIPAL DIAG W MCC^2.1523^4.5
"RTN","ICD1882H",20,0)
 ;;342^6^SURG^APPENDECTOMY W/O COMPLICATED PRINCIPAL DIAG W CC^1.3275^2.7
"RTN","ICD1882H",21,0)
 ;;343^6^SURG^APPENDECTOMY W/O COMPLICATED PRINCIPAL DIAG W/O CC/MCC^1.0099^1.7
"RTN","ICD1882H",22,0)
 ;;344^6^SURG^MINOR SMALL & LARGE BOWEL PROCEDURES W MCC^3.1029^8.0
"RTN","ICD1882H",23,0)
 ;;345^6^SURG^MINOR SMALL & LARGE BOWEL PROCEDURES W CC^1.6268^5.2
"RTN","ICD1882H",24,0)
 ;;346^6^SURG^MINOR SMALL & LARGE BOWEL PROCEDURES W/O CC/MCC^1.2143^3.7
"RTN","ICD1882H",25,0)
 ;;347^6^SURG^ANAL & STOMAL PROCEDURES W MCC^2.4457^6.1
"RTN","ICD1882H",26,0)
 ;;348^6^SURG^ANAL & STOMAL PROCEDURES W CC^1.4486^4.0
"RTN","ICD1882H",27,0)
 ;;349^6^SURG^ANAL & STOMAL PROCEDURES W/O CC/MCC^.9265^2.4
"RTN","ICD1882H",28,0)
 ;;350^6^SURG^INGUINAL & FEMORAL HERNIA PROCEDURES W MCC^2.4982^5.6
"RTN","ICD1882H",29,0)
 ;;351^6^SURG^INGUINAL & FEMORAL HERNIA PROCEDURES W CC^1.4110^3.4
"RTN","ICD1882H",30,0)
 ;;352^6^SURG^INGUINAL & FEMORAL HERNIA PROCEDURES W/O CC/MCC^.9764^2.1
"RTN","ICD1882H",31,0)
 ;;353^6^SURG^HERNIA PROCEDURES EXCEPT INGUINAL & FEMORAL W MCC^2.9142^6.2
"RTN","ICD1882H",32,0)
 ;;354^6^SURG^HERNIA PROCEDURES EXCEPT INGUINAL & FEMORAL W CC^1.6640^3.9
"RTN","ICD1882H",33,0)
 ;;355^6^SURG^HERNIA PROCEDURES EXCEPT INGUINAL & FEMORAL W/O CC/MCC^1.2366^2.5
"RTN","ICD1882H",34,0)
 ;;356^6^SURG^OTHER DIGESTIVE SYSTEM O.R. PROCEDURES W MCC^3.7588^8.2
"RTN","ICD1882H",35,0)
 ;;357^6^SURG^OTHER DIGESTIVE SYSTEM O.R. PROCEDURES W CC^2.0801^5.1
"RTN","ICD1882H",36,0)
 ;;358^6^SURG^OTHER DIGESTIVE SYSTEM O.R. PROCEDURES W/O CC/MCC^1.3515^3.1
"RTN","ICD1882H",37,0)
 ;;368^6^MED^MAJOR ESOPHAGEAL DISORDERS W MCC^1.7848^4.8
"RTN","ICD1882H",38,0)
 ;;369^6^MED^MAJOR ESOPHAGEAL DISORDERS W CC^1.0630^3.4
"RTN","ICD1882H",39,0)
 ;;370^6^MED^MAJOR ESOPHAGEAL DISORDERS W/O CC/MCC^.7355^2.4
"RTN","ICD1882H",40,0)
 ;;371^6^MED^MAJOR GASTROINTESTINAL DISORDERS & PERITONEAL INFECTIONS W MCC^1.7854^5.8
"RTN","ICD1882H",41,0)
 ;;372^6^MED^MAJOR GASTROINTESTINAL DISORDERS & PERITONEAL INFECTIONS W CC^1.1090^4.4
"RTN","ICD1882H",42,0)
 ;;373^6^MED^MAJOR GASTROINTESTINAL DISORDERS & PERITONEAL INFECTIONS W/O CC/MCC^.7817^3.3
"RTN","ICD1882H",43,0)
 ;;374^6^MED^DIGESTIVE MALIGNANCY W MCC^2.0345^5.9
"RTN","ICD1882H",44,0)
 ;;375^6^MED^DIGESTIVE MALIGNANCY W CC^1.2302^4.0
"RTN","ICD1882H",45,0)
 ;;376^6^MED^DIGESTIVE MALIGNANCY W/O CC/MCC^.9093^2.8
"RTN","ICD1882H",46,0)
 ;;377^6^MED^G.I. HEMORRHAGE W MCC^1.7509^4.7
"RTN","ICD1882H",47,0)
 ;;378^6^MED^G.I. HEMORRHAGE W CC^.9949^3.2
"RTN","ICD1882H",48,0)
 ;;379^6^MED^G.I. HEMORRHAGE W/O CC/MCC^.6712^2.3
"RTN","ICD1882H",49,0)
 ;;380^6^MED^COMPLICATED PEPTIC ULCER W MCC^1.9549^5.3
"RTN","ICD1882H",50,0)
 ;;381^6^MED^COMPLICATED PEPTIC ULCER W CC^1.0690^3.5
"RTN","ICD1882H",51,0)
 ;;382^6^MED^COMPLICATED PEPTIC ULCER W/O CC/MCC^.8238^2.7
"RTN","ICD1882H",52,0)
 ;;383^6^MED^UNCOMPLICATED PEPTIC ULCER W MCC^1.3545^4.2
"RTN","ICD1882H",53,0)
 ;;384^6^MED^UNCOMPLICATED PEPTIC ULCER W/O MCC^.8481^2.8
"RTN","ICD1882H",54,0)
 ;;385^6^MED^INFLAMMATORY BOWEL DISEASE W MCC^1.7195^5.7
"RTN","ICD1882H",55,0)
 ;;386^6^MED^INFLAMMATORY BOWEL DISEASE W CC^.9996^3.8
"RTN","ICD1882H",56,0)
 ;;387^6^MED^INFLAMMATORY BOWEL DISEASE W/O CC/MCC^.7379^3.0
"RTN","ICD1882H",57,0)
 ;;388^6^MED^G.I. OBSTRUCTION W MCC^1.5813^5.2
"RTN","ICD1882H",58,0)
 ;;389^6^MED^G.I. OBSTRUCTION W CC^.8707^3.5
"RTN","ICD1882H",59,0)
 ;;390^6^MED^G.I. OBSTRUCTION W/O CC/MCC^.6067^2.7
"RTN","ICD1882H",60,0)
 ;;391^6^MED^ESOPHAGITIS, GASTROENT & MISC DIGEST DISORDERS W MCC^1.1925^3.8
"RTN","ICD1882H",61,0)
 ;;392^6^MED^ESOPHAGITIS, GASTROENT & MISC DIGEST DISORDERS W/O MCC^.7400^2.7
"RTN","ICD1882H",62,0)
 ;;393^6^MED^OTHER DIGESTIVE SYSTEM DIAGNOSES W MCC^1.6335^4.6
"RTN","ICD1882H",63,0)
 ;;394^6^MED^OTHER DIGESTIVE SYSTEM DIAGNOSES W CC^.9502^3.3
"RTN","ICD1882H",64,0)
 ;;395^6^MED^OTHER DIGESTIVE SYSTEM DIAGNOSES W/O CC/MCC^.6756^2.4
"RTN","ICD1882H",65,0)
 ;;405^7^SURG^PANCREAS, LIVER & SHUNT PROCEDURES W MCC^5.5888^10.5
"RTN","ICD1882H",66,0)
 ;;406^7^SURG^PANCREAS, LIVER & SHUNT PROCEDURES W CC^2.8075^5.9
"RTN","ICD1882H",67,0)
 ;;407^7^SURG^PANCREAS, LIVER & SHUNT PROCEDURES W/O CC/MCC^2.0026^4.1
"RTN","ICD1882H",68,0)
 ;;408^7^SURG^BILIARY TRACT PROC EXCEPT ONLY CHOLECYST W OR W/O C.D.E. W MCC^3.6476^9.6
"RTN","ICD1882H",69,0)
 ;;409^7^SURG^BILIARY TRACT PROC EXCEPT ONLY CHOLECYST W OR W/O C.D.E. W CC^2.4648^6.6
"RTN","ICD1882H",70,0)
 ;;410^7^SURG^BILIARY TRACT PROC EXCEPT ONLY CHOLECYST W OR W/O C.D.E. W/O CC/MCC^1.5576^4.5
"RTN","ICD1882H",71,0)
 ;;411^7^SURG^CHOLECYSTECTOMY W C.D.E. W MCC^3.5782^8.9
"RTN","ICD1882H",72,0)
 ;;412^7^SURG^CHOLECYSTECTOMY W C.D.E. W CC^2.4981^6.6
"RTN","ICD1882H",73,0)
 ;;413^7^SURG^CHOLECYSTECTOMY W C.D.E. W/O CC/MCC^1.7996^4.1
"RTN","ICD1882H",74,0)
 ;;414^7^SURG^CHOLECYSTECTOMY EXCEPT BY LAPAROSCOPE W/O C.D.E. W MCC^3.5283^8.5
"RTN","ICD1882H",75,0)
 ;;415^7^SURG^CHOLECYSTECTOMY EXCEPT BY LAPAROSCOPE W/O C.D.E. W CC^2.0071^5.5
"RTN","ICD1882H",76,0)
 ;;416^7^SURG^CHOLECYSTECTOMY EXCEPT BY LAPAROSCOPE W/O C.D.E. W/O CC/MCC^1.3342^3.4
"RTN","ICD1882H",77,0)
 ;;417^7^SURG^LAPAROSCOPIC CHOLECYSTECTOMY W/O C.D.E. W MCC^2.4734^5.8
"RTN","ICD1882H",78,0)
 ;;418^7^SURG^LAPAROSCOPIC CHOLECYSTECTOMY W/O C.D.E. W CC^1.6584^3.9
"RTN","ICD1882H",79,0)
 ;;419^7^SURG^LAPAROSCOPIC CHOLECYSTECTOMY W/O C.D.E. W/O CC/MCC^1.2540^2.5
"RTN","ICD1882H",80,0)
 ;;420^7^SURG^HEPATOBILIARY DIAGNOSTIC PROCEDURES W MCC^3.6609^8.1
"RTN","ICD1882H",81,0)
 ;;421^7^SURG^HEPATOBILIARY DIAGNOSTIC PROCEDURES W CC^1.7451^4.1
"RTN","ICD1882H",82,0)
 ;;422^7^SURG^HEPATOBILIARY DIAGNOSTIC PROCEDURES W/O CC/MCC^1.2941^2.8
"RTN","ICD1882H",83,0)
 ;;423^7^SURG^OTHER HEPATOBILIARY OR PANCREAS O.R. PROCEDURES W MCC^4.2650^9.8
"RTN","ICD1882H",84,0)
 ;;424^7^SURG^OTHER HEPATOBILIARY OR PANCREAS O.R. PROCEDURES W CC^2.3049^6.0
"RTN","ICD1882H",85,0)
 ;;425^7^SURG^OTHER HEPATOBILIARY OR PANCREAS O.R. PROCEDURES W/O CC/MCC^1.6000^3.6
"RTN","ICD1882H",86,0)
 ;;432^7^MED^CIRRHOSIS & ALCOHOLIC HEPATITIS W MCC^1.6567^4.7
"RTN","ICD1882H",87,0)
 ;;433^7^MED^CIRRHOSIS & ALCOHOLIC HEPATITIS W CC^.9164^3.2
"RTN","ICD1882H",88,0)
 ;;434^7^MED^CIRRHOSIS & ALCOHOLIC HEPATITIS W/O CC/MCC^.6235^2.3
"RTN","ICD1882H",89,0)
 ;;435^7^MED^MALIGNANCY OF HEPATOBILIARY SYSTEM OR PANCREAS W MCC^1.7476^5.1
"RTN","ICD1882H",90,0)
 ;;436^7^MED^MALIGNANCY OF HEPATOBILIARY SYSTEM OR PANCREAS W CC^1.1686^3.8
"RTN","ICD1882H",91,0)
 ;;437^7^MED^MALIGNANCY OF HEPATOBILIARY SYSTEM OR PANCREAS W/O CC/MCC^.9051^2.7
"RTN","ICD1882H",92,0)
 ;;438^7^MED^DISORDERS OF PANCREAS EXCEPT MALIGNANCY W MCC^1.6612^4.9
"RTN","ICD1882H",93,0)
 ;;439^7^MED^DISORDERS OF PANCREAS EXCEPT MALIGNANCY W CC^.8823^3.5
"RTN","ICD1882H",94,0)
 ;;440^7^MED^DISORDERS OF PANCREAS EXCEPT MALIGNANCY W/O CC/MCC^.6368^2.6
"RTN","ICD1882H",95,0)
 ;;441^7^MED^DISORDERS OF LIVER EXCEPT MALIG,CIRR,ALC HEPA W MCC^1.8767^5.0
"RTN","ICD1882H",96,0)
 ;;442^7^MED^DISORDERS OF LIVER EXCEPT MALIG,CIRR,ALC HEPA W CC^.9371^3.4
"RTN","ICD1882H",97,0)
 ;;443^7^MED^DISORDERS OF LIVER EXCEPT MALIG,CIRR,ALC HEPA W/O CC/MCC^.6545^2.5
"RTN","ICD1882H",98,0)
 ;;444^7^MED^DISORDERS OF THE BILIARY TRACT W MCC^1.5895^4.5
"RTN","ICD1882H",99,0)
 ;;445^7^MED^DISORDERS OF THE BILIARY TRACT W CC^1.0553^3.3
"RTN","ICD1882H",100,0)
 ;;446^7^MED^DISORDERS OF THE BILIARY TRACT W/O CC/MCC^.7633^2.4
"RTN","ICD1882H",101,0)
 ;;453^8^SURG^COMBINED ANTERIOR/POSTERIOR SPINAL FUSION W MCC^11.4304^9.2
"RTN","ICD1882H",102,0)
 ;;454^8^SURG^COMBINED ANTERIOR/POSTERIOR SPINAL FUSION W CC^8.0698^4.9
"RTN","ICD1882H",103,0)
 ;;455^8^SURG^COMBINED ANTERIOR/POSTERIOR SPINAL FUSION W/O CC/MCC^6.1934^3.0
"RTN","ICD1882H",104,0)
 ;;456^8^SURG^SPINAL FUS EXC CERV W SPINAL CURV/MALIG/INFEC OR EXT FUS W MCC^9.4061^9.8
"RTN","ICD1882H",105,0)
 ;;457^8^SURG^SPINAL FUS EXC CERV W SPINAL CURV/MALIG/INFEC OR EXT FUS W CC^7.0741^5.5
"RTN","ICD1882H",106,0)
 ;;458^8^SURG^SPINAL FUS EXC CERV W SPINAL CURV/MALIG/INFEC OR EXT FUS W/O CC/MCC^5.2986^3.3
"RTN","ICD1882H",107,0)
 ;;459^8^SURG^SPINAL FUSION EXCEPT CERVICAL W MCC^6.5455^6.7
"RTN","ICD1882H",108,0)
 ;;460^8^SURG^SPINAL FUSION EXCEPT CERVICAL W/O MCC^3.9717^2.9
"RTN","ICD1882H",109,0)
 ;;461^8^SURG^BILATERAL OR MULTIPLE MAJOR JOINT PROCS OF LOWER EXTREMITY W MCC^5.0977^6.3
"RTN","ICD1882H",110,0)
 ;;462^8^SURG^BILATERAL OR MULTIPLE MAJOR JOINT PROCS OF LOWER EXTREMITY W/O MCC^3.2145^3.2
"RTN","ICD1882H",111,0)
 ;;463^8^SURG^WND DEBRID & SKN GRFT EXC HAND, FOR MUSCULO-CONN TISS DIS W MCC^5.1028^10.2
"RTN","ICD1882H",112,0)
 ;;464^8^SURG^WND DEBRID & SKN GRFT EXC HAND, FOR MUSCULO-CONN TISS DIS W CC^3.0937^6.2
"RTN","ICD1882H",113,0)
 ;;465^8^SURG^WND DEBRID & SKN GRFT EXC HAND, FOR MUSCULO-CONN TISS DIS W/O CC/MCC^1.9349^3.8
"RTN","ICD1882H",114,0)
 ;;466^8^SURG^REVISION OF HIP OR KNEE REPLACEMENT W MCC^5.0394^6.6
"RTN","ICD1882H",115,0)
 ;;467^8^SURG^REVISION OF HIP OR KNEE REPLACEMENT W CC^3.4376^3.7
"RTN","ICD1882H",116,0)
 ;;468^8^SURG^REVISION OF HIP OR KNEE REPLACEMENT W/O CC/MCC^2.7513^2.7
"RTN","ICD1882H",117,0)
 ;;469^8^SURG^MAJOR JOINT REPLACEMENT OR REATTACHMENT OF LOWER EXTREMITY W MCC^3.2962^5.9
"RTN","ICD1882H",118,0)
 ;;470^8^SURG^MAJOR JOINT REPLACEMENT OR REATTACHMENT OF LOWER EXTREMITY W/O MCC^2.0816^2.8
"RTN","ICD1882H",119,0)
 ;;471^8^SURG^CERVICAL SPINAL FUSION W MCC^4.9033^6.2
"RTN","ICD1882H",120,0)
 ;;472^8^SURG^CERVICAL SPINAL FUSION W CC^2.9051^2.4
"RTN","ICD1882H",121,0)
 ;;473^8^SURG^CERVICAL SPINAL FUSION W/O CC/MCC^2.2650^1.5
"RTN","ICD1882H",122,0)
 ;;474^8^SURG^AMPUTATION FOR MUSCULOSKELETAL SYS & CONN TISSUE DIS W MCC^3.6260^8.7
"RTN","ICD1882H",123,0)
 ;;475^8^SURG^AMPUTATION FOR MUSCULOSKELETAL SYS & CONN TISSUE DIS W CC^2.1001^5.7
"RTN","ICD1882H",124,0)
 ;;476^8^SURG^AMPUTATION FOR MUSCULOSKELETAL SYS & CONN TISSUE DIS W/O CC/MCC^1.1427^3.1
"RTN","ICD1882H",125,0)
 ;;477^8^SURG^BIOPSIES OF MUSCULOSKELETAL SYSTEM & CONNECTIVE TISSUE W MCC^3.1211^8.3
"RTN","ICD1882H",126,0)
 ;;478^8^SURG^BIOPSIES OF MUSCULOSKELETAL SYSTEM & CONNECTIVE TISSUE W CC^2.1992^5.4
"RTN","ICD1882H",127,0)
 ;;479^8^SURG^BIOPSIES OF MUSCULOSKELETAL SYSTEM & CONNECTIVE TISSUE W/O CC/MCC^1.7158^3.5
"RTN","ICD1882H",128,0)
 ;;480^8^SURG^HIP & FEMUR PROCEDURES EXCEPT MAJOR JOINT W MCC^2.9990^6.7
"RTN","ICD1882H",129,0)
 ;;EXIT
"RTN","ICD1882I")
0^19^B57502638^n/a
"RTN","ICD1882I",1,0)
ICD1882I ;ALB/JDG - YEARLY DRG UPDATE;8/1/2015
"RTN","ICD1882I",2,0)
 ;;18.0;DRG Grouper;**82**;Oct 20, 2000;Build 21
"RTN","ICD1882I",3,0)
 ;
"RTN","ICD1882I",4,0)
 ; Updates for DRGS 481-639
"RTN","ICD1882I",5,0)
 Q
"RTN","ICD1882I",6,0)
 ;
"RTN","ICD1882I",7,0)
MSDRG ;;MS-DRG^MDC^TYPE^MS-DRG TITLE^WEIGHTS^GEOMETRIC MEAN LOS
"RTN","ICD1882I",8,0)
 ;;481^8^SURG^HIP & FEMUR PROCEDURES EXCEPT MAJOR JOINT W CC^1.9790^4.6
"RTN","ICD1882I",9,0)
 ;;482^8^SURG^HIP & FEMUR PROCEDURES EXCEPT MAJOR JOINT W/O CC/MCC^1.6228^3.7
"RTN","ICD1882I",10,0)
 ;;483^8^SURG^MAJOR JOINT/LIMB REATTACHMENT PROCEDURE OF UPPER EXTREMITIES^2.4127^1.9
"RTN","ICD1882I",11,0)
 ;;485^8^SURG^KNEE PROCEDURES W PDX OF INFECTION W MCC^3.2132^8.1
"RTN","ICD1882I",12,0)
 ;;486^8^SURG^KNEE PROCEDURES W PDX OF INFECTION W CC^2.0690^5.4
"RTN","ICD1882I",13,0)
 ;;487^8^SURG^KNEE PROCEDURES W PDX OF INFECTION W/O CC/MCC^1.5484^3.9
"RTN","ICD1882I",14,0)
 ;;488^8^SURG^KNEE PROCEDURES W/O PDX OF INFECTION W CC/MCC^1.7591^3.4
"RTN","ICD1882I",15,0)
 ;;489^8^SURG^KNEE PROCEDURES W/O PDX OF INFECTION W/O CC/MCC^1.2991^2.3
"RTN","ICD1882I",16,0)
 ;;492^8^SURG^LOWER EXTREM & HUMER PROC EXCEPT HIP,FOOT,FEMUR W MCC^3.1585^6.2
"RTN","ICD1882I",17,0)
 ;;493^8^SURG^LOWER EXTREM & HUMER PROC EXCEPT HIP,FOOT,FEMUR W CC^2.0557^3.9
"RTN","ICD1882I",18,0)
 ;;494^8^SURG^LOWER EXTREM & HUMER PROC EXCEPT HIP,FOOT,FEMUR W/O CC/MCC^1.5796^2.7
"RTN","ICD1882I",19,0)
 ;;495^8^SURG^LOCAL EXCISION & REMOVAL INT FIX DEVICES EXC HIP & FEMUR W MCC^3.0151^7.3
"RTN","ICD1882I",20,0)
 ;;496^8^SURG^LOCAL EXCISION & REMOVAL INT FIX DEVICES EXC HIP & FEMUR W CC^1.7451^4.0
"RTN","ICD1882I",21,0)
 ;;497^8^SURG^LOCAL EXCISION & REMOVAL INT FIX DEVICES EXC HIP & FEMUR W/O CC/MCC^1.2436^2.1
"RTN","ICD1882I",22,0)
 ;;498^8^SURG^LOCAL EXCISION & REMOVAL INT FIX DEVICES OF HIP & FEMUR W CC/MCC^2.2492^5.4
"RTN","ICD1882I",23,0)
 ;;499^8^SURG^LOCAL EXCISION & REMOVAL INT FIX DEVICES OF HIP & FEMUR W/O CC/MCC^1.0512^2.2
"RTN","ICD1882I",24,0)
 ;;500^8^SURG^SOFT TISSUE PROCEDURES W MCC^3.2024^7.4
"RTN","ICD1882I",25,0)
 ;;501^8^SURG^SOFT TISSUE PROCEDURES W CC^1.6064^4.3
"RTN","ICD1882I",26,0)
 ;;502^8^SURG^SOFT TISSUE PROCEDURES W/O CC/MCC^1.1752^2.4
"RTN","ICD1882I",27,0)
 ;;503^8^SURG^FOOT PROCEDURES W MCC^2.2679^6.7
"RTN","ICD1882I",28,0)
 ;;504^8^SURG^FOOT PROCEDURES W CC^1.5941^5.0
"RTN","ICD1882I",29,0)
 ;;505^8^SURG^FOOT PROCEDURES W/O CC/MCC^1.2590^2.9
"RTN","ICD1882I",30,0)
 ;;506^8^SURG^MAJOR THUMB OR JOINT PROCEDURES^1.3490^3.4
"RTN","ICD1882I",31,0)
 ;;507^8^SURG^MAJOR SHOULDER OR ELBOW JOINT PROCEDURES W CC/MCC^1.8698^4.3
"RTN","ICD1882I",32,0)
 ;;508^8^SURG^MAJOR SHOULDER OR ELBOW JOINT PROCEDURES W/O CC/MCC^1.6134^2.2
"RTN","ICD1882I",33,0)
 ;;509^8^SURG^ARTHROSCOPY^1.6562^3.4
"RTN","ICD1882I",34,0)
 ;;510^8^SURG^SHOULDER,ELBOW OR FOREARM PROC,EXC MAJOR JOINT PROC W MCC^2.4420^4.8
"RTN","ICD1882I",35,0)
 ;;511^8^SURG^SHOULDER,ELBOW OR FOREARM PROC,EXC MAJOR JOINT PROC W CC^1.7018^3.3
"RTN","ICD1882I",36,0)
 ;;512^8^SURG^SHOULDER,ELBOW OR FOREARM PROC,EXC MAJOR JOINT PROC W/O CC/MCC^1.3531^2.1
"RTN","ICD1882I",37,0)
 ;;513^8^SURG^HAND OR WRIST PROC, EXCEPT MAJOR THUMB OR JOINT PROC W CC/MCC^1.5025^3.8
"RTN","ICD1882I",38,0)
 ;;514^8^SURG^HAND OR WRIST PROC, EXCEPT MAJOR THUMB OR JOINT PROC W/O CC/MCC^.9055^2.3
"RTN","ICD1882I",39,0)
 ;;515^8^SURG^OTHER MUSCULOSKELET SYS & CONN TISS O.R. PROC W MCC^3.1862^7.0
"RTN","ICD1882I",40,0)
 ;;516^8^SURG^OTHER MUSCULOSKELET SYS & CONN TISS O.R. PROC W CC^2.0670^4.3
"RTN","ICD1882I",41,0)
 ;;517^8^SURG^OTHER MUSCULOSKELET SYS & CONN TISS O.R. PROC W/O CC/MCC^1.7716^2.6
"RTN","ICD1882I",42,0)
 ;;518^8^SURG^BACK & NECK PROC EXC SPINAL FUSION W MCC OR DISC DEVICE/NEUROSTIM^2.9249^3.8
"RTN","ICD1882I",43,0)
 ;;519^8^SURG^BACK & NECK PROC EXC SPINAL FUSION W CC^1.6805^3.1
"RTN","ICD1882I",44,0)
 ;;520^8^SURG^BACK & NECK PROC EXC SPINAL FUSION W/O CC/MCC^1.1812^1.9
"RTN","ICD1882I",45,0)
 ;;533^8^MED^FRACTURES OF FEMUR W MCC^1.4430^4.5
"RTN","ICD1882I",46,0)
 ;;534^8^MED^FRACTURES OF FEMUR W/O MCC^.7353^2.9
"RTN","ICD1882I",47,0)
 ;;535^8^MED^FRACTURES OF HIP & PELVIS W MCC^1.2235^4.0
"RTN","ICD1882I",48,0)
 ;;536^8^MED^FRACTURES OF HIP & PELVIS W/O MCC^.7241^3.0
"RTN","ICD1882I",49,0)
 ;;537^8^MED^SPRAINS, STRAINS, & DISLOCATIONS OF HIP, PELVIS & THIGH W CC/MCC^.9046^3.3
"RTN","ICD1882I",50,0)
 ;;538^8^MED^SPRAINS, STRAINS, & DISLOCATIONS OF HIP, PELVIS & THIGH W/O CC/MCC^.6282^2.5
"RTN","ICD1882I",51,0)
 ;;539^8^MED^OSTEOMYELITIS W MCC^1.8365^6.0
"RTN","ICD1882I",52,0)
 ;;540^8^MED^OSTEOMYELITIS W CC^1.2832^4.7
"RTN","ICD1882I",53,0)
 ;;541^8^MED^OSTEOMYELITIS W/O CC/MCC^.9098^3.4
"RTN","ICD1882I",54,0)
 ;;542^8^MED^PATHOLOGICAL FRACTURES & MUSCULOSKELET & CONN TISS MALIG W MCC^1.9100^5.7
"RTN","ICD1882I",55,0)
 ;;543^8^MED^PATHOLOGICAL FRACTURES & MUSCULOSKELET & CONN TISS MALIG W CC^1.1171^4.0
"RTN","ICD1882I",56,0)
 ;;544^8^MED^PATHOLOGICAL FRACTURES & MUSCULOSKELET & CONN TISS MALIG W/O CC/MCC^.7805^3.1
"RTN","ICD1882I",57,0)
 ;;545^8^MED^CONNECTIVE TISSUE DISORDERS W MCC^2.4409^5.9
"RTN","ICD1882I",58,0)
 ;;546^8^MED^CONNECTIVE TISSUE DISORDERS W CC^1.1645^3.8
"RTN","ICD1882I",59,0)
 ;;547^8^MED^CONNECTIVE TISSUE DISORDERS W/O CC/MCC^.7882^2.7
"RTN","ICD1882I",60,0)
 ;;548^8^MED^SEPTIC ARTHRITIS W MCC^1.8733^6.0
"RTN","ICD1882I",61,0)
 ;;549^8^MED^SEPTIC ARTHRITIS W CC^1.1824^4.2
"RTN","ICD1882I",62,0)
 ;;550^8^MED^SEPTIC ARTHRITIS W/O CC/MCC^.8129^2.9
"RTN","ICD1882I",63,0)
 ;;551^8^MED^MEDICAL BACK PROBLEMS W MCC^1.5573^4.6
"RTN","ICD1882I",64,0)
 ;;552^8^MED^MEDICAL BACK PROBLEMS W/O MCC^.8648^3.1
"RTN","ICD1882I",65,0)
 ;;553^8^MED^BONE DISEASES & ARTHROPATHIES W MCC^1.2287^4.1
"RTN","ICD1882I",66,0)
 ;;554^8^MED^BONE DISEASES & ARTHROPATHIES W/O MCC^.7337^2.8
"RTN","ICD1882I",67,0)
 ;;555^8^MED^SIGNS & SYMPTOMS OF MUSCULOSKELETAL SYSTEM & CONN TISSUE W MCC^1.2656^3.7
"RTN","ICD1882I",68,0)
 ;;556^8^MED^SIGNS & SYMPTOMS OF MUSCULOSKELETAL SYSTEM & CONN TISSUE W/O MCC^.7440^2.6
"RTN","ICD1882I",69,0)
 ;;557^8^MED^TENDONITIS, MYOSITIS & BURSITIS W MCC^1.4295^4.8
"RTN","ICD1882I",70,0)
 ;;558^8^MED^TENDONITIS, MYOSITIS & BURSITIS W/O MCC^.8457^3.3
"RTN","ICD1882I",71,0)
 ;;559^8^MED^AFTERCARE, MUSCULOSKELETAL SYSTEM & CONNECTIVE TISSUE W MCC^1.9202^5.0
"RTN","ICD1882I",72,0)
 ;;560^8^MED^AFTERCARE, MUSCULOSKELETAL SYSTEM & CONNECTIVE TISSUE W CC^1.0814^3.5
"RTN","ICD1882I",73,0)
 ;;561^8^MED^AFTERCARE, MUSCULOSKELETAL SYSTEM & CONNECTIVE TISSUE W/O CC/MCC^.6842^2.1
"RTN","ICD1882I",74,0)
 ;;562^8^MED^FX, SPRN, STRN & DISL EXCEPT FEMUR, HIP, PELVIS & THIGH W MCC^1.3662^4.2
"RTN","ICD1882I",75,0)
 ;;563^8^MED^FX, SPRN, STRN & DISL EXCEPT FEMUR, HIP, PELVIS & THIGH W/O MCC^.7870^3.0
"RTN","ICD1882I",76,0)
 ;;564^8^MED^OTHER MUSCULOSKELETAL SYS & CONNECTIVE TISSUE DIAGNOSES W MCC^1.5225^4.7
"RTN","ICD1882I",77,0)
 ;;565^8^MED^OTHER MUSCULOSKELETAL SYS & CONNECTIVE TISSUE DIAGNOSES W CC^.9598^3.5
"RTN","ICD1882I",78,0)
 ;;566^8^MED^OTHER MUSCULOSKELETAL SYS & CONNECTIVE TISSUE DIAGNOSES W/O CC/MCC^.7159^2.5
"RTN","ICD1882I",79,0)
 ;;570^9^SURG^SKIN DEBRIDEMENT W MCC^2.4504^7.0
"RTN","ICD1882I",80,0)
 ;;571^9^SURG^SKIN DEBRIDEMENT W CC^1.4569^5.2
"RTN","ICD1882I",81,0)
 ;;572^9^SURG^SKIN DEBRIDEMENT W/O CC/MCC^1.0391^3.7
"RTN","ICD1882I",82,0)
 ;;573^9^SURG^SKIN GRAFT FOR SKIN ULCER OR CELLULITIS W MCC^3.9130^8.6
"RTN","ICD1882I",83,0)
 ;;574^9^SURG^SKIN GRAFT FOR SKIN ULCER OR CELLULITIS W CC^2.8430^7.4
"RTN","ICD1882I",84,0)
 ;;575^9^SURG^SKIN GRAFT FOR SKIN ULCER OR CELLULITIS W/O CC/MCC^1.6141^4.4
"RTN","ICD1882I",85,0)
 ;;576^9^SURG^SKIN GRAFT EXC FOR SKIN ULCER OR CELLULITIS W MCC^5.3493^8.9
"RTN","ICD1882I",86,0)
 ;;577^9^SURG^SKIN GRAFT EXC FOR SKIN ULCER OR CELLULITIS W CC^2.2579^4.4
"RTN","ICD1882I",87,0)
 ;;578^9^SURG^SKIN GRAFT EXC FOR SKIN ULCER OR CELLULITIS W/O CC/MCC^1.3812^2.6
"RTN","ICD1882I",88,0)
 ;;579^9^SURG^OTHER SKIN, SUBCUT TISS & BREAST PROC W MCC^2.6848^7.0
"RTN","ICD1882I",89,0)
 ;;580^9^SURG^OTHER SKIN, SUBCUT TISS & BREAST PROC W CC^1.6155^4.0
"RTN","ICD1882I",90,0)
 ;;581^9^SURG^OTHER SKIN, SUBCUT TISS & BREAST PROC W/O CC/MCC^1.1834^2.2
"RTN","ICD1882I",91,0)
 ;;582^9^SURG^MASTECTOMY FOR MALIGNANCY W CC/MCC^1.3370^2.2
"RTN","ICD1882I",92,0)
 ;;583^9^SURG^MASTECTOMY FOR MALIGNANCY W/O CC/MCC^1.1856^1.6
"RTN","ICD1882I",93,0)
 ;;584^9^SURG^BREAST BIOPSY, LOCAL EXCISION & OTHER BREAST PROCEDURES W CC/MCC^1.6794^3.7
"RTN","ICD1882I",94,0)
 ;;585^9^SURG^BREAST BIOPSY, LOCAL EXCISION & OTHER BREAST PROCEDURES W/O CC/MCC^1.5184^2.1
"RTN","ICD1882I",95,0)
 ;;592^9^MED^SKIN ULCERS W MCC^1.4255^5.0
"RTN","ICD1882I",96,0)
 ;;593^9^MED^SKIN ULCERS W CC^1.0198^4.2
"RTN","ICD1882I",97,0)
 ;;594^9^MED^SKIN ULCERS W/O CC/MCC^.7049^3.1
"RTN","ICD1882I",98,0)
 ;;595^9^MED^MAJOR SKIN DISORDERS W MCC^1.8480^5.4
"RTN","ICD1882I",99,0)
 ;;596^9^MED^MAJOR SKIN DISORDERS W/O MCC^.9375^3.6
"RTN","ICD1882I",100,0)
 ;;597^9^MED^MALIGNANT BREAST DISORDERS W MCC^1.7397^5.3
"RTN","ICD1882I",101,0)
 ;;598^9^MED^MALIGNANT BREAST DISORDERS W CC^1.0617^3.7
"RTN","ICD1882I",102,0)
 ;;599^9^MED^MALIGNANT BREAST DISORDERS W/O CC/MCC^.7211^2.3
"RTN","ICD1882I",103,0)
 ;;600^9^MED^NON-MALIGNANT BREAST DISORDERS W CC/MCC^.9843^3.7
"RTN","ICD1882I",104,0)
 ;;601^9^MED^NON-MALIGNANT BREAST DISORDERS W/O CC/MCC^.6799^2.8
"RTN","ICD1882I",105,0)
 ;;602^9^MED^CELLULITIS W MCC^1.4371^4.9
"RTN","ICD1882I",106,0)
 ;;603^9^MED^CELLULITIS W/O MCC^.8429^3.5
"RTN","ICD1882I",107,0)
 ;;604^9^MED^TRAUMA TO THE SKIN, SUBCUT TISS & BREAST W MCC^1.3527^3.9
"RTN","ICD1882I",108,0)
 ;;605^9^MED^TRAUMA TO THE SKIN, SUBCUT TISS & BREAST W/O MCC^.8019^2.6
"RTN","ICD1882I",109,0)
 ;;606^9^MED^MINOR SKIN DISORDERS W MCC^1.3708^4.3
"RTN","ICD1882I",110,0)
 ;;607^9^MED^MINOR SKIN DISORDERS W/O MCC^.7258^2.8
"RTN","ICD1882I",111,0)
 ;;614^10^SURG^ADRENAL & PITUITARY PROCEDURES W CC/MCC^2.3916^3.9
"RTN","ICD1882I",112,0)
 ;;615^10^SURG^ADRENAL & PITUITARY PROCEDURES W/O CC/MCC^1.4254^2.1
"RTN","ICD1882I",113,0)
 ;;616^10^SURG^AMPUTAT OF LOWER LIMB FOR ENDOCRINE,NUTRIT,& METABOL DIS W MCC^4.0054^10.3
"RTN","ICD1882I",114,0)
 ;;617^10^SURG^AMPUTAT OF LOWER LIMB FOR ENDOCRINE,NUTRIT,& METABOL DIS W CC^2.0064^6.0
"RTN","ICD1882I",115,0)
 ;;618^10^SURG^AMPUTAT OF LOWER LIMB FOR ENDOCRINE,NUTRIT,& METABOL DIS W/O CC/MCC^1.1804^4.3
"RTN","ICD1882I",116,0)
 ;;619^10^SURG^O.R. PROCEDURES FOR OBESITY W MCC^2.9418^3.8
"RTN","ICD1882I",117,0)
 ;;620^10^SURG^O.R. PROCEDURES FOR OBESITY W CC^1.8407^2.5
"RTN","ICD1882I",118,0)
 ;;621^10^SURG^O.R. PROCEDURES FOR OBESITY W/O CC/MCC^1.5484^1.8
"RTN","ICD1882I",119,0)
 ;;622^10^SURG^SKIN GRAFTS & WOUND DEBRID FOR ENDOC, NUTRIT & METAB DIS W MCC^3.5239^8.6
"RTN","ICD1882I",120,0)
 ;;623^10^SURG^SKIN GRAFTS & WOUND DEBRID FOR ENDOC, NUTRIT & METAB DIS W CC^1.8623^5.6
"RTN","ICD1882I",121,0)
 ;;624^10^SURG^SKIN GRAFTS & WOUND DEBRID FOR ENDOC, NUTRIT & METAB DIS W/O CC/MCC^1.1292^3.7
"RTN","ICD1882I",122,0)
 ;;625^10^SURG^THYROID, PARATHYROID & THYROGLOSSAL PROCEDURES W MCC^2.6133^4.9
"RTN","ICD1882I",123,0)
 ;;626^10^SURG^THYROID, PARATHYROID & THYROGLOSSAL PROCEDURES W CC^1.3936^2.2
"RTN","ICD1882I",124,0)
 ;;627^10^SURG^THYROID, PARATHYROID & THYROGLOSSAL PROCEDURES W/O CC/MCC^.9108^1.3
"RTN","ICD1882I",125,0)
 ;;628^10^SURG^OTHER ENDOCRINE, NUTRIT & METAB O.R. PROC W MCC^3.4413^7.0
"RTN","ICD1882I",126,0)
 ;;629^10^SURG^OTHER ENDOCRINE, NUTRIT & METAB O.R. PROC W CC^2.1952^6.1
"RTN","ICD1882I",127,0)
 ;;630^10^SURG^OTHER ENDOCRINE, NUTRIT & METAB O.R. PROC W/O CC/MCC^1.3601^3.0
"RTN","ICD1882I",128,0)
 ;;637^10^MED^DIABETES W MCC^1.3823^4.1
"RTN","ICD1882I",129,0)
 ;;638^10^MED^DIABETES W CC^.8463^3.0
"RTN","ICD1882I",130,0)
 ;;639^10^MED^DIABETES W/O CC/MCC^.6007^2.2
"RTN","ICD1882I",131,0)
 ;;EXIT
"RTN","ICD1882J")
0^20^B59944026^n/a
"RTN","ICD1882J",1,0)
ICD1882J ;ALB/JDG - YEARLY DRG UPDATE;8/1/2015
"RTN","ICD1882J",2,0)
 ;;18.0;DRG Grouper;**82**;Oct 20, 2000;Build 21
"RTN","ICD1882J",3,0)
 ;
"RTN","ICD1882J",4,0)
 ; Updates for DRGS 640-809
"RTN","ICD1882J",5,0)
 Q
"RTN","ICD1882J",6,0)
 ;
"RTN","ICD1882J",7,0)
MSDRG ;;MS-DRG^MDC^TYPE^MS-DRG TITLE^WEIGHTS^GEOMETRIC MEAN LOS
"RTN","ICD1882J",8,0)
 ;;640^10^MED^MISC DISORDERS OF NUTRITION,METABOLISM,FLUIDS/ELECTROLYTES W MCC^1.1318^3.3
"RTN","ICD1882J",9,0)
 ;;641^10^MED^MISC DISORDERS OF NUTRITION,METABOLISM,FLUIDS/ELECTROLYTES W/O MCC^.7221^2.7
"RTN","ICD1882J",10,0)
 ;;642^10^MED^INBORN AND OTHER DISORDERS OF METABOLISM^1.2246^3.4
"RTN","ICD1882J",11,0)
 ;;643^10^MED^ENDOCRINE DISORDERS W MCC^1.6249^5.3
"RTN","ICD1882J",12,0)
 ;;644^10^MED^ENDOCRINE DISORDERS W CC^1.0123^3.7
"RTN","ICD1882J",13,0)
 ;;645^10^MED^ENDOCRINE DISORDERS W/O CC/MCC^.7255^2.8
"RTN","ICD1882J",14,0)
 ;;652^11^SURG^KIDNEY TRANSPLANT^3.1540^5.5
"RTN","ICD1882J",15,0)
 ;;653^11^SURG^MAJOR BLADDER PROCEDURES W MCC^6.0456^11.9
"RTN","ICD1882J",16,0)
 ;;654^11^SURG^MAJOR BLADDER PROCEDURES W CC^3.0267^7.2
"RTN","ICD1882J",17,0)
 ;;655^11^SURG^MAJOR BLADDER PROCEDURES W/O CC/MCC^2.2796^4.8
"RTN","ICD1882J",18,0)
 ;;656^11^SURG^KIDNEY & URETER PROCEDURES FOR NEOPLASM W MCC^3.4617^6.8
"RTN","ICD1882J",19,0)
 ;;657^11^SURG^KIDNEY & URETER PROCEDURES FOR NEOPLASM W CC^2.0091^4.2
"RTN","ICD1882J",20,0)
 ;;658^11^SURG^KIDNEY & URETER PROCEDURES FOR NEOPLASM W/O CC/MCC^1.5337^2.6
"RTN","ICD1882J",21,0)
 ;;659^11^SURG^KIDNEY & URETER PROCEDURES FOR NON-NEOPLASM W MCC^3.4848^7.5
"RTN","ICD1882J",22,0)
 ;;660^11^SURG^KIDNEY & URETER PROCEDURES FOR NON-NEOPLASM W CC^1.9030^4.1
"RTN","ICD1882J",23,0)
 ;;661^11^SURG^KIDNEY & URETER PROCEDURES FOR NON-NEOPLASM W/O CC/MCC^1.3981^2.3
"RTN","ICD1882J",24,0)
 ;;662^11^SURG^MINOR BLADDER PROCEDURES W MCC^2.8897^7.6
"RTN","ICD1882J",25,0)
 ;;663^11^SURG^MINOR BLADDER PROCEDURES W CC^1.6652^4.1
"RTN","ICD1882J",26,0)
 ;;664^11^SURG^MINOR BLADDER PROCEDURES W/O CC/MCC^1.2987^2.0
"RTN","ICD1882J",27,0)
 ;;665^11^SURG^PROSTATECTOMY W MCC^3.1132^8.9
"RTN","ICD1882J",28,0)
 ;;666^11^SURG^PROSTATECTOMY W CC^1.7878^4.6
"RTN","ICD1882J",29,0)
 ;;667^11^SURG^PROSTATECTOMY W/O CC/MCC^.9964^2.3
"RTN","ICD1882J",30,0)
 ;;668^11^SURG^TRANSURETHRAL PROCEDURES W MCC^2.4521^6.3
"RTN","ICD1882J",31,0)
 ;;669^11^SURG^TRANSURETHRAL PROCEDURES W CC^1.3111^3.1
"RTN","ICD1882J",32,0)
 ;;670^11^SURG^TRANSURETHRAL PROCEDURES W/O CC/MCC^.9207^2.1
"RTN","ICD1882J",33,0)
 ;;671^11^SURG^URETHRAL PROCEDURES W CC/MCC^1.5705^4.1
"RTN","ICD1882J",34,0)
 ;;672^11^SURG^URETHRAL PROCEDURES W/O CC/MCC^.8742^1.9
"RTN","ICD1882J",35,0)
 ;;673^11^SURG^OTHER KIDNEY & URINARY TRACT PROCEDURES W MCC^3.3559^7.3
"RTN","ICD1882J",36,0)
 ;;674^11^SURG^OTHER KIDNEY & URINARY TRACT PROCEDURES W CC^2.3148^5.4
"RTN","ICD1882J",37,0)
 ;;675^11^SURG^OTHER KIDNEY & URINARY TRACT PROCEDURES W/O CC/MCC^1.5595^2.4
"RTN","ICD1882J",38,0)
 ;;682^11^MED^RENAL FAILURE W MCC^1.5085^4.6
"RTN","ICD1882J",39,0)
 ;;683^11^MED^RENAL FAILURE W CC^.9406^3.5
"RTN","ICD1882J",40,0)
 ;;684^11^MED^RENAL FAILURE W/O CC/MCC^.6272^2.5
"RTN","ICD1882J",41,0)
 ;;685^11^MED^ADMIT FOR RENAL DIALYSIS^1.0369^2.9
"RTN","ICD1882J",42,0)
 ;;686^11^MED^KIDNEY & URINARY TRACT NEOPLASMS W MCC^1.6670^5.3
"RTN","ICD1882J",43,0)
 ;;687^11^MED^KIDNEY & URINARY TRACT NEOPLASMS W CC^1.0161^3.5
"RTN","ICD1882J",44,0)
 ;;688^11^MED^KIDNEY & URINARY TRACT NEOPLASMS W/O CC/MCC^.6607^2.2
"RTN","ICD1882J",45,0)
 ;;689^11^MED^KIDNEY & URINARY TRACT INFECTIONS W MCC^1.0821^4.0
"RTN","ICD1882J",46,0)
 ;;690^11^MED^KIDNEY & URINARY TRACT INFECTIONS W/O MCC^.7828^3.1
"RTN","ICD1882J",47,0)
 ;;691^11^MED^URINARY STONES W ESW LITHOTRIPSY W CC/MCC^1.5470^2.8
"RTN","ICD1882J",48,0)
 ;;692^11^MED^URINARY STONES W ESW LITHOTRIPSY W/O CC/MCC^1.2566^1.9
"RTN","ICD1882J",49,0)
 ;;693^11^MED^URINARY STONES W/O ESW LITHOTRIPSY W MCC^1.3323^3.8
"RTN","ICD1882J",50,0)
 ;;694^11^MED^URINARY STONES W/O ESW LITHOTRIPSY W/O MCC^.7294^2.0
"RTN","ICD1882J",51,0)
 ;;695^11^MED^KIDNEY & URINARY TRACT SIGNS & SYMPTOMS W MCC^1.2494^4.1
"RTN","ICD1882J",52,0)
 ;;696^11^MED^KIDNEY & URINARY TRACT SIGNS & SYMPTOMS W/O MCC^.6934^2.6
"RTN","ICD1882J",53,0)
 ;;697^11^MED^URETHRAL STRICTURE^.9417^2.8
"RTN","ICD1882J",54,0)
 ;;698^11^MED^OTHER KIDNEY & URINARY TRACT DIAGNOSES W MCC^1.5524^5.0
"RTN","ICD1882J",55,0)
 ;;699^11^MED^OTHER KIDNEY & URINARY TRACT DIAGNOSES W CC^1.0246^3.5
"RTN","ICD1882J",56,0)
 ;;700^11^MED^OTHER KIDNEY & URINARY TRACT DIAGNOSES W/O CC/MCC^.7163^2.6
"RTN","ICD1882J",57,0)
 ;;707^12^SURG^MAJOR MALE PELVIC PROCEDURES W CC/MCC^1.7753^2.8
"RTN","ICD1882J",58,0)
 ;;708^12^SURG^MAJOR MALE PELVIC PROCEDURES W/O CC/MCC^1.3146^1.4
"RTN","ICD1882J",59,0)
 ;;709^12^SURG^PENIS PROCEDURES W CC/MCC^1.9721^4.0
"RTN","ICD1882J",60,0)
 ;;710^12^SURG^PENIS PROCEDURES W/O CC/MCC^1.4170^1.8
"RTN","ICD1882J",61,0)
 ;;711^12^SURG^TESTES PROCEDURES W CC/MCC^1.9959^5.2
"RTN","ICD1882J",62,0)
 ;;712^12^SURG^TESTES PROCEDURES W/O CC/MCC^.9475^2.3
"RTN","ICD1882J",63,0)
 ;;713^12^SURG^TRANSURETHRAL PROSTATECTOMY W CC/MCC^1.5077^3.4
"RTN","ICD1882J",64,0)
 ;;714^12^SURG^TRANSURETHRAL PROSTATECTOMY W/O CC/MCC^.8072^1.7
"RTN","ICD1882J",65,0)
 ;;715^12^SURG^OTHER MALE REPRODUCTIVE SYSTEM O.R. PROC FOR MALIGNANCY W CC/MCC^1.8793^5.2
"RTN","ICD1882J",66,0)
 ;;716^12^SURG^OTHER MALE REPRODUCTIVE SYSTEM O.R. PROC FOR MALIGNANCY W/O CC/MCC^1.1508^1.6
"RTN","ICD1882J",67,0)
 ;;717^12^SURG^OTHER MALE REPRODUCTIVE SYSTEM O.R. PROC EXC MALIGNANCY W CC/MCC^1.7645^4.7
"RTN","ICD1882J",68,0)
 ;;718^12^SURG^OTHER MALE REPRODUCTIVE SYSTEM O.R. PROC EXC MALIGNANCY W/O CC/MCC^.9069^2.1
"RTN","ICD1882J",69,0)
 ;;722^12^MED^MALIGNANCY, MALE REPRODUCTIVE SYSTEM W MCC^1.7370^5.5
"RTN","ICD1882J",70,0)
 ;;723^12^MED^MALIGNANCY, MALE REPRODUCTIVE SYSTEM W CC^1.0979^3.8
"RTN","ICD1882J",71,0)
 ;;724^12^MED^MALIGNANCY, MALE REPRODUCTIVE SYSTEM W/O CC/MCC^.6545^2.0
"RTN","ICD1882J",72,0)
 ;;725^12^MED^BENIGN PROSTATIC HYPERTROPHY W MCC^1.3198^4.5
"RTN","ICD1882J",73,0)
 ;;726^12^MED^BENIGN PROSTATIC HYPERTROPHY W/O MCC^.7406^2.7
"RTN","ICD1882J",74,0)
 ;;727^12^MED^INFLAMMATION OF THE MALE REPRODUCTIVE SYSTEM W MCC^1.4461^4.9
"RTN","ICD1882J",75,0)
 ;;728^12^MED^INFLAMMATION OF THE MALE REPRODUCTIVE SYSTEM W/O MCC^.7838^3.1
"RTN","ICD1882J",76,0)
 ;;729^12^MED^OTHER MALE REPRODUCTIVE SYSTEM DIAGNOSES W CC/MCC^1.1169^3.5
"RTN","ICD1882J",77,0)
 ;;730^12^MED^OTHER MALE REPRODUCTIVE SYSTEM DIAGNOSES W/O CC/MCC^.6036^2.3
"RTN","ICD1882J",78,0)
 ;;734^13^SURG^PELVIC EVISCERATION, RAD HYSTERECTOMY & RAD VULVECTOMY W CC/MCC^2.5255^4.5
"RTN","ICD1882J",79,0)
 ;;735^13^SURG^PELVIC EVISCERATION, RAD HYSTERECTOMY & RAD VULVECTOMY W/O CC/MCC^1.2207^1.8
"RTN","ICD1882J",80,0)
 ;;736^13^SURG^UTERINE & ADNEXA PROC FOR OVARIAN OR ADNEXAL MALIGNANCY W MCC^4.3286^9.9
"RTN","ICD1882J",81,0)
 ;;737^13^SURG^UTERINE & ADNEXA PROC FOR OVARIAN OR ADNEXAL MALIGNANCY W CC^2.0037^5.1
"RTN","ICD1882J",82,0)
 ;;738^13^SURG^UTERINE & ADNEXA PROC FOR OVARIAN OR ADNEXAL MALIGNANCY W/O CC/MCC^1.3498^3.0
"RTN","ICD1882J",83,0)
 ;;739^13^SURG^UTERINE,ADNEXA PROC FOR NON-OVARIAN/ADNEXAL MALIG W MCC^3.4082^6.6
"RTN","ICD1882J",84,0)
 ;;740^13^SURG^UTERINE,ADNEXA PROC FOR NON-OVARIAN/ADNEXAL MALIG W CC^1.6920^3.3
"RTN","ICD1882J",85,0)
 ;;741^13^SURG^UTERINE,ADNEXA PROC FOR NON-OVARIAN/ADNEXAL MALIG W/O CC/MCC^1.1973^1.8
"RTN","ICD1882J",86,0)
 ;;742^13^SURG^UTERINE & ADNEXA PROC FOR NON-MALIGNANCY W CC/MCC^1.5586^3.0
"RTN","ICD1882J",87,0)
 ;;743^13^SURG^UTERINE & ADNEXA PROC FOR NON-MALIGNANCY W/O CC/MCC^1.0090^1.8
"RTN","ICD1882J",88,0)
 ;;744^13^SURG^D&C, CONIZATION, LAPAROSCOPY & TUBAL INTERRUPTION W CC/MCC^1.6851^4.1
"RTN","ICD1882J",89,0)
 ;;745^13^SURG^D&C, CONIZATION, LAPAROSCOPY & TUBAL INTERRUPTION W/O CC/MCC^.9719^2.0
"RTN","ICD1882J",90,0)
 ;;746^13^SURG^VAGINA, CERVIX & VULVA PROCEDURES W CC/MCC^1.4628^3.3
"RTN","ICD1882J",91,0)
 ;;747^13^SURG^VAGINA, CERVIX & VULVA PROCEDURES W/O CC/MCC^.9099^1.6
"RTN","ICD1882J",92,0)
 ;;748^13^SURG^FEMALE REPRODUCTIVE SYSTEM RECONSTRUCTIVE PROCEDURES^1.1241^1.6
"RTN","ICD1882J",93,0)
 ;;749^13^SURG^OTHER FEMALE REPRODUCTIVE SYSTEM O.R. PROCEDURES W CC/MCC^2.6452^6.1
"RTN","ICD1882J",94,0)
 ;;750^13^SURG^OTHER FEMALE REPRODUCTIVE SYSTEM O.R. PROCEDURES W/O CC/MCC^1.3346^2.4
"RTN","ICD1882J",95,0)
 ;;754^13^MED^MALIGNANCY, FEMALE REPRODUCTIVE SYSTEM W MCC^1.9204^5.8
"RTN","ICD1882J",96,0)
 ;;755^13^MED^MALIGNANCY, FEMALE REPRODUCTIVE SYSTEM W CC^1.1325^3.7
"RTN","ICD1882J",97,0)
 ;;756^13^MED^MALIGNANCY, FEMALE REPRODUCTIVE SYSTEM W/O CC/MCC^.5908^2.2
"RTN","ICD1882J",98,0)
 ;;757^13^MED^INFECTIONS, FEMALE REPRODUCTIVE SYSTEM W MCC^1.3717^5.2
"RTN","ICD1882J",99,0)
 ;;758^13^MED^INFECTIONS, FEMALE REPRODUCTIVE SYSTEM W CC^1.0090^4.1
"RTN","ICD1882J",100,0)
 ;;759^13^MED^INFECTIONS, FEMALE REPRODUCTIVE SYSTEM W/O CC/MCC^.7595^3.2
"RTN","ICD1882J",101,0)
 ;;760^13^MED^MENSTRUAL & OTHER FEMALE REPRODUCTIVE SYSTEM DISORDERS W CC/MCC^.8524^2.8
"RTN","ICD1882J",102,0)
 ;;761^13^MED^MENSTRUAL & OTHER FEMALE REPRODUCTIVE SYSTEM DISORDERS W/O CC/MCC^.5355^1.9
"RTN","ICD1882J",103,0)
 ;;765^14^SURG^CESAREAN SECTION W CC/MCC^1.1442^3.7
"RTN","ICD1882J",104,0)
 ;;766^14^SURG^CESAREAN SECTION W/O CC/MCC^.7807^2.8
"RTN","ICD1882J",105,0)
 ;;767^14^SURG^VAGINAL DELIVERY W STERILIZATION &/OR D&C^1.2965^2.7
"RTN","ICD1882J",106,0)
 ;;768^14^SURG^VAGINAL DELIVERY W O.R. PROC EXCEPT STERIL &/OR D&C^1.2618^3.6
"RTN","ICD1882J",107,0)
 ;;769^14^SURG^POSTPARTUM & POST ABORTION DIAGNOSES W O.R. PROCEDURE^2.1737^4.4
"RTN","ICD1882J",108,0)
 ;;770^14^SURG^ABORTION W D&C, ASPIRATION CURETTAGE OR HYSTEROTOMY^.8272^1.9
"RTN","ICD1882J",109,0)
 ;;774^14^MED^VAGINAL DELIVERY W COMPLICATING DIAGNOSES^.7509^2.6
"RTN","ICD1882J",110,0)
 ;;775^14^MED^VAGINAL DELIVERY W/O COMPLICATING DIAGNOSES^.5865^2.1
"RTN","ICD1882J",111,0)
 ;;776^14^MED^POSTPARTUM & POST ABORTION DIAGNOSES W/O O.R. PROCEDURE^.6766^2.4
"RTN","ICD1882J",112,0)
 ;;777^14^MED^ECTOPIC PREGNANCY^.9386^1.9
"RTN","ICD1882J",113,0)
 ;;778^14^MED^THREATENED ABORTION^.5332^2.0
"RTN","ICD1882J",114,0)
 ;;779^14^MED^ABORTION W/O D&C^.6850^1.7
"RTN","ICD1882J",115,0)
 ;;780^14^MED^FALSE LABOR^.2062^1.1
"RTN","ICD1882J",116,0)
 ;;781^14^MED^OTHER ANTEPARTUM DIAGNOSES W MEDICAL COMPLICATIONS^.8182^2.7
"RTN","ICD1882J",117,0)
 ;;782^14^MED^OTHER ANTEPARTUM DIAGNOSES W/O MEDICAL COMPLICATIONS^.5454^1.7
"RTN","ICD1882J",118,0)
 ;;789^15^MED^NEONATES, DIED OR TRANSFERRED TO ANOTHER ACUTE CARE FACILITY^1.5860^1.8
"RTN","ICD1882J",119,0)
 ;;790^15^MED^EXTREME IMMATURITY OR RESPIRATORY DISTRESS SYNDROME, NEONATE^5.2300^17.9
"RTN","ICD1882J",120,0)
 ;;791^15^MED^PREMATURITY W MAJOR PROBLEMS^3.5719^13.3
"RTN","ICD1882J",121,0)
 ;;792^15^MED^PREMATURITY W/O MAJOR PROBLEMS^2.1552^8.6
"RTN","ICD1882J",122,0)
 ;;793^15^MED^FULL TERM NEONATE W MAJOR PROBLEMS^3.6692^4.7
"RTN","ICD1882J",123,0)
 ;;794^15^MED^NEONATE W OTHER SIGNIFICANT PROBLEMS^1.2987^3.4
"RTN","ICD1882J",124,0)
 ;;795^15^MED^NORMAL NEWBORN^.1758^3.1
"RTN","ICD1882J",125,0)
 ;;799^16^SURG^SPLENECTOMY W MCC^4.7569^9.2
"RTN","ICD1882J",126,0)
 ;;800^16^SURG^SPLENECTOMY W CC^2.7364^5.3
"RTN","ICD1882J",127,0)
 ;;801^16^SURG^SPLENECTOMY W/O CC/MCC^1.7458^2.8
"RTN","ICD1882J",128,0)
 ;;802^16^SURG^OTHER O.R. PROC OF THE BLOOD & BLOOD FORMING ORGANS W MCC^3.3880^8.1
"RTN","ICD1882J",129,0)
 ;;803^16^SURG^OTHER O.R. PROC OF THE BLOOD & BLOOD FORMING ORGANS W CC^1.8719^4.7
"RTN","ICD1882J",130,0)
 ;;804^16^SURG^OTHER O.R. PROC OF THE BLOOD & BLOOD FORMING ORGANS W/O CC/MCC^1.1715^2.3
"RTN","ICD1882J",131,0)
 ;;808^16^MED^MAJOR HEMATOL/IMMUN DIAG EXC SICKLE CELL CRISIS & COAGUL W MCC^2.2346^6.0
"RTN","ICD1882J",132,0)
 ;;809^16^MED^MAJOR HEMATOL/IMMUN DIAG EXC SICKLE CELL CRISIS & COAGUL W CC^1.2235^3.8
"RTN","ICD1882J",133,0)
 ;;EXIT
"RTN","ICD1882K")
0^21^B62951725^n/a
"RTN","ICD1882K",1,0)
ICD1882K ;ALB/JDG - YEARLY DRG UPDATE;8/1/2015
"RTN","ICD1882K",2,0)
 ;;18.0;DRG Grouper;**82**;Oct 20, 2000;Build 21
"RTN","ICD1882K",3,0)
 ;
"RTN","ICD1882K",4,0)
 ; Updates for DRGS 810-999
"RTN","ICD1882K",5,0)
 Q
"RTN","ICD1882K",6,0)
 ;
"RTN","ICD1882K",7,0)
MSDRG ;;MS-DRG^MDC^TYPE^MS-DRG TITLE^WEIGHTS^GEOMETRIC MEAN LOS
"RTN","ICD1882K",8,0)
 ;;810^16^MED^MAJOR HEMATOL/IMMUN DIAG EXC SICKLE CELL CRISIS & COAGUL W/O CC/MCC^.8644^2.7
"RTN","ICD1882K",9,0)
 ;;811^16^MED^RED BLOOD CELL DISORDERS W MCC^1.2992^3.7
"RTN","ICD1882K",10,0)
 ;;812^16^MED^RED BLOOD CELL DISORDERS W/O MCC^.8572^2.8
"RTN","ICD1882K",11,0)
 ;;813^16^MED^COAGULATION DISORDERS^1.7350^3.7
"RTN","ICD1882K",12,0)
 ;;814^16^MED^RETICULOENDOTHELIAL & IMMUNITY DISORDERS W MCC^1.6622^4.7
"RTN","ICD1882K",13,0)
 ;;815^16^MED^RETICULOENDOTHELIAL & IMMUNITY DISORDERS W CC^.9803^3.2
"RTN","ICD1882K",14,0)
 ;;816^16^MED^RETICULOENDOTHELIAL & IMMUNITY DISORDERS W/O CC/MCC^.6962^2.4
"RTN","ICD1882K",15,0)
 ;;820^17^SURG^LYMPHOMA & LEUKEMIA W MAJOR O.R. PROCEDURE W MCC^5.9153^12.1
"RTN","ICD1882K",16,0)
 ;;821^17^SURG^LYMPHOMA & LEUKEMIA W MAJOR O.R. PROCEDURE W CC^2.3113^4.7
"RTN","ICD1882K",17,0)
 ;;822^17^SURG^LYMPHOMA & LEUKEMIA W MAJOR O.R. PROCEDURE W/O CC/MCC^1.2851^2.1
"RTN","ICD1882K",18,0)
 ;;823^17^SURG^LYMPHOMA & NON-ACUTE LEUKEMIA W OTHER O.R. PROC W MCC^4.4536^11.1
"RTN","ICD1882K",19,0)
 ;;824^17^SURG^LYMPHOMA & NON-ACUTE LEUKEMIA W OTHER O.R. PROC W CC^2.3467^6.0
"RTN","ICD1882K",20,0)
 ;;825^17^SURG^LYMPHOMA & NON-ACUTE LEUKEMIA W OTHER O.R. PROC W/O CC/MCC^1.3967^2.9
"RTN","ICD1882K",21,0)
 ;;826^17^SURG^MYELOPROLIF DISORD OR POORLY DIFF NEOPL W MAJ O.R. PROC W MCC^5.1814^10.8
"RTN","ICD1882K",22,0)
 ;;827^17^SURG^MYELOPROLIF DISORD OR POORLY DIFF NEOPL W MAJ O.R. PROC W CC^2.3141^5.0
"RTN","ICD1882K",23,0)
 ;;828^17^SURG^MYELOPROLIF DISORD OR POORLY DIFF NEOPL W MAJ O.R. PROC W/O CC/MCC^1.5139^2.8
"RTN","ICD1882K",24,0)
 ;;829^17^SURG^MYELOPROLIF DISORD OR POORLY DIFF NEOPL W OTHER O.R. PROC W CC/MCC^3.3241^6.8
"RTN","ICD1882K",25,0)
 ;;830^17^SURG^MYELOPROLIF DISORD OR POORLY DIFF NEOPL W OTHER O.R. PROC W/O CC/MCC^1.3670^2.6
"RTN","ICD1882K",26,0)
 ;;834^17^MED^ACUTE LEUKEMIA W/O MAJOR O.R. PROCEDURE W MCC^5.5990^10.4
"RTN","ICD1882K",27,0)
 ;;835^17^MED^ACUTE LEUKEMIA W/O MAJOR O.R. PROCEDURE W CC^2.3024^4.9
"RTN","ICD1882K",28,0)
 ;;836^17^MED^ACUTE LEUKEMIA W/O MAJOR O.R. PROCEDURE W/O CC/MCC^1.1381^2.9
"RTN","ICD1882K",29,0)
 ;;837^17^MED^CHEMO W ACUTE LEUKEMIA AS SDX OR W HIGH DOSE CHEMO AGENT W MCC^6.1348^15.7
"RTN","ICD1882K",30,0)
 ;;838^17^MED^CHEMO W ACUTE LEUKEMIA AS SDX W CC OR HIGH DOSE CHEMO AGENT^2.7707^7.0
"RTN","ICD1882K",31,0)
 ;;839^17^MED^CHEMO W ACUTE LEUKEMIA AS SDX W/O CC/MCC^1.3190^4.9
"RTN","ICD1882K",32,0)
 ;;840^17^MED^LYMPHOMA & NON-ACUTE LEUKEMIA W MCC^3.1449^7.6
"RTN","ICD1882K",33,0)
 ;;841^17^MED^LYMPHOMA & NON-ACUTE LEUKEMIA W CC^1.6118^4.7
"RTN","ICD1882K",34,0)
 ;;842^17^MED^LYMPHOMA & NON-ACUTE LEUKEMIA W/O CC/MCC^1.1167^3.1
"RTN","ICD1882K",35,0)
 ;;843^17^MED^OTHER MYELOPROLIF DIS OR POORLY DIFF NEOPL DIAG W MCC^1.8464^5.6
"RTN","ICD1882K",36,0)
 ;;844^17^MED^OTHER MYELOPROLIF DIS OR POORLY DIFF NEOPL DIAG W CC^1.1233^4.0
"RTN","ICD1882K",37,0)
 ;;845^17^MED^OTHER MYELOPROLIF DIS OR POORLY DIFF NEOPL DIAG W/O CC/MCC^.8261^2.8
"RTN","ICD1882K",38,0)
 ;;846^17^MED^CHEMOTHERAPY W/O ACUTE LEUKEMIA AS SECONDARY DIAGNOSIS W MCC^2.4618^5.9
"RTN","ICD1882K",39,0)
 ;;847^17^MED^CHEMOTHERAPY W/O ACUTE LEUKEMIA AS SECONDARY DIAGNOSIS W CC^1.1883^3.4
"RTN","ICD1882K",40,0)
 ;;848^17^MED^CHEMOTHERAPY W/O ACUTE LEUKEMIA AS SECONDARY DIAGNOSIS W/O CC/MCC^.9352^2.8
"RTN","ICD1882K",41,0)
 ;;849^17^MED^RADIOTHERAPY^1.6745^4.9
"RTN","ICD1882K",42,0)
 ;;853^18^SURG^INFECTIOUS & PARASITIC DISEASES W O.R. PROCEDURE W MCC^5.1334^10.7
"RTN","ICD1882K",43,0)
 ;;854^18^SURG^INFECTIOUS & PARASITIC DISEASES W O.R. PROCEDURE W CC^2.3804^6.6
"RTN","ICD1882K",44,0)
 ;;855^18^SURG^INFECTIOUS & PARASITIC DISEASES W O.R. PROCEDURE W/O CC/MCC^1.5124^3.5
"RTN","ICD1882K",45,0)
 ;;856^18^SURG^POSTOPERATIVE OR POST-TRAUMATIC INFECTIONS W O.R. PROC W MCC^4.6569^9.8
"RTN","ICD1882K",46,0)
 ;;857^18^SURG^POSTOPERATIVE OR POST-TRAUMATIC INFECTIONS W O.R. PROC W CC^2.0516^5.6
"RTN","ICD1882K",47,0)
 ;;858^18^SURG^POSTOPERATIVE OR POST-TRAUMATIC INFECTIONS W O.R. PROC W/O CC/MCC^1.3300^3.8
"RTN","ICD1882K",48,0)
 ;;862^18^MED^POSTOPERATIVE & POST-TRAUMATIC INFECTIONS W MCC^1.8550^5.5
"RTN","ICD1882K",49,0)
 ;;863^18^MED^POSTOPERATIVE & POST-TRAUMATIC INFECTIONS W/O MCC^1.0089^3.7
"RTN","ICD1882K",50,0)
 ;;864^18^MED^FEVER^.8481^2.8
"RTN","ICD1882K",51,0)
 ;;865^18^MED^VIRAL ILLNESS W MCC^1.5273^4.2
"RTN","ICD1882K",52,0)
 ;;866^18^MED^VIRAL ILLNESS W/O MCC^.7739^2.8
"RTN","ICD1882K",53,0)
 ;;867^18^MED^OTHER INFECTIOUS & PARASITIC DISEASES DIAGNOSES W MCC^2.6068^6.7
"RTN","ICD1882K",54,0)
 ;;868^18^MED^OTHER INFECTIOUS & PARASITIC DISEASES DIAGNOSES W CC^1.0292^3.8
"RTN","ICD1882K",55,0)
 ;;869^18^MED^OTHER INFECTIOUS & PARASITIC DISEASES DIAGNOSES W/O CC/MCC^.7091^2.8
"RTN","ICD1882K",56,0)
 ;;870^18^MED^SEPTICEMIA OR SEVERE SEPSIS W MV >96 HOURS^5.8782^12.6
"RTN","ICD1882K",57,0)
 ;;871^18^MED^SEPTICEMIA OR SEVERE SEPSIS W/O MV >96 HOURS W MCC^1.7926^5.0
"RTN","ICD1882K",58,0)
 ;;872^18^MED^SEPTICEMIA OR SEVERE SEPSIS W/O MV >96 HOURS W/O MCC^1.0427^3.9
"RTN","ICD1882K",59,0)
 ;;876^19^SURG^O.R. PROCEDURE W PRINCIPAL DIAGNOSES OF MENTAL ILLNESS^3.0841^7.8
"RTN","ICD1882K",60,0)
 ;;880^19^MED^ACUTE ADJUSTMENT REACTION & PSYCHOSOCIAL DYSFUNCTION^.7227^2.4
"RTN","ICD1882K",61,0)
 ;;881^19^MED^DEPRESSIVE NEUROSES^.6618^3.4
"RTN","ICD1882K",62,0)
 ;;882^19^MED^NEUROSES EXCEPT DEPRESSIVE^.6924^3.3
"RTN","ICD1882K",63,0)
 ;;883^19^MED^DISORDERS OF PERSONALITY & IMPULSE CONTROL^1.3737^4.6
"RTN","ICD1882K",64,0)
 ;;884^19^MED^ORGANIC DISTURBANCES & MENTAL RETARDATION^1.1483^4.3
"RTN","ICD1882K",65,0)
 ;;885^19^MED^PSYCHOSES^1.0575^5.6
"RTN","ICD1882K",66,0)
 ;;886^19^MED^BEHAVIORAL & DEVELOPMENTAL DISORDERS^.8718^3.9
"RTN","ICD1882K",67,0)
 ;;887^19^MED^OTHER MENTAL DISORDER DIAGNOSES^.9939^3.0
"RTN","ICD1882K",68,0)
 ;;894^20^MED^ALCOHOL/DRUG ABUSE OR DEPENDENCE, LEFT AMA^.4859^2.1
"RTN","ICD1882K",69,0)
 ;;895^20^MED^ALCOHOL/DRUG ABUSE OR DEPENDENCE W REHABILITATION THERAPY^1.2435^9.3
"RTN","ICD1882K",70,0)
 ;;896^20^MED^ALCOHOL/DRUG ABUSE OR DEPENDENCE W/O REHABILITATION THERAPY W MCC^1.5678^4.8
"RTN","ICD1882K",71,0)
 ;;897^20^MED^ALCOHOL/DRUG ABUSE OR DEPENDENCE W/O REHABILITATION THERAPY W/O MCC^.7231^3.3
"RTN","ICD1882K",72,0)
 ;;901^21^SURG^WOUND DEBRIDEMENTS FOR INJURIES W MCC^3.9370^9.2
"RTN","ICD1882K",73,0)
 ;;902^21^SURG^WOUND DEBRIDEMENTS FOR INJURIES W CC^1.8265^5.3
"RTN","ICD1882K",74,0)
 ;;903^21^SURG^WOUND DEBRIDEMENTS FOR INJURIES W/O CC/MCC^1.1723^3.3
"RTN","ICD1882K",75,0)
 ;;904^21^SURG^SKIN GRAFTS FOR INJURIES W CC/MCC^3.2140^7.1
"RTN","ICD1882K",76,0)
 ;;905^21^SURG^SKIN GRAFTS FOR INJURIES W/O CC/MCC^1.4233^3.6
"RTN","ICD1882K",77,0)
 ;;906^21^SURG^HAND PROCEDURES FOR INJURIES^1.5670^2.8
"RTN","ICD1882K",78,0)
 ;;907^21^SURG^OTHER O.R. PROCEDURES FOR INJURIES W MCC^3.8073^7.5
"RTN","ICD1882K",79,0)
 ;;908^21^SURG^OTHER O.R. PROCEDURES FOR INJURIES W CC^1.9904^4.3
"RTN","ICD1882K",80,0)
 ;;909^21^SURG^OTHER O.R. PROCEDURES FOR INJURIES W/O CC/MCC^1.2992^2.6
"RTN","ICD1882K",81,0)
 ;;913^21^MED^TRAUMATIC INJURY W MCC^1.3561^3.8
"RTN","ICD1882K",82,0)
 ;;914^21^MED^TRAUMATIC INJURY W/O MCC^.7317^2.5
"RTN","ICD1882K",83,0)
 ;;915^21^MED^ALLERGIC REACTIONS W MCC^1.6040^3.7
"RTN","ICD1882K",84,0)
 ;;916^21^MED^ALLERGIC REACTIONS W/O MCC^.5582^1.8
"RTN","ICD1882K",85,0)
 ;;917^21^MED^POISONING & TOXIC EFFECTS OF DRUGS W MCC^1.4065^3.5
"RTN","ICD1882K",86,0)
 ;;918^21^MED^POISONING & TOXIC EFFECTS OF DRUGS W/O MCC^.6859^2.2
"RTN","ICD1882K",87,0)
 ;;919^21^MED^COMPLICATIONS OF TREATMENT W MCC^1.7611^4.5
"RTN","ICD1882K",88,0)
 ;;920^21^MED^COMPLICATIONS OF TREATMENT W CC^.9991^3.1
"RTN","ICD1882K",89,0)
 ;;921^21^MED^COMPLICATIONS OF TREATMENT W/O CC/MCC^.6960^2.3
"RTN","ICD1882K",90,0)
 ;;922^21^MED^OTHER INJURY, POISONING & TOXIC EFFECT DIAG W MCC^1.5833^4.0
"RTN","ICD1882K",91,0)
 ;;923^21^MED^OTHER INJURY, POISONING & TOXIC EFFECT DIAG W/O MCC^.8117^2.5
"RTN","ICD1882K",92,0)
 ;;927^22^SURG^EXTENSIVE BURNS OR FULL THICKNESS BURNS W MV >96 HRS W SKIN GRAFT^15.9672^23.5
"RTN","ICD1882K",93,0)
 ;;928^22^SURG^FULL THICKNESS BURN W SKIN GRAFT OR INHAL INJ W CC/MCC^5.7399^11.3
"RTN","ICD1882K",94,0)
 ;;929^22^SURG^FULL THICKNESS BURN W SKIN GRAFT OR INHAL INJ W/O CC/MCC^2.4661^5.5
"RTN","ICD1882K",95,0)
 ;;933^22^MED^EXTENSIVE BURNS OR FULL THICKNESS BURNS W MV >96 HRS W/O SKIN GRAFT^2.8685^2.6
"RTN","ICD1882K",96,0)
 ;;934^22^MED^FULL THICKNESS BURN W/O SKIN GRFT OR INHAL INJ^1.6716^4.2
"RTN","ICD1882K",97,0)
 ;;935^22^MED^NON-EXTENSIVE BURNS^1.5141^3.4
"RTN","ICD1882K",98,0)
 ;;939^23^SURG^O.R. PROC W DIAGNOSES OF OTHER CONTACT W HEALTH SERVICES W MCC^2.9866^6.2
"RTN","ICD1882K",99,0)
 ;;940^23^SURG^O.R. PROC W DIAGNOSES OF OTHER CONTACT W HEALTH SERVICES W CC^1.9107^3.7
"RTN","ICD1882K",100,0)
 ;;941^23^SURG^O.R. PROC W DIAGNOSES OF OTHER CONTACT W HEALTH SERVICES W/O CC/MCC^1.3589^2.1
"RTN","ICD1882K",101,0)
 ;;945^23^MED^REHABILITATION W CC/MCC^1.2781^8.8
"RTN","ICD1882K",102,0)
 ;;946^23^MED^REHABILITATION W/O CC/MCC^1.0151^6.8
"RTN","ICD1882K",103,0)
 ;;947^23^MED^SIGNS & SYMPTOMS W MCC^1.1323^3.5
"RTN","ICD1882K",104,0)
 ;;948^23^MED^SIGNS & SYMPTOMS W/O MCC^.7356^2.7
"RTN","ICD1882K",105,0)
 ;;949^23^MED^AFTERCARE W CC/MCC^1.1197^3.3
"RTN","ICD1882K",106,0)
 ;;950^23^MED^AFTERCARE W/O CC/MCC^.5798^2.3
"RTN","ICD1882K",107,0)
 ;;951^23^MED^OTHER FACTORS INFLUENCING HEALTH STATUS^.9885^2.7
"RTN","ICD1882K",108,0)
 ;;955^24^SURG^CRANIOTOMY FOR MULTIPLE SIGNIFICANT TRAUMA^5.6773^8.4
"RTN","ICD1882K",109,0)
 ;;956^24^SURG^LIMB REATTACHMENT, HIP & FEMUR PROC FOR MULTIPLE SIGNIFICANT TRAUMA^3.7116^6.4
"RTN","ICD1882K",110,0)
 ;;957^24^SURG^OTHER O.R. PROCEDURES FOR MULTIPLE SIGNIFICANT TRAUMA W MCC^6.5504^9.4
"RTN","ICD1882K",111,0)
 ;;958^24^SURG^OTHER O.R. PROCEDURES FOR MULTIPLE SIGNIFICANT TRAUMA W CC^3.8565^6.9
"RTN","ICD1882K",112,0)
 ;;959^24^SURG^OTHER O.R. PROCEDURES FOR MULTIPLE SIGNIFICANT TRAUMA W/O CC/MCC^2.1705^4.2
"RTN","ICD1882K",113,0)
 ;;963^24^MED^OTHER MULTIPLE SIGNIFICANT TRAUMA W MCC^2.6295^5.4
"RTN","ICD1882K",114,0)
 ;;964^24^MED^OTHER MULTIPLE SIGNIFICANT TRAUMA W CC^1.4205^4.1
"RTN","ICD1882K",115,0)
 ;;965^24^MED^OTHER MULTIPLE SIGNIFICANT TRAUMA W/O CC/MCC^.9217^3.0
"RTN","ICD1882K",116,0)
 ;;969^25^SURG^HIV W EXTENSIVE O.R. PROCEDURE W MCC^5.0291^11.2
"RTN","ICD1882K",117,0)
 ;;970^25^SURG^HIV W EXTENSIVE O.R. PROCEDURE W/O MCC^2.7871^5.1
"RTN","ICD1882K",118,0)
 ;;974^25^MED^HIV W MAJOR RELATED CONDITION W MCC^2.6531^6.6
"RTN","ICD1882K",119,0)
 ;;975^25^MED^HIV W MAJOR RELATED CONDITION W CC^1.3589^4.5
"RTN","ICD1882K",120,0)
 ;;976^25^MED^HIV W MAJOR RELATED CONDITION W/O CC/MCC^.9073^3.3
"RTN","ICD1882K",121,0)
 ;;977^25^MED^HIV W OR W/O OTHER RELATED CONDITION^1.1577^3.5
"RTN","ICD1882K",122,0)
 ;;981^99^SURG^EXTENSIVE O.R. PROCEDURE UNRELATED TO PRINCIPAL DIAGNOSIS W MCC^4.8532^9.5
"RTN","ICD1882K",123,0)
 ;;982^99^SURG^EXTENSIVE O.R. PROCEDURE UNRELATED TO PRINCIPAL DIAGNOSIS W CC^2.7416^5.4
"RTN","ICD1882K",124,0)
 ;;983^99^SURG^EXTENSIVE O.R. PROCEDURE UNRELATED TO PRINCIPAL DIAGNOSIS W/O CC/MCC^1.7615^2.8
"RTN","ICD1882K",125,0)
 ;;984^99^SURG^PROSTATIC O.R. PROCEDURE UNRELATED TO PRINCIPAL DIAGNOSIS W MCC^3.3844^9.3
"RTN","ICD1882K",126,0)
 ;;985^99^SURG^PROSTATIC O.R. PROCEDURE UNRELATED TO PRINCIPAL DIAGNOSIS W CC^1.9339^4.8
"RTN","ICD1882K",127,0)
 ;;986^99^SURG^PROSTATIC O.R. PROCEDURE UNRELATED TO PRINCIPAL DIAGNOSIS W/O CC/MCC^1.2079^2.4
"RTN","ICD1882K",128,0)
 ;;987^99^SURG^NON-EXTENSIVE O.R. PROC UNRELATED TO PRINCIPAL DIAGNOSIS W MCC^3.2123^8.0
"RTN","ICD1882K",129,0)
 ;;988^99^SURG^NON-EXTENSIVE O.R. PROC UNRELATED TO PRINCIPAL DIAGNOSIS W CC^1.7533^4.6
"RTN","ICD1882K",130,0)
 ;;989^99^SURG^NON-EXTENSIVE O.R. PROC UNRELATED TO PRINCIPAL DIAGNOSIS W/O CC/MCC^1.0425^2.2
"RTN","ICD1882K",131,0)
 ;;998^99^**^PRINCIPAL DIAGNOSIS INVALID AS DISCHARGE DIAGNOSIS^0.0000^0.0000
"RTN","ICD1882K",132,0)
 ;;999^99^**^UNGROUPABLE^0.0000^0.0000
"RTN","ICD1882K",133,0)
 ;;EXIT
"RTN","ICD1882O")
0^15^B2720636^n/a
"RTN","ICD1882O",1,0)
ICD1882O ;ALB/JDG - YEARLY DRG UPDATE;8/9/2010
"RTN","ICD1882O",2,0)
 ;;18.0;DRG Grouper;**82**;Oct 20, 2000;Build 21
"RTN","ICD1882O",3,0)
 ;
"RTN","ICD1882O",4,0)
 ; Inactivating DRG(s) - will add an entry for fiscal year
"RTN","ICD1882O",5,0)
 ; DRG is being inactivated with an inactive status.
"RTN","ICD1882O",6,0)
 Q
"RTN","ICD1882O",7,0)
 ;
"RTN","ICD1882O",8,0)
 ;
"RTN","ICD1882O",9,0)
INACTDRG ;
"RTN","ICD1882O",10,0)
 N LINE,ICDX,ICDDRG,DESC,DA,DIE,DR,MDC,SURG,ICDFDA
"RTN","ICD1882O",11,0)
 D BMES^XPDUTL(">>> Inactivating DRG(s)...")
"RTN","ICD1882O",12,0)
 F LINE=1:1 S ICDX=$T(INAC+LINE) S ICDDRG=$P(ICDX,";;",2) Q:ICDDRG="EXIT"  D
"RTN","ICD1882O",13,0)
 .S DESC="NO LONGER VALID"
"RTN","ICD1882O",14,0)
 .S DA(LINE)=$P(ICDDRG,U)
"RTN","ICD1882O",15,0)
 .S DA=1
"RTN","ICD1882O",16,0)
 .S DIE="^ICD("_DA(LINE)_",1,"
"RTN","ICD1882O",17,0)
 .S DR=".01///^S X=DESC"
"RTN","ICD1882O",18,0)
 .D ^DIE
"RTN","ICD1882O",19,0)
 .; check if already done in case patch being re-installed
"RTN","ICD1882O",20,0)
 .Q:$D(^ICD($P(ICDDRG,U),66,"B",3151001))
"RTN","ICD1882O",21,0)
 .; add entry to 80.266
"RTN","ICD1882O",22,0)
 .S MDC=$P(ICDDRG,U,2)
"RTN","ICD1882O",23,0)
 .S SURG=$P(ICDDRG,U,3)
"RTN","ICD1882O",24,0)
 .S ICDDRG=$P(ICDDRG,U)
"RTN","ICD1882O",25,0)
 .S ICDFDA(80.2,"?1,",.01)=ICDDRG
"RTN","ICD1882O",26,0)
 .S ICDFDA(80.266,"+2,?1,",.01)=3151001
"RTN","ICD1882O",27,0)
 .S ICDFDA(80.266,"+2,?1,",.03)=0
"RTN","ICD1882O",28,0)
 .S ICDFDA(80.266,"+2,?1,",.05)=MDC
"RTN","ICD1882O",29,0)
 .S ICDFDA(80.266,"+2,?1,",.06)=SURG
"RTN","ICD1882O",30,0)
 .D UPDATE^DIE("","ICDFDA") K ICDFDA
"RTN","ICD1882O",31,0)
 .; add entry to 80.268 and 80.2681 
"RTN","ICD1882O",32,0)
 .S ICDFDA(80.2,"?1,",.01)=ICDDRG
"RTN","ICD1882O",33,0)
 .S ICDFDA(80.268,"+2,?1,",.01)=3151001
"RTN","ICD1882O",34,0)
 .D UPDATE^DIE("","ICDFDA") K ICDFDA
"RTN","ICD1882O",35,0)
 .S ICDFDA(80.2,"?1,",.01)=ICDDRG
"RTN","ICD1882O",36,0)
 .S ICDFDA(80.2681,"?2,?1,",.01)=3151001
"RTN","ICD1882O",37,0)
 .S ICDFDA(80.2681,"+3,?2,?1,",.01)=DESC
"RTN","ICD1882O",38,0)
 .D UPDATE^DIE("","ICDFDA") K ICDFDA
"RTN","ICD1882O",39,0)
 ;
"RTN","ICD1882O",40,0)
 ;
"RTN","ICD1882O",41,0)
INAC ;DRG^MDC^SURG (1=surg, 0=med)
"RTN","ICD1882O",42,0)
 ;;237^8^1
"RTN","ICD1882O",43,0)
 ;;238^8^1
"RTN","ICD1882O",44,0)
 ;;EXIT
"RTN","ICD1882P")
0^14^B236433^n/a
"RTN","ICD1882P",1,0)
ICD1882P ;ALB/JDG - YEARLY DRG UPDATE;8/9/2010
"RTN","ICD1882P",2,0)
 ;;18.0;DRG Grouper;**82**;Oct 20, 2000;Build 21
"RTN","ICD1882P",3,0)
 ;
"RTN","ICD1882P",4,0)
 ;This routine will kick off Routines needed for 
"RTN","ICD1882P",5,0)
 ;FY 2016 updates to the DRG Grouper.
"RTN","ICD1882P",6,0)
 ;
"RTN","ICD1882P",7,0)
 Q
"RTN","ICD1882P",8,0)
 ;
"RTN","ICD1882P",9,0)
EN ; start update
"RTN","ICD1882P",10,0)
 D PRE^ICD1882A ;
"RTN","ICD1882P",11,0)
 Q
"RTN","ICD1882P",12,0)
EN2 ; continue update
"RTN","ICD1882P",13,0)
 D INACTDRG^ICD1882O ;inactivate DRGs
"RTN","ICD1882P",14,0)
 D DRG^ICD1882X ;changes for DRGS
"RTN","ICD1882P",15,0)
 ; ********************************************************************************
"RTN","ICD1882P",16,0)
 ; *****routines ICD1872F-K contain the DRG info needed for the Grouper update*****
"RTN","ICD1882P",17,0)
 ; ********************************************************************************
"RTN","ICD1882P",18,0)
 D POST^ICD1882A ;
"RTN","ICD1882P",19,0)
 Q
"RTN","ICD1882X")
0^13^B74155132^n/a
"RTN","ICD1882X",1,0)
ICD1882X ;ALB/JDG - YEARLY DRG UPDATE;8/1/2015
"RTN","ICD1882X",2,0)
 ;;18.0;DRG Grouper;**82**;Oct 20, 2000;Build 21
"RTN","ICD1882X",3,0)
 ;
"RTN","ICD1882X",4,0)
 ;Update the (#80.2) DRG file with FY 2016 DRG Grouper MS-DRG codes.
"RTN","ICD1882X",5,0)
 ;
"RTN","ICD1882X",6,0)
 Q
"RTN","ICD1882X",7,0)
 ;
"RTN","ICD1882X",8,0)
 ;Routines ICD1882* contain each FY 2016 MS-DRG code update values
"RTN","ICD1882X",9,0)
 ;in a line of text delimited by up-arrow "^".
"RTN","ICD1882X",10,0)
 ; $TEXT line field names
"RTN","ICD1882X",11,0)
 ; MS-DRG^MDC^TYPE^MS-DRG TITLE^WEIGHTS^GEOMETRIC MEAN LOS
"RTN","ICD1882X",12,0)
 ; routine    MS-DRG codes
"RTN","ICD1882X",13,0)
 ; ICD1882F -   1 to 168
"RTN","ICD1882X",14,0)
 ; ICD1882G - 175 to 329
"RTN","ICD1882X",15,0)
 ; ICD1882H - 330 to 480
"RTN","ICD1882X",16,0)
 ; ICD1882I - 481 to 639
"RTN","ICD1882X",17,0)
 ; ICD1882J - 640 to 809
"RTN","ICD1882X",18,0)
 ; ICD1882K - 810 to 999
"RTN","ICD1882X",19,0)
 ;
"RTN","ICD1882X",20,0)
 ;The following nodes/fields will be updated or created:
"RTN","ICD1882X",21,0)
 ;  .001 NUMBER (same as DRG Number)
"RTN","ICD1882X",22,0)
 ;  0 node   - .01 NAME (composed of prefix "DRG"_Number... DRG579)
"RTN","ICD1882X",23,0)
 ;               5 MDC#
"RTN","ICD1882X",24,0)
 ;             .06 SURGERY
"RTN","ICD1882X",25,0)
 ;  1 node   -  #1 DESCRIPTION   *** don't update existing records ***
"RTN","ICD1882X",26,0)
 ;                 80.21A, .01 DESCRIPTION Multiple
"RTN","ICD1882X",27,0)
 ;  2 node   - #71 DRG GROUPER EFFECIVE DATE
"RTN","ICD1882X",28,0)
 ;                 80.271D, .01 DRG GROUPER EFFECIVE DATE
"RTN","ICD1882X",29,0)
 ;                            1 REFERENCE - MUMPS Routine name
"RTN","ICD1882X",30,0)
 ; 66 node   - #66 EFFECTIVE DATE
"RTN","ICD1882X",31,0)
 ;                 80.266D, .01 EFFECTIVE DATE
"RTN","ICD1882X",32,0)
 ;                          .03 STATUS
"RTN","ICD1882X",33,0)
 ;                          .05 MDC#
"RTN","ICD1882X",34,0)
 ;                          .06 SURGERY
"RTN","ICD1882X",35,0)
 ; 68 node   - #68 DESCRIPTION (VERSIONED)
"RTN","ICD1882X",36,0)
 ;                 80.268D, .01 EFFECTIVE DATE
"RTN","ICD1882X",37,0)
 ;                            1 DESCRIPTION
"RTN","ICD1882X",38,0)
 ;                      80.2681, .01 DESCRIPTION
"RTN","ICD1882X",39,0)
 ; "FY" node - #20 FISCAL YEAR WEIGHTS&TRIM
"RTN","ICD1882X",40,0)
 ;                 80.22D, .01 FISCAL YEAR WEIGHTS&TRIMS
"RTN","ICD1882X",41,0)
 ;                           2 WEIGHT                
"RTN","ICD1882X",42,0)
 ;                           3 LOW TRIM(days)
"RTN","ICD1882X",43,0)
 ;                           4 HIGH TRIM(days)
"RTN","ICD1882X",44,0)
 ;                         4.5 AVG LENGTH OF STAY(days)
"RTN","ICD1882X",45,0)
 ;
"RTN","ICD1882X",46,0)
DRG ;post-install driver (#80.2) DRG updates
"RTN","ICD1882X",47,0)
 ;This procedure calls a series of routines that contain the data
"RTN","ICD1882X",48,0)
 ;element values used to create the FY 2016 MS-DRG updates.
"RTN","ICD1882X",49,0)
 ; Input:
"RTN","ICD1882X",50,0)
 ;   ICDTMP - Temp file of error msg's
"RTN","ICD1882X",51,0)
 ;   ICDTOT - Total MS-DRG codes filed
"RTN","ICD1882X",52,0)
 ; Output:
"RTN","ICD1882X",53,0)
 ;   ICDTMP - Temp file of error msg's
"RTN","ICD1882X",54,0)
 ;   ICDTOT - Total MS-DRG codes filed
"RTN","ICD1882X",55,0)
 ;
"RTN","ICD1882X",56,0)
 D BMES^XPDUTL(">>> Adding FY 2016 DRG Grouper updates to (#80.2) DRG file...")
"RTN","ICD1882X",57,0)
 N ICDRTN,ICDI,ICDSUB,ICDEDIT,ICDADD,ICDTMP
"RTN","ICD1882X",58,0)
 S (ICDEDIT,ICDADD)=0
"RTN","ICD1882X",59,0)
 S ICDTOT=$G(ICDTOT) I ICDTOT']"" S ICDTOT=0
"RTN","ICD1882X",60,0)
 S ICDTMP=$G(ICDTMP)
"RTN","ICD1882X",61,0)
 I ICDTMP']"" S ICDTMP=$NA(^TMP("DRGFY2016",$J)) D
"RTN","ICD1882X",62,0)
 . K @ICDTMP
"RTN","ICD1882X",63,0)
 . S @ICDTMP@(0)="PATCH FY 2016 DRG UPDATE^"_$$NOW^XLFDT
"RTN","ICD1882X",64,0)
 ;
"RTN","ICD1882X",65,0)
 ;loop each sub-routine
"RTN","ICD1882X",66,0)
 S ICDSUB="FGHIJK"
"RTN","ICD1882X",67,0)
 F ICDI=1:1:6 S ICDRTN="^ICD1882"_$E(ICDSUB,ICDI) D
"RTN","ICD1882X",68,0)
  .Q:($T(@ICDRTN)="")
"RTN","ICD1882X",69,0)
  .D GETDRG(ICDRTN,ICDTMP,.ICDTOT,.ICDEDIT,.ICDADD)
"RTN","ICD1882X",70,0)
 ;
"RTN","ICD1882X",71,0)
 I '$D(@ICDTMP@("ERROR")) D
"RTN","ICD1882X",72,0)
 . D MES^XPDUTL(">>> DRG Updates Completed...")
"RTN","ICD1882X",73,0)
 . D MES^XPDUTL("    ...Total Codes Edited: "_ICDEDIT)
"RTN","ICD1882X",74,0)
 . D MES^XPDUTL("    ...Total Codes Added:  "_ICDADD)
"RTN","ICD1882X",75,0)
 . D MES^XPDUTL("    ................Total: "_ICDTOT)
"RTN","ICD1882X",76,0)
 . D MES^XPDUTL("")
"RTN","ICD1882X",77,0)
 Q
"RTN","ICD1882X",78,0)
 ;
"RTN","ICD1882X",79,0)
GETDRG(ICDRTN,ICDTMP,ICDTOT,ICDEDIT,ICDADD) ;get and file MS-DRG data
"RTN","ICD1882X",80,0)
 ; Input:
"RTN","ICD1882X",81,0)
 ;   ICDRTN - Post Install routine to process MS-DRG codes
"RTN","ICD1882X",82,0)
 ;   ICDTMP - Temp file of error msg's
"RTN","ICD1882X",83,0)
 ;   ICDTOT - Total MS-DRG codes filed
"RTN","ICD1882X",84,0)
 ; Output:
"RTN","ICD1882X",85,0)
 ;   ICDTMP - Temp file of error msg's
"RTN","ICD1882X",86,0)
 ;   ICDTOT - Total MS-DRG codes filed
"RTN","ICD1882X",87,0)
 ;
"RTN","ICD1882X",88,0)
 N ICDLN,ICDLINE,ICDTAG,ICDDRG,ICDTEXT
"RTN","ICD1882X",89,0)
 ;
"RTN","ICD1882X",90,0)
 F ICDLN=1:1 S ICDTAG="MSDRG+"_ICDLN_ICDRTN,ICDTEXT=$T(@ICDTAG) S ICDLINE=$P(ICDTEXT,";;",2) Q:ICDLINE="EXIT"  D
"RTN","ICD1882X",91,0)
 . ; check if DRG exists or is a new one
"RTN","ICD1882X",92,0)
 . I $D(^ICD(+$P(+ICDLINE,U),0)) D EDITDRG(ICDLINE,ICDTMP,.ICDTOT,.ICDEDIT)
"RTN","ICD1882X",93,0)
 . E  D NEWDRG(ICDLINE,ICDTMP,.ICDTOT,.ICDADD)
"RTN","ICD1882X",94,0)
 Q
"RTN","ICD1882X",95,0)
 ;
"RTN","ICD1882X",96,0)
EDITDRG(ICDLINE,ICDTMP,ICDTOT,ICDEDIT) ; edit existing (#80.2) DRG record
"RTN","ICD1882X",97,0)
 ; Input:
"RTN","ICD1882X",98,0)
 ;   ICDLINE - $TEXT line of MS-DRG code data
"RTN","ICD1882X",99,0)
 ;   ICDTMP - Temp file of error msg's
"RTN","ICD1882X",100,0)
 ;   ICDTOT - Total MS-DRG codes filed
"RTN","ICD1882X",101,0)
 ; Output:
"RTN","ICD1882X",102,0)
 ;   ICDTMP - Temp file of error msg's
"RTN","ICD1882X",103,0)
 ;   ICDTOT - Total MS-DRG codes filed
"RTN","ICD1882X",104,0)
 ;
"RTN","ICD1882X",105,0)
 N X,Y,DA,DIE,DR,ICDDRG,ICDDESC,ICDMDC,ICDSURG,ICDFDA,ICDFY,ICDERR,ICDREF
"RTN","ICD1882X",106,0)
 ;
"RTN","ICD1882X",107,0)
 S ICDFY=3151001
"RTN","ICD1882X",108,0)
 S ICDDRG=+$P(ICDLINE,U)
"RTN","ICD1882X",109,0)
 S ICDDESC=$P(ICDLINE,U,4)
"RTN","ICD1882X",110,0)
 I '$D(^ICD(ICDDRG,0)) D  Q
"RTN","ICD1882X",111,0)
 . S @ICDTMP@("ERROR",ICDDRG,0)="MISSING (#80.2) DRG FILE RECORD"
"RTN","ICD1882X",112,0)
 ;
"RTN","ICD1882X",113,0)
 ; check if already done in case patch being re-installed
"RTN","ICD1882X",114,0)
 Q:$D(^ICD(ICDDRG,66,"B",ICDFY))
"RTN","ICD1882X",115,0)
 ;
"RTN","ICD1882X",116,0)
 ;-- 80.271D subfile - #71 DRG GROUPER EFFECIVE DATE
"RTN","ICD1882X",117,0)
 ;S ICDREF="ICDTLB6E"     ;*** REFERENCE routine not defined yet ???
"RTN","ICD1882X",118,0)
 ;S ICDREF=""             ;*** ECF commented out-see next line
"RTN","ICD1882X",119,0)
 ;For FY09 and later the reference will have an alpha character at the end
"RTN","ICD1882X",120,0)
 ;For FY09 "A" will be used - ex-ICDTBL0A, For FY10 "B" will be used, etc.
"RTN","ICD1882X",121,0)
 ;ICDTLB** Was used before MS-DRG update(FY08)
"RTN","ICD1882X",122,0)
 ;ICDTBL** will be used for MS-DRGs now
"RTN","ICD1882X",123,0)
 ;ICD10TB* will be used for ICD10 MS-DRGs now
"RTN","ICD1882X",124,0)
 S ICDYG=+ICDDRG
"RTN","ICD1882X",125,0)
 S ICDREF="ICD10TB"_$S(ICDYG<100:0,ICDYG>99&(ICDYG<202):1,ICDYG>201&(ICDYG<302):2,ICDYG>301&(ICDYG<400):3,ICDYG>399&(ICDYG<500):4,ICDYG>499&(ICDYG<602):5,ICDYG>601&(ICDYG<701):6,ICDYG>700&(ICDYG<802):7,ICDYG>801&(ICDYG<901):8,1:9)
"RTN","ICD1882X",126,0)
 D DRGEFFDT(ICDDRG,ICDFY,ICDREF,ICDTMP)
"RTN","ICD1882X",127,0)
 ;
"RTN","ICD1882X",128,0)
 ;-- 80.266D subfile - #66 EFFECTIVE DATE
"RTN","ICD1882X",129,0)
 S ICDMDC=$P(ICDLINE,U,2) S:ICDMDC="PRE" ICDMDC=98
"RTN","ICD1882X",130,0)
 I ICDMDC]"" S ICDMDC=+ICDMDC
"RTN","ICD1882X",131,0)
 S ICDSURG=$P(ICDLINE,U,3) S ICDSURG=$S(ICDSURG="SURG":1,1:0)
"RTN","ICD1882X",132,0)
 D EFFDATE(ICDDRG,ICDFY,ICDMDC,ICDSURG,ICDTMP)
"RTN","ICD1882X",133,0)
 ;
"RTN","ICD1882X",134,0)
 ;-- 80.268D subfile - #68 DESCRIPTION
"RTN","ICD1882X",135,0)
 D DESCA(ICDDRG,ICDFY,ICDTMP)
"RTN","ICD1882X",136,0)
 ;
"RTN","ICD1882X",137,0)
 ;-- 80.2681 subfile - #68 DESCRIPTION
"RTN","ICD1882X",138,0)
 D DESCB(ICDDRG,ICDFY,ICDDESC,ICDTMP)
"RTN","ICD1882X",139,0)
 ;
"RTN","ICD1882X",140,0)
 ;--80.22D subfile - #20 FISCAL YEAR WEIGHTS&TRIM
"RTN","ICD1882X",141,0)
 D WEIGHTS(ICDLINE,ICDTMP)
"RTN","ICD1882X",142,0)
 ;
"RTN","ICD1882X",143,0)
 S ICDTOT=ICDTOT+1,ICDEDIT=ICDEDIT+1
"RTN","ICD1882X",144,0)
 Q
"RTN","ICD1882X",145,0)
 ;
"RTN","ICD1882X",146,0)
NEWDRG(ICDLINE,ICDTMP,ICDTOT,ICDADD) ; add new (#80.2) DRG record
"RTN","ICD1882X",147,0)
 ; Input:
"RTN","ICD1882X",148,0)
 ;   ICDLINE - $TEXT line of MS-DRG code data
"RTN","ICD1882X",149,0)
 ;    ICDTMP - Temp file of error msg's
"RTN","ICD1882X",150,0)
 ;    ICDTOT - Total MS-DRG codes filed
"RTN","ICD1882X",151,0)
 ; Output:
"RTN","ICD1882X",152,0)
 ;   ICDTMP - Temp file of error msg's
"RTN","ICD1882X",153,0)
 ;   ICDTOT - Total MS-DRG codes filed
"RTN","ICD1882X",154,0)
 ;
"RTN","ICD1882X",155,0)
 N DA,DIC,DIE,DR,X,Y
"RTN","ICD1882X",156,0)
 N ICDDRG,ICDDESC,ICDMDC,ICDSURG,ICDFDA,ICDFY,ICDERR,ICDREF,ICDIEN
"RTN","ICD1882X",157,0)
 S ICDFY=3151001
"RTN","ICD1882X",158,0)
 S ICDDRG=+$P(ICDLINE,U)
"RTN","ICD1882X",159,0)
 ; check for duplicates in case install is being rerun
"RTN","ICD1882X",160,0)
 I $D(^ICD(ICDDRG,0)) Q
"RTN","ICD1882X",161,0)
 ;
"RTN","ICD1882X",162,0)
 S ICDMDC=$P(ICDLINE,U,2) I ICDMDC="PRE" S ICDMDC=98
"RTN","ICD1882X",163,0)
 I ICDMDC]"" S ICDMDC=+ICDMDC
"RTN","ICD1882X",164,0)
 S ICDSURG=$P(ICDLINE,U,3) S ICDSURG=$S(ICDSURG="SURG":1,1:"")
"RTN","ICD1882X",165,0)
 S ICDDESC=$P(ICDLINE,U,4)
"RTN","ICD1882X",166,0)
 ;
"RTN","ICD1882X",167,0)
 ;-- #.001 NUMBER and 0 node fields
"RTN","ICD1882X",168,0)
 K ICDFDA,ICDIEN,ICDERR
"RTN","ICD1882X",169,0)
 S ICDFDA(80.2,"+1,",.01)="DRG"_ICDDRG
"RTN","ICD1882X",170,0)
 S ICDFDA(80.2,"+1,",5)=ICDMDC
"RTN","ICD1882X",171,0)
 S ICDFDA(80.2,"+1,",.06)=ICDSURG
"RTN","ICD1882X",172,0)
 S ICDIEN(1)=ICDDRG
"RTN","ICD1882X",173,0)
 D UPDATE^DIE("","ICDFDA","ICDIEN","ICDERR") K ICDFDA,ICDIEN
"RTN","ICD1882X",174,0)
 I $D(ICDERR) D  K ICDERR       ;*** quit here if can't setup IEN ???
"RTN","ICD1882X",175,0)
 . S @ICDTMP@("ERROR",ICDDRG,.001)="FILING TO (#.001) NUMBER FIELD"
"RTN","ICD1882X",176,0)
 ;
"RTN","ICD1882X",177,0)
 ;-- 80.21A subfile - #1 DESCRIPTION
"RTN","ICD1882X",178,0)
 K DIC,DA
"RTN","ICD1882X",179,0)
 S DA(1)=ICDDRG
"RTN","ICD1882X",180,0)
 S DIC="^ICD("_DA(1)_",1,"
"RTN","ICD1882X",181,0)
 S DIC(0)="L"
"RTN","ICD1882X",182,0)
 S X=ICDDESC
"RTN","ICD1882X",183,0)
 K DO D FILE^DICN
"RTN","ICD1882X",184,0)
 K DIC,DA
"RTN","ICD1882X",185,0)
 I Y=-1 D
"RTN","ICD1882X",186,0)
 . S @ICDTMP@("ERROR",ICDDRG,1)="FILING TO (#1) DESCRIPTION FIELD"
"RTN","ICD1882X",187,0)
 ;
"RTN","ICD1882X",188,0)
 ;-- 80.271D subfile - #71 DRG GROUPER EFFECIVE DATE
"RTN","ICD1882X",189,0)
 ;S ICDREF="ICDTLB6D"     ;*** REFERENCE routine not defined yet ???
"RTN","ICD1882X",190,0)
 ;S ICDREF=""             ;ECF commented out - see next line
"RTN","ICD1882X",191,0)
 ;S ICDREF="ICDTBL"_$S(ICDDRG<100:"0",1:$E(ICDDRG,1)) ;ECF new line
"RTN","ICD1882X",192,0)
 ;D DRGEFFDT(ICDDRG,ICDFY,ICDREF,ICDTMP)
"RTN","ICD1882X",193,0)
 ;
"RTN","ICD1882X",194,0)
 ; -- 80.271D subfile - #71 DRG GROUPER EFFECIVE DATE
"RTN","ICD1882X",195,0)
 ;S ICDREF="ICDTLB6D"     ;*** REFERENCE routine not defined yet ???
"RTN","ICD1882X",196,0)
 ;S ICDREF=""             ;*** ECF commented out-see next line
"RTN","ICD1882X",197,0)
 ;For FY09 and later the reference will have an alpha character at the end
"RTN","ICD1882X",198,0)
 ;For FY09 "A" will be used - ex-ICDTBL0A, For FY10 "B" will be used, etc.
"RTN","ICD1882X",199,0)
 ;ICDTLB** Was used before MS-DRG update(FY08)
"RTN","ICD1882X",200,0)
 ;ICDTBL** will be used for MS-DRGs now
"RTN","ICD1882X",201,0)
 ;ICD10TB* will be used for ICD10 MS-DRGs now
"RTN","ICD1882X",202,0)
 S ICDYG=+ICDDRG
"RTN","ICD1882X",203,0)
 S ICDREF="ICD10TB"_$S(ICDYG<100:0,ICDYG>99&(ICDYG<202):1,ICDYG>201&(ICDYG<302):2,ICDYG>301&(ICDYG<400):3,ICDYG>399&(ICDYG<500):4,ICDYG>499&(ICDYG<602):5,ICDYG>601&(ICDYG<701):6,ICDYG>700&(ICDYG<802):7,ICDYG>801&(ICDYG<901):8,1:9)
"RTN","ICD1882X",204,0)
 D DRGEFFDT(ICDDRG,ICDFY,ICDREF,ICDTMP)
"RTN","ICD1882X",205,0)
 ;-- 80.266D subfile - #66 EFFECTIVE DATE
"RTN","ICD1882X",206,0)
 I ICDSURG="" S ICDSURG=0
"RTN","ICD1882X",207,0)
 D EFFDATE(ICDDRG,ICDFY,ICDMDC,ICDSURG,ICDTMP)
"RTN","ICD1882X",208,0)
 ;
"RTN","ICD1882X",209,0)
 ;-- 80.268D subfile - #68 DESCRIPTION
"RTN","ICD1882X",210,0)
 D DESCA(ICDDRG,ICDFY,ICDTMP)
"RTN","ICD1882X",211,0)
 ;
"RTN","ICD1882X",212,0)
 ;-- 80.2681 subfile - #68 DESCRIPTION
"RTN","ICD1882X",213,0)
 D DESCB(ICDDRG,ICDFY,ICDDESC,ICDTMP)
"RTN","ICD1882X",214,0)
 ;
"RTN","ICD1882X",215,0)
 ;-- 80.22D subfile - update weights&trims/ALOS
"RTN","ICD1882X",216,0)
 D WEIGHTS(ICDLINE,ICDTMP)
"RTN","ICD1882X",217,0)
 ;
"RTN","ICD1882X",218,0)
 S ICDTOT=ICDTOT+1,ICDADD=ICDADD+1
"RTN","ICD1882X",219,0)
 Q
"RTN","ICD1882X",220,0)
 ;
"RTN","ICD1882X",221,0)
DRGEFFDT(ICDDRG,ICDFY,ICDREF,ICDTMP) ;-- 80.271D - #71 DRG GROUPER EFFECIVE DATE
"RTN","ICD1882X",222,0)
 I '$G(ICDDRG)!'$G(ICDFY)!($G(ICDTMP)']"")!($D(^ICD(ICDDRG,2,"B",ICDFY))) Q
"RTN","ICD1882X",223,0)
 K ICDFDA,ICDERR
"RTN","ICD1882X",224,0)
 S ICDFDA(80.2,"?1,",.01)=ICDDRG
"RTN","ICD1882X",225,0)
 S ICDFDA(80.271,"+2,?1,",.01)=ICDFY
"RTN","ICD1882X",226,0)
 S ICDFDA(80.271,"+2,?1,",1)=ICDREF
"RTN","ICD1882X",227,0)
 D UPDATE^DIE("","ICDFDA","","ICDERR") K ICDFDA
"RTN","ICD1882X",228,0)
 I $D(ICDERR) D  K ICDERR
"RTN","ICD1882X",229,0)
 . S @ICDTMP@("ERROR",ICDDRG,71)="FILING TO (#71) DRG GROUPER EFFECIVE DATE FIELD"
"RTN","ICD1882X",230,0)
 Q
"RTN","ICD1882X",231,0)
 ;
"RTN","ICD1882X",232,0)
EFFDATE(ICDDRG,ICDFY,ICDMDC,ICDSURG,ICDTMP) ;-- 80.266D - #66 EFFECTIVE DATE
"RTN","ICD1882X",233,0)
 I '$G(ICDDRG)!'$G(ICDFY)!($G(ICDTMP)']"") Q
"RTN","ICD1882X",234,0)
 K ICDFDA,ICDERR
"RTN","ICD1882X",235,0)
 S ICDFDA(80.2,"?1,",.01)=ICDDRG
"RTN","ICD1882X",236,0)
 S ICDFDA(80.266,"+2,?1,",.01)=ICDFY
"RTN","ICD1882X",237,0)
 S ICDFDA(80.266,"+2,?1,",.03)=1
"RTN","ICD1882X",238,0)
 S ICDFDA(80.266,"+2,?1,",.05)=ICDMDC
"RTN","ICD1882X",239,0)
 S ICDFDA(80.266,"+2,?1,",.06)=ICDSURG
"RTN","ICD1882X",240,0)
 D UPDATE^DIE("","ICDFDA","","ICDERR") K ICDFDA
"RTN","ICD1882X",241,0)
 I $D(ICDERR) D  K ICDERR
"RTN","ICD1882X",242,0)
 . S @ICDTMP@("ERROR",ICDDRG,66)="FILING TO (#66) EFFECTIVE DATE FIELD"
"RTN","ICD1882X",243,0)
 Q
"RTN","ICD1882X",244,0)
 ;
"RTN","ICD1882X",245,0)
DESCA(ICDDRG,ICDFY,ICDTMP) ;-- 80.268D - #68 DESCRIPTION
"RTN","ICD1882X",246,0)
 I '$G(ICDDRG)!'$G(ICDFY)!($G(ICDTMP)']"") Q
"RTN","ICD1882X",247,0)
 K ICDFDA,ICDERR
"RTN","ICD1882X",248,0)
 S ICDFDA(80.2,"?1,",.01)=ICDDRG
"RTN","ICD1882X",249,0)
 S ICDFDA(80.268,"+2,?1,",.01)=ICDFY
"RTN","ICD1882X",250,0)
 D UPDATE^DIE("","ICDFDA","","ICDERR") K ICDFDA
"RTN","ICD1882X",251,0)
 I $D(ICDERR) D  K ICDERR
"RTN","ICD1882X",252,0)
 . S @ICDTMP@("ERROR",ICDDRG,68)="FILING TO (#68) DESCRIPTION FIELD"
"RTN","ICD1882X",253,0)
 Q
"RTN","ICD1882X",254,0)
 ;
"RTN","ICD1882X",255,0)
DESCB(ICDDRG,ICDFY,ICDDESC,ICDTMP) ;-- 80.2681 - #68 DESCRIPTION
"RTN","ICD1882X",256,0)
 I '$G(ICDDRG)!'$G(ICDFY)!($G(ICDDESC)']"")!($G(ICDTMP)']"") Q
"RTN","ICD1882X",257,0)
 K ICDFDA,ICDERR
"RTN","ICD1882X",258,0)
 S ICDFDA(80.2,"?1,",.01)=ICDDRG
"RTN","ICD1882X",259,0)
 S ICDFDA(80.268,"?2,?1,",.01)=ICDFY
"RTN","ICD1882X",260,0)
 S ICDFDA(80.2681,"+3,?2,?1,",.01)=ICDDESC
"RTN","ICD1882X",261,0)
 D UPDATE^DIE("","ICDFDA","","ICDERR") K ICDFDA
"RTN","ICD1882X",262,0)
 I $D(ICDERR) D  K ICDERR
"RTN","ICD1882X",263,0)
 . S @ICDTMP@("ERROR",ICDDRG,68)="FILING TO (#68) DESCRIPTION SUB-FIELD"
"RTN","ICD1882X",264,0)
 Q
"RTN","ICD1882X",265,0)
 ;
"RTN","ICD1882X",266,0)
WEIGHTS(ICDLINE,ICDTMP) ;--80.22D subfile - #20 FISCAL YEAR WEIGHTS&TRIM
"RTN","ICD1882X",267,0)
 ; Input:
"RTN","ICD1882X",268,0)
 ;   ICDLINE - $TEXT line of MS-DRG code data
"RTN","ICD1882X",269,0)
 ;    ICDTMP - Temp file of error msg's
"RTN","ICD1882X",270,0)
 ; Output:
"RTN","ICD1882X",271,0)
 ;   ICDTMP - Temp file of error msg's
"RTN","ICD1882X",272,0)
 ;
"RTN","ICD1882X",273,0)
 I $G(ICDLINE)'[""!($G(ICDTMP)'["") Q
"RTN","ICD1882X",274,0)
 N ICDDRG,ICDWT,ICDLOS,ICDSTR,ICDX,ICDJ,ICDFYR,ICDLOW,ICDHIGH
"RTN","ICD1882X",275,0)
 S ICDFYR=3160000,ICDLOW=1,ICDHIGH=99  ; *** default Low/High ???
"RTN","ICD1882X",276,0)
 S ICDDRG=+$P(ICDLINE,U)
"RTN","ICD1882X",277,0)
 I '$D(^ICD(ICDDRG,0)) D  Q
"RTN","ICD1882X",278,0)
 . S @ICDTMP@("ERROR",ICDDRG,0)="MISSING (#80.2) DRG FILE RECORD"
"RTN","ICD1882X",279,0)
 ;
"RTN","ICD1882X",280,0)
 ; check if being re-installed
"RTN","ICD1882X",281,0)
 Q:$D(^ICD(ICDDRG,"FY",ICDFYR))
"RTN","ICD1882X",282,0)
 ;
"RTN","ICD1882X",283,0)
 I ICDDRG=998!(ICDDRG=999) S (ICDLOW,ICDHIGH)=0
"RTN","ICD1882X",284,0)
 S ICDWT=$P(ICDLINE,U,5),ICDLOS=$P(ICDLINE,U,6)
"RTN","ICD1882X",285,0)
 I ICDLOS["*" S ICDLOS=0
"RTN","ICD1882X",286,0)
 S $P(ICDSTR,U)=ICDFYR,$P(ICDSTR,U,2)=ICDWT,$P(ICDSTR,U,3)=ICDLOW,$P(ICDSTR,U,4)=ICDHIGH,$P(ICDSTR,U,9)=ICDLOS
"RTN","ICD1882X",287,0)
 ;
"RTN","ICD1882X",288,0)
 S ^ICD(ICDDRG,"FY",ICDFYR,0)=ICDSTR
"RTN","ICD1882X",289,0)
 ;
"RTN","ICD1882X",290,0)
 I '$D(^ICD(ICDDRG,"FY",0)) S ^ICD(ICDDRG,"FY",0)="^80.22D^"_ICDFYR_"^1" Q
"RTN","ICD1882X",291,0)
 E  D
"RTN","ICD1882X",292,0)
 . S ICDX=0 F ICDJ=0:1 S ICDX=$O(^ICD(ICDDRG,"FY",ICDX)) Q:ICDX=""
"RTN","ICD1882X",293,0)
 . S $P(^ICD(ICDDRG,"FY",0),"^",3,4)=ICDFYR_"^"_ICDJ
"RTN","ICD1882X",294,0)
 Q
"RTN","ICDDG010")
0^22^B87506701^B87527545
"RTN","ICDDG010",1,0)
ICDDG010 ;KUM - DRG GROUPER PROCESSING BEGINS ;05/02/12 4:06pm
"RTN","ICDDG010",2,0)
 ;;18.0;DRG Grouper;**64,82**;Oct 20, 2000;Build 21
"RTN","ICDDG010",3,0)
 ;
"RTN","ICDDG010",4,0)
 ;GROUPING PROCESS BEGINS
"RTN","ICDDG010",5,0)
 ;
"RTN","ICDDG010",6,0)
GROUP ;
"RTN","ICDDG010",7,0)
 N ICDFOUND,ICDRGH,ICDNODOD,ICDPREQ
"RTN","ICDDG010",8,0)
 S (ICDFOUND,ICDNODOD)=0
"RTN","ICDDG010",9,0)
 D PRECOND I ICDRTC=4,ICDRG=999 G GLAST ; Handle PRE-CONDITIONS
"RTN","ICDDG010",10,0)
 I 'ICDFOUND D VARIABLS^ICDDRGX2
"RTN","ICDDG010",11,0)
 I 'ICDFOUND D MDCSPROC ; PROCESSING FOR MDC5, MDC19, MDC23, MDC14, MDC20, MDC22, MDC15
"RTN","ICDDG010",12,0)
 ;MDCSPROC may have found a DRG group but still needs to Do DODRG to apply CC/MCC rules, so ICDFOUND=1 and ICDNODOD=0
"RTN","ICDDG010",13,0)
 D NEONATE ; Handle Neonatal Processing
"RTN","ICDDG010",14,0)
 ;NEONATE may have found an actual DRG and does not need to Do DODRG to apply CC/MCC rules, so ICDFOUND=1 and ICDNODOD=1
"RTN","ICDDG010",15,0)
 I 'ICDFOUND D SURGICAL ; Apply Surgical Hierarchy
"RTN","ICDDG010",16,0)
 I 'ICDFOUND D DEFAULT ; Default Processing
"RTN","ICDDG010",17,0)
                                ; MDC24 PROCESSING
"RTN","ICDDG010",18,0)
                                ; MDC25 PROCESSING
"RTN","ICDDG010",19,0)
                                ; PREMDC PROCESSING
"RTN","ICDDG010",20,0)
                                ; MDC4 PROCESSING
"RTN","ICDDG010",21,0)
 D END
"RTN","ICDDG010",22,0)
GLAST ;
"RTN","ICDDG010",23,0)
 S ICDDRG=ICDRG
"RTN","ICDDG010",24,0)
 D KILL^ICDDRG
"RTN","ICDDG010",25,0)
 S:+$G(ICDRG)'>0 ICDRG=999
"RTN","ICDDG010",26,0)
 Q
"RTN","ICDDG010",27,0)
 ;
"RTN","ICDDG010",28,0)
PRECOND   ; PRE - CONDITIONS
"RTN","ICDDG010",29,0)
 I $D(ICDSEX(1))&($D(ICDSEX(2))) S ICDRTC=4,ICDRG=999
"RTN","ICDDG010",30,0)
 Q
"RTN","ICDDG010",31,0)
 ;
"RTN","ICDDG010",32,0)
MDCSPROC  ; Processing for MDCs 5, 19, 23, 14, 20, 22 and 15
"RTN","ICDDG010",33,0)
 N ICDMDCL
"RTN","ICDDG010",34,0)
 S ICDMDCL="/14/15/17/18/19/20/23/"[("/"_ICDMDC_"/")
"RTN","ICDDG010",35,0)
 I 'ICDMDCL D:ICDOPCT<2  I "^983^986^989^"[(U_ICDRG_U) S ICDFOUND=1 Q
"RTN","ICDDG010",36,0)
 . I $D(ICDF) Q
"RTN","ICDDG010",37,0)
 . I $D(ICD10PD("M")),'$D(ICD10OR("y")) S ICDOPCT=0 Q
"RTN","ICDDG010",38,0)
 . I $D(ICD10OR("O")),ICDNOR=ICDONR,ICDNOR>0,'$D(ICDPDRG(769)),'$D(ICD10ORNI("p")) S ICDRG=$S($D(ICD10ORNI("O")):983,$D(ICD10ORNI("y")):986,$D(ICD10ORNI("z")):989,1:983),ICDFOUND=1 Q
"RTN","ICDDG010",39,0)
 . I ICDOPNR S ICDRG=$S($D(ICD10ORNI("y")):986,1:983),ICDOPNR=0,ICDFOUND=1 Q
"RTN","ICDDG010",40,0)
 ;
"RTN","ICDDG010",41,0)
 ;if number of non-extensive ORs eqs # OR, 477
"RTN","ICDDG010",42,0)
 ;
"RTN","ICDDG010",43,0)
 I 'ICDMDCL,'$D(ICD10ORNI("y"))&($D(ICD10ORNI))&($D(ICD10ORNI("z"))) D  I ICDRG=989 S ICDFOUND=1 Q
"RTN","ICDDG010",44,0)
 . I $D(ICDF) Q
"RTN","ICDDG010",45,0)
 . NEW K  S K=$$ORNI(ICDORNI) I K=ICDOPCT S ICDRG=989,ICDFOUND=1 Q
"RTN","ICDDG010",46,0)
 ;
"RTN","ICDDG010",47,0)
 ;if number of non-extensive ORs+prostatics eqs # OR, 476
"RTN","ICDDG010",48,0)
 ;
"RTN","ICDDG010",49,0)
 I 'ICDMDCL,$D(ICD10ORNI("y"))&($D(ICDORNI)) D  I ICDRG=986 S ICDFOUND=1 Q
"RTN","ICDDG010",50,0)
 . N K S K=$$ORNI(ICDORNI) I K=ICDOPCT&(ICDNOR=ICDONR)  S ICDRG=986 S ICDFOUND=1 Q
"RTN","ICDDG010",51,0)
 I 'ICDMDCL,ICDNOR=ICDONR&(ICDOPCT>0) S ICDRG=983,ICDFOUND=1 Q
"RTN","ICDDG010",52,0)
 I ICDMDC=5,'$D(ICD10OR("O")) S ICDRTC=$S(ICDEXP="":5,1:"") S:ICDRTC'="" ICDRG=999 D:ICDRTC="" MI Q
"RTN","ICDDG010",53,0)
 I ICDMDC=19,ICDOCNT>0,$D(ICD10OR("O"))  S (ICDRG,ICDRGH)=876,ICDFOUND=1 Q
"RTN","ICDDG010",54,0)
 I ICDMDC=23,$D(ICD10OR("O"))!($D(ICD10ORNI("O")))  S ICDRG=941,ICDFOUND=1 Q
"RTN","ICDDG010",55,0)
 ;I ICDMDC=14 D ^ICDDRG14 I ICDRG]"" S ICDFOUND=1 Q
"RTN","ICDDG010",56,0)
 I ICDMDC=20 S ICDRTC=$S(ICDDMS="":7,1:"") I ICDDMS'=0 S ICDRG=$S(ICDDMS="":999,1:894),ICDFOUND=1 Q
"RTN","ICDDG010",57,0)
 I ICDMDC=22 S ICDRTC=$S(ICDTRS="":6,1:"") S:ICDRTC'="" ICDRG=999,ICDFOUND=1 D:ICDRTC="" CKBURN
"RTN","ICDDG010",58,0)
 ;I ICDMDC=15 S ICDRTC=$S(ICDEXP="":5,ICDTRS="":6,1:"") I ICDTRS'=0 S ICDRG=$S(ICDRTC'="":999,1:789),ICDFOUND=1 Q
"RTN","ICDDG010",59,0)
 ;
"RTN","ICDDG010",60,0)
 Q
"RTN","ICDDG010",61,0)
NEONATE   ; Neonatal Processing
"RTN","ICDDG010",62,0)
 N ICDOLD
"RTN","ICDDG010",63,0)
 S ICDOLD=29,X1=$S($G(DGADM):$G(DGADM),1:DT),X2=$G(DOB) I X1,X2 D ^%DTC S ICDOLD=X
"RTN","ICDDG010",64,0)
 I ICDOLD<29 S ICDMDC=15
"RTN","ICDDG010",65,0)
 E  Q
"RTN","ICDDG010",66,0)
 I ICDMDC=15 S ICDRTC=$S(ICDEXP="":5,ICDTRS="":6,1:"") I +ICDTRS'=0 D  S (ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",67,0)
 . S ICDRG=$S(ICDRTC'="":999,1:789) ;Transferred to another acute care facility
"RTN","ICDDG010",68,0)
 I ICDMDC'=15 Q
"RTN","ICDDG010",69,0)
 I ICDEXP S ICDRG=789,(ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",70,0)
 ;If no Procedure Codes entered or no DRGs found for Procedure Codes that were entered:
"RTN","ICDDG010",71,0)
 I 'ICDNOR!('$D(ICDODRG)) S ICDRG=$O(ICDPDRG(0)) X "I ICDMDC=15,$D(ICDSDRG),$O(ICDSDRG(0))<ICDRG D NEONATF^ICDDRG0" D  Q
"RTN","ICDDG010",72,0)
 . N X,X1,X2,%
"RTN","ICDDG010",73,0)
 . I ICDOLD<29 D NBCOMP Q
"RTN","ICDDG010",74,0)
 . I ICDRG<789!(ICDRG>795) Q
"RTN","ICDDG010",75,0)
 . I $O(ICDRG(795)) S ICDRG=$O(ICDRG(795)),(ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",76,0)
 . I 'ICDRG S ICDRG=999,ICDRTC=8
"RTN","ICDDG010",77,0)
 I AGE="",ICDMDC=3 S ICDRTC=3 S ICDRG=999,(ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",78,0)
 S ICDDRG=ICDRG,(ICDFOUND,ICDNODOD)=1
"RTN","ICDDG010",79,0)
 Q
"RTN","ICDDG010",80,0)
 ;
"RTN","ICDDG010",81,0)
NEONATF ;NEONATE - Continuation of xecute line
"RTN","ICDDG010",82,0)
 S ICDRG=$S($D(ICDPDRG(795)):795,$D(ICDPDRG(791)):791,1:$O(ICDSDRG(0)))
"RTN","ICDDG010",83,0)
 Q
"RTN","ICDDG010",84,0)
 ;
"RTN","ICDDG010",85,0)
NBCOMP ; check for complication related to Newborn
"RTN","ICDDG010",86,0)
 N ICDSDXCK,ICDN,ICDX,ICDPREM,ICDMJR,ICDIMM,ICDSIG
"RTN","ICDDG010",87,0)
 ;Check for Premature and Major Problem in PDX or SDX
"RTN","ICDDG010",88,0)
 ;ICDPREM 1=PREMATURE (ID="p")  ICDIMM 1=EXTREME IMMATURE (ID="E")  ICDMJR 1=MAJORPROBLEMS (ID="J")
"RTN","ICDDG010",89,0)
 S (ICDN,ICDPREM,ICDIMM,ICDMJR,ICDSIG)=0 F  S ICDN=$O(ICDDX(ICDN)) Q:'ICDN  D
"RTN","ICDDG010",90,0)
 .S:$D(ICD10PD("p"))!($D(ICD10SD("p"))) ICDPREM=1 S:$D(ICD10PD("J"))!($D(ICD10SD("J"))) ICDMJR=1
"RTN","ICDDG010",91,0)
 .S:$D(ICD10PD("E"))!($D(ICD10SD("E"))) ICDIMM=1 S:$D(ICD10PD("S"))!($D(ICD10SD("S"))) ICDSIG=1
"RTN","ICDDG010",92,0)
 I ICDSIG S ICDRG=794,(ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",93,0)
 I ICDIMM S ICDRG=790,(ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",94,0)
 I ICDPREM=1 S:ICDMJR ICDRG=791,(ICDFOUND,ICDNODOD)=1 S:'ICDMJR ICDRG=792,(ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",95,0)
 I 'ICDPREM S:ICDMJR ICDRG=793,(ICDFOUND,ICDNODOD)=1 S:'ICDMJR ICDRG=795,(ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",96,0)
 Q
"RTN","ICDDG010",97,0)
 ;
"RTN","ICDDG010",98,0)
SURGICAL ; Apply Surgical Hierarchy
"RTN","ICDDG010",99,0)
 N ICDJ,ICDSTOP,ICDDGIEN,ICDDRGT,ICDMIEN
"RTN","ICDDG010",100,0)
 S ICDDRG=0,ICDSTOP=0,ICDDA=$O(^ICDRS("B",ICDDATE_".1"),-1) I 'ICDDA Q
"RTN","ICDDG010",101,0)
 S ICDIEN=$O(^ICDRS("B",ICDDA,"")) I 'ICDIEN Q
"RTN","ICDDG010",102,0)
 S ICDMIEN=$O(^ICDRS(ICDIEN,1,"B",ICDMDC,"")) I 'ICDMIEN Q
"RTN","ICDDG010",103,0)
 F ICDJ=0:0 S ICDJ=$O(^ICDRS(ICDIEN,1,ICDMIEN,2,"C",ICDJ)) Q:ICDJ'>0!(ICDSTOP)  S ICDDGIEN=$O(^ICDRS(ICDIEN,1,ICDMIEN,2,"C",ICDJ,"")) I ICDDGIEN D
"RTN","ICDDG010",104,0)
 . S ICDDRGT=$P(^ICDRS(ICDIEN,1,ICDMIEN,2,ICDDGIEN,0),U,1) I $D(ICDODRG(ICDDRGT)) D
"RTN","ICDDG010",105,0)
 . . S ICDCCT=$$ICDRGCC(ICDDRGT,ICDDATE) I ICDCCT=ICDCC S ICDRG=ICDDRGT,ICDSTOP=1 Q
"RTN","ICDDG010",106,0)
 Q
"RTN","ICDDG010",107,0)
 ;
"RTN","ICDDG010",108,0)
ICDRGCC(DRG,CDT) ;Get CC/MCC flag from DRG
"RTN","ICDDG010",109,0)
 ; 
"RTN","ICDDG010",110,0)
 ; Input:
"RTN","ICDDG010",111,0)
 ;   DRG  DRG Number
"RTN","ICDDG010",112,0)
 ;   CDT                Effective Date
"RTN","ICDDG010",113,0)
 ;
"RTN","ICDDG010",114,0)
 ; Output: CC/MCC Flag 0-3
"RTN","ICDDG010",115,0)
 ;
"RTN","ICDDG010",116,0)
 N ICDCC,ICDIEN,ICDDA,ICDAIEN
"RTN","ICDDG010",117,0)
 S ICDCC=0,ICDIEN=$O(^ICD("B","DRG"_DRG,"")) I ICDIEN D
"RTN","ICDDG010",118,0)
 . S ICDDA=$O(^ICD(ICDIEN,2,"B",(CDT_".1")),-1) I ICDDA D
"RTN","ICDDG010",119,0)
 . . S ICDAIEN=$O(^ICD(ICDIEN,2,"B",ICDDA,"")) I ICDAIEN D
"RTN","ICDDG010",120,0)
 . . . S ICDCC=$P(^ICD(ICDIEN,2,ICDAIEN,0),U,4)
"RTN","ICDDG010",121,0)
 Q ICDCC
"RTN","ICDDG010",122,0)
 ;
"RTN","ICDDG010",123,0)
DEFAULT G:ICDMDC=15 GETMOR S (ICDRG,ICDRGH)=$O(ICDODRG(0)) G:ICDRG'>0 ENTER
"RTN","ICDDG010",124,0)
 D DODRG
"RTN","ICDDG010",125,0)
 G:ICDRG'>0 AGAIN
"RTN","ICDDG010",126,0)
 Q
"RTN","ICDDG010",127,0)
ENTER I 'ICDNOR,ICDORNR'=0,ICDMDC'=20,ICDMDC'=15 S ICDRG=983
"RTN","ICDDG010",128,0)
GETMOR S (ICDRG,ICDRGH)=$O(ICDPDRG(0)) S:ICDRG'>0 (ICDRG,ICDRGH)=998
"RTN","ICDDG010",129,0)
CKDRG D DODRG
"RTN","ICDDG010",130,0)
 Q
"RTN","ICDDG010",131,0)
 ;I ICDRG="" K ICDPDRG(ICDRGH) G GETMOR
"RTN","ICDDG010",132,0)
DODRG ;Go to DRG file and retrieve table entry to use if defined
"RTN","ICDDG010",133,0)
 Q:ICDNODOD=1  ;Actual DRG was found prior Ex: Neonate
"RTN","ICDDG010",134,0)
 N ICDMCV,ICDMCV1,ICDMCV2
"RTN","ICDDG010",135,0)
 N DRGFY,ICDREF S (DRGFY,ICDREF)=""
"RTN","ICDDG010",136,0)
 I ICDRG S DRGFY=$O(^ICD(ICDRG,2,"B",$P(+$G(ICDDATE),".")_.01),-1)
"RTN","ICDDG010",137,0)
 I 'DRGFY S DRGFY=ICDDATE ;default to current fiscal year
"RTN","ICDDG010",138,0)
 S ICDREF=$O(^ICD(+ICDRG,2,"B",+DRGFY,ICDREF))
"RTN","ICDDG010",139,0)
 I ICDREF'="" D
"RTN","ICDDG010",140,0)
 . S ICDREF=$P($G(^ICD(+ICDRG,2,ICDREF,0)),U,3)
"RTN","ICDDG010",141,0)
 . S ICDREF="DRG"_ICDRG_"^"_ICDREF D @ICDREF K ICDREF
"RTN","ICDDG010",142,0)
 Q
"RTN","ICDDG010",143,0)
ORNI(X) ;
"RTN","ICDDG010",144,0)
 N I,K
"RTN","ICDDG010",145,0)
 S K=0 F I=1:1:$L(ICDORNI) I $E(ICDORNI,I,I)="z"!($E(ICDORNI,I,I)="y") S K=K+1
"RTN","ICDDG010",146,0)
 Q K
"RTN","ICDDG010",147,0)
END ;
"RTN","ICDDG010",148,0)
 ; - MDC24 PROCESSING
"RTN","ICDDG010",149,0)
 ; - MDC25 PROCESSING
"RTN","ICDDG010",150,0)
 ; - PREMDC PROCESSING
"RTN","ICDDG010",151,0)
 ; - MDC4 PROCESSING
"RTN","ICDDG010",152,0)
 ; - CHECK FOR MCC/CC
"RTN","ICDDG010",153,0)
 ;
"RTN","ICDDG010",154,0)
 ;MDC24 PROCESSING
"RTN","ICDDG010",155,0)
 D:ICDP24'=""!($D(ICDS24)) CKMST^ICDDRGX1 S ICDDRG=ICDRG
"RTN","ICDDG010",156,0)
 I ICDRG=976!(ICDRG=977)!(ICDRG=24&($G(ICDOR)="")) S ICDRG=$P($G(ICDPDRG),U,2) I ICDRG=24 S ICDRG=99
"RTN","ICDDG010",157,0)
 ;MDC25 PROCESSING
"RTN","ICDDG010",158,0)
 D:$G(ICDP25)=1!(($G(ICDP25)>1)&($D(ICDS25(1)))) CKHIV^ICDDRGX1 S ICDDRG=ICDRG
"RTN","ICDDG010",159,0)
 ;PRE-MDC PROCESSING
"RTN","ICDDG010",160,0)
 ;I $D(ICDNMDC(1)) I ICDNMDC(1)="" D CKNMDC^ICDDRGX1 S ICDDRG=ICDRG K ICDNMDC
"RTN","ICDDG010",161,0)
 S ICDPREQ=0 D PREMDC
"RTN","ICDDG010",162,0)
 Q:ICDPREQ
"RTN","ICDDG010",163,0)
 ;PREMDC may have found an actual DRG and does not need to Do DODRG to apply CC/MCC rules, so ICDFOUND=1 and ICDNODOD=1
"RTN","ICDDG010",164,0)
 ;MDC4 PROCESSING
"RTN","ICDDG010",165,0)
 I ICDRG=983 D CHKMDC4^ICDDRGX1
"RTN","ICDDG010",166,0)
 ; CHECK FOR MCC/CC
"RTN","ICDDG010",167,0)
 D:'ICDNODOD DODRG ;check for MCC/CC
"RTN","ICDDG010",168,0)
 S:ICDRTC="" ICDRTC=0
"RTN","ICDDG010",169,0)
 S ICDTMP=$$DRG^ICDGTDRG(ICDRG,ICDDATE) I '$P(ICDTMP,U,14) S ICDRG=999
"RTN","ICDDG010",170,0)
 Q
"RTN","ICDDG010",171,0)
 G KILL^ICDDRG
"RTN","ICDDG010",172,0)
AGAIN G:'$D(ICDODRG) ENTER
"RTN","ICDDG010",173,0)
 K ICDODRG(ICDRGH) I $O(ICDODRG(ICDRGH))'>0 K ICDODRG Q
"RTN","ICDDG010",174,0)
 S ICDRG=$O(ICDODRG(ICDRGH))
"RTN","ICDDG010",175,0)
 Q
"RTN","ICDDG010",176,0)
 ;
"RTN","ICDDG010",177,0)
CKBURN ; MDC22 - Burns (extensive, full thickness, or non-extensive)
"RTN","ICDDG010",178,0)
 D
"RTN","ICDDG010",179,0)
 . I $D(ICD10PD("*"))!($D(ICD10SD("*"))) S ICDRG=$S($D(ICD10OR("k")):927,1:933) Q
"RTN","ICDDG010",180,0)
 . I $D(ICD10PD("b"))!($D(ICD10SD("b"))) D FTBURN Q
"RTN","ICDDG010",181,0)
 .  S ICDRG=$S(ICDCC!($D(ICD10PD("T")))!($D(ICD10SD("T"))):935,1:935)
"RTN","ICDDG010",182,0)
 Q
"RTN","ICDDG010",183,0)
 ; FTBURN ; full thickness burn check
"RTN","ICDDG010",184,0)
 I $D(ICD10SD("j"))!($D(ICD10OR("k"))) D
"RTN","ICDDG010",185,0)
 . I ICDCC!($D(ICD10PD("T")))!($D(ICD10SD("T")))  S ICDRG=928
"RTN","ICDDG010",186,0)
 . E  S ICDRG=929
"RTN","ICDDG010",187,0)
 E  D
"RTN","ICDDG010",188,0)
 . I ICDCC!($D(ICD10PD("T")))!($D(ICD10SD("T")))  S ICDRG=934
"RTN","ICDDG010",189,0)
 . E  S ICDRG=934
"RTN","ICDDG010",190,0)
 Q
"RTN","ICDDG010",191,0)
 ;
"RTN","ICDDG010",192,0)
FTBURN ; full thickness burn check
"RTN","ICDDG010",193,0)
 I $D(ICD10SD("j"))!($D(ICD10OR("k"))) D
"RTN","ICDDG010",194,0)
 . I ICDCC!($D(ICD10PD("T")))!($D(ICD10SD("T"))) S ICDRG=928
"RTN","ICDDG010",195,0)
 . E  S ICDRG=929
"RTN","ICDDG010",196,0)
 E  D
"RTN","ICDDG010",197,0)
 . I ICDCC!($D(ICD10PD("T")))!($D(ICD10SD("T"))) S ICDRG=934
"RTN","ICDDG010",198,0)
 . E  S ICDRG=934
"RTN","ICDDG010",199,0)
 Q
"RTN","ICDDG010",200,0)
 ;
"RTN","ICDDG010",201,0)
MI ;
"RTN","ICDDG010",202,0)
 ; if PTCA and not a bypass
"RTN","ICDDG010",203,0)
 I $D(ICD10OR("1"))!($D(ICDOP(" 37.90"))) I '$D(ICD10OR("b"))&('$D(ICD10OR("6"))) D CMS516^ICDTBL2 Q
"RTN","ICDDG010",204,0)
 I $D(ICDPD("A")) D EN1^ICDDRG5 I ICDCC3 S ICDRG=$O(ICDODRG(0)) D DODRG Q
"RTN","ICDDG010",205,0)
 I ($D(ICD10PD("A"))&($D(ICD10PD("I"))))!($D(ICD10SD("A"))&($D(ICD10SD("I")))) D  Q
"RTN","ICDDG010",206,0)
 . S ICDRG=$S($S($D(ICDEXP):ICDEXP,1:0):285,$D(ICD10PD("V"))!($D(ICD10SD("V"))):280,1:282)
"RTN","ICDDG010",207,0)
 I $D(ICDOP(" 37.26"))&($D(ICDOP(" 39.61"))) S ICDRG=230 Q
"RTN","ICDDG010",208,0)
 I $D(ICD10OR("H"))  S ICDRG=$S($D(ICD10PD("X"))!($D(ICD10SD("X"))):286,1:287) Q
"RTN","ICDDG010",209,0)
 K ICDPDRG(286),ICDPDRG(287)
"RTN","ICDDG010",210,0)
 I $D(ICD10OR("p")) S ICDRG=$O(ICDODRG(0)) D DODRG Q
"RTN","ICDDG010",211,0)
 I $D(ICD10OR("F")) S ICDRG=$O(ICDODRG(0)) D DODRG Q
"RTN","ICDDG010",212,0)
 E  K ICDPDRG(280),ICDPDRG(281),ICDPDRG(282) S ICDRG=$O(ICDPDRG(0)) D DODRG Q
"RTN","ICDDG010",213,0)
 Q
"RTN","ICDDG010",214,0)
 ;
"RTN","ICDDG010",215,0)
PREMDC ; Check if any Surgical Procedure Code in Pre-MDC and, if so, use that DRG group
"RTN","ICDDG010",216,0)
 N ICDTMP,ICDPC,ICDX,ICDI,ICDCCT,ICDRGT
"RTN","ICDDG010",217,0)
 S ICDPC="",ICDRGT=999 F  S ICDPC=$O(ICDPRC(ICDPC)) Q:ICDPC=""  I $D(ICD10OR(80)) S ICDTMP=$$GETDRG^ICDEX(80.1,ICDPRC(ICDPC),ICDDATE,98) D
"RTN","ICDDG010",218,0)
 . I $P(ICDTMP,";",1)'=-1 S ICDX=$P(ICDTMP,";",1) F ICDI=1:1 Q:$P(ICDX,U,ICDI)=""  D
"RTN","ICDDG010",219,0)
 . . S ICDCCT=$$ICDRGCC^ICDRGAPI($P(ICDX,U,ICDI),ICDDATE) I ICDCCT=ICDMCC!(ICDCCT=3&(ICDMCC=1!(ICDMCC=2))) S:$P(ICDX,U,1)<ICDRGT ICDRGT=$P(ICDX,U,ICDI) Q
"RTN","ICDDG010",220,0)
 D
"RTN","ICDDG010",221,0)
 . I $D(ICD10OR("q")) S ICDRGT=$S(ICDMCC=2:1,1:2) Q  ;Heart Transplant
"RTN","ICDDG010",222,0)
 . I $D(ICD10OR("r")) S ICDRGT=7 Q  ;Lung Transplant
"RTN","ICDDG010",223,0)
 . I $D(ICD10OR(245)) S ICDRGT=8 Q  ;Simultaneous Pancreas/Kidney Transplant
"RTN","ICDDG010",224,0)
 . I $D(ICD10OR(116)) S ICDRGT=10 Q  ;Pancreas Transplant
"RTN","ICDDG010",225,0)
 . ;Next Block for DRGs 3 and 4: PreMDC ECMO/Tracheostomy/MV96+/Major OR/PDX Except Face,Mount not DRG11,12 or 13
"RTN","ICDDG010",226,0)
 . I $D(ICD10OR(44)) S ICDRGT=3 Q  ;ECMO
"RTN","ICDDG010",227,0)
 . I $D(ICD10OR(150)) S ICDRGT=$S($D(ICD10OR(81)):3,1:4) Q  ;Tracheostomy
"RTN","ICDDG010",228,0)
 . ;End of ECMO etc..
"RTN","ICDDG010",229,0)
 . I ($D(ICD10OR(68))&(ICDMCC=2))!($D(ICD10OR(59))) S ICDRGT=5 Q  ;(Liver Transplant w/MCC) OR (Intestinal Implant)
"RTN","ICDDG010",230,0)
 . I $D(ICD10OR(68)),ICDMCC=0 S ICDRGT=6 Q  ;Intestinal implant
"RTN","ICDDG010",231,0)
 . I $D(ICD10OR(151))!($D(ICD10OR(66))) S ICDRGT=$S(ICDMCC=2:11,ICDMCC=1:12,1:13) Q  ;151=Tracheostomy for Face, Mouth and Neck Diagnoses  66=Laryngectomy
"RTN","ICDDG010",232,0)
 . I $D(ICD10OR(14)) S ICDRGT=14 Q  ;Allogeneic Bone Marrow Transplant
"RTN","ICDDG010",233,0)
 . I $D(ICD10OR(22)) S ICDRGT=$S(ICDMCC>0:16,1:17) Q  ;Autologous Bone Marrow Transplant
"RTN","ICDDG010",234,0)
 I ICDRGT'=999 S ICDRG=ICDRGT,(ICDFOUND,ICDNODOD,ICDPREQ)=1
"RTN","ICDDG010",235,0)
 Q
"RTN","ICDDG010",236,0)
 ;
"RTN","ICDDG010",237,0)
PDX11T13() ;Is PDX assigned to DRG 11, 12 or 12
"RTN","ICDDG010",238,0)
 I $D(ICDPDRG(11))!($D(ICD10PDRG(12)))!($D(ICD10PDRG(13))) Q 1
"RTN","ICDDG010",239,0)
 Q 0
"RTN","ICDDG010",240,0)
 ;
"RTN","ICDDRGX")
0^8^B28133255^B28133843
"RTN","ICDDRGX",1,0)
ICDDRGX ;ALB/EG/MRY/ADL/KUM/JDG - GROUPER PROCESS ;08/04/2015
"RTN","ICDDRGX",2,0)
 ;;18.0;DRG Grouper;**1,2,5,7,10,14,20,24,27,31,64,82**;Oct 20, 2000;Build 21
"RTN","ICDDRGX",3,0)
 ;
"RTN","ICDDRGX",4,0)
CKHIV ;MDC25 grouping
"RTN","ICDDRGX",5,0)
 N ICDI
"RTN","ICDDRGX",6,0)
 I ICDDATE>3070930.9 G CKHIV^ICDDRGXM ;MS-DRG
"RTN","ICDDRGX",7,0)
 ;Q:ICDP25=""
"RTN","ICDDRGX",8,0)
 I ICDPD'["h"&(ICDSD'["h") Q
"RTN","ICDDRGX",9,0)
 S ICDRG=$S(ICDOR["x":488,ICDPD["i"&($D(ICDS25(1))):490,1:ICDRG)
"RTN","ICDDRGX",10,0)
 S ICDGH=$S("488^489^490"[ICDRG:1,1:0),ICDORNI=$S(ICDOCNT>0:ICDORNI,1:0),ICDORNA=$F(ICDORNI,"O",$F(ICDORNI,"O"))
"RTN","ICDDRGX",11,0)
 S:ICDORNI="" ICDORNI=ICDOR
"RTN","ICDDRGX",12,0)
 S ICDRG=$S(ICDP25=1&(ICDORNA>0):488,1:ICDRG) I 'ICDGH&(ICDRG=488) Q
"RTN","ICDDRGX",13,0)
 S:(ICDOCNT>0) ICDRG=$S(ICDP25>1&(ICDORNA>0)&($D(ICDS25(1))):488,1:ICDRG) I 'ICDGH&(ICDRG=488) Q
"RTN","ICDDRGX",14,0)
 I ICDOPCT>0 D  I ICDRG=488 Q
"RTN","ICDDRGX",15,0)
 .;count the non-extensive "z" vs the "O"
"RTN","ICDDRGX",16,0)
 .N K1,K2,I
"RTN","ICDDRGX",17,0)
 .S (K1,K2)=0
"RTN","ICDDRGX",18,0)
 .F I=1:1:$L(ICDORNI) S:$E(ICDORNI,I,I)="z" K1=K1+1 S:$E(ICDORNI,I,I)="O" K2=K2+1
"RTN","ICDDRGX",19,0)
 .I ICDP25=1!(ICDP25>1&($D(ICDS25)>0)) D
"RTN","ICDDRGX",20,0)
 ..I K1<K2&(K1<ICDOPCT) D
"RTN","ICDDRGX",21,0)
 ...S ICDRG=488 Q
"RTN","ICDDRGX",22,0)
 ..I ICDOPCT=1&(ICDORNI'["z") D
"RTN","ICDDRGX",23,0)
 ...S ICDRG=488 Q
"RTN","ICDDRGX",24,0)
 S ICDRG=$S(ICDP25=1&('$D(ICDS25))&('$$EXIST^ICDEX(ICDDX(1),30)):490,1:ICDRG) I 'ICDGH&(ICDRG=490) Q
"RTN","ICDDRGX",25,0)
 S ICDRG=$S(ICDP25=1&($D(ICDS25(2))):489,ICDP25=1&($D(ICDS25(3))):490,1:ICDRG) I 'ICDGH&((ICDRG=489)!(ICDRG=490)) Q
"RTN","ICDDRGX",26,0)
 S ICDRG=$S(ICDP25=2&($D(ICDS25(1))):489,ICDP25=3&($D(ICDS25(1))):490,1:ICDRG) I 'ICDGH&((ICDRG=489)!(ICDRG=490)) Q
"RTN","ICDDRGX",27,0)
 S ICDRG=$S((ICDP25&(ICDOCNT=0)&('$D(ICDS25))):490,1:ICDRG) I 'ICDGH&(ICDRG=490) Q
"RTN","ICDDRGX",28,0)
 S:(ICDRG=488)!(ICDRG=489)!(ICDRG=490) ICDRTC=0
"RTN","ICDDRGX",29,0)
 K ICDGH,ICDP25,ICDS25,ICDORNA Q
"RTN","ICDDRGX",30,0)
CKMST ;MDC24 grouping; MS-DRG additions
"RTN","ICDDRGX",31,0)
 S ICDAJ=0 F ICDS24K=1:1 S ICDAJ=$O(ICDS24(ICDAJ)) Q:ICDAJ=""
"RTN","ICDDRGX",32,0)
 S ICDS24K=ICDS24K-1,ICDS24L=0 F ICDI=1:1:8 S:$D(ICDS24(ICDI))&(ICDI'=ICDP24) ICDS24L=$S($D(ICDS24(ICDI)):1,1:0)
"RTN","ICDDRGX",33,0)
 I ICDOR["u" S ICDS24K=ICDS24K+1
"RTN","ICDDRGX",34,0)
 G:((ICDP24=0)&(ICDS24K<2))!((ICDP24>0)&('ICDS24L)) CKMSTE
"RTN","ICDDRGX",35,0)
 N CKMST S CKMST=0
"RTN","ICDDRGX",36,0)
 I ICDDATE>3070930.9 D  Q:CKMST  ;MS-DRG
"RTN","ICDDRGX",37,0)
 . S ICDRG=$S(ICDP24=0&(ICDS24K>1)&($D(ICDO24(1))):955,ICDP24>0&($D(ICDO24(1)))&(ICDS24L):955,1:ICDRG) I ICDRG=955 D CKMSTE S CKMST=1 Q
"RTN","ICDDRGX",38,0)
 . S:ICDRG'=955 ICDRG=$S(ICDP24=0&(ICDS24K>1)&($D(ICDO24(2))):956,ICDP24>0&($D(ICDO24(2)))&(ICDS24L):956,1:ICDRG) I ICDRG=956 D CKMSTE S CKMST=1 Q
"RTN","ICDDRGX",39,0)
 . S:ICDRG'=956 ICDRG=$S(ICDP24=0&(ICDS24K>1)&($D(ICDO24(3))):959,ICDP24>0&($D(ICDO24(3)))&(ICDS24L):959,1:ICDRG) I ICDRG=959 D CKMSTE S CKMST=1 Q
"RTN","ICDDRGX",40,0)
 . S ICDRG=$S(ICDP24=0&(ICDS24K>1):965,ICDP24>0&ICDS24L:965,1:ICDRG)
"RTN","ICDDRGX",41,0)
 . S:(ICDRG>954)&(ICDRG<966) ICDRTC=0
"RTN","ICDDRGX",42,0)
 E  D  Q:CKMST  ;CMS-DRG
"RTN","ICDDRGX",43,0)
 . S ICDRG=$S(ICDP24=0&(ICDS24K>1)&($D(ICDO24(1))):483,ICDP24>0&($D(ICDO24(1)))&(ICDS24L):483,1:ICDRG) I ICDRG=483 D CKMSTE S CKMST=1 Q
"RTN","ICDDRGX",44,0)
 . S:ICDRG'=483 ICDRG=$S(ICDP24=0&(ICDS24K>1)&($D(ICDO24(2))):485,ICDP24>0&($D(ICDO24(2)))&(ICDS24L):485,1:ICDRG) I ICDRG=485 D CKMSTE S CKMST=1 Q
"RTN","ICDDRGX",45,0)
 . S:ICDRG'=485 ICDRG=$S(ICDP24=0&(ICDS24K>1)&($D(ICDO24(3))):486,ICDP24>0&($D(ICDO24(3)))&(ICDS24L):486,1:ICDRG) I ICDRG=486 D CKMSTE S CKMST=1 Q
"RTN","ICDDRGX",46,0)
 . S ICDRG=$S(ICDP24=0&(ICDS24K>1):487,ICDP24>0&ICDS24L:487,1:ICDRG)
"RTN","ICDDRGX",47,0)
 . S:(ICDRG>482)&(ICDRG<488) ICDRTC=0
"RTN","ICDDRGX",48,0)
CKMSTE K ICDAJ,ICDP24,ICDS24,ICDO24,ICDS24K,ICDO24,ICDS24L
"RTN","ICDDRGX",49,0)
 Q
"RTN","ICDDRGX",50,0)
CKNMDC ;non MDC drg's
"RTN","ICDDRGX",51,0)
 I ICDDATE>3070930.9 G CKNMDC^ICDDRGXM ;MS-DRG
"RTN","ICDDRGX",52,0)
 S:(ICDRG>479)&(ICDRG<483) ICDRG=470
"RTN","ICDDRGX",53,0)
 ; ICD*18*1 - reorder drg 103 higher than all Pre-MDCs 480-83 & 495
"RTN","ICDDRGX",54,0)
 I ICDRG=103 S ICDRTC=0 Q
"RTN","ICDDRGX",55,0)
 S ICDCDSY=$S(ICDDATE'<$$IMPDATE^LEXU("10D"):30,1:1)
"RTN","ICDDRGX",56,0)
 ;use FY logic to resolve DRG if no FY defined user current FY
"RTN","ICDDRGX",57,0)
 N ICDDXFY S ICDDXFY=""
"RTN","ICDDRGX",58,0)
 I ICDDATE>3040930.9 D  I ICDRG=541!(ICDRG=542) S ICDRTC=0 Q  ;Use DRG FY 05 logic
"RTN","ICDDRGX",59,0)
 .;S ICDRG=$S($D(ICDOP(" 31.1"))!($D(ICDOP(" 31.21")))!($D(ICDOP(" 31.29")))&(($P($$ICDDX^ICDCODE(ICDDX(1),ICDDATE),"^",3)'["Y")!($D(ICDOP(" 96.72")))):541,1:ICDRG)
"RTN","ICDDRGX",60,0)
 .;I ICDRG=541&(($P($$ICDDX^ICDCODE(ICDDX(1),ICDDATE),"^",3))["Y") S ICDRG=542 S ICDRTC=0
"RTN","ICDDRGX",61,0)
 .I $D(ICDOP(" 39.65")) S ICDRG=541 Q
"RTN","ICDDRGX",62,0)
 .I $D(ICDOP(" 31.1"))!($D(ICDOP(" 31.21")))!($D(ICDOP(" 31.29"))) I $TR($P($$ICDDX^ICDEX(ICDDX(1),ICDDATE,ICDCDSY,"I"),"^",3),";","")'["Y"!(($D(ICDOP(" 96.72")))) S ICDRG=542
"RTN","ICDDRGX",63,0)
 .I $D(ICDOP(" 31.1"))!($D(ICDOP(" 31.21")))!($D(ICDOP(" 31.29"))) I $TR($P($$ICDDX^ICDEX(ICDDX(1),ICDDATE,ICDCDSY,"I"),"^",3),";","")'["Y"!(($D(ICDOP(" 96.72")))) I ICDOR["O"&(ICDOR'["z")&(ICDOR'["y") S ICDRG=541
"RTN","ICDDRGX",64,0)
 I ICDDATE<3041001 D  Q:ICDRG=483  ;Use DRG FY 04 logic
"RTN","ICDDRGX",65,0)
 .S ICDRG=$S($D(ICDOP(" 31.1"))!($D(ICDOP(" 31.21")))!($D(ICDOP(" 31.29")))&(($TR($P($$ICDDX^ICDEX(ICDDX(1),ICDDATE,ICDCDSY,"I"),"^",3),";","")'["Y")!($D(ICDOP(" 96.72")))):483,1:ICDRG) I ICDRG=483 S ICDRTC=0
"RTN","ICDDRGX",66,0)
 S ICDRG=$S(ICDOR["l":480,1:ICDRG) I ICDRG=480 S ICDRTC=0 Q
"RTN","ICDDRGX",67,0)
 I ICDRG=512!(ICDRG=513) S ICDRTC=0 Q
"RTN","ICDDRGX",68,0)
 S ICDRG=$S(ICDOR["r":495,1:ICDRG) I ICDRG=495 S ICDRTC=0 Q  ;check for lung tx
"RTN","ICDDRGX",69,0)
 S ICDRG=$S(ICDOR["q":103,1:ICDRG) I ICDRG=103 S ICDRTC=0 Q  ;check for heart tx
"RTN","ICDDRGX",70,0)
 S ICDRG=$S(ICDOR["B":481,1:ICDRG) I ICDRG=481 S ICDRTC=0 Q
"RTN","ICDDRGX",71,0)
 S ICDRG=$S($D(ICDOP(" 30.3"))!$D(ICDOP(" 30.4")):482,1:ICDRG) I ICDRG=482 S ICDRTC=0 Q
"RTN","ICDDRGX",72,0)
 S ICDRG=$S(ICDOR["t"&($TR($P($$ICDDX^ICDEX(ICDDX(1),ICDDATE,ICDCDSY,"I"),"^",3),";","")["Y"):482,1:ICDRG) I ICDRG=482 S ICDRTC=0 Q
"RTN","ICDDRGX",73,0)
 Q
"RTN","ICDDRGX",74,0)
 ;
"RTN","ICDDRGX",75,0)
 ;
"RTN","ICDDRGX",76,0)
CHKMDC4 ;MDC 4 drg's
"RTN","ICDDRGX",77,0)
 I ICDDATE>3070930.9 D  ;MS-DRG
"RTN","ICDDRGX",78,0)
 . I (ICDMDC=4!(ICDMDC=98)),(ICDOR["f") S ICDRG=168
"RTN","ICDDRGX",79,0)
 . I ICDDRG=983,$G(ICDMDC)=5,$D(ICDOP(" 86.06")) S ICDRG=264
"RTN","ICDDRGX",80,0)
 . I ICDDRG=983,$G(ICDMDC)=5,$D(ICDOP(" 92.27")),ICDNOR=1 S ICDRG=264 ;ICD*18*5
"RTN","ICDDRGX",81,0)
 E  D  ;CMS-DRG
"RTN","ICDDRGX",82,0)
 . I (ICDMDC=4!(ICDMDC=98)),(ICDOR["f") S ICDRG=76
"RTN","ICDDRGX",83,0)
 . I ICDDRG=468,$G(ICDMDC)=5,$D(ICDOP(" 86.06")) S ICDRG=120
"RTN","ICDDRGX",84,0)
 . I ICDDRG=468,$G(ICDMDC)=5,$D(ICDOP(" 92.27")),ICDNOR=1 S ICDRG=120 ;ICD*18*5
"RTN","ICDDRGX",85,0)
 Q
"RTN","ICDDRGX2")
0^9^B103632057^B156836573
"RTN","ICDDRGX2",1,0)
ICDDRGX2 ;MKN - GROUPER PROCESS ;06/04/12 3:45pm
"RTN","ICDDRGX2",2,0)
 ;;18.0;DRG Grouper;**64,82**;Oct 20, 2000;Build 21
"RTN","ICDDRGX2",3,0)
 ;
"RTN","ICDDRGX2",4,0)
VARIABLS ;Apply Variables for MDC 1-22
"RTN","ICDDRGX2",5,0)
 ;
"RTN","ICDDRGX2",6,0)
 N ICDFI,ICDRGT,ICDN,ICDX,ICDREL
"RTN","ICDDRGX2",7,0)
 ;Check if Procedure Codes related to Primary DX
"RTN","ICDDRGX2",8,0)
 S (ICDFI,ICDREL)=0,ICDN="" F  S ICDN=$O(ICDPRC(ICDN)) Q:ICDN=""  S ICDX=$$MDCT^ICDEX(ICDPRC(ICDN),ICDDATE,.ICDMDC) S:ICDX=1 ICDREL=1
"RTN","ICDDRGX2",9,0)
 I $D(ICD10OR(151)) S ICDRG=$S(ICDMCC=2:11,ICDMCC=1:12,1:13),ICDFI=1 G EXIT ;151=Tracheostomy for Face, Mouth and Neck Diagnoses
"RTN","ICDDRGX2",10,0)
 I $D(ICD10OR(60)) S ICDRG=$S(ICDMCC=2:20,ICDMCC=1:21,1:22),ICDFI=1 G EXIT ;60=Intracranial Vascualr Procedure
"RTN","ICDDRGX2",11,0)
 I ICDMDC=1 D
"RTN","ICDDRGX2",12,0)
 . I $D(ICD10OR("Q")) D  Q:ICDFI  ;Craniotomy
"RTN","ICDDRGX2",13,0)
 . . I $D(ICD10OR("C")) S ICDRG=23,ICDFI=1 Q  ;C=Chemotherapy Implant
"RTN","ICDDRGX2",14,0)
 . . I $D(ICD10OR(77))!($D(ICD10PD(13))) D  Q  ;77=Major Device Implant or PDX of Acute Complex CNS
"RTN","ICDDRGX2",15,0)
 . . . S ICDRG=$S(ICDMCC=2:23,1:24),ICDFI=1 Q
"RTN","ICDDRGX2",16,0)
 . . I '($D(ICD10OR(77))!($D(ICD10PD(13)))) D  Q
"RTN","ICDDRGX2",17,0)
 . . . S ICDRG=$S(ICDMCC=2:25,ICDMCC=1:26,1:27),ICDFI=1 Q
"RTN","ICDDRGX2",18,0)
 . I $D(ICD10OR(261)) D  Q  ;Spinal Procedures
"RTN","ICDDRGX2",19,0)
 . . I ICDMCC>0 S ICDRG=$S(ICDMCC=2:28,1:29),ICDFI=1 Q
"RTN","ICDDRGX2",20,0)
 . . S ICDRG=$S($D(ICD10OR(143)):29,1:30),ICDFI=1 Q  ;143=Spinal NeuroStimulators
"RTN","ICDDRGX2",21,0)
 . I $D(ICD10OR(164)) S ICDRG=$S(ICDMCC=2:31,ICDMCC=1:32,1:33),ICDFI=1 Q  ;164=Ventricualr Shunt Procedures
"RTN","ICDDRGX2",22,0)
 . I $D(ICD10OR(33)) S ICDRG=$S(ICDMCC=2:34,ICDMCC=1:35,1:36),ICDFI=1 Q  ;33=Carotid Artery Stent Procedures
"RTN","ICDDRGX2",23,0)
 . I $D(ICD10OR(174)) S ICDRG=$S(ICDMCC=2:37,ICDMCC=1:38,1:39),ICDFI=1 Q  ;Extracranial Procedures
"RTN","ICDDRGX2",24,0)
 . I $D(ICD10OR(239)) D  Q  ;239=Peripheral and Cranial Nerve and Other Nervous System Procedures
"RTN","ICDDRGX2",25,0)
 . . I ICDMCC>0 S ICDRG=$S(ICDMCC=2:40,1:41),ICDFI=1 Q
"RTN","ICDDRGX2",26,0)
 . . I $D(ICD10OR(123)) S ICDRG=41,ICDFI=1 Q  ;123=Peripheral Neurostimulator Combinations
"RTN","ICDDRGX2",27,0)
 . . S ICDRG=42,ICDFI=1 Q
"RTN","ICDDRGX2",28,0)
 . I $D(ICD10OR(193)) S ICDRG=$S(ICDMCC=2:61,ICDMCC=1:62,1:63),ICDFI=1 Q  ;193=Acute Ischemic Stroke with Use of Thrombolytic Agent
"RTN","ICDDRGX2",29,0)
 . I $D(ICD10PD(86)) D  Q
"RTN","ICDDRGX2",30,0)
 . . I $D(ICD10SD(307)) S ICDRG=65,ICDFI=1 Q  ;307=TPA WITHIN 24 HOURS
"RTN","ICDDRGX2",31,0)
 . . S ICDRG=$S(ICDMCC=2:64,ICDMCC=1:65,1:66),ICDFI=1 Q  ;86=Intracranial Hemorrhage or Cerebral Infarction
"RTN","ICDDRGX2",32,0)
 . I $D(ICD10PD(310)) S ICDRG=$S(ICDMCC=2:82,ICDMCC=1:83,1:84),ICDFI=1 Q  ;310=Traumatic Stupor and Coma, Coma > 1 Hour
"RTN","ICDDRGX2",33,0)
 . I $D(ICD10PD(309)) S ICDRG=$S(ICDMCC=2:85,ICDMCC=1:86,1:87),ICDFI=1 Q  ;309=Traumatic Stupor and Coma, Coma < 1 Hour
"RTN","ICDDRGX2",34,0)
 . I $D(ICD10PD(43)) S ICDRG=$S(ICDMCC=2:88,ICDMCC=1:89,1:90),ICDFI=1 Q  ;43=Concussion
"RTN","ICDDRGX2",35,0)
 . I $D(ICD10PD(155)) S ICDRG=$S(ICDMCC=2:91,ICDMCC=1:92,1:93),ICDFI=1 Q  ;155=Other Disorders of Nervous System
"RTN","ICDDRGX2",36,0)
 . I $D(ICD10PD(234)) S ICDRG=$S(ICDMCC=2:94,ICDMCC=1:95,1:96),ICDFI=1 Q  ;234=Bacterial and Tuberculous Infections of Nervous System
"RTN","ICDDRGX2",37,0)
 . I $D(ICD10PD(276)) S ICDRG=$S(ICDMCC=2:97,ICDMCC=1:98,1:99),ICDFI=1 Q  ;276=Non-Bacterial Infections of Nervous System Except Viral Meningitis
"RTN","ICDDRGX2",38,0)
 . I $D(ICD10PD(188)) S ICDRG=$S(ICDMCC=2:100,1:101),ICDFI=1 Q  ;188=Seizures
"RTN","ICDDRGX2",39,0)
 . I $D(ICD10PD(74)) S ICDRG=$S(ICDMCC=2:102,1:103),ICDFI=1 Q  ;74=Headaches
"RTN","ICDDRGX2",40,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",41,0)
 I ICDMDC=2 D
"RTN","ICDDRGX2",42,0)
 . I $D(ICD10OR(99)) S ICDRG=$S(ICDMCC=2:113,1:114),ICDFI=1 Q  ;Orbital Procedures
"RTN","ICDDRGX2",43,0)
 . I $D(ICD10OR(46)) S ICDRG=115,ICDFI=1 Q  ;Extraocular Procedures
"RTN","ICDDRGX2",44,0)
 . I $D(ICD10OR(61)) S ICDRG=$S(ICDMCC=2:116,1:117),ICDFI=1 Q  ;Intraocular Procedures
"RTN","ICDDRGX2",45,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",46,0)
 I ICDMDC=3,$D(ICD10OR(53)) D  ;53=Head and Neck procedures
"RTN","ICDDRGX2",47,0)
 . I $D(ICD10OR(77)) S ICDRG=129,ICDFI=1 Q  ;77=Major Device Implant
"RTN","ICDDRGX2",48,0)
 . S ICDRG=$S(ICDMCC>0:129,1:130),ICDFI=1 Q
"RTN","ICDDRGX2",49,0)
 . I $D(ICD10OR(207)) S ICDRG=$S(ICDMCC>0:131,1:132),ICDFI=1 Q  ;207=Cranial/Facial Procedures
"RTN","ICDDRGX2",50,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",51,0)
 I $D(ICD10OR(76)) S ICDRG=$S(ICDMCC=2:163,ICDMCC=1:164,1:165),ICDFI=1 Q  ;76=Major Chest Proc
"RTN","ICDDRGX2",52,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",53,0)
 I ICDMDC=4 D
"RTN","ICDDRGX2",54,0)
 . I $D(ICD10OR(225)) S ICDRG=207,ICDFI=1 Q  ;225=Mechanical Ventilation 96+ hours
"RTN","ICDDRGX2",55,0)
 . I $D(ICD10OR(87)) S ICDRG=208,ICDFI=1 Q  ;87=Mechanical Ventilation <96 hours
"RTN","ICDDRGX2",56,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",57,0)
 I $D(ICD10OR(32)),'$D(ICD10OR(38)) D  ;32=Cardiac Valve and Other Major Cardiothoracic Proc  38=Coronary Bypass
"RTN","ICDDRGX2",58,0)
 . I $D(ICD10OR(28)) S ICDRG=$S(ICDMCC=2:216,ICDMCC=1:217,1:218),ICDFI=1 Q  ;28=Cardiac Catherization
"RTN","ICDDRGX2",59,0)
 . S ICDRG=$S(ICDMCC=2:219,ICDMCC=1:220,1:221),ICDFI=1 Q
"RTN","ICDDRGX2",60,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",61,0)
 I $D(ICD10OR(29)) D  ;29=Cardiac Defibrillator Implant
"RTN","ICDDRGX2",62,0)
 . I $D(ICD10PD(22)),$D(ICD10OR(28)) S ICDRG=$S(ICDMCC=2:222,1:223),ICDFI=1 Q  ;22=AMI/HF/Shock and Cardiac Catheterization 28=Cardiac Catherization
"RTN","ICDDRGX2",63,0)
 . I '$D(ICD10PD(22)),$D(ICD10OR(28)) S ICDRG=$S(ICDMCC=2:224,1:225),ICDFI=1 Q
"RTN","ICDDRGX2",64,0)
 . I '$D(ICD10OR(28)) S ICDRG=$S(ICDMCC=2:226,1:227),ICDFI=1 Q
"RTN","ICDDRGX2",65,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",66,0)
 I $D(ICD10OR(38)) D  ;38=Coronary Bypass
"RTN","ICDDRGX2",67,0)
 . I $D(ICD10OR(129)) S ICDRG=$S(ICDMCC=2:231,1:232),ICDFI=1 Q  ;129=PTCA
"RTN","ICDDRGX2",68,0)
 . I $D(ICD10OR(28)) S ICDRG=$S(ICDMCC=2:233,1:234),ICDFI=1 Q  ;28=Cardiac Catheterization
"RTN","ICDDRGX2",69,0)
 . S ICDRG=$S(ICDMCC=2:235,1:236),ICDFI=1 Q
"RTN","ICDDRGX2",70,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",71,0)
 I $D(ICD10OR(125)) S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244),ICDFI=1 G EXIT
"RTN","ICDDRGX2",72,0)
 I $D(ICD10OR(12)) S ICDRG=245,ICDFI=1 G EXIT
"RTN","ICDDRGX2",73,0)
 I $D(ICD10OR(237)) D  ;237=Percutaneous Cardiovascular Procedures without Coronary Artery Stent
"RTN","ICDDRGX2",74,0)
 . I $D(ICD10OR(43)),ICDMCC=2 S ICDRG=246,ICDFI=1 Q  ;Drug-Eluting Stent
"RTN","ICDDRGX2",75,0)
 . I $D(ICD10OR(43)),ICDMCC'=2,$D(ICD10OR(87)) S ICDRG=246,ICDFI=1 Q  ;;Drug-Eluting Stent and 4+ Vessels / Stents
"RTN","ICDDRGX2",76,0)
 . I $D(ICD10OR(43)),ICDMCC'=2,'$D(ICD10OR(87)) S ICDRG=247,ICDFI=1 Q
"RTN","ICDDRGX2",77,0)
 . I '$D(ICD10OR(43)),$D(ICD10OR(92)) D  G:ICDFI EXIT
"RTN","ICDDRGX2",78,0)
 . . I ICDMCC=2 S ICDRG=248,ICDFI=1 Q  ;Non-Drug-Eluting Stent
"RTN","ICDDRGX2",79,0)
 . . S ICDRG=$S($D(ICD10OR(87)):248,1:249),ICDFI=1 Q
"RTN","ICDDRGX2",80,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",81,0)
 I ICDMDC=5,$D(ICD10OR(236)) S ICDRG=$S(ICDMCC=2:250,1:251),ICDFI=1 G EXIT ;Percutaneous Cardiovascular Procedures with Coronary Artery Stent
"RTN","ICDDRGX2",82,0)
 I $D(ICD10OR(31)),'$D(ICD10OR(101)) S ICDRG=$S(ICDMCC=2:260,ICDMCC=1:261,1:262),ICDFI=1 G EXIT ;31=Cardiac Pacemaker Revision Except Device Replacement
"RTN","ICDDRGX2",83,0)
 I ICDMDC=5,$D(ICD10OR(209)) S ICDRG=$S(ICDMCC=2:266,1:267),ICDFI=1 G EXIT
"RTN","ICDDRGX2",84,0)
 I ICDMDC=5,$D(ICD10OR(199)) S ICDRG=$S(ICDMCC=2:268,1:269),ICDFI=1 G EXIT ; AORTIC & HEART ASST PROC EXPT PULS BALLOON
"RTN","ICDDRGX2",85,0)
 I ICDMDC=5,$D(ICD10OR(75)) S ICDRG=$S(ICDMCC=2:270,ICDMCC=1:271,1:272),ICDFI=1 G EXIT ; MAJOR CARDIOVASCULAR PROC
"RTN","ICDDRGX2",86,0)
 I ICDMDC=5,$D(ICD10OR(238)) S ICDRG=$S(ICDMCC=2:273,1:274),ICDFI=1 G EXIT ;PERCUTANEOUS INTRACARDIAC PROC
"RTN","ICDDRGX2",87,0)
 I $D(ICD10PD(18)) D  ;Acute Myocardial Infarction
"RTN","ICDDRGX2",88,0)
 . I 'ICDEXP S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282),ICDFI=1 Q  ;If Discharged Alive
"RTN","ICDDRGX2",89,0)
 . S ICDRG=$S(ICDMCC=2:283,ICDMCC=1:284,1:285),ICDFI=1 Q
"RTN","ICDDRGX2",90,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",91,0)
 I ICDMDC=5,$D(ICD10OR(206)) S ICDRG=$S(ICDMCC=2:286,1:287),ICDFI=1 G EXIT ;Circulatory Disorders Except AMI with Cardiac Catheterization
"RTN","ICDDRGX2",92,0)
 I $D(ICD10PD(255)) S ICDRG=$S(ICDMCC=2:291,ICDMCC=1:292,1:293),ICDFI=1 G EXIT ;Heart Failure and Shock
"RTN","ICDDRGX2",93,0)
 I $D(ICD10PD(31)) S ICDRG=$S(ICDMCC=2:296,ICDMCC=1:297,1:298),ICDFI=1 G EXIT ;Cardiac Arrest, Unexplained
"RTN","ICDDRGX2",94,0)
 I $D(ICD10OR(130)) S ICDRG=$S(ICDMCC=2:332,ICDMCC=1:333,1:334),ICDFI=1 G EXIT ;Rectal Resection
"RTN","ICDDRGX2",95,0)
 I $D(ICD10OR(20)) D  ;Appendectomy
"RTN","ICDDRGX2",96,0)
 . I $D(ICD10PD(41)) S ICDRG=$S(ICDMCC=2:338,ICDMCC=1:339,1:340),ICDFI=1 Q
"RTN","ICDDRGX2",97,0)
 . S ICDRG=$S(ICDMCC=2:341,ICDMCC=1:342,1:343),ICDFI=1 Q
"RTN","ICDDRGX2",98,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",99,0)
 I ICDMDC=6 D
"RTN","ICDDRGX2",100,0)
 . I $D(ICD10OR("J")) S ICDRG=$S(ICDMCC=2:350,ICDMCC=1:351,1:352),ICDFI=1 Q  ;Inguinal and Femoral Hernia
"RTN","ICDDRGX2",101,0)
 . I $D(ICD10OR(55)) S ICDRG=$S(ICDMCC=2:353,ICDMCC=1:354,1:355),ICDFI=1 Q  ;Hernia except Inguinal and Femoral
"RTN","ICDDRGX2",102,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",103,0)
 I $D(ICD10PD(94)) S ICDRG=$S(ICDMCC=2:368,ICDMCC=1:369,1:370),ICDFI=1 G EXIT ;Major Esophageal Disorders
"RTN","ICDDRGX2",104,0)
 I $D(ICD10PD(40)) S ICDRG=$S(ICDMCC=2:380,ICDMCC=1:381,1:382),ICDFI=1 G EXIT ;Complicated Peptic Ulcer
"RTN","ICDDRGX2",105,0)
 I $D(ICD10PD(218)) S ICDRG=$S(ICDMCC=2:383,1:384),ICDFI=1 G EXIT ;Uncomplicated Peptic Ulcer
"RTN","ICDDRGX2",106,0)
 I $D(ICD10OR(36))!($D(ICD10OR(65))) D
"RTN","ICDDRGX2",107,0)
 . I $D(ICD10OR(27)) S ICDRG=$S(ICDMCC=2:411,ICDMCC=1:412,1:413),ICDFI=1 Q
"RTN","ICDDRGX2",108,0)
 . I '$D(ICD10OR(27)),'$D(ICD10OR(65)) S ICDRG=$S(ICDMCC=2:414,ICDMCC=1:415,1:416),ICDFI=1 Q
"RTN","ICDDRGX2",109,0)
 . I '$D(ICD10OR(27)),$D(ICD10OR(65)) S ICDRG=$S(ICDMCC=2:417,ICDMCC=1:418,1:419),ICDFI=1 Q
"RTN","ICDDRGX2",110,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",111,0)
 I ICDMDC=7,$D(ICD10OR(54)) S ICDRG=$S(ICDMCC=2:420,ICDMCC=1:421,1:422),ICDFI=1 G EXIT ;54=Hepatobiliary Diagnostic Proc
"RTN","ICDDRGX2",112,0)
 I ICDMDC=8 D
"RTN","ICDDRGX2",113,0)
 . I $D(ICD10OR(19)),$D(ICD10OR(127)) S ICDRG=$S(ICDMCC=2:453,ICDMCC=1:454,1:455),ICDFI=1 Q  ;19=Anterior Spinal Fusion 127=Posterior Spinal Fusion
"RTN","ICDDRGX2",114,0)
 . I $D(ICD10OR(142)),$D(ICD10PD(206)) S ICDRG=$S(ICDMCC=2:456,ICDMCC=1:457,1:458),ICDFI=1 Q  ;142=Spinal Fusion except Cervical 206=Spinal Curvature / Malignancy / Infection
"RTN","ICDDRGX2",115,0)
 . I $D(ICD10OR(142)) S ICDRG=$S(ICDMCC=2:459,1:460),ICDFI=1 Q
"RTN","ICDDRGX2",116,0)
 . I $G(ICD10OR(201))=2 S ICDRG=$S(ICDMCC=2:461,1:462),ICDFI=1 Q  ;201=Bilateral or Multiple Major Joint Procedures of Lower Extremity
"RTN","ICDDRGX2",117,0)
 . I $D(ICD10OR(79)) S ICDRG=$S(ICDMCC=2:469,1:470),ICDFI=1 Q  ;79=Major Joint Replacement or Reattachment of Lower Extremity
"RTN","ICDDRGX2",118,0)
 . I $D(ICD10OR(34)) S ICDRG=$S(ICDMCC=2:471,ICDMCC=1:472,1:473),ICDFI=1 Q  ;34=Cervical Spinal Fusion
"RTN","ICDDRGX2",119,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",120,0)
 I $D(ICD10OR(64)) D  ;Knee procedures
"RTN","ICDDRGX2",121,0)
 . I $D(ICD10PD(64)) S ICDRG=$S(ICDMCC=2:485,ICDMCC=1:486,1:487),ICDFI=1 Q
"RTN","ICDDRGX2",122,0)
 . S ICDRG=$S(ICDMCC>0:488,1:489),ICDFI=1
"RTN","ICDDRGX2",123,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",124,0)
 I $D(ICD10OR(200)),'$D(ICD10OR(42)),'$D(ICD10OR(91)),ICDMCC=0 S ICDRG=520,ICDFI=1
"RTN","ICDDRGX2",125,0)
 I $D(ICD10OR(200)),ICDMCC>0 S ICDRG=519,ICDFI=1
"RTN","ICDDRGX2",126,0)
 I '$D(ICD10OR(200)),$D(ICD10OR(42)) S ICDRG=518,ICDFI=1
"RTN","ICDDRGX2",127,0)
 I '$D(ICD10OR(200)),'$D(ICD10OR(42)),$D(ICD10OR(91)) S ICDRG=518,ICDFI=1
"RTN","ICDDRGX2",128,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",129,0)
 I ICDMDC=8,$D(ICD10OR(84)) S ICDRG=506,ICDFI=1 G EXIT ;84=Major Thumb or Joint Procedures
"RTN","ICDDRGX2",130,0)
 I ICDMDC=8,$D(ICD10OR(211)) S ICDRG=513,ICDFI=1 G EXIT ;211=Hand or Wrist Procedures, Except Major Thumb or Joint Procedures
"RTN","ICDDRGX2",131,0)
 I ICDMDC=8,$D(ICD10PD(189)),ICDOTMP="" S ICDRG=$S(ICDMCC=2:548,ICDMCC=1:549,1:550),ICDFI=1 G EXIT
"RTN","ICDDRGX2",132,0)
 I ICDMDC=9,$D(ICD10OR(137)) S ICDRG=$S(ICDMCC=2:570,ICDMCC=1:571,1:572),ICDFI=1 G EXIT ;Skin Debridemeny
"RTN","ICDDRGX2",133,0)
 I ICDMDC=9,$D(ICD10OR("k")) D
"RTN","ICDDRGX2",134,0)
 . I $D(ICD10PD(205))!($D(ICD10PD(34))) S ICDRG=$S(ICDMCC=2:573,ICDMCC=1:574,1:575),ICDFI=1 Q  ;205=Skin Ulcer  34=Cellulitis
"RTN","ICDDRGX2",135,0)
 . S ICDRG=$S(ICDMCC=2:576,ICDMCC=1:577,1:578),ICDFI=1 Q
"RTN","ICDDRGX2",136,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",137,0)
 I $D(ICD10OR(85)) S ICDRG=$S(ICDMCC>0:582,1:583),ICDFI=1 G EXIT
"RTN","ICDDRGX2",138,0)
 I ICDMDC=9,$D(ICD10PD(205)) S ICDRG=$S(ICDMCC=2:592,ICDMCC=1:593,1:594),ICDFI=1 G EXIT ;205=Skin Ulcers
"RTN","ICDDRGX2",139,0)
 I $D(ICD10PD(102)) S ICDRG=$S(ICDMCC=2:597,ICDMCC=1:598,1:599),ICDFI=1 G EXIT ;102=Malignant Breat Disorder
"RTN","ICDDRGX2",140,0)
 I $D(ICD10PD(142)) S ICDRG=$S(ICDMCC>0:600,1:601),ICDFI=1 G EXIT ;142=Non-Malignant Breast Disorders
"RTN","ICDDRGX2",141,0)
 I $D(ICD10PD(34)),$D(ICD10PD(204)) S ICDRG=$S(ICDMCC>1:602,1:603),ICDFI=1 G EXIT
"RTN","ICDDRGX2",142,0)
 I ICDMDC=10,$D(ICD10OR(197)) S ICDRG=$S(ICDMCC=2:616,ICDMCC=1:617,1:618),ICDFI=1 G EXIT ;197=Amputation of Lower Limb for Endocrine
"RTN","ICDDRGX2",143,0)
 I $D(ICD10OR(63)) S ICDRG=652,ICDFI=1 G EXIT ;Kidney Transplant
"RTN","ICDDRGX2",144,0)
 I ICDMDC=11,$D(ICD10OR(74)) S ICDRG=$S(ICDMCC=2:653,ICDMCC=1:654,1:655),ICDFI=1 G EXIT ;74=Major Bladder Procedures
"RTN","ICDDRGX2",145,0)
 I $D(ICD10OR(62)) D  ;62=Kidney and Ureter Procedures
"RTN","ICDDRGX2",146,0)
 . I $D(ICD10PD(136)) S ICDRG=$S(ICDMCC=2:656,ICDMCC=1:657,1:658),ICDFI=1 Q  ;136=Neoplasm
"RTN","ICDDRGX2",147,0)
 . I '$D(ICD10PD(136)) S ICDRG=$S(ICDMCC=2:659,ICDMCC=1:660,1:661),ICDFI=1 Q
"RTN","ICDDRGX2",148,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",149,0)
 I ICDMDC=11,$D(ICD10OR(88)) S ICDRG=$S(ICDMCC=2:662,ICDMCC=1:663,1:664),ICDFI=1 G EXIT ;88=Minor Bladder Procedures
"RTN","ICDDRGX2",150,0)
 I ICDMDC=11 D
"RTN","ICDDRGX2",151,0)
 . I $D(ICD10OR(128)) S ICDRG=$S(ICDMCC=2:665,ICDMCC=1:666,1:667),ICDFI=1 Q  ;128=Prostatectomy
"RTN","ICDDRGX2",152,0)
 . I $D(ICD10OR(229)) S ICDRG=$S(ICDMCC=2:673,ICDMCC=1:674,1:675),ICDFI=1 Q  ;229=Other Kidney and Urinary Tract Procedures
"RTN","ICDDRGX2",153,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",154,0)
 I $D(ICD10PD(184)) S ICDRG=$S(ICDMCC=2:682,ICDMCC=1:683,1:684),ICDFI=1 G EXIT ;184=Renal Failure
"RTN","ICDDRGX2",155,0)
 I $D(ICD10PD(259)) S ICDRG=$S(ICDMCC=2:686,ICDMCC=1:687,1:688),ICDFI=1 G EXIT ;Kidney and Urinary Tract Neoplasms
"RTN","ICDDRGX2",156,0)
 I $D(ICD10PD(220)) D  ;220=Urinary Stones
"RTN","ICDDRGX2",157,0)
 . I $D(ICD10OR(45)) S ICDRG=$S(ICDMCC=2:691,1:692),ICDFI=1 Q  ;ESW Lithotripsy 
"RTN","ICDDRGX2",158,0)
 . S ICDRG=$S(ICDMCC=2:693,1:694),ICDFI=1 Q
"RTN","ICDDRGX2",159,0)
 I $D(ICD10PD(260)) S ICDRG=$S(ICDMCC=2:695,1:696),ICDFI=1 G EXIT ;Kidney and Urinary Tract Signs and Symptoms
"RTN","ICDDRGX2",160,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",161,0)
 G ^ICDDRGX3
"RTN","ICDDRGX2",162,0)
 ;
"RTN","ICDDRGX2",163,0)
EXIT ;
"RTN","ICDDRGX2",164,0)
 G EXIT^ICDDRGX3
"RTN","ICDDRGX2",165,0)
 ;
"RTN","ICDDRGX3")
0^10^B57991156^B25217688
"RTN","ICDDRGX3",1,0)
ICDDRGX3 ;MKN - GROUPER PROCESS continued from ICDDRGX2;06/04/12 3:45pm
"RTN","ICDDRGX3",2,0)
 ;;18.0;DRG Grouper;**64,82**;Oct 20, 2000;Build 21
"RTN","ICDDRGX3",3,0)
 ;
"RTN","ICDDRGX3",4,0)
VARIABLS ;Apply Variables for MDC 1-22
"RTN","ICDDRGX3",5,0)
 ;
"RTN","ICDDRGX3",6,0)
 I $D(ICD10OR(80)) S ICDRG=$S(ICDMCC>0:707,1:708),ICDFI=1 G EXIT ;80=Major Male Pelvic
"RTN","ICDDRGX3",7,0)
 I ICDMDC=12,$D(ICD10OR(119)) S ICDRG=$S(ICDMCC>0:709,1:710),ICDFI=1 G EXIT ;119=Penis Procedures
"RTN","ICDDRGX3",8,0)
 I $D(ICD10OR(147)) S ICDRG=$S(ICDMCC>0:711,1:712),ICDFI=1 G EXIT ;147=Testes Procedures
"RTN","ICDDRGX3",9,0)
 I ICDMDC=12,$D(ICD10OR(153)) S ICDRG=$S(ICDMCC>0:713,1:714),ICDFI=1 G EXIT ;153=Transurethral Prostatectomy
"RTN","ICDDRGX3",10,0)
 I SEX="M",ICDMDC=12,$D(ICD10OR(108)) D  ;108=Other Male Reproductive System O.R. Procedures
"RTN","ICDDRGX3",11,0)
 . I $D(ICD10PD(98)) S ICDRG=$S(ICDMCC>0:715,1:716),ICDFI=1 Q  ;98=Malignancy
"RTN","ICDDRGX3",12,0)
 . S ICDRG=$S(ICDMCC>0:717,1:718),ICDFI=1 Q
"RTN","ICDDRGX3",13,0)
 G:ICDFI EXIT
"RTN","ICDDRGX3",14,0)
 I ICDMDC=12,SEX="M",$D(ICD10PD(98)) S ICDRG=$S(ICDMCC=2:722,ICDMCC=1:723,1:724),ICDFI=1 G EXIT
"RTN","ICDDRGX3",15,0)
 I SEX="F",$D(ICD10OR(235)) S ICDRG=$S(ICDMCC>0:734,1:735),ICDFI=1 G EXIT ;235=Pelvic Evisceration, Radical Hysterectomy and Radical Vulvectomy
"RTN","ICDDRGX3",16,0)
 I $D(ICD10OR(158)),$D(ICD10PD(143)) S ICDRG=$S(ICDMCC=2:739,ICDMCC=1:740,1:741),ICDFI=1 G EXIT ;158=Uterine and Adnexal Procedures 143=Non-ovarian/adnexal Malignancy
"RTN","ICDDRGX3",17,0)
 I $D(ICD10OR(158)),$D(ICD10PD(168)) S ICDRG=$S(ICDMCC=2:736,ICDMCC=1:737,1:738),ICDFI=1 G EXIT ;168=Ovarian or Adnexal Malignancy
"RTN","ICDDRGX3",18,0)
 I SEX="F" D
"RTN","ICDDRGX3",19,0)
 . I ICDMDC=13 D
"RTN","ICDDRGX3",20,0)
 . . I $D(ICD10OR(253)) S ICDRG=$S(ICDMCC>0:742,1:743),ICDFI=1 Q  ;253=Uterine and Adnexal Procedures for Non-Malignancy
"RTN","ICDDRGX3",21,0)
 . . I $D(ICD10OR(208)) S ICDRG=$S(ICDMCC>0:744,1:745),ICDFI=1 Q  ;208=D&C, Conization, Laparoscopy and Tubal Interruption
"RTN","ICDDRGX3",22,0)
 . Q:ICDFI
"RTN","ICDDRGX3",23,0)
 . I ICDMDC=14,$D(ICD10OR(181)) D  ;181=Delivery procedures
"RTN","ICDDRGX3",24,0)
 . . I $D(ICD10OR(183)) S ICDRG=767,ICDFI=1 Q  ;183=Sterilization and/or D&C
"RTN","ICDDRGX3",25,0)
 . . I $D(ICD10OR(182)) S ICDRG=768,ICDFI=1 Q  ;182=Not Sterilization and/or D&C
"RTN","ICDDRGX3",26,0)
 G:ICDFI=1 EXIT
"RTN","ICDDRGX3",27,0)
 I $D(ICD10OR(254)) S ICDRG=$S(ICDMCC>0:746,1:747),ICDFI=1 G EXIT ;254=Vagina, Cervix and Vulva Procedures
"RTN","ICDDRGX3",28,0)
 I $D(ICD10OR(47)) S ICDRG=748,ICDFI=1 G EXIT ;47=Female Reproductive System Reconstructive Procedures
"RTN","ICDDRGX3",29,0)
 I SEX="F",$D(ICD10OR(104)) S ICDRG=$S(ICDMCC>0:749,1:750),ICDFI=1 G EXIT ;104=Other Female Reproductive System O.R. Procedures
"RTN","ICDDRGX3",30,0)
 I SEX="F",$D(ICD10PD(100)) S ICDRG=$S(ICDMCC=2:754,ICDMCC=1:755,1:756),ICDFI=1 G EXIT ;100=Malignancy, Female Reproductive System
"RTN","ICDDRGX3",31,0)
 I SEX="F",$D(ICD10PD(81)) S ICDRG=$S(ICDMCC=2:757,ICDMCC=1:758,1:759),ICDFI=1 G EXIT ;81=Infections, Female Reproductive System
"RTN","ICDDRGX3",32,0)
 I $D(ICD10PD(272)) S ICDRG=$S(ICDMCC>0:760,1:761),ICDFI=1,ICDFI=1 G EXIT ;272=Menstrual and Other Female Reproductive System Disorders
"RTN","ICDDRGX3",33,0)
 I $D(ICD10OR("c")) S ICDRG=$S(ICDMCC>0:765,1:766),ICDFI=1 G EXIT ;"c"=Cesarean Sec
"RTN","ICDDRGX3",34,0)
 I $D(ICD10OR(312)) S ICDRG=$S($D(ICD10OR(183)):767,1:768),ICDFI=1 G EXIT ;312=Vaginal Delivery 183=Sterilization and/or D&C
"RTN","ICDDRGX3",35,0)
 I $D(ICD10PD(294)),$D(ICD10OR) S ICDRG=769,ICDFI=1 G EXIT ;294=Postpartum and Post Abortion Diagnoses with O.R. Procedure
"RTN","ICDDRGX3",36,0)
 I $D(ICD10PD(294)),'$D(ICD10OR) S ICDRG=776,ICDFI=1 G EXIT
"RTN","ICDDRGX3",37,0)
 I $D(ICD10PD(227)) S ICDRG=779,ICDFI=1 G EXIT ;Abortion without D&C
"RTN","ICDDRGX3",38,0)
 I $D(ICD10OR(145)) S ICDRG=$S(ICDMCC=2:799,ICDMCC=1:800,1:801),ICDFI=1 G EXIT ;145=Splenectomy
"RTN","ICDDRGX3",39,0)
 I ICDMDC=16,$D(ICD10OR(231)) S ICDRG=$S(ICDMCC=2:802,ICDMCC=1:803,1:804),ICDFI=1 G EXIT ;231=Other O.R. Procedures of the Blood and Blood Forming Organs
"RTN","ICDDRGX3",40,0)
 I $D(ICD10PD(265)) S ICDRG=$S(ICDMCC=2:808,ICDMCC=1:809,1:810),ICDFI=1 G EXIT ;265=Major Hematological/Immunological Diagnoses Except Sickle Cell Crisis and Coagulation
"RTN","ICDDRGX3",41,0)
 I $D(ICD10PD(261)),$D(ICD10OR(81)) S ICDRG=$S(ICDMCC=2:820,ICDMCC=1:821,1:822),ICDFI=1 G EXIT ;261=Lymphoma and Leukemia with Major O.R. Procedure
"RTN","ICDDRGX3",42,0)
 I $D(ICD10PD(263)),$D(ICD10OR),'$D(ICD10OR(81)) S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825),ICDFI=1 G EXIT ;263=Lymphoma and Non-Acute Leukemia with Other O.R. Procedure
"RTN","ICDDRGX3",43,0)
 I $D(ICD10PD(231)),'$D(ICD10OR(81)) S ICDRG=$S(ICDMCC=2:834,ICDMCC=1:835,1:836),ICDFI=1 G EXIT ;231=Acute Leukemia without Major O.R. Procedure
"RTN","ICDDRGX3",44,0)
 I $D(ICD10PD(262)) S ICDRG=$S(ICDMCC=2:840,ICDMCC=1:841,1:842),ICDFI=1 G EXIT ;Lymphoma and Non-Acute Leukemia
"RTN","ICDDRGX3",45,0)
 I $D(ICD10PD(181)) S ICDRG=849,ICDFI=1 G EXIT ;Radiotherapy
"RTN","ICDDRGX3",46,0)
 I $D(ICD10PD(134)),'$D(ICD10PD(35)) D  ;134=Myeloproliferative Disorders or Poorly Differentiated Neoplasms
"RTN","ICDDRGX3",47,0)
 . I $D(ICD10OR(81)) S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828),ICDFI=1 Q
"RTN","ICDDRGX3",48,0)
 . I $D(ICD10OR) S ICDRG=$S(ICDMCC>0:829,1:830),ICDFI=1 Q
"RTN","ICDDRGX3",49,0)
 I $D(ICD10OR(111)) S ICDRG=$S(ICDMCC=2:907,ICDMCC=1:908,1:909),ICDFI=1 G EXIT ;Other O.R. Procedures for Injuries
"RTN","ICDDRGX3",50,0)
 G:ICDFI EXIT
"RTN","ICDDRGX3",51,0)
 I ICDMDC=17,$D(ICD10PD(35)) D  ;134=Myeloproliferative Disorders or Poorly Differentiated Neoplasms  35=Chemotherapy Implant
"RTN","ICDDRGX3",52,0)
 . I $D(ICD10SD(15)),ICDMCC=2 S ICDRG=837,ICDFI=1 Q  ;15=SDX Acute Leukemia  56=High Dose Chemo Agent
"RTN","ICDDRGX3",53,0)
 . I $D(ICD10SD(15)),'$D(ICD10OR(56)) S ICDRGT=$S(ICDMCC=2:837,ICDMCC=1:838,ICDMCC=0:839,1:0) I ICDRGT>0 S ICDRG=ICDRGT,ICDFI=1 Q
"RTN","ICDDRGX3",54,0)
 . I '$D(ICD10SD(15)),$D(ICD10OR(56)),ICDMCC=2 S ICDRG=837,ICDFI=1 Q
"RTN","ICDDRGX3",55,0)
 . I '$D(ICD10SD(15)),$D(ICD10OR(56)),ICDMCC'=2 S ICDRG=838,ICDFI=1 Q
"RTN","ICDDRGX3",56,0)
 G:ICDFI EXIT
"RTN","ICDDRGX3",57,0)
 I $D(ICD10PD(288)) S ICDRG=$S(ICDMCC=2:843,ICDMCC=1:844,1:845),ICDFI=1 G EXIT ;288=Other Myeloproliferative Disorders or Poorly Differentiated Neoplasm Diagnoses
"RTN","ICDDRGX3",58,0)
 I $D(ICD10PD(240)) S ICDRG=$S(ICDMCC=2:846,ICDMCC=1:847,1:848),ICDFI=1 G EXIT ;240=Chemotherapy without Acute Leukemia as Secondary Diagnosis
"RTN","ICDDRGX3",59,0)
 I ICDMDC=18,$D(ICD10OR("O")) D  ;82=infectious & Parasitic Diseases, Systemic or Unspecified Sites
"RTN","ICDDRGX3",60,0)
 . S ICDX=$$ICDXEXPT^ICDRGAPI(ICDDX(1),"^K68.11^N98.0^T80.22XA^T80.29XA^T81.4XXA^T88.0XXA^")
"RTN","ICDDRGX3",61,0)
 . I ICDX=0 S ICDRG=$S(ICDMCC=2:853,ICDMCC=1:854,1:855),ICDFI=1 Q
"RTN","ICDDRGX3",62,0)
 . I ICDX S ICDRG=$S(ICDMCC=2:856,ICDMCC=1:857,1:858),ICDFI=1 Q
"RTN","ICDDRGX3",63,0)
 I ICDMDC=18,'$D(ICD10OR("O")) D
"RTN","ICDDRGX3",64,0)
 . S ICDX=$$ICDXEXPT^ICDRGAPI(ICDDX(1),"^K68.11^T81.4XXA^")
"RTN","ICDDRGX3",65,0)
 . I ICDX S ICDRG=$S(ICDMCC=2:862,1:863),ICDFI=1 Q 
"RTN","ICDDRGX3",66,0)
 G:ICDFI EXIT
"RTN","ICDDRGX3",67,0)
 ;I $D(ICD10PD(175)),$D(ICD10OR("O")) S ICDRG=$S(ICDMCC=2:856,ICDMCC=1:857,1:858),ICDFI=1 G EXIT ;175=Postoperative or Post-Traumatic Infections with O.R. Procedure
"RTN","ICDDRGX3",68,0)
 I $D(ICD10PD(190))!($D(ICD10PD("W"))) D  ;190=Septicemia or Severe Sepsis  "W"=Severe Sepsis
"RTN","ICDDRGX3",69,0)
 . I $D(ICD10OR(225)) S ICDRG=870,ICDFI=1 Q
"RTN","ICDDRGX3",70,0)
 . S ICDRG=$S(ICDMCC=2:871,1:872),ICDFI=1 Q
"RTN","ICDDRGX3",71,0)
 G:ICDFI EXIT
"RTN","ICDDRGX3",72,0)
 I ICDMDC=19,$D(ICD10OR("O")) S ICDRG=876,ICDFI=1 G EXIT ;Mental Illness
"RTN","ICDDRGX3",73,0)
 I ICDMDC=20 D
"RTN","ICDDRGX3",74,0)
 . I ICDDMS=1 S ICDRG=894,ICDFI=1 Q  ;Left against medical advice (AMA)
"RTN","ICDDRGX3",75,0)
 . I $D(ICD10PD(270)),$D(ICD10OR(132)) S ICDRG=895,ICDFI=1 Q  ;270=MDC 20 Alcohol/Drug Use & Alcohol/Drug Induced Organic Mental Disorders  132=Rehabilitation Therapy
"RTN","ICDDRGX3",76,0)
 . I $D(ICD10PD(270)),'$D(ICD10OR(132)),'$D(ICD10OR("x")) S ICDRG=$S(ICDMCC=2:896,1:897),ICDFI=1 Q  ;132=Rehabilitation Therapy
"RTN","ICDDRGX3",77,0)
 G:ICDFI EXIT
"RTN","ICDDRGX3",78,0)
 I $D(ICD10OR(166)),$D(ICD10OR("O")) S ICDRG=$S(ICDMCC=2:901,ICDMCC=1:902,1:903),ICDFI=1 G EXIT ;Wound Debridements for Injuries
"RTN","ICDDRGX3",79,0)
 I ICDMDC=21,$D(ICD10OR(139)) S ICDRG=$S(ICDMCC>0:904,1:905),ICDFI=1 G EXIT ;139=Skin Grafts for Injuries
"RTN","ICDDRGX3",80,0)
 I ICDMDC=21,$D(ICD10OR(52)) S ICDRG=906,ICDFI=1 G EXIT
"RTN","ICDDRGX3",81,0)
 I $D(ICD10PD(42)) S ICDRG=$S(ICDMCC=2:919,ICDMCC=1:920,1:921),ICDFI=1 G EXIT ;42=Complications of Treatment
"RTN","ICDDRGX3",82,0)
 I $D(ICD10PD("*"))!($D(ICD10PD("b"))&($D(ICD10OR(225)))) S ICDRG=$S($D(ICD10OR("k")):927,1:933),ICDFI=1 G EXIT ;*=Extensive Burns or b=Full Thickness Burns with 225=MV 96+Hours k=Skin Graft
"RTN","ICDDRGX3",83,0)
 I $D(ICD10PD("b")) D  ;Full Thickness Burns
"RTN","ICDDRGX3",84,0)
 . I $D(ICD10OR("k"))!($D(ICD10SD("j"))) S ICDRG=$S(ICDMCC>0:928,1:929),ICDFI=1 Q  ;k=Skin Graft  j=Inhalation Injury
"RTN","ICDDRGX3",85,0)
 . S ICDRG=934,ICDFI=1 Q
"RTN","ICDDRGX3",86,0)
 G:ICDFI EXIT
"RTN","ICDDRGX3",87,0)
 I ICDMDC=22,$D(ICD10PD(141)) S ICDRG=935,ICDFI=1 G EXIT ;141=Non-extensive Burns
"RTN","ICDDRGX3",88,0)
 I ICDMDC=23,$D(ICD10OR("O")),$D(ICD10PD(119)) S ICDRG=$S(ICDMCC=2:939,ICDMCC=1:940,1:941),ICDFI=1 G EXIT ;O.R. Procedures with 119=Diagnosis of Other Contact with Health Services
"RTN","ICDDRGX3",89,0)
 I ICDMDC=23 D
"RTN","ICDDRGX3",90,0)
 .I $D(ICD10OR(131)) S ICDRG=$S(ICDMCC>0:945,1:946),ICDFI=1 ;131=Rehabilitation
"RTN","ICDDRGX3",91,0)
 .I $D(ICD10PD(299)) S ICDRG=$S(ICDMCC>0:947,1:948),ICDFI=1
"RTN","ICDDRGX3",92,0)
 .I $D(ICD10PD(20)) S ICDRG=$S(ICDMCC>0:949,1:950),ICDFI=1
"RTN","ICDDRGX3",93,0)
EXIT ;
"RTN","ICDDRGX3",94,0)
 I $D(ICD10OR("y")) D
"RTN","ICDDRGX3",95,0)
 . I $D(ICD10OR),ICDREL=0 S ICDRG=$S(ICDMCC=2:984,ICDMCC=1:985,1:986),ICDFI=1 Q
"RTN","ICDDRGX3",96,0)
 I $D(ICD10OR("z")) D
"RTN","ICDDRGX3",97,0)
 . I $D(ICD10OR),ICDREL=0 S ICDRG=$S(ICDMCC=2:987,ICDMCC=1:988,1:989),ICDFI=1 Q
"RTN","ICDDRGX3",98,0)
 I ICDFI S ICDFOUND=1
"RTN","ICDDRGX3",99,0)
 Q
"RTN","ICDEXD2")
0^1^B50967420^B52729540
"RTN","ICDEXD2",1,0)
ICDEXD2 ;SLC/KER - ICD Extractor - DRG APIs (cont) ;12/19/2014
"RTN","ICDEXD2",2,0)
 ;;18.0;DRG Grouper;**57,67,82**;Oct 20, 2000;Build 21
"RTN","ICDEXD2",3,0)
 ;               
"RTN","ICDEXD2",4,0)
 ; Global Variables
"RTN","ICDEXD2",5,0)
 ;    ^ICDS(              N/A
"RTN","ICDEXD2",6,0)
 ;               
"RTN","ICDEXD2",7,0)
 ; External References
"RTN","ICDEXD2",8,0)
 ;    $$DT^XLFDT          ICR  10103
"RTN","ICDEXD2",9,0)
 ;    $$FMADD^XLFDT       ICR  10103
"RTN","ICDEXD2",10,0)
 ;    $$FMTE^XLFDT        ICR  10103
"RTN","ICDEXD2",11,0)
 ;    ^%DT                ICR  10003
"RTN","ICDEXD2",12,0)
 ;    ^DIR                ICR  10026
"RTN","ICDEXD2",13,0)
 ;               
"RTN","ICDEXD2",14,0)
 Q
"RTN","ICDEXD2",15,0)
MD(FILE,IEN,CDT,ARY,FLAG) ; MDC DRGs
"RTN","ICDEXD2",16,0)
 ;
"RTN","ICDEXD2",17,0)
 ; Input
"RTN","ICDEXD2",18,0)
 ;
"RTN","ICDEXD2",19,0)
 ;    FILE   File Number/Identifier
"RTN","ICDEXD2",20,0)
 ;    IEN    Internal entry in file
"RTN","ICDEXD2",21,0)
 ;    CDT    Code Set Versioning Date
"RTN","ICDEXD2",22,0)
 ;   .ARY    Array name passed by reference
"RTN","ICDEXD2",23,0)
 ;    FLAG   Flag   I=Internal (default)
"RTN","ICDEXD2",24,0)
 ;                  E=External
"RTN","ICDEXD2",25,0)
 ;
"RTN","ICDEXD2",26,0)
 ; Output
"RTN","ICDEXD2",27,0)
 ;
"RTN","ICDEXD2",28,0)
 ;   ICD Procedures file 80.1 (multiple MDC)
"RTN","ICDEXD2",29,0)
 ;   
"RTN","ICDEXD2",30,0)
 ;      ARY(<fiscal year>,<MDC>)=DRG^;FY;STA
"RTN","ICDEXD2",31,0)
 ;      ARY(<fiscal year>,<MDC>)="DRG^DRG^;FY;STA
"RTN","ICDEXD2",32,0)
 ;   
"RTN","ICDEXD2",33,0)
 ;      If Flag contains "E"
"RTN","ICDEXD2",34,0)
 ;      ARY(<fiscal year>,"E",<MDC>)=MDC Name
"RTN","ICDEXD2",35,0)
 ;      ARY(<fiscal year>,"E",<MDC>,<DRG>)=DRG Name
"RTN","ICDEXD2",36,0)
 ;      ARY(<fiscal year>,"E",<MDC>)=MDC Name
"RTN","ICDEXD2",37,0)
 ;      ARY(<fiscal year>,"E",<MDC>,<DRG>)=DRG Name
"RTN","ICDEXD2",38,0)
 ;      ARY(<fiscal year>,"E",<MDC>,<DRG>)=DRG Name
"RTN","ICDEXD2",39,0)
 ;      ARY(<fiscal year>,"E","FY")=External FY
"RTN","ICDEXD2",40,0)
 ;   
"RTN","ICDEXD2",41,0)
 ;   ICD Diagnosis file 80 (single MDC)
"RTN","ICDEXD2",42,0)
 ;   
"RTN","ICDEXD2",43,0)
 ;      ARY(<fiscal year>,<MDC>)="DRG^DRG^;FY;STA
"RTN","ICDEXD2",44,0)
 ;   
"RTN","ICDEXD2",45,0)
 ;      If Flag contains "E"
"RTN","ICDEXD2",46,0)
 ;      ARY(<fiscal year>,"E",<MDC>)=MDC Name
"RTN","ICDEXD2",47,0)
 ;      ARY(<fiscal year>,"E",<MDC>,<DRG>)=DRG Name
"RTN","ICDEXD2",48,0)
 ;      ARY(<fiscal year>,"E",<MDC>,<DRG>)=DRG Name
"RTN","ICDEXD2",49,0)
 ;      ARY(<fiscal year>,"E","FY")=External FY
"RTN","ICDEXD2",50,0)
 ;   
"RTN","ICDEXD2",51,0)
 ;   NOTE:  If no Fiscal Year found for the input 
"RTN","ICDEXD2",52,0)
 ;   date then the first (earliest) Fiscal Year is 
"RTN","ICDEXD2",53,0)
 ;   used.
"RTN","ICDEXD2",54,0)
 ;
"RTN","ICDEXD2",55,0)
 N DRG,FY,FYIEN,MDC,MDCIEN,MY,MYIEN,ROOT,STA,STR S FLAG=$G(FLAG) S:'$L(FLAG) FLAG="I"
"RTN","ICDEXD2",56,0)
 S FILE=$G(FILE) S:FILE=9!(FILE["ICD9") FILE=80  S:FILE=0!(FILE["ICD0") FILE=80.1
"RTN","ICDEXD2",57,0)
 Q:"^80^80.1^"'[("^"_FILE_"^") "-1;Invalid file selected"
"RTN","ICDEXD2",58,0)
 S IEN=+($G(IEN)),CDT=$P($G(CDT),".",1)
"RTN","ICDEXD2",59,0)
 S ROOT=$$ROOT^ICDEX(FILE) S:CDT'?7N CDT=$$DT^XLFDT
"RTN","ICDEXD2",60,0)
 Q:'$L(ROOT) "-1;Invalid file selected"
"RTN","ICDEXD2",61,0)
 K ARY I FILE=80.1 D
"RTN","ICDEXD2",62,0)
 . S STA=1,FY=$O(^ICD0(IEN,2,"B",(CDT+.001)),-1)
"RTN","ICDEXD2",63,0)
 . S:FY'?7N STA=0,FY=$O(^ICD0(IEN,2,"B","")) Q:FY'?7N
"RTN","ICDEXD2",64,0)
 . S FYIEN=$O(^ICD0(IEN,2,"B",+$G(FY),0)) Q:+FYIEN'>0
"RTN","ICDEXD2",65,0)
 . S MDC=0 F  S MDC=$O(^ICD0(IEN,2,FYIEN,1,"B",MDC)) Q:'$L(MDC)  D
"RTN","ICDEXD2",66,0)
 . . S MDCIEN=0 F  S MDCIEN=$O(^ICD0(IEN,2,FYIEN,1,"B",MDC,MDCIEN)) Q:+MDCIEN'>0  D
"RTN","ICDEXD2",67,0)
 . . . S STR="",DRG=""
"RTN","ICDEXD2",68,0)
 . . . F  S DRG=$O(^ICD0(IEN,2,FYIEN,1,MDCIEN,1,"B",DRG)) Q:'$L(DRG)  S STR=STR_DRG_"^"
"RTN","ICDEXD2",69,0)
 . . S ARY(FY,MDC)=STR_";"_FY_";"_STA
"RTN","ICDEXD2",70,0)
 . . I FLAG["E" D
"RTN","ICDEXD2",71,0)
 . . . N ED,EMDC,DRGI,IDRG,DRGOUT
"RTN","ICDEXD2",72,0)
 . . . S ED=$$FMTE^XLFDT(FY,"5DZ"),EMDC=$P($G(^ICM(+MDC,0)),"^",1)
"RTN","ICDEXD2",73,0)
 . . . S ARY(FY,"E","FY")=ED,ARY(FY,"E",MDC)=EMDC
"RTN","ICDEXD2",74,0)
 . . . F DRGI=1:1 Q:'$L($P($G(STR),"^",DRGI))  D
"RTN","ICDEXD2",75,0)
 . . . . N IDRG,DRGOUT S IDRG=$P($G(STR),"^",DRGI) Q:+IDRG'>0
"RTN","ICDEXD2",76,0)
 . . . . K DRGOUT D DRGD^ICDGTDRG(IDRG,"DRGOUT",,$G(CDT))
"RTN","ICDEXD2",77,0)
 . . . . S:$L($G(DRGOUT(1)))&(+DRGI>0) ARY(FY,"E",MDC,IDRG)=$G(DRGOUT(1))
"RTN","ICDEXD2",78,0)
 I FILE=80 D
"RTN","ICDEXD2",79,0)
 . S STA=1,FY=$O(^ICD9(IEN,3,"B",(CDT+.001)),-1)
"RTN","ICDEXD2",80,0)
 . S:FY'?7N STA=0,FY=$O(^ICD9(IEN,3,"B","")) Q:FY'?7N
"RTN","ICDEXD2",81,0)
 . S MY=$O(^ICD9(IEN,4,"B",(FY+.001)))
"RTN","ICDEXD2",82,0)
 . S:MY'?7N MY=$O(^ICD9(IEN,4,"B",""))
"RTN","ICDEXD2",83,0)
 . S MYIEN=$O(^ICD9(IEN,4,"B",+$G(MY),0))
"RTN","ICDEXD2",84,0)
 . S MDC=$P($G(^ICD9(IEN,4,+MYIEN,0)),"^",2)
"RTN","ICDEXD2",85,0)
 . S FYIEN=$O(^ICD9(IEN,3,"B",+$G(FY),0)) Q:+FYIEN'>0
"RTN","ICDEXD2",86,0)
 . S STR="",DRG=""
"RTN","ICDEXD2",87,0)
 . F  S DRG=$O(^ICD9(IEN,3,FYIEN,1,"B",DRG)) Q:'$L(DRG)  S STR=STR_DRG_"^"
"RTN","ICDEXD2",88,0)
 . I +MDC'>0 S MDC=$$DRGMDC^ICDEXD(+STR)
"RTN","ICDEXD2",89,0)
 . S ARY(FY,MDC)=STR_";"_FY_";"_STA
"RTN","ICDEXD2",90,0)
 . I FLAG["E" D
"RTN","ICDEXD2",91,0)
 . . N ED,EMDC,DRGI,IDRG,DRGOUT
"RTN","ICDEXD2",92,0)
 . . S ED=$$FMTE^XLFDT(FY,"5DZ"),EMDC=$P($G(^ICM(+MDC,0)),"^",1)
"RTN","ICDEXD2",93,0)
 . . S ARY(FY,"E","FY")=ED,ARY(FY,"E",MDC)=EMDC
"RTN","ICDEXD2",94,0)
 . . F DRGI=1:1 Q:'$L($P($G(STR),"^",DRGI))  D
"RTN","ICDEXD2",95,0)
 . . . N IDRG,DRGOUT S IDRG=$P($G(STR),"^",DRGI) Q:+IDRG'>0
"RTN","ICDEXD2",96,0)
 . . . K DRGOUT D DRGD^ICDGTDRG(IDRG,"DRGOUT",,$G(CDT))
"RTN","ICDEXD2",97,0)
 . . . S:$L($G(DRGOUT(1)))&(+DRGI>0) ARY(FY,"E",MDC,IDRG)=$G(DRGOUT(1))
"RTN","ICDEXD2",98,0)
 Q
"RTN","ICDEXD2",99,0)
VMDCDX(IEN,CDT) ; Get versioned MDC for Diagnosis Code
"RTN","ICDEXD2",100,0)
 ;
"RTN","ICDEXD2",101,0)
 ; Input
"RTN","ICDEXD2",102,0)
 ;
"RTN","ICDEXD2",103,0)
 ;    IEN    Internal Entry Number file 80
"RTN","ICDEXD2",104,0)
 ;    CDT    Code Set Versioning Date
"RTN","ICDEXD2",105,0)
 ;
"RTN","ICDEXD2",106,0)
 ; Output
"RTN","ICDEXD2",107,0)
 ;
"RTN","ICDEXD2",108,0)
 ;   $$VMDCDX  Versioned MDC
"RTN","ICDEXD2",109,0)
 ;
"RTN","ICDEXD2",110,0)
 N ICDI,ICDD,ICDS,ICDM,ICDY S ICDI=+($G(IEN)) Q:'$D(^ICD9(ICDI,4,"B")) ""
"RTN","ICDEXD2",111,0)
 S ICDS=$P($G(^ICD9(+ICDI,1)),"^",1),ICDD=$$DTBR^ICDEX($G(CDT),0,ICDS)
"RTN","ICDEXD2",112,0)
 S (ICDM,ICDY)="",ICDY=$O(^ICD9(+ICDI,4,"B",(ICDD+.0001)),-1)
"RTN","ICDEXD2",113,0)
 S ICDM=$O(^ICD9(ICDI,4,"B",+ICDY,ICDM))
"RTN","ICDEXD2",114,0)
 Q $P($G(^ICD9(ICDI,4,+ICDM,0)),U,2)
"RTN","ICDEXD2",115,0)
VMDCOP(IEN,MDC,CDT) ; Get versioned MDC for Op/Pro ICD code from previous years
"RTN","ICDEXD2",116,0)
 ;
"RTN","ICDEXD2",117,0)
 ; Input
"RTN","ICDEXD2",118,0)
 ;
"RTN","ICDEXD2",119,0)
 ;    IEN    Internal Entry Number file 80.1
"RTN","ICDEXD2",120,0)
 ;    MDC    Major Diagnostic Category
"RTN","ICDEXD2",121,0)
 ;    CDT    Code Set Versioning Date
"RTN","ICDEXD2",122,0)
 ;
"RTN","ICDEXD2",123,0)
 ; Output
"RTN","ICDEXD2",124,0)
 ;
"RTN","ICDEXD2",125,0)
 ;   $$VMDCOP  4 piece "^" delimited string
"RTN","ICDEXD2",126,0)
 ;
"RTN","ICDEXD2",127,0)
 ;             1   Fiscal Year  Fileman format
"RTN","ICDEXD2",128,0)
 ;             2   MDC          Pointer to file 80.3
"RTN","ICDEXD2",129,0)
 ;             3   Fiscal Year  pointer to sub-file 80.171
"RTN","ICDEXD2",130,0)
 ;                              (formerly known as DADRGFY)
"RTN","ICDEXD2",131,0)
 ;             4   MDC          pointer to sub-file 80.1711
"RTN","ICDEXD2",132,0)
 ;                                (formerly known as DAMDC)
"RTN","ICDEXD2",133,0)
 ;
"RTN","ICDEXD2",134,0)
 N ICDI,ICDC,ICDD,ICDO,ICDY,ICDM,ICDS S ICDI=+($G(IEN)) Q:'$D(^ICD0(ICDI,2,"B")) ""
"RTN","ICDEXD2",135,0)
 S ICDC=$G(MDC) Q:'$L(MDC) ""  S ICDS=$P($G(^ICD0(+ICDI,1)),"^",1)
"RTN","ICDEXD2",136,0)
 S ICDD=$$DTBR^ICDEX($G(CDT),0,ICDS) S (ICDM,ICDY)=""
"RTN","ICDEXD2",137,0)
 S ICDD=ICDD+.0001 F  S ICDD=$O(^ICD0(ICDI,2,"B",ICDD),-1) Q:'ICDD!(ICDM>0)  D
"RTN","ICDEXD2",138,0)
 . S ICDY=$O(^ICD0(ICDI,2,"B",+$G(ICDD),ICDY)),ICDO=ICDD
"RTN","ICDEXD2",139,0)
 . S ICDM=$O(^ICD0(ICDI,2,+ICDY,1,"B",ICDC,ICDM))
"RTN","ICDEXD2",140,0)
 Q:'$L($G(ICDO)) ""
"RTN","ICDEXD2",141,0)
 Q (ICDO_"^"_ICDC_"^"_ICDY_"^"_ICDM)
"RTN","ICDEXD2",142,0)
 ;
"RTN","ICDEXD2",143,0)
MDCG(IEN,CDT,ARY) ; Set up ICDMDC() array
"RTN","ICDEXD2",144,0)
 ;
"RTN","ICDEXD2",145,0)
 ; Input
"RTN","ICDEXD2",146,0)
 ;
"RTN","ICDEXD2",147,0)
 ;    IEN    ICD Diagnosis (IEN)
"RTN","ICDEXD2",148,0)
 ;    CDT    Code Set Versioning Date
"RTN","ICDEXD2",149,0)
 ;   .ARY    Array name passed by reference
"RTN","ICDEXD2",150,0)
 ;
"RTN","ICDEXD2",151,0)
 ; Output
"RTN","ICDEXD2",152,0)
 ;
"RTN","ICDEXD2",153,0)
 ;    ARY    Array listing MDCs for all DRGs
"RTN","ICDEXD2",154,0)
 ;
"RTN","ICDEXD2",155,0)
 ;      ARY=MDC
"RTN","ICDEXD2",156,0)
 ;      ARY(MDC)=""
"RTN","ICDEXD2",157,0)
 ;
"RTN","ICDEXD2",158,0)
 N I,ICDC,ICDO,ICDTMP,ICDS,ICDD,DRGS S IEN=$G(IEN) Q:+IEN'>0  S ICDS=$P($G(^ICD9(+IEN,1)),"^",1)
"RTN","ICDEXD2",159,0)
 S ICDD=$$DTBR^ICDEX($G(CDT),0,ICDS) Q:'$L(IEN)  S ICDO=$G(ARY) K ARY S:$L(ICDO) ARY=ICDO
"RTN","ICDEXD2",160,0)
 S ICDTMP=$$GETDRG^ICDEX(80,IEN,ICDD) Q:'$P(ICDTMP,";",3)  S DRGS=$P(ICDTMP,";")
"RTN","ICDEXD2",161,0)
 F I=1:1 Q:'$L($P(DRGS,"^",I))  Q:'$P(DRGS,"^",I)  D
"RTN","ICDEXD2",162,0)
 . N DRG,MDC S DRG=$P(DRGS,"^",I) Q:DRG=""  S MDC=$P($$DRG^ICDGTDRG(DRG,ICDD),"^",5) Q:MDC=""  S ARY(MDC)=""
"RTN","ICDEXD2",163,0)
 Q
"RTN","ICDEXD2",164,0)
MDCT(IEN,CDT,ARY,FMT) ; For Multiple MDC DX Codes
"RTN","ICDEXD2",165,0)
 ;
"RTN","ICDEXD2",166,0)
 ; Input:
"RTN","ICDEXD2",167,0)
 ;
"RTN","ICDEXD2",168,0)
 ;    IEN  Internal Entry Number for file 80.1
"RTN","ICDEXD2",169,0)
 ;    CDT  Code Set Versioning Date
"RTN","ICDEXD2",170,0)
 ;   .ARY  Array of MDCs passed by reference (required)
"RTN","ICDEXD2",171,0)
 ;    FMT  Output Format (optional)
"RTN","ICDEXD2",172,0)
 ;
"RTN","ICDEXD2",173,0)
 ;           0   Boolean value only (default)
"RTN","ICDEXD2",174,0)
 ;           1   2 piece "^" delimited string
"RTN","ICDEXD2",175,0)
 ;                  1   Boolean value
"RTN","ICDEXD2",176,0)
 ;                  2   String of matching MDCs delimited by ";"
"RTN","ICDEXD2",177,0)
 ; Output:
"RTN","ICDEXD2",178,0)
 ;
"RTN","ICDEXD2",179,0)
 ;  $$MDCT  Boolean value
"RTN","ICDEXD2",180,0)
 ;
"RTN","ICDEXD2",181,0)
 ;           0  The ICD Procedure code identified by IEN
"RTN","ICDEXD2",182,0)
 ;              does not include any of the MDCs passed 
"RTN","ICDEXD2",183,0)
 ;              in .ARY(MDC) on the date specified (CDT)
"RTN","ICDEXD2",184,0)
 ;
"RTN","ICDEXD2",185,0)
 ;           1  The ICD Procedure code identified by IEN 
"RTN","ICDEXD2",186,0)
 ;              includes one or more of the MDCs passed
"RTN","ICDEXD2",187,0)
 ;              in .ARY(MDC) on the date specified (CDT)
"RTN","ICDEXD2",188,0)
 ;
"RTN","ICDEXD2",189,0)
 N FY,FYI,I,MD,MDC,OK,STR
"RTN","ICDEXD2",190,0)
 S IEN=+($G(IEN)) Q:'$D(^ICD0(+IEN,0)) 0
"RTN","ICDEXD2",191,0)
 Q:$P($G(^ICD0(IEN,1)),"^",7)>0 0
"RTN","ICDEXD2",192,0)
 S CDT=$G(CDT) S:CDT'?7N CDT=$$DT^XLFDT
"RTN","ICDEXD2",193,0)
 S FMT=+($G(FMT)),(STR,MD)="",OK=0 F I=1:1 S MD=$O(ARY(MD)) Q:MD=""  D
"RTN","ICDEXD2",194,0)
 . N FY,FYI,MDC S FY=$O(^ICD0(IEN,2,"B",(+CDT+.001)),-1) Q:FY'?7N
"RTN","ICDEXD2",195,0)
 . S FYI=$O(^ICD0(IEN,2,"B",+FY,0))
"RTN","ICDEXD2",196,0)
 . S MDC=$D(^ICD0(IEN,2,+FYI,1,"B",MD))
"RTN","ICDEXD2",197,0)
 . S:MDC>0 STR=STR_";"_MD
"RTN","ICDEXD2",198,0)
 . S:MDC>0 OK=1
"RTN","ICDEXD2",199,0)
 F  Q:$E(STR,1)'=";"  S STR=$E(STR,2,$L(STR))
"RTN","ICDEXD2",200,0)
 S OK=+OK S:FMT>0&($L(STR)) OK=OK_"^"_STR
"RTN","ICDEXD2",201,0)
 Q OK
"RTN","ICDEXD2",202,0)
MDCD(IEN,MDC,CDT) ; Check for default MDC
"RTN","ICDEXD2",203,0)
 ;
"RTN","ICDEXD2",204,0)
 ; Input:
"RTN","ICDEXD2",205,0)
 ;
"RTN","ICDEXD2",206,0)
 ;    IEN  Internal Entry Number for file 80.1
"RTN","ICDEXD2",207,0)
 ;    MDC  Major Diagnostic Category
"RTN","ICDEXD2",208,0)
 ;    CDT  Code Set Versioning Date (optional)
"RTN","ICDEXD2",209,0)
 ;         If not passed, the first FY is used
"RTN","ICDEXD2",210,0)
 ;
"RTN","ICDEXD2",211,0)
 ; Output:
"RTN","ICDEXD2",212,0)
 ;
"RTN","ICDEXD2",213,0)
 ;   $$MDCD  Boolean value
"RTN","ICDEXD2",214,0)
 ;
"RTN","ICDEXD2",215,0)
 ;           0  MDC Does not exist
"RTN","ICDEXD2",216,0)
 ;           1  MDC Exist
"RTN","ICDEXD2",217,0)
 ;
"RTN","ICDEXD2",218,0)
 N ICDY,ICDM,ICDD,ICDF S ICDY=+($G(IEN)) Q:'$D(^ICD0(+IEN,2,1,1)) 0  S ICDM=$G(MDC) Q:'$L(ICDM) 0
"RTN","ICDEXD2",219,0)
 S ICDD=$G(CDT),ICDF=$O(^ICD0(+ICDY,2,"B",(ICDD+.001)),-1) S:ICDF'?7N ICDF=$O(^ICD0(+ICDY,2,"B",""))
"RTN","ICDEXD2",220,0)
 S ICDF=$O(^ICD0(+ICDY,2,"B",+ICDF,0)) Q:ICDF'>0 $S($D(^ICD0(ICDY,2,1,1,"B",ICDM))>0:1,1:0)
"RTN","ICDEXD2",221,0)
 Q:ICDF>0 $S($D(^ICD0(ICDY,2,+ICDF,1,"B",ICDM))>0:1,1:0)
"RTN","ICDEXD2",222,0)
MDCN(IEN) ; Major Diagnostic Category Name
"RTN","ICDEXD2",223,0)
 ;
"RTN","ICDEXD2",224,0)
 ; Input:
"RTN","ICDEXD2",225,0)
 ;
"RTN","ICDEXD2",226,0)
 ;    IEN    Internal Entry Number for file 80.3
"RTN","ICDEXD2",227,0)
 ;
"RTN","ICDEXD2",228,0)
 ; Output:
"RTN","ICDEXD2",229,0)
 ;
"RTN","ICDEXD2",230,0)
 ;   $$MDCN  Major Diagnostic Category Name
"RTN","ICDEXD2",231,0)
 ;
"RTN","ICDEXD2",232,0)
 ; Replaces ICR 1586
"RTN","ICDEXD2",233,0)
 ; 
"RTN","ICDEXD2",234,0)
 Q $P($G(^ICM(+($G(IEN)),0)),"^",1)
"RTN","ICDEXD2",235,0)
MOR(IEN) ; Major O.R. Procedure
"RTN","ICDEXD2",236,0)
 ;
"RTN","ICDEXD2",237,0)
 ; Input:
"RTN","ICDEXD2",238,0)
 ;
"RTN","ICDEXD2",239,0)
 ;    IEN   Internal Entry Number for file 80.1
"RTN","ICDEXD2",240,0)
 ;
"RTN","ICDEXD2",241,0)
 ; Output:
"RTN","ICDEXD2",242,0)
 ;
"RTN","ICDEXD2",243,0)
 ;   $$MOR  Major O.R. Procedure
"RTN","ICDEXD2",244,0)
 ;
"RTN","ICDEXD2",245,0)
 Q $G(^ICD0(+($G(IEN)),"M"))
"RTN","ICDEXD2",246,0)
 ;
"RTN","ICDEXD2",247,0)
ISVALID(FILE,IEN,CDT) ; Is an ICD code Valid
"RTN","ICDEXD2",248,0)
 ;
"RTN","ICDEXD2",249,0)
 ; Input:
"RTN","ICDEXD2",250,0)
 ; 
"RTN","ICDEXD2",251,0)
 ;    FILE        File or global root
"RTN","ICDEXD2",252,0)
 ;    IEN         Internal Entry Number
"RTN","ICDEXD2",253,0)
 ;    CDT         Effective date to use (default TODAY)
"RTN","ICDEXD2",254,0)
 ;
"RTN","ICDEXD2",255,0)
 ; Output:
"RTN","ICDEXD2",256,0)
 ; 
"RTN","ICDEXD2",257,0)
 ;    $$ISVALID   This is a Boolean value
"RTN","ICDEXD2",258,0)
 ;  
"RTN","ICDEXD2",259,0)
 ;                  1 if the code is valid
"RTN","ICDEXD2",260,0)
 ;                  0 if the code is not valid
"RTN","ICDEXD2",261,0)
 ;
"RTN","ICDEXD2",262,0)
 N ICDO,ICDD,ICDF,ICDT,ICDX,ICDI,ICDR S ICDO=0
"RTN","ICDEXD2",263,0)
 S FILE=$S(FILE="9":80,FILE="0":80.1,1:FILE)
"RTN","ICDEXD2",264,0)
 S ICDD=$P($G(CDT),".",1) S:ICDD'?7N ICDD=$$DT^XLFDT
"RTN","ICDEXD2",265,0)
 S ICDF=$$FILE^ICDEX(FILE) Q:"^80^80.1^"'[("^"_FILE_"^") ICDO
"RTN","ICDEXD2",266,0)
 S ICDR=$$ROOT^ICDEX(FILE),ICDI=+($G(IEN)) Q:+ICDI'>0 ICDO
"RTN","ICDEXD2",267,0)
 Q:'$D(@(ICDR_+ICDI_",0)")) ICDO  S ICDX=$$EXC^ICDEX(ICDF,ICDI) Q:ICDX>0 ICDO
"RTN","ICDEXD2",268,0)
 S ICDT=$$LS^ICDEX(ICDF,ICDI,ICDD) I ICDT>0 S ICDO=1
"RTN","ICDEXD2",269,0)
 Q ICDO
"RTN","ICDEXD2",270,0)
REF(IEN,CDT) ; Return Reference Table
"RTN","ICDEXD2",271,0)
 ;
"RTN","ICDEXD2",272,0)
 ;  Input:
"RTN","ICDEXD2",273,0)
 ;  
"RTN","ICDEXD2",274,0)
 ;    IEN    Internal Entry Number
"RTN","ICDEXD2",275,0)
 ;    CDT    Effective date to use (default TODAY)
"RTN","ICDEXD2",276,0)
 ;
"RTN","ICDEXD2",277,0)
 ;  Output:
"RTN","ICDEXD2",278,0)
 ;  
"RTN","ICDEXD2",279,0)
 ;    $$REF  Table reference associated DRG entry
"RTN","ICDEXD2",280,0)
 ;           or null if not found
"RTN","ICDEXD2",281,0)
 ; 
"RTN","ICDEXD2",282,0)
 N ICDI,ICDD,ICDR,ICDFY,ICDR
"RTN","ICDEXD2",283,0)
 S ICDI=+($G(IEN)) Q:+IEN'>0!('$D(^ICD(IEN,2))) ""
"RTN","ICDEXD2",284,0)
 S (ICDFY,ICDR)="",ICDD=$P($G(CDT),".",1)
"RTN","ICDEXD2",285,0)
 S:ICDD'?7N ICDD=$$DT^XLFDT
"RTN","ICDEXD2",286,0)
 S ICDFY=$O(^ICD(ICDI,2,"B",(+ICDD+.01)),-1)
"RTN","ICDEXD2",287,0)
 S ICDR=$O(^ICD(ICDI,2,"B",+ICDFY,ICDR))
"RTN","ICDEXD2",288,0)
 S ICDR=$P($G(^ICD(ICDI,2,+ICDR,0)),U,3)
"RTN","ICDEXD2",289,0)
 Q ICDR
"RTN","ICDEXLK2")
0^2^B168140554^B167936583
"RTN","ICDEXLK2",1,0)
ICDEXLK2 ;SLC/KER - ICD Extractor - Lookup, SBR/Ask/One/Mul ;12/19/2014
"RTN","ICDEXLK2",2,0)
 ;;18.0;DRG Grouper;**57,67,82**;Oct 20, 2000;Build 21
"RTN","ICDEXLK2",3,0)
 ;               
"RTN","ICDEXLK2",4,0)
 ; Global Variables
"RTN","ICDEXLK2",5,0)
 ;    ^TMP(SUB,$J         SACC 2.3.2.5.1
"RTN","ICDEXLK2",6,0)
 ;               
"RTN","ICDEXLK2",7,0)
 ; External References
"RTN","ICDEXLK2",8,0)
 ;    CLRMSG^DDS          ICR   5846
"RTN","ICDEXLK2",9,0)
 ;    HLP^DDSMSG          ICR   5847
"RTN","ICDEXLK2",10,0)
 ;    ^DIR                ICR  10026
"RTN","ICDEXLK2",11,0)
 ;    $$DT^XLFDT          ICR  10103
"RTN","ICDEXLK2",12,0)
 ;    $$FMADD^XLFDT       ICR  10103
"RTN","ICDEXLK2",13,0)
 ;    $$UP^XLFSTR         ICR  10104
"RTN","ICDEXLK2",14,0)
 ;               
"RTN","ICDEXLK2",15,0)
 ; Local Variables NEWed or KILLed Elsewhere
"RTN","ICDEXLK2",16,0)
 ;     DDS,DIC,DICR,ICDCDT,ICDDIC0,ICDDICA,
"RTN","ICDEXLK2",17,0)
 ;     ICDDICB,ICDDICN,ICDFMT,ICDISF,ICDOFND,
"RTN","ICDEXLK2",18,0)
 ;     ICDOINP,ICDOREV,ICDOSEL,ICDOTIM,ICDOUPA
"RTN","ICDEXLK2",19,0)
 ;     ICDOUT,ICDSYS,ICDVER,ICDX,INP1,INP2
"RTN","ICDEXLK2",20,0)
 ;     
"RTN","ICDEXLK2",21,0)
 Q
"RTN","ICDEXLK2",22,0)
ASK ; Ask for Selection
"RTN","ICDEXLK2",23,0)
 K X,Y N ANS S ICDOFND=+($G(ICDOFND)) Q:+ICDOFND'>0
"RTN","ICDEXLK2",24,0)
 I ICDOFND=1,DIC(0)'["E" D  Q
"RTN","ICDEXLK2",25,0)
 . K X,Y D X(1,SUB) S (ICDOFND,ICDOSEL,ICDOREV)=1
"RTN","ICDEXLK2",26,0)
 . D Y($G(ROOT),+($G(^TMP(SUB,$J,"SEL",1))),$G(ICDCDT))
"RTN","ICDEXLK2",27,0)
 . I +($G(Y))'>0,$L($G(INP)) S X=$G(INP) Q
"RTN","ICDEXLK2",28,0)
 . I +($G(Y))>0 D:$G(DIC(0))'["F" SAV^ICDEXLK6(+($G(Y)),ROOT)
"RTN","ICDEXLK2",29,0)
 I ICDOFND>1,DIC(0)'["E" D  Q
"RTN","ICDEXLK2",30,0)
 . K Y S Y="-1^Selection not made" S ICDOSEL=0
"RTN","ICDEXLK2",31,0)
 S:+ICDOFND=1 ANS=$$ONE S:+ICDOFND>1 ANS=$$MUL S ICDOSEL=0
"RTN","ICDEXLK2",32,0)
 I ANS>0 D
"RTN","ICDEXLK2",33,0)
 . D X(+ANS,SUB) S ICDOSEL=1
"RTN","ICDEXLK2",34,0)
 . D Y($G(ROOT),+($G(^TMP(SUB,$J,"SEL",+ANS))),$G(ICDCDT))
"RTN","ICDEXLK2",35,0)
 . I +($G(Y))'>0,$L($G(INP)) S X=$G(INP) Q
"RTN","ICDEXLK2",36,0)
 . I +($G(Y))>0 D:$G(DIC(0))'["F" SAV^ICDEXLK6(+($G(Y)),ROOT)
"RTN","ICDEXLK2",37,0)
 I ANS'>0 K INP,X,Y,^TMP(SUB,$J)
"RTN","ICDEXLK2",38,0)
 Q
"RTN","ICDEXLK2",39,0)
SBR ;   Space-Bar Return DIC(0) not contain "A"
"RTN","ICDEXLK2",40,0)
 N SBI,SUB,OUT,ANS,SBS K Y S Y=-1 Q:'$L($G(ROOT))  Q:ROOT="^"  Q:'$L($G(FILE))
"RTN","ICDEXLK2",41,0)
 S SBI=$$RET^ICDEXLK6($G(FILE)),SUB=$TR($G(ROOT),"^(","") K:$L(SUB) ^TMP(SUB,$J) Q:+SBI'>0
"RTN","ICDEXLK2",42,0)
 S SBS=$P($G(@(ROOT_+SBI_",1)")),"^",1) Q:+SBS'>0  Q:+SBI>0&(+SBS>0)&(+($G(ICDSYS))>0)&(+($G(ICDSYS))'=+SBS)
"RTN","ICDEXLK2",43,0)
 D FND^ICDEXLK5($G(ROOT),+SBI,$G(ICDCDT),$G(ICDSYS),$G(ICDVER),0,$G(ICDOUT))
"RTN","ICDEXLK2",44,0)
 D SEL^ICDEXLK5(ROOT,0) Q:'$D(^TMP(SUB,$J,"SEL",1))  S ANS=$$ONE I ANS>0 D
"RTN","ICDEXLK2",45,0)
 . D X(1,SUB) S (ICDOFND,ICDOSEL,ICDOREV)=1
"RTN","ICDEXLK2",46,0)
 . D Y($G(ROOT),+($G(^TMP(SUB,$J,"SEL",1))),$G(ICDCDT))
"RTN","ICDEXLK2",47,0)
 . I +($G(Y))'>0,$L($G(INP)) S X=$G(INP) Q
"RTN","ICDEXLK2",48,0)
 . I +($G(Y))>0 D:$G(DIC(0))'["F" SAV^ICDEXLK6(+($G(Y)),ROOT)
"RTN","ICDEXLK2",49,0)
 S:+Y>0&($L($P(Y,"^",2))) X=$P(Y,"^",2)
"RTN","ICDEXLK2",50,0)
 I ANS'>0 K INP,X,Y,^TMP(SUB,$J) S X="",Y="-1^No user input"
"RTN","ICDEXLK2",51,0)
 Q
"RTN","ICDEXLK2",52,0)
ONE(X) ;   One Entry Found
"RTN","ICDEXLK2",53,0)
 S:'$D(DDS) X=$$ONERS S:$D(DDS) X=$$ONESM S ICDOREV=1
"RTN","ICDEXLK2",54,0)
 Q X
"RTN","ICDEXLK2",55,0)
ONERS(X) ;     One Entry Found           Roll and Scroll
"RTN","ICDEXLK2",56,0)
 N DIROUT,DIRUT,DIR,IEN,LN,LN2,ICDI,ICDPR,TEXT,TXT,TX,CT,Y S ICDOREV=1
"RTN","ICDEXLK2",57,0)
 S TEXT=$G(^TMP(SUB,$J,"SEL",1)) Q:$G(DIC(0))'["E" 1
"RTN","ICDEXLK2",58,0)
 S IEN=+TEXT,TEXT=$P(TEXT,U,2),TXT(1)=TEXT
"RTN","ICDEXLK2",59,0)
 I $G(ICDFMT)=1!($G(ICDFMT)=2) D
"RTN","ICDEXLK2",60,0)
 . K TX S TXT(1)=TEXT D PAR^ICDEX(.TXT,64) K TX2 F ICDI=2:1:8 D
"RTN","ICDEXLK2",61,0)
 . . S:$L($G(TXT(ICDI))) TX2(1)=$G(TX2(1))_" "_$G(TXT(ICDI))
"RTN","ICDEXLK2",62,0)
 . S TX(1)=$G(TXT(1)) I $D(TX2) D
"RTN","ICDEXLK2",63,0)
 . . N SP S SP="          " D PAR^ICDEX(.TX2,54) S ICDI=0
"RTN","ICDEXLK2",64,0)
 . . F  S ICDI=$O(TX2(ICDI)) Q:+ICDI'>0  D
"RTN","ICDEXLK2",65,0)
 . . . N CT Q:'$L($G(TX2(ICDI)))
"RTN","ICDEXLK2",66,0)
 . . . S CT=$O(TX(" "),-1)+1 S TX(CT)=SP_$G(TX2(ICDI))
"RTN","ICDEXLK2",67,0)
 I $G(ICDFMT)'=1&($G(ICDFMT)'=2) D
"RTN","ICDEXLK2",68,0)
 . K TX N ICDI D PAR^ICDEX(.TXT,64) S ICDI=0 F  S ICDI=$O(TXT(ICDI)) Q:+ICDI'>0  D
"RTN","ICDEXLK2",69,0)
 . . N CT S CT=$O(TX(" "),-1)+1 S TX(CT)=$G(TXT(ICDI))
"RTN","ICDEXLK2",70,0)
 S DIR("A",1)=" One match found",DIR("A",2)=" "
"RTN","ICDEXLK2",71,0)
 S ICDI=0 F  S ICDI=$O(TX(ICDI)) Q:+ICDI'>0  D
"RTN","ICDEXLK2",72,0)
 . Q:'$L($G(TX(ICDI)))  N CT S CT=$O(DIR("A"," "),-1)+1
"RTN","ICDEXLK2",73,0)
 . S DIR("A",CT)=("     "_$G(TX(ICDI)))
"RTN","ICDEXLK2",74,0)
 S CT=$O(DIR("A"," "),-1)+1,DIR("A",CT)=" ",DIR("A")="   OK?  "
"RTN","ICDEXLK2",75,0)
 S DIR("B")="Yes",DIR(0)="YAO" W !
"RTN","ICDEXLK2",76,0)
 S ICDPR="" I $L($G(DICR(2,1))),$L($G(DICR(1,1))) D
"RTN","ICDEXLK2",77,0)
 . S ICDPR=DICR(1,1)_$C(34)_"B"_$C(34)_","_+IEN_")"
"RTN","ICDEXLK2",78,0)
 I $L(ICDPR),$D(@ICDPR) D  Q 1
"RTN","ICDEXLK2",79,0)
 . S LN=$O(DIR("A"," "),-1) I LN>0 N LN2 F LN2=1:1:(LN-1) W !,DIR("A",LN2)
"RTN","ICDEXLK2",80,0)
 K DIROUT,DIRUT,DUOUT,DTOUT D ^DIR S:$D(DTOUT) ICDOTIM=1,Y=-1
"RTN","ICDEXLK2",81,0)
 S:$D(DUOUT) ICDOUPA=1,Y=-1 S:$D(DIROUT) ICDOUPA=2,Y=-1
"RTN","ICDEXLK2",82,0)
 Q:+Y>0 1
"RTN","ICDEXLK2",83,0)
 Q -1
"RTN","ICDEXLK2",84,0)
ONESM(X) ;     One Entry Found           ScreenMan
"RTN","ICDEXLK2",85,0)
 N DIROUT,DIRUT,ANS,CODE,ICDMENU,IEN,ITEM,TEXT,VST S ICDOREV=1
"RTN","ICDEXLK2",86,0)
 S ITEM=$G(^TMP(SUB,$J,"SEL",1)) Q:'$L(ITEM) -1
"RTN","ICDEXLK2",87,0)
 S IEN=+ITEM,TEXT=$P(ITEM,U,2) S CODE=$$CODEC^ICDEX(+($G(FILE)),IEN)
"RTN","ICDEXLK2",88,0)
 S VST=$$VST^ICDEX(+($G(FILE)),IEN,ICDCDT)
"RTN","ICDEXLK2",89,0)
 I $L(CODE),$L(VST) S TEXT=CODE,TEXT=TEXT_$J(" ",(9-$L(TEXT)))_VST
"RTN","ICDEXLK2",90,0)
 Q:'$L(TEXT) -1 S ICDMENU(1)=("     "_$G(TEXT)),ICDMENU(2)="   OK? Yes//  "
"RTN","ICDEXLK2",91,0)
 S ICDMENU="ICDMENU" D HLP^DDSMSG(.ICDMENU) S ICDOREV=1
"RTN","ICDEXLK2",92,0)
 R ANS:300 S X="" S:'$T ICDOTIM=1 S:'$L(ANS) ANS="Y" S:$G(ANS)["^" ICDOUPA=1
"RTN","ICDEXLK2",93,0)
 S:$G(ANS)["^^" ICDOUPA=2 S:$G(ICDOTIM)=1 X="^^" S:$G(ICDOUPA)=1 X="^"
"RTN","ICDEXLK2",94,0)
 S:$G(ICDOUPA)=2 X="^^" D CLRMSG^DDS Q:X["^" X
"RTN","ICDEXLK2",95,0)
 S ANS=$E(ANS,1) S X=$S("^Y^y^"[("^"_ANS_"^"):1,1:-1)
"RTN","ICDEXLK2",96,0)
 Q X
"RTN","ICDEXLK2",97,0)
MUL(X) ;   Multiple Entries Found
"RTN","ICDEXLK2",98,0)
 S:'$D(DDS) X=$$MULRS S:$D(DDS) X=$$MULSM
"RTN","ICDEXLK2",99,0)
 Q X
"RTN","ICDEXLK2",100,0)
MULRS(X) ;     Multiple Entries Found    Roll and Scroll
"RTN","ICDEXLK2",101,0)
 Q:+($G(EXIT))>0 "^^"  N ENT,EXIT,IEN,ITEM,LEN,MAX,ROOT,SEL,TEXT,TOT,Y
"RTN","ICDEXLK2",102,0)
 Q:$G(DIC(0))'["E" -1  S ROOT=$G(DIC),LEN=+($G(ICDDICN)) S:+LEN'>0 LEN=5
"RTN","ICDEXLK2",103,0)
 S (MAX,ENT,SEL,EXIT)=0,U="^",TOT=$G(^TMP(SUB,$J,"SEL",0))
"RTN","ICDEXLK2",104,0)
 S SEL=0 G:+TOT=0 MULQ W:+TOT>1 !!," ",TOT," matches found"
"RTN","ICDEXLK2",105,0)
 F ENT=1:1:TOT Q:((SEL>0)&(SEL<ENT+1))  Q:EXIT  D  Q:EXIT
"RTN","ICDEXLK2",106,0)
 . N ITEM,IEN,TEXT S ITEM=$G(^TMP(SUB,$J,"SEL",ENT))
"RTN","ICDEXLK2",107,0)
 . S IEN=+ITEM,TEXT=$P(ITEM,U,2) Q:'$L(TEXT)
"RTN","ICDEXLK2",108,0)
 . S MAX=ENT W:ENT#LEN=1 ! D MULRSW S:ENT=TOT ICDOREV=1
"RTN","ICDEXLK2",109,0)
 . W:ENT#LEN=0 ! S:ENT#LEN=0 SEL=$$MULRSS(MAX,ENT) S:SEL["^" EXIT=1
"RTN","ICDEXLK2",110,0)
 I ENT#LEN'=0,+SEL=0 W ! S SEL=$$MULRSS(MAX,ENT) S:SEL["^" EXIT=1
"RTN","ICDEXLK2",111,0)
 G MULQ
"RTN","ICDEXLK2",112,0)
 Q X
"RTN","ICDEXLK2",113,0)
MULRSW ;       Write Multiple          Roll and Scroll
"RTN","ICDEXLK2",114,0)
 Q:+($G(IEN))'>0  Q:'$L($G(ROOT))  Q:'$L($G(TEXT))
"RTN","ICDEXLK2",115,0)
 N ICDI,IND,NR,TAB,TX2,TXT,Y,RT,LEN S (TAB,IND)=8
"RTN","ICDEXLK2",116,0)
 S RT=$$ROOT^ICDEX(ROOT)
"RTN","ICDEXLK2",117,0)
 S:+($G(ICDOUT))<3 IND=18 W !,$J(ENT,5),".",?TAB
"RTN","ICDEXLK2",118,0)
 S:$G(DIC(0))["S"&($G(IND))>7 IND=TAB
"RTN","ICDEXLK2",119,0)
 I +($G(ICDISF))'>0,$L($G(DIC("W"))) D  Q
"RTN","ICDEXLK2",120,0)
 . N Y,NR D Y(ROOT,IEN,ICDCDT)
"RTN","ICDEXLK2",121,0)
 . S NR=$G(@(RT_+IEN_",0)"))
"RTN","ICDEXLK2",122,0)
 . W $P(NR,"^",1),"  " X DIC("W") Q
"RTN","ICDEXLK2",123,0)
 I +($G(ICDISF))'>0,$D(DIC("W")),DIC("W")="" D  Q
"RTN","ICDEXLK2",124,0)
 . W $P($G(@(RT_+IEN_",0)")),"^",1)
"RTN","ICDEXLK2",125,0)
 I +($G(ICDOUT))<3 D  Q
"RTN","ICDEXLK2",126,0)
 . N ICDI,LEN S TXT(1)=TEXT D PAR^ICDEX(.TXT,64) K TX2 F ICDI=2:1:8 D
"RTN","ICDEXLK2",127,0)
 . . S:$L($G(TXT(ICDI))) TX2(1)=$G(TX2(1))_" "_$G(TXT(ICDI))
"RTN","ICDEXLK2",128,0)
 . W $G(TXT(1)) I $D(TX2) D
"RTN","ICDEXLK2",129,0)
 . . N LEN S LEN=54 S:$G(DIC(0))["S" LEN=64
"RTN","ICDEXLK2",130,0)
 . . S:$G(DIC(0))["S" IND=TAB
"RTN","ICDEXLK2",131,0)
 . . D PAR^ICDEX(.TX2,LEN) S ICDI=0
"RTN","ICDEXLK2",132,0)
 . . F  S ICDI=$O(TX2(ICDI)) Q:+ICDI'>0  W !,?IND,$G(TX2(ICDI))
"RTN","ICDEXLK2",133,0)
 S TXT(1)=TEXT
"RTN","ICDEXLK2",134,0)
 D PAR^ICDEX(.TXT,64) S ICDI=0 F  S ICDI=$O(TXT(ICDI)) Q:+ICDI'>0  D
"RTN","ICDEXLK2",135,0)
 . Q:'$L($G(TXT(ICDI)))  W:ICDI>1 ! W ?IND,$G(TXT(ICDI))
"RTN","ICDEXLK2",136,0)
 Q
"RTN","ICDEXLK2",137,0)
MULRSS(LEX,LS) ;       Select Multiple         Roll and Scroll
"RTN","ICDEXLK2",138,0)
 Q:+($G(EXIT))>0 "^^"  N DTOUT,DUOUT,DIRUT,DIROUT,DIR,DIRB,HLP
"RTN","ICDEXLK2",139,0)
 N LAST,MAX,NEXT,RAN,X,Y S MAX=+($G(LEX)),LAST=+($G(LS)) Q:MAX=0 -1
"RTN","ICDEXLK2",140,0)
 S RAN=" Select 1-"_MAX_":  ",NEXT=$O(^TMP(SUB,$J,"SEL",+LAST))
"RTN","ICDEXLK2",141,0)
 S:+NEXT>0 DIR("A")=" Press <RETURN> for more, '^' to exit, or"_RAN
"RTN","ICDEXLK2",142,0)
 S:+NEXT'>0 DIR("A")=RAN
"RTN","ICDEXLK2",143,0)
 S HLP="    Answer must be from 1 to "_MAX_", or <Return> to continue"
"RTN","ICDEXLK2",144,0)
 S DIR("PRE")="S:X[""?"" X=""??"""
"RTN","ICDEXLK2",145,0)
 S (DIR("?"),DIR("??"))="^D MULRSSH^ICDEXLK2"
"RTN","ICDEXLK2",146,0)
 S DIR(0)="NAO^1:"_MAX_":0" K DIROUT,DIRUT,DUOUT,DTOUT D ^DIR
"RTN","ICDEXLK2",147,0)
 S:$D(DTOUT) ICDOTIM=1,EXIT=1,Y=-1,X="^^" S:$D(DUOUT) ICDOUPA=1,Y=-1,X="^"
"RTN","ICDEXLK2",148,0)
 S:$D(DIROUT) ICDOUPA=2,Y=-1,X="^^" S LEX=+Y S:$D(DTOUT)!(X[U) LEX=U
"RTN","ICDEXLK2",149,0)
 Q LEX
"RTN","ICDEXLK2",150,0)
MULRSSH ;       Select Multiple Help    Roll and Scroll
"RTN","ICDEXLK2",151,0)
 I $L($G(HLP)) W !,$G(HLP) Q
"RTN","ICDEXLK2",152,0)
 Q
"RTN","ICDEXLK2",153,0)
MULSM(X) ;     Multiple Entries Found    ScreenMan
"RTN","ICDEXLK2",154,0)
 Q:+($G(EXIT))>0 "^^"  N CODE,CTR,ENT,EXIT,ICDMENU,IEN,ITEM,LEN
"RTN","ICDEXLK2",155,0)
 N MAX,ROOT,SEL,TEXT,TOT,VST,Y S ROOT=$G(DIC),(MAX,ENT,SEL,EXIT)=0
"RTN","ICDEXLK2",156,0)
 S U="^",LEN=3,TOT=$G(^TMP(SUB,$J,"SEL",0)),SEL=0 G:+TOT=0 MULQ
"RTN","ICDEXLK2",157,0)
 S CTR=0 F ENT=1:1:TOT Q:((SEL>0)&(SEL<ENT+1))  Q:EXIT  D  Q:EXIT
"RTN","ICDEXLK2",158,0)
 . N ITEM,IEN,TEXT,CODE,VST S ITEM=$G(^TMP(SUB,$J,"SEL",ENT))
"RTN","ICDEXLK2",159,0)
 . S IEN=+ITEM,TEXT=$P(ITEM,U,2) S CODE=$$CODEC^ICDEX(+($G(FILE)),IEN)
"RTN","ICDEXLK2",160,0)
 . S VST=$$VST^ICDEX(+($G(FILE)),IEN,ICDCDT)
"RTN","ICDEXLK2",161,0)
 . I $L(CODE),$L(VST) S TEXT=CODE,TEXT=TEXT_$J(" ",(9-$L(TEXT)))_VST
"RTN","ICDEXLK2",162,0)
 . Q:'$L(TEXT)  S MAX=ENT D MULSMW S:ENT=TOT ICDOREV=1
"RTN","ICDEXLK2",163,0)
 . S:ENT#LEN=0 SEL=$$MULSMS(MAX,ENT) S:SEL["^" EXIT=1
"RTN","ICDEXLK2",164,0)
 K:$D(DUOUT) ICDMENU
"RTN","ICDEXLK2",165,0)
 I ENT#LEN'=0,+SEL=0,'EXIT D
"RTN","ICDEXLK2",166,0)
 . Q:+($G(ICDOUPA))>0  S SEL=$$MULSMS(MAX,ENT) S:SEL["^" EXIT=1
"RTN","ICDEXLK2",167,0)
 I EXIT>0 D  G MULQ
"RTN","ICDEXLK2",168,0)
 . D CLRMSG^DDS K ICDMENU S:$L($G(DICR("1"))) DICR("1")="^^" S:$L($G(ICDOINP)) ICDOINP="^^"
"RTN","ICDEXLK2",169,0)
 D CLRMSG^DDS
"RTN","ICDEXLK2",170,0)
 G MULQ
"RTN","ICDEXLK2",171,0)
MULSMW ;       Write Multiple          ScreenMan
"RTN","ICDEXLK2",172,0)
 Q:+($G(ENT))'>0  Q:'$L($G(TEXT))  N CTR S CTR=$O(ICDMENU(" "),-1)+1
"RTN","ICDEXLK2",173,0)
 S ICDMENU(CTR)=$J(ENT,3)_"."_"  "_$G(TEXT)
"RTN","ICDEXLK2",174,0)
 Q
"RTN","ICDEXLK2",175,0)
MULSMS(LEX,LS) ;       Select Multiple         ScreenMan
"RTN","ICDEXLK2",176,0)
 Q:+($G(EXIT))>0 "^^"  N DIROUT,DUOUT,DTOUT,DIRUT,ANS,CTR,LAST,MAX,PMT,X
"RTN","ICDEXLK2",177,0)
 Q:'$D(ICDMENU) "^" S MAX=+($G(LEX)),LAST=+($G(LS)) Q:MAX=0 -1
"RTN","ICDEXLK2",178,0)
 S PMT=" Select 1-"_MAX_", <RETURN> for more or '^' to exit:  "
"RTN","ICDEXLK2",179,0)
 S CTR=$O(ICDMENU(" "),-1)+1,ICDMENU(CTR)=PMT
"RTN","ICDEXLK2",180,0)
 S ICDMENU="ICDMENU" D HLP^DDSMSG(.ICDMENU)
"RTN","ICDEXLK2",181,0)
 K ICDMENU R ANS:300 S X="" S:'$T ICDOTIM=1,X="^^"
"RTN","ICDEXLK2",182,0)
 S:ANS["^" ICDOUPA=1,X="^" S:ANS["^^" ICDOUPA=2,X="^^" Q:X["^" X
"RTN","ICDEXLK2",183,0)
 D CLRMSG^DDS S ANS=+ANS Q:ANS'>0 ""  Q:ANS>MAX ""  S X=ANS
"RTN","ICDEXLK2",184,0)
 Q X
"RTN","ICDEXLK2",185,0)
MULQ ;     Quit Multiple
"RTN","ICDEXLK2",186,0)
 S X=+($G(SEL)) Q:X'>0 -1
"RTN","ICDEXLK2",187,0)
 Q X
"RTN","ICDEXLK2",188,0)
 ;
"RTN","ICDEXLK2",189,0)
INP(X,VER,CDT) ; Get User Input
"RTN","ICDEXLK2",190,0)
 Q:$G(DIC(0))'["A" ""  N DIROUT,DIRUT,DUOUT,DTOUT,DIR,DIRA,DIRB,SBR,SBT,FILE,ROOT
"RTN","ICDEXLK2",191,0)
 S VER=+($G(VER)),CDT=+($G(CDT))
"RTN","ICDEXLK2",192,0)
 S FILE=$G(X) Q:"^80^80.1^"'[("^"_FILE_"^") ""  S ROOT=$$ROOT^ICDEX(FILE)
"RTN","ICDEXLK2",193,0)
 S:$L($G(ICDDICB)) DIRB=ICDDICB S:$L($G(ICDDICA)) DIRA=ICDDICA
"RTN","ICDEXLK2",194,0)
 S:'$L($G(DIRA))&(FILE=80) DIRA=" Select ICD Diagnosis:  "
"RTN","ICDEXLK2",195,0)
 S:'$L($G(DIRA))&(FILE=80.1) DIRA=" Select Procedure:  "
"RTN","ICDEXLK2",196,0)
 S:'$L($G(DIRA)) DIRA=" Select ICD Text or Code:  "
"RTN","ICDEXLK2",197,0)
 S SBT="",SBR=$$RET^ICDEXLK6($G(FILE))
"RTN","ICDEXLK2",198,0)
 I SBR>0,VER>0,CDT?7N,$L(ROOT) D
"RTN","ICDEXLK2",199,0)
 . N CODE,SYS,STA
"RTN","ICDEXLK2",200,0)
 . S CODE=$G(@(ROOT_+SBR_",0)"))
"RTN","ICDEXLK2",201,0)
 . S SYS=$P($G(@(ROOT_+SBR_",1)")),"^",1)
"RTN","ICDEXLK2",202,0)
 . S STA=$$STATCHK^ICDEX(CODE,CDT,SYS)
"RTN","ICDEXLK2",203,0)
 . S:STA'>0 SBR=0
"RTN","ICDEXLK2",204,0)
 S:+SBR>0 SBT=$$LD^ICDEX(FILE,+SBR,$G(ICDCDT))
"RTN","ICDEXLK2",205,0)
 S:$L($G(DIRB)) DIR("B")=DIRB
"RTN","ICDEXLK2",206,0)
 S:$L($G(DIRA)) DIR("A")=DIRA W:'$L($G(DIRB)) !
"RTN","ICDEXLK2",207,0)
 S DIR("PRE")="S X=$$INPRE^ICDEXLK2($G(X))"
"RTN","ICDEXLK2",208,0)
 S (DIR("?"),DIR("??"))="^D INPH^ICDEXLK2($G(FILE))"
"RTN","ICDEXLK2",209,0)
 S DIR("?")="^D INPH^ICDEXLK2($G(FILE))"
"RTN","ICDEXLK2",210,0)
 S DIR("??")="^D INPH2^ICDEXLK2($G(FILE))"
"RTN","ICDEXLK2",211,0)
 N Y S DIR(0)="FAO^0:245"
"RTN","ICDEXLK2",212,0)
 K X,DIROUT,DIRUT,DUOUT,DTOUT D ^DIR
"RTN","ICDEXLK2",213,0)
 S:$G(X)="@"&($G(Y)="") Y=$G(X)
"RTN","ICDEXLK2",214,0)
 S:$D(DTOUT) ICDOTIM=1 S:$D(DUOUT) ICDOUPA=1 S:$D(DIROUT) ICDOUPA=2
"RTN","ICDEXLK2",215,0)
 Q:$G(ICDOUPA)=1 "^"  Q:$G(ICDOUPA)=2 "^^"  Q:$G(ICDOTIM)>0 "^^"
"RTN","ICDEXLK2",216,0)
 I '$L(X) S (X,ICDX,INP,INP1,INP2)="",Y=-1 Q X
"RTN","ICDEXLK2",217,0)
 S:X=""&('$L($G(DIR("B")))) X="^" S:X["^"&(X'["^^") X="^" S:X["^^" X="^^" Q:X["^" X
"RTN","ICDEXLK2",218,0)
 I $E(X,1)=" ",$L(SBT),+SBR>0 S X=("`"_+SBR) Q X
"RTN","ICDEXLK2",219,0)
 W:$G(DIC(0))'["Q"&($E(X,1)'=" ")&('$D(DDS)) !
"RTN","ICDEXLK2",220,0)
 S X=$$UP^XLFSTR($$TM(Y))
"RTN","ICDEXLK2",221,0)
 Q X
"RTN","ICDEXLK2",222,0)
INPH(X) ;   Input Help
"RTN","ICDEXLK2",223,0)
 N FILE,TYPE,TMP,TXT S FILE=$G(X)
"RTN","ICDEXLK2",224,0)
 S TYPE=$S(FILE=80:"Diagnosis ",FILE=80.1:"Procedure ",1:"")
"RTN","ICDEXLK2",225,0)
 I '$L($G(TYPE)) D  Q
"RTN","ICDEXLK2",226,0)
 . S TMP="Enter a term (2-245 characters in length) or a code."
"RTN","ICDEXLK2",227,0)
 . I +($G(VER))>0 S TMP=TMP_"  Only active codes will be considered for selection."
"RTN","ICDEXLK2",228,0)
 . S TXT(1)=TMP D PA^ICDEXLK6(.TXT,66)
"RTN","ICDEXLK2",229,0)
 . S TMP=0 F  S TMP=$O(TXT(TMP)) Q:+TMP'>0  W !,?4,$G(TXT(TMP))
"RTN","ICDEXLK2",230,0)
 S TMP="Enter a "_TYPE_"(2-245 characters in length) or a "_TYPE_"code."
"RTN","ICDEXLK2",231,0)
 I +($G(VER))>0 S TMP=TMP_"  Only active "_TYPE_"codes will be considered for selection."
"RTN","ICDEXLK2",232,0)
 S TXT(1)=TMP D PA^ICDEXLK6(.TXT,66)
"RTN","ICDEXLK2",233,0)
 S TMP=0 F  S TMP=$O(TXT(TMP)) Q:+TMP'>0  W !,?4,$G(TXT(TMP))
"RTN","ICDEXLK2",234,0)
 Q
"RTN","ICDEXLK2",235,0)
INPH2(X) ;   Input Help
"RTN","ICDEXLK2",236,0)
 N FILE,TYPE,TMP,TXT S FILE=$G(X)
"RTN","ICDEXLK2",237,0)
 S TYPE=$S(FILE=80:"Diagnosis ",FILE=80.1:"Procedure ",1:"")
"RTN","ICDEXLK2",238,0)
 I '$L($G(TYPE)) D  Q
"RTN","ICDEXLK2",239,0)
 . S TMP="Enter a term (2-245 characters in length), a code or code fragment,"
"RTN","ICDEXLK2",240,0)
 . S TMP=TMP_" phrase, or an accent grave character (`) followed by the"
"RTN","ICDEXLK2",241,0)
 . S TMP=TMP_" IEN to select a specific entry"
"RTN","ICDEXLK2",242,0)
 . I $G(ICDDIC0)'["F" D
"RTN","ICDEXLK2",243,0)
 . . S TMP=TMP_", or press space bar and Enter/Return key to do a subsequent lookup of the same entry"
"RTN","ICDEXLK2",244,0)
 . S TMP=TMP_"." I +($G(VER))>0 D
"RTN","ICDEXLK2",245,0)
 . . S TMP=TMP_"  Only active codes will be considered for selection."
"RTN","ICDEXLK2",246,0)
 . S TXT(1)=TMP D PA^ICDEXLK6(.TXT,66)
"RTN","ICDEXLK2",247,0)
 . S TMP=0 F  S TMP=$O(TXT(TMP)) Q:+TMP'>0  W !,?4,$G(TXT(TMP))
"RTN","ICDEXLK2",248,0)
 S TMP="Enter a "_TYPE_"name"
"RTN","ICDEXLK2",249,0)
 S TMP=TMP_" (2-245 characters in length), a "_TYPE_"code or code fragment,"
"RTN","ICDEXLK2",250,0)
 S TMP=TMP_" one or more keywords sufficient to select a "_TYPE
"RTN","ICDEXLK2",251,0)
 S TMP=TMP_" name, or an accent grave character (`) followed by the"
"RTN","ICDEXLK2",252,0)
 S TMP=TMP_" IEN to select a specific entry"
"RTN","ICDEXLK2",253,0)
 I $G(ICDDIC0)'["F" D
"RTN","ICDEXLK2",254,0)
 . S TMP=TMP_", or press space bar and Enter/Return key to do a subsequent lookup of the same entry"
"RTN","ICDEXLK2",255,0)
 S TMP=TMP_"." I +($G(VER))>0 D
"RTN","ICDEXLK2",256,0)
 . S TMP=TMP_"  Only active "_TYPE_"codes will be considered for selection."
"RTN","ICDEXLK2",257,0)
 S TXT(1)=TMP D PA^ICDEXLK6(.TXT,66)
"RTN","ICDEXLK2",258,0)
 S TMP=0 F  S TMP=$O(TXT(TMP)) Q:+TMP'>0  W !,?4,$G(TXT(TMP))
"RTN","ICDEXLK2",259,0)
 Q
"RTN","ICDEXLK2",260,0)
INPRE(X) ;   Input Pre-Processing
"RTN","ICDEXLK2",261,0)
 Q:'$L($G(X)) ""  N IN,IN1,IN2 S IN=$G(X)
"RTN","ICDEXLK2",262,0)
 Q:IN["??" "??"  Q:IN["?" "?"
"RTN","ICDEXLK2",263,0)
 S IN1=$E(IN,1),IN2=$E(IN,2,$L(IN))
"RTN","ICDEXLK2",264,0)
 I IN1["`",IN2?1N.N,$L($G(ROOT)) D  Q X
"RTN","ICDEXLK2",265,0)
 . Q:IN1="`"&(IN2?1N.N)&($D(@(ROOT_+IN2_",0)")))  S X="??"
"RTN","ICDEXLK2",266,0)
 I $L($G(ROOT)) I IN1=" ",'$L(IN2) D  Q:$E(X,1)="`"!($E(X,1)="?") X
"RTN","ICDEXLK2",267,0)
 . N FI,CODE,SYS,STA,ND,SB,OUT S FI=$$FILE^ICDEX(ROOT)
"RTN","ICDEXLK2",268,0)
 . Q:+FI'>0  S SB=$$RET^ICDEXLK6($G(FILE))
"RTN","ICDEXLK2",269,0)
 . I SB>0,+($G(VER))'>0 S X="`"_+SB Q
"RTN","ICDEXLK2",270,0)
 . I SB>0,+($G(VER))>0,+($G(CDT))?7N,$L(ROOT) D
"RTN","ICDEXLK2",271,0)
 . . N CODE,SYS,STA
"RTN","ICDEXLK2",272,0)
 . . S CODE=$G(@(ROOT_+SB_",0)")) Q:'$L(CODE)
"RTN","ICDEXLK2",273,0)
 . . S SYS=$P($G(@(ROOT_+SB_",1)")),"^",1) Q:+SYS'>0
"RTN","ICDEXLK2",274,0)
 . . S STA=$$STATCHK^ICDEX(CODE,CDT,SYS)
"RTN","ICDEXLK2",275,0)
 . . S:STA'>0 SB=0 S:+SB>0 X="`"_+SB S:+SB'>0 X="??"
"RTN","ICDEXLK2",276,0)
 Q X
"RTN","ICDEXLK2",277,0)
 ;            
"RTN","ICDEXLK2",278,0)
 ; Miscellaneous
"RTN","ICDEXLK2",279,0)
OUT(X,Y,FMT,ARY) ;   Output Array
"RTN","ICDEXLK2",280,0)
 K ARY N FILE,TERM,ROOT,IEN S ROOT=$G(X),IEN=+($G(Y)) Q:'$L(ROOT)
"RTN","ICDEXLK2",281,0)
 Q:"^ICD9(^ICD0(^"'[("^"_$E(ROOT,2,$L(ROOT))_"^")
"RTN","ICDEXLK2",282,0)
 S FILE=$$FILE^ICDEX(ROOT) Q:"^80^80.1^"'[("^"_FILE_"^")
"RTN","ICDEXLK2",283,0)
 S FMT=+($G(FMT)) S:FMT'>0 FMT=1 S:FMT>4 FMT=1 Q:'$D(@(ROOT_IEN_",0)"))
"RTN","ICDEXLK2",284,0)
 I +($G(FMT))=1!(+($G(FMT))=3) S TERM=$$SD^ICDEX(FILE,IEN,CDT)
"RTN","ICDEXLK2",285,0)
 I +($G(FMT))=2!(+($G(FMT))=4) S TERM=$$LD^ICDEX(FILE,IEN,CDT)
"RTN","ICDEXLK2",286,0)
 Q:'$L(TERM)  Q:$P(TERM,"^",1)=-1  S ARY(1)=TERM Q:+($G(FMT))=1!(+($G(FMT))=3)
"RTN","ICDEXLK2",287,0)
 D:+($G(FMT))=2 PAR^ICDEX(.ARY,60) D:+($G(FMT))=4 PAR^ICDEX(.ARY,70)
"RTN","ICDEXLK2",288,0)
 Q
"RTN","ICDEXLK2",289,0)
TM(X,Y) ;   Trim Y
"RTN","ICDEXLK2",290,0)
 S Y=$G(Y) S:'$L(Y) Y=" "
"RTN","ICDEXLK2",291,0)
 F  Q:$E(X,1)'=Y  S X=$E(X,2,$L(X))
"RTN","ICDEXLK2",292,0)
 F  Q:$E(X,$L(X))'=Y  S X=$E(X,1,($L(X)-1))
"RTN","ICDEXLK2",293,0)
 Q X
"RTN","ICDEXLK2",294,0)
X(SEL,SUB) ;   Set X
"RTN","ICDEXLK2",295,0)
 K X N IEN S SEL=+($G(SEL)),SUB=$G(SUB) Q:'$L(SUB)
"RTN","ICDEXLK2",296,0)
 S IEN=$G(^TMP(SUB,$J,"SEL",+SEL)) Q:+IEN'>0  S X=+IEN
"RTN","ICDEXLK2",297,0)
 Q
"RTN","ICDEXLK2",298,0)
Y(ROOT,IEN,CDT,FMT) ;   Set Y
"RTN","ICDEXLK2",299,0)
 ;
"RTN","ICDEXLK2",300,0)
 ; Input
"RTN","ICDEXLK2",301,0)
 ; 
"RTN","ICDEXLK2",302,0)
 ;    ROOT  Global Root (DIC) or File Number
"RTN","ICDEXLK2",303,0)
 ;    IEN   Internal Entry Number
"RTN","ICDEXLK2",304,0)
 ;    CDT   Versioning Date (default TODAY)
"RTN","ICDEXLK2",305,0)
 ;    FMT   Format of Output
"RTN","ICDEXLK2",306,0)
 ;            0  Standard Fileman Y   IEN ^ CODE
"RTN","ICDEXLK2",307,0)
 ;            1  Expanded Y as if DIC(0) contained a "Z" 
"RTN","ICDEXLK2",308,0)
 ; Output
"RTN","ICDEXLK2",309,0)
 ;
"RTN","ICDEXLK2",310,0)
 ;    Y     IEN ^ Code           Fileman
"RTN","ICDEXLK2",311,0)
 ;    
"RTN","ICDEXLK2",312,0)
 ;    If DIC(0) contains "Z" or input parameter FMT > 0
"RTN","ICDEXLK2",313,0)
 ;    
"RTN","ICDEXLK2",314,0)
 ;       Y(0)     0 Node (Code)        Fileman
"RTN","ICDEXLK2",315,0)
 ;       Y(0,0)   .01 Field (Code)     Fileman
"RTN","ICDEXLK2",316,0)
 ;       Y(0,1)   $$ICDDX or $$ICDOP   Non-Fileman
"RTN","ICDEXLK2",317,0)
 ;       Y(0,2)   Long Description     Non-Fileman
"RTN","ICDEXLK2",318,0)
 ;       
"RTN","ICDEXLK2",319,0)
 N CODE,NODE0,FILE,SHORT,FDAT,LONG,ICD10 K Y S Y=-1
"RTN","ICDEXLK2",320,0)
 S:+($G(ICDOFND))>0&(+($G(ICDOSEL))'>0) Y="-1^No selection made"
"RTN","ICDEXLK2",321,0)
 S IEN=+($G(IEN)),ROOT=$G(ROOT),CDT=+($G(CDT))
"RTN","ICDEXLK2",322,0)
 S:CDT'?7N CDT=$$DT^XLFDT S ICD10=+($$IMP^ICDEX(30))
"RTN","ICDEXLK2",323,0)
 S ROOT=$$ROOT^ICDEX(ROOT) Q:'$L(ROOT)
"RTN","ICDEXLK2",324,0)
 S FILE=$$FILE^ICDEX(ROOT) Q:+FILE'>0
"RTN","ICDEXLK2",325,0)
 S NODE0=$G(@(ROOT_+IEN_",0)")) Q:'$L(NODE0)
"RTN","ICDEXLK2",326,0)
 S CODE=$$CODEC^ICDEX(FILE,IEN) Q:'$L(CODE)
"RTN","ICDEXLK2",327,0)
 S SHORT=$$SD^ICDEX(FILE,IEN,CDT) Q:'$L(SHORT)
"RTN","ICDEXLK2",328,0)
 S FMT=+($G(FMT)) I $P(SHORT,"^",1)=-1 D  Q:'$L(SHORT)
"RTN","ICDEXLK2",329,0)
 . S SHORT=$$SD^ICDEX(FILE,IEN,ICD10)
"RTN","ICDEXLK2",330,0)
 . S:$P(SHORT,"^",1)=-1 SHORT="" Q:'$L(SHORT)
"RTN","ICDEXLK2",331,0)
 . S SHORT=SHORT_" (Pending - "_$$FMTE^XLFDT($$IMP^ICDEX(30))_")"
"RTN","ICDEXLK2",332,0)
 S Y=+IEN_"^"_CODE
"RTN","ICDEXLK2",333,0)
 S:$G(DIC(0))["Z"!(+FMT>0) Y(0)=NODE0
"RTN","ICDEXLK2",334,0)
 S CODE=$P(NODE0,"^",1) Q:'$L(CODE)
"RTN","ICDEXLK2",335,0)
 S:FILE=80 FDAT=$$ICDDX^ICDEX(CODE,CDT,,"E")
"RTN","ICDEXLK2",336,0)
 S:FILE=80.1 FDAT=$$ICDOP^ICDEX(CODE,CDT,,"E")
"RTN","ICDEXLK2",337,0)
 S LONG=$$LD^ICDEX(ROOT,IEN,CDT)
"RTN","ICDEXLK2",338,0)
 S:$G(DIC(0))["Z"!(+FMT>0) Y(0,0)=CODE
"RTN","ICDEXLK2",339,0)
 S:$L(FDAT)&($L(LONG))&($G(DIC(0))["Z")!(+FMT>0) Y(0,1)=FDAT,Y(0,2)=LONG
"RTN","ICDEXLK2",340,0)
 Q
"RTN","ICDEXLK2",341,0)
SH ;   Show TMP
"RTN","ICDEXLK2",342,0)
 N SUB,NN,NC S SUB="ICD9" S:'$D(^TMP(SUB)) SUB="ICD0" Q:'$D(^TMP(SUB))
"RTN","ICDEXLK2",343,0)
 S NN="^TMP("""_SUB_""","_$J_")",NC="^TMP("""_SUB_""","_$J_","
"RTN","ICDEXLK2",344,0)
 W:'$D(@NN) ! Q:'$D(@NN)  F  S NN=$Q(@NN) Q:'$L(NN)!(NN'[NC)  W !,NN,"=",@NN
"RTN","ICDEXLK2",345,0)
 W !
"RTN","ICDEXLK2",346,0)
 Q
"RTN","ICDEXLK3")
0^3^B102652955^B98059988
"RTN","ICDEXLK3",1,0)
ICDEXLK3 ;SLC/KER - ICD Extractor - Lookup, Search ;07/15/2015
"RTN","ICDEXLK3",2,0)
 ;;18.0;DRG Grouper;**57,67,82**;Oct 20, 2000;Build 21
"RTN","ICDEXLK3",3,0)
 ;               
"RTN","ICDEXLK3",4,0)
 ; Global Variables
"RTN","ICDEXLK3",5,0)
 ;    ^ICDS(              N/A
"RTN","ICDEXLK3",6,0)
 ;    ^ICDS("F"           N/A
"RTN","ICDEXLK3",7,0)
 ;    ^TMP(ID,$J,         SACC 2.3.2.5.1
"RTN","ICDEXLK3",8,0)
 ;               
"RTN","ICDEXLK3",9,0)
 ; External References
"RTN","ICDEXLK3",10,0)
 ;    $$DT^XLFDT          ICR  10103
"RTN","ICDEXLK3",11,0)
 ;    $$UP^XLFSTR         ICR  10104
"RTN","ICDEXLK3",12,0)
 ;               
"RTN","ICDEXLK3",13,0)
 ; Local Variables Newed or Killed by calling application
"RTN","ICDEXLK3",14,0)
 ;     DIC(0)    Fileman Lookup Parameters
"RTN","ICDEXLK3",15,0)
 ;  
"RTN","ICDEXLK3",16,0)
LK(TXT,ROOT,CDT,SYS,VER,OUT) ; Lookup - Versioned
"RTN","ICDEXLK3",17,0)
 ;
"RTN","ICDEXLK3",18,0)
 ; Input 
"RTN","ICDEXLK3",19,0)
 ; 
"RTN","ICDEXLK3",20,0)
 ;   TXT    Text to Search for (Required)
"RTN","ICDEXLK3",21,0)
 ;   
"RTN","ICDEXLK3",22,0)
 ;             Diagnosis or Procedure Code
"RTN","ICDEXLK3",23,0)
 ;             Diagnosis or Procedure Descriptive Text
"RTN","ICDEXLK3",24,0)
 ;             
"RTN","ICDEXLK3",25,0)
 ;   ROOT   Global Root/File # to Search (Fileman DIC, Required)
"RTN","ICDEXLK3",26,0)
 ;   
"RTN","ICDEXLK3",27,0)
 ;             ^ICD9(
"RTN","ICDEXLK3",28,0)
 ;             ^ICD0(
"RTN","ICDEXLK3",29,0)
 ;             
"RTN","ICDEXLK3",30,0)
 ;   CDT    Date (default = TODAY) (Optional)
"RTN","ICDEXLK3",31,0)
 ;   
"RTN","ICDEXLK3",32,0)
 ;   SYS    Coding System (Optional but encouraged)
"RTN","ICDEXLK3",33,0)
 ;   
"RTN","ICDEXLK3",34,0)
 ;              1      ICD-9-CM
"RTN","ICDEXLK3",35,0)
 ;              2      ICD-9 Proc
"RTN","ICDEXLK3",36,0)
 ;             30      ICD-10-CM
"RTN","ICDEXLK3",37,0)
 ;             31      ICD-10-PCS
"RTN","ICDEXLK3",38,0)
 ;
"RTN","ICDEXLK3",39,0)
 ;   VER    Versioned Lookup
"RTN","ICDEXLK3",40,0)
 ;   
"RTN","ICDEXLK3",41,0)
 ;             0  No, include all codes, active and inactive
"RTN","ICDEXLK3",42,0)
 ;             1  Yes, include only Active codes for date CDT
"RTN","ICDEXLK3",43,0)
 ;
"RTN","ICDEXLK3",44,0)
 ;   OUT    Output Format
"RTN","ICDEXLK3",45,0)
 ;   
"RTN","ICDEXLK3",46,0)
 ;             1  Fileman, Code and Short Text (default)
"RTN","ICDEXLK3",47,0)
 ;             
"RTN","ICDEXLK3",48,0)
 ;                250.00    DMII CMP NT ST UNCNTR
"RTN","ICDEXLK3",49,0)
 ;                
"RTN","ICDEXLK3",50,0)
 ;             2  Fileman, Code and Description
"RTN","ICDEXLK3",51,0)
 ;             
"RTN","ICDEXLK3",52,0)
 ;                250.00    DIABETES MELLITUS NO MENTION OF
"RTN","ICDEXLK3",53,0)
 ;                          COMPLICATION, TYPE II OR UNSPECIFIED
"RTN","ICDEXLK3",54,0)
 ;                          TYPE, NOT STATED AS UNCONTROLLED
"RTN","ICDEXLK3",55,0)
 ;                          
"RTN","ICDEXLK3",56,0)
 ;             3  Lexicon, Short Text and Code
"RTN","ICDEXLK3",57,0)
 ;             
"RTN","ICDEXLK3",58,0)
 ;                DMII CMP NT ST UNCNTR (250.00)
"RTN","ICDEXLK3",59,0)
 ;                
"RTN","ICDEXLK3",60,0)
 ;             4  Lexicon, Description and Code
"RTN","ICDEXLK3",61,0)
 ;             
"RTN","ICDEXLK3",62,0)
 ;                DIABETES MELLITUS NO MENTION OF 
"RTN","ICDEXLK3",63,0)
 ;                COMPLICATION, TYPE II OR UNSPECIFIED TYPE,
"RTN","ICDEXLK3",64,0)
 ;                NOT STATED AS UNCONTROLLED (250.00)
"RTN","ICDEXLK3",65,0)
 ;             
"RTN","ICDEXLK3",66,0)
 ; Output (if successful)
"RTN","ICDEXLK3",67,0)
 ; 
"RTN","ICDEXLK3",68,0)
 ;   $$LK  Number of entries found
"RTN","ICDEXLK3",69,0)
 ;   
"RTN","ICDEXLK3",70,0)
 ;   Global Array of entries found:
"RTN","ICDEXLK3",71,0)
 ; 
"RTN","ICDEXLK3",72,0)
 ;      ^TMP(ID,$J,"SEL")
"RTN","ICDEXLK3",73,0)
 ;      ^TMP(ID,$J,"SEL",0)=# of entries
"RTN","ICDEXLK3",74,0)
 ;      ^TMP(ID,$J,"SEL",#)=IEN^Display Text
"RTN","ICDEXLK3",75,0)
 ;   
"RTN","ICDEXLK3",76,0)
 ;         where ID is a package namespaced subscript:
"RTN","ICDEXLK3",77,0)
 ;        
"RTN","ICDEXLK3",78,0)
 ;           ICD9 - for the Diagnosis file #80
"RTN","ICDEXLK3",79,0)
 ;           ICD0 - for the Operations/Procedure file #80.1
"RTN","ICDEXLK3",80,0)
 ;               
"RTN","ICDEXLK3",81,0)
 ; Local Variables used but Newed or Killed Elsewhere
"RTN","ICDEXLK3",82,0)
 ; 
"RTN","ICDEXLK3",83,0)
 ;     DIC(0)
"RTN","ICDEXLK3",84,0)
 ;     
"RTN","ICDEXLK3",85,0)
 Q $$LK2
"RTN","ICDEXLK3",86,0)
 Q
"RTN","ICDEXLK3",87,0)
CD(TXT,ROOT,CDT,SYS,VER,OUT) ; Lookup Code - Versioned
"RTN","ICDEXLK3",88,0)
 N ICDBYCD S ICDBYCD="" S TXT=$$TM(TXT)
"RTN","ICDEXLK3",89,0)
 Q $$LK2
"RTN","ICDEXLK3",90,0)
 Q
"RTN","ICDEXLK3",91,0)
LK2() ; Lookup - Part 2
"RTN","ICDEXLK3",92,0)
 N FILE,IEN,INP1,INP2,KEY,SUB,NUM,NXT,OK,ORD,SEQ,TDT,VCC,VCD,VDS,VSD,VST,PR,PARS,LOR,VII,VNM,Y
"RTN","ICDEXLK3",93,0)
 S TXT=$$TM($TR($G(TXT),"#"," ")) Q:'$L(TXT) 0  S ROOT=$$ROOT^ICDEX($G(ROOT)) Q:'$L(ROOT) 0
"RTN","ICDEXLK3",94,0)
 S FILE=$$FILE^ICDEX(ROOT) Q:"^80^80.1^"'[("^"_FILE_"^") 0
"RTN","ICDEXLK3",95,0)
 S SUB=$TR(ROOT,"^(","") Q:'$L(SUB) 0  K ^TMP(SUB,$J) S CDT=$$CDT($G(CDT))
"RTN","ICDEXLK3",96,0)
 S SYS=$S($L($G(SYS)):$$SYS^ICDEX($G(SYS)),1:""),VER=+($G(VER))
"RTN","ICDEXLK3",97,0)
 S:+($G(SYS))'>0&(CDT?7N)&(+VER>0) SYS=$$SYS(ROOT,CDT)
"RTN","ICDEXLK3",98,0)
 S:$D(^ICDS(+SYS,0))&(+VER>0) CDT=$$DTBR^ICDEX(CDT,,+($G(SYS)))
"RTN","ICDEXLK3",99,0)
 S OUT=$G(OUT) S:+OUT'>0 OUT=1 S:+OUT>4 OUT=1
"RTN","ICDEXLK3",100,0)
 S INP1=$E(TXT,1),INP2=$E($G(TXT),2,245)
"RTN","ICDEXLK3",101,0)
 ;
"RTN","ICDEXLK3",102,0)
 I INP1="`",INP2?1N.N D  Q:+($G(^TMP(SUB,$J,"SEL",0)))>0 +($G(^TMP(SUB,$J,"SEL",0)))
"RTN","ICDEXLK3",103,0)
 . N ICDCDT,IEN1,IEN2 S ICDCDT=$G(CDT) D IEN^ICDEXLK5
"RTN","ICDEXLK3",104,0)
 . I +($G(Y))>0 D FND^ICDEXLK5(ROOT,+($G(Y)),CDT,SYS,VER,+($G(LOR)),OUT)
"RTN","ICDEXLK3",105,0)
 . D:$O(^TMP("ICD9",$J,"FND","IEN",0))>0 SEL^ICDEXLK5(ROOT,1)
"RTN","ICDEXLK3",106,0)
 ;
"RTN","ICDEXLK3",107,0)
 Q:$D(^TMP(SUB,$J)) +($G(^TMP(SUB,$J,"SEL",0)))
"RTN","ICDEXLK3",108,0)
 ;   Exact Match
"RTN","ICDEXLK3",109,0)
 I $L(TXT) D
"RTN","ICDEXLK3",110,0)
 . N ICDI,LOR K Y,X S LOR=0,X=$$EXM^ICDEXLK5(TXT,ROOT,.Y,CDT,SYS,VER)
"RTN","ICDEXLK3",111,0)
 . S ICDI=0 F  S ICDI=$O(Y(ICDI)) Q:+ICDI'>0  D
"RTN","ICDEXLK3",112,0)
 . . N IEN S IEN=+($G(Y(ICDI))) Q:+IEN'>0  D FND^ICDEXLK5(ROOT,IEN,CDT,SYS,VER,+($G(LOR)),OUT)
"RTN","ICDEXLK3",113,0)
 . I $G(DIC(0))'["A",$G(DIC(0))["O" D
"RTN","ICDEXLK3",114,0)
 . . N ENT,TXT,IEN S ENT=$O(^TMP(SUB,$J,"FND",0)) Q:+ENT'>0
"RTN","ICDEXLK3",115,0)
 . . S TXT=$G(^TMP(SUB,$J,"FND",+ENT,1)) Q:'$L(TXT)  S IEN=+($P(TXT,"^",1)) Q:+IEN'>0
"RTN","ICDEXLK3",116,0)
 . . K ^TMP(SUB,$J,"FND",ENT,1),^TMP(SUB,$J,"FND","IEN",+IEN)
"RTN","ICDEXLK3",117,0)
 . . S ^TMP(SUB,$J,"FND",1,1)=TXT,^TMP(SUB,$J,"FND","IEN",+IEN)=""
"RTN","ICDEXLK3",118,0)
 I $G(DIC(0))["X" D SEL^ICDEXLK5(ROOT,+($G(LOR))) Q:+($G(^TMP(SUB,$J,"SEL",0)))>0 +($G(^TMP(SUB,$J,"SEL",0)))
"RTN","ICDEXLK3",119,0)
 ;   By Code
"RTN","ICDEXLK3",120,0)
 D:$L(TXT)'>8&($$ISCODE(TXT,ROOT)>0) CODE
"RTN","ICDEXLK3",121,0)
 Q:+($G(^TMP(SUB,$J,"SEL",0)))>0 +($G(^TMP(SUB,$J,"SEL",0)))
"RTN","ICDEXLK3",122,0)
 ;   By Text
"RTN","ICDEXLK3",123,0)
 D TXT^ICDEXLK4
"RTN","ICDEXLK3",124,0)
 Q +($G(^TMP(SUB,$J,"SEL",0)))
"RTN","ICDEXLK3",125,0)
 ;
"RTN","ICDEXLK3",126,0)
CODE ;   Lookup by Code (Requires TXT and ROOT)
"RTN","ICDEXLK3",127,0)
 Q:'$L($G(TXT))  Q:'$L($G(ROOT))  Q:$L(TXT)>8  Q:$G(DIC(0))["B"
"RTN","ICDEXLK3",128,0)
 Q:$$ISCODE($G(TXT),$G(ROOT))'>0
"RTN","ICDEXLK3",129,0)
 S CDT=$$CDT($G(CDT)) N KEY,ORD,PRV,EROOT
"RTN","ICDEXLK3",130,0)
 S KEY=TXT,PRV=+($G(^TMP(SUB,$J,"SEL",0)))
"RTN","ICDEXLK3",131,0)
 S ORD=$E(KEY,1,($L(KEY)-1))_$C(($A($E(KEY,$L(KEY)))-1))_"~ "
"RTN","ICDEXLK3",132,0)
 S EROOT=ROOT_"""BA""," S:+($G(SYS))>0&($D(@(ROOT_"""ABA"","_+($G(SYS))_")"))) EROOT=ROOT_"""ABA"","_+($G(SYS))_","
"RTN","ICDEXLK3",133,0)
 F  S ORD=$O(@(EROOT_""""_ORD_""")")) Q:'$$ISORD  D
"RTN","ICDEXLK3",134,0)
 . S IEN=0 I $G(DIC(0))["X",ORD'=KEY Q
"RTN","ICDEXLK3",135,0)
 . F  S IEN=$O(@(EROOT_""""_ORD_""","_+IEN_")")) Q:+IEN'>0  D
"RTN","ICDEXLK3",136,0)
 . . N STA S STA=1 S:VER>0 STA=$$LS(ROOT,IEN,CDT)
"RTN","ICDEXLK3",137,0)
 . . Q:+($G(VER))>0&(+STA'>0)
"RTN","ICDEXLK3",138,0)
 . . I $G(DIC(0))'["A",$G(DIC(0))["O",ORD=KEY S CNT=CNT+1 Q:CNT>1
"RTN","ICDEXLK3",139,0)
 . . D FND^ICDEXLK5(ROOT,IEN,CDT,$G(SYS),$G(VER),1,OUT)
"RTN","ICDEXLK3",140,0)
 I '$D(^TMP(SUB,$J,"FND","IEN")) D
"RTN","ICDEXLK3",141,0)
 . S KEY=$$UP^XLFSTR(TXT),PRV=+($G(^TMP(SUB,$J,"SEL",0)))
"RTN","ICDEXLK3",142,0)
 . S ORD=$E(KEY,1,($L(KEY)-1))_$C(($A($E(KEY,$L(KEY)))-1))_"~ "
"RTN","ICDEXLK3",143,0)
 . S EROOT=ROOT_"""BA""," S:+($G(SYS))>0&($D(@(ROOT_"""ABA"","_+($G(SYS))_")"))) EROOT=ROOT_"""ABA"","_+($G(SYS))_","
"RTN","ICDEXLK3",144,0)
 . F  S ORD=$O(@(EROOT_""""_ORD_""")")) Q:'$$ISORD  D
"RTN","ICDEXLK3",145,0)
 . . S IEN=0 I $G(DIC(0))["X",ORD'=KEY Q
"RTN","ICDEXLK3",146,0)
 . . F  S IEN=$O(@(EROOT_""""_ORD_""","_+IEN_")")) Q:+IEN'>0  D
"RTN","ICDEXLK3",147,0)
 . . . N STA S STA=1 S:VER>0 STA=$$LS(ROOT,IEN,CDT)
"RTN","ICDEXLK3",148,0)
 . . . Q:+($G(VER))>0&(+STA'>0)
"RTN","ICDEXLK3",149,0)
 . . . I $G(DIC(0))'["A",$G(DIC(0))["O",ORD=KEY S CNT=CNT+1 Q:CNT>1
"RTN","ICDEXLK3",150,0)
 . . . D FND^ICDEXLK5(ROOT,IEN,CDT,$G(SYS),$G(VER),1,OUT)
"RTN","ICDEXLK3",151,0)
 D SEL^ICDEXLK5(ROOT,1)
"RTN","ICDEXLK3",152,0)
 Q
"RTN","ICDEXLK3",153,0)
 S STA=1 S:VER>0 STA=$$LS^ICDEXLK3(ROOT,IEN,CDT)
"RTN","ICDEXLK3",154,0)
 Q:+($G(VER))>0&(+STA'>0)
"RTN","ICDEXLK3",155,0)
 ;                    
"RTN","ICDEXLK3",156,0)
 ; Miscellaneous
"RTN","ICDEXLK3",157,0)
TOK(X) ;   Parse Text into Tokens
"RTN","ICDEXLK3",158,0)
 K PARS D PAR^ICDTOKN($G(X),.PARS,1)
"RTN","ICDEXLK3",159,0)
 Q
"RTN","ICDEXLK3",160,0)
TOKEN(X,ROOT,SYS,ARY) ;   Parse Text into Tokens
"RTN","ICDEXLK3",161,0)
 D TOKEN^ICDTOKN($G(X),$G(ROOT),$G(SYS),.ARY)
"RTN","ICDEXLK3",162,0)
 Q
"RTN","ICDEXLK3",163,0)
SS ;   Show Select/Find Global Arrays
"RTN","ICDEXLK3",164,0)
 N NN,NC S NN="^TMP(""ICD9"","_$J_")",NC="^TMP(""ICD9"","_$J_","
"RTN","ICDEXLK3",165,0)
 F  S NN=$Q(@NN) Q:'$L(NN)!(NN'[NC)  D
"RTN","ICDEXLK3",166,0)
 . W !,NN,"=",@NN Q
"RTN","ICDEXLK3",167,0)
 S NN="^TMP(""ICD0"","_$J_")",NC="^TMP(""ICD0"","_$J_","
"RTN","ICDEXLK3",168,0)
 F  S NN=$Q(@NN) Q:'$L(NN)!(NN'[NC)  D
"RTN","ICDEXLK3",169,0)
 . W !,NN,"=",@NN Q
"RTN","ICDEXLK3",170,0)
 Q
"RTN","ICDEXLK3",171,0)
WORD(X,ROOT,SYS) ;   Word is contained in a Set
"RTN","ICDEXLK3",172,0)
 ;
"RTN","ICDEXLK3",173,0)
 ; Input 
"RTN","ICDEXLK3",174,0)
 ; 
"RTN","ICDEXLK3",175,0)
 ;   X      A single word (Required)
"RTN","ICDEXLK3",176,0)
 ;   
"RTN","ICDEXLK3",177,0)
 ;   ROOT   Global Root/File # to Search (Optional, if 
"RTN","ICDEXLK3",178,0)
 ;          not supplied both files 80 and 80.1 are used)
"RTN","ICDEXLK3",179,0)
 ;   
"RTN","ICDEXLK3",180,0)
 ;             ^ICD9(   or 80
"RTN","ICDEXLK3",181,0)
 ;             ^ICD0(   or 80.1
"RTN","ICDEXLK3",182,0)
 ;             
"RTN","ICDEXLK3",183,0)
 ;   SYS    Coding System  (Optional, if not supplied all
"RTN","ICDEXLK3",184,0)
 ;          coding systems for the file are used)
"RTN","ICDEXLK3",185,0)
 ;   
"RTN","ICDEXLK3",186,0)
 ;              1  or  ICD  or  ICD-9-CM
"RTN","ICDEXLK3",187,0)
 ;              2  or  ICP  or  ICD-9 Proc
"RTN","ICDEXLK3",188,0)
 ;             30  or  10D  or  ICD-10-CM
"RTN","ICDEXLK3",189,0)
 ;             31  or  10P  or  ICD-10-PCS
"RTN","ICDEXLK3",190,0)
 ;
"RTN","ICDEXLK3",191,0)
 ; Output (if successful)
"RTN","ICDEXLK3",192,0)
 ; 
"RTN","ICDEXLK3",193,0)
 ;   $$WORD  Boolean value
"RTN","ICDEXLK3",194,0)
 ;   
"RTN","ICDEXLK3",195,0)
 ;           1 = Word was found
"RTN","ICDEXLK3",196,0)
 ;           
"RTN","ICDEXLK3",197,0)
 ;               If ROOT is not supplied, the word was found in 
"RTN","ICDEXLK3",198,0)
 ;               either file 80 or 80.1
"RTN","ICDEXLK3",199,0)
 ;               
"RTN","ICDEXLK3",200,0)
 ;               If SYS is not supplied, the word was found in 
"RTN","ICDEXLK3",201,0)
 ;               the file designated by ROOT in any coding system
"RTN","ICDEXLK3",202,0)
 ;               in the file
"RTN","ICDEXLK3",203,0)
 ;               
"RTN","ICDEXLK3",204,0)
 ;               If both ROOT and SYS are supplied, the word was
"RTN","ICDEXLK3",205,0)
 ;               found in the specified coding system
"RTN","ICDEXLK3",206,0)
 ;               
"RTN","ICDEXLK3",207,0)
 ;           0 = Word was not found
"RTN","ICDEXLK3",208,0)
 ;           
"RTN","ICDEXLK3",209,0)
 N TKN S TKN=$G(X),X=0 Q:'$L(TKN) 0  S ROOT=$$ROOT^ICDEX($G(ROOT)),SYS=$$SYS^ICDEX($G(SYS))
"RTN","ICDEXLK3",210,0)
 I '$L(ROOT)!(ROOT'["^")!(ROOT'["(") D  Q X
"RTN","ICDEXLK3",211,0)
 . N TRT,FI F FI=80,80.1 S TRT=$$ROOT^ICDEX(FI) D
"RTN","ICDEXLK3",212,0)
 . . I +SYS'>0!('$D(^ICDS(+SYS))) D
"RTN","ICDEXLK3",213,0)
 . . . N SYS S SYS=0 F  S SYS=$O(@(TRT_"""AD"","_SYS_")")) Q:+SYS'>0  D
"RTN","ICDEXLK3",214,0)
 . . . . S:$D(@(TRT_"""AD"","_SYS_","""_TKN_""")")) X=1
"RTN","ICDEXLK3",215,0)
 . . I +SYS>0&('$D(^ICDS(+SYS))) D
"RTN","ICDEXLK3",216,0)
 . . . S:$D(@(TRT_"""AD"","_+SYS_","""_TKN_""")")) X=1
"RTN","ICDEXLK3",217,0)
 I +SYS'>0!('$D(^ICDS(+SYS))) D  Q X
"RTN","ICDEXLK3",218,0)
 . N SYS S SYS=0 F  S SYS=$O(@(ROOT_"""AD"","_SYS_")")) Q:+SYS'>0  D
"RTN","ICDEXLK3",219,0)
 . . S:$D(@(ROOT_"""AD"","_SYS_","""_TKN_""")")) X=1
"RTN","ICDEXLK3",220,0)
 Q:'$L(ROOT)!(ROOT'["^")!(ROOT'["(") 0
"RTN","ICDEXLK3",221,0)
 Q:+SYS'>0!('$D(^ICDS(+SYS))) 0
"RTN","ICDEXLK3",222,0)
 S:$D(@(ROOT_"""AD"","_+SYS_","""_TKN_""")")) X=1
"RTN","ICDEXLK3",223,0)
 Q X
"RTN","ICDEXLK3",224,0)
LS(ROOT,IEN,VDT) ;   Last Status
"RTN","ICDEXLK3",225,0)
 N EFF,HIS,STA,CDT S IEN=+($G(IEN)),ROOT=$G(ROOT),VDT=$$CDT($G(VDT))
"RTN","ICDEXLK3",226,0)
 Q:+IEN'>0 "-1"  Q:'$L(ROOT) "-1"  Q:VDT'?7N "-1"  S CDT=VDT+.00001
"RTN","ICDEXLK3",227,0)
 S EFF=$O(@(ROOT_+IEN_",66,""B"","_CDT_")"),-1) Q:EFF'?7N "-1"
"RTN","ICDEXLK3",228,0)
 S HIS=$O(@(ROOT_+IEN_",66,""B"","_EFF_","" "")"),-1) Q:+HIS'>0 "-1"
"RTN","ICDEXLK3",229,0)
 S STA=$G(@(ROOT_+IEN_",66,"_+HIS_",0)")) Q:'$L(STA) "-1"
"RTN","ICDEXLK3",230,0)
 S EFF=$P(STA,"^",1),STA=$P(STA,"^",2) Q:EFF'?7N "-1"  Q:STA'?1N "-1"
"RTN","ICDEXLK3",231,0)
 S X=STA_"^"_EFF
"RTN","ICDEXLK3",232,0)
 Q X
"RTN","ICDEXLK3",233,0)
LD(ROOT,IEN,VDT,VER) ;   Last Description
"RTN","ICDEXLK3",234,0)
 N EFF,LDI,LDS,CDT S IEN=+($G(IEN)),ROOT=$G(ROOT),VDT=$$CDT($G(VDT))
"RTN","ICDEXLK3",235,0)
 Q:+IEN'>0 ""  Q:'$L(ROOT) ""  Q:VDT'?7N ""  S CDT=VDT+.00001
"RTN","ICDEXLK3",236,0)
 S EFF=$O(@(ROOT_+IEN_",68,""B"","_CDT_")"),-1)
"RTN","ICDEXLK3",237,0)
 Q:+($G(VER))>0&(EFF'?7N) ""
"RTN","ICDEXLK3",238,0)
 S:+($G(VER))'>0&(EFF'?7N) EFF=$O(@(ROOT_+IEN_",68,""B"",0)"))
"RTN","ICDEXLK3",239,0)
 S LDI=$O(@(ROOT_+IEN_",68,""B"","_+EFF_","" "")"),-1) Q:+LDI'>0 ""
"RTN","ICDEXLK3",240,0)
 S LDS=$$UP^XLFSTR($G(@(ROOT_+IEN_",68,"_+LDI_",1)"))) Q:'$L(LDS) ""
"RTN","ICDEXLK3",241,0)
 S X=LDS
"RTN","ICDEXLK3",242,0)
 Q X
"RTN","ICDEXLK3",243,0)
ISCODE(X,ROOT) ;   Check if Text is a Code
"RTN","ICDEXLK3",244,0)
 N KEY,ORG,LAS,ORD,OUT,SI,SYS
"RTN","ICDEXLK3",245,0)
 S KEY=$G(X) Q:'$L($TR(KEY,"""","")) 0
"RTN","ICDEXLK3",246,0)
 S ORG=$E(KEY,1,($L(KEY)-1))_$C(($A($E(KEY,$L(KEY)))-1))_"~ "
"RTN","ICDEXLK3",247,0)
 S OUT=0,SI=0
"RTN","ICDEXLK3",248,0)
 F  S SI=$O(^ICDS(SI)) Q:+SI'>0  D  Q:+OUT>0
"RTN","ICDEXLK3",249,0)
 . N ORD,RES S ORD=ORG
"RTN","ICDEXLK3",250,0)
 . S RES=$O(@(ROOT_"""ABA"","_+SI_","""_ORD_""")"))
"RTN","ICDEXLK3",251,0)
 . Q:'$L(RES)  S:$E(RES,$L(RES))=" " RES=$E(RES,1,($L(RES)-1))
"RTN","ICDEXLK3",252,0)
 . I RES=KEY S OUT="1^"_SI_"^"_KEY Q
"RTN","ICDEXLK3",253,0)
 . I $L(KEY)<$L(RES),KEY=$E(RES,1,$L(KEY)) S OUT="1^"_SI_"^"_KEY
"RTN","ICDEXLK3",254,0)
 S KEY=$$UP^XLFSTR($G(X))
"RTN","ICDEXLK3",255,0)
 S ORG=$E(KEY,1,($L(KEY)-1))_$C(($A($E(KEY,$L(KEY)))-1))_"~ "
"RTN","ICDEXLK3",256,0)
 S SI=0 F  S SI=$O(^ICDS(SI)) Q:+SI'>0  D  Q:+OUT>0
"RTN","ICDEXLK3",257,0)
 . N ORD,RES S ORD=ORG
"RTN","ICDEXLK3",258,0)
 . S RES=$O(@(ROOT_"""ABA"","_+SI_","""_ORD_""")"))
"RTN","ICDEXLK3",259,0)
 . Q:'$L(RES)  S:$E(RES,$L(RES))=" " RES=$E(RES,1,($L(RES)-1))
"RTN","ICDEXLK3",260,0)
 . I RES=KEY S OUT="1^"_SI_"^"_KEY Q
"RTN","ICDEXLK3",261,0)
 . I $L(KEY)<$L(RES),KEY=$E(RES,1,$L(KEY)) S OUT="1^"_SI_"^"_KEY
"RTN","ICDEXLK3",262,0)
 Q:+OUT>0 OUT
"RTN","ICDEXLK3",263,0)
 Q 0
"RTN","ICDEXLK3",264,0)
UNQ(X,ROOT) ;   Check if Text is a Unique Code
"RTN","ICDEXLK3",265,0)
 ;
"RTN","ICDEXLK3",266,0)
 ; Input
"RTN","ICDEXLK3",267,0)
 ; 
"RTN","ICDEXLK3",268,0)
 ;   X      Input String/Code
"RTN","ICDEXLK3",269,0)
 ;   ROOT   Global Root of file
"RTN","ICDEXLK3",270,0)
 ;   
"RTN","ICDEXLK3",271,0)
 ; Output
"RTN","ICDEXLK3",272,0)
 ; 
"RTN","ICDEXLK3",273,0)
 ;   $$UNQ  3 Piece ^ delimited string
"RTN","ICDEXLK3",274,0)
 ;   
"RTN","ICDEXLK3",275,0)
 ;             Piece  Content
"RTN","ICDEXLK3",276,0)
 ;             1      String is Unique in file
"RTN","ICDEXLK3",277,0)
 ;                       1 if X is unique
"RTN","ICDEXLK3",278,0)
 ;                       0 if X is not unique
"RTN","ICDEXLK3",279,0)
 ;             2      String is a Code
"RTN","ICDEXLK3",280,0)
 ;                       1 is a code
"RTN","ICDEXLK3",281,0)
 ;                       0 X is not a code
"RTN","ICDEXLK3",282,0)
 ;             3      String has Multiple Entries
"RTN","ICDEXLK3",283,0)
 ;                       1 Yes, X occurs more than once
"RTN","ICDEXLK3",284,0)
 ;                       0 No, X occurs once (aka unique)
"RTN","ICDEXLK3",285,0)
 ;             
"RTN","ICDEXLK3",286,0)
 ;          or -1 if the code string X is not found
"RTN","ICDEXLK3",287,0)
 ;
"RTN","ICDEXLK3",288,0)
 N KEY,ORG,LAS,ORD,OUT,IENS,IEN,NXT,NIEN,SI,SYS Q:'$L($G(X)) -1
"RTN","ICDEXLK3",289,0)
 S KEY=$TR($G(X),"""","") Q:'$L(KEY) -1
"RTN","ICDEXLK3",290,0)
 S ORG=$E(KEY,1,($L(KEY)-1))_$C(($A($E(KEY,$L(KEY)))-1))_"~ "
"RTN","ICDEXLK3",291,0)
 S OUT=-1,(IEN,NXT,SI)=0
"RTN","ICDEXLK3",292,0)
 F  S SI=$O(@(ROOT_"""ABA"","_+SI_")")) Q:+SI'>0  D  Q:OUT>0  Q:+IEN>0  Q:+NXT>0
"RTN","ICDEXLK3",293,0)
 . N ORD S ORD=ORG S IEN=$O(@(ROOT_"""ABA"","_+SI_","""_KEY_" "",0)"))
"RTN","ICDEXLK3",294,0)
 . S (NXT,NIEN)=0
"RTN","ICDEXLK3",295,0)
 . F  S ORD=$O(@(ROOT_"""ABA"","_+SI_","""_ORD_""")")) Q:'$L(ORD)  Q:$E(ORD,1,$L(KEY))'=KEY  D
"RTN","ICDEXLK3",296,0)
 . . S NIEN=0 F  S NIEN=$O(@(ROOT_"""ABA"","_+SI_","""_ORD_""","_NIEN_")")) Q:+NIEN'>0  D
"RTN","ICDEXLK3",297,0)
 . . . S:ORD'=(KEY_" ") IENS(+NIEN)=""
"RTN","ICDEXLK3",298,0)
 S (NXT,NIEN)=0 F  S NIEN=$O(IENS(NIEN)) Q:+NIEN'>0  S NXT=NXT+1
"RTN","ICDEXLK3",299,0)
 S:+IEN>0 $P(OUT,"^",1)=1,$P(OUT,"^",2)=1
"RTN","ICDEXLK3",300,0)
 I +IEN>0 S:+NXT>0 $P(OUT,"^",3)=1,$P(OUT,"^",1)=0
"RTN","ICDEXLK3",301,0)
 I +($G(OUT))'<0 F SI=1:1:3 S $P(OUT,"^",SI)=+($P($G(OUT),"^",SI))
"RTN","ICDEXLK3",302,0)
 I NXT>0,+IEN'>0 S OUT=$S(NXT>1:0,1:1)_"^0^"_$S(NXT>1:1,1:0)
"RTN","ICDEXLK3",303,0)
 S X=OUT
"RTN","ICDEXLK3",304,0)
 Q X
"RTN","ICDEXLK3",305,0)
ISORD(X) ;   Check if in $ORDER
"RTN","ICDEXLK3",306,0)
 Q:'$L($G(ORD)) 0  Q:'$L($G(KEY)) 0
"RTN","ICDEXLK3",307,0)
 Q:$E($G(ORD),1,$L($G(KEY)))=$G(KEY) 1
"RTN","ICDEXLK3",308,0)
 Q 0
"RTN","ICDEXLK3",309,0)
CDT(X,Y) ;   ICD-10 Code Set Date
"RTN","ICDEXLK3",310,0)
 N CDT,SYS S CDT=$G(X),SYS=+($G(Y)) S:CDT'?7N CDT=$$DT^XLFDT
"RTN","ICDEXLK3",311,0)
 Q X
"RTN","ICDEXLK3",312,0)
SYS(ROOT,CDT) ;   System from File and Date
"RTN","ICDEXLK3",313,0)
 N FILE,CTL,FDT,NDT,IEN,SYS S (NDT,SYS)=0
"RTN","ICDEXLK3",314,0)
 S FILE=$S($G(ROOT)="^ICD9(":80,$G(ROOT)="^ICD0(":80.1,1:"") Q:FILE'>0 0
"RTN","ICDEXLK3",315,0)
 S CTL=$G(CDT) Q:CTL'?7N 0
"RTN","ICDEXLK3",316,0)
 S IEN=0 F  S IEN=$O(^ICDS("F",FILE,IEN)) Q:+IEN'>0  D
"RTN","ICDEXLK3",317,0)
 . S FDT=$P($G(^ICDS(+IEN,0)),"^",4) Q:FDT'?7N
"RTN","ICDEXLK3",318,0)
 . I FDT<(CTL+.001),FDT>NDT S FDT=CTL,SYS=IEN
"RTN","ICDEXLK3",319,0)
 Q SYS
"RTN","ICDEXLK3",320,0)
SH ;   Show TMP
"RTN","ICDEXLK3",321,0)
 N SUB,NN,NC S SUB="ICD9" S:'$D(^TMP(SUB)) SUB="ICD0" Q:'$D(^TMP(SUB))
"RTN","ICDEXLK3",322,0)
 S NN="^TMP("""_SUB_""","_$J_")",NC="^TMP("""_SUB_""","_$J_","
"RTN","ICDEXLK3",323,0)
 W:'$D(@NN) ! Q:'$D(@NN)  F  S NN=$Q(@NN) Q:'$L(NN)!(NN'[NC)  W !,NN,"=",@NN
"RTN","ICDEXLK3",324,0)
 W !
"RTN","ICDEXLK3",325,0)
 Q
"RTN","ICDEXLK3",326,0)
TM(X,Y) ;   Trim Y
"RTN","ICDEXLK3",327,0)
 S Y=$G(Y) S:'$L(Y) Y=" "
"RTN","ICDEXLK3",328,0)
 F  Q:$E(X,1)'=Y  S X=$E(X,2,$L(X))
"RTN","ICDEXLK3",329,0)
 F  Q:$E(X,$L(X))'=Y  S X=$E(X,1,($L(X)-1))
"RTN","ICDEXLK3",330,0)
 Q X
"RTN","ICDEXLK4")
0^4^B27639305^B25474563
"RTN","ICDEXLK4",1,0)
ICDEXLK4 ;SLC/KER - ICD Extractor - Lookup, Search Text ;12/19/2014
"RTN","ICDEXLK4",2,0)
 ;;18.0;DRG Grouper;**57,67,82**;Oct 20, 2000;Build 21
"RTN","ICDEXLK4",3,0)
 ;               
"RTN","ICDEXLK4",4,0)
 ; Global Variables
"RTN","ICDEXLK4",5,0)
 ;    ^TMP(SUB,$J         SACC 2.3.2.5.1
"RTN","ICDEXLK4",6,0)
 ;               
"RTN","ICDEXLK4",7,0)
 ; External References
"RTN","ICDEXLK4",8,0)
 ;    $$LOW^XLFSTR        ICR  10104
"RTN","ICDEXLK4",9,0)
 ;    $$UP^XLFSTR         ICR  10104
"RTN","ICDEXLK4",10,0)
 ;               
"RTN","ICDEXLK4",11,0)
 ; Local Variables Newed or Killed by calling application
"RTN","ICDEXLK4",12,0)
 ;     DIC(0)    Fileman Lookup Parameters
"RTN","ICDEXLK4",13,0)
 ;     
"RTN","ICDEXLK4",14,0)
 ; Local Variables Newed or Killed Elsewhere
"RTN","ICDEXLK4",15,0)
 ;     ICDBYCD   Sort by Code
"RTN","ICDEXLK4",16,0)
 ;     CDT       Code Set Date
"RTN","ICDEXLK4",17,0)
 ;     OUT       Format of display
"RTN","ICDEXLK4",18,0)
 ;     SYS       Coding System
"RTN","ICDEXLK4",19,0)
 ;     VER       Versioned Lookup
"RTN","ICDEXLK4",20,0)
 ;     SUB       ^TMP Subscript
"RTN","ICDEXLK4",21,0)
 ;     SYS       Coding System
"RTN","ICDEXLK4",22,0)
 ;
"RTN","ICDEXLK4",23,0)
TXT ; Lookup by Text (Requires TXT and ROOT)
"RTN","ICDEXLK4",24,0)
 Q:$D(ICDBYCD)  Q:'$L($G(TXT))  Q:'$L($G(ROOT))  Q:$L(TXT)'>1  Q:$G(DIC(0))["B"
"RTN","ICDEXLK4",25,0)
 S CDT=$$CDT^ICDEXLK3($G(CDT)) N PARS,ORG,CNT,PRV,EROOT,KEY,LOOK,EXACT,ABBR,PRIME
"RTN","ICDEXLK4",26,0)
 S:'$L($G(SUB)) SUB=$TR(ROOT,"^(,","")
"RTN","ICDEXLK4",27,0)
 S LOOK=TXT,PRV=+($G(^TMP(SUB,$J,"SEL",0))),(EXACT,ABBR)=0
"RTN","ICDEXLK4",28,0)
 S CNT=0,ORG=$$UP^XLFSTR($G(TXT)) K PARS D TOKEN^ICDTOKN(TXT,ROOT,$G(SYS),.PARS)
"RTN","ICDEXLK4",29,0)
 N I,TMP S NUM=0,(PRIME,KEY,TMP)="",I=0 F  S I=$O(PARS(I)) Q:+I'>0  D
"RTN","ICDEXLK4",30,0)
 . N TX S TX=$G(PARS(I)) S:$L(TX)>$L(TMP) TMP=TX,NUM=I
"RTN","ICDEXLK4",31,0)
 S:+NUM>0&($L(TMP)) (PRIME,KEY)=TMP S:+($G(PARS(+NUM,"A")))>0 ABBR=1
"RTN","ICDEXLK4",32,0)
 I NUM'>0 S NUM=$O(PARS(0)),(PRIME,KEY)=$G(PARS(+NUM)) S:+($G(PARS(+NUM,"A")))>0 ABBR=1
"RTN","ICDEXLK4",33,0)
 K:NUM>0 PARS(+NUM) S:NUM>0&($G(PARS(0))>0) PARS(0)=$G(PARS(0))-1 Q:$L(KEY)'>1
"RTN","ICDEXLK4",34,0)
 S EROOT=ROOT_"""D""," S:+($G(SYS))>0&($D(@(ROOT_"""AD"","_+($G(SYS))_")"))) EROOT=ROOT_"""AD"","_+($G(SYS))_","
"RTN","ICDEXLK4",35,0)
 S EXACT=0 I $O(PARS(0))'>0,$L(PRIME),$D(@(EROOT_""""_PRIME_""")")) S EXACT=1
"RTN","ICDEXLK4",36,0)
 I EXACT>0!(ABBR>0) D
"RTN","ICDEXLK4",37,0)
 . N ORD,STR,TKN S STR=PRIME F TKN=STR,(STR_"S"),(STR_"ES") D
"RTN","ICDEXLK4",38,0)
 . . S ORD=TKN I $D(@(EROOT_""""_ORD_""")")) D TXT2
"RTN","ICDEXLK4",39,0)
 I (EXACT'>0&(ABBR'>0))!('$D(^TMP(SUB,$J,"FND"))) D
"RTN","ICDEXLK4",40,0)
 . N I S I=0 F  S I=$O(PARS(+I)) Q:+I'>0  K PARS(+I,"A")
"RTN","ICDEXLK4",41,0)
 . N ORD,STR,TKN S STR=PRIME F TKN=STR,(STR_"S"),(STR_"ES") D
"RTN","ICDEXLK4",42,0)
 . . S ORD=$E(TKN,1,($L(TKN)-1))_$C(($A($E(TKN,$L(TKN)))-1))_"~"
"RTN","ICDEXLK4",43,0)
 . . F  S ORD=$O(@(EROOT_""""_ORD_""")")) Q:'$$ISORD^ICDEXLK3  D TXT2
"RTN","ICDEXLK4",44,0)
 D:$D(^TMP(SUB,$J,"FND")) SEL^ICDEXLK5(ROOT,0)
"RTN","ICDEXLK4",45,0)
 Q
"RTN","ICDEXLK4",46,0)
TXT2 ;   Lookup by Text (loop)
"RTN","ICDEXLK4",47,0)
 N IEN S IEN=0 F  S IEN=$O(@(EROOT_""""_ORD_""","_+IEN_")")) Q:+IEN'>0  D
"RTN","ICDEXLK4",48,0)
 . N OK,NUM,TDT,TIE,TXT,KEY,VDT S VDT=+CDT+.000001
"RTN","ICDEXLK4",49,0)
 . S TDT=$O(@(EROOT_""""_ORD_""","_+IEN_","_VDT_")"),-1)
"RTN","ICDEXLK4",50,0)
 . I +($G(VER))'>0,TDT'?7N D
"RTN","ICDEXLK4",51,0)
 . . S TDT=$O(@(EROOT_""""_ORD_""","_+IEN_","_(+CDT-.000001)_")"))
"RTN","ICDEXLK4",52,0)
 . Q:TDT'?7N  S TIE=$O(@(EROOT_""""_ORD_""","_+IEN_","_+TDT_",0)"))
"RTN","ICDEXLK4",53,0)
 . S TXT=$$UP^XLFSTR($G(@(ROOT_+IEN_",68,"_+TIE_",1)")))
"RTN","ICDEXLK4",54,0)
 . I $G(DIC(0))'["A",$G(DIC(0))["O" D  Q
"RTN","ICDEXLK4",55,0)
 . . Q:CNT>1  I ORG=TXT D FND^ICDEXLK5(ROOT,IEN,CDT,$G(SYS),$G(VER),0,$G(OUT)) S CNT=CNT+1
"RTN","ICDEXLK4",56,0)
 . S OK=1,NUM=0
"RTN","ICDEXLK4",57,0)
 . F  S NUM=$O(PARS(NUM)) Q:+NUM'>0  D
"RTN","ICDEXLK4",58,0)
 . . N EXACT,PR,OR,SP,IN,AB S PR=$G(PARS(NUM)),AB=+($G(PARS(+NUM,"A")))
"RTN","ICDEXLK4",59,0)
 . . I AB'>0 S IN=$$IN(TXT,PR),SP=$$SI(ROOT,+IEN,+TIE,PR)
"RTN","ICDEXLK4",60,0)
 . . I AB>0 S IN=$$EX(TXT,PR),SP=$$SE(ROOT,+IEN,+TIE,PR)
"RTN","ICDEXLK4",61,0)
 . . S:IN'>0&(SP'>0) OK=0
"RTN","ICDEXLK4",62,0)
 . D:+OK>0 FND^ICDEXLK5(ROOT,IEN,CDT,$G(SYS),$G(VER),0,$G(OUT))
"RTN","ICDEXLK4",63,0)
 Q
"RTN","ICDEXLK4",64,0)
 ; 
"RTN","ICDEXLK4",65,0)
 ; Miscellaneous
"RTN","ICDEXLK4",66,0)
SE(RT,IE,TI,X) ;   Supplemental Word (exact match exist)
"RTN","ICDEXLK4",67,0)
 N CNTL,IIEN,PLUR,TEXT,ROOT,TIEN
"RTN","ICDEXLK4",68,0)
 S CNTL=$$UP^XLFSTR($G(X)) Q:'$L(CNTL) 0
"RTN","ICDEXLK4",69,0)
 S ROOT=$$ROOT^ICDEX($G(RT)) Q:'$L(ROOT) 0
"RTN","ICDEXLK4",70,0)
 S IIEN=+($G(IE)),TIEN=+($G(TI))
"RTN","ICDEXLK4",71,0)
 S TEXT=$$UP^XLFSTR($G(@(ROOT_+IIEN_",68,"_+TIEN_",1)"))) Q:'$L(TEXT) 0
"RTN","ICDEXLK4",72,0)
 Q:'$D(@(ROOT_+IIEN_",68,"_+TIEN_",2,""B"","""_CNTL_""")")) 0
"RTN","ICDEXLK4",73,0)
 S PLUR=$$EX(TEXT,(CNTL_"S")) Q:PLUR>0 0
"RTN","ICDEXLK4",74,0)
 Q 1
"RTN","ICDEXLK4",75,0)
SI(RT,IE,TI,X) ;   Supplemental Word (match exist)
"RTN","ICDEXLK4",76,0)
 N CNTL,IIEN,PLUR,TEXT,NEXT,TIEN,ORDR,ROOT
"RTN","ICDEXLK4",77,0)
 S CNTL=$$UP^XLFSTR($G(X)) Q:'$L(CNTL) 0
"RTN","ICDEXLK4",78,0)
 S ROOT=$$ROOT^ICDEX($G(RT)) Q:'$L(ROOT) 0
"RTN","ICDEXLK4",79,0)
 S IIEN=+($G(IE)),TIEN=+($G(TI))
"RTN","ICDEXLK4",80,0)
 S:CNTL?1N.N ORDR=CNTL-.00000000000000009 I CNTL'?1N.N D
"RTN","ICDEXLK4",81,0)
 . S:$L(CNTL)=1 ORDR=$C($A(CNTL)-1)_"~"
"RTN","ICDEXLK4",82,0)
 . S:$L(CNTL)>1 ORDR=$E(CNTL,1,($L(CNTL)-1))_$C($A($E(CNTL,$L(CNTL)))-1)_"~"
"RTN","ICDEXLK4",83,0)
 S NEXT=$O(@(ROOT_+IIEN_",68,"_+TIEN_",2,""B"","""_ORDR_""")"))
"RTN","ICDEXLK4",84,0)
 Q:$E(NEXT,1,$L(CNTL))=CNTL 1
"RTN","ICDEXLK4",85,0)
 Q 0
"RTN","ICDEXLK4",86,0)
EX(X,Y) ;   String Y is exactly in X
"RTN","ICDEXLK4",87,0)
 N CON,CNTL,TEXT,EXACT S TEXT=$G(X),CNTL=$G(Y),EXACT=1
"RTN","ICDEXLK4",88,0)
 S CON=$$CON(TEXT,CNTL) S X=+($G(CON))
"RTN","ICDEXLK4",89,0)
 Q X
"RTN","ICDEXLK4",90,0)
IN(X,Y) ;   String Y is contained in X
"RTN","ICDEXLK4",91,0)
 N CON,CNTL,TEXT S TEXT=$G(X),CNTL=$G(Y)
"RTN","ICDEXLK4",92,0)
 S CON=$$CON(TEXT,CNTL) S X=+($G(CON))
"RTN","ICDEXLK4",93,0)
 Q X
"RTN","ICDEXLK4",94,0)
CON(X,Y) ;   Text X Contains String Y
"RTN","ICDEXLK4",95,0)
 N CNTL,CONT,TEXT,LEAD,TRAIL,STR
"RTN","ICDEXLK4",96,0)
 S TEXT=$$UP^XLFSTR($G(X)),CNTL=$$UP^XLFSTR($G(Y))
"RTN","ICDEXLK4",97,0)
 Q:'$L(TEXT) 0  Q:'$L(CNTL) 0  Q:$L(CNTL)>$L(TEXT) 0
"RTN","ICDEXLK4",98,0)
 S (X,CONT)=0 I +($G(EXACT))>0 S X=0 D  Q X
"RTN","ICDEXLK4",99,0)
 . F TRAIL=" ","/","-","(","<","{","[","," D  Q:CONT>0
"RTN","ICDEXLK4",100,0)
 . . N STR S STR=CNTL_TRAIL S:$E(TEXT,1,$L(STR))=STR CONT=1 S:CONT>0 X=CONT
"RTN","ICDEXLK4",101,0)
 . Q:CONT>0  F LEAD=" ","/","-","(","<","{","[","," D  Q:CONT>0
"RTN","ICDEXLK4",102,0)
 . . N STR S STR=LEAD_CNTL S:$E(TEXT,($L(TEXT)-$L(STR)),$L(TEXT))=STR CONT=1 S:CONT>0 X=CONT
"RTN","ICDEXLK4",103,0)
 . Q:CONT>0  F LEAD=" ","/","-","(","<","{","[","," D  Q:CONT>0
"RTN","ICDEXLK4",104,0)
 . . F TRAIL=" ","-",")",">","}","]","," D  Q:CONT>0
"RTN","ICDEXLK4",105,0)
 . . . N STR S STR=LEAD_CNTL_TRAIL S:TEXT[STR CONT=1 S:CONT>0 X=CONT
"RTN","ICDEXLK4",106,0)
 . S:CONT>0 X=CONT
"RTN","ICDEXLK4",107,0)
 S:$E(TEXT,1,$L(CNTL))=CNTL CONT=1
"RTN","ICDEXLK4",108,0)
 S:CONT>0 X=CONT Q:CONT>0 X
"RTN","ICDEXLK4",109,0)
 F LEAD=" ","/","-","(","<","{","[","," D  Q:CONT>0
"RTN","ICDEXLK4",110,0)
 . N STR S STR=LEAD_CNTL S:TEXT[STR CONT=1 S:CONT>0 X=CONT
"RTN","ICDEXLK4",111,0)
 Q:CONT>0 X  F LEAD=" ","/","-","(","<","{","[","," D  Q:CONT>0
"RTN","ICDEXLK4",112,0)
 . N TRAIL F TRAIL=" ","-",")",">","}","]","," D  Q:CONT>0
"RTN","ICDEXLK4",113,0)
 . . N STR S STR=LEAD_CNTL_TRAIL S:TEXT[STR CONT=1 S:CONT>0 X=CONT
"RTN","ICDEXLK4",114,0)
 S:CONT>0 X=CONT
"RTN","ICDEXLK4",115,0)
 Q X
"RTN","ICDEXLK4",116,0)
LC(X) ;   Leading Character
"RTN","ICDEXLK4",117,0)
 S X=$G(X) S X=$$UP^XLFSTR($E(X,1))_$$LOW^XLFSTR($E(X,2,$L(X)))
"RTN","ICDEXLK4",118,0)
 Q X
"RTN","ICDEXLK4",119,0)
SS ;   Show Select/Find Global Arrays
"RTN","ICDEXLK4",120,0)
 N NN,NC,EX S EX=0 S NN="^TMP(""ICD9"","_$J_")",NC="^TMP(""ICD9"","_$J_","
"RTN","ICDEXLK4",121,0)
 F  S NN=$Q(@NN) Q:'$L(NN)!(NN'[NC)  D  Q:EX>20
"RTN","ICDEXLK4",122,0)
 . W !,NN,"=",$E(@NN,1,48) S EX=EX+1
"RTN","ICDEXLK4",123,0)
 S EX=0 S NN="^TMP(""ICD0"","_$J_")",NC="^TMP(""ICD0"","_$J_","
"RTN","ICDEXLK4",124,0)
 F  S NN=$Q(@NN) Q:'$L(NN)!(NN'[NC)  D  Q:EX>20
"RTN","ICDEXLK4",125,0)
 . W !,NN,"=",$E(@NN,1,48) S EX=EX+1
"RTN","ICDEXLK4",126,0)
 Q
"RTN","ICDEXLK5")
0^5^B70506378^B69728185
"RTN","ICDEXLK5",1,0)
ICDEXLK5 ;SLC/KER - ICD Extractor - Lookup, EXM/IEN/List ;07/15/2015
"RTN","ICDEXLK5",2,0)
 ;;18.0;DRG Grouper;**57,67,82**;Oct 20, 2000;Build 21
"RTN","ICDEXLK5",3,0)
 ;               
"RTN","ICDEXLK5",4,0)
 ; Global Variables
"RTN","ICDEXLK5",5,0)
 ;    ^ICDS(              N/A
"RTN","ICDEXLK5",6,0)
 ;    ^TMP(SUB,$J         SACC 2.3.2.5.1
"RTN","ICDEXLK5",7,0)
 ;               
"RTN","ICDEXLK5",8,0)
 ; External References
"RTN","ICDEXLK5",9,0)
 ;    $$MIX^LEXXM         ICR   5781
"RTN","ICDEXLK5",10,0)
 ;    $$DT^XLFDT          ICR  10103
"RTN","ICDEXLK5",11,0)
 ;    $$FMTE^XLFDT        ICR  10103
"RTN","ICDEXLK5",12,0)
 ;    $$UP^XLFSTR         ICR  10104
"RTN","ICDEXLK5",13,0)
 ;    
"RTN","ICDEXLK5",14,0)
 ; Marked Items
"RTN","ICDEXLK5",15,0)
 ;    $T(MIX^LEXXM)
"RTN","ICDEXLK5",16,0)
 ;    
"RTN","ICDEXLK5",17,0)
 ; Local Variables Newed or Killed by calling application
"RTN","ICDEXLK5",18,0)
 ;     DIC(0)    Fileman Lookup Parameters
"RTN","ICDEXLK5",19,0)
 ;     DIC("S")  Fileman Screen
"RTN","ICDEXLK5",20,0)
 ;     
"RTN","ICDEXLK5",21,0)
 ; Local Variables Newed or Killed Elsewhere
"RTN","ICDEXLK5",22,0)
 ;     ICDBYCD   Sort by Code
"RTN","ICDEXLK5",23,0)
 ;     ICDCDT    Code Set Date
"RTN","ICDEXLK5",24,0)
 ;     ICDOUT    Format of display
"RTN","ICDEXLK5",25,0)
 ;     ICDVDT    Date to use during lookup 
"RTN","ICDEXLK5",26,0)
 ;     ICDSYS    Coding System
"RTN","ICDEXLK5",27,0)
 ;     ICDVER    Versioned Lookup
"RTN","ICDEXLK5",28,0)
 ;     ICDDICS   Screen
"RTN","ICDEXLK5",29,0)
 ;     INP2      User Input (processed)
"RTN","ICDEXLK5",30,0)
 ;     LOUD      Output to Screen
"RTN","ICDEXLK5",31,0)
 ;     
"RTN","ICDEXLK5",32,0)
 Q
"RTN","ICDEXLK5",33,0)
EXM(TXT,ROOT,Y,CDT,SYS,VER) ; Lookup Exact Match
"RTN","ICDEXLK5",34,0)
 ;
"RTN","ICDEXLK5",35,0)
 ;   Input   TXT    Text/Code for search (Required)
"RTN","ICDEXLK5",36,0)
 ;           ROOT   Global Root (Required)
"RTN","ICDEXLK5",37,0)
 ;          .Y      Output array passed by reference (Required)
"RTN","ICDEXLK5",38,0)
 ;           CDT    Date
"RTN","ICDEXLK5",39,0)
 ;           SYS    Coding System
"RTN","ICDEXLK5",40,0)
 ;           VER    Versioned Search
"RTN","ICDEXLK5",41,0)
 ;   
"RTN","ICDEXLK5",42,0)
 ;   Output  $$EM   Number of Exact Matches Found
"RTN","ICDEXLK5",43,0)
 ;           Y(n)   Array of Exact Matches
"RTN","ICDEXLK5",44,0)
 ;   
"RTN","ICDEXLK5",45,0)
 N EXM,KEY,ORD,ICDI,IEN,NUM,ORG,EROOT S ORG=$G(TXT) Q:'$L($G(ORG)) 0
"RTN","ICDEXLK5",46,0)
 Q:'$L($TR(ORG,"""","")) 0  S ROOT=$G(ROOT)  Q:'$L($G(ROOT)) 0
"RTN","ICDEXLK5",47,0)
 S SYS=+($G(SYS)),VER=+($G(VER))
"RTN","ICDEXLK5",48,0)
 S CDT=$$CDT^ICDEXLK3($G(CDT),SYS)
"RTN","ICDEXLK5",49,0)
 ; Exact Match Case Sensitive Code
"RTN","ICDEXLK5",50,0)
 S KEY=ORG,KEY=ORG S ORD=$E(KEY,1,($L(KEY)-1))_$C(($A($E(KEY,$L(KEY)))-1))_"~ "
"RTN","ICDEXLK5",51,0)
 S EROOT=ROOT_"""BA""," S:+SYS>0&($D(@(ROOT_"""ABA"","_+SYS_")"))) EROOT=ROOT_"""ABA"","_+SYS_","
"RTN","ICDEXLK5",52,0)
 F  S ORD=$O(@(EROOT_""""_ORD_""")")) Q:'$$ISORD  D
"RTN","ICDEXLK5",53,0)
 . S IEN=0 F  S IEN=$O(@(EROOT_""""_ORD_""","_+IEN_")")) Q:+IEN'>0  D
"RTN","ICDEXLK5",54,0)
 . . N VAL,STA S STA=1
"RTN","ICDEXLK5",55,0)
 . . S:VER>0 STA=$$LS^ICDEXLK3(ROOT,IEN,CDT)
"RTN","ICDEXLK5",56,0)
 . . Q:+($G(VER))>0&(+STA'>0)
"RTN","ICDEXLK5",57,0)
 . . S VAL=$P($G(@(ROOT_+IEN_",0)")),"^",1)
"RTN","ICDEXLK5",58,0)
 . . Q:VAL'=ORG  S EXM(IEN)="",LOR=1
"RTN","ICDEXLK5",59,0)
 ; Exact Match Code
"RTN","ICDEXLK5",60,0)
 I $O(EXM(0))'>0 D
"RTN","ICDEXLK5",61,0)
 . S KEY=$$UP^XLFSTR(ORG),KEY=ORG S ORD=$E(KEY,1,($L(KEY)-1))_$C(($A($E(KEY,$L(KEY)))-1))_"~ "
"RTN","ICDEXLK5",62,0)
 . S EROOT=ROOT_"""BA""," S:+SYS>0&($D(@(ROOT_"""ABA"","_+SYS_")"))) EROOT=ROOT_"""ABA"","_+SYS_","
"RTN","ICDEXLK5",63,0)
 . F  S ORD=$O(@(EROOT_""""_ORD_""")")) Q:'$$ISORD  D
"RTN","ICDEXLK5",64,0)
 . . S IEN=0 F  S IEN=$O(@(EROOT_""""_ORD_""","_+IEN_")")) Q:+IEN'>0  D
"RTN","ICDEXLK5",65,0)
 . . . N VAL,STA S STA=1 S:VER>0 STA=$$LS^ICDEXLK3(ROOT,IEN,CDT)
"RTN","ICDEXLK5",66,0)
 . . . Q:+($G(VER))>0&(+STA'>0)
"RTN","ICDEXLK5",67,0)
 . . . S VAL=$P($G(@(ROOT_+IEN_",0)")),"^",1)
"RTN","ICDEXLK5",68,0)
 . . . Q:VAL'=ORG  S EXM(IEN)="",LOR=1
"RTN","ICDEXLK5",69,0)
 ; Exact Match Text
"RTN","ICDEXLK5",70,0)
 I $O(EXM(0))'>0 D
"RTN","ICDEXLK5",71,0)
 . N TI,TOK,KI,KEY,PARS,ORD,EROOT,IEN
"RTN","ICDEXLK5",72,0)
 . Q:$D(ICDBYCD)  S KEY=$$UP^XLFSTR($G(ORG)) K PARS D TOKEN^ICDEXLK3(KEY,ROOT,SYS,.PARS)
"RTN","ICDEXLK5",73,0)
 . S (KI,TI)=0,(KEY,TOK)="" F  S TI=$O(PARS(TI)) Q:+TI'>0  D
"RTN","ICDEXLK5",74,0)
 . . S TOK=$G(PARS(TI)) S:$E(TOK,1)?1U&($L(TOK)>$L(KEY)) KEY=$G(TOK),KI=TI
"RTN","ICDEXLK5",75,0)
 . K PARS(+($G(KI)))  Q:$L(KEY)'>1
"RTN","ICDEXLK5",76,0)
 . S ORD=$E(KEY,1,($L(KEY)-1))_$C(($A($E(KEY,$L(KEY)))-1))_"~"
"RTN","ICDEXLK5",77,0)
 . S EROOT=ROOT_"""D""," S:+SYS>0&($D(@(ROOT_"""AD"","_+SYS_")"))) EROOT=ROOT_"""AD"","_+SYS_","
"RTN","ICDEXLK5",78,0)
 . I $G(DIC(0))["X",$O(@(EROOT_""""_ORD_""")"))'=KEY Q
"RTN","ICDEXLK5",79,0)
 . S IEN=0 F  S IEN=$O(@(EROOT_""""_KEY_""","_+IEN_")")) Q:+IEN'>0  D
"RTN","ICDEXLK5",80,0)
 . . N VAL,STA S STA=1 S:VER>0 STA=$$LS^ICDEXLK3(ROOT,IEN,CDT)
"RTN","ICDEXLK5",81,0)
 . . Q:+($G(VER))>0&(+STA'>0)
"RTN","ICDEXLK5",82,0)
 . . S VAL=$$LD^ICDEXLK3(ROOT,IEN,CDT,VER)
"RTN","ICDEXLK5",83,0)
 . . Q:$$UP^XLFSTR(VAL)'=$$UP^XLFSTR(ORG)
"RTN","ICDEXLK5",84,0)
 . . S EXM(IEN)="",LOR=0
"RTN","ICDEXLK5",85,0)
 S (X,IEN)=0 F  S IEN=$O(EXM(IEN)) Q:+IEN'>0  D
"RTN","ICDEXLK5",86,0)
 . N ICDI S ICDI=$O(Y(" "),-1)+1,Y(ICDI)=IEN,(X,Y(0))=ICDI
"RTN","ICDEXLK5",87,0)
 Q X
"RTN","ICDEXLK5",88,0)
IEN ; Lookup by IEN
"RTN","ICDEXLK5",89,0)
 K Y S ICDOFND=0,Y=-1 Q:'$L(INP2)  Q:INP2'?1N.N  Q:+INP2'>0  Q:'$L(ROOT)  Q:+FILE'>0
"RTN","ICDEXLK5",90,0)
 N XX,VDES,UDES,IEN,SNAME,ICS,INAME,STA,ORG S IEN=INP2 Q:'$D(@(ROOT_+IEN_",0)"))
"RTN","ICDEXLK5",91,0)
 S ORG="`"_IEN,VDES=$$LD^ICDEX(FILE,IEN,ICDCDT),UDES=$$LD^ICDEX(FILE,IEN,9999999)
"RTN","ICDEXLK5",92,0)
 S ICS=$$CSI^ICDEX(FILE,IEN),XX=VDES,(SNAME,INAME)=$$SYS^ICDEX(ICS,,"E")
"RTN","ICDEXLK5",93,0)
 S:$L($G(ICDSYS)) SNAME=$$SYS^ICDEX($G(ICDSYS),,"E")
"RTN","ICDEXLK5",94,0)
 S STA=$$LS^ICDEX(FILE,IEN,$G(ICDCDT))
"RTN","ICDEXLK5",95,0)
 I $L($G(ICDSYS))>0,ICS>0,$G(ICDSYS)'=ICS D  Q
"RTN","ICDEXLK5",96,0)
 . K X,Y S X="" S:$L($G(ORG)) X=$G(ORG) S Y=-1,ICDOFND=0 Q
"RTN","ICDEXLK5",97,0)
 . S X=UDES,Y="-1^IEN "_IEN_" is not of the "_SNAME_" coding system"
"RTN","ICDEXLK5",98,0)
 I +($G(ICDVER))>0,STA'>0 D  Q
"RTN","ICDEXLK5",99,0)
 . K X,Y S X="" S:$L($G(ORG)) X=$G(ORG) S Y=-1,ICDOFND=0 Q
"RTN","ICDEXLK5",100,0)
 . S X=UDES,Y="-1^IEN "_IEN_" is not active on "_$$FMTE^XLFDT($G(ICDCDT),"5Z")
"RTN","ICDEXLK5",101,0)
 I +($G(ICDVER))'>0,$E(XX,1,2)="-1",$L(UDES),$E(UDES,1,2)'="-1" S XX=UDES
"RTN","ICDEXLK5",102,0)
 W:$D(LOUD)&($G(DIC(0))["E")&($E(XX,1,2)'="-1") "   ",XX
"RTN","ICDEXLK5",103,0)
 D FND(ROOT,IEN,ICDCDT,$G(ICS),$G(ICDVER),+($G(LOR)),$G(ICDOUT))
"RTN","ICDEXLK5",104,0)
 D SEL(ROOT,1) I +($G(^TMP(SUB,$J,"SEL",1)))>0 D
"RTN","ICDEXLK5",105,0)
 . S ICDOFND=1 N ANS S ANS=$$ONE^ICDEXLK2
"RTN","ICDEXLK5",106,0)
 . I ANS'>0 D  Q
"RTN","ICDEXLK5",107,0)
 . . S ICDOFND=0,X=""
"RTN","ICDEXLK5",108,0)
 . . ;+($G(^TMP(SUB,$J,"SEL",1)))
"RTN","ICDEXLK5",109,0)
 . . S Y=-1 K ^TMP(SUB,$J,"SEL") Q
"RTN","ICDEXLK5",110,0)
 . D X^ICDEXLK2(1,SUB) S (ICDOFND,ICDOSEL,ICDOREV)=1
"RTN","ICDEXLK5",111,0)
 . D Y^ICDEXLK2($G(ROOT),+($G(^TMP(SUB,$J,"SEL",1))),$G(ICDCDT))
"RTN","ICDEXLK5",112,0)
 . I +($G(Y))'>0,$L($G(INP)) S X=$G(INP) Q
"RTN","ICDEXLK5",113,0)
 . I +($G(Y))>0 D:$G(DIC(0))'["F" SAV^ICDEXLK6(+($G(Y)),ROOT)
"RTN","ICDEXLK5",114,0)
 K ^TMP(SUB,$J,"SEL")
"RTN","ICDEXLK5",115,0)
 Q
"RTN","ICDEXLK5",116,0)
 ;
"RTN","ICDEXLK5",117,0)
FND(ROOT,IEN,CDT,SYS,VER,LOR,OUT) ; Add Item to Found List
"RTN","ICDEXLK5",118,0)
 ;
"RTN","ICDEXLK5",119,0)
 ; Input
"RTN","ICDEXLK5",120,0)
 ; 
"RTN","ICDEXLK5",121,0)
 ;    ROOT   Global Root
"RTN","ICDEXLK5",122,0)
 ;    IEN    Internal Entry Number
"RTN","ICDEXLK5",123,0)
 ;    CDT    Date
"RTN","ICDEXLK5",124,0)
 ;    SYS    Coding System
"RTN","ICDEXLK5",125,0)
 ;    VER    Versioned Search
"RTN","ICDEXLK5",126,0)
 ;    LOR    List Order
"RTN","ICDEXLK5",127,0)
 ;             0  List by Text Length
"RTN","ICDEXLK5",128,0)
 ;             1  List by Code Number
"RTN","ICDEXLK5",129,0)
 ;    OUT    Output Format
"RTN","ICDEXLK5",130,0)
 ;             1  Fileman, code and short text
"RTN","ICDEXLK5",131,0)
 ;             2  Fileman, code and description
"RTN","ICDEXLK5",132,0)
 ;             3  Lexicon, short text and code
"RTN","ICDEXLK5",133,0)
 ;             4  Lexicon, description and code
"RTN","ICDEXLK5",134,0)
 ;
"RTN","ICDEXLK5",135,0)
 ; Output
"RTN","ICDEXLK5",136,0)
 ; 
"RTN","ICDEXLK5",137,0)
 ;    ^TMP(ID,$J,"FND")
"RTN","ICDEXLK5",138,0)
 ;    ^TMP(ID,$J,"FND",LEN,SEQ)=IEN ^ Display Text
"RTN","ICDEXLK5",139,0)
 ;    ^TMP(ID,$J,"FND","IEN",<ien>)=""
"RTN","ICDEXLK5",140,0)
 ;  
"RTN","ICDEXLK5",141,0)
 ;      where
"RTN","ICDEXLK5",142,0)
 ;      
"RTN","ICDEXLK5",143,0)
 ;         ID is a package namespaced subscript:
"RTN","ICDEXLK5",144,0)
 ;        
"RTN","ICDEXLK5",145,0)
 ;            ICD9 - for file #80 searches
"RTN","ICDEXLK5",146,0)
 ;            ICD0 - for file #80.1 searches
"RTN","ICDEXLK5",147,0)
 ;      
"RTN","ICDEXLK5",148,0)
 ;         LEN is a number assigned based string length
"RTN","ICDEXLK5",149,0)
 ;         SEQ is a unique sequence number for length
"RTN","ICDEXLK5",150,0)
 ;                
"RTN","ICDEXLK5",151,0)
 ;   Uses   DIC("S") to screen output
"RTN","ICDEXLK5",152,0)
 ; 
"RTN","ICDEXLK5",153,0)
 N CC,CODE,CTR,FILE,SEQ,SCREEN,SHORT,LONG,STATUS,STA,SUB,TEXT,TERM,TYP,NUM,Y
"RTN","ICDEXLK5",154,0)
 S SYS=+($G(SYS)),VER=+($G(VER)) S (Y,IEN)=+($G(IEN)) Q:+IEN'>0
"RTN","ICDEXLK5",155,0)
 S ROOT=$$ROOT^ICDEX($G(ROOT)),FILE=$$FILE^ICDEX(ROOT)
"RTN","ICDEXLK5",156,0)
 S SUB=$TR(ROOT,"^("),SCREEN=$$SCREEN Q:'SCREEN  Q:+FILE'>0
"RTN","ICDEXLK5",157,0)
 S CODE=$P($G(@(ROOT_+IEN_",0)")),"^",1) Q:'$L(CODE)
"RTN","ICDEXLK5",158,0)
 S:'$L($G(CDT)) CDT=$$DT^XLFDT S LOR=+($G(LOR))
"RTN","ICDEXLK5",159,0)
 S STA=1 I +VER>0 S STA=$$STATCHK^ICDEX(CODE,CDT,SYS) Q:+($G(STA))'>0
"RTN","ICDEXLK5",160,0)
 Q:'$L(SUB)  Q:$D(^TMP(SUB,$J,"FND","IEN",+IEN))
"RTN","ICDEXLK5",161,0)
 S TYP=$P($G(^ICDS(+SYS,0)),"^",1),TERM=""
"RTN","ICDEXLK5",162,0)
 S OUT=$G(OUT) S:+OUT'>0 OUT=1 S:+OUT>4 OUT=1
"RTN","ICDEXLK5",163,0)
 I +($G(OUT))=1!(+($G(OUT))=3) S TERM=$$SD^ICDEX(FILE,IEN,CDT)
"RTN","ICDEXLK5",164,0)
 I +($G(OUT))=2!(+($G(OUT))=4) D
"RTN","ICDEXLK5",165,0)
 . S TERM=$$LD^ICDEX(FILE,IEN,CDT) Q:$P(TERM,"^",1)=-1
"RTN","ICDEXLK5",166,0)
 . I +($G(OUT))=4,$L($T(MIX^LEXXM)) S TERM=$$MIX^LEXXM(TERM)
"RTN","ICDEXLK5",167,0)
 I VER'>0,($P(TERM,"^",1)=-1!('$L(TERM))) D
"RTN","ICDEXLK5",168,0)
 . N TDT S TDT=$O(@(ROOT_IEN_",67,""B"","_+($G(CDT))_")")) Q:$E(TDT,1,7)'?7N
"RTN","ICDEXLK5",169,0)
 . I +($G(OUT))=1!(+($G(OUT))=3) S TERM=$$SD^ICDEX(FILE,IEN,TDT)
"RTN","ICDEXLK5",170,0)
 . I +($G(OUT))=2!(+($G(OUT))=4) S TERM=$$LD^ICDEX(FILE,IEN,TDT)
"RTN","ICDEXLK5",171,0)
 . I +($G(OUT))=4,$P(TERM,"^",1)'=-1,$L($T(MIX^LEXXM)) S TERM=$$MIX^LEXXM(TERM)
"RTN","ICDEXLK5",172,0)
 . S:$P(TERM,"^",1)=-1 TERM="" Q:'$L(TERM)
"RTN","ICDEXLK5",173,0)
 . S:TDT?7N TERM=TERM_" ("_$$FMTE^XLFDT(TDT,"5ZM")_")"
"RTN","ICDEXLK5",174,0)
 S:$P(TERM,"^",1)=-1 TERM="" Q:'$L(TERM)  S NUM=$$NUM^ICDEX(CODE)
"RTN","ICDEXLK5",175,0)
 S CODE=CODE_$J(" ",(10-$L(CODE))) S CC=""
"RTN","ICDEXLK5",176,0)
 S:FILE=80 CC=$$VCC^ICDEX(IEN,CDT),CC=$$CC(+CC)
"RTN","ICDEXLK5",177,0)
 S STATUS=$O(@(ROOT_+IEN_",66,""B"","_(+CDT+.000001)_")"),-1)
"RTN","ICDEXLK5",178,0)
 S STATUS=$O(@(ROOT_+IEN_",66,""B"","_+STATUS_","" "")"),-1)
"RTN","ICDEXLK5",179,0)
 S STATUS=$P($G(@(ROOT_+IEN_",66,"_+STATUS_",0)")),"^",2)
"RTN","ICDEXLK5",180,0)
 S STATUS=$$ST(STATUS)
"RTN","ICDEXLK5",181,0)
 S:$G(OUT)'?1N OUT=$G(OUT) S:+OUT'>0 OUT=1 S:+OUT>4 OUT=4
"RTN","ICDEXLK5",182,0)
 I +($G(OUT))=1!(+($G(OUT))=2) D
"RTN","ICDEXLK5",183,0)
 . S:$G(DIC(0))'["S" TEXT=CODE_TERM_CC_STATUS
"RTN","ICDEXLK5",184,0)
 . S:$G(DIC(0))["S" TEXT=TERM_CC_STATUS
"RTN","ICDEXLK5",185,0)
 I +($G(OUT))=3!(+($G(OUT))=4) D
"RTN","ICDEXLK5",186,0)
 . S CODE=$$TM(CODE),TEXT=TERM_CC_STATUS
"RTN","ICDEXLK5",187,0)
 . Q:$G(DIC(0))["S"
"RTN","ICDEXLK5",188,0)
 . S:$L(TYP) TEXT=TEXT_" ("_TYP_" "_CODE_")"
"RTN","ICDEXLK5",189,0)
 . S:'$L(TYP) TEXT=TEXT_" ("_CODE_")"
"RTN","ICDEXLK5",190,0)
 S SEQ=246-$L(TERM) S:LOR>0 SEQ=NUM
"RTN","ICDEXLK5",191,0)
 S CTR=$O(^TMP(SUB,$J,"FND",+SEQ," "),-1)+1
"RTN","ICDEXLK5",192,0)
 S ^TMP(SUB,$J,"FND",+SEQ,CTR)=IEN_"^"_TEXT
"RTN","ICDEXLK5",193,0)
 S ^TMP(SUB,$J,"FND","IEN",+IEN)=""
"RTN","ICDEXLK5",194,0)
 Q
"RTN","ICDEXLK5",195,0)
SEL(ROOT,LOR) ; Add Items to Selection List
"RTN","ICDEXLK5",196,0)
 ;
"RTN","ICDEXLK5",197,0)
 ; Input   
"RTN","ICDEXLK5",198,0)
 ;   
"RTN","ICDEXLK5",199,0)
 ;   ROOT   Global Root/File # (Required)
"RTN","ICDEXLK5",200,0)
 ;   LOR    List Order
"RTN","ICDEXLK5",201,0)
 ;            0  List by Text Length
"RTN","ICDEXLK5",202,0)
 ;            1  List by Code Number
"RTN","ICDEXLK5",203,0)
 ;   
"RTN","ICDEXLK5",204,0)
 ; Output
"RTN","ICDEXLK5",205,0)
 ;   
"RTN","ICDEXLK5",206,0)
 ;    ^TMP(ID,$J,"SEL")
"RTN","ICDEXLK5",207,0)
 ;    ^TMP(ID,$J,"SEL",0)=# of entries
"RTN","ICDEXLK5",208,0)
 ;    ^TMP(ID,$J,"SEL",#)=IEN^Display Text
"RTN","ICDEXLK5",209,0)
 ;  
"RTN","ICDEXLK5",210,0)
 ;      where ID is a package namespaced subscript:
"RTN","ICDEXLK5",211,0)
 ;        
"RTN","ICDEXLK5",212,0)
 ;       ICD9 - for the Diagnosis file #80
"RTN","ICDEXLK5",213,0)
 ;       ICD0 - for the Operations/Procedure file #80.1
"RTN","ICDEXLK5",214,0)
 ;       
"RTN","ICDEXLK5",215,0)
 ; Uses    ^TMP(NAME,$J,"FND") (Optional)
"RTN","ICDEXLK5",216,0)
 ; Kills   ^TMP(NAME,$J,"FND")
"RTN","ICDEXLK5",217,0)
 ;   
"RTN","ICDEXLK5",218,0)
 N CTR,FILE,SEQ,SUB,TEXT S ROOT=$$ROOT^ICDEX($G(ROOT)),LOR=+($G(LOR))
"RTN","ICDEXLK5",219,0)
 S FILE=$$FILE^ICDEX(ROOT),SUB=$TR(ROOT,"^(") K ^TMP(SUB,$J,"SEL")
"RTN","ICDEXLK5",220,0)
 Q:+FILE'>0  Q:'$L(SUB)  K ^TMP(SUB,$J,"SEL")
"RTN","ICDEXLK5",221,0)
 I +($G(LOR))'>0 D
"RTN","ICDEXLK5",222,0)
 . S SEQ=" " F  S SEQ=$O(^TMP(SUB,$J,"FND",SEQ),-1) Q:+SEQ'>0  D SEL2
"RTN","ICDEXLK5",223,0)
 I +($G(LOR))>0 D
"RTN","ICDEXLK5",224,0)
 . S SEQ=0 F  S SEQ=$O(^TMP(SUB,$J,"FND",SEQ)) Q:+SEQ'>0  D SEL2
"RTN","ICDEXLK5",225,0)
 K ^TMP(SUB,$J,"FND")
"RTN","ICDEXLK5",226,0)
 Q
"RTN","ICDEXLK5",227,0)
SEL2 ;  Add Items to Selection List (part 2)
"RTN","ICDEXLK5",228,0)
 N ICDI S ICDI=0 F  S ICDI=$O(^TMP(SUB,$J,"FND",+SEQ,ICDI)) Q:+ICDI'>0  D
"RTN","ICDEXLK5",229,0)
 . N CTR,TEXT S TEXT=$G(^TMP(SUB,$J,"FND",+SEQ,ICDI))
"RTN","ICDEXLK5",230,0)
 . Q:'$L(TEXT)  Q:+TEXT'>0  Q:'$L($P(TEXT,"^",2))
"RTN","ICDEXLK5",231,0)
 . S CTR=$O(^TMP(SUB,$J,"SEL"," "),-1)+1
"RTN","ICDEXLK5",232,0)
 . S ^TMP(SUB,$J,"SEL",CTR)=TEXT,^TMP(SUB,$J,"SEL",0)=CTR
"RTN","ICDEXLK5",233,0)
 Q
"RTN","ICDEXLK5",234,0)
 ;
"RTN","ICDEXLK5",235,0)
 ; Miscellaneous
"RTN","ICDEXLK5",236,0)
SH ;   Display TMP
"RTN","ICDEXLK5",237,0)
 N SUB,NN,NC
"RTN","ICDEXLK5",238,0)
 S SUB="ICD9" S:'$D(^TMP(SUB)) SUB="ICD0" Q:'$D(^TMP(SUB))
"RTN","ICDEXLK5",239,0)
 S NN="^TMP("""_SUB_""","_$J_")",NC="^TMP("""_SUB_""","_$J_","
"RTN","ICDEXLK5",240,0)
 W:'$D(@NN) ! Q:'$D(@NN)  F  S NN=$Q(@NN) Q:'$L(NN)!(NN'[NC)  W !,NN,"=",@NN
"RTN","ICDEXLK5",241,0)
 W !
"RTN","ICDEXLK5",242,0)
 Q
"RTN","ICDEXLK5",243,0)
SCREEN(X) ;   Screen Entries - Boolean Truth Value
"RTN","ICDEXLK5",244,0)
 Q:+($G(Y))'>0 1   Q:'$L($G(ROOT)) 1  N ICDNR,ICDO,ICDS,ICDY
"RTN","ICDEXLK5",245,0)
 S ICDY=+($G(Y)),ROOT=$$ROOT^ICDEX($G(ROOT)) Q:'$L(ROOT) 1
"RTN","ICDEXLK5",246,0)
 S ICDS=$G(ICDDICS) Q:'$L(ICDS) 1  S Y=+($G(ICDY))
"RTN","ICDEXLK5",247,0)
 S ICDNR=$D(@(ROOT_+Y_",0)")) X ICDS S ICDO=$T
"RTN","ICDEXLK5",248,0)
 Q:'ICDO 0
"RTN","ICDEXLK5",249,0)
 Q 1
"RTN","ICDEXLK5",250,0)
ISORD(X) ;   Check if in $ORDER
"RTN","ICDEXLK5",251,0)
 Q:'$L($G(ORD)) 0  Q:'$L($G(KEY)) 0
"RTN","ICDEXLK5",252,0)
 Q:$E($G(ORD),1,$L($G(KEY)))=$G(KEY) 1
"RTN","ICDEXLK5",253,0)
 Q 0
"RTN","ICDEXLK5",254,0)
CC(X) ;   CC
"RTN","ICDEXLK5",255,0)
 Q:+($G(X))=1 " (CC)"
"RTN","ICDEXLK5",256,0)
 Q:+($G(X))=2 " (Major CC)"
"RTN","ICDEXLK5",257,0)
 Q ""
"RTN","ICDEXLK5",258,0)
ST(X) ;   Status indicators
"RTN","ICDEXLK5",259,0)
 Q:$G(X)?1N&(+$G(X)'>0) " (Inactive)"
"RTN","ICDEXLK5",260,0)
 Q:$G(X)'?1N&(+$G(X)'>0) " (Pending)"
"RTN","ICDEXLK5",261,0)
 Q ""
"RTN","ICDEXLK5",262,0)
TM(X,Y) ;   Trim Y
"RTN","ICDEXLK5",263,0)
 S Y=$G(Y) S:'$L(Y) Y=" "
"RTN","ICDEXLK5",264,0)
 F  Q:$E(X,1)'=Y  S X=$E(X,2,$L(X))
"RTN","ICDEXLK5",265,0)
 F  Q:$E(X,$L(X))'=Y  S X=$E(X,1,($L(X)-1))
"RTN","ICDEXLK5",266,0)
 Q X
"VER")
8.0^22.0
"BLD",9917,6)
^77
**END**
**END**

