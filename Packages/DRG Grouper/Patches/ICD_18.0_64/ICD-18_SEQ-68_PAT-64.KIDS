Released ICD*18*64 SEQ #68
Extracted from mail message
**KIDS**:ICD*18.0*64^

**INSTALL NAME**
ICD*18.0*64
"BLD",8969,0)
ICD*18.0*64^DRG GROUPER^0^3140506^y
"BLD",8969,4,0)
^9.64PA^82.13^6
"BLD",8969,4,80.2,0)
80.2
"BLD",8969,4,80.2,2,0)
^9.641^80.271^1
"BLD",8969,4,80.2,2,80.271,0)
DRG GROUPER EFFECTIVE DATE  (sub-file)
"BLD",8969,4,80.2,2,80.271,1,0)
^9.6411^2^1
"BLD",8969,4,80.2,2,80.271,1,2,0)
COMPLICATION/COMORBIDITY FLAG
"BLD",8969,4,80.2,222)
y^y^p^^^^n^^n
"BLD",8969,4,80.2,224)

"BLD",8969,4,80.5,0)
80.5
"BLD",8969,4,80.5,222)
y^y^f^^^^n
"BLD",8969,4,80.6,0)
80.6
"BLD",8969,4,80.6,222)
y^y^f^^^^n
"BLD",8969,4,82.11,0)
82.11
"BLD",8969,4,82.11,222)
y^y^f^^^^n
"BLD",8969,4,82.12,0)
82.12
"BLD",8969,4,82.12,222)
y^y^f^^^^n
"BLD",8969,4,82.13,0)
82.13
"BLD",8969,4,82.13,222)
y^y^f^^^^n
"BLD",8969,4,"APDD",80.2,80.271)

"BLD",8969,4,"APDD",80.2,80.271,2)

"BLD",8969,4,"B",80.2,80.2)

"BLD",8969,4,"B",80.5,80.5)

"BLD",8969,4,"B",80.6,80.6)

"BLD",8969,4,"B",82.11,82.11)

"BLD",8969,4,"B",82.12,82.12)

"BLD",8969,4,"B",82.13,82.13)

"BLD",8969,6)
13^
"BLD",8969,6.3)
103
"BLD",8969,"ABPKG")
n
"BLD",8969,"INI")
PRE^ICD1864A
"BLD",8969,"INIT")
POST^ICD1864A
"BLD",8969,"KRN",0)
^9.67PA^779.2^20
"BLD",8969,"KRN",.4,0)
.4
"BLD",8969,"KRN",.401,0)
.401
"BLD",8969,"KRN",.402,0)
.402
"BLD",8969,"KRN",.403,0)
.403
"BLD",8969,"KRN",.5,0)
.5
"BLD",8969,"KRN",.84,0)
.84
"BLD",8969,"KRN",3.6,0)
3.6
"BLD",8969,"KRN",3.8,0)
3.8
"BLD",8969,"KRN",9.2,0)
9.2
"BLD",8969,"KRN",9.2,"NM",0)
^9.68A^^
"BLD",8969,"KRN",9.8,0)
9.8
"BLD",8969,"KRN",9.8,"NM",0)
^9.68A^87^48
"BLD",8969,"KRN",9.8,"NM",1,0)
ICDDRG^^0^B61462104
"BLD",8969,"KRN",9.8,"NM",3,0)
ICDDG010^^0^B87527545
"BLD",8969,"KRN",9.8,"NM",6,0)
ICDRGAPI^^0^B53995245
"BLD",8969,"KRN",9.8,"NM",7,0)
ICD10TB0^^0^B7031640
"BLD",8969,"KRN",9.8,"NM",8,0)
ICD10TB1^^0^B9911744
"BLD",8969,"KRN",9.8,"NM",9,0)
ICD10TB2^^0^B18222140
"BLD",8969,"KRN",9.8,"NM",10,0)
ICD10TB3^^0^B6789079
"BLD",8969,"KRN",9.8,"NM",11,0)
ICD10TB4^^0^B9167308
"BLD",8969,"KRN",9.8,"NM",12,0)
ICD10TB5^^0^B7411864
"BLD",8969,"KRN",9.8,"NM",13,0)
ICD10TB6^^0^B7217970
"BLD",8969,"KRN",9.8,"NM",14,0)
ICD10TB7^^0^B3864507
"BLD",8969,"KRN",9.8,"NM",15,0)
ICD10TB8^^0^B7326303
"BLD",8969,"KRN",9.8,"NM",16,0)
ICD10TB9^^0^B3049940
"BLD",8969,"KRN",9.8,"NM",17,0)
ICDCOD^^0^B7196903
"BLD",8969,"KRN",9.8,"NM",18,0)
ICDDSLK^^0^B118601308
"BLD",8969,"KRN",9.8,"NM",19,0)
ICDCODLK^^0^B33886229
"BLD",8969,"KRN",9.8,"NM",20,0)
ICDGTDRG^^0^B3882310
"BLD",8969,"KRN",9.8,"NM",21,0)
ICDDRG5^^0^B35156082
"BLD",8969,"KRN",9.8,"NM",23,0)
ICDREF^^0^B572987
"BLD",8969,"KRN",9.8,"NM",24,0)
ICDTLB4A^^0^B18195336
"BLD",8969,"KRN",9.8,"NM",25,0)
ICDTLB4B^^0^B18194277
"BLD",8969,"KRN",9.8,"NM",26,0)
ICDTLB6^^0^B36196041
"BLD",8969,"KRN",9.8,"NM",27,0)
ICDTLB61^^0^B1300182
"BLD",8969,"KRN",9.8,"NM",28,0)
ICDTLB6A^^0^B37224357
"BLD",8969,"KRN",9.8,"NM",29,0)
ICDTLB6B^^0^B51960750
"BLD",8969,"KRN",9.8,"NM",30,0)
ICDTLB6C^^0^B58914547
"BLD",8969,"KRN",9.8,"NM",32,0)
ICDTBL8A^^0^B25027347
"BLD",8969,"KRN",9.8,"NM",33,0)
ICDTBL8B^^0^B25669193
"BLD",8969,"KRN",9.8,"NM",34,0)
ICDTBL8C^^0^B25174597
"BLD",8969,"KRN",9.8,"NM",35,0)
ICDTBL8D^^0^B25677376
"BLD",8969,"KRN",9.8,"NM",36,0)
ICDTBL9B^^0^B4890646
"BLD",8969,"KRN",9.8,"NM",37,0)
ICDTBL9C^^0^B4895199
"BLD",8969,"KRN",9.8,"NM",38,0)
ICDTBL9D^^0^B5269928
"BLD",8969,"KRN",9.8,"NM",61,0)
ICDDRGX^^0^B28133843
"BLD",8969,"KRN",9.8,"NM",62,0)
ICDDRGX1^^0^B12298991
"BLD",8969,"KRN",9.8,"NM",63,0)
ICDDRGX2^^0^B156836573
"BLD",8969,"KRN",9.8,"NM",64,0)
ICDDRGXM^^0^B11815979
"BLD",8969,"KRN",9.8,"NM",73,0)
ICDDRGX3^^0^B25217688
"BLD",8969,"KRN",9.8,"NM",74,0)
ICDSELDS^^0^B42651368
"BLD",8969,"KRN",9.8,"NM",75,0)
ICDSELPS^^0^B30531047
"BLD",8969,"KRN",9.8,"NM",76,0)
ICDDRGM^^0^B190593495
"BLD",8969,"KRN",9.8,"NM",81,0)
ICDTBL2C^^0^B51015005
"BLD",8969,"KRN",9.8,"NM",82,0)
ICDTBL2D^^0^B49902612
"BLD",8969,"KRN",9.8,"NM",83,0)
ICDTBL2E^^0^B49902881
"BLD",8969,"KRN",9.8,"NM",84,0)
ICDTBL8E^^0^B25715742
"BLD",8969,"KRN",9.8,"NM",85,0)
ICDTBL9E^^0^B5179109
"BLD",8969,"KRN",9.8,"NM",86,0)
ICD1864A^^0^B168364316
"BLD",8969,"KRN",9.8,"NM",87,0)
ICD1864B^^0^B65361906
"BLD",8969,"KRN",9.8,"NM","B","ICD10TB0",7)

"BLD",8969,"KRN",9.8,"NM","B","ICD10TB1",8)

"BLD",8969,"KRN",9.8,"NM","B","ICD10TB2",9)

"BLD",8969,"KRN",9.8,"NM","B","ICD10TB3",10)

"BLD",8969,"KRN",9.8,"NM","B","ICD10TB4",11)

"BLD",8969,"KRN",9.8,"NM","B","ICD10TB5",12)

"BLD",8969,"KRN",9.8,"NM","B","ICD10TB6",13)

"BLD",8969,"KRN",9.8,"NM","B","ICD10TB7",14)

"BLD",8969,"KRN",9.8,"NM","B","ICD10TB8",15)

"BLD",8969,"KRN",9.8,"NM","B","ICD10TB9",16)

"BLD",8969,"KRN",9.8,"NM","B","ICD1864A",86)

"BLD",8969,"KRN",9.8,"NM","B","ICD1864B",87)

"BLD",8969,"KRN",9.8,"NM","B","ICDCOD",17)

"BLD",8969,"KRN",9.8,"NM","B","ICDCODLK",19)

"BLD",8969,"KRN",9.8,"NM","B","ICDDG010",3)

"BLD",8969,"KRN",9.8,"NM","B","ICDDRG",1)

"BLD",8969,"KRN",9.8,"NM","B","ICDDRG5",21)

"BLD",8969,"KRN",9.8,"NM","B","ICDDRGM",76)

"BLD",8969,"KRN",9.8,"NM","B","ICDDRGX",61)

"BLD",8969,"KRN",9.8,"NM","B","ICDDRGX1",62)

"BLD",8969,"KRN",9.8,"NM","B","ICDDRGX2",63)

"BLD",8969,"KRN",9.8,"NM","B","ICDDRGX3",73)

"BLD",8969,"KRN",9.8,"NM","B","ICDDRGXM",64)

"BLD",8969,"KRN",9.8,"NM","B","ICDDSLK",18)

"BLD",8969,"KRN",9.8,"NM","B","ICDGTDRG",20)

"BLD",8969,"KRN",9.8,"NM","B","ICDREF",23)

"BLD",8969,"KRN",9.8,"NM","B","ICDRGAPI",6)

"BLD",8969,"KRN",9.8,"NM","B","ICDSELDS",74)

"BLD",8969,"KRN",9.8,"NM","B","ICDSELPS",75)

"BLD",8969,"KRN",9.8,"NM","B","ICDTBL2C",81)

"BLD",8969,"KRN",9.8,"NM","B","ICDTBL2D",82)

"BLD",8969,"KRN",9.8,"NM","B","ICDTBL2E",83)

"BLD",8969,"KRN",9.8,"NM","B","ICDTBL8A",32)

"BLD",8969,"KRN",9.8,"NM","B","ICDTBL8B",33)

"BLD",8969,"KRN",9.8,"NM","B","ICDTBL8C",34)

"BLD",8969,"KRN",9.8,"NM","B","ICDTBL8D",35)

"BLD",8969,"KRN",9.8,"NM","B","ICDTBL8E",84)

"BLD",8969,"KRN",9.8,"NM","B","ICDTBL9B",36)

"BLD",8969,"KRN",9.8,"NM","B","ICDTBL9C",37)

"BLD",8969,"KRN",9.8,"NM","B","ICDTBL9D",38)

"BLD",8969,"KRN",9.8,"NM","B","ICDTBL9E",85)

"BLD",8969,"KRN",9.8,"NM","B","ICDTLB4A",24)

"BLD",8969,"KRN",9.8,"NM","B","ICDTLB4B",25)

"BLD",8969,"KRN",9.8,"NM","B","ICDTLB6",26)

"BLD",8969,"KRN",9.8,"NM","B","ICDTLB61",27)

"BLD",8969,"KRN",9.8,"NM","B","ICDTLB6A",28)

"BLD",8969,"KRN",9.8,"NM","B","ICDTLB6B",29)

"BLD",8969,"KRN",9.8,"NM","B","ICDTLB6C",30)

"BLD",8969,"KRN",19,0)
19
"BLD",8969,"KRN",19,"NM",0)
^9.68A^^
"BLD",8969,"KRN",19.1,0)
19.1
"BLD",8969,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",8969,"KRN",101,0)
101
"BLD",8969,"KRN",409.61,0)
409.61
"BLD",8969,"KRN",771,0)
771
"BLD",8969,"KRN",779.2,0)
779.2
"BLD",8969,"KRN",870,0)
870
"BLD",8969,"KRN",8989.51,0)
8989.51
"BLD",8969,"KRN",8989.52,0)
8989.52
"BLD",8969,"KRN",8994,0)
8994
"BLD",8969,"KRN","B",.4,.4)

"BLD",8969,"KRN","B",.401,.401)

"BLD",8969,"KRN","B",.402,.402)

"BLD",8969,"KRN","B",.403,.403)

"BLD",8969,"KRN","B",.5,.5)

"BLD",8969,"KRN","B",.84,.84)

"BLD",8969,"KRN","B",3.6,3.6)

"BLD",8969,"KRN","B",3.8,3.8)

"BLD",8969,"KRN","B",9.2,9.2)

"BLD",8969,"KRN","B",9.8,9.8)

"BLD",8969,"KRN","B",19,19)

"BLD",8969,"KRN","B",19.1,19.1)

"BLD",8969,"KRN","B",101,101)

"BLD",8969,"KRN","B",409.61,409.61)

"BLD",8969,"KRN","B",771,771)

"BLD",8969,"KRN","B",779.2,779.2)

"BLD",8969,"KRN","B",870,870)

"BLD",8969,"KRN","B",8989.51,8989.51)

"BLD",8969,"KRN","B",8989.52,8989.52)

"BLD",8969,"KRN","B",8994,8994)

"BLD",8969,"QDEF")
^^^^^^^^^^YES
"BLD",8969,"QUES",0)
^9.62^3^2
"BLD",8969,"QUES",1,0)
POS1
"BLD",8969,"QUES",1,1)
YA^
"BLD",8969,"QUES",1,"A")
Have you made a copy of file 80 (^ICD9), file 80.1 (^ICD0) and file 80.2 (^ICD)? 
"BLD",8969,"QUES",1,"B")
No
"BLD",8969,"QUES",1,"Q")
If you are NOT going to include the DRG Data Load answer No.
"BLD",8969,"QUES",3,0)
POS3
"BLD",8969,"QUES",3,1)
YA^
"BLD",8969,"QUES",3,"A")
Do you want to continue? 
"BLD",8969,"QUES",3,"B")
No
"BLD",8969,"QUES",3,"Q")
Answer Yes to continue with the install.
"BLD",8969,"QUES","B","POS1",1)

"BLD",8969,"QUES","B","POS3",3)

"BLD",8969,"REQB",0)
^9.611^8^4
"BLD",8969,"REQB",1,0)
ICD*18.0*57^1
"BLD",8969,"REQB",6,0)
LEX*2.0*80^1
"BLD",8969,"REQB",7,0)
ICD*18.0*65^1
"BLD",8969,"REQB",8,0)
ICD*18.0*72^1
"BLD",8969,"REQB","B","ICD*18.0*57",1)

"BLD",8969,"REQB","B","ICD*18.0*65",7)

"BLD",8969,"REQB","B","ICD*18.0*72",8)

"BLD",8969,"REQB","B","LEX*2.0*80",6)

"FIA",80.2)
DRG
"FIA",80.2,0)
^ICD(
"FIA",80.2,0,0)
80.2I
"FIA",80.2,0,1)
y^y^p^^^^n^^n
"FIA",80.2,0,10)

"FIA",80.2,0,11)

"FIA",80.2,0,"RLRO")

"FIA",80.2,0,"VR")
18.0^ICD
"FIA",80.2,80.2)
1
"FIA",80.2,80.271)
1
"FIA",80.2,80.271,2)

"FIA",80.5)
DRG SURGICAL HIERARCHY
"FIA",80.5,0)
^ICDRS(
"FIA",80.5,0,0)
80.5D
"FIA",80.5,0,1)
y^y^f^^^^n
"FIA",80.5,0,10)

"FIA",80.5,0,11)

"FIA",80.5,0,"RLRO")

"FIA",80.5,0,"VR")
18.0^ICD
"FIA",80.5,80.5)
0
"FIA",80.5,80.51)
0
"FIA",80.5,80.511)
0
"FIA",80.6)
DRG HAC
"FIA",80.6,0)
^ICDHAC(
"FIA",80.6,0,0)
80.6
"FIA",80.6,0,1)
y^y^f^^^^n
"FIA",80.6,0,10)

"FIA",80.6,0,11)

"FIA",80.6,0,"RLRO")

"FIA",80.6,0,"VR")
18.0^ICD
"FIA",80.6,80.6)
0
"FIA",80.6,80.62)
0
"FIA",80.6,80.63)
0
"FIA",82.11)
DRG PROCEDURE CODE COMBINATIONS
"FIA",82.11,0)
^ICDIDP(
"FIA",82.11,0,0)
82.11P
"FIA",82.11,0,1)
y^y^f^^^^n
"FIA",82.11,0,10)

"FIA",82.11,0,11)

"FIA",82.11,0,"RLRO")

"FIA",82.11,0,"VR")
18.0^ICD
"FIA",82.11,82.11)
0
"FIA",82.11,82.111)
0
"FIA",82.11,82.1111)
0
"FIA",82.11,82.1112)
0
"FIA",82.11,82.1113)
0
"FIA",82.11,82.1114)
0
"FIA",82.11,82.1115)
0
"FIA",82.11,82.1116)
0
"FIA",82.11,82.11161)
0
"FIA",82.12)
DRG DIAGNOSIS CODE COMBINATIONS
"FIA",82.12,0)
^ICDIDD(
"FIA",82.12,0,0)
82.12P
"FIA",82.12,0,1)
y^y^f^^^^n
"FIA",82.12,0,10)

"FIA",82.12,0,11)

"FIA",82.12,0,"RLRO")

"FIA",82.12,0,"VR")
18.0^ICD
"FIA",82.12,82.12)
0
"FIA",82.12,82.121)
0
"FIA",82.12,82.1211)
0
"FIA",82.12,82.1212)
0
"FIA",82.12,82.1213)
0
"FIA",82.12,82.1214)
0
"FIA",82.12,82.1215)
0
"FIA",82.12,82.1216)
0
"FIA",82.12,82.12161)
0
"FIA",82.13)
DRG CC EXCLUSIONS
"FIA",82.13,0)
^ICDCCEX(
"FIA",82.13,0,0)
82.13
"FIA",82.13,0,1)
y^y^f^^^^n
"FIA",82.13,0,10)

"FIA",82.13,0,11)

"FIA",82.13,0,"RLRO")

"FIA",82.13,0,"VR")
18.0^ICD
"FIA",82.13,82.13)
0
"FIA",82.13,82.131)
0
"INI")
PRE^ICD1864A
"INIT")
POST^ICD1864A
"IX",82.11,82.11,"ONE",0)
82.11^ONE^CROSS REFERENCE ON "ONE OF" FIELD^R^^F^IR^W^82.1111^^^^^LS
"IX",82.11,82.11,"ONE",1)
S ^ICDIDP("ONE",X,DA(2),DA(1),DA)=""
"IX",82.11,82.11,"ONE",2)
K ^ICDIDP("ONE",X,DA(2),DA(1),DA)
"IX",82.11,82.11,"ONE",2.5)
K ^ICDIDP("ONE")
"IX",82.11,82.11,"ONE",11.1,0)
^.114IA^1^1
"IX",82.11,82.11,"ONE",11.1,1,0)
1^F^82.1111^.01^^1^F
"IX",82.11,82.11,"ONE",11.1,1,3)

"MBREQ")
0
"PKG",8,-1)
1^1
"PKG",8,0)
DRG GROUPER^ICD^DRG GROUPER
"PKG",8,20,0)
^9.402P^^
"PKG",8,22,0)
^9.49I^1^1
"PKG",8,22,1,0)
18.0^3001024^3001122^66481
"PKG",8,22,1,"PAH",1,0)
64^3140506^12443
"QUES","POS1",0)
YA^
"QUES","POS1","?")
If you are NOT going to include the DRG Data Load answer No.
"QUES","POS1","A")
Have you made a copy of file 80 (^ICD9), file 80.1 (^ICD0) and file 80.2 (^ICD)? 
"QUES","POS1","B")
No
"QUES","POS3",0)
YA^
"QUES","POS3","?")
Answer Yes to continue with the install.
"QUES","POS3","A")
Do you want to continue? 
"QUES","POS3","B")
No
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
48
"RTN","ICD10TB0")
0^7^B7031640^n/a
"RTN","ICD10TB0",1,0)
ICD10TB0 ;KUM - GROUPER UTILITY FUNCTIONS;05/04/2012
"RTN","ICD10TB0",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICD10TB0",3,0)
 ;
"RTN","ICD10TB0",4,0)
DRG1 ;
"RTN","ICD10TB0",5,0)
DRG2 ;
"RTN","ICD10TB0",6,0)
 S ICDRG=$S(ICDMCC=2:1,1:2) Q
"RTN","ICD10TB0",7,0)
DRG3 ; 
"RTN","ICD10TB0",8,0)
DRG4 ;
"RTN","ICD10TB0",9,0)
 Q
"RTN","ICD10TB0",10,0)
DRG5 ;
"RTN","ICD10TB0",11,0)
DRG6 ;
"RTN","ICD10TB0",12,0)
 I $D(ICD10OR(56)) S ICDRG=5 Q
"RTN","ICD10TB0",13,0)
 S ICDRG=$S(ICDMCC=2:5,1:6) Q
"RTN","ICD10TB0",14,0)
 Q
"RTN","ICD10TB0",15,0)
DRG7 ;
"RTN","ICD10TB0",16,0)
 S ICDRG=7 Q
"RTN","ICD10TB0",17,0)
DRG8 ;
"RTN","ICD10TB0",18,0)
 S ICDRG=8 Q
"RTN","ICD10TB0",19,0)
DRG9 ;
"RTN","ICD10TB0",20,0)
 S ICDRG=9 Q
"RTN","ICD10TB0",21,0)
DRG10 ;
"RTN","ICD10TB0",22,0)
 S ICDRG=10 Q
"RTN","ICD10TB0",23,0)
 Q
"RTN","ICD10TB0",24,0)
DRG11 ;
"RTN","ICD10TB0",25,0)
DRG12 ;
"RTN","ICD10TB0",26,0)
DRG13 ;
"RTN","ICD10TB0",27,0)
 S ICDRG=$S(ICDMCC=2:11,ICDMCC=1:12,1:13) Q
"RTN","ICD10TB0",28,0)
DRG14 ;
"RTN","ICD10TB0",29,0)
 S ICDRG=14 ;No decision table for DRG 14 or 15
"RTN","ICD10TB0",30,0)
 Q
"RTN","ICD10TB0",31,0)
DRG15 ;
"RTN","ICD10TB0",32,0)
 S ICDRG=15
"RTN","ICD10TB0",33,0)
 Q
"RTN","ICD10TB0",34,0)
DRG16 ;
"RTN","ICD10TB0",35,0)
DRG17 ;
"RTN","ICD10TB0",36,0)
 S ICDRG=$S(ICDMCC:16,1:17) ;No decision table for DRG 16 or 17
"RTN","ICD10TB0",37,0)
 Q
"RTN","ICD10TB0",38,0)
DRG18 ;
"RTN","ICD10TB0",39,0)
 Q
"RTN","ICD10TB0",40,0)
DRG19 ;
"RTN","ICD10TB0",41,0)
 Q
"RTN","ICD10TB0",42,0)
DRG20 ;
"RTN","ICD10TB0",43,0)
DRG21 ;
"RTN","ICD10TB0",44,0)
DRG22 ;
"RTN","ICD10TB0",45,0)
 Q
"RTN","ICD10TB0",46,0)
DRG23 ;
"RTN","ICD10TB0",47,0)
DRG24 ;
"RTN","ICD10TB0",48,0)
DRG25 ;
"RTN","ICD10TB0",49,0)
DRG26 ;
"RTN","ICD10TB0",50,0)
DRG27 ;
"RTN","ICD10TB0",51,0)
 Q
"RTN","ICD10TB0",52,0)
DRG28 ;
"RTN","ICD10TB0",53,0)
DRG29 ;
"RTN","ICD10TB0",54,0)
DRG30 ;
"RTN","ICD10TB0",55,0)
 Q
"RTN","ICD10TB0",56,0)
DRG31 ;
"RTN","ICD10TB0",57,0)
DRG32 ;
"RTN","ICD10TB0",58,0)
DRG33 ;
"RTN","ICD10TB0",59,0)
  Q
"RTN","ICD10TB0",60,0)
DRG34 ;
"RTN","ICD10TB0",61,0)
DRG35 ;
"RTN","ICD10TB0",62,0)
DRG36 ;
"RTN","ICD10TB0",63,0)
 Q
"RTN","ICD10TB0",64,0)
DRG37 ;
"RTN","ICD10TB0",65,0)
DRG38 ;
"RTN","ICD10TB0",66,0)
DRG39 ;
"RTN","ICD10TB0",67,0)
 S ICDRG=$S(ICDMCC=2:37,ICDMCC=1:38,1:39) Q
"RTN","ICD10TB0",68,0)
DRG40 ;
"RTN","ICD10TB0",69,0)
DRG41 ;
"RTN","ICD10TB0",70,0)
DRG42 ;
"RTN","ICD10TB0",71,0)
 Q
"RTN","ICD10TB0",72,0)
DRG43 ;
"RTN","ICD10TB0",73,0)
DRG44 ;
"RTN","ICD10TB0",74,0)
DRG45 ;
"RTN","ICD10TB0",75,0)
DRG46 ;
"RTN","ICD10TB0",76,0)
 S ICDRG=46 Q
"RTN","ICD10TB0",77,0)
DRG47 ;
"RTN","ICD10TB0",78,0)
DRG48 ;
"RTN","ICD10TB0",79,0)
DRG49 ;
"RTN","ICD10TB0",80,0)
DRG50 ;
"RTN","ICD10TB0",81,0)
DRG51 ;
"RTN","ICD10TB0",82,0)
 Q
"RTN","ICD10TB0",83,0)
DRG52 ;
"RTN","ICD10TB0",84,0)
DRG53 ;
"RTN","ICD10TB0",85,0)
 S ICDRG=$S(ICDMCC>0:52,1:53) Q
"RTN","ICD10TB0",86,0)
DRG54 ;
"RTN","ICD10TB0",87,0)
DRG55 ;
"RTN","ICD10TB0",88,0)
 S ICDRG=$S(ICDMCC=2:54,1:55) Q
"RTN","ICD10TB0",89,0)
DRG56 ;
"RTN","ICD10TB0",90,0)
DRG57 ;
"RTN","ICD10TB0",91,0)
 S ICDRG=$S(ICDMCC=2:56,1:57) Q
"RTN","ICD10TB0",92,0)
DRG58 ;
"RTN","ICD10TB0",93,0)
DRG59 ;
"RTN","ICD10TB0",94,0)
DRG60 ;
"RTN","ICD10TB0",95,0)
 S ICDRG=$S(ICDMCC=2:58,ICDMCC=1:59,1:60) Q
"RTN","ICD10TB0",96,0)
DRG61 ;
"RTN","ICD10TB0",97,0)
DRG62 ;
"RTN","ICD10TB0",98,0)
DRG63 ;
"RTN","ICD10TB0",99,0)
 Q
"RTN","ICD10TB0",100,0)
DRG64 ;
"RTN","ICD10TB0",101,0)
DRG65 ;
"RTN","ICD10TB0",102,0)
DRG66 ;
"RTN","ICD10TB0",103,0)
 Q
"RTN","ICD10TB0",104,0)
DRG67 ;
"RTN","ICD10TB0",105,0)
DRG68 ;
"RTN","ICD10TB0",106,0)
 S ICDRG=$S(ICDMCC=2:67,1:68) Q
"RTN","ICD10TB0",107,0)
DRG69 ;
"RTN","ICD10TB0",108,0)
 Q
"RTN","ICD10TB0",109,0)
DRG70 ;
"RTN","ICD10TB0",110,0)
DRG71 ;
"RTN","ICD10TB0",111,0)
DRG72 ;
"RTN","ICD10TB0",112,0)
 S ICDRG=$S(ICDMCC=2:70,ICDMCC=1:71,1:72) Q
"RTN","ICD10TB0",113,0)
DRG73 ;
"RTN","ICD10TB0",114,0)
DRG74 ;
"RTN","ICD10TB0",115,0)
 S ICDRG=$S(ICDMCC=2:73,1:74) Q
"RTN","ICD10TB0",116,0)
DRG75 ;
"RTN","ICD10TB0",117,0)
DRG76 ;
"RTN","ICD10TB0",118,0)
 S ICDRG=$S(ICDMCC>0:75,1:76) Q
"RTN","ICD10TB0",119,0)
DRG77 ;
"RTN","ICD10TB0",120,0)
DRG78 ;
"RTN","ICD10TB0",121,0)
DRG79 ;
"RTN","ICD10TB0",122,0)
 S ICDRG=$S(ICDMCC=2:77,ICDMCC=1:78,1:79) Q
"RTN","ICD10TB0",123,0)
DRG80 ;
"RTN","ICD10TB0",124,0)
DRG81 ;
"RTN","ICD10TB0",125,0)
 S ICDRG=$S(ICDMCC=2:80,1:81) Q
"RTN","ICD10TB0",126,0)
DRG82 ;
"RTN","ICD10TB0",127,0)
DRG83 ;
"RTN","ICD10TB0",128,0)
DRG84 ;
"RTN","ICD10TB0",129,0)
 Q
"RTN","ICD10TB0",130,0)
DRG85 ;
"RTN","ICD10TB0",131,0)
DRG86 ;
"RTN","ICD10TB0",132,0)
DRG87 ;
"RTN","ICD10TB0",133,0)
 Q
"RTN","ICD10TB0",134,0)
DRG88 ;
"RTN","ICD10TB0",135,0)
DRG89 ;
"RTN","ICD10TB0",136,0)
DRG90 ;
"RTN","ICD10TB0",137,0)
 Q
"RTN","ICD10TB0",138,0)
DRG91 ;
"RTN","ICD10TB0",139,0)
DRG92 ;
"RTN","ICD10TB0",140,0)
DRG93 ;
"RTN","ICD10TB0",141,0)
 Q
"RTN","ICD10TB0",142,0)
DRG94 ;
"RTN","ICD10TB0",143,0)
DRG95 ;
"RTN","ICD10TB0",144,0)
DRG96 ;
"RTN","ICD10TB0",145,0)
 Q
"RTN","ICD10TB0",146,0)
DRG97 ;
"RTN","ICD10TB0",147,0)
DRG98 ;
"RTN","ICD10TB0",148,0)
DRG99 ;
"RTN","ICD10TB0",149,0)
 S ICDRG=$S(ICDMCC=2:97,ICDMCC=1:98,1:99) Q
"RTN","ICD10TB0",150,0)
 Q
"RTN","ICD10TB1")
0^8^B9911744^n/a
"RTN","ICD10TB1",1,0)
ICD10TB1 ;KUM - GROUPER UTILITY FUNCTIONS;05/04/2012
"RTN","ICD10TB1",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICD10TB1",3,0)
 ;
"RTN","ICD10TB1",4,0)
DRG100 ;
"RTN","ICD10TB1",5,0)
DRG101 ;
"RTN","ICD10TB1",6,0)
 S ICDRG=$S(ICDMCC=2:100,1:101) Q 
"RTN","ICD10TB1",7,0)
DRG102 ;
"RTN","ICD10TB1",8,0)
DRG103 ;
"RTN","ICD10TB1",9,0)
 S ICDRG=$S(ICDMCC=2:102,1:103) Q
"RTN","ICD10TB1",10,0)
DRG104 ;
"RTN","ICD10TB1",11,0)
 Q
"RTN","ICD10TB1",12,0)
DRG105 ;
"RTN","ICD10TB1",13,0)
 Q
"RTN","ICD10TB1",14,0)
DRG106 ;
"RTN","ICD10TB1",15,0)
 Q
"RTN","ICD10TB1",16,0)
DRG107 ;
"RTN","ICD10TB1",17,0)
 Q
"RTN","ICD10TB1",18,0)
DRG108 ;
"RTN","ICD10TB1",19,0)
 Q
"RTN","ICD10TB1",20,0)
DRG109 ;
"RTN","ICD10TB1",21,0)
 Q
"RTN","ICD10TB1",22,0)
DRG110 ;
"RTN","ICD10TB1",23,0)
 Q
"RTN","ICD10TB1",24,0)
DRG111 ;
"RTN","ICD10TB1",25,0)
 Q
"RTN","ICD10TB1",26,0)
DRG112 ;
"RTN","ICD10TB1",27,0)
 Q
"RTN","ICD10TB1",28,0)
DRG113 ;
"RTN","ICD10TB1",29,0)
DRG114 ;
"RTN","ICD10TB1",30,0)
 S ICDRG=$S(ICDMCC>0:113,1:114) Q
"RTN","ICD10TB1",31,0)
DRG115 ;
"RTN","ICD10TB1",32,0)
 Q
"RTN","ICD10TB1",33,0)
DRG116 ;
"RTN","ICD10TB1",34,0)
DRG117 ;
"RTN","ICD10TB1",35,0)
 S ICDRG=$S(ICDMCC>0:116,1:117) Q
"RTN","ICD10TB1",36,0)
DRG118 ;
"RTN","ICD10TB1",37,0)
 Q
"RTN","ICD10TB1",38,0)
DRG119 ;
"RTN","ICD10TB1",39,0)
 Q
"RTN","ICD10TB1",40,0)
DRG120 ;
"RTN","ICD10TB1",41,0)
 Q
"RTN","ICD10TB1",42,0)
DRG121 ;
"RTN","ICD10TB1",43,0)
DRG122 ;
"RTN","ICD10TB1",44,0)
 S ICDRG=$S(ICDMCC>0:121,1:122) Q
"RTN","ICD10TB1",45,0)
DRG123 ;
"RTN","ICD10TB1",46,0)
 Q
"RTN","ICD10TB1",47,0)
DRG124 ;
"RTN","ICD10TB1",48,0)
DRG125 ;
"RTN","ICD10TB1",49,0)
 S ICDRG=$S(ICDMCC=2:124,1:125) Q
"RTN","ICD10TB1",50,0)
DRG129 ;
"RTN","ICD10TB1",51,0)
DRG130 ;
"RTN","ICD10TB1",52,0)
 Q
"RTN","ICD10TB1",53,0)
DRG131 ;
"RTN","ICD10TB1",54,0)
DRG132 ;
"RTN","ICD10TB1",55,0)
 S ICDRG=$S(ICDMCC>0:131,1:132) Q
"RTN","ICD10TB1",56,0)
DRG133 ;
"RTN","ICD10TB1",57,0)
DRG134 ;
"RTN","ICD10TB1",58,0)
 S ICDRG=$S(ICDMCC>0:133,1:134) Q
"RTN","ICD10TB1",59,0)
DRG135 ;
"RTN","ICD10TB1",60,0)
DRG136 ;
"RTN","ICD10TB1",61,0)
 S ICDRG=$S(ICDMCC>0:135,1:136) Q
"RTN","ICD10TB1",62,0)
DRG137 ;
"RTN","ICD10TB1",63,0)
DRG138 ;
"RTN","ICD10TB1",64,0)
 S ICDRG=$S(ICDMCC>0:137,1:138) Q
"RTN","ICD10TB1",65,0)
DRG139 ;
"RTN","ICD10TB1",66,0)
DRG140 ;
"RTN","ICD10TB1",67,0)
DRG141 ;
"RTN","ICD10TB1",68,0)
DRG142 ;
"RTN","ICD10TB1",69,0)
DRG143 ;
"RTN","ICD10TB1",70,0)
DRG144 ;
"RTN","ICD10TB1",71,0)
DRG145 ;
"RTN","ICD10TB1",72,0)
 Q
"RTN","ICD10TB1",73,0)
DRG146 ;
"RTN","ICD10TB1",74,0)
DRG147 ;
"RTN","ICD10TB1",75,0)
DRG148 ;
"RTN","ICD10TB1",76,0)
 S ICDRG=$S(ICDMCC=2:146,ICDMCC=1:147,1:148) Q
"RTN","ICD10TB1",77,0)
DRG149 ;
"RTN","ICD10TB1",78,0)
 Q
"RTN","ICD10TB1",79,0)
DRG150 ;
"RTN","ICD10TB1",80,0)
DRG151 ;
"RTN","ICD10TB1",81,0)
 S ICDRG=$S(ICDMCC=2:150,1:151) Q
"RTN","ICD10TB1",82,0)
DRG152 ;
"RTN","ICD10TB1",83,0)
DRG153 ;
"RTN","ICD10TB1",84,0)
 S ICDRG=$S(ICDMCC=2:152,1:153) Q
"RTN","ICD10TB1",85,0)
DRG154 ;
"RTN","ICD10TB1",86,0)
DRG155 ;
"RTN","ICD10TB1",87,0)
DRG156 ;
"RTN","ICD10TB1",88,0)
 S ICDRG=$S(ICDMCC=2:154,ICDMCC=1:155,1:156) Q
"RTN","ICD10TB1",89,0)
DRG157 ;
"RTN","ICD10TB1",90,0)
DRG158 ;
"RTN","ICD10TB1",91,0)
DRG159 ;
"RTN","ICD10TB1",92,0)
 S ICDRG=$S(ICDMCC=2:157,ICDMCC=1:158,1:159) Q
"RTN","ICD10TB1",93,0)
DRG160 ;
"RTN","ICD10TB1",94,0)
DRG161 ;
"RTN","ICD10TB1",95,0)
DRG162 ;
"RTN","ICD10TB1",96,0)
 Q
"RTN","ICD10TB1",97,0)
DRG163 ;
"RTN","ICD10TB1",98,0)
DRG164 ;
"RTN","ICD10TB1",99,0)
DRG165 ;
"RTN","ICD10TB1",100,0)
 S ICDRG=$S(ICDMCC=2:163,ICDMCC=1:164,1:165) Q
"RTN","ICD10TB1",101,0)
DRG166 ;
"RTN","ICD10TB1",102,0)
DRG167 ;
"RTN","ICD10TB1",103,0)
DRG168 ;
"RTN","ICD10TB1",104,0)
 S ICDRG=$S(ICDMCC=2:166,ICDMCC=1:167,1:168) Q
"RTN","ICD10TB1",105,0)
DRG169 ;
"RTN","ICD10TB1",106,0)
DRG170 ;
"RTN","ICD10TB1",107,0)
DRG171 ;
"RTN","ICD10TB1",108,0)
DRG172 ;
"RTN","ICD10TB1",109,0)
DRG173 ;
"RTN","ICD10TB1",110,0)
DRG174 ;
"RTN","ICD10TB1",111,0)
 Q
"RTN","ICD10TB1",112,0)
DRG175 ;
"RTN","ICD10TB1",113,0)
DRG176 ;
"RTN","ICD10TB1",114,0)
 S ICDRG=$S(ICDMCC=2:175,1:176) Q
"RTN","ICD10TB1",115,0)
DRG177 ;
"RTN","ICD10TB1",116,0)
DRG178 ;
"RTN","ICD10TB1",117,0)
DRG179 ;
"RTN","ICD10TB1",118,0)
 S ICDRG=$S(ICDMCC=2:177,ICDMCC=1:178,1:179) Q
"RTN","ICD10TB1",119,0)
DRG180 ;
"RTN","ICD10TB1",120,0)
DRG181 ;
"RTN","ICD10TB1",121,0)
DRG182 ;
"RTN","ICD10TB1",122,0)
 S ICDRG=$S(ICDMCC=2:180,ICDMCC=1:181,1:182) Q
"RTN","ICD10TB1",123,0)
DRG183 ;
"RTN","ICD10TB1",124,0)
DRG184 ;
"RTN","ICD10TB1",125,0)
DRG185 ;
"RTN","ICD10TB1",126,0)
 S ICDRG=$S(ICDMCC=2:183,ICDMCC=1:184,1:185) Q
"RTN","ICD10TB1",127,0)
DRG186 ;
"RTN","ICD10TB1",128,0)
DRG187 ;
"RTN","ICD10TB1",129,0)
DRG188 ;
"RTN","ICD10TB1",130,0)
 S ICDRG=$S(ICDMCC=2:186,ICDMCC=1:187,1:188) Q
"RTN","ICD10TB1",131,0)
DRG189 ;
"RTN","ICD10TB1",132,0)
 Q
"RTN","ICD10TB1",133,0)
DRG190 ;
"RTN","ICD10TB1",134,0)
DRG191 ;
"RTN","ICD10TB1",135,0)
DRG192 ;
"RTN","ICD10TB1",136,0)
 S ICDRG=$S(ICDMCC=2:190,ICDMCC=1:191,1:192) Q
"RTN","ICD10TB1",137,0)
DRG193 ;
"RTN","ICD10TB1",138,0)
DRG194 ;
"RTN","ICD10TB1",139,0)
DRG195 ;
"RTN","ICD10TB1",140,0)
 S ICDRG=$S(ICDMCC=2:193,ICDMCC=1:194,1:195) Q
"RTN","ICD10TB1",141,0)
DRG196 ;
"RTN","ICD10TB1",142,0)
DRG197 ;
"RTN","ICD10TB1",143,0)
DRG198 ;
"RTN","ICD10TB1",144,0)
 S ICDRG=$S(ICDMCC=2:196,ICDMCC=1:197,1:198) Q
"RTN","ICD10TB1",145,0)
DRG199 ;
"RTN","ICD10TB1",146,0)
DRG200 ;
"RTN","ICD10TB1",147,0)
DRG201 ;
"RTN","ICD10TB1",148,0)
 S ICDRG=$S(ICDMCC=2:199,ICDMCC=1:200,1:201) Q
"RTN","ICD10TB1",149,0)
 Q
"RTN","ICD10TB2")
0^9^B18222140^n/a
"RTN","ICD10TB2",1,0)
ICD10TB2 ;KUM - GROUPER UTILITY FUNCTIONS;05/04/2012
"RTN","ICD10TB2",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICD10TB2",3,0)
 ;
"RTN","ICD10TB2",4,0)
 ;DRG200 ; D DRG200^ICDTBL2D   -- See ICD10TB1
"RTN","ICD10TB2",5,0)
 ;DRG201 ;I ICDSD["c" S ICDRG=200 Q  -- See ICD10TB1
"RTN","ICD10TB2",6,0)
DRG202 ;
"RTN","ICD10TB2",7,0)
DRG203 S ICDRG=$S(ICDMCC>0:202,1:203) Q
"RTN","ICD10TB2",8,0)
DRG204 S ICDRG=204 Q
"RTN","ICD10TB2",9,0)
DRG205 ;
"RTN","ICD10TB2",10,0)
DRG206 S ICDRG=$S(ICDMCC=2:205,1:206) Q
"RTN","ICD10TB2",11,0)
DRG207 ;
"RTN","ICD10TB2",12,0)
DRG208 ;
"RTN","ICD10TB2",13,0)
DRG209 ;
"RTN","ICD10TB2",14,0)
DRG210 ;
"RTN","ICD10TB2",15,0)
 Q
"RTN","ICD10TB2",16,0)
DRG211 ;
"RTN","ICD10TB2",17,0)
 Q
"RTN","ICD10TB2",18,0)
DRG212 ;
"RTN","ICD10TB2",19,0)
 Q
"RTN","ICD10TB2",20,0)
DRG214 ;
"RTN","ICD10TB2",21,0)
DRG215 ;
"RTN","ICD10TB2",22,0)
DRG216 ;
"RTN","ICD10TB2",23,0)
DRG217 ;
"RTN","ICD10TB2",24,0)
DRG218 ;
"RTN","ICD10TB2",25,0)
DRG219 ;
"RTN","ICD10TB2",26,0)
DRG220 ;
"RTN","ICD10TB2",27,0)
 Q
"RTN","ICD10TB2",28,0)
DRG221 ;
"RTN","ICD10TB2",29,0)
DRG222 ;
"RTN","ICD10TB2",30,0)
DRG223 ;
"RTN","ICD10TB2",31,0)
DRG224 ;
"RTN","ICD10TB2",32,0)
DRG225 ;
"RTN","ICD10TB2",33,0)
DRG226 ;
"RTN","ICD10TB2",34,0)
DRG227 ;
"RTN","ICD10TB2",35,0)
 Q
"RTN","ICD10TB2",36,0)
DRG228 ;
"RTN","ICD10TB2",37,0)
DRG229 ;
"RTN","ICD10TB2",38,0)
DRG230 ;
"RTN","ICD10TB2",39,0)
 S ICDRG=$S(ICDMCC=2:228,ICDMCC=1:229,1:230)
"RTN","ICD10TB2",40,0)
 Q
"RTN","ICD10TB2",41,0)
DRG231 ;
"RTN","ICD10TB2",42,0)
DRG232 ;
"RTN","ICD10TB2",43,0)
DRG233 ;
"RTN","ICD10TB2",44,0)
DRG234 ;
"RTN","ICD10TB2",45,0)
DRG235 ;
"RTN","ICD10TB2",46,0)
DRG236 ;
"RTN","ICD10TB2",47,0)
 Q
"RTN","ICD10TB2",48,0)
DRG237 ;
"RTN","ICD10TB2",49,0)
DRG238 ;
"RTN","ICD10TB2",50,0)
 S ICDRG=$S(ICDMCC=2:237,1:238)
"RTN","ICD10TB2",51,0)
 Q
"RTN","ICD10TB2",52,0)
DRG239 ;
"RTN","ICD10TB2",53,0)
DRG240 ;
"RTN","ICD10TB2",54,0)
DRG241 ;
"RTN","ICD10TB2",55,0)
 S ICDRG=$S(ICDMCC=2:239,ICDMCC=1:240,1:241)
"RTN","ICD10TB2",56,0)
 Q
"RTN","ICD10TB2",57,0)
DRG242 ; called from CMS115
"RTN","ICD10TB2",58,0)
DRG243 ;
"RTN","ICD10TB2",59,0)
DRG244 ;
"RTN","ICD10TB2",60,0)
 S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244)
"RTN","ICD10TB2",61,0)
 Q
"RTN","ICD10TB2",62,0)
DRG245 ;
"RTN","ICD10TB2",63,0)
 S ICDRG=245 Q
"RTN","ICD10TB2",64,0)
DRG246 ;
"RTN","ICD10TB2",65,0)
DRG247 ;
"RTN","ICD10TB2",66,0)
DRG248 ;
"RTN","ICD10TB2",67,0)
DRG249 ;
"RTN","ICD10TB2",68,0)
 Q
"RTN","ICD10TB2",69,0)
DRG250 ;
"RTN","ICD10TB2",70,0)
DRG251 S ICDRG=$S(ICDMCC=2:250,1:251) Q
"RTN","ICD10TB2",71,0)
DRG252 ;
"RTN","ICD10TB2",72,0)
DRG253 ;
"RTN","ICD10TB2",73,0)
DRG254 S ICDRG=$S(ICDMCC=2:252,ICDMCC=1:253,1:254) Q
"RTN","ICD10TB2",74,0)
DRG255 ;
"RTN","ICD10TB2",75,0)
DRG256 ;
"RTN","ICD10TB2",76,0)
DRG257 S ICDRG=$S(ICDMCC=2:255,ICDMCC=1:256,1:257) Q
"RTN","ICD10TB2",77,0)
DRG258 ;
"RTN","ICD10TB2",78,0)
DRG259 ;
"RTN","ICD10TB2",79,0)
 S ICDRG=$S(ICDMCC=2:258,1:259) Q
"RTN","ICD10TB2",80,0)
DRG260 ;
"RTN","ICD10TB2",81,0)
DRG261 ;
"RTN","ICD10TB2",82,0)
DRG262 ;
"RTN","ICD10TB2",83,0)
 S ICDRG=$S(ICDMCC=2:260,ICDMCC=1:261,1:262)
"RTN","ICD10TB2",84,0)
 Q
"RTN","ICD10TB2",85,0)
DRG263 S ICDRG=263 Q
"RTN","ICD10TB2",86,0)
DRG264 S ICDRG=264 Q
"RTN","ICD10TB2",87,0)
DRG265 S ICDRG=265 Q
"RTN","ICD10TB2",88,0)
DRG266 ;
"RTN","ICD10TB2",89,0)
 S ICDRG=266 Q
"RTN","ICD10TB2",90,0)
DRG267 ;
"RTN","ICD10TB2",91,0)
 S ICDRG=267 Q
"RTN","ICD10TB2",92,0)
DRG268 ;
"RTN","ICD10TB2",93,0)
 S ICDRG=268 Q
"RTN","ICD10TB2",94,0)
DRG269 ;
"RTN","ICD10TB2",95,0)
 S ICDRG=269 Q
"RTN","ICD10TB2",96,0)
DRG270 ;
"RTN","ICD10TB2",97,0)
 S ICDRG=270 Q
"RTN","ICD10TB2",98,0)
DRG271 ;
"RTN","ICD10TB2",99,0)
 S ICDRG=271 Q
"RTN","ICD10TB2",100,0)
DRG272 ;
"RTN","ICD10TB2",101,0)
 S ICDRG=272 Q
"RTN","ICD10TB2",102,0)
DRG273 ;
"RTN","ICD10TB2",103,0)
 S ICDRG=273 Q
"RTN","ICD10TB2",104,0)
DRG274 ;
"RTN","ICD10TB2",105,0)
 S ICDRG=274 Q
"RTN","ICD10TB2",106,0)
DRG275 ;
"RTN","ICD10TB2",107,0)
 S ICDRG=275 Q
"RTN","ICD10TB2",108,0)
DRG276 ;
"RTN","ICD10TB2",109,0)
 S ICDRG=276 Q
"RTN","ICD10TB2",110,0)
DRG277 ;
"RTN","ICD10TB2",111,0)
 S ICDRG=277 Q
"RTN","ICD10TB2",112,0)
DRG278 ;
"RTN","ICD10TB2",113,0)
 S ICDRG=278 Q
"RTN","ICD10TB2",114,0)
DRG279 ;
"RTN","ICD10TB2",115,0)
 S ICDRG=279 Q
"RTN","ICD10TB2",116,0)
DRG280 ;
"RTN","ICD10TB2",117,0)
DRG281 ;
"RTN","ICD10TB2",118,0)
DRG282 ;
"RTN","ICD10TB2",119,0)
DRG283 ;
"RTN","ICD10TB2",120,0)
DRG284 ;
"RTN","ICD10TB2",121,0)
DRG285 ;
"RTN","ICD10TB2",122,0)
 Q
"RTN","ICD10TB2",123,0)
DRG286 ;
"RTN","ICD10TB2",124,0)
DRG287 ;
"RTN","ICD10TB2",125,0)
 S ICDRG=$S(ICDMCC=2:286,1:287) Q
"RTN","ICD10TB2",126,0)
DRG288 ;
"RTN","ICD10TB2",127,0)
DRG289 ;
"RTN","ICD10TB2",128,0)
DRG290 S ICDRG=$S(ICDMCC=2:288,ICDMCC=1:289,1:290) Q
"RTN","ICD10TB2",129,0)
DRG291 ;
"RTN","ICD10TB2",130,0)
DRG292 ;
"RTN","ICD10TB2",131,0)
DRG293 ;
"RTN","ICD10TB2",132,0)
 S ICDRG=$S(ICDMCC=2:291,ICDMCC=1:292,1:293) Q
"RTN","ICD10TB2",133,0)
DRG294 ;
"RTN","ICD10TB2",134,0)
DRG295 S ICDRG=$S(ICDMCC>0:294,1:295) Q
"RTN","ICD10TB2",135,0)
DRG296 ;
"RTN","ICD10TB2",136,0)
DRG297 ;
"RTN","ICD10TB2",137,0)
DRG298 ;
"RTN","ICD10TB2",138,0)
 S ICDRG=$S(ICDMCC=2:296,ICDMCC=1:297,1:298) Q
"RTN","ICD10TB2",139,0)
DRG299 ;
"RTN","ICD10TB2",140,0)
DRG300 ;
"RTN","ICD10TB2",141,0)
DRG301 ;
"RTN","ICD10TB2",142,0)
 S ICDRG=$S(ICDMCC=2:299,ICDMCC=1:300,1:301) Q
"RTN","ICD10TB2",143,0)
 Q
"RTN","ICD10TB2",144,0)
CMS115 ;convert DRG115^ICDTLB2C code - no MS-DRG 115 existed
"RTN","ICD10TB2",145,0)
 D EN1^ICDDRG5
"RTN","ICD10TB2",146,0)
 I ICDOR[7 S ICDRG=$S(ICDMCC=2:260,ICDMCC=1:261,1:262) Q
"RTN","ICD10TB2",147,0)
 I ICDPD'["I"&(ICDOR'["p")&(ICDCC2=0)&(ICDCC3=0) D  Q
"RTN","ICD10TB2",148,0)
 .I ICDSD["V" S ICDMCC=0
"RTN","ICD10TB2",149,0)
 .S ICDRG=$S(ICDMCC=2:291,ICDMCC=1:292,1:293)
"RTN","ICD10TB2",150,0)
 I ICDCC2=1!(ICDCC3=1) D DRG242
"RTN","ICD10TB2",151,0)
 I ((ICDRG>241)&(ICDRG<245)) Q
"RTN","ICD10TB2",152,0)
 ; ICDCC2 identifies AICD LEAD OR GNRTR
"RTN","ICD10TB2",153,0)
 I ICDCC2=1!(ICDCC3=1) D  Q
"RTN","ICD10TB2",154,0)
 . S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244) Q
"RTN","ICD10TB2",155,0)
  I ICDOR["p" D  Q
"RTN","ICD10TB2",156,0)
 . S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244) Q
"RTN","ICD10TB2",157,0)
 Q
"RTN","ICD10TB2",158,0)
CMS516 ;convert DRG516^ICDTLB6C code - no MS-DRG 516 exists
"RTN","ICD10TB2",159,0)
 S ICDRG=250
"RTN","ICD10TB2",160,0)
 I '$D(ICDOP(" 36.06"))&'$D(ICDOP(" 92.27"))&'$D(ICDOP(" 36.07")) D DRG251
"RTN","ICD10TB2",161,0)
 E  D DRG248
"RTN","ICD10TB2",162,0)
 I $D(ICDOP(" 36.07")) D DRG246
"RTN","ICD10TB2",163,0)
 Q
"RTN","ICD10TB2",164,0)
MCV ; checks to see if case qualifies as an MCV (major cardiovascular complications or complex conditions)
"RTN","ICD10TB2",165,0)
 S (ICDMCV,ICDMCV1,ICDMCV2)=0
"RTN","ICD10TB2",166,0)
 ; ICDPD=identifier for prime dx  ICDSD=identifier for any secondary dx
"RTN","ICD10TB2",167,0)
 ; DGDX(1)=prime dx  ICDDX(1)=ien of prime dx ICDDXT=any secondary dx  
"RTN","ICD10TB2",168,0)
 I ICDPD["c"!(ICDSD["c") S ICDMCV=1
"RTN","ICD10TB2",169,0)
 I ICDSD["s" S ICDMCV=1
"RTN","ICD10TB2",170,0)
 ;I DGDX(1)["426.0"!(DGDX(1)["426.53")!(DGDX(1)["426.54") S ICDMCV1=1
"RTN","ICD10TB2",171,0)
 I $G(ICDDX(1))=9056!($G(ICDDX(1))=2548)!($G(ICDDX(1))=2549) S ICDMCV1=1
"RTN","ICD10TB2",172,0)
 I $D(ICDDXT("426.0"))!($D(ICDDXT("426.53")))!($D(ICDDXT("426.54"))) S ICDMCV1=1
"RTN","ICD10TB2",173,0)
 ;I DGDX(1)["411.1"!(DGDX(1)["411.81") S ICDMCV2=1
"RTN","ICD10TB2",174,0)
 I $G(ICDDX(1))=2500!($G(ICDDX(1))=12477) S ICDMCV2=1
"RTN","ICD10TB2",175,0)
 I $D(ICDDXT("411.1"))!($D(ICDDXT("411.81"))) S ICDMCV2=1
"RTN","ICD10TB2",176,0)
 Q
"RTN","ICD10TB3")
0^10^B6789079^n/a
"RTN","ICD10TB3",1,0)
ICD10TB3 ;KUM - GROUPER UTILITY FUNCTIONS;05/04/2012
"RTN","ICD10TB3",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICD10TB3",3,0)
 ;
"RTN","ICD10TB3",4,0)
 ;DRG300 ; D DRG300^ICDTBL3D    -See ICD10TB2
"RTN","ICD10TB3",5,0)
 ;DRG301 S ICDRG=$S(ICDMCC=2:299,ICDMCC=1:300,1:301) Q  -See ICD10TB2
"RTN","ICD10TB3",6,0)
DRG302 ;
"RTN","ICD10TB3",7,0)
DRG303 S ICDRG=$S(ICDMCC=2:302,1:303) Q
"RTN","ICD10TB3",8,0)
DRG304 ;
"RTN","ICD10TB3",9,0)
DRG305 S ICDRG=$S(ICDMCC=2:304,1:305) Q
"RTN","ICD10TB3",10,0)
DRG306 ;
"RTN","ICD10TB3",11,0)
DRG307 S ICDRG=$S(ICDMCC=2:306,1:307) Q
"RTN","ICD10TB3",12,0)
DRG308 ;
"RTN","ICD10TB3",13,0)
DRG309 ;
"RTN","ICD10TB3",14,0)
DRG310 ;
"RTN","ICD10TB3",15,0)
 S ICDRG=$S(ICDMCC=2:308,ICDMCC=1:309,1:310) Q
"RTN","ICD10TB3",16,0)
DRG311 ;
"RTN","ICD10TB3",17,0)
DRG312 ;
"RTN","ICD10TB3",18,0)
DRG313 ;
"RTN","ICD10TB3",19,0)
 Q
"RTN","ICD10TB3",20,0)
DRG314 ;
"RTN","ICD10TB3",21,0)
DRG315 ;
"RTN","ICD10TB3",22,0)
DRG316 S ICDRG=$S(ICDMCC=2:314,ICDMCC=1:315,1:316) Q
"RTN","ICD10TB3",23,0)
DRG317 ;
"RTN","ICD10TB3",24,0)
DRG318 ;
"RTN","ICD10TB3",25,0)
DRG319 ;
"RTN","ICD10TB3",26,0)
DRG320 ;
"RTN","ICD10TB3",27,0)
DRG321 ;
"RTN","ICD10TB3",28,0)
DRG322 ;
"RTN","ICD10TB3",29,0)
DRG323 ;
"RTN","ICD10TB3",30,0)
DRG324 ;
"RTN","ICD10TB3",31,0)
DRG325 ;
"RTN","ICD10TB3",32,0)
 Q
"RTN","ICD10TB3",33,0)
DRG326 ;
"RTN","ICD10TB3",34,0)
DRG327 ;
"RTN","ICD10TB3",35,0)
DRG328 S ICDRG=$S(ICDMCC=2:326,ICDMCC=1:327,1:328) Q
"RTN","ICD10TB3",36,0)
DRG329 ;
"RTN","ICD10TB3",37,0)
DRG330 ;
"RTN","ICD10TB3",38,0)
DRG331 S ICDRG=$S(ICDMCC=2:329,ICDMCC=1:330,1:331) Q
"RTN","ICD10TB3",39,0)
DRG332 ;
"RTN","ICD10TB3",40,0)
DRG333 ;
"RTN","ICD10TB3",41,0)
DRG334 S ICDRG=$S(ICDMCC=2:332,ICDMCC=1:333,1:334) Q
"RTN","ICD10TB3",42,0)
DRG335 ;
"RTN","ICD10TB3",43,0)
DRG336 ;
"RTN","ICD10TB3",44,0)
DRG337 S ICDRG=$S(ICDMCC=2:335,ICDMCC=1:336,1:337) Q
"RTN","ICD10TB3",45,0)
DRG338 ;
"RTN","ICD10TB3",46,0)
DRG339 ;
"RTN","ICD10TB3",47,0)
DRG340 ;
"RTN","ICD10TB3",48,0)
DRG341 ;
"RTN","ICD10TB3",49,0)
DRG342 ;
"RTN","ICD10TB3",50,0)
DRG343 ;
"RTN","ICD10TB3",51,0)
 Q
"RTN","ICD10TB3",52,0)
DRG344 ;
"RTN","ICD10TB3",53,0)
DRG345 ;
"RTN","ICD10TB3",54,0)
DRG346 S ICDRG=$S(ICDMCC=2:344,ICDMCC=1:345,1:346) Q
"RTN","ICD10TB3",55,0)
DRG347 ;
"RTN","ICD10TB3",56,0)
DRG348 ;
"RTN","ICD10TB3",57,0)
DRG349 S ICDRG=$S(ICDMCC=2:347,ICDMCC=1:348,1:349) Q
"RTN","ICD10TB3",58,0)
DRG350 ;
"RTN","ICD10TB3",59,0)
DRG351 ;
"RTN","ICD10TB3",60,0)
DRG352 ;
"RTN","ICD10TB3",61,0)
DRG353 ;
"RTN","ICD10TB3",62,0)
DRG354 ;
"RTN","ICD10TB3",63,0)
DRG355 ;
"RTN","ICD10TB3",64,0)
 Q
"RTN","ICD10TB3",65,0)
DRG356 ;
"RTN","ICD10TB3",66,0)
DRG357 ;
"RTN","ICD10TB3",67,0)
DRG358 S ICDRG=$S(ICDMCC=2:356,ICDMCC=1:357,1:358) Q
"RTN","ICD10TB3",68,0)
DRG359 ;
"RTN","ICD10TB3",69,0)
DRG360 ;
"RTN","ICD10TB3",70,0)
DRG361 ;
"RTN","ICD10TB3",71,0)
DRG362 ;
"RTN","ICD10TB3",72,0)
DRG363 ;
"RTN","ICD10TB3",73,0)
DRG364 ;
"RTN","ICD10TB3",74,0)
DRG365 ;
"RTN","ICD10TB3",75,0)
DRG366 ;
"RTN","ICD10TB3",76,0)
DRG367 ;
"RTN","ICD10TB3",77,0)
 Q
"RTN","ICD10TB3",78,0)
DRG368 ;
"RTN","ICD10TB3",79,0)
DRG369 ;
"RTN","ICD10TB3",80,0)
DRG370 S ICDRG=$S(ICDMCC=2:368,ICDMCC=1:369,1:370) Q
"RTN","ICD10TB3",81,0)
DRG371 ;
"RTN","ICD10TB3",82,0)
DRG372 ;
"RTN","ICD10TB3",83,0)
DRG373 S ICDRG=$S(ICDMCC=2:371,ICDMCC=1:372,1:373) Q
"RTN","ICD10TB3",84,0)
DRG374 ;
"RTN","ICD10TB3",85,0)
DRG375 ;
"RTN","ICD10TB3",86,0)
DRG376 S ICDRG=$S(ICDMCC=2:374,ICDMCC=1:375,1:376) Q
"RTN","ICD10TB3",87,0)
DRG377 ;
"RTN","ICD10TB3",88,0)
DRG378 ;
"RTN","ICD10TB3",89,0)
DRG379 S ICDRG=$S(ICDMCC=2:377,ICDMCC=1:378,1:379) Q
"RTN","ICD10TB3",90,0)
DRG380 ;
"RTN","ICD10TB3",91,0)
DRG381 ;
"RTN","ICD10TB3",92,0)
DRG382 ;
"RTN","ICD10TB3",93,0)
DRG383 ;
"RTN","ICD10TB3",94,0)
DRG384 ;
"RTN","ICD10TB3",95,0)
 Q
"RTN","ICD10TB3",96,0)
DRG385 ;
"RTN","ICD10TB3",97,0)
DRG386 ;
"RTN","ICD10TB3",98,0)
DRG387 ;
"RTN","ICD10TB3",99,0)
 S ICDRG=$S(ICDMCC=2:385,ICDMCC=1:386,1:387) Q
"RTN","ICD10TB3",100,0)
 Q
"RTN","ICD10TB3",101,0)
DRG388 ;
"RTN","ICD10TB3",102,0)
DRG389 ;
"RTN","ICD10TB3",103,0)
DRG390 S ICDRG=$S(ICDMCC=2:388,ICDMCC=1:389,1:390) Q
"RTN","ICD10TB3",104,0)
DRG391 ;
"RTN","ICD10TB3",105,0)
DRG392 S ICDRG=$S(ICDMCC=2:391,1:392) Q
"RTN","ICD10TB3",106,0)
DRG393 ;
"RTN","ICD10TB3",107,0)
DRG394 ;
"RTN","ICD10TB3",108,0)
DRG395 ;
"RTN","ICD10TB3",109,0)
 S ICDRG=$S(ICDMCC=2:393,ICDMCC=1:394,1:395) Q
"RTN","ICD10TB3",110,0)
DRG396 ;
"RTN","ICD10TB3",111,0)
DRG397 ;
"RTN","ICD10TB3",112,0)
DRG398 ;
"RTN","ICD10TB3",113,0)
DRG399 ;
"RTN","ICD10TB3",114,0)
 Q
"RTN","ICD10TB4")
0^11^B9167308^n/a
"RTN","ICD10TB4",1,0)
ICD10TB4 ;KUM - GROUPER UTILITY FUNCTIONS;05/04/2012
"RTN","ICD10TB4",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICD10TB4",3,0)
 ;
"RTN","ICD10TB4",4,0)
DRG400 ;
"RTN","ICD10TB4",5,0)
DRG401 ;
"RTN","ICD10TB4",6,0)
DRG402 ;
"RTN","ICD10TB4",7,0)
DRG403 ;
"RTN","ICD10TB4",8,0)
DRG404 ;
"RTN","ICD10TB4",9,0)
 Q
"RTN","ICD10TB4",10,0)
DRG405 ;
"RTN","ICD10TB4",11,0)
DRG406 ;
"RTN","ICD10TB4",12,0)
DRG407 S ICDRG=$S(ICDMCC=2:405,ICDMCC=1:406,1:407) Q
"RTN","ICD10TB4",13,0)
DRG408 ;
"RTN","ICD10TB4",14,0)
DRG409 ;
"RTN","ICD10TB4",15,0)
DRG410 ;
"RTN","ICD10TB4",16,0)
 S ICDRG=$S(ICDMCC=2:408,ICDMCC=1:409,1:410) Q
"RTN","ICD10TB4",17,0)
 Q
"RTN","ICD10TB4",18,0)
DRG411 ;
"RTN","ICD10TB4",19,0)
DRG412 ;
"RTN","ICD10TB4",20,0)
DRG413 ;
"RTN","ICD10TB4",21,0)
DRG414 ;
"RTN","ICD10TB4",22,0)
DRG415 ;
"RTN","ICD10TB4",23,0)
DRG416 ;
"RTN","ICD10TB4",24,0)
DRG417 ;
"RTN","ICD10TB4",25,0)
DRG418 ;
"RTN","ICD10TB4",26,0)
DRG419 ;
"RTN","ICD10TB4",27,0)
 Q
"RTN","ICD10TB4",28,0)
DRG420 ;
"RTN","ICD10TB4",29,0)
DRG421 ;
"RTN","ICD10TB4",30,0)
DRG422 ;
"RTN","ICD10TB4",31,0)
 S ICDRG=$S(ICDMCC=2:420,ICDMCC=1:421,1:422) Q
"RTN","ICD10TB4",32,0)
DRG423 ;
"RTN","ICD10TB4",33,0)
DRG424 ;
"RTN","ICD10TB4",34,0)
DRG425 S ICDRG=$S(ICDMCC=2:423,ICDMCC=1:424,1:425) Q
"RTN","ICD10TB4",35,0)
DRG426 ;
"RTN","ICD10TB4",36,0)
DRG427 ;
"RTN","ICD10TB4",37,0)
DRG428 ;
"RTN","ICD10TB4",38,0)
DRG429 ;
"RTN","ICD10TB4",39,0)
DRG430 ;
"RTN","ICD10TB4",40,0)
DRG431 ;
"RTN","ICD10TB4",41,0)
 Q
"RTN","ICD10TB4",42,0)
DRG432 ;
"RTN","ICD10TB4",43,0)
DRG433 ;
"RTN","ICD10TB4",44,0)
DRG434 S ICDRG=$S(ICDMCC=2:432,ICDMCC=1:433,1:434) Q
"RTN","ICD10TB4",45,0)
DRG435 ;
"RTN","ICD10TB4",46,0)
DRG436 ;
"RTN","ICD10TB4",47,0)
DRG437 ;
"RTN","ICD10TB4",48,0)
 S ICDRG=$S(ICDMCC=2:435,ICDMCC=1:436,1:437) Q
"RTN","ICD10TB4",49,0)
DRG438 ;
"RTN","ICD10TB4",50,0)
DRG439 ;
"RTN","ICD10TB4",51,0)
DRG440 ;
"RTN","ICD10TB4",52,0)
 S ICDRG=$S(ICDMCC=2:438,ICDMCC=1:439,1:440) Q
"RTN","ICD10TB4",53,0)
DRG441 ;
"RTN","ICD10TB4",54,0)
DRG442 ;
"RTN","ICD10TB4",55,0)
DRG443 S ICDRG=$S(ICDMCC=2:441,ICDMCC=1:442,1:443) Q
"RTN","ICD10TB4",56,0)
DRG444 ;
"RTN","ICD10TB4",57,0)
DRG445 ;
"RTN","ICD10TB4",58,0)
DRG446 S ICDRG=$S(ICDMCC=2:444,ICDMCC=1:445,1:446) Q
"RTN","ICD10TB4",59,0)
DRG447 ;
"RTN","ICD10TB4",60,0)
DRG448 ;
"RTN","ICD10TB4",61,0)
DRG449 ;
"RTN","ICD10TB4",62,0)
DRG450 ;
"RTN","ICD10TB4",63,0)
DRG451 ;
"RTN","ICD10TB4",64,0)
DRG452 ;
"RTN","ICD10TB4",65,0)
DRG453 ;
"RTN","ICD10TB4",66,0)
DRG454 ;
"RTN","ICD10TB4",67,0)
DRG455 ;
"RTN","ICD10TB4",68,0)
 S ICDRG=$S(ICDMCC=2:453,ICDMCC=1:454,1:455) Q
"RTN","ICD10TB4",69,0)
DRG456 ;
"RTN","ICD10TB4",70,0)
DRG457 ;
"RTN","ICD10TB4",71,0)
DRG458 ;
"RTN","ICD10TB4",72,0)
 S ICDRG=$S(ICDMCC=2:456,ICDMCC=1:457,1:458) Q
"RTN","ICD10TB4",73,0)
DRG459 ;
"RTN","ICD10TB4",74,0)
DRG460 S ICDRG=$S(ICDMCC=2:459,1:460) Q
"RTN","ICD10TB4",75,0)
DRG461 ;
"RTN","ICD10TB4",76,0)
DRG462 ;
"RTN","ICD10TB4",77,0)
 S ICDRG=$S(ICDMCC=2:461,1:462) Q
"RTN","ICD10TB4",78,0)
DRG463 ;
"RTN","ICD10TB4",79,0)
DRG464 ;
"RTN","ICD10TB4",80,0)
DRG465 S ICDRG=$S(ICDMCC=2:463,ICDMCC=1:464,1:465) Q
"RTN","ICD10TB4",81,0)
DRG466 ;
"RTN","ICD10TB4",82,0)
DRG467 ;
"RTN","ICD10TB4",83,0)
DRG468 S ICDRG=$S(ICDMCC=2:466,ICDMCC=1:467,1:468) Q
"RTN","ICD10TB4",84,0)
DRG469 ;
"RTN","ICD10TB4",85,0)
DRG470 ;
"RTN","ICD10TB4",86,0)
 S ICDRG=$S(ICDMCC=2:469,1:470) Q
"RTN","ICD10TB4",87,0)
DRG471 ;
"RTN","ICD10TB4",88,0)
DRG472 ;
"RTN","ICD10TB4",89,0)
DRG473 S ICDRG=$S(ICDMCC=2:471,ICDMCC=1:472,1:473) Q
"RTN","ICD10TB4",90,0)
DRG474 ;
"RTN","ICD10TB4",91,0)
DRG475 ;
"RTN","ICD10TB4",92,0)
DRG476 S ICDRG=$S(ICDMCC=2:474,ICDMCC=1:475,1:476) Q
"RTN","ICD10TB4",93,0)
DRG477 ;
"RTN","ICD10TB4",94,0)
DRG478 ;
"RTN","ICD10TB4",95,0)
DRG479 S ICDRG=$S(ICDMCC=2:477,ICDMCC=1:478,1:479) Q
"RTN","ICD10TB4",96,0)
DRG480 ;
"RTN","ICD10TB4",97,0)
DRG481 ;
"RTN","ICD10TB4",98,0)
DRG482 S ICDRG=$S(ICDMCC=2:480,ICDMCC=1:481,1:482) Q
"RTN","ICD10TB4",99,0)
DRG483 ;
"RTN","ICD10TB4",100,0)
DRG484 S ICDRG=$S(ICDMCC>0:483,1:484) Q
"RTN","ICD10TB4",101,0)
DRG485 ;
"RTN","ICD10TB4",102,0)
DRG486 ;
"RTN","ICD10TB4",103,0)
DRG487 ;
"RTN","ICD10TB4",104,0)
DRG488 ;
"RTN","ICD10TB4",105,0)
DRG489 ;
"RTN","ICD10TB4",106,0)
 I $D(ICD10PD("k")) S ICDRG=$S(ICDMCC=2:485,ICDMCC=1:486,1:487) Q
"RTN","ICD10TB4",107,0)
 S ICDRG=$S(ICDMCC>0:488,1:489)
"RTN","ICD10TB4",108,0)
 Q
"RTN","ICD10TB4",109,0)
DRG490 ; 
"RTN","ICD10TB4",110,0)
DRG491 ;
"RTN","ICD10TB4",111,0)
 Q 
"RTN","ICD10TB4",112,0)
DRG492 ;
"RTN","ICD10TB4",113,0)
DRG493 ;
"RTN","ICD10TB4",114,0)
DRG494 S ICDRG=$S(ICDMCC=2:492,ICDMCC=1:493,1:494) Q
"RTN","ICD10TB4",115,0)
DRG495 ;
"RTN","ICD10TB4",116,0)
DRG496 ;
"RTN","ICD10TB4",117,0)
DRG497 S ICDRG=$S(ICDMCC=2:495,ICDMCC=1:496,1:497) Q
"RTN","ICD10TB4",118,0)
DRG498 ;
"RTN","ICD10TB4",119,0)
DRG499 S ICDRG=$S(ICDMCC>0:498,1:499) Q
"RTN","ICD10TB4",120,0)
 Q
"RTN","ICD10TB5")
0^12^B7411864^n/a
"RTN","ICD10TB5",1,0)
ICD10TB5 ;KUM - GROUPER UTILITY FUNCTIONS;05/04/2012
"RTN","ICD10TB5",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICD10TB5",3,0)
 ;
"RTN","ICD10TB5",4,0)
DRG500 ;
"RTN","ICD10TB5",5,0)
DRG501 ;
"RTN","ICD10TB5",6,0)
DRG502 S ICDRG=$S(ICDMCC=2:500,ICDMCC=1:501,1:502) Q
"RTN","ICD10TB5",7,0)
DRG503 ;
"RTN","ICD10TB5",8,0)
DRG504 ;
"RTN","ICD10TB5",9,0)
DRG505 S ICDRG=$S(ICDMCC=2:503,ICDMCC=1:504,1:505) Q
"RTN","ICD10TB5",10,0)
DRG506 ;
"RTN","ICD10TB5",11,0)
 Q
"RTN","ICD10TB5",12,0)
DRG507 ;
"RTN","ICD10TB5",13,0)
DRG508 S ICDRG=$S(ICDMCC>0:507,1:508) Q
"RTN","ICD10TB5",14,0)
DRG509 ;
"RTN","ICD10TB5",15,0)
 Q
"RTN","ICD10TB5",16,0)
DRG510 ;
"RTN","ICD10TB5",17,0)
DRG511 ;
"RTN","ICD10TB5",18,0)
DRG512 S ICDRG=$S(ICDMCC=2:510,ICDMCC=1:511,1:512) Q
"RTN","ICD10TB5",19,0)
DRG513 ;
"RTN","ICD10TB5",20,0)
DRG514 S ICDRG=$S(ICDMCC>0:513,1:514) Q
"RTN","ICD10TB5",21,0)
DRG515 ;
"RTN","ICD10TB5",22,0)
DRG516 ;
"RTN","ICD10TB5",23,0)
DRG517 S ICDRG=$S(ICDMCC=2:515,ICDMCC=1:516,1:517) Q
"RTN","ICD10TB5",24,0)
DRG518 ;
"RTN","ICD10TB5",25,0)
DRG519 ;
"RTN","ICD10TB5",26,0)
DRG520 ;
"RTN","ICD10TB5",27,0)
DRG521 ;
"RTN","ICD10TB5",28,0)
DRG522 ;
"RTN","ICD10TB5",29,0)
DRG523 ;
"RTN","ICD10TB5",30,0)
DRG524 ;
"RTN","ICD10TB5",31,0)
DRG525 ;
"RTN","ICD10TB5",32,0)
DRG526 ;
"RTN","ICD10TB5",33,0)
DRG527 ;
"RTN","ICD10TB5",34,0)
DRG528 ;
"RTN","ICD10TB5",35,0)
DRG529 ;
"RTN","ICD10TB5",36,0)
DRG530 ;
"RTN","ICD10TB5",37,0)
DRG531 ;
"RTN","ICD10TB5",38,0)
DRG532 ;
"RTN","ICD10TB5",39,0)
 Q
"RTN","ICD10TB5",40,0)
DRG533 ;
"RTN","ICD10TB5",41,0)
DRG534 S ICDRG=$S(ICDMCC=2:533,1:534) Q
"RTN","ICD10TB5",42,0)
DRG535 ;
"RTN","ICD10TB5",43,0)
DRG536 S ICDRG=$S(ICDMCC=2:535,1:536) Q
"RTN","ICD10TB5",44,0)
DRG537 ;
"RTN","ICD10TB5",45,0)
DRG538 S ICDRG=$S(ICDMCC>0:537,1:538) Q
"RTN","ICD10TB5",46,0)
DRG539 ;
"RTN","ICD10TB5",47,0)
DRG540 ;
"RTN","ICD10TB5",48,0)
DRG541 S ICDRG=$S(ICDMCC=2:539,ICDMCC=1:540,1:541) Q
"RTN","ICD10TB5",49,0)
DRG542 ;
"RTN","ICD10TB5",50,0)
DRG543 ;
"RTN","ICD10TB5",51,0)
DRG544 S ICDRG=$S(ICDMCC=2:542,ICDMCC=1:543,1:544) Q
"RTN","ICD10TB5",52,0)
DRG545 ;
"RTN","ICD10TB5",53,0)
DRG546 ;
"RTN","ICD10TB5",54,0)
DRG547 S ICDRG=$S(ICDMCC=2:545,ICDMCC=1:546,1:547) Q
"RTN","ICD10TB5",55,0)
DRG548 ;
"RTN","ICD10TB5",56,0)
DRG549 ;
"RTN","ICD10TB5",57,0)
DRG550 ;
"RTN","ICD10TB5",58,0)
 S ICDRG=$S(ICDMCC=2:548,ICDMCC=1:549,1:550) Q
"RTN","ICD10TB5",59,0)
DRG551 ;
"RTN","ICD10TB5",60,0)
DRG552 S ICDRG=$S(ICDMCC=2:551,1:552) Q
"RTN","ICD10TB5",61,0)
DRG553 ;
"RTN","ICD10TB5",62,0)
DRG554 S ICDRG=$S(ICDMCC=2:553,1:554) Q
"RTN","ICD10TB5",63,0)
DRG555 ;
"RTN","ICD10TB5",64,0)
DRG556 S ICDRG=$S(ICDMCC=2:555,1:556) Q
"RTN","ICD10TB5",65,0)
DRG557 ;
"RTN","ICD10TB5",66,0)
DRG558 S ICDRG=$S(ICDMCC=2:557,1:558) Q
"RTN","ICD10TB5",67,0)
DRG559 ;
"RTN","ICD10TB5",68,0)
DRG560 ;
"RTN","ICD10TB5",69,0)
DRG561 S ICDRG=$S(ICDMCC=2:559,ICDMCC=1:560,1:561) Q
"RTN","ICD10TB5",70,0)
DRG562 ;
"RTN","ICD10TB5",71,0)
DRG563 S ICDRG=$S(ICDMCC=2:562,1:563) Q
"RTN","ICD10TB5",72,0)
DRG564 ;
"RTN","ICD10TB5",73,0)
DRG565 ;
"RTN","ICD10TB5",74,0)
DRG566 S ICDRG=$S(ICDMCC=2:564,ICDMCC=1:565,1:566) Q
"RTN","ICD10TB5",75,0)
DRG567 ;
"RTN","ICD10TB5",76,0)
 Q
"RTN","ICD10TB5",77,0)
DRG568 Q
"RTN","ICD10TB5",78,0)
DRG569 Q
"RTN","ICD10TB5",79,0)
DRG570 ;
"RTN","ICD10TB5",80,0)
DRG571 ;
"RTN","ICD10TB5",81,0)
DRG572 S ICDRG=$S(ICDMCC=2:570,ICDMCC=1:571,1:572) Q
"RTN","ICD10TB5",82,0)
DRG573 ;
"RTN","ICD10TB5",83,0)
DRG574 ;
"RTN","ICD10TB5",84,0)
DRG575 ;
"RTN","ICD10TB5",85,0)
DRG576 ;
"RTN","ICD10TB5",86,0)
DRG577 ;
"RTN","ICD10TB5",87,0)
DRG578 ;
"RTN","ICD10TB5",88,0)
 Q
"RTN","ICD10TB5",89,0)
DRG579 ;
"RTN","ICD10TB5",90,0)
DRG580 ;
"RTN","ICD10TB5",91,0)
DRG581 S ICDRG=$S(ICDMCC=2:579,ICDMCC=1:580,1:581) Q
"RTN","ICD10TB5",92,0)
DRG582 ;
"RTN","ICD10TB5",93,0)
DRG583 ;
"RTN","ICD10TB5",94,0)
 S ICDRG=$S(ICDMCC>0:582,1:583) Q
"RTN","ICD10TB5",95,0)
DRG584 ;
"RTN","ICD10TB5",96,0)
DRG585 ;
"RTN","ICD10TB5",97,0)
 S ICDRG=$S(ICDMCC>0:584,1:585) Q
"RTN","ICD10TB5",98,0)
DRG586 ;
"RTN","ICD10TB5",99,0)
DRG587 ;
"RTN","ICD10TB5",100,0)
DRG588 ;
"RTN","ICD10TB5",101,0)
DRG589 ;
"RTN","ICD10TB5",102,0)
DRG590 ;
"RTN","ICD10TB5",103,0)
DRG591 ;
"RTN","ICD10TB5",104,0)
 Q
"RTN","ICD10TB5",105,0)
DRG592 ;
"RTN","ICD10TB5",106,0)
DRG593 ;
"RTN","ICD10TB5",107,0)
DRG594 S ICDRG=$S(ICDMCC=2:592,ICDMCC=1:593,1:594) Q
"RTN","ICD10TB5",108,0)
DRG595 ;
"RTN","ICD10TB5",109,0)
DRG596 S ICDRG=$S(ICDMCC=2:595,1:596) Q
"RTN","ICD10TB5",110,0)
DRG597 ;
"RTN","ICD10TB5",111,0)
DRG598 ;
"RTN","ICD10TB5",112,0)
DRG599 ;
"RTN","ICD10TB5",113,0)
DRG600 ;
"RTN","ICD10TB5",114,0)
DRG601 ;
"RTN","ICD10TB5",115,0)
 Q
"RTN","ICD10TB6")
0^13^B7217970^n/a
"RTN","ICD10TB6",1,0)
ICD10TB6 ;KUM - GROUPER UTILITY FUNCTIONS;05/04/2012
"RTN","ICD10TB6",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICD10TB6",3,0)
 ;
"RTN","ICD10TB6",4,0)
 ;DRG600 ; D DRG600^ICDTBL6D - See ICD10TB5
"RTN","ICD10TB6",5,0)
 ;DRG601 S ICDRG=$S(ICDMCC>0:600,1:601) Q  - See ICD10TB5
"RTN","ICD10TB6",6,0)
DRG602 ;
"RTN","ICD10TB6",7,0)
DRG603 ;
"RTN","ICD10TB6",8,0)
 S ICDRG=$S(ICDMCC=2:602,1:603) Q
"RTN","ICD10TB6",9,0)
DRG604 ;
"RTN","ICD10TB6",10,0)
DRG605 S ICDRG=$S(ICDMCC=2:604,1:605) Q
"RTN","ICD10TB6",11,0)
DRG606 ;
"RTN","ICD10TB6",12,0)
DRG607 S ICDRG=$S(ICDMCC=2:606,1:607) Q
"RTN","ICD10TB6",13,0)
DRG608 ;
"RTN","ICD10TB6",14,0)
DRG609 ;
"RTN","ICD10TB6",15,0)
DRG610 ;
"RTN","ICD10TB6",16,0)
DRG611 ;
"RTN","ICD10TB6",17,0)
DRG612 ;
"RTN","ICD10TB6",18,0)
DRG613 ;
"RTN","ICD10TB6",19,0)
DRG614 ;
"RTN","ICD10TB6",20,0)
DRG615 S ICDRG=$S(ICDMCC>0:614,1:615) Q
"RTN","ICD10TB6",21,0)
DRG616 ;
"RTN","ICD10TB6",22,0)
DRG617 ;
"RTN","ICD10TB6",23,0)
DRG618 ; 
"RTN","ICD10TB6",24,0)
 S ICDRG=$S(ICDMCC=2:616,ICDMCC=1:617,1:618) Q
"RTN","ICD10TB6",25,0)
DRG619 ;
"RTN","ICD10TB6",26,0)
DRG620 ;
"RTN","ICD10TB6",27,0)
DRG621 ;
"RTN","ICD10TB6",28,0)
 S ICDRG=$S(ICDMCC=2:619,ICDMCC=1:620,1:621) Q
"RTN","ICD10TB6",29,0)
DRG622 ;
"RTN","ICD10TB6",30,0)
DRG623 ;
"RTN","ICD10TB6",31,0)
DRG624 ;
"RTN","ICD10TB6",32,0)
 S ICDRG=$S(ICDMCC=2:622,ICDMCC=1:623,1:624) Q
"RTN","ICD10TB6",33,0)
DRG625 ;
"RTN","ICD10TB6",34,0)
DRG626 ;
"RTN","ICD10TB6",35,0)
DRG627 S ICDRG=$S(ICDMCC=2:625,ICDMCC=1:626,1:627) Q
"RTN","ICD10TB6",36,0)
DRG628 ;
"RTN","ICD10TB6",37,0)
DRG629 ;
"RTN","ICD10TB6",38,0)
DRG630 S ICDRG=$S(ICDMCC=2:628,ICDMCC=1:629,1:630) Q
"RTN","ICD10TB6",39,0)
DRG631 ;
"RTN","ICD10TB6",40,0)
DRG632 ;
"RTN","ICD10TB6",41,0)
DRG633 ;
"RTN","ICD10TB6",42,0)
DRG634 ;
"RTN","ICD10TB6",43,0)
DRG635 ;
"RTN","ICD10TB6",44,0)
DRG636 ;
"RTN","ICD10TB6",45,0)
 Q
"RTN","ICD10TB6",46,0)
DRG637 ;
"RTN","ICD10TB6",47,0)
DRG638 ;
"RTN","ICD10TB6",48,0)
DRG639 S ICDRG=$S(ICDMCC=2:637,ICDMCC=1:638,1:639) Q
"RTN","ICD10TB6",49,0)
DRG640 ;
"RTN","ICD10TB6",50,0)
DRG641 S ICDRG=$S(ICDMCC=2:640,1:641) Q
"RTN","ICD10TB6",51,0)
DRG642 ;
"RTN","ICD10TB6",52,0)
 Q
"RTN","ICD10TB6",53,0)
DRG643 ;
"RTN","ICD10TB6",54,0)
DRG644 ;
"RTN","ICD10TB6",55,0)
DRG645 S ICDRG=$S(ICDMCC=2:643,ICDMCC=1:644,1:645) Q
"RTN","ICD10TB6",56,0)
DRG646 ;
"RTN","ICD10TB6",57,0)
DRG647 ;
"RTN","ICD10TB6",58,0)
DRG648 ;
"RTN","ICD10TB6",59,0)
DRG649 ;
"RTN","ICD10TB6",60,0)
DRG650 ;
"RTN","ICD10TB6",61,0)
DRG651 ;
"RTN","ICD10TB6",62,0)
DRG652 ;
"RTN","ICD10TB6",63,0)
 Q
"RTN","ICD10TB6",64,0)
DRG653 ;
"RTN","ICD10TB6",65,0)
DRG654 ;
"RTN","ICD10TB6",66,0)
DRG655 S ICDRG=$S(ICDMCC=2:653,ICDMCC=1:654,1:655) Q
"RTN","ICD10TB6",67,0)
DRG656 ;
"RTN","ICD10TB6",68,0)
DRG657 ;
"RTN","ICD10TB6",69,0)
DRG658 ;
"RTN","ICD10TB6",70,0)
 Q
"RTN","ICD10TB6",71,0)
DRG659 ;
"RTN","ICD10TB6",72,0)
DRG660 ;
"RTN","ICD10TB6",73,0)
DRG661 ;
"RTN","ICD10TB6",74,0)
 Q
"RTN","ICD10TB6",75,0)
DRG662 ;
"RTN","ICD10TB6",76,0)
DRG663 ;
"RTN","ICD10TB6",77,0)
DRG664 ;
"RTN","ICD10TB6",78,0)
 Q
"RTN","ICD10TB6",79,0)
DRG665 ;
"RTN","ICD10TB6",80,0)
DRG666 ;
"RTN","ICD10TB6",81,0)
DRG667 ; 
"RTN","ICD10TB6",82,0)
 S ICDRG=$S(ICDMCC=2:665,ICDMCC=1:666,1:667) Q
"RTN","ICD10TB6",83,0)
DRG668 ;
"RTN","ICD10TB6",84,0)
DRG669 ;
"RTN","ICD10TB6",85,0)
DRG670 S ICDRG=$S(ICDMCC=2:668,ICDMCC=1:669,1:670) Q
"RTN","ICD10TB6",86,0)
DRG671 ;
"RTN","ICD10TB6",87,0)
DRG672 S ICDRG=$S(ICDMCC>0:671,1:672) Q
"RTN","ICD10TB6",88,0)
DRG673 ;
"RTN","ICD10TB6",89,0)
DRG674 ;
"RTN","ICD10TB6",90,0)
DRG675 S ICDRG=$S(ICDMCC=2:673,ICDMCC=1:674,1:675) Q
"RTN","ICD10TB6",91,0)
DRG676 ;
"RTN","ICD10TB6",92,0)
DRG677 ;
"RTN","ICD10TB6",93,0)
DRG678 ;
"RTN","ICD10TB6",94,0)
DRG679 ;
"RTN","ICD10TB6",95,0)
DRG680 ;
"RTN","ICD10TB6",96,0)
DRG681 ;
"RTN","ICD10TB6",97,0)
 Q
"RTN","ICD10TB6",98,0)
DRG682 ;
"RTN","ICD10TB6",99,0)
DRG683 ;
"RTN","ICD10TB6",100,0)
DRG684 S ICDRG=$S(ICDMCC=2:682,ICDMCC=1:683,1:684) Q
"RTN","ICD10TB6",101,0)
DRG685 ;
"RTN","ICD10TB6",102,0)
 Q
"RTN","ICD10TB6",103,0)
DRG686 ;
"RTN","ICD10TB6",104,0)
DRG687 ;
"RTN","ICD10TB6",105,0)
DRG688 S ICDRG=$S(ICDMCC=2:686,ICDMCC=1:687,1:688) Q
"RTN","ICD10TB6",106,0)
DRG689 ;
"RTN","ICD10TB6",107,0)
DRG690 S ICDRG=$S(ICDMCC=2:689,1:690) Q
"RTN","ICD10TB6",108,0)
DRG691 ;
"RTN","ICD10TB6",109,0)
DRG692 ;
"RTN","ICD10TB6",110,0)
DRG693 ;
"RTN","ICD10TB6",111,0)
DRG694 ;
"RTN","ICD10TB6",112,0)
 Q
"RTN","ICD10TB6",113,0)
DRG695 ;
"RTN","ICD10TB6",114,0)
DRG696 S ICDRG=$S(ICDMCC=2:695,1:696) Q
"RTN","ICD10TB6",115,0)
DRG697 ;
"RTN","ICD10TB6",116,0)
 Q
"RTN","ICD10TB6",117,0)
DRG698 ;
"RTN","ICD10TB6",118,0)
DRG699 ;
"RTN","ICD10TB6",119,0)
DRG700 S ICDRG=$S(ICDMCC=2:698,ICDMCC=1:699,1:700) Q
"RTN","ICD10TB6",120,0)
 Q
"RTN","ICD10TB7")
0^14^B3864507^n/a
"RTN","ICD10TB7",1,0)
ICD10TB7 ;KUM - GROUPER UTILITY FUNCTIONS;05/04/2012
"RTN","ICD10TB7",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICD10TB7",3,0)
 ;
"RTN","ICD10TB7",4,0)
 ;DRG700 ; D DRG700^ICDTBL7D - See ICD10TB6
"RTN","ICD10TB7",5,0)
DRG701 ;
"RTN","ICD10TB7",6,0)
DRG702 ;
"RTN","ICD10TB7",7,0)
DRG703 ;
"RTN","ICD10TB7",8,0)
DRG704 ;
"RTN","ICD10TB7",9,0)
DRG705 ;
"RTN","ICD10TB7",10,0)
DRG706 ;
"RTN","ICD10TB7",11,0)
 Q
"RTN","ICD10TB7",12,0)
DRG707 ;
"RTN","ICD10TB7",13,0)
DRG708 Q
"RTN","ICD10TB7",14,0)
DRG709 ;
"RTN","ICD10TB7",15,0)
DRG710 Q
"RTN","ICD10TB7",16,0)
DRG711 ;
"RTN","ICD10TB7",17,0)
DRG712 Q
"RTN","ICD10TB7",18,0)
DRG713 ;
"RTN","ICD10TB7",19,0)
DRG714 S ICDRG=$S(ICDMCC>0:713,1:714)
"RTN","ICD10TB7",20,0)
 Q
"RTN","ICD10TB7",21,0)
DRG715 ;
"RTN","ICD10TB7",22,0)
DRG716 ;
"RTN","ICD10TB7",23,0)
DRG717 ;
"RTN","ICD10TB7",24,0)
DRG718 ;
"RTN","ICD10TB7",25,0)
 Q
"RTN","ICD10TB7",26,0)
DRG719 ;
"RTN","ICD10TB7",27,0)
DRG720 ;
"RTN","ICD10TB7",28,0)
DRG721 ;
"RTN","ICD10TB7",29,0)
 Q
"RTN","ICD10TB7",30,0)
DRG722 ;
"RTN","ICD10TB7",31,0)
DRG723 ;
"RTN","ICD10TB7",32,0)
DRG724 ;
"RTN","ICD10TB7",33,0)
 Q
"RTN","ICD10TB7",34,0)
DRG725 ;
"RTN","ICD10TB7",35,0)
DRG726 S ICDRG=$S(ICDMCC=2:725,1:726) Q
"RTN","ICD10TB7",36,0)
DRG727 ;
"RTN","ICD10TB7",37,0)
DRG728 ;
"RTN","ICD10TB7",38,0)
 S ICDRG=$S(ICDMCC=2:727,1:728) Q
"RTN","ICD10TB7",39,0)
DRG729 ;
"RTN","ICD10TB7",40,0)
DRG730 S ICDRG=$S(ICDMCC>0:729,1:730) Q
"RTN","ICD10TB7",41,0)
DRG734 ;
"RTN","ICD10TB7",42,0)
DRG735 ;
"RTN","ICD10TB7",43,0)
 Q
"RTN","ICD10TB7",44,0)
DRG736 ;
"RTN","ICD10TB7",45,0)
DRG737 ;
"RTN","ICD10TB7",46,0)
DRG738 ;
"RTN","ICD10TB7",47,0)
DRG739 ;
"RTN","ICD10TB7",48,0)
DRG740 ;
"RTN","ICD10TB7",49,0)
DRG741 ;
"RTN","ICD10TB7",50,0)
 Q
"RTN","ICD10TB7",51,0)
DRG742 ;
"RTN","ICD10TB7",52,0)
DRG743 ;
"RTN","ICD10TB7",53,0)
 S ICDRG=$S(ICDMCC>0:742,1:743) Q
"RTN","ICD10TB7",54,0)
DRG744 ;
"RTN","ICD10TB7",55,0)
DRG745 S ICDRG=$S(ICDMCC>0:744,1:745) Q
"RTN","ICD10TB7",56,0)
 Q
"RTN","ICD10TB7",57,0)
DRG746 ;
"RTN","ICD10TB7",58,0)
DRG747 Q
"RTN","ICD10TB7",59,0)
DRG748 ;
"RTN","ICD10TB7",60,0)
 Q
"RTN","ICD10TB7",61,0)
DRG749 ;
"RTN","ICD10TB7",62,0)
DRG750 ;
"RTN","ICD10TB7",63,0)
 Q
"RTN","ICD10TB7",64,0)
DRG751 ;
"RTN","ICD10TB7",65,0)
DRG752 ;
"RTN","ICD10TB7",66,0)
DRG753 ;
"RTN","ICD10TB7",67,0)
 Q
"RTN","ICD10TB7",68,0)
DRG754 ;
"RTN","ICD10TB7",69,0)
DRG755 ;
"RTN","ICD10TB7",70,0)
DRG756 ;
"RTN","ICD10TB7",71,0)
 Q
"RTN","ICD10TB7",72,0)
DRG757 ;
"RTN","ICD10TB7",73,0)
DRG758 ;
"RTN","ICD10TB7",74,0)
DRG759 ;
"RTN","ICD10TB7",75,0)
 S ICDRG=$S(ICDMCC=2:757,ICDMCC=1:758,1:759) Q
"RTN","ICD10TB7",76,0)
DRG760 ;
"RTN","ICD10TB7",77,0)
DRG761 S ICDRG=$S(ICDMCC>0:760,1:761) Q
"RTN","ICD10TB7",78,0)
DRG762 ;
"RTN","ICD10TB7",79,0)
DRG763 ;
"RTN","ICD10TB7",80,0)
DRG764 ;
"RTN","ICD10TB7",81,0)
DRG765 ;
"RTN","ICD10TB7",82,0)
DRG766 ;
"RTN","ICD10TB7",83,0)
 Q
"RTN","ICD10TB7",84,0)
DRG767 ;
"RTN","ICD10TB7",85,0)
DRG768 ;
"RTN","ICD10TB7",86,0)
 Q
"RTN","ICD10TB7",87,0)
DRG769 ;
"RTN","ICD10TB7",88,0)
DRG770 ;
"RTN","ICD10TB7",89,0)
DRG771 ;
"RTN","ICD10TB7",90,0)
DRG772 ;
"RTN","ICD10TB7",91,0)
DRG773 ;
"RTN","ICD10TB7",92,0)
DRG774 ;
"RTN","ICD10TB7",93,0)
DRG775 ;
"RTN","ICD10TB7",94,0)
DRG776 ;
"RTN","ICD10TB7",95,0)
DRG777 ;
"RTN","ICD10TB7",96,0)
DRG778 ;
"RTN","ICD10TB7",97,0)
DRG779 ;
"RTN","ICD10TB7",98,0)
DRG780 ;
"RTN","ICD10TB7",99,0)
DRG781 ;
"RTN","ICD10TB7",100,0)
DRG782 ;
"RTN","ICD10TB7",101,0)
DRG789 ;
"RTN","ICD10TB7",102,0)
DRG790 ;Q
"RTN","ICD10TB7",103,0)
 Q
"RTN","ICD10TB7",104,0)
DRG791 ;
"RTN","ICD10TB7",105,0)
DRG792 ;
"RTN","ICD10TB7",106,0)
 S ICDRG=$S($D(ICD10OR(290))!$D(ICD10SD("J")):791,1:792)
"RTN","ICD10TB7",107,0)
DRG793 ;
"RTN","ICD10TB7",108,0)
DRG794 ;
"RTN","ICD10TB7",109,0)
DRG795 ;
"RTN","ICD10TB7",110,0)
DRG796 ;
"RTN","ICD10TB7",111,0)
 Q
"RTN","ICD10TB7",112,0)
DRG799 ;
"RTN","ICD10TB7",113,0)
DRG800 ;
"RTN","ICD10TB7",114,0)
DRG801 ;
"RTN","ICD10TB7",115,0)
 Q
"RTN","ICD10TB8")
0^15^B7326303^n/a
"RTN","ICD10TB8",1,0)
ICD10TB8 ;KUM - GROUPER UTILITY FUNCTIONS;05/04/2012
"RTN","ICD10TB8",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICD10TB8",3,0)
 ;
"RTN","ICD10TB8",4,0)
 ;DRG800 ; D DRG800^ICDTBL8D - See ICD10TB7
"RTN","ICD10TB8",5,0)
 ;DRG801 S ICDRG=$S(ICDMCC=2:799,ICDMCC=1:800,1:801) Q  - See ICD10TB7
"RTN","ICD10TB8",6,0)
DRG802 ;
"RTN","ICD10TB8",7,0)
DRG803 ;
"RTN","ICD10TB8",8,0)
DRG804 S ICDRG=$S(ICDMCC=2:802,ICDMCC=1:803,1:804) Q
"RTN","ICD10TB8",9,0)
DRG805 ;
"RTN","ICD10TB8",10,0)
DRG806 ;
"RTN","ICD10TB8",11,0)
DRG807 ;
"RTN","ICD10TB8",12,0)
 Q
"RTN","ICD10TB8",13,0)
DRG808 ;
"RTN","ICD10TB8",14,0)
DRG809 ;
"RTN","ICD10TB8",15,0)
DRG810 S ICDRG=$S(ICDMCC=2:808,ICDMCC=1:809,1:810) Q
"RTN","ICD10TB8",16,0)
DRG811 ;
"RTN","ICD10TB8",17,0)
DRG812 S ICDRG=$S(ICDMCC=2:811,1:812) Q
"RTN","ICD10TB8",18,0)
DRG813 ;
"RTN","ICD10TB8",19,0)
 Q
"RTN","ICD10TB8",20,0)
DRG814 ;
"RTN","ICD10TB8",21,0)
DRG815 ;
"RTN","ICD10TB8",22,0)
DRG816 S ICDRG=$S(ICDMCC=2:814,ICDMCC=1:815,1:816) Q
"RTN","ICD10TB8",23,0)
DRG817 ;
"RTN","ICD10TB8",24,0)
DRG818 ;
"RTN","ICD10TB8",25,0)
DRG819 ;
"RTN","ICD10TB8",26,0)
 Q
"RTN","ICD10TB8",27,0)
DRG820 ;
"RTN","ICD10TB8",28,0)
DRG821 ;
"RTN","ICD10TB8",29,0)
DRG822 ;
"RTN","ICD10TB8",30,0)
 Q
"RTN","ICD10TB8",31,0)
DRG823 ;
"RTN","ICD10TB8",32,0)
DRG824 ;
"RTN","ICD10TB8",33,0)
DRG825 ;
"RTN","ICD10TB8",34,0)
 Q
"RTN","ICD10TB8",35,0)
DRG826 ;
"RTN","ICD10TB8",36,0)
DRG827 ;
"RTN","ICD10TB8",37,0)
DRG828 ;
"RTN","ICD10TB8",38,0)
DRG829 ;
"RTN","ICD10TB8",39,0)
DRG830 ;
"RTN","ICD10TB8",40,0)
 Q
"RTN","ICD10TB8",41,0)
DRG831 ;
"RTN","ICD10TB8",42,0)
DRG832 ;
"RTN","ICD10TB8",43,0)
DRG833 ;
"RTN","ICD10TB8",44,0)
 Q
"RTN","ICD10TB8",45,0)
DRG834 ;
"RTN","ICD10TB8",46,0)
DRG835 ;
"RTN","ICD10TB8",47,0)
DRG836 ;
"RTN","ICD10TB8",48,0)
 Q
"RTN","ICD10TB8",49,0)
DRG837 ;
"RTN","ICD10TB8",50,0)
DRG838 ;
"RTN","ICD10TB8",51,0)
DRG839 ;
"RTN","ICD10TB8",52,0)
 Q
"RTN","ICD10TB8",53,0)
DRG840 ;
"RTN","ICD10TB8",54,0)
DRG841 ;
"RTN","ICD10TB8",55,0)
DRG842 ;
"RTN","ICD10TB8",56,0)
 S ICDRG=$S(ICDMCC=2:840,ICDMCC=1:841,1:842)
"RTN","ICD10TB8",57,0)
DRG843 ;
"RTN","ICD10TB8",58,0)
DRG844 ;
"RTN","ICD10TB8",59,0)
DRG845 ;
"RTN","ICD10TB8",60,0)
 Q
"RTN","ICD10TB8",61,0)
DRG846 ;
"RTN","ICD10TB8",62,0)
DRG847 ;
"RTN","ICD10TB8",63,0)
DRG848 ;
"RTN","ICD10TB8",64,0)
 S ICDRG=$S(ICDMCC=2:846,ICDMCC=1:847,1:848) Q
"RTN","ICD10TB8",65,0)
DRG849 ;
"RTN","ICD10TB8",66,0)
DRG850 ;
"RTN","ICD10TB8",67,0)
DRG851 ;
"RTN","ICD10TB8",68,0)
DRG852 ;
"RTN","ICD10TB8",69,0)
 Q
"RTN","ICD10TB8",70,0)
DRG853 ;
"RTN","ICD10TB8",71,0)
DRG854 ;
"RTN","ICD10TB8",72,0)
DRG855  ;
"RTN","ICD10TB8",73,0)
 Q
"RTN","ICD10TB8",74,0)
DRG856 ;
"RTN","ICD10TB8",75,0)
DRG857 ;
"RTN","ICD10TB8",76,0)
DRG858 ;
"RTN","ICD10TB8",77,0)
 Q
"RTN","ICD10TB8",78,0)
DRG859 ;
"RTN","ICD10TB8",79,0)
DRG860 ;
"RTN","ICD10TB8",80,0)
DRG861 ;
"RTN","ICD10TB8",81,0)
 Q
"RTN","ICD10TB8",82,0)
DRG862 ;
"RTN","ICD10TB8",83,0)
DRG863 ;
"RTN","ICD10TB8",84,0)
 S ICDRG=$S(ICDMCC=2:862,1:863) Q
"RTN","ICD10TB8",85,0)
DRG864 ;
"RTN","ICD10TB8",86,0)
 Q
"RTN","ICD10TB8",87,0)
DRG865 ;
"RTN","ICD10TB8",88,0)
DRG866 ;
"RTN","ICD10TB8",89,0)
 S ICDRG=$S(ICDMCC=2:865,1:866) Q
"RTN","ICD10TB8",90,0)
DRG867 ;
"RTN","ICD10TB8",91,0)
DRG868 ;
"RTN","ICD10TB8",92,0)
DRG869 S ICDRG=$S(ICDMCC=2:867,ICDMCC=1:868,1:869) Q
"RTN","ICD10TB8",93,0)
DRG870 ;
"RTN","ICD10TB8",94,0)
DRG871 ;
"RTN","ICD10TB8",95,0)
DRG872 ;
"RTN","ICD10TB8",96,0)
 Q
"RTN","ICD10TB8",97,0)
DRG876 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",98,0)
 Q
"RTN","ICD10TB8",99,0)
DRG880 S ICDRG=880 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",100,0)
 Q
"RTN","ICD10TB8",101,0)
DRG881 S ICDRG=881 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",102,0)
 Q
"RTN","ICD10TB8",103,0)
DRG882 S ICDRG=882 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",104,0)
 Q
"RTN","ICD10TB8",105,0)
DRG883 S ICDRG=883 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",106,0)
 Q
"RTN","ICD10TB8",107,0)
DRG884 S ICDRG=884 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",108,0)
 Q
"RTN","ICD10TB8",109,0)
DRG885 S ICDRG=885 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",110,0)
 Q
"RTN","ICD10TB8",111,0)
DRG886 S ICDRG=886 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",112,0)
 Q
"RTN","ICD10TB8",113,0)
DRG887 S ICDRG=887 I $D(ICD10OR("O")) S ICDRG=876 Q
"RTN","ICD10TB8",114,0)
 Q
"RTN","ICD10TB8",115,0)
DRG888 ;
"RTN","ICD10TB8",116,0)
DRG889 ;
"RTN","ICD10TB8",117,0)
DRG890 ;
"RTN","ICD10TB8",118,0)
DRG891 ;
"RTN","ICD10TB8",119,0)
DRG892 ;
"RTN","ICD10TB8",120,0)
DRG893 ;
"RTN","ICD10TB8",121,0)
DRG894 ;
"RTN","ICD10TB8",122,0)
 Q
"RTN","ICD10TB8",123,0)
DRG895 ;
"RTN","ICD10TB8",124,0)
DRG896 ;
"RTN","ICD10TB8",125,0)
DRG897 ;
"RTN","ICD10TB8",126,0)
 Q
"RTN","ICD10TB8",127,0)
DRG898 ;
"RTN","ICD10TB8",128,0)
DRG899 ;
"RTN","ICD10TB8",129,0)
DRG900 ;
"RTN","ICD10TB8",130,0)
 Q
"RTN","ICD10TB9")
0^16^B3049940^n/a
"RTN","ICD10TB9",1,0)
ICD10TB9 ;KUM - GROUPER UTILITY FUNCTIONS;05/04/2012
"RTN","ICD10TB9",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICD10TB9",3,0)
 ;
"RTN","ICD10TB9",4,0)
DRG901 ;
"RTN","ICD10TB9",5,0)
DRG902 ;
"RTN","ICD10TB9",6,0)
DRG903 ;
"RTN","ICD10TB9",7,0)
 Q
"RTN","ICD10TB9",8,0)
DRG904 ;
"RTN","ICD10TB9",9,0)
DRG905 ;
"RTN","ICD10TB9",10,0)
 Q
"RTN","ICD10TB9",11,0)
DRG906 Q
"RTN","ICD10TB9",12,0)
DRG907 ;
"RTN","ICD10TB9",13,0)
DRG908 ;
"RTN","ICD10TB9",14,0)
DRG909 S ICDRG=$S(ICDMCC=2:907,ICDMCC=1:908,1:909) Q
"RTN","ICD10TB9",15,0)
DRG910 ;
"RTN","ICD10TB9",16,0)
DRG911 ;
"RTN","ICD10TB9",17,0)
DRG912 ;
"RTN","ICD10TB9",18,0)
 Q
"RTN","ICD10TB9",19,0)
DRG913 ;
"RTN","ICD10TB9",20,0)
DRG914 S ICDRG=$S(ICDMCC=2:913,1:914) Q
"RTN","ICD10TB9",21,0)
DRG915 ;
"RTN","ICD10TB9",22,0)
DRG916 S ICDRG=$S(ICDMCC=2:915,1:916) Q
"RTN","ICD10TB9",23,0)
DRG917 ;
"RTN","ICD10TB9",24,0)
DRG918 S ICDRG=$S(ICDMCC=2:917,1:918) Q
"RTN","ICD10TB9",25,0)
DRG919 ;
"RTN","ICD10TB9",26,0)
DRG920 ;
"RTN","ICD10TB9",27,0)
DRG921 ;
"RTN","ICD10TB9",28,0)
 Q
"RTN","ICD10TB9",29,0)
DRG922 ;
"RTN","ICD10TB9",30,0)
DRG923 S ICDRG=$S(ICDMCC=2:922,1:923) Q
"RTN","ICD10TB9",31,0)
DRG927 ;
"RTN","ICD10TB9",32,0)
DRG933 Q
"RTN","ICD10TB9",33,0)
DRG928 ;
"RTN","ICD10TB9",34,0)
DRG929 ;
"RTN","ICD10TB9",35,0)
DRG934 Q
"RTN","ICD10TB9",36,0)
DRG935 ;
"RTN","ICD10TB9",37,0)
DRG939 ;
"RTN","ICD10TB9",38,0)
DRG940 ;
"RTN","ICD10TB9",39,0)
DRG941 ;
"RTN","ICD10TB9",40,0)
 Q
"RTN","ICD10TB9",41,0)
DRG945 ;
"RTN","ICD10TB9",42,0)
DRG946 ;
"RTN","ICD10TB9",43,0)
 Q
"RTN","ICD10TB9",44,0)
DRG947 ;
"RTN","ICD10TB9",45,0)
DRG948 S ICDRG=$S(ICDMCC=2:947,1:948) Q
"RTN","ICD10TB9",46,0)
DRG949 ;
"RTN","ICD10TB9",47,0)
DRG950 ;
"RTN","ICD10TB9",48,0)
 S ICDRG=$S(ICDMCC>0:949,1:950) Q
"RTN","ICD10TB9",49,0)
DRG951 Q
"RTN","ICD10TB9",50,0)
DRG955 Q
"RTN","ICD10TB9",51,0)
DRG956 Q
"RTN","ICD10TB9",52,0)
DRG957 ;
"RTN","ICD10TB9",53,0)
DRG958 ;
"RTN","ICD10TB9",54,0)
DRG959 S ICDRG=$S(ICDMCC=2:957,ICDMCC=1:958,1:959) Q
"RTN","ICD10TB9",55,0)
DRG963 ;
"RTN","ICD10TB9",56,0)
DRG964 ;
"RTN","ICD10TB9",57,0)
DRG965 S ICDRG=$S(ICDMCC=2:963,ICDMCC=1:964,1:965) Q
"RTN","ICD10TB9",58,0)
DRG969 ;
"RTN","ICD10TB9",59,0)
DRG970 S ICDRG=$S(ICDMCC=2:969,1:970) Q
"RTN","ICD10TB9",60,0)
DRG974 ;
"RTN","ICD10TB9",61,0)
DRG975 ;
"RTN","ICD10TB9",62,0)
DRG976 S ICDRG=$S(ICDMCC=2:974,ICDMCC=1:975,1:976) Q
"RTN","ICD10TB9",63,0)
DRG977 S ICDRG=977 Q
"RTN","ICD10TB9",64,0)
DRG981 ;
"RTN","ICD10TB9",65,0)
DRG982 ;
"RTN","ICD10TB9",66,0)
DRG983 ;
"RTN","ICD10TB9",67,0)
 S ICDRG=$S(ICDMCC=2:981,ICDMCC=1:982,1:983) Q
"RTN","ICD10TB9",68,0)
DRG984 ;
"RTN","ICD10TB9",69,0)
DRG985 ;
"RTN","ICD10TB9",70,0)
DRG986 ;
"RTN","ICD10TB9",71,0)
DRG987 ;
"RTN","ICD10TB9",72,0)
DRG988 ;
"RTN","ICD10TB9",73,0)
DRG989 ;
"RTN","ICD10TB9",74,0)
DRG998 ;
"RTN","ICD10TB9",75,0)
DRG999 ;
"RTN","ICD10TB9",76,0)
 Q
"RTN","ICD1864A")
0^86^B168364316^n/a
"RTN","ICD1864A",1,0)
ICD1864A ;ALB/MN/SS - POST INSTALL ROUTINE;APR 02, 2012
"RTN","ICD1864A",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICD1864A",3,0)
 ;
"RTN","ICD1864A",4,0)
 Q
"RTN","ICD1864A",5,0)
 ;
"RTN","ICD1864A",6,0)
PRE ;delete DD and data
"RTN","ICD1864A",7,0)
 ;if previously installed then delete files 80.5,80.6,82.11,82.12
"RTN","ICD1864A",8,0)
 I $$PATCH^XPDUTL("ICD*18.0*64") D DELFILES^ICD1864B
"RTN","ICD1864A",9,0)
 Q
"RTN","ICD1864A",10,0)
 ;
"RTN","ICD1864A",11,0)
POST ;
"RTN","ICD1864A",12,0)
 N ICDX,ICDY,ICDHIST,ICDCSYS,ICDIEN,ICDPRE,ICDST,ICDCODE,ICDR,ICDEFF,ICDDX9,ICDDTTX,ICDF,ICDMDCF,ICDVAR,ICDCC
"RTN","ICD1864A",13,0)
 N ICDSTA,ICDI,ICDMIEN,ICDRGIEN,ICDFN,ICDDESC,ICDIX,ICDSTOP,ICDFILE,ICDFILE2,ICDAIDA,ICDMULT,ICDDAP,ICDCCMCC,ICDCCIEN
"RTN","ICD1864A",14,0)
 N ICDPDX,ICD103,ICD40,ICD14,ICD40IEN,ICD73IEN,ICD82,ICD821,ICD82T,ICDA,ICDB,ICDBLIEN,ICDBLK,ICDC,ICDCT,ICDDA,ICDDRGS,ICDDXCC
"RTN","ICD1864A",15,0)
 N ICDDXIEN,ICDEXCL,ICDEXIEN,ICDF2,ICDFI,ICDFILE,ICDFILE1,ICDFILE2,ICDFILE3,ICDFILE4,ICDFLAG,ICDFR,ICDFT,ICDMAC,ICDIEN2
"RTN","ICD1864A",16,0)
 N ICDLET,ICDMDDRG,ICDMDIEN,ICDONEI,ICDORCD,ICDOWN,ICDPCS,ICDPRIEN,ICDPRIM,ICDREC,ICDTO,ICDTY,ICDWIDTH,ICDXIEN,ICDYES,ICDWITH
"RTN","ICD1864A",17,0)
 N ICDN,ICDX,ICDIEN,ICDIEN9,ICDDX,ICDDAIEN,ICDFDA,ICDERR,ICDI,ICDDRG,ICDMDC,ICDBAD,ICDIDEN,ICDDX9,ICDMDC,ICDMDC24,ICDMDC25,ICDDRGN
"RTN","ICD1864A",18,0)
 N ICDORD,ICDDRG,ICDCC,ICDHAC,ICDA,ICDSUM,ICD73,DIK ;64 FIX
"RTN","ICD1864A",19,0)
 S U="^"
"RTN","ICD1864A",20,0)
 I $G(XPDQUES("POS1"))=0 S XPDABORT=1,XPDQUIT=1,XPDQUIT("ICD*18.0*64")=1 D BMES^XPDUTL("Load was aborted by the user.") Q
"RTN","ICD1864A",21,0)
 I $G(XPDQUES("POS3"))=0 S XPDABORT=1,XPDQUIT=1,XPDQUIT("ICD*18.0*64")=1 D BMES^XPDUTL("DRG load was aborted by the user.") Q
"RTN","ICD1864A",22,0)
 D BMES^XPDUTL("Starting DRG load...")
"RTN","ICD1864A",23,0)
 D UPDATING
"RTN","ICD1864A",24,0)
 D CLEANUP^ICD1864B
"RTN","ICD1864A",25,0)
 D BMES^XPDUTL("DRG data has been loaded. Messages are in the file #9.7 IEN "_XPDA)
"RTN","ICD1864A",26,0)
 Q
"RTN","ICD1864A",27,0)
 ;
"RTN","ICD1864A",28,0)
UPDATING ;
"RTN","ICD1864A",29,0)
 ;
"RTN","ICD1864A",30,0)
 S ICDN=0,DIK="^ICDID(" F  S ICDN=$O(^ICDID(ICDN)) Q:'ICDN  S DA=ICDN D ^DIK
"RTN","ICD1864A",31,0)
 S ICDN=0,DIK="^ICDIP(" F  S ICDN=$O(^ICDIP(ICDN)) Q:'ICDN  S DA=ICDN D ^DIK
"RTN","ICD1864A",32,0)
 K ^TMP("ICDDRGLD",$J),ICDSUM
"RTN","ICD1864A",33,0)
 S ICDEFF=$$IMPDATE^LEXU("10D") I $P(ICDEFF,U,1)=-1 D BMES^XPDUTL("Bad Implementation Date: "_ICDEFF_" Aborting.") Q
"RTN","ICD1864A",34,0)
 D UP82
"RTN","ICD1864A",35,0)
 D UP82ADD
"RTN","ICD1864A",36,0)
 D UP80
"RTN","ICD1864A",37,0)
 D UP801
"RTN","ICD1864A",38,0)
 D UPID10
"RTN","ICD1864A",39,0)
 D UP802
"RTN","ICD1864A",40,0)
 D UP805
"RTN","ICD1864A",41,0)
 D UP806
"RTN","ICD1864A",42,0)
 D UP8211^ICD1864B
"RTN","ICD1864A",43,0)
 D UP8211B^ICD1864B
"RTN","ICD1864A",44,0)
 D UP8213^ICD1864B
"RTN","ICD1864A",45,0)
 D MAJOROR^ICD1864B
"RTN","ICD1864A",46,0)
 K ^TMP("ICDDRGLD",$J)
"RTN","ICD1864A",47,0)
 Q
"RTN","ICD1864A",48,0)
 ;
"RTN","ICD1864A",49,0)
UP80 ;
"RTN","ICD1864A",50,0)
 ;Load file #80 - Appendix B
"RTN","ICD1864A",51,0)
 D BMES^XPDUTL("Starting File #80 "_$$DTTIME)
"RTN","ICD1864A",52,0)
 S ICDN="",U="^"
"RTN","ICD1864A",53,0)
 F  S ICDN=$O(^ICDLOAD(80,"A",ICDN)) Q:ICDN=""  S ICDX=^ICDLOAD(80,"A",ICDN),ICDDX=$P(ICDX,U,1),ICDIEN=$O(^ICD9("BA",ICDDX_" ","")) D
"RTN","ICD1864A",54,0)
 .I ICDIEN="" D BMES^XPDUTL("ICD Code: "_ICDDX_" not in file #80") S ICDSUM(80,"B")=$G(ICDSUM(80,"B"))+1 Q
"RTN","ICD1864A",55,0)
 .I '$D(^ICD9(ICDIEN,0)) D BMES^XPDUTL("ICD Code: "_ICDDX_" bad x-ref IEN: "_ICDIEN) S ICDSUM(80,"B")=$G(ICDSUM(80,"B"))+1 Q
"RTN","ICD1864A",56,0)
 .S ^TMP("ICDDRGLD",$J)="80: "_ICDDX_" "_ICDIEN,ICDSUM(80,"G")=$G(ICDSUM(80,"G"))+1
"RTN","ICD1864A",57,0)
 .S ICD73=0 F  S ICD73=$O(^ICD9(ICDIEN,73,ICD73)) Q:'ICD73  K DA S DA=ICD73,DA(1)=ICDIEN,DIK="^ICD9("_DA(1)_",73," D ^DIK
"RTN","ICD1864A",58,0)
 .S ICDDAIEN=$O(^ICD9(ICDIEN,3,"B",ICDEFF,"")) I 'ICDDAIEN D
"RTN","ICD1864A",59,0)
 ..K ICDFDA S ICDFDA("80.071","+1,"_ICDIEN_",",.01)=ICDEFF K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",60,0)
 ..S ICDDAIEN=$O(^ICD9(ICDIEN,3,"B",ICDEFF,""))
"RTN","ICD1864A",61,0)
 .I ICDDAIEN S ICDDRGS=$P(ICDX,U,3) I ICDDRGS'="" S ICDFR=+$P(ICDDRGS,"-",1),ICDTO=+$P(ICDDRGS,"-",2) S:ICDTO=0 ICDTO=ICDFR F ICDDRG=ICDFR:1:ICDTO D:$O(^ICD9(ICDIEN,3,ICDDAIEN,1,"B",ICDDRG,""))=""
"RTN","ICD1864A",62,0)
 ..I $O(^ICD("B","DRG"_ICDDRG,""))="" D BMES^XPDUTL(ICDDX_" Grouper Code: "_ICDDRG_" not in file #80.2") Q
"RTN","ICD1864A",63,0)
 ..K ICDFDA S ICDFDA("80.711","+1,"_ICDDAIEN_","_ICDIEN_",",.01)=ICDDRG K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",64,0)
 .S ICDMDC=+$P(ICDX,U,2) I ICDMDC>0 I '$D(^ICM(ICDMDC,0)) D BMES^XPDUTL(ICDDX_" MDC Code: "_ICDDRG_" not in file #80.3") Q
"RTN","ICD1864A",65,0)
 .S ICDDX9=$O(^ICDLOAD("GEM-10-9",ICDDX,"")),ICDIEN9=0 I ICDDX9'="" S ICDIEN9=^ICDLOAD("GEM-10-9",ICDDX,ICDDX9)
"RTN","ICD1864A",66,0)
 .I ICDIEN9 D
"RTN","ICD1864A",67,0)
 ..;Next block copies MDC13, MDC24, MDC25 from ICD-9 record to ICD-10 record
"RTN","ICD1864A",68,0)
 ..F ICDF=1:1:3 S ICDMDCF="1."_(ICDF+3) K ICDFDA D  K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",69,0)
 ...S ICDVAR=$P($G(^ICD9(ICDIEN9,1)),U,ICDF+3)
"RTN","ICD1864A",70,0)
 ...I ICDF=1 D
"RTN","ICD1864A",71,0)
 ....I $D(^ICDLOAD("MDC13","DX",ICDDX)) S ICDVAR=13
"RTN","ICD1864A",72,0)
 ....I $D(^ICDLOAD("MDC12","DX",ICDDX)) S ICDVAR=""
"RTN","ICD1864A",73,0)
 ...I ICDF=2,$D(^ICDLOAD("MDC24","DX",ICDDX)) S ICDVAR=^ICDLOAD("MDC24","DX",ICDDX)
"RTN","ICD1864A",74,0)
 ...I ICDF=3,$D(^ICDLOAD("MDC25","DX",ICDDX)) S ICDVAR=$P(^ICDLOAD("MDC25","DX",ICDDX),U,1)
"RTN","ICD1864A",75,0)
 ...S ICDFDA(80,ICDIEN_",",ICDMDCF)=ICDVAR
"RTN","ICD1864A",76,0)
 .;Set Field #80,1.9 POA Exempt
"RTN","ICD1864A",77,0)
 .K ICDFDA,ICDERR S ICDFDA(80,ICDIEN_",",1.9)=$S($D(^ICDLOAD("APPJ",ICDDX)):1,1:0) D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",78,0)
 .;Next block updates #80,72 - Effective Date multiple with MDC
"RTN","ICD1864A",79,0)
 .S ICDDAIEN=$O(^ICD9(ICDIEN,4,"B",ICDEFF,"")) I 'ICDDAIEN D
"RTN","ICD1864A",80,0)
 ..K ICDFDA S ICDFDA("80.072","+1,"_ICDIEN_",",.01)=ICDEFF K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",81,0)
 .S ICDDAIEN=$O(^ICD9(ICDIEN,4,"B",ICDEFF,"")) I ICDDAIEN D
"RTN","ICD1864A",82,0)
 ..K ICDFDA S ICDFDA("80.072",ICDDAIEN_","_ICDIEN_",",1)=ICDMDC K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",83,0)
 .;Next block update new Field #80,0103.1 CC and #80,0103,2 PRIMARY
"RTN","ICD1864A",84,0)
 .S ICD103=$O(^ICD9(ICDIEN,69,"B",ICDEFF,"")) I ICD103="" D
"RTN","ICD1864A",85,0)
 ..K ICDFDA,ICDERR S ICDFDA(80.0103,"+1,"_ICDIEN_",",.01)=ICDEFF D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",86,0)
 ..S ICD103=$O(^ICD9(ICDIEN,69,"B",ICDEFF,""))
"RTN","ICD1864A",87,0)
 .S ICDOWN=0 I $D(^ICDLOAD("APPG","PDXOWNCC",ICDDX))!($D(^ICDLOAD("APPH","PDXOWNMCC",ICDDX))) S ICDOWN=1
"RTN","ICD1864A",88,0)
 .;S ICDCC=$P($G(^ICDLOAD("APPC","DX",ICDDX)),U,1),ICDCC=$S(ICDCC="CC":1,ICDCC="MCC":2,1:0)
"RTN","ICD1864A",89,0)
 .;GET ICDCC VALUE FROM ICD9 GLOBAL INSTEAD OF CMS WEBSITE
"RTN","ICD1864A",90,0)
 .I $D(^ICDLOAD("APPH","MCCIFALIVE",ICDDX)) S ICDCC=3 K ICDFDA,ICDERR S ICDFDA(80.0103,ICD103_","_ICDIEN_",",1)=ICDCC D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",91,0)
 .K ICDFDA,ICDERR S ICDFDA(80.0103,ICD103_","_ICDIEN_",",2)=ICDOWN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",92,0)
 .;Next block loads the ICD-9 Identifier field to put in the ICD-10 code 1.2 field
"RTN","ICD1864A",93,0)
 .S ICDIDEN="" S:ICDIEN9 ICDIDEN=$P($G(^ICD9(ICDIEN9,1)),U,2)
"RTN","ICD1864A",94,0)
 .K ICDFDA S ICDFDA(80,ICDIEN_",",1.2)=ICDIDEN K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",95,0)
 .;Set new field #80,73 with Identifiers from #80,1.2
"RTN","ICD1864A",96,0)
 .I ICDIDEN'="" F ICDLET=1:1:$L(ICDIDEN) D 8073(80,ICDDX,$E(ICDIDEN,ICDLET)) ;Update new 80,73 multiple with ICD-10 Identifier codes
"RTN","ICD1864A",97,0)
 Q
"RTN","ICD1864A",98,0)
 ;
"RTN","ICD1864A",99,0)
UP801 ;
"RTN","ICD1864A",100,0)
 ;#80.1 Appendix E
"RTN","ICD1864A",101,0)
 D BMES^XPDUTL("Starting #80.1 "_$$DTTIME)
"RTN","ICD1864A",102,0)
 S ICDN="",U="^"
"RTN","ICD1864A",103,0)
 F  S ICDN=$O(^ICDLOAD(80.1,"A",ICDN)) Q:ICDN=""  S ICDREC=^ICDLOAD(80.1,"A",ICDN),ICDDX=$P(ICDREC,U,1),ICDIEN=$O(^ICD0("BA",ICDDX_" ","")) D
"RTN","ICD1864A",104,0)
 .I ICDIEN="" D BMES^XPDUTL("ICD Procedure Code: "_ICDDX_" not in file #80.1") S ICDSUM(80.1,"B")=$G(ICDSUM(80.1,"B"))+1 Q
"RTN","ICD1864A",105,0)
 .I '$D(^ICD0(ICDIEN,0)) D BMES^XPDUTL("ICD Procedure Code: "_ICDDX_" bad x-ref IEN: "_ICDIEN) S ICDSUM(80.1,"B")=$G(ICDSUM(80.1,"B"))+1 Q
"RTN","ICD1864A",106,0)
 .S ^TMP("ICDDRGLD",$J)="80.1: "_ICDDX_" "_ICDIEN,ICDSUM(80.1,"G")=$G(ICDSUM(80.1,"G"))+1
"RTN","ICD1864A",107,0)
 .S ICD73=0 F  S ICD73=$O(^ICD0(ICDIEN,73,ICD73)) Q:'ICD73  K DA S DA=ICD73,DA(1)=ICDIEN,DIK="^ICD0("_DA(1)_",73," D ^DIK
"RTN","ICD1864A",108,0)
 .S ICDDAIEN=$O(^ICD0(ICDIEN,2,"B",ICDEFF,"")) I 'ICDDAIEN D
"RTN","ICD1864A",109,0)
 ..;Create Eff. Date entry
"RTN","ICD1864A",110,0)
 ..K ICDFDA S ICDFDA("80.171","+1,"_ICDIEN_",",.01)=ICDEFF K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",111,0)
 ..S ICDDAIEN=$O(^ICD0(ICDIEN,2,"B",ICDEFF,""))
"RTN","ICD1864A",112,0)
 .S ICDMIEN=0 I ICDDAIEN S ICDMDC=+$P(ICDREC,U,2),ICDMIEN=$O(^ICD0(ICDIEN,2,ICDDAIEN,1,"B",ICDMDC,"")) I 'ICDMIEN D
"RTN","ICD1864A",113,0)
 ..;Create MDC entry
"RTN","ICD1864A",114,0)
 ..K ICDFDA S ICDFDA("80.1711","+1,"_ICDDAIEN_","_ICDIEN_",",.01)=ICDMDC K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",115,0)
 ..S ICDMIEN=$O(^ICD0(ICDIEN,2,ICDDAIEN,1,"B",ICDMDC,""))
"RTN","ICD1864A",116,0)
 .I ICDMIEN D
"RTN","ICD1864A",117,0)
 ..S ICDY=$P(ICDREC,U,3),ICDFR=+$P(ICDY,"-",1),ICDTO=+$P(ICDY,"-",2) S:ICDTO=0 ICDTO=ICDFR F ICDDRG=ICDFR:1:ICDTO S ICDRGIEN=$O(^ICD0(ICDIEN,2,ICDDAIEN,1,ICDMIEN,1,"B",ICDDRG,"")) I 'ICDRGIEN D
"RTN","ICD1864A",118,0)
 ...;Create DRG entry
"RTN","ICD1864A",119,0)
 ...K ICDFDA S ICDFDA("80.17111","+1,"_ICDMIEN_","_ICDDAIEN_","_ICDIEN_",",.01)=ICDDRG K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",120,0)
 ...S ICDRGIEN=$O(^ICD0(ICDIEN,2,ICDDAIEN,1,"B",ICDDRG,""))
"RTN","ICD1864A",121,0)
 .;Next line checks the GEM file to find equivalent ICD-9-PCS code, and then loads the Identifier field to put in the ICD-10-PCS code
"RTN","ICD1864A",122,0)
 .S ICDDX9=$O(^ICDLOAD("GEM-10-9-PCS",ICDDX,"")),ICDIEN9=0 I ICDDX9'="" S ICDIEN9=^ICDLOAD("GEM-10-9-PCS",ICDDX,ICDDX9)
"RTN","ICD1864A",123,0)
 .I ICDIEN9 S ICDMDC24=$P($G(^ICD0(ICDIEN9,1)),U,5) D  K ICDFDA S ICDFDA(80.1,ICDIEN_",",1.5)=ICDMDC24 K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",124,0)
 ..I $D(^ICDLOAD("MDC24P","DX",ICDDX)) S ICDMDC24=^ICDLOAD("MDC24P","DX",ICDDX)
"RTN","ICD1864A",125,0)
 .S ICDIDEN="" S:ICDIEN9 ICDIDEN=$P($G(^ICD0(ICDIEN9,1)),U,2)
"RTN","ICD1864A",126,0)
 .I $D(^ICDLOAD("APPE","OR",ICDDX)) S:ICDIDEN'["O" ICDIDEN=ICDIDEN_"O"
"RTN","ICD1864A",127,0)
 .I $D(^ICDLOAD("APPF","NONEXTENSIVE",ICDDX)) S:ICDIDEN'["z" ICDIDEN=ICDIDEN_"z"
"RTN","ICD1864A",128,0)
 .E  S:ICDIDEN'["x" ICDIDEN=ICDIDEN_"x"
"RTN","ICD1864A",129,0)
 .I $D(^ICDLOAD("APPF","PROSTATIC",ICDDX)) S:ICDIDEN'["y" ICDIDEN=ICDIDEN_"y"
"RTN","ICD1864A",130,0)
 .K ICDFDA S ICDFDA(80.1,ICDIEN_",",1.2)=ICDIDEN K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",131,0)
 .I ICDIDEN'="" F ICDLET=1:1:$L(ICDIDEN) D 8073(80.1,ICDDX,$E(ICDIDEN,ICDLET)) ;Update new 80.1,73 multiple with ICD-10 Identifier codes
"RTN","ICD1864A",132,0)
 Q
"RTN","ICD1864A",133,0)
 ;
"RTN","ICD1864A",134,0)
UPID10 ;Now Populate #80 #80.1 Multiple 73
"RTN","ICD1864A",135,0)
 ;
"RTN","ICD1864A",136,0)
 D BMES^XPDUTL("Adding ICD-10 Identifiers to #80 and #80.1 Multiple 73 "_$$DTTIME)
"RTN","ICD1864A",137,0)
 S ICDDESC="" F  S ICDDESC=$O(^ICDLOAD("ID10",ICDDESC)) Q:ICDDESC=""  D
"RTN","ICD1864A",138,0)
 .F ICDTY=1:1:4 I $D(^ICDLOAD("ID10",ICDDESC,ICDTY)) S ICDFILE=$S(ICDTY=1!(ICDTY=2):82,1:82.1),ICDFILE2=$S(ICDTY=1!(ICDTY=2):"^ICDID",1:"^ICDIP") D
"RTN","ICD1864A",139,0)
 ..S ICDFILE3=$S(ICDTY=1!(ICDTY=2):80,1:80.1)
"RTN","ICD1864A",140,0)
 ..S ICDIEN=$O(@ICDFILE2@("C",ICDDESC,"")) I 'ICDIEN D
"RTN","ICD1864A",141,0)
 ...;Add this flag to File 82/82.1
"RTN","ICD1864A",142,0)
 ...K ICDFDA,ICDERR S ICDCODE=$O(@ICDFILE2@("B","*"),-1)+1,ICDFDA(ICDFILE,"+1,",.01)=ICDCODE,ICDFDA(ICDFILE,"+1,",1)=ICDDESC D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",143,0)
 ...S ICDIEN=$O(@ICDFILE2@("C",ICDDESC,""))
"RTN","ICD1864A",144,0)
 ..S ICDID="" I ICDIEN S ICDID=$P(@ICDFILE2@(ICDIEN,0),U,1)
"RTN","ICD1864A",145,0)
 ..I ICDID="" Q
"RTN","ICD1864A",146,0)
 ..S ICDA="" F  S ICDA=$O(^ICDLOAD("ID10",ICDDESC,ICDTY,ICDA)) Q:ICDA=""  D
"RTN","ICD1864A",147,0)
 ...S ICDB="" F  S ICDB=$O(^ICDLOAD("ID10",ICDDESC,ICDTY,ICDA,ICDB)) Q:ICDB=""  D
"RTN","ICD1864A",148,0)
 ....S ICDC="" F  S ICDC=$O(^ICDLOAD("ID10",ICDDESC,ICDTY,ICDA,ICDB,ICDC)) Q:ICDC=""  D
"RTN","ICD1864A",149,0)
 .....I ICDTY=1!(ICDTY=3) D
"RTN","ICD1864A",150,0)
 ......S ICDDX=ICDC S:ICDTY=1 ICDDX=$E(ICDC,1,3)_"."_$E(ICDC,4,$L(ICDC))
"RTN","ICD1864A",151,0)
 ......D 8073(ICDFILE3,ICDDX,ICDID)
"RTN","ICD1864A",152,0)
 ;
"RTN","ICD1864A",153,0)
 Q
"RTN","ICD1864A",154,0)
 ;
"RTN","ICD1864A",155,0)
UP802 ;
"RTN","ICD1864A",156,0)
 ;#80.2 New field #2 - CC/MCC flag
"RTN","ICD1864A",157,0)
 D BMES^XPDUTL("Starting File #80.2 "_$$DTTIME)
"RTN","ICD1864A",158,0)
 S ICDCC="" F  S ICDCC=$O(^ICDLOAD(80.2,"CC/MCC",ICDCC)) Q:ICDCC=""  S ICDDRG="" F  S ICDDRG=$O(^ICDLOAD(80.2,"CC/MCC",ICDCC,ICDDRG)) Q:ICDDRG=""  S ICDDRGN="DRG"_(+ICDDRG),ICDIEN=$O(^ICD("B",ICDDRGN,"")) D
"RTN","ICD1864A",159,0)
 .I 'ICDIEN D BMES^XPDUTL("DRG code "_ICDDRGN_" not in file #80.2") Q
"RTN","ICD1864A",160,0)
 .S ICDIEN2=$O(^ICD(ICDIEN,2,"B",ICDEFF,"")) I 'ICDIEN2 K ICDFDA S ICDFDA("80.271","+1,"_ICDIEN_",",.01)=ICDEFF K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR Q
"RTN","ICD1864A",161,0)
 .S ICDIEN2=$O(^ICD(ICDIEN,2,"B",ICDEFF,"")) K ICDFDA S ICDFDA("80.271",ICDIEN2_","_ICDIEN_",",2)=ICDCC K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR Q
"RTN","ICD1864A",162,0)
 .;Hardcoded rules ICD10TB0-9
"RTN","ICD1864A",163,0)
 .S ICDY=+ICDDRG,ICDX="ICD10TB"_$S(ICDY<100:0,ICDY>99&(ICDY<202):1,ICDY>201&(ICDY<302):2,ICDY>301&(ICDY<400):3,ICDY>399&(ICDY<500):4,ICDY>499&(ICDY<602):5,ICDY>601&(ICDY<701):6,ICDY>700&(ICDY<802):7,ICDY>801&(ICDY<901):8,1:9)
"RTN","ICD1864A",164,0)
 .K ICDFDA S ICDFDA("80.271",ICDIEN2_","_ICDIEN_",",1)=ICDX K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR Q
"RTN","ICD1864A",165,0)
 Q
"RTN","ICD1864A",166,0)
 ;
"RTN","ICD1864A",167,0)
UP805 ;
"RTN","ICD1864A",168,0)
 ;Load #80.5 - ^ICDRS (Surgical Hierarchy)
"RTN","ICD1864A",169,0)
 D BMES^XPDUTL("Starting #80.5 "_$$DTTIME)
"RTN","ICD1864A",170,0)
 S ICDSTOP=0
"RTN","ICD1864A",171,0)
 S ICDMDC="" F  S ICDMDC=$O(^ICDLOAD("80.5",ICDMDC)) Q:ICDMDC=""  S ICDORD="" D
"RTN","ICD1864A",172,0)
 .F  S ICDORD=$O(^ICDLOAD(80.5,ICDMDC,ICDORD)) Q:ICDORD=""!(ICDSTOP)  S ICDDRG=^ICDLOAD(80.5,ICDMDC,ICDORD),ICDDA=$O(^ICDRS("B",ICDEFF_".1"),-1) D
"RTN","ICD1864A",173,0)
 ..I 'ICDDA K ICDFDA S ICDFDA("80.5","+1,",.01)=ICDEFF K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") S ICDDA=$O(^ICDRS("B",ICDEFF_".1"),-1) I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1864A",174,0)
 ..S ICDIEN=$O(^ICDRS("B",ICDDA,""))
"RTN","ICD1864A",175,0)
 ..S ICDMIEN=$O(^ICDRS(ICDIEN,1,"B",ICDMDC,"")) I 'ICDMIEN D
"RTN","ICD1864A",176,0)
 ...K ICDFDA S ICDFDA("80.51","+1,"_ICDIEN_",",.01)=ICDMDC K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") S ICDMIEN=$O(^ICDRS(ICDIEN,1,"B",ICDMDC,"")) I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1864A",177,0)
 ..K ICDFDA S ICDFDA("80.511","+1,"_ICDMIEN_","_ICDIEN_",",.01)=ICDDRG,ICDFDA("80.511","+1,"_ICDMIEN_","_ICDIEN_",",1)=ICDORD
"RTN","ICD1864A",178,0)
 ..K ICDERR D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1864A",179,0)
 Q
"RTN","ICD1864A",180,0)
 ;
"RTN","ICD1864A",181,0)
UP806 ;#80.6 - ^ICDHAC (HAC)
"RTN","ICD1864A",182,0)
 D BMES^XPDUTL("Starting #80.6 "_$$DTTIME)
"RTN","ICD1864A",183,0)
 S ICDDX="" F  S ICDDX=$O(^ICDLOAD("APPI",ICDDX)) Q:ICDDX=""  D
"RTN","ICD1864A",184,0)
 .S ICDCODE=$E(ICDDX,1,3)_"."_$E(ICDDX,4,$L(ICDDX)),ICDDXIEN=$O(^ICD9("BA",ICDCODE_" ","")) I 'ICDDXIEN W !,"HAC: Code ",ICDCODE," not found in File #80" Q
"RTN","ICD1864A",185,0)
 .S ICDHAC="" F  S ICDHAC=$O(^ICDLOAD("APPI",ICDDX,ICDHAC)) Q:ICDHAC=""  D
"RTN","ICD1864A",186,0)
 ..S ICDX=^ICDLOAD("APPI",ICDDX,ICDHAC),ICDPRIM=$S($P(ICDX,U,1)=1:1,1:0),ICDDESC=$P(ICDX,U,2)
"RTN","ICD1864A",187,0)
 ..S ICDIEN=$O(^ICDHAC("B",ICDHAC,"")) I 'ICDIEN D
"RTN","ICD1864A",188,0)
 ...K ICDFDA,ICDERR S ICDFDA(80.6,"+1,",.01)=ICDHAC,ICDFDA(80.6,"+1,",1)=ICDDESC
"RTN","ICD1864A",189,0)
 ...D UPDATE^DIE("S","ICDFDA","","ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",190,0)
 ...S ICDIEN=$O(^ICDHAC("B",ICDHAC,""))
"RTN","ICD1864A",191,0)
 ..I '$D(^ICDHAC("C",ICDDXIEN)) D
"RTN","ICD1864A",192,0)
 ...K ICDFDA,ICDERR S ICDFDA(80.62,"+1,"_ICDIEN_",",.01)=ICDDXIEN,ICDFDA(80.62,"+1,"_ICDIEN_",",1)=ICDPRIM
"RTN","ICD1864A",193,0)
 ...D UPDATE^DIE("S","ICDFDA","","ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864A",194,0)
 Q
"RTN","ICD1864A",195,0)
 ;
"RTN","ICD1864A",196,0)
UP82 ;Set up #82 and #82.1 with IDENTIFIERS in ICDHLPD and ICDHLPO
"RTN","ICD1864A",197,0)
 ;
"RTN","ICD1864A",198,0)
 D BMES^XPDUTL("Starting #82 and #82.1 "_$$DTTIME)
"RTN","ICD1864A",199,0)
 S ICDSTOP=0
"RTN","ICD1864A",200,0)
 F ICDI="DX","PCS" D  Q:ICDSTOP
"RTN","ICD1864A",201,0)
 .S ICDFILE=$S(ICDI="DX":82,1:82.1),ICDN="",ICDFILE1=$S(ICDI="DX":"^ICDID",1:"^ICDIP")
"RTN","ICD1864A",202,0)
 .F  S ICDN=$O(^ICDLOAD("ID",ICDI,ICDN)) Q:ICDN=""!(ICDSTOP)  S ICDX=^ICDLOAD("ID",ICDI,ICDN) D
"RTN","ICD1864A",203,0)
 ..S ICDIEN=$O(@ICDFILE1@("B",ICDN,"")) I 'ICDIEN D
"RTN","ICD1864A",204,0)
 ...K ICDFDA,ICDERR S ICDFDA(ICDFILE,"+1,",.01)=ICDN D UPDATE^DIE("S","ICDFDA","","ICDERR") I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1864A",205,0)
 ..S ICDIEN=$O(@ICDFILE1@("B",ICDN,""))
"RTN","ICD1864A",206,0)
 ..K ICDFDA,ICDERR S ICDFDA(ICDFILE,ICDIEN_",",1)=ICDX D UPDATE^DIE("S","ICDFDA","","ICDERR") I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1864A",207,0)
 I '$O(^ICDID("B","o","")) D
"RTN","ICD1864A",208,0)
 .K ICDFDA,ICDERR S ICDFDA(82,"+1,",.01)="o" S ICDFDA(82,"+1,",1)="ovary" D UPDATE^DIE("S","ICDFDA","","ICDERR") I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1864A",209,0)
 Q
"RTN","ICD1864A",210,0)
 ;
"RTN","ICD1864A",211,0)
UP82ADD ;Then add ICD-10 IDENTIFIERS extracted from MDC files to Files #82 and #82.1
"RTN","ICD1864A",212,0)
 ;First, numerically assign new Identifier Codes in range 10 -->
"RTN","ICD1864A",213,0)
 D BMES^XPDUTL("Adding ICD-10 Identifiers to File #82 and #82.1 "_$$DTTIME)
"RTN","ICD1864A",214,0)
 S ICDDESC="",ICDDESC="",ICDSTOP=0,ICD82=+$G(^ICDLOAD("MV",80)),ICD821=+$G(^ICDLOAD("MV",80.1))
"RTN","ICD1864A",215,0)
 F  S ICDDESC=$O(^ICDLOAD("ID10",ICDDESC)) Q:ICDDESC=""!(ICDSTOP)  D
"RTN","ICD1864A",216,0)
 .I $D(^ICDLOAD("ID10",ICDDESC,1))!($D(^ICDLOAD("ID10",ICDDESC,2))) D  ;DX
"RTN","ICD1864A",217,0)
 ..I '$D(^ICDID("C",ICDDESC)) K ICDFDA,ICDERR D  S ICDFDA(82,"+1,",.01)=ICD82T,ICDFDA(82,"+1,",1)=ICDDESC D UPDATE^DIE("S","ICDFDA","","ICDERR") I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1864A",218,0)
 ...S ICD82T=$G(^ICDLOAD("MV",80,ICDDESC)) S:ICD82T="" ICD82=ICD82+1,ICD82T=ICD82
"RTN","ICD1864A",219,0)
 .I $D(^ICDLOAD("ID10",ICDDESC,3))!($D(^ICDLOAD("ID10",ICDDESC,4))) D  ;PCS
"RTN","ICD1864A",220,0)
 ..I '$D(^ICDIP("C",ICDDESC)) K ICDFDA,ICDERR D  S ICDFDA(82.1,"+1,",.01)=ICD82T,ICDFDA(82.1,"+1,",1)=ICDDESC D UPDATE^DIE("S","ICDFDA","","ICDERR") I $D(ICDERR) D ERR S ICDSTOP=1 Q
"RTN","ICD1864A",221,0)
 ...S ICD82T=$G(^ICDLOAD("MV",80.1,ICDDESC)) S:ICD82T="" ICD821=ICD821+1,ICD82T=ICD821
"RTN","ICD1864A",222,0)
 Q
"RTN","ICD1864A",223,0)
 ;
"RTN","ICD1864A",224,0)
8073(ICDFILE,ICDDX,ICDIDEN) ;
"RTN","ICD1864A",225,0)
 ; Input        ICDFILE = 80 or 80.1
"RTN","ICD1864A",226,0)
 ;              ICDDX = DX or PCS Code  Ex: A00.0 or 0TCS0ZZ
"RTN","ICD1864A",227,0)
 ;              ICDIDEN = Identifier  Ex: "A" or 44 or 245
"RTN","ICD1864A",228,0)
 N ICDIEN,ICDF,ICDI,ICDX,ICDID,ICDIDIEN
"RTN","ICD1864A",229,0)
 S ICDF=$S(ICDFILE=80:"^ICD9",1:"^ICD0"),ICDIEN=$O(@ICDF@("BA",ICDDX_" ","")) Q:ICDIEN=""
"RTN","ICD1864A",230,0)
 S ICDF2=$S(ICDFILE=80:"80",1:"80.1")
"RTN","ICD1864A",231,0)
 S ICDFT=$S(ICDFILE=80:"80.073",1:"80.173")
"RTN","ICD1864A",232,0)
 S ICDFI=$S(ICDFILE=80:"^ICDID",1:"^ICDIP")
"RTN","ICD1864A",233,0)
 S ICDIEN=$O(@ICDF@("BA",ICDDX_" ","")) I ICDIEN="" Q
"RTN","ICD1864A",234,0)
 S ICDIDIEN=$O(@ICDFI@("B",ICDIDEN,"")) I ICDIDIEN'="" D
"RTN","ICD1864A",235,0)
 .S ICD73IEN=$O(@ICDF@(ICDIEN,73,"B",ICDIDIEN,"")) I ICD73IEN="" D
"RTN","ICD1864A",236,0)
 ..K ICDFDA,ICDERR S ICDFDA(ICDFT,"+1,"_ICDIEN_",",.01)=ICDIDIEN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR Q
"RTN","ICD1864A",237,0)
 Q
"RTN","ICD1864A",238,0)
 ;
"RTN","ICD1864A",239,0)
ERR ;
"RTN","ICD1864A",240,0)
 I $D(ICDERR("DIERR",1,"PARAM","FILE")) D BMES^XPDUTL("FileMan error - FILE: "_ICDERR("DIERR",1,"PARAM","FILE"))
"RTN","ICD1864A",241,0)
 I $D(ICDERR("DIERR",1,"PARAM","IENS")) D BMES^XPDUTL("FileMan error - IENS: "_ICDERR("DIERR",1,"PARAM","IENS"))
"RTN","ICD1864A",242,0)
 I $D(ICDERR("DIERR",1,"PARAM","TEXT")) D BMES^XPDUTL("FileMan error - TEXT: "_ICDERR("DIERR",1,"PARAM","TEXT"))
"RTN","ICD1864A",243,0)
 Q
"RTN","ICD1864A",244,0)
 ;
"RTN","ICD1864A",245,0)
DTTIME() ;
"RTN","ICD1864A",246,0)
 S Y=$$NOW^XLFDT D DD^%DT
"RTN","ICD1864A",247,0)
 Q Y
"RTN","ICD1864A",248,0)
 ;
"RTN","ICD1864A",249,0)
 ;ICD1864A
"RTN","ICD1864B")
0^87^B65361906^n/a
"RTN","ICD1864B",1,0)
ICD1864B ;ALB/MN/SS - POST INSTALL ROUTINE-PART 2;APR 02, 2012
"RTN","ICD1864B",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICD1864B",3,0)
 ;
"RTN","ICD1864B",4,0)
 N ICDX,ICDY,ICDHIST,ICDCSYS,ICDIEN,ICDPRE,ICDST,ICDCODE,ICDR,ICDEFF,ICDDX9,ICDDTTX,ICDF,ICDMDCF,ICDVAR,ICDCC
"RTN","ICD1864B",5,0)
 N ICDSTA,ICDI,ICDMIEN,ICDRGIEN,ICDFN,ICDDESC,ICDIX,ICDSTOP,ICDFILE,ICDFILE2,ICDAIDA,ICDMULT,ICDDAP,ICDCCMCC,ICDCCIEN
"RTN","ICD1864B",6,0)
 N ICDPDX,ICD103,ICD40,ICD14,ICD40IEN,ICD73IEN,ICD82,ICD821,ICD82T,ICDA,ICDB,ICDBLIEN,ICDBLK,ICDC,ICDCT,ICDDA,ICDDRGS,ICDDXCC
"RTN","ICD1864B",7,0)
 N ICDDXIEN,ICDEXCL,ICDEXIEN,ICDF2,ICDFI,ICDFILE,ICDFILE1,ICDFILE2,ICDFILE3,ICDFILE4,ICDFLAG,ICDFR,ICDFT,ICDMAC,ICDIEN2
"RTN","ICD1864B",8,0)
 N ICDLET,ICDMDDRG,ICDMDIEN,ICDONEI,ICDORCD,ICDOWN,ICDPCS,ICDPRIEN,ICDPRIM,ICDREC,ICDTO,ICDTY,ICDWIDTH,ICDXIEN,ICDYES,ICDWITH
"RTN","ICD1864B",9,0)
 N ICDN,ICDX,ICDIEN,ICDIEN9,ICDDX,ICDDAIEN,ICDFDA,ICDERR,ICDI,ICDDRG,ICDMDC,ICDBAD,ICDIDEN,ICDDX9,ICDMDC,ICDMDC24,ICDMDC25,ICDDRGN
"RTN","ICD1864B",10,0)
 N ICDORD,ICDDRG,ICDCC,ICDHAC,ICDA,ICDSUM,ICD73,ICDIDIEN
"RTN","ICD1864B",11,0)
 ;
"RTN","ICD1864B",12,0)
UP8211 ;Populate File #82.11 from ^ICDLOAD(82.11) - Procedure code Combinations/Clusters that came from Appendix E
"RTN","ICD1864B",13,0)
 ;
"RTN","ICD1864B",14,0)
 D BMES^XPDUTL("Starting Files #82.11 and #82.12 "_$$DTTIME^ICD1864A)
"RTN","ICD1864B",15,0)
 S ICDFLAG="" F  S ICDFLAG=$O(^ICDLOAD(82.11,ICDFLAG)) Q:ICDFLAG=""  D
"RTN","ICD1864B",16,0)
 .S ICDIEN=$O(^ICDIP("C",ICDFLAG,"")) I 'ICDIEN D
"RTN","ICD1864B",17,0)
 ..;Add this flag to File 82.1 and then use the IEN to update #82.11
"RTN","ICD1864B",18,0)
 ..K ICDFDA,ICDERR S ICDIEN=$O(^ICDIP("B","A"),-1)+1,ICDFDA(82.1,"+1,",.01)=ICDIEN,ICDFDA(82.1,"+1,",1)=ICDFLAG D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864B",19,0)
 ..S ICDIEN=$O(^ICDIP("C",ICDFLAG,""))
"RTN","ICD1864B",20,0)
 .S ICDIDIEN=$O(^ICDIDP("B",ICDIEN,"")) I 'ICDIDIEN D
"RTN","ICD1864B",21,0)
 ..;Add IDENTIFIER CODE entry (IEN from 82.1 file) to File #82.11
"RTN","ICD1864B",22,0)
 ..K ICDFDA,ICDERR S ICDFDA(82.11,"+1,",.01)=ICDIEN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864B",23,0)
 ..S ICDIDIEN=$O(^ICDIDP("B",ICDIEN,""))
"RTN","ICD1864B",24,0)
 .S ICDBLK=0 F  S ICDBLK=$O(^ICDLOAD(82.11,ICDFLAG,ICDBLK)) Q:'ICDBLK  D  S ICDONEI=0
"RTN","ICD1864B",25,0)
 ..K ICDFDA,ICDERR S ICDFDA(82.111,"+1,"_ICDIDIEN_",",.01)=ICDBLK D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864B",26,0)
 ..S ICDBLIEN=$O(^ICDIDP(ICDIDIEN,"BL","B",ICDBLK,""))
"RTN","ICD1864B",27,0)
 ..;Each level 1 (One-Of) get all levels below
"RTN","ICD1864B",28,0)
 ..S ICDWITH="" F  S ICDWITH=$O(^ICDLOAD(82.11,ICDFLAG,ICDBLK,ICDWITH)) Q:'ICDWITH  D
"RTN","ICD1864B",29,0)
 ...S ICDCODE="" F  S ICDCODE=$O(^ICDLOAD(82.11,ICDFLAG,ICDBLK,ICDWITH,ICDCODE)) Q:ICDCODE=""  D
"RTN","ICD1864B",30,0)
 ....S ICDMDDRG=^ICDLOAD(82.11,ICDFLAG,ICDBLK,ICDWITH,ICDCODE)
"RTN","ICD1864B",31,0)
 ....S ICDPRIEN=$O(^ICD0("BA",ICDCODE_" ","")) I ICDPRIEN D  ;If in File #80.1
"RTN","ICD1864B",32,0)
 .....K ICDFDA,ICDERR S ICDFILE=$P("82.1111/82.1112/82.1113/82.1114/82.1115/","/",ICDWITH)
"RTN","ICD1864B",33,0)
 .....S ICDFDA(ICDFILE,"+1,"_ICDBLIEN_","_ICDIDIEN_",",.01)=ICDPRIEN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864B",34,0)
 .....F ICDI=1:2 S ICDMDC=+$P(ICDMDDRG,U,ICDI) Q:ICDMDC=0  S ICDDRGS=$P(ICDMDDRG,U,ICDI+1) I ICDDRGS'="" S ICDFR=+$P(ICDDRGS,"-",1),ICDTO=+$P(ICDDRGS,"-",2) D
"RTN","ICD1864B",35,0)
 ......S:ICDTO=0 ICDTO=ICDFR F ICDDRG=ICDFR:1:ICDTO D
"RTN","ICD1864B",36,0)
 .......S ICDMDIEN=$O(^ICDIDP(ICDIDIEN,"BL",ICDBLIEN,"MDC","B",ICDMDC,"")) I 'ICDMDIEN D
"RTN","ICD1864B",37,0)
 ........K ICDFDA,ICDERR S ICDFDA("82.1116","+1,"_ICDBLIEN_","_ICDIDIEN_",",.01)=ICDMDC D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR Q
"RTN","ICD1864B",38,0)
 .......S ICDMDIEN=$O(^ICDIDP(ICDIDIEN,"BL",ICDBLIEN,"MDC","B",ICDMDC,""))
"RTN","ICD1864B",39,0)
 .......S ICDRGIEN=$O(^ICDIDP(ICDIDIEN,"BL",ICDBLIEN,"MDC",ICDMDIEN,"DRG","B",ICDDRG,"")) I ICDRGIEN="" D
"RTN","ICD1864B",40,0)
 ........K ICDFDA,ICDERR S ICDFDA("82.11161","+1,"_ICDMDIEN_","_ICDBLIEN_","_ICDIDIEN_",",.01)=ICDDRG D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864B",41,0)
 ;
"RTN","ICD1864B",42,0)
 Q
"RTN","ICD1864B",43,0)
 ;
"RTN","ICD1864B",44,0)
UP8211B ;Now Populate Files #82.11 and #82.12 from clusters in ^ICDLOAD("ID10") that came from the MDC files
"RTN","ICD1864B",45,0)
 ;
"RTN","ICD1864B",46,0)
 D BMES^XPDUTL("Adding Clusters to Files #82.11 and #82.12 "_$$DTTIME^ICD1864A)
"RTN","ICD1864B",47,0)
 S ICDDESC="" F  S ICDDESC=$O(^ICDLOAD("ID10",ICDDESC)) Q:ICDDESC=""  D
"RTN","ICD1864B",48,0)
 .F ICDTY=1:1:4 I $D(^ICDLOAD("ID10",ICDDESC,ICDTY)) S ICDFILE=$S(ICDTY=1!(ICDTY=2):82,1:82.1),ICDFILE2=$S(ICDTY=1!(ICDTY=2):"^ICDID",1:"^ICDIP"),ICDFILE3=$S(ICDTY=1!(ICDTY=2):82.12,1:82.11),ICDFILE4=$S(ICDTY=1!(ICDTY=2):"^ICDIDD",1:"^ICDIDP") D
"RTN","ICD1864B",49,0)
 ..S ICDIEN=$O(@ICDFILE2@("C",ICDDESC,"")) I 'ICDIEN D
"RTN","ICD1864B",50,0)
 ...;Add this flag to File 82/82.1 and then use the IEN to update #82.11/12
"RTN","ICD1864B",51,0)
 ...K ICDFDA,ICDERR S ICDCODE=$O(@ICDFILE2@("B","*"),-1)+1,ICDFDA(ICDFILE,"+1,",.01)=ICDCODE,ICDFDA(ICDFILE,"+1,",1)=ICDDESC D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864B",52,0)
 ...S ICDIEN=$O(@ICDFILE2@("C",ICDDESC,""))
"RTN","ICD1864B",53,0)
 ..I ICDTY=1!(ICDTY=3) Q
"RTN","ICD1864B",54,0)
 ..S ICDIDIEN=$O(@ICDFILE4@("B",ICDIEN,"")) I 'ICDIDIEN D
"RTN","ICD1864B",55,0)
 ...;Add IDENTIFIER CODE entry (IEN from 82.1/82 file) to File #82.11/12
"RTN","ICD1864B",56,0)
 ...K ICDFDA,ICDERR S ICDFDA(ICDFILE3,"+1,",.01)=ICDIEN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864B",57,0)
 ...S ICDIDIEN=$O(@ICDFILE4@("B",ICDIEN,""))
"RTN","ICD1864B",58,0)
 ..S ICDBLK=0 F  S ICDBLK=$O(^ICDLOAD("ID10",ICDDESC,ICDTY,ICDBLK)) Q:ICDBLK=""  D
"RTN","ICD1864B",59,0)
 ...K ICDFDA,ICDERR S ICDFDA(ICDFILE3_"1","+1,"_ICDIDIEN_",",.01)=ICDBLK D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864B",60,0)
 ...S ICDBLIEN=$O(@ICDFILE4@(ICDIDIEN,"BL","B",ICDBLK,""))
"RTN","ICD1864B",61,0)
 ...;Each level 1 (One-Of) get all levels below
"RTN","ICD1864B",62,0)
 ...S ICDWITH="" F  S ICDWITH=$O(^ICDLOAD("ID10",ICDDESC,ICDTY,ICDBLK,ICDWITH)) Q:ICDWITH=""  S ICDCT="" F  S ICDCT=$O(^ICDLOAD("ID10",ICDDESC,ICDTY,ICDBLK,ICDWITH,ICDCT)) Q:ICDCT=""  D
"RTN","ICD1864B",63,0)
 ....S ICDCODE="" F  S ICDCODE=$O(^ICDLOAD("ID10",ICDDESC,ICDTY,ICDBLK,ICDWITH,ICDCT,ICDCODE)) Q:ICDCODE=""  S ICDX=^ICDLOAD("ID10",ICDDESC,ICDTY,ICDBLK,ICDWITH,ICDCT,ICDCODE),ICDMDC=$P(ICDX,U,1) D
"RTN","ICD1864B",64,0)
 .....S ICDDX=ICDCODE I ICDTY=2 S ICDDX=$E(ICDCODE,1,3)_"."_$E(ICDCODE,4,$L(ICDCODE))
"RTN","ICD1864B",65,0)
 .....S:ICDTY=4 ICDPRIEN=$O(^ICD0("BA",ICDDX_" ","")) S:ICDTY=2 ICDPRIEN=$O(^ICD9("BA",ICDDX_" ","")) I ICDPRIEN D  ;If in File #80.1/80
"RTN","ICD1864B",66,0)
 ......S ICDXIEN=$O(@ICDFILE4@(ICDIDIEN,"BL",ICDBLIEN,$P("ONE/WITH1/WITH2/WITH3/WITH4/","/",ICDWITH),"B",ICDPRIEN,"")) I 'ICDXIEN D
"RTN","ICD1864B",67,0)
 .......K ICDFDA,ICDERR S ICDFDA(ICDFILE3_$P("11/12/13/14/15/","/",ICDWITH),"+1,"_ICDBLIEN_","_ICDIDIEN_",",.01)=ICDPRIEN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864B",68,0)
 ......I ICDMDC'="" S ICDMDC=+ICDMDC S:ICDMDC=0 ICDMDC=98 S ICDMDIEN=$O(@ICDFILE4@(ICDIDIEN,"BL",ICDBLIEN,"MDC","B",ICDMDC,"")) I 'ICDMDIEN D
"RTN","ICD1864B",69,0)
 .......K ICDFDA,ICDERR S ICDFDA(ICDFILE3_"16","+1,"_ICDBLIEN_","_ICDIDIEN_",",.01)=ICDMDC D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864B",70,0)
 .......S ICDMDIEN=$O(@ICDFILE4@(ICDIDIEN,"BL",ICDBLIEN,"MDC","B",ICDMDC,""))
"RTN","ICD1864B",71,0)
 .......S ICDDRG="" F  S ICDDRG=$O(^ICDLOAD("ID10",ICDDESC,ICDTY,ICDBLK,ICDWITH,ICDCT,ICDCODE,"DRG",ICDDRG)) Q:ICDDRG=""  D
"RTN","ICD1864B",72,0)
 ........S ICDRGIEN=$O(@ICDFILE4@(ICDIDIEN,"BL",ICDBLIEN,"MDC",ICDMDIEN,"DRG","B",+ICDDRG,"")) I ICDRGIEN="" D
"RTN","ICD1864B",73,0)
 .........K ICDFDA,ICDERR S ICDFDA(ICDFILE3_"161","+1,"_ICDMDIEN_","_ICDBLIEN_","_ICDIDIEN_",",.01)=+ICDDRG D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864B",74,0)
 ;
"RTN","ICD1864B",75,0)
 Q
"RTN","ICD1864B",76,0)
 ;
"RTN","ICD1864B",77,0)
UP8213 ;
"RTN","ICD1864B",78,0)
 D BMES^XPDUTL("Starting File #82.13 "_$$DTTIME^ICD1864A)
"RTN","ICD1864B",79,0)
 S ICDDX="" F  S ICDDX=$O(^ICDLOAD("APPC","DX",ICDDX)) Q:ICDDX=""  D
"RTN","ICD1864B",80,0)
 .S ICDX=^ICDLOAD("APPC","DX",ICDDX),ICDEXCL=$P(ICDX,U,2) D
"RTN","ICD1864B",81,0)
 ..S ICDIEN=$O(^ICD9("BA",ICDDX_" ","")) I 'ICDIEN D BMES^XPDUTL("ICD Code: "_ICDDX_" not in file #80") Q
"RTN","ICD1864B",82,0)
 ..S ICDYES=0,ICDEXIEN=$O(^ICDCCEX("B",+ICDEXCL,"")) I ICDEXIEN="" D
"RTN","ICD1864B",83,0)
 ...K ICDFDA,ICDERR S ICDFDA(82.13,"+1,",.01)=+ICDEXCL D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864B",84,0)
 ...S ICDEXIEN=$O(^ICDCCEX("B",+ICDEXCL,"")),ICDYES=1
"RTN","ICD1864B",85,0)
 ..K ICDFDA,ICDERR S ICDFDA(80,ICDIEN_",",1.11)=ICDEXIEN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864B",86,0)
 ..I ICDYES S ICDDXCC="" F  S ICDDXCC=$O(^ICDLOAD("APPC","PDX",ICDEXCL,ICDDXCC)) Q:ICDDXCC=""  I ICDDX'=ICDDXCC S ICD40IEN=$O(^ICD9("BA",ICDDXCC_" ","")) I ICD40IEN D
"RTN","ICD1864B",87,0)
 ...K ICDFDA,ICDERR S ICDFDA(82.131,"+1,"_ICDEXIEN_",",.01)=ICD40IEN D UPDATE^DIE("S","ICDFDA",,"ICDERR") I $D(ICDERR) D ERR
"RTN","ICD1864B",88,0)
 Q
"RTN","ICD1864B",89,0)
 ;
"RTN","ICD1864B",90,0)
MAJOROR ;
"RTN","ICD1864B",91,0)
 ;This sets up ICD-10 Identifer 80 (Major O.R. Procedures) in Multiple 73 of #80.1 for all Procedure Codes that are neither "PROSTATIC" "y" nor "NONEXTENSIVE" "z"
"RTN","ICD1864B",92,0)
 D BMES^XPDUTL("Setting Major O.R. flags in File# 80.1 Field 73 "_$$DTTIME^ICD1864A)
"RTN","ICD1864B",93,0)
 S ICDORCD=$O(^ICDIP("C","MAJOR O.R. PROCEDURES","")) I ICDORCD="" D BMES^XPDUTL("IEN for MAJOR O.R. PROCEDURES not found in File #82.1") Q
"RTN","ICD1864B",94,0)
 S ICDORCD=$P(^ICDIP(ICDORCD,0),U,1)
"RTN","ICD1864B",95,0)
 S ICDPCS="",ICDCT=0 F  S ICDPCS=$O(^ICDLOAD(80.1,"MAJOR-OR",ICDPCS)) Q:ICDPCS=""  D
"RTN","ICD1864B",96,0)
 . D 8073^ICD1864A(80.1,ICDPCS,ICDORCD) S ICDCT=ICDCT+1
"RTN","ICD1864B",97,0)
 Q
"RTN","ICD1864B",98,0)
 ;
"RTN","ICD1864B",99,0)
ERR ;
"RTN","ICD1864B",100,0)
 I $D(ICDERR("DIERR",1,"PARAM","FILE")) D BMES^XPDUTL("FileMan error - FILE: "_ICDERR("DIERR",1,"PARAM","FILE"))
"RTN","ICD1864B",101,0)
 I $D(ICDERR("DIERR",1,"PARAM","IENS")) D BMES^XPDUTL("FileMan error - IENS: "_ICDERR("DIERR",1,"PARAM","IENS"))
"RTN","ICD1864B",102,0)
 I $D(ICDERR("DIERR",1,"PARAM","TEXT")) D BMES^XPDUTL("FileMan error - TEXT: "_ICDERR("DIERR",1,"PARAM","TEXT"))
"RTN","ICD1864B",103,0)
 Q
"RTN","ICD1864B",104,0)
 ;
"RTN","ICD1864B",105,0)
 ;if previously installed then delete files 80.5,80.6,82.11,82.12
"RTN","ICD1864B",106,0)
DELFILES ;
"RTN","ICD1864B",107,0)
 D MES^XPDUTL("Deleting entries in the file #80.5") D
"RTN","ICD1864B",108,0)
 . N DIK,DA S DIK="^ICDRS(" S DA=0 F  S DA=$O(^ICDRS(DA)) Q:+DA=0  D ^DIK
"RTN","ICD1864B",109,0)
 D MES^XPDUTL("Deleting entries in the file #80.6") D
"RTN","ICD1864B",110,0)
 . N DIK,DA S DIK="^ICDHAC(" S DA=0 F  S DA=$O(^ICDHAC(DA)) Q:+DA=0  D ^DIK
"RTN","ICD1864B",111,0)
 D MES^XPDUTL("Deleting entries in the file #82.11") D
"RTN","ICD1864B",112,0)
 . N DIK,DA S DIK="^ICDIDP(" S DA=0 F  S DA=$O(^ICDIDP(DA)) Q:+DA=0  D ^DIK
"RTN","ICD1864B",113,0)
 D MES^XPDUTL("Deleting entries in the file #82.12") D
"RTN","ICD1864B",114,0)
 . N DIK,DA S DIK="^ICDIDD(" S DA=0 F  S DA=$O(^ICDIDD(DA)) Q:+DA=0  D ^DIK
"RTN","ICD1864B",115,0)
 ;
"RTN","ICD1864B",116,0)
 D MES^XPDUTL("Deleting fields in the file #80.5") D DELFIELD(80.5,1)
"RTN","ICD1864B",117,0)
 D MES^XPDUTL("Deleting fields in the file #80.6") D
"RTN","ICD1864B",118,0)
 . D DELFIELD(80.6,1)
"RTN","ICD1864B",119,0)
 . D DELFIELD(80.6,2)
"RTN","ICD1864B",120,0)
 . D DELFIELD(80.6,3)
"RTN","ICD1864B",121,0)
 D MES^XPDUTL("Deleting fields in the file #82.11") D DELFIELD(82.11,1)
"RTN","ICD1864B",122,0)
 D MES^XPDUTL("Deleting fields in the file #82.12") D DELFIELD(82.12,1)
"RTN","ICD1864B",123,0)
 Q
"RTN","ICD1864B",124,0)
 ;delete fields in the file
"RTN","ICD1864B",125,0)
DELFIELD(ICDFILE,ICDFLD) ;
"RTN","ICD1864B",126,0)
 I '$D(^DD(ICDFILE,ICDFLD)) Q
"RTN","ICD1864B",127,0)
 N DA,DIK
"RTN","ICD1864B",128,0)
 S DA(1)=ICDFILE
"RTN","ICD1864B",129,0)
 S DA=ICDFLD
"RTN","ICD1864B",130,0)
 S DIK="^DD("_ICDFILE_","
"RTN","ICD1864B",131,0)
 D ^DIK
"RTN","ICD1864B",132,0)
 Q
"RTN","ICD1864B",133,0)
 ;
"RTN","ICD1864B",134,0)
 ;kill ^ICDLOAD after installation
"RTN","ICD1864B",135,0)
CLEANUP ;
"RTN","ICD1864B",136,0)
 N $ESTACK,$ETRAP
"RTN","ICD1864B",137,0)
 S $ETRAP="D KILNODES^ICD1864B"
"RTN","ICD1864B",138,0)
 ;ICD*18*64 development team obtained the exemption to use $ZU(68,28) from SACC committee on 2/25/2014
"RTN","ICD1864B",139,0)
 ; and recommendation to perform $ZU(68,28,0) and kill ^ICDLOAD. If $ZU is undefined in the environment that catch the error 
"RTN","ICD1864B",140,0)
 ; and loop through top level subscripts to kill them individually.
"RTN","ICD1864B",141,0)
 S X=$ZU(68,28,0)
"RTN","ICD1864B",142,0)
 K ^ICDLOAD
"RTN","ICD1864B",143,0)
 S X=$ZU(68,28,1)
"RTN","ICD1864B",144,0)
 Q
"RTN","ICD1864B",145,0)
 ;
"RTN","ICD1864B",146,0)
 ;kill ^ICDLOAD global after installation by looping through top level nodes if $ZU is not available in the current Cache version
"RTN","ICD1864B",147,0)
KILNODES ;
"RTN","ICD1864B",148,0)
 N ICDDA
"RTN","ICD1864B",149,0)
 S ICDDA="" F  S ICDDA=$O(^ICDLOAD(ICDDA)) Q:ICDDA=""  K ^ICDLOAD(ICDDA)
"RTN","ICD1864B",150,0)
 Q
"RTN","ICD1864B",151,0)
 ;ICD1864B
"RTN","ICDCOD")
0^17^B7196903^B5702581
"RTN","ICDCOD",1,0)
ICDCOD ;ALB/ABR/ADL/KUM - INQUIRE TO ICD CODES ;10/23/00 11:36am
"RTN","ICDCOD",2,0)
 ;;18.0;DRG Grouper;**7,57,64**;Oct 20, 2000;Build 103
"RTN","ICDCOD",3,0)
 ;;ADL;Update for CSV project - 03/20/03
"RTN","ICDCOD",4,0)
 ;;KUM;Added new items to search ICD-10 diagnosis and ICD-10 procedure code
"RTN","ICDCOD",5,0)
 ;
"RTN","ICDCOD",6,0)
 ;This routine allows entry of an ICD9 or ICD10 code, and returns the description.
"RTN","ICDCOD",7,0)
 ;It also alerts the user if it is an inactive code.
"RTN","ICDCOD",8,0)
 ;
"RTN","ICDCOD",9,0)
 ; $$ICDDX^ICDEX covered by ICR#5747
"RTN","ICDCOD",10,0)
 ; $$ICDOP^ICDEX covered by ICR#5747
"RTN","ICDCOD",11,0)
 ;
"RTN","ICDCOD",12,0)
EN ;
"RTN","ICDCOD",13,0)
 N DIRUT,DTOUT,DUOUT,DIR,DIC,DR,DIQ,X,Y,ICDTMP,ICDSYS
"RTN","ICDCOD",14,0)
DATE D EFFDATE^ICDDRGM G EXIT:$D(DUOUT),EXIT:$D(DTOUT)
"RTN","ICDCOD",15,0)
 F  S DIR(0)="SO^1:ICD 9 DIAGNOSIS CODE;2:ICD 9 OPERATION/PROCEDURE CODE;3:ICD 10 DIAGNOSIS CODE;4:ICD 10 OPERATION/PROCEDURE CODE" D ^DIR Q:Y<0!$D(DIRUT)  D @Y  Q:$D(DTOUT)
"RTN","ICDCOD",16,0)
 G DATE
"RTN","ICDCOD",17,0)
 ;
"RTN","ICDCOD",18,0)
1 ;ICD-9 DIAGNOSIS CODE
"RTN","ICDCOD",19,0)
 S ICDSYS="ICD9"
"RTN","ICDCOD",20,0)
 S IENT="I"
"RTN","ICDCOD",21,0)
 F  W !! S DIC("A")="Select ICD-9 Diagnosis: ",Y=$$SEARCH^ICDSAPI(80,"I $P($$ICDDX^ICDEX(+$G(Y),$G(ICDDATE),1,IENT),U,1)>0","AEMQZI",$G(ICDDATE)) Q:Y<=0  D
"RTN","ICDCOD",22,0)
 . S ICDTMP=$$ICDDX^ICDEX(+$G(Y),$G(ICDDATE),1,IENT)
"RTN","ICDCOD",23,0)
 . W !!,$P(ICDTMP,U,2),?15,$P(ICDTMP,U,4),!,$P(ICDTMP,U,11),"     ",$P(ICDTMP,U,18),!  ;add printing of descript disclaimer msg
"RTN","ICDCOD",24,0)
 . I '$P(ICDTMP,U,10) W "   **CODE INACTIVE" I $P(ICDTMP,U,12)'="" S Y=$P(ICDTMP,U,12) D DD^%DT W " AS OF   ",Y," **",!
"RTN","ICDCOD",25,0)
 Q
"RTN","ICDCOD",26,0)
 ;
"RTN","ICDCOD",27,0)
2 ;ICD-9 OPERATION/PROCEDURE
"RTN","ICDCOD",28,0)
 S IENT="I"
"RTN","ICDCOD",29,0)
 F  W !! S DIC("A")="Select ICD-9 Procedure: ",Y=$$SEARCH^ICDSAPI(80.1,"I $P($$ICDOP^ICDEX(+$G(Y),$G(ICDDATE),2,IENT),U,1)>0","AEMQZI",$G(ICDDATE)) Q:Y<=0  D
"RTN","ICDCOD",30,0)
 . S ICDTMP=$$ICDOP^ICDEX(+$G(Y),$G(ICDDATE),2,IENT)
"RTN","ICDCOD",31,0)
 . W !!,$P(ICDTMP,U,2),?15,$P(ICDTMP,U,5),!,$P(ICDTMP,U,11),"     ",$P(ICDTMP,U,14),!  ;add printing of descript disclaimer msg
"RTN","ICDCOD",32,0)
 . I '$P(ICDTMP,U,10) W "   **CODE INACTIVE" I $P(ICDTMP,U,12)'="" S Y=$P(ICDTMP,U,12) D DD^%DT W " AS OF   ",Y," **",!
"RTN","ICDCOD",33,0)
 Q
"RTN","ICDCOD",34,0)
3 ;ICD-10 DIAGNOSIS CODE
"RTN","ICDCOD",35,0)
 D ^ICDDSLK
"RTN","ICDCOD",36,0)
 Q
"RTN","ICDCOD",37,0)
 ;
"RTN","ICDCOD",38,0)
4 ;ICD-10 OPERATION/PROCEDURE
"RTN","ICDCOD",39,0)
 D ^ICDCODLK
"RTN","ICDCOD",40,0)
 Q
"RTN","ICDCOD",41,0)
EXIT Q  ;Exit subroutine
"RTN","ICDCODLK")
0^19^B33886229^n/a
"RTN","ICDCODLK",1,0)
ICDCODLK ;KUM - LOOK UP ICD-10 PROCEDURE CODE;12/07/2011
"RTN","ICDCODLK",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICDCODLK",3,0)
 ;
"RTN","ICDCODLK",4,0)
 ; ICDDATE is EFFECTIVE DATE that passed from Calling Routine
"RTN","ICDCODLK",5,0)
 ;
"RTN","ICDCODLK",6,0)
EN ; Initialize variables
"RTN","ICDCODLK",7,0)
 W @IOF D LOOK
"RTN","ICDCODLK",8,0)
 G EXIT
"RTN","ICDCODLK",9,0)
LOOK ; Look-up term
"RTN","ICDCODLK",10,0)
 W !! K X S ICDPRC="" D ASK K DIC
"RTN","ICDCODLK",11,0)
AGAIN ; Try again?
"RTN","ICDCODLK",12,0)
 W !,"Try another" S %=$S(+($$X):1,1:2)
"RTN","ICDCODLK",13,0)
 D YN^DICN I %=-1!(%=2) Q
"RTN","ICDCODLK",14,0)
 I '% W !!,"You have searched for a string in the Lexicon, do you want to" G AGAIN
"RTN","ICDCODLK",15,0)
 I +($$X)&(%=1) G LOOK
"RTN","ICDCODLK",16,0)
 I '+($$X)&(%=1) G LOOK
"RTN","ICDCODLK",17,0)
 I (+($$X)&(%=2))!('+($$X)&(%=1)) Q
"RTN","ICDCODLK",18,0)
 G LOOK Q 
"RTN","ICDCODLK",19,0)
ASK ; Get user input
"RTN","ICDCODLK",20,0)
 N DUOUT,DTOUT,DIR,DIRUT,DIROUT,ICDDATE1,ICDT1,ICDX,ICDXX,ICDPRT
"RTN","ICDCODLK",21,0)
 I $G(ICDXX1) S ICDPRT="Enter Operation/Procedure (ICD 10):"
"RTN","ICDCODLK",22,0)
 I $G(ICDDATE)="" D EFFDATE^ICDDRGM G EXIT:$D(DUOUT),EXIT:$D(DTOUT)
"RTN","ICDCODLK",23,0)
 I $G(ICDDATE)'="" S ICDDATE1=ICDDATE
"RTN","ICDCODLK",24,0)
 S ICDRES=1
"RTN","ICDCODLK",25,0)
 I $G(ICDPRC)="" S ICDPRC="" D GICDPRC
"RTN","ICDCODLK",26,0)
 I ICDPRC="" S ICDX=0
"RTN","ICDCODLK",27,0)
 I ICDPRC'="" S ICDX=1
"RTN","ICDCODLK",28,0)
 I ICDPRC'["*" G ASKCONT1
"RTN","ICDCODLK",29,0)
 I ICDPRC["*" S ICDPRC=$P(ICDPRC,"*",1) ; D GICDPRC
"RTN","ICDCODLK",30,0)
 ;S ICDPRC="",ICDX=0
"RTN","ICDCODLK",31,0)
 F ICDT1=1:1 Q:($L($G(ICDPRC))>=7)!(ICDPRC["^")!(ICDRES=0)  D 
"RTN","ICDCODLK",32,0)
 . S ICDRES=$$PCSDIG^LEX10CS(ICDPRC,ICDDATE1)
"RTN","ICDCODLK",33,0)
 . I ICDRES=1 D
"RTN","ICDCODLK",34,0)
 . . D LOAD
"RTN","ICDCODLK",35,0)
 . . D PRCDESCB
"RTN","ICDCODLK",36,0)
 . . D PRCDESC
"RTN","ICDCODLK",37,0)
 . . S X=$$SEL^ICDSELPS(.ICDS,5)
"RTN","ICDCODLK",38,0)
 . . I X'=-1 S ICDPRC=ICDPRC_$P(X,"^",1)
"RTN","ICDCODLK",39,0)
 . . S ICDX=1
"RTN","ICDCODLK",40,0)
 . . D GICDPRC
"RTN","ICDCODLK",41,0)
 . I ICDRES'=1 W !,ICDPRC_" IS NOT A VALID ICD PROCEDURE CODE" G EXIT
"RTN","ICDCODLK",42,0)
 I $G(ICDXX1),ICDPRC["^^" S ICDPRC=$E(ICDPRC,1,$L(ICDPRC)-2)
"RTN","ICDCODLK",43,0)
 I '$G(ICDXX1),ICDPRC["^" G EXIT
"RTN","ICDCODLK",44,0)
ASKCONT1 ; Tag to continue when ICDPRC doesnt have *
"RTN","ICDCODLK",45,0)
 I $L($G(ICDPRC))=7&(ICDPRC'["^") D
"RTN","ICDCODLK",46,0)
 . S ICDRES=$$PCSDIG^LEX10CS(ICDPRC,ICDDATE1)
"RTN","ICDCODLK",47,0)
 . I ICDRES=1 D
"RTN","ICDCODLK",48,0)
 . . S ICDPDESC=LEXPCDAT("PCSDESC")
"RTN","ICDCODLK",49,0)
 . . S ICDPSTS=LEXPCDAT("STATUS")
"RTN","ICDCODLK",50,0)
 . . D PRCDESCB
"RTN","ICDCODLK",51,0)
 . . D PRCDESC
"RTN","ICDCODLK",52,0)
 . . W !!,ICDPRC,?15,ICDPDESC,!  ;add printing of descript disclaimer msg
"RTN","ICDCODLK",53,0)
 . . I $G(ICDXX1) S ICDXX=+$$CODEN^ICDEX(ICDPRC,80.1)
"RTN","ICDCODLK",54,0)
 . . I '$P(ICDPSTS,"^",1) W "   **CODE INACTIVE" I $P(ICDPSTS,"^",2)'="" S Y=$P(ICDPSTS,"^",2) D DD^%DT W " AS OF   ",Y," **",!
"RTN","ICDCODLK",55,0)
 . I ICDRES'=1 D
"RTN","ICDCODLK",56,0)
 . . W !,ICDPRC_" IS NOT A VALID PROCEDURE CODE."
"RTN","ICDCODLK",57,0)
 I $L($G(ICDPRC))=7&(ICDPRC'["^")&(ICDRES=1)&('$P($G(ICDPSTS),"^",1)) G ASKCNT2
"RTN","ICDCODLK",58,0)
 I $L($G(ICDPRC))'=7,ICDPRC'="",ICDPRC'["^" S ICDRES=0 W !,ICDPRC_" IS NOT A VALID ICD PROCEDURE CODE"_$S($G(ICDXX1):". IGNORING THE PROCEDURE CODE",1:".")
"RTN","ICDCODLK",59,0)
 S (X,Y)=""
"RTN","ICDCODLK",60,0)
 I ICDPRC["^" S X="^",Y=""
"RTN","ICDCODLK",61,0)
 S:$G(ICDXX) (X,Y)=ICDXX
"RTN","ICDCODLK",62,0)
 I $G(ICDXX1) D
"RTN","ICDCODLK",63,0)
 . I (ICDRES'=1)!(($L($G(ICDPRC))'=7)&(ICDPRC'="")&(ICDPRC'["^")) S X=0 R ICDQWE:300 K ICDQWE Q
"RTN","ICDCODLK",64,0)
 . I ICDPRC'="" D
"RTN","ICDCODLK",65,0)
 . . W !,"OK? (Yes/No) " S %=1
"RTN","ICDCODLK",66,0)
 . . D YN^DICN
"RTN","ICDCODLK",67,0)
 . . I %'=1 S X=0
"RTN","ICDCODLK",68,0)
ASKCNT2 K ICDDATE1,ICDRES,ICDPDESC,ICDPSTS,LEXPCDAT,ICDPRCT,ICDPRCX,ICDLEX
"RTN","ICDCODLK",69,0)
 Q
"RTN","ICDCODLK",70,0)
INPHLP ; Look-up help
"RTN","ICDCODLK",71,0)
 Q:X["^^" "^^"  Q:X["^" "^"
"RTN","ICDCODLK",72,0)
 W !,"      Enter a ""free text"" term.  Best results occur using one to "
"RTN","ICDCODLK",73,0)
 W !,"      three full or partial words without a suffix"
"RTN","ICDCODLK",74,0)
 W:$G(X)'["??" "."
"RTN","ICDCODLK",75,0)
 W:$G(X)["??" " (i.e., ""DIABETES"","
"RTN","ICDCODLK",76,0)
 W:$G(X)["??" !,"      ""DIAB MELL"",""DIAB MELL INSUL"")"
"RTN","ICDCODLK",77,0)
 W !,"  or  "
"RTN","ICDCODLK",78,0)
 W !,"      Enter a classification code (ICD/CPT etc) to find the single "
"RTN","ICDCODLK",79,0)
 W !,"      term associated with the code."
"RTN","ICDCODLK",80,0)
 W:$G(X)["??" "  Example, a lookup of code 239.0 "
"RTN","ICDCODLK",81,0)
 W:$G(X)["??" !,"      returns one and only one term, that is the preferred "
"RTN","ICDCODLK",82,0)
 W:$G(X)["??" !,"      term for the code 239.0, ""Neoplasm of unspecified nature "
"RTN","ICDCODLK",83,0)
 W:$G(X)["??" !,"      of digestive system"""
"RTN","ICDCODLK",84,0)
 W !,"  or  "
"RTN","ICDCODLK",85,0)
 W !,"      Enter a classification code (ICD/CPT etc) followed by a plus"
"RTN","ICDCODLK",86,0)
 W !,"      sign (+) to retrieve all terms associated with the code."
"RTN","ICDCODLK",87,0)
 W:$G(X)["??" "  Example,"
"RTN","ICDCODLK",88,0)
 W:$G(X)["??" !,"      a lookup of 239.0+ returns all terms that are linked to the "
"RTN","ICDCODLK",89,0)
 W:$G(X)["??" !,"      code 239.0."
"RTN","ICDCODLK",90,0)
 Q
"RTN","ICDCODLK",91,0)
EXIT ; Clean up environment and quit
"RTN","ICDCODLK",92,0)
 K %,DIC,DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,Y,ICDLEX,ICDPRCX,ICDPRCT
"RTN","ICDCODLK",93,0)
 Q
"RTN","ICDCODLK",94,0)
X(ICDLEX) ; Evaluate X
"RTN","ICDCODLK",95,0)
 Q:$L($G(X)) 1  Q 0
"RTN","ICDCODLK",96,0)
Y(ICDLEX) ; Evaluate Y
"RTN","ICDCODLK",97,0)
 Q:+($G(Y))>1 1  Q 0
"RTN","ICDCODLK",98,0)
LOAD ; Load data
"RTN","ICDCODLK",99,0)
 K ICDS
"RTN","ICDCODLK",100,0)
 S ICDLOAD1=1
"RTN","ICDCODLK",101,0)
 S ICDLOADP=""
"RTN","ICDCODLK",102,0)
 S ICDLOAD="" F  S ICDLOAD=$O(LEXPCDAT("NEXLEV",ICDLOAD)) Q:ICDLOAD=""  D
"RTN","ICDCODLK",103,0)
 . I ICDLOAD'=ICDLOADP D
"RTN","ICDCODLK",104,0)
 . . S ICDS(ICDLOAD1,0)=ICDLOAD
"RTN","ICDCODLK",105,0)
 . . S ICDS(ICDLOAD1,"LEX")=LEXPCDAT("NEXLEV",ICDLOAD,"DESC")
"RTN","ICDCODLK",106,0)
 . . S ICDLOAD1=ICDLOAD1+1
"RTN","ICDCODLK",107,0)
 . . S ICDLOADP=ICDLOAD
"RTN","ICDCODLK",108,0)
 K ICDLOAD1,ICDLOADP,ICDLOAD
"RTN","ICDCODLK",109,0)
 Q
"RTN","ICDCODLK",110,0)
PRCDESC ; Display Descriptions of each character
"RTN","ICDCODLK",111,0)
 S ICDPRCT=ICDPRC,ICDPRCT1="",ICDX=0
"RTN","ICDCODLK",112,0)
 F ICDTEMP=1:1 Q:ICDPRCT=""  D
"RTN","ICDCODLK",113,0)
 . S ICDC=$E(ICDPRCT,1,1)
"RTN","ICDCODLK",114,0)
 . S ICDRES=$$PCSDIG^LEX10CS(ICDPRCT1,ICDDATE1)
"RTN","ICDCODLK",115,0)
 . I ICDRES'=1 D
"RTN","ICDCODLK",116,0)
 . . S ICDPRCT=""
"RTN","ICDCODLK",117,0)
 . I ICDRES=1 D
"RTN","ICDCODLK",118,0)
 . . S ICDLOAD="" F  S ICDLOAD=$O(LEXPCDAT("NEXLEV",ICDLOAD)) Q:ICDLOAD=""!(ICDLOAD=ICDC)
"RTN","ICDCODLK",119,0)
 . . I ICDLOAD=ICDC W ICDC_" - "_LEXPCDAT("NEXLEV",ICDLOAD,"DESC") W !
"RTN","ICDCODLK",120,0)
 . . S ICDPRCT=$E(ICDPRCT,2,$L(ICDPRCT))
"RTN","ICDCODLK",121,0)
 . . S ICDPRCT1=ICDPRCT1_ICDC
"RTN","ICDCODLK",122,0)
 K ICDTEMP,ICDPRCT,ICDPRCT1,ICDC,ICDLOAD
"RTN","ICDCODLK",123,0)
 Q
"RTN","ICDCODLK",124,0)
GICDPRC ; Get ICDPRC from User
"RTN","ICDCODLK",125,0)
 S ICDPRCX="" S ICDPRCT=""
"RTN","ICDCODLK",126,0)
AA ; Read character by character
"RTN","ICDCODLK",127,0)
 W @IOF
"RTN","ICDCODLK",128,0)
 I $G(ICDX)=1 D PRCDESC  W !
"RTN","ICDCODLK",129,0)
 W "Press '*' to display available choices for next character or '^' to exit."
"RTN","ICDCODLK",130,0)
 I $G(ICDPRT)="" S ICDPRT="ICD-10 Procedure code:"
"RTN","ICDCODLK",131,0)
 W !,ICDPRT_ICDPRC S ICDREAD="R *ICDA:300 I '$T S ICDA=13"
"RTN","ICDCODLK",132,0)
 X ICDREAD
"RTN","ICDCODLK",133,0)
 ; Show choices on "*"
"RTN","ICDCODLK",134,0)
 I ICDA=42 G BB
"RTN","ICDCODLK",135,0)
 ; Exit when Enter and is full length else ignore 
"RTN","ICDCODLK",136,0)
 ;I ICDA=13 G:$L(ICDPRC)>6 BB S ICDX=1 G AA
"RTN","ICDCODLK",137,0)
 I ICDA=13,$G(ICDXX1) S:$L(ICDPRC)'=7 ICDPRC=ICDPRC_$C(94)_$C(94) G BB
"RTN","ICDCODLK",138,0)
 I ICDA=13,'$G(ICDXX1) G:$L(ICDPRC)>6 BB S ICDX=1 G AA
"RTN","ICDCODLK",139,0)
 ; If Backspace is entered, truncate last character and display the ICDPRC
"RTN","ICDCODLK",140,0)
 I ICDA=127 S ICDPRC=$E(ICDPRC,1,$L(ICDPRC)-1) S ICDX=1 G AA
"RTN","ICDCODLK",141,0)
 ; If ^ is entered, exit
"RTN","ICDCODLK",142,0)
 I ICDA=94 S ICDPRC=ICDPRC_$C(ICDA) G BB
"RTN","ICDCODLK",143,0)
 ; check for valid characters
"RTN","ICDCODLK",144,0)
 I ICDA<48!((ICDA>57)&(ICDA<65))!((ICDA>90)&(ICDA<97))!(ICDA>122) G AA
"RTN","ICDCODLK",145,0)
 ; Any character other than Enter or Backspace
"RTN","ICDCODLK",146,0)
 I ICDA'=127 D
"RTN","ICDCODLK",147,0)
 . S ICDPRC=ICDPRC_$C(ICDA)
"RTN","ICDCODLK",148,0)
 . S ICDX=1 G AA
"RTN","ICDCODLK",149,0)
BB ;Exit
"RTN","ICDCODLK",150,0)
 W !
"RTN","ICDCODLK",151,0)
 K ICDA,ICDREAD
"RTN","ICDCODLK",152,0)
 Q
"RTN","ICDCODLK",153,0)
PRCDESCB ; Call Before PRCDESC
"RTN","ICDCODLK",154,0)
 W @IOF
"RTN","ICDCODLK",155,0)
 W "Press '*' to display available choices for next character or '^' to exit."
"RTN","ICDCODLK",156,0)
 W !,"ICD-10 Procedure code:"_ICDPRC
"RTN","ICDCODLK",157,0)
 W !
"RTN","ICDCODLK",158,0)
 Q
"RTN","ICDDG010")
0^3^B87527545^n/a
"RTN","ICDDG010",1,0)
ICDDG010 ;KUM - DRG GROUPER PROCESSING BEGINS ;05/02/12 4:06pm
"RTN","ICDDG010",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICDDG010",3,0)
 ;
"RTN","ICDDG010",4,0)
 ;GROUPING PROCESS BEGINS
"RTN","ICDDG010",5,0)
 ;
"RTN","ICDDG010",6,0)
GROUP ;
"RTN","ICDDG010",7,0)
 N ICDFOUND,ICDRGH,ICDNODOD,ICDPREQ
"RTN","ICDDG010",8,0)
 S (ICDFOUND,ICDNODOD)=0
"RTN","ICDDG010",9,0)
 D PRECOND I ICDRTC=4,ICDRG=999 G GLAST ; Handle PRE-CONDITIONS
"RTN","ICDDG010",10,0)
 I 'ICDFOUND D VARIABLS^ICDDRGX2
"RTN","ICDDG010",11,0)
 I 'ICDFOUND D MDCSPROC ; PROCESSING FOR MDC5, MDC19, MDC23, MDC14, MDC20, MDC22, MDC15
"RTN","ICDDG010",12,0)
 ;MDCSPROC may have found a DRG group but still needs to Do DODRG to apply CC/MCC rules, so ICDFOUND=1 and ICDNODOD=0
"RTN","ICDDG010",13,0)
 D NEONATE ; Handle Neonatal Processing
"RTN","ICDDG010",14,0)
 ;NEONATE may have found an actual DRG and does not need to Do DODRG to apply CC/MCC rules, so ICDFOUND=1 and ICDNODOD=1
"RTN","ICDDG010",15,0)
 I 'ICDFOUND D SURGICAL ; Apply Surgical Hierarchy
"RTN","ICDDG010",16,0)
 I 'ICDFOUND D DEFAULT ; Default Processing
"RTN","ICDDG010",17,0)
                                ; MDC24 PROCESSING
"RTN","ICDDG010",18,0)
                                ; MDC25 PROCESSING
"RTN","ICDDG010",19,0)
                                ; PREMDC PROCESSING
"RTN","ICDDG010",20,0)
                                ; MDC4 PROCESSING
"RTN","ICDDG010",21,0)
 D END
"RTN","ICDDG010",22,0)
GLAST ;
"RTN","ICDDG010",23,0)
 S ICDDRG=ICDRG
"RTN","ICDDG010",24,0)
 D KILL^ICDDRG
"RTN","ICDDG010",25,0)
 S:+$G(ICDRG)'>0 ICDRG=999
"RTN","ICDDG010",26,0)
 Q
"RTN","ICDDG010",27,0)
 ;
"RTN","ICDDG010",28,0)
PRECOND   ; PRE - CONDITIONS
"RTN","ICDDG010",29,0)
 I $D(ICDSEX(1))&($D(ICDSEX(2))) S ICDRTC=4,ICDRG=999
"RTN","ICDDG010",30,0)
 Q
"RTN","ICDDG010",31,0)
 ;
"RTN","ICDDG010",32,0)
MDCSPROC  ; Processing for MDCs 5, 19, 23, 14, 20, 22 and 15
"RTN","ICDDG010",33,0)
 N ICDMDCL
"RTN","ICDDG010",34,0)
 S ICDMDCL="/14/15/17/18/19/20/23/"[("/"_ICDMDC_"/")
"RTN","ICDDG010",35,0)
 I 'ICDMDCL D:ICDOPCT<2  I "^983^986^989^"[(U_ICDRG_U) S ICDFOUND=1 Q
"RTN","ICDDG010",36,0)
 . I $D(ICDF) Q
"RTN","ICDDG010",37,0)
 . I $D(ICD10PD("M")),'$D(ICD10OR("y")) S ICDOPCT=0 Q
"RTN","ICDDG010",38,0)
 . I $D(ICD10OR("O")),ICDNOR=ICDONR,ICDNOR>0,'$D(ICDPDRG(769)),'$D(ICD10ORNI("p")) S ICDRG=$S($D(ICD10ORNI("O")):983,$D(ICD10ORNI("y")):986,$D(ICD10ORNI("z")):989,1:983),ICDFOUND=1 Q
"RTN","ICDDG010",39,0)
 . I ICDOPNR S ICDRG=$S($D(ICD10ORNI("y")):986,1:983),ICDOPNR=0,ICDFOUND=1 Q
"RTN","ICDDG010",40,0)
 ;
"RTN","ICDDG010",41,0)
 ;if number of non-extensive ORs eqs # OR, 477
"RTN","ICDDG010",42,0)
 ;
"RTN","ICDDG010",43,0)
 I 'ICDMDCL,'$D(ICD10ORNI("y"))&($D(ICD10ORNI))&($D(ICD10ORNI("z"))) D  I ICDRG=989 S ICDFOUND=1 Q
"RTN","ICDDG010",44,0)
 . I $D(ICDF) Q
"RTN","ICDDG010",45,0)
 . NEW K  S K=$$ORNI(ICDORNI) I K=ICDOPCT S ICDRG=989,ICDFOUND=1 Q
"RTN","ICDDG010",46,0)
 ;
"RTN","ICDDG010",47,0)
 ;if number of non-extensive ORs+prostatics eqs # OR, 476
"RTN","ICDDG010",48,0)
 ;
"RTN","ICDDG010",49,0)
 I 'ICDMDCL,$D(ICD10ORNI("y"))&($D(ICDORNI)) D  I ICDRG=986 S ICDFOUND=1 Q
"RTN","ICDDG010",50,0)
 . N K S K=$$ORNI(ICDORNI) I K=ICDOPCT&(ICDNOR=ICDONR)  S ICDRG=986 S ICDFOUND=1 Q
"RTN","ICDDG010",51,0)
 I 'ICDMDCL,ICDNOR=ICDONR&(ICDOPCT>0) S ICDRG=983,ICDFOUND=1 Q
"RTN","ICDDG010",52,0)
 I ICDMDC=5,'$D(ICD10OR("O")) S ICDRTC=$S(ICDEXP="":5,1:"") S:ICDRTC'="" ICDRG=999 D:ICDRTC="" MI Q
"RTN","ICDDG010",53,0)
 I ICDMDC=19,ICDOCNT>0,$D(ICD10OR("O"))  S (ICDRG,ICDRGH)=876,ICDFOUND=1 Q
"RTN","ICDDG010",54,0)
 I ICDMDC=23,$D(ICD10OR("O"))!($D(ICD10ORNI("O")))  S ICDRG=941,ICDFOUND=1 Q
"RTN","ICDDG010",55,0)
 ;I ICDMDC=14 D ^ICDDRG14 I ICDRG]"" S ICDFOUND=1 Q
"RTN","ICDDG010",56,0)
 I ICDMDC=20 S ICDRTC=$S(ICDDMS="":7,1:"") I ICDDMS'=0 S ICDRG=$S(ICDDMS="":999,1:894),ICDFOUND=1 Q
"RTN","ICDDG010",57,0)
 I ICDMDC=22 S ICDRTC=$S(ICDTRS="":6,1:"") S:ICDRTC'="" ICDRG=999,ICDFOUND=1 D:ICDRTC="" CKBURN
"RTN","ICDDG010",58,0)
 ;I ICDMDC=15 S ICDRTC=$S(ICDEXP="":5,ICDTRS="":6,1:"") I ICDTRS'=0 S ICDRG=$S(ICDRTC'="":999,1:789),ICDFOUND=1 Q
"RTN","ICDDG010",59,0)
 ;
"RTN","ICDDG010",60,0)
 Q
"RTN","ICDDG010",61,0)
NEONATE   ; Neonatal Processing
"RTN","ICDDG010",62,0)
 N ICDOLD
"RTN","ICDDG010",63,0)
 S ICDOLD=29,X1=$S($G(DGADM):$G(DGADM),1:DT),X2=$G(DOB) I X1,X2 D ^%DTC S ICDOLD=X
"RTN","ICDDG010",64,0)
 I ICDOLD<29 S ICDMDC=15
"RTN","ICDDG010",65,0)
 E  Q
"RTN","ICDDG010",66,0)
 I ICDMDC=15 S ICDRTC=$S(ICDEXP="":5,ICDTRS="":6,1:"") I +ICDTRS'=0 D  S (ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",67,0)
 . S ICDRG=$S(ICDRTC'="":999,1:789) ;Transferred to another acute care facility
"RTN","ICDDG010",68,0)
 I ICDMDC'=15 Q
"RTN","ICDDG010",69,0)
 I ICDEXP S ICDRG=789,(ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",70,0)
 ;If no Procedure Codes entered or no DRGs found for Procedure Codes that were entered:
"RTN","ICDDG010",71,0)
 I 'ICDNOR!('$D(ICDODRG)) S ICDRG=$O(ICDPDRG(0)) X "I ICDMDC=15,$D(ICDSDRG),$O(ICDSDRG(0))<ICDRG D NEONATF^ICDDRG0" D  Q
"RTN","ICDDG010",72,0)
 . N X,X1,X2,%
"RTN","ICDDG010",73,0)
 . I ICDOLD<29 D NBCOMP Q
"RTN","ICDDG010",74,0)
 . I ICDRG<789!(ICDRG>795) Q
"RTN","ICDDG010",75,0)
 . I $O(ICDRG(795)) S ICDRG=$O(ICDRG(795)),(ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",76,0)
 . I 'ICDRG S ICDRG=999,ICDRTC=8
"RTN","ICDDG010",77,0)
 I AGE="",ICDMDC=3 S ICDRTC=3 S ICDRG=999,(ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",78,0)
 S ICDDRG=ICDRG,(ICDFOUND,ICDNODOD)=1
"RTN","ICDDG010",79,0)
 Q
"RTN","ICDDG010",80,0)
 ;
"RTN","ICDDG010",81,0)
NEONATF ;NEONATE - Continuation of xecute line
"RTN","ICDDG010",82,0)
 S ICDRG=$S($D(ICDPDRG(795)):795,$D(ICDPDRG(791)):791,1:$O(ICDSDRG(0)))
"RTN","ICDDG010",83,0)
 Q
"RTN","ICDDG010",84,0)
 ;
"RTN","ICDDG010",85,0)
NBCOMP ; check for complication related to Newborn
"RTN","ICDDG010",86,0)
 N ICDSDXCK,ICDN,ICDX,ICDPREM,ICDMJR,ICDIMM,ICDSIG
"RTN","ICDDG010",87,0)
 ;Check for Premature and Major Problem in PDX or SDX
"RTN","ICDDG010",88,0)
 ;ICDPREM 1=PREMATURE (ID="p")  ICDIMM 1=EXTREME IMMATURE (ID="E")  ICDMJR 1=MAJORPROBLEMS (ID="J")
"RTN","ICDDG010",89,0)
 S (ICDN,ICDPREM,ICDIMM,ICDMJR,ICDSIG)=0 F  S ICDN=$O(ICDDX(ICDN)) Q:'ICDN  D
"RTN","ICDDG010",90,0)
 .S:$D(ICD10PD("p"))!($D(ICD10SD("p"))) ICDPREM=1 S:$D(ICD10PD("J"))!($D(ICD10SD("J"))) ICDMJR=1
"RTN","ICDDG010",91,0)
 .S:$D(ICD10PD("E"))!($D(ICD10SD("E"))) ICDIMM=1 S:$D(ICD10PD("S"))!($D(ICD10SD("S"))) ICDSIG=1
"RTN","ICDDG010",92,0)
 I ICDSIG S ICDRG=794,(ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",93,0)
 I ICDIMM S ICDRG=790,(ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",94,0)
 I ICDPREM=1 S:ICDMJR ICDRG=791,(ICDFOUND,ICDNODOD)=1 S:'ICDMJR ICDRG=792,(ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",95,0)
 I 'ICDPREM S:ICDMJR ICDRG=793,(ICDFOUND,ICDNODOD)=1 S:'ICDMJR ICDRG=795,(ICDFOUND,ICDNODOD)=1 Q
"RTN","ICDDG010",96,0)
 Q
"RTN","ICDDG010",97,0)
 ;
"RTN","ICDDG010",98,0)
SURGICAL ; Apply Surgical Hierarchy
"RTN","ICDDG010",99,0)
 N ICDJ,ICDSTOP,ICDDGIEN,ICDDRGT,ICDMIEN
"RTN","ICDDG010",100,0)
 S ICDDRG=0,ICDSTOP=0,ICDDA=$O(^ICDRS("B",ICDDATE_".1"),-1) I 'ICDDA Q
"RTN","ICDDG010",101,0)
 S ICDIEN=$O(^ICDRS("B",ICDDA,"")) I 'ICDIEN Q
"RTN","ICDDG010",102,0)
 S ICDMIEN=$O(^ICDRS(ICDIEN,1,"B",ICDMDC,"")) I 'ICDMIEN Q
"RTN","ICDDG010",103,0)
 F ICDJ=0:0 S ICDJ=$O(^ICDRS(ICDIEN,1,ICDMIEN,2,"C",ICDJ)) Q:ICDJ'>0!(ICDSTOP)  S ICDDGIEN=$O(^ICDRS(ICDIEN,1,ICDMIEN,2,"C",ICDJ,"")) I ICDDGIEN D
"RTN","ICDDG010",104,0)
 . S ICDDRGT=$P(^ICDRS(ICDIEN,1,ICDMIEN,2,ICDDGIEN,0),U,1) I $D(ICDODRG(ICDDRGT)) D
"RTN","ICDDG010",105,0)
 . . S ICDCCT=$$ICDRGCC(ICDDRGT,ICDDATE) I ICDCCT=ICDCC S ICDRG=ICDDRGT,ICDSTOP=1 Q
"RTN","ICDDG010",106,0)
 Q
"RTN","ICDDG010",107,0)
 ;
"RTN","ICDDG010",108,0)
ICDRGCC(DRG,CDT) ;Get CC/MCC flag from DRG
"RTN","ICDDG010",109,0)
 ; 
"RTN","ICDDG010",110,0)
 ; Input:
"RTN","ICDDG010",111,0)
 ;   DRG  DRG Number
"RTN","ICDDG010",112,0)
 ;   CDT                Effective Date
"RTN","ICDDG010",113,0)
 ;
"RTN","ICDDG010",114,0)
 ; Output: CC/MCC Flag 0-3
"RTN","ICDDG010",115,0)
 ;
"RTN","ICDDG010",116,0)
 N ICDCC,ICDIEN,ICDDA,ICDAIEN
"RTN","ICDDG010",117,0)
 S ICDCC=0,ICDIEN=$O(^ICD("B","DRG"_DRG,"")) I ICDIEN D
"RTN","ICDDG010",118,0)
 . S ICDDA=$O(^ICD(ICDIEN,2,"B",(CDT_".1")),-1) I ICDDA D
"RTN","ICDDG010",119,0)
 . . S ICDAIEN=$O(^ICD(ICDIEN,2,"B",ICDDA,"")) I ICDAIEN D
"RTN","ICDDG010",120,0)
 . . . S ICDCC=$P(^ICD(ICDIEN,2,ICDAIEN,0),U,4)
"RTN","ICDDG010",121,0)
 Q ICDCC
"RTN","ICDDG010",122,0)
 ;
"RTN","ICDDG010",123,0)
DEFAULT G:ICDMDC=15 GETMOR S (ICDRG,ICDRGH)=$O(ICDODRG(0)) G:ICDRG'>0 ENTER
"RTN","ICDDG010",124,0)
 D DODRG
"RTN","ICDDG010",125,0)
 G:ICDRG'>0 AGAIN
"RTN","ICDDG010",126,0)
 Q
"RTN","ICDDG010",127,0)
ENTER I 'ICDNOR,ICDORNR'=0,ICDMDC'=20,ICDMDC'=15 S ICDRG=983 Q
"RTN","ICDDG010",128,0)
GETMOR S (ICDRG,ICDRGH)=$O(ICDPDRG(0)) S:ICDRG'>0 (ICDRG,ICDRGH)=998
"RTN","ICDDG010",129,0)
CKDRG D DODRG
"RTN","ICDDG010",130,0)
 Q
"RTN","ICDDG010",131,0)
 ;I ICDRG="" K ICDPDRG(ICDRGH) G GETMOR
"RTN","ICDDG010",132,0)
DODRG ;Go to DRG file and retrieve table entry to use if defined
"RTN","ICDDG010",133,0)
 Q:ICDNODOD=1  ;Actual DRG was found prior Ex: Neonate
"RTN","ICDDG010",134,0)
 N ICDMCV,ICDMCV1,ICDMCV2
"RTN","ICDDG010",135,0)
 N DRGFY,ICDREF S (DRGFY,ICDREF)=""
"RTN","ICDDG010",136,0)
 I ICDRG S DRGFY=$O(^ICD(ICDRG,2,"B",$P(+$G(ICDDATE),".")_.01),-1)
"RTN","ICDDG010",137,0)
 I 'DRGFY S DRGFY=ICDDATE ;default to current fiscal year
"RTN","ICDDG010",138,0)
 S ICDREF=$O(^ICD(+ICDRG,2,"B",+DRGFY,ICDREF))
"RTN","ICDDG010",139,0)
 I ICDREF'="" D
"RTN","ICDDG010",140,0)
 . S ICDREF=$P($G(^ICD(+ICDRG,2,ICDREF,0)),U,3)
"RTN","ICDDG010",141,0)
 . S ICDREF="DRG"_ICDRG_"^"_ICDREF D @ICDREF K ICDREF
"RTN","ICDDG010",142,0)
 Q
"RTN","ICDDG010",143,0)
ORNI(X) ;
"RTN","ICDDG010",144,0)
 N I,K
"RTN","ICDDG010",145,0)
 S K=0 F I=1:1:$L(ICDORNI) I $E(ICDORNI,I,I)="z"!($E(ICDORNI,I,I)="y") S K=K+1
"RTN","ICDDG010",146,0)
 Q K
"RTN","ICDDG010",147,0)
END ;
"RTN","ICDDG010",148,0)
 ; - MDC24 PROCESSING
"RTN","ICDDG010",149,0)
 ; - MDC25 PROCESSING
"RTN","ICDDG010",150,0)
 ; - PREMDC PROCESSING
"RTN","ICDDG010",151,0)
 ; - MDC4 PROCESSING
"RTN","ICDDG010",152,0)
 ; - CHECK FOR MCC/CC
"RTN","ICDDG010",153,0)
 ;
"RTN","ICDDG010",154,0)
 ;MDC24 PROCESSING
"RTN","ICDDG010",155,0)
 D:ICDP24'=""!($D(ICDS24)) CKMST^ICDDRGX1 S ICDDRG=ICDRG
"RTN","ICDDG010",156,0)
 I ICDRG=976!(ICDRG=977)!(ICDRG=24&($G(ICDOR)="")) S ICDRG=$P($G(ICDPDRG),U,2) I ICDRG=24 S ICDRG=99
"RTN","ICDDG010",157,0)
 ;MDC25 PROCESSING
"RTN","ICDDG010",158,0)
 D:$G(ICDP25)=1!(($G(ICDP25)>1)&($D(ICDS25(1)))) CKHIV^ICDDRGX1 S ICDDRG=ICDRG
"RTN","ICDDG010",159,0)
 ;PRE-MDC PROCESSING
"RTN","ICDDG010",160,0)
 ;I $D(ICDNMDC(1)) I ICDNMDC(1)="" D CKNMDC^ICDDRGX1 S ICDDRG=ICDRG K ICDNMDC
"RTN","ICDDG010",161,0)
 S ICDPREQ=0 D PREMDC
"RTN","ICDDG010",162,0)
 Q:ICDPREQ
"RTN","ICDDG010",163,0)
 ;PREMDC may have found an actual DRG and does not need to Do DODRG to apply CC/MCC rules, so ICDFOUND=1 and ICDNODOD=1
"RTN","ICDDG010",164,0)
 ;MDC4 PROCESSING
"RTN","ICDDG010",165,0)
 I ICDRG=983 D CHKMDC4^ICDDRGX1
"RTN","ICDDG010",166,0)
 ; CHECK FOR MCC/CC
"RTN","ICDDG010",167,0)
 D:'ICDNODOD DODRG ;check for MCC/CC
"RTN","ICDDG010",168,0)
 S:ICDRTC="" ICDRTC=0
"RTN","ICDDG010",169,0)
 S ICDTMP=$$DRG^ICDGTDRG(ICDRG,ICDDATE) I '$P(ICDTMP,U,14) S ICDRG=999
"RTN","ICDDG010",170,0)
 Q
"RTN","ICDDG010",171,0)
 G KILL^ICDDRG
"RTN","ICDDG010",172,0)
AGAIN G:'$D(ICDODRG) ENTER
"RTN","ICDDG010",173,0)
 K ICDODRG(ICDRGH) I $O(ICDODRG(ICDRGH))'>0 K ICDODRG Q
"RTN","ICDDG010",174,0)
 S ICDRG=$O(ICDODRG(ICDRGH))
"RTN","ICDDG010",175,0)
 Q
"RTN","ICDDG010",176,0)
 ;
"RTN","ICDDG010",177,0)
CKBURN ; MDC22 - Burns (extensive, full thickness, or non-extensive)
"RTN","ICDDG010",178,0)
 D
"RTN","ICDDG010",179,0)
 . I $D(ICD10PD("*"))!($D(ICD10SD("*"))) S ICDRG=$S($D(ICD10OR("k")):927,1:933) Q
"RTN","ICDDG010",180,0)
 . I $D(ICD10PD("b"))!($D(ICD10SD("b"))) D FTBURN Q
"RTN","ICDDG010",181,0)
 .  S ICDRG=$S(ICDCC!($D(ICD10PD("T")))!($D(ICD10SD("T"))):935,1:935)
"RTN","ICDDG010",182,0)
 Q
"RTN","ICDDG010",183,0)
 ; FTBURN ; full thickness burn check
"RTN","ICDDG010",184,0)
 I $D(ICD10SD("j"))!($D(ICD10OR("k"))) D
"RTN","ICDDG010",185,0)
 . I ICDCC!($D(ICD10PD("T")))!($D(ICD10SD("T")))  S ICDRG=928
"RTN","ICDDG010",186,0)
 . E  S ICDRG=929
"RTN","ICDDG010",187,0)
 E  D
"RTN","ICDDG010",188,0)
 . I ICDCC!($D(ICD10PD("T")))!($D(ICD10SD("T")))  S ICDRG=934
"RTN","ICDDG010",189,0)
 . E  S ICDRG=934
"RTN","ICDDG010",190,0)
 Q
"RTN","ICDDG010",191,0)
 ;
"RTN","ICDDG010",192,0)
FTBURN ; full thickness burn check
"RTN","ICDDG010",193,0)
 I $D(ICD10SD("j"))!($D(ICD10OR("k"))) D
"RTN","ICDDG010",194,0)
 . I ICDCC!($D(ICD10PD("T")))!($D(ICD10SD("T"))) S ICDRG=928
"RTN","ICDDG010",195,0)
 . E  S ICDRG=929
"RTN","ICDDG010",196,0)
 E  D
"RTN","ICDDG010",197,0)
 . I ICDCC!($D(ICD10PD("T")))!($D(ICD10SD("T"))) S ICDRG=934
"RTN","ICDDG010",198,0)
 . E  S ICDRG=934
"RTN","ICDDG010",199,0)
 Q
"RTN","ICDDG010",200,0)
 ;
"RTN","ICDDG010",201,0)
MI ;
"RTN","ICDDG010",202,0)
 ; if PTCA and not a bypass
"RTN","ICDDG010",203,0)
 I $D(ICD10OR("1"))!($D(ICDOP(" 37.90"))) I '$D(ICD10OR("b"))&('$D(ICD10OR("6"))) D CMS516^ICDTBL2 Q
"RTN","ICDDG010",204,0)
 I $D(ICDPD("A")) D EN1^ICDDRG5 I ICDCC3 S ICDRG=$O(ICDODRG(0)) D DODRG Q
"RTN","ICDDG010",205,0)
 I ($D(ICD10PD("A"))&($D(ICD10PD("I"))))!($D(ICD10SD("A"))&($D(ICD10SD("I")))) D  Q
"RTN","ICDDG010",206,0)
 . S ICDRG=$S($S($D(ICDEXP):ICDEXP,1:0):285,$D(ICD10PD("V"))!($D(ICD10SD("V"))):280,1:282)
"RTN","ICDDG010",207,0)
 I $D(ICDOP(" 37.26"))&($D(ICDOP(" 39.61"))) S ICDRG=230 Q
"RTN","ICDDG010",208,0)
 I $D(ICD10OR("H"))  S ICDRG=$S($D(ICD10PD("X"))!($D(ICD10SD("X"))):286,1:287) Q
"RTN","ICDDG010",209,0)
 K ICDPDRG(286),ICDPDRG(287)
"RTN","ICDDG010",210,0)
 I $D(ICD10OR("p")) S ICDRG=$O(ICDODRG(0)) D DODRG Q
"RTN","ICDDG010",211,0)
 I $D(ICD10OR("F")) S ICDRG=$O(ICDODRG(0)) D DODRG Q
"RTN","ICDDG010",212,0)
 E  K ICDPDRG(280),ICDPDRG(281),ICDPDRG(282) S ICDRG=$O(ICDPDRG(0)) D DODRG Q
"RTN","ICDDG010",213,0)
 Q
"RTN","ICDDG010",214,0)
 ;
"RTN","ICDDG010",215,0)
PREMDC ; Check if any Surgical Procedure Code in Pre-MDC and, if so, use that DRG group
"RTN","ICDDG010",216,0)
 N ICDTMP,ICDPC,ICDX,ICDI,ICDCCT,ICDRGT
"RTN","ICDDG010",217,0)
 S ICDPC="",ICDRGT=999 F  S ICDPC=$O(ICDPRC(ICDPC)) Q:ICDPC=""  I $D(ICD10OR(80)) S ICDTMP=$$GETDRG^ICDEX(80.1,ICDPRC(ICDPC),ICDDATE,98) D
"RTN","ICDDG010",218,0)
 . I $P(ICDTMP,";",1)'=-1 S ICDX=$P(ICDTMP,";",1) F ICDI=1:1 Q:$P(ICDX,U,ICDI)=""  D
"RTN","ICDDG010",219,0)
 . . S ICDCCT=$$ICDRGCC^ICDRGAPI($P(ICDX,U,ICDI),ICDDATE) I ICDCCT=ICDMCC!(ICDCCT=3&(ICDMCC=1!(ICDMCC=2))) S:$P(ICDX,U,1)<ICDRGT ICDRGT=$P(ICDX,U,ICDI) Q
"RTN","ICDDG010",220,0)
 D
"RTN","ICDDG010",221,0)
 . I $D(ICD10OR("q")) S ICDRGT=$S(ICDMCC=2:1,1:2) Q  ;Heart Transplant
"RTN","ICDDG010",222,0)
 . I $D(ICD10OR("r")) S ICDRGT=7 Q  ;Lung Transplant
"RTN","ICDDG010",223,0)
 . I $D(ICD10OR(135)) S ICDRGT=8 Q  ;Simultaneous Pancreas/Kidney Transplant
"RTN","ICDDG010",224,0)
 . I $D(ICD10OR(116)) S ICDRGT=10 Q  ;Pancreas Transplant
"RTN","ICDDG010",225,0)
 . ;Next Block for DRGs 3 and 4: PreMDC ECMO/Tracheostomy/MV96+/Major OR/PDX Except Face,Mount not DRG11,12 or 13
"RTN","ICDDG010",226,0)
 . I $D(ICD10OR(44)) S ICDRGT=3 Q  ;ECMO
"RTN","ICDDG010",227,0)
 . I $D(ICD10OR(150)) S ICDRGT=$S($D(ICD10OR(81)):3,1:4) Q  ;Tracheostomy
"RTN","ICDDG010",228,0)
 . ;End of ECMO etc..
"RTN","ICDDG010",229,0)
 . I ($D(ICD10OR(68))&(ICDMCC=2))!($D(ICD10OR(59))) S ICDRGT=5 Q  ;(Liver Transplant w/MCC) OR (Intestinal Implant)
"RTN","ICDDG010",230,0)
 . I $D(ICD10OR(68)),ICDMCC=0 S ICDRGT=6 Q  ;Intestinal implant
"RTN","ICDDG010",231,0)
 . I $D(ICD10OR(151))!($D(ICD10OR(66))) S ICDRGT=$S(ICDMCC=2:11,ICDMCC=1:12,1:13) Q  ;151=Tracheostomy for Face, Mouth and Neck Diagnoses  66=Laryngectomy
"RTN","ICDDG010",232,0)
 . I $D(ICD10OR(14)) S ICDRGT=14 Q  ;Allogeneic Bone Marrow Transplant
"RTN","ICDDG010",233,0)
 . I $D(ICD10OR(22)) S ICDRGT=$S(ICDMCC>0:16,1:17) Q  ;Autologous Bone Marrow Transplant
"RTN","ICDDG010",234,0)
 I ICDRGT'=999 S ICDRG=ICDRGT,(ICDFOUND,ICDNODOD,ICDPREQ)=1
"RTN","ICDDG010",235,0)
 Q
"RTN","ICDDG010",236,0)
 ;
"RTN","ICDDG010",237,0)
PDX11T13() ;Is PDX assigned to DRG 11, 12 or 12
"RTN","ICDDG010",238,0)
 I $D(ICDPDRG(11))!($D(ICD10PDRG(12)))!($D(ICD10PDRG(13))) Q 1
"RTN","ICDDG010",239,0)
 Q 0
"RTN","ICDDG010",240,0)
 ;
"RTN","ICDDRG")
0^1^B61462104^B34375895
"RTN","ICDDRG",1,0)
ICDDRG ;ALB/GRR/EG/ADL/KUM - Assigns DRG Codes ;07/22/2013
"RTN","ICDDRG",2,0)
 ;;18.0;DRG Grouper;**2,7,10,14,20,31,37,57,64**;Oct 20, 2000;Build 103
"RTN","ICDDRG",3,0)
 ;
"RTN","ICDDRG",4,0)
 ; ADL - Updated for Code Set Versioning 03/10/2003
"RTN","ICDDRG",5,0)
 ; KER - Updated for ICD-10              06/30/2012
"RTN","ICDDRG",6,0)
 ; KUM - FIXED TO TAKE FROM 5TH PIECE OF ICDY(0) AFTER CALLING $$ICDDX^ICDEX
"RTN","ICDDRG",7,0)
 ;
"RTN","ICDDRG",8,0)
 ; Global Variables
"RTN","ICDDRG",9,0)
 ;    None
"RTN","ICDDRG",10,0)
 ;               
"RTN","ICDDRG",11,0)
 ; External References
"RTN","ICDDRG",12,0)
 ;    ^ICDDRG0            ICR  N/A
"RTN","ICDDRG",13,0)
 ;    EN1^ICDDRG5         ICR  N/A
"RTN","ICDDRG",14,0)
 ;    EN1^ICDDRG8         ICR  N/A
"RTN","ICDDRG",15,0)
 ;    $$GETDRG^ICDEX      ICR  N/A
"RTN","ICDDRG",16,0)
 ;    $$ICDDX^ICDEX       ICR  N/A
"RTN","ICDDRG",17,0)
 ;    $$ICDOP^ICDEX       ICR  N/A
"RTN","ICDDRG",18,0)
 ;    $$ISA^ICDEX         ICR  N/A
"RTN","ICDDRG",19,0)
 ;    $$MDCD^ICDEX        ICR  N/A
"RTN","ICDDRG",20,0)
 ;    $$MDCT^ICDEX        ICR  N/A
"RTN","ICDDRG",21,0)
 ;    $$MOR^ICDEX         ICR  N/A
"RTN","ICDDRG",22,0)
 ;    MDCG^ICDEX          ICR  N/A
"RTN","ICDDRG",23,0)
 ;               
"RTN","ICDDRG",24,0)
 ; Local Variables NEWed or KILLed in ICDDRGM and elsewhere
"RTN","ICDDRG",25,0)
 ;     ICDDATE,ICDDMS,ICDDRG,ICDDX,ICDEXP,ICDMDC,ICDPRC,ICDRTC
"RTN","ICDDRG",26,0)
 ;     ICDS24,ICDTMP,ICDTRS,SEX
"RTN","ICDDRG",27,0)
 ;
"RTN","ICDDRG",28,0)
 ;Input  ICDDATE (required) - The date of service
"RTN","ICDDRG",29,0)
 ;Input  ICDEXP (required) - Did patient expire during episode? 0/1
"RTN","ICDDRG",30,0)
 ;Input  ICDTRS (required) - Patient transfer to acute facility? 0/1
"RTN","ICDDRG",31,0)
 ;Input  ICDDMS (required) - Patient have irregular discharge? 0/1
"RTN","ICDDRG",32,0)
 ;Input  ICDDX(1,2,..n)=X (required) - Set of pointers (X) to diagnosis codes in file #80.  
"RTN","ICDDRG",33,0)
 ;Input  ICDPRC(1,2,..n)=X (required) - Set of pointers (X) to procedures in file #80.1.  
"RTN","ICDDRG",34,0)
 ;Input  SEX (required) - Patient gender (M-Male,F-Female)
"RTN","ICDDRG",35,0)
 ;Input  ICDPOA(1,2, - Set of values (Y,N,W,U OR BLANK) corresponding to ICDDX input array to indicate Presence on Admission 
"RTN","ICDDRG",36,0)
 ;Output ICDDRG - Pointer to assigned DRG in file #80.2
"RTN","ICDDRG",37,0)
 ;
"RTN","ICDDRG",38,0)
TOP ; Main Entry Point
"RTN","ICDDRG",39,0)
 K ICDCSYS,ICDCSYS,ICDCDSY,ICDEDT
"RTN","ICDDRG",40,0)
 K ICDDRG,ICDMDC,ICDRTC S (ICDDRG,ICDMDC,ICDRTC)=""
"RTN","ICDDRG",41,0)
 ; Check for Invalid Input Variables
"RTN","ICDDRG",42,0)
 I +($G(ICDDX(1)))'>0 S ICDRTC=1 G ERR
"RTN","ICDDRG",43,0)
 ;   Patient Expired?
"RTN","ICDDRG",44,0)
 I ICDEXP'=0&(ICDEXP'=1)&(ICDEXP'="") S ICDRTC=5 G ERR
"RTN","ICDDRG",45,0)
 ;   Patient Transferred
"RTN","ICDDRG",46,0)
 I ICDTRS'=0&(ICDTRS'=1)&(ICDTRS'="") S ICDRTC=6 G ERR
"RTN","ICDDRG",47,0)
 ;   Patient Discharged against Medical Advice
"RTN","ICDDRG",48,0)
 I ICDDMS'=0&(ICDDMS'=1)&(ICDDMS'="") S ICDRTC=7 G ERR
"RTN","ICDDRG",49,0)
 ;   Patient Sex
"RTN","ICDDRG",50,0)
 I SEX'="M"&(SEX'="F")&(SEX'="") S ICDRTC=4 G ERR
"RTN","ICDDRG",51,0)
 ;   Default is today's FileMan date
"RTN","ICDDRG",52,0)
 I '$D(ICDDATE) S ICDDATE=DT
"RTN","ICDDRG",53,0)
 I $D(ICDEDT) S ICDDATE=ICDEDT ;ICDEDT can be passed to ICDDRG by other applications
"RTN","ICDDRG",54,0)
 I '$D(ICDCSYS) S ICDCSYS=$S(ICDDATE'<$$IMPDATE^LEXU("10D"):"ICD10",1:"ICD9")
"RTN","ICDDRG",55,0)
 ;********************************************************
"RTN","ICDDRG",56,0)
 ;Review of Diagnoses codes to be included in DRG calculation
"RTN","ICDDRG",57,0)
 I ICDCSYS="ICD10" D DXSCRN^ICDDRGM
"RTN","ICDDRG",58,0)
PRI ; Primary Diagnosis Related Variables
"RTN","ICDDRG",59,0)
 D KILL S ICDSEX($S(SEX="M":1,SEX="F":2,1:0))=""
"RTN","ICDDRG",60,0)
 S ICDTMP=$$ICDDX^ICDEX(+($G(ICDDX(1))),ICDDATE,$S(ICDCSYS="ICD9":1,ICDCSYS="ICD10":30,1:""),"I")
"RTN","ICDDRG",61,0)
 S $P(ICDTMP,"^",3)=$TR($P(ICDTMP,"^",3),";","")
"RTN","ICDDRG",62,0)
 ;   Error if not found
"RTN","ICDDRG",63,0)
 I ICDTMP<0 S ICDRTC=1 G ERR
"RTN","ICDDRG",64,0)
 S ICDY(0)=$P(ICDTMP,U,2,99)
"RTN","ICDDRG",65,0)
 ;   Error if unacceptable or inactive
"RTN","ICDDRG",66,0)
 I $P(ICDY(0),"^",4)=1!($P(ICDY(0),"^",9)=0) S ICDRTC=1 G ERR
"RTN","ICDDRG",67,0)
 ;flag has changed from inactive flag to status flag
"RTN","ICDDRG",68,0)
 D ICDIDS^ICDRGAPI("80",+$G(ICDDX(1)),.ICD10PD) ;Get Identifiers of Primary Diagnosis into ICD10PD array
"RTN","ICDDRG",69,0)
 S ICDMDC=$P(ICDY(0),"^",5),ICDPD=$P(ICDY(0),"^",2),ICDRG=0
"RTN","ICDDRG",70,0)
 ;   Error if no MDC
"RTN","ICDDRG",71,0)
 I 'ICDMDC S ICDRTC=1 G ERR
"RTN","ICDDRG",72,0)
 D MDCG^ICDEX(+($G(ICDDX(1))),$G(ICDDATE),.ICDMDC)
"RTN","ICDDRG",73,0)
 S:$O(ICDMDC(0))>0 ICDMDC=$P(ICDY(0),"^",5)
"RTN","ICDDRG",74,0)
 I $D(ICDMDC(12))!($D(ICDMDC(13))) S ICDMDC=$S(SEX="F":13,1:12) I SEX="" S ICDRTC=4 G ERR
"RTN","ICDDRG",75,0)
 ;Setup DRG arrays ICDPDRG(x) and ICDDRG(x) and SEX array
"RTN","ICDDRG",76,0)
 S ICDTMP=$$GETDRG^ICDEX(80,+($G(ICDDX(1))),ICDDATE) I ICDTMP>0 S ICDPDRG=$P(ICDTMP,";") D
"RTN","ICDDRG",77,0)
 . F ICDI=1:1 Q:$P(ICDPDRG,"^",ICDI)']""  S ICDPDRG($P(ICDPDRG,"^",ICDI))="",ICDRG($P(ICDPDRG,"^",ICDI))=""
"RTN","ICDDRG",78,0)
 S ICD104=0,ICDP24=$P(ICDY(0),"^",12),ICDP25=$P(ICDY(0),"^",13) D SEX
"RTN","ICDDRG",79,0)
 ;   The following establishes Secondary Diagnosis Variables
"RTN","ICDDRG",80,0)
 S (ICDCCT,ICDMCCT,ICDSD)="",ICDCC=0,ICDMCC=0,ICDI=1
"RTN","ICDDRG",81,0)
 F ICDIZ=0:0 S ICDI=$O(ICDDX(ICDI)) Q:ICDI'>0  D  G:ICDRTC]"" ERR
"RTN","ICDDRG",82,0)
 . S ICDTMP=$$ICDDX^ICDEX(+($G(ICDDX(ICDI))),ICDDATE,$S(ICDCSYS="ICD9":1,ICDCSYS="ICD10":30,1:""),"I")
"RTN","ICDDRG",83,0)
 . S $P(ICDTMP,"^",3)=$TR($P(ICDTMP,"^",3),";","")
"RTN","ICDDRG",84,0)
 . I ICDTMP<0!'($P(ICDTMP,U,10)) S ICDRTC=8 Q
"RTN","ICDDRG",85,0)
 . S ICDY(0)=$P(ICDTMP,U,2,99),ICDDXT($P(ICDY(0),"^",1))=""
"RTN","ICDDRG",86,0)
 . S ICDP15($S($P(ICDY(0),"^",2)["J":1,1:0))=""
"RTN","ICDDRG",87,0)
 . D SEC,SEX G:ICDRTC]"" ERR
"RTN","ICDDRG",88,0)
 S:$D(ICDCCT(1)) ICDCC=1 K ICDCCT
"RTN","ICDDRG",89,0)
 S:$D(ICDMCCT(1)) ICDMCC=1 S:$D(ICDMCCT(2)) ICDMCC=2 K ICDMCCT
"RTN","ICDDRG",90,0)
 ;
"RTN","ICDDRG",91,0)
 ;CHECK IF PDX IS OWN CC/MCC
"RTN","ICDDRG",92,0)
 S ICDX=$$ISOWNCC^ICDRGAPI(ICDDX(1),ICDDATE,0) I ICDX>0 S ICDMCC=ICDX
"RTN","ICDDRG",93,0)
 ;
"RTN","ICDDRG",94,0)
 ;   The following establishes Operation/Prodedure Variables
"RTN","ICDDRG",95,0)
 N ICDOTMP S (ICDMAJ,ICDORNI,ICDOP,ICDOR,ICDOTMP)="",(ICDOCNT,ICDONR,ICDORNR,ICDNOR,ICDOPCT,ICDOPNR)=0
"RTN","ICDDRG",96,0)
 ;   Return ICD Operation/Procedure code info check if active
"RTN","ICDDRG",97,0)
 S ICDCSYS=$S(ICDDATE'<$$IMPDATE^LEXU("10D"):"ICD10",1:"ICD9")
"RTN","ICDDRG",98,0)
 S ICDCDSY=$S(ICDCSYS="ICD9":2,1:31)
"RTN","ICDDRG",99,0)
 ;
"RTN","ICDDRG",100,0)
 I $D(ICDPRC) F ICDI=1:1 Q:'$D(ICDPRC(ICDI))  X "S ICDTMP=$$ICDOP^ICDEX(+($G(ICDPRC(ICDI))),ICDDATE,ICDCDSY,""I"") I ICDTMP<0!'($P(ICDTMP,U,10)) S ICDRTC=2 Q" I ICDRTC="" D 
"RTN","ICDDRG",101,0)
 . S $P(ICDTMP,"^",3)=$TR($P(ICDTMP,"^",3),";","")
"RTN","ICDDRG",102,0)
 . S ICDY(0)=$P(ICDTMP,U,2,99),ICDNOR=ICDNOR+1,ICDY=+($G(ICDPRC(ICDI))),ICDO24($S($P(ICDY(0),"^",3)'="":$P(ICDY(0),"^",3),1:"N"))="" D OPS,SEX
"RTN","ICDDRG",103,0)
 K ICDO24("N") G:ICDRTC]"" ERR
"RTN","ICDDRG",104,0)
 I ICDCSYS="ICD9" G ^ICDDRG0
"RTN","ICDDRG",105,0)
 E  D CLUSTERS^ICDRGAPI G ^ICDDG010
"RTN","ICDDRG",106,0)
 ;
"RTN","ICDDRG",107,0)
SEC ; Secondary Diagnosis
"RTN","ICDDRG",108,0)
 ;   Is Secondary NCC for Primary
"RTN","ICDDRG",109,0)
 I ICDCSYS="ICD9" S ICDMCC=$S(+($$ISA^ICDEX(+($G(ICDDX(ICDI))),+($G(ICDDX(1))),40))>0:0,$P(ICDY(0),"^",18)=2:2,($P(ICDY(0),"^",18)=1)&(ICDMCC'=2):1,1:ICDMCC),ICDMCCT(ICDMCC)=""
"RTN","ICDDRG",110,0)
 I ICDCSYS="ICD10" S ICDMCC=$S($$ISACCEX^ICDRGAPI(+$G(ICDDX(ICDI)),+$G(ICDDX(1))):0,$P(ICDY(0),"^",18)=2:2,($P(ICDY(0),"^",18)=1)&(ICDMCC'=2):1,1:ICDMCC),ICDMCCT(ICDMCC)=""
"RTN","ICDDRG",111,0)
 I 'ICDEXP,$P(ICDY(0),"^",18)=3 S ICDMCC=2,ICDMCCT(2)="" ;MCC if patient discharged alive
"RTN","ICDDRG",112,0)
 ;   Group ICD identifiers in one variable
"RTN","ICDDRG",113,0)
 K ICD10SDT
"RTN","ICDDRG",114,0)
 D ICDIDS^ICDRGAPI("80",+($G(ICDDX(ICDI))),.ICD10SDT) ;Get ICD-10 identifiers into ICD10SD
"RTN","ICDDRG",115,0)
 D ICDMRG^ICDRGAPI(.ICD10SD,.ICD10SDT)
"RTN","ICDDRG",116,0)
 I $L($P(ICDY(0),"^",2)) S ICDSD=$$TM(ICDSD,";")_";"_$$TM($P(ICDY(0),"^",2),";"),ICDSD=";"_$$TM(ICDSD,";")_";"
"RTN","ICDDRG",117,0)
 S ICDTMP=$$GETDRG^ICDEX(80,+($G(ICDDX(ICDI))),ICDDATE)
"RTN","ICDDRG",118,0)
 ;
"RTN","ICDDRG",119,0)
 ;   If any of the following conditions are met set ICDSDRG array
"RTN","ICDDRG",120,0)
 I ICDCSYS="ICD10" D
"RTN","ICDDRG",121,0)
 . I (($P(ICDY(0),"^",7)=1)!($D(ICD10PD("h")))!($D(ICD10PD("J")))!($D(ICD10SD("h")))),'$P(ICDTMP,";",3) D
"RTN","ICDDRG",122,0)
 . . S ICDSDRG=$P(ICDTMP,";")
"RTN","ICDDRG",123,0)
 . . F ICDK=1:1 Q:$P(ICDSDRG,"^",ICDK)']""  S ICDSDRG($P(ICDSDRG,"^",ICDK))=""
"RTN","ICDDRG",124,0)
 I ICDCSYS="ICD9" D
"RTN","ICDDRG",125,0)
 . I (($P(ICDY(0),"^",7)=1)!(ICDPD["h")!(ICDPD["J")!(ICDSD["h")),'$P(ICDTMP,";",3) D
"RTN","ICDDRG",126,0)
 . . S ICDSDRG=$P(ICDTMP,";")
"RTN","ICDDRG",127,0)
 . . F ICDK=1:1 Q:$P(ICDSDRG,"^",ICDK)']""  S ICDSDRG($P(ICDSDRG,"^",ICDK))=""
"RTN","ICDDRG",128,0)
 S ICDS24($S($P(ICDY(0),"^",12)'="":$P(ICDY(0),"^",12),1:"N"))="",ICDS25($S($P(ICDY(0),"^",13)'="":$P(ICDY(0),"^",13),1:0))=""
"RTN","ICDDRG",129,0)
 K ICDS24("N"),ICDS25(0) Q
"RTN","ICDDRG",130,0)
 ;
"RTN","ICDDRG",131,0)
OPS ; Operation/Procedures
"RTN","ICDDRG",132,0)
 I '$D(ICDOP(" "_$P(ICDY(0),"^",1))) S ICDOP(" "_$P(ICDY(0),"^",1))="",ICDOCNT=ICDOCNT+1
"RTN","ICDDRG",133,0)
 I $S($D(ICDMDC(12))!($D(ICDMDC(13)))>0:'$$MDCT^ICDEX(ICDY,ICDDATE,.ICDMDC,0),1:'$$MDCD^ICDEX(ICDY,ICDMDC,ICDDATE)) D
"RTN","ICDDRG",134,0)
 . S ICDONR=ICDONR+1
"RTN","ICDDRG",135,0)
 . ;Get ICD-10 Identifier codes into ICD10ORNIT
"RTN","ICDDRG",136,0)
 . K ICD10ORNIT
"RTN","ICDDRG",137,0)
 . D ICDIDS^ICDRGAPI("80.1",ICDY,.ICD10ORNIT)
"RTN","ICDDRG",138,0)
 . D ICDMRG^ICDRGAPI(.ICD10ORNI,.ICD10ORNIT)
"RTN","ICDDRG",139,0)
 . S ICDORNI=ICDORNI_$P(ICDY(0),"^",2),ICDORNI($S($P(ICDY(0),"^",2)'="":$P(ICDY(0),"^",2),1:0))="" S:ICDORNR'=0 ICDORNR=1
"RTN","ICDDRG",140,0)
 ;Group ICD identifiers in one variable
"RTN","ICDDRG",141,0)
 K ICD10ORT
"RTN","ICDDRG",142,0)
 D ICDIDS^ICDRGAPI("80.1",ICDY,.ICD10ORT) ;Get ICD-10 identifiers into ICD10OR
"RTN","ICDDRG",143,0)
 D ICDMRG^ICDRGAPI(.ICD10OR,.ICD10ORT)
"RTN","ICDDRG",144,0)
 I $L($P(ICDY(0),"^",2)) S ICDOR=$$TM(ICDOR,";")_";"_$$TM($P(ICDY(0),"^",2),";"),ICDOR=";"_$$TM(ICDOR,";")_";"
"RTN","ICDDRG",145,0)
 I ICDCSYS="ICD9" D
"RTN","ICDDRG",146,0)
 . I +ICDY(0)>37.69,+ICDY(0)<37.84,ICDOR'["p" D
"RTN","ICDDRG",147,0)
 . . N ICDCC3 D EN1^ICDDRG5 I ICDCC3 S ICDOR=ICDOR_"p" S:ICDOR'["O" ICDOR=ICDOR_"O"
"RTN","ICDDRG",148,0)
 I ICDCSYS="ICD9" D
"RTN","ICDDRG",149,0)
 . I +ICDY(0)>80.999 I +ICDY(0)<81.40 N ICDCC3 D EN1^ICDDRG8 I ICDCC3 S ICDOR=ICDOR_"F"
"RTN","ICDDRG",150,0)
 ;   Major OR Procedure
"RTN","ICDDRG",151,0)
 S:$L($$MOR^ICDEX(ICDY)) ICDMAJ=ICDMAJ_$P($$MOR^ICDEX(ICDY),"^")_"^"
"RTN","ICDDRG",152,0)
 ;   Set ICDOTMP with DRGs for doing checks
"RTN","ICDDRG",153,0)
 S ICDOTMP=$P($$GETDRG^ICDEX(80.1,ICDY,ICDDATE,$G(ICDMDC)),";",1) S:+ICDOTMP'>0 ICDOTMP=""
"RTN","ICDDRG",154,0)
 I ($P(ICDY(0),"^",2)["O")!($D(ICD10ORT("O"))) D
"RTN","ICDDRG",155,0)
 .S ICDOPCT=ICDOPCT+1
"RTN","ICDDRG",156,0)
 .I ICDOPNR=0 D
"RTN","ICDDRG",157,0)
 ..I $S($D(ICDMDC(12))!($D(ICDMDC(13)))>0:'$$MDCT^ICDEX(ICDY,ICDDATE,.ICDMDC,0),1:'$D(ICDOTMP)) S ICDOPNR=1
"RTN","ICDDRG",158,0)
 I +ICDOTMP>0 S ICDF=ICDOTMP F ICDFX=1:1 Q:$P(ICDF,"^",ICDFX)']""  S ICDODRG($P(ICDF,"^",ICDFX))=$P(ICDF,"^",ICDFX)
"RTN","ICDDRG",159,0)
 ;   Translate identifiers into common symbol, check for symbol
"RTN","ICDDRG",160,0)
 S ICD104=$S($P(ICDY(0),"^",2)["P"!$D(ICD10ORT("P")):1,1:0)
"RTN","ICDDRG",161,0)
 S ICDNMDC($S($TR($P(ICDY(0),"^",2),"lqtrB","\\\\")["\"!$D(ICD10ORT("l"))!$D(ICD10ORT("q"))!$D(ICD10ORT("t"))!$D(ICD10ORT("r"))!$D(ICD10ORT("B")):1,1:0))="" Q
"RTN","ICDDRG",162,0)
 ;
"RTN","ICDDRG",163,0)
 ; Miscellaneous
"RTN","ICDDRG",164,0)
ERR ;   Error Occured
"RTN","ICDDRG",165,0)
 I '$D(ICDCSYS) S ICDCSYS=$S(ICDDATE'<$$IMPDATE^LEXU("10D"):"ICD10",1:"ICD9")
"RTN","ICDDRG",166,0)
 I ICDCSYS="ICD10" S ICDDRG=999
"RTN","ICDDRG",167,0)
 I ICDCSYS="ICD9" S ICDDRG=$S(ICDDATE>3070930.9:999,1:470)
"RTN","ICDDRG",168,0)
 Q
"RTN","ICDDRG",169,0)
SEX ;   Get sex for DX or Procedure
"RTN","ICDDRG",170,0)
 S ICDSEX($S($P(ICDY(0),"^",10)="M":1,$P(ICDY(0),"^",10)="F":2,1:0))=""
"RTN","ICDDRG",171,0)
 Q
"RTN","ICDDRG",172,0)
TM(X,Y) ;   Trim Y
"RTN","ICDDRG",173,0)
 S Y=$G(Y) S:'$L(Y) Y=" "
"RTN","ICDDRG",174,0)
 F  Q:$E(X,1)'=Y  S X=$E(X,2,$L(X))
"RTN","ICDDRG",175,0)
 F  Q:$E(X,$L(X))'=Y  S X=$E(X,1,($L(X)-1))
"RTN","ICDDRG",176,0)
 Q X
"RTN","ICDDRG",177,0)
KILL ;   Clean Environment
"RTN","ICDDRG",178,0)
 K ICD104,ICDJ,ICDJJ,ICDOCNT,ICDOR,ICDNOR,ICDP15,ICDPDRG,ICDRG,ICDSEX
"RTN","ICDDRG",179,0)
 K ICDSDRG,ICDODRG,ICDCC,ICDMCC,ICDOP,ICDORNR,ICDORNI,ICDP24,ICDP25,ICDPD
"RTN","ICDDRG",180,0)
 K ICDSD,ICDI,ICDK,ICDF,ICDFX,ICDFK,ICDY,ICDDXT,ICDIZ,ICDONR,ICDOPCT
"RTN","ICDDRG",181,0)
 K ICD,ICDCC2,ICDCC3,ICDGH,ICDL39,ICDMAJ,ICDNMDC,ICDNSD,ICDORNA,ICDREF
"RTN","ICDDRG",182,0)
 K ICDS25,ICDOPNR,ICDO24
"RTN","ICDDRG",183,0)
 K ICD10PD,ICD10SD,ICD10OR,ICD10ORNI,ICD10PDRG ;64 FIX
"RTN","ICDDRG",184,0)
 Q
"RTN","ICDDRG5")
0^21^B35156082^B33887705
"RTN","ICDDRG5",1,0)
ICDDRG5 ;ALB/GRR/EG/MRY/ADL - FIX SURGERY HIERARCHY ;3/20/03 10:36am
"RTN","ICDDRG5",2,0)
 ;;18.0;DRG Grouper;**2,5,7,10,20,22,31,37,64**;Oct 20, 2000;Build 103
"RTN","ICDDRG5",3,0)
 ;
"RTN","ICDDRG5",4,0)
 Q:$O(ICDODRG(0))'>0  K ICDJ,ICDJJ F ICDJ=0:0 S ICDJ=$O(ICDODRG(ICDJ)) Q:ICDJ'>0  S ICDJJ(ICDJ)="" D
"RTN","ICDDRG5",5,0)
 .I ICDDATE<3051001 D F Q
"RTN","ICDDRG5",6,0)
 .E  I ICDDATE<3071001 D FY2007 Q
"RTN","ICDDRG5",7,0)
 .E  I ICDDATE<3081001 D FY2008 Q
"RTN","ICDDRG5",8,0)
 .E  D FY2009
"RTN","ICDDRG5",9,0)
END S ICDJ=$O(ICDJ(0)) Q:ICDJ'>0  S ICDJ=ICDJ(ICDJ) K ICDODRG S ICDODRG(ICDJ)="" Q
"RTN","ICDDRG5",10,0)
F I ICDJ=103 S ICDJ(1)=ICDJ Q
"RTN","ICDDRG5",11,0)
 I ICDJ=525 S ICDJ(2)=ICDJ Q
"RTN","ICDDRG5",12,0)
 I ICDJ=104 S ICDJ(3)=ICDJ Q
"RTN","ICDDRG5",13,0)
 I ICDJ=535 S ICDJ(4)=ICDJ Q
"RTN","ICDDRG5",14,0)
 I ICDJ=536 S ICDJ(5)=ICDJ Q
"RTN","ICDDRG5",15,0)
 I ICDJ=515 S ICDJ(6)=ICDJ Q
"RTN","ICDDRG5",16,0)
 I ICDJ=108 S ICDJ(7)=ICDJ Q
"RTN","ICDDRG5",17,0)
 I ICDJ=106 S ICDJ(8)=ICDJ Q
"RTN","ICDDRG5",18,0)
 I ICDJ=110 S ICDJ(9)=ICDJ Q
"RTN","ICDDRG5",19,0)
 I ICDJ=111 S ICDJ(10)=ICDJ Q
"RTN","ICDDRG5",20,0)
 I ICDJ=113 S ICDJ(11)=ICDJ Q
"RTN","ICDDRG5",21,0)
 I ICDJ=115 S ICDJ(12)=ICDJ Q
"RTN","ICDDRG5",22,0)
 I ICDJ=116 S ICDJ(13)=ICDJ Q
"RTN","ICDDRG5",23,0)
 I ICDJ=526 S ICDJ(14)=ICDJ Q
"RTN","ICDDRG5",24,0)
 I ICDJ=527 S ICDJ(15)=ICDJ Q
"RTN","ICDDRG5",25,0)
 I ICDJ=516 S ICDJ(16)=ICDJ Q
"RTN","ICDDRG5",26,0)
 I ICDJ=517 S ICDJ(17)=ICDJ Q
"RTN","ICDDRG5",27,0)
 I ICDJ=518 S ICDJ(18)=ICDJ Q
"RTN","ICDDRG5",28,0)
 I ICDJ=478 S ICDJ(19)=ICDJ Q
"RTN","ICDDRG5",29,0)
 I ICDJ=479 S ICDJ(20)=ICDJ Q
"RTN","ICDDRG5",30,0)
 ;I ICDJ=112 S ICDJ(13)=ICDJ Q
"RTN","ICDDRG5",31,0)
 I ICDJ=114 S ICDJ(21)=ICDJ Q
"RTN","ICDDRG5",32,0)
 I ICDJ=118 S ICDJ(22)=ICDJ Q
"RTN","ICDDRG5",33,0)
 I ICDJ=117 S ICDJ(23)=ICDJ Q
"RTN","ICDDRG5",34,0)
 I ICDJ=119 S ICDJ(24)=ICDJ Q
"RTN","ICDDRG5",35,0)
 I ICDJ=120 S ICDJ(25)=ICDJ
"RTN","ICDDRG5",36,0)
 Q
"RTN","ICDDRG5",37,0)
FY2007 ;
"RTN","ICDDRG5",38,0)
 I ICDJ=103 S ICDJ(1)=ICDJ Q
"RTN","ICDDRG5",39,0)
 I ICDJ=525 S ICDJ(2)=ICDJ Q
"RTN","ICDDRG5",40,0)
 I ICDJ=104 S ICDJ(3)=ICDJ Q
"RTN","ICDDRG5",41,0)
 I ICDJ=535 S ICDJ(4)=ICDJ Q
"RTN","ICDDRG5",42,0)
 I ICDJ=536 S ICDJ(5)=ICDJ Q
"RTN","ICDDRG5",43,0)
 I ICDJ=515 S ICDJ(6)=ICDJ Q
"RTN","ICDDRG5",44,0)
 I ICDJ=108 S ICDJ(7)=ICDJ Q
"RTN","ICDDRG5",45,0)
 I ICDJ=106 S ICDJ(8)=ICDJ Q
"RTN","ICDDRG5",46,0)
 I ICDJ=110 S ICDJ(9)=ICDJ Q
"RTN","ICDDRG5",47,0)
 I ICDJ=111 S ICDJ(10)=ICDJ Q
"RTN","ICDDRG5",48,0)
 I ICDJ=547 S ICDJ(11)=ICDJ Q
"RTN","ICDDRG5",49,0)
 I ICDJ=548 S ICDJ(12)=ICDJ Q
"RTN","ICDDRG5",50,0)
 I ICDJ=549 S ICDJ(13)=ICDJ Q
"RTN","ICDDRG5",51,0)
 I ICDJ=550 S ICDJ(14)=ICDJ Q
"RTN","ICDDRG5",52,0)
 I ICDJ=113 S ICDJ(15)=ICDJ Q
"RTN","ICDDRG5",53,0)
 I ICDJ=551 S ICDJ(16)=ICDJ Q
"RTN","ICDDRG5",54,0)
 I ICDJ=552 S ICDJ(17)=ICDJ Q
"RTN","ICDDRG5",55,0)
 I ICDJ=557 S ICDJ(18)=ICDJ Q
"RTN","ICDDRG5",56,0)
 I ICDJ=555 S ICDJ(19)=ICDJ Q
"RTN","ICDDRG5",57,0)
 I ICDJ=558 S ICDJ(20)=ICDJ Q
"RTN","ICDDRG5",58,0)
 I ICDJ=556 S ICDJ(21)=ICDJ Q
"RTN","ICDDRG5",59,0)
 I ICDJ=518 S ICDJ(22)=ICDJ Q
"RTN","ICDDRG5",60,0)
 I ICDJ=553 S ICDJ(23)=ICDJ Q
"RTN","ICDDRG5",61,0)
 I ICDJ=554 S ICDJ(24)=ICDJ Q
"RTN","ICDDRG5",62,0)
 I ICDJ=478 S ICDJ(25)=ICDJ Q
"RTN","ICDDRG5",63,0)
 I ICDJ=479 S ICDJ(26)=ICDJ Q
"RTN","ICDDRG5",64,0)
 I ICDJ=114 S ICDJ(27)=ICDJ Q
"RTN","ICDDRG5",65,0)
 I ICDJ=118 S ICDJ(28)=ICDJ Q
"RTN","ICDDRG5",66,0)
 I ICDJ=117 S ICDJ(29)=ICDJ Q
"RTN","ICDDRG5",67,0)
 I ICDJ=119 S ICDJ(30)=ICDJ Q
"RTN","ICDDRG5",68,0)
 I ICDJ=120 S ICDJ(31)=ICDJ
"RTN","ICDDRG5",69,0)
 Q
"RTN","ICDDRG5",70,0)
FY2008 ;
"RTN","ICDDRG5",71,0)
 I ICDJ=215 S ICDJ(1)=ICDJ Q
"RTN","ICDDRG5",72,0)
 I ICDJ=221 S ICDJ(2)=ICDJ Q
"RTN","ICDDRG5",73,0)
 I ICDJ=223 S ICDJ(3)=ICDJ Q
"RTN","ICDDRG5",74,0)
 I ICDJ=225 S ICDJ(4)=ICDJ Q
"RTN","ICDDRG5",75,0)
 I ICDJ=227 S ICDJ(5)=ICDJ Q
"RTN","ICDDRG5",76,0)
 I ICDJ=230 S ICDJ(6)=ICDJ Q
"RTN","ICDDRG5",77,0)
 I ICDJ=232 S ICDJ(7)=ICDJ Q
"RTN","ICDDRG5",78,0)
 I ICDJ=234 S ICDJ(8)=ICDJ Q
"RTN","ICDDRG5",79,0)
 I ICDJ=236 S ICDJ(9)=ICDJ Q
"RTN","ICDDRG5",80,0)
 I ICDJ=238 S ICDJ(10)=ICDJ Q
"RTN","ICDDRG5",81,0)
 I ICDJ=241 S ICDJ(11)=ICDJ Q
"RTN","ICDDRG5",82,0)
 I ICDJ=244 S ICDJ(12)=ICDJ Q
"RTN","ICDDRG5",83,0)
 I ICDJ=245 S ICDJ(13)=ICDJ Q
"RTN","ICDDRG5",84,0)
 I ICDJ=247 S ICDJ(14)=ICDJ Q
"RTN","ICDDRG5",85,0)
 I ICDJ=249 S ICDJ(15)=ICDJ Q
"RTN","ICDDRG5",86,0)
 I ICDJ=251 S ICDJ(16)=ICDJ Q
"RTN","ICDDRG5",87,0)
 I ICDJ=254 S ICDJ(17)=ICDJ Q
"RTN","ICDDRG5",88,0)
 I ICDJ=257 S ICDJ(18)=ICDJ Q
"RTN","ICDDRG5",89,0)
 I ICDJ=259 S ICDJ(19)=ICDJ Q
"RTN","ICDDRG5",90,0)
 I ICDJ=262 S ICDJ(20)=ICDJ Q
"RTN","ICDDRG5",91,0)
 I ICDJ=263 S ICDJ(21)=ICDJ Q
"RTN","ICDDRG5",92,0)
 I ICDJ=264 S ICDJ(22)=ICDJ Q
"RTN","ICDDRG5",93,0)
 Q
"RTN","ICDDRG5",94,0)
FY2009 ;
"RTN","ICDDRG5",95,0)
 I ICDJ=215 S ICDJ(1)=ICDJ Q
"RTN","ICDDRG5",96,0)
 I ICDJ=221 S ICDJ(2)=ICDJ Q
"RTN","ICDDRG5",97,0)
 I ICDJ=223 S ICDJ(3)=ICDJ Q
"RTN","ICDDRG5",98,0)
 I ICDJ=225 S ICDJ(4)=ICDJ Q
"RTN","ICDDRG5",99,0)
 I ICDJ=227 S ICDJ(5)=ICDJ Q
"RTN","ICDDRG5",100,0)
 I ICDJ=230 S ICDJ(6)=ICDJ Q
"RTN","ICDDRG5",101,0)
 I ICDJ=232 S ICDJ(7)=ICDJ Q
"RTN","ICDDRG5",102,0)
 I ICDJ=234 S ICDJ(8)=ICDJ Q
"RTN","ICDDRG5",103,0)
 I ICDJ=236 S ICDJ(9)=ICDJ Q
"RTN","ICDDRG5",104,0)
 I ICDJ=238 S ICDJ(10)=ICDJ Q
"RTN","ICDDRG5",105,0)
 I ICDJ=241 S ICDJ(11)=ICDJ Q
"RTN","ICDDRG5",106,0)
 I ICDJ=244 S ICDJ(12)=ICDJ Q
"RTN","ICDDRG5",107,0)
 I ICDJ=245 S ICDJ(13)=ICDJ Q
"RTN","ICDDRG5",108,0)
 I ICDJ=265 S ICDJ(14)=ICDJ Q
"RTN","ICDDRG5",109,0)
 I ICDJ=247 S ICDJ(15)=ICDJ Q
"RTN","ICDDRG5",110,0)
 I ICDJ=249 S ICDJ(16)=ICDJ Q
"RTN","ICDDRG5",111,0)
 I ICDJ=251 S ICDJ(17)=ICDJ Q
"RTN","ICDDRG5",112,0)
 I ICDJ=254 S ICDJ(18)=ICDJ Q
"RTN","ICDDRG5",113,0)
 I ICDJ=257 S ICDJ(19)=ICDJ Q
"RTN","ICDDRG5",114,0)
 I ICDJ=259 S ICDJ(20)=ICDJ Q
"RTN","ICDDRG5",115,0)
 I ICDJ=262 S ICDJ(21)=ICDJ Q
"RTN","ICDDRG5",116,0)
 I ICDJ=263 S ICDJ(22)=ICDJ Q
"RTN","ICDDRG5",117,0)
 I ICDJ=264 S ICDJ(23)=ICDJ Q
"RTN","ICDDRG5",118,0)
 Q
"RTN","ICDDRG5",119,0)
EN1 S (ICDCC3,ICDCC2)=0
"RTN","ICDDRG5",120,0)
 I $D(ICDOP(" 00.50")) S ICDCC3=1
"RTN","ICDDRG5",121,0)
 I $D(ICDOP(" 00.52")) I $D(ICDOP(" 00.53")) S ICDCC3=1
"RTN","ICDDRG5",122,0)
 I $D(ICDOP(" 37.70"))!($D(ICDOP(" 37.71")))!($D(ICDOP(" 37.73"))) D MORE Q
"RTN","ICDDRG5",123,0)
 I $D(ICDOP(" 37.72")) I $D(ICDOP(" 37.80"))!($D(ICDOP(" 37.83"))) S ICDCC3=1 Q
"RTN","ICDDRG5",124,0)
 I $D(ICDOP(" 37.74")) I $D(ICDOP(" 37.80"))!($D(ICDOP(" 37.81")))!($D(ICDOP(" 37.82")))!($D(ICDOP(" 37.83")))!($D(ICDOP(" 37.85")))!($D(ICDOP(" 37.86")))!($D(ICDOP(" 37.87"))) S ICDCC3=1 Q
"RTN","ICDDRG5",125,0)
 I $D(ICDOP(" 37.76")) I $D(ICDOP(" 37.80"))!($D(ICDOP(" 37.85")))!($D(ICDOP(" 37.86")))!($D(ICDOP(" 37.87"))) S ICDCC3=1 Q
"RTN","ICDDRG5",126,0)
 I $D(ICDOP(" 00.53")) I $D(ICDOP(" 37.70"))!($D(ICDOP(" 37.71")))!($D(ICDOP(" 37.72")))!($D(ICDOP(" 37.73")))!($D(ICDOP("37.74 ")))!($D(ICDOP(" 37.76"))) S ICDCC3=1
"RTN","ICDDRG5",127,0)
 I $D(ICDOP(" 00.54"))!$D(ICDOP(" 37.95"))!$D(ICDOP(" 37.96"))!$D(ICDOP(" 37.97"))!$D(ICDOP(" 37.98"))!$D(ICDOP(" 00.52")) S ICDCC2=1
"RTN","ICDDRG5",128,0)
 Q
"RTN","ICDDRG5",129,0)
MORE I $D(ICDOP(" 37.80"))!($D(ICDOP(" 37.81")))!($D(ICDOP(" 37.82")))!($D(ICDOP(" 37.85")))!($D(ICDOP(" 37.86")))!($D(ICDOP(" 37.87"))) S ICDCC3=1 Q
"RTN","ICDDRG5",130,0)
 Q
"RTN","ICDDRG5",131,0)
VALV ;valve procedure
"RTN","ICDDRG5",132,0)
 N ICDTMP
"RTN","ICDDRG5",133,0)
 S (ICDCATH,ICDAJ)="" F ICDI=1:1 Q:'$D(ICDPRC(ICDI))  S ICDAJ=ICDPRC(ICDI),ICDTMP=$$ICDOP^ICDEX(+ICDAJ,$G(ICDDATE),2,"I"),$P(ICDTMP,"^",3)=$TR($P(ICDTMP,"^",3),";",""),ICDY(0)=$S((ICDTMP>0&$P(ICDTMP,U,10)):$P(ICDTMP,U,2,99),1:0) I ICDY(0) D
"RTN","ICDDRG5",134,0)
 . S ICDOP($P(ICDY(0),"^",1))="",ICDCATH=ICDCATH_$P(ICDY(0),"^",2)
"RTN","ICDDRG5",135,0)
 S ICDE1=$S($D(ICDOP(37.95))&($D(ICDOP(37.96))):1,1:0),ICDE2=$S($D(ICDOP(37.97))&($D(ICDOP(37.98))):1,1:0)
"RTN","ICDDRG5",136,0)
 Q
"RTN","ICDDRG5",137,0)
 S:ICDCATH["H" ICDRG=$S(ICDCATH["N"&ICDE1:104,ICDCATH["N"&ICDE2:104,ICDCATH["O":104,1:ICDRG)
"RTN","ICDDRG5",138,0)
 S:ICDCATH'["H" ICDRG=$S(ICDCATH["N"&ICDE1:105,ICDCATH["N"&ICDE2:105,ICDCATH["O":105,1:ICDRG)
"RTN","ICDDRG5",139,0)
 K ICDCATH,ICDAJ,ICDE1,ICDE2,ICDI,ICDOP,ICDY Q
"RTN","ICDDRG5",140,0)
VALV1 ;dx combo's for DRG120
"RTN","ICDDRG5",141,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&($D(ICDOP(" 37.96"))):1,1:0),ICDE2=$S($D(ICDOP(" 37.97"))&($D(ICDOP(" 37.98"))):1,1:0)
"RTN","ICDDRG5",142,0)
 S ICDRG=$S((ICDE1&(ICDOR["H")):104,(ICDE1&(ICDOR'["H")):105,(ICDE2&(ICDOR["H")):104,(ICDE2&(ICDOR'["H")):105,1:120)
"RTN","ICDDRG5",143,0)
 K ICDE1,ICDE2
"RTN","ICDDRG5",144,0)
 Q
"RTN","ICDDRGM")
0^76^B190593495^B31028651
"RTN","ICDDRGM",1,0)
ICDDRGM ;ALB/GRR/EG/ADL/KUM - GROUPER DRIVER ;28 Oct 2013  5:41 PM
"RTN","ICDDRGM",2,0)
 ;;18.0;DRG Grouper;**7,36,57,64**;Oct 20, 2000;Build 103
"RTN","ICDDRGM",3,0)
 ;
"RTN","ICDDRGM",4,0)
 ; ADL  Add Date prompt and passing of effective date for DRG CSV project
"RTN","ICDDRGM",5,0)
 ; ADL  Update DIC("S") code to screen using new function calls
"RTN","ICDDRGM",6,0)
 ; ADL  Update to access DRG file using new API for CSV Project
"RTN","ICDDRGM",7,0)
 ; KER  Remove direct global reads, update for ICD-10
"RTN","ICDDRGM",8,0)
 ; 
"RTN","ICDDRGM",9,0)
 ; Global Variables
"RTN","ICDDRGM",10,0)
 ;    ^DPT(               ICR  10035
"RTN","ICDDRGM",11,0)
 ;               
"RTN","ICDDRGM",12,0)
 ; External References
"RTN","ICDDRGM",13,0)
 ;    ^%DTC               ICR  10000
"RTN","ICDDRGM",14,0)
 ;    ^DIC                ICR  10006
"RTN","ICDDRGM",15,0)
 ;    ^DIR                ICR  10026
"RTN","ICDDRGM",16,0)
 ;    $$DT^XLFDT          ICR  10103
"RTN","ICDDRGM",17,0)
 ;    H^XUS               ICR  10044
"RTN","ICDDRGM",18,0)
 ;    ^ICDDRG             ICR  N/A
"RTN","ICDDRGM",19,0)
 ;    $$DRG^ICDEX         ICR  N/A
"RTN","ICDDRGM",20,0)
 ;    $$DRGD^ICDEX        ICR  N/A
"RTN","ICDDRGM",21,0)
 ;    $$ROOT^ICDEX        ICR  N/A
"RTN","ICDDRGM",22,0)
 ;               
"RTN","ICDDRGM",23,0)
 ; Local Variables NEWed or KILLed Elsewhere
"RTN","ICDDRGM",24,0)
 ;     DIRUT,ICDDATE,QUIT,Y
"RTN","ICDDRGM",25,0)
 ; 
"RTN","ICDDRGM",26,0)
 S U="^",DT=$$DT^XLFDT W !!?11,"DRG Grouper    Version ","18.0",!! ;$$VERSION^XPDUTL("ICD"),!!
"RTN","ICDDRGM",27,0)
PAT ; Patient
"RTN","ICDDRGM",28,0)
 D KILL
"RTN","ICDDRGM",29,0)
 S ICDQU=0 K ICDEXP,SEX,ICDDX,ICDSURG,ICDPOA,ICDCSYS
"RTN","ICDDRGM",30,0)
 D EFFDATE G KILL:$D(DUOUT),ICDOUT:$D(DTOUT)
"RTN","ICDDRGM",31,0)
 S DIR(0)="Y",DIR("A")="DRGs for Registered PATIENTS  (Y/N)",DIR("B")="YES"
"RTN","ICDDRGM",32,0)
 S DIR("?")="Enter 'Yes' if the patient has been previously registered, enter 'No' for other patient, or '^' to quit."
"RTN","ICDDRGM",33,0)
 D ^DIR K DIR S ICDPT=Y G KILL:$D(DUOUT),ICDOUT:$D(DTOUT)
"RTN","ICDDRGM",34,0)
PAT0 ; Patient - Ask again
"RTN","ICDDRGM",35,0)
 G:ICDPT=0 ASK
"RTN","ICDDRGM",36,0)
VA ; VA Patient File #2 
"RTN","ICDDRGM",37,0)
 S DIC="^DPT(",DIC(0)="AEQMZ" D ^DIC G Q:X=""!(X[U)!(Y'>0),ICDOUT:$D(DTOUT) S DFN=+Y,(DOB,AGE)=$P(Y(0),U,3),SEX=$P(Y(0),U,2)
"RTN","ICDDRGM",38,0)
 D TAC G:ICDQU PAT D DAM G:ICDQU PAT
"RTN","ICDDRGM",39,0)
EN1 ; Entry Point - Patient is known (DFN) 
"RTN","ICDDRGM",40,0)
 I $D(^DPT(DFN,.35)),$L(^DPT(DFN,.35)) D ALIVE G:ICDQU PAT
"RTN","ICDDRGM",41,0)
 S ICDEXP=$S($D(ICDEXP):ICDEXP,1:0)
"RTN","ICDDRGM",42,0)
 I AGE]"" N %,X,X1,X2 S X1=DT,X2=AGE D ^%DTC S AGE=X\365.25 W "  AGE: ",AGE
"RTN","ICDDRGM",43,0)
CD ;Prompt POA if ICD-10 DRG calculation 
"RTN","ICDDRGM",44,0)
 S ICDCSYS=$S(ICDDATE'<$$IMPDATE^LEXU("10D"):"ICD10",1:"ICD9")
"RTN","ICDDRGM",45,0)
 D ICDCD G PAT:$G(QUIT)
"RTN","ICDDRGM",46,0)
 G Q:X[U
"RTN","ICDDRGM",47,0)
OP ; PROCEDURE CODE SELECTION
"RTN","ICDDRGM",48,0)
 S ICDCDSY=$S(ICDCSYS="ICD9":2,1:31),ICDCV="(ICD "_$P(ICDCSYS,"ICD",2)_")"
"RTN","ICDDRGM",49,0)
 S DIC("A")="Enter Operation/Procedure "_ICDCV_": "
"RTN","ICDDRGM",50,0)
 W !
"RTN","ICDDRGM",51,0)
 F ICDNOR=1:1 D  Q:X=""!(X[U)  G:$D(DTOUT) ICDOUT I X'=0,Y>0 S ICDPRC(ICDNOR)=+Y,ICDSURG(ICDNOR)=X
"RTN","ICDDRGM",52,0)
 .;I ICDCSYS="ICD10" S ICDXX1=1 S ICDPRC="" D ASK^ICDCODLK K ICDXX1
"RTN","ICDDRGM",53,0)
 .I ICDCSYS="ICD10" D PROC
"RTN","ICDDRGM",54,0)
 .I ICDCSYS="ICD9" S ICDPRC="" D ICD9OP
"RTN","ICDDRGM",55,0)
 K DIC,ICDCDSY,ICDCV G Q:X["^"
"RTN","ICDDRGM",56,0)
 ;Rearrange ICDPRC array
"RTN","ICDDRGM",57,0)
 S X=0,ICDCNT=1
"RTN","ICDDRGM",58,0)
 F  S X=$O(ICDPRC(X)) Q:'X  D
"RTN","ICDDRGM",59,0)
 . S ICDPRCT(ICDCNT)=ICDPRC(X)
"RTN","ICDDRGM",60,0)
 . S ICDCNT=ICDCNT+1
"RTN","ICDDRGM",61,0)
 K ICDPRC
"RTN","ICDDRGM",62,0)
 M ICDPRC=ICDPRCT
"RTN","ICDDRGM",63,0)
 ;Rearrange ICDSURG array
"RTN","ICDDRGM",64,0)
 S X=0,ICDCNT=1
"RTN","ICDDRGM",65,0)
 F  S X=$O(ICDSURG(X)) Q:'X  D
"RTN","ICDDRGM",66,0)
 . S ICDSURGT(ICDCNT)=ICDSURG(X)
"RTN","ICDDRGM",67,0)
 . S ICDCNT=ICDCNT+1
"RTN","ICDDRGM",68,0)
 K ICDSURG
"RTN","ICDDRGM",69,0)
 M ICDSURG=ICDSURGT
"RTN","ICDDRGM",70,0)
 ;
"RTN","ICDDRGM",71,0)
 I ICDCSYS="ICD10" M ICDDXZ=ICDDX,ICDPRCZ=ICDPRC,ICDPOAZ=ICDPOA
"RTN","ICDDRGM",72,0)
 D ^ICDDRG
"RTN","ICDDRGM",73,0)
 D WRT
"RTN","ICDDRGM",74,0)
 I ICDCSYS="ICD10" K ICDEXP,SEX,ICDDX,ICDSURG,ICDPOA,ICDPRC,ICDDXZ,ICDPRCZ,ICDPOAZ,ICDPRCT,ICDCNT,ICDSURGT
"RTN","ICDDRGM",75,0)
 G PAT0
"RTN","ICDDRGM",76,0)
WRT S ICDDRG(0)=$$DRG^ICDEX(+ICDDRG,ICDDATE)  ;  new CSV code
"RTN","ICDDRGM",77,0)
 I ICDCSYS="ICD10" D
"RTN","ICDDRGM",78,0)
 . S ICDTMP=$$ICDDX^ICDEX(ICDDXZ(1),ICDDATE,"10D","I")
"RTN","ICDDRGM",79,0)
 . W !,"Principal Diagnosis: ",$P(ICDTMP,U,2),?30,$E($$VST^ICDEX(80,ICDDXZ(1),ICDDATE),1,44),?75,"POA=",$S($G(ICDPOAZ(1))'="":ICDPOAZ(1),1:"-")
"RTN","ICDDRGM",80,0)
 . F ICDI=2:1 Q:'$D(ICDDXZ(ICDI))  D
"RTN","ICDDRGM",81,0)
 . . S ICDTMP=$$ICDDX^ICDEX(ICDDXZ(ICDI),ICDDATE,"10D","I")
"RTN","ICDDRGM",82,0)
 . . W:ICDI=2 !,"Secondary Diagnosis: " W:ICDI>2 !?21 W $P(ICDTMP,U,2),?30,$E($$VST^ICDEX(80,ICDDXZ(ICDI),ICDDATE),1,44),?75,"POA=",$S($G(ICDPOAZ(ICDI))'="":ICDPOAZ(ICDI),1:"-")
"RTN","ICDDRGM",83,0)
 . F ICDI=1:1 Q:'$D(ICDPRCZ(ICDI))  D
"RTN","ICDDRGM",84,0)
 . . S ICDTMP=$$ICDOP^ICDEX(ICDPRCZ(ICDI),ICDDATE,"10P","I")
"RTN","ICDDRGM",85,0)
 . . W:ICDI=1 !!,"Procedure Code: " W:ICDI>1 ! W ?21,$P(ICDTMP,U,2),?30,$E($$VST^ICDEX(80.1,ICDPRCZ(ICDI),ICDDATE),1,50)
"RTN","ICDDRGM",86,0)
 W !!?9,"Effective Date: ","   ",ICDDSP
"RTN","ICDDRGM",87,0)
 W !,"Diagnosis Related Group: ",$J(ICDDRG,6),?40,"Avg len of stay: ",$J($P(ICDDRG(0),"^",8),6)
"RTN","ICDDRGM",88,0)
 W !?17,"Weight: ",$J($P(ICDDRG(0),"^",2),6),?40,"Local Breakeven: ",$J($P(ICDDRG(0),"^",12),6)
"RTN","ICDDRGM",89,0)
 W !?12," Low day(s): ",$J($P(ICDDRG(0),"^",3),6),?39,"Local low day(s): ",$J($P(ICDDRG(0),"^",9),6)
"RTN","ICDDRGM",90,0)
 W !?13," High days: ",$J($P(ICDDRG(0),"^",4),6),?40,"Local High days: ",$J($P(ICDDRG(0),"^",10),6)
"RTN","ICDDRGM",91,0)
 ;W !!,"DRG: ",ICDDRG,"-" F I=0:0 S I=$N(^ICD(ICDDRG,1,I)) Q:I'>0  W ?10,$P(^(I,0),U,1),!
"RTN","ICDDRGM",92,0)
 ;W !!,"DRG: ",ICDDRG,"-" F I=0:0 S I=$O(^ICD(ICDDRG,1,I)) Q:(I="")!(I'?.N)  W ?10,$P(^(I,0),U,1),!
"RTN","ICDDRGM",93,0)
 N ICDXD,ICDGDX,ICDGI
"RTN","ICDDRGM",94,0)
 S ICDXD=$$DRGD^ICDEX(ICDDRG,"ICDGDX",ICDDATE),ICDGI=0
"RTN","ICDDRGM",95,0)
 W !!,"DRG: ",ICDDRG,"-" F  S ICDGI=$O(ICDGDX(ICDGI)) Q:'+ICDGI  Q:ICDGDX(ICDGI)=" "  W ?10,ICDGDX(ICDGI),!
"RTN","ICDDRGM",96,0)
 Q
"RTN","ICDDRGM",97,0)
ERROR D WRT
"RTN","ICDDRGM",98,0)
 I ICDRTC<5 W !!,"Invalid ",$S(ICDRTC=1:"Principal Diagnosis",ICDRTC=2:"Operation/Procedure",ICDRTC=3:"Age",ICDRTC=4:"Sex",1:"") G PAT0
"RTN","ICDDRGM",99,0)
 I ICDRTC=5 W !!,"Grouper needs to know if patient died during this episode!" G PAT0
"RTN","ICDDRGM",100,0)
 I ICDRTC=6 W !!,"Grouper needs to know if patient was transferred to an acute care facility!" G PAT0
"RTN","ICDDRGM",101,0)
 I ICDRTC=7 W !!,"Grouper needs to know if patient was discharged against medical advice!" G PAT0
"RTN","ICDDRGM",102,0)
 I ICDRTC=8 W !!,"Patient assigned newborn diagnosis code.  Check diagnosis!" G PAT0
"RTN","ICDDRGM",103,0)
 G PAT0
"RTN","ICDDRGM",104,0)
KILL K DIC,DFN,DUOUT,DTOUT,ICDNOR,ICDDX,ICDPRC,ICDEXP,ICDTRS,ICDDMS,ICDDRG,ICDMDC,ICDO24,ICDP24,ICDP25,ICDRTC,ICDPT,ICDQU,ICDSD,ICDNMDC
"RTN","ICDDRGM",105,0)
 K ICDMAJ,ICDS25,ICDSEX,AGE,DOB,CC,HICDRG,ICD,ICDCC3,ICDJ,ICDJJ,ICDL39,ICDFZ,ICDDT,ICDDSP,IENT,QUIT
"RTN","ICDDRGM",106,0)
 Q
"RTN","ICDDRGM",107,0)
Q G PAT
"RTN","ICDDRGM",108,0)
AGE S DIR(0)="NOA^0:124:0",DIR("A")="Patient's age: ",DIR("?")="Enter how old the patient is (0-124)." D ^DIR K DIR S AGE=Y G QQ:$D(DUOUT),ICDOUT:$D(DTOUT)
"RTN","ICDDRGM",109,0)
 Q
"RTN","ICDDRGM",110,0)
ALIVE S DIR(0)="YO",DIR("A")="Did patient die during this episode" D ^DIR K DIR S ICDEXP=Y G QQ:$D(DUOUT),ICDOUT:$D(DTOUT)
"RTN","ICDDRGM",111,0)
 Q
"RTN","ICDDRGM",112,0)
TAC S DIR(0)="YO",DIR("A")="Was patient transferred to an acute care facility" D ^DIR K DIR S ICDTRS=Y G QQ:$D(DUOUT),ICDOUT:$D(DTOUT)
"RTN","ICDDRGM",113,0)
 Q
"RTN","ICDDRGM",114,0)
DAM S DIR(0)="YO",DIR("A")="Was patient discharged against medical advice" D ^DIR K DIR S ICDDMS=Y G QQ:$D(DUOUT),ICDOUT:$D(DTOUT)
"RTN","ICDDRGM",115,0)
 Q
"RTN","ICDDRGM",116,0)
SEX S DIR(0)="SBO^M:MALE;F:FEMALE",DIR("?")="Enter M for Male and F for Female",DIR("A")="Patient's Sex" D ^DIR K DIR S SEX=Y G QQ:$D(DUOUT),ICDOUT:$D(DTOUT)
"RTN","ICDDRGM",117,0)
 Q
"RTN","ICDDRGM",118,0)
QQ S ICDQU=1 Q
"RTN","ICDDRGM",119,0)
EFFDATE ;prompts for effective date for DRG grouper?
"RTN","ICDDRGM",120,0)
 K DIR S DIR(0)="D^::AEX",DIR("B")="TODAY",DIR("A")="Effective Date"
"RTN","ICDDRGM",121,0)
 S DIR("?")="The effective to be used when calculating the DRG code for the patient."
"RTN","ICDDRGM",122,0)
 D ^DIR K DIR I $D(DIRUT) S QUIT=1 Q
"RTN","ICDDRGM",123,0)
 S ICDDATE=Y,ICDDSP=Y(0)
"RTN","ICDDRGM",124,0)
 Q
"RTN","ICDDRGM",125,0)
ASK K DTOUT,DUOUT D AGE G:ICDQU PAT D ALIVE G:ICDQU PAT D TAC G:ICDQU PAT D DAM G:ICDQU PAT D SEX G:ICDQU PAT G CD
"RTN","ICDDRGM",126,0)
ICDOUT G H^XUS
"RTN","ICDDRGM",127,0)
 ;
"RTN","ICDDRGM",128,0)
ICDCD ;prompts for ICD diagnosis codes; ALB/JAM *64 ICD10 changes 
"RTN","ICDDRGM",129,0)
 N ICDPDXV,ICDSDXV,ICDDXPOA,ICDSD,ICDSC
"RTN","ICDDRGM",130,0)
 S ICDSC="(ICD "_$P(ICDCSYS,"ICD",2)_")"
"RTN","ICDDRGM",131,0)
 S ICDPDXV=$$ICDPDX Q:$G(QUIT)!(ICDPDXV<0)  S ICDDX(1)=ICDPDXV
"RTN","ICDDRGM",132,0)
 ;if ICD9 code skip POA question
"RTN","ICDDRGM",133,0)
 I ICDCSYS="ICD9" G ICDSDXV
"RTN","ICDDRGM",134,0)
 S ICDDXPOA=$$POA(ICDPDXV) Q:$G(QUIT)  S ICDPOA(1)=$TR(ICDDXPOA,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","ICDDRGM",135,0)
ICDSDXV F ICDSD=2:1 S ICDSDXV=$$ICDSDX Q:$G(QUIT)!(ICDSDXV'>0)  S ICDDX(ICDSD)=ICDSDXV D  Q:$G(QUIT)
"RTN","ICDDRGM",136,0)
 .; if ICD9 code skip POA question
"RTN","ICDDRGM",137,0)
 .I ICDCSYS="ICD9" Q
"RTN","ICDDRGM",138,0)
 .S ICDDXPOA=$$POA(ICDSDXV) Q:$G(QUIT)  S ICDPOA(ICDSD)=$TR(ICDDXPOA,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","ICDDRGM",139,0)
 Q
"RTN","ICDDRGM",140,0)
 ;
"RTN","ICDDRGM",141,0)
 ; Get ICD Principal Diagnosis Code
"RTN","ICDDRGM",142,0)
ICDPDX() ;
"RTN","ICDDRGM",143,0)
 N DIC,ICDCDSY,IENT,ICDSVAL,ICDPRI
"RTN","ICDDRGM",144,0)
 N ICDDSCR,ICDQUIT
"RTN","ICDDRGM",145,0)
 S ICDQUIT=0
"RTN","ICDDRGM",146,0)
 S ICDDSCR="Enter Principal diagnosis "_ICDSC_": "
"RTN","ICDDRGM",147,0)
 S ICDCDSY=$S(ICDCSYS="ICD9":1,1:30)
"RTN","ICDDRGM",148,0)
 ;if ICD-10
"RTN","ICDDRGM",149,0)
 I ICDCSYS="ICD10" D  Q ICDSVAL
"RTN","ICDDRGM",150,0)
 . ;if was aborted in the list then don't set QUIT=1, if aborted in the search string prompt then set QUIT=1 
"RTN","ICDDRGM",151,0)
 . F  S ICDSVAL=$$ICD10SRH(ICDDSCR,ICDDATE) Q:$G(ICDSVAL)>0  S:(ICDSVAL=-11)!(ICDSVAL=-2)!(ICDSVAL=0) (ICDQUIT,QUIT)=1  Q:ICDQUIT=1
"RTN","ICDDRGM",152,0)
 ;if ICD-9
"RTN","ICDDRGM",153,0)
 S IENT="I",ICDPRI="Y"
"RTN","ICDDRGM",154,0)
 S DIC=$$ROOT^ICDEX(80),DIC(0)="AEQMZI"
"RTN","ICDDRGM",155,0)
 S DIC("A")=ICDDSCR
"RTN","ICDDRGM",156,0)
 S DIC("S")="I $P($$ICDDX^ICDEX(+$G(Y),$G(ICDDATE),ICDCDSY,IENT),U,1)>0,$P($$ICDDX^ICDEX(+$G(Y),$G(ICDDATE),ICDCDSY,IENT),U,10),'$P($$ICDDX^ICDEX(+$G(Y),ICDDATE,ICDCDSY,IENT),U,5)"
"RTN","ICDDRGM",157,0)
 S Y=$$SEARCH^ICDSAPI(80,DIC("S"),DIC(0),$G(ICDDATE))
"RTN","ICDDRGM",158,0)
 I Y<=0 S QUIT=1 Q -1
"RTN","ICDDRGM",159,0)
 Q +Y
"RTN","ICDDRGM",160,0)
 ;
"RTN","ICDDRGM",161,0)
 ;Get ICD Secondary Diagnoses Codes 
"RTN","ICDDRGM",162,0)
ICDSDX() ;
"RTN","ICDDRGM",163,0)
 N DIC,ICDCDSY,IENT,ICDSVAL
"RTN","ICDDRGM",164,0)
 N ICDDSCR,ICDQUIT
"RTN","ICDDRGM",165,0)
 S ICDQUIT=0
"RTN","ICDDRGM",166,0)
 S ICDDSCR="Enter SECONDARY diagnosis "_ICDSC_": "
"RTN","ICDDRGM",167,0)
 S ICDCDSY=$S(ICDCSYS="ICD9":1,1:30)
"RTN","ICDDRGM",168,0)
 ;if ICD-10
"RTN","ICDDRGM",169,0)
 I ICDCSYS="ICD10" D  Q ICDSVAL
"RTN","ICDDRGM",170,0)
 . ;if was aborted in the list then don't set QUIT=1, if aborted in the search string prompt then set QUIT=1 
"RTN","ICDDRGM",171,0)
 . F  S ICDSVAL=$$ICD10SRH(ICDDSCR,ICDDATE) Q:$G(ICDSVAL)>0  S:ICDSVAL=0!(ICDSVAL=-2) ICDQUIT=1 S:ICDSVAL=-11 (ICDQUIT,QUIT)=1  Q:ICDQUIT=1
"RTN","ICDDRGM",172,0)
 ;if ICD-9
"RTN","ICDDRGM",173,0)
 S IENT="I"
"RTN","ICDDRGM",174,0)
 S DIC=$$ROOT^ICDEX(80),DIC(0)="AEQMZI"
"RTN","ICDDRGM",175,0)
 S DIC("A")=ICDDSCR
"RTN","ICDDRGM",176,0)
 S DIC("S")="I $P($$ICDDX^ICDEX(+$G(Y),$G(ICDDATE),ICDCDSY,IENT),U,1)>0,$P($$ICDDX^ICDEX(+$G(Y),$G(ICDDATE),ICDCDSY,IENT),U,10)"
"RTN","ICDDRGM",177,0)
 S Y=$$SEARCH^ICDSAPI(80,DIC("S"),DIC(0),$G(ICDDATE))
"RTN","ICDDRGM",178,0)
 I $D(DTOUT) S QUIT=1 Q -1
"RTN","ICDDRGM",179,0)
 I Y>0 Q +Y
"RTN","ICDDRGM",180,0)
 Q -1
"RTN","ICDDRGM",181,0)
 ;
"RTN","ICDDRGM",182,0)
 ;
"RTN","ICDDRGM",183,0)
 ;Ask for diagnosis
"RTN","ICDDRGM",184,0)
 ;ICDTINT - date of interest
"RTN","ICDDRGM",185,0)
 ;ICDPROM - prompt
"RTN","ICDDRGM",186,0)
 ;
"RTN","ICDDRGM",187,0)
 ;returns -11 if user has entered one of these - ^ ^^ or null
"RTN","ICDDRGM",188,0)
 ; -4 user doesn't want to continue
"RTN","ICDDRGM",189,0)
 ; -11 aborted by ^ or ^^ when the user enters the search sring (wants to quit from the prompt to the previous level)
"RTN","ICDDRGM",190,0)
 ; -3 aborted by ^ or ^^ during selection of the items on the list
"RTN","ICDDRGM",191,0)
 ; -2 Timed out 
"RTN","ICDDRGM",192,0)
 ; -9 User entered only one character
"RTN","ICDDRGM",193,0)
 ; -1 User entered Blank in the list of selection
"RTN","ICDDRGM",194,0)
 ; -10 User entered invalid data in the list of selection
"RTN","ICDDRGM",195,0)
ICD10SRH(ICDPROM,ICDTINT) ; Lexicon Partial Code Search
"RTN","ICDDRGM",196,0)
 N ICDUSTR,ICDPARAM
"RTN","ICDDRGM",197,0)
 ;set parameters for partial LEXICON search
"RTN","ICDDRGM",198,0)
 D SETPARAM^ICDDSLK(.ICDPARAM)
"RTN","ICDDRGM",199,0)
 ;if prompt provided the getusers input,
"RTN","ICDDRGM",200,0)
 ; return -11 to indicate that user wants to quit from the prompt to the previous level
"RTN","ICDDRGM",201,0)
 ; return 0 to indicate that user pressed Enter in the primary diag prompt it means he wants to quit from the prompt to the previous level, 
"RTN","ICDDRGM",202,0)
 ;   in secondary - wants to skip secodary diags
"RTN","ICDDRGM",203,0)
 ; otherwise call STS API for partial LEXICON search
"RTN","ICDDRGM",204,0)
 D  Q:ICDUSTR'>0 ICDUSTR  S ICDY=$$LEXICD10^ICDDSLK($P(ICDUSTR,U,2),ICDTINT,.ICDPARAM)
"RTN","ICDDRGM",205,0)
 . F  S ICDUSTR=$$GETUSINP(ICDPROM) Q:ICDUSTR'=-22  ;repeat if less than 2 chars and wasn't aborted by ^,^^ or null (Enter key pressed)
"RTN","ICDDRGM",206,0)
 ; User entered only one character
"RTN","ICDDRGM",207,0)
 I ICDY=-9 Q -9
"RTN","ICDDRGM",208,0)
 ; User entered Blank 
"RTN","ICDDRGM",209,0)
 I ICDY=-1 Q -1
"RTN","ICDDRGM",210,0)
 ; User entered invalid data
"RTN","ICDDRGM",211,0)
 I ICDY="" W !!,ICDPARAM("NO DATA FOUND") Q -12
"RTN","ICDDRGM",212,0)
 ; aborted by ^ or ^^
"RTN","ICDDRGM",213,0)
 I ICDY=-3 Q -3
"RTN","ICDDRGM",214,0)
 ; Timed out 
"RTN","ICDDRGM",215,0)
 I ICDY=-2 Q -2
"RTN","ICDDRGM",216,0)
 ; User doesn't want to continue
"RTN","ICDDRGM",217,0)
 I ICDY=-4 Q -4
"RTN","ICDDRGM",218,0)
 ; otherwise get the IEN of the selected code
"RTN","ICDDRGM",219,0)
 K DIC
"RTN","ICDDRGM",220,0)
 S ICDY=+$$CODEN^ICDEX($P($P(ICDY,";",2),U,1),80)
"RTN","ICDDRGM",221,0)
 Q +ICDY
"RTN","ICDDRGM",222,0)
 ;
"RTN","ICDDRGM",223,0)
 ;Get user input
"RTN","ICDDRGM",224,0)
 ;returns:
"RTN","ICDDRGM",225,0)
 ; "-2" timeout 
"RTN","ICDDRGM",226,0)
 ; "-11" user entered ^ or ^^
"RTN","ICDDRGM",227,0)
 ; "-22" user entered less than 2 chars
"RTN","ICDDRGM",228,0)
 ; 0 user entered null
"RTN","ICDDRGM",229,0)
 ; 1 user entered more than 2 chars
"RTN","ICDDRGM",230,0)
GETUSINP(ICDPRMPT) ;
"RTN","ICDDRGM",231,0)
 N DIR
"RTN","ICDDRGM",232,0)
 S DIR("A")=ICDPRMPT
"RTN","ICDDRGM",233,0)
 S DIR(0)="FAO^0:245"
"RTN","ICDDRGM",234,0)
 S DIR("?")="^D INPHLP^ICDDSLK"
"RTN","ICDDRGM",235,0)
 S DIR("??")="^D INPHLP^ICDDSLK"
"RTN","ICDDRGM",236,0)
 D ^DIR
"RTN","ICDDRGM",237,0)
 I $D(DTOUT) Q -2 ;timeout
"RTN","ICDDRGM",238,0)
 I Y="" Q 0 ; user entered null
"RTN","ICDDRGM",239,0)
 I Y["^" Q -11 ; user entered ^ or ^^
"RTN","ICDDRGM",240,0)
 I $L(Y)'>1 W !,"Please enter at least the first two characters of the ICD-10 code or code description to start the search." Q -22
"RTN","ICDDRGM",241,0)
 Q "1"_U_Y
"RTN","ICDDRGM",242,0)
 ;
"RTN","ICDDRGM",243,0)
GETIDX(ICDCSYS,ICDCODE,ICDT) ;
"RTN","ICDDRGM",244,0)
 N ICDICDX
"RTN","ICDDRGM",245,0)
 S ICDICDX=$$ICDDATA^ICDXCODE(ICDCSYS,ICDCODE,ICDT)
"RTN","ICDDRGM",246,0)
 I ICDICDX<1 Q $P(ICDICDX,U,2)
"RTN","ICDDRGM",247,0)
 Q $P(ICDICDX,U)_U_$P(ICDICDX,U,4)
"RTN","ICDDRGM",248,0)
 ;
"RTN","ICDDRGM",249,0)
POA(ICDDX123) ; Present On Admission
"RTN","ICDDRGM",250,0)
 N DIR,X,Y,ICDPR
"RTN","ICDDRGM",251,0)
 S QUIT=0,DIR("A")="Present on Admission: ",DIR(0)="SOA^Y:YES;N:NO;U:Unknown;W:Clinically undetermined"
"RTN","ICDDRGM",252,0)
 K DIR S QUIT=0,DIR("A")="Present on Admission: ",DIR(0)="SOA^Y:YES;N:NO;U:Unknown;W:Clinically undetermined"
"RTN","ICDDRGM",253,0)
 S (DIR("?"),DIR("??"))="^D HELPPOA^ICDDRGM"
"RTN","ICDDRGM",254,0)
 D ^DIR
"RTN","ICDDRGM",255,0)
 I ($D(DTOUT))!($D(DUOUT))!($D(DIROUT)) S QUIT=1 Q -1
"RTN","ICDDRGM",256,0)
 I X="" D
"RTN","ICDDRGM",257,0)
 . I $$GET1^DIQ(80,ICDDX123,1.9,"I")'=1 D  ;Not POA Exempt
"RTN","ICDDRGM",258,0)
 . . S ICDPR(1)="Diagnosis "_$$GET1^DIQ(80,ICDDX123,.01,"I")_" is not contained in the POA Exempt list so the POA field should"
"RTN","ICDDRGM",259,0)
 . . S ICDPR(2)="not be blank. If left blank, it will be treated as if it were a No (""N"")."
"RTN","ICDDRGM",260,0)
 . . D EN^DDIOL(.ICDPR)
"RTN","ICDDRGM",261,0)
 . . K DIR S DIR(0)="Y",DIR("A")="Do you wish to continue? (Y/N)",DIR("B")="YES" D ^DIR I ($D(DTOUT))!($D(DUOUT))!($D(DIROUT)) S QUIT=1
"RTN","ICDDRGM",262,0)
 . . I Y=0 S QUIT=1 Q
"RTN","ICDDRGM",263,0)
 . . S Y="N" ;This may subsequently be removed if the DX is on the HAC list - see $$HAC^ICDDRGM
"RTN","ICDDRGM",264,0)
 . E  S Y="Y"
"RTN","ICDDRGM",265,0)
 E  S Y=X
"RTN","ICDDRGM",266,0)
 I QUIT Q -1
"RTN","ICDDRGM",267,0)
 Q Y
"RTN","ICDDRGM",268,0)
 ;
"RTN","ICDDRGM",269,0)
DXSCRN ;Diagnoses review of POA and HAC indicators; ALB/JAM *64 ICD10 changes
"RTN","ICDDRGM",270,0)
 N I,X,ICDDX123,ICDTMPX,ICDTMPOA,C,ICDOUT
"RTN","ICDDRGM",271,0)
 ;if POA value does not exist for Primary DX set to "U"nknown
"RTN","ICDDRGM",272,0)
 I '$D(ICDPOA(1)) S ICDPOA(1)="U"
"RTN","ICDDRGM",273,0)
 S X=1
"RTN","ICDDRGM",274,0)
 F  S X=$O(ICDDX(X)) Q:'X  S ICDOUT=0 D
"RTN","ICDDRGM",275,0)
 .;if POA value does not exist for DX set to "U"nknown
"RTN","ICDDRGM",276,0)
 .I '$D(ICDPOA(X)) S ICDPOA(X)="U"
"RTN","ICDDRGM",277,0)
 .;if DX is POA exempt include in DRG calculation
"RTN","ICDDRGM",278,0)
 .S ICDDX123=ICDDX(X) I $$GET1^DIQ(80,ICDDX123,1.9,"I") Q
"RTN","ICDDRGM",279,0)
 .;if POA value for DX is Y or W include in DRG calculation
"RTN","ICDDRGM",280,0)
 .F I="Y","W" I ICDPOA(X)=I S ICDOUT=1 Q
"RTN","ICDDRGM",281,0)
 .I ICDOUT Q
"RTN","ICDDRGM",282,0)
 .;if DX not in HAC list include in DRG calculation
"RTN","ICDDRGM",283,0)
 .F I="N","U",1 I ICDPOA(X)=I,'$$HAC(ICDDX123) S ICDOUT=1 Q
"RTN","ICDDRGM",284,0)
 .I ICDOUT Q
"RTN","ICDDRGM",285,0)
 .I ICDPOA(X)="",'$$HAC(ICDDX123) S ICDOUT=1 Q
"RTN","ICDDRGM",286,0)
 .I ICDOUT Q
"RTN","ICDDRGM",287,0)
 .; remove entry from ICDDX and ICDPOA array 
"RTN","ICDDRGM",288,0)
 .K ICDDX(X),ICDPOA(X)
"RTN","ICDDRGM",289,0)
 ; resequence entries in ICDDX and ICDPOA array
"RTN","ICDDRGM",290,0)
 M ICDTMPX=ICDDX,ICDTMPOA=ICDPOA
"RTN","ICDDRGM",291,0)
 K ICDDX,ICDPOA
"RTN","ICDDRGM",292,0)
 S C=0
"RTN","ICDDRGM",293,0)
 S X=0 F  S X=$O(ICDTMPX(X)) Q:'X  S C=C+1,ICDDX(C)=ICDTMPX(X),ICDPOA(C)=ICDTMPOA(X)
"RTN","ICDDRGM",294,0)
 Q
"RTN","ICDDRGM",295,0)
 ;
"RTN","ICDDRGM",296,0)
HAC(ICDDX123) ; Check if diagnosis code is in Hospital Acquired Conditions (HACS) file #80.6
"RTN","ICDDRGM",297,0)
 ;Input DX - Diagnosis code IEN, pointer to file #80
"RTN","ICDDRGM",298,0)
 ;Output   - 1 if the DX code is found in file #80.6
"RTN","ICDDRGM",299,0)
 ;           0 if the DX code not found in the file
"RTN","ICDDRGM",300,0)
 ;
"RTN","ICDDRGM",301,0)
 I $D(^ICDHAC("C",ICDDX123)) Q 1
"RTN","ICDDRGM",302,0)
 Q 0
"RTN","ICDDRGM",303,0)
 ;
"RTN","ICDDRGM",304,0)
ICD9OP ; ICD-9 PROCEDURE CODE SEARCH
"RTN","ICDDRGM",305,0)
 S IENT="I"
"RTN","ICDDRGM",306,0)
 S DIC("S")="I $P($$ICDOP^ICDEX(+$G(Y),$G(ICDDATE),ICDCDSY,IENT),U,1)>0,+$P($$ICDOP^ICDEX(+$G(Y),$G(ICDDATE),ICDCDSY,IENT),U,10)'=0"
"RTN","ICDDRGM",307,0)
 S DIC("A")="Enter Operation/Procedure "_ICDCV_": "
"RTN","ICDDRGM",308,0)
 S DIC(0)="AEQMZI"   ;,DIC("S")="I $P($$ICDOP^ICDEX($G(Y),$G(ICDDATE),ICDCDSY,IENT),U,1)>0"
"RTN","ICDDRGM",309,0)
 S Y=$$SEARCH^ICDSAPI(80.1,DIC("S"),DIC(0),$G(ICDDATE))
"RTN","ICDDRGM",310,0)
 Q
"RTN","ICDDRGM",311,0)
 ;
"RTN","ICDDRGM",312,0)
HELPPOA ;
"RTN","ICDDRGM",313,0)
 W !?5,"Apply the Present on Admission (POA) indicator for each diagnosis"
"RTN","ICDDRGM",314,0)
 W !?5,"and external cause of injury code(s) reported as the final set of"
"RTN","ICDDRGM",315,0)
 W !?5,"diagnosis codes assigned.  One of the following values should be"
"RTN","ICDDRGM",316,0)
 W !?5,"assigned in accordance with the official coding guidelines:"
"RTN","ICDDRGM",317,0)
 W !?5,""
"RTN","ICDDRGM",318,0)
 W !?5,"Y = present at the time of inpatient admission;"
"RTN","ICDDRGM",319,0)
 W !?5,"N = not present at the time of inpatient admission;"
"RTN","ICDDRGM",320,0)
 W !?5,"U = documentation is insufficient to determine if"
"RTN","ICDDRGM",321,0)
 W !?5,"    condition is present on admission;"
"RTN","ICDDRGM",322,0)
 W !?5,"W = provider is unable to clinically determine"
"RTN","ICDDRGM",323,0)
 W !?5,"    whether condition was present on admission or not"
"RTN","ICDDRGM",324,0)
 W !?5,"<enter> = use only if diagnosis is exempt from POA reporting"
"RTN","ICDDRGM",325,0)
 Q
"RTN","ICDDRGM",326,0)
 ;
"RTN","ICDDRGM",327,0)
PROC ; Ask Procedure
"RTN","ICDDRGM",328,0)
 N DIR,ICDXX1
"RTN","ICDDRGM",329,0)
 S ICDXX1=1 S ICDPRC=""
"RTN","ICDDRGM",330,0)
 S DIR(0)="FAO^1:12"
"RTN","ICDDRGM",331,0)
 S DIR("A")="Enter Operation/Procedure (ICD 10):"
"RTN","ICDDRGM",332,0)
 S DIR("?")="^D P1^ICDDRGM",DIR("??")="^D P2^ICDDRGM"
"RTN","ICDDRGM",333,0)
 D ^DIR
"RTN","ICDDRGM",334,0)
 I $D(DTOUT)!($D(DUOUT))!($D(DIRUT))!($D(DIROUT))!(Y="") S Y=-1 Q
"RTN","ICDDRGM",335,0)
 ;I X["*" S X=$P(X,"*",1)
"RTN","ICDDRGM",336,0)
 S ICDPRC=X
"RTN","ICDDRGM",337,0)
 ;I X["*" S X=$P(X,"*",1)_$P(X,"*",2)
"RTN","ICDDRGM",338,0)
 D ASK^ICDCODLK
"RTN","ICDDRGM",339,0)
 Q Y
"RTN","ICDDRGM",340,0)
P1 ;
"RTN","ICDDRGM",341,0)
 I X["???" D P3 Q  ;For calls from ^DIR, doesn't support ??? help
"RTN","ICDDRGM",342,0)
 I X["??" D P2 Q
"RTN","ICDDRGM",343,0)
 D EN^DDIOL("Enter the initial character(s) of an ICD-10 partial code or an","","!?5")
"RTN","ICDDRGM",344,0)
 D EN^DDIOL("asterisk (*) for more information.","","!?5")
"RTN","ICDDRGM",345,0)
 D EN^DDIOL(" ")
"RTN","ICDDRGM",346,0)
 Q
"RTN","ICDDRGM",347,0)
 ;
"RTN","ICDDRGM",348,0)
P2 ;
"RTN","ICDDRGM",349,0)
 D EN^DDIOL("1. Enter an ICD-10 Procedure Code.","","!?8")
"RTN","ICDDRGM",350,0)
 D EN^DDIOL("      or  ","","!?8")
"RTN","ICDDRGM",351,0)
 D EN^DDIOL("2. Enter any alphanumeric char values of the procedure code to 'build'","","!?8")
"RTN","ICDDRGM",352,0)
 D EN^DDIOL("   an ICD-10 Procedure Code.","","!?8")
"RTN","ICDDRGM",353,0)
 D EN^DDIOL("      or  ","","!?8")
"RTN","ICDDRGM",354,0)
 D EN^DDIOL("3. Enter an asterisk (*) to initiate a procedure code build search. ","","!?8")
"RTN","ICDDRGM",355,0)
 D EN^DDIOL(" ")
"RTN","ICDDRGM",356,0)
 Q
"RTN","ICDDRGM",357,0)
 ;
"RTN","ICDDRGM",358,0)
P3 ;
"RTN","ICDDRGM",359,0)
 D EN^DDIOL("The procedure code search provides a 'decision tree' type structure","","!?8")
"RTN","ICDDRGM",360,0)
 D EN^DDIOL("that makes use of the specific ICD-10-PCS code format and structure,","","!?8")
"RTN","ICDDRGM",361,0)
 D EN^DDIOL("where all codes consist of 7 alphanumeric characters, with each","","!?8")
"RTN","ICDDRGM",362,0)
 D EN^DDIOL("position in the code having a specific meaning.","","!?8")
"RTN","ICDDRGM",363,0)
 D EN^DDIOL(" ")
"RTN","ICDDRGM",364,0)
 Q
"RTN","ICDDRGM",365,0)
 ;
"RTN","ICDDRGX")
0^61^B28133843^B26050820
"RTN","ICDDRGX",1,0)
ICDDRGX ;ALB/EG/MRY/ADL/KUM - GROUPER PROCESS ;26 Mar 2013  12:25 PM
"RTN","ICDDRGX",2,0)
 ;;18.0;DRG Grouper;**1,2,5,7,10,14,20,24,27,31,64**;Oct 20, 2000;Build 103
"RTN","ICDDRGX",3,0)
 ;
"RTN","ICDDRGX",4,0)
CKHIV ;MDC25 grouping
"RTN","ICDDRGX",5,0)
 N ICDI
"RTN","ICDDRGX",6,0)
 I ICDDATE>3070930.9 G CKHIV^ICDDRGXM ;MS-DRG
"RTN","ICDDRGX",7,0)
 ;Q:ICDP25=""
"RTN","ICDDRGX",8,0)
 I ICDPD'["h"&(ICDSD'["h") Q
"RTN","ICDDRGX",9,0)
 S ICDRG=$S(ICDOR["x":488,ICDPD["i"&($D(ICDS25(1))):490,1:ICDRG)
"RTN","ICDDRGX",10,0)
 S ICDGH=$S("488^489^490"[ICDRG:1,1:0),ICDORNI=$S(ICDOCNT>0:ICDORNI,1:0),ICDORNA=$F(ICDORNI,"O",$F(ICDORNI,"O"))
"RTN","ICDDRGX",11,0)
 S:ICDORNI="" ICDORNI=ICDOR
"RTN","ICDDRGX",12,0)
 S ICDRG=$S(ICDP25=1&(ICDORNA>0):488,1:ICDRG) I 'ICDGH&(ICDRG=488) Q
"RTN","ICDDRGX",13,0)
 S:(ICDOCNT>0) ICDRG=$S(ICDP25>1&(ICDORNA>0)&($D(ICDS25(1))):488,1:ICDRG) I 'ICDGH&(ICDRG=488) Q
"RTN","ICDDRGX",14,0)
 I ICDOPCT>0 D  I ICDRG=488 Q
"RTN","ICDDRGX",15,0)
 .;count the non-extensive "z" vs the "O"
"RTN","ICDDRGX",16,0)
 .N K1,K2,I
"RTN","ICDDRGX",17,0)
 .S (K1,K2)=0
"RTN","ICDDRGX",18,0)
 .F I=1:1:$L(ICDORNI) S:$E(ICDORNI,I,I)="z" K1=K1+1 S:$E(ICDORNI,I,I)="O" K2=K2+1
"RTN","ICDDRGX",19,0)
 .I ICDP25=1!(ICDP25>1&($D(ICDS25)>0)) D
"RTN","ICDDRGX",20,0)
 ..I K1<K2&(K1<ICDOPCT) D
"RTN","ICDDRGX",21,0)
 ...S ICDRG=488 Q
"RTN","ICDDRGX",22,0)
 ..I ICDOPCT=1&(ICDORNI'["z") D
"RTN","ICDDRGX",23,0)
 ...S ICDRG=488 Q
"RTN","ICDDRGX",24,0)
 S ICDRG=$S(ICDP25=1&('$D(ICDS25))&('$$EXIST^ICDEX(ICDDX(1),30)):490,1:ICDRG) I 'ICDGH&(ICDRG=490) Q
"RTN","ICDDRGX",25,0)
 S ICDRG=$S(ICDP25=1&($D(ICDS25(2))):489,ICDP25=1&($D(ICDS25(3))):490,1:ICDRG) I 'ICDGH&((ICDRG=489)!(ICDRG=490)) Q
"RTN","ICDDRGX",26,0)
 S ICDRG=$S(ICDP25=2&($D(ICDS25(1))):489,ICDP25=3&($D(ICDS25(1))):490,1:ICDRG) I 'ICDGH&((ICDRG=489)!(ICDRG=490)) Q
"RTN","ICDDRGX",27,0)
 S ICDRG=$S((ICDP25&(ICDOCNT=0)&('$D(ICDS25))):490,1:ICDRG) I 'ICDGH&(ICDRG=490) Q
"RTN","ICDDRGX",28,0)
 S:(ICDRG=488)!(ICDRG=489)!(ICDRG=490) ICDRTC=0
"RTN","ICDDRGX",29,0)
 K ICDGH,ICDP25,ICDS25,ICDORNA Q
"RTN","ICDDRGX",30,0)
CKMST ;MDC24 grouping; MS-DRG additions
"RTN","ICDDRGX",31,0)
 S ICDAJ=0 F ICDS24K=1:1 S ICDAJ=$O(ICDS24(ICDAJ)) Q:ICDAJ=""
"RTN","ICDDRGX",32,0)
 S ICDS24K=ICDS24K-1,ICDS24L=0 F ICDI=1:1:8 S:$D(ICDS24(ICDI))&(ICDI'=ICDP24) ICDS24L=$S($D(ICDS24(ICDI)):1,1:0)
"RTN","ICDDRGX",33,0)
 I ICDOR["u" S ICDS24K=ICDS24K+1
"RTN","ICDDRGX",34,0)
 G:((ICDP24=0)&(ICDS24K<2))!((ICDP24>0)&('ICDS24L)) CKMSTE
"RTN","ICDDRGX",35,0)
 N CKMST S CKMST=0
"RTN","ICDDRGX",36,0)
 I ICDDATE>3070930.9 D  Q:CKMST  ;MS-DRG
"RTN","ICDDRGX",37,0)
 . S ICDRG=$S(ICDP24=0&(ICDS24K>1)&($D(ICDO24(1))):955,ICDP24>0&($D(ICDO24(1)))&(ICDS24L):955,1:ICDRG) I ICDRG=955 D CKMSTE S CKMST=1 Q
"RTN","ICDDRGX",38,0)
 . S:ICDRG'=955 ICDRG=$S(ICDP24=0&(ICDS24K>1)&($D(ICDO24(2))):956,ICDP24>0&($D(ICDO24(2)))&(ICDS24L):956,1:ICDRG) I ICDRG=956 D CKMSTE S CKMST=1 Q
"RTN","ICDDRGX",39,0)
 . S:ICDRG'=956 ICDRG=$S(ICDP24=0&(ICDS24K>1)&($D(ICDO24(3))):959,ICDP24>0&($D(ICDO24(3)))&(ICDS24L):959,1:ICDRG) I ICDRG=959 D CKMSTE S CKMST=1 Q
"RTN","ICDDRGX",40,0)
 . S ICDRG=$S(ICDP24=0&(ICDS24K>1):965,ICDP24>0&ICDS24L:965,1:ICDRG)
"RTN","ICDDRGX",41,0)
 . S:(ICDRG>954)&(ICDRG<966) ICDRTC=0
"RTN","ICDDRGX",42,0)
 E  D  Q:CKMST  ;CMS-DRG
"RTN","ICDDRGX",43,0)
 . S ICDRG=$S(ICDP24=0&(ICDS24K>1)&($D(ICDO24(1))):484,ICDP24>0&($D(ICDO24(1)))&(ICDS24L):484,1:ICDRG) I ICDRG=484 D CKMSTE S CKMST=1 Q
"RTN","ICDDRGX",44,0)
 . S:ICDRG'=484 ICDRG=$S(ICDP24=0&(ICDS24K>1)&($D(ICDO24(2))):485,ICDP24>0&($D(ICDO24(2)))&(ICDS24L):485,1:ICDRG) I ICDRG=485 D CKMSTE S CKMST=1 Q
"RTN","ICDDRGX",45,0)
 . S:ICDRG'=485 ICDRG=$S(ICDP24=0&(ICDS24K>1)&($D(ICDO24(3))):486,ICDP24>0&($D(ICDO24(3)))&(ICDS24L):486,1:ICDRG) I ICDRG=486 D CKMSTE S CKMST=1 Q
"RTN","ICDDRGX",46,0)
 . S ICDRG=$S(ICDP24=0&(ICDS24K>1):487,ICDP24>0&ICDS24L:487,1:ICDRG)
"RTN","ICDDRGX",47,0)
 . S:(ICDRG>483)&(ICDRG<488) ICDRTC=0
"RTN","ICDDRGX",48,0)
CKMSTE K ICDAJ,ICDP24,ICDS24,ICDO24,ICDS24K,ICDO24,ICDS24L
"RTN","ICDDRGX",49,0)
 Q
"RTN","ICDDRGX",50,0)
CKNMDC ;non MDC drg's
"RTN","ICDDRGX",51,0)
 I ICDDATE>3070930.9 G CKNMDC^ICDDRGXM ;MS-DRG
"RTN","ICDDRGX",52,0)
 S:(ICDRG>479)&(ICDRG<484) ICDRG=470
"RTN","ICDDRGX",53,0)
 ; ICD*18*1 - reorder drg 103 higher than all Pre-MDCs 480-83 & 495
"RTN","ICDDRGX",54,0)
 I ICDRG=103 S ICDRTC=0 Q
"RTN","ICDDRGX",55,0)
 S ICDCDSY=$S(ICDDATE'<$$IMPDATE^LEXU("10D"):30,1:1)
"RTN","ICDDRGX",56,0)
 ;use FY logic to resolve DRG if no FY defined user current FY
"RTN","ICDDRGX",57,0)
 N ICDDXFY S ICDDXFY=""
"RTN","ICDDRGX",58,0)
 I ICDDATE>3040930.9 D  I ICDRG=541!(ICDRG=542) S ICDRTC=0 Q  ;Use DRG FY 05 logic
"RTN","ICDDRGX",59,0)
 .;S ICDRG=$S($D(ICDOP(" 31.1"))!($D(ICDOP(" 31.21")))!($D(ICDOP(" 31.29")))&(($P($$ICDDX^ICDCODE(ICDDX(1),ICDDATE),"^",3)'["Y")!($D(ICDOP(" 96.72")))):541,1:ICDRG)
"RTN","ICDDRGX",60,0)
 .;I ICDRG=541&(($P($$ICDDX^ICDCODE(ICDDX(1),ICDDATE),"^",3))["Y") S ICDRG=542 S ICDRTC=0
"RTN","ICDDRGX",61,0)
 .I $D(ICDOP(" 39.65")) S ICDRG=541 Q
"RTN","ICDDRGX",62,0)
 .I $D(ICDOP(" 31.1"))!($D(ICDOP(" 31.21")))!($D(ICDOP(" 31.29"))) I $TR($P($$ICDDX^ICDEX(ICDDX(1),ICDDATE,ICDCDSY,"I"),"^",3),";","")'["Y"!(($D(ICDOP(" 96.72")))) S ICDRG=542
"RTN","ICDDRGX",63,0)
 .I $D(ICDOP(" 31.1"))!($D(ICDOP(" 31.21")))!($D(ICDOP(" 31.29"))) I $TR($P($$ICDDX^ICDEX(ICDDX(1),ICDDATE,ICDCDSY,"I"),"^",3),";","")'["Y"!(($D(ICDOP(" 96.72")))) I ICDOR["O"&(ICDOR'["z")&(ICDOR'["y") S ICDRG=541
"RTN","ICDDRGX",64,0)
 I ICDDATE<3041001 D  Q:ICDRG=483  ;Use DRG FY 04 logic
"RTN","ICDDRGX",65,0)
 .S ICDRG=$S($D(ICDOP(" 31.1"))!($D(ICDOP(" 31.21")))!($D(ICDOP(" 31.29")))&(($TR($P($$ICDDX^ICDEX(ICDDX(1),ICDDATE,ICDCDSY,"I"),"^",3),";","")'["Y")!($D(ICDOP(" 96.72")))):483,1:ICDRG) I ICDRG=483 S ICDRTC=0
"RTN","ICDDRGX",66,0)
 S ICDRG=$S(ICDOR["l":480,1:ICDRG) I ICDRG=480 S ICDRTC=0 Q
"RTN","ICDDRGX",67,0)
 I ICDRG=512!(ICDRG=513) S ICDRTC=0 Q
"RTN","ICDDRGX",68,0)
 S ICDRG=$S(ICDOR["r":495,1:ICDRG) I ICDRG=495 S ICDRTC=0 Q  ;check for lung tx
"RTN","ICDDRGX",69,0)
 S ICDRG=$S(ICDOR["q":103,1:ICDRG) I ICDRG=103 S ICDRTC=0 Q  ;check for heart tx
"RTN","ICDDRGX",70,0)
 S ICDRG=$S(ICDOR["B":481,1:ICDRG) I ICDRG=481 S ICDRTC=0 Q
"RTN","ICDDRGX",71,0)
 S ICDRG=$S($D(ICDOP(" 30.3"))!$D(ICDOP(" 30.4")):482,1:ICDRG) I ICDRG=482 S ICDRTC=0 Q
"RTN","ICDDRGX",72,0)
 S ICDRG=$S(ICDOR["t"&($TR($P($$ICDDX^ICDEX(ICDDX(1),ICDDATE,ICDCDSY,"I"),"^",3),";","")["Y"):482,1:ICDRG) I ICDRG=482 S ICDRTC=0 Q
"RTN","ICDDRGX",73,0)
 Q
"RTN","ICDDRGX",74,0)
 ;
"RTN","ICDDRGX",75,0)
 ;
"RTN","ICDDRGX",76,0)
CHKMDC4 ;MDC 4 drg's
"RTN","ICDDRGX",77,0)
 I ICDDATE>3070930.9 D  ;MS-DRG
"RTN","ICDDRGX",78,0)
 . I (ICDMDC=4!(ICDMDC=98)),(ICDOR["f") S ICDRG=168
"RTN","ICDDRGX",79,0)
 . I ICDDRG=983,$G(ICDMDC)=5,$D(ICDOP(" 86.06")) S ICDRG=264
"RTN","ICDDRGX",80,0)
 . I ICDDRG=983,$G(ICDMDC)=5,$D(ICDOP(" 92.27")),ICDNOR=1 S ICDRG=264 ;ICD*18*5
"RTN","ICDDRGX",81,0)
 E  D  ;CMS-DRG
"RTN","ICDDRGX",82,0)
 . I (ICDMDC=4!(ICDMDC=98)),(ICDOR["f") S ICDRG=76
"RTN","ICDDRGX",83,0)
 . I ICDDRG=468,$G(ICDMDC)=5,$D(ICDOP(" 86.06")) S ICDRG=120
"RTN","ICDDRGX",84,0)
 . I ICDDRG=468,$G(ICDMDC)=5,$D(ICDOP(" 92.27")),ICDNOR=1 S ICDRG=120 ;ICD*18*5
"RTN","ICDDRGX",85,0)
 Q
"RTN","ICDDRGX1")
0^62^B12298991^n/a
"RTN","ICDDRGX1",1,0)
ICDDRGX1 ;KUM - GROUPER PROCESS ;05/10/12 3:44pm
"RTN","ICDDRGX1",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICDDRGX1",3,0)
 ;
"RTN","ICDDRGX1",4,0)
CKMST ;MDC24 Grouping
"RTN","ICDDRGX1",5,0)
 N ICDI
"RTN","ICDDRGX1",6,0)
 S ICDAJ=0 F ICDS24K=1:1 S ICDAJ=$O(ICDS24(ICDAJ)) Q:ICDAJ=""
"RTN","ICDDRGX1",7,0)
 S ICDS24K=ICDS24K-1,ICDS24L=0 F ICDI=1:1:8 S:$D(ICDS24(ICDI))&(ICDI'=ICDP24) ICDS24L=$S($D(ICDS24(ICDI)):1,1:0)
"RTN","ICDDRGX1",8,0)
 I $D(ICD10OR(112)) S ICDS24K=ICDS24K+1 ;112=Other O.R. Procedues for MST
"RTN","ICDDRGX1",9,0)
 G:((ICDP24=0)&(ICDS24K<2))!((ICDP24>0)&('ICDS24L)) CKMSTE
"RTN","ICDDRGX1",10,0)
 S ICDRG=$S(ICDP24=0&(ICDS24K>1)&($D(ICDO24(1))):955,ICDP24>0&($D(ICDO24(1)))&(ICDS24L):955,1:ICDRG) I ICDRG=955 D CKMSTE Q
"RTN","ICDDRGX1",11,0)
 S:ICDRG'=955 ICDRG=$S(ICDP24=0&(ICDS24K>1)&($D(ICDO24(2))):956,ICDP24>0&($D(ICDO24(2)))&(ICDS24L):956,1:ICDRG) I ICDRG=956 D CKMSTE Q
"RTN","ICDDRGX1",12,0)
 S:ICDRG'=956 ICDRG=$S(ICDP24=0&(ICDS24K>1)&($D(ICDO24(3))):959,ICDP24>0&($D(ICDO24(3)))&(ICDS24L):959,1:ICDRG) I ICDRG=959 D CKMSTE Q
"RTN","ICDDRGX1",13,0)
 S ICDRG=$S(ICDP24=0&(ICDS24K>1):965,ICDP24>0&ICDS24L:965,1:ICDRG)
"RTN","ICDDRGX1",14,0)
 S:(ICDRG>954)&(ICDRG<966) ICDRTC=0
"RTN","ICDDRGX1",15,0)
CKMSTE K ICDAJ,ICDP24,ICDS24,ICDO24,ICDS24K,ICDO24,ICDS24L
"RTN","ICDDRGX1",16,0)
 Q
"RTN","ICDDRGX1",17,0)
CKHIV ;MDC25 grouping; MS-DRG
"RTN","ICDDRGX1",18,0)
 I '$D(ICD10PD("h"))&'$D(ICD10SD("h")) Q
"RTN","ICDDRGX1",19,0)
 S ICDRG=$S($D(ICD10OR("x")):970,$D(ICD10PD("i"))&($D(ICDS25(1))):977,1:ICDRG)
"RTN","ICDDRGX1",20,0)
 ;S ICDGH=$S("969^976^977"[ICDRG:1,1:0),ICDORNI=$S(ICDOCNT>0:ICDORNI,1:0),ICDORNA=$F(ICDORNI,"O",$F(ICDORNI,"O"))
"RTN","ICDDRGX1",21,0)
 S ICDGH=$S("969^976^977"[ICDRG:1,1:0),ICDORNI=$S(ICDOCNT>0:ICDORNI,1:0),ICDORNA=$G(ICD10ORNI("O"))-1
"RTN","ICDDRGX1",22,0)
 S:ICDORNI="" ICDORNI=ICDOR
"RTN","ICDDRGX1",23,0)
 S ICDRG=$S(ICDP25=1&(ICDORNA>0):970,1:ICDRG) I 'ICDGH&(ICDRG=970) D CKMS Q
"RTN","ICDDRGX1",24,0)
 S:(ICDOCNT>0) ICDRG=$S(ICDP25>1&(ICDORNA>0)&($D(ICDS25(1))):970,1:ICDRG) I 'ICDGH&(ICDRG=970) D CKMS Q
"RTN","ICDDRGX1",25,0)
 I ICDOPCT>0 D  I ICDRG=970 D CKMS Q
"RTN","ICDDRGX1",26,0)
 .;count the non-extensive "z" vs the "O"
"RTN","ICDDRGX1",27,0)
 .N K1,K2,I
"RTN","ICDDRGX1",28,0)
 .S (K1,K2)=0
"RTN","ICDDRGX1",29,0)
 .S K1=ICD10ORNI("z")
"RTN","ICDDRGX1",30,0)
 .S K2=ICD10ORNI("O")
"RTN","ICDDRGX1",31,0)
 .;F I=1:1:$L(ICDORNI) S:$E(ICDORNI,I,I)="z" K1=K1+1 S:$E(ICDORNI,I,I)="O" K2=K2+1
"RTN","ICDDRGX1",32,0)
 .I ICDP25=1!(ICDP25>1&($D(ICDS25)>0)) D
"RTN","ICDDRGX1",33,0)
 ..I K1<K2&(K1<ICDOPCT) D
"RTN","ICDDRGX1",34,0)
 ...S ICDRG=970 Q
"RTN","ICDDRGX1",35,0)
 ..I ICDOPCT=1&('$D(ICDORNI("z"))) D
"RTN","ICDDRGX1",36,0)
 ...S ICDRG=970 Q
"RTN","ICDDRGX1",37,0)
 S ICDRG=$S(ICDP25=1&('$D(ICDS25))&('$$EXIST^ICDEX(ICDDX(1),30)):977,1:ICDRG) I 'ICDGH&(ICDRG=977) D CKMS Q
"RTN","ICDDRGX1",38,0)
 S ICDRG=$S(ICDP25=1&($D(ICDS25(2))):976,ICDP25=1&($D(ICDS25(3))):976,1:ICDRG) I 'ICDGH&((ICDRG=976)!(ICDRG=977)) D CKMS Q
"RTN","ICDDRGX1",39,0)
 S ICDRG=$S(ICDP25=2&($D(ICDS25(1))):976,ICDP25=3&($D(ICDS25(1))):977,1:ICDRG) I 'ICDGH&((ICDRG=976)!(ICDRG=977)) D CKMS Q
"RTN","ICDDRGX1",40,0)
 S ICDRG=$S((ICDP25&(ICDOCNT=0)&('$D(ICDS25))):977,1:ICDRG) I 'ICDGH&(ICDRG=977) D CKMS Q
"RTN","ICDDRGX1",41,0)
 I "969^970^974^975^976^977"[ICDRG S ICDRTC=0
"RTN","ICDDRGX1",42,0)
 K ICDGH,ICDP25,ICDS25,ICDORNA Q
"RTN","ICDDRGX1",43,0)
 ;
"RTN","ICDDRGX1",44,0)
CKMS ;determine severity
"RTN","ICDDRGX1",45,0)
 I ICDRG=970 S ICDRG=$S(ICDMCC=2:969,1:970) Q
"RTN","ICDDRGX1",46,0)
 I ICDRG=976 S ICDRG=$S(ICDMCC=2:974,ICDMCC=1:975,1:976) Q
"RTN","ICDDRGX1",47,0)
 ;MS-DRG 977 has no severity
"RTN","ICDDRGX1",48,0)
 Q
"RTN","ICDDRGX1",49,0)
 ;
"RTN","ICDDRGX1",50,0)
CHKMDC4 ;MDC 4 drg's
"RTN","ICDDRGX1",51,0)
 I (ICDMDC=4!(ICDMDC=98)),($D(ICD10OR("f"))) S ICDRG=168
"RTN","ICDDRGX1",52,0)
 I ICDDRG=983,$G(ICDMDC)=5 S ICDRG=264
"RTN","ICDDRGX1",53,0)
 I ICDDRG=983,$G(ICDMDC)=5,ICDNOR=1 S ICDRG=264
"RTN","ICDDRGX1",54,0)
 Q
"RTN","ICDDRGX1",55,0)
CKNMDC ;non MDC drg's ;
"RTN","ICDDRGX1",56,0)
 I ICDRG=2 S ICDRTC=0 Q
"RTN","ICDDRGX1",57,0)
 S ICDRG=$S($D(ICD10OR("l")):6,1:ICDRG) I ICDRG=6 S ICDRTC=0 Q
"RTN","ICDDRGX1",58,0)
 I ICDRG=8!(ICDRG=10) S ICDRTC=0 Q
"RTN","ICDDRGX1",59,0)
 S ICDRG=$S($D(ICD10OR("r")):7,1:ICDRG) I ICDRG=7 S ICDRTC=0 Q  ;check for lung tx
"RTN","ICDDRGX1",60,0)
 S ICDRG=$S($D(ICD10OR("q")):2,1:ICDRG) I ICDRG=2 S ICDRTC=0 Q  ;check for heart tx
"RTN","ICDDRGX1",61,0)
 S ICDRG=$S($D(ICD10OR("B")):14,1:ICDRG) S ICDRTC=0,ICDMDC="" Q
"RTN","ICDDRGX1",62,0)
 S ICDRG=$S($D(ICD10OR("t"))&$D(ICD10PD("Y")):13,1:ICDRG) I ICDRG=13 S ICDRTC=0 Q
"RTN","ICDDRGX1",63,0)
 Q
"RTN","ICDDRGX2")
0^63^B156836573^n/a
"RTN","ICDDRGX2",1,0)
ICDDRGX2 ;MKN - GROUPER PROCESS ;06/04/12 3:45pm
"RTN","ICDDRGX2",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICDDRGX2",3,0)
 ;
"RTN","ICDDRGX2",4,0)
VARIABLS ;Apply Variables for MDC 1-22
"RTN","ICDDRGX2",5,0)
 ;
"RTN","ICDDRGX2",6,0)
 N ICDFI,ICDRGT,ICDN,ICDX,ICDREL
"RTN","ICDDRGX2",7,0)
 ;Check if Procedure Codes related to Primary DX
"RTN","ICDDRGX2",8,0)
 S (ICDFI,ICDREL)=0,ICDN="" F  S ICDN=$O(ICDPRC(ICDN)) Q:ICDN=""  S ICDX=$$MDCT^ICDEX(ICDPRC(ICDN),ICDDATE,.ICDMDC) S:ICDX=1 ICDREL=1
"RTN","ICDDRGX2",9,0)
 I $D(ICD10OR(151)) S ICDRG=$S(ICDMCC=2:11,ICDMCC=1:12,1:13),ICDFI=1 G EXIT ;151=Tracheostomy for Face, Mouth and Neck Diagnoses
"RTN","ICDDRGX2",10,0)
 I $D(ICD10OR(60)) S ICDRG=$S(ICDMCC=2:20,ICDMCC=1:21,1:22),ICDFI=1 G EXIT ;60=Intracranial Vascualr Procedure
"RTN","ICDDRGX2",11,0)
 I ICDMDC=1 D
"RTN","ICDDRGX2",12,0)
 . I $D(ICD10OR("Q")) D  Q:ICDFI  ;Craniotomy
"RTN","ICDDRGX2",13,0)
 . . I $D(ICD10OR("C")) S ICDRG=23,ICDFI=1 Q  ;C=Chemotherapy Implant
"RTN","ICDDRGX2",14,0)
 . . I $D(ICD10OR(77))!($D(ICD10PD(13))) D  Q  ;77=Major Device Implant or PDX of Acute Complex CNS
"RTN","ICDDRGX2",15,0)
 . . . S ICDRG=$S(ICDMCC=2:23,1:24),ICDFI=1 Q
"RTN","ICDDRGX2",16,0)
 . . I '($D(ICD10OR(77))!($D(ICD10PD(13)))) D  Q
"RTN","ICDDRGX2",17,0)
 . . . S ICDRG=$S(ICDMCC=2:25,ICDMCC=1:26,1:27),ICDFI=1 Q
"RTN","ICDDRGX2",18,0)
 . I $D(ICD10OR(144)) D  Q  ;Spinal Procedures
"RTN","ICDDRGX2",19,0)
 . . I ICDMCC>0 S ICDRG=$S(ICDMCC=2:28,1:29),ICDFI=1 Q
"RTN","ICDDRGX2",20,0)
 . . S ICDRG=$S($D(ICD10OR(143)):29,1:30),ICDFI=1 Q  ;143=Spinal NeuroStimulators
"RTN","ICDDRGX2",21,0)
 . I $D(ICD10OR(164)) S ICDRG=$S(ICDMCC=2:31,ICDMCC=1:32,1:33),ICDFI=1 Q  ;164=Ventricualr Shunt Procedures
"RTN","ICDDRGX2",22,0)
 . I $D(ICD10OR(33)) S ICDRG=$S(ICDMCC=2:34,ICDMCC=1:35,1:36),ICDFI=1 Q  ;33=Carotid Artery Stent Procedures
"RTN","ICDDRGX2",23,0)
 . I $D(ICD10OR(174)) S ICDRG=$S(ICDMCC=2:37,ICDMCC=1:38,1:39),ICDFI=1 Q  ;Extracranial Procedures
"RTN","ICDDRGX2",24,0)
 . I $D(ICD10OR(122)) D  Q  ;122=Peripheral and Cranial Nerve and Other Nervous System Procedures
"RTN","ICDDRGX2",25,0)
 . . I ICDMCC>0 S ICDRG=$S(ICDMCC=2:40,1:41),ICDFI=1 Q
"RTN","ICDDRGX2",26,0)
 . . I $D(ICD10OR(123)) S ICDRG=41,ICDFI=1 Q  ;123=Peripheral Neurostimulator Combinations
"RTN","ICDDRGX2",27,0)
 . . S ICDRG=42,ICDFI=1 Q
"RTN","ICDDRGX2",28,0)
 . I $D(ICD10OR(10)) S ICDRG=$S(ICDMCC=2:61,ICDMCC=1:62,1:63),ICDFI=1 Q  ;10=Acute Ischemic Stroke with Use of Thrombolytic Agent
"RTN","ICDDRGX2",29,0)
 . I $D(ICD10PD(86)) S ICDRG=$S(ICDMCC=2:64,ICDMCC=1:65,1:66),ICDFI=1 Q  ;86=Intracranial Hemorrhage or Cerebral Infarction
"RTN","ICDDRGX2",30,0)
 . I $D(ICD10PD(217)) S ICDRG=$S(ICDMCC=2:82,ICDMCC=1:83,1:84),ICDFI=1 Q  ;217=Traumatic Stupor and Coma, Coma > 1 Hour
"RTN","ICDDRGX2",31,0)
 . I $D(ICD10PD(216)) S ICDRG=$S(ICDMCC=2:85,ICDMCC=1:86,1:87),ICDFI=1 Q  ;216=Traumatic Stupor and Coma, Coma < 1 Hour
"RTN","ICDDRGX2",32,0)
 . I $D(ICD10PD(43)) S ICDRG=$S(ICDMCC=2:88,ICDMCC=1:89,1:90),ICDFI=1 Q  ;43=Concussion
"RTN","ICDDRGX2",33,0)
 . I $D(ICD10PD(155)) S ICDRG=$S(ICDMCC=2:91,ICDMCC=1:92,1:93),ICDFI=1 Q  ;155=Other Disorders of Nervous System
"RTN","ICDDRGX2",34,0)
 . I $D(ICD10PD(26)) S ICDRG=$S(ICDMCC=2:94,ICDMCC=1:95,1:96),ICDFI=1 Q  ;26=Bacterial and Tuberculous Infections of Nervous System
"RTN","ICDDRGX2",35,0)
 . I $D(ICD10PD(140)) S ICDRG=$S(ICDMCC=2:97,ICDMCC=1:98,1:99),ICDFI=1 Q  ;140=Non-Bacterial Infections of Nervous System Except Viral Meningitis
"RTN","ICDDRGX2",36,0)
 . I $D(ICD10PD(188)) S ICDRG=$S(ICDMCC=2:100,1:101),ICDFI=1 Q  ;188=Seizures
"RTN","ICDDRGX2",37,0)
 . I $D(ICD10PD(74)) S ICDRG=$S(ICDMCC=2:102,1:103),ICDFI=1 Q  ;74=Headaches
"RTN","ICDDRGX2",38,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",39,0)
 I ICDMDC=2 D
"RTN","ICDDRGX2",40,0)
 . I $D(ICD10OR(99)) S ICDRG=$S(ICDMCC=2:113,1:114),ICDFI=1 Q  ;Orbital Procedures
"RTN","ICDDRGX2",41,0)
 . I $D(ICD10OR(46)) S ICDRG=115,ICDFI=1 Q  ;Extraocular Procedures
"RTN","ICDDRGX2",42,0)
 . I $D(ICD10OR(61)) S ICDRG=$S(ICDMCC=2:116,1:117),ICDFI=1 Q  ;Intraocular Procedures
"RTN","ICDDRGX2",43,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",44,0)
 I ICDMDC=3,$D(ICD10OR(53)) D  ;53=Head and Neck procedures
"RTN","ICDDRGX2",45,0)
 . I $D(ICD10OR(77)) S ICDRG=129,ICDFI=1 Q  ;77=Major Device Implane
"RTN","ICDDRGX2",46,0)
 . S ICDRG=$S(ICDMCC>0:129,1:130),ICDFI=1 Q
"RTN","ICDDRGX2",47,0)
 . I $D(ICD10OR(39)) S ICDRG=$S(ICDMCC>0:131,1:132),ICDFI=1 Q  ;39=Cranial/Facial Procedures
"RTN","ICDDRGX2",48,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",49,0)
 I $D(ICD10OR(76)) S ICDRG=$S(ICDMCC=2:163,ICDMCC=1:164,1:165),ICDFI=1 Q  ;76=Major Chest Procedures
"RTN","ICDDRGX2",50,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",51,0)
 I ICDMDC=4 D
"RTN","ICDDRGX2",52,0)
 . I $D(ICD10OR(86)) S ICDRG=207,ICDFI=1 Q  ;86=Mechanical Ventilation 96+ hours
"RTN","ICDDRGX2",53,0)
 . I $D(ICD10OR(87)) S ICDRG=208,ICDFI=1 Q  ;87=Mechanical Ventilation <96 hours
"RTN","ICDDRGX2",54,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",55,0)
 I $D(ICD10OR(32)),'$D(ICD10OR(38)) D  ;32=Cardiac Valve and Other Major Cardiothoracic Procedures  38=Coronary Bypass
"RTN","ICDDRGX2",56,0)
 . I $D(ICD10OR(28)) S ICDRG=$S(ICDMCC=2:216,ICDMCC=1:217,1:218),ICDFI=1 Q  ;28=Cardiac Catherization
"RTN","ICDDRGX2",57,0)
 . S ICDRG=$S(ICDMCC=2:219,ICDMCC=1:220,1:221),ICDFI=1 Q
"RTN","ICDDRGX2",58,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",59,0)
 I $D(ICD10OR(29)) D  ;29=Cardiac Defibrillator Implant
"RTN","ICDDRGX2",60,0)
 . I $D(ICD10PD(22)),$D(ICD10OR(28)) S ICDRG=$S(ICDMCC=2:222,1:223),ICDFI=1 Q  ;22=AMI/HF/Shock and Cardiac Catheterization  28=Cardiac Catherization
"RTN","ICDDRGX2",61,0)
 . I '$D(ICD10PD(22)),$D(ICD10OR(28)) S ICDRG=$S(ICDMCC=2:224,1:225),ICDFI=1 Q
"RTN","ICDDRGX2",62,0)
 . I '$D(ICD10OR(28)) S ICDRG=$S(ICDMCC=2:226,1:227),ICDFI=1 Q
"RTN","ICDDRGX2",63,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",64,0)
 I $D(ICD10OR(38)) D  ;38=Coronary Bypass
"RTN","ICDDRGX2",65,0)
 . I $D(ICD10OR(129)) S ICDRG=$S(ICDMCC=2:231,1:232),ICDFI=1 Q  ;129=PTCA
"RTN","ICDDRGX2",66,0)
 . I $D(ICD10OR(28)) S ICDRG=$S(ICDMCC=2:233,1:234),ICDFI=1 Q  ;28=Cardiac Catheterization
"RTN","ICDDRGX2",67,0)
 . S ICDRG=$S(ICDMCC=2:235,1:236),ICDFI=1 Q
"RTN","ICDDRGX2",68,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",69,0)
 I $D(ICD10OR(125)) S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244),ICDFI=1 G EXIT
"RTN","ICDDRGX2",70,0)
 I $D(ICD10OR(12)) S ICDRG=245,ICDFI=1 G EXIT
"RTN","ICDDRGX2",71,0)
 I $D(ICD10OR(120)) D  ;120=Percutaneous Cardiovascular Procedures without Coronary Artery Stent
"RTN","ICDDRGX2",72,0)
 . I $D(ICD10OR(43)),ICDMCC=2 S ICDRG=246,ICDFI=1 Q  ;Drug-Eluting Stent
"RTN","ICDDRGX2",73,0)
 . I $D(ICD10OR(43)),ICDMCC'=2,$D(ICD10OR(87)) S ICDRG=246,ICDFI=1 Q  ;;Drug-Eluting Stent and 4+ Vessels / Stents
"RTN","ICDDRGX2",74,0)
 . I $D(ICD10OR(43)),ICDMCC'=2,'$D(ICD10OR(87)) S ICDRG=247,ICDFI=1 Q
"RTN","ICDDRGX2",75,0)
 . I '$D(ICD10OR(43)),$D(ICD10OR(92)) D  G:ICDFI EXIT
"RTN","ICDDRGX2",76,0)
 . . I ICDMCC=2 S ICDRG=248,ICDFI=1 Q  ;Non-Drug-Eluting Stent
"RTN","ICDDRGX2",77,0)
 . . S ICDRG=$S($D(ICD10OR(87)):248,1:249),ICDFI=1 Q
"RTN","ICDDRGX2",78,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",79,0)
 I ICDMDC=5,$D(ICD10OR(121)) S ICDRG=$S(ICDMCC=2:250,1:251),ICDFI=1 G EXIT ;Percutaneous Cardiovascular Procedures with Coronary Artery Stent
"RTN","ICDDRGX2",80,0)
 I $D(ICD10OR(31)),'$D(ICD10OR(101)) S ICDRG=$S(ICDMCC=2:260,ICDMCC=1:261,1:262),ICDFI=1 G EXIT ;30=Cardiac Pacemaker Revision Except Device Replacement
"RTN","ICDDRGX2",81,0)
 I $D(ICD10PD(18)) D  ;Acute Myocardial Infarction
"RTN","ICDDRGX2",82,0)
 . I 'ICDEXP S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282),ICDFI=1 Q  ;If Discharged Alive
"RTN","ICDDRGX2",83,0)
 . S ICDRG=$S(ICDMCC=2:283,ICDMCC=1:284,1:285),ICDFI=1 Q
"RTN","ICDDRGX2",84,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",85,0)
 I $D(ICD10OR(37)) S ICDRG=$S(ICDMCC=2:286,1:287),ICDFI=1 G EXIT ;Circulatory Disorders Except AMI with Cardiac Catheterization
"RTN","ICDDRGX2",86,0)
 I $D(ICD10PD(75)) S ICDRG=$S(ICDMCC=2:291,ICDMCC=1:292,1:293),ICDFI=1 G EXIT ;Heart Failure and Shock
"RTN","ICDDRGX2",87,0)
 I $D(ICD10PD(31)) S ICDRG=$S(ICDMCC=2:296,ICDMCC=1:297,1:298),ICDFI=1 G EXIT ;Cardiac Arrest, Unexplained
"RTN","ICDDRGX2",88,0)
 I $D(ICD10OR(130)) S ICDRG=$S(ICDMCC=2:332,ICDMCC=1:333,1:334),ICDFI=1 G EXIT ;Rectal Resection
"RTN","ICDDRGX2",89,0)
 I $D(ICD10OR(20)) D  ;Appendectomy
"RTN","ICDDRGX2",90,0)
 . I $D(ICD10PD(41)) S ICDRG=$S(ICDMCC=2:338,ICDMCC=1:339,1:340),ICDFI=1 Q
"RTN","ICDDRGX2",91,0)
 . S ICDRG=$S(ICDMCC=2:341,ICDMCC=1:342,1:343),ICDFI=1 Q
"RTN","ICDDRGX2",92,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",93,0)
 I ICDMDC=6 D
"RTN","ICDDRGX2",94,0)
 . I $D(ICD10OR("J")) S ICDRG=$S(ICDMCC=2:350,ICDMCC=1:351,1:352),ICDFI=1 Q  ;Inguinal and Femoral Hernia
"RTN","ICDDRGX2",95,0)
 . I $D(ICD10OR(55)) S ICDRG=$S(ICDMCC=2:353,ICDMCC=1:354,1:355),ICDFI=1 Q  ;Hernia except Inguinal and Femoral
"RTN","ICDDRGX2",96,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",97,0)
 I $D(ICD10PD(94)) S ICDRG=$S(ICDMCC=2:368,ICDMCC=1:369,1:370),ICDFI=1 G EXIT ;Major Esophageal Disorders
"RTN","ICDDRGX2",98,0)
 I $D(ICD10PD(40)) S ICDRG=$S(ICDMCC=2:380,ICDMCC=1:381,1:382),ICDFI=1 G EXIT ;Complicated Peptic Ulcer
"RTN","ICDDRGX2",99,0)
 I $D(ICD10PD(216)) S ICDRG=$S(ICDMCC=2:383,1:384),ICDFI=1 G EXIT ;Uncomplicated Peptic Ulcer
"RTN","ICDDRGX2",100,0)
 I $D(ICD10OR(36))!($D(ICD10OR(65))) D
"RTN","ICDDRGX2",101,0)
 . I $D(ICD10OR(27)) S ICDRG=$S(ICDMCC=2:411,ICDMCC=1:412,1:413),ICDFI=1 Q
"RTN","ICDDRGX2",102,0)
 . I '$D(ICD10OR(27)),'$D(ICD10OR(65)) S ICDRG=$S(ICDMCC=2:414,ICDMCC=1:415,1:416),ICDFI=1 Q
"RTN","ICDDRGX2",103,0)
 . I '$D(ICD10OR(27)),$D(ICD10OR(65)) S ICDRG=$S(ICDMCC=2:417,ICDMCC=1:418,1:419),ICDFI=1 Q
"RTN","ICDDRGX2",104,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",105,0)
 I ICDMDC=7,$D(ICD10OR(54)) S ICDRG=$S(ICDMCC=2:420,ICDMCC=1:421,1:422),ICDFI=1 G EXIT ;54=Hepatobiliary Diagnostic Procedures
"RTN","ICDDRGX2",106,0)
 I ICDMDC=8 D
"RTN","ICDDRGX2",107,0)
 . I $D(ICD10OR(19)),$D(ICD10OR(127)) S ICDRG=$S(ICDMCC=2:453,ICDMCC=1:454,1:455),ICDFI=1 Q  ;19=Anterior Spinal Fusion 127=Posterior Spinal Fusion
"RTN","ICDDRGX2",108,0)
 . I $D(ICD10OR(142)),$D(ICD10PD(206)) S ICDRG=$S(ICDMCC=2:456,ICDMCC=1:457,1:458),ICDFI=1 Q  ;180=Spinal Fusion except Cervical 206=Spinal Curvature / Malignancy / Infection
"RTN","ICDDRGX2",109,0)
 . I $D(ICD10OR(142)) S ICDRG=$S(ICDMCC=2:459,1:460),ICDFI=1 Q  ;180=Spinal Fusion except Cervical
"RTN","ICDDRGX2",110,0)
 . I $G(ICD10OR(173))=2 S ICDRG=$S(ICDMCC=2:461,1:462),ICDFI=1 Q  ;173=Bilateral or Multiple Major Joint Procedures of Lower Extremity
"RTN","ICDDRGX2",111,0)
 . I $D(ICD10OR(79)) S ICDRG=$S(ICDMCC=2:469,1:470),ICDFI=1 Q  ;79=Major Joint Replacement or Reattachment of Lower Extremity
"RTN","ICDDRGX2",112,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",113,0)
 I $D(ICD10OR(64)) D  ;Knee procedures
"RTN","ICDDRGX2",114,0)
 . I $D(ICD10PD(64)) S ICDRG=$S(ICDMCC=2:485,ICDMCC=1:486,1:487),ICDFI=1 Q
"RTN","ICDDRGX2",115,0)
 . S ICDRG=$S(ICDMCC>0:488,1:489),ICDFI=1
"RTN","ICDDRGX2",116,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",117,0)
 I $D(ICD10OR(23)),'$D(ICD10OR(42)),'$D(ICD10OR(91)),ICDMCC=0 S ICDRG=491,ICDFI=1
"RTN","ICDDRGX2",118,0)
 I $D(ICD10OR(23)),ICDMCC>0 S ICDRG=490,ICDFI=1
"RTN","ICDDRGX2",119,0)
 I '$D(ICD10OR(23)),$D(ICD10OR(42)) S ICDRG=490,ICDFI=1
"RTN","ICDDRGX2",120,0)
 I '$D(ICD10OR(23)),'$D(ICD10OR(42)),$D(ICD10OR(91)) S ICDRG=490,ICDFI=1
"RTN","ICDDRGX2",121,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",122,0)
 I ICDMDC=8,$D(ICD10OR(84)) S ICDRG=506,ICDFI=1 G EXIT ;84=Major Thumb or Joint Procedures
"RTN","ICDDRGX2",123,0)
 I ICDMDC=8,$D(ICD10OR(51)) S ICDRG=513,ICDFI=1 G EXIT ;51=Hand or Wrist Procedures, Except Major Thumb or Joint Procedures
"RTN","ICDDRGX2",124,0)
 I ICDMDC=9,$D(ICD10OR(137)) S ICDRG=$S(ICDMCC=2:570,ICDMCC=1:571,1:572),ICDFI=1 G EXIT ;Skin Debridemeny
"RTN","ICDDRGX2",125,0)
 I ICDMDC=9,$D(ICD10OR("k")) D
"RTN","ICDDRGX2",126,0)
 . I $D(ICD10PD(205))!($D(ICD10PD(34))) S ICDRG=$S(ICDMCC=2:573,ICDMCC=1:574,1:575),ICDFI=1 Q  ;205=Skin Ulcer  34=Cellulitis
"RTN","ICDDRGX2",127,0)
 . S ICDRG=$S(ICDMCC=2:576,ICDMCC=1:577,1:578),ICDFI=1 Q
"RTN","ICDDRGX2",128,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",129,0)
 I $D(ICD10OR(85)) S ICDRG=$S(ICDMCC>0:582,1:583),ICDFI=1 G EXIT
"RTN","ICDDRGX2",130,0)
 I ICDMDC=9,$D(ICD10PD(205)) S ICDRG=$S(ICDMCC=2:592,ICDMCC=1:593,1:594),ICDFI=1 G EXIT ;205=Skin Ulcers
"RTN","ICDDRGX2",131,0)
 I $D(ICD10PD(102)) S ICDRG=$S(ICDMCC=2:597,ICDMCC=1:598,1:599),ICDFI=1 G EXIT ;102=Malignant Breat Disorder
"RTN","ICDDRGX2",132,0)
 I $D(ICD10PD(142)) S ICDRG=$S(ICDMCC>0:600,1:601),ICDFI=1 G EXIT ;142=Non-Malignant Breast Disorders
"RTN","ICDDRGX2",133,0)
 I $D(ICD10OR(15)) S ICDRG=$S(ICDMCC=2:616,ICDMCC=1:617,1:618),ICDFI=1 G EXIT ;15=Amputation of Lower Limb for Endocrine, Nutritional and Metabolic Disorders
"RTN","ICDDRGX2",134,0)
 I $D(ICD10OR(63)) S ICDRG=652,ICDFI=1 G EXIT ;Kidney Transplant
"RTN","ICDDRGX2",135,0)
 I ICDMDC=11,$D(ICD10OR(74)) S ICDRG=$S(ICDMCC=2:653,ICDMCC=1:654,1:655),ICDFI=1 G EXIT ;74=Major Bladder Procedures
"RTN","ICDDRGX2",136,0)
 I $D(ICD10OR(62)) D  ;62=Kidney and Ureter Procedures
"RTN","ICDDRGX2",137,0)
 . I $D(ICD10PD(136)) S ICDRG=$S(ICDMCC=2:656,ICDMCC=1:657,1:658),ICDFI=1 Q  ;136=Neoplasm
"RTN","ICDDRGX2",138,0)
 . I '$D(ICD10PD(136)) S ICDRG=$S(ICDMCC=2:659,ICDMCC=1:660,1:661),ICDFI=1 Q
"RTN","ICDDRGX2",139,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",140,0)
 I ICDMDC=11,$D(ICD10OR(88)) S ICDRG=$S(ICDMCC=2:662,ICDMCC=1:663,1:664),ICDFI=1 G EXIT ;88=Minor Bladder Procedures
"RTN","ICDDRGX2",141,0)
 I ICDMDC=11 D
"RTN","ICDDRGX2",142,0)
 . I $D(ICD10OR(128)) S ICDRG=$S(ICDMCC=2:665,ICDMCC=1:666,1:667),ICDFI=1 Q  ;128=Prostatectomy
"RTN","ICDDRGX2",143,0)
 . I $D(ICD10OR(107)) S ICDRG=$S(ICDMCC=2:673,ICDMCC=1:674,1:675),ICDFI=1 Q  ;107=Other Kidney and Urinary Tract Procedures
"RTN","ICDDRGX2",144,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",145,0)
 I $D(ICD10PD(184)) S ICDRG=$S(ICDMCC=2:682,ICDMCC=1:683,1:684),ICDFI=1 G EXIT ;184=Renal Failure
"RTN","ICDDRGX2",146,0)
 I $D(ICD10PD(88)) S ICDRG=$S(ICDMCC=2:686,ICDMCC=1:687,1:688),ICDFI=1 G EXIT ;Kidney and Urinary Tract Neoplasms
"RTN","ICDDRGX2",147,0)
 I $D(ICD10PD(220)) D  ;220=Urinary Stones
"RTN","ICDDRGX2",148,0)
 . I $D(ICD10OR(45)) S ICDRG=$S(ICDMCC=2:691,1:692),ICDFI=1 Q  ;ESW Lithotripsy 
"RTN","ICDDRGX2",149,0)
 . S ICDRG=$S(ICDMCC=2:693,1:694),ICDFI=1 Q
"RTN","ICDDRGX2",150,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",151,0)
 I $D(ICD10PD(89)) S ICDRG=$S(ICDMCC=2:695,1:696),ICDFI=1 G EXIT ;Kidney and Urinary Tract Signs and Symptoms
"RTN","ICDDRGX2",152,0)
 I $D(ICD10OR(80)) S ICDRG=$S(ICDMCC>0:707,1:708),ICDFI=1 G EXIT ;80=Major Male Pelvic
"RTN","ICDDRGX2",153,0)
 I ICDMDC=12,$D(ICD10OR(119)) S ICDRG=$S(ICDMCC>0:709,1:710),ICDFI=1 G EXIT ;119=Penis Procedures
"RTN","ICDDRGX2",154,0)
 I $D(ICD10OR(147)) S ICDRG=$S(ICDMCC>0:711,1:712),ICDFI=1 G EXIT ;147=Testes Procedures
"RTN","ICDDRGX2",155,0)
 I ICDMDC=12,$D(ICD10OR(153)) S ICDRG=$S(ICDMCC>0:713,1:714),ICDFI=1 G EXIT ;153=Transurethral Prostatectomy
"RTN","ICDDRGX2",156,0)
 I SEX="M",ICDMDC=12,$D(ICD10OR(108)) D  ;108=Other Male Reproductive System O.R. Procedures
"RTN","ICDDRGX2",157,0)
 . I $D(ICD10PD(98)) S ICDRG=$S(ICDMCC>0:715,1:716),ICDFI=1 Q  ;98=Malignancy
"RTN","ICDDRGX2",158,0)
 . S ICDRG=$S(ICDMCC>0:717,1:718),ICDFI=1 Q
"RTN","ICDDRGX2",159,0)
 G:ICDFI EXIT
"RTN","ICDDRGX2",160,0)
 I ICDMDC=12,SEX="M",$D(ICD10PD(98)) S ICDRG=$S(ICDMCC=2:722,ICDMCC=1:723,1:724),ICDFI=1 G EXIT ;98=Malignancy, Male Reproductive System
"RTN","ICDDRGX2",161,0)
 I SEX="F",$D(ICD10OR(118)) S ICDRG=$S(ICDMCC>0:734,1:735),ICDFI=1 G EXIT ;118=Pelvic Evisceration, Radical Hysterectomy and Radical Vulvectomy
"RTN","ICDDRGX2",162,0)
 I $D(ICD10OR(158)),$D(ICD10PD(143)) S ICDRG=$S(ICDMCC=2:739,ICDMCC=1:740,1:741),ICDFI=1 G EXIT ;158=Uterine and Adnexal Procedures 143=Non-ovarian/adnexal Malignancy
"RTN","ICDDRGX2",163,0)
 I $D(ICD10OR(158)),$D(ICD10PD(168)) S ICDRG=$S(ICDMCC=2:736,ICDMCC=1:737,1:738),ICDFI=1 G EXIT ;168=Ovarian or Adnexal Malignancy
"RTN","ICDDRGX2",164,0)
 I SEX="F" D
"RTN","ICDDRGX2",165,0)
 . I ICDMDC=13 D
"RTN","ICDDRGX2",166,0)
 . . I $D(ICD10OR(157)) S ICDRG=$S(ICDMCC>0:742,1:743),ICDFI=1 Q  ;157=Uterine and Adnexal Procedures for Non-Malignancy
"RTN","ICDDRGX2",167,0)
 . . I $D(ICD10OR(41)) S ICDRG=$S(ICDMCC>0:744,1:745),ICDFI=1 Q  ;41=D&C, Conization, Laparoscopy and Tubal Interruption
"RTN","ICDDRGX2",168,0)
 . Q:ICDFI
"RTN","ICDDRGX2",169,0)
 . ;I ICDMDC=14,$D(ICD10OR(41)),$D(ICD10OR(161)) D  ;D&C, Conization, Laparoscopy and Tubal Interruption
"RTN","ICDDRGX2",170,0)
 . ;.S ICDRG=$S($D(ICD10OR(161)):767,1:768),ICDFI=1 Q  ;161=Sterilization and/or D&C
"RTN","ICDDRGX2",171,0)
 . I ICDMDC=14,$D(ICD10OR(181)) D  ;181=Delivery procedures
"RTN","ICDDRGX2",172,0)
 . . I $D(ICD10OR(183)) S ICDRG=767,ICDFI=1 Q  ;183=Sterilization and/or D&C
"RTN","ICDDRGX2",173,0)
 . . I $D(ICD10OR(182)) S ICDRG=768,ICDFI=1 Q  ;182=Not Sterilization and/or D&C
"RTN","ICDDRGX2",174,0)
 G:ICDFI=1 EXIT
"RTN","ICDDRGX2",175,0)
 I $D(ICD10OR(159)) S ICDRG=$S(ICDMCC>0:746,1:747),ICDFI=1 G EXIT ;159=Vagina, Cervix and Vulva Procedures
"RTN","ICDDRGX2",176,0)
 I $D(ICD10OR(47)) S ICDRG=748,ICDFI=1 G EXIT ;47=Female Reproductive System Reconstructive Procedures
"RTN","ICDDRGX2",177,0)
 I SEX="F",$D(ICD10OR(104)) S ICDRG=$S(ICDMCC>0:749,1:750),ICDFI=1 G EXIT ;104=Other Female Reproductive System O.R. Procedures
"RTN","ICDDRGX2",178,0)
 I SEX="F",$D(ICD10PD(100)) S ICDRG=$S(ICDMCC=2:754,ICDMCC=1:755,1:756),ICDFI=1 G EXIT ;98=Malignancy, Female Reproductive System
"RTN","ICDDRGX2",179,0)
 I SEX="F",$D(ICD10PD(81)) S ICDRG=$S(ICDMCC=2:757,ICDMCC=1:758,1:759),ICDFI=1 G EXIT ;81=Infections, Female Reproductive System
"RTN","ICDDRGX2",180,0)
 I $D(ICD10PD(130)) S ICDRG=$S(ICDMCC>0:760,1:761),ICDFI=1,ICDFI=1 G EXIT ;130=Menstrual and Other Female Reproductive System Disorders
"RTN","ICDDRGX2",181,0)
 I $D(ICD10OR("c")) S ICDRG=$S(ICDMCC>0:765,1:766),ICDFI=1 G EXIT ;"c"=Cesarean Section
"RTN","ICDDRGX2",182,0)
 I $D(ICD10OR(162)) S ICDRG=$S($D(ICD10OR(161)):767,1:768),ICDFI=1 G EXIT ;162=Vaginal Delivery 161=Sterilization and/or D&C
"RTN","ICDDRGX2",183,0)
 I $D(ICD10PD(176)),$D(ICD10OR) S ICDRG=769,ICDFI=1 G EXIT ;176=Postpartum and Post Abortion Diagnoses with O.R. Procedure
"RTN","ICDDRGX2",184,0)
 I $D(ICD10PD(176)),'$D(ICD10OR) S ICDRG=776,ICDFI=1 G EXIT ;176=Postpartum and Post Abortion Diagnoses with O.R. Procedure
"RTN","ICDDRGX2",185,0)
 I $D(ICD10PD(10)) S ICDRG=779,ICDFI=1 G EXIT ;Abortion without D&C
"RTN","ICDDRGX2",186,0)
 I $D(ICD10OR(145)) S ICDRG=$S(ICDMCC=2:799,ICDMCC=1:800,1:801),ICDFI=1 G EXIT ;145=Splenectomy
"RTN","ICDDRGX2",187,0)
 I ICDMDC=16,$D(ICD10OR(110)) S ICDRG=$S(ICDMCC=2:802,ICDMCC=1:803,1:804),ICDFI=1 G EXIT ;110=Other O.R. Procedures of the Blood and Blood Forming Organs
"RTN","ICDDRGX2",188,0)
 I $D(ICD10OR(94)) S ICDRG=$S(ICDMCC=2:808,ICDMCC=1:809,1:810),ICDFI=1 G EXIT ;94=Major Hematological/Immunological Diagnoses Except Sickle Cell Crisis and Coagulation
"RTN","ICDDRGX2",189,0)
 I $D(ICD10PD(90)),$D(ICD10OR(81)) S ICDRG=$S(ICDMCC=2:820,ICDMCC=1:821,1:822),ICDFI=1 G EXIT ;90=Lymphoma and Leukemia with Major O.R. Procedure
"RTN","ICDDRGX2",190,0)
 G ^ICDDRGX3
"RTN","ICDDRGX2",191,0)
 ;
"RTN","ICDDRGX2",192,0)
EXIT ;
"RTN","ICDDRGX2",193,0)
 G EXIT^ICDDRGX3
"RTN","ICDDRGX2",194,0)
 ;
"RTN","ICDDRGX3")
0^73^B25217688^n/a
"RTN","ICDDRGX3",1,0)
ICDDRGX3 ;MKN - GROUPER PROCESS continued from ICDDRGX2;06/04/12 3:45pm
"RTN","ICDDRGX3",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICDDRGX3",3,0)
 ;
"RTN","ICDDRGX3",4,0)
VARIABLS ;Apply Variables for MDC 1-22
"RTN","ICDDRGX3",5,0)
 ;
"RTN","ICDDRGX3",6,0)
 I $D(ICD10PD(92)),$D(ICD10OR),'$D(ICD10OR(81)) S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825),ICDFI=1 G EXIT ;92=Lymphoma and Non-Acute Leukemia with Other O.R. Procedure
"RTN","ICDDRGX3",7,0)
 I $D(ICD10PD(16)),'$D(ICD10OR(81)) S ICDRG=$S(ICDMCC=2:834,ICDMCC=1:835,1:836),ICDFI=1 G EXIT ;16=Acute Leukemia without Major O.R. Procedure
"RTN","ICDDRGX3",8,0)
 I $D(ICD10PD(91)) S ICDRG=$S(ICDMCC=2:840,ICDMCC=1:841,1:842),ICDFI=1 G EXIT ;Lymphoma and Non-Acute Leukemia
"RTN","ICDDRGX3",9,0)
 I $D(ICD10PD(181)) S ICDRG=849,ICDFI=1 G EXIT ;Radiotherapy
"RTN","ICDDRGX3",10,0)
 I $D(ICD10PD(134)),'$D(ICD10PD(35)) D  ;134=Myeloproliferative Disorders or Poorly Differentiated Neoplasms
"RTN","ICDDRGX3",11,0)
 . I $D(ICD10OR(81)) S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828),ICDFI=1 Q
"RTN","ICDDRGX3",12,0)
 . I $D(ICD10OR) S ICDRG=$S(ICDMCC>0:829,1:830),ICDFI=1 Q
"RTN","ICDDRGX3",13,0)
 I $D(ICD10OR(111)) S ICDRG=$S(ICDMCC=2:907,ICDMCC=1:908,1:909),ICDFI=1 G EXIT ;Other O.R. Procedures for Injuries
"RTN","ICDDRGX3",14,0)
 G:ICDFI EXIT
"RTN","ICDDRGX3",15,0)
 I ICDMDC=17,$D(ICD10PD(35)) D  ;134=Myeloproliferative Disorders or Poorly Differentiated Neoplasms  35=Chemotherapy Implant
"RTN","ICDDRGX3",16,0)
 . I $D(ICD10SD(15)),ICDMCC=2 S ICDRG=837,ICDFI=1 Q  ;15=SDX Acute Leukemia  56=High Dose Chemo Agent
"RTN","ICDDRGX3",17,0)
 . I $D(ICD10SD(15)),'$D(ICD10OR(56)) S ICDRGT=$S(ICDMCC=2:837,ICDMCC=1:838,ICDMCC=0:839,1:0) I ICDRGT>0 S ICDRG=ICDRGT,ICDFI=1 Q
"RTN","ICDDRGX3",18,0)
 . I '$D(ICD10SD(15)),$D(ICD10OR(56)),ICDMCC=2 S ICDRG=837,ICDFI=1 Q
"RTN","ICDDRGX3",19,0)
 . I '$D(ICD10SD(15)),$D(ICD10OR(56)),ICDMCC'=2 S ICDRG=838,ICDFI=1 Q
"RTN","ICDDRGX3",20,0)
 G:ICDFI EXIT
"RTN","ICDDRGX3",21,0)
 I $D(ICD10PD(165)) S ICDRG=$S(ICDMCC=2:843,ICDMCC=1:844,1:845),ICDFI=1 G EXIT ;165=Other Myeloproliferative Disorders or Poorly Differentiated Neoplasm Diagnoses
"RTN","ICDDRGX3",22,0)
 I $D(ICD10PD(36)) S ICDRG=$S(ICDMCC=2:846,ICDMCC=1:847,1:848),ICDFI=1 G EXIT ;36=Chemotherapy without Acute Leukemia as Secondary Diagnosis
"RTN","ICDDRGX3",23,0)
 I ICDMDC=18,$D(ICD10OR("O")) D  ;82=infectious & Parasitic Diseases, Systemic or Unspecified Sites
"RTN","ICDDRGX3",24,0)
 . S ICDX=$$ICDXEXPT^ICDRGAPI(ICDDX(1),"^K68.11^N98.0^T80.22XA^T80.29XA^T81.4XXA^T88.0XXA^")
"RTN","ICDDRGX3",25,0)
 . I ICDX=0 S ICDRG=$S(ICDMCC=2:853,ICDMCC=1:854,1:855),ICDFI=1 Q
"RTN","ICDDRGX3",26,0)
 . I ICDX S ICDRG=$S(ICDMCC=2:856,ICDMCC=1:857,1:858),ICDFI=1 Q
"RTN","ICDDRGX3",27,0)
 I ICDMDC=18,'$D(ICD10OR("O")) D
"RTN","ICDDRGX3",28,0)
 . S ICDX=$$ICDXEXPT^ICDRGAPI(ICDDX(1),"^K68.11^T81.4XXA^")
"RTN","ICDDRGX3",29,0)
 . I ICDX S ICDRG=$S(ICDMCC=2:862,1:863),ICDFI=1 Q 
"RTN","ICDDRGX3",30,0)
 G:ICDFI EXIT
"RTN","ICDDRGX3",31,0)
 ;I $D(ICD10PD(175)),$D(ICD10OR("O")) S ICDRG=$S(ICDMCC=2:856,ICDMCC=1:857,1:858),ICDFI=1 G EXIT ;175=Postoperative or Post-Traumatic Infections with O.R. Procedure
"RTN","ICDDRGX3",32,0)
 I $D(ICD10PD(190))!($D(ICD10PD("W"))) D  ;190=Septicemia or Severe Sepsis  "W"=Severe Sepsis
"RTN","ICDDRGX3",33,0)
 . I $D(ICD10OR(86)) S ICDRG=870,ICDFI=1 Q
"RTN","ICDDRGX3",34,0)
 . S ICDRG=$S(ICDMCC=2:871,1:872),ICDFI=1 Q
"RTN","ICDDRGX3",35,0)
 G:ICDFI EXIT
"RTN","ICDDRGX3",36,0)
 I ICDMDC=19,$D(ICD10OR("O")) S ICDRG=876,ICDFI=1 G EXIT ;Mental Illness
"RTN","ICDDRGX3",37,0)
 I ICDMDC=20 D
"RTN","ICDDRGX3",38,0)
 . I ICDDMS=1 S ICDRG=894,ICDFI=1 Q  ;Left against medical advice (AMA)
"RTN","ICDDRGX3",39,0)
 . I $D(ICD10PD(116)),$D(ICD10OR(132)) S ICDRG=895,ICDFI=1 Q  ;116=MDC 20 Alcohol/Drug Use & Alcohol/Drug Induced Organic Mental Disorders  132=Rehabilitation Therapy
"RTN","ICDDRGX3",40,0)
 . I $D(ICD10PD(116)),'$D(ICD10OR(132)) S ICDRG=$S(ICDMCC=2:896,1:897),ICDFI=1 Q  ;132=Rehabilitation Therapy
"RTN","ICDDRGX3",41,0)
 G:ICDFI EXIT
"RTN","ICDDRGX3",42,0)
 I $D(ICD10OR(166)),$D(ICD10OR("O")) S ICDRG=$S(ICDMCC=2:901,ICDMCC=1:902,1:903),ICDFI=1 G EXIT ;Wound Debridements for Injuries
"RTN","ICDDRGX3",43,0)
 I ICDMDC=21,$D(ICD10OR(139)) S ICDRG=$S(ICDMCC>0:904,1:905),ICDFI=1 G EXIT ;139=Skin Grafts for Injuries
"RTN","ICDDRGX3",44,0)
 I ICDMDC=21,$D(ICD10OR(52)) S ICDRG=906,ICDFI=1 G EXIT
"RTN","ICDDRGX3",45,0)
 I $D(ICD10PD(42)) S ICDRG=$S(ICDMCC=2:919,ICDMCC=1:920,1:921),ICDFI=1 G EXIT ;42=Complications of Treatment
"RTN","ICDDRGX3",46,0)
 I $D(ICD10PD("*"))!($D(ICD10PD("b"))&($D(ICD10OR(86)))) S ICDRG=$S($D(ICD10OR("k")):927,1:933),ICDFI=1 G EXIT ;*=Extensive Burns or b=Full Thickness Burns with 86=MV 96+Hours k=Skin Graft
"RTN","ICDDRGX3",47,0)
 I $D(ICD10PD("b")) D  ;Full Thickness Burns
"RTN","ICDDRGX3",48,0)
 . I $D(ICD10OR("k"))!($D(ICD10SD("j"))) S ICDRG=$S(ICDMCC>0:928,1:929),ICDFI=1 Q  ;k=Skin Graft  j=Inhalation Injury
"RTN","ICDDRGX3",49,0)
 . S ICDRG=934,ICDFI=1 Q
"RTN","ICDDRGX3",50,0)
 G:ICDFI EXIT
"RTN","ICDDRGX3",51,0)
 I ICDMDC=22,$D(ICD10PD(141)) S ICDRG=935,ICDFI=1 G EXIT ;141=Non-extensive Burns
"RTN","ICDDRGX3",52,0)
 I ICDMDC=23,$D(ICD10OR("O")),$D(ICD10PD(119)) S ICDRG=$S(ICDMCC=2:939,ICDMCC=1:940,1:941),ICDFI=1 G EXIT ;O.R. Procedures with 119=Diagnosis of Other Contact with Health Services
"RTN","ICDDRGX3",53,0)
 I $D(ICD10OR(131)) S ICDRG=$S(ICDMCC>0:945,1:946),ICDFI=1 G EXIT
"RTN","ICDDRGX3",54,0)
EXIT ;
"RTN","ICDDRGX3",55,0)
 I $D(ICD10OR("y")) D
"RTN","ICDDRGX3",56,0)
 . I $D(ICD10OR),ICDREL=0 S ICDRG=$S(ICDMCC=2:984,ICDMCC=1:985,1:986),ICDFI=1 Q
"RTN","ICDDRGX3",57,0)
 I $D(ICD10OR("z")) D
"RTN","ICDDRGX3",58,0)
 . I $D(ICD10OR),ICDREL=0 S ICDRG=$S(ICDMCC=2:987,ICDMCC=1:988,1:989),ICDFI=1 Q
"RTN","ICDDRGX3",59,0)
 I ICDFI S ICDFOUND=1
"RTN","ICDDRGX3",60,0)
 Q
"RTN","ICDDRGXM")
0^64^B11815979^B10793046
"RTN","ICDDRGXM",1,0)
ICDDRGXM ;ALB/MRY/KUM - GROUPER PROCESS ;26 Mar 2013  12:33 PM
"RTN","ICDDRGXM",2,0)
 ;;18.0;DRG Grouper;**31,50,62,64**;Oct 20, 2000;Build 103
"RTN","ICDDRGXM",3,0)
CKHIV ;MDC25 grouping; MS-DRG
"RTN","ICDDRGXM",4,0)
 ;Q:ICDP25=""
"RTN","ICDDRGXM",5,0)
 I ICDPD'["h"&(ICDSD'["h") Q
"RTN","ICDDRGXM",6,0)
 S ICDRG=$S(ICDOR["x":970,ICDPD["i"&($D(ICDS25(1))):977,1:ICDRG)
"RTN","ICDDRGXM",7,0)
 S ICDGH=$S("969^976^977"[ICDRG:1,1:0),ICDORNI=$S(ICDOCNT>0:ICDORNI,1:0),ICDORNA=$F(ICDORNI,"O",$F(ICDORNI,"O"))
"RTN","ICDDRGXM",8,0)
 S:ICDORNI="" ICDORNI=ICDOR
"RTN","ICDDRGXM",9,0)
 S ICDRG=$S(ICDP25=1&(ICDORNA>0):970,1:ICDRG) I 'ICDGH&(ICDRG=970) D CKMS Q
"RTN","ICDDRGXM",10,0)
 S:(ICDOCNT>0) ICDRG=$S(ICDP25>1&(ICDORNA>0)&($D(ICDS25(1))):970,1:ICDRG) I 'ICDGH&(ICDRG=970) D CKMS Q
"RTN","ICDDRGXM",11,0)
 I ICDOPCT>0 D  I ICDRG=970 D CKMS Q
"RTN","ICDDRGXM",12,0)
 .;count the non-extensive "z" vs the "O"
"RTN","ICDDRGXM",13,0)
 .N K1,K2,I
"RTN","ICDDRGXM",14,0)
 .S (K1,K2)=0
"RTN","ICDDRGXM",15,0)
 .F I=1:1:$L(ICDORNI) S:$E(ICDORNI,I,I)="z" K1=K1+1 S:$E(ICDORNI,I,I)="O" K2=K2+1
"RTN","ICDDRGXM",16,0)
 .I ICDP25=1!(ICDP25>1&($D(ICDS25)>0)) D
"RTN","ICDDRGXM",17,0)
 ..I K1<K2&(K1<ICDOPCT) D
"RTN","ICDDRGXM",18,0)
 ...S ICDRG=970 Q
"RTN","ICDDRGXM",19,0)
 ..I ICDOPCT=1&(ICDORNI'["z") D
"RTN","ICDDRGXM",20,0)
 ...S ICDRG=970 Q
"RTN","ICDDRGXM",21,0)
 S ICDRG=$S(ICDP25=1&('$D(ICDS25))&('$$EXIST^ICDEX(ICDDX(1),30)):977,1:ICDRG) I 'ICDGH&(ICDRG=977) D CKMS Q
"RTN","ICDDRGXM",22,0)
 S ICDRG=$S(ICDP25=1&($D(ICDS25(2))):976,ICDP25=1&($D(ICDS25(3))):976,1:ICDRG) I 'ICDGH&((ICDRG=976)!(ICDRG=977)) D CKMS Q
"RTN","ICDDRGXM",23,0)
 S ICDRG=$S(ICDP25=2&($D(ICDS25(1))):976,ICDP25=3&($D(ICDS25(1))):977,1:ICDRG) I 'ICDGH&((ICDRG=976)!(ICDRG=977)) D CKMS Q
"RTN","ICDDRGXM",24,0)
 S ICDRG=$S((ICDP25&(ICDOCNT=0)&('$D(ICDS25))):977,1:ICDRG) I 'ICDGH&(ICDRG=977) D CKMS Q
"RTN","ICDDRGXM",25,0)
 I "969^970^974^975^976^977"[ICDRG S ICDRTC=0
"RTN","ICDDRGXM",26,0)
 K ICDGH,ICDP25,ICDS25,ICDORNA Q
"RTN","ICDDRGXM",27,0)
 ;
"RTN","ICDDRGXM",28,0)
CKMS ;determine severity
"RTN","ICDDRGXM",29,0)
 I ICDRG=970 S ICDRG=$S(ICDMCC=2:969,1:970) Q
"RTN","ICDDRGXM",30,0)
 I ICDRG=976 S ICDRG=$S(ICDMCC=2:974,ICDMCC=1:975,1:976) Q
"RTN","ICDDRGXM",31,0)
 ;MS-DRG 977 has no severity
"RTN","ICDDRGXM",32,0)
 Q
"RTN","ICDDRGXM",33,0)
 ;
"RTN","ICDDRGXM",34,0)
CKNMDC ;non MDC drg's ;MS-DRG
"RTN","ICDDRGXM",35,0)
 ;S:(ICDRG>5)&(ICDRG<14) ICDRG=999
"RTN","ICDDRGXM",36,0)
 ; ICD*18*1 - reorder drg 103 higher than all Pre-MDCs 480-83 & 495
"RTN","ICDDRGXM",37,0)
 I ICDRG=2 S ICDRTC=0 Q
"RTN","ICDDRGXM",38,0)
 S ICDCDSY=$S(ICDDATE'<$$IMPDATE^LEXU("10D"):30,1:1)
"RTN","ICDDRGXM",39,0)
 ;use FY logic to resolve DRG if no FY defined user current FY
"RTN","ICDDRGXM",40,0)
 N ICDDXFY S ICDDXFY=""
"RTN","ICDDRGXM",41,0)
 I ICDDATE>3040930.9 D  I ICDRG=3!(ICDRG=4) S ICDRTC=0 Q  ;Use DRG FY 05 logic
"RTN","ICDDRGXM",42,0)
 .I $D(ICDOP(" 39.65")) S ICDRG=3 Q
"RTN","ICDDRGXM",43,0)
 .I $D(ICDOP(" 31.1"))!($D(ICDOP(" 31.21")))!($D(ICDOP(" 31.29"))) I $TR($P($$ICDDX^ICDEX(ICDDX(1),ICDDATE,ICDCDSY,"I"),"^",3),";","")'["Y"!(($D(ICDOP(" 96.72")))) S ICDRG=4
"RTN","ICDDRGXM",44,0)
 .I $D(ICDOP(" 31.1"))!($D(ICDOP(" 31.21")))!($D(ICDOP(" 31.29"))) I $TR($P($$ICDDX^ICDEX(ICDDX(1),ICDDATE,ICDCDSY,"I"),"^",3),";","")'["Y"!(($D(ICDOP(" 96.72")))) I ICDOR["O"&(ICDOR'["z")&(ICDOR'["y") S ICDRG=3
"RTN","ICDDRGXM",45,0)
 ;S ICDRG=$S((ICDOR["l")&($D(ICDOP(" 46.97"))):5,ICDOR["l":6,1:ICDRG) I ICDRG=5!(ICDRG=6) S ICDRTC=0 Q
"RTN","ICDDRGXM",46,0)
 S ICDRG=$S(ICDOR["l":6,1:ICDRG) I ICDRG=6 S ICDRTC=0 Q
"RTN","ICDDRGXM",47,0)
 I ICDRG=8!(ICDRG=10) S ICDRTC=0 Q
"RTN","ICDDRGXM",48,0)
 S ICDRG=$S(ICDOR["r":7,1:ICDRG) I ICDRG=7 S ICDRTC=0 Q  ;check for lung tx
"RTN","ICDDRGXM",49,0)
 S ICDRG=$S(ICDOR["q":2,1:ICDRG) I ICDRG=2 S ICDRTC=0 Q  ;check for heart tx
"RTN","ICDDRGXM",50,0)
 S ICDRG=$S((ICDOR["B")&(ICDDATE<3101001):9,(ICDOR["B")&(ICDDATE>3100930.9):14,1:ICDRG) S ICDRTC=0,ICDMDC=""
"RTN","ICDDRGXM",51,0)
 S ICDRG=$S($D(ICDOP(" 30.3"))!$D(ICDOP(" 30.4")):13,1:ICDRG) I ICDRG=13 S ICDRTC=0 Q
"RTN","ICDDRGXM",52,0)
 S ICDRG=$S(ICDOR["t"&($TR($P($$ICDDX^ICDEX(ICDDX(1),ICDDATE,ICDCDSY,"I"),"^",3),";","")["Y"):13,1:ICDRG) I ICDRG=13 S ICDRTC=0 Q
"RTN","ICDDRGXM",53,0)
 Q
"RTN","ICDDSLK")
0^18^B118601308^n/a
"RTN","ICDDSLK",1,0)
ICDDSLK ;KUM/SJA/SS - ICD-10 DIAGNOSIS CODE LOOK UP;12-06-11
"RTN","ICDDSLK",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICDDSLK",3,0)
 ;
"RTN","ICDDSLK",4,0)
 ; ICDDATE is EFFECTIVE DATE that passed from Calling routine
"RTN","ICDDSLK",5,0)
EN ; ENTRY
"RTN","ICDDSLK",6,0)
 D INITVARS ;set standards variables, you might not need this if it was already done in your application  
"RTN","ICDDSLK",7,0)
 N ICDQUIT ; to manage demo loop
"RTN","ICDDSLK",8,0)
 N ICDRETV ;to store the selected code information
"RTN","ICDDSLK",9,0)
 N ICDPARAM ;  to set your application specific prompts and messages
"RTN","ICDDSLK",10,0)
 N ICDCSYS ;coding system "ICD9" or ICD10"
"RTN","ICDDSLK",11,0)
 N ICDOUT ;to return all available information about the selected code
"RTN","ICDDSLK",12,0)
 ;settings:
"RTN","ICDDSLK",13,0)
 D SETPARAM(.ICDPARAM) ;edit the SETPARAM subroutine below to set your application specific prompts
"RTN","ICDDSLK",14,0)
 ;starting demo loop
"RTN","ICDDSLK",15,0)
 S ICDQUIT=0 F  Q:ICDQUIT=1  D
"RTN","ICDDSLK",16,0)
 . S ICDRETV=0,ICDOUT=""
"RTN","ICDDSLK",17,0)
 . W @IOF ;reset the screen
"RTN","ICDDSLK",18,0)
 . ;prompt for the date of interest
"RTN","ICDDSLK",19,0)
 . I $G(ICDDATE)="" D EFFDATE^ICDDRGM G EXIT:$D(DUOUT),EXIT:$D(DTOUT)
"RTN","ICDDSLK",20,0)
 . I $G(ICDDATE)'="" S ICDDT=ICDDATE
"RTN","ICDDSLK",21,0)
 . ;prompt for "try again" with "No" as default if ^ or null entered for the date or if timed out
"RTN","ICDDSLK",22,0)
 . I ICDDT'>0 S:$$QUESTION(2,ICDPARAM("TRY ANOTHER"))'=1 ICDQUIT=1 Q
"RTN","ICDDSLK",23,0)
 . ;determine coding system based on the date of interest 
"RTN","ICDDSLK",24,0)
 . S ICDCSYS=$$ICDSYSDG(ICDDT)
"RTN","ICDDSLK",25,0)
 . ;set default response for your prompt
"RTN","ICDDSLK",26,0)
 . S ICDDFLT=""
"RTN","ICDDSLK",27,0)
 . ;If coding system is ICD9 change ICDDT and prompt for ICD-10 so that user can query ICD-10 codes before ICD-10 implementaiton date
"RTN","ICDDSLK",28,0)
 . I ICDCSYS=1 S ICDCSYS=30 S ICDDT=$$IMPDATE^LEXU("10D")
"RTN","ICDDSLK",29,0)
 . ;run either ICD9 or ICD10 prompt/search/select logic
"RTN","ICDDSLK",30,0)
 . ;ICD9 (1 is a pointer to the ICD-9-CM diagnosis system entry in the new file #80.4 )
"RTN","ICDDSLK",31,0)
 . I ICDCSYS=1 S ICDRETV=$$DIAG9(ICDDT,ICDDFLT,.ICDOUT,.ICDPARAM) I ICDRETV=-2 S:$$QUESTION(1,ICDPARAM("TRY ANOTHER"))'=1 ICDQUIT=1 Q
"RTN","ICDDSLK",32,0)
 . ;ICD10 (30 is a pointer to the ICD-10-CM diagnosis system entry in the new file #80.4 )
"RTN","ICDDSLK",33,0)
 . I ICDCSYS=30 S ICDRETV=$$DIAG10(ICDDT,ICDDFLT,.ICDPARAM)
"RTN","ICDDSLK",34,0)
 . ;display information about the code selected (for demo purposes)
"RTN","ICDDSLK",35,0)
 . I ICDRETV>0 W !,"SELECTED: " D CODEINFO(ICDRETV) S:$$QUESTION(1,ICDPARAM("TRY ANOTHER"))'=1 ICDQUIT=1 Q
"RTN","ICDDSLK",36,0)
 . ;no changes to the default value 
"RTN","ICDDSLK",37,0)
 . I ICDRETV=-5 S:$$QUESTION(1,ICDPARAM("NO CHANGES"))'=1 ICDQUIT=1 Q
"RTN","ICDDSLK",38,0)
 . ;if no data found
"RTN","ICDDSLK",39,0)
 . I ICDRETV="" W !!,ICDPARAM("NO DATA FOUND") S:$$QUESTION(1,ICDPARAM("TRY ANOTHER"))'=1 ICDQUIT=1 Q
"RTN","ICDDSLK",40,0)
 . ;in ICD10 if the user answered NO for the question "Do you wish to continue(Y/N)?"
"RTN","ICDDSLK",41,0)
 . I ICDRETV=-4 S:$$QUESTION(1,ICDPARAM("TRY ANOTHER"))'=1 ICDQUIT=1 Q
"RTN","ICDDSLK",42,0)
 . ;no data or was aborted 
"RTN","ICDDSLK",43,0)
 . I ICDRETV=-2 S:$$QUESTION(1,ICDPARAM("TRY ANOTHER"))'=1 ICDQUIT=1 Q
"RTN","ICDDSLK",44,0)
 . ;if exit due to ^ in the ICD Diagnosis code prompt 
"RTN","ICDDSLK",45,0)
 . I ICDRETV=-3 S:$$QUESTION(2,ICDPARAM("TRY ANOTHER"))'=1 ICDQUIT=1 Q
"RTN","ICDDSLK",46,0)
 . ;if no data found
"RTN","ICDDSLK",47,0)
 . I ICDRETV=-1 S:$$QUESTION(2,ICDPARAM("TRY ANOTHER"))'=1 ICDQUIT=1 Q
"RTN","ICDDSLK",48,0)
 . ; if continue search
"RTN","ICDDSLK",49,0)
 . I ICDRETV=-6 W !,ICDPARAM("DELETE IT"),! S:$$QUESTION(1,ICDPARAM("TRY ANOTHER"))'=1 ICDQUIT=1 Q
"RTN","ICDDSLK",50,0)
 Q
"RTN","ICDDSLK",51,0)
 ;//---------
"RTN","ICDDSLK",52,0)
 ;The entry point for ICD-10 diagnosis search functionality
"RTN","ICDDSLK",53,0)
 ;can be called from applications directly
"RTN","ICDDSLK",54,0)
 ;input parameters :
"RTN","ICDDSLK",55,0)
 ; ICDDT - date of interest, ICDDFLT - default values for hter search string (can be a code by default)
"RTN","ICDDSLK",56,0)
 ; ICDOUT - local array to return results (passed as a reference)
"RTN","ICDDSLK",57,0)
 ; ICDPARAM - parameters/string constants (see SETPARAM for details)
"RTN","ICDDSLK",58,0)
 ;returns ICD-10 code selected by the user:
"RTN","ICDDSLK",59,0)
 ;  IEN file #80;ICD code value^description
"RTN","ICDDSLK",60,0)
 ; results
"RTN","ICDDSLK",61,0)
 ; or -1 if invalid data(press enter), "" if not found, or -2 if time out, or -3 if ^ or ^^, or -4 in ICD10 if the usre answered NO for the question "Do you wish to continue(Y/N)?", or -5 if no changes to the default value
"RTN","ICDDSLK",62,0)
DIAG10(ICDDT,ICDDFLT,ICDPARAM) ;
"RTN","ICDDSLK",63,0)
 N ICDINP
"RTN","ICDDSLK",64,0)
 F  D  Q:ICDINP<0!($L($P(ICDINP,U,2))>1)
"RTN","ICDDSLK",65,0)
 . S ICDINP=$$SRCHSTR(ICDPARAM("SEARCH_PROMPT"),ICDPARAM("HELP ?"),ICDPARAM("HELP ??"),ICDDFLT)
"RTN","ICDDSLK",66,0)
 . I ICDINP'<0 I $L($P(ICDINP,U,2))'>1 W !,ICDPARAM("ENTER MORE") W:$L(ICDPARAM("ENTER MORE2"))>0 !,ICDPARAM("ENTER MORE2") ;user should enter at least 2 characters
"RTN","ICDDSLK",67,0)
 I ICDINP<0 Q ICDINP
"RTN","ICDDSLK",68,0)
 Q $$LEXICD10($P(ICDINP,U,2),ICDDT,.ICDPARAM)
"RTN","ICDDSLK",69,0)
 ;//---------
"RTN","ICDDSLK",70,0)
 ;The entry point for ICD-9 FileMan type (^DIC) diagnosis search functionality
"RTN","ICDDSLK",71,0)
 ;can be called from applications directly
"RTN","ICDDSLK",72,0)
 ;input parameters :
"RTN","ICDDSLK",73,0)
 ; ICDDT - date of interest, ICDDFLT - default values for hter search string (can be a code by default), ICDOUT - local array to return results(passed as a reference)
"RTN","ICDDSLK",74,0)
 ; ICDPARAM - parameters/string constants (see SETPARAM for details)
"RTN","ICDDSLK",75,0)
 ;returns ICD-9 code selected by the user:
"RTN","ICDDSLK",76,0)
 ;  IEN file #80;ICD code value^description, -2 no data or was aborted, -1 if timeout, -3 was aborted, -5 if no changes to the default value
"RTN","ICDDSLK",77,0)
DIAG9(ICDDT,ICDDFLT,ICDOUT,ICDPARAM) ;
"RTN","ICDDSLK",78,0)
 N ICDINP,ICDRETV
"RTN","ICDDSLK",79,0)
 S ICDINP=$$SRCHSTR(ICDPARAM("SEARCH_PROMPT"),"","",ICDDFLT)
"RTN","ICDDSLK",80,0)
 I ICDINP=-1 Q -1  ;enter
"RTN","ICDDSLK",81,0)
 I ICDINP=-3 Q -1  ;^ or ^^
"RTN","ICDDSLK",82,0)
 I ICDINP=-2 Q -2  ;timeout or not found
"RTN","ICDDSLK",83,0)
 I ICDINP=-1!(ICDINP=-3) Q -2
"RTN","ICDDSLK",84,0)
 I ICDINP<0 Q +ICDINP
"RTN","ICDDSLK",85,0)
 S ICDRETV=$$ICD9($P(ICDINP,U,2),ICDDT,.ICDOUT)
"RTN","ICDDSLK",86,0)
 I ICDRETV=-1 Q -2
"RTN","ICDDSLK",87,0)
 Q ICDRETV
"RTN","ICDDSLK",88,0)
 ;--------------
"RTN","ICDDSLK",89,0)
 ;The entry point for ICD-10 diagnosis search functionality
"RTN","ICDDSLK",90,0)
 ;can be called from applications directly
"RTN","ICDDSLK",91,0)
 ; Supported ICR 5681 ($$DIAGSRCH^LEX10CS)
"RTN","ICDDSLK",92,0)
 ;input parameters :
"RTN","ICDDSLK",93,0)
 ; ICDTXT - search string, ICDDATE - date of interest, ICDPAR - array with text messages and other string constants
"RTN","ICDDSLK",94,0)
 ;returns ICD-10 code selected by the user:
"RTN","ICDDSLK",95,0)
 ;  IEN file #80;ICD code value^description, "" if not found, -1 if exit : ^ or ^^, -2 if continue searching
"RTN","ICDDSLK",96,0)
LEXICD10(ICDTXT,ICDDATE,ICDPAR) ; ICD-10 Search
"RTN","ICDDSLK",97,0)
 N ICDLVTXT
"RTN","ICDDSLK",98,0)
 ;parameters check
"RTN","ICDDSLK",99,0)
 S ICDDATE=+$G(ICDDATE)
"RTN","ICDDSLK",100,0)
 I ICDDATE'?7N Q -1
"RTN","ICDDSLK",101,0)
 S ICDTXT=$G(ICDTXT)
"RTN","ICDDSLK",102,0)
 Q:'$L(ICDTXT) -1
"RTN","ICDDSLK",103,0)
 N ICDNUMB
"RTN","ICDDSLK",104,0)
 S ICDNUMB=$$FREQ^LEXU(ICDTXT)
"RTN","ICDDSLK",105,0)
 I ICDNUMB>$$MAX^LEXU(30) D  I $$QUESTION("N",ICDPARAM("WISH CONTINUE"))'=1 Q -4
"RTN","ICDDSLK",106,0)
 . W !
"RTN","ICDDSLK",107,0)
 . D FORMWRIT(ICDPAR("EXCEEDS MESSAGE1")_ICDTXT_ICDPAR("EXCEEDS MESSAGE2")_ICDNUMB_ICDPAR("EXCEEDS MESSAGE3")_ICDTXT_""".",0)
"RTN","ICDDSLK",108,0)
 . D FORMWRIT("",2)
"RTN","ICDDSLK",109,0)
 . W !
"RTN","ICDDSLK",110,0)
 ;new and set variables
"RTN","ICDDSLK",111,0)
 N DIROUT,DUOUT,DTOUT,ICDEXIT,ICDICDNT
"RTN","ICDDSLK",112,0)
 N ICDRETV,ICDXX,ICDLEVEL
"RTN","ICDDSLK",113,0)
 S ICDRETV=""
"RTN","ICDDSLK",114,0)
 S ICDEXIT=0
"RTN","ICDDSLK",115,0)
 S ICDLEVEL=1,ICDLVTXT(ICDLEVEL)=ICDTXT ;level 1 stores the original search string
"RTN","ICDDSLK",116,0)
 ; main loop
"RTN","ICDDSLK",117,0)
 F  Q:ICDEXIT>0  D
"RTN","ICDDSLK",118,0)
 .K ICDICDY
"RTN","ICDDSLK",119,0)
 .;W !,"Level #: ",ICDLEVEL,", search string: ",ICDLVTXT(ICDLEVEL)
"RTN","ICDDSLK",120,0)
 .;get the search string from the current level and call LEX API
"RTN","ICDDSLK",121,0)
 .S ICDICDY=$$DIAGSRCH^LEX10CS(ICDLVTXT(ICDLEVEL),.ICDICDY,ICDDATE,30)
"RTN","ICDDSLK",122,0)
 .S:$O(ICDICDY(" "),-1)>0 ICDICDY=+ICDICDY
"RTN","ICDDSLK",123,0)
 .; Nothing found
"RTN","ICDDSLK",124,0)
 .I +ICDICDY'>0 S ICDEXIT=1 S ICDXX=-1 Q
"RTN","ICDDSLK",125,0)
 .; display the list of items and ask the user to select the item from the list
"RTN","ICDDSLK",126,0)
 .S ICDXX=$$SEL^ICDSELDS(.ICDICDY,8)
"RTN","ICDDSLK",127,0)
 .; if ^ was entered 
"RTN","ICDDSLK",128,0)
 .;   if this is on the top level then quit 
"RTN","ICDDSLK",129,0)
 .I ICDXX=-2,ICDLEVEL'>1 S ICDRETV=-1 S ICDEXIT=1 Q
"RTN","ICDDSLK",130,0)
 .;   if lower level then go one level up
"RTN","ICDDSLK",131,0)
 .I ICDXX=-2,ICDLEVEL>1 S:ICDLEVEL>1 ICDLEVEL=ICDLEVEL-1 Q
"RTN","ICDDSLK",132,0)
 .; If timeout, or not selected, or ^^ then quit
"RTN","ICDDSLK",133,0)
 .I ICDXX=-1 S ICDRETV=-1 S ICDEXIT=1 Q
"RTN","ICDDSLK",134,0)
 .; if Code Found and Selected by the user save selection in ICDRETV and quit
"RTN","ICDDSLK",135,0)
 .I $P(ICDXX,";")'="99:CAT" S ICDRETV=ICDXX S ICDEXIT=1 Q
"RTN","ICDDSLK",136,0)
 .; If Category Found and Selected by the user:  
"RTN","ICDDSLK",137,0)
 .;  go to the next inner level
"RTN","ICDDSLK",138,0)
 .;  change level number 
"RTN","ICDDSLK",139,0)
 .S ICDLEVEL=ICDLEVEL+1
"RTN","ICDDSLK",140,0)
 .;  set the new level with the new search string
"RTN","ICDDSLK",141,0)
 .;  and repeat 
"RTN","ICDDSLK",142,0)
 .S ICDLVTXT(ICDLEVEL)=$P($P($G(ICDXX),"^"),";",2)
"RTN","ICDDSLK",143,0)
 Q ICDRETV
"RTN","ICDDSLK",144,0)
 ;----------
"RTN","ICDDSLK",145,0)
 ;ICD-9 lookup (FileMan lookup)
"RTN","ICDDSLK",146,0)
 ;Supported ICR 5773 (FileMan lookup for files #80 nad #80.1)
"RTN","ICDDSLK",147,0)
 ;Supported ICR 5699 ($$ICDDATA^ICDXCODE)
"RTN","ICDDSLK",148,0)
 ;input parameters :
"RTN","ICDDSLK",149,0)
 ; ICDSRCH - search string 
"RTN","ICDDSLK",150,0)
 ; ICDICDT - date of interest  
"RTN","ICDDSLK",151,0)
 ; ICDOUT - local array to return detailed info (passed as a reference)
"RTN","ICDDSLK",152,0)
 ;returns ICD-9 code selected by the user:
"RTN","ICDDSLK",153,0)
 ;  IEN file #80;ICD code value^description
"RTN","ICDDSLK",154,0)
 ; or "" if not found, -1 if exit : ^ or ^^, -2 if continue search
"RTN","ICDDSLK",155,0)
 ;the array ICDOUT returns details if the return value >0, here is an example: 
"RTN","ICDDSLK",156,0)
 ; ICDOUT="6065^814.14", ICDOUT(0)=814.14, ICDOUT(0,0)=814.14, ICDOUT(0,1)="6065^814.14^^FX PISIFORM-OPEN^^8^^1^^1^^^0^^^^2781001^^1^1"
"RTN","ICDDSLK",157,0)
 ; ICDOUT(0,2)="OPEN FRACTURE OF PISIFORM BONE OF WRIST"
"RTN","ICDDSLK",158,0)
 ;Note: this API is not silent because the ICD lookup is not silent
"RTN","ICDDSLK",159,0)
ICD9(ICDSRCH,ICDICDT,ICDOUT) ;
"RTN","ICDDSLK",160,0)
 N ICDKEY,X,Y,DIC,ICDCDS
"RTN","ICDDSLK",161,0)
 ;KEY must be newed as ICD lookup code doesn't kill it
"RTN","ICDDSLK",162,0)
 S DIC="^ICD9(",DIC(0)="EQXZ"
"RTN","ICDDSLK",163,0)
 S ICDCDS="ICD9"
"RTN","ICDDSLK",164,0)
 ;note: you must use Y for the 2nd parameter of $$ICDDATA^ICDXCODE
"RTN","ICDDSLK",165,0)
 S DIC("S")="I $P($$ICDDATA^ICDXCODE(ICDCDS,Y,ICDICDT),U,10)=1"
"RTN","ICDDSLK",166,0)
 ; both X and Y should be set to the search string
"RTN","ICDDSLK",167,0)
 S (X,Y)=ICDSRCH
"RTN","ICDDSLK",168,0)
 D ^DIC
"RTN","ICDDSLK",169,0)
 M ICDOUT=Y
"RTN","ICDDSLK",170,0)
 I $G(Y) Q $S(Y=-1:-1,1:+Y_";"_$P(Y,U,2)_U_$G(Y(0,2)))
"RTN","ICDDSLK",171,0)
 Q X
"RTN","ICDDSLK",172,0)
 ;---------
"RTN","ICDDSLK",173,0)
 ; Look-up help
"RTN","ICDDSLK",174,0)
 ; Look-up help for ?
"RTN","ICDDSLK",175,0)
INPHLP ;
"RTN","ICDDSLK",176,0)
 I $G(X)["???" D INPHLP3 Q
"RTN","ICDDSLK",177,0)
 I $G(X)["??" D INPHLP2 Q
"RTN","ICDDSLK",178,0)
 W !," Enter code or ""text"" for more information." Q
"RTN","ICDDSLK",179,0)
 Q
"RTN","ICDDSLK",180,0)
 ;-----------
"RTN","ICDDSLK",181,0)
 ; Look-up help for ??
"RTN","ICDDSLK",182,0)
INPHLP2 ;
"RTN","ICDDSLK",183,0)
 W !," Enter a ""free text"" term or part of a term such as ""femur fracture"""
"RTN","ICDDSLK",184,0)
 W !!," or "
"RTN","ICDDSLK",185,0)
 W !!," Enter a ""classification code"" (ICD/CPT, etc.) to find the single term"
"RTN","ICDDSLK",186,0)
 W !," associated with the code"
"RTN","ICDDSLK",187,0)
 W !!," or "
"RTN","ICDDSLK",188,0)
 W !!," Enter a ""partial code"". Include the decimal when a search criterion"
"RTN","ICDDSLK",189,0)
 W !," includes 3 characters or more for code searches."
"RTN","ICDDSLK",190,0)
 Q
"RTN","ICDDSLK",191,0)
 ;--------
"RTN","ICDDSLK",192,0)
 ; Look-up help for ???
"RTN","ICDDSLK",193,0)
INPHLP3 ;
"RTN","ICDDSLK",194,0)
 W !," Number of Code Matches"
"RTN","ICDDSLK",195,0)
 W !," ----------------------"
"RTN","ICDDSLK",196,0)
 W !!," The ICD-10 Diagnosis Code search will show the user the number of matches"
"RTN","ICDDSLK",197,0)
 W !," found, indicate if additional characters in ICD code exist, and the number"
"RTN","ICDDSLK",198,0)
 W !," of codes within the category or subcategory that are available for selection."
"RTN","ICDDSLK",199,0)
 W !," For example:"
"RTN","ICDDSLK",200,0)
 W !!," 14 matches found"
"RTN","ICDDSLK",201,0)
 W !!," M91. - Juvenile osteochondrosis of hip and pelvis (19)"
"RTN","ICDDSLK",202,0)
 W !!," This indicates that 14 unique matches or matching groups have been found"
"RTN","ICDDSLK",203,0)
 W !," and will be displayed."
"RTN","ICDDSLK",204,0)
 W !!," M91. - the ""-"" indicates that there are additional characters that specify"
"RTN","ICDDSLK",205,0)
 W !," unique ICD-10 codes available."
"RTN","ICDDSLK",206,0)
 W !!," (19) Indicates that there are 19 additional ICD-10 codes in the M91 ""family"""
"RTN","ICDDSLK",207,0)
 W !," that are possible selections."
"RTN","ICDDSLK",208,0)
 Q
"RTN","ICDDSLK",209,0)
 ;--------
"RTN","ICDDSLK",210,0)
 ;prompt the user for a date of interest 
"RTN","ICDDSLK",211,0)
 ;input parameters :
"RTN","ICDDSLK",212,0)
 ; ICDPRMT - prompt
"RTN","ICDDSLK",213,0)
 ;returns YYYMMDD, or -1 if invalid date, or -2 if time out, or -3 if ^
"RTN","ICDDSLK",214,0)
ASKDATE(ICDPRMT) ;
"RTN","ICDDSLK",215,0)
 N %DT,DIROUT,DUOUT,DTOUT
"RTN","ICDDSLK",216,0)
 S %DT="AEX",%DT("A")=$G(ICDPRMT,"Enter a date: ")
"RTN","ICDDSLK",217,0)
 D ^%DT
"RTN","ICDDSLK",218,0)
 Q:Y<0 -1
"RTN","ICDDSLK",219,0)
 Q:$D(DTOUT) -2
"RTN","ICDDSLK",220,0)
 Q:X="^" -3
"RTN","ICDDSLK",221,0)
 Q (+Y)
"RTN","ICDDSLK",222,0)
 ;--------
"RTN","ICDDSLK",223,0)
 ;ask YES/NO questions
"RTN","ICDDSLK",224,0)
 ;input parameters :
"RTN","ICDDSLK",225,0)
 ; ICDDFLT- 0/null- not default, 1- yes, 2 -no
"RTN","ICDDSLK",226,0)
 ; ICDPROM - prompt string
"RTN","ICDDSLK",227,0)
 ;returns 2 - no, 1 -yes, 0 - no answer
"RTN","ICDDSLK",228,0)
QUESTION(ICDDFLT,ICDPROM) ;
"RTN","ICDDSLK",229,0)
 W:$L($G(ICDPROM)) !,ICDPROM
"RTN","ICDDSLK",230,0)
 S %=$G(ICDDFLT,2)
"RTN","ICDDSLK",231,0)
 D YN^DICN
"RTN","ICDDSLK",232,0)
 Q:%Y["^" -3
"RTN","ICDDSLK",233,0)
 I %=2!(%=1) Q %
"RTN","ICDDSLK",234,0)
 Q -2
"RTN","ICDDSLK",235,0)
 ;------------
"RTN","ICDDSLK",236,0)
 ;get search string
"RTN","ICDDSLK",237,0)
 ;input parameters :
"RTN","ICDDSLK",238,0)
 ; ICDPRMT prompt text
"RTN","ICDDSLK",239,0)
 ; ICDHLP1 "?" help text
"RTN","ICDDSLK",240,0)
 ; ICDHLP2 "??" help text
"RTN","ICDDSLK",241,0)
 ; ICDDFLT- default response
"RTN","ICDDSLK",242,0)
 ;returns piece1 ^ piece 2
"RTN","ICDDSLK",243,0)
 ; piece1:
"RTN","ICDDSLK",244,0)
 ; 0 if normal input, or -1 if invalid data, or -2 if time out, or -3 if ^
"RTN","ICDDSLK",245,0)
 ; piece2: string entered by the user
"RTN","ICDDSLK",246,0)
 ; or -5 if user accepts default value then no need to validate it, or -6 if user enters "@"
"RTN","ICDDSLK",247,0)
SRCHSTR(ICDPRMT,ICDHLP1,ICDHLP2,ICDDFLT) ;
"RTN","ICDDSLK",248,0)
 N DIR
"RTN","ICDDSLK",249,0)
 S DIR("A")=ICDPRMT
"RTN","ICDDSLK",250,0)
 S:($G(ICDHLP1)]"") DIR("?")=ICDHLP1
"RTN","ICDDSLK",251,0)
 S:($G(ICDHLP1)]"") DIR("??")=ICDHLP2
"RTN","ICDDSLK",252,0)
 I $L($G(ICDDFLT)) S DIR("B")=ICDDFLT
"RTN","ICDDSLK",253,0)
 S DIR(0)="FAO^0:245"
"RTN","ICDDSLK",254,0)
 D ^DIR
"RTN","ICDDSLK",255,0)
 Q:$D(DTOUT) -2
"RTN","ICDDSLK",256,0)
 Q:$D(DUOUT) -3
"RTN","ICDDSLK",257,0)
 Q:X="@" -6 ;quit if user entered "@" and handle deletion case in your application 
"RTN","ICDDSLK",258,0)
 Q:Y["^" -3
"RTN","ICDDSLK",259,0)
 Q:Y="" -1
"RTN","ICDDSLK",260,0)
 Q 0_U_Y
"RTN","ICDDSLK",261,0)
 ;----------
"RTN","ICDDSLK",262,0)
 ;Determines and returns ACTIVE coding system for DIAGNOSES based on date of interest 
"RTN","ICDDSLK",263,0)
 ;input parameters :
"RTN","ICDDSLK",264,0)
 ; ICDICDD - date of interest
"RTN","ICDDSLK",265,0)
 ; if date of interest is null, today's date will be assumed
"RTN","ICDDSLK",266,0)
 ;returns coding system  
"RTN","ICDDSLK",267,0)
 ; as a pointer to the ICD CODING SYSTEM file #80.4 (supported ICR 5780) 
"RTN","ICDDSLK",268,0)
 ; 30  if ICD-10-CM is active system, 1   if ICD-9-CM is active system
"RTN","ICDDSLK",269,0)
ICDSYSDG(ICDICDD) ; 
"RTN","ICDDSLK",270,0)
 N ICDIMPDT
"RTN","ICDDSLK",271,0)
 S ICDICDD=$S(ICDICDD<0!($L(+ICDICDD)'=7):DT,1:+$G(ICDICDD))
"RTN","ICDDSLK",272,0)
 S ICDIMPDT=$$IMPDATE^LEXU("10D")
"RTN","ICDDSLK",273,0)
 Q $S(ICDICDD'<ICDIMPDT:30,1:1)
"RTN","ICDDSLK",274,0)
 ;
"RTN","ICDDSLK",275,0)
 ;set parameters
"RTN","ICDDSLK",276,0)
 ;edit these hardcoded strings that are used for prompts, messages and so on to adjust them to your applicaion's needs
"RTN","ICDDSLK",277,0)
 ;input parameters 
"RTN","ICDDSLK",278,0)
 ; ICDPAR - local array to sets and store string constants for your messages and prompts 
"RTN","ICDDSLK",279,0)
SETPARAM(ICDPAR) ;
"RTN","ICDDSLK",280,0)
 S ICDPAR("ASKDATE")="Effective Date: "
"RTN","ICDDSLK",281,0)
 S ICDPAR("SEARCH_PROMPT")="ICD-10 Diagnosis Code or a Code Fragment: "
"RTN","ICDDSLK",282,0)
 S ICDPAR("HELP ?")="^D INPHLP^ICDDSLK"
"RTN","ICDDSLK",283,0)
 S ICDPAR("HELP ??")="^D INPHLP2^ICDDSLK"
"RTN","ICDDSLK",284,0)
 S ICDPAR("NO DATA FOUND")="  No data found"
"RTN","ICDDSLK",285,0)
 S ICDPAR("EXITING")="  Exiting"
"RTN","ICDDSLK",286,0)
 S ICDPAR("TRY LATER")="  Try again later"
"RTN","ICDDSLK",287,0)
 S ICDPAR("NO DATA SELECTED")="  No data selected"
"RTN","ICDDSLK",288,0)
 S ICDPAR("TRY ANOTHER")="Try another"
"RTN","ICDDSLK",289,0)
 S ICDPAR("WISH CONTINUE")="Do you wish to continue (Y/N)"
"RTN","ICDDSLK",290,0)
 S ICDPAR("EXCEEDS MESSAGE1")="Searching for """
"RTN","ICDDSLK",291,0)
 S ICDPAR("EXCEEDS MESSAGE2")=""" requires inspecting "
"RTN","ICDDSLK",292,0)
 S ICDPAR("EXCEEDS MESSAGE3")=" records to determine if they match the search criteria.  This could take quite some time.  Suggest refining the search by further specifying """
"RTN","ICDDSLK",293,0)
 S ICDPAR("NO CHANGES")=" No changes made"
"RTN","ICDDSLK",294,0)
 S ICDPAR("DELETE IT")=" User has requested deletion of the code"
"RTN","ICDDSLK",295,0)
 S ICDPAR("ENTER MORE")=" Please enter at least the first two characters of the ICD-10 code or code"
"RTN","ICDDSLK",296,0)
 S ICDPAR("ENTER MORE2")=" description to start the search."
"RTN","ICDDSLK",297,0)
 Q
"RTN","ICDDSLK",298,0)
 ;a wrapper for ^DIWP
"RTN","ICDDSLK",299,0)
 ;accumulates a text and then writes it to the device
"RTN","ICDDSLK",300,0)
 ;input parameters :
"RTN","ICDDSLK",301,0)
 ; X - text
"RTN","ICDDSLK",302,0)
 ; ICDMODE:
"RTN","ICDDSLK",303,0)
 ;  0 - start, 1 - accumulate, 2 - write
"RTN","ICDDSLK",304,0)
 ;example:
"RTN","ICDDSLK",305,0)
 ;D FORMWRIT^ICDDSLK("this API is a wrapper for ^DIWP, it accumulates a text and then writes it to the device, you can use it in your application code",0)
"RTN","ICDDSLK",306,0)
 ;D FORMWRIT^ICDDSLK("some more text ",1)
"RTN","ICDDSLK",307,0)
 ;D FORMWRIT^ICDDSLK("",2)
"RTN","ICDDSLK",308,0)
FORMWRIT(X,ICDMODE) ;
"RTN","ICDDSLK",309,0)
 N ICDLI1
"RTN","ICDDSLK",310,0)
 ;if "start" mode
"RTN","ICDDSLK",311,0)
 I ICDMODE=0 K ^UTILITY($J,"W")
"RTN","ICDDSLK",312,0)
 S DIWL=1,DIWR=79
"RTN","ICDDSLK",313,0)
 I $L(X)>0 D ^DIWP
"RTN","ICDDSLK",314,0)
 ;if "write" mode
"RTN","ICDDSLK",315,0)
 I ICDMODE=2 D
"RTN","ICDDSLK",316,0)
 . S ICDLI1=0 F  S ICDLI1=$O(^UTILITY($J,"W",1,ICDLI1)) Q:+ICDLI1=0  W !,$G(^UTILITY($J,"W",1,ICDLI1,0))
"RTN","ICDDSLK",317,0)
 . K ^UTILITY($J,"W")
"RTN","ICDDSLK",318,0)
 Q
"RTN","ICDDSLK",319,0)
 ;Initialize variables if you need , your application most likely already has this
"RTN","ICDDSLK",320,0)
INITVARS ;
"RTN","ICDDSLK",321,0)
 D HOME^%ZIS
"RTN","ICDDSLK",322,0)
 S:$G(DT)=0 DT=$$DT^XLFDT
"RTN","ICDDSLK",323,0)
 Q
"RTN","ICDDSLK",324,0)
 ;press any key (used for demo)
"RTN","ICDDSLK",325,0)
PRESSKEY ;
"RTN","ICDDSLK",326,0)
 R !!,"Press any key to continue.",ICDKEY:DTIME
"RTN","ICDDSLK",327,0)
 Q
"RTN","ICDDSLK",328,0)
 ;display code info (used for demo)
"RTN","ICDDSLK",329,0)
CODEINFO(ICDXX2) ; Write Output
"RTN","ICDDSLK",330,0)
 N ICDKEY,ICDTMP
"RTN","ICDDSLK",331,0)
 S ICDTMP=$$ICDDX^ICDEX($P($P(ICDXX2,";",2),U,1),$G(ICDDT),30,"E")
"RTN","ICDDSLK",332,0)
 S $P(ICDTMP,"^",3)=$TR($P(ICDTMP,"^",3),";","")
"RTN","ICDDSLK",333,0)
 W !!,$P($P(ICDXX2,";",2),U,1),?15,$P($P(ICDXX2,";",2),U,2),!  ;add printing of descript disclaimer msg
"RTN","ICDDSLK",334,0)
 I '$P(ICDTMP,U,10) W "   **CODE INACTIVE" I $P(ICDTMP,U,12)'="" S Y=$P(ICDTMP,U,12) D DD^%DT W " AS OF   ",Y," **",!
"RTN","ICDDSLK",335,0)
 Q
"RTN","ICDDSLK",336,0)
 ; Clean up environment and quit
"RTN","ICDDSLK",337,0)
EXIT ;
"RTN","ICDDSLK",338,0)
 K %,DIC,DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,Y
"RTN","ICDDSLK",339,0)
 Q
"RTN","ICDDSLK",340,0)
 ;
"RTN","ICDGTDRG")
0^20^B3882310^B3954114
"RTN","ICDGTDRG",1,0)
ICDGTDRG ;ALB/ADL - COLLECTION OF DRG APIS ;07/19/2012
"RTN","ICDGTDRG",2,0)
 ;;18.0;DRG Grouper;**7,12,14,17,57,64**;Oct 20, 2000;Build 103
"RTN","ICDGTDRG",3,0)
 ;   Collection of API's for accessing new "DRG" level
"RTN","ICDGTDRG",4,0)
 ;   of files #80, #80.1, and #80.2.  These new levels
"RTN","ICDGTDRG",5,0)
 ;   were added for the Code Set Versioning Project
"RTN","ICDGTDRG",6,0)
 ;               
"RTN","ICDGTDRG",7,0)
 ; Global Variables
"RTN","ICDGTDRG",8,0)
 ;    None
"RTN","ICDGTDRG",9,0)
 ;               
"RTN","ICDGTDRG",10,0)
 ; External References
"RTN","ICDGTDRG",11,0)
 ;    ^ICDDRG0            ICR  N/A
"RTN","ICDGTDRG",12,0)
 ;    $$CODEN^ICDEX       ICR  N/A
"RTN","ICDGTDRG",13,0)
 ;    $$DRG^ICDEX         ICR  N/A
"RTN","ICDGTDRG",14,0)
 ;    $$DRGD^ICDEX        ICR  N/A
"RTN","ICDGTDRG",15,0)
 ;    $$DRGDES^ICDEX      ICR  N/A
"RTN","ICDGTDRG",16,0)
 ;    $$DRGN^ICDEX        ICR  N/A
"RTN","ICDGTDRG",17,0)
 ;    $$GETDATE^ICDEX     ICR  N/A
"RTN","ICDGTDRG",18,0)
 ;    $$GETDRG^ICDEX      ICR  N/A
"RTN","ICDGTDRG",19,0)
 ;    $$ISVALID^ICDEX     ICR  N/A
"RTN","ICDGTDRG",20,0)
 ;               
"RTN","ICDGTDRG",21,0)
 ; Local Variables NEWed or KILLed Elsewhere
"RTN","ICDGTDRG",22,0)
 ;     EFFD,ICDMDC
"RTN","ICDGTDRG",23,0)
 ;     
"RTN","ICDGTDRG",24,0)
GETDRG(CODE,DGNDT,FILE) ; Get DRG or DRG string associated with a Code
"RTN","ICDGTDRG",25,0)
 ;
"RTN","ICDGTDRG",26,0)
 ;  Input:
"RTN","ICDGTDRG",27,0)
 ;     CODE  - IEN number
"RTN","ICDGTDRG",28,0)
 ;     DRGDT - Effective date of the Code
"RTN","ICDGTDRG",29,0)
 ;     FILE  - File to check : 9 - ICD9 (file #80)
"RTN","ICDGTDRG",30,0)
 ;                                   0 - ICD0 (file 80.1)
"RTN","ICDGTDRG",31,0)
 ;  Output:
"RTN","ICDGTDRG",32,0)
 ;     DRGS - DRG or string of DRG's (delimited
"RTN","ICDGTDRG",33,0)
 ;            by "^") or -1 if not defined
"RTN","ICDGTDRG",34,0)
 ;
"RTN","ICDGTDRG",35,0)
 ;            Effective date or error message; 
"RTN","ICDGTDRG",36,0)
 ;            status flag (1=Active;0=Inactive)
"RTN","ICDGTDRG",37,0)
 ;            Delimited by ";" because DRG's can be
"RTN","ICDGTDRG",38,0)
 ;            multiple and are already delimited by "^"
"RTN","ICDGTDRG",39,0)
 ;            
"RTN","ICDGTDRG",40,0)
 ;  NOTE:  For ICD Procedures, it uses the additional variable ICDMDC
"RTN","ICDGTDRG",41,0)
 ;
"RTN","ICDGTDRG",42,0)
 Q $$GETDRG^ICDEX($G(FILE),$G(CODE),$P($G(DGNDT),".",1),$G(ICDMDC))
"RTN","ICDGTDRG",43,0)
DRG(CODE,EDT)   ; Returns a string of information from the DRG file (#80.2)
"RTN","ICDGTDRG",44,0)
 ; Input:   CODE   DRG code, internal or external format (Required)
"RTN","ICDGTDRG",45,0)
 ;          CDT    Date to check status for, FileMan format (default = TODAY)
"RTN","ICDGTDRG",46,0)
 ;                   If CDT < 10/1/1978, use 10/1/1978
"RTN","ICDGTDRG",47,0)
 ;                   If CDT > DT, validate with In/Activation Dates
"RTN","ICDGTDRG",48,0)
 ;                   If CDT is year only, use first of the year
"RTN","ICDGTDRG",49,0)
 ;                   If CDT is year and month, use first of the month
"RTN","ICDGTDRG",50,0)
 ; 
"RTN","ICDGTDRG",51,0)
 ; Output:  Returns an 22 piece string delimited by the up-arrow (^), where the
"RTN","ICDGTDRG",52,0)
 ;          pieces are:
"RTN","ICDGTDRG",53,0)
 ;            1  DRG name (field #.01)
"RTN","ICDGTDRG",54,0)
 ;            2  Weight (field #2)
"RTN","ICDGTDRG",55,0)
 ;            3  Low Trim (days) (field #3)
"RTN","ICDGTDRG",56,0)
 ;            4  High Trim (days) (field #4)
"RTN","ICDGTDRG",57,0)
 ;            5  MDC (field #5)
"RTN","ICDGTDRG",58,0)
 ;            6  Surgery Flag (field #.06)
"RTN","ICDGTDRG",59,0)
 ;            7  <null>
"RTN","ICDGTDRG",60,0)
 ;            8  Avg Length of Stay (days) (field 10)
"RTN","ICDGTDRG",61,0)
 ;            9  Local Low Trim Days (field #11)
"RTN","ICDGTDRG",62,0)
 ;           10  Local High Trim Days (field #12)
"RTN","ICDGTDRG",63,0)
 ;           11  <null>
"RTN","ICDGTDRG",64,0)
 ;           12  Local Breakeven (field #13)
"RTN","ICDGTDRG",65,0)
 ;           13  Activation Date (.01 field of the 66 multiple)
"RTN","ICDGTDRG",66,0)
 ;           14  Status (.03 field of the 66 multiple)
"RTN","ICDGTDRG",67,0)
 ;           15  Inactivation Date (.01 field of the 66 multiple)
"RTN","ICDGTDRG",68,0)
 ;           16  Effective date (.01 field of the 66 multiple)
"RTN","ICDGTDRG",69,0)
 ;           17  Internal Entry Number (IEN)
"RTN","ICDGTDRG",70,0)
 ;           18  Effective date of CSV (.01 field of the 66 multiple)
"RTN","ICDGTDRG",71,0)
 ;           19  Reference (field #900)
"RTN","ICDGTDRG",72,0)
 ;           20  Weight (Non Affil) (field #7)
"RTN","ICDGTDRG",73,0)
 ;           21  Weight (Int Affil) (field #7.5)
"RTN","ICDGTDRG",74,0)
 ;           22  Message
"RTN","ICDGTDRG",75,0)
 ; 
"RTN","ICDGTDRG",76,0)
 ;            or 
"RTN","ICDGTDRG",77,0)
 ; 
"RTN","ICDGTDRG",78,0)
 ;           -1^Error Description
"RTN","ICDGTDRG",79,0)
 ; 
"RTN","ICDGTDRG",80,0)
 Q $$DRG^ICDEX($G(CODE),$G(EDT))
"RTN","ICDGTDRG",81,0)
CODEI(CODE)     ; Returns the IEN of an ICD code
"RTN","ICDGTDRG",82,0)
 Q +($$CODEN^ICDEX($G(CODE),80))
"RTN","ICDGTDRG",83,0)
GETDATE(PATNUM) ; Find the correct "EFFECTIVE DATE" for locating the DRG/ICD/CPT codes
"RTN","ICDGTDRG",84,0)
 ;
"RTN","ICDGTDRG",85,0)
 ;  Input:    PATNUM - PTF Record Number
"RTN","ICDGTDRG",86,0)
 ;  Output:   "effective date" to use
"RTN","ICDGTDRG",87,0)
 ;
"RTN","ICDGTDRG",88,0)
 Q $$GETDATE^ICDEX($G(PATNUM))
"RTN","ICDGTDRG",89,0)
ISVALID(CODE,EDATE,FILE) ; Is an ICD/CPT code Valid
"RTN","ICDGTDRG",90,0)
 ; This is a function call to be used in DIC("S") FileMan
"RTN","ICDGTDRG",91,0)
 ; calls to check the validation of a ICD/CPT code
"RTN","ICDGTDRG",92,0)
 ; Input:
"RTN","ICDGTDRG",93,0)
 ;    CODE   - ICD/CPT code (ien)
"RTN","ICDGTDRG",94,0)
 ;    EDATE  - Effective date to be used
"RTN","ICDGTDRG",95,0)
 ;    FILE   - File to use: 0 - ICD0; 9 - ICD9
"RTN","ICDGTDRG",96,0)
 ;
"RTN","ICDGTDRG",97,0)
 ; Output:
"RTN","ICDGTDRG",98,0)
 ;    OUT    - 1 if valid; 0 if not
"RTN","ICDGTDRG",99,0)
 ;
"RTN","ICDGTDRG",100,0)
 Q $$ISVALID^ICDEX($G(FILE),$G(CODE),$G(EDATE))
"RTN","ICDGTDRG",101,0)
DRGD(CODE,OUTARR,DFN,CDT) ; returns DRG description in array
"RTN","ICDGTDRG",102,0)
 ; Input:   CODE   ICD Code, Internal or External Format (required)
"RTN","ICDGTDRG",103,0)
 ;          ARY    Output Array Name for description 
"RTN","ICDGTDRG",104,0)
 ;                   e.g. "ABC" or "ABC("TEST")" 
"RTN","ICDGTDRG",105,0)
 ;                   Default = ^TMP("DRGD",$J)
"RTN","ICDGTDRG",106,0)
 ;          DFN    Not in use but included in anticipation of future need
"RTN","ICDGTDRG",107,0)
 ;          CDT    Date to screen against (default = TODAY)
"RTN","ICDGTDRG",108,0)
 ;                   If CDT < 10/1/1978, use 10/1/1978
"RTN","ICDGTDRG",109,0)
 ;                   If CDT > DT, use DT
"RTN","ICDGTDRG",110,0)
 ;                   If CDT is year only, use first of the year
"RTN","ICDGTDRG",111,0)
 ;                   If CDT is year and month only, use first of the month
"RTN","ICDGTDRG",112,0)
 ; 
"RTN","ICDGTDRG",113,0)
 ; Output:  #      Number of lines in description output array
"RTN","ICDGTDRG",114,0)
 ;          @ARY(1:n) - Versioned Description (lines 1-n) (from the 68 multiple)
"RTN","ICDGTDRG",115,0)
 ;          @ARY(n+1) - Blank
"RTN","ICDGTDRG",116,0)
 ;          @ARY(n+1) - A message stating: CODE TEXT MAY BE INACCURATE
"RTN","ICDGTDRG",117,0)
 ; 
"RTN","ICDGTDRG",118,0)
 ;           or
"RTN","ICDGTDRG",119,0)
 ; 
"RTN","ICDGTDRG",120,0)
 ;          -1^Error Description
"RTN","ICDGTDRG",121,0)
 ; 
"RTN","ICDGTDRG",122,0)
 ; ** NOTE - USER MUST INITIALIZE ^TMP("DRGD",$J), IF USED **
"RTN","ICDGTDRG",123,0)
 Q $$DRGD^ICDEX($G(CODE),$G(OUTARR),$G(CDT))
"RTN","ICDGTDRG",124,0)
VLTDR(IEN,VDATE,ARY) ; Versioned Description - Long Text
"RTN","ICDGTDRG",125,0)
 ; Input:
"RTN","ICDGTDRG",126,0)
 ;    IEN    - Internal Entry Number file 80.2
"RTN","ICDGTDRG",127,0)
 ;    VDATE  - Effective/Versioning date to be used
"RTN","ICDGTDRG",128,0)
 ;    .ARY   - Array for output, passed by reference
"RTN","ICDGTDRG",129,0)
 ;
"RTN","ICDGTDRG",130,0)
 ; Output:
"RTN","ICDGTDRG",131,0)
 ;    ARY()  - Local array containing versioned description
"RTN","ICDGTDRG",132,0)
 ;
"RTN","ICDGTDRG",133,0)
 Q $$DRGDES^ICDEX($G(IEN),$G(VDATE),.ARY)
"RTN","ICDGTDRG",134,0)
CODEN(CODE) ; Return the IEN of DRG
"RTN","ICDGTDRG",135,0)
 ;
"RTN","ICDGTDRG",136,0)
 ;   Input:  DRG code
"RTN","ICDGTDRG",137,0)
 ;  Output:  IEN of code
"RTN","ICDGTDRG",138,0)
 ;
"RTN","ICDGTDRG",139,0)
 Q $$DRGN^ICDEX($G(CODE))
"RTN","ICDREF")
0^23^B572987^B499599
"RTN","ICDREF",1,0)
ICDREF ;ALB/EG/KUM - GROUPER UTILITY FUNCTIONS ;5/20/05 8:35pm
"RTN","ICDREF",2,0)
 ;;18.0;DRG Grouper;**14,17,57,64**;Oct 20, 2000;Build 103
"RTN","ICDREF",3,0)
 ;
"RTN","ICDREF",4,0)
RTABLE(ICDRG,ICDDATE) ; Return Reference Table
"RTN","ICDREF",5,0)
 ;  Input:      ICDRG - DRG entry
"RTN","ICDREF",6,0)
 ;              ICDDATE - Date to use for resolving correct entry
"RTN","ICDREF",7,0)
 ;
"RTN","ICDREF",8,0)
 ;  Output:     Table reference associted with entry from DRG
"RTN","ICDREF",9,0)
 ;              file
"RTN","ICDREF",10,0)
 Q $$REF^ICDEX($G(ICDRG),$G(ICDDATE))
"RTN","ICDREF",11,0)
VMDC(IEN) ;Get versioned MDC for Diagnosis Code
"RTN","ICDREF",12,0)
 Q $$VMDCDX^ICDEX($G(IEN),$G(ICDDATE))
"RTN","ICDREF",13,0)
 ;
"RTN","ICDREF",14,0)
GETPVMDC ;Get versioned MDC for Op/Pro ICD code from previous years
"RTN","ICDREF",15,0)
 ; Needs CODE, ICDMDC and DRGFY
"RTN","ICDREF",16,0)
 S X=$$VMDCOP^ICDEX(+($G(CODE)),$G(ICDMDC),$G(DRGFY))
"RTN","ICDREF",17,0)
 S DRGFY=$P(X,"^",1),ICDMDC=$P(X,"^",2),DADRGFY=$P(X,"^",3),DAMDC=$P(X,"^",4)
"RTN","ICDREF",18,0)
 Q
"RTN","ICDRGAPI")
0^6^B53995245^n/a
"RTN","ICDRGAPI",1,0)
ICDRGAPI ;ALB/JAM - DRG GROUPER APIS ;05/29/12 2:39pm
"RTN","ICDRGAPI",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICDRGAPI",3,0)
 ;
"RTN","ICDRGAPI",4,0)
ICDID(FILE,ID,CODE) ; Returns value indicating if identifier exist.
"RTN","ICDRGAPI",5,0)
 ;
"RTN","ICDRGAPI",6,0)
 ; Input:
"RTN","ICDRGAPI",7,0)
 ;   FILE  File to look-up for identifier (required)
"RTN","ICDRGAPI",8,0)
 ;           80   = File #80
"RTN","ICDRGAPI",9,0)
 ;           80.1 = File #80.1
"RTN","ICDRGAPI",10,0)
 ;     ID  Diagnosis/Procedure code identifier (required)
"RTN","ICDRGAPI",11,0)
 ;   CODE  DX IEN or PX IEN (required)
"RTN","ICDRGAPI",12,0)
 ;
"RTN","ICDRGAPI",13,0)
 ; Output: Returns an 1, 0 or -1
"RTN","ICDRGAPI",14,0)
 ;    1  if identifier was found
"RTN","ICDRGAPI",15,0)
 ;    0  if identifier was not found
"RTN","ICDRGAPI",16,0)
 ;   -1  error^error message
"RTN","ICDRGAPI",17,0)
 ;
"RTN","ICDRGAPI",18,0)
 N ICDIDIEN,ICDGBL
"RTN","ICDRGAPI",19,0)
 I '+$G(FILE) Q "-1^Invalid File"
"RTN","ICDRGAPI",20,0)
 I $G(ID)="" Q "-1^Missing identifier"
"RTN","ICDRGAPI",21,0)
 I '+$G(CODE) Q "-1^Invalid IEN"
"RTN","ICDRGAPI",22,0)
 ;S GBL=$$ROOT^ICDEX(FILE)
"RTN","ICDRGAPI",23,0)
 ;I "^^ICD9(^^ICD0(^"'["^"_GBL_"^" Q "-1^Invalid Global"
"RTN","ICDRGAPI",24,0)
 S ICDGBL=$S(FILE=80:"^ICD9(",1:"^ICD0(")
"RTN","ICDRGAPI",25,0)
 S ICDIDIEN=$$IDIEN(FILE,ID) I '+ICDIDIEN Q "-1^Invalid identifier"
"RTN","ICDRGAPI",26,0)
 I $D(@(ICDGBL_CODE_",73,""B"","_ICDIDIEN_")")) Q 1
"RTN","ICDRGAPI",27,0)
 Q 0
"RTN","ICDRGAPI",28,0)
 ;
"RTN","ICDRGAPI",29,0)
IDIEN(FILE,ID) ;get IEN for identifier
"RTN","ICDRGAPI",30,0)
 I FILE=80 Q $O(^ICDID("B",ID,""))
"RTN","ICDRGAPI",31,0)
 E  Q $O(^ICDIP("B",ID,""))
"RTN","ICDRGAPI",32,0)
 Q
"RTN","ICDRGAPI",33,0)
 ;
"RTN","ICDRGAPI",34,0)
ICDIDS(FILE,CODE,ARY) ; Returns an array of identifiers.
"RTN","ICDRGAPI",35,0)
 ;
"RTN","ICDRGAPI",36,0)
 ; Input:
"RTN","ICDRGAPI",37,0)
 ;   FILE  File to look-up for identifier (required)
"RTN","ICDRGAPI",38,0)
 ;           80   = File #80
"RTN","ICDRGAPI",39,0)
 ;           80.1 = File #80.1
"RTN","ICDRGAPI",40,0)
 ;   CODE  DX IEN or PX IEN (required)
"RTN","ICDRGAPI",41,0)
 ;    ARY  Array Name passed by reference (required)
"RTN","ICDRGAPI",42,0)
 ;
"RTN","ICDRGAPI",43,0)
 ; Output: Return S an 1, 0 or -1
"RTN","ICDRGAPI",44,0)
 ;    1  if identifier was found
"RTN","ICDRGAPI",45,0)
 ;    0  if identifier was not found
"RTN","ICDRGAPI",46,0)
 ;   -1  error^error message
"RTN","ICDRGAPI",47,0)
 ;
"RTN","ICDRGAPI",48,0)
 N ICDGBL,ICDX,ICDC,ICDID,ICDGBLT,ICDGBLID
"RTN","ICDRGAPI",49,0)
 I '+$G(FILE) Q "-1^Invalid File"
"RTN","ICDRGAPI",50,0)
 I '+$G(CODE) Q "-1^Invalid IEN"
"RTN","ICDRGAPI",51,0)
 S ICDGBL=$P($$ROOT^ICDEX(FILE),"(",1)
"RTN","ICDRGAPI",52,0)
 I "^^ICD9^^ICD0^"'["^"_ICDGBL_"^" Q "-1^Invalid Global"
"RTN","ICDRGAPI",53,0)
 S ICDGBLT=$S(FILE=80:"^ICD9",1:"^ICD0"),ICDGBLID=$S(FILE=80:"^ICDID",1:"^ICDIP")
"RTN","ICDRGAPI",54,0)
 S ICDC=0,ICDX=0 F  S ICDX=$O(@ICDGBLT@(CODE,73,"B",ICDX)) Q:ICDX=""  S ARY($P(@ICDGBLID@(ICDX,0),U,1))=1,ICDC=ICDC+1
"RTN","ICDRGAPI",55,0)
 Q ICDC
"RTN","ICDRGAPI",56,0)
 ;
"RTN","ICDRGAPI",57,0)
CHGIEN(FILE,CODE) ;
"RTN","ICDRGAPI",58,0)
 N ICDC
"RTN","ICDRGAPI",59,0)
 I FILE=80 S ICDC=$G(^ICD9(CODE,0)) Q:ICDC="" ""  Q $O(^ICD9("B",ICDC,""))
"RTN","ICDRGAPI",60,0)
 I FILE=80.1 S ICDC=$G(^ICD0(CODE,0)) Q:ICDC="" ""  Q $O(^ICD0("B",ICDC,""))
"RTN","ICDRGAPI",61,0)
 Q ""
"RTN","ICDRGAPI",62,0)
 ;
"RTN","ICDRGAPI",63,0)
ICDIDF(ID,ARY) ; Returns value indicating if identifier(s) exist in an array.
"RTN","ICDRGAPI",64,0)
 ;
"RTN","ICDRGAPI",65,0)
 ; Input:
"RTN","ICDRGAPI",66,0)
 ;     ID  Diagnosis/Procedure code identifier(s) (required)
"RTN","ICDRGAPI",67,0)
 ;    ARY  Array Name passed by reference (required)
"RTN","ICDRGAPI",68,0)
 ;
"RTN","ICDRGAPI",69,0)
 ; Output: Returns an 1, 0 or -1
"RTN","ICDRGAPI",70,0)
 ;    1  if all identifier(s) were found in array
"RTN","ICDRGAPI",71,0)
 ;    0  if all identifiers were not found
"RTN","ICDRGAPI",72,0)
 ;   -1  error^error message
"RTN","ICDRGAPI",73,0)
 ;
"RTN","ICDRGAPI",74,0)
 N ICDI,ICDFND,ICDIDV
"RTN","ICDRGAPI",75,0)
 I $G(ID)="" Q "-1^Missing identifier"
"RTN","ICDRGAPI",76,0)
 I $O(ARY(""))="" Q "-1^Missing array elements"
"RTN","ICDRGAPI",77,0)
 S ICDFND=1
"RTN","ICDRGAPI",78,0)
 F ICDI=1:1:$L(ID,"^") D  Q:'ICDFND
"RTN","ICDRGAPI",79,0)
 .S ICDIDV=$P(ID,"^",ICDI) Q:ICDIDV=""
"RTN","ICDRGAPI",80,0)
 .I '$D(ARY(ICDIDV)) S ICDFND=0
"RTN","ICDRGAPI",81,0)
 Q ICDFND
"RTN","ICDRGAPI",82,0)
 ;
"RTN","ICDRGAPI",83,0)
ICDIDC(FILE,ID,ARY,RESULTS) ; Returns value indicating if identifier(s) exist in a cluster.
"RTN","ICDRGAPI",84,0)
 ;
"RTN","ICDRGAPI",85,0)
 ; Input:
"RTN","ICDRGAPI",86,0)
 ; FILE File to look-up for identifier (required)
"RTN","ICDRGAPI",87,0)
 ; 82.11 = File #82.11
"RTN","ICDRGAPI",88,0)
 ; 82.12 = File #82.12
"RTN","ICDRGAPI",89,0)
 ; ID Diagnosis/Procedure code identifier(s) (required)
"RTN","ICDRGAPI",90,0)
 ; ARY Array Name passed by reference (required)
"RTN","ICDRGAPI",91,0)
 ;
"RTN","ICDRGAPI",92,0)
 ; Output:
"RTN","ICDRGAPI",93,0)
 ; RESULTS array subscripted by MDC and DRG (ex, RESULTS(MDC,DRG)=""
"RTN","ICDRGAPI",94,0)
 ; Returns an 1, 0 or -1
"RTN","ICDRGAPI",95,0)
 ; 1 if all identifier(s) were found in array
"RTN","ICDRGAPI",96,0)
 ; 0 if all identifiers were not found
"RTN","ICDRGAPI",97,0)
 ; -1 error^error message
"RTN","ICDRGAPI",98,0)
 ;
"RTN","ICDRGAPI",99,0)
 ;
"RTN","ICDRGAPI",100,0)
 N ICDGBL,ICDIEN,ICDX,ICDDA,ICDI1,ICDI2,ICDI3,ICDI4,ICDJ,ICDDRGDX,ICDCX,ICDFND,ICDARR,ICDMDC,ICDDRG,ICDDRGDX,ICDSUB
"RTN","ICDRGAPI",101,0)
 I '+$G(FILE) Q "-1^Invalid File"
"RTN","ICDRGAPI",102,0)
 I $G(ID)="" Q "-1^Missing identifier"
"RTN","ICDRGAPI",103,0)
 I $O(ARY(""))="" Q "-1^Missing array elements"
"RTN","ICDRGAPI",104,0)
 S ICDGBL=$P($$ROOT^DILFD(FILE),"(",1)
"RTN","ICDRGAPI",105,0)
 I "^^ICDIDP(^^ICDIDD(^"'["^"_ICDGBL_"^" Q "-1^Invalid Global"
"RTN","ICDRGAPI",106,0)
 ;create temp array ARR subscripted by IEN
"RTN","ICDRGAPI",107,0)
 S ICDX=0 F  S ICDX=$O(ARY(ICDX)) Q:'ICDX  S ICDCX=ARY(ICDX) I ICDCX'="" S ICDARR(ICDCX)=ICDX
"RTN","ICDRGAPI",108,0)
 S ICDFND=0
"RTN","ICDRGAPI",109,0)
 ;get ID from "B" x-ref
"RTN","ICDRGAPI",110,0)
 ;S IEN=$$GET1^DIQ($S(FILE=82.11:82.1,1:82),ID,.01,"I")
"RTN","ICDRGAPI",111,0)
 I FILE=82.11 S ICDIEN=$O(^ICDIP("B",ID,""))
"RTN","ICDRGAPI",112,0)
 I FILE=82.12 S ICDIEN=$O(^ICDID("B",ID,""))
"RTN","ICDRGAPI",113,0)
 ;S IEN=$$FIND1^DIC(82,"","BX",ID) Q "-1^Invalid identifier"
"RTN","ICDRGAPI",114,0)
 ;get all the entries for the ID
"RTN","ICDRGAPI",115,0)
 ;F S X=$O(@(GBL_CODE_",73,""B"",X)"))
"RTN","ICDRGAPI",116,0)
 ;S DA=0 F S DA=$O(@(GBL_"""B"","_IEN_","_DA_")")) Q:'DA D I FND Q
"RTN","ICDRGAPI",117,0)
 ;S DA=0 F S DA=$O(@(GBL_"""B"",IEN,DA)")) Q:'DA D I FND Q
"RTN","ICDRGAPI",118,0)
 S ICDDA=0 F  S ICDDA=$O(@ICDGBL@("B",ICDIEN,ICDDA)) Q:'ICDDA  D  I ICDFND Q
"RTN","ICDRGAPI",119,0)
 .I '$D(@ICDGBL@(ICDDA,0)) Q
"RTN","ICDRGAPI",120,0)
 .S ICDI1=0 F  S ICDI1=$O(@ICDGBL@(ICDDA,"BL",ICDI1)) Q:'ICDI1  D   I ICDFND Q
"RTN","ICDRGAPI",121,0)
 ..F ICDJ=1:1:5 S ICDI2=0,ICDSUB=$P("ONE/WITH1/WITH2/WITH3/WITH4/","/",ICDJ) F  S ICDI2=$O(@ICDGBL@(ICDDA,"BL",ICDI1,ICDSUB,ICDI2)) Q:'ICDI2  D
"RTN","ICDRGAPI",122,0)
 ...S ICDCX=$G(@ICDGBL@(ICDDA,"BL",ICDI1,ICDSUB,ICDI2,0))
"RTN","ICDRGAPI",123,0)
 ...S ICDDRGDX(ICDJ,ICDCX)=""
"RTN","ICDRGAPI",124,0)
 ..;check if DX/PX codes are in cluster
"RTN","ICDRGAPI",125,0)
 ..S ICDFND=$$BLKCHK()
"RTN","ICDRGAPI",126,0)
 ..Q:'ICDFND
"RTN","ICDRGAPI",127,0)
 ..;get MDC and DRG
"RTN","ICDRGAPI",128,0)
 ..S ICDI3=0 F  S ICDI3=$O(@ICDGBL@(ICDDA,"BL",ICDI1,"MDC",ICDI3)) Q:'ICDI3  D
"RTN","ICDRGAPI",129,0)
 ...S ICDMDC=$G(@ICDGBL@(ICDDA,"BL",ICDI1,"MDC",ICDI3,0))
"RTN","ICDRGAPI",130,0)
 ...S ICDI4=0 F  S ICDI4=$O(@ICDGBL@(ICDDA,"BL",ICDI1,"MDC",ICDI3,"DRG",ICDI4)) Q:'ICDI4  D
"RTN","ICDRGAPI",131,0)
 ....S ICDDRG=$G(@ICDGBL@(ICDDA,"BL",ICDI1,"MDC",ICDI3,"DRG",ICDI4,0))
"RTN","ICDRGAPI",132,0)
 ....S RESULTS(ICDMDC,ICDDRG)=""
"RTN","ICDRGAPI",133,0)
 Q ICDFND
"RTN","ICDRGAPI",134,0)
 ;
"RTN","ICDRGAPI",135,0)
BLKCHK() ;check if DX/PX code is in cluster
"RTN","ICDRGAPI",136,0)
 N ICDJ,ICDX1,ICDC,ICDFND
"RTN","ICDRGAPI",137,0)
 S (ICDFND,ICDC)=0
"RTN","ICDRGAPI",138,0)
 S ICDJ=0 F  S ICDJ=$O(ICDDRGDX(ICDJ)) Q:'ICDJ  D
"RTN","ICDRGAPI",139,0)
 .S ICDC=ICDC+1
"RTN","ICDRGAPI",140,0)
 .S ICDX1=0 F  S ICDX1=$O(ICDDRGDX(ICDJ,ICDX1)) Q:'ICDX1  I $D(ICDARR(ICDX1)) S ICDFND=ICDFND+1 Q
"RTN","ICDRGAPI",141,0)
 S ICDFND=$S('ICDC:0,ICDFND=ICDC:1,1:0)
"RTN","ICDRGAPI",142,0)
 Q ICDFND
"RTN","ICDRGAPI",143,0)
 ;
"RTN","ICDRGAPI",144,0)
ISOWNCC(IEN,CDT,FMT) ; If DX is Own CC, return the CC value else zero
"RTN","ICDRGAPI",145,0)
 ;
"RTN","ICDRGAPI",146,0)
 ; Input:
"RTN","ICDRGAPI",147,0)
 ;
"RTN","ICDRGAPI",148,0)
 ;   IEN   IEN in file 80 (required)
"RTN","ICDRGAPI",149,0)
 ;   CDT   Date to use to Extract CC (default TODAY)
"RTN","ICDRGAPI",150,0)
 ;   FMT   Output Format
"RTN","ICDRGAPI",151,0)
 ;           0 = CC only (default)
"RTN","ICDRGAPI",152,0)
 ;           1 = CC ^ Effective Date
"RTN","ICDRGAPI",153,0)
 ;
"RTN","ICDRGAPI",154,0)
 ; Output:
"RTN","ICDRGAPI",155,0)
 ;
"RTN","ICDRGAPI",156,0)
 ;   $$ISOWNCC  Complication/Comorbidity (FMT=0)
"RTN","ICDRGAPI",157,0)
 ;              Complication/Comorbidity^Effective Date (FMT=1)
"RTN","ICDRGAPI",158,0)
 ;
"RTN","ICDRGAPI",159,0)
 N ICDCCDAT,ICDCCIEN,ICDCCOUT,ICDCCX,ICDCCOWN
"RTN","ICDRGAPI",160,0)
 S FMT=+($G(FMT)) S:FMT'=1 FMT=0 S:CDT="" CDT=DT S ICDCCDAT=$O(^ICD9(IEN,69,"B",CDT+.0001),-1) Q:'$L(ICDCCDAT) 0
"RTN","ICDRGAPI",161,0)
 S ICDCCIEN=$O(^ICD9(IEN,69,"B",ICDCCDAT,""),-1)
"RTN","ICDRGAPI",162,0)
 S ICDCCX=^ICD9(IEN,69,ICDCCIEN,0),ICDCCOWN=$P(ICDCCX,U,3) I 'ICDCCOWN Q 0
"RTN","ICDRGAPI",163,0)
 S ICDCCOUT=$P(ICDCCX,U,2) S:FMT>0 ICDCCOUT=ICDCCOUT_"^"_$P(^ICD9(IEN,69,ICDCCIEN,0),U,1)
"RTN","ICDRGAPI",164,0)
 Q ICDCCOUT
"RTN","ICDRGAPI",165,0)
 ;
"RTN","ICDRGAPI",166,0)
ICDMRG(ARY1,ARY2) ; Merge ARY2 with ARY1 and increment the counter
"RTN","ICDRGAPI",167,0)
 ;
"RTN","ICDRGAPI",168,0)
 N ICD10I,ICD10CNT
"RTN","ICDRGAPI",169,0)
 S ICD10I=""
"RTN","ICDRGAPI",170,0)
 F ICD10CNT=0:0 S ICD10I=$O(ARY2(ICD10I)) Q:ICD10I=""  D
"RTN","ICDRGAPI",171,0)
 . I $D(ARY1(ICD10I)) S ARY1(ICD10I)=ARY1(ICD10I)+1
"RTN","ICDRGAPI",172,0)
 . E  S ARY1(ICD10I)=1
"RTN","ICDRGAPI",173,0)
 Q
"RTN","ICDRGAPI",174,0)
 ;
"RTN","ICDRGAPI",175,0)
CLUSTERS ; Load Cluster Identifier Codes into ICD10SD, ICD10OR
"RTN","ICDRGAPI",176,0)
 N ICDIEN,ICDID,ICDX,ICD10SDT,ICD10ORT,ICDTMP,ICD10PCT,ICDIDC
"RTN","ICDRGAPI",177,0)
 S ICDID=0 F  S ICDID=$O(^ICDIDD(ICDID)) Q:'ICDID  S ICDIEN=$G(^ICDIDD(ICDID,0)) I ICDIEN D
"RTN","ICDRGAPI",178,0)
 . S ICDIDC=$P(^ICDID(ICDIEN,0),U,1)
"RTN","ICDRGAPI",179,0)
 . S ICDX=$$ICDIDC^ICDRGAPI(82.12,ICDIDC,.ICDDX,.ICDTMP)
"RTN","ICDRGAPI",180,0)
 . I $P(ICDX,U,1)>0 D
"RTN","ICDRGAPI",181,0)
 . . S ICD10SD(ICDIDC)=$G(ICD10SD(ICDIDC))+1
"RTN","ICDRGAPI",182,0)
 . . D LDMDDRGD ; Load DRG and Check MDC for Diagnosis Clusters
"RTN","ICDRGAPI",183,0)
 I $D(ICDPRC) S ICDID=0 F  S ICDID=$O(^ICDIDP(ICDID)) Q:'ICDID  S ICDIEN=$G(^ICDIDP(ICDID,0)) I ICDIEN D
"RTN","ICDRGAPI",184,0)
 . S ICDIDC=$P(^ICDIP(ICDIEN,0),U,1)
"RTN","ICDRGAPI",185,0)
 . S ICDX=$$ICDIDC^ICDRGAPI(82.11,ICDIDC,.ICDPRC,.ICD10PCT)
"RTN","ICDRGAPI",186,0)
 . I $P(ICDX,U,1)>0 D
"RTN","ICDRGAPI",187,0)
 . . S ICD10OR(ICDIDC)=$G(ICD10OR(ICDIDC))+1
"RTN","ICDRGAPI",188,0)
 . . D LDMDDRGP ; Load DRG and Check MDC for Procedure Clusters
"RTN","ICDRGAPI",189,0)
 Q
"RTN","ICDRGAPI",190,0)
 ;
"RTN","ICDRGAPI",191,0)
LDMDDRGD ; Load DRG and Check MDC for Diagnosis Clusters
"RTN","ICDRGAPI",192,0)
 N ICDMDCT,ICDDRGT
"RTN","ICDRGAPI",193,0)
 S ICDMDCT="" F  S ICDMDCT=$O(ICDTMP(ICDMDCT)) Q:'ICDMDCT  D
"RTN","ICDRGAPI",194,0)
 . S ICDDRGT="" F  S ICDDRGT=$O(ICDTMP(ICDMDCT,ICDDRGT)) Q:'ICDDRGT  D
"RTN","ICDRGAPI",195,0)
 . . S ICDSDRG(ICDDRGT)=""
"RTN","ICDRGAPI",196,0)
 Q
"RTN","ICDRGAPI",197,0)
 ;
"RTN","ICDRGAPI",198,0)
LDMDDRGP ; Load DRG and Check MDC for Procedure Clusters 
"RTN","ICDRGAPI",199,0)
 N ICDMDCT,ICDDRGT
"RTN","ICDRGAPI",200,0)
 S ICDMDCT="" F  S ICDMDCT=$O(ICD10PCT(ICDMDCT)) Q:'ICDMDCT  D
"RTN","ICDRGAPI",201,0)
 . I (ICDMDC=ICDMDCT)!(($D(ICDMDC(12))!($D(ICDMDC(13)))>0)&$D(ICDMDC(ICDMDCT))) S ICDONR=ICDONR+1
"RTN","ICDRGAPI",202,0)
 . S ICDDRGT="" F  S ICDDRGT=$O(ICD10PCT(ICDMDCT,ICDDRGT)) Q:'ICDDRGT  D
"RTN","ICDRGAPI",203,0)
 . . S ICDODRG(ICDDRGT)=ICDDRGT
"RTN","ICDRGAPI",204,0)
 Q
"RTN","ICDRGAPI",205,0)
 ;
"RTN","ICDRGAPI",206,0)
ICDRGCC(DRG,CDT) ;Get CC/MCC flag from DRG (Temporary hard-code of ^ICD pending API)
"RTN","ICDRGAPI",207,0)
 N ICDCC,ICDIEN,ICDDA,ICDAIEN
"RTN","ICDRGAPI",208,0)
 S ICDCC=-1,ICDIEN=$O(^ICD("B","DRG"_DRG,"")) I ICDIEN D
"RTN","ICDRGAPI",209,0)
 . S ICDDA=$O(^ICD(ICDIEN,2,"B",(CDT_".1")),-1) I ICDDA D
"RTN","ICDRGAPI",210,0)
 . . S ICDAIEN=$O(^ICD(ICDIEN,2,"B",ICDDA,"")) I ICDAIEN D
"RTN","ICDRGAPI",211,0)
 . . . S ICDCC=$P(^ICD(ICDIEN,2,ICDAIEN,0),U,4)
"RTN","ICDRGAPI",212,0)
 Q ICDCC
"RTN","ICDRGAPI",213,0)
 ;
"RTN","ICDRGAPI",214,0)
ISACCEX(IEN1,IEN2) ; Is Code 2 an Excluded code of Code 1 so MCC/CC=0
"RTN","ICDRGAPI",215,0)
 ;
"RTN","ICDRGAPI",216,0)
 ; Input:
"RTN","ICDRGAPI",217,0)
 ;
"RTN","ICDRGAPI",218,0)
 ;   IEN1   This is the internal entry number (IEN) of a
"RTN","ICDRGAPI",219,0)
 ;          code in file 80 used as a Secondary diagnosis
"RTN","ICDRGAPI",220,0)
 ;          with IEN2 which is the Principal diagnosis
"RTN","ICDRGAPI",221,0)
 ;
"RTN","ICDRGAPI",222,0)
 ; Output:
"RTN","ICDRGAPI",223,0)
 ;
"RTN","ICDRGAPI",224,0)
 ;   $$ISACCEX  Boolean value
"RTN","ICDRGAPI",225,0)
 ;
"RTN","ICDRGAPI",226,0)
 ;          1   Yes - IEN2 is an excluded PDX of IEN1 for MCC/CC
"RTN","ICDRGAPI",227,0)
 ;          0   No  - IEN2 is NOT an excluded PDX of IEN1 for MCC/CC
"RTN","ICDRGAPI",228,0)
 ;
"RTN","ICDRGAPI",229,0)
 N ICD1,ICD2,ICDPDX,ICDXIEN
"RTN","ICDRGAPI",230,0)
 S ICD1=$G(IEN1),ICD2=$G(IEN2)
"RTN","ICDRGAPI",231,0)
 S ICDPDX=$$GET1^DIQ(80,ICD1,1.11,1) I ICDPDX="" Q 0
"RTN","ICDRGAPI",232,0)
 S ICDXIEN=$O(^ICDCCEX("B",ICDPDX,"")) I ICDXIEN="" Q 0
"RTN","ICDRGAPI",233,0)
 Q $S($D(^ICDCCEX(ICDXIEN,1,"B",ICD2)):1,1:0)
"RTN","ICDRGAPI",234,0)
 ;
"RTN","ICDRGAPI",235,0)
ICDXEXPT(DXIEN,LIST) ;
"RTN","ICDRGAPI",236,0)
 ; Checks if the DX code indicated by the DXIEN matches any code in LIST
"RTN","ICDRGAPI",237,0)
 ;
"RTN","ICDRGAPI",238,0)
 ; Input:
"RTN","ICDRGAPI",239,0)
 ;    DXIEN is IEN in file 80 Ex: ICDDX(1) in ICDDRG
"RTN","ICDRGAPI",240,0)
 ;         LIST  is a list of DX codes in this format ^code^code^code^
"RTN","ICDRGAPI",241,0)
 ;
"RTN","ICDRGAPI",242,0)
 ; Output:
"RTN","ICDRGAPI",243,0)
 ;    1     The DX Code indicated by DXIEN is present in LIST
"RTN","ICDRGAPI",244,0)
 ;    0     The DX Code indicated by DXIEN is NOT present in LIST
"RTN","ICDRGAPI",245,0)
 ;
"RTN","ICDRGAPI",246,0)
 N ICDCODE
"RTN","ICDRGAPI",247,0)
 S ICDCODE=U_$$GET1^DIQ(80,DXIEN,.01,"E")_U
"RTN","ICDRGAPI",248,0)
 Q $S(LIST[ICDCODE:1,1:0)
"RTN","ICDRGAPI",249,0)
 ;
"RTN","ICDSELDS")
0^74^B42651368^n/a
"RTN","ICDSELDS",1,0)
ICDSELDS ;ALB/SJA/SS/KUM - Select ICD DIAGNOSIS FROM LIXICON UTILITY LIST ;12/07/2011
"RTN","ICDSELDS",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICDSELDS",3,0)
 ;
"RTN","ICDSELDS",4,0)
 ;
"RTN","ICDSELDS",5,0)
 ;
"RTN","ICDSELDS",6,0)
 ; Input   
"RTN","ICDSELDS",7,0)
 ; 
"RTN","ICDSELDS",8,0)
 ;     X     Length of list to display (default 5)
"RTN","ICDSELDS",9,0)
 ;    .ICDSRL   Local array passed by reference
"RTN","ICDSELDS",10,0)
 ;               
"RTN","ICDSELDS",11,0)
 ;             ICDSRL()   Input Array from ICDSRCH^LEX10CS
"RTN","ICDSELDS",12,0)
 ;               
"RTN","ICDSELDS",13,0)
 ;             ICDSRL(0)=# found ^ Pruning Indicator
"RTN","ICDSELDS",14,0)
 ;             ICDSRL(1,0)=Code ^ Code IEN ^ date
"RTN","ICDSELDS",15,0)
 ;             ICDSRL(1,"IDL")=ICD-9/10 Description, Long
"RTN","ICDSELDS",16,0)
 ;             ICDSRL(1,"IDL",1)=ICD-9/10 IEN ^ date
"RTN","ICDSELDS",17,0)
 ;             ICDSRL(1,"IDS")=ICD-9/10 Description, Short
"RTN","ICDSELDS",18,0)
 ;             ICDSRL(1,"IDS",1)=ICD-9/10 IEN ^ date
"RTN","ICDSELDS",19,0)
 ;             ICDSRL(1,"LEX")=Lexicon Description
"RTN","ICDSELDS",20,0)
 ;             ICDSRL(1,"LEX",1)=Expression IEN ^ date
"RTN","ICDSELDS",21,0)
 ;             ICDSRL(1,"SYN",1)=Synonym #1
"RTN","ICDSELDS",22,0)
 ;             ICDSRL(1,"SYN",m)=Synonym #m
"RTN","ICDSELDS",23,0)
 ;             ...
"RTN","ICDSELDS",24,0)
 ;               
"RTN","ICDSELDS",25,0)
 ; Output
"RTN","ICDSELDS",26,0)
 ;               
"RTN","ICDSELDS",27,0)
 ;    $$SEL  Two Piece "^" delimited string same as
"RTN","ICDSELDS",28,0)
 ;           Fileman's Y output variable
"RTN","ICDSELDS",29,0)
 ;               
"RTN","ICDSELDS",30,0)
 ;             1  Lexicon IEN
"RTN","ICDSELDS",31,0)
 ;             2  Lexicon Term
"RTN","ICDSELDS",32,0)
 ;               
"RTN","ICDSELDS",33,0)
 ;    ICDSRL    Local array passed by reference
"RTN","ICDSELDS",34,0)
 ;               
"RTN","ICDSELDS",35,0)
 ;             ICDSRL(0)=Code ^ Code IEN ^ date
"RTN","ICDSELDS",36,0)
 ;             ICDSRL("IDL")=ICD-9/10 Description, Long
"RTN","ICDSELDS",37,0)
 ;             ICDSRL("IDL",1)=ICD-9/10 IEN ^ date
"RTN","ICDSELDS",38,0)
 ;             ICDSRL("IDS")=ICD-9/10 Description, Short
"RTN","ICDSELDS",39,0)
 ;             ICDSRL("IDS",1)=ICD-9/10 IEN ^ date
"RTN","ICDSELDS",40,0)
 ;             ICDSRL("LEX")=Lexicon Description
"RTN","ICDSELDS",41,0)
 ;             ICDSRL("LEX",1)=Expression IEN ^ date
"RTN","ICDSELDS",42,0)
 ;               
"RTN","ICDSELDS",43,0)
 ;    or ^ on error 
"RTN","ICDSELDS",44,0)
 ;    or -1 for non-selection
"RTN","ICDSELDS",45,0)
 ;    or -2 if "^" was entered
"RTN","ICDSELDS",46,0)
 ;               
"RTN","ICDSELDS",47,0)
SEL(ICDSRL,X) ; Select from List
"RTN","ICDSELDS",48,0)
 N ICDGOUP S ICDGOUP=0
"RTN","ICDSELDS",49,0)
 S X=+($G(X))
"RTN","ICDSELDS",50,0)
 S:X'>0 X=5
"RTN","ICDSELDS",51,0)
 S X=$$ASK(.ICDSRL,X)
"RTN","ICDSELDS",52,0)
 I ICDGOUP=1 Q -2
"RTN","ICDSELDS",53,0)
 Q X
"RTN","ICDSELDS",54,0)
 ;
"RTN","ICDSELDS",55,0)
ASK(ICDSRL,X) ; Ask for Selection
"RTN","ICDSELDS",56,0)
 N DTOUT,DUOUT,DIROUT
"RTN","ICDSELDS",57,0)
 N ICDLIT,ICDLL,ICDLTOT
"RTN","ICDSELDS",58,0)
 S ICDLL=+($G(X))
"RTN","ICDSELDS",59,0)
 S:ICDLL'>0 ICDLL=5
"RTN","ICDSELDS",60,0)
 S ICDLIT=0,ICDLTOT=$O(ICDSRL(" "),-1)
"RTN","ICDSELDS",61,0)
 Q:+ICDLTOT'>0 "^"
"RTN","ICDSELDS",62,0)
 K X
"RTN","ICDSELDS",63,0)
 S:+ICDLTOT=1 X=$$ONE(ICDLL,.ICDSRL)
"RTN","ICDSELDS",64,0)
 S:+ICDLTOT>1 X=$$MUL(.ICDSRL,ICDLL)
"RTN","ICDSELDS",65,0)
 S:'$D(DTOUT)&('$D(DUOUT))&('$D(DIROUT))&(+($G(X))'>0) X=-1
"RTN","ICDSELDS",66,0)
 Q X
"RTN","ICDSELDS",67,0)
ONE(X,ICDSRL) ; One Entry Found
"RTN","ICDSELDS",68,0)
 Q:+($G(ICDLIT))>0 "^^"
"RTN","ICDSELDS",69,0)
 N DIR,ICDLC,ICDLEX,ICDLFI,ICDLIT,ICDLSO,ICDLNC
"RTN","ICDSELDS",70,0)
 N ICDLSP,ICDLTX,ICDLC,Y,ICDCNT1
"RTN","ICDSELDS",71,0)
 S ICDLFI=$O(ICDSRL(0)) Q:+ICDLFI'>0 "^"  S ICDLSP=$J(" ",11)
"RTN","ICDSELDS",72,0)
 S ICDLSO=$P(ICDSRL(1,0),"^",1),ICDLNC=$P(ICDSRL(1,0),"^",3)
"RTN","ICDSELDS",73,0)
 S:+ICDLNC>0 ICDLNC=" ("_ICDLNC_")" S ICDLEX=$G(ICDSRL(1,"MENU"))
"RTN","ICDSELDS",74,0)
 S ICDLC=$S($D(ICDSRL(1,"CAT")):"-",1:"")
"RTN","ICDSELDS",75,0)
 S ICDLTX(1)=ICDLSO_ICDLC_$J(" ",(9-$L(ICDLSO)))_" "_ICDLEX_ICDLNC
"RTN","ICDSELDS",76,0)
 D PR(.ICDLTX,64) S DIR("A",1)=" One match found",DIR("A",2)=" "
"RTN","ICDSELDS",77,0)
 S DIR("A",3)=" "_$G(ICDLTX(1))
"RTN","ICDSELDS",78,0)
 S ICDLC=3
"RTN","ICDSELDS",79,0)
 F ICDCNT1=2:1 Q:$G(ICDLTX(ICDCNT1))=""  S ICDLC=ICDLC+1,DIR("A",ICDLC)=ICDLSP_$G(ICDLTX(ICDCNT1))
"RTN","ICDSELDS",80,0)
 S ICDLC=ICDLC+1,DIR("A",ICDLC)=" ",ICDLC=ICDLC+1
"RTN","ICDSELDS",81,0)
 S DIR("A")=" OK? (Yes/No) ",DIR("B")="Yes",DIR(0)="YAO" W !
"RTN","ICDSELDS",82,0)
 D ^DIR Q:'$D(DTOUT)&('$D(DUOUT))&('$D(DIROUT))&(+($G(Y))'>0) -1
"RTN","ICDSELDS",83,0)
 S:X["^^"!($D(DTOUT)) ICDLIT=1
"RTN","ICDSELDS",84,0)
 I X["^^"!(+($G(ICDLIT))>0) K ICDSRL Q "^^"
"RTN","ICDSELDS",85,0)
 S X=$S(+Y>0:$$X(1,.ICDSRL),1:-1)
"RTN","ICDSELDS",86,0)
 Q X
"RTN","ICDSELDS",87,0)
MUL(ICDSRL,Y) ; Multiple Entries Found
"RTN","ICDSELDS",88,0)
 Q:+($G(ICDLIT))>0 "^^"
"RTN","ICDSELDS",89,0)
 N ICDSRLE,ICDLL,ICDLMAX,ICDLSS,ICDLX,X
"RTN","ICDSELDS",90,0)
 S (ICDLMAX,ICDLSS,ICDLIT)=0,ICDLL=+($G(Y)),U="^" S:+($G(ICDLL))'>0 ICDLL=5
"RTN","ICDSELDS",91,0)
 S ICDLX=$O(ICDSRL(" "),-1),ICDLSS=0
"RTN","ICDSELDS",92,0)
 G:+ICDLX=0 MULQ W ! W:+ICDLX>1 !," ",ICDLX," matches found"
"RTN","ICDSELDS",93,0)
 F ICDSRLE=1:1:ICDLX Q:((ICDLSS>0)&(ICDLSS<(ICDSRLE+1)))  Q:ICDLIT  D  Q:ICDLIT
"RTN","ICDSELDS",94,0)
 . W:ICDSRLE#ICDLL=1 ! D MULW
"RTN","ICDSELDS",95,0)
 . S ICDLMAX=ICDSRLE W:ICDSRLE#ICDLL=0 !
"RTN","ICDSELDS",96,0)
 . S:ICDSRLE#ICDLL=0 ICDLSS=$$MULS(ICDLMAX,ICDSRLE,.ICDSRL) S:ICDLSS["^" ICDLIT=1
"RTN","ICDSELDS",97,0)
 I ICDSRLE#ICDLL'=0,+ICDLSS<=0 D
"RTN","ICDSELDS",98,0)
 . W ! S ICDLSS=$$MULS(ICDLMAX,ICDSRLE,.ICDSRL) S:ICDLSS["^" ICDLIT=1
"RTN","ICDSELDS",99,0)
 G MULQ
"RTN","ICDSELDS",100,0)
 Q X
"RTN","ICDSELDS",101,0)
MULW ; Write Multiple
"RTN","ICDSELDS",102,0)
 N ICDLEX,ICDLI1,ICDLSO,ICDLNC,ICDLT2,ICDLTX S ICDLSO=$P(ICDSRL(+ICDSRLE,0),"^",1)
"RTN","ICDSELDS",103,0)
 S ICDLNC=$P(ICDSRL(+ICDSRLE,0),"^",3) S:+ICDLNC>0 ICDLNC=" ("_ICDLNC_")"
"RTN","ICDSELDS",104,0)
 S ICDLEX=$G(ICDSRL(+ICDSRLE,"MENU")),ICDLTX(1)=ICDLSO
"RTN","ICDSELDS",105,0)
 S ICDLTX(1)=ICDLTX(1)_$S($D(ICDSRL(+ICDSRLE,"CAT")):"-",1:" ")_$J(" ",(9-$L(ICDLSO)))_" "_ICDLEX_ICDLNC
"RTN","ICDSELDS",106,0)
 D PR(.ICDLTX,60) W !,$J(ICDSRLE,5),".  ",$G(ICDLTX(1))
"RTN","ICDSELDS",107,0)
 F ICDLI1=2:1:5 S ICDLT2=$G(ICDLTX(ICDLI1)) W:$L(ICDLT2) !,$J(" ",19),ICDLT2
"RTN","ICDSELDS",108,0)
 Q
"RTN","ICDSELDS",109,0)
MULS(X,Y,ICDSRL) ; Select from Multiple Entries
"RTN","ICDSELDS",110,0)
 N DIR,DIRB,ICDLFI,ICDLHLP,ICDLLST,ICDLMAX,ICDLS1 ;@#$ not sure ICDLS1 is  neede here
"RTN","ICDSELDS",111,0)
 Q:+($G(ICDLIT))>0 "^^"  S ICDLMAX=+($G(X)),ICDLLST=+($G(Y))
"RTN","ICDSELDS",112,0)
 Q:ICDLMAX=0 -1 S ICDLFI=$O(ICDSRL(0)) Q:+ICDLFI'>0 -1
"RTN","ICDSELDS",113,0)
 I +($O(ICDSRL(+ICDLLST)))>0 D
"RTN","ICDSELDS",114,0)
 . S DIR("A")=" Press <RETURN> for more, ""^"" to exit, or Select 1-"
"RTN","ICDSELDS",115,0)
 . S DIR("A")=DIR("A")_ICDLMAX_": "
"RTN","ICDSELDS",116,0)
 I +($O(ICDSRL(+ICDLLST)))'>0 D
"RTN","ICDSELDS",117,0)
 . S DIR("A")=" Select 1-"_ICDLMAX_": "
"RTN","ICDSELDS",118,0)
 S ICDLHLP=" Answer must be from 1 to "
"RTN","ICDSELDS",119,0)
 S ICDLHLP=ICDLHLP_ICDLMAX_", or <Return> to continue"
"RTN","ICDSELDS",120,0)
 S DIR("PRE")="S:X[""?"" X=""??"""
"RTN","ICDSELDS",121,0)
 S (DIR("?"),DIR("??"))="^D MULSH^ZZLXDG2"
"RTN","ICDSELDS",122,0)
 S DIR(0)="NAO^1:"_ICDLMAX_":0" D ^DIR
"RTN","ICDSELDS",123,0)
 S:X="^" ICDGOUP=1
"RTN","ICDSELDS",124,0)
 Q:'$D(DTOUT)&('$D(DUOUT))&('$D(DIROUT))&(+($G(Y))'>0) -1
"RTN","ICDSELDS",125,0)
 S:X["^^"!($D(DTOUT)) ICDLIT=1,X="^^" I X["^^"!(+($G(ICDLIT))>0) Q "^^"
"RTN","ICDSELDS",126,0)
 K DIR Q:$D(DTOUT)!(X[U) "^^"
"RTN","ICDSELDS",127,0)
 Q $S(+Y>0:+Y,1:"-1")
"RTN","ICDSELDS",128,0)
MULSH ; Select from Multiple Entries Help
"RTN","ICDSELDS",129,0)
 I $L($G(ICDLHLP)) W !,$G(ICDLHLP) Q
"RTN","ICDSELDS",130,0)
 Q
"RTN","ICDSELDS",131,0)
MULQ ; Quit Multiple
"RTN","ICDSELDS",132,0)
 I +ICDLSS'>0,$G(ICDLSS)="^" Q "^"
"RTN","ICDSELDS",133,0)
 S X=-1 S:+($G(ICDLIT))'>0 X=$$X(+ICDLSS,.ICDSRL)
"RTN","ICDSELDS",134,0)
 Q X
"RTN","ICDSELDS",135,0)
X(X,ICDSRL) ; Set X and Output Array
"RTN","ICDSELDS",136,0)
 N ICDLEX,ICDSRFI,ICDLIEN,ICDLN1,ICDLNC,ICDLNN,ICDLRN,ICDLS1,ICDLSO
"RTN","ICDSELDS",137,0)
 S ICDLS1=+($G(X))
"RTN","ICDSELDS",138,0)
 S ICDSRFI=$O(ICDSRL(0)) ;@#$ not used?
"RTN","ICDSELDS",139,0)
 S ICDLSO=$P($G(ICDSRL(ICDLS1,0)),"^",1),ICDLEX=$G(ICDSRL(ICDLS1,"MENU"))
"RTN","ICDSELDS",140,0)
 S ICDLIEN=$S($D(ICDSRL(ICDLS1,"CAT")):"99:CAT;"_$P($G(ICDSRL(ICDLS1,0)),"^"),1:$P($G(ICDSRL(ICDLS1,"LEX",1)),"^")_";"_$P($G(ICDSRL(ICDLS1,0)),"^")) Q:'$L(ICDLSO) "^"
"RTN","ICDSELDS",141,0)
 Q:'$L(ICDLEX) "^"  Q:+ICDLIEN'>0 "^" S X=ICDLIEN_"^"_ICDLEX
"RTN","ICDSELDS",142,0)
 S ICDLNN="ICDSRL("_+ICDLS1_")",ICDLNC="ICDSRL("_+ICDLS1_","
"RTN","ICDSELDS",143,0)
 F  S ICDLNN=$Q(@ICDLNN) Q:'$L(ICDLNN)!(ICDLNN'[ICDLNC)  D
"RTN","ICDSELDS",144,0)
 . S ICDLRN="ICDLN1("_$P(ICDLNN,"(",2,299) S @ICDLRN=@ICDLNN
"RTN","ICDSELDS",145,0)
 K ICDSRL S ICDLNN="ICDLN1("_+ICDLS1_")",ICDLNC="ICDLN1("_+ICDLS1_","
"RTN","ICDSELDS",146,0)
 F  S ICDLNN=$Q(@ICDLNN) Q:'$L(ICDLNN)!(ICDLNN'[ICDLNC)  D
"RTN","ICDSELDS",147,0)
 . S ICDLRN="ICDSRL("_$P(ICDLNN,"(",2,299),@ICDLRN=@ICDLNN
"RTN","ICDSELDS",148,0)
 Q X
"RTN","ICDSELDS",149,0)
 ; 
"RTN","ICDSELDS",150,0)
 ; Miscellaneous
"RTN","ICDSELDS",151,0)
CL ; Clear
"RTN","ICDSELDS",152,0)
 K ICDLIT
"RTN","ICDSELDS",153,0)
 Q
"RTN","ICDSELDS",154,0)
PR(ICDSRL,X) ; Parse Array
"RTN","ICDSELDS",155,0)
 N DIW,DIWF,DIWI,DIWL,DIWR,DIWT,DIWTC,DIWX,ICDDN,I,Z,%,%D,ICDLC,ICDLI1,ICDLL
"RTN","ICDSELDS",156,0)
 K ^UTILITY($J,"W")
"RTN","ICDSELDS",157,0)
 Q:'$D(ICDSRL)
"RTN","ICDSELDS",158,0)
 S ICDLL=+($G(X))
"RTN","ICDSELDS",159,0)
 S:+ICDLL'>0 ICDLL=79
"RTN","ICDSELDS",160,0)
 S ICDLC=+($G(ICDSRL))
"RTN","ICDSELDS",161,0)
 S:+($G(ICDLC))'>0 ICDLC=$O(ICDSRL(" "),-1)
"RTN","ICDSELDS",162,0)
 Q:+ICDLC'>0
"RTN","ICDSELDS",163,0)
 S DIWL=1,DIWF="C"_+ICDLL
"RTN","ICDSELDS",164,0)
 S ICDLI1=0
"RTN","ICDSELDS",165,0)
 F  S ICDLI1=$O(ICDSRL(ICDLI1)) Q:+ICDLI1=0  S X=$G(ICDSRL(ICDLI1)) D ^DIWP
"RTN","ICDSELDS",166,0)
 K ICDSRL
"RTN","ICDSELDS",167,0)
 S (ICDLC,ICDLI1)=0
"RTN","ICDSELDS",168,0)
 F  S ICDLI1=$O(^UTILITY($J,"W",1,ICDLI1)) Q:+ICDLI1=0  D
"RTN","ICDSELDS",169,0)
 . S ICDSRL(ICDLI1)=$$TM($G(^UTILITY($J,"W",1,ICDLI1,0))," "),ICDLC=ICDLC+1
"RTN","ICDSELDS",170,0)
 S:$L(ICDLC) ICDSRL=ICDLC
"RTN","ICDSELDS",171,0)
 K ^UTILITY($J,"W")
"RTN","ICDSELDS",172,0)
 Q
"RTN","ICDSELDS",173,0)
TM(ICDX,ICDY) ; Trim Character Y - Default " "
"RTN","ICDSELDS",174,0)
 S ICDX=$G(ICDX) Q:ICDX="" ICDX S ICDY=$G(ICDY) S:'$L(ICDY) ICDY=" "
"RTN","ICDSELDS",175,0)
 F  Q:$E(ICDX,1)'=ICDY  S ICDX=$E(ICDX,2,$L(ICDX))
"RTN","ICDSELDS",176,0)
 F  Q:$E(ICDX,$L(ICDX))'=ICDY  S ICDX=$E(ICDX,1,($L(ICDX)-1))
"RTN","ICDSELDS",177,0)
 Q ICDX
"RTN","ICDSELPS")
0^75^B30531047^n/a
"RTN","ICDSELPS",1,0)
ICDSELPS ;ALB/KUM - Select ICD PROCEDURE FROM A LIXICON UTILITY LIST ;12/07/2011
"RTN","ICDSELPS",2,0)
 ;;18.0;DRG Grouper;**64**;Oct 20, 2000;Build 103
"RTN","ICDSELPS",3,0)
 ;
"RTN","ICDSELPS",4,0)
SEL(ICDSRL,X) ; Select from List
"RTN","ICDSELPS",5,0)
 ;
"RTN","ICDSELPS",6,0)
 ; Input   
"RTN","ICDSELPS",7,0)
 ; 
"RTN","ICDSELPS",8,0)
 ;     X     Length of list to display (default 5)
"RTN","ICDSELPS",9,0)
 ;    .ICDSRL   Local array passed by reference
"RTN","ICDSELPS",10,0)
 ;               
"RTN","ICDSELPS",11,0)
 ;             ICDSRL()   Input Array from ICDSRCH^LEX10CS
"RTN","ICDSELPS",12,0)
 ;               
"RTN","ICDSELPS",13,0)
 ;             ICDSRL(0)=# found ^ Pruning Indicator
"RTN","ICDSELPS",14,0)
 ;             ICDSRL(1,0)=Code ^ Code IEN ^ date
"RTN","ICDSELPS",15,0)
 ;             ICDSRL(1,"IDL")=ICD-9/10 Description, Long
"RTN","ICDSELPS",16,0)
 ;             ICDSRL(1,"IDL",1)=ICD-9/10 IEN ^ date
"RTN","ICDSELPS",17,0)
 ;             ICDSRL(1,"IDS")=ICD-9/10 Description, Short
"RTN","ICDSELPS",18,0)
 ;             ICDSRL(1,"IDS",1)=ICD-9/10 IEN ^ date
"RTN","ICDSELPS",19,0)
 ;             ICDSRL(1,"LEX")=Lexicon Description
"RTN","ICDSELPS",20,0)
 ;             ICDSRL(1,"LEX",1)=Expression IEN ^ date
"RTN","ICDSELPS",21,0)
 ;             ICDSRL(1,"SYN",1)=Synonym #1
"RTN","ICDSELPS",22,0)
 ;             ICDSRL(1,"SYN",m)=Synonym #m
"RTN","ICDSELPS",23,0)
 ;             ...
"RTN","ICDSELPS",24,0)
 ;               
"RTN","ICDSELPS",25,0)
 ; Output
"RTN","ICDSELPS",26,0)
 ;               
"RTN","ICDSELPS",27,0)
 ;    $$SEL  Two Piece "^" delimited string same as
"RTN","ICDSELPS",28,0)
 ;           Fileman's Y output variable
"RTN","ICDSELPS",29,0)
 ;               
"RTN","ICDSELPS",30,0)
 ;             1  Lexicon IEN
"RTN","ICDSELPS",31,0)
 ;             2  Lexicon Term
"RTN","ICDSELPS",32,0)
 ;               
"RTN","ICDSELPS",33,0)
 ;    ICDSRL    Local array passed by reference
"RTN","ICDSELPS",34,0)
 ;               
"RTN","ICDSELPS",35,0)
 ;             ICDSRL(0)=Code ^ Code IEN ^ date
"RTN","ICDSELPS",36,0)
 ;             ICDSRL("IDL")=ICD-9/10 Description, Long
"RTN","ICDSELPS",37,0)
 ;             ICDSRL("IDL",1)=ICD-9/10 IEN ^ date
"RTN","ICDSELPS",38,0)
 ;             ICDSRL("IDS")=ICD-9/10 Description, Short
"RTN","ICDSELPS",39,0)
 ;             ICDSRL("IDS",1)=ICD-9/10 IEN ^ date
"RTN","ICDSELPS",40,0)
 ;             ICDSRL("LEX")=Lexicon Description
"RTN","ICDSELPS",41,0)
 ;             ICDSRL("LEX",1)=Expression IEN ^ date
"RTN","ICDSELPS",42,0)
 ;               
"RTN","ICDSELPS",43,0)
 ;    or ^ on error 
"RTN","ICDSELPS",44,0)
 ;    or -1 for non-selection
"RTN","ICDSELPS",45,0)
 ;               
"RTN","ICDSELPS",46,0)
 S X=+($G(X)) S:X'>0 X=5 S X=$$ASK(.ICDSRL,X)
"RTN","ICDSELPS",47,0)
 Q X
"RTN","ICDSELPS",48,0)
ASK(ICDSRL,X) ;   Ask for Selection
"RTN","ICDSELPS",49,0)
 K X N ICDSRLIT,ICDSRLL,ICDSRTOT S ICDSRLL=+($G(X)) S:ICDSRLL'>0 ICDSRLL=5
"RTN","ICDSELPS",50,0)
 S ICDSRLIT=0,ICDSRTOT=$O(ICDSRL(" "),-1) Q:+ICDSRTOT'>0 "^"
"RTN","ICDSELPS",51,0)
 K X S:+ICDSRTOT=1 X=$$ONE(ICDSRLL,.ICDSRL) S:+ICDSRTOT>1 X=$$MUL(.ICDSRL,ICDSRLL)
"RTN","ICDSELPS",52,0)
 Q X
"RTN","ICDSELPS",53,0)
ONE(X,ICDSRL) ;     One Entry Found
"RTN","ICDSELPS",54,0)
 Q:+($G(ICDSRLIT))>0 "^^"  N DIR,DTOUT,ICDSRLC,ICDSRLEX,ICDSRLFI,ICDSRLIT,ICDSRLSO
"RTN","ICDSELPS",55,0)
 N ICDSRLSP,ICDSRLTX,Y
"RTN","ICDSELPS",56,0)
 S ICDSRLFI=$O(ICDSRL(0)) Q:+ICDSRLFI'>0 "^"  S ICDSRLSP=$J(" ",25)
"RTN","ICDSELPS",57,0)
 S ICDSRLSO=$P(ICDSRL(1,0),"^",1),ICDSRLEX=$G(ICDSRL(1,"LEX"))
"RTN","ICDSELPS",58,0)
 S ICDSRLTX(1)=ICDSRLSO_$J(" ",(9-$L(ICDSRLSO)))_" "_ICDSRLEX
"RTN","ICDSELPS",59,0)
 D PR(.ICDSRLTX,64) S DIR("A",1)=" One code found for character "_($L($G(ICDPRC))+1)_".",DIR("A",2)=" "
"RTN","ICDSELPS",60,0)
 S DIR("A",3)="     "_$G(ICDSRLTX(1)),ICDSRLC=3 I $L($G(ICDSRLTX(2))) D
"RTN","ICDSELPS",61,0)
 . S ICDSRLC=ICDSRLC+1,DIR("A",ICDSRLC)=ICDSRLSP_$G(ICDSRLTX(2))
"RTN","ICDSELPS",62,0)
 S ICDSRLC=ICDSRLC+1,DIR("A",ICDSRLC)=" ",ICDSRLC=ICDSRLC+1
"RTN","ICDSELPS",63,0)
 S DIR("A")="   OK?  (Yes/No)  ",DIR("B")="Yes",DIR(0)="YAO" W !
"RTN","ICDSELPS",64,0)
 D ^DIR S:X["^^"!($D(DTOUT)) ICDSRLIT=1
"RTN","ICDSELPS",65,0)
 I X["^^"!(+($G(ICDSRLIT))>0) K ICDSRL Q "^^"
"RTN","ICDSELPS",66,0)
 S X=$S(+Y>0:$$X(1,.ICDSRL),1:-1)
"RTN","ICDSELPS",67,0)
 Q X
"RTN","ICDSELPS",68,0)
MUL(ICDSRL,Y) ;     Multiple Entries Found
"RTN","ICDSELPS",69,0)
 Q:+($G(ICDSRLIT))>0 "^^"  N ICDSRLE,ICDSRLL,ICDSRMAX,ICDSRLSS,ICDSRLX,X
"RTN","ICDSELPS",70,0)
 S (ICDSRMAX,ICDSRLSS,ICDSRLIT)=0,ICDSRLL=+($G(Y)),U="^" S:+($G(ICDSRLL))'>0 ICDSRLL=5
"RTN","ICDSELPS",71,0)
 S ICDSRLX=$O(ICDSRL(" "),-1),ICDSRLSS=0
"RTN","ICDSELPS",72,0)
 G:+ICDSRLX=0 MULQ W ! W:+ICDSRLX>1 !," ",ICDSRLX," matches found for character ",$L($G(ICDPRC))+1,"."
"RTN","ICDSELPS",73,0)
 F ICDSRLE=1:1:ICDSRLX Q:((ICDSRLSS>0)&(ICDSRLSS<(ICDSRLE+1)))  Q:ICDSRLIT  D  Q:ICDSRLIT
"RTN","ICDSELPS",74,0)
 . W:ICDSRLE#ICDSRLL=1 ! D MULW
"RTN","ICDSELPS",75,0)
 . S ICDSRMAX=ICDSRLE W:ICDSRLE#ICDSRLL=0 !
"RTN","ICDSELPS",76,0)
 . S:ICDSRLE#ICDSRLL=0 ICDSRLSS=$$MULS(ICDSRMAX,ICDSRLE,.ICDSRL) S:ICDSRLSS["^" ICDSRLIT=1
"RTN","ICDSELPS",77,0)
 I ICDSRLE#ICDSRLL'=0,+ICDSRLSS<=0 D
"RTN","ICDSELPS",78,0)
 . W ! S ICDSRLSS=$$MULS(ICDSRMAX,ICDSRLE,.ICDSRL) S:ICDSRLSS["^" ICDSRLIT=1
"RTN","ICDSELPS",79,0)
 G MULQ
"RTN","ICDSELPS",80,0)
 Q X
"RTN","ICDSELPS",81,0)
MULW ;       Write Multiple
"RTN","ICDSELPS",82,0)
 N ICDSRLEX,ICDSRLI,ICDSRLSO,ICDSRLT,ICDSRLTX S ICDSRLSO=$P(ICDSRL(+ICDSRLE,0),"^",1)
"RTN","ICDSELPS",83,0)
 S ICDSRLEX=$G(ICDSRL(+ICDSRLE,"LEX")),ICDSRLTX(1)=ICDSRLSO
"RTN","ICDSELPS",84,0)
 S ICDSRLTX(1)=ICDSRLTX(1)_$J(" ",(9-$L(ICDSRLSO)))_" "_ICDSRLEX
"RTN","ICDSELPS",85,0)
 D PR(.ICDSRLTX,63) W !,$J(ICDSRLE,5),".  ",$G(ICDSRLTX(1))
"RTN","ICDSELPS",86,0)
 F ICDSRLI=2:1:5 S ICDSRLT=$G(ICDSRLTX(ICDSRLI)) W:$L(ICDSRLT) !,$J(" ",18),ICDSRLT
"RTN","ICDSELPS",87,0)
 Q
"RTN","ICDSELPS",88,0)
MULS(X,Y,ICDSRL) ;       Select from Multiple Entries
"RTN","ICDSELPS",89,0)
 N DIR,DIRB,DIROUT,DIRUT,DTOUT,DUOUT,ICDSRLFI,ICDSRHLP,ICDSRLAST,ICDSRMAX,ICDSRLS
"RTN","ICDSELPS",90,0)
 Q:+($G(ICDSRLIT))>0 "^^"  S ICDSRMAX=+($G(X)),ICDSRLAST=+($G(Y))
"RTN","ICDSELPS",91,0)
 Q:ICDSRMAX=0 -1  S ICDSRLFI=$O(ICDSRL(0)) Q:+ICDSRLFI'>0 -1
"RTN","ICDSELPS",92,0)
 I +($O(ICDSRL(+ICDSRLAST)))>0 D
"RTN","ICDSELPS",93,0)
 . S DIR("A")=" Press <RETURN> for more, '^' to quit selection, or Select 1-"
"RTN","ICDSELPS",94,0)
 . S DIR("A")=DIR("A")_ICDSRMAX_":  "
"RTN","ICDSELPS",95,0)
 I +($O(ICDSRL(+ICDSRLAST)))'>0 D
"RTN","ICDSELPS",96,0)
 . S DIR("A")=" Select 1-"_ICDSRMAX_":  "
"RTN","ICDSELPS",97,0)
 S ICDSRHLP="    Answer must be from 1 to "
"RTN","ICDSELPS",98,0)
 S ICDSRHLP=ICDSRHLP_ICDSRMAX_", or <Return> to continue"
"RTN","ICDSELPS",99,0)
 S DIR("PRE")="S:X[""?"" X=""??"""
"RTN","ICDSELPS",100,0)
 S (DIR("?"),DIR("??"))="^D MULSH^ICDSELPS"
"RTN","ICDSELPS",101,0)
 S DIR(0)="NAO^1:"_ICDSRMAX_":0" D ^DIR
"RTN","ICDSELPS",102,0)
 I X["^^"!($D(DTOUT)) S ICDSRLIT=1,X="^^" Q "^^"
"RTN","ICDSELPS",103,0)
 K DIR Q:$D(DTOUT)!(X[U) "^"
"RTN","ICDSELPS",104,0)
 Q $S(+Y>0:+Y,1:"-1")
"RTN","ICDSELPS",105,0)
MULSH ;       Select from Multiple Entries Help
"RTN","ICDSELPS",106,0)
 I $L($G(ICDSRHLP)) W !,$G(ICDSRHLP) Q
"RTN","ICDSELPS",107,0)
 Q
"RTN","ICDSELPS",108,0)
MULQ ;       Quit Multiple Entries Selection
"RTN","ICDSELPS",109,0)
 Q:+($G(ICDSRLSS))'>0 -1  S X=-1 S:+($G(ICDSRLIT))'>0 X=$$X(+ICDSRLSS,.ICDSRL)
"RTN","ICDSELPS",110,0)
 Q X
"RTN","ICDSELPS",111,0)
X(X,ICDSRL) ;   Set X and Outpot Array
"RTN","ICDSELPS",112,0)
 N ICDSRLEX,ICDLEXFI,ICDSRLIEN,ICDSRLN,ICDSRLNC,ICDSRLNN,ICDSRLRN,ICDSRLS,ICDSRLSO
"RTN","ICDSELPS",113,0)
 S ICDSRLS=+($G(X))
"RTN","ICDSELPS",114,0)
 S ICDSRLSO=$P($G(ICDSRL(ICDSRLS,0)),"^",1)
"RTN","ICDSELPS",115,0)
 S ICDSRLEX=$G(ICDSRL(ICDSRLS,"LEX"))
"RTN","ICDSELPS",116,0)
 Q:'$L(ICDSRLEX) "^" S X=ICDSRLSO_"^"_ICDSRLEX
"RTN","ICDSELPS",117,0)
 Q X
"RTN","ICDSELPS",118,0)
 ;        
"RTN","ICDSELPS",119,0)
 ; Miscellaneous
"RTN","ICDSELPS",120,0)
CL ;   Clear
"RTN","ICDSELPS",121,0)
 K ICDSRLIT
"RTN","ICDSELPS",122,0)
 Q
"RTN","ICDSELPS",123,0)
PR(ICDSRL,X) ;   Parse Array
"RTN","ICDSELPS",124,0)
 N DIW,DIWF,DIWI,DIWL,DIWR,DIWT,DIWTC,DIWX,ICDDN,ICDSRLC,ICDSRLI,ICDSRLL
"RTN","ICDSELPS",125,0)
 K ^UTILITY($J,"W") Q:'$D(ICDSRL)  S ICDSRLL=+($G(X)) S:+ICDSRLL'>0 ICDSRLL=79
"RTN","ICDSELPS",126,0)
 S ICDSRLC=+($G(ICDSRL)) S:+($G(ICDSRLC))'>0 ICDSRLC=$O(ICDSRL(" "),-1) Q:+ICDSRLC'>0
"RTN","ICDSELPS",127,0)
 S DIWL=1,DIWF="C"_+ICDSRLL S ICDSRLI=0
"RTN","ICDSELPS",128,0)
 F  S ICDSRLI=$O(ICDSRL(ICDSRLI)) Q:+ICDSRLI=0  S X=$G(ICDSRL(ICDSRLI)) D ^DIWP
"RTN","ICDSELPS",129,0)
 K ICDSRL S (ICDSRLC,ICDSRLI)=0
"RTN","ICDSELPS",130,0)
 F  S ICDSRLI=$O(^UTILITY($J,"W",1,ICDSRLI)) Q:+ICDSRLI=0  D
"RTN","ICDSELPS",131,0)
 . S ICDSRL(ICDSRLI)=$$TM($G(^UTILITY($J,"W",1,ICDSRLI,0))," "),ICDSRLC=ICDSRLC+1
"RTN","ICDSELPS",132,0)
 S:$L(ICDSRLC) ICDSRL=ICDSRLC K ^UTILITY($J,"W")
"RTN","ICDSELPS",133,0)
 Q
"RTN","ICDSELPS",134,0)
TM(X,Y) ;   Trim Character Y - Default " "
"RTN","ICDSELPS",135,0)
 S X=$G(X) Q:X="" X  S Y=$G(Y) S:'$L(Y) Y=" "
"RTN","ICDSELPS",136,0)
 F  Q:$E(X,1)'=Y  S X=$E(X,2,$L(X))
"RTN","ICDSELPS",137,0)
 F  Q:$E(X,$L(X))'=Y  S X=$E(X,1,($L(X)-1))
"RTN","ICDSELPS",138,0)
 Q X
"RTN","ICDTBL2C")
0^81^B51015005^B51314411
"RTN","ICDTBL2C",1,0)
ICDTBL2C ;ALB/MJB/KUM - GROUPER UTILITY FUNCTIONS;08/09/2010
"RTN","ICDTBL2C",2,0)
 ;;18.0;DRG Grouper;**50,49,54,55,61,62,64**;Oct 20, 2000;Build 103
"RTN","ICDTBL2C",3,0)
DRG200 ;
"RTN","ICDTBL2C",4,0)
DRG201 I ICDSD["c" S ICDRG=$S(ICDMCC=2:199,ICDMCC=1:200,1:201) Q
"RTN","ICDTBL2C",5,0)
 S ICDRG=$S(ICDMCC=2:199,ICDMCC=1:200,1:201) Q
"RTN","ICDTBL2C",6,0)
DRG202 ;
"RTN","ICDTBL2C",7,0)
DRG203 S ICDRG=$S(ICDMCC>0:202,1:203) Q
"RTN","ICDTBL2C",8,0)
DRG204 S ICDRG=204 Q
"RTN","ICDTBL2C",9,0)
DRG205 ;
"RTN","ICDTBL2C",10,0)
DRG206 S ICDRG=$S(ICDMCC=2:205,1:206) Q
"RTN","ICDTBL2C",11,0)
DRG207 S ICDRG=207 Q
"RTN","ICDTBL2C",12,0)
DRG208 I ICDOR["o" D DRG982^ICDTBL9C Q
"RTN","ICDTBL2C",13,0)
 S ICDRG=208 Q
"RTN","ICDTBL2C",14,0)
DRG215 S ICDRG=215 Q
"RTN","ICDTBL2C",15,0)
DRG216 ;valve procedures
"RTN","ICDTBL2C",16,0)
 N ICDE1,ICDE2
"RTN","ICDTBL2C",17,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&($D(ICDOP(" 37.96"))):1,1:0),ICDE2=$S($D(ICDOP(" 37.97"))&($D(ICDOP(" 37.98"))):1,1:0)
"RTN","ICDTBL2C",18,0)
 S:ICDOR["H" ICDRG=$S(ICDOR["N"&ICDE1:218,ICDOR["N"&ICDE2:218,ICDOR["O":218,1:ICDRG)
"RTN","ICDTBL2C",19,0)
 S:ICDOR'["H" ICDRG=$S(ICDOR["N"&ICDE1:221,ICDOR["N"&ICDE2:221,ICDOR["O":221,1:ICDRG)
"RTN","ICDTBL2C",20,0)
 I ICDOR["P"&(ICDE1+ICDE2=0) S ICDRG=$S(ICDOR["H":218,1:221)
"RTN","ICDTBL2C",21,0)
 S:ICDRG=218 ICDRG=$S(ICDMCC=2:216,ICDMCC=1:217,1:218)
"RTN","ICDTBL2C",22,0)
 S:ICDRG=221 ICDRG=$S(ICDMCC=2:219,ICDMCC=1:220,1:221)
"RTN","ICDTBL2C",23,0)
 Q
"RTN","ICDTBL2C",24,0)
DRG217 D DRG216 Q
"RTN","ICDTBL2C",25,0)
DRG218 D DRG216 Q
"RTN","ICDTBL2C",26,0)
DRG219 D DRG216 Q
"RTN","ICDTBL2C",27,0)
DRG220 D DRG216 Q
"RTN","ICDTBL2C",28,0)
DRG221 D DRG216 Q
"RTN","ICDTBL2C",29,0)
DRG222 N ICDE1,ICDE2,ICDE3,ICDE4
"RTN","ICDTBL2C",30,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&(($D(ICDOP(" 37.96")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTBL2C",31,0)
 S ICDE2=$S($D(ICDOP(" 37.97"))&(($D(ICDOP(" 37.98")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTBL2C",32,0)
 S ICDE3=$S($D(ICDOP(" 00.52"))&($D(ICDOP(" 00.54"))):1,1:0)
"RTN","ICDTBL2C",33,0)
 ;S ICDE4=$S($D(ICDOP(" 00.54"))&($D(ICDOP(" 37.95"))):1,1:0)
"RTN","ICDTBL2C",34,0)
 S ICDE4=$S($D(ICDOP(" 37.74"))&(($D(ICDOP(" 37.96")))!($D(ICDOP(" 37.98")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTBL2C",35,0)
 S ICDRG=999
"RTN","ICDTBL2C",36,0)
 I $D(ICDOP(" 37.94"))!$D(ICDOP(" 00.51")) I ICDE1+ICDE2+ICDE3+ICDE4=0 D
"RTN","ICDTBL2C",37,0)
 . S ICDRG=$S(ICDMCC=2:226,1:227)
"RTN","ICDTBL2C",38,0)
 I '$D(ICDOP(" 37.94"))&('$D(ICDOP(" 00.51"))) I ICDE1!ICDE2!ICDE3!ICDE4 D
"RTN","ICDTBL2C",39,0)
 . S ICDRG=$S(ICDMCC=2:226,1:227)
"RTN","ICDTBL2C",40,0)
 ; "HN" in ICDOR represents OR proc 37.21-.23, 37.26, 88.52-.58
"RTN","ICDTBL2C",41,0)
 I (ICDRG=226)!(ICDRG=227) I ICDOR["HN" I '$D(ICDOP(" 37.26")) S ICDRG=$S((ICDPD["A")&(ICDMCC=2):222,ICDPD["A":223,ICDMCC=2:224,1:225)
"RTN","ICDTBL2C",42,0)
 I ICDRG=470 D CMS115
"RTN","ICDTBL2C",43,0)
 Q
"RTN","ICDTBL2C",44,0)
DRG223 D DRG222 Q
"RTN","ICDTBL2C",45,0)
DRG224 ;
"RTN","ICDTBL2C",46,0)
DRG225 D DRG222 Q
"RTN","ICDTBL2C",47,0)
DRG226 ;
"RTN","ICDTBL2C",48,0)
DRG227 D DRG222 Q
"RTN","ICDTBL2C",49,0)
DRG228 ;
"RTN","ICDTBL2C",50,0)
DRG229 ;
"RTN","ICDTBL2C",51,0)
DRG230 ;DRGs 228-230 note ICDOR["Oo" = operation and DRG CMS108/MS230 procedure
"RTN","ICDTBL2C",52,0)
 I $D(ICDOP(" 35.33")) D DRG221 Q
"RTN","ICDTBL2C",53,0)
 I ICDOR["Oo"!($D(ICDOP(" 38.44"))&($D(ICDOP(" 38.45")))) D  Q
"RTN","ICDTBL2C",54,0)
 . S ICDRG=$S(ICDMCC=2:228,ICDMCC=1:229,1:230) Q
"RTN","ICDTBL2C",55,0)
 G DRG237
"RTN","ICDTBL2C",56,0)
DRG231 S ICDRG=999
"RTN","ICDTBL2C",57,0)
 I ICDOR["b" D DRG235
"RTN","ICDTBL2C",58,0)
 I ICDOR["b" I $D(ICDOP(" 35.96"))!($D(ICDOP(" 00.66"))) D  Q
"RTN","ICDTBL2C",59,0)
 . S ICDRG=$S(ICDMCC=2:231,1:232)
"RTN","ICDTBL2C",60,0)
 I ICDOR["b" I $D(ICDOP(" 37.21"))!($D(ICDOP(" 37.22")))!($D(ICDOP(" 37.23"))) D DRG233 Q
"RTN","ICDTBL2C",61,0)
 ;I ICDOR["b" I $D(ICDOP(" 37.21"))!($D(ICDOP(" 37.22")))!($D(ICDOP(" 37.23"))) D DRG233 Q
"RTN","ICDTBL2C",62,0)
 I ICDRG'=231&(ICDRG'=232)&(ICDRG'=233)&(ICDRG'=234)&(ICDRG'=235)&(ICDRG'=236) S ICDRG=999 D DRG237
"RTN","ICDTBL2C",63,0)
 Q
"RTN","ICDTBL2C",64,0)
DRG232 D DRG231 Q
"RTN","ICDTBL2C",65,0)
DRG233 ; called from DRG231
"RTN","ICDTBL2C",66,0)
 D MCV
"RTN","ICDTBL2C",67,0)
 S ICDRG=$S(ICDMCV:233,ICDMCV1:233,1:234)
"RTN","ICDTBL2C",68,0)
 S ICDRG=$S(ICDMCC=2:233,1:234)
"RTN","ICDTBL2C",69,0)
 Q
"RTN","ICDTBL2C",70,0)
DRG234 D DRG233 Q
"RTN","ICDTBL2C",71,0)
DRG235 ;
"RTN","ICDTBL2C",72,0)
DRG236 S ICDRG=$S(ICDMCC=2:235,1:236) Q
"RTN","ICDTBL2C",73,0)
DRG237 I ICDOR["Oo" D DRG228
"RTN","ICDTBL2C",74,0)
 S ICDRG=$S((ICDMCC=2)&(ICDOR[7):237,ICDOR[7:238,1:ICDRG)
"RTN","ICDTBL2C",75,0)
 I $D(ICDOP(" 39.73")) S ICDRG=237
"RTN","ICDTBL2C",76,0)
 I "228^229^230^237^238"[ICDRG Q
"RTN","ICDTBL2C",77,0)
 ;I $D(ICDJJ(478))&('$D(ICDJJ(110))&'($D(ICDJJ(111)))) D DRG478^ICDTBL6C
"RTN","ICDTBL2C",78,0)
 D DRG239 I "239^240^241"[ICDRG Q
"RTN","ICDTBL2C",79,0)
 I ICDOR["p" D DRG260
"RTN","ICDTBL2C",80,0)
 I ICDOR["1" D CMS516
"RTN","ICDTBL2C",81,0)
 Q
"RTN","ICDTBL2C",82,0)
DRG238 S ICDRG=$S(ICDMCC=2:237,1:238) D  Q
"RTN","ICDTBL2C",83,0)
 . I $D(ICDOP(" 39.73")) S ICDRG=237
"RTN","ICDTBL2C",84,0)
DRG239 ;239-241
"RTN","ICDTBL2C",85,0)
DRG240 ;
"RTN","ICDTBL2C",86,0)
DRG241 S ICDRG=$S($D(ICDJJ(241)):241,1:ICDRG)
"RTN","ICDTBL2C",87,0)
 I ICDRG=241 S ICDRG=$S(ICDMCC=2:239,ICDMCC=1:240,1:241)
"RTN","ICDTBL2C",88,0)
 Q
"RTN","ICDTBL2C",89,0)
DRG242 ; called from CMS115
"RTN","ICDTBL2C",90,0)
 D MCV
"RTN","ICDTBL2C",91,0)
 I ICDMCV!(ICDMCV1) D
"RTN","ICDTBL2C",92,0)
 . S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244)
"RTN","ICDTBL2C",93,0)
 Q
"RTN","ICDTBL2C",94,0)
DRG243 D CMS115 Q
"RTN","ICDTBL2C",95,0)
DRG244 D CMS115 Q
"RTN","ICDTBL2C",96,0)
DRG245 I $D(ICDOP(" 37.95"))!($D(ICDOP(" 37.97")))!($D(ICDOP(" 00.52"))) D DRG265 Q
"RTN","ICDTBL2C",97,0)
 E  S ICDRG=245 Q
"RTN","ICDTBL2C",98,0)
DRG246 ;
"RTN","ICDTBL2C",99,0)
 D MCV
"RTN","ICDTBL2C",100,0)
 I ICDMCV!ICDMCV1 S ICDRG=246
"RTN","ICDTBL2C",101,0)
 E  S ICDRG=247
"RTN","ICDTBL2C",102,0)
 S ICDRG=$S(ICDMCC=2:246,1:247) D  Q
"RTN","ICDTBL2C",103,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.43")) S ICDRG=246
"RTN","ICDTBL2C",104,0)
 . I $D(ICDOP(" 36.07")),$D(ICDOP(" 00.43")) S ICDRG=246
"RTN","ICDTBL2C",105,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.48")) S ICDRG=246
"RTN","ICDTBL2C",106,0)
 . I $D(ICDOP(" 36.07")),$D(ICDOP(" 00.48")) S ICDRG=246
"RTN","ICDTBL2C",107,0)
 Q
"RTN","ICDTBL2C",108,0)
DRG247 D CMS516 Q
"RTN","ICDTBL2C",109,0)
DRG248 ;Called from CMS516
"RTN","ICDTBL2C",110,0)
 D MCV
"RTN","ICDTBL2C",111,0)
 I ICDMCV!(ICDMCV1) S ICDRG=248
"RTN","ICDTBL2C",112,0)
 S ICDRG=$S(ICDMCC=2:248,1:249) D  Q
"RTN","ICDTBL2C",113,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.43")) S ICDRG=248
"RTN","ICDTBL2C",114,0)
 . I $D(ICDOP(" 36.06")),$D(ICDOP(" 00.43")) S ICDRG=248
"RTN","ICDTBL2C",115,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.48")) S ICDRG=248
"RTN","ICDTBL2C",116,0)
 . I $D(ICDOP(" 36.06")),$D(ICDOP(" 00.48")) S ICDRG=248
"RTN","ICDTBL2C",117,0)
 Q
"RTN","ICDTBL2C",118,0)
DRG249 ;Called from CMS516
"RTN","ICDTBL2C",119,0)
 D MCV
"RTN","ICDTBL2C",120,0)
 I 'ICDMCV&('ICDMCV1) S ICDRG=249
"RTN","ICDTBL2C",121,0)
 S ICDRG=$S(ICDMCC=2:248,1:249) D  Q
"RTN","ICDTBL2C",122,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.43")) S ICDRG=248
"RTN","ICDTBL2C",123,0)
 . I $D(ICDOP(" 36.06")),$D(ICDOP(" 00.43")) S ICDRG=248
"RTN","ICDTBL2C",124,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.48")) S ICDRG=248
"RTN","ICDTBL2C",125,0)
 . I $D(ICDOP(" 36.06")),$D(ICDOP(" 00.48")) S ICDRG=248
"RTN","ICDTBL2C",126,0)
 Q
"RTN","ICDTBL2C",127,0)
DRG250 ;
"RTN","ICDTBL2C",128,0)
DRG251 S ICDRG=$S(ICDMCC=2:250,1:251) Q
"RTN","ICDTBL2C",129,0)
DRG252 ;
"RTN","ICDTBL2C",130,0)
DRG253 ;
"RTN","ICDTBL2C",131,0)
DRG254 S ICDRG=$S(ICDMCC=2:252,ICDMCC=1:253,1:254) Q
"RTN","ICDTBL2C",132,0)
DRG255 ;
"RTN","ICDTBL2C",133,0)
DRG256 ;
"RTN","ICDTBL2C",134,0)
DRG257 S ICDRG=$S(ICDMCC=2:255,ICDMCC=1:256,1:257) Q
"RTN","ICDTBL2C",135,0)
DRG258 ;I ICDOR["p" 
"RTN","ICDTBL2C",136,0)
DRG259 D CMS115 I "242^243^244^291^292^293"[ICDRG Q
"RTN","ICDTBL2C",137,0)
 S ICDRG=$S(ICDMCC=2:258,1:259) Q
"RTN","ICDTBL2C",138,0)
DRG260 ;
"RTN","ICDTBL2C",139,0)
 D CMS115 I "242^243^244^291^292^293"[ICDRG Q
"RTN","ICDTBL2C",140,0)
 D DRG258 I $D(ICDOP(" 00.56")) S ICDRG=264 Q
"RTN","ICDTBL2C",141,0)
 I ICDOR["p" S ICDRG=$S(ICDMCC=2:260,ICDMCC=1:261,1:262)
"RTN","ICDTBL2C",142,0)
 Q
"RTN","ICDTBL2C",143,0)
DRG261 D DRG260 Q
"RTN","ICDTBL2C",144,0)
DRG262 D DRG260 Q
"RTN","ICDTBL2C",145,0)
DRG263 S ICDRG=263 Q
"RTN","ICDTBL2C",146,0)
DRG264 S ICDRG=264 Q
"RTN","ICDTBL2C",147,0)
DRG265 S ICDRG=265 Q
"RTN","ICDTBL2C",148,0)
DRG280 ;
"RTN","ICDTBL2C",149,0)
DRG281 ;
"RTN","ICDTBL2C",150,0)
DRG282 I ICDPD="" S ICDRG=282
"RTN","ICDTBL2C",151,0)
 I ICDPD["I"&(ICDSD'["I") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2C",152,0)
 I ICDPD["I"&(ICDSD'["c") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2C",153,0)
 I ICDPD["I"&(ICDSD'["S") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2C",154,0)
 I ICDPD["c"&(ICDSD'["I") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2C",155,0)
 I ICDPD["c"&(ICDSD'["c") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2C",156,0)
 I ICDPD["c"&(ICDSD'["S") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2C",157,0)
 S ICDRG=$S(ICDMCC=2&(ICDSD["H"):280,ICDMCC=1&(ICDSD["H"):281,1:282) Q
"RTN","ICDTBL2C",158,0)
DRG283 ;
"RTN","ICDTBL2C",159,0)
DRG284 ;
"RTN","ICDTBL2C",160,0)
DRG285 ;
"RTN","ICDTBL2C",161,0)
 I $D(ICDDXT("427.41"))&$D(ICDDXT("427.5")) S ICDMCC=1
"RTN","ICDTBL2C",162,0)
 S ICDRG=$S(ICDMCC=2:283,ICDMCC=1:284,1:285) Q
"RTN","ICDTBL2C",163,0)
DRG286 ;
"RTN","ICDTBL2C",164,0)
DRG287 I ICDMAJ'=""&(ICDMAJ'["A") D DRG982^ICDTBL9C Q
"RTN","ICDTBL2C",165,0)
 S ICDRG=$S(ICDMCC=2:286,1:287) Q
"RTN","ICDTBL2C",166,0)
DRG288 ;
"RTN","ICDTBL2C",167,0)
DRG289 ;
"RTN","ICDTBL2C",168,0)
DRG290 S ICDRG=$S(ICDMCC=2:288,ICDMCC=1:289,1:290) Q
"RTN","ICDTBL2C",169,0)
DRG291 ;
"RTN","ICDTBL2C",170,0)
DRG292 ;
"RTN","ICDTBL2C",171,0)
DRG293 I ICDOR["K" D DRG252 Q
"RTN","ICDTBL2C",172,0)
 I ICDOR["P" D DRG260 Q
"RTN","ICDTBL2C",173,0)
 I (ICDDX(1)=5458!$D(ICDDXT("785.51"))),'ICDEXP S ICDMCC=2
"RTN","ICDTBL2C",174,0)
 I (ICDDX(1)=2480&$D(ICDDXT("428.33"))) S ICDMCC=1
"RTN","ICDTBL2C",175,0)
 S ICDRG=$S(ICDMCC=2:291,ICDMCC=1:292,1:293) Q
"RTN","ICDTBL2C",176,0)
DRG294 ;
"RTN","ICDTBL2C",177,0)
DRG295 S ICDRG=$S(ICDMCC>0:294,1:295) Q
"RTN","ICDTBL2C",178,0)
DRG296 ;
"RTN","ICDTBL2C",179,0)
DRG297 ;
"RTN","ICDTBL2C",180,0)
DRG298 I (ICDDX(1)=2561!$D(ICDDXT(" 427.5"))),'ICDEXP S ICDMCC=2
"RTN","ICDTBL2C",181,0)
 S ICDRG=$S(ICDMCC=2:296,ICDMCC=1:297,1:298) Q
"RTN","ICDTBL2C",182,0)
DRG299 S ICDRG=$S(ICDMCC=2:299,ICDMCC=1:300,1:301) Q
"RTN","ICDTBL2C",183,0)
 Q
"RTN","ICDTBL2C",184,0)
CMS115 ;convert DRG115^ICDTBL2C code - no MS-DRG 115 existed
"RTN","ICDTBL2C",185,0)
 D EN1^ICDDRG5
"RTN","ICDTBL2C",186,0)
 I ICDOR[7 S ICDRG=$S(ICDMCC=2:260,ICDMCC=1:261,1:262) Q
"RTN","ICDTBL2C",187,0)
 I ICDPD'["I"&(ICDOR'["p")&(ICDCC2=0)&(ICDCC3=0) D  Q
"RTN","ICDTBL2C",188,0)
 .I ICDSD["Z" S ICDMCC=0
"RTN","ICDTBL2C",189,0)
 .S ICDRG=$S(ICDMCC=2:291,ICDMCC=1:292,1:293)
"RTN","ICDTBL2C",190,0)
 I ICDCC2=1!(ICDCC3=1) D DRG242
"RTN","ICDTBL2C",191,0)
 I ((ICDRG>241)&(ICDRG<245)) Q
"RTN","ICDTBL2C",192,0)
 ; ICDCC2 identifies AICD LEAD OR GNRTR
"RTN","ICDTBL2C",193,0)
 I ICDCC2=1!(ICDCC3=1) D  Q
"RTN","ICDTBL2C",194,0)
 . S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244) Q
"RTN","ICDTBL2C",195,0)
 I ICDOR["p" D  Q
"RTN","ICDTBL2C",196,0)
 . S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244) Q
"RTN","ICDTBL2C",197,0)
 Q
"RTN","ICDTBL2C",198,0)
CMS516 ;convert DRG516^ICDTBL6C code - no MS-DRG 516 exists
"RTN","ICDTBL2C",199,0)
 I $D(ICDOP(" 37.72")),$D(ICDOP(" 37.83")),"242^243^244"[ICDRG Q
"RTN","ICDTBL2C",200,0)
 S ICDRG=250
"RTN","ICDTBL2C",201,0)
 I '$D(ICDOP(" 36.06"))&'$D(ICDOP(" 92.27"))&'$D(ICDOP(" 36.07")) D DRG251
"RTN","ICDTBL2C",202,0)
 E  D DRG248
"RTN","ICDTBL2C",203,0)
 ;I $D(ICDOP(" 36.06"))!$D(ICDOP(" 92.27")) D DRG249
"RTN","ICDTBL2C",204,0)
 I $D(ICDOP(" 36.07")) D DRG246
"RTN","ICDTBL2C",205,0)
 Q
"RTN","ICDTBL2C",206,0)
MCV ; checks to see if case qualifies as an MCV (major cardiovascular complications or complex conditions)
"RTN","ICDTBL2C",207,0)
 S (ICDMCV,ICDMCV1,ICDMCV2)=0
"RTN","ICDTBL2C",208,0)
 ; ICDPD=identifier for prime dx  ICDSD=identifier for any secondary dx
"RTN","ICDTBL2C",209,0)
 ; DGDX(1)=prime dx  ICDDX(1)=ien of prime dx ICDDXT=any secondary dx  
"RTN","ICDTBL2C",210,0)
 I ICDPD["c"!(ICDSD["c") S ICDMCV=1
"RTN","ICDTBL2C",211,0)
 I ICDSD["s" S ICDMCV=1
"RTN","ICDTBL2C",212,0)
 ;I DGDX(1)["426.0"!(DGDX(1)["426.53")!(DGDX(1)["426.54") S ICDMCV1=1
"RTN","ICDTBL2C",213,0)
 I $G(ICDDX(1))=9056!($G(ICDDX(1))=2548)!($G(ICDDX(1))=2549) S ICDMCV1=1
"RTN","ICDTBL2C",214,0)
 I $D(ICDDXT("426.0"))!($D(ICDDXT("426.53")))!($D(ICDDXT("426.54"))) S ICDMCV1=1
"RTN","ICDTBL2C",215,0)
 ;I DGDX(1)["411.1"!(DGDX(1)["411.81") S ICDMCV2=1
"RTN","ICDTBL2C",216,0)
 I $G(ICDDX(1))=2500!($G(ICDDX(1))=12477) S ICDMCV2=1
"RTN","ICDTBL2C",217,0)
 I $D(ICDDXT("411.1"))!($D(ICDDXT("411.81"))) S ICDMCV2=1
"RTN","ICDTBL2C",218,0)
 Q
"RTN","ICDTBL2D")
0^82^B49902612^B50198003
"RTN","ICDTBL2D",1,0)
ICDTBL2D ;ALB/MJB/KUM - GROUPER UTILITY FUNCTIONS;08/09/2010
"RTN","ICDTBL2D",2,0)
 ;;18.0;DRG Grouper;**56,55,61,62,64**;Oct 20, 2000;Build 103
"RTN","ICDTBL2D",3,0)
DRG200 ;
"RTN","ICDTBL2D",4,0)
DRG201 I ICDSD["c" S ICDRG=$S(ICDMCC=2:199,ICDMCC=1:200,1:201) Q
"RTN","ICDTBL2D",5,0)
 S ICDRG=$S(ICDMCC=2:199,ICDMCC=1:200,1:201) Q
"RTN","ICDTBL2D",6,0)
DRG202 ;
"RTN","ICDTBL2D",7,0)
DRG203 S ICDRG=$S(ICDMCC>0:202,1:203) Q
"RTN","ICDTBL2D",8,0)
DRG204 S ICDRG=204 Q
"RTN","ICDTBL2D",9,0)
DRG205 ;
"RTN","ICDTBL2D",10,0)
DRG206 S ICDRG=$S(ICDMCC=2:205,1:206) Q
"RTN","ICDTBL2D",11,0)
DRG207 S ICDRG=207 Q
"RTN","ICDTBL2D",12,0)
DRG208 I ICDOR["o" D DRG982^ICDTBL9D Q
"RTN","ICDTBL2D",13,0)
 S ICDRG=208 Q
"RTN","ICDTBL2D",14,0)
DRG215 S ICDRG=215 Q
"RTN","ICDTBL2D",15,0)
DRG216 ;valve procedures
"RTN","ICDTBL2D",16,0)
 N ICDE1,ICDE2
"RTN","ICDTBL2D",17,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&($D(ICDOP(" 37.96"))):1,1:0),ICDE2=$S($D(ICDOP(" 37.97"))&($D(ICDOP(" 37.98"))):1,1:0)
"RTN","ICDTBL2D",18,0)
 S:ICDOR["H" ICDRG=$S(ICDOR["N"&ICDE1:218,ICDOR["N"&ICDE2:218,ICDOR["O":218,1:ICDRG)
"RTN","ICDTBL2D",19,0)
 S:ICDOR'["H" ICDRG=$S(ICDOR["N"&ICDE1:221,ICDOR["N"&ICDE2:221,ICDOR["O":221,1:ICDRG)
"RTN","ICDTBL2D",20,0)
 I ICDOR["P"&(ICDE1+ICDE2=0) S ICDRG=$S(ICDOR["H":218,1:221)
"RTN","ICDTBL2D",21,0)
 S:ICDRG=218 ICDRG=$S(ICDMCC=2:216,ICDMCC=1:217,1:218)
"RTN","ICDTBL2D",22,0)
 S:ICDRG=221 ICDRG=$S(ICDMCC=2:219,ICDMCC=1:220,1:221)
"RTN","ICDTBL2D",23,0)
 Q
"RTN","ICDTBL2D",24,0)
DRG217 D DRG216 Q
"RTN","ICDTBL2D",25,0)
DRG218 D DRG216 Q
"RTN","ICDTBL2D",26,0)
DRG219 D DRG216 Q
"RTN","ICDTBL2D",27,0)
DRG220 D DRG216 Q
"RTN","ICDTBL2D",28,0)
DRG221 D DRG216 Q
"RTN","ICDTBL2D",29,0)
DRG222 N ICDE1,ICDE2,ICDE3,ICDE4
"RTN","ICDTBL2D",30,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&(($D(ICDOP(" 37.96")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTBL2D",31,0)
 S ICDE2=$S($D(ICDOP(" 37.97"))&(($D(ICDOP(" 37.98")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTBL2D",32,0)
 S ICDE3=$S($D(ICDOP(" 00.52"))&($D(ICDOP(" 00.54"))):1,1:0)
"RTN","ICDTBL2D",33,0)
 ;S ICDE4=$S($D(ICDOP(" 00.54"))&($D(ICDOP(" 37.95"))):1,1:0)
"RTN","ICDTBL2D",34,0)
 S ICDE4=$S($D(ICDOP(" 37.74"))&(($D(ICDOP(" 37.96")))!($D(ICDOP(" 37.98")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTBL2D",35,0)
 S ICDRG=999
"RTN","ICDTBL2D",36,0)
 I $D(ICDOP(" 37.94"))!$D(ICDOP(" 00.51")) I ICDE1+ICDE2+ICDE3+ICDE4=0 D
"RTN","ICDTBL2D",37,0)
 . S ICDRG=$S(ICDMCC=2:226,1:227)
"RTN","ICDTBL2D",38,0)
 I '$D(ICDOP(" 37.94"))&('$D(ICDOP(" 00.51"))) I ICDE1!ICDE2!ICDE3!ICDE4 D
"RTN","ICDTBL2D",39,0)
 . S ICDRG=$S(ICDMCC=2:226,1:227)
"RTN","ICDTBL2D",40,0)
 ; "HN" in ICDOR represents OR proc 37.21-.23, 37.26, 88.52-.58
"RTN","ICDTBL2D",41,0)
 I (ICDRG=226)!(ICDRG=227) I ICDOR["HN" I '$D(ICDOP(" 37.26")) S ICDRG=$S((ICDPD["A")&(ICDMCC=2):222,ICDPD["A":223,ICDMCC=2:224,1:225)
"RTN","ICDTBL2D",42,0)
 I ICDRG=470 D CMS115
"RTN","ICDTBL2D",43,0)
 Q
"RTN","ICDTBL2D",44,0)
DRG223 D DRG222 Q
"RTN","ICDTBL2D",45,0)
DRG224 ;
"RTN","ICDTBL2D",46,0)
DRG225 D DRG222 Q
"RTN","ICDTBL2D",47,0)
DRG226 ;
"RTN","ICDTBL2D",48,0)
DRG227 D DRG222 Q
"RTN","ICDTBL2D",49,0)
DRG228 ;
"RTN","ICDTBL2D",50,0)
DRG229 ;
"RTN","ICDTBL2D",51,0)
DRG230 ;DRGs 228-230 note ICDOR["Oo" = operation and DRG CMS108/MS230 procedure
"RTN","ICDTBL2D",52,0)
 I $D(ICDOP(" 35.33")) D DRG221 Q
"RTN","ICDTBL2D",53,0)
 I ICDOR["Oo"!($D(ICDOP(" 38.44"))&($D(ICDOP(" 38.45")))) D  Q
"RTN","ICDTBL2D",54,0)
 . S ICDRG=$S(ICDMCC=2:228,ICDMCC=1:229,1:230) Q
"RTN","ICDTBL2D",55,0)
 G DRG237
"RTN","ICDTBL2D",56,0)
DRG231 S ICDRG=999
"RTN","ICDTBL2D",57,0)
 I ICDOR["b" D DRG235
"RTN","ICDTBL2D",58,0)
 I ICDOR["b" I $D(ICDOP(" 35.96"))!($D(ICDOP(" 00.66"))) D  Q
"RTN","ICDTBL2D",59,0)
 . S ICDRG=$S(ICDMCC=2:231,1:232)
"RTN","ICDTBL2D",60,0)
 I ICDOR["b" I $D(ICDOP(" 37.21"))!($D(ICDOP(" 37.22")))!($D(ICDOP(" 37.23"))) D DRG233 Q
"RTN","ICDTBL2D",61,0)
 I ICDRG'=231&(ICDRG'=232)&(ICDRG'=233)&(ICDRG'=234)&(ICDRG'=235)&(ICDRG'=236) S ICDRG=999 D DRG237
"RTN","ICDTBL2D",62,0)
 Q
"RTN","ICDTBL2D",63,0)
DRG232 D DRG231 Q
"RTN","ICDTBL2D",64,0)
DRG233 ; called from DRG231
"RTN","ICDTBL2D",65,0)
 D MCV
"RTN","ICDTBL2D",66,0)
 S ICDRG=$S(ICDMCV:233,ICDMCV1:233,1:234)
"RTN","ICDTBL2D",67,0)
 S ICDRG=$S(ICDMCC=2:233,1:234)
"RTN","ICDTBL2D",68,0)
 Q
"RTN","ICDTBL2D",69,0)
DRG234 D DRG233 Q
"RTN","ICDTBL2D",70,0)
DRG235 ;
"RTN","ICDTBL2D",71,0)
DRG236 S ICDRG=$S(ICDMCC=2:235,1:236) Q
"RTN","ICDTBL2D",72,0)
DRG237 I ICDOR["Oo" D DRG228
"RTN","ICDTBL2D",73,0)
 S ICDRG=$S((ICDMCC=2)&(ICDOR[7):237,ICDOR[7:238,1:ICDRG)
"RTN","ICDTBL2D",74,0)
 I "228^229^230^237^238"[ICDRG Q
"RTN","ICDTBL2D",75,0)
 ;I $D(ICDJJ(478))&('$D(ICDJJ(110))&'($D(ICDJJ(111)))) D DRG478^ICDTBL6C
"RTN","ICDTBL2D",76,0)
 D DRG239 I "239^240^241"[ICDRG Q
"RTN","ICDTBL2D",77,0)
 I ICDOR["p" D DRG260
"RTN","ICDTBL2D",78,0)
 I ICDOR["1" D CMS516
"RTN","ICDTBL2D",79,0)
 Q
"RTN","ICDTBL2D",80,0)
DRG238 S ICDRG=$S(ICDMCC=2:237,1:238) Q
"RTN","ICDTBL2D",81,0)
DRG239 ;239-241
"RTN","ICDTBL2D",82,0)
DRG240 ;
"RTN","ICDTBL2D",83,0)
DRG241 S ICDRG=$S($D(ICDJJ(241)):241,1:ICDRG)
"RTN","ICDTBL2D",84,0)
 I ICDRG=241 S ICDRG=$S(ICDMCC=2:239,ICDMCC=1:240,1:241)
"RTN","ICDTBL2D",85,0)
 Q
"RTN","ICDTBL2D",86,0)
DRG242 ; called from CMS115
"RTN","ICDTBL2D",87,0)
 D MCV
"RTN","ICDTBL2D",88,0)
 I ICDMCV!(ICDMCV1) D
"RTN","ICDTBL2D",89,0)
 . S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244)
"RTN","ICDTBL2D",90,0)
 Q
"RTN","ICDTBL2D",91,0)
DRG243 D CMS115 Q
"RTN","ICDTBL2D",92,0)
DRG244 D CMS115 Q
"RTN","ICDTBL2D",93,0)
DRG245 I $D(ICDOP(" 37.95"))!($D(ICDOP(" 37.97")))!($D(ICDOP(" 00.52"))) D DRG265 Q
"RTN","ICDTBL2D",94,0)
 E  S ICDRG=245 Q
"RTN","ICDTBL2D",95,0)
DRG246 ;
"RTN","ICDTBL2D",96,0)
 D MCV
"RTN","ICDTBL2D",97,0)
 I ICDMCV!ICDMCV1 S ICDRG=246
"RTN","ICDTBL2D",98,0)
 E  S ICDRG=247
"RTN","ICDTBL2D",99,0)
 S ICDRG=$S(ICDMCC=2:246,1:247) D  Q
"RTN","ICDTBL2D",100,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.43")) S ICDRG=246
"RTN","ICDTBL2D",101,0)
 . I $D(ICDOP(" 36.07")),$D(ICDOP(" 00.43")) S ICDRG=246
"RTN","ICDTBL2D",102,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.48")) S ICDRG=246
"RTN","ICDTBL2D",103,0)
 . I $D(ICDOP(" 36.07")),$D(ICDOP(" 00.48")) S ICDRG=246
"RTN","ICDTBL2D",104,0)
 Q
"RTN","ICDTBL2D",105,0)
DRG247 D CMS516 Q
"RTN","ICDTBL2D",106,0)
DRG248 ;Called from CMS516
"RTN","ICDTBL2D",107,0)
 D MCV
"RTN","ICDTBL2D",108,0)
 I ICDMCV!(ICDMCV1) S ICDRG=248
"RTN","ICDTBL2D",109,0)
 S ICDRG=$S(ICDMCC=2:248,1:249) D  Q
"RTN","ICDTBL2D",110,0)
 . I $D(ICDOP(" 36.06")),$D(ICDOP(" 00.43")) S ICDRG=248
"RTN","ICDTBL2D",111,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.43")) S ICDRG=248
"RTN","ICDTBL2D",112,0)
 . I $D(ICDOP(" 36.06")),$D(ICDOP(" 00.48")) S ICDRG=248
"RTN","ICDTBL2D",113,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.48")) S ICDRG=248
"RTN","ICDTBL2D",114,0)
 Q
"RTN","ICDTBL2D",115,0)
DRG249 ;Called from CMS516
"RTN","ICDTBL2D",116,0)
 D MCV
"RTN","ICDTBL2D",117,0)
 I 'ICDMCV&('ICDMCV1) S ICDRG=249
"RTN","ICDTBL2D",118,0)
 S ICDRG=$S(ICDMCC=2:248,1:249) D  Q
"RTN","ICDTBL2D",119,0)
 . I $D(ICDOP(" 36.06")),$D(ICDOP(" 00.43")) S ICDRG=248
"RTN","ICDTBL2D",120,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.43")) S ICDRG=248
"RTN","ICDTBL2D",121,0)
 . I $D(ICDOP(" 36.06")),$D(ICDOP(" 00.48")) S ICDRG=248
"RTN","ICDTBL2D",122,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.48")) S ICDRG=248
"RTN","ICDTBL2D",123,0)
 Q
"RTN","ICDTBL2D",124,0)
DRG250 ;
"RTN","ICDTBL2D",125,0)
DRG251 S ICDRG=$S(ICDMCC=2:250,1:251) Q
"RTN","ICDTBL2D",126,0)
DRG252 ;
"RTN","ICDTBL2D",127,0)
DRG253 ;
"RTN","ICDTBL2D",128,0)
DRG254 S ICDRG=$S(ICDMCC=2:252,ICDMCC=1:253,1:254) Q
"RTN","ICDTBL2D",129,0)
DRG255 ;
"RTN","ICDTBL2D",130,0)
DRG256 ;
"RTN","ICDTBL2D",131,0)
DRG257 S ICDRG=$S(ICDMCC=2:255,ICDMCC=1:256,1:257) Q
"RTN","ICDTBL2D",132,0)
DRG258 ;I ICDOR["p" 
"RTN","ICDTBL2D",133,0)
DRG259 D CMS115 I "242^243^244^291^292^293"[ICDRG Q
"RTN","ICDTBL2D",134,0)
 S ICDRG=$S(ICDMCC=2:258,1:259) Q
"RTN","ICDTBL2D",135,0)
DRG260 ;
"RTN","ICDTBL2D",136,0)
 D CMS115 I "242^243^244^291^292^293"[ICDRG Q
"RTN","ICDTBL2D",137,0)
 D DRG258 I $D(ICDOP(" 00.56")) S ICDRG=264 Q
"RTN","ICDTBL2D",138,0)
 I ICDOR["p" S ICDRG=$S(ICDMCC=2:260,ICDMCC=1:261,1:262)
"RTN","ICDTBL2D",139,0)
 Q
"RTN","ICDTBL2D",140,0)
DRG261 D DRG260 Q
"RTN","ICDTBL2D",141,0)
DRG262 D DRG260 Q
"RTN","ICDTBL2D",142,0)
DRG263 S ICDRG=263 Q
"RTN","ICDTBL2D",143,0)
DRG264 S ICDRG=264 Q
"RTN","ICDTBL2D",144,0)
DRG265 S ICDRG=265 Q
"RTN","ICDTBL2D",145,0)
DRG280 ;
"RTN","ICDTBL2D",146,0)
DRG281 ;
"RTN","ICDTBL2D",147,0)
DRG282 I ICDPD="" S ICDRG=282
"RTN","ICDTBL2D",148,0)
 I ICDPD["I"&(ICDSD'["I") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2D",149,0)
 I ICDPD["I"&(ICDSD'["c") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2D",150,0)
 I ICDPD["I"&(ICDSD'["S") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2D",151,0)
 I ICDPD["c"&(ICDSD'["I") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2D",152,0)
 I ICDPD["c"&(ICDSD'["c") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2D",153,0)
 I ICDPD["c"&(ICDSD'["S") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2D",154,0)
 S ICDRG=$S(ICDMCC=2&(ICDSD["H"):280,ICDMCC=1&(ICDSD["H"):281,1:282) Q
"RTN","ICDTBL2D",155,0)
DRG283 ;
"RTN","ICDTBL2D",156,0)
DRG284 ;
"RTN","ICDTBL2D",157,0)
DRG285 ;
"RTN","ICDTBL2D",158,0)
 I $D(ICDDXT("427.41"))&$D(ICDDXT("427.5")) S ICDMCC=1
"RTN","ICDTBL2D",159,0)
 S ICDRG=$S(ICDMCC=2:283,ICDMCC=1:284,1:285) Q
"RTN","ICDTBL2D",160,0)
DRG286 ;
"RTN","ICDTBL2D",161,0)
DRG287 I ICDMAJ'=""&(ICDMAJ'["A") D DRG982^ICDTBL9D Q
"RTN","ICDTBL2D",162,0)
 S ICDRG=$S(ICDMCC=2:286,1:287) Q
"RTN","ICDTBL2D",163,0)
DRG288 ;
"RTN","ICDTBL2D",164,0)
DRG289 ;
"RTN","ICDTBL2D",165,0)
DRG290 S ICDRG=$S(ICDMCC=2:288,ICDMCC=1:289,1:290) Q
"RTN","ICDTBL2D",166,0)
DRG291 ;
"RTN","ICDTBL2D",167,0)
DRG292 ;
"RTN","ICDTBL2D",168,0)
DRG293 I ICDOR["K" D DRG252 Q
"RTN","ICDTBL2D",169,0)
 I ICDOR["P" D DRG260 Q
"RTN","ICDTBL2D",170,0)
 I (ICDDX(1)=5458!$D(ICDDXT("785.51"))),'ICDEXP S ICDMCC=2
"RTN","ICDTBL2D",171,0)
 I (ICDDX(1)=2480&$D(ICDDXT("428.33"))) S ICDMCC=1
"RTN","ICDTBL2D",172,0)
 S ICDRG=$S(ICDMCC=2:291,ICDMCC=1:292,1:293) Q
"RTN","ICDTBL2D",173,0)
DRG294 ;
"RTN","ICDTBL2D",174,0)
DRG295 S ICDRG=$S(ICDMCC>0:294,1:295) Q
"RTN","ICDTBL2D",175,0)
DRG296 ;
"RTN","ICDTBL2D",176,0)
DRG297 ;
"RTN","ICDTBL2D",177,0)
DRG298 I (ICDDX(1)=2561!$D(ICDDXT(" 427.5"))),'ICDEXP S ICDMCC=2
"RTN","ICDTBL2D",178,0)
 S ICDRG=$S(ICDMCC=2:296,ICDMCC=1:297,1:298) Q
"RTN","ICDTBL2D",179,0)
DRG299 S ICDRG=$S(ICDMCC=2:299,ICDMCC=1:300,1:301) Q
"RTN","ICDTBL2D",180,0)
 Q
"RTN","ICDTBL2D",181,0)
CMS115 ;convert DRG115^ICDTBL2D code - no MS-DRG 115 existed
"RTN","ICDTBL2D",182,0)
 D EN1^ICDDRG5
"RTN","ICDTBL2D",183,0)
 I ICDOR[7 S ICDRG=$S(ICDMCC=2:260,ICDMCC=1:261,1:262) Q
"RTN","ICDTBL2D",184,0)
 I ICDPD'["I"&(ICDOR'["p")&(ICDCC2=0)&(ICDCC3=0) D  Q
"RTN","ICDTBL2D",185,0)
 .I ICDSD["Z" S ICDMCC=0
"RTN","ICDTBL2D",186,0)
 .S ICDRG=$S(ICDMCC=2:291,ICDMCC=1:292,1:293)
"RTN","ICDTBL2D",187,0)
 I ICDCC2=1!(ICDCC3=1) D DRG242
"RTN","ICDTBL2D",188,0)
 I ((ICDRG>241)&(ICDRG<245)) Q
"RTN","ICDTBL2D",189,0)
 ; ICDCC2 identifies AICD LEAD OR GNRTR
"RTN","ICDTBL2D",190,0)
 I ICDCC2=1!(ICDCC3=1) D  Q
"RTN","ICDTBL2D",191,0)
 . S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244) Q
"RTN","ICDTBL2D",192,0)
 I ICDOR["p" D  Q
"RTN","ICDTBL2D",193,0)
 . S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244) Q
"RTN","ICDTBL2D",194,0)
 Q
"RTN","ICDTBL2D",195,0)
CMS516 ;convert DRG516^ICDTBL6D code - no MS-DRG 516 exists
"RTN","ICDTBL2D",196,0)
 I $D(ICDOP(" 37.72")),$D(ICDOP(" 37.83")),"242^243^244"[ICDRG Q
"RTN","ICDTBL2D",197,0)
 S ICDRG=250
"RTN","ICDTBL2D",198,0)
 I '$D(ICDOP(" 36.06"))&'$D(ICDOP(" 92.27"))&'$D(ICDOP(" 36.07")) D DRG251
"RTN","ICDTBL2D",199,0)
 E  D DRG248
"RTN","ICDTBL2D",200,0)
 ;I $D(ICDOP(" 36.06"))!$D(ICDOP(" 92.27")) D DRG249
"RTN","ICDTBL2D",201,0)
 I $D(ICDOP(" 36.07")) D DRG246
"RTN","ICDTBL2D",202,0)
 Q
"RTN","ICDTBL2D",203,0)
MCV ; checks to see if case qualifies as an MCV (major cardiovascular complications or complex conditions)
"RTN","ICDTBL2D",204,0)
 S (ICDMCV,ICDMCV1,ICDMCV2)=0
"RTN","ICDTBL2D",205,0)
 ; ICDPD=identifier for prime dx  ICDSD=identifier for any secondary dx
"RTN","ICDTBL2D",206,0)
 ; DGDX(1)=prime dx  ICDDX(1)=ien of prime dx ICDDXT=any secondary dx  
"RTN","ICDTBL2D",207,0)
 I ICDPD["c"!(ICDSD["c") S ICDMCV=1
"RTN","ICDTBL2D",208,0)
 I ICDSD["s" S ICDMCV=1
"RTN","ICDTBL2D",209,0)
 ;I DGDX(1)["426.0"!(DGDX(1)["426.53")!(DGDX(1)["426.54") S ICDMCV1=1
"RTN","ICDTBL2D",210,0)
 I $G(ICDDX(1))=9056!($G(ICDDX(1))=2548)!($G(ICDDX(1))=2549) S ICDMCV1=1
"RTN","ICDTBL2D",211,0)
 I $D(ICDDXT("426.0"))!($D(ICDDXT("426.53")))!($D(ICDDXT("426.54"))) S ICDMCV1=1
"RTN","ICDTBL2D",212,0)
 ;I DGDX(1)["411.1"!(DGDX(1)["411.81") S ICDMCV2=1
"RTN","ICDTBL2D",213,0)
 I $G(ICDDX(1))=2500!($G(ICDDX(1))=12477) S ICDMCV2=1
"RTN","ICDTBL2D",214,0)
 I $D(ICDDXT("411.1"))!($D(ICDDXT("411.81"))) S ICDMCV2=1
"RTN","ICDTBL2D",215,0)
 Q
"RTN","ICDTBL2E")
0^83^B49902881^B50198273
"RTN","ICDTBL2E",1,0)
ICDTBL2E ;ALB/JDG/SS - GROUPER UTILITY FUNCTIONS;08/09/2010
"RTN","ICDTBL2E",2,0)
 ;;18.0;DRG Grouper;**65,64**;Oct 20, 2000;Build 103
"RTN","ICDTBL2E",3,0)
DRG200 ;
"RTN","ICDTBL2E",4,0)
DRG201 I ICDSD["c" S ICDRG=$S(ICDMCC=2:199,ICDMCC=1:200,1:201) Q
"RTN","ICDTBL2E",5,0)
 S ICDRG=$S(ICDMCC=2:199,ICDMCC=1:200,1:201) Q
"RTN","ICDTBL2E",6,0)
DRG202 ;
"RTN","ICDTBL2E",7,0)
DRG203 S ICDRG=$S(ICDMCC>0:202,1:203) Q
"RTN","ICDTBL2E",8,0)
DRG204 S ICDRG=204 Q
"RTN","ICDTBL2E",9,0)
DRG205 ;
"RTN","ICDTBL2E",10,0)
DRG206 S ICDRG=$S(ICDMCC=2:205,1:206) Q
"RTN","ICDTBL2E",11,0)
DRG207 S ICDRG=207 Q
"RTN","ICDTBL2E",12,0)
DRG208 I ICDOR["o" D DRG982^ICDTBL9E Q
"RTN","ICDTBL2E",13,0)
 S ICDRG=208 Q
"RTN","ICDTBL2E",14,0)
DRG215 S ICDRG=215 Q
"RTN","ICDTBL2E",15,0)
DRG216 ;valve procedures
"RTN","ICDTBL2E",16,0)
 N ICDE1,ICDE2
"RTN","ICDTBL2E",17,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&($D(ICDOP(" 37.96"))):1,1:0),ICDE2=$S($D(ICDOP(" 37.97"))&($D(ICDOP(" 37.98"))):1,1:0)
"RTN","ICDTBL2E",18,0)
 S:ICDOR["H" ICDRG=$S(ICDOR["N"&ICDE1:218,ICDOR["N"&ICDE2:218,ICDOR["O":218,1:ICDRG)
"RTN","ICDTBL2E",19,0)
 S:ICDOR'["H" ICDRG=$S(ICDOR["N"&ICDE1:221,ICDOR["N"&ICDE2:221,ICDOR["O":221,1:ICDRG)
"RTN","ICDTBL2E",20,0)
 I ICDOR["P"&(ICDE1+ICDE2=0) S ICDRG=$S(ICDOR["H":218,1:221)
"RTN","ICDTBL2E",21,0)
 S:ICDRG=218 ICDRG=$S(ICDMCC=2:216,ICDMCC=1:217,1:218)
"RTN","ICDTBL2E",22,0)
 S:ICDRG=221 ICDRG=$S(ICDMCC=2:219,ICDMCC=1:220,1:221)
"RTN","ICDTBL2E",23,0)
 Q
"RTN","ICDTBL2E",24,0)
DRG217 D DRG216 Q
"RTN","ICDTBL2E",25,0)
DRG218 D DRG216 Q
"RTN","ICDTBL2E",26,0)
DRG219 D DRG216 Q
"RTN","ICDTBL2E",27,0)
DRG220 D DRG216 Q
"RTN","ICDTBL2E",28,0)
DRG221 D DRG216 Q
"RTN","ICDTBL2E",29,0)
DRG222 N ICDE1,ICDE2,ICDE3,ICDE4
"RTN","ICDTBL2E",30,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&(($D(ICDOP(" 37.96")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTBL2E",31,0)
 S ICDE2=$S($D(ICDOP(" 37.97"))&(($D(ICDOP(" 37.98")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTBL2E",32,0)
 S ICDE3=$S($D(ICDOP(" 00.52"))&($D(ICDOP(" 00.54"))):1,1:0)
"RTN","ICDTBL2E",33,0)
 ;S ICDE4=$S($D(ICDOP(" 00.54"))&($D(ICDOP(" 37.95"))):1,1:0)
"RTN","ICDTBL2E",34,0)
 S ICDE4=$S($D(ICDOP(" 37.74"))&(($D(ICDOP(" 37.96")))!($D(ICDOP(" 37.98")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTBL2E",35,0)
 S ICDRG=999
"RTN","ICDTBL2E",36,0)
 I $D(ICDOP(" 37.94"))!$D(ICDOP(" 00.51")) I ICDE1+ICDE2+ICDE3+ICDE4=0 D
"RTN","ICDTBL2E",37,0)
 . S ICDRG=$S(ICDMCC=2:226,1:227)
"RTN","ICDTBL2E",38,0)
 I '$D(ICDOP(" 37.94"))&('$D(ICDOP(" 00.51"))) I ICDE1!ICDE2!ICDE3!ICDE4 D
"RTN","ICDTBL2E",39,0)
 . S ICDRG=$S(ICDMCC=2:226,1:227)
"RTN","ICDTBL2E",40,0)
 ; "HN" in ICDOR represents OR proc 37.21-.23, 37.26, 88.52-.58
"RTN","ICDTBL2E",41,0)
 I (ICDRG=226)!(ICDRG=227) I ICDOR["HN" I '$D(ICDOP(" 37.26")) S ICDRG=$S((ICDPD["A")&(ICDMCC=2):222,ICDPD["A":223,ICDMCC=2:224,1:225)
"RTN","ICDTBL2E",42,0)
 I ICDRG=470 D CMS115
"RTN","ICDTBL2E",43,0)
 Q
"RTN","ICDTBL2E",44,0)
DRG223 D DRG222 Q
"RTN","ICDTBL2E",45,0)
DRG224 ;
"RTN","ICDTBL2E",46,0)
DRG225 D DRG222 Q
"RTN","ICDTBL2E",47,0)
DRG226 ;
"RTN","ICDTBL2E",48,0)
DRG227 D DRG222 Q
"RTN","ICDTBL2E",49,0)
DRG228 ;
"RTN","ICDTBL2E",50,0)
DRG229 ;
"RTN","ICDTBL2E",51,0)
DRG230 ;DRGs 228-230 note ICDOR["Oo" = operation and DRG CMS108/MS230 procedure
"RTN","ICDTBL2E",52,0)
 I $D(ICDOP(" 35.33")) D DRG221 Q
"RTN","ICDTBL2E",53,0)
 I ICDOR["Oo"!($D(ICDOP(" 38.44"))&($D(ICDOP(" 38.45")))) D  Q
"RTN","ICDTBL2E",54,0)
 . S ICDRG=$S(ICDMCC=2:228,ICDMCC=1:229,1:230) Q
"RTN","ICDTBL2E",55,0)
 G DRG237
"RTN","ICDTBL2E",56,0)
DRG231 S ICDRG=999
"RTN","ICDTBL2E",57,0)
 I ICDOR["b" D DRG235
"RTN","ICDTBL2E",58,0)
 I ICDOR["b" I $D(ICDOP(" 35.96"))!($D(ICDOP(" 00.66"))) D  Q
"RTN","ICDTBL2E",59,0)
 . S ICDRG=$S(ICDMCC=2:231,1:232)
"RTN","ICDTBL2E",60,0)
 I ICDOR["b" I $D(ICDOP(" 37.21"))!($D(ICDOP(" 37.22")))!($D(ICDOP(" 37.23"))) D DRG233 Q
"RTN","ICDTBL2E",61,0)
 I ICDRG'=231&(ICDRG'=232)&(ICDRG'=233)&(ICDRG'=234)&(ICDRG'=235)&(ICDRG'=236) S ICDRG=999 D DRG237
"RTN","ICDTBL2E",62,0)
 Q
"RTN","ICDTBL2E",63,0)
DRG232 D DRG231 Q
"RTN","ICDTBL2E",64,0)
DRG233 ; called from DRG231
"RTN","ICDTBL2E",65,0)
 D MCV
"RTN","ICDTBL2E",66,0)
 S ICDRG=$S(ICDMCV:233,ICDMCV1:233,1:234)
"RTN","ICDTBL2E",67,0)
 S ICDRG=$S(ICDMCC=2:233,1:234)
"RTN","ICDTBL2E",68,0)
 Q
"RTN","ICDTBL2E",69,0)
DRG234 D DRG233 Q
"RTN","ICDTBL2E",70,0)
DRG235 ;
"RTN","ICDTBL2E",71,0)
DRG236 S ICDRG=$S(ICDMCC=2:235,1:236) Q
"RTN","ICDTBL2E",72,0)
DRG237 I ICDOR["Oo" D DRG228
"RTN","ICDTBL2E",73,0)
 S ICDRG=$S((ICDMCC=2)&(ICDOR[7):237,ICDOR[7:238,1:ICDRG)
"RTN","ICDTBL2E",74,0)
 I "228^229^230^237^238"[ICDRG Q
"RTN","ICDTBL2E",75,0)
 ;I $D(ICDJJ(478))&('$D(ICDJJ(110))&'($D(ICDJJ(111)))) D DRG478^ICDTBL6C
"RTN","ICDTBL2E",76,0)
 D DRG239 I "239^240^241"[ICDRG Q
"RTN","ICDTBL2E",77,0)
 I ICDOR["p" D DRG260
"RTN","ICDTBL2E",78,0)
 I ICDOR["1" D CMS516
"RTN","ICDTBL2E",79,0)
 Q
"RTN","ICDTBL2E",80,0)
DRG238 S ICDRG=$S(ICDMCC=2:237,1:238) Q
"RTN","ICDTBL2E",81,0)
DRG239 ;239-241
"RTN","ICDTBL2E",82,0)
DRG240 ;
"RTN","ICDTBL2E",83,0)
DRG241 S ICDRG=$S($D(ICDJJ(241)):241,1:ICDRG)
"RTN","ICDTBL2E",84,0)
 I ICDRG=241 S ICDRG=$S(ICDMCC=2:239,ICDMCC=1:240,1:241)
"RTN","ICDTBL2E",85,0)
 Q
"RTN","ICDTBL2E",86,0)
DRG242 ; called from CMS115
"RTN","ICDTBL2E",87,0)
 D MCV
"RTN","ICDTBL2E",88,0)
 I ICDMCV!(ICDMCV1) D
"RTN","ICDTBL2E",89,0)
 . S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244)
"RTN","ICDTBL2E",90,0)
 Q
"RTN","ICDTBL2E",91,0)
DRG243 D CMS115 Q
"RTN","ICDTBL2E",92,0)
DRG244 D CMS115 Q
"RTN","ICDTBL2E",93,0)
DRG245 I $D(ICDOP(" 37.95"))!($D(ICDOP(" 37.97")))!($D(ICDOP(" 00.52"))) D DRG265 Q
"RTN","ICDTBL2E",94,0)
 E  S ICDRG=245 Q
"RTN","ICDTBL2E",95,0)
DRG246 ;
"RTN","ICDTBL2E",96,0)
 D MCV
"RTN","ICDTBL2E",97,0)
 I ICDMCV!ICDMCV1 S ICDRG=246
"RTN","ICDTBL2E",98,0)
 E  S ICDRG=247
"RTN","ICDTBL2E",99,0)
 S ICDRG=$S(ICDMCC=2:246,1:247) D  Q
"RTN","ICDTBL2E",100,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.43")) S ICDRG=246
"RTN","ICDTBL2E",101,0)
 . I $D(ICDOP(" 36.07")),$D(ICDOP(" 00.43")) S ICDRG=246
"RTN","ICDTBL2E",102,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.48")) S ICDRG=246
"RTN","ICDTBL2E",103,0)
 . I $D(ICDOP(" 36.07")),$D(ICDOP(" 00.48")) S ICDRG=246
"RTN","ICDTBL2E",104,0)
 Q
"RTN","ICDTBL2E",105,0)
DRG247 D CMS516 Q
"RTN","ICDTBL2E",106,0)
DRG248 ;Called from CMS516
"RTN","ICDTBL2E",107,0)
 D MCV
"RTN","ICDTBL2E",108,0)
 I ICDMCV!(ICDMCV1) S ICDRG=248
"RTN","ICDTBL2E",109,0)
 S ICDRG=$S(ICDMCC=2:248,1:249) D  Q
"RTN","ICDTBL2E",110,0)
 . I $D(ICDOP(" 36.06")),$D(ICDOP(" 00.43")) S ICDRG=248
"RTN","ICDTBL2E",111,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.43")) S ICDRG=248
"RTN","ICDTBL2E",112,0)
 . I $D(ICDOP(" 36.06")),$D(ICDOP(" 00.48")) S ICDRG=248
"RTN","ICDTBL2E",113,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.48")) S ICDRG=248
"RTN","ICDTBL2E",114,0)
 Q
"RTN","ICDTBL2E",115,0)
DRG249 ;Called from CMS516
"RTN","ICDTBL2E",116,0)
 D MCV
"RTN","ICDTBL2E",117,0)
 I 'ICDMCV&('ICDMCV1) S ICDRG=249
"RTN","ICDTBL2E",118,0)
 S ICDRG=$S(ICDMCC=2:248,1:249) D  Q
"RTN","ICDTBL2E",119,0)
 . I $D(ICDOP(" 36.06")),$D(ICDOP(" 00.43")) S ICDRG=248
"RTN","ICDTBL2E",120,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.43")) S ICDRG=248
"RTN","ICDTBL2E",121,0)
 . I $D(ICDOP(" 36.06")),$D(ICDOP(" 00.48")) S ICDRG=248
"RTN","ICDTBL2E",122,0)
 . I $D(ICDOP(" 00.66")),$D(ICDOP(" 00.48")) S ICDRG=248
"RTN","ICDTBL2E",123,0)
 Q
"RTN","ICDTBL2E",124,0)
DRG250 ;
"RTN","ICDTBL2E",125,0)
DRG251 S ICDRG=$S(ICDMCC=2:250,1:251) Q
"RTN","ICDTBL2E",126,0)
DRG252 ;
"RTN","ICDTBL2E",127,0)
DRG253 ;
"RTN","ICDTBL2E",128,0)
DRG254 S ICDRG=$S(ICDMCC=2:252,ICDMCC=1:253,1:254) Q
"RTN","ICDTBL2E",129,0)
DRG255 ;
"RTN","ICDTBL2E",130,0)
DRG256 ;
"RTN","ICDTBL2E",131,0)
DRG257 S ICDRG=$S(ICDMCC=2:255,ICDMCC=1:256,1:257) Q
"RTN","ICDTBL2E",132,0)
DRG258 ;I ICDOR["p" 
"RTN","ICDTBL2E",133,0)
DRG259 D CMS115 I "242^243^244^291^292^293"[ICDRG Q
"RTN","ICDTBL2E",134,0)
 S ICDRG=$S(ICDMCC=2:258,1:259) Q
"RTN","ICDTBL2E",135,0)
DRG260 ;
"RTN","ICDTBL2E",136,0)
 D CMS115 I "242^243^244^291^292^293"[ICDRG Q
"RTN","ICDTBL2E",137,0)
 D DRG258 I $D(ICDOP(" 00.56")) S ICDRG=264 Q
"RTN","ICDTBL2E",138,0)
 I ICDOR["p" S ICDRG=$S(ICDMCC=2:260,ICDMCC=1:261,1:262)
"RTN","ICDTBL2E",139,0)
 Q
"RTN","ICDTBL2E",140,0)
DRG261 D DRG260 Q
"RTN","ICDTBL2E",141,0)
DRG262 D DRG260 Q
"RTN","ICDTBL2E",142,0)
DRG263 S ICDRG=263 Q
"RTN","ICDTBL2E",143,0)
DRG264 S ICDRG=264 Q
"RTN","ICDTBL2E",144,0)
DRG265 S ICDRG=265 Q
"RTN","ICDTBL2E",145,0)
DRG280 ;
"RTN","ICDTBL2E",146,0)
DRG281 ;
"RTN","ICDTBL2E",147,0)
DRG282 I ICDPD="" S ICDRG=282
"RTN","ICDTBL2E",148,0)
 I ICDPD["I"&(ICDSD'["I") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2E",149,0)
 I ICDPD["I"&(ICDSD'["c") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2E",150,0)
 I ICDPD["I"&(ICDSD'["S") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2E",151,0)
 I ICDPD["c"&(ICDSD'["I") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2E",152,0)
 I ICDPD["c"&(ICDSD'["c") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2E",153,0)
 I ICDPD["c"&(ICDSD'["S") S ICDRG=$S(ICDMCC=2:280,ICDMCC=1:281,1:282) Q
"RTN","ICDTBL2E",154,0)
 S ICDRG=$S(ICDMCC=2&(ICDSD["H"):280,ICDMCC=1&(ICDSD["H"):281,1:282) Q
"RTN","ICDTBL2E",155,0)
DRG283 ;
"RTN","ICDTBL2E",156,0)
DRG284 ;
"RTN","ICDTBL2E",157,0)
DRG285 ;
"RTN","ICDTBL2E",158,0)
 I $D(ICDDXT("427.41"))&$D(ICDDXT("427.5")) S ICDMCC=1
"RTN","ICDTBL2E",159,0)
 S ICDRG=$S(ICDMCC=2:283,ICDMCC=1:284,1:285) Q
"RTN","ICDTBL2E",160,0)
DRG286 ;
"RTN","ICDTBL2E",161,0)
DRG287 I ICDMAJ'=""&(ICDMAJ'["A") D DRG982^ICDTBL9E Q
"RTN","ICDTBL2E",162,0)
 S ICDRG=$S(ICDMCC=2:286,1:287) Q
"RTN","ICDTBL2E",163,0)
DRG288 ;
"RTN","ICDTBL2E",164,0)
DRG289 ;
"RTN","ICDTBL2E",165,0)
DRG290 S ICDRG=$S(ICDMCC=2:288,ICDMCC=1:289,1:290) Q
"RTN","ICDTBL2E",166,0)
DRG291 ;
"RTN","ICDTBL2E",167,0)
DRG292 ;
"RTN","ICDTBL2E",168,0)
DRG293 I ICDOR["K" D DRG252 Q
"RTN","ICDTBL2E",169,0)
 I ICDOR["P" D DRG260 Q
"RTN","ICDTBL2E",170,0)
 I (ICDDX(1)=5458!$D(ICDDXT("785.51"))),'ICDEXP S ICDMCC=2
"RTN","ICDTBL2E",171,0)
 I (ICDDX(1)=2480&$D(ICDDXT("428.33"))) S ICDMCC=1
"RTN","ICDTBL2E",172,0)
 S ICDRG=$S(ICDMCC=2:291,ICDMCC=1:292,1:293) Q
"RTN","ICDTBL2E",173,0)
DRG294 ;
"RTN","ICDTBL2E",174,0)
DRG295 S ICDRG=$S(ICDMCC>0:294,1:295) Q
"RTN","ICDTBL2E",175,0)
DRG296 ;
"RTN","ICDTBL2E",176,0)
DRG297 ;
"RTN","ICDTBL2E",177,0)
DRG298 I (ICDDX(1)=2561!$D(ICDDXT(" 427.5"))),'ICDEXP S ICDMCC=2
"RTN","ICDTBL2E",178,0)
 S ICDRG=$S(ICDMCC=2:296,ICDMCC=1:297,1:298) Q
"RTN","ICDTBL2E",179,0)
DRG299 S ICDRG=$S(ICDMCC=2:299,ICDMCC=1:300,1:301) Q
"RTN","ICDTBL2E",180,0)
 Q
"RTN","ICDTBL2E",181,0)
CMS115 ;convert DRG115^ICDTBL2D code - no MS-DRG 115 existed
"RTN","ICDTBL2E",182,0)
 D EN1^ICDDRG5
"RTN","ICDTBL2E",183,0)
 I ICDOR[7 S ICDRG=$S(ICDMCC=2:260,ICDMCC=1:261,1:262) Q
"RTN","ICDTBL2E",184,0)
 I ICDPD'["I"&(ICDOR'["p")&(ICDCC2=0)&(ICDCC3=0) D  Q
"RTN","ICDTBL2E",185,0)
 .I ICDSD["Z" S ICDMCC=0
"RTN","ICDTBL2E",186,0)
 .S ICDRG=$S(ICDMCC=2:291,ICDMCC=1:292,1:293)
"RTN","ICDTBL2E",187,0)
 I ICDCC2=1!(ICDCC3=1) D DRG242
"RTN","ICDTBL2E",188,0)
 I ((ICDRG>241)&(ICDRG<245)) Q
"RTN","ICDTBL2E",189,0)
 ; ICDCC2 identifies AICD LEAD OR GNRTR
"RTN","ICDTBL2E",190,0)
 I ICDCC2=1!(ICDCC3=1) D  Q
"RTN","ICDTBL2E",191,0)
 . S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244) Q
"RTN","ICDTBL2E",192,0)
 I ICDOR["p" D  Q
"RTN","ICDTBL2E",193,0)
 . S ICDRG=$S(ICDMCC=2:242,ICDMCC=1:243,1:244) Q
"RTN","ICDTBL2E",194,0)
 Q
"RTN","ICDTBL2E",195,0)
CMS516 ;convert DRG516^ICDTBL6D code - no MS-DRG 516 exists
"RTN","ICDTBL2E",196,0)
 I $D(ICDOP(" 37.72")),$D(ICDOP(" 37.83")),"242^243^244"[ICDRG Q
"RTN","ICDTBL2E",197,0)
 S ICDRG=250
"RTN","ICDTBL2E",198,0)
 I '$D(ICDOP(" 36.06"))&'$D(ICDOP(" 92.27"))&'$D(ICDOP(" 36.07")) D DRG251
"RTN","ICDTBL2E",199,0)
 E  D DRG248
"RTN","ICDTBL2E",200,0)
 ;I $D(ICDOP(" 36.06"))!$D(ICDOP(" 92.27")) D DRG249
"RTN","ICDTBL2E",201,0)
 I $D(ICDOP(" 36.07")) D DRG246
"RTN","ICDTBL2E",202,0)
 Q
"RTN","ICDTBL2E",203,0)
MCV ; checks to see if case qualifies as an MCV (major cardiovascular complications or complex conditions)
"RTN","ICDTBL2E",204,0)
 S (ICDMCV,ICDMCV1,ICDMCV2)=0
"RTN","ICDTBL2E",205,0)
 ; ICDPD=identifier for prime dx  ICDSD=identifier for any secondary dx
"RTN","ICDTBL2E",206,0)
 ; DGDX(1)=prime dx  ICDDX(1)=ien of prime dx ICDDXT=any secondary dx  
"RTN","ICDTBL2E",207,0)
 I ICDPD["c"!(ICDSD["c") S ICDMCV=1
"RTN","ICDTBL2E",208,0)
 I ICDSD["s" S ICDMCV=1
"RTN","ICDTBL2E",209,0)
 ;I DGDX(1)["426.0"!(DGDX(1)["426.53")!(DGDX(1)["426.54") S ICDMCV1=1
"RTN","ICDTBL2E",210,0)
 I $G(ICDDX(1))=9056!($G(ICDDX(1))=2548)!($G(ICDDX(1))=2549) S ICDMCV1=1
"RTN","ICDTBL2E",211,0)
 I $D(ICDDXT("426.0"))!($D(ICDDXT("426.53")))!($D(ICDDXT("426.54"))) S ICDMCV1=1
"RTN","ICDTBL2E",212,0)
 ;I DGDX(1)["411.1"!(DGDX(1)["411.81") S ICDMCV2=1
"RTN","ICDTBL2E",213,0)
 I $G(ICDDX(1))=2500!($G(ICDDX(1))=12477) S ICDMCV2=1
"RTN","ICDTBL2E",214,0)
 I $D(ICDDXT("411.1"))!($D(ICDDXT("411.81"))) S ICDMCV2=1
"RTN","ICDTBL2E",215,0)
 Q
"RTN","ICDTBL8A")
0^32^B25027347^B24430641
"RTN","ICDTBL8A",1,0)
ICDTBL8A ;ALB/EG/MRY/KUM - GROUPER UTILITY FUNCTIONS ;22 Mar 2013  6:07 PM
"RTN","ICDTBL8A",2,0)
 ;;18.0;DRG Grouper;**37,34,43,45,46,49,64**;Oct 20, 2000;Build 103
"RTN","ICDTBL8A",3,0)
 ;
"RTN","ICDTBL8A",4,0)
DRG800 ;
"RTN","ICDTBL8A",5,0)
DRG801 S ICDRG=$S(ICDMCC=2:799,ICDMCC=1:800,1:801) Q
"RTN","ICDTBL8A",6,0)
DRG802 ;
"RTN","ICDTBL8A",7,0)
DRG803 ;
"RTN","ICDTBL8A",8,0)
DRG804 S ICDRG=$S(ICDMCC=2:802,ICDMCC=1:803,1:804) Q
"RTN","ICDTBL8A",9,0)
DRG808 ;
"RTN","ICDTBL8A",10,0)
DRG809 ;
"RTN","ICDTBL8A",11,0)
DRG810 S ICDRG=$S(ICDMCC=2:808,ICDMCC=1:809,1:810) Q
"RTN","ICDTBL8A",12,0)
DRG811 ;
"RTN","ICDTBL8A",13,0)
DRG812 S ICDRG=$S(ICDMCC=2:811,1:812) Q
"RTN","ICDTBL8A",14,0)
DRG813 S ICDRG=813 Q
"RTN","ICDTBL8A",15,0)
DRG814 ;
"RTN","ICDTBL8A",16,0)
DRG815 ;
"RTN","ICDTBL8A",17,0)
DRG816 S ICDRG=$S(ICDMCC=2:814,ICDMCC=1:815,1:816) Q
"RTN","ICDTBL8A",18,0)
DRG820 ;DRG 20-22
"RTN","ICDTBL8A",19,0)
 ;removed check I ICDPD["L"&('$G(ICDMAJ))
"RTN","ICDTBL8A",20,0)
 I ICDPD["L"&('$G(ICDMAJ)) D DRG825 Q:"823^824^825^840^841^842^834^835^836"[ICDRG
"RTN","ICDTBL8A",21,0)
 ;removed check I ICDPD["L"
"RTN","ICDTBL8A",22,0)
 I ICDPD["L"&($G(ICDMAJ)) D  Q
"RTN","ICDTBL8A",23,0)
 .S ICDRG=$S(ICDMCC=2:820,ICDMCC=1:821,1:822)
"RTN","ICDTBL8A",24,0)
 S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828)
"RTN","ICDTBL8A",25,0)
 Q
"RTN","ICDTBL8A",26,0)
DRG821 D DRG820 Q
"RTN","ICDTBL8A",27,0)
DRG822 D DRG820 Q
"RTN","ICDTBL8A",28,0)
DRG823 ;DRGs 823-825
"RTN","ICDTBL8A",29,0)
 S ICDRG=$S(ICDPD["l":836,ICDOR["O"!(ICDORNI["O"):825,1:842)
"RTN","ICDTBL8A",30,0)
 I ICDRG=836 S ICDRG=$S(ICDMCC=2:834,ICDMCC=1:835,1:836) Q
"RTN","ICDTBL8A",31,0)
 I ICDRG=825 S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825) Q
"RTN","ICDTBL8A",32,0)
 I ICDRG=842 D  Q
"RTN","ICDTBL8A",33,0)
 .I ICDPD["L"&($D(ICDOP(" 92.30"))!$D(ICDOP(" 92.31"))!$D(ICDOP(" 92.32"))!$D(ICDOP(" 92.33"))!$D(ICDOP(" 92.39"))) S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825) Q
"RTN","ICDTBL8A",34,0)
 .I $D(ICDOP(" 92.30"))!$D(ICDOP(" 92.31"))!$D(ICDOP(" 92.32"))!$D(ICDOP(" 92.33"))!$D(ICDOP(" 92.39")) S ICDRG=$S(ICDMCC>0:829,1:830) Q
"RTN","ICDTBL8A",35,0)
 .S ICDRG=$S(ICDMCC=2:840,ICDMCC=1:841,1:842)
"RTN","ICDTBL8A",36,0)
 Q
"RTN","ICDTBL8A",37,0)
DRG824 D DRG823 Q
"RTN","ICDTBL8A",38,0)
DRG825 D DRG823 Q
"RTN","ICDTBL8A",39,0)
DRG826 ;DRGs 826-828
"RTN","ICDTBL8A",40,0)
 I $G(ICDMAJ)="^"!'($G(ICDMAJ)) D DRG829 Q
"RTN","ICDTBL8A",41,0)
 I ICDOCNT>0!(ICDOR["O") D  Q 
"RTN","ICDTBL8A",42,0)
 .S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828) Q
"RTN","ICDTBL8A",43,0)
 S ICDRG=$S(ICDMCC=2:843,ICDMCC=1:844,1:845)
"RTN","ICDTBL8A",44,0)
 Q
"RTN","ICDTBL8A",45,0)
DRG827 ;
"RTN","ICDTBL8A",46,0)
DRG828 ;S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828) Q
"RTN","ICDTBL8A",47,0)
DRG829 I ICDPD["L"!($G(ICDMAJ)) D DRG826 Q
"RTN","ICDTBL8A",48,0)
 I ICDSD["l" D DRG837 Q
"RTN","ICDTBL8A",49,0)
 I ICDSD'["l"&(ICDOR'["O") D DRG846 Q
"RTN","ICDTBL8A",50,0)
DRG830 S ICDRG=$S(ICDMCC>0:829,1:830) Q
"RTN","ICDTBL8A",51,0)
DRG834 ;DRGs 834-836
"RTN","ICDTBL8A",52,0)
DRG835 ;
"RTN","ICDTBL8A",53,0)
DRG836 D DRG840 Q
"RTN","ICDTBL8A",54,0)
DRG837 ;DRGs 837-839
"RTN","ICDTBL8A",55,0)
DRG838 ;
"RTN","ICDTBL8A",56,0)
DRG839 I ICDSD["l",ICDMCC=2 S ICDRG=837 Q
"RTN","ICDTBL8A",57,0)
 I ICDSD["l"&(ICDSD["2") S ICDRG=$S(ICDMCC=2:837,ICDMCC=1:838,1:839)
"RTN","ICDTBL8A",58,0)
 I ICDSD'["l",$D(ICDOP(" 00.15")),ICDMCC=2 S ICDRG=837 Q
"RTN","ICDTBL8A",59,0)
 I ICDSD["l",'$D(ICDOP(" 00.15")),ICDMCC=1 S ICDRG=838 Q
"RTN","ICDTBL8A",60,0)
 I ICDSD'["l",$D(ICDOP(" 00.15")) S ICDRG=838 Q
"RTN","ICDTBL8A",61,0)
 I ICDSD["l",'$D(ICDOP(" 00.15")) S ICDRG=839 Q
"RTN","ICDTBL8A",62,0)
 I ICDSD'["l"&(ICDOR'["O") D DRG846 Q
"RTN","ICDTBL8A",63,0)
 D DRG846 Q
"RTN","ICDTBL8A",64,0)
DRG840 ;DRGs 840-842
"RTN","ICDTBL8A",65,0)
 S ICDRG=$S(ICDPD["l":836,ICDOR["O"!ICDORNI["O":825,1:842)
"RTN","ICDTBL8A",66,0)
 I ICDRG=836 S ICDRG=$S(ICDMCC=2:834,ICDMCC=1:835,1:836) Q
"RTN","ICDTBL8A",67,0)
 I ICDRG=825 S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825) Q
"RTN","ICDTBL8A",68,0)
 S ICDRG=$S(ICDMCC=2:840,ICDMCC=1:841,1:842)
"RTN","ICDTBL8A",69,0)
 Q
"RTN","ICDTBL8A",70,0)
DRG841 D DRG840 Q
"RTN","ICDTBL8A",71,0)
DRG842 D DRG840 Q
"RTN","ICDTBL8A",72,0)
DRG843 ;
"RTN","ICDTBL8A",73,0)
DRG844 ;
"RTN","ICDTBL8A",74,0)
DRG845 I ICDPD["L"  D DRG840 Q
"RTN","ICDTBL8A",75,0)
 ; Replaced direct global reads with $$CODEBA^ICDEX
"RTN","ICDTBL8A",76,0)
 I ICDDX(1)=$$CODEBA^ICDEX("V58.0",80) S ICDRG=849 Q
"RTN","ICDTBL8A",77,0)
 I ICDDX(1)=$$CODEBA^ICDEX("V67.1",80) S ICDRG=849 Q
"RTN","ICDTBL8A",78,0)
 I $D(ICDDX(1))&(ICDOPCT=0) D
"RTN","ICDTBL8A",79,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.11",80)!(ICDDX(1)=$$CODEBA^ICDEX("V58.12",80))!(ICDDX(1)=$$CODEBA^ICDEX("V67.2",80)) D
"RTN","ICDTBL8A",80,0)
 ..I ICDSD["2" D DRG837 Q
"RTN","ICDTBL8A",81,0)
 ..I ICDSD'["2" D DRG846 Q
"RTN","ICDTBL8A",82,0)
 I ICDPD["L" D DRG820 Q
"RTN","ICDTBL8A",83,0)
 I ICDOR["N"&($D(ICDPDRG(844))) S ICDRG=844 Q
"RTN","ICDTBL8A",84,0)
 S ICDRG=$S(ICDMCC=2:843,ICDMCC=1:844,1:845) Q
"RTN","ICDTBL8A",85,0)
 Q
"RTN","ICDTBL8A",86,0)
DRG846 ;
"RTN","ICDTBL8A",87,0)
DRG847 ;
"RTN","ICDTBL8A",88,0)
DRG848 I ICDDX(1)=$$CODEBA^ICDEX("V58.11",80)!(ICDDX(1)=$$CODEBA^ICDEX("V58.12",80))!(ICDDX(1)=$$CODEBA^ICDEX("V67.2",80)) S ICDRG=$S(ICDMCC=2:846,ICDMCC=1:847,1:848) Q
"RTN","ICDTBL8A",89,0)
 D DRG844 Q
"RTN","ICDTBL8A",90,0)
DRG849 I ICDDX(1)=$$CODEBA^ICDEX("V58.0",80) S ICDRG=849 Q 
"RTN","ICDTBL8A",91,0)
 I ICDDX(1)=$$CODEBA^ICDEX("V67.1",80) S ICDRG=849 Q
"RTN","ICDTBL8A",92,0)
 D DRG844 Q
"RTN","ICDTBL8A",93,0)
DRG853 ;
"RTN","ICDTBL8A",94,0)
DRG854 ;
"RTN","ICDTBL8A",95,0)
DRG855  I ICDOR="" D DRG862 Q
"RTN","ICDTBL8A",96,0)
 I ICDOR["O" S ICDRG=$S(ICDMCC=2:853,ICDMCC=1:854,1:855) Q
"RTN","ICDTBL8A",97,0)
 I ICDDX(1)=7322 D DRG856 Q
"RTN","ICDTBL8A",98,0)
 I ICDDX(1)=13271 D DRG856 Q
"RTN","ICDTBL8A",99,0)
 I ICDDX(1)=13272 D DRG856 Q
"RTN","ICDTBL8A",100,0)
 I ICDDX(1)=14543 D DRG856 Q
"RTN","ICDTBL8A",101,0)
 Q
"RTN","ICDTBL8A",102,0)
DRG856 ;
"RTN","ICDTBL8A",103,0)
DRG857 ;
"RTN","ICDTBL8A",104,0)
DRG858 I ICDOR'["O" D DRG862 Q
"RTN","ICDTBL8A",105,0)
 I ICDOR["O" S ICDRG=$S(ICDMCC=2:856,ICDMCC=1:857,1:858) Q
"RTN","ICDTBL8A",106,0)
 Q
"RTN","ICDTBL8A",107,0)
DRG862 ;
"RTN","ICDTBL8A",108,0)
DRG863 S ICDRG=$S(ICDMCC=2:862,1:863) Q
"RTN","ICDTBL8A",109,0)
DRG864 S ICDRG=864  Q
"RTN","ICDTBL8A",110,0)
DRG865 ;
"RTN","ICDTBL8A",111,0)
DRG866 ;
"RTN","ICDTBL8A",112,0)
       S ICDRG=$S(ICDMCC=2:865,1:866) Q
"RTN","ICDTBL8A",113,0)
DRG867 ;
"RTN","ICDTBL8A",114,0)
DRG868 ;
"RTN","ICDTBL8A",115,0)
DRG869 S ICDRG=$S(ICDMCC=2:867,ICDMCC=1:868,1:869) Q
"RTN","ICDTBL8A",116,0)
DRG870 ;DRGs 870-872
"RTN","ICDTBL8A",117,0)
 S ICDRG=$S(ICDOR["O":855,1:872) I ICDRG=872&($D(ICDOP(" 96.72"))) S ICDRG=870
"RTN","ICDTBL8A",118,0)
 I ICDRG=855 S ICDRG=$S(ICDMCC=2:853,ICDMCC=1:854,1:855) Q
"RTN","ICDTBL8A",119,0)
 I ICDRG=872 S ICDRG=$S(ICDMCC=2:871,1:872) Q
"RTN","ICDTBL8A",120,0)
 Q
"RTN","ICDTBL8A",121,0)
DRG871 D DRG870 Q
"RTN","ICDTBL8A",122,0)
DRG872 D DRG870 Q
"RTN","ICDTBL8A",123,0)
DRG876 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8A",124,0)
 Q
"RTN","ICDTBL8A",125,0)
DRG880 S ICDRG=880 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8A",126,0)
 Q
"RTN","ICDTBL8A",127,0)
DRG881 S ICDRG=881 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8A",128,0)
 Q
"RTN","ICDTBL8A",129,0)
DRG882 S ICDRG=882 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8A",130,0)
 Q
"RTN","ICDTBL8A",131,0)
DRG883 S ICDRG=883 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8A",132,0)
 Q
"RTN","ICDTBL8A",133,0)
DRG884 S ICDRG=884 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8A",134,0)
 Q
"RTN","ICDTBL8A",135,0)
DRG885 S ICDRG=885 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8A",136,0)
 Q
"RTN","ICDTBL8A",137,0)
DRG886 S ICDRG=886 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8A",138,0)
 Q
"RTN","ICDTBL8A",139,0)
DRG887 S ICDRG=887 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8A",140,0)
 Q
"RTN","ICDTBL8A",141,0)
DRG894 S ICDRG=894 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8A",142,0)
 Q
"RTN","ICDTBL8A",143,0)
DRG895 I (ICDOR["ND")!(ICDOR["NR") S ICDRG=895 Q
"RTN","ICDTBL8A",144,0)
 I ICDOR["O" S ICDRG=983 Q
"RTN","ICDTBL8A",145,0)
DRG896 ;
"RTN","ICDTBL8A",146,0)
DRG897 S ICDRG=$S(ICDMCC=2:896,1:897) Q
"RTN","ICDTBL8A",147,0)
 Q
"RTN","ICDTBL8B")
0^33^B25669193^B25187689
"RTN","ICDTBL8B",1,0)
ICDTBL8B ;ALB/EG/MRY/KUM - GROUPER UTILITY FUNCTIONS ;22 Mar 2013  6:04 PM
"RTN","ICDTBL8B",2,0)
 ;;18.0;DRG Grouper;**45,46,49,54,64**;Oct 20, 2000;Build 103
"RTN","ICDTBL8B",3,0)
 ;
"RTN","ICDTBL8B",4,0)
DRG800 ;
"RTN","ICDTBL8B",5,0)
DRG801 S ICDRG=$S(ICDMCC=2:799,ICDMCC=1:800,1:801) Q
"RTN","ICDTBL8B",6,0)
DRG802 ;
"RTN","ICDTBL8B",7,0)
DRG803 ;
"RTN","ICDTBL8B",8,0)
DRG804 S ICDRG=$S(ICDMCC=2:802,ICDMCC=1:803,1:804) Q
"RTN","ICDTBL8B",9,0)
DRG808 ;
"RTN","ICDTBL8B",10,0)
DRG809 ;
"RTN","ICDTBL8B",11,0)
DRG810 S ICDRG=$S(ICDMCC=2:808,ICDMCC=1:809,1:810) Q
"RTN","ICDTBL8B",12,0)
DRG811 ;
"RTN","ICDTBL8B",13,0)
DRG812 S ICDRG=$S(ICDMCC=2:811,1:812) Q
"RTN","ICDTBL8B",14,0)
DRG813 S ICDRG=813 Q
"RTN","ICDTBL8B",15,0)
DRG814 ;
"RTN","ICDTBL8B",16,0)
DRG815 ;
"RTN","ICDTBL8B",17,0)
DRG816 S ICDRG=$S(ICDMCC=2:814,ICDMCC=1:815,1:816) Q
"RTN","ICDTBL8B",18,0)
DRG820 ;DRG 20-22
"RTN","ICDTBL8B",19,0)
 ;removed check I ICDPD["L"&('$G(ICDMAJ))
"RTN","ICDTBL8B",20,0)
 I ICDPD["L"&('$G(ICDMAJ)) D DRG825 Q:"823^824^825^840^841^842^834^835^836"[ICDRG
"RTN","ICDTBL8B",21,0)
 ;removed check I ICDPD["L"
"RTN","ICDTBL8B",22,0)
 I ICDPD["L"&($G(ICDMAJ)) D  Q
"RTN","ICDTBL8B",23,0)
 .S ICDRG=$S(ICDMCC=2:820,ICDMCC=1:821,1:822)
"RTN","ICDTBL8B",24,0)
 S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828)
"RTN","ICDTBL8B",25,0)
 Q
"RTN","ICDTBL8B",26,0)
DRG821 D DRG820 Q
"RTN","ICDTBL8B",27,0)
DRG822 D DRG820 Q
"RTN","ICDTBL8B",28,0)
DRG823 ;DRGs 823-825
"RTN","ICDTBL8B",29,0)
 S ICDRG=$S(ICDPD["l":836,ICDOR["O"!(ICDORNI["O"):825,1:842)
"RTN","ICDTBL8B",30,0)
 I ICDRG=836 S ICDRG=$S(ICDMCC=2:834,ICDMCC=1:835,1:836) Q
"RTN","ICDTBL8B",31,0)
 I ICDRG=825 S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825) Q
"RTN","ICDTBL8B",32,0)
 I ICDRG=842 D  Q
"RTN","ICDTBL8B",33,0)
 .I ICDPD["L"&($D(ICDOP(" 92.30"))!$D(ICDOP(" 92.31"))!$D(ICDOP(" 92.32"))!$D(ICDOP(" 92.33"))!$D(ICDOP(" 92.39"))) S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825) Q
"RTN","ICDTBL8B",34,0)
 .I $D(ICDOP(" 92.30"))!$D(ICDOP(" 92.31"))!$D(ICDOP(" 92.32"))!$D(ICDOP(" 92.33"))!$D(ICDOP(" 92.39")) S ICDRG=$S(ICDMCC>0:829,1:830) Q
"RTN","ICDTBL8B",35,0)
 .S ICDRG=$S(ICDMCC=2:840,ICDMCC=1:841,1:842)
"RTN","ICDTBL8B",36,0)
 Q
"RTN","ICDTBL8B",37,0)
DRG824 D DRG823 Q
"RTN","ICDTBL8B",38,0)
DRG825 D DRG823 Q
"RTN","ICDTBL8B",39,0)
DRG826 ;DRGs 826-828
"RTN","ICDTBL8B",40,0)
 I $G(ICDMAJ)="^"!'($G(ICDMAJ)) D DRG829 Q
"RTN","ICDTBL8B",41,0)
 I ICDOCNT>0!(ICDOR["O") D  Q 
"RTN","ICDTBL8B",42,0)
 .S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828) Q
"RTN","ICDTBL8B",43,0)
 S ICDRG=$S(ICDMCC=2:843,ICDMCC=1:844,1:845)
"RTN","ICDTBL8B",44,0)
 Q
"RTN","ICDTBL8B",45,0)
DRG827 ;
"RTN","ICDTBL8B",46,0)
DRG828 ;S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828) Q
"RTN","ICDTBL8B",47,0)
DRG829 I ICDPD["L"!($G(ICDMAJ)) D DRG826 Q
"RTN","ICDTBL8B",48,0)
 I ICDSD["l" D DRG837 Q
"RTN","ICDTBL8B",49,0)
 I ICDSD'["l"&(ICDOR'["O") D DRG846 Q
"RTN","ICDTBL8B",50,0)
DRG830 S ICDRG=$S(ICDMCC>0:829,1:830) Q
"RTN","ICDTBL8B",51,0)
DRG834 ;DRGs 834-836
"RTN","ICDTBL8B",52,0)
DRG835 ;
"RTN","ICDTBL8B",53,0)
DRG836 D DRG840 Q
"RTN","ICDTBL8B",54,0)
DRG837 ;DRGs 837-839
"RTN","ICDTBL8B",55,0)
DRG838 ;
"RTN","ICDTBL8B",56,0)
DRG839 I ICDSD["l",ICDMCC=2 S ICDRG=837 Q
"RTN","ICDTBL8B",57,0)
 I ICDSD["l"&(ICDSD["2") S ICDRG=$S(ICDMCC=2:837,ICDMCC=1:838,1:839)
"RTN","ICDTBL8B",58,0)
 I ICDSD'["l",$D(ICDOP(" 00.15")),ICDMCC=2 S ICDRG=837 Q
"RTN","ICDTBL8B",59,0)
 I ICDSD["l",'$D(ICDOP(" 00.15")),ICDMCC=1 S ICDRG=838 Q
"RTN","ICDTBL8B",60,0)
 I ICDSD'["l",$D(ICDOP(" 00.15")) S ICDRG=838 Q
"RTN","ICDTBL8B",61,0)
 I ICDSD["l",'$D(ICDOP(" 00.15")) S ICDRG=839 Q
"RTN","ICDTBL8B",62,0)
 I ICDSD'["l"&(ICDOR'["O") D DRG846 Q
"RTN","ICDTBL8B",63,0)
 D DRG846 Q
"RTN","ICDTBL8B",64,0)
DRG840 ;DRGs 840-842
"RTN","ICDTBL8B",65,0)
 S ICDRG=$S(ICDPD["l":836,ICDOR["O"!ICDORNI["O":825,1:842)
"RTN","ICDTBL8B",66,0)
 I ICDRG=836 S ICDRG=$S(ICDMCC=2:834,ICDMCC=1:835,1:836) Q
"RTN","ICDTBL8B",67,0)
 I ICDRG=825 S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825) Q
"RTN","ICDTBL8B",68,0)
 S ICDRG=$S(ICDMCC=2:840,ICDMCC=1:841,1:842)
"RTN","ICDTBL8B",69,0)
 Q
"RTN","ICDTBL8B",70,0)
DRG841 D DRG840 Q
"RTN","ICDTBL8B",71,0)
DRG842 D DRG840 Q
"RTN","ICDTBL8B",72,0)
DRG843 ;
"RTN","ICDTBL8B",73,0)
DRG844 ;
"RTN","ICDTBL8B",74,0)
DRG845 I ICDPD["L"  D DRG840 Q
"RTN","ICDTBL8B",75,0)
 I ICDDX(1)=$$CODEBA^ICDEX("V58.0",80) S ICDRG=849 Q
"RTN","ICDTBL8B",76,0)
 I ICDDX(1)=$$CODEBA^ICDEX("V67.1",80) S ICDRG=849 Q
"RTN","ICDTBL8B",77,0)
 I $D(ICDDX(1))&(ICDOPCT=0) D
"RTN","ICDTBL8B",78,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.11",80)!(ICDDX(1)=$$CODEBA^ICDEX("V58.12",80))!(ICDDX(1)=$$CODEBA^ICDEX("V67.2",80)) D
"RTN","ICDTBL8B",79,0)
 ..I ICDSD["2" D DRG837 Q
"RTN","ICDTBL8B",80,0)
 ..I ICDSD'["2" D DRG846 Q
"RTN","ICDTBL8B",81,0)
 I ICDPD["L" D DRG820 Q
"RTN","ICDTBL8B",82,0)
 I ICDOR["N"&($D(ICDPDRG(844))) S ICDRG=844 Q
"RTN","ICDTBL8B",83,0)
 S ICDRG=$S(ICDMCC=2:843,ICDMCC=1:844,1:845) Q
"RTN","ICDTBL8B",84,0)
 Q
"RTN","ICDTBL8B",85,0)
DRG846 ;
"RTN","ICDTBL8B",86,0)
DRG847 ;
"RTN","ICDTBL8B",87,0)
DRG848 I ICDDX(1)=$$CODEBA^ICDEX("V58.11",80)!(ICDDX(1)=$$CODEBA^ICDEX("V58.12",80))!(ICDDX(1)=$$CODEBA^ICDEX("V67.2",80)) S ICDRG=$S(ICDMCC=2:846,ICDMCC=1:847,1:848) Q
"RTN","ICDTBL8B",88,0)
 D DRG844 Q
"RTN","ICDTBL8B",89,0)
DRG849 I ICDDX(1)=$$CODEBA^ICDEX("V58.0",80) S ICDRG=849 Q 
"RTN","ICDTBL8B",90,0)
 I ICDDX(1)=$$CODEBA^ICDEX("V67.1",80) S ICDRG=849 Q
"RTN","ICDTBL8B",91,0)
 D DRG844 Q
"RTN","ICDTBL8B",92,0)
DRG853 ;
"RTN","ICDTBL8B",93,0)
DRG854 ;
"RTN","ICDTBL8B",94,0)
DRG855  I ICDOR="" D DRG862 Q
"RTN","ICDTBL8B",95,0)
 I ICDOR["O" S ICDRG=$S(ICDMCC=2:853,ICDMCC=1:854,1:855) Q
"RTN","ICDTBL8B",96,0)
 I ICDDX(1)=7322 D DRG856 Q
"RTN","ICDTBL8B",97,0)
 I ICDDX(1)=13271 D DRG856 Q
"RTN","ICDTBL8B",98,0)
 I ICDDX(1)=13272 D DRG856 Q
"RTN","ICDTBL8B",99,0)
 I ICDDX(1)=14543 D DRG856 Q
"RTN","ICDTBL8B",100,0)
 Q
"RTN","ICDTBL8B",101,0)
DRG856 ;
"RTN","ICDTBL8B",102,0)
DRG857 ;
"RTN","ICDTBL8B",103,0)
DRG858 I ICDOR'["O" D DRG862 Q
"RTN","ICDTBL8B",104,0)
 I ICDOR["O" S ICDRG=$S(ICDMCC=2:856,ICDMCC=1:857,1:858) Q
"RTN","ICDTBL8B",105,0)
 Q
"RTN","ICDTBL8B",106,0)
DRG862 ;
"RTN","ICDTBL8B",107,0)
DRG863 I ICDDX(1)'=7322 D DRG867 Q
"RTN","ICDTBL8B",108,0)
 I ICDDX(1)'=13271 D DRG867 Q
"RTN","ICDTBL8B",109,0)
 I ICDDX(1)'=13272 D DRG867 Q
"RTN","ICDTBL8B",110,0)
 S ICDRG=$S(ICDMCC=2:862,1:863) Q
"RTN","ICDTBL8B",111,0)
DRG864 S ICDRG=864  Q
"RTN","ICDTBL8B",112,0)
DRG865 ;
"RTN","ICDTBL8B",113,0)
DRG866 ;
"RTN","ICDTBL8B",114,0)
       S ICDRG=$S(ICDMCC=2:865,1:866) Q
"RTN","ICDTBL8B",115,0)
DRG867 ;
"RTN","ICDTBL8B",116,0)
DRG868 ;
"RTN","ICDTBL8B",117,0)
DRG869 S ICDRG=$S(ICDMCC=2:867,ICDMCC=1:868,1:869) Q
"RTN","ICDTBL8B",118,0)
DRG870 ;DRGs 870-872
"RTN","ICDTBL8B",119,0)
 S ICDRG=$S(ICDOR["O":855,1:872) I ICDRG=872&($D(ICDOP(" 96.72"))) S ICDRG=870
"RTN","ICDTBL8B",120,0)
 I ICDRG=855 S ICDRG=$S(ICDMCC=2:853,ICDMCC=1:854,1:855) Q
"RTN","ICDTBL8B",121,0)
 I ICDRG=872 S ICDRG=$S(ICDMCC=2:871,1:872) Q
"RTN","ICDTBL8B",122,0)
 Q
"RTN","ICDTBL8B",123,0)
DRG871 D DRG870 Q
"RTN","ICDTBL8B",124,0)
DRG872 D DRG870 Q
"RTN","ICDTBL8B",125,0)
DRG876 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8B",126,0)
 Q
"RTN","ICDTBL8B",127,0)
DRG880 S ICDRG=880 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8B",128,0)
 Q
"RTN","ICDTBL8B",129,0)
DRG881 S ICDRG=881 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8B",130,0)
 Q
"RTN","ICDTBL8B",131,0)
DRG882 S ICDRG=882 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8B",132,0)
 Q
"RTN","ICDTBL8B",133,0)
DRG883 S ICDRG=883 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8B",134,0)
 Q
"RTN","ICDTBL8B",135,0)
DRG884 S ICDRG=884 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8B",136,0)
 Q
"RTN","ICDTBL8B",137,0)
DRG885 S ICDRG=885 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8B",138,0)
 Q
"RTN","ICDTBL8B",139,0)
DRG886 S ICDRG=886 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8B",140,0)
 Q
"RTN","ICDTBL8B",141,0)
DRG887 S ICDRG=887 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8B",142,0)
 Q
"RTN","ICDTBL8B",143,0)
DRG894 S ICDRG=894 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8B",144,0)
 Q
"RTN","ICDTBL8B",145,0)
DRG895 I (ICDOR["ND")!(ICDOR["NR") S ICDRG=895 Q
"RTN","ICDTBL8B",146,0)
 I ICDOR["O" S ICDRG=983 Q
"RTN","ICDTBL8B",147,0)
DRG896 ;
"RTN","ICDTBL8B",148,0)
DRG897 S ICDRG=$S(ICDMCC=2:896,1:897) Q
"RTN","ICDTBL8B",149,0)
 Q
"RTN","ICDTBL8C")
0^34^B25174597^B24982928
"RTN","ICDTBL8C",1,0)
ICDTBL8C ;ALB/MJB/KUM - GROUPER UTILITY FUNCTIONS;08/09/2010
"RTN","ICDTBL8C",2,0)
 ;;18.0;DRG Grouper;**50,49,54,61,64**;Oct 20, 2000;Build 103
"RTN","ICDTBL8C",3,0)
DRG800 ;
"RTN","ICDTBL8C",4,0)
DRG801 S ICDRG=$S(ICDMCC=2:799,ICDMCC=1:800,1:801) Q
"RTN","ICDTBL8C",5,0)
DRG802 ;
"RTN","ICDTBL8C",6,0)
DRG803 ;
"RTN","ICDTBL8C",7,0)
DRG804 S ICDRG=$S(ICDMCC=2:802,ICDMCC=1:803,1:804) Q
"RTN","ICDTBL8C",8,0)
DRG808 ;
"RTN","ICDTBL8C",9,0)
DRG809 ;
"RTN","ICDTBL8C",10,0)
DRG810 S ICDRG=$S(ICDMCC=2:808,ICDMCC=1:809,1:810) Q
"RTN","ICDTBL8C",11,0)
DRG811 ;
"RTN","ICDTBL8C",12,0)
DRG812 S ICDRG=$S(ICDMCC=2:811,1:812) Q
"RTN","ICDTBL8C",13,0)
DRG813 S ICDRG=813 Q
"RTN","ICDTBL8C",14,0)
DRG814 ;
"RTN","ICDTBL8C",15,0)
DRG815 ;
"RTN","ICDTBL8C",16,0)
DRG816 S ICDRG=$S(ICDMCC=2:814,ICDMCC=1:815,1:816) Q
"RTN","ICDTBL8C",17,0)
DRG820 ;DRG 20-22
"RTN","ICDTBL8C",18,0)
 ;removed check I ICDPD["L"&('$G(ICDMAJ))
"RTN","ICDTBL8C",19,0)
 I ICDPD["L"&('$G(ICDMAJ)) D DRG825 Q:"823^824^825^840^841^842^834^835^836"[ICDRG
"RTN","ICDTBL8C",20,0)
 ;removed check I ICDPD["L"
"RTN","ICDTBL8C",21,0)
 I ICDPD["L"&($G(ICDMAJ)) D  Q
"RTN","ICDTBL8C",22,0)
 .S ICDRG=$S(ICDMCC=2:820,ICDMCC=1:821,1:822)
"RTN","ICDTBL8C",23,0)
 S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828)
"RTN","ICDTBL8C",24,0)
 Q
"RTN","ICDTBL8C",25,0)
DRG821 D DRG820 Q
"RTN","ICDTBL8C",26,0)
DRG822 D DRG820 Q
"RTN","ICDTBL8C",27,0)
DRG823 ;DRGs 823-825
"RTN","ICDTBL8C",28,0)
 S ICDRG=$S(ICDPD["l":836,ICDOR["O"!(ICDORNI["O"):825,1:842)
"RTN","ICDTBL8C",29,0)
 I ICDRG=836 S ICDRG=$S(ICDMCC=2:834,ICDMCC=1:835,1:836) Q
"RTN","ICDTBL8C",30,0)
 I ICDRG=825 S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825) Q
"RTN","ICDTBL8C",31,0)
 I ICDRG=842 D  Q
"RTN","ICDTBL8C",32,0)
 .I ICDPD["L"&($D(ICDOP(" 92.30"))!$D(ICDOP(" 92.31"))!$D(ICDOP(" 92.32"))!$D(ICDOP(" 92.33"))!$D(ICDOP(" 92.39"))) S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825) Q
"RTN","ICDTBL8C",33,0)
 .I $D(ICDOP(" 92.30"))!$D(ICDOP(" 92.31"))!$D(ICDOP(" 92.32"))!$D(ICDOP(" 92.33"))!$D(ICDOP(" 92.39")) S ICDRG=$S(ICDMCC>0:829,1:830) Q
"RTN","ICDTBL8C",34,0)
 .S ICDRG=$S(ICDMCC=2:840,ICDMCC=1:841,1:842)
"RTN","ICDTBL8C",35,0)
 Q
"RTN","ICDTBL8C",36,0)
DRG824 D DRG823 Q
"RTN","ICDTBL8C",37,0)
DRG825 D DRG823 Q
"RTN","ICDTBL8C",38,0)
DRG826 ;DRGs 826-828
"RTN","ICDTBL8C",39,0)
 I $G(ICDMAJ)="^"!'($G(ICDMAJ)) D DRG829 Q
"RTN","ICDTBL8C",40,0)
 I ICDOCNT>0!(ICDOR["O") D  Q 
"RTN","ICDTBL8C",41,0)
 .S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828) Q
"RTN","ICDTBL8C",42,0)
 S ICDRG=$S(ICDMCC=2:843,ICDMCC=1:844,1:845)
"RTN","ICDTBL8C",43,0)
 Q
"RTN","ICDTBL8C",44,0)
DRG827 ;
"RTN","ICDTBL8C",45,0)
DRG828 ;S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828) Q
"RTN","ICDTBL8C",46,0)
DRG829 I ICDPD["L"!($G(ICDMAJ)) D DRG826 Q
"RTN","ICDTBL8C",47,0)
 I ICDSD["l" D DRG837 Q
"RTN","ICDTBL8C",48,0)
 I ICDSD'["l"&(ICDOR'["O") D DRG846 Q
"RTN","ICDTBL8C",49,0)
DRG830 S ICDRG=$S(ICDMCC>0:829,1:830) Q
"RTN","ICDTBL8C",50,0)
DRG834 ;DRGs 834-836
"RTN","ICDTBL8C",51,0)
DRG835 ;
"RTN","ICDTBL8C",52,0)
DRG836 D DRG840 Q
"RTN","ICDTBL8C",53,0)
DRG837 ;DRGs 837-839
"RTN","ICDTBL8C",54,0)
DRG838 ;
"RTN","ICDTBL8C",55,0)
DRG839 I ICDSD["l",ICDMCC=2 S ICDRG=837 Q
"RTN","ICDTBL8C",56,0)
 I ICDSD["l"&(ICDSD["2") S ICDRG=$S(ICDMCC=2:837,ICDMCC=1:838,1:839)
"RTN","ICDTBL8C",57,0)
 I ICDSD'["l",$D(ICDOP(" 00.15")),ICDMCC=2 S ICDRG=837 Q
"RTN","ICDTBL8C",58,0)
 I ICDSD["l",'$D(ICDOP(" 00.15")),ICDMCC=1 S ICDRG=838 Q
"RTN","ICDTBL8C",59,0)
 I ICDSD'["l",$D(ICDOP(" 00.15")) S ICDRG=838 Q
"RTN","ICDTBL8C",60,0)
 I ICDSD["l",'$D(ICDOP(" 00.15")) S ICDRG=839 Q
"RTN","ICDTBL8C",61,0)
 I ICDSD'["l"&(ICDOR'["O") D DRG846 Q
"RTN","ICDTBL8C",62,0)
 D DRG846 Q
"RTN","ICDTBL8C",63,0)
DRG840 ;DRGs 840-842
"RTN","ICDTBL8C",64,0)
 S ICDRG=$S(ICDPD["l":836,ICDOR["O"!ICDORNI["O":825,1:842)
"RTN","ICDTBL8C",65,0)
 I ICDRG=836 S ICDRG=$S(ICDMCC=2:834,ICDMCC=1:835,1:836) Q
"RTN","ICDTBL8C",66,0)
 I ICDRG=825 S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825) Q
"RTN","ICDTBL8C",67,0)
 S ICDRG=$S(ICDMCC=2:840,ICDMCC=1:841,1:842)
"RTN","ICDTBL8C",68,0)
 Q
"RTN","ICDTBL8C",69,0)
DRG841 D DRG840 Q
"RTN","ICDTBL8C",70,0)
DRG842 D DRG840 Q
"RTN","ICDTBL8C",71,0)
DRG843 ;
"RTN","ICDTBL8C",72,0)
DRG844 ;
"RTN","ICDTBL8C",73,0)
DRG845 I ICDPD["L"  D DRG840 Q
"RTN","ICDTBL8C",74,0)
 I ICDDX(1)=$$CODEBA^ICDEX("V58.0",80) S ICDRG=849 Q
"RTN","ICDTBL8C",75,0)
 I ICDDX(1)=$$CODEBA^ICDEX("V67.1",80) S ICDRG=849 Q
"RTN","ICDTBL8C",76,0)
 I $D(ICDDX(1))&(ICDOPCT=0) D
"RTN","ICDTBL8C",77,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.11",80)!(ICDDX(1)=$$CODEBA^ICDEX("V58.12",80))!(ICDDX(1)=$$CODEBA^ICDEX("V67.2",80)) D
"RTN","ICDTBL8C",78,0)
 ..I ICDSD["2" D DRG837 Q
"RTN","ICDTBL8C",79,0)
 ..I ICDSD'["2" D DRG846 Q
"RTN","ICDTBL8C",80,0)
 I ICDPD["L" D DRG820 Q
"RTN","ICDTBL8C",81,0)
 I ICDOR["N"&($D(ICDPDRG(844))) S ICDRG=844 Q
"RTN","ICDTBL8C",82,0)
 S ICDRG=$S(ICDMCC=2:843,ICDMCC=1:844,1:845) Q
"RTN","ICDTBL8C",83,0)
 Q
"RTN","ICDTBL8C",84,0)
DRG846 ;
"RTN","ICDTBL8C",85,0)
DRG847 ;
"RTN","ICDTBL8C",86,0)
DRG848 I ICDDX(1)=$$CODEBA^ICDEX("V58.11",80)!(ICDDX(1)=$$CODEBA^ICDEX("V58.12",80))!(ICDDX(1)=$$CODEBA^ICDEX("V67.2",80)) S ICDRG=$S(ICDMCC=2:846,ICDMCC=1:847,1:848) Q
"RTN","ICDTBL8C",87,0)
 D DRG844 Q
"RTN","ICDTBL8C",88,0)
DRG849 I ICDDX(1)=$$CODEBA^ICDEX("V58.0",80) S ICDRG=849 Q 
"RTN","ICDTBL8C",89,0)
 I ICDDX(1)=$$CODEBA^ICDEX("V67.1",80) S ICDRG=849 Q
"RTN","ICDTBL8C",90,0)
 D DRG844 Q
"RTN","ICDTBL8C",91,0)
DRG853 ;
"RTN","ICDTBL8C",92,0)
DRG854 ;
"RTN","ICDTBL8C",93,0)
DRG855 I ICDOR="" D DRG862 Q
"RTN","ICDTBL8C",94,0)
 I ICDOR["O" S ICDRG=$S(ICDMCC=2:853,ICDMCC=1:854,1:855) Q
"RTN","ICDTBL8C",95,0)
 I ICDDX(1)=7322 D DRG856 Q
"RTN","ICDTBL8C",96,0)
 I ICDDX(1)=13271 D DRG856 Q
"RTN","ICDTBL8C",97,0)
 I ICDDX(1)=13272 D DRG856 Q
"RTN","ICDTBL8C",98,0)
 I ICDDX(1)=14543 D DRG856 Q
"RTN","ICDTBL8C",99,0)
 Q
"RTN","ICDTBL8C",100,0)
DRG856 ;
"RTN","ICDTBL8C",101,0)
DRG857 ;
"RTN","ICDTBL8C",102,0)
DRG858 I ICDOR'["O" D DRG862 Q
"RTN","ICDTBL8C",103,0)
 I ICDOR["O" S ICDRG=$S(ICDMCC=2:856,ICDMCC=1:857,1:858) Q
"RTN","ICDTBL8C",104,0)
 Q
"RTN","ICDTBL8C",105,0)
DRG862 ;
"RTN","ICDTBL8C",106,0)
DRG863 I ICDDX(1)'=7322&(ICDDX(1)'=13271)&(ICDDX(1)'=13272) D DRG867 Q
"RTN","ICDTBL8C",107,0)
 S ICDRG=$S(ICDMCC=2:862,1:863) Q
"RTN","ICDTBL8C",108,0)
DRG864 S ICDRG=864  Q
"RTN","ICDTBL8C",109,0)
DRG865 ;
"RTN","ICDTBL8C",110,0)
DRG866 ;
"RTN","ICDTBL8C",111,0)
 S ICDRG=$S(ICDMCC=2:865,1:866) Q
"RTN","ICDTBL8C",112,0)
DRG867 ;
"RTN","ICDTBL8C",113,0)
DRG868 ;
"RTN","ICDTBL8C",114,0)
DRG869 S ICDRG=$S(ICDMCC=2:867,ICDMCC=1:868,1:869) Q
"RTN","ICDTBL8C",115,0)
DRG870 ;DRGs 870-872
"RTN","ICDTBL8C",116,0)
 S ICDRG=$S(ICDOR["O":855,1:872) I ICDRG=872&($D(ICDOP(" 96.72"))) S ICDRG=870
"RTN","ICDTBL8C",117,0)
 I ICDRG=855 S ICDRG=$S(ICDMCC=2:853,ICDMCC=1:854,1:855) Q
"RTN","ICDTBL8C",118,0)
 I ICDRG=872 S ICDRG=$S(ICDMCC=2:871,1:872) Q
"RTN","ICDTBL8C",119,0)
 Q
"RTN","ICDTBL8C",120,0)
DRG871 D DRG870 Q
"RTN","ICDTBL8C",121,0)
DRG872 D DRG870 Q
"RTN","ICDTBL8C",122,0)
DRG876 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8C",123,0)
 Q
"RTN","ICDTBL8C",124,0)
DRG880 S ICDRG=880 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8C",125,0)
 Q
"RTN","ICDTBL8C",126,0)
DRG881 S ICDRG=881 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8C",127,0)
 Q
"RTN","ICDTBL8C",128,0)
DRG882 S ICDRG=882 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8C",129,0)
 Q
"RTN","ICDTBL8C",130,0)
DRG883 S ICDRG=883 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8C",131,0)
 Q
"RTN","ICDTBL8C",132,0)
DRG884 S ICDRG=884 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8C",133,0)
 Q
"RTN","ICDTBL8C",134,0)
DRG885 S ICDRG=885 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8C",135,0)
 Q
"RTN","ICDTBL8C",136,0)
DRG886 S ICDRG=886 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8C",137,0)
 Q
"RTN","ICDTBL8C",138,0)
DRG887 S ICDRG=887 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8C",139,0)
 Q
"RTN","ICDTBL8C",140,0)
DRG894 S ICDRG=894 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8C",141,0)
 Q
"RTN","ICDTBL8C",142,0)
DRG895 I (ICDOR["ND")!(ICDOR["NR") S ICDRG=895 Q
"RTN","ICDTBL8C",143,0)
 I ICDOR["O" S ICDRG=983 Q
"RTN","ICDTBL8C",144,0)
DRG896 ;
"RTN","ICDTBL8C",145,0)
DRG897 S ICDRG=$S(ICDMCC=2:896,1:897) Q
"RTN","ICDTBL8C",146,0)
 Q
"RTN","ICDTBL8D")
0^35^B25677376^B25476852
"RTN","ICDTBL8D",1,0)
ICDTBL8D ;ALB/MJB/KUM - GROUPER UTILITY FUNCTIONS;08/09/2010
"RTN","ICDTBL8D",2,0)
 ;;18.0;DRG Grouper;**56,61,62,64**;Oct 20, 2000;Build 103
"RTN","ICDTBL8D",3,0)
DRG800 ;
"RTN","ICDTBL8D",4,0)
DRG801 S ICDRG=$S(ICDMCC=2:799,ICDMCC=1:800,1:801) Q
"RTN","ICDTBL8D",5,0)
DRG802 ;
"RTN","ICDTBL8D",6,0)
DRG803 ;
"RTN","ICDTBL8D",7,0)
DRG804 S ICDRG=$S(ICDMCC=2:802,ICDMCC=1:803,1:804) Q
"RTN","ICDTBL8D",8,0)
DRG808 ;
"RTN","ICDTBL8D",9,0)
DRG809 ;
"RTN","ICDTBL8D",10,0)
DRG810 I ICDDX(1)=$$CODEBA^ICDEX("288.00",80),$D(ICDDXT("284.11")),ICDMCC=2 S ICDRG=809 Q
"RTN","ICDTBL8D",11,0)
 S ICDRG=$S(ICDMCC=2:808,ICDMCC=1:809,1:810) Q
"RTN","ICDTBL8D",12,0)
DRG811 ;
"RTN","ICDTBL8D",13,0)
DRG812 S ICDRG=$S(ICDMCC=2:811,1:812) Q
"RTN","ICDTBL8D",14,0)
DRG813 S ICDRG=813 Q
"RTN","ICDTBL8D",15,0)
DRG814 ;
"RTN","ICDTBL8D",16,0)
DRG815 ;
"RTN","ICDTBL8D",17,0)
DRG816 S ICDRG=$S(ICDMCC=2:814,ICDMCC=1:815,1:816) Q
"RTN","ICDTBL8D",18,0)
DRG820 ;DRG 820-822
"RTN","ICDTBL8D",19,0)
 ;removed check I ICDPD["L"&('$G(ICDMAJ))
"RTN","ICDTBL8D",20,0)
 I ICDPD["L"&('$G(ICDMAJ)) D DRG825 Q:"823^824^825^840^841^842^834^835^836"[ICDRG
"RTN","ICDTBL8D",21,0)
 ;removed check I ICDPD["L"
"RTN","ICDTBL8D",22,0)
 I ICDPD["L"&($G(ICDMAJ)) D  Q
"RTN","ICDTBL8D",23,0)
 .S ICDRG=$S(ICDMCC=2:820,ICDMCC=1:821,1:822)
"RTN","ICDTBL8D",24,0)
 S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828)
"RTN","ICDTBL8D",25,0)
 Q
"RTN","ICDTBL8D",26,0)
DRG821 D DRG820 Q
"RTN","ICDTBL8D",27,0)
DRG822 D DRG820 Q
"RTN","ICDTBL8D",28,0)
DRG823 ;DRGs 823-825
"RTN","ICDTBL8D",29,0)
 S ICDRG=$S(ICDPD["l":836,ICDOR["O"!(ICDORNI["O"):825,1:842)
"RTN","ICDTBL8D",30,0)
 I ICDRG=836 S ICDRG=$S(ICDMCC=2:834,ICDMCC=1:835,1:836) Q
"RTN","ICDTBL8D",31,0)
 I ICDRG=825 S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825) Q
"RTN","ICDTBL8D",32,0)
 I ICDRG=842 D  Q
"RTN","ICDTBL8D",33,0)
 .I ICDPD["L"&($D(ICDOP(" 92.30"))!$D(ICDOP(" 92.31"))!$D(ICDOP(" 92.32"))!$D(ICDOP(" 92.33"))!$D(ICDOP(" 92.39"))) S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825) Q
"RTN","ICDTBL8D",34,0)
 .I $D(ICDOP(" 92.30"))!$D(ICDOP(" 92.31"))!$D(ICDOP(" 92.32"))!$D(ICDOP(" 92.33"))!$D(ICDOP(" 92.39")) S ICDRG=$S(ICDMCC>0:829,1:830) Q
"RTN","ICDTBL8D",35,0)
 .S ICDRG=$S(ICDMCC=2:840,ICDMCC=1:841,1:842)
"RTN","ICDTBL8D",36,0)
 Q
"RTN","ICDTBL8D",37,0)
DRG824 D DRG823 Q
"RTN","ICDTBL8D",38,0)
DRG825 D DRG823 Q
"RTN","ICDTBL8D",39,0)
DRG826 ;DRGs 826-828
"RTN","ICDTBL8D",40,0)
 I $G(ICDMAJ)="^"!'($G(ICDMAJ)) D DRG829 Q
"RTN","ICDTBL8D",41,0)
 I ICDOCNT>0!(ICDOR["O") D  Q 
"RTN","ICDTBL8D",42,0)
 .S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828) Q
"RTN","ICDTBL8D",43,0)
 S ICDRG=$S(ICDMCC=2:843,ICDMCC=1:844,1:845)
"RTN","ICDTBL8D",44,0)
 Q
"RTN","ICDTBL8D",45,0)
DRG827 ;
"RTN","ICDTBL8D",46,0)
DRG828 ;S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828) Q
"RTN","ICDTBL8D",47,0)
DRG829 I ICDPD["L"!($G(ICDMAJ)) D DRG826 Q
"RTN","ICDTBL8D",48,0)
 I ICDSD["l" D DRG837 Q
"RTN","ICDTBL8D",49,0)
 I ICDSD'["l"&(ICDOR'["O") D DRG846 Q
"RTN","ICDTBL8D",50,0)
DRG830 S ICDRG=$S(ICDMCC>0:829,1:830) Q
"RTN","ICDTBL8D",51,0)
DRG834 ;DRGs 834-836
"RTN","ICDTBL8D",52,0)
DRG835 ;
"RTN","ICDTBL8D",53,0)
DRG836 D DRG840 Q
"RTN","ICDTBL8D",54,0)
DRG837 ;DRGs 837-839
"RTN","ICDTBL8D",55,0)
DRG838 ;
"RTN","ICDTBL8D",56,0)
DRG839 I ICDSD["l",ICDMCC=2 S ICDRG=837 Q
"RTN","ICDTBL8D",57,0)
 I ICDSD["l"&(ICDSD["2") S ICDRG=$S(ICDMCC=2:837,ICDMCC=1:838,1:839)
"RTN","ICDTBL8D",58,0)
 I ICDSD'["l",$D(ICDOP(" 00.15")),ICDMCC=2 S ICDRG=837 Q
"RTN","ICDTBL8D",59,0)
 I ICDSD["l",'$D(ICDOP(" 00.15")),ICDMCC=1 S ICDRG=838 Q
"RTN","ICDTBL8D",60,0)
 I ICDSD'["l",$D(ICDOP(" 00.15")) S ICDRG=838 Q
"RTN","ICDTBL8D",61,0)
 I ICDSD["l",'$D(ICDOP(" 00.15")) S ICDRG=839 Q
"RTN","ICDTBL8D",62,0)
 I ICDSD'["l"&(ICDOR'["O") D DRG846 Q
"RTN","ICDTBL8D",63,0)
 D DRG846 Q
"RTN","ICDTBL8D",64,0)
DRG840 ;DRGs 840-842
"RTN","ICDTBL8D",65,0)
 S ICDRG=$S(ICDPD["l":836,ICDOR["O"!ICDORNI["O":825,1:842)
"RTN","ICDTBL8D",66,0)
 I ICDRG=836 S ICDRG=$S(ICDMCC=2:834,ICDMCC=1:835,1:836) Q
"RTN","ICDTBL8D",67,0)
 I ICDRG=825 S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825) Q
"RTN","ICDTBL8D",68,0)
 S ICDRG=$S(ICDMCC=2:840,ICDMCC=1:841,1:842)
"RTN","ICDTBL8D",69,0)
 Q
"RTN","ICDTBL8D",70,0)
DRG841 D DRG840 Q
"RTN","ICDTBL8D",71,0)
DRG842 D DRG840 Q
"RTN","ICDTBL8D",72,0)
DRG843 ;
"RTN","ICDTBL8D",73,0)
DRG844 ;
"RTN","ICDTBL8D",74,0)
DRG845 I ICDPD["L"  D DRG840 Q
"RTN","ICDTBL8D",75,0)
 I ICDDX(1)=$$CODEBA^ICDEX("V58.0",80) S ICDRG=849 Q
"RTN","ICDTBL8D",76,0)
 I ICDDX(1)=$$CODEBA^ICDEX("V67.1",80) S ICDRG=849 Q
"RTN","ICDTBL8D",77,0)
 I $D(ICDDX(1))&(ICDOPCT=0) D
"RTN","ICDTBL8D",78,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.11",80)!(ICDDX(1)=$$CODEBA^ICDEX("V58.12",80))!(ICDDX(1)=$$CODEBA^ICDEX("V67.2",80)) D
"RTN","ICDTBL8D",79,0)
 ..I ICDSD["2" D DRG837 Q
"RTN","ICDTBL8D",80,0)
 ..I ICDSD'["2" D DRG846 Q
"RTN","ICDTBL8D",81,0)
 I ICDPD["L" D DRG820 Q
"RTN","ICDTBL8D",82,0)
 I ICDOR["N"&($D(ICDPDRG(844))) S ICDRG=844 Q
"RTN","ICDTBL8D",83,0)
 S ICDRG=$S(ICDMCC=2:843,ICDMCC=1:844,1:845) Q
"RTN","ICDTBL8D",84,0)
 Q
"RTN","ICDTBL8D",85,0)
DRG846 ;
"RTN","ICDTBL8D",86,0)
DRG847 ;
"RTN","ICDTBL8D",87,0)
DRG848 I ICDDX(1)=$$CODEBA^ICDEX("V58.11",80)!(ICDDX(1)=$$CODEBA^ICDEX("V58.12",80))!(ICDDX(1)=$$CODEBA^ICDEX("V67.2",80)) S ICDRG=$S(ICDMCC=2:846,ICDMCC=1:847,1:848) Q
"RTN","ICDTBL8D",88,0)
 D DRG844 Q
"RTN","ICDTBL8D",89,0)
DRG849 I ICDDX(1)=$$CODEBA^ICDEX("V58.0",80) S ICDRG=849 Q 
"RTN","ICDTBL8D",90,0)
 I ICDDX(1)=$$CODEBA^ICDEX("V67.1",80) S ICDRG=849 Q
"RTN","ICDTBL8D",91,0)
 D DRG844 Q
"RTN","ICDTBL8D",92,0)
DRG853 ;
"RTN","ICDTBL8D",93,0)
DRG854 ;
"RTN","ICDTBL8D",94,0)
DRG855 I ICDOR="" D DRG862 Q
"RTN","ICDTBL8D",95,0)
 I ICDOR["O" S ICDRG=$S(ICDMCC=2:853,ICDMCC=1:854,1:855) Q
"RTN","ICDTBL8D",96,0)
 I ICDDX(1)=7322 D DRG856 Q
"RTN","ICDTBL8D",97,0)
 I ICDDX(1)=13271 D DRG856 Q
"RTN","ICDTBL8D",98,0)
 I ICDDX(1)=13272 D DRG856 Q
"RTN","ICDTBL8D",99,0)
 I ICDDX(1)=14543 D DRG856 Q
"RTN","ICDTBL8D",100,0)
 Q
"RTN","ICDTBL8D",101,0)
DRG856 ;
"RTN","ICDTBL8D",102,0)
DRG857 ;
"RTN","ICDTBL8D",103,0)
DRG858 I ICDOR'["O" D DRG862 Q
"RTN","ICDTBL8D",104,0)
 I ICDOR["O" S ICDRG=$S(ICDMCC=2:856,ICDMCC=1:857,1:858) Q
"RTN","ICDTBL8D",105,0)
 Q
"RTN","ICDTBL8D",106,0)
DRG862 ;
"RTN","ICDTBL8D",107,0)
DRG863 I ICDDX(1)'=7322&(ICDDX(1)'=13271)&(ICDDX(1)'=13272) D DRG867 Q
"RTN","ICDTBL8D",108,0)
 S ICDRG=$S(ICDMCC=2:862,1:863) Q
"RTN","ICDTBL8D",109,0)
DRG864 S ICDRG=864  Q
"RTN","ICDTBL8D",110,0)
DRG865 ;
"RTN","ICDTBL8D",111,0)
DRG866 ;
"RTN","ICDTBL8D",112,0)
 S ICDRG=$S(ICDMCC=2:865,1:866) Q
"RTN","ICDTBL8D",113,0)
DRG867 ;
"RTN","ICDTBL8D",114,0)
DRG868 ;
"RTN","ICDTBL8D",115,0)
DRG869 S ICDRG=$S(ICDMCC=2:867,ICDMCC=1:868,1:869) Q
"RTN","ICDTBL8D",116,0)
DRG870 ;DRGs 870-872
"RTN","ICDTBL8D",117,0)
 S ICDRG=$S(ICDOR["O":855,1:872) I ICDRG=872&($D(ICDOP(" 96.72"))) S ICDRG=870
"RTN","ICDTBL8D",118,0)
 I ICDRG=855 S ICDRG=$S(ICDMCC=2:853,ICDMCC=1:854,1:855) Q
"RTN","ICDTBL8D",119,0)
 I ICDRG=872 S ICDRG=$S(ICDMCC=2:871,1:872) Q
"RTN","ICDTBL8D",120,0)
 Q
"RTN","ICDTBL8D",121,0)
DRG871 D DRG870 Q
"RTN","ICDTBL8D",122,0)
DRG872 D DRG870 Q
"RTN","ICDTBL8D",123,0)
DRG876 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8D",124,0)
 Q
"RTN","ICDTBL8D",125,0)
DRG880 S ICDRG=880 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8D",126,0)
 Q
"RTN","ICDTBL8D",127,0)
DRG881 S ICDRG=881 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8D",128,0)
 Q
"RTN","ICDTBL8D",129,0)
DRG882 S ICDRG=882 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8D",130,0)
 Q
"RTN","ICDTBL8D",131,0)
DRG883 S ICDRG=883 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8D",132,0)
 Q
"RTN","ICDTBL8D",133,0)
DRG884 S ICDRG=884 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8D",134,0)
 Q
"RTN","ICDTBL8D",135,0)
DRG885 S ICDRG=885 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8D",136,0)
 Q
"RTN","ICDTBL8D",137,0)
DRG886 S ICDRG=886 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8D",138,0)
 Q
"RTN","ICDTBL8D",139,0)
DRG887 S ICDRG=887 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8D",140,0)
 Q
"RTN","ICDTBL8D",141,0)
DRG894 S ICDRG=894 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8D",142,0)
 Q
"RTN","ICDTBL8D",143,0)
DRG895 I (ICDOR["ND")!(ICDOR["NR") S ICDRG=895 Q
"RTN","ICDTBL8D",144,0)
 I ICDOR["O" S ICDRG=983 Q
"RTN","ICDTBL8D",145,0)
DRG896 ;
"RTN","ICDTBL8D",146,0)
DRG897 S ICDRG=$S(ICDMCC=2:896,1:897) Q
"RTN","ICDTBL8D",147,0)
 Q
"RTN","ICDTBL8E")
0^84^B25715742^B25476861
"RTN","ICDTBL8E",1,0)
ICDTBL8E ;ALB/JDG/SS - GROUPER UTILITY FUNCTIONS;08/09/2010
"RTN","ICDTBL8E",2,0)
 ;;18.0;DRG Grouper;**65,64**;Oct 20, 2000;Build 103
"RTN","ICDTBL8E",3,0)
DRG800 ;
"RTN","ICDTBL8E",4,0)
DRG801 S ICDRG=$S(ICDMCC=2:799,ICDMCC=1:800,1:801) Q
"RTN","ICDTBL8E",5,0)
DRG802 ;
"RTN","ICDTBL8E",6,0)
DRG803 ;
"RTN","ICDTBL8E",7,0)
DRG804 S ICDRG=$S(ICDMCC=2:802,ICDMCC=1:803,1:804) Q
"RTN","ICDTBL8E",8,0)
DRG808 ;
"RTN","ICDTBL8E",9,0)
DRG809 ;
"RTN","ICDTBL8E",10,0)
DRG810 I ICDDX(1)=$$CODEBA^ICDEX("288.00",80),$D(ICDDXT("284.11")),ICDMCC=2 S ICDRG=809 Q
"RTN","ICDTBL8E",11,0)
 S ICDRG=$S(ICDMCC=2:808,ICDMCC=1:809,1:810) Q
"RTN","ICDTBL8E",12,0)
DRG811 ;
"RTN","ICDTBL8E",13,0)
DRG812 S ICDRG=$S(ICDMCC=2:811,1:812) Q
"RTN","ICDTBL8E",14,0)
DRG813 S ICDRG=813 Q
"RTN","ICDTBL8E",15,0)
DRG814 ;
"RTN","ICDTBL8E",16,0)
DRG815 ;
"RTN","ICDTBL8E",17,0)
DRG816 S ICDRG=$S(ICDMCC=2:814,ICDMCC=1:815,1:816) Q
"RTN","ICDTBL8E",18,0)
DRG820 ;DRG 820-822
"RTN","ICDTBL8E",19,0)
 ;removed check I ICDPD["L"&('$G(ICDMAJ))
"RTN","ICDTBL8E",20,0)
 I ICDPD["L"&('$G(ICDMAJ)) D DRG825 Q:"823^824^825^840^841^842^834^835^836"[ICDRG
"RTN","ICDTBL8E",21,0)
 ;removed check I ICDPD["L"
"RTN","ICDTBL8E",22,0)
 I ICDPD["L"&($G(ICDMAJ)) D  Q
"RTN","ICDTBL8E",23,0)
 .S ICDRG=$S(ICDMCC=2:820,ICDMCC=1:821,1:822)
"RTN","ICDTBL8E",24,0)
 S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828)
"RTN","ICDTBL8E",25,0)
 Q
"RTN","ICDTBL8E",26,0)
DRG821 D DRG820 Q
"RTN","ICDTBL8E",27,0)
DRG822 D DRG820 Q
"RTN","ICDTBL8E",28,0)
DRG823 ;DRGs 823-825
"RTN","ICDTBL8E",29,0)
 S ICDRG=$S(ICDPD["l":836,ICDOR["O"!(ICDORNI["O"):825,1:842)
"RTN","ICDTBL8E",30,0)
 I ICDRG=836 S ICDRG=$S(ICDMCC=2:834,ICDMCC=1:835,1:836) Q
"RTN","ICDTBL8E",31,0)
 I ICDRG=825 S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825) Q
"RTN","ICDTBL8E",32,0)
 I ICDRG=842 D  Q
"RTN","ICDTBL8E",33,0)
 .I ICDPD["L"&($D(ICDOP(" 92.30"))!$D(ICDOP(" 92.31"))!$D(ICDOP(" 92.32"))!$D(ICDOP(" 92.33"))!$D(ICDOP(" 92.39"))) S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825) Q
"RTN","ICDTBL8E",34,0)
 .I $D(ICDOP(" 92.30"))!$D(ICDOP(" 92.31"))!$D(ICDOP(" 92.32"))!$D(ICDOP(" 92.33"))!$D(ICDOP(" 92.39")) S ICDRG=$S(ICDMCC>0:829,1:830) Q
"RTN","ICDTBL8E",35,0)
 .S ICDRG=$S(ICDMCC=2:840,ICDMCC=1:841,1:842)
"RTN","ICDTBL8E",36,0)
 Q
"RTN","ICDTBL8E",37,0)
DRG824 D DRG823 Q
"RTN","ICDTBL8E",38,0)
DRG825 D DRG823 Q
"RTN","ICDTBL8E",39,0)
DRG826 ;DRGs 826-828
"RTN","ICDTBL8E",40,0)
 I $G(ICDMAJ)="^"!'($G(ICDMAJ)) D DRG829 Q
"RTN","ICDTBL8E",41,0)
 I ICDOCNT>0!(ICDOR["O") D  Q 
"RTN","ICDTBL8E",42,0)
 .S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828) Q
"RTN","ICDTBL8E",43,0)
 S ICDRG=$S(ICDMCC=2:843,ICDMCC=1:844,1:845)
"RTN","ICDTBL8E",44,0)
 Q
"RTN","ICDTBL8E",45,0)
DRG827 ;
"RTN","ICDTBL8E",46,0)
DRG828 ;S ICDRG=$S(ICDMCC=2:826,ICDMCC=1:827,1:828) Q
"RTN","ICDTBL8E",47,0)
DRG829 I ICDPD["L"!($G(ICDMAJ)) D DRG826 Q
"RTN","ICDTBL8E",48,0)
 I ICDSD["l" D DRG837 Q
"RTN","ICDTBL8E",49,0)
 I ICDSD'["l"&(ICDOR'["O") D DRG846 Q
"RTN","ICDTBL8E",50,0)
DRG830 S ICDRG=$S(ICDMCC>0:829,1:830) Q
"RTN","ICDTBL8E",51,0)
DRG834 ;DRGs 834-836
"RTN","ICDTBL8E",52,0)
DRG835 ;
"RTN","ICDTBL8E",53,0)
DRG836 D DRG840 Q
"RTN","ICDTBL8E",54,0)
DRG837 ;DRGs 837-839
"RTN","ICDTBL8E",55,0)
DRG838 ;
"RTN","ICDTBL8E",56,0)
DRG839 I ICDSD["l",ICDMCC=2 S ICDRG=837 Q
"RTN","ICDTBL8E",57,0)
 I ICDSD["l"&(ICDSD["2") S ICDRG=$S(ICDMCC=2:837,ICDMCC=1:838,1:839)
"RTN","ICDTBL8E",58,0)
 I ICDSD'["l",$D(ICDOP(" 00.15")),ICDMCC=2 S ICDRG=837 Q
"RTN","ICDTBL8E",59,0)
 I ICDSD["l",'$D(ICDOP(" 00.15")),ICDMCC=1 S ICDRG=838 Q
"RTN","ICDTBL8E",60,0)
 I ICDSD'["l",$D(ICDOP(" 00.15")) S ICDRG=838 Q
"RTN","ICDTBL8E",61,0)
 I ICDSD["l",'$D(ICDOP(" 00.15")) S ICDRG=839 Q
"RTN","ICDTBL8E",62,0)
 I ICDSD'["l"&(ICDOR'["O") D DRG846 Q
"RTN","ICDTBL8E",63,0)
 D DRG846 Q
"RTN","ICDTBL8E",64,0)
DRG840 ;DRGs 840-842
"RTN","ICDTBL8E",65,0)
 S ICDRG=$S(ICDPD["l":836,ICDOR["O"!ICDORNI["O":825,1:842)
"RTN","ICDTBL8E",66,0)
 I ICDRG=836 S ICDRG=$S(ICDMCC=2:834,ICDMCC=1:835,1:836) Q
"RTN","ICDTBL8E",67,0)
 I ICDRG=825 S ICDRG=$S(ICDMCC=2:823,ICDMCC=1:824,1:825) Q
"RTN","ICDTBL8E",68,0)
 S ICDRG=$S(ICDMCC=2:840,ICDMCC=1:841,1:842)
"RTN","ICDTBL8E",69,0)
 Q
"RTN","ICDTBL8E",70,0)
DRG841 D DRG840 Q
"RTN","ICDTBL8E",71,0)
DRG842 D DRG840 Q
"RTN","ICDTBL8E",72,0)
DRG843 ;
"RTN","ICDTBL8E",73,0)
DRG844 ;
"RTN","ICDTBL8E",74,0)
DRG845 I ICDPD["L"  D DRG840 Q
"RTN","ICDTBL8E",75,0)
 I ICDDX(1)=$$CODEBA^ICDEX("V58.0",80) S ICDRG=849 Q
"RTN","ICDTBL8E",76,0)
 I ICDDX(1)=$$CODEBA^ICDEX("V67.1",80) S ICDRG=849 Q
"RTN","ICDTBL8E",77,0)
 I $D(ICDDX(1))&(ICDOPCT=0) D
"RTN","ICDTBL8E",78,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.11",80)!(ICDDX(1)=$$CODEBA^ICDEX("V58.12",80))!(ICDDX(1)=$$CODEBA^ICDEX("V67.2",80)) D
"RTN","ICDTBL8E",79,0)
 ..I ICDSD["2" D DRG837 Q
"RTN","ICDTBL8E",80,0)
 ..I ICDSD'["2" D DRG846 Q
"RTN","ICDTBL8E",81,0)
 I ICDPD["L" D DRG820 Q
"RTN","ICDTBL8E",82,0)
 I ICDOR["N"&($D(ICDPDRG(844))) S ICDRG=844 Q
"RTN","ICDTBL8E",83,0)
 S ICDRG=$S(ICDMCC=2:843,ICDMCC=1:844,1:845) Q
"RTN","ICDTBL8E",84,0)
 Q
"RTN","ICDTBL8E",85,0)
DRG846 ;
"RTN","ICDTBL8E",86,0)
DRG847 ;
"RTN","ICDTBL8E",87,0)
DRG848 I ICDDX(1)=$$CODEBA^ICDEX("V58.11",80)!(ICDDX(1)=$$CODEBA^ICDEX("V58.12",80))!(ICDDX(1)=$$CODEBA^ICDEX("V67.2",80)) S ICDRG=$S(ICDMCC=2:846,ICDMCC=1:847,1:848) Q
"RTN","ICDTBL8E",88,0)
 D DRG844 Q
"RTN","ICDTBL8E",89,0)
DRG849 I ICDDX(1)=$$CODEBA^ICDEX("V58.0",80) S ICDRG=849 Q 
"RTN","ICDTBL8E",90,0)
 I ICDDX(1)=$$CODEBA^ICDEX("V67.1",80) S ICDRG=849 Q
"RTN","ICDTBL8E",91,0)
 D DRG844 Q
"RTN","ICDTBL8E",92,0)
DRG853 ;
"RTN","ICDTBL8E",93,0)
DRG854 ;
"RTN","ICDTBL8E",94,0)
DRG855  I ICDOR="" D DRG862 Q
"RTN","ICDTBL8E",95,0)
 I ICDOR["O" S ICDRG=$S(ICDMCC=2:853,ICDMCC=1:854,1:855) Q
"RTN","ICDTBL8E",96,0)
 I ICDDX(1)=7322 D DRG856 Q
"RTN","ICDTBL8E",97,0)
 I ICDDX(1)=13271 D DRG856 Q
"RTN","ICDTBL8E",98,0)
 I ICDDX(1)=13272 D DRG856 Q
"RTN","ICDTBL8E",99,0)
 I ICDDX(1)=14543 D DRG856 Q
"RTN","ICDTBL8E",100,0)
 Q
"RTN","ICDTBL8E",101,0)
DRG856 ;
"RTN","ICDTBL8E",102,0)
DRG857 ;
"RTN","ICDTBL8E",103,0)
DRG858 I ICDOR'["O" D DRG862 Q
"RTN","ICDTBL8E",104,0)
 I ICDOR["O" S ICDRG=$S(ICDMCC=2:856,ICDMCC=1:857,1:858) Q
"RTN","ICDTBL8E",105,0)
 Q
"RTN","ICDTBL8E",106,0)
DRG862 ;
"RTN","ICDTBL8E",107,0)
DRG863 I ICDDX(1)'=7322&(ICDDX(1)'=13271)&(ICDDX(1)'=13272) D DRG867 Q
"RTN","ICDTBL8E",108,0)
 S ICDRG=$S(ICDMCC=2:862,1:863) Q
"RTN","ICDTBL8E",109,0)
DRG864 S ICDRG=864  Q
"RTN","ICDTBL8E",110,0)
DRG865 ;
"RTN","ICDTBL8E",111,0)
DRG866 ;
"RTN","ICDTBL8E",112,0)
       S ICDRG=$S(ICDMCC=2:865,1:866) Q
"RTN","ICDTBL8E",113,0)
DRG867 ;
"RTN","ICDTBL8E",114,0)
DRG868 ;
"RTN","ICDTBL8E",115,0)
DRG869 S ICDRG=$S(ICDMCC=2:867,ICDMCC=1:868,1:869) Q
"RTN","ICDTBL8E",116,0)
DRG870 ;DRGs 870-872
"RTN","ICDTBL8E",117,0)
 S ICDRG=$S(ICDOR["O":855,1:872) I ICDRG=872&($D(ICDOP(" 96.72"))) S ICDRG=870
"RTN","ICDTBL8E",118,0)
 I ICDRG=855 S ICDRG=$S(ICDMCC=2:853,ICDMCC=1:854,1:855) Q
"RTN","ICDTBL8E",119,0)
 I ICDRG=872 S ICDRG=$S(ICDMCC=2:871,1:872) Q
"RTN","ICDTBL8E",120,0)
 Q
"RTN","ICDTBL8E",121,0)
DRG871 D DRG870 Q
"RTN","ICDTBL8E",122,0)
DRG872 D DRG870 Q
"RTN","ICDTBL8E",123,0)
DRG876 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8E",124,0)
 Q
"RTN","ICDTBL8E",125,0)
DRG880 S ICDRG=880 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8E",126,0)
 Q
"RTN","ICDTBL8E",127,0)
DRG881 S ICDRG=881 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8E",128,0)
 Q
"RTN","ICDTBL8E",129,0)
DRG882 S ICDRG=882 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8E",130,0)
 Q
"RTN","ICDTBL8E",131,0)
DRG883 S ICDRG=883 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8E",132,0)
 Q
"RTN","ICDTBL8E",133,0)
DRG884 S ICDRG=884 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8E",134,0)
 Q
"RTN","ICDTBL8E",135,0)
DRG885 S ICDRG=885 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8E",136,0)
 Q
"RTN","ICDTBL8E",137,0)
DRG886 S ICDRG=886 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8E",138,0)
 Q
"RTN","ICDTBL8E",139,0)
DRG887 S ICDRG=887 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8E",140,0)
 Q
"RTN","ICDTBL8E",141,0)
DRG894 S ICDRG=894 I ICDOR["O" S ICDRG=876 Q
"RTN","ICDTBL8E",142,0)
 Q
"RTN","ICDTBL8E",143,0)
DRG895 I (ICDOR["ND")!(ICDOR["NR") S ICDRG=895 Q
"RTN","ICDTBL8E",144,0)
 I ICDOR["O" S ICDRG=983 Q
"RTN","ICDTBL8E",145,0)
DRG896 ;
"RTN","ICDTBL8E",146,0)
DRG897 S ICDRG=$S(ICDMCC=2:896,1:897) Q
"RTN","ICDTBL8E",147,0)
 Q
"RTN","ICDTBL9B")
0^36^B4890646^B4777979
"RTN","ICDTBL9B",1,0)
ICDTBL9B ;ALB/EG/MRY/KUM - GROUPER UTILITY FUNCTIONS ;11/9/07 1:02pm
"RTN","ICDTBL9B",2,0)
 ;;18.0;DRG Grouper;**45,54,64**;Oct 20, 2000;Build 103
"RTN","ICDTBL9B",3,0)
 ;
"RTN","ICDTBL9B",4,0)
DRG901 ;
"RTN","ICDTBL9B",5,0)
DRG902 ;
"RTN","ICDTBL9B",6,0)
DRG903 S ICDRG=$S(ICDMCC=2:901,ICDMCC=1:902,1:903) Q
"RTN","ICDTBL9B",7,0)
DRG904 ;
"RTN","ICDTBL9B",8,0)
DRG905 S ICDRG=$S(ICDMCC>0:904,1:905) Q
"RTN","ICDTBL9B",9,0)
DRG906 S ICDRG=906 Q
"RTN","ICDTBL9B",10,0)
DRG907 ;
"RTN","ICDTBL9B",11,0)
DRG908 ;
"RTN","ICDTBL9B",12,0)
DRG909 S ICDRG=$S(ICDMCC=2:907,ICDMCC=1:908,1:909) Q
"RTN","ICDTBL9B",13,0)
DRG913 ;
"RTN","ICDTBL9B",14,0)
DRG914 S ICDRG=$S(ICDMCC=2:913,1:914) Q
"RTN","ICDTBL9B",15,0)
DRG915 ;
"RTN","ICDTBL9B",16,0)
DRG916 S ICDRG=$S(ICDMCC=2:915,1:916) Q
"RTN","ICDTBL9B",17,0)
DRG917 ;
"RTN","ICDTBL9B",18,0)
DRG918 S ICDRG=$S(ICDMCC=2:917,1:918) Q
"RTN","ICDTBL9B",19,0)
DRG919 ;
"RTN","ICDTBL9B",20,0)
DRG920 ;
"RTN","ICDTBL9B",21,0)
DRG921 S ICDRG=$S(ICDMCC=2:919,ICDMCC=1:920,1:921) Q
"RTN","ICDTBL9B",22,0)
DRG922 ;
"RTN","ICDTBL9B",23,0)
DRG923 S ICDRG=$S(ICDMCC=2:922,1:923) Q
"RTN","ICDTBL9B",24,0)
DRG927 S ICDRG=927 Q
"RTN","ICDTBL9B",25,0)
DRG928 ;
"RTN","ICDTBL9B",26,0)
DRG929 S ICDRG=$S(ICDMCC>0:928,1:929) Q
"RTN","ICDTBL9B",27,0)
DRG933 S ICDRG=933 Q
"RTN","ICDTBL9B",28,0)
DRG934 S ICDRG=934 Q
"RTN","ICDTBL9B",29,0)
DRG935 S ICDRG=935 Q
"RTN","ICDTBL9B",30,0)
DRG939 ;
"RTN","ICDTBL9B",31,0)
DRG940 ;
"RTN","ICDTBL9B",32,0)
DRG941 I ICDOR["O" S ICDRG=$S(ICDMCC=2:939,ICDMCC=1:940,1:941) Q
"RTN","ICDTBL9B",33,0)
 Q
"RTN","ICDTBL9B",34,0)
DRG945 ;
"RTN","ICDTBL9B",35,0)
DRG946 S ICDRG=$S(ICDMCC>0:945,1:946) D DRG941 Q
"RTN","ICDTBL9B",36,0)
DRG947 ;
"RTN","ICDTBL9B",37,0)
DRG948 S ICDRG=$S(ICDMCC=2:947,1:948) D DRG941 Q
"RTN","ICDTBL9B",38,0)
DRG949 ;
"RTN","ICDTBL9B",39,0)
DRG950 S ICDRG=$S(ICDMCC>0:949,1:950) D DRG941 Q
"RTN","ICDTBL9B",40,0)
DRG951 S ICDRG=951 D DRG941 Q
"RTN","ICDTBL9B",41,0)
DRG955 S ICDRG=955 Q
"RTN","ICDTBL9B",42,0)
DRG956 S ICDRG=956 Q
"RTN","ICDTBL9B",43,0)
DRG957 ;
"RTN","ICDTBL9B",44,0)
DRG958 ;
"RTN","ICDTBL9B",45,0)
DRG959 S ICDRG=$S(ICDMCC=2:957,ICDMCC=1:958,1:959) Q
"RTN","ICDTBL9B",46,0)
DRG963 ;
"RTN","ICDTBL9B",47,0)
DRG964 ;
"RTN","ICDTBL9B",48,0)
DRG965 S ICDRG=$S(ICDMCC=2:963,ICDMCC=1:964,1:965) Q
"RTN","ICDTBL9B",49,0)
DRG969 ;
"RTN","ICDTBL9B",50,0)
DRG970 S ICDRG=$S(ICDMCC=2:969,1:970) Q
"RTN","ICDTBL9B",51,0)
DRG974 ;
"RTN","ICDTBL9B",52,0)
DRG975 ;
"RTN","ICDTBL9B",53,0)
DRG976 S ICDRG=$S(ICDMCC=2:974,ICDMCC=1:975,1:976) Q
"RTN","ICDTBL9B",54,0)
DRG977 S ICDRG=977 Q
"RTN","ICDTBL9B",55,0)
DRG981 ;
"RTN","ICDTBL9B",56,0)
DRG982 ;
"RTN","ICDTBL9B",57,0)
DRG983 I ICDDX(1)=$$CODEBA^ICDEX("V278.01",80)&($D(ICDDXT("V85.43"))) S ICDRG=983  Q
"RTN","ICDTBL9B",58,0)
 S ICDRG=$S(ICDMCC=2:981,ICDMCC=1:982,1:983) Q
"RTN","ICDTBL9B",59,0)
DRG984 ;
"RTN","ICDTBL9B",60,0)
DRG985 ;
"RTN","ICDTBL9B",61,0)
DRG986 S ICDRG=$S(ICDMCC=2:984,ICDMCC=1:985,1:986) Q
"RTN","ICDTBL9B",62,0)
DRG987 ;
"RTN","ICDTBL9B",63,0)
DRG988 ;
"RTN","ICDTBL9B",64,0)
DRG989 S ICDRG=$S(ICDMCC=2:987,ICDMCC=1:988,1:989) Q
"RTN","ICDTBL9B",65,0)
DRG998 S ICDRG=998 Q
"RTN","ICDTBL9B",66,0)
DRG999 S ICDRG=999 Q
"RTN","ICDTBL9B",67,0)
 Q
"RTN","ICDTBL9C")
0^37^B4895199^B4782468
"RTN","ICDTBL9C",1,0)
ICDTBL9C ;ALB/MJB/KUM - GROUPER UTILITY FUNCTIONS;08/09/2010
"RTN","ICDTBL9C",2,0)
 ;;18.0;DRG Grouper;**50,54,64**;Oct 20, 2000;Build 103
"RTN","ICDTBL9C",3,0)
 ;
"RTN","ICDTBL9C",4,0)
DRG901 ;
"RTN","ICDTBL9C",5,0)
DRG902 ;
"RTN","ICDTBL9C",6,0)
DRG903 S ICDRG=$S(ICDMCC=2:901,ICDMCC=1:902,1:903) Q
"RTN","ICDTBL9C",7,0)
DRG904 ;
"RTN","ICDTBL9C",8,0)
DRG905 S ICDRG=$S(ICDMCC>0:904,1:905) Q
"RTN","ICDTBL9C",9,0)
DRG906 S ICDRG=906 Q
"RTN","ICDTBL9C",10,0)
DRG907 ;
"RTN","ICDTBL9C",11,0)
DRG908 ;
"RTN","ICDTBL9C",12,0)
DRG909 S ICDRG=$S(ICDMCC=2:907,ICDMCC=1:908,1:909) Q
"RTN","ICDTBL9C",13,0)
DRG913 ;
"RTN","ICDTBL9C",14,0)
DRG914 S ICDRG=$S(ICDMCC=2:913,1:914) Q
"RTN","ICDTBL9C",15,0)
DRG915 ;
"RTN","ICDTBL9C",16,0)
DRG916 S ICDRG=$S(ICDMCC=2:915,1:916) Q
"RTN","ICDTBL9C",17,0)
DRG917 ;
"RTN","ICDTBL9C",18,0)
DRG918 S ICDRG=$S(ICDMCC=2:917,1:918) Q
"RTN","ICDTBL9C",19,0)
DRG919 ;
"RTN","ICDTBL9C",20,0)
DRG920 ;
"RTN","ICDTBL9C",21,0)
DRG921 S ICDRG=$S(ICDMCC=2:919,ICDMCC=1:920,1:921) Q
"RTN","ICDTBL9C",22,0)
DRG922 ;
"RTN","ICDTBL9C",23,0)
DRG923 S ICDRG=$S(ICDMCC=2:922,1:923) Q
"RTN","ICDTBL9C",24,0)
DRG927 S ICDRG=927 Q
"RTN","ICDTBL9C",25,0)
DRG928 ;
"RTN","ICDTBL9C",26,0)
DRG929 S ICDRG=$S(ICDMCC>0:928,1:929) Q
"RTN","ICDTBL9C",27,0)
DRG933 S ICDRG=933 Q
"RTN","ICDTBL9C",28,0)
DRG934 S ICDRG=934 Q
"RTN","ICDTBL9C",29,0)
DRG935 S ICDRG=935 Q
"RTN","ICDTBL9C",30,0)
DRG939 ;
"RTN","ICDTBL9C",31,0)
DRG940 ;
"RTN","ICDTBL9C",32,0)
DRG941 I ICDOR["O" S ICDRG=$S(ICDMCC=2:939,ICDMCC=1:940,1:941) Q
"RTN","ICDTBL9C",33,0)
 Q
"RTN","ICDTBL9C",34,0)
DRG945 ;
"RTN","ICDTBL9C",35,0)
DRG946 S ICDRG=$S(ICDMCC>0:945,1:946) D DRG941 Q
"RTN","ICDTBL9C",36,0)
DRG947 ;
"RTN","ICDTBL9C",37,0)
DRG948 S ICDRG=$S(ICDMCC=2:947,1:948) D DRG941 Q
"RTN","ICDTBL9C",38,0)
DRG949 ;
"RTN","ICDTBL9C",39,0)
DRG950 S ICDRG=$S(ICDMCC>0:949,1:950) D DRG941 Q
"RTN","ICDTBL9C",40,0)
DRG951 S ICDRG=951 D DRG941 Q
"RTN","ICDTBL9C",41,0)
DRG955 S ICDRG=955 Q
"RTN","ICDTBL9C",42,0)
DRG956 S ICDRG=956 Q
"RTN","ICDTBL9C",43,0)
DRG957 ;
"RTN","ICDTBL9C",44,0)
DRG958 ;
"RTN","ICDTBL9C",45,0)
DRG959 S ICDRG=$S(ICDMCC=2:957,ICDMCC=1:958,1:959) Q
"RTN","ICDTBL9C",46,0)
DRG963 ;
"RTN","ICDTBL9C",47,0)
DRG964 ;
"RTN","ICDTBL9C",48,0)
DRG965 S ICDRG=$S(ICDMCC=2:963,ICDMCC=1:964,1:965) Q
"RTN","ICDTBL9C",49,0)
DRG969 ;
"RTN","ICDTBL9C",50,0)
DRG970 S ICDRG=$S(ICDMCC=2:969,1:970) Q
"RTN","ICDTBL9C",51,0)
DRG974 ;
"RTN","ICDTBL9C",52,0)
DRG975 ;
"RTN","ICDTBL9C",53,0)
DRG976 S ICDRG=$S(ICDMCC=2:974,ICDMCC=1:975,1:976) Q
"RTN","ICDTBL9C",54,0)
DRG977 S ICDRG=977 Q
"RTN","ICDTBL9C",55,0)
DRG981 ;
"RTN","ICDTBL9C",56,0)
DRG982 ;
"RTN","ICDTBL9C",57,0)
DRG983 I ICDDX(1)=$$CODEBA^ICDEX("V278.01",80)&($D(ICDDXT("V85.43"))) S ICDRG=983  Q 
"RTN","ICDTBL9C",58,0)
 S ICDRG=$S(ICDMCC=2:981,ICDMCC=1:982,1:983) Q
"RTN","ICDTBL9C",59,0)
DRG984 ;
"RTN","ICDTBL9C",60,0)
DRG985 ;
"RTN","ICDTBL9C",61,0)
DRG986 S ICDRG=$S(ICDMCC=2:984,ICDMCC=1:985,1:986) Q
"RTN","ICDTBL9C",62,0)
DRG987 ;
"RTN","ICDTBL9C",63,0)
DRG988 ;
"RTN","ICDTBL9C",64,0)
DRG989 S ICDRG=$S(ICDMCC=2:987,ICDMCC=1:988,1:989) Q
"RTN","ICDTBL9C",65,0)
DRG998 S ICDRG=998 Q
"RTN","ICDTBL9C",66,0)
DRG999 S ICDRG=999 Q
"RTN","ICDTBL9C",67,0)
 Q
"RTN","ICDTBL9D")
0^38^B5269928^B5060180
"RTN","ICDTBL9D",1,0)
ICDTBL9D ;ALB/MJB/KUM - GROUPER UTILITY FUNCTIONS;08/09/2010
"RTN","ICDTBL9D",2,0)
 ;;18.0;DRG Grouper;**56,69,64**;Oct 20, 2000;Build 103
"RTN","ICDTBL9D",3,0)
 ;
"RTN","ICDTBL9D",4,0)
DRG901 ;
"RTN","ICDTBL9D",5,0)
DRG902 ;
"RTN","ICDTBL9D",6,0)
DRG903 S ICDRG=$S(ICDMCC=2:901,ICDMCC=1:902,1:903) Q
"RTN","ICDTBL9D",7,0)
DRG904 ;
"RTN","ICDTBL9D",8,0)
DRG905 S ICDRG=$S(ICDMCC>0:904,1:905) Q
"RTN","ICDTBL9D",9,0)
DRG906 S ICDRG=906 Q
"RTN","ICDTBL9D",10,0)
DRG907 ;
"RTN","ICDTBL9D",11,0)
DRG908 ;
"RTN","ICDTBL9D",12,0)
DRG909 S ICDRG=$S(ICDMCC=2:907,ICDMCC=1:908,1:909) Q
"RTN","ICDTBL9D",13,0)
DRG913 ;
"RTN","ICDTBL9D",14,0)
DRG914 S ICDRG=$S(ICDMCC=2:913,1:914) Q
"RTN","ICDTBL9D",15,0)
DRG915 ;
"RTN","ICDTBL9D",16,0)
DRG916 S ICDRG=$S(ICDMCC=2:915,1:916) Q
"RTN","ICDTBL9D",17,0)
DRG917 ;
"RTN","ICDTBL9D",18,0)
DRG918 S ICDRG=$S(ICDMCC=2:917,1:918) Q
"RTN","ICDTBL9D",19,0)
DRG919 ;
"RTN","ICDTBL9D",20,0)
DRG920 ;
"RTN","ICDTBL9D",21,0)
DRG921 S ICDRG=$S(ICDMCC=2:919,ICDMCC=1:920,1:921) Q
"RTN","ICDTBL9D",22,0)
DRG922 ;
"RTN","ICDTBL9D",23,0)
DRG923 S ICDRG=$S(ICDMCC=2:922,1:923) Q
"RTN","ICDTBL9D",24,0)
DRG927 S ICDRG=927 Q
"RTN","ICDTBL9D",25,0)
DRG928 ;
"RTN","ICDTBL9D",26,0)
DRG929 S ICDRG=$S(ICDMCC>0:928,1:929) Q
"RTN","ICDTBL9D",27,0)
DRG933 S ICDRG=933 Q
"RTN","ICDTBL9D",28,0)
DRG934 S ICDRG=934 Q
"RTN","ICDTBL9D",29,0)
DRG935 S ICDRG=935 Q
"RTN","ICDTBL9D",30,0)
DRG939 ;
"RTN","ICDTBL9D",31,0)
DRG940 ;
"RTN","ICDTBL9D",32,0)
DRG941 I ICDOR["O" S ICDRG=$S(ICDMCC=2:939,ICDMCC=1:940,1:941) Q
"RTN","ICDTBL9D",33,0)
 Q
"RTN","ICDTBL9D",34,0)
DRG945 ;
"RTN","ICDTBL9D",35,0)
DRG946 S ICDRG=$S(ICDMCC>0:945,1:946) D DRG941 Q
"RTN","ICDTBL9D",36,0)
DRG947 ;
"RTN","ICDTBL9D",37,0)
DRG948 S ICDRG=$S(ICDMCC=2:947,1:948) D DRG941 Q
"RTN","ICDTBL9D",38,0)
DRG949 ;
"RTN","ICDTBL9D",39,0)
DRG950 S ICDRG=$S(ICDMCC>0:949,1:950) D DRG941 Q
"RTN","ICDTBL9D",40,0)
DRG951 S ICDRG=951 D DRG941 Q
"RTN","ICDTBL9D",41,0)
DRG955 S ICDRG=955 Q
"RTN","ICDTBL9D",42,0)
DRG956 S ICDRG=956 Q
"RTN","ICDTBL9D",43,0)
DRG957 ;
"RTN","ICDTBL9D",44,0)
DRG958 ;
"RTN","ICDTBL9D",45,0)
DRG959 S ICDRG=$S(ICDMCC=2:957,ICDMCC=1:958,1:959) Q
"RTN","ICDTBL9D",46,0)
DRG963 ;
"RTN","ICDTBL9D",47,0)
DRG964 ;
"RTN","ICDTBL9D",48,0)
DRG965 S ICDRG=$S(ICDMCC=2:963,ICDMCC=1:964,1:965) Q
"RTN","ICDTBL9D",49,0)
DRG969 ;
"RTN","ICDTBL9D",50,0)
DRG970 S ICDRG=$S(ICDMCC=2:969,1:970) Q
"RTN","ICDTBL9D",51,0)
DRG974 ;
"RTN","ICDTBL9D",52,0)
DRG975 ;
"RTN","ICDTBL9D",53,0)
DRG976 S ICDRG=$S(ICDMCC=2:974,ICDMCC=1:975,1:976) Q
"RTN","ICDTBL9D",54,0)
DRG977 S ICDRG=977 Q
"RTN","ICDTBL9D",55,0)
DRG981 ;
"RTN","ICDTBL9D",56,0)
DRG982 ;
"RTN","ICDTBL9D",57,0)
DRG983 I ((ICDOR["O")&(ICDOR["A")),ICDOTMP["40^41^42" D DRG42^ICDTBL0D Q
"RTN","ICDTBL9D",58,0)
 I ICDDX(1)=$$CODEBA^ICDEX("278.01",80)&($D(ICDDXT("V85.43"))) S ICDRG=983  Q 
"RTN","ICDTBL9D",59,0)
 S ICDRG=$S(ICDMCC=2:981,ICDMCC=1:982,1:983) Q
"RTN","ICDTBL9D",60,0)
DRG984 ;
"RTN","ICDTBL9D",61,0)
DRG985 ;
"RTN","ICDTBL9D",62,0)
DRG986 S ICDRG=$S(ICDMCC=2:984,ICDMCC=1:985,1:986) Q
"RTN","ICDTBL9D",63,0)
DRG987 ;
"RTN","ICDTBL9D",64,0)
DRG988 ;
"RTN","ICDTBL9D",65,0)
DRG989 S ICDRG=$S(ICDMCC=2:987,ICDMCC=1:988,1:989) Q
"RTN","ICDTBL9D",66,0)
DRG998 S ICDRG=998 Q
"RTN","ICDTBL9D",67,0)
DRG999 S ICDRG=999 Q
"RTN","ICDTBL9D",68,0)
 Q
"RTN","ICDTBL9E")
0^85^B5179109^B5060300
"RTN","ICDTBL9E",1,0)
ICDTBL9E ;ALB/JDG/SS - GROUPER UTILITY FUNCTIONS;08/09/2010
"RTN","ICDTBL9E",2,0)
 ;;18.0;DRG Grouper;**65,69,64**;Oct 20, 2000;Build 103
"RTN","ICDTBL9E",3,0)
DRG901 ;
"RTN","ICDTBL9E",4,0)
DRG902 ;
"RTN","ICDTBL9E",5,0)
DRG903 S ICDRG=$S(ICDMCC=2:901,ICDMCC=1:902,1:903) Q
"RTN","ICDTBL9E",6,0)
DRG904 ;
"RTN","ICDTBL9E",7,0)
DRG905 S ICDRG=$S(ICDMCC>0:904,1:905) Q
"RTN","ICDTBL9E",8,0)
DRG906 S ICDRG=906 Q
"RTN","ICDTBL9E",9,0)
DRG907 ;
"RTN","ICDTBL9E",10,0)
DRG908 ;
"RTN","ICDTBL9E",11,0)
DRG909 S ICDRG=$S(ICDMCC=2:907,ICDMCC=1:908,1:909) Q
"RTN","ICDTBL9E",12,0)
DRG913 ;
"RTN","ICDTBL9E",13,0)
DRG914 S ICDRG=$S(ICDMCC=2:913,1:914) Q
"RTN","ICDTBL9E",14,0)
DRG915 ;
"RTN","ICDTBL9E",15,0)
DRG916 S ICDRG=$S(ICDMCC=2:915,1:916) Q
"RTN","ICDTBL9E",16,0)
DRG917 ;
"RTN","ICDTBL9E",17,0)
DRG918 S ICDRG=$S(ICDMCC=2:917,1:918) Q
"RTN","ICDTBL9E",18,0)
DRG919 ;
"RTN","ICDTBL9E",19,0)
DRG920 ;
"RTN","ICDTBL9E",20,0)
DRG921 S ICDRG=$S(ICDMCC=2:919,ICDMCC=1:920,1:921) Q
"RTN","ICDTBL9E",21,0)
DRG922 ;
"RTN","ICDTBL9E",22,0)
DRG923 S ICDRG=$S(ICDMCC=2:922,1:923) Q
"RTN","ICDTBL9E",23,0)
DRG927 S ICDRG=927 Q
"RTN","ICDTBL9E",24,0)
DRG928 ;
"RTN","ICDTBL9E",25,0)
DRG929 S ICDRG=$S(ICDMCC>0:928,1:929) Q
"RTN","ICDTBL9E",26,0)
DRG933 S ICDRG=933 Q
"RTN","ICDTBL9E",27,0)
DRG934 S ICDRG=934 Q
"RTN","ICDTBL9E",28,0)
DRG935 S ICDRG=935 Q
"RTN","ICDTBL9E",29,0)
DRG939 ;
"RTN","ICDTBL9E",30,0)
DRG940 ;
"RTN","ICDTBL9E",31,0)
DRG941 I ICDOR["O" S ICDRG=$S(ICDMCC=2:939,ICDMCC=1:940,1:941) Q
"RTN","ICDTBL9E",32,0)
 Q
"RTN","ICDTBL9E",33,0)
DRG945 ;
"RTN","ICDTBL9E",34,0)
DRG946 S ICDRG=$S(ICDMCC>0:945,1:946) D DRG941 Q
"RTN","ICDTBL9E",35,0)
DRG947 ;
"RTN","ICDTBL9E",36,0)
DRG948 S ICDRG=$S(ICDMCC=2:947,1:948) D DRG941 Q
"RTN","ICDTBL9E",37,0)
DRG949 ;
"RTN","ICDTBL9E",38,0)
DRG950 S ICDRG=$S(ICDMCC>0:949,1:950) D DRG941 Q
"RTN","ICDTBL9E",39,0)
DRG951 S ICDRG=951 D DRG941 Q
"RTN","ICDTBL9E",40,0)
DRG955 S ICDRG=955 Q
"RTN","ICDTBL9E",41,0)
DRG956 S ICDRG=956 Q
"RTN","ICDTBL9E",42,0)
DRG957 ;
"RTN","ICDTBL9E",43,0)
DRG958 ;
"RTN","ICDTBL9E",44,0)
DRG959 S ICDRG=$S(ICDMCC=2:957,ICDMCC=1:958,1:959) Q
"RTN","ICDTBL9E",45,0)
DRG963 ;
"RTN","ICDTBL9E",46,0)
DRG964 ;
"RTN","ICDTBL9E",47,0)
DRG965 S ICDRG=$S(ICDMCC=2:963,ICDMCC=1:964,1:965) Q
"RTN","ICDTBL9E",48,0)
DRG969 ;
"RTN","ICDTBL9E",49,0)
DRG970 S ICDRG=$S(ICDMCC=2:969,1:970) Q
"RTN","ICDTBL9E",50,0)
DRG974 ;
"RTN","ICDTBL9E",51,0)
DRG975 ;
"RTN","ICDTBL9E",52,0)
DRG976 S ICDRG=$S(ICDMCC=2:974,ICDMCC=1:975,1:976) Q
"RTN","ICDTBL9E",53,0)
DRG977 S ICDRG=977 Q
"RTN","ICDTBL9E",54,0)
DRG981 ;
"RTN","ICDTBL9E",55,0)
DRG982 ;
"RTN","ICDTBL9E",56,0)
DRG983 I ((ICDOR["O")&(ICDOR["A")),ICDOTMP["40^41^42" D DRG42^ICDTBL0E Q
"RTN","ICDTBL9E",57,0)
 I ICDDX(1)=$$CODEBA^ICDEX("278.01",80)&($D(ICDDXT("V85.43"))) S ICDRG=983  Q 
"RTN","ICDTBL9E",58,0)
 S ICDRG=$S(ICDMCC=2:981,ICDMCC=1:982,1:983) Q
"RTN","ICDTBL9E",59,0)
DRG984 ;
"RTN","ICDTBL9E",60,0)
DRG985 ;
"RTN","ICDTBL9E",61,0)
DRG986 S ICDRG=$S(ICDMCC=2:984,ICDMCC=1:985,1:986) Q
"RTN","ICDTBL9E",62,0)
DRG987 ;
"RTN","ICDTBL9E",63,0)
DRG988 ;
"RTN","ICDTBL9E",64,0)
DRG989 S ICDRG=$S(ICDMCC=2:987,ICDMCC=1:988,1:989) Q
"RTN","ICDTBL9E",65,0)
DRG998 S ICDRG=998 Q
"RTN","ICDTBL9E",66,0)
DRG999 S ICDRG=999 Q
"RTN","ICDTBL9E",67,0)
 Q
"RTN","ICDTLB4A")
0^24^B18195336^B17888489
"RTN","ICDTLB4A",1,0)
ICDTLB4A ;ALB/EG/KUM - GROUPER UTILITY FUNCTIONS FY 2005;10/23/00 11:48am
"RTN","ICDTLB4A",2,0)
 ;;18.0;DRG Grouper;**14,64**;Oct 20, 2000;Build 103
"RTN","ICDTLB4A",3,0)
 ;
"RTN","ICDTLB4A",4,0)
DRG263 S ICDRG=$S(ICDPD["U"&(ICDCC):263,ICDPD["U":264,ICDCC:265,1:266) Q
"RTN","ICDTLB4A",5,0)
DRG264 S ICDRG=$S(ICDPD["U"&(ICDCC):263,ICDPD["U":264,ICDCC:265,1:266) Q
"RTN","ICDTLB4A",6,0)
DRG265 S ICDRG=$S(ICDPD["U"&(ICDCC):263,ICDPD["U":264,ICDCC:265,1:266) Q
"RTN","ICDTLB4A",7,0)
DRG266 S ICDRG=$S(ICDPD["U"&(ICDCC):263,ICDPD["U":264,ICDCC:265,1:266) Q
"RTN","ICDTLB4A",8,0)
DRG269 S ICDRG=$S(ICDCC:269,1:270) Q
"RTN","ICDTLB4A",9,0)
DRG270 S ICDRG=$S(ICDCC:269,1:270) Q
"RTN","ICDTLB4A",10,0)
DRG272 S ICDRG=$S(ICDCC:272,1:273) Q
"RTN","ICDTLB4A",11,0)
DRG273 S ICDRG=$S(ICDCC:272,1:273) Q
"RTN","ICDTLB4A",12,0)
DRG274 S ICDRG=$S(ICDCC:274,1:275) Q
"RTN","ICDTLB4A",13,0)
DRG275 S ICDRG=$S(ICDCC:274,1:275) Q
"RTN","ICDTLB4A",14,0)
DRG277 S ICDRG=$S(AGE<18:279,ICDCC:277,1:278) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",15,0)
 Q
"RTN","ICDTLB4A",16,0)
DRG278 D DRG277 Q
"RTN","ICDTLB4A",17,0)
 Q
"RTN","ICDTLB4A",18,0)
DRG279 D DRG277 Q
"RTN","ICDTLB4A",19,0)
 Q
"RTN","ICDTLB4A",20,0)
DRG280 S ICDRG=$S(AGE<18:282,ICDCC:280,1:281) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",21,0)
 Q
"RTN","ICDTLB4A",22,0)
DRG281 S ICDRG=$S(AGE<18:282,ICDCC:280,1:281) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",23,0)
 Q
"RTN","ICDTLB4A",24,0)
DRG282 S ICDRG=$S(AGE<18:282,ICDCC:280,1:281) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",25,0)
 Q
"RTN","ICDTLB4A",26,0)
DRG283 S ICDRG=$S('$D(ICDODRG)&(ICDORNR>0):468,ICDCC=1:283,1:284) Q
"RTN","ICDTLB4A",27,0)
DRG284 S ICDRG=$S('$D(ICDODRG)&(ICDORNR>0):468,ICDCC:283,1:284) Q
"RTN","ICDTLB4A",28,0)
DRG292 S ICDRG=$S($D(ICDOP(" 55.69")):302,ICDCC:292,1:293) Q
"RTN","ICDTLB4A",29,0)
DRG293 S ICDRG=$S($D(ICDOP(" 55.69")):302,ICDCC:292,1:293) Q
"RTN","ICDTLB4A",30,0)
DRG294 S ICDRG=$S(AGE<36:295,1:294) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",31,0)
 Q
"RTN","ICDTLB4A",32,0)
DRG295 S ICDRG=$S(AGE<36:295,1:294) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",33,0)
 Q
"RTN","ICDTLB4A",34,0)
DRG296 S ICDRG=$S(AGE<18:298,ICDCC:296,1:297) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",35,0)
 Q
"RTN","ICDTLB4A",36,0)
DRG297 S ICDRG=$S(AGE<18:298,ICDCC:296,1:297) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",37,0)
 Q
"RTN","ICDTLB4A",38,0)
DRG298 S ICDRG=$S(AGE<18:298,ICDCC:296,1:297) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",39,0)
 Q
"RTN","ICDTLB4A",40,0)
DRG299 S ICDRG=299 Q
"RTN","ICDTLB4A",41,0)
DRG300 S ICDRG=$S(ICDCC:300,1:301) Q
"RTN","ICDTLB4A",42,0)
DRG301 S ICDRG=$S(ICDCC:300,1:301) Q
"RTN","ICDTLB4A",43,0)
DRG302 S ICDRG=$S($D(ICDOP(" 55.69")):302,1:ICDRG) Q
"RTN","ICDTLB4A",44,0)
DRG303 S ICDRG=$S(ICDPD["M":303,ICDCC:304,1:305) Q
"RTN","ICDTLB4A",45,0)
DRG304 S ICDRG=$S(ICDPD["M":303,ICDCC:304,1:305) Q
"RTN","ICDTLB4A",46,0)
DRG305 S ICDRG=$S(ICDPD["M":303,ICDCC:304,1:305) Q
"RTN","ICDTLB4A",47,0)
DRG306 S ICDRG=$S($D(ICDODRG(308))!($D(ICDODRG(309))):$S(ICDCC:308,1:309),ICDCC:306,1:307) Q
"RTN","ICDTLB4A",48,0)
DRG307 S ICDRG=$S($D(ICDODRG(308))!($D(ICDODRG(309))):$S(ICDCC:308,1:309),ICDCC:306,1:307) Q
"RTN","ICDTLB4A",49,0)
DRG308 S ICDRG=$S($D(ICDODRG(308))!($D(ICDODRG(309))):$S(ICDCC:308,1:309),ICDCC:306,1:307) Q
"RTN","ICDTLB4A",50,0)
DRG309 S ICDRG=$S($D(ICDODRG(308))!($D(ICDODRG(309))):$S(ICDCC:308,1:309),ICDCC:306,1:307) Q
"RTN","ICDTLB4A",51,0)
DRG310 S ICDRG=$S(ICDCC:310,1:311) Q
"RTN","ICDTLB4A",52,0)
DRG311 S ICDRG=$S(ICDCC:310,1:311) Q
"RTN","ICDTLB4A",53,0)
DRG312 S ICDRG=$S(AGE<18:314,ICDCC:312,1:313) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",54,0)
 Q
"RTN","ICDTLB4A",55,0)
DRG313 S ICDRG=$S(AGE<18:314,ICDCC:312,1:313) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",56,0)
 Q
"RTN","ICDTLB4A",57,0)
DRG314 S ICDRG=$S(AGE<18:314,ICDCC:312,1:313) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",58,0)
 Q
"RTN","ICDTLB4A",59,0)
DRG315 I ICDORNI["V"&($D(ICDOP(" 86.07")))!((ICDDX(1)=$$CODEBA^ICDEX("V250.41",80))!(ICDDX(1)=$$CODEBA^ICDEX("V250.43",80)))&($D(ICDOP(" 52.84"))!$D(ICDOP(" 52.85"))) S ICDDRG=315
"RTN","ICDTLB4A",60,0)
 Q
"RTN","ICDTLB4A",61,0)
DRG318 S ICDRG=$S(ICDCC:318,1:319) Q
"RTN","ICDTLB4A",62,0)
DRG319 S ICDRG=$S(ICDCC:318,1:319) Q
"RTN","ICDTLB4A",63,0)
DRG320 S ICDRG=$S(AGE<18:322,ICDCC:320,1:321) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",64,0)
 Q
"RTN","ICDTLB4A",65,0)
DRG321 S ICDRG=$S(AGE<18:322,ICDCC:320,1:321) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",66,0)
 Q
"RTN","ICDTLB4A",67,0)
DRG322 S ICDRG=$S(AGE<18:322,ICDCC:320,1:321) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",68,0)
 Q
"RTN","ICDTLB4A",69,0)
DRG323 S ICDRG=$S('$D(ICDPDRG(323)):"",ICDCC!($D(ICDOP(" 98.51")))!($D(ICDSDRG(323))):323,1:324) Q
"RTN","ICDTLB4A",70,0)
DRG324 S ICDRG=$S(ICDCC!($D(ICDOP(" 98.51")))!($D(ICDSDRG(323))):323,1:324) Q
"RTN","ICDTLB4A",71,0)
DRG325 S ICDRG=$S(AGE<18:327,ICDCC:325,1:326) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",72,0)
 Q
"RTN","ICDTLB4A",73,0)
DRG326 S ICDRG=$S(AGE<18:327,ICDCC:325,1:326) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",74,0)
 Q
"RTN","ICDTLB4A",75,0)
DRG327 S ICDRG=$S(AGE<18:327,ICDCC:325,1:326) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",76,0)
 Q
"RTN","ICDTLB4A",77,0)
DRG328 S ICDRG=$S(AGE<18:330,ICDCC:328,1:329) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",78,0)
 Q
"RTN","ICDTLB4A",79,0)
DRG329 S ICDRG=$S(AGE<18:330,ICDCC:328,1:329) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",80,0)
 Q
"RTN","ICDTLB4A",81,0)
DRG330 S ICDRG=$S(AGE<18:330,ICDCC:328,1:329) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",82,0)
 Q
"RTN","ICDTLB4A",83,0)
DRG331 S ICDRG=$S(AGE<18:333,ICDCC:331,1:332) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",84,0)
 Q
"RTN","ICDTLB4A",85,0)
DRG332 S ICDRG=$S(AGE<18:333,ICDCC:331,1:332) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",86,0)
 Q
"RTN","ICDTLB4A",87,0)
DRG333 S ICDRG=$S(AGE<18:333,ICDCC:331,1:332) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4A",88,0)
 Q
"RTN","ICDTLB4B")
0^25^B18194277^B17888498
"RTN","ICDTLB4B",1,0)
ICDTLB4B ;ALB/EG/KUM - GROUPER UTILITY FUNCTIONS FY 2006;10/23/00 11:48am
"RTN","ICDTLB4B",2,0)
 ;;18.0;DRG Grouper;**20,64**;Oct 20, 2000;Build 103
"RTN","ICDTLB4B",3,0)
 ;
"RTN","ICDTLB4B",4,0)
DRG263 S ICDRG=$S(ICDPD["U"&(ICDCC):263,ICDPD["U":264,ICDCC:265,1:266) Q
"RTN","ICDTLB4B",5,0)
DRG264 S ICDRG=$S(ICDPD["U"&(ICDCC):263,ICDPD["U":264,ICDCC:265,1:266) Q
"RTN","ICDTLB4B",6,0)
DRG265 S ICDRG=$S(ICDPD["U"&(ICDCC):263,ICDPD["U":264,ICDCC:265,1:266) Q
"RTN","ICDTLB4B",7,0)
DRG266 S ICDRG=$S(ICDPD["U"&(ICDCC):263,ICDPD["U":264,ICDCC:265,1:266) Q
"RTN","ICDTLB4B",8,0)
DRG269 S ICDRG=$S(ICDCC:269,1:270) Q
"RTN","ICDTLB4B",9,0)
DRG270 S ICDRG=$S(ICDCC:269,1:270) Q
"RTN","ICDTLB4B",10,0)
DRG272 S ICDRG=$S(ICDCC:272,1:273) Q
"RTN","ICDTLB4B",11,0)
DRG273 S ICDRG=$S(ICDCC:272,1:273) Q
"RTN","ICDTLB4B",12,0)
DRG274 S ICDRG=$S(ICDCC:274,1:275) Q
"RTN","ICDTLB4B",13,0)
DRG275 S ICDRG=$S(ICDCC:274,1:275) Q
"RTN","ICDTLB4B",14,0)
DRG277 S ICDRG=$S(AGE<18:279,ICDCC:277,1:278) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",15,0)
 Q
"RTN","ICDTLB4B",16,0)
DRG278 D DRG277 Q
"RTN","ICDTLB4B",17,0)
 Q
"RTN","ICDTLB4B",18,0)
DRG279 D DRG277 Q
"RTN","ICDTLB4B",19,0)
 Q
"RTN","ICDTLB4B",20,0)
DRG280 S ICDRG=$S(AGE<18:282,ICDCC:280,1:281) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",21,0)
 Q
"RTN","ICDTLB4B",22,0)
DRG281 S ICDRG=$S(AGE<18:282,ICDCC:280,1:281) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",23,0)
 Q
"RTN","ICDTLB4B",24,0)
DRG282 S ICDRG=$S(AGE<18:282,ICDCC:280,1:281) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",25,0)
 Q
"RTN","ICDTLB4B",26,0)
DRG283 S ICDRG=$S('$D(ICDODRG)&(ICDORNR>0):468,ICDCC=1:283,1:284) Q
"RTN","ICDTLB4B",27,0)
DRG284 S ICDRG=$S('$D(ICDODRG)&(ICDORNR>0):468,ICDCC:283,1:284) Q
"RTN","ICDTLB4B",28,0)
DRG292 S ICDRG=$S($D(ICDOP(" 55.69")):302,ICDCC:292,1:293) Q
"RTN","ICDTLB4B",29,0)
DRG293 S ICDRG=$S($D(ICDOP(" 55.69")):302,ICDCC:292,1:293) Q
"RTN","ICDTLB4B",30,0)
DRG294 S ICDRG=$S(AGE<36:295,1:294) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",31,0)
 Q
"RTN","ICDTLB4B",32,0)
DRG295 S ICDRG=$S(AGE<36:295,1:294) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",33,0)
 Q
"RTN","ICDTLB4B",34,0)
DRG296 S ICDRG=$S(AGE<18:298,ICDCC:296,1:297) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",35,0)
 Q
"RTN","ICDTLB4B",36,0)
DRG297 S ICDRG=$S(AGE<18:298,ICDCC:296,1:297) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",37,0)
 Q
"RTN","ICDTLB4B",38,0)
DRG298 S ICDRG=$S(AGE<18:298,ICDCC:296,1:297) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",39,0)
 Q
"RTN","ICDTLB4B",40,0)
DRG299 S ICDRG=299 Q
"RTN","ICDTLB4B",41,0)
DRG300 S ICDRG=$S(ICDCC:300,1:301) Q
"RTN","ICDTLB4B",42,0)
DRG301 S ICDRG=$S(ICDCC:300,1:301) Q
"RTN","ICDTLB4B",43,0)
DRG302 S ICDRG=$S($D(ICDOP(" 55.69")):302,1:ICDRG) Q
"RTN","ICDTLB4B",44,0)
DRG303 S ICDRG=$S(ICDPD["M":303,ICDCC:304,1:305) Q
"RTN","ICDTLB4B",45,0)
DRG304 S ICDRG=$S(ICDPD["M":303,ICDCC:304,1:305) Q
"RTN","ICDTLB4B",46,0)
DRG305 S ICDRG=$S(ICDPD["M":303,ICDCC:304,1:305) Q
"RTN","ICDTLB4B",47,0)
DRG306 S ICDRG=$S($D(ICDODRG(308))!($D(ICDODRG(309))):$S(ICDCC:308,1:309),ICDCC:306,1:307) Q
"RTN","ICDTLB4B",48,0)
DRG307 S ICDRG=$S($D(ICDODRG(308))!($D(ICDODRG(309))):$S(ICDCC:308,1:309),ICDCC:306,1:307) Q
"RTN","ICDTLB4B",49,0)
DRG308 S ICDRG=$S($D(ICDODRG(308))!($D(ICDODRG(309))):$S(ICDCC:308,1:309),ICDCC:306,1:307) Q
"RTN","ICDTLB4B",50,0)
DRG309 S ICDRG=$S($D(ICDODRG(308))!($D(ICDODRG(309))):$S(ICDCC:308,1:309),ICDCC:306,1:307) Q
"RTN","ICDTLB4B",51,0)
DRG310 S ICDRG=$S(ICDCC:310,1:311) Q
"RTN","ICDTLB4B",52,0)
DRG311 S ICDRG=$S(ICDCC:310,1:311) Q
"RTN","ICDTLB4B",53,0)
DRG312 S ICDRG=$S(AGE<18:314,ICDCC:312,1:313) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",54,0)
 Q
"RTN","ICDTLB4B",55,0)
DRG313 S ICDRG=$S(AGE<18:314,ICDCC:312,1:313) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",56,0)
 Q
"RTN","ICDTLB4B",57,0)
DRG314 S ICDRG=$S(AGE<18:314,ICDCC:312,1:313) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",58,0)
 Q
"RTN","ICDTLB4B",59,0)
DRG315 I ICDORNI["V"&($D(ICDOP(" 86.07")))!((ICDDX(1)=$$CODEBA^ICDEX("V250.41",80)!(ICDDX(1)=$$CODEBA^ICDEX("V250.43",80)))&($D(ICDOP(" 52.84"))!$D(ICDOP(" 52.85")))) S ICDDRG=315
"RTN","ICDTLB4B",60,0)
 Q
"RTN","ICDTLB4B",61,0)
DRG318 S ICDRG=$S(ICDCC:318,1:319) Q
"RTN","ICDTLB4B",62,0)
DRG319 S ICDRG=$S(ICDCC:318,1:319) Q
"RTN","ICDTLB4B",63,0)
DRG320 S ICDRG=$S(AGE<18:322,ICDCC:320,1:321) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",64,0)
 Q
"RTN","ICDTLB4B",65,0)
DRG321 S ICDRG=$S(AGE<18:322,ICDCC:320,1:321) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",66,0)
 Q
"RTN","ICDTLB4B",67,0)
DRG322 S ICDRG=$S(AGE<18:322,ICDCC:320,1:321) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",68,0)
 Q
"RTN","ICDTLB4B",69,0)
DRG323 S ICDRG=$S('$D(ICDPDRG(323)):"",ICDCC!($D(ICDOP(" 98.51")))!($D(ICDSDRG(323))):323,1:324) Q
"RTN","ICDTLB4B",70,0)
DRG324 S ICDRG=$S(ICDCC!($D(ICDOP(" 98.51")))!($D(ICDSDRG(323))):323,1:324) Q
"RTN","ICDTLB4B",71,0)
DRG325 S ICDRG=$S(AGE<18:327,ICDCC:325,1:326) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",72,0)
 Q
"RTN","ICDTLB4B",73,0)
DRG326 S ICDRG=$S(AGE<18:327,ICDCC:325,1:326) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",74,0)
 Q
"RTN","ICDTLB4B",75,0)
DRG327 S ICDRG=$S(AGE<18:327,ICDCC:325,1:326) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",76,0)
 Q
"RTN","ICDTLB4B",77,0)
DRG328 S ICDRG=$S(AGE<18:330,ICDCC:328,1:329) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",78,0)
 Q
"RTN","ICDTLB4B",79,0)
DRG329 S ICDRG=$S(AGE<18:330,ICDCC:328,1:329) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",80,0)
 Q
"RTN","ICDTLB4B",81,0)
DRG330 S ICDRG=$S(AGE<18:330,ICDCC:328,1:329) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",82,0)
 Q
"RTN","ICDTLB4B",83,0)
DRG331 S ICDRG=$S(AGE<18:333,ICDCC:331,1:332) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",84,0)
 Q
"RTN","ICDTLB4B",85,0)
DRG332 S ICDRG=$S(AGE<18:333,ICDCC:331,1:332) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",86,0)
 Q
"RTN","ICDTLB4B",87,0)
DRG333 S ICDRG=$S(AGE<18:333,ICDCC:331,1:332) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB4B",88,0)
 Q
"RTN","ICDTLB6")
0^26^B36196041^B35811469
"RTN","ICDTLB6",1,0)
ICDTLB6 ;ALB/EG/MRY/KUM - GROUPER UTILITY FUNCTIONS ;22 Mar 2013  4:01 PM
"RTN","ICDTLB6",2,0)
 ;;18.0;DRG Grouper;**2,5,10,64**;Oct 20, 2000;Build 103
"RTN","ICDTLB6",3,0)
 ;
"RTN","ICDTLB6",4,0)
DRG403 S ICDRG=$S(ICDPD["l":$S(AGE="":470,AGE<18:405,1:473),ICDOR["O"!(ICDORNI["O"):$S(ICDCC:401,1:402),ICDCC:403,1:404),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6",5,0)
DRG404 S ICDRG=$S(ICDPD["l":$S(AGE="":470,AGE<18:405,1:473),ICDOR["O"!(ICDORNI["O"):$S(ICDCC:401,1:402),ICDCC:403,1:404),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6",6,0)
DRG405 D DRG404 Q
"RTN","ICDTLB6",7,0)
DRG406 ;
"RTN","ICDTLB6",8,0)
 I ICDORNI["K" D
"RTN","ICDTLB6",9,0)
 .S ICDRG=$S((ICDPD["L")&(ICDCC):539,ICDPD["L":540,ICDCC:406,1:407)
"RTN","ICDTLB6",10,0)
 I ICDORNI'["K" D DRG408
"RTN","ICDTLB6",11,0)
 Q
"RTN","ICDTLB6",12,0)
DRG407 D DRG406 Q
"RTN","ICDTLB6",13,0)
DRG408 I $D(ICDDX(1))&(ICDOPCT=0) D  Q:ICDRG=409
"RTN","ICDTLB6",14,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.0",80) S ICDRG=409 Q
"RTN","ICDTLB6",15,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V67.1",80) S ICDRG=409 Q
"RTN","ICDTLB6",16,0)
 .Q
"RTN","ICDTLB6",17,0)
 I $D(ICDDX(1))&(ICDOPCT=0) D  Q:"410^492"[ICDRG
"RTN","ICDTLB6",18,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.1",80) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB6",19,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V67.2",80) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB6",20,0)
 I ICDOPCT>0 S ICDRG=$S(ICDPD'["L":408,ICDCC:401,1:402) Q
"RTN","ICDTLB6",21,0)
 I ICDOPCT=0 D DRG412
"RTN","ICDTLB6",22,0)
 Q
"RTN","ICDTLB6",23,0)
DRG411 S ICDRG=$S(ICDOR["O"!(ICDORNI["O"):408,ICDOR["N":412,1:411) Q
"RTN","ICDTLB6",24,0)
DRG412 ;S ICDRG=$S(ICDOR["O"!(ICDORNI["O"):408,ICDOR["N"&($D(ICDPDRG(412))):412,$D(ICDPDRG(411)):411,ICDCC:413,1:414)
"RTN","ICDTLB6",25,0)
 I ICDOPCT>0 D DRG408 Q
"RTN","ICDTLB6",26,0)
 D DRG412^ICDTLB61
"RTN","ICDTLB6",27,0)
 Q
"RTN","ICDTLB6",28,0)
DRG413 S ICDRG=$S(ICDCC:413,1:414) Q
"RTN","ICDTLB6",29,0)
DRG414 S ICDRG=$S(ICDCC:413,1:414) Q
"RTN","ICDTLB6",30,0)
DRG416 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE>17:416,1:417),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6",31,0)
DRG417 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE>17:416,1:417),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6",32,0)
DRG418 S ICDRG=$S(ICDOR["O":415,1:418) Q
"RTN","ICDTLB6",33,0)
DRG419 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE<18:422,ICDCC:419,1:420),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6",34,0)
DRG420 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE<18:422,ICDCC:419,1:420),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6",35,0)
DRG421 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE>17:421,1:422),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6",36,0)
DRG422 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE>17:421,1:422),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6",37,0)
DRG423 S ICDRG=$S(ICDOR["O":415,1:423) Q
"RTN","ICDTLB6",38,0)
DRG424 S ICDRG=$S(ICDOR["O":424,1:425) Q
"RTN","ICDTLB6",39,0)
DRG425 S ICDRG=$S(ICDOR["O":424,1:425) Q
"RTN","ICDTLB6",40,0)
DRG426 S ICDRG=$S(ICDOR["O":424,1:426) Q
"RTN","ICDTLB6",41,0)
DRG427 S ICDRG=$S(ICDOR["O":424,1:427) Q
"RTN","ICDTLB6",42,0)
DRG428 S ICDRG=$S(ICDOR["O":424,1:428) Q
"RTN","ICDTLB6",43,0)
DRG429 S ICDRG=$S(ICDOR["O":424,1:429) Q
"RTN","ICDTLB6",44,0)
DRG430 S ICDRG=$S(ICDOR["O":424,1:430) Q
"RTN","ICDTLB6",45,0)
DRG431 S ICDRG=$S(ICDOR["O":424,1:431) Q
"RTN","ICDTLB6",46,0)
DRG432 S ICDRG=$S(ICDOR["O":424,1:432) Q
"RTN","ICDTLB6",47,0)
DRG434 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6",48,0)
DRG435 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6",49,0)
DRG436 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6",50,0)
DRG437 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6",51,0)
DRG439 S ICDRG=$S($D(ICDODRG(440)):440,1:439) Q
"RTN","ICDTLB6",52,0)
DRG442 S ICDRG=$S(ICDCC:442,1:443) Q
"RTN","ICDTLB6",53,0)
DRG443 D EN1^ICDDRG5 S ICDRG=$S(ICDCC3:$S(ICDCC:442,1:443),1:"") Q
"RTN","ICDTLB6",54,0)
DRG444 S ICDRG=$S(AGE<18:446,ICDCC:444,1:445) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6",55,0)
 Q
"RTN","ICDTLB6",56,0)
DRG445 S ICDRG=$S(AGE<18:446,ICDCC:444,1:445) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6",57,0)
 Q
"RTN","ICDTLB6",58,0)
DRG446 S ICDRG=$S(AGE<18:446,ICDCC:444,1:445) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6",59,0)
 Q
"RTN","ICDTLB6",60,0)
DRG447 S ICDRG=$S(AGE>17:447,1:448) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6",61,0)
 Q
"RTN","ICDTLB6",62,0)
DRG448 S ICDRG=$S(AGE>17:447,1:448) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6",63,0)
 Q
"RTN","ICDTLB6",64,0)
DRG449 S ICDRG=$S(AGE<18:451,ICDCC:449,1:450) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6",65,0)
 Q
"RTN","ICDTLB6",66,0)
DRG450 S ICDRG=$S(AGE<18:451,ICDCC:449,1:450) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6",67,0)
 Q
"RTN","ICDTLB6",68,0)
DRG451 S ICDRG=$S(AGE<18:451,ICDCC:449,1:450) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6",69,0)
 Q
"RTN","ICDTLB6",70,0)
DRG452 S ICDRG=$S(ICDCC:452,1:453) Q
"RTN","ICDTLB6",71,0)
DRG453 S ICDRG=$S(ICDCC:452,1:453) Q
"RTN","ICDTLB6",72,0)
DRG454 S ICDRG=$S(ICDCC:454,1:455) Q
"RTN","ICDTLB6",73,0)
DRG455 S ICDRG=$S(ICDCC:454,1:455) Q
"RTN","ICDTLB6",74,0)
DRG462 S ICDRG=$S(ICDOR["O":461,1:462) Q
"RTN","ICDTLB6",75,0)
DRG463 S ICDRG=$S(ICDOR["O":461,ICDCC:463,1:464) Q
"RTN","ICDTLB6",76,0)
DRG464 S ICDRG=$S(ICDOR["O":461,ICDCC:463,1:464) Q
"RTN","ICDTLB6",77,0)
DRG465 S ICDRG=$S(ICDOR["O":461,ICDSD["m":465,1:466) Q
"RTN","ICDTLB6",78,0)
DRG466 S ICDRG=$S(ICDOR["O":461,ICDSD["m":465,1:466) Q
"RTN","ICDTLB6",79,0)
DRG467 S ICDRG=$S(ICDOR["O":461,1:467) Q
"RTN","ICDTLB6",80,0)
DRG471 S ICDRG=$S($F($P(ICDOR,"M",2,99),"M"):471,1:"") Q
"RTN","ICDTLB6",81,0)
DRG475 S ICDRG=$S(ICDOR["V":475,1:$S($D(ICDPDRG):$O(ICDPDRG(0)),1:468)) I ICDRG<468 D DODRG^ICDDRG0
"RTN","ICDTLB6",82,0)
 Q
"RTN","ICDTLB6",83,0)
DRG478 S ICDRG=$S(ICDOR["O"&ICDCC:478,1:479) Q
"RTN","ICDTLB6",84,0)
DRG479 S ICDRG=$S(ICDOR["O"&ICDCC:478,1:479) Q
"RTN","ICDTLB6",85,0)
DRG493 ;I (ICDI-1)=1,'ICDCC S ICDCC=$S($D(^ICD9("ACC",ICDDX(1),ICDDX(1))):1,1:0)
"RTN","ICDTLB6",86,0)
 S ICDRG=$S(ICDCC:493,1:494) Q
"RTN","ICDTLB6",87,0)
DRG494 ;I (ICD-1),'ICDCC S ICDCC=$S($D(^ICD9("ACC",ICDDX(1),ICDDX(1))):1,1:0)
"RTN","ICDTLB6",88,0)
 S ICDRG=$S(ICDCC:493,1:494) Q
"RTN","ICDTLB6",89,0)
DRG495 Q
"RTN","ICDTLB6",90,0)
DRG496 S ICDRG=$S(ICDOR["F":496,ICDCC:497,1:498) Q
"RTN","ICDTLB6",91,0)
DRG497 S ICDRG=$S(ICDOR["F":496,ICDCC:497,1:498) Q
"RTN","ICDTLB6",92,0)
DRG498 S ICDRG=$S(ICDOR["F":496,ICDCC:497,1:498) Q
"RTN","ICDTLB6",93,0)
DRG499 S ICDRG=$S(ICDCC:499,1:500) Q
"RTN","ICDTLB6",94,0)
DRG500 S ICDRG=$S(ICDCC:499,1:500) Q
"RTN","ICDTLB6",95,0)
DRG501 D
"RTN","ICDTLB6",96,0)
 . I (ICDPD["k") D
"RTN","ICDTLB6",97,0)
 .. I ICDCC S ICDRG=501
"RTN","ICDTLB6",98,0)
 .. I 'ICDCC S ICDRG=502
"RTN","ICDTLB6",99,0)
 . E  S ICDRG=503
"RTN","ICDTLB6",100,0)
 Q
"RTN","ICDTLB6",101,0)
DRG502 D DRG501 Q
"RTN","ICDTLB6",102,0)
DRG503 D DRG501 Q
"RTN","ICDTLB6",103,0)
DRG514 ; Replaced with DRG535
"RTN","ICDTLB6",104,0)
 N ICDE1,ICDE2
"RTN","ICDTLB6",105,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&($D(ICDOP(" 37.96"))):1,1:0)
"RTN","ICDTLB6",106,0)
 S ICDE2=$S($D(ICDOP(" 37.97"))&($D(ICDOP(" 37.98"))):1,1:0)
"RTN","ICDTLB6",107,0)
 S ICDRG=470
"RTN","ICDTLB6",108,0)
 I $D(ICDOP(" 37.94")) I ICDE1+ICDE2=0 S ICDRG=515
"RTN","ICDTLB6",109,0)
 I '$D(ICDOP(" 37.94")) I ICDE1!ICDE2 S ICDRG=515
"RTN","ICDTLB6",110,0)
 ; "HN" in ICDOR represents OR proc 37.21-.23, 37.26, 88.52-.58
"RTN","ICDTLB6",111,0)
 I ICDRG=515 I ICDOR["HN" S ICDRG=514
"RTN","ICDTLB6",112,0)
 Q
"RTN","ICDTLB6",113,0)
DRG515 D DRG535 Q
"RTN","ICDTLB6",114,0)
DRG516 I ICDOR["1" S ICDRG=518
"RTN","ICDTLB6",115,0)
 I (ICDOR["1") I $D(ICDOP(" 36.06"))!($D(ICDOP(" 92.27"))) S ICDRG=517
"RTN","ICDTLB6",116,0)
 I (ICDOR["1")&(ICDPD["AIC") S ICDRG=516
"RTN","ICDTLB6",117,0)
 I (ICDOR["1")&(ICDPD["AIC")&$D(ICDOP(" 36.07")) S ICDRG=526
"RTN","ICDTLB6",118,0)
 I (ICDOR["1")&(ICDPD'["AIC")&$D(ICDOP(" 36.07")) S ICDRG=527 ; ICD*18*5
"RTN","ICDTLB6",119,0)
 Q
"RTN","ICDTLB6",120,0)
DRG517 D DRG516 Q
"RTN","ICDTLB6",121,0)
DRG518 D DRG516 Q
"RTN","ICDTLB6",122,0)
DRG519 S ICDRG=$S(ICDOR["F":496,ICDCC:519,1:520) Q
"RTN","ICDTLB6",123,0)
DRG520 D DRG519 Q
"RTN","ICDTLB6",124,0)
DRG521 S ICDRG=$S(ICDCC:521,ICDOR["D"!(ICDOR["R"):522,1:523) Q
"RTN","ICDTLB6",125,0)
DRG522 D DRG521 Q
"RTN","ICDTLB6",126,0)
DRG523 D DRG521 Q
"RTN","ICDTLB6",127,0)
DRG526 D DRG516 Q
"RTN","ICDTLB6",128,0)
DRG527 D DRG516 Q
"RTN","ICDTLB6",129,0)
DRG531 S ICDRG=$S(ICDCC:531,1:532) Q
"RTN","ICDTLB6",130,0)
DRG532 D DRG531 Q
"RTN","ICDTLB6",131,0)
DRG533 S ICDRG=$S(ICDCC:533,1:534) Q
"RTN","ICDTLB6",132,0)
DRG534 D DRG533 Q
"RTN","ICDTLB6",133,0)
DRG535 N ICDE1,ICDE2,ICDE3
"RTN","ICDTLB6",134,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&(($D(ICDOP(" 37.96")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTLB6",135,0)
 S ICDE2=$S($D(ICDOP(" 37.97"))&(($D(ICDOP(" 37.98")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTLB6",136,0)
 S ICDE3=$S($D(ICDOP(" 00.52"))&($D(ICDOP(" 00.54"))):1,1:0)
"RTN","ICDTLB6",137,0)
 ;S ICDE4=$S($D(ICDOP(" 00.54"))&($D(ICDOP(" 37.95"))):1,1:0)
"RTN","ICDTLB6",138,0)
 S ICDRG=470
"RTN","ICDTLB6",139,0)
 I $D(ICDOP(" 37.94"))!$D(ICDOP(" 00.51")) I ICDE1+ICDE2+ICDE3=0 S ICDRG=515
"RTN","ICDTLB6",140,0)
 I '$D(ICDOP(" 37.94"))&('$D(ICDOP(" 00.51"))) I ICDE1!ICDE2!ICDE3 S ICDRG=515
"RTN","ICDTLB6",141,0)
 ; "HN" in ICDOR represents OR proc 37.21-.23, 37.26, 88.52-.58
"RTN","ICDTLB6",142,0)
 I ICDRG=515 I ICDOR["HN" S ICDRG=$S(ICDPD["A":535,1:536)
"RTN","ICDTLB6",143,0)
 I ICDRG=470 D DRG115^ICDTLB2
"RTN","ICDTLB6",144,0)
 Q
"RTN","ICDTLB6",145,0)
DRG536 D DRG535 Q
"RTN","ICDTLB6",146,0)
DRG537 S ICDRG=$S(ICDCC:537,1:538) Q
"RTN","ICDTLB6",147,0)
DRG538 D DRG537 Q
"RTN","ICDTLB6",148,0)
DRG539 I ICDPD["L"&(ICDMAJ'[3) D DRG401^ICDTLB5 Q:"401^402^403^404^405^470^473"[ICDRG
"RTN","ICDTLB6",149,0)
 S ICDRG=$S((ICDPD["L")&(ICDCC):539,ICDPD["L":540,ICDCC:406,1:407) Q
"RTN","ICDTLB6",150,0)
DRG540 D DRG539 Q
"RTN","ICDTLB61")
0^27^B1300182^B1234931
"RTN","ICDTLB61",1,0)
ICDTLB61 ;SSI/ALA/KUM - GROUPER UTILITY FUNCTIONS ;10/23/00 11:50am
"RTN","ICDTLB61",2,0)
 ;;18.0;DRG Grouper;**10,22,64**;Oct 20, 2000;Build 103
"RTN","ICDTLB61",3,0)
 ;
"RTN","ICDTLB61",4,0)
DRG412 ;
"RTN","ICDTLB61",5,0)
 I $D(ICDDX(1))&(ICDOPCT=0) D  Q:ICDRG=409
"RTN","ICDTLB61",6,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.0",80) S ICDRG=409 Q
"RTN","ICDTLB61",7,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V67.1",80) S ICDRG=409 Q
"RTN","ICDTLB61",8,0)
 .Q
"RTN","ICDTLB61",9,0)
 I $D(ICDDX(1))&(ICDOPCT=0) D  Q:"410^492"[ICDRG
"RTN","ICDTLB61",10,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.11",80) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB61",11,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.12",80) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB61",12,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V67.2",80) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB61",13,0)
 I ICDPD["L" D DRG539^ICDTLB6 Q
"RTN","ICDTLB61",14,0)
 I ICDOR["N"&($D(ICDPDRG(412))) S ICDRG=412 Q
"RTN","ICDTLB61",15,0)
 I $D(ICDPDRG(412))&(ICDPD'["L") S ICDRG=411 Q
"RTN","ICDTLB61",16,0)
 I ICDCC S ICDRG=413 Q
"RTN","ICDTLB61",17,0)
 S ICDRG=414
"RTN","ICDTLB61",18,0)
 ;I $O(ICDPDRG(0))<ICDRG S ICDRG=$O(ICDPDRG(0)) D DODRG^ICDDRG0
"RTN","ICDTLB61",19,0)
 Q
"RTN","ICDTLB6A")
0^28^B37224357^B36834501
"RTN","ICDTLB6A",1,0)
ICDTLB6A ;ALB/EG/MRY/KUM - GROUPER UTILITY FUNCTIONS FY 2005;9/29/03 2:47pm
"RTN","ICDTLB6A",2,0)
 ;;18.0;DRG Grouper;**14,17,64**;Oct 20, 2000;Build 103
"RTN","ICDTLB6A",3,0)
 ;
"RTN","ICDTLB6A",4,0)
DRG403 S ICDRG=$S(ICDPD["l":$S(AGE="":470,AGE<18:405,1:473),ICDOR["O"!(ICDORNI["O"):$S(ICDCC:401,1:402),ICDCC:403,1:404),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6A",5,0)
DRG404 S ICDRG=$S(ICDPD["l":$S(AGE="":470,AGE<18:405,1:473),ICDOR["O"!(ICDORNI["O"):$S(ICDCC:401,1:402),ICDCC:403,1:404),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6A",6,0)
DRG405 D DRG404 Q
"RTN","ICDTLB6A",7,0)
DRG406 ;
"RTN","ICDTLB6A",8,0)
 I ICDORNI["K" D
"RTN","ICDTLB6A",9,0)
 .S ICDRG=$S((ICDPD["L")&(ICDCC):539,ICDPD["L":540,ICDCC:406,1:407)
"RTN","ICDTLB6A",10,0)
 I ICDORNI'["K" D DRG408
"RTN","ICDTLB6A",11,0)
 Q
"RTN","ICDTLB6A",12,0)
DRG407 D DRG406 Q
"RTN","ICDTLB6A",13,0)
DRG408 I $D(ICDDX(1))&(ICDOPCT=0) D  Q:ICDRG=409
"RTN","ICDTLB6A",14,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.0",80) S ICDRG=409 Q
"RTN","ICDTLB6A",15,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V67.1",80) S ICDRG=409 Q
"RTN","ICDTLB6A",16,0)
 .Q
"RTN","ICDTLB6A",17,0)
 I $D(ICDDX(1))&(ICDOPCT=0) D  Q:"410^492"[ICDRG
"RTN","ICDTLB6A",18,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.1",80) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB6A",19,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V67.2",80) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB6A",20,0)
 I ICDOPCT>0 S ICDRG=$S(ICDPD'["L":408,ICDCC:401,1:402) Q
"RTN","ICDTLB6A",21,0)
 I ICDOPCT=0 D DRG412
"RTN","ICDTLB6A",22,0)
 Q
"RTN","ICDTLB6A",23,0)
DRG411 S ICDRG=$S(ICDOR["O"!(ICDORNI["O"):408,ICDOR["N":412,1:411) Q
"RTN","ICDTLB6A",24,0)
DRG412 ;S ICDRG=$S(ICDOR["O"!(ICDORNI["O"):408,ICDOR["N"&($D(ICDPDRG(412))):412,$D(ICDPDRG(411)):411,ICDCC:413,1:414)
"RTN","ICDTLB6A",25,0)
 I ICDOPCT>0 D DRG408 Q
"RTN","ICDTLB6A",26,0)
 D DRG412^ICDTLB61
"RTN","ICDTLB6A",27,0)
 Q
"RTN","ICDTLB6A",28,0)
DRG413 S ICDRG=$S(ICDCC:413,1:414) Q
"RTN","ICDTLB6A",29,0)
DRG414 S ICDRG=$S(ICDCC:413,1:414) Q
"RTN","ICDTLB6A",30,0)
DRG416 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE>17:416,1:417),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6A",31,0)
DRG417 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE>17:416,1:417),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6A",32,0)
DRG418 S ICDRG=$S(ICDOR["O":415,1:418) Q
"RTN","ICDTLB6A",33,0)
DRG419 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE<18:422,ICDCC:419,1:420),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6A",34,0)
DRG420 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE<18:422,ICDCC:419,1:420),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6A",35,0)
DRG421 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE>17:421,1:422),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6A",36,0)
DRG422 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE>17:421,1:422),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6A",37,0)
DRG423 S ICDRG=$S(ICDOR["O":415,1:423) Q
"RTN","ICDTLB6A",38,0)
DRG424 S ICDRG=$S(ICDOR["O":424,1:425) Q
"RTN","ICDTLB6A",39,0)
DRG425 S ICDRG=$S(ICDOR["O":424,1:425) Q
"RTN","ICDTLB6A",40,0)
DRG426 S ICDRG=$S(ICDOR["O":424,1:426) Q
"RTN","ICDTLB6A",41,0)
DRG427 S ICDRG=$S(ICDOR["O":424,1:427) Q
"RTN","ICDTLB6A",42,0)
DRG428 S ICDRG=$S(ICDOR["O":424,1:428) Q
"RTN","ICDTLB6A",43,0)
DRG429 S ICDRG=$S(ICDOR["O":424,1:429) Q
"RTN","ICDTLB6A",44,0)
DRG430 S ICDRG=$S(ICDOR["O":424,1:430) Q
"RTN","ICDTLB6A",45,0)
DRG431 S ICDRG=$S(ICDOR["O":424,1:431) Q
"RTN","ICDTLB6A",46,0)
DRG432 S ICDRG=$S(ICDOR["O":424,1:432) Q
"RTN","ICDTLB6A",47,0)
DRG434 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6A",48,0)
DRG435 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6A",49,0)
DRG436 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6A",50,0)
DRG437 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6A",51,0)
DRG439 S ICDRG=$S($D(ICDODRG(440)):440,1:439) Q
"RTN","ICDTLB6A",52,0)
DRG442 S ICDRG=$S(ICDCC:442,1:443) Q
"RTN","ICDTLB6A",53,0)
DRG443 D EN1^ICDDRG5 S ICDRG=$S(ICDCC3:$S(ICDCC:442,1:443),1:"") Q
"RTN","ICDTLB6A",54,0)
DRG444 S ICDRG=$S(AGE<18:446,ICDCC:444,1:445) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6A",55,0)
 Q
"RTN","ICDTLB6A",56,0)
DRG445 S ICDRG=$S(AGE<18:446,ICDCC:444,1:445) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6A",57,0)
 Q
"RTN","ICDTLB6A",58,0)
DRG446 S ICDRG=$S(AGE<18:446,ICDCC:444,1:445) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6A",59,0)
 Q
"RTN","ICDTLB6A",60,0)
DRG447 S ICDRG=$S(AGE>17:447,1:448) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6A",61,0)
 Q
"RTN","ICDTLB6A",62,0)
DRG448 S ICDRG=$S(AGE>17:447,1:448) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6A",63,0)
 Q
"RTN","ICDTLB6A",64,0)
DRG449 S ICDRG=$S(AGE<18:451,ICDCC:449,1:450) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6A",65,0)
 Q
"RTN","ICDTLB6A",66,0)
DRG450 S ICDRG=$S(AGE<18:451,ICDCC:449,1:450) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6A",67,0)
 Q
"RTN","ICDTLB6A",68,0)
DRG451 S ICDRG=$S(AGE<18:451,ICDCC:449,1:450) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6A",69,0)
 Q
"RTN","ICDTLB6A",70,0)
DRG452 S ICDRG=$S(ICDCC:452,1:453) Q
"RTN","ICDTLB6A",71,0)
DRG453 S ICDRG=$S(ICDCC:452,1:453) Q
"RTN","ICDTLB6A",72,0)
DRG454 S ICDRG=$S(ICDCC:454,1:455) Q
"RTN","ICDTLB6A",73,0)
DRG455 S ICDRG=$S(ICDCC:454,1:455) Q
"RTN","ICDTLB6A",74,0)
DRG462 S ICDRG=$S(ICDOR["O":461,1:462) Q
"RTN","ICDTLB6A",75,0)
DRG463 S ICDRG=$S(ICDOR["O":461,ICDCC:463,1:464) Q
"RTN","ICDTLB6A",76,0)
DRG464 S ICDRG=$S(ICDOR["O":461,ICDCC:463,1:464) Q
"RTN","ICDTLB6A",77,0)
DRG465 S ICDRG=$S(ICDOR["O":461,ICDSD["m":465,1:466) Q
"RTN","ICDTLB6A",78,0)
DRG466 S ICDRG=$S(ICDOR["O":461,ICDSD["m":465,1:466) Q
"RTN","ICDTLB6A",79,0)
DRG467 S ICDRG=$S(ICDOR["O":461,1:467) Q
"RTN","ICDTLB6A",80,0)
DRG471 S ICDRG=$S($F($P(ICDOR,"M",2,99),"M"):471,1:"") Q
"RTN","ICDTLB6A",81,0)
DRG475 S ICDRG=$S(ICDOR["V":475,1:$S($D(ICDPDRG):$O(ICDPDRG(0)),1:468)) I ICDRG<468 D DODRG^ICDDRG0
"RTN","ICDTLB6A",82,0)
 Q
"RTN","ICDTLB6A",83,0)
DRG478 S ICDRG=$S(ICDOR["O"&ICDCC:478,1:479) Q
"RTN","ICDTLB6A",84,0)
DRG479 S ICDRG=$S(ICDOR["O"&ICDCC:478,1:479) Q
"RTN","ICDTLB6A",85,0)
DRG493 ;I (ICDI-1)=1,'ICDCC S ICDCC=$S($D(^ICD9("ACC",ICDDX(1),ICDDX(1))):1,1:0)
"RTN","ICDTLB6A",86,0)
 S ICDRG=$S(ICDCC:493,1:494) Q
"RTN","ICDTLB6A",87,0)
DRG494 ;I (ICD-1),'ICDCC S ICDCC=$S($D(^ICD9("ACC",ICDDX(1),ICDDX(1))):1,1:0)
"RTN","ICDTLB6A",88,0)
 S ICDRG=$S(ICDCC:493,1:494) Q
"RTN","ICDTLB6A",89,0)
DRG495 Q
"RTN","ICDTLB6A",90,0)
DRG496 S ICDRG=$S(ICDOR["F":496,ICDCC:497,1:498) Q
"RTN","ICDTLB6A",91,0)
DRG497 S ICDRG=$S(ICDOR["F":496,ICDCC:497,1:498) Q
"RTN","ICDTLB6A",92,0)
DRG498 S ICDRG=$S(ICDOR["F":496,ICDCC:497,1:498) Q
"RTN","ICDTLB6A",93,0)
DRG499 S ICDRG=$S(ICDCC:499,1:500) Q
"RTN","ICDTLB6A",94,0)
DRG500 S ICDRG=$S(ICDCC:499,1:500) Q
"RTN","ICDTLB6A",95,0)
DRG501 D
"RTN","ICDTLB6A",96,0)
 . I (ICDPD["k") D
"RTN","ICDTLB6A",97,0)
 .. I ICDCC S ICDRG=501
"RTN","ICDTLB6A",98,0)
 .. I 'ICDCC S ICDRG=502
"RTN","ICDTLB6A",99,0)
 . E  S ICDRG=503
"RTN","ICDTLB6A",100,0)
 Q
"RTN","ICDTLB6A",101,0)
DRG502 D DRG501 Q
"RTN","ICDTLB6A",102,0)
DRG503 D DRG501 Q
"RTN","ICDTLB6A",103,0)
DRG514 ; Replaced with DRG535
"RTN","ICDTLB6A",104,0)
 N ICDE1,ICDE2
"RTN","ICDTLB6A",105,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&($D(ICDOP(" 37.96"))):1,1:0)
"RTN","ICDTLB6A",106,0)
 S ICDE2=$S($D(ICDOP(" 37.97"))&($D(ICDOP(" 37.98"))):1,1:0)
"RTN","ICDTLB6A",107,0)
 S ICDRG=470
"RTN","ICDTLB6A",108,0)
 I $D(ICDOP(" 37.94")) I ICDE1+ICDE2=0 S ICDRG=515
"RTN","ICDTLB6A",109,0)
 I '$D(ICDOP(" 37.94")) I ICDE1!ICDE2 S ICDRG=515
"RTN","ICDTLB6A",110,0)
 ; "HN" in ICDOR represents OR proc 37.21-.23, 37.26, 88.52-.58
"RTN","ICDTLB6A",111,0)
 I ICDRG=515 I ICDOR["HN" S ICDRG=514
"RTN","ICDTLB6A",112,0)
 Q
"RTN","ICDTLB6A",113,0)
DRG515 D DRG535 Q
"RTN","ICDTLB6A",114,0)
DRG516 I ICDOR["1" S ICDRG=518
"RTN","ICDTLB6A",115,0)
 I (ICDOR["1") I $D(ICDOP(" 36.06"))!($D(ICDOP(" 92.27"))) S ICDRG=517
"RTN","ICDTLB6A",116,0)
 I (ICDOR["1")&(ICDPD["AIC") S ICDRG=516
"RTN","ICDTLB6A",117,0)
 I (ICDOR["1")&(ICDPD["AIC")&$D(ICDOP(" 36.07")) S ICDRG=526
"RTN","ICDTLB6A",118,0)
 I (ICDOR["1")&(ICDPD'["AIC")&$D(ICDOP(" 36.07")) S ICDRG=527 ; ICD*18*5
"RTN","ICDTLB6A",119,0)
 Q
"RTN","ICDTLB6A",120,0)
DRG517 D DRG516 Q
"RTN","ICDTLB6A",121,0)
DRG518 D DRG516 Q
"RTN","ICDTLB6A",122,0)
DRG519 S ICDRG=$S(ICDOR["F":496,ICDCC:519,1:520) Q
"RTN","ICDTLB6A",123,0)
DRG520 D DRG519 Q
"RTN","ICDTLB6A",124,0)
DRG521 S ICDRG=$S(ICDCC:521,ICDOR["D"!(ICDOR["R"):522,1:523) Q
"RTN","ICDTLB6A",125,0)
DRG522 D DRG521 Q
"RTN","ICDTLB6A",126,0)
DRG523 D DRG521 Q
"RTN","ICDTLB6A",127,0)
DRG526 D DRG516 Q
"RTN","ICDTLB6A",128,0)
DRG527 D DRG516 Q
"RTN","ICDTLB6A",129,0)
DRG531 S ICDRG=$S(ICDCC:531,1:532) Q
"RTN","ICDTLB6A",130,0)
DRG532 D DRG531 Q
"RTN","ICDTLB6A",131,0)
DRG533 S ICDRG=$S(ICDCC:533,1:534) Q
"RTN","ICDTLB6A",132,0)
DRG534 D DRG533 Q
"RTN","ICDTLB6A",133,0)
DRG535 N ICDE1,ICDE2,ICDE3
"RTN","ICDTLB6A",134,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&(($D(ICDOP(" 37.96")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTLB6A",135,0)
 S ICDE2=$S($D(ICDOP(" 37.97"))&(($D(ICDOP(" 37.98")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTLB6A",136,0)
 S ICDE3=$S($D(ICDOP(" 00.52"))&($D(ICDOP(" 00.54"))):1,1:0)
"RTN","ICDTLB6A",137,0)
 ;S ICDE4=$S($D(ICDOP(" 00.54"))&($D(ICDOP(" 37.95"))):1,1:0)
"RTN","ICDTLB6A",138,0)
 S ICDRG=470
"RTN","ICDTLB6A",139,0)
 I $D(ICDOP(" 37.94"))!$D(ICDOP(" 00.51")) I ICDE1+ICDE2+ICDE3=0 S ICDRG=515
"RTN","ICDTLB6A",140,0)
 I '$D(ICDOP(" 37.94"))&('$D(ICDOP(" 00.51"))) I ICDE1!ICDE2!ICDE3 S ICDRG=515
"RTN","ICDTLB6A",141,0)
 ; "HN" in ICDOR represents OR proc 37.21-.23, 37.26, 88.52-.58
"RTN","ICDTLB6A",142,0)
 I ICDRG=515 I ICDOR["HN" S ICDRG=$S(ICDPD["A":535,1:536)
"RTN","ICDTLB6A",143,0)
 I ICDRG=470 D DRG115^ICDTLB2A
"RTN","ICDTLB6A",144,0)
 Q
"RTN","ICDTLB6A",145,0)
DRG536 D DRG535 Q
"RTN","ICDTLB6A",146,0)
DRG537 S ICDRG=$S(ICDCC:537,1:538) Q
"RTN","ICDTLB6A",147,0)
DRG538 D DRG537 Q
"RTN","ICDTLB6A",148,0)
DRG539 I ICDPD["L"&(ICDMAJ'[3) D DRG401^ICDTLB5A Q:"401^402^403^404^405^470^473"[ICDRG
"RTN","ICDTLB6A",149,0)
 S ICDRG=$S((ICDPD["L")&(ICDCC):539,ICDPD["L":540,ICDCC:406,1:407) Q
"RTN","ICDTLB6A",150,0)
DRG540 D DRG539 Q
"RTN","ICDTLB6A",151,0)
DRG543 S ICDRG=$S((ICDPD["Q")&(ICDOR["Q"):543,ICDOR["Q"&$D(ICDOP(" 00.10")):543,1:ICDRG)
"RTN","ICDTLB6B")
0^29^B51960750^B51496024
"RTN","ICDTLB6B",1,0)
ICDTLB6B ;ALB/EG/MRY/KUM - GROUPER UTILITY FUNCTIONS FY 2006;9/29/03 2:47pm
"RTN","ICDTLB6B",2,0)
 ;;18.0;DRG Grouper;**20,22,64**;Oct 20, 2000;Build 103
"RTN","ICDTLB6B",3,0)
 ;
"RTN","ICDTLB6B",4,0)
DRG403 S ICDRG=$S(ICDPD["l":$S(AGE="":470,AGE<18:405,1:473),ICDOR["O"!(ICDORNI["O"):$S(ICDCC:401,1:402),ICDCC:403,1:404),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6B",5,0)
DRG404 S ICDRG=$S(ICDPD["l":$S(AGE="":470,AGE<18:405,1:473),ICDOR["O"!(ICDORNI["O"):$S(ICDCC:401,1:402),ICDCC:403,1:404),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6B",6,0)
DRG405 D DRG404 Q
"RTN","ICDTLB6B",7,0)
DRG406 ;
"RTN","ICDTLB6B",8,0)
 I ICDORNI["K" D
"RTN","ICDTLB6B",9,0)
 .S ICDRG=$S((ICDPD["L")&(ICDCC):539,ICDPD["L":540,ICDCC:406,1:407)
"RTN","ICDTLB6B",10,0)
 I ICDORNI'["K" D DRG408
"RTN","ICDTLB6B",11,0)
 Q
"RTN","ICDTLB6B",12,0)
DRG407 D DRG406 Q
"RTN","ICDTLB6B",13,0)
DRG408 I $D(ICDDX(1))&(ICDOPCT=0) D  Q:ICDRG=409
"RTN","ICDTLB6B",14,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.0",80) S ICDRG=409 Q
"RTN","ICDTLB6B",15,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V67.1",80) S ICDRG=409 Q
"RTN","ICDTLB6B",16,0)
 .Q
"RTN","ICDTLB6B",17,0)
 I $D(ICDDX(1))&(ICDOPCT=0) D  Q:"410^492"[ICDRG
"RTN","ICDTLB6B",18,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.11",80) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB6B",19,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.12",80) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB6B",20,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V67.2",80) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB6B",21,0)
 I ICDOPCT>0 S ICDRG=$S(ICDPD'["L":408,ICDCC:401,1:402) Q
"RTN","ICDTLB6B",22,0)
 I ICDOPCT=0 D DRG412
"RTN","ICDTLB6B",23,0)
 Q
"RTN","ICDTLB6B",24,0)
DRG411 S ICDRG=$S(ICDOR["O"!(ICDORNI["O"):408,ICDOR["N":412,1:411) Q
"RTN","ICDTLB6B",25,0)
DRG412 ;S ICDRG=$S(ICDOR["O"!(ICDORNI["O"):408,ICDOR["N"&($D(ICDPDRG(412))):412,$D(ICDPDRG(411)):411,ICDCC:413,1:414)
"RTN","ICDTLB6B",26,0)
 I ICDOPCT>0 D DRG408 Q
"RTN","ICDTLB6B",27,0)
 D DRG412^ICDTLB61
"RTN","ICDTLB6B",28,0)
 Q
"RTN","ICDTLB6B",29,0)
DRG413 S ICDRG=$S(ICDCC:413,1:414) Q
"RTN","ICDTLB6B",30,0)
DRG414 S ICDRG=$S(ICDCC:413,1:414) Q
"RTN","ICDTLB6B",31,0)
DRG416 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE>17:416,1:417),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6B",32,0)
DRG417 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE>17:416,1:417),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6B",33,0)
DRG418 S ICDRG=$S(ICDOR["O":415,1:418) Q
"RTN","ICDTLB6B",34,0)
DRG419 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE<18:422,ICDCC:419,1:420),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6B",35,0)
DRG420 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE<18:422,ICDCC:419,1:420),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6B",36,0)
DRG421 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE>17:421,1:422),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6B",37,0)
DRG422 S ICDRG=$S(ICDOR["O":415,AGE="":470,AGE>17:421,1:422),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6B",38,0)
DRG423 S ICDRG=$S(ICDOR["O":415,1:423) Q
"RTN","ICDTLB6B",39,0)
DRG424 S ICDRG=$S(ICDOR["O":424,1:425) Q
"RTN","ICDTLB6B",40,0)
DRG425 S ICDRG=$S(ICDOR["O":424,1:425) Q
"RTN","ICDTLB6B",41,0)
DRG426 S ICDRG=$S(ICDOR["O":424,1:426) Q
"RTN","ICDTLB6B",42,0)
DRG427 S ICDRG=$S(ICDOR["O":424,1:427) Q
"RTN","ICDTLB6B",43,0)
DRG428 S ICDRG=$S(ICDOR["O":424,1:428) Q
"RTN","ICDTLB6B",44,0)
DRG429 S ICDRG=$S(ICDOR["O":424,1:429) Q
"RTN","ICDTLB6B",45,0)
DRG430 S ICDRG=$S(ICDOR["O":424,1:430) Q
"RTN","ICDTLB6B",46,0)
DRG431 S ICDRG=$S(ICDOR["O":424,1:431) Q
"RTN","ICDTLB6B",47,0)
DRG432 S ICDRG=$S(ICDOR["O":424,1:432) Q
"RTN","ICDTLB6B",48,0)
DRG434 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6B",49,0)
DRG435 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6B",50,0)
DRG436 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6B",51,0)
DRG437 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6B",52,0)
DRG439 S ICDRG=$S($D(ICDODRG(440)):440,1:439) Q
"RTN","ICDTLB6B",53,0)
DRG442 S ICDRG=$S(ICDCC:442,1:443) Q
"RTN","ICDTLB6B",54,0)
DRG443 D EN1^ICDDRG5 S ICDRG=$S(ICDCC3:$S(ICDCC:442,1:443),1:"") Q
"RTN","ICDTLB6B",55,0)
DRG444 S ICDRG=$S(AGE<18:446,ICDCC:444,1:445) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6B",56,0)
 Q
"RTN","ICDTLB6B",57,0)
DRG445 S ICDRG=$S(AGE<18:446,ICDCC:444,1:445) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6B",58,0)
 Q
"RTN","ICDTLB6B",59,0)
DRG446 S ICDRG=$S(AGE<18:446,ICDCC:444,1:445) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6B",60,0)
 Q
"RTN","ICDTLB6B",61,0)
DRG447 S ICDRG=$S(AGE>17:447,1:448) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6B",62,0)
 Q
"RTN","ICDTLB6B",63,0)
DRG448 S ICDRG=$S(AGE>17:447,1:448) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6B",64,0)
 Q
"RTN","ICDTLB6B",65,0)
DRG449 S ICDRG=$S(AGE<18:451,ICDCC:449,1:450) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6B",66,0)
 Q
"RTN","ICDTLB6B",67,0)
DRG450 S ICDRG=$S(AGE<18:451,ICDCC:449,1:450) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6B",68,0)
 Q
"RTN","ICDTLB6B",69,0)
DRG451 S ICDRG=$S(AGE<18:451,ICDCC:449,1:450) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6B",70,0)
 Q
"RTN","ICDTLB6B",71,0)
DRG452 S ICDRG=$S(ICDCC:452,1:453) Q
"RTN","ICDTLB6B",72,0)
DRG453 S ICDRG=$S(ICDCC:452,1:453) Q
"RTN","ICDTLB6B",73,0)
DRG454 S ICDRG=$S(ICDCC:454,1:455) Q
"RTN","ICDTLB6B",74,0)
DRG455 S ICDRG=$S(ICDCC:454,1:455) Q
"RTN","ICDTLB6B",75,0)
DRG462 S ICDRG=$S(ICDOR["O":461,1:462) Q
"RTN","ICDTLB6B",76,0)
DRG463 S ICDRG=$S(ICDOR["O":461,ICDCC:463,1:464) Q
"RTN","ICDTLB6B",77,0)
DRG464 S ICDRG=$S(ICDOR["O":461,ICDCC:463,1:464) Q
"RTN","ICDTLB6B",78,0)
DRG465 S ICDRG=$S(ICDOR["O":461,ICDSD["m":465,1:466) Q
"RTN","ICDTLB6B",79,0)
DRG466 S ICDRG=$S(ICDOR["O":461,ICDSD["m":465,1:466) Q
"RTN","ICDTLB6B",80,0)
DRG467 S ICDRG=$S(ICDOR["O":461,1:467) Q
"RTN","ICDTLB6B",81,0)
DRG471 S ICDRG=$S($F($P(ICDOR,"M",2,99),"M"):471,1:"") Q
"RTN","ICDTLB6B",82,0)
DRG475 S ICDRG=$S(ICDOR["V":475,1:$S($D(ICDPDRG):$O(ICDPDRG(0)),1:468)) I ICDRG<468 D DODRG^ICDDRG0
"RTN","ICDTLB6B",83,0)
 Q
"RTN","ICDTLB6B",84,0)
DRG478 S ICDRG=$S(ICDOR["O"&ICDCC:478,1:479)
"RTN","ICDTLB6B",85,0)
 I ICDRG=478 D DRG553^ICDTLB6B
"RTN","ICDTLB6B",86,0)
 Q
"RTN","ICDTLB6B",87,0)
DRG479 G DRG478
"RTN","ICDTLB6B",88,0)
DRG493 ;I (ICDI-1)=1,'ICDCC S ICDCC=$S($D(^ICD9("ACC",ICDDX(1),ICDDX(1))):1,1:0)
"RTN","ICDTLB6B",89,0)
 S ICDRG=$S(ICDCC:493,1:494) Q
"RTN","ICDTLB6B",90,0)
DRG494 ;I (ICD-1),'ICDCC S ICDCC=$S($D(^ICD9("ACC",ICDDX(1),ICDDX(1))):1,1:0)
"RTN","ICDTLB6B",91,0)
 S ICDRG=$S(ICDCC:493,1:494) Q
"RTN","ICDTLB6B",92,0)
DRG495 Q
"RTN","ICDTLB6B",93,0)
DRG496 S ICDRG=$S(ICDOR["F":496,ICDCC:497,1:498)
"RTN","ICDTLB6B",94,0)
     I ICDRG=497!(ICDRG=498) I ICDPD["6" S ICDRG=546 Q
"RTN","ICDTLB6B",95,0)
     I ICDRG=497!(ICDRG=498) I $D(ICDDXT("737.40"))!($D(ICDDXT("737.41")))!($D(ICDDXT("737.42")))!($D(ICDDXT("737.43"))) S ICDRG=546
"RTN","ICDTLB6B",96,0)
     Q 
"RTN","ICDTLB6B",97,0)
DRG497 G DRG496  ;S ICDRG=$S(ICDOR["F":496,ICDCC:497,1:498) Q
"RTN","ICDTLB6B",98,0)
DRG498 G DRG496  ;S ICDRG=$S(ICDOR["F":496,ICDCC:497,1:498) Q
"RTN","ICDTLB6B",99,0)
DRG499 S ICDRG=$S(ICDCC:499,1:500) Q
"RTN","ICDTLB6B",100,0)
DRG500 S ICDRG=$S(ICDCC:499,1:500) Q
"RTN","ICDTLB6B",101,0)
DRG501 D
"RTN","ICDTLB6B",102,0)
 . I (ICDPD["k") D
"RTN","ICDTLB6B",103,0)
 .. I ICDCC S ICDRG=501
"RTN","ICDTLB6B",104,0)
 .. I 'ICDCC S ICDRG=502
"RTN","ICDTLB6B",105,0)
 . E  S ICDRG=503
"RTN","ICDTLB6B",106,0)
 Q
"RTN","ICDTLB6B",107,0)
DRG502 D DRG501 Q
"RTN","ICDTLB6B",108,0)
DRG503 D DRG501 Q
"RTN","ICDTLB6B",109,0)
DRG514 ; Replaced with DRG535
"RTN","ICDTLB6B",110,0)
 N ICDE1,ICDE2
"RTN","ICDTLB6B",111,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&($D(ICDOP(" 37.96"))):1,1:0)
"RTN","ICDTLB6B",112,0)
 S ICDE2=$S($D(ICDOP(" 37.97"))&($D(ICDOP(" 37.98"))):1,1:0)
"RTN","ICDTLB6B",113,0)
 S ICDRG=470
"RTN","ICDTLB6B",114,0)
 I $D(ICDOP(" 37.94")) I ICDE1+ICDE2=0 S ICDRG=515
"RTN","ICDTLB6B",115,0)
 I '$D(ICDOP(" 37.94")) I ICDE1!ICDE2 S ICDRG=515
"RTN","ICDTLB6B",116,0)
 ; "HN" in ICDOR represents OR proc 37.21-.23, 37.26, 88.52-.58
"RTN","ICDTLB6B",117,0)
 I ICDRG=515 I ICDOR["HN" S ICDRG=514
"RTN","ICDTLB6B",118,0)
 Q
"RTN","ICDTLB6B",119,0)
DRG515 D DRG535 Q
"RTN","ICDTLB6B",120,0)
DRG516 ; DRG 516,517,526 and 527 replaced by DRG 555-558 respectively
"RTN","ICDTLB6B",121,0)
 S ICDRG=518
"RTN","ICDTLB6B",122,0)
 D DRG555
"RTN","ICDTLB6B",123,0)
 I $D(ICDOP(" 36.06"))!$D(ICDOP(" 92.27")) D DRG556
"RTN","ICDTLB6B",124,0)
 I $D(ICDOP(" 36.07")) D DRG557
"RTN","ICDTLB6B",125,0)
 Q
"RTN","ICDTLB6B",126,0)
DRG517 D DRG516 Q
"RTN","ICDTLB6B",127,0)
DRG518 D DRG516 Q
"RTN","ICDTLB6B",128,0)
DRG519 S ICDRG=$S(ICDOR["F":496,ICDCC:519,1:520) Q
"RTN","ICDTLB6B",129,0)
DRG520 D DRG519 Q
"RTN","ICDTLB6B",130,0)
DRG521 S ICDRG=$S(ICDCC:521,ICDOR["D"!(ICDOR["R"):522,1:523) Q
"RTN","ICDTLB6B",131,0)
DRG522 D DRG521 Q
"RTN","ICDTLB6B",132,0)
DRG523 D DRG521 Q
"RTN","ICDTLB6B",133,0)
DRG526 D DRG516 Q
"RTN","ICDTLB6B",134,0)
DRG527 D DRG516 Q
"RTN","ICDTLB6B",135,0)
DRG531 S ICDRG=$S(ICDCC:531,1:532) Q
"RTN","ICDTLB6B",136,0)
DRG532 D DRG531 Q
"RTN","ICDTLB6B",137,0)
DRG533 S ICDRG=$S(ICDCC:533,1:534) Q
"RTN","ICDTLB6B",138,0)
DRG534 D DRG533 Q
"RTN","ICDTLB6B",139,0)
DRG535 N ICDE1,ICDE2,ICDE3
"RTN","ICDTLB6B",140,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&(($D(ICDOP(" 37.96")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTLB6B",141,0)
 S ICDE2=$S($D(ICDOP(" 37.97"))&(($D(ICDOP(" 37.98")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTLB6B",142,0)
 S ICDE3=$S($D(ICDOP(" 00.52"))&($D(ICDOP(" 00.54"))):1,1:0)
"RTN","ICDTLB6B",143,0)
 ;S ICDE4=$S($D(ICDOP(" 00.54"))&($D(ICDOP(" 37.95"))):1,1:0)
"RTN","ICDTLB6B",144,0)
 S ICDRG=470
"RTN","ICDTLB6B",145,0)
 I $D(ICDOP(" 37.94"))!$D(ICDOP(" 00.51")) I ICDE1+ICDE2+ICDE3=0 S ICDRG=515
"RTN","ICDTLB6B",146,0)
 I '$D(ICDOP(" 37.94"))&('$D(ICDOP(" 00.51"))) I ICDE1!ICDE2!ICDE3 S ICDRG=515
"RTN","ICDTLB6B",147,0)
 ; "HN" in ICDOR represents OR proc 37.21-.23, 37.26, 88.52-.58
"RTN","ICDTLB6B",148,0)
 I ICDRG=515 I ICDOR["HN" I '$D(ICDOP(" 37.26")) S ICDRG=$S(ICDPD["A":535,1:536)
"RTN","ICDTLB6B",149,0)
 I ICDRG=470 D DRG115^ICDTLB2B
"RTN","ICDTLB6B",150,0)
 Q
"RTN","ICDTLB6B",151,0)
DRG536 D DRG535 Q
"RTN","ICDTLB6B",152,0)
DRG537 S ICDRG=$S(ICDCC:537,1:538) Q
"RTN","ICDTLB6B",153,0)
DRG538 D DRG537 Q
"RTN","ICDTLB6B",154,0)
DRG539 I ICDPD["L"&(ICDMAJ'[3) D DRG401^ICDTLB5B Q:"401^402^403^404^405^470^473"[ICDRG
"RTN","ICDTLB6B",155,0)
 S ICDRG=$S((ICDPD["L")&(ICDCC):539,ICDPD["L":540,ICDCC:406,1:407) Q
"RTN","ICDTLB6B",156,0)
DRG540 D DRG539 Q
"RTN","ICDTLB6B",157,0)
DRG543 S ICDRG=$S((ICDPD["Q")&(ICDOR["Q"):543,ICDOR["Q"&$D(ICDOP(" 00.10")):543,1:ICDRG) Q
"RTN","ICDTLB6B",158,0)
DRG544 Q
"RTN","ICDTLB6B",159,0)
DRG545 Q
"RTN","ICDTLB6B",160,0)
DRG546 Q
"RTN","ICDTLB6B",161,0)
DRG547 ; called from DRG106^ICDTLB2B     
"RTN","ICDTLB6B",162,0)
 D MCV
"RTN","ICDTLB6B",163,0)
 S ICDRG=$S(ICDMCV:547,ICDMCV1:547,1:548) Q
"RTN","ICDTLB6B",164,0)
DRG548 G DRG547
"RTN","ICDTLB6B",165,0)
DRG549 ; called from DRG106^ICDTLB2B
"RTN","ICDTLB6B",166,0)
 D MCV
"RTN","ICDTLB6B",167,0)
 S ICDRG=$S(ICDMCV:549,ICDMCV1:549,1:550) Q
"RTN","ICDTLB6B",168,0)
DRG550 G DRG549
"RTN","ICDTLB6B",169,0)
DRG551 ; called from DRG115^ICDTLB2B 
"RTN","ICDTLB6B",170,0)
 D MCV
"RTN","ICDTLB6B",171,0)
 I ICDMCV!(ICDMCV2) S ICDRG=551
"RTN","ICDTLB6B",172,0)
 Q
"RTN","ICDTLB6B",173,0)
DRG552 Q
"RTN","ICDTLB6B",174,0)
DRG553 ; called from DRG478
"RTN","ICDTLB6B",175,0)
 D MCV
"RTN","ICDTLB6B",176,0)
 S ICDRG=$S(ICDMCV:553,ICDMCV1:553,1:554) Q
"RTN","ICDTLB6B",177,0)
DRG554 G DRG553
"RTN","ICDTLB6B",178,0)
DRG555 ; called from DRG516
"RTN","ICDTLB6B",179,0)
 D MCV
"RTN","ICDTLB6B",180,0)
 I ICDMCV!(ICDMCV1) S ICDRG=555
"RTN","ICDTLB6B",181,0)
 Q
"RTN","ICDTLB6B",182,0)
DRG556 ; called from DRG516
"RTN","ICDTLB6B",183,0)
 D MCV
"RTN","ICDTLB6B",184,0)
 I 'ICDMCV&('ICDMCV1) S ICDRG=556
"RTN","ICDTLB6B",185,0)
 Q
"RTN","ICDTLB6B",186,0)
DRG557 ; called from DRG516
"RTN","ICDTLB6B",187,0)
 D MCV
"RTN","ICDTLB6B",188,0)
 I ICDMCV!ICDMCV1 S ICDRG=557
"RTN","ICDTLB6B",189,0)
 E  S ICDRG=558
"RTN","ICDTLB6B",190,0)
 Q
"RTN","ICDTLB6B",191,0)
DRG558 G DRG516
"RTN","ICDTLB6B",192,0)
DRG559 ;I DGDX(1)["433.01"!(DGDX(1)["433.11")!(DGDX(1)["433.21")!(DGDX(1)["433.31")!(DGDX(1)["433.81")!(DGDX(1)["433.91")!(DGDX(1)["434.01")!(DGDX(1)["434.11")!(DGDX(1)["434.91") S ICDRG=559
"RTN","ICDTLB6B",193,0)
 I $G(ICDDX(1))=12856!($G(ICDDX(1))=12858)!($G(ICDDX(1))=12860)!($G(ICDDX(1))=12862)!($G(ICDDX(1))=12864)!($G(ICDDX(1))=12866)!($G(ICDDX(1))=12868)!($G(ICDDX(1))=12870)!($G(ICDDX(1))=12872) S ICDRG=559
"RTN","ICDTLB6B",194,0)
 Q
"RTN","ICDTLB6B",195,0)
MCV ; checks to see if case qualifies as an MCV (major cardiovascular complications or complex conditions)
"RTN","ICDTLB6B",196,0)
 S (ICDMCV,ICDMCV1,ICDMCV2)=0
"RTN","ICDTLB6B",197,0)
 ; ICDPD=identifier for prime dx  ICDSD=identifier for any secondary dx
"RTN","ICDTLB6B",198,0)
 ; DGDX(1)=prime dx  ICDDX(1)=ien of prime dx ICDDXT=any secondary dx  
"RTN","ICDTLB6B",199,0)
 I ICDPD["c"!(ICDSD["c") S ICDMCV=1
"RTN","ICDTLB6B",200,0)
 I ICDSD["s" S ICDMCV=1
"RTN","ICDTLB6B",201,0)
 ;I DGDX(1)["426.0"!(DGDX(1)["426.53")!(DGDX(1)["426.54") S ICDMCV1=1
"RTN","ICDTLB6B",202,0)
 I $G(ICDDX(1))=9056!($G(ICDDX(1))=2548)!($G(ICDDX(1))=2549) S ICDMCV1=1
"RTN","ICDTLB6B",203,0)
 I $D(ICDDXT("426.0"))!($D(ICDDXT("426.53")))!($D(ICDDXT("426.54"))) S ICDMCV1=1
"RTN","ICDTLB6B",204,0)
 ;I DGDX(1)["411.1"!(DGDX(1)["411.81") S ICDMCV2=1
"RTN","ICDTLB6B",205,0)
 I $G(ICDDX(1))=2500!($G(ICDDX(1))=12477) S ICDMCV2=1
"RTN","ICDTLB6B",206,0)
 I $D(ICDDXT("411.1"))!($D(ICDDXT("411.81"))) S ICDMCV2=1
"RTN","ICDTLB6B",207,0)
 Q
"RTN","ICDTLB6C")
0^30^B58914547^B58422258
"RTN","ICDTLB6C",1,0)
ICDTLB6C ;ALB/EG/MRY/KUM - GROUPER UTILITY FUNCTIONS FY 2007;9/29/03 2:47pm
"RTN","ICDTLB6C",2,0)
 ;;18.0;DRG Grouper;**24,30,64**;Oct 20, 2000;Build 103
"RTN","ICDTLB6C",3,0)
 ;
"RTN","ICDTLB6C",4,0)
DRG403 S ICDRG=$S(ICDPD["l":$S(AGE="":470,AGE<18:405,1:473),ICDOR["O"!(ICDORNI["O"):$S(ICDCC:401,1:402),ICDCC:403,1:404),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6C",5,0)
DRG404 S ICDRG=$S(ICDPD["l":$S(AGE="":470,AGE<18:405,1:473),ICDOR["O"!(ICDORNI["O"):$S(ICDCC:401,1:402),ICDCC:403,1:404),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6C",6,0)
DRG405 D DRG404 Q
"RTN","ICDTLB6C",7,0)
DRG406 ;
"RTN","ICDTLB6C",8,0)
 I ICDORNI["K" D
"RTN","ICDTLB6C",9,0)
 .S ICDRG=$S((ICDPD["L")&(ICDCC):539,ICDPD["L":540,ICDCC:406,1:407)
"RTN","ICDTLB6C",10,0)
 I ICDORNI'["K" D DRG408
"RTN","ICDTLB6C",11,0)
 Q
"RTN","ICDTLB6C",12,0)
DRG407 D DRG406 Q
"RTN","ICDTLB6C",13,0)
DRG408 I $D(ICDDX(1))&(ICDOPCT=0) D  Q:ICDRG=409
"RTN","ICDTLB6C",14,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.0",80) S ICDRG=409 Q
"RTN","ICDTLB6C",15,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V67.1",80) S ICDRG=409 Q
"RTN","ICDTLB6C",16,0)
 .Q
"RTN","ICDTLB6C",17,0)
 I $D(ICDDX(1))&(ICDOPCT=0) D  Q:"410^492"[ICDRG
"RTN","ICDTLB6C",18,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.11",80) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB6C",19,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V58.12",80) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB6C",20,0)
 .I ICDDX(1)=$$CODEBA^ICDEX("V67.2",80) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB6C",21,0)
 I ICDOPCT>0 S ICDRG=$S(ICDPD'["L":408,ICDCC:401,1:402) Q
"RTN","ICDTLB6C",22,0)
 I ICDOPCT=0 D DRG412
"RTN","ICDTLB6C",23,0)
 Q
"RTN","ICDTLB6C",24,0)
DRG411 S ICDRG=$S(ICDOR["O"!(ICDORNI["O"):408,ICDOR["N":412,1:411) Q
"RTN","ICDTLB6C",25,0)
DRG412 ;S ICDRG=$S(ICDOR["O"!(ICDORNI["O"):408,ICDOR["N"&($D(ICDPDRG(412))):412,$D(ICDPDRG(411)):411,ICDCC:413,1:414)
"RTN","ICDTLB6C",26,0)
 I ICDOPCT>0 D DRG408 Q
"RTN","ICDTLB6C",27,0)
 D DRG412^ICDTLB61
"RTN","ICDTLB6C",28,0)
 Q
"RTN","ICDTLB6C",29,0)
DRG413 S ICDRG=$S(ICDCC:413,1:414) Q
"RTN","ICDTLB6C",30,0)
DRG414 S ICDRG=$S(ICDCC:413,1:414) Q
"RTN","ICDTLB6C",31,0)
DRG416 S ICDRG=$S(ICDOR["O":578,AGE="":470,AGE>17:576,1:417),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) I ICDRG=576&($D(ICDOP(" 96.72"))) S ICDRG=575
"RTN","ICDTLB6C",32,0)
 Q
"RTN","ICDTLB6C",33,0)
DRG417 S ICDRG=$S(ICDOR["O":578,AGE="":470,AGE>17:576,1:417),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6C",34,0)
DRG418 S ICDRG=$S(ICDOR["O":579,1:418) Q
"RTN","ICDTLB6C",35,0)
DRG419 S ICDRG=$S(ICDOR["O":578,AGE="":470,AGE<18:422,ICDCC:419,1:420),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6C",36,0)
DRG420 S ICDRG=$S(ICDOR["O":578,AGE="":470,AGE<18:422,ICDCC:419,1:420),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6C",37,0)
DRG421 S ICDRG=$S(ICDOR["O":578,AGE="":470,AGE>17:421,1:422),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6C",38,0)
DRG422 S ICDRG=$S(ICDOR["O":578,AGE="":470,AGE>17:421,1:422),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6C",39,0)
DRG423 S ICDRG=$S(ICDOR["O":578,1:423) I ICDRG=578&(ICDDX(1)=7615) S ICDRG=579
"RTN","ICDTLB6C",40,0)
 Q
"RTN","ICDTLB6C",41,0)
DRG424 S ICDRG=$S(ICDOR["O":424,1:425) Q
"RTN","ICDTLB6C",42,0)
DRG425 S ICDRG=$S(ICDOR["O":424,1:425) Q
"RTN","ICDTLB6C",43,0)
DRG426 S ICDRG=$S(ICDOR["O":424,1:426) Q
"RTN","ICDTLB6C",44,0)
DRG427 S ICDRG=$S(ICDOR["O":424,1:427) Q
"RTN","ICDTLB6C",45,0)
DRG428 S ICDRG=$S(ICDOR["O":424,1:428) Q
"RTN","ICDTLB6C",46,0)
DRG429 S ICDRG=$S(ICDOR["O":424,1:429) Q
"RTN","ICDTLB6C",47,0)
DRG430 S ICDRG=$S(ICDOR["O":424,1:430) Q
"RTN","ICDTLB6C",48,0)
DRG431 S ICDRG=$S(ICDOR["O":424,1:431) Q
"RTN","ICDTLB6C",49,0)
DRG432 S ICDRG=$S(ICDOR["O":424,1:432) Q
"RTN","ICDTLB6C",50,0)
DRG434 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6C",51,0)
DRG435 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6C",52,0)
DRG436 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6C",53,0)
DRG437 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6C",54,0)
DRG439 S ICDRG=$S($D(ICDODRG(440)):440,1:439) Q
"RTN","ICDTLB6C",55,0)
DRG442 S ICDRG=$S(ICDCC:442,1:443) Q
"RTN","ICDTLB6C",56,0)
DRG443 D EN1^ICDDRG5 S ICDRG=$S(ICDCC3:$S(ICDCC:442,1:443),1:"") Q
"RTN","ICDTLB6C",57,0)
DRG444 S ICDRG=$S(AGE<18:446,ICDCC:444,1:445) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",58,0)
 Q
"RTN","ICDTLB6C",59,0)
DRG445 S ICDRG=$S(AGE<18:446,ICDCC:444,1:445) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",60,0)
 Q
"RTN","ICDTLB6C",61,0)
DRG446 S ICDRG=$S(AGE<18:446,ICDCC:444,1:445) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",62,0)
 Q
"RTN","ICDTLB6C",63,0)
DRG447 S ICDRG=$S(AGE>17:447,1:448) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",64,0)
 Q
"RTN","ICDTLB6C",65,0)
DRG448 S ICDRG=$S(AGE>17:447,1:448) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",66,0)
 Q
"RTN","ICDTLB6C",67,0)
DRG449 S ICDRG=$S(AGE<18:451,ICDCC:449,1:450) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",68,0)
 Q
"RTN","ICDTLB6C",69,0)
DRG450 S ICDRG=$S(AGE<18:451,ICDCC:449,1:450) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",70,0)
 Q
"RTN","ICDTLB6C",71,0)
DRG451 S ICDRG=$S(AGE<18:451,ICDCC:449,1:450) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",72,0)
 Q
"RTN","ICDTLB6C",73,0)
DRG452 S ICDRG=$S(ICDCC:452,1:453) Q
"RTN","ICDTLB6C",74,0)
DRG453 S ICDRG=$S(ICDCC:452,1:453) Q
"RTN","ICDTLB6C",75,0)
DRG454 S ICDRG=$S(ICDCC:454,1:455) Q
"RTN","ICDTLB6C",76,0)
DRG455 S ICDRG=$S(ICDCC:454,1:455) Q
"RTN","ICDTLB6C",77,0)
DRG462 S ICDRG=$S(ICDOR["O":461,1:462) Q
"RTN","ICDTLB6C",78,0)
DRG463 S ICDRG=$S(ICDOR["O":461,ICDCC:463,1:464) Q
"RTN","ICDTLB6C",79,0)
DRG464 S ICDRG=$S(ICDOR["O":461,ICDCC:463,1:464) Q
"RTN","ICDTLB6C",80,0)
DRG465 S ICDRG=$S(ICDOR["O":461,ICDSD["m":465,1:466) Q
"RTN","ICDTLB6C",81,0)
DRG466 S ICDRG=$S(ICDOR["O":461,ICDSD["m":465,1:466) Q
"RTN","ICDTLB6C",82,0)
DRG467 S ICDRG=$S(ICDOR["O":461,1:467) Q
"RTN","ICDTLB6C",83,0)
DRG471 S ICDRG=$S($F($P(ICDOR,"M",2,99),"M"):471,1:"") Q
"RTN","ICDTLB6C",84,0)
DRG475 S ICDRG=$S(ICDOR["V":475,1:$S($D(ICDPDRG):$O(ICDPDRG(0)),1:468)) I ICDRG<468 D DODRG^ICDDRG0
"RTN","ICDTLB6C",85,0)
 Q
"RTN","ICDTLB6C",86,0)
DRG478 S ICDRG=$S(ICDOR["O"&ICDCC:478,1:479)
"RTN","ICDTLB6C",87,0)
 I ICDRG=478 D DRG553^ICDTLB6C
"RTN","ICDTLB6C",88,0)
 Q
"RTN","ICDTLB6C",89,0)
DRG479 G DRG478
"RTN","ICDTLB6C",90,0)
DRG493 ;I (ICDI-1)=1,'ICDCC S ICDCC=$S($D(^ICD9("ACC",ICDDX(1),ICDDX(1))):1,1:0)
"RTN","ICDTLB6C",91,0)
 S ICDRG=$S(ICDCC:493,1:494) Q
"RTN","ICDTLB6C",92,0)
DRG494 ;I (ICD-1),'ICDCC S ICDCC=$S($D(^ICD9("ACC",ICDDX(1),ICDDX(1))):1,1:0)
"RTN","ICDTLB6C",93,0)
 S ICDRG=$S(ICDCC:493,1:494) Q
"RTN","ICDTLB6C",94,0)
DRG495 Q
"RTN","ICDTLB6C",95,0)
DRG496 S ICDRG=$S(ICDOR["F":496,ICDCC:497,1:498)
"RTN","ICDTLB6C",96,0)
     I ICDRG=497!(ICDRG=498) I ICDPD["6" S ICDRG=546 Q
"RTN","ICDTLB6C",97,0)
     I ICDRG=497!(ICDRG=498) I $D(ICDDXT("737.40"))!($D(ICDDXT("737.41")))!($D(ICDDXT("737.42")))!($D(ICDDXT("737.43"))) S ICDRG=546
"RTN","ICDTLB6C",98,0)
     Q 
"RTN","ICDTLB6C",99,0)
DRG497 G DRG496  ;S ICDRG=$S(ICDOR["F":496,ICDCC:497,1:498) Q
"RTN","ICDTLB6C",100,0)
DRG498 G DRG496  ;S ICDRG=$S(ICDOR["F":496,ICDCC:497,1:498) Q
"RTN","ICDTLB6C",101,0)
DRG499 S ICDRG=$S(ICDCC:499,1:500) Q
"RTN","ICDTLB6C",102,0)
DRG500 S ICDRG=$S(ICDCC:499,1:500) Q
"RTN","ICDTLB6C",103,0)
DRG501 D
"RTN","ICDTLB6C",104,0)
 . I (ICDPD["k") D
"RTN","ICDTLB6C",105,0)
 .. I ICDCC S ICDRG=501
"RTN","ICDTLB6C",106,0)
 .. I 'ICDCC S ICDRG=502
"RTN","ICDTLB6C",107,0)
 . E  S ICDRG=503
"RTN","ICDTLB6C",108,0)
 Q
"RTN","ICDTLB6C",109,0)
DRG502 D DRG501 Q
"RTN","ICDTLB6C",110,0)
DRG503 D DRG501 Q
"RTN","ICDTLB6C",111,0)
DRG514 ; Replaced with DRG535
"RTN","ICDTLB6C",112,0)
 N ICDE1,ICDE2
"RTN","ICDTLB6C",113,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&($D(ICDOP(" 37.96"))):1,1:0)
"RTN","ICDTLB6C",114,0)
 S ICDE2=$S($D(ICDOP(" 37.97"))&($D(ICDOP(" 37.98"))):1,1:0)
"RTN","ICDTLB6C",115,0)
 S ICDRG=470
"RTN","ICDTLB6C",116,0)
 I $D(ICDOP(" 37.94")) I ICDE1+ICDE2=0 S ICDRG=515
"RTN","ICDTLB6C",117,0)
 I '$D(ICDOP(" 37.94")) I ICDE1!ICDE2 S ICDRG=515
"RTN","ICDTLB6C",118,0)
 ; "HN" in ICDOR represents OR proc 37.21-.23, 37.26, 88.52-.58
"RTN","ICDTLB6C",119,0)
 I ICDRG=515 I ICDOR["HN" S ICDRG=514
"RTN","ICDTLB6C",120,0)
 Q
"RTN","ICDTLB6C",121,0)
DRG515 D DRG535 Q
"RTN","ICDTLB6C",122,0)
DRG516 ; DRG 516,517,526 and 527 replaced by DRG 555-558 respectively
"RTN","ICDTLB6C",123,0)
 ; ICD*18*30 DRG551 is higher in surgical hierarchy
"RTN","ICDTLB6C",124,0)
 I ICDRG=551 Q
"RTN","ICDTLB6C",125,0)
 S ICDRG=518
"RTN","ICDTLB6C",126,0)
 D DRG555
"RTN","ICDTLB6C",127,0)
 I $D(ICDOP(" 36.06"))!$D(ICDOP(" 92.27")) D DRG556
"RTN","ICDTLB6C",128,0)
 I $D(ICDOP(" 36.07")) D DRG557
"RTN","ICDTLB6C",129,0)
 Q
"RTN","ICDTLB6C",130,0)
DRG517 D DRG516 Q
"RTN","ICDTLB6C",131,0)
DRG518 D DRG516 Q
"RTN","ICDTLB6C",132,0)
DRG519 S ICDRG=$S(ICDOR["F":496,ICDCC:519,1:520) Q
"RTN","ICDTLB6C",133,0)
DRG520 D DRG519 Q
"RTN","ICDTLB6C",134,0)
DRG521 S ICDRG=$S(ICDCC:521,ICDOR["D"!(ICDOR["R"):522,1:523) Q
"RTN","ICDTLB6C",135,0)
DRG522 D DRG521 Q
"RTN","ICDTLB6C",136,0)
DRG523 D DRG521 Q
"RTN","ICDTLB6C",137,0)
DRG526 D DRG516 Q
"RTN","ICDTLB6C",138,0)
DRG527 D DRG516 Q
"RTN","ICDTLB6C",139,0)
DRG531 S ICDRG=$S(ICDCC:531,1:532) Q
"RTN","ICDTLB6C",140,0)
DRG532 D DRG531 Q
"RTN","ICDTLB6C",141,0)
DRG533 S ICDRG=$S(ICDCC:533,1:534) I $D(ICDOP(" 00.61"))&($D(ICDOP(" 00.63"))) S ICDRG=577
"RTN","ICDTLB6C",142,0)
 Q
"RTN","ICDTLB6C",143,0)
DRG534 D DRG533 Q
"RTN","ICDTLB6C",144,0)
DRG535 N ICDE1,ICDE2,ICDE3,ICDE4
"RTN","ICDTLB6C",145,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&(($D(ICDOP(" 37.96")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTLB6C",146,0)
 S ICDE2=$S($D(ICDOP(" 37.97"))&(($D(ICDOP(" 37.98")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTLB6C",147,0)
 S ICDE3=$S($D(ICDOP(" 00.52"))&($D(ICDOP(" 00.54"))):1,1:0)
"RTN","ICDTLB6C",148,0)
 ;S ICDE4=$S($D(ICDOP(" 00.54"))&($D(ICDOP(" 37.95"))):1,1:0)
"RTN","ICDTLB6C",149,0)
 S ICDE4=$S($D(ICDOP(" 37.74"))&(($D(ICDOP(" 37.96")))!($D(ICDOP(" 37.98")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTLB6C",150,0)
 S ICDRG=470
"RTN","ICDTLB6C",151,0)
 I $D(ICDOP(" 37.94"))!$D(ICDOP(" 00.51")) I ICDE1+ICDE2+ICDE3+ICDE4=0 S ICDRG=515
"RTN","ICDTLB6C",152,0)
 I '$D(ICDOP(" 37.94"))&('$D(ICDOP(" 00.51"))) I ICDE1!ICDE2!ICDE3!ICDE4 S ICDRG=515
"RTN","ICDTLB6C",153,0)
 ; "HN" in ICDOR represents OR proc 37.21-.23, 37.26, 88.52-.58
"RTN","ICDTLB6C",154,0)
 I ICDRG=515 I ICDOR["HN" I '$D(ICDOP(" 37.26")) S ICDRG=$S(ICDPD["A":535,1:536)
"RTN","ICDTLB6C",155,0)
 I ICDRG=470 D DRG115^ICDTLB2C
"RTN","ICDTLB6C",156,0)
 Q
"RTN","ICDTLB6C",157,0)
DRG536 D DRG535 Q
"RTN","ICDTLB6C",158,0)
DRG537 S ICDRG=$S(ICDCC:537,1:538) Q
"RTN","ICDTLB6C",159,0)
DRG538 D DRG537 Q
"RTN","ICDTLB6C",160,0)
DRG539 I ICDPD["L"&(ICDMAJ'[3) D DRG401^ICDTLB5C Q:"401^402^403^404^405^470^473"[ICDRG
"RTN","ICDTLB6C",161,0)
 S ICDRG=$S((ICDPD["L")&(ICDCC):539,ICDPD["L":540,ICDCC:406,1:407) Q
"RTN","ICDTLB6C",162,0)
DRG540 D DRG539 Q
"RTN","ICDTLB6C",163,0)
DRG543 S ICDRG=$S((ICDPD["Q")&(ICDOR["Q"):543,ICDOR["Q"&$D(ICDOP(" 00.10")):543,$D(ICDOP(" 02.93"))&($D(ICDOP(" 86.95"))):543,1:ICDRG) Q
"RTN","ICDTLB6C",164,0)
DRG544 Q
"RTN","ICDTLB6C",165,0)
DRG545 Q
"RTN","ICDTLB6C",166,0)
DRG546 Q
"RTN","ICDTLB6C",167,0)
DRG547 ; called from DRG106^ICDTLB2C     
"RTN","ICDTLB6C",168,0)
 D MCV
"RTN","ICDTLB6C",169,0)
 S ICDRG=$S(ICDMCV:547,ICDMCV1:547,1:548) Q
"RTN","ICDTLB6C",170,0)
DRG548 G DRG547
"RTN","ICDTLB6C",171,0)
DRG549 ; called from DRG106^ICDTLB2C
"RTN","ICDTLB6C",172,0)
 D MCV
"RTN","ICDTLB6C",173,0)
 S ICDRG=$S(ICDMCV:549,ICDMCV1:549,1:550) Q
"RTN","ICDTLB6C",174,0)
DRG550 G DRG549
"RTN","ICDTLB6C",175,0)
DRG551 ; called from DRG115^ICDTLB2C 
"RTN","ICDTLB6C",176,0)
 D MCV
"RTN","ICDTLB6C",177,0)
 I ICDMCV!(ICDMCV2) S ICDRG=551
"RTN","ICDTLB6C",178,0)
 Q
"RTN","ICDTLB6C",179,0)
DRG552 Q
"RTN","ICDTLB6C",180,0)
DRG553 ; called from DRG478
"RTN","ICDTLB6C",181,0)
 D MCV
"RTN","ICDTLB6C",182,0)
 S ICDRG=$S(ICDMCV:553,ICDMCV1:553,1:554) Q
"RTN","ICDTLB6C",183,0)
DRG554 G DRG553
"RTN","ICDTLB6C",184,0)
DRG555 ; called from DRG516
"RTN","ICDTLB6C",185,0)
 D MCV
"RTN","ICDTLB6C",186,0)
 I ICDMCV!(ICDMCV1) S ICDRG=555
"RTN","ICDTLB6C",187,0)
 Q
"RTN","ICDTLB6C",188,0)
DRG556 ; called from DRG516
"RTN","ICDTLB6C",189,0)
 D MCV
"RTN","ICDTLB6C",190,0)
 I 'ICDMCV&('ICDMCV1) S ICDRG=556
"RTN","ICDTLB6C",191,0)
 Q
"RTN","ICDTLB6C",192,0)
DRG557 ; called from DRG516
"RTN","ICDTLB6C",193,0)
 D MCV
"RTN","ICDTLB6C",194,0)
 I ICDMCV!ICDMCV1 S ICDRG=557
"RTN","ICDTLB6C",195,0)
 E  S ICDRG=558
"RTN","ICDTLB6C",196,0)
 Q
"RTN","ICDTLB6C",197,0)
DRG558 G DRG516
"RTN","ICDTLB6C",198,0)
DRG559 ;I DGDX(1)["433.01"!(DGDX(1)["433.11")!(DGDX(1)["433.21")!(DGDX(1)["433.31")!(DGDX(1)["433.81")!(DGDX(1)["433.91")!(DGDX(1)["434.01")!(DGDX(1)["434.11")!(DGDX(1)["434.91") S ICDRG=559
"RTN","ICDTLB6C",199,0)
 I $G(ICDDX(1))=12856!($G(ICDDX(1))=12858)!($G(ICDDX(1))=12860)!($G(ICDDX(1))=12862)!($G(ICDDX(1))=12864)!($G(ICDDX(1))=12866)!($G(ICDDX(1))=12868)!($G(ICDDX(1))=12870)!($G(ICDDX(1))=12872) S ICDRG=559
"RTN","ICDTLB6C",200,0)
 Q
"RTN","ICDTLB6C",201,0)
DRG560 Q
"RTN","ICDTLB6C",202,0)
DRG561 Q
"RTN","ICDTLB6C",203,0)
DRG562 Q
"RTN","ICDTLB6C",204,0)
DRG563 Q
"RTN","ICDTLB6C",205,0)
DRG564 Q
"RTN","ICDTLB6C",206,0)
DRG565 Q
"RTN","ICDTLB6C",207,0)
DRG566 Q
"RTN","ICDTLB6C",208,0)
DRG567 Q
"RTN","ICDTLB6C",209,0)
DRG568 Q
"RTN","ICDTLB6C",210,0)
DRG569 Q
"RTN","ICDTLB6C",211,0)
DRG570 Q
"RTN","ICDTLB6C",212,0)
DRG571 Q
"RTN","ICDTLB6C",213,0)
DRG572 Q
"RTN","ICDTLB6C",214,0)
DRG573 Q
"RTN","ICDTLB6C",215,0)
DRG574 Q
"RTN","ICDTLB6C",216,0)
DRG575 Q
"RTN","ICDTLB6C",217,0)
DRG576 Q
"RTN","ICDTLB6C",218,0)
DRG577 Q
"RTN","ICDTLB6C",219,0)
DRG578 Q
"RTN","ICDTLB6C",220,0)
DRG579 Q
"RTN","ICDTLB6C",221,0)
MCV ; checks to see if case qualifies as an MCV (major cardiovascular complications or complex conditions)
"RTN","ICDTLB6C",222,0)
 S (ICDMCV,ICDMCV1,ICDMCV2)=0
"RTN","ICDTLB6C",223,0)
 ; ICDPD=identifier for prime dx  ICDSD=identifier for any secondary dx
"RTN","ICDTLB6C",224,0)
 ; DGDX(1)=prime dx  ICDDX(1)=ien of prime dx ICDDXT=any secondary dx  
"RTN","ICDTLB6C",225,0)
 I ICDPD["c"!(ICDSD["c") S ICDMCV=1
"RTN","ICDTLB6C",226,0)
 I ICDSD["s" S ICDMCV=1
"RTN","ICDTLB6C",227,0)
 ;I DGDX(1)["426.0"!(DGDX(1)["426.53")!(DGDX(1)["426.54") S ICDMCV1=1
"RTN","ICDTLB6C",228,0)
 I $G(ICDDX(1))=9056!($G(ICDDX(1))=2548)!($G(ICDDX(1))=2549) S ICDMCV1=1
"RTN","ICDTLB6C",229,0)
 I $D(ICDDXT("426.0"))!($D(ICDDXT("426.53")))!($D(ICDDXT("426.54"))) S ICDMCV1=1
"RTN","ICDTLB6C",230,0)
 ;I DGDX(1)["411.1"!(DGDX(1)["411.81") S ICDMCV2=1
"RTN","ICDTLB6C",231,0)
 I $G(ICDDX(1))=2500!($G(ICDDX(1))=12477) S ICDMCV2=1
"RTN","ICDTLB6C",232,0)
 I $D(ICDDXT("411.1"))!($D(ICDDXT("411.81"))) S ICDMCV2=1
"RTN","ICDTLB6C",233,0)
 Q
"SEC","^DIC",80.5,80.5,0,"AUDIT")
@
"SEC","^DIC",80.5,80.5,0,"DD")
@
"SEC","^DIC",80.5,80.5,0,"DEL")
@
"SEC","^DIC",80.5,80.5,0,"LAYGO")
@
"SEC","^DIC",80.5,80.5,0,"RD")
@
"SEC","^DIC",80.5,80.5,0,"WR")
@
"SEC","^DIC",80.6,80.6,0,"AUDIT")
@
"SEC","^DIC",80.6,80.6,0,"DD")
@
"SEC","^DIC",80.6,80.6,0,"DEL")
@
"SEC","^DIC",80.6,80.6,0,"LAYGO")
@
"SEC","^DIC",80.6,80.6,0,"RD")
@
"SEC","^DIC",80.6,80.6,0,"WR")
@
"SEC","^DIC",82.11,82.11,0,"AUDIT")
@
"SEC","^DIC",82.11,82.11,0,"DD")
@
"SEC","^DIC",82.11,82.11,0,"DEL")
@
"SEC","^DIC",82.11,82.11,0,"LAYGO")
@
"SEC","^DIC",82.11,82.11,0,"RD")
@
"SEC","^DIC",82.11,82.11,0,"WR")
@
"SEC","^DIC",82.12,82.12,0,"AUDIT")
@
"SEC","^DIC",82.12,82.12,0,"DD")
@
"SEC","^DIC",82.12,82.12,0,"DEL")
@
"SEC","^DIC",82.12,82.12,0,"LAYGO")
@
"SEC","^DIC",82.12,82.12,0,"RD")
@
"SEC","^DIC",82.12,82.12,0,"WR")
@
"SEC","^DIC",82.13,82.13,0,"AUDIT")
@
"SEC","^DIC",82.13,82.13,0,"DD")
@
"SEC","^DIC",82.13,82.13,0,"DEL")
@
"SEC","^DIC",82.13,82.13,0,"LAYGO")
@
"SEC","^DIC",82.13,82.13,0,"RD")
@
"SEC","^DIC",82.13,82.13,0,"WR")
@
"UP",80.2,80.271,-1)
80.2^2
"UP",80.2,80.271,0)
80.271
"VER")
8.0^22.0
"^DD",80.2,80.271,2,0)
COMPLICATION/COMORBIDITY FLAG^S^0:No CC or MCC;1:CC present;2:MCC present;3:CC or MCC present;^0;4^Q
"^DD",80.2,80.271,2,3)
0=None, 1=CC, 2=MCC and 3=CC or MCC
"^DD",80.2,80.271,2,"DT")
3120408
"^DD",80.5,80.5,0)
FIELD^^1^2
"^DD",80.5,80.5,0,"DDA")
N
"^DD",80.5,80.5,0,"DT")
3120524
"^DD",80.5,80.5,0,"IX","B",80.5,.01)

"^DD",80.5,80.5,0,"NM","DRG SURGICAL HIERARCHY")

"^DD",80.5,80.5,0,"VRPK")
ICD
"^DD",80.5,80.5,.01,0)
EFFECTIVE DATE^RD^^0;1^S %DT="EX" D ^%DT S X=Y K:X<1 X
"^DD",80.5,80.5,.01,1,0)
^.1
"^DD",80.5,80.5,.01,1,1,0)
80.5^B
"^DD",80.5,80.5,.01,1,1,1)
S ^ICDRS("B",$E(X,1,30),DA)=""
"^DD",80.5,80.5,.01,1,1,2)
K ^ICDRS("B",$E(X,1,30),DA)
"^DD",80.5,80.5,.01,3)
(No range limit on date)
"^DD",80.5,80.5,.01,21,0)
^^1^1^3120524^
"^DD",80.5,80.5,.01,21,1,0)
Effective Date for these rules
"^DD",80.5,80.5,.01,"DT")
3120524
"^DD",80.5,80.5,1,0)
MDC^80.51P^^1;0
"^DD",80.5,80.51,0)
MDC SUB-FIELD^^1^2
"^DD",80.5,80.51,0,"DT")
3120524
"^DD",80.5,80.51,0,"IX","B",80.51,.01)

"^DD",80.5,80.51,0,"NM","MDC")

"^DD",80.5,80.51,0,"UP")
80.5
"^DD",80.5,80.51,.01,0)
MDC^MRMP80.3'^ICM(^0;1^Q
"^DD",80.5,80.51,.01,1,0)
^.1
"^DD",80.5,80.51,.01,1,1,0)
80.51^B
"^DD",80.5,80.51,.01,1,1,1)
S ^ICDRS(DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",80.5,80.51,.01,1,1,2)
K ^ICDRS(DA(1),1,"B",$E(X,1,30),DA)
"^DD",80.5,80.51,.01,3)
ENTER A MAJOR DIAGNOSTIC CODE
"^DD",80.5,80.51,.01,21,0)
^^1^1^3120524^
"^DD",80.5,80.51,.01,21,1,0)
This is a pointer to file #80.3 - Major Diagnostic Categories
"^DD",80.5,80.51,.01,"DT")
3120524
"^DD",80.5,80.51,1,0)
DRG^80.511P^^2;0
"^DD",80.5,80.511,0)
DRG SUB-FIELD^^1^2
"^DD",80.5,80.511,0,"DT")
3120524
"^DD",80.5,80.511,0,"IX","B",80.511,.01)

"^DD",80.5,80.511,0,"IX","C",80.511,1)

"^DD",80.5,80.511,0,"NM","DRG")

"^DD",80.5,80.511,0,"UP")
80.51
"^DD",80.5,80.511,.01,0)
DRG^MRMP80.2'^ICD(^0;1^Q
"^DD",80.5,80.511,.01,1,0)
^.1
"^DD",80.5,80.511,.01,1,1,0)
80.511^B
"^DD",80.5,80.511,.01,1,1,1)
S ^ICDRS(DA(2),1,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",80.5,80.511,.01,1,1,2)
K ^ICDRS(DA(2),1,DA(1),2,"B",$E(X,1,30),DA)
"^DD",80.5,80.511,.01,3)
ENTER A DRG CODE
"^DD",80.5,80.511,.01,21,0)
^^1^1^3120524^
"^DD",80.5,80.511,.01,21,1,0)
This is a pointer to file #80.2 - DRG
"^DD",80.5,80.511,.01,"DT")
3120524
"^DD",80.5,80.511,1,0)
ORDER^NJ4,0^^0;2^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1.N) X
"^DD",80.5,80.511,1,1,0)
^.1
"^DD",80.5,80.511,1,1,1,0)
80.511^C
"^DD",80.5,80.511,1,1,1,1)
S ^ICDRS(DA(2),1,DA(1),2,"C",$E(X,1,30),DA)=""
"^DD",80.5,80.511,1,1,1,2)
K ^ICDRS(DA(2),1,DA(1),2,"C",$E(X,1,30),DA)
"^DD",80.5,80.511,1,1,1,"DT")
3120511
"^DD",80.5,80.511,1,3)
Type a number between 1 and 9999, 0 decimal digits.
"^DD",80.5,80.511,1,21,0)
^^1^1^3120525^
"^DD",80.5,80.511,1,21,1,0)
Specifies the order of surgical importance of this DRG.
"^DD",80.5,80.511,1,"DT")
3120525
"^DD",80.6,80.6,0)
FIELD^^2^4
"^DD",80.6,80.6,0,"DDA")
N
"^DD",80.6,80.6,0,"DT")
3120529
"^DD",80.6,80.6,0,"IX","B",80.6,.01)

"^DD",80.6,80.6,0,"IX","C",80.62,.01)

"^DD",80.6,80.6,0,"IX","DX",80.62,.01)

"^DD",80.6,80.6,0,"IX","PCS",80.63,.01)

"^DD",80.6,80.6,0,"NM","DRG HAC")

"^DD",80.6,80.6,0,"VRPK")
ICD
"^DD",80.6,80.6,.01,0)
HAC CODE^RNJ3,0^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1.N) X
"^DD",80.6,80.6,.01,1,0)
^.1
"^DD",80.6,80.6,.01,1,1,0)
80.6^B
"^DD",80.6,80.6,.01,1,1,1)
S ^ICDHAC("B",$E(X,1,30),DA)=""
"^DD",80.6,80.6,.01,1,1,2)
K ^ICDHAC("B",$E(X,1,30),DA)
"^DD",80.6,80.6,.01,3)
Type a number between 1 and 999, 0 decimal digits.
"^DD",80.6,80.6,.01,21,0)
^^1^1^3120529^
"^DD",80.6,80.6,.01,21,1,0)
Code for Hospital Acquired Condition (HAC)
"^DD",80.6,80.6,.01,"DT")
3120529
"^DD",80.6,80.6,1,0)
HAC DESCRIPTION^F^^0;2^K:$L(X)>100!($L(X)<1) X
"^DD",80.6,80.6,1,3)
Answer must be 1-100 characters in length.
"^DD",80.6,80.6,1,21,0)
^^1^1^3120529^
"^DD",80.6,80.6,1,21,1,0)
Description for this Hospital Acquired Condition code
"^DD",80.6,80.6,1,"DT")
3120529
"^DD",80.6,80.6,2,0)
DIAGNOSIS CODE^80.62PA^^1;0
"^DD",80.6,80.6,2,21,0)
^^1^1^3120529^
"^DD",80.6,80.6,2,21,1,0)
Diagnosis Code pointer to File #80
"^DD",80.6,80.6,3,0)
PROCEDURE CODES^80.63P^^2;0
"^DD",80.6,80.6,3,21,0)
^^1^1^3120525^
"^DD",80.6,80.6,3,21,1,0)
Procedure codes within the HAC category 
"^DD",80.6,80.6,3,"DT")
3120925
"^DD",80.6,80.62,0)
DIAGNOSIS CODE SUB-FIELD^^1^2
"^DD",80.6,80.62,0,"DT")
3120529
"^DD",80.6,80.62,0,"IX","B",80.62,.01)

"^DD",80.6,80.62,0,"NM","DIAGNOSIS CODE")

"^DD",80.6,80.62,0,"UP")
80.6
"^DD",80.6,80.62,.01,0)
DIAGNOSIS CODE^MP80'^ICD9(^0;1^Q
"^DD",80.6,80.62,.01,1,0)
^.1
"^DD",80.6,80.62,.01,1,1,0)
80.62^B
"^DD",80.6,80.62,.01,1,1,1)
S ^ICDHAC(DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",80.6,80.62,.01,1,1,2)
K ^ICDHAC(DA(1),1,"B",$E(X,1,30),DA)
"^DD",80.6,80.62,.01,1,2,0)
80.6^C
"^DD",80.6,80.62,.01,1,2,1)
S ^ICDHAC("C",$E(X,1,30),DA(1),DA)=""
"^DD",80.6,80.62,.01,1,2,2)
K ^ICDHAC("C",$E(X,1,30),DA(1),DA)
"^DD",80.6,80.62,.01,1,2,"DT")
3120529
"^DD",80.6,80.62,.01,3)
ENTER A DIAGNOSIS CODE
"^DD",80.6,80.62,.01,"DT")
3120529
"^DD",80.6,80.62,1,0)
PRIMARY^S^0:No;1:Yes;^0;2^Q
"^DD",80.6,80.62,1,3)
ENTER 0 FOR NO (SECONDARY) OR 1 FOR YES
"^DD",80.6,80.62,1,"DT")
3120529
"^DD",80.6,80.63,0)
PROCEDURE CODES SUB-FIELD^^.01^1
"^DD",80.6,80.63,0,"DT")
3120525
"^DD",80.6,80.63,0,"IX","B",80.63,.01)

"^DD",80.6,80.63,0,"NM","PROCEDURE CODES")

"^DD",80.6,80.63,0,"UP")
80.6
"^DD",80.6,80.63,.01,0)
PROCEDURE CODES^MP80.1'^ICD0(^0;1^Q
"^DD",80.6,80.63,.01,1,0)
^.1
"^DD",80.6,80.63,.01,1,1,0)
80.63^B
"^DD",80.6,80.63,.01,1,1,1)
S ^ICDHAC(DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",80.6,80.63,.01,1,1,2)
K ^ICDHAC(DA(1),2,"B",$E(X,1,30),DA)
"^DD",80.6,80.63,.01,1,2,0)
80.6^PCS
"^DD",80.6,80.63,.01,1,2,1)
S ^ICDHAC("PCS",$E(X,1,30),DA(1),DA)=""
"^DD",80.6,80.63,.01,1,2,2)
K ^ICDHAC("PCS",$E(X,1,30),DA(1),DA)
"^DD",80.6,80.63,.01,1,2,"DT")
3120525
"^DD",80.6,80.63,.01,3)
ENTER PROCEDURE CODE
"^DD",80.6,80.63,.01,21,0)
^^1^1^3120525^
"^DD",80.6,80.63,.01,21,1,0)
Procedure code within the HAC category
"^DD",80.6,80.63,.01,"DT")
3120525
"^DD",82.11,82.11,0)
FIELD^^1^2
"^DD",82.11,82.11,0,"DDA")
N
"^DD",82.11,82.11,0,"DT")
3120610
"^DD",82.11,82.11,0,"IX","B",82.11,.01)

"^DD",82.11,82.11,0,"IX","WITH1",82.1112,.01)

"^DD",82.11,82.11,0,"IX","WITH2",82.1113,.01)

"^DD",82.11,82.11,0,"IX","WITH3",82.1114,.01)

"^DD",82.11,82.11,0,"IX","WITH4",82.1115,.01)

"^DD",82.11,82.11,0,"NM","DRG PROCEDURE CODE COMBINATIONS")

"^DD",82.11,82.11,0,"VRPK")
ICD
"^DD",82.11,82.11,.01,0)
IDENTIFIER CODE^RP82.1'^ICDIP(^0;1^Q
"^DD",82.11,82.11,.01,1,0)
^.1
"^DD",82.11,82.11,.01,1,1,0)
82.11^B
"^DD",82.11,82.11,.01,1,1,1)
S ^ICDIDP("B",$E(X,1,30),DA)=""
"^DD",82.11,82.11,.01,1,1,2)
K ^ICDIDP("B",$E(X,1,30),DA)
"^DD",82.11,82.11,.01,3)
Enter an Identifier Code.
"^DD",82.11,82.11,.01,21,0)
^^2^2^3120610^
"^DD",82.11,82.11,.01,21,1,0)
This is a code which is used in DRG Grouper processing. It specifies a
"^DD",82.11,82.11,.01,21,2,0)
particular patient condition which further explains a diagnosis.
"^DD",82.11,82.11,.01,"DT")
3120610
"^DD",82.11,82.11,1,0)
BLOCK^82.111A^^BL;0
"^DD",82.11,82.11,1,21,0)
^^11^11^3120711^
"^DD",82.11,82.11,1,21,1,0)
This multiple contains blocks of specific combinations of procedures 
"^DD",82.11,82.11,1,21,2,0)
(located in the "ONE OF" and the "WITH ONE OF n" multiples), which when 
"^DD",82.11,82.11,1,21,3,0)
found to occur together for a patient, confirm that the patient has the 
"^DD",82.11,82.11,1,21,4,0)
specific patient case identified in the IDENTIFIER CODE (#.01) field. It 
"^DD",82.11,82.11,1,21,5,0)
also supplies the DRGs (located in the "MDC" multiple) associated with 
"^DD",82.11,82.11,1,21,6,0)
patient case.
"^DD",82.11,82.11,1,21,7,0)
 
"^DD",82.11,82.11,1,21,8,0)
Patient cases are divided in such a way that any one BLOCK has to be 
"^DD",82.11,82.11,1,21,9,0)
satisfied. For a BLOCK to be satisfied, at least one diagnosis code from 
"^DD",82.11,82.11,1,21,10,0)
each code set should have match with patient's diagnosis codes.  
"^DD",82.11,82.11,1,21,11,0)
Whichever BLOCK is satisfied, we get DRG, MDC from that BLOCK.
"^DD",82.11,82.111,0)
BLOCK SUB-FIELD^^6^7
"^DD",82.11,82.111,0,"DT")
3120610
"^DD",82.11,82.111,0,"IX","B",82.111,.01)

"^DD",82.11,82.111,0,"NM","BLOCK")

"^DD",82.11,82.111,0,"UP")
82.11
"^DD",82.11,82.111,.01,0)
BLOCK^MRNJ4,0^^0;1^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1.N) X
"^DD",82.11,82.111,.01,1,0)
^.1
"^DD",82.11,82.111,.01,1,1,0)
82.111^B
"^DD",82.11,82.111,.01,1,1,1)
S ^ICDIDP(DA(1),"BL","B",$E(X,1,30),DA)=""
"^DD",82.11,82.111,.01,1,1,2)
K ^ICDIDP(DA(1),"BL","B",$E(X,1,30),DA)
"^DD",82.11,82.111,.01,3)
Type a number between 1 and 9999, 0 decimal digits.
"^DD",82.11,82.111,.01,21,0)
^^4^4^3120711^
"^DD",82.11,82.111,.01,21,1,0)
This field is used to uniquely identify a specific combination of 
"^DD",82.11,82.111,.01,21,2,0)
procedures (located in the "ONE OF" and the "WITH ONE OF n" multiples)
"^DD",82.11,82.111,.01,21,3,0)
which confirm the DRG identified by this record. Blocks are numbered 
"^DD",82.11,82.111,.01,21,4,0)
sequentially starting at 1.
"^DD",82.11,82.111,.01,"DT")
3120711
"^DD",82.11,82.111,1,0)
ONE OF^82.1111PA^^ONE;0
"^DD",82.11,82.111,1,21,0)
^^9^9^3120711^
"^DD",82.11,82.111,1,21,1,0)
This multiple contains Procedure Codes that will be used in combination
"^DD",82.11,82.111,1,21,2,0)
with the "With One Of" multiple fields below in the determination of a
"^DD",82.11,82.111,1,21,3,0)
Diagnosis Related Group (DRG). In the DRG Grouper calculation routines, if
"^DD",82.11,82.111,1,21,4,0)
a Procedure Code exists in this multiple and also exists in each of the
"^DD",82.11,82.111,1,21,5,0)
"With One Of" multiples that are present, then it confirms the DRG code in
"^DD",82.11,82.111,1,21,6,0)
the IDENTIFIER CODE (#.01) field of this record. There will always be at
"^DD",82.11,82.111,1,21,7,0)
least one Procedure Code in the "One Of" multiple, and at least one
"^DD",82.11,82.111,1,21,8,0)
Procedure Code in the "With One Of 1" multiple, but the "With One Of 2",
"^DD",82.11,82.111,1,21,9,0)
"With One Of 3" and "With One Of 4" multiples may be empty.  
"^DD",82.11,82.111,2,0)
WITH ONE OF 1^82.1112PA^^WITH1;0
"^DD",82.11,82.111,2,21,0)
^^1^1^3120711^
"^DD",82.11,82.111,2,21,1,0)
This multiple contains the "With One Of 1" field.
"^DD",82.11,82.111,3,0)
WITH ONE OF 2^82.1113PA^^WITH2;0
"^DD",82.11,82.111,3,21,0)
^^3^3^3120716^
"^DD",82.11,82.111,3,21,1,0)
This multiple field contains Procedure Codes that will be used in 
"^DD",82.11,82.111,3,21,2,0)
combination with the "One Of" field and the other "With One Of" fields in 
"^DD",82.11,82.111,3,21,3,0)
the determination of a Diagnosis Related Group (DRG).
"^DD",82.11,82.111,4,0)
WITH ONE OF 3^82.1114PA^^WITH3;0
"^DD",82.11,82.111,4,21,0)
^^1^1^3120711^
"^DD",82.11,82.111,4,21,1,0)
This multiple contains the "With One Of 3" field.
"^DD",82.11,82.111,5,0)
WITH ONE OF 4^82.1115PA^^WITH4;0
"^DD",82.11,82.111,5,21,0)
^^1^1^3120711^
"^DD",82.11,82.111,5,21,1,0)
This multiple contains the "With One Of 4" field.
"^DD",82.11,82.111,6,0)
MDC^82.1116PA^^MDC;0
"^DD",82.11,82.111,6,21,0)
^^3^3^3120716^
"^DD",82.11,82.111,6,21,1,0)
This multiple contains the Major Diagnostic Categories (MDC) codes which, 
"^DD",82.11,82.111,6,21,2,0)
in turn, contains the Diagnosis Related Group (DRG) codes of the BLOCK 
"^DD",82.11,82.111,6,21,3,0)
identified. 
"^DD",82.11,82.1111,0)
ONE OF SUB-FIELD^^.01^1
"^DD",82.11,82.1111,0,"DT")
3120610
"^DD",82.11,82.1111,0,"IX","B",82.1111,.01)

"^DD",82.11,82.1111,0,"NM","ONE OF")

"^DD",82.11,82.1111,0,"UP")
82.111
"^DD",82.11,82.1111,.01,0)
ONE OF^MP80.1'^ICD0(^0;1^Q
"^DD",82.11,82.1111,.01,1,0)
^.1
"^DD",82.11,82.1111,.01,1,1,0)
82.1111^B
"^DD",82.11,82.1111,.01,1,1,1)
S ^ICDIDP(DA(2),"BL",DA(1),"ONE","B",$E(X,1,30),DA)=""
"^DD",82.11,82.1111,.01,1,1,2)
K ^ICDIDP(DA(2),"BL",DA(1),"ONE","B",$E(X,1,30),DA)
"^DD",82.11,82.1111,.01,3)
Enter a Procedure Code (One Of).
"^DD",82.11,82.1111,.01,21,0)
^^3^3^3120610^
"^DD",82.11,82.1111,.01,21,1,0)
This is a Procedure Code that will be used in combination with the "With
"^DD",82.11,82.1111,.01,21,2,0)
One Of" fields below in the determination of a Diagnosis
"^DD",82.11,82.1111,.01,21,3,0)
Related Group (DRG). 
"^DD",82.11,82.1111,.01,"DT")
3120611
"^DD",82.11,82.1112,0)
WITH ONE OF 1 SUB-FIELD^^.01^1
"^DD",82.11,82.1112,0,"DT")
3120610
"^DD",82.11,82.1112,0,"IX","B",82.1112,.01)

"^DD",82.11,82.1112,0,"NM","WITH ONE OF 1")

"^DD",82.11,82.1112,0,"UP")
82.111
"^DD",82.11,82.1112,.01,0)
WITH ONE OF 1^MRP80.1'^ICD0(^0;1^Q
"^DD",82.11,82.1112,.01,1,0)
^.1
"^DD",82.11,82.1112,.01,1,1,0)
82.1112^B
"^DD",82.11,82.1112,.01,1,1,1)
S ^ICDIDP(DA(2),"BL",DA(1),"WITH1","B",$E(X,1,30),DA)=""
"^DD",82.11,82.1112,.01,1,1,2)
K ^ICDIDP(DA(2),"BL",DA(1),"WITH1","B",$E(X,1,30),DA)
"^DD",82.11,82.1112,.01,1,2,0)
82.11^WITH1
"^DD",82.11,82.1112,.01,1,2,1)
S ^ICDIDP("WITH1",$E(X,1,30),DA(2),DA(1),DA)=""
"^DD",82.11,82.1112,.01,1,2,2)
K ^ICDIDP("WITH1",$E(X,1,30),DA(2),DA(1),DA)
"^DD",82.11,82.1112,.01,1,2,"DT")
3120611
"^DD",82.11,82.1112,.01,3)
Enter a Procedure Code (With One Of 1).
"^DD",82.11,82.1112,.01,21,0)
^^3^3^3120610^^
"^DD",82.11,82.1112,.01,21,1,0)
This is a Procedure Code that will be used in combination with the "One
"^DD",82.11,82.1112,.01,21,2,0)
Of" field and the other "With One Of" fields in the determination of a
"^DD",82.11,82.1112,.01,21,3,0)
Diagnosis Related Group (DRG).
"^DD",82.11,82.1112,.01,"DT")
3120611
"^DD",82.11,82.1113,0)
WITH ONE OF 2 SUB-FIELD^^.01^1
"^DD",82.11,82.1113,0,"DT")
3120610
"^DD",82.11,82.1113,0,"IX","B",82.1113,.01)

"^DD",82.11,82.1113,0,"NM","WITH ONE OF 2")

"^DD",82.11,82.1113,0,"UP")
82.111
"^DD",82.11,82.1113,.01,0)
WITH ONE OF 2^MRP80.1'^ICD0(^0;1^Q
"^DD",82.11,82.1113,.01,1,0)
^.1
"^DD",82.11,82.1113,.01,1,1,0)
82.1113^B
"^DD",82.11,82.1113,.01,1,1,1)
S ^ICDIDP(DA(2),"BL",DA(1),"WITH2","B",$E(X,1,30),DA)=""
"^DD",82.11,82.1113,.01,1,1,2)
K ^ICDIDP(DA(2),"BL",DA(1),"WITH2","B",$E(X,1,30),DA)
"^DD",82.11,82.1113,.01,1,2,0)
82.11^WITH2
"^DD",82.11,82.1113,.01,1,2,1)
S ^ICDIDP("WITH2",$E(X,1,30),DA(2),DA(1),DA)=""
"^DD",82.11,82.1113,.01,1,2,2)
K ^ICDIDP("WITH2",$E(X,1,30),DA(2),DA(1),DA)
"^DD",82.11,82.1113,.01,1,2,"DT")
3120611
"^DD",82.11,82.1113,.01,3)
Enter a Procedure Code (With One Of 2).
"^DD",82.11,82.1113,.01,21,0)
^^3^3^3120716^
"^DD",82.11,82.1113,.01,21,1,0)
This is a Procedure Code that will be used in combination with the "One
"^DD",82.11,82.1113,.01,21,2,0)
Of" field and the other "With One Of" fields in the determination of a
"^DD",82.11,82.1113,.01,21,3,0)
Diagnosis Related Group (DRG).
"^DD",82.11,82.1113,.01,"DT")
3120716
"^DD",82.11,82.1114,0)
WITH ONE OF 3 SUB-FIELD^^.01^1
"^DD",82.11,82.1114,0,"DT")
3120610
"^DD",82.11,82.1114,0,"IX","B",82.1114,.01)

"^DD",82.11,82.1114,0,"NM","WITH ONE OF 3")

"^DD",82.11,82.1114,0,"UP")
82.111
"^DD",82.11,82.1114,.01,0)
WITH ONE OF 3^MRP80.1'^ICD0(^0;1^Q
"^DD",82.11,82.1114,.01,1,0)
^.1
"^DD",82.11,82.1114,.01,1,1,0)
82.1114^B
"^DD",82.11,82.1114,.01,1,1,1)
S ^ICDIDP(DA(2),"BL",DA(1),"WITH3","B",$E(X,1,30),DA)=""
"^DD",82.11,82.1114,.01,1,1,2)
K ^ICDIDP(DA(2),"BL",DA(1),"WITH3","B",$E(X,1,30),DA)
"^DD",82.11,82.1114,.01,1,2,0)
82.11^WITH3
"^DD",82.11,82.1114,.01,1,2,1)
S ^ICDIDP("WITH3",$E(X,1,30),DA(2),DA(1),DA)=""
"^DD",82.11,82.1114,.01,1,2,2)
K ^ICDIDP("WITH3",$E(X,1,30),DA(2),DA(1),DA)
"^DD",82.11,82.1114,.01,1,2,"DT")
3120611
"^DD",82.11,82.1114,.01,3)
Enter a Procedure Code (With One Of 3).
"^DD",82.11,82.1114,.01,21,0)
^^3^3^3120711^^^
"^DD",82.11,82.1114,.01,21,1,0)
This is a Procedure Code that will be used in combination with the "One
"^DD",82.11,82.1114,.01,21,2,0)
Of" field and the other "With One Of" fields in the determination of a
"^DD",82.11,82.1114,.01,21,3,0)
Diagnosis Related Group (DRG).
"^DD",82.11,82.1114,.01,"DT")
3120711
"^DD",82.11,82.1115,0)
WITH ONE OF 4 SUB-FIELD^^.01^1
"^DD",82.11,82.1115,0,"DT")
3120610
"^DD",82.11,82.1115,0,"IX","B",82.1115,.01)

"^DD",82.11,82.1115,0,"NM","WITH ONE OF 4")

"^DD",82.11,82.1115,0,"UP")
82.111
"^DD",82.11,82.1115,.01,0)
WITH ONE OF 4^MRP80.1'^ICD0(^0;1^Q
"^DD",82.11,82.1115,.01,1,0)
^.1
"^DD",82.11,82.1115,.01,1,1,0)
82.1115^B
"^DD",82.11,82.1115,.01,1,1,1)
S ^ICDIDP(DA(2),"BL",DA(1),"WITH4","B",$E(X,1,30),DA)=""
"^DD",82.11,82.1115,.01,1,1,2)
K ^ICDIDP(DA(2),"BL",DA(1),"WITH4","B",$E(X,1,30),DA)
"^DD",82.11,82.1115,.01,1,2,0)
82.11^WITH4
"^DD",82.11,82.1115,.01,1,2,1)
S ^ICDIDP("WITH4",$E(X,1,30),DA(2),DA(1),DA)=""
"^DD",82.11,82.1115,.01,1,2,2)
K ^ICDIDP("WITH4",$E(X,1,30),DA(2),DA(1),DA)
"^DD",82.11,82.1115,.01,1,2,"DT")
3120611
"^DD",82.11,82.1115,.01,3)
Enter a Procedure COde (With One Of 4).
"^DD",82.11,82.1115,.01,21,0)
^^3^3^3120711^^^^
"^DD",82.11,82.1115,.01,21,1,0)
This is a Procedure Code that will be used in combination with the "One
"^DD",82.11,82.1115,.01,21,2,0)
Of" field and the other "With One Of" fields in the determination of a
"^DD",82.11,82.1115,.01,21,3,0)
Diagnosis Related Group (DRG).
"^DD",82.11,82.1115,.01,"DT")
3120711
"^DD",82.11,82.1116,0)
MDC SUB-FIELD^^1^2
"^DD",82.11,82.1116,0,"DT")
3120610
"^DD",82.11,82.1116,0,"IX","B",82.1116,.01)

"^DD",82.11,82.1116,0,"NM","MDC")

"^DD",82.11,82.1116,0,"UP")
82.111
"^DD",82.11,82.1116,.01,0)
MDC^MRP80.3'^ICM(^0;1^Q
"^DD",82.11,82.1116,.01,1,0)
^.1
"^DD",82.11,82.1116,.01,1,1,0)
82.1116^B
"^DD",82.11,82.1116,.01,1,1,1)
S ^ICDIDP(DA(2),"BL",DA(1),"MDC","B",$E(X,1,30),DA)=""
"^DD",82.11,82.1116,.01,1,1,2)
K ^ICDIDP(DA(2),"BL",DA(1),"MDC","B",$E(X,1,30),DA)
"^DD",82.11,82.1116,.01,3)
Enter a Major Diagnostic Category (MDC).
"^DD",82.11,82.1116,.01,21,0)
^^3^3^3120716^
"^DD",82.11,82.1116,.01,21,1,0)
This field contains a Major Diagnostic Category (MDC). An MDC is a
"^DD",82.11,82.1116,.01,21,2,0)
number in the range 1 to 27 which categorizes all possible principal 
"^DD",82.11,82.1116,.01,21,3,0)
diagnoses into 27 mutually exclusive diagnosis areas.
"^DD",82.11,82.1116,.01,"DT")
3120716
"^DD",82.11,82.1116,1,0)
DRG^82.11161PA^^DRG;0
"^DD",82.11,82.1116,1,21,0)
^^2^2^3120716^
"^DD",82.11,82.1116,1,21,1,0)
This multiple contains Diagnosis Related Group (DRG) codes related to the 
"^DD",82.11,82.1116,1,21,2,0)
MDC identified.
"^DD",82.11,82.11161,0)
DRG SUB-FIELD^^.01^1
"^DD",82.11,82.11161,0,"DT")
3120610
"^DD",82.11,82.11161,0,"IX","B",82.11161,.01)

"^DD",82.11,82.11161,0,"NM","DRG")

"^DD",82.11,82.11161,0,"UP")
82.1116
"^DD",82.11,82.11161,.01,0)
DRG^MRP80.2'^ICD(^0;1^Q
"^DD",82.11,82.11161,.01,1,0)
^.1
"^DD",82.11,82.11161,.01,1,1,0)
82.11161^B
"^DD",82.11,82.11161,.01,1,1,1)
S ^ICDIDP(DA(3),"BL",DA(2),"MDC",DA(1),"DRG","B",$E(X,1,30),DA)=""
"^DD",82.11,82.11161,.01,1,1,2)
K ^ICDIDP(DA(3),"BL",DA(2),"MDC",DA(1),"DRG","B",$E(X,1,30),DA)
"^DD",82.11,82.11161,.01,3)
Enter a Diagnosis Related Group code (DRG).
"^DD",82.11,82.11161,.01,21,0)
^^2^2^3120711^
"^DD",82.11,82.11161,.01,21,1,0)
This field contains a Diagnosis Related Group (DRG) code. A DRG is a 
"^DD",82.11,82.11161,.01,21,2,0)
code which classifies hospital cases into one of 999 groups.
"^DD",82.11,82.11161,.01,"DT")
3120711
"^DD",82.12,82.12,0)
FIELD^^1^2
"^DD",82.12,82.12,0,"DDA")
N
"^DD",82.12,82.12,0,"DT")
3120610
"^DD",82.12,82.12,0,"IX","B",82.12,.01)

"^DD",82.12,82.12,0,"IX","ONE",82.1211,.01)

"^DD",82.12,82.12,0,"IX","WITH1",82.1212,.01)

"^DD",82.12,82.12,0,"IX","WITH2",82.1213,.01)

"^DD",82.12,82.12,0,"IX","WITH3",82.1214,.01)

"^DD",82.12,82.12,0,"IX","WITH4",82.1215,.01)

"^DD",82.12,82.12,0,"NM","DRG DIAGNOSIS CODE COMBINATIONS")

"^DD",82.12,82.12,0,"VRPK")
ICD
"^DD",82.12,82.12,.01,0)
IDENTIFIER CODE^RP82'^ICDID(^0;1^Q
"^DD",82.12,82.12,.01,1,0)
^.1
"^DD",82.12,82.12,.01,1,1,0)
82.12^B
"^DD",82.12,82.12,.01,1,1,1)
S ^ICDIDD("B",$E(X,1,30),DA)=""
"^DD",82.12,82.12,.01,1,1,2)
K ^ICDIDD("B",$E(X,1,30),DA)
"^DD",82.12,82.12,.01,3)
Enter an Identifier Code.
"^DD",82.12,82.12,.01,21,0)
^^2^2^3120716^
"^DD",82.12,82.12,.01,21,1,0)
This is a code which is used in DRG Grouper processing. It specifies a
"^DD",82.12,82.12,.01,21,2,0)
particular patient condition which further explains a diagnosis.
"^DD",82.12,82.12,.01,"DT")
3120716
"^DD",82.12,82.12,1,0)
BLOCK^82.121A^^BL;0
"^DD",82.12,82.12,1,21,0)
^^11^11^3120716^
"^DD",82.12,82.12,1,21,1,0)
This multiple contains blocks of specific combinations of diagnoses
"^DD",82.12,82.12,1,21,2,0)
(located in the "ONE OF" and the "WITH ONE OF n" multiples), which, when
"^DD",82.12,82.12,1,21,3,0)
found to occur together for a patient, confirm that the patient has the 
"^DD",82.12,82.12,1,21,4,0)
specific patient case identified in the IDENTIFIER CODE (#.01) field. It
"^DD",82.12,82.12,1,21,5,0)
also supplies the DRGs (located in the "MDC" multiple) associated with the
"^DD",82.12,82.12,1,21,6,0)
patient case. 
"^DD",82.12,82.12,1,21,7,0)
 
"^DD",82.12,82.12,1,21,8,0)
Patient cases are divided in such a way that any one BLOCK has to be
"^DD",82.12,82.12,1,21,9,0)
satisfied. For a BLOCK to be satisfied, at least one diagnosis code from
"^DD",82.12,82.12,1,21,10,0)
each code set should have match with patient's diagnosis codes.  Whichever
"^DD",82.12,82.12,1,21,11,0)
BLOCK is satisfied, we get DRG, MDC from that BLOCK.
"^DD",82.12,82.121,0)
BLOCK SUB-FIELD^^6^7
"^DD",82.12,82.121,0,"DT")
3120610
"^DD",82.12,82.121,0,"IX","B",82.121,.01)

"^DD",82.12,82.121,0,"NM","BLOCK")

"^DD",82.12,82.121,0,"UP")
82.12
"^DD",82.12,82.121,.01,0)
BLOCK^MRNJ4,0^^0;1^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1.N) X
"^DD",82.12,82.121,.01,1,0)
^.1
"^DD",82.12,82.121,.01,1,1,0)
82.121^B
"^DD",82.12,82.121,.01,1,1,1)
S ^ICDIDD(DA(1),"BL","B",$E(X,1,30),DA)=""
"^DD",82.12,82.121,.01,1,1,2)
K ^ICDIDD(DA(1),"BL","B",$E(X,1,30),DA)
"^DD",82.12,82.121,.01,3)
Type a number between 1 and 9999, 0 decimal digits.
"^DD",82.12,82.121,.01,21,0)
^^4^4^3120716^
"^DD",82.12,82.121,.01,21,1,0)
This field is used to uniquely identify a specific combination of 
"^DD",82.12,82.121,.01,21,2,0)
diagnoses (located in the "ONE OF" and the "WITH ONE OF n" multiples)
"^DD",82.12,82.121,.01,21,3,0)
which confirm the DRG identified by this record. Blocks are numbered
"^DD",82.12,82.121,.01,21,4,0)
sequentially starting at 1. 
"^DD",82.12,82.121,.01,"DT")
3120716
"^DD",82.12,82.121,1,0)
ONE OF^82.1211PA^^ONE;0
"^DD",82.12,82.121,1,21,0)
^^9^9^3120716^
"^DD",82.12,82.121,1,21,1,0)
This multiple contains Diagnosis Codes that will be used in combination
"^DD",82.12,82.121,1,21,2,0)
with the "With One Of" multiple fields below in the determination of a
"^DD",82.12,82.121,1,21,3,0)
Diagnosis Related Group (DRG). In the DRG Grouper calculation routines, if
"^DD",82.12,82.121,1,21,4,0)
a Diagnosis Code exists in this multiple and also exists in each of the
"^DD",82.12,82.121,1,21,5,0)
"With One Of" multiples that are present, then it confirms the DRG code in
"^DD",82.12,82.121,1,21,6,0)
the IDENTIFIER CODE (#.01) field of this record. There will always be at
"^DD",82.12,82.121,1,21,7,0)
least one Diagnosis Code in the "One Of" multiple, and at least one
"^DD",82.12,82.121,1,21,8,0)
Diagnosis Code in the "With One Of 1" multiple, but the "With One Of 2",
"^DD",82.12,82.121,1,21,9,0)
"With One Of 3" and "With One Of 4" multiples may be empty.
"^DD",82.12,82.121,2,0)
WITH ONE OF 1^82.1212PA^^WITH1;0
"^DD",82.12,82.121,2,21,0)
^^3^3^3120716^
"^DD",82.12,82.121,2,21,1,0)
This multiple field contains Diagnosis Codes that will be used in 
"^DD",82.12,82.121,2,21,2,0)
combination with the "One Of" field and the other "With One Of" fields in 
"^DD",82.12,82.121,2,21,3,0)
the determination of a Diagnosis Related Group (DRG).
"^DD",82.12,82.121,3,0)
WITH ONE OF 2^82.1213PA^^WITH2;0
"^DD",82.12,82.121,3,21,0)
^^3^3^3120716^
"^DD",82.12,82.121,3,21,1,0)
This multiple field contains Diagnosis Codes that will be used in
"^DD",82.12,82.121,3,21,2,0)
combination with the "One Of" field and the other "With One Of" fields in
"^DD",82.12,82.121,3,21,3,0)
the determination of a Diagnosis Related Group (DRG).
"^DD",82.12,82.121,4,0)
WITH ONE OF 3^82.1214PA^^WITH3;0
"^DD",82.12,82.121,4,21,0)
^^3^3^3120716^
"^DD",82.12,82.121,4,21,1,0)
This multiple field contains Diagnosis Codes that will be used in 
"^DD",82.12,82.121,4,21,2,0)
combination with the "One Of" field and the other "With One Of" fields in 
"^DD",82.12,82.121,4,21,3,0)
the determination of a Diagnosis Related Group (DRG).  
"^DD",82.12,82.121,5,0)
WITH ONE OF 4^82.1215PA^^WITH4;0
"^DD",82.12,82.121,5,21,0)
^^3^3^3120716^
"^DD",82.12,82.121,5,21,1,0)
This multiple field contains Diagnosis Codes that will be used in 
"^DD",82.12,82.121,5,21,2,0)
combination with the "One Of" field and the other "With One Of" fields in 
"^DD",82.12,82.121,5,21,3,0)
the determination of a Diagnosis Related Group (DRG).  
"^DD",82.12,82.121,6,0)
MDC^82.1216PA^^MDC;0
"^DD",82.12,82.121,6,21,0)
^^3^3^3120716^
"^DD",82.12,82.121,6,21,1,0)
This multiple contains the Major Diagnostic Categories (MDC) codes which,
"^DD",82.12,82.121,6,21,2,0)
in turn, contains the Diagnosis Related Group (DRG) codes of the BLOCK
"^DD",82.12,82.121,6,21,3,0)
identified. 
"^DD",82.12,82.1211,0)
ONE OF SUB-FIELD^^.01^1
"^DD",82.12,82.1211,0,"DT")
3120610
"^DD",82.12,82.1211,0,"IX","B",82.1211,.01)

"^DD",82.12,82.1211,0,"NM","ONE OF")

"^DD",82.12,82.1211,0,"UP")
82.121
"^DD",82.12,82.1211,.01,0)
ONE OF^MRP80'^ICD9(^0;1^Q
"^DD",82.12,82.1211,.01,1,0)
^.1
"^DD",82.12,82.1211,.01,1,1,0)
82.1211^B
"^DD",82.12,82.1211,.01,1,1,1)
S ^ICDIDD(DA(2),"BL",DA(1),"ONE","B",$E(X,1,30),DA)=""
"^DD",82.12,82.1211,.01,1,1,2)
K ^ICDIDD(DA(2),"BL",DA(1),"ONE","B",$E(X,1,30),DA)
"^DD",82.12,82.1211,.01,1,2,0)
82.12^ONE
"^DD",82.12,82.1211,.01,1,2,1)
S ^ICDIDD("ONE",$E(X,1,30),DA(2),DA(1),DA)=""
"^DD",82.12,82.1211,.01,1,2,2)
K ^ICDIDD("ONE",$E(X,1,30),DA(2),DA(1),DA)
"^DD",82.12,82.1211,.01,1,2,"DT")
3120611
"^DD",82.12,82.1211,.01,3)
Enter a Diagnosis Code (One Of).
"^DD",82.12,82.1211,.01,21,0)
^^3^3^3120716^
"^DD",82.12,82.1211,.01,21,1,0)
This is a Diagnosis Code that will be used in combination with the "With
"^DD",82.12,82.1211,.01,21,2,0)
One Of" fields below in the determination of a Diagnosis Related Group
"^DD",82.12,82.1211,.01,21,3,0)
(DRG). 
"^DD",82.12,82.1211,.01,"DT")
3120716
"^DD",82.12,82.1212,0)
WITH ONE OF 1 SUB-FIELD^^.01^1
"^DD",82.12,82.1212,0,"DT")
3120610
"^DD",82.12,82.1212,0,"IX","B",82.1212,.01)

"^DD",82.12,82.1212,0,"NM","WITH ONE OF 1")

"^DD",82.12,82.1212,0,"UP")
82.121
"^DD",82.12,82.1212,.01,0)
WITH ONE OF 1^MRP80'^ICD9(^0;1^Q
"^DD",82.12,82.1212,.01,1,0)
^.1
"^DD",82.12,82.1212,.01,1,1,0)
82.1212^B
"^DD",82.12,82.1212,.01,1,1,1)
S ^ICDIDD(DA(2),"BL",DA(1),"WITH1","B",$E(X,1,30),DA)=""
"^DD",82.12,82.1212,.01,1,1,2)
K ^ICDIDD(DA(2),"BL",DA(1),"WITH1","B",$E(X,1,30),DA)
"^DD",82.12,82.1212,.01,1,2,0)
82.12^WITH1
"^DD",82.12,82.1212,.01,1,2,1)
S ^ICDIDD("WITH1",$E(X,1,30),DA(2),DA(1),DA)=""
"^DD",82.12,82.1212,.01,1,2,2)
K ^ICDIDD("WITH1",$E(X,1,30),DA(2),DA(1),DA)
"^DD",82.12,82.1212,.01,1,2,"DT")
3120611
"^DD",82.12,82.1212,.01,3)
Enter a Diagnosis Code (With One Of 1).
"^DD",82.12,82.1212,.01,21,0)
^^3^3^3120716^^
"^DD",82.12,82.1212,.01,21,1,0)
This is a Diagnosis Code that will be used in combination with the "One
"^DD",82.12,82.1212,.01,21,2,0)
Of" field and the other "With One Of" fields in the determination of a
"^DD",82.12,82.1212,.01,21,3,0)
Diagnosis Related Group (DRG).
"^DD",82.12,82.1212,.01,"DT")
3120716
"^DD",82.12,82.1213,0)
WITH ONE OF 2 SUB-FIELD^^.01^1
"^DD",82.12,82.1213,0,"DT")
3120610
"^DD",82.12,82.1213,0,"IX","B",82.1213,.01)

"^DD",82.12,82.1213,0,"NM","WITH ONE OF 2")

"^DD",82.12,82.1213,0,"UP")
82.121
"^DD",82.12,82.1213,.01,0)
WITH ONE OF 2^MRP80'^ICD9(^0;1^Q
"^DD",82.12,82.1213,.01,1,0)
^.1
"^DD",82.12,82.1213,.01,1,1,0)
82.1213^B
"^DD",82.12,82.1213,.01,1,1,1)
S ^ICDIDD(DA(2),"BL",DA(1),"WITH2","B",$E(X,1,30),DA)=""
"^DD",82.12,82.1213,.01,1,1,2)
K ^ICDIDD(DA(2),"BL",DA(1),"WITH2","B",$E(X,1,30),DA)
"^DD",82.12,82.1213,.01,1,2,0)
82.12^WITH2
"^DD",82.12,82.1213,.01,1,2,1)
S ^ICDIDD("WITH2",$E(X,1,30),DA(2),DA(1),DA)=""
"^DD",82.12,82.1213,.01,1,2,2)
K ^ICDIDD("WITH2",$E(X,1,30),DA(2),DA(1),DA)
"^DD",82.12,82.1213,.01,1,2,"DT")
3120611
"^DD",82.12,82.1213,.01,3)
Enter a Diagnosis Code (With One Of 2).
"^DD",82.12,82.1213,.01,21,0)
^^3^3^3120716^
"^DD",82.12,82.1213,.01,21,1,0)
This is a Diagnosis Code that will be used in combination with the "One
"^DD",82.12,82.1213,.01,21,2,0)
Of" field and the other "With One Of" fields in the determination of a
"^DD",82.12,82.1213,.01,21,3,0)
Diagnosis Related Group (DRG).
"^DD",82.12,82.1213,.01,"DT")
3120716
"^DD",82.12,82.1214,0)
WITH ONE OF 3 SUB-FIELD^^.01^1
"^DD",82.12,82.1214,0,"DT")
3120610
"^DD",82.12,82.1214,0,"IX","B",82.1214,.01)

"^DD",82.12,82.1214,0,"NM","WITH ONE OF 3")

"^DD",82.12,82.1214,0,"UP")
82.121
"^DD",82.12,82.1214,.01,0)
WITH ONE OF 3^MRP80'^ICD9(^0;1^Q
"^DD",82.12,82.1214,.01,1,0)
^.1
"^DD",82.12,82.1214,.01,1,1,0)
82.1214^B
"^DD",82.12,82.1214,.01,1,1,1)
S ^ICDIDD(DA(2),"BL",DA(1),"WITH3","B",$E(X,1,30),DA)=""
"^DD",82.12,82.1214,.01,1,1,2)
K ^ICDIDD(DA(2),"BL",DA(1),"WITH3","B",$E(X,1,30),DA)
"^DD",82.12,82.1214,.01,1,2,0)
82.12^WITH3
"^DD",82.12,82.1214,.01,1,2,1)
S ^ICDIDD("WITH3",$E(X,1,30),DA(2),DA(1),DA)=""
"^DD",82.12,82.1214,.01,1,2,2)
K ^ICDIDD("WITH3",$E(X,1,30),DA(2),DA(1),DA)
"^DD",82.12,82.1214,.01,1,2,"DT")
3120611
"^DD",82.12,82.1214,.01,3)
Enter a Diagnosis Code (With One Of 3).
"^DD",82.12,82.1214,.01,21,0)
^^3^3^3120716^^
"^DD",82.12,82.1214,.01,21,1,0)
This is a Diagnosis Code that will be used in combination with the "One
"^DD",82.12,82.1214,.01,21,2,0)
Of" field and the other "With One Of" fields in the determination of a
"^DD",82.12,82.1214,.01,21,3,0)
Diagnosis Related Group (DRG).
"^DD",82.12,82.1214,.01,"DT")
3120716
"^DD",82.12,82.1215,0)
WITH ONE OF 4 SUB-FIELD^^.01^1
"^DD",82.12,82.1215,0,"DT")
3120610
"^DD",82.12,82.1215,0,"IX","B",82.1215,.01)

"^DD",82.12,82.1215,0,"NM","WITH ONE OF 4")

"^DD",82.12,82.1215,0,"UP")
82.121
"^DD",82.12,82.1215,.01,0)
WITH ONE OF 4^MRP80'^ICD9(^0;1^Q
"^DD",82.12,82.1215,.01,1,0)
^.1
"^DD",82.12,82.1215,.01,1,1,0)
82.1215^B
"^DD",82.12,82.1215,.01,1,1,1)
S ^ICDIDD(DA(2),"BL",DA(1),"WITH4","B",$E(X,1,30),DA)=""
"^DD",82.12,82.1215,.01,1,1,2)
K ^ICDIDD(DA(2),"BL",DA(1),"WITH4","B",$E(X,1,30),DA)
"^DD",82.12,82.1215,.01,1,2,0)
82.12^WITH4
"^DD",82.12,82.1215,.01,1,2,1)
S ^ICDIDD("WITH4",$E(X,1,30),DA(2),DA(1),DA)=""
"^DD",82.12,82.1215,.01,1,2,2)
K ^ICDIDD("WITH4",$E(X,1,30),DA(2),DA(1),DA)
"^DD",82.12,82.1215,.01,1,2,"DT")
3120611
"^DD",82.12,82.1215,.01,3)
Enter a Diagnosis Code (With One Of 4).
"^DD",82.12,82.1215,.01,21,0)
^^3^3^3120716^
"^DD",82.12,82.1215,.01,21,1,0)
This is a Diagnosis Code that will be used in combination with the "One
"^DD",82.12,82.1215,.01,21,2,0)
Of" field and the other "With One Of" fields in the determination of a
"^DD",82.12,82.1215,.01,21,3,0)
Diagnosis Related Group (DRG).
"^DD",82.12,82.1215,.01,"DT")
3120716
"^DD",82.12,82.1216,0)
MDC SUB-FIELD^^1^2
"^DD",82.12,82.1216,0,"DT")
3120610
"^DD",82.12,82.1216,0,"IX","B",82.1216,.01)

"^DD",82.12,82.1216,0,"NM","MDC")

"^DD",82.12,82.1216,0,"UP")
82.121
"^DD",82.12,82.1216,.01,0)
MDC^MRP80.3'^ICM(^0;1^Q
"^DD",82.12,82.1216,.01,1,0)
^.1
"^DD",82.12,82.1216,.01,1,1,0)
82.1216^B
"^DD",82.12,82.1216,.01,1,1,1)
S ^ICDIDD(DA(2),"BL",DA(1),"MDC","B",$E(X,1,30),DA)=""
"^DD",82.12,82.1216,.01,1,1,2)
K ^ICDIDD(DA(2),"BL",DA(1),"MDC","B",$E(X,1,30),DA)
"^DD",82.12,82.1216,.01,3)
Enter a Major Diagnostic Category code (MDC).
"^DD",82.12,82.1216,.01,21,0)
^^3^3^3120716^
"^DD",82.12,82.1216,.01,21,1,0)
This field contains a Major Diagnostic Category (MDC). An MDC is a number
"^DD",82.12,82.1216,.01,21,2,0)
in the range 1 to 27 which categorizes all possible principal diagnoses
"^DD",82.12,82.1216,.01,21,3,0)
into 27 mutually exclusive diagnosis areas.
"^DD",82.12,82.1216,.01,"DT")
3120716
"^DD",82.12,82.1216,1,0)
DRG^82.12161PA^^DRG;0
"^DD",82.12,82.1216,1,21,0)
^^2^2^3120716^
"^DD",82.12,82.1216,1,21,1,0)
This multiple contains Diagnosis Related Group (DRG) codes related to the
"^DD",82.12,82.1216,1,21,2,0)
MDC identified.
"^DD",82.12,82.12161,0)
DRG SUB-FIELD^^.01^1
"^DD",82.12,82.12161,0,"DT")
3120610
"^DD",82.12,82.12161,0,"IX","B",82.12161,.01)

"^DD",82.12,82.12161,0,"NM","DRG")

"^DD",82.12,82.12161,0,"UP")
82.1216
"^DD",82.12,82.12161,.01,0)
DRG^MRP80.2'^ICD(^0;1^Q
"^DD",82.12,82.12161,.01,1,0)
^.1
"^DD",82.12,82.12161,.01,1,1,0)
82.12161^B
"^DD",82.12,82.12161,.01,1,1,1)
S ^ICDIDD(DA(3),"BL",DA(2),"MDC",DA(1),"DRG","B",$E(X,1,30),DA)=""
"^DD",82.12,82.12161,.01,1,1,2)
K ^ICDIDD(DA(3),"BL",DA(2),"MDC",DA(1),"DRG","B",$E(X,1,30),DA)
"^DD",82.12,82.12161,.01,3)
Enter a Diagnosis Related Group code (DRG).
"^DD",82.12,82.12161,.01,21,0)
^^2^2^3120716^
"^DD",82.12,82.12161,.01,21,1,0)
This field contains a Diagnosis Related Group (DRG) code. A DRG is a code
"^DD",82.12,82.12161,.01,21,2,0)
which classifies hospital cases into one of 999 groups.
"^DD",82.12,82.12161,.01,"DT")
3120716
"^DD",82.13,82.13,0)
FIELD^^1^2
"^DD",82.13,82.13,0,"DDA")
N
"^DD",82.13,82.13,0,"DT")
3120628
"^DD",82.13,82.13,0,"IX","B",82.13,.01)

"^DD",82.13,82.13,0,"NM","DRG CC EXCLUSIONS")

"^DD",82.13,82.13,0,"PT",80,1.11)

"^DD",82.13,82.13,0,"VRPK")
ICD
"^DD",82.13,82.13,.01,0)
EXCLUSION CODE^RF^^0;1^K:$L(X)>30!($L(X)<1)!'(X'?1P.E) X
"^DD",82.13,82.13,.01,1,0)
^.1
"^DD",82.13,82.13,.01,1,1,0)
82.13^B
"^DD",82.13,82.13,.01,1,1,1)
S ^ICDCCEX("B",$E(X,1,30),DA)=""
"^DD",82.13,82.13,.01,1,1,2)
K ^ICDCCEX("B",$E(X,1,30),DA)
"^DD",82.13,82.13,.01,3)
Answer must be 1-30 characters in length.
"^DD",82.13,82.13,.01,21,0)
^^2^2^3120628^
"^DD",82.13,82.13,.01,21,1,0)
This field contains a code which identifies a group of primary Diagnosis 
"^DD",82.13,82.13,.01,21,2,0)
Codes.
"^DD",82.13,82.13,.01,"DT")
3120628
"^DD",82.13,82.13,1,0)
PDX^82.131PA^^1;0
"^DD",82.13,82.13,1,21,0)
^^1^1^3120628^
"^DD",82.13,82.13,1,21,1,0)
This multiple field contains a list of Diagnosis Codes.
"^DD",82.13,82.131,0)
PDX SUB-FIELD^^.01^1
"^DD",82.13,82.131,0,"DT")
3120628
"^DD",82.13,82.131,0,"IX","B",82.131,.01)

"^DD",82.13,82.131,0,"NM","PDX")

"^DD",82.13,82.131,0,"UP")
82.13
"^DD",82.13,82.131,.01,0)
PDX^MRP80'^ICD9(^0;1^Q
"^DD",82.13,82.131,.01,1,0)
^.1
"^DD",82.13,82.131,.01,1,1,0)
82.131^B
"^DD",82.13,82.131,.01,1,1,1)
S ^ICDCCEX(DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",82.13,82.131,.01,1,1,2)
K ^ICDCCEX(DA(1),1,"B",$E(X,1,30),DA)
"^DD",82.13,82.131,.01,3)
Enter a Diagnosis Code.
"^DD",82.13,82.131,.01,21,0)
^^4^4^3120628^
"^DD",82.13,82.131,.01,21,1,0)
This field contains a Diagnosis Code that, when used as a Primary 
"^DD",82.13,82.131,.01,21,2,0)
Diagnosis Code with any Secondary Diagnosis that points to the EXCLUSION 
"^DD",82.13,82.131,.01,21,3,0)
CODE of this file, will cause the CC (Complication/Comorbidity) to be
"^DD",82.13,82.131,.01,21,4,0)
zero meaning "no CC".
"^DD",82.13,82.131,.01,"DT")
3120628
"^DIC",80.5,80.5,0)
DRG SURGICAL HIERARCHY^80.5
"^DIC",80.5,80.5,0,"GL")
^ICDRS(
"^DIC",80.5,80.5,"%",0)
^1.005^^0
"^DIC",80.5,80.5,"%D",0)
^^4^4^3120525^
"^DIC",80.5,80.5,"%D",1,0)
This is the Surgical Hierarchy file. It is populated with data from CMS 
"^DIC",80.5,80.5,"%D",2,0)
(Centers for Medicare and Medicaid Services). The data is used to 
"^DIC",80.5,80.5,"%D",3,0)
determine the DRG (Diagnosis Related Group) by MDC (Major Diagnostic 
"^DIC",80.5,80.5,"%D",4,0)
Category) in surgical order of importance. 
"^DIC",80.5,"B","DRG SURGICAL HIERARCHY",80.5)

"^DIC",80.6,80.6,0)
DRG HAC^80.6
"^DIC",80.6,80.6,0,"GL")
^ICDHAC(
"^DIC",80.6,80.6,"%",0)
^1.005^^0
"^DIC",80.6,80.6,"%D",0)
^^2^2^3120529^
"^DIC",80.6,80.6,"%D",1,0)
This file is used to check if a Diagnosis Code is a Hospital Acquired 
"^DIC",80.6,80.6,"%D",2,0)
Condition (HAC)
"^DIC",80.6,"B","DRG HAC",80.6)

"^DIC",82.11,82.11,0)
DRG PROCEDURE CODE COMBINATIONS^82.11
"^DIC",82.11,82.11,0,"GL")
^ICDIDP(
"^DIC",82.11,82.11,"%",0)
^1.005^^0
"^DIC",82.11,82.11,"%D",0)
^^5^5^3120711^
"^DIC",82.11,82.11,"%D",1,0)
This file contains data which is used in DRG Grouper calculations. These 
"^DIC",82.11,82.11,"%D",2,0)
data specify combinations of procedure codes that, when found to occur 
"^DIC",82.11,82.11,"%D",3,0)
together in one patient case, will lead to a specific DRG code. The DRG 
"^DIC",82.11,82.11,"%D",4,0)
Grouper routines will check the contents of the "One Of" field and each 
"^DIC",82.11,82.11,"%D",5,0)
"With One Of" field to make this determination.
"^DIC",82.11,"B","DRG PROCEDURE CODE COMBINATIONS",82.11)

"^DIC",82.12,82.12,0)
DRG DIAGNOSIS CODE COMBINATIONS^82.12
"^DIC",82.12,82.12,0,"GL")
^ICDIDD(
"^DIC",82.12,82.12,"%",0)
^1.005^^0
"^DIC",82.12,82.12,"%D",0)
^^5^5^3120716^
"^DIC",82.12,82.12,"%D",1,0)
This file contains data which is used in DRG Grouper calculations. These 
"^DIC",82.12,82.12,"%D",2,0)
data specify combinations of diagnosis codes that, when found to occur
"^DIC",82.12,82.12,"%D",3,0)
together in one patient case, will lead to a specific DRG code. The DRG
"^DIC",82.12,82.12,"%D",4,0)
Grouper routines will check the contents of the "One Of" field and each
"^DIC",82.12,82.12,"%D",5,0)
"With One Of" field to make this determination.
"^DIC",82.12,"B","DRG DIAGNOSIS CODE COMBINATIONS",82.12)

"^DIC",82.13,82.13,0)
DRG CC EXCLUSIONS^82.13
"^DIC",82.13,82.13,0,"GL")
^ICDCCEX(
"^DIC",82.13,82.13,"%",0)
^1.005^^0
"^DIC",82.13,82.13,"%D",0)
^^4^4^3120628^
"^DIC",82.13,82.13,"%D",1,0)
This file contains data that was extracted from Appendix C of the 
"^DIC",82.13,82.13,"%D",2,0)
Medicare/Medicaid web site www.cms.gov. The data consists of lists of 
"^DIC",82.13,82.13,"%D",3,0)
Diagnosis Codes. Each list is stored within an Exclusion Code that 
"^DIC",82.13,82.13,"%D",4,0)
provides access to the list from File #80, field 1.11.
"^DIC",82.13,"B","DRG CC EXCLUSIONS",82.13)

"BLD",8969,6)
^68
**END**
**END**

