Released GMRY*4*9 SEQ #8
Extracted from mail message
**KIDS**:GMRY*4.0*9^

**INSTALL NAME**
GMRY*4.0*9
"BLD",10667,0)
GMRY*4.0*9^GEN. MED. REC. - I/O^0^3170724^y
"BLD",10667,1,0)
^^8^8^3170724^
"BLD",10667,1,1,0)
This patch corrects the following issue:
"BLD",10667,1,2,0)
 
"BLD",10667,1,3,0)
If a nurse has changed service positions (for example: from Licensed 
"BLD",10667,1,4,0)
Practical Nurse (LPN) to Registered Nurse (RN), the former service 
"BLD",10667,1,5,0)
position might be listed on the Intake/Output 24 Hours Itemized 
"BLD",10667,1,6,0)
Shift Report.  This issue will occur when the previous service position 
"BLD",10667,1,7,0)
for a nurse is filed at a lower internal entry number (IEN) than the 
"BLD",10667,1,8,0)
current service position's IEN in the Nurs Position Control (#211.8) file.
"BLD",10667,4,0)
^9.64PA^^
"BLD",10667,6.3)
6
"BLD",10667,"KRN",0)
^9.67PA^779.2^20
"BLD",10667,"KRN",.4,0)
.4
"BLD",10667,"KRN",.401,0)
.401
"BLD",10667,"KRN",.402,0)
.402
"BLD",10667,"KRN",.403,0)
.403
"BLD",10667,"KRN",.5,0)
.5
"BLD",10667,"KRN",.84,0)
.84
"BLD",10667,"KRN",3.6,0)
3.6
"BLD",10667,"KRN",3.8,0)
3.8
"BLD",10667,"KRN",9.2,0)
9.2
"BLD",10667,"KRN",9.8,0)
9.8
"BLD",10667,"KRN",9.8,"NM",0)
^9.68A^75^2
"BLD",10667,"KRN",9.8,"NM",73,0)
GMRYSE1^^0^B15440992
"BLD",10667,"KRN",9.8,"NM",75,0)
GMRYSE3^^0^B24860032
"BLD",10667,"KRN",9.8,"NM","B","GMRYSE1",73)

"BLD",10667,"KRN",9.8,"NM","B","GMRYSE3",75)

"BLD",10667,"KRN",19,0)
19
"BLD",10667,"KRN",19,"NM",0)
^9.68A^^0
"BLD",10667,"KRN",19.1,0)
19.1
"BLD",10667,"KRN",101,0)
101
"BLD",10667,"KRN",409.61,0)
409.61
"BLD",10667,"KRN",771,0)
771
"BLD",10667,"KRN",779.2,0)
779.2
"BLD",10667,"KRN",870,0)
870
"BLD",10667,"KRN",8989.51,0)
8989.51
"BLD",10667,"KRN",8989.52,0)
8989.52
"BLD",10667,"KRN",8994,0)
8994
"BLD",10667,"KRN","B",.4,.4)

"BLD",10667,"KRN","B",.401,.401)

"BLD",10667,"KRN","B",.402,.402)

"BLD",10667,"KRN","B",.403,.403)

"BLD",10667,"KRN","B",.5,.5)

"BLD",10667,"KRN","B",.84,.84)

"BLD",10667,"KRN","B",3.6,3.6)

"BLD",10667,"KRN","B",3.8,3.8)

"BLD",10667,"KRN","B",9.2,9.2)

"BLD",10667,"KRN","B",9.8,9.8)

"BLD",10667,"KRN","B",19,19)

"BLD",10667,"KRN","B",19.1,19.1)

"BLD",10667,"KRN","B",101,101)

"BLD",10667,"KRN","B",409.61,409.61)

"BLD",10667,"KRN","B",771,771)

"BLD",10667,"KRN","B",779.2,779.2)

"BLD",10667,"KRN","B",870,870)

"BLD",10667,"KRN","B",8989.51,8989.51)

"BLD",10667,"KRN","B",8989.52,8989.52)

"BLD",10667,"KRN","B",8994,8994)

"BLD",10667,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",10667,"QUES",0)
^9.62^^
"BLD",10667,"REQB",0)
^9.611^^
"MBREQ")
0
"PKG",506,-1)
1^1
"PKG",506,0)
GEN. MED. REC. - I/O^GMRY^Intake/Output Module of General Medical Record.
"PKG",506,22,0)
^9.49I^1^1
"PKG",506,22,1,0)
4.0
"PKG",506,22,1,"PAH",1,0)
9^3170724
"PKG",506,22,1,"PAH",1,1,0)
^^8^8^3170724
"PKG",506,22,1,"PAH",1,1,1,0)
This patch corrects the following issue:
"PKG",506,22,1,"PAH",1,1,2,0)
 
"PKG",506,22,1,"PAH",1,1,3,0)
If a nurse has changed service positions (for example: from Licensed 
"PKG",506,22,1,"PAH",1,1,4,0)
Practical Nurse (LPN) to Registered Nurse (RN), the former service 
"PKG",506,22,1,"PAH",1,1,5,0)
position might be listed on the Intake/Output 24 Hours Itemized 
"PKG",506,22,1,"PAH",1,1,6,0)
Shift Report.  This issue will occur when the previous service position 
"PKG",506,22,1,"PAH",1,1,7,0)
for a nurse is filed at a lower internal entry number (IEN) than the 
"PKG",506,22,1,"PAH",1,1,8,0)
current service position's IEN in the Nurs Position Control (#211.8) file.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","GMRYSE1")
0^73^B15440992^B11629239
"RTN","GMRYSE1",1,0)
GMRYSE1 ;HIRMFO/YH-ITEMIZED PATIENT I/O REPORT BY SHIFT PART 2 ;3/11/97
"RTN","GMRYSE1",2,0)
 ;;4.0;Intake/Output;**9**;Apr 25, 1997;Build 6
"RTN","GMRYSE1",3,0)
BODY ;
"RTN","GMRYSE1",4,0)
 I '$D(^TMP($J)) W !!,?5,"NO DATA FOR THIS PERIOD",!! Q
"RTN","GMRYSE1",5,0)
 D INITOT^GMRYRP3,INISHFT^GMRYRP3,SHFTP,DAYP S (GRNDIP,GRNDOP)="" D SUM^GMRYSE2
"RTN","GMRYSE1",6,0)
 Q
"RTN","GMRYSE1",7,0)
FOOTER ;
"RTN","GMRYSE1",8,0)
 F X=1:1 W ! Q:IOSL<($Y+$S($E(IOST)="P":4,1:10))
"RTN","GMRYSE1",9,0)
 D FOOTER^GMRYRP3 Q
"RTN","GMRYSE1",10,0)
REPORT ;
"RTN","GMRYSE1",11,0)
 D TITLE^GMRYRP3
"RTN","GMRYSE1",12,0)
 S GMRDOT="",$P(GMRDOT,".",50)="",GMRX="",$P(GMRX,"-",$S(GRPT=2:53,GRPT=3:32,1:53))="" D HEADER2 S GQT=1 D BODY D:'GMROUT FOOTER I $E(IOST)'="P",'GMROUT W !,"Press return to continue " R X:DTIME I '$T!(X["^") S GMROUT=1
"RTN","GMRYSE1",13,0)
 K GCATH,GTOTAL,GLEFT,GREASON,GY Q
"RTN","GMRYSE1",14,0)
HEADER2 ;
"RTN","GMRYSE1",15,0)
 I GQT D FOOTER
"RTN","GMRYSE1",16,0)
 I GQT,'GQ,$E(IOST)'="P" W !,"Press return to continue or ""^"" to stop " R X:DTIME I '$T!(X="^") S GMROUT=1 Q
"RTN","GMRYSE1",17,0)
 W:'($E(IOST)'="C"&'GPC) @IOF
"RTN","GMRYSE1",18,0)
 S GQT=1,GPC=GPC+1,GCOL=$S(IOM>80:40,1:10) W !,?GCOL,"PATIENT INTAKE/OUTPUT REPORT BY SHIFT AND EVENT TYPE" S GCOL=$S(IOM>80:120,1:70) W ?GCOL,"PAGE: ",GPC
"RTN","GMRYSE1",19,0)
 S GCOL=$S(IOM>80:40,1:10) W !,?GCOL,$S(GRPT=9:$E(GMRX,1,46),1:GMRX),! S GCOL=GCOL+8 W ?GCOL,GMRDT1," - ",GMRDT2,!
"RTN","GMRYSE1",20,0)
 I $D(GY) W GY_"(continued)",!
"RTN","GMRYSE1",21,0)
 Q
"RTN","GMRYSE1",22,0)
NPOS ;OBTAIN NURSE POSITION
"RTN","GMRYSE1",23,0)
 N GPOS
"RTN","GMRYSE1",24,0)
 S GNURSE=$P(GDATA,"^",3),GTEXT=$P(GDATA,"^",2) D WHR^GMRYSE3
"RTN","GMRYSE1",25,0)
 W ?14,$S(GIO="IN":$P($G(^GMRD(126.56,+GTYPE,0)),"^")_"       intake vol: ",GIO="OUT":$P($G(^GMRD(126.58,+GTYPE,0)),"^")_"      output vol: ",1:""),GAMOUNT_$S(GAMOUNT>0!(GAMOUNT="0"):" mls",1:"")
"RTN","GMRYSE1",26,0)
 I GIO="OUT",(GSUB>0&(GSUB<99)),$D(^GMRD(126.6,GSUB,0)) W "   "_$P(^GMRD(126.6,+GSUB,0),"^")
"RTN","GMRYSE1",27,0)
 I GIO="OUT",$P(GDATA,"^",2)'="" S GTXT(1)="- "_$P(GDATA,"^",2) D WLINE^GMRYSE3
"RTN","GMRYSE1",28,0)
 S GITEM=$P(GDATA,"^",4) I GITEM'="" S GTXT(1)="- "_GITEM D WLINE^GMRYSE3
"RTN","GMRYSE1",29,0)
 S GITEM="" G:GNURSE="" Q S GCOL=$S(IOM>80:120,1:70) W ?GCOL,$E($P($P(^VA(200,GNURSE,0),"^"),",",2)),$E($P(^(0),"^"))
"RTN","GMRYSE1",30,0)
 S GPOS=$$GPOS(GNURSE)
"RTN","GMRYSE1",31,0)
 W "/"_$S(GPOS="R":"RN",GPOS="L":"LPN",GPOS="N":"NA",GPOS="C":"CL",1:"OTH")
"RTN","GMRYSE1",32,0)
Q W ! Q
"RTN","GMRYSE1",33,0)
 ;
"RTN","GMRYSE1",34,0)
GPOS(GNURSE) ;
"RTN","GMRYSE1",35,0)
 N GDATE1,GLOC1,GSEQ,GSTR,GSTART,GEND
"RTN","GMRYSE1",36,0)
 S (GPOS,GLOC1,GSEQ,GSTR,GSTART,GEND)=""
"RTN","GMRYSE1",37,0)
 I GNURSE="" Q GPOS
"RTN","GMRYSE1",38,0)
 ;
"RTN","GMRYSE1",39,0)
 ;Retrieve previous start date to I/O date unless I/O date also a start date.
"RTN","GMRYSE1",40,0)
 ;
"RTN","GMRYSE1",41,0)
 S GDATE1=$S($D(^NURSF(211.8,"ASDT",GNURSE,GDATE)):GDATE,1:$O(^NURSF(211.8,"ASDT",GNURSE,GDATE),-1))
"RTN","GMRYSE1",42,0)
 I GDATE1="" Q GPOS
"RTN","GMRYSE1",43,0)
 F  S GLOC1=$O(^NURSF(211.8,"ASDT",GNURSE,GDATE1,GLOC1)) Q:GLOC1=""  D
"RTN","GMRYSE1",44,0)
 . F  S GSEQ=$O(^NURSF(211.8,"ASDT",GNURSE,GDATE1,GLOC1,GSEQ)) Q:GSEQ=""  D
"RTN","GMRYSE1",45,0)
 . . S GSTR=$G(^NURSF(211.8,GLOC1,1,GSEQ,0)) Q:GSTR=""
"RTN","GMRYSE1",46,0)
 . . S GSTART=$P(GSTR,"^"),GEND=$P(GSTR,"^",6)
"RTN","GMRYSE1",47,0)
 . . ;
"RTN","GMRYSE1",48,0)
 . . ;Checking to see if the date that I/O was recorded (GDATE)
"RTN","GMRYSE1",49,0)
 . . ;falls in timeframe when the service position was active.
"RTN","GMRYSE1",50,0)
 . . ;
"RTN","GMRYSE1",51,0)
 . . I $S(GEND="":1,GEND'<GDATE:1,1:0),$D(^NURSF(211.8,GLOC1,0)) D
"RTN","GMRYSE1",52,0)
 . . . S GPOS=$P(^NURSF(211.8,GLOC1,0),"^",2)
"RTN","GMRYSE1",53,0)
 Q GPOS
"RTN","GMRYSE1",54,0)
 ;
"RTN","GMRYSE1",55,0)
ILABEL ;
"RTN","GMRYSE1",56,0)
 I II>3 S GLAB=$P(^GMRD(126.56,$O(^GMRD(126.56,"C",II-3,0)),0),"^") Q
"RTN","GMRYSE1",57,0)
 S GLAB=$S(II=1:"IV FLUIDS",II=2:"BLOOD/PRODUCT",II=3:"PARENTERAL NUTR.",1:"") Q
"RTN","GMRYSE1",58,0)
OLABEL ;
"RTN","GMRYSE1",59,0)
 S GLAB=$P(^GMRD(126.58,II,0),"^") Q
"RTN","GMRYSE1",60,0)
CHKPR ;
"RTN","GMRYSE1",61,0)
 I ($Y+4)>IOSL D HEADER2 Q:GMROUT
"RTN","GMRYSE1",62,0)
 I GIO="IN",GPRT(1)=0 W ?2,"INTAKE:",! S GPRT(1)=1 Q
"RTN","GMRYSE1",63,0)
 I GIO="OUT",GPRT(2)=0 W ?2,"OUTPUT:",! S GPRT(2)=1 Q
"RTN","GMRYSE1",64,0)
 Q
"RTN","GMRYSE1",65,0)
CHKTYP ;
"RTN","GMRYSE1",66,0)
 I ($Y+4)>IOSL D HEADER2 Q:GMROUT
"RTN","GMRYSE1",67,0)
 I GIO="IN" W ?4,$S(GSUB=1:"PO",GSUB=2:"NASOGASTRIC",GSUB=3:"GASTROTOMY",GSUB=4:"PHARYNGOTOMY",1:"OTHER")
"RTN","GMRYSE1",68,0)
 I GIO="OUT" W ?4,$P(^GMRD(126.6,+GSUB,0),"^")
"RTN","GMRYSE1",69,0)
 Q
"RTN","GMRYSE1",70,0)
SHFTP ;FIELD TO SAVE '+' CODE FOR SHIFT TOTAL
"RTN","GMRYSE1",71,0)
 F II=1:1:GN(1) S GSIP(II)=""
"RTN","GMRYSE1",72,0)
 F II=1:1:GN(2) S GSOP(II)=""
"RTN","GMRYSE1",73,0)
 Q
"RTN","GMRYSE1",74,0)
DAYP ;FIELD TO SAVE '+' CODE FOR DAY TOTAL
"RTN","GMRYSE1",75,0)
 F II=1:1:GN(1) S GDIP(II)=""
"RTN","GMRYSE1",76,0)
 F II=1:1:GN(2) S GDOP(II)=""
"RTN","GMRYSE1",77,0)
 Q
"RTN","GMRYSE3")
0^75^B24860032^B25518795
"RTN","GMRYSE3",1,0)
GMRYSE3 ;HIRMFO/YH-ITEMIZED PATIENT I/O REPORT BY SHIFT PART 4 ; 9/20/13 2:21pm
"RTN","GMRYSE3",2,0)
 ;;4.0;Intake/Output;**9**;Apr 25, 1997;Build 6
"RTN","GMRYSE3",3,0)
WIVINF ;
"RTN","GMRYSE3",4,0)
 S GDA=0 F  S GDA=$O(^TMP($J,"GMRY",GDATE,GSFT,GIO,GHR,GIVDT,GIVTYP,GSUB,GDA)) Q:GDA'>0!GMROUT  S GDATA=$G(^TMP($J,"GMRY",GDATE,GSFT,GIO,GHR,GIVDT,GIVTYP,GSUB,GDA)),GAMT=+$P(GDATA,"^") D
"RTN","GMRYSE3",5,0)
 .I GIVTYP="Z" D WCARE Q
"RTN","GMRYSE3",6,0)
 .I GAMT>3000 D START Q
"RTN","GMRYSE3",7,0)
 .I GDA=2 S (GTYP,GIN)=$P(GDATA,"^",2),GIN=$S(GIN="B":2,GIN="A"!(GIN="P")!(GIN="L"):1,GIN="H"!(GIN="I"):3,1:0) Q:GIN=0  D ADD^GMRYSE2,WIV Q
"RTN","GMRYSE3",8,0)
 .I GDA=3 D
"RTN","GMRYSE3",9,0)
 ..S GPORT=$G(^GMR(126,DFN,"IV",GSUB,3))
"RTN","GMRYSE3",10,0)
 ..D:($Y+10)>IOSL HEADER2^GMRYSE1 Q:GMROUT  D WHR Q:GMROUT  W ?14
"RTN","GMRYSE3",11,0)
 ..S GTXT(1)=$P(GDATA,"^",5)_" "_$P(GDATA,"^",4)_$S(GPORT'="":" ("_GPORT_")",1:"")_"  infusion rate adjusted: "_$S(+$P(GDATA,"^")>0:$P(GDATA,"^"),1:"UNKNOWN")_" mls/hr"_$S($P(GDATA,"^",6)'="":" - "_$P(GDATA,"^",6),1:"")
"RTN","GMRYSE3",12,0)
 ..I $L(GTXT(1))>0 D WLINE
"RTN","GMRYSE3",13,0)
 ..S GNURSE=+$P(GDATA,"^",2) D WNURS
"RTN","GMRYSE3",14,0)
 Q
"RTN","GMRYSE3",15,0)
START ;
"RTN","GMRYSE3",16,0)
 D:($Y+10)>IOSL HEADER2^GMRYSE1 Q:GMROUT  S GCATH=$P(GDATA,"^",6),GTYP=$P(GDATA,"^",4),GSITE=$P(GDATA,"^",2),GSOL=$P(GDATA,"^",3),GVOL=$P(GDATA,"^",5),GNURSE=+$P(GDATA,"^",7) W "  " D WHR
"RTN","GMRYSE3",17,0)
 S GPORT=$P($G(^GMR(126,DFN,"IV",GSUB,3)),"^") D WTYPE
"RTN","GMRYSE3",18,0)
 S GTXT(1)=GTXT(1)_$S(GTYP'="L":"  "_GVOL_" mls ",1:"")_$S($P(GDATA,"^",11)["FLUSH":"flushed",GCATH'="":"started",1:"added")_"  Site: "_GSITE S:GCATH'="" GTXT(1)=GTXT(1)_"  IV cath: "_GCATH
"RTN","GMRYSE3",19,0)
 S GTXT(1)=GTXT(1)_$S(GPORT'="":" ("_GPORT_")",1:"")_$S(+$P(GDATA,"^",12)>0:" Rate: "_+$P(GDATA,"^",12)_" ml/hr",1:"")
"RTN","GMRYSE3",20,0)
 I $L(GTXT(1))>0 D WLINE
"RTN","GMRYSE3",21,0)
 D WNURS Q:$P(GDATA,"^",9)=""  S GSAVE=GHR,GHR=$P(GDATA,"^",9),GNURSE=+$P(GDATA,"^",10),GREASON=$S($P(GDATA,"^",11)'="":$P(GDATA,"^",11),1:"")
"RTN","GMRYSE3",22,0)
 I GTYP="L" S GREASON=$S($P(GDATA,"^",11)="INFUSED"!($P(GDATA,"^",11)="FLUSHED"):"",1:GREASON)
"RTN","GMRYSE3",23,0)
 I GSOL'="*" D
"RTN","GMRYSE3",24,0)
 . D:($Y+10)>IOSL HEADER2^GMRYSE1 W ?20,"Discontinued on "_$E(GHR,4,5)_"/"_$E(GHR,6,7)_"/"_$E(GHR,2,3)_" @ " D WDC W:GREASON'=""&(IOM'>80) !,?20,"Reason: "_GREASON W:GREASON'=""&(IOM>80) "   Reason: "_GREASON D WNURS S GHR=GSAVE K GSAVE
"RTN","GMRYSE3",25,0)
 Q
"RTN","GMRYSE3",26,0)
WIV ;PRINT IV INTAKE
"RTN","GMRYSE3",27,0)
 S GNURSE=+$P(GDATA,"^",4),GSITE=$P(GDATA,"^",3),GSOL=$P(GDATA,"^",5)
"RTN","GMRYSE3",28,0)
 I GTYP'="L" D
"RTN","GMRYSE3",29,0)
 .D:($Y+10)>IOSL HEADER2^GMRYSE1 Q:GMROUT  D WHR Q:GMROUT  D WTYPE S GTXT(1)=GTXT(1)_"      Intake Vol: "_$S($P(GDATA,"^",6)["*":"unknown",1:GAMT_" mls")_"   Remaining amount: "_$P(GDATA,"^",6)_" mls "
"RTN","GMRYSE3",30,0)
 .I $L(GTXT(1))>0 D WLINE
"RTN","GMRYSE3",31,0)
 .D WNURS
"RTN","GMRYSE3",32,0)
 Q
"RTN","GMRYSE3",33,0)
WTYPE ;PRINT IV TYPE
"RTN","GMRYSE3",34,0)
 S GTXT(1)=GSOL_" "_$S(GTYP="A":"admix",GTYP="B":"blood",GTYP="P":"piggy",GTYP="H":"hyper",GTYP="I":"intra",1:"")
"RTN","GMRYSE3",35,0)
 Q
"RTN","GMRYSE3",36,0)
WHR ;
"RTN","GMRYSE3",37,0)
 I GHOLD=$E(GHR,1,12) Q
"RTN","GMRYSE3",38,0)
 S GHR(1)=$E($P(GHR,".",2),1,4),GLEN=$L(GHR(1)),GTIME=$S(GLEN=1:GHR(1)_"000",GLEN=2:GHR(1)_"00",GLEN=3:GHR(1)_"0",1:GHR(1))
"RTN","GMRYSE3",39,0)
 W ?4,$E(GTIME,1,2),":",$E(GTIME,3,4)_"  "
"RTN","GMRYSE3",40,0)
 S GHOLD=$E(GHR,1,12) Q
"RTN","GMRYSE3",41,0)
WNURS G:$S(GNURSE=0:1,'$D(^VA(200,GNURSE,0)):1,$P(^VA(200,GNURSE,0),"^")="":1,1:0) Q S GCOL=$S(IOM>80:120,1:70) W ?GCOL,$E($P($P(^VA(200,GNURSE,0),"^"),",",2)),$E($P(^(0),"^"))
"RTN","GMRYSE3",42,0)
 N GPOS
"RTN","GMRYSE3",43,0)
 S GPOS=$$GPOS^GMRYSE1(GNURSE)
"RTN","GMRYSE3",44,0)
 W "/"_$S(GPOS="R":"RN",GPOS="L":"LPN",GPOS="N":"NA",GPOS="C":"CL",1:"OTH")
"RTN","GMRYSE3",45,0)
Q W ! Q
"RTN","GMRYSE3",46,0)
WCARE ;
"RTN","GMRYSE3",47,0)
 Q:$P(GDATA,"^",2)=""&($P(GDATA,"^",3)="")&($P(GDATA,"^",4)="")  D WHR S GTXT(1)=$P(GDATA,"^",8)_": " S GSAVE=$L(GTXT(1)),GMRY=$P(GDATA,"^",2),GTXT(1)=GTXT(1)_$S(GMRY'="":GMRY,1:"")
"RTN","GMRYSE3",48,0)
 S GMRY=$S($P(GDATA,"^",4)="Y":$P(GDATA,"^",4),1:""),GTXT(1)=GTXT(1)_$S(GMRY'=""&($L(GTXT(1))>GSAVE):", ",1:"")_$S(GMRY="Y":"dressing changed",1:"")
"RTN","GMRYSE3",49,0)
 S GMRY=$P(GDATA,"^",6),GTXT(1)=GTXT(1)_$S($L(GTXT(1))>GSAVE&(GMRY'=""):", ",1:"")_$S(GMRY="Y":"site discontinued",1:"")
"RTN","GMRYSE3",50,0)
 I $L(GTXT(1))>0 D WLINE
"RTN","GMRYSE3",51,0)
 I $P(GDATA,"^",3)["Y" D
"RTN","GMRYSE3",52,0)
 . S GSITE=$P(GDATA,"^",8),GIEN=+$P(GDATA,"^",7),GPORT=$S($D(^GMR(126,DFN,"IV",GIEN,3)):^(3),1:""),GSITE(GSITE)="" D FINDCA^GMRYCATH(.GSITE)
"RTN","GMRYSE3",53,0)
 . S GTXT(1)="  "_GSITE(GSITE)_$S(GPORT'="":" - "_GPORT,1:"")_" tubing changed" D WLINE
"RTN","GMRYSE3",54,0)
Q2 K GMR100,GMR101,GMR102,GTXT,GMRLEN
"RTN","GMRYSE3",55,0)
 S GNURSE=+$P(GDATA,"^",5) D WNURS
"RTN","GMRYSE3",56,0)
 Q
"RTN","GMRYSE3",57,0)
WDC ;
"RTN","GMRYSE3",58,0)
 S GHR(1)=$E($P(GHR,".",2),1,4),GLEN=$L(GHR(1)),GTIME=$S(GLEN=1:GHR(1)_"000",GLEN=2:GHR(1)_"00",GLEN=3:GHR(1)_"0",1:GHR(1)) W $E(GTIME,1,2)_":"_$E(GTIME,3,4) Q
"RTN","GMRYSE3",59,0)
WLINE ;PRINT DESCRIPTION
"RTN","GMRYSE3",60,0)
 N X S DIWR=$S(IOM>80:100,1:50),DIWF="",DIWL=0,X=GTXT(1) K ^UTILITY($J) D ^DIWP
"RTN","GMRYSE3",61,0)
 S GMRI=0 F  S GMRI=$O(^UTILITY($J,"W",0,GMRI)) Q:GMRI'>0   D:($Y+10)>IOSL HEADER2^GMRYSE1 Q:GMROUT  W !,?14,^UTILITY($J,"W",0,GMRI,0)
"RTN","GMRYSE3",62,0)
 K ^UTILITY($J),GMRI Q
"VER")
8.0^22.2
"BLD",10667,6)
^8
**END**
**END**

