EMERGENCY Released PRCA*4.5*327 SEQ #286
Extracted from mail message
**KIDS**:PRCA*4.5*327^

**INSTALL NAME**
PRCA*4.5*327
"BLD",10604,0)
PRCA*4.5*327^ACCOUNTS RECEIVABLE^0^3170809^y
"BLD",10604,1,0)
^^7^7^3170809^^^^
"BLD",10604,1,1,0)
This patch addresses the following two issues:
"BLD",10604,1,2,0)
 
"BLD",10604,1,3,0)
1) The weekly TCSP (Treasury Cross Service) batch run at site will error
"BLD",10604,1,4,0)
   when the debtor is not defined in the debtor file.
"BLD",10604,1,5,0)
 
"BLD",10604,1,6,0)
2) AR/RC Reconcile Roll-up emails have single mail address no longer
"BLD",10604,1,7,0)
   used.
"BLD",10604,4,0)
^9.64PA^^
"BLD",10604,6.3)
7
"BLD",10604,"ABPKG")
n
"BLD",10604,"KRN",0)
^9.67PA^779.2^20
"BLD",10604,"KRN",.4,0)
.4
"BLD",10604,"KRN",.401,0)
.401
"BLD",10604,"KRN",.402,0)
.402
"BLD",10604,"KRN",.403,0)
.403
"BLD",10604,"KRN",.5,0)
.5
"BLD",10604,"KRN",.84,0)
.84
"BLD",10604,"KRN",3.6,0)
3.6
"BLD",10604,"KRN",3.8,0)
3.8
"BLD",10604,"KRN",9.2,0)
9.2
"BLD",10604,"KRN",9.8,0)
9.8
"BLD",10604,"KRN",9.8,"NM",0)
^9.68A^5^5
"BLD",10604,"KRN",9.8,"NM",1,0)
RCTCSPD^^0^B153936257
"BLD",10604,"KRN",9.8,"NM",2,0)
RCRCUTL^^0^B28977482
"BLD",10604,"KRN",9.8,"NM",3,0)
RCRCXMS^^0^B63973009
"BLD",10604,"KRN",9.8,"NM",4,0)
RCTCSPD0^^0^B8111368
"BLD",10604,"KRN",9.8,"NM",5,0)
RCTCSP7^^0^B5112376
"BLD",10604,"KRN",9.8,"NM","B","RCRCUTL",2)

"BLD",10604,"KRN",9.8,"NM","B","RCRCXMS",3)

"BLD",10604,"KRN",9.8,"NM","B","RCTCSP7",5)

"BLD",10604,"KRN",9.8,"NM","B","RCTCSPD",1)

"BLD",10604,"KRN",9.8,"NM","B","RCTCSPD0",4)

"BLD",10604,"KRN",19,0)
19
"BLD",10604,"KRN",19.1,0)
19.1
"BLD",10604,"KRN",101,0)
101
"BLD",10604,"KRN",409.61,0)
409.61
"BLD",10604,"KRN",771,0)
771
"BLD",10604,"KRN",779.2,0)
779.2
"BLD",10604,"KRN",870,0)
870
"BLD",10604,"KRN",8989.51,0)
8989.51
"BLD",10604,"KRN",8989.52,0)
8989.52
"BLD",10604,"KRN",8994,0)
8994
"BLD",10604,"KRN","B",.4,.4)

"BLD",10604,"KRN","B",.401,.401)

"BLD",10604,"KRN","B",.402,.402)

"BLD",10604,"KRN","B",.403,.403)

"BLD",10604,"KRN","B",.5,.5)

"BLD",10604,"KRN","B",.84,.84)

"BLD",10604,"KRN","B",3.6,3.6)

"BLD",10604,"KRN","B",3.8,3.8)

"BLD",10604,"KRN","B",9.2,9.2)

"BLD",10604,"KRN","B",9.8,9.8)

"BLD",10604,"KRN","B",19,19)

"BLD",10604,"KRN","B",19.1,19.1)

"BLD",10604,"KRN","B",101,101)

"BLD",10604,"KRN","B",409.61,409.61)

"BLD",10604,"KRN","B",771,771)

"BLD",10604,"KRN","B",779.2,779.2)

"BLD",10604,"KRN","B",870,870)

"BLD",10604,"KRN","B",8989.51,8989.51)

"BLD",10604,"KRN","B",8989.52,8989.52)

"BLD",10604,"KRN","B",8994,8994)

"BLD",10604,"QUES",0)
^9.62^^
"BLD",10604,"REQB",0)
^9.611^2^2
"BLD",10604,"REQB",1,0)
PRCA*4.5*159^2
"BLD",10604,"REQB",2,0)
PRCA*4.5*301^2
"BLD",10604,"REQB","B","PRCA*4.5*159",1)

"BLD",10604,"REQB","B","PRCA*4.5*301",2)

"MBREQ")
0
"PKG",142,-1)
1^1
"PKG",142,0)
ACCOUNTS RECEIVABLE^PRCA^BILL COLLECTIONS
"PKG",142,20,0)
^9.402P^^0
"PKG",142,22,0)
^9.49I^1^1
"PKG",142,22,1,0)
4.5^^2950320
"PKG",142,22,1,"PAH",1,0)
327^3170809
"PKG",142,22,1,"PAH",1,1,0)
^^7^7^3170809
"PKG",142,22,1,"PAH",1,1,1,0)
This patch addresses the following two issues:
"PKG",142,22,1,"PAH",1,1,2,0)
 
"PKG",142,22,1,"PAH",1,1,3,0)
1) The weekly TCSP (Treasury Cross Service) batch run at site will error
"PKG",142,22,1,"PAH",1,1,4,0)
   when the debtor is not defined in the debtor file.
"PKG",142,22,1,"PAH",1,1,5,0)
 
"PKG",142,22,1,"PAH",1,1,6,0)
2) AR/RC Reconcile Roll-up emails have single mail address no longer
"PKG",142,22,1,"PAH",1,1,7,0)
   used.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
5
"RTN","RCRCUTL")
0^2^B28977482^B29191013
"RTN","RCRCUTL",1,0)
RCRCUTL ;ALB/CMS - RC REFERRAL UTILITY PROGRAM ; 16-JUN-00
"RTN","RCRCUTL",2,0)
V ;;4.5;Accounts Receivable;**63,159,327**;Mar 20, 1995;Build 7
"RTN","RCRCUTL",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCRCUTL",4,0)
 ;
"RTN","RCRCUTL",5,0)
 ;PRCA*4.5*327 Remove defunct mail address: OGCNASRI@MAIL.DOMAIN.EXT^OGCRegion8DeathNotification@mail.domain.ext
"RTN","RCRCUTL",6,0)
 ;
"RTN","RCRCUTL",7,0)
 Q
"RTN","RCRCUTL",8,0)
 ;
"RTN","RCRCUTL",9,0)
BN ;User Select an AR Bill No.
"RTN","RCRCUTL",10,0)
 ;Returns PRCABN if exists
"RTN","RCRCUTL",11,0)
 N DIC,DA,X,Y,%Y
"RTN","RCRCUTL",12,0)
BNA S DIC="^PRCA(430,",DIC(0)="AEQMZ"
"RTN","RCRCUTL",13,0)
 S DIC("S")="I $P(^(0),U,8)=16,$P($G(^PRCA(430.2,+$P(^(0),U,2),0)),U,6)=""T"""
"RTN","RCRCUTL",14,0)
 D ^DIC S PRCABN=+Y
"RTN","RCRCUTL",15,0)
 I $G(PRCABN)<0 K PRCABN
"RTN","RCRCUTL",16,0)
BNQ Q
"RTN","RCRCUTL",17,0)
 ;
"RTN","RCRCUTL",18,0)
BNVAR(PRCABN) ;Set PRCA( array with bill information
"RTN","RCRCUTL",19,0)
 ;Returns PRCA(
"RTN","RCRCUTL",20,0)
 N PRCABN0
"RTN","RCRCUTL",21,0)
 I '$G(PRCABN) G BNVARQ
"RTN","RCRCUTL",22,0)
 S PRCABN0=$G(^PRCA(430,PRCABN,0))
"RTN","RCRCUTL",23,0)
 S PRCA("BNAME")=$P(PRCABN0,U,1)
"RTN","RCRCUTL",24,0)
 S PRCA("CAT")=$P(PRCABN0,U,2)_"^"_$P($G(^PRCA(430.2,+$P(PRCABN0,U,2),0)),U,1,2)
"RTN","RCRCUTL",25,0)
 S PRCA("STATUS")=$P(PRCABN0,U,8)_"^"_$P($G(^PRCA(430.3,+$P(PRCABN0,U,8),0)),U,1,2)
"RTN","RCRCUTL",26,0)
BNVARQ Q
"RTN","RCRCUTL",27,0)
 ;
"RTN","RCRCUTL",28,0)
DEBT(PRCABN) ;Get Debtor Name and Address
"RTN","RCRCUTL",29,0)
 ;Send Bill Number
"RTN","RCRCUTL",30,0)
 ;Return PRCA( array nodes: DEBTNM, DEBTOR, DEBTCT, DEBTZIP, DEBTST,
"RTN","RCRCUTL",31,0)
 ;                          DEBTAD1, DEBTAD2, DEBTADD
"RTN","RCRCUTL",32,0)
 N PRCACT,PRCAKP,PRCAST,PRCAST1,PRCAST2,X,Y,%Y
"RTN","RCRCUTL",33,0)
 K PRCA("DEBTNM"),PRCA("DEBTOR"),PRCA("DEBTCT"),PRCA("DEBTZIP")
"RTN","RCRCUTL",34,0)
 K PRCA("DEBTST"),PRCA("DEBTAD1"),PRCA("DEBTAD2"),PRCA("DEBTADD")
"RTN","RCRCUTL",35,0)
 I '$G(PRCABN) G DEBTQ
"RTN","RCRCUTL",36,0)
 D DEBTOR^PRCAUTL
"RTN","RCRCUTL",37,0)
 I $G(PRCA("DEBTNM"))="" G DEBTQ
"RTN","RCRCUTL",38,0)
 S PRCA("DEBTCT")=$G(PRCACT,"UNK")
"RTN","RCRCUTL",39,0)
 S PRCA("DEBTZIP")=$G(PRCAKP,"UNK")
"RTN","RCRCUTL",40,0)
 S PRCA("DEBTST")=$G(PRCAST,"UNK")
"RTN","RCRCUTL",41,0)
 S PRCA("DEBTAD1")=$G(PRCAST1)
"RTN","RCRCUTL",42,0)
 S PRCA("DEBTAD2")=$G(PRCAST2)
"RTN","RCRCUTL",43,0)
 S PRCA("DEBTADD")=$G(X)
"RTN","RCRCUTL",44,0)
DEBTQ Q
"RTN","RCRCUTL",45,0)
 ;
"RTN","RCRCUTL",46,0)
PT(DFN) ;Get Patient information
"RTN","RCRCUTL",47,0)
 ;Return values in arrays: VA(, VADM(, VAPD(
"RTN","RCRCUTL",48,0)
 K VA,VADM,VAPD
"RTN","RCRCUTL",49,0)
 I '$D(^DPT(+$G(DFN),0)) G PTQ
"RTN","RCRCUTL",50,0)
 D DEM^VADPT,ADD^VADPT
"RTN","RCRCUTL",51,0)
PTQ Q
"RTN","RCRCUTL",52,0)
 ;
"RTN","RCRCUTL",53,0)
RCDOM() ;Get supporting RC Domain
"RTN","RCRCUTL",54,0)
 ;Returns Domain Name
"RTN","RCRCUTL",55,0)
 N X
"RTN","RCRCUTL",56,0)
 ;S X=$O(RCDIV(0))
"RTN","RCRCUTL",57,0)
 ;I +X S X=$P($G(RCDIV(+X)),U,6)
"RTN","RCRCUTL",58,0)
 ;I X]"" G RCDOMQ
"RTN","RCRCUTL",59,0)
 S X=$O(^RCT(349.1,"B","RC",0))
"RTN","RCRCUTL",60,0)
 S X=$P($G(^RCT(349.1,+X,3)),U,4)
"RTN","RCRCUTL",61,0)
RCDOMQ Q X
"RTN","RCRCUTL",62,0)
 ;
"RTN","RCRCUTL",63,0)
RCCAT(ARRAY) ;Get array of valid AR/RC Bill Categories
"RTN","RCRCUTL",64,0)
 ;Send back ARRAY(IEN)=x^AR Category Name
"RTN","RCRCUTL",65,0)
 ; x = 1 = Reconciliation, Referral and Follow-up
"RTN","RCRCUTL",66,0)
 ; x = 2 = Reconciliation Only
"RTN","RCRCUTL",67,0)
 S ARRAY(6)="2^"_$P(^PRCA(430.2,6,0),U,1)
"RTN","RCRCUTL",68,0)
 S ARRAY(7)="2^"_$P(^PRCA(430.2,7,0),U,1)
"RTN","RCRCUTL",69,0)
 S ARRAY(9)="1^"_$P(^PRCA(430.2,9,0),U,1)
"RTN","RCRCUTL",70,0)
 S ARRAY(10)="2^"_$P(^PRCA(430.2,10,0),U,1)
"RTN","RCRCUTL",71,0)
RCCATQ Q
"RTN","RCRCUTL",72,0)
 ;
"RTN","RCRCUTL",73,0)
REFST(PRCABN) ;Referral Status
"RTN","RCRCUTL",74,0)
 ;Return: If Referred date^code^amount
"RTN","RCRCUTL",75,0)
 ;        If not Referred 0
"RTN","RCRCUTL",76,0)
 N X S X=0
"RTN","RCRCUTL",77,0)
 I $P($G(^PRCA(430,PRCABN,0)),U,8)'=16 G REFSTQ
"RTN","RCRCUTL",78,0)
 S X=$P($G(^PRCA(430,PRCABN,6)),U,4,6)
"RTN","RCRCUTL",79,0)
 I 'X S X=0
"RTN","RCRCUTL",80,0)
REFSTQ Q X
"RTN","RCRCUTL",81,0)
 ;
"RTN","RCRCUTL",82,0)
RETN(PRCABN) ;Returned from RC/DOJ
"RTN","RCRCUTL",83,0)
 ;Return: If Return Date send Date
"RTN","RCRCUTL",84,0)
 ;        If not send 0
"RTN","RCRCUTL",85,0)
 N X S X=+$P($G(^PRCA(430,PRCABN,6)),U,11)
"RTN","RCRCUTL",86,0)
 Q X
"RTN","RCRCUTL",87,0)
 ;
"RTN","RCRCUTL",88,0)
ACTDT(PRCABN) ;Date account activated
"RTN","RCRCUTL",89,0)
 ;Return: Date account activated
"RTN","RCRCUTL",90,0)
 N X S X=0
"RTN","RCRCUTL",91,0)
 I '$G(PRCABN) G ACTDTQ
"RTN","RCRCUTL",92,0)
 S X=+$P($G(^PRCA(430,PRCABN,6)),"^",21) I X G ACTDTQ
"RTN","RCRCUTL",93,0)
 S X=+$P($G(^PRCA(430,PRCABN,9)),"^",3) I X G ACTDTQ
"RTN","RCRCUTL",94,0)
 S X=+$P($G(^PRCA(430,PRCABN,0)),"^",10)
"RTN","RCRCUTL",95,0)
ACTDTQ Q X
"RTN","RCRCUTL",96,0)
 ;
"RTN","RCRCUTL",97,0)
AEOB ;File 433 Cross-Ref on Transaction Type
"RTN","RCRCUTL",98,0)
 ;     -used to alert pending EOB processing when Payment in Part
"RTN","RCRCUTL",99,0)
 ;      transaction is created
"RTN","RCRCUTL",100,0)
 N PRCABN,RCAT
"RTN","RCRCUTL",101,0)
 I (X'=2)!(+$G(DA)<1) G AEOBQ
"RTN","RCRCUTL",102,0)
 S PRCABN=+$P($G(^PRCA(433,DA,0)),U,2) I 'PRCABN G AEOBQ
"RTN","RCRCUTL",103,0)
 I +$P($G(^PRCA(430,PRCABN,0)),U,2)'=9 G AEOBQ
"RTN","RCRCUTL",104,0)
 I $$REFST(PRCABN)=0 G AEOBQ
"RTN","RCRCUTL",105,0)
 S ^PRCA(433,"AEOB",PRCABN,DA)=""
"RTN","RCRCUTL",106,0)
AEOBQ Q
"RTN","RCRCUTL",107,0)
 ;
"RTN","RCRCUTL",108,0)
ECHK ;Check to see if pending EOB Code Processing exists
"RTN","RCRCUTL",109,0)
 I $O(^PRCA(433,"AEOB",0)) W !!,*7,"*** You have Referred TP Bills pending EOB Code processing ***"
"RTN","RCRCUTL",110,0)
ECHKQ Q
"RTN","RCRCUTL",111,0)
 ;
"RTN","RCRCUTL",112,0)
ADDR ;Regional Counsel Addresses and Death Notification addresses.
"RTN","RCRCUTL",113,0)
 ;;OGCBOSRI@MAIL.DOMAIN.EXT^OGCRegion1DeathNotification@mail.domain.ext
"RTN","RCRCUTL",114,0)
 ;;OGCNYNRI@MAIL.DOMAIN.EXT^OGCRegion2DeathNotification@mail.domain.ext
"RTN","RCRCUTL",115,0)
 ;;OGCBALRI@MAIL.DOMAIN.EXT^OGCRegion3DeathNotification@mail.domain.ext
"RTN","RCRCUTL",116,0)
 ;;OGCPHIRI@MAIL.DOMAIN.EXT^OGCRegion4DeathNotification@mail.domain.ext
"RTN","RCRCUTL",117,0)
 ;;OGCATLRI@MAIL.DOMAIN.EXT^OGCRegion5DeathNotification@mail.domain.ext
"RTN","RCRCUTL",118,0)
 ;;OGCBAYRI@MAIL.DOMAIN.EXT^OGCRegion6DeathNotification@mail.domain.ext
"RTN","RCRCUTL",119,0)
 ;;OGCCLERI@MAIL.DOMAIN.EXT^OGCRegion7DeathNotification@mail.domain.ext
"RTN","RCRCUTL",120,0)
 ;;OGCJACRI@MAIL.DOMAIN.EXT^OGCRegion9DeathNotification@mail.domain.ext
"RTN","RCRCUTL",121,0)
 ;;OGCCHIRI@MAIL.DOMAIN.EXT^OGCRegion10DeathNotification@mail.domain.ext
"RTN","RCRCUTL",122,0)
 ;;OGCDETRI@MAIL.DOMAIN.EXT^OGCRegion11DeathNotification@mail.domain.ext
"RTN","RCRCUTL",123,0)
 ;;OGCSTLRI@MAIL.DOMAIN.EXT^OGCRegion12DeathNotification@mail.domain.ext
"RTN","RCRCUTL",124,0)
 ;;OGCWACRI@MAIL.DOMAIN.EXT^OGCRegion13DeathNotification@mail.domain.ext
"RTN","RCRCUTL",125,0)
 ;;OGCHOURI@MAIL.DOMAIN.EXT^OGCRegion14DeathNotification@mail.domain.ext
"RTN","RCRCUTL",126,0)
 ;;OGCMINRI@MAIL.DOMAIN.EXT^OGCRegion15DeathNotification@mail.domain.ext
"RTN","RCRCUTL",127,0)
 ;;OGCDENRI@MAIL.DOMAIN.EXT^OGCRegion16DeathNotification@mail.domain.ext
"RTN","RCRCUTL",128,0)
 ;;OGCLOSRI@MAIL.DOMAIN.EXT^OGCRegion17DeathNotification@mail.domain.ext
"RTN","RCRCUTL",129,0)
 ;;OGCSFCRI@MAIL.DOMAIN.EXT^OGCRegion18DeathNotification@mail.domain.ext
"RTN","RCRCUTL",130,0)
 ;;OGCPHORI@MAIL.DOMAIN.EXT^OGCRegion19DeathNotification@mail.domain.ext
"RTN","RCRCUTL",131,0)
 ;;OGCPORRI@MAIL.DOMAIN.EXT^OGCRegion20DeathNotification@mail.domain.ext
"RTN","RCRCUTL",132,0)
 ;;OGCBUFRI@MAIL.DOMAIN.EXT^OGCRegion21DeathNotification@mail.domain.ext
"RTN","RCRCUTL",133,0)
 ;;OGCINDRI@MAIL.DOMAIN.EXT^OGCRegion22DeathNotification@mail.domain.ext
"RTN","RCRCUTL",134,0)
 ;;OGCWINRI@MAIL.DOMAIN.EXT^OGCRegion23DeathNotification@mail.domain.ext
"RTN","RCRCUTL",135,0)
 ;;END
"RTN","RCRCUTL",136,0)
 ;RCRCUTL
"RTN","RCRCXMS")
0^3^B63973009^B63503495
"RTN","RCRCXMS",1,0)
RCRCXMS ;ALB/CMS - RC TRANSMISSION MESSAGE HANDLER ; 16-JUN-00
"RTN","RCRCXMS",2,0)
V ;;4.5;Accounts Receivable;**63,159,327**;Mar 20, 1995;Build 7
"RTN","RCRCXMS",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCRCXMS",4,0)
 ;
"RTN","RCRCXMS",5,0)
 ;PRCA*4.5*327 Remove defunct mail address: OGCNASRI@MAIL.DOMAIN.EXT^OGCRegion8DeathNotification@mail.domain.ext
"RTN","RCRCXMS",6,0)
 ;
"RTN","RCRCXMS",7,0)
 Q
"RTN","RCRCXMS",8,0)
 ;
"RTN","RCRCXMS",9,0)
ENT(RCDA,RCSUB,RCWHO,RCCOM) ;RC Transmission information
"RTN","RCRCXMS",10,0)
 ;add RC TRANSMISSION TO FILE 349.3
"RTN","RCRCXMS",11,0)
 N DA,DIC,DIE,DLAYGO,DR,RCPDT,RCSND,X,Y
"RTN","RCRCXMS",12,0)
 K DD,DO
"RTN","RCRCXMS",13,0)
 I 'RCDA G ENTQ
"RTN","RCRCXMS",14,0)
 S RCD=$O(^RCT(349.3,"B",RCDA,0)) I RCD G ENTE
"RTN","RCRCXMS",15,0)
 S X=RCDA,DIC="^RCT(349.3,",DIC(0)="L",DLAYGO=349.3
"RTN","RCRCXMS",16,0)
 D FILE^DICN S RCD=+Y K DD,DO I RCD<1 G ENTQ
"RTN","RCRCXMS",17,0)
ENTE S DA=RCD S DIE="^RCT(349.3,"
"RTN","RCRCXMS",18,0)
 S RCSND=$E($P($G(^VA(200,+DUZ,0)),U,1),1,45)
"RTN","RCRCXMS",19,0)
 S RCSND=$S(RCSND]"":RCSND,1:"POSTMASTER")
"RTN","RCRCXMS",20,0)
 D PURG
"RTN","RCRCXMS",21,0)
 ;if entry is from RC via the RC Server
"RTN","RCRCXMS",22,0)
 I $G(RCSCE)="O" S RCSND=$G(XMFROM)
"RTN","RCRCXMS",23,0)
 S DR="1////"_$E(RCSUB,1,45)_";2////"_RCSND_";4////"_DT
"RTN","RCRCXMS",24,0)
 S DR=DR_";8////"_+$G(RCPDT)_";3////"_$E(RCWHO,1,45)_";7///"_$G(RCCOM)
"RTN","RCRCXMS",25,0)
 D ^DIE
"RTN","RCRCXMS",26,0)
 S RCCOM="Transmitted to RC in MM #["_RCDA_"] containing "_+$G(RCCNT)_" bill(s)."
"RTN","RCRCXMS",27,0)
ENTQ Q
"RTN","RCRCXMS",28,0)
 ;
"RTN","RCRCXMS",29,0)
PURG ;Get Purge Date
"RTN","RCRCXMS",30,0)
 N X1
"RTN","RCRCXMS",31,0)
 S X1=$O(^RCT(349.1,"B","RC",0))
"RTN","RCRCXMS",32,0)
 I 'X1 G PURGQ
"RTN","RCRCXMS",33,0)
 S X1=+$P(^RCT(349.1,X1,0),U,4)
"RTN","RCRCXMS",34,0)
 S RCPDT=$$FMADD^XLFDT(DT,$S($G(X1):X1,1:30))
"RTN","RCRCXMS",35,0)
PURGQ Q
"RTN","RCRCXMS",36,0)
 ;
"RTN","RCRCXMS",37,0)
SITE ;RC Site Parameter Edit
"RTN","RCRCXMS",38,0)
 N D1,DA,DIC,DIE,DIK,DTOUT,DR,RCDA,RCSITE,X,Y
"RTN","RCRCXMS",39,0)
 S (RCDA,DA)=$O(^RCT(349.1,"B","RC",0)),DIE="^RCT(349.1,"
"RTN","RCRCXMS",40,0)
 S RCSITE=$P($$SITE^RCMSITE,U,2)
"RTN","RCRCXMS",41,0)
 I 'DA G SITEQ
"RTN","RCRCXMS",42,0)
 ;S DR=".04;W !!,""Primary Division: "",$P($G(^DIC(4,$$SITE^RCMSITE,0)),U,1);32R~PRIMARY RC REMOTE DOMAIN"_";I $E($G(^DIC(4.2,X,0)),1,3)'=""RC-"" W !,""   <<RC DOMAIN MUST START WITH 'RC-'>>"" S Y=32" D ^DIE
"RTN","RCRCXMS",43,0)
 S DR=".04;W !!,""Primary Division: "",$P($G(^DIC(4,$$SITE^RCMSITE,0)),U,1);34R~RC MAIL ADDRESS"_";I $E($G(X),1,3)'=""OGC""!($E($G(X),7,20)'=""RI@MAIL.DOMAIN.EXT"") D MAILADD^RCRCXMS S Y=34"
"RTN","RCRCXMS",44,0)
 S DR=DR_";35R~RC DEATH NOTIFICATION ADDRESS"_";I $E($G(X),1,9)'=""OGCRegion"" D DEATHADD^RCRCXMS S Y=35" D ^DIE
"RTN","RCRCXMS",45,0)
 I ($D(DTOUT))!($D(Y)) G SITEQ
"RTN","RCRCXMS",46,0)
 ;
"RTN","RCRCXMS",47,0)
DR61 W !!,"Enter Division(s) of care if domain is different then primary RC Mail Address.",!
"RTN","RCRCXMS",48,0)
 S DR=61
"RTN","RCRCXMS",49,0)
 ;S DR(2,349.161)=".01;.02R~RC MAIL ADDRESS"_";I $E($G(^DIC(4.2,X,0)),1,3)'=""RC-"" W !,"" <<RC DOMAIN MUST START WITH 'RC-'>>"" S Y=.02" D ^DIE
"RTN","RCRCXMS",50,0)
 S DR(2,349.161)=".01;.03R~RC MAIL ADDRESS"_";I $E($G(X),1,3)'=""OGC""!($E($G(X),7,20)'=""RI@MAIL.DOMAIN.EXT"") D MAILADD^RCRCXMS S Y=.03"_";N RCFLAG D DIK^RCRCXMS I $G(RCFLAG) S Y=.01"
"RTN","RCRCXMS",51,0)
 S DR(2,349.161)=DR(2,349.161)_";.04R~RC DEATH NOTIFICATION ADDRESS"_";I $E($G(X),1,9)'=""OGCRegion"" D DEATHADD^RCRCXMS S Y=.04" D ^DIE
"RTN","RCRCXMS",52,0)
 ;S DR(2,349.161)=".04R~RC DEATH NOTIFICATION ADDRESS"_";I $E($G(X),1,3)'=""OGC""!($E($G(X),7,20)'=""RI@MAIL.DOMAIN.EXT"") D DEATHADD^RCRCXMS S Y=.04" D ^DIE
"RTN","RCRCXMS",53,0)
 ;
"RTN","RCRCXMS",54,0)
SITEQ Q
"RTN","RCRCXMS",55,0)
 ;
"RTN","RCRCXMS",56,0)
DIK ;If the RC address is the same as the primary,the entry will be deleted.
"RTN","RCRCXMS",57,0)
 I X=$P($G(^RCT(349.1,RCDA,3)),U,4) W !!,"<< DELETING ENTRY.  Domain same as Primary RC Remote Domain.>>",!! D
"RTN","RCRCXMS",58,0)
 .S DA(1)=RCDA,DIK="^RCT(349.1,"_RCDA_",6,",DA=D1 D ^DIK
"RTN","RCRCXMS",59,0)
 .S RCFLAG=1
"RTN","RCRCXMS",60,0)
 .Q
"RTN","RCRCXMS",61,0)
 Q
"RTN","RCRCXMS",62,0)
MAILADD ;MAIL ADDRESS FOR REGIONAL COUNSEL
"RTN","RCRCXMS",63,0)
 W !!,"Please enter an Regional Counsel mail address that adheres to the"
"RTN","RCRCXMS",64,0)
 W !,"following format:"
"RTN","RCRCXMS",65,0)
 W !!," The first three characters must be 'OGC'"
"RTN","RCRCXMS",66,0)
 W !," Characters 7 through 20 should be 'RI@MAIL.DOMAIN.EXT'"
"RTN","RCRCXMS",67,0)
 W !!,"Choose one of the following RC addresses:",!
"RTN","RCRCXMS",68,0)
 N RCCT,RCMAIL,RCUP
"RTN","RCRCXMS",69,0)
 F RCCT=1:1 S RCMAIL=$P($T(ADDR+RCCT),";;",2) Q:RCMAIL="END"!(+$G(RCUP))  D
"RTN","RCRCXMS",70,0)
 .I RCCT=15 R !,"""^"" TO QUIT: ",X:DTIME S:X="^" RCUP=1 Q:X="^"  W $C(13),$J("",15),$C(13)
"RTN","RCRCXMS",71,0)
 .W !,$P(RCMAIL,"^",1)
"RTN","RCRCXMS",72,0)
 .Q
"RTN","RCRCXMS",73,0)
 Q
"RTN","RCRCXMS",74,0)
DEATHADD ;DEATH ADDRESSES FOR REGIONAL COUNSEL
"RTN","RCRCXMS",75,0)
 W !!,"Please enter the Death Notification mail address adhering to"
"RTN","RCRCXMS",76,0)
 W !,"the following format:"
"RTN","RCRCXMS",77,0)
 W !!," The first nine characters must be 'OGCRegion'"
"RTN","RCRCXMS",78,0)
 W !," followed by a number from 1-23"
"RTN","RCRCXMS",79,0)
 W !," followed by 'DeathNotification@mail.domain.ext'"
"RTN","RCRCXMS",80,0)
 W !!," Choose from one of the following:",!
"RTN","RCRCXMS",81,0)
 N RCCT,RCMAIL,RCUP
"RTN","RCRCXMS",82,0)
 F RCCT=1:1 S RCMAIL=$P($T(ADDR+RCCT),";;",2) Q:RCMAIL="END"!(+$G(RCUP))  D
"RTN","RCRCXMS",83,0)
 .I RCCT=15 R !,"""^"" TO QUIT: ",X:DTIME S:X="^" RCUP=1 Q:X="^"  W $C(13),$J("",15),$C(13)
"RTN","RCRCXMS",84,0)
 .W !,$P(RCMAIL,"^",2)
"RTN","RCRCXMS",85,0)
 .Q
"RTN","RCRCXMS",86,0)
 Q
"RTN","RCRCXMS",87,0)
ADDR ;
"RTN","RCRCXMS",88,0)
 ;;OGCBOSRI@MAIL.DOMAIN.EXT^OGCRegion1DeathNotification@mail.domain.ext
"RTN","RCRCXMS",89,0)
 ;;OGCNYNRI@MAIL.DOMAIN.EXT^OGCRegion2DeathNotification@mail.domain.ext
"RTN","RCRCXMS",90,0)
 ;;OGCBALRI@MAIL.DOMAIN.EXT^OGCRegion3DeathNotification@mail.domain.ext
"RTN","RCRCXMS",91,0)
 ;;OGCPHIRI@MAIL.DOMAIN.EXT^OGCRegion4DeathNotification@mail.domain.ext
"RTN","RCRCXMS",92,0)
 ;;OGCATLRI@MAIL.DOMAIN.EXT^OGCRegion5DeathNotification@mail.domain.ext
"RTN","RCRCXMS",93,0)
 ;;OGCBAYRI@MAIL.DOMAIN.EXT^OGCRegion6DeathNotification@mail.domain.ext
"RTN","RCRCXMS",94,0)
 ;;OGCCLERI@MAIL.DOMAIN.EXT^OGCRegion7DeathNotification@mail.domain.ext
"RTN","RCRCXMS",95,0)
 ;;OGCJACRI@MAIL.DOMAIN.EXT^OGCRegion9DeathNotification@mail.domain.ext
"RTN","RCRCXMS",96,0)
 ;;OGCCHIRI@MAIL.DOMAIN.EXT^OGCRegion10DeathNotification@mail.domain.ext
"RTN","RCRCXMS",97,0)
 ;;OGCDETRI@MAIL.DOMAIN.EXT^OGCRegion11DeathNotification@mail.domain.ext
"RTN","RCRCXMS",98,0)
 ;;OGCSTLRI@MAIL.DOMAIN.EXT^OGCRegion12DeathNotification@mail.domain.ext
"RTN","RCRCXMS",99,0)
 ;;OGCWACRI@MAIL.DOMAIN.EXT^OGCRegion13DeathNotification@mail.domain.ext
"RTN","RCRCXMS",100,0)
 ;;OGCHOURI@MAIL.DOMAIN.EXT^OGCRegion14DeathNotification@mail.domain.ext
"RTN","RCRCXMS",101,0)
 ;;OGCMINRI@MAIL.DOMAIN.EXT^OGCRegion15DeathNotification@mail.domain.ext
"RTN","RCRCXMS",102,0)
 ;;OGCDENRI@MAIL.DOMAIN.EXT^OGCRegion16DeathNotification@mail.domain.ext
"RTN","RCRCXMS",103,0)
 ;;OGCLOSRI@MAIL.DOMAIN.EXT^OGCRegion17DeathNotification@mail.domain.ext
"RTN","RCRCXMS",104,0)
 ;;OGCSFCRI@MAIL.DOMAIN.EXT^OGCRegion18DeathNotification@mail.domain.ext
"RTN","RCRCXMS",105,0)
 ;;OGCPHORI@MAIL.DOMAIN.EXT^OGCRegion19DeathNotification@mail.domain.ext
"RTN","RCRCXMS",106,0)
 ;;OGCPORRI@MAIL.DOMAIN.EXT^OGCRegion20DeathNotification@mail.domain.ext
"RTN","RCRCXMS",107,0)
 ;;OGCBUFRI@MAIL.DOMAIN.EXT^OGCRegion21DeathNotification@mail.domain.ext
"RTN","RCRCXMS",108,0)
 ;;OGCINDRI@MAIL.DOMAIN.EXT^OGCRegion22DeathNotification@mail.domain.ext
"RTN","RCRCXMS",109,0)
 ;;OGCWINRI@MAIL.DOMAIN.EXT^OGCRegion23DeathNotification@mail.domain.ext
"RTN","RCRCXMS",110,0)
 ;;END
"RTN","RCRCXMS",111,0)
EN(RCTAG) ;
"RTN","RCRCXMS",112,0)
 ;ENTRY POINT FROM RC TRANSMISSIONS LIST TEMPLATE
"RTN","RCRCXMS",113,0)
 N DA,DIC,DIQ,DIR,DR,RC,RCCNT,RCY,RCDA,RCOUT,RCT,RCTE,X,Y
"RTN","RCRCXMS",114,0)
 D FULL^VALM1
"RTN","RCRCXMS",115,0)
 I '$O(^RCT(349.3,0)) W !!,"  **  TRANSMISSION LOG EMPTY  **" G ENQ
"RTN","RCRCXMS",116,0)
 I '$O(^TMP("RCRCE",$J,"SEL",0)) W !!,"  **  NO ITEMS SELECTED FROM LIST  **" G ENQ
"RTN","RCRCXMS",117,0)
 D @$S(RCTAG="COM":"COM",RCTAG="DEL":"DEL",RCTAG="VEW":"VEW",RCTAG="FRW":"VEW",1:"ENQ")
"RTN","RCRCXMS",118,0)
ENQ K DIR D:$G(RCOUT)'["^" PAUSE^VALM1 Q
"RTN","RCRCXMS",119,0)
 ;
"RTN","RCRCXMS",120,0)
COM ;Append Comments to File 349.3
"RTN","RCRCXMS",121,0)
 N DA,DR,DIC,DIE,DIR,DIROUT,DUOUT,RCX,RCY,X,Y S RCOUT=""
"RTN","RCRCXMS",122,0)
 ;S DIC="^RCT(349.3,",DWLW=75,DIWEPSE="" D EN^DIWE
"RTN","RCRCXMS",123,0)
 ;Enter Comments for each or all?
"RTN","RCRCXMS",124,0)
 S RCX=0 F  S RCX=$O(^TMP("RCRCE",$J,"SEL",RCX)) Q:('RCX)!(RCOUT["^")  D
"RTN","RCRCXMS",125,0)
 .S DA=$G(^TMP("RCRCEX",$J,RCX)),RCLN=+DA,DA=$P(DA,U,2)
"RTN","RCRCXMS",126,0)
 .I '$D(^RCT(349.3,DA,0)) W !,"Item ",RCX,". Transmission Entry no longer exists.",!!
"RTN","RCRCXMS",127,0)
 .I $D(^RCT(349.3,DA,0)) D
"RTN","RCRCXMS",128,0)
 ..W @IOF,!!,"Item ",RCX,"." S (DIC,DIE)="^RCT(349.3," D EN^DIQ W ! S DR="7" D ^DIE K DR
"RTN","RCRCXMS",129,0)
 .W ! S DIR(0)="E" D ^DIR K DIR I $D(DIROUT)!$D(DUOUT) S RCOUT="^" Q
"RTN","RCRCXMS",130,0)
 .W @IOF
"RTN","RCRCXMS",131,0)
 S RCOUT="" W !!,"REMEMBER: Resequence List to see Appended Comments.",!
"RTN","RCRCXMS",132,0)
COMQ Q
"RTN","RCRCXMS",133,0)
 ;
"RTN","RCRCXMS",134,0)
DEL ;Delete entries in File 349.3
"RTN","RCRCXMS",135,0)
 N DA,DIK,DIR,RCLN,RCX,RCY,X,Y
"RTN","RCRCXMS",136,0)
 S RCY="...deleted...       "
"RTN","RCRCXMS",137,0)
 W @IOF W !,"Selected Items ..."
"RTN","RCRCXMS",138,0)
 S RCX=0 F  S RCX=$O(^TMP("RCRCE",$J,"SEL",RCX)) Q:'RCX  D
"RTN","RCRCXMS",139,0)
 .S RCLN=+$G(^TMP("RCRCEX",$J,RCX))
"RTN","RCRCXMS",140,0)
 .W !,$G(^TMP("RCRCE",$J,RCLN,0))
"RTN","RCRCXMS",141,0)
 W !!!,?8,"ALL ITEMS SELECTED WILL BE DELETED FROM"
"RTN","RCRCXMS",142,0)
 W !,?5,"TRANSMISSION LOG FILE WITHOUT FURTHER WARNING!",!!
"RTN","RCRCXMS",143,0)
 S DIR("A")="Okay to Continue Deletion(s) ",DIR("?")="Enter Yes to Continue with deletions"
"RTN","RCRCXMS",144,0)
 D ASK^RCRCACP K DIR I $G(Y)'=1 W !,"Okay nothing deleted." G DELQ
"RTN","RCRCXMS",145,0)
 W !!,"Deleting ..."
"RTN","RCRCXMS",146,0)
 S RCX=0 F  S RCX=$O(^TMP("RCRCE",$J,"SEL",RCX)) Q:'RCX  D
"RTN","RCRCXMS",147,0)
 .S DA=$G(^TMP("RCRCEX",$J,RCX)),RCLN=+DA,DA=$P(DA,U,2)
"RTN","RCRCXMS",148,0)
 .I $D(^RCT(349.3,DA,0)) D
"RTN","RCRCXMS",149,0)
 ..S DIK="^RCT(349.3," D ^DIK
"RTN","RCRCXMS",150,0)
 ..W !,$G(^TMP("RCRCE",$J,RCLN,0))
"RTN","RCRCXMS",151,0)
 ..D FLDTEXT^VALM10(RCLN,"SUBJECT",RCY)
"RTN","RCRCXMS",152,0)
 S RCOUT="" W !!,"REMEMBER: Resequence List to remove Deleted Items from list.",!
"RTN","RCRCXMS",153,0)
DELQ Q
"RTN","RCRCXMS",154,0)
 ;
"RTN","RCRCXMS",155,0)
VEW ;View/Forward  XM Message
"RTN","RCRCXMS",156,0)
 N DA,DIR,DIROUT,DUOUT,RCLN,RCX,X,Y
"RTN","RCRCXMS",157,0)
 S RCOUT="",RCX=0 F  S RCX=$O(^TMP("RCRCE",$J,"SEL",RCX)) Q:('RCX)!(RCOUT["^")  D
"RTN","RCRCXMS",158,0)
 .S DA=$G(^TMP("RCRCEX",$J,RCX)),RCLN=+DA,DA=$P(DA,U,2)
"RTN","RCRCXMS",159,0)
 .I '$D(^RCT(349.3,+DA,0)) W !!,"Item ",RCX,".",?5," Transmission Entry no longer exists.",!!
"RTN","RCRCXMS",160,0)
 .I $D(^RCT(349.3,+DA,0)) D VEWD I RCOUT="^" Q
"RTN","RCRCXMS",161,0)
 .W ! S DIR(0)="E" D ^DIR I $D(DIROUT)!$D(DUOUT) S RCOUT="^" Q
"RTN","RCRCXMS",162,0)
 .W @IOF
"RTN","RCRCXMS",163,0)
VEWQ Q
"RTN","RCRCXMS",164,0)
VEWD ;Display message
"RTN","RCRCXMS",165,0)
 N DIR,DIROUT,DUOUT,RCI,RCY,X,XMER,XMPOS,XMRG,XMZ,X,Y W @IOF
"RTN","RCRCXMS",166,0)
 S RCI=$G(^RCT(349.3,+DA,0)),XMZ=+RCI
"RTN","RCRCXMS",167,0)
 S RCY=$$NET^XMRENT(XMZ)
"RTN","RCRCXMS",168,0)
 I RCY="" W !!,RCX,".",?5," Mail Message #["_XMZ_"] no longer exists on this system.",! S XMZ=0 G VEWDQ
"RTN","RCRCXMS",169,0)
 W !,RCX,"."
"RTN","RCRCXMS",170,0)
 W !,"Subj: "_$P(RCY,U,6)_"  [#"_XMZ_"]  "_$P(RCY,U,1)
"RTN","RCRCXMS",171,0)
 W !,"From: "_$P(RCY,U,3)
"RTN","RCRCXMS",172,0)
 W !,"Message ID: "_$P(RCY,U,4)
"RTN","RCRCXMS",173,0)
 W !,"Recipient: "_$P(RCI,U,4)
"RTN","RCRCXMS",174,0)
 W !! F X=1:1:(IOM-1) W "="
"RTN","RCRCXMS",175,0)
 W !
"RTN","RCRCXMS",176,0)
 F  W !,$$READ^XMGAPI1() Q:(XMER=-1)!(RCOUT="^")  I ($Y+3)>IOSL D
"RTN","RCRCXMS",177,0)
 .W ! S DIR(0)="E" D ^DIR I $D(DIROUT)!$D(DUOUT) S RCOUT="^" Q
"RTN","RCRCXMS",178,0)
 .W @IOF
"RTN","RCRCXMS",179,0)
 I RCTAG="FRW" W !! I XMZ D ENT2^XMD
"RTN","RCRCXMS",180,0)
VEWDQ Q
"RTN","RCRCXMS",181,0)
 ;
"RTN","RCRCXMS",182,0)
 ;RCRCXMS
"RTN","RCTCSP7")
0^5^B5112376^n/a
"RTN","RCTCSP7",1,0)
RCTCSP7 ;ALBANY/RGB-CROSS-SERVICING TRANSMISSION CONT'D ;08/03/17 3:34 PM
"RTN","RCTCSP7",2,0)
 ;;4.5;Accounts Receivable;**327**;Mar 20, 1995;Build 7
"RTN","RCTCSP7",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSP7",4,0)
 ;
"RTN","RCTCSP7",5,0)
 ;PRCA*4.5*327 Moved rec code from RCTCSPD to create room
"RTN","RCTCSP7",6,0)
 ;             for batch mods.
"RTN","RCTCSP7",7,0)
 ;
"RTN","RCTCSP7",8,0)
REC2C ;
"RTN","RCTCSP7",9,0)
 N REC,KNUM,DEBTNR,DEBTORNB,TAXID,RCDFN,PHONE,ADDRCS
"RTN","RCTCSP7",10,0)
 S REC="C2C"_ACTION_"3636001200"_"DM1D "
"RTN","RCTCSP7",11,0)
 S KNUM=$P($P(B0,U,1),"-",2)
"RTN","RCTCSP7",12,0)
 S DEBTNR=$E(SITE,1,3)_$$LJZF(KNUM,7)_$TR($J(BILL,20)," ",0),REC=REC_DEBTNR
"RTN","RCTCSP7",13,0)
 S DEBTORNB=$E(SITE,1,3)_$TR($J(DEBTOR,12)," ",0)
"RTN","RCTCSP7",14,0)
 S REC=REC_DEBTORNB
"RTN","RCTCSP7",15,0)
 S TAXID=$$TAXID(DEBTOR)
"RTN","RCTCSP7",16,0)
 S REC=REC_TAXID
"RTN","RCTCSP7",17,0)
 S REC=REC_"SLFIND"
"RTN","RCTCSP7",18,0)
 S REC=REC_$$BLANK(20)
"RTN","RCTCSP7",19,0)
 S RCDFN=+DEBTOR0
"RTN","RCTCSP7",20,0)
 S REC=REC_$$LJSF($$NAMEFF(RCDFN),60)_"Y"
"RTN","RCTCSP7",21,0)
 S ADDRCS=$$ADDR^RCTCSP1(RCDFN),PHONE=$P(ADDRCS,U,6)
"RTN","RCTCSP7",22,0)
 S REC=REC_$$LJSF($P(ADDRCS,U,1),35)_$$LJSF($P(ADDRCS,U,2),35)_$$LJSF($P(ADDRCS,U,3),15)_$$LJSF($P(ADDRCS,U,4),2)_$$LJSF($P(ADDRCS,U,5),9)
"RTN","RCTCSP7",23,0)
 S REC=REC_$$COUNTRY^RCTCSP1($P(ADDRCS,U,7))
"RTN","RCTCSP7",24,0)
 S REC=REC_"Y"
"RTN","RCTCSP7",25,0)
 S REC=REC_$S(PHONE]"":"P",1:" ")
"RTN","RCTCSP7",26,0)
 S REC=REC_$$LJSF($TR(PHONE,"() -"),10)_$$BLANK(4)
"RTN","RCTCSP7",27,0)
 S REC=REC_$S(PHONE]"":"Y",1:" ")
"RTN","RCTCSP7",28,0)
 S REC=REC_$$BLANK(450-$L(REC))
"RTN","RCTCSP7",29,0)
 S ^XTMP("RCTCSPD",$J,BILL,ACTION,"2C")=REC
"RTN","RCTCSP7",30,0)
 S $P(^XTMP("RCTCSPD",$J,"BILL",ACTION,BILL),U,1)=$$TAXID(DEBTOR)
"RTN","RCTCSP7",31,0)
 D CLR19(BILL,4)
"RTN","RCTCSP7",32,0)
 Q
"RTN","RCTCSP7",33,0)
 ;
"RTN","RCTCSP7",34,0)
NAMEFF(DFN) ;returns name for document and name in file
"RTN","RCTCSP7",35,0)
 N FN,LN,MN,NM,DOCNM,VA,VADM
"RTN","RCTCSP7",36,0)
 S NM=""
"RTN","RCTCSP7",37,0)
 D DEM^VADPT
"RTN","RCTCSP7",38,0)
 I $D(VADM) S NM=VADM(1)
"RTN","RCTCSP7",39,0)
 S LN=$TR($P(NM,",")," .'-"),MN=$P($P(NM,",",2)," ",2)
"RTN","RCTCSP7",40,0)
 I ($E(MN,1,2)="SR")!($E(MN,1,2)="JR")!(MN?2.3"I")!(MN?0.1"I"1"V"1.3"I") S MN=""
"RTN","RCTCSP7",41,0)
 S FN=$P($P(NM,",",2)," ")
"RTN","RCTCSP7",42,0)
 S DOCNM=LN_" "_FN_" "_MN
"RTN","RCTCSP7",43,0)
 Q DOCNM
"RTN","RCTCSP7",44,0)
 ;
"RTN","RCTCSP7",45,0)
BLANK(X) ;returns 'x' blank spaces
"RTN","RCTCSP7",46,0)
 N BLANK
"RTN","RCTCSP7",47,0)
 S BLANK="",$P(BLANK," ",X+1)=""
"RTN","RCTCSP7",48,0)
 Q BLANK
"RTN","RCTCSP7",49,0)
 ;
"RTN","RCTCSP7",50,0)
TAXID(DEBTOR) ;computes TAXID to place on documents
"RTN","RCTCSP7",51,0)
 N TAXID,DIC,DA,DR,DIQ
"RTN","RCTCSP7",52,0)
 S TAXID=$$SSN^RCFN01(DEBTOR)
"RTN","RCTCSP7",53,0)
 S TAXID=$$LJSF(TAXID,9)
"RTN","RCTCSP7",54,0)
 Q TAXID
"RTN","RCTCSP7",55,0)
 ;
"RTN","RCTCSP7",56,0)
LJSF(X,Y) ;x left justified, y space filled
"RTN","RCTCSP7",57,0)
 S X=$E(X,1,Y)
"RTN","RCTCSP7",58,0)
 S X=X_$$BLANK(Y-$L(X))
"RTN","RCTCSP7",59,0)
 Q X
"RTN","RCTCSP7",60,0)
 ;
"RTN","RCTCSP7",61,0)
LJZF(X,Y) ;x left justified, y zero filled
"RTN","RCTCSP7",62,0)
 S X=X_"0000000000"
"RTN","RCTCSP7",63,0)
 S X=$E(X,X,Y)
"RTN","RCTCSP7",64,0)
 Q X
"RTN","RCTCSP7",65,0)
 ;
"RTN","RCTCSP7",66,0)
CLR19(BILL,X) ; clear the send flag
"RTN","RCTCSP7",67,0)
 S $P(^PRCA(430,BILL,19),U,X)=""
"RTN","RCTCSP7",68,0)
 ;
"RTN","RCTCSPD")
0^1^B153936257^B168545559
"RTN","RCTCSPD",1,0)
RCTCSPD ;ALBANY/BDB-CROSS-SERVICING TRANSMISSION ;03/15/14 3:34 PM
"RTN","RCTCSPD",2,0)
 ;;4.5;Accounts Receivable;**301,327**;Mar 20, 1995;Build 7
"RTN","RCTCSPD",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSPD",4,0)
 ;
"RTN","RCTCSPD",5,0)
 ;PRCA*4.5*327 a. Add check to insure debtor exists to prevent 
"RTN","RCTCSPD",6,0)
 ;                undefined error and set in XTMP work global to
"RTN","RCTCSPD",7,0)
 ;                be reported via 'TCSP' mailgroup.
"RTN","RCTCSPD",8,0)
 ;             b. Added process controls throughout entire batch
"RTN","RCTCSPD",9,0)
 ;                run and message to mail group 'TCSP' batch run
"RTN","RCTCSPD",10,0)
 ;                is complete
"RTN","RCTCSPD",11,0)
 ;             c. Move SETUP/FINISH to new routine RCTCSPD0
"RTN","RCTCSPD",12,0)
 ;                due to SACC size constraints
"RTN","RCTCSPD",13,0)
 ;             d. Move REC2C tag/code to RCTCSP4 to create space
"RTN","RCTCSPD",14,0)
 ;                for debtor undefined logic
"RTN","RCTCSPD",15,0)
 ;
"RTN","RCTCSPD",16,0)
ENTER N DEBTOR,P150DT,PRIN,INT,ADMIN,TDEB,TFIL
"RTN","RCTCSPD",17,0)
 N RCDFN,CNTR,SITE,LN,FN,MN,SITE,F60DT,VADM
"RTN","RCTCSPD",18,0)
 N PHONE,QUIT,TOTAL,ZIPCODE,FULLNM,RCNT,REPAY,X1,X2
"RTN","RCTCSPD",19,0)
 N ERROR,ADDR,CAT,BILLDT,CURRTOT,SITECD
"RTN","RCTCSPD",20,0)
 N SEQ,CNTLID,PREPDT,X1,X2,X,DELDT,ACTDT
"RTN","RCTCSPD",21,0)
 D SETUP^RCTCSPD0
"RTN","RCTCSPD",22,0)
 S (DEBTOR,RCNT)=0,SEQ=0
"RTN","RCTCSPD",23,0)
RSDEBTOR ;
"RTN","RCTCSPD",24,0)
 F  S DEBTOR=$O(^PRCA(430,"C",DEBTOR)) Q:DEBTOR'?1N.N  D
"RTN","RCTCSPD",25,0)
 .D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZBDEBTOR")=%_U_DEBTOR
"RTN","RCTCSPD",26,0)
 .N X,RCDFN,DEMCS,DOB,GNDR,DEBTOR0,DEBTOR1,DEBTOR3,DEBTOR7,BILL
"RTN","RCTCSPD",27,0)
 .I '$D(^RCD(340,DEBTOR,0)) S ^XTMP("RCTCSPD",$J,"ZZUNDEF",DEBTOR)="" Q
"RTN","RCTCSPD",28,0)
 .S DEBTOR0=^RCD(340,DEBTOR,0),DEBTOR1=$G(^(1)),DEBTOR3=$G(^(3)),DEBTOR7=$G(^(7))
"RTN","RCTCSPD",29,0)
 .S RCDFN=+DEBTOR0
"RTN","RCTCSPD",30,0)
 .S DEMCS=$$DEM^RCTCSP1(RCDFN)
"RTN","RCTCSPD",31,0)
 .S DOB=$P(DEMCS,U,2)
"RTN","RCTCSPD",32,0)
 .S GNDR=$P(DEMCS,U,1) S:"MF"'[GNDR GNDR="U"
"RTN","RCTCSPD",33,0)
 .I $P(DEBTOR7,U,2) I '+$P(DEBTOR7,U,3) D  ;send type 2 recall record
"RTN","RCTCSPD",34,0)
 ..N ACTION,B0,B15,BILL
"RTN","RCTCSPD",35,0)
 ..S ACTION="L"
"RTN","RCTCSPD",36,0)
 ..S B0="",B15="",BILL=0
"RTN","RCTCSPD",37,0)
 ..F  S BILL=$O(^PRCA(430,"C",DEBTOR,BILL)) Q:BILL'?1N.N  I $D(^PRCA(430,"TCSP",BILL)) I $P(^PRCA(430,BILL,15),U,7)'=1 S B0=$G(^PRCA(430,BILL,0)),B15=$G(^(15)) Q  ;get one bill
"RTN","RCTCSPD",38,0)
 ..I BILL="" S BILL=0 S $P(^RCD(340,DEBTOR,7),U,2,4)="^^",$P(DEBTOR7,U,2,4)="^^" Q  ;cs debtor with no cs bill, clear the debtor recall flag, quit
"RTN","RCTCSPD",39,0)
 ..D REC2
"RTN","RCTCSPD",40,0)
 ..S $P(^RCD(340,DEBTOR,7),U,3)=DT
"RTN","RCTCSPD",41,0)
 ..S DEBTOR7=^RCD(340,DEBTOR,7)
"RTN","RCTCSPD",42,0)
 ..S BILL=0 ;set debtor cross-serviced bills as recalled
"RTN","RCTCSPD",43,0)
 ..F  S BILL=$O(^PRCA(430,"C",DEBTOR,BILL)) Q:BILL'?1N.N  D
"RTN","RCTCSPD",44,0)
 ...D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZCRBILL")=%_U_BILL
"RTN","RCTCSPD",45,0)
 ...I $D(^PRCA(430,"TCSP",BILL)) D  Q  ;bill previously sent to TCSP
"RTN","RCTCSPD",46,0)
 ....S $P(^PRCA(430,BILL,15),U,1)="" ;clear the date referred
"RTN","RCTCSPD",47,0)
 ....S $P(^PRCA(430,BILL,15),U,2)=1 ;set the recall flag
"RTN","RCTCSPD",48,0)
 ....S $P(^PRCA(430,BILL,15),U,3)=DT ;set the recall date
"RTN","RCTCSPD",49,0)
 ....S $P(^PRCA(430,BILL,15),U,4)=$P(DEBTOR7,U,4) ;set the recall reason
"RTN","RCTCSPD",50,0)
 ....S $P(^PRCA(430,BILL,15),U,5)=$$GET1^DIQ(430,BILL,11) ;set the recall amount to the current amount
"RTN","RCTCSPD",51,0)
 ....K ^PRCA(430,"TCSP",BILL) ;set the bill to not sent to cross-servicing
"RTN","RCTCSPD",52,0)
RSBILL .S (BILL,TOTAL,REPAY)=0
"RTN","RCTCSPD",53,0)
 .F  S BILL=$O(^PRCA(430,"C",DEBTOR,BILL)) Q:BILL'?1N.N  D
"RTN","RCTCSPD",54,0)
 ..D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZCTRACKER")=%_U_DEBTOR_U_BILL
"RTN","RCTCSPD",55,0)
 ..N B0,B4,B6,B7,B9,B12,B121,B14,B15,B16,B19,B20,ACTION
"RTN","RCTCSPD",56,0)
 ..S B0=$G(^PRCA(430,BILL,0)),B4=$G(^(4)),B6=$G(^(6)),B7=$G(^(7)),B9=$G(^(9)),B12=$G(^(12)),B121=$G(^(12.1)),B14=$G(^(14)),B15=$G(^(15)),B16=$G(^(16)),B19=$G(^(19)),B20=$G(^(20))
"RTN","RCTCSPD",57,0)
 ..Q:($P(B6,U,21)\1)<ACTDT  ;cs activation date cutoff
"RTN","RCTCSPD",58,0)
 ..I $D(^PRCA(430,"TCSP",BILL)),$$RCLLCHK^RCTCSP2(BILL) Q  ;bill previously sent to TCSP
"RTN","RCTCSPD",59,0)
 ..I $$UPDCHK(BILL) Q
"RTN","RCTCSPD",60,0)
 ..Q:B4  ;repayment plan
"RTN","RCTCSPD",61,0)
 ..Q:+$P(B15,U,7)  ;quit if bill is stopped
"RTN","RCTCSPD",62,0)
 ..Q:+$P(B14,U,1)  ;bill referred to TOP
"RTN","RCTCSPD",63,0)
 ..Q:$P(DEBTOR1,"^",9)=1  ;quit if debtor address marked unknown
"RTN","RCTCSPD",64,0)
 ..Q:$E($P(DEMCS,U,3),1,5)="00000"  ;quit if the ssn is not valid
"RTN","RCTCSPD",65,0)
 ..I +$P(B12,U,1) Q  ;check date bill sent to dmc
"RTN","RCTCSPD",66,0)
 ..Q:($P(B121,U,1)="N")!($P(B121,U,1)="P")  ;dmc debt valid
"RTN","RCTCSPD",67,0)
 ..I $P(B6,U,4),($P(B6,U,5)="DOJ") Q
"RTN","RCTCSPD",68,0)
 ..Q:+$P(DEMCS,U,4)  ;deceased patient
"RTN","RCTCSPD",69,0)
 ..Q:'$P(B0,U,2)  ;no category
"RTN","RCTCSPD",70,0)
 ..S CAT=$P($G(^PRCA(430.2,$P(B0,U,2),0)),U,7)
"RTN","RCTCSPD",71,0)
 ..Q:'CAT
"RTN","RCTCSPD",72,0)
 ..I ",4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,28,33,34,35,36,37,38,39,"[(","_CAT_",") Q
"RTN","RCTCSPD",73,0)
 ..;dpn checks
"RTN","RCTCSPD",74,0)
 ..I $P(B20,U,3)=1,(10000+$G(^RC(342,1,"CS")))>DT,'$P(B20,U,4) D DUEPROC^RCTCSP3 Q  ;check to send dpn file to aitc
"RTN","RCTCSPD",75,0)
 ..I $P(B20,U,3)=1,(10000+$G(^RC(342,1,"CS")))>DT,$P(B20,U,4),'$P(B20,U,5) Q  ;check for print letter date
"RTN","RCTCSPD",76,0)
 ..I $P(B20,U,3)=1,(10000+$G(^RC(342,1,"CS")))>DT,$P(B20,U,4),$P(B20,U,5) D  I X<60 Q  ;check for 60 day wait from print letter date
"RTN","RCTCSPD",77,0)
 ...N X1,X2
"RTN","RCTCSPD",78,0)
 ...S X1=DT,X2=$P(B20,U,5) D ^%DTC
"RTN","RCTCSPD",79,0)
 ...I X'<60 S $P(B20,U,6)=DT,^PRCA(430,BILL,20)=B20 ;set the bill referral date to the current date
"RTN","RCTCSPD",80,0)
 ..S BILLDT=$P(B6,U,21),PREPDT=$P(B0,U,10)
"RTN","RCTCSPD",81,0)
 ..I BILLDT>P150DT Q  ;150 day old check
"RTN","RCTCSPD",82,0)
 ..I ($P(B0,U,8)=16),('$P(B6,U,3)) D  Q
"RTN","RCTCSPD",83,0)
 ...;no 3rd letter being sent
"RTN","RCTCSPD",84,0)
 ...N DNM
"RTN","RCTCSPD",85,0)
 ...S DNM=$$NAMEFF(+DEBTOR0),^XTMP("RCTCSPD",$J,"THIRD",DNM,$P(B0,U))=""
"RTN","RCTCSPD",86,0)
 ..I $P(B0,U,8)=16 I $$ADDCHKND(BILL) Q
"RTN","RCTCSPD",87,0)
 ..I $P(B0,U,8)=16 I $$ADDCHKNB(BILL) Q
"RTN","RCTCSPD",88,0)
 ..Q
"RTN","RCTCSPD",89,0)
 .Q
"RTN","RCTCSPD",90,0)
 ;
"RTN","RCTCSPD",91,0)
 D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZDEND")=%
"RTN","RCTCSPD",92,0)
 D THIRD^RCTCSP2
"RTN","RCTCSPD",93,0)
 D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZETRANSMIT CS RECS")=%
"RTN","RCTCSPD",94,0)
 D COMPILE^RCTCSP2 ;compile cross-serviced records
"RTN","RCTCSPD",95,0)
 D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZFTRANSMIT DPN")=%
"RTN","RCTCSPD",96,0)
 D COMPILED^RCTCSP3 ;compile the aitc due process notification records
"RTN","RCTCSPD",97,0)
 D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZGTRANSMIT FINISHED")=%
"RTN","RCTCSPD",98,0)
 D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZHCOMPLETE")=%
"RTN","RCTCSPD",99,0)
 D FINISH^RCTCSPD0
"RTN","RCTCSPD",100,0)
 Q
"RTN","RCTCSPD",101,0)
 ;
"RTN","RCTCSPD",102,0)
ADDCHKND(BILL) ;add a new bill referral, new debtor
"RTN","RCTCSPD",103,0)
 N TOTAL,ACTION,X
"RTN","RCTCSPD",104,0)
 S ACTION="A"
"RTN","RCTCSPD",105,0)
 I $D(^RCD(340,"TCSP",DEBTOR)) Q 0 ;check debtor previously referred
"RTN","RCTCSPD",106,0)
 I $P(B15,U,2) Q 0 ;check tcsp bill recall flag
"RTN","RCTCSPD",107,0)
 I $P(DEBTOR7,U,2) Q 0 ;check debtor recall
"RTN","RCTCSPD",108,0)
 I $P(B15,U,7) Q 0 ;check stop tcsp referral flag
"RTN","RCTCSPD",109,0)
 I $D(^PRCA(430,"TCSP",BILL)) Q 0 ;bill previously sent to TCSP
"RTN","RCTCSPD",110,0)
 S TOTAL=$P(B7,U)+$P(B7,U,2)+$P(B7,U,3)+$P(B7,U,4)+$P(B7,U,5)
"RTN","RCTCSPD",111,0)
 I TOTAL<25 Q 1 ;no adds for bills less than $25
"RTN","RCTCSPD",112,0)
 D REC1
"RTN","RCTCSPD",113,0)
 D REC2
"RTN","RCTCSPD",114,0)
 D REC2A
"RTN","RCTCSPD",115,0)
 S $P(^PRCA(430,BILL,16),U,13)=DOB,B16=^(16)
"RTN","RCTCSPD",116,0)
 S $P(^PRCA(430,BILL,15),U,14)=GNDR,B15=^(15)
"RTN","RCTCSPD",117,0)
 D REC2C^RCTCSP7    ;PRC*5.1*327
"RTN","RCTCSPD",118,0)
 S ADDRCS=$$ADDR^RCTCSP1(RCDFN)
"RTN","RCTCSPD",119,0)
 S $P(^PRCA(430,BILL,16),U,4,8)=$P(ADDRCS,U,1,5),$P(^(16),U,11)=$P(ADDRCS,U,6),$P(^(16),U,12)=$P(ADDRCS,U,7)
"RTN","RCTCSPD",120,0)
 S B16=^PRCA(430,BILL,16)
"RTN","RCTCSPD",121,0)
 D REC3^RCTCSP2
"RTN","RCTCSPD",122,0)
 S TAXID=$$TAXID(DEBTOR)
"RTN","RCTCSPD",123,0)
 S NAME=$$NAME(+DEBTOR0),NAME=$P(NAME,U)
"RTN","RCTCSPD",124,0)
 S $P(^PRCA(430,BILL,15),U,1)=DT,$P(^(16),U,1)=TAXID,$P(^(16),U,2)=NAME
"RTN","RCTCSPD",125,0)
 S X1=BILLDT,X2=+30 D C^%DTC S DELDT=X
"RTN","RCTCSPD",126,0)
 S $P(^PRCA(430,BILL,16),U,3)=DELDT,^PRCA(430,"TCSP",BILL)=""
"RTN","RCTCSPD",127,0)
 I '$D(^RCD(340,"TCSP",DEBTOR)) S $P(^RCD(340,DEBTOR,7),U,5)=DT,^RCD(340,"TCSP",DEBTOR)=""
"RTN","RCTCSPD",128,0)
 Q 1
"RTN","RCTCSPD",129,0)
 ;
"RTN","RCTCSPD",130,0)
ADDCHKNB(BILL) ;add a new bill referral, existing debtor
"RTN","RCTCSPD",131,0)
 N TOTAL,ACTION,TAXID,NAME,ADDRCS,X
"RTN","RCTCSPD",132,0)
 I '$D(^RCD(340,"TCSP",DEBTOR)) Q 0 ;check debtor previously referred
"RTN","RCTCSPD",133,0)
 I $P(B15,U,2) Q 0 ;check tcsp bill recall flag
"RTN","RCTCSPD",134,0)
 I $P(B15,U,7) Q 0 ;check stop tcsp referral flag
"RTN","RCTCSPD",135,0)
 I $D(^PRCA(430,"TCSP",BILL)) Q 0 ;bill previously sent to TCSP
"RTN","RCTCSPD",136,0)
 S TOTAL=$P(B7,U)+$P(B7,U,2)+$P(B7,U,3)+$P(B7,U,4)+$P(B7,U,5)
"RTN","RCTCSPD",137,0)
 I TOTAL<25 Q 0 ;no adds for bills less than $25
"RTN","RCTCSPD",138,0)
 S ACTION="A" D REC1
"RTN","RCTCSPD",139,0)
 S ACTION="B" D REC2
"RTN","RCTCSPD",140,0)
 S ACTION="A" D REC3^RCTCSP2
"RTN","RCTCSPD",141,0)
 S TAXID=$$TAXID(DEBTOR)
"RTN","RCTCSPD",142,0)
 S NAME=$$NAME(+DEBTOR0),NAME=$P(NAME,U)
"RTN","RCTCSPD",143,0)
 S $P(^PRCA(430,BILL,15),U,1)=DT,$P(^(16),U,1)=TAXID,$P(^(16),U,2)=NAME,$P(^(16),U,3)=BILLDT,^PRCA(430,"TCSP",BILL)=""
"RTN","RCTCSPD",144,0)
 S ADDRCS=$$ADDR^RCTCSP1(RCDFN)
"RTN","RCTCSPD",145,0)
 S $P(^PRCA(430,BILL,16),U,4,8)=$P(ADDRCS,U,1,5),$P(^(16),U,11)=$P(ADDRCS,U,6),$P(^(16),U,12)=$P(ADDRCS,U,7)
"RTN","RCTCSPD",146,0)
 S $P(^PRCA(430,BILL,16),U,13)=DOB,B16=^(16)
"RTN","RCTCSPD",147,0)
 S $P(^PRCA(430,BILL,15),U,14)=GNDR,B15=^(15)
"RTN","RCTCSPD",148,0)
 I '$D(^RCD(340,"TCSP",DEBTOR)) S $P(^RCD(340,DEBTOR,7),U,5)=DT,^RCD(340,"TCSP",DEBTOR)=""
"RTN","RCTCSPD",149,0)
 Q 1
"RTN","RCTCSPD",150,0)
 ;
"RTN","RCTCSPD",151,0)
UPDCHK(BILL) ;update 5b or existing bill
"RTN","RCTCSPD",152,0)
 I '$D(^PRCA(430,BILL,16)) Q 0 ;quit null node 16 old address
"RTN","RCTCSPD",153,0)
 N TOTAL,TAXID,OTAXID,NAME,ONAME,ADDR,OADDR,ADDRCS,COUNTRY,OCOUNTRY,OPHONE
"RTN","RCTCSPD",154,0)
 N ODOB,OGNDR
"RTN","RCTCSPD",155,0)
 N TRNIDX,TRN1,TRN8,TRNAMT,TRNNUM,TRNFLG,FIVBFLG
"RTN","RCTCSPD",156,0)
 I $P(B15,U,2) Q 0 ;check tcsp bill recall flag
"RTN","RCTCSPD",157,0)
 I $P(B15,U,7) Q 0 ;check stop tcsp referral flag
"RTN","RCTCSPD",158,0)
 ;5b check
"RTN","RCTCSPD",159,0)
 S FIVBFLG=0
"RTN","RCTCSPD",160,0)
 S TRNIDX=0 F  S TRNIDX=$O(^PRCA(430,BILL,17,TRNIDX)) Q:+TRNIDX=0  D
"RTN","RCTCSPD",161,0)
 .S TRNNUM=$P($G(^PRCA(430,BILL,17,TRNIDX,0)),U,1),TRNFLG=$P($G(^PRCA(430,BILL,17,TRNIDX,0)),U,2)
"RTN","RCTCSPD",162,0)
 .Q:+TRNFLG=0
"RTN","RCTCSPD",163,0)
 .S TRN1=$G(^PRCA(433,TRNNUM,1)),TRNAMT=$P(TRN1,U,5) S:TRNAMT<0 TRNAMT=-TRNAMT
"RTN","RCTCSPD",164,0)
 .S TRN8=$G(^PRCA(433,TRNNUM,8))
"RTN","RCTCSPD",165,0)
 .S ACTION="U"
"RTN","RCTCSPD",166,0)
 .D REC5B^RCTCSP1
"RTN","RCTCSPD",167,0)
 .S $P(^PRCA(430,BILL,17,TRNIDX,0),U,2)=""
"RTN","RCTCSPD",168,0)
 .S FIVBFLG=1
"RTN","RCTCSPD",169,0)
 S TOTAL=$P(B7,U)+$P(B7,U,2)+$P(B7,U,3)+$P(B7,U,4)+$P(B7,U,5)
"RTN","RCTCSPD",170,0)
 I FIVBFLG,(TOTAL=0) S DR="151///@",DIE="^PRCA(430,",DA=BILL D ^DIE K DR,DIE,DA
"RTN","RCTCSPD",171,0)
 I $P(B19,U,1)=1 S ACTION="U" D REC1 S $P(B19,U,1)="" S $P(^PRCA(430,BILL,19),U,1)=""
"RTN","RCTCSPD",172,0)
 I $P(B19,U,2)=1 S ACTION="U" D REC2 S $P(B19,U,2)="" S $P(^PRCA(430,BILL,19),U,2)=""
"RTN","RCTCSPD",173,0)
 I $P(B19,U,3)=1 S ACTION="U" D REC2A S $P(B19,U,3)="" S $P(^PRCA(430,BILL,19),U,3)=""
"RTN","RCTCSPD",174,0)
 I $P(B19,U,4)=1 S ACTION="A" D REC2C^RCTCSP7 S $P(B19,U,4)="" S $P(^PRCA(430,BILL,19),U,4)=""   ;PRC*5.1*327
"RTN","RCTCSPD",175,0)
 I FIVBFLG=1 Q 1 ;if 5b sent, then do not continue to referral check
"RTN","RCTCSPD",176,0)
 I '$D(^PRCA(430,"TCSP",BILL)) Q 0 ;if not cross-serviced, then continue referral check
"RTN","RCTCSPD",177,0)
 S TAXID=$$TAXID(DEBTOR)
"RTN","RCTCSPD",178,0)
 S OTAXID=$P(B16,U,1)
"RTN","RCTCSPD",179,0)
 S NAME=$$NAME(+DEBTOR0),NAME=$P(NAME,U)
"RTN","RCTCSPD",180,0)
 S ONAME=$P(B16,U,2)
"RTN","RCTCSPD",181,0)
 I $P(B0,U,8)=16,$D(^PRCA(430,"TCSP",BILL)) I (NAME'=ONAME)!(TAXID'=OTAXID) D
"RTN","RCTCSPD",182,0)
 .S ACTION="U"
"RTN","RCTCSPD",183,0)
 .D REC2
"RTN","RCTCSPD",184,0)
 .S $P(^PRCA(430,BILL,16),U,1)=TAXID,$P(^(16),U,2)=NAME,$P(^(19),U,2)="",$P(B19,U,2)=""
"RTN","RCTCSPD",185,0)
 S OADDR=$P(^PRCA(430,BILL,16),U,4,8),OPHONE=$P(^(16),U,11),OCOUNTRY=$P(^(16),U,12)
"RTN","RCTCSPD",186,0)
 S ADDRCS=$$ADDR^RCTCSP1(RCDFN),PHONE=$P(ADDRCS,U,6),COUNTRY=$P(ADDRCS,U,7)
"RTN","RCTCSPD",187,0)
 I $P(DEBTOR1,"^",9)'=1 D  ;if debtor address is not marked unknown, then check address
"RTN","RCTCSPD",188,0)
 .I $P(B0,U,8)=16,$D(^PRCA(430,"TCSP",BILL)) I ($P(ADDRCS,U,1,5)'=$P(OADDR,U,1,5))!(PHONE'=OPHONE)!(COUNTRY'=OCOUNTRY) D
"RTN","RCTCSPD",189,0)
 ..S ACTION="A" ;2c records have action code 'a'
"RTN","RCTCSPD",190,0)
 ..D REC2C^RCTCSP7
"RTN","RCTCSPD",191,0)
 ..S $P(B19,U,4)=""
"RTN","RCTCSPD",192,0)
 ..S $P(^PRCA(430,BILL,16),U,4,8)=$P(ADDRCS,U,1,5),$P(^(16),U,11)=PHONE,$P(^(16),U,12)=$P(ADDRCS,U,7)
"RTN","RCTCSPD",193,0)
 S B16=^PRCA(430,BILL,16)
"RTN","RCTCSPD",194,0)
 S ODOB=$P(^PRCA(430,BILL,16),U,13)
"RTN","RCTCSPD",195,0)
 S OGNDR=$P(^PRCA(430,BILL,15),U,14)
"RTN","RCTCSPD",196,0)
 I $P(B0,U,8)=16,$D(^PRCA(430,"TCSP",BILL)) I (DOB'=ODOB)!(GNDR'=OGNDR) D
"RTN","RCTCSPD",197,0)
 .S ACTION="U"
"RTN","RCTCSPD",198,0)
 .D REC2A
"RTN","RCTCSPD",199,0)
 .S $P(^PRCA(430,BILL,16),U,13)=DOB,B16=^(16)
"RTN","RCTCSPD",200,0)
 .S $P(^PRCA(430,BILL,15),U,14)=GNDR,B15=^(15)
"RTN","RCTCSPD",201,0)
 .Q
"RTN","RCTCSPD",202,0)
 Q 1 ;bill is cross-serviced so do not continue referral check
"RTN","RCTCSPD",203,0)
 ;
"RTN","RCTCSPD",204,0)
REC1 ;record type 1
"RTN","RCTCSPD",205,0)
 N REC,KNUM,DEBTNR,AMTORIG,AMTPBAL,AMTIBAL,AMTABAL,AMTFBAL,AMTCBAL,AMTRFRRD,AMOUNT,DELDT,X,X1,X2,BILLDT,PREPDT
"RTN","RCTCSPD",206,0)
 S REC="C1 "_ACTION_"3636001200"_"DM1D "
"RTN","RCTCSPD",207,0)
 S KNUM=$P($P(B0,U,1),"-",2)
"RTN","RCTCSPD",208,0)
 S DEBTNR=$E(SITE,1,3)_$$LJZF(KNUM,7)_$TR($J(BILL,20)," ",0),REC=REC_DEBTNR_" "
"RTN","RCTCSPD",209,0)
 S REC=REC_"I   A MSCC"
"RTN","RCTCSPD",210,0)
 S BILLDT=$P(B6,U,21),PREPDT=$P(B0,U,10)
"RTN","RCTCSPD",211,0)
 S REC=REC_$$DATE8(PREPDT)
"RTN","RCTCSPD",212,0)
 S X1=BILLDT,X2=+30 D C^%DTC S DELDT=X
"RTN","RCTCSPD",213,0)
 S REC=REC_$$DATE8(DELDT)
"RTN","RCTCSPD",214,0)
 S AMTPBAL=$P(B7,U,1) ;principle balance
"RTN","RCTCSPD",215,0)
 S AMTIBAL=$P(B7,U,2) ;interest balance
"RTN","RCTCSPD",216,0)
 S AMTABAL=$P(B7,U,3) ;administrative balance
"RTN","RCTCSPD",217,0)
 S AMTFBAL=$P(B7,U,4) ;marshal fee
"RTN","RCTCSPD",218,0)
 S AMTCBAL=$P(B7,U,5) ;court cost
"RTN","RCTCSPD",219,0)
 S AMTRFRRD=AMTPBAL+AMTIBAL+AMTABAL+AMTFBAL+AMTCBAL
"RTN","RCTCSPD",220,0)
 S AMTORIG=$P(B0,U,3)
"RTN","RCTCSPD",221,0)
 D  ;
"RTN","RCTCSPD",222,0)
 .I ACTION="A" S REC=REC_$$AMOUNT(AMTRFRRD)_$$AMOUNT(AMTRFRRD) Q
"RTN","RCTCSPD",223,0)
 .I ACTION="L" S AMTRFRRD=0 S REC=REC_$$AMOUNT(AMTRFRRD)_$$AMOUNT(AMTRFRRD) Q
"RTN","RCTCSPD",224,0)
 .S REC=REC_$$BLANK(28)
"RTN","RCTCSPD",225,0)
 S REC=REC_"                                             N        "
"RTN","RCTCSPD",226,0)
 S AMOUNT=$$AMOUNT(AMTPBAL)_$$AMOUNT(AMTIBAL)_$$AMOUNT(AMTABAL)_$$AMOUNT(AMTFBAL+AMTCBAL)
"RTN","RCTCSPD",227,0)
 I ACTION="L" S AMOUNT=$$AMOUNT(0)_$$AMOUNT(0)_$$AMOUNT(0)_$$AMOUNT(0) ;by iai spec
"RTN","RCTCSPD",228,0)
 I ACTION="U" S AMOUNT=$$BLANK(56) ;by iai spec
"RTN","RCTCSPD",229,0)
 S REC=REC_AMOUNT
"RTN","RCTCSPD",230,0)
 I ACTION="L" D
"RTN","RCTCSPD",231,0)
 .S REC=REC_$$BLANK(252-$L(REC))
"RTN","RCTCSPD",232,0)
 .S RCD=$P(B15,U,4)
"RTN","RCTCSPD",233,0)
 .S REC=REC_$S(RCD="01":"01",RCD="07":"07",RCD="08":"08",RCD="15":"01",RCD="03":"01",RCD="05":"01",RCD="06":"01",1:"01")
"RTN","RCTCSPD",234,0)
 S REC=REC_$$BLANK(450-$L(REC))
"RTN","RCTCSPD",235,0)
 I ACTION="A" S $P(^PRCA(430,BILL,16),U,9)=AMTRFRRD,$P(^(16),U,10)=AMTRFRRD
"RTN","RCTCSPD",236,0)
 I ACTION="L" S $P(^PRCA(430,BILL,16),U,9)="",$P(^(16),U,10)=""
"RTN","RCTCSPD",237,0)
 S ^XTMP("RCTCSPD",$J,BILL,ACTION,1)=REC
"RTN","RCTCSPD",238,0)
 S ^XTMP("RCTCSPD",$J,"BILL",ACTION,BILL)=$$TAXID(DEBTOR)_"^"_+$E(REC,91,102)_"."_$E(REC,103,104) ;sends mailman message of documents sent to user
"RTN","RCTCSPD",239,0)
 D CLR19(BILL,1)
"RTN","RCTCSPD",240,0)
 Q
"RTN","RCTCSPD",241,0)
 ;
"RTN","RCTCSPD",242,0)
REC2 ;
"RTN","RCTCSPD",243,0)
 N REC,KNUM,DEBTNR,DEBTORNB,TAXID,NAME,RCD
"RTN","RCTCSPD",244,0)
 S REC="C2 "_ACTION_"3636001200"_"DM1D "
"RTN","RCTCSPD",245,0)
 S KNUM=$P($P(B0,U,1),"-",2)
"RTN","RCTCSPD",246,0)
 S DEBTNR=$E(SITE,1,3)_$$LJZF(KNUM,7)_$TR($J(BILL,20)," ",0),REC=REC_DEBTNR
"RTN","RCTCSPD",247,0)
 S DEBTORNB=$E(SITE,1,3)_$TR($J(DEBTOR,12)," ",0)
"RTN","RCTCSPD",248,0)
 S REC=REC_DEBTORNB
"RTN","RCTCSPD",249,0)
 S TAXID=$$TAXID(DEBTOR)
"RTN","RCTCSPD",250,0)
 S REC=REC_TAXID_"SSN"
"RTN","RCTCSPD",251,0)
 S NAME=$$NAME(+DEBTOR0),NAME=$P(NAME,U)
"RTN","RCTCSPD",252,0)
 S REC=REC_NAME_$$BLANK(5)_"I"
"RTN","RCTCSPD",253,0)
 I ACTION="L" D
"RTN","RCTCSPD",254,0)
 .S REC=REC_$$BLANK(232-$L(REC))
"RTN","RCTCSPD",255,0)
 .S RCD=$P(B15,U,4)
"RTN","RCTCSPD",256,0)
 .S REC=REC_$S(RCD="01":"12",RCD="07":"12",RCD="08":"12",RCD="15":"12",RCD="03":"03",RCD="05":"05",RCD="06":"06",1:"12")
"RTN","RCTCSPD",257,0)
 S REC=REC_$$BLANK(450-$L(REC))
"RTN","RCTCSPD",258,0)
 S ^XTMP("RCTCSPD",$J,BILL,ACTION,2)=REC
"RTN","RCTCSPD",259,0)
 S $P(^XTMP("RCTCSPD",$J,"BILL",ACTION,BILL),U,1)=$$TAXID(DEBTOR)
"RTN","RCTCSPD",260,0)
 D CLR19(BILL,2)
"RTN","RCTCSPD",261,0)
 Q
"RTN","RCTCSPD",262,0)
 ;
"RTN","RCTCSPD",263,0)
REC2A ;
"RTN","RCTCSPD",264,0)
 N REC,KNUM,DEBTNR,DEBTORNB
"RTN","RCTCSPD",265,0)
 S REC="C2A"_ACTION_"3636001200"_"DM1D "
"RTN","RCTCSPD",266,0)
 S KNUM=$P($P(B0,U,1),"-",2)
"RTN","RCTCSPD",267,0)
 S DEBTNR=$E(SITE,1,3)_$$LJZF(KNUM,7)_$TR($J(BILL,20)," ",0),REC=REC_DEBTNR
"RTN","RCTCSPD",268,0)
 S DEBTORNB=$E(SITE,1,3)_$TR($J(DEBTOR,12)," ",0)
"RTN","RCTCSPD",269,0)
 S REC=REC_DEBTORNB
"RTN","RCTCSPD",270,0)
 S REC=REC_$$BLANK(3)
"RTN","RCTCSPD",271,0)
 S REC=REC_GNDR
"RTN","RCTCSPD",272,0)
 S REC=REC_$$DATE8($P(DEMCS,U,2))
"RTN","RCTCSPD",273,0)
 S REC=REC_$$BLANK(450-$L(REC))
"RTN","RCTCSPD",274,0)
 S ^XTMP("RCTCSPD",$J,BILL,ACTION,"2A")=REC
"RTN","RCTCSPD",275,0)
 S $P(^XTMP("RCTCSPD",$J,"BILL",ACTION,BILL),U,1)=$$TAXID(DEBTOR)
"RTN","RCTCSPD",276,0)
 D CLR19(BILL,3)
"RTN","RCTCSPD",277,0)
 Q
"RTN","RCTCSPD",278,0)
 ;
"RTN","RCTCSPD",279,0)
DATE8(X) ;changes fileman date into 8 digit date yyyymmdd
"RTN","RCTCSPD",280,0)
 I +X S X=X+17000000
"RTN","RCTCSPD",281,0)
 S X=$E(X,1,8)
"RTN","RCTCSPD",282,0)
 Q X
"RTN","RCTCSPD",283,0)
 ;
"RTN","RCTCSPD",284,0)
AMOUNT(X) ;changes amount to zero filled, right justified
"RTN","RCTCSPD",285,0)
 S:X<0 X=-X
"RTN","RCTCSPD",286,0)
 S X=$TR($J(X,0,2),".")
"RTN","RCTCSPD",287,0)
 S X=$E("000000000000",1,14-$L(X))_X
"RTN","RCTCSPD",288,0)
 Q X
"RTN","RCTCSPD",289,0)
 ;
"RTN","RCTCSPD",290,0)
NAME(DFN) ;returns name for document and name in file
"RTN","RCTCSPD",291,0)
 N FN,LN,MN,NM,DOCNM,VA,VADM
"RTN","RCTCSPD",292,0)
 S NM=""
"RTN","RCTCSPD",293,0)
 D DEM^VADPT
"RTN","RCTCSPD",294,0)
 I $D(VADM) S NM=VADM(1)
"RTN","RCTCSPD",295,0)
 S LN=$TR($P(NM,",")," .'-"),MN=$P($P(NM,",",2)," ",2)
"RTN","RCTCSPD",296,0)
 I ($E(MN,1,2)="SR")!($E(MN,1,2)="JR")!(MN?2.3"I")!(MN?0.1"I"1"V"1.3"I") S MN=""
"RTN","RCTCSPD",297,0)
 S FN=$P($P(NM,",",2)," ")
"RTN","RCTCSPD",298,0)
 S DOCNM=$$LJ^XLFSTR($E(LN,1,35),35)_$$LJ^XLFSTR($E(FN,1,35),35)_$$LJ^XLFSTR($E(MN,1,35),35)
"RTN","RCTCSPD",299,0)
 Q DOCNM
"RTN","RCTCSPD",300,0)
 ;
"RTN","RCTCSPD",301,0)
NAMEFF(DFN) ;returns name for document and name in file
"RTN","RCTCSPD",302,0)
 N FN,LN,MN,NM,DOCNM,VA,VADM
"RTN","RCTCSPD",303,0)
 S NM=""
"RTN","RCTCSPD",304,0)
 D DEM^VADPT
"RTN","RCTCSPD",305,0)
 I $D(VADM) S NM=VADM(1)
"RTN","RCTCSPD",306,0)
 S LN=$TR($P(NM,",")," .'-"),MN=$P($P(NM,",",2)," ",2)
"RTN","RCTCSPD",307,0)
 I ($E(MN,1,2)="SR")!($E(MN,1,2)="JR")!(MN?2.3"I")!(MN?0.1"I"1"V"1.3"I") S MN=""
"RTN","RCTCSPD",308,0)
 S FN=$P($P(NM,",",2)," ")
"RTN","RCTCSPD",309,0)
 S DOCNM=LN_" "_FN_" "_MN
"RTN","RCTCSPD",310,0)
 Q DOCNM
"RTN","RCTCSPD",311,0)
 ;
"RTN","RCTCSPD",312,0)
BLANK(X) ;returns 'x' blank spaces
"RTN","RCTCSPD",313,0)
 N BLANK
"RTN","RCTCSPD",314,0)
 S BLANK="",$P(BLANK," ",X+1)=""
"RTN","RCTCSPD",315,0)
 Q BLANK
"RTN","RCTCSPD",316,0)
 ;
"RTN","RCTCSPD",317,0)
NOW() ;compiles current date,time
"RTN","RCTCSPD",318,0)
 N X,Y,%,%H
"RTN","RCTCSPD",319,0)
 S %H=$H D YX^%DTC
"RTN","RCTCSPD",320,0)
 Q Y
"RTN","RCTCSPD",321,0)
 ;
"RTN","RCTCSPD",322,0)
RJZF(X,Y) ;right justify zero fill width Y
"RTN","RCTCSPD",323,0)
 S X=$E("000000000000",1,Y-$L(X))_X
"RTN","RCTCSPD",324,0)
 Q X
"RTN","RCTCSPD",325,0)
 ;
"RTN","RCTCSPD",326,0)
TAXID(DEBTOR) ;computes TAXID to place on documents
"RTN","RCTCSPD",327,0)
 N TAXID,DIC,DA,DR,DIQ
"RTN","RCTCSPD",328,0)
 S TAXID=$$SSN^RCFN01(DEBTOR)
"RTN","RCTCSPD",329,0)
 S TAXID=$$LJSF(TAXID,9)
"RTN","RCTCSPD",330,0)
 Q TAXID
"RTN","RCTCSPD",331,0)
 ;
"RTN","RCTCSPD",332,0)
LJSF(X,Y) ;x left justified, y space filled
"RTN","RCTCSPD",333,0)
 S X=$E(X,1,Y)
"RTN","RCTCSPD",334,0)
 S X=X_$$BLANK(Y-$L(X))
"RTN","RCTCSPD",335,0)
 Q X
"RTN","RCTCSPD",336,0)
 ;
"RTN","RCTCSPD",337,0)
LJZF(X,Y) ;x left justified, y zero filled
"RTN","RCTCSPD",338,0)
 S X=X_"0000000000"
"RTN","RCTCSPD",339,0)
 S X=$E(X,X,Y)
"RTN","RCTCSPD",340,0)
 Q X
"RTN","RCTCSPD",341,0)
 ;
"RTN","RCTCSPD",342,0)
RECALL(BILL) ; set the recall flag
"RTN","RCTCSPD",343,0)
 S $P(^PRCA(430,BILL,15),U,2)=1
"RTN","RCTCSPD",344,0)
 Q
"RTN","RCTCSPD",345,0)
 ;
"RTN","RCTCSPD",346,0)
CLR19(BILL,X) ; clear the send flag
"RTN","RCTCSPD",347,0)
 S $P(^PRCA(430,BILL,19),U,X)=""
"RTN","RCTCSPD",348,0)
 ;
"RTN","RCTCSPD0")
0^4^B8111368^n/a
"RTN","RCTCSPD0",1,0)
RCTCSPD0 ;ALBANY/RGB-CROSS-SERVICING TRANSMISSION START ;06/15/17 3:34 PM
"RTN","RCTCSPD0",2,0)
 ;;4.5;Accounts Receivable;**327**;Mar 20, 1995;Build 7
"RTN","RCTCSPD0",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSPD0",4,0)
 ;
"RTN","RCTCSPD0",5,0)
 ;PRCA*4.5*327 new setup/finish extraction from RCTCSPD and
"RTN","RCTCSPD0",6,0)
 ;             modify XTMP file kill to work correctly for
"RTN","RCTCSPD0",7,0)
 ;             5 days after Tuesday run.
"RTN","RCTCSPD0",8,0)
 ;             Also, send mail message to 'TCSP' mailgroup
"RTN","RCTCSPD0",9,0)
 ;             to report any missing/corrupted debtor entries.
"RTN","RCTCSPD0",10,0)
 ;
"RTN","RCTCSPD0",11,0)
SETUP ;Entry point from nightly process PRCABJ
"RTN","RCTCSPD0",12,0)
 ;
"RTN","RCTCSPD0",13,0)
 ;initialize temporary global, variables
"RTN","RCTCSPD0",14,0)
 ;
"RTN","RCTCSPD0",15,0)
 K ^TMP("RCTCSPD",$J)
"RTN","RCTCSPD0",16,0)
 K ^XTMP("RCTCSPD",$J)
"RTN","RCTCSPD0",17,0)
 K ^XTMP("RCTCSPDN",$J)
"RTN","RCTCSPD0",18,0)
 S ^XTMP("RCTCSPD",$J,0)=$$FMADD^XLFDT(DT,5)_"^"_DT
"RTN","RCTCSPD0",19,0)
 S ^XTMP("RCTCSPDN",$J,0)=$$FMADD^XLFDT(DT,5)_"^"_DT
"RTN","RCTCSPD0",20,0)
RESTART D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZASTART")=%
"RTN","RCTCSPD0",21,0)
 S SITE=$E($$SITE^RCMSITE(),1,3),SITECD=$P(^RC(342,1,3),U,5)
"RTN","RCTCSPD0",22,0)
 S ACTDT=3150801 ;activation date for all sites except beckley, little rock, upstate ny 
"RTN","RCTCSPD0",23,0)
 S:SITE=598 ACTDT=3150201 ;activation date for little rock
"RTN","RCTCSPD0",24,0)
 S:SITE=517 ACTDT=3150201 ;activation date for beckley
"RTN","RCTCSPD0",25,0)
 S:SITE=528 ACTDT=3150201 ;activation date for upstate ny
"RTN","RCTCSPD0",26,0)
 S X1=DT,X2=-150 D C^%DTC S P150DT=X
"RTN","RCTCSPD0",27,0)
 S X1=DT,X2=+60 D C^%DTC S F60DT=X
"RTN","RCTCSPD0",28,0)
 S (CNTR(1),CNTR(2),CNTR("2A"),CNTR("2C"),CNTR(3),CNTR("5A"),CNTR("5B"))=0
"RTN","RCTCSPD0",29,0)
 Q
"RTN","RCTCSPD0",30,0)
FINISH ;sends mailman message to TCSP mail group to show batch fully completed
"RTN","RCTCSPD0",31,0)
 I $D(^XTMP("RCTCSPD",$J,"ZZUNDEF")) D UNDEF
"RTN","RCTCSPD0",32,0)
 N XMY,XMDUZ,XMSUB,XMTEXT,BMSG
"RTN","RCTCSPD0",33,0)
 S XMDUZ="AR PACKAGE"
"RTN","RCTCSPD0",34,0)
 S XMY("G.TCSP")=""
"RTN","RCTCSPD0",35,0)
 S XMSUB="*** Batch Completion Notice ***"
"RTN","RCTCSPD0",36,0)
 S BMSG(1)="The batch run and transmission completed on "_(17000000+^XTMP("RCTCSPD",$J,"ZZHCOMPLETE"))
"RTN","RCTCSPD0",37,0)
 S XMTEXT="BMSG("
"RTN","RCTCSPD0",38,0)
 D ^XMD
"RTN","RCTCSPD0",39,0)
 K ^TMP("RCTCSPD",$J)
"RTN","RCTCSPD0",40,0)
 Q
"RTN","RCTCSPD0",41,0)
UNDEF ;send message to mail group for any undefined debtor entries found
"RTN","RCTCSPD0",42,0)
 N XMY,XMDUZ,XMSUB,XMTEXT,BMSG,IEN,CTR
"RTN","RCTCSPD0",43,0)
 S XMDUZ="AR PACKAGE"
"RTN","RCTCSPD0",44,0)
 S XMY("G.TCSP")=""
"RTN","RCTCSPD0",45,0)
 S XMSUB="**** FAILED DEBTOR ACTION NOTICE ***"
"RTN","RCTCSPD0",46,0)
 S BMSG(1)="The following corrupted debtor records were found during the batch run."
"RTN","RCTCSPD0",47,0)
 S BMSG(2)="They can be found in xref ^PRCA(430,_""C""_) and have no file 340 entry or a"
"RTN","RCTCSPD0",48,0)
 S BMSG(3)="corrupted entry (missing node 0 or 1)."
"RTN","RCTCSPD0",49,0)
 s BMSG(4)=" "
"RTN","RCTCSPD0",50,0)
 S BMSG(97)=" "
"RTN","RCTCSPD0",51,0)
 S BMSG(98)="*** These corrupt debtor file records must be reported to ***"
"RTN","RCTCSPD0",52,0)
 S BMSG(99)="*** region IT staff to be corrected immediately !!        ***"
"RTN","RCTCSPD0",53,0)
 S IEN=0,CTR=4 F  S IEN=$O(^XTMP("RCTCSPD",$J,"ZZUNDEF",IEN)) Q:'IEN  D
"RTN","RCTCSPD0",54,0)
 . S CTR=CTR+1,BMSG(CTR)="CORRUPT DEBTOR INTERNAL: "_IEN
"RTN","RCTCSPD0",55,0)
 S XMTEXT="BMSG("
"RTN","RCTCSPD0",56,0)
 D ^XMD
"RTN","RCTCSPD0",57,0)
 Q
"VER")
8.0^22.2
"BLD",10604,6)
^286
**END**
**END**

