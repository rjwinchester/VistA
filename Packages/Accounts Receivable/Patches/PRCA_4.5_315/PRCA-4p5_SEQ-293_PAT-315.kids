Released PRCA*4.5*315 SEQ #293
Extracted from mail message
**KIDS**:PRCA*4.5*315^

**INSTALL NAME**
PRCA*4.5*315
"BLD",10191,0)
PRCA*4.5*315^ACCOUNTS RECEIVABLE^0^3180402^y
"BLD",10191,4,0)
^9.64PA^343^3
"BLD",10191,4,343,0)
343
"BLD",10191,4,343,222)
n^n^f^^y^^y^m^n
"BLD",10191,4,430,0)
430
"BLD",10191,4,430,2,0)
^9.641^430.0171^2
"BLD",10191,4,430,2,430,0)
ACCOUNTS RECEIVABLE  (File-top level)
"BLD",10191,4,430,2,430,1,0)
^9.6411^312^6
"BLD",10191,4,430,2,430,1,156,0)
ORIGINAL DATE REFERRED TO TCSP
"BLD",10191,4,430,2,430,1,301,0)
RETURNED DATE
"BLD",10191,4,430,2,430,1,309,0)
REMOVED FROM RECONCILATION?
"BLD",10191,4,430,2,430,1,310,0)
REC ORIGINAL TCSP AMOUNT
"BLD",10191,4,430,2,430,1,311,0)
REC CURRENT TCSP AMOUNT
"BLD",10191,4,430,2,430,1,312,0)
REC TCSP RECALL EFF. DATE
"BLD",10191,4,430,2,430.0171,0)
CS ADJ TRANS NUMBER  (sub-file)
"BLD",10191,4,430,2,430.0171,1,0)
^9.6411^.01^1
"BLD",10191,4,430,2,430.0171,1,.01,0)
CS ADJ TRANS NUMBER
"BLD",10191,4,430,222)
y^n^p^^^^n^^n
"BLD",10191,4,430,224)

"BLD",10191,4,430.3,0)
430.3
"BLD",10191,4,430.3,222)
n^n^f^^y^^y^m^n
"BLD",10191,4,"APDD",430,430)

"BLD",10191,4,"APDD",430,430,156)

"BLD",10191,4,"APDD",430,430,301)

"BLD",10191,4,"APDD",430,430,309)

"BLD",10191,4,"APDD",430,430,310)

"BLD",10191,4,"APDD",430,430,311)

"BLD",10191,4,"APDD",430,430,312)

"BLD",10191,4,"APDD",430,430.0171)

"BLD",10191,4,"APDD",430,430.0171,.01)

"BLD",10191,4,"B",343,343)

"BLD",10191,4,"B",430,430)

"BLD",10191,4,"B",430.3,430.3)

"BLD",10191,6.3)
67
"BLD",10191,"ABPKG")
n
"BLD",10191,"INID")
^n
"BLD",10191,"INIT")
PRCA315P
"BLD",10191,"KRN",0)
^9.67PA^779.2^20
"BLD",10191,"KRN",.4,0)
.4
"BLD",10191,"KRN",.4,"NM",0)
^9.68A^^0
"BLD",10191,"KRN",.401,0)
.401
"BLD",10191,"KRN",.402,0)
.402
"BLD",10191,"KRN",.402,"NM",0)
^9.68A^1^1
"BLD",10191,"KRN",.402,"NM",1,0)
PRCAE ADMIN    FILE #433^433^0
"BLD",10191,"KRN",.402,"NM","B","PRCAE ADMIN    FILE #433",1)

"BLD",10191,"KRN",.403,0)
.403
"BLD",10191,"KRN",.5,0)
.5
"BLD",10191,"KRN",.84,0)
.84
"BLD",10191,"KRN",3.6,0)
3.6
"BLD",10191,"KRN",3.8,0)
3.8
"BLD",10191,"KRN",9.2,0)
9.2
"BLD",10191,"KRN",9.8,0)
9.8
"BLD",10191,"KRN",9.8,"NM",0)
^9.68A^68^57
"BLD",10191,"KRN",9.8,"NM",1,0)
PRCAXP^^0^B23941725
"BLD",10191,"KRN",9.8,"NM",2,0)
RCDPRTP^^0^B13526370
"BLD",10191,"KRN",9.8,"NM",3,0)
RCDPRTP0^^0^B47346688
"BLD",10191,"KRN",9.8,"NM",4,0)
RCDPRTP2^^0^B20782087
"BLD",10191,"KRN",9.8,"NM",7,0)
RCMSITE^^0^B10360113
"BLD",10191,"KRN",9.8,"NM",8,0)
PRCABIL1^^0^B39821270
"BLD",10191,"KRN",9.8,"NM",9,0)
PRCABD^^0^B17322985
"BLD",10191,"KRN",9.8,"NM",10,0)
RCDPRTEX^^0^B59632459
"BLD",10191,"KRN",9.8,"NM",11,0)
PRCAPCL^^0^B41751936
"BLD",10191,"KRN",9.8,"NM",12,0)
RCTCSP1^^0^B168089833
"BLD",10191,"KRN",9.8,"NM",13,0)
RCTCSJR^^0^B123788872
"BLD",10191,"KRN",9.8,"NM",14,0)
RCTCSP2^^0^B136461756
"BLD",10191,"KRN",9.8,"NM",15,0)
RCTCSP4^^0^B223432725
"BLD",10191,"KRN",9.8,"NM",16,0)
RCTCSPU^^0^B79474233
"BLD",10191,"KRN",9.8,"NM",17,0)
RCTCSPD^^0^B159825609
"BLD",10191,"KRN",9.8,"NM",18,0)
RCTCSPD4^^0^B88942969
"BLD",10191,"KRN",9.8,"NM",19,0)
PRCAAPR1^^0^B49707336
"BLD",10191,"KRN",9.8,"NM",20,0)
PRCARPM^^0^B37026153
"BLD",10191,"KRN",9.8,"NM",21,0)
RCTCSP5^^0^B97137563
"BLD",10191,"KRN",9.8,"NM",22,0)
RCTCSP3^^0^B80430487
"BLD",10191,"KRN",9.8,"NM",23,0)
RCTCSP1A^^0^B44615567
"BLD",10191,"KRN",9.8,"NM",24,0)
RCXFMSUF^^0^B38763717
"BLD",10191,"KRN",9.8,"NM",25,0)
RCXFMSUR^^0^B63503809
"BLD",10191,"KRN",9.8,"NM",26,0)
RCBEADJ^^0^B100902419
"BLD",10191,"KRN",9.8,"NM",27,0)
RCTCSWL^^0^B155347163
"BLD",10191,"KRN",9.8,"NM",28,0)
RCTCSWL1^^0^B54202527
"BLD",10191,"KRN",9.8,"NM",29,0)
RCTCSWL2^^0^B22529907
"BLD",10191,"KRN",9.8,"NM",31,0)
RCWROFF^^0^B45523800
"BLD",10191,"KRN",9.8,"NM",33,0)
RCDPBPLI^^0^B60001669
"BLD",10191,"KRN",9.8,"NM",34,0)
RCDPBTLM^^0^B52280967
"BLD",10191,"KRN",9.8,"NM",35,0)
RCTCSPRS^^0^B66612792
"BLD",10191,"KRN",9.8,"NM",36,0)
RCTRAN^^0^B16424066
"BLD",10191,"KRN",9.8,"NM",37,0)
PRCAHIS^^0^B26002669
"BLD",10191,"KRN",9.8,"NM",38,0)
RCXFMSUV^^0^B15839120
"BLD",10191,"KRN",9.8,"NM",42,0)
PRCACM^^0^B24617130
"BLD",10191,"KRN",9.8,"NM",43,0)
RCTOPD^^0^B71556644
"BLD",10191,"KRN",9.8,"NM",44,0)
PRCAATR^^0^B25331554
"BLD",10191,"KRN",9.8,"NM",45,0)
RCDPRTP1^^0^B49619894
"BLD",10191,"KRN",9.8,"NM",46,0)
PRCARPU^^0^B188846893
"BLD",10191,"KRN",9.8,"NM",47,0)
RCDPBPLM^^0^B62436978
"BLD",10191,"KRN",9.8,"NM",48,0)
PRCARPS^^0^B15642186
"BLD",10191,"KRN",9.8,"NM",49,0)
RCXFMSPR^^0^B37660808
"BLD",10191,"KRN",9.8,"NM",50,0)
RCDPAPL1^^0^B132684346
"BLD",10191,"KRN",9.8,"NM",51,0)
PRCABJV^^0^B39357110
"BLD",10191,"KRN",9.8,"NM",52,0)
RCRJRBD^^0^B76289018
"BLD",10191,"KRN",9.8,"NM",55,0)
PRCASVC^^0^B11763521
"BLD",10191,"KRN",9.8,"NM",56,0)
PRCASVC1^^0^B1372959
"BLD",10191,"KRN",9.8,"NM",57,0)
RCBEPAYF^^0^B49206897
"BLD",10191,"KRN",9.8,"NM",58,0)
PRCAWO1^^0^B20819477
"BLD",10191,"KRN",9.8,"NM",59,0)
PRCAEXM^^0^B13816393
"BLD",10191,"KRN",9.8,"NM",60,0)
RCTCSPD5^^0^B19971041
"BLD",10191,"KRN",9.8,"NM",61,0)
PRCAWREA^^0^B21495612
"BLD",10191,"KRN",9.8,"NM",62,0)
PRCAFUT^^0^B42447114
"BLD",10191,"KRN",9.8,"NM",63,0)
PRCACPV^^0^B16867430
"BLD",10191,"KRN",9.8,"NM",65,0)
RCDPAPLI^^0^B53951998
"BLD",10191,"KRN",9.8,"NM",67,0)
RCBEUTR1^^0^B37772593
"BLD",10191,"KRN",9.8,"NM",68,0)
RCTCSP7^^0^B5563240
"BLD",10191,"KRN",9.8,"NM","B","PRCAAPR1",19)

"BLD",10191,"KRN",9.8,"NM","B","PRCAATR",44)

"BLD",10191,"KRN",9.8,"NM","B","PRCABD",9)

"BLD",10191,"KRN",9.8,"NM","B","PRCABIL1",8)

"BLD",10191,"KRN",9.8,"NM","B","PRCABJV",51)

"BLD",10191,"KRN",9.8,"NM","B","PRCACM",42)

"BLD",10191,"KRN",9.8,"NM","B","PRCACPV",63)

"BLD",10191,"KRN",9.8,"NM","B","PRCAEXM",59)

"BLD",10191,"KRN",9.8,"NM","B","PRCAFUT",62)

"BLD",10191,"KRN",9.8,"NM","B","PRCAHIS",37)

"BLD",10191,"KRN",9.8,"NM","B","PRCAPCL",11)

"BLD",10191,"KRN",9.8,"NM","B","PRCARPM",20)

"BLD",10191,"KRN",9.8,"NM","B","PRCARPS",48)

"BLD",10191,"KRN",9.8,"NM","B","PRCARPU",46)

"BLD",10191,"KRN",9.8,"NM","B","PRCASVC",55)

"BLD",10191,"KRN",9.8,"NM","B","PRCASVC1",56)

"BLD",10191,"KRN",9.8,"NM","B","PRCAWO1",58)

"BLD",10191,"KRN",9.8,"NM","B","PRCAWREA",61)

"BLD",10191,"KRN",9.8,"NM","B","PRCAXP",1)

"BLD",10191,"KRN",9.8,"NM","B","RCBEADJ",26)

"BLD",10191,"KRN",9.8,"NM","B","RCBEPAYF",57)

"BLD",10191,"KRN",9.8,"NM","B","RCBEUTR1",67)

"BLD",10191,"KRN",9.8,"NM","B","RCDPAPL1",50)

"BLD",10191,"KRN",9.8,"NM","B","RCDPAPLI",65)

"BLD",10191,"KRN",9.8,"NM","B","RCDPBPLI",33)

"BLD",10191,"KRN",9.8,"NM","B","RCDPBPLM",47)

"BLD",10191,"KRN",9.8,"NM","B","RCDPBTLM",34)

"BLD",10191,"KRN",9.8,"NM","B","RCDPRTEX",10)

"BLD",10191,"KRN",9.8,"NM","B","RCDPRTP",2)

"BLD",10191,"KRN",9.8,"NM","B","RCDPRTP0",3)

"BLD",10191,"KRN",9.8,"NM","B","RCDPRTP1",45)

"BLD",10191,"KRN",9.8,"NM","B","RCDPRTP2",4)

"BLD",10191,"KRN",9.8,"NM","B","RCMSITE",7)

"BLD",10191,"KRN",9.8,"NM","B","RCRJRBD",52)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSJR",13)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSP1",12)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSP1A",23)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSP2",14)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSP3",22)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSP4",15)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSP5",21)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSP7",68)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSPD",17)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSPD4",18)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSPD5",60)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSPRS",35)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSPU",16)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSWL",27)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSWL1",28)

"BLD",10191,"KRN",9.8,"NM","B","RCTCSWL2",29)

"BLD",10191,"KRN",9.8,"NM","B","RCTOPD",43)

"BLD",10191,"KRN",9.8,"NM","B","RCTRAN",36)

"BLD",10191,"KRN",9.8,"NM","B","RCWROFF",31)

"BLD",10191,"KRN",9.8,"NM","B","RCXFMSPR",49)

"BLD",10191,"KRN",9.8,"NM","B","RCXFMSUF",24)

"BLD",10191,"KRN",9.8,"NM","B","RCXFMSUR",25)

"BLD",10191,"KRN",9.8,"NM","B","RCXFMSUV",38)

"BLD",10191,"KRN",19,0)
19
"BLD",10191,"KRN",19,"NM",0)
^9.68A^19^16
"BLD",10191,"KRN",19,"NM",4,0)
RCTCSP STOP REACTIVATE REPORT^^0
"BLD",10191,"KRN",19,"NM",5,0)
RCTCSP RECALL REPORT^^0
"BLD",10191,"KRN",19,"NM",6,0)
RCTCSP MENU^^0
"BLD",10191,"KRN",19,"NM",7,0)
RCTCSP BILL REPORT^^0
"BLD",10191,"KRN",19,"NM",8,0)
RCTCSP REJECT REPORT^^0
"BLD",10191,"KRN",19,"NM",9,0)
RCTCSP IAI ERROR CODES LIST^^0
"BLD",10191,"KRN",19,"NM",10,0)
RCTCSP REPORT^^0
"BLD",10191,"KRN",19,"NM",11,0)
RCTCSP RECONCIL REPORT^^0
"BLD",10191,"KRN",19,"NM",12,0)
RCTCSP RECALLB^^0
"BLD",10191,"KRN",19,"NM",13,0)
RCTCSP RECALLD^^0
"BLD",10191,"KRN",19,"NM",14,0)
RCTCSP STOP^^0
"BLD",10191,"KRN",19,"NM",15,0)
PRCAC ENTER EDIT REPAYMENT^^0
"BLD",10191,"KRN",19,"NM",16,0)
RCTCSP RECONCILIATION WORKLIST^^0
"BLD",10191,"KRN",19,"NM",17,0)
RCTCSP IAI REPORT^^0
"BLD",10191,"KRN",19,"NM",18,0)
RCDP TCSP FLAG CONTROL^^4^
"BLD",10191,"KRN",19,"NM",19,0)
PRCAF U ADMIN.RATE^^0
"BLD",10191,"KRN",19,"NM","B","PRCAC ENTER EDIT REPAYMENT",15)

"BLD",10191,"KRN",19,"NM","B","PRCAF U ADMIN.RATE",19)

"BLD",10191,"KRN",19,"NM","B","RCDP TCSP FLAG CONTROL",18)

"BLD",10191,"KRN",19,"NM","B","RCTCSP BILL REPORT",7)

"BLD",10191,"KRN",19,"NM","B","RCTCSP IAI ERROR CODES LIST",9)

"BLD",10191,"KRN",19,"NM","B","RCTCSP IAI REPORT",17)

"BLD",10191,"KRN",19,"NM","B","RCTCSP MENU",6)

"BLD",10191,"KRN",19,"NM","B","RCTCSP RECALL REPORT",5)

"BLD",10191,"KRN",19,"NM","B","RCTCSP RECALLB",12)

"BLD",10191,"KRN",19,"NM","B","RCTCSP RECALLD",13)

"BLD",10191,"KRN",19,"NM","B","RCTCSP RECONCIL REPORT",11)

"BLD",10191,"KRN",19,"NM","B","RCTCSP RECONCILIATION WORKLIST",16)

"BLD",10191,"KRN",19,"NM","B","RCTCSP REJECT REPORT",8)

"BLD",10191,"KRN",19,"NM","B","RCTCSP REPORT",10)

"BLD",10191,"KRN",19,"NM","B","RCTCSP STOP",14)

"BLD",10191,"KRN",19,"NM","B","RCTCSP STOP REACTIVATE REPORT",4)

"BLD",10191,"KRN",19.1,0)
19.1
"BLD",10191,"KRN",19.1,"NM",0)
^9.68A^1^1
"BLD",10191,"KRN",19.1,"NM",1,0)
PRCAF LATE CHARGES^^0
"BLD",10191,"KRN",19.1,"NM","B","PRCAF LATE CHARGES",1)

"BLD",10191,"KRN",101,0)
101
"BLD",10191,"KRN",101,"NM",0)
^9.68A^58^25
"BLD",10191,"KRN",101,"NM",19,0)
PRCA TCSP WORKLIST ACCOUNT PROFILE^^0
"BLD",10191,"KRN",101,"NM",21,0)
PRCA TCSP WORKLIST EXPAND^^0
"BLD",10191,"KRN",101,"NM",23,0)
PRCA TCSP WORKLIST INSURANCE^^0
"BLD",10191,"KRN",101,"NM",24,0)
PRCA TCSP WORKLIST MENU^^0
"BLD",10191,"KRN",101,"NM",25,0)
PRCA TCSP WORKLIST PRINT STATEMENT^^0
"BLD",10191,"KRN",101,"NM",26,0)
PRCA TCSP WORKLIST REMOVE^^0
"BLD",10191,"KRN",101,"NM",27,0)
PRCA TCSP WORKLIST VIEW PATIENT^^0
"BLD",10191,"KRN",101,"NM",31,0)
PRCA TCSP ACCOUNT PROFILE MENU^^0
"BLD",10191,"KRN",101,"NM",36,0)
PRCA TCSP WORKLIST EXPAND MENU PROTOCOL^^0
"BLD",10191,"KRN",101,"NM",37,0)
RCDP ACCOUNT PROFILE SELECT NEW ACCOUNT^^4^
"BLD",10191,"KRN",101,"NM",38,0)
RCDP ACCOUNT PROFILE BILL TRANSACTIONS^^4^
"BLD",10191,"KRN",101,"NM",39,0)
RCDP ACCOUNT PROFILE SELECT STATUS^^4^
"BLD",10191,"KRN",101,"NM",40,0)
RCDP FAST EXIT^^4^
"BLD",10191,"KRN",101,"NM",43,0)
RCDP ACCOUNT PROFILE BILL PROFILE^^4^
"BLD",10191,"KRN",101,"NM",47,0)
RCDP ACCT PROFILE STOP^^0
"BLD",10191,"KRN",101,"NM",48,0)
RCDP ACCT PROFILE TERM FISCAL^^0
"BLD",10191,"KRN",101,"NM",49,0)
RCDP ACCT PROFILE RECALL BILL^^0
"BLD",10191,"KRN",101,"NM",50,0)
RCDP ACCT PROFILE RECALL DEBTOR^^0
"BLD",10191,"KRN",101,"NM",51,0)
RCDP ACCT PROFILE DECREASE TRANS^^0
"BLD",10191,"KRN",101,"NM",52,0)
RCDP ACCT PROFILE INCREASE TRANS^^0
"BLD",10191,"KRN",101,"NM",53,0)
RCDP ACCT PROFILE SUSPEND^^0
"BLD",10191,"KRN",101,"NM",55,0)
VALM BLANK 5^^4^
"BLD",10191,"KRN",101,"NM",56,0)
VALM BLANK 6^^4^
"BLD",10191,"KRN",101,"NM",57,0)
PRCA TCSP WORKLIST CANCEL/EDIT/ADD^^0
"BLD",10191,"KRN",101,"NM",58,0)
RCDP ACCT PROFILE RE-ESTABLISH^^0
"BLD",10191,"KRN",101,"NM","B","PRCA TCSP ACCOUNT PROFILE MENU",31)

"BLD",10191,"KRN",101,"NM","B","PRCA TCSP WORKLIST ACCOUNT PROFILE",19)

"BLD",10191,"KRN",101,"NM","B","PRCA TCSP WORKLIST CANCEL/EDIT/ADD",57)

"BLD",10191,"KRN",101,"NM","B","PRCA TCSP WORKLIST EXPAND",21)

"BLD",10191,"KRN",101,"NM","B","PRCA TCSP WORKLIST EXPAND MENU PROTOCOL",36)

"BLD",10191,"KRN",101,"NM","B","PRCA TCSP WORKLIST INSURANCE",23)

"BLD",10191,"KRN",101,"NM","B","PRCA TCSP WORKLIST MENU",24)

"BLD",10191,"KRN",101,"NM","B","PRCA TCSP WORKLIST PRINT STATEMENT",25)

"BLD",10191,"KRN",101,"NM","B","PRCA TCSP WORKLIST REMOVE",26)

"BLD",10191,"KRN",101,"NM","B","PRCA TCSP WORKLIST VIEW PATIENT",27)

"BLD",10191,"KRN",101,"NM","B","RCDP ACCOUNT PROFILE BILL PROFILE",43)

"BLD",10191,"KRN",101,"NM","B","RCDP ACCOUNT PROFILE BILL TRANSACTIONS",38)

"BLD",10191,"KRN",101,"NM","B","RCDP ACCOUNT PROFILE SELECT NEW ACCOUNT",37)

"BLD",10191,"KRN",101,"NM","B","RCDP ACCOUNT PROFILE SELECT STATUS",39)

"BLD",10191,"KRN",101,"NM","B","RCDP ACCT PROFILE DECREASE TRANS",51)

"BLD",10191,"KRN",101,"NM","B","RCDP ACCT PROFILE INCREASE TRANS",52)

"BLD",10191,"KRN",101,"NM","B","RCDP ACCT PROFILE RE-ESTABLISH",58)

"BLD",10191,"KRN",101,"NM","B","RCDP ACCT PROFILE RECALL BILL",49)

"BLD",10191,"KRN",101,"NM","B","RCDP ACCT PROFILE RECALL DEBTOR",50)

"BLD",10191,"KRN",101,"NM","B","RCDP ACCT PROFILE STOP",47)

"BLD",10191,"KRN",101,"NM","B","RCDP ACCT PROFILE SUSPEND",53)

"BLD",10191,"KRN",101,"NM","B","RCDP ACCT PROFILE TERM FISCAL",48)

"BLD",10191,"KRN",101,"NM","B","RCDP FAST EXIT",40)

"BLD",10191,"KRN",101,"NM","B","VALM BLANK 5",55)

"BLD",10191,"KRN",101,"NM","B","VALM BLANK 6",56)

"BLD",10191,"KRN",409.61,0)
409.61
"BLD",10191,"KRN",409.61,"NM",0)
^9.68A^6^4
"BLD",10191,"KRN",409.61,"NM",1,0)
RCTCSP WORKLIST^^0
"BLD",10191,"KRN",409.61,"NM",2,0)
RCTCSP WORKLIST EXPAND^^0
"BLD",10191,"KRN",409.61,"NM",5,0)
PRCA TCSP ACCOUNT PROFILE^^0
"BLD",10191,"KRN",409.61,"NM",6,0)
RCDP ACCOUNT PROFILE^^0
"BLD",10191,"KRN",409.61,"NM","B","PRCA TCSP ACCOUNT PROFILE",5)

"BLD",10191,"KRN",409.61,"NM","B","RCDP ACCOUNT PROFILE",6)

"BLD",10191,"KRN",409.61,"NM","B","RCTCSP WORKLIST",1)

"BLD",10191,"KRN",409.61,"NM","B","RCTCSP WORKLIST EXPAND",2)

"BLD",10191,"KRN",771,0)
771
"BLD",10191,"KRN",771,"NM",0)
^9.68A^^
"BLD",10191,"KRN",779.2,0)
779.2
"BLD",10191,"KRN",870,0)
870
"BLD",10191,"KRN",8989.51,0)
8989.51
"BLD",10191,"KRN",8989.52,0)
8989.52
"BLD",10191,"KRN",8994,0)
8994
"BLD",10191,"KRN","B",.4,.4)

"BLD",10191,"KRN","B",.401,.401)

"BLD",10191,"KRN","B",.402,.402)

"BLD",10191,"KRN","B",.403,.403)

"BLD",10191,"KRN","B",.5,.5)

"BLD",10191,"KRN","B",.84,.84)

"BLD",10191,"KRN","B",3.6,3.6)

"BLD",10191,"KRN","B",3.8,3.8)

"BLD",10191,"KRN","B",9.2,9.2)

"BLD",10191,"KRN","B",9.8,9.8)

"BLD",10191,"KRN","B",19,19)

"BLD",10191,"KRN","B",19.1,19.1)

"BLD",10191,"KRN","B",101,101)

"BLD",10191,"KRN","B",409.61,409.61)

"BLD",10191,"KRN","B",771,771)

"BLD",10191,"KRN","B",779.2,779.2)

"BLD",10191,"KRN","B",870,870)

"BLD",10191,"KRN","B",8989.51,8989.51)

"BLD",10191,"KRN","B",8989.52,8989.52)

"BLD",10191,"KRN","B",8994,8994)

"BLD",10191,"QDEF")
^^^^NO^^^^YES^^NO
"BLD",10191,"QUES",0)
^9.62^^
"BLD",10191,"REQB",0)
^9.611^21^12
"BLD",10191,"REQB",4,0)
PRCA*4.5*186^2
"BLD",10191,"REQB",11,0)
PRCA*4.5*327^2
"BLD",10191,"REQB",12,0)
PRCA*4.5*318^2
"BLD",10191,"REQB",13,0)
PRCA*4.5*331^2
"BLD",10191,"REQB",14,0)
PRCA*4.5*147^2
"BLD",10191,"REQB",15,0)
PRCA*4.5*322^2
"BLD",10191,"REQB",16,0)
PRCA*4.5*254^2
"BLD",10191,"REQB",17,0)
PRCA*4.5*271^2
"BLD",10191,"REQB",18,0)
PRCA*4.5*274^2
"BLD",10191,"REQB",19,0)
PRCA*4.5*295^2
"BLD",10191,"REQB",20,0)
PRCA*4.5*310^2
"BLD",10191,"REQB",21,0)
PRCA*4.5*307^2
"BLD",10191,"REQB","B","PRCA*4.5*147",14)

"BLD",10191,"REQB","B","PRCA*4.5*186",4)

"BLD",10191,"REQB","B","PRCA*4.5*254",16)

"BLD",10191,"REQB","B","PRCA*4.5*271",17)

"BLD",10191,"REQB","B","PRCA*4.5*274",18)

"BLD",10191,"REQB","B","PRCA*4.5*295",19)

"BLD",10191,"REQB","B","PRCA*4.5*307",21)

"BLD",10191,"REQB","B","PRCA*4.5*310",20)

"BLD",10191,"REQB","B","PRCA*4.5*318",12)

"BLD",10191,"REQB","B","PRCA*4.5*322",15)

"BLD",10191,"REQB","B","PRCA*4.5*327",11)

"BLD",10191,"REQB","B","PRCA*4.5*331",13)

"DATA",343,1,0)
FL 4-480
"DATA",343,1,1,0)
187^^193^193^2931014^^^^
"DATA",343,1,1,1,0)
NOTICE OF INDEBTEDNESS:  According to our records, you are indebted to
"DATA",343,1,1,2,0)
the United States for $|PRCA BALANCE|.  For a complete breakdown of
"DATA",343,1,1,3,0)
this amount, see the enclosed Statement of Charges for Medical Care.
"DATA",343,1,1,4,0)
This indebtedness was caused by |PRCA RESULTING|.
"DATA",343,1,1,5,0)
  
"DATA",343,1,1,6,0)
You can appeal this decision as explained on the enclosed VA Form 1-4107
"DATA",343,1,1,7,0)
Notice of Procedural and Appellate Rights.
"DATA",343,1,1,8,0)
Debts being repaid by installments will be charged interest at an annual
"DATA",343,1,1,9,0)
rate of |PRCA INTEREST|%.  A monthly collecting fee of $|PRCA ADMIN|
"DATA",343,1,1,10,0)
(subject to change annually) may also be charged.  If full payment of the
"DATA",343,1,1,11,0)
debt is received within 30 days, no interest or administrative cost of
"DATA",343,1,1,12,0)
collection fees will be charged and any future benefit payments will not
"DATA",343,1,1,13,0)
be withheld.
"DATA",343,1,1,14,0)
  
"DATA",343,1,1,15,0)
NOTICE OF RIGHTS:  If you do not believe you owe this debt or you think
"DATA",343,1,1,16,0)
the amount is incorrect, you have a right to dispute the debt.  You also
"DATA",343,1,1,17,0)
have the right to request a waiver of the debt and the right to an oral
"DATA",343,1,1,18,0)
hearing on the waiver request.  Waiver means that you will not have to
"DATA",343,1,1,19,0)
pay the debt.  A waiver can only be granted if you were not at
"DATA",343,1,1,20,0)
fault in causing the indebtedness or if any fault on your part is
"DATA",343,1,1,21,0)
excusable, and if payment of the debt would cause a hardship.
"DATA",343,1,1,22,0)
Current or future benefit payments, if any, are subject to withholding
"DATA",343,1,1,23,0)
unless you notify this office, in writing, within 30 days from the
"DATA",343,1,1,24,0)
date of this letter that you wish to dispute the existence or amount
"DATA",343,1,1,25,0)
of the debt or request a waiver. You may do both. You may have an oral
"DATA",343,1,1,26,0)
hearing in connection with your waiver request before a waiver decision
"DATA",343,1,1,27,0)
is made if you request the hearing within the 30-day period.
"DATA",343,1,1,28,0)
Additional information concerning these rights is provided on the enclosed
"DATA",343,1,1,29,0)
Notice of Rights and Obligations.  Please read it carefully.
"DATA",343,1,1,30,0)
  
"DATA",343,1,1,31,0)
REPAYMENT PLAN: Regardless of whether you dispute the debt or request
"DATA",343,1,1,32,0)
waiver, if you cannot repay this debt in full, you should contact us
"DATA",343,1,1,33,0)
within 30 days from the date of this letter to work out a satisfactory
"DATA",343,1,1,34,0)
repayment plan.
"DATA",343,1,1,35,0)
  
"DATA",343,1,1,36,0)
Please make your check or money order payable to the Department of
"DATA",343,1,1,37,0)
Veterans Affairs and send it to the address on the enclosed VA Form
"DATA",343,1,1,38,0)
10-9014 along with the bottom portion of this letter. Please include
"DATA",343,1,1,39,0)
your full name and file number/SSAN on your check or money order to
"DATA",343,1,1,40,0)
insure proper credit.
"DATA",343,1,1,41,0)
  
"DATA",343,1,1,42,0)
If you have any questions concerning this letter, please contact this
"DATA",343,1,1,43,0)
office for assistance.
"DATA",343,1,1,44,0)
  
"DATA",343,1,1,45,0)
Finance Officer
"DATA",343,1,1,46,0)
|TOP|
"DATA",343,1,1,47,0)
  
"DATA",343,1,1,48,0)
                    NOTICE OF RIGHTS AND OBLIGATIONS
"DATA",343,1,1,49,0)
  
"DATA",343,1,1,50,0)
DEBTS OWED THE UNITED STATES GOVERNMENT:  The law requires the Department of
"DATA",343,1,1,51,0)
Veterans Affairs (VA) to collect debts owed the government for medical care.
"DATA",343,1,1,52,0)
When the individual is entitled to benefit payments, the VA is required to
"DATA",343,1,1,53,0)
collect the debt by withholding future benefit payments until the debt is
"DATA",343,1,1,54,0)
paid, except as explained below.  Any current or future VA benefit payments,
"DATA",343,1,1,55,0)
federal salary, lump sum or retirement payments, insurance dividends or
"DATA",343,1,1,56,0)
other payments made under any law administered by the VA may be withheld.
"DATA",343,1,1,57,0)
  
"DATA",343,1,1,58,0)
NOTE:  Whenever this letter states that you have a period of time to take
"DATA",343,1,1,59,0)
some action or to notify us, the period of time begins to run from the date
"DATA",343,1,1,60,0)
appearing on the front of this letter.
"DATA",343,1,1,61,0)
  
"DATA",343,1,1,62,0)
  
"DATA",343,1,1,63,0)
  
"DATA",343,1,1,64,0)
  
"DATA",343,1,1,65,0)
  
"DATA",343,1,1,66,0)
RIGHT TO DISPUTE THE EXISTENCE OR AMOUNT OF THE DEBT:  If you tell us in
"DATA",343,1,1,67,0)
writing within 30 days that you believe that you do not owe this debt or
"DATA",343,1,1,68,0)
that the amount is incorrect, we will not withhold any current or future
"DATA",343,1,1,69,0)
benefit payments until we confirm that you do owe this debt and the amount
"DATA",343,1,1,70,0)
is correct or we determine that the delay required to resolve the dispute
"DATA",343,1,1,71,0)
will jeopardize our ability to collect the full amount of the debt.  You
"DATA",343,1,1,72,0)
should explain to the extent you can why you believe you do not owe the debt
"DATA",343,1,1,73,0)
or why the amount is incorrect.  If our determination of the dispute is
"DATA",343,1,1,74,0)
unfavorable to you, we will consider your statement notifying us of the
"DATA",343,1,1,75,0)
dispute to be a Notice of Disagreement with the decision that you have an
"DATA",343,1,1,76,0)
indebtedness as described in the enclosed VA Form 1-4107, Notice of
"DATA",343,1,1,77,0)
Procedural and Appellate Rights.
"DATA",343,1,1,78,0)
  
"DATA",343,1,1,79,0)
RIGHT TO REQUEST WAIVER OF THE DEBT:  Under certain circumstances, we can
"DATA",343,1,1,80,0)
waive the debt.  This means that you will not be required to pay the amount
"DATA",343,1,1,81,0)
owed.  You are reminded that a discharge of indebtedness, such as a waiver,
"DATA",343,1,1,82,0)
is considered taxable income and must be reported by you to the Internal
"DATA",343,1,1,83,0)
Revenue Service (IRS).  A report of this waiver will be provided by the
"DATA",343,1,1,84,0)
Department of Veterans Affairs to the Internal Revenue Service in accordance
"DATA",343,1,1,85,0)
with IRS regulations.
"DATA",343,1,1,86,0)
  
"DATA",343,1,1,87,0)
To be considered for waiver, you must write to us and request one.  You
"DATA",343,1,1,88,0)
should explain why the debt was not your fault or why any fault on your part
"DATA",343,1,1,89,0)
should be excused.  If you request a waiver, we will ask you for financial
"DATA",343,1,1,90,0)
information to determine hardship.  Hardship is considered only if we find
"DATA",343,1,1,91,0)
that you were not at fault or that your fault was excusable.
"DATA",343,1,1,92,0)
  
"DATA",343,1,1,93,0)
If we do not receive your waiver request within 30 days, we will begin to
"DATA",343,1,1,94,0)
withhold any current or future benefit payments as explained in the covering
"DATA",343,1,1,95,0)
letter.  If you do not request a waiver within 30 days, you may still do so
"DATA",343,1,1,96,0)
at any time within two years.  Withholding of your future benefit payments
"DATA",343,1,1,97,0)
will continue, however, during our consideration of your request.  Any
"DATA",343,1,1,98,0)
withheld amount which is waived will be refunded.
"DATA",343,1,1,99,0)
  
"DATA",343,1,1,100,0)
NOTE:  You can both dispute the debt and request waiver in the same letter
"DATA",343,1,1,101,0)
if you wish.
"DATA",343,1,1,102,0)
 
"DATA",343,1,1,103,0)
|TOP|
"DATA",343,1,1,104,0)
  
"DATA",343,1,1,105,0)
ORAL HEARING ON WAIVER REQUEST:  You may request an oral hearing to present
"DATA",343,1,1,106,0)
evidence or argument on any point in connection with your waiver request.
"DATA",343,1,1,107,0)
If you desire a hearing, you should request it at the same time that you
"DATA",343,1,1,108,0)
submit your written request for waiver so that we can schedule a hearing
"DATA",343,1,1,109,0)
before any decision is made.  If you do not request an oral hearing on your
"DATA",343,1,1,110,0)
waiver request within 30 days, we will begin to withhold your future benefit
"DATA",343,1,1,111,0)
payments after the waiver decision, if unfavorable, is made.  We will notify
"DATA",343,1,1,112,0)
you of the date and time when the hearing will be held.  You may bring
"DATA",343,1,1,113,0)
witnesses to the hearing.  All testimony will be entered into the record.
"DATA",343,1,1,114,0)
The VA will furnish a hearing room, provide hearing officials, and prepare a
"DATA",343,1,1,115,0)
written transcript of the proceedings.  The VA cannot bear any other expense
"DATA",343,1,1,116,0)
of the hearing.
"DATA",343,1,1,117,0)
  
"DATA",343,1,1,118,0)
  
"DATA",343,1,1,119,0)
  
"DATA",343,1,1,120,0)
  
"DATA",343,1,1,121,0)
  
"DATA",343,1,1,122,0)
  
"DATA",343,1,1,123,0)
  
"DATA",343,1,1,124,0)
ADMINISTRATIVE COST OF COLLECTION FEES: The monthly administrative cost of
"DATA",343,1,1,125,0)
collection fee will not be added to your debt if, within 30 days, full
"DATA",343,1,1,126,0)
payment of the debt is received or an acceptable repayment plan is worked
"DATA",343,1,1,127,0)
out.  If an installment repayment plan is worked out and any installment is
"DATA",343,1,1,128,0)
not received by the due date, the monthly administrative cost of collection
"DATA",343,1,1,129,0)
fee will thereafter be charged for the life of the debt.  Other costs of
"DATA",343,1,1,130,0)
collection may also be added to the debt if additional collection actions
"DATA",343,1,1,131,0)
become necessary.
"DATA",343,1,1,132,0)
  
"DATA",343,1,1,133,0)
REPRESENTATION:  You may be represented, without charge, by an accredited
"DATA",343,1,1,134,0)
representative of a veterans' organization or other service organization
"DATA",343,1,1,135,0)
recognized by the Administrator of Veterans Affairs.  You may employ an
"DATA",343,1,1,136,0)
attorney to assist you, for example, an attorney in private practice or a
"DATA",343,1,1,137,0)
legal aid attorney.  The service of an attorney representing you in
"DATA",343,1,1,138,0)
adjudicatory proceedings before VA are subject to a fee limitation as set
"DATA",343,1,1,139,0)
forth in 38 U.S.C. 5904.  If you desire representation, and have not already
"DATA",343,1,1,140,0)
designated a representative, let us know and we will send you the necessary
"DATA",343,1,1,141,0)
forms.
"DATA",343,1,1,142,0)
  
"DATA",343,1,1,143,0)
                 NOTICE OF PROCEDURAL AND APPELLATE RIGHTS
"DATA",343,1,1,144,0)
  
"DATA",343,1,1,145,0)
We have based our decision on the evidence of record in your case and the
"DATA",343,1,1,146,0)
applicable law.  This explains your procedural and appellate rights in
"DATA",343,1,1,147,0)
connection with this decision.
"DATA",343,1,1,148,0)
  
"DATA",343,1,1,149,0)
REPRESENTATION.  You may be represented, without charge, by an accredited
"DATA",343,1,1,150,0)
representative of a veterans organization or other service organization
"DATA",343,1,1,151,0)
recognized by the Administrator of Veterans Affairs, or you may employ an
"DATA",343,1,1,152,0)
attorney to assist you with your claim.  Typical examples of counsel who may
"DATA",343,1,1,153,0)
be available include attorneys in private practice or legal aid services.
"DATA",343,1,1,154,0)
The service of an attorney representing you in adjudicatory proceedings
"DATA",343,1,1,155,0)
before VA are subject to a fee limitation as set forth in 38 U.S.C. 5904.
"DATA",343,1,1,156,0)
If you desire representation, let us know and we will send you the necessary
"DATA",343,1,1,157,0)
forms.  If you have already designated a representative, no further action
"DATA",343,1,1,158,0)
on your part is required.
"DATA",343,1,1,159,0)
  
"DATA",343,1,1,160,0)
NEW EVIDENCE.  You may submit additional evidence to strengthen your claim.
"DATA",343,1,1,161,0)
It is in your interest to send us any new evidence as promptly as possible.
"DATA",343,1,1,162,0)
We will carefully consider it and let you know whether it changes our
"DATA",343,1,1,163,0)
decision.
"DATA",343,1,1,164,0)
  
"DATA",343,1,1,165,0)
|TOP|
"DATA",343,1,1,166,0)
  
"DATA",343,1,1,167,0)
PERSONAL HEARING.  If you desire a personal hearing to present evidence or
"DATA",343,1,1,168,0)
argument on any point of importance in your claim, notify this office and we
"DATA",343,1,1,169,0)
will arrange a time and place for the hearing.  You may bring witnesses if
"DATA",343,1,1,170,0)
you desire and their testimony will be entered in the record.  The VA will
"DATA",343,1,1,171,0)
furnish the hearing room, provide hearing officials, and prepare the
"DATA",343,1,1,172,0)
transcript of the proceedings.  The VA cannot pay any other expenses of the
"DATA",343,1,1,173,0)
hearing, since a personal hearing is not required.
"DATA",343,1,1,174,0)
  
"DATA",343,1,1,175,0)
  
"DATA",343,1,1,176,0)
  
"DATA",343,1,1,177,0)
  
"DATA",343,1,1,178,0)
  
"DATA",343,1,1,179,0)
  
"DATA",343,1,1,180,0)
  
"DATA",343,1,1,181,0)
  
"DATA",343,1,1,182,0)
  
"DATA",343,1,1,183,0)
APPEAL.  You may appeal our decision to the Board of Veterans Appeals at any
"DATA",343,1,1,184,0)
time within one year from the date of this letter if you believe the
"DATA",343,1,1,185,0)
decision is not in accord with the law and the facts now of record.  You can
"DATA",343,1,1,186,0)
start the appeal process by filling a Notice of Disagreement.  You may do
"DATA",343,1,1,187,0)
this by writing a letter to this office stating that you wish to appeal.  If
"DATA",343,1,1,188,0)
more than one benefit is involved, you should identify the benefit or
"DATA",343,1,1,189,0)
benefits for which you are appealing.  If you decide to appeal, we will
"DATA",343,1,1,190,0)
advise you further as to your procedural rights as your claim progresses
"DATA",343,1,1,191,0)
through the several stages of the appeal process.
"DATA",343,1,1,192,0)
  
"DATA",343,1,1,193,0)
NOTE:  For further information about appeals, see VA Pamphlet 1-1.
"DATA",343,1,2)
Ineligible Hospital (1FU)
"DATA",343,2,0)
FL 4-481
"DATA",343,2,1,0)
121^^49^49^2931014^^^^
"DATA",343,2,1,1,0)
NOTICE OF INDEBTEDNESS:  According to our records, you are indebted to
"DATA",343,2,1,2,0)
the United States for $|PRCA BALANCE|.  For a complete breakdown of
"DATA",343,2,1,3,0)
this amount, see the enclosed Statement of Charges for Medical Care.
"DATA",343,2,1,4,0)
This indebtedness was caused by |PRCA RESULTING|.
"DATA",343,2,1,5,0)
  
"DATA",343,2,1,6,0)
Debts being repaid by installments will be charged interest at an annual
"DATA",343,2,1,7,0)
rate of |PRCA INTEREST|%.  A monthly administrative cost of $|PRCA ADMIN|
"DATA",343,2,1,8,0)
(subject to change annually) may also be charged.  If full payment of the
"DATA",343,2,1,9,0)
debt is received within 30 days, no interest or administrative cost of
"DATA",343,2,1,10,0)
collection fees will be charged and any future benefit payments will not
"DATA",343,2,1,11,0)
be withheld.
"DATA",343,2,1,12,0)
  
"DATA",343,2,1,13,0)
DEBTS OWED THE UNITED STATES GOVERNMENT: The law requires the Department
"DATA",343,2,1,14,0)
of Veterans Affairs (VA) to collect debts owed the government because of
"DATA",343,2,1,15,0)
medical care.  When the individual remains entitled to benefits, the VA
"DATA",343,2,1,16,0)
is required to collect the debt by withholding future benefit payments
"DATA",343,2,1,17,0)
until the debt is paid, except as explained below.  Any current or future
"DATA",343,2,1,18,0)
VA benefit payments, final federal salary, lump sum or retirement payments,
"DATA",343,2,1,19,0)
insurance dividends or other payments made under any law administered by
"DATA",343,2,1,20,0)
the VA may be withheld.
"DATA",343,2,1,21,0)
  
"DATA",343,2,1,22,0)
NOTE: Whenever this letter states that you have a period of time to take
"DATA",343,2,1,23,0)
some action or to notify us, the period of time begins to run from the
"DATA",343,2,1,24,0)
date of this letter.
"DATA",343,2,1,25,0)
  
"DATA",343,2,1,26,0)
ADMINISTRATIVE COST OF COLLECTION FEES: The monthly administrative cost of 
"DATA",343,2,1,27,0)
collection fee will not be added to your debt if, within 30 days, full
"DATA",343,2,1,28,0)
payment of the debt is received or an acceptable repayment plan is worked
"DATA",343,2,1,29,0)
out. If an installment repayment plan is worked out and any installment
"DATA",343,2,1,30,0)
is not received by the due date, the monthly administrative cost of
"DATA",343,2,1,31,0)
collection fee will thereafter be charged for the life of the debt.
"DATA",343,2,1,32,0)
 Other costs of collection may also be added to the debt if additional
"DATA",343,2,1,33,0)
collection actions become necessary.
"DATA",343,2,1,34,0)
  
"DATA",343,2,1,35,0)
REPAYMENT PLAN: If you cannot repay this debt in full, you should contact
"DATA",343,2,1,36,0)
us within 30 days from the date of this letter to work out a satisfactory
"DATA",343,2,1,37,0)
repayment plan.
"DATA",343,2,1,38,0)
  
"DATA",343,2,1,39,0)
Please make your check or money order payable to the Department of Veterans
"DATA",343,2,1,40,0)
Affairs and send it to the above address
"DATA",343,2,1,41,0)
with the bottom portion of this letter.  Please include
"DATA",343,2,1,42,0)
your full name and file number/SSAN on your check or money order to
"DATA",343,2,1,43,0)
insure proper credit.
"DATA",343,2,1,44,0)
  
"DATA",343,2,1,45,0)
If you have any questions concerning this letter, please contact this
"DATA",343,2,1,46,0)
office for assistance.
"DATA",343,2,1,47,0)
  
"DATA",343,2,1,48,0)
  
"DATA",343,2,1,49,0)
Finance Officer
"DATA",343,2,2)
Humanitarian (1FU)
"DATA",343,3,0)
FL 4-482
"DATA",343,3,1,0)
^^17^17^2931014^^^^
"DATA",343,3,1,1,0)
We recently called your attention to your indebtedness.  The amount due is 
"DATA",343,3,1,2,0)
$|PRCA BALANCE| Our records indicate that we have not heard from you
"DATA",343,3,1,3,0)
regarding repayment or other settlement of this debt.
"DATA",343,3,1,4,0)
  
"DATA",343,3,1,5,0)
The law requires us to follow certain procedures in collecting amounts
"DATA",343,3,1,6,0)
due the Government.  Therefore, we must caution you that non-payment of
"DATA",343,3,1,7,0)
this debt will result in additional expense to you and may also result
"DATA",343,3,1,8,0)
in personal inconvenience to you.
"DATA",343,3,1,9,0)
  
"DATA",343,3,1,10,0)
The bottom portion of this letter should be returned with your
"DATA",343,3,1,11,0)
remittance.  A self-addressed envelope is enclosed for your convenience.
"DATA",343,3,1,12,0)
  
"DATA",343,3,1,13,0)
If you have recently paid this debt or written to us, thank you and please
"DATA",343,3,1,14,0)
disregard this letter.
"DATA",343,3,1,15,0)
  
"DATA",343,3,1,16,0)
  
"DATA",343,3,1,17,0)
Finance Officer
"DATA",343,3,2)
Ineligible Hospital/Humanitarian (2FU)
"DATA",343,4,0)
FL 4-484
"DATA",343,4,1,0)
^^46^46^3001017^
"DATA",343,4,1,1,0)
We have written to you on several occasions about your debt of
"DATA",343,4,1,2,0)
$|PRCA BALANCE|. This amount consists of $|PRCA PRINCIPAL BALANCE|
"DATA",343,4,1,3,0)
principal, $|PRCA INTEREST BALANCE| interest and $|PRCA ADMIN BALANCE|
"DATA",343,4,1,4,0)
administrative cost of collection fees. It is now urgent that you contact
"DATA",343,4,1,5,0)
this office immediately regarding settlement of the debt.  You may contact
"DATA",343,4,1,6,0)
us at |PRCA AR PHONE| between |PRCA AR HOURS|.
"DATA",343,4,1,7,0)
 
"DATA",343,4,1,8,0)
INVOLUNTARY COLLECTION: The Department of Veterans Affairs (VA) is
"DATA",343,4,1,9,0)
required under 31 U.S.C., chapter 37, subchapter II, to collect debts owed
"DATA",343,4,1,10,0)
to the government.  Since your debt is over 60 days old, unless action is
"DATA",343,4,1,11,0)
taken to satisfy this debt within 30 days your debt may be referred for
"DATA",343,4,1,12,0)
involuntary collection action.  This means any current or future federal
"DATA",343,4,1,13,0)
salary, lump sum or retirement payments, insurance dividends, or other
"DATA",343,4,1,14,0)
payments that are made to you under any law administered by VA may be
"DATA",343,4,1,15,0)
withheld to pay your delinquent debt.  Your debt may be referred to the
"DATA",343,4,1,16,0)
Department of Treasury for collection and/or administrative offset.
"DATA",343,4,1,17,0)
Please read the attachment for specific details regarding this process as
"DATA",343,4,1,18,0)
well as the rights you have under this process.  Any of these actions may
"DATA",343,4,1,19,0)
result in processing fees being charged to you.  Payment checks that are
"DATA",343,4,1,20,0)
canceled because they have not been cashed within one year may be applied
"DATA",343,4,1,21,0)
to offset the indebtedness and not be reissued.  Other involuntary
"DATA",343,4,1,22,0)
collection actions may include the reporting of your delinquent account to
"DATA",343,4,1,23,0)
credit reporting agencies 60 days from the date of this letter. 
"DATA",343,4,1,24,0)
 
"DATA",343,4,1,25,0)
Your debt may be referred to our VA Regional Counsel for appropriate legal
"DATA",343,4,1,26,0)
action within 30 days from the date of this letter.  Unless, you take
"DATA",343,4,1,27,0)
action to pay your debt in full, make satisfactory arrangements to pay by
"DATA",343,4,1,28,0)
installments or submit a reasonable compromise offer, prior to the
"DATA",343,4,1,29,0)
expiration of the 30 days.  This referral will result in a one-time
"DATA",343,4,1,30,0)
administrative charge to you of $|PRCA LITIGATION FEE|.  This charge is in
"DATA",343,4,1,31,0)
addition to the monthly administrative charge of $|PRCA ADMIN|.  The VA
"DATA",343,4,1,32,0)
Regional Counsel has the authority to initiate legal proceeding against
"DATA",343,4,1,33,0)
you.  Court action may result in the addition of U.S. Marshal fees and
"DATA",343,4,1,34,0)
court costs to your debt.
"DATA",343,4,1,35,0)
 
"DATA",343,4,1,36,0)
Please make your check or money order payable to the Department of
"DATA",343,4,1,37,0)
Veterans Affairs and return it to the above address along with the bottom
"DATA",343,4,1,38,0)
portion of this letter.  Please include your full name and file number on
"DATA",343,4,1,39,0)
your check or money order to insure proper credit.  In the event you are
"DATA",343,4,1,40,0)
unable to pay in full immediately, you should contact this office,
"DATA",343,4,1,41,0)
preferably by telephone, to inform me of your intentions for settlement.
"DATA",343,4,1,42,0)
Otherwise, any or all of the above actions may be taken to collect your
"DATA",343,4,1,43,0)
debt.
"DATA",343,4,1,44,0)
 
"DATA",343,4,1,45,0)
Finance Officer
"DATA",343,4,1,46,0)
FL 4-484
"DATA",343,4,2)
Ineligible Hospital/Humanitarian $600.00-$1199.00 (3FU)
"DATA",343,5,0)
IRS OFFSET
"DATA",343,5,1,0)
^^43^43^2980812^
"DATA",343,5,1,1,0)
We have written to you on several occasions about your delinquent debt of
"DATA",343,5,1,2,0)
$|PRCA IRS TOTAL|. It is now urgent that you contact this office
"DATA",343,5,1,3,0)
immediately regarding settlement of the debt.  You have 30 days from the
"DATA",343,5,1,4,0)
date of this letter to pay the debt in full, establish a satisfactory
"DATA",343,5,1,5,0)
repayment plan, or present evidence that all or part of this indebtedness
"DATA",343,5,1,6,0)
is not past due or legally enforceable. If we do not hear from you, we
"DATA",343,5,1,7,0)
will report your debt to the U.S. Department of the Treasury for offset.
"DATA",343,5,1,8,0)
 
"DATA",343,5,1,9,0)
The Debt Collection Improvement Act of 1996 (Public Law 104-134) requires
"DATA",343,5,1,10,0)
the Department of Veterans Affairs (VA) to refer any delinquent debt over
"DATA",343,5,1,11,0)
180 days old to the Treasury Department for potential offset. The Treasury
"DATA",343,5,1,12,0)
Departmment or other designated disbursing official will offset all or a
"DATA",343,5,1,13,0)
portion of what you owe VA from almost any payment that may be issued
"DATA",343,5,1,14,0)
to you by the Federal Government. This could include, but is not limited
"DATA",343,5,1,15,0)
to, social security benefits, federal income tax refunds and federal
"DATA",343,5,1,16,0)
salary or retirement benefits. Referral of your debt to Treasury may
"DATA",343,5,1,17,0)
result in processing fees being charged to you for the referral and for
"DATA",343,5,1,18,0)
each offset made.
"DATA",343,5,1,19,0)
 
"DATA",343,5,1,20,0)
If you have filed for bankruptcy and the automatic stay is in effect, you
"DATA",343,5,1,21,0)
must notify us within 30 days to prevent this debt from being reported to
"DATA",343,5,1,22,0)
the Treasury Department. You should send us proof of your bankruptcy as
"DATA",343,5,1,23,0)
soon as possible. If you file a joint federal income tax return, you
"DATA",343,5,1,24,0)
should obtain IRS Form 8379, Injured Spouse Claim and Allocation, BEFORE
"DATA",343,5,1,25,0)
filing your return. The instructions will explain the steps your spouse
"DATA",343,5,1,26,0)
may take to obtain his or her share of your joint income tax refund.
"DATA",343,5,1,27,0)
 
"DATA",343,5,1,28,0)
Federal employees and annuitants, members of the Armed Forces (including
"DATA",343,5,1,29,0)
National Guard and Reserve) and military retirees are entitled to a
"DATA",343,5,1,30,0)
hearing on the amount of federal salary or retirement benefits to be
"DATA",343,5,1,31,0)
withheld if they do not agree on a repayment schedule. Such a hearing must
"DATA",343,5,1,32,0)
be requested within 15 days of the date of this letter to prevent referral
"DATA",343,5,1,33,0)
of your debt to the Treasury Department.
"DATA",343,5,1,34,0)
 
"DATA",343,5,1,35,0)
NOTICE: The debt(s) included on this bill may not be the only debt(s) you
"DATA",343,5,1,36,0)
are responsible for paying. You may have other active bills with VA, which
"DATA",343,5,1,37,0)
are not eligible for referral to the Treasury Department and are not
"DATA",343,5,1,38,0)
included on this bill.
"DATA",343,5,1,39,0)
  
"DATA",343,5,1,40,0)
If you have additional questions, are in bankruptcy status, or if you wish
"DATA",343,5,1,41,0)
a hearing on the amount of federal salary or retirement benefits that
"DATA",343,5,1,42,0)
might be offset, contact us, immediately, at |PRCA AR PHONE| between
"DATA",343,5,1,43,0)
|PRCA AR HOURS|.
"DATA",343,5,2)
IRS Offset Notice
"DATA",343,6,0)
FL 4-521
"DATA",343,6,1,0)
60^^77^77^2931014^^^^
"DATA",343,6,1,1,0)
NOTICE OF INDEBTEDNESS:  According to our records, you are indebted to the
"DATA",343,6,1,2,0)
United States for |PRCA BALANCE|.  For complete breakdown of this amount,
"DATA",343,6,1,3,0)
see the description of charges below.  This indebtedness was caused by
"DATA",343,6,1,4,0)
 |PRCA RESULTING|.
"DATA",343,6,1,5,0)
  
"DATA",343,6,1,6,0)
This is a debt owed by you to the United States Government. Debts being
"DATA",343,6,1,7,0)
repaid by installments will be charged interest at an annual rate of
"DATA",343,6,1,8,0)
|PRCA INTEREST|%. A monthly administrative cost of collection fee of
"DATA",343,6,1,9,0)
$|PRCA ADMIN| (subject to change annually) may also be charged.
"DATA",343,6,1,10,0)
Further, a penalty charge of |PRCA PENALTY|% (not to exceed 6%
"DATA",343,6,1,11,0)
annually) will be assessed on any account more than 90 days past due.
"DATA",343,6,1,12,0)
If full payment of the debt is received within 30 days, no interest,
"DATA",343,6,1,13,0)
administrative cost of collection fees or penalty charges will be charged.
"DATA",343,6,1,14,0)
  
"DATA",343,6,1,15,0)
If you do not believe you owe this debt or you think the amount is
"DATA",343,6,1,16,0)
incorrect, you have a right to dispute the debt (see attached Notice of
"DATA",343,6,1,17,0)
Rights).  
"DATA",343,6,1,18,0)
  
"DATA",343,6,1,19,0)
Regardless of whether you dispute the debt, if you can not repay debt in
"DATA",343,6,1,20,0)
full you should contact us within 30 days from the date of this letter to
"DATA",343,6,1,21,0)
work out a satisfactory repayment plan.
"DATA",343,6,1,22,0)
  
"DATA",343,6,1,23,0)
Please make your check or money order payable to the Department of Veterans
"DATA",343,6,1,24,0)
Affairs and send it to the address on the receipt attached. Please include
"DATA",343,6,1,25,0)
 your full name and Bill Number on your check or money order  to insure
"DATA",343,6,1,26,0)
 proper credit.
"DATA",343,6,1,27,0)
  
"DATA",343,6,1,28,0)
If you have any questions concerning this letter, please contact this office
"DATA",343,6,1,29,0)
for assistance at |PRCA AR PHONE| between the hours of |PRCA AR HOURS|.
"DATA",343,6,1,30,0)
  
"DATA",343,6,1,31,0)
  
"DATA",343,6,1,32,0)
  
"DATA",343,6,1,33,0)
  
"DATA",343,6,1,34,0)
Finance Officer
"DATA",343,6,1,35,0)
|TOP|
"DATA",343,6,1,36,0)
                     NOTICE OF RIGHTS AND OBLIGATIONS
"DATA",343,6,1,37,0)
  
"DATA",343,6,1,38,0)
  
"DATA",343,6,1,39,0)
DEBTS OWED THE UNITED STATES GOVERNMENT:  The law requires the Department
"DATA",343,6,1,40,0)
of Veterans Affairs (VA) to collect debt owed the government.  When the
"DATA",343,6,1,41,0)
individual or corporation is entitled to payments, the VA is required to
"DATA",343,6,1,42,0)
collect debt by withholding future payments until the debt is paid, except
"DATA",343,6,1,43,0)
as explained below.  Any current or future VA payments or other payments
"DATA",343,6,1,44,0)
made under any law administered by the VA may be withheld.
"DATA",343,6,1,45,0)
  
"DATA",343,6,1,46,0)
NOTE:  Whenever this letter states that you have a period of time to take
"DATA",343,6,1,47,0)
some action or to notify us, the period of time begins to run from the date
"DATA",343,6,1,48,0)
appearing on the front of this letter.
"DATA",343,6,1,49,0)
  
"DATA",343,6,1,50,0)
  
"DATA",343,6,1,51,0)
  
"DATA",343,6,1,52,0)
  
"DATA",343,6,1,53,0)
  
"DATA",343,6,1,54,0)
  
"DATA",343,6,1,55,0)
RIGHT TO DISPUTE THE EXISTENCE OR AMOUNT OF THE DEBT:  If you tell us in
"DATA",343,6,1,56,0)
writing within 30 days that you believe that you do not owe this debt or
"DATA",343,6,1,57,0)
that the amount of the debt is incorrect, we will not withhold any current
"DATA",343,6,1,58,0)
or future federal salary, lump sum or retirement payments until we confirm
"DATA",343,6,1,59,0)
that you are indebted and the amount is correct or we determine that
"DATA",343,6,1,60,0)
the delay required to resolve the dispute will jeopardize our ability to
"DATA",343,6,1,61,0)
collect the full amount of the debt.  You should explain to the extent you
"DATA",343,6,1,62,0)
can why you believe you do not owe the debt or why the amount is incorrect.
"DATA",343,6,1,63,0)
  
"DATA",343,6,1,64,0)
ADMINISTRATIVE COST OF COLLECTION FEES:  The monthly administrative cost of
"DATA",343,6,1,65,0)
collection fee will not be added to your debt if, within 30 days, full
"DATA",343,6,1,66,0)
payment of the debt is received or an acceptable repayment plan is worked
"DATA",343,6,1,67,0)
out.  If an installment repayment plan is worked out and any installment is
"DATA",343,6,1,68,0)
not received by the due date, the monthly administrative cost of collection
"DATA",343,6,1,69,0)
fee will thereafter be charged for the life of the debt.  Other
"DATA",343,6,1,70,0)
costs of collection may also be added to the debt if additional actions
"DATA",343,6,1,71,0)
become necessary.
"DATA",343,6,1,72,0)
  
"DATA",343,6,1,73,0)
PENALTY CHARGES:  The monthly penalty charge will not be added to your debt
"DATA",343,6,1,74,0)
if, within 90 days, full payment of the debt is received or an acceptable
"DATA",343,6,1,75,0)
repayment plan is worked out.  If an acceptable repayment plan is agreed
"DATA",343,6,1,76,0)
upon and you default on that agreement, 90 days after default we will begin
"DATA",343,6,1,77,0)
assessing a penalty charge.
"DATA",343,6,2)
Vendor (1FU)
"DATA",343,7,0)
FL 4-520b
"DATA",343,7,1,0)
^^101^101^2931014^^^^
"DATA",343,7,1,1,0)
NOTICE OF INDEBTEDNESS:  According to our records, you are indebted to the
"DATA",343,7,1,2,0)
United States for $|PRCA BALANCE|.  For complete breakdown of this amount,
"DATA",343,7,1,3,0)
see the description of charges below.  This indebtedness was caused
"DATA",343,7,1,4,0)
by |PRCA RESULTING|.
"DATA",343,7,1,5,0)
  
"DATA",343,7,1,6,0)
NOTICE OF RIGHTS:  If you do not believe you owe this debt or you think the
"DATA",343,7,1,7,0)
amount is incorrect, you have the right to dispute this debt.  You also have
"DATA",343,7,1,8,0)
the right to request a waiver of the debt.  Waiver means that you will not
"DATA",343,7,1,9,0)
have to pay the debt.  Additional information concerning these rights is
"DATA",343,7,1,10,0)
attached to this letter.  PLEASE READ IT CAREFULLY.
"DATA",343,7,1,11,0)
  
"DATA",343,7,1,12,0)
Debts being repaid by installments will be charged interest at an annual
"DATA",343,7,1,13,0)
rate of |PRCA INTEREST|%.  A monthly administrative cost of collection fee
"DATA",343,7,1,14,0)
of $|PRCA ADMIN| (subject to change annually) may also be charged.
"DATA",343,7,1,15,0)
 Further, a penalty charge of |PRCA PENALTY|% (not to exceed 6%
"DATA",343,7,1,16,0)
annually) will be assessed on any account more than 90 days past due.  If
"DATA",343,7,1,17,0)
full payment of the debt is received within 30 days, no interest,
"DATA",343,7,1,18,0)
administrative cost of collection fees or penalty charges will be
"DATA",343,7,1,19,0)
charged.
"DATA",343,7,1,20,0)
  
"DATA",343,7,1,21,0)
REPAYMENT PLAN:  If you are unable to pay the full amount in one payment,
"DATA",343,7,1,22,0)
you should complete the enclosed VA Form 4-5655, Financial Status Report,
"DATA",343,7,1,23,0)
and return with a partial payment and a statement of how you will pay the
"DATA",343,7,1,24,0)
balance. Your plan should indicate the amount you will pay each month and
"DATA",343,7,1,25,0)
the date payment will be made.  Any reasonable plan will receive careful
"DATA",343,7,1,26,0)
consideration.  
"DATA",343,7,1,27,0)
  
"DATA",343,7,1,28,0)
Please make your check or money order payable to the VA and set it to the
"DATA",343,7,1,29,0)
above address along with the bottom portion of this letter.  Please indicate
"DATA",343,7,1,30,0)
your full name and Social Security Number on you check or money order to
"DATA",343,7,1,31,0)
insure proper credit.
"DATA",343,7,1,32,0)
  
"DATA",343,7,1,33,0)
Please disregard this letter if you have recently paid this debt in full.
"DATA",343,7,1,34,0)
  
"DATA",343,7,1,35,0)
  
"DATA",343,7,1,36,0)
  
"DATA",343,7,1,37,0)
  
"DATA",343,7,1,38,0)
Finance Officer
"DATA",343,7,1,39,0)
  
"DATA",343,7,1,40,0)
|TOP|
"DATA",343,7,1,41,0)
  
"DATA",343,7,1,42,0)
                     NOTICE OF RIGHTS AND OBLIGATIONS
"DATA",343,7,1,43,0)
  
"DATA",343,7,1,44,0)
DEBTS OWED THE UNITED STATES GOVERNMENT:  The law requires the Department
"DATA",343,7,1,45,0)
of Veterans Affairs (VA) to collect debt owed the government.  Any current
"DATA",343,7,1,46,0)
or future federal salary, lump sum or retirement payments made by the VA
"DATA",343,7,1,47,0)
or any other federal agency may be withheld.
"DATA",343,7,1,48,0)
  
"DATA",343,7,1,49,0)
NOTE:  Whenever this letter states that you have a period of time to take
"DATA",343,7,1,50,0)
some action or to notify us, the period of time begins to run from the date
"DATA",343,7,1,51,0)
appearing on the front of this letter.
"DATA",343,7,1,52,0)
  
"DATA",343,7,1,53,0)
  
"DATA",343,7,1,54,0)
  
"DATA",343,7,1,55,0)
  
"DATA",343,7,1,56,0)
  
"DATA",343,7,1,57,0)
  
"DATA",343,7,1,58,0)
  
"DATA",343,7,1,59,0)
  
"DATA",343,7,1,60,0)
RIGHT TO DISPUTE THE EXISTENCE OR AMOUNT OF THE DEBT:  If you tell us in
"DATA",343,7,1,61,0)
writing within 30 days that you believe that you do not owe this debt or
"DATA",343,7,1,62,0)
that the amount of the debt is incorrect, we will not withhold any current
"DATA",343,7,1,63,0)
or future federal salary, lump sum or retirement payments until we confirm
"DATA",343,7,1,64,0)
that you are indebted and the amount is correct or we determine that the
"DATA",343,7,1,65,0)
delay required to resolve the dispute will jeopardize our ability to collect
"DATA",343,7,1,66,0)
the full amount of the debt.  You should explain to the extent you can why
"DATA",343,7,1,67,0)
you believe you do not owe the debt or why the amount is incorrect.
"DATA",343,7,1,68,0)
  
"DATA",343,7,1,69,0)
RIGHT TO REQUEST WAIVER OF THE DEBT:  Under certain circumstances, we can
"DATA",343,7,1,70,0)
waive the debt.  This means that you will not be required to pay the amount
"DATA",343,7,1,71,0)
owed.
"DATA",343,7,1,72,0)
  
"DATA",343,7,1,73,0)
To be considered for waiver, you must write to us and request one.  You
"DATA",343,7,1,74,0)
should explain why you believe that the erroneous payment or overpayment
"DATA",343,7,1,75,0)
which created your indebtedness is not your fault.
"DATA",343,7,1,76,0)
  
"DATA",343,7,1,77,0)
If we do not receive your waiver request within 30 days, we will begin to
"DATA",343,7,1,78,0)
withhold 15% of your disposable pay as explained in the covering letter.  If
"DATA",343,7,1,79,0)
you do not request a waiver within 30 days, you may still do so at any time
"DATA",343,7,1,80,0)
within 3 years of the date of discovery of your indebtedness.  Withholding
"DATA",343,7,1,81,0)
of your pay will continue, however, during any consideration of a waiver
"DATA",343,7,1,82,0)
request received after 30 days of the date appearing on the front of this
"DATA",343,7,1,83,0)
letter.  Any withheld amount which is waived will be refunded.
"DATA",343,7,1,84,0)
  
"DATA",343,7,1,85,0)
ADMINISTRATIVE COST OF COLLECTION FEES:  The monthly administrative cost of
"DATA",343,7,1,86,0)
collection fee will not be added to your debt if, within 30 days, full
"DATA",343,7,1,87,0)
payment of the debt is received or an acceptable repayment plan is worked
"DATA",343,7,1,88,0)
out. If an installment repayment plan is worked out and any installment is
"DATA",343,7,1,89,0)
not received by the due date, the monthly administrative cost of collection
"DATA",343,7,1,90,0)
fee will thereafter be charged for the life of the debt.  Other
"DATA",343,7,1,91,0)
costs of collection may also be added to the debt if additional actions
"DATA",343,7,1,92,0)
become necessary.
"DATA",343,7,1,93,0)
  
"DATA",343,7,1,94,0)
PENALTY CHARGES:  The monthly penalty charge will not be added to your debt
"DATA",343,7,1,95,0)
if, within 90 days, full payment of the debt is received or an acceptable
"DATA",343,7,1,96,0)
repayment plan is worked out.  If an acceptable repayment plan is agreed
"DATA",343,7,1,97,0)
upon and you default on that agreement, 90 days after default we will begin
"DATA",343,7,1,98,0)
assessing a penalty charge.
"DATA",343,7,1,99,0)
  
"DATA",343,7,1,100,0)
|TOP|
"DATA",343,7,1,101,0)
  
"DATA",343,7,2)
Ex-Employee (1FU)
"DATA",343,8,0)
FL 4-520a
"DATA",343,8,1,0)
"^^127^127^2931014^^^"^
"DATA",343,8,1,1,0)
NOTICE OF INDEBTEDNESS:  According to our records, you are indebted to the
"DATA",343,8,1,2,0)
United States for $|PRCA BALANCE|.  This indebtedness was caused by
"DATA",343,8,1,3,0)
|PRCA RESULTING|.
"DATA",343,8,1,4,0)
  
"DATA",343,8,1,5,0)
You are hereby notified that unless you make arrangements within 30 days
"DATA",343,8,1,6,0)
from the date of this letter to repay this debt, or notify this office,
"DATA",343,8,1,7,0)
in writing, that you wish to dispute the existence, amount, repayment
"DATA",343,8,1,8,0)
schedule of the debt, request a hearing on such dispute, or request waiver
"DATA",343,8,1,9,0)
(see attached NOTICE OF RIGHTS), we will offset your current pay at a rate
"DATA",343,8,1,10,0)
of 15% of your disposable pay per pay period until the debt is liquidated.
"DATA",343,8,1,11,0)
If you are unable to pay in full and if offset of 15% would cause a
"DATA",343,8,1,12,0)
hardship, you should submit a proposed repayment plan for a lesser
"DATA",343,8,1,13,0)
withholding supported by the properly completed VA Form 4-5655, Financial
"DATA",343,8,1,14,0)
Status Report, which is enclosed for your use.
"DATA",343,8,1,15,0)
  
"DATA",343,8,1,16,0)
Debts being repaid by installments will be charged interest at an annual
"DATA",343,8,1,17,0)
rate of |PRCA INTEREST|%.  A monthly administrative cost of collection fee
"DATA",343,8,1,18,0)
of $|PRCA ADMIN| (subject to change annually) may also be charged.
"DATA",343,8,1,19,0)
Further, a penalty charge of |PRCA PENALTY|% (not to exceed 6%
"DATA",343,8,1,20,0)
annually) will be assessed on any account more than 90 days past due.  If
"DATA",343,8,1,21,0)
full payment of the debt is received within 30 days, no interest,
"DATA",343,8,1,22,0)
administrative cost of collection fees or penalty charges will be
"DATA",343,8,1,23,0)
charged.
"DATA",343,8,1,24,0)
  
"DATA",343,8,1,25,0)
If we do not hear from you within 30 days, we will automatically withhold 15%
"DATA",343,8,1,26,0)
of you disposable pay beginning 30 days past the date of this letter
"DATA",343,8,1,27,0)
until the debt is liquidated.
"DATA",343,8,1,28,0)
If there is a balance remaining after you terminate employment, we will offset
"DATA",343,8,1,29,0)
the balance from your final salary, lump sum payment, CSRS or FERS.
"DATA",343,8,1,30,0)
  
"DATA",343,8,1,31,0)
You are advised that any knowingly false or frivolous statements,
"DATA",343,8,1,32,0)
representatives, or evidence may subject you to:  disciplinary procedures under
"DATA",343,8,1,33,0)
5 U.S.C. ch 75, 5 CFR Part 752, or any other applicable statutes or
"DATA",343,8,1,34,0)
regulations; penalties under the False Claims Act 31 U.S.C. 3729-3731, or any
"DATA",343,8,1,35,0)
other applicable statutory authority; or criminal penalties under 18 U.S.C.
"DATA",343,8,1,36,0)
286, 287, 1001 or any other applicable statutory authority.
"DATA",343,8,1,37,0)
  
"DATA",343,8,1,38,0)
You are also advised that any amounts paid by you or deducted from your pay
"DATA",343,8,1,39,0)
which may be later found not to be owed will be promptly refunded to you.
"DATA",343,8,1,40,0)
Please disregard this letter if you have recently paid this debt in full.
"DATA",343,8,1,41,0)
  
"DATA",343,8,1,42,0)
Finance Officer
"DATA",343,8,1,43,0)
  
"DATA",343,8,1,44,0)
Enclosures
"DATA",343,8,1,45,0)
  
"DATA",343,8,1,46,0)
|TOP|
"DATA",343,8,1,47,0)
                     NOTICE OF RIGHTS AND OBLIGATIONS
"DATA",343,8,1,48,0)
  
"DATA",343,8,1,49,0)
  
"DATA",343,8,1,50,0)
DEBTS OWED THE UNITED STATES GOVERNMENT:  The law requires the Department
"DATA",343,8,1,51,0)
of Veterans Affairs (VA) to collect debts owed the government.  If an
"DATA",343,8,1,52,0)
individual is entitled to receive federal salary payments, the VA is required
"DATA",343,8,1,53,0)
to collect the debt by withholding 15% of disposable pay until the debt is
"DATA",343,8,1,54,0)
paid, except as explained below.  Any current or future federal salary, lump
"DATA",343,8,1,55,0)
sum or retirement payments or other payments made by the VA may be withheld.
"DATA",343,8,1,56,0)
You have the right to inspect or to request a copy of any record relating to
"DATA",343,8,1,57,0)
the debt.
"DATA",343,8,1,58,0)
  
"DATA",343,8,1,59,0)
NOTE:  Whenever this letter states that you have a period of time to take
"DATA",343,8,1,60,0)
some action or to notify us, the period of time begins to run from the date
"DATA",343,8,1,61,0)
appearing on the front of the letter.
"DATA",343,8,1,62,0)
  
"DATA",343,8,1,63,0)
  
"DATA",343,8,1,64,0)
  
"DATA",343,8,1,65,0)
  
"DATA",343,8,1,66,0)
  
"DATA",343,8,1,67,0)
RIGHT TO DISPUTE THE EXISTENCE OR AMOUNT OF THE DEBT:  If you tell us in
"DATA",343,8,1,68,0)
writing within 30 days that you believe that you do not owe this debt or that
"DATA",343,8,1,69,0)
the amount of the debt is incorrect, we will not withhold 15% of your
"DATA",343,8,1,70,0)
disposable pay until we confirm that you are indebted and the amount is
"DATA",343,8,1,71,0)
correct or we determine that the delay required to resolve the dispute will
"DATA",343,8,1,72,0)
jeopardize our ability to collect the full amount of the debt.  You should
"DATA",343,8,1,73,0)
explain to the extent you can why you believe you do not owe the debt or why
"DATA",343,8,1,74,0)
the amount is incorrect.
"DATA",343,8,1,75,0)
  
"DATA",343,8,1,76,0)
RIGHT TO DISPUTE OFFSET SCHEDULE:  If offset of 15% of your disposable pay
"DATA",343,8,1,77,0)
would cause a hardship, you may request a review of the amount of offset.
"DATA",343,8,1,78,0)
Such request for review should be in writing and include a proposed repayment
"DATA",343,8,1,79,0)
schedule supported by a properly completed VA Form 4-5655, Financial Status
"DATA",343,8,1,80,0)
Report, which is enclosed for your use.  If a request for review of the issue
"DATA",343,8,1,81,0)
of the amount of salary offset is received within 30 calendar days from the
"DATA",343,8,1,82,0)
date of this letter, we will take no action to offset your current pay until a
"DATA",343,8,1,83,0)
review has been held.
"DATA",343,8,1,84,0)
  
"DATA",343,8,1,85,0)
RIGHT TO REQUEST A HEARING:  You have the right to request a hearing on the
"DATA",343,8,1,86,0)
existence or amount of the debt and/or the offset scheduled.  Such a request
"DATA",343,8,1,87,0)
should include reasons why you believe a hearing is necessary.  The hearing
"DATA",343,8,1,88,0)
officer has exclusive authority to determine whether a hearing is to be
"DATA",343,8,1,89,0)
conducted in person, or by another method, such as a conference call, or on
"DATA",343,8,1,90,0)
the record, i.e., a paper review.  You will be advised as soon as possible of
"DATA",343,8,1,91,0)
the determination on your hearing request.
"DATA",343,8,1,92,0)
  
"DATA",343,8,1,93,0)
RIGHT TO REQUEST WAIVER OF THE DEBT:  Under certain circumstances, we can
"DATA",343,8,1,94,0)
waive the debt.  This means that you will not be required to pay the amount
"DATA",343,8,1,95,0)
owed.
"DATA",343,8,1,96,0)
  
"DATA",343,8,1,97,0)
To be considered for waiver, you must write to us and request one.  You should
"DATA",343,8,1,98,0)
explain why you believe that the erroneous payment or overpayment which
"DATA",343,8,1,99,0)
created your indebtedness is not your fault.
"DATA",343,8,1,100,0)
  
"DATA",343,8,1,101,0)
If we do not receive your waiver request within 30 days, we will begin to
"DATA",343,8,1,102,0)
withhold 15% of your disposable pay as explained in the covering letter.  If
"DATA",343,8,1,103,0)
you do not request a waiver within 30 days, you may still do so at any time
"DATA",343,8,1,104,0)
within 3 years of the date of discovery of your indebtedness.  Withholding of
"DATA",343,8,1,105,0)
your pay will continue, however, during any consideration of a waiver request
"DATA",343,8,1,106,0)
received after 30 days of the date appearing on the front of this letter.  Any
"DATA",343,8,1,107,0)
withheld amount which is waived will be funded.
"DATA",343,8,1,108,0)
  
"DATA",343,8,1,109,0)
|TOP|
"DATA",343,8,1,110,0)
  
"DATA",343,8,1,111,0)
ADMINISTRATIVE COST OF COLLECTION FEES:  The monthly administrative cost of
"DATA",343,8,1,112,0)
collection fee will not be added to your debt if, within 30 days, full
"DATA",343,8,1,113,0)
payments of the debt is received or an acceptable plan is worked out.
"DATA",343,8,1,114,0)
If an installment repayment plan is worked out and any installment is
"DATA",343,8,1,115,0)
not received by the due date, the monthly administrative cost of collection
"DATA",343,8,1,116,0)
fee will thereafter be charged for the life of the debt.  Other
"DATA",343,8,1,117,0)
costs of collection may also be added to the debt if additional actions become
"DATA",343,8,1,118,0)
necessary.
"DATA",343,8,1,119,0)
  
"DATA",343,8,1,120,0)
PENALTY CHARGES:  The monthly penalty charge will not be added to your
"DATA",343,8,1,121,0)
debt if, within 90 days, full payment of the debt is received or an acceptable
"DATA",343,8,1,122,0)
repayment plan is worked out.  If an acceptable repayment plan is agreed upon
"DATA",343,8,1,123,0)
and you default on that agreement, 90 days after default we will begin
"DATA",343,8,1,124,0)
assessing a penalty charge.
"DATA",343,8,1,125,0)
  
"DATA",343,8,1,126,0)
  
"DATA",343,8,1,127,0)
  
"DATA",343,8,2)
Current Employee (1FU)
"DATA",343,9,0)
FL 4-513
"DATA",343,9,1,0)
64^^63^63^2941011^^^^
"DATA",343,9,1,1,0)
|CENTER("Special Notice to Accompany Patient Statement")|
"DATA",343,9,1,2,0)
  
"DATA",343,9,1,3,0)
Medication Copayment Program:  The medication copayment program was first
"DATA",343,9,1,4,0)
enacted by Congress as Public Law 101-508 on November 5,1990.  The
"DATA",343,9,1,5,0)
Congress has extended medication copayment under Public Law 102-139.
"DATA",343,9,1,6,0)
  
"DATA",343,9,1,7,0)
These laws require the Department of Veterans Affairs (VA) to collect a
"DATA",343,9,1,8,0)
copayment for each 30 day or less supply of medications prescribed for non
"DATA",343,9,1,9,0)
service-connected conditions.  While these funds are not directly returned
"DATA",343,9,1,10,0)
to your VA medical center, they offset the increasing cost of providing
"DATA",343,9,1,11,0)
VA care.
"DATA",343,9,1,12,0)
  
"DATA",343,9,1,13,0)
Means Test Copayments:  Means test copayments and per diems are established
"DATA",343,9,1,14,0)
in sections 1710(f) and 1712(f) of Title 38 U.S.C.  These sections 
"DATA",343,9,1,15,0)
authorize VA to provide care to you on the basis of your agreement to pay
"DATA",343,9,1,16,0)
certain fees for that care.
"DATA",343,9,1,17,0)
  
"DATA",343,9,1,18,0)
Late Charges:  Section 5315 of Title 38 U.S.C. requires VA to assess late 
"DATA",343,9,1,19,0)
charges on balances which remain unpaid. These charges consist of interest
"DATA",343,9,1,20,0)
and administrative fees at rates that are established each year.
"DATA",343,9,1,21,0)
Administrative fees apply to your entire statement whenever any payment
"DATA",343,9,1,22,0)
is late.  Interest fees are charged for any service that remains unpaid.
"DATA",343,9,1,23,0)
Interest charges are calculated from the date of the first statement on
"DATA",343,9,1,24,0)
which the charge appeared through the next statement date.  You can avoid
"DATA",343,9,1,25,0)
these charges by mailing your payment in time for it to arrive by the
"DATA",343,9,1,26,0)
due date shown on your statement.
"DATA",343,9,1,27,0)
  
"DATA",343,9,1,28,0)
Questions about Charges:  If you sent a payment to us in the past 10 days,
"DATA",343,9,1,29,0)
it may not have been applied to your account by the time the statement
"DATA",343,9,1,30,0)
was prepared.  This payment will be reflected in your account on the next
"DATA",343,9,1,31,0)
statement.  Please call the number shown on the statement if you have other
"DATA",343,9,1,32,0)
question about your charges.  We recommend you note the date, name and
"DATA",343,9,1,33,0)
phone number of the individual that you speak to if the call results in
"DATA",343,9,1,34,0)
a change to your account.  Please see the following paragraph relating to
"DATA",343,9,1,35,0)
formal disputes.
"DATA",343,9,1,36,0)
  
"DATA",343,9,1,37,0)
Formal Disputes:  You may dispute the correctness of a charge applied to
"DATA",343,9,1,38,0)
your account.  To do so, you must advise us of the dispute in writing.
"DATA",343,9,1,39,0)
Your letter must be received by VA within 30 days of the date of the 
"DATA",343,9,1,40,0)
statement on which the charge first appeared.  We will suspend further 
"DATA",343,9,1,41,0)
notices concerning the charge while we resolve the question; however, we
"DATA",343,9,1,42,0)
will add interest and, if applicable, administrative charges to your
"DATA",343,9,1,43,0)
account.  We will credit your account for any late charges associated
"DATA",343,9,1,44,0)
with the disputed amount, if the dispute is resolved in your favor.
"DATA",343,9,1,45,0)
  
"DATA",343,9,1,46,0)
Repayment Plans:  If you are unable to make a full payment of the charges,
"DATA",343,9,1,47,0)
you may apply to have the balance placed on a repayment plan.  To avoid
"DATA",343,9,1,48,0)
an administrative charge, you must request the forms needed to establish
"DATA",343,9,1,49,0)
a repayment plan in writing, VA must also receive your request within
"DATA",343,9,1,50,0)
30 days of the date of the statement on which the charge first appears.
"DATA",343,9,1,51,0)
The minimum payment on a repayment plan should be sufficient to pay off
"DATA",343,9,1,52,0)
the balance of your account within 12 months.  If your repayment plan
"DATA",343,9,1,53,0)
is accepted, financing interest charges will be added to your statement
"DATA",343,9,1,54,0)
on any unpaid balance.
"DATA",343,9,1,55,0)
  
"DATA",343,9,1,56,0)
Overdue Charges:  The Federal Claims Collection Standards (4 CFR 102.2)
"DATA",343,9,1,57,0)
requires VA to pursue certain options for charges owed the government 
"DATA",343,9,1,58,0)
for medical care provided to you.  If VA pursues any of these collection 
"DATA",343,9,1,59,0)
options, we will advise you by separate notice.
"DATA",343,9,1,60,0)
  
"DATA",343,9,1,61,0)
PLEASE NOTE:  WHENEVER THE ACCOMPANYING STATEMENT OR THIS NOTICE STATES THAT
"DATA",343,9,1,62,0)
YOU HAVE A PERIOD OF TIME TO TAKE SOME ACTION OR TO NOTIFY US, THE PERIOD
"DATA",343,9,1,63,0)
OF THAT TIME BEGINS TO RUN FROM THE DATE OF THE STATEMENT.
"DATA",343,9,2)
Pharmacy and Means Test (1/2/3 FU)
"DATA",343,10,0)
CREDIT
"DATA",343,10,1,0)
45^^26^26^2931022^^^^
"DATA",343,10,1,1,0)
  
"DATA",343,10,1,2,0)
  
"DATA",343,10,1,3,0)
|CENTER("Credit Balance Notification")|
"DATA",343,10,1,4,0)
  
"DATA",343,10,1,5,0)
Our records show that you have a credit balance.
"DATA",343,10,1,6,0)
  
"DATA",343,10,1,7,0)
The Department of Veterans Affairs will accept prepayments and overpayments
"DATA",343,10,1,8,0)
for copayments and per diems as a convenience to you.  VA, by law, does not
"DATA",343,10,1,9,0)
pay interest on credit balances.  Refunds of credit balances will be issued
"DATA",343,10,1,10,0)
upon written request.  Otherwise, refunds will be issued under the 
"DATA",343,10,1,11,0)
following conditions:
"DATA",343,10,1,12,0)
  
"DATA",343,10,1,13,0)
    If there has been no charging activity on the account within the past
"DATA",343,10,1,14,0)
    60 days, and the credit balance exceeds $25, VA will refund the
"DATA",343,10,1,15,0)
    credit balance.
"DATA",343,10,1,16,0)
  
"DATA",343,10,1,17,0)
  
"DATA",343,10,1,18,0)
  
"DATA",343,10,1,19,0)
  
"DATA",343,10,1,20,0)
    If there has been no charging activity on the account within the past
"DATA",343,10,1,21,0)
    year, the credit balance will be refunded if less than or equal
"DATA",343,10,1,22,0)
    to $25.00.  However, VA will not issue refunds for credit
"DATA",343,10,1,23,0)
    amounts of less than $1.00.
"DATA",343,10,1,24,0)
  
"DATA",343,10,1,25,0)
If you have any questions concerning this letter, please call the number
"DATA",343,10,1,26,0)
shown on the statement.
"DATA",343,10,2)
Notice of Credit Balance
"DATA",343,11,0)
FL 4-483a
"DATA",343,11,1,0)
^^7^7^2931014^^^^
"DATA",343,11,1,1,0)
We have written to you previously about your indebtedness.  The amount due
"DATA",343,11,1,2,0)
 is now $|PRCA BALANCE|. It is now urgent that you contact this office
"DATA",343,11,1,3,0)
 within five days from the date of this letter regarding settlement
"DATA",343,11,1,4,0)
of this debt.
"DATA",343,11,1,5,0)
  
"DATA",343,11,1,6,0)
  
"DATA",343,11,1,7,0)
Finance Officer
"DATA",343,11,2)
Current Employee/Ex-employee/Vendor (2FU)
"DATA",343,12,0)
FL 4-483
"DATA",343,12,1,0)
^^42^42^3001017^
"DATA",343,12,1,1,0)
We have written to you on several occasions about your debt of
"DATA",343,12,1,2,0)
$|PRCA BALANCE|. This amount consists of $|PRCA PRINCIPAL BALANCE|
"DATA",343,12,1,3,0)
principal, $|PRCA INTEREST BALANCE| interest and $|PRCA ADMIN BALANCE|
"DATA",343,12,1,4,0)
administrative cost of collection fees. It is now urgent that you contact
"DATA",343,12,1,5,0)
this office immediately regarding settlement of the debt.  You may contact
"DATA",343,12,1,6,0)
us at |PRCA AR PHONE| between |PRCA AR HOURS|.
"DATA",343,12,1,7,0)
 
"DATA",343,12,1,8,0)
We have authority to accept a lesser amount in full settlement of your
"DATA",343,12,1,9,0)
debt.  Careful consideration will be given to an offer of any reasonable
"DATA",343,12,1,10,0)
amount in relation to your financial status.  A compromise offer will not
"DATA",343,12,1,11,0)
be considered unless accompanied by a properly completed VA Form 4 -5655,
"DATA",343,12,1,12,0)
Financial Status Report.  VA Form 4-5655 is enclosed for this purpose
"DATA",343,12,1,13,0)
along with a self-addressed envelope.
"DATA",343,12,1,14,0)
 
"DATA",343,12,1,15,0)
INVOLUNTARY COLLECTION: The Department of Veterans Affairs (VA) is
"DATA",343,12,1,16,0)
required under 31 U.S.C., chapter 37, subchapter II, to collect debts owed
"DATA",343,12,1,17,0)
to the government.  Since your debt is over 60 days old, unless action is
"DATA",343,12,1,18,0)
taken to satisfy this debt within 30 days your debt may be referred for
"DATA",343,12,1,19,0)
involuntary collection action.  This means any current or future federal
"DATA",343,12,1,20,0)
salary, lump sum or retirement payments, insurance dividends, or other
"DATA",343,12,1,21,0)
payments that are made to you under any law administered by VA may be
"DATA",343,12,1,22,0)
withheld to pay your delinquent debt. Your debt may be referred to the
"DATA",343,12,1,23,0)
Department of Treasury for collection and/or administrative offset.
"DATA",343,12,1,24,0)
Please read the attachment for specific details regarding this process as
"DATA",343,12,1,25,0)
well as the rights you have under this process.  Any of these actions may
"DATA",343,12,1,26,0)
result in processing fees being charged to you.  Payment checks that are
"DATA",343,12,1,27,0)
canceled because they have not been cashed within one year may be applied
"DATA",343,12,1,28,0)
to offset the indebtedness and not be reissued.  Other involuntary
"DATA",343,12,1,29,0)
collection actions may include the reporting of your delinquent account to
"DATA",343,12,1,30,0)
credit reporting agencies 60 days from the date of this letter. 
"DATA",343,12,1,31,0)
 
"DATA",343,12,1,32,0)
Please make your check or money order payable to the Department of
"DATA",343,12,1,33,0)
Veterans Affairs and return it to the above address along with the bottom
"DATA",343,12,1,34,0)
portion of this letter.  Please include your full name and file number on
"DATA",343,12,1,35,0)
your check or money order to insure proper credit.  In the event you are
"DATA",343,12,1,36,0)
unable to pay in full immediately, you should contact this office,
"DATA",343,12,1,37,0)
preferably by telephone, to inform me of your intentions for settlement.
"DATA",343,12,1,38,0)
Otherwise, any or all of the above actions may be taken to collect your
"DATA",343,12,1,39,0)
debt.
"DATA",343,12,1,40,0)
 
"DATA",343,12,1,41,0)
Finance Officer
"DATA",343,12,1,42,0)
FL 4-483
"DATA",343,12,2)
All Debts $25.00-$599.99 (except Pharmacy/Means Test) (3FU)
"DATA",343,13,0)
FL 4-485
"DATA",343,13,1,0)
^^50^50^3001017^
"DATA",343,13,1,1,0)
We have written to you on several occasions about your debt of
"DATA",343,13,1,2,0)
$|PRCA BALANCE|. This amount consists of $|PRCA PRINCIPAL BALANCE|
"DATA",343,13,1,3,0)
principal, $|PRCA INTEREST BALANCE| interest and $|PRCA ADMIN BALANCE|
"DATA",343,13,1,4,0)
administrative cost of collection fees. It is now urgent that you contact
"DATA",343,13,1,5,0)
this office immediately regarding settlement of the debt.  You may contact
"DATA",343,13,1,6,0)
us at |PRCA AR PHONE| between |PRCA AR HOURS|.
"DATA",343,13,1,7,0)
 
"DATA",343,13,1,8,0)
We have authority to accept a lesser amount in full settlement of your
"DATA",343,13,1,9,0)
debt.  Careful consideration will be given to an offer of any reasonable
"DATA",343,13,1,10,0)
amount in relation to your financial status.  A compromise offer will not
"DATA",343,13,1,11,0)
be considered unless accompanied by a properly completed VA Form 4 -5655,
"DATA",343,13,1,12,0)
Financial Status Report.  VA Form 4-5655 is enclosed for this purpose
"DATA",343,13,1,13,0)
along with a self-addressed envelope.
"DATA",343,13,1,14,0)
 
"DATA",343,13,1,15,0)
INVOLUNTARY COLLECTION: The Department of Veterans Affairs (VA) is
"DATA",343,13,1,16,0)
required under 31 U.S.C., chapter 37, subchapter II, to collect debts owed
"DATA",343,13,1,17,0)
to the government.  Since your debt is over 60 days old, unless action is
"DATA",343,13,1,18,0)
taken to satisfy this debt within 30 days your debt may be referred for
"DATA",343,13,1,19,0)
involuntary collection action.  This means any current or future federal
"DATA",343,13,1,20,0)
salary, lump sum or retirement payments, insurance dividends, or other
"DATA",343,13,1,21,0)
payments that are made to you under any law administered by VA may be
"DATA",343,13,1,22,0)
withheld to pay your delinquent debt. Your debt may be referred to the
"DATA",343,13,1,23,0)
Department of Treasury for collection and/or administrative offset.
"DATA",343,13,1,24,0)
Please read the attachment for specific details regarding this process as
"DATA",343,13,1,25,0)
well as the rights you have under this process.  Any of these actions may
"DATA",343,13,1,26,0)
result in processing fees being charged to you.  Payment checks that are
"DATA",343,13,1,27,0)
canceled because they have not been cashed within one year may be applied
"DATA",343,13,1,28,0)
to offset the indebtedness and not be reissued.  Other involuntary
"DATA",343,13,1,29,0)
collection actions may include the reporting of your delinquent account to
"DATA",343,13,1,30,0)
credit reporting agencies 60 days from the date of this letter. 
"DATA",343,13,1,31,0)
 
"DATA",343,13,1,32,0)
Your debt may be referred to the United States Attorney for appropriate
"DATA",343,13,1,33,0)
legal action within 30 days from the date of this letter.  Unless, you
"DATA",343,13,1,34,0)
take action to pay your debt in full, make satisfactory arrangements to
"DATA",343,13,1,35,0)
pay by installments or submit a reasonable compromise offer, prior to the
"DATA",343,13,1,36,0)
expiration of the 30 days.  This referral will result in a one-time
"DATA",343,13,1,37,0)
administrative charge to you of $|PRCA LITIGATION FEE|.  Court action may
"DATA",343,13,1,38,0)
result in the addition of U.S. Marshal fees and court costs to your debt.
"DATA",343,13,1,39,0)
 
"DATA",343,13,1,40,0)
Please make your check or money order payable to the Department of
"DATA",343,13,1,41,0)
Veterans Affairs and return it to the above address along with the bottom
"DATA",343,13,1,42,0)
portion of this letter.  Please include your full name and file number on
"DATA",343,13,1,43,0)
your check or money order to insure proper credit.  In the event you are
"DATA",343,13,1,44,0)
unable to pay in full immediately, you should contact this office,
"DATA",343,13,1,45,0)
preferably by telephone, to inform me of your intentions for settlement.
"DATA",343,13,1,46,0)
Otherwise, any or all of the above actions may be taken to collect your
"DATA",343,13,1,47,0)
debt.
"DATA",343,13,1,48,0)
 
"DATA",343,13,1,49,0)
Finance Officer
"DATA",343,13,1,50,0)
FL 4-485
"DATA",343,13,2)
Emp/Ex-emp/Vendor >$599.99, Inel/Hum. >$1199.00 (3FU)
"DATA",343,14,0)
FL 4-520c
"DATA",343,14,1,0)
^^110^110^2931014^^^^
"DATA",343,14,1,1,0)
NOTICE  OF INDEBTEDNESS:  According to our records, you are indebted to the
"DATA",343,14,1,2,0)
United States for $|PRCA BALANCE|.  This indebtedness was caused
"DATA",343,14,1,3,0)
by |PRCA RESULTING|.
"DATA",343,14,1,4,0)
  
"DATA",343,14,1,5,0)
You are hereby notified that unless you make arrangements within 30 days from
"DATA",343,14,1,6,0)
the date of this letter to repay this debt, or notify this office, in writing,
"DATA",343,14,1,7,0)
that you wish to dispute the existence or amount of the debt, or request
"DATA",343,14,1,8,0)
waiver (see enclosed NOTICE OF RIGHTS), we will offset your current pay until
"DATA",343,14,1,9,0)
the debt is liquidated.  If offset would cause a hardship, you should submit a
"DATA",343,14,1,10,0)
proposed repayment plan for a lesser withholding supported by the properly
"DATA",343,14,1,11,0)
completed VA Form 4-5655, Financial Status Report, which is enclosed for your
"DATA",343,14,1,12,0)
use.
"DATA",343,14,1,13,0)
  
"DATA",343,14,1,14,0)
If full payment of the debt is received within 30 days, no interest,
"DATA",343,14,1,15,0)
administrative cost of collection fees, or penalty charges will be charged.
"DATA",343,14,1,16,0)
If full payment of this debt is not received within 30 days from the date of
"DATA",343,14,1,17,0)
this letter, or the debt is being repaid by installments, you will be charged
"DATA",343,14,1,18,0)
interest at an annual rate of |PRCA INTEREST|%.  A monthly administrative cost of
"DATA",343,14,1,19,0)
collection fee of $|PRCA ADMIN| (subject to change annually) may also be
"DATA",343,14,1,20,0)
charged.  Further, a penalty charge of |PRCA PENALTY|% (not to exceed
"DATA",343,14,1,21,0)
6% annually) will be assessed on any account more than 90 days past due.
"DATA",343,14,1,22,0)
If there is a balance remaining after you terminate employment, we will
"DATA",343,14,1,23,0)
offset the balance of your final salary, lump sum payment, CSRS or FERS.
"DATA",343,14,1,24,0)
  
"DATA",343,14,1,25,0)
You are advised that any knowingly false or frivolous statements,
"DATA",343,14,1,26,0)
representations, or evidence may subject you to:  disciplinary procedures
"DATA",343,14,1,27,0)
under 5 U.S.C. ch 75,5 CFR part 752, or any other applicable statutes or
"DATA",343,14,1,28,0)
regulations; penalties under the False Claims Act 31 U.S.C. 3729-3731, or any
"DATA",343,14,1,29,0)
other applicable statutory authority; or criminal penalties under 18 U.S.C.
"DATA",343,14,1,30,0)
286, 287, 1001, and 1002 or any other statutory authority.
"DATA",343,14,1,31,0)
  
"DATA",343,14,1,32,0)
You are also advised that any amount paid by you or deducted from your pay
"DATA",343,14,1,33,0)
which may be later found not to be owed will be promptly refunded to you.
"DATA",343,14,1,34,0)
Please disregard this letter if you have recently paid this debt in full.
"DATA",343,14,1,35,0)
  
"DATA",343,14,1,36,0)
  
"DATA",343,14,1,37,0)
  
"DATA",343,14,1,38,0)
Finance Officer
"DATA",343,14,1,39,0)
  
"DATA",343,14,1,40,0)
Enclosure
"DATA",343,14,1,41,0)
  
"DATA",343,14,1,42,0)
|TOP|
"DATA",343,14,1,43,0)
  
"DATA",343,14,1,44,0)
                     NOTICE OF RIGHTS AND OBLIGATIONS
"DATA",343,14,1,45,0)
  
"DATA",343,14,1,46,0)
  
"DATA",343,14,1,47,0)
DEBTS OWED THE UNITED STATES GOVERNMENT:  The law requires the Department
"DATA",343,14,1,48,0)
of Veterans Affairs (VA) to collect debts owed the government.  If an
"DATA",343,14,1,49,0)
individual is entitled to receive federal salary payments.  VA is required to
"DATA",343,14,1,50,0)
collect the debt by withholding current pay until the debt is paid, except as
"DATA",343,14,1,51,0)
explained below.  Any current or future federal salary, lump sum or retirement
"DATA",343,14,1,52,0)
payments, or other payments made by VA may be withheld.  You have the right to
"DATA",343,14,1,53,0)
inspect or to request a copy of any record relating to the debt.
"DATA",343,14,1,54,0)
  
"DATA",343,14,1,55,0)
NOTE:  Whenever this letter states that you have a period of time to take
"DATA",343,14,1,56,0)
some action or to notify us, the period of time begins to run from the date
"DATA",343,14,1,57,0)
appearing on the front of this letter.
"DATA",343,14,1,58,0)
  
"DATA",343,14,1,59,0)
RIGHT TO DISPUTE THE EXISTENCE OR AMOUNT OF THIS DEBT:  If you tell us in
"DATA",343,14,1,60,0)
writing within 30 days that you believe that you do not owe this debt or that
"DATA",343,14,1,61,0)
the amount of this debt is incorrect, we will not withhold your current pay
"DATA",343,14,1,62,0)
until we confirm that you are indebted and the amount is correct or we
"DATA",343,14,1,63,0)
determine that the delay required to resolve the dispute will jeopardize our
"DATA",343,14,1,64,0)
ability to collect the full amount of the debt.  You should explain to the
"DATA",343,14,1,65,0)
extent you can, why you believe you do not owe the debt or why the amount is
"DATA",343,14,1,66,0)
incorrect.
"DATA",343,14,1,67,0)
  
"DATA",343,14,1,68,0)
RIGHT TO DISPUTE OFFSET SCHEDULE:  If offset of your current pay would
"DATA",343,14,1,69,0)
cause hardship, you may request a review of the amount offset.  Such request
"DATA",343,14,1,70,0)
for review should be in writing and include a proposed repayment schedule
"DATA",343,14,1,71,0)
supported by a properly completed VA Form 4-5655, Financial Status Report,
"DATA",343,14,1,72,0)
which is enclosed for your use.  If a request for review of the issue of the
"DATA",343,14,1,73,0)
amount of salary offset is received within 30 days calendar days from the date
"DATA",343,14,1,74,0)
of this letter, we will take no action to offset your current pay until a
"DATA",343,14,1,75,0)
review has been made.
"DATA",343,14,1,76,0)
  
"DATA",343,14,1,77,0)
RIGHT TO REQUEST WAIVER OF THE DEBT:  Under certain circumstances, we can
"DATA",343,14,1,78,0)
waive the debt.  This means that you will not be required to pay the amount
"DATA",343,14,1,79,0)
owed.  However, your debt may be considered for waiver only if:  1) the
"DATA",343,14,1,80,0)
advance was made to cover expenses erroneously authorized; 2) you spent the
"DATA",343,14,1,81,0)
advance in reliance on the erroneous travel authorization; and 3) you are
"DATA",343,14,1,82,0)
indebted for the repayment of all or part of the amount advanced, after the
"DATA",343,14,1,83,0)
advance is applied against any legitimate expenses incurred by you.
"DATA",343,14,1,84,0)
  
"DATA",343,14,1,85,0)
To be considered for waiver, you must write to us and request one.  You should
"DATA",343,14,1,86,0)
explain why you believe that you are not at fault in the creation of this
"DATA",343,14,1,87,0)
debt.
"DATA",343,14,1,88,0)
  
"DATA",343,14,1,89,0)
If we do not receive your request within 30 days, we will begin to withhold
"DATA",343,14,1,90,0)
your current pay as explained in the covering letter.  If you do not request a
"DATA",343,14,1,91,0)
waiver within 30 days, you may still do so at any time within 3 years of the
"DATA",343,14,1,92,0)
date of discovery of your indebtedness.  Withholding of your pay will
"DATA",343,14,1,93,0)
continue, however, during any consideration of a waiver request received after
"DATA",343,14,1,94,0)
30 days of the date appearing on the front of this letter.  Any withhold
"DATA",343,14,1,95,0)
amount which is waived will be refunded.
"DATA",343,14,1,96,0)
  
"DATA",343,14,1,97,0)
ADMINISTRATIVE COST OF COLLECTION FEES:  The monthly administrative cost of
"DATA",343,14,1,98,0)
collection fee will not be added to your debt if, within 30 days, full payment
"DATA",343,14,1,99,0)
of the debt is received or an acceptable repayment plan is worked out.
"DATA",343,14,1,100,0)
If an installment repayment plan is worked out and any installment is
"DATA",343,14,1,101,0)
not received by the due date, the monthly administrative cost of collection
"DATA",343,14,1,102,0)
fee will thereafter be charged for the life of the debt.  Other
"DATA",343,14,1,103,0)
costs of collection may also be added to the debt if additional actions
"DATA",343,14,1,104,0)
become necessary.
"DATA",343,14,1,105,0)
  
"DATA",343,14,1,106,0)
PENALTY CHARGES:  The monthly penalty charge will not be added to your
"DATA",343,14,1,107,0)
debt, if within 90 days, full payment of debt is received or an acceptable
"DATA",343,14,1,108,0)
repayment plan is worked out.  If an acceptable plan is agreed upon and you
"DATA",343,14,1,109,0)
default on that agreement, we will begin assessing a penalty charge 90 days
"DATA",343,14,1,110,0)
after default.
"DATA",343,14,2)
Current Employee - Prior 12/28/85 (1FU*)
"DATA",343,15,0)
FL 4-520d
"DATA",343,15,1,0)
^^101^101^2931014^^^^
"DATA",343,15,1,1,0)
NOTICE OF INDEBTEDNESS:  According to our records, you are indebted to the
"DATA",343,15,1,2,0)
United States for $|PRCA BALANCE|.  This indebtedness was caused
"DATA",343,15,1,3,0)
by |PRCA RESULTING|.
"DATA",343,15,1,4,0)
  
"DATA",343,15,1,5,0)
This is a debt owed by you to the United States Government.  Please mail
"DATA",343,15,1,6,0)
your check or money order payable to the Department of Veterans Affairs
"DATA",343,15,1,7,0)
and send it to the address above along with the payment remittance slip
"DATA",343,15,1,8,0)
below.  Please include your full name and SSAN on your check or money order
"DATA",343,15,1,9,0)
to insure proper credit.
"DATA",343,15,1,10,0)
  
"DATA",343,15,1,11,0)
NOTICE OF RIGHTS:  If you do not believe you owe this debt or you think the
"DATA",343,15,1,12,0)
amount is incorrect, you have a right to dispute the debt.  You also have
"DATA",343,15,1,13,0)
the right to request a waiver of the debt.  Waiver means that you will not
"DATA",343,15,1,14,0)
have to pay the debt.  Additional information concerning these rights is
"DATA",343,15,1,15,0)
attached to this letter.  Please read it carefully.
"DATA",343,15,1,16,0)
  
"DATA",343,15,1,17,0)
LATE PAYMENT CHARGES:  If full payment of the debt is received within 30
"DATA",343,15,1,18,0)
days, no interest, administrative cost of collection fees, or penalty
"DATA",343,15,1,19,0)
charges will be charged.  If full payment of this debt is not received
"DATA",343,15,1,20,0)
within 30 days from the date of this letter, you will be charged interest
"DATA",343,15,1,21,0)
at an annual rate of |PRCA INTEREST|%.  A monthly administrative cost of
"DATA",343,15,1,22,0)
collection fee of $|PRCA ADMIN| (subject to change annually) may also
"DATA",343,15,1,23,0)
be charged.  Further, a penalty charge of |PRCA PENALTY|% (not to
"DATA",343,15,1,24,0)
exceed 6% annually) will be assessed on any account more than 90 days past
"DATA",343,15,1,25,0)
due.
"DATA",343,15,1,26,0)
  
"DATA",343,15,1,27,0)
REPAYMENT PLAN:  If you are unable to pay the full amount in one payment,
"DATA",343,15,1,28,0)
you should complete the enclosed VA Form 4-5655, Financial Status Report,
"DATA",343,15,1,29,0)
and return it with a partial payment and a statement of how you will pay the
"DATA",343,15,1,30,0)
balance.  Your plan should indicate the amount you will pay each month and
"DATA",343,15,1,31,0)
the date payment will be made.  any reasonable plan will receive careful
"DATA",343,15,1,32,0)
consideration.  Debts being repaid by installments will be charged interest
"DATA",343,15,1,33,0)
at an annual rate of |PRCA INTEREST|%.
"DATA",343,15,1,34,0)
  
"DATA",343,15,1,35,0)
If you have any questions concerning this letter, please contact this office
"DATA",343,15,1,36,0)
for assistance.
"DATA",343,15,1,37,0)
  
"DATA",343,15,1,38,0)
  
"DATA",343,15,1,39,0)
  
"DATA",343,15,1,40,0)
  
"DATA",343,15,1,41,0)
Finance Officer
"DATA",343,15,1,42,0)
  
"DATA",343,15,1,43,0)
Enclosure
"DATA",343,15,1,44,0)
  
"DATA",343,15,1,45,0)
|TOP|
"DATA",343,15,1,46,0)
                     NOTICE OF RIGHTS AND OBLIGATIONS
"DATA",343,15,1,47,0)
  
"DATA",343,15,1,48,0)
  
"DATA",343,15,1,49,0)
DEBTS OWED THE UNITED STATES GOVERNMENT:  The law requires the Department
"DATA",343,15,1,50,0)
of Veterans Affairs (VA) to collect debts owed the government.  When the
"DATA",343,15,1,51,0)
individual or corporation is entitled to payments, the VA is required to
"DATA",343,15,1,52,0)
collect the debt by withholding future payments until the debt is paid,
"DATA",343,15,1,53,0)
except as explained below.  Any current or future VA payments or other
"DATA",343,15,1,54,0)
payments made under any law administered by the VA may be withheld.  You
"DATA",343,15,1,55,0)
have the right to inspect or to request a copy of any record relating to the
"DATA",343,15,1,56,0)
debt.
"DATA",343,15,1,57,0)
  
"DATA",343,15,1,58,0)
NOTE:  Whenever this letter states that you have a period of time to take
"DATA",343,15,1,59,0)
some action or to notify us, the period of time begins to run from the date
"DATA",343,15,1,60,0)
appearing on the front of this letter.
"DATA",343,15,1,61,0)
  
"DATA",343,15,1,62,0)
RIGHT TO DISPUTE THE EXISTENCE OR AMOUNT OF THIS DEBT:  If you tell us in
"DATA",343,15,1,63,0)
writing within 30 days that you believe that you do not owe this debt or
"DATA",343,15,1,64,0)
that the amount of this debt is incorrect, we will not withhold any current
"DATA",343,15,1,65,0)
or future payments, lump sum, or retirement until we confirm that you do owe
"DATA",343,15,1,66,0)
this debt and the amount is correct or we determine that the delay required
"DATA",343,15,1,67,0)
to resolve the dispute will jeopardize our ability to collect the full
"DATA",343,15,1,68,0)
amount of the debt.  You should explain to the extent that you can, why you
"DATA",343,15,1,69,0)
believe you do not owe the debt or why the amount is incorrect.
"DATA",343,15,1,70,0)
  
"DATA",343,15,1,71,0)
RIGHT TO REQUEST WAIVER OF THE DEBT:  Under certain circumstances, we can
"DATA",343,15,1,72,0)
waive the debt.  This means that you will not be required to pay the amount
"DATA",343,15,1,73,0)
owed.  However, your debt may be considered for waiver only if: 1) the
"DATA",343,15,1,74,0)
advance was made to cover expenses erroneously authorized; 2) you spent the
"DATA",343,15,1,75,0)
advance in reliance on the erroneous travel authorization; and 3) you are
"DATA",343,15,1,76,0)
indebted for the repayment of all or part of the amount advanced, after
"DATA",343,15,1,77,0)
the advance is applied against any legitimate expenses incurred by you.
"DATA",343,15,1,78,0)
  
"DATA",343,15,1,79,0)
To be considered for waiver, you must write to us and request one.  You
"DATA",343,15,1,80,0)
should explain why you believe that you are not at fault in the creation
"DATA",343,15,1,81,0)
of this debt.
"DATA",343,15,1,82,0)
  
"DATA",343,15,1,83,0)
You may request a waiver at any time 3 years of the date of discovery of
"DATA",343,15,1,84,0)
your indebtedness.
"DATA",343,15,1,85,0)
  
"DATA",343,15,1,86,0)
ADMINISTRATIVE COST OF COLLECTION FEES:  The monthly administrative of
"DATA",343,15,1,87,0)
collection fee will not be added to your debt if, within 30 days, full
"DATA",343,15,1,88,0)
payment of the debt is received or an acceptable repayment plan is worked
"DATA",343,15,1,89,0)
out and any installment is not received by the due date, the monthly
"DATA",343,15,1,90,0)
administration cost of collection fee will thereafter by charged for the
"DATA",343,15,1,91,0)
life of the debt.  If an installment repayment plan is worked out and any
"DATA",343,15,1,92,0)
installment is not received by the due date, the monthly administrative cost
"DATA",343,15,1,93,0)
of collection fee will thereafter be charged for the life of the debt.
"DATA",343,15,1,94,0)
Other costs of collection may also be added to the debt if additional
"DATA",343,15,1,95,0)
actions become necessary.
"DATA",343,15,1,96,0)
  
"DATA",343,15,1,97,0)
PENALTY CHARGES:  The monthly penalty charge will not be added your debt,
"DATA",343,15,1,98,0)
if within 90 days, full payment of debt is received or an acceptable
"DATA",343,15,1,99,0)
repayment plan is worked out.  If an acceptable repayment plan is agreed
"DATA",343,15,1,100,0)
upon and you default on that agreement, we will begin assessing a penalty
"DATA",343,15,1,101,0)
charge 90 days after default.
"DATA",343,15,2)
Ex-employee - Prior 12/28/85 (1FU*)
"DATA",343,16,0)
FL 4-534
"DATA",343,16,1,0)
^^94^94^2931014^^^^
"DATA",343,16,1,1,0)
NOTICE OF INDEBTEDNESS:  According to our records, you are indebted to the
"DATA",343,16,1,2,0)
United States for $|PRCA BALANCE|.  This indebtedness was caused
"DATA",343,16,1,3,0)
by |PRCA RESULTING|.
"DATA",343,16,1,4,0)
  
"DATA",343,16,1,5,0)
You are hereby notified that unless you make arrangements within 30 days
"DATA",343,16,1,6,0)
from the date of this letter to repay this debt or notify the office in
"DATA",343,16,1,7,0)
writing that you wish to dispute the existence or amount of the debt, or
"DATA",343,16,1,8,0)
request a hearing on such dispute (see attached Notice of Rights), we will
"DATA",343,16,1,9,0)
ask the Office of Personnel Management (OPM) to offset your retired pay at
"DATA",343,16,1,10,0)
a rate of 50% of your monthly annuity.  If you are unable to pay in full
"DATA",343,16,1,11,0)
and if offset of 50% would cause a hardship, you should submit a
"DATA",343,16,1,12,0)
proposed repayment plan for lesser withholding supported by a properly
"DATA",343,16,1,13,0)
completed VA Form 4-5655, Financial Status Report, which is enclosed
"DATA",343,16,1,14,0)
for your use.
"DATA",343,16,1,15,0)
  
"DATA",343,16,1,16,0)
Debts being repaid by installments will be charged interest at an annual
"DATA",343,16,1,17,0)
rate of |PRCA INTEREST|%.  A monthly administrative cost of collection fee
"DATA",343,16,1,18,0)
of $|PRCA ADMIN| (subject to change annually) may also be charged.
"DATA",343,16,1,19,0)
Further, a penalty charge of |PRCA PENALTY| (not to exceed 6% annually)
"DATA",343,16,1,20,0)
will be assessed  on any account more than 90 days past due.  If full
"DATA",343,16,1,21,0)
payment of the debt is received within 30 days, no interest, administrative
"DATA",343,16,1,22,0)
cost of collection fees or penalty charges will be assessed.
"DATA",343,16,1,23,0)
  
"DATA",343,16,1,24,0)
You are advised that any knowingly false or frivolous statements,
"DATA",343,16,1,25,0)
representation, or evidence may subject you to:  penalties under the False
"DATA",343,16,1,26,0)
Claims Act 31 U.S.C. 3729-3731, or any other applicable statutory authority;
"DATA",343,16,1,27,0)
or criminal penalties under 18 U.S.C. 286, 287, 1001, and 1002 or any other
"DATA",343,16,1,28,0)
applicable statutory authority.
"DATA",343,16,1,29,0)
  
"DATA",343,16,1,30,0)
You are also advised that any amounts paid by you are deducted from your
"DATA",343,16,1,31,0)
retirement pay which may be found not to be owed will be promptly refunded
"DATA",343,16,1,32,0)
to you.
"DATA",343,16,1,33,0)
  
"DATA",343,16,1,34,0)
Please disregard this letter if you have recently written to us or paid this
"DATA",343,16,1,35,0)
debt in full.
"DATA",343,16,1,36,0)
  
"DATA",343,16,1,37,0)
  
"DATA",343,16,1,38,0)
Finance Officer
"DATA",343,16,1,39,0)
  
"DATA",343,16,1,40,0)
Enclosures
"DATA",343,16,1,41,0)
  
"DATA",343,16,1,42,0)
|TOP|
"DATA",343,16,1,43,0)
                     NOTICE OF RIGHTS AND OBLIGATIONS
"DATA",343,16,1,44,0)
  
"DATA",343,16,1,45,0)
  
"DATA",343,16,1,46,0)
DEBTS OWED THE UNITED STATES GOVERNMENT:  The law requires the Department
"DATA",343,16,1,47,0)
of Veterans Affairs (VA) to collect debt owed the government. This includes
"DATA",343,16,1,48,0)
requesting that moneys which are due and payable to a debtor from the Civil
"DATA",343,16,1,49,0)
Service Retirement System (CSRS) or Federal Employees Retirement System
"DATA",343,16,1,50,0)
(FERS) be administratively offset in reasonable amounts in order to collect
"DATA",343,16,1,51,0)
the debt in one full payment or minimal number of payments.
"DATA",343,16,1,52,0)
  
"DATA",343,16,1,53,0)
NOTE: Whenever this letter states that you have a period of time to take
"DATA",343,16,1,54,0)
some action or to notify us, the period of time begins to run from the date
"DATA",343,16,1,55,0)
appearing on the front of this letter.
"DATA",343,16,1,56,0)
  
"DATA",343,16,1,57,0)
RIGHT TO DISPUTE THE EXISTENCE OR AMOUNT OF THE DEBT:  If you tell us in
"DATA",343,16,1,58,0)
writing within 30 days that you believe that you do not owe this debt or
"DATA",343,16,1,59,0)
that the amount of the debt is incorrect, we will not request OPM to
"DATA",343,16,1,60,0)
offset your retired pay until we confirm that you are indebted and the
"DATA",343,16,1,61,0)
amount is correct. You should explain to the extent you can why you
"DATA",343,16,1,62,0)
believe you do not owe the debt or why the amount is incorrect.
"DATA",343,16,1,63,0)
  
"DATA",343,16,1,64,0)
RIGHT TO REQUEST LESSER WITHHOLDING FROM CSRS OR FERS:  If offset of 50% of
"DATA",343,16,1,65,0)
your monthly annuity would cause a hardship, you may request a review of the
"DATA",343,16,1,66,0)
amount of offset.  Such a request for review should be in writing and
"DATA",343,16,1,67,0)
include a proposed repayment schedule supported by a properly completed VA
"DATA",343,16,1,68,0)
Form 4-5655, Financial Status Report, which is enclosed for your use. If a
"DATA",343,16,1,69,0)
request for review of the issue of the amount of offset is received within
"DATA",343,16,1,70,0)
30 calendar days from the date of this letter, we will take no action to
"DATA",343,16,1,71,0)
 offset your current monthly annuity until a review has been held.
"DATA",343,16,1,72,0)
  
"DATA",343,16,1,73,0)
RIGHT TO REQUEST A HEARING:  You have the right to request a hearing on the
"DATA",343,16,1,74,0)
existence or amount of the debt and/or the offset scheduled.  Such a request
"DATA",343,16,1,75,0)
should include reasons why you believe a hearing is necessary.  The hearing
"DATA",343,16,1,76,0)
officer has exclusive authority to determine whether a hearing is to be
"DATA",343,16,1,77,0)
conducted in person, or by another method, such as a conference call, or on
"DATA",343,16,1,78,0)
the record, i.e., paper review.  You will be advised as soon as possible of
"DATA",343,16,1,79,0)
the determination on your hearing request.
"DATA",343,16,1,80,0)
  
"DATA",343,16,1,81,0)
ADMINISTRATIVE COST OF COLLECTION FEES:  The monthly administrative cost of
"DATA",343,16,1,82,0)
collection fee will not be added to your debt if, within 30 days, full
"DATA",343,16,1,83,0)
payment off the debt is received or an acceptable repayment plan is worked
"DATA",343,16,1,84,0)
out.  If an installment repayment plan is worked out and any installment is
"DATA",343,16,1,85,0)
not received by the due date, the monthly administrative cost of collection
"DATA",343,16,1,86,0)
fee will thereafter be charged for the life of the debt.  Other
"DATA",343,16,1,87,0)
cost of collection may also be added to the debt if additional collection
"DATA",343,16,1,88,0)
actions become necessary.
"DATA",343,16,1,89,0)
  
"DATA",343,16,1,90,0)
PENALTY CHARGES:  The monthly penalty charge will not be added to your debt
"DATA",343,16,1,91,0)
if, within 90 days, full payment of the debt is received or an acceptable
"DATA",343,16,1,92,0)
repayment plan is worked out.  If an acceptable repayment plan is agreed
"DATA",343,16,1,93,0)
upon and you default on that agreement, 90 days after default we will begin
"DATA",343,16,1,94,0)
assessing a penalty charge.
"DATA",343,16,2)
Ex-employee/Post Retirement (1FU*)
"DATA",343,17,0)
FL 4-513w
"DATA",343,17,1,0)
^^100^100^2941011^^^^
"DATA",343,17,1,1,0)
|CENTER("Special Notice to Accompany Patient Statement")|
"DATA",343,17,1,2,0)
 
"DATA",343,17,1,3,0)
Medication Copayment Program:  The medication copayment program was first
"DATA",343,17,1,4,0)
enacted by Congress as Public Law 101-508 on November 5,1990.  The
"DATA",343,17,1,5,0)
Congress has extended medication copayment under Public Law 102-139.
"DATA",343,17,1,6,0)
 
"DATA",343,17,1,7,0)
These laws require the Department of Veterans Affairs (VA) to collect a
"DATA",343,17,1,8,0)
copayment for each 30 day or less supply of medications prescribed for non
"DATA",343,17,1,9,0)
service-connected conditions.  While these funds are not directly returned
"DATA",343,17,1,10,0)
to your VA medical center, they offset the increasing cost of providing
"DATA",343,17,1,11,0)
VA care.
"DATA",343,17,1,12,0)
 
"DATA",343,17,1,13,0)
Means Test Copayments:  Means test copayments and per diems are established
"DATA",343,17,1,14,0)
in sections 1710(f) and 1712(f) of Title 38 U.S.C.  These sections
"DATA",343,17,1,15,0)
authorize VA to provide care to you on the basis of your agreement to pay
"DATA",343,17,1,16,0)
certain fees for that care.
"DATA",343,17,1,17,0)
 
"DATA",343,17,1,18,0)
Late Charges:  Section 5315 of Title 38 U.S.C. requires VA to assess late
"DATA",343,17,1,19,0)
charges on balances which remain unpaid. These charges consist of interest
"DATA",343,17,1,20,0)
and administrative fees at rates that are established each year.
"DATA",343,17,1,21,0)
Administrative fees apply to your entire statement whenever any payment
"DATA",343,17,1,22,0)
is late.  Interest fees are charged for any service that remains unpaid.
"DATA",343,17,1,23,0)
Interest charges are calculated from the date of the first statement on
"DATA",343,17,1,24,0)
which the charge appeared through the next statement date.  You can avoid
"DATA",343,17,1,25,0)
these charges by mailing your payment in time for it to arrive by the
"DATA",343,17,1,26,0)
due date shown on your statement.
"DATA",343,17,1,27,0)
 
"DATA",343,17,1,28,0)
Questions about Charges:  If you sent a payment to us in the past 10 days,
"DATA",343,17,1,29,0)
it may not have been applied to your account by the time the statement
"DATA",343,17,1,30,0)
was prepared.  This payment will be reflected in your account on the next
"DATA",343,17,1,31,0)
statement.  Please call the number shown on the statement if you have other
"DATA",343,17,1,32,0)
question about your charges.  We recommend you note the date, name and
"DATA",343,17,1,33,0)
phone number of the individual that you speak to if the call results in
"DATA",343,17,1,34,0)
a change to your account.  Please see the following paragraph relating to
"DATA",343,17,1,35,0)
formal disputes.
"DATA",343,17,1,36,0)
 
"DATA",343,17,1,37,0)
Formal Disputes:  You may dispute the correctness of a charge applied to
"DATA",343,17,1,38,0)
your account.  To do so, you must advise us of the dispute in writing.
"DATA",343,17,1,39,0)
Your letter must be received by VA within 30 days of the date of the
"DATA",343,17,1,40,0)
statement on which the charge first appeared.  We will suspend further
"DATA",343,17,1,41,0)
notices concerning the charge while we resolve the question; however, we
"DATA",343,17,1,42,0)
will add interest and, if applicable, administrative charges to your
"DATA",343,17,1,43,0)
account.  We will credit your account for any late charges associated
"DATA",343,17,1,44,0)
with the disputed amount, if the dispute is resolved in your favor.
"DATA",343,17,1,45,0)
 
"DATA",343,17,1,46,0)
Repayment Plans:  If you are unable to make a full payment of the charges,
"DATA",343,17,1,47,0)
you may apply to have the balance placed on a repayment plan.  To avoid
"DATA",343,17,1,48,0)
an administrative charge, you must request the forms needed to establish
"DATA",343,17,1,49,0)
a repayment plan in writing, VA must also receive your request within
"DATA",343,17,1,50,0)
30 days of the date of the statement on which the charge first appears.
"DATA",343,17,1,51,0)
The minimum payment on a repayment plan should be sufficient to pay off
"DATA",343,17,1,52,0)
the balance of your account within 12 months.  If your repayment plan
"DATA",343,17,1,53,0)
is accepted, financing interest charges will be added to your statement
"DATA",343,17,1,54,0)
on any unpaid balance.
"DATA",343,17,1,55,0)
 
"DATA",343,17,1,56,0)
Overdue Charges:  The Federal Claims Collection Standards (4 CFR 102.2)
"DATA",343,17,1,57,0)
requires VA to pursue certain options for charges owed the government
"DATA",343,17,1,58,0)
for medical care provided to you.  If VA pursues any of these collection
"DATA",343,17,1,59,0)
options, we will advise you by separate notice.
"DATA",343,17,1,60,0)
 
"DATA",343,17,1,61,0)
PLEASE NOTE:  WHENEVER THE ACCOMPANYING STATEMENT OR THIS NOTICE STATES THAT
"DATA",343,17,1,62,0)
YOU HAVE A PERIOD OF TIME TO TAKE SOME ACTION OR TO NOTIFY US, THE PERIOD
"DATA",343,17,1,63,0)
OF THAT TIME BEGINS TO RUN FROM THE DATE OF THE STATEMENT.
"DATA",343,17,1,64,0)
|TOP|
"DATA",343,17,1,65,0)
 
"DATA",343,17,1,66,0)
Waiver of Medication Copayment Charges:  You may request a waiver of your
"DATA",343,17,1,67,0)
medication copayment charges.  You may also request an oral hearing on the
"DATA",343,17,1,68,0)
waiver request.  However, your right to request a waiver does not apply to
"DATA",343,17,1,69,0)
the means test copayment or the per diem charges applied to inpatient stays.
"DATA",343,17,1,70,0)
A waiver means that all or part of the charges may be forgiven.  Under
"DATA",343,17,1,71,0)
certain circumstances, related to your inability to pay medication copayment
"DATA",343,17,1,72,0)
charges because of financial hardship, we can grant a request to waive all
"DATA",343,17,1,73,0)
or a portion of these charges.  Your right to request a waiver only lasts
"DATA",343,17,1,74,0)
for 180 calendar days from the initial notification of your waiver rights
"DATA",343,17,1,75,0)
associated with the specific debt in question.  For charges incurred prior 
"DATA",343,17,1,76,0)
to the first statement on which this notice appears, the 180 day limit
"DATA",343,17,1,77,0)
applies from the date of the initial notification of your right to request 
"DATA",343,17,1,78,0)
a waiver. Your waiver request must be in writing and any request for oral 
"DATA",343,17,1,79,0)
hearing must be included in the written request.  A waiver cannot be
"DATA",343,17,1,80,0)
granted if there is fraud, misrepresentation or bad faith on your part 
"DATA",343,17,1,81,0)
in connection with your representation of your financial status.  In 
"DATA",343,17,1,82,0)
establishing financial hardship, the VA will apply the same rules it uses 
"DATA",343,17,1,83,0)
to establish an exemption to medication copayments, except that these 
"DATA",343,17,1,84,0)
rules can be applied to current and anticipated income rather than prior 
"DATA",343,17,1,85,0)
year income. By definition, waiver requests can only be considered for 
"DATA",343,17,1,86,0)
debts previously incurred and cannot be granted prospectively.
"DATA",343,17,1,87,0)
 
"DATA",343,17,1,88,0)
REPRESENTATION:  You may be represented, without charge, by an accredited 
"DATA",343,17,1,89,0)
representative of a veterans' organization or other service organization
"DATA",343,17,1,90,0)
recognized by the Secretary of Veterans Affairs.  You may employ an
"DATA",343,17,1,91,0)
attorney to assist you, for example, an  attorney in private practice or a
"DATA",343,17,1,92,0)
legal aid attorney.  The services of an attorney representing you in 
"DATA",343,17,1,93,0)
adjudicatory proceedings before VA are subject to a fee limitation 
"DATA",343,17,1,94,0)
as set forth in 38 U.S.C. 5904.  If you desire representation and have 
"DATA",343,17,1,95,0)
not already designated a representative, let us know and we will send 
"DATA",343,17,1,96,0)
you the necessary forms.  If an attorney or accredited agent represents
"DATA",343,17,1,97,0)
you before VA, a copy of any agreement between you and the attorney or 
"DATA",343,17,1,98,0)
accredited agtent about the payment of the attorney's or agent's fees
"DATA",343,17,1,99,0)
must be filed at the following address: Counsel to the Chairman (01C3), 
"DATA",343,17,1,100,0)
Board of Veterans Appeals, 810 Vermont Avenue N.W., Washington D.C. 20420.
"DATA",343,17,2)
Patient Statement Rights (Waiver)
"DATA",343,18,0)
TOP ATTACHMENT LETTER
"DATA",343,18,1,0)
^^49^49^2990618^
"DATA",343,18,1,1,0)
This is additional information for you about the possible referral of
"DATA",343,18,1,2,0)
debts to the Department of Treasury.
"DATA",343,18,1,3,0)
 
"DATA",343,18,1,4,0)
If we do not hear from you, we will report your debt to the U.S.
"DATA",343,18,1,5,0)
Department of the Treasury for cross-servicing and/or the Treasury Offset
"DATA",343,18,1,6,0)
Program (TOP).  Additionally, you will be responsible for any and all fees
"DATA",343,18,1,7,0)
associated with cross servicing and the offset program.
"DATA",343,18,1,8,0)
 
"DATA",343,18,1,9,0)
Once your debt is submitted for cross-servicing, the U.S. Department of
"DATA",343,18,1,10,0)
Treasury may refer your debt to a private collection agency for collection
"DATA",343,18,1,11,0)
action, report your debt to a credit bureau and if the debt is written
"DATA",343,18,1,12,0)
off, report it to IRS as potential taxable income.
"DATA",343,18,1,13,0)
 
"DATA",343,18,1,14,0)
If your debt is submitted to the TOP, the U.S. Department of Treasury will
"DATA",343,18,1,15,0)
reduce or withhold any of your eligible Federal payments by the amount of
"DATA",343,18,1,16,0)
your debt.  The Debt Collection Act of 1982 and the Debt Collection
"DATA",343,18,1,17,0)
Improvement Act of 1996 authorize this process, known as offset.  Federal
"DATA",343,18,1,18,0)
payments eligible for offset include:
"DATA",343,18,1,19,0)
        .  Your income tax refunds
"DATA",343,18,1,20,0)
        .  Your Federal salary pay, including military pay
"DATA",343,18,1,21,0)
        .  Your Federal retirement, including military retirement pay
"DATA",343,18,1,22,0)
        .  Your contractor/vendor payments
"DATA",343,18,1,23,0)
        .  Certain Federal benefit payments, such as Social Security
"DATA",343,18,1,24,0)
           (other than Supplemental Security Income (SSI)), Railroad
"DATA",343,18,1,25,0)
           Retirement (other than tier 2), and Black Lung (part B)
"DATA",343,18,1,26,0)
           benefits
"DATA",343,18,1,27,0)
        .  Other Federal payments, including certain loans to you, that
"DATA",343,18,1,28,0)
           are not exempt from offset
"DATA",343,18,1,29,0)
 
"DATA",343,18,1,30,0)
If you have filed for bankruptcy and the automatic stay is in effect, you
"DATA",343,18,1,31,0)
must notify us within 30 days to prevent this debt from being reported to
"DATA",343,18,1,32,0)
the Treasury Department.  You should send us proof of your bankruptcy.  If
"DATA",343,18,1,33,0)
you file a joint federal income tax return, you should obtain IRS Form
"DATA",343,18,1,34,0)
8379, Injured Spouse Claim and Allocation, BEFORE filing your return.  The
"DATA",343,18,1,35,0)
instructions will explain the steps your spouse may take to obtain his/her
"DATA",343,18,1,36,0)
share of your joint income tax refund.
"DATA",343,18,1,37,0)
 
"DATA",343,18,1,38,0)
If you are or become a Federal Employee, your current net disposable pay
"DATA",343,18,1,39,0)
is subject to offset if you do not pay your debt or take other action as
"DATA",343,18,1,40,0)
described on the previous page.  Under the TOP, the U.S. Treasury will
"DATA",343,18,1,41,0)
deduct up to 15% of your disposable pay, beginning in the pay period that
"DATA",343,18,1,42,0)
your debt is submitted to the TOP.  This deduction will continue every pay
"DATA",343,18,1,43,0)
period until your debt, including interest, penalties and other costs, is
"DATA",343,18,1,44,0)
paid in full.
"DATA",343,18,1,45,0)
 
"DATA",343,18,1,46,0)
You are entitled to a hearing to dispute the amount of the payroll
"DATA",343,18,1,47,0)
deduction.  To request a hearing, you must file a written request for a
"DATA",343,18,1,48,0)
hearing no later than 15 days from the date of this letter to prevent
"DATA",343,18,1,49,0)
referral of your debt to the Treasury Department.
"DATA",343,18,2)
Treasury letter to be attached to 3rd demand letter
"DATA",343,19,0)
BENEFICIARY TRAVEL NOTICE
"DATA",343,19,1,0)
S ^343.01^135^135^3161121^S ^S ^S ^
"DATA",343,19,1,1,0)
|TOP|NOTICE OF RIGHTS AND RESPONSIBILITIES
"DATA",343,19,1,2,0)
__________________________________________________________________________     
"DATA",343,19,1,3,0)
COLLECTION:  The U.S. Department of Veterans Affairs (VA) is required to       
"DATA",343,19,1,4,0)
collect debts owed to the government.  Action must be taken within sixty       
"DATA",343,19,1,5,0)
(60) days from the initial billing statement to pay your debt in full or       
"DATA",343,19,1,6,0)
establish a payment plan or your account may be referred for further           
"DATA",343,19,1,7,0)
collection action.  You have the right to inspect and copy the records         
"DATA",343,19,1,8,0)
related to the debt.  You also have the right to establish a payment plan.     
"DATA",343,19,1,9,0)
You have the right to submit a compromise offer.  You have the right to        
"DATA",343,19,1,10,0)
request a waiver and a hearing on the waiver request.  Collection action      
"DATA",343,19,1,11,0)
includes referring your delinquent balance to the Department of               
"DATA",343,19,1,12,0)
Treasury's Treasury Offset Program, which will include offset of any          
"DATA",343,19,1,13,0)
federal and state payments to which you are entitled.  This includes tax      
"DATA",343,19,1,14,0)
refunds, social security benefits and salary or retirement benefits.          
"DATA",343,19,1,15,0)
_________________________________________________________________________     
"DATA",343,19,1,16,0)
PAY YOUR BILL:  Pay the debt in full by the balance due date on the
"DATA",343,19,1,17,0)
initial billing statement to avoid late charges and collection action:
"DATA",343,19,1,18,0)
    In Person: At your local Veteran Affairs Medical Center's Agent
"DATA",343,19,1,19,0)
               Cashier's Office
"DATA",343,19,1,20,0)
    By Phone:  (see below for local information)
"DATA",343,19,1,21,0)
    By Mail:   (see below for local information)
"DATA",343,19,1,22,0)
__________________________________________________________________________
"DATA",343,19,1,23,0)
LATE CHARGES:  The VA is required to assess late charges on balances which
"DATA",343,19,1,24,0)
remain unpaid thirty (30) days after the statement date.  These charges
"DATA",343,19,1,25,0)
consist of interest and administrative fees at rates established each
"DATA",343,19,1,26,0)
year.  Interest will be charged from the date charges first appear on the
"DATA",343,19,1,27,0)
statement. You can avoid these charges by making timely payments by the
"DATA",343,19,1,28,0)
balance due date on the statement.  A monthly administrative cost or
"DATA",343,19,1,29,0)
collection fee will be added to your debt if, within thirty (30) days of
"DATA",343,19,1,30,0)
the date of the statement on which charges first appear, full payment of
"DATA",343,19,1,31,0)
the debt is not received or a repayment plan agreement is not approved.
"DATA",343,19,1,32,0)
If an installment repayment plan is established and any installment is not
"DATA",343,19,1,33,0)
received by the due date, the monthly administrative cost or collection
"DATA",343,19,1,34,0)
fee will thereafter be charged until the debt is paid.  Other collection
"DATA",343,19,1,35,0)
costs may be added to the debt if additional collection actions become 
"DATA",343,19,1,36,0)
necessary.
"DATA",343,19,1,37,0)
__________________________________________________________________________
"DATA",343,19,1,38,0)
WAIVER:  You have the right to request a waiver of part or all of your
"DATA",343,19,1,39,0)
debt.  If the waiver is granted you will not be required to pay the amount
"DATA",343,19,1,40,0)
waived.  To do so, submit an explanation and a completed Financial Status
"DATA",343,19,1,41,0)
Report (VA Form 5655) found at:  www.domain.ext/vaforms/va/pdf/VA5655.pdf.
"DATA",343,19,1,42,0)
Your explanation should include why you are not responsible for the debt
"DATA",343,19,1,43,0)
and any undue hardship the payment of the debt would cause you.  You have
"DATA",343,19,1,44,0)
the right to request a hearing in connection with your request for a
"DATA",343,19,1,45,0)
waiver.  To do so, submit a written request for hearing with your waiver
"DATA",343,19,1,46,0)
request.  VA will notify you of the date, time and place where the hearing
"DATA",343,19,1,47,0)
will be held.  Refer to the "Customer Service" and "Submitting Your
"DATA",343,19,1,48,0)
Request" sections below for more information.
"DATA",343,19,1,49,0)
__________________________________________________________________________
"DATA",343,19,1,50,0)
COMPROMISE OFFER:  You have the right to request a compromise.  A
"DATA",343,19,1,51,0)
compromise means you may propose a lesser amount as full settlement of the
"DATA",343,19,1,52,0)
debt.  To request a compromise, submit your request in writing to VA,
"DATA",343,19,1,53,0)
specifying the dollar amount you are proposing VA should accept as payment
"DATA",343,19,1,54,0)
in full, and a completed Financial Status Report (VA Form 5655) found at:
"DATA",343,19,1,55,0)
www.domain.ext/vaforms/va/pdf/VA5655.pdf.  Refer to the "Customer Service"
"DATA",343,19,1,56,0)
and "Submitting Your Request" sections below for more information.
"DATA",343,19,1,57,0)
__________________________________________________________________________
"DATA",343,19,1,58,0)
REPAYMENT PLAN:  You have the right to establish a monthly repayment plan
"DATA",343,19,1,59,0)
at any time during your enrollment in VA health care if you cannot pay
"DATA",343,19,1,60,0)
your debt in full.  To do so, submit a completed Agreement to Pay
"DATA",343,19,1,61,0)
Indebtedness (VA Form 1100) found at:
"DATA",343,19,1,62,0)
www.domain.ext/vaforms/va/pdf/VA1100.pdf.  Indicate your proposed monthly
"DATA",343,19,1,63,0)
payment amount in paragraph 1A.  Refer to the "Customer Service" and
"DATA",343,19,1,64,0)
"Submitting Your Request" sections below for more information.
"DATA",343,19,1,65,0)
__________________________________________________________________________
"DATA",343,19,1,66,0)
DISPUTE THE EXISTENCE OR AMOUNT OF THE DEBT:  You have the right to
"DATA",343,19,1,67,0)
dispute the existence or amount of the debt.  To do so, submit a letter
"DATA",343,19,1,68,0)
explaining why you question the validity or amount of the debt.  To avoid
"DATA",343,19,1,69,0)
late charges, you must submit a dispute by the balance due date on the
"DATA",343,19,1,70,0)
statement. VA will not initiate collection if your dispute is received
"DATA",343,19,1,71,0)
within sixty (60) days from the initial billing statement.  If VA receives
"DATA",343,19,1,72,0)
your notice later than sixty (60) days and collection has been initiated,
"DATA",343,19,1,73,0)
it will continue while the dispute is being reviewed.  If the dispute is
"DATA",343,19,1,74,0)
resolved in your favor, all late charges will be removed from your
"DATA",343,19,1,75,0)
account, and any amounts withheld from your VA benefits, federal payments,
"DATA",343,19,1,76,0)
or wages will be refunded to you.  Refer to the "Customer Service" and
"DATA",343,19,1,77,0)
"Submitting Your Request" sections below for more information.
"DATA",343,19,1,78,0)
__________________________________________________________________________
"DATA",343,19,1,79,0)
CUSTOMER SERVICE:  For additional information or assistance:
"DATA",343,19,1,80,0)
    In Person: At your local Veteran Affairs Medical Center's
"DATA",343,19,1,81,0)
               Agent Cashier's Office
"DATA",343,19,1,82,0)
    By Phone:  (see below for local information)
"DATA",343,19,1,83,0)
    Online:    Visit  www.domain.ext/vaforms to retrieve VA forms
"DATA",343,19,1,84,0)
__________________________________________________________________________
"DATA",343,19,1,85,0)
SUBMITTING YOUR REQUEST:  Submit the required VA forms or documents to
"DATA",343,19,1,86,0)
apply for one of VA's Financial Hardship Programs:
"DATA",343,19,1,87,0)
    In Person: At your local Veteran Affairs Medical Center's Agent
"DATA",343,19,1,88,0)
               Cashier's Office
"DATA",343,19,1,89,0)
    By Mail:   Send completed forms and/or other required documentation
"DATA",343,19,1,90,0)
               to the VA address at the top right of your statement to the
"DATA",343,19,1,91,0)
               attention of the Fiscal Office/Bill of Collection Manager
"DATA",343,19,1,92,0)
For additional information, to request necessary forms or assistance in
"DATA",343,19,1,93,0)
accessing forms online, contact VA at 1-866-400-1238.
"DATA",343,19,1,94,0)
__________________________________________________________________________
"DATA",343,19,1,95,0)
REPRESENTATION:  An accredited representative of a Veteran Service
"DATA",343,19,1,96,0)
Organization or other service organization recognized by the Secretary of
"DATA",343,19,1,97,0)
Veterans Affairs may represent you without charge.  You may employ an
"DATA",343,19,1,98,0)
attorney or VA accredited agent to assist you.  The services of an
"DATA",343,19,1,99,0)
attorney or accredited agent representing you in adjudicative proceedings
"DATA",343,19,1,100,0)
before VA are subject to a fee limitation as set forth in 38 U.S.C. 5904.
"DATA",343,19,1,101,0)
If you desire representation and have not already designated a
"DATA",343,19,1,102,0)
representative, contact VA at 1-866-400-1238 to request the necessary
"DATA",343,19,1,103,0)
forms.  If an attorney or accredited agent represents you before VA, a
"DATA",343,19,1,104,0)
copy of any agreement between you and the attorney or accredited agent
"DATA",343,19,1,105,0)
about the payment of the attorney's or agent's fees must be filed at the
"DATA",343,19,1,106,0)
following address:  Counsel to the Chairman (01C3), Board of Veterans 
"DATA",343,19,1,107,0)
Appeals, 810 Vermont Avenue N.W., Washington D.C. 20420.
"DATA",343,19,1,108,0)
__________________________________________________________________________
"DATA",343,19,1,109,0)
NOTICE TO CUSTOMERS MAKING PAYMENT BY CHECK: When you provide a check as       
"DATA",343,19,1,110,0)
payment, you authorize VA to either use information from your check to
"DATA",343,19,1,111,0)
make a one-time electronic fund transfer from your account or to process
"DATA",343,19,1,112,0)
the payment as a check transaction.  When VA uses information from your
"DATA",343,19,1,113,0)
check to make an electronic fund transfer, funds may be withdrawn from 
"DATA",343,19,1,114,0)
your account as soon as the day we process your payment, and you will not
"DATA",343,19,1,115,0)
receive your check back from the financial institution.  A Privacy Act
"DATA",343,19,1,116,0)
Statement required by 5 U.S.C. & 552a(e)(3) stating our authority for
"DATA",343,19,1,117,0)
soliciting and collecting the information from your check, and explaining
"DATA",343,19,1,118,0)
the purposes and routine uses which will be made of your check
"DATA",343,19,1,119,0)
information, VA Notice of Privacy Practices, IB 10-163 is available online
"DATA",343,19,1,120,0)
at www.domain.ext/vhapublications or call toll free at 1-866-400-1238 to
"DATA",343,19,1,121,0)
obtain a copy by mail.  Furnishing the check information is voluntary, but
"DATA",343,19,1,122,0)
a decision not to do so may require you to make payment by some other
"DATA",343,19,1,123,0)
method.
"DATA",343,19,1,124,0)
__________________________________________________________________________
"DATA",343,19,1,125,0)
QUESTIONS ABOUT PAYMENTS:  Payments made in the past ten (10) days may not
"DATA",343,19,1,126,0)
have been applied to your account by the time your statement was prepared.
"DATA",343,19,1,127,0)
If so, this payment will be reflected in your account on the next
"DATA",343,19,1,128,0)
statement.  For assistance in understanding your statement and assessed
"DATA",343,19,1,129,0)
charges contact VA at (see below for local information).
"DATA",343,19,1,130,0)
__________________________________________________________________________
"DATA",343,19,1,131,0)
VA PRIVACY:  The VA Notice of Privacy Practices, IB 10-163, which outlines
"DATA",343,19,1,132,0)
your privacy rights, is available online at www.domain.ext/vhapublications,
"DATA",343,19,1,133,0)
or you may obtain a copy by writing the VHA Privacy Office (10P2C1) at 810
"DATA",343,19,1,134,0)
Vermont Avenue NW, Washington, DC 20420.
"DATA",343,19,1,135,0)
__________________________________________________________________________
"DATA",430.3,1,0)
INCREASE ADJUSTMENT^AJ^1^1^^1
"DATA",430.3,2,0)
PAYMENT (IN PART)^PP^2^1^^1
"DATA",430.3,3,0)
REFER TO RC^RC^3^0^^1
"DATA",430.3,4,0)
REFER TO DOJ^RJ^4^0^^1
"DATA",430.3,5,0)
REESTABLISH TO RC/DOJ^RR^5^0^^1
"DATA",430.3,6,0)
RETURNED BY RC/DOJ^RD^6^0^^1
"DATA",430.3,7,0)
CASH COLLECTION BY RC/DOJ^CJ^7^1^^1
"DATA",430.3,8,0)
TERM.BY FIS.OFFICER^TO^8^1^^1
"DATA",430.3,9,0)
TERM.BY COMPROMISE^TC^9^1^^1
"DATA",430.3,10,0)
WAIVED IN FULL^WF^10^1^^1
"DATA",430.3,11,0)
WAIVED IN PART^WP^11^1^^1
"DATA",430.3,12,0)
ADMIN.COST CHARGE^AC^12^0^^1
"DATA",430.3,13,0)
INTEREST/ADM. CHARGE^IC^13^0^^1
"DATA",430.3,14,0)
EXEMPT INT/ADM. COST^E^14^0^^1
"DATA",430.3,15,0)
INCOMPLETE^IN^101^0^^0
"DATA",430.3,16,0)
ACTIVE^A^102^0^1^1
"DATA",430.3,17,0)
IN-ACTIVE^IA^103^0^1^
"DATA",430.3,18,0)
NEW BILL^N^104^0^^1
"DATA",430.3,19,0)
SUSPENSE^S^105^0^1^1
"DATA",430.3,20,0)
PENDING APPROVAL^PA^205^0^^0
"DATA",430.3,21,0)
PENDING CALM CODE^PC^107^0^1^0
"DATA",430.3,22,0)
COLLECTED/CLOSED^CC^108^0^1^1
"DATA",430.3,23,0)
WRITE-OFF^WO^109^0^1^1
"DATA",430.3,24,0)
MARSHAL/COURT COST^ML^15^0^^1
"DATA",430.3,25,0)
REPAYMENT PLAN^RP^16^0^^0
"DATA",430.3,26,0)
CANCELLED BILL^CB^210^0^^1
"DATA",430.3,27,0)
BILL INCOMPLETE^BI^201^0^^0
"DATA",430.3,28,0)
OLD BILL^OB^106^0^^0
"DATA",430.3,29,0)
TERM.BY RC/DOJ^TJ^29^1^^1
"DATA",430.3,30,0)
DEBIT VOUCHER (SF 5515)^DV^30^1^^0
"DATA",430.3,31,0)
RETURNED FROM AR (NEW)^RT^220^0^^0
"DATA",430.3,32,0)
RETURNED FOR AMENDMENT^RA^230^0^^0
"DATA",430.3,33,0)
AMENDED BILL^AB^110^1^^0
"DATA",430.3,34,0)
PAYMENT (IN FULL)^PF^20^1^^1
"DATA",430.3,35,0)
DECREASE ADJUSTMENT^DA^21^1^^1
"DATA",430.3,36,0)
DELETE (AMEND)^DL^301^0^^0
"DATA",430.3,37,0)
ADD (AMEND)^AD^302^0^^0
"DATA",430.3,38,0)
AMEND^AM^303^0^^0
"DATA",430.3,39,0)
CANCELLATION^CN^111^1^0^1
"DATA",430.3,40,0)
SUSPENDED^SP^240^0^0^1
"DATA",430.3,41,0)
REFUNDED^RF^120^1^0^1
"DATA",430.3,42,0)
OPEN^OP^112^1^0^1
"DATA",430.3,43,0)
RE-ESTABLISH^RW^250^^^1
"DATA",430.3,44,0)
REFUND REVIEW^PR^113^0^0^1
"DATA",430.3,45,0)
COMMENT^CM^17^0^0^0
"DATA",430.3,46,0)
UNSUSPENDED^US^18^0^0^1
"DATA",430.3,47,0)
CHARGE SUSPENDED^CS^19^0^0^1
"DATA",430.3,48,0)
PENDING ARCHIVE^X^114^0^0^0
"DATA",430.3,49,0)
ARCHIVED^XX^115^0^0^0
"DATA",430.3,51,0)
CS STOP PLACED^CP^33^^^0
"DATA",430.3,53,0)
CS BILL RECALL^CR^34^^^0
"DATA",430.3,54,0)
CS STOP DELETED^CD^36^^^0
"DATA",430.3,55,0)
CS DEL BILL RECALL^CF^37^^^0
"DATA",430.3,56,0)
CS DEBTOR RECALL^CE^35^^^0
"DATA",430.3,57,0)
CS DEL DEBTOR RECALL^CL^38^^^0
"DATA",430.3,60,0)
CS UPDATE DEBT^CU^41^^^0
"DATA",430.3,64,0)
CS CASE RECALL^CO^45^^^0
"DATA",430.3,65,0)
CS DEL CASE RECALL^CG^46^^^0
"DATA",430.3,66,0)
CS DECR ADJ NOT APP^CA^40^^^0
"DATA",430.3,67,0)
CS ADD CASE INFO^CZ^47^^^0
"DATA",430.3,68,0)
CS NEW DBTR NEW BILL^CH^48^^^0
"DATA",430.3,70,0)
CS DECREASE ADJ^CY^49^^^0
"DATA",430.3,71,0)
CS RECON WORKED^CV^50
"DATA",430.3,72,0)
DEL REPAY PLAN^DP^31^0^^0
"DATA",430.3,73,0)
CS INCREASE ADJ^AI^51^1^^1
"DATA",430.3,74,0)
CS ADMIN.COST CHARGE^AE^52^0^^1
"DATA",430.3,75,0)
CS ADMIN ADJ TR REV?Y^AN^53^^^0
"DATA",430.3,76,0)
CS ADMIN ADJ TR REV?N^AO^54^^^0
"DATA",430.3,79,0)
CS INC ADJ TR REV?Y^AS^57^^^0
"DATA",430.3,80,0)
CS INC ADJ TR REV?N^AT^58^^^0
"DATA",430.3,83,0)
CS PEND RECON^RK^61^^^0
"DATA",430.3,84,0)
CS RECALL PLACED^CQ^62
"DATA",430.3,85,0)
CS DEBTOR NEW BILL^CK^39^^^0
"FIA",343)
AR FORM LETTER
"FIA",343,0)
^RC(343,
"FIA",343,0,0)
343I
"FIA",343,0,1)
n^n^f^^y^^y^m^n
"FIA",343,0,10)

"FIA",343,0,11)

"FIA",343,0,"RLRO")

"FIA",343,0,"VR")
4.5^PRCA
"FIA",343,343)
0
"FIA",343,343.01)
0
"FIA",430)
ACCOUNTS RECEIVABLE
"FIA",430,0)
^PRCA(430,
"FIA",430,0,0)
430I
"FIA",430,0,1)
y^n^p^^^^n^^n
"FIA",430,0,10)

"FIA",430,0,11)

"FIA",430,0,"RLRO")

"FIA",430,0,"VR")
4.5^PRCA
"FIA",430,430)
1
"FIA",430,430,156)

"FIA",430,430,171)

"FIA",430,430,301)

"FIA",430,430,309)

"FIA",430,430,310)

"FIA",430,430,311)

"FIA",430,430,312)

"FIA",430,430.0171)
1
"FIA",430,430.0171,.01)

"FIA",430.3)
ACCOUNTS RECEIVABLE TRANS.TYPE
"FIA",430.3,0)
^PRCA(430.3,
"FIA",430.3,0,0)
430.3
"FIA",430.3,0,1)
n^n^f^^y^^y^m^n
"FIA",430.3,0,10)

"FIA",430.3,0,11)

"FIA",430.3,0,"RLRO")

"FIA",430.3,0,"VR")
4.5^PRCA
"FIA",430.3,430.3)
0
"INIT")
PRCA315P
"KRN",.402,807,-1)
0^1
"KRN",.402,807,0)
PRCAE ADMIN^3170920.1912^^433^^^3171016
"KRN",.402,807,"%D",0)
^.4021^2^2^3170920^^^^
"KRN",.402,807,"%D",1,0)
This template adds an administrative charge to an account.
"KRN",.402,807,"%D",2,0)
OPTION: PRCAC TR ADM
"KRN",.402,807,"DIAB",2,0,433,3)
27;"INTEREST CHARGE"
"KRN",.402,807,"DIAB",3,0,433,2)
28;"MONTHLY ADMIN. CHARGE"
"KRN",.402,807,"DIAB",5,0,433,0)
11;"ADMIN. COST CHARGE DATE"//^S X=DT
"KRN",.402,807,"DR",1,433)
S:'$D(PRCABN) Y="";S:$D(PRCASUP) ADMINTOT=0;.03////^S X=PRCABN;12///^S X=$S($D(^PRCA(430,"TCSP",PRCABN)):74,1:12);11ADMIN. COST CHARGE DATE~;21;S:$D(PRCASUP) ADMINTOT=X;22;S:$D(PRCASUP) ADMINTOT=ADMINTOT+X;23;
"KRN",.402,807,"DR",1,433,1)
S:$D(PRCASUP) ADMINTOT=ADMINTOT+X;24;S:$D(PRCASUP) ADMINTOT=ADMINTOT+X;S PRCA2=0;S:$D(PRCAERR) Y=28;25;I $D(PRCASUP),X<0,-X>$P(PRCAIND,U,4) W !,*7,"TOO MUCH MARSHALL FEE BEING DEDUCTED" S Y=25;26;
"KRN",.402,807,"DR",1,433,2)
I $D(PRCASUP),X<0,-X>$P(PRCAIND,U,5) W !,*7,"TOO MUCH COURT COST BEING DEDUCTED" S Y=26;S:'$D(PRCASUP) Y="";28MONTHLY ADMIN. CHARGE~;S ADMINTOT=ADMINTOT+X;29;S ADMINTOT=ADMINTOT+X;K PRCAERR;
"KRN",.402,807,"DR",1,433,3)
I ADMINTOT<0,-ADMINTOT>$P(PRCAIND,U,3) W !,*7,"TOO MUCH ADMINISTRATIVE CHARGE DEDUCTED." S PRCAERR=1,ADMINTOT=0,Y=21;27INTEREST CHARGE~;I X<0,-X>$P(PRCAIND,U,2) W !,*7,"TOO MUCH INTEREST DEDUCTED" S Y=27;
"KRN",19,3030,-1)
0^19
"KRN",19,3030,0)
PRCAF U ADMIN.RATE^Interest/Admin/Penalty Rates^^A^^PRCAF LATE CHARGES^^^^^^ACCOUNTS RECEIVABLE^^1^
"KRN",19,3030,1,0)
^19.06^2^2^3180226^^^^
"KRN",19,3030,1,1,0)
This adds/edits the administrative costs and interest rates charged
"KRN",19,3030,1,2,0)
on delinquent accounts.
"KRN",19,3030,15)

"KRN",19,3030,20)
D UPINT^RCMSITE K DTOUT
"KRN",19,3030,99)
55568,67951
"KRN",19,3030,"U")
INTEREST/ADMIN/PENALTY RATES
"KRN",19,11794,-1)
0^14
"KRN",19,11794,0)
RCTCSP STOP^Stop/Reactivate TCSP Referral For a Bill^^R^^^^^^^^
"KRN",19,11794,1,0)
^19.06^3^3^3150113^^
"KRN",19,11794,1,1,0)
This option is used to allow the user to stop Cross-Servicing referral for
"KRN",19,11794,1,2,0)
a bill.  It also is used to re-activate Cross-Servicing referral for a
"KRN",19,11794,1,3,0)
bill that had been previously stopped.
"KRN",19,11794,25)
STOP^RCTCSPU
"KRN",19,11794,"U")
STOP/REACTIVATE TCSP REFERRAL 
"KRN",19,11795,-1)
0^12
"KRN",19,11795,0)
RCTCSP RECALLB^Bill Recall/Reactivate TCSP Referral^^R^^^^^^^^
"KRN",19,11795,1,0)
^19.06^3^3^3170308^^
"KRN",19,11795,1,1,0)
This option is used to allow the user to recall a bill from Cross 
"KRN",19,11795,1,2,0)
Servicing.  It is also used to delete the recall if the recall has not 
"KRN",19,11795,1,3,0)
taken place.
"KRN",19,11795,25)
RCLLSETB^RCTCSPU
"KRN",19,11795,"U")
BILL RECALL/REACTIVATE TCSP RE
"KRN",19,11796,-1)
0^13
"KRN",19,11796,0)
RCTCSP RECALLD^Debtor Recall/Reactivate TCSP Referral^^R^^^^^^^^
"KRN",19,11796,1,0)
^19.06^3^3^3170308^^^
"KRN",19,11796,1,1,0)
This option is used to allow the user to recall a debtor and all of 
"KRN",19,11796,1,2,0)
the associated bills from Cross-Servicing.  It is also used to delete the
"KRN",19,11796,1,3,0)
recall if the recall has not taken place.
"KRN",19,11796,25)
RCLLSETD^RCTCSPU
"KRN",19,11796,"U")
DEBTOR RECALL/REACTIVATE TCSP 
"KRN",19,11797,-1)
0^6
"KRN",19,11797,0)
RCTCSP MENU^Cross-Servicing Menu^^M^^^^^^^^
"KRN",19,11797,1,0)
^19.06^2^2^3150113^^^^
"KRN",19,11797,1,1,0)
This menu is placed on the AR Supervisor's Menu.  It contains
"KRN",19,11797,1,2,0)
 options for Cross-Servicing.
"KRN",19,11797,10,0)
^19.01IP^43^21
"KRN",19,11797,10,1,0)
11794
"KRN",19,11797,10,1,"^")
RCTCSP STOP
"KRN",19,11797,10,2,0)
11795
"KRN",19,11797,10,2,"^")
RCTCSP RECALLB
"KRN",19,11797,10,3,0)
11796
"KRN",19,11797,10,3,"^")
RCTCSP RECALLD
"KRN",19,11797,10,4,0)
11798
"KRN",19,11797,10,4,"^")
RCTCSP BILL REPORT
"KRN",19,11797,10,5,0)
11799
"KRN",19,11797,10,5,"^")
RCTCSP REPORT
"KRN",19,11797,10,6,0)
11800
"KRN",19,11797,10,6,"^")
RCTCSP RECALL REPORT
"KRN",19,11797,10,9,0)
11803^
"KRN",19,11797,10,9,"^")
RCTCSP REJECT REPORT
"KRN",19,11797,10,10,0)
11804^
"KRN",19,11797,10,10,"^")
RCTCSP IAI ERROR CODES LIST
"KRN",19,11797,10,11,0)
11807
"KRN",19,11797,10,11,"^")
RCTCSP STOP REACTIVATE REPORT
"KRN",19,11797,10,20,0)
11819
"KRN",19,11797,10,20,"^")
RCTCSP IAI REPORT
"KRN",19,11797,10,21,0)
11821
"KRN",19,11797,10,21,"^")
RCDP TCSP FLAG CONTROL
"KRN",19,11797,10,42,0)
11816
"KRN",19,11797,10,42,"^")
RCTCSP RECONCILIATION WORKLIST
"KRN",19,11797,10,43,0)
11802
"KRN",19,11797,10,43,"^")
RCTCSP RECONCIL REPORT
"KRN",19,11797,99)
64673,57925
"KRN",19,11797,99.1)
64562,48776
"KRN",19,11797,"U")
CROSS-SERVICING MENU
"KRN",19,11798,-1)
0^7
"KRN",19,11798,0)
RCTCSP BILL REPORT^Cross-Servicing Bill Report^^R^^^^^^^^
"KRN",19,11798,1,0)
^19.06^5^5^3150113^^^^
"KRN",19,11798,1,1,0)
This report lists the bills for the individual debtor that have been
"KRN",19,11798,1,2,0)
forwarded to Cross-Servicing.  For each bill, the report displays
"KRN",19,11798,1,3,0)
the status code, the original amount of the bill, the current amount of
"KRN",19,11798,1,4,0)
the bill, the principle, interest, administrative cost, court cost, and
"KRN",19,11798,1,5,0)
the Cross-Servicing referral date.
"KRN",19,11798,25)
BILLREP^RCTCSP1
"KRN",19,11798,"U")
CROSS-SERVICING BILL REPORT
"KRN",19,11799,-1)
0^10
"KRN",19,11799,0)
RCTCSP REPORT^Print Cross-Servicing Report^^R^^^^^^^^
"KRN",19,11799,1,0)
^19.06^5^5^3150113^^^
"KRN",19,11799,1,1,0)
This option is used to print a Cross-Servicing report.  For each bill 
"KRN",19,11799,1,2,0)
which has been referred to Cross-Servicing, the report will display the
"KRN",19,11799,1,3,0)
Debtor's name, the Debtor SSN, the original amount referred, and the 
"KRN",19,11799,1,4,0)
Cross-Servicing referred date.  The user will have the option of sorting
"KRN",19,11799,1,5,0)
by Bill Number, Debtor Name, or Cross-Servicing Referred Date.
"KRN",19,11799,25)
CSRPRT^RCTCSP1
"KRN",19,11799,"U")
PRINT CROSS-SERVICING REPORT
"KRN",19,11800,-1)
0^5
"KRN",19,11800,0)
RCTCSP RECALL REPORT^Cross-Servicing Recall Report^^R^^^^^^^^
"KRN",19,11800,1,0)
^19.06^3^3^3150113^^^^
"KRN",19,11800,1,1,0)
The Cross-Servicing Recall Report lists the bills that have been recalled
"KRN",19,11800,1,2,0)
from Cross-Servicing.  The report has two sort options, a sort by Bill 
"KRN",19,11800,1,3,0)
Number, and a sort by Debtor Name.
"KRN",19,11800,25)
CSRCLRT^RCTCSP5
"KRN",19,11800,"U")
CROSS-SERVICING RECALL REPORT
"KRN",19,11802,-1)
0^11
"KRN",19,11802,0)
RCTCSP RECONCIL REPORT^Reconciliation Report - Cross-Servicing^^R^^^^^^^^
"KRN",19,11802,1,0)
^19.06^8^8^3170308^^^^
"KRN",19,11802,1,1,0)
This option is used to print a Reconciliation Report.  For
"KRN",19,11802,1,2,0)
each bill which has been returned from Treasury by reconciliation,
"KRN",19,11802,1,3,0)
the report will display the Debtor's name, Bill Number, Returned
"KRN",19,11802,1,4,0)
Date, and Closed Date.  A second text line will display 
"KRN",19,11802,1,5,0)
the Returned Code Description.  If there is a Date of Death,
"KRN",19,11802,1,6,0)
a Date of Bankruptcy, or a Date of Dissolution, then this
"KRN",19,11802,1,7,0)
date will appear on a new line with a text description and
"KRN",19,11802,1,8,0)
the date.
"KRN",19,11802,25)
RCRPRT^RCTCSP2
"KRN",19,11802,"U")
RECONCILIATION REPORT - CROSS-
"KRN",19,11803,-1)
0^8
"KRN",19,11803,0)
RCTCSP REJECT REPORT^Debt Referral Reject Report^^R^^^^^^^^
"KRN",19,11803,1,0)
4^19.06^10^10^3141208^^^^
"KRN",19,11803,1,1,0)
This option allows the user to report identified Debt Referral Rejects.
"KRN",19,11803,1,2,0)
 
"KRN",19,11803,1,3,0)
The report prints out based on the following user defined parameters: 
"KRN",19,11803,1,4,0)
 (i.e. -Range of Dates,   -in either Brief or Detail mode,
"KRN",19,11803,1,5,0)
       -sorted by Bill Number, Debtor Name or CS Referred Date,
"KRN",19,11803,1,6,0)
       -for a given Reject Origination Source (or All),
"KRN",19,11803,1,7,0)
       -and in either Ascending or Descending print order.)
"KRN",19,11803,1,8,0)
 
"KRN",19,11803,1,9,0)
In addition, output can be made to a device or file in either print 
"KRN",19,11803,1,10,0)
or in Excel spreadsheet format.
"KRN",19,11803,25)
RJRPT^RCTCSJR
"KRN",19,11803,"U")
DEBT REFERRAL REJECT REPORT
"KRN",19,11804,-1)
0^9
"KRN",19,11804,0)
RCTCSP IAI ERROR CODES LIST^List IAI Error Codes^^R^^^^^^^^
"KRN",19,11804,1,0)
^19.06^3^3^3141112^^
"KRN",19,11804,1,1,0)
This option is a listing of the IAI Error Codes, in error code order.  Its
"KRN",19,11804,1,2,0)
display contains a) Error Code, b) Field Name, c) associated Record Types 
"KRN",19,11804,1,3,0)
and d) Description.
"KRN",19,11804,25)
ECLIST^RCTCSJR
"KRN",19,11804,"U")
LIST IAI ERROR CODES
"KRN",19,11807,-1)
0^4
"KRN",19,11807,0)
RCTCSP STOP REACTIVATE REPORT^Cross-Servicing Stop Reactivate Report^^R^^^^^^^^
"KRN",19,11807,1,0)
^^4^4^3170606^
"KRN",19,11807,1,1,0)
The Cross-Servicing Stop Reactivate Report lists the bills that have been
"KRN",19,11807,1,2,0)
stopped from Cross-Servicing, or Reactivated, or Both. The user may select
"KRN",19,11807,1,3,0)
a range of Debtors or all Debtors, and a range of dates or all dates.
"KRN",19,11807,1,4,0)
Excel CSV output is also supported.
"KRN",19,11807,25)
EN^RCTCSP4
"KRN",19,11807,"U")
CROSS-SERVICING STOP REACTIVAT
"KRN",19,11815,-1)
0^15
"KRN",19,11815,0)
PRCAC ENTER EDIT REPAYMENT^Enter/Edit Repayment Plan^^A^^^^^^^^ACCOUNTS RECEIVABLE^^1
"KRN",19,11815,1,0)
^^1^1^3170213^
"KRN",19,11815,1,1,0)
This option sets up a repayment plan for an AR Debtor. The plan can incorporate multiple bills.
"KRN",19,11815,20)
D ^PRCARPM
"KRN",19,11815,"U")
ENTER/EDIT REPAYMENT PLAN
"KRN",19,11816,-1)
0^16
"KRN",19,11816,0)
RCTCSP RECONCILIATION WORKLIST^Reconciliation List Manager^^R^^^^^^^^
"KRN",19,11816,1,0)
^19.06^1^1^3170329^^^
"KRN",19,11816,1,1,0)
List Manager for VistA AR Cross-servicing
"KRN",19,11816,25)
EN^RCTCSWL
"KRN",19,11816,"U")
RECONCILIATION LIST MANAGER
"KRN",19,11819,-1)
0^17
"KRN",19,11819,0)
RCTCSP IAI REPORT^Treasury Cross-Servicing IAI Report^^R^^^^^^^^
"KRN",19,11819,1,0)
^^4^4^3171016^
"KRN",19,11819,1,1,0)
This report displays a record of current VHA bills at Treasury. It is a 
"KRN",19,11819,1,2,0)
tool that can be used to identify bills erroneously
"KRN",19,11819,1,3,0)
listed in a referral status in VistA when reconciled with the Print 
"KRN",19,11819,1,4,0)
Cross-Servicing Report.
"KRN",19,11819,25)
IAIRPT^RCTCSP5
"KRN",19,11819,"U")
TREASURY CROSS-SERVICING IAI R
"KRN",19,11821,-1)
4^18
"KRN",19,11821,0)
RCDP TCSP FLAG CONTROL
"KRN",19.1,617,-1)
0^1
"KRN",19.1,617,0)
PRCAF LATE CHARGES
"KRN",19.1,617,1,0)
^^2^2^3161116^
"KRN",19.1,617,1,1,0)
This is a key for the AR action in PRCAF U ADMIN.RATE to allow edits
"KRN",19.1,617,1,2,0)
to the Interest/Admin and Penalty Rates.
"KRN",101,460,-1)
4^55
"KRN",101,460,0)
VALM BLANK 5
"KRN",101,461,-1)
4^56
"KRN",101,461,0)
VALM BLANK 6
"KRN",101,2778,-1)
4^37
"KRN",101,2778,0)
RCDP ACCOUNT PROFILE SELECT NEW ACCOUNT
"KRN",101,2779,-1)
4^38
"KRN",101,2779,0)
RCDP ACCOUNT PROFILE BILL TRANSACTIONS
"KRN",101,2780,-1)
4^39
"KRN",101,2780,0)
RCDP ACCOUNT PROFILE SELECT STATUS
"KRN",101,2786,-1)
4^43
"KRN",101,2786,0)
RCDP ACCOUNT PROFILE BILL PROFILE
"KRN",101,2816,-1)
4^40
"KRN",101,2816,0)
RCDP FAST EXIT
"KRN",101,4992,-1)
0^24
"KRN",101,4992,0)
PRCA TCSP WORKLIST MENU^Worklist Menu^^M^^^^^^^^ACCOUNTS RECEIVABLE
"KRN",101,4992,1,0)
^101.06^1^1^3170515^^^^
"KRN",101,4992,1,1,0)
This is the main cross-servicing worklist protocol.
"KRN",101,4992,4)
26^3
"KRN",101,4992,10,0)
^101.01PA^9^6
"KRN",101,4992,10,1,0)
4993^EP^10^^^Expand Pat
"KRN",101,4992,10,1,"^")
PRCA TCSP WORKLIST EXPAND
"KRN",101,4992,10,2,0)
4996^VI^20^^^View Ins
"KRN",101,4992,10,2,"^")
PRCA TCSP WORKLIST INSURANCE
"KRN",101,4992,10,3,0)
4997^AP^30^^^Acct Profile
"KRN",101,4992,10,3,"^")
PRCA TCSP WORKLIST ACCOUNT PROFILE
"KRN",101,4992,10,4,0)
4998^PT^40^^^Patient Inq
"KRN",101,4992,10,4,"^")
PRCA TCSP WORKLIST VIEW PATIENT
"KRN",101,4992,10,8,0)
5002^PR^80^^^Print Statement
"KRN",101,4992,10,8,"^")
PRCA TCSP WORKLIST PRINT STATEMENT
"KRN",101,4992,10,9,0)
5008^RM^90^^^Remove From Worklist
"KRN",101,4992,10,9,"^")
PRCA TCSP WORKLIST REMOVE
"KRN",101,4992,26)
D SHOW^VALM
"KRN",101,4992,28)
Select Action: 
"KRN",101,4992,99)
64418,50017
"KRN",101,4993,-1)
0^21
"KRN",101,4993,0)
PRCA TCSP WORKLIST EXPAND^Expand^^A^^^^^^^^ACCOUNTS RECEIVABLE
"KRN",101,4993,2,0)
^101.02A^^0
"KRN",101,4993,10,0)
^101.01PA^0^0
"KRN",101,4993,20)
D EXPAND^RCTCSWL
"KRN",101,4993,99)
64363,61074
"KRN",101,4994,-1)
0^36
"KRN",101,4994,0)
PRCA TCSP WORKLIST EXPAND MENU PROTOCOL^Expand Menu Protocol^^M^^^^^^^^ACCOUNTS RECEIVABLE
"KRN",101,4994,4)
^3
"KRN",101,4994,26)
D SHOW^VALM
"KRN",101,4994,28)

"KRN",101,4994,29)
Quit
"KRN",101,4994,99)
64363,61074
"KRN",101,4996,-1)
0^23
"KRN",101,4996,0)
PRCA TCSP WORKLIST INSURANCE^View Insurance^^A^^^^^^^^
"KRN",101,4996,20)
D LINKI^RCTCSWL
"KRN",101,4996,99)
64363,61074
"KRN",101,4997,-1)
0^19
"KRN",101,4997,0)
PRCA TCSP WORKLIST ACCOUNT PROFILE^Acct Profile^^A^^^^^^^^
"KRN",101,4997,2,0)
^101.02A^^0
"KRN",101,4997,20)
D ACCTPR^RCTCSWL
"KRN",101,4997,99)
64363,61074
"KRN",101,4998,-1)
0^27
"KRN",101,4998,0)
PRCA TCSP WORKLIST VIEW PATIENT^Patient View^^A^^^^^^^^
"KRN",101,4998,2,0)
^101.02A^^0
"KRN",101,4998,20)
D PTVW^RCTCSWL
"KRN",101,4998,99)
64418,49647
"KRN",101,4999,-1)
0^57
"KRN",101,4999,0)
PRCA TCSP WORKLIST CANCEL/EDIT/ADD^Cancel/Edit/Add^^A^^^^^^^^
"KRN",101,4999,20)
D CEA^RCTCSWL
"KRN",101,4999,99)
64425,68633
"KRN",101,5000,-1)
0^52
"KRN",101,5000,0)
RCDP ACCT PROFILE INCREASE TRANS^Increase Adjustment^^A^^^^^^^^ACCOUNTS RECEIVABLE
"KRN",101,5000,1,0)
^^2^2^3170522^
"KRN",101,5000,1,1,0)
This is the action for Increase Adjustment on the Account Profile screen. 
"KRN",101,5000,1,2,0)
Multiple selection allowed.
"KRN",101,5000,20)
D INC^RCDPAPL1
"KRN",101,5000,99)
64363,61074
"KRN",101,5001,-1)
0^51
"KRN",101,5001,0)
RCDP ACCT PROFILE DECREASE TRANS^Decrease Adjustment^^A^^^^^^^^ACCOUNTS RECEIVABLE
"KRN",101,5001,1,0)
^^2^2^3170522^
"KRN",101,5001,1,1,0)
This is the action for Decrease Adjustment on the Account Profile screen.
"KRN",101,5001,1,2,0)
Multiple selection allowed.
"KRN",101,5001,20)
D DEC^RCDPAPL1
"KRN",101,5001,99)
64363,61074
"KRN",101,5002,-1)
0^25
"KRN",101,5002,0)
PRCA TCSP WORKLIST PRINT STATEMENT^Print Statement^^A^^^^^^^^
"KRN",101,5002,20)
D PRTSTAT^RCTCSWL
"KRN",101,5002,99)
64363,61074
"KRN",101,5004,-1)
0^47
"KRN",101,5004,0)
RCDP ACCT PROFILE STOP^Stop TCSP^^A^^^^^^^^ACCOUNTS RECEIVABLE
"KRN",101,5004,1,0)
^^2^2^3170522^
"KRN",101,5004,1,1,0)
This is the action for Stop TCSP on the Account Profile screen. 
"KRN",101,5004,1,2,0)
Multiple selection allowed.
"KRN",101,5004,20)
D STOP^RCDPAPL1
"KRN",101,5004,99)
64363,61074
"KRN",101,5005,-1)
0^48
"KRN",101,5005,0)
RCDP ACCT PROFILE TERM FISCAL^Term Fiscal^^A^^^^^^^^ACCOUNTS RECEIVABLE
"KRN",101,5005,1,0)
^^2^2^3170522^
"KRN",101,5005,1,1,0)
This is the action for Term Fiscal on the Account Profile screen.
"KRN",101,5005,1,2,0)
Multiple selection allowed.
"KRN",101,5005,20)
D TERM^RCDPAPL1
"KRN",101,5005,99)
64363,61074
"KRN",101,5006,-1)
0^49
"KRN",101,5006,0)
RCDP ACCT PROFILE RECALL BILL^Recall Bill^^A^^^^^^^^ACCOUNTS RECEIVABLE
"KRN",101,5006,1,0)
^^2^2^3170522^
"KRN",101,5006,1,1,0)
This is the action for Recall Bill on the Account Profile screen. 
"KRN",101,5006,1,2,0)
Multiple selection allowed.
"KRN",101,5006,20)
D RECALLB^RCDPAPL1
"KRN",101,5006,99)
64363,61074
"KRN",101,5007,-1)
0^50
"KRN",101,5007,0)
RCDP ACCT PROFILE RECALL DEBTOR^Recall Debtor^^A^^^^^^^^ACCOUNTS RECEIVABLE
"KRN",101,5007,1,0)
^^2^2^3170522^
"KRN",101,5007,1,1,0)
This is the action for Recall Debtor on the Account Profile screen. 
"KRN",101,5007,1,2,0)
No multiple selection.
"KRN",101,5007,20)
D RECALLD^RCDPAPL1
"KRN",101,5007,99)
64363,61074
"KRN",101,5008,-1)
0^26
"KRN",101,5008,0)
PRCA TCSP WORKLIST REMOVE^Remove From Worklist^^A^^^^^^^^
"KRN",101,5008,20)
D REMOVE^RCTCSWL
"KRN",101,5008,99)
64363,61074
"KRN",101,5009,-1)
0^53
"KRN",101,5009,0)
RCDP ACCT PROFILE SUSPEND^Suspend Bill^^A^^^^^^^^ACCOUNTS RECEIVABLE
"KRN",101,5009,1,0)
^^2^2^3170522^
"KRN",101,5009,1,1,0)
This is the action for Suspend Bill on the Account Profile screen. 
"KRN",101,5009,1,2,0)
Multiple selection allowed.
"KRN",101,5009,20)
D SUSPEND^RCDPAPL1
"KRN",101,5009,99)
64394,44389
"KRN",101,5012,-1)
0^31
"KRN",101,5012,0)
PRCA TCSP ACCOUNT PROFILE MENU^Account Profile Menu^^M^^^^^^^^ACCOUNTS RECEIVABLE
"KRN",101,5012,1,0)
^101.06^1^1^3170508^^^^
"KRN",101,5012,1,1,0)
This option will show a profile of bills for an account.
"KRN",101,5012,4)
20^3^^DP
"KRN",101,5012,10,0)
^101.01PA^19^16
"KRN",101,5012,10,1,0)
2778^NA^41^^^Select New Acct
"KRN",101,5012,10,1,"^")
RCDP ACCOUNT PROFILE SELECT NEW ACCOUNT
"KRN",101,5012,10,3,0)
2780^SS^31^
"KRN",101,5012,10,3,"^")
RCDP ACCOUNT PROFILE SELECT STATUS
"KRN",101,5012,10,4,0)
4999^CN^42^
"KRN",101,5012,10,4,"^")
PRCA TCSP WORKLIST CANCEL/EDIT/ADD
"KRN",101,5012,10,5,0)
2816^EA^44^
"KRN",101,5012,10,5,"^")
RCDP FAST EXIT
"KRN",101,5012,10,7,0)
2779^BT^21^^^Bill Trans
"KRN",101,5012,10,7,"^")
RCDP ACCOUNT PROFILE BILL TRANSACTIONS
"KRN",101,5012,10,8,0)
5004^ST^12^
"KRN",101,5012,10,8,"^")
RCDP ACCT PROFILE STOP
"KRN",101,5012,10,9,0)
5005^TF^23^
"KRN",101,5012,10,9,"^")
RCDP ACCT PROFILE TERM FISCAL
"KRN",101,5012,10,10,0)
5006^RB^22^
"KRN",101,5012,10,10,"^")
RCDP ACCT PROFILE RECALL BILL
"KRN",101,5012,10,11,0)
5007^RD^32^
"KRN",101,5012,10,11,"^")
RCDP ACCT PROFILE RECALL DEBTOR
"KRN",101,5012,10,12,0)
5001^DA^43^^^Decrease Adj
"KRN",101,5012,10,12,"^")
RCDP ACCT PROFILE DECREASE TRANS
"KRN",101,5012,10,13,0)
5000^IA^33^^^Increase Adj
"KRN",101,5012,10,13,"^")
RCDP ACCT PROFILE INCREASE TRANS
"KRN",101,5012,10,14,0)
5009^SU^13^
"KRN",101,5012,10,14,"^")
RCDP ACCT PROFILE SUSPEND
"KRN",101,5012,10,16,0)
460^^24^
"KRN",101,5012,10,16,"^")
VALM BLANK 5
"KRN",101,5012,10,17,0)
461^^34^
"KRN",101,5012,10,17,"^")
VALM BLANK 6
"KRN",101,5012,10,18,0)
2786^BP^11^
"KRN",101,5012,10,18,"^")
RCDP ACCOUNT PROFILE BILL PROFILE
"KRN",101,5012,10,19,0)
5022^RE^14^^^ReEstablish Bill
"KRN",101,5012,10,19,"^")
RCDP ACCT PROFILE RE-ESTABLISH
"KRN",101,5012,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,5012,26)
D SHOW^VALM
"KRN",101,5012,28)
Select Action: 
"KRN",101,5012,99)
64454,34100
"KRN",101,5022,-1)
0^58
"KRN",101,5022,0)
RCDP ACCT PROFILE RE-ESTABLISH^Re-Establish Bill^^A^^^^^^^^ACCOUNTS RECEIVABLE
"KRN",101,5022,1,0)
^^2^2^3170619^
"KRN",101,5022,1,1,0)
This is the action protocol for the Re-Establish Bill on the Account 
"KRN",101,5022,1,2,0)
Profile screen.  Multiple selection is allowed.
"KRN",101,5022,20)
D REESTAB^RCDPAPL1
"KRN",101,5022,99)
64453,53146
"KRN",409.61,399,-1)
0^6
"KRN",409.61,399,0)
RCDP ACCOUNT PROFILE^1^^80^7^20^1^1^Bill^RCDP ACCOUNT PROFILE MENU^Account Profile^1^^1
"KRN",409.61,399,1)
^VALM HIDDEN ACTIONS
"KRN",409.61,399,"ARRAY")
 ^TMP("RCDPAPLM",$J)
"KRN",409.61,399,"COL",0)
^409.621^8^7
"KRN",409.61,399,"COL",1,0)
BILL NUMBER^8^7^BillNum
"KRN",409.61,399,"COL",3,0)
CARE DATE^17^8^CareDate
"KRN",409.61,399,"COL",4,0)
BILL TYPE^33^20^Bill Type
"KRN",409.61,399,"COL",5,0)
PRINCIPAL^53^9^Principal
"KRN",409.61,399,"COL",6,0)
INTEREST^63^8^Interest
"KRN",409.61,399,"COL",7,0)
ADMIN^75^5^Admin
"KRN",409.61,399,"COL",8,0)
STATUS^27^4^Stat
"KRN",409.61,399,"COL","B","ADMIN",7)

"KRN",409.61,399,"COL","B","BILL NUMBER",1)

"KRN",409.61,399,"COL","B","BILL TYPE",4)

"KRN",409.61,399,"COL","B","CARE DATE",3)

"KRN",409.61,399,"COL","B","INTEREST",6)

"KRN",409.61,399,"COL","B","PRINCIPAL",5)

"KRN",409.61,399,"COL","B","STATUS",8)

"KRN",409.61,399,"FNL")
D EXIT^RCDPAPLM
"KRN",409.61,399,"HDR")
D HDR^RCDPAPLM
"KRN",409.61,399,"INIT")
D INIT^RCDPAPLM
"KRN",409.61,761,-1)
0^1
"KRN",409.61,761,0)
RCTCSP WORKLIST^1^^80^5^19^1^1^Account^PRCA TCSP WORKLIST MENU^TCSP RECONCILIATION WORKLIST^1^^1
"KRN",409.61,761,1)
^VALM HIDDEN ACTIONS
"KRN",409.61,761,"COL",0)
^409.621^5^5
"KRN",409.61,761,"COL",1,0)
PATIENT^7^27^Patient
"KRN",409.61,761,"COL",2,0)
ID^33^6^Pt ID
"KRN",409.61,761,"COL",3,0)
BILLNO^41^15^Bill No.
"KRN",409.61,761,"COL",4,0)
BAL^59^12^Balance
"KRN",409.61,761,"COL",5,0)
RSN^68^7^Ret Rsn
"KRN",409.61,761,"COL","B","BAL",4)

"KRN",409.61,761,"COL","B","BILLNO",3)

"KRN",409.61,761,"COL","B","ID",2)

"KRN",409.61,761,"COL","B","PATIENT",1)

"KRN",409.61,761,"COL","B","RSN",5)

"KRN",409.61,761,"EXP")
D EXPAND^RCTCSWL
"KRN",409.61,761,"FNL")
D EXIT^RCTCSWL
"KRN",409.61,761,"HDR")
D HDR^RCTCSWL
"KRN",409.61,761,"HLP")
D HELP^RCTCSWL
"KRN",409.61,761,"INIT")
D INIT^RCTCSWL
"KRN",409.61,762,-1)
0^2
"KRN",409.61,762,0)
RCTCSP WORKLIST EXPAND^1^^80^5^20^1^0^^PRCA TCSP WORKLIST EXPAND MENU PROTOCOL^Expanded TCPS Data^1^^1
"KRN",409.61,762,1)
^VALM HIDDEN ACTIONS
"KRN",409.61,762,"ARRAY")
 ^TMP("RCTCSWE",$J)
"KRN",409.61,762,"COL",0)
^409.621^^0
"KRN",409.61,762,"FNL")
D EXIT^RCTCSWL2
"KRN",409.61,762,"HDR")
D HDR^RCTCSWL2
"KRN",409.61,762,"HLP")
D HELP^RCTCSWL2
"KRN",409.61,762,"INIT")
D INIT^RCTCSWL2
"KRN",409.61,764,-1)
0^5
"KRN",409.61,764,0)
PRCA TCSP ACCOUNT PROFILE^1^^80^7^18^1^1^Bill^PRCA TCSP ACCOUNT PROFILE MENU^Account Profile^1^^1
"KRN",409.61,764,1)
^VALM HIDDEN ACTIONS
"KRN",409.61,764,"ARRAY")
 ^TMP("RCDPAPLM",$J)
"KRN",409.61,764,"COL",0)
^409.621^7^7
"KRN",409.61,764,"COL",1,0)
BILL NUMBER^8^7^BillNum^^0
"KRN",409.61,764,"COL",2,0)
CARE DATE^17^8^CareDate^^0
"KRN",409.61,764,"COL",3,0)
BILL TYPE^33^20^Bill Type^^0
"KRN",409.61,764,"COL",4,0)
PRINCIPAL^53^9^Principal^^0
"KRN",409.61,764,"COL",5,0)
INTEREST^63^8^Interest^^0
"KRN",409.61,764,"COL",6,0)
ADMIN^75^5^Admin^^0
"KRN",409.61,764,"COL",7,0)
STATUS^27^4^Stat^^0
"KRN",409.61,764,"COL","AIDENT",0,1)

"KRN",409.61,764,"COL","AIDENT",0,2)

"KRN",409.61,764,"COL","AIDENT",0,3)

"KRN",409.61,764,"COL","AIDENT",0,4)

"KRN",409.61,764,"COL","AIDENT",0,5)

"KRN",409.61,764,"COL","AIDENT",0,6)

"KRN",409.61,764,"COL","AIDENT",0,7)

"KRN",409.61,764,"COL","B","ADMIN",6)

"KRN",409.61,764,"COL","B","BILL NUMBER",1)

"KRN",409.61,764,"COL","B","BILL TYPE",3)

"KRN",409.61,764,"COL","B","CARE DATE",2)

"KRN",409.61,764,"COL","B","INTEREST",5)

"KRN",409.61,764,"COL","B","PRINCIPAL",4)

"KRN",409.61,764,"COL","B","STATUS",7)

"KRN",409.61,764,"FNL")
D EXIT^RCDPAPLM
"KRN",409.61,764,"HDR")
D HDR^RCDPAPLM
"KRN",409.61,764,"HLP")

"KRN",409.61,764,"INIT")
D INIT^RCDPAPLM
"MBREQ")
0
"ORD",3,19.1)
19.1;3;;;KEY^XPDTA1;KEYF1^XPDIA1;KEYE1^XPDIA1;KEYF2^XPDIA1;;KEYDEL^XPDIA1
"ORD",3,19.1,0)
SECURITY KEY
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",15,101)
101;15;;;PRO^XPDTA;PROF1^XPDIA;PROE1^XPDIA;PROF2^XPDIA;;PRODEL^XPDIA
"ORD",15,101,0)
PROTOCOL
"ORD",17,409.61)
409.61;17;1;;;;LME1^XPDIA1;;;LMDEL^XPDIA1
"ORD",17,409.61,0)
LIST TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",53,-1)
1^1
"PKG",53,0)
ACCOUNTS RECEIVABLE^PRCA^FMS
"PKG",53,20,0)
^9.402P^1^1
"PKG",53,20,1,0)
2^^PRCAMRG
"PKG",53,20,1,1)

"PKG",53,20,"B",2,1)

"PKG",53,22,0)
^9.49I^1^1
"PKG",53,22,1,0)
4.5^3051119^2960627
"PKG",53,22,1,"PAH",1,0)
315^3180402
"PKG",53,22,1,"PAH",1,1,0)
^^367^367^3171211
"PKG",53,22,1,"PAH",1,1,1,0)
 
"PKG",53,22,1,"PAH",1,1,2,0)
IMPORTANT INSTALLATION NOTE:
"PKG",53,22,1,"PAH",1,1,3,0)
----------------------------
"PKG",53,22,1,"PAH",1,1,4,0)
This patch is part of a multi-package build. There are three patches 
"PKG",53,22,1,"PAH",1,1,5,0)
associated with the FY16 HAPE Revenue Enhancement project - IB*2.0*568,
"PKG",53,22,1,"PAH",1,1,6,0)
PRCA*4.5*315 and PSO*7.0*463. All three patches are to be installed 
"PKG",53,22,1,"PAH",1,1,7,0)
together as a bundle, IB_2_568_PRCA_PSO_BUNDLE_T1.KID
"PKG",53,22,1,"PAH",1,1,8,0)
 
"PKG",53,22,1,"PAH",1,1,9,0)
 
"PKG",53,22,1,"PAH",1,1,10,0)
Description
"PKG",53,22,1,"PAH",1,1,11,0)
-----------
"PKG",53,22,1,"PAH",1,1,12,0)
The Chief Business Office (CBO) is requesting system enhancements to
"PKG",53,22,1,"PAH",1,1,13,0)
The Veterans Health Information Systems and Technology Architecture
"PKG",53,22,1,"PAH",1,1,14,0)
(VistA) Integrated Billing (IB), Accounts Receivable (AR), and 
"PKG",53,22,1,"PAH",1,1,15,0)
Outpatient Pharmacy (PSO) software modules.  
"PKG",53,22,1,"PAH",1,1,16,0)
 
"PKG",53,22,1,"PAH",1,1,17,0)
The mission of the Department of Veterans Affairs (VA), Office of 
"PKG",53,22,1,"PAH",1,1,18,0)
Information & Technology (OI&T), is to provide benefits and services 
"PKG",53,22,1,"PAH",1,1,19,0)
to veterans of the United States Armed Forces. In meeting these goals, 
"PKG",53,22,1,"PAH",1,1,20,0)
OIT strives to provide high quality, effective, and efficient 
"PKG",53,22,1,"PAH",1,1,21,0)
Information Technology (IT) services to those responsible for 
"PKG",53,22,1,"PAH",1,1,22,0)
providing care to the veterans at the point-of-care, as well as 
"PKG",53,22,1,"PAH",1,1,23,0)
throughout all the points of the veterans' health care. The VA depends
"PKG",53,22,1,"PAH",1,1,24,0)
on Information Management/InformationTechnology (IM/IT) systems to meet
"PKG",53,22,1,"PAH",1,1,25,0)
mission goals.
"PKG",53,22,1,"PAH",1,1,26,0)
 
"PKG",53,22,1,"PAH",1,1,27,0)
The overall FY16 HAPE Revenue Enhancement project has been further 
"PKG",53,22,1,"PAH",1,1,28,0)
divided into three sub-projects:
"PKG",53,22,1,"PAH",1,1,29,0)
 
"PKG",53,22,1,"PAH",1,1,30,0)
NSR #20150506
"PKG",53,22,1,"PAH",1,1,31,0)
The Revenue Eligibility Enhancements Project effort for the Chief 
"PKG",53,22,1,"PAH",1,1,32,0)
Business Office (CBO), bundles several NSRs with similar business 
"PKG",53,22,1,"PAH",1,1,33,0)
needs into a single requirements document.  Successfully addressing 
"PKG",53,22,1,"PAH",1,1,34,0)
the requirements contained within this document will enable the 
"PKG",53,22,1,"PAH",1,1,35,0)
Department of Veterans Affairs (VA) to appropriately bill certain 
"PKG",53,22,1,"PAH",1,1,36,0)
subsets of billable events by correcting, automating, or enhancing 
"PKG",53,22,1,"PAH",1,1,37,0)
current Veterans Health Information Systems and Technology Architecture
"PKG",53,22,1,"PAH",1,1,38,0)
(VistA) systems.
"PKG",53,22,1,"PAH",1,1,39,0)
 
"PKG",53,22,1,"PAH",1,1,40,0)
NSR #20150507
"PKG",53,22,1,"PAH",1,1,41,0)
The Revenue Operations Enhancements Project combines serveral NSRs, 
"PKG",53,22,1,"PAH",1,1,42,0)
as well. This effort enables the Department of Veterans Affairs (VA) 
"PKG",53,22,1,"PAH",1,1,43,0)
to improve revenue operation functionality related to repayment plans, 
"PKG",53,22,1,"PAH",1,1,44,0)
late charge capture, bill suspension reasons, the billing of 
"PKG",53,22,1,"PAH",1,1,45,0)
deactivated providers, and the display of appeal rights and 
"PKG",53,22,1,"PAH",1,1,46,0)
responsibilities on the Veterans Beneficiary travel Bill of Collections
"PKG",53,22,1,"PAH",1,1,47,0)
form.  Implementation of the proposed enhancements will make a 
"PKG",53,22,1,"PAH",1,1,48,0)
significant positive impact on stakeholders and target users.
"PKG",53,22,1,"PAH",1,1,49,0)
 
"PKG",53,22,1,"PAH",1,1,50,0)
NSR #20150505
"PKG",53,22,1,"PAH",1,1,51,0)
The Revenue Reporting Enhancements Project will enable the VA to 
"PKG",53,22,1,"PAH",1,1,52,0)
improve tracking and reporting of revenue, and will support revenue 
"PKG",53,22,1,"PAH",1,1,53,0)
reporting business rules and guidelines.
"PKG",53,22,1,"PAH",1,1,54,0)
 
"PKG",53,22,1,"PAH",1,1,55,0)
 
"PKG",53,22,1,"PAH",1,1,56,0)
PRCA*4.5*315 patch enhancements, pertinent to the above NSRs, include:
"PKG",53,22,1,"PAH",1,1,57,0)
 
"PKG",53,22,1,"PAH",1,1,58,0)
1.) By means of the new Enter / Edit Repayment Plan option, the user 
"PKG",53,22,1,"PAH",1,1,59,0)
will create the Repayment Plan by debtor. Note: The 'Enter / Edit 
"PKG",53,22,1,"PAH",1,1,60,0)
Repayment Plan' menu option name will replace the 'Set up Repayment 
"PKG",53,22,1,"PAH",1,1,61,0)
Plan' menu option name.
"PKG",53,22,1,"PAH",1,1,62,0)
 
"PKG",53,22,1,"PAH",1,1,63,0)
2.) On the Enter / Edit Repayment Plan option, if the AR Debtor has 
"PKG",53,22,1,"PAH",1,1,64,0)
Active bills, the system will now display a selectable list of bills 
"PKG",53,22,1,"PAH",1,1,65,0)
for the debtor.
"PKG",53,22,1,"PAH",1,1,66,0)
 
"PKG",53,22,1,"PAH",1,1,67,0)
3.) On the Enter / Edit Repayment Plan option, when displaying a list 
"PKG",53,22,1,"PAH",1,1,68,0)
of Active bills for the Debtor, the system will display steps to the 
"PKG",53,22,1,"PAH",1,1,69,0)
user to set up the Repayment Plan.
"PKG",53,22,1,"PAH",1,1,70,0)
 
"PKG",53,22,1,"PAH",1,1,71,0)
4.) On the Enter /Edit Repayment Plan option, once a Repayment Plan 
"PKG",53,22,1,"PAH",1,1,72,0)
has been created or modified, the summary of the Repayment Plan is 
"PKG",53,22,1,"PAH",1,1,73,0)
displayed.
"PKG",53,22,1,"PAH",1,1,74,0)
 
"PKG",53,22,1,"PAH",1,1,75,0)
5.) On the Enter / Edit Repayment Plan option, the system checks to 
"PKG",53,22,1,"PAH",1,1,76,0)
see if a Repayment Plan has already been created for the Veteran.  
"PKG",53,22,1,"PAH",1,1,77,0)
 
"PKG",53,22,1,"PAH",1,1,78,0)
6.) On the Enter / Edit Repayment Plan option, when choosing to Edit 
"PKG",53,22,1,"PAH",1,1,79,0)
the Repayment Plan, all Active bills for the debtor will be displayed
"PKG",53,22,1,"PAH",1,1,80,0)
allowing the user to add new Active bills to the Repayment Plan as well
"PKG",53,22,1,"PAH",1,1,81,0)
as change the due date of first payment and/or the repayment amount due 
"PKG",53,22,1,"PAH",1,1,82,0)
on the Repayment Plan. 
"PKG",53,22,1,"PAH",1,1,83,0)
 
"PKG",53,22,1,"PAH",1,1,84,0)
7.) On the Enter / Edit Repayment Plan option, if the Debtor does not 
"PKG",53,22,1,"PAH",1,1,85,0)
have new Active bills that can be added to the Repayment Plan, the user 
"PKG",53,22,1,"PAH",1,1,86,0)
will proceed to identify the repayment amount due and/or repayment 
"PKG",53,22,1,"PAH",1,1,87,0)
amount due date on the Repayment Plan.
"PKG",53,22,1,"PAH",1,1,88,0)
 
"PKG",53,22,1,"PAH",1,1,89,0)
8.) On the Enter / Edit Repayment Plan option, a designated identifier 
"PKG",53,22,1,"PAH",1,1,90,0)
will signify when an Active bill is part of a Repayment Plan. 
"PKG",53,22,1,"PAH",1,1,91,0)
 
"PKG",53,22,1,"PAH",1,1,92,0)
9.) On the Enter / Edit Repayment Plan option, the system will display 
"PKG",53,22,1,"PAH",1,1,93,0)
previously made payments to the Repayment Plan.
"PKG",53,22,1,"PAH",1,1,94,0)
 
"PKG",53,22,1,"PAH",1,1,95,0)
10.) On the Enter / Edit Repayment Plan option, the User has the option 
"PKG",53,22,1,"PAH",1,1,96,0)
to enter Debtor Comments during the setup process. 
"PKG",53,22,1,"PAH",1,1,97,0)
 
"PKG",53,22,1,"PAH",1,1,98,0)
11.) The AR Clerk will be able to select Suspended Type from the menu 
"PKG",53,22,1,"PAH",1,1,99,0)
to display in the Status Listing For Bills [PRCAL STATUS LIST] report.
"PKG",53,22,1,"PAH",1,1,100,0)
 
"PKG",53,22,1,"PAH",1,1,101,0)
12.) Status Listing For Bills [PRCAL STATUS LIST] report shall be 
"PKG",53,22,1,"PAH",1,1,102,0)
modified to incorporate reason for suspension.
"PKG",53,22,1,"PAH",1,1,103,0)
 
"PKG",53,22,1,"PAH",1,1,104,0)
13.) Provide the ability to lock the option to update late payment 
"PKG",53,22,1,"PAH",1,1,105,0)
charges (Interest/Admin/Penalty Rates [PRCAF U ADMIN.RATE]) with a new
"PKG",53,22,1,"PAH",1,1,106,0)
security key. 
"PKG",53,22,1,"PAH",1,1,107,0)
 
"PKG",53,22,1,"PAH",1,1,108,0)
14.) The system will allow the user to identify if the Bill of 
"PKG",53,22,1,"PAH",1,1,109,0)
Collections letter applies to Veterans Beneficiary Travel (Form 1114).
"PKG",53,22,1,"PAH",1,1,110,0)
 
"PKG",53,22,1,"PAH",1,1,111,0)
15.) The system will print the Notice of Rights and Responsibilities 
"PKG",53,22,1,"PAH",1,1,112,0)
when the Bill of Collections pertains to Veterans Beneficiary Travel.
"PKG",53,22,1,"PAH",1,1,113,0)
 
"PKG",53,22,1,"PAH",1,1,114,0)
16.) VistA AR Software Package shall discontinue generation of the 
"PKG",53,22,1,"PAH",1,1,115,0)
Mailman message/bulletin, "ARDC Detail Report for MON/ YYYY", without 
"PKG",53,22,1,"PAH",1,1,116,0)
interrupting any other transfer data within ARDC.
"PKG",53,22,1,"PAH",1,1,117,0)
 
"PKG",53,22,1,"PAH",1,1,118,0)
17.) The VistA AR Software Package shall allow the generation of a 
"PKG",53,22,1,"PAH",1,1,119,0)
report of bills containing the same information as the discontinued 
"PKG",53,22,1,"PAH",1,1,120,0)
"ARDC Detail Report for MON/YYYY" with the following exceptions/ 
"PKG",53,22,1,"PAH",1,1,121,0)
additions:
"PKG",53,22,1,"PAH",1,1,122,0)
        The report shall include current status bills (New Bill, Active, 
"PKG",53,22,1,"PAH",1,1,123,0)
        Returned for Amendment, Amended Bill, Open, and Suspended bills) 
"PKG",53,22,1,"PAH",1,1,124,0)
        only;
"PKG",53,22,1,"PAH",1,1,125,0)
 
"PKG",53,22,1,"PAH",1,1,126,0)
        The report shall include a column for the Fund number associated 
"PKG",53,22,1,"PAH",1,1,127,0)
        with each line item on the report; and 
"PKG",53,22,1,"PAH",1,1,128,0)
 
"PKG",53,22,1,"PAH",1,1,129,0)
        The report shall include a column for the RSC associated with 
"PKG",53,22,1,"PAH",1,1,130,0)
        each line item on the report.
"PKG",53,22,1,"PAH",1,1,131,0)
 
"PKG",53,22,1,"PAH",1,1,132,0)
18.) Currently, when non-healthcare debt of $25 or greater is in a 
"PKG",53,22,1,"PAH",1,1,133,0)
delinquent status for 180 days, VistA transmits this debt to TOP 
"PKG",53,22,1,"PAH",1,1,134,0)
(via AITC and DMC) for initiation of the standard collection process.
"PKG",53,22,1,"PAH",1,1,135,0)
To maintain compliance with The DATA Act of 2014, the 180-day date 
"PKG",53,22,1,"PAH",1,1,136,0)
parameter shall be changed to 120 days.
"PKG",53,22,1,"PAH",1,1,137,0)
 
"PKG",53,22,1,"PAH",1,1,138,0)
19.)  A new audit trail is needed for detailing events or transactions 
"PKG",53,22,1,"PAH",1,1,139,0)
that have occurred on healthcare debts referred for debt collection, to 
"PKG",53,22,1,"PAH",1,1,140,0)
effectively support Veterans and reconcile accounts.
"PKG",53,22,1,"PAH",1,1,141,0)
 
"PKG",53,22,1,"PAH",1,1,142,0)
20.)  VistA shall provide enhanced reporting capability, usability 
"PKG",53,22,1,"PAH",1,1,143,0)
features, and additional data elements for managing healthcare debts 
"PKG",53,22,1,"PAH",1,1,144,0)
referred for debt collection to improve VHA's ability to provide support 
"PKG",53,22,1,"PAH",1,1,145,0)
to Veterans and manage accounts.
"PKG",53,22,1,"PAH",1,1,146,0)
 
"PKG",53,22,1,"PAH",1,1,147,0)
21.)  Create report to track stop/reactivate debts. VistA shall provide 
"PKG",53,22,1,"PAH",1,1,148,0)
a Stop/Reactivate report to identify healthcare debts that are placed 
"PKG",53,22,1,"PAH",1,1,149,0)
in the corresponding status.
"PKG",53,22,1,"PAH",1,1,150,0)
 
"PKG",53,22,1,"PAH",1,1,151,0)
22.)  Improve automation in management of debt collection. VistA shall 
"PKG",53,22,1,"PAH",1,1,152,0)
utilize existing functionality, such as List Manager, and other 
"PKG",53,22,1,"PAH",1,1,153,0)
automation capabilities to improve debt collection management"
"PKG",53,22,1,"PAH",1,1,154,0)
 
"PKG",53,22,1,"PAH",1,1,155,0)
23.)  The existing Medication Co-Pay Exemption Report [PRCAX CO-PAY 
"PKG",53,22,1,"PAH",1,1,156,0)
EXEMPTION REPORT] shall be modified with the following field changes:
"PKG",53,22,1,"PAH",1,1,157,0)
        Change PT ID from full Social Security Number (SSN) to LastN + 
"PKG",53,22,1,"PAH",1,1,158,0)
             4SSN
"PKG",53,22,1,"PAH",1,1,159,0)
        Add Rx#
"PKG",53,22,1,"PAH",1,1,160,0)
        Add Drug Name (first 10 to 12 characters)
"PKG",53,22,1,"PAH",1,1,161,0)
        Add Fill/Refill Date
"PKG",53,22,1,"PAH",1,1,162,0)
        Add Effective Date of Exemption
"PKG",53,22,1,"PAH",1,1,163,0)
 
"PKG",53,22,1,"PAH",1,1,164,0)
24.)  A new Third Party Accounts Receivable category called 
"PKG",53,22,1,"PAH",1,1,165,0)
'EMERGENCY/HUMANITARIAN REIMB.' shall be created in Accounts Receivables 
"PKG",53,22,1,"PAH",1,1,166,0)
with the insurer as the responsible party. 
"PKG",53,22,1,"PAH",1,1,167,0)
 
"PKG",53,22,1,"PAH",1,1,168,0)
25.) A new Third Party Accounts Receivable category called 'INELIGIBLE 
"PKG",53,22,1,"PAH",1,1,169,0)
HOSP. REIMB' shall be created in Accounts Receivables with the insurer 
"PKG",53,22,1,"PAH",1,1,170,0)
as the responsible party. 
"PKG",53,22,1,"PAH",1,1,171,0)
 
"PKG",53,22,1,"PAH",1,1,172,0)
26.) A one-character "Type" field shall be added to the Claims Matching 
"PKG",53,22,1,"PAH",1,1,173,0)
Report that will indicate the third-party claim care-type ("I" for 
"PKG",53,22,1,"PAH",1,1,174,0)
Inpatient, "O" for Outpatient, "P" for Prosthetics, and "R" for 
"PKG",53,22,1,"PAH",1,1,175,0)
Prescription
"PKG",53,22,1,"PAH",1,1,176,0)
[Rx]) on the report of third-party bills.
"PKG",53,22,1,"PAH",1,1,177,0)
 
"PKG",53,22,1,"PAH",1,1,178,0)
27.) When a user generates a Claims Matching Report for a patient, all 
"PKG",53,22,1,"PAH",1,1,179,0)
records for that patient are currently produced on the report. At 
"PKG",53,22,1,"PAH",1,1,180,0)
times, users need to generate information regarding only certain types 
"PKG",53,22,1,"PAH",1,1,181,0)
of care for a patient.  The system shall allow the user to choose 
"PKG",53,22,1,"PAH",1,1,182,0)
between producing a Claims Matching Report containing (1) all records 
"PKG",53,22,1,"PAH",1,1,183,0)
for a patient, or (2) only records of a certain care type ("I" for 
"PKG",53,22,1,"PAH",1,1,184,0)
Inpatient, "O" for Outpatient, "P" for Prosthetics, or "R" for 
"PKG",53,22,1,"PAH",1,1,185,0)
Prescription [Rx]).
"PKG",53,22,1,"PAH",1,1,186,0)
 
"PKG",53,22,1,"PAH",1,1,187,0)
28.) The Claims Matching Report, when exported, shall be in a line 
"PKG",53,22,1,"PAH",1,1,188,0)
format so that information on the report may be easily exported to 
"PKG",53,22,1,"PAH",1,1,189,0)
Microsoft Excel.
"PKG",53,22,1,"PAH",1,1,190,0)
 
"PKG",53,22,1,"PAH",1,1,191,0)
 
"PKG",53,22,1,"PAH",1,1,192,0)
 
"PKG",53,22,1,"PAH",1,1,193,0)
Concurrent Development / Dependencies:
"PKG",53,22,1,"PAH",1,1,194,0)
--------------------------------------
"PKG",53,22,1,"PAH",1,1,195,0)
N/A
"PKG",53,22,1,"PAH",1,1,196,0)
 
"PKG",53,22,1,"PAH",1,1,197,0)
 
"PKG",53,22,1,"PAH",1,1,198,0)
Patch Components:
"PKG",53,22,1,"PAH",1,1,199,0)
-----------------
"PKG",53,22,1,"PAH",1,1,200,0)
 
"PKG",53,22,1,"PAH",1,1,201,0)
Files & Fields Associated:
"PKG",53,22,1,"PAH",1,1,202,0)
 
"PKG",53,22,1,"PAH",1,1,203,0)
File Name (Number)    Field Name (Number)     New/Modified/Deleted
"PKG",53,22,1,"PAH",1,1,204,0)
------------------    -------------------     --------------------
"PKG",53,22,1,"PAH",1,1,205,0)
N/A
"PKG",53,22,1,"PAH",1,1,206,0)
 
"PKG",53,22,1,"PAH",1,1,207,0)
Options Associated:
"PKG",53,22,1,"PAH",1,1,208,0)
 
"PKG",53,22,1,"PAH",1,1,209,0)
Option Name                     Type          New/Modified/Deleted
"PKG",53,22,1,"PAH",1,1,210,0)
-----------                     ----          --------------------
"PKG",53,22,1,"PAH",1,1,211,0)
PRCA ARDC REPORT                ROUTINE       NEW
"PKG",53,22,1,"PAH",1,1,212,0)
 
"PKG",53,22,1,"PAH",1,1,213,0)
Protocols Associated:
"PKG",53,22,1,"PAH",1,1,214,0)
 
"PKG",53,22,1,"PAH",1,1,215,0)
Protocol Name                                  New/Modified/Deleted
"PKG",53,22,1,"PAH",1,1,216,0)
-------------                                  --------------------
"PKG",53,22,1,"PAH",1,1,217,0)
N/A
"PKG",53,22,1,"PAH",1,1,218,0)
 
"PKG",53,22,1,"PAH",1,1,219,0)
Templates Associated:
"PKG",53,22,1,"PAH",1,1,220,0)
 
"PKG",53,22,1,"PAH",1,1,221,0)
Template Name                Type   File Name (Number)      New/Mod/Del
"PKG",53,22,1,"PAH",1,1,222,0)
-------------                ----   ------------------      -----------
"PKG",53,22,1,"PAH",1,1,223,0)
N/A
"PKG",53,22,1,"PAH",1,1,224,0)
 
"PKG",53,22,1,"PAH",1,1,225,0)
New Service Requests (NSRs):
"PKG",53,22,1,"PAH",1,1,226,0)
----------------------------
"PKG",53,22,1,"PAH",1,1,227,0)
20150505 - Revenue Reporting Enhancements
"PKG",53,22,1,"PAH",1,1,228,0)
20150506 - Revenue Eligibility Enhancements
"PKG",53,22,1,"PAH",1,1,229,0)
20150507 - Revenue Operations Enhancements
"PKG",53,22,1,"PAH",1,1,230,0)
 
"PKG",53,22,1,"PAH",1,1,231,0)
 
"PKG",53,22,1,"PAH",1,1,232,0)
Patient Safety Issues (PSIs):
"PKG",53,22,1,"PAH",1,1,233,0)
------------------------------
"PKG",53,22,1,"PAH",1,1,234,0)
N/A
"PKG",53,22,1,"PAH",1,1,235,0)
 
"PKG",53,22,1,"PAH",1,1,236,0)
 
"PKG",53,22,1,"PAH",1,1,237,0)
Remedy Ticket(s) & Overviews:
"PKG",53,22,1,"PAH",1,1,238,0)
-----------------------------
"PKG",53,22,1,"PAH",1,1,239,0)
N/A 
"PKG",53,22,1,"PAH",1,1,240,0)
 
"PKG",53,22,1,"PAH",1,1,241,0)
Test Sites:
"PKG",53,22,1,"PAH",1,1,242,0)
----------
"PKG",53,22,1,"PAH",1,1,243,0)
Durham VAMC
"PKG",53,22,1,"PAH",1,1,244,0)
 
"PKG",53,22,1,"PAH",1,1,245,0)
 
"PKG",53,22,1,"PAH",1,1,246,0)
Software and Documentation Retrieval Instructions:
"PKG",53,22,1,"PAH",1,1,247,0)
----------------------------------------------------
"PKG",53,22,1,"PAH",1,1,248,0)
Patches for this installation are combined in host file 
"PKG",53,22,1,"PAH",1,1,249,0)
IB_2_568_PRCA_PSO_BUNDLE_T1.KID
"PKG",53,22,1,"PAH",1,1,250,0)
 
"PKG",53,22,1,"PAH",1,1,251,0)
Installation of this host file should be coordinated among the packages 
"PKG",53,22,1,"PAH",1,1,252,0)
affected since only one installation is necessary.
"PKG",53,22,1,"PAH",1,1,253,0)
 
"PKG",53,22,1,"PAH",1,1,254,0)
The patches are:
"PKG",53,22,1,"PAH",1,1,255,0)
 
"PKG",53,22,1,"PAH",1,1,256,0)
     IB*2.0*568
"PKG",53,22,1,"PAH",1,1,257,0)
     PRCA*4.5*315
"PKG",53,22,1,"PAH",1,1,258,0)
     PSO*7.0*463
"PKG",53,22,1,"PAH",1,1,259,0)
     
"PKG",53,22,1,"PAH",1,1,260,0)
 
"PKG",53,22,1,"PAH",1,1,261,0)
Sites may retrieve the KIDS build in one of the following ways:
"PKG",53,22,1,"PAH",1,1,262,0)
 
"PKG",53,22,1,"PAH",1,1,263,0)
(1) The preferred method is to FTP the files from 
"PKG",53,22,1,"PAH",1,1,264,0)
download.vista.domain.ext
"PKG",53,22,1,"PAH",1,1,265,0)
which will transmit the files from the first available FTP server.
"PKG",53,22,1,"PAH",1,1,266,0)
 
"PKG",53,22,1,"PAH",1,1,267,0)
(2) Sites may also elect to retrieve the patch directly from a specific
"PKG",53,22,1,"PAH",1,1,268,0)
server as follows:
"PKG",53,22,1,"PAH",1,1,269,0)
 
"PKG",53,22,1,"PAH",1,1,270,0)
  OIFO               FTP ADDRESS                  DIRECTORY
"PKG",53,22,1,"PAH",1,1,271,0)
  --------------     ------------------------     ------------------
"PKG",53,22,1,"PAH",1,1,272,0)
  Albany             ftp.domain.ext     
"PKG",53,22,1,"PAH",1,1,273,0)
  Hines              ftp.domain.ext      
"PKG",53,22,1,"PAH",1,1,274,0)
  Salt Lake City     ftp.domain.ext        
"PKG",53,22,1,"PAH",1,1,275,0)
 
"PKG",53,22,1,"PAH",1,1,276,0)
 
"PKG",53,22,1,"PAH",1,1,277,0)
Sites may retrieve documentation directly using Secure File Transfer 
"PKG",53,22,1,"PAH",1,1,278,0)
Protocol (SFTP) from the ANONYMOUS.SOFTWARE directory at the following
"PKG",53,22,1,"PAH",1,1,279,0)
OI Field Offices:
"PKG",53,22,1,"PAH",1,1,280,0)
 
"PKG",53,22,1,"PAH",1,1,281,0)
Albany:          domain.ext
"PKG",53,22,1,"PAH",1,1,282,0)
Hines:           domain.ext
"PKG",53,22,1,"PAH",1,1,283,0)
Salt Lake City:  domain.ext
"PKG",53,22,1,"PAH",1,1,284,0)
 
"PKG",53,22,1,"PAH",1,1,285,0)
Documentation can also be found on the VA Software Documentation 
"PKG",53,22,1,"PAH",1,1,286,0)
Library at:
"PKG",53,22,1,"PAH",1,1,287,0)
http://www4.domain.ext/vdl/
"PKG",53,22,1,"PAH",1,1,288,0)
 
"PKG",53,22,1,"PAH",1,1,289,0)
Title                                      File Name           FTP Mode
"PKG",53,22,1,"PAH",1,1,290,0)
-----------------------------------------------------------------------
"PKG",53,22,1,"PAH",1,1,291,0)
Accounts Receivable Technical Manual/Security Guide 
"PKG",53,22,1,"PAH",1,1,292,0)
                                           prca_4_5_tm+r0515.doc Binary
"PKG",53,22,1,"PAH",1,1,293,0)
Accounts Receivable Deployment, Installation, 
"PKG",53,22,1,"PAH",1,1,294,0)
     Back-Out, and Rollback Guide   
"PKG",53,22,1,"PAH",1,1,295,0)
              FY16RevenueARVIP_Deployment_Installation_Guide.doc Binary 
"PKG",53,22,1,"PAH",1,1,296,0)
 
"PKG",53,22,1,"PAH",1,1,297,0)
 
"PKG",53,22,1,"PAH",1,1,298,0)
 
"PKG",53,22,1,"PAH",1,1,299,0)
Patch Installation:
"PKG",53,22,1,"PAH",1,1,300,0)
 
"PKG",53,22,1,"PAH",1,1,301,0)
Pre/Post Installation Overview:
"PKG",53,22,1,"PAH",1,1,302,0)
-------------------------------
"PKG",53,22,1,"PAH",1,1,303,0)
The post installation routine, PRCA315P, is not automatically deleted
"PKG",53,22,1,"PAH",1,1,304,0)
as part of the installation process. You may delete it after
"PKG",53,22,1,"PAH",1,1,305,0)
installation if you desire.
"PKG",53,22,1,"PAH",1,1,306,0)
 
"PKG",53,22,1,"PAH",1,1,307,0)
Pre-Installation Instructions:
"PKG",53,22,1,"PAH",1,1,308,0)
------------------------------
"PKG",53,22,1,"PAH",1,1,309,0)
N/A
"PKG",53,22,1,"PAH",1,1,310,0)
 
"PKG",53,22,1,"PAH",1,1,311,0)
Installation Instructions:
"PKG",53,22,1,"PAH",1,1,312,0)
--------------------------
"PKG",53,22,1,"PAH",1,1,313,0)
This process will install new and updated routines and other 
"PKG",53,22,1,"PAH",1,1,314,0)
components listed above. There is a post-install routine that will add 
"PKG",53,22,1,"PAH",1,1,315,0)
entries to a number of files.
"PKG",53,22,1,"PAH",1,1,316,0)
 
"PKG",53,22,1,"PAH",1,1,317,0)
The patch will be released in conjunction with an Integrated Billing
"PKG",53,22,1,"PAH",1,1,318,0)
patch, IB*4.5*568, and an Outpatient Pharmacy patch, PSO*7.0*463.
"PKG",53,22,1,"PAH",1,1,319,0)
 
"PKG",53,22,1,"PAH",1,1,320,0)
  ************************ NOTE ************************
"PKG",53,22,1,"PAH",1,1,321,0)
  IF A USER IS ON THE SYSTEM AND USING THESE PROGRAMS 
"PKG",53,22,1,"PAH",1,1,322,0)
  AN EDITED ERROR WILL OCCUR.  
"PKG",53,22,1,"PAH",1,1,323,0)
  The patch should be installed when NO Outpatient 
"PKG",53,22,1,"PAH",1,1,324,0)
  Pharmacy users are on the system.
"PKG",53,22,1,"PAH",1,1,325,0)
  ******************************************************
"PKG",53,22,1,"PAH",1,1,326,0)
 
"PKG",53,22,1,"PAH",1,1,327,0)
 Installation will take less than 1 minute.
"PKG",53,22,1,"PAH",1,1,328,0)
 
"PKG",53,22,1,"PAH",1,1,329,0)
 Suggested time to install: non-peak requirement hours.
"PKG",53,22,1,"PAH",1,1,330,0)
 
"PKG",53,22,1,"PAH",1,1,331,0)
 
"PKG",53,22,1,"PAH",1,1,332,0)
  1. Obtain the file IB_2_568_PRCA_PSO_BUNDLE_T1.KID
"PKG",53,22,1,"PAH",1,1,333,0)
    
"PKG",53,22,1,"PAH",1,1,334,0)
  2. From the Kernel Installation & Distribution System menu, select
"PKG",53,22,1,"PAH",1,1,335,0)
     the Installation menu.
"PKG",53,22,1,"PAH",1,1,336,0)
  
"PKG",53,22,1,"PAH",1,1,337,0)
  3. Use Load a Distribution using IB_2_568_PRCA_PSO_BUNDLE_T1.KID when
"PKG",53,22,1,"PAH",1,1,338,0)
     prompted to Enter a Host File name.  You may need to append a
"PKG",53,22,1,"PAH",1,1,339,0)
     directory name.
"PKG",53,22,1,"PAH",1,1,340,0)
  
"PKG",53,22,1,"PAH",1,1,341,0)
  4. From this menu, you may select to use the following options
"PKG",53,22,1,"PAH",1,1,342,0)
     (when prompted for INSTALL NAME, enter IB*2.0*568):
"PKG",53,22,1,"PAH",1,1,343,0)
         a.  Verify Checksums in Transport Global - This option will 
"PKG",53,22,1,"PAH",1,1,344,0)
             allow you to ensure the integrity of the routines that are 
"PKG",53,22,1,"PAH",1,1,345,0)
             in the transport global.
"PKG",53,22,1,"PAH",1,1,346,0)
         b.  Print Transport Global - This option will allow you to 
"PKG",53,22,1,"PAH",1,1,347,0)
             view the components of the KIDS build.
"PKG",53,22,1,"PAH",1,1,348,0)
         c.  Compare Transport Global to Current System - This option 
"PKG",53,22,1,"PAH",1,1,349,0)
             will allow you to view all changes that will be made when 
"PKG",53,22,1,"PAH",1,1,350,0)
             this patch is installed.  It compares all components of 
"PKG",53,22,1,"PAH",1,1,351,0)
             this patch (routines, DD's, templates, etc.).
"PKG",53,22,1,"PAH",1,1,352,0)
         d.  Backup a Transport Global - This option will create a 
"PKG",53,22,1,"PAH",1,1,353,0)
             backup message of any routines exported with this patch. 
"PKG",53,22,1,"PAH",1,1,354,0)
             It will not backup any other changes such as DD's or 
"PKG",53,22,1,"PAH",1,1,355,0)
             templates.
"PKG",53,22,1,"PAH",1,1,356,0)
   
"PKG",53,22,1,"PAH",1,1,357,0)
  5. When prompted "Want KIDS to INHIBIT LOGONs during the install? 
"PKG",53,22,1,"PAH",1,1,358,0)
     NO//" respond NO.
"PKG",53,22,1,"PAH",1,1,359,0)
   
"PKG",53,22,1,"PAH",1,1,360,0)
  6. When prompted "Want to DISABLE Scheduled Options, Menu Options, 
"PKG",53,22,1,"PAH",1,1,361,0)
     and Protocols? NO//" respond NO. 
"PKG",53,22,1,"PAH",1,1,362,0)
 
"PKG",53,22,1,"PAH",1,1,363,0)
 
"PKG",53,22,1,"PAH",1,1,364,0)
 
"PKG",53,22,1,"PAH",1,1,365,0)
Post-Installation Instructions:
"PKG",53,22,1,"PAH",1,1,366,0)
-------------------------------
"PKG",53,22,1,"PAH",1,1,367,0)
There are no special tasks to perform after this patch installation.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
58
"RTN","PRCA315P")
0^^B51110458^n/a
"RTN","PRCA315P",1,0)
PRCA315P ;SLT/BAA-PRCA*4.5*315 POST INSTALL ;1 Mar 97
"RTN","PRCA315P",2,0)
 ;;4.5;Accounts Receivable;**315**;Mar 20, 1995;Build 67
"RTN","PRCA315P",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCA315P",4,0)
POSTINIT ;
"RTN","PRCA315P",5,0)
 ;
"RTN","PRCA315P",6,0)
 D BMES^XPDUTL(" >>  Starting the Post-Initialization routine ...")
"RTN","PRCA315P",7,0)
 D MES^XPDUTL(" ")
"RTN","PRCA315P",8,0)
 ; AR CATEGORIES
"RTN","PRCA315P",9,0)
 D ARCAT
"RTN","PRCA315P",10,0)
 D REVSC
"RTN","PRCA315P",11,0)
 D DELOPT
"RTN","PRCA315P",12,0)
 D CRSSVC
"RTN","PRCA315P",13,0)
 D CSJOB
"RTN","PRCA315P",14,0)
 D MES^XPDUTL(" >>  End of the Post-Initialization routine ...")
"RTN","PRCA315P",15,0)
 Q
"RTN","PRCA315P",16,0)
 ;
"RTN","PRCA315P",17,0)
 ;
"RTN","PRCA315P",18,0)
ARCAT ;AR CATEGORY ENTRIES (430.2)
"RTN","PRCA315P",19,0)
 N %,ARNAME,D,D0,DA,DI,DIC,DIE,DIK,DINUM,DLAYGO,DQ,DR,RCDATA,RCDINUM,X,Y,FLG,RCS
"RTN","PRCA315P",20,0)
 D MES^XPDUTL("     -> Adding new ACCOUNTS RECEIVABLE CATEGORY file (#430.2) entries ...")
"RTN","PRCA315P",21,0)
 ;
"RTN","PRCA315P",22,0)
 ;  install entries in file 430.2
"RTN","PRCA315P",23,0)
 S FLG=0
"RTN","PRCA315P",24,0)
 F RCDINUM=46,47 D
"RTN","PRCA315P",25,0)
 . S RCS="CT"_RCDINUM
"RTN","PRCA315P",26,0)
 . S RCDATA=$P($T(@RCS),";",3,99)
"RTN","PRCA315P",27,0)
 . S (DIC,DIE)="^PRCA(430.2,",DIC(0)="L",DLAYGO=430.2
"RTN","PRCA315P",28,0)
 . ;
"RTN","PRCA315P",29,0)
 . S ARNAME=$P(RCDATA,";")
"RTN","PRCA315P",30,0)
 . ;
"RTN","PRCA315P",31,0)
 . I $D(^PRCA(430.2,RCDINUM,0)) S DIK="^PRCA(430.2,",DA=RCDINUM D ^DIK
"RTN","PRCA315P",32,0)
 . ;
"RTN","PRCA315P",33,0)
 . S (DIC,DIE)="^PRCA(430.2,",DIC(0)="L",DLAYGO=430.2
"RTN","PRCA315P",34,0)
 . ;
"RTN","PRCA315P",35,0)
 . ;  set the fields
"RTN","PRCA315P",36,0)
 . S (DINUM,DA)=RCDINUM,X=ARNAME
"RTN","PRCA315P",37,0)
 . S DIC("DR")="1///"_$P(RCDATA,";",2)_";2///"_$P(RCDATA,";",3)_";3///"_$P(RCDATA,";",6)_";5///"_$P(RCDATA,";",5)_";6///"_$P(RCDATA,";",4)
"RTN","PRCA315P",38,0)
 . S DIC("DR")=DIC("DR")_";7///2;9///0;10///0;11///0;12///"_$P(RCDATA,";",7)_";13///2;"
"RTN","PRCA315P",39,0)
 . ;  add entry
"RTN","PRCA315P",40,0)
 . S X=ARNAME D FILE^DICN K DIC I Y<1 K X,Y Q
"RTN","PRCA315P",41,0)
 . D MES^XPDUTL("        New Category "_ARNAME_" added") S FLG=1
"RTN","PRCA315P",42,0)
 ;
"RTN","PRCA315P",43,0)
 I FLG D MES^XPDUTL("        New ACCOUNTS RECEIVABLE CATEGORY file (#430.2) entries added")
"RTN","PRCA315P",44,0)
 D MES^XPDUTL("  ")
"RTN","PRCA315P",45,0)
 Q
"RTN","PRCA315P",46,0)
 ;
"RTN","PRCA315P",47,0)
 ;
"RTN","PRCA315P",48,0)
REVSC ;REVENUE SOURCE CODE entries in file #347.3
"RTN","PRCA315P",49,0)
 N I,RSCDATA,DIC,Y,GBL,DA,X,DIE,DR
"RTN","PRCA315P",50,0)
 D MES^XPDUTL("     -> Adding new REVENUE SOURCE CODE file (#347.3) entries ...")
"RTN","PRCA315P",51,0)
 S GBL="^RC(347.3,"
"RTN","PRCA315P",52,0)
 F I=1:1 D  Q:RSCDATA="END"
"RTN","PRCA315P",53,0)
 . S RSCDATA=$P($T(NEWRSC+I),";",3,99)
"RTN","PRCA315P",54,0)
 . Q:RSCDATA="END"
"RTN","PRCA315P",55,0)
 . ; do a lookup and continue if exists.
"RTN","PRCA315P",56,0)
 . S DIC=GBL,X=$P(RSCDATA,";") D ^DIC
"RTN","PRCA315P",57,0)
 . I +Y>0 S DIK=GBL,DA=+Y D ^DIK
"RTN","PRCA315P",58,0)
 . ; add entry
"RTN","PRCA315P",59,0)
 . S X=$P(RSCDATA,";")
"RTN","PRCA315P",60,0)
 . S DIC("DR")=".02///"_$P(RSCDATA,";",2)_";",DIC(0)="L"
"RTN","PRCA315P",61,0)
 . S DIC("DR")=DIC("DR")_".03///0;"
"RTN","PRCA315P",62,0)
 . D FILE^DICN
"RTN","PRCA315P",63,0)
 . I +Y=-1 D
"RTN","PRCA315P",64,0)
 . . D MES^XPDUTL("        "_$P(RSCDATA,";")_" failed to add!")
"RTN","PRCA315P",65,0)
 D MES^XPDUTL("        New REVENUE SOURCE CODE file (#347.3) entries added")
"RTN","PRCA315P",66,0)
 Q
"RTN","PRCA315P",67,0)
 ;
"RTN","PRCA315P",68,0)
 ;
"RTN","PRCA315P",69,0)
DELOPT ; remove PRCAC SET REPAYMENT option
"RTN","PRCA315P",70,0)
 N DA,DIK,MEN,OPT,RET
"RTN","PRCA315P",71,0)
 ; RET - value returned from
"RTN","PRCA315P",72,0)
 S MEN="PRCAC REPAYMENT MENU"
"RTN","PRCA315P",73,0)
 S DA(1)=+$$LKOPT^XPDMENU(MEN)
"RTN","PRCA315P",74,0)
 S OPT="PRCAC SET REPAYMENT"
"RTN","PRCA315P",75,0)
 D BMES^XPDUTL("     -> Updating ["_MEN_"]")
"RTN","PRCA315P",76,0)
 S RET=$$DELETE^XPDMENU(MEN,OPT)  ; delete option from menu
"RTN","PRCA315P",77,0)
 S DA=+$$LKOPT^XPDMENU(OPT)  ; get option IEN
"RTN","PRCA315P",78,0)
 I DA>0 S DIK="^DIC(19," D ^DIK  ; code can be re-run if already deleted
"RTN","PRCA315P",79,0)
 D MES^XPDUTL("        Menu update "_$S(RET:"completed.",1:"not needed."))
"RTN","PRCA315P",80,0)
 S OPT="PRCAC ENTER EDIT REPAYMENT"
"RTN","PRCA315P",81,0)
 S DA=+$$LKOPT^XPDMENU(OPT)  ; get option IEN
"RTN","PRCA315P",82,0)
 I $D(^DIC(19,DA(1),10,"B",DA)) Q  ; Option already added
"RTN","PRCA315P",83,0)
 D ADD^XPDMENU(MEN,OPT,"",1) ; Set Enter/Edit Repayment as the first item in Repayment Menu
"RTN","PRCA315P",84,0)
 Q
"RTN","PRCA315P",85,0)
 ;
"RTN","PRCA315P",86,0)
CRSSVC ;Cross-servicing - Replace (renamed) menu options - RCTCSP RECONCILIATION WORKLIST, RCTCSP RECONCIL REPORT options to menu - Cross-Servicing Menu [RCTCSP MENU]
"RTN","PRCA315P",87,0)
 N DA,DIK,MEN,OPT,RET
"RTN","PRCA315P",88,0)
 ; RET - value returned from
"RTN","PRCA315P",89,0)
 S MEN="RCTCSP MENU"
"RTN","PRCA315P",90,0)
 S DA(1)=+$$LKOPT^XPDMENU(MEN)
"RTN","PRCA315P",91,0)
 D BMES^XPDUTL("     -> Updating ["_MEN_"]")
"RTN","PRCA315P",92,0)
 F OPT="RCTCSP RECONCILIATION WORKLIST","RCTCSP RECONCIL REPORT" D
"RTN","PRCA315P",93,0)
 . K RET S RET=$$DELETE^XPDMENU(MEN,OPT)  ; delete option from menu
"RTN","PRCA315P",94,0)
 . S DA=+$$LKOPT^XPDMENU(OPT)  ; get option IEN
"RTN","PRCA315P",95,0)
 . D MES^XPDUTL("        Menu update to option:  "_OPT_"  "_$S(RET:"completed.",1:"not needed."))
"RTN","PRCA315P",96,0)
 . I $D(^DIC(19,DA(1),10,"B",DA)) Q  ; Option already added
"RTN","PRCA315P",97,0)
 . D ADD^XPDMENU(MEN,OPT,"")
"RTN","PRCA315P",98,0)
 Q
"RTN","PRCA315P",99,0)
 ;
"RTN","PRCA315P",100,0)
CSJOB ;Job the process to build the new Cross-Servicing data fields.
"RTN","PRCA315P",101,0)
 N ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSK
"RTN","PRCA315P",102,0)
 ;
"RTN","PRCA315P",103,0)
 D BMES^XPDUTL("     -> Queuing background job to do the following:")
"RTN","PRCA315P",104,0)
 D MES^XPDUTL("        1. Populate Cross-Servicing indices in ACCOUNTS RECEIVABLE file (#430)")
"RTN","PRCA315P",105,0)
 D MES^XPDUTL("        2. Searching ACCOUNTS RECEIVABLE file (#430) for CS Stops placed")
"RTN","PRCA315P",106,0)
 D MES^XPDUTL("           prior to this patch in field STOP TCSP REFERRAL FLAG (#157).")
"RTN","PRCA315P",107,0)
 D MES^XPDUTL("        3. Populate new field ORIGINAL DATE REFERRED TO TCSP (#156) in ACCOUNTS")
"RTN","PRCA315P",108,0)
 D MES^XPDUTL("           RECEIVABLE file (#430).")
"RTN","PRCA315P",109,0)
 D MES^XPDUTL(" ")
"RTN","PRCA315P",110,0)
 ;
"RTN","PRCA315P",111,0)
 ; Setup required variables
"RTN","PRCA315P",112,0)
 S ZTRTN="CSJOB1^PRCA315P",ZTIO="",ZTDTH=$H
"RTN","PRCA315P",113,0)
 S ZTDESC="Background job to build CS indices for PRCA*4.5*315"
"RTN","PRCA315P",114,0)
 ;
"RTN","PRCA315P",115,0)
 ; Task the job
"RTN","PRCA315P",116,0)
 D ^%ZTLOAD
"RTN","PRCA315P",117,0)
 ;
"RTN","PRCA315P",118,0)
 ; Check if task was created
"RTN","PRCA315P",119,0)
 I $D(ZTSK) D MES^XPDUTL("        Task #"_ZTSK_" queued.")
"RTN","PRCA315P",120,0)
 I '$D(ZTSK) D MES^XPDUTL("        Task not queued.  Please create a support ticket.")
"RTN","PRCA315P",121,0)
 D MES^XPDUTL("  ")
"RTN","PRCA315P",122,0)
 Q
"RTN","PRCA315P",123,0)
 ;
"RTN","PRCA315P",124,0)
CSJOB1 ;Populate new indices in #430
"RTN","PRCA315P",125,0)
 K ^TMP($J)
"RTN","PRCA315P",126,0)
 S DIK="^PRCA(430,",DIK(1)="172" D ENALL^DIK
"RTN","PRCA315P",127,0)
 S ^TMP($J,"PRCA315P",1)="FILE #430 FIELD #172 INDEX POPULATED"
"RTN","PRCA315P",128,0)
 S DIK="^PRCA(430,",DIK(1)="301" D ENALL^DIK
"RTN","PRCA315P",129,0)
 S ^TMP($J,"PRCA315P",2)="FILE #430 FIELD #301 INDEX POPULATED"
"RTN","PRCA315P",130,0)
 ;
"RTN","PRCA315P",131,0)
CSSTOP ;determine CS stops placed in 430 prior to Patch 315
"RTN","PRCA315P",132,0)
 N RCIEN,DEBTOR,BILL,CSDATE,LIST,MSG,GLO
"RTN","PRCA315P",133,0)
 N DIFROM,XMDUN,XMY,XMZ ;  need to be newed or mailman will not deliver the message
"RTN","PRCA315P",134,0)
 S GLO=$NA(^TMP($J,"RCRJRCORMM"))
"RTN","PRCA315P",135,0)
 ;
"RTN","PRCA315P",136,0)
 S @GLO@(1)="Bills currently flagged to stop TCSP referral activity prior"
"RTN","PRCA315P",137,0)
 S @GLO@(2)="to PRCA*4.5*315. These bills will not show on the new report:"
"RTN","PRCA315P",138,0)
 S @GLO@(3)="'Cross-Servicing Stop Reactivate Report'."
"RTN","PRCA315P",139,0)
 S @GLO@(4)="  "
"RTN","PRCA315P",140,0)
 S RCIEN=0 F  S RCIEN=$O(^PRCA(430,RCIEN)) Q:'RCIEN  D
"RTN","PRCA315P",141,0)
 . K LIST
"RTN","PRCA315P",142,0)
 . I $P($G(^PRCA(430,RCIEN,15)),U,7) D
"RTN","PRCA315P",143,0)
 .. D GETS^DIQ(430,RCIEN_",",".01;9;158","IE","LIST","MSG")
"RTN","PRCA315P",144,0)
 .. S BILL=$G(LIST(430,RCIEN_",",.01,"E")),DEBTOR=$G(LIST(430,RCIEN_",",9,"E")),CSDATE=$G(LIST(430,RCIEN_",",158,"E"))
"RTN","PRCA315P",145,0)
 .. S @GLO@(RCIEN)=BILL_U_DEBTOR_U_CSDATE
"RTN","PRCA315P",146,0)
 . ;Load date into field #156, ORIGINAL DATE REFERRED TO TCSP
"RTN","PRCA315P",147,0)
 . I $G(^PRCA(439,RCIEN,21)) Q
"RTN","PRCA315P",148,0)
 . D GETS^DIQ(430,RCIEN_",","151;153;158","I","LIST","MSG")
"RTN","PRCA315P",149,0)
 . F I=151,153,158 I LIST(430,RCIEN_",",I,"I")?7N S ^PRCA(430,RCIEN,21)=LIST(430,RCIEN_",",I,"I") Q
"RTN","PRCA315P",150,0)
 S ^TMP($J,"PRCA315P",3)="BILLS CURRENTLY FLAGGED TO STOP TCSP REPORT CREATED"
"RTN","PRCA315P",151,0)
 S ^TMP($J,"PRCA315P",4)="FILE #430 FIELD #156 VALUES POPULATED"
"RTN","PRCA315P",152,0)
 S XMDUZ=.5,XMY(.5)="",XMY(DUZ)="",XMY("G.TCSP")=""
"RTN","PRCA315P",153,0)
 S XMZ=$$SENDMSG^RCRJRCOR("STOP TCSP REFERRAL's existing before PRCA*4.5*315",.XMY)
"RTN","PRCA315P",154,0)
 K ^TMP($J,"RCRJRCORMM")
"RTN","PRCA315P",155,0)
 S ^TMP($J,"PRCA315P",5)="BILLS CURRENTLY FLAGGED TO STOP TCSP REPORT MAIL SENT"
"RTN","PRCA315P",156,0)
 ;
"RTN","PRCA315P",157,0)
 N CNT,MSG,XMY,XMDUZ,DIFROM,XMSUB,XMTEXT
"RTN","PRCA315P",158,0)
 S XMY(DUZ)=""
"RTN","PRCA315P",159,0)
 S XMSUB="PRCA*4.5*315 Post install routine has completed",XMDUZ="Patch PRCA*4.5*315"
"RTN","PRCA315P",160,0)
 S XMTEXT="^TMP($J,""PRCA315P"","
"RTN","PRCA315P",161,0)
 D ^XMD
"RTN","PRCA315P",162,0)
 Q
"RTN","PRCA315P",163,0)
 ;
"RTN","PRCA315P",164,0)
 ;Revenue Source Codes (RSC#)//
"RTN","PRCA315P",165,0)
NEWRSC ;SOURCE CODE;NAME
"RTN","PRCA315P",166,0)
 ;;8VZZ;HUMAN 3RD-PRTY OUTPATIENT
"RTN","PRCA315P",167,0)
 ;;8UZZ;HUMAN 3RD-PRTY INPATIENT
"RTN","PRCA315P",168,0)
 ;;841Z;INELI 3RD-PARTY INPATIENT
"RTN","PRCA315P",169,0)
 ;;842Z;INELI 3RD-PARTY OUTPATIENT 
"RTN","PRCA315P",170,0)
 ;;END
"RTN","PRCA315P",171,0)
 ;
"RTN","PRCA315P",172,0)
 ;
"RTN","PRCA315P",173,0)
 ;;ACCOUNTS RECEIVABLE CATEGORY FILE (#430.2)
"RTN","PRCA315P",174,0)
 ;;.01 CATEGORY;1 ABBREVIATION;6 CATEGORY NUMBER;7 ACCRUED
"RTN","PRCA315P",175,0)
CT46 ;;EMERGENCY/HUMANITARIAN REIMB.;HR;252;48;T;1213;1
"RTN","PRCA315P",176,0)
CT47 ;;INELIGIBLE HOSP. REIMB.;IR;251;49;T;1213;0
"RTN","PRCAAPR1")
0^19^B49707336^B45827636
"RTN","PRCAAPR1",1,0)
PRCAAPR1 ;WASH-ISC@ALTOONA,PA/RGY - PATIENT ACCOUNT PROFILE ;2/12/97  11:48 AM
"RTN","PRCAAPR1",2,0)
 ;;4.5;Accounts Receivable;**34,45,108,143,141,206,192,218,276,275,284,303,301,315**;Mar 20, 1995;Build 67
"RTN","PRCAAPR1",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCAAPR1",4,0)
 ;
"RTN","PRCAAPR1",5,0)
HDR ;Head for Account profile
"RTN","PRCAAPR1",6,0)
 S X="",$P(X,"=",23)="" W @IOF,!,X,"   A c c o u n t   P r o f i l e   ",X
"RTN","PRCAAPR1",7,0)
HDR1 N DMC,IBRX,RSN,TOP4,TOP6,DPTFLG,ACCTNUM,RCCV
"RTN","PRCAAPR1",8,0)
 S IBRX=0,DPTFLG=0
"RTN","PRCAAPR1",9,0)
 ;
"RTN","PRCAAPR1",10,0)
 ; PRCAAPR cleans up BILL, COUNT, DEBT, DTOUT, DIC, OUT, PRCADB, SEL, X
"RTN","PRCAAPR1",11,0)
 ;Display new 'Statement Account Number" (Patch 206)
"RTN","PRCAAPR1",12,0)
 I PRCADB["DPT(" S DPTFLG=1,ACCTNUM=$$ACCT(PRCADB)
"RTN","PRCAAPR1",13,0)
 ;
"RTN","PRCAAPR1",14,0)
 W !,$P(DEBT,"^",2) I DPTFLG!(PRCADB["VA(200,") S X=$S(PRCADB["DPT(":$P(^DPT(+PRCADB,0),"^",9),1:$P($G(^VA(200,+PRCADB,1)),"^",9)) W " (",$E(X,1,3),"-",$E(X,4,5),"-",$E(X,6,9),")"
"RTN","PRCAAPR1",15,0)
 W ?53,"Statement Day: ",$S($$PST^RCAMFN01(+DEBT)>0:$$PST^RCAMFN01(+DEBT),1:"N/A")
"RTN","PRCAAPR1",16,0)
 K Y S X("ADD")=$$DADD^RCAMADD(PRCADB)
"RTN","PRCAAPR1",17,0)
 ;
"RTN","PRCAAPR1",18,0)
 ;Display new 'Statement Account Number" (Patch 206)
"RTN","PRCAAPR1",19,0)
 I DPTFLG W !,"Statement Account #: ",ACCTNUM,?52,"Last Statement: "
"RTN","PRCAAPR1",20,0)
 E  W !?52,"Last Statement: "
"RTN","PRCAAPR1",21,0)
 ;
"RTN","PRCAAPR1",22,0)
 S Y=+$$LST^RCFN01(PRCADB,2)
"RTN","PRCAAPR1",23,0)
 I Y>0 S Y("CCPC")=$$FPS^RCCPCFN(+DEBT) S:Y("CCPC") Y=+$P(Y("CCPC"),"^")
"RTN","PRCAAPR1",24,0)
 W $S(Y=-1:"N/A",1:$$SLH^RCFN01(Y))
"RTN","PRCAAPR1",25,0)
 W !,$P(X("ADD"),"^")
"RTN","PRCAAPR1",26,0)
 W:+$G(Y("CCPC")) ?52,"Activity as of: ",$$SLH^RCFN01($$ASOF^RCCPCFN($P(Y("CCPC"),"^",2)))
"RTN","PRCAAPR1",27,0)
 W:$P(X("ADD"),"^",2)]"" !,$P(X("ADD"),"^",2) W:$P(X("ADD"),"^",3)]"" !,$P(X("ADD"),"^",3)
"RTN","PRCAAPR1",28,0)
 W ! W:$P(X("ADD"),"^",4)]"" $P(X("ADD"),"^",4),", ",$P(X("ADD"),"^",5),"  ",$S($P(X("ADD"),"^",6):$P(X("ADD"),"^",6),1:$P(X("ADD"),"^",8))
"RTN","PRCAAPR1",29,0)
 W ?55,"Amount Owed: ",?69,$J(+$G(^TMP("PRCAAPR",$J,"C")),9,2)
"RTN","PRCAAPR1",30,0)
 W !,"Phone #: ",$S($P(X("ADD"),"^",7)]"":$P(X("ADD"),"^",7),1:"N/A")
"RTN","PRCAAPR1",31,0)
 I PRCADB["DPT(" W ?51,"RX Copay Exempt: " S IBRX=$$RXST^IBARXEU(+PRCADB,DT) W $S($P(IBRX,U)=1:"YES",$P(IBRX,U)=0:"NO",1:"N/A")
"RTN","PRCAAPR1",32,0)
 I PRCADB["DPT(" W !?57,"CV Status: " S RCCV=$$CVEDT^DGCV(+PRCADB,DT) W $S($P(RCCV,U,3)>0:"YES",1:"NO") I $P(RCCV,U,2) W !?52,"CV Status Ends: ",$$SLH^RCFN01($P(RCCV,U,2))
"RTN","PRCAAPR1",33,0)
 ; *108 add exemption reason/dmc info
"RTN","PRCAAPR1",34,0)
 I IBRX>0,($P(IBRX,U)=1) S DIC="^IBE(354.2,",DIC(0)="M",X=+$P(IBRX,"^",3) D ^DIC I Y>0 W !,?54,"(",$P(Y,"^",2),")"
"RTN","PRCAAPR1",35,0)
 I $D(^RCD(340,"DMC",1,+DEBT)) S DMC=$G(^RCD(340,+DEBT,3)) D
"RTN","PRCAAPR1",36,0)
 .I $P(DMC,"^",2) W !,"** Account forwarded to DMC: ",$$SLH^RCFN01($P(DMC,"^",2)),?50,"Total DMC Amount: ",?69,$J($P(DMC,"^",5),9,2)
"RTN","PRCAAPR1",37,0)
 .I $P(DMC,"^",9)'="" W !,?49,"Lesser Amt to DMC: ",?69,$J($P(DMC,"^",9),9,2)
"RTN","PRCAAPR1",38,0)
 .Q
"RTN","PRCAAPR1",39,0)
 I $D(^RCD(340,"TOP",+DEBT)) S TOP4=$G(^RCD(340,+DEBT,4)),TOP6=$G(^(6)) D
"RTN","PRCAAPR1",40,0)
 .I +TOP6 W !,"** Account forwarded to TOP: ",$$SLH^RCFN01($P(TOP6,"^")),?45,"Total TOP Amount: ",?65,$J($P(TOP4,"^",3),13,2)
"RTN","PRCAAPR1",41,0)
 .I $P(TOP6,"^",6) W !,?45,"TOP HOLD DATE: ",$$SLH^RCFN01($P(TOP6,"^",6))
"RTN","PRCAAPR1",42,0)
 .Q
"RTN","PRCAAPR1",43,0)
 I $D(^RCD(340,"TCSP",+DEBT)) D
"RTN","PRCAAPR1",44,0)
 .W !,"x Debt Referred to Cross-Servicing",?45,"Total CS Debt: ",?65,$J($$TOTALB^RCTCSPU(+DEBT),13,2)
"RTN","PRCAAPR1",45,0)
 .Q
"RTN","PRCAAPR1",46,0)
 I $O(^RCD(340,+DEBT,2,0)) D
"RTN","PRCAAPR1",47,0)
 .S Y=0 F X=0:0 S X=$O(^RCD(340,+DEBT,2,X)) Q:'X  W:'Y ! W !,$G(^(X,0)) S Y=Y+1 W:Y=3&$O(^RCD(340,+DEBT,2,X)) "..." Q:Y=3
"RTN","PRCAAPR1",48,0)
 .Q
"RTN","PRCAAPR1",49,0)
 Q
"RTN","PRCAAPR1",50,0)
 ; PRCA*4.5*276 - moved headers right to add EOB indicator to bill #, adjusted at tag BLN accordingly
"RTN","PRCAAPR1",51,0)
 ; PRCA*4.5*275 - moved headers to line up with column changes
"RTN","PRCAAPR1",52,0)
HDR2 W !!,"#",?7,"Bill #",?20,"Est",?31,"Type",?43,"Paid",?52,"Prin",?58,"Int",?64,"Adm",?72,"Balance"
"RTN","PRCAAPR1",53,0)
 Q
"RTN","PRCAAPR1",54,0)
DIS ;Display bill line items
"RTN","PRCAAPR1",55,0)
 NEW STAT1
"RTN","PRCAAPR1",56,0)
 I '$O(^TMP("PRCAAPR",$J,"C",0)) S X="",$P(X,"*",22)="" W !!,X,"  NO ACCOUNT INFORMATION AVAILABLE  ",X G Q1
"RTN","PRCAAPR1",57,0)
 F STAT1=0:0 S STAT1=$O(^TMP("PRCAAPR",$J,"C",STAT1)) Q:'STAT1!$D(OUT)  D BHDR S BILL=0 F  S BILL=$O(^TMP("PRCAAPR",$J,"C",STAT1,BILL)) Q:BILL=""!$D(OUT)  D BLN
"RTN","PRCAAPR1",58,0)
 I '$D(OUT) D READ
"RTN","PRCAAPR1",59,0)
Q1 Q
"RTN","PRCAAPR1",60,0)
BHDR ;Display status line
"RTN","PRCAAPR1",61,0)
 S X=$S(+$P(^TMP("PRCAAPR",$J,"C",STAT1),"^",2)=99:"PAYMENTS",1:$P($G(^PRCA(430.3,+$O(^PRCA(430.3,"AC",+$P(^TMP("PRCAAPR",$J,"C",STAT1),"^",2),0)),0)),"^"))
"RTN","PRCAAPR1",62,0)
 S Y=" "_X_" ("_$J(+^TMP("PRCAAPR",$J,"C",STAT1),0,2)_") " W ! F X=1:1:80-$L(Y)/2 W "-"
"RTN","PRCAAPR1",63,0)
 W Y F X=1:1:IOM-$X-1 W "-"
"RTN","PRCAAPR1",64,0)
 Q
"RTN","PRCAAPR1",65,0)
BLN ;
"RTN","PRCAAPR1",66,0)
 N PRCOUT,REJFLAG,CSCSTAT,DEBTOR,CSDATE1,CSDATE2,RCIND
"RTN","PRCAAPR1",67,0)
 I $Y+5>IOSL,COUNT D READ G:$D(OUT) Q2 D HDR,HDR2,BHDR
"RTN","PRCAAPR1",68,0)
 ; PRCA*4.5*276, attach EOB indicator '%' to bill # when applicable
"RTN","PRCAAPR1",69,0)
 S PRCOUT=$$COMP3^PRCAAPR(BILL)
"RTN","PRCAAPR1",70,0)
 I STAT1'=99,PRCOUT'="%" S PRCOUT=$$IBEEOBCK(BILL)
"RTN","PRCAAPR1",71,0)
 ; PRCA*4.5*303 - add reject indicator to kbill if applicable ; #IA 6060
"RTN","PRCAAPR1",72,0)
 S REJFLAG=0 S:STAT1'=99 REJFLAG=$$BILLREJ^IBJTU6($P($P($G(^PRCA(430,BILL,0)),"^"),"-",2))
"RTN","PRCAAPR1",73,0)
 S:STAT1'=99 COUNT=COUNT+1,^TMP("PRCAAPR",$J,"O",COUNT)=BILL S X=$S(STAT1=99:BILL,1:$G(PRCOUT)_$S(REJFLAG:"c",1:"")_$G(^PRCA(430,BILL,0)))
"RTN","PRCAAPR1",74,0)
 ; PRCA*4.5*303 - End
"RTN","PRCAAPR1",75,0)
 ;
"RTN","PRCAAPR1",76,0)
 ; PRCA*4.5*315: AR File #430 - set historical indicator set to "y" if an entry exists in the 
"RTN","PRCAAPR1",77,0)
 ;     ORIGINAL DATE REFERRED TO TCSP (field #156) to CS bill number.  If an entry in the 
"RTN","PRCAAPR1",78,0)
 ;     DATE REFERRED TO TCSP (field #151), then an "x" indicator displays on the bill,          
"RTN","PRCAAPR1",79,0)
 ;     otherwise neither indicator.
"RTN","PRCAAPR1",80,0)
 ;
"RTN","PRCAAPR1",81,0)
 S CSDATE1=$$GET1^DIQ(430,BILL,"DATE BILL REFERRED TO TCSP","I")
"RTN","PRCAAPR1",82,0)
 S CSDATE2=$$GET1^DIQ(430,BILL,"ORIGINAL DATE REFERRED TO TCSP","I")
"RTN","PRCAAPR1",83,0)
 S RCIND=$S(CSDATE1'="":"x",CSDATE2'="":"y",1:"")
"RTN","PRCAAPR1",84,0)
 ;W !,$S(STAT1'=99:COUNT,1:"*"),?4,$P(X,"^") W:STAT1'=99 ?20,$$SLH^RCFN01($P(X,"^",10))
"RTN","PRCAAPR1",85,0)
 I RCIND]"" W !,$S(STAT1'=99:COUNT,1:"*"),?5,$P(RCIND_X,"^") W:STAT1'=99 ?20,$$SLH^RCFN01($P(X,"^",10))
"RTN","PRCAAPR1",86,0)
 I RCIND="" W !,$S(STAT1'=99:COUNT,1:"*"),?6,$P(X,"^") W:STAT1'=99 ?20,$$SLH^RCFN01($P(X,"^",10))
"RTN","PRCAAPR1",87,0)
 W:STAT1'=99 ?31,$S($P(X,"^",2)=31:"TRIC PT",1:$E($P($G(^PRCA(430.2,$S($O(^PRCA(430.2,"AC",24,0))=$P(X,"^",2):+$P(X,"^",16),1:+$P(X,"^",2)),0)),"^"),1,7))  ; PRCA*4.5*192 changed CHMP PT to TRIC PT
"RTN","PRCAAPR1",88,0)
 W:STAT1=99 ?31,"PAYMENT"
"RTN","PRCAAPR1",89,0)
 S X=$S(STAT1=99:"^^^^^^"_^TMP("PRCAAPR",$J,"C",STAT1,BILL),1:$G(^PRCA(430,BILL,7))) W ?39 W:STAT1=99 "-" W $J($P(X,"^",7)+$P(X,"^",8)+$P(X,"^",9)+$P(X,"^",10)+$P(X,"^",11),8,2)
"RTN","PRCAAPR1",90,0)
 W ?48 W:STAT1=99 " " W:STAT1'=99 $S($P(^PRCA(430,BILL,0),"^",2)=$O(^PRCA(430.2,"AC",33,0)):"-",1:" ")
"RTN","PRCAAPR1",91,0)
 W $J($P(X,"^"),7,2),?57,$J($P(X,"^",2),5,2),?63,$J($P(X,"^",3),5,2),?69,$S(STAT1=99:"-",$P(^PRCA(430,BILL,0),"^",2)=$O(^PRCA(430.2,"AC",33,0)):"-",1:" ")
"RTN","PRCAAPR1",92,0)
 W $S(STAT1=99:$J(^TMP("PRCAAPR",$J,"C",STAT1,BILL),9,2),1:$J($P(X,"^")+$P(X,"^",2)+$P(X,"^",3)+$P(X,"^",4)+$P(X,"^",5),9,2))
"RTN","PRCAAPR1",93,0)
 K ^TMP("PRCAAPR",$J,"C",STAT1,BILL) K:$O(^TMP("PRCAAPR",$J,"C",STAT1,""))="" ^TMP("PRCAAPR",$J,"C",STAT1)
"RTN","PRCAAPR1",94,0)
Q2 Q
"RTN","PRCAAPR1",95,0)
READ ;Read bill number
"RTN","PRCAAPR1",96,0)
 W !!,"Select 1-",COUNT W:$O(^TMP("PRCAAPR",$J,"C","")) " or return to continue" R ": ",X:DTIME I X["^"!'$T S:'$T DTOUT=1 S OUT=1 G Q3
"RTN","PRCAAPR1",97,0)
 I X["?" W !!,"To see detailed information for a bill number, enter the corresponding '#'",!,"next to the bill.  (Ex: 1 or 1,3)" G READ
"RTN","PRCAAPR1",98,0)
 I X="",'$O(^TMP("PRCAAPR",$J,"C","")) S OUT=1 G Q3
"RTN","PRCAAPR1",99,0)
 G:X="" Q3 S SEL=X
"RTN","PRCAAPR1",100,0)
 F X=1:1:$L(SEL,",") S Y=$P(SEL,",",X) I Y'?1N.N!'$D(^TMP("PRCAAPR",$J,"O",+Y)) W *7," ??" G READ
"RTN","PRCAAPR1",101,0)
 S OUT=1 F X=1:1:$L(SEL,",") S Y=$P(SEL,",",X) D EN1^PRCAATR($G(^TMP("PRCAAPR",$J,"O",+Y)))
"RTN","PRCAAPR1",102,0)
Q3 Q
"RTN","PRCAAPR1",103,0)
 ;
"RTN","PRCAAPR1",104,0)
ACCT(DFN) ;Get account number. Join station with DFN (Patch 206)
"RTN","PRCAAPR1",105,0)
 N SITE,ACCT,ACCT1,LEN
"RTN","PRCAAPR1",106,0)
 S DFN=+DFN
"RTN","PRCAAPR1",107,0)
 S LEN=$L(DFN)-1
"RTN","PRCAAPR1",108,0)
 S SITE=$$SITE^RCMSITE                          ;station number
"RTN","PRCAAPR1",109,0)
 S ACCT=$$RJ^XLFSTR(DFN,13,0)                   ;add leading zeroes
"RTN","PRCAAPR1",110,0)
 S ACCT1=SITE_"-"_$E(ACCT,1,$L(ACCT)-$L(DFN))   ;add hyphen
"RTN","PRCAAPR1",111,0)
 S ACCT1=ACCT1_"-"_$E(ACCT,$L(ACCT)-LEN,99)     ;add hyphen
"RTN","PRCAAPR1",112,0)
 S ACCT1=ACCT1_"-"_$E($P($P(DEBT,U,2),","),1,5) ;add last name
"RTN","PRCAAPR1",113,0)
 Q ACCT1
"RTN","PRCAAPR1",114,0)
 ;
"RTN","PRCAAPR1",115,0)
 ; PRCA*4.5*276 -  Use Event Date to find an associated 3rd Party bill with an associated EEOB
"RTN","PRCAAPR1",116,0)
IBEEOBCK(PRCAAR) ; Passed AR Bill
"RTN","PRCAAPR1",117,0)
 ; Function will quit as soon as a 3rd party bill is located that has an associated EEOB
"RTN","PRCAAPR1",118,0)
 ;
"RTN","PRCAAPR1",119,0)
 ; Find 3rd Party Bills with an Event Date
"RTN","PRCAAPR1",120,0)
 N PRCAREF,PRCAEEOB,PRCADT,DFN,DBTR,X1
"RTN","PRCAAPR1",121,0)
 ; Get DFN
"RTN","PRCAAPR1",122,0)
 S DBTR=+$P($G(^PRCA(430,PRCAAR,0)),U,9)
"RTN","PRCAAPR1",123,0)
 S X1=$P($G(^RCD(340,DBTR,0)),U) I X1'["DPT" Q ""
"RTN","PRCAAPR1",124,0)
 S DFN=+X1
"RTN","PRCAAPR1",125,0)
 S PRCAEEOB=""
"RTN","PRCAAPR1",126,0)
 ; Loop through Xref of ARbill (#430) to Action file (#350)
"RTN","PRCAAPR1",127,0)
 I +$G(PRCAAR) S PRCAREF=0 F  S PRCAREF=$O(^IB("ABIL",$P($G(^PRCA(430,PRCAAR,0)),"^"),PRCAREF)) Q:'PRCAREF  D  Q:PRCAEEOB="%"
"RTN","PRCAAPR1",128,0)
 . S PRCADT=$P($G(^IB(PRCAREF,0)),"^",17) ;Get event Date
"RTN","PRCAAPR1",129,0)
 . I PRCADT S PRCAEEOB=$$TPEVDT(DFN,PRCADT) Q:PRCAEEOB="%"
"RTN","PRCAAPR1",130,0)
 . I PRCADT S PRCAEEOB=$$TPOPV(DFN,PRCADT)
"RTN","PRCAAPR1",131,0)
 ;
"RTN","PRCAAPR1",132,0)
 Q PRCAEEOB
"RTN","PRCAAPR1",133,0)
 ;
"RTN","PRCAAPR1",134,0)
 ; PRCA*4.5*276 - Traverse all THIRD PARTY bills for a patient with a specific Event Date (399,.03)
"RTN","PRCAAPR1",135,0)
TPEVDT(DFN,EVDT) ;
"RTN","PRCAAPR1",136,0)
 ; Function will quit as soon as a 3rd party bill is located that has an associated EEOB
"RTN","PRCAAPR1",137,0)
 ; PRCA*4.5*284 - Use the 399,"APDT" (by patient) index instead of the 399,"D" index for efficiency
"RTN","PRCAAPR1",138,0)
 I '$G(DFN)!'$G(EVDT) Q ""
"RTN","PRCAAPR1",139,0)
 N PRCAIFN,PRCAEEOB
"RTN","PRCAAPR1",140,0)
 S PRCAEEOB="",PRCAIFN=""
"RTN","PRCAAPR1",141,0)
 F  S PRCAIFN=$O(^DGCR(399,"APDT",DFN,PRCAIFN),-1) Q:'PRCAIFN  D  Q:PRCAEEOB="%"
"RTN","PRCAAPR1",142,0)
 . I $D(^DGCR(399,"APDT",DFN,PRCAIFN,9999999-EVDT)) S PRCAEEOB=$$COMP3^PRCAAPR(PRCAIFN)
"RTN","PRCAAPR1",143,0)
 Q PRCAEEOB
"RTN","PRCAAPR1",144,0)
 ;
"RTN","PRCAAPR1",145,0)
 ; PRCA*4.5*276 - Traverse all THIRD PARTY bills for a patient with any Opt Visit Dates same as Event Date (399,43)
"RTN","PRCAAPR1",146,0)
TPOPV(DFN,EVDT) ;
"RTN","PRCAAPR1",147,0)
 ; Function will quit as soon as a 3rd party bill is located that has an associated EEOB
"RTN","PRCAAPR1",148,0)
 N PRCAIFN,PRCAEEOB
"RTN","PRCAAPR1",149,0)
 S PRCAEEOB=""
"RTN","PRCAAPR1",150,0)
 I +$G(DFN),+$G(EVDT) S PRCAIFN=0 F  S PRCAIFN=$O(^DGCR(399,"AOPV",DFN,EVDT,PRCAIFN)) Q:'PRCAIFN  D  Q:PRCAEEOB="%"
"RTN","PRCAAPR1",151,0)
 . ; attach EOB indicator '%' to bill # when applicable
"RTN","PRCAAPR1",152,0)
 . S PRCAEEOB=$$COMP3^PRCAAPR(PRCAIFN)
"RTN","PRCAAPR1",153,0)
 Q PRCAEEOB
"RTN","PRCAATR")
0^44^B25331554^B22771269
"RTN","PRCAATR",1,0)
PRCAATR ;WASH-ISC@ALTOONA,PA/RGY - VIEW TRANSACTION FOR BILLS ;2/14/96  2:46 PM
"RTN","PRCAATR",2,0)
V ;;4.5;Accounts Receivable;**36,104,172,138,233,276,303,301,315**;Mar 20, 1995;Build 67
"RTN","PRCAATR",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCAATR",4,0)
 ;
"RTN","PRCAATR",5,0)
 ; PRCAAPR cleans up DEBT, DTOUT
"RTN","PRCAATR",6,0)
EN1(BILL) ;ENTRY POINT FROM PRCAAPR
"RTN","PRCAATR",7,0)
 NEW X,Y,COUNT,OUT,TRAN,SEL,PRCAATRX,PRCAIO,PRCAIOS,D0,PRCAQUE,POP,PRCAPRT,Y,ZTSK,PRCOUT,PRCA15,REJFLG
"RTN","PRCAATR",8,0)
 NEW CSDATE1,CSDATE2,CSFLG
"RTN","PRCAATR",9,0)
 I '$D(BILL) G Q
"RTN","PRCAATR",10,0)
 I BILL'?1N.N!'$D(^PRCA(430,+BILL,0)) G Q
"RTN","PRCAATR",11,0)
 ; PRCA*4.5*276
"RTN","PRCAATR",12,0)
 S PRCOUT=$$COMP3^PRCAAPR(BILL) ; check for 1st and 3rd party payments
"RTN","PRCAATR",13,0)
 I PRCOUT'="%" S PRCOUT=$$IBEEOBCK^PRCAAPR1(BILL)
"RTN","PRCAATR",14,0)
 S PRCAPRT=1,PRCAIO=IO(0),PRCAIO(0)=IO(0),COUNT=0 K ^TMP("PRCAATR",$J)
"RTN","PRCAATR",15,0)
 D HDR,DIS,^%ZISC
"RTN","PRCAATR",16,0)
Q K ^TMP("PRCAATR",$J),IO("Q") Q
"RTN","PRCAATR",17,0)
HDR ;Header
"RTN","PRCAATR",18,0)
 D HDR^PRCAAPR1
"RTN","PRCAATR",19,0)
 I $P($G(^PRCA(430,BILL,13)),"^") W !,"MEDICARE CONTRACTUAL ADJUSTMENT: ",$J($P($G(^PRCA(430,BILL,13)),"^"),0,2)
"RTN","PRCAATR",20,0)
 I $P($G(^PRCA(430,BILL,13)),"^",2) W !,"UNREIMBURSED MEDICARE EXPENSE: ",$J($P($G(^PRCA(430,BILL,13)),"^",2),0,2)
"RTN","PRCAATR",21,0)
 ; PRCA*4.5*303 - Adding reject indicator, 'x' to bill number when applicable
"RTN","PRCAATR",22,0)
 S REJFLG=$$BILLREJ^IBJTU6($P($P($G(^PRCA(430,BILL,0)),"^"),"-",2)) ; IA# 6060
"RTN","PRCAATR",23,0)
 ; PRCA*4.5*315
"RTN","PRCAATR",24,0)
 S CSDATE1=$$GET1^DIQ(430,BILL,"DATE BILL REFERRED TO TCSP","I")
"RTN","PRCAATR",25,0)
 S CSDATE2=$$GET1^DIQ(430,BILL,"ORIGINAL DATE REFERRED TO TCSP","I")
"RTN","PRCAATR",26,0)
 S CSFLG=$S(CSDATE1'="":"x",CSDATE2'="":"y",1:"")
"RTN","PRCAATR",27,0)
 ; PRCA*4.5*276 - attach EEOB indicator to bill number
"RTN","PRCAATR",28,0)
 I +$G(^PRCA(430,BILL,15)) S PRCA15=^(15) I $P(PRCA15,U)]"" W !,"CS Referred Date: " S Y=$P(PRCA15,U) D DD^%DT W Y  ;prca*4.5*301
"RTN","PRCAATR",29,0)
 S PRCA15=$G(^PRCA(430,BILL,15)) D
"RTN","PRCAATR",30,0)
 .I $P(PRCA15,U,2)]"" W !,"CS Recall Reason: ",$E($$GET1^DIQ(430,BILL,154),1,31) W ?51,"CS Recall Date: " S Y=$P(PRCA15,U,3) D DD^%DT W Y Q  ;prca*4.5*301
"RTN","PRCAATR",31,0)
 .I $P(PRCA15,U,4)]"",$P(PRCA15,U,2)="" W !,"CS Recall Reason: ",$E($$GET1^DIQ(430,BILL,154),1,31) W ?51,"CS Recall Date: "
"RTN","PRCAATR",32,0)
 W ! D PROFRJ^RCTCSJS1(BILL) ; Reject history  ;prca*4.5*301
"RTN","PRCAATR",33,0)
 W !,"Bill #: ",$G(PRCOUT)_CSFLG_$P(^PRCA(430,BILL,0),"^") D:$P(^(0),"^",9)'=+DEBT DEB ; prca*4.5*315
"RTN","PRCAATR",34,0)
 I REJFLG W !,"Bill #: ",$G(PRCOUT)_$S(REJFLG:"c",1:"")_$P(^PRCA(430,BILL,0),"^") D:$P(^(0),"^",9)'=+DEBT DEB
"RTN","PRCAATR",35,0)
 W !!,"Bill #",?8,"Tr #",?17,"Type",?52,"Date",?70,"Amount"
"RTN","PRCAATR",36,0)
 S X="",$P(X,"-",IOM)="" W !,X
"RTN","PRCAATR",37,0)
 Q
"RTN","PRCAATR",38,0)
DIS ;Display transactions
"RTN","PRCAATR",39,0)
 W !,?17,"Original Amount",?52,$$SLH^RCFN01($P(^PRCA(430,BILL,0),"^",10)),?65,$J($P(^(0),"^",3),11,2)
"RTN","PRCAATR",40,0)
 I '$O(^PRCA(433,"C",BILL,0)) D
"RTN","PRCAATR",41,0)
 . S X="",$P(X,"*",20)="" W !!,X,"  NO TRANSACTION INFORMATION AVAILABLE  ",X
"RTN","PRCAATR",42,0)
RD . R !!,"Press return to continue: ",X:DTIME S:'$T DTOUT=1 S OUT=1
"RTN","PRCAATR",43,0)
 . I X["?" W !!,"Press the return key to return to menu." G RD
"RTN","PRCAATR",44,0)
 . Q
"RTN","PRCAATR",45,0)
 F TRAN=0:0 S TRAN=$O(^PRCA(433,"C",BILL,TRAN)) Q:'TRAN!$D(OUT)  D TLN
"RTN","PRCAATR",46,0)
 S X=$G(^PRCA(430,BILL,7))
"RTN","PRCAATR",47,0)
 I '$D(OUT) W !?65,"-----------",!,?64,"$",$J($P(X,"^")+$P(X,"^",2)+$P(X,"^",3)+$P(X,"^",4)+$P(X,"^",5),11,2) D READ
"RTN","PRCAATR",48,0)
 Q
"RTN","PRCAATR",49,0)
TLN ;Display a transaction
"RTN","PRCAATR",50,0)
 N YR
"RTN","PRCAATR",51,0)
 I $Y+5>IOSL,COUNT D READ G:$D(DTOUT)!$D(OUT) Q1 D HDR
"RTN","PRCAATR",52,0)
 S COUNT=COUNT+1,X=$G(^PRCA(433,TRAN,1)),^TMP("PRCAATR",$J,COUNT)=TRAN
"RTN","PRCAATR",53,0)
 W !,COUNT,$S($P(^PRCA(433,TRAN,0),"^",4)=1!$P(^(0),"^",10):"(I)",1:""),?8,TRAN,?17
"RTN","PRCAATR",54,0)
 W $S($P($G(^PRCA(430.3,+$P(X,"^",2),0)),"^",3)=17:$P($G(^PRCA(433,TRAN,5)),"^",2),1:$P($G(^(0)),"^"))
"RTN","PRCAATR",55,0)
 ;  show decrease adjustments as negative (patch 4.5*172)
"RTN","PRCAATR",56,0)
 I $P(X,"^",2)=35 S:$P(X,"^",5)>0 $P(X,"^",5)=-$P(X,"^",5)
"RTN","PRCAATR",57,0)
 W ?52,$S(+X:$$SLH^RCFN01(+X),1:""),?65,$J($P(X,"^",5),11,2)
"RTN","PRCAATR",58,0)
 ;
"RTN","PRCAATR",59,0)
Q1 Q
"RTN","PRCAATR",60,0)
READ ;Read a trans number
"RTN","PRCAATR",61,0)
 I IO'=IO(0) G Q2
"RTN","PRCAATR",62,0)
ASK W !!,"Select 1-",COUNT,$S(PRCAPRT:" or 'P' to Print",1:" to print") W:TRAN " or return to continue" R ": ",X:DTIME I X["^"!'$T S:'$T DTOUT=1 S OUT=1 G Q2
"RTN","PRCAATR",63,0)
 I PRCAPRT,X="P" S %ZIS="MQ" D ^%ZIS D  S PRCAPRT=0,PRCAIO=IO,PRCAIO(0)=IO(0) G:'POP ASK K POP S OUT=1 G Q2
"RTN","PRCAATR",64,0)
 . I $D(IO("S")) S PRCAIOS=ION D ^%ZISC
"RTN","PRCAATR",65,0)
 . Q
"RTN","PRCAATR",66,0)
 I X["?" W !!,"To see detailed information for a transaction number, enter the corresponding '#'",!,"next to the transaction.  (Ex: 1 or 1,3)" G ASK
"RTN","PRCAATR",67,0)
 I X="" S:TRAN="" OUT=1 G Q2
"RTN","PRCAATR",68,0)
 S SEL=X
"RTN","PRCAATR",69,0)
 F X=1:1:$L(SEL,",") S Y=$P(SEL,",",X) I Y'?1N.N!'$D(^TMP("PRCAATR",$J,+Y)) W *7," ??" G READ
"RTN","PRCAATR",70,0)
 F PRCAATRX=1:1:$L(SEL,",") S Y=$P(SEL,",",PRCAATRX) D VT Q:$D(OUT)
"RTN","PRCAATR",71,0)
 S OUT=1
"RTN","PRCAATR",72,0)
Q2 Q
"RTN","PRCAATR",73,0)
VT ;View a transaction
"RTN","PRCAATR",74,0)
 N IOP,%ZIS,ZTRTN,ZTDESC,ZTSAVE,ZTDTH
"RTN","PRCAATR",75,0)
 S D0=$G(^TMP("PRCAATR",$J,+Y)) G:'D0 Q3
"RTN","PRCAATR",76,0)
 I $D(IO("Q")) S ZTSAVE("D0")="",ZTSAVE("PRCAIO")=IO,ZTSAVE("PRCAIO(0)")=IO(0),ZTRTN="DQ^PRCAATR",ZTDESC="AR TRANS PROFILE",ZTDTH=$H D ^%ZTLOAD W !,"*** Trans # ",D0," REQUEST QUEUED ***" G Q3
"RTN","PRCAATR",77,0)
 I IO'=IO(0) W !,"OK, Printing Transaction # ",D0," ..."
"RTN","PRCAATR",78,0)
 I $D(PRCAIOS) S IOP=PRCAIOS D ^%ZIS
"RTN","PRCAATR",79,0)
 U IO D DQ U IO(0)
"RTN","PRCAATR",80,0)
Q3 Q
"RTN","PRCAATR",81,0)
DQ ;
"RTN","PRCAATR",82,0)
 W @IOF S X="",$P(X,"=",30)="" W !,X," TRANSACTION PROFILE ",X,!!
"RTN","PRCAATR",83,0)
 K DXS D ^PRCATR3 K DXS S X=D0 D ENF^IBOLK
"RTN","PRCAATR",84,0)
RD1 I $E(IOST)="C" R !!,"PRESS <RETURN> TO CONTINUE: ",X:DTIME S:'$T DTOUT=1,OUT=1 I X["?" W !!,"Press return to view next transaction or to continue" G RD1
"RTN","PRCAATR",85,0)
 Q
"RTN","PRCAATR",86,0)
DEB ;View debtor
"RTN","PRCAATR",87,0)
 NEW PRCA
"RTN","PRCAATR",88,0)
 S PRCA=$P(^PRCA(430,BILL,0),"^",9) I PRCA S PRCA=$P(^RCD(340,PRCA,0),"^") W "   ",$P($G(@("^"_$P(PRCA,";",2)_+PRCA_",0)")),"^")
"RTN","PRCAATR",89,0)
 Q
"RTN","PRCABD")
0^9^B17322985^B16869095
"RTN","PRCABD",1,0)
PRCABD ;SF-ISC/RSD-DISPLAY/PRINT BILL ;12/15/95  10:54
"RTN","PRCABD",2,0)
V ;;4.5;Accounts Receivable;**29,57,104,109,154,233,315**;20-MAR-95;Build 67
"RTN","PRCABD",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCABD",4,0)
 ;
"RTN","PRCABD",5,0)
DEV Q:'$D(PRCABT)  K ZTSAVE S %ZIS="QM" D ^%ZIS Q:POP  G EN:IO=IO(0)
"RTN","PRCABD",6,0)
 I $D(IO("Q")) S ZTRTN=$S(PRCABT=3:"EN^PRCABD",1:"^PRCABP"_PRCABT),ZTDTH=$H,ZTSAVE("D0")="",ZTSAVE("PRCABT")="",ZTSAVE("PRCADFM")="" D ^%ZTLOAD G Q
"RTN","PRCABD",7,0)
 U IO
"RTN","PRCABD",8,0)
EN Q:'$D(D0)  S PRCAD0=$G(^PRCA(430,D0,0)),PRCAD10=$G(^(100)),PRCAD14=$G(^(104)) G Q:PRCAD0=""!(PRCAD10="")
"RTN","PRCABD",9,0)
 S $P(PRCADUL,"-",80)="-" W @IOF,"BILL #: ",$P(PRCAD0,U,1),?30,"DATE: " S Y=$P(PRCAD0,U,10) D DT W ?60,"TYPE: ",$P("1081^1080^1114","^",PRCABT),!,"DEBTOR: ",?40,"BILLING AGENCY: ",!
"RTN","PRCABD",10,0)
 S Y=+$P(PRCAD0,U,9),X=$S($D(^RCD(340,Y,0)):$P(^(0),U,1),1:""),X(1)="" S:X]"" X(1)=$S($D(@("^"_$P(X,";",2)_+X_",0)")):$P(^(0),U,1),1:"")
"RTN","PRCABD",11,0)
 S PRCADB=$S($D(^RCD(340,+$P(PRCAD0,"^",9),0)):$P(^(0),"^"),1:"") S X=$$DADD^RCAMADD(PRCADB) K PRCADB S J=2 D ADD
"RTN","PRCABD",12,0)
 S Y=+$P(PRCAD10,U,7),X(6)=$P($G(^RC(342.1,+Y,0)),"^"),X=$$SADD^RCFN01(+Y_";RC(342.1,"),J=7 D ADD F I=1:1:5 I $D(X(I))!($D(X(I+5))) W !?1 W:$D(X(I)) X(I) W ?41 W:$D(X(I+5)) X(I+5)
"RTN","PRCABD",13,0)
 ;*****  PROBABLY WANT TO ENTER ACCT LINE INFO HERE   *****
"RTN","PRCABD",14,0)
 W !!,"CONTROL POINT :"
"RTN","PRCABD",15,0)
 W ?17,$P($G(^PRCA(430,D0,11)),U)
"RTN","PRCABD",16,0)
 W ! W:PRCABT=1 !?40,"AGENCY LOCATION CODE: ",$P(PRCAD10,U,3) W !,"APPROVING OFFICIAL: "
"RTN","PRCABD",17,0)
 I $P(PRCAD14,U,2)]"" S X=$P(PRCAD14,U,2),P=+PRCAD14,DA=D0 D DE^PRCASIG(.X,P,DA_+$P(PRCAD0,U,3)) W "/ES/ ",X,"   DATE: " S Y=$P(PRCAD14,U,3) D DT
"RTN","PRCABD",18,0)
 W ! F I=0:0 S I=$O(^PRCA(430,D0,2,I)) Q:'I  I $D(^(I,0)) S X=^(0) W !,"FY: ",$P(X,U,1),?12,"APPR. SYMBOL: ",$P($G(^PRCA(430,D0,11)),U,17),?50,"AMOUNT: ",$J($P(X,U,2),10,2)
"RTN","PRCABD",19,0)
 D DES(D0,PRCABT)
"RTN","PRCABD",20,0)
 ;PRCA*4.5*315 Print Beneficiary Travel Notice
"RTN","PRCABD",21,0)
 D BENEPRT^PRCABIL1
"RTN","PRCABD",22,0)
Q D ^%ZISC K DA,DIWL,DIWR,DIWF,FLN,I,J,P,PRCAD,PRCAD0,PRCAD10,PRCAD14,PRCADFM,PRCADI,PRCADI0,PRCADQ,PRCADUL,X,Y,Z,ZTDTH,ZTRTN,ZTSAVE,%ZIS Q
"RTN","PRCABD",23,0)
DES(D0,PRCABT) ;also entry from letter routine
"RTN","PRCABD",24,0)
 NEW DIWF,DIWL,DIWR,FLN,PRCAD,PRCADI,PRCADI0,PRCADQ
"RTN","PRCABD",25,0)
 W !! D HDR S (PRCADQ,PRCADI)=0
"RTN","PRCABD",26,0)
DESL S PRCADI=$O(^PRCA(430,D0,101,PRCADI)) G:'PRCADI DESQ S PRCADI0=^(PRCADI,0),PRCAD=0,DIWL=1,DIWR=50,DIWF="" K ^UTILITY($J,"W"),FLN
"RTN","PRCABD",27,0)
 F  S PRCAD=$O(^PRCA(430,D0,101,PRCADI,1,PRCAD)) Q:'PRCAD  S X=$S($D(^(PRCAD,0)):^(0),1:"") D ^DIWP
"RTN","PRCABD",28,0)
 I $D(^UTILITY($J,"W",DIWL)) F I=0:0 S I=$O(^UTILITY($J,"W",DIWL,I)) Q:'I  S DIWF=^(I,0) D:'$D(FLN) FLN Q:PRCADQ  I $D(FLN),DIWF'="" W !,?11,DIWF
"RTN","PRCABD",29,0)
 I '$D(FLN) D FLN
"RTN","PRCABD",30,0)
 K ^UTILITY($J,"W") W !! G:'PRCADQ DESL
"RTN","PRCABD",31,0)
DESQ Q
"RTN","PRCABD",32,0)
FLN ;first line of detail after description
"RTN","PRCABD",33,0)
 Q:$D(FLN)  D ASK Q:PRCADQ  S FLN=1
"RTN","PRCABD",34,0)
 W:PRCABT=2 $P(PRCADI0,U,7),?11 S Y=$P(PRCADI0,U,1) D DT
"RTN","PRCABD",35,0)
 W ?11 I $L($G(DIWF))<25 W DIWF S DIWF=""
"RTN","PRCABD",36,0)
 W:$P(PRCADI0,U,3)]"" ?37,$J($S($P(PRCADI0,U,3)?1".".N:"0"_$P(PRCADI0,U,3),1:$P(PRCADI0,U,3)),8)
"RTN","PRCABD",37,0)
 W:$P(PRCADI0,U,4)]"" ?47,$J($P(PRCADI0,U,4),12,4) W ?62,$S($D(^PRCD(420.5,+$P(PRCADI0,U,5),0)):$P(^(0),U,1),1:"")
"RTN","PRCABD",38,0)
 W ?65,$J($P(PRCADI0,U,6),15,2)
"RTN","PRCABD",39,0)
 Q
"RTN","PRCABD",40,0)
ASK I $E(IOST,1,2)="C-",($Y+4)>IOSL W !?8,"ENTER '^' TO HALT: " R X:DTIME S:X["^"!'$T PRCADQ=1 Q:PRCADQ  W @IOF D HDR Q
"RTN","PRCABD",41,0)
 I $E(IOST,1,2)'="C-",($Y+4)>IOSL W @IOF D HDR
"RTN","PRCABD",42,0)
 Q
"RTN","PRCABD",43,0)
HDR I PRCABT=2 W !,"ORDER NO.",?11,"DATE",?37,"QUANTITY",?55,"COST",?61,"PER",?74,"AMOUNT"
"RTN","PRCABD",44,0)
 E  W !," DATE",?11,"DESCRIPTION",?37,"QUANTITY",?55,"COST",?61,"PER",?74,"AMOUNT"
"RTN","PRCABD",45,0)
 I '$D(PRCADUL) S PRCADUL="",$P(PRCADUL,"_",80)="_"
"RTN","PRCABD",46,0)
 W !,PRCADUL,! Q
"RTN","PRCABD",47,0)
ADD F I=1:1:4 S:I<4&($P(X,U,I)]"") X(J)=$P(X,U,I),J=J+1 I I=4 S X(J)=$P(X,U,4) S:$P(X,U,5)'="" X(J)=X(J)_", "_$P(X,U,5)_" "_$P(X,U,6)
"RTN","PRCABD",48,0)
 Q
"RTN","PRCABD",49,0)
DT Q:Y=""  W $$SLH^RCFN01(Y,"/")_" " Q
"RTN","PRCABD",50,0)
EN1 ;PRINT/DISPLAY BILL
"RTN","PRCABD",51,0)
EN10 D SVC^PRCABIL G EN1Q:'$D(PRCAP("S")) S DIC("S")="S Z0=$S($D(^PRCA(430.3,+$P(^(0),U,8),0)):$P(^(0),U,3),1:0) I Z0=205,$D(^PRCA(430,Y,100)),+$P(^(100),U,2)="_PRCAP("S")
"RTN","PRCABD",52,0)
 D BILLN^PRCAUTL G EN1Q:'$D(PRCABN) S PRCABT=+^PRCA(430,PRCABN,100) G EN1Q:'PRCABT S D0=PRCABN,PRCADFM=1 D DEV,EN1Q G EN10
"RTN","PRCABD",53,0)
EN1Q K D0,DIC,PRCA,PRCABN,PRCADFM,PRCAP,PRCABT,PRCATY,Z0,ZTSK Q
"RTN","PRCABIL1")
0^8^B39821270^B25296320
"RTN","PRCABIL1",1,0)
PRCABIL1 ;SF-ISC/RSD - ENTER BILL INFO ;10/16/96  7:04 PM
"RTN","PRCABIL1",2,0)
V ;;4.5;Accounts Receivable;**57,64,109,147,220,276,315**;Mar 20, 1995;Build 67
"RTN","PRCABIL1",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCABIL1",4,0)
 ;
"RTN","PRCABIL1",5,0)
EN1 ;ENTER NEW BILL
"RTN","PRCABIL1",6,0)
 D ST Q:'%  N CP
"RTN","PRCABIL1",7,0)
EN10 D EN^PRCABIL2 G Q:'$D(PRCABN) S $P(^PRCA(430,PRCABN,0),"^",8)=$O(^PRCA(430.3,"AC",201,0)) D EN G EN10
"RTN","PRCABIL1",8,0)
EN2 ;EDIT BILL
"RTN","PRCABIL1",9,0)
EN20 D SVC^PRCABIL Q:'$D(PRCAP("S"))  S DIC("S")="S Z0=$S($D(^PRCA(430.3,+$P(^(0),U,8),0)):$P(^(0),U,3),1:0) I Z0>199,Z0<210,'$P($G(^PRCA(430,Y,3)),U,3),+$P($G(^(100)),U,2)="_PRCAP("S")
"RTN","PRCABIL1",10,0)
 D BILLN^PRCAUTL G Q:'$D(PRCABN) D EN G EN20
"RTN","PRCABIL1",11,0)
EN4 ;CANCEL BILL
"RTN","PRCABIL1",12,0)
EN40 D SVC^PRCABIL Q:'$D(PRCAP("S"))  S DIC("S")="S Z0=$S($D(^PRCA(430.3,+$P(^(0),U,8),0)):$P(^(0),U,3),1:0) I Z0>199,Z0<210,$D(^PRCA(430,Y,100)),+$P(^(100),U,2)="_PRCAP("S")
"RTN","PRCABIL1",13,0)
 D BILLN^PRCAUTL G Q:'$D(PRCABN)
"RTN","PRCABIL1",14,0)
YN S %=2 W !,"  Sure you want to cancel this Bill" D YN^DICN
"RTN","PRCABIL1",15,0)
 I %=0 W !,*7,"Answer 'Yes' or 'No' " G YN
"RTN","PRCABIL1",16,0)
 I %'=1 D Q G EN40
"RTN","PRCABIL1",17,0)
 S $P(^PRCA(430,PRCABN,0),"^",14)=DT,$P(^(0),"^",17)=DUZ,$P(^(9),"^",6)=$P(^(0),"^",8),PRCA("STATUS")=$O(^PRCA(430.3,"AC",210,0)) D UPSTATS^PRCAUT2 K PRCA("STATUS") D Q G EN40
"RTN","PRCABIL1",18,0)
EN K PRCADFM S DA=PRCABN D LCK G Q:'$D(DA)
"RTN","PRCABIL1",19,0)
 S DIE="^PRCA(430,"
"RTN","PRCABIL1",20,0)
 I $D(RCAMEND) S X=+^PRCA(430,DA,100) I X?1N,X<4,X>0 G FORM
"RTN","PRCABIL1",21,0)
 S DR="100" D ^DIE G:X'?1N Q
"RTN","PRCABIL1",22,0)
FORM N PRCACAT,PRCAFUND,PRCABENE,PRCACA,PRCATYP,PRCAADD,PRCAAD1D,PRCAAD2D,PRCAAD3D,PRCACD,PRCASTD
"RTN","PRCABIL1",23,0)
 N PRCAZPD,PRCAPHD,PREND
"RTN","PRCABIL1",24,0)
 S PRCABENE=0
"RTN","PRCABIL1",25,0)
 S DR="[PRCA BILL "_$P("1081^1080^1114","^",X)_"]",PRCABT=X D ^DIE
"RTN","PRCABIL1",26,0)
 S:$D(DUZ) $P(^PRCA(430,PRCABN,9),U,8)=DUZ
"RTN","PRCABIL1",27,0)
 S PRCACAT=$P(^PRCA(430,PRCABN,0),U,2)
"RTN","PRCABIL1",28,0)
 ;PRCA*4.5*315 New Prompt for Beneficiary Travel if Category is VENDOR
"RTN","PRCABIL1",29,0)
 I PRCACAT=17 D  I $G(PREND)=1 Q
"RTN","PRCABIL1",30,0)
 .W !!
"RTN","PRCABIL1",31,0)
 .S DIR("A")="IS THIS FOR VETERANS BENEFICIARY TRAVEL? "
"RTN","PRCABIL1",32,0)
 .S DIR("?")="Please answer Yes or No."
"RTN","PRCABIL1",33,0)
 .S DIR("B")="NO",DIR(0)="YA^^"
"RTN","PRCABIL1",34,0)
 .D ^DIR K DIR
"RTN","PRCABIL1",35,0)
 .I '$D(Y(0)) S PREND=1 Q
"RTN","PRCABIL1",36,0)
 .I Y(0)="YES" D
"RTN","PRCABIL1",37,0)
 ..S PRCABENE=1
"RTN","PRCABIL1",38,0)
 ..S PRCACA=$O(^RC(342.1,"B","AGENT CASHIER",0))
"RTN","PRCABIL1",39,0)
 ..S PRCATYP=$P(^RC(342.1,PRCACA,0),U,2)
"RTN","PRCABIL1",40,0)
 ..S PRCAADD=$$SADD^RCFN01(PRCATYP)
"RTN","PRCABIL1",41,0)
 ..I $G(PRCAADD)'="" D
"RTN","PRCABIL1",42,0)
 ...S PRCAAD1D=$P(PRCAADD,U),PRCAAD2D=$P(PRCAADD,U,2),PRCAAD3D=$P(PRCAADD,U,3),PRCACD=$P(PRCAADD,U,4)
"RTN","PRCABIL1",43,0)
 ...S PRCASTD=$P(PRCAADD,U,5),PRCAZPD=$P(PRCAADD,U,6),PRCAPHD=$P(PRCAADD,U,7)
"RTN","PRCABIL1",44,0)
 I PRCACAT>39,PRCACAT<45 D
"RTN","PRCABIL1",45,0)
 .S X=PRCACAT,PRCAFUND=$S(X=40:"05",X=41:"06",X=42:"07",X=43:"08",1:"10"),PRCAFUND=5287_PRCAFUND
"RTN","PRCABIL1",46,0)
 .S DR="259////"_"09;203////^S X=PRCAFUND"
"RTN","PRCABIL1",47,0)
 .D ^DIE
"RTN","PRCABIL1",48,0)
 .K Y,X
"RTN","PRCABIL1",49,0)
 .Q
"RTN","PRCABIL1",50,0)
 I PRCACAT=47 D  ;315
"RTN","PRCABIL1",51,0)
 .N FUND
"RTN","PRCABIL1",52,0)
 .S FUND="0160A1"
"RTN","PRCABIL1",53,0)
 .S DR="259////"_"02;203////^S X=FUND"
"RTN","PRCABIL1",54,0)
 .D ^DIE
"RTN","PRCABIL1",55,0)
 .K Y,X
"RTN","PRCABIL1",56,0)
 .Q
"RTN","PRCABIL1",57,0)
 I $P(^PRCA(430,PRCABN,0),U,9)=""!('$D(^(100))!('$D(^(101)))) D MESG W !,"Bill is incomplete and must be re-edited !",*7 G Q
"RTN","PRCABIL1",58,0)
 D EN4^PRCABIL S PRCAMT1=0,PRCAMTY=0,DIK="^PRCA(430,PRCABN,2,"
"RTN","PRCABIL1",59,0)
 F PRCAI=0:0 S PRCAI=$O(^PRCA(430,PRCABN,2,PRCAI)) Q:'PRCAI  I $D(^(PRCAI,0)) S X=^(0) I $P(X,"^",8)]"" S PRCAMT1=PRCAMT1+$P(X,"^",8),PRCAMTY=PRCAMTY+1
"RTN","PRCABIL1",60,0)
 I 'PRCAMT1 W !!,"Fiscal Year Amount was not entered !  Bill is incomplete",*7 G Q
"RTN","PRCABIL1",61,0)
 I PRCAMTY>1 W !!,"Multiple Fiscal Years are not allowed at this time !",!,"Bill is incomplete and must be re-edited.",*7 G Q
"RTN","PRCABIL1",62,0)
 I PRCAMT1'=PRCAMT,PRCABT'=1 W !!,"Fiscal Year Amounts do not equal the total bill amount !",!,"Bill is incomplete and must be re-edited !",*7 G Q
"RTN","PRCABIL1",63,0)
 I PRCAMT1'=PRCAMT,PRCABT=1 D  ;
"RTN","PRCABIL1",64,0)
 . N DIE,DA,DR
"RTN","PRCABIL1",65,0)
 . S PRCAMT1=PRCAMT
"RTN","PRCABIL1",66,0)
 . S DIE="^PRCA(430,PRCABN,2,"
"RTN","PRCABIL1",67,0)
 . S DA(1)=PRCABN
"RTN","PRCABIL1",68,0)
 . S DA=+$O(^PRCA(430,PRCABN,2,0))
"RTN","PRCABIL1",69,0)
 . S DR="1///"_PRCAMT1
"RTN","PRCABIL1",70,0)
 . QUIT:'DA
"RTN","PRCABIL1",71,0)
 . ; 
"RTN","PRCABIL1",72,0)
 . DO ^DIE
"RTN","PRCABIL1",73,0)
 ;
"RTN","PRCABIL1",74,0)
 S Y=$P(^PRCA(430,PRCABN,0),"^",9),Y=Y_"^"_$P(^RCD(340,Y,0),"^",1)
"RTN","PRCABIL1",75,0)
 G:$P(Y,";",2)="DPT("!($P(Y,";",2)="DIC(36,") CONT
"RTN","PRCABIL1",76,0)
 S PRCANODE=.11 S:$P(Y,";",2)="DIC(4," PRCANODE=1 S PRCANODE="^"_$P(Y,";",2)_+$P(Y,"^",2)_","_PRCANODE_")",PRCANODE=$G(@PRCANODE)
"RTN","PRCABIL1",77,0)
 I $P(PRCANODE,"^",1)="" S DR=$P(Y,"^",2),%=1 W !," (No Street Address)  Edit Debtor Address: " D YN^DICN,EN1^RCAM(DR):%=1 K DIE,DR,DA
"RTN","PRCABIL1",78,0)
CONT S Y=^PRCA(430,PRCABN,0),$P(Y,"^",3)=PRCAMT,PRCA("STATUS")=$O(^PRCA(430.3,"AC",205,0)),^PRCA(430,PRCABN,0)=Y,$P(^PRCA(430,PRCABN,7),"^")=PRCAMT
"RTN","PRCABIL1",79,0)
 I '$D(RCAMEND) S DIE="^PRCA(430,",DA=PRCABN,DR="8////"_PRCA("STATUS")_"" D ^DIE K DIE,DR,DA
"RTN","PRCABIL1",80,0)
DISP S %=1,PRCADFM=1 W !,"   Display/Print Bill:"
"RTN","PRCABIL1",81,0)
 K IOP D YN^DICN
"RTN","PRCABIL1",82,0)
 I %=0 W !,*7,"Answer 'Yes' or 'No' " G DISP
"RTN","PRCABIL1",83,0)
 D ^PRCABD:%=1
"RTN","PRCABIL1",84,0)
Q L -^PRCA(430,+$G(PRCABN),0)
"RTN","PRCABIL1",85,0)
 K %,%Y,A,B,C,D0,DA,DIC,DIE,DIK,DR,I,PRCA,PRCABC,PRCABN,PRCABT,PRCADFM,PRCAI,PRCAKCT,PRCARN,PRCATIME,PRCAMT,PRCAMTY,PRCANODE,PRCAMT1,PRCAMT2,PRCAQ,PRCAP,PRCAT,PRCATY,PRCAX,X,Y,Z0,ZRTN,ZTSK Q
"RTN","PRCABIL1",86,0)
LCK L +^PRCA(430,DA,0):0 I  Q
"RTN","PRCABIL1",87,0)
 W !,"ANOTHER USER IS EDITING THIS ENTRY !" K DA Q
"RTN","PRCABIL1",88,0)
CP ;CONTROL POINT LOOK-UP
"RTN","PRCABIL1",89,0)
 N DIC,PRC,DIE,DA,DR,X,Y,PRCSIP,PRCSI
"RTN","PRCABIL1",90,0)
 S PRC("SITE")=$S($G(PRCA("SITE")):PRCA("SITE"),1:$$SITE^RCMSITE)
"RTN","PRCABIL1",91,0)
 S DIC("B")=$P($G(^PRCA(430,PRCABN,11)),U)
"RTN","PRCABIL1",92,0)
 D CP^PRCSUT I '$G(PRC("CP")) Q
"RTN","PRCABIL1",93,0)
 I PRC("CP")<0 Q
"RTN","PRCABIL1",94,0)
 S $P(^PRCA(430,PRCABN,11),U)=PRC("CP")
"RTN","PRCABIL1",95,0)
 Q
"RTN","PRCABIL1",96,0)
BENEPRT ;PRCA*4.5*315 Beneficiary Travel Notice of Rights and Responsibilities
"RTN","PRCABIL1",97,0)
 I $G(PRCABENE) D
"RTN","PRCABIL1",98,0)
 .N LINE,BENELTR,DIWF,DIWL,DIWR,IOSLSAVE,PRNT
"RTN","PRCABIL1",99,0)
 .S BENELTR=$O(^RC(343,"B","BENEFICIARY TRAVEL NOTICE",0))
"RTN","PRCABIL1",100,0)
 .K ^UTILITY($J) ;print main body text from 343
"RTN","PRCABIL1",101,0)
 .S ^UTILITY($J,1)="W "_IOF
"RTN","PRCABIL1",102,0)
 .S IOSLSAVE=IOSL,IOSL=140
"RTN","PRCABIL1",103,0)
 .U IO
"RTN","PRCABIL1",104,0)
 .W #
"RTN","PRCABIL1",105,0)
 .F LINE=0:0 S LINE=$O(^RC(343,BENELTR,1,LINE)) Q:'LINE  S X=$G(^(LINE,0)) I X]"" W:($Y+2)>IOSL @IOF S DIWL=1,DIWR=80,DIWF="N" D ^DIWP
"RTN","PRCABIL1",106,0)
 .D ^DIWW S:$G(PRNT)="FL" PRNT=1 K ^UTILITY($J)
"RTN","PRCABIL1",107,0)
 .S IOSL=IOSLSAVE
"RTN","PRCABIL1",108,0)
 .W !,"Local Agent Cashier Contact Information"
"RTN","PRCABIL1",109,0)
 .W !,"   Office Phone: ",$G(PRCAPHD)
"RTN","PRCABIL1",110,0)
 .W !,"Mailing Address: ",$G(PRCAAD1D)
"RTN","PRCABIL1",111,0)
 .I $G(PRCAAD2D)'="" W !,"                 ",$G(PRCAAD2D)
"RTN","PRCABIL1",112,0)
 .I $G(PRCAAD3D)'="" W !,"                 ",$G(PRCAAD3D)
"RTN","PRCABIL1",113,0)
 .W !,"                 ",PRCACD_", "_PRCASTD_"  "_PRCAZPD
"RTN","PRCABIL1",114,0)
 Q
"RTN","PRCABIL1",115,0)
 ;
"RTN","PRCABIL1",116,0)
ST D CKSITE^PRCAUDT S %=$D(PRCA("CKSITE")) Q
"RTN","PRCABIL1",117,0)
ST1 D SVC^PRCABIL S %=$S($D(PRCAP("S")):1,1:0) Q:%
"RTN","PRCABIL1",118,0)
 K PRCAP Q
"RTN","PRCABIL1",119,0)
DIP D SVC^PRCABIL Q:'$D(PRCAP("S"))
"RTN","PRCABIL1",120,0)
 ; PRCA*4.5*276 - add '@' to BILL NO. in the 'BY' paramter so that printout does not show it as a sorting field.
"RTN","PRCABIL1",121,0)
 S FR=PRCAP("S")_",?,@",TO=PRCAP("S")_",?",L=0,DIC="^PRCA(430,",FLDS="[PRCA BILL LIST]",BY="@INTERNAL(SERVICE),@BILL NO.,FORM TYPE" D EN1^DIP K BY,DHD,DIC,FLDS,FR,L,PRCAP,TO Q
"RTN","PRCABIL1",122,0)
MESG I $P(^PRCA(430,PRCABN,0),U,9)="" W !,?3,"Debtor (or Payer) data is missing."
"RTN","PRCABIL1",123,0)
 I '$D(^PRCA(430,PRCABN,100)) W !,?3,"Service (or Section) , Form type or Voucher number data is missing."
"RTN","PRCABIL1",124,0)
 I '$D(^PRCA(430,PRCABN,101)) W !,?3,"Date of Charge data does not exist."
"RTN","PRCABIL1",125,0)
 W ! Q
"RTN","PRCABJV")
0^51^B39357110^B30343584
"RTN","PRCABJV",1,0)
PRCABJV ;WASH-ISC@ALTOONA,PA/TJK-FILE VERIFICATION FOR BACKGROUND JOB ;4/6/95  10:13 AM
"RTN","PRCABJV",2,0)
V ;;4.5;Accounts Receivable;**1,48,63,114,141,170,176,173,192,220,296,310,315**;Mar 20, 1995;Build 67
"RTN","PRCABJV",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCABJV",4,0)
 ;;patch 192 changes all occurrences of CHAMPUS to TRICARE
"RTN","PRCABJV",5,0)
EN1(FILE,X1,X2,ERROR) ;
"RTN","PRCABJV",6,0)
 ;FILE IS THE FILE NUMBER
"RTN","PRCABJV",7,0)
 ;X1 AND X2 ARE 3 PART VARIABLES SEPARATED BY SEMI-COLONS WITH
"RTN","PRCABJV",8,0)
 ;THE FORMAT (X-REF INDEX;NODE;PIECE)
"RTN","PRCABJV",9,0)
 ;AN ERROR ARRAY IS SET IF VALIDATION FAILS
"RTN","PRCABJV",10,0)
 NEW LT,CNT,I,I1,I2,I3,REC,IND,ND,PC,DATA,J,LN,FILENT
"RTN","PRCABJV",11,0)
 S LT=$S(FILE[430.3:"TRANST",FILE[430.2:"CAT",1:"EVENT"),CNT=0
"RTN","PRCABJV",12,0)
 F I=1,2 S J=@("X"_I),IND(I)=$P(J,";"),ND(I)=$P(J,";",2),PC(I)=$P(J,";",3)
"RTN","PRCABJV",13,0)
 F I1=1:1 D  Q:(DATA(0)="EOF")!(ERROR)
"RTN","PRCABJV",14,0)
    .S LN=$T(@LT+I1) F I=3:1:6 S DATA(I-3)=$P(LN,";",I)
"RTN","PRCABJV",15,0)
    .Q:DATA(0)="EOF"
"RTN","PRCABJV",16,0)
    .G RC:FILE<430
"RTN","PRCABJV",17,0)
    .I '$D(^PRCA(FILE,"B",DATA(0))) S ERROR=1 Q
"RTN","PRCABJV",18,0)
    .S REC=$O(^PRCA(FILE,"B",DATA(0),0)) I 'REC S ERROR=1 Q
"RTN","PRCABJV",19,0)
    .I DATA(3)'=REC S ERROR=1 Q
"RTN","PRCABJV",20,0)
    .I $P(^PRCA(FILE,REC,0),U)'=DATA(0) S ERROR=1 Q
"RTN","PRCABJV",21,0)
    .G CNT:X1=""
"RTN","PRCABJV",22,0)
    .F I2=1,2 D  Q:ERROR  I I2=1,X2="" Q
"RTN","PRCABJV",23,0)
       ..I '$D(^PRCA(FILE,IND(I2),DATA(I2))) S ERROR=1 G Q2
"RTN","PRCABJV",24,0)
       ..;  do not check if category number is a zero
"RTN","PRCABJV",25,0)
       ..I I2=1,DATA(1)'=0,$O(^PRCA(FILE,IND(I2),DATA(I2),0))'=REC S ERROR=1 G Q2
"RTN","PRCABJV",26,0)
       ..I $P(^PRCA(FILE,REC,ND(I2)),U,PC(I2))'=DATA(I2) S ERROR=1
"RTN","PRCABJV",27,0)
Q2 ..Q
"RTN","PRCABJV",28,0)
CNT .Q:ERROR
"RTN","PRCABJV",29,0)
    .S CNT=CNT+1
"RTN","PRCABJV",30,0)
Q1 .Q
"RTN","PRCABJV",31,0)
RC .I '$D(^RC(FILE,"B",DATA(0))) S ERROR=1 Q
"RTN","PRCABJV",32,0)
    .S REC=$O(^RC(FILE,"B",DATA(0),0)) I 'REC S ERROR=1 Q
"RTN","PRCABJV",33,0)
    .I DATA(3)'=REC S ERROR=1 Q
"RTN","PRCABJV",34,0)
    .I $P(^RC(FILE,REC,0),U)'=DATA(0) S ERROR=1 Q
"RTN","PRCABJV",35,0)
    .G CNT:X1=""
"RTN","PRCABJV",36,0)
    .F I3=1,2 D  Q:ERROR  I I3=1,X2="" Q
"RTN","PRCABJV",37,0)
       ..I '$D(^RC(FILE,IND(I3),DATA(I3))) S ERROR=1 G Q3
"RTN","PRCABJV",38,0)
       ..I $O(^RC(FILE,IND(I3),DATA(I3),0))'=REC S ERROR=1 G Q3
"RTN","PRCABJV",39,0)
       ..I $P(^RC(FILE,REC,ND(I3)),U,PC(I3))'=DATA(I3) S ERROR=1
"RTN","PRCABJV",40,0)
Q3 ..Q
"RTN","PRCABJV",41,0)
    .G CNT
"RTN","PRCABJV",42,0)
 I FILE>429.99,$P(^PRCA(FILE,0),U,4)'=CNT S ERROR=1 G EXIT
"RTN","PRCABJV",43,0)
 G EXIT:FILE>429.99
"RTN","PRCABJV",44,0)
 I $P(^RC(FILE,0),U,4)'=CNT S ERROR=1
"RTN","PRCABJV",45,0)
EXIT Q:'ERROR
"RTN","PRCABJV",46,0)
 S FILENT=$S(FILE>429.99:$P(^PRCA(FILE,0),U,4),1:$P(^RC(FILE,0),U,4))
"RTN","PRCABJV",47,0)
 S ERROR(1)="An error has been detected in the "_$P(^DIC(FILE,0),U)_" File."
"RTN","PRCABJV",48,0)
 I DATA(0)="EOF" S ERROR(2)="There are too many entries in your file."
"RTN","PRCABJV",49,0)
 I DATA(0)'="EOF" S ERROR(2)="The "_DATA(0)_" Entry in your file is missing or corrupted."
"RTN","PRCABJV",50,0)
 Q
"RTN","PRCABJV",51,0)
TRANST ;
"RTN","PRCABJV",52,0)
 ;;ACTIVE;102;A;16
"RTN","PRCABJV",53,0)
 ;;ADD (AMEND);302;AD;37
"RTN","PRCABJV",54,0)
 ;;ADMIN.COST CHARGE;12;AC;12
"RTN","PRCABJV",55,0)
 ;;AMEND;303;AM;38
"RTN","PRCABJV",56,0)
 ;;AMENDED BILL;110;AB;33
"RTN","PRCABJV",57,0)
 ;;ARCHIVED;115;XX;49
"RTN","PRCABJV",58,0)
 ;;BILL INCOMPLETE;201;BI;27
"RTN","PRCABJV",59,0)
 ;;CANCELLATION;111;CN;39
"RTN","PRCABJV",60,0)
 ;;CANCELLED BILL;210;CB;26
"RTN","PRCABJV",61,0)
 ;;CASH COLLECTION BY RC/DOJ;7;CJ;7
"RTN","PRCABJV",62,0)
 ;;CHARGE SUSPENDED;19;CS;47
"RTN","PRCABJV",63,0)
 ;;COLLECTED/CLOSED;108;CC;22
"RTN","PRCABJV",64,0)
 ;;COMMENT;17;CM;45
"RTN","PRCABJV",65,0)
 ;;CS ADD CASE INFO;47;CZ;67
"RTN","PRCABJV",66,0)
 ;;CS ADMIN ADJ TR REV?N;54;AO;76
"RTN","PRCABJV",67,0)
 ;;CS ADMIN ADJ TR REV?Y;53;AN;75
"RTN","PRCABJV",68,0)
 ;;CS ADMIN.COST CHARGE;52;AE;74
"RTN","PRCABJV",69,0)
 ;;CS BILL RECALL;34;CR;53
"RTN","PRCABJV",70,0)
 ;;CS CASE RECALL;45;CO;64
"RTN","PRCABJV",71,0)
 ;;CS DEBTOR NEW BILL;39;CK;85
"RTN","PRCABJV",72,0)
 ;;CS DEBTOR RECALL;35;CE;56
"RTN","PRCABJV",73,0)
 ;;CS DECR ADJ NOT APP;40;CA;66
"RTN","PRCABJV",74,0)
 ;;CS DECREASE ADJ;49;CY;70
"RTN","PRCABJV",75,0)
 ;;CS DEL BILL RECALL;37;CF;55
"RTN","PRCABJV",76,0)
 ;;CS DEL CASE RECALL;46;CG;65
"RTN","PRCABJV",77,0)
 ;;CS DEL DEBTOR RECALL;38;CL;57
"RTN","PRCABJV",78,0)
 ;;CS INC ADJ TR REV?N;58;AT;80
"RTN","PRCABJV",79,0)
 ;;CS INC ADJ TR REV?Y;57;AS;79
"RTN","PRCABJV",80,0)
 ;;CS INCREASE ADJ;51;AI;73
"RTN","PRCABJV",81,0)
 ;;CS NEW DBTR NEW BILL;48;CH;68
"RTN","PRCABJV",82,0)
 ;;CS PEND RECON;61;RK;83
"RTN","PRCABJV",83,0)
 ;;CS RECALL PLACED;62;CQ;84
"RTN","PRCABJV",84,0)
 ;;CS RECON WORKED;50;CV;71
"RTN","PRCABJV",85,0)
 ;;CS STOP DELETED;36;CD;54
"RTN","PRCABJV",86,0)
 ;;CS STOP PLACED;33;CP;51
"RTN","PRCABJV",87,0)
 ;;CS UPDATE DEBT;41;CU;60
"RTN","PRCABJV",88,0)
 ;;DEBIT VOUCHER (SF 5515);30;DV;30
"RTN","PRCABJV",89,0)
 ;;DECREASE ADJUSTMENT;21;DA;35
"RTN","PRCABJV",90,0)
 ;;DEL REPAY PLAN;31;DP;72
"RTN","PRCABJV",91,0)
 ;;DELETE (AMEND);301;DL;36
"RTN","PRCABJV",92,0)
 ;;EXEMPT INT/ADM. COST;14;E;14
"RTN","PRCABJV",93,0)
 ;;IN-ACTIVE;103;IA;17
"RTN","PRCABJV",94,0)
 ;;INCOMPLETE;101;IN;15
"RTN","PRCABJV",95,0)
 ;;INCREASE ADJUSTMENT;1;AJ;1
"RTN","PRCABJV",96,0)
 ;;INTEREST/ADM. CHARGE;13;IC;13
"RTN","PRCABJV",97,0)
 ;;MARSHAL/COURT COST;15;ML;24
"RTN","PRCABJV",98,0)
 ;;NEW BILL;104;N;18
"RTN","PRCABJV",99,0)
 ;;OLD BILL;106;OB;28
"RTN","PRCABJV",100,0)
 ;;OPEN;112;OP;42
"RTN","PRCABJV",101,0)
 ;;PAYMENT (IN FULL);20;PF;34
"RTN","PRCABJV",102,0)
 ;;PAYMENT (IN PART);2;PP;2
"RTN","PRCABJV",103,0)
 ;;PENDING APPROVAL;205;PA;20
"RTN","PRCABJV",104,0)
 ;;PENDING ARCHIVE;114;X;48
"RTN","PRCABJV",105,0)
 ;;PENDING CALM CODE;107;PC;21
"RTN","PRCABJV",106,0)
 ;;REESTABLISH TO RC/DOJ;5;RR;5
"RTN","PRCABJV",107,0)
 ;;RE-ESTABLISH;250;RW;43
"RTN","PRCABJV",108,0)
 ;;REFER TO DOJ;4;RJ;4
"RTN","PRCABJV",109,0)
 ;;REFER TO RC;3;RC;3
"RTN","PRCABJV",110,0)
 ;;REFUND REVIEW;113;PR;44
"RTN","PRCABJV",111,0)
 ;;REFUNDED;120;RF;41
"RTN","PRCABJV",112,0)
 ;;REPAYMENT PLAN;16;RP;25
"RTN","PRCABJV",113,0)
 ;;RETURNED BY RC/DOJ;6;RD;6
"RTN","PRCABJV",114,0)
 ;;RETURNED FOR AMENDMENT;230;RA;32
"RTN","PRCABJV",115,0)
 ;;RETURNED FROM AR (NEW);220;RT;31
"RTN","PRCABJV",116,0)
 ;;SUSPENDED;240;SP;40
"RTN","PRCABJV",117,0)
 ;;SUSPENSE;105;S;19
"RTN","PRCABJV",118,0)
 ;;TERM.BY COMPROMISE;9;TC;9
"RTN","PRCABJV",119,0)
 ;;TERM.BY FIS.OFFICER;8;TO;8
"RTN","PRCABJV",120,0)
 ;;TERM.BY RC/DOJ;29;TJ;29
"RTN","PRCABJV",121,0)
 ;;UNSUSPENDED;18;US;46
"RTN","PRCABJV",122,0)
 ;;WAIVED IN FULL;10;WF;10
"RTN","PRCABJV",123,0)
 ;;WAIVED IN PART;11;WP;11
"RTN","PRCABJV",124,0)
 ;;WRITE-OFF;109;WO;23
"RTN","PRCABJV",125,0)
 ;;EOF
"RTN","PRCABJV",126,0)
CAT ;patch 192 - ISC-0502-N2803 change Champus to Tricare
"RTN","PRCABJV",127,0)
 ;;ADULT DAY HEALTH CARE;40;AD;33
"RTN","PRCABJV",128,0)
 ;;C (MEANS TEST);24;C;18
"RTN","PRCABJV",129,0)
 ;;TRICARE;37;T1;30
"RTN","PRCABJV",130,0)
 ;;TRICARE PATIENT;38;T2;31
"RTN","PRCABJV",131,0)
 ;;TRICARE THIRD PARTY;39;T3;32
"RTN","PRCABJV",132,0)
 ;;CHAMPVA;36;CV;29
"RTN","PRCABJV",133,0)
 ;;CHAMPVA SUBSISTENCE;34;CS;27
"RTN","PRCABJV",134,0)
 ;;CHAMPVA THIRD PARTY;35;CT;28
"RTN","PRCABJV",135,0)
 ;;COMP & PEN PROCEEDS;8;CM;43
"RTN","PRCABJV",136,0)
 ;;CRIME OF PER.VIO.;27;CP;8
"RTN","PRCABJV",137,0)
 ;;CURRENT EMP.;14;CE;16
"RTN","PRCABJV",138,0)
 ;;CWT PROCEEDS;7;CW;42
"RTN","PRCABJV",139,0)
 ;;DOMICILIARY;41;DO;34
"RTN","PRCABJV",140,0)
 ;;EMERGENCY/HUMANITARIAN;25;H;2
"RTN","PRCABJV",141,0)
 ;;EMERGENCY/HUMANITARIAN REIMB.;48;HR;46
"RTN","PRCABJV",142,0)
 ;;ENHANCED USE LEASE PROCEEDS;10;EP;44
"RTN","PRCABJV",143,0)
 ;;EX-EMPLOYEE;13;E;15
"RTN","PRCABJV",144,0)
 ;;FEDERAL AGENCIES-REFUND;15;F2;13
"RTN","PRCABJV",145,0)
 ;;FEDERAL AGENCIES-REIMB.;16;F1;14
"RTN","PRCABJV",146,0)
 ;;FEE REIMB INS;47;FR;45
"RTN","PRCABJV",147,0)
 ;;GERIATRIC EVAL-INSTITUTIONAL;44;GE;37
"RTN","PRCABJV",148,0)
 ;;GERIATRIC EVAL-NON-INSTITUTION;45;GN;38
"RTN","PRCABJV",149,0)
 ;;HOSPITAL CARE (NSC);1;HC;5
"RTN","PRCABJV",150,0)
 ;;HOSPITAL CARE PER DIEM;32;HP;25
"RTN","PRCABJV",151,0)
 ;;INELIGIBLE HOSP.;20;I;1
"RTN","PRCABJV",152,0)
 ;;INELIGIBLE HOSP. REIMB.;49;IR;47
"RTN","PRCABJV",153,0)
 ;;INTERAGENCY;19;IA;20
"RTN","PRCABJV",154,0)
 ;;MEDICARE;28;MC;21
"RTN","PRCABJV",155,0)
 ;;MILITARY;17;M;12
"RTN","PRCABJV",156,0)
 ;;NO-FAULT AUTO ACC.;26;NA;7
"RTN","PRCABJV",157,0)
 ;;NURSING HOME CARE PER DIEM;31;NP;24
"RTN","PRCABJV",158,0)
 ;;NURSING HOME CARE(NSC);3;NC;3
"RTN","PRCABJV",159,0)
 ;;NURSING HOME CARE-LTC;46;NL;39
"RTN","PRCABJV",160,0)
 ;;NURSING HOME PROCEEDS;5;NH;40
"RTN","PRCABJV",161,0)
 ;;OUTPATIENT CARE(NSC);2;OC;4
"RTN","PRCABJV",162,0)
 ;;PARKING FEES;6;PF;41
"RTN","PRCABJV",163,0)
 ;;PREPAYMENT;33;PP;26
"RTN","PRCABJV",164,0)
 ;;REIMBURS.HEALTH INS.;21;RI;9
"RTN","PRCABJV",165,0)
 ;;RESPITE CARE-INSTITUTIONAL;42;RC;35
"RTN","PRCABJV",166,0)
 ;;RESPITE CARE-NON-INSTITUTIONAL;43;RN;36
"RTN","PRCABJV",167,0)
 ;;RX CO-PAYMENT/NSC VET;30;PN;23
"RTN","PRCABJV",168,0)
 ;;RX CO-PAYMENT/SC VET;29;PS;22
"RTN","PRCABJV",169,0)
 ;;SHARING AGREEMENTS;18;SA;19
"RTN","PRCABJV",170,0)
 ;;TORT FEASOR;22;TF;10
"RTN","PRCABJV",171,0)
 ;;VENDOR;11;V;17
"RTN","PRCABJV",172,0)
 ;;WORKMAN'S COMP.;23;WC;6
"RTN","PRCABJV",173,0)
 ;;EOF
"RTN","PRCABJV",174,0)
EVENT ;
"RTN","PRCABJV",175,0)
 ;;CASH PAYMENT;6;;6
"RTN","PRCABJV",176,0)
 ;;CHECK/MO PAYMENT;4;;4
"RTN","PRCABJV",177,0)
 ;;COMMENT;1;;1
"RTN","PRCABJV",178,0)
 ;;CREDIT CARD PAYMENT;7;;7
"RTN","PRCABJV",179,0)
 ;;DEPT OF JUSTICE PAYMENT;5;;5
"RTN","PRCABJV",180,0)
 ;;REGIONAL COUNSEL PAYMENT;3;;3
"RTN","PRCABJV",181,0)
 ;;FOLLOW-UP LETTER;10;;10
"RTN","PRCABJV",182,0)
 ;;IRS PAYMENT;11;;11
"RTN","PRCABJV",183,0)
 ;;PATIENT STATEMENT;2;;2
"RTN","PRCABJV",184,0)
 ;;TDA PAYMENT;8;;8
"RTN","PRCABJV",185,0)
 ;;UB PRINTED;9;;9
"RTN","PRCABJV",186,0)
 ;;LOCKBOX;12;;12
"RTN","PRCABJV",187,0)
 ;;TOP PAYMENT;13;;13
"RTN","PRCABJV",188,0)
 ;;EDI LOCKBOX;14;;14
"RTN","PRCABJV",189,0)
 ;;ADMINISTRATIVE OFFSET;15;;15
"RTN","PRCABJV",190,0)
 ;;PRIVATE COLLECTION AGENCY;16;;16
"RTN","PRCABJV",191,0)
 ;;EOF
"RTN","PRCACM")
0^42^B24617130^B23241294
"RTN","PRCACM",1,0)
PRCACM ;WASH-ISC@ALTOONA,PA/RGY-COMMENT ADJUSTMENT TRANSACTION ;6/2/95  2:41 PM
"RTN","PRCACM",2,0)
 ;;4.5;Accounts Receivable;**8,67,125,169,254,315**;Mar 20, 1995;Build 67
"RTN","PRCACM",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCACM",4,0)
 ;DBIA 3820-A used for direct global read into file 399.
"RTN","PRCACM",5,0)
 ;
"RTN","PRCACM",6,0)
 ;This is a routine for adjustment transaction.
"RTN","PRCACM",7,0)
 NEW PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,DIROUT,DIRUT,DIR,DUOUT,PRCA,PRCATY
"RTN","PRCACM",8,0)
 I '$G(GOTBILL) N PRCABN
"RTN","PRCACM",9,0)
ADJUST D BEGIN G:('$D(PRCABN))!('$D(PRCAEN)) Q
"RTN","PRCACM",10,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0) G Q:PRCAA1'>0 S PRCAA2=$P(^(0),U,3) W !
"RTN","PRCACM",11,0)
DIE S DR="[PRCA COMMENT]",DIE="^PRCA(433,",DA=PRCAEN D ^DIE K DIE,DR,DA
"RTN","PRCACM",12,0)
 I $P($G(^PRCA(433,PRCAEN,5)),"^",2)=""!'$P(^PRCA(433,PRCAEN,1),"^") S PRCACOMM="TRANSACTION INCOMPLETE" D DELETE^PRCAWO1 K PRCACOMM G:$D(DTOUT)!($G(GOTBILL)) Q G ADJUST
"RTN","PRCACM",13,0)
 W ! W:$D(IOF) @IOF S D0=PRCAEN K DXS D ^PRCATO4 K DXS
"RTN","PRCACM",14,0)
 I $P($G(^PRCA(433,PRCAEN,1)),"^")>$P($G(^(5)),"^",3),$P($G(^(5)),"^",3) W !!,*7,"You entered a date of follow-up before the date of contact!" S PRCACOMM="INVALID FOLLOW-UP DATE" D DELETE^PRCAWO1 K PRCACOMM G ADJUST
"RTN","PRCACM",15,0)
ASK S %=2 W !!,"Is this correct" D YN^DICN I %=0 W !,"Answer 'Y' or 'YES' if this data is correct, answer 'N' or 'NO' if not",! G ASK
"RTN","PRCACM",16,0)
 I (%<0)!(%=2) S PRCACOMM="USER CANCELED" D DELETE^PRCAWO1 K PRCACOMM G ADJUST
"RTN","PRCACM",17,0)
DONE I '$D(PRCAD("DELETE")) S RCASK=1 D TRANUP^PRCAUTL,UPPRIN^PRCADJ
"RTN","PRCACM",18,0)
 I $P($G(^RCD(340,+$P(^PRCA(430,PRCABN,0),"^",9),0)),"^")[";DPT(" D
"RTN","PRCACM",19,0)
 .S $P(^PRCA(433,PRCAEN,0),"^",10)=1
"RTN","PRCACM",20,0)
 .S DIR(0)="Y",DIR("A")="Should the BRIEF COMMENT print on the patient statement",DIR("B")="NO" D ^DIR K DIR
"RTN","PRCACM",21,0)
 .I Y=1 S DIR(0)="Y",DIR("A")="Are you SURE this BRIEF COMMENT should appear on the patient statement",DIR("B")="NO" D ^DIR K DIR I Y=1 D
"RTN","PRCACM",22,0)
 ..W !!,*7,"*** OK, This comment will appear on the patient's statement! ***",!,"(If you change your mind, use the option Remove/Add Comment From Patient Statement)",!
"RTN","PRCACM",23,0)
 ..S $P(^PRCA(433,PRCAEN,0),"^",10)=""
"RTN","PRCACM",24,0)
 ..Q
"RTN","PRCACM",25,0)
 .Q
"RTN","PRCACM",26,0)
 I $G(GOTBILL) G Q    ; PRCA*4.5*315
"RTN","PRCACM",27,0)
 G ADJUST
"RTN","PRCACM",28,0)
Q Q
"RTN","PRCACM",29,0)
EN1 Q:'$D(PRCABN)
"RTN","PRCACM",30,0)
 NEW X
"RTN","PRCACM",31,0)
 F X=0:0 S X=$O(^PRCA(433,"C",PRCABN,X)) Q:'X  I $P($G(^PRCA(433,X,1)),"^",4) I $P(^(1),"^",2)=1!($P(^(1),"^",2)=35) S PRCAQNM=$P(^(1),"^",4)+1
"RTN","PRCACM",32,0)
 Q
"RTN","PRCACM",33,0)
ASK1 ;ASK FOR STATUS
"RTN","PRCACM",34,0)
 NEW DTOUT,DUOUT,DIRUT,DIR,DIROUT
"RTN","PRCACM",35,0)
 S DIR("A")="Change 'BILL' status to?",DIR("B")="CANCELLED",DIR(0)="SB^1:CANCELLED;2:COLLECTED/CLOSED;" D ^DIR K DIR
"RTN","PRCACM",36,0)
 I Y=2 S PRCA("STATUS")=$O(^PRCA(430.3,"AC",108,0))
"RTN","PRCACM",37,0)
 Q
"RTN","PRCACM",38,0)
RPT ;
"RTN","PRCACM",39,0)
 NEW %DT,BEG,END,DIC,L,FR,TO,FLDS,PRCACM,POP,PRCADEV
"RTN","PRCACM",40,0)
ST W !! S %DT="AEX",%DT("A")="Follow-up Date(s) From: " D ^%DT G:Y<0 REPQ S BEG=Y
"RTN","PRCACM",41,0)
 S %DT="AEX",%DT("A")="Follow-up Date(s)   To: " D ^%DT G:Y<0 REPQ S END=Y
"RTN","PRCACM",42,0)
 I BEG>END W !!,*7,"  (Ending date must be greater than Start date.)" G ST
"RTN","PRCACM",43,0)
 S %ZIS="MQ" D ^%ZIS G:POP REPQ S PRCADEV=ION_";"_IOST_";"_IOM_";"_IOSL_";"_$G(IO("DOC"))
"RTN","PRCACM",44,0)
 I $D(IO("Q")) S Y=$$TI() G:Y<0 REPQ F PRCACM=1,2 S ZTDTH=$H,ZTRTN="DQ"_PRCACM_"^PRCACM",ZTSAVE("BEG")="",ZTSAVE("PRCADEV")="",ZTSAVE("END")="",ZTDESC="Comment Follow-up List" D ^%ZTLOAD G REPQ:PRCACM=2
"RTN","PRCACM",45,0)
 D DQ1,DQ2:'$D(DTOUT)
"RTN","PRCACM",46,0)
REPQ Q
"RTN","PRCACM",47,0)
DQ1 ;
"RTN","PRCACM",48,0)
 S IOP=PRCADEV,DIC="^PRCA(433,",L=0,BY="[PRCA FOLLOW-UP]",FLDS="[PRCA FOLLOW-UP]",FR=BEG,TO=END D EN1^DIP
"RTN","PRCACM",49,0)
 D ^%ZISC K IOP
"RTN","PRCACM",50,0)
 I $E(IOST)="C" W !,*7,"OK, first part of report complete...",!,"press return to continue: " R X:DTIME W @IOF S:X["^"!'$T DTOUT=1
"RTN","PRCACM",51,0)
 Q
"RTN","PRCACM",52,0)
DQ2 ;
"RTN","PRCACM",53,0)
 S IOP=PRCADEV D ^%ZIS
"RTN","PRCACM",54,0)
 I 'POP S IOP=PRCADEV,DIC="^RC(341,",L=0,BY="[RCAM COMMENT]",FLDS="[RCAM COMMENT]",FR=BEG,TO=END D EN1^DIP
"RTN","PRCACM",55,0)
 D ^%ZISC K IOP
"RTN","PRCACM",56,0)
 Q
"RTN","PRCACM",57,0)
TI() ;
"RTN","PRCACM",58,0)
 N %DT D NOW^%DTC S %DT("A")="Request Time to Queue? ",%DT("B")="NOW"
"RTN","PRCACM",59,0)
 S %DT="AERX",%DT(0)=% D ^%DT
"RTN","PRCACM",60,0)
 Q Y
"RTN","PRCACM",61,0)
BEGIN ;
"RTN","PRCACM",62,0)
 K PRCATERM,PRCAEN,PRCA("CKSITE"),PRCAIBS
"RTN","PRCACM",63,0)
 I '$G(GOTBILL) D BILL^PRCAUTL Q:('$D(PRCABN))     ;PRCA*4.5*315
"RTN","PRCACM",64,0)
 S PRCAIBS=$P($G(^DGCR(399,PRCABN,0)),U,13)        ; IB claim status - DBIA3820-A
"RTN","PRCACM",65,0)
 I PRCAIBS=1 W !!,"**  You cannot add AR Comments to an Entered/Not Reviewed claim.  **",!,*7 Q:$G(GOTBILL)  G BEGIN
"RTN","PRCACM",66,0)
 I PRCAIBS=2 W !!,"**  You cannot add AR Comments to an MRA Request claim.  **",!,*7 Q:$G(GOTBILL)  G BEGIN
"RTN","PRCACM",67,0)
 I '$D(^PRCA(430,PRCABN,2,0)),PRCAIBS=7 W !!,"**  You cannot add AR Comments to a claim Cancelled/not passed to AR.  **",!,*7 Q:$G(GOTBILL)  G BEGIN
"RTN","PRCACM",68,0)
 I $P($G(^PRCA(430,PRCABN,0)),"^",8)=49 W !!,"**  Comments CANNOT be entered on an ARCHIVED bill.  **",!,*7 Q:$G(GOTBILL)  G BEGIN
"RTN","PRCACM",69,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL S DIC="^PRCA(433," K PRCAMT,PRCAD("DELETE") Q
"RTN","PRCACPV")
0^63^B16867430^B14494379
"RTN","PRCACPV",1,0)
PRCACPV ;WASH-ISC@ALTOONA,PA/LDB- CHAMPVA FMS DOCUMENTS ;5/1/95  3:06 PM
"RTN","PRCACPV",2,0)
V ;;4.5;Accounts Receivable;**1,48,90,119,204,192,235,295,315**;Mar 20, 1995;Build 67
"RTN","PRCACPV",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCACPV",4,0)
 ;
"RTN","PRCACPV",5,0)
 ;Add CAT=47:"INELIGIBLE REIMB. ins. code for PRCA*4.5*315
"RTN","PRCACPV",6,0)
EN(BILL,ERR) ;Send CHAMPVA SUBSISTENCE bill to FMS
"RTN","PRCACPV",7,0)
 N ADD,ADDR,AMT,BILL0,BNUM,CAT,DA,DIE,DOC,DR,ERROR,ENT,FY,GECSFMS,I,P,PAT,SITE,TXT,VA,VAERR,VADM,X,XMDUZ,XMTEXT,XMY,XMSUB,Y
"RTN","PRCACPV",8,0)
 S ERR=-1
"RTN","PRCACPV",9,0)
 I '$G(BILL) S ERR="NO BILL NUMBER TO PROCESS" D ERR Q
"RTN","PRCACPV",10,0)
 S BILL0=$G(^PRCA(430,+BILL,0)) I BILL0']"" S ERR="BILL INFO CORRUPTED FOR BILL '"_BILL D ERR Q
"RTN","PRCACPV",11,0)
 ;Allow all TRICARE categories to transmit to FMS - PRCA*4.5*295
"RTN","PRCACPV",12,0)
 ;Add ineligible reimb ins *315
"RTN","PRCACPV",13,0)
 I "^27^28^30^31^32^47^"'[("^"_$P(BILL0,"^",2)_"^")  Q
"RTN","PRCACPV",14,0)
 S SITE=$P($P(BILL0,"^"),"-") I SITE']"" S ERR="BILL NUMBER CORRUPTED" D ERR Q
"RTN","PRCACPV",15,0)
 S BNUM=$P(BILL0,"^")
"RTN","PRCACPV",16,0)
 S AMT=$J($P(BILL0,"^",3),0,2)
"RTN","PRCACPV",17,0)
 S CAT=$P(BILL0,"^",2)
"RTN","PRCACPV",18,0)
 I "^27^31^"[("^"_CAT_"^") S PAT=$P($G(^PRCA(430,+BILL,0)),"^",9),PAT=$P($G(^RCD(340,+PAT,0)),"^"),PAT=$$NAM^RCFN01(PAT),PAT=$P(PAT,",",2)_" "_$P(PAT,",")
"RTN","PRCACPV",19,0)
 S FY=$$FY^RCFN01(DT)
"RTN","PRCACPV",20,0)
 S ADD=$$SADD^RCFN01(5)
"RTN","PRCACPV",21,0)
 ;Add ineligible reimb ins *315
"RTN","PRCACPV",22,0)
 S DESC=$S(CAT=27:"CHAMPVA Subsistence",CAT=30:"TRICARE",CAT=31:"TRICARE PATIENT",CAT=32:"TRICARE Third Party",CAT=47:"INELIGIBLE HOSP. REIMB.",1:"CHAMPVA Third Party")
"RTN","PRCACPV",23,0)
 F I=1:1:6 S ADDR(I)=$P(ADD,"^",I) I (I'=3),(ADDR(I)']"") S ERR="NO HOSPITAL ADDRESS FOUND FOR SITE GROUP" D ERR Q
"RTN","PRCACPV",24,0)
 I ERR>0 Q
"RTN","PRCACPV",25,0)
 ;CALL TO GET VENDORID BELOW - CHECK NOT NECESSARY SINCE GENERIC
"RTN","PRCACPV",26,0)
 ;VENDOR CODE ALWAYS RETURNED FOR THESE BILL TYPES
"RTN","PRCACPV",27,0)
 S VENDORID=$$VENDORID^RCXFMSUV(BILL)
"RTN","PRCACPV",28,0)
 I ADDR(6)["-" S ADDR(7)=$P(ADDR(6),"-",2),ADDR(6)=$P(ADDR(6),"-")
"RTN","PRCACPV",29,0)
 N FMSDT S FMSDT=$$FMSDATE^RCBEUTRA(DT)
"RTN","PRCACPV",30,0)
 S ^TMP("PRCACPV",$J,1)="BD2^"_$E(FMSDT,4,5)_"^"_$E(FMSDT,6,7)_"^"_$E(FMSDT,2,3)
"RTN","PRCACPV",31,0)
 S ^TMP("PRCACPV",$J,1)=^TMP("PRCACPV",$J,1)_"^^^^^^E^"_VENDORID_"^^"_AMT_"^^^^"_$E(ADDR(1),1,30)_"^"_$E(ADDR(2),1,30)_"^"_$E(ADDR(3),1,30)_"^"_$E(ADDR(4),1,19)_"^"_ADDR(5)_"^"_ADDR(6)_"^"_$G(ADDR(7))_"^"_"N^^^^^^W^~"
"RTN","PRCACPV",32,0)
 ;Add ineligible reimb ins *315
"RTN","PRCACPV",33,0)
 S ^TMP("PRCACPV",$J,2)="LIN^~BDA^"_$$LINE^RCXFMSC1(BILL)_"^"_FY_"^^"_$S(CAT=28:"0160A1",CAT<30:"3220",CAT=47:"0160A1",1:"0160A1")_"^"_SITE_"^^^"
"RTN","PRCACPV",34,0)
 S:CAT<30 CAT("R")=1000
"RTN","PRCACPV",35,0)
 I CAT'<30 S CAT("R")=$P($G(^PRCA(430,+BILL,11)),U,6)
"RTN","PRCACPV",36,0)
 ;Add ineligible reimb ins *315
"RTN","PRCACPV",37,0)
 S ^TMP("PRCACPV",$J,2)=^TMP("PRCACPV",$J,2)_CAT("R")_"^^^^^^^"_AMT_"^I^AR_INTERFACE^^^^"_$S(CAT<30:"09",CAT=47:"02",1:"02")_"^~"
"RTN","PRCACPV",38,0)
 D CONTROL^GECSUFMS("A",SITE,BNUM,"BD",10,0,"",DESC)
"RTN","PRCACPV",39,0)
 I '$D(GECSFMS("DA")) S ERR="COULD NOT ACCESS STACK FILE" D ERR Q
"RTN","PRCACPV",40,0)
 S DOC=$S($G(GECSFMS("DOC"))]"":$P(GECSFMS("DOC"),"^",3)_"-"_$P(GECSFMS("DOC"),"^",4),1:BNUM)
"RTN","PRCACPV",41,0)
 S DA=0 F  S DA=$O(^TMP("PRCACPV",$J,DA)) Q:'DA  D
"RTN","PRCACPV",42,0)
 . D SETCS^GECSSTAA(GECSFMS("DA"),^TMP("PRCACPV",$J,DA))
"RTN","PRCACPV",43,0)
 D OPEN^RCFMDRV1(DOC,6,"B"_+BILL,.ENT,.ERROR,+BILL)
"RTN","PRCACPV",44,0)
 I ERROR]"" S ERR="AR DOCUMENT MISSING - "_ERROR Q
"RTN","PRCACPV",45,0)
 D SETCODE^GECSSDCT(GECSFMS("DA"),"D RETN^RCFMFN02")
"RTN","PRCACPV",46,0)
 D SETSTAT^GECSSTAA(GECSFMS("DA"),"Q")
"RTN","PRCACPV",47,0)
 D SSTAT^RCFMFN02("B"_+BILL,1)
"RTN","PRCACPV",48,0)
 K ^TMP("PRCACPV",$J)
"RTN","PRCACPV",49,0)
 ;
"RTN","PRCACPV",50,0)
ERR ;Add ineligible reimb ins *315
"RTN","PRCACPV",51,0)
 I ERR'<0 S ERR="1^"_ERR D
"RTN","PRCACPV",52,0)
 .S TXT(1)="The following error has occurred while processing a "_$S(CAT=31:"TRICARE PATIENT ",CAT=47:"INELIGIBLE REIMB. INS. PATIENT",1:"CHAMPVA")
"RTN","PRCACPV",53,0)
 .S TXT(2)="bill: ("_$S($G(BNUM):BNUM,1:"BILL IFN - "_+BILL)_")"
"RTN","PRCACPV",54,0)
 .S TXT(3)=" "
"RTN","PRCACPV",55,0)
 .S TXT(4)=$P(ERR,"^",2)
"RTN","PRCACPV",56,0)
 .S TXT(5)=""
"RTN","PRCACPV",57,0)
 .S TXT(6)="You will need to use the BILLING DOCUMENT REGENERATION option to create the FMS document."
"RTN","PRCACPV",58,0)
 .S XMTEXT="TXT(",XMY("G.PRCA ERROR")=""
"RTN","PRCACPV",59,0)
 .S XMSUB=$S(CAT=31:"TRICARE PATIENT",CAT=30:"TRICARE",CAT=32:"TRICARE Third Party",CAT=47:"INELIGIBLE REIMB. INS. PATIENT",1:"CHAMPVA")_" FMS DOC error",XMDUZ="ACCOUNTS RECEIVABLE PACKAGE"
"RTN","PRCACPV",60,0)
 .D ^XMD
"RTN","PRCACPV",61,0)
 Q
"RTN","PRCAEXM")
0^59^B13816393^B14988614
"RTN","PRCAEXM",1,0)
PRCAEXM ;SF-ISC/YJK-ADMIN.COST CHARGE TRANSACTION ;3/30/94  11:19 AM
"RTN","PRCAEXM",2,0)
 ;;4.5;Accounts Receivable;**67,103,196,301,318,315**;Mar 20, 1995;Build 67
"RTN","PRCAEXM",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCAEXM",4,0)
 ;Update Int/adm.balance and Administrative cost charge transaction, is called by ^PRCAWO.
"RTN","PRCAEXM",5,0)
 ;
"RTN","PRCAEXM",6,0)
EN1 ;Adjustment Interest/admin.cost from an AR - this makes the int/adm.balance
"RTN","PRCAEXM",7,0)
 ;  ,marshal fee and court cost zero,0.
"RTN","PRCAEXM",8,0)
 N PRCAIND,ADMINTOT,PRCAERR,PRCABN0
"RTN","PRCAEXM",9,0)
 I '$D(^XUSEC("RCDPEAR",DUZ)) D  Q  ; PRCA*4.5*318 Added security key check
"RTN","PRCAEXM",10,0)
 . W !!,"This action can only be taken by users that have the RCDPEAR security key.",!
"RTN","PRCAEXM",11,0)
 . S VALMBCK="R"
"RTN","PRCAEXM",12,0)
 . D PAUSE^VALM1
"RTN","PRCAEXM",13,0)
 D BEGIN^PRCAWO G:('$D(PRCABN))!('$D(PRCAEN)) END G:'$D(^PRCA(430,PRCABN,7)) END
"RTN","PRCAEXM",14,0)
 L +^PRCA(430,PRCABN):1 I '$T W !!,*7,"ANOTHER USER IS EDITING THIS BILL" G EN1
"RTN","PRCAEXM",15,0)
 S PRCABN0=PRCABN
"RTN","PRCAEXM",16,0)
 S PRCAIND=$G(^PRCA(430,PRCABN,7))
"RTN","PRCAEXM",17,0)
 S PRCAMT=$P(PRCAIND,U,2)+$P(PRCAIND,U,3)+$P(PRCAIND,U,4)+$P(PRCAIND,U,5)
"RTN","PRCAEXM",18,0)
 S %=$P(^PRCA(430,PRCABN,0),U,2) I "PC"'[$P(^PRCA(430.2,%,0),U,6) W *7,!,"This AR may not be appropriate to charge Interest/Administrative cost.",!,"Please check the category of this AR.",! H 3
"RTN","PRCAEXM",19,0)
 K % W !!,"You may exempt the account from all the interest and administrative cost balances - making those balances zero (0),",!,"or adjust them."
"RTN","PRCAEXM",20,0)
EN011 S %=2 W !!,"Do you want to exempt the account from all the Int/Adm. costs" D YN^DICN I %<0 S PRCACOMM="User Canceled" D DELETE^PRCAWO1 K PRCACOMM G EN1
"RTN","PRCAEXM",21,0)
 I %=1 D EN11,END G EN1
"RTN","PRCAEXM",22,0)
 I %=0 W !,"ANSWER 'YES' OR 'NO' " G EN011
"RTN","PRCAEXM",23,0)
 W !,"Adjusting the administrative/Interest charge ...",!
"RTN","PRCAEXM",24,0)
 D DIEEN^PRCAWO1,END G EN1
"RTN","PRCAEXM",25,0)
 ;
"RTN","PRCAEXM",26,0)
 ;  exempt interest and admin charges
"RTN","PRCAEXM",27,0)
EN11 S PRCATYPE=14,DIE="^PRCA(433,",DA=PRCAEN
"RTN","PRCAEXM",28,0)
 S DR=".03////^S X="_PRCABN_";11////^S X="_DT_";12////^S X="_PRCATYPE_";15////^S X="_PRCAMT_";"
"RTN","PRCAEXM",29,0)
 S DR=DR_"27////^S X="_+$P(PRCAIND,U,2)_";"  ;interest
"RTN","PRCAEXM",30,0)
 S DR=DR_"28////^S X="_+$P(PRCAIND,U,3)_";"  ;admin charge
"RTN","PRCAEXM",31,0)
 S DR=DR_"25////^S X="_+$P(PRCAIND,U,4)_";"  ;marshal fee
"RTN","PRCAEXM",32,0)
 S DR=DR_"26////^S X="_+$P(PRCAIND,U,5)_";"  ;court cost
"RTN","PRCAEXM",33,0)
 S DIC=DIE,PRCA("LOCK")=0 D LOCKF^PRCAWO1 Q:PRCA("LOCK")=1  D ^DIE
"RTN","PRCAEXM",34,0)
 I PRCAEN,$D(^PRCA(430,"TCSP",PRCABN)) D DECADJ^RCTCSPU(PRCABN,PRCAEN) ;prca*4.5*301 add cs 5B flag
"RTN","PRCAEXM",35,0)
 S $P(^PRCA(430,PRCABN,7),U,2,5)="0^0^0^0" D TRANST^PRCAWO1 Q
"RTN","PRCAEXM",36,0)
 ;
"RTN","PRCAEXM",37,0)
 ;
"RTN","PRCAEXM",38,0)
EN2 Q:'$D(PRCAEN)  Q:($P(^PRCA(433,PRCAEN,2),U,8)="")&($P(^PRCA(433,PRCAEN,2),U,7)="")
"RTN","PRCAEXM",39,0)
 W !,"MONTHLY ADMIN. CHARGE: ",?25,+$P(^PRCA(433,PRCAEN,2),U,8),?40,"INTEREST CHARGE: ",+$P(^PRCA(433,PRCAEN,2),U,7) Q
"RTN","PRCAEXM",40,0)
 ;
"RTN","PRCAEXM",41,0)
END L -^PRCA(433,+$G(PRCAEN)),-^PRCA(430,+$G(PRCABN))
"RTN","PRCAEXM",42,0)
 S X(1)=0,X=$G(^PRCA(430,+$G(PRCABN0),7)),X(1)=+X,X(1)=$P(X,"^",2)+X(1),X(1)=$P(X,"^",3)+X(1),X(1)=$P(X,"^",4)+X(1),X(1)=$P(X,"^",5)+X(1)
"RTN","PRCAEXM",43,0)
 K PRCA("STATUS")
"RTN","PRCAEXM",44,0)
 I X(1)=0,$G(PRCABN0) D
"RTN","PRCAEXM",45,0)
 .;Check for payment transactions
"RTN","PRCAEXM",46,0)
 .F X=0:0 S X=$O(^PRCA(433,"C",PRCABN0,X)) Q:'X  I ",2,7,20,"[(","_$P($G(^PRCA(430.3,+$P($G(^PRCA(433,X,1)),"^",2),0)),"^",3)_",") S PRCA("STATUS")=$O(^PRCA(430.3,"AC",108,0))
"RTN","PRCAEXM",47,0)
 .S:'$D(PRCA("STATUS")) PRCA("STATUS")=$O(^PRCA(430.3,"AC",111,0))
"RTN","PRCAEXM",48,0)
 .S DA=PRCABN0,DIE="^PRCA(430,",DR="8////"_PRCA("STATUS") D ^DIE
"RTN","PRCAEXM",49,0)
 K PRCATY,PRCA,PRCA2,PRCAD,PRCABN,PRCAEN,PRCATYPE,DA,DIE,DIC,PRCAMT,DR,X,% Q
"RTN","PRCAFUT")
0^62^B42447114^B40349439
"RTN","PRCAFUT",1,0)
PRCAFUT ;WASH-ISC@ALTOONA/CLH-FMS Utilities ;10/8/96  10:50 AM
"RTN","PRCAFUT",2,0)
V ;;4.5;Accounts Receivable;**5,39,64,92,104,169,188,194,220,231,315**;Mar 20, 1995;Build 67
"RTN","PRCAFUT",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCAFUT",4,0)
CPLK(PRCABN) ;get control point from file 430 and set DR string to edit CP data
"RTN","PRCAFUT",5,0)
 N DR,X,Y,QUIT,FUND,FTBL,CAT,CATTYP,CATTYPE,CP,BBFY,EBFY,DIC,BGFY,CPTBL,CC,SCC,EXIT,FYERROR
"RTN","PRCAFUT",6,0)
 K PRCA("EXIT")
"RTN","PRCAFUT",7,0)
 S PRCA("SITE")=$S($G(PRCABN):$P($P($G(^PRCA(430,PRCABN,0)),"^"),"-"),1:$$SITE^RCMSITE)
"RTN","PRCAFUT",8,0)
 S CP=$P($G(^PRCA(430,PRCABN,11)),U)
"RTN","PRCAFUT",9,0)
 S CAT=+$P($G(^PRCA(430,PRCABN,0)),U,2),CATTYP=$P($G(^PRCA(430.2,CAT,0)),U,13)
"RTN","PRCAFUT",10,0)
 I CAT>39,CAT<45 D  G END
"RTN","PRCAFUT",11,0)
    .S TYPE="09" D CHKELEM,REV Q:$G(PRCA("EXIT"))
"RTN","PRCAFUT",12,0)
    .S DR="257///^S X=$G(PRCA(""SITE""))"
"RTN","PRCAFUT",13,0)
    .;I CAT'=42 S DR=DR_";258////1"
"RTN","PRCAFUT",14,0)
    .D DIE
"RTN","PRCAFUT",15,0)
    .Q
"RTN","PRCAFUT",16,0)
 I CAT=47 D  G END ;315
"RTN","PRCAFUT",17,0)
 .S TYPE="02",FUND="0160A1"
"RTN","PRCAFUT",18,0)
 .S DR="259///"_TYPE_";203///^S X=FUND"
"RTN","PRCAFUT",19,0)
 .D DIE
"RTN","PRCAFUT",20,0)
 .Q
"RTN","PRCAFUT",21,0)
 D TYPE Q:$D(PRCA("EXIT"))
"RTN","PRCAFUT",22,0)
 I CATTYP=2 K PRCA("EXIT") D  G END
"RTN","PRCAFUT",23,0)
  . ;reibursement logic (if there is such a thing)
"RTN","PRCAFUT",24,0)
  . S DR="203" D DIE K DR I $D(Y) Q
"RTN","PRCAFUT",25,0)
  . I '$D(FUND) S FUND=$P($G(^PRCA(430,PRCABN,11)),U,17) D  I FUND=-1 S PRCA("EXIT")="" Q
"RTN","PRCAFUT",26,0)
  .. N X,Y,DIC
"RTN","PRCAFUT",27,0)
  .. S X=FUND,DIC="^PRCD(420.14,",DIC(0)="XMNZ",DIC("B")=FUND D ^DIC
"RTN","PRCAFUT",28,0)
  .. I +Y<0 D FUND^PRCAFBDU D  Q:FUND=-1
"RTN","PRCAFUT",29,0)
  ... S DIC="^PRCD(420.14,",DIC(0)="AEMNQZ",DIC("A")="FUND: ",DIC("B")=FUND
"RTN","PRCAFUT",30,0)
  ... D ^DIC
"RTN","PRCAFUT",31,0)
  ... S:+Y<0 FUND=-1 Q
"RTN","PRCAFUT",32,0)
  .. S FUND=Y
"RTN","PRCAFUT",33,0)
  .. S BBFY=$E($P(Y(0),U,3),3,4),EBFY=$E($P(Y(0),U,4),3,4)
"RTN","PRCAFUT",34,0)
  ..Q
"RTN","PRCAFUT",35,0)
  .S PRCABN(1)=$O(^PRCA(430,+PRCABN,2,0))
"RTN","PRCAFUT",36,0)
  .S PRCABN(2)=$G(^PRCA(430,+PRCABN,2,PRCABN(1),0))
"RTN","PRCAFUT",37,0)
  .S PRCABN(4)=+$G(PRCABN(2))
"RTN","PRCAFUT",38,0)
  .S X=BBFY D ^%DT S PRCABN(3)=$E(Y,1,3)
"RTN","PRCAFUT",39,0)
  .K ^PRCA(430,PRCABN,2,PRCABN(1),0)
"RTN","PRCAFUT",40,0)
  .K ^PRCA(430,PRCABN,2,"B",PRCABN(4),PRCABN(1))
"RTN","PRCAFUT",41,0)
  .S ^PRCA(430,PRCABN,2,PRCABN(3),0)=PRCABN(2)
"RTN","PRCAFUT",42,0)
  .S $P(^PRCA(430,PRCABN,2,PRCABN(3),0),"^")=BBFY
"RTN","PRCAFUT",43,0)
  .S ^PRCA(430,PRCABN,2,"B",BBFY,PRCABN(3))=""
"RTN","PRCAFUT",44,0)
  .D DOCREQ^PRC0C(+FUND,"REV","FTBL")
"RTN","PRCAFUT",45,0)
  . I '$D(FTBL) S PRCA("EXIT")=1 D  Q
"RTN","PRCAFUT",46,0)
  .. W !,*7,"FMS REQUIRED FIELDS missing.  Edit the IFCAP REQUIRED FIELDS table",!,"for FUND/FY combination."
"RTN","PRCAFUT",47,0)
  .. Q
"RTN","PRCAFUT",48,0)
  . S DR="259////^S X=CAT;257////^S X=$G(PRCA(""SITE""));201////^S X=BBFY;202////^S X=$S($G(EBFY)'=BBFY:EBFY,1:"""")"
"RTN","PRCAFUT",49,0)
  . D DR
"RTN","PRCAFUT",50,0)
  . Q
"RTN","PRCAFUT",51,0)
 ;Ask Beginning/end budget fiscal year
"RTN","PRCAFUT",52,0)
 D FY^PRCAFUT1
"RTN","PRCAFUT",53,0)
 I $D(FYERROR) S PRCA("EXIT")=1 Q
"RTN","PRCAFUT",54,0)
 ;S BGFY=$P(^PRCA(430,PRCABN,0),U,10),BGFY=$$FY^RCFN01(BGFY)
"RTN","PRCAFUT",55,0)
 S DR="250;I '$D(CPTBL) D CPTBL^PRCAFUT;259////^S X=CAT;204////^S X=$P(CPTBL,U);206////^S X=$P(CPTBL,U,3)"
"RTN","PRCAFUT",56,0)
 S DR=DR_";203////^S X=$P(CPTBL,U,5);201////^S X=$E($P(CPTBL,U,6),3,4)"
"RTN","PRCAFUT",57,0)
 S DR(1,430,1)="202////^S X=$S($P(CPTBL,U,7)'=$P(CPTBL,U,6):$E($P(CPTBL,U,7),3,4),1:"""")"
"RTN","PRCAFUT",58,0)
 S DR(1,430,2)="261////^S X=$P(CPTBL,U,10)"
"RTN","PRCAFUT",59,0)
 S DA=PRCABN D ^DIE K DR
"RTN","PRCAFUT",60,0)
 I $D(Y) S PRCA("EXIT")=1 Q
"RTN","PRCAFUT",61,0)
 K DR
"RTN","PRCAFUT",62,0)
 D FTBL Q:'$D(FTBL)
"RTN","PRCAFUT",63,0)
 S (X,PRCABN(1))=$E($P(CPTBL,U,6),3,4)
"RTN","PRCAFUT",64,0)
 D ^%DT S PRCABN(2)=$E(Y,1,3)
"RTN","PRCAFUT",65,0)
 S PRCABN(3)=$O(^PRCA(430,+PRCABN,2,0))
"RTN","PRCAFUT",66,0)
 S PRCABN(4)=$G(^PRCA(430,+PRCABN,2,PRCABN(3),0))
"RTN","PRCAFUT",67,0)
 S PRCABN(5)=$E(PRCABN(4),1,2)
"RTN","PRCAFUT",68,0)
 K ^PRCA(430,PRCABN,2,PRCABN(3),0)
"RTN","PRCAFUT",69,0)
 K ^PRCA(430,PRCABN,2,"B",PRCABN(5),PRCABN(3))
"RTN","PRCAFUT",70,0)
 S ^PRCA(430,PRCABN,2,PRCABN(2),0)=PRCABN(4)
"RTN","PRCAFUT",71,0)
 S $P(^PRCA(430,PRCABN,2,PRCABN(2),0),"^")=PRCABN(1)
"RTN","PRCAFUT",72,0)
 S ^PRCA(430,PRCABN,2,"B",PRCABN(1),PRCABN(2))=""
"RTN","PRCAFUT",73,0)
 S $P(^PRCA(430,PRCABN,2,0),"^",3)=PRCABN(2)
"RTN","PRCAFUT",74,0)
 Q
"RTN","PRCAFUT",75,0)
FTBL S FUND=$$FUND^PRC0C($P(CPTBL,U,5),$P(CPTBL,U,6))
"RTN","PRCAFUT",76,0)
 D DOCREQ^PRC0C(+FUND,"SPE","FTBL")
"RTN","PRCAFUT",77,0)
 I '$D(FTBL) W !!,*7,"UNABLE TO GET FMS-LINE FUND ACCOUNTING INFORMATION.  CHECK CONTROL POINT." H 5 S PRCA("EXIT")=1 Q
"RTN","PRCAFUT",78,0)
 S DR="257////^S X=$G(PRCA(""SITE""))"
"RTN","PRCAFUT",79,0)
DR I $$INTEG^RCFN01($G(PRCA("SITE"))) S DR=DR_";260"
"RTN","PRCAFUT",80,0)
 I $G(FTBL("AO"))="Y" S DR=DR_";204"
"RTN","PRCAFUT",81,0)
 I $G(FTBL("FCPRJ"))="Y" S DR=DR_";I '$D(CPTBL) D CPTBL^PRCAFUT;206////^S X=$P(CPTBL,U,3)"
"RTN","PRCAFUT",82,0)
 I $G(FTBL("CC"))="Y"            S DR=DR_";251;252////^S X=$G(SCC)"
"RTN","PRCAFUT",83,0)
 I $G(FTBL("BOC"))="Y"           S DR=DR_";253"
"RTN","PRCAFUT",84,0)
 I $G(FTBL("SBOC"))="Y"!(CAT=20) S DR=DR_";254"
"RTN","PRCAFUT",85,0)
 I $G(FTBL("JOB"))="Y"           S DR=DR_";261"
"RTN","PRCAFUT",86,0)
 I $G(FTBL("RC"))="Y"            S DR=DR_";263"
"RTN","PRCAFUT",87,0)
 I $G(FTBL("REV"))="Y"           D DIE Q:$G(PRCA("EXIT"))  D REV Q:$G(PRCA("EXIT"))
"RTN","PRCAFUT",88,0)
 I $G(FTBL("SREV"))="Y"          S DR=$S(DR="":"256",1:DR_";256")
"RTN","PRCAFUT",89,0)
 I $G(FTBL("OC"))="Y"            S DR=$S(DR="":"205",1:DR_";205")
"RTN","PRCAFUT",90,0)
 I DR'="" D DIE
"RTN","PRCAFUT",91,0)
 Q
"RTN","PRCAFUT",92,0)
DIE S DA=PRCABN,DIE="^PRCA(430," D ^DIE
"RTN","PRCAFUT",93,0)
END I $D(Y) S PRCA("EXIT")=1
"RTN","PRCAFUT",94,0)
 K DR Q
"RTN","PRCAFUT",95,0)
 ;
"RTN","PRCAFUT",96,0)
RECTYP(BN) ;Refund or reimbursement
"RTN","PRCAFUT",97,0)
 I '$D(BN),'$D(^PRCA(430,BN,0)) Q -1
"RTN","PRCAFUT",98,0)
 Q $P($G(^PRCA(430,BN,11)),U,10)
"RTN","PRCAFUT",99,0)
 ;
"RTN","PRCAFUT",100,0)
REV ;lookup revenue by calling "C" xref
"RTN","PRCAFUT",101,0)
 N DS,DIC,DIBTDH,HELP,I,IAT,OUT,RV,X,Y
"RTN","PRCAFUT",102,0)
 S OUT=0,RV=$P($G(^PRCA(430,PRCABN,11)),U,6)
"RTN","PRCAFUT",103,0)
 F  D  Q:OUT
"RTN","PRCAFUT",104,0)
 .W !,"REVENUE SOURCE: "_$S(RV'="":RV_"// ",1:"") R X:DTIME
"RTN","PRCAFUT",105,0)
 .I $E(X)="?",X?."?" D @($S($L(X)=1:"REVH1",1:"REVH2")) S DIC=347.3,DIC(0)="QE" D ^DIC Q:Y<1  Q
"RTN","PRCAFUT",106,0)
 .I $E(X)="^",X?."^" S OUT=1,PRCA("EXIT")=1 Q
"RTN","PRCAFUT",107,0)
 .I X="@" W "??  Required" Q
"RTN","PRCAFUT",108,0)
 .I X="",RV'="" S OUT=1 Q
"RTN","PRCAFUT",109,0)
 .I X="",RV="" W "??" D REVH1 Q
"RTN","PRCAFUT",110,0)
 .I $D(^RC(347.3,"B",X)) D  Q
"RTN","PRCAFUT",111,0)
 ..S DS=$P($G(^RC(347.3,+$O(^RC(347.3,"B",X,0)),0)),U,2),IAT=$P(^(0),U,3)
"RTN","PRCAFUT",112,0)
 ..W "       "_DS W:IAT "         INACTIVE" D REVDIE
"RTN","PRCAFUT",113,0)
 .S DIC="^RC(347.3,",DIC(0)="QE",D="C" D IX^DIC I Y<1 D REVH1 Q
"RTN","PRCAFUT",114,0)
 .S X=$P(Y,U,2) D REVDIE
"RTN","PRCAFUT",115,0)
 S DR=""
"RTN","PRCAFUT",116,0)
 Q
"RTN","PRCAFUT",117,0)
REVDIE S DA=PRCABN,DIE="^PRCA(430,",DR="255///"_X D ^DIE I $G(X)'="" S OUT=1 Q
"RTN","PRCAFUT",118,0)
 D REVH1 Q
"RTN","PRCAFUT",119,0)
REVH1 S HELP("DIHELP",1)=$G(^DD(430,255,3)) D MSG^DIALOG("WH","",70,5,"HELP") Q
"RTN","PRCAFUT",120,0)
REVH2 D HELP^DIE(430,"",255,"D","HELP"),MSG^DIALOG("WH","",70,8,"HELP") Q
"RTN","PRCAFUT",121,0)
 ;
"RTN","PRCAFUT",122,0)
FUND ;get fund
"RTN","PRCAFUT",123,0)
 N DIC,Y
"RTN","PRCAFUT",124,0)
 S DIC="^PRCD(420.14,",DIC(0)="EMNQZ"
"RTN","PRCAFUT",125,0)
 D ^DIC
"RTN","PRCAFUT",126,0)
 I $D(DUOUT)!$D(DTOUT) S PRCA("EXIT")=1 Q
"RTN","PRCAFUT",127,0)
 Q:+Y<0
"RTN","PRCAFUT",128,0)
 S FUND=Y
"RTN","PRCAFUT",129,0)
 S BBFY=$E($P(Y(0),U,3),3,4),EBFY=$E($P(Y(0),U,4),3,4)
"RTN","PRCAFUT",130,0)
 Q
"RTN","PRCAFUT",131,0)
 ;
"RTN","PRCAFUT",132,0)
DISPLACC ;display account information
"RTN","PRCAFUT",133,0)
 Q:'$D(PRCABN)  NEW DIC,L,FR,TO,FLDS,IOP,X
"RTN","PRCAFUT",134,0)
 R !!,"Press <RETURN> to continue: ",X:60
"RTN","PRCAFUT",135,0)
 I X["^" S PRCA("EXIT")="" Q
"RTN","PRCAFUT",136,0)
 S IOP=IO(0),DIC="^PRCA(430,",FLDS="[PRCA DISP AUDIT2]",(FR,TO)=PRCABN,L=0,BY="@NUMBER" D EN1^DIP
"RTN","PRCAFUT",137,0)
 Q
"RTN","PRCAFUT",138,0)
 ;
"RTN","PRCAFUT",139,0)
CP ;lookup control point
"RTN","PRCAFUT",140,0)
 N DIC
"RTN","PRCAFUT",141,0)
 S DIC="^PRC(420,"_$S($D(PRCA("SITE")):PRCA("SITE"),1:$$SITE^RCMSITE)_",1,",DIC(0)="EMNQ",X=CP
"RTN","PRCAFUT",142,0)
 D ^DIC
"RTN","PRCAFUT",143,0)
 I +Y<0 K X,CP Q
"RTN","PRCAFUT",144,0)
 S CP=+Y
"RTN","PRCAFUT",145,0)
 Q
"RTN","PRCAFUT",146,0)
 ;
"RTN","PRCAFUT",147,0)
CC ;cost center
"RTN","PRCAFUT",148,0)
 G CC^PRCAFBDU
"RTN","PRCAFUT",149,0)
 ;
"RTN","PRCAFUT",150,0)
BOC ;budget object code
"RTN","PRCAFUT",151,0)
 G BOC^PRCAFBDU
"RTN","PRCAFUT",152,0)
 ;
"RTN","PRCAFUT",153,0)
TYPE ;ask if bill is a refund or reimbursement
"RTN","PRCAFUT",154,0)
 W !!,"Building FMS Accounting Elements...",!
"RTN","PRCAFUT",155,0)
 N DIR,Y,TYPE
"RTN","PRCAFUT",156,0)
 I +$G(CAT)=1 S CAT="02",CATTYPE=2 D CHKELEM Q
"RTN","PRCAFUT",157,0)
 I +$G(CAT)=10 S CAT=50,CATTYPE=2 D CHKELEM Q
"RTN","PRCAFUT",158,0)
 I +$G(CAT)=47 S CAT="02" Q
"RTN","PRCAFUT",159,0)
 D BDTRANS^PRCAFBDU
"RTN","PRCAFUT",160,0)
 Q:$D(PRCA("EXIT"))
"RTN","PRCAFUT",161,0)
 S CATTYP=$S(TYPE="01":"1",TYPE="20":"1",1:"2")
"RTN","PRCAFUT",162,0)
 S CAT=TYPE ; I CAT>2 S CAT=$S(CAT=4:"20",1:"9")
"RTN","PRCAFUT",163,0)
 D CHKELEM
"RTN","PRCAFUT",164,0)
 Q
"RTN","PRCAFUT",165,0)
 ;
"RTN","PRCAFUT",166,0)
CHKELEM ;check for correct accounting line data
"RTN","PRCAFUT",167,0)
 N I
"RTN","PRCAFUT",168,0)
 Q:'$D(^PRCA(430,PRCABN,11))
"RTN","PRCAFUT",169,0)
 I $G(CATTYP)=1 D  Q
"RTN","PRCAFUT",170,0)
  . F I=6,7 S $P(^PRCA(430,PRCABN,11),U,I)=""
"RTN","PRCAFUT",171,0)
  . Q
"RTN","PRCAFUT",172,0)
 Q:$G(TYPE)=10
"RTN","PRCAFUT",173,0)
 F I=1:1:5,11:1:16,18:1:21 S $P(^PRCA(430,PRCABN,11),U,I)=""
"RTN","PRCAFUT",174,0)
 S $P(^PRCA(430,PRCABN,11),U,15)="05"
"RTN","PRCAFUT",175,0)
 Q
"RTN","PRCAFUT",176,0)
CPTBL ;build CP table
"RTN","PRCAFUT",177,0)
 S:'$D(BGFY) BGFY=$$FY^RCFN01(DT)
"RTN","PRCAFUT",178,0)
 S BGFY(1)=$S(BGFY>50:19,1:20)
"RTN","PRCAFUT",179,0)
 S CPTBL=$$ACC^PRC0C($G(PRCA("SITE")),+CP_U_BGFY_U_BGFY(1)_BGFY)
"RTN","PRCAFUT",180,0)
 I '$D(CPTBL) S CPTBL=""
"RTN","PRCAFUT",181,0)
 Q
"RTN","PRCAFUT",182,0)
 ;
"RTN","PRCAFUT",183,0)
CPHLP ;executable help for cp prompt
"RTN","PRCAFUT",184,0)
 N DIC,X,Y
"RTN","PRCAFUT",185,0)
 S DIC="^PRC(420,"_$S($D(PRCA("SITE")):PRCA("SITE"),1:$$SITE^RCMSITE)_",1,",DIC(0)="EMQ",X="?" D ^DIC
"RTN","PRCAFUT",186,0)
 Q
"RTN","PRCAFUT",187,0)
 ;
"RTN","PRCAFUT",188,0)
FND(BILL) ;Get fund for a bill
"RTN","PRCAFUT",189,0)
 I '$D(^PRCA(430,BILL,0)) Q -1
"RTN","PRCAFUT",190,0)
 I $D(^PRCA(430,BILL,11)),$P(^(11),"^",17)'="" Q $P(^(11),"^",17)
"RTN","PRCAFUT",191,0)
 I $P(^PRCA(430,BILL,0),"^",18)'="" Q $E($P(^(0),"^",18),4,9)
"RTN","PRCAFUT",192,0)
 Q -1
"RTN","PRCAFUT",193,0)
 ;
"RTN","PRCAHIS")
0^37^B26002669^B25570251
"RTN","PRCAHIS",1,0)
PRCAHIS ;WASH-ISC@ALTOONA,PA/LDB-Transaction History Report ;9/27/93  4:32 PM
"RTN","PRCAHIS",2,0)
V ;;4.5;Accounts Receivable;**110,198,233,315**;Mar 20, 1995;Build 67
"RTN","PRCAHIS",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCAHIS",4,0)
 ;
"RTN","PRCAHIS",5,0)
EN ;Ask debtor and date range for transaction history
"RTN","PRCAHIS",6,0)
 K DIR S POP=0
"RTN","PRCAHIS",7,0)
 N DPTNOFZY,DPTNOFZK S (DPTNOFZY,DPTNOFZK)=1
"RTN","PRCAHIS",8,0)
 S DIR(0)="PO^340:QEAMZ",DIR("A")="Select Patient ",DIR("?")="Enter a Patient name" D ^DIR
"RTN","PRCAHIS",9,0)
 I $D(DIRUT)!(Y="") G EXIT1
"RTN","PRCAHIS",10,0)
 I $P($G(^RCD(340,+Y,0)),U)'["DPT" W *7 G EN
"RTN","PRCAHIS",11,0)
 S DEB=+Y K DIR
"RTN","PRCAHIS",12,0)
 I '$D(^PRCA(433,"ATD",DEB)),'$D(^PRCA(430,"ATD",DEB)),'$D(^RC(341,"AD",DEB)) W !,"This patient has no activity." Q
"RTN","PRCAHIS",13,0)
 S BDATE=$O(^PRCA(433,"ATD",+DEB,0)),DIR(0)="DO" S:'BDATE BDATE=2910101
"RTN","PRCAHIS",14,0)
 S DIR("A")="History beginning",DIR("B")=$$FMTE^XLFDT(BDATE,"1D")
"RTN","PRCAHIS",15,0)
 S DIR("?")="The default date is either the last statement day or T-30, but any date may be entered."
"RTN","PRCAHIS",16,0)
 D ^DIR
"RTN","PRCAHIS",17,0)
 S:Y'="" BDATE=Y I $D(DIRUT)&'Y G EXIT1 Q
"RTN","PRCAHIS",18,0)
 K DIR,X,Y
"RTN","PRCAHIS",19,0)
 S DIR(0)="DO^"_BDATE_":DT"
"RTN","PRCAHIS",20,0)
 S DIR("A")="History ending",DIR("B")=$$FMTE^XLFDT(DT,"1D")
"RTN","PRCAHIS",21,0)
 D ^DIR S:Y="" Y=DT I $D(DIRUT)&'Y G EXIT1 Q
"RTN","PRCAHIS",22,0)
 S EDATE=Y
"RTN","PRCAHIS",23,0)
 K DIR
"RTN","PRCAHIS",24,0)
TYPE S DIC="^PRCA(430.3,",DIC(0)="QEMZ",DIC("S")="I +Y,(+Y<15!(""25^29^34^35^40^41^43^45^47^50^51^53^54^55^56^57^58^59^60^61^62^63^64^65""[(""^""_+Y_""^"")))"
"RTN","PRCAHIS",25,0)
 S Y=0 R !,"TRANSACTION TYPE: ALL//",X:DTIME I '$T!(X="^") Q
"RTN","PRCAHIS",26,0)
 I X]"",X'="ALL" D ^DIC
"RTN","PRCAHIS",27,0)
 I X["?" W !!,"Enter 'ALL' for all types of transactions in the AR TRANSACTION TYPE FILE",!,"including COMMENTS and STATEMENT DATES.",! G TYPE
"RTN","PRCAHIS",28,0)
 G:Y<0 EXIT1  S TYP=$S(+Y:+Y,1:X)
"RTN","PRCAHIS",29,0)
 I $P($G(^PRCA(430.3,+Y,0)),"^",3)>100 W !!,"This is STATUS. Enter a transaction type only." G TYPE
"RTN","PRCAHIS",30,0)
 S %ZIS="AEQ" D ^%ZIS G:POP EXIT1
"RTN","PRCAHIS",31,0)
 I $D(IO("Q")) D  Q
"RTN","PRCAHIS",32,0)
 .S ZTSAVE("DEB")="",ZTSAVE("BDATE")="",ZTSAVE("EDATE")="",ZTSAVE("TYP")="",ZTRTN="DQ^PRCAHIS",ZTDESC="Patient Transaction History Report"
"RTN","PRCAHIS",33,0)
 .D ^%ZTLOAD,^%ZISC,EXIT1 K ZTSAVE,ZTRTN Q
"RTN","PRCAHIS",34,0)
 ;
"RTN","PRCAHIS",35,0)
DQ ;Call to build array of payment transactions
"RTN","PRCAHIS",36,0)
 ;
"RTN","PRCAHIS",37,0)
 U IO
"RTN","PRCAHIS",38,0)
 D TRANS^PRCAHIS1
"RTN","PRCAHIS",39,0)
 I '$D(^TMP("PRCAGT",$J)) W !!,"This patient has no activity during this time period."
"RTN","PRCAHIS",40,0)
 I $D(^TMP("PRCAGT",$J)) D HDR,PRINT
"RTN","PRCAHIS",41,0)
 ;
"RTN","PRCAHIS",42,0)
EXIT1 K AMT,BDATE,BN,BN0,CAT,CATCARE,EDATE,EVNTT,DAT1,DAT2,DATE,DEB,DIC,DIR,DIWL,DIWF,DIWR,DIWT,DUOUT,DX,DY,EVNT,EVNTT,LINE,PG,PNODE,TBAL,TOTPRIN,TOTTRAN,TTYP,TYP,TN,TN0,X,Y,Z,ZTSK,^TMP("PRCAGT",$J),^UTILITY($J)
"RTN","PRCAHIS",43,0)
 I $D(DIRUT)!POP K DIRUT,POP Q
"RTN","PRCAHIS",44,0)
 ;end of routine
"RTN","PRCAHIS",45,0)
EXIT2 I $E(IOST,1,2)'="C-" W @IOF D ^%ZISC Q
"RTN","PRCAHIS",46,0)
 I $E(IOST,1,2)="C-" W ! D ENS^%ZISS S DY=IOM-1,DX=0 X IOXY D KILL^%ZISS K DIR,X,Y,^UTILITY($J) S DIR(0)="E" D ^DIR
"RTN","PRCAHIS",47,0)
 I $D(DIRUT) K DIRUT Q
"RTN","PRCAHIS",48,0)
 D ^%ZISC
"RTN","PRCAHIS",49,0)
 G EN
"RTN","PRCAHIS",50,0)
 ;
"RTN","PRCAHIS",51,0)
 ;
"RTN","PRCAHIS",52,0)
PRINT ;Print transactions
"RTN","PRCAHIS",53,0)
 K DIRUT
"RTN","PRCAHIS",54,0)
 S DATE=0 F  S DATE=$O(^TMP("PRCAGT",$J,DEB,DATE)) Q:'DATE  Q:$D(DIRUT)  D
"RTN","PRCAHIS",55,0)
 .S BN="" F  S BN=$O(^TMP("PRCAGT",$J,DEB,DATE,BN)) Q:BN=""!($D(DIRUT))  D SCRN D
"RTN","PRCAHIS",56,0)
 ..I $D(^TMP("PRCAGT",$J,DEB,DATE,0)) S (BN0,PNODE)=^(0) D
"RTN","PRCAHIS",57,0)
 ...W !,$$FMTE^XLFDT($P(DATE,".")),?16
"RTN","PRCAHIS",58,0)
 ...S TYP=$P(BN0,"^",2) W $S(TYP=1:"COMMENT",1:"PATIENT STATEMENT PRINTED") I TYP=1 S EVNT=$P(BN0,"^",3) D
"RTN","PRCAHIS",59,0)
 ....W:$D(^RC(341,+EVNT,4)) !,?16,$P(^(4),"^")
"RTN","PRCAHIS",60,0)
 ....I $O(^RC(341,+EVNT,2,0)) S EVNTT=0 F  S EVNTT=$O(^RC(341,+EVNT,2,EVNTT)) Q:'EVNTT  I $D(^(EVNTT,0)) S X=^(0) D  Q:$D(DIRUT)  D ^DIWW
"RTN","PRCAHIS",61,0)
 .....S DIWL=17,DIWF="WC63" D ^DIWP
"RTN","PRCAHIS",62,0)
 .....D SCRN
"RTN","PRCAHIS",63,0)
 ..Q:(BN=0)  S TN="" F  S TN=$O(^TMP("PRCAGT",$J,DEB,DATE,BN,TN)) Q:TN=""  Q:$D(DIRUT)  D SCRN D
"RTN","PRCAHIS",64,0)
 ...I 'TN,$D(^TMP("PRCAGT",$J,DEB,DATE,BN,0)) S PNODE=^(0),BN0=$G(^PRCA(430,+BN,0)) W !!,$$FMTE^XLFDT($P(DATE,".")) D
"RTN","PRCAHIS",65,0)
 ....S CAT=$P(BN0,"^",2),CAT=$S(CAT=24&$P(BN0,"^",16):$P(^PRCA(430.2,$P(BN0,"^",16),0),"^"),1:$P($G(^PRCA(430.2,+CAT,0)),"^"))
"RTN","PRCAHIS",66,0)
 ....W ?16,CAT," BILL",?56,$P($G(^PRCA(430,+BN,0)),"^"),?69,$J(+PNODE,10,2)
"RTN","PRCAHIS",67,0)
 ....W !,?16,$P($G(^PRCA(430.3,+$P(BN0,"^",8),0)),"^")
"RTN","PRCAHIS",68,0)
 ...I TN S PNODE=^TMP("PRCAGT",$J,DEB,DATE,BN,TN) W !!,$$FMTE^XLFDT(DATE,"1D"),?16 S TYP=$P($G(^PRCA(433,+TN,1)),"^",2),TTYP=$P($G(^PRCA(430.3,+TYP,0)),U) W TTYP D
"RTN","PRCAHIS",69,0)
 ....S CAT=$P($G(^PRCA(430,+BN,0)),"^",2),CAT=$P($G(^PRCA(430.2,+CAT,0)),"^")
"RTN","PRCAHIS",70,0)
 ....S CATCARE=$P($G(^PRCA(430,+BN,0)),"^",16),CATCARE=$P($G(^PRCA(430.2,+$P(^(0),"^",16),0)),"^")
"RTN","PRCAHIS",71,0)
 ...I TN W ?56,$P($G(^PRCA(430,+BN,0)),"^") W:+TYP'=45 ?69,$J(+PNODE,10,2)
"RTN","PRCAHIS",72,0)
 ...I TN W !?16,CAT W:CATCARE]"" !,?16,CATCARE
"RTN","PRCAHIS",73,0)
 ...I TN,(+TYP=45) D
"RTN","PRCAHIS",74,0)
 ....I $D(^PRCA(433,+TN,5)) W !?16,$P(^(5),"^",2)
"RTN","PRCAHIS",75,0)
 ....I $O(^PRCA(433,+TN,7,0)) S TN0=0 F  S TN0=$O(^PRCA(433,+TN,7,TN0)) Q:'TN0  I $D(^(TN0,0)) S X=^(0) D  Q:$D(DIRUT)  D ^DIWW
"RTN","PRCAHIS",76,0)
 .....S DIWL=17,DIWF="C63W" D ^DIWP
"RTN","PRCAHIS",77,0)
 ...D SCRN
"RTN","PRCAHIS",78,0)
 ..Q
"RTN","PRCAHIS",79,0)
 .Q
"RTN","PRCAHIS",80,0)
 Q
"RTN","PRCAHIS",81,0)
 ;
"RTN","PRCAHIS",82,0)
SCRN ;Check for screen
"RTN","PRCAHIS",83,0)
 N X,Y K DIR I ($Y+5)>IOSL D
"RTN","PRCAHIS",84,0)
 .I $E(IOST,1,2)="C-" S DIR(0)="E" D ^DIR Q:$D(DIRUT)
"RTN","PRCAHIS",85,0)
 .D HDR
"RTN","PRCAHIS",86,0)
 Q
"RTN","PRCAHIS",87,0)
 ;
"RTN","PRCAHIS",88,0)
HDR ;Heading for report
"RTN","PRCAHIS",89,0)
 S PG=PG+1
"RTN","PRCAHIS",90,0)
 W @IOF,!,?20,"Patient Transaction History Report",?70,"Page ",PG
"RTN","PRCAHIS",91,0)
 W !,?20,"-------------------------------------"
"RTN","PRCAHIS",92,0)
 W !!,?18,"For Patient: ",$$NAM^RCFN01(DEB),!,?25,"SSN : ",$$SSN^RCFN01(DEB)
"RTN","PRCAHIS",93,0)
 W !,?20,"For dates: ",$$FMTE^XLFDT(BDATE,"1D"),"-",$$FMTE^XLFDT(EDATE,"1D")
"RTN","PRCAHIS",94,0)
 W !!," DATE",?16,"ACTIVITY",?56,"BILL #",?73,"AMOUNT",!,LINE
"RTN","PRCAPCL")
0^11^B41751936^B25378502
"RTN","PRCAPCL",1,0)
PRCAPCL ;WASH-ISC@ALTOONA,PA/NYB-Print Bill Status Report ;8/19/94  10:21 AM
"RTN","PRCAPCL",2,0)
V ;;4.5;Accounts Receivable;**72,63,143,154,315**;Mar 20, 1995;Build 67
"RTN","PRCAPCL",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCAPCL",4,0)
 N BAL,BN,CAT,DEAD,DEBT,DIR,DIROUT,DUOUT,DP,DP2,HDR,IOP,N430
"RTN","PRCAPCL",5,0)
 N PAGE,POP,PRCAE,PRCATOT,PRCATOT2,PRCAT,PRCAT2,PRCY,RCDOJ,TDT,ST,STT
"RTN","PRCAPCL",6,0)
 S (PAGE,PRCAT,PRCAT2,PRCATOT,PRCATOT2,HDR)=0
"RTN","PRCAPCL",7,0)
 D NOW^%DTC S Y=% X ^DD("DD") S TDT=Y
"RTN","PRCAPCL",8,0)
 I $G(STAT)="ALL" S STT=0 F  S STT=($O(^PRCA(430.3,"AC",STT))) Q:STT=""  D
"RTN","PRCAPCL",9,0)
 . I STT<100!(STT=107) Q
"RTN","PRCAPCL",10,0)
 . S STAT($O(^PRCA(430.3,"AC",STT,0)))=""
"RTN","PRCAPCL",11,0)
 . Q
"RTN","PRCAPCL",12,0)
 S STAT=0 F  S STAT=$O(STAT(STAT)) Q:STAT=""!($D(DIROUT))!($D(DUOUT))  D
"RTN","PRCAPCL",13,0)
 . N NDE
"RTN","PRCAPCL",14,0)
 . D HDR
"RTN","PRCAPCL",15,0)
 . F PRCAE=0:0 S PRCAE=$O(^PRCA(430,"AC",STAT,PRCAE)),X="" Q:'PRCAE!($D(DIROUT)!($D(DUOUT)))  I $P($G(^PRCA(430,PRCAE,100)),"^",2)[$G(SER),$S($G(SER):+$G(^PRCA(430,PRCAE,100)),1:1) D  Q:$D(DIROUT)!($D(DUOUT))  D PRNTL
"RTN","PRCAPCL",16,0)
 .. I $Y+4>IOSL D TOP,HDR
"RTN","PRCAPCL",17,0)
 . I $Y+4>IOSL D TOP,HDR Q:$D(DIROUT)!($D(DUOUT))
"RTN","PRCAPCL",18,0)
 . S DP1=$S(+DAT>0:+DAT,1:0)
"RTN","PRCAPCL",19,0)
 . S DP2=$S(+$P($G(DAT),"^",2)=0:"",1:+$P($G(DAT),"^",2))
"RTN","PRCAPCL",20,0)
 . S ST="" F  S ST=$O(^TMP($J,"PRCAE",ST)) Q:ST=""!($D(DIROUT)!($D(DUOUT)))  D
"RTN","PRCAPCL",21,0)
 .. I STAT=40 D STHDR
"RTN","PRCAPCL",22,0)
 .. S DP=0 F  S DP=$O(^TMP($J,"PRCAE",ST,DP)) Q:'DP!($D(DIROUT)!($D(DUOUT)))  D
"RTN","PRCAPCL",23,0)
 ... S BN="" F  S BN=$O(^TMP($J,"PRCAE",ST,DP,BN)) Q:BN=""!($D(DIROUT)!($D(DUOUT)))  D
"RTN","PRCAPCL",24,0)
 .... S NDE=^TMP($J,"PRCAE",ST,DP,BN)
"RTN","PRCAPCL",25,0)
 .... S Y=DP X ^DD("DD") S DP2=Y K Y
"RTN","PRCAPCL",26,0)
 .... S RCDOJ=$$REFST^RCRCUTL(+$O(^PRCA(430,"B",BN,0)))
"RTN","PRCAPCL",27,0)
 .... W $G(DP2),?15,$S(RCDOJ&$G(BN):$G(BN)_"r",1:$G(BN)),?30,$P(NDE,U,2),?45,$P(NDE,U,3)
"RTN","PRCAPCL",28,0)
 .... W ?65,$J($P(NDE,U,4),9,2),!
"RTN","PRCAPCL",29,0)
 .... S PRCATOT2=PRCATOT2+$P(NDE,U,4),PRCAT2=PRCAT2+1
"RTN","PRCAPCL",30,0)
 .... S PRCATOT=PRCATOT+$P(NDE,U,4),PRCAT=PRCAT+1
"RTN","PRCAPCL",31,0)
 .... I $Y+4>IOSL D TOP,HDR Q:$D(DIROUT)!($D(DUOUT))  I STAT=40 D STHDR
"RTN","PRCAPCL",32,0)
 .... K ^TMP($J,"PRCAE",ST,DP,BN)
"RTN","PRCAPCL",33,0)
 . I X'="^" W !!!,"SUBTOTAL: ",$J(PRCATOT2,10,2),!,"SUBCOUNT: ",$J(PRCAT2,10),?30 Q:$D(DIROUT)!($D(DUOUT))
"RTN","PRCAPCL",34,0)
 . S (PRCATOT2,PRCAT2)=0
"RTN","PRCAPCL",35,0)
 . Q:$D(DIROUT)!($D(DUOUT))
"RTN","PRCAPCL",36,0)
 . I $O(STAT(STAT))="" Q
"RTN","PRCAPCL",37,0)
 . I $O(STAT(STAT))'="" W !! D TOP
"RTN","PRCAPCL",38,0)
 I X'="^" W !!!,"TOTAL: ",$J(PRCATOT,10,2),!,"COUNT: ",$J(PRCAT,10),!," MEAN: ",$J($S('PRCAT:0,1:PRCATOT/PRCAT),10,2),?30,"* -indicates that patient is deceased",!,?30,"r -indicates that bill is referred"
"RTN","PRCAPCL",39,0)
 W:$E(IOST)="P" @IOF Q
"RTN","PRCAPCL",40,0)
TOP ;
"RTN","PRCAPCL",41,0)
 I $E(IOST)="C" S X="" S DIR(0)="E" D ^DIR Q:$D(DIROUT)!($D(DUOUT))
"RTN","PRCAPCL",42,0)
Q2 Q
"RTN","PRCAPCL",43,0)
PRNTL ;
"RTN","PRCAPCL",44,0)
 N BAL,DEAD,DEBT,ST
"RTN","PRCAPCL",45,0)
 S X=$S($D(^PRCA(430,PRCAE,0)):^(0),1:"") G:X="" PQ
"RTN","PRCAPCL",46,0)
 S BN=$P($G(X),U),DP=$P($G(X),U,14),PRCY=$P($G(X),U,2) G:BN="" PQ
"RTN","PRCAPCL",47,0)
 S BEG=+DAT-1,END=+$P(DAT,U,2)
"RTN","PRCAPCL",48,0)
 S ST=999 I STAT=40 D SUST ;PRCA*4.5*315/DRF Find suspended type
"RTN","PRCAPCL",49,0)
 I BEG,DP'>BEG Q
"RTN","PRCAPCL",50,0)
 I END,DP>END Q
"RTN","PRCAPCL",51,0)
 I STAT=40,$G(PRSELST)'="",PRSELST'[(","_ST_",") Q  ;PRCA*4.5*315/DRF Quit if suspended type is not selected
"RTN","PRCAPCL",52,0)
 S (CAT,PRCY)=$S(PRCY="":PRCY,$D(^PRCA(430.2,PRCY,0))#2:$P(^(0),U),1:PRCY)
"RTN","PRCAPCL",53,0)
 S PRCY=$S($D(^RCD(340,+$P(X,U,9),0)):$P(^(0),U),1:"")
"RTN","PRCAPCL",54,0)
 I PRCY["DPT" S DFN=+PRCY D DEM^VADPT S:+VADM(6) DEAD="*" D KVAR^VADPT K VA,VADM
"RTN","PRCAPCL",55,0)
 I PRCY]"" S (DEBT,PRCY)=$S($D(@("^"_$P(PRCY,";",2)_+PRCY_",0)")):^(0),1:"")
"RTN","PRCAPCL",56,0)
 S PRCY=$S($D(^PRCA(430,PRCAE,7)):^(7),1:"")
"RTN","PRCAPCL",57,0)
 I 'PRCY,(STAT=$O(^PRCA(430.3,"AC",104,0))!((STAT=20)&($G(^PRCA(430,PRCAE,100)))))
"RTN","PRCAPCL",58,0)
 S (BAL,PRCY)=$P(PRCY,U)+$P(PRCY,U,2)+$P(PRCY,U,3)+$P(PRCY,U,4)+$P(PRCY,U,5)
"RTN","PRCAPCL",59,0)
 I DP'="" S ^TMP($J,"PRCAE",ST,DP,BN)=U_$E(CAT,1,13)_U_$G(DEAD)_$E($P($G(DEBT),U),1,15)_U_$G(BAL)_U_$G(PRCATOT2)_U_$G(PRCAT2)
"RTN","PRCAPCL",60,0)
 I $G(SER),(STAT=31!(STAT=32)) S Y=$G(^PRCA(430,PRCAE,3)) D
"RTN","PRCAPCL",61,0)
 . W:$P(Y,U)]"" !,"Date: ",$E($P(Y,U),4,5),"/",$E($P(Y,U),6,7),"/",$E($P(Y,U),2,3)
"RTN","PRCAPCL",62,0)
 . W:$P(Y,U,2)]"" "  By: ",$P($G(^VA(200,+$P(Y,U,2),0)),U)
"RTN","PRCAPCL",63,0)
 . W:$P(Y,U,6)]"" "  Reason: ",$P(Y,U,6)
"RTN","PRCAPCL",64,0)
 . Q
"RTN","PRCAPCL",65,0)
 I $E(IOST)="",$Y+4>IOSL D TOP
"RTN","PRCAPCL",66,0)
PQ Q
"RTN","PRCAPCL",67,0)
HDR ;
"RTN","PRCAPCL",68,0)
 I $E(IOST)="C"!PAGE W @IOF
"RTN","PRCAPCL",69,0)
 S PAGE=PAGE+1
"RTN","PRCAPCL",70,0)
 W !,"BILL STATUS LISTING REPORT"
"RTN","PRCAPCL",71,0)
 W ?40,$G(TDT),?72,$G(PAGE)
"RTN","PRCAPCL",72,0)
 W !,"Sort Criteria for Date Last Updated Range: "_SC1_" to "_SC2
"RTN","PRCAPCL",73,0)
 W !,"Date Last",!," Updated",?15,"Bill no.",?30,"Category"
"RTN","PRCAPCL",74,0)
 W ?50,"Debtor",?68,"Balance",!
"RTN","PRCAPCL",75,0)
 S X="",$P(X,"-",IOM-1)="" W X,!
"RTN","PRCAPCL",76,0)
 W !,?5,"Status: ",$P($S($D(^PRCA(430.3,STAT,0)):^(0),1:""),U)
"RTN","PRCAPCL",77,0)
 S HDR=1
"RTN","PRCAPCL",78,0)
 W !!
"RTN","PRCAPCL",79,0)
 Q
"RTN","PRCAPCL",80,0)
DT I Y X ^DD("DD") S DP2=Y
"RTN","PRCAPCL",81,0)
 Q
"RTN","PRCAPCL",82,0)
STAT(SER) W ! ;Bill Status Listing
"RTN","PRCAPCL",83,0)
 N BEG,CH,DAT,END,I,PRSELST,PRSUS,SC1,SC2,STAT,STT,XX
"RTN","PRCAPCL",84,0)
 K ^TMP($J)
"RTN","PRCAPCL",85,0)
 S DAT=$$DATE^RCEVUTL1("")
"RTN","PRCAPCL",86,0)
 Q:$G(DAT)=-1
"RTN","PRCAPCL",87,0)
 S BEG=+DAT,END=+$P(DAT,U,2)
"RTN","PRCAPCL",88,0)
 S SC1=$S(BEG=0:"First",1:BEG-1) I +$G(SC1) S Y=SC1+1 X ^DD("DD") S SC1=Y
"RTN","PRCAPCL",89,0)
 S SC2=$S(END=0:"Last",1:END) I +$G(SC2) S Y=SC2 X ^DD("DD") S SC2=Y
"RTN","PRCAPCL",90,0)
 S XX=^DD(433,90,0),XX=$P(XX,"^",3) F I=1:1 S CH=$P(XX,";",I) Q:CH=""  S PRSUS($P(CH,":",1))=$P(CH,":",2)
"RTN","PRCAPCL",91,0)
 D ST
"RTN","PRCAPCL",92,0)
 Q:STAT="^"
"RTN","PRCAPCL",93,0)
 D TSK,Q1
"RTN","PRCAPCL",94,0)
 Q
"RTN","PRCAPCL",95,0)
ST N DIC,X,Y
"RTN","PRCAPCL",96,0)
 S DIC="^PRCA(430.3,",DIC(0)="QEMZ"
"RTN","PRCAPCL",97,0)
 S DIC("S")="I $P(^(0),""^"",3)>100,($P(^(0),""^"",3)'=107)"
"RTN","PRCAPCL",98,0)
 S Y=0 W !,"STATUS: "_$S('$O(STAT("")):"ALL// ",1:"")
"RTN","PRCAPCL",99,0)
 R X:DTIME I '$T!(X="^") S STAT="^" Q
"RTN","PRCAPCL",100,0)
 I ((X="")!(X="ALL")),'$O(STAT("")) S (STAT,X)="ALL" Q
"RTN","PRCAPCL",101,0)
 I X="" Q
"RTN","PRCAPCL",102,0)
 D ^DIC S STAT=+Y,SER=$G(SER)
"RTN","PRCAPCL",103,0)
 I X["?" W !!,"Enter 'ALL' for all status types.",! G ST
"RTN","PRCAPCL",104,0)
 I STAT'="ALL",(+STAT>0) S STAT(+STAT)="" D:STAT=40 SUSTYP G ST
"RTN","PRCAPCL",105,0)
 G:+STAT<0 ST
"RTN","PRCAPCL",106,0)
 Q
"RTN","PRCAPCL",107,0)
SUSTYP ;If SUSPENDED is chosen, prompt for which suspended bills to display PRCA*4.5*315/DRF
"RTN","PRCAPCL",108,0)
 N X,CH,LAST,PRPRT
"RTN","PRCAPCL",109,0)
 S LAST=$O(PRSUS(""),-1),PRSUS(LAST+1)="NONE"
"RTN","PRCAPCL",110,0)
 S PRSUS(LAST+2)="ALL OF THE ABOVE"
"RTN","PRCAPCL",111,0)
 S PRPRT="Choose from SUSPENDED TYPE:"
"RTN","PRCAPCL",112,0)
 S PRSELST=$$MLTP0(PRPRT,.PRSUS,1)
"RTN","PRCAPCL",113,0)
 Q
"RTN","PRCAPCL",114,0)
SUST ;Look for suspended type for a suspended bill PRCA*4.5*315/DRF
"RTN","PRCAPCL",115,0)
 N TRANS
"RTN","PRCAPCL",116,0)
 S TRANS=$O(^PRCA(433,"C",PRCAE,""),-1)
"RTN","PRCAPCL",117,0)
 S ST=$P($G(^PRCA(433,TRANS,1)),U,11)
"RTN","PRCAPCL",118,0)
 I ST="" S ST=12
"RTN","PRCAPCL",119,0)
 Q
"RTN","PRCAPCL",120,0)
STHDR ;Display Suspended Type PRCA*4.5*315/DRF
"RTN","PRCAPCL",121,0)
 I 'HDR W !
"RTN","PRCAPCL",122,0)
 W ?30,"Suspend Type: ",PRSUS(ST),!!
"RTN","PRCAPCL",123,0)
 S HDR=0
"RTN","PRCAPCL",124,0)
 Q
"RTN","PRCAPCL",125,0)
TSK ;
"RTN","PRCAPCL",126,0)
 N POP,ZTSK
"RTN","PRCAPCL",127,0)
 W *7,!,"Report should be QUEUED it could take some time to run!"
"RTN","PRCAPCL",128,0)
 S POP=0,%ZIS="MQ" D ^%ZIS G:POP Q1
"RTN","PRCAPCL",129,0)
 I '$D(IO("Q")) U IO D PRCAPCL U IO(0) G Q1
"RTN","PRCAPCL",130,0)
 S ZTRTN="^PRCAPCL"
"RTN","PRCAPCL",131,0)
 S (ZTSAVE("BEG"),ZTSAVE("DAT"),ZTSAVE("END"),ZTSAVE("SER"))=""
"RTN","PRCAPCL",132,0)
 S (ZTSAVE("STAT"),ZTSAVE("STAT("),ZTSAVE("SC1"),ZTSAVE("SC2"))=""
"RTN","PRCAPCL",133,0)
 S (ZTSAVE("PRSELST"),ZTSAVE("PRSUS("))=""
"RTN","PRCAPCL",134,0)
 S ZTDESC="Bill Status Listing" D ^%ZTLOAD
"RTN","PRCAPCL",135,0)
Q1 D ^%ZISC Q
"RTN","PRCAPCL",136,0)
 ;
"RTN","PRCAPCL",137,0)
 ;Choose multiple items from a list including value 0 - PRCA*4.5*315/DRF
"RTN","PRCAPCL",138,0)
MLTP0(PRPT,OPT,ALL) ; Function for multiple value selection
"RTN","PRCAPCL",139,0)
 ; Input: PRPT - String to be prompted to the user, before listing options
"RTN","PRCAPCL",140,0)
 ;        OPT  - Array containing the possible entries (indexed by code)
"RTN","PRCAPCL",141,0)
 ;               Obs: Code must be sequential starting with 0
"RTN","PRCAPCL",142,0)
 ;        ALL  - Flag indicating if the last option is ALL OF THE ABOVE
"RTN","PRCAPCL",143,0)
 ;
"RTN","PRCAPCL",144,0)
 ; Output: MLTP - User selection, i.e. "1,2,3," or "1," or NULL (nothing
"RTN","PRCAPCL",145,0)
 ;                 was selected)
"RTN","PRCAPCL",146,0)
 ;
"RTN","PRCAPCL",147,0)
 N A,DIR,DIRUT,DTOUT,DUOUT,DIROUT,I,IX,LST,MLTP
"RTN","PRCAPCL",148,0)
 ;
"RTN","PRCAPCL",149,0)
PRPT S MLTP="",ALL=+$G(ALL)
"RTN","PRCAPCL",150,0)
 S LST=$O(OPT(""),-1)
"RTN","PRCAPCL",151,0)
 S DIR(0)="LO^0:"_LST_"^K:+$P(X,""-"",2)>"_LST_" X"
"RTN","PRCAPCL",152,0)
 S DIR("A",1)=$G(PRPT),DIR("A",2)=""
"RTN","PRCAPCL",153,0)
 S A="",IX=3
"RTN","PRCAPCL",154,0)
 F  S A=$O(OPT(A))  Q:A=""  D
"RTN","PRCAPCL",155,0)
 . S DIR("A",IX)="   "_A_" - "_$G(OPT(A)),IX=IX+1
"RTN","PRCAPCL",156,0)
 S DIR("A",IX)="",DIR("A")="Select",DIR("B")=LST,DIR("T")=DTIME W !
"RTN","PRCAPCL",157,0)
 D ^DIR K DIR I $D(DIRUT)!$D(DTOUT)!$D(DUOUT)!$D(DIROUT) S MLTP="" G QT
"RTN","PRCAPCL",158,0)
 S MLTP=Y K DIROUT,DTOUT,DUOUT,DIRUT
"RTN","PRCAPCL",159,0)
 S DIR(0)="Y",DIR("A",1)="You have selected",DIR("A",2)=""
"RTN","PRCAPCL",160,0)
 S A="",IX=3
"RTN","PRCAPCL",161,0)
 F I=1:1:($L(MLTP,",")-1) D
"RTN","PRCAPCL",162,0)
 . S DIR("A",IX)="    "_$P(MLTP,",",I)_" - "_$G(OPT($P(MLTP,",",I)))
"RTN","PRCAPCL",163,0)
 . S IX=IX+1
"RTN","PRCAPCL",164,0)
 S DIR("A",IX)=""
"RTN","PRCAPCL",165,0)
 S DIR("A")="Are you sure",DIR("B")="NO",DIR("T")=DTIME W !
"RTN","PRCAPCL",166,0)
 D ^DIR K DIR I $D(DIRUT)!$D(DTOUT)!$D(DUOUT)!$D(DIROUT) S MLTP="" G QT
"RTN","PRCAPCL",167,0)
 K DIROUT,DTOUT,DUOUT,DIRUT I 'Y K DIR G PRPT
"RTN","PRCAPCL",168,0)
 I ALL,MLTP[LST S MLTP="" G QT
"RTN","PRCAPCL",169,0)
 S MLTP=","_MLTP
"RTN","PRCAPCL",170,0)
 ;
"RTN","PRCAPCL",171,0)
QT Q MLTP
"RTN","PRCARPM")
0^20^B37026153^n/a
"RTN","PRCARPM",1,0)
PRCARPM ;ALB/DRF-CREATE MULTIPLE ACCOUNT REPAYMENT DATE SCHEDULE ;08/09/2016  4:40 PM
"RTN","PRCARPM",2,0)
 ;;4.5;Accounts Receivable;**315**;Mar 20, 1995;Build 67
"RTN","PRCARPM",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCARPM",4,0)
 ;
"RTN","PRCARPM",5,0)
BEGIN ;Start here
"RTN","PRCARPM",6,0)
 N ACT,ADD,ALL,D0,DEL,DIC,DIR,LIST,LSTDATE,MULTI,NON,PAYDATE,PLN,PLNAMT,PLNDAY,PLNDT
"RTN","PRCARPM",7,0)
 N PLNFRST,PLNLST,PLNNXT,PLNRMN,PLNTDUE,PRCA,PRCADAY,PRCADT,PRCAFP,PRCAFPD,PRCAMT
"RTN","PRCARPM",8,0)
 N PRCANPAY,PRCAPB,PRCAREM,SUCCESS,SURE,TOTAL,TOTDUE,X,Y
"RTN","PRCARPM",9,0)
 I $G(DEBTOR)]"" L -^RCD(340,+DEBTOR) ;Release previous debtor lock
"RTN","PRCARPM",10,0)
 S DEBTOR=$$DEBTOR^PRCARPU()
"RTN","PRCARPM",11,0)
 I $G(DEBTOR)="" K DEBTOR Q
"RTN","PRCARPM",12,0)
 W "  ",$$NAM^RCFN01(+DEBTOR)
"RTN","PRCARPM",13,0)
 L +^RCD(340,+DEBTOR):1 I '$T W !,"Another user is editing this record",!! G BEGIN
"RTN","PRCARPM",14,0)
 D ACCOUNTS^PRCARPU(+DEBTOR,.ALL,.PLN,.NON,.ACT)
"RTN","PRCARPM",15,0)
 I ACT=0 W !,"No active bills for this debtor",!! G BEGIN
"RTN","PRCARPM",16,0)
 I PLN=0 G NOPLAN ;No current plan
"RTN","PRCARPM",17,0)
 S MULTI=$$MULTI^PRCARPU(.PLN) I MULTI G MULTPLN ;Multiple existing plans
"RTN","PRCARPM",18,0)
 I PLN G PLAN ;Single existing plan
"RTN","PRCARPM",19,0)
 G BEGIN
"RTN","PRCARPM",20,0)
 ;
"RTN","PRCARPM",21,0)
PLAN ;There is an existing Repayment Plan
"RTN","PRCARPM",22,0)
 S DIR(0)="SA^E:EDIT;D:DELETE;V:VIEW^",DIR("B")="V"
"RTN","PRCARPM",23,0)
 S DIR("A")="This Veteran has a Repayment Plan - (D)elete, (E)dit or (V)iew it? "
"RTN","PRCARPM",24,0)
 D ^DIR
"RTN","PRCARPM",25,0)
 I Y="V" G VIEW
"RTN","PRCARPM",26,0)
 I Y="D" G DELETE
"RTN","PRCARPM",27,0)
 I Y="E",NON G EDITADD
"RTN","PRCARPM",28,0)
 I Y="E",NON=0 G EDIT
"RTN","PRCARPM",29,0)
 G BEGIN
"RTN","PRCARPM",30,0)
 ;
"RTN","PRCARPM",31,0)
MULTPLN ;There is more than one existing Repayment Plan
"RTN","PRCARPM",32,0)
 S DIR(0)="Y"
"RTN","PRCARPM",33,0)
 S DIR("A")="This Debtor has multiple plans - view them"
"RTN","PRCARPM",34,0)
 S DIR("?")="Enter Y to view multiple Repayment Plans"
"RTN","PRCARPM",35,0)
 D ^DIR
"RTN","PRCARPM",36,0)
 I 'Y G BEGIN
"RTN","PRCARPM",37,0)
 D DSMPLNS^PRCARPU(DEBTOR,.PLN)
"RTN","PRCARPM",38,0)
 S DIR(0)="Y"
"RTN","PRCARPM",39,0)
 S DIR("A")="This Debtor has multiple plans - consolidate them"
"RTN","PRCARPM",40,0)
 S DIR("?")="Enter Y to consolidate multiple Repayment Plans into one"
"RTN","PRCARPM",41,0)
 D ^DIR
"RTN","PRCARPM",42,0)
 I 'Y G MLTDEL
"RTN","PRCARPM",43,0)
 S TOTDUE=$$DUEARR^PRCARPU(.PLN) ;New total amount due
"RTN","PRCARPM",44,0)
 S SUCCESS=$$INQPLAN^PRCARPU(TOTDUE,PLNDT)
"RTN","PRCARPM",45,0)
 I 'SUCCESS W !! G BEGIN
"RTN","PRCARPM",46,0)
 D RPDEL^PRCARPU(.PLN)
"RTN","PRCARPM",47,0)
 D ADDPLAN^PRCARPU(.PLN,PRCAMT,PRCADAY,PRCAFPD,PRCADT)
"RTN","PRCARPM",48,0)
 W !,"The Repayment Plan has been consolidated.",! D PAUSE^PRCARPU
"RTN","PRCARPM",49,0)
 I 'Y G BEGIN
"RTN","PRCARPM",50,0)
 D ACCOUNTS^PRCARPU(+DEBTOR,.ALL,.PLN,.NON,.ACT) ;Reload accounts after change is filed
"RTN","PRCARPM",51,0)
 I NON G EDITADD
"RTN","PRCARPM",52,0)
 D RPDIS^PRCARPU(DEBTOR,.PLN)
"RTN","PRCARPM",53,0)
 D DISPLAY^PRCARPU(.PLN,0)
"RTN","PRCARPM",54,0)
 D PAUSE^PRCARPU
"RTN","PRCARPM",55,0)
 I 'Y G BEGIN
"RTN","PRCARPM",56,0)
 D PAYDISP^PRCARPU(+DEBTOR,PLNDT)
"RTN","PRCARPM",57,0)
 D CMTENTR^PRCARPU(+DEBTOR)
"RTN","PRCARPM",58,0)
 G BEGIN
"RTN","PRCARPM",59,0)
 ;
"RTN","PRCARPM",60,0)
DELETE ;Delete a Repayment Plan
"RTN","PRCARPM",61,0)
 D RPDIS^PRCARPU(DEBTOR,.PLN)
"RTN","PRCARPM",62,0)
 D DISPLAY^PRCARPU(.PLN,0)
"RTN","PRCARPM",63,0)
 S SURE=$$CORRECT^PRCARPU()
"RTN","PRCARPM",64,0)
 I '+SURE G BEGIN
"RTN","PRCARPM",65,0)
 D RPDEL^PRCARPU(.PLN,1)
"RTN","PRCARPM",66,0)
 W !!,"The Repayment Plan for "_$P(DEBTOR,U,2)_" has been Deleted.",! D PAUSE^PRCARPU
"RTN","PRCARPM",67,0)
 I 'Y G BEGIN
"RTN","PRCARPM",68,0)
 D CMTENTR^PRCARPU(+DEBTOR)
"RTN","PRCARPM",69,0)
 G BEGIN
"RTN","PRCARPM",70,0)
 ;
"RTN","PRCARPM",71,0)
EDITADD ;Edit a Repayment Plan with new bills
"RTN","PRCARPM",72,0)
 D RPDIS^PRCARPU(DEBTOR,.PLN)
"RTN","PRCARPM",73,0)
 D DISPLAY^PRCARPU(.PLN,0)
"RTN","PRCARPM",74,0)
 D PAUSE^PRCARPU
"RTN","PRCARPM",75,0)
 I 'Y G BEGIN
"RTN","PRCARPM",76,0)
 D PAYDISP^PRCARPU(+DEBTOR,PLNDT)
"RTN","PRCARPM",77,0)
 W !,"Bills not in Repayment Plan:",!
"RTN","PRCARPM",78,0)
 S TOTAL=$$DISPLAY^PRCARPU(.NON,1)
"RTN","PRCARPM",79,0)
 I TOTAL=0 G NOBILLS
"RTN","PRCARPM",80,0)
 K ADD
"RTN","PRCARPM",81,0)
 S LIST=$$SELECT^PRCARPU(.NON)
"RTN","PRCARPM",82,0)
 I LIST="" W !,"  No Bills selected",! D PAUSE^PRCARPU G:'Y BEGIN G NOBILLS
"RTN","PRCARPM",83,0)
 D SUMM^PRCARPU(.NON,LIST,.ADD)
"RTN","PRCARPM",84,0)
 S TOTDUE=$$DUEARR^PRCARPU(.ADD) ;Amount being added
"RTN","PRCARPM",85,0)
 W !!,"Total amount chosen is $",$J(TOTDUE,8,2),!
"RTN","PRCARPM",86,0)
 S SURE=$$CORRECT^PRCARPU()
"RTN","PRCARPM",87,0)
 I 'SURE W !! G BEGIN
"RTN","PRCARPM",88,0)
 M DEL=PLN
"RTN","PRCARPM",89,0)
 D MERGE^PRCARPU(.PLN,.ADD)
"RTN","PRCARPM",90,0)
NOBILLS ;No new bill were chosen
"RTN","PRCARPM",91,0)
 S TOTDUE=$$DUEARR^PRCARPU(.PLN) ;New total amount due
"RTN","PRCARPM",92,0)
 S SUCCESS=$$INQPLAN^PRCARPU(TOTDUE,PLNDT)
"RTN","PRCARPM",93,0)
 I 'SUCCESS W !! G BEGIN
"RTN","PRCARPM",94,0)
 I $G(DEL)>0 D RPDEL^PRCARPU(.DEL,1)
"RTN","PRCARPM",95,0)
 K DEL
"RTN","PRCARPM",96,0)
 D ADDPLAN^PRCARPU(.PLN,PRCAMT,PRCADAY,PRCAFPD,PRCADT,1)
"RTN","PRCARPM",97,0)
 W !!,"The Repayment Plan has been updated.",! D PAUSE^PRCARPU
"RTN","PRCARPM",98,0)
 I 'Y G BEGIN
"RTN","PRCARPM",99,0)
 K ADD
"RTN","PRCARPM",100,0)
 D ACCOUNTS^PRCARPU(+DEBTOR,.ALL,.PLN,.NON,.ACT) ;Reload accounts after change is filed 
"RTN","PRCARPM",101,0)
 D RPDIS^PRCARPU(DEBTOR,.PLN)
"RTN","PRCARPM",102,0)
 D DISPLAY^PRCARPU(.PLN,0)
"RTN","PRCARPM",103,0)
 D CMTENTR^PRCARPU(+DEBTOR)
"RTN","PRCARPM",104,0)
 G BEGIN
"RTN","PRCARPM",105,0)
 ;
"RTN","PRCARPM",106,0)
EDIT ;Edit a Repayment Plan, no new bills
"RTN","PRCARPM",107,0)
 D RPDIS^PRCARPU(DEBTOR,.PLN)
"RTN","PRCARPM",108,0)
 D DISPLAY^PRCARPU(.PLN,0)
"RTN","PRCARPM",109,0)
 W !,"There are no new bills to be added.",!!
"RTN","PRCARPM",110,0)
 D PAUSE^PRCARPU
"RTN","PRCARPM",111,0)
 I 'Y G BEGIN
"RTN","PRCARPM",112,0)
 D PAYDISP^PRCARPU(+DEBTOR,PLNDT)
"RTN","PRCARPM",113,0)
 S SUCCESS=$$INQPLAN^PRCARPU(PLNTDUE,PLNDT)
"RTN","PRCARPM",114,0)
 I 'SUCCESS W !! G BEGIN
"RTN","PRCARPM",115,0)
 D RPDEL^PRCARPU(.PLN,1)
"RTN","PRCARPM",116,0)
 D ADDPLAN^PRCARPU(.PLN,PRCAMT,PRCADAY,PRCAFPD,PRCADT,1)
"RTN","PRCARPM",117,0)
 W !,"The Repayment Plan has been updated.",! D PAUSE^PRCARPU
"RTN","PRCARPM",118,0)
 I 'Y G BEGIN
"RTN","PRCARPM",119,0)
 D ACCOUNTS^PRCARPU(+DEBTOR,.ALL,.PLN,.NON,.ACT) ;Reload accounts after change is filed 
"RTN","PRCARPM",120,0)
 D RPDIS^PRCARPU(DEBTOR,.PLN)
"RTN","PRCARPM",121,0)
 D DISPLAY^PRCARPU(.PLN,0)
"RTN","PRCARPM",122,0)
 D CMTENTR^PRCARPU(+DEBTOR)
"RTN","PRCARPM",123,0)
 G BEGIN
"RTN","PRCARPM",124,0)
 ;
"RTN","PRCARPM",125,0)
NOPLAN ;Debtor has no Repayment Plan
"RTN","PRCARPM",126,0)
 W !,"This Veteran does not have a Repayment Plan",!!,"List of Active Bills:",!!
"RTN","PRCARPM",127,0)
 S TOTAL=$$DISPLAY^PRCARPU(.NON,1)
"RTN","PRCARPM",128,0)
 S LIST=$$SELECT^PRCARPU(.NON)
"RTN","PRCARPM",129,0)
 I LIST="" W !! G BEGIN
"RTN","PRCARPM",130,0)
 D SUMM^PRCARPU(.NON,LIST,.ADD)
"RTN","PRCARPM",131,0)
 S TOTDUE=$$DUEARR^PRCARPU(.ADD)
"RTN","PRCARPM",132,0)
 W !!,"Total amount chosen is $",$J(TOTDUE,8,2),!
"RTN","PRCARPM",133,0)
 S SURE=$$CORRECT^PRCARPU()
"RTN","PRCARPM",134,0)
 I 'SURE W !! G BEGIN
"RTN","PRCARPM",135,0)
 S SUCCESS=$$INQPLAN^PRCARPU(TOTDUE)
"RTN","PRCARPM",136,0)
 I 'SUCCESS W !! G BEGIN
"RTN","PRCARPM",137,0)
 D ADDPLAN^PRCARPU(.ADD,PRCAMT,PRCADAY,PRCAFPD,PRCADT)
"RTN","PRCARPM",138,0)
 W !,"The Repayment Plan has been established.",! D PAUSE^PRCARPU
"RTN","PRCARPM",139,0)
 I 'Y G BEGIN
"RTN","PRCARPM",140,0)
 D ACCOUNTS^PRCARPU(+DEBTOR,.ALL,.PLN,.NON,.ACT) ;Reload accounts after change is filed
"RTN","PRCARPM",141,0)
 D RPDIS^PRCARPU(DEBTOR,.PLN)
"RTN","PRCARPM",142,0)
 D DISPLAY^PRCARPU(.PLN,0)
"RTN","PRCARPM",143,0)
 D CMTENTR^PRCARPU(+DEBTOR)
"RTN","PRCARPM",144,0)
 G BEGIN
"RTN","PRCARPM",145,0)
 ;
"RTN","PRCARPM",146,0)
MLTDEL ;Delete all multiple plans
"RTN","PRCARPM",147,0)
 S DIR(0)="Y"
"RTN","PRCARPM",148,0)
 S DIR("A")="Delete ALL current Repayment Plans for this Debtor"
"RTN","PRCARPM",149,0)
 S DIR("?")="Enter Y to delete ALL current Repayment Plans"
"RTN","PRCARPM",150,0)
 D ^DIR
"RTN","PRCARPM",151,0)
 I 'Y G BEGIN
"RTN","PRCARPM",152,0)
 D RPDEL^PRCARPU(.PLN)
"RTN","PRCARPM",153,0)
 W !,"All Repayment Plans have been deleted.",! D PAUSE^PRCARPU
"RTN","PRCARPM",154,0)
 G BEGIN
"RTN","PRCARPM",155,0)
 ;
"RTN","PRCARPM",156,0)
VIEW ;View a Repayment Plan
"RTN","PRCARPM",157,0)
 D RPDIS^PRCARPU(DEBTOR,.PLN)
"RTN","PRCARPM",158,0)
 D DISPLAY^PRCARPU(.PLN,0)
"RTN","PRCARPM",159,0)
 D PAUSE^PRCARPU
"RTN","PRCARPM",160,0)
 I 'Y G BEGIN
"RTN","PRCARPM",161,0)
 D PAYDISP^PRCARPU(+DEBTOR,PLNDT)
"RTN","PRCARPM",162,0)
 W !,"Bills not in Repayment Plan:",!
"RTN","PRCARPM",163,0)
 S TOTAL=$$DISPLAY^PRCARPU(.NON,1)
"RTN","PRCARPM",164,0)
 G BEGIN
"RTN","PRCARPS")
0^48^B15642186^B14665305
"RTN","PRCARPS",1,0)
PRCARPS ;SF-ISC/YJK-REPAYMENT PAYMENT STATEMENT ;10/23/93  9:50 AM
"RTN","PRCARPS",2,0)
 ;;4.5;Accounts Receivable;**104,315**;Mar 20, 1995;Build 67
"RTN","PRCARPS",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCARPS",4,0)
 ;
"RTN","PRCARPS",5,0)
 ;PRINT THE PAYMENT STATEMENT FOR REPAYMENT PLAN
"RTN","PRCARPS",6,0)
 N PRCALL
"RTN","PRCARPS",7,0)
BEGIN ;PRCA*4.5*315 Allow GOTBILL (PRCABN) to be passed in
"RTN","PRCARPS",8,0)
 I $G(GOTBILL)="" D BILL^PRCAUTL Q:'$D(PRCABN)
"RTN","PRCARPS",9,0)
 S PRCA("BILLN")=$P(^PRCA(430,PRCABN,0),U,1),PRCA("DEBTOR")=$P(^(0),U,9)
"RTN","PRCARPS",10,0)
 I $G(GOTBILL)="" I '$D(^PRCA(430,PRCABN,5)) W !,*7,"NO REPAYMENT PLAN FOR THIS ACCOUNT.",! Q
"RTN","PRCARPS",11,0)
 I $G(GOTBILL)=1 I '$D(^PRCA(430,PRCABN,5)) W !,*7,"NO REPAYMENT PLAN FOR THIS ACCOUNT.",! H 5 Q
"RTN","PRCARPS",12,0)
 S PRCAREP=1 Q
"RTN","PRCARPS",13,0)
PRINTST S PRCAREP=0 D BEGIN G:PRCAREP=0 END D EN,KILLV G PRINTST
"RTN","PRCARPS",14,0)
EN S PRCAPT=0 D GETPT I PRCAPT=0 W !,"NO PAYMENT DATA!",! Q
"RTN","PRCARPS",15,0)
 I '$D(DT) S %DT="",X="T" D ^%DT S DT=+Y K %DT
"RTN","PRCARPS",16,0)
 S %ZIS="Q" D ^%ZIS Q:POP  I IO=IO(0) D PRT Q
"RTN","PRCARPS",17,0)
 I $D(IO("Q")) K IO("Q") D QUE D:IO'=IO(0) CLOSEDV Q
"RTN","PRCARPS",18,0)
 U IO D PRT Q
"RTN","PRCARPS",19,0)
PRT K PRCAPP D GETPAY Q:'$D(PRCAPP)  D SETLINE,GETPB,WRST^PRCARPS1
"RTN","PRCARPS",20,0)
 I '$D(DT) S %DT="",X="T" D ^%DT S DT=+Y K %DT
"RTN","PRCARPS",21,0)
 I PRCANOD>0 S $P(^PRCA(430,PRCABN,5,PRCANOD,0),U,3)=1,$P(^PRCA(430,PRCABN,5,PRCANOD,0),U,5)=DT
"RTN","PRCARPS",22,0)
 D CLOSEDV Q
"RTN","PRCARPS",23,0)
QUE K ZTSK,ZTSAVE S ZTSAVE("PRCAPT")=PRCAPT,ZTSAVE("PRCADUE")=PRCADUE,ZTSAVE("PRCABN")=PRCABN,ZTSAVE("PRCA(""BILLN"")")=PRCA("BILLN"),ZTSAVE("PRCA(""DEBTOR"")")=PRCA("DEBTOR"),ZTSAVE("PRCANOD")=PRCANOD
"RTN","PRCARPS",24,0)
 S ZTRTN="PRT^PRCARPS",ZTDESC="Repayment Plan Statement" D ^%ZTLOAD K ZTRTN,ZTSAVE Q
"RTN","PRCARPS",25,0)
CLOSEDV D ^%ZISC Q
"RTN","PRCARPS",26,0)
KILLV ;
"RTN","PRCARPS",27,0)
END K PRCAREP,PRCABN,PRCA,PRCAPP,PRCAPB,PRCALN,PRCAST1,PRCACITY,PRCA("DEBTNAM"),PRCA("DEBTOR"),I,PRCADT,PRCADUE,PRCAMT,PRCANOD,PRCAPT,PRCASSAN,PRCAKIP,PRCABN1,PRCA1,PRCATY,PRCARDT,PRCANO D KVAR^VADPT Q
"RTN","PRCARPS",28,0)
 ;
"RTN","PRCARPS",29,0)
GETPT S PRCAKEN=+$P(^PRCA(430,PRCABN,5,0),U,4),(PRCADUE,PRCANOD)=0
"RTN","PRCARPS",30,0)
 F Z=1:1:PRCAKEN I +$P(^PRCA(430,PRCABN,5,Z,0),U,4)>0,+$P(^(0),U,3)'>0 S PRCAPT=$P(^(0),U,4),PRCANOD=Z Q
"RTN","PRCARPS",31,0)
 F Z=1:1:PRCAKEN I +$P(^PRCA(430,PRCABN,5,Z,0),U,2)<1 S PRCADUE=+$P(^(0),U,1) Q
"RTN","PRCARPS",32,0)
 K Z,PRCAKEN Q
"RTN","PRCARPS",33,0)
GETPAY S PRCADT=$P(^PRCA(433,PRCAPT,1),U,1) Q:PRCADT=""
"RTN","PRCARPS",34,0)
 S Y=PRCADT D DD^%DT
"RTN","PRCARPS",35,0)
 S PRCADT=$E(PRCADT,4,5)_"/"_$E(PRCADT,6,7)_"/"_$P(Y,", ",2)
"RTN","PRCARPS",36,0)
 S PRCAMT=+$P(^PRCA(433,PRCAPT,1),U,5) Q:PRCAMT'>0
"RTN","PRCARPS",37,0)
 S Z3=$S($D(^PRCA(433,PRCAPT,3)):^(3),1:"") Q:Z3=""
"RTN","PRCARPS",38,0)
 F Z=1:1:5 S PRCAPP(Z)=+$P(Z3,U,Z)
"RTN","PRCARPS",39,0)
 K Z,Z3 Q
"RTN","PRCARPS",40,0)
GETPB S Z4=^PRCA(430,PRCABN,7)
"RTN","PRCARPS",41,0)
 F Z=1:1:5 S PRCAPB(Z)=+$P(Z4,U,Z)
"RTN","PRCARPS",42,0)
 K Z,Z4 Q
"RTN","PRCARPS",43,0)
SETLINE S PRCALN=0 S:IOM>87 PRCALN=7 S PRCALN(0)=25+PRCALN,PRCALN(1)=50+PRCALN,PRCALN(2)=52+PRCALN,PRCALN(3)=62+PRCALN,PRCALN(4)=64+PRCALN,PRCALN(5)=10+PRCALN,PRCALN(6)=30+PRCALN
"RTN","PRCARPS",44,0)
 S PRCALL(1)=18+PRCALN,PRCALL(2)=20+PRCALN,PRCALL(3)=30+PRCALN,PRCALL(4)=32+PRCALN,PRCALL(5)=42+PRCALN,PRCALL(6)=44+PRCALN,PRCALL(7)=54+PRCALN,PRCALL(8)=56+PRCALN,PRCALL(9)=66+PRCALN,PRCALL(10)=68+PRCALN,PRCALL(11)=78+PRCALN Q
"RTN","PRCARPS",45,0)
 ;==================== REPRINT STATEMENT ============================
"RTN","PRCARPS",46,0)
EN1 ;Reprint the payment statement.
"RTN","PRCARPS",47,0)
 S PRCAREP=0 D BEGIN G:+PRCAREP=0 END
"RTN","PRCARPS",48,0)
 K PRCARDT D DATE G:'$D(PRCARDT) END
"RTN","PRCARPS",49,0)
 S PRCA1=0 D LOOK I PRCA1=0 W !,*7,"THE DATE DOES NOT MATCH !, PLEASE CHECK REPAYMENT PROFILE.",!! G END
"RTN","PRCARPS",50,0)
 D CLDATE D EN,KILLV G EN1
"RTN","PRCARPS",51,0)
LOOK S Z1=0
"RTN","PRCARPS",52,0)
 F Z0=0:0 S Z1=$O(^PRCA(430,PRCABN,5,Z1)) Q:+Z1'>0  I $P(^(Z1,0),U,5)=PRCARDT S PRCA1=1,PRCABN1=Z1 K Z1 Q
"RTN","PRCARPS",53,0)
 K Z0 Q
"RTN","PRCARPS",54,0)
DATE S %DT="AE",%DT("A")="Enter the date the statement was printed: " D ^%DT Q:Y<0  S PRCARDT=+Y Q
"RTN","PRCARPS",55,0)
CLDATE Q:'$D(^PRCA(430,PRCABN,5,PRCABN1,0))  S $P(^(0),U,3)=0,$P(^(0),U,5)="" Q
"RTN","PRCARPU")
0^46^B188846893^n/a
"RTN","PRCARPU",1,0)
PRCARPU ;ALB/DRF-CREATE MULTIPLE ACCOUNT REPAYMENT DATE SCHEDULE FUNCTIONS;08/09/2016  4:40 PM
"RTN","PRCARPU",2,0)
 ;;4.5;Accounts Receivable;**315**;Mar 20, 1995;Build 67
"RTN","PRCARPU",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCARPU",4,0)
 ;
"RTN","PRCARPU",5,0)
 Q
"RTN","PRCARPU",6,0)
 ;
"RTN","PRCARPU",7,0)
DEBTOR() ;Look up debtor by name or bill #
"RTN","PRCARPU",8,0)
 N DIC,X,Y,DEBT,DEBTOR,DIC,PRCADB,DTOUT,DUOUT
"RTN","PRCARPU",9,0)
 R !!,"Select DEBTOR NAME or BILL NUMBER: ",X:DTIME
"RTN","PRCARPU",10,0)
 I X["^"!(X="") Q ""
"RTN","PRCARPU",11,0)
 S X=$$UPPER^VALM1(X)
"RTN","PRCARPU",12,0)
 S Y=$S($O(^PRCA(430,"B",X,0)):$O(^(0)),$O(^PRCA(430,"D",X,0)):$O(^(0)),1:-1)
"RTN","PRCARPU",13,0)
 I Y>0 S DEBT=$P($G(^PRCA(430,Y,0)),"^",9) I DEBT D  Q DEBT  ;If found by bill number
"RTN","PRCARPU",14,0)
 . S PRCADB=$P($G(^RCD(340,DEBT,0)),"^")
"RTN","PRCARPU",15,0)
 . S ^DISV(DUZ,"^RCD(340,")=DEBT
"RTN","PRCARPU",16,0)
 . S $P(DEBT,"^",2)=$$NAM^RCFN01(DEBT)
"RTN","PRCARPU",17,0)
 I $D(DTOUT) Q 0
"RTN","PRCARPU",18,0)
 S DIC="^RCD(340,",DIC(0)="EX" D ^DIC W ! I Y<0 Q 0
"RTN","PRCARPU",19,0)
 I $G(DTOUT)!($G(DUOUT)) Q ""  ;TIMEOUT/UP ARROW
"RTN","PRCARPU",20,0)
 S ^DISV(DUZ,"^RCD(340,")=+Y,PRCADB=$P(Y,"^",2),DEBTOR=+Y_"^"_$P(@("^"_$P(PRCADB,";",2)_+PRCADB_",0)"),"^")
"RTN","PRCARPU",21,0)
 Q DEBTOR  ;If looked up by debtor name
"RTN","PRCARPU",22,0)
 ;
"RTN","PRCARPU",23,0)
ACCOUNTS(DEBTOR,ARRALL,ARRPLN,ARRNON,ACT) ;Find all active accounts for a debtor
"RTN","PRCARPU",24,0)
 ; DEBTOR  - Pointer to #340
"RTN","PRCARPU",25,0)
 ; ARRALL  - Name of array (passed by reference) that holds all the accounts for this debtor
"RTN","PRCARPU",26,0)
 ;           Ordered by date in the format ARRAY(1,xxxxxxx)="",ARRAY(2,xxxxxx)=""...
"RTN","PRCARPU",27,0)
 ; ARRPLN  - Name of array (passed by reference) that holds the accounts for this debtor
"RTN","PRCARPU",28,0)
 ;           that are part of a current payment plan
"RTN","PRCARPU",29,0)
 ;           Ordered by date in the format ARRAY(1,xxxxxxx)="",ARRAY(2,xxxxxx)=""...
"RTN","PRCARPU",30,0)
 ;           Check for ARRPLN>0 to see if there is an existing plan for this debtor
"RTN","PRCARPU",31,0)
 ; ARRNON  - Name of array (passed by reference) that holds the accounts for this debtor
"RTN","PRCARPU",32,0)
 ;           that are NOT part of a current payment plan
"RTN","PRCARPU",33,0)
 ;           Ordered by date in the format ARRAY(1,xxxxxxx)="",ARRAY(2,xxxxxx)=""...
"RTN","PRCARPU",34,0)
 ; ACT     - Variable that tracks the number of active accounts for the debtor. ARRALL displays
"RTN","PRCARPU",35,0)
 ;           Cross-Serviced accounts, but they are not active for the purposes of repayment plans
"RTN","PRCARPU",36,0)
 ;
"RTN","PRCARPU",37,0)
 ; Returns: ARRAY(COUNTER,PRCABN)=BILL#^PART OF A PAYMENT PLAN=1^IN CROSS SERVICING=1^BALANCE DUE^DOS^STATUS^CATEGORY^PLAN DATE
"RTN","PRCARPU",38,0)
 ;
"RTN","PRCARPU",39,0)
 N AMT,BILL,CS,D0,D4,D7,DOS,DT,PLNDT,PP,PRCABN,PRCAT,PRCS15,STAT
"RTN","PRCARPU",40,0)
 K ARRALL,ARRPLN,ARRNON,ACT
"RTN","PRCARPU",41,0)
 S (ARRALL,ARRPLN,ARRNON,ACT)=0
"RTN","PRCARPU",42,0)
 S DT="" F  S DT=$O(^PRCA(430,"ATD",DEBTOR,DT)) Q:'DT  S PRCABN=0 F  S PRCABN=$O(^PRCA(430,"ATD",DEBTOR,DT,PRCABN)) Q:'PRCABN  D
"RTN","PRCARPU",43,0)
 . S D0=^PRCA(430,PRCABN,0),STAT=$P(D0,U,8)
"RTN","PRCARPU",44,0)
 . I +STAT>0,$P(^PRCA(430.3,STAT,0),U,3)'=102 Q  ;Not an active account
"RTN","PRCARPU",45,0)
 . S D4=$G(^PRCA(430,PRCABN,4)),D7=$G(^PRCA(430,PRCABN,7))
"RTN","PRCARPU",46,0)
 . S AMT=$S(+D7:$P(D7,U,1)+$P(D7,U,2)+$P(D7,U,3)+$P(D7,U,4)+$P(D7,U,5),1:$P(D0,U,3)),DOS=$P(D0,U,10)
"RTN","PRCARPU",47,0)
 . S BILL=$P(D0,U,1),PRCAT=$P(D0,U,2),PLNDT=$P(D4,U,1)
"RTN","PRCARPU",48,0)
 . S PP=0 I PLNDT]"" S PP=1 ;Part of a payment plan?
"RTN","PRCARPU",49,0)
 . S CS=0 I $D(^PRCA(430,"TCSP",PRCABN)) S CS=1 ;Bill is in cross-servicing
"RTN","PRCARPU",50,0)
 . I 'CS S ACT=ACT+1
"RTN","PRCARPU",51,0)
 . I ARRALL]"" S ARRALL=ARRALL+1,ARRALL(ARRALL,PRCABN)=BILL_U_PP_U_CS_U_AMT_U_DOS_U_STAT_U_PRCAT_U_PLNDT
"RTN","PRCARPU",52,0)
 . I PP,ARRPLN]"" S ARRPLN=ARRPLN+1,ARRPLN(ARRPLN,PRCABN)=BILL_U_PP_U_CS_U_AMT_U_DOS_U_STAT_U_PRCAT_U_PLNDT Q
"RTN","PRCARPU",53,0)
 . I 'PP,ARRNON]"" S ARRNON=ARRNON+1,ARRNON(ARRNON,PRCABN)=BILL_U_PP_U_CS_U_AMT_U_DOS_U_STAT_U_PRCAT Q
"RTN","PRCARPU",54,0)
 Q
"RTN","PRCARPU",55,0)
 ;
"RTN","PRCARPU",56,0)
DISPLAY(ARR,NUM) ;Display accounts in ARR
"RTN","PRCARPU",57,0)
 ; ARR - An array of bills
"RTN","PRCARPU",58,0)
 ; NUM - Display selection numbers in left column (defaults to no (0))
"RTN","PRCARPU",59,0)
 ;
"RTN","PRCARPU",60,0)
 N AMT,BILL,CS,CSMSG,DOS,I,PLN,PLNMSG,PRCABN,PRCAT,PRCATN,STAT,STATN,TAMT,Y
"RTN","PRCARPU",61,0)
 S NUM=+$G(NUM)
"RTN","PRCARPU",62,0)
 S TAMT=0,PLNMSG=0,CSMSG=0
"RTN","PRCARPU",63,0)
 F I=1:1:ARR D
"RTN","PRCARPU",64,0)
 . S PRCABN=$O(ARR(I,0)),BILL=$P(ARR(I,PRCABN),U,1),PLN=$P(ARR(I,PRCABN),U,2),CS=$P(ARR(I,PRCABN),U,3)
"RTN","PRCARPU",65,0)
 . S AMT=$P(ARR(I,PRCABN),U,4),DOS=$P(ARR(I,PRCABN),U,5),STAT=$P(ARR(I,PRCABN),U,6),PRCAT=$P(ARR(I,PRCABN),U,7)
"RTN","PRCARPU",66,0)
 . I $G(CS)=0 S TAMT=TAMT+AMT
"RTN","PRCARPU",67,0)
 . I PLN,'PLNMSG S PLNMSG=1
"RTN","PRCARPU",68,0)
 . I CS,'CSMSG S CSMSG=1
"RTN","PRCARPU",69,0)
 . S PRCATN=$P($G(^PRCA(430.2,PRCAT,0)),U,1),STATN=$P($G(^PRCA(430.3,STAT,0)),U,1)
"RTN","PRCARPU",70,0)
 . I I#22=0 D PAUSE
"RTN","PRCARPU",71,0)
 . W $S(NUM:I,1:""),?5,BILL,$S(PLN:"**",CS:"#",1:""),?24,PRCATN,?50,$$MDY(DOS,"-"),?61,STATN,?70,"$",$J(AMT,8,2),!
"RTN","PRCARPU",72,0)
 W !
"RTN","PRCARPU",73,0)
 I PLNMSG W "** Bill is currently in Repayment Plan",!
"RTN","PRCARPU",74,0)
 I CSMSG W "# Bill is currently in Cross Servicing",!
"RTN","PRCARPU",75,0)
 Q TAMT
"RTN","PRCARPU",76,0)
 ;
"RTN","PRCARPU",77,0)
MDY(DT,DEL) ;Return date format of mm-dd-yy
"RTN","PRCARPU",78,0)
 ; DT - Date in FileMan format
"RTN","PRCARPU",79,0)
 ; DEL - Delimiter used to seperate month, day, year
"RTN","PRCARPU",80,0)
 ;
"RTN","PRCARPU",81,0)
 ; Returns: Date in mmddyy fomat delimited by DEL
"RTN","PRCARPU",82,0)
 N %DT,X,Y
"RTN","PRCARPU",83,0)
 S X=$G(DT),DEL=$S($G(DEL)="":"-",1:DEL),%DT="T"
"RTN","PRCARPU",84,0)
 D ^%DT S DT=Y S:Y<0 DT="0000000"
"RTN","PRCARPU",85,0)
 Q $E(DT,4,5)_DEL_$E(DT,6,7)_DEL_$E(DT,2,3)
"RTN","PRCARPU",86,0)
 ;
"RTN","PRCARPU",87,0)
SELECT(ARR) ;Select items up to number ARR
"RTN","PRCARPU",88,0)
 ; ARR - The upper limit that can be chosen
"RTN","PRCARPU",89,0)
 ; This function will eliminate duplicates and return choices in numerical error
"RTN","PRCARPU",90,0)
 ; regardless of input order.
"RTN","PRCARPU",91,0)
 ; Returns: comma delimited list of pointers to file #430 in ascending date order
"RTN","PRCARPU",92,0)
 ;
"RTN","PRCARPU",93,0)
 N CNT,DIR,ERR,FIRST,I,J,LAST,LIST,OK,PC,PRCABN,STR,X,Y
"RTN","PRCARPU",94,0)
 S OK=0 F CNT=1:1 I 'OK D  Q:OK
"RTN","PRCARPU",95,0)
 . I CNT>1 W "   Select bills using the following formats:(A)ll or (N)one or 1,2,3 and/or 1-3",!
"RTN","PRCARPU",96,0)
 . S DIR(0)="FO^^"
"RTN","PRCARPU",97,0)
 . S DIR("A")="Choose Bills to Add to Repayment Plan: "
"RTN","PRCARPU",98,0)
 . S DIR("B")="ALL"
"RTN","PRCARPU",99,0)
 . S DIR("?")="Select bills using the following formats:(A)ll or (N)one or 1,2,3 and/or 1-3"
"RTN","PRCARPU",100,0)
 . D ^DIR
"RTN","PRCARPU",101,0)
 . I $G(DTOUT)!$G(DUOUT) S LIST="",OK=1 Q
"RTN","PRCARPU",102,0)
 . S X=$$UPPER^VALM1(X)
"RTN","PRCARPU",103,0)
 . I $E("NONE",1,$L(X))=X S LIST="",OK=1 Q
"RTN","PRCARPU",104,0)
 . K STR S ERR=""
"RTN","PRCARPU",105,0)
 . I $E("ALL",1,$L(X))=X D  Q:OK
"RTN","PRCARPU",106,0)
 .. F I=1:1:ARR S STR(I)=""
"RTN","PRCARPU",107,0)
 .. S OK=1
"RTN","PRCARPU",108,0)
 . F I=1:1:$L(X,",") S PC=$P(X,",",I) D  Q:ERR]""
"RTN","PRCARPU",109,0)
 .. I PC'?1.N,PC'?1.N1"-"1.N S ERR="Invalid response" Q
"RTN","PRCARPU",110,0)
 .. I PC'>0!(PC>ARR) S ERR="Number out of range" Q
"RTN","PRCARPU",111,0)
 .. I PC?1.N,PC>0,PC'>ARR S STR(PC)="" Q
"RTN","PRCARPU",112,0)
 .. I PC?1.N1"-"1.N D  Q:ERR]""
"RTN","PRCARPU",113,0)
 ... S FIRST=$P(PC,"-",1),LAST=$P(PC,"-",2)
"RTN","PRCARPU",114,0)
 ... I FIRST'>0!(FIRST>ARR)!(LAST'>0)!(LAST>ARR) S ERR="Number out of range" Q
"RTN","PRCARPU",115,0)
 ... I FIRST>0,FIRST'>ARR,LAST>0,LAST'>ARR F J=FIRST:1:LAST S STR(J)=""
"RTN","PRCARPU",116,0)
 . I ERR="" S OK=1 Q
"RTN","PRCARPU",117,0)
 . S OK=0 W "  "_ERR,!
"RTN","PRCARPU",118,0)
 S I=0,LIST="" F  S I=$O(STR(I)) Q:I=""  D
"RTN","PRCARPU",119,0)
 . S PRCABN=$O(ARR(I,0))
"RTN","PRCARPU",120,0)
 . I $P(ARR(I,PRCABN),U,3) W !,I_". "_$P(ARR(I,PRCABN),U,1)_" is in Cross Servicing" Q
"RTN","PRCARPU",121,0)
 . I $P(ARR(I,PRCABN),U,2) W !,I_". "_$P(ARR(I,PRCABN),U,1)_" is in a Payment Plan" Q
"RTN","PRCARPU",122,0)
 . S LIST=LIST_$S(LIST="":"",1:",")_I
"RTN","PRCARPU",123,0)
 Q LIST
"RTN","PRCARPU",124,0)
 ;
"RTN","PRCARPU",125,0)
RPDIS(DEBTOR,PLN) ;Display Repayment Plan
"RTN","PRCARPU",126,0)
 ; DEBTOR  - Pointer to #340
"RTN","PRCARPU",127,0)
 ; PLN - An array of bills
"RTN","PRCARPU",128,0)
 ;
"RTN","PRCARPU",129,0)
 D PLNDTL(.PLN)
"RTN","PRCARPU",130,0)
 W #
"RTN","PRCARPU",131,0)
 W !,"Summary of Current Repayment Plan for AR Debtor: ",$P(DEBTOR,U,2),!
"RTN","PRCARPU",132,0)
 W "------------------------------------------------------------------",!
"RTN","PRCARPU",133,0)
 W "Monthly Repayment Amount:",?32,"$",$J(PLNAMT,0,2)
"RTN","PRCARPU",134,0)
 W ?45,"Day of Month Payment Due:",?72,PLNDAY,!
"RTN","PRCARPU",135,0)
 W "Number of Payments Remaining:",?32,PLNRMN
"RTN","PRCARPU",136,0)
 W ?45,"Due Date of First Payment:",?72,PLNFRST,!
"RTN","PRCARPU",137,0)
 W "Current Total Due:",?32,"$",$J(PLNTDUE,0,2)
"RTN","PRCARPU",138,0)
 W ?45,"Last Payment Due:",?72,PLNLST,!
"RTN","PRCARPU",139,0)
 W "Plan Date:",?32,$$MDY(PLNDT)
"RTN","PRCARPU",140,0)
 W ?45,"Next Payment Due:",?72,$S(PLNNXT="00/00/00":"DEFAULT",1:PLNNXT),!!
"RTN","PRCARPU",141,0)
 W "Bills in Repayment Plan:",!
"RTN","PRCARPU",142,0)
 Q
"RTN","PRCARPU",143,0)
 ;
"RTN","PRCARPU",144,0)
RPDEL(PLN,TRAN) ;Delete repayment plan
"RTN","PRCARPU",145,0)
 ; PLN - An array of bills
"RTN","PRCARPU",146,0)
 ;
"RTN","PRCARPU",147,0)
 N I,PRCABN,PRCAPB,X
"RTN","PRCARPU",148,0)
 I $G(TRAN)="" S TRAN=1 ; The default is to file a transaction
"RTN","PRCARPU",149,0)
 F I=1:1:PLN D
"RTN","PRCARPU",150,0)
 . S PRCABN=$O(PLN(I,0))
"RTN","PRCARPU",151,0)
 . S X=PLN(I,PRCABN)
"RTN","PRCARPU",152,0)
 . K ^PRCA(430,PRCABN,4),^PRCA(430,PRCABN,5)
"RTN","PRCARPU",153,0)
 . I TRAN D TRANDEL
"RTN","PRCARPU",154,0)
 Q
"RTN","PRCARPU",155,0)
 ;
"RTN","PRCARPU",156,0)
DBTCOM(DEBTOR,TEXT) ;Add DEBTOR comments
"RTN","PRCARPU",157,0)
 ; DEBTOR  - Pointer to #340
"RTN","PRCARPU",158,0)
 ; TEXT - Comment text
"RTN","PRCARPU",159,0)
 ;
"RTN","PRCARPU",160,0)
 N DIC,X,Y
"RTN","PRCARPU",161,0)
 I $G(TEXT)="" Q
"RTN","PRCARPU",162,0)
 S DIC="^RCD(340,"_DEBTOR_",2,",DIC(0)="L",X=TEXT
"RTN","PRCARPU",163,0)
 D FILE^DICN
"RTN","PRCARPU",164,0)
 Q
"RTN","PRCARPU",165,0)
 ;
"RTN","PRCARPU",166,0)
PLNDTL(ARR) ;Gather existing plan details
"RTN","PRCARPU",167,0)
 ; ARR - An array of bills
"RTN","PRCARPU",168,0)
 ;
"RTN","PRCARPU",169,0)
 N BILL,PLAN,DA,D0,D1,D4,D7,I,PRCABN,DT,PYMT,TODAY
"RTN","PRCARPU",170,0)
 S PLNRMN=0,PLNTDUE=0,PLNNXT=0,LSTDATE=0
"RTN","PRCARPU",171,0)
 D DT^DILF("","T",.TODAY)
"RTN","PRCARPU",172,0)
 F I=1:1:ARR D
"RTN","PRCARPU",173,0)
 . S PRCABN=$O(ARR(I,0)),X=ARR(I,PRCABN)
"RTN","PRCARPU",174,0)
 . S D4=$G(^PRCA(430,PRCABN,4))
"RTN","PRCARPU",175,0)
 . S BILL=$P(X,U,1)
"RTN","PRCARPU",176,0)
 . S PLNTDUE=PLNTDUE+$P(X,U,4)
"RTN","PRCARPU",177,0)
 . I I=1 S PLNDT=$P(D4,U,1),PLNDAY=$P(D4,U,2),PLNAMT=$P(D4,U,3)
"RTN","PRCARPU",178,0)
 . S PYMT=0 F  S PYMT=$O(^PRCA(430,PRCABN,5,PYMT)) Q:'PYMT  D
"RTN","PRCARPU",179,0)
 .. S D1=^PRCA(430,PRCABN,5,PYMT,0)
"RTN","PRCARPU",180,0)
 .. I I=1,PYMT=1 S PLNFRST=$P(D1,U,1)
"RTN","PRCARPU",181,0)
 .. I $P(D1,U,1)>TODAY,$P(D1,U,1)>LSTDATE S PLNRMN=PLNRMN+1,LSTDATE=$P(D1,U,1)
"RTN","PRCARPU",182,0)
 .. I 'PLNNXT,($P(D1,U,1)>TODAY) S PLNNXT=$P(D1,U,1)
"RTN","PRCARPU",183,0)
 .. S PLNLST=$P(D1,U,1)
"RTN","PRCARPU",184,0)
 S PLNFRST=$$MDY(PLNFRST,"/")
"RTN","PRCARPU",185,0)
 S PLNNXT=$$MDY(PLNNXT,"/")
"RTN","PRCARPU",186,0)
 S PLNLST=$$MDY(PLNLST,"/")
"RTN","PRCARPU",187,0)
 ;S PLNDT=$$MDY(PLNDT,"/")
"RTN","PRCARPU",188,0)
 Q
"RTN","PRCARPU",189,0)
 ;
"RTN","PRCARPU",190,0)
SUMM(ARR,LIST,ADD) ;List bills from ARR to plan, new or existing
"RTN","PRCARPU",191,0)
 ; ARR - An array of bills
"RTN","PRCARPU",192,0)
 ; LIST - A comma delimited list of bills to be added
"RTN","PRCARPU",193,0)
 ; ADD - An array of bills
"RTN","PRCARPU",194,0)
 ;
"RTN","PRCARPU",195,0)
 N I,J,PRCABN
"RTN","PRCARPU",196,0)
 F J=1:1 S I=$P(LIST,",",J) Q:I=""  D  S ADD=J
"RTN","PRCARPU",197,0)
 . S PRCABN=$O(ARR(I,""))
"RTN","PRCARPU",198,0)
 . S ADD(J,PRCABN)=ARR(I,PRCABN)
"RTN","PRCARPU",199,0)
 Q
"RTN","PRCARPU",200,0)
 ;
"RTN","PRCARPU",201,0)
CORRECT() ;Are you sure this is correct?
"RTN","PRCARPU",202,0)
 ; Return: 1 for Yes
"RTN","PRCARPU",203,0)
 ;         0 for No
"RTN","PRCARPU",204,0)
 ;
"RTN","PRCARPU",205,0)
 N DIR,X,Y
"RTN","PRCARPU",206,0)
 S DIR(0)="Y",DIR("B")="YES",DIR("A")="Are you sure this is correct"
"RTN","PRCARPU",207,0)
 D ^DIR
"RTN","PRCARPU",208,0)
 Q $S($E(X)="Y":1,$E(X)="y":1,1:0)
"RTN","PRCARPU",209,0)
 ;
"RTN","PRCARPU",210,0)
INQPLAN(DUE,PLNDT) ;Prompt for plan details
"RTN","PRCARPU",211,0)
 ; DUE - Total amount due for the current plan
"RTN","PRCARPU",212,0)
 ; Returns: 1 if completed
"RTN","PRCARPU",213,0)
 ;
"RTN","PRCARPU",214,0)
 N DIR,OK,X,Y,NPAY
"RTN","PRCARPU",215,0)
 ;Repayment amount
"RTN","PRCARPU",216,0)
 S DIR(0)="N"
"RTN","PRCARPU",217,0)
 S DIR("A")="Repayment Amount Due"
"RTN","PRCARPU",218,0)
 S DIR("?")="This is the amount the debtor will pay each month"
"RTN","PRCARPU",219,0)
 D ^DIR
"RTN","PRCARPU",220,0)
 I $G(DTOUT)!$G(DUOUT)!$G(DIRUT) Q 0
"RTN","PRCARPU",221,0)
 S PRCAMT=Y
"RTN","PRCARPU",222,0)
 S NPAY=DUE\PRCAMT I DUE#PRCAMT>0 S NPAY=NPAY+1
"RTN","PRCARPU",223,0)
 W !!,"Number of Payments will be ",NPAY,!
"RTN","PRCARPU",224,0)
 I NPAY>36 D
"RTN","PRCARPU",225,0)
 . W "The number of payments exceeds 36 payments. Ensure you have Supervisor Approval",!
"RTN","PRCARPU",226,0)
 . W "and enter Supervisor approval in the Expanded Comment.",!!
"RTN","PRCARPU",227,0)
 . D PAUSE
"RTN","PRCARPU",228,0)
 ;
"RTN","PRCARPU",229,0)
 ;Repayment plan date
"RTN","PRCARPU",230,0)
 S PLNDT=$G(PLNDT)
"RTN","PRCARPU",231,0)
 I PLNDT="" S %DT="AEFX",%DT("A")="Repayment Plan Date:  ",%DT("B")="T" D ^%DT K %DT I Y=-1!($G(DTOUT)) Q 0
"RTN","PRCARPU",232,0)
 S PRCADT=$S(PLNDT]"":PLNDT,1:Y) ;Plan Date
"RTN","PRCARPU",233,0)
 ;
"RTN","PRCARPU",234,0)
 ;Day of month
"RTN","PRCARPU",235,0)
 S DIR(0)="N"
"RTN","PRCARPU",236,0)
 S DIR("A")="Day of Month Payment Due"
"RTN","PRCARPU",237,0)
 S DIR("?")="Enter the day of the month (1-28) that the payment will be due."
"RTN","PRCARPU",238,0)
 S OK=0 F  D  Q:OK
"RTN","PRCARPU",239,0)
 . D ^DIR
"RTN","PRCARPU",240,0)
 . I $G(DTOUT)!$G(DUOUT)!$G(DIRUT) S OK=1 Q
"RTN","PRCARPU",241,0)
 . I Y>0,Y<29 S OK=1 Q
"RTN","PRCARPU",242,0)
 . W "  Enter the day of the month (1-28) that the payment will be due.",!
"RTN","PRCARPU",243,0)
 I $G(DTOUT)!$G(DUOUT)!$G(DIRUT) Q 0
"RTN","PRCARPU",244,0)
 S PRCADAY=Y
"RTN","PRCARPU",245,0)
 ;
"RTN","PRCARPU",246,0)
 ;Date of first payment
"RTN","PRCARPU",247,0)
 ;S DIR(0)="DA^:DT:EX",DIR("B")="T",DIR("A")="Due Date of First Payment:  " D ^DIR  K DIR  (Default to today)
"RTN","PRCARPU",248,0)
 S %DT="AEFX",%DT(0)="NOW",%DT("A")="Due Date of First Payment:  " D ^%DT K %DT
"RTN","PRCARPU",249,0)
 I Y=-1!($G(DTOUT)) Q 0
"RTN","PRCARPU",250,0)
 S PRCAFPD=Y ;First payment date
"RTN","PRCARPU",251,0)
 Q 1
"RTN","PRCARPU",252,0)
 ;
"RTN","PRCARPU",253,0)
COMMENTS ;File DEBTOR comments
"RTN","PRCARPU",254,0)
 S DIR(0)="Y"
"RTN","PRCARPU",255,0)
 S DIR("A")="Do you wish to enter Debtor Comments"
"RTN","PRCARPU",256,0)
 S DIR("?")="Enter Y or N to enter Debtor Comments"
"RTN","PRCARPU",257,0)
 D ^DIR
"RTN","PRCARPU",258,0)
 Q
"RTN","PRCARPU",259,0)
 ;
"RTN","PRCARPU",260,0)
DUEARR(ARR) ;Total outstanding balance for array ARR returned in PLNTDUE
"RTN","PRCARPU",261,0)
 ; ARR - An array of bills
"RTN","PRCARPU",262,0)
 ;
"RTN","PRCARPU",263,0)
 ; Returns: Outstanding balance of Bills in ARR
"RTN","PRCARPU",264,0)
 N PLNTDUE,I,PRCABN
"RTN","PRCARPU",265,0)
 S PLNTDUE=0
"RTN","PRCARPU",266,0)
 F I=1:1:ARR S PRCABN=$O(ARR(I,0)),PLNTDUE=PLNTDUE+$P(ARR(I,PRCABN),U,4)
"RTN","PRCARPU",267,0)
 Q PLNTDUE
"RTN","PRCARPU",268,0)
 ;
"RTN","PRCARPU",269,0)
ADDPLAN(ADD,PRCAMT,PRCADAY,PRCAFPD,PRCADT,TRAN) ;Record plan on bills
"RTN","PRCARPU",270,0)
 ; ADD - An array of bills to add to the repayment plan
"RTN","PRCARPU",271,0)
 ; PRCAMT - Monthly amount the debtor will pay
"RTN","PRCARPU",272,0)
 ; PRCADAY - Day of the month payment will be made
"RTN","PRCARPU",273,0)
 ; PRCAFPD - Date of first payment
"RTN","PRCARPU",274,0)
 ; PRCADT - Date plan s established
"RTN","PRCARPU",275,0)
 ; TRAN - Flag to file a transaction for new plan
"RTN","PRCARPU",276,0)
 ;
"RTN","PRCARPU",277,0)
 N BILL,FP,PAYDATE,PRCAPB,PRCABN,X,XX,PRCANPAY,PRCAFP,PRCAREM,PRCA,PAY
"RTN","PRCARPU",278,0)
 I $G(TRAN)="" S TRAN=1 ; the default action is to file a transaction
"RTN","PRCARPU",279,0)
 S FP=PRCAMT,PAYDATE=PRCAFPD
"RTN","PRCARPU",280,0)
 F BILL=1:1:ADD D
"RTN","PRCARPU",281,0)
 . S PRCABN=$O(ADD(BILL,0))
"RTN","PRCARPU",282,0)
 . S X=ADD(BILL,PRCABN)
"RTN","PRCARPU",283,0)
 . S PRCAPB=$P(X,U,4)
"RTN","PRCARPU",284,0)
 . S XX=$$PAYMENTS(PRCAPB,FP,PRCAMT),PRCANPAY=$P(XX,U,1),PRCAFP=$P(XX,U,2),PRCAREM=$P(XX,U,3)
"RTN","PRCARPU",285,0)
 . F PAY=1:1:PRCANPAY D
"RTN","PRCARPU",286,0)
 .. S PAYDATE=$S(PAY=1&(PRCAREM):PAYDATE,1:$$INCDATE(PAYDATE,PRCADAY)) ;If remainder from previous bill, file on same date
"RTN","PRCARPU",287,0)
 .. S ^PRCA(430,PRCABN,5,PAY,0)=PAYDATE_U_"0"
"RTN","PRCARPU",288,0)
 . S ^PRCA(430,PRCABN,5,0)="^430.051DA^"_PRCANPAY_"^"_PRCANPAY
"RTN","PRCARPU",289,0)
 . S (DIC,DIE)="^PRCA(430,",DA=PRCABN,DR="41///"_PRCADT_";42///"_PRCADAY_";43///"_PRCAMT_";44///"_PRCANPAY
"RTN","PRCARPU",290,0)
 . S PRCA("LOCK")=0 D LOCKF^PRCAWO1 D:PRCA("LOCK")=0 ^DIE
"RTN","PRCARPU",291,0)
 . K DA,DIC,DIE,DR
"RTN","PRCARPU",292,0)
 . I TRAN D TRAN
"RTN","PRCARPU",293,0)
 . D IXDIK
"RTN","PRCARPU",294,0)
 . L -^PRCA(430,+$G(PRCABN))
"RTN","PRCARPU",295,0)
 . S FP=$S(PRCAREM:PRCAREM,1:PRCAMT)
"RTN","PRCARPU",296,0)
 Q
"RTN","PRCARPU",297,0)
 ;
"RTN","PRCARPU",298,0)
IXDIK ;Reindex 5 node in 430
"RTN","PRCARPU",299,0)
 N DA,DIK
"RTN","PRCARPU",300,0)
 S DIK="^PRCA(430,"_PRCABN_",5,",DA(1)=PRCABN
"RTN","PRCARPU",301,0)
 D IXALL^DIK
"RTN","PRCARPU",302,0)
 K DIK
"RTN","PRCARPU",303,0)
 Q
"RTN","PRCARPU",304,0)
 ;
"RTN","PRCARPU",305,0)
TRAN ;File plan add transaction in 433
"RTN","PRCARPU",306,0)
 N DIE,DA,DR,PRCAEN,PRCAKTY
"RTN","PRCARPU",307,0)
 S PRCAKTY=$O(^PRCA(430.3,"AC",16,""))
"RTN","PRCARPU",308,0)
 S PRCAEN=-1 D SETTR^PRCAUTL Q:PRCAEN<0  S DA=PRCAEN
"RTN","PRCARPU",309,0)
 S DIE="^PRCA(433,",DR=".03////"_PRCABN_";11///"_DT_";12///"_PRCAKTY_";15///"_PRCAPB_"" D ^DIE
"RTN","PRCARPU",310,0)
 S $P(^PRCA(433,PRCAEN,0),U,4)=2
"RTN","PRCARPU",311,0)
 Q
"RTN","PRCARPU",312,0)
 ;
"RTN","PRCARPU",313,0)
TRANDEL ;File plan delete transaction in 433
"RTN","PRCARPU",314,0)
 N DIE,DA,DR,PRCAEN,PRCAKTY
"RTN","PRCARPU",315,0)
 S PRCAKTY=$O(^PRCA(430.3,"AC",31,""))
"RTN","PRCARPU",316,0)
 S PRCAEN=-1 D SETTR^PRCAUTL Q:PRCAEN<0  S DA=PRCAEN
"RTN","PRCARPU",317,0)
 S DIE="^PRCA(433,",DR=".03////"_PRCABN_";11///"_DT_";12///"_PRCAKTY_";15///"_0_"" D ^DIE
"RTN","PRCARPU",318,0)
 S $P(^PRCA(433,PRCAEN,0),U,4)=2
"RTN","PRCARPU",319,0)
 Q
"RTN","PRCARPU",320,0)
 ;
"RTN","PRCARPU",321,0)
PAYMENTS(AMT,FP,PAY) ;How many payments?
"RTN","PRCARPU",322,0)
 ; AMT - TOTAL DUE ON BILL
"RTN","PRCARPU",323,0)
 ; FP - FIRST PAYMENT AMOUNT
"RTN","PRCARPU",324,0)
 ; PAY - AMOUNT DEBTOR AGREES TO MONTHLY
"RTN","PRCARPU",325,0)
 ;
"RTN","PRCARPU",326,0)
 ; Returns:
"RTN","PRCARPU",327,0)
 ;  NP - Number of payments
"RTN","PRCARPU",328,0)
 ;  FP - First payment
"RTN","PRCARPU",329,0)
 ;  REM - Remainder
"RTN","PRCARPU",330,0)
 ;
"RTN","PRCARPU",331,0)
 N NP,RAMT,REM
"RTN","PRCARPU",332,0)
 I FP'<AMT S NP=1,REM=FP-AMT,FP=AMT Q NP_U_FP_U_REM
"RTN","PRCARPU",333,0)
 I AMT>FP S RAMT=AMT-FP
"RTN","PRCARPU",334,0)
 S NP=RAMT\PAY+1
"RTN","PRCARPU",335,0)
 S REM=$S(PAY>RAMT:PAY-RAMT,1:PAY-(RAMT#PAY))
"RTN","PRCARPU",336,0)
 I REM S NP=NP+1
"RTN","PRCARPU",337,0)
 Q NP_U_FP_U_REM
"RTN","PRCARPU",338,0)
 ;
"RTN","PRCARPU",339,0)
INCDATE(DATE,PRCADAY) ;Increment payment date
"RTN","PRCARPU",340,0)
 ; DATE - Today's date in FileMan format
"RTN","PRCARPU",341,0)
 ; PRCADAY - Day of the month payment is due
"RTN","PRCARPU",342,0)
 ;
"RTN","PRCARPU",343,0)
 ; Returns: Next payment date
"RTN","PRCARPU",344,0)
 ;
"RTN","PRCARPU",345,0)
 N PRCAYR,PRCAMON
"RTN","PRCARPU",346,0)
 S PRCAYR=$E(DATE,1,3),PRCAMON=$E(DATE,4,5)
"RTN","PRCARPU",347,0)
 I $L(PRCADAY)=1 S PRCADAY="0"_PRCADAY
"RTN","PRCARPU",348,0)
 S PRCAMON=PRCAMON+1
"RTN","PRCARPU",349,0)
 I PRCAMON=13 S PRCAMON=1,PRCAYR=PRCAYR+1
"RTN","PRCARPU",350,0)
 Q PRCAYR_$S((PRCAMON<10&($E(PRCAMON,1)'=0)):0_PRCAMON,1:PRCAMON)_PRCADAY
"RTN","PRCARPU",351,0)
 ;
"RTN","PRCARPU",352,0)
PAYDISP(DEBTOR,PLNDT) ;Display all payment for Debtor since Repayment Plan effective date
"RTN","PRCARPU",353,0)
 ; DEBTOR  - Pointer to #340
"RTN","PRCARPU",354,0)
 ; PLNDT - Effective date of repayment plan
"RTN","PRCARPU",355,0)
 ;
"RTN","PRCARPU",356,0)
 N PAY,DT,TN
"RTN","PRCARPU",357,0)
 S PAY=0
"RTN","PRCARPU",358,0)
 W "Payments Since Plan Date",!
"RTN","PRCARPU",359,0)
 I '$D(^PRCA(433,"ATD",DEBTOR)) W "None",!! Q
"RTN","PRCARPU",360,0)
 S DT=$G(PLNDT) I DT="" W "None",!! Q
"RTN","PRCARPU",361,0)
 F  S DT=$O(^PRCA(433,"ATD",DEBTOR,DT)) Q:'DT  D
"RTN","PRCARPU",362,0)
 . S TN="" F  S TN=$O(^PRCA(433,"ATD",DEBTOR,DT,TN)) Q:'TN  D
"RTN","PRCARPU",363,0)
 .. I $D(^PRCA(433,TN,0)),$D(^(1)),"^2^34^41^"[("^"_$P(^(1),"^",2)_"^") D
"RTN","PRCARPU",364,0)
 ... I $P(^PRCA(433,TN,0),"^",4)'=2 Q  ;if transaction is not complete (2), do not display it
"RTN","PRCARPU",365,0)
 ... W $$MDY($P(DT,".",1),"/"),"  ",$P(^PRCA(430,$P(^PRCA(433,TN,0),U,2),0),U,1),"  ",$J($P(^PRCA(433,TN,1),U,5),10,2),!
"RTN","PRCARPU",366,0)
 ... S PAY=1
"RTN","PRCARPU",367,0)
 I 'PAY W "None",!
"RTN","PRCARPU",368,0)
 Q
"RTN","PRCARPU",369,0)
 ;
"RTN","PRCARPU",370,0)
MERGE(PLN,ADD) ;Add ADD to PLN
"RTN","PRCARPU",371,0)
 ; PLN - An array of bills
"RTN","PRCARPU",372,0)
 ; ADD - An array of bills
"RTN","PRCARPU",373,0)
 ;
"RTN","PRCARPU",374,0)
 N TMP,OLD,X,CNT,I,PRCABN
"RTN","PRCARPU",375,0)
 M OLD=PLN K PLN
"RTN","PRCARPU",376,0)
 F CNT=1:1:OLD D
"RTN","PRCARPU",377,0)
 . S PRCABN=$O(OLD(CNT,0))
"RTN","PRCARPU",378,0)
 . S X=OLD(CNT,PRCABN),TMP(PRCABN)=X
"RTN","PRCARPU",379,0)
 F CNT=1:1:ADD D
"RTN","PRCARPU",380,0)
 . S PRCABN=$O(ADD(CNT,0))
"RTN","PRCARPU",381,0)
 . S X=ADD(CNT,PRCABN),TMP(PRCABN)=X
"RTN","PRCARPU",382,0)
 S PRCABN=0 F I=1:1 S PRCABN=$O(TMP(PRCABN)) Q:'PRCABN  D
"RTN","PRCARPU",383,0)
 . S PLN(I,PRCABN)=TMP(PRCABN),PLN=I
"RTN","PRCARPU",384,0)
 Q
"RTN","PRCARPU",385,0)
 ;
"RTN","PRCARPU",386,0)
MULTI(PLN) ;Multiple Repayment Plans?
"RTN","PRCARPU",387,0)
 ; PLN - An array of bills
"RTN","PRCARPU",388,0)
 ;
"RTN","PRCARPU",389,0)
 ; Returns: 1 if multiple Repayment Plans, 0 if single plan
"RTN","PRCARPU",390,0)
 N I,FIRDT,MULT,PRCABN,X
"RTN","PRCARPU",391,0)
 S FIRDT=0,MULT=0
"RTN","PRCARPU",392,0)
 F I=1:1:PLN D  Q:MULT
"RTN","PRCARPU",393,0)
 . S PRCABN=$O(PLN(I,0))
"RTN","PRCARPU",394,0)
 . S X=PLN(I,PRCABN),PLNDT=$P(X,U,8)
"RTN","PRCARPU",395,0)
 . I 'FIRDT S FIRDT=PLNDT
"RTN","PRCARPU",396,0)
 . I PLNDT'=FIRDT S MULT=1
"RTN","PRCARPU",397,0)
 Q MULT
"RTN","PRCARPU",398,0)
 ;
"RTN","PRCARPU",399,0)
PAUSE ;Press Return to Continue
"RTN","PRCARPU",400,0)
 N DIR
"RTN","PRCARPU",401,0)
 S DIR(0)="E" D ^DIR
"RTN","PRCARPU",402,0)
 W !
"RTN","PRCARPU",403,0)
 Q
"RTN","PRCARPU",404,0)
 ;
"RTN","PRCARPU",405,0)
CMTMULT(DEBTOR) ;Enter multiple line comment
"RTN","PRCARPU",406,0)
 ; DEBTOR  - Pointer to #340
"RTN","PRCARPU",407,0)
 ;
"RTN","PRCARPU",408,0)
 N TYPE
"RTN","PRCARPU",409,0)
 S TYPE=1
"RTN","PRCARPU",410,0)
 D ADJ(DEBTOR,TYPE)
"RTN","PRCARPU",411,0)
 Q
"RTN","PRCARPU",412,0)
 ;
"RTN","PRCARPU",413,0)
CMTENTR(DEBTOR) ;Enter comments question
"RTN","PRCARPU",414,0)
 ; DEBTOR  - Pointer to #340
"RTN","PRCARPU",415,0)
 ;
"RTN","PRCARPU",416,0)
 N DIR,ANS
"RTN","PRCARPU",417,0)
 S DIR(0)="Y",DIR("B")="YES",DIR("A")="Do you wish to enter Debtor comments"
"RTN","PRCARPU",418,0)
 D ^DIR
"RTN","PRCARPU",419,0)
 S ANS=$S($E(X)="Y":1,$E(X)="y":1,$E(X)="N":0,1:0)
"RTN","PRCARPU",420,0)
 I ANS W !! D CMTMULT(DEBTOR)
"RTN","PRCARPU",421,0)
 Q
"RTN","PRCARPU",422,0)
 ;
"RTN","PRCARPU",423,0)
ADJ(DEBT,TYPE) ;Adjust an account for DEBT (340 entry)
"RTN","PRCARPU",424,0)
 N DA,DIC,DIE,DR,ERR,EVN,SITE,X,Y
"RTN","PRCARPU",425,0)
 S SITE=$$SITE^RCMSITE() G:SITE'>0 Q2
"RTN","PRCARPU",426,0)
 S DEBT=$P($G(^RCD(340,+$G(DEBT),0)),"^") G:'DEBT Q2
"RTN","PRCARPU",427,0)
 D OPEN^RCEVDRV1(TYPE,DEBT,DT,DUZ,SITE,.ERR,.EVN)
"RTN","PRCARPU",428,0)
 I ERR]""!(EVN<0) W !,"Error (",ERR,") trying to open a new event",! G Q2
"RTN","PRCARPU",429,0)
 W !,"Reference number assigned: ",$P(^RC(341,EVN,0),"^"),!
"RTN","PRCARPU",430,0)
EDT S DR=$P($G(^RC(341.1,$O(^RC(341.1,"AC",TYPE,0)),1)),"^"),DIE="^RC(341,",DA=EVN D:DR]"" ^DIE
"RTN","PRCARPU",431,0)
 S X=$$OK(EVN) G:X=0 EDT I X<0!(X["^") D DEL^RCEVDRV1(EVN) W " ... Deleted",! G Q2
"RTN","PRCARPU",432,0)
 D CLOSE^RCEVDRV1(EVN,.ERR)
"RTN","PRCARPU",433,0)
 I ERR]"" W !,"Error ("_ERR_")",!,"...  trying to close this event"
"RTN","PRCARPU",434,0)
Q2 Q
"RTN","PRCARPU",435,0)
OK(EVN) ;OK an event or delete it
"RTN","PRCARPU",436,0)
 NEW L,FLDS,BY,TO,DIC,IOP,DIR,DIRUT,DIROUT,DUOUT
"RTN","PRCARPU",437,0)
 W ! S DIR(0)="YA",DIR("B")="YES",DIR("A")="Is this OK? " D ^DIR K DIR
"RTN","PRCARPU",438,0)
 S:$D(DTOUT) Y=-1
"RTN","PRCARPU",439,0)
 Q Y
"RTN","PRCARPU",440,0)
 ;
"RTN","PRCARPU",441,0)
DSMPLNS(DEBTOR,PLN) ;Display multiple plans
"RTN","PRCARPU",442,0)
 ; DEBTOR  - Pointer to #340
"RTN","PRCARPU",443,0)
 ; PLN - An array of bills
"RTN","PRCARPU",444,0)
 ;
"RTN","PRCARPU",445,0)
 N CNT,J,OLDPLN,PLANDAT,PRCABN,TMP,X
"RTN","PRCARPU",446,0)
 F CNT=1:1:PLN D
"RTN","PRCARPU",447,0)
 . S PRCABN=$O(PLN(CNT,0))
"RTN","PRCARPU",448,0)
 . S X=PLN(CNT,PRCABN),PLANDAT=$P(X,U,8)
"RTN","PRCARPU",449,0)
 . S TMP(PLANDAT,CNT,PRCABN)=X
"RTN","PRCARPU",450,0)
 S PLANDAT="" F  S PLANDAT=$O(TMP(PLANDAT)) Q:PLANDAT=""  D
"RTN","PRCARPU",451,0)
 . K OLDPLN
"RTN","PRCARPU",452,0)
 . S J=0
"RTN","PRCARPU",453,0)
 . S CNT=0 F  S CNT=$O(TMP(PLANDAT,CNT)) Q:CNT=""  D
"RTN","PRCARPU",454,0)
 .. S PRCABN="" F  S PRCABN=$O(TMP(PLANDAT,CNT,PRCABN)) Q:PRCABN=""  D
"RTN","PRCARPU",455,0)
 ... S J=J+1
"RTN","PRCARPU",456,0)
 ... S X=TMP(PLANDAT,CNT,PRCABN),OLDPLN(J,PRCABN)=X
"RTN","PRCARPU",457,0)
 . S OLDPLN=J
"RTN","PRCARPU",458,0)
 . D RPDIS(DEBTOR,.OLDPLN)
"RTN","PRCARPU",459,0)
 . D DISPLAY(.OLDPLN,0)
"RTN","PRCARPU",460,0)
 . D PAUSE
"RTN","PRCARPU",461,0)
 Q
"RTN","PRCASVC")
0^55^B11763521^B9776542
"RTN","PRCASVC",1,0)
PRCASVC ;SF-ISC/YJK-ACCEPT, AMMEND AND CANCEL AR BILL ;9/6/95  2:09 PM
"RTN","PRCASVC",2,0)
V ;;4.5;Accounts Receivable;**1,21,48,90,136,138,249,274,315**;Mar 20, 1995;Build 67
"RTN","PRCASVC",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCASVC",4,0)
REL ;Accept bill into AR
"RTN","PRCASVC",5,0)
 N X,Y
"RTN","PRCASVC",6,0)
 D ^PRCASVC6 G:$D(PRCAERR) Q3 S PRCADEBT=$O(^RCD(340,"B",PRCASV("DEBTOR"),0)) I 'PRCADEBT K DD,DO S DIC="^RCD(340,",DIC(0)="QL",X=PRCASV("DEBTOR"),DLAYGO=340 D FILE^DICN K DIC,DLAYGO,DO Q:Y<0  S PRCADEBT=+Y
"RTN","PRCASVC",7,0)
 D FY S PRCAT=$P(^PRCA(430.2,PRCASV("CAT"),0),"^",6) F Y="IDNO^4","GPNO^6","GPNM^5","INPA^1" S:$D(PRCASV($P(Y,"^"))) $P(^PRCA(430,PRCASV("ARREC"),202),"^",$P(Y,"^",2))=PRCASV($P(Y,"^"))
"RTN","PRCASVC",8,0)
 S DIE="^PRCA(430,",DR="[PRCASV REL]",DA=PRCASV("ARREC") D ^DIE
"RTN","PRCASVC",9,0)
Q3 K PRCAT,PRCAORA,PRCADEBT,DIE,DR,%
"RTN","PRCASVC",10,0)
 ;  set the fund for the bill (set in routine rcxfmsuf)
"RTN","PRCASVC",11,0)
 S:'$G(DA) DA=PRCASV("ARREC") S %=$$GETFUNDB^RCXFMSUF(DA)
"RTN","PRCASVC",12,0)
 I "^27^28^"[("^"_PRCASV("CAT")_"^") D
"RTN","PRCASVC",13,0)
 .N P
"RTN","PRCASVC",14,0)
 .F P=6,8,10,15 S $P(^PRCA(430,DA,11),"^",P)=$S(P=6:1000,P=8:$G(PRCASV("SITE")),P=10:9,1:$P($G(PRCASV("FY")),"^"))
"RTN","PRCASVC",15,0)
 .S $P(^PRCA(430,DA,11),"^",18,999)=""
"RTN","PRCASVC",16,0)
 I PRCASV("CAT")=27 S $P(^PRCA(430,+PRCASV("ARREC"),0),"^",5)=$O(^PRCA(430.6,"B","CHMPV",0))
"RTN","PRCASVC",17,0)
 I PRCASV("CAT")=29 S $P(^PRCA(430,DA,11),"^",18,999)=""
"RTN","PRCASVC",18,0)
 ;
"RTN","PRCASVC",19,0)
 ; prca*4.5*274 - for TRICARE claims, set the station# (field# 257) from the PRCASV("SITE") value
"RTN","PRCASVC",20,0)
 I "^30^31^32^"[("^"_PRCASV("CAT")_"^") D
"RTN","PRCASVC",21,0)
 .N RCCARE,P
"RTN","PRCASVC",22,0)
 .S:'$G(PRCASV("SITE")) PRCASV("SITE")=$P($$SITE^VASITE,"^",3)
"RTN","PRCASVC",23,0)
 .F P=8,9,10,15 S $P(^PRCA(430,DA,11),"^",P)=$S(P=8:$G(PRCASV("SITE")),P=9:1,P=10:"02",1:$P($G(PRCASV("FY")),"^"))
"RTN","PRCASVC",24,0)
 .S $P(^PRCA(430,DA,11),"^",18)=""
"RTN","PRCASVC",25,0)
 .S RCCARE=$$TYP^IBRFN(DA),RCCARE(1)=$S(RCCARE="I":8028,RCCARE="O":8029,1:8030),$P(^PRCA(430,DA,11),"^",6)=RCCARE(1)
"RTN","PRCASVC",26,0)
 ;
"RTN","PRCASVC",27,0)
 I PRCASV("CAT")=47 D  ;PRCA*4.5*315/BAA
"RTN","PRCASVC",28,0)
 .N RCCARE,P
"RTN","PRCASVC",29,0)
 .S:'$G(PRCASV("SITE")) PRCASV("SITE")=$P($$SITE^VASITE,"^",3)
"RTN","PRCASVC",30,0)
 .F P=8,9,10,15 S $P(^PRCA(430,DA,11),"^",P)=$S(P=8:$G(PRCASV("SITE")),P=9:1,P=10:"02",1:$P($G(PRCASV("FY")),"^"))
"RTN","PRCASVC",31,0)
 .S $P(^PRCA(430,DA,11),"^",18)=""
"RTN","PRCASVC",32,0)
 .S RCCARE=$$TYP^IBRFN(DA),RCCARE(1)=$S(RCCARE="I":"841Z",RCCARE="O":"842Z",1:"842Z"),$P(^PRCA(430,DA,11),"^",6)=RCCARE(1)
"RTN","PRCASVC",33,0)
 ; 
"RTN","PRCASVC",34,0)
 I $G(PRCASV("MEDCA"))!$G(PRCASV("MEDURE")) D MEDICARE
"RTN","PRCASVC",35,0)
 K DA
"RTN","PRCASVC",36,0)
 Q
"RTN","PRCASVC",37,0)
 ;
"RTN","PRCASVC",38,0)
 ;
"RTN","PRCASVC",39,0)
FY K:$D(^PRCA(430,PRCASV("ARREC"),2)) ^(2) S PRCAK1=1,PRCAORA=0,^PRCA(430,PRCASV("ARREC"),2,0)="^430.01IA^^"
"RTN","PRCASVC",40,0)
 F J=1:1 S X=$P(PRCASV("FY"),U,PRCAK1),PRCAMT=+$P(PRCASV("FY"),U,PRCAK1+1) D FY1 S PRCAK1=PRCAK1+2 Q:$P(PRCASV("FY"),U,PRCAK1)=""
"RTN","PRCASVC",41,0)
EXITFY K PRCAK1,J,PRCAMT Q
"RTN","PRCASVC",42,0)
FY1 S DA(1)=PRCASV("ARREC"),DIC="^PRCA(430,"_DA(1)_",2,",DIC(0)="QL",DLAYGO=430 D ^DIC K DIC,DLAYGO Q:Y<0  S DA=+Y
"RTN","PRCASVC",43,0)
 S PRCAORA=PRCAORA+PRCAMT,$P(^PRCA(430,PRCASV("ARREC"),0),"^",3)=PRCAORA,$P(^(7),"^")=PRCAORA,$P(^(2,DA,0),U,2)=PRCAMT,$P(^(0),"^",8)=PRCAMT
"RTN","PRCASVC",44,0)
 K DA Q
"RTN","PRCASVC",45,0)
 ;
"RTN","PRCASVC",46,0)
MEDICARE ;Setup Medicare Supplemental amounts
"RTN","PRCASVC",47,0)
 N DR,DIE
"RTN","PRCASVC",48,0)
 I $G(PRCASV("MEDCA")) S DIE="^PRCA(430,",DR="131////"_PRCASV("MEDCA") D ^DIE
"RTN","PRCASVC",49,0)
 I $G(PRCASV("MEDURE")) S DIE="^PRCA(430,",DR="132////"_PRCASV("MEDURE") D ^DIE
"RTN","PRCASVC",50,0)
 K PRCASV("MEDCA"),PRCASV("MEDURE")
"RTN","PRCASVC",51,0)
 Q  ;MEDICARE
"RTN","PRCASVC",52,0)
 ;
"RTN","PRCASVC1")
0^56^B1372959^B1372764
"RTN","PRCASVC1",1,0)
PRCASVC1 ;SF-ISC/YJK-ACCEPT, AMMEND AND CANCEL AR BILL ;5/1/95  3:05 PM
"RTN","PRCASVC1",2,0)
 ;;4.5;Accounts Receivable;**1,68,48,84,157,295,315**;Mar 20, 1995;Build 67
"RTN","PRCASVC1",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCASVC1",4,0)
 Q
"RTN","PRCASVC1",5,0)
 ;
"RTN","PRCASVC1",6,0)
 ;
"RTN","PRCASVC1",7,0)
AMEND ;  amend the bill in AR
"RTN","PRCASVC1",8,0)
 D CANCEL
"RTN","PRCASVC1",9,0)
 Q
"RTN","PRCASVC1",10,0)
 ;
"RTN","PRCASVC1",11,0)
 ;
"RTN","PRCASVC1",12,0)
CANCEL ;  cancel the bill in AR
"RTN","PRCASVC1",13,0)
 N X
"RTN","PRCASVC1",14,0)
 S X=$$CANCEL^RCBEIB($G(PRCASV("ARREC")),$G(PRCASV("DATE")),$G(PRCASV("BY")),$G(PRCASV("AMT")),$G(PRCASV("COMMENT")))
"RTN","PRCASVC1",15,0)
 Q
"RTN","PRCASVC1",16,0)
 ;
"RTN","PRCASVC1",17,0)
 ;
"RTN","PRCASVC1",18,0)
STATUS ;Change the current status of a bill
"RTN","PRCASVC1",19,0)
 S DIE="^PRCA(430,",DA=PRCASV("ARREC"),DR="[PRCASV STATUS]" D ^DIE K DR,DIE
"RTN","PRCASVC1",20,0)
 ;Allow TRICARE categories to transmit to FMS automatically - PRCA*4.5*295
"RTN","PRCASVC1",21,0)
 ;Add INELIGIBLE HOSP. REIMB. - PRCA*4.5*315
"RTN","PRCASVC1",22,0)
 I $D(^PRCA(430,+DA,0)),("^27^30^31^32^47^"[("^"_$P(^(0),"^",2)_"^")) D EN^PRCACPV(+DA)
"RTN","PRCASVC1",23,0)
 K DA
"RTN","PRCASVC1",24,0)
 Q
"RTN","PRCAWO1")
0^58^B20819477^B16518505
"RTN","PRCAWO1",1,0)
PRCAWO1 ;SF-ISC/YJK-ADMIN.COST CHARGE,TRANSACTION SUBROUTINES ;7/9/93  12:18 PM
"RTN","PRCAWO1",2,0)
V ;;4.5;Accounts Receivable;**67,68,153,315**;Mar 20, 1995;Build 67
"RTN","PRCAWO1",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCAWO1",4,0)
 ;Administrative cost charge transaction
"RTN","PRCAWO1",5,0)
 ; and subroutines called by ^PRCAWO.
"RTN","PRCAWO1",6,0)
 ;
"RTN","PRCAWO1",7,0)
EN1 ;Administrative cost charge
"RTN","PRCAWO1",8,0)
 D BEGIN^PRCAWO G:('$D(PRCAEN))!('$D(PRCABN)) END1 D DIEEN,KILLV G EN1
"RTN","PRCAWO1",9,0)
DIEEN ;Loop through edit
"RTN","PRCAWO1",10,0)
 I $D(^PRCA(430,"TCSP",PRCABN)) S RCTRREV=$$ASKREV() W !  ;315/DRF
"RTN","PRCAWO1",11,0)
 S DIC="^PRCA(433,",DIE=DIC,DR="[PRCAE ADMIN]",DA=PRCAEN
"RTN","PRCAWO1",12,0)
 S DIC=DIE,PRCA("LOCK")=0 D LOCKF Q:PRCA("LOCK")=1  D ^DIE
"RTN","PRCAWO1",13,0)
 I '$D(^PRCA(433,PRCAEN,2)) D DELETE Q
"RTN","PRCAWO1",14,0)
 S PRCADM=+$P(^PRCA(433,PRCAEN,2),U,1)+$P(^(2),U,2)+$P(^(2),U,3)+$P(^(2),U,4)+$P(^(2),U,8)+$P(^(2),U,9),$P(^PRCA(433,PRCAEN,1),U,5)=PRCADM+$P(^(2),U,5)+$P(^(2),U,6)+$P(^(2),U,7)
"RTN","PRCAWO1",15,0)
 D DIP S PRCAOK=0 D ASK1 I $D(PRCA("EXIT")) D DELETE Q
"RTN","PRCAWO1",16,0)
 I $D(PRCASUP),PRCAOK=1,$G(^PRCA(433,PRCAEN,2))["-" D  I $D(PRCA("EXIT")) D DELETE Q
"RTN","PRCAWO1",17,0)
    .N ND2,ND7,I,J,K
"RTN","PRCAWO1",18,0)
    .S ND2=$G(^PRCA(433,PRCAEN,2)),ND7=$G(^PRCA(430,PRCABN,7))
"RTN","PRCAWO1",19,0)
    .I PRCADM<0,-PRCADM>$P(ND7,U,3) D MSG Q
"RTN","PRCAWO1",20,0)
    .F I=5:1:7 I $P(ND2,U,I)<0 D  I $D(PRCA("EXIT")) Q
"RTN","PRCAWO1",21,0)
       ..S J=$P(ND2,U,I)
"RTN","PRCAWO1",22,0)
       ..S K=$S(I=5:4,I=6:5,1:2)
"RTN","PRCAWO1",23,0)
       ..I -J>$P(ND7,U,K) D MSG
"RTN","PRCAWO1",24,0)
       ..Q
"RTN","PRCAWO1",25,0)
    .Q
"RTN","PRCAWO1",26,0)
 I PRCAOK=1 D UPD W ?40,"*** DONE***",! Q
"RTN","PRCAWO1",27,0)
 D ASK2 G:PRCAOK=1 DIEEN D DELETE Q
"RTN","PRCAWO1",28,0)
UPD S PRCAMF=$S($P(^PRCA(433,PRCAEN,2),U,5)]"":+$P(^(2),U,5),1:0),$P(^PRCA(430,PRCABN,7),U,4)=PRCAMF+$P(^PRCA(430,PRCABN,7),U,4)
"RTN","PRCAWO1",29,0)
 S PRCACC=$S(+$P(^PRCA(433,PRCAEN,2),U,6)]"":+$P(^(2),U,6),1:0),$P(^PRCA(430,PRCABN,7),U,5)=PRCACC+$P(^PRCA(430,PRCABN,7),U,5)
"RTN","PRCAWO1",30,0)
 S $P(^PRCA(430,PRCABN,7),U,3)=+PRCADM+$P(^PRCA(430,PRCABN,7),U,3)
"RTN","PRCAWO1",31,0)
 S $P(^PRCA(430,PRCABN,7),U,2)=+$P(^PRCA(433,PRCAEN,2),U,7)+$P(^PRCA(430,PRCABN,7),U,2)
"RTN","PRCAWO1",32,0)
 D TRANST
"RTN","PRCAWO1",33,0)
 ;
"RTN","PRCAWO1",34,0)
 I $D(^PRCA(430,"TCSP",PRCABN)),PRCAEN D  ;PRCA*4.5*315/DRF add cs increase adjustment
"RTN","PRCAWO1",35,0)
 . I $G(RCTRREV)=0 D CSATRN^RCTCSPD5
"RTN","PRCAWO1",36,0)
 . I $G(RCTRREV)=0 D INCADJ^RCTCSPU(PRCABN,PRCAEN)
"RTN","PRCAWO1",37,0)
 . I $G(RCTRREV)=1 D CSATRY^RCTCSPD5
"RTN","PRCAWO1",38,0)
 ;
"RTN","PRCAWO1",39,0)
KILLV ;
"RTN","PRCAWO1",40,0)
END1 K PRCA,PRCADM,PRCAOK,%,PRCACC,PRCAMF,PRCA1,PRCA2,PRCAEN,PRCABN,PRCATYPE,PRCATY,RCTRREV Q
"RTN","PRCAWO1",41,0)
 ;
"RTN","PRCAWO1",42,0)
MSG W !!,*7,"INVALID AMOUNTS ENTERED."
"RTN","PRCAWO1",43,0)
 S PRCA("EXIT")="" Q
"RTN","PRCAWO1",44,0)
DIP K DXS S D0=PRCAEN D ^PRCATO3 K DXS Q
"RTN","PRCAWO1",45,0)
ASK1 S %=2 W !!,"Is this correct" D YN^DICN I %<0 S PRCA("EXIT")="" Q
"RTN","PRCAWO1",46,0)
 I %=0 W !,"Answer 'Y' or 'YES' if the data is correct, answer 'N' or 'NO' if not",! G ASK1
"RTN","PRCAWO1",47,0)
 S:%=1 PRCAOK=1 Q
"RTN","PRCAWO1",48,0)
ASK2 S %=2 W !!,"Do you want to edit" D YN^DICN I %<0 S PRCA("EXIT")="" Q
"RTN","PRCAWO1",49,0)
 I %=0 W !,"Answer 'Y' or 'YES' if you want to edit the data, answer 'N' or 'NO' if you do not want to edit the data",! G ASK2
"RTN","PRCAWO1",50,0)
 S:%=1 PRCAOK=1 Q
"RTN","PRCAWO1",51,0)
 ;======================SUBROUTINE DIE=============================
"RTN","PRCAWO1",52,0)
 ;this is called by ^PRCAWO.
"RTN","PRCAWO1",53,0)
DIE1 ;update the current status in the file 430.
"RTN","PRCAWO1",54,0)
 S DIE="^PRCA(430,",DA=PRCABN,DR="8///"_PRCA("STATUS")_";" D ^DIE
"RTN","PRCAWO1",55,0)
 K DIC,DA,DR Q  ;end of DIE1
"RTN","PRCAWO1",56,0)
 ;
"RTN","PRCAWO1",57,0)
TRANST Q:'$D(PRCAEN)  S $P(^PRCA(433,PRCAEN,0),U,4)=2 Q
"RTN","PRCAWO1",58,0)
 ;========================SUBROUTINE DELETE============================
"RTN","PRCAWO1",59,0)
DELETE ;Deletes an entry but leaves an audit trail
"RTN","PRCAWO1",60,0)
 ; Requires PRCABN=Bill #
"RTN","PRCAWO1",61,0)
 ;          PRCAEN=Transaction to Delete
"RTN","PRCAWO1",62,0)
 ;          PRCAARC=True if archiving this trans
"RTN","PRCAWO1",63,0)
 ;          PRCANOPR=True if no message should be printed to screen
"RTN","PRCAWO1",64,0)
 ;          PRCACOMM=Reason why this transaction is being deleted
"RTN","PRCAWO1",65,0)
 ;          PRCAMAN=True if IRM is manually calling this API 
"RTN","PRCAWO1",66,0)
 NEW X,DINUM,DD,DIC,DLAYGO,DO,DIK,DIE,DA,T0,T5,FLAG
"RTN","PRCAWO1",67,0)
 S FLAG=0
"RTN","PRCAWO1",68,0)
 ;Check for previous audit trail
"RTN","PRCAWO1",69,0)
 S T0=$G(^PRCA(433,PRCAEN,0)),T5=$G(^PRCA(433,PRCAEN,5)) I 'T0 Q
"RTN","PRCAWO1",70,0)
 I $P(T0,U,4)=1,$P(T0,U,10)=1,($P(T5,U,2)["SYSTEM INACTIVATED"!($P(T5,U,2)["SYSTEM ARCHIVED")) S FLAG=1 D
"RTN","PRCAWO1",71,0)
   .I $G(PRCAMAN) W !,"You are attempting to delete a record that already appears to have been deleted and contains an audit trail. Delete failed!"
"RTN","PRCAWO1",72,0)
 I FLAG Q
"RTN","PRCAWO1",73,0)
 S PRCATYPE=$P($G(^PRCA(433,PRCAEN,1)),U,2)
"RTN","PRCAWO1",74,0)
 S:'$D(PRCACOMM) PRCACOMM="USER CANCELED"
"RTN","PRCAWO1",75,0)
 S:'$D(PRCABN) PRCABN=$P($G(^PRCA(433,PRCAEN,0)),U,2)
"RTN","PRCAWO1",76,0)
 S DIK="^PRCA(433,",DA=PRCAEN D ^DIK K DIK
"RTN","PRCAWO1",77,0)
 ;
"RTN","PRCAWO1",78,0)
 ; Now Create the stub full of audit trails...
"RTN","PRCAWO1",79,0)
 ; Trans#(.01), Trans Status(4), Brief Comment(5.02), Comments(41), 
"RTN","PRCAWO1",80,0)
 ; Inc. Trans Flag(10), Trans Date(11), Trans Type(12), Proc. By(42)
"RTN","PRCAWO1",81,0)
 S (X,DINUM)=PRCAEN,DIC="^PRCA(433,",DIC(0)="L",DLAYGO=433
"RTN","PRCAWO1",82,0)
 K DD,DO D FILE^DICN K DIC,DLAYGO,DO
"RTN","PRCAWO1",83,0)
 ;
"RTN","PRCAWO1",84,0)
 ; Ensure the 'last transaction' counter is accurate
"RTN","PRCAWO1",85,0)
 S $P(^PRCA(433,0),U,3)=$O(^PRCA(433,"A"),-1)
"RTN","PRCAWO1",86,0)
 ;
"RTN","PRCAWO1",87,0)
 S DIE="^PRCA(433,",DR="[PRCA CREATE TRANS STUB]",DA=PRCAEN D ^DIE
"RTN","PRCAWO1",88,0)
 W:'$G(PRCANOPR) !,*7," NOTHING CHANGED !",!!
"RTN","PRCAWO1",89,0)
 S PRCAD("DELETE")="" K PRCANOPR,%,%DT,%X,%Y
"RTN","PRCAWO1",90,0)
 Q
"RTN","PRCAWO1",91,0)
 ;======================SUBROUTINE LOCKF================================
"RTN","PRCAWO1",92,0)
LOCKF L @("+"_DIC_DA_"):1") I '$T W !,*7,"ANOTHER USER IS EDITING THIS ENTRY , TRY LATER.",! S PRCA("LOCK")=1
"RTN","PRCAWO1",93,0)
 Q  ;end of LOCKF
"RTN","PRCAWO1",94,0)
END K PRCA,PRCABN,PRCAEN,PRCAPREV,PRCATYPE,DIE,DIC,PRCAMF,PRCACC,A Q
"RTN","PRCAWO1",95,0)
 ;
"RTN","PRCAWO1",96,0)
ASKREV() ; Ask if Treasury reversal 315/DRF
"RTN","PRCAWO1",97,0)
 N DIR,DIRUT,DTOUT,DUOUT,X,Y
"RTN","PRCAWO1",98,0)
 S DIR(0)="YO",DIR("B")="NO"
"RTN","PRCAWO1",99,0)
 S DIR("A")="  Is this a TREASURY reversal "
"RTN","PRCAWO1",100,0)
 W ! D ^DIR
"RTN","PRCAWO1",101,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1 I $G(GOTBILL) S RCDPGQ=1    ; account profile listman quit flag  *315
"RTN","PRCAWO1",102,0)
 Q Y
"RTN","PRCAWREA")
0^61^B21495612^B10933866
"RTN","PRCAWREA",1,0)
PRCAWREA ;WASH-ISC@ALTOONA,PA/TJK-RE-ESTABLISH BILL ;7/24/96  2:35 PM
"RTN","PRCAWREA",2,0)
V ;;4.5;Accounts Receivable;**16,49,153,315**;Mar 20, 1995;Build 67
"RTN","PRCAWREA",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCAWREA",4,0)
 ;;Select bill to make active, cancellation, suspended, coll/clos or write-off
"RTN","PRCAWREA",5,0)
 N DA,DIC,DIE,I,PRCABN,PRCATAMT,PRCAEN,PRCA,PRCAWO,PRCAPB,PRCATYPE,PRCATY,X,Y,FMSNUM,FMSAMT,PRCASTAT
"RTN","PRCAWREA",6,0)
 D CKSITE^PRCAUDT I '$D(PRCA("CKSITE")) W !,"Your site is not defined." G EXIT
"RTN","PRCAWREA",7,0)
 K DIC,DA S PRCAWO="," F I=109,240,111,108 S PRCAWO=$G(PRCAWO)_$O(^PRCA(430.3,"AC",I,0))_","
"RTN","PRCAWREA",8,0)
 I $G(PRCAWO)']"" W !,"Transaction Types not defined, please contact IRM." G EXIT
"RTN","PRCAWREA",9,0)
 S DIC("S")="I $P(^(0),U,2)'=26,"""_PRCAWO_"""[("",""_$P(^(0),U,8)_"","")" D BILLN^PRCAUTL G:$G(PRCABN)="" EXIT
"RTN","PRCAWREA",10,0)
 ;
"RTN","PRCAWREA",11,0)
APJ ; Entry point from the ENAP entry point (below) for the Account Profile screen  *315
"RTN","PRCAWREA",12,0)
 ;
"RTN","PRCAWREA",13,0)
 L +^PRCA(430,PRCABN):1 I '$T W !!,*7,"ANOTHER USER IS EDITING THIS BILL" G EXIT
"RTN","PRCAWREA",14,0)
 S PRCAPB=$G(^PRCA(430,PRCABN,7)),PRCASTAT=$P(^PRCA(430,PRCABN,0),U,8)
"RTN","PRCAWREA",15,0)
 S PRCATAMT=0 F I=1:1:5 S PRCATAMT=PRCATAMT+$P(PRCAPB,U,I)
"RTN","PRCAWREA",16,0)
 I PRCATAMT=0&('$$ACCK^PRCAACC(PRCABN)) D  G EXIT
"RTN","PRCAWREA",17,0)
  .W !!,*7,"A bill with ZERO dollars CANNOT BE RE-ESTABLISHED."
"RTN","PRCAWREA",18,0)
  .W !!,"Create a new bill."
"RTN","PRCAWREA",19,0)
  .L -^PRCA(430,PRCABN)       ; *315 bug fix - unlock the bill before exit
"RTN","PRCAWREA",20,0)
  .Q
"RTN","PRCAWREA",21,0)
 S FMSAMT=PRCATAMT
"RTN","PRCAWREA",22,0)
 I PRCATAMT=0 D AMT I PRCATAMT'>0 W !!,"Sorry, no bill amount entered!" L -^PRCA(430,PRCABN) G EXIT    ; *315 unlock bill
"RTN","PRCAWREA",23,0)
 D SETTR^PRCAUTL,UPCALM^PRCAWO,PATTR^PRCAUTL
"RTN","PRCAWREA",24,0)
 S PRCATYPE=$S($P(^PRCA(430,PRCABN,0),"^",8)=$O(^PRCA(430.3,"AC",240,0)):$O(^PRCA(430.3,"AC",18,0)),1:$O(^PRCA(430.3,"AC",250,0)))
"RTN","PRCAWREA",25,0)
 K DIC,DIE,DR,DA S (DIC,DIE)="^PRCA(433,",DA=PRCAEN,DR="[PRCA RE-ESTABLISH WRITE-OFF]" D ^DIE K DIC,DA,DIE,DR
"RTN","PRCAWREA",26,0)
 S PRCA("SDT")=DT,PRCA("STATUS")=$O(^PRCA(430.3,"AC",102,0)) D UPSTATS^PRCAUT2
"RTN","PRCAWREA",27,0)
 S $P(^PRCA(433,PRCAEN,4,$O(^PRCA(433,PRCAEN,4,0)),0),U,5)=PRCATAMT
"RTN","PRCAWREA",28,0)
 S $P(^PRCA(433,PRCAEN,0),U,4)=2 L -^PRCA(430,PRCABN)
"RTN","PRCAWREA",29,0)
 W !!,*7,?5,$P(^PRCA(430,PRCABN,0),U,1)," is in the ",$P(^PRCA(430.3,$P(^PRCA(430,PRCABN,0),U,8),0),U,1)," status for $",$P(^PRCA(433,PRCAEN,1),U,5)
"RTN","PRCAWREA",30,0)
 I $P(^PRCA(430,PRCABN,0),U,8)=$O(^PRCA(430.3,"AC",102,"")) D PREPAY^RCBEPAYP(PRCABN)
"RTN","PRCAWREA",31,0)
 I FMSAMT>0,PRCASTAT'=40,'$$ACCK^PRCAACC(PRCABN) D
"RTN","PRCAWREA",32,0)
  .S FMSNUM=$P($G(^PRCA(430,PRCABN,11)),U,22),MOD=1
"RTN","PRCAWREA",33,0)
  .I FMSNUM="" S FMSNUM=$$ENUM^RCMSNUM,MOD=0
"RTN","PRCAWREA",34,0)
  .D MODWR^PRCAFWO(PRCABN,FMSAMT,FMSNUM,PRCAEN,MOD)
"RTN","PRCAWREA",35,0)
  .Q
"RTN","PRCAWREA",36,0)
EXIT Q
"RTN","PRCAWREA",37,0)
AMT ;
"RTN","PRCAWREA",38,0)
 ;;Ask for amount to be re-established
"RTN","PRCAWREA",39,0)
 N Y
"RTN","PRCAWREA",40,0)
AMTE R !!,"Enter Re-Establish Amount: ",Y:DTIME I '$T!(Y["^") S Y=0 G AMTQ
"RTN","PRCAWREA",41,0)
 I Y="" W !,*7,"The amount is required.  Enter ""^"" to exit!",!
"RTN","PRCAWREA",42,0)
 I Y["?"!(Y'?.N.1".".2N)!(Y>999999.99)!(Y<.01) D AMTH G AMTE
"RTN","PRCAWREA",43,0)
AMTQ S PRCATAMT=+Y I Y>0 S PRCAPB=PRCATAMT_"^^^^^",$P(^PRCA(430,PRCABN,7),U,1)=Y,$P(^PRCA(430,PRCABN,2,$O(^PRCA(430,PRCABN,2,0)),0),U,2)=PRCATAMT
"RTN","PRCAWREA",44,0)
 Q
"RTN","PRCAWREA",45,0)
AMTH W !,"Enter in an amount from .01 to 999999.99, 2 decimal digits"
"RTN","PRCAWREA",46,0)
 W !!,"The bill must have an amount inorder to be re-established."
"RTN","PRCAWREA",47,0)
 W !,"This amount will be the principal balance of the bill."
"RTN","PRCAWREA",48,0)
 Q
"RTN","PRCAWREA",49,0)
 ;
"RTN","PRCAWREA",50,0)
ENAP(PRCABN) ; Entry point for Re-Establish bill from the Account Profile screen - *315
"RTN","PRCAWREA",51,0)
 ; originally called from REESTAB^RCDPAPL1.  PRCABN is the internal bill# and is required.
"RTN","PRCAWREA",52,0)
 ;
"RTN","PRCAWREA",53,0)
 N PG,PRS,I,PRCAWO,PRCATY,PRCA,PRCATAMT,PRCAEN,PRCAPB,PRCATYPE,PRCASTAT,FMSNUM,FMSAMT,MOD
"RTN","PRCAWREA",54,0)
 N DA,DIC,DIE,DR,X,Y
"RTN","PRCAWREA",55,0)
 ;
"RTN","PRCAWREA",56,0)
 ; set other variables related to the bill
"RTN","PRCAWREA",57,0)
 S PG=$G(^PRCA(430,PRCABN,0))
"RTN","PRCAWREA",58,0)
 S PRCATY=$P(PG,U,2)                                    ; ar category ien
"RTN","PRCAWREA",59,0)
 S PRCA("SEG")=$S(+$P(PG,U,21)>240:$P(PG,U,21),1:"")    ; segment - used in the input template
"RTN","PRCAWREA",60,0)
 S PRCA("STATUS")=$P(PG,U,8)                            ; current status of the bill
"RTN","PRCAWREA",61,0)
 S PRCA("APPR")=$P(PG,U,18)                             ; appropriation symbol
"RTN","PRCAWREA",62,0)
 ;
"RTN","PRCAWREA",63,0)
 ; get site stuff
"RTN","PRCAWREA",64,0)
 S PRS=+$P($G(^RC(342,1,0)),U,1)       ; main AR site
"RTN","PRCAWREA",65,0)
 S PRCA("SITE")=+$$GET1^DIQ(4,PRS,99)  ; station#
"RTN","PRCAWREA",66,0)
 I PRCA("SITE") S PRCA("CKSITE")=""    ; station# check flag
"RTN","PRCAWREA",67,0)
 ;
"RTN","PRCAWREA",68,0)
 ; build a string of valid internal status ien's (WRITE-OFF, SUSPENDED, CANCELLATION, COLLECTED/CLOSED)
"RTN","PRCAWREA",69,0)
 S PRCAWO="," F I=109,240,111,108 S PRCAWO=PRCAWO_$O(^PRCA(430.3,"AC",I,0))_","
"RTN","PRCAWREA",70,0)
 I '$F(PRCAWO,","_PRCA("STATUS")_",") D  G ENAPX
"RTN","PRCAWREA",71,0)
 . W !,"The Re-Establish action is not available for this bill because the current"
"RTN","PRCAWREA",72,0)
 . W !,"AR status of this bill is "_$$GET1^DIQ(430,PRCABN,8)_"."
"RTN","PRCAWREA",73,0)
 . W !,"Valid statuses are WRITE-OFF, SUSPENDED, CANCELLATION, or COLLECTED/CLOSED."
"RTN","PRCAWREA",74,0)
 . Q
"RTN","PRCAWREA",75,0)
 ;
"RTN","PRCAWREA",76,0)
 I PRCATY=26 D  G ENAPX
"RTN","PRCAWREA",77,0)
 . W !,"The Re-Establish action is not available for this bill because the current"
"RTN","PRCAWREA",78,0)
 . W !,"AR category of this bill is "_$$GET1^DIQ(430,PRCABN,2)_".  This is the only one not allowed."
"RTN","PRCAWREA",79,0)
 . Q
"RTN","PRCAWREA",80,0)
 ;
"RTN","PRCAWREA",81,0)
 G APJ       ; jump into the routine at the proper point
"RTN","PRCAWREA",82,0)
 ;
"RTN","PRCAWREA",83,0)
ENAPX ;
"RTN","PRCAWREA",84,0)
 Q
"RTN","PRCAWREA",85,0)
 ;
"RTN","PRCAXP")
0^1^B23941725^B12869783
"RTN","PRCAXP",1,0)
PRCAXP ;WASH-ISC@ALTOONA,PA/TJK-PRINT RX-COPAY EXEMPTION REPORT ;10/23/93  10:01 AM
"RTN","PRCAXP",2,0)
V ;;4.5;Accounts Receivable;**315**;Mar 20, 1995;Build 67
"RTN","PRCAXP",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCAXP",4,0)
 NEW BEG,END,%DT,%ZIS,IOP,POP,Y,%
"RTN","PRCAXP",5,0)
BEG W ! D NOW^%DTC S %DT(0)=-%,%DT="AEXP",%DT("A")="Start Date: " D ^%DT G:Y<0 Q S BEG=Y
"RTN","PRCAXP",6,0)
 S %DT="AEX",%DT("A")="     End Date: ",%DT("B")="T" D ^%DT G:Y<0 Q S END=Y
"RTN","PRCAXP",7,0)
 W !!,"You will need a 132 column printer for this report!",!
"RTN","PRCAXP",8,0)
 W ! K IO("Q") S %ZIS="MQ" D ^%ZIS G:POP Q
"RTN","PRCAXP",9,0)
 I $D(IO("Q")) S ZTRTN="DQ^PRCAXP",ZTSAVE("BEG")="",ZTSAVE("END")="" D ^%ZTLOAD G Q
"RTN","PRCAXP",10,0)
 U IO
"RTN","PRCAXP",11,0)
DQ ;ENTRY POINT FROM TASK MANAGER FOR PRINTING REPORT
"RTN","PRCAXP",12,0)
 NEW Y,TODAY,PG,I,PRCA,PRCAHDR,BEGPR,ENDPR,TRDATE,TRNO,T0,T1,BILL,TRAMT,OUT,PTNM,DFN,CONTINUE
"RTN","PRCAXP",13,0)
 NEW ID,REC,TTYPE,VA,PTOT,PGTOT,TOT,LAST,BLNO,EFDT,DTH
"RTN","PRCAXP",14,0)
COMPUTE ;SETS TEMPORARY GLOBAL FOR PRINTING
"RTN","PRCAXP",15,0)
 K ^TMP($J) S TRDATE=BEG-1,(TOT("D"),TOT("E"),TOT("I"))=0,U="^"
"RTN","PRCAXP",16,0)
 F  S TRDATE=$O(^PRCA(433,"ACE",TRDATE)) G PRINT:'TRDATE!($P(TRDATE,".")>END) S TRNO=0 D
"RTN","PRCAXP",17,0)
 .F  S TRNO=$O(^PRCA(433,"ACE",TRDATE,TRNO)) Q:'TRNO  D
"RTN","PRCAXP",18,0)
 ..S T0=$G(^PRCA(433,TRNO,0)),T1=$G(^(1)) Q:T0=""
"RTN","PRCAXP",19,0)
 ..S BLNO=$P(T0,U,2),TRAMT=$P(T1,U,5),TTYPE=$S($P(T1,U,2)=35:"D",$P(T1,U,2)=1:"I",1:"E"),EFDT=$P(T1,U,1)  ;*315 START
"RTN","PRCAXP",20,0)
 ..;S DFN=$P(^PRCA(430,BLNO,0),U,9),BILL=$P(^(0),U)
"RTN","PRCAXP",21,0)
 ..S P0=$G(^PRCA(430,BLNO,0)),DFN=$P(P0,U,9),BILL=$P(P0,U),IBN=0
"RTN","PRCAXP",22,0)
 ..S DFN=$P(^RCD(340,+DFN,0),U) Q:'DFN!(DFN'["DPT(")  S DFN=+DFN
"RTN","PRCAXP",23,0)
 ..D DEM^VADPT S PTNM=VADM(1),ID=$E(PTNM,1)_VA("BID") S DTH=$S(+VADM(6):"*",1:"") D KVAR^VADPT
"RTN","PRCAXP",24,0)
 ..D FNDBIL(TRNO,TTYPE)
"RTN","PRCAXP",25,0)
PRINT ;PRINT REPORT
"RTN","PRCAXP",26,0)
 S LAST=""
"RTN","PRCAXP",27,0)
 S Y=BEG X ^DD("DD") S BEGPR=Y
"RTN","PRCAXP",28,0)
 S Y=END X ^DD("DD") S ENDPR=Y
"RTN","PRCAXP",29,0)
 S Y=DT X ^DD("DD") S TODAY=Y,PG=0 D HEAD
"RTN","PRCAXP",30,0)
 I '$D(^TMP($J)) W !!,"NO EXEMPTIONS FOR THIS TIME PERIOD" G Q
"RTN","PRCAXP",31,0)
 S PTNM="" F  S PTNM=$O(^TMP($J,PTNM)) Q:PTNM=""!($D(OUT))  D
"RTN","PRCAXP",32,0)
 .S DFN=0 F  S DFN=$O(^TMP($J,PTNM,DFN)) Q:'DFN!($D(OUT))  S CONTINUE="",PTOT=0 D  I PTOT W !,?115,"-------------",!,?115,$J(+PTOT,13,2),!
"RTN","PRCAXP",33,0)
 ..S BILL="" F  S BILL=$O(^TMP($J,PTNM,DFN,BILL)) Q:BILL=""!($D(OUT))  D
"RTN","PRCAXP",34,0)
 ...S TRNO=0 F  S TRNO=$O(^TMP($J,PTNM,DFN,BILL,TRNO)) Q:TRNO=""!($D(OUT))  D   ;*315 START
"RTN","PRCAXP",35,0)
 ....S CONTINUE=""
"RTN","PRCAXP",36,0)
 ....S RX=0 F  S RX=$O(^TMP($J,PTNM,DFN,BILL,TRNO,RX)) Q:'RX!($D(OUT))  D
"RTN","PRCAXP",37,0)
 .....S REC=^TMP($J,PTNM,DFN,BILL,TRNO,RX),TRAMT=$P(REC,U,1) W ! W:$D(CONTINUE) $P(REC,"^",4),$E(PTNM,1,25)," ",?28,$P(REC,U,2),?35,BILL,?48,TRNO,?56,$P(REC,U,3)
"RTN","PRCAXP",38,0)
 .....W ?60,$S(RX=1:"",1:$P(REC,U,5)) W ?70,$E($P(REC,U,6),1,17),?90,$P(REC,U,7),?100,$P(REC,U,8) I $D(CONTINUE),TRNO'=LAST W ?115,$J(TRAMT,13,2)
"RTN","PRCAXP",39,0)
 .....I $D(CONTINUE),TRNO'=LAST S PTOT=PTOT+TRAMT,PGTOT=+$G(PGTOT)+TRAMT,TOT($S($P(REC,U,3)]"":$P(REC,U,3),1:"UNK"))=$G(TOT($S($P(REC,U,3)]"":$P(REC,U,3),1:"UNK")))+REC  ;*315 END
"RTN","PRCAXP",40,0)
 .....K CONTINUE S LAST=TRNO D HEAD:($Y+4)>IOSL
"RTN","PRCAXP",41,0)
 G:$D(OUT) Q
"RTN","PRCAXP",42,0)
 W !,"* -indicates patient is deceased"
"RTN","PRCAXP",43,0)
 D HEAD:($Y+7)>IOSL
"RTN","PRCAXP",44,0)
 W !!,"EXEMPTION TYPES AND TOTALS"
"RTN","PRCAXP",45,0)
 W !!,"D=DECREASE ADJUSTMENT ",?35,$J(TOT("D"),13,2),!,"E=INTEREST/ADMIN EXEMPTION ",?35,$J(TOT("E"),13,2),!,"I=INCREASE ADJUSTMENT FOR REFUND ",?35,$J(TOT("I"),13,2)
"RTN","PRCAXP",46,0)
 I $D(TOT("UNK")) W !,"UNK=EXEMPTION TYPE UNKNOWN",?35,$J(TOT("UNK"),13,2)
"RTN","PRCAXP",47,0)
 W !,?35,"-------------",!,?35,$J(PGTOT,13,2)
"RTN","PRCAXP",48,0)
 K BEG,END,IO("Q") ;K ^TMP($J) 
"RTN","PRCAXP",49,0)
Q D ^%ZISC Q
"RTN","PRCAXP",50,0)
 ;
"RTN","PRCAXP",51,0)
FNDBIL(TRNO,TTYPE) ;
"RTN","PRCAXP",52,0)
 N FOUND,CNT,IBN,IB0,RR,RX,DRUG,FLDT,EDT,EFFDT,IBAMT,IBAS,ARTRN
"RTN","PRCAXP",53,0)
 S (IBN,FOUND,CNT,RX)=0,EDT=""
"RTN","PRCAXP",54,0)
 F  S IBN=$O(^IB("ABIL",BILL,IBN)) Q:IBN=""  D
"RTN","PRCAXP",55,0)
 .S IB0=^IB(IBN,0),RR=$P(IB0,U,4),EDT=$P(IB0,U,17),IBAMT=$P(IB0,U,7),ARTRN=$P(IB0,U,12)
"RTN","PRCAXP",56,0)
 .I EDT="" S EDT=EFDT
"RTN","PRCAXP",57,0)
 .I EDT="" S EDT=TRDATE
"RTN","PRCAXP",58,0)
 .I ARTRN=TRNO S FOUND=1 D DATA Q
"RTN","PRCAXP",59,0)
 .I 'FOUND,ARTRN="" D DATA
"RTN","PRCAXP",60,0)
 I CNT=0,RX=0 D
"RTN","PRCAXP",61,0)
 .I EDT="" S EDT=EFDT
"RTN","PRCAXP",62,0)
 .I EDT="" S EDT=TRDATE
"RTN","PRCAXP",63,0)
 .S EFFDT=$$FMTE^XLFDT(EDT,"2DZ")
"RTN","PRCAXP",64,0)
 .D SET(1)
"RTN","PRCAXP",65,0)
 Q
"RTN","PRCAXP",66,0)
 ;
"RTN","PRCAXP",67,0)
DATA ; SET UP DATA
"RTN","PRCAXP",68,0)
 N RIEN,RFL
"RTN","PRCAXP",69,0)
 S CNT=CNT+1
"RTN","PRCAXP",70,0)
 S RIEN=+$P(RR,"52:",2),RFL=+$P(RR,":",3)
"RTN","PRCAXP",71,0)
 S DRUG=$P($$GET1^PSODI(52,RIEN,6,"E"),U,2)
"RTN","PRCAXP",72,0)
 S RX=$P($$GET1^PSODI(52,RIEN,.01,"E"),U,2)
"RTN","PRCAXP",73,0)
 I RFL>0 S FLDT=$P($$GET1^PSODI(52.1,RFL_","_RIEN,.01,"I"),U,2)
"RTN","PRCAXP",74,0)
 I RFL=0 S FLDT=$P($$GET1^PSODI(52,RIEN,22,"I"),U,2)
"RTN","PRCAXP",75,0)
 S EFFDT=$$FMTE^XLFDT(EDT,"2DZ"),FLDT=$$FMTE^XLFDT(FLDT,"2DZ")
"RTN","PRCAXP",76,0)
 I $D(^TMP($J,PTNM,DFN,BILL,TRNO,RX)) Q
"RTN","PRCAXP",77,0)
 D SET(RX)
"RTN","PRCAXP",78,0)
 Q
"RTN","PRCAXP",79,0)
 ;
"RTN","PRCAXP",80,0)
SET(RX) ;
"RTN","PRCAXP",81,0)
 S ^TMP($J,PTNM,DFN,BILL,TRNO,RX)=TRAMT_U_ID_U_TTYPE_U_DTH_U_$G(RX)_U_$G(DRUG)_U_$G(FLDT)_U_$G(EFFDT)_U_$G(ARTRN)_U_$G(IBAS)_U_$G(IBN)  ;*315 END
"RTN","PRCAXP",82,0)
 Q
"RTN","PRCAXP",83,0)
 ;
"RTN","PRCAXP",84,0)
HEAD ;PRINTS HEADING
"RTN","PRCAXP",85,0)
 I PG,$E(IOST,1,2)["C-" D SCR Q:$D(OUT)
"RTN","PRCAXP",86,0)
 W @IOF S PG=PG+1
"RTN","PRCAXP",87,0)
 W !!,"Pg. "_PG,?130-$L(TODAY),TODAY
"RTN","PRCAXP",88,0)
 S PRCAHDR="MEDICATION CO-PAY EXEMPTION REPORT",PRCA="",$P(PRCA,"*",(130-$L(PRCAHDR))\2)="*",PRCAHDR=PRCA_" "_PRCAHDR_" "_PRCA
"RTN","PRCAXP",89,0)
 W !,PRCAHDR,!,?53,BEGPR,"-",ENDPR
"RTN","PRCAXP",90,0)
 W !,?35,"BILL",?48,"TRAN.",?56,"EXP",?90,"FILL/",?100,"EFFECTIVE"  ;*315 START
"RTN","PRCAXP",91,0)
 W !,"PATIENT",?28,"ID",?35,"NUMBER",?48,"NUMBER",?56,"TYP",?60,"RX",?70,"DRUG NAME",?90,"REFL DT",?102,"DATE",?120,"AMOUNT"  ;*315 END
"RTN","PRCAXP",92,0)
 S PRCA="",$P(PRCA,"-",132)="" W !,PRCA
"RTN","PRCAXP",93,0)
 S CONTINUE=""
"RTN","PRCAXP",94,0)
 Q
"RTN","PRCAXP",95,0)
 ;
"RTN","PRCAXP",96,0)
SCR ;
"RTN","PRCAXP",97,0)
 Q:$E(IOST,1,2)'["C-"
"RTN","PRCAXP",98,0)
 N DIR,YY,DIRUT,DUOUT,DTOUT,DIROUT,X,Y
"RTN","PRCAXP",99,0)
 F YY=$Y:1:(IOSL-2) W !
"RTN","PRCAXP",100,0)
 S DIR(0)="E" D ^DIR I $D(DIRUT)!($D(DTOUT)) S OUT=1
"RTN","PRCAXP",101,0)
 Q
"RTN","RCBEADJ")
0^26^B100902419^B77125147
"RTN","RCBEADJ",1,0)
RCBEADJ ;WISC/RFJ-adjustment ;Jun 06, 2014@19:11:19
"RTN","RCBEADJ",2,0)
 ;;4.5;Accounts Receivable;**169,172,204,173,208,233,298,301,315**;Mar 20, 1995;Build 67
"RTN","RCBEADJ",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCBEADJ",4,0)
 Q
"RTN","RCBEADJ",5,0)
 ;
"RTN","RCBEADJ",6,0)
 ;
"RTN","RCBEADJ",7,0)
DECREASE ;  menu option: create a decrease adjustment
"RTN","RCBEADJ",8,0)
 D ADJUST("DECREASE")
"RTN","RCBEADJ",9,0)
 Q
"RTN","RCBEADJ",10,0)
 ;
"RTN","RCBEADJ",11,0)
 ;
"RTN","RCBEADJ",12,0)
INCREASE ;  menu option: create an increase adjustment
"RTN","RCBEADJ",13,0)
 D ADJUST("INCREASE")
"RTN","RCBEADJ",14,0)
 Q
"RTN","RCBEADJ",15,0)
 ;
"RTN","RCBEADJ",16,0)
ADJUST(RCBETYPE,RCEDI) ;  create an adjustment
"RTN","RCBEADJ",17,0)
 ;  rcbetype = INCREASE for increase or DECREASE for decrease
"RTN","RCBEADJ",18,0)
 ;  rcedi = the ien of the bill selected via the EDI Worklist;ien of 
"RTN","RCBEADJ",19,0)
 ;    XX      the ERA entry or null/undefined if bill should be selected
"RTN","RCBEADJ",20,0)
 I '$G(GOTBILL) N RCBILLDA  ;PRCA*4.5*315 If entering from worklist
"RTN","RCBEADJ",21,0)
 F  D  Q:RCBILLDA<0!$G(RCEDI)!$G(GOTBILL)
"RTN","RCBEADJ",22,0)
 .   K RCTRANDA,RCLIST,RCTRREV
"RTN","RCBEADJ",23,0)
 .   ;
"RTN","RCBEADJ",24,0)
 .   ;  select a bill
"RTN","RCBEADJ",25,0)
 .   I '$G(GOTBILL) S RCBILLDA=$S('$G(RCEDI):$$GETABILL^RCBEUBIL,1:+RCEDI)  ;PRCA*4.5*315
"RTN","RCBEADJ",26,0)
 .   I RCBILLDA<1 Q
"RTN","RCBEADJ",27,0)
 .   I $D(^PRCA(430,"TCSP",RCBILLDA)),(RCBETYPE="INCREASE") D  ;PRCA*4.5*315/DRF
"RTN","RCBEADJ",28,0)
 ..    S RCTRREV=$$ASKREV()
"RTN","RCBEADJ",29,0)
 ..    W !
"RTN","RCBEADJ",30,0)
 .   I $D(^PRCA(430,"TCSP",RCBILLDA)),(RCBETYPE="DECREASE") S %=$$ASKCM Q:(%'=1)     ; prca*4.5*301 & *315
"RTN","RCBEADJ",31,0)
 .   ;
"RTN","RCBEADJ",32,0)
 .   ;  adjust the bill
"RTN","RCBEADJ",33,0)
 .   D ADJBILL(RCBETYPE,RCBILLDA,$P($G(RCEDI),";",2))
"RTN","RCBEADJ",34,0)
 Q
"RTN","RCBEADJ",35,0)
 ;
"RTN","RCBEADJ",36,0)
ADJBILL(RCBETYPE,RCBILLDA,RCEDIWL) ;  adjust a bill
"RTN","RCBEADJ",37,0)
 ; RCEDIWL = ien of ERA entry if called from worklist
"RTN","RCBEADJ",38,0)
 N RCAMOUNT,RCBALANC,RCDATA7,RCLIST,RCONTADJ,RCTRANDA,TOTALCAL,TOTALSTO,I,X,Y
"RTN","RCBEADJ",39,0)
 ;  lock the bill
"RTN","RCBEADJ",40,0)
 L +^PRCA(430,RCBILLDA):5 E  W !,"ANOTHER USER IS CURRENTLY WORKING WITH THIS BILL." Q
"RTN","RCBEADJ",41,0)
 ;
"RTN","RCBEADJ",42,0)
 ;  show data for the bill
"RTN","RCBEADJ",43,0)
 D SHOWBILL^RCWROFF1(RCBILLDA)
"RTN","RCBEADJ",44,0)
 ;
"RTN","RCBEADJ",45,0)
 ;  check the balance of the bill
"RTN","RCBEADJ",46,0)
 W !!,"Checking the bill's balance ..."
"RTN","RCBEADJ",47,0)
 S RCBALANC=$$OUTOFBAL^RCBDBBAL(RCBILLDA)
"RTN","RCBEADJ",48,0)
 I RCBALANC="" W " IN Balance!"
"RTN","RCBEADJ",49,0)
 ;
"RTN","RCBEADJ",50,0)
 ;  out of balance, ask to fix it
"RTN","RCBEADJ",51,0)
 I RCBALANC'="" D  I RCBILLDA<1 D UNLOCK Q
"RTN","RCBEADJ",52,0)
 .   S TOTALCAL=$P(RCBALANC,"^")+$P(RCBALANC,"^",2)+$P(RCBALANC,"^",3)+$P(RCBALANC,"^",4)+$P(RCBALANC,"^",5)
"RTN","RCBEADJ",53,0)
 .   S RCDATA7=$G(^PRCA(430,RCBILLDA,7))
"RTN","RCBEADJ",54,0)
 .   S TOTALSTO=$P(RCDATA7,"^")+$P(RCDATA7,"^",2)+$P(RCDATA7,"^",3)+$P(RCDATA7,"^",4)+$P(RCDATA7,"^",5)
"RTN","RCBEADJ",55,0)
 .   W " OUT of Balance!"
"RTN","RCBEADJ",56,0)
 .   W !!,"                  BALANCE:",$J("Calculated",12),$J("Stored",12)
"RTN","RCBEADJ",57,0)
 .   W !,"                  ------- ",$J("------------",12),$J("------------",12)
"RTN","RCBEADJ",58,0)
 .   W !,"        Principal Balance:",$J($P(RCBALANC,"^",1),12,2),$J($P(RCDATA7,"^",1),12,2)
"RTN","RCBEADJ",59,0)
 .   I +$P(RCBALANC,"^",1)'=+$P(RCDATA7,"^",1) W "  <<-- OUT OF BALANCE"
"RTN","RCBEADJ",60,0)
 .   W !,"         Interest Balance:",$J($P(RCBALANC,"^",2),12,2),$J($P(RCDATA7,"^",2),12,2)
"RTN","RCBEADJ",61,0)
 .   I +$P(RCBALANC,"^",2)'=+$P(RCDATA7,"^",2) W "  <<-- OUT OF BALANCE"
"RTN","RCBEADJ",62,0)
 .   W !,"            Admin Balance:",$J($P(RCBALANC,"^",3),12,2),$J($P(RCDATA7,"^",3),12,2)
"RTN","RCBEADJ",63,0)
 .   I +$P(RCBALANC,"^",3)'=+$P(RCDATA7,"^",3) W "  <<-- OUT OF BALANCE"
"RTN","RCBEADJ",64,0)
 .   W !,"               MF Balance:",$J($P(RCBALANC,"^",4),12,2),$J($P(RCDATA7,"^",4),12,2)
"RTN","RCBEADJ",65,0)
 .   I +$P(RCBALANC,"^",4)'=+$P(RCDATA7,"^",4) W "  <<-- OUT OF BALANCE"
"RTN","RCBEADJ",66,0)
 .   W !,"               CC Balance:",$J($P(RCBALANC,"^",5),12,2),$J($P(RCDATA7,"^",5),12,2)
"RTN","RCBEADJ",67,0)
 .   I +$P(RCBALANC,"^",5)'=+$P(RCDATA7,"^",5) W "  <<-- OUT OF BALANCE"
"RTN","RCBEADJ",68,0)
 .   W !,"                  ------- ",$J("-------------",12),$J("-------------",12)
"RTN","RCBEADJ",69,0)
 .   W !,"                    TOTAL:",$J(TOTALCAL,12,2),$J(TOTALSTO,12,2)
"RTN","RCBEADJ",70,0)
 .   I +TOTALCAL'=+TOTALSTO W "  <<-- OUT OF BALANCE"
"RTN","RCBEADJ",71,0)
 .   ;
"RTN","RCBEADJ",72,0)
 .   ;  ask to fix the balances
"RTN","RCBEADJ",73,0)
 .   S Y=$$ASKFIX I Y'=1 W !,"  NOTE: You must fix the Balance Discrepancy before processing an adjustment!" S RCBILLDA=0 Q
"RTN","RCBEADJ",74,0)
 .   ;
"RTN","RCBEADJ",75,0)
 .   ;  fix it
"RTN","RCBEADJ",76,0)
 .   S $P(RCDATA7,"^",1)=+$P(RCBALANC,"^",1) ; principal
"RTN","RCBEADJ",77,0)
 .   S $P(RCDATA7,"^",2)=+$P(RCBALANC,"^",2) ; interest
"RTN","RCBEADJ",78,0)
 .   S $P(RCDATA7,"^",3)=+$P(RCBALANC,"^",3) ; admin
"RTN","RCBEADJ",79,0)
 .   S $P(RCDATA7,"^",4)=+$P(RCBALANC,"^",4) ; marshal fee
"RTN","RCBEADJ",80,0)
 .   S $P(RCDATA7,"^",5)=+$P(RCBALANC,"^",5) ; court cost
"RTN","RCBEADJ",81,0)
 .   S $P(^PRCA(430,RCBILLDA,7),"^",1,5)=$P(RCDATA7,"^",1,5)
"RTN","RCBEADJ",82,0)
 .   ;
"RTN","RCBEADJ",83,0)
 .   W !,"  Balance Discrepancy FIXED!"
"RTN","RCBEADJ",84,0)
 ;
"RTN","RCBEADJ",85,0)
 ;  if the principal balance is zero, do not allow it to be adjusted
"RTN","RCBEADJ",86,0)
 ;  ask to close/cancel it
"RTN","RCBEADJ",87,0)
 I RCBETYPE="DECREASE",'$G(^PRCA(430,RCBILLDA,7)) W !!,"Note: This bill has NO PRINCIPAL BALANCE to decrease !" D INTADMIN(RCBILLDA),UNLOCK Q
"RTN","RCBEADJ",88,0)
 ;
"RTN","RCBEADJ",89,0)
 ; If entry is from EDI Lockbox worklist, display total adjustments in ERA
"RTN","RCBEADJ",90,0)
 N AP D
"RTN","RCBEADJ",91,0)
 .N BILL,EOB,ERA,SEQ S ERA="",AP=0
"RTN","RCBEADJ",92,0)
 .F  S ERA=$O(^RCY(344.4,"AP",1,ERA)) Q:'ERA  D  Q:AP
"RTN","RCBEADJ",93,0)
 ..S SEQ=0
"RTN","RCBEADJ",94,0)
 ..F  S SEQ=$O(^RCY(344.4,"AP",1,ERA,SEQ)) Q:'SEQ  D  Q:AP
"RTN","RCBEADJ",95,0)
 ...S EOB=$P($G(^RCY(344.4,ERA,1,SEQ,0)),U,2) Q:'EOB
"RTN","RCBEADJ",96,0)
 ...S:$P($G(^IBM(361.1,EOB,0)),U)=RCBILLDA AP=1 ;IA #4051
"RTN","RCBEADJ",97,0)
 ;
"RTN","RCBEADJ",98,0)
 ;  Ask to enter transaction even though it is marked for autopost PRCA*4.5*298
"RTN","RCBEADJ",99,0)
 I RCBETYPE="DECREASE",AP S Y=$$ASKAUPO() I Y'=1 W !,"Exiting bill adjustment." D UNLOCK Q
"RTN","RCBEADJ",100,0)
 ;
"RTN","RCBEADJ",101,0)
 ;  ask to enter adjustment amount
"RTN","RCBEADJ",102,0)
 S RCAMOUNT=$$AMOUNT(RCBILLDA,RCBETYPE)
"RTN","RCBEADJ",103,0)
 I RCAMOUNT<0 D UNLOCK Q
"RTN","RCBEADJ",104,0)
 ;
"RTN","RCBEADJ",105,0)
 ;  if decrease, make negative
"RTN","RCBEADJ",106,0)
 I RCBETYPE="DECREASE" S RCAMOUNT=-RCAMOUNT
"RTN","RCBEADJ",107,0)
 ;
"RTN","RCBEADJ",108,0)
 ;  ask if it is a contract adjustment (45,46,47 added PRCA*4.5*315)/DRF)
"RTN","RCBEADJ",109,0)
 I RCBETYPE="DECREASE","^9^28^29^30^32^45^46^47^"[("^"_$P($G(^PRCA(430,RCBILLDA,0)),"^",2)_"^") S RCONTADJ=$$ASKCONT I RCONTADJ<0 D UNLOCK Q
"RTN","RCBEADJ",110,0)
 ;
"RTN","RCBEADJ",111,0)
 ;  show what the new transaction will look like
"RTN","RCBEADJ",112,0)
 S RCDATA7=$G(^PRCA(430,RCBILLDA,7))
"RTN","RCBEADJ",113,0)
 W !!,"If you process the transaction, the bill will look like:"
"RTN","RCBEADJ",114,0)
 W !,"Current Principal Balance: ",$J($P(RCDATA7,"^"),11,2)
"RTN","RCBEADJ",115,0)
 W !,"  NEW ",RCBETYPE," Adjustment: ",$J(RCAMOUNT,11,2)
"RTN","RCBEADJ",116,0)
 W !,"                           -----------"
"RTN","RCBEADJ",117,0)
 W !,"    NEW Principal Balance: ",$J($P(RCDATA7,"^")+RCAMOUNT,11,2)
"RTN","RCBEADJ",118,0)
 ;
"RTN","RCBEADJ",119,0)
 ;  ask to enter transaction
"RTN","RCBEADJ",120,0)
 S Y=$$ASKOK(RCBETYPE) I Y'=1 D UNLOCK Q
"RTN","RCBEADJ",121,0)
 ;
"RTN","RCBEADJ",122,0)
ADDADJ ;  add adjustment
"RTN","RCBEADJ",123,0)
 S RCTRANDA=$$INCDEC^RCBEUTR1(RCBILLDA,RCAMOUNT,"","","",$G(RCONTADJ))
"RTN","RCBEADJ",124,0)
 I 'RCTRANDA W !,"  *** W A R N I N G: Adjustment NOT Processed! ***" D UNLOCK Q
"RTN","RCBEADJ",125,0)
 I RCTRANDA W !,"  Adjustment Transaction: ",RCTRANDA," has been added."
"RTN","RCBEADJ",126,0)
 I RCTRANDA,'$G(RCEDIWL),(RCBETYPE="DECREASE"),$D(^PRCA(430,"TCSP",RCBILLDA)) D DECADJ^RCTCSPU(RCBILLDA,RCTRANDA) ;prca*4.5*301 add cs decrease adjustment
"RTN","RCBEADJ",127,0)
 I RCTRANDA,$G(RCTRREV)=0 S PRCABN=RCBILLDA D CSITRN^RCTCSPD5
"RTN","RCBEADJ",128,0)
 I RCTRANDA,$G(RCTRREV)=0,'$G(RCEDIWL),(RCBETYPE="INCREASE"),$D(^PRCA(430,"TCSP",RCBILLDA)) S PRCABN=RCBILLDA D INCADJ^RCTCSPU(RCBILLDA,RCTRANDA) ;PRCA*4.5*315/DRF add cs increase adjustment
"RTN","RCBEADJ",129,0)
 I $G(RCTRREV)=1 S PRCABN=RCBILLDA D CSITRY^RCTCSPD5
"RTN","RCBEADJ",130,0)
 I '$G(REFMS)&(DT>$$LDATE^RCRJR(DT)) S Y=$E($$FPS^RCAMFN01(DT,1),1,5)_"01" D DD^%DT W !!,"   * * * * Transmission will be held until "_Y_" * * * *"
"RTN","RCBEADJ",131,0)
 ;
"RTN","RCBEADJ",132,0)
 ;  ask to enter a comment
"RTN","RCBEADJ",133,0)
 W !!,"Enter a comment for the ",RCBETYPE," Adjustment:"
"RTN","RCBEADJ",134,0)
 S Y=$$EDIT433^RCBEUTRA(RCTRANDA,"41;")
"RTN","RCBEADJ",135,0)
 ;
"RTN","RCBEADJ",136,0)
 ;  ask to exempt interest and admin charges
"RTN","RCBEADJ",137,0)
 I RCBETYPE="DECREASE" D INTADMIN(RCBILLDA)
"RTN","RCBEADJ",138,0)
 ;
"RTN","RCBEADJ",139,0)
 ;  notification of subsequent payer bulletin
"RTN","RCBEADJ",140,0)
 S RCDATA7=$G(^PRCA(430,RCBILLDA,7)),X=0
"RTN","RCBEADJ",141,0)
 F I=1:1:5 S X=X+$P(RCDATA7,"^",I)
"RTN","RCBEADJ",142,0)
 I RCDATA7'="",'X D
"RTN","RCBEADJ",143,0)
 .   N PRCABN,PRCAEN,PRCAMT
"RTN","RCBEADJ",144,0)
 .   S PRCABN=RCBILLDA,PRCAEN=RCTRANDA,PRCAMT=+$P($G(^PRCA(433,RCTRANDA,1)),"^",5)
"RTN","RCBEADJ",145,0)
 .   D EOB^PRCADJ
"RTN","RCBEADJ",146,0)
 ;
"RTN","RCBEADJ",147,0)
 ;  unlock and ask the next bill to adjust
"RTN","RCBEADJ",148,0)
 D UNLOCK
"RTN","RCBEADJ",149,0)
 Q
"RTN","RCBEADJ",150,0)
 ;
"RTN","RCBEADJ",151,0)
 ;
"RTN","RCBEADJ",152,0)
UNLOCK ;  unlock bill and transaction
"RTN","RCBEADJ",153,0)
 L -^PRCA(430,RCBILLDA)
"RTN","RCBEADJ",154,0)
 I $G(RCTRANDA) L -^PRCA(433,RCTRANDA)
"RTN","RCBEADJ",155,0)
 Q
"RTN","RCBEADJ",156,0)
 ;
"RTN","RCBEADJ",157,0)
 ;
"RTN","RCBEADJ",158,0)
INTADMIN(RCBILLDA) ;  ask and adjust the interest and admin
"RTN","RCBEADJ",159,0)
 N RCAMOUNT,RCTRANDA,Y
"RTN","RCBEADJ",160,0)
 ;
"RTN","RCBEADJ",161,0)
 ;  check to see if there is interest and admin charges
"RTN","RCBEADJ",162,0)
 S RCAMOUNT=$G(^PRCA(430,RCBILLDA,7))
"RTN","RCBEADJ",163,0)
 I '$P(RCAMOUNT,"^",2),'$P(RCAMOUNT,"^",3),'$P(RCAMOUNT,"^",4),'$P(RCAMOUNT,"^",5) Q
"RTN","RCBEADJ",164,0)
 ;
"RTN","RCBEADJ",165,0)
 ;  only ask if there is no principal
"RTN","RCBEADJ",166,0)
 I RCAMOUNT Q
"RTN","RCBEADJ",167,0)
 ;
"RTN","RCBEADJ",168,0)
 W !!,"You have the option to automatically EXEMPT the interest"
"RTN","RCBEADJ",169,0)
 W !,"and administrative charges.  This will close the bill."
"RTN","RCBEADJ",170,0)
 S Y=$$ASKEXEMP I Y'=1 Q
"RTN","RCBEADJ",171,0)
 ;
"RTN","RCBEADJ",172,0)
 W !!,"Creating an EXEMPT transaction ..."
"RTN","RCBEADJ",173,0)
 S RCTRANDA=$$EXEMPT^RCBEUTR2(RCBILLDA,$P(RCAMOUNT,"^",2)_"^"_$P(RCAMOUNT,"^",3)_"^^"_$P(RCAMOUNT,"^",4)_"^"_$P(RCAMOUNT,"^",5))
"RTN","RCBEADJ",174,0)
 I 'RCTRANDA W !,"  *** W A R N I N G: EXEMPTION NOT Processed! ***" Q
"RTN","RCBEADJ",175,0)
 I RCTRANDA W !,"   Exempt Transaction: ",RCTRANDA," has been added."
"RTN","RCBEADJ",176,0)
INTC35B ;Check if CS5B entry needed for exempt transaction
"RTN","RCBEADJ",177,0)
 I RCTRANDA,'$G(RCEDIWL),(RCBETYPE="DECREASE"),$D(^PRCA(430,"TCSP",RCBILLDA)) D DECADJ^RCTCSPU(RCBILLDA,RCTRANDA) ;prca*4.5*301 add cs exempt
"RTN","RCBEADJ",178,0)
 I '$G(REFMS)&(DT>$$LDATE^RCRJR(DT)) S Y=$E($$FPS^RCAMFN01(DT,1),1,5)_"01" D DD^%DT W !!,"   * * * * Transmission will be held until "_Y_" * * * *"
"RTN","RCBEADJ",179,0)
 ;
"RTN","RCBEADJ",180,0)
 W !,"  Current Bill Status: ",$P($G(^PRCA(430.3,+$P($G(^PRCA(430,RCBILLDA,0)),"^",8),0)),"^")
"RTN","RCBEADJ",181,0)
 Q
"RTN","RCBEADJ",182,0)
 ;
"RTN","RCBEADJ",183,0)
ASKOK(RCBETYPE) ;  ask record decrease or increase transaction
"RTN","RCBEADJ",184,0)
 N DIR,DIQ2,DIRUT,DTOUT,DUOUT,X,Y
"RTN","RCBEADJ",185,0)
 S DIR(0)="YO",DIR("B")="YES"
"RTN","RCBEADJ",186,0)
 S DIR("A")="Are you sure you want to enter this "_RCBETYPE_" adjustment "
"RTN","RCBEADJ",187,0)
 W ! D ^DIR
"RTN","RCBEADJ",188,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1 I $G(GOTBILL) S RCDPGQ=1    ; account profile listman quit flag  *315
"RTN","RCBEADJ",189,0)
 Q Y
"RTN","RCBEADJ",190,0)
 ;
"RTN","RCBEADJ",191,0)
ASKAUPO() ;  ask record even though marked for auto post PRCA*4.5*298
"RTN","RCBEADJ",192,0)
 N DIR,DIQ2,DIRUT,DTOUT,DUOUT,X,Y
"RTN","RCBEADJ",193,0)
 S DIR(0)="YOA",DIR("B")="NO"
"RTN","RCBEADJ",194,0)
 S DIR("A")="Marked for Auto-Post. Are you sure? (Y/N) "
"RTN","RCBEADJ",195,0)
 W ! D ^DIR
"RTN","RCBEADJ",196,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1 I $G(GOTBILL) S RCDPGQ=1    ; account profile listman quit flag  *315
"RTN","RCBEADJ",197,0)
 Q Y
"RTN","RCBEADJ",198,0)
 ;
"RTN","RCBEADJ",199,0)
ASKFIX() ;  ask to fix bill's balance
"RTN","RCBEADJ",200,0)
 N DIR,DIQ2,DIRUT,DTOUT,DUOUT,X,Y
"RTN","RCBEADJ",201,0)
 S DIR(0)="YO",DIR("B")="YES"
"RTN","RCBEADJ",202,0)
 S DIR("A")="  Do you want to FIX the balance discrepancy "
"RTN","RCBEADJ",203,0)
 W ! D ^DIR
"RTN","RCBEADJ",204,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1 I $G(GOTBILL) S RCDPGQ=1    ; account profile listman quit flag  *315
"RTN","RCBEADJ",205,0)
 Q Y
"RTN","RCBEADJ",206,0)
 ;
"RTN","RCBEADJ",207,0)
 ;
"RTN","RCBEADJ",208,0)
ASKEXEMP() ;  ask to record an exempt transaction
"RTN","RCBEADJ",209,0)
 N DIR,DIQ2,DIRUT,DTOUT,DUOUT,X,Y
"RTN","RCBEADJ",210,0)
 S DIR(0)="YO",DIR("B")="NO"
"RTN","RCBEADJ",211,0)
 S DIR("A")="  Would you like to EXEMPT the interest and admin charges "
"RTN","RCBEADJ",212,0)
 D ^DIR
"RTN","RCBEADJ",213,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1 I $G(GOTBILL) S RCDPGQ=1    ; account profile listman quit flag  *315
"RTN","RCBEADJ",214,0)
 Q Y
"RTN","RCBEADJ",215,0)
 ;
"RTN","RCBEADJ",216,0)
 ;
"RTN","RCBEADJ",217,0)
ASKCONT() ;  ask if contract adjustment
"RTN","RCBEADJ",218,0)
 N DIR,DIQ2,DIRUT,DTOUT,DUOUT,X,Y
"RTN","RCBEADJ",219,0)
 S DIR(0)="YO",DIR("B")="YES"
"RTN","RCBEADJ",220,0)
 S DIR("A")="  Is this a CONTRACT adjustment "
"RTN","RCBEADJ",221,0)
 W ! D ^DIR
"RTN","RCBEADJ",222,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1 I $G(GOTBILL) S RCDPGQ=1    ; account profile listman quit flag  *315
"RTN","RCBEADJ",223,0)
 Q Y
"RTN","RCBEADJ",224,0)
 ;
"RTN","RCBEADJ",225,0)
 ;
"RTN","RCBEADJ",226,0)
ASKREV() ; Ask if Treasury reversal *315/DRF
"RTN","RCBEADJ",227,0)
 N DIR,DIQ2,DIRUT,DTOUT,DUOUT,X,Y
"RTN","RCBEADJ",228,0)
 S DIR(0)="YO",DIR("B")="NO"
"RTN","RCBEADJ",229,0)
 S DIR("A")="  Is this a TREASURY reversal "
"RTN","RCBEADJ",230,0)
 W ! D ^DIR
"RTN","RCBEADJ",231,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1 I $G(GOTBILL) S RCDPGQ=1    ; account profile listman quit flag  *315
"RTN","RCBEADJ",232,0)
 Q Y
"RTN","RCBEADJ",233,0)
 ;
"RTN","RCBEADJ",234,0)
 ;
"RTN","RCBEADJ",235,0)
ADJNUM(RCBILLDA) ;  get next adjustment number for a bill
"RTN","RCBEADJ",236,0)
 N %,ADJUST,DATA1,RCTRANDA
"RTN","RCBEADJ",237,0)
 S RCTRANDA=0
"RTN","RCBEADJ",238,0)
 F  S RCTRANDA=$O(^PRCA(433,"C",RCBILLDA,RCTRANDA)) Q:'RCTRANDA  S DATA1=$G(^PRCA(433,RCTRANDA,1)) I $P(DATA1,"^",4),$P(DATA1,"^",2)=1!($P(DATA1,"^",2)=35) S ADJUST=$P(DATA1,"^",4)+1
"RTN","RCBEADJ",239,0)
 Q ADJUST
"RTN","RCBEADJ",240,0)
 ;
"RTN","RCBEADJ",241,0)
 ;
"RTN","RCBEADJ",242,0)
AMOUNT(RCBILLDA,RCBETYPE) ;  enter the adjustment amount for a bill
"RTN","RCBEADJ",243,0)
 N DIR,DIRUT,DTOUT,DUOUT,PRINBAL,X,Y
"RTN","RCBEADJ",244,0)
 S PRINBAL=+$P($G(^PRCA(430,RCBILLDA,7)),"^")
"RTN","RCBEADJ",245,0)
 I RCBETYPE="INCREASE" S PRINBAL=9999999.99
"RTN","RCBEADJ",246,0)
 W !!,"Enter the ",RCBETYPE," Adjustment AMOUNT, from .01 to ",$J(PRINBAL,0,2),"."
"RTN","RCBEADJ",247,0)
 S DIR(0)="NAO^.01:"_PRINBAL_":2"
"RTN","RCBEADJ",248,0)
 S DIR("A")="  "_RCBETYPE_" PRINCIPAL BALANCE BY: "
"RTN","RCBEADJ",249,0)
 D ^DIR
"RTN","RCBEADJ",250,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1 I $G(GOTBILL) S RCDPGQ=1    ; account profile listman quit flag  *315
"RTN","RCBEADJ",251,0)
 Q $S(Y'="":Y,1:-1)
"RTN","RCBEADJ",252,0)
 ;
"RTN","RCBEADJ",253,0)
ASKCM() ;  ask if the action is being performed due to the claims matching process  *315
"RTN","RCBEADJ",254,0)
 N DIR,DIQ2,DIRUT,DTOUT,DUOUT,X,Y
"RTN","RCBEADJ",255,0)
 S DIR(0)="YO",DIR("B")="NO"
"RTN","RCBEADJ",256,0)
 S DIR("A")="Is this action being performed due to the CLAIMS MATCHING process "
"RTN","RCBEADJ",257,0)
 D ^DIR
"RTN","RCBEADJ",258,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1 I $G(GOTBILL) S RCDPGQ=1    ; account profile listman quit flag  *315
"RTN","RCBEADJ",259,0)
 Q Y
"RTN","RCBEADJ",260,0)
 ;
"RTN","RCBEPAYF")
0^57^B49206897^B49142931
"RTN","RCBEPAYF",1,0)
RCBEPAYF ;WISC/RFJ-first party payment processing(called by rcbepay) ;1 Jun 00
"RTN","RCBEPAYF",2,0)
 ;;4.5;Accounts Receivable;**153,301,322,315**;Mar 20, 1995;Build 67
"RTN","RCBEPAYF",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCBEPAYF",4,0)
 Q
"RTN","RCBEPAYF",5,0)
 ;
"RTN","RCBEPAYF",6,0)
 ;PRCA*4.5*322 Awaken commented line to post payemnt to
"RTN","RCBEPAYF",7,0)
 ;             implied bill# for receipt payment
"RTN","RCBEPAYF",8,0)
 ;
"RTN","RCBEPAYF",9,0)
FIRSTPTY() ;  apply payment to first party account
"RTN","RCBEPAYF",10,0)
 ;  called by rcbepay
"RTN","RCBEPAYF",11,0)
 N PAYMENT,RCBILBAL,RCBILLDA,RCDATE,RCDEBTDA,RCERROR,RCREPAMT,RCSTATUS,RCTRANDA,X,CSBILL,CSBILLDA,CSDEP,IDX,PREV
"RTN","RCBEPAYF",12,0)
 K ^TMP("RCBEPAY",$J)
"RTN","RCBEPAYF",13,0)
 ; acc't lookup info  BB prca*4.5*301
"RTN","RCBEPAYF",14,0)
 S CSBILLDA=+$E($P(RCDATA,"^",7),22,99),CSDEP=$P(RCDATA,"^",19),CSBILL=$E($P(RCDATA,"^",7),1,3)_"-"_$E($P(RCDATA,"^",7),4,10)
"RTN","RCBEPAYF",15,0)
 I 'CSDEP S CSDEP=169     ;Default for missing pay type
"RTN","RCBEPAYF",16,0)
 I $E($G(CSDEP),1,3)=170 S CSBILLDA=$O(^PRCA(430,"B",CSBILL,0))
"RTN","RCBEPAYF",17,0)
 I RCDATA["PRCA(430," S CSBILLDA=+$P(RCDATA,"^",3)
"RTN","RCBEPAYF",18,0)
 I CSDEP>167,CSDEP<171 S RCBETYPE=CSDEP
"RTN","RCBEPAYF",19,0)
 ;end PRCA*4.5*301
"RTN","RCBEPAYF",20,0)
 ;
"RTN","RCBEPAYF",21,0)
 ;  look up account in debtor file
"RTN","RCBEPAYF",22,0)
 S RCDEBTDA=$$DEBT^RCEVUTL(RCACCT)
"RTN","RCBEPAYF",23,0)
 I RCDEBTDA<0 Q "1^Could not add Patient ("_RCACCT_") to debtor file"
"RTN","RCBEPAYF",24,0)
 ;
"RTN","RCBEPAYF",25,0)
 ;  lock the debtor account
"RTN","RCBEPAYF",26,0)
 L +^RCD(340,RCDEBTDA):20 I '$T Q "1^Another user is working with this patient account"
"RTN","RCBEPAYF",27,0)
 ;
"RTN","RCBEPAYF",28,0)
 ;  build list of active(16) and open(42) bills for patient
"RTN","RCBEPAYF",29,0)
 ;  sorted by date bill prepared
"RTN","RCBEPAYF",30,0)
 F RCSTATUS=16,42 S RCBILLDA=0 F  S RCBILLDA=$O(^PRCA(430,"AS",RCDEBTDA,RCSTATUS,RCBILLDA)) Q:'RCBILLDA  D
"RTN","RCBEPAYF",31,0)
 .   ;  check bill for prepayment
"RTN","RCBEPAYF",32,0)
 .   I $P(^PRCA(430,RCBILLDA,0),"^",2)=26 Q  ; ACCOUNTS RECEIVABLE CATEGORY (PREPAYMENT=26)
"RTN","RCBEPAYF",33,0)
 .   ;
"RTN","RCBEPAYF",34,0)
 .   ;  checks if payment was via a "170" CS Treasury lockbox transaction ; prca*4.5*301
"RTN","RCBEPAYF",35,0)
 .   ;    Ignores bill if bill is NOT a "TCSP" CS bill
"RTN","RCBEPAYF",36,0)
 .   ;    else sets as FIRST if designated as bill to be applied, or subsequent in oldest date order
"RTN","RCBEPAYF",37,0)
 .   I CSDEP=170 D  Q  ; prca*4.5*301
"RTN","RCBEPAYF",38,0)
 .   .  I $D(^PRCA(430,"TCSP",RCBILLDA)) D  Q  ;
"RTN","RCBEPAYF",39,0)
 .   .  . I CSBILLDA=RCBILLDA S ^TMP("RCBEPAY",$J,0,RCBILLDA)="" Q
"RTN","RCBEPAYF",40,0)
 .   .  . S ^TMP("RCBEPAY",$J,880000000+$P($G(^PRCA(430,RCBILLDA,0)),"^",10),RCBILLDA)=""
"RTN","RCBEPAYF",41,0)
 .   .  S ^TMP("RCBEPAY",$J,990000000+$P($G(^PRCA(430,RCBILLDA,0)),"^",10),RCBILLDA)=""
"RTN","RCBEPAYF",42,0)
 .   I $E($G(CSDEP),1,3)'=168,$D(^PRCA(430,"TCSP",RCBILLDA)) Q   ;BB prca*4.5*301
"RTN","RCBEPAYF",43,0)
 .   I CSBILLDA=RCBILLDA S ^TMP("RCBEPAY",$J,0,RCBILLDA)="" Q   ;PRCA*4.5*322
"RTN","RCBEPAYF",44,0)
 .   S ^TMP("RCBEPAY",$J,+$P($G(^PRCA(430,RCBILLDA,0)),"^",10),RCBILLDA)=""
"RTN","RCBEPAYF",45,0)
PROC ;
"RTN","RCBEPAYF",46,0)
 ;  loop all the bills for a patients account and keep looping them
"RTN","RCBEPAYF",47,0)
 ;  until either there is no more bills or the money paid is zero.
"RTN","RCBEPAYF",48,0)
 ;  the bills are looped in case of repayments.  if there is money
"RTN","RCBEPAYF",49,0)
 ;  left over, this will apply more money to the repayment bills
"RTN","RCBEPAYF",50,0)
 ;  instead of creating a prepayment.  a prepayment should only be
"RTN","RCBEPAYF",51,0)
 ;  created if all bills for the account is collected/closed.
"RTN","RCBEPAYF",52,0)
 S RCERROR=0
"RTN","RCBEPAYF",53,0)
 ;  quit the loop if no money left to apply OR an error occurred OR
"RTN","RCBEPAYF",54,0)
 ;  no more bills left to apply payment to
"RTN","RCBEPAYF",55,0)
 F  D  I 'RCPAYAMT!(RCERROR)!($O(^TMP("RCBEPAY",$J,""))="") Q
"RTN","RCBEPAYF",56,0)
 .   ;  loop the bills by date prepared and apply the payment
"RTN","RCBEPAYF",57,0)
 .   ;  quit if no money left to apply OR and error occurred
"RTN","RCBEPAYF",58,0)
 .   S RCDATE="" F  S RCDATE=$O(^TMP("RCBEPAY",$J,RCDATE)) Q:RCDATE=""  D  I 'RCPAYAMT!(RCERROR) Q
"RTN","RCBEPAYF",59,0)
 .   .   S RCBILLDA=0 F  S RCBILLDA=$O(^TMP("RCBEPAY",$J,RCDATE,RCBILLDA)) Q:'RCBILLDA  D  I 'RCPAYAMT!(RCERROR) Q
"RTN","RCBEPAYF",60,0)
 .   .   .   L +^PRCA(430,RCBILLDA):10
"RTN","RCBEPAYF",61,0)
 .   .   .   I '$T S RCERROR="1^Another user is working with bill "_$P(^PRCA(430,RCBILLDA,0),"^") Q
"RTN","RCBEPAYF",62,0)
 .   .   .   ;
"RTN","RCBEPAYF",63,0)
 .   .   .   ;  exempt any interest/admin/penalty charges added on or after
"RTN","RCBEPAYF",64,0)
 .   .   .   ;  the payment date
"RTN","RCBEPAYF",65,0)
 .   .   .   D EXEMPT^RCBECHGE(RCBILLDA,RCPAYDAT)
"RTN","RCBEPAYF",66,0)
 .   .   .   ;
"RTN","RCBEPAYF",67,0)
 .   .   .   ;  get the repayment amount (if any)
"RTN","RCBEPAYF",68,0)
 .   .   .   S RCREPAMT=$P($G(^PRCA(430,RCBILLDA,4)),"^",3) I CSDEP=168!(CSDEP=170) S RCREPAMT=0   ;PRCA*4.5*301
"RTN","RCBEPAYF",69,0)
 .   .   .   ;
"RTN","RCBEPAYF",70,0)
 .   .   .   ;  get the balance of the bill
"RTN","RCBEPAYF",71,0)
 .   .   .   S X=$G(^PRCA(430,RCBILLDA,7))
"RTN","RCBEPAYF",72,0)
 .   .   .   S RCBILBAL=$P(X,"^")+$P(X,"^",2)+$P(X,"^",3)+$P(X,"^",4)+$P(X,"^",5)
"RTN","RCBEPAYF",73,0)
 .   .   .   ;  if bill has no balance, chg status = collected/closed
"RTN","RCBEPAYF",74,0)
 .   .   .   I 'RCBILBAL D  Q    ;PRCA*4.5*301
"RTN","RCBEPAYF",75,0)
 .   .   .   . D CHGSTAT^RCBEUBIL(RCBILLDA,22)
"RTN","RCBEPAYF",76,0)
 .   .   .   . L -^PRCA(430,RCBILLDA)
"RTN","RCBEPAYF",77,0)
 .   .   .   . K ^TMP("RCBEPAY",$J,RCDATE,RCBILLDA)
"RTN","RCBEPAYF",78,0)
 .   .   .   ;
"RTN","RCBEPAYF",79,0)
 .   .   .   ;  determine amount to pay
"RTN","RCBEPAYF",80,0)
 .   .   .   ;  if the payment is greater than billed amount, pay billed amount
"RTN","RCBEPAYF",81,0)
 .   .   .   ;  if there is a repayment amount, pay the repayment amount
"RTN","RCBEPAYF",82,0)
 .   .   .   ;  do not allow payment to exceed amount paid
"RTN","RCBEPAYF",83,0)
 .   .   .   S PAYMENT=RCPAYAMT
"RTN","RCBEPAYF",84,0)
 .   .   .   I PAYMENT>RCBILBAL S PAYMENT=RCBILBAL
"RTN","RCBEPAYF",85,0)
 .   .   .   I RCREPAMT S PAYMENT=RCREPAMT I PAYMENT>RCBILBAL S PAYMENT=RCBILBAL
"RTN","RCBEPAYF",86,0)
 .   .   .   I PAYMENT>RCPAYAMT S PAYMENT=RCPAYAMT
"RTN","RCBEPAYF",87,0)
 .   .   .   ;
"RTN","RCBEPAYF",88,0)
 .   .   .   ;  apply payment to bill
"RTN","RCBEPAYF",89,0)
 .   .   .   ;  return error if problem adding payment transaction
"RTN","RCBEPAYF",90,0)
 .   .   .   S RCTRANDA=$$PAYTRAN^RCBEPAY1(RCBILLDA,PAYMENT,RCRECTDA,RCPAYDA,RCPAYDAT)
"RTN","RCBEPAYF",91,0)
 .   .   .   I 'RCTRANDA L -^PRCA(430,RCBILLDA) S RCERROR="1^"_$P(RCTRANDA,"^",2) Q
"RTN","RCBEPAYF",92,0)
 .   .   .   ;
"RTN","RCBEPAYF",93,0)
 .   .   .   ;  payment applied to bill, subtract off the payment amount
"RTN","RCBEPAYF",94,0)
 .   .   .   S RCPAYAMT=RCPAYAMT-$P($G(^PRCA(433,RCTRANDA,1)),"^",5)
"RTN","RCBEPAYF",95,0)
 .   .   .   ;
"RTN","RCBEPAYF",96,0)
 .   .   .   ;  set the amount processed on the receipt payment
"RTN","RCBEPAYF",97,0)
 .   .   .   D SETAMT^RCBEPAY(RCRECTDA,RCPAYDA,$P($G(^PRCA(433,RCTRANDA,1)),"^",5))
"RTN","RCBEPAYF",98,0)
 .   .   .   ;
"RTN","RCBEPAYF",99,0)
 .   .   .   ;  if Bill is Cross-Serviced, then create DECREASED ADJUSTMENT for 5B reporting
"RTN","RCBEPAYF",100,0)
 .   .   .   I $E($G(CSDEP),1,3)=168,$D(^PRCA(430,"TCSP",RCBILLDA)) D CS5B(RCBILLDA) ; BB prca*4.5*301
"RTN","RCBEPAYF",101,0)
 .   .   .   I $E($G(CSDEP),1,3)=170,RCBILLDA'=CSBILLDA,$D(^PRCA(430,"TCSP",RCBILLDA)) D CS5B(RCBILLDA) ; BB prca*4.5*301
"RTN","RCBEPAYF",102,0)
 .   .   .   ;
"RTN","RCBEPAYF",103,0)
 .   .   .   ;  get the new balance of the bill.  if it is zero
"RTN","RCBEPAYF",104,0)
 .   .   .   ;  remove it from the tmp global (this will stop the
"RTN","RCBEPAYF",105,0)
 .   .   .   ;  loop if dollars are left and no bills are active)
"RTN","RCBEPAYF",106,0)
 .   .   .   S X=$G(^PRCA(430,RCBILLDA,7))
"RTN","RCBEPAYF",107,0)
 .   .   .   S RCBILBAL=$P(X,"^")+$P(X,"^",2)+$P(X,"^",3)+$P(X,"^",4)+$P(X,"^",5)
"RTN","RCBEPAYF",108,0)
 .   .   .   I 'RCBILBAL D      ;PRCA*4.5*301
"RTN","RCBEPAYF",109,0)
 .   .   .   . D CHGSTAT^RCBEUBIL(RCBILLDA,22)
"RTN","RCBEPAYF",110,0)
 .   .   .   . K ^TMP("RCBEPAY",$J,RCDATE,RCBILLDA)
"RTN","RCBEPAYF",111,0)
 .   .   .   . I $D(^PRCA(430,"TCSP",RCBILLDA)),RCBILLDA=CSBILLDA S $P(^PRCA(430,RCBILLDA,15),"^")="" K ^PRCA(430,"TCSP",RCBILLDA)     ;S DA=RCBILLDA,DIE="^PRCA(430,",DR="151////@" D ^DIE K DIE,DA,DR
"RTN","RCBEPAYF",112,0)
 .   .   .   ;
"RTN","RCBEPAYF",113,0)
 .   .   .   L -^PRCA(430,RCBILLDA)
"RTN","RCBEPAYF",114,0)
 ;
"RTN","RCBEPAYF",115,0)
 K ^TMP("RCBEPAY",$J)
"RTN","RCBEPAYF",116,0)
 ;
"RTN","RCBEPAYF",117,0)
 ;  if an error occurred, quit
"RTN","RCBEPAYF",118,0)
 I RCERROR L -^RCD(340,RCDEBTDA) Q RCERROR
"RTN","RCBEPAYF",119,0)
 ;
"RTN","RCBEPAYF",120,0)
 ;  if no money left, quit
"RTN","RCBEPAYF",121,0)
 I 'RCPAYAMT L -^RCD(340,RCDEBTDA) Q 0
"RTN","RCBEPAYF",122,0)
 ;
"RTN","RCBEPAYF",123,0)
 ;  dollars remaining, create a prepayment
"RTN","RCBEPAYF",124,0)
 N %,%H,%I,%X,D,D0,DFN,DI,DIC,DICR,DIG,DIH,DIU,DIV,DIW,DQ,I,PRCA,RCREF,VA,VADM
"RTN","RCBEPAYF",125,0)
 D EN^PRCAPAY3(RCACCT,RCPAYAMT,RCPAYDAT,DUZ,$P(^RCY(344,RCRECTDA,0),"^"),"","",.RCERROR,"")
"RTN","RCBEPAYF",126,0)
 ;  no errors
"RTN","RCBEPAYF",127,0)
 I RCERROR=""!(RCERROR=0) D
"RTN","RCBEPAYF",128,0)
 .   S RCERROR=0
"RTN","RCBEPAYF",129,0)
 .   ;  set the amount processed on the receipt
"RTN","RCBEPAYF",130,0)
 .   D SETAMT^RCBEPAY(RCRECTDA,RCPAYDA,RCPAYAMT)
"RTN","RCBEPAYF",131,0)
 ;  error creating prepayment
"RTN","RCBEPAYF",132,0)
 I RCERROR'=0 S RCERROR="1^"_RCERROR
"RTN","RCBEPAYF",133,0)
 ;
"RTN","RCBEPAYF",134,0)
 L -^RCD(340,RCDEBTDA)
"RTN","RCBEPAYF",135,0)
 Q RCERROR
"RTN","RCBEPAYF",136,0)
 ;
"RTN","RCBEPAYF",137,0)
CS5B(RCBILLDA) ; logs ADJ for 5B CS reporting if Cross-Serviced bill ; prca*4.5*301 ; LEG
"RTN","RCBEPAYF",138,0)
 ; Changed description from DEC ADJ to ADJ since increase adjustments will also use this code 315/DRF
"RTN","RCBEPAYF",139,0)
 ; note: can use either I +$G(^PRCA(430,RCBILLDA,15)) D  ; bill is Cross-Serviced
"RTN","RCBEPAYF",140,0)
 I $D(^PRCA(430,"TCSP",RCBILLDA)) D  ; bill is Cross-Serviced
"RTN","RCBEPAYF",141,0)
 . ;  checks for valid bill
"RTN","RCBEPAYF",142,0)
 . S DIC="^PRCA(430,",DIC(0)="KMNZ",X=RCBILLDA D ^DIC
"RTN","RCBEPAYF",143,0)
 . ; checks if DEC ADJ record was previously logged
"RTN","RCBEPAYF",144,0)
 . S IDX=0,PREV=0
"RTN","RCBEPAYF",145,0)
 . F  S IDX=$O(^PRCA(430,RCBILLDA,17,IDX)) Q:'IDX  D  ;
"RTN","RCBEPAYF",146,0)
 . . I +$G(^PRCA(430,RCBILLDA,17,IDX,0))=RCTRANDA S PREV=1
"RTN","RCBEPAYF",147,0)
 . I PREV Q  ; transaction was already logged
"RTN","RCBEPAYF",148,0)
 . ;
"RTN","RCBEPAYF",149,0)
 . ;  gets next ADJ subfile entry number or creates 1st
"RTN","RCBEPAYF",150,0)
 . K DR,DA,DD,DO,DIC,DIE
"RTN","RCBEPAYF",151,0)
 . S X=RCTRANDA       ; CS ADJ TRANS NUMBER
"RTN","RCBEPAYF",152,0)
 . S DA(1)=RCBILLDA
"RTN","RCBEPAYF",153,0)
 . S DIC="^PRCA(430,"_DA(1)_",17,"
"RTN","RCBEPAYF",154,0)
 . S DIC(0)="KLMNZ"
"RTN","RCBEPAYF",155,0)
 . S DIC("P")=$P(^DD(430,171,0),"^",2)
"RTN","RCBEPAYF",156,0)
 . D ^DIC
"RTN","RCBEPAYF",157,0)
 . ;  set ADJ Fields
"RTN","RCBEPAYF",158,0)
 . S DIE=DIC K DIC
"RTN","RCBEPAYF",159,0)
 . S DA=+Y
"RTN","RCBEPAYF",160,0)
 . S DR="1////1" ; SEND TCSP RECORD 5B
"RTN","RCBEPAYF",161,0)
 . S DIC("DR")=DR
"RTN","RCBEPAYF",162,0)
 . D ^DIE
"RTN","RCBEPAYF",163,0)
 Q
"RTN","RCBEUTR1")
0^67^B37772593^B36268452
"RTN","RCBEUTR1",1,0)
RCBEUTR1 ;WISC/RFJ-add int,admin chg or increase,decrease principal  ;1 Jun 00
"RTN","RCBEUTR1",2,0)
 ;;4.5;Accounts Receivable;**153,169,192,226,270,276,301,315**;Mar 20, 1995;Build 67
"RTN","RCBEUTR1",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCBEUTR1",4,0)
 Q
"RTN","RCBEUTR1",5,0)
 ;
"RTN","RCBEUTR1",6,0)
 ;
"RTN","RCBEUTR1",7,0)
INTADM(RCBILLDA,RCVALUE,RCCOMMNT,RCDATE) ;  add an intererst/admin charge (transaction type=13)
"RTN","RCBEUTR1",8,0)
 ;  for a bill.  rcvalue = interest ^ admin ^ penalty ^ marshal fee ^ court cost
"RTN","RCBEUTR1",9,0)
 ;  for the transaction.  rcdate = process date (optional)
"RTN","RCBEUTR1",10,0)
 ;  returns transaction number if successful
"RTN","RCBEUTR1",11,0)
 ;
"RTN","RCBEUTR1",12,0)
 N RCDRSTRG,RCTRANDA,Y
"RTN","RCBEUTR1",13,0)
 ;  add the transaction (if added to 433, transaction is locked)
"RTN","RCBEUTR1",14,0)
 S RCTRANDA=$$ADD433^RCBEUTRA(RCBILLDA,13) I 'RCTRANDA Q 0
"RTN","RCBEUTR1",15,0)
 ;
"RTN","RCBEUTR1",16,0)
 ;  build dr string
"RTN","RCBEUTR1",17,0)
 ;  transaction date (strip off time)
"RTN","RCBEUTR1",18,0)
 S RCDRSTRG="11////"_$S($G(RCDATE):$P(RCDATE,"."),1:DT)_";"
"RTN","RCBEUTR1",19,0)
 ;
"RTN","RCBEUTR1",20,0)
 ;  transaction values
"RTN","RCBEUTR1",21,0)
 S RCDRSTRG=RCDRSTRG_"15////"_($P(RCVALUE,"^")+$P(RCVALUE,"^",2)+$P(RCVALUE,"^",3)+$P(RCVALUE,"^",4)+$P(RCVALUE,"^",5))_";"
"RTN","RCBEUTR1",22,0)
 I $P(RCVALUE,"^",4) S RCDRSTRG=RCDRSTRG_"25////"_$P(RCVALUE,"^",4)_";"  ;marshal fee
"RTN","RCBEUTR1",23,0)
 I $P(RCVALUE,"^",5) S RCDRSTRG=RCDRSTRG_"26////"_$P(RCVALUE,"^",5)_";"  ;court cost
"RTN","RCBEUTR1",24,0)
 I $P(RCVALUE,"^",1) S RCDRSTRG=RCDRSTRG_"27////"_$P(RCVALUE,"^",1)_";"  ;interest
"RTN","RCBEUTR1",25,0)
 I $P(RCVALUE,"^",2) S RCDRSTRG=RCDRSTRG_"28////"_$P(RCVALUE,"^",2)_";"  ;admin
"RTN","RCBEUTR1",26,0)
 I $P(RCVALUE,"^",3) S RCDRSTRG=RCDRSTRG_"29////"_$P(RCVALUE,"^",3)_";"  ;penalty
"RTN","RCBEUTR1",27,0)
 I $G(RCDATE) S RCDRSTRG=RCDRSTRG_"19////"_RCDATE_";"  ;date entered
"RTN","RCBEUTR1",28,0)
 ;
"RTN","RCBEUTR1",29,0)
 ;  input the fields for the transaction
"RTN","RCBEUTR1",30,0)
 S Y=$$EDIT433^RCBEUTRA(RCTRANDA,RCDRSTRG) I 'Y L -^PRCA(433,RCTRANDA) Q 0
"RTN","RCBEUTR1",31,0)
 ;
"RTN","RCBEUTR1",32,0)
 ;  set the comment
"RTN","RCBEUTR1",33,0)
 I $D(RCCOMMNT(1)) D ADDCOMM^RCBEUTRA(RCTRANDA,.RCCOMMNT)
"RTN","RCBEUTR1",34,0)
 ;
"RTN","RCBEUTR1",35,0)
 ;  move over 433 from 430 (no principal, just move it)
"RTN","RCBEUTR1",36,0)
 D FY433^RCBEUTRA(RCTRANDA)
"RTN","RCBEUTR1",37,0)
 ;
"RTN","RCBEUTR1",38,0)
 ;  mark transaction as processed
"RTN","RCBEUTR1",39,0)
 D PROCESS^RCBEUTRA(RCTRANDA)
"RTN","RCBEUTR1",40,0)
 ;
"RTN","RCBEUTR1",41,0)
 ;  update the bill file with the balance of the transaction
"RTN","RCBEUTR1",42,0)
 D SETBAL^RCBEUBIL(RCTRANDA)
"RTN","RCBEUTR1",43,0)
 ;
"RTN","RCBEUTR1",44,0)
 ;  if the bill has no balance, close or cancel it
"RTN","RCBEUTR1",45,0)
 D CLOSEIT(RCBILLDA)
"RTN","RCBEUTR1",46,0)
 ;
"RTN","RCBEUTR1",47,0)
 ;  clear the lock and return the transaction added
"RTN","RCBEUTR1",48,0)
 L -^PRCA(433,RCTRANDA)
"RTN","RCBEUTR1",49,0)
 Q RCTRANDA
"RTN","RCBEUTR1",50,0)
 ;
"RTN","RCBEUTR1",51,0)
 ; PRCA*4.5*270 add CRD flag so FMS knows this is a corrected record
"RTN","RCBEUTR1",52,0)
 ; INCDEC(RCBILLDA,RCVALUE,RCCOMMNT,RCDATE,RCPREPAY,RCONTADJ) ;  automatically
"RTN","RCBEUTR1",53,0)
INCDEC(RCBILLDA,RCVALUE,RCCOMMNT,RCDATE,RCPREPAY,RCONTADJ,RCCRD) ;
"RTN","RCBEUTR1",54,0)
 ;  automatically create an increase or decrease adjustment for a bill
"RTN","RCBEUTR1",55,0)
 ;  pass variables:
"RTN","RCBEUTR1",56,0)
 ;      rcvalue  = principal value for the transaction.
"RTN","RCBEUTR1",57,0)
 ;                 if rcvalue is less than zero, it will create a
"RTN","RCBEUTR1",58,0)
 ;                 decrease adjustment.  if rcvalue is greater than
"RTN","RCBEUTR1",59,0)
 ;                 zero, it will create an increase adjustment.
"RTN","RCBEUTR1",60,0)
 ;      rccommnt = the comments for the word processing field.
"RTN","RCBEUTR1",61,0)
 ;      rcdate   = optional processing date and time.  if not
"RTN","RCBEUTR1",62,0)
 ;                 passed, the current date and time will be used
"RTN","RCBEUTR1",63,0)
 ;      rcprepay = optional prepayment transaction.  this is the
"RTN","RCBEUTR1",64,0)
 ;                 payment transaction applied to the bill to
"RTN","RCBEUTR1",65,0)
 ;                 create the decrease adjustment.  this gets
"RTN","RCBEUTR1",66,0)
 ;                 stored in field 20 (file 433).
"RTN","RCBEUTR1",67,0)
 ;      rcontadj = optional contract adjustment.  if 1 then this
"RTN","RCBEUTR1",68,0)
 ;                 gets stored in field 88 (file 433).
"RTN","RCBEUTR1",69,0)
 ;      rccrd    = optional corrected flag.  If 1, then FMS must 1st cancel or delete the
"RTN","RCBEUTR1",70,0)
 ;                 original billing document before creating the new one.
"RTN","RCBEUTR1",71,0)
 ;
"RTN","RCBEUTR1",72,0)
 ;  returns transaction number added to 433 if successful.
"RTN","RCBEUTR1",73,0)
 ;
"RTN","RCBEUTR1",74,0)
 N ADJNUMB,RCDRSTRG,RCTRANDA,X,Y,RCNEG,TRNTYP
"RTN","RCBEUTR1",75,0)
 ;
"RTN","RCBEUTR1",76,0)
 ;  determine transaction type
"RTN","RCBEUTR1",77,0)
 I RCVALUE>0 S TRNTYP=1 I $D(^PRCA(430,"TCSP",RCBILLDA)) S TRNTYP=73 ;PRCA*4.5*315/DRF
"RTN","RCBEUTR1",78,0)
 I RCVALUE<0 S TRNTYP=35
"RTN","RCBEUTR1",79,0)
 ;
"RTN","RCBEUTR1",80,0)
 ;  add the transaction (if added to 433, transaction is locked)
"RTN","RCBEUTR1",81,0)
 S RCTRANDA=$$ADD433^RCBEUTRA(RCBILLDA,TRNTYP) I 'RCTRANDA Q 0
"RTN","RCBEUTR1",82,0)
 ;
"RTN","RCBEUTR1",83,0)
 ;  build dr string
"RTN","RCBEUTR1",84,0)
 ;  11=transaction date (strip off time)
"RTN","RCBEUTR1",85,0)
 S RCDRSTRG="11////"_$S($G(RCDATE):$P(RCDATE,"."),1:DT)_";"
"RTN","RCBEUTR1",86,0)
 ;  transaction value (make sure it is not negative)
"RTN","RCBEUTR1",87,0)
 I RCVALUE<0 S RCVALUE=-RCVALUE
"RTN","RCBEUTR1",88,0)
 S RCDRSTRG=RCDRSTRG_"15////"_RCVALUE_";"
"RTN","RCBEUTR1",89,0)
 S RCDRSTRG=RCDRSTRG_"81////"_RCVALUE_";"
"RTN","RCBEUTR1",90,0)
 I $G(RCBETYPE)="DECREASE" S RCDRSTRG=RCDRSTRG_"31////"_RCVALUE_";"    ;PRCA*4.5*301
"RTN","RCBEUTR1",91,0)
 ;
"RTN","RCBEUTR1",92,0)
 ;  get the next adjustment number if increase(1) or decrease(35)
"RTN","RCBEUTR1",93,0)
 ;  start with the last transaction and work backwards
"RTN","RCBEUTR1",94,0)
 S X=999999999999,ADJNUMB=1
"RTN","RCBEUTR1",95,0)
 F  S X=$O(^PRCA(433,"C",RCBILLDA,X),-1) Q:'X  I $P($G(^PRCA(433,X,1)),"^",4) I $P(^(1),"^",2)=1!($P(^(1),"^",2)=35) S ADJNUMB=$P(^(1),"^",4)+1 Q
"RTN","RCBEUTR1",96,0)
 S RCDRSTRG=RCDRSTRG_"14////"_ADJNUMB_";"
"RTN","RCBEUTR1",97,0)
 ;
"RTN","RCBEUTR1",98,0)
 ;  date entered
"RTN","RCBEUTR1",99,0)
 I $G(RCDATE) S RCDRSTRG=RCDRSTRG_"19////"_RCDATE_";"
"RTN","RCBEUTR1",100,0)
 ;
"RTN","RCBEUTR1",101,0)
 ;  store the prepayment transaction
"RTN","RCBEUTR1",102,0)
 I $G(RCPREPAY) D
"RTN","RCBEUTR1",103,0)
 .   S RCDRSTRG=RCDRSTRG_"20////"_RCPREPAY_";"
"RTN","RCBEUTR1",104,0)
 .   ;  for prepayments, set the incomplete transaction flag
"RTN","RCBEUTR1",105,0)
 .   ;  this will no longer be used after patch 146 and can
"RTN","RCBEUTR1",106,0)
 .   ;  be removed
"RTN","RCBEUTR1",107,0)
 .   S RCDRSTRG=RCDRSTRG_"10////1;"
"RTN","RCBEUTR1",108,0)
 ;
"RTN","RCBEUTR1",109,0)
 ;  contract adjustment
"RTN","RCBEUTR1",110,0)
 I $G(RCONTADJ) S RCDRSTRG=RCDRSTRG_"88///1;"
"RTN","RCBEUTR1",111,0)
 ;
"RTN","RCBEUTR1",112,0)
 ;  input the fields for the transaction
"RTN","RCBEUTR1",113,0)
 S Y=$$EDIT433^RCBEUTRA(RCTRANDA,RCDRSTRG) I 'Y L -^PRCA(433,RCTRANDA) Q 0
"RTN","RCBEUTR1",114,0)
 ;
"RTN","RCBEUTR1",115,0)
 ;  set the comment
"RTN","RCBEUTR1",116,0)
 I $D(RCCOMMNT(1)) D ADDCOMM^RCBEUTRA(RCTRANDA,.RCCOMMNT)
"RTN","RCBEUTR1",117,0)
 ;
"RTN","RCBEUTR1",118,0)
 ;  mark the transaction processed
"RTN","RCBEUTR1",119,0)
 D PROCESS^RCBEUTRA(RCTRANDA)
"RTN","RCBEUTR1",120,0)
 ;
"RTN","RCBEUTR1",121,0)
 ;  update the fiscal year multiple (must be done after marked as
"RTN","RCBEUTR1",122,0)
 ;  processed so the value is defined)
"RTN","RCBEUTR1",123,0)
 D FYMULT^RCBEUTRA(RCTRANDA)
"RTN","RCBEUTR1",124,0)
 ;
"RTN","RCBEUTR1",125,0)
 ;  update the bill file with the balance of the transaction
"RTN","RCBEUTR1",126,0)
 ; PRCA276 - add exception condition - needs to quit receipt processing when negative claim balance could result
"RTN","RCBEUTR1",127,0)
 S RCNEG=0 D SETBAL^RCBEUBIL(RCTRANDA,.RCNEG) I RCNEG D DEL433^RCBEUTRA(RCTRANDA,"CANCELLED WORKLIST DEC ADJ TO PREVENT NEG PRIN BAL",1) L -^PRCA(433,RCTRANDA) Q "0^1"
"RTN","RCBEUTR1",128,0)
 ;
"RTN","RCBEUTR1",129,0)
 ;  if the bill has no balance, close or cancel it
"RTN","RCBEUTR1",130,0)
 D CLOSEIT(RCBILLDA)
"RTN","RCBEUTR1",131,0)
 ;
"RTN","RCBEUTR1",132,0)
 ;  send FMS document if non-accrued (redo this later on)
"RTN","RCBEUTR1",133,0)
 I '$$ACCK^PRCAACC(RCBILLDA) D
"RTN","RCBEUTR1",134,0)
 .   N D0,DA,DI,DIC,DIE,DIQ2,DQ,DR,ENT,FMSNUM,GECSDATA
"RTN","RCBEUTR1",135,0)
 .   N CATEG,DATA1,ERR
"RTN","RCBEUTR1",136,0)
 .   S CATEG=$P($G(^PRCA(430,RCBILLDA,0)),"^",2)
"RTN","RCBEUTR1",137,0)
 .   ;
"RTN","RCBEUTR1",138,0)
 .   ;  category=29 champva, do not send to fms, quit
"RTN","RCBEUTR1",139,0)
 .   I CATEG=29 Q
"RTN","RCBEUTR1",140,0)
 .   ;
"RTN","RCBEUTR1",141,0)
 .   ;  category=30 tricare or 32 tricare third party, and contract adj
"RTN","RCBEUTR1",142,0)
 .   I (CATEG=30!(CATEG=32)),$P($G(^PRCA(433,RCTRANDA,8)),"^",8) D  Q
"RTN","RCBEUTR1",143,0)
 .   .   S DATA1=$G(^PRCA(433,RCTRANDA,1))
"RTN","RCBEUTR1",144,0)
 .   .   D EN^PRCAFWO(RCBILLDA,$P(DATA1,"^",1),$P(DATA1,"^",5),$$SITE^RCMSITE,RCTRANDA)
"RTN","RCBEUTR1",145,0)
 .   ;
"RTN","RCBEUTR1",146,0)
 .   ;  all other categories
"RTN","RCBEUTR1",147,0)
 .   ;  pass trans amount(1;5),trans type(1;2),trans date(1;1)
"RTN","RCBEUTR1",148,0)
 .   S DATA1=$G(^PRCA(433,RCTRANDA,1))
"RTN","RCBEUTR1",149,0)
 .   ;
"RTN","RCBEUTR1",150,0)
 .   ; PRCA*4.5*270 - pass CRD flag to FMS
"RTN","RCBEUTR1",151,0)
 .   D EN^PRCAFBDM(RCBILLDA,$P(DATA1,"^",5),$P(DATA1,"^",2),$P(DATA1,"^",1),RCTRANDA,.ERR,$G(RCCRD))
"RTN","RCBEUTR1",152,0)
 ;
"RTN","RCBEUTR1",153,0)
 ;  clear the lock and return the transaction added
"RTN","RCBEUTR1",154,0)
 L -^PRCA(433,RCTRANDA)
"RTN","RCBEUTR1",155,0)
 Q RCTRANDA
"RTN","RCBEUTR1",156,0)
 ;
"RTN","RCBEUTR1",157,0)
 ;
"RTN","RCBEUTR1",158,0)
CLOSEIT(RCBILLDA) ;  check to cancel or close bill with no balance
"RTN","RCBEUTR1",159,0)
 N AMTPAID,BILLBAL,DATA7,TRANDA
"RTN","RCBEUTR1",160,0)
 ;  if the bill has no balance, close or cancel it
"RTN","RCBEUTR1",161,0)
 S DATA7=$G(^PRCA(430,RCBILLDA,7))
"RTN","RCBEUTR1",162,0)
 S BILLBAL=$P(DATA7,"^")+$P(DATA7,"^",2)+$P(DATA7,"^",3)+$P(DATA7,"^",4)+$P(DATA7,"^",5)
"RTN","RCBEUTR1",163,0)
 I 'BILLBAL D
"RTN","RCBEUTR1",164,0)
 .   ;  get payments recorded against the bill.  if payments have been
"RTN","RCBEUTR1",165,0)
 .   ;  made, then the status of the bill should be collected/closed.
"RTN","RCBEUTR1",166,0)
 .   S AMTPAID=$P(DATA7,"^",7)+$P(DATA7,"^",8)+$P(DATA7,"^",9)+$P(DATA7,"^",10)+$P(DATA7,"^",11)
"RTN","RCBEUTR1",167,0)
 .   I AMTPAID D CHGSTAT^RCBEUBIL(RCBILLDA,22) Q
"RTN","RCBEUTR1",168,0)
 .   ;  if the last transaction was a decrease contract adjustment,
"RTN","RCBEUTR1",169,0)
 .   ;  then the status will be collected/closed
"RTN","RCBEUTR1",170,0)
 .   S TRANDA=+$O(^PRCA(433,"C",RCBILLDA,999999999999),-1)
"RTN","RCBEUTR1",171,0)
 .   I $P($G(^PRCA(433,TRANDA,8)),"^",8) D CHGSTAT^RCBEUBIL(RCBILLDA,22) Q
"RTN","RCBEUTR1",172,0)
 .   ;  otherwise it should be cancellation
"RTN","RCBEUTR1",173,0)
 .   D CHGSTAT^RCBEUBIL(RCBILLDA,39)
"RTN","RCBEUTR1",174,0)
 Q
"RTN","RCDPAPL1")
0^50^B132684346^B3375537
"RTN","RCDPAPL1",1,0)
RCDPAPL1 ;WISC/RFJ-account profile listmanager options ;1 Jun 99
"RTN","RCDPAPL1",2,0)
 ;;4.5;Accounts Receivable;**114,315**;Mar 20, 1995;Build 67
"RTN","RCDPAPL1",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCDPAPL1",4,0)
 Q
"RTN","RCDPAPL1",5,0)
 ;
"RTN","RCDPAPL1",6,0)
ACCOUNT ;  select a new account
"RTN","RCDPAPL1",7,0)
 D FULL^VALM1
"RTN","RCDPAPL1",8,0)
 S VALMBCK="R"
"RTN","RCDPAPL1",9,0)
 ;
"RTN","RCDPAPL1",10,0)
 W !!,"This option will allow you to select a new account."
"RTN","RCDPAPL1",11,0)
 W ! S %=$$SELACCT^RCDPAPLM
"RTN","RCDPAPL1",12,0)
 I %<1 Q
"RTN","RCDPAPL1",13,0)
 S RCDEBTDA=%
"RTN","RCDPAPL1",14,0)
 ;
"RTN","RCDPAPL1",15,0)
 D INIT^RCDPAPLM
"RTN","RCDPAPL1",16,0)
 Q
"RTN","RCDPAPL1",17,0)
 ;
"RTN","RCDPAPL1",18,0)
BILLTRAN ;  show transactions for a bill
"RTN","RCDPAPL1",19,0)
 N RCBILLDA
"RTN","RCDPAPL1",20,0)
 S VALMBCK="R"
"RTN","RCDPAPL1",21,0)
 ;
"RTN","RCDPAPL1",22,0)
 S RCBILLDA=$$SELBILL I 'RCBILLDA Q
"RTN","RCDPAPL1",23,0)
 D EN^VALM("RCDP TRANSACTIONS LIST")
"RTN","RCDPAPL1",24,0)
 ;
"RTN","RCDPAPL1",25,0)
 D INIT^RCDPAPLM
"RTN","RCDPAPL1",26,0)
 S VALMBCK="R"
"RTN","RCDPAPL1",27,0)
 ;  fast exit
"RTN","RCDPAPL1",28,0)
 I $G(RCDPFXIT) S VALMBCK="Q"
"RTN","RCDPAPL1",29,0)
 Q
"RTN","RCDPAPL1",30,0)
 ;
"RTN","RCDPAPL1",31,0)
BILLPROF ;  bill profile
"RTN","RCDPAPL1",32,0)
 N RCBILLDA
"RTN","RCDPAPL1",33,0)
 S VALMBCK="R"
"RTN","RCDPAPL1",34,0)
 ;
"RTN","RCDPAPL1",35,0)
 S RCBILLDA=$$SELBILL I 'RCBILLDA Q
"RTN","RCDPAPL1",36,0)
 D EN^VALM("RCDP BILL PROFILE")
"RTN","RCDPAPL1",37,0)
 ;
"RTN","RCDPAPL1",38,0)
 D INIT^RCDPAPLM
"RTN","RCDPAPL1",39,0)
 S VALMBCK="R"
"RTN","RCDPAPL1",40,0)
 ;  fast exit
"RTN","RCDPAPL1",41,0)
 I $G(RCDPFXIT) S VALMBCK="Q"
"RTN","RCDPAPL1",42,0)
 Q
"RTN","RCDPAPL1",43,0)
 ;
"RTN","RCDPAPL1",44,0)
SELBILL() ;  select bill from list
"RTN","RCDPAPL1",45,0)
 N VALMBG,VALMLST,VALMY
"RTN","RCDPAPL1",46,0)
 ;  if no bills, quit
"RTN","RCDPAPL1",47,0)
 I '$O(^TMP("RCDPAPLM",$J,"IDX",0)) S VALMSG="There are NO bills to profile." Q 0
"RTN","RCDPAPL1",48,0)
 ;
"RTN","RCDPAPL1",49,0)
 ;  if only one bill, select that one automatically
"RTN","RCDPAPL1",50,0)
 I '$O(^TMP("RCDPAPLM",$J,"IDX",1)) Q +$G(^TMP("RCDPAPLM",$J,"IDX",1,1))
"RTN","RCDPAPL1",51,0)
 ;
"RTN","RCDPAPL1",52,0)
 ;  select the entry from the list
"RTN","RCDPAPL1",53,0)
 ;  if not on first screen, make sure selection begins with 1
"RTN","RCDPAPL1",54,0)
 S VALMBG=1
"RTN","RCDPAPL1",55,0)
 ;  if not on last screen, make sure selection ends with last
"RTN","RCDPAPL1",56,0)
 S VALMLST=$O(^TMP("RCDPAPLM",$J,"IDX",999999999),-1)
"RTN","RCDPAPL1",57,0)
 D EN^VALM2($G(XQORNOD(0)),"OS")
"RTN","RCDPAPL1",58,0)
 Q +$G(^TMP("RCDPAPLM",$J,"IDX",+$O(VALMY(0)),+$O(VALMY(0))))
"RTN","RCDPAPL1",59,0)
 ;
"RTN","RCDPAPL1",60,0)
SELMULT(VALMY) ; select 0, 1, or more bills from the list
"RTN","RCDPAPL1",61,0)
 ; Output VALMY array, pass by reference.  Return format is VALMY(#)=""
"RTN","RCDPAPL1",62,0)
 ; The calling routine must then process any of the entries found in the VALMY array, one at a time.
"RTN","RCDPAPL1",63,0)
 ;
"RTN","RCDPAPL1",64,0)
 N VALMBG,VALMLST
"RTN","RCDPAPL1",65,0)
 K VALMY
"RTN","RCDPAPL1",66,0)
 ;
"RTN","RCDPAPL1",67,0)
 ; if no bills in list, then update screen message and exit
"RTN","RCDPAPL1",68,0)
 I '$O(@VALMAR@("IDX",0)) S VALMSG="There are no bills to select." G SELMX
"RTN","RCDPAPL1",69,0)
 ;
"RTN","RCDPAPL1",70,0)
 ; if there is only 1 bill in list then add that one into the VALMY array and quit
"RTN","RCDPAPL1",71,0)
 I '$O(@VALMAR@("IDX",1)) S VALMY(1)="" G SELMX
"RTN","RCDPAPL1",72,0)
 ;
"RTN","RCDPAPL1",73,0)
 ; Multiple bills in list. Ask user to select 1 or more of them
"RTN","RCDPAPL1",74,0)
 S VALMBG=1                                    ; first possible entry
"RTN","RCDPAPL1",75,0)
 S VALMLST=$O(@VALMAR@("IDX",999999999),-1)    ; last possible entry
"RTN","RCDPAPL1",76,0)
 ;
"RTN","RCDPAPL1",77,0)
 ; call the selector API
"RTN","RCDPAPL1",78,0)
 D EN^VALM2($G(XQORNOD(0)),"O")
"RTN","RCDPAPL1",79,0)
 ;
"RTN","RCDPAPL1",80,0)
SELMX ;
"RTN","RCDPAPL1",81,0)
 Q
"RTN","RCDPAPL1",82,0)
 ;
"RTN","RCDPAPL1",83,0)
SUSPEND ;Suspend a Bill PRCA*4.5*315
"RTN","RCDPAPL1",84,0)
 N GOTBILL,VALMY,RCBILLDA,RCDPGN,RCDPGC,RCDPGT,RCDPGQ,DIR,X,Y,DIRUT,DUOUT,DTOUT,DIROUT
"RTN","RCDPAPL1",85,0)
 D FULL^VALM1
"RTN","RCDPAPL1",86,0)
 D SELMULT(.VALMY) I '$O(VALMY(0)) G SUSPX
"RTN","RCDPAPL1",87,0)
 ;
"RTN","RCDPAPL1",88,0)
 ; count the number of selected entries and put into RCDPGT
"RTN","RCDPAPL1",89,0)
 S RCDPGN=0 F RCDPGT=0:1 S RCDPGN=$O(VALMY(RCDPGN)) Q:'RCDPGN
"RTN","RCDPAPL1",90,0)
 ;
"RTN","RCDPAPL1",91,0)
 W !
"RTN","RCDPAPL1",92,0)
 S (RCDPGN,RCDPGC)=0 F  S RCDPGN=$O(VALMY(RCDPGN)) Q:'RCDPGN  D  Q:$G(RCDPFXIT)!$G(RCDPGQ)
"RTN","RCDPAPL1",93,0)
 . S RCBILLDA=$G(@VALMAR@("IDX",RCDPGN,RCDPGN)) Q:'RCBILLDA
"RTN","RCDPAPL1",94,0)
 . S RCDPGC=RCDPGC+1
"RTN","RCDPAPL1",95,0)
 . W !,"  ======== Bill# ",$P($P($G(^PRCA(430,RCBILLDA,0)),U,1),"-",2)," (",RCDPGC," of ",RCDPGT," selected) ========",!
"RTN","RCDPAPL1",96,0)
 . S GOTBILL=1
"RTN","RCDPAPL1",97,0)
 . D 47^RCWROFF    ; Call into existing write-off routine for each bill selected
"RTN","RCDPAPL1",98,0)
 . I $G(RCDPGQ) W " ... exiting Bill# loop" Q
"RTN","RCDPAPL1",99,0)
 . ;
"RTN","RCDPAPL1",100,0)
 . ; special break in between each bill
"RTN","RCDPAPL1",101,0)
 . W ! S DIR(0)="E" S DIR("A")="Type <Enter> to continue"
"RTN","RCDPAPL1",102,0)
 . I (RCDPGT-RCDPGC)>0 S DIR("A")=DIR("A")_" or '^' to exit this Bill# loop"    ; if there are still more bills in loop
"RTN","RCDPAPL1",103,0)
 . D ^DIR K DIR W !
"RTN","RCDPAPL1",104,0)
 . I $D(DIRUT) S RCDPGQ=1
"RTN","RCDPAPL1",105,0)
 . Q
"RTN","RCDPAPL1",106,0)
 ;
"RTN","RCDPAPL1",107,0)
 D INIT^RCDPAPLM   ; refresh the account profile list of bills
"RTN","RCDPAPL1",108,0)
 ;
"RTN","RCDPAPL1",109,0)
SUSPX ;
"RTN","RCDPAPL1",110,0)
 S VALMBCK="R"
"RTN","RCDPAPL1",111,0)
 I $G(RCDPFXIT) S VALMBCK="Q"
"RTN","RCDPAPL1",112,0)
 Q
"RTN","RCDPAPL1",113,0)
 ;
"RTN","RCDPAPL1",114,0)
REESTAB ; Re-Establish a Bill - PRCA*4.5*315
"RTN","RCDPAPL1",115,0)
 N GOTBILL,VALMY,RCBILLDA,RCDPGN,RCDPGC,RCDPGT,RCDPGQ,DIR,X,Y,DIRUT,DUOUT,DTOUT,DIROUT
"RTN","RCDPAPL1",116,0)
 D FULL^VALM1
"RTN","RCDPAPL1",117,0)
 D SELMULT(.VALMY) I '$O(VALMY(0)) G REESTX
"RTN","RCDPAPL1",118,0)
 ;
"RTN","RCDPAPL1",119,0)
 ; count the number of selected entries and put into RCDPGT
"RTN","RCDPAPL1",120,0)
 S RCDPGN=0 F RCDPGT=0:1 S RCDPGN=$O(VALMY(RCDPGN)) Q:'RCDPGN
"RTN","RCDPAPL1",121,0)
 ;
"RTN","RCDPAPL1",122,0)
 W !
"RTN","RCDPAPL1",123,0)
 S (RCDPGN,RCDPGC)=0 F  S RCDPGN=$O(VALMY(RCDPGN)) Q:'RCDPGN  D  Q:$G(RCDPFXIT)!$G(RCDPGQ)
"RTN","RCDPAPL1",124,0)
 . S RCBILLDA=$G(@VALMAR@("IDX",RCDPGN,RCDPGN)) Q:'RCBILLDA
"RTN","RCDPAPL1",125,0)
 . S RCDPGC=RCDPGC+1
"RTN","RCDPAPL1",126,0)
 . W !,"  ======== Bill# ",$P($P($G(^PRCA(430,RCBILLDA,0)),U,1),"-",2)," (",RCDPGC," of ",RCDPGT," selected) ========",!
"RTN","RCDPAPL1",127,0)
 . S GOTBILL=1
"RTN","RCDPAPL1",128,0)
 . D ENAP^PRCAWREA(RCBILLDA)     ; Call into existing Re-Establish bill routine for each bill selected
"RTN","RCDPAPL1",129,0)
 . ;
"RTN","RCDPAPL1",130,0)
 . ; special break in between each bill
"RTN","RCDPAPL1",131,0)
 . W ! S DIR(0)="E" S DIR("A")="Type <Enter> to continue"
"RTN","RCDPAPL1",132,0)
 . I (RCDPGT-RCDPGC)>0 S DIR("A")=DIR("A")_" or '^' to exit this Bill# loop"    ; if there are still more bills in loop
"RTN","RCDPAPL1",133,0)
 . D ^DIR K DIR W !
"RTN","RCDPAPL1",134,0)
 . I $D(DIRUT) S RCDPGQ=1
"RTN","RCDPAPL1",135,0)
 . Q
"RTN","RCDPAPL1",136,0)
 ;
"RTN","RCDPAPL1",137,0)
 D INIT^RCDPAPLM   ; refresh the account profile list of bills
"RTN","RCDPAPL1",138,0)
 ;
"RTN","RCDPAPL1",139,0)
REESTX ;
"RTN","RCDPAPL1",140,0)
 S VALMBCK="R"
"RTN","RCDPAPL1",141,0)
 I $G(RCDPFXIT) S VALMBCK="Q"
"RTN","RCDPAPL1",142,0)
 Q
"RTN","RCDPAPL1",143,0)
 ;
"RTN","RCDPAPL1",144,0)
STOP ;Stop a Bill in Cross-servicing (Debtor) PRCA*4.5*315
"RTN","RCDPAPL1",145,0)
 N GOTBILL,VALMY,RCBILLDA,RCDPGN,RCDPGC,RCDPGT,RCDPGQ,DIR,X,Y,DIRUT,DUOUT,DTOUT,DIROUT
"RTN","RCDPAPL1",146,0)
 D FULL^VALM1
"RTN","RCDPAPL1",147,0)
 D SELMULT(.VALMY) I '$O(VALMY(0)) G STOPX
"RTN","RCDPAPL1",148,0)
 ;
"RTN","RCDPAPL1",149,0)
 ; count the number of selected entries and put into RCDPGT
"RTN","RCDPAPL1",150,0)
 S RCDPGN=0 F RCDPGT=0:1 S RCDPGN=$O(VALMY(RCDPGN)) Q:'RCDPGN
"RTN","RCDPAPL1",151,0)
 ;
"RTN","RCDPAPL1",152,0)
 W !
"RTN","RCDPAPL1",153,0)
 S (RCDPGN,RCDPGC)=0 F  S RCDPGN=$O(VALMY(RCDPGN)) Q:'RCDPGN  D  Q:$G(RCDPFXIT)!$G(RCDPGQ)
"RTN","RCDPAPL1",154,0)
 . S RCBILLDA=$G(@VALMAR@("IDX",RCDPGN,RCDPGN)) Q:'RCBILLDA
"RTN","RCDPAPL1",155,0)
 . S RCDPGC=RCDPGC+1
"RTN","RCDPAPL1",156,0)
 . W !,"  ======== Bill# ",$P($P($G(^PRCA(430,RCBILLDA,0)),U,1),"-",2)," (",RCDPGC," of ",RCDPGT," selected) ========",!
"RTN","RCDPAPL1",157,0)
 . S GOTBILL=1
"RTN","RCDPAPL1",158,0)
 . D STOP^RCTCSPU  ;Call into existing TOP routine for each bill selected
"RTN","RCDPAPL1",159,0)
 . I $G(RCDPGQ) W " ... exiting Bill# loop" Q
"RTN","RCDPAPL1",160,0)
 . ;
"RTN","RCDPAPL1",161,0)
 . ; special break in between each bill
"RTN","RCDPAPL1",162,0)
 . W ! S DIR(0)="E" S DIR("A")="Type <Enter> to continue"
"RTN","RCDPAPL1",163,0)
 . I (RCDPGT-RCDPGC)>0 S DIR("A")=DIR("A")_" or '^' to exit this Bill# loop"    ; if there are still more bills in loop
"RTN","RCDPAPL1",164,0)
 . D ^DIR K DIR W !
"RTN","RCDPAPL1",165,0)
 . I $D(DIRUT) S RCDPGQ=1
"RTN","RCDPAPL1",166,0)
 . Q
"RTN","RCDPAPL1",167,0)
 ;
"RTN","RCDPAPL1",168,0)
 D INIT^RCDPAPLM   ; refresh the account profile list of bills
"RTN","RCDPAPL1",169,0)
 ;
"RTN","RCDPAPL1",170,0)
STOPX ;
"RTN","RCDPAPL1",171,0)
 S VALMBCK="R"
"RTN","RCDPAPL1",172,0)
 I $G(RCDPFXIT) S VALMBCK="Q"
"RTN","RCDPAPL1",173,0)
 Q
"RTN","RCDPAPL1",174,0)
 ;
"RTN","RCDPAPL1",175,0)
TERM ;Fiscal Officer Terminated PRCA*4.5*315
"RTN","RCDPAPL1",176,0)
 N GOTBILL,VALMY,RCBILLDA,RCDPGN,RCDPGC,RCDPGT,RCDPGQ,DIR,X,Y,DIRUT,DUOUT,DTOUT,DIROUT
"RTN","RCDPAPL1",177,0)
 D FULL^VALM1
"RTN","RCDPAPL1",178,0)
 D SELMULT(.VALMY) I '$O(VALMY(0)) G TERMX
"RTN","RCDPAPL1",179,0)
 ;
"RTN","RCDPAPL1",180,0)
 ; count the number of selected entries and put into RCDPGT
"RTN","RCDPAPL1",181,0)
 S RCDPGN=0 F RCDPGT=0:1 S RCDPGN=$O(VALMY(RCDPGN)) Q:'RCDPGN
"RTN","RCDPAPL1",182,0)
 ;
"RTN","RCDPAPL1",183,0)
 W !
"RTN","RCDPAPL1",184,0)
 S (RCDPGN,RCDPGC)=0 F  S RCDPGN=$O(VALMY(RCDPGN)) Q:'RCDPGN  D  Q:$G(RCDPFXIT)!$G(RCDPGQ)
"RTN","RCDPAPL1",185,0)
 . S RCBILLDA=$G(@VALMAR@("IDX",RCDPGN,RCDPGN)) Q:'RCBILLDA
"RTN","RCDPAPL1",186,0)
 . S RCDPGC=RCDPGC+1
"RTN","RCDPAPL1",187,0)
 . W !,"  ======== Bill# ",$P($P($G(^PRCA(430,RCBILLDA,0)),U,1),"-",2)," (",RCDPGC," of ",RCDPGT," selected) ========",!
"RTN","RCDPAPL1",188,0)
 . S GOTBILL=1
"RTN","RCDPAPL1",189,0)
 . D 8^RCWROFF     ; Call into existing write-off routine for each bill selected
"RTN","RCDPAPL1",190,0)
 . I $G(RCDPGQ) W " ... exiting Bill# loop" Q
"RTN","RCDPAPL1",191,0)
 . ;
"RTN","RCDPAPL1",192,0)
 . ; special break in between each bill
"RTN","RCDPAPL1",193,0)
 . W ! S DIR(0)="E" S DIR("A")="Type <Enter> to continue"
"RTN","RCDPAPL1",194,0)
 . I (RCDPGT-RCDPGC)>0 S DIR("A")=DIR("A")_" or '^' to exit this Bill# loop"    ; if there are still more bills in loop
"RTN","RCDPAPL1",195,0)
 . D ^DIR K DIR W !
"RTN","RCDPAPL1",196,0)
 . I $D(DIRUT) S RCDPGQ=1
"RTN","RCDPAPL1",197,0)
 . Q
"RTN","RCDPAPL1",198,0)
 ;
"RTN","RCDPAPL1",199,0)
 D INIT^RCDPAPLM   ; refresh the account profile list of bills
"RTN","RCDPAPL1",200,0)
 ;
"RTN","RCDPAPL1",201,0)
TERMX ;
"RTN","RCDPAPL1",202,0)
 S VALMBCK="R"
"RTN","RCDPAPL1",203,0)
 I $G(RCDPFXIT) S VALMBCK="Q"
"RTN","RCDPAPL1",204,0)
 Q
"RTN","RCDPAPL1",205,0)
 ;
"RTN","RCDPAPL1",206,0)
RECALLB ;Recall a Bill PRCA*4.5*315
"RTN","RCDPAPL1",207,0)
 N GOTBILL,VALMY,RCBILLDA,RCDPGN,RCDPGC,RCDPGT,RCDPGQ,DIR,X,Y,DIRUT,DUOUT,DTOUT,DIROUT
"RTN","RCDPAPL1",208,0)
 D FULL^VALM1
"RTN","RCDPAPL1",209,0)
 D SELMULT(.VALMY) I '$O(VALMY(0)) G RECALBX
"RTN","RCDPAPL1",210,0)
 ;
"RTN","RCDPAPL1",211,0)
 ; count the number of selected entries and put into RCDPGT
"RTN","RCDPAPL1",212,0)
 S RCDPGN=0 F RCDPGT=0:1 S RCDPGN=$O(VALMY(RCDPGN)) Q:'RCDPGN
"RTN","RCDPAPL1",213,0)
 ;
"RTN","RCDPAPL1",214,0)
 W !
"RTN","RCDPAPL1",215,0)
 S (RCDPGN,RCDPGC)=0 F  S RCDPGN=$O(VALMY(RCDPGN)) Q:'RCDPGN  D  Q:$G(RCDPFXIT)!$G(RCDPGQ)
"RTN","RCDPAPL1",216,0)
 . S RCBILLDA=$G(@VALMAR@("IDX",RCDPGN,RCDPGN)) Q:'RCBILLDA
"RTN","RCDPAPL1",217,0)
 . S RCDPGC=RCDPGC+1
"RTN","RCDPAPL1",218,0)
 . W !,"  ======== Bill# ",$P($P($G(^PRCA(430,RCBILLDA,0)),U,1),"-",2)," (",RCDPGC," of ",RCDPGT," selected) ========",!
"RTN","RCDPAPL1",219,0)
 . S GOTBILL=1
"RTN","RCDPAPL1",220,0)
 . D RCLLSETB^RCTCSPU    ; Call into existing recall code
"RTN","RCDPAPL1",221,0)
 . I $G(RCDPGQ) W " ... exiting Bill# loop" Q
"RTN","RCDPAPL1",222,0)
 . ;
"RTN","RCDPAPL1",223,0)
 . ; special break in between each bill
"RTN","RCDPAPL1",224,0)
 . W ! S DIR(0)="E" S DIR("A")="Type <Enter> to continue"
"RTN","RCDPAPL1",225,0)
 . I (RCDPGT-RCDPGC)>0 S DIR("A")=DIR("A")_" or '^' to exit this Bill# loop"    ; if there are still more bills in loop
"RTN","RCDPAPL1",226,0)
 . D ^DIR K DIR W !
"RTN","RCDPAPL1",227,0)
 . I $D(DIRUT) S RCDPGQ=1
"RTN","RCDPAPL1",228,0)
 . Q
"RTN","RCDPAPL1",229,0)
 ;
"RTN","RCDPAPL1",230,0)
 D INIT^RCDPAPLM   ; refresh the account profile list of bills
"RTN","RCDPAPL1",231,0)
 ;
"RTN","RCDPAPL1",232,0)
RECALBX ;
"RTN","RCDPAPL1",233,0)
 S VALMBCK="R"
"RTN","RCDPAPL1",234,0)
 I $G(RCDPFXIT) S VALMBCK="Q"
"RTN","RCDPAPL1",235,0)
 Q
"RTN","RCDPAPL1",236,0)
 ;
"RTN","RCDPAPL1",237,0)
RECALLD ;Recall a Debtor PRCA*4.5*315
"RTN","RCDPAPL1",238,0)
 N GOTDEBT,DIR,X,Y,DIRUT,DUOUT,DTOUT,DIROUT
"RTN","RCDPAPL1",239,0)
 D FULL^VALM1
"RTN","RCDPAPL1",240,0)
 S RCDEBTDA=+$G(RCDEBTDA)     ; RCDEBTDA is set by the ACCTPR^RCTCSWL - Account Profile action protocol
"RTN","RCDPAPL1",241,0)
 I 'RCDEBTDA G RECALDX
"RTN","RCDPAPL1",242,0)
 ;
"RTN","RCDPAPL1",243,0)
 S GOTDEBT=1
"RTN","RCDPAPL1",244,0)
 D RCLLSETD^RCTCSPU     ; Call into existing recall code for debtors
"RTN","RCDPAPL1",245,0)
 D PAUSE^VALM1
"RTN","RCDPAPL1",246,0)
 D INIT^RCDPAPLM        ; refresh the account profile list of bills
"RTN","RCDPAPL1",247,0)
RECALDX ;
"RTN","RCDPAPL1",248,0)
 S VALMBCK="R"
"RTN","RCDPAPL1",249,0)
 I $G(RCDPFXIT) S VALMBCK="Q"
"RTN","RCDPAPL1",250,0)
 Q
"RTN","RCDPAPL1",251,0)
 ;
"RTN","RCDPAPL1",252,0)
INC ;Increase Transaction PRCA*4.5*315
"RTN","RCDPAPL1",253,0)
 N GOTBILL,VALMY,RCBILLDA,RCDPGN,RCDPGC,RCDPGT,RCDPGQ,DIR,X,Y,DIRUT,DUOUT,DTOUT,DIROUT
"RTN","RCDPAPL1",254,0)
 D FULL^VALM1
"RTN","RCDPAPL1",255,0)
 ;
"RTN","RCDPAPL1",256,0)
 ; check on security key - same one used in the menu system for AR option PRCAC TR ADJUSTMENT
"RTN","RCDPAPL1",257,0)
 I '$D(^XUSEC("PRCADJ",DUZ)) D  G INCX
"RTN","RCDPAPL1",258,0)
 . W *7,!!?3,"You must hold the PRCADJ security key in order to access this option.",!
"RTN","RCDPAPL1",259,0)
 . D PAUSE^VALM1
"RTN","RCDPAPL1",260,0)
 . Q
"RTN","RCDPAPL1",261,0)
 ;
"RTN","RCDPAPL1",262,0)
 D SELMULT(.VALMY) I '$O(VALMY(0)) G INCX
"RTN","RCDPAPL1",263,0)
 ;
"RTN","RCDPAPL1",264,0)
 ; count the number of selected entries and put into RCDPGT
"RTN","RCDPAPL1",265,0)
 S RCDPGN=0 F RCDPGT=0:1 S RCDPGN=$O(VALMY(RCDPGN)) Q:'RCDPGN
"RTN","RCDPAPL1",266,0)
 ;
"RTN","RCDPAPL1",267,0)
 W !
"RTN","RCDPAPL1",268,0)
 S (RCDPGN,RCDPGC)=0 F  S RCDPGN=$O(VALMY(RCDPGN)) Q:'RCDPGN  D  Q:$G(RCDPFXIT)!$G(RCDPGQ)
"RTN","RCDPAPL1",269,0)
 . S RCBILLDA=$G(@VALMAR@("IDX",RCDPGN,RCDPGN)) Q:'RCBILLDA
"RTN","RCDPAPL1",270,0)
 . S RCDPGC=RCDPGC+1
"RTN","RCDPAPL1",271,0)
 . W !,"  ======== Bill# ",$P($P($G(^PRCA(430,RCBILLDA,0)),U,1),"-",2)," (",RCDPGC," of ",RCDPGT," selected) ========",!
"RTN","RCDPAPL1",272,0)
 . S GOTBILL=1
"RTN","RCDPAPL1",273,0)
 . D INCREASE^RCBEADJ    ; Call into existing increase code
"RTN","RCDPAPL1",274,0)
 . I $G(RCDPGQ) W " ... exiting Bill# loop" Q
"RTN","RCDPAPL1",275,0)
 . ;
"RTN","RCDPAPL1",276,0)
 . ; special break in between each bill
"RTN","RCDPAPL1",277,0)
 . W ! S DIR(0)="E" S DIR("A")="Type <Enter> to continue"
"RTN","RCDPAPL1",278,0)
 . I (RCDPGT-RCDPGC)>0 S DIR("A")=DIR("A")_" or '^' to exit this Bill# loop"    ; if there are still more bills in loop
"RTN","RCDPAPL1",279,0)
 . D ^DIR K DIR W !
"RTN","RCDPAPL1",280,0)
 . I $D(DIRUT) S RCDPGQ=1
"RTN","RCDPAPL1",281,0)
 . Q
"RTN","RCDPAPL1",282,0)
 ;
"RTN","RCDPAPL1",283,0)
 D INIT^RCDPAPLM   ; refresh the account profile list of bills
"RTN","RCDPAPL1",284,0)
 ;
"RTN","RCDPAPL1",285,0)
INCX ;
"RTN","RCDPAPL1",286,0)
 S VALMBCK="R"
"RTN","RCDPAPL1",287,0)
 I $G(RCDPFXIT) S VALMBCK="Q"
"RTN","RCDPAPL1",288,0)
 Q
"RTN","RCDPAPL1",289,0)
 ;
"RTN","RCDPAPL1",290,0)
DEC ;Decrease Transaction PRCA*4.5*315
"RTN","RCDPAPL1",291,0)
 N GOTBILL,VALMY,RCBILLDA,RCDPGN,RCDPGC,RCDPGT,RCDPGQ,DIR,X,Y,DIRUT,DUOUT,DTOUT,DIROUT
"RTN","RCDPAPL1",292,0)
 D FULL^VALM1
"RTN","RCDPAPL1",293,0)
 ;
"RTN","RCDPAPL1",294,0)
 ; check on security key - same one used in the menu system for AR option PRCAC TR ADJUSTMENT
"RTN","RCDPAPL1",295,0)
 I '$D(^XUSEC("PRCADJ",DUZ)) D  G DECX
"RTN","RCDPAPL1",296,0)
 . W *7,!!?3,"You must hold the PRCADJ security key in order to access this option.",!
"RTN","RCDPAPL1",297,0)
 . D PAUSE^VALM1
"RTN","RCDPAPL1",298,0)
 . Q
"RTN","RCDPAPL1",299,0)
 ;
"RTN","RCDPAPL1",300,0)
 D SELMULT(.VALMY) I '$O(VALMY(0)) G DECX
"RTN","RCDPAPL1",301,0)
 ;
"RTN","RCDPAPL1",302,0)
 ; count the number of selected entries and put into RCDPGT
"RTN","RCDPAPL1",303,0)
 S RCDPGN=0 F RCDPGT=0:1 S RCDPGN=$O(VALMY(RCDPGN)) Q:'RCDPGN
"RTN","RCDPAPL1",304,0)
 ;
"RTN","RCDPAPL1",305,0)
 W !
"RTN","RCDPAPL1",306,0)
 S (RCDPGN,RCDPGC)=0 F  S RCDPGN=$O(VALMY(RCDPGN)) Q:'RCDPGN  D  Q:$G(RCDPFXIT)!$G(RCDPGQ)
"RTN","RCDPAPL1",307,0)
 . S RCBILLDA=$G(@VALMAR@("IDX",RCDPGN,RCDPGN)) Q:'RCBILLDA
"RTN","RCDPAPL1",308,0)
 . S RCDPGC=RCDPGC+1
"RTN","RCDPAPL1",309,0)
 . W !,"  ======== Bill# ",$P($P($G(^PRCA(430,RCBILLDA,0)),U,1),"-",2)," (",RCDPGC," of ",RCDPGT," selected) ========",!
"RTN","RCDPAPL1",310,0)
 . S GOTBILL=1
"RTN","RCDPAPL1",311,0)
 . D DECREASE^RCBEADJ    ; Call into existing decrease code
"RTN","RCDPAPL1",312,0)
 . I $G(RCDPGQ) W " ... exiting Bill# loop" Q
"RTN","RCDPAPL1",313,0)
 . ;
"RTN","RCDPAPL1",314,0)
 . ; special break in between each bill
"RTN","RCDPAPL1",315,0)
 . W ! S DIR(0)="E" S DIR("A")="Type <Enter> to continue"
"RTN","RCDPAPL1",316,0)
 . I (RCDPGT-RCDPGC)>0 S DIR("A")=DIR("A")_" or '^' to exit this Bill# loop"    ; if there are still more bills in loop
"RTN","RCDPAPL1",317,0)
 . D ^DIR K DIR W !
"RTN","RCDPAPL1",318,0)
 . I $D(DIRUT) S RCDPGQ=1
"RTN","RCDPAPL1",319,0)
 . Q
"RTN","RCDPAPL1",320,0)
 ;
"RTN","RCDPAPL1",321,0)
 D INIT^RCDPAPLM   ; refresh the account profile list of bills
"RTN","RCDPAPL1",322,0)
 ;
"RTN","RCDPAPL1",323,0)
DECX ;
"RTN","RCDPAPL1",324,0)
 S VALMBCK="R"
"RTN","RCDPAPL1",325,0)
 I $G(RCDPFXIT) S VALMBCK="Q"
"RTN","RCDPAPL1",326,0)
 Q
"RTN","RCDPAPL1",327,0)
 ;
"RTN","RCDPAPLI")
0^65^B53951998^B46722534
"RTN","RCDPAPLI",1,0)
RCDPAPLI ;WISC/RFJ-account profile top list manager init ;1 Jun 99
"RTN","RCDPAPLI",2,0)
 ;;4.5;Accounts Receivable;**114,141,241,303,301,315**;Mar 20, 1995;Build 67
"RTN","RCDPAPLI",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCDPAPLI",4,0)
 Q
"RTN","RCDPAPLI",5,0)
 ;
"RTN","RCDPAPLI",6,0)
INIT ;  init for list manager screen
"RTN","RCDPAPLI",7,0)
 N DMCDATA,RCBILLDA,RCCOMM,RCDATA,RCDATE,RCLINE,RCSTATDA,RCTOTAL
"RTN","RCDPAPLI",8,0)
 N TOP4,TOP6
"RTN","RCDPAPLI",9,0)
 K ^TMP("RCDPAPLM",$J),^TMP("RCDPAPLMX",$J),^TMP("VALM VIDEO",$J)
"RTN","RCDPAPLI",10,0)
 ;
"RTN","RCDPAPLI",11,0)
 ;  fast exit
"RTN","RCDPAPLI",12,0)
 I $G(RCDPFXIT) S VALMQUIT=1 Q
"RTN","RCDPAPLI",13,0)
 ;
"RTN","RCDPAPLI",14,0)
 I '$G(RCDEBTDA) D  Q
"RTN","RCDPAPLI",15,0)
 .   D SET("",1,1,80)
"RTN","RCDPAPLI",16,0)
 .   D SET("*****  Select an ACCOUNT  *****",2,1,80)
"RTN","RCDPAPLI",17,0)
 .   S VALMCNT=2
"RTN","RCDPAPLI",18,0)
 .   D HDR^RCDPAPLM
"RTN","RCDPAPLI",19,0)
 ;
"RTN","RCDPAPLI",20,0)
 ;  get bills for a debtor
"RTN","RCDPAPLI",21,0)
 D GETBILLS^RCDPAPST(RCDEBTDA)
"RTN","RCDPAPLI",22,0)
 ;
"RTN","RCDPAPLI",23,0)
 I '$O(^TMP("RCDPAPST",$J,0)) D  Q
"RTN","RCDPAPLI",24,0)
 .   D SET("",1,1,80,IORVOFF,IORVOFF)
"RTN","RCDPAPLI",25,0)
 .   D SET("  *****  Account does not have any bills *****",2,1,80)
"RTN","RCDPAPLI",26,0)
 .   S VALMCNT=2
"RTN","RCDPAPLI",27,0)
 .   S RCTOTAL(1)=0
"RTN","RCDPAPLI",28,0)
 .   D HDR^RCDPAPLM
"RTN","RCDPAPLI",29,0)
 ;
"RTN","RCDPAPLI",30,0)
 ;  set the listmanager line number
"RTN","RCDPAPLI",31,0)
 S RCLINE=0
"RTN","RCDPAPLI",32,0)
 ;
"RTN","RCDPAPLI",33,0)
 S RCDATE=9999999 F  S RCDATE=$O(^TMP("RCDPAPST",$J,RCDATE),-1) Q:'RCDATE  D
"RTN","RCDPAPLI",34,0)
 .   S RCSTATDA=0 F  S RCSTATDA=$O(^TMP("RCDPAPST",$J,RCDATE,RCSTATDA)) Q:'RCSTATDA  D
"RTN","RCDPAPLI",35,0)
 .   .   S RCBILLDA=0 F  S RCBILLDA=$O(^TMP("RCDPAPST",$J,RCDATE,RCSTATDA,RCBILLDA)) Q:'RCBILLDA  D
"RTN","RCDPAPLI",36,0)
 .   .   .   S RCDATA=^TMP("RCDPAPST",$J,RCDATE,RCSTATDA,RCBILLDA)
"RTN","RCDPAPLI",37,0)
 .   .   .   ;  add up dollars owed by account (all bills)
"RTN","RCDPAPLI",38,0)
 .   .   .   S RCTOTAL(1)=$G(RCTOTAL(1))+$P(RCDATA,"^")
"RTN","RCDPAPLI",39,0)
 .   .   .   S RCTOTAL(2)=$G(RCTOTAL(2))+$P(RCDATA,"^",2)
"RTN","RCDPAPLI",40,0)
 .   .   .   S RCTOTAL(3)=$G(RCTOTAL(3))+$P(RCDATA,"^",3)
"RTN","RCDPAPLI",41,0)
 .   .   .   ;
"RTN","RCDPAPLI",42,0)
 .   .   .   ;  if not a selected status, do not display
"RTN","RCDPAPLI",43,0)
 .   .   .   I ("^"_$G(^DISV(DUZ,"RCDPAPLM","STATUS"))_"^")'[("^"_RCSTATDA_"^") Q
"RTN","RCDPAPLI",44,0)
 .   .   .   ;
"RTN","RCDPAPLI",45,0)
 .   .   .   ;  display the bill in listmanager if the status selected
"RTN","RCDPAPLI",46,0)
 .   .   .   D SETBILL
"RTN","RCDPAPLI",47,0)
 .   .   .   ;
"RTN","RCDPAPLI",48,0)
 .   .   .   ;  add up dollars owed by account (bills displayed)
"RTN","RCDPAPLI",49,0)
 .   .   .   S RCTOTAL(4)=$G(RCTOTAL(4))+$P(RCDATA,"^")
"RTN","RCDPAPLI",50,0)
 .   .   .   S RCTOTAL(5)=$G(RCTOTAL(5))+$P(RCDATA,"^",2)
"RTN","RCDPAPLI",51,0)
 .   .   .   S RCTOTAL(6)=$G(RCTOTAL(6))+$P(RCDATA,"^",3)
"RTN","RCDPAPLI",52,0)
 ;
"RTN","RCDPAPLI",53,0)
 ;  show totals of all bills displayed in listmanager
"RTN","RCDPAPLI",54,0)
 S RCLINE=RCLINE+1
"RTN","RCDPAPLI",55,0)
 D SET("                                                    --------- -------- --------",RCLINE,1,80)
"RTN","RCDPAPLI",56,0)
 S RCLINE=RCLINE+1
"RTN","RCDPAPLI",57,0)
 D SET("   TOTAL BALANCE OWED FOR ALL BILLS DISPLAYED",RCLINE,1,80)
"RTN","RCDPAPLI",58,0)
 D SET($J($G(RCTOTAL(4)),9,2),RCLINE,53,62)
"RTN","RCDPAPLI",59,0)
 D SET($J($G(RCTOTAL(5)),9,2),RCLINE,62,71)
"RTN","RCDPAPLI",60,0)
 D SET($J($G(RCTOTAL(6)),9,2),RCLINE,71,80)
"RTN","RCDPAPLI",61,0)
 ;
"RTN","RCDPAPLI",62,0)
 ;  get the pending payments for the debtor
"RTN","RCDPAPLI",63,0)
 S RCTOTAL("PP")=$$PENDPAY^RCDPURET($P(^RCD(340,RCDEBTDA,0),"^"))
"RTN","RCDPAPLI",64,0)
 I $O(^TMP($J,"RCDPUREC","PP",0)) D
"RTN","RCDPAPLI",65,0)
 .   S RCLINE=RCLINE+1 D SET(" ",RCLINE,1,80)
"RTN","RCDPAPLI",66,0)
 .   S RCLINE=RCLINE+1 D SET("Pending Payments",RCLINE,1,80,0,IORVON,IORVOFF)
"RTN","RCDPAPLI",67,0)
 .   N %,DATA,DATE,RECEIPT,RECTDA,TRANDA,TYPE
"RTN","RCDPAPLI",68,0)
 .   S RECTDA=0 F  S RECTDA=$O(^TMP($J,"RCDPUREC","PP",RECTDA)) Q:'RECTDA  D
"RTN","RCDPAPLI",69,0)
 .   .   S RECEIPT=$P($G(^RCY(344,RECTDA,0)),"^")
"RTN","RCDPAPLI",70,0)
 .   .   S TYPE=$E($P($G(^RC(341.1,+$P(^RCY(344,RECTDA,0),"^",4),0)),"^"),1,14)
"RTN","RCDPAPLI",71,0)
 .   .   S TRANDA=0 F  S TRANDA=$O(^TMP($J,"RCDPUREC","PP",RECTDA,TRANDA)) Q:'TRANDA  D
"RTN","RCDPAPLI",72,0)
 .   .   .   S DATA=^TMP($J,"RCDPUREC","PP",RECTDA,TRANDA)
"RTN","RCDPAPLI",73,0)
 .   .   .   S RCLINE=RCLINE+1
"RTN","RCDPAPLI",74,0)
 .   .   .   D SET(RECEIPT_"/"_TRANDA,RCLINE,1,80)
"RTN","RCDPAPLI",75,0)
 .   .   .   S DATE=$P(DATA,"^",6)
"RTN","RCDPAPLI",76,0)
 .   .   .   S DATE=$E(DATE,4,5)_"/"_$E(DATE,6,7)_"/"_$E(DATE,2,3)
"RTN","RCDPAPLI",77,0)
 .   .   .   D SET(DATE,RCLINE,13,21)
"RTN","RCDPAPLI",78,0)
 .   .   .   ;  build type of payment display
"RTN","RCDPAPLI",79,0)
 .   .   .   S %=$E(TYPE_"              ",1,14)
"RTN","RCDPAPLI",80,0)
 .   .   .   I $P(DATA,"^",7)'="" S %=%_"/"_$P(DATA,"^",7)  ;  check #
"RTN","RCDPAPLI",81,0)
 .   .   .   I $P(DATA,"^",8)'="" S %=%_"/"_$P(DATA,"^",8)  ;  bank #
"RTN","RCDPAPLI",82,0)
 .   .   .   I $P(DATA,"^",2)'="" S %=%_"/"_$P(DATA,"^",2)  ;  confirmation
"RTN","RCDPAPLI",83,0)
 .   .   .   D SET(%,RCLINE,29,53)
"RTN","RCDPAPLI",84,0)
 .   .   .   ;  show amount paid
"RTN","RCDPAPLI",85,0)
 .   .   .   D SET($J($P(DATA,"^",4),9,2),RCLINE,53,62)
"RTN","RCDPAPLI",86,0)
 .   S RCLINE=RCLINE+1
"RTN","RCDPAPLI",87,0)
 .   D SET("                                                    ---------",RCLINE,1,80)
"RTN","RCDPAPLI",88,0)
 .   S RCLINE=RCLINE+1
"RTN","RCDPAPLI",89,0)
 .   D SET("   TOTAL PENDING PAYMENTS",RCLINE,1,80)
"RTN","RCDPAPLI",90,0)
 .   D SET($J($G(RCTOTAL("PP")),9,2),RCLINE,53,62)
"RTN","RCDPAPLI",91,0)
 .   K ^TMP($J,"RCDPUREC","PP")
"RTN","RCDPAPLI",92,0)
 ;
"RTN","RCDPAPLI",93,0)
 ;  dmc info
"RTN","RCDPAPLI",94,0)
 I $D(^RCD(340,"DMC",1,+RCDEBTDA)) D
"RTN","RCDPAPLI",95,0)
 .   S DMCDATA=$G(^RCD(340,+RCDEBTDA,3))
"RTN","RCDPAPLI",96,0)
 .   S RCLINE=RCLINE+1 D SET(" ",RCLINE,1,80)
"RTN","RCDPAPLI",97,0)
 .   S RCLINE=RCLINE+1
"RTN","RCDPAPLI",98,0)
 .   D SET("** Account forwarded to DMC: "_$S('$P(DMCDATA,"^",2):"",1:$$SLH^RCFN01($P(DMCDATA,"^",2))),RCLINE,1,80)
"RTN","RCDPAPLI",99,0)
 .   D SET("Total DMC Amount: "_$J($P(DMCDATA,"^",5),9,2),RCLINE,50,80)
"RTN","RCDPAPLI",100,0)
 .   I $P(DMCDATA,"^",9)'="" D
"RTN","RCDPAPLI",101,0)
 .   .   S RCLINE=RCLINE+1
"RTN","RCDPAPLI",102,0)
 .   .   D SET(" ",RCLINE,1,80)
"RTN","RCDPAPLI",103,0)
 .   .   D SET("Lesser Amt to DMC: "_$J($P(DMCDATA,"^",9),9,2),RCLINE,49,80)
"RTN","RCDPAPLI",104,0)
 ;   top info
"RTN","RCDPAPLI",105,0)
 I $D(^RCD(340,"TOP",+RCDEBTDA)) D
"RTN","RCDPAPLI",106,0)
 .   S TOP6=$G(^RCD(340,+RCDEBTDA,6)),TOP4=$G(^(4))
"RTN","RCDPAPLI",107,0)
 .   S RCLINE=RCLINE+1 D SET(" ",RCLINE,1,80)
"RTN","RCDPAPLI",108,0)
 .   S RCLINE=RCLINE+1
"RTN","RCDPAPLI",109,0)
 .   D SET("** Account forwarded to TOP: "_$S('$P(TOP6,"^"):"",1:$$SLH^RCFN01($P(TOP6,"^"))),RCLINE,1,80)
"RTN","RCDPAPLI",110,0)
 .   D SET("Total TOP Amount: "_$J($P(TOP4,"^",3),13,2),RCLINE,45,80)
"RTN","RCDPAPLI",111,0)
 .   I $P(TOP6,"^",6)'="" D
"RTN","RCDPAPLI",112,0)
 .   .   S RCLINE=RCLINE+1
"RTN","RCDPAPLI",113,0)
 .   .   D SET(" ",RCLINE,1,80)
"RTN","RCDPAPLI",114,0)
 .   .   D SET("TOP Hold Date: "_$$SLH^RCFN01($P(TOP6,"^",6)),RCLINE,45,80)
"RTN","RCDPAPLI",115,0)
 ;
"RTN","RCDPAPLI",116,0)
 ;   cross-servicing info
"RTN","RCDPAPLI",117,0)
 I $D(^RCD(340,"TCSP",+RCDEBTDA)) D
"RTN","RCDPAPLI",118,0)
 .   S RCLINE=RCLINE+1 D SET(" ",RCLINE,1,80)
"RTN","RCDPAPLI",119,0)
 .   S RCLINE=RCLINE+1
"RTN","RCDPAPLI",120,0)
 .   D SET^RCDPBPLM("Debt Referred to Cross-Servicing",RCLINE,1,80)
"RTN","RCDPAPLI",121,0)
 .   D SET("Total CS Debt: "_$J($$TOTALB^RCTCSPU(+RCDEBTDA),13,2),RCLINE,45,80)
"RTN","RCDPAPLI",122,0)
 ;
"RTN","RCDPAPLI",123,0)
 ;  show if hurricane katrina vet
"RTN","RCDPAPLI",124,0)
 I $P(^RCD(340,+RCDEBTDA,0),U)["DPT(" S DFN=+^(0) D
"RTN","RCDPAPLI",125,0)
 .   Q:$$EMGRES^DGUTL(DFN)'["K"
"RTN","RCDPAPLI",126,0)
 .   S RCLINE=RCLINE+1
"RTN","RCDPAPLI",127,0)
 .   D SET("EMERGENCY RESPONSE INDICATOR: HURRICANE KATRINA",RCLINE,1,80)
"RTN","RCDPAPLI",128,0)
 ;
"RTN","RCDPAPLI",129,0)
 ;  show comments if they exist
"RTN","RCDPAPLI",130,0)
 I $O(^RCD(340,RCDEBTDA,2,0)) D
"RTN","RCDPAPLI",131,0)
 .   S RCLINE=RCLINE+1 D SET(" ",RCLINE,1,80)
"RTN","RCDPAPLI",132,0)
 .   S RCLINE=RCLINE+1 D SET("Comments",RCLINE,1,80,0,IOUON,IOUOFF)
"RTN","RCDPAPLI",133,0)
 .   S RCCOMM=0 F  S RCCOMM=$O(^RCD(340,RCDEBTDA,2,RCCOMM)) Q:'RCCOMM  D
"RTN","RCDPAPLI",134,0)
 .   .   S RCLINE=RCLINE+1 D SET(^RCD(340,RCDEBTDA,2,RCCOMM,0),RCLINE,1,80)
"RTN","RCDPAPLI",135,0)
 ;
"RTN","RCDPAPLI",136,0)
 K ^TMP("RCDPAPST",$J)
"RTN","RCDPAPLI",137,0)
 ;
"RTN","RCDPAPLI",138,0)
 ;  set valmcnt to number of lines in the list
"RTN","RCDPAPLI",139,0)
 S VALMCNT=RCLINE
"RTN","RCDPAPLI",140,0)
 D HDR^RCDPAPLM
"RTN","RCDPAPLI",141,0)
 Q
"RTN","RCDPAPLI",142,0)
 ;
"RTN","RCDPAPLI",143,0)
 ;
"RTN","RCDPAPLI",144,0)
SETBILL ;  set a bill on the listmanager line
"RTN","RCDPAPLI",145,0)
 N DATE,IBCNDATA,RCDPDATA,REJECT,VALUE
"RTN","RCDPAPLI",146,0)
 D DIQ430^RCDPBPLM(RCBILLDA,".01;2;3;8;60;")
"RTN","RCDPAPLI",147,0)
 ;
"RTN","RCDPAPLI",148,0)
 S RCLINE=RCLINE+1
"RTN","RCDPAPLI",149,0)
 ;
"RTN","RCDPAPLI",150,0)
 ;  create an index array for bill lookup in list
"RTN","RCDPAPLI",151,0)
 S ^TMP("RCDPAPLM",$J,"IDX",RCLINE,RCLINE)=RCBILLDA
"RTN","RCDPAPLI",152,0)
 ;
"RTN","RCDPAPLI",153,0)
 ;  bill number
"RTN","RCDPAPLI",154,0)
 ;PRCA*4.5*303 - add reject indicator to kbill ; IA# 6060
"RTN","RCDPAPLI",155,0)
 S REJECT=$$BILLREJ^IBJTU6($P(RCDPDATA(430,RCBILLDA,.01,"E"),"-",2))
"RTN","RCDPAPLI",156,0)
 D SET(RCLINE,RCLINE,1,80,0,IORVON,IORVOFF)
"RTN","RCDPAPLI",157,0)
 D SET($S(REJECT:"c",1:"")_$E($P(RCDPDATA(430,RCBILLDA,.01,"E"),"-",2)_"       ",1,7),RCLINE,7,14,0) ;PRCA*3.5*315 increase left margin
"RTN","RCDPAPLI",158,0)
 ;PRCA*4.5*303 - End
"RTN","RCDPAPLI",159,0)
 ;
"RTN","RCDPAPLI",160,0)
 ; PRCA*4.5*315 - add "x" or "y" indicator to kbill
"RTN","RCDPAPLI",161,0)
 N CSDATE1,CSDATE2,RCIND
"RTN","RCDPAPLI",162,0)
 S CSDATE1=$$GET1^DIQ(430,RCBILLDA,"DATE BILL REFERRED TO TCSP","I")
"RTN","RCDPAPLI",163,0)
 S CSDATE2=$$GET1^DIQ(430,RCBILLDA,"ORIGINAL DATE REFERRED TO TCSP","I")
"RTN","RCDPAPLI",164,0)
 D SET(RCLINE,RCLINE,1,80,0,IORVON,IORVOFF)
"RTN","RCDPAPLI",165,0)
 S RCIND=$S(CSDATE1'="":"x",CSDATE2'="":"y",1:"")
"RTN","RCDPAPLI",166,0)
 I RCIND]"" D SET(RCIND_$E($P(RCDPDATA(430,RCBILLDA,.01,"E"),"-",2)_"       ",1,7),RCLINE,7,15,0)
"RTN","RCDPAPLI",167,0)
 I RCIND="" D SET(RCIND_$E($P(RCDPDATA(430,RCBILLDA,.01,"E"),"-",2)_"       ",1,7),RCLINE,8,15,0)
"RTN","RCDPAPLI",168,0)
 ;PRCA*4.5*315 End
"RTN","RCDPAPLI",169,0)
 ;
"RTN","RCDPAPLI",170,0)
 ;  get date of care
"RTN","RCDPAPLI",171,0)
 D DIQ399^RCXFMSUR(RCBILLDA)
"RTN","RCDPAPLI",172,0)
 S DATE=$G(IBCNDATA(399,RCBILLDA,151,"I"))
"RTN","RCDPAPLI",173,0)
 I 'DATE S DATE=$G(RCDPDATA(430,RCBILLDA,60,"I"))
"RTN","RCDPAPLI",174,0)
 S DATE=$E(DATE,4,5)_"/"_$E(DATE,6,7)_"/"_$E(DATE,2,3)
"RTN","RCDPAPLI",175,0)
 ;D SET(DATE,RCLINE,13,21,0)
"RTN","RCDPAPLI",176,0)
 D SET(DATE,RCLINE,17,24,0) ;PRCA*4.5*315
"RTN","RCDPAPLI",177,0)
 ;
"RTN","RCDPAPLI",178,0)
 ;  status (field 8)
"RTN","RCDPAPLI",179,0)
 ;D SET("",RCLINE,23,26,8)
"RTN","RCDPAPLI",180,0)
 D SET("",RCLINE,27,30,8) ;PRCA*4.5*315
"RTN","RCDPAPLI",181,0)
 ;
"RTN","RCDPAPLI",182,0)
 ;  type of care
"RTN","RCDPAPLI",183,0)
 ;D SET("",RCLINE,29,71,2)
"RTN","RCDPAPLI",184,0)
 D SET("",RCLINE,33,53,2) ;PRCA*4.5*315
"RTN","RCDPAPLI",185,0)
 ;
"RTN","RCDPAPLI",186,0)
 ;  principle, interest, admin
"RTN","RCDPAPLI",187,0)
 D SET($J($P(RCDATA,"^"),9,2),RCLINE,53,62,0)
"RTN","RCDPAPLI",188,0)
 D SET($J($P(RCDATA,"^",2),9,2),RCLINE,62,71,0)
"RTN","RCDPAPLI",189,0)
 D SET($J($P(RCDATA,"^",3),9,2),RCLINE,71,80,0)
"RTN","RCDPAPLI",190,0)
 Q
"RTN","RCDPAPLI",191,0)
 ;
"RTN","RCDPAPLI",192,0)
 ;
"RTN","RCDPAPLI",193,0)
SET(STRING,LINE,COLBEG,COLEND,FIELD,ON,OFF) ;  set array
"RTN","RCDPAPLI",194,0)
 I $G(FIELD) S STRING=STRING_$S(STRING="":"",1:": ")_$G(RCDPDATA(430,RCBILLDA,FIELD,"E"))
"RTN","RCDPAPLI",195,0)
 I STRING="",'$G(FIELD) D SET^VALM10(LINE,$J("",80)) Q
"RTN","RCDPAPLI",196,0)
 I '$D(@VALMAR@(LINE,0)) D SET^VALM10(LINE,$J("",80))
"RTN","RCDPAPLI",197,0)
 D SET^VALM10(LINE,$$SETSTR^VALM1(STRING,@VALMAR@(LINE,0),COLBEG,COLEND-COLBEG+1))
"RTN","RCDPAPLI",198,0)
 I $G(ON)]""!($G(OFF)]"") D CNTRL^VALM10(LINE,COLBEG,$L(STRING),ON,OFF)
"RTN","RCDPAPLI",199,0)
 Q
"RTN","RCDPBPLI")
0^33^B60001669^B57251656
"RTN","RCDPBPLI",1,0)
RCDPBPLI ;WISC/RFJ-bill profile (build array cont employee/vendor) ;1 Jun 99
"RTN","RCDPBPLI",2,0)
 ;;4.5;Accounts Receivable;**114,153,301,315**;Mar 20, 1995;Build 67
"RTN","RCDPBPLI",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCDPBPLI",4,0)
 ;
"RTN","RCDPBPLI",5,0)
 Q
"RTN","RCDPBPLI",6,0)
 ;
"RTN","RCDPBPLI",7,0)
 ;
"RTN","RCDPBPLI",8,0)
INIT ;  initialization for list manager list
"RTN","RCDPBPLI",9,0)
 ;  report type for employee or vendor, show description field 106
"RTN","RCDPBPLI",10,0)
 N COMMDA,DATA,DESCDA,TEXT
"RTN","RCDPBPLI",11,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM(" ",RCLINE,1,80)
"RTN","RCDPBPLI",12,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("Date    ",RCLINE,1,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLI",13,0)
 D SET^RCDPBPLM("Description",RCLINE,12,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLI",14,0)
 D SET^RCDPBPLM("Quantity",RCLINE,35,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLI",15,0)
 D SET^RCDPBPLM("Units",RCLINE,46,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLI",16,0)
 D SET^RCDPBPLM("Cost",RCLINE,54,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLI",17,0)
 D SET^RCDPBPLM("Total Cost",RCLINE,64,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLI",18,0)
 S DESCDA=0 F  S DESCDA=$O(^PRCA(430,RCBILLDA,101,DESCDA)) Q:'DESCDA  D
"RTN","RCDPBPLI",19,0)
 .   S DATA=$G(^PRCA(430,RCBILLDA,101,DESCDA,0)) I DATA="" Q
"RTN","RCDPBPLI",20,0)
 .   S RCLINE=RCLINE+1
"RTN","RCDPBPLI",21,0)
 .   D SET^RCDPBPLM($E($P(DATA,U),4,5)_"/"_$E($P(DATA,U),6,7)_"/"_$E($P(DATA,U),2,3),RCLINE,1,80)
"RTN","RCDPBPLI",22,0)
 .   D SET^RCDPBPLM($J($P(DATA,U,3),8,2),RCLINE,35,80)
"RTN","RCDPBPLI",23,0)
 .   D SET^RCDPBPLM($J($P($G(^PRCD(420.5,+$P(DATA,U,5),0)),U),5),RCLINE,46,80)
"RTN","RCDPBPLI",24,0)
 .   D SET^RCDPBPLM($J($P(DATA,U,4),0,4),RCLINE,54,80)
"RTN","RCDPBPLI",25,0)
 .   D SET^RCDPBPLM($J($P(DATA,U,6),10,2),RCLINE,64,80)
"RTN","RCDPBPLI",26,0)
 .   ;  show description
"RTN","RCDPBPLI",27,0)
 .   S DATA=""
"RTN","RCDPBPLI",28,0)
 .   S COMMDA=0 F  S COMMDA=$O(^PRCA(430,RCBILLDA,101,DESCDA,1,COMMDA)) Q:'COMMDA  D
"RTN","RCDPBPLI",29,0)
 .   .   S TEXT=$G(^PRCA(430,RCBILLDA,101,DESCDA,1,COMMDA,0)) I TEXT="" Q
"RTN","RCDPBPLI",30,0)
 .   .   I $L(DATA_TEXT)>240 D SETDESC(11)
"RTN","RCDPBPLI",31,0)
 .   .   S DATA=DATA_$S(DATA="":"",1:" ")_TEXT
"RTN","RCDPBPLI",32,0)
 .   I DATA'="" D SETDESC(11)
"RTN","RCDPBPLI",33,0)
 .   ;  make sure all data is processed
"RTN","RCDPBPLI",34,0)
 .   I DATA'="" D SETDESC(11)
"RTN","RCDPBPLI",35,0)
 Q
"RTN","RCDPBPLI",36,0)
 ;
"RTN","RCDPBPLI",37,0)
 ;
"RTN","RCDPBPLI",38,0)
SETDESC(STARTCOL) ;  set the description line starting in column startcol+1
"RTN","RCDPBPLI",39,0)
 N %,LENGTH,SPACE
"RTN","RCDPBPLI",40,0)
 S LENGTH=80-STARTCOL-1
"RTN","RCDPBPLI",41,0)
 S SPACE="",$P(SPACE," ",80)=""
"RTN","RCDPBPLI",42,0)
 ;  break text at space if possible
"RTN","RCDPBPLI",43,0)
 I $L(DATA)>LENGTH D
"RTN","RCDPBPLI",44,0)
 .   F %=LENGTH-1:-1:0 Q:$E(DATA,%)=" "
"RTN","RCDPBPLI",45,0)
 .   I % S LENGTH=%
"RTN","RCDPBPLI",46,0)
 ;  set line
"RTN","RCDPBPLI",47,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM($E(SPACE,1,STARTCOL)_$E(DATA,1,LENGTH),RCLINE,1,80)
"RTN","RCDPBPLI",48,0)
 S DATA=$E(DATA,LENGTH+1,255)
"RTN","RCDPBPLI",49,0)
 I $L(DATA)>LENGTH D SETDESC(STARTCOL)
"RTN","RCDPBPLI",50,0)
 Q
"RTN","RCDPBPLI",51,0)
 ;
"RTN","RCDPBPLI",52,0)
 ;
"RTN","RCDPBPLI",53,0)
TRANINIT ;  initialization for transaction and ib data display
"RTN","RCDPBPLI",54,0)
 N BILLCAT,DATA,IBDA,RCDATE,RCLIST,RCTOTAL,RCTRANDA,X
"RTN","RCDPBPLI",55,0)
 ;  get the bill category
"RTN","RCDPBPLI",56,0)
 S BILLCAT=$P($G(^PRCA(430,RCBILLDA,0)),U,2)
"RTN","RCDPBPLI",57,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM(" ",RCLINE,1,80)
"RTN","RCDPBPLI",58,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM(" ",RCLINE,1,80)
"RTN","RCDPBPLI",59,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("Trans    Date      Type                Amount  Description                  User",RCLINE,1,80,0,IOUON,IOUOFF)  ;PRCA*4.5*315 Display User Ini
"RTN","RCDPBPLI",60,0)
 S RCTOTAL=$$GETTRANS^RCDPBTLM(RCBILLDA)
"RTN","RCDPBPLI",61,0)
 S RCDATE=0 F  S RCDATE=$O(RCLIST(RCDATE)) Q:'RCDATE  D
"RTN","RCDPBPLI",62,0)
 .   S RCTRANDA=0 F  S RCTRANDA=$O(RCLIST(RCDATE,RCTRANDA)) Q:'RCTRANDA  D
"RTN","RCDPBPLI",63,0)
 .   .   S RCLINE=RCLINE+1
"RTN","RCDPBPLI",64,0)
 .   .   D SET^RCDPBPLM(RCTRANDA,RCLINE,1,80)
"RTN","RCDPBPLI",65,0)
 .   .   D SET^RCDPBPLM($E(RCDATE,4,5)_"/"_$E(RCDATE,6,7)_"/"_$E(RCDATE,2,3),RCLINE,10,20)
"RTN","RCDPBPLI",66,0)
 .   .   D SET^RCDPBPLM($E($P(RCLIST(RCDATE,RCTRANDA),U),1,14),RCLINE,20,34)  ;PRCA*4.5*315
"RTN","RCDPBPLI",67,0)
 .   .   S X=$P(RCLIST(RCDATE,RCTRANDA),U,2)+$P(RCLIST(RCDATE,RCTRANDA),U,3)+$P(RCLIST(RCDATE,RCTRANDA),U,4)+$P(RCLIST(RCDATE,RCTRANDA),U,5)+$P(RCLIST(RCDATE,RCTRANDA),U,6)
"RTN","RCDPBPLI",68,0)
 .   .   D SET^RCDPBPLM($J(X,10,2),RCLINE,36,75)  ;PRCA*4.5*315
"RTN","RCDPBPLI",69,0)
 .   .   S X=$P(RCLIST(RCDATE,RCTRANDA),U,7)  ;PRCA*4.5*315
"RTN","RCDPBPLI",70,0)
 .   .   D SET^RCDPBPLM(X,RCLINE,77,80)  ;PRCA*4.5*315
"RTN","RCDPBPLI",71,0)
 .   .   ;
"RTN","RCDPBPLI",72,0)
 .   .   ;  for category c-means test, rx copay (sc/nsc)
"RTN","RCDPBPLI",73,0)
 .   .   I BILLCAT=18!(BILLCAT=22)!(BILLCAT=23) D
"RTN","RCDPBPLI",74,0)
 .   .   .   D STMT^IBRFN1(RCTRANDA)
"RTN","RCDPBPLI",75,0)
 .   .   .   I '$D(^TMP("IBRFN1",$J)) Q
"RTN","RCDPBPLI",76,0)
 .   .   .   S IBDA=0 F  S IBDA=$O(^TMP("IBRFN1",$J,IBDA)) Q:'IBDA  D
"RTN","RCDPBPLI",77,0)
 .   .   .   .   S DATA=^TMP("IBRFN1",$J,IBDA)
"RTN","RCDPBPLI",78,0)
 .   .   .   .   ;  show rx
"RTN","RCDPBPLI",79,0)
 .   .   .   .   I BILLCAT=22!(BILLCAT=23) D  Q
"RTN","RCDPBPLI",80,0)
 .   .   .   .   .   D SET^RCDPBPLM("RX "_$P(DATA,U,2),RCLINE,48,58)  ;PRCA*4.5*315 Spacing changed next several lines
"RTN","RCDPBPLI",81,0)
 .   .   .   .   .   D SET^RCDPBPLM($P(DATA,U,3),RCLINE,60,75)
"RTN","RCDPBPLI",82,0)
 .   .   .   .   .   ; D SET^RCDPBPLM("Qty "_$P(DATA,U,6),RCLINE,77,80)
"RTN","RCDPBPLI",83,0)
 .   .   .   .   ;  show outpatient (type of care 430.2 = 4 outpatient care)
"RTN","RCDPBPLI",84,0)
 .   .   .   .   I $P(^PRCA(430,RCBILLDA,0),U,16)=4 D  Q
"RTN","RCDPBPLI",85,0)
 .   .   .   .   .   D SET^RCDPBPLM("Outpatient Visit Date: "_$E($P(DATA,U,2),4,5)_"/"_$E($P(DATA,U,2),6,7)_"/"_$E($P(DATA,U,2),2,3),RCLINE,48,80)
"RTN","RCDPBPLI",86,0)
 .   .   .   .   ;  show inpatient
"RTN","RCDPBPLI",87,0)
 .   .   .   .   D SET^RCDPBPLM("Inpatient Adm Date: "_$E($P(DATA,U,2),4,5)_"/"_$E($P(DATA,U,2),6,7)_"/"_$E($P(DATA,U,2),2,3),RCLINE,48,80)
"RTN","RCDPBPLI",88,0)
 .   .   .   K ^TMP("IBRFN1",$J)
"RTN","RCDPBPLI",89,0)
 Q
"RTN","RCDPBPLI",90,0)
 ;
"RTN","RCDPBPLI",91,0)
REJECT ;  ; prca*4.5*301 ; LEG
"RTN","RCDPBPLI",92,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM(" ",RCLINE,1,80)
"RTN","RCDPBPLI",93,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM(" ",RCLINE,1,80)
"RTN","RCDPBPLI",94,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("CS Reject Data",RCLINE,1,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLI",95,0)
 D PROFRJA^RCTCSJS1(RCBILLDA,.RCLINE,.OUTARY)
"RTN","RCDPBPLI",96,0)
 M @VALMAR=OUTARY
"RTN","RCDPBPLI",97,0)
 K OUTARY
"RTN","RCDPBPLI",98,0)
 Q
"RTN","RCDPBPLI",99,0)
 ;
"RTN","RCDPBPLI",100,0)
 ;
"RTN","RCDPBPLI",101,0)
 ;
"RTN","RCDPBPLI",102,0)
REPAY ;  show repayment plan
"RTN","RCDPBPLI",103,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM(" ",RCLINE,1,80)
"RTN","RCDPBPLI",104,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("Repayment Plan Data",RCLINE,1,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLI",105,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("     Repayment Plan Date",RCLINE,1,80,41)
"RTN","RCDPBPLI",106,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("Day of Month Payment Due",RCLINE,1,80,42)
"RTN","RCDPBPLI",107,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("    Repayment Amount Due",RCLINE,1,80,43)
"RTN","RCDPBPLI",108,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("      Number of Payments",RCLINE,1,80,44)
"RTN","RCDPBPLI",109,0)
 Q
"RTN","RCDPBPLI",110,0)
 ;
"RTN","RCDPBPLI",111,0)
 ;
"RTN","RCDPBPLI",112,0)
IRS ;  irs data
"RTN","RCDPBPLI",113,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM(" ",RCLINE,1,80)
"RTN","RCDPBPLI",114,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("Forwarded to IRS",RCLINE,1,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLI",115,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("On Date",RCLINE,40,80,68.7)
"RTN","RCDPBPLI",116,0)
 D SET^RCDPBPLM("Amount",RCLINE,65,80,68.92)
"RTN","RCDPBPLI",117,0)
 S DATA=$G(^PRCA(430,RCBILLDA,6))
"RTN","RCDPBPLI",118,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("       Principal Balance: "_$J($P(DATA,U,16),10,2),RCLINE,1,80)
"RTN","RCDPBPLI",119,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("        Interest Balance: "_$J($P(DATA,U,17),10,2),RCLINE,1,80)
"RTN","RCDPBPLI",120,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("  Administrative Balance: "_$J($P(DATA,U,18),10,2),RCLINE,1,80)
"RTN","RCDPBPLI",121,0)
 Q
"RTN","RCDPBPLI",122,0)
 ;
"RTN","RCDPBPLI",123,0)
 ;
"RTN","RCDPBPLI",124,0)
DMC ;  dmc data
"RTN","RCDPBPLI",125,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM(" ",RCLINE,1,80)
"RTN","RCDPBPLI",126,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("Forwarded to DMC",RCLINE,1,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLI",127,0)
 D SET^RCDPBPLM("On Date",RCLINE,40,80,121)
"RTN","RCDPBPLI",128,0)
 S DATA=$G(^PRCA(430,RCBILLDA,12))
"RTN","RCDPBPLI",129,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("       Principal Balance: "_$J($P(DATA,U,2),10,2),RCLINE,1,80)
"RTN","RCDPBPLI",130,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("        Interest Balance: "_$J($P(DATA,U,3),10,2),RCLINE,1,80)
"RTN","RCDPBPLI",131,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("  Administrative Balance: "_$J($P(DATA,U,4),10,2),RCLINE,1,80)
"RTN","RCDPBPLI",132,0)
 Q
"RTN","RCDPBPLI",133,0)
 ;
"RTN","RCDPBPLI",134,0)
 ;
"RTN","RCDPBPLI",135,0)
TOP ;  top data
"RTN","RCDPBPLI",136,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM(" ",RCLINE,1,80)
"RTN","RCDPBPLI",137,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("Forwarded to TOP",RCLINE,1,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLI",138,0)
 D SET^RCDPBPLM("On Date",RCLINE,40,80,141)
"RTN","RCDPBPLI",139,0)
 S DATA=$G(^RCD(340,+RCDPDATA(430,RCBILLDA,9,"I"),6))
"RTN","RCDPBPLI",140,0)
 I $P(DATA,U,6) D
"RTN","RCDPBPLI",141,0)
 .   S Y=$P(DATA,U,6) D DD^%DT
"RTN","RCDPBPLI",142,0)
 .   S RCLINE=RCLINE+1 D SET^RCDPBPLM("  TOP Hold Date: "_Y,RCLINE,1,80)
"RTN","RCDPBPLI",143,0)
 Q
"RTN","RCDPBPLI",144,0)
 ;
"RTN","RCDPBPLI",145,0)
 ;
"RTN","RCDPBPLI",146,0)
TCSP ;  cross-servicing data referral
"RTN","RCDPBPLI",147,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM(" ",RCLINE,1,80)
"RTN","RCDPBPLI",148,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("Debt Referred to Cross-Servicing",RCLINE,1,80)
"RTN","RCDPBPLI",149,0)
 D SET^RCDPBPLM("  CS Referred Date",RCLINE,48,80,151)
"RTN","RCDPBPLI",150,0)
 Q
"RTN","RCDPBPLI",151,0)
 ;
"RTN","RCDPBPLI",152,0)
 ;
"RTN","RCDPBPLI",153,0)
TCSPRC ;  cross-servicing data recall
"RTN","RCDPBPLI",154,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM(" ",RCLINE,1,80)
"RTN","RCDPBPLI",155,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("CS Recall Reason:",RCLINE,1,80)
"RTN","RCDPBPLI",156,0)
 D SET^RCDPBPLM("",RCLINE,19,80,154)
"RTN","RCDPBPLI",157,0)
 D SET^RCDPBPLM("  CS Recall Date",RCLINE,50,80,153)
"RTN","RCDPBPLI",158,0)
 Q
"RTN","RCDPBPLI",159,0)
 ;
"RTN","RCDPBPLI",160,0)
 ;
"RTN","RCDPBPLI",161,0)
INSUR ;  show insurance data
"RTN","RCDPBPLI",162,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM(" ",RCLINE,1,80)
"RTN","RCDPBPLI",163,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("Insurance Data",RCLINE,1,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLI",164,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("         Insured Name",RCLINE,1,80,239)
"RTN","RCDPBPLI",165,0)
 D SET^RCDPBPLM("Sex",RCLINE,50,80,240)
"RTN","RCDPBPLI",166,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("            ID Number",RCLINE,1,80,242)
"RTN","RCDPBPLI",167,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("           Group Name",RCLINE,1,80,243)
"RTN","RCDPBPLI",168,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("         Group Number",RCLINE,1,80,244)
"RTN","RCDPBPLI",169,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("        Employer Name",RCLINE,1,80,247)
"RTN","RCDPBPLI",170,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("   Employee ID Number",RCLINE,1,80,248)
"RTN","RCDPBPLI",171,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("    Employer Location",RCLINE,1,80,249)
"RTN","RCDPBPLI",172,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM("Secondary Ins Carrier",RCLINE,1,80,19)
"RTN","RCDPBPLI",173,0)
 S RCLINE=RCLINE+1 D SET^RCDPBPLM(" Tertiary Ins Carrier",RCLINE,1,80,19.1)
"RTN","RCDPBPLI",174,0)
 Q
"RTN","RCDPBPLM")
0^47^B62436978^B61916200
"RTN","RCDPBPLM",1,0)
RCDPBPLM ;WISC/RFJ - bill profile ;1 Jun 99
"RTN","RCDPBPLM",2,0)
 ;;4.5;Accounts Receivable;**114,153,159,241,276,303,301,315**;Mar 20, 1995;Build 67
"RTN","RCDPBPLM",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCDPBPLM",4,0)
 ;
"RTN","RCDPBPLM",5,0)
 ;
"RTN","RCDPBPLM",6,0)
 ;  called from menu option (19)
"RTN","RCDPBPLM",7,0)
 ;
"RTN","RCDPBPLM",8,0)
 N RCBILLDA,RCDPFXIT
"RTN","RCDPBPLM",9,0)
 ;
"RTN","RCDPBPLM",10,0)
 F  D  Q:'RCBILLDA
"RTN","RCDPBPLM",11,0)
 . W !! S RCBILLDA=$$SELBILL^RCDPBTLM
"RTN","RCDPBPLM",12,0)
 . I RCBILLDA<1 S RCBILLDA=0 Q
"RTN","RCDPBPLM",13,0)
 . D EN^VALM("RCDP BILL PROFILE")
"RTN","RCDPBPLM",14,0)
 . ;  fast exit
"RTN","RCDPBPLM",15,0)
 . I $G(RCDPFXIT) S RCBILLDA=0
"RTN","RCDPBPLM",16,0)
 Q
"RTN","RCDPBPLM",17,0)
 ;
"RTN","RCDPBPLM",18,0)
 ;
"RTN","RCDPBPLM",19,0)
INIT ;  initialization for list manager list
"RTN","RCDPBPLM",20,0)
 ;  requires rcbillda
"RTN","RCDPBPLM",21,0)
 N BILLED,COMMDA,DATA,PAID,RCDPDATA,RCFYDA,RCLINE,REPTYPE,X1,X2,RCDEBTOR,DFN
"RTN","RCDPBPLM",22,0)
 K ^TMP("RCDPBPLM",$J),^TMP("VALM VIDEO",$J)
"RTN","RCDPBPLM",23,0)
 ;
"RTN","RCDPBPLM",24,0)
 ;  fast exit
"RTN","RCDPBPLM",25,0)
 I $G(RCDPFXIT) S VALMQUIT=1 Q
"RTN","RCDPBPLM",26,0)
 ;
"RTN","RCDPBPLM",27,0)
 D DIQ430(RCBILLDA,".01:300")
"RTN","RCDPBPLM",28,0)
 ;
"RTN","RCDPBPLM",29,0)
 ;  set the listmanager line number
"RTN","RCDPBPLM",30,0)
 S RCLINE=0
"RTN","RCDPBPLM",31,0)
 ;
"RTN","RCDPBPLM",32,0)
 I '$D(RCDPDATA) Q  ;PRCA*4.5*315
"RTN","RCDPBPLM",33,0)
 S DATA=$$ACCNTHDR^RCDPAPLM(RCDPDATA(430,RCBILLDA,9,"I"))
"RTN","RCDPBPLM",34,0)
 S RCLINE=RCLINE+1 D SET("Account: "_$P(DATA,"^")_" "_$P(DATA,"^",2),RCLINE,1,80)
"RTN","RCDPBPLM",35,0)
 D SET($P(DATA,"^",3),RCLINE,60,80)
"RTN","RCDPBPLM",36,0)
 S %="" I $TR($P(DATA,"^",4,9),"^")'="" S %=$P(DATA,"^",4)_", "_$P(DATA,"^",7)_", "_$P(DATA,"^",8)_"  "_$P(DATA,"^",9)
"RTN","RCDPBPLM",37,0)
 S RCLINE=RCLINE+1 D SET("   Addr: "_%,RCLINE,1,80)
"RTN","RCDPBPLM",38,0)
 S RCLINE=RCLINE+1 D SET("  Phone: "_$P(DATA,"^",10),RCLINE,1,80)
"RTN","RCDPBPLM",39,0)
 S RCDEBTOR=$P(^PRCA(430,RCBILLDA,0),U,9)
"RTN","RCDPBPLM",40,0)
 I $P(^RCD(340,+RCDEBTOR,0),U)["DPT(" S DFN=+^(0) D
"RTN","RCDPBPLM",41,0)
 . Q:$$EMGRES^DGUTL(DFN)'["K"
"RTN","RCDPBPLM",42,0)
 . S RCLINE=RCLINE+1
"RTN","RCDPBPLM",43,0)
 . D SET("EMERGENCY RESPONSE INDICATOR: HURRICANE KATRINA",RCLINE,1,80)
"RTN","RCDPBPLM",44,0)
 ;
"RTN","RCDPBPLM",45,0)
 ;  bill descriptive data
"RTN","RCDPBPLM",46,0)
 S RCLINE=RCLINE+1 D SET(" ",RCLINE,1,80)
"RTN","RCDPBPLM",47,0)
 ; PRCA*4.5*276 - get 1st/3rd party payment add EEOB indicator when applicable
"RTN","RCDPBPLM",48,0)
 S PRCOUT=$$COMP3^PRCAAPR(RCBILLDA)
"RTN","RCDPBPLM",49,0)
 I PRCOUT'="%" S PRCOUT=$$IBEEOBCK^PRCAAPR1(RCBILLDA)
"RTN","RCDPBPLM",50,0)
 S RCLINE=RCLINE+1 ; D SET("Bill Number",RCLINE,1,80,.01,IOUON,IOUOFF)
"RTN","RCDPBPLM",51,0)
 ; IA# 6060 for $$BILLREJ^IBJTU6
"RTN","RCDPBPLM",52,0)
 S PRCOUT=PRCOUT_$S($$BILLREJ^IBJTU6($P($P($G(RCDPDATA(430,RCBILLDA,.01,"E")),"^"),"-",2)):"c",1:"") ;PRCA*4.5*303 Add indicator for rejects
"RTN","RCDPBPLM",53,0)
 D SET("Bill Number: "_$G(PRCOUT)_$P(RCDPDATA(430,RCBILLDA,.01,"E"),"^"),RCLINE,1,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLM",54,0)
 D SET("Category",RCLINE,40,80,2)
"RTN","RCDPBPLM",55,0)
 S RCLINE=RCLINE+1 D SET("Date  Prepared",RCLINE,1,80,10)
"RTN","RCDPBPLM",56,0)
 D SET("Status",RCLINE,42,80,8)
"RTN","RCDPBPLM",57,0)
 S RCLINE=RCLINE+1 D SET("Date Activated",RCLINE,1,80,60)
"RTN","RCDPBPLM",58,0)
 S RCLINE=RCLINE+1 D SET("Date Status Up",RCLINE,1,80,14)
"RTN","RCDPBPLM",59,0)
 D SET("By",RCLINE,46,80,17)
"RTN","RCDPBPLM",60,0)
 ;display TP bills Division of Care
"RTN","RCDPBPLM",61,0)
 I "T"=$P($G(^PRCA(430.2,+RCDPDATA(430,RCBILLDA,2,"I"),0)),"^",6) D
"RTN","RCDPBPLM",62,0)
 . S RCDIV=$$DIV^IBJDF2(RCBILLDA) I +RCDIV D
"RTN","RCDPBPLM",63,0)
 .. S RCDIV=$P($G(^DG(40.8,RCDIV,0)),U,1) I RCDIV="" Q
"RTN","RCDPBPLM",64,0)
 .. S RCLINE=RCLINE+1 D SET("Division of Care: "_RCDIV,RCLINE,1,80)
"RTN","RCDPBPLM",65,0)
 S RCLINE=RCLINE+1 D SET("Resulting From",RCLINE,1,80,4.5)
"RTN","RCDPBPLM",66,0)
 I RCDPDATA(430,RCBILLDA,15.1,"E")'="" D
"RTN","RCDPBPLM",67,0)
 . S RCLINE=RCLINE+1 D SET("  Type of Care",RCLINE,1,80,15.1)
"RTN","RCDPBPLM",68,0)
 S RCLINE=RCLINE+1 D SET("        Remark",RCLINE,1,80,15)
"RTN","RCDPBPLM",69,0)
 ;  display comments if there
"RTN","RCDPBPLM",70,0)
 I $O(^PRCA(430,RCBILLDA,10,0)) D
"RTN","RCDPBPLM",71,0)
 . S RCLINE=RCLINE+1 D SET("Comments:",RCLINE,1,80)
"RTN","RCDPBPLM",72,0)
 . S COMMDA=0 F  S COMMDA=$O(^PRCA(430,RCBILLDA,10,COMMDA)) Q:'COMMDA  D
"RTN","RCDPBPLM",73,0)
 .. S RCLINE=RCLINE+1 D SET("  "_$G(^PRCA(430,RCBILLDA,10,COMMDA,0)),RCLINE,1,80)
"RTN","RCDPBPLM",74,0)
 ;
"RTN","RCDPBPLM",75,0)
 ;  int/adm rate and date
"RTN","RCDPBPLM",76,0)
 S RCLINE=RCLINE+1 D SET(" ",RCLINE,1,80)
"RTN","RCDPBPLM",77,0)
 S DATA=$$INT^RCMSFN01(RCDPDATA(430,RCBILLDA,10,"I"))
"RTN","RCDPBPLM",78,0)
 S Y=$P(DATA,"^",2) I Y D DD^%DT
"RTN","RCDPBPLM",79,0)
 S RCLINE=RCLINE+1 D SET("Interest Effective Rate Date: "_Y,RCLINE,1,80)
"RTN","RCDPBPLM",80,0)
 D SET(" Annual Rate: "_$P(DATA,"^"),RCLINE,55,80)
"RTN","RCDPBPLM",81,0)
 S DATA=$$ADM^RCMSFN01(RCDPDATA(430,RCBILLDA,10,"I"))
"RTN","RCDPBPLM",82,0)
 S Y=$P(DATA,"^",2) I Y D DD^%DT
"RTN","RCDPBPLM",83,0)
 S RCLINE=RCLINE+1 D SET("   Admin Effective Rate Date: "_Y,RCLINE,1,80)
"RTN","RCDPBPLM",84,0)
 D SET("Monthly Rate: "_$P(DATA,"^"),RCLINE,55,80)
"RTN","RCDPBPLM",85,0)
 S RCLINE=RCLINE+1 D SET("  Last Int/Admin Charge Date",RCLINE,1,80,67)
"RTN","RCDPBPLM",86,0)
 ;
"RTN","RCDPBPLM",87,0)
 ;  put bill balances on first line of second screen
"RTN","RCDPBPLM",88,0)
 F RCLINE=RCLINE+1:1:16 D SET(" ",RCLINE,1,80)
"RTN","RCDPBPLM",89,0)
 ;
"RTN","RCDPBPLM",90,0)
 ;  bill dollars
"RTN","RCDPBPLM",91,0)
 S RCLINE=RCLINE+1 D SET(" ",RCLINE,1,80)
"RTN","RCDPBPLM",92,0)
 S RCLINE=RCLINE+1 D SET("Bill Balances           Billed          Paid",RCLINE,1,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLM",93,0)
 S RCLINE=RCLINE+1 D SET("     Principal: "_$J(RCDPDATA(430,RCBILLDA,71,"E"),14,2)_$J(RCDPDATA(430,RCBILLDA,77,"E"),14,2),RCLINE,1,80)
"RTN","RCDPBPLM",94,0)
 D SET("       Original Amt: "_$J(RCDPDATA(430,RCBILLDA,3,"E"),11,2),RCLINE,48,80)
"RTN","RCDPBPLM",95,0)
 S RCLINE=RCLINE+1 D SET("      Interest: "_$J(RCDPDATA(430,RCBILLDA,72,"E"),14,2)_$J(RCDPDATA(430,RCBILLDA,78,"E"),14,2),RCLINE,1,80)
"RTN","RCDPBPLM",96,0)
 I $G(RCDPDATA(430,RCBILLDA,131,"E")) D SET("Medicare Contr  Adj: "_$J(RCDPDATA(430,RCBILLDA,131,"E"),11,2),RCLINE,48,80)
"RTN","RCDPBPLM",97,0)
 I RCDPDATA(430,RCBILLDA,74,"E") D
"RTN","RCDPBPLM",98,0)
 . S RCLINE=RCLINE+1 D SET("  Marshall Fee: "_$J(RCDPDATA(430,RCBILLDA,74,"E"),14,2)_$J(RCDPDATA(430,RCBILLDA,79.1,"E"),14,2),RCLINE,1,80)
"RTN","RCDPBPLM",99,0)
 I RCDPDATA(430,RCBILLDA,75,"E") D
"RTN","RCDPBPLM",100,0)
 . S RCLINE=RCLINE+1 D SET("    Court Cost: "_$J(RCDPDATA(430,RCBILLDA,75,"E"),14,2),RCLINE,1,80)
"RTN","RCDPBPLM",101,0)
 S RCLINE=RCLINE+1 D SET("Administrative: "_$J(RCDPDATA(430,RCBILLDA,73,"E"),14,2)_$J(RCDPDATA(430,RCBILLDA,79,"E"),14,2),RCLINE,1,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLM",102,0)
 I $G(RCDPDATA(430,RCBILLDA,132,"E")) D SET("Medicare Unreim Exp: "_$J(RCDPDATA(430,RCBILLDA,132,"E"),11,2),RCLINE,48,80)
"RTN","RCDPBPLM",103,0)
 ;  compute totals
"RTN","RCDPBPLM",104,0)
 S BILLED=0 F %=71,72,73,74,75 S BILLED=BILLED+RCDPDATA(430,RCBILLDA,%,"E")
"RTN","RCDPBPLM",105,0)
 S PAID=0 F %=77,78,79,79.1 S PAID=PAID+RCDPDATA(430,RCBILLDA,%,"E")
"RTN","RCDPBPLM",106,0)
 S RCLINE=RCLINE+1 D SET("       Current: "_$J(BILLED,14,2)_$J(PAID,14,2),RCLINE,1,80)
"RTN","RCDPBPLM",107,0)
 ;
"RTN","RCDPBPLM",108,0)
 ;  show refund if there
"RTN","RCDPBPLM",109,0)
 I RCDPDATA(430,RCBILLDA,79.18,"E") D
"RTN","RCDPBPLM",110,0)
 . S RCLINE=RCLINE+1 D SET(" ",RCLINE,1,80)
"RTN","RCDPBPLM",111,0)
 . S RCLINE=RCLINE+1 D SET("Refunded Amount",RCLINE,1,80,79.18)
"RTN","RCDPBPLM",112,0)
 . D SET("Date",RCLINE,27,80,79.19)
"RTN","RCDPBPLM",113,0)
 . D SET("By",RCLINE,50,80,79.21)
"RTN","RCDPBPLM",114,0)
 ;
"RTN","RCDPBPLM",115,0)
 ;  accounting data
"RTN","RCDPBPLM",116,0)
 S RCLINE=RCLINE+1 D SET(" ",RCLINE,1,80)
"RTN","RCDPBPLM",117,0)
 S RCLINE=RCLINE+1 D SET("Accounting Data",RCLINE,1,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLM",118,0)
 ;  fiscal year multiple
"RTN","RCDPBPLM",119,0)
 D SET("Fiscal Year",RCLINE,20,32,0,IOUON,IOUOFF)
"RTN","RCDPBPLM",120,0)
 D SET("Approp Code",RCLINE,34,46,0,IOUON,IOUOFF)
"RTN","RCDPBPLM",121,0)
 D SET("Amount",RCLINE,50,60,0,IOUON,IOUOFF)
"RTN","RCDPBPLM",122,0)
 S RCFYDA=0 F  S RCFYDA=$O(^PRCA(430,RCBILLDA,2,RCFYDA)) Q:'RCFYDA  D
"RTN","RCDPBPLM",123,0)
 . S DATA=$G(^PRCA(430,RCBILLDA,2,RCFYDA,0))
"RTN","RCDPBPLM",124,0)
 . S RCLINE=RCLINE+1
"RTN","RCDPBPLM",125,0)
 . D SET($J($P(DATA,"^"),30),RCLINE,1,80)     ;fiscal year
"RTN","RCDPBPLM",126,0)
 . D SET($J(RCDPDATA(430,RCBILLDA,203,"E"),6),RCLINE,39,45) ;fund
"RTN","RCDPBPLM",127,0)
 . D SET($J($P(DATA,"^",2),8,2),RCLINE,48,80)   ;amount
"RTN","RCDPBPLM",128,0)
 ; determine which rsc to display
"RTN","RCDPBPLM",129,0)
 S %=RCDPDATA(430,RCBILLDA,255.1,"E") I %="" S %=RCDPDATA(430,RCBILLDA,255,"E")
"RTN","RCDPBPLM",130,0)
 S RCLINE=RCLINE+1 D SET("Rev Srce Code: "_%,RCLINE,1,80)
"RTN","RCDPBPLM",131,0)
 ;
"RTN","RCDPBPLM",132,0)
 ;  collection data
"RTN","RCDPBPLM",133,0)
 S RCLINE=RCLINE+1 D SET(" ",RCLINE,1,80)
"RTN","RCDPBPLM",134,0)
 S RCLINE=RCLINE+1 D SET("Collection Follow up Data",RCLINE,1,80,0,IOUON,IOUOFF)
"RTN","RCDPBPLM",135,0)
 S RCLINE=RCLINE+1 D SET("        Letter1",RCLINE,1,80,61)
"RTN","RCDPBPLM",136,0)
 S RCLINE=RCLINE+1 D SET("        Letter2",RCLINE,1,80,62)
"RTN","RCDPBPLM",137,0)
 S RCLINE=RCLINE+1 D SET("        Letter3",RCLINE,1,80,63)
"RTN","RCDPBPLM",138,0)
 S RCLINE=RCLINE+1 D SET("        Letter4",RCLINE,1,80,68)
"RTN","RCDPBPLM",139,0)
 I RCDPDATA(430,RCBILLDA,68.6,"I") D
"RTN","RCDPBPLM",140,0)
 . S RCLINE=RCLINE+1 D SET("     IRS Letter",RCLINE,1,80,68.6)
"RTN","RCDPBPLM",141,0)
 . D SET("Amount",RCLINE,65,80,68.93)
"RTN","RCDPBPLM",142,0)
 I RCDPDATA(430,RCBILLDA,64,"I") D
"RTN","RCDPBPLM",143,0)
 . S RCLINE=RCLINE+1 D SET("DC/DOJ Ref Date",RCLINE,1,80,64)
"RTN","RCDPBPLM",144,0)
 . D SET("To",RCLINE,40,80,65)
"RTN","RCDPBPLM",145,0)
 . D SET("Amount",RCLINE,65,80,66)
"RTN","RCDPBPLM",146,0)
 ;
"RTN","RCDPBPLM",147,0)
BILLRJ ;====== BILL PROFILE REJECT INSERTED HERE ;LEG
"RTN","RCDPBPLM",148,0)
 I $D(^PRCA(430,RCBILLDA,18)) D REJECT^RCDPBPLI ; prca*4.5*301
"RTN","RCDPBPLM",149,0)
 ;
"RTN","RCDPBPLM",150,0)
 ;  repayment plan (show only if there)
"RTN","RCDPBPLM",151,0)
 I RCDPDATA(430,RCBILLDA,41,"I") D REPAY^RCDPBPLI
"RTN","RCDPBPLM",152,0)
 ;
"RTN","RCDPBPLM",153,0)
 ;  irs data (show only if there)
"RTN","RCDPBPLM",154,0)
 I RCDPDATA(430,RCBILLDA,68.7,"I") D IRS^RCDPBPLI
"RTN","RCDPBPLM",155,0)
 ;
"RTN","RCDPBPLM",156,0)
 ;  dmc data (show only if there)
"RTN","RCDPBPLM",157,0)
 I RCDPDATA(430,RCBILLDA,121,"I") D DMC^RCDPBPLI
"RTN","RCDPBPLM",158,0)
 ;
"RTN","RCDPBPLM",159,0)
 ;  top data (show only if there)
"RTN","RCDPBPLM",160,0)
 I $G(RCDPDATA(430,RCBILLDA,141,"I")) D TOP^RCDPBPLI
"RTN","RCDPBPLM",161,0)
 ;
"RTN","RCDPBPLM",162,0)
 ;
"RTN","RCDPBPLM",163,0)
 ;  cross-servicing referral data(show only if there)
"RTN","RCDPBPLM",164,0)
 I $G(RCDPDATA(430,RCBILLDA,151,"I")) D TCSP^RCDPBPLI
"RTN","RCDPBPLM",165,0)
 ;
"RTN","RCDPBPLM",166,0)
 ;
"RTN","RCDPBPLM",167,0)
 ;  cross-servicing recall data(show only if there)
"RTN","RCDPBPLM",168,0)
 I $G(RCDPDATA(430,RCBILLDA,152,"I"))!$G(RCDPDATA(430,RCBILLDA,153,"I"))!$G(RCDPDATA(430,RCBILLDA,154,"I")) D TCSPRC^RCDPBPLI
"RTN","RCDPBPLM",169,0)
 ;
"RTN","RCDPBPLM",170,0)
 ;
"RTN","RCDPBPLM",171,0)
 ;  get the report type based on category.  if third party show
"RTN","RCDPBPLM",172,0)
 ;  insurance data
"RTN","RCDPBPLM",173,0)
 S REPTYPE=$P($G(^PRCA(430.2,+RCDPDATA(430,RCBILLDA,2,"I"),0)),"^",6)
"RTN","RCDPBPLM",174,0)
 I REPTYPE="T" D INSUR^RCDPBPLI
"RTN","RCDPBPLM",175,0)
 ;
"RTN","RCDPBPLM",176,0)
 ;  report type for employee or vendor, show description field 106
"RTN","RCDPBPLM",177,0)
 I REPTYPE="O"!(REPTYPE="V") D INIT^RCDPBPLI
"RTN","RCDPBPLM",178,0)
 ;
"RTN","RCDPBPLM",179,0)
 ;  show transactions and reasons
"RTN","RCDPBPLM",180,0)
 D TRANINIT^RCDPBPLI
"RTN","RCDPBPLM",181,0)
 ;
"RTN","RCDPBPLM",182,0)
 ;  set valmcnt to number of lines in the list
"RTN","RCDPBPLM",183,0)
 S VALMCNT=RCLINE
"RTN","RCDPBPLM",184,0)
 D HDR
"RTN","RCDPBPLM",185,0)
 Q
"RTN","RCDPBPLM",186,0)
 ;
"RTN","RCDPBPLM",187,0)
 ;
"RTN","RCDPBPLM",188,0)
HDR ;  header code for list manager display
"RTN","RCDPBPLM",189,0)
 ;  requires rcbillda
"RTN","RCDPBPLM",190,0)
 S VALMHDR(1)="***** ACCOUNTS RECEIVABLE BILL PROFILE FOR "_$P($G(^PRCA(430,RCBILLDA,0)),"^")_" *****"
"RTN","RCDPBPLM",191,0)
 ; PRCA*4.5*276 - add explanation of '%' for the user
"RTN","RCDPBPLM",192,0)
 S VALMSG="|% EEOB | Enter ?? for more actions|" ; PRCA*4.5*276
"RTN","RCDPBPLM",193,0)
 Q
"RTN","RCDPBPLM",194,0)
 ;
"RTN","RCDPBPLM",195,0)
 ;
"RTN","RCDPBPLM",196,0)
EXIT ;  exit list manager option and clean up
"RTN","RCDPBPLM",197,0)
 K ^TMP("RCDPBPLM",$J)
"RTN","RCDPBPLM",198,0)
 Q
"RTN","RCDPBPLM",199,0)
 ;
"RTN","RCDPBPLM",200,0)
 ;
"RTN","RCDPBPLM",201,0)
SET(STRING,LINE,COLBEG,COLEND,FIELD,ON,OFF) ;  set array
"RTN","RCDPBPLM",202,0)
 I $G(FIELD) S STRING=STRING_$S(STRING="":"",1:": ")_$G(RCDPDATA(430,RCBILLDA,FIELD,"E"))
"RTN","RCDPBPLM",203,0)
 I STRING="",'$G(FIELD) Q
"RTN","RCDPBPLM",204,0)
 I '$D(@VALMAR@(LINE,0)) D SET^VALM10(LINE,$J("",80))
"RTN","RCDPBPLM",205,0)
 D SET^VALM10(LINE,$$SETSTR^VALM1(STRING,@VALMAR@(LINE,0),COLBEG,COLEND-COLBEG+1))
"RTN","RCDPBPLM",206,0)
 I $G(ON)]""!($G(OFF)]"") D CNTRL^VALM10(LINE,COLBEG,$L(STRING),ON,OFF)
"RTN","RCDPBPLM",207,0)
 Q
"RTN","RCDPBPLM",208,0)
 ;
"RTN","RCDPBPLM",209,0)
 ;
"RTN","RCDPBPLM",210,0)
DIQ430(DA,DR) ;  diq call to retrieve data for dr fields in file 430
"RTN","RCDPBPLM",211,0)
 N D0,DIC,DIQ,DIQ2
"RTN","RCDPBPLM",212,0)
 K RCDPDATA(430,DA)
"RTN","RCDPBPLM",213,0)
 S DIQ(0)="IE",DIC="^PRCA(430,",DIQ="RCDPDATA" D EN^DIQ1
"RTN","RCDPBPLM",214,0)
 Q
"RTN","RCDPBTLM")
0^34^B52280967^B49476140
"RTN","RCDPBTLM",1,0)
RCDPBTLM ;WISC/RFJ - bill transactions List Manager top routine ;1 Jun 99
"RTN","RCDPBTLM",2,0)
 ;;4.5;Accounts Receivable;**114,148,153,168,169,198,247,271,276,315**;Mar 20, 1995;Build 67
"RTN","RCDPBTLM",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCDPBTLM",4,0)
 ;
"RTN","RCDPBTLM",5,0)
 ; Reference to $$REC^IBRFN supported by DBIA 2031
"RTN","RCDPBTLM",6,0)
 ;
"RTN","RCDPBTLM",7,0)
 ;  called from menu option (19)
"RTN","RCDPBTLM",8,0)
 ;
"RTN","RCDPBTLM",9,0)
 N RCBILLDA,RCDPFXIT
"RTN","RCDPBTLM",10,0)
 ;
"RTN","RCDPBTLM",11,0)
 F  D  Q:'RCBILLDA
"RTN","RCDPBTLM",12,0)
 .   W !! S RCBILLDA=$$SELBILL
"RTN","RCDPBTLM",13,0)
 .   I RCBILLDA<1 S RCBILLDA=0 Q
"RTN","RCDPBTLM",14,0)
 .   D EN^VALM("RCDP TRANSACTIONS LIST")
"RTN","RCDPBTLM",15,0)
 .   ;  fast exit
"RTN","RCDPBTLM",16,0)
 .   I $G(RCDPFXIT) S RCBILLDA=0
"RTN","RCDPBTLM",17,0)
 Q
"RTN","RCDPBTLM",18,0)
 ;
"RTN","RCDPBTLM",19,0)
 ;
"RTN","RCDPBTLM",20,0)
INIT ;  initialization for list manager list
"RTN","RCDPBTLM",21,0)
 ;  requires rcbillda
"RTN","RCDPBTLM",22,0)
 ;  PRCA*3.5*315 - Replaced "^" with VA Standard Variable U throughout
"RTN","RCDPBTLM",23,0)
 N ADMIN,DATE,RCLINE,RCLIST,RCTOTAL,RCTRAN,RCTRANDA
"RTN","RCDPBTLM",24,0)
 K ^TMP("RCDPBTLM",$J),^TMP("VALM VIDEO",$J)
"RTN","RCDPBTLM",25,0)
 ;
"RTN","RCDPBTLM",26,0)
 ;  fast exit
"RTN","RCDPBTLM",27,0)
 I $G(RCDPFXIT) S VALMQUIT=1 Q
"RTN","RCDPBTLM",28,0)
 ;
"RTN","RCDPBTLM",29,0)
 ;  set the List Manager line number
"RTN","RCDPBTLM",30,0)
 S RCLINE=0
"RTN","RCDPBTLM",31,0)
 ;  set the List Manager transaction number
"RTN","RCDPBTLM",32,0)
 S RCTRAN=0
"RTN","RCDPBTLM",33,0)
 ;
"RTN","RCDPBTLM",34,0)
 ;  get transactions and balance for bill
"RTN","RCDPBTLM",35,0)
 S RCTOTAL=$$GETTRANS(RCBILLDA)
"RTN","RCDPBTLM",36,0)
 ;
"RTN","RCDPBTLM",37,0)
 S DATE="" F  S DATE=$O(RCLIST(DATE)) Q:'DATE  D
"RTN","RCDPBTLM",38,0)
 .   S RCTRANDA="" F  S RCTRANDA=$O(RCLIST(DATE,RCTRANDA)) Q:RCTRANDA=""  D
"RTN","RCDPBTLM",39,0)
 .   .   S RCLINE=RCLINE+1
"RTN","RCDPBTLM",40,0)
 .   .   ;
"RTN","RCDPBTLM",41,0)
 .   .   ;  create an index array for transaction lookup in list
"RTN","RCDPBTLM",42,0)
 .   .   I RCTRANDA D
"RTN","RCDPBTLM",43,0)
 .   .   .   S RCTRAN=RCTRAN+1
"RTN","RCDPBTLM",44,0)
 .   .   .   S ^TMP("RCDPBTLM",$J,"IDX",RCTRAN,RCTRAN)=RCTRANDA
"RTN","RCDPBTLM",45,0)
 .   .   .   D SET^RCDPAPLI(RCTRAN,RCLINE,1,80,0,IORVON,IORVOFF)
"RTN","RCDPBTLM",46,0)
 .   .   ;
"RTN","RCDPBTLM",47,0)
 .   .   D SET^RCDPAPLI($S(RCTRANDA:RCTRANDA,1:" "),RCLINE,6,80) ; PRCA*4.5*315 Incr left margin
"RTN","RCDPBTLM",48,0)
 .   .   D SET^RCDPAPLI($E(DATE,4,5)_"/"_$E(DATE,6,7)_"/"_$E(DATE,2,3),RCLINE,13,21)
"RTN","RCDPBTLM",49,0)
 .   .   D SET^RCDPAPLI($TR($P(RCLIST(DATE,RCTRANDA),U),"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz"),RCLINE,25,50)
"RTN","RCDPBTLM",50,0)
 .   .   D SET^RCDPAPLI($J($P(RCLIST(DATE,RCTRANDA),U,2),9,2),RCLINE,53,62)
"RTN","RCDPBTLM",51,0)
 .   .   D SET^RCDPAPLI($J($P(RCLIST(DATE,RCTRANDA),U,3),9,2),RCLINE,62,71)
"RTN","RCDPBTLM",52,0)
 .   .   ;  add marshal fee and court cost to create admin dollars
"RTN","RCDPBTLM",53,0)
 .   .   S ADMIN=$P(RCLIST(DATE,RCTRANDA),U,4)+$P(RCLIST(DATE,RCTRANDA),U,5)+$P(RCLIST(DATE,RCTRANDA),U,6)
"RTN","RCDPBTLM",54,0)
 .   .   D SET^RCDPAPLI($J(ADMIN,9,2),RCLINE,71,80)
"RTN","RCDPBTLM",55,0)
 ;
"RTN","RCDPBTLM",56,0)
 ;  show totals
"RTN","RCDPBTLM",57,0)
 S RCLINE=RCLINE+1
"RTN","RCDPBTLM",58,0)
 D SET^RCDPAPLI("                                                    --------- -------- --------",RCLINE,1,80)
"RTN","RCDPBTLM",59,0)
 S RCLINE=RCLINE+1
"RTN","RCDPBTLM",60,0)
 D SET^RCDPAPLI("   TOTAL BALANCE FOR BILL",RCLINE,1,80)
"RTN","RCDPBTLM",61,0)
 D SET^RCDPAPLI($J($P(RCTOTAL,U,1),9,2),RCLINE,53,62)
"RTN","RCDPBTLM",62,0)
 D SET^RCDPAPLI($J($P(RCTOTAL,U,2),9,2),RCLINE,62,71)
"RTN","RCDPBTLM",63,0)
 D SET^RCDPAPLI($J($P(RCTOTAL,U,3)+$P(RCTOTAL,U,4)+$P(RCTOTAL,U,5),9,2),RCLINE,71,80)
"RTN","RCDPBTLM",64,0)
 ;
"RTN","RCDPBTLM",65,0)
 ;  compare totals to what is stored in the file
"RTN","RCDPBTLM",66,0)
 N RCDATA7,RCFOUT
"RTN","RCDPBTLM",67,0)
 S RCDATA7=$G(^PRCA(430,RCBILLDA,7))
"RTN","RCDPBTLM",68,0)
 ;  for a write-off bill, the balance should equal all zeros, for
"RTN","RCDPBTLM",69,0)
 ;  these bills, node 7 is the write-off amount, so for the out of
"RTN","RCDPBTLM",70,0)
 ;  balance check to work, node 7 needs to be adjusted to all zeros
"RTN","RCDPBTLM",71,0)
 I $P(^PRCA(430,RCBILLDA,0),U,8)=23 S RCDATA7="0^0^0^0^0"
"RTN","RCDPBTLM",72,0)
 I +$P(RCDATA7,U,1)'=+$P(RCTOTAL,U,1) S RCFOUT=1
"RTN","RCDPBTLM",73,0)
 I +$P(RCDATA7,U,2)'=+$P(RCTOTAL,U,2) S RCFOUT=1
"RTN","RCDPBTLM",74,0)
 I ($P(RCDATA7,U,3)+$P(RCDATA7,U,4)+$P(RCDATA7,U,5))'=+$P(RCTOTAL,U,3) S RCFOUT=1
"RTN","RCDPBTLM",75,0)
 I $G(RCFOUT) D
"RTN","RCDPBTLM",76,0)
 .   S RCLINE=RCLINE+1
"RTN","RCDPBTLM",77,0)
 .   D SET^RCDPAPLI(" ",RCLINE,1,80)
"RTN","RCDPBTLM",78,0)
 .   S RCLINE=RCLINE+1
"RTN","RCDPBTLM",79,0)
 .   D SET^RCDPAPLI("  STORED BALANCE FOR BILL (** INCORRECT **)",RCLINE,1,80)
"RTN","RCDPBTLM",80,0)
 .   D SET^RCDPAPLI($J($P(RCDATA7,U,1),9,2),RCLINE,53,62)
"RTN","RCDPBTLM",81,0)
 .   D SET^RCDPAPLI($J($P(RCDATA7,U,2),9,2),RCLINE,62,71)
"RTN","RCDPBTLM",82,0)
 .   D SET^RCDPAPLI($J($P(RCDATA7,U,3)+$P(RCDATA7,U,4)+$P(RCDATA7,U,5),9,2),RCLINE,71,80)
"RTN","RCDPBTLM",83,0)
 ;
"RTN","RCDPBTLM",84,0)
 ;  set valmcnt to number of lines in the list
"RTN","RCDPBTLM",85,0)
 S VALMCNT=RCLINE
"RTN","RCDPBTLM",86,0)
 D HDR
"RTN","RCDPBTLM",87,0)
 Q
"RTN","RCDPBTLM",88,0)
 ;
"RTN","RCDPBTLM",89,0)
 ;
"RTN","RCDPBTLM",90,0)
HDR ;  header code for list manager display
"RTN","RCDPBTLM",91,0)
 ;  requires rcbillda
"RTN","RCDPBTLM",92,0)
 N %,DATA,RCDEBTDA,RCDPDATA
"RTN","RCDPBTLM",93,0)
 ;
"RTN","RCDPBTLM",94,0)
 D DIQ430^RCDPBPLM(RCBILLDA,".01;8;")
"RTN","RCDPBTLM",95,0)
 ;
"RTN","RCDPBTLM",96,0)
 S RCDEBTDA=$P(^PRCA(430,RCBILLDA,0),U,9)
"RTN","RCDPBTLM",97,0)
 S DATA=$$ACCNTHDR^RCDPAPLM(RCDEBTDA)
"RTN","RCDPBTLM",98,0)
 ;
"RTN","RCDPBTLM",99,0)
 S %="",$P(%," ",80)=""
"RTN","RCDPBTLM",100,0)
 ; PRCA*4.5*276 - get EEOB indicator for 1st/3rd party payment and attach to bill when applicable
"RTN","RCDPBTLM",101,0)
 S PRCOUT=$$COMP3^PRCAAPR(RCBILLDA)
"RTN","RCDPBTLM",102,0)
 I PRCOUT'="%" S PRCOUT=$$IBEEOBCK^PRCAAPR1(RCBILLDA)
"RTN","RCDPBTLM",103,0)
 S VALMHDR(1)=$E("Bill #: "_$G(PRCOUT)_$G(RCDPDATA(430,RCBILLDA,.01,"E"))_%,1,25)_"Account: "_$P(DATA,U)_$P(DATA,U,2)
"RTN","RCDPBTLM",104,0)
 S VALMHDR(2)=$E("Status: "_$G(RCDPDATA(430,RCBILLDA,8,"E"))_%,1,25)_$E("   Addr: "_$P(DATA,U,4)_", "_$P(DATA,U,7)_", "_$P(DATA,U,8)_"  "_$P(DATA,U,9)_%,1,55)
"RTN","RCDPBTLM",105,0)
 ; PRCA*4.5*276 - show caption for user
"RTN","RCDPBTLM",106,0)
 S VALMSG="|% EEOB | Enter ?? for more actions |" ; PRCA*4.5*276
"RTN","RCDPBTLM",107,0)
 Q
"RTN","RCDPBTLM",108,0)
 S VALMHDR(3)="  "_IORVON_$E("Bill Balance: "_$J($P(RCTOTAL,U)+$P(RCTOTAL,U,2)+$P(RCTOTAL,U,3)+$P(RCTOTAL,U,4)+$P(RCTOTAL,U,5),0,2)_%,1,23)_IORVOFF_"  Phone: "_$P(DATA,U,10)
"RTN","RCDPBTLM",109,0)
 Q
"RTN","RCDPBTLM",110,0)
 ;
"RTN","RCDPBTLM",111,0)
 ;
"RTN","RCDPBTLM",112,0)
EXIT ;  exit list manager option and clean up
"RTN","RCDPBTLM",113,0)
 K ^TMP("RCDPBTLM",$J),^TMP("RCDPBTLMX",$J)
"RTN","RCDPBTLM",114,0)
 Q
"RTN","RCDPBTLM",115,0)
 ;
"RTN","RCDPBTLM",116,0)
 ;
"RTN","RCDPBTLM",117,0)
SELBILL() ;  select a bill
"RTN","RCDPBTLM",118,0)
 ;  returns -1 for timeout or ^, 0 for no selection, or ien of bill
"RTN","RCDPBTLM",119,0)
 N %,%Y,C,DIC,DTOUT,DUOUT,RCBEFLUP,X,Y
"RTN","RCDPBTLM",120,0)
 N DPTNOFZY,DPTNOFZK S (DPTNOFZY,DPTNOFZK)=1
"RTN","RCDPBTLM",121,0)
 N RCY,DIR,DIRUT
"RTN","RCDPBTLM",122,0)
 ; allow user to get the record using bill# or ECME#
"RTN","RCDPBTLM",123,0)
 S DIR("A")="Select (B)ILL or (E)CME#: "
"RTN","RCDPBTLM",124,0)
 S DIR(0)="SA^B:BILL NUMBER;E:ECME#"
"RTN","RCDPBTLM",125,0)
 S DIR("B")="B"
"RTN","RCDPBTLM",126,0)
 D ^DIR K DIR I $D(DIRUT) Q 0
"RTN","RCDPBTLM",127,0)
 S RCY=Y
"RTN","RCDPBTLM",128,0)
 I RCY="E" Q $$SELECME
"RTN","RCDPBTLM",129,0)
 S DIC="^PRCA(430,",DIC(0)="QEAM",DIC("A")="Select BILL: "
"RTN","RCDPBTLM",130,0)
 S DIC("W")="D DICW^RCBEUBI1"
"RTN","RCDPBTLM",131,0)
 ;  special lookup on input
"RTN","RCDPBTLM",132,0)
 S RCBEFLUP=1
"RTN","RCDPBTLM",133,0)
 D ^DIC
"RTN","RCDPBTLM",134,0)
 I Y<0,'$G(DUOUT),'$G(DTOUT) S Y=0
"RTN","RCDPBTLM",135,0)
 Q +Y
"RTN","RCDPBTLM",136,0)
 ;
"RTN","RCDPBTLM",137,0)
 ;
"RTN","RCDPBTLM",138,0)
GETTRANS(BILLDA) ;  original amount goes first for bill
"RTN","RCDPBTLM",139,0)
 ;  returns list of transactions in
"RTN","RCDPBTLM",140,0)
 ;  rclist(date,tranda)=trantype ^ principle ^ interest ^ admin
"RTN","RCDPBTLM",141,0)
 ;  returns principle balance ^ interest balance ^ admin balance
"RTN","RCDPBTLM",142,0)
 ;        ^ marshall fee balance ^ court cost balance
"RTN","RCDPBTLM",143,0)
 N %,ADMBAL,AMTDISP,CCBAL,DATA0,DATA1,DATE,INTBAL,MFBAL,PRINBAL,RCDPDATA,RCUSER,TRANDA,VALUE
"RTN","RCDPBTLM",144,0)
 ;
"RTN","RCDPBTLM",145,0)
 D DIQ430^RCDPBPLM(BILLDA,"3;60;")
"RTN","RCDPBTLM",146,0)
 ;
"RTN","RCDPBTLM",147,0)
 K RCLIST
"RTN","RCDPBTLM",148,0)
 S (ADMBAL,CCBAL,INTBAL,MFBAL,PRINBAL)=0
"RTN","RCDPBTLM",149,0)
 S PRINBAL=RCDPDATA(430,BILLDA,3,"I")
"RTN","RCDPBTLM",150,0)
 ;  loop transaction and add to list
"RTN","RCDPBTLM",151,0)
 S TRANDA=0 F  S TRANDA=$O(^PRCA(433,"C",BILLDA,TRANDA)) Q:'TRANDA  D
"RTN","RCDPBTLM",152,0)
 .   S DATA0=$G(^PRCA(433,TRANDA,0))  ;PRCA*4.5*315 Needed for User ID
"RTN","RCDPBTLM",153,0)
 .   S RCUSER=$P(DATA0,U,9)  ;PRCA*4.5*315
"RTN","RCDPBTLM",154,0)
 .   S RCUSER=$$GET1^DIQ(200,RCUSER_",",1)  ;PRCA*4.5*315 
"RTN","RCDPBTLM",155,0)
 .   S DATA1=$G(^PRCA(433,TRANDA,1))
"RTN","RCDPBTLM",156,0)
 .   S DATE=$P(DATA1,U,9) I 'DATE Q
"RTN","RCDPBTLM",157,0)
 .   S VALUE=$$TRANVALU(TRANDA)  ;PRCA*4.5*315 (was I VALUE="" Q)
"RTN","RCDPBTLM",158,0)
 .   S RCLIST($P(DATE,"."),TRANDA)=$P($G(^PRCA(430.3,+$P(DATA1,U,2),0)),U)_VALUE
"RTN","RCDPBTLM",159,0)
 .   S $P(RCLIST($P(DATE,"."),TRANDA),U,7)=RCUSER  ;PRCA*4.5*315
"RTN","RCDPBTLM",160,0)
 .   ;
"RTN","RCDPBTLM",161,0)
 .   ;  calculate bill's balance
"RTN","RCDPBTLM",162,0)
 .   S PRINBAL=PRINBAL+$P(VALUE,U,2)
"RTN","RCDPBTLM",163,0)
 .   S INTBAL=INTBAL+$P(VALUE,U,3)
"RTN","RCDPBTLM",164,0)
 .   S ADMBAL=ADMBAL+$P(VALUE,U,4)
"RTN","RCDPBTLM",165,0)
 .   S MFBAL=MFBAL+$P(VALUE,U,5)
"RTN","RCDPBTLM",166,0)
 .   S CCBAL=CCBAL+$P(VALUE,U,6)
"RTN","RCDPBTLM",167,0)
 ;
"RTN","RCDPBTLM",168,0)
 S DATE=$G(RCDPDATA(430,BILLDA,60,"I"))
"RTN","RCDPBTLM",169,0)
 ;  check to make sure activation date is not greater than first transaction
"RTN","RCDPBTLM",170,0)
 S %=$O(RCLIST(0)) I DATE>% S DATE=%
"RTN","RCDPBTLM",171,0)
 S RCLIST(+$P(DATE,"."),0)="original amount^"_RCDPDATA(430,BILLDA,3,"I")
"RTN","RCDPBTLM",172,0)
 ;
"RTN","RCDPBTLM",173,0)
 Q PRINBAL_U_INTBAL_U_ADMBAL_U_MFBAL_U_CCBAL
"RTN","RCDPBTLM",174,0)
 ;
"RTN","RCDPBTLM",175,0)
 ;
"RTN","RCDPBTLM",176,0)
TRANVALU(TRANDA) ;  return the transaction value as displayed (with + or - sign)
"RTN","RCDPBTLM",177,0)
 N TYPE,VALUE
"RTN","RCDPBTLM",178,0)
 S VALUE=$$TRANBAL^RCRJRCOT(TRANDA)
"RTN","RCDPBTLM",179,0)
 ;  no dollars on transaction
"RTN","RCDPBTLM",180,0)
 I '$P(VALUE,U),'$P(VALUE,U,2),'$P(VALUE,U,3),'$P(VALUE,U,4),'$P(VALUE,U,5) Q ""
"RTN","RCDPBTLM",181,0)
 ;  check type for payments, etc, make values (-) to subtract
"RTN","RCDPBTLM",182,0)
 S TYPE=$P($G(^PRCA(433,TRANDA,1)),U,2)
"RTN","RCDPBTLM",183,0)
 I TYPE=2!(TYPE=8)!(TYPE=9)!(TYPE=10)!(TYPE=11)!(TYPE=14)!(TYPE=29)!(TYPE=34)!(TYPE=35)!(TYPE=41) D
"RTN","RCDPBTLM",184,0)
 .   S $P(VALUE,U,1)=-$P(VALUE,U,1)
"RTN","RCDPBTLM",185,0)
 .   S $P(VALUE,U,2)=-$P(VALUE,U,2)
"RTN","RCDPBTLM",186,0)
 .   S $P(VALUE,U,3)=-$P(VALUE,U,3)
"RTN","RCDPBTLM",187,0)
 .   S $P(VALUE,U,4)=-$P(VALUE,U,4)
"RTN","RCDPBTLM",188,0)
 .   S $P(VALUE,U,5)=-$P(VALUE,U,5)
"RTN","RCDPBTLM",189,0)
 ;
"RTN","RCDPBTLM",190,0)
 ;  the following transaction types should not change the bills balance
"RTN","RCDPBTLM",191,0)
 ;  return the amount displayed in the description and 0 for value
"RTN","RCDPBTLM",192,0)
 ;    refer to RC 3, refer to DOJ 4, reestablish 5, returned 6 and 32
"RTN","RCDPBTLM",193,0)
 ;    repayment plan 25, amended 33, suspended 47, unsuspended 46
"RTN","RCDPBTLM",194,0)
 K AMTDISP
"RTN","RCDPBTLM",195,0)
 I TYPE=3!(TYPE=4)!(TYPE=5)!(TYPE=6)!(TYPE=25)!(TYPE=32)!(TYPE=33)!(TYPE=46)!(TYPE=47) D
"RTN","RCDPBTLM",196,0)
 .   S AMTDISP=" ($"_$J($P(VALUE,U)+$P(VALUE,U,2)+$P(VALUE,U,3)+$P(VALUE,U,4)+$P(VALUE,U,5),0,2)_")"
"RTN","RCDPBTLM",197,0)
 .   S VALUE=""
"RTN","RCDPBTLM",198,0)
 Q $G(AMTDISP)_U_VALUE
"RTN","RCDPBTLM",199,0)
 ;
"RTN","RCDPBTLM",200,0)
SELECME() ;
"RTN","RCDPBTLM",201,0)
 ; function takes the user input of the ECME # to return a valid ien of file 430
"RTN","RCDPBTLM",202,0)
 ; if an invalid ECME is evaluated then the process keeps asking the user for ECME #
"RTN","RCDPBTLM",203,0)
 ; until a valid ECME# is entered or until the user enters a U or null value
"RTN","RCDPBTLM",204,0)
 ; output - returns the IEN of the record entry in the ACCOUNT RECEIVABLE file (#430) or "??"
"RTN","RCDPBTLM",205,0)
 N RCECME,RCBILL,DIR,DIRUT,Y
"RTN","RCDPBTLM",206,0)
 S DIR(0)="FO^1:12^I X'?1.12N W !!,""Cannot contain alpha characters"" K X"
"RTN","RCDPBTLM",207,0)
 S DIR("A")="Select ECME#"
"RTN","RCDPBTLM",208,0)
RET D ^DIR I $D(DIRUT) Q 0
"RTN","RCDPBTLM",209,0)
 S RCECME=$S(+Y>0:Y,1:0)
"RTN","RCDPBTLM",210,0)
 S RCBILL=$$REC^IBRFN(RCECME)    ; IA 2031
"RTN","RCDPBTLM",211,0)
 I RCBILL<0 W !!,"??" G RET
"RTN","RCDPBTLM",212,0)
 E  W !!,$P($G(^PRCA(430,+RCBILL,0)),U)," "
"RTN","RCDPBTLM",213,0)
 Q RCBILL
"RTN","RCDPBTLM",214,0)
 ;RCDPBTLM
"RTN","RCDPRTEX")
0^10^B59632459^n/a
"RTN","RCDPRTEX",1,0)
RCDPRTEX ;ALB/LMH - Claims Matching Report for Excel ;30-SEP 2016
"RTN","RCDPRTEX",2,0)
 ;;4.5;Accounts Receivable;**315**;Mar 20, 1995;Build 67
"RTN","RCDPRTEX",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCDPRTEX",4,0)
 ;
"RTN","RCDPRTEX",5,0)
 Q
"RTN","RCDPRTEX",6,0)
 ;
"RTN","RCDPRTEX",7,0)
PRINT ; Entry point for printing the report
"RTN","RCDPRTEX",8,0)
 ; Input: 
"RTN","RCDPRTEX",9,0)
 ;    RCEXCEL - 1 - CSV format, 0 otherwise
"RTN","RCDPRTEX",10,0)
 ; Output: 
"RTN","RCDPRTEX",11,0)
 ;    Report is printed in text format for Excel (turn on logging)
"RTN","RCDPRTEX",12,0)
 ; 
"RTN","RCDPRTEX",13,0)
 Q:'RCEXCEL
"RTN","RCDPRTEX",14,0)
 K ^TMP("RCDPRTPB",$J),^TMP("IBRBT",$J),^TMP("IBRBF",$J)
"RTN","RCDPRTEX",15,0)
 N DAT,RCBIL,RCBIL0,RCNAM,RCPAY,RCPAY1,RCREC,RCREC1,RCRECTDA,RCSSN,RCTYP
"RTN","RCDPRTEX",16,0)
 D @($S(RCSORT=1:"PAT",RCSORT=2:"BILL",RCSORT=3:"DATE",RCSORT=4:"REC",RCSORT=5:"TYPE")_"^RCDPRTP0")
"RTN","RCDPRTEX",17,0)
 ;
"RTN","RCDPRTEX",18,0)
 N CRT,DIR,DIROUT,DIRUT,DTOUT,DUOUT,RCSTOP
"RTN","RCDPRTEX",19,0)
 N PAGE,SEPLINE,X,XX,Y
"RTN","RCDPRTEX",20,0)
 S CRT=$S(IOST["C-":1,1:0) ; 1 - Print to Screen, 0 - Otherwise
"RTN","RCDPRTEX",21,0)
 S:RCEXCEL IOSL=999999 ; Long screen length for Excel output
"RTN","RCDPRTEX",22,0)
 S PAGE=0,RCSTOP=0,$P(SEPLINE,"-",81)=""
"RTN","RCDPRTEX",23,0)
 I '$D(^TMP("RCDPRTPB",$J)) D  Q
"RTN","RCDPRTEX",24,0)
 . W @IOF,$C(13) ; No data was compiled
"RTN","RCDPRTEX",25,0)
 . W !!?5,"No data found for this report."
"RTN","RCDPRTEX",26,0)
 . I CRT,'$D(ZTQUEUED) D
"RTN","RCDPRTEX",27,0)
 . . D ^DIR
"RTN","RCDPRTEX",28,0)
 ;
"RTN","RCDPRTEX",29,0)
START       ;
"RTN","RCDPRTEX",30,0)
 N RCPAT0,NAME,BILLNUM,BILLFROM,BILLTO,RXCOV,LRCIBFN,DOB,AMT,CHGTYP,STATUS
"RTN","RCDPRTEX",31,0)
 N RCH,AMT1,PAYOR,PST,FILLFROM,FILLTO,ONHOLD,RCAMT,RCAMT1,RCIBDAT,STRING,RCBILL0
"RTN","RCDPRTEX",32,0)
 N RCQ,RCSSN,RCTP,X,Y,RCEXNAM,ELIG,FPCBILL,POSTDATE,RCDOB,RCFLAG
"RTN","RCDPRTEX",33,0)
 D EXCELHD
"RTN","RCDPRTEX",34,0)
 ;
"RTN","RCDPRTEX",35,0)
 S RCNAM="" F  S RCNAM=$O(^TMP("RCDPRTPB",$J,RCNAM)) Q:RCNAM=""  D
"RTN","RCDPRTEX",36,0)
 .S RCBILL=0 F  S RCBILL=$O(^TMP("RCDPRTPB",$J,RCNAM,RCBILL)) Q:'RCBILL  D
"RTN","RCDPRTEX",37,0)
 ..D DEMOG
"RTN","RCDPRTEX",38,0)
 ..D PROC^RCDPRTP1 ;    Process each third party bill for a patient.
"RTN","RCDPRTEX",39,0)
 ..K ^TMP("IBRBT",$J),^TMP("IBRBF",$J)
"RTN","RCDPRTEX",40,0)
 Q
"RTN","RCDPRTEX",41,0)
 ;
"RTN","RCDPRTEX",42,0)
DEMOG   ; Demographic data for third party bills &  
"RTN","RCDPRTEX",43,0)
 ;        first party charges detail line header 
"RTN","RCDPRTEX",44,0)
 ; 
"RTN","RCDPRTEX",45,0)
 S RCPAT0=$G(^TMP("RCDPRTPB",$J,RCNAM))
"RTN","RCDPRTEX",46,0)
 S DATE=$G(^TMP("RCDPRTPB",$J,RCNAM,RCBILL))
"RTN","RCDPRTEX",47,0)
 S RCNAME=$P(RCNAM,"^")
"RTN","RCDPRTEX",48,0)
 S RCBILL0=$G(^PRCA(430,RCBILL,0))
"RTN","RCDPRTEX",49,0)
 S RCDFN=$P($G(^PRCA(430,RCBILL,0)),U,7)
"RTN","RCDPRTEX",50,0)
 S RCDOB=$P($G(^DPT(RCDFN,0)),U,3)
"RTN","RCDPRTEX",51,0)
 S DOB=$$FMTE^XLFDT(RCDOB,"5Z")
"RTN","RCDPRTEX",52,0)
 S DEBTOR=$P($G(RCBILL0),U,9)
"RTN","RCDPRTEX",53,0)
 S RCDEBTOR=$O(^RCD(340,"B",RCDFN_";DPT(",0)) Q:'RCDEBTOR
"RTN","RCDPRTEX",54,0)
 S RCSSN=$$SSN^RCFN01($G(RCDEBTOR))
"RTN","RCDPRTEX",55,0)
 S ELIG=$P($G(RCPAT0),U,2)
"RTN","RCDPRTEX",56,0)
 Q
"RTN","RCDPRTEX",57,0)
 ;
"RTN","RCDPRTEX",58,0)
PRNTPAT   ; setup & print third party bills
"RTN","RCDPRTEX",59,0)
 S RCTP=RCBILL,RCIBDAT=$G(^TMP("IBRBT",$J,RCBILL,RCBILL))
"RTN","RCDPRTEX",60,0)
 S STATUS=$$STAT^RCDPRTP2(RCTP) Q:STATUS="CN"!(STATUS="CB")  ;Added a last minute check for cancelled third party bills
"RTN","RCDPRTEX",61,0)
 S RXCOV=$S('$G(^TMP("IBRBT",$J,RCBILL)):"NO",1:"YES")
"RTN","RCDPRTEX",62,0)
 S BILLNUM=$P(RCIBDAT,U,4) ; BILL #
"RTN","RCDPRTEX",63,0)
 S PST=$P(RCIBDAT,U,5) ; P/S/T
"RTN","RCDPRTEX",64,0)
 S BILLFROM=$$DATE^RCDPRTP2($P(RCIBDAT,U)) ; bill date from
"RTN","RCDPRTEX",65,0)
 S BILLTO=$$DATE^RCDPRTP2($P(RCIBDAT,U,2)) ; bill date to
"RTN","RCDPRTEX",66,0)
 S RCDATE=$S($G(RCTP(RCTP)):RCTP(RCTP),$G(^TMP("RCDPRTPB",$J,RCNAM,RCBILL)):^(RCBILL),1:"") I RCTP=RCBILL!($D(RCTP(RCTP))) S POSTDATE=$$DATE^RCDPRTP2(RCDATE)
"RTN","RCDPRTEX",67,0)
 S RCIBFN=RCTP
"RTN","RCDPRTEX",68,0)
 S RCDATE=$P($G(^PRCA(430,+RCTP,0)),U,14)
"RTN","RCDPRTEX",69,0)
 S POSTDATE=$S(RCDATE=DATE:$$DATE^RCDPRTP2(RCDATE),RCDATE'=DATE:"^")
"RTN","RCDPRTEX",70,0)
 S PAYOR=$P(RCIBDAT,U,7) ; payor
"RTN","RCDPRTEX",71,0)
 S RCAMT=$P($G(^PRCA(430,+RCTP,0)),"^",3) ; amt billed
"RTN","RCDPRTEX",72,0)
 S RCAMT1=$P($G(^PRCA(430,+RCTP,7)),"^",7) ; amt paid
"RTN","RCDPRTEX",73,0)
 S RCTYPE=$$TYP^IBRFN(RCTP) ;Third party bill type of care
"RTN","RCDPRTEX",74,0)
 S RCTYPE=$S(RCTYPE="":-1,RCTYPE="PR":"P",RCTYPE="PH":"R",1:RCTYPE)
"RTN","RCDPRTEX",75,0)
 S RCFLAG=RCTYPE
"RTN","RCDPRTEX",76,0)
 S RCTP=RCBILL
"RTN","RCDPRTEX",77,0)
 D EXCELPAT
"RTN","RCDPRTEX",78,0)
 ;
"RTN","RCDPRTEX",79,0)
EXCELTPB ; print other assoc. third party bills
"RTN","RCDPRTEX",80,0)
 S RCTP=0 F  S RCTP=$O(^TMP("IBRBT",$J,RCBILL,RCTP)) Q:'RCTP  D
"RTN","RCDPRTEX",81,0)
 .S STATUS=$$STAT^RCDPRTP2(RCTP) Q:STATUS="CN"!(STATUS="CB")  ;Added a last minute check for cancelled third party bills
"RTN","RCDPRTEX",82,0)
 .I RCBILL=RCTP Q  ; don't reprint the bill that was paid.
"RTN","RCDPRTEX",83,0)
 .S RCIBDAT=$G(^TMP("IBRBT",$J,RCBILL,RCTP))
"RTN","RCDPRTEX",84,0)
 .I 'RCAN,($P(RCIBDAT,"^",3)) Q  ; exclude cancelled bills
"RTN","RCDPRTEX",85,0)
 .D DEMOG
"RTN","RCDPRTEX",86,0)
 .S RXCOV=$S('$G(^TMP("IBRBT",$J,RCBILL)):"NO",1:"YES")
"RTN","RCDPRTEX",87,0)
 .S BILLNUM=$P(RCIBDAT,U,4) ; BILL #
"RTN","RCDPRTEX",88,0)
 .S PST=$P(RCIBDAT,U,5) ; P/S/T
"RTN","RCDPRTEX",89,0)
 .S BILLFROM=$$DATE^RCDPRTP2($P(RCIBDAT,U)) ; bill date from
"RTN","RCDPRTEX",90,0)
 .S BILLTO=$$DATE^RCDPRTP2($P(RCIBDAT,U,2)) ; bill date to
"RTN","RCDPRTEX",91,0)
 .S RCDATE=$P($G(^PRCA(430,+RCTP,0)),U,14)
"RTN","RCDPRTEX",92,0)
 .S POSTDATE=$S(RCDATE=DATE:$$DATE^RCDPRTP2(RCDATE),RCDATE'=DATE:"^")
"RTN","RCDPRTEX",93,0)
 .S RCIBFN=RCTP
"RTN","RCDPRTEX",94,0)
 .;S STATUS=$$STAT^RCDPRTP2(RCIBFN)
"RTN","RCDPRTEX",95,0)
 .S PAYOR=$P(RCIBDAT,U,7) ; payor 
"RTN","RCDPRTEX",96,0)
 .S RCAMT=$P($G(^PRCA(430,+RCTP,0)),"^",3) ; amt billed
"RTN","RCDPRTEX",97,0)
 .S RCAMT1=$P($G(^PRCA(430,+RCTP,7)),"^",7) ; amt paid
"RTN","RCDPRTEX",98,0)
 .S RCTYPE=$$TYP^IBRFN(RCTP) ;Third party bill type of care
"RTN","RCDPRTEX",99,0)
 .S RCTYPE=$S(RCTYPE="":-1,RCTYPE="PR":"P",RCTYPE="PH":"R",1:RCTYPE)
"RTN","RCDPRTEX",100,0)
 .D EXCELPAT
"RTN","RCDPRTEX",101,0)
 ;
"RTN","RCDPRTEX",102,0)
PRNTFPC   ; print associated first party charges
"RTN","RCDPRTEX",103,0)
 ;                                                                                     This code screens entries from file 350.1 returned by API - RELBILL^IBRFN
"RTN","RCDPRTEX",104,0)
 N RCACTYP,J  ;Do the next section of code only if Care Types were selected - Stored in RCTYPE([care type])
"RTN","RCDPRTEX",105,0)
 I $D(RCTYPE)>1 S J=0 F  S J=$O(^TMP("IBRBF",$J,RCBILL,J)) Q:'J  D  ;Loop through 1st party bills
"RTN","RCDPRTEX",106,0)
 . S RCACTYP=$P(^TMP("IBRBF",$J,RCBILL,J),U,6) Q:RCACTYP=""  ;6th piece is Action Type
"RTN","RCDPRTEX",107,0)
 . I RCACTYP["TRICARE"!(RCACTYP["CHAMPA") Q  ;Not needed for screening 1st party charges
"RTN","RCDPRTEX",108,0)
 . I RCACTYP["RX" S RCTYP="R" D KILFPTY^RCDPRTP1 Q
"RTN","RCDPRTEX",109,0)
 . I RCACTYP["OPT"!(RCACTYP["OBSERV") S RCTYP="O" D KILFPTY^RCDPRTP1 Q
"RTN","RCDPRTEX",110,0)
 . I RCACTYP["INPT"!(RCACTYP["NHCU")!(RCACTYP["ADMIS")!(RCACTYP["MEDICARE DECUCTIBLE") S RCTYP="I" D KILFPTY^RCDPRTP1 Q
"RTN","RCDPRTEX",111,0)
 ;
"RTN","RCDPRTEX",112,0)
 S RCTP(0)=0 F  S RCTP(0)=$O(^TMP("IBRBF",$J,RCTP(0))) Q:'RCTP(0)!$G(RCQ)  D
"RTN","RCDPRTEX",113,0)
 .S RCTP=0 F  S RCTP=$O(^TMP("IBRBF",$J,RCTP(0),RCTP)) Q:'RCTP!$G(RCQ)  D 
"RTN","RCDPRTEX",114,0)
 ..S RCNO=1
"RTN","RCDPRTEX",115,0)
 ..S RCIBDAT=$G(^TMP("IBRBF",$J,RCTP(0),RCTP))
"RTN","RCDPRTEX",116,0)
 ..S RCIBFN=$P(RCIBDAT,U,4) I RCIBFN S RCIBFN=$O(^PRCA(430,"B",RCIBFN,0))
"RTN","RCDPRTEX",117,0)
 ..D DEMOG
"RTN","RCDPRTEX",118,0)
 ..S RXCOV=$S('$G(^TMP("IBRBT",$J,RCBILL)):"NO",1:"YES")
"RTN","RCDPRTEX",119,0)
 ..S FILLFROM=$$DATE^RCDPRTP2(+RCIBDAT) ; Bill from
"RTN","RCDPRTEX",120,0)
 ..S FILLTO=$$DATE^RCDPRTP2($P(RCIBDAT,U,2)) ; Bill to
"RTN","RCDPRTEX",121,0)
 ..S CHGTYP=$P(RCIBDAT,U,6)
"RTN","RCDPRTEX",122,0)
 ..S RCIBFN=$P(RCIBDAT,"^",4) I RCIBFN S RCIBFN=$O(^PRCA(430,"B",RCIBFN,0))
"RTN","RCDPRTEX",123,0)
 ..S FPCBILL=$P(RCIBDAT,U,4)
"RTN","RCDPRTEX",124,0)
 ..S STATUS=$$STAT^RCDPRTP2(RCIBFN) ; Status
"RTN","RCDPRTEX",125,0)
 ..S ONHOLD=$P(RCIBDAT,U,7) ; # Days On Hold
"RTN","RCDPRTEX",126,0)
 ..S AMT=$P(RCIBDAT,U,5) ; Amount billed
"RTN","RCDPRTEX",127,0)
 ..S BAL=$S($G(^PRCA(430,+RCIBFN,7)):+($P(^(7),"^")+$P(^(7),"^",2)+$P(^(7),"^",3)+$P(^(7),"^",4)+$P(^(7),"^",4)),1:0)
"RTN","RCDPRTEX",128,0)
 ..D EXCELFPC
"RTN","RCDPRTEX",129,0)
 .Q
"RTN","RCDPRTEX",130,0)
 Q
"RTN","RCDPRTEX",131,0)
 ;
"RTN","RCDPRTEX",132,0)
EXCELHD     ; Print an Excel CSV header record
"RTN","RCDPRTEX",133,0)
 ;
"RTN","RCDPRTEX",134,0)
 ; Input: None
"RTN","RCDPRTEX",135,0)
 ; Output: Header line printed for CSV format (excel)
"RTN","RCDPRTEX",136,0)
 ; :
"RTN","RCDPRTEX",137,0)
 N RCH
"RTN","RCDPRTEX",138,0)
 S STRING=""
"RTN","RCDPRTEX",139,0)
 S RCH=$$CSV("","Patient")
"RTN","RCDPRTEX",140,0)
 S RCH=$$CSV(RCH,"SSN")
"RTN","RCDPRTEX",141,0)
 S RCH=$$CSV(RCH,"DOB")
"RTN","RCDPRTEX",142,0)
 S RCH=$$CSV(RCH,"Prim. Elig")
"RTN","RCDPRTEX",143,0)
 S RCH=$$CSV(RCH,"RX Cvg")
"RTN","RCDPRTEX",144,0)
 S RCH=$$CSV(RCH,"Bill Type")
"RTN","RCDPRTEX",145,0)
 S RCH=$$CSV(RCH,"Bill#")
"RTN","RCDPRTEX",146,0)
 S RCH=$$CSV(RCH,"P/S/T")
"RTN","RCDPRTEX",147,0)
 S RCH=$$CSV(RCH,"Chg Type")
"RTN","RCDPRTEX",148,0)
 S RCH=$$CSV(RCH,"Status")
"RTN","RCDPRTEX",149,0)
 S RCH=$$CSV(RCH,"Bill From")
"RTN","RCDPRTEX",150,0)
 S RCH=$$CSV(RCH,"Bill To")
"RTN","RCDPRTEX",151,0)
 S RCH=$$CSV(RCH,"Posted")
"RTN","RCDPRTEX",152,0)
 S RCH=$$CSV(RCH,"Amt Billed")
"RTN","RCDPRTEX",153,0)
 S RCH=$$CSV(RCH,"Amt Pd")
"RTN","RCDPRTEX",154,0)
 S RCH=$$CSV(RCH,"Bal")
"RTN","RCDPRTEX",155,0)
 S RCH=$$CSV(RCH,"Care Type")
"RTN","RCDPRTEX",156,0)
 S RCH=$$CSV(RCH,"On Hold")
"RTN","RCDPRTEX",157,0)
 S RCH=$$CSV(RCH,"Payor")
"RTN","RCDPRTEX",158,0)
 W RCH,!
"RTN","RCDPRTEX",159,0)
 Q
"RTN","RCDPRTEX",160,0)
 ;
"RTN","RCDPRTEX",161,0)
EXCELPAT   ; Print patient third party bills
"RTN","RCDPRTEX",162,0)
 ;
"RTN","RCDPRTEX",163,0)
 ; Input: None
"RTN","RCDPRTEX",164,0)
 ; Output: Detail line printed for CSV format (excel)
"RTN","RCDPRTEX",165,0)
 ;
"RTN","RCDPRTEX",166,0)
 N RCD
"RTN","RCDPRTEX",167,0)
 S STRING=""
"RTN","RCDPRTEX",168,0)
 S RCD=$$CSV("",RCNAME)_"^"_$E(RCNAME,1)_$E(RCSSN,6,9)
"RTN","RCDPRTEX",169,0)
 S RCD=$$CSV(RCD,DOB)
"RTN","RCDPRTEX",170,0)
 S RCD=$$CSV(RCD,ELIG)
"RTN","RCDPRTEX",171,0)
 S RCD=$$CSV(RCD,RXCOV)
"RTN","RCDPRTEX",172,0)
 S RCD=$$CSV(RCD,"Third Party Bill")
"RTN","RCDPRTEX",173,0)
 S RCD=$$CSV(RCD,BILLNUM)
"RTN","RCDPRTEX",174,0)
 S RCD=$$CSV(RCD,PST)
"RTN","RCDPRTEX",175,0)
 S RCD=$$CSV(RCD,"^")
"RTN","RCDPRTEX",176,0)
 S RCD=$$CSV(RCD,STATUS)
"RTN","RCDPRTEX",177,0)
 S RCD=$$CSV(RCD,BILLFROM)
"RTN","RCDPRTEX",178,0)
 S RCD=$$CSV(RCD,BILLTO)
"RTN","RCDPRTEX",179,0)
 S RCD=$$CSV(RCD,POSTDATE)
"RTN","RCDPRTEX",180,0)
 S RCD=$$CSV(RCD,RCAMT)
"RTN","RCDPRTEX",181,0)
 S RCD=$$CSV(RCD,RCAMT1)
"RTN","RCDPRTEX",182,0)
 S RCD=$$CSV(RCD,"^")
"RTN","RCDPRTEX",183,0)
 S RCD=$$CSV(RCD,RCTYPE)
"RTN","RCDPRTEX",184,0)
 S RCD=$$CSV(RCD,"^")
"RTN","RCDPRTEX",185,0)
 S RCD=$$CSV(RCD,PAYOR)
"RTN","RCDPRTEX",186,0)
 W RCD,!
"RTN","RCDPRTEX",187,0)
 K RCTP(RCTP)
"RTN","RCDPRTEX",188,0)
 Q
"RTN","RCDPRTEX",189,0)
 ;
"RTN","RCDPRTEX",190,0)
EXCELFPC   ; Print patient first party charges
"RTN","RCDPRTEX",191,0)
 ;
"RTN","RCDPRTEX",192,0)
 ; Input: None
"RTN","RCDPRTEX",193,0)
 ; Output: Detail line printed for CSV format (excel)
"RTN","RCDPRTEX",194,0)
 ;
"RTN","RCDPRTEX",195,0)
 N RCB
"RTN","RCDPRTEX",196,0)
 S STRING=""
"RTN","RCDPRTEX",197,0)
 S RCB=$$CSV("",RCNAME)_"^"_$E(RCNAME,1)_$E(RCSSN,6,9)
"RTN","RCDPRTEX",198,0)
 S RCB=$$CSV(RCB,DOB)
"RTN","RCDPRTEX",199,0)
 S RCB=$$CSV(RCB,ELIG)
"RTN","RCDPRTEX",200,0)
 S RCB=$$CSV(RCB,"^")
"RTN","RCDPRTEX",201,0)
 S RCB=$$CSV(RCB,"First Party Charge")
"RTN","RCDPRTEX",202,0)
 S RCB=$$CSV(RCB,FPCBILL)
"RTN","RCDPRTEX",203,0)
 S RCB=$$CSV(RCB,"^")
"RTN","RCDPRTEX",204,0)
 S RCB=$$CSV(RCB,CHGTYP)
"RTN","RCDPRTEX",205,0)
 S RCB=$$CSV(RCB,STATUS)
"RTN","RCDPRTEX",206,0)
 S RCB=$$CSV(RCB,FILLFROM)
"RTN","RCDPRTEX",207,0)
 S RCB=$$CSV(RCB,FILLTO)
"RTN","RCDPRTEX",208,0)
 S RCB=$$CSV(RCB,"^")
"RTN","RCDPRTEX",209,0)
 S RCB=$$CSV(RCB,AMT)
"RTN","RCDPRTEX",210,0)
 S RCB=$$CSV(RCB,"^")
"RTN","RCDPRTEX",211,0)
 S RCB=$$CSV(RCB,BAL)
"RTN","RCDPRTEX",212,0)
 S RCB=$$CSV(RCB,"^")
"RTN","RCDPRTEX",213,0)
 S RCB=$$CSV(RCB,ONHOLD)
"RTN","RCDPRTEX",214,0)
 W RCB,!
"RTN","RCDPRTEX",215,0)
 Q
"RTN","RCDPRTEX",216,0)
 ;
"RTN","RCDPRTEX",217,0)
CSV(STRING,DATA) ; Build the Excel data string for CSV format
"RTN","RCDPRTEX",218,0)
 ; Input: STRING - Current string being built or ""
"RTN","RCDPRTEX",219,0)
 ; DATA - New data to be added to the string
"RTN","RCDPRTEX",220,0)
 ; Returns: STRING - Updated string with DATA added
"RTN","RCDPRTEX",221,0)
 ; 
"RTN","RCDPRTEX",222,0)
 S DATA=""_$TR(DATA,$C(94))
"RTN","RCDPRTEX",223,0)
 S STRING=$S(STRING="":DATA,1:STRING_"^"_DATA)
"RTN","RCDPRTEX",224,0)
 Q STRING
"RTN","RCDPRTEX",225,0)
 ;
"RTN","RCDPRTP")
0^2^B13526370^B8305080
"RTN","RCDPRTP",1,0)
RCDPRTP  ;ALB/LDB-CLAIMS MATCHING REPORT ;1/11/01  2:03 PM
"RTN","RCDPRTP",2,0)
 ;;4.5;Accounts Receivable;**151,186,315**;Mar 20, 1995;Build 67
"RTN","RCDPRTP",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCDPRTP",4,0)
 ;
"RTN","RCDPRTP",5,0)
EN ;
"RTN","RCDPRTP",6,0)
 N DATEEND,DATESTRT,DIC,DIR,DIRUT,POP,RCBILL,RCDEBT,RCDFN,RCPT,RCSORT,RCQUIT,%ZIS,ZTDESC,ZTSAVE,ZTRTN,Y,RCAN,DIOEND,ZTIO
"RTN","RCDPRTP",7,0)
 W !
"RTN","RCDPRTP",8,0)
 K DIRUT S DIR(0)="S^1:Patient;2:Bill Number;3:Payment dates;4:Receipt Number;5:Care Types",DIR("A")="Sort by" D ^DIR K DIR Q:$D(DIRUT)
"RTN","RCDPRTP",9,0)
 S RCSORT=Y,RCQUIT=""
"RTN","RCDPRTP",10,0)
 D @RCSORT Q:RCQUIT  W !
"RTN","RCDPRTP",11,0)
 K DIRUT S DIR(0)="Y",DIR("A")="Include cancelled bills",DIR("B")="NO" D ^DIR S RCAN=+Y Q:$D(DIRUT)
"RTN","RCDPRTP",12,0)
 ;
"RTN","RCDPRTP",13,0)
 ;  select device
"RTN","RCDPRTP",14,0)
 I $$FORMAT^RCDPRTP0(.RCEXCEL) D DEVICE^RCDPRTP0() I RCEXCEL=1,'QUIT G PRINT^RCDPRTEX
"RTN","RCDPRTP",15,0)
 W !!,"This report requires 132 columns.",!!
"RTN","RCDPRTP",16,0)
 K IOP,IO("Q") S %ZIS="MQ",%ZIS("B")="" D ^%ZIS Q:POP
"RTN","RCDPRTP",17,0)
 I $D(IO("Q")) D  Q
"RTN","RCDPRTP",18,0)
 .S ZTDESC="Claims Matching Report",ZTRTN="DQ^RCDPRTP"
"RTN","RCDPRTP",19,0)
 .S ZTSAVE("RCSORT")=""
"RTN","RCDPRTP",20,0)
 . I RCSORT=1 S ZTSAVE("RCDEBT")="",ZTSAVE("RCDFN")="",ZTSAVE("RCTYPE*")=""
"RTN","RCDPRTP",21,0)
 . I RCSORT=2 S ZTSAVE("RCBILL")="",ZTSAVE("RCDFN")="",ZTSAVE("RCDEBT")=""
"RTN","RCDPRTP",22,0)
 . I RCSORT=4 S ZTSAVE("RCPT")=""
"RTN","RCDPRTP",23,0)
 . I RCSORT=5 S ZTSAVE("RCTYPE*")=""
"RTN","RCDPRTP",24,0)
 . S ZTSAVE("RCAN")="",ZTSAVE("ZTREQ")="@",ZTSAVE("^TMP(""RCDPRTPB"",$J,")=""
"RTN","RCDPRTP",25,0)
 . S ZTSAVE("DATEEND")="",ZTSAVE("DATESTRT")="",ZTSAVE("RCQUIT")="",ZTSAVE("RCSORT")="",ZTSAVE("RCEXCEL")=""
"RTN","RCDPRTP",26,0)
 . S ZTIO=ION_";"_IOST_";"_IOM_";"_IOSL
"RTN","RCDPRTP",27,0)
 . S DIOEND="K ^TMP(""RCDPRTPB"",$J)"
"RTN","RCDPRTP",28,0)
 .D ^%ZTLOAD,HOME^%ZIS K IO("Q") W !,"Task# ",ZTSK
"RTN","RCDPRTP",29,0)
 W !!,?20,"<*> please wait <*>"
"RTN","RCDPRTP",30,0)
DQ     ;  queued report starts here
"RTN","RCDPRTP",31,0)
 U IO
"RTN","RCDPRTP",32,0)
 K ^TMP("RCDPRTPB",$J),^TMP("IBRBT",$J),^TMP("IBRBF",$J)
"RTN","RCDPRTP",33,0)
 N DAT,RCBIL,RCBIL0,RCNAM,RCPAY,RCPAY1,RCREC,RCREC1,RCRECTDA,RCSSN,RCTYP
"RTN","RCDPRTP",34,0)
 D @($S(RCSORT=1:"PAT",RCSORT=2:"BILL",RCSORT=3:"DATE",RCSORT=4:"REC",RCSORT=5:"TYPE")_"^RCDPRTP0")
"RTN","RCDPRTP",35,0)
 Q:RCQUIT
"RTN","RCDPRTP",36,0)
 D EN^RCDPRTP1
"RTN","RCDPRTP",37,0)
 W !!,?20,"<End of report>",!
"RTN","RCDPRTP",38,0)
 K DATESTRT,DATEEND,^TMP("RCDPRTPB",$J),RCTYPE
"RTN","RCDPRTP",39,0)
 D ^%ZISC
"RTN","RCDPRTP",40,0)
 Q
"RTN","RCDPRTP",41,0)
 ;
"RTN","RCDPRTP",42,0)
1 ; 
"RTN","RCDPRTP",43,0)
 S DIC(0)="QEAMZ",DIC=340,DIC("S")="I ^RCD(340,+Y,0)[""DPT""",DIC("A")="Patient name: " D ^DIC I Y<0 S RCQUIT=1 Q
"RTN","RCDPRTP",44,0)
 S RCDEBT=+Y,RCDFN=+$P(Y,"^",2)
"RTN","RCDPRTP",45,0)
 D TYPEPIC^RCDPRTP0(.RCTYPE) I '$D(RCTYPE) S RCQUIT=1 Q
"RTN","RCDPRTP",46,0)
 D DATESEL^RCRJRTRA("Payment")
"RTN","RCDPRTP",47,0)
 I '$G(DATESTRT)!('$G(DATEEND)) S RCQUIT=1
"RTN","RCDPRTP",48,0)
 Q
"RTN","RCDPRTP",49,0)
 ;
"RTN","RCDPRTP",50,0)
3 ; 
"RTN","RCDPRTP",51,0)
 D DATESEL^RCRJRTRA("Payment")
"RTN","RCDPRTP",52,0)
 I '$G(DATESTRT)!('$G(DATEEND)) S RCQUIT=1
"RTN","RCDPRTP",53,0)
 Q
"RTN","RCDPRTP",54,0)
 ;
"RTN","RCDPRTP",55,0)
2 ; 
"RTN","RCDPRTP",56,0)
 N DIC,DUOUT
"RTN","RCDPRTP",57,0)
 K ^TMP("IBRBF",$J)
"RTN","RCDPRTP",58,0)
 S DIC(0)="QEAM",DIC=430,DIC("S")="I $P(^(0),U,2)=9" D ^DIC I Y<0 S RCQUIT=1 Q
"RTN","RCDPRTP",59,0)
 S RCBILL=+Y,RCDFN=$P($G(^PRCA(430,+RCBILL,0)),"^",7) Q:'RCDFN
"RTN","RCDPRTP",60,0)
 S RCDEBT=$O(^RCD(340,"B",RCDFN_";DPT(",0))
"RTN","RCDPRTP",61,0)
 I (RCDFN="")!(RCDEBT="") W !,"This bill has no matching first party bills." G 2
"RTN","RCDPRTP",62,0)
 D RELBILL^IBRFN(RCBILL)
"RTN","RCDPRTP",63,0)
 I '$O(^TMP("IBRBF",$J,RCBILL,0)) W !,"This bill has no matching first party debts." K ^TMP("IBRBF",$J) G 2
"RTN","RCDPRTP",64,0)
 K ^TMP("IBRBF",$J)
"RTN","RCDPRTP",65,0)
 Q
"RTN","RCDPRTP",66,0)
 ;
"RTN","RCDPRTP",67,0)
4 ;  
"RTN","RCDPRTP",68,0)
 N DIC,X,Y
"RTN","RCDPRTP",69,0)
 S DIC(0)="QEAM",DIC=344 D ^DIC I Y<0 S RCQUIT=1 Q
"RTN","RCDPRTP",70,0)
 S RCPT=$P(Y,"^",2)
"RTN","RCDPRTP",71,0)
 Q
"RTN","RCDPRTP",72,0)
 ;
"RTN","RCDPRTP",73,0)
5 ; Select care type - added in patch 315
"RTN","RCDPRTP",74,0)
 D TYPEPIC^RCDPRTP0(.RCTYPE) I '$D(RCTYPE) S RCQUIT=1 Q
"RTN","RCDPRTP",75,0)
 Q:RCQUIT
"RTN","RCDPRTP",76,0)
 D DATESEL^RCRJRTRA("Payment")
"RTN","RCDPRTP",77,0)
 I '$G(DATESTRT)!('$G(DATEEND)) S RCQUIT=1
"RTN","RCDPRTP",78,0)
 Q
"RTN","RCDPRTP",79,0)
 ;
"RTN","RCDPRTP",80,0)
EXIT ;  
"RTN","RCDPRTP",81,0)
 K DATESTRT,DATEEND,RCEXCEL,^TMP("RCDPRTPB",$J),^TMP("IBRBT",$J)
"RTN","RCDPRTP",82,0)
 K ^TMP("IBRBT1",$J),^TMP("IBRBF",$J),^TMP("IBRBF1",$J),RCTYPE
"RTN","RCDPRTP",83,0)
 Q
"RTN","RCDPRTP",84,0)
 ;
"RTN","RCDPRTP0")
0^3^B47346688^B10254954
"RTN","RCDPRTP0",1,0)
RCDPRTP0 ;ALB/LDB - CLAIMS MATCHING REPORT ;5/24/00 10:48 AM
"RTN","RCDPRTP0",2,0)
 ;;4.5;Accounts Receivable;**151,315**;Mar 20, 1995;Build 67
"RTN","RCDPRTP0",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCDPRTP0",4,0)
 ;
"RTN","RCDPRTP0",5,0)
PAT      ;find patient bills
"RTN","RCDPRTP0",6,0)
 S RCNAM=$$NAM^RCFN01(RCDEBT)
"RTN","RCDPRTP0",7,0)
 S RCSSN=$$SSN^RCFN01(RCDEBT)
"RTN","RCDPRTP0",8,0)
 S RCBIL=0 F  S RCBIL=$O(^PRCA(430,"E",RCDFN,RCBIL)) Q:'RCBIL  D
"RTN","RCDPRTP0",9,0)
 .I $P($G(^PRCA(430,+RCBIL,0)),"^",2)'=9 Q
"RTN","RCDPRTP0",10,0)
 .S RCPAY=0 F  S RCPAY=$O(^PRCA(433,"C",RCBIL,RCPAY)) Q:'RCPAY  D
"RTN","RCDPRTP0",11,0)
 ..S RCPAY1=$G(^PRCA(433,+RCPAY,1)) Q:RCPAY1=""
"RTN","RCDPRTP0",12,0)
 ..I "^2^34^"[("^"_$P(RCPAY1,"^",2)_"^"),($P(RCPAY1,"^",9)'<DATESTRT),($P(RCPAY1,"^",9)<(DATEEND_".999999")) D
"RTN","RCDPRTP0",13,0)
 ...S DFN=RCDFN D DEM^VADPT,ELIG^VADPT
"RTN","RCDPRTP0",14,0)
 ...S RCTYPE=$$TYP^IBRFN(RCBIL) ; added care type - 315
"RTN","RCDPRTP0",15,0)
 ...S RCTYPE=$S(RCTYPE="":-1,RCTYPE="PR":"P",RCTYPE="PH":"R",1:RCTYPE)
"RTN","RCDPRTP0",16,0)
 ...I $D(RCTYPE(RCTYPE)) D  Q:'RCTYPE
"RTN","RCDPRTP0",17,0)
 ....S ^TMP("RCDPRTPB",$J,RCNAM)=$P($G(VADM(3)),"^",2)_"^"_$P($G(VAEL(1)),"^",2)_"^"_RCSSN
"RTN","RCDPRTP0",18,0)
 ....S ^TMP("RCDPRTPB",$J,RCNAM,RCBIL)=$P($P(RCPAY1,"^",9),".")
"RTN","RCDPRTP0",19,0)
 ....K DFN,VA,VADM,VAEL,VAERR
"RTN","RCDPRTP0",20,0)
 K RCDFN,RCDEBT
"RTN","RCDPRTP0",21,0)
 Q
"RTN","RCDPRTP0",22,0)
 ;
"RTN","RCDPRTP0",23,0)
DATE     ;find third party bills by date of payments
"RTN","RCDPRTP0",24,0)
 N RCDFN,RCDEBT
"RTN","RCDPRTP0",25,0)
 F RCTYP=2,34 S DAT=$$FMADD^XLFDT(DATESTRT,-1)_".999999" F  S DAT=$O(^PRCA(433,"AT",RCTYP,DAT)) Q:'DAT!(DAT>(DATEEND_".999999"))  D
"RTN","RCDPRTP0",26,0)
 .S RCPAY=0 F  S RCPAY=$O(^PRCA(433,"AT",RCTYP,DAT,RCPAY)) Q:'RCPAY  D
"RTN","RCDPRTP0",27,0)
 ..S RCBIL=$P($G(^PRCA(433,+RCPAY,0)),"^",2)
"RTN","RCDPRTP0",28,0)
 ..S RCBIL0=$G(^PRCA(430,+RCBIL,0)) Q:RCBIL0=""
"RTN","RCDPRTP0",29,0)
 ..Q:$P(RCBIL0,"^",2)'=9
"RTN","RCDPRTP0",30,0)
 ..S RCDFN=$P(RCBIL0,"^",7)
"RTN","RCDPRTP0",31,0)
 ..S RCDEBT=$O(^RCD(340,"B",RCDFN_";DPT(",0)) Q:'RCDEBT
"RTN","RCDPRTP0",32,0)
 ..S RCNAM=$$NAM^RCFN01(RCDEBT)
"RTN","RCDPRTP0",33,0)
 ..S RCSSN=$$SSN^RCFN01(RCDEBT)
"RTN","RCDPRTP0",34,0)
 ..S DFN=RCDFN D DEM^VADPT,ELIG^VADPT
"RTN","RCDPRTP0",35,0)
 ..S ^TMP("RCDPRTPB",$J,RCNAM_"^"_RCDEBT)=$P($G(VADM(3)),"^",2)_"^"_$P($G(VAEL(1)),"^",2)_"^"_RCSSN
"RTN","RCDPRTP0",36,0)
 ..S ^TMP("RCDPRTPB",$J,RCNAM_"^"_RCDEBT,RCBIL)=$P(DAT,".")
"RTN","RCDPRTP0",37,0)
 ..K DFN,VA,VADM,VAEL,VAERR
"RTN","RCDPRTP0",38,0)
 Q
"RTN","RCDPRTP0",39,0)
 ;
"RTN","RCDPRTP0",40,0)
TYPE     ;find third party bills by care type PRCA*4.5*315
"RTN","RCDPRTP0",41,0)
 N RCDFN,RCDEBT,RCTYP
"RTN","RCDPRTP0",42,0)
 F RCTYP=2,34 S DAT=$$FMADD^XLFDT(DATESTRT,-1)_".999999" F  S DAT=$O(^PRCA(433,"AT",RCTYP,DAT)) Q:'DAT!(DAT>(DATEEND_".999999"))  D
"RTN","RCDPRTP0",43,0)
 .S RCPAY=0 F  S RCPAY=$O(^PRCA(433,"AT",RCTYP,DAT,RCPAY)) Q:'RCPAY  D
"RTN","RCDPRTP0",44,0)
 ..S RCBIL=$P($G(^PRCA(433,+RCPAY,0)),"^",2)
"RTN","RCDPRTP0",45,0)
 ..S RCBIL0=$G(^PRCA(430,+RCBIL,0)) Q:RCBIL0=""
"RTN","RCDPRTP0",46,0)
 ..Q:$P(RCBIL0,"^",2)'=9
"RTN","RCDPRTP0",47,0)
 ..S RCDFN=$P(RCBIL0,"^",7)
"RTN","RCDPRTP0",48,0)
 ..S RCDEBT=$O(^RCD(340,"B",RCDFN_";DPT(",0)) Q:'RCDEBT
"RTN","RCDPRTP0",49,0)
 ..S RCNAM=$$NAM^RCFN01(RCDEBT)
"RTN","RCDPRTP0",50,0)
 ..S RCSSN=$$SSN^RCFN01(RCDEBT)
"RTN","RCDPRTP0",51,0)
 ..S DFN=RCDFN D DEM^VADPT,ELIG^VADPT
"RTN","RCDPRTP0",52,0)
 ..S RCTYPE=$$TYP^IBRFN(RCBIL)
"RTN","RCDPRTP0",53,0)
 ..S RCTYPE=$S(RCTYPE="":-1,RCTYPE="PR":"P",RCTYPE="PH":"R",1:RCTYPE)
"RTN","RCDPRTP0",54,0)
 ..I $D(RCTYPE(RCTYPE)) D  Q:'RCTYPE
"RTN","RCDPRTP0",55,0)
 ...S ^TMP("RCDPRTPB",$J,RCNAM_"^"_RCDEBT)=$P($G(VADM(3)),"^",2)_"^"_$P($G(VAEL(1)),"^",2)_"^"_RCSSN
"RTN","RCDPRTP0",56,0)
 ...S ^TMP("RCDPRTPB",$J,RCNAM_"^"_RCDEBT,RCBIL)=$P(DAT,".")
"RTN","RCDPRTP0",57,0)
 ...K DFN,VA,VADM,VAEL,VAERR
"RTN","RCDPRTP0",58,0)
 Q
"RTN","RCDPRTP0",59,0)
BILL     ;set TMP array
"RTN","RCDPRTP0",60,0)
 S RCDEBT=$O(^RCD(340,"B",RCDFN_";DPT(",0)) Q:'RCDEBT
"RTN","RCDPRTP0",61,0)
 S RCNAM=$$NAM^RCFN01(RCDEBT)
"RTN","RCDPRTP0",62,0)
 S RCSSN=$$SSN^RCFN01(RCDEBT)
"RTN","RCDPRTP0",63,0)
 S DFN=+$G(^RCD(340,RCDEBT,0))
"RTN","RCDPRTP0",64,0)
 D DEM^VADPT,ELIG^VADPT
"RTN","RCDPRTP0",65,0)
 S RCTP=0 F  S RCTP=$O(^PRCA(433,"C",RCBILL,RCTP)) Q:'RCTP  I "^2^34^"[("^"_$P($G(^PRCA(433,+RCTP,1)),"^",2)_"^") S RCTP(0)=$P($P($G(^PRCA(433,+RCTP,1)),"^",9),".")
"RTN","RCDPRTP0",66,0)
 S ^TMP("RCDPRTPB",$J,RCNAM)=$P($G(VADM(3)),"^",2)_"^"_$P($G(VAEL(1)),"^",2)_"^"_RCSSN
"RTN","RCDPRTP0",67,0)
 S ^TMP("RCDPRTPB",$J,RCNAM,RCBILL)=RCTP
"RTN","RCDPRTP0",68,0)
 K DFN,VA,VADM,VAEL,VAERR,RCBILL,RCTP
"RTN","RCDPRTP0",69,0)
 Q
"RTN","RCDPRTP0",70,0)
 ;
"RTN","RCDPRTP0",71,0)
REC      ;find receipt payments
"RTN","RCDPRTP0",72,0)
 N RCDEBT,RCDFN,RCREC1,RCPAY1,RCBIL,RCBIL0,RCDFN,RCDEBT,RCSSN
"RTN","RCDPRTP0",73,0)
 S RCREC1=0 F  S RCREC1=$O(^PRCA(433,"AF",RCPT,RCREC1)) Q:'RCREC1  D
"RTN","RCDPRTP0",74,0)
 .S RCPAY1=$G(^PRCA(433,+RCREC1,1)) Q:RCPAY1=""
"RTN","RCDPRTP0",75,0)
 .S RCBIL=0 I "^2^34^"[("^"_$P(RCPAY1,"^",2)_"^") S RCBIL=$P($G(^PRCA(433,+RCREC1,0)),"^",2)
"RTN","RCDPRTP0",76,0)
 .Q:'RCBIL
"RTN","RCDPRTP0",77,0)
 .S RCBIL0=$G(^PRCA(430,+RCBIL,0))
"RTN","RCDPRTP0",78,0)
 .Q:$P(RCBIL0,"^",2)'=9
"RTN","RCDPRTP0",79,0)
 .S RCDFN=$P(RCBIL0,"^",7) Q:'RCDFN
"RTN","RCDPRTP0",80,0)
 .S RCDEBT=$O(^RCD(340,"B",RCDFN_";DPT(",0)) Q:'RCDEBT
"RTN","RCDPRTP0",81,0)
 .S RCSSN=$$SSN^RCFN01(RCDEBT)
"RTN","RCDPRTP0",82,0)
 .S RCNAM=$$NAM^RCFN01(RCDEBT)
"RTN","RCDPRTP0",83,0)
 .S DFN=RCDFN D DEM^VADPT,ELIG^VADPT
"RTN","RCDPRTP0",84,0)
 .S ^TMP("RCDPRTPB",$J,RCNAM_"^"_RCDEBT)=$P($G(VADM(3)),"^",2)_"^"_$P($G(VAEL(1)),"^",2)_"^"_RCSSN
"RTN","RCDPRTP0",85,0)
 .K DFN,VA,VADM,VAEL,VAERR
"RTN","RCDPRTP0",86,0)
 .S ^TMP("RCDPRTPB",$J,RCNAM_"^"_RCDEBT,RCBIL)=$P($P($G(^PRCA(433,+RCREC1,1)),"^",9),".")
"RTN","RCDPRTP0",87,0)
 Q
"RTN","RCDPRTP0",88,0)
 ;
"RTN","RCDPRTP0",89,0)
TYPEPIC(RCTYPE) ; function for user selection of care types PRCA*4.5*315
"RTN","RCDPRTP0",90,0)
 ; RCTYPE is an output array, pass by reference
"RTN","RCDPRTP0",91,0)
 ; RCTYPE(type)="" where type can be (I)npatient, (O)utpatient,(P)rosthetics or (R)x (Prescription)
"RTN","RCDPRTP0",92,0)
 ; Function value is 1 if at least 1 care type was selected, 0 otherwise
"RTN","RCDPRTP0",93,0)
 ; User can select one, all or a combination of care types.
"RTN","RCDPRTP0",94,0)
 ;
"RTN","RCDPRTP0",95,0)
 N DIR,X,Y,OK,DTOUT,DUOUT,DIRUT,DIROUT,RC
"RTN","RCDPRTP0",96,0)
 K RCTYPE
"RTN","RCDPRTP0",97,0)
 S OK=1 ; all OK default
"RTN","RCDPRTP0",98,0)
 S DIR(0)="S"
"RTN","RCDPRTP0",99,0)
 S RC=";I:Inpatient"
"RTN","RCDPRTP0",100,0)
 S RC=RC_";O:Outpatient"
"RTN","RCDPRTP0",101,0)
 S RC=RC_";P:Prosthetic"
"RTN","RCDPRTP0",102,0)
 S RC=RC_";R:Prescription"
"RTN","RCDPRTP0",103,0)
 S RC=RC_";ALL:All"
"RTN","RCDPRTP0",104,0)
 S $P(DIR(0),U,2)=RC,DIR("B")="ALL"
"RTN","RCDPRTP0",105,0)
 S DIR("A")="Select a Care Type"
"RTN","RCDPRTP0",106,0)
 W ! D ^DIR K DIR
"RTN","RCDPRTP0",107,0)
 I (Y["A") D  Q  ; all types selected so set & quit
"RTN","RCDPRTP0",108,0)
 . F X="I","O","P","R" S RCTYPE(X)=""
"RTN","RCDPRTP0",109,0)
 . Q
"RTN","RCDPRTP0",110,0)
 I $D(DIRUT)!(Y="") Q
"RTN","RCDPRTP0",111,0)
 S X=$$UC(X)
"RTN","RCDPRTP0",112,0)
 S RCTYPE(X)=""                 ; Toggle back on
"RTN","RCDPRTP0",113,0)
 ; Select another type
"RTN","RCDPRTP0",114,0)
 I (Y'["A") F  D  Q:X=""!(RCQUIT)
"RTN","RCDPRTP0",115,0)
 . I ($G(DIRUT)'="") S OK=0,RCQUIT=1 Q
"RTN","RCDPRTP0",116,0)
 . S DIR(0)="SBO^I:Inpatient;O:Outpatient;P:Prosthetic;R:Prescription"
"RTN","RCDPRTP0",117,0)
 . S DIR("A")="Select another Care Type" D ^DIR K DIR
"RTN","RCDPRTP0",118,0)
 . I $G(DUOUT) W !!,"User exited with '^', quitting",! S RCQUIT=1 Q
"RTN","RCDPRTP0",119,0)
 . I $D(DIRUT) S OK=0 Q
"RTN","RCDPRTP0",120,0)
 . I (X="") Q
"RTN","RCDPRTP0",121,0)
 . S X=$$UC(X)
"RTN","RCDPRTP0",122,0)
 . S RCTYPE(X)=""
"RTN","RCDPRTP0",123,0)
 . Q
"RTN","RCDPRTP0",124,0)
 I $D(DUOUT)!$D(DTOUT) S OK=0 ; exit if "^" or time-out
"RTN","RCDPRTP0",125,0)
 I '$D(RCTYPE) S OK=0 W $C(7)
"RTN","RCDPRTP0",126,0)
 Q OK
"RTN","RCDPRTP0",127,0)
FORMAT(RCEXCEL) ; capture the report format from the user (normal or CSV output) PRCA*4.5*315
"RTN","RCDPRTP0",128,0)
 ; RCEXCEL=0 for normal output
"RTN","RCDPRTP0",129,0)
 ; RCEXCEL=1 (^ separated values) for Excel output
"RTN","RCDPRTP0",130,0)
 ; pass parameter by reference
"RTN","RCDPRTP0",131,0)
 ;
"RTN","RCDPRTP0",132,0)
 N RET,DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","RCDPRTP0",133,0)
 S RCEXCEL=0,RET=1
"RTN","RCDPRTP0",134,0)
 S DIR("A")="Do you want to capture report data for an Excel document"
"RTN","RCDPRTP0",135,0)
 S DIR("B")="NO"
"RTN","RCDPRTP0",136,0)
 S DIR(0)="Y"
"RTN","RCDPRTP0",137,0)
 S DIR("?",1)="If you want to capture the output from this report in a ^-separated"
"RTN","RCDPRTP0",138,0)
 S DIR("?",2)="values (Excel) format, then answer YES here."
"RTN","RCDPRTP0",139,0)
 S DIR("?",3)=" "
"RTN","RCDPRTP0",140,0)
 S DIR("?")="If you just want a normal report output, then answer NO here."
"RTN","RCDPRTP0",141,0)
 W ! D ^DIR K DIR
"RTN","RCDPRTP0",142,0)
 I $D(DIRUT) S RET=0 W $C(7)
"RTN","RCDPRTP0",143,0)
 S RCEXCEL=Y
"RTN","RCDPRTP0",144,0)
 Q RCEXCEL
"RTN","RCDPRTP0",145,0)
 ;
"RTN","RCDPRTP0",146,0)
DEVICE() ; Device Selection PRCA*4.5*315
"RTN","RCDPRTP0",147,0)
 ; RCEXCEL=0 for normal output
"RTN","RCDPRTP0",148,0)
 ; RCEXCEL=1 for Excel ('^' separated values)output
"RTN","RCDPRTP0",149,0)
 ; pass parameter by reference
"RTN","RCDPRTP0",150,0)
 ;
"RTN","RCDPRTP0",151,0)
 N ZTRTN,ZTDESC,ZTSAVE,POP,RET,ZTSK,DIR,X,Y,DIOEND
"RTN","RCDPRTP0",152,0)
 S RET=1,QUIT=0
"RTN","RCDPRTP0",153,0)
 I RCEXCEL D
"RTN","RCDPRTP0",154,0)
 . W !!,"For Excel output, turn logging or capture on now."
"RTN","RCDPRTP0",155,0)
 . W !,"To avoid undesired wrapping of the data saved to the file,"
"RTN","RCDPRTP0",156,0)
 . W !,"please enter ""0;256;99999"" at the ""DEVICE:"" prompt.",!
"RTN","RCDPRTP0",157,0)
 K IOP,IO("Q") S %ZIS="MQ",%ZIS("B")="" D ^%ZIS Q:POP
"RTN","RCDPRTP0",158,0)
 I $D(IO("Q")) D  Q
"RTN","RCDPRTP0",159,0)
 .S ZTDESC="Claims Matching Excel Report",ZTRTN="PRINT^RCDPRTEX"
"RTN","RCDPRTP0",160,0)
 .S ZTSAVE("RCSORT")=""
"RTN","RCDPRTP0",161,0)
 .I RCSORT=1 S ZTSAVE("RCDEBT")="",ZTSAVE("RCDFN")="",ZTSAVE("RCTYPE*")=""
"RTN","RCDPRTP0",162,0)
 .I RCSORT=2 S ZTSAVE("RCBILL")="",ZTSAVE("RCDFN")="",ZTSAVE("RCDEBT")=""
"RTN","RCDPRTP0",163,0)
 .I RCSORT=4 S ZTSAVE("RCPT")=""
"RTN","RCDPRTP0",164,0)
 .I RCSORT=5 S ZTSAVE("RCTYPE*")="",ZTSAVE("DATE*")=""
"RTN","RCDPRTP0",165,0)
 .S ZTSAVE("DATEEND")="",ZTSAVE("DATESTRT")="",ZTSAVE("RCQUIT")="",ZTSAVE("RCSORT")="",ZTSAVE("RCEXCEL")=""
"RTN","RCDPRTP0",166,0)
 .S ZTSAVE("RCAN")="",ZTSAVE("ZTREQ")="@",ZTSAVE("^TMP(""RCDPRTPB"",$J,")=""
"RTN","RCDPRTP0",167,0)
 .S DIOEND="K ^TMP(""RCDPRTPB"",$J)"
"RTN","RCDPRTP0",168,0)
 .I $G(ZTSK) W !!,"Report compilation has started with task# ",ZTSK,".",!
"RTN","RCDPRTP0",169,0)
 .D ^%ZTLOAD,HOME^%ZIS S QUIT=1
"RTN","RCDPRTP0",170,0)
 .I POP S RET=0
"RTN","RCDPRTP0",171,0)
 Q RET
"RTN","RCDPRTP0",172,0)
 ;
"RTN","RCDPRTP0",173,0)
UC(RCINPUT) ;
"RTN","RCDPRTP0",174,0)
 S RCINPUT=$TR(X,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","RCDPRTP0",175,0)
 Q RCINPUT
"RTN","RCDPRTP1")
0^45^B49619894^B33480590
"RTN","RCDPRTP1",1,0)
RCDPRTP1  ;ALB/LDB - CLAIMS MATCHING REPORT (PRINT) ;1/26/01  2:56 PM
"RTN","RCDPRTP1",2,0)
 ;;4.5;Accounts Receivable;**151,169,276,284,315**;Mar 20, 1995;Build 67
"RTN","RCDPRTP1",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCDPRTP1",4,0)
 ;
"RTN","RCDPRTP1",5,0)
EN       ; Entry point to print the Claims Matching Report.
"RTN","RCDPRTP1",6,0)
 N %,DATEDIS1,DATEDIS2,NOW,PG,RCBILL,RCAMT,RCAMT1,RCIBDAT,RCIBFN,RCNAM,RCNAM1,RCNO,RCNOW,RCDLINE,RCLINE,RCPHIT
"RTN","RCDPRTP1",7,0)
 ; PRCA*4.5*284 - Remove RCPT 'new' as this is the receipt # from user entry
"RTN","RCDPRTP1",8,0)
 N RCQ,RCSSN,RCSTAT,RCTP,X,Y
"RTN","RCDPRTP1",9,0)
 ;
"RTN","RCDPRTP1",10,0)
 ; - initialize report header variables
"RTN","RCDPRTP1",11,0)
 S PG=0
"RTN","RCDPRTP1",12,0)
 Q:RCQUIT
"RTN","RCDPRTP1",13,0)
 I RCSORT'=2,(RCSORT'=4) D
"RTN","RCDPRTP1",14,0)
 .S Y=$P(DATESTRT,".") D DD^%DT S DATEDIS1=Y
"RTN","RCDPRTP1",15,0)
 .S Y=$P(DATEEND,".") D DD^%DT S DATEDIS2=Y
"RTN","RCDPRTP1",16,0)
 D NOW^%DTC S Y=% D DD^%DT S RCNOW=$E(Y,1,18)
"RTN","RCDPRTP1",17,0)
 S RCDLINE=$TR($J("",80)," ","-")
"RTN","RCDPRTP1",18,0)
 S RCLINE=$TR($J("",80)," ","*")
"RTN","RCDPRTP1",19,0)
 ;
"RTN","RCDPRTP1",20,0)
 ; - main report loop
"RTN","RCDPRTP1",21,0)
 K ^TMP($J)
"RTN","RCDPRTP1",22,0)
 ;
"RTN","RCDPRTP1",23,0)
 I 'RCEXCEL D HDR ; initial header
"RTN","RCDPRTP1",24,0)
 S RCNO=0 ; flag to indicate at least one matching claim
"RTN","RCDPRTP1",25,0)
 ;
"RTN","RCDPRTP1",26,0)
 S RCNAM="" F  S RCNAM=$O(^TMP("RCDPRTPB",$J,RCNAM)) Q:RCNAM=""!$G(RCQ)  D
"RTN","RCDPRTP1",27,0)
 .S RCBILL=0 F  S RCBILL=$O(^TMP("RCDPRTPB",$J,RCNAM,RCBILL)) Q:'RCBILL!$G(RCQ)  D
"RTN","RCDPRTP1",28,0)
 ..S RCPHIT=0 ; flag that requires patient info to print
"RTN","RCDPRTP1",29,0)
 ..D PROC ;     process a single third party bill
"RTN","RCDPRTP1",30,0)
 ..K ^TMP("IBRBT",$J),^TMP("IBRBF",$J)
"RTN","RCDPRTP1",31,0)
 ;
"RTN","RCDPRTP1",32,0)
 I $G(RCQ) G ENQ
"RTN","RCDPRTP1",33,0)
 ;
"RTN","RCDPRTP1",34,0)
 I $O(^TMP("RCDPRTPB",$J,0))="" W !!,?18,"No matching debts." Q
"RTN","RCDPRTP1",35,0)
 ;I 'RCNO W !!,?18,"No matching debts."
"RTN","RCDPRTP1",36,0)
ENQ      ;
"RTN","RCDPRTP1",37,0)
 Q
"RTN","RCDPRTP1",38,0)
 ;
"RTN","RCDPRTP1",39,0)
 ;
"RTN","RCDPRTP1",40,0)
PROC     ; Process each third party bill for a patient.
"RTN","RCDPRTP1",41,0)
 D RELBILL^IBRFN(RCBILL)
"RTN","RCDPRTP1",42,0)
 S RCQUIT=0  ;added for care type check
"RTN","RCDPRTP1",43,0)
 ;Add code to check ^TMP("IBRBT",$J  -------------------------------------------------------------------------------for third party charges
"RTN","RCDPRTP1",44,0)
 I $D(RCTYPE)>1,$D(^TMP("IBRBT",$J)) N J S J=0 F  S J=$O(^TMP("IBRBT",$J,RCBILL,J)) Q:'J  D
"RTN","RCDPRTP1",45,0)
 . S RCTYP=$$TYP^IBRFN(J),RCTYP=$S(RCTYP="":-1,RCTYP="PR":"P",RCTYP="PH":"R",1:RCTYP)
"RTN","RCDPRTP1",46,0)
 . I '$D(RCTYPE(RCTYP)) K ^TMP("IBRBT",$J,RCBILL,J)  ;    Verify that the type is one of the selected type, if not delete the ^TMP global node for that claim
"RTN","RCDPRTP1",47,0)
 ; - quit if there are no associated first party bills
"RTN","RCDPRTP1",48,0)
 I '$O(^TMP("IBRBF",$J,0)) K ^TMP("RCDPRTPB",$J,RCNAM,RCBILL) G PROCQ
"RTN","RCDPRTP1",49,0)
 ;
"RTN","RCDPRTP1",50,0)
 S (RCAMT(0),RCAMT(1))=0
"RTN","RCDPRTP1",51,0)
 S RCTP(0)=0 F  S RCTP(0)=$O(^TMP("IBRBF",$J,RCTP(0))) Q:'RCTP(0)  S RCTP(1)=0 F  S RCTP(1)=$O(^TMP("IBRBF",$J,RCTP(0),RCTP(1))) Q:'RCTP(1)  S ^TMP($J,"IBRBF",RCTP(1),RCTP(0))=""
"RTN","RCDPRTP1",52,0)
 ; PRCA*4.5*284 - Change typo of RCPT(0)=0 to RCTP(0)=0
"RTN","RCDPRTP1",53,0)
 S RCTP(0)=0 F  S RCTP(0)=$O(^TMP($J,"IBRBF",RCTP(0))) Q:'RCTP(0)  S RCTP(1)=0 F  S RCTP(1)=$O(^TMP($J,"IBRBF",RCTP(0),RCTP(1))) Q:'RCTP(1)  D
"RTN","RCDPRTP1",54,0)
 .I RCTP(1)=RCBILL Q
"RTN","RCDPRTP1",55,0)
 .I $D(^TMP($J,"IBRBF",RCTP(0),RCBILL))!(RCTP(1)'=$O(^TMP($J,"IBRBF",RCTP(0),0))) K ^TMP("IBRBF",$J,RCTP(1),RCTP(0)),^TMP($J,"IBRBF",RCTP(0),RCTP(1)) I '$O(^TMP("IBRBF",$J,RCTP(1),0)) K ^TMP("IBRBF",$J,RCTP(1))
"RTN","RCDPRTP1",56,0)
 ;
"RTN","RCDPRTP1",57,0)
 S RCTP(0)="" F  S RCTP(0)=$O(^TMP("IBRBT",$J,RCBILL,RCTP(0))) Q:RCTP(0)=""  D
"RTN","RCDPRTP1",58,0)
 .;if associated third party has had payment also do not list twice
"RTN","RCDPRTP1",59,0)
 .I $D(^TMP("RCDPRTPB",$J,RCNAM,RCTP(0))),(RCBILL'=RCTP(0)) S RCTP(RCTP(0))=^TMP("RCDPRTPB",$J,RCNAM,RCTP(0)) K ^(RCTP(0))
"RTN","RCDPRTP1",60,0)
 .;if no prescription coverage exclude associated rx co-pay charges
"RTN","RCDPRTP1",61,0)
 .I '$P(^TMP("IBRBT",$J,RCBILL),"^") D
"RTN","RCDPRTP1",62,0)
 ..S RCTP(1)=0 F  S RCTP(1)=$O(^TMP("IBRBF",$J,RCTP(0),RCTP(1))) Q:RCTP(1)=""  I $G(^TMP("IBRBF",$J,RCTP(0),RCTP(1)))["RX" K ^TMP("IBRBF",$J,RCTP(0),RCTP(1)) I '$O(^TMP("IBRBF",$J,RCTP(0),"")) K ^TMP("IBRBF",$J,RCTP(0))
"RTN","RCDPRTP1",63,0)
 .;if duplicate charges exclude them from report
"RTN","RCDPRTP1",64,0)
 S RCTP(0)=0 F  S RCTP(0)=$O(^TMP("IBRBF",$J,RCTP(0))) Q:RCTP(0)=""  S RCTP(1)=0 F  S RCTP(1)=$O(^TMP("IBRBF",$J,RCTP(0),RCTP(1))) Q:'RCTP(1)  D
"RTN","RCDPRTP1",65,0)
 .I RCTP(0)'=RCBILL,($D(^TMP("IBRBF",$J,RCBILL,RCTP(1)))) K ^TMP("IBRBF",$J,RCTP(0),RCTP(1)) K:'$O(^TMP("IBRBF",$J,RCTP(0),0)) ^TMP("IBRBF",$J,RCTP(0))
"RTN","RCDPRTP1",66,0)
 ;
"RTN","RCDPRTP1",67,0)
 ;exclude cancelled charges if not selected to be on report
"RTN","RCDPRTP1",68,0)
 I 'RCAN D
"RTN","RCDPRTP1",69,0)
 .S RCTP(0)=0 F  S RCTP(0)=$O(^TMP("IBRBF",$J,RCTP(0))) Q:RCTP(0)=""  S RCTP(1)=0 F  S RCTP(1)=$O(^TMP("IBRBF",$J,RCTP(0),RCTP(1))) Q:'RCTP(1)  D
"RTN","RCDPRTP1",70,0)
 ..I $P(^TMP("IBRBF",$J,RCTP(0),RCTP(1)),"^",3) K ^TMP("IBRBF",$J,RCTP(0),RCTP(1)) Q
"RTN","RCDPRTP1",71,0)
 ..S RCPT(2)=$O(^PRCA(430,"B",+$P(^TMP("IBRBF",$J,RCTP(0),RCTP(1)),"^",4),0)) I ($P($G(^PRCA(430,+RCPT(2),0)),"^",8)=39)!($P($G(^PRCA(430,+RCPT(2),0)),"^",8)=26) K ^TMP("IBRBF",$J,RCTP(0),RCTP(1))
"RTN","RCDPRTP1",72,0)
 ..I '$O(^TMP("IBRBF",$J,RCTP(0),"")) K ^TMP("IBRBF",$J,RCTP(0))
"RTN","RCDPRTP1",73,0)
 I '$O(^TMP("IBRBF",$J,RCBILL,0)) K ^TMP("RCDPRTPB",$J,RCNAM,RCBILL) G PROCQ
"RTN","RCDPRTP1",74,0)
 ;
"RTN","RCDPRTP1",75,0)
 I RCEXCEL D PRNTPAT^RCDPRTEX K ^TMP($J) Q    ;Print in claims in excel format and quit
"RTN","RCDPRTP1",76,0)
 ;
"RTN","RCDPRTP1",77,0)
 ;  - print patient detail line
"RTN","RCDPRTP1",78,0)
 I 'RCPHIT S RCPHIT=1 D PRINT3^RCDPRTP2 G:$G(RCQ) PROCQ
"RTN","RCDPRTP1",79,0)
 ;
"RTN","RCDPRTP1",80,0)
 ; - print third party bills
"RTN","RCDPRTP1",81,0)
 ;    o  print the header first; need room for the header and
"RTN","RCDPRTP1",82,0)
 ;       the bill that was paid.
"RTN","RCDPRTP1",83,0)
 ;    o  print the bill that was paid.
"RTN","RCDPRTP1",84,0)
 S RCTP=RCBILL,RCIBDAT=$G(^TMP("IBRBT",$J,RCBILL,RCBILL))
"RTN","RCDPRTP1",85,0)
 I $Y>(IOSL-7) D PAUSE^RCDPRTP2 G:$G(RCQ) PROCQ D HDR
"RTN","RCDPRTP1",86,0)
 D HDR1^RCDPRTP2,PRINT1^RCDPRTP2 G:$G(RCQ) PROCQ
"RTN","RCDPRTP1",87,0)
 ;
"RTN","RCDPRTP1",88,0)
 ; PRCA*4.5*284, corrected typo of 'assoicated' to 'associated'
"RTN","RCDPRTP1",89,0)
 ; - print the other associated third party bills
"RTN","RCDPRTP1",90,0)
 S RCTP=0 F  S RCTP=$O(^TMP("IBRBT",$J,RCBILL,RCTP)) Q:'RCTP!$G(RCQ)  D
"RTN","RCDPRTP1",91,0)
 .I RCBILL=RCTP Q  ; don't reprint the bill that was paid.
"RTN","RCDPRTP1",92,0)
 .S RCIBDAT=$G(^TMP("IBRBT",$J,RCBILL,RCTP))
"RTN","RCDPRTP1",93,0)
 .I 'RCAN,($P(RCIBDAT,"^",3)) Q  ; exclude cancelled claims
"RTN","RCDPRTP1",94,0)
 .D PRINT1^RCDPRTP2
"RTN","RCDPRTP1",95,0)
 G:$G(RCQ) PROCQ
"RTN","RCDPRTP1",96,0)
 ;
"RTN","RCDPRTP1",97,0)
 ; - print the third party totals
"RTN","RCDPRTP1",98,0)
 ; PRCA*4.5*276 - adjusted header to make room for EEOB indicator '%'
"RTN","RCDPRTP1",99,0)
 I $Y>(IOSL-2) D PAUSE^RCDPRTP2 G:$G(RCQ) PROCQ D HDR W !
"RTN","RCDPRTP1",100,0)
 W !,?63,"----------",?75,"----------"
"RTN","RCDPRTP1",101,0)
 W !,?64,$J(RCAMT(0),9,2),?76,$J(RCAMT(1),9,2)
"RTN","RCDPRTP1",102,0)
 ;
"RTN","RCDPRTP1",103,0)
 ; - print the associated first party charges
"RTN","RCDPRTP1",104,0)
 ; 
"RTN","RCDPRTP1",105,0)
 ;                                                             PRCA*4.5*315  new screen for first party charges by (CARE TYPES)
"RTN","RCDPRTP1",106,0)
 ;check global node ^TMP("IBRBF",$J, all bills, all charges) --
"RTN","RCDPRTP1",107,0)
 N RCACTYP,I,J  ;Do the next section of code only if Care Types were selected - Stored in RCTYPE([care type])
"RTN","RCDPRTP1",108,0)
 ;                                                                                                                                                                    We must loop through all Bills and First party charges for this screening
"RTN","RCDPRTP1",109,0)
 I $D(RCTYPE)>1 S I=0 F  S I=$O(^TMP("IBRBF",$J,I)) Q:'I  S J=0 F  S J=$O(^TMP("IBRBF",$J,I,J)) Q:'J  D
"RTN","RCDPRTP1",110,0)
 . S RCACTYP=$P(^TMP("IBRBF",$J,I,J),U,6) Q:RCACTYP=""  ;6th piece is Action Type
"RTN","RCDPRTP1",111,0)
 . I RCACTYP["TRICARE"!(RCACTYP["CHAMPA") Q   ;                                                             Tri-care Not needed for screening 1st party charges
"RTN","RCDPRTP1",112,0)
 . I RCACTYP["RX" S RCTYP="R" D KILFPTY Q
"RTN","RCDPRTP1",113,0)
 . I RCACTYP["OPT"!(RCACTYP["OBSERV") S RCTYP="O" D KILFPTY Q
"RTN","RCDPRTP1",114,0)
 . I RCACTYP["INPT"!(RCACTYP["NHCU")!(RCACTYP["ADMIS")!(RCACTYP["MEDICARE DECUCTIBLE") S RCTYP="I" D KILFPTY Q
"RTN","RCDPRTP1",115,0)
 .Q
"RTN","RCDPRTP1",116,0)
 ;
"RTN","RCDPRTP1",117,0)
 S RCTP(0)=0 F  S RCTP(0)=$O(^TMP("IBRBF",$J,RCTP(0))) Q:'RCTP(0)!$G(RCQ)  D
"RTN","RCDPRTP1",118,0)
 .I RCTP(0)=$O(^TMP("IBRBF",$J,0)) Q:$D(^TMP("IBRBF",$J,RCTP(0)))<10  D   ;New code - quit if ^TMP("IBRBF" has no sub nodes
"RTN","RCDPRTP1",119,0)
 ..I $Y>(IOSL-5) D PAUSE^RCDPRTP2 Q:$G(RCQ)  D HDR
"RTN","RCDPRTP1",120,0)
 ..; - print the header for the first charge
"RTN","RCDPRTP1",121,0)
 ..D HDR2^RCDPRTP2
"RTN","RCDPRTP1",122,0)
 .S RCTP=0 F  S RCTP=$O(^TMP("IBRBF",$J,RCTP(0),RCTP)) Q:'RCTP!$G(RCQ)  D
"RTN","RCDPRTP1",123,0)
 ..S RCNO=1 ; set flag for at least one match
"RTN","RCDPRTP1",124,0)
 ..S RCIBDAT=$G(^TMP("IBRBF",$J,RCTP(0),RCTP))
"RTN","RCDPRTP1",125,0)
 ..; - print the patient detail line
"RTN","RCDPRTP1",126,0)
 ..I RCNO D PRINT2^RCDPRTP2
"RTN","RCDPRTP1",127,0)
 ;.
"RTN","RCDPRTP1",128,0)
 ; PRCA*4.5*284, cleanup ^TMP($J) only
"RTN","RCDPRTP1",129,0)
PROCQ  ;
"RTN","RCDPRTP1",130,0)
 K ^TMP($J) Q
"RTN","RCDPRTP1",131,0)
 ;
"RTN","RCDPRTP1",132,0)
 ;
"RTN","RCDPRTP1",133,0)
HDR      ; Print the main report header.
"RTN","RCDPRTP1",134,0)
 S PG=PG+1 I PG'=1!($E(IOST,1,2)="C-") W @IOF
"RTN","RCDPRTP1",135,0)
 W !,?5,"THIRD PARTY CLAIMS W/MATCHING FIRST PARTY DEBTS  ",RCNOW," PAGE ",PG
"RTN","RCDPRTP1",136,0)
 I RCSORT'=2,(RCSORT'=4) W !,?18,"FOR THE PAYMENT DATES: ",DATEDIS1,"  TO  ",DATEDIS2
"RTN","RCDPRTP1",137,0)
 I RCSORT=4 W !,?18,"RECEIPT NUMBER ",RCPT
"RTN","RCDPRTP1",138,0)
 W !,RCDLINE
"RTN","RCDPRTP1",139,0)
 I PG=1 D
"RTN","RCDPRTP1",140,0)
 .W !!,"Remember that any actions taken to decrease the first party receivables must"
"RTN","RCDPRTP1",141,0)
 .W !,"consider any applicable deductibles or coinsurance amounts specified on the EOB."
"RTN","RCDPRTP1",142,0)
 Q
"RTN","RCDPRTP1",143,0)
 ;
"RTN","RCDPRTP1",144,0)
 ;PRCA*4.5*315
"RTN","RCDPRTP1",145,0)
KILFPTY ;KILL 1st party associated claim from ^TMP("IBRBF", $J), used to screen out unwanted 1st party bills (wrong Care Type)
"RTN","RCDPRTP1",146,0)
 ;Verify that the type is one of the selected care types, if not delete the ^TMP global node for that charge
"RTN","RCDPRTP1",147,0)
 I '$D(RCTYPE(RCTYP)) K ^TMP("IBRBF",$J,I,J)
"RTN","RCDPRTP1",148,0)
 Q
"RTN","RCDPRTP1",149,0)
 ;
"RTN","RCDPRTP2")
0^4^B20782087^B15639829
"RTN","RCDPRTP2",1,0)
RCDPRTP2 ;ALB/LDB - CLAIMS MATCHING REPORT ;1/26/01  3:16 PM
"RTN","RCDPRTP2",2,0)
 ;;4.5;Accounts Receivable;**151,276,303,315**;Mar 20, 1995;Build 67
"RTN","RCDPRTP2",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCDPRTP2",4,0)
 ;
"RTN","RCDPRTP2",5,0)
 ; Reference to $$TYP^IBRFN supported by DBIA# 2031
"RTN","RCDPRTP2",6,0)
 ;
"RTN","RCDPRTP2",7,0)
PRINT1 ;
"RTN","RCDPRTP2",8,0)
 N REJECT,RCTYP
"RTN","RCDPRTP2",9,0)
 ; double check the status to screen out cancelled third party bills
"RTN","RCDPRTP2",10,0)
 I 'RCAN N TSTAT S TSTAT=$$STAT(RCTP) Q:TSTAT="CN"!(TSTAT="CB")  ;Added a last minute check for cancelled third party bills 
"RTN","RCDPRTP2",11,0)
 ;
"RTN","RCDPRTP2",12,0)
 I $Y>(IOSL-2) D PAUSE Q:$G(RCQ)  D HDR^RCDPRTP1,HDR1
"RTN","RCDPRTP2",13,0)
 ; PRCA*4.5*276 - get EEOB indicator '%'and attach it to the bill number when applicable. Adjust report tabs to make room for EEOB indicator '%'.
"RTN","RCDPRTP2",14,0)
 N RC430 S RC430=+$O(^PRCA(430,"B",""_$P(RCIBDAT,"^",4)_"",0))
"RTN","RCDPRTP2",15,0)
 S RCEEOB=$$EEOB(RC430)
"RTN","RCDPRTP2",16,0)
 ; #IA 6060 for $$BILLREJ^IBJTU6
"RTN","RCDPRTP2",17,0)
 S REJECT=$S($$BILLREJ^IBJTU6($P($P(RCIBDAT,"^",4),"-",2)):"c",1:" ") ;PRCA*4.5*303 Add indicator for rejects
"RTN","RCDPRTP2",18,0)
 W !,$S(RCTP=RCBILL:"*",$D(RCTP(RCTP)):"*",1:" "),$G(RCEEOB)_REJECT_$P(RCIBDAT,"^",4),?17,$P(RCIBDAT,"^",5),?24
"RTN","RCDPRTP2",19,0)
 W $$STAT(RCTP),?31,$$DATE(+RCIBDAT),?42,$$DATE($P(RCIBDAT,"^",2))
"RTN","RCDPRTP2",20,0)
 S Y=$S($G(RCTP(RCTP)):RCTP(RCTP),$G(^TMP("RCDPRTPB",$J,RCNAM,RCBILL)):^(RCBILL),1:"") I RCTP=RCBILL!($D(RCTP(RCTP))) W ?53,$$DATE(Y)
"RTN","RCDPRTP2",21,0)
 S RCAMT=$P($G(^PRCA(430,+RCTP,0)),"^",3),RCAMT1=$P($G(^PRCA(430,+RCTP,7)),"^",7) W ?64,$J(RCAMT,9,2)
"RTN","RCDPRTP2",22,0)
 W ?76,$J(RCAMT1,9,2) S RCAMT(0)=RCAMT(0)+RCAMT,RCAMT(1)=RCAMT(1)+RCAMT1
"RTN","RCDPRTP2",23,0)
 W ?88,$E($P(RCIBDAT,"^",7),1,25)
"RTN","RCDPRTP2",24,0)
 ; #IA 2031 for $$TYP^IBRFN
"RTN","RCDPRTP2",25,0)
 S RCTYP=$$TYP^IBRFN(RCTP) ; get bill type for an Accounts Receivable
"RTN","RCDPRTP2",26,0)
 ; Convert to single character care types for: 
"RTN","RCDPRTP2",27,0)
 ; (I)npatient, (O)utpatient, (R)Prescription & (P)rosthetics
"RTN","RCDPRTP2",28,0)
 S RCTYP=$S(RCTYP="":-1,RCTYP="PR":"P",RCTYP="PH":"R",1:RCTYP)
"RTN","RCDPRTP2",29,0)
 W ?119,RCTYP
"RTN","RCDPRTP2",30,0)
 K RCTP(RCTP)
"RTN","RCDPRTP2",31,0)
 Q
"RTN","RCDPRTP2",32,0)
 ;
"RTN","RCDPRTP2",33,0)
PRINT2  ; Print the detail line for a first party bill.
"RTN","RCDPRTP2",34,0)
 I $Y>(IOSL-2) D PAUSE Q:$G(RCQ)  D HDR^RCDPRTP1,HDR2
"RTN","RCDPRTP2",35,0)
 W !," ",$P(RCIBDAT,"^",4),?14,$P(RCIBDAT,"^",6)
"RTN","RCDPRTP2",36,0)
 S RCIBFN=$P(RCIBDAT,"^",4) I RCIBFN S RCIBFN=$O(^PRCA(430,"B",RCIBFN,0))
"RTN","RCDPRTP2",37,0)
 ; PRCA*4.5*276 - adjust report tabs to make room for EEOB indicator '%'.
"RTN","RCDPRTP2",38,0)
 W ?36,$$STAT(RCIBFN),?42,$$DATE(+RCIBDAT),?54,$$DATE($P(RCIBDAT,"^",2))
"RTN","RCDPRTP2",39,0)
 W ?66,$J($P(RCIBDAT,"^",5),9,2),?78,$P(RCIBDAT,"^",7)
"RTN","RCDPRTP2",40,0)
 W ?87,$J($S($G(^PRCA(430,+RCIBFN,7)):+($P(^(7),"^")+$P(^(7),"^",2)+$P(^(7),"^",3)+$P(^(7),"^",4)+$P(^(7),"^",4)),1:0),9,2)
"RTN","RCDPRTP2",41,0)
 Q
"RTN","RCDPRTP2",42,0)
 ;
"RTN","RCDPRTP2",43,0)
 ;
"RTN","RCDPRTP2",44,0)
PRINT3 ; Print patient detail information.
"RTN","RCDPRTP2",45,0)
 N RCNAM1,RCBILL0,RCDFN,RCDOB,DOB
"RTN","RCDPRTP2",46,0)
 I $Y>(IOSL-5) D PAUSE Q:$G(RCQ)  D HDR^RCDPRTP1
"RTN","RCDPRTP2",47,0)
 S RCNAM1=^TMP("RCDPRTPB",$J,RCNAM)
"RTN","RCDPRTP2",48,0)
 S RCBILL0=$G(^PRCA(430,RCBILL,0)) ;PRCA*4.3*315
"RTN","RCDPRTP2",49,0)
 S RCDFN=$P($G(^PRCA(430,RCBILL,0)),U,7)
"RTN","RCDPRTP2",50,0)
 S RCDOB=$P($G(^DPT(RCDFN,0)),U,3)
"RTN","RCDPRTP2",51,0)
 S DOB=$$FMTE^XLFDT(RCDOB,"5Z")
"RTN","RCDPRTP2",52,0)
 W !!,RCLINE
"RTN","RCDPRTP2",53,0)
 W !,"NAME: ",$P(RCNAM,"^"),?44,"SSN: ",$E(RCNAM,1)_$E($P(RCNAM1,"^",3),6,9)
"RTN","RCDPRTP2",54,0)
 W !,"Prim. Elig: ",$P(RCNAM1,"^",2)
"RTN","RCDPRTP2",55,0)
 W ?44,"DOB: ",DOB
"RTN","RCDPRTP2",56,0)
 W ?61,"RX COVERAGE: ",$S('$G(^TMP("IBRBT",$J,RCBILL)):"NO",1:"YES")
"RTN","RCDPRTP2",57,0)
 W !,RCLINE
"RTN","RCDPRTP2",58,0)
 Q
"RTN","RCDPRTP2",59,0)
 ;
"RTN","RCDPRTP2",60,0)
HDR1    ;
"RTN","RCDPRTP2",61,0)
 W !!,"Third Party Bills: * -> bill for which payment was posted"
"RTN","RCDPRTP2",62,0)
 W !,"============================="
"RTN","RCDPRTP2",63,0)
 ; PRCA*4.5*276 - adjust report tabs to make room for EEOB indicator '%'.
"RTN","RCDPRTP2",64,0)
 ; PRCA*4.5*315 - added 1-char. care type (I)npatient, (O)utpatient, (R)x or (P)rosthetics) under new Type column
"RTN","RCDPRTP2",65,0)
 W !!,"Bill #",?15,"P/S/T",?22,"Status",?30,"Bill From",?42,"Bill To",?53,"Posted",?63,"Amt Billed",?76,"Amt Paid",?88,"Payor",?115,"Care Type"
"RTN","RCDPRTP2",66,0)
 W !,"-------------",?15,"-----",?22,"------",?30,"---------",?42,"--------",?53,"--------",?63,"----------",?75,"----------",?88,"-------------------------",?115,"---------"
"RTN","RCDPRTP2",67,0)
 Q
"RTN","RCDPRTP2",68,0)
 ;
"RTN","RCDPRTP2",69,0)
HDR2 ;
"RTN","RCDPRTP2",70,0)
 W !!,"Associated First Party Charges:"
"RTN","RCDPRTP2",71,0)
 W !,"==============================="
"RTN","RCDPRTP2",72,0)
 W !," Bill #",?14,"Charge Type",?34,"Status",?42,"From/Fill",?54,"To/Rel",?65,"Amt Billed",?78,"On Hold",?87,"  Balance"
"RTN","RCDPRTP2",73,0)
 W !,"-----------",?14,"----------------",?34,"------",?42,"---------",?54,"---------",?65,"----------",?78,"-------",?87," ----------"
"RTN","RCDPRTP2",74,0)
 Q
"RTN","RCDPRTP2",75,0)
 ;
"RTN","RCDPRTP2",76,0)
STAT(RCIBFN) ;AR Status
"RTN","RCDPRTP2",77,0)
 I '$G(RCIBFN) Q ""
"RTN","RCDPRTP2",78,0)
 N RCSTAT
"RTN","RCDPRTP2",79,0)
 S RCSTAT=$P($G(^PRCA(430,+RCIBFN,0)),"^",8),RCSTAT=$P($G(^PRCA(430.3,+RCSTAT,0)),"^",2)
"RTN","RCDPRTP2",80,0)
 Q RCSTAT
"RTN","RCDPRTP2",81,0)
 ;
"RTN","RCDPRTP2",82,0)
DATE(X) ; Convert FileMan date to mm/dd/yy
"RTN","RCDPRTP2",83,0)
 Q $S($G(X):$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3),1:"")
"RTN","RCDPRTP2",84,0)
 ;
"RTN","RCDPRTP2",85,0)
 ;
"RTN","RCDPRTP2",86,0)
PAUSE ; Page break.
"RTN","RCDPRTP2",87,0)
 I $E(IOST,1,2)'="C-" Q
"RTN","RCDPRTP2",88,0)
 N RCX,DIR,DIRUT,DUOUT,DTOUT,DIROUT,X,Y
"RTN","RCDPRTP2",89,0)
 I IOSL<100 F RCX=$Y:1:(IOSL-3) W !
"RTN","RCDPRTP2",90,0)
 S DIR(0)="E" D ^DIR I $D(DIRUT)!($D(DUOUT)) S RCQ=1
"RTN","RCDPRTP2",91,0)
 Q
"RTN","RCDPRTP2",92,0)
 ;
"RTN","RCDPRTP2",93,0)
EEOB(RCBILL) ; PRCA*4.5*276 - get EEOB indicator for a bill
"RTN","RCDPRTP2",94,0)
 ; Interaction with IB file #361.1 covered by IA #4051.
"RTN","RCDPRTP2",95,0)
 ; RCBILL is the IEN of the bill in files #399/#430 and must be valid,
"RTN","RCDPRTP2",96,0)
 ; Exclude an EOB type of MRA when getting payment information. Return
"RTN","RCDPRTP2",97,0)
 ; the EEOB indicator '%' if payment activity was found.
"RTN","RCDPRTP2",98,0)
 ;
"RTN","RCDPRTP2",99,0)
 N RCEEOB,RCVAL,Z
"RTN","RCDPRTP2",100,0)
 I $G(RCBILL)=0 Q ""
"RTN","RCDPRTP2",101,0)
 I '$O(^IBM(361.1,"B",RCBILL,0)) Q ""  ; no matching entry for bill
"RTN","RCDPRTP2",102,0)
 I $P($G(^DGCR(399,RCBILL,0)),"^",13)=1 Q ""  ;avoid 'ENTERED/NOT REVIEWED' status
"RTN","RCDPRTP2",103,0)
 ; handle both single and multiple bill entries in file #361.1
"RTN","RCDPRTP2",104,0)
 S Z=0 F  S Z=$O(^IBM(361.1,"B",RCBILL,Z)) Q:'Z  D  Q:$G(RCEEOB)="%"
"RTN","RCDPRTP2",105,0)
 . S RCVAL=$G(^IBM(361.1,Z,0))
"RTN","RCDPRTP2",106,0)
 . S RCEEOB=$S($P(RCVAL,"^",4)=1:"",$P(RCVAL,"^",4)=0:"%",1:"")
"RTN","RCDPRTP2",107,0)
 Q RCEEOB  ; EEOB indicator for 1st/3rd party payment on bill
"RTN","RCMSITE")
0^7^B10360113^B8419776
"RTN","RCMSITE",1,0)
RCMSITE ;ALB/RRG - EDIT SITE PARAMETERS ;Jul 02, 2014@15:46:14
"RTN","RCMSITE",2,0)
V ;;4.5;Accounts Receivable;**173,236,253,298,315**;Mar 20, 1995;Build 67
"RTN","RCMSITE",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCMSITE",4,0)
 ;
"RTN","RCMSITE",5,0)
BEG ;Start editing site paramters
"RTN","RCMSITE",6,0)
 N DA,DIC,DIE,DLAYGO,DR,X,Y
"RTN","RCMSITE",7,0)
 ; edit SITE field (#.01) in AR SITE PARAMETER file (#342)
"RTN","RCMSITE",8,0)
 S DIC="^RC(342,",DIC(0)="QEAML",DLAYGO=342 D ^DIC I Y>0 S DA=+Y,DR=.01,DIE="^RC(342," D ^DIE
"RTN","RCMSITE",9,0)
 Q
"RTN","RCMSITE",10,0)
 ;
"RTN","RCMSITE",11,0)
ALC ;Edit ALC parameter
"RTN","RCMSITE",12,0)
 NEW DIC,DR,DA,Y
"RTN","RCMSITE",13,0)
 S DIE="^RC(342,",DA=1,DR=".07;31" D ^DIE
"RTN","RCMSITE",14,0)
 Q
"RTN","RCMSITE",15,0)
IRS ;Edit IRS OFFSET site parameters
"RTN","RCMSITE",16,0)
 NEW DIE,DR,DA,Y
"RTN","RCMSITE",17,0)
 I '$D(^RC(342,1,0)) D BEG G:'$D(^RC(342,1,0)) Q
"RTN","RCMSITE",18,0)
 S DA=1,DR="[RCMS IRS]",DIE="^RC(342," D ^DIE
"RTN","RCMSITE",19,0)
Q Q
"RTN","RCMSITE",20,0)
STAT ;Edit NOTIFICATION site parameters
"RTN","RCMSITE",21,0)
 NEW DIE,DR,DA,Y
"RTN","RCMSITE",22,0)
 I '$D(^RC(342,1,0)) D BEG G:'$D(^RC(342,1,0)) Q1
"RTN","RCMSITE",23,0)
 S DA=1,DR="[RCMS NOTIFICATION]",DIE="^RC(342," D ^DIE
"RTN","RCMSITE",24,0)
Q1 Q
"RTN","RCMSITE",25,0)
GRP ;Edit AR Group Parameters
"RTN","RCMSITE",26,0)
 NEW DIE,DR,DA,Y
"RTN","RCMSITE",27,0)
 F  W ! S DIC(0)="QEAML",DIC="^RC(342.1,",DLAYGO=342.1 D ^DIC K DIC G:Y<0 Q3 S DA=+Y,DIE="^RC(342.1,",DR=$P($G(^RC(342.2,+$P(^RC(342.1,+Y,0),"^",2),1)),"^") I DR]"" D ^DIE
"RTN","RCMSITE",28,0)
Q3 Q
"RTN","RCMSITE",29,0)
DEA ;Deactive an AR group
"RTN","RCMSITE",30,0)
 NEW DIE,DIC,DA,DR,Y,GRP
"RTN","RCMSITE",31,0)
 S DIC="^RC(342.1,",DIC(0)="QEAM",DIC("S")="I $P(^(0),""^"",2)'=7" D ^DIC Q:Y<0  S GRP=+Y
"RTN","RCMSITE",32,0)
 W ! S DIR("A")="Are you sure you want to Deactive Group '"_$P(^RC(342.1,GRP,0),"^")_"'",DIR(0)="Y",DIR("B")="NO" D ^DIR K DIR
"RTN","RCMSITE",33,0)
 I 'Y W !!,"*** NO ACTION TAKEN ***" Q
"RTN","RCMSITE",34,0)
 I Y S DIE="^RC(342.1,",DA=GRP,DR=".02////^S X=7" D ^DIE W !!,"*** Group Deactivated ***"
"RTN","RCMSITE",35,0)
 Q
"RTN","RCMSITE",36,0)
SITE() ;Return site number
"RTN","RCMSITE",37,0)
 Q +$G(^DIC(4,+$P($G(^RC(342,1,0)),"^"),99))
"RTN","RCMSITE",38,0)
INT ;Print Inter/Admin/Pen effective report
"RTN","RCMSITE",39,0)
 NEW DIC,BY,FR,TO,FLDS,L
"RTN","RCMSITE",40,0)
 S DIC="^RC(342,",BY=.01,(FR,TO)="",FLDS="[RCMS INT/ADM/PEN]",L=0 D EN1^DIP
"RTN","RCMSITE",41,0)
 Q
"RTN","RCMSITE",42,0)
UPINT ;Update Rate site parameters
"RTN","RCMSITE",43,0)
 NEW DIE,DR,DA,Y,IOP
"RTN","RCMSITE",44,0)
 S IOP=ION D INT
"RTN","RCMSITE",45,0)
 I '$D(^XUSEC("PRCAF LATE CHARGES",DUZ)) D BMES^XPDUTL("A Security Key is required to edit the Interest/Admin and Penalty Rates.") Q  ;PRCA*4.5*315 Added Security Key
"RTN","RCMSITE",46,0)
 I '$D(^RC(342,1,0)) D BEG G:'$D(^RC(342,1,0)) Q4
"RTN","RCMSITE",47,0)
 F  W ! S DA=1,DR="[RCMS RATES]",DIE="^RC(342," D ^DIE Q:$D(Y)
"RTN","RCMSITE",48,0)
Q4 Q
"RTN","RCMSITE",49,0)
 ;
"RTN","RCMSITE",50,0)
EDILOCK() ; function, Update EDI Lockbox site parameters
"RTN","RCMSITE",51,0)
 ; returns 1 on success, else "^error message"
"RTN","RCMSITE",52,0)
 N RSLT S RSLT=""
"RTN","RCMSITE",53,0)
 I '$D(^RC(342,1,0)) D BEG
"RTN","RCMSITE",54,0)
 S:'$D(^RC(342,1,0)) RSLT="^no site defined"  ; can't continue
"RTN","RCMSITE",55,0)
 ;
"RTN","RCMSITE",56,0)
 Q:RSLT]"" RSLT
"RTN","RCMSITE",57,0)
 ;
"RTN","RCMSITE",58,0)
 N DA,DIE,DR,Y
"RTN","RCMSITE",59,0)
 S DA=1,DR="[RCMS EDI LOCKBOX]",DIE="^RC(342," D ^DIE
"RTN","RCMSITE",60,0)
 S RSLT=$S($D(Y):"^user aborted",1:1)  ; if Y remains from ^DIE call
"RTN","RCMSITE",61,0)
 ;
"RTN","RCMSITE",62,0)
 Q RSLT  ; success
"RTN","RCMSITE",63,0)
 ;
"RTN","RCMSITE",64,0)
EDITRDDT ;Update # OF DAYS FOR RD ELIG CHG RPT site parameter
"RTN","RCMSITE",65,0)
 ;This is the number of days for the Rated Disability Eligibility
"RTN","RCMSITE",66,0)
 ;Change Report to be used when the report is scheduled to be run
"RTN","RCMSITE",67,0)
 ;on a recurring basis. (Added for Hold Debt to DMC Project)
"RTN","RCMSITE",68,0)
 N DIE,DR,DA,Y
"RTN","RCMSITE",69,0)
 I '$D(^RC(342,1,0)) D BEG G:'$D(^RC(342,1,0)) Q6
"RTN","RCMSITE",70,0)
 S DA=1,DR="8.01",DIE="^RC(342," D ^DIE
"RTN","RCMSITE",71,0)
Q6 Q
"RTN","RCMSITE",72,0)
 ;
"RTN","RCMSITE",73,0)
GETRDDAY() ;Return # OF DAYS FOR RD ELIG CHG RPT site parameter
"RTN","RCMSITE",74,0)
 Q $$GET1^DIQ(342,1_",",8.01)
"RTN","RCMSITE",75,0)
 ;
"RTN","RCMSITE",76,0)
EDITRDAY ;Update NUMBER OF DAYS FOR DMC REPORTS site parameter.
"RTN","RCMSITE",77,0)
 ;This is the number of days in the past bills for episodes
"RTN","RCMSITE",78,0)
 ;of care will be included for the following reports when scheduled by
"RTN","RCMSITE",79,0)
 ;IRM to be run on a recurring basis:
"RTN","RCMSITE",80,0)
 ;   DMC Debt Validity Report
"RTN","RCMSITE",81,0)
 ;   DMC Debt Validity Management Report
"RTN","RCMSITE",82,0)
 ;   Rated Disability Eligibility Change Report
"RTN","RCMSITE",83,0)
 ;The minimum value for this field is 365 days (1 year) and the maximum
"RTN","RCMSITE",84,0)
 ;value is 3650 days (10 years). If no value is added in this field the
"RTN","RCMSITE",85,0)
 ;report will default to 365 days. (Added for Hold Debt to DMC Project)
"RTN","RCMSITE",86,0)
 N DIE,DR,DA,Y
"RTN","RCMSITE",87,0)
 I '$D(^RC(342,1,0)) D BEG G:'$D(^RC(342,1,0)) Q7
"RTN","RCMSITE",88,0)
 S DA=1,DR="8.02",DIE="^RC(342," D ^DIE
"RTN","RCMSITE",89,0)
Q7 Q
"RTN","RCMSITE",90,0)
 ;
"RTN","RCMSITE",91,0)
GETRDAY() ;Return NUMBER OF DAYS FOR DMC REPORTS site parameter
"RTN","RCMSITE",92,0)
 Q $$GET1^DIQ(342,1_",",8.02)
"RTN","RCMSITE",93,0)
 ;
"RTN","RCRJRBD")
0^52^B76289018^B74247917
"RTN","RCRJRBD",1,0)
RCRJRBD ;WISC/RFJ,TJK-bad debt extractor and report ;10/18/10 9:00am
"RTN","RCRJRBD",2,0)
 ;;4.5;Accounts Receivable;**101,139,170,193,203,215,220,138,239,273,282,310,315**;Mar 20, 1995;Build 67
"RTN","RCRJRBD",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCRJRBD",4,0)
 ; IA 4385 for calls to $$MRATYPE^IBCEMU2 and $$MRADTACT^IBCEMU2
"RTN","RCRJRBD",5,0)
 Q
"RTN","RCRJRBD",6,0)
 ;
"RTN","RCRJRBD",7,0)
 ;
"RTN","RCRJRBD",8,0)
START(DATEEND) ;  run bad debt report
"RTN","RCRJRBD",9,0)
 ;  the DATEEND is the last day of the month being run
"RTN","RCRJRBD",10,0)
 ;  from the routine RCRJRCOL which is the data extractor.  The
"RTN","RCRJRBD",11,0)
 ;  current receivable dollars is stored in ^TMP($J,"RCRJRBD",SGL)
"RTN","RCRJRBD",12,0)
 ;  where SGL is the standard general ledger 1319, 1338, or 1339.
"RTN","RCRJRBD",13,0)
 ;
"RTN","RCRJRBD",14,0)
 N ACTDATE,ACTUALCA,ACTUALWO,BEGDATE,BILLDA,CATEGORY
"RTN","RCRJRBD",15,0)
 N COLLECT,CONTRACT,DR,ENDDATE,FUND,PAY,PAYMENT,PRIN,PRINCPAL
"RTN","RCRJRBD",16,0)
 N RCRJFMM,RCRJDATE,SGL,TRANDA,TRANDATE,TRANTYPE,VALUE,WRITEOFF
"RTN","RCRJRBD",17,0)
 N RCPRIN,RCTOMCCF,RCVALUE,RSC,MRATYPE,ARACTDT
"RTN","RCRJRBD",18,0)
 ;
"RTN","RCRJRBD",19,0)
 ;  lock the bad debt file for storing data, lock cannot fail
"RTN","RCRJRBD",20,0)
 ;  this lock can be used to monitor if the report is running
"RTN","RCRJRBD",21,0)
 F  L +^RC(348.1):$S($G(DILOCKTM)>5:DILOCKTM,1:5) Q:$T
"RTN","RCRJRBD",22,0)
 ;
"RTN","RCRJRBD",23,0)
 ;  calculate the base percentages from past data
"RTN","RCRJRBD",24,0)
 ;  example:  DATEEND=2980331  => BEGDATE=2970300
"RTN","RCRJRBD",25,0)
 ;                             => ENDDATE=2980229
"RTN","RCRJRBD",26,0)
 ;   add one day to ending date to go to next month
"RTN","RCRJRBD",27,0)
 S BEGDATE=($E(DATEEND,1,3)-1)_$E(DATEEND,4,5)_"00"
"RTN","RCRJRBD",28,0)
 S ENDDATE=($$FMADD^XLFDT($E(DATEEND,1,5)_"00",-1))+1
"RTN","RCRJRBD",29,0)
 ;  loop bills activated between these dates
"RTN","RCRJRBD",30,0)
 S ACTDATE=BEGDATE
"RTN","RCRJRBD",31,0)
 F  S ACTDATE=$O(^PRCA(430,"ACTDT",ACTDATE)) Q:'ACTDATE!(ACTDATE>ENDDATE)  D
"RTN","RCRJRBD",32,0)
 . S BILLDA=0 F  S BILLDA=$O(^PRCA(430,"ACTDT",ACTDATE,BILLDA)) Q:'BILLDA  D
"RTN","RCRJRBD",33,0)
 . . S CATEGORY=+$P($G(^PRCA(430,BILLDA,0)),"^",2)
"RTN","RCRJRBD",34,0)
 . . ;  do not look at prepayments
"RTN","RCRJRBD",35,0)
 . . I 'CATEGORY!(CATEGORY=26) Q
"RTN","RCRJRBD",36,0)
 . . ;
"RTN","RCRJRBD",37,0)
 . . ;  only look at bills with a 0 principal balance
"RTN","RCRJRBD",38,0)
 . . I $P($G(^PRCA(430,BILLDA,7)),"^") Q
"RTN","RCRJRBD",39,0)
 . . ;
"RTN","RCRJRBD",40,0)
 . . ;  only report fund 528701,03,04,11 and 4032/528709 bills
"RTN","RCRJRBD",41,0)
 . . S FUND=$$GETFUNDB^RCXFMSUF(BILLDA,1)
"RTN","RCRJRBD",42,0)
 . . I '$$PTACCT^PRCAACC(FUND),$E(FUND,1,4)'=4032 Q
"RTN","RCRJRBD",43,0)
 . . ;
"RTN","RCRJRBD",44,0)
 . . ;  determine MRA type of bill, given bill# and bill active date
"RTN","RCRJRBD",45,0)
 . . ;  DBIA #4385 activated on 31-Mar-2004
"RTN","RCRJRBD",46,0)
 . . S MRATYPE=$$MRATYPE^IBCEMU2(BILLDA,ACTDATE)
"RTN","RCRJRBD",47,0)
 . . ;
"RTN","RCRJRBD",48,0)
 . . ;  derive standard general ledger (SGL) from cat/fund/MRA type
"RTN","RCRJRBD",49,0)
 . . S SGL=$$BDRSGL(CATEGORY,FUND,MRATYPE)
"RTN","RCRJRBD",50,0)
 . . ;
"RTN","RCRJRBD",51,0)
 . . ;  determine the original amount of the bill (add increase
"RTN","RCRJRBD",52,0)
 . . ;  adjustments below)
"RTN","RCRJRBD",53,0)
 . . S PRIN=$P($G(^PRCA(430,BILLDA,0)),"^",3)
"RTN","RCRJRBD",54,0)
 . . S PAY=0
"RTN","RCRJRBD",55,0)
 . . ;
"RTN","RCRJRBD",56,0)
 . . ;  get the $ transations for bills
"RTN","RCRJRBD",57,0)
 . . S TRANDA=0
"RTN","RCRJRBD",58,0)
 . . F  S TRANDA=$O(^PRCA(433,"C",BILLDA,TRANDA)) Q:'TRANDA  D
"RTN","RCRJRBD",59,0)
 . . . S TRANTYPE=$P($G(^PRCA(433,TRANDA,1)),"^",2)
"RTN","RCRJRBD",60,0)
 . . . I "^1^2^34^43^"'[("^"_TRANTYPE_"^") Q
"RTN","RCRJRBD",61,0)
 . . . S VALUE=$$TRANBAL^RCRJRCOT(TRANDA) I VALUE="" Q
"RTN","RCRJRBD",62,0)
 . . . ;  increase adjustments or re-establish
"RTN","RCRJRBD",63,0)
 . . . I TRANTYPE=1!(TRANTYPE=43) S PRIN=PRIN+$P(VALUE,"^") Q
"RTN","RCRJRBD",64,0)
 . . . ;  payments
"RTN","RCRJRBD",65,0)
 . . . I TRANTYPE=2!(TRANTYPE=34) S PAY=PAY+$P(VALUE,"^") Q
"RTN","RCRJRBD",66,0)
 . . ;
"RTN","RCRJRBD",67,0)
 . . ;  payment cannot be greater than principle
"RTN","RCRJRBD",68,0)
 . . I PAY>PRIN S PAY=PRIN
"RTN","RCRJRBD",69,0)
 . . ;
"RTN","RCRJRBD",70,0)
 . . ;  store the data
"RTN","RCRJRBD",71,0)
 . . S PRINCPAL(SGL)=$G(PRINCPAL(SGL))+PRIN
"RTN","RCRJRBD",72,0)
 . . S PAYMENT(SGL)=$G(PAYMENT(SGL))+PAY
"RTN","RCRJRBD",73,0)
 . . ;
"RTN","RCRJRBD",74,0)
 ;
"RTN","RCRJRBD",75,0)
 ;  calculate the writeoffs from 2/0/98
"RTN","RCRJRBD",76,0)
 ;  2/0/98 is when fms cleared out actual writeoffs and contract adj
"RTN","RCRJRBD",77,0)
 K ^XTMP("PRCABDET")
"RTN","RCRJRBD",78,0)
 S ^XTMP("PRCABDET",0)=$$FMADD^XLFDT(DT,10)_"^"_DT_"^BAD DEBT REPORT AUDIT"
"RTN","RCRJRBD",79,0)
 F TRANTYPE=8,9,10,11,35 D
"RTN","RCRJRBD",80,0)
 . S TRANDATE=2980200
"RTN","RCRJRBD",81,0)
 . ;  do not pick up transactions after the end date
"RTN","RCRJRBD",82,0)
 . F  S TRANDATE=$O(^PRCA(433,"AT",TRANTYPE,TRANDATE)) Q:'TRANDATE!($P(TRANDATE,".")>DATEEND)  D
"RTN","RCRJRBD",83,0)
 . . S TRANDA=0 F  S TRANDA=$O(^PRCA(433,"AT",TRANTYPE,TRANDATE,TRANDA)) Q:'TRANDA  D
"RTN","RCRJRBD",84,0)
 . . . ;  do not look at decrease adj which are not contract adj
"RTN","RCRJRBD",85,0)
 . . . I TRANTYPE=35,'$P($G(^PRCA(433,TRANDA,8)),"^",8) Q
"RTN","RCRJRBD",86,0)
 . . . ;
"RTN","RCRJRBD",87,0)
 . . . S BILLDA=$P($G(^PRCA(433,TRANDA,0)),"^",2)
"RTN","RCRJRBD",88,0)
 . . . I 'BILLDA Q
"RTN","RCRJRBD",89,0)
 . . . S CATEGORY=+$P($G(^PRCA(430,BILLDA,0)),"^",2)
"RTN","RCRJRBD",90,0)
 . . . ;  do not look at prepayments
"RTN","RCRJRBD",91,0)
 . . . I 'CATEGORY!(CATEGORY=26) Q
"RTN","RCRJRBD",92,0)
 . . . ;
"RTN","RCRJRBD",93,0)
 . . . ;  only report fund 528701,03,04,11 and 4032/528709 (ltc) bills
"RTN","RCRJRBD",94,0)
 . . . S FUND=$$GETFUNDB^RCXFMSUF(BILLDA,1)
"RTN","RCRJRBD",95,0)
 . . . I '$$PTACCT^PRCAACC(FUND),$E(FUND,1,4)'=4032 Q
"RTN","RCRJRBD",96,0)
 . . . ;
"RTN","RCRJRBD",97,0)
 . . . ;  get bill active date
"RTN","RCRJRBD",98,0)
 . . . S ARACTDT=+$P($P($G(^PRCA(430,BILLDA,6)),"^",21),".")
"RTN","RCRJRBD",99,0)
 . . . ;  determine MRA type of bill, given bill# and bill active date
"RTN","RCRJRBD",100,0)
 . . . ;  DBIA #4385 activated on 31-Mar-2004
"RTN","RCRJRBD",101,0)
 . . . S MRATYPE=$$MRATYPE^IBCEMU2(BILLDA,ARACTDT)
"RTN","RCRJRBD",102,0)
 . . . ;
"RTN","RCRJRBD",103,0)
 . . . ; derive standard general ledger (SGL) from cat/fund/MRA type
"RTN","RCRJRBD",104,0)
 . . . S SGL=$$BDRSGL(CATEGORY,FUND,MRATYPE)
"RTN","RCRJRBD",105,0)
 . . . ;
"RTN","RCRJRBD",106,0)
 . . . ;  get the principal transaction value
"RTN","RCRJRBD",107,0)
 . . . S RCVALUE=+$P($$TRANBAL^RCRJRCOT(TRANDA),"^")
"RTN","RCRJRBD",108,0)
 . . . ;  temp variable for value (used below)
"RTN","RCRJRBD",109,0)
 . . . S RCPRIN=RCVALUE
"RTN","RCRJRBD",110,0)
 . . . ;
"RTN","RCRJRBD",111,0)
 . . . ;  add actual writeoff amount for fiscal year
"RTN","RCRJRBD",112,0)
 . . . I TRANTYPE'=35 S ACTUALWO(SGL)=$G(ACTUALWO(SGL))+RCVALUE
"RTN","RCRJRBD",113,0)
 . . . ;  add actual contract adjustments for fiscal year
"RTN","RCRJRBD",114,0)
 . . . I TRANTYPE=35 S ACTUALCA(SGL)=$G(ACTUALCA(SGL))+RCVALUE
"RTN","RCRJRBD",115,0)
 . . . S RSC=$$CALCRSC^RCXFMSUR(BILLDA)
"RTN","RCRJRBD",116,0)
 . . . S ^XTMP("PRCABDET",BILLDA,CATEGORY,FUND,RSC,SGL,TRANDA,TRANDATE,TRANTYPE,RCPRIN,RCVALUE,0,0)=""
"RTN","RCRJRBD",117,0)
 ;
"RTN","RCRJRBD",118,0)
 ;  remove all the entries from the bad debt file
"RTN","RCRJRBD",119,0)
 D DELETALL
"RTN","RCRJRBD",120,0)
 ;
"RTN","RCRJRBD",121,0)
 ;  calculate percentages and store them
"RTN","RCRJRBD",122,0)
 F SGL=1319,1319.2,1319.3,1319.4,1319.5,1319.6,1338,1338.2,1338.3,1339,1339.1,"133N","133N.2","133.N3" D
"RTN","RCRJRBD",123,0)
 . ;  collection %
"RTN","RCRJRBD",124,0)
 . S COLLECT=0 I $G(PRINCPAL(SGL)) S COLLECT=$J($G(PAYMENT(SGL))/PRINCPAL(SGL)*100,0,2)
"RTN","RCRJRBD",125,0)
 . ;  patch PRCA*4.5*138: for the first year from when MRA is activated at a site, there is no collection
"RTN","RCRJRBD",126,0)
 . ;  history for post-MRA non-Medicare bills(SGL 133N). So, to calculate the percentage for SGL 133N, the
"RTN","RCRJRBD",127,0)
 . ;  payment and the principal for SGL 1339 are used in the first year.
"RTN","RCRJRBD",128,0)
 . ;  override the collection value for SGL=133N for the first year from MRA activation.
"RTN","RCRJRBD",129,0)
 . ;;  Re-evaluate the calc. of the percentage for 133N as well as 1339.
"RTN","RCRJRBD",130,0)
 . ;;I SGL="133N",$G(PRINCIPAL(1339)) D  ;
"RTN","RCRJRBD",131,0)
 . ;;. N X1,X2,X,%Y
"RTN","RCRJRBD",132,0)
 . ;;. ;  X2=MRA Activation Date, X1=Today, X=diff in days, %Y=0 invalid dates
"RTN","RCRJRBD",133,0)
 . ;;. ;  DBIA #4385 activated on 31-Mar-2004
"RTN","RCRJRBD",134,0)
 . ;;. S X2=$$MRADTACT^IBCEMU2,X1=$$DT^XLFDT D ^%DTC
"RTN","RCRJRBD",135,0)
 . ;;. I %Y,X'>364.25 S COLLECT=$J($G(PAYMENT(1339))/PRINCPAL(1339)*100,0,2)
"RTN","RCRJRBD",136,0)
 . S DR=".02////"_+COLLECT_";"
"RTN","RCRJRBD",137,0)
 . ;
"RTN","RCRJRBD",138,0)
 . ;  current month receivable (this is built in the routine
"RTN","RCRJRBD",139,0)
 . ;  RCRJRCO1 and is stored in ^TMP($J,"RCRJRBD",SGL))
"RTN","RCRJRBD",140,0)
 . S DR=DR_".07////"_+$G(^TMP($J,"RCRJRBD",SGL))_";"
"RTN","RCRJRBD",141,0)
 . ;
"RTN","RCRJRBD",142,0)
 . ;  calculate allowance estimate for 1319 and 1338
"RTN","RCRJRBD",143,0)
 . ;  .08 allowance estimate = (writeoff % * current receivables)
"RTN","RCRJRBD",144,0)
 . ;  .09 actual writeoffs fytd
"RTN","RCRJRBD",145,0)
 . I SGL=1319!(SGL=1319.2)!(SGL=1319.3)!(SGL=1319.4)!(SGL=1319.5)!(SGL=1319.6)!(SGL=1338)!(SGL=1338.2)!(SGL=1338.3) D
"RTN","RCRJRBD",146,0)
 . . S WRITEOFF=100-COLLECT
"RTN","RCRJRBD",147,0)
 . . S DR=DR_".03////"_WRITEOFF_";"
"RTN","RCRJRBD",148,0)
 . . S DR=DR_".08////"_$J((WRITEOFF/100)*$G(^TMP($J,"RCRJRBD",SGL)),0,2)_";"
"RTN","RCRJRBD",149,0)
 . . S DR=DR_".09////"_+$G(ACTUALWO(SGL))_";"
"RTN","RCRJRBD",150,0)
 . ;  calculate allowance estimate for 1339
"RTN","RCRJRBD",151,0)
 . ;  .08 allowance estimate = (contract % * current receivables)
"RTN","RCRJRBD",152,0)
 . ;  .09 actual contract adjustments fytd
"RTN","RCRJRBD",153,0)
 . I SGL=1339!(SGL=1339.1)!(SGL="133N")!(SGL="133N.2")!(SGL="133N.3") D
"RTN","RCRJRBD",154,0)
 . . S CONTRACT=100-COLLECT
"RTN","RCRJRBD",155,0)
 . . S DR=DR_".04////"_CONTRACT_";"
"RTN","RCRJRBD",156,0)
 . . S DR=DR_".08////"_$J((CONTRACT/100)*$G(^TMP($J,"RCRJRBD",SGL)),0,2)_";"
"RTN","RCRJRBD",157,0)
 . . S DR=DR_".09////"_+$G(ACTUALCA(SGL))_";"
"RTN","RCRJRBD",158,0)
 . ;
"RTN","RCRJRBD",159,0)
 . ;  set changed locally flag to no
"RTN","RCRJRBD",160,0)
 . S DR=DR_".1////0;"
"RTN","RCRJRBD",161,0)
 . D STORE(SGL,DR)
"RTN","RCRJRBD",162,0)
 ;
"RTN","RCRJRBD",163,0)
 L -^RC(348.1)
"RTN","RCRJRBD",164,0)
 ;
"RTN","RCRJRBD",165,0)
 ;   ;  put the report in a mail message (rcrjfmm=1)
"RTN","RCRJRBD",166,0)
 ;   S RCRJFMM=1
"RTN","RCRJRBD",167,0)
 ;   S RCRJDATE=DATEEND
"RTN","RCRJRBD",168,0)
 ;   D DQ^RCRJRBDR
"RTN","RCRJRBD",169,0)
 ;
"RTN","RCRJRBD",170,0)
 ;  transmit the allowances to FMS, and then generate the report.
"RTN","RCRJRBD",171,0)
 D BADDEBT^RCXFMSSV(DATEEND)
"RTN","RCRJRBD",172,0)
 Q
"RTN","RCRJRBD",173,0)
 ;
"RTN","RCRJRBD",174,0)
 ;
"RTN","RCRJRBD",175,0)
STORE(SGL,DR) ;  store data for Standard Ledger Account
"RTN","RCRJRBD",176,0)
 N D0,DA,DD,DI,DIC,DIE,DINUM,DO,DQ,X,Y
"RTN","RCRJRBD",177,0)
 S DIC="^RC(348.1,",DIC(0)="L",X=SGL,DIC("DR")=DR
"RTN","RCRJRBD",178,0)
 D FILE^DICN
"RTN","RCRJRBD",179,0)
 Q
"RTN","RCRJRBD",180,0)
 ;
"RTN","RCRJRBD",181,0)
 ;
"RTN","RCRJRBD",182,0)
DELETALL ;  delete all the entries from the bad debt file
"RTN","RCRJRBD",183,0)
 N %,DA,DIC,DIK,X,Y
"RTN","RCRJRBD",184,0)
 S DIK="^RC(348.1,"
"RTN","RCRJRBD",185,0)
 S DA=0 F  S DA=$O(^RC(348.1,DA)) Q:'DA  D ^DIK
"RTN","RCRJRBD",186,0)
 Q
"RTN","RCRJRBD",187,0)
 ;
"RTN","RCRJRBD",188,0)
 ;
"RTN","RCRJRBD",189,0)
WD3() ;  return the third work day of the month
"RTN","RCRJRBD",190,0)
 N J,P,V,X
"RTN","RCRJRBD",191,0)
 S J=0 F P=$E(DT,1,5)_"01":1 S V=$$DOW^XLFDT(P,1) I V,V<6,'$D(^HOLIDAY("B",P)) S J=J+1 Q:J=3
"RTN","RCRJRBD",192,0)
 S X=+$E(P,6,7)
"RTN","RCRJRBD",193,0)
 Q X
"RTN","RCRJRBD",194,0)
 ;
"RTN","RCRJRBD",195,0)
 ;
"RTN","RCRJRBD",196,0)
PREVMONT(FORDATE) ; return the previous month's date
"RTN","RCRJRBD",197,0)
 N PREVDATE
"RTN","RCRJRBD",198,0)
 S PREVDATE=$E(FORDATE,1,5)-1
"RTN","RCRJRBD",199,0)
 I $E(PREVDATE,4,5)="00" S PREVDATE=($E(PREVDATE,1,3)-1)_12
"RTN","RCRJRBD",200,0)
 Q PREVDATE_"00"
"RTN","RCRJRBD",201,0)
 ;
"RTN","RCRJRBD",202,0)
 ; derive standard general ledger (SGL) from category and fund
"RTN","RCRJRBD",203,0)
SGL(CATEGORY,FUND) ;
"RTN","RCRJRBD",204,0)
 I $G(FUND)=528709 Q 1319.2 ;new long term care fund
"RTN","RCRJRBD",205,0)
 I $E($G(FUND),1,4)=4032 Q 1319.2 ; breakout long term care as a subset
"RTN","RCRJRBD",206,0)
 I $G(FUND)=528711&(CAT=6)!(CAT=7) Q 1319.5  ; breakout pharmacy
"RTN","RCRJRBD",207,0)
 I $G(FUND)=528711&(CAT=9) Q "133N.2"  ; pharmacy reimburs health ins
"RTN","RCRJRBD",208,0)
 I $G(FUND)=528711&(CAT=10) Q 1338.2  ; pharmacy tort feasor
"RTN","RCRJRBD",209,0)
 I CATEGORY=8 Q 1339   ; crime or per. vio.
"RTN","RCRJRBD",210,0)
 I CATEGORY=9 Q 1339   ; reimbursable health insurance
"RTN","RCRJRBD",211,0)
 I CATEGORY=46 Q 1339   ; EMER/HUMAN REIMB INS  ;315
"RTN","RCRJRBD",212,0)
 I CATEGORY=10 Q 1338  ; tort feasor
"RTN","RCRJRBD",213,0)
 I CATEGORY=21 Q 1339  ; medicare
"RTN","RCRJRBD",214,0)
 I CATEGORY=45 Q 1339.1  ; Fee Basis
"RTN","RCRJRBD",215,0)
 Q 1319
"RTN","RCRJRBD",216,0)
 ;
"RTN","RCRJRBD",217,0)
 ;
"RTN","RCRJRBD",218,0)
BDRSGL(CAT,FUND,MRATYPE) ; Calculate SGLs for the BDR process
"RTN","RCRJRBD",219,0)
 ;PRCA*4.5*310/DRF Added fund 528713, Non-VA Reimbursable Insurance
"RTN","RCRJRBD",220,0)
 ;
"RTN","RCRJRBD",221,0)
 ; This API will be used by both the ARDC (routine RCRJRCOC)
"RTN","RCRJRBD",222,0)
 ; and the BDR estimate calculator to associate receivables
"RTN","RCRJRBD",223,0)
 ; with the correct standard general ledger account (SGL).
"RTN","RCRJRBD",224,0)
 ; The following table will be implemented:
"RTN","RCRJRBD",225,0)
 ;
"RTN","RCRJRBD",226,0)
 ; Receivable Type (Category)        Fund      SGL
"RTN","RCRJRBD",227,0)
 ;==================================================
"RTN","RCRJRBD",228,0)
 ; Medical Care Co-payments                 528703    1319
"RTN","RCRJRBD",229,0)
 ;  (plus Inelig, Emerg./Hum. rec.)
"RTN","RCRJRBD",230,0)
 ; Long Term Care Co-payments               528709    1319.2
"RTN","RCRJRBD",231,0)
 ; Medication Co-payments                   528701    1319.3
"RTN","RCRJRBD",232,0)
 ; Crimes of Personal Violence (8),         528704    1319.4
"RTN","RCRJRBD",233,0)
 ;  Medicare (21), No-Fault Auto
"RTN","RCRJRBD",234,0)
 ;  (7), Workman's Comp (6)
"RTN","RCRJRBD",235,0)
 ; Tort Feasor (10)                         528704    1338
"RTN","RCRJRBD",236,0)
 ; RHI (9), pre-MRA                         528704    1339
"RTN","RCRJRBD",237,0)
 ; RHI (9), post-MRA, MRA rec.              528704    133H
"RTN","RCRJRBD",238,0)
 ; RHI (9), post-MRA, non-MRA rec.          528704    133N
"RTN","RCRJRBD",239,0)
 ; Non-VA RHI Tort Feasor                   528713    1338.3
"RTN","RCRJRBD",240,0)
 ; Non-VA RHI (45), pre-MRA                 528713    1339.1
"RTN","RCRJRBD",241,0)
 ; Non-VA RHI (45), post-MRA, MRA rec.      528713    133H.2
"RTN","RCRJRBD",242,0)
 ; Non-VA RHI (45), post-MRA, non-MRA rec.  528713    133N.3
"RTN","RCRJRBD",243,0)
 ; Crimes of Personal Violence (8),         528713    1319.6
"RTN","RCRJRBD",244,0)
 ;  Medicare (21), No-Fault Auto
"RTN","RCRJRBD",245,0)
 ;  (7), Workman's Comp (6)
"RTN","RCRJRBD",246,0)
 ; Pharmacy No Fault Auto(7),               528711    1319.5
"RTN","RCRJRBD",247,0)
 ; Pharmacy Workman's Comp(6)
"RTN","RCRJRBD",248,0)
 ; Pharmacy RHI, non MRA (9)                528711    133N.2
"RTN","RCRJRBD",249,0)
 ; Pharmacy Tort Feasor (10)                528711    1338.2
"RTN","RCRJRBD",250,0)
 ;
"RTN","RCRJRBD",251,0)
 ;  Input:  CAT  --  Pointer to the receivable category in file 430.2
"RTN","RCRJRBD",252,0)
 ;         FUND  --  Receivable fund calculated by routine RCXFMSUF
"RTN","RCRJRBD",253,0)
 ;      MRATYPE  --  Indicator of an MRA (2) or non-MRA (3) receivable
"RTN","RCRJRBD",254,0)
 ;
"RTN","RCRJRBD",255,0)
 ;
"RTN","RCRJRBD",256,0)
 I $G(FUND)=528709 Q 1319.2
"RTN","RCRJRBD",257,0)
 I $E($G(FUND),1,4)=4032 Q 1319.2
"RTN","RCRJRBD",258,0)
 I $G(FUND)=528701 Q 1319.3
"RTN","RCRJRBD",259,0)
 I $G(FUND)=528711&((CAT=6)!(CAT=7)) Q 1319.5
"RTN","RCRJRBD",260,0)
 I $G(FUND)=528711&(CAT=9) Q "133N.2"
"RTN","RCRJRBD",261,0)
 I $G(FUND)=528711&(CAT=10) Q 1338.2
"RTN","RCRJRBD",262,0)
 I $G(FUND)=528713&(CAT=10) Q 1338.3
"RTN","RCRJRBD",263,0)
 I $G(FUND)=528713&(CAT=8!(CAT=21)!(CAT=6)!(CAT=7)) Q 1319.6
"RTN","RCRJRBD",264,0)
 I CAT=8!(CAT=21)!(CAT=7)!(CAT=6) Q 1319.4
"RTN","RCRJRBD",265,0)
 I CAT=10 Q 1338
"RTN","RCRJRBD",266,0)
 I CAT=9 Q $S(MRATYPE=2:"133H",MRATYPE=3:"133N",1:1339)
"RTN","RCRJRBD",267,0)
 I CAT=46 Q $S(MRATYPE=2:"133H",MRATYPE=3:"133N",1:1339)  ;315 
"RTN","RCRJRBD",268,0)
 I CAT=45 Q $S(MRATYPE=2:"133H.2",MRATYPE=3:"133N.3",1:1339.1)
"RTN","RCRJRBD",269,0)
 Q 1319
"RTN","RCTCSJR")
0^13^B123788872^B113325699
"RTN","RCTCSJR",1,0)
RCTCSJR ;ALBANY/LEG-CS DEBT REFERRAL REJECT REPORTING ;07/15/14 3:34 PM
"RTN","RCTCSJR",2,0)
 ;;4.5;Accounts Receivable;**301,315**;Mar 20, 1995;Build 67
"RTN","RCTCSJR",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSJR",4,0)
 ;
"RTN","RCTCSJR",5,0)
 Q
"RTN","RCTCSJR",6,0)
ECLIST ; prints IAI Error Codes List
"RTN","RCTCSJR",7,0)
 S DIC="^RC(348.5,",BY=.01
"RTN","RCTCSJR",8,0)
 S (FR,TO)=""
"RTN","RCTCSJR",9,0)
 S FLDS="[TCS IAI ERROR CODES LIST]"
"RTN","RCTCSJR",10,0)
 S DHD="TCS IAI ERROR CODES LIST"
"RTN","RCTCSJR",11,0)
 S DIOBEG="W !!"
"RTN","RCTCSJR",12,0)
 D EN1^DIP
"RTN","RCTCSJR",13,0)
 Q
"RTN","RCTCSJR",14,0)
 ; 
"RTN","RCTCSJR",15,0)
RJRPT ; for CS REJECT REPORT processing
"RTN","RCTCSJR",16,0)
 D INIT S STOP=0
"RTN","RCTCSJR",17,0)
 D PROMPTS Q:POP
"RTN","RCTCSJR",18,0)
 Q:STOP
"RTN","RCTCSJR",19,0)
 D HEADING,GETRECS,PRTRECS
"RTN","RCTCSJR",20,0)
 K %ZIS,ACTN,ASCDES,BILLID,BILLIEN,BLNKS,BY,CD,CDIEN,CDREC,CDSH,CHDR,CHDRS,CNTR,COLDASH,COLHDRS,COLWIDTH1,COLWIDTH2,COLWIDTH3,CWID,DASH,DATA,DATAITMS,DATE,DEBTIDX,DEBTIEN,DEBTOR,DEBTREC,DEBTREF,DEFAULT,DESC,DHD,DIOBEG
"RTN","RCTCSJR",21,0)
 K DTFRM,DTFRMTO,DTFROM,DTTO,ECDS,EXCEL,FIELD,FLDS,FR,GROUPBD,HDTITLE,I,INCLUDE,INDATE,L,LEV1,LEV2,LEV3,LEV4,LN,OUTDATE,PAGE,POP,QUIT,RPTITEMS,RPTREC,SEQ,SRC,SSN,STOP,STR,TO,TYP,UPDN,RECW1,RECW2,EXCOLH,EXSSN,CDREC1
"RTN","RCTCSJR",22,0)
 Q
"RTN","RCTCSJR",23,0)
 ;
"RTN","RCTCSJR",24,0)
INIT ;
"RTN","RCTCSJR",25,0)
 K ^XTMP("RCTCSJS",$J),REC
"RTN","RCTCSJR",26,0)
 S ^XTMP("RCTCSJS",$J,0)=$$FMADD^XLFDT(DT,5)_"^"_DT_"^"_"CS REJECT Report"  ; Maintain this entry for 5 days
"RTN","RCTCSJR",27,0)
 S DASH="",$P(DASH,"-",78)=""  ; (as per PRCA*4.5*315)
"RTN","RCTCSJR",28,0)
 S BLNKS="",$P(BLNKS," ",71)=""
"RTN","RCTCSJR",29,0)
 S DATAITMS="DATE^SRC^ECD(1)^ECD(2)^ECD(3)^ECD(4)^ECD(5)^ECD(6)^ECD(7)^ECD(8)^ECD(9)^TYP^ACTN"
"RTN","RCTCSJR",30,0)
 S RPTITEMS="BILLID^DEBTOR^SSN^TYP^ACTN^OUTDATE^SRC^ECDS"
"RTN","RCTCSJR",31,0)
 I $G(EXCEL) S RPTITEMS="BILLID^DEBTOR^EXSSN^TYP^ACTN^OUTDATE^SRC^ECDS^RECDET"  ;PRCA*4.5*315
"RTN","RCTCSJR",32,0)
 Q
"RTN","RCTCSJR",33,0)
 ;
"RTN","RCTCSJR",34,0)
GETRECS ;
"RTN","RCTCSJR",35,0)
 N PC,RECDET
"RTN","RCTCSJR",36,0)
 S (DATE,DTFRM)=$$FMADD^XLFDT(+$P(DTFRMTO,U,2),-1),DTTO=$P(DTFRMTO,U,3)
"RTN","RCTCSJR",37,0)
 F  S DATE=$O(^PRCA(430,"AB",DATE)),BILLIEN=0 Q:DATE>DTTO!'DATE  D  ;
"RTN","RCTCSJR",38,0)
 . S INDATE=DATE,OUTDATE=$$FMTE^XLFDT(DATE,"2Z")  ;Standardize dates (as per PRCA*4.5*315)
"RTN","RCTCSJR",39,0)
 . F  S BILLIEN=$O(^PRCA(430,"AB",DATE,BILLIEN)),SEQ=0 Q:BILLIEN=""  D  ;
"RTN","RCTCSJR",40,0)
 .. S BILLID=$P(^PRCA(430,BILLIEN,0),U)
"RTN","RCTCSJR",41,0)
 .. S DEBTIEN=$P(^PRCA(430,BILLIEN,0),U,9) ;33460
"RTN","RCTCSJR",42,0)
 .. S DEBTIDX=$P($G(^RCD(340,DEBTIEN,0)),U) ;777706050;DPT(
"RTN","RCTCSJR",43,0)
 .. Q:$G(DEBTIDX)=""
"RTN","RCTCSJR",44,0)
 .. S DEBTREF="^"_$P(DEBTIDX,";",2)_$P(DEBTIDX,";")_",0)"
"RTN","RCTCSJR",45,0)
 .. S DEBTREC=@(DEBTREF)
"RTN","RCTCSJR",46,0)
 .. S DEBTOR=$E($P(DEBTREC,U),1,19),SSN=$E($$SSN^RCFN01($P($G(^RCD(340,DEBTIEN,0)),"^")),6,9)  ;Last 4 of SSN only (as per PRCA*4.5*315)
"RTN","RCTCSJR",47,0)
 .. S SSN=$E($$SSN^RCFN01($P($G(^RCD(340,DEBTIEN,0)),"^")),6,9)  ;Last 4 of SSN if Excel PRCA*4.5*315
"RTN","RCTCSJR",48,0)
 .. S EXSSN=$E(DEBTOR)_$S(SSN'="":SSN,1:"    ")  ; 1st init last name, last 4 of SSN if not Excel PRCA*4.5*315
"RTN","RCTCSJR",49,0)
 .. F  S SEQ=$O(^PRCA(430,"AB",DATE,BILLIEN,SEQ)) Q:SEQ=""  D  ;
"RTN","RCTCSJR",50,0)
 ... S DATA=$G(^PRCA(430,BILLIEN,18,SEQ,0))
"RTN","RCTCSJR",51,0)
 ... Q:'$L(DATA)  ; in the event the X-REF is out of sync due to test clearing
"RTN","RCTCSJR",52,0)
 ... F PC=2,12,13 S CD=$P(DATA,U,PC),X=$P(DATAITMS,U,PC)_"="""_$S(CD="":CD,PC=2:CD,PC=12:$P($G(^RC(348.7,CD,0)),U),PC=13:$P($G(^RC(348.6,CD,0)),U),1:"")_"""",@X
"RTN","RCTCSJR",53,0)
 ... K ECD
"RTN","RCTCSJR",54,0)
 ... S ECDS=""
"RTN","RCTCSJR",55,0)
 ... F PC=3:1:11 S CD=$P(DATA,U,PC) Q:'$L(CD)  S CD=$S('$D(^RC(348.5,CD,0)):CD,1:$P(^RC(348.5,CD,0),U)) S X="S "_$P(DATAITMS,U,PC)_"="""_CD_"""" D  ;
"RTN","RCTCSJR",56,0)
 .... Q:'$D(^RC(348.5,$P(DATA,U,PC),0))!(CD="ZZ")  ; quits just in case bad error code got thru
"RTN","RCTCSJR",57,0)
 .... X X
"RTN","RCTCSJR",58,0)
 .... S ECDS=ECDS_$S(PC>3:";",1:"")_ECD(PC-2) ;Error codes new delimiter ";"
"RTN","RCTCSJR",59,0)
 ... ;  gets record layout based on RPTTYP and places into RPTTYP sorting sequence
"RTN","RCTCSJR",60,0)
 ... D @RPTTYP ;1=BILL NO.  2=DEBTOR  3=REJECT DATE
"RTN","RCTCSJR",61,0)
 ... Q  ;
"RTN","RCTCSJR",62,0)
 ... ;
"RTN","RCTCSJR",63,0)
 S LEV1="",CNTR=0
"RTN","RCTCSJR",64,0)
 K REC
"RTN","RCTCSJR",65,0)
 S UPDN=$S(ASCDES="D":-1,1:1) ; determines ASCending or DeSCending direction
"RTN","RCTCSJR",66,0)
 F  S LEV1=$O(^XTMP("RCTCSJS",$J,"RPT",LEV1),UPDN),LEV2="" Q:LEV1=""  D  ;
"RTN","RCTCSJR",67,0)
 . F  S LEV2=$O(^XTMP("RCTCSJS",$J,"RPT",LEV1,LEV2),UPDN),LEV3="" Q:LEV2=""  D  ;
"RTN","RCTCSJR",68,0)
 .. F  S LEV3=$O(^XTMP("RCTCSJS",$J,"RPT",LEV1,LEV2,LEV3),UPDN),LEV4="" Q:LEV3=""  D  ;
"RTN","RCTCSJR",69,0)
 ... F  S LEV4=$O(^XTMP("RCTCSJS",$J,"RPT",LEV1,LEV2,LEV3,LEV4),UPDN) Q:LEV4=""  D  ;
"RTN","RCTCSJR",70,0)
 .... S RPTREC=^XTMP("RCTCSJS",$J,"RPT",LEV1,LEV2,LEV3,LEV4)
"RTN","RCTCSJR",71,0)
 .... I 'EXCEL S SRC=$E(RPTREC,65)
"RTN","RCTCSJR",72,0)
 .... I EXCEL S SRC=$P(RPTREC,U,7)
"RTN","RCTCSJR",73,0)
 .... I INCLUDE'="ALL",INCLUDE'=SRC Q  ; unwanted source
"RTN","RCTCSJR",74,0)
 .... S CNTR=CNTR+1
"RTN","RCTCSJR",75,0)
 .... S REC(CNTR)=$P(RPTREC,";",1,$S(EXCEL:10,1:4))
"RTN","RCTCSJR",76,0)
 .... I EXCEL S RECW1=$E(REC(CNTR),1,70),RECW2=$TR($E(REC(CNTR),71,999),"^","-"),REC(CNTR)=RECW1_RECW2
"RTN","RCTCSJR",77,0)
 .... ;Q:EXCEL  ;     only needs single line string if in Excel format
"RTN","RCTCSJR",78,0)
 .... I 'EXCEL S RECW1=$E(REC(CNTR),1,70),RECW2=$TR($E(REC(CNTR),71,999),"^",";"),REC(CNTR)=RECW1_RECW2
"RTN","RCTCSJR",79,0)
 .... I 'EXCEL,$L($P(RPTREC,";",5,8)) D
"RTN","RCTCSJR",80,0)
 ..... S CNTR=CNTR+1,REC(CNTR)=$E(BLNKS,1,67)_$P(RPTREC,";",5,8)
"RTN","RCTCSJR",81,0)
 .... I 'EXCEL,$L($P(RPTREC,";",9)) D
"RTN","RCTCSJR",82,0)
 ..... S CNTR=CNTR+1,REC(CNTR)=$E(BLNKS,1,67)_$P(RPTREC,";",9)
"RTN","RCTCSJR",83,0)
 .... I GROUPBD="D" D  ;
"RTN","RCTCSJR",84,0)
 ..... K ECD
"RTN","RCTCSJR",85,0)
 ..... S ECDS=$E(RPTREC,68,100)
"RTN","RCTCSJR",86,0)
 ..... F I=1:1:9 S ECD(I)=$P(ECDS,";",I) Q:'$L(ECD(I))  D
"RTN","RCTCSJR",87,0)
 ...... S CD=$P(ECDS,";",I),CDIEN=$O(^RC(348.5,"B",CD,0))
"RTN","RCTCSJR",88,0)
 ...... S (CDREC,CDREC1)="" I CDIEN,$D(^RC(348.5,CDIEN)) S CDREC=^RC(348.5,CDIEN,0),CDREC1=$G(^RC(348.5,CDIEN,1))
"RTN","RCTCSJR",89,0)
 ...... S (X,DESC,RECDET)="  "_CD_" - "_CDREC1
"RTN","RCTCSJR",90,0)
 ...... I $L(DESC)<81 S CNTR=CNTR+1,REC(CNTR)=X
"RTN","RCTCSJR",91,0)
 ...... ;  splits line if > 80 chars
"RTN","RCTCSJR",92,0)
 ...... I $L(DESC)>80 D  ;
"RTN","RCTCSJR",93,0)
 ....... F  S STR=$E(X,1,80) D  Q:'$L(X)  ;
"RTN","RCTCSJR",94,0)
 ........ I $L(X)<81 S CNTR=CNTR+1 S REC(CNTR)=X,X="" Q
"RTN","RCTCSJR",95,0)
 ........ F L=$L(STR):-1:1 I $F(STR," ",L) D  Q  ;
"RTN","RCTCSJR",96,0)
 ......... S CNTR=CNTR+1
"RTN","RCTCSJR",97,0)
 ......... S REC(CNTR)=$E(X,1,L),X=$E(X,L+1,999)
"RTN","RCTCSJR",98,0)
 ......... I $L(X) S X="     "_X
"RTN","RCTCSJR",99,0)
 ......... Q  ;
"RTN","RCTCSJR",100,0)
 M ^XTMP("RCTCSJS",$J,"REC")=REC
"RTN","RCTCSJR",101,0)
 Q
"RTN","RCTCSJR",102,0)
 ;
"RTN","RCTCSJR",103,0)
1 ; for report by 1) Bill Number
"RTN","RCTCSJR",104,0)
 S QUIT=0
"RTN","RCTCSJR",105,0)
 I 'EXCEL D  Q:QUIT  ;
"RTN","RCTCSJR",106,0)
 . S RPTREC=""
"RTN","RCTCSJR",107,0)
 . F PC=1:1:7 D  Q:QUIT  ;
"RTN","RCTCSJR",108,0)
 .. S FIELD=$P(RPTITEMS,U,PC)
"RTN","RCTCSJR",109,0)
 .. I PC=7,INCLUDE'="ALL",@FIELD'=INCLUDE S QUIT=1 Q  ;
"RTN","RCTCSJR",110,0)
 .. S RPTREC=RPTREC_$E(@FIELD_BLNKS,1,$P(COLWIDTH1,U,PC))
"RTN","RCTCSJR",111,0)
 . F PC=8 S RPTREC=RPTREC_@$P(RPTITEMS,U,PC)
"RTN","RCTCSJR",112,0)
 I EXCEL S RPTREC=BILLID_U_DEBTOR_U_EXSSN_U_TYP_U_ACTN_U_OUTDATE_U_SRC_U_ECDS  ; PRCA*4.5*315
"RTN","RCTCSJR",113,0)
 S ^XTMP("RCTCSJS",$J,"RPT",BILLID,INDATE,DEBTOR,SEQ)=RPTREC
"RTN","RCTCSJR",114,0)
 Q
"RTN","RCTCSJR",115,0)
2 ; for report by 2) Debtor Name
"RTN","RCTCSJR",116,0)
 S QUIT=0
"RTN","RCTCSJR",117,0)
 I EXCEL S RPTREC=DEBTOR_U_BILLID_U_EXSSN_U_TYP_U_ACTN_U_OUTDATE_U_SRC_U_ECDS  ; PRCA*4.5*315
"RTN","RCTCSJR",118,0)
 I 'EXCEL D  Q:QUIT  ;
"RTN","RCTCSJR",119,0)
 . S RPTREC=""
"RTN","RCTCSJR",120,0)
 . F PC=2,1,3:1:7 D  Q:QUIT  ;
"RTN","RCTCSJR",121,0)
 .. S FIELD=$P(RPTITEMS,U,PC)
"RTN","RCTCSJR",122,0)
 .. I PC=7,INCLUDE'="ALL",@FIELD'=INCLUDE S QUIT=1 Q  ;
"RTN","RCTCSJR",123,0)
 .. S RPTREC=RPTREC_$E(@FIELD_BLNKS,1,$P(COLWIDTH2,U,PC))
"RTN","RCTCSJR",124,0)
 . F PC=8 S RPTREC=RPTREC_@$P(RPTITEMS,U,PC)
"RTN","RCTCSJR",125,0)
 S ^XTMP("RCTCSJS",$J,"RPT",DEBTOR,BILLID,INDATE,SEQ)=RPTREC
"RTN","RCTCSJR",126,0)
 Q
"RTN","RCTCSJR",127,0)
3 ; for report by 3) CS Reject Date
"RTN","RCTCSJR",128,0)
 S QUIT=0
"RTN","RCTCSJR",129,0)
 I EXCEL S RPTREC=OUTDATE_U_BILLID_U_DEBTOR_U_EXSSN_U_TYP_U_ACTN_U_SRC_U_ECDS  ; PRCA*4.5*315
"RTN","RCTCSJR",130,0)
 I 'EXCEL D  Q:QUIT  ;
"RTN","RCTCSJR",131,0)
 . S RPTREC=""
"RTN","RCTCSJR",132,0)
 . F PC=6,1:1:5,7 D  Q:QUIT  ;
"RTN","RCTCSJR",133,0)
 .. S FIELD=$P(RPTITEMS,U,PC)
"RTN","RCTCSJR",134,0)
 .. I PC=7,INCLUDE'="ALL",@FIELD'=INCLUDE S QUIT=1 Q  ;
"RTN","RCTCSJR",135,0)
 .. S RPTREC=RPTREC_$E(@$P(RPTITEMS,U,PC)_BLNKS,1,$P(COLWIDTH3,U,PC))
"RTN","RCTCSJR",136,0)
 . F PC=8 S RPTREC=RPTREC_@$P(RPTITEMS,U,PC)
"RTN","RCTCSJR",137,0)
 S ^XTMP("RCTCSJS",$J,"RPT",INDATE,BILLID,DEBTOR,SEQ)=RPTREC
"RTN","RCTCSJR",138,0)
 Q
"RTN","RCTCSJR",139,0)
QRPT ;if queued
"RTN","RCTCSJR",140,0)
 D HEADING,GETRECS,PRTRECS
"RTN","RCTCSJR",141,0)
 Q
"RTN","RCTCSJR",142,0)
 ;
"RTN","RCTCSJR",143,0)
PRTRECS ; prints report
"RTN","RCTCSJR",144,0)
 S PAGE=0
"RTN","RCTCSJR",145,0)
 D HEADING,REJREPH
"RTN","RCTCSJR",146,0)
 S LN=0 F LN=1:1 Q:'$D(^XTMP("RCTCSJS",$J,"REC",LN))  D  Q:$D(DIRUT)!$D(DUOUT)!$D(DTOUT)
"RTN","RCTCSJR",147,0)
 . W ^XTMP("RCTCSJS",$J,"REC",LN),!
"RTN","RCTCSJR",148,0)
 . ;    check for end of page here, if necessary form feed and print header
"RTN","RCTCSJR",149,0)
 . I $Y+3>IOSL D
"RTN","RCTCSJR",150,0)
 .. I $E(IOST,1,2)="C-" S DIR(0)="E" K DIRUT D ^DIR Q:$D(DIRUT)!$D(DUOUT)!$D(DTOUT)
"RTN","RCTCSJR",151,0)
 .. D REJREPH
"RTN","RCTCSJR",152,0)
 . Q
"RTN","RCTCSJR",153,0)
 I $E(IOST,1,2)="C-" R !!,"END OF REPORT...PRESS RETURN TO CONTINUE",X:DTIME W @IOF
"RTN","RCTCSJR",154,0)
 D ^%ZISC
"RTN","RCTCSJR",155,0)
 Q
"RTN","RCTCSJR",156,0)
REJREPH ;
"RTN","RCTCSJR",157,0)
 U IO W @IOF S PAGE=PAGE+1
"RTN","RCTCSJR",158,0)
 W "PAGE "_PAGE,?10,HDTITLE,?68,$$FMTE^XLFDT(DT,"2Z")   ;Standardize the date
"RTN","RCTCSJR",159,0)
 I EXCEL W !,$TR(CHDR," ",""),! Q
"RTN","RCTCSJR",160,0)
 W !,DASH,!,CHDR,!,CDSH,! Q
"RTN","RCTCSJR",161,0)
 Q
"RTN","RCTCSJR",162,0)
COLHDR ; sets report line based on type of report
"RTN","RCTCSJR",163,0)
 S CHDR=CHDR_$P(COLHDRS,U,PC)_$S(EXCEL:"^",1:"")
"RTN","RCTCSJR",164,0)
 S CDSH=CDSH_$P(COLDASH,U,PC)_$S(EXCEL:"^",1:"")
"RTN","RCTCSJR",165,0)
 Q
"RTN","RCTCSJR",166,0)
HEADING ;  compiles info for Heading and titles for cross-servicing reject report
"RTN","RCTCSJR",167,0)
 S HDTITLE="DEBT REFERRAL REJECT REPORT (SORTED BY "_$P("BILL NO.^DEBTOR^REJ DATE",U,RPTTYP)
"RTN","RCTCSJR",168,0)
 S HDTITLE=HDTITLE_" <"_$S(ASCDES="D":"DSC",1:"ASC")_">)"
"RTN","RCTCSJR",169,0)
 ;
"RTN","RCTCSJR",170,0)
 S COLWIDTH1="12^20^9^5^5^13^3^11"  ;Change SSN to last initial last 4 only (as per PRCA*4.5*315)
"RTN","RCTCSJR",171,0)
 S COLWIDTH2="12^20^9^5^5^13^3^8",COLWIDTH3="12^20^9^5^6^12^3^11"
"RTN","RCTCSJR",172,0)
 S EXCOLH="BILL NO.^DEBTOR^Pt ID^TYP ^ACTNCD ^REJECT DATE ^SRC ^ERR CODES"
"RTN","RCTCSJR",173,0)
 S COLHDRS="BILL NO.    ^DEBTOR              ^Pt ID   ^TYP ^ACTNCD ^REJECT DATE ^SRC ^ERR CODES"
"RTN","RCTCSJR",174,0)
 S COLDASH="----------- ^------------------- ^-----   ^--- ^------ ^----------- ^--- ^---------"
"RTN","RCTCSJR",175,0)
 S (CHDR,CDSH,CWID)=""
"RTN","RCTCSJR",176,0)
 I RPTTYP=1 S CWID=COLWIDTH1,CHDR=$S(EXCEL:COLHDRS,1:$TR(COLHDRS,"^","")),CDSH=$S(EXCEL:COLDASH,1:$TR(COLDASH,"^",""))
"RTN","RCTCSJR",177,0)
 I RPTTYP=2 F PC=2,1,3:1:8 D COLHDR
"RTN","RCTCSJR",178,0)
 I RPTTYP=3 F PC=6,1:1:5,7,8 D COLHDR
"RTN","RCTCSJR",179,0)
 Q
"RTN","RCTCSJR",180,0)
PROMPTS S U="^"
"RTN","RCTCSJR",181,0)
 S STOP=0,PROMPT="*** DEBT REFERRAL REJECT REPORT ***"
"RTN","RCTCSJR",182,0)
 S DTFRMTO=$$DTFRMTO(PROMPT) I 'DTFRMTO S (STOP,POP)=1 Q
"RTN","RCTCSJR",183,0)
 ;
"RTN","RCTCSJR",184,0)
 S PROMPT="Group Error Codes:  Brief or Detail"
"RTN","RCTCSJR",185,0)
 S DIR(0)="SB^B:Brief;D:Detail"
"RTN","RCTCSJR",186,0)
 S GROUPBD=$$SELECT(PROMPT,"B") I "BD"'[GROUPBD S (STOP,POP)=1 Q
"RTN","RCTCSJR",187,0)
 ;
"RTN","RCTCSJR",188,0)
 S SET="S^1:Bill Number;2:Debtor Name;3:CS Reject Date"
"RTN","RCTCSJR",189,0)
 S RPTTYP=$$RPTTYP("Select One of the Following:",SET) I 'RPTTYP S (STOP,POP)=1 Q
"RTN","RCTCSJR",190,0)
 ;
"RTN","RCTCSJR",191,0)
 S PROMPT="Include Only: AITC, DMC, TREASURY or 'ALL'"
"RTN","RCTCSJR",192,0)
 S DIR(0)="SB^A:AITC;D:DMC;T:TREASURY;ALL:ALL",DIR("L")=PROMPT
"RTN","RCTCSJR",193,0)
 S INCLUDE=$$SELECT(PROMPT,"ALL") I "ADT"'[$E(INCLUDE) S (STOP,POP)=1 Q
"RTN","RCTCSJR",194,0)
 ;
"RTN","RCTCSJR",195,0)
 S PROMPT="Sort ASCENDING or DESCENDING",DIR(0)="SB^A:ASCENDING;D:DESCENDING"
"RTN","RCTCSJR",196,0)
 S DIR("L")=PROMPT
"RTN","RCTCSJR",197,0)
 S ASCDES=$$SELECT(PROMPT,"A") I "AD"'[ASCDES S (STOP,POP)=1 Q
"RTN","RCTCSJR",198,0)
 ;
"RTN","RCTCSJR",199,0)
 S EXCEL=0
"RTN","RCTCSJR",200,0)
 I GROUPBD="B" D
"RTN","RCTCSJR",201,0)
 . S PROMPT="CAPTURE Report data to an Excel Document"
"RTN","RCTCSJR",202,0)
 . S DIR(0)="Y",DIR("?")="^D HEXC^RCTCSJR"
"RTN","RCTCSJR",203,0)
 . S EXCEL=$$SELECT(PROMPT,"NO") I "01"'[EXCEL S (POP,STOP)=1 Q
"RTN","RCTCSJR",204,0)
 I EXCEL=1 D EXCMSG^RCTCSJR ; Display Excel display message
"RTN","RCTCSJR",205,0)
 ; 
"RTN","RCTCSJR",206,0)
 K IOP,IO("Q") S %ZIS="MQ",%ZIS("B")="" D ^%ZIS I POP S STOP=1 Q
"RTN","RCTCSJR",207,0)
 I $D(IO("Q")) D  Q
"RTN","RCTCSJR",208,0)
 .S ZTSAVE("DEBTOR")="",ZTSAVE("DTFRMTO")="",ZTSAVE("EXCEL")="",ZTSAVE("PROMPT")="",ZTSAVE("DASH")="",ZTSAVE("BLNKS")="",ZTSAVE("DATAITMS")="",ZTSAVE("RPTITEMS")=""
"RTN","RCTCSJR",209,0)
 .S ZTSAVE("GROUPBD")="",ZTSAVE("RPTTYP")="",ZTSAVE("INCLUDE")="",ZTSAVE("ASCDES")="",ZTSAVE("CHDR")="",ZTSAVE("CDSH")="",ZTSAVE("ZTASK")=""
"RTN","RCTCSJR",210,0)
 .S ZTRTN="QRPT^RCTCSJR",ZTDESC="CROSS-SERVICING BILL REPORT"
"RTN","RCTCSJR",211,0)
 .D ^%ZTLOAD,^%ZISC S (STOP,POP)=1
"RTN","RCTCSJR",212,0)
 .I $G(ZTSK) W !!,"Report compilation has started with task# ",ZTSK,".",! S DIR(0)="E" D ^DIR K DIR
"RTN","RCTCSJR",213,0)
 .Q
"RTN","RCTCSJR",214,0)
 Q  ; PROMPTS
"RTN","RCTCSJR",215,0)
 ;
"RTN","RCTCSJR",216,0)
SELECT(PROMPT,DEFAULT) ; prompts for a selection
"RTN","RCTCSJR",217,0)
 ;INPUT:
"RTN","RCTCSJR",218,0)
 ;   PROMPT - Message to display prior to prompting for dates
"RTN","RCTCSJR",219,0)
 ;OUTPUT:
"RTN","RCTCSJR",220,0)
 ;    1^BEGDT^ENDDT - Data found
"RTN","RCTCSJR",221,0)
 ;    0             - User up arrowed or timed out
"RTN","RCTCSJR",222,0)
 N Y,X,DTOUT,OUT,DIRUT,DUOUT,DIROUT
"RTN","RCTCSJR",223,0)
 S OUT=0
"RTN","RCTCSJR",224,0)
 W !
"RTN","RCTCSJR",225,0)
 S DIR("A")=PROMPT,DIR("B")=DEFAULT
"RTN","RCTCSJR",226,0)
 D ^DIR K DIR
"RTN","RCTCSJR",227,0)
 ;Quit if user time out or didn't enter valid date
"RTN","RCTCSJR",228,0)
 Q:Y<0 OUT
"RTN","RCTCSJR",229,0)
 Q Y
"RTN","RCTCSJR",230,0)
 ;
"RTN","RCTCSJR",231,0)
RPTTYP(PROMPT,SET) ;PRINT CROSS-SERVICING REPORT; print cross-servicing report, prints sorted individual bills that make up a cross-servicing account
"RTN","RCTCSJR",232,0)
 N DIC,ZTSAVE,ZTDESC,ZTRTN,RCSORT
"RTN","RCTCSJR",233,0)
 S OUT=0
"RTN","RCTCSJR",234,0)
 W !
"RTN","RCTCSJR",235,0)
 S DIR(0)=SET ;"S^1:Bill Number;2:Debtor Name;3:CS Reject Date"
"RTN","RCTCSJR",236,0)
 S DIR("A")="Sort by",DIR("B")=1 D ^DIR K DIR
"RTN","RCTCSJR",237,0)
 Q:Y<0 OUT
"RTN","RCTCSJR",238,0)
 Q Y
"RTN","RCTCSJR",239,0)
 ;
"RTN","RCTCSJR",240,0)
DTFRMTO(PROMPT) ;Get from and to dates
"RTN","RCTCSJR",241,0)
 ;INPUT:
"RTN","RCTCSJR",242,0)
 ;   PROMPT - Message to display prior to prompting for dates
"RTN","RCTCSJR",243,0)
 ;OUTPUT:
"RTN","RCTCSJR",244,0)
 ;    1^BEGDT^ENDDT - Data found
"RTN","RCTCSJR",245,0)
 ;    0             - User up arrowed or timed out
"RTN","RCTCSJR",246,0)
 ;
"RTN","RCTCSJR",247,0)
 N %DT,Y,X,BEGDT,ENDDT,DTOUT,OUT,DIRUT,DUOUT,DIROUT
"RTN","RCTCSJR",248,0)
 S OUT=0
"RTN","RCTCSJR",249,0)
 W !,$G(PROMPT)
"RTN","RCTCSJR",250,0)
 S %DT="AEX",%DT("A")="Date Range: FROM: " ;Enter Beginning Date: "
"RTN","RCTCSJR",251,0)
 S %DT("B")="T-7"
"RTN","RCTCSJR",252,0)
 W !
"RTN","RCTCSJR",253,0)
 D ^%DT K %DT
"RTN","RCTCSJR",254,0)
 Q:Y<0 OUT  ;Quit if user time out or didn't enter valid date
"RTN","RCTCSJR",255,0)
 S DTFROM=+Y
"RTN","RCTCSJR",256,0)
 S %DT="AEX"
"RTN","RCTCSJR",257,0)
 S %DT("A")="              TO:   ",%DT("B")="T" ;"TODAY"
"RTN","RCTCSJR",258,0)
 D ^%DT K %DT
"RTN","RCTCSJR",259,0)
 ;Quit if user time out or didn't enter valid date
"RTN","RCTCSJR",260,0)
 Q:Y<0 OUT
"RTN","RCTCSJR",261,0)
 S DTTO=+Y,OUT=1_U_DTFROM_U_DTTO
"RTN","RCTCSJR",262,0)
 ;Switch dates if Begin Date is more recent than End Date
"RTN","RCTCSJR",263,0)
 S:DTFROM>DTTO OUT=1_U_DTTO_U_DTFROM
"RTN","RCTCSJR",264,0)
 Q OUT
"RTN","RCTCSJR",265,0)
 ;
"RTN","RCTCSJR",266,0)
HEXC ; - 'Do you want to capture data to EXCEL' prompt
"RTN","RCTCSJR",267,0)
 W !!,"      Enter:  'Y'   -  To capture detail report data to transfer",!,"                        to an Excel document"
"RTN","RCTCSJR",268,0)
 W !,"              '<CR>' -  To skip this option",!,"              '^'    -  To quit this option"
"RTN","RCTCSJR",269,0)
 Q
"RTN","RCTCSJR",270,0)
 ;
"RTN","RCTCSJR",271,0)
EXCMSG ; - Displays the message about capturing to an Excel file format
"RTN","RCTCSJR",272,0)
 ;
"RTN","RCTCSJR",273,0)
 W !!?5,"To capture as an Excel format, it is recommended that you queue this"
"RTN","RCTCSJR",274,0)
 W !?5,"report to a spool device with margins of 256 and page length of 99999"
"RTN","RCTCSJR",275,0)
 W !?5,"(e.g. 0;256;99999). This should help avoid wrapping problems."
"RTN","RCTCSJR",276,0)
 W !!?5,"Another method would be to set up your terminal to capture the detail"
"RTN","RCTCSJR",277,0)
 W !?5,"report data. On some terminals, this can be done by invoking 'Logging'"
"RTN","RCTCSJR",278,0)
 W !?5,"or clicking on the 'Tools' menu above, then click on 'Capture Incoming "
"RTN","RCTCSJR",279,0)
 W !?5,"Data' to save to Desktop. To avoid undesired wrapping of the data saved"
"RTN","RCTCSJR",280,0)
 W !?5,"to the file, change the DISPLAY screen width size to 132 and you can"
"RTN","RCTCSJR",281,0)
 W !?5,"enter '0;256;99999' at the 'DEVICE:' prompt.",!
"RTN","RCTCSJR",282,0)
 Q
"RTN","RCTCSJR",283,0)
 ; ========================================================================
"RTN","RCTCSP1")
0^12^B168089833^B174226266
"RTN","RCTCSP1",1,0)
RCTCSP1 ;ALBANY/BDB-CROSS-SERVICING TRANSMISSION ;03/15/14 3:34 PM
"RTN","RCTCSP1",2,0)
 ;;4.5;Accounts Receivable;**301,331,315**;Mar 20, 1995;Build 67
"RTN","RCTCSP1",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSP1",4,0)
 ;
"RTN","RCTCSP1",5,0)
 ;PRCA*4.5*331 Modify code to ensure that the debtor address info
"RTN","RCTCSP1",6,0)
 ;             is correct on transmission of foreign veterans 
"RTN","RCTCSP1",7,0)
 ;             debtor/bills to Treasury.
"RTN","RCTCSP1",8,0)
 Q
"RTN","RCTCSP1",9,0)
 ;
"RTN","RCTCSP1",10,0)
BILLREP ;Cross-servicing bill report, prints individual bills that make up a cross-servicing account
"RTN","RCTCSP1",11,0)
 N DIC,DEBTOR,ZTSAVE,ZTDESC,ZTRTN,POP,DTFRMTO,PROMPT,EXCEL
"RTN","RCTCSP1",12,0)
 K ^TMP("RCTCSP1",$J)
"RTN","RCTCSP1",13,0)
 S DIC=340,DIC(0)="AEQM",DIC("S")="I $D(^RCD(340,""TCSP"",+Y))" D ^DIC
"RTN","RCTCSP1",14,0)
 Q:Y<1  S DEBTOR=+Y
"RTN","RCTCSP1",15,0)
 S DTFRMTO=$$DTFRMTO^RCTCSP2 Q:'DTFRMTO  ;Get date range as per PRCA*4.5*315
"RTN","RCTCSP1",16,0)
 S EXCEL=0,PROMPT="CAPTURE Report data to an Excel Document",DIR(0)="Y",DIR("?")="^D HEXC^RCTCSJR"
"RTN","RCTCSP1",17,0)
 S EXCEL=$$SELECT^RCTCSJR(PROMPT,"NO") I "01"'[EXCEL S STOP=1 Q
"RTN","RCTCSP1",18,0)
 I EXCEL=1 D EXCMSG^RCTCSJR ; Display Excel display message
"RTN","RCTCSP1",19,0)
 K IOP,IO("Q") S %ZIS="MQ",%ZIS("B")="" D ^%ZIS G:POP BILLREPQ S IOP=ION_";"_IOM_";"_IOSL
"RTN","RCTCSP1",20,0)
 I $D(IO("Q")) D  G BILLREPQ
"RTN","RCTCSP1",21,0)
 .S ZTSAVE("DEBTOR")="",ZTSAVE("DTFRMTO")="",ZTSAVE("EXCEL")=""
"RTN","RCTCSP1",22,0)
 .S ZTRTN="BILLREPP^RCTCSP1",ZTDESC="CROSS-SERVICING BILL REPORT"
"RTN","RCTCSP1",23,0)
 .D ^%ZTLOAD,HOME^%ZIS
"RTN","RCTCSP1",24,0)
 .I $G(ZTSK) W !!,"Report compilation has started with task# ",ZTSK,".",! S DIR(0)="E" D ^DIR K DIR
"RTN","RCTCSP1",25,0)
 .Q
"RTN","RCTCSP1",26,0)
 ;
"RTN","RCTCSP1",27,0)
BILLREPP ;Call to build array of bills referred
"RTN","RCTCSP1",28,0)
 U IO
"RTN","RCTCSP1",29,0)
 N BILL,B7,B14,B15,B16,D4,FND,BAMT,TAMT,DIRUT,TNM,TID,TDT,DASH,CSTAT,PAGE,DASH,TMP,I,DATE,DTFRM,DTTO,DATDATE
"RTN","RCTCSP1",30,0)
 K ^TMP("RCTCSP1",$J)
"RTN","RCTCSP1",31,0)
 S DASH="",$P(DASH,"-",78)=""  ;(as per PRCA*4.5*315)
"RTN","RCTCSP1",32,0)
 S (DATE,DTFRM)=$$FMADD^XLFDT(+$P(DTFRMTO,U,2)),DTTO=$P(DTFRMTO,U,3),CURDT=0
"RTN","RCTCSP1",33,0)
 S (BAMT,TAMT,BILL,PAGE)=0
"RTN","RCTCSP1",34,0)
 ; rewritten to sort by "TCSP" (#151 date referred to TCSP) not the "AB" xref... PRCA*4.5*315 (TV8)
"RTN","RCTCSP1",35,0)
 F  S BILL=$O(^PRCA(430,"TCSP",BILL)) Q:BILL=""!($D(DIRUT))  D
"RTN","RCTCSP1",36,0)
 .Q:$P($G(^PRCA(430,BILL,0)),U,9)'=DEBTOR
"RTN","RCTCSP1",37,0)
 .Q:'+$G(^PRCA(430,BILL,15))
"RTN","RCTCSP1",38,0)
 .S DATDATE=$P($G(^PRCA(430,BILL,15)),U) Q:DATDATE<DTFRM!(DATDATE>DTTO)
"RTN","RCTCSP1",39,0)
 .S B7=$G(^PRCA(430,BILL,7))
"RTN","RCTCSP1",40,0)
 .S BAMT=0 F I=1:1:5 S BAMT=BAMT+$P(B7,U,I)
"RTN","RCTCSP1",41,0)
 .S TAMT=TAMT+BAMT
"RTN","RCTCSP1",42,0)
 .S ^TMP("RCTCSP1",$J,DEBTOR,BILL)=BAMT
"RTN","RCTCSP1",43,0)
 D BILLREPH
"RTN","RCTCSP1",44,0)
 S DEBTOR="" F  S DEBTOR=$O(^TMP("RCTCSP1",$J,DEBTOR)) Q:'DEBTOR!($D(DIRUT))  D
"RTN","RCTCSP1",45,0)
 . S BILL=0 F  S BILL=$O(^TMP("RCTCSP1",$J,DEBTOR,BILL)) Q:'BILL  D
"RTN","RCTCSP1",46,0)
 ..Q:'+$G(^PRCA(430,BILL,15))
"RTN","RCTCSP1",47,0)
 ..S FND=1 W !,$P(^PRCA(430,BILL,0),U) S CSTAT=$P(^(0),U,8),B7=$G(^(7)),B15=$G(^(15)),B16=$G(^(16))
"RTN","RCTCSP1",48,0)
 ..I 'EXCEL W ?12,$P(^PRCA(430.3,CSTAT,0),U,2)
"RTN","RCTCSP1",49,0)
 ..I EXCEL W U_$P(^PRCA(430.3,CSTAT,0),U,2)
"RTN","RCTCSP1",50,0)
 ..I 'EXCEL W ?15
"RTN","RCTCSP1",51,0)
 ..I EXCEL W U
"RTN","RCTCSP1",52,0)
 ..W $J($P(B16,U,9),8,2)
"RTN","RCTCSP1",53,0)
 ..S BAMT=^TMP("RCTCSP1",$J,DEBTOR,BILL)
"RTN","RCTCSP1",54,0)
 ..I 'EXCEL W ?25
"RTN","RCTCSP1",55,0)
 ..I EXCEL W U
"RTN","RCTCSP1",56,0)
 ..W $J(BAMT,8,2)
"RTN","RCTCSP1",57,0)
 ..I 'EXCEL W $J($P(B7,U,1),9,2),$J($P(B7,U,2),7,2),$J($P(B7,U,3),8,2),$J($P(B7,U,4),8,2)  ;(as per PRCA*4.5*315)
"RTN","RCTCSP1",58,0)
 ..I EXCEL W $J($P(B7,U,1),8,2)_U_$J($P(B7,U,2),7,2)_U_$J($P(B7,U,3),7,2)_U_$J($P(B7,U,4),8,2)
"RTN","RCTCSP1",59,0)
 ..S TMP=$$FMTE^XLFDT($P(B15,U,1),"2Z")  ;Format date to n/n/nn  (as per PRCA*4.5*315)
"RTN","RCTCSP1",60,0)
 ..I 'EXCEL W ?67,TMP  ;$P(TMP,", ",1)_","_$P(TMP,", ",2)  ;
"RTN","RCTCSP1",61,0)
 ..I EXCEL W U_TMP
"RTN","RCTCSP1",62,0)
 ..;check for end of page here, if necessary form feed and print header
"RTN","RCTCSP1",63,0)
 ..I ($Y+3)>IOSL D
"RTN","RCTCSP1",64,0)
 ...I $E(IOST,1,2)="C-" S DIR(0)="E" K DIRUT D ^DIR Q:$D(DIRUT)
"RTN","RCTCSP1",65,0)
 ...D BILLREPH
"RTN","RCTCSP1",66,0)
 I $E(IOST,1,2)="C-" R !!,"END OF REPORT...PRESS RETURN TO CONTINUE",X:DTIME W @IOF
"RTN","RCTCSP1",67,0)
 D:'$D(ZTQUEUED) ^%ZISC
"RTN","RCTCSP1",68,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","RCTCSP1",69,0)
 K ^TMP("RCTCSP1",$J)
"RTN","RCTCSP1",70,0)
 K IOP,%ZIS,ZTQUEUED
"RTN","RCTCSP1",71,0)
BILLREPQ Q
"RTN","RCTCSP1",72,0)
 ;
"RTN","RCTCSP1",73,0)
BILLREPH ;header for cross-servicing bill report
"RTN","RCTCSP1",74,0)
 W @IOF
"RTN","RCTCSP1",75,0)
 S PAGE=PAGE+1
"RTN","RCTCSP1",76,0)
 I 'EXCEL W "PAGE "_PAGE,?24,"CROSS-SERVICING BILL REPORT",?60,$$FMTE^XLFDT(DT,"2Z"),!,DASH
"RTN","RCTCSP1",77,0)
 I EXCEL W "PAGE "_PAGE_U_"CROSS-SERVICING BILL REPORT"_U_U_$$FMTE^XLFDT(DT,"2Z")
"RTN","RCTCSP1",78,0)
 N RCHDR,RCSSN
"RTN","RCTCSP1",79,0)
 S RCHDR=$$ACCNTHDR^RCDPAPLM(DEBTOR),RCSSN=$S($P(RCHDR,U,2)["P":$E($P(RCHDR,U,2),7,11),1:$E($P(RCHDR,U,2),6,9))  ;Pseudo SSN shouldn't be allowed but we allowed for it to print
"RTN","RCTCSP1",80,0)
 I 'EXCEL D  Q 
"RTN","RCTCSP1",81,0)
 . W !!,"DEBTOR: ",$E($P(RCHDR,U,1),1,18),?22,"SSN: ",RCSSN,?45,"CURRENT CS DEBT: ",$J(TAMT,8,2),!,DASH
"RTN","RCTCSP1",82,0)
 . W !,"BILL NO.",?12,"ST",?15,"ORIG AMT",?25,"CURR AMT",?38,"PRIN",?46,"INT",?52,"ADMIN",?60,"COURT",?67,"CS REF DT" ;(as per PRCA*4.5*315)
"RTN","RCTCSP1",83,0)
 . W !,"---- ---",?12,"--",?15,"---- ---",?25,"---- ---",?38,"----",?46,"---",?52,"-----",?60,"-----",?67,"-- -------"
"RTN","RCTCSP1",84,0)
 W !,"DEBTOR: "_$E($P(RCHDR,U,1),1,18)_U_U_"SSN: "_RCSSN_U_U_U_"CURRENT CS DEBT: "_$J(TAMT,8,2)
"RTN","RCTCSP1",85,0)
 W !,"BILL NO."_U_"ST"_U_"ORIG AMT"_U_"CURR AMT"_U_"PRIN"_U_"INT"_U_"ADMIN"_U_"COURT"_U_"CS REF DATE"
"RTN","RCTCSP1",86,0)
 Q
"RTN","RCTCSP1",87,0)
 ;
"RTN","RCTCSP1",88,0)
CSRPRT ;Print Cross-Servicing Report, prints sorted individual bills that make up a cross-servicing account
"RTN","RCTCSP1",89,0)
 ;
"RTN","RCTCSP1",90,0)
 K ^TMP("RCTCSP1",$J)
"RTN","RCTCSP1",91,0)
 N DIC,RCSORT,PAGE,DASH,DTOUT,DIRUT,DUOUT,DIROUT,RCIEN,RCDEBTOR,RCREFDT,RCSSN,RCORIG,RCCAMT,RCREFDT,RCBILL,ITEM,DBTR,SDT,SSN,NCIEN,TERMDIG
"RTN","RCTCSP1",92,0)
 S PAGE=0,DASH="",$P(DASH,"-",81)=""
"RTN","RCTCSP1",93,0)
 W !
"RTN","RCTCSP1",94,0)
 S DIR(0)="S^1:Bill Number;2:Debtor Name;3:CS Referred Date",DIR("A")="Sort by" D ^DIR K DIR
"RTN","RCTCSP1",95,0)
 S RCSORT=Y Q:($D(DTOUT)!$D(DUOUT)!$D(DIROUT))
"RTN","RCTCSP1",96,0)
 ; The following sections were rewritten to eliminate using ^DIP - (as per PRCA*4.5*315 reformat dates and SSN)
"RTN","RCTCSP1",97,0)
 S DTFRMTO=$$DTFRMTO^RCTCSP2 Q:'DTFRMTO  ;Get date range as per PRCA*4.5*315
"RTN","RCTCSP1",98,0)
 S (DATE,DTFRM)=$$FMADD^XLFDT(+$P(DTFRMTO,U,2)),DTTO=$P(DTFRMTO,U,3),CURDT=0
"RTN","RCTCSP1",99,0)
 S EXCEL=0,PROMPT="CAPTURE Report data to an Excel Document",DIR(0)="Y",DIR("?")="^D HEXC^RCTCSJR"
"RTN","RCTCSP1",100,0)
 S EXCEL=$$SELECT^RCTCSJR(PROMPT,"NO") I "01"'[EXCEL S STOP=1 Q
"RTN","RCTCSP1",101,0)
 I EXCEL=1 D EXCMSG^RCTCSJR ; Display Excel display message
"RTN","RCTCSP1",102,0)
 K IOP,IO("Q") S %ZIS="MQ",%ZIS("B")="" D ^%ZIS G:POP CSRPRTR S IOP=ION_";"_IOM_";"_IOSL
"RTN","RCTCSP1",103,0)
 I $D(IO("Q")) D  G BILLREPQ
"RTN","RCTCSP1",104,0)
 .S ZTSAVE("RCSORT")="",ZTSAVE("DTFRMTO")="",ZTSAVE("EXCEL")="",ZTSAVE("PROMPT")=""
"RTN","RCTCSP1",105,0)
 .S ZTRTN="CSRPRTR^RCTCSP1",ZTDESC="PRINT CROSS-SERVICING REPORT"
"RTN","RCTCSP1",106,0)
 .D ^%ZTLOAD,HOME^%ZIS
"RTN","RCTCSP1",107,0)
 .I $G(ZTSK) W !!,"Report compilation has started with task# ",ZTSK,".",! S DIR(0)="E" D ^DIR K DIR
"RTN","RCTCSP1",108,0)
 .Q
"RTN","RCTCSP1",109,0)
CSRPRTR ; 
"RTN","RCTCSP1",110,0)
 I RCSORT=1 D
"RTN","RCTCSP1",111,0)
 . D CSRPRTH1^RCTCSP1A
"RTN","RCTCSP1",112,0)
 . S (DATE,DTFRM)=$$FMADD^XLFDT(+$P(DTFRMTO,U,2)),DTTO=$P(DTFRMTO,U,3),CURDT=0
"RTN","RCTCSP1",113,0)
 . S RCIEN="" F  S RCIEN=$O(^PRCA(430,"TCSP",RCIEN)) Q:RCIEN=""  D
"RTN","RCTCSP1",114,0)
 .. Q:'$D(^PRCA(430,RCIEN,15))   ;cross servicing data fields
"RTN","RCTCSP1",115,0)
 ..Q:$P($G(^PRCA(430,RCIEN,15)),U)<DTFRM!($P($G(^PRCA(430,RCIEN,15)),U)>DTTO)
"RTN","RCTCSP1",116,0)
 ..K LIST,MSG,RCLIST D GETS^DIQ(430,RCIEN_",",".01;9;121,141,161;169;151;11","IE","LIST","MSG") S RCLIST=$NA(LIST(430,RCIEN_","))
"RTN","RCTCSP1",117,0)
 ..;Q:$G(@RCLIST@(141,"E"))'=""   ;Date sent to TOP
"RTN","RCTCSP1",118,0)
 ..S SSN=$E($$SSN^RCFN01(@RCLIST@(9,"I")),6,9) S SSN=$S(SSN'="":SSN,1:"     "),TERMDIG=$E(@RCLIST@(9,"E"),1)_SSN
"RTN","RCTCSP1",119,0)
 ..I EXCEL D  Q 
"RTN","RCTCSP1",120,0)
 ...S ^TMP("RCTCSP1",$J,RCIEN,@RCLIST@(.01,"E"))=@RCLIST@(.01,"E")_U_$E(@RCLIST@(9,"E"),1,19)_U_TERMDIG_U_$J(@RCLIST@(169,"E"),8,2)_U_$$FMTE^XLFDT(@RCLIST@(151,"I"),"2Z")
"RTN","RCTCSP1",121,0)
 ...S ^TMP("RCTCSP1",$J,RCIEN,@RCLIST@(.01,"E"))=^TMP("RCTCSP1",$J,RCIEN,@RCLIST@(.01,"E"))_U_$J(@RCLIST@(11,"E"),8,2)
"RTN","RCTCSP1",122,0)
 ...Q
"RTN","RCTCSP1",123,0)
 ..S ^TMP("RCTCSP1",$J,RCIEN,@RCLIST@(.01,"E"))=@RCLIST@(.01,"E")_U_$E(@RCLIST@(9,"E"),1,19)_U_SSN_U_$J(@RCLIST@(169,"E"),8,2)_U_$$FMTE^XLFDT(@RCLIST@(151,"I"),"2Z")
"RTN","RCTCSP1",124,0)
 ..S ^TMP("RCTCSP1",$J,RCIEN,@RCLIST@(.01,"E"))=^TMP("RCTCSP1",$J,RCIEN,@RCLIST@(.01,"E"))_U_$J(@RCLIST@(11,"E"),8,2)
"RTN","RCTCSP1",125,0)
 .;
"RTN","RCTCSP1",126,0)
 .; print report for sort 1
"RTN","RCTCSP1",127,0)
 .S (NCIEN,ITEM)="" F  S NCIEN=$O(^TMP("RCTCSP1",$J,NCIEN)) Q:NCIEN=""!$D(DIRUT)  F  S ITEM=$O(^TMP("RCTCSP1",$J,NCIEN,ITEM)) Q:ITEM=""!$D(DIRUT)  D  Q:$D(DIRUT)
"RTN","RCTCSP1",128,0)
 ..I EXCEL W !,$P(^TMP("RCTCSP1",$J,NCIEN,ITEM),U)_U_$P(^TMP("RCTCSP1",$J,NCIEN,ITEM),U,2)_U_$P(^TMP("RCTCSP1",$J,NCIEN,ITEM),U,3)
"RTN","RCTCSP1",129,0)
 ..I EXCEL W U_$P(^TMP("RCTCSP1",$J,NCIEN,ITEM),U,4)_U_$P(^TMP("RCTCSP1",$J,NCIEN,ITEM),U,5)_U_$P(^TMP("RCTCSP1",$J,NCIEN,ITEM),U,6)
"RTN","RCTCSP1",130,0)
 ..I EXCEL Q
"RTN","RCTCSP1",131,0)
 ..; non-Excel output
"RTN","RCTCSP1",132,0)
 ..W !,$P(^TMP("RCTCSP1",$J,NCIEN,ITEM),U),?14,$P(^TMP("RCTCSP1",$J,NCIEN,ITEM),U,2),?35,$P(^TMP("RCTCSP1",$J,NCIEN,ITEM),U,3),?43
"RTN","RCTCSP1",133,0)
 ..W $P(^TMP("RCTCSP1",$J,NCIEN,ITEM),U,4),?58,$P(^TMP("RCTCSP1",$J,NCIEN,ITEM),U,5),?68,$P(^TMP("RCTCSP1",$J,NCIEN,ITEM),U,6)
"RTN","RCTCSP1",134,0)
 ..; page break check
"RTN","RCTCSP1",135,0)
 ..I ($Y+3)>IOSL D
"RTN","RCTCSP1",136,0)
 ...I $E(IOST,1,2)="C-" S DIR(0)="E" K DIRUT D ^DIR K DIR Q:$D(DIRUT)
"RTN","RCTCSP1",137,0)
 ...D CSRPRTH1^RCTCSP1A
"RTN","RCTCSP1",138,0)
 ...Q
"RTN","RCTCSP1",139,0)
 ..Q
"RTN","RCTCSP1",140,0)
 .Q
"RTN","RCTCSP1",141,0)
 ;
"RTN","RCTCSP1",142,0)
 I RCSORT=2 D
"RTN","RCTCSP1",143,0)
 . D CSRPRTH2^RCTCSP1A
"RTN","RCTCSP1",144,0)
 . S (DATE,DTFRM)=$$FMADD^XLFDT(+$P(DTFRMTO,U,2),-1),DTTO=$P(DTFRMTO,U,3),CURDT=0
"RTN","RCTCSP1",145,0)
 . S RCIEN="" F  S RCIEN=$O(^PRCA(430,"TCSP",RCIEN)) Q:RCIEN=""  D
"RTN","RCTCSP1",146,0)
 ..Q:'$D(^PRCA(430,RCIEN,15))   ;cross servicing data fields
"RTN","RCTCSP1",147,0)
 ..Q:$P($G(^PRCA(430,RCIEN,15)),U)<DTFRM!($P($G(^PRCA(430,RCIEN,15)),U)>DTTO)
"RTN","RCTCSP1",148,0)
 ..K LIST,MSG,RCLIST D GETS^DIQ(430,RCIEN_",",".01;9;121,141,161;169;151;11","IE","LIST","MSG") S RCLIST=$NA(LIST(430,RCIEN_","))
"RTN","RCTCSP1",149,0)
 ..;Q:$G(@RCLIST@(121,"E"))'=""   ;Date sent to DMC
"RTN","RCTCSP1",150,0)
 ..;Q:$G(@RCLIST@(141,"E"))'=""   ;Date sent to TOP
"RTN","RCTCSP1",151,0)
 ..S SSN=$E($$SSN^RCFN01(@RCLIST@(9,"I")),6,9) S SSN=$S(SSN'="":SSN,1:"     "),TERMDIG=$E(@RCLIST@(9,"E"),1)_SSN
"RTN","RCTCSP1",152,0)
 ..I EXCEL D  Q
"RTN","RCTCSP1",153,0)
 ...S ^TMP("RCTCSP1",$J,@RCLIST@(9,"E"),RCIEN)=$E(@RCLIST@(9,"E"),1,19)_U_@RCLIST@(.01,"E")_U_TERMDIG_U_$J(@RCLIST@(169,"E"),8,2)_U_$$FMTE^XLFDT(@RCLIST@(151,"I"),"2Z")_U_$J(@RCLIST@(11,"E"),8,2) Q
"RTN","RCTCSP1",154,0)
 ..S ^TMP("RCTCSP1",$J,@RCLIST@(9,"E"),RCIEN)=$E(@RCLIST@(9,"E"),1,19)_U_@RCLIST@(.01,"E")_U_SSN_U_$J(@RCLIST@(169,"E"),8,2)_U_$$FMTE^XLFDT(@RCLIST@(151,"I"),"2Z")_U_$J(@RCLIST@(11,"E"),8,2)
"RTN","RCTCSP1",155,0)
 .;
"RTN","RCTCSP1",156,0)
 .; print report for sort 2
"RTN","RCTCSP1",157,0)
 .S (DBTR,NCIEN)="" F  S DBTR=$O(^TMP("RCTCSP1",$J,DBTR)) Q:DBTR=""!$D(DIRUT)  F  S NCIEN=$O(^TMP("RCTCSP1",$J,DBTR,NCIEN)) Q:NCIEN=""!$D(DIRUT)  D  Q:$D(DIRUT)
"RTN","RCTCSP1",158,0)
 ..I EXCEL W !,$P(^TMP("RCTCSP1",$J,DBTR,NCIEN),U,1,4)_U_$P(^TMP("RCTCSP1",$J,DBTR,NCIEN),U,5)_U_$P(^TMP("RCTCSP1",$J,DBTR,NCIEN),U,6)
"RTN","RCTCSP1",159,0)
 ..I EXCEL Q
"RTN","RCTCSP1",160,0)
 ..; non-Excel output
"RTN","RCTCSP1",161,0)
 ..W !,$P(^TMP("RCTCSP1",$J,DBTR,NCIEN),U),?21,$P(^TMP("RCTCSP1",$J,DBTR,NCIEN),U,2),?35,$P(^TMP("RCTCSP1",$J,DBTR,NCIEN),U,3),?43,$P(^TMP("RCTCSP1",$J,DBTR,NCIEN),U,4)
"RTN","RCTCSP1",162,0)
 ..W ?58,$P(^TMP("RCTCSP1",$J,DBTR,NCIEN),U,5),?68,$P(^TMP("RCTCSP1",$J,DBTR,NCIEN),U,6)
"RTN","RCTCSP1",163,0)
 ..; page break check
"RTN","RCTCSP1",164,0)
 ..I ($Y+3)>IOSL D
"RTN","RCTCSP1",165,0)
 ...I $E(IOST,1,2)="C-" S DIR(0)="E" K DIRUT D ^DIR K DIR Q:$D(DIRUT)
"RTN","RCTCSP1",166,0)
 ...D CSRPRTH2^RCTCSP1A
"RTN","RCTCSP1",167,0)
 ...Q
"RTN","RCTCSP1",168,0)
 ..Q
"RTN","RCTCSP1",169,0)
 .Q
"RTN","RCTCSP1",170,0)
 ;
"RTN","RCTCSP1",171,0)
 I RCSORT=3 D
"RTN","RCTCSP1",172,0)
 .D CSRPRTH3^RCTCSP1A
"RTN","RCTCSP1",173,0)
 .S (DATE,DTFRM)=$$FMADD^XLFDT(+$P(DTFRMTO,U,2),-1),DTTO=$P(DTFRMTO,U,3),CURDT=0
"RTN","RCTCSP1",174,0)
 .S RCIEN="" F  S RCIEN=$O(^PRCA(430,"TCSP",RCIEN)) Q:RCIEN=""  D
"RTN","RCTCSP1",175,0)
 ..Q:'$D(^PRCA(430,RCIEN,15))   ;cross servicing data fields
"RTN","RCTCSP1",176,0)
 ..Q:$P(^PRCA(430,RCIEN,15),U)<DTFRM!($P(^PRCA(430,RCIEN,15),U)>DTTO)
"RTN","RCTCSP1",177,0)
 ..K LIST,MSG,RCLIST D GETS^DIQ(430,RCIEN_",",".01;9;121,141,161;169;151;11","IE","LIST","MSG") S RCLIST=$NA(LIST(430,RCIEN_","))
"RTN","RCTCSP1",178,0)
 ..;Q:$G(@RCLIST@(121,"E"))'=""   ;Date sent to DMC
"RTN","RCTCSP1",179,0)
 ..;Q:$G(@RCLIST@(141,"E"))'=""   ;Date sent to TOP
"RTN","RCTCSP1",180,0)
 ..S SSN=$E($$SSN^RCFN01(@RCLIST@(9,"I")),6,9) S SSN=$S(SSN'="":SSN,1:"     "),TERMDIG=$E(@RCLIST@(9,"E"),1)_SSN
"RTN","RCTCSP1",181,0)
 ..I EXCEL S ^TMP("RCTCSP1",$J,@RCLIST@(151,"I"),RCIEN)=$$FMTE^XLFDT(@RCLIST@(151,"I"),"2Z")_U_$E(@RCLIST@(9,"E"),1,19)_U_@RCLIST@(.01,"E")_U_TERMDIG_U_$J(@RCLIST@(169,"E"),8,2)_U_$J(@RCLIST@(11,"E"),8,2)
"RTN","RCTCSP1",182,0)
 ..I 'EXCEL S ^TMP("RCTCSP1",$J,@RCLIST@(151,"I"),RCIEN)=$$FMTE^XLFDT(@RCLIST@(151,"I"),"2Z")_U_$E(@RCLIST@(9,"E"),1,19)_U_@RCLIST@(.01,"E")_U_SSN_U_$J(@RCLIST@(169,"E"),8,2)_U_$J(@RCLIST@(11,"E"),8,2)
"RTN","RCTCSP1",183,0)
 .;
"RTN","RCTCSP1",184,0)
 .; print report for sort 3
"RTN","RCTCSP1",185,0)
 .S (SDT,NCIEN)="" F  S SDT=$O(^TMP("RCTCSP1",$J,SDT)) Q:SDT=""!$D(DIRUT)  F  S NCIEN=$O(^TMP("RCTCSP1",$J,SDT,NCIEN)) Q:NCIEN=""!$D(DIRUT)  D  Q:$D(DIRUT)
"RTN","RCTCSP1",186,0)
 ..I EXCEL W !,$P(^TMP("RCTCSP1",$J,SDT,NCIEN),U)_U_$P(^TMP("RCTCSP1",$J,SDT,NCIEN),U,2)_U_$P(^TMP("RCTCSP1",$J,SDT,NCIEN),U,3)_U_$P(^TMP("RCTCSP1",$J,SDT,NCIEN),U,4)
"RTN","RCTCSP1",187,0)
 ..I EXCEL W U_$P(^TMP("RCTCSP1",$J,SDT,NCIEN),U,5)_U_$P(^TMP("RCTCSP1",$J,SDT,NCIEN),U,6)
"RTN","RCTCSP1",188,0)
 ..I EXCEL Q
"RTN","RCTCSP1",189,0)
 ..; non-Excel output
"RTN","RCTCSP1",190,0)
 ..W !,$P(^TMP("RCTCSP1",$J,SDT,NCIEN),U),?12,$P(^TMP("RCTCSP1",$J,SDT,NCIEN),U,2),?34,$P(^TMP("RCTCSP1",$J,SDT,NCIEN),U,3),?49
"RTN","RCTCSP1",191,0)
 ..W $P(^TMP("RCTCSP1",$J,SDT,NCIEN),U,4),?58,$P(^TMP("RCTCSP1",$J,SDT,NCIEN),U,5),?68,$P(^TMP("RCTCSP1",$J,SDT,NCIEN),U,6)
"RTN","RCTCSP1",192,0)
 ..; page break check
"RTN","RCTCSP1",193,0)
 ..I ($Y+3)>IOSL D
"RTN","RCTCSP1",194,0)
 ...I $E(IOST,1,2)="C-" S DIR(0)="E" K DIRUT D ^DIR K DIR Q:$D(DIRUT)
"RTN","RCTCSP1",195,0)
 ...D CSRPRTH3^RCTCSP1A
"RTN","RCTCSP1",196,0)
 ...Q
"RTN","RCTCSP1",197,0)
 ..Q
"RTN","RCTCSP1",198,0)
 .Q
"RTN","RCTCSP1",199,0)
 ;
"RTN","RCTCSP1",200,0)
 ;end of report
"RTN","RCTCSP1",201,0)
 I $E(IOST,1,2)="C-",'$D(DIRUT) R !!,"END OF REPORT...PRESS RETURN TO CONTINUE",X:DTIME W @IOF
"RTN","RCTCSP1",202,0)
 K ^TMP("RCTCSP1",$J)
"RTN","RCTCSP1",203,0)
 Q
"RTN","RCTCSP1",204,0)
 ;
"RTN","RCTCSP1",205,0)
REC5B ;Create record 5B for Treasury
"RTN","RCTCSP1",206,0)
 ;  trnnum     transaction number file #433 pass in
"RTN","RCTCSP1",207,0)
 ;  trntyp     transaction type pointer to 430.3
"RTN","RCTCSP1",208,0)
 ;  trntypa    aia transaction type  (aio: dmc agency internal offset, abal: decrease adjustment) 
"RTN","RCTCSP1",209,0)
 N REC,KNUM,DEBTNR,DEBTORNB,TAMOUNT,TAMTPBAL,TAMTIBAL,TAMTABAL,TAMTFBAL,TAMTCBAL,AMTRFRRD,TRNTYP,TRNTYPA,TRANSNB
"RTN","RCTCSP1",210,0)
 N AMTPBAL,AMTIBAL,AMTABAL,AMTFBAL,AMTCBAL,TRN3,TRNNUME
"RTN","RCTCSP1",211,0)
 S TRNTYPA="AIO"
"RTN","RCTCSP1",212,0)
 S REC="C5B"_ACTION_"3636001200"_"DM1D "_"L"
"RTN","RCTCSP1",213,0)
 S KNUM=$P($P(B0,U,1),"-",2)
"RTN","RCTCSP1",214,0)
 S DEBTNR=$E(SITE,1,3)_$$RJZF(KNUM,7)_$TR($J(BILL,20)," ",0),REC=REC_DEBTNR
"RTN","RCTCSP1",215,0)
 S DEBTORNB=$E(SITE,1,3)_$TR($J(DEBTOR,12)," ",0)
"RTN","RCTCSP1",216,0)
 S REC=REC_DEBTORNB
"RTN","RCTCSP1",217,0)
 S TRNTYP=$P($G(^PRCA(433,TRNNUM,1)),U,2) I ",35,73,74,"[TRNTYP S TRNTYPA="ABAL"
"RTN","RCTCSP1",218,0)
 S REC=REC_$$LJSF(TRNTYPA,9)
"RTN","RCTCSP1",219,0)
 S TRNNUME=$$RJZF(TRNNUM,10)
"RTN","RCTCSP1",220,0)
 S TRNNUME=$E(TRNNUME,5,10) ;max is 999999
"RTN","RCTCSP1",221,0)
 I TRNNUME="000000" S TRNNUME="000001" ;min is 1
"RTN","RCTCSP1",222,0)
 S REC=REC_$$RJZF(TRNNUME,10)
"RTN","RCTCSP1",223,0)
 S REC=REC_$$DATE8(DT)
"RTN","RCTCSP1",224,0)
 S TRANSNB=$E(SITE,1,3)_$TR($J(TRNNUM,12)," ",0)
"RTN","RCTCSP1",225,0)
 S REC=REC_TRANSNB
"RTN","RCTCSP1",226,0)
 S REC=REC_$$BLANK(9)
"RTN","RCTCSP1",227,0)
 S TRN3=$G(^PRCA(433,TRNNUM,3))
"RTN","RCTCSP1",228,0)
 S TAMTPBAL=$P(TRN3,U,1) ;transaction principle balance
"RTN","RCTCSP1",229,0)
 S TAMTIBAL=$P(TRN3,U,2) ;transaction interest balance
"RTN","RCTCSP1",230,0)
 S TAMTABAL=$P(TRN3,U,3) ;transaction administrative balance
"RTN","RCTCSP1",231,0)
 S TAMTFBAL=$P(TRN3,U,4) ;transaction marshal fee
"RTN","RCTCSP1",232,0)
 S TAMTCBAL=$P(TRN3,U,5) ;transaction court cost
"RTN","RCTCSP1",233,0)
 I (TAMTPBAL+TAMTIBAL+TAMTABAL+TAMTFBAL+TAMTCBAL)=0 S TAMTPBAL=TRNAMT
"RTN","RCTCSP1",234,0)
 S TAMOUNT=$$AMOUNT(TAMTPBAL,TRNTYP)
"RTN","RCTCSP1",235,0)
 S TAMOUNT=TAMOUNT_$$AMOUNT(TAMTIBAL,TRNTYP)
"RTN","RCTCSP1",236,0)
 S TAMOUNT=TAMOUNT_$$AMOUNT(TAMTABAL,TRNTYP)
"RTN","RCTCSP1",237,0)
 S TAMOUNT=TAMOUNT_$$AMOUNT(TAMTFBAL+TAMTCBAL,TRNTYP)
"RTN","RCTCSP1",238,0)
 S REC=REC_TAMOUNT
"RTN","RCTCSP1",239,0)
 S REC=REC_$$AMOUNT(TRNAMT,TRNTYP) ;315/DRF Make minus sign conditional on transaction
"RTN","RCTCSP1",240,0)
 S REC=REC_$$BLANK(450-$L(REC))
"RTN","RCTCSP1",241,0)
 S AMTPBAL=$P(B7,U,1) ;principle balance
"RTN","RCTCSP1",242,0)
 S AMTIBAL=$P(B7,U,2) ;interest balance
"RTN","RCTCSP1",243,0)
 S AMTABAL=$P(B7,U,3) ;administrative balance
"RTN","RCTCSP1",244,0)
 S AMTFBAL=$P(B7,U,4) ;marshal fee
"RTN","RCTCSP1",245,0)
 S AMTCBAL=$P(B7,U,5) ;court cost
"RTN","RCTCSP1",246,0)
 S AMTRFRRD=AMTPBAL+AMTIBAL+AMTABAL+AMTFBAL+AMTCBAL
"RTN","RCTCSP1",247,0)
 I ACTION="U" S $P(^PRCA(430,BILL,16),U,10)=AMTRFRRD
"RTN","RCTCSP1",248,0)
 S ^XTMP("RCTCSPD",$J,BILL,ACTION,"5B",TRNNUM)=REC
"RTN","RCTCSP1",249,0)
 S ^XTMP("RCTCSPD",$J,"BILL",ACTION,BILL)=$$TAXID(DEBTOR)_"^"_$S(TRNTYP=35:"-",1:"")_+$E(REC,174,184)_"."_$E(REC,185,186)
"RTN","RCTCSP1",250,0)
 Q
"RTN","RCTCSP1",251,0)
 ;
"RTN","RCTCSP1",252,0)
DATE8(X) ;changes fileman date into 8 digit date yyyymmdd
"RTN","RCTCSP1",253,0)
 I +X S X=X+17000000
"RTN","RCTCSP1",254,0)
 S X=$E(X,1,8)
"RTN","RCTCSP1",255,0)
 Q X
"RTN","RCTCSP1",256,0)
 ;
"RTN","RCTCSP1",257,0)
AMOUNT(X,TT) ;changes amount to zero filled, right justified
"RTN","RCTCSP1",258,0)
 N SIGN
"RTN","RCTCSP1",259,0)
 S X=$$SIGN(X,TT)
"RTN","RCTCSP1",260,0)
 S SIGN=$S(X<0:-1,1:1)
"RTN","RCTCSP1",261,0)
 I X<0 S X=-X
"RTN","RCTCSP1",262,0)
 S X=$TR($J(X,0,2),".")
"RTN","RCTCSP1",263,0)
 S X=$E($S(SIGN<0:"-",1:0)_"00000000000",1,14-$L(X))_X
"RTN","RCTCSP1",264,0)
 Q X
"RTN","RCTCSP1",265,0)
 ;
"RTN","RCTCSP1",266,0)
SIGN(X,TT) ;Sets sign based on value and transaction type
"RTN","RCTCSP1",267,0)
 I X=0 Q 0
"RTN","RCTCSP1",268,0)
 I X,TT=35 S X=-X
"RTN","RCTCSP1",269,0)
 Q X
"RTN","RCTCSP1",270,0)
 ;
"RTN","RCTCSP1",271,0)
BLANK(X) ;returns 'x' blank spaces
"RTN","RCTCSP1",272,0)
 N BLANK
"RTN","RCTCSP1",273,0)
 S BLANK="",$P(BLANK," ",X+1)=""
"RTN","RCTCSP1",274,0)
 Q BLANK
"RTN","RCTCSP1",275,0)
 ;
"RTN","RCTCSP1",276,0)
RJZF(X,Y) ;right justify zero fill width Y
"RTN","RCTCSP1",277,0)
 S X=$E("000000000000",1,Y-$L(X))_X
"RTN","RCTCSP1",278,0)
 Q X
"RTN","RCTCSP1",279,0)
 ;
"RTN","RCTCSP1",280,0)
LJSF(X,Y) ;left justified space filled
"RTN","RCTCSP1",281,0)
 S X=$E(X,1,Y)
"RTN","RCTCSP1",282,0)
 S X=X_$$BLANK(Y-$L(X))
"RTN","RCTCSP1",283,0)
 Q X
"RTN","RCTCSP1",284,0)
 ;
"RTN","RCTCSP1",285,0)
TAXID(DEBTOR) ;computes TAXID to place on documents
"RTN","RCTCSP1",286,0)
 N TAXID,DIC,DA,DR,DIQ
"RTN","RCTCSP1",287,0)
 S TAXID=$$SSN^RCFN01(DEBTOR)
"RTN","RCTCSP1",288,0)
 S TAXID=$$LJSF(TAXID,9)
"RTN","RCTCSP1",289,0)
 Q TAXID
"RTN","RCTCSP1",290,0)
 ;
"RTN","RCTCSP1",291,0)
ADDR(RCDFN) ; returns patient file address
"RTN","RCTCSP1",292,0)
 N DFN,ADDRCS,STATEIEN,STATEAB,VAPA
"RTN","RCTCSP1",293,0)
 S DFN=RCDFN
"RTN","RCTCSP1",294,0)
 D ADD^VADPT
"RTN","RCTCSP1",295,0)
 S STATEIEN=+VAPA(5),STATEAB=$$GET1^DIQ(5,STATEIEN,1)
"RTN","RCTCSP1",296,0)
 S ADDRCS=VAPA(1)_U_VAPA(2)_U_VAPA(4)_U_STATEAB_U_VAPA(6)_U_VAPA(8)_U_+VAPA(25)
"RTN","RCTCSP1",297,0)
 I $L(DEBTOR1)>0 I $P(DEBTOR1,U,1,5)'?1"^"."^" D
"RTN","RCTCSP1",298,0)
 .N ADDR340
"RTN","RCTCSP1",299,0)
 .S ADDR340=$P($$DADD^RCAMADD(DEBTOR),U,1,8)
"RTN","RCTCSP1",300,0)
 .I $P(ADDRCS,U,7)>1 S $P(ADDR340,U,6)="     "    ;PRCA*4.5*331
"RTN","RCTCSP1",301,0)
 .S ADDR340=$P(ADDR340,U,1,2)_"^"_$P(ADDR340,U,4,7)_U_$S($P(ADDRCS,U,7)'="":$P(ADDRCS,U,7),1:1)    ;PRCA*4.5*331
"RTN","RCTCSP1",302,0)
 .I $P(ADDR340,U,7)="" S $P(ADDR340,U,7)=$P(ADDRCS,U,7)     ;PRCA*4.5*331
"RTN","RCTCSP1",303,0)
 .I $P(ADDR340,U,7)'=1 S $P(ADDR340,U,4)="  "     ;PRCA*4.5*331
"RTN","RCTCSP1",304,0)
 .S ADDRCS=ADDR340
"RTN","RCTCSP1",305,0)
 Q ADDRCS
"RTN","RCTCSP1",306,0)
 ;
"RTN","RCTCSP1",307,0)
DEM(RCDFN) ; returns patient file gender and dob
"RTN","RCTCSP1",308,0)
 N DFN,VADM
"RTN","RCTCSP1",309,0)
 S DFN=RCDFN
"RTN","RCTCSP1",310,0)
 D DEM^VADPT
"RTN","RCTCSP1",311,0)
 ; return string   sex:m/f ^ dob: yyyymmdd ^ ssn ^ deceased
"RTN","RCTCSP1",312,0)
 Q $P(VADM(5),U,1)_U_$P(VADM(3),U,1)_U_$P(VADM(2),U,1)_U_VADM(6)
"RTN","RCTCSP1",313,0)
 ;
"RTN","RCTCSP1A")
0^23^B44615567^n/a
"RTN","RCTCSP1A",1,0)
RCTCSP1A ;ALBANY/PAW-CROSS-SERVICING REPORT ;03/15/14 3:34 PM
"RTN","RCTCSP1A",2,0)
 ;;4.5;Accounts Receivable;**315**;Mar 20, 1995;Build 67
"RTN","RCTCSP1A",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSP1A",4,0)
 ;
"RTN","RCTCSP1A",5,0)
 Q
"RTN","RCTCSP1A",6,0)
 ;
"RTN","RCTCSP1A",7,0)
CSRPRTH1 ;header for cross-servicing print report 1
"RTN","RCTCSP1A",8,0)
 W @IOF
"RTN","RCTCSP1A",9,0)
 S PAGE=PAGE+1,EXCEL=$G(EXCEL)
"RTN","RCTCSP1A",10,0)
 I 'EXCEL D  Q
"RTN","RCTCSP1A",11,0)
 .W !,"PAGE "_PAGE,?16,"BILLS AT CROSS-SERVICING (SORTED BY BILL NO.)",?68,$$FMTE^XLFDT(DT,"2Z")
"RTN","RCTCSP1A",12,0)
 .W !,DASH
"RTN","RCTCSP1A",13,0)
 .W !,"BILL NO.",?14,"DEBTOR",?35,"Pt ID",?43,"ORIG AMT",?55,"CS REF DATE",?67," CURR AMT"  ; limited SSN to 4 char - (as per PRCA*4.5*315)
"RTN","RCTCSP1A",14,0)
 .W !,"---- ---",?14,"------",?35,"-----",?43,"---- ---",?55,"-- --- ----",?67," ---- ---"
"RTN","RCTCSP1A",15,0)
 ;EXCEL FORMAT
"RTN","RCTCSP1A",16,0)
 W !,"PAGE "_PAGE_U_U_"BILLS AT CROSS-SERVICING (SORTED BY BILL NO.)"_U_U_$$FMTE^XLFDT(DT,"2Z")
"RTN","RCTCSP1A",17,0)
 W !,"BILL NO."_U_"DEBTOR"_U_"Pt ID"_U_"ORIG AMT"_U_"CS REF DATE"_U_" CURR AMT"  ; limited SSN to 4 char - (as per PRCA*4.5*315)
"RTN","RCTCSP1A",18,0)
 Q
"RTN","RCTCSP1A",19,0)
 ;
"RTN","RCTCSP1A",20,0)
CSRPRTH2 ;header for cross-servicing print report 2
"RTN","RCTCSP1A",21,0)
 W @IOF
"RTN","RCTCSP1A",22,0)
 S PAGE=PAGE+1,EXCEL=$G(EXCEL)
"RTN","RCTCSP1A",23,0)
 I 'EXCEL D  Q
"RTN","RCTCSP1A",24,0)
 .W !,"PAGE "_PAGE,?16,"BILLS AT CROSS-SERVICING (SORTED BY DEBTOR)",?68,$$FMTE^XLFDT(DT,"2Z")
"RTN","RCTCSP1A",25,0)
 .W !,DASH
"RTN","RCTCSP1A",26,0)
 .W !,"DEBTOR",?21,"BILL NO.",?35,"Pt ID",?43,"ORIG AMT",?55,"CS REF DATE",?67," CURR AMT"  ;limited SSN to 4 char - (as per PRCA*4.5*315)
"RTN","RCTCSP1A",27,0)
 .W !,"------",?21,"---- ---",?35,"-----",?43,"---- ---",?55,"-- --- ----",?67," ---- ---"
"RTN","RCTCSP1A",28,0)
 ;EXCEL FORMAT
"RTN","RCTCSP1A",29,0)
 W !,"PAGE "_PAGE_U_U_"BILLS AT CROSS-SERVICING (SORTED BY DEBTOR)"_U_U_$$FMTE^XLFDT(DT,"2Z")
"RTN","RCTCSP1A",30,0)
 W !,"DEBTOR"_U_"BILL NO."_U_"Pt ID"_U_"ORIG AMT"_U_"CS REF DATE"_U_" CURR AMT"  ; limited SSN to 4 char - (as per PRCA*4.5*315)
"RTN","RCTCSP1A",31,0)
 Q
"RTN","RCTCSP1A",32,0)
 ;
"RTN","RCTCSP1A",33,0)
CSRPRTH3 ;header for cross-servicing print report 3
"RTN","RCTCSP1A",34,0)
 W @IOF
"RTN","RCTCSP1A",35,0)
 S PAGE=PAGE+1,EXCEL=$G(EXCEL)
"RTN","RCTCSP1A",36,0)
 I 'EXCEL D  Q
"RTN","RCTCSP1A",37,0)
 .W !,"PAGE "_PAGE,?11,"BILLS AT CROSS-SERVICING (SORTED BY CS REFERRED DATE)",?68,$$FMTE^XLFDT(DT,"2Z")
"RTN","RCTCSP1A",38,0)
 .W !,DASH
"RTN","RCTCSP1A",39,0)
 .W !,"CS REF DT",?12,"DEBTOR",?34,"BILL NO.",?49,"Pt ID",?58,"ORIG AMT",?67," CURR AMT"  ;limited SSN to 4 char - (as per PRCA*4.5*315)
"RTN","RCTCSP1A",40,0)
 .W !,"-- --- ----",?12,"------",?34,"---- ---",?49,"-----",?58,"---- ---",?67," ---- ---"
"RTN","RCTCSP1A",41,0)
 ;EXCEL FORMAT
"RTN","RCTCSP1A",42,0)
 W !,"PAGE "_PAGE_U_U_"BILLS AT CROSS-SERVICING (SORTED BY CS REFERRED DATE)"_U_U_$$FMTE^XLFDT(DT,"2Z")
"RTN","RCTCSP1A",43,0)
 W !,"CS REF DATE"_U_"DEBTOR"_U_"BILL NO."_U_"Pt ID"_U_"ORIG AMT"_U_" CURR AMT"  ; limited SSN to 4 char - (as per PRCA*4.5*315)
"RTN","RCTCSP1A",44,0)
 Q
"RTN","RCTCSP1A",45,0)
 ;
"RTN","RCTCSP1A",46,0)
COUNTRY(Z) ;
"RTN","RCTCSP1A",47,0)
 N PRCACC
"RTN","RCTCSP1A",48,0)
 ;get treasury country code - moved out of RCTCSP1, due to SACC size limitation error PRCA*4.5*315
"RTN","RCTCSP1A",49,0)
 I Z=1 S PRCACC="US" G COUNTRYQ
"RTN","RCTCSP1A",50,0)
 I Z="" S PRCACC="US" G COUNTRYQ
"RTN","RCTCSP1A",51,0)
 S PRCACC=$S(Z=4:"AF",Z=5:"AL",Z=7:"DZ",Z=8:"AD",Z=9:"AO",Z=180:"AI",Z=10:"AG",Z=12:"AR",Z=18:"AM",Z=151:"AW",Z=13:"AU",Z=14:"AT",Z=11:"AZ",Z=15:"BS",Z=16:"BH",Z=17:"BD",1:"  ") G:PRCACC'="  " COUNTRYQ
"RTN","RCTCSP1A",52,0)
 S PRCACC=$S(Z=19:"BB",Z=36:"BY",Z=20:"BE",Z=28:"BZ",Z=61:"BJ",Z=21:"BM",Z=22:"BT",Z=23:"BO",Z=24:"BA",Z=25:"BW",Z=27:"BR",Z=29:"IO",Z=32:"BN",Z=33:"BG",Z=223:"Faso",Z=35:"BI",1:"  ") G:PRCACC'="  " COUNTRYQ
"RTN","RCTCSP1A",53,0)
 S PRCACC=$S(Z=37:"KH",Z=38:"CM",Z=39:"CA",Z=40:"CV",Z=41:"KY",Z=42:"CF",Z=44:"TD",Z=45:"CL",Z=46:"CN",Z=50:"CO",Z=51:"KM",Z=53:"CG",Z=54:"CD",Z=55:"CK",Z=56:"CR",Z=109:"CI",1:"  ") G:PRCACC'="  " COUNTRYQ
"RTN","RCTCSP1A",54,0)
 S PRCACC=$S(Z=57:"HR",Z=58:"CU",Z=59:"CY",Z=60:"CZ",Z=115:"KP",Z=62:"DK",Z=80:"DJ",Z=63:"DM",Z=64:"DO",Z=172:"TP",Z=65:"EC",Z=220:"EG",Z=66:"SV",Z=67:"GQ",Z=69:"ER",Z=70:"EE",1:"  ") G:PRCACC'="  " COUNTRYQ
"RTN","RCTCSP1A",55,0)
 S PRCACC=$S(Z=68:"ET",Z=72:"FK",Z=71:"FO",Z=74:"FJ",Z=75:"FI",Z=76:"FR",Z=77:"GF",Z=78:"PF",Z=79:"TF",Z=81:"GA",Z=83:"GM",Z=82:"GE",Z=84:"DE",Z=85:"GH",Z=86:"GI",Z=221:"GB",1:"  ") G:PRCACC'="  " COUNTRYQ
"RTN","RCTCSP1A",56,0)
 S PRCACC=$S(Z=88:"GR",Z=89:"GL",Z=90:"GD",Z=91:"GP",Z=92:"GT",Z=93:"GN",Z=171:"GW",Z=94:"GY",Z=95:"HT",Z=98:"HN",Z=99:"HK",Z=100:"HU",Z=101:"IS",Z=102:"IN",Z=103:"ID",1:"  ") G:PRCACC'="  " COUNTRYQ
"RTN","RCTCSP1A",57,0)
 S PRCACC=$S(Z=105:"IQ",Z=106:"IE",Z=107:"IL",Z=108:"IT",Z=110:"JM",Z=111:"JP",Z=113:"JO",Z=112:"KZ",Z=114:"KE",Z=87:"KI",Z=116:"KR",Z=117:"KW",Z=118:"KG",Z=119:"LA",Z=122:"LV",1:"  ") G:PRCACC'="  " COUNTRYQ
"RTN","RCTCSP1A",58,0)
 S PRCACC=$S(Z=120:"LB",Z=121:"LS",Z=123:"LR",Z=124:"LY",Z=125:"LI",Z=126:"LT",Z=127:"LU",Z=128:"MO",Z=129:"MG",Z=130:"MW",Z=131:"MY",Z=132:"MV",Z=133:"ML",Z=134:"MT",1:"  ") G:PRCACC'="  " COUNTRYQ
"RTN","RCTCSP1A",59,0)
 S PRCACC=$S(Z=999:"MH",Z=135:"MQ",Z=136:"MR",Z=137:"MU",Z=52:"YT",Z=138:"MX",Z=161:"FM",Z=141:"MD",Z=139:"MC",Z=140:"MN",Z=142:"MS",Z=143:"MA",Z=144:"MZ",Z=34:"MM",Z=146:"NA",1:"  ") G:PRCACC'="  " COUNTRYQ
"RTN","RCTCSP1A",60,0)
 S PRCACC=$S(Z=147:"NR",Z=148:"NP",Z=149:"NL",Z=150:"AN",Z=152:"NC",Z=154:"NZ",Z=155:"NI",Z=156:"NE",Z=157:"NG",Z=158:"NU",Z=159:"NF",Z=160:"NO",Z=145:"OM",Z=162:"PK",1:"  ") G:PRCACC'="  " COUNTRYQ
"RTN","RCTCSP1A",61,0)
 S PRCACC=$S(Z=999:"PW",Z=163:"PA",Z=164:"PG",Z=165:"PY",Z=166:"PE",Z=167:"PH",Z=168:"PN",Z=169:"PL",Z=170:"PT",Z=173:"QA",Z=999:"RE",Z=175:"RO",Z=176:"RU",Z=177:"RW",Z=178:"SH",1:"  ") G:PRCACC'="  " COUNTRYQ
"RTN","RCTCSP1A",62,0)
 S PRCACC=$S(Z=179:"KN",Z=181:"LC",Z=183:"VC",Z=999:"WS",Z=184:"SM",Z=185:"ST",Z=186:"SA",Z=187:"SN",Z=188:"SC",Z=189:"SL",Z=190:"SG",Z=191:"SK",Z=193:"SI",Z=30:"SB",1:"  ") G:PRCACC'="  " COUNTRYQ
"RTN","RCTCSP1A",63,0)
 S PRCACC=$S(Z=194:"SO",Z=195:"ZA",Z=197:"ES",Z=43:"LK",Z=199:"SD",Z=200:"SR",Z=201:"SZ",Z=202:"SE",Z=203:"CH",Z=204:"SY",Z=205:"TJ",Z=222:"TZ",Z=182:"PM",Z=206:"TH",Z=219:"MK",1:"  ") G:PRCACC'="  " COUNTRYQ
"RTN","RCTCSP1A",64,0)
 S PRCACC=$S(Z=207:"TG",Z=208:"TK",Z=209:"TO",Z=210:"TT",Z=212:"TN",Z=213:"TR",Z=214:"TM",Z=215:"TC",Z=216:"TV",Z=217:"UG",Z=218:"UA",Z=211:"AE",Z=1:"US",Z=224:"UY",1:"  ") G:PRCACC'="  " COUNTRYQ
"RTN","RCTCSP1A",65,0)
 S PRCACC=$S(Z=104:"IR",Z=225:"UZ",Z=153:"VU",Z=97:"VA",Z=226:"VE",Z=183:"VN",Z=31:"VG",Z=227:"WF",Z=228:"YE",Z=229:"YU",Z=230:"ZM",Z=196:"ZW",1:"  ") G:PRCACC'="  " COUNTRYQ
"RTN","RCTCSP1A",66,0)
COUNTRYQ ;
"RTN","RCTCSP1A",67,0)
 Q PRCACC
"RTN","RCTCSP1A",68,0)
 ;
"RTN","RCTCSP1A",69,0)
HEADER ;
"RTN","RCTCSP1A",70,0)
 ;increment batch sequence number, build new header
"RTN","RCTCSP1A",71,0)
 N RCMSG
"RTN","RCTCSP1A",72,0)
 S SEQ=SEQ+1
"RTN","RCTCSP1A",73,0)
 S CNTLID=$$JD()_$$RJZF^RCTCSP1(SEQ,4)
"RTN","RCTCSP1A",74,0)
 K ^XTMP("RCTCSPD",$J,ACTION,"BUILD",SEQ)
"RTN","RCTCSP1A",75,0)
 ;header is record type H
"RTN","RCTCSP1A",76,0)
 S RCMSG="H"_CNTLID_$$BLANK^RCTCSP1(14)_"3636001200"
"RTN","RCTCSP1A",77,0)
 S RCMSG=RCMSG_$$BLANK^RCTCSP1(450-$L(RCMSG))
"RTN","RCTCSP1A",78,0)
 S REC=REC+1
"RTN","RCTCSP1A",79,0)
 S ^XTMP("RCTCSPD",$J,SEQ,"BUILD",REC)=$E(RCMSG,1,225)_$C(94)
"RTN","RCTCSP1A",80,0)
 S REC=REC+1
"RTN","RCTCSP1A",81,0)
 S ^XTMP("RCTCSPD",$J,SEQ,"BUILD",REC)=$E(RCMSG,226,999)_$C(126)
"RTN","RCTCSP1A",82,0)
 Q
"RTN","RCTCSP1A",83,0)
 ;
"RTN","RCTCSP1A",84,0)
TRAILER ;
"RTN","RCTCSP1A",85,0)
 ;trailer is type Z record
"RTN","RCTCSP1A",86,0)
 I REC=0 K ^XTMP("RCTCSPD",$J,SEQ,"BUILD") Q  ;delete batch if no records processed
"RTN","RCTCSP1A",87,0)
 N RCMSG
"RTN","RCTCSP1A",88,0)
 S CNTLID=$$JD()_$$RJZF^RCTCSP1(SEQ,4)
"RTN","RCTCSP1A",89,0)
 S RCMSG="Z"_$$RJZF^RCTCSP1(RECC,8)_$$AMOUNT^RCTCSP1(AMOUNT/100,0)_CNTLID_$$BLANK^RCTCSP1(14)_"3636001200"
"RTN","RCTCSP1A",90,0)
 S RCMSG=RCMSG_$$BLANK^RCTCSP1(450-$L(RCMSG))
"RTN","RCTCSP1A",91,0)
 S REC=REC+1
"RTN","RCTCSP1A",92,0)
 S ^XTMP("RCTCSPD",$J,SEQ,"BUILD",REC)=$E(RCMSG,1,225)_$C(94)
"RTN","RCTCSP1A",93,0)
 S REC=REC+1
"RTN","RCTCSP1A",94,0)
 S ^XTMP("RCTCSPD",$J,SEQ,"BUILD",REC)=$E(RCMSG,226,999)_$C(126)
"RTN","RCTCSP1A",95,0)
 S REC=0,RECC=0,AMOUNT=0
"RTN","RCTCSP1A",96,0)
 Q
"RTN","RCTCSP1A",97,0)
 ;
"RTN","RCTCSP1A",98,0)
JD() ; returns today's Julian date YDOY
"RTN","RCTCSP1A",99,0)
 N XMDDD,XMNOW,XMDT
"RTN","RCTCSP1A",100,0)
 S XMNOW=$$NOW^XLFDT
"RTN","RCTCSP1A",101,0)
 S XMDT=$E(XMNOW,1,7)
"RTN","RCTCSP1A",102,0)
 S XMDDD=$$RJ^XLFSTR($$FMDIFF^XLFDT(XMDT,$E(XMDT,1,3)_"0101",1)+1,3,"0")
"RTN","RCTCSP1A",103,0)
 Q $E(DT,3)_XMDDD
"RTN","RCTCSP1A",104,0)
 ;
"RTN","RCTCSP2")
0^14^B136461756^B87861761
"RTN","RCTCSP2",1,0)
RCTCSP2 ;ALBANY/BDB-CROSS-SERVICING TRANSMISSION ;03/15/14 3:34 PM
"RTN","RCTCSP2",2,0)
 ;;4.5;Accounts Receivable;**301,315**;Mar 20, 1995;Build 67
"RTN","RCTCSP2",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSP2",4,0)
 ;
"RTN","RCTCSP2",5,0)
 Q
"RTN","RCTCSP2",6,0)
 ;
"RTN","RCTCSP2",7,0)
COMPILE ;
"RTN","RCTCSP2",8,0)
 N RCMSG,BCNTR,REC,RECC,AMOUNT,RCNTR,ACTION,SEQ
"RTN","RCTCSP2",9,0)
 S BCNTR=0,REC=0,RECC=0,AMOUNT=0,SEQ=0
"RTN","RCTCSP2",10,0)
 F  S BCNTR=$O(^XTMP("RCTCSPD",$J,BCNTR)) Q:+BCNTR'>0  D
"RTN","RCTCSP2",11,0)
 .I REC>50 D
"RTN","RCTCSP2",12,0)
 ..D TRAILER^RCTCSP1A
"RTN","RCTCSP2",13,0)
 ..D AITCMSG
"RTN","RCTCSP2",14,0)
 ..S REC=0,RECC=0
"RTN","RCTCSP2",15,0)
 ..Q
"RTN","RCTCSP2",16,0)
 .S ACTION="" F  S ACTION=$O(^XTMP("RCTCSPD",$J,BCNTR,ACTION)) Q:ACTION=""  D
"RTN","RCTCSP2",17,0)
 ..I REC=0 D HEADER^RCTCSP1A
"RTN","RCTCSP2",18,0)
 ..F RCNTR=1,2,"2A","2C",3 I $D(^XTMP("RCTCSPD",$J,BCNTR,ACTION,RCNTR)) D
"RTN","RCTCSP2",19,0)
 ...S REC=REC+1
"RTN","RCTCSP2",20,0)
 ...S RECC=RECC+1 ;record count for 'c' records on trailer record
"RTN","RCTCSP2",21,0)
 ...S ^XTMP("RCTCSPD",$J,SEQ,"BUILD",REC)=$E(^XTMP("RCTCSPD",$J,BCNTR,ACTION,RCNTR),1,225)_$C(94)
"RTN","RCTCSP2",22,0)
 ...S REC=REC+1
"RTN","RCTCSP2",23,0)
 ...S ^XTMP("RCTCSPD",$J,SEQ,"BUILD",REC)=$E(^XTMP("RCTCSPD",$J,BCNTR,ACTION,RCNTR),226,999)_$C(126)
"RTN","RCTCSP2",24,0)
 ...I $E(^XTMP("RCTCSPD",$J,BCNTR,ACTION,RCNTR),2)="1" S AMOUNT=AMOUNT+$E(^(RCNTR),91,104)
"RTN","RCTCSP2",25,0)
 ...Q
"RTN","RCTCSP2",26,0)
 ..I $D(^XTMP("RCTCSPD",$J,BCNTR,ACTION,"5B")) D
"RTN","RCTCSP2",27,0)
 ...N TRNNUM
"RTN","RCTCSP2",28,0)
 ...S TRNNUM=0
"RTN","RCTCSP2",29,0)
 ...F  S TRNNUM=$O(^XTMP("RCTCSPD",$J,BCNTR,ACTION,"5B",TRNNUM)) Q:TRNNUM'?1N.N  D
"RTN","RCTCSP2",30,0)
 ....S REC=REC+1
"RTN","RCTCSP2",31,0)
 ....S RECC=RECC+1 ;record count for 'c' records on trailer record
"RTN","RCTCSP2",32,0)
 ....S ^XTMP("RCTCSPD",$J,SEQ,"BUILD",REC)=$E(^XTMP("RCTCSPD",$J,BCNTR,ACTION,"5B",TRNNUM),1,225)_$C(94)
"RTN","RCTCSP2",33,0)
 ....S REC=REC+1
"RTN","RCTCSP2",34,0)
 ....S ^XTMP("RCTCSPD",$J,SEQ,"BUILD",REC)=$E(^XTMP("RCTCSPD",$J,BCNTR,ACTION,"5B",TRNNUM),226,999)_$C(126)
"RTN","RCTCSP2",35,0)
 ....S AMOUNT=AMOUNT+$TR($E(^XTMP("RCTCSPD",$J,BCNTR,ACTION,"5B",TRNNUM),173,186),"-")
"RTN","RCTCSP2",36,0)
 ....Q
"RTN","RCTCSP2",37,0)
 ...Q
"RTN","RCTCSP2",38,0)
 ..Q
"RTN","RCTCSP2",39,0)
 .Q
"RTN","RCTCSP2",40,0)
 D TRAILER^RCTCSP1A
"RTN","RCTCSP2",41,0)
 D AITCMSG
"RTN","RCTCSP2",42,0)
 D USRMSG
"RTN","RCTCSP2",43,0)
 Q
"RTN","RCTCSP2",44,0)
 ;
"RTN","RCTCSP2",45,0)
RCLLCHK(BILL) ;
"RTN","RCTCSP2",46,0)
 N TOTAL
"RTN","RCTCSP2",47,0)
 I $P(B15,U,7) Q 0 ;check stop tcsp referral flag
"RTN","RCTCSP2",48,0)
 I $P(B15,U,2),'$P(B15,U,3) D  ;recall bill
"RTN","RCTCSP2",49,0)
 .N ACTION,BILLCSL
"RTN","RCTCSP2",50,0)
 .S ACTION="L"
"RTN","RCTCSP2",51,0)
 .S $P(^PRCA(430,BILL,15),U,1)="" ;clear the date referred
"RTN","RCTCSP2",52,0)
 .S $P(^PRCA(430,BILL,15),U,3)=DT ;set the recall date
"RTN","RCTCSP2",53,0)
 .S $P(^PRCA(430,BILL,15),U,5)=$$GET1^DIQ(430,BILL,11) ;set the recall amount to the current amount
"RTN","RCTCSP2",54,0)
 .S B15=^PRCA(430,BILL,15)
"RTN","RCTCSP2",55,0)
 .S BILLCSL=BILL ;last cs bill
"RTN","RCTCSP2",56,0)
 .D REC1^RCTCSPD
"RTN","RCTCSP2",57,0)
 .K ^PRCA(430,"TCSP",BILL) ;set the bill to not sent to cross-servicing
"RTN","RCTCSP2",58,0)
 .D RCLL^RCTCSPD4 ; set bill recall non-financial transaction PRCA*4.5*315
"RTN","RCTCSP2",59,0)
 ;
"RTN","RCTCSP2",60,0)
 ;recall bill if total <$25
"RTN","RCTCSP2",61,0)
 S TOTAL=$P(B7,U)+$P(B7,U,2)+$P(B7,U,3)+$P(B7,U,4)+$P(B7,U,5)
"RTN","RCTCSP2",62,0)
 I TOTAL<25 D  Q 0
"RTN","RCTCSP2",63,0)
 .N X1,X2,P366DT,X,PRCAEN,I,RECALL
"RTN","RCTCSP2",64,0)
 .S RECALL=0
"RTN","RCTCSP2",65,0)
 .S X1=DT,X2=-366 D C^%DTC S P366DT=X
"RTN","RCTCSP2",66,0)
 .S PRCAEN=0 F I=0:0 S PRCAEN=$O(^PRCA(433,"C",BILL,PRCAEN)) Q:'PRCAEN  S:$P($G(^PRCA(433,PRCAEN,1)),U,1)>P366DT RECALL=1
"RTN","RCTCSP2",67,0)
 .I RECALL=0 D  Q
"RTN","RCTCSP2",68,0)
 ..S ACTION="L"
"RTN","RCTCSP2",69,0)
 ..S $P(^PRCA(430,BILL,15),U,1)="" ;clear the date referred
"RTN","RCTCSP2",70,0)
 ..S $P(^PRCA(430,BILL,15),U,2)=1 ;set the recall flag
"RTN","RCTCSP2",71,0)
 ..S $P(^PRCA(430,BILL,15),U,3)=DT ;set the recall date
"RTN","RCTCSP2",72,0)
 ..S $P(^PRCA(430,BILL,15),U,4)="07" ;set the recall reason
"RTN","RCTCSP2",73,0)
 ..S $P(^PRCA(430,BILL,15),U,5)=$P($G(^PRCA(430,BILL,16)),U,10) ;set the recall amount to the current tcsp amount
"RTN","RCTCSP2",74,0)
 ..S $P(^PRCA(430,BILL,15),U,7)=1 ;set the stop flag
"RTN","RCTCSP2",75,0)
 ..S $P(^PRCA(430,BILL,15),U,8)=DT ;set the stop date
"RTN","RCTCSP2",76,0)
 ..S $P(^PRCA(430,BILL,15),U,9)="O" ;set the stop date
"RTN","RCTCSP2",77,0)
 ..S $P(^PRCA(430,BILL,15),U,10)="AUTORECALL <$25" ;set the stop reason
"RTN","RCTCSP2",78,0)
 ..S B15=^PRCA(430,BILL,15)
"RTN","RCTCSP2",79,0)
 ..D REC1^RCTCSPD,RCLL^RCTCSPD4 ; set CS Bill Recall transaction PRCA*4.5*315
"RTN","RCTCSP2",80,0)
 ..K ^PRCA(430,"TCSP",BILL) ;set the bill to not sent to cross-servicing
"RTN","RCTCSP2",81,0)
 ..S $P(^PRCA(430,BILL,19),U,10)=1 ;stop interest admin calc
"RTN","RCTCSP2",82,0)
 ..S B19=$G(^PRCA(430,BILL,19))
"RTN","RCTCSP2",83,0)
 ..Q
"RTN","RCTCSP2",84,0)
 .Q
"RTN","RCTCSP2",85,0)
 Q 0
"RTN","RCTCSP2",86,0)
 ;
"RTN","RCTCSP2",87,0)
RCRPRT ;Reconciliation report
"RTN","RCTCSP2",88,0)
 N ZTDESC,ZTRTN,POP,%ZIS,DTFRMTO,DTFRM,DTTO,PROMPT,EXCEL
"RTN","RCTCSP2",89,0)
 S DTFRMTO=$$DTFRMTO Q:'DTFRMTO  ;Get date range as per PRCA*4.5*315
"RTN","RCTCSP2",90,0)
 S (DATE,DTFRM)=$$FMADD^XLFDT(+$P(DTFRMTO,U,2),-1),DTTO=$P(DTFRMTO,U,3),CURDT=0
"RTN","RCTCSP2",91,0)
 S EXCEL=0,PROMPT="CAPTURE Report data to an Excel Document",DIR(0)="Y",DIR("?")="^D HEXC^RCTCSJR"
"RTN","RCTCSP2",92,0)
 S EXCEL=$$SELECT^RCTCSJR(PROMPT,"NO") I "01"'[EXCEL S STOP=1 Q
"RTN","RCTCSP2",93,0)
 I EXCEL=1 D EXCMSG^RCTCSJR ; Display Excel display message
"RTN","RCTCSP2",94,0)
 K IOP,IO("Q") S %ZIS="MQ",%ZIS("B")="" D ^%ZIS Q:POP  S IOP=ION_";"_IOM_";"_IOSL
"RTN","RCTCSP2",95,0)
 I $D(IO("Q")) D  Q  ;
"RTN","RCTCSP2",96,0)
 .S ZTSAVE("DTFRMTO")="",ZTSAVE("EXCEL")=""
"RTN","RCTCSP2",97,0)
 .S ZTRTN="RCRPRTP^RCTCSP2",ZTDESC="RECONCILIATION REPORT"
"RTN","RCTCSP2",98,0)
 .D ^%ZTLOAD,HOME^%ZIS
"RTN","RCTCSP2",99,0)
 .I $G(ZTSK) W !!,"Report compilation has started with task# ",ZTSK,".",! S DIR(0)="E" D ^DIR K DIR
"RTN","RCTCSP2",100,0)
 .Q
"RTN","RCTCSP2",101,0)
 ;
"RTN","RCTCSP2",102,0)
RCRPRTP ;print the - reconciliation report, call to build array of bills returned
"RTN","RCTCSP2",103,0)
 U IO
"RTN","RCTCSP2",104,0)
 N DASH,PAGE,DBTR,DBTRN,RCOUT,CURDT,FND1,RC18,RCRTCD
"RTN","RCTCSP2",105,0)
 K ^XTMP("RCTCSPP",$J)
"RTN","RCTCSP2",106,0)
 S ^XTMP("RCTCSPP",0)=$$FMADD^XLFDT(DT,3)_"^"_DT
"RTN","RCTCSP2",107,0)
 S (DATE,DTFRM)=$$FMADD^XLFDT(+$P(DTFRMTO,U,2),-1),DTTO=$P(DTFRMTO,U,3),CURDT=0
"RTN","RCTCSP2",108,0)
 F  S DATE=$O(^PRCA(430,"AN",DATE)),BILLIEN=0 Q:DATE=""!(DATE>DTTO)  D  ;Use new AN xref PRCA*4.5*315
"RTN","RCTCSP2",109,0)
 . F  S BILLIEN=$O(^PRCA(430,"AN",DATE,BILLIEN)) Q:BILLIEN=""  D
"RTN","RCTCSP2",110,0)
 ..I +$P($G(^PRCA(430,BILLIEN,30)),U,1)=0 Q   ;Returned date is NULL
"RTN","RCTCSP2",111,0)
 ..S DBTR=$P($G(^PRCA(430,BILLIEN,0)),U,9),DBTRN=$$GET1^DIQ(430,BILLIEN,9)
"RTN","RCTCSP2",112,0)
 ..Q:DBTRN']""
"RTN","RCTCSP2",113,0)
 ..S ^XTMP("RCTCSPP",$J,DBTRN,DBTR)=""
"RTN","RCTCSP2",114,0)
 ..;S FND1=1
"RTN","RCTCSP2",115,0)
 S PAGE=0,RCOUT=0
"RTN","RCTCSP2",116,0)
 S DASH="",$P(DASH,"-",78)=""
"RTN","RCTCSP2",117,0)
 D RCRPRTH2
"RTN","RCTCSP2",118,0)
 ;
"RTN","RCTCSP2",119,0)
 ;New fields added in PRCA*4.5*315:
"RTN","RCTCSP2",120,0)
 ;AMTREF:(#310) REC ORIGINAL TCSP AMOUNT stored in ^PRCA(430,BILL,30), piece 10
"RTN","RCTCSP2",121,0)
 ;AMTPD:AMTREF - (#311) REC CURRENT TCSP AMOUNT stored in ^PRCA(430,BILL,30), piece 11
"RTN","RCTCSP2",122,0)
 ;AMTFEE:(#74) MARSHAL FEE
"RTN","RCTCSP2",123,0)
 ;CORDT:(#312) REC TCSP RECALL EFF. DATE stored in ^PRCA(430,BILL,30), piece 12
"RTN","RCTCSP2",124,0)
 ;DTREJ: (#172) REJECT DATE (multiple)
"RTN","RCTCSP2",125,0)
 ;See RCTCSPRS for more information on these fields
"RTN","RCTCSP2",126,0)
 ;
"RTN","RCTCSP2",127,0)
 S DBTRN=0
"RTN","RCTCSP2",128,0)
 F  S DBTRN=$O(^XTMP("RCTCSPP",$J,DBTRN)) Q:DBTRN=""  D  Q:RCOUT
"RTN","RCTCSP2",129,0)
 .S DBTR=$O(^XTMP("RCTCSPP",$J,DBTRN,0)) Q:'+DBTR
"RTN","RCTCSP2",130,0)
 .S BILL=0
"RTN","RCTCSP2",131,0)
 .F  S BILL=$O(^PRCA(430,"C",DBTR,BILL)) Q:BILL'?1N.N  D  Q:RCOUT
"RTN","RCTCSP2",132,0)
 ..N B0,B30,AMTREF,AMTPD,AMTFEE,DTRET,CORDT,SSN
"RTN","RCTCSP2",133,0)
 ..S B0=$G(^PRCA(430,BILL,0)),B30=$G(^PRCA(430,BILL,30))
"RTN","RCTCSP2",134,0)
 ..S AMTREF=$P(B30,U,10),AMTPD=AMTREF-$P(B30,U,11)
"RTN","RCTCSP2",135,0)
 ..I 'EXCEL S AMTFEE=$J($P($G(^PRCA(430,BILL,7)),U,4),8,2)
"RTN","RCTCSP2",136,0)
 ..I EXCEL S AMTFEE=$J($P($G(^PRCA(430,BILL,7)),U,4),5,2)
"RTN","RCTCSP2",137,0)
 ..I 'EXCEL S AMTREF=$J(AMTREF,8,2),AMTPD=$J(AMTPD,8,2)
"RTN","RCTCSP2",138,0)
 ..I EXCEL S AMTREF=$J(AMTREF,7,2),AMTPD=$J(AMTPD,7,2)
"RTN","RCTCSP2",139,0)
 ..S DEBTOR=$P(B0,U,9),SSN=$$SSN^RCFN01($P(^RCD(340,DEBTOR,0),"^")),SSN=$E(SSN,6,9)
"RTN","RCTCSP2",140,0)
 ..S CORDT=$$FMTE^XLFDT($P(B30,U,12),"2Z"),DTRET=""
"RTN","RCTCSP2",141,0)
 ..S DTRET=$P(B30,U) I DTRET S DTRET=$$FMTE^XLFDT(DTRET,"2Z")
"RTN","RCTCSP2",142,0)
 ..I +$P(B30,U,1)=0 Q
"RTN","RCTCSP2",143,0)
 ..I 'EXCEL W $E($$GET1^DIQ(430,BILL,9),1,16)
"RTN","RCTCSP2",144,0)
 ..I EXCEL W !,$E($$GET1^DIQ(430,BILL,9),1,14)
"RTN","RCTCSP2",145,0)
 ..I 'EXCEL W ?17,$P(B0,U,1),?29,SSN,?33,AMTREF,?41,AMTPD,?47,AMTFEE,?59,CORDT,?69,DTRET,!
"RTN","RCTCSP2",146,0)
 ..I EXCEL W U_$P($P(B0,U,1),"-",2)_U_SSN_U_AMTREF_U_AMTPD_U_AMTFEE_U_CORDT_U_DTRET
"RTN","RCTCSP2",147,0)
 ..S RCRTCD=$P(B30,U,2)
"RTN","RCTCSP2",148,0)
 ..I 'EXCEL D
"RTN","RCTCSP2",149,0)
 ...D  ;Display return reason code
"RTN","RCTCSP2",150,0)
 ....I RCRTCD="" W ?6,"NO RETURN REASON CODE",! Q
"RTN","RCTCSP2",151,0)
 ....W:$D(^PRCA(430.5,RCRTCD,0)) ?6,$P(^PRCA(430.5,RCRTCD,0),U,2),!
"RTN","RCTCSP2",152,0)
 ....W:'$D(^PRCA(430.5,RCRTCD,0)) ?6,"UNKNOWN RETURN REASON CODE: ",RCRTCD,!
"RTN","RCTCSP2",153,0)
 ....W:RCRTCD=14 ?7,"Compromise, Please write this bill off by the manual process",!,?8,"Amount (not collected): "_$J($P(B30,U,4),9,2),!  ;Added PRCA*4.5*315
"RTN","RCTCSP2",154,0)
 ....W:RCRTCD=2 ?8,"Date of Death:  "_$$FMTE^XLFDT($P(B30,U,7),"2Z"),!  ;date type (as per PRCA*4.5*315)
"RTN","RCTCSP2",155,0)
 ....W:RCRTCD=3 ?8,"Bankruptcy Date:  "_$$FMTE^XLFDT($P(B30,U,6),"2Z"),!
"RTN","RCTCSP2",156,0)
 ...W:+$P(B30,U,8) ?6,"Date of Dissolution:  "_$$FMTE^XLFDT($P(B30,U,8),"2Z"),!
"RTN","RCTCSP2",157,0)
 ..I EXCEL D
"RTN","RCTCSP2",158,0)
 ...I RCRTCD=14 W U_$P(^PRCA(430.5,RCRTCD,0),U,2)_U_"AMT NOT COLL"_U_$P(B30,U,4)
"RTN","RCTCSP2",159,0)
 ...I $P(B30,U,3)="Y" W U_"CP"_U_$J($P(B30,U,4),4,2) Q
"RTN","RCTCSP2",160,0)
 ...I RCRTCD=2 W U_$P(^PRCA(430.5,RCRTCD,0),U,2)_" "_$$FMTE^XLFDT($P(B30,U,7),"2Z") Q
"RTN","RCTCSP2",161,0)
 ...I RCRTCD=3 W U_$P(^PRCA(430.5,RCRTCD,0),U,2)_" "_$$FMTE^XLFDT($P(B30,U,6),"2Z") Q
"RTN","RCTCSP2",162,0)
 ...I RCRTCD]"" W U_$S($D(^PRCA(430.5,RCRTCD,0)):$$GET1^DIQ(430.5,RCRTCD,1),1:RCRTCD) Q
"RTN","RCTCSP2",163,0)
 ..;check for end of page here, if necessary form feed and print header
"RTN","RCTCSP2",164,0)
 ..I 'EXCEL W ! I ($Y+3)>IOSL D
"RTN","RCTCSP2",165,0)
 ...I $E(IOST,1,2)="C-" S DIR(0)="E" K DIRUT D ^DIR K DIR I $D(DTOUT)!($D(DUOUT)) S RCOUT=1 K X,Y,DIRUT,DTOUT,DUOUT,DIROUT Q
"RTN","RCTCSP2",166,0)
 ...D RCRPRTH2
"RTN","RCTCSP2",167,0)
 I $E(IOST,1,2)="C-" R !!,"END OF REPORT...PRESS RETURN TO CONTINUE",X:DTIME W @IOF
"RTN","RCTCSP2",168,0)
 D:'$D(ZTQUEUED) ^%ZISC
"RTN","RCTCSP2",169,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","RCTCSP2",170,0)
 K IOP,%ZIS,ZTQUEUED
"RTN","RCTCSP2",171,0)
 Q
"RTN","RCTCSP2",172,0)
 ;
"RTN","RCTCSP2",173,0)
RCRPRTH2 ;header for reconciliation report print report 2
"RTN","RCTCSP2",174,0)
 W @IOF
"RTN","RCTCSP2",175,0)
 S PAGE=PAGE+1
"RTN","RCTCSP2",176,0)
 I 'EXCEL W "PAGE "_PAGE,?12,"RECONCILIATION REPORT ",?65,$$FMTE^XLFDT(DT,"2Z")
"RTN","RCTCSP2",177,0)
 I 'EXCEL D  Q 
"RTN","RCTCSP2",178,0)
 .W !,DASH
"RTN","RCTCSP2",179,0)
 .W !,"DEBTOR",?17,"BILL NO.",?29,"SSN",?34,"Amount",?42,"Amount",?51,"Amount",?59,"Recall",?69,"Date",!
"RTN","RCTCSP2",180,0)
 .W ?34,"Refer",?42,"Paid",?51,"of Fee",?59,"Eff. Dt",?69,"Return"
"RTN","RCTCSP2",181,0)
 .W !,"----------------",?17,"-----------",?29,"----",?34,"-------",?42,"-------",?51,"------",?59,"--------",?69,"--------",!
"RTN","RCTCSP2",182,0)
 ;EXCEL FORMAT
"RTN","RCTCSP2",183,0)
 W "PAGE "_PAGE_U_"RECONCILIATION REPORT "_U_$$FMTE^XLFDT(DT,"2Z")
"RTN","RCTCSP2",184,0)
 W !,"DEBTOR"_U_"BILL #"_U_"Pt ID"_U_"AMT REF"_U_"AMT PD"_U_"AMT FEE"_U_"DT RPT"_U_"DT RET"_U_"COMMENT"
"RTN","RCTCSP2",185,0)
 Q
"RTN","RCTCSP2",186,0)
 ;
"RTN","RCTCSP2",187,0)
AITCMSG ;
"RTN","RCTCSP2",188,0)
 N XMY,XMDUZ,XMSUB,XMTEXT,CNTLID,SYSTYP
"RTN","RCTCSP2",189,0)
 S SYSTYP=$$PROD^XUPROD(1)
"RTN","RCTCSP2",190,0)
 S CNTLID=$$JD^RCTCSP1A()_$$RJZF^RCTCSP1(SEQ,4)
"RTN","RCTCSP2",191,0)
 S XMDUZ="AR PACKAGE"
"RTN","RCTCSP2",192,0)
 I SYSTYP S XMY("XXX@Q-TPC.DOMAIN.EXT")=""
"RTN","RCTCSP2",193,0)
 I 'SYSTYP S XMY("XXX@Q-TXC.DOMAIN.EXT")=""
"RTN","RCTCSP2",194,0)
 S XMY("G.TCSP")=""
"RTN","RCTCSP2",195,0)
 S XMSUB=SITE_"/CS TRANSMISSION/BATCH#: "_CNTLID
"RTN","RCTCSP2",196,0)
 S XMTEXT="^XTMP(""RCTCSPD"","_$J_","""_SEQ_""",""BUILD"","
"RTN","RCTCSP2",197,0)
 D ^XMD
"RTN","RCTCSP2",198,0)
 Q
"RTN","RCTCSP2",199,0)
 ;
"RTN","RCTCSP2",200,0)
USRMSG ;sends mailman message of documents sent to user
"RTN","RCTCSP2",201,0)
 N XMY,XMDUZ,XMSUB,XMTEXT,X,RCNT,RCDAT1,RCDAT2
"RTN","RCTCSP2",202,0)
 S ACTION="" F  S ACTION=$O(^XTMP("RCTCSPD",$J,"BILL",ACTION)) Q:ACTION=""  D
"RTN","RCTCSP2",203,0)
 .K ^XTMP("RCTCSPD",$J,"BILL","MSG")
"RTN","RCTCSP2",204,0)
 .S XMDUZ="AR PACKAGE"
"RTN","RCTCSP2",205,0)
 .S XMY("G.TCSP")=""
"RTN","RCTCSP2",206,0)
 .S XMSUB="CS "_$S(ACTION="A":"ADD REFERRAL",ACTION="U":"UPDATES",ACTION="L":"RECALLS",ACTION="B":"EXISTING DEBTOR",1:"UNKNOWN")_" SENT ON "_$E(DT,4,5)_"/"_$E(DT,6,7)_"/"_$E(DT,2,3)_" BATCH ID: "_CNTLID
"RTN","RCTCSP2",207,0)
 .S ^XTMP("RCTCSPD",$J,"BILL","MSG",1)="Bill#                             TIN        TYPE       AMOUNT"
"RTN","RCTCSP2",208,0)
 .S ^XTMP("RCTCSPD",$J,"BILL","MSG",2)="-----                             ---        ----       ------"
"RTN","RCTCSP2",209,0)
 .S X=0,RCNT=2 F  S X=$O(^XTMP("RCTCSPD",$J,"BILL",ACTION,X)) Q:X=""  D
"RTN","RCTCSP2",210,0)
 ..S RCNT=RCNT+1
"RTN","RCTCSP2",211,0)
 ..S RCDAT1=$P(^XTMP("RCTCSPD",$J,"BILL",ACTION,X),U,1)
"RTN","RCTCSP2",212,0)
 ..S RCDAT2=$P(^XTMP("RCTCSPD",$J,"BILL",ACTION,X),U,2)
"RTN","RCTCSP2",213,0)
 ..S ^XTMP("RCTCSPD",$J,"BILL","MSG",RCNT)=$$RJZF($P($G(^PRCA(430,X,0)),U,1),7)_$$BLANK(22)_RCDAT1_"     "_ACTION_"        "_$S(RCDAT2]"":RCDAT2,1:"")
"RTN","RCTCSP2",214,0)
 ..Q
"RTN","RCTCSP2",215,0)
 .S ^XTMP("RCTCSPD",$J,"BILL","MSG",RCNT+1)="Total Bills: "_(RCNT-2)
"RTN","RCTCSP2",216,0)
 .S XMTEXT="^XTMP(""RCTCSPD"","_$J_",""BILL"",""MSG"","
"RTN","RCTCSP2",217,0)
 .D ^XMD
"RTN","RCTCSP2",218,0)
 .K ^XTMP("RCTCSPD",$J,"BILL","MSG")
"RTN","RCTCSP2",219,0)
 Q
"RTN","RCTCSP2",220,0)
 ;
"RTN","RCTCSP2",221,0)
THIRD ;sends mailman message to user if no third letter found
"RTN","RCTCSP2",222,0)
 Q:'$D(^XTMP("RCTCSPD",$J,"THIRD"))
"RTN","RCTCSP2",223,0)
 N XMY,XMDUZ,XMSUB,XMTEXT
"RTN","RCTCSP2",224,0)
 S XMDUZ="AR PACKAGE"
"RTN","RCTCSP2",225,0)
 S XMY("G.TCSP")=""
"RTN","RCTCSP2",226,0)
 N TCT,TDEB,TDEB0,TBIL,TSP,FST
"RTN","RCTCSP2",227,0)
 S XMSUB="TCSP QUALIFIED/NO 3RD LETTER SENT ON "_$E(DT,4,5)_"/"_$E(DT,6,7)_"/"_$E(DT,2,3)
"RTN","RCTCSP2",228,0)
 S ^XTMP("RCTCSPD",$J,"THIRD",1)="The following list of debtor bills were not sent to TCSP."
"RTN","RCTCSP2",229,0)
 S ^XTMP("RCTCSPD",$J,"THIRD",2)="Please review debtor's account to determine why the third"
"RTN","RCTCSP2",230,0)
 S ^XTMP("RCTCSPD",$J,"THIRD",3)="notice letter has not been sent:"
"RTN","RCTCSP2",231,0)
 S ^XTMP("RCTCSPD",$J,"THIRD",4)="Name                               Bill #"
"RTN","RCTCSP2",232,0)
 S ^XTMP("RCTCSPD",$J,"THIRD",5)="----                               ------"
"RTN","RCTCSP2",233,0)
 S TCT=6,TSP=0,TDEB=""
"RTN","RCTCSP2",234,0)
 F  S TDEB=$O(^XTMP("RCTCSPD",$J,"THIRD",TDEB)) Q:TDEB=""  D
"RTN","RCTCSP2",235,0)
 .S FST=1,TBIL=""
"RTN","RCTCSP2",236,0)
 .I FST,TCT'=6 S ^XTMP("RCTCSPD",$J,"THIRD",TCT)="",TCT=TCT+1,TSP=TSP+1
"RTN","RCTCSP2",237,0)
 .F  S TBIL=$O(^XTMP("RCTCSPD",$J,"THIRD",TDEB,TBIL)) Q:TBIL=""  D
"RTN","RCTCSP2",238,0)
 ..S TDEB0=$S(FST:TDEB,1:"")
"RTN","RCTCSP2",239,0)
 ..S ^XTMP("RCTCSPD",$J,"THIRD",TCT)=TDEB0_$J(" ",35-$L(TDEB0))_TBIL
"RTN","RCTCSP2",240,0)
 ..S TCT=TCT+1,FST=0
"RTN","RCTCSP2",241,0)
 S ^XTMP("RCTCSPD",$J,"THIRD",TCT)="Total records: "_(TCT-(6+TSP))
"RTN","RCTCSP2",242,0)
 S XMTEXT="^XTMP(""RCTCSPD"","_$J_",""THIRD"","
"RTN","RCTCSP2",243,0)
 D ^XMD
"RTN","RCTCSP2",244,0)
 K ^XTMP("RCTCSPD",$J,"THIRD")
"RTN","RCTCSP2",245,0)
THIRDQ Q
"RTN","RCTCSP2",246,0)
 ;
"RTN","RCTCSP2",247,0)
REC3 ;
"RTN","RCTCSP2",248,0)
 N REC,KNUM,DEBTNR,DEBTORNB
"RTN","RCTCSP2",249,0)
 S REC="C3 "_ACTION_"3636001200"_"DM1D "
"RTN","RCTCSP2",250,0)
 S KNUM=$P($P(B0,U,1),"-",2)
"RTN","RCTCSP2",251,0)
 S DEBTNR=$E(SITE,1,3)_$$LJZF(KNUM,7)_$TR($J(BILL,20)," ",0),REC=REC_DEBTNR
"RTN","RCTCSP2",252,0)
 S DEBTORNB=$E(SITE,1,3)_$TR($J(DEBTOR,12)," ",0)
"RTN","RCTCSP2",253,0)
 S REC=REC_DEBTORNB
"RTN","RCTCSP2",254,0)
 S REC=REC_$S(ACTION="L":"15",1:"  ")
"RTN","RCTCSP2",255,0)
 S REC=REC_"SLF"
"RTN","RCTCSP2",256,0)
 S REC=REC_$$BLANK(8)
"RTN","RCTCSP2",257,0)
 S REC=REC_$$AMOUNT(0)
"RTN","RCTCSP2",258,0)
 S REC=REC_$$BLANK(16)
"RTN","RCTCSP2",259,0)
 S REC=REC_"SLFIND"
"RTN","RCTCSP2",260,0)
 S REC=REC_$$BLANK(450-$L(REC))
"RTN","RCTCSP2",261,0)
 S ^XTMP("RCTCSPD",$J,BILL,ACTION,3)=REC
"RTN","RCTCSP2",262,0)
 S $P(^XTMP("RCTCSPD",$J,"BILL",ACTION,BILL),U,1)=$$TAXID(DEBTOR)
"RTN","RCTCSP2",263,0)
 Q
"RTN","RCTCSP2",264,0)
 ;
"RTN","RCTCSP2",265,0)
DATE8(X) ;changes fileman date into 8 digit date yyyymmdd
"RTN","RCTCSP2",266,0)
 I +X S X=X+17000000
"RTN","RCTCSP2",267,0)
 S X=$E(X,1,8)
"RTN","RCTCSP2",268,0)
 Q X
"RTN","RCTCSP2",269,0)
 ;
"RTN","RCTCSP2",270,0)
AMOUNT(X) ;changes amount to zero filled, right justified
"RTN","RCTCSP2",271,0)
 S:X<0 X=-X
"RTN","RCTCSP2",272,0)
 S X=$TR($J(X,0,2),".")
"RTN","RCTCSP2",273,0)
 S X=$E("000000000000",1,14-$L(X))_X
"RTN","RCTCSP2",274,0)
 Q X
"RTN","RCTCSP2",275,0)
 ;
"RTN","RCTCSP2",276,0)
BLANK(X) ;returns 'x' blank spaces
"RTN","RCTCSP2",277,0)
 N BLANK
"RTN","RCTCSP2",278,0)
 S BLANK="",$P(BLANK," ",X+1)=""
"RTN","RCTCSP2",279,0)
 Q BLANK
"RTN","RCTCSP2",280,0)
 ;
"RTN","RCTCSP2",281,0)
RJZF(X,Y) ;right justify zero fill width Y
"RTN","RCTCSP2",282,0)
 S X=$E("000000000000",1,Y-$L(X))_X
"RTN","RCTCSP2",283,0)
 Q X
"RTN","RCTCSP2",284,0)
 ;
"RTN","RCTCSP2",285,0)
LJSF(X,Y) ;left justified space filled
"RTN","RCTCSP2",286,0)
 S X=$E(X,1,Y)
"RTN","RCTCSP2",287,0)
 S X=X_$$BLANK(Y-$L(X))
"RTN","RCTCSP2",288,0)
 Q X
"RTN","RCTCSP2",289,0)
 ;
"RTN","RCTCSP2",290,0)
LJZF(X,Y) ;x left justified, y zero filled
"RTN","RCTCSP2",291,0)
 S X=X_"0000000000"
"RTN","RCTCSP2",292,0)
 S X=$E(X,X,Y)
"RTN","RCTCSP2",293,0)
 Q X
"RTN","RCTCSP2",294,0)
 ;
"RTN","RCTCSP2",295,0)
TAXID(DEBTOR) ;computes TAXID to place on documents
"RTN","RCTCSP2",296,0)
 N TAXID,DIC,DA,DR,DIQ
"RTN","RCTCSP2",297,0)
 S TAXID=$$SSN^RCFN01(DEBTOR)
"RTN","RCTCSP2",298,0)
 S TAXID=$$LJSF(TAXID,9)
"RTN","RCTCSP2",299,0)
 Q TAXID
"RTN","RCTCSP2",300,0)
 ;
"RTN","RCTCSP2",301,0)
DTFRMTO(PROMPT) ;Get from and to dates  (added as per PRCA*4.5*315 to be able to sort by dates for reports)
"RTN","RCTCSP2",302,0)
 ;INPUT:
"RTN","RCTCSP2",303,0)
 ;   PROMPT - Message to display prior to prompting for dates
"RTN","RCTCSP2",304,0)
 ;OUTPUT:
"RTN","RCTCSP2",305,0)
 ;    1^BEGDT^ENDDT - Data found
"RTN","RCTCSP2",306,0)
 ;    0             - User up arrowed or timed out
"RTN","RCTCSP2",307,0)
 ;
"RTN","RCTCSP2",308,0)
 N %DT,Y,X,BEGDT,ENDDT,DTOUT,OUT,DIRUT,DUOUT,DIROUT
"RTN","RCTCSP2",309,0)
 S OUT=0
"RTN","RCTCSP2",310,0)
 W !,$G(PROMPT)
"RTN","RCTCSP2",311,0)
 S %DT="AEX"
"RTN","RCTCSP2",312,0)
 S %DT("A")="Date Range: FROM: " ;Enter Beginning Date: "
"RTN","RCTCSP2",313,0)
 S %DT("B")="T-30"
"RTN","RCTCSP2",314,0)
 W !
"RTN","RCTCSP2",315,0)
 D ^%DT
"RTN","RCTCSP2",316,0)
 K %DT
"RTN","RCTCSP2",317,0)
 Q:Y<0 OUT  ;Quit if user time out or didn't enter valid date
"RTN","RCTCSP2",318,0)
 S DTFROM=+Y
"RTN","RCTCSP2",319,0)
 S %DT="AEX"
"RTN","RCTCSP2",320,0)
 S %DT("A")="              TO:   ",%DT("B")="T" ;"TODAY"
"RTN","RCTCSP2",321,0)
 D ^%DT
"RTN","RCTCSP2",322,0)
 K %DT
"RTN","RCTCSP2",323,0)
 ;Quit if user time out or didn't enter valid date
"RTN","RCTCSP2",324,0)
 Q:Y<0 OUT
"RTN","RCTCSP2",325,0)
 S DTTO=+Y
"RTN","RCTCSP2",326,0)
 S OUT=1_U_DTFROM_U_DTTO
"RTN","RCTCSP2",327,0)
 ;Switch dates if Begin Date is more recent than End Date
"RTN","RCTCSP2",328,0)
 S:DTFROM>DTTO OUT=1_U_DTTO_U_DTFROM
"RTN","RCTCSP2",329,0)
 Q OUT
"RTN","RCTCSP2",330,0)
 ;
"RTN","RCTCSP3")
0^22^B80430487^B79802534
"RTN","RCTCSP3",1,0)
RCTCSP3 ;ALBANY/BDB-CROSS-SERVICING TRANSMISSION ;03/15/14 3:34 PM
"RTN","RCTCSP3",2,0)
 ;;4.5;Accounts Receivable;**301,315**;Mar 20, 1995;Build 67
"RTN","RCTCSP3",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSP3",4,0)
 ;
"RTN","RCTCSP3",5,0)
 Q
"RTN","RCTCSP3",6,0)
 ;
"RTN","RCTCSP3",7,0)
ENTER ;Entry point from the post initialization
"RTN","RCTCSP3",8,0)
RCCSTUP I '$D(^XTMP("REJCDCONV")) D
"RTN","RCTCSP3",9,0)
 . D NOW^%DTC S RCCSTART=%
"RTN","RCTCSP3",10,0)
 . S ^XTMP("REJCDCONV","START COMPILE")=RCCSTART
"RTN","RCTCSP3",11,0)
 . S ^XTMP("REJCDCONV","STATUS")="RUNNING"
"RTN","RCTCSP3",12,0)
 . S ^XTMP("REJCDCONV",0)=$$FMADD^XLFDT(RCCSTART,730)_"^"_RCCSTART
"RTN","RCTCSP3",13,0)
 S RCCCMPLT=0 I $G(^XTMP("REJCDCONV","STATUS"))="COMPLETE" S RCCCMPLT=1
"RTN","RCTCSP3",14,0)
AA N DEBTOR
"RTN","RCTCSP3",15,0)
 S DEBTOR=0
"RTN","RCTCSP3",16,0)
 F  S DEBTOR=$O(^PRCA(430,"C",DEBTOR)) Q:DEBTOR'?1N.N  D
"RTN","RCTCSP3",17,0)
 .N X,RCDFN,DEMCS,DEBTOR0,DEBTOR1,DEBTOR7,BILL
"RTN","RCTCSP3",18,0)
 .S DEBTOR0=^RCD(340,DEBTOR,0),DEBTOR1=$G(^(1)),DEBTOR7=$G(^(7))
"RTN","RCTCSP3",19,0)
 .S RCDFN=+DEBTOR0
"RTN","RCTCSP3",20,0)
 .S DEMCS=$$DEM^RCTCSP1(RCDFN) Q:$E($P(DEMCS,U,3),1,5)="00000"
"RTN","RCTCSP3",21,0)
 .Q:+$P(DEMCS,U,4)  ;deceased patient
"RTN","RCTCSP3",22,0)
 .S BILL=0
"RTN","RCTCSP3",23,0)
 .F  S BILL=$O(^PRCA(430,"C",DEBTOR,BILL)) Q:BILL'?1N.N  D
"RTN","RCTCSP3",24,0)
 ..N B0,B6,B7,B14,CAT,TOTAL
"RTN","RCTCSP3",25,0)
 ..S B0=$G(^PRCA(430,BILL,0)),B6=$G(^(6)),B7=$G(^(7)),B14=$G(^(14))
"RTN","RCTCSP3",26,0)
 ..I 'RCCCMPLT,$D(^PRCA(430,BILL,18)) D REJCODE
"RTN","RCTCSP3",27,0)
 ..I $D(^PRCA(430,"TCSP",BILL)) Q  ;no dpn for cs bills
"RTN","RCTCSP3",28,0)
 ..Q:'$P(B0,U,2)  ;no category
"RTN","RCTCSP3",29,0)
 ..S CAT=$P($G(^PRCA(430.2,$P(B0,U,2),0)),U,7)
"RTN","RCTCSP3",30,0)
 ..Q:'CAT
"RTN","RCTCSP3",31,0)
 ..I ",4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,28,33,34,35,36,37,38,39,"[(","_CAT_",") Q  ;1st party check
"RTN","RCTCSP3",32,0)
 ..I +$P(B14,U,1) Q  ;bill referred to TOP
"RTN","RCTCSP3",33,0)
 ..S TOTAL=$P(B7,U)+$P(B7,U,2)+$P(B7,U,3)+$P(B7,U,4)+$P(B7,U,5)
"RTN","RCTCSP3",34,0)
 ..I TOTAL'>0 Q  ;total must be greater than zero
"RTN","RCTCSP3",35,0)
 ..I '$P(B0,U,8) Q  ;if no current status
"RTN","RCTCSP3",36,0)
 ..I $P(B0,U,8)=23 Q  ;quit if write-off
"RTN","RCTCSP3",37,0)
 ..I $P(B0,U,8)=26 Q  ;quit if cancelled
"RTN","RCTCSP3",38,0)
 ..I $P(B0,U,8)=39 Q  ;quit if cancellation
"RTN","RCTCSP3",39,0)
 ..I TOTAL<25 S $P(^PRCA(430,BILL,20),U,3,8)="1^^^^^" ;set dpn flag
"RTN","RCTCSP3",40,0)
 ..Q
"RTN","RCTCSP3",41,0)
 .Q
"RTN","RCTCSP3",42,0)
 I RCCCMPLT'=1 D
"RTN","RCTCSP3",43,0)
 . D NOW^%DTC S RCCEND=%
"RTN","RCTCSP3",44,0)
 . S ^XTMP("REJCDCONV","END REJ CODE CONV")=RCCEND
"RTN","RCTCSP3",45,0)
 . S ^XTMP("REJCDCONV","STATUS")="COMPLETE"
"RTN","RCTCSP3",46,0)
 Q
"RTN","RCTCSP3",47,0)
 ;  
"RTN","RCTCSP3",48,0)
DUEPROC ; called from rctcspd
"RTN","RCTCSP3",49,0)
 N TOTAL
"RTN","RCTCSP3",50,0)
 S TOTAL=$P(B7,U)+$P(B7,U,2)+$P(B7,U,3)+$P(B7,U,4)+$P(B7,U,5)
"RTN","RCTCSP3",51,0)
 I TOTAL<25 Q  ;no dpn record for bills less than $25
"RTN","RCTCSP3",52,0)
 I $P($G(DEBTOR3),U,10) Q  ;check site delete flag null
"RTN","RCTCSP3",53,0)
 I +$P(B12,U,1) Q  ;check date bill sent to dmc
"RTN","RCTCSP3",54,0)
 I $P(B6,U,4),($P(B6,U,5)="DOJ") Q  ;bill referred to doj
"RTN","RCTCSP3",55,0)
 I $P(B0,U,8)'=16 Q  ;status active
"RTN","RCTCSP3",56,0)
 I '$P(B6,U,3) Q  ;must have a 3rd letter
"RTN","RCTCSP3",57,0)
 D RECDPN ;create a dpn record
"RTN","RCTCSP3",58,0)
 Q
"RTN","RCTCSP3",59,0)
 ;
"RTN","RCTCSP3",60,0)
RECDPN ;
"RTN","RCTCSP3",61,0)
 N KNUM,NAME
"RTN","RCTCSP3",62,0)
 S REC="C"
"RTN","RCTCSP3",63,0)
 S REC=REC_$$RJZF(BILL,10)
"RTN","RCTCSP3",64,0)
 S REC=REC_$$TAXID(DEBTOR)
"RTN","RCTCSP3",65,0)
 S NAME=$$NAMEFF(+DEBTOR0),NAME=$P(NAME,U)
"RTN","RCTCSP3",66,0)
 S REC=REC_$$LJSF(NAME,30)
"RTN","RCTCSP3",67,0)
 S RCDFN=+DEBTOR0
"RTN","RCTCSP3",68,0)
 S ADDRCS=$$ADDR(RCDFN)
"RTN","RCTCSP3",69,0)
 S REC=REC_$$LJSF($P(ADDRCS,U,1),35)_$$LJSF($P(ADDRCS,U,2),35)_$$LJSF($P(ADDRCS,U,3),15)
"RTN","RCTCSP3",70,0)
 S REC=REC_$$LJSF($P(ADDRCS,U,8),20)
"RTN","RCTCSP3",71,0)
 S REC=REC_$$BLANK(5)
"RTN","RCTCSP3",72,0)
 S REC=REC_$$LJSF($P(ADDRCS,U,4),2)_$$LJSF($P(ADDRCS,U,5),9)
"RTN","RCTCSP3",73,0)
 S REC=REC_$$COUNTRY^RCTCSP1A($P(ADDRCS,U,7))  ;Changed routine due to SACC size issue PRCA*4.5*315
"RTN","RCTCSP3",74,0)
 S TOTAL=$P(B7,U)+$P(B7,U,2)+$P(B7,U,3)+$P(B7,U,4)+$P(B7,U,5)
"RTN","RCTCSP3",75,0)
 S REC=REC_$$BLANK(9)
"RTN","RCTCSP3",76,0)
 S REC=REC_$$DATE8(+$P(B6,U,21))
"RTN","RCTCSP3",77,0)
 S KNUM=$P($P(B0,U,1),"-",2)
"RTN","RCTCSP3",78,0)
 S REC=REC_$E(SITE,1,3)_$$LJSF(KNUM,7)
"RTN","RCTCSP3",79,0)
 S REC=REC_$$AMOUNT9(TOTAL)
"RTN","RCTCSP3",80,0)
 S REC=REC_$$LJSF($P(ADDRCS,U,9),10)
"RTN","RCTCSP3",81,0)
 S REC=REC_$S($P(ADDRCS,U,9)="":" ",$P(ADDRCS,U,9)="US":" ",1:"F")
"RTN","RCTCSP3",82,0)
 S REC=REC_$$BLANK(250-$L(REC))
"RTN","RCTCSP3",83,0)
 S $P(^PRCA(430,BILL,20),U,4)=DT ;set the dpn request date
"RTN","RCTCSP3",84,0)
 S $P(^PRCA(430,BILL,20),U,5,8)="^^^" ;clear the print date and error codes
"RTN","RCTCSP3",85,0)
 S ^XTMP("RCTCSPDN",$J,BILL,"DPN",1)=REC
"RTN","RCTCSP3",86,0)
 S ^XTMP("RCTCSPDN",$J,"BILL","DPN",BILL)=$$TAXID(DEBTOR)_"^"_+$E(REC,201,207)_"."_$E(REC,208,209) ;sends mailman message of documents sent to user
"RTN","RCTCSP3",87,0)
 Q
"RTN","RCTCSP3",88,0)
 ;
"RTN","RCTCSP3",89,0)
COMPILED ;
"RTN","RCTCSP3",90,0)
 N RCMSG,BCNTR,REC,RECC,AMOUNT,AMOUNT,RCNTR,ACTION,SEQ,EOF
"RTN","RCTCSP3",91,0)
 S BCNTR=0,REC=0,RECC=0,AMOUNT=0,SEQ=0,EOF=0
"RTN","RCTCSP3",92,0)
 F  S BCNTR=$O(^XTMP("RCTCSPDN",$J,BCNTR)) S:+BCNTR'>0 EOF=1 Q:+BCNTR'>0  D
"RTN","RCTCSP3",93,0)
 .I REC>120 D
"RTN","RCTCSP3",94,0)
 ..D TRAILERD
"RTN","RCTCSP3",95,0)
 ..D AITCMSGD
"RTN","RCTCSP3",96,0)
 ..S REC=0,RECC=0
"RTN","RCTCSP3",97,0)
 ..Q
"RTN","RCTCSP3",98,0)
 .S ACTION="DPN"
"RTN","RCTCSP3",99,0)
 .I REC=0 D HEADERD
"RTN","RCTCSP3",100,0)
 .S RCNTR=1 I $D(^XTMP("RCTCSPDN",$J,BCNTR,ACTION,RCNTR)) D
"RTN","RCTCSP3",101,0)
 ..S REC=REC+1
"RTN","RCTCSP3",102,0)
 ..S RECC=RECC+1 ;record count for 'c' records on trailer record
"RTN","RCTCSP3",103,0)
 ..S ^XTMP("RCTCSPDN",$J,SEQ,"BUILD",REC)=^XTMP("RCTCSPDN",$J,BCNTR,ACTION,RCNTR)_$C(126)
"RTN","RCTCSP3",104,0)
 ..S AMOUNT=AMOUNT+$E(^XTMP("RCTCSPDN",$J,BCNTR,ACTION,RCNTR),201,209)
"RTN","RCTCSP3",105,0)
 ..Q
"RTN","RCTCSP3",106,0)
 .Q
"RTN","RCTCSP3",107,0)
 D TRAILERD
"RTN","RCTCSP3",108,0)
 D AITCMSGD
"RTN","RCTCSP3",109,0)
 D USRMSGD
"RTN","RCTCSP3",110,0)
 Q
"RTN","RCTCSP3",111,0)
 ;
"RTN","RCTCSP3",112,0)
AITCMSGD ;
"RTN","RCTCSP3",113,0)
 N XMY,XMDUZ,XMSUB,XMTEXT
"RTN","RCTCSP3",114,0)
 Q:'$D(^XTMP("RCTCSPDN",$J))
"RTN","RCTCSP3",115,0)
 S CNTLID=$$JD()_$$RJZF(SEQ,4)
"RTN","RCTCSP3",116,0)
 S XMDUZ="AR PACKAGE"
"RTN","RCTCSP3",117,0)
 S XMY("XXX@Q-TPL.DOMAIN.EXT")=""
"RTN","RCTCSP3",118,0)
 S XMY("G.TCSP")=""
"RTN","RCTCSP3",119,0)
 S XMSUB=SITE_"/DPN TRANSMISSION/BATCH#: "_CNTLID
"RTN","RCTCSP3",120,0)
 S XMTEXT="^XTMP(""RCTCSPDN"","_$J_","""_SEQ_""",""BUILD"","
"RTN","RCTCSP3",121,0)
 D ^XMD
"RTN","RCTCSP3",122,0)
 Q
"RTN","RCTCSP3",123,0)
 ;
"RTN","RCTCSP3",124,0)
USRMSGD ;sends mailman message of documents sent to user
"RTN","RCTCSP3",125,0)
 N XMY,XMDUZ,XMSUB,XMTEXT,X,RCNT,RCDAT1,RCDAT2
"RTN","RCTCSP3",126,0)
 Q:'$D(^XTMP("RCTCSPDN",$J))
"RTN","RCTCSP3",127,0)
 S ACTION="DPN"
"RTN","RCTCSP3",128,0)
 K ^XTMP("RCTCSPDN",$J,"BILL","MSG")
"RTN","RCTCSP3",129,0)
 S XMDUZ="AR PACKAGE"
"RTN","RCTCSP3",130,0)
 S XMY("G.TCSP")=""
"RTN","RCTCSP3",131,0)
 S XMSUB="CS DUE PROCESS"_" SENT ON "_$E(DT,4,5)_"/"_$E(DT,6,7)_"/"_$E(DT,2,3)_" BATCH ID: "_CNTLID
"RTN","RCTCSP3",132,0)
 S ^XTMP("RCTCSPDN",$J,"BILL","MSG",1)="Bill#                            TIN         TYPE       AMOUNT"
"RTN","RCTCSP3",133,0)
 S ^XTMP("RCTCSPDN",$J,"BILL","MSG",2)="-----                            ---         ----       ------"
"RTN","RCTCSP3",134,0)
 S X=0,RCNT=2 F  S X=$O(^XTMP("RCTCSPDN",$J,"BILL",ACTION,X)) Q:X=""  D
"RTN","RCTCSP3",135,0)
 .S RCNT=RCNT+1
"RTN","RCTCSP3",136,0)
 .S RCDAT1=$P(^XTMP("RCTCSPDN",$J,"BILL",ACTION,X),U,1)
"RTN","RCTCSP3",137,0)
 .S RCDAT2=$P(^XTMP("RCTCSPDN",$J,"BILL",ACTION,X),U,2)
"RTN","RCTCSP3",138,0)
 .S ^XTMP("RCTCSPDN",$J,"BILL","MSG",RCNT)=$$RJZF($P($G(^PRCA(430,X,0)),U,1),7)_$$BLANK(22)_RCDAT1_"   "_ACTION_"        "_$S(RCDAT2]"":RCDAT2,1:"")
"RTN","RCTCSP3",139,0)
 .Q
"RTN","RCTCSP3",140,0)
 S ^XTMP("RCTCSPDN",$J,"BILL","MSG",RCNT+1)="Total Bills: "_(RCNT-2)
"RTN","RCTCSP3",141,0)
 S XMTEXT="^XTMP(""RCTCSPDN"","_$J_",""BILL"",""MSG"","
"RTN","RCTCSP3",142,0)
 D ^XMD
"RTN","RCTCSP3",143,0)
 K ^XTMP("RCTCSPDN",$J,"BILL","MSG")
"RTN","RCTCSP3",144,0)
 Q
"RTN","RCTCSP3",145,0)
 ;
"RTN","RCTCSP3",146,0)
HEADERD ;
"RTN","RCTCSP3",147,0)
 ;increment batch sequence number, build new header
"RTN","RCTCSP3",148,0)
 N RCMSG
"RTN","RCTCSP3",149,0)
 S SEQ=SEQ+1
"RTN","RCTCSP3",150,0)
 S CNTLID=$$JD()_$$RJZF(SEQ,4)
"RTN","RCTCSP3",151,0)
 K ^XTMP("RCTCSPDN",$J,ACTION,"BUILD",SEQ)
"RTN","RCTCSP3",152,0)
 S RCMSG="H"_CNTLID_$$BLANK(14)_"3636001200" ;header is record type H
"RTN","RCTCSP3",153,0)
 S RCMSG=RCMSG_$$BLANK(250-$L(RCMSG))
"RTN","RCTCSP3",154,0)
 S REC=REC+1
"RTN","RCTCSP3",155,0)
 S ^XTMP("RCTCSPDN",$J,SEQ,"BUILD",REC)=RCMSG_$C(126)
"RTN","RCTCSP3",156,0)
 Q
"RTN","RCTCSP3",157,0)
 ;
"RTN","RCTCSP3",158,0)
TRAILERD ;
"RTN","RCTCSP3",159,0)
 ;trailer is type Z record
"RTN","RCTCSP3",160,0)
 I REC=0 K ^XTMP("RCTCSPDN",$J,SEQ,"BUILD") Q  ;delete batch if no records processed
"RTN","RCTCSP3",161,0)
 N RCMSG
"RTN","RCTCSP3",162,0)
 S CNTLID=$$JD()_$$RJZF(SEQ,4)
"RTN","RCTCSP3",163,0)
 S RCMSG="Z"_$$RJZF(RECC,8)_$$AMOUNT(AMOUNT/100)_CNTLID_$$BLANK(14)_"3636001200"
"RTN","RCTCSP3",164,0)
 S RCMSG=RCMSG_$$BLANK(250-$L(RCMSG))
"RTN","RCTCSP3",165,0)
 S:EOF $E(RCMSG,229,236)="0001"_$$RJZF(SEQ,4)
"RTN","RCTCSP3",166,0)
 S REC=REC+1
"RTN","RCTCSP3",167,0)
 S ^XTMP("RCTCSPDN",$J,SEQ,"BUILD",REC)=RCMSG_$C(126)
"RTN","RCTCSP3",168,0)
 S REC=0,RECC=0,AMOUNT=0
"RTN","RCTCSP3",169,0)
 Q
"RTN","RCTCSP3",170,0)
 ;
"RTN","RCTCSP3",171,0)
DATE8(X) ;changes fileman date into 8 digit date yyyymmdd
"RTN","RCTCSP3",172,0)
 I +X S X=X+17000000
"RTN","RCTCSP3",173,0)
 S X=$E(X,1,8)
"RTN","RCTCSP3",174,0)
 Q X
"RTN","RCTCSP3",175,0)
 ;
"RTN","RCTCSP3",176,0)
AMOUNT(X) ;changes amount to zero filled, right justified, 14 characters
"RTN","RCTCSP3",177,0)
 S:X<0 X=-X
"RTN","RCTCSP3",178,0)
 S X=$TR($J(X,0,2),".")
"RTN","RCTCSP3",179,0)
 S X=$E("000000000000",1,14-$L(X))_X
"RTN","RCTCSP3",180,0)
 Q X
"RTN","RCTCSP3",181,0)
 ;
"RTN","RCTCSP3",182,0)
AMOUNT9(X) ;changes amount to zero filled, right justified
"RTN","RCTCSP3",183,0)
 S:X<0 X=-X
"RTN","RCTCSP3",184,0)
 S X=$TR($J(X,0,2),".")
"RTN","RCTCSP3",185,0)
 S X=$E("000000000000",1,9-$L(X))_X
"RTN","RCTCSP3",186,0)
 Q X
"RTN","RCTCSP3",187,0)
 ;
"RTN","RCTCSP3",188,0)
BLANK(X) ;returns 'x' blank spaces
"RTN","RCTCSP3",189,0)
 N BLANK
"RTN","RCTCSP3",190,0)
 S BLANK="",$P(BLANK," ",X+1)=""
"RTN","RCTCSP3",191,0)
 Q BLANK
"RTN","RCTCSP3",192,0)
 ;
"RTN","RCTCSP3",193,0)
RJZF(X,Y) ;right justify zero fill width Y
"RTN","RCTCSP3",194,0)
 S X=$E("000000000000",1,Y-$L(X))_X
"RTN","RCTCSP3",195,0)
 Q X
"RTN","RCTCSP3",196,0)
 ;
"RTN","RCTCSP3",197,0)
LJSF(X,Y) ;left justified space filled
"RTN","RCTCSP3",198,0)
 S X=$E(X,1,Y)
"RTN","RCTCSP3",199,0)
 S X=X_$$BLANK(Y-$L(X))
"RTN","RCTCSP3",200,0)
 Q X
"RTN","RCTCSP3",201,0)
 ;
"RTN","RCTCSP3",202,0)
LJZF(X,Y) ;x left justified, y zero filled
"RTN","RCTCSP3",203,0)
 S X=X_"0000000000"
"RTN","RCTCSP3",204,0)
 S X=$E(X,X,Y)
"RTN","RCTCSP3",205,0)
 Q X
"RTN","RCTCSP3",206,0)
 ;
"RTN","RCTCSP3",207,0)
TAXID(DEBTOR) ;computes TAXID to place on documents
"RTN","RCTCSP3",208,0)
 N TAXID,DIC,DA,DR,DIQ
"RTN","RCTCSP3",209,0)
 S TAXID=$$SSN^RCFN01(DEBTOR)
"RTN","RCTCSP3",210,0)
 S TAXID=$$LJSF(TAXID,9)
"RTN","RCTCSP3",211,0)
 Q TAXID
"RTN","RCTCSP3",212,0)
 ;
"RTN","RCTCSP3",213,0)
JD() ; returns today's Julian date YDOY
"RTN","RCTCSP3",214,0)
 N XMDDD,XMNOW,XMDT
"RTN","RCTCSP3",215,0)
 S XMNOW=$$NOW^XLFDT
"RTN","RCTCSP3",216,0)
 S XMDT=$E(XMNOW,1,7)
"RTN","RCTCSP3",217,0)
 S XMDDD=$$RJ^XLFSTR($$FMDIFF^XLFDT(XMDT,$E(XMDT,1,3)_"0101",1)+1,3,"0")
"RTN","RCTCSP3",218,0)
 Q $E(DT,3)_XMDDD
"RTN","RCTCSP3",219,0)
 ;
"RTN","RCTCSP3",220,0)
NAMEFF(DFN) ;returns name for document and name in file
"RTN","RCTCSP3",221,0)
 N FN,LN,MN,NM,DOCNM,VA,VADM
"RTN","RCTCSP3",222,0)
 S NM=""
"RTN","RCTCSP3",223,0)
 D DEM^VADPT
"RTN","RCTCSP3",224,0)
 I $D(VADM) S NM=VADM(1)
"RTN","RCTCSP3",225,0)
 S LN=$TR($P(NM,",")," .'-"),MN=$P($P(NM,",",2)," ",2)
"RTN","RCTCSP3",226,0)
 I ($E(MN,1,2)="SR")!($E(MN,1,2)="JR")!(MN?2.3"I")!(MN?0.1"I"1"V"1.3"I") S MN=""
"RTN","RCTCSP3",227,0)
 S FN=$P($P(NM,",",2)," ")
"RTN","RCTCSP3",228,0)
 S DOCNM=LN_", "_FN_" "_MN
"RTN","RCTCSP3",229,0)
 Q DOCNM
"RTN","RCTCSP3",230,0)
 ;
"RTN","RCTCSP3",231,0)
ADDR(RCDFN) ; returns patient file address
"RTN","RCTCSP3",232,0)
 N DFN,ADDRCS,STATEIEN,STATEAB,VAPA
"RTN","RCTCSP3",233,0)
 S DFN=RCDFN
"RTN","RCTCSP3",234,0)
 D ADD^VADPT
"RTN","RCTCSP3",235,0)
 S STATEIEN=+VAPA(5),STATEAB=$$GET1^DIQ(5,STATEIEN,1)
"RTN","RCTCSP3",236,0)
 S ADDRCS=VAPA(1)_U_VAPA(2)_U_VAPA(4)_U_STATEAB_U_VAPA(6)_U_VAPA(8)_U_+VAPA(25)_U_VAPA(23)_U_VAPA(24) ;25-country,23-province,24-postal code
"RTN","RCTCSP3",237,0)
 I $L(DEBTOR1)>0 I $P(DEBTOR1,U,1,5)'?1"^"."^" D
"RTN","RCTCSP3",238,0)
 .N ADDR340
"RTN","RCTCSP3",239,0)
 .S ADDR340=$P($$DADD^RCAMADD(DEBTOR),U,1,7)_"^"_1
"RTN","RCTCSP3",240,0)
 .S ADDR340=$P(ADDR340,U,1,2)_"^"_$P(ADDR340,U,4,99)
"RTN","RCTCSP3",241,0)
 .I $P(ADDR340,U,6)="" S $P(ADDR340,U,6)=$P(ADDRCS,U,6)
"RTN","RCTCSP3",242,0)
 .S ADDRCS=ADDR340
"RTN","RCTCSP3",243,0)
 Q ADDRCS
"RTN","RCTCSP3",244,0)
 ;
"RTN","RCTCSP3",245,0)
REJCODE ;Converts AITC reject codes in reject multiple to pointer to file 348.5
"RTN","RCTCSP3",246,0)
 N RRI,REJI,REJCD,HREJREC,REJREC S RRI=0
"RTN","RCTCSP3",247,0)
REJA S RRI=$O(^PRCA(430,BILL,18,RRI)) Q:'RRI
"RTN","RCTCSP3",248,0)
 S REJREC=$G(^PRCA(430,BILL,18,RRI,0)),HREJREC=REJREC,REJI=3 G REJA:REJREC=""
"RTN","RCTCSP3",249,0)
 I $D(^XTMP("REJCDCONV","BB",BILL,18,RRI,0)) G REJA
"RTN","RCTCSP3",250,0)
 F REJI=REJI:1:13 S REJCD=$P(REJREC,U,REJI) I REJCD'="" D
"RTN","RCTCSP3",251,0)
 . I REJI=12,$D(^RC(348.7,"B",REJCD)) S $P(REJREC,U,REJI)=$O(^RC(348.7,"B",REJCD,0)) Q
"RTN","RCTCSP3",252,0)
 . I REJI=13,$D(^RC(348.6,"B",REJCD)) S $P(REJREC,U,REJI)=$O(^RC(348.6,"B",REJCD,0)) Q
"RTN","RCTCSP3",253,0)
 . I REJI>11 S ^XTMP("REJCDCONV","XX",BILL,18,RRI,0)=REJI_U_HREJREC Q
"RTN","RCTCSP3",254,0)
 . I REJCD>9,REJCD<100 Q
"RTN","RCTCSP3",255,0)
 . I REJCD?1.N,((REJCD>"00")&(REJCD<"10"))!((+REJCD>0)&(+REJCD<10)) S $P(REJREC,U,REJI)=+REJCD Q
"RTN","RCTCSP3",256,0)
 . I $D(^RC(348.5,"B",REJCD)) S $P(REJREC,U,REJI)=$O(^RC(348.5,"B",REJCD,0)) Q
"RTN","RCTCSP3",257,0)
 . S $P(REJREC,U,REJI)=298,^XTMP("REJCDCONV","ZZ",BILL,18,RRI,0)=$P(HREJREC,U,REJI)
"RTN","RCTCSP3",258,0)
 . Q
"RTN","RCTCSP3",259,0)
 I HREJREC'=REJREC S ^XTMP("REJCDCONV","BB",BILL,18,RRI,0)=HREJREC,^XTMP("REJCDCONV","BB",BILL,18,RRI,1)=REJREC,^PRCA(430,BILL,18,RRI,0)=REJREC
"RTN","RCTCSP3",260,0)
 G REJA
"RTN","RCTCSP4")
0^15^B223432725^n/a
"RTN","RCTCSP4",1,0)
RCTCSP4 ;ALB/ESG - CS Debt Referral Stop Reactivate Report ;6/1/2017
"RTN","RCTCSP4",2,0)
 ;;4.5;Accounts Receivable;**315**;Mar 20, 1995;Build 67
"RTN","RCTCSP4",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSP4",4,0)
 ;
"RTN","RCTCSP4",5,0)
 Q
"RTN","RCTCSP4",6,0)
 ;
"RTN","RCTCSP4",7,0)
EN ; main report entry point
"RTN","RCTCSP4",8,0)
 ;
"RTN","RCTCSP4",9,0)
 N RCTCFLG,RCTCDEBT1,RCTCDEBT2,RCTCDATE,RCTCEXCEL
"RTN","RCTCSP4",10,0)
 ;
"RTN","RCTCSP4",11,0)
P1 I '$$FLAGGED(.RCTCFLG) G EX                ; currently flagged/reactivated/both
"RTN","RCTCSP4",12,0)
P2 I '$$DEBTFR(.RCTCDEBT1) G EX:$$STOP,P1     ; start with debtor
"RTN","RCTCSP4",13,0)
P3 I '$$DEBTTO(.RCTCDEBT2) G EX:$$STOP,P2     ; go to debtor
"RTN","RCTCSP4",14,0)
P4 I '$$DATES(.RCTCDATE) G EX:$$STOP,P3       ; all dates or a date range; from and thru dates
"RTN","RCTCSP4",15,0)
P5 I '$$FORMAT(.RCTCEXCEL) G EX:$$STOP,P4     ; output format (standard or Excel)
"RTN","RCTCSP4",16,0)
P6 I '$$DEVICE() G EX:$$STOP,P5               ; output device/queueing
"RTN","RCTCSP4",17,0)
 ;
"RTN","RCTCSP4",18,0)
EX ; main report exit point
"RTN","RCTCSP4",19,0)
 Q
"RTN","RCTCSP4",20,0)
 ;
"RTN","RCTCSP4",21,0)
STOP() ; Determine if user wants to exit out of the option entirely
"RTN","RCTCSP4",22,0)
 ; 1=yes, get out entirely
"RTN","RCTCSP4",23,0)
 ; 0=no, just go back to the previous question
"RTN","RCTCSP4",24,0)
 ;
"RTN","RCTCSP4",25,0)
 N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","RCTCSP4",26,0)
 ;
"RTN","RCTCSP4",27,0)
 S DIR(0)="Y"
"RTN","RCTCSP4",28,0)
 S DIR("A")="Do you want to exit out of this option entirely"
"RTN","RCTCSP4",29,0)
 S DIR("B")="YES"
"RTN","RCTCSP4",30,0)
 S DIR("?",1)="  Enter YES to immediately exit out of this option."
"RTN","RCTCSP4",31,0)
 S DIR("?")="  Enter NO to return to the previous question."
"RTN","RCTCSP4",32,0)
 W ! D ^DIR K DIR
"RTN","RCTCSP4",33,0)
 I $D(DIRUT) S Y=1
"RTN","RCTCSP4",34,0)
 Q Y
"RTN","RCTCSP4",35,0)
 ;
"RTN","RCTCSP4",36,0)
FLAGGED(RCTCFLG) ; capture if the user wants bills with a current flag, reactivated, or both
"RTN","RCTCSP4",37,0)
 ; RCTCFLG=C meaning data is currently present in the STOP TCSP REFERRAL FLAG field (430,157)
"RTN","RCTCSP4",38,0)
 ; RCTCFLG=R meaning data is currently blank in the STOP TCSP REFERRAL FLAG field (430,157)
"RTN","RCTCSP4",39,0)
 ; RCTCFLG=B meaning either is wanted
"RTN","RCTCSP4",40,0)
 ; pass parameter by reference
"RTN","RCTCSP4",41,0)
 ;
"RTN","RCTCSP4",42,0)
 N RET,DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","RCTCSP4",43,0)
 S RCTCFLG="",RET=1
"RTN","RCTCSP4",44,0)
 S DIR(0)="S"
"RTN","RCTCSP4",45,0)
 S $P(DIR(0),U,2)="C:Currently Flagged;R:Reactivated;B:Both"
"RTN","RCTCSP4",46,0)
 S DIR("A")="Run the Report for"
"RTN","RCTCSP4",47,0)
 S DIR("B")="B"
"RTN","RCTCSP4",48,0)
 S DIR("?",1)="Select 'Currently Flagged' to see bills which currently have the Cross-"
"RTN","RCTCSP4",49,0)
 S DIR("?",2)="Servicing activity stop flag set."
"RTN","RCTCSP4",50,0)
 S DIR("?",3)="Select 'Reactivated' to see bills in which the stop flag is not currently"
"RTN","RCTCSP4",51,0)
 S DIR("?",4)="set, but was once set in the past."
"RTN","RCTCSP4",52,0)
 S DIR("?")="Select 'Both' to see bills of both types."
"RTN","RCTCSP4",53,0)
 W ! D ^DIR K DIR
"RTN","RCTCSP4",54,0)
 I $D(DIRUT)!(Y="") S RET=0 W $C(7) G FLX
"RTN","RCTCSP4",55,0)
 S RCTCFLG=Y
"RTN","RCTCSP4",56,0)
FLX ;
"RTN","RCTCSP4",57,0)
 Q RET
"RTN","RCTCSP4",58,0)
 ;
"RTN","RCTCSP4",59,0)
DEBTFR(RCTCDEBT1) ; start with debtor
"RTN","RCTCSP4",60,0)
 N RET,DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","RCTCSP4",61,0)
 S RCTCDEBT1="",RET=1
"RTN","RCTCSP4",62,0)
 S DIR(0)="F^1:75"
"RTN","RCTCSP4",63,0)
 S DIR("A")="Start with Debtor"
"RTN","RCTCSP4",64,0)
 S DIR("B")="FIRST"
"RTN","RCTCSP4",65,0)
 S DIR("?",1)="If you want to specify a range of AR debtor names, enter the beginning"
"RTN","RCTCSP4",66,0)
 S DIR("?",2)="debtor name here. If you want to include all debtors, accept the default"
"RTN","RCTCSP4",67,0)
 S DIR("?")="value of FIRST here."
"RTN","RCTCSP4",68,0)
 W ! D ^DIR K DIR
"RTN","RCTCSP4",69,0)
 I $D(DIRUT)!(Y="") S RET=0 W $C(7) G DFX
"RTN","RCTCSP4",70,0)
 S RCTCDEBT1=Y
"RTN","RCTCSP4",71,0)
DFX ;
"RTN","RCTCSP4",72,0)
 Q RET
"RTN","RCTCSP4",73,0)
 ;
"RTN","RCTCSP4",74,0)
DEBTTO(RCTCDEBT2) ; go to debtor
"RTN","RCTCSP4",75,0)
 N RET,DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","RCTCSP4",76,0)
DBT1 S RCTCDEBT2="",RET=1
"RTN","RCTCSP4",77,0)
 S DIR(0)="F^1:75"
"RTN","RCTCSP4",78,0)
 S DIR("A")="     Go to Debtor"
"RTN","RCTCSP4",79,0)
 S DIR("B")="LAST"
"RTN","RCTCSP4",80,0)
 S DIR("?",1)="If you want to specify a range of AR debtor names, enter the ending debtor"
"RTN","RCTCSP4",81,0)
 S DIR("?",2)="name here. If you want to include all debtors, accept the default value of"
"RTN","RCTCSP4",82,0)
 S DIR("?")="LAST here."
"RTN","RCTCSP4",83,0)
 D ^DIR K DIR
"RTN","RCTCSP4",84,0)
 I $D(DIRUT)!(Y="") S RET=0 W $C(7) G DTX
"RTN","RCTCSP4",85,0)
 S RCTCDEBT2=Y
"RTN","RCTCSP4",86,0)
 I RCTCDEBT1'="FIRST",RCTCDEBT2'="LAST",RCTCDEBT1]RCTCDEBT2 W $C(7),!!,"You must enter something after '",RCTCDEBT1,"'!",! G DBT1
"RTN","RCTCSP4",87,0)
DTX ;
"RTN","RCTCSP4",88,0)
 Q RET
"RTN","RCTCSP4",89,0)
 ;
"RTN","RCTCSP4",90,0)
DATES(RCTCDATE) ; all dates or a date range - also capture from and thru dates
"RTN","RCTCSP4",91,0)
 ; RCTCDATE="A" or "R" if user wants All Dates or to select a Date Range
"RTN","RCTCSP4",92,0)
 ; RCTCDATE("BEGIN")=starting FM date
"RTN","RCTCSP4",93,0)
 ; RCTCDATE("END")=ending FM date
"RTN","RCTCSP4",94,0)
 ;
"RTN","RCTCSP4",95,0)
 N RET,DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","RCTCSP4",96,0)
 K RCTCDATE
"RTN","RCTCSP4",97,0)
 S RET=1
"RTN","RCTCSP4",98,0)
 S DIR(0)="S^A:All Dates;R:Date Range"
"RTN","RCTCSP4",99,0)
 S DIR("A")="Include All Dates or Select by Date Range"
"RTN","RCTCSP4",100,0)
 S DIR("B")="Date Range"
"RTN","RCTCSP4",101,0)
 S DIR("?",1)="If you want to include all transaction entered dates, please select 'A' -"
"RTN","RCTCSP4",102,0)
 S DIR("?",2)="All Dates here.  But if you want to specify a date range for the"
"RTN","RCTCSP4",103,0)
 S DIR("?",3)="transaction entered dates, then enter 'R' here and then choose the from and"
"RTN","RCTCSP4",104,0)
 S DIR("?")="through dates."
"RTN","RCTCSP4",105,0)
 W ! D ^DIR K DIR
"RTN","RCTCSP4",106,0)
 I $D(DIRUT)!(Y="") S RET=0 W $C(7) G DATESX
"RTN","RCTCSP4",107,0)
 S RCTCDATE=Y
"RTN","RCTCSP4",108,0)
 I RCTCDATE="A" G DATESX
"RTN","RCTCSP4",109,0)
 ;
"RTN","RCTCSP4",110,0)
 S DIR(0)="DA^:DT:EX"
"RTN","RCTCSP4",111,0)
 S DIR("A")="Date Entered From: "
"RTN","RCTCSP4",112,0)
 S DIR("?",1)="The From and To dates for this report refer to the date that the AR"
"RTN","RCTCSP4",113,0)
 S DIR("?")="transaction was entered."
"RTN","RCTCSP4",114,0)
 W ! D ^DIR K DIR
"RTN","RCTCSP4",115,0)
 I $D(DIRUT)!'Y S RET=0 W $C(7) K RCTCDATE G DATESX
"RTN","RCTCSP4",116,0)
 S RCTCDATE("BEGIN")=Y
"RTN","RCTCSP4",117,0)
 ;
"RTN","RCTCSP4",118,0)
 S DIR(0)="DA^"_RCTCDATE("BEGIN")_":DT:EX"
"RTN","RCTCSP4",119,0)
 S DIR("A")="  Date Entered To: "
"RTN","RCTCSP4",120,0)
 S DIR("B")="T"
"RTN","RCTCSP4",121,0)
 S DIR("?",1)="The From and To dates for this report refer to the date that the AR"
"RTN","RCTCSP4",122,0)
 S DIR("?")="transaction was entered."
"RTN","RCTCSP4",123,0)
 D ^DIR K DIR
"RTN","RCTCSP4",124,0)
 I $D(DIRUT)!'Y S RET=0 W $C(7) K RCTCDATE G DATESX
"RTN","RCTCSP4",125,0)
 S RCTCDATE("END")=Y
"RTN","RCTCSP4",126,0)
DATESX ;
"RTN","RCTCSP4",127,0)
 Q RET
"RTN","RCTCSP4",128,0)
 ;
"RTN","RCTCSP4",129,0)
FORMAT(RCTCEXCEL) ; output format is Excel format or normal report output
"RTN","RCTCSP4",130,0)
 ; RCTCEXCEL=0 for normal report output
"RTN","RCTCSP4",131,0)
 ; RCTCEXCEL=1 for Excel output
"RTN","RCTCSP4",132,0)
 ; pass parameter by reference
"RTN","RCTCSP4",133,0)
 ;
"RTN","RCTCSP4",134,0)
 N RET,DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","RCTCSP4",135,0)
 S RCTCEXCEL=0,RET=1
"RTN","RCTCSP4",136,0)
 S DIR(0)="Y"
"RTN","RCTCSP4",137,0)
 S DIR("A")="Do you want to capture the output in Excel format"
"RTN","RCTCSP4",138,0)
 S DIR("B")="NO"
"RTN","RCTCSP4",139,0)
 S DIR("?",1)="If you want to capture the output from this report in a format which can"
"RTN","RCTCSP4",140,0)
 S DIR("?",2)="easily be imported into Excel, then answer YES here."
"RTN","RCTCSP4",141,0)
 S DIR("?",3)=" "
"RTN","RCTCSP4",142,0)
 S DIR("?")="If you just want a normal report output, then answer NO here."
"RTN","RCTCSP4",143,0)
 W ! D ^DIR K DIR
"RTN","RCTCSP4",144,0)
 I $D(DIRUT) S RET=0 W $C(7) G FMX
"RTN","RCTCSP4",145,0)
 S RCTCEXCEL=Y
"RTN","RCTCSP4",146,0)
FMX ;
"RTN","RCTCSP4",147,0)
 Q RET
"RTN","RCTCSP4",148,0)
 ;
"RTN","RCTCSP4",149,0)
DEVICE() ; Device Selection
"RTN","RCTCSP4",150,0)
 N ZTRTN,ZTDESC,ZTSAVE,POP,RET,ZTSK,DIR,X,Y
"RTN","RCTCSP4",151,0)
 S RET=1
"RTN","RCTCSP4",152,0)
 I 'RCTCEXCEL W !!,"This report is 132 characters wide.  Please choose an appropriate device.",!
"RTN","RCTCSP4",153,0)
 I RCTCEXCEL D
"RTN","RCTCSP4",154,0)
 . W !!,"For Excel output, turn logging or capture on now."
"RTN","RCTCSP4",155,0)
 . W !,"To avoid undesired wrapping of the data saved to the file,"
"RTN","RCTCSP4",156,0)
 . W !,"please enter ""0;256;99999"" at the ""DEVICE:"" prompt.",!
"RTN","RCTCSP4",157,0)
 ;
"RTN","RCTCSP4",158,0)
 S ZTRTN="COMPILE^RCTCSP4"
"RTN","RCTCSP4",159,0)
 S ZTDESC="RCTC AR Cross-Servicing Stop Reactivate Report"
"RTN","RCTCSP4",160,0)
 S ZTSAVE("RCTCFLG")=""
"RTN","RCTCSP4",161,0)
 S ZTSAVE("RCTCDEBT1")=""
"RTN","RCTCSP4",162,0)
 S ZTSAVE("RCTCDEBT2")=""
"RTN","RCTCSP4",163,0)
 S ZTSAVE("RCTCDATE")=""
"RTN","RCTCSP4",164,0)
 S ZTSAVE("RCTCDATE(")=""
"RTN","RCTCSP4",165,0)
 S ZTSAVE("RCTCEXCEL")=""
"RTN","RCTCSP4",166,0)
 D EN^XUTMDEVQ(ZTRTN,ZTDESC,.ZTSAVE,"QM",1)
"RTN","RCTCSP4",167,0)
 I POP S RET=0
"RTN","RCTCSP4",168,0)
 I $G(ZTSK) W !!,"Report compilation has started with task# ",ZTSK,".",! S DIR(0)="E" D ^DIR K DIR
"RTN","RCTCSP4",169,0)
 Q RET
"RTN","RCTCSP4",170,0)
 ;
"RTN","RCTCSP4",171,0)
 ;
"RTN","RCTCSP4",172,0)
COMPILE ; entry point for the report compile to build the scratch global
"RTN","RCTCSP4",173,0)
 ; may be a background task if job queued
"RTN","RCTCSP4",174,0)
 ;
"RTN","RCTCSP4",175,0)
 K ^TMP("RCTCSP4",$J)             ; kill scratch at start
"RTN","RCTCSP4",176,0)
 I '$D(ZTQUEUED) W !!,"Compiling Cross-Servicing Stop Reactivate Report.  Please wait ... "
"RTN","RCTCSP4",177,0)
 ;
"RTN","RCTCSP4",178,0)
 D COMP                           ; build scratch global
"RTN","RCTCSP4",179,0)
 D PRINT                          ; print the report
"RTN","RCTCSP4",180,0)
 D ^%ZISC                         ; close the device
"RTN","RCTCSP4",181,0)
 K ^TMP("RCTCSP4",$J)             ; kill scratch global at end
"RTN","RCTCSP4",182,0)
 I $D(ZTQUEUED) S ZTREQ="@"       ; purge the task
"RTN","RCTCSP4",183,0)
COMIPLX ;
"RTN","RCTCSP4",184,0)
 Q
"RTN","RCTCSP4",185,0)
 ;
"RTN","RCTCSP4",186,0)
COMP ; compile data into scratch global
"RTN","RCTCSP4",187,0)
 N ARTTIEN,RCTCTT,RCTCDTENT,RC433,P0,RCIBN,USER,RCTTNAME,RC340,DEBTNAME,FLAG,RCDEBTOR,RCBILLNUM
"RTN","RCTCSP4",188,0)
 ;
"RTN","RCTCSP4",189,0)
 ; first identify the AR Transaction types eligible for this report (CS STOP PLACED or CS STOP DELETED)
"RTN","RCTCSP4",190,0)
 ; load into the RCTCTT local array
"RTN","RCTCSP4",191,0)
 S ARTTIEN=0 F  S ARTTIEN=$O(^PRCA(430.3,ARTTIEN)) Q:'ARTTIEN  I $P($G(^PRCA(430.3,ARTTIEN,0)),U,1)["CS STOP" S RCTCTT(ARTTIEN)=""
"RTN","RCTCSP4",192,0)
 ;
"RTN","RCTCSP4",193,0)
 ; if no end date specified then assume all dates are OK
"RTN","RCTCSP4",194,0)
 I '$G(RCTCDATE("END")) S RCTCDATE("END")=9999999
"RTN","RCTCSP4",195,0)
 ;
"RTN","RCTCSP4",196,0)
 ; start loop
"RTN","RCTCSP4",197,0)
 S ARTTIEN=0 F  S ARTTIEN=$O(RCTCTT(ARTTIEN)) Q:'ARTTIEN  D
"RTN","RCTCSP4",198,0)
 . ;
"RTN","RCTCSP4",199,0)
 . ; determine date to start looping based on if the user specified a start date or not
"RTN","RCTCSP4",200,0)
 . S RCTCDTENT=0
"RTN","RCTCSP4",201,0)
 . I $G(RCTCDATE("BEGIN")) S RCTCDTENT=$O(^PRCA(433,"AT",ARTTIEN,RCTCDATE("BEGIN")),-1)   ; get one day earlier to start
"RTN","RCTCSP4",202,0)
 . ;
"RTN","RCTCSP4",203,0)
 . F  S RCTCDTENT=$O(^PRCA(433,"AT",ARTTIEN,RCTCDTENT)) Q:'RCTCDTENT!(RCTCDTENT>RCTCDATE("END"))  D
"RTN","RCTCSP4",204,0)
 .. S RC433=0 F  S RC433=$O(^PRCA(433,"AT",ARTTIEN,RCTCDTENT,RC433)) Q:'RC433  D
"RTN","RCTCSP4",205,0)
 ... S P0=$G(^PRCA(433,RC433,0))
"RTN","RCTCSP4",206,0)
 ... S RCIBN=+$P(P0,U,2) Q:'RCIBN                 ; bill# ien
"RTN","RCTCSP4",207,0)
 ... S USER=$P($G(^VA(200,+$P(P0,U,9),0)),U,1)    ; processed by user
"RTN","RCTCSP4",208,0)
 ... S RCTTNAME=$$GET1^DIQ(433,RC433,12)          ; trans type name
"RTN","RCTCSP4",209,0)
 ... ;
"RTN","RCTCSP4",210,0)
 ... ; now get some bill data from 430
"RTN","RCTCSP4",211,0)
 ... S RC340=+$P($G(^PRCA(430,RCIBN,0)),U,9)      ; ar debtor ien
"RTN","RCTCSP4",212,0)
 ... Q:'RC340
"RTN","RCTCSP4",213,0)
 ... S DEBTNAME=$$GET1^DIQ(340,RC340,.01)         ; external ar debtor name
"RTN","RCTCSP4",214,0)
 ... Q:DEBTNAME=""
"RTN","RCTCSP4",215,0)
 ... ;
"RTN","RCTCSP4",216,0)
 ... ; check report filter on debtor name
"RTN","RCTCSP4",217,0)
 ... I RCTCDEBT1'="FIRST",RCTCDEBT1'=DEBTNAME,RCTCDEBT1]DEBTNAME Q    ; before name range
"RTN","RCTCSP4",218,0)
 ... I RCTCDEBT2'="LAST",RCTCDEBT2'=DEBTNAME,DEBTNAME]RCTCDEBT2 Q     ; after name range
"RTN","RCTCSP4",219,0)
 ... ;
"RTN","RCTCSP4",220,0)
 ... ; get the current flag value and check report filter
"RTN","RCTCSP4",221,0)
 ... S FLAG=+$P($G(^PRCA(430,RCIBN,15)),U,7)      ; stop tcsp referral flag field (430,157)  1:flag set
"RTN","RCTCSP4",222,0)
 ... I RCTCFLG="R",FLAG Q                         ; user wants only Reactivated bills and this one is still flagged
"RTN","RCTCSP4",223,0)
 ... I RCTCFLG="C",'FLAG Q                        ; user wants only currently flagged bills and this flag is clear
"RTN","RCTCSP4",224,0)
 ... ;
"RTN","RCTCSP4",225,0)
 ... S RCDEBTOR=DEBTNAME_U_RC340                  ; debtor name^debtor ien (used in subscript)
"RTN","RCTCSP4",226,0)
 ... S RCBILLNUM=$$GET1^DIQ(430,RCIBN,.01)        ; bill#
"RTN","RCTCSP4",227,0)
 ... Q:RCBILLNUM=""
"RTN","RCTCSP4",228,0)
 ... ;
"RTN","RCTCSP4",229,0)
 ... ; store data at the debtor level if not already there
"RTN","RCTCSP4",230,0)
 ... ; store data at the debtor level if not already there
"RTN","RCTCSP4",231,0)
 ... I '$D(^TMP("RCTCSP4",$J,RCDEBTOR)) D
"RTN","RCTCSP4",232,0)
 .... N RCDV,SSN,PTID
"RTN","RCTCSP4",233,0)
 .... S (SSN,PTID)=""
"RTN","RCTCSP4",234,0)
 .... S SSN=$$SSN^RCFN01(RC340)
"RTN","RCTCSP4",235,0)
 .... S PTID=$E(DEBTNAME,1)_$S(SSN'="":$E(SSN,6,9),1:"0000")            ; patient id
"RTN","RCTCSP4",236,0)
 .... S ^TMP("RCTCSP4",$J,RCDEBTOR)=PTID_U_DEBTNAME          ; save into scratch
"RTN","RCTCSP4",237,0)
 .... Q
"RTN","RCTCSP4",238,0)
 ... ;
"RTN","RCTCSP4",239,0)
 ... ; store data at the bill# level if not already there
"RTN","RCTCSP4",240,0)
 ... I '$D(^TMP("RCTCSP4",$J,RCDEBTOR,RCBILLNUM)) D
"RTN","RCTCSP4",241,0)
 .... N RCX,CAT
"RTN","RCTCSP4",242,0)
 .... S RCX=RCBILLNUM                                        ; bill#
"RTN","RCTCSP4",243,0)
 .... S $P(RCX,U,2)=$$GET1^DIQ(430,RCIBN,11)                 ; current balance
"RTN","RCTCSP4",244,0)
 .... S $P(RCX,U,3)=$$GET1^DIQ(430,RCIBN,8)                  ; current ar status name
"RTN","RCTCSP4",245,0)
 .... S $P(RCX,U,4)=$$GET1^DIQ(430,RCIBN,2)                  ; ar category name
"RTN","RCTCSP4",246,0)
 .... S $P(RCX,U,5)=$$GET1^DIQ(430,RCIBN,61,"I")             ; letter1 date FM format
"RTN","RCTCSP4",247,0)
 .... S $P(RCX,U,6)=$$GET1^DIQ(430,RCIBN,158,"I")            ; stop tcsp referral eff. date FM format
"RTN","RCTCSP4",248,0)
 .... S $P(RCX,U,7)=$$GET1^DIQ(430,RCIBN,159)                ; stop tcsp referral reason desc
"RTN","RCTCSP4",249,0)
 .... S CAT=+$P($G(^PRCA(430,RCIBN,0)),U,2)                  ; ar category ien
"RTN","RCTCSP4",250,0)
 .... S $P(RCX,U,8)=$$GET1^DIQ(430.2,CAT,1)                  ; ar category abbreviation
"RTN","RCTCSP4",251,0)
 .... S ^TMP("RCTCSP4",$J,RCDEBTOR,RCBILLNUM)=RCX
"RTN","RCTCSP4",252,0)
 ... ;
"RTN","RCTCSP4",253,0)
 ... ; now we can store the AR transaction data
"RTN","RCTCSP4",254,0)
 ... S ^TMP("RCTCSP4",$J,RCDEBTOR,RCBILLNUM,RC433)=RCTTNAME_U_RCTCDTENT_U_USER
"RTN","RCTCSP4",255,0)
 . Q
"RTN","RCTCSP4",256,0)
 ;
"RTN","RCTCSP4",257,0)
 ;
"RTN","RCTCSP4",258,0)
COMPX ;
"RTN","RCTCSP4",259,0)
 Q
"RTN","RCTCSP4",260,0)
 ;
"RTN","RCTCSP4",261,0)
 ;
"RTN","RCTCSP4",262,0)
PRINT ; entry point for printing the report
"RTN","RCTCSP4",263,0)
 N CRT,PAGE,RCTCSTOP,SEPLINE,DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,Y,RCD,DEBTDATA,BILL,BILLDATA,RC433,TRANDATA
"RTN","RCTCSP4",264,0)
 S CRT=$S(IOST["C-":1,1:0)
"RTN","RCTCSP4",265,0)
 I RCTCEXCEL S IOSL=999999        ; long screen length for Excel output
"RTN","RCTCSP4",266,0)
 S PAGE=0,RCTCSTOP=0,$P(SEPLINE,"-",133)=""
"RTN","RCTCSP4",267,0)
 ;
"RTN","RCTCSP4",268,0)
 I '$D(^TMP("RCTCSP4",$J)) D HDR W !!?5,"No data found for this report." G PX
"RTN","RCTCSP4",269,0)
 I $G(ZTSTOP) D HDR W !!?5,"This report was halted during compilation by TaskManager Request." G PX
"RTN","RCTCSP4",270,0)
 ;
"RTN","RCTCSP4",271,0)
 D HDR I RCTCSTOP G PX        ; display headers first for both types of output
"RTN","RCTCSP4",272,0)
 ;
"RTN","RCTCSP4",273,0)
 ; loop thru scratch, check for RCTCSTOP as we go
"RTN","RCTCSP4",274,0)
 S RCD="" F  S RCD=$O(^TMP("RCTCSP4",$J,RCD)) Q:RCD=""!RCTCSTOP  D
"RTN","RCTCSP4",275,0)
 . S DEBTDATA=$G(^TMP("RCTCSP4",$J,RCD))
"RTN","RCTCSP4",276,0)
 . S BILL="" F  S BILL=$O(^TMP("RCTCSP4",$J,RCD,BILL)) Q:BILL=""!RCTCSTOP  D
"RTN","RCTCSP4",277,0)
 .. S BILLDATA=$G(^TMP("RCTCSP4",$J,RCD,BILL))
"RTN","RCTCSP4",278,0)
 .. S RC433=0 F  S RC433=$O(^TMP("RCTCSP4",$J,RCD,BILL,RC433)) Q:'RC433!RCTCSTOP  D
"RTN","RCTCSP4",279,0)
 ... S TRANDATA=$G(^TMP("RCTCSP4",$J,RCD,BILL,RC433))
"RTN","RCTCSP4",280,0)
 ... D RPTLN
"RTN","RCTCSP4",281,0)
 ... Q
"RTN","RCTCSP4",282,0)
 .. Q
"RTN","RCTCSP4",283,0)
 . Q
"RTN","RCTCSP4",284,0)
 ;
"RTN","RCTCSP4",285,0)
 I RCTCSTOP G PRINTX       ; get out right away if stop flag is set
"RTN","RCTCSP4",286,0)
 ;
"RTN","RCTCSP4",287,0)
 I $Y+3>IOSL D HDR I RCTCSTOP G PRINTX
"RTN","RCTCSP4",288,0)
 W !!?5,"*** End of Report ***"
"RTN","RCTCSP4",289,0)
 ;
"RTN","RCTCSP4",290,0)
PX ;
"RTN","RCTCSP4",291,0)
 I CRT,'$D(ZTQUEUED) S DIR(0)="E" D ^DIR K DIR
"RTN","RCTCSP4",292,0)
PRINTX ;
"RTN","RCTCSP4",293,0)
 Q
"RTN","RCTCSP4",294,0)
 ;
"RTN","RCTCSP4",295,0)
RPTLN ; display one line on the report - either normal or Excel
"RTN","RCTCSP4",296,0)
 N TT
"RTN","RCTCSP4",297,0)
 ;
"RTN","RCTCSP4",298,0)
 ; for Excel output, print a line and get out
"RTN","RCTCSP4",299,0)
 I RCTCEXCEL D EXCELN G RPTLNX
"RTN","RCTCSP4",300,0)
 ;
"RTN","RCTCSP4",301,0)
 ; page break check
"RTN","RCTCSP4",302,0)
 I $Y+3>IOSL D HDR I RCTCSTOP G RPTLNX
"RTN","RCTCSP4",303,0)
 ;
"RTN","RCTCSP4",304,0)
 ; write a line of report data
"RTN","RCTCSP4",305,0)
 W !,$E($P(DEBTDATA,U,2),1,18)                               ; debtor name
"RTN","RCTCSP4",306,0)
 W ?20,$P(DEBTDATA,U,1)                                      ; Pt ID
"RTN","RCTCSP4",307,0)
 W ?27,$P($P(BILLDATA,U,1),"-",2)                            ; bill#
"RTN","RCTCSP4",308,0)
 W ?34,$$RJ^XLFSTR($FN($P(BILLDATA,U,2),"",2),10)            ; current balance
"RTN","RCTCSP4",309,0)
 W ?46,$E($P(BILLDATA,U,3),1,16)                             ; current status
"RTN","RCTCSP4",310,0)
 W ?64,$P(BILLDATA,U,8)                                      ; category abbr
"RTN","RCTCSP4",311,0)
 W ?68,$$FMTE^XLFDT($P(BILLDATA,U,5),"2Z")                   ; letter 1 date
"RTN","RCTCSP4",312,0)
 W ?78,$$FMTE^XLFDT($P(BILLDATA,U,6),"2Z")                   ; stop date
"RTN","RCTCSP4",313,0)
 W ?88,$E($P(BILLDATA,U,7),1,10)                             ; stop reason
"RTN","RCTCSP4",314,0)
 S TT=$P(TRANDATA,U,1)
"RTN","RCTCSP4",315,0)
 W ?100,$S(TT["DELETED":"DEL",TT["PLACED":"ADD",1:"UNK")     ; transaction type
"RTN","RCTCSP4",316,0)
 W ?105,$$FMTE^XLFDT($P(TRANDATA,U,2),"2Z")                  ; date entered
"RTN","RCTCSP4",317,0)
 W ?115,$E($P(TRANDATA,U,3),1,17)                            ; user
"RTN","RCTCSP4",318,0)
 ;
"RTN","RCTCSP4",319,0)
RPTLNX ;
"RTN","RCTCSP4",320,0)
 Q
"RTN","RCTCSP4",321,0)
 ;
"RTN","RCTCSP4",322,0)
HDR ; report header
"RTN","RCTCSP4",323,0)
 ;
"RTN","RCTCSP4",324,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,Y
"RTN","RCTCSP4",325,0)
 ;
"RTN","RCTCSP4",326,0)
 ; Do an end of page reader call if page# exists and device is the screen
"RTN","RCTCSP4",327,0)
 I PAGE,CRT S DIR(0)="E" D ^DIR K DIR I 'Y S RCTCSTOP=1 G HDRX
"RTN","RCTCSP4",328,0)
 ;
"RTN","RCTCSP4",329,0)
 ; If screen output or page# exists, do a form feed
"RTN","RCTCSP4",330,0)
 I PAGE!CRT W @IOF
"RTN","RCTCSP4",331,0)
 ;
"RTN","RCTCSP4",332,0)
 ; First printer/file page - do a left margin reset
"RTN","RCTCSP4",333,0)
 I 'PAGE,'CRT W $C(13)
"RTN","RCTCSP4",334,0)
 ;
"RTN","RCTCSP4",335,0)
 S PAGE=PAGE+1    ; increment page#
"RTN","RCTCSP4",336,0)
 ;
"RTN","RCTCSP4",337,0)
 ; For Excel format, display the column headers only
"RTN","RCTCSP4",338,0)
 I RCTCEXCEL D EXCELHD G HDRX
"RTN","RCTCSP4",339,0)
 ;
"RTN","RCTCSP4",340,0)
 ; Display the report headers
"RTN","RCTCSP4",341,0)
 W "Debtor Range: "
"RTN","RCTCSP4",342,0)
 I RCTCDEBT1="FIRST",RCTCDEBT2="LAST" W "ALL"
"RTN","RCTCSP4",343,0)
 E  D
"RTN","RCTCSP4",344,0)
 . W $S(RCTCDEBT1="FIRST":"FIRST",1:($C(34)_$E(RCTCDEBT1,1,10)_$C(34)))," - "
"RTN","RCTCSP4",345,0)
 . W $S(RCTCDEBT2="LAST":"LAST",1:($C(34)_$E(RCTCDEBT2,1,10)_$C(34)))
"RTN","RCTCSP4",346,0)
 . Q
"RTN","RCTCSP4",347,0)
 ;
"RTN","RCTCSP4",348,0)
 W ?47,"Cross-Servicing Stop Reactivate Report",?122,"Page: ",PAGE
"RTN","RCTCSP4",349,0)
 ;
"RTN","RCTCSP4",350,0)
 W !?2,"Date Range: "
"RTN","RCTCSP4",351,0)
 I RCTCDATE="A" W "ALL"
"RTN","RCTCSP4",352,0)
 E  D
"RTN","RCTCSP4",353,0)
 . W $$FMTE^XLFDT($G(RCTCDATE("BEGIN")),"2Z")," - "
"RTN","RCTCSP4",354,0)
 . W $$FMTE^XLFDT($G(RCTCDATE("END")),"2Z")
"RTN","RCTCSP4",355,0)
 . Q
"RTN","RCTCSP4",356,0)
 ;
"RTN","RCTCSP4",357,0)
 W ?44,"Currently Flagged, Reactivated, or Both: "
"RTN","RCTCSP4",358,0)
 W $S(RCTCFLG="C":"Currently Flagged",RCTCFLG="R":"Reactivated",1:"Both")
"RTN","RCTCSP4",359,0)
 W ?111,$$FMTE^XLFDT($$NOW^XLFDT)
"RTN","RCTCSP4",360,0)
 ;
"RTN","RCTCSP4",361,0)
 W !,SEPLINE
"RTN","RCTCSP4",362,0)
 W !,"Debtor Name",?20,"Pt ID",?27,"Bill#",?37,"Balance",?46,"Status",?63,"Cat",?68,"Letter1",?78,"StopDate"
"RTN","RCTCSP4",363,0)
 W ?88,"Reason",?97,"CS STOP",?106,"Entered",?115,"User"
"RTN","RCTCSP4",364,0)
 W !,SEPLINE
"RTN","RCTCSP4",365,0)
 ;
"RTN","RCTCSP4",366,0)
 ; check for a TaskManager stop request
"RTN","RCTCSP4",367,0)
 I $D(ZTQUEUED),$$S^%ZTLOAD() D  G HDRX
"RTN","RCTCSP4",368,0)
 . S (ZTSTOP,RCTCSTOP)=1
"RTN","RCTCSP4",369,0)
 . W !!!?5,"*** Report Halted by TaskManager Request ***"
"RTN","RCTCSP4",370,0)
 . Q
"RTN","RCTCSP4",371,0)
 ;
"RTN","RCTCSP4",372,0)
HDRX ;
"RTN","RCTCSP4",373,0)
 Q
"RTN","RCTCSP4",374,0)
 ;
"RTN","RCTCSP4",375,0)
EXCELHD ; print an Excel header record (only 1 Excel header should print for the whole report)
"RTN","RCTCSP4",376,0)
 N RCH
"RTN","RCTCSP4",377,0)
 S RCH=$$CSV("","Debtor Name")
"RTN","RCTCSP4",378,0)
 S RCH=$$CSV(RCH,"Patient ID")
"RTN","RCTCSP4",379,0)
 S RCH=$$CSV(RCH,"Bill Number")
"RTN","RCTCSP4",380,0)
 S RCH=$$CSV(RCH,"Current Balance")
"RTN","RCTCSP4",381,0)
 S RCH=$$CSV(RCH,"Current Status")
"RTN","RCTCSP4",382,0)
 S RCH=$$CSV(RCH,"Category Name")
"RTN","RCTCSP4",383,0)
 S RCH=$$CSV(RCH,"Category Abbr")
"RTN","RCTCSP4",384,0)
 S RCH=$$CSV(RCH,"Letter1 Date")
"RTN","RCTCSP4",385,0)
 S RCH=$$CSV(RCH,"Stop Date")
"RTN","RCTCSP4",386,0)
 S RCH=$$CSV(RCH,"Stop Reason")
"RTN","RCTCSP4",387,0)
 S RCH=$$CSV(RCH,"Transaction Type")
"RTN","RCTCSP4",388,0)
 S RCH=$$CSV(RCH,"Transaction Date Entered")
"RTN","RCTCSP4",389,0)
 S RCH=$$CSV(RCH,"Transaction Processed By")
"RTN","RCTCSP4",390,0)
 W RCH
"RTN","RCTCSP4",391,0)
 Q
"RTN","RCTCSP4",392,0)
 ;
"RTN","RCTCSP4",393,0)
EXCELN ; write a line of Excel data
"RTN","RCTCSP4",394,0)
 N RCZ
"RTN","RCTCSP4",395,0)
 S RCZ=$$CSV("",$P(DEBTDATA,U,2))                         ; AR Debtor Name
"RTN","RCTCSP4",396,0)
 S RCZ=$$CSV(RCZ,$P(DEBTDATA,U,1))                        ; patient ID
"RTN","RCTCSP4",397,0)
 S RCZ=$$CSV(RCZ,$P(BILLDATA,U,1))                        ; bill#
"RTN","RCTCSP4",398,0)
 S RCZ=$$CSV(RCZ,+$P(BILLDATA,U,2))                       ; current balance
"RTN","RCTCSP4",399,0)
 S RCZ=$$CSV(RCZ,$P(BILLDATA,U,3))                        ; AR status name
"RTN","RCTCSP4",400,0)
 S RCZ=$$CSV(RCZ,$P(BILLDATA,U,4))                        ; AR category name
"RTN","RCTCSP4",401,0)
 S RCZ=$$CSV(RCZ,$P(BILLDATA,U,8))                        ; AR category abbr
"RTN","RCTCSP4",402,0)
 S RCZ=$$CSV(RCZ,$$FMTE^XLFDT($P(BILLDATA,U,5),"2Z"))     ; letter1 date
"RTN","RCTCSP4",403,0)
 S RCZ=$$CSV(RCZ,$$FMTE^XLFDT($P(BILLDATA,U,6),"2Z"))     ; stop flag effective date
"RTN","RCTCSP4",404,0)
 S RCZ=$$CSV(RCZ,$P(BILLDATA,U,7))                        ; stop flag reason
"RTN","RCTCSP4",405,0)
 S RCZ=$$CSV(RCZ,$P(TRANDATA,U,1))                        ; ar transaction type desc
"RTN","RCTCSP4",406,0)
 S RCZ=$$CSV(RCZ,$$FMTE^XLFDT($P(TRANDATA,U,2),"2Z"))     ; transaction date entered
"RTN","RCTCSP4",407,0)
 S RCZ=$$CSV(RCZ,$P(TRANDATA,U,3))                        ; trans user
"RTN","RCTCSP4",408,0)
 W !,RCZ
"RTN","RCTCSP4",409,0)
 Q
"RTN","RCTCSP4",410,0)
 ;
"RTN","RCTCSP4",411,0)
CSV(STRING,DATA) ; build the Excel data string format
"RTN","RCTCSP4",412,0)
 S STRING=$S(STRING="":DATA,1:STRING_U_DATA)
"RTN","RCTCSP4",413,0)
 Q STRING
"RTN","RCTCSP4",414,0)
 ;
"RTN","RCTCSP5")
0^21^B97137563^n/a
"RTN","RCTCSP5",1,0)
RCTCSP5 ;ALBANY/PAW-CROSS-SERVICING RECALL REPORT ;03/15/14 3:34 PM
"RTN","RCTCSP5",2,0)
 ;;4.5;Accounts Receivable;**315**;Mar 20, 1995;Build 67
"RTN","RCTCSP5",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSP5",4,0)
 ;
"RTN","RCTCSP5",5,0)
 Q
"RTN","RCTCSP5",6,0)
 ;
"RTN","RCTCSP5",7,0)
CSRCLRT ;cross-servicing recall report, prints sorted individual bills that make up a cross-servicing account
"RTN","RCTCSP5",8,0)
 N RCSORT,PAGE,DASH,DTOUT,DUOUT,DIROUT,VALUE,SSN,PROMPT,EXCEL,RCIEN,BILLN,RCDTV,RCUSER,RCTRAN,RCDATE,TERMDIG,CURDT,DATE,DBTR
"RTN","RCTCSP5",9,0)
 N DTFRM,DTTO,DTFRMTO,POP,ZTDESC,ZTREQ,ZTSAVE,ZTRTN,ZTSK,X,Y,DIRUT,STOP,FLAG
"RTN","RCTCSP5",10,0)
 S PAGE=0,DASH="",$P(DASH,"-",78)="",SSN=0000
"RTN","RCTCSP5",11,0)
 W !
"RTN","RCTCSP5",12,0)
 K ^TMP("RCTCSP5",$J)
"RTN","RCTCSP5",13,0)
 S DIR(0)="S^1:Bill Number;2:Debtor Name",DIR("A")="Sort by",DIR("B")=2 D ^DIR K DIR
"RTN","RCTCSP5",14,0)
 S RCSORT=Y Q:($D(DTOUT)!$D(DUOUT)!$D(DIROUT))
"RTN","RCTCSP5",15,0)
 S DTFRMTO=$$DTFRMTO^RCTCSP2 Q:'DTFRMTO  ;Get date range as per PRCA*4.5*315
"RTN","RCTCSP5",16,0)
 S (DATE,DTFRM)=$$FMADD^XLFDT(+$P(DTFRMTO,U,2)),DTTO=$P(DTFRMTO,U,3),CURDT=0
"RTN","RCTCSP5",17,0)
 S EXCEL=0,PROMPT="CAPTURE Report data to an Excel Document",DIR(0)="Y",DIR("?")="^D HEXC^RCTCSJR"
"RTN","RCTCSP5",18,0)
 S EXCEL=$$SELECT^RCTCSJR(PROMPT,"NO") I "01"'[EXCEL S STOP=1 Q
"RTN","RCTCSP5",19,0)
 I EXCEL=1 D EXCMSG^RCTCSJR ; Display Excel display message
"RTN","RCTCSP5",20,0)
 K IOP,IO("Q") S %ZIS="MQ",%ZIS("B")="" D ^%ZIS Q:POP
"RTN","RCTCSP5",21,0)
 I $D(IO("Q")) D  Q
"RTN","RCTCSP5",22,0)
 .S ZTSAVE("RCSORT")="",ZTSAVE("EXCEL")="",ZTSAVE("DTFRM")="",ZTSAVE("DTTO")=""
"RTN","RCTCSP5",23,0)
 .S ZTSAVE("PAGE")="",ZTSAVE("SSN")="",ZTSAVE("DASH")=""
"RTN","RCTCSP5",24,0)
 .S ZTRTN="PRTSORT^RCTCSP5",ZTDESC="CROSS-SERVICING RECALL REPORT"
"RTN","RCTCSP5",25,0)
 .D ^%ZTLOAD,^%ZISC
"RTN","RCTCSP5",26,0)
 .I $G(ZTSK) W !!,"Report compilation has started with task# ",ZTSK,".",! S DIR(0)="E" D ^DIR K DIR
"RTN","RCTCSP5",27,0)
 .Q
"RTN","RCTCSP5",28,0)
 I 'EXCEL W !!,"Compiling Cross-Servicing Recall Report.  Please wait ... ",!
"RTN","RCTCSP5",29,0)
 ;
"RTN","RCTCSP5",30,0)
PRTSORT ;loop through all bills, find recall bills and corrsponding tranactions
"RTN","RCTCSP5",31,0)
 S (RCIEN)=0 F  S RCIEN=$O(^PRCA(430,RCIEN)) Q:'RCIEN  D
"RTN","RCTCSP5",32,0)
 .S FLAG=0
"RTN","RCTCSP5",33,0)
 .Q:('+$P($G(^PRCA(430,RCIEN,15)),U,2))  ;QUIT if 'TCSP RECALL FLAG' is Null
"RTN","RCTCSP5",34,0)
 .I $P($G(^PRCA(430,RCIEN,15)),U,3)'="" Q:$P($G(^PRCA(430,RCIEN,15)),U,3)<DTFRM!($P($G(^PRCA(430,RCIEN,15)),U,3)>DTTO)  ;If using "recall effective date" to screen
"RTN","RCTCSP5",35,0)
 .K RCLIST,LIST,MSG D GETS^DIQ(430,RCIEN_",",".01;9;155;151;153;154","IE","LIST","MSG") Q:$D(LIST)<10  S RCLIST=$NA(LIST(430,RCIEN_","))
"RTN","RCTCSP5",36,0)
 .S DEBTOR=$P($G(^PRCA(430,RCIEN,0)),U,9)
"RTN","RCTCSP5",37,0)
 .I '$D(^RCD(340,DEBTOR,0)) S SSN="    "  ;set SSN to blank if not VA employee or Patient
"RTN","RCTCSP5",38,0)
 .I $D(^RCD(340,DEBTOR,0)) S SSN=$E($$SSN^RCFN01($P($G(^RCD(340,DEBTOR,0)),"^")),6,9) S TERMDIG=$E(@RCLIST@(9,"E"),1)_$S(SSN'="":SSN,1:"     ")
"RTN","RCTCSP5",39,0)
 .;
"RTN","RCTCSP5",40,0)
 .;locate recall transaction
"RTN","RCTCSP5",41,0)
 .S RCUSER="",RCTRAN=""
"RTN","RCTCSP5",42,0)
 .I $P(^PRCA(430,RCIEN,15),U,3)="" D
"RTN","RCTCSP5",43,0)
 ..F  S RCTRAN=$O(^PRCA(433,"C",RCIEN,RCTRAN),-1) Q:RCTRAN=""  D  Q:FLAG
"RTN","RCTCSP5",44,0)
 ...I $P($G(^PRCA(433,RCTRAN,5)),U,2)="CS BILL RECALL"!($P($G(^PRCA(433,RCTRAN,5)),U,2)="CS CASE RECALL")!($P($G(^PRCA(433,RCTRAN,5)),U,2)="CS DEBTOR RECALL")!($P($G(^PRCA(433,RCTRAN,5)),U,2)="CS RECALL PLACED") D
"RTN","RCTCSP5",45,0)
 ....S RCUSER=$P(^PRCA(433,RCTRAN,0),U,9),RCUSER=$E($$GET1^DIQ(200,RCUSER_",",.01),1,10),FLAG=1
"RTN","RCTCSP5",46,0)
 .I $P(^PRCA(430,RCIEN,15),U,3)'="" D
"RTN","RCTCSP5",47,0)
 ..F  S RCTRAN=$O(^PRCA(433,"C",RCIEN,RCTRAN)) Q:RCTRAN=""  D  Q:FLAG
"RTN","RCTCSP5",48,0)
 ...I $P($G(^PRCA(433,RCTRAN,5)),U,2)="CS BILL RECALL"!($P($G(^PRCA(433,RCTRAN,5)),U,2)="CS CASE RECALL")!($P($G(^PRCA(433,RCTRAN,5)),U,2)="CS DEBTOR RECALL") D
"RTN","RCTCSP5",49,0)
 ....S RCUSER=$P(^PRCA(433,RCTRAN,0),U,9),RCUSER=$E($$GET1^DIQ(200,RCUSER_",",.01),1,10),FLAG=1
"RTN","RCTCSP5",50,0)
 .;
"RTN","RCTCSP5",51,0)
 .;We want to sort by date, but when the date is NULL we need to use alternate
"RTN","RCTCSP5",52,0)
 .;data field, so if a date is present use negative value otherwise use RCIEN 
"RTN","RCTCSP5",53,0)
 .;that allows us to sort by date (newest first).  When we print if the number
"RTN","RCTCSP5",54,0)
 .;is longer than 8 (negative date) char print "Pending".
"RTN","RCTCSP5",55,0)
 .S RCDTV=@RCLIST@(153,"I"),RCDTV=$S(RCDTV'="":-RCDTV,1:RCIEN)
"RTN","RCTCSP5",56,0)
 .I RCDTV>0 S RCDTV=-RCDTV D
"RTN","RCTCSP5",57,0)
 ..I $L(RCDTV)<10 S RCDTV=$E(-99999999,1,(11-$L(RCDTV)))_$E(RCDTV,2,9) Q  ;Ensure that entries that use IEN are 9 characters, this makes empty dates float to the top
"RTN","RCTCSP5",58,0)
 ..I $E(RCDTV,2)<3 S $E(RCDTV,1,4)=-999  ;If IEN is long we need to assure that the first 4 characters are -999 , so that null dates float to the top
"RTN","RCTCSP5",59,0)
 .;
"RTN","RCTCSP5",60,0)
 .;write records to ^TMP
"RTN","RCTCSP5",61,0)
 .I RCSORT=1 D
"RTN","RCTCSP5",62,0)
 ..S ^TMP("RCTCSP5",$J,@RCLIST@(.01,"E"),RCDTV)=@RCLIST@(.01,"E")_U_$E(@RCLIST@(9,"E"),1,17)_U_TERMDIG
"RTN","RCTCSP5",63,0)
 ..S ^TMP("RCTCSP5",$J,@RCLIST@(.01,"E"),RCDTV)=^TMP("RCTCSP5",$J,@RCLIST@(.01,"E"),RCDTV)_U_$J(@RCLIST@(155,"E"),9,2)_U_$S($L(RCDTV)=8:$$FMTE^XLFDT(-RCDTV,"2Z"),1:"Pending")_U_@RCLIST@(154,"I")_"-"_$E(@RCLIST@(154,"E"),1,7)_U_RCUSER
"RTN","RCTCSP5",64,0)
 .I RCSORT=2 D  ; rewrite for EXCEL and faster processing, added User ID (as per PRCA*4.5*315)
"RTN","RCTCSP5",65,0)
 .. I EXCEL D  Q
"RTN","RCTCSP5",66,0)
 ...S ^TMP("RCTCSP5",$J,@RCLIST@(9,"E"),RCIEN,RCDTV)=$E(@RCLIST@(9,"E"),1,16)_U_@RCLIST@(.01,"E")_U_TERMDIG_U_$J(@RCLIST@(155,"E"),9,2)_U
"RTN","RCTCSP5",67,0)
 ...S ^TMP("RCTCSP5",$J,@RCLIST@(9,"E"),RCIEN,RCDTV)=^TMP("RCTCSP5",$J,@RCLIST@(9,"E"),RCIEN,RCDTV)_$S($L(RCDTV)=8:$$FMTE^XLFDT(-RCDTV,"2Z"),1:"Pending")_U_@RCLIST@(154,"I")_"-"_$E(@RCLIST@(154,"E"),1,7)_U_RCUSER Q
"RTN","RCTCSP5",68,0)
 ..I 'EXCEL D  Q
"RTN","RCTCSP5",69,0)
 ...S ^TMP("RCTCSP5",$J,@RCLIST@(9,"E"),RCIEN,RCDTV)=$E(@RCLIST@(9,"E"),1,16)_U_@RCLIST@(.01,"E")_U_SSN_U_$J(@RCLIST@(155,"E"),9,2)_U_$S($L(RCDTV)=8:$$FMTE^XLFDT(-RCDTV,"2Z"),1:"Pending")
"RTN","RCTCSP5",70,0)
 ...S ^TMP("RCTCSP5",$J,@RCLIST@(9,"E"),RCIEN,RCDTV)=^TMP("RCTCSP5",$J,@RCLIST@(9,"E"),RCIEN,RCDTV)_U_@RCLIST@(154,"I")_"-"_$E(@RCLIST@(154,"E"),1,7)_U_RCUSER
"RTN","RCTCSP5",71,0)
 ;
"RTN","RCTCSP5",72,0)
 ;^TMP global loaded, now print report
"RTN","RCTCSP5",73,0)
 I RCSORT=1 D  ;Print bill number sort
"RTN","RCTCSP5",74,0)
 .D CSRCLH1
"RTN","RCTCSP5",75,0)
 .S (BILLN,RCDTV)="" F  S BILLN=$O(^TMP("RCTCSP5",$J,BILLN)) Q:BILLN=""!$D(DIRUT)  F  S RCDTV=$O(^TMP("RCTCSP5",$J,BILLN,RCDTV)) Q:RCDTV=""!$D(DIRUT)  D  Q:$D(DIRUT)
"RTN","RCTCSP5",76,0)
 ..I EXCEL W !,$P(^TMP("RCTCSP5",$J,BILLN,RCDTV),U,1,4)_U_$S($L(RCDTV)=8:$$FMTE^XLFDT(-RCDTV,"2Z"),1:"Pending")_U_$P(^TMP("RCTCSP5",$J,BILLN,RCDTV),U,6,10) Q
"RTN","RCTCSP5",77,0)
 .. ; non-Excel output
"RTN","RCTCSP5",78,0)
 ..W !,$P(^TMP("RCTCSP5",$J,BILLN,RCDTV),U),?13,$P(^TMP("RCTCSP5",$J,BILLN,RCDTV),U,2),?31,$P(^TMP("RCTCSP5",$J,BILLN,RCDTV),U,3)
"RTN","RCTCSP5",79,0)
 ..W ?33,$P(^TMP("RCTCSP5",$J,BILLN,RCDTV),U,4),?47,$P(^TMP("RCTCSP5",$J,BILLN,RCDTV),U,5)
"RTN","RCTCSP5",80,0)
 ..W ?56,$P(^TMP("RCTCSP5",$J,BILLN,RCDTV),U,6),?67,$P(^TMP("RCTCSP5",$J,BILLN,RCDTV),U,7)
"RTN","RCTCSP5",81,0)
 .. ; check for page breaks
"RTN","RCTCSP5",82,0)
 .. I ($Y+3)>IOSL D
"RTN","RCTCSP5",83,0)
 ... I $E(IOST,1,2)="C-" S DIR(0)="E" K DIRUT D ^DIR K DIR Q:$D(DIRUT)
"RTN","RCTCSP5",84,0)
 ... D CSRCLH1
"RTN","RCTCSP5",85,0)
 ;
"RTN","RCTCSP5",86,0)
 I RCSORT=2 D  ;Print debtor sort
"RTN","RCTCSP5",87,0)
 .D CSRCLH2
"RTN","RCTCSP5",88,0)
 .S (DBTR,RCDTV,RCIEN)="" F  S DBTR=$O(^TMP("RCTCSP5",$J,DBTR)) Q:DBTR=""!$D(DIRUT)  F  S RCIEN=$O(^TMP("RCTCSP5",$J,DBTR,RCIEN)) Q:RCIEN=""!$D(DIRUT)  F  S RCDTV=$O(^TMP("RCTCSP5",$J,DBTR,RCIEN,RCDTV)) Q:RCDTV=""!$D(DIRUT)  D  Q:$D(DIRUT)
"RTN","RCTCSP5",89,0)
 ..I EXCEL W !,^TMP("RCTCSP5",$J,DBTR,RCIEN,RCDTV) Q
"RTN","RCTCSP5",90,0)
 .. ; non-Excel output
"RTN","RCTCSP5",91,0)
 ..W !,$P(^TMP("RCTCSP5",$J,DBTR,RCIEN,RCDTV),U),?18,$P(^TMP("RCTCSP5",$J,DBTR,RCIEN,RCDTV),U,2)
"RTN","RCTCSP5",92,0)
 ..W ?31,$P(^TMP("RCTCSP5",$J,DBTR,RCIEN,RCDTV),U,3),?36,$P(^TMP("RCTCSP5",$J,DBTR,RCIEN,RCDTV),U,4)
"RTN","RCTCSP5",93,0)
 ..W ?47,$P(^TMP("RCTCSP5",$J,DBTR,RCIEN,RCDTV),U,5),?56,$P(^TMP("RCTCSP5",$J,DBTR,RCIEN,RCDTV),U,6)
"RTN","RCTCSP5",94,0)
 ..W ?67,$P(^TMP("RCTCSP5",$J,DBTR,RCIEN,RCDTV),U,7)
"RTN","RCTCSP5",95,0)
 .. ; check for page breaks
"RTN","RCTCSP5",96,0)
 .. I ($Y+3)>IOSL D
"RTN","RCTCSP5",97,0)
 ... I $E(IOST,1,2)="C-" S DIR(0)="E" K DIRUT D ^DIR K DIR Q:$D(DIRUT)
"RTN","RCTCSP5",98,0)
 ... D CSRCLH2
"RTN","RCTCSP5",99,0)
 ;
"RTN","RCTCSP5",100,0)
 ;Finish up report
"RTN","RCTCSP5",101,0)
 I '$D(^TMP("RCTCSP5",$J)) W !,"No records found",!!
"RTN","RCTCSP5",102,0)
 K ^TMP("RCTCSP5",$J)
"RTN","RCTCSP5",103,0)
 I $E(IOST,1,2)="C-",'$D(DIRUT) R !!,"END OF REPORT...PRESS RETURN TO CONTINUE",X:DTIME W @IOF
"RTN","RCTCSP5",104,0)
 D:'$D(ZTQUEUED) ^%ZISC
"RTN","RCTCSP5",105,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","RCTCSP5",106,0)
 K IOP,%ZIS,ZTQUEUED
"RTN","RCTCSP5",107,0)
 Q
"RTN","RCTCSP5",108,0)
 ;
"RTN","RCTCSP5",109,0)
CSRCLH1 ;header for cross-servicing recall report 1
"RTN","RCTCSP5",110,0)
 S PAGE=PAGE+1
"RTN","RCTCSP5",111,0)
 I 'EXCEL D  Q
"RTN","RCTCSP5",112,0)
 .W @IOF
"RTN","RCTCSP5",113,0)
 .W !,"PAGE "_PAGE,?12,"CROSS-SERVICING RECALL REPORT (SORTED BY BILL NUMBER)",?68,$$FMTE^XLFDT(DT,"2Z")
"RTN","RCTCSP5",114,0)
 .W !,DASH,!
"RTN","RCTCSP5",115,0)
 .W !,"BILL NO.",?13,"DEBTOR",?31,"Pt ID",?37,"RECL AMT",?47,"RECL DT",?56,"RECALL RSN",?67,"USER ID"
"RTN","RCTCSP5",116,0)
 .W !,"--------",?13,"------",?31,"-----",?37,"--------",?47,"-------",?56,"----------",?67,"-------",!
"RTN","RCTCSP5",117,0)
 ;EXCEL FORM
"RTN","RCTCSP5",118,0)
 W !,"PAGE "_PAGE_U_U_"CS RECALL RPT (BILL)"_U_U_$$FMTE^XLFDT(DT,"2Z")
"RTN","RCTCSP5",119,0)
 W !,"BILL NO."_U_"DEBTOR"_U_"Pt ID"_U_"RECL AMT"_U_"RECALL DT"_U_"RECALL RSN"_U_"USER ID"
"RTN","RCTCSP5",120,0)
 Q
"RTN","RCTCSP5",121,0)
 ;
"RTN","RCTCSP5",122,0)
CSRCLH2 ;header for cross-servicing recall report 2
"RTN","RCTCSP5",123,0)
 S PAGE=PAGE+1
"RTN","RCTCSP5",124,0)
 I 'EXCEL D  Q
"RTN","RCTCSP5",125,0)
 .W @IOF
"RTN","RCTCSP5",126,0)
 .W !,"PAGE "_PAGE,?14,"CROSS-SERVICING RECALL REPORT (SORTED BY DEBTOR)",?68,$$FMTE^XLFDT(DT,"2Z")
"RTN","RCTCSP5",127,0)
 .W !,DASH,!
"RTN","RCTCSP5",128,0)
 .W !,"DEBTOR",?18,"BILL NO.",?31,"Pt ID",?37,"RECL AMT",?47,"RECL DT",?56,"RECALL RSN",?67,"USER ID"
"RTN","RCTCSP5",129,0)
 .W !,"------",?18,"--------",?31,"-----",?37,"--------",?47,"-------",?56,"----------",?67,"-------",!
"RTN","RCTCSP5",130,0)
 ;EXCEL FORMAT
"RTN","RCTCSP5",131,0)
 W !,"PAGE "_PAGE_U_U_"CS RECALL RPT (DEBTOR)"_U_U_$$FMTE^XLFDT(DT,"2Z")
"RTN","RCTCSP5",132,0)
 W !,"DEBTOR"_U_"BILL NO."_U_"Pt ID"_U_"RECL AMT"_U_"RECALL DT"_U_"RECALL RSN"_U_"USER ID"
"RTN","RCTCSP5",133,0)
 Q
"RTN","RCTCSP5",134,0)
 ;
"RTN","RCTCSP5",135,0)
IAIRPT ;Treasury Cross-Servicing IAI Report
"RTN","RCTCSP5",136,0)
 ;This report displays a record of current VHA bills at Treasury. It is a tool that can be used to identify bills erroneously 
"RTN","RCTCSP5",137,0)
 ;listed in a referral status in VistA when reconciled with the Print Cross-Servicing Report.
"RTN","RCTCSP5",138,0)
 ;
"RTN","RCTCSP5",139,0)
 N RDATES,RDGBL,NODE,PAGE,DASH,EXCEL,DEBTOR,BILLDA,RCBILL,CNT,CURDT,POP,RCNAME,ZTDESC,ZTREQ,ZTSAVE,ZTSK,ZTRTN,X,Y,STOP,DIRUT
"RTN","RCTCSP5",140,0)
 S PAGE=0,DASH="",$P(DASH,"-",78)=""
"RTN","RCTCSP5",141,0)
 ;Get available report dates
"RTN","RCTCSP5",142,0)
 S RDGBL="RCTCSP6",CNT=1 F  S RDGBL=$O(^XTMP(RDGBL),-1) Q:RDGBL=""!($E(RDGBL,1)="Q")  I RDGBL["RCTCSP5" D
"RTN","RCTCSP5",143,0)
 . I $P(RDGBL," - ",2)="" S VALUE="No report data to print" Q
"RTN","RCTCSP5",144,0)
 . S RDATES(CNT)=$P(RDGBL," - ",2)_U_$$FMTE^XLFDT($P(RDGBL," - ",2),"2Z"),RDGBL(CNT)=RDGBL,CNT=CNT+1
"RTN","RCTCSP5",145,0)
 . Q
"RTN","RCTCSP5",146,0)
 I '$D(RDATES(1)) W !,?5,"There is no data available for the report, quitting.",! Q
"RTN","RCTCSP5",147,0)
 ; Show dates sorted by newest first and only show the last two report dates if they exist
"RTN","RCTCSP5",148,0)
 I '$D(RDATES(2)) S DIR(0)="S^1:"_$P(RDATES(1),U,2),DIR("A")="Print date?",DIR("B")=1 D ^DIR K DIR
"RTN","RCTCSP5",149,0)
 I $D(RDATES(2)) S DIR(0)="S^1:"_$P(RDATES(1),U,2)_";2:"_$P(RDATES(2),U,2),DIR("A")="     Print IAI report date?",DIR("B")=1 D ^DIR K DIR
"RTN","RCTCSP5",150,0)
 Q:$G(DUOUT)
"RTN","RCTCSP5",151,0)
 S NODE=RDGBL(Y),RDATES=+RDATES(Y)
"RTN","RCTCSP5",152,0)
 S EXCEL=0,PROMPT="CAPTURE Report data to an Excel Document",DIR(0)="Y",DIR("?")="^D HEXC^RCTCSJR"
"RTN","RCTCSP5",153,0)
 S EXCEL=$$SELECT^RCTCSJR(PROMPT,"NO") I "01"'[EXCEL S STOP=1 Q
"RTN","RCTCSP5",154,0)
 I EXCEL=1 D EXCMSG^RCTCSJR ; Display Excel display message
"RTN","RCTCSP5",155,0)
 ;
"RTN","RCTCSP5",156,0)
 K IOP,IO("Q") S %ZIS="MQ",%ZIS("B")="" D ^%ZIS Q:POP
"RTN","RCTCSP5",157,0)
 I $D(IO("Q")) D  Q
"RTN","RCTCSP5",158,0)
 .S ZTSAVE("NODE")="",ZTSAVE("EXCEL")="",ZTSAVE("RDATES")=""
"RTN","RCTCSP5",159,0)
 .S ZTRTN="IAIPRNT^RCTCSP5",ZTDESC="CROSS-SERVICING IAI REPORT"
"RTN","RCTCSP5",160,0)
 .D ^%ZTLOAD,^%ZISC
"RTN","RCTCSP5",161,0)
 .I $G(ZTSK) W !!,"Report compilation has started with task# ",ZTSK,".",!
"RTN","RCTCSP5",162,0)
 .Q
"RTN","RCTCSP5",163,0)
 .;
"RTN","RCTCSP5",164,0)
IAIPRNT ;
"RTN","RCTCSP5",165,0)
 N GETNM,GETBL,GLO
"RTN","RCTCSP5",166,0)
 S PAGE=0
"RTN","RCTCSP5",167,0)
 S GLO=$NA(^TMP("RCTCSP5",$J)) K @GLO
"RTN","RCTCSP5",168,0)
 D IAIHDR
"RTN","RCTCSP5",169,0)
 ;
"RTN","RCTCSP5",170,0)
 ; report compile
"RTN","RCTCSP5",171,0)
 S DEBTOR=0 F  S DEBTOR=$O(^XTMP(NODE,DEBTOR)) Q:'DEBTOR  D
"RTN","RCTCSP5",172,0)
 . S BILLDA="" F  S BILLDA=$O(^XTMP(NODE,DEBTOR,BILLDA)) Q:'BILLDA  D
"RTN","RCTCSP5",173,0)
 ..S RCBILL=$P($G(^PRCA(430,BILLDA,0)),U),RCNAME=$E($$GET1^DIQ(430,BILLDA,9),1,20)
"RTN","RCTCSP5",174,0)
 ..S SSN=$S($P($G(^RCD(340,DEBTOR,0)),U)'="":$$SSN^RCFN01($P(^RCD(340,DEBTOR,0),"^")),1:"None")
"RTN","RCTCSP5",175,0)
 ..I SSN<1 S SSN="None"
"RTN","RCTCSP5",176,0)
 ..S @GLO@(RCNAME,RCBILL)=RCBILL_U_RCNAME_U_SSN Q
"RTN","RCTCSP5",177,0)
 ;
"RTN","RCTCSP5",178,0)
 ; report print
"RTN","RCTCSP5",179,0)
 S GETNM="" F  S GETNM=$O(@GLO@(GETNM)) Q:GETNM=""!$D(DIRUT)  S GETBL="" F  S GETBL=$O(@GLO@(GETNM,GETBL)) Q:GETBL=""!$D(DIRUT)  D  Q:$D(DIRUT)
"RTN","RCTCSP5",180,0)
 .I 'EXCEL W $P(@GLO@(GETNM,GETBL),U),?15,$P(@GLO@(GETNM,GETBL),U,2),?40,$P(@GLO@(GETNM,GETBL),U,3),!
"RTN","RCTCSP5",181,0)
 .I EXCEL W @GLO@(GETNM,GETBL),!
"RTN","RCTCSP5",182,0)
 .;check for end of page here, if necessary form feed and print header
"RTN","RCTCSP5",183,0)
 .I 'EXCEL,($Y+3)>IOSL D
"RTN","RCTCSP5",184,0)
 ..I $E(IOST,1,2)="C-" S DIR(0)="E" K DIRUT D ^DIR Q:$D(DIRUT)
"RTN","RCTCSP5",185,0)
 ..D IAIHDR
"RTN","RCTCSP5",186,0)
 Q:$D(DIRUT)
"RTN","RCTCSP5",187,0)
 I 'EXCEL I $E(IOST,1,2)="C-" R !!,"END OF REPORT...PRESS RETURN TO CONTINUE",X:DTIME W @IOF
"RTN","RCTCSP5",188,0)
 Q
"RTN","RCTCSP5",189,0)
 ;
"RTN","RCTCSP5",190,0)
IAIHDR ;
"RTN","RCTCSP5",191,0)
 S PAGE=PAGE+1
"RTN","RCTCSP5",192,0)
 I 'EXCEL D  Q
"RTN","RCTCSP5",193,0)
 .W @IOF
"RTN","RCTCSP5",194,0)
 .W ?10,"Treasury Cross-Servicing IAI Report",!!,"IAI data compiled date: ",$$FMTE^XLFDT(RDATES,"2Z"),?50,"Page ",PAGE
"RTN","RCTCSP5",195,0)
 .W !!,"Bill Number",?20,"Debtor",?43,"SSN",!
"RTN","RCTCSP5",196,0)
 .W !,"-----------",?15,"-----------------------",?40,"---------",!
"RTN","RCTCSP5",197,0)
 ;EXCEL FORMAT
"RTN","RCTCSP5",198,0)
 W !,"PAGE "_PAGE_U_U_"Treasury Cross-Servicing IAI Report"_U_U_$$FMTE^XLFDT(RDATES,"2Z")
"RTN","RCTCSP5",199,0)
 W !,"Bill Number"_U_"Debtor"_U_"SSN",!
"RTN","RCTCSP5",200,0)
 Q
"RTN","RCTCSP7")
0^68^B5563240^B5112376
"RTN","RCTCSP7",1,0)
RCTCSP7 ;ALBANY/RGB-CROSS-SERVICING TRANSMISSION CONT'D ;08/03/17 3:34 PM
"RTN","RCTCSP7",2,0)
 ;;4.5;Accounts Receivable;**327,315**;Mar 20, 1995;Build 67
"RTN","RCTCSP7",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSP7",4,0)
 ;
"RTN","RCTCSP7",5,0)
 ;PRCA*4.5*327 Moved rec code from RCTCSPD to create room
"RTN","RCTCSP7",6,0)
 ;             for batch mods.
"RTN","RCTCSP7",7,0)
 ;
"RTN","RCTCSP7",8,0)
REC2C ;
"RTN","RCTCSP7",9,0)
 N REC,KNUM,DEBTNR,DEBTORNB,TAXID,RCDFN,PHONE,ADDRCS
"RTN","RCTCSP7",10,0)
 S REC="C2C"_ACTION_"3636001200"_"DM1D "
"RTN","RCTCSP7",11,0)
 S KNUM=$P($P(B0,U,1),"-",2)
"RTN","RCTCSP7",12,0)
 S DEBTNR=$E(SITE,1,3)_$$LJZF(KNUM,7)_$TR($J(BILL,20)," ",0),REC=REC_DEBTNR
"RTN","RCTCSP7",13,0)
 S DEBTORNB=$E(SITE,1,3)_$TR($J(DEBTOR,12)," ",0)
"RTN","RCTCSP7",14,0)
 S REC=REC_DEBTORNB
"RTN","RCTCSP7",15,0)
 S TAXID=$$TAXID(DEBTOR)
"RTN","RCTCSP7",16,0)
 S REC=REC_TAXID
"RTN","RCTCSP7",17,0)
 S REC=REC_"SLFIND"
"RTN","RCTCSP7",18,0)
 S REC=REC_$$BLANK(20)
"RTN","RCTCSP7",19,0)
 S RCDFN=+DEBTOR0
"RTN","RCTCSP7",20,0)
 S REC=REC_$$LJSF($$NAMEFF(RCDFN),60)_"Y"
"RTN","RCTCSP7",21,0)
 S ADDRCS=$$ADDR^RCTCSP1(RCDFN),PHONE=$P(ADDRCS,U,6)
"RTN","RCTCSP7",22,0)
 S REC=REC_$$LJSF($P(ADDRCS,U,1),35)_$$LJSF($P(ADDRCS,U,2),35)_$$LJSF($P(ADDRCS,U,3),15)_$$LJSF($P(ADDRCS,U,4),2)_$$LJSF($P(ADDRCS,U,5),9)
"RTN","RCTCSP7",23,0)
 S REC=REC_$$COUNTRY^RCTCSP1A($P(ADDRCS,U,7)) ;COUNTRY label moved due to routine size PRCA*4.5*315/DRF
"RTN","RCTCSP7",24,0)
 S REC=REC_"Y"
"RTN","RCTCSP7",25,0)
 S REC=REC_$S(PHONE]"":"P",1:" ")
"RTN","RCTCSP7",26,0)
 S REC=REC_$$LJSF($TR(PHONE,"() -"),10)_$$BLANK(4)
"RTN","RCTCSP7",27,0)
 S REC=REC_$S(PHONE]"":"Y",1:" ")
"RTN","RCTCSP7",28,0)
 S REC=REC_$$BLANK(450-$L(REC))
"RTN","RCTCSP7",29,0)
 S ^XTMP("RCTCSPD",$J,BILL,ACTION,"2C")=REC
"RTN","RCTCSP7",30,0)
 S $P(^XTMP("RCTCSPD",$J,"BILL",ACTION,BILL),U,1)=$$TAXID(DEBTOR)
"RTN","RCTCSP7",31,0)
 D CLR19(BILL,4)
"RTN","RCTCSP7",32,0)
 Q
"RTN","RCTCSP7",33,0)
 ;
"RTN","RCTCSP7",34,0)
NAMEFF(DFN) ;returns name for document and name in file
"RTN","RCTCSP7",35,0)
 N FN,LN,MN,NM,DOCNM,VA,VADM
"RTN","RCTCSP7",36,0)
 S NM=""
"RTN","RCTCSP7",37,0)
 D DEM^VADPT
"RTN","RCTCSP7",38,0)
 I $D(VADM) S NM=VADM(1)
"RTN","RCTCSP7",39,0)
 S LN=$TR($P(NM,",")," .'-"),MN=$P($P(NM,",",2)," ",2)
"RTN","RCTCSP7",40,0)
 I ($E(MN,1,2)="SR")!($E(MN,1,2)="JR")!(MN?2.3"I")!(MN?0.1"I"1"V"1.3"I") S MN=""
"RTN","RCTCSP7",41,0)
 S FN=$P($P(NM,",",2)," ")
"RTN","RCTCSP7",42,0)
 S DOCNM=LN_" "_FN_" "_MN
"RTN","RCTCSP7",43,0)
 Q DOCNM
"RTN","RCTCSP7",44,0)
 ;
"RTN","RCTCSP7",45,0)
BLANK(X) ;returns 'x' blank spaces
"RTN","RCTCSP7",46,0)
 N BLANK
"RTN","RCTCSP7",47,0)
 S BLANK="",$P(BLANK," ",X+1)=""
"RTN","RCTCSP7",48,0)
 Q BLANK
"RTN","RCTCSP7",49,0)
 ;
"RTN","RCTCSP7",50,0)
TAXID(DEBTOR) ;computes TAXID to place on documents
"RTN","RCTCSP7",51,0)
 N TAXID,DIC,DA,DR,DIQ
"RTN","RCTCSP7",52,0)
 S TAXID=$$SSN^RCFN01(DEBTOR)
"RTN","RCTCSP7",53,0)
 S TAXID=$$LJSF(TAXID,9)
"RTN","RCTCSP7",54,0)
 Q TAXID
"RTN","RCTCSP7",55,0)
 ;
"RTN","RCTCSP7",56,0)
LJSF(X,Y) ;x left justified, y space filled
"RTN","RCTCSP7",57,0)
 S X=$E(X,1,Y)
"RTN","RCTCSP7",58,0)
 S X=X_$$BLANK(Y-$L(X))
"RTN","RCTCSP7",59,0)
 Q X
"RTN","RCTCSP7",60,0)
 ;
"RTN","RCTCSP7",61,0)
LJZF(X,Y) ;x left justified, y zero filled
"RTN","RCTCSP7",62,0)
 S X=X_"0000000000"
"RTN","RCTCSP7",63,0)
 S X=$E(X,X,Y)
"RTN","RCTCSP7",64,0)
 Q X
"RTN","RCTCSP7",65,0)
 ;
"RTN","RCTCSP7",66,0)
CLR19(BILL,X) ; clear the send flag
"RTN","RCTCSP7",67,0)
 S $P(^PRCA(430,BILL,19),U,X)=""
"RTN","RCTCSP7",68,0)
 ;
"RTN","RCTCSPD")
0^17^B159825609^B153936257
"RTN","RCTCSPD",1,0)
RCTCSPD ;ALBANY/BDB-CROSS-SERVICING TRANSMISSION ;03/15/14 3:34 PM
"RTN","RCTCSPD",2,0)
 ;;4.5;Accounts Receivable;**301,327,315**;Mar 20, 1995;Build 67
"RTN","RCTCSPD",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSPD",4,0)
 ;
"RTN","RCTCSPD",5,0)
 ;PRCA*4.5*327 a. Add check to insure debtor exists to prevent 
"RTN","RCTCSPD",6,0)
 ;                undefined error and set in XTMP work global to
"RTN","RCTCSPD",7,0)
 ;                be reported via 'TCSP' mailgroup.
"RTN","RCTCSPD",8,0)
 ;             b. Added process controls throughout entire batch
"RTN","RCTCSPD",9,0)
 ;                run and message to mail group 'TCSP' batch run
"RTN","RCTCSPD",10,0)
 ;                is complete
"RTN","RCTCSPD",11,0)
 ;             c. Move SETUP/FINISH to new routine RCTCSPD0
"RTN","RCTCSPD",12,0)
 ;                due to SACC size constraints
"RTN","RCTCSPD",13,0)
 ;             d. Move REC2C tag/code to RCTCSP7 to create space
"RTN","RCTCSPD",14,0)
 ;                for debtor undefined logic
"RTN","RCTCSPD",15,0)
 ;
"RTN","RCTCSPD",16,0)
ENTER ;          Entry point from nightly process PRCABJ
"RTN","RCTCSPD",17,0)
 N DEBTOR,P150DT,PRIN,INT,ADMIN,TDEB,TFIL,RCDFN,CNTR,SITE,LN,FN,MN,SITE,F60DT,VADM,PHONE,QUIT,TOTAL,ZIPCODE,FULLNM,RCNT,REPAY,X1,X2,ERROR,ADDR,CAT,BILLDT,CURRTOT,SITECD
"RTN","RCTCSPD",18,0)
 N SEQ,CNTLID,PREPDT,X1,X2,X,DELDT,ACTDT
"RTN","RCTCSPD",19,0)
 D SETUP^RCTCSPD0
"RTN","RCTCSPD",20,0)
 S (DEBTOR,RCNT)=0,SEQ=0
"RTN","RCTCSPD",21,0)
RSDEBTOR ;
"RTN","RCTCSPD",22,0)
 F  S DEBTOR=$O(^PRCA(430,"C",DEBTOR)) Q:DEBTOR'?1N.N  D
"RTN","RCTCSPD",23,0)
 .D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZBDEBTOR")=%_U_DEBTOR
"RTN","RCTCSPD",24,0)
 .N X,RCDFN,DEMCS,DOB,GNDR,DEBTOR0,DEBTOR1,DEBTOR3,DEBTOR7,BILL
"RTN","RCTCSPD",25,0)
 .I '$D(^RCD(340,DEBTOR,0)) S ^XTMP("RCTCSPD",$J,"ZZUNDEF",DEBTOR)="" Q
"RTN","RCTCSPD",26,0)
 .S DEBTOR0=^RCD(340,DEBTOR,0),DEBTOR1=$G(^(1)),DEBTOR3=$G(^(3)),DEBTOR7=$G(^(7))
"RTN","RCTCSPD",27,0)
 .S RCDFN=+DEBTOR0
"RTN","RCTCSPD",28,0)
 .S DEMCS=$$DEM^RCTCSP1(RCDFN)
"RTN","RCTCSPD",29,0)
 .S DOB=$P(DEMCS,U,2)
"RTN","RCTCSPD",30,0)
 .S GNDR=$P(DEMCS,U,1) S:"MF"'[GNDR GNDR="U"
"RTN","RCTCSPD",31,0)
 .I $P(DEBTOR7,U,2) I '+$P(DEBTOR7,U,3) D  ;send type 2 recall record
"RTN","RCTCSPD",32,0)
 ..N ACTION,B0,B15,BILL
"RTN","RCTCSPD",33,0)
 ..S ACTION="L"
"RTN","RCTCSPD",34,0)
 ..S B0="",B15="",BILL=0
"RTN","RCTCSPD",35,0)
 ..; The code below is designed to get ONLY one bill #.  It is not a bug! As per VA SME contacts.
"RTN","RCTCSPD",36,0)
 ..F  S BILL=$O(^PRCA(430,"C",DEBTOR,BILL)) Q:BILL'?1N.N  I $D(^PRCA(430,"TCSP",BILL)) I $P(^PRCA(430,BILL,15),U,7)'=1 S B0=$G(^PRCA(430,BILL,0)),B15=$G(^(15)) Q  ;get one bill
"RTN","RCTCSPD",37,0)
 ..I BILL="" S BILL=0 S $P(^RCD(340,DEBTOR,7),U,2,4)="^^",$P(DEBTOR7,U,2,4)="^^" Q  ;cs debtor with no cs bill, clear the debtor recall flag, quit
"RTN","RCTCSPD",38,0)
 ..D REC2
"RTN","RCTCSPD",39,0)
 ..S $P(^RCD(340,DEBTOR,7),U,3)=DT
"RTN","RCTCSPD",40,0)
 ..S DEBTOR7=^RCD(340,DEBTOR,7)
"RTN","RCTCSPD",41,0)
 ..S BILL=0 ;set debtor cross-serviced bills as recalled
"RTN","RCTCSPD",42,0)
 ..F  S BILL=$O(^PRCA(430,"C",DEBTOR,BILL)) Q:BILL'?1N.N  D
"RTN","RCTCSPD",43,0)
 ...D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZCRBILL")=%_U_BILL
"RTN","RCTCSPD",44,0)
 ...I $D(^PRCA(430,"TCSP",BILL)) D  Q  ;bill previously sent to TCSP
"RTN","RCTCSPD",45,0)
 ....S $P(^PRCA(430,BILL,15),U,1)="" ;clear the date referred
"RTN","RCTCSPD",46,0)
 ....S $P(^PRCA(430,BILL,15),U,2)=1 ;set the recall flag
"RTN","RCTCSPD",47,0)
 ....S $P(^PRCA(430,BILL,15),U,3)=DT ;set the recall date
"RTN","RCTCSPD",48,0)
 ....S $P(^PRCA(430,BILL,15),U,4)=$P(DEBTOR7,U,4) ;set the recall reason
"RTN","RCTCSPD",49,0)
 ....S $P(^PRCA(430,BILL,15),U,5)=$$GET1^DIQ(430,BILL,11) ;set the recall amount to the current amount
"RTN","RCTCSPD",50,0)
 ....K ^PRCA(430,"TCSP",BILL) ;kill the cross-servicing cross reference
"RTN","RCTCSPD",51,0)
 ....D RCRSD^RCTCSPD4 ; set debtor recall non-financial transaction PRCA*4.5*315
"RTN","RCTCSPD",52,0)
 .S (BILL,TOTAL,REPAY)=0
"RTN","RCTCSPD",53,0)
 .F  S BILL=$O(^PRCA(430,"C",DEBTOR,BILL)) Q:BILL'?1N.N  D
"RTN","RCTCSPD",54,0)
 ..D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZCTRACKER")=%_U_DEBTOR_U_BILL
"RTN","RCTCSPD",55,0)
 ..N B0,B4,B6,B7,B9,B12,B121,B14,B15,B16,B19,B20,ACTION
"RTN","RCTCSPD",56,0)
 ..S B0=$G(^PRCA(430,BILL,0)),B4=$G(^(4)),B6=$G(^(6)),B7=$G(^(7)),B9=$G(^(9)),B12=$G(^(12)),B121=$G(^(12.1)),B14=$G(^(14)),B15=$G(^(15)),B16=$G(^(16)),B19=$G(^(19)),B20=$G(^(20))
"RTN","RCTCSPD",57,0)
 ..Q:($P(B6,U,21)\1)<ACTDT  ;cs activation date cutoff
"RTN","RCTCSPD",58,0)
 ..I $D(^PRCA(430,"TCSP",BILL)),$$RCLLCHK^RCTCSP2(BILL) Q  ;bill previously sent to TCSP
"RTN","RCTCSPD",59,0)
 ..I $$UPDCHK(BILL) Q
"RTN","RCTCSPD",60,0)
 ..Q:B4  ;repayment plan
"RTN","RCTCSPD",61,0)
 ..Q:+$P(B15,U,7)  ;quit if bill is stopped
"RTN","RCTCSPD",62,0)
 ..Q:+$P(B14,U,1)  ;bill referred to TOP
"RTN","RCTCSPD",63,0)
 ..Q:$P(DEBTOR1,"^",9)=1  ;quit if debtor address marked unknown
"RTN","RCTCSPD",64,0)
 ..Q:$E($P(DEMCS,U,3),1,5)="00000"  ;quit if the ssn is not valid
"RTN","RCTCSPD",65,0)
 ..I +$P(B12,U,1) Q  ;check date bill sent to dmc
"RTN","RCTCSPD",66,0)
 ..Q:($P(B121,U,1)="N")!($P(B121,U,1)="P")  ;dmc debt valid
"RTN","RCTCSPD",67,0)
 ..I $P(B6,U,4),($P(B6,U,5)="DOJ") Q
"RTN","RCTCSPD",68,0)
 ..Q:+$P(DEMCS,U,4)  ;deceased patient
"RTN","RCTCSPD",69,0)
 ..Q:'$P(B0,U,2)  ;no category
"RTN","RCTCSPD",70,0)
 ..S CAT=$P($G(^PRCA(430.2,$P(B0,U,2),0)),U,7)
"RTN","RCTCSPD",71,0)
 ..Q:'CAT
"RTN","RCTCSPD",72,0)
 ..I ",4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,28,33,34,35,36,37,38,39,48,49"[(","_CAT_",") Q
"RTN","RCTCSPD",73,0)
 ..;dpn checks
"RTN","RCTCSPD",74,0)
 ..I $P(B20,U,3)=1,(10000+$G(^RC(342,1,"CS")))>DT,'$P(B20,U,4) D DUEPROC^RCTCSP3 Q  ;check to send dpn file to aitc
"RTN","RCTCSPD",75,0)
 ..I $P(B20,U,3)=1,(10000+$G(^RC(342,1,"CS")))>DT,$P(B20,U,4),'$P(B20,U,5) Q  ;check for print letter date
"RTN","RCTCSPD",76,0)
 ..I $P(B20,U,3)=1,(10000+$G(^RC(342,1,"CS")))>DT,$P(B20,U,4),$P(B20,U,5) D  I X<60 Q  ;check for 60 day wait from print letter date
"RTN","RCTCSPD",77,0)
 ...N X1,X2
"RTN","RCTCSPD",78,0)
 ...S X1=DT,X2=$P(B20,U,5) D ^%DTC
"RTN","RCTCSPD",79,0)
 ...I X'<60 S $P(B20,U,6)=DT,^PRCA(430,BILL,20)=B20 ;set the bill referral date to the current date
"RTN","RCTCSPD",80,0)
 ..S BILLDT=$P(B6,U,21),PREPDT=$P(B0,U,10)
"RTN","RCTCSPD",81,0)
 ..I BILLDT>P150DT Q  ;150 day old check
"RTN","RCTCSPD",82,0)
 ..I ($P(B0,U,8)=16),('$P(B6,U,3)) D  Q
"RTN","RCTCSPD",83,0)
 ...;no 3rd letter being sent
"RTN","RCTCSPD",84,0)
 ...N DNM
"RTN","RCTCSPD",85,0)
 ...S DNM=$$NAMEFF(+DEBTOR0),^XTMP("RCTCSPD",$J,"THIRD",DNM,$P(B0,U))=""
"RTN","RCTCSPD",86,0)
 ..I $P(B0,U,8)=16 I $$ADDCHKND(BILL) Q
"RTN","RCTCSPD",87,0)
 ..I $P(B0,U,8)=16 I $$ADDCHKNB(BILL) Q
"RTN","RCTCSPD",88,0)
 ..Q
"RTN","RCTCSPD",89,0)
 .Q
"RTN","RCTCSPD",90,0)
 ;
"RTN","RCTCSPD",91,0)
 D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZDEND")=%
"RTN","RCTCSPD",92,0)
 D THIRD^RCTCSP2
"RTN","RCTCSPD",93,0)
 D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZETRANSMIT CS RECS")=%
"RTN","RCTCSPD",94,0)
 D COMPILE^RCTCSP2 ;compile cross-serviced records
"RTN","RCTCSPD",95,0)
 D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZFTRANSMIT DPN")=%
"RTN","RCTCSPD",96,0)
 D COMPILED^RCTCSP3 ;compile the aitc due process notification records
"RTN","RCTCSPD",97,0)
 D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZGTRANSMIT FINISHED")=%
"RTN","RCTCSPD",98,0)
 D NOW^%DTC S ^XTMP("RCTCSPD",$J,"ZZHCOMPLETE")=%
"RTN","RCTCSPD",99,0)
 D FINISH^RCTCSPD0
"RTN","RCTCSPD",100,0)
 Q
"RTN","RCTCSPD",101,0)
 ;
"RTN","RCTCSPD",102,0)
ADDCHKND(BILL) ;add a new bill referral, new debtor
"RTN","RCTCSPD",103,0)
 N TOTAL,ACTION,X
"RTN","RCTCSPD",104,0)
 S ACTION="A"
"RTN","RCTCSPD",105,0)
 I $D(^RCD(340,"TCSP",DEBTOR)) Q 0 ;check debtor previously referred
"RTN","RCTCSPD",106,0)
 I $P(B15,U,2) Q 0 ;check tcsp bill recall flag
"RTN","RCTCSPD",107,0)
 I $P(DEBTOR7,U,2) Q 0 ;check debtor recall
"RTN","RCTCSPD",108,0)
 I $P(B15,U,7) Q 0 ;check stop tcsp referral flag
"RTN","RCTCSPD",109,0)
 I $D(^PRCA(430,"TCSP",BILL)) Q 0 ;bill previously sent to TCSP
"RTN","RCTCSPD",110,0)
 S TOTAL=$P(B7,U)+$P(B7,U,2)+$P(B7,U,3)+$P(B7,U,4)+$P(B7,U,5)
"RTN","RCTCSPD",111,0)
 I TOTAL<25 Q 1 ;no adds for bills less than $25
"RTN","RCTCSPD",112,0)
 D REC1,REC2,REC2A
"RTN","RCTCSPD",113,0)
 S $P(^PRCA(430,BILL,16),U,13)=DOB,B16=^(16)
"RTN","RCTCSPD",114,0)
 S $P(^PRCA(430,BILL,15),U,14)=GNDR,B15=^(15)
"RTN","RCTCSPD",115,0)
 D REC2C^RCTCSP7    ;PRCA*4.5*327
"RTN","RCTCSPD",116,0)
 S ADDRCS=$$ADDR^RCTCSP1(RCDFN)
"RTN","RCTCSPD",117,0)
 S $P(^PRCA(430,BILL,16),U,4,8)=$P(ADDRCS,U,1,5),$P(^(16),U,11)=$P(ADDRCS,U,6),$P(^(16),U,12)=$P(ADDRCS,U,7)
"RTN","RCTCSPD",118,0)
 S B16=^PRCA(430,BILL,16)
"RTN","RCTCSPD",119,0)
 D REC3^RCTCSP2
"RTN","RCTCSPD",120,0)
 S TAXID=$$TAXID(DEBTOR)
"RTN","RCTCSPD",121,0)
 S NAME=$$NAME(+DEBTOR0),NAME=$P(NAME,U)
"RTN","RCTCSPD",122,0)
 S $P(^PRCA(430,BILL,15),U,1)=DT,$P(^(16),U,1)=TAXID,$P(^(16),U,2)=NAME
"RTN","RCTCSPD",123,0)
 S X1=BILLDT,X2=+30 D C^%DTC S DELDT=X
"RTN","RCTCSPD",124,0)
 S $P(^PRCA(430,BILL,16),U,3)=DELDT,^PRCA(430,"TCSP",BILL)=""
"RTN","RCTCSPD",125,0)
 I $P($G(^PRCA(430,BILL,21)),U,21)="" S $P(^PRCA(430,BILL,21),U,1)=DT
"RTN","RCTCSPD",126,0)
 I '$D(^RCD(340,"TCSP",DEBTOR)) S $P(^RCD(340,DEBTOR,7),U,5)=DT,^RCD(340,"TCSP",DEBTOR)=""
"RTN","RCTCSPD",127,0)
 D NEWDEBTR^RCTCSPD4 ; set CS new debtor new bill non-financial transaction PRCA*4.5*315
"RTN","RCTCSPD",128,0)
 Q 1
"RTN","RCTCSPD",129,0)
 ;
"RTN","RCTCSPD",130,0)
ADDCHKNB(BILL) ;add a new bill referral, existing debtor
"RTN","RCTCSPD",131,0)
 N TOTAL,ACTION,TAXID,NAME,ADDRCS,X
"RTN","RCTCSPD",132,0)
 I '$D(^RCD(340,"TCSP",DEBTOR)) Q 0 ;check debtor previously referred
"RTN","RCTCSPD",133,0)
 I $P(B15,U,2) Q 0 ;check tcsp bill recall flag
"RTN","RCTCSPD",134,0)
 I $P(B15,U,7) Q 0 ;check stop tcsp referral flag
"RTN","RCTCSPD",135,0)
 I $D(^PRCA(430,"TCSP",BILL)) Q 0 ;bill previously sent to TCSP
"RTN","RCTCSPD",136,0)
 S TOTAL=$P(B7,U)+$P(B7,U,2)+$P(B7,U,3)+$P(B7,U,4)+$P(B7,U,5)
"RTN","RCTCSPD",137,0)
 I TOTAL<25 Q 0 ;no adds for bills less than $25
"RTN","RCTCSPD",138,0)
 S ACTION="A" D REC1
"RTN","RCTCSPD",139,0)
 S ACTION="B" D REC2
"RTN","RCTCSPD",140,0)
 S ACTION="A" D REC3^RCTCSP2
"RTN","RCTCSPD",141,0)
 S TAXID=$$TAXID(DEBTOR)
"RTN","RCTCSPD",142,0)
 S NAME=$$NAME(+DEBTOR0),NAME=$P(NAME,U)
"RTN","RCTCSPD",143,0)
 S $P(^PRCA(430,BILL,15),U,1)=DT,$P(^(16),U,1)=TAXID,$P(^(16),U,2)=NAME,$P(^(16),U,3)=BILLDT,^PRCA(430,"TCSP",BILL)=""
"RTN","RCTCSPD",144,0)
 I $P($G(^PRCA(430,BILL,21)),U,21)="" S $P(^PRCA(430,BILL,21),U,1)=DT
"RTN","RCTCSPD",145,0)
 S ADDRCS=$$ADDR^RCTCSP1(RCDFN)
"RTN","RCTCSPD",146,0)
 S $P(^PRCA(430,BILL,16),U,4,8)=$P(ADDRCS,U,1,5),$P(^(16),U,11)=$P(ADDRCS,U,6),$P(^(16),U,12)=$P(ADDRCS,U,7)
"RTN","RCTCSPD",147,0)
 S $P(^PRCA(430,BILL,16),U,13)=DOB,B16=^(16)
"RTN","RCTCSPD",148,0)
 S $P(^PRCA(430,BILL,15),U,14)=GNDR,B15=^(15)
"RTN","RCTCSPD",149,0)
 I '$D(^RCD(340,"TCSP",DEBTOR)) S $P(^RCD(340,DEBTOR,7),U,5)=DT,^RCD(340,"TCSP",DEBTOR)=""
"RTN","RCTCSPD",150,0)
 D DEBTOR^RCTCSPD4 ; set CS debtor new bill non-financial transaction PRCA*4.5*315
"RTN","RCTCSPD",151,0)
 Q 1
"RTN","RCTCSPD",152,0)
 ;
"RTN","RCTCSPD",153,0)
UPDCHK(BILL) ;update 5b or existing bill
"RTN","RCTCSPD",154,0)
 I '$D(^PRCA(430,BILL,16)) Q 0 ;quit null node 16 old address
"RTN","RCTCSPD",155,0)
 N TOTAL,TAXID,OTAXID,NAME,ONAME,ADDR,OADDR,ADDRCS,COUNTRY,OCOUNTRY,OPHONE,ODOB,OGNDR,TRNIDX,TRN1,TRN8,TRNAMT,TRNNUM,TRNFLG,FIVBFLG
"RTN","RCTCSPD",156,0)
 I $P(B15,U,2) Q 0 ;check tcsp bill recall flag
"RTN","RCTCSPD",157,0)
 I $P(B15,U,7) Q 0 ;check stop tcsp referral flag
"RTN","RCTCSPD",158,0)
 ;5b check
"RTN","RCTCSPD",159,0)
 S FIVBFLG=0
"RTN","RCTCSPD",160,0)
 S TRNIDX=0 F  S TRNIDX=$O(^PRCA(430,BILL,17,TRNIDX)) Q:+TRNIDX=0  D
"RTN","RCTCSPD",161,0)
 .S TRNNUM=$P($G(^PRCA(430,BILL,17,TRNIDX,0)),U,1),TRNFLG=$P($G(^PRCA(430,BILL,17,TRNIDX,0)),U,2)
"RTN","RCTCSPD",162,0)
 .Q:+TRNFLG=0
"RTN","RCTCSPD",163,0)
 .S TRN1=$G(^PRCA(433,TRNNUM,1)),TRNAMT=$P(TRN1,U,5) S:TRNAMT<0 TRNAMT=-TRNAMT
"RTN","RCTCSPD",164,0)
 .S TRN8=$G(^PRCA(433,TRNNUM,8))
"RTN","RCTCSPD",165,0)
 .S ACTION="U"
"RTN","RCTCSPD",166,0)
 .D REC5B^RCTCSP1
"RTN","RCTCSPD",167,0)
 .S $P(^PRCA(430,BILL,17,TRNIDX,0),U,2)=""
"RTN","RCTCSPD",168,0)
 .S FIVBFLG=1
"RTN","RCTCSPD",169,0)
 S TOTAL=$P(B7,U)+$P(B7,U,2)+$P(B7,U,3)+$P(B7,U,4)+$P(B7,U,5)
"RTN","RCTCSPD",170,0)
 I FIVBFLG,(TOTAL=0) S DR="151///@",DIE="^PRCA(430,",DA=BILL D ^DIE K DR,DIE,DA
"RTN","RCTCSPD",171,0)
 I $P(B19,U,1)=1 S ACTION="U" D REC1 S $P(B19,U,1)="" S $P(^PRCA(430,BILL,19),U,1)=""
"RTN","RCTCSPD",172,0)
 I $P(B19,U,2)=1 S ACTION="U" D REC2 S $P(B19,U,2)="" S $P(^PRCA(430,BILL,19),U,2)=""
"RTN","RCTCSPD",173,0)
 I $P(B19,U,3)=1 S ACTION="U" D REC2A S $P(B19,U,3)="" S $P(^PRCA(430,BILL,19),U,3)=""
"RTN","RCTCSPD",174,0)
 I $P(B19,U,4)=1 S ACTION="A" D REC2C^RCTCSP7 S $P(B19,U,4)="" S $P(^PRCA(430,BILL,19),U,4)="" ;PRCA*4.5*327
"RTN","RCTCSPD",175,0)
 I FIVBFLG=1 Q 1 ;if 5b sent, then do not continue to referral check
"RTN","RCTCSPD",176,0)
 I '$D(^PRCA(430,"TCSP",BILL)) Q 0 ;if not cross-serviced, then continue referral check
"RTN","RCTCSPD",177,0)
 S TAXID=$$TAXID(DEBTOR)
"RTN","RCTCSPD",178,0)
 S OTAXID=$P(B16,U,1)
"RTN","RCTCSPD",179,0)
 S NAME=$$NAME(+DEBTOR0),NAME=$P(NAME,U)
"RTN","RCTCSPD",180,0)
 S ONAME=$P(B16,U,2)
"RTN","RCTCSPD",181,0)
 I $P(B0,U,8)=16,$D(^PRCA(430,"TCSP",BILL)) I (NAME'=ONAME)!(TAXID'=OTAXID) D
"RTN","RCTCSPD",182,0)
 .S ACTION="U"
"RTN","RCTCSPD",183,0)
 .D REC2
"RTN","RCTCSPD",184,0)
 .S $P(^PRCA(430,BILL,16),U,1)=TAXID,$P(^(16),U,2)=NAME,$P(^(19),U,2)="",$P(B19,U,2)=""
"RTN","RCTCSPD",185,0)
 S OADDR=$P(^PRCA(430,BILL,16),U,4,8),OPHONE=$P(^(16),U,11),OCOUNTRY=$P(^(16),U,12)
"RTN","RCTCSPD",186,0)
 S ADDRCS=$$ADDR^RCTCSP1(RCDFN),PHONE=$P(ADDRCS,U,6),COUNTRY=$P(ADDRCS,U,7)
"RTN","RCTCSPD",187,0)
 I $P(DEBTOR1,"^",9)'=1 D  ;if debtor address is not marked unknown, then check address
"RTN","RCTCSPD",188,0)
 .I $P(B0,U,8)=16,$D(^PRCA(430,"TCSP",BILL)) I ($P(ADDRCS,U,1,5)'=$P(OADDR,U,1,5))!(PHONE'=OPHONE)!(COUNTRY'=OCOUNTRY) D
"RTN","RCTCSPD",189,0)
 ..S ACTION="A" ;2c records have action code 'a'
"RTN","RCTCSPD",190,0)
 ..D REC2C^RCTCSP7
"RTN","RCTCSPD",191,0)
 ..S $P(B19,U,4)=""
"RTN","RCTCSPD",192,0)
 ..S $P(^PRCA(430,BILL,16),U,4,8)=$P(ADDRCS,U,1,5),$P(^(16),U,11)=PHONE,$P(^(16),U,12)=$P(ADDRCS,U,7)
"RTN","RCTCSPD",193,0)
 S B16=^PRCA(430,BILL,16)
"RTN","RCTCSPD",194,0)
 S ODOB=$P(^PRCA(430,BILL,16),U,13)
"RTN","RCTCSPD",195,0)
 S OGNDR=$P(^PRCA(430,BILL,15),U,14)
"RTN","RCTCSPD",196,0)
 I $P(B0,U,8)=16,$D(^PRCA(430,"TCSP",BILL)) I (DOB'=ODOB)!(GNDR'=OGNDR) D
"RTN","RCTCSPD",197,0)
 .S ACTION="U"
"RTN","RCTCSPD",198,0)
 .D REC2A
"RTN","RCTCSPD",199,0)
 .S $P(^PRCA(430,BILL,16),U,13)=DOB,B16=^(16)
"RTN","RCTCSPD",200,0)
 .S $P(^PRCA(430,BILL,15),U,14)=GNDR,B15=^(15)
"RTN","RCTCSPD",201,0)
 .Q
"RTN","RCTCSPD",202,0)
 Q 1 ;bill is cross-serviced so do not continue referral check
"RTN","RCTCSPD",203,0)
 ;
"RTN","RCTCSPD",204,0)
REC1 ;record type 1
"RTN","RCTCSPD",205,0)
 N REC,KNUM,DEBTNR,AMTORIG,AMTPBAL,AMTIBAL,AMTABAL,AMTFBAL,AMTCBAL,AMTRFRRD,AMOUNT,DELDT,X,X1,X2,BILLDT,PREPDT
"RTN","RCTCSPD",206,0)
 S REC="C1 "_ACTION_"3636001200"_"DM1D "
"RTN","RCTCSPD",207,0)
 S KNUM=$P($P(B0,U,1),"-",2)
"RTN","RCTCSPD",208,0)
 S DEBTNR=$E(SITE,1,3)_$$LJZF(KNUM,7)_$TR($J(BILL,20)," ",0),REC=REC_DEBTNR_" "
"RTN","RCTCSPD",209,0)
 S REC=REC_"I   A MSCC"
"RTN","RCTCSPD",210,0)
 S BILLDT=$P(B6,U,21),PREPDT=$P(B0,U,10)
"RTN","RCTCSPD",211,0)
 S REC=REC_$$DATE8(PREPDT)
"RTN","RCTCSPD",212,0)
 S X1=BILLDT,X2=+30 D C^%DTC S DELDT=X
"RTN","RCTCSPD",213,0)
 S REC=REC_$$DATE8(DELDT)
"RTN","RCTCSPD",214,0)
 S AMTPBAL=$P(B7,U,1) ;principle balance
"RTN","RCTCSPD",215,0)
 S AMTIBAL=$P(B7,U,2) ;interest balance
"RTN","RCTCSPD",216,0)
 S AMTABAL=$P(B7,U,3) ;administrative balance
"RTN","RCTCSPD",217,0)
 S AMTFBAL=$P(B7,U,4) ;marshal fee
"RTN","RCTCSPD",218,0)
 S AMTCBAL=$P(B7,U,5) ;court cost
"RTN","RCTCSPD",219,0)
 S AMTRFRRD=AMTPBAL+AMTIBAL+AMTABAL+AMTFBAL+AMTCBAL
"RTN","RCTCSPD",220,0)
 S AMTORIG=$P(B0,U,3)
"RTN","RCTCSPD",221,0)
 D  ;
"RTN","RCTCSPD",222,0)
 .I ACTION="A" S REC=REC_$$AMOUNT(AMTRFRRD)_$$AMOUNT(AMTRFRRD) Q
"RTN","RCTCSPD",223,0)
 .I ACTION="L" S AMTRFRRD=0 S REC=REC_$$AMOUNT(AMTRFRRD)_$$AMOUNT(AMTRFRRD) Q
"RTN","RCTCSPD",224,0)
 .S REC=REC_$$BLANK(28)
"RTN","RCTCSPD",225,0)
 S REC=REC_"                                             N        "
"RTN","RCTCSPD",226,0)
 S AMOUNT=$$AMOUNT(AMTPBAL)_$$AMOUNT(AMTIBAL)_$$AMOUNT(AMTABAL)_$$AMOUNT(AMTFBAL+AMTCBAL)
"RTN","RCTCSPD",227,0)
 I ACTION="L" S AMOUNT=$$AMOUNT(0)_$$AMOUNT(0)_$$AMOUNT(0)_$$AMOUNT(0) ;by iai spec
"RTN","RCTCSPD",228,0)
 I ACTION="U" S AMOUNT=$$BLANK(56) ;by iai spec
"RTN","RCTCSPD",229,0)
 S REC=REC_AMOUNT
"RTN","RCTCSPD",230,0)
 I ACTION="L" D
"RTN","RCTCSPD",231,0)
 .S REC=REC_$$BLANK(252-$L(REC))
"RTN","RCTCSPD",232,0)
 .S RCD=$P(B15,U,4)
"RTN","RCTCSPD",233,0)
 .S REC=REC_$S(RCD="01":"01",RCD="07":"07",RCD="08":"08",RCD="15":"01",RCD="03":"01",RCD="05":"01",RCD="06":"01",1:"01")
"RTN","RCTCSPD",234,0)
 S REC=REC_$$BLANK(450-$L(REC))
"RTN","RCTCSPD",235,0)
 I ACTION="A" S $P(^PRCA(430,BILL,16),U,9)=AMTRFRRD,$P(^(16),U,10)=AMTRFRRD
"RTN","RCTCSPD",236,0)
 I ACTION="L" S $P(^PRCA(430,BILL,16),U,9)="",$P(^(16),U,10)=""
"RTN","RCTCSPD",237,0)
 S ^XTMP("RCTCSPD",$J,BILL,ACTION,1)=REC
"RTN","RCTCSPD",238,0)
 S ^XTMP("RCTCSPD",$J,"BILL",ACTION,BILL)=$$TAXID(DEBTOR)_"^"_+$E(REC,91,102)_"."_$E(REC,103,104) ;sends mailman message of documents sent to user
"RTN","RCTCSPD",239,0)
 D CLR19(BILL,1)
"RTN","RCTCSPD",240,0)
 Q
"RTN","RCTCSPD",241,0)
 ;
"RTN","RCTCSPD",242,0)
REC2 ;
"RTN","RCTCSPD",243,0)
 N REC,KNUM,DEBTNR,DEBTORNB,TAXID,NAME,RCD
"RTN","RCTCSPD",244,0)
 S REC="C2 "_ACTION_"3636001200"_"DM1D "
"RTN","RCTCSPD",245,0)
 S KNUM=$P($P(B0,U,1),"-",2)
"RTN","RCTCSPD",246,0)
 S DEBTNR=$E(SITE,1,3)_$$LJZF(KNUM,7)_$TR($J(BILL,20)," ",0),REC=REC_DEBTNR
"RTN","RCTCSPD",247,0)
 S DEBTORNB=$E(SITE,1,3)_$TR($J(DEBTOR,12)," ",0)
"RTN","RCTCSPD",248,0)
 S REC=REC_DEBTORNB
"RTN","RCTCSPD",249,0)
 S TAXID=$$TAXID(DEBTOR)
"RTN","RCTCSPD",250,0)
 S REC=REC_TAXID_"SSN"
"RTN","RCTCSPD",251,0)
 S NAME=$$NAME(+DEBTOR0),NAME=$P(NAME,U)
"RTN","RCTCSPD",252,0)
 S REC=REC_NAME_$$BLANK(5)_"I"
"RTN","RCTCSPD",253,0)
 I ACTION="L" D
"RTN","RCTCSPD",254,0)
 .S REC=REC_$$BLANK(232-$L(REC))
"RTN","RCTCSPD",255,0)
 .S RCD=$P(B15,U,4)
"RTN","RCTCSPD",256,0)
 .S REC=REC_$S(RCD="01":"12",RCD="07":"12",RCD="08":"12",RCD="15":"12",RCD="03":"03",RCD="05":"05",RCD="06":"06",1:"12")
"RTN","RCTCSPD",257,0)
 S REC=REC_$$BLANK(450-$L(REC))
"RTN","RCTCSPD",258,0)
 S ^XTMP("RCTCSPD",$J,BILL,ACTION,2)=REC
"RTN","RCTCSPD",259,0)
 S $P(^XTMP("RCTCSPD",$J,"BILL",ACTION,BILL),U,1)=$$TAXID(DEBTOR)
"RTN","RCTCSPD",260,0)
 D CLR19(BILL,2)
"RTN","RCTCSPD",261,0)
 Q
"RTN","RCTCSPD",262,0)
 ;
"RTN","RCTCSPD",263,0)
REC2A ;
"RTN","RCTCSPD",264,0)
 N REC,KNUM,DEBTNR,DEBTORNB
"RTN","RCTCSPD",265,0)
 S REC="C2A"_ACTION_"3636001200"_"DM1D "
"RTN","RCTCSPD",266,0)
 S KNUM=$P($P(B0,U,1),"-",2)
"RTN","RCTCSPD",267,0)
 S DEBTNR=$E(SITE,1,3)_$$LJZF(KNUM,7)_$TR($J(BILL,20)," ",0),REC=REC_DEBTNR
"RTN","RCTCSPD",268,0)
 S DEBTORNB=$E(SITE,1,3)_$TR($J(DEBTOR,12)," ",0)
"RTN","RCTCSPD",269,0)
 S REC=REC_DEBTORNB
"RTN","RCTCSPD",270,0)
 S REC=REC_$$BLANK(3)
"RTN","RCTCSPD",271,0)
 S REC=REC_GNDR
"RTN","RCTCSPD",272,0)
 S REC=REC_$$DATE8($P(DEMCS,U,2))
"RTN","RCTCSPD",273,0)
 S REC=REC_$$BLANK(450-$L(REC))
"RTN","RCTCSPD",274,0)
 S ^XTMP("RCTCSPD",$J,BILL,ACTION,"2A")=REC
"RTN","RCTCSPD",275,0)
 S $P(^XTMP("RCTCSPD",$J,"BILL",ACTION,BILL),U,1)=$$TAXID(DEBTOR)
"RTN","RCTCSPD",276,0)
 D CLR19(BILL,3)
"RTN","RCTCSPD",277,0)
 Q
"RTN","RCTCSPD",278,0)
 ;
"RTN","RCTCSPD",279,0)
DATE8(X) ;changes fileman date into 8 digit date yyyymmdd
"RTN","RCTCSPD",280,0)
 I +X S X=X+17000000
"RTN","RCTCSPD",281,0)
 S X=$E(X,1,8)
"RTN","RCTCSPD",282,0)
 Q X
"RTN","RCTCSPD",283,0)
 ;
"RTN","RCTCSPD",284,0)
AMOUNT(X) ;changes amount to zero filled, right justified
"RTN","RCTCSPD",285,0)
 S:X<0 X=-X
"RTN","RCTCSPD",286,0)
 S X=$TR($J(X,0,2),".")
"RTN","RCTCSPD",287,0)
 S X=$E("000000000000",1,14-$L(X))_X
"RTN","RCTCSPD",288,0)
 Q X
"RTN","RCTCSPD",289,0)
 ;
"RTN","RCTCSPD",290,0)
NAME(DFN) ;returns name for document and name in file
"RTN","RCTCSPD",291,0)
 N FN,LN,MN,NM,DOCNM,VA,VADM
"RTN","RCTCSPD",292,0)
 S NM=""
"RTN","RCTCSPD",293,0)
 D DEM^VADPT
"RTN","RCTCSPD",294,0)
 I $D(VADM) S NM=VADM(1)
"RTN","RCTCSPD",295,0)
 S LN=$TR($P(NM,",")," .'-"),MN=$P($P(NM,",",2)," ",2)
"RTN","RCTCSPD",296,0)
 I ($E(MN,1,2)="SR")!($E(MN,1,2)="JR")!(MN?2.3"I")!(MN?0.1"I"1"V"1.3"I") S MN=""
"RTN","RCTCSPD",297,0)
 S FN=$P($P(NM,",",2)," ")
"RTN","RCTCSPD",298,0)
 S DOCNM=$$LJ^XLFSTR($E(LN,1,35),35)_$$LJ^XLFSTR($E(FN,1,35),35)_$$LJ^XLFSTR($E(MN,1,35),35)
"RTN","RCTCSPD",299,0)
 Q DOCNM
"RTN","RCTCSPD",300,0)
 ;
"RTN","RCTCSPD",301,0)
NAMEFF(DFN) ;returns name for document and name in file
"RTN","RCTCSPD",302,0)
 N FN,LN,MN,NM,DOCNM,VA,VADM
"RTN","RCTCSPD",303,0)
 S NM=""
"RTN","RCTCSPD",304,0)
 D DEM^VADPT
"RTN","RCTCSPD",305,0)
 I $D(VADM) S NM=VADM(1)
"RTN","RCTCSPD",306,0)
 S LN=$TR($P(NM,",")," .'-"),MN=$P($P(NM,",",2)," ",2)
"RTN","RCTCSPD",307,0)
 I ($E(MN,1,2)="SR")!($E(MN,1,2)="JR")!(MN?2.3"I")!(MN?0.1"I"1"V"1.3"I") S MN=""
"RTN","RCTCSPD",308,0)
 S FN=$P($P(NM,",",2)," ")
"RTN","RCTCSPD",309,0)
 S DOCNM=LN_" "_FN_" "_MN
"RTN","RCTCSPD",310,0)
 Q DOCNM
"RTN","RCTCSPD",311,0)
 ;
"RTN","RCTCSPD",312,0)
BLANK(X) ;returns 'x' blank spaces
"RTN","RCTCSPD",313,0)
 N BLANK
"RTN","RCTCSPD",314,0)
 S BLANK="",$P(BLANK," ",X+1)=""
"RTN","RCTCSPD",315,0)
 Q BLANK
"RTN","RCTCSPD",316,0)
 ;
"RTN","RCTCSPD",317,0)
NOW() ;compiles current date,time
"RTN","RCTCSPD",318,0)
 N X,Y,%,%H
"RTN","RCTCSPD",319,0)
 S %H=$H D YX^%DTC
"RTN","RCTCSPD",320,0)
 Q Y
"RTN","RCTCSPD",321,0)
 ;
"RTN","RCTCSPD",322,0)
RJZF(X,Y) ;right justify zero fill width Y
"RTN","RCTCSPD",323,0)
 S X=$E("000000000000",1,Y-$L(X))_X
"RTN","RCTCSPD",324,0)
 Q X
"RTN","RCTCSPD",325,0)
 ;
"RTN","RCTCSPD",326,0)
TAXID(DEBTOR) ;computes TAXID to place on documents
"RTN","RCTCSPD",327,0)
 N TAXID,DIC,DA,DR,DIQ
"RTN","RCTCSPD",328,0)
 S TAXID=$$SSN^RCFN01(DEBTOR)
"RTN","RCTCSPD",329,0)
 S TAXID=$$LJSF(TAXID,9)
"RTN","RCTCSPD",330,0)
 Q TAXID
"RTN","RCTCSPD",331,0)
 ;
"RTN","RCTCSPD",332,0)
LJSF(X,Y) ;x left justified, y space filled
"RTN","RCTCSPD",333,0)
 S X=$E(X,1,Y)
"RTN","RCTCSPD",334,0)
 S X=X_$$BLANK(Y-$L(X))
"RTN","RCTCSPD",335,0)
 Q X
"RTN","RCTCSPD",336,0)
 ;
"RTN","RCTCSPD",337,0)
LJZF(X,Y) ;x left justified, y zero filled
"RTN","RCTCSPD",338,0)
 S X=X_"0000000000"
"RTN","RCTCSPD",339,0)
 S X=$E(X,X,Y)
"RTN","RCTCSPD",340,0)
 Q X
"RTN","RCTCSPD",341,0)
 ;
"RTN","RCTCSPD",342,0)
RECALL(BILL) ; set the recall flag
"RTN","RCTCSPD",343,0)
 S $P(^PRCA(430,BILL,15),U,2)=1
"RTN","RCTCSPD",344,0)
 Q
"RTN","RCTCSPD",345,0)
 ;
"RTN","RCTCSPD",346,0)
CLR19(BILL,X) ; clear the send flag
"RTN","RCTCSPD",347,0)
 S $P(^PRCA(430,BILL,19),U,X)=""
"RTN","RCTCSPD",348,0)
 ;
"RTN","RCTCSPD4")
0^18^B88942969^n/a
"RTN","RCTCSPD4",1,0)
RCTCSPD4 ;ALB/LMH-CROSS-SERVICING NON-FINANCIAL TRANSACTIONS ;03/15/14 3:34 PM
"RTN","RCTCSPD4",2,0)
 ;;4.5;Accounts Receivable;**315**;Mar 20, 1995;Build 67
"RTN","RCTCSPD4",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSPD4",4,0)
 ;
"RTN","RCTCSPD4",5,0)
 Q 
"RTN","RCTCSPD4",6,0)
 ;
"RTN","RCTCSPD4",7,0)
STOP ; CS stop placed non-financial tx
"RTN","RCTCSPD4",8,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER
"RTN","RCTCSPD4",9,0)
 S PRCABN=BILL
"RTN","RCTCSPD4",10,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD4",11,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD4",12,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD4",13,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD4",14,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD4",15,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD4",16,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",33,0)) ;Transaction Type
"RTN","RCTCSPD4",17,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD4",18,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD4",19,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD4",20,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD4",21,0)
 S DR=DR_";5.02///CS STOP PLACED" D ^DIE
"RTN","RCTCSPD4",22,0)
 Q
"RTN","RCTCSPD4",23,0)
 ;
"RTN","RCTCSPD4",24,0)
DELSTOP ; CS delete stop non-financial tx
"RTN","RCTCSPD4",25,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER
"RTN","RCTCSPD4",26,0)
 S PRCABN=BILL
"RTN","RCTCSPD4",27,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD4",28,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD4",29,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD4",30,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD4",31,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD4",32,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD4",33,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",36,0)) ;Transaction Type
"RTN","RCTCSPD4",34,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD4",35,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD4",36,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD4",37,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD4",38,0)
 S DR=DR_";5.02///CS STOP DELETED" D ^DIE
"RTN","RCTCSPD4",39,0)
 Q
"RTN","RCTCSPD4",40,0)
 ;
"RTN","RCTCSPD4",41,0)
RCLL ; Recall from Cross-Servicing non-financial tx
"RTN","RCTCSPD4",42,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER,DUZ
"RTN","RCTCSPD4",43,0)
 ;DUZ is reserved, but in this case DUZ may be undefined due to batch background job
"RTN","RCTCSPD4",44,0)
 S PRCABN=BILL,DUZ=.5,DUZ(0)="@",DUZ(2)=1 ; Server has no DUZ, use Postmaster
"RTN","RCTCSPD4",45,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD4",46,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD4",47,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD4",48,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD4",49,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD4",50,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD4",51,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",34,0)) ;Transaction Type
"RTN","RCTCSPD4",52,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD4",53,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD4",54,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD4",55,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD4",56,0)
 S DR=DR_";5.02///CS BILL RECALL" D ^DIE
"RTN","RCTCSPD4",57,0)
 Q
"RTN","RCTCSPD4",58,0)
 ;
"RTN","RCTCSPD4",59,0)
DELRCLL ; Cross-Servicing Delete Bill Recall non-financial tx
"RTN","RCTCSPD4",60,0)
 ;
"RTN","RCTCSPD4",61,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER
"RTN","RCTCSPD4",62,0)
 S PRCABN=BILL
"RTN","RCTCSPD4",63,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD4",64,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD4",65,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD4",66,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD4",67,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD4",68,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD4",69,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",37,0)) ;Transaction Type
"RTN","RCTCSPD4",70,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD4",71,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD4",72,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD4",73,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD4",74,0)
 S DR=DR_";5.02///CS DEL BILL RECALL" D ^DIE
"RTN","RCTCSPD4",75,0)
 Q
"RTN","RCTCSPD4",76,0)
 ;
"RTN","RCTCSPD4",77,0)
NEWDEBTR ; CS add new debtor non-financial tx
"RTN","RCTCSPD4",78,0)
 ;         Called by RCTCSPD
"RTN","RCTCSPD4",79,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER,X,PRCABN
"RTN","RCTCSPD4",80,0)
 S PRCABN=BILL,DUZ=.5,DUZ(0)="@",DUZ(2)=1 ; Server has no DUZ, use Postmaster
"RTN","RCTCSPD4",81,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD4",82,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD4",83,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD4",84,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD4",85,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD4",86,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD4",87,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",48,0)) ;Transaction Type
"RTN","RCTCSPD4",88,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD4",89,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD4",90,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD4",91,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD4",92,0)
 S DR=DR_";5.02///CS NEW DBTR NEW BILL" D ^DIE
"RTN","RCTCSPD4",93,0)
 Q
"RTN","RCTCSPD4",94,0)
 ;
"RTN","RCTCSPD4",95,0)
RCRSD ; CS Debtor Recall non-financial tx
"RTN","RCTCSPD4",96,0)
 ; Set this debtor for Recall from Cross-Servicing
"RTN","RCTCSPD4",97,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER,X
"RTN","RCTCSPD4",98,0)
 ;DUZ is reserved, but in this case DUZ may be undefined due to batch background job
"RTN","RCTCSPD4",99,0)
 S PRCABN=BILL,DUZ=.5,DUZ(0)="@",DUZ(2)=1 ; Server has no DUZ, use Postmaster
"RTN","RCTCSPD4",100,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD4",101,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD4",102,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD4",103,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD4",104,0)
 S DR=".03///"_PRCABN ; BILL NUMBER
"RTN","RCTCSPD4",105,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD4",106,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",35,0)) ;Transaction Type
"RTN","RCTCSPD4",107,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD4",108,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD4",109,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD4",110,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD4",111,0)
 S DR=DR_";5.02///CS Debtor Recall" D ^DIE
"RTN","RCTCSPD4",112,0)
 Q
"RTN","RCTCSPD4",113,0)
 ;
"RTN","RCTCSPD4",114,0)
DELSETD(BILL) ; CS Delete Debtor Recall non-financial tx
"RTN","RCTCSPD4",115,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSERX
"RTN","RCTCSPD4",116,0)
 S PRCABN=BILL
"RTN","RCTCSPD4",117,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD4",118,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD4",119,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD4",120,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD4",121,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD4",122,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD4",123,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",38,0)) ;Transaction Type
"RTN","RCTCSPD4",124,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD4",125,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD4",126,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD4",127,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD4",128,0)
 S DR=DR_";5.02///CS DEL DEBTOR RECALL" D ^DIE
"RTN","RCTCSPD4",129,0)
 Q
"RTN","RCTCSPD4",130,0)
 ;
"RTN","RCTCSPD4",131,0)
DEBTOR ; CS New Bill Existing Debtor non-financial tx
"RTN","RCTCSPD4",132,0)
 ;
"RTN","RCTCSPD4",133,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER,PRCABN
"RTN","RCTCSPD4",134,0)
 S PRCABN=BILL,DUZ=.5,DUZ(0)="@",DUZ(2)=1 ; Server has no DUZ, use Postmaster
"RTN","RCTCSPD4",135,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD4",136,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD4",137,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD4",138,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD4",139,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD4",140,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD4",141,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",39,0)) ;Transaction Type
"RTN","RCTCSPD4",142,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD4",143,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD4",144,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD4",145,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD4",146,0)
 S DR=DR_";5.02///CS DEBTOR NEW BILL" D ^DIE ; Revised as requested
"RTN","RCTCSPD4",147,0)
 Q
"RTN","RCTCSPD4",148,0)
 ;
"RTN","RCTCSPD4",149,0)
CSCASE ;  Add Case Info non-financial tx 
"RTN","RCTCSPD4",150,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER
"RTN","RCTCSPD4",151,0)
 S PRCABN=BILL,DUZ=.5,DUZ(0)="@",DUZ(2)=1 ; Server has no DUZ, use Postmaster
"RTN","RCTCSPD4",152,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD4",153,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD4",154,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD4",155,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD4",156,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD4",157,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD4",158,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",47,0)) ;Transaction Type
"RTN","RCTCSPD4",159,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD4",160,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD4",161,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD4",162,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD4",163,0)
 S DR=DR_";5.02///CS ADD CASE INFO" D ^DIE
"RTN","RCTCSPD4",164,0)
 Q
"RTN","RCTCSPD4",165,0)
 ;
"RTN","RCTCSPD4",166,0)
DELSETC ; Cross-Servicing delete case recall non-financial tx
"RTN","RCTCSPD4",167,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER
"RTN","RCTCSPD4",168,0)
 S PRCABN=BILL
"RTN","RCTCSPD4",169,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD4",170,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD4",171,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD4",172,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD4",173,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD4",174,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD4",175,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",46,0)) ;Transaction Type
"RTN","RCTCSPD4",176,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD4",177,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD4",178,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD4",179,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD4",180,0)
 S DR=DR_";5.02///CS DEL CASE RECALL" D ^DIE
"RTN","RCTCSPD4",181,0)
 Q
"RTN","RCTCSPD4",182,0)
 ;
"RTN","RCTCSPD4",183,0)
DECADJ ; non-financial decrease adjustment transaction for 5b cross-servicing record
"RTN","RCTCSPD4",184,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER
"RTN","RCTCSPD4",185,0)
 S PRCABN=BILL
"RTN","RCTCSPD4",186,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD4",187,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD4",188,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD4",189,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD4",190,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD4",191,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD4",192,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",49,0)) ;Transaction Type
"RTN","RCTCSPD4",193,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD4",194,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD4",195,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD4",196,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD4",197,0)
 S DR=DR_";5.02///CS DECREASE ADJ" D ^DIE
"RTN","RCTCSPD4",198,0)
 Q 
"RTN","RCTCSPD4",199,0)
 ;
"RTN","RCTCSPD4",200,0)
DECADJ0 ; decrease adjustment transaction deletes cs date
"RTN","RCTCSPD4",201,0)
 ; 5B tx takes bal. of bill to 0 
"RTN","RCTCSPD4",202,0)
 ; if node 7 balances = 0.  Called by RCTCSPD
"RTN","RCTCSPD4",203,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER
"RTN","RCTCSPD4",204,0)
 S PRCABN=BILL
"RTN","RCTCSPD4",205,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD4",206,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD4",207,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD4",208,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD4",209,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD4",210,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD4",211,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",40,0)) ;Transaction Type
"RTN","RCTCSPD4",212,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD4",213,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD4",214,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD4",215,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD4",216,0)
 S DR=DR_";5.02///CS DECR ADJ NOT APP" D ^DIE
"RTN","RCTCSPD4",217,0)
 D CHKS
"RTN","RCTCSPD4",218,0)
 Q 
"RTN","RCTCSPD4",219,0)
 ;
"RTN","RCTCSPD4",220,0)
RCRSC ; Cross-Servicing case recall non-financial tx
"RTN","RCTCSPD4",221,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER
"RTN","RCTCSPD4",222,0)
 ;DUZ is reserved, but in this case DUZ may be undefined due to batch background job
"RTN","RCTCSPD4",223,0)
 S PRCABN=BILL,DUZ=.5,DUZ(0)="@",DUZ(2)=1 ; Server has no DUZ, use Postmaster
"RTN","RCTCSPD4",224,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD4",225,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD4",226,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD4",227,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD4",228,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD4",229,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD4",230,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",45,0)) ;Transaction Type
"RTN","RCTCSPD4",231,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD4",232,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD4",233,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD4",234,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD4",235,0)
 S DR=DR_";5.02///CS CASE RECALL" D ^DIE
"RTN","RCTCSPD4",236,0)
 Q
"RTN","RCTCSPD4",237,0)
 ;
"RTN","RCTCSPD4",238,0)
CHKS ;Leave validation checks in place
"RTN","RCTCSPD4",239,0)
 I $P($G(^PRCA(433,PRCAEN,5)),"^",2)=""!'$P(^PRCA(433,PRCAEN,1),"^") S PRCACOMM="TRANSACTION INCOMPLETE" D DELETE^PRCAWO1 K PRCACOMM Q
"RTN","RCTCSPD4",240,0)
 I '$D(PRCAD("DELETE")) S RCASK=1 D TRANUP^PRCAUTL,UPPRIN^PRCADJ
"RTN","RCTCSPD4",241,0)
 I $P($G(^RCD(340,+$P(^PRCA(430,PRCABN,0),"^",9),0)),"^")[";DPT(" D
"RTN","RCTCSPD4",242,0)
 .;Ensure comment does not appear on patient statement
"RTN","RCTCSPD4",243,0)
 .S $P(^PRCA(433,PRCAEN,0),"^",10)=1
"RTN","RCTCSPD4",244,0)
 Q
"RTN","RCTCSPD4",245,0)
 ; End of RCTCSPD4
"RTN","RCTCSPD5")
0^60^B19971041^n/a
"RTN","RCTCSPD5",1,0)
RCTCSPD5 ;ALB/LMH-CROSS-SERVICING NON-FINANCIAL TRANSACTIONS ;03/15/14 3:34 PM
"RTN","RCTCSPD5",2,0)
 ;;4.5;Accounts Receivable;**315**;Mar 20, 1995;Build 67
"RTN","RCTCSPD5",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSPD5",4,0)
 ;
"RTN","RCTCSPD5",5,0)
 Q
"RTN","RCTCSPD5",6,0)
 ;
"RTN","RCTCSPD5",7,0)
CSATRY ; Cross-Servicing Admin Adj Treasury Rev? Yes non-financial tx
"RTN","RCTCSPD5",8,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER,X
"RTN","RCTCSPD5",9,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD5",10,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD5",11,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD5",12,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD5",13,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD5",14,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD5",15,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",53,0)) ;Transaction Type
"RTN","RCTCSPD5",16,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD5",17,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD5",18,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD5",19,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD5",20,0)
 S DR=DR_";5.02///CS ADMIN ADJ TR REV?Y" D ^DIE
"RTN","RCTCSPD5",21,0)
 Q
"RTN","RCTCSPD5",22,0)
 ;
"RTN","RCTCSPD5",23,0)
CSATRN ; Cross-Servicing Admin Adj Treasury Rev? No non-financial tx
"RTN","RCTCSPD5",24,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER,X
"RTN","RCTCSPD5",25,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD5",26,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD5",27,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD5",28,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD5",29,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD5",30,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD5",31,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",54,0)) ;Transaction Type
"RTN","RCTCSPD5",32,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD5",33,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD5",34,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD5",35,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD5",36,0)
 S DR=DR_";5.02///CS ADMIN ADJ TR REV?N" D ^DIE
"RTN","RCTCSPD5",37,0)
 Q
"RTN","RCTCSPD5",38,0)
 ;
"RTN","RCTCSPD5",39,0)
CSITRY ; Cross-Servicing Incr Adj Treasury Rev? Yes non-financial tx
"RTN","RCTCSPD5",40,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER,X
"RTN","RCTCSPD5",41,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD5",42,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD5",43,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD5",44,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD5",45,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD5",46,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD5",47,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",57,0)) ;Transaction Type
"RTN","RCTCSPD5",48,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD5",49,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD5",50,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD5",51,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD5",52,0)
 S DR=DR_";5.02///CS INC ADJ TR REV?Y" D ^DIE
"RTN","RCTCSPD5",53,0)
 Q
"RTN","RCTCSPD5",54,0)
 ;
"RTN","RCTCSPD5",55,0)
CSITRN ; Cross-Servicing Incr Adj Treasury Rev? No non-financial tx
"RTN","RCTCSPD5",56,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER,X
"RTN","RCTCSPD5",57,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD5",58,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD5",59,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD5",60,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD5",61,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD5",62,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD5",63,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",58,0)) ;Transaction Type
"RTN","RCTCSPD5",64,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD5",65,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD5",66,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD5",67,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD5",68,0)
 S DR=DR_";5.02///CS INC ADJ TR REV?N" D ^DIE
"RTN","RCTCSPD5",69,0)
 Q
"RTN","RCTCSPD5",70,0)
 ;
"RTN","RCTCSPD5",71,0)
CSPRTR ; Cross-Servicing PENDING RECONCILIATION non-financial tx  
"RTN","RCTCSPD5",72,0)
 ;       Called by R1^RCTCSPRS
"RTN","RCTCSPD5",73,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER,DUZ
"RTN","RCTCSPD5",74,0)
 ; DUZ is reserved, but in this case DUZ may be undefined due to a server background job, but we don't want to overwrite DUZ if it exists
"RTN","RCTCSPD5",75,0)
 S PRCABN=BILL,DUZ=.5,DUZ(0)="@",DUZ(2)=1 ; Server has no DUZ, use Postmaster
"RTN","RCTCSPD5",76,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD5",77,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD5",78,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD5",79,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD5",80,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD5",81,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD5",82,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",61,0)) ;Transaction Type
"RTN","RCTCSPD5",83,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD5",84,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD5",85,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD5",86,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD5",87,0)
 S DR=DR_";5.02///CS PENDING RECON" D ^DIE
"RTN","RCTCSPD5",88,0)
 Q
"RTN","RCTCSPD5",89,0)
 ;
"RTN","RCTCSPD5",90,0)
CSRCLPL ; CS RECALL placed non-financial tx
"RTN","RCTCSPD5",91,0)
 N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER
"RTN","RCTCSPD5",92,0)
 S PRCABN=BILL
"RTN","RCTCSPD5",93,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSPD5",94,0)
 S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSPD5",95,0)
 Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSPD5",96,0)
 S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSPD5",97,0)
 S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSPD5",98,0)
 S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSPD5",99,0)
 S DR=DR_";12///"_$O(^PRCA(430.3,"AC",62,0)) ;Transaction Type
"RTN","RCTCSPD5",100,0)
 S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSPD5",101,0)
 S DR=DR_";42///"_DUZ ;Processed by user
"RTN","RCTCSPD5",102,0)
 S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSPD5",103,0)
 S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSPD5",104,0)
 S DR=DR_";5.02///CS RECALL PLACED" D ^DIE
"RTN","RCTCSPD5",105,0)
 Q
"RTN","RCTCSPD5",106,0)
 ; End of RCTCSPD5
"RTN","RCTCSPRS")
0^35^B66612792^B53928265
"RTN","RCTCSPRS",1,0)
RCTCSPRS ;ALBANY/BDB - CROSS-SERVICING (RECONCILIATION SERVER);02/19/14 3:21 PM
"RTN","RCTCSPRS",2,0)
 ;;4.5;Accounts Receivable;**301,315**;Mar 20, 1995;Build 67
"RTN","RCTCSPRS",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSPRS",4,0)
 ;
"RTN","RCTCSPRS",5,0)
 ;Program to process reconciliation server messages from AITC
"RTN","RCTCSPRS",6,0)
 ;
"RTN","RCTCSPRS",7,0)
 ;
"RTN","RCTCSPRS",8,0)
READ ;READS MESSAGE INTO TEMPORARY GLOBAL
"RTN","RCTCSPRS",9,0)
 N FDT,RDNODE S FDT=0
"RTN","RCTCSPRS",10,0)
 K ^XTMP("RCTCSPD",$J)
"RTN","RCTCSPRS",11,0)
 ;New report for claims returned from treasury PRCA*4.5*315
"RTN","RCTCSPRS",12,0)
 S ^XTMP("RCTCSP5 - "_DT,0)=$$FMADD^XLFDT(DT,57)_"^"_DT_"^"_"Treasury Cross-Servicing IAI Report"  ; Maintain this entry for 57 days
"RTN","RCTCSPRS",13,0)
 S RDNODE=$NA(^XTMP("RCTCSP5 - "_DT))
"RTN","RCTCSPRS",14,0)
 ;
"RTN","RCTCSPRS",15,0)
 S XMA=0
"RTN","RCTCSPRS",16,0)
READ1 X XMREC I $D(XMER) G:XMER<0 READQ
"RTN","RCTCSPRS",17,0)
 I $E(XMRG,1)="H" S FDT=$E(XMRG,2,9)
"RTN","RCTCSPRS",18,0)
 S ^XTMP("RCTCSPRS",$J,"READ",FDT,XMPOS)=XMRG
"RTN","RCTCSPRS",19,0)
 G READ1
"RTN","RCTCSPRS",20,0)
 ;
"RTN","RCTCSPRS",21,0)
READQ K XMA,XMER,XMREC,XMPOS,XMRG
"RTN","RCTCSPRS",22,0)
 N TYPE,VALC,VFASTCD,VSTTN,VSITE,LN,REC,REC1,REC2
"RTN","RCTCSPRS",23,0)
 S VALC="36001200"
"RTN","RCTCSPRS",24,0)
 S VFASTCD="36"
"RTN","RCTCSPRS",25,0)
 S VSTTN="DM1D "
"RTN","RCTCSPRS",26,0)
 S VSITE=$E($$SITE^RCMSITE(),1,3)
"RTN","RCTCSPRS",27,0)
 S LN=0
"RTN","RCTCSPRS",28,0)
 F  S LN=$O(^XTMP("RCTCSPRS",$J,"READ",FDT,LN)) Q:LN=""  S REC1=$G(^(LN)),LN=LN+1,REC2=$G(^(LN)),REC=$E(REC1,1,225)_$E(REC2,1,225) D
"RTN","RCTCSPRS",29,0)
 .S TYPE=$E(REC,1,2)
"RTN","RCTCSPRS",30,0)
 .I TYPE["H" D HDR Q
"RTN","RCTCSPRS",31,0)
 .I TYPE="A1" D A1 Q
"RTN","RCTCSPRS",32,0)
 .I TYPE="C1" Q
"RTN","RCTCSPRS",33,0)
 .I TYPE="R1" D R1 Q
"RTN","RCTCSPRS",34,0)
 .I TYPE="R2" D R2 Q
"RTN","RCTCSPRS",35,0)
 .I TYPE["Z" K TYPE Q
"RTN","RCTCSPRS",36,0)
 .Q
"RTN","RCTCSPRS",37,0)
 ;
"RTN","RCTCSPRS",38,0)
TRDT ;sends mailman message to user for returned debts
"RTN","RCTCSPRS",39,0)
 Q:'$D(^XTMP("RCTCSPD",$J,"TRDTRDB"))
"RTN","RCTCSPRS",40,0)
 S XMDUZ="AR PACKAGE",XMY("G.TCSP")=""
"RTN","RCTCSPRS",41,0)
 N TCT1,TDEB1,TDEB10,TBIL1,TSP1,FST1,TBCNT,TTXT1
"RTN","RCTCSPRS",42,0)
 S XMSUB="CS QUALIFIED/RETURNED DEBTS "_$E(DT,4,5)_"/"_$E(DT,6,7)_"/"_$E(DT,2,3)
"RTN","RCTCSPRS",43,0)
 S ^XTMP("RCTCSPD",$J,"TRDT",1)="The following Debtors and Debts were Returned by Reconciliation."
"RTN","RCTCSPRS",44,0)
 S ^XTMP("RCTCSPD",$J,"TRDT",2)=""
"RTN","RCTCSPRS",45,0)
 S ^XTMP("RCTCSPD",$J,"TRDT",3)="Name                                     Bill #    Returned Date   Closed Date"
"RTN","RCTCSPRS",46,0)
 S ^XTMP("RCTCSPD",$J,"TRDT",4)="----                                     ------    -------- ----   ------ ----"
"RTN","RCTCSPRS",47,0)
 S TCT1=5,TSP1=0,TDEB1="",TBCNT=0
"RTN","RCTCSPRS",48,0)
 F  S TDEB1=$O(^XTMP("RCTCSPD",$J,"TRDTRDB",TDEB1)) Q:TDEB1=""  D
"RTN","RCTCSPRS",49,0)
 .S FST1=1,TBIL1=""
"RTN","RCTCSPRS",50,0)
 .I FST1,TCT1'=5 S ^XTMP("RCTCSPD",$J,"TRDT",TCT1)="",TCT1=TCT1+1,TSP1=TSP1+1
"RTN","RCTCSPRS",51,0)
 .F  S TBIL1=$O(^XTMP("RCTCSPD",$J,"TRDTRDB",TDEB1,TBIL1)) Q:TBIL1=""  S TBCNT=TBCNT+1 D
"RTN","RCTCSPRS",52,0)
 ..S TDEB10=$S(FST1:TDEB1,1:""),TTXT1=""
"RTN","RCTCSPRS",53,0)
 ..F  S TTXT1=$O(^XTMP("RCTCSPD",$J,"TRDTRDB",TDEB1,TBIL1,TTXT1)) Q:TTXT1=""  S ^XTMP("RCTCSPD",$J,"TRDT",TCT1)=^XTMP("RCTCSPD",$J,"TRDTRDB",TDEB1,TBIL1,TTXT1) S TCT1=TCT1+1
"RTN","RCTCSPRS",54,0)
 ..S TCT1=TCT1+1,FST1=0
"RTN","RCTCSPRS",55,0)
 S ^XTMP("RCTCSPD",$J,"TRDT",TCT1)="Total records: "_TBCNT
"RTN","RCTCSPRS",56,0)
 S XMTEXT="^XTMP(""RCTCSPD"","_$J_",""TRDT"","
"RTN","RCTCSPRS",57,0)
 D ^XMD K XMDUZ,XMSUB,XMTEXT,XMY
"RTN","RCTCSPRS",58,0)
 K ^XTMP("RCTCSPD",$J,"TRDT")
"RTN","RCTCSPRS",59,0)
TRDTQ Q
"RTN","RCTCSPRS",60,0)
 ;
"RTN","RCTCSPRS",61,0)
HDR ; header record
"RTN","RCTCSPRS",62,0)
 S TFASTCD=$E(REC,10,11),TALC=$E(REC,12,19) ;repeated on r1 AND r2
"RTN","RCTCSPRS",63,0)
 Q
"RTN","RCTCSPRS",64,0)
 ;
"RTN","RCTCSPRS",65,0)
A1 ;active debt record
"RTN","RCTCSPRS",66,0)
 N TFASTCD,TALC,TSTTN,TDBTID,TSITE,BILL,B0,DEBTOR
"RTN","RCTCSPRS",67,0)
 S TFASTCD=$E(REC,3,4),TALC=$E(REC,5,12),TSTTN=$E(REC,13,17),TDBTID=$E(REC,18,47),TRDT=$E(REC,58,65)
"RTN","RCTCSPRS",68,0)
 I TFASTCD'=VFASTCD D NPMSG("FASTCD",TFASTCD,VFASTCD) Q
"RTN","RCTCSPRS",69,0)
 I TALC'=VALC D NPMSG("ALC",TALC,VALC) Q
"RTN","RCTCSPRS",70,0)
 I TSTTN'=VSTTN D NPMSG("STATION",TSTTN,VSTTN)
"RTN","RCTCSPRS",71,0)
 S TSITE=$E(TDBTID,1,3) I TSITE'=VSITE D NPMSG("SITE",TSITE,VSITE) Q
"RTN","RCTCSPRS",72,0)
 S BILL=+$E(TDBTID,12,30)  ;BILL = IEN
"RTN","RCTCSPRS",73,0)
 S B0=$G(^PRCA(430,BILL,0))
"RTN","RCTCSPRS",74,0)
 S DEBTOR=+$P(B0,U,9)
"RTN","RCTCSPRS",75,0)
 ;PRCA*4.5*315  set data for IAI report (^RCTCSP5)
"RTN","RCTCSPRS",76,0)
 I DEBTOR,BILL S @RDNODE@(DEBTOR,BILL)=""   ;set to debtor then bill IEN for sorting the IAI report
"RTN","RCTCSPRS",77,0)
 Q
"RTN","RCTCSPRS",78,0)
 ;
"RTN","RCTCSPRS",79,0)
R1 ;returned debt record
"RTN","RCTCSPRS",80,0)
 N TFASTCD,TALC,TSTTN,TDBTID,TRDT,TSITE,BILLNO,BILL,B0,B4,B6,B7,B9,B14,B15,B16,DEBTOR,RJND
"RTN","RCTCSPRS",81,0)
 S TFASTCD=$E(REC,3,4),TALC=$E(REC,5,12),TSTTN=$E(REC,13,17),TDBTID=$E(REC,18,47),TRDT=$E(REC,58,65)
"RTN","RCTCSPRS",82,0)
 I TFASTCD'=VFASTCD D NPMSG("FASTCD",TFASTCD,VFASTCD) Q
"RTN","RCTCSPRS",83,0)
 I TALC'=VALC D NPMSG("ALC",TALC,VALC) Q
"RTN","RCTCSPRS",84,0)
 I TSTTN'=VSTTN D NPMSG("STATION",TSTTN,VSTTN)
"RTN","RCTCSPRS",85,0)
 S TSITE=$E(TDBTID,1,3) I TSITE'=VSITE D NPMSG("SITE",TSITE,VSITE) Q
"RTN","RCTCSPRS",86,0)
 S BILLNO=$E(TDBTID,4,10),BILL=+$E(TDBTID,11,30)  ;BILL = IEN
"RTN","RCTCSPRS",87,0)
 S B0=$G(^PRCA(430,BILL,0)),B4=$G(^(4)),B6=$G(^(6)),B7=$G(^(7)),B9=$G(^(9)),B14=$G(^(14)),B15=$G(^(15)),B16=$G(^(16))
"RTN","RCTCSPRS",88,0)
 S DEBTOR=$P(B0,U,9)
"RTN","RCTCSPRS",89,0)
 ;set comment transaction in 433
"RTN","RCTCSPRS",90,0)
 D CSPRTR^RCTCSPD5  ;PRCA*4.5*315
"RTN","RCTCSPRS",91,0)
 ;
"RTN","RCTCSPRS",92,0)
 S RJND=0 F  S RJND=$O(^PRCA(430,BILL,18,RJND)) Q:'RJND  D
"RTN","RCTCSPRS",93,0)
 .N DAT
"RTN","RCTCSPRS",94,0)
 .S DAT=+$G(^PRCA(430,BILL,18,RJND,0))
"RTN","RCTCSPRS",95,0)
 .I DAT K ^PRCA(430,"AB",DAT,BILL)
"RTN","RCTCSPRS",96,0)
 K ^PRCA(430,BILL,15),^(16),^(17),^(18),^(19),^(20)
"RTN","RCTCSPRS",97,0)
 I +TRDT D
"RTN","RCTCSPRS",98,0)
 .N DNM,DA,DIE,DR
"RTN","RCTCSPRS",99,0)
 .I $D(^XTMP("RCTCSPD",$J,"TRDTRDB",DEBTOR,BILL,1)) S $E(^XTMP("RCTCSPD",$J,"TRDTRDB",DEBTOR,BILL,1),52,63)=$$DTT2E(TRDT) Q
"RTN","RCTCSPRS",100,0)
 .S DNM=$E($$NAMEFF(+^RCD(340,DEBTOR,0)),1,30),DNM=$$LJSF(DNM,30)
"RTN","RCTCSPRS",101,0)
 .S ^XTMP("RCTCSPD",$J,"TRDTRDB",DEBTOR,BILL,1)=$$LJSF(DNM,30)_"           "_$$LJSF(BILLNO,7)_"   "_$$DTT2E(TRDT)
"RTN","RCTCSPRS",102,0)
 .S EFFDT=$$HL7TFM^XLFDT(TRDT),REASON="O",COMMENT="BY RECONCILIATION"
"RTN","RCTCSPRS",103,0)
 .S $P(^PRCA(430,BILL,15),U,7,10)="1^"_EFFDT_U_REASON_U_$G(COMMENT)
"RTN","RCTCSPRS",104,0)
 .S DIE="^PRCA(430,",DA=BILL
"RTN","RCTCSPRS",105,0)
 .S DR="301////"_EFFDT ;Returned date
"RTN","RCTCSPRS",106,0)
 .S DR=DR_";310////"_$P(B16,U,9)
"RTN","RCTCSPRS",107,0)
 .S DR=DR_";311////"_$P(B16,U,10)
"RTN","RCTCSPRS",108,0)
 .S DR=DR_";312////"_$P(B15,U,3)
"RTN","RCTCSPRS",109,0)
 .D ^DIE
"RTN","RCTCSPRS",110,0)
 K ^PRCA(430,"TCSP",BILL) ;set the bill to not sent to cross-servicing
"RTN","RCTCSPRS",111,0)
 Q
"RTN","RCTCSPRS",112,0)
 ;
"RTN","RCTCSPRS",113,0)
R2 ;returned debtor record
"RTN","RCTCSPRS",114,0)
 N TFASTCD,TALC,TSTTN,TDBTID,TSITE,TFDA,TDBTORID,TRRSNCD,TCMPIND,TCMPAMT,TCLSDT,TBNKDT,TDTHDT,TDISDT,RJND
"RTN","RCTCSPRS",115,0)
 S TFASTCD=$E(REC,3,4),TALC=$E(REC,5,12),TSTTN=$E(REC,13,17),TDBTID=$E(REC,18,47),TDBTORID=$E(REC,48,62),TRRSNCD=$E(REC,261,262)
"RTN","RCTCSPRS",116,0)
 S TCMPIND=$E(REC,263,263),TCMPAMT=$E(REC,264,277),TCLSDT=$E(REC,278,285),TBNKDT=$E(REC,286,293),TDTHDT=$E(REC,294,301),TDISDT=$E(REC,302,309)
"RTN","RCTCSPRS",117,0)
 I TFASTCD'=VFASTCD D NPMSG("FASTCD",TFASTCD,VFASTCD) Q
"RTN","RCTCSPRS",118,0)
 I TALC'=VALC D NPMSG("ALC",TALC,VALC) Q
"RTN","RCTCSPRS",119,0)
 I TSTTN'=VSTTN D NPMSG("STATION",TSTTN,VSTTN)
"RTN","RCTCSPRS",120,0)
 S TSITE=$E(TDBTID,1,3) I TSITE'=VSITE D NPMSG("SITE",TSITE,VSITE) Q
"RTN","RCTCSPRS",121,0)
 S BILLNO=$E(TDBTID,4,10),BILL=+$E(TDBTID,11,30)
"RTN","RCTCSPRS",122,0)
 S B0=$G(^PRCA(430,BILL,0))
"RTN","RCTCSPRS",123,0)
 S TRRSNCD=$$CLRBLNK(TRRSNCD)
"RTN","RCTCSPRS",124,0)
 S DEBTOR=$P(B0,U,9)
"RTN","RCTCSPRS",125,0)
 S RJND=0 F  S RJND=$O(^PRCA(430,BILL,18,RJND)) Q:'RJND  D
"RTN","RCTCSPRS",126,0)
 .N DAT
"RTN","RCTCSPRS",127,0)
 .S DAT=+$G(^PRCA(430,BILL,18,RJND,0))
"RTN","RCTCSPRS",128,0)
 .I DAT K ^PRCA(430,"AB",DAT,BILL)
"RTN","RCTCSPRS",129,0)
 K ^PRCA(430,BILL,15),^(16),^(17),^(18),^(19),^(20)
"RTN","RCTCSPRS",130,0)
 I TRRSNCD]"" D
"RTN","RCTCSPRS",131,0)
 .N DNM,EFFDT,REASON,COMMENT
"RTN","RCTCSPRS",132,0)
 .I $D(^XTMP("RCTCSPD",$J,"TRDTRDB",DEBTOR,BILL,1)) S $E(^XTMP("RCTCSPD",$J,"TRDTRDB",DEBTOR,BILL,1),68,79)=$S($G(TCLSDT)]"":$$DTT2E(TCLSDT),1:"")
"RTN","RCTCSPRS",133,0)
 .I '$D(^XTMP("RCTCSPD",$J,"TRDTRDB",DEBTOR,BILL,1)) D
"RTN","RCTCSPRS",134,0)
 ..S DNM=$E($$NAMEFF(+^RCD(340,DEBTOR,0)),1,30),DNM=$$LJSF(DNM,30),^XTMP("RCTCSPD",$J,"TRDTRDB",DEBTOR,BILL,1)=DNM_"           "_$$LJSF(BILLNO,7)_"                   "_$S($G(TCLSDT)]"":$$DTT2E(TCLSDT),1:"")
"RTN","RCTCSPRS",135,0)
 .S DIC="^PRCA(430.5,",DIC(0)="Z",X=TRRSNCD D ^DIC K DIC I +Y>0 D
"RTN","RCTCSPRS",136,0)
 ..S ^XTMP("RCTCSPD",$J,"TRDTRDB",DEBTOR,BILL,2)="     "_$P(Y(0),U,2)
"RTN","RCTCSPRS",137,0)
 ..S $P(^PRCA(430,BILL,30),U,2)=+Y
"RTN","RCTCSPRS",138,0)
 I TCMPIND="Y" D
"RTN","RCTCSPRS",139,0)
 .S ^XTMP("RCTCSPD",$J,"TRDTRDB",DEBTOR,BILL,3)="     COMPROMISE, PLEASE WRITE THIS BILL OFF BY THE MANUAL PROCESS."
"RTN","RCTCSPRS",140,0)
 .S $P(^PRCA(430,BILL,30),U,3)=TCMPIND
"RTN","RCTCSPRS",141,0)
 .I +TCMPAMT D
"RTN","RCTCSPRS",142,0)
 ..S ^XTMP("RCTCSPD",$J,"TRDTRDB",DEBTOR,BILL,4)="     COMPROMISED AMOUNT (NOT COLLECTED):"_$J(TCMPAMT/100,9,2)
"RTN","RCTCSPRS",143,0)
 ..S $P(^PRCA(430,BILL,30),U,4)=TCMPAMT/100
"RTN","RCTCSPRS",144,0)
 I +TBNKDT D
"RTN","RCTCSPRS",145,0)
 .S ^XTMP("RCTCSPD",$J,"TRDTRDB",DEBTOR,BILL,5)="     BANKRUPTCY DATE: "_$$DTT2E(TBNKDT)
"RTN","RCTCSPRS",146,0)
 .S $P(^PRCA(430,BILL,30),U,6)=$$HL7TFM^XLFDT(TBNKDT)
"RTN","RCTCSPRS",147,0)
 I +TDTHDT D
"RTN","RCTCSPRS",148,0)
 .S ^XTMP("RCTCSPD",$J,"TRDTRDB",DEBTOR,BILL,6)="     DATE OF DEATH:  "_$$DTT2E(TDTHDT)
"RTN","RCTCSPRS",149,0)
 .S $P(^PRCA(430,BILL,30),U,7)=$$HL7TFM^XLFDT(TDTHDT)
"RTN","RCTCSPRS",150,0)
 I +TDISDT D
"RTN","RCTCSPRS",151,0)
 .S ^XTMP("RCTCSPD",$J,"TRDTRDB",DEBTOR,BILL,7)="     DATE OF DISSOLUTION:  "_$$DTT2E(TDISDT)
"RTN","RCTCSPRS",152,0)
 .S $P(^PRCA(430,BILL,30),U,8)=$$HL7TFM^XLFDT(TDISDT)
"RTN","RCTCSPRS",153,0)
 I +TCLSDT D
"RTN","RCTCSPRS",154,0)
 .S EFFDT=$$HL7TFM^XLFDT(TCLSDT),REASON="O",COMMENT="BY RECONCILIATION"
"RTN","RCTCSPRS",155,0)
 .S $P(^PRCA(430,BILL,15),U,7,10)="1^"_EFFDT_U_REASON_U_$G(COMMENT)
"RTN","RCTCSPRS",156,0)
 .S $P(^PRCA(430,BILL,30),U,5)=$$HL7TFM^XLFDT(TCLSDT)
"RTN","RCTCSPRS",157,0)
 K ^PRCA(430,"TCSP",BILL) ;set the bill to not sent to cross-servicing
"RTN","RCTCSPRS",158,0)
 S ^XTMP("RCTCSPD",$J,"TRDTRDB",DEBTOR,BILL,8)=""
"RTN","RCTCSPRS",159,0)
 I +DEBTOR D
"RTN","RCTCSPRS",160,0)
 .N TCSPFL,BILLX
"RTN","RCTCSPRS",161,0)
 .S BILLX="",TCSPFL=0 ;check if last cross-serviced bill
"RTN","RCTCSPRS",162,0)
 .F  S BILLX=$O(^PRCA(430,"C",DEBTOR,BILLX)) Q:BILLX'?1N.N  I $D(^PRCA(430,"TCSP",BILLX)) S TCSPFL=1 Q
"RTN","RCTCSPRS",163,0)
 .I 'TCSPFL D  Q
"RTN","RCTCSPRS",164,0)
 ..N BILL
"RTN","RCTCSPRS",165,0)
 ..S $P(^RCD(340,DEBTOR,7),U,5)=""
"RTN","RCTCSPRS",166,0)
 ..K ^RCD(340,"TCSP",DEBTOR) ;set the debtor to not sent to cross-servicing
"RTN","RCTCSPRS",167,0)
 Q
"RTN","RCTCSPRS",168,0)
 ;
"RTN","RCTCSPRS",169,0)
NPMSG(FLD,TCD,VCD) ;error not processed
"RTN","RCTCSPRS",170,0)
 Q
"RTN","RCTCSPRS",171,0)
 ;
"RTN","RCTCSPRS",172,0)
LJSF(X,Y) ;left justified space filled
"RTN","RCTCSPRS",173,0)
 S X=$E(X,1,Y)
"RTN","RCTCSPRS",174,0)
 S X=X_$$BLANK(Y-$L(X))
"RTN","RCTCSPRS",175,0)
 Q X
"RTN","RCTCSPRS",176,0)
 ;
"RTN","RCTCSPRS",177,0)
BLANK(X) ;returns 'x' blank spaces
"RTN","RCTCSPRS",178,0)
 N BLANK
"RTN","RCTCSPRS",179,0)
 S BLANK="",$P(BLANK," ",X+1)=""
"RTN","RCTCSPRS",180,0)
 Q BLANK
"RTN","RCTCSPRS",181,0)
 ;
"RTN","RCTCSPRS",182,0)
CLRBLNK(X) ;clear blanks
"RTN","RCTCSPRS",183,0)
 S X=$TR(X," ","")
"RTN","RCTCSPRS",184,0)
 Q X
"RTN","RCTCSPRS",185,0)
 ;
"RTN","RCTCSPRS",186,0)
NAMEFF(DFN) ;returns name for document and name in file
"RTN","RCTCSPRS",187,0)
 N FN,LN,MN,NM,DOCNM,VA,VADM
"RTN","RCTCSPRS",188,0)
 S NM=""
"RTN","RCTCSPRS",189,0)
 D DEM^VADPT
"RTN","RCTCSPRS",190,0)
 I $D(VADM) S NM=VADM(1)
"RTN","RCTCSPRS",191,0)
 S LN=$TR($P(NM,",")," .'-"),MN=$P($P(NM,",",2)," ",2)
"RTN","RCTCSPRS",192,0)
 I ($E(MN,1,2)="SR")!($E(MN,1,2)="JR")!(MN?2.3"I")!(MN?0.1"I"1"V"1.3"I") S MN=""
"RTN","RCTCSPRS",193,0)
 S FN=$P($P(NM,",",2)," ")
"RTN","RCTCSPRS",194,0)
 S DOCNM=LN_" "_FN_" "_MN
"RTN","RCTCSPRS",195,0)
 Q DOCNM
"RTN","RCTCSPRS",196,0)
 ;
"RTN","RCTCSPRS",197,0)
DTT2E(TDT) ;date treasury to external format
"RTN","RCTCSPRS",198,0)
 Q $$UPPER^VALM1($$FMTE^XLFDT($$HL7TFM^XLFDT(TDT)))
"RTN","RCTCSPU")
0^16^B79474233^B55616924
"RTN","RCTCSPU",1,0)
RCTCSPU ;ALBANY/BDB-CROSS-SERVICING UTILITIES ;03/15/14 3:34 PM
"RTN","RCTCSPU",2,0)
 ;;4.5;Accounts Receivable;**301,315**;Mar 20, 1995;Build 67
"RTN","RCTCSPU",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSPU",4,0)
 Q
"RTN","RCTCSPU",5,0)
 ;
"RTN","RCTCSPU",6,0)
 ;total amount of bills for a debtor
"RTN","RCTCSPU",7,0)
TOTALB(DEBTOR) ;
"RTN","RCTCSPU",8,0)
 N TOTAL,BILL,B7
"RTN","RCTCSPU",9,0)
 S TOTAL=0,BILL=0
"RTN","RCTCSPU",10,0)
 F  S BILL=$O(^PRCA(430,"C",DEBTOR,BILL)) Q:BILL'?1N.N  D
"RTN","RCTCSPU",11,0)
 .Q:'$D(^PRCA(430,"TCSP",BILL))
"RTN","RCTCSPU",12,0)
 .S B7=$G(^PRCA(430,BILL,7))
"RTN","RCTCSPU",13,0)
 .S TOTAL=TOTAL+$P(B7,U)+$P(B7,U,2)+$P(B7,U,3)+$P(B7,U,4)+$P(B7,U,5)
"RTN","RCTCSPU",14,0)
 Q TOTAL
"RTN","RCTCSPU",15,0)
 ;
"RTN","RCTCSPU",16,0)
 ;stop TCSP referral on a bill
"RTN","RCTCSPU",17,0)
STOP ;stop Cross-Servicing referral
"RTN","RCTCSPU",18,0)
 N DIC,DIE,DA,DR,DIR,Y,BILL,REASON,COMMENT,EFFDT
"RTN","RCTCSPU",19,0)
 I $G(GOTBILL) S BILL=RCBILLDA  ;PRCA*4.5*315
"RTN","RCTCSPU",20,0)
 I '$G(GOTBILL) S DIC=430,DIC(0)="AEQM" D ^DIC Q:Y<0  ;PRCA*4.5*315
"RTN","RCTCSPU",21,0)
 I '$G(GOTBILL) S BILL=+Y  ;PRCA*4.5*315
"RTN","RCTCSPU",22,0)
 I $P($G(^PRCA(430,BILL,15)),U,7) G DELSTOP
"RTN","RCTCSPU",23,0)
 W !,"Stop flag for Cross-Servicing Referral set? : NO"
"RTN","RCTCSPU",24,0)
 S DIR(0)="Y",DIR("B")="NO",DIR("A")="Are you sure you want to stop the Cross-Servicing Referral for this bill" D ^DIR
"RTN","RCTCSPU",25,0)
 I $G(GOTBILL),$D(DIRUT) S RCDPGQ=1      ; account profile listman quit flag  *315
"RTN","RCTCSPU",26,0)
 I 'Y W !,*7,"No action taken" Q
"RTN","RCTCSPU",27,0)
 ;
"RTN","RCTCSPU",28,0)
REASON ;ask referral reason
"RTN","RCTCSPU",29,0)
 K DIR S DIR("A")="Enter Stop Cross-Servicing Reason ",DA=BILL,DIR(0)="430,159" D ^DIR
"RTN","RCTCSPU",30,0)
 Q:(Y="")!(Y=U)
"RTN","RCTCSPU",31,0)
 S REASON=Y I REASON="O" D  Q:COMMENT=U  G REASON:COMMENT=""
"RTN","RCTCSPU",32,0)
    .S COMMENT="",DIR("A")="Enter Stop Reason Comment ",DA=BILL,DIR(0)="430,159.1" D ^DIR S COMMENT=Y
"RTN","RCTCSPU",33,0)
    .I COMMENT="" W !,"A Reason of Other requires a comment to be entered"
"RTN","RCTCSPU",34,0)
    .Q
"RTN","RCTCSPU",35,0)
 I REASON'="O",$P($G(^PRCA(430,BILL,15)),U,10)'="" S $P(^(15),U,10)=""
"RTN","RCTCSPU",36,0)
 ;
"RTN","RCTCSPU",37,0)
 ;ask effective date
"RTN","RCTCSPU",38,0)
 ;
"RTN","RCTCSPU",39,0)
 S DIR(0)="430,158",DA=BILL,DIR("A")="Enter Effective Date " D ^DIR G:Y=U STOPQ S EFFDT=Y
"RTN","RCTCSPU",40,0)
 ;
"RTN","RCTCSPU",41,0)
STOPFILE ;set stop referral data in file 430
"RTN","RCTCSPU",42,0)
 S $P(^PRCA(430,BILL,15),U,7,10)="1^"_EFFDT_U_REASON_U_$G(COMMENT)
"RTN","RCTCSPU",43,0)
 ;
"RTN","RCTCSPU",44,0)
 W !,"Stop Cross-Servicing Referral complete"
"RTN","RCTCSPU",45,0)
 D STOP^RCTCSPD4 ; *315 Create CS Stop Placed comment tx in 433
"RTN","RCTCSPU",46,0)
 G STOPQ
"RTN","RCTCSPU",47,0)
 ;
"RTN","RCTCSPU",48,0)
DELSTOP ;Allows Cross-Servicing Referral to be re-instituted for bill
"RTN","RCTCSPU",49,0)
 N I
"RTN","RCTCSPU",50,0)
 W !!,*7,"Referral to Cross-Servicing has already been stopped for this bill."
"RTN","RCTCSPU",51,0)
 W !,"Stop Cross-Servicing referral effective date: ",$$GET1^DIQ(430,BILL,158,"E")
"RTN","RCTCSPU",52,0)
 W !,"Stop Cross-Servicing referral reason        : ",$$GET1^DIQ(430,BILL,159,"E")
"RTN","RCTCSPU",53,0)
 I $$GET1^DIQ(430,BILL,159,"E")="OTHER" W !,"Stop Cross-Servicing referral comment       : ",$$GET1^DIQ(430,BILL,159.1,"E")
"RTN","RCTCSPU",54,0)
 S DIR(0)="Y",DIR("A")="Do you wish to re-institute Cross-Servicing Referral for this bill",DIR("B")="NO"
"RTN","RCTCSPU",55,0)
 D ^DIR
"RTN","RCTCSPU",56,0)
 I $G(GOTBILL),$D(DIRUT) S RCDPGQ=1 G STOPQ        ; account profile listman quit flag  *315
"RTN","RCTCSPU",57,0)
 G EDSTOP:'Y
"RTN","RCTCSPU",58,0)
 ;
"RTN","RCTCSPU",59,0)
 ;reset file to allow cross-servicing referral to be re-started
"RTN","RCTCSPU",60,0)
 F I=7:1:10 S $P(^PRCA(430,BILL,15),U,I)=""
"RTN","RCTCSPU",61,0)
 W !!,"Bill is now eligible to be Referred to Cross-Servicing" D DELSTOP^RCTCSPD4 G STOPQ ; *315 create CS Stop Deleted transaction
"RTN","RCTCSPU",62,0)
 ;
"RTN","RCTCSPU",63,0)
EDSTOP S DIR(0)="Y",DIR("A")="Do you wish to edit the Stop Referral Data for this bill",DIR("B")="NO" D ^DIR G REASON:Y
"RTN","RCTCSPU",64,0)
STOPQ Q
"RTN","RCTCSPU",65,0)
 ;
"RTN","RCTCSPU",66,0)
 ;Set Cross-Servicing recall for a bill
"RTN","RCTCSPU",67,0)
RCLLSETB ;Set Cross-Servicing recall
"RTN","RCTCSPU",68,0)
 N DIC,DIE,DA,DR,DIR,Y,BILL,REASON
"RTN","RCTCSPU",69,0)
 I '$G(GOTBILL) S DIC=430,DIC(0)="AEQM" D ^DIC Q:Y<0
"RTN","RCTCSPU",70,0)
 I '$G(GOTBILL) S BILL=+Y
"RTN","RCTCSPU",71,0)
 I $G(GOTBILL) S BILL=RCBILLDA
"RTN","RCTCSPU",72,0)
 I $P($G(^PRCA(430,BILL,15)),U,2) G DELSETB
"RTN","RCTCSPU",73,0)
 S DIR(0)="Y",DIR("B")="NO",DIR("A")="Are you sure you want to set this bill to be recalled from Cross-Servicing" D ^DIR
"RTN","RCTCSPU",74,0)
 I $G(GOTBILL),$D(DIRUT) S RCDPGQ=1        ; account profile listman quit flag  *315
"RTN","RCTCSPU",75,0)
 I 'Y W !,*7,"No action taken" Q
"RTN","RCTCSPU",76,0)
 I '$D(^PRCA(430,"TCSP",BILL)) W !,*7,"No action taken.  Bill has not been referred to Cross-Servicing." Q
"RTN","RCTCSPU",77,0)
 ; 
"RTN","RCTCSPU",78,0)
RCRSB ;ask recall reason
"RTN","RCTCSPU",79,0)
 K DIR S DIR(0)="S^01:DEBT REFERRED IN ERROR;07:AGENCY IS FORGIVING DEBT;08:AGENCY CAN COLLECT THROUGH INTERNAL OFFSET" D ^DIR
"RTN","RCTCSPU",80,0)
 Q:(Y="")!(Y=U)
"RTN","RCTCSPU",81,0)
 ;set recall data in file 430
"RTN","RCTCSPU",82,0)
 S REASON=Y
"RTN","RCTCSPU",83,0)
 S $P(^PRCA(430,BILL,15),U,2,4)="1^^"_REASON
"RTN","RCTCSPU",84,0)
 D CSRCLPL^RCTCSPD5 ; *315 CS Recall Placed comment tx in 433
"RTN","RCTCSPU",85,0)
 W !,"Setting this bill for Recall from Cross-Servicing is complete"
"RTN","RCTCSPU",86,0)
 G SETBQ
"RTN","RCTCSPU",87,0)
 ;
"RTN","RCTCSPU",88,0)
DELSETB ;Allows Cross-Servicing Recall to be deleted for bill
"RTN","RCTCSPU",89,0)
 W !!,*7,"This bill has already been set for recall from Cross-Servicing."
"RTN","RCTCSPU",90,0)
 I +$P($G(^PRCA(430,BILL,15)),U,3) W !!,"Not available for reactivation.  The Recall request has already been processed." G SETBQ
"RTN","RCTCSPU",91,0)
 S DIR(0)="Y",DIR("A")="Do you wish to delete the Cross-Servicing Recall for this bill",DIR("B")="NO"
"RTN","RCTCSPU",92,0)
 D ^DIR
"RTN","RCTCSPU",93,0)
 I $G(GOTBILL),$D(DIRUT) S RCDPGQ=1 G SETBQ         ; account profile listman quit flag  *315
"RTN","RCTCSPU",94,0)
 G EDSETB:'Y
"RTN","RCTCSPU",95,0)
 ;
"RTN","RCTCSPU",96,0)
 ;delete the recall
"RTN","RCTCSPU",97,0)
 F I=2:1:5 S $P(^PRCA(430,BILL,15),U,I)=""
"RTN","RCTCSPU",98,0)
 D DELRCLL^RCTCSPD4 ; *315 Create CS Delete Recall comment tx in 433
"RTN","RCTCSPU",99,0)
 W !!,"Recall from Cross-Servicing has been deleted for this bill."
"RTN","RCTCSPU",100,0)
 G SETBQ
"RTN","RCTCSPU",101,0)
 ;
"RTN","RCTCSPU",102,0)
EDSETB S DIR(0)="Y",DIR("A")="Do you wish to edit the Recall data for this bill",DIR("B")="NO" D ^DIR G RCRSB:Y
"RTN","RCTCSPU",103,0)
SETBQ Q
"RTN","RCTCSPU",104,0)
 ;
"RTN","RCTCSPU",105,0)
 ;Set Cross-Servicing recall for a debtor
"RTN","RCTCSPU",106,0)
RCLLSETD ;Set Cross-Servicing debtor recall
"RTN","RCTCSPU",107,0)
 N DIC,DIE,DA,DR,DIR,Y,DEBTOR,REASON,BILL
"RTN","RCTCSPU",108,0)
 ; GOTDEBT, RCDEBTDA  - are defined if called from List Manager
"RTN","RCTCSPU",109,0)
 I '$G(GOTDEBT) S DIC=340,DIC(0)="AEQM" D ^DIC Q:Y<0      ; *315
"RTN","RCTCSPU",110,0)
 I '$G(GOTDEBT) S DEBTOR=+Y                               ; *315
"RTN","RCTCSPU",111,0)
 I $G(GOTDEBT) S DEBTOR=RCDEBTDA                          ; *315  
"RTN","RCTCSPU",112,0)
 I $P($G(^RCD(340,DEBTOR,7)),U,2),'$P($G(^RCD(340,DEBTOR,7)),U,3) G DELSETD
"RTN","RCTCSPU",113,0)
 S DIR(0)="Y",DIR("B")="NO",DIR("A")="Are you sure you want to recall this debtor and bills from Cross-Servicing" D ^DIR
"RTN","RCTCSPU",114,0)
 I 'Y W !,*7,"No action taken" Q
"RTN","RCTCSPU",115,0)
 I '$D(^RCD(340,"TCSP",DEBTOR)) W !,*7,"No action taken.  Debtor has not been referred to Cross-Servicing." Q
"RTN","RCTCSPU",116,0)
 ;
"RTN","RCTCSPU",117,0)
RCRSD ;ask debtor recall reason
"RTN","RCTCSPU",118,0)
 K DIR S DIR(0)="340,7.04" D ^DIR
"RTN","RCTCSPU",119,0)
 Q:(Y="")!(Y=U)
"RTN","RCTCSPU",120,0)
 ;set debtor recall data in file 340
"RTN","RCTCSPU",121,0)
 S REASON=Y
"RTN","RCTCSPU",122,0)
 S $P(^RCD(340,DEBTOR,7),U,2,4)="1^^"_REASON
"RTN","RCTCSPU",123,0)
 ;go through debtor bills and set reason in the bill recall reason
"RTN","RCTCSPU",124,0)
 S BILL=0
"RTN","RCTCSPU",125,0)
 F  S BILL=$O(^PRCA(430,"C",DEBTOR,BILL)) Q:BILL'?1N.N  D
"RTN","RCTCSPU",126,0)
 .I $D(^PRCA(430,"TCSP",BILL)) D  Q  ;bill previously sent to TCSP
"RTN","RCTCSPU",127,0)
 ..S $P(^PRCA(430,BILL,15),U,2,4)="1^^"_REASON ;set the recall flag and reason (TV9)
"RTN","RCTCSPU",128,0)
 ..D CSRCLPL^RCTCSPD5 ; *315 Create CS RECALL PLACED tx in 433
"RTN","RCTCSPU",129,0)
 W !,"Setting this debtor for Recall from Cross-Servicing is complete"
"RTN","RCTCSPU",130,0)
 G SETDQ
"RTN","RCTCSPU",131,0)
 ;
"RTN","RCTCSPU",132,0)
DELSETD ;Allows Cross-Servicing Recall to be deleted for debtor
"RTN","RCTCSPU",133,0)
 W !!,*7,"This debtor has already been set for recall from Cross-Servicing."
"RTN","RCTCSPU",134,0)
 S DIR(0)="Y",DIR("A")="Do you wish to delete the Cross-Servicing Recall for this debtor",DIR("B")="NO" D ^DIR G EDSETD:'Y
"RTN","RCTCSPU",135,0)
 ;
"RTN","RCTCSPU",136,0)
 ;delete the recall in file 340
"RTN","RCTCSPU",137,0)
 F I=2:1:4 S $P(^RCD(340,DEBTOR,7),U,I)=""
"RTN","RCTCSPU",138,0)
 ;go through debtor bills and delete the recall flag & reason
"RTN","RCTCSPU",139,0)
 S BILL=0
"RTN","RCTCSPU",140,0)
 F  S BILL=$O(^PRCA(430,"C",DEBTOR,BILL)) Q:BILL'?1N.N  D
"RTN","RCTCSPU",141,0)
 .I $D(^PRCA(430,"TCSP",BILL)) D  Q  ;bill previously sent to TCSP 
"RTN","RCTCSPU",142,0)
 ..S $P(^PRCA(430,BILL,15),U,2)="" ; delete the recall flag PRCA*4.5*315 
"RTN","RCTCSPU",143,0)
 ..S $P(^PRCA(430,BILL,15),U,4)="" ; delete the recall reason
"RTN","RCTCSPU",144,0)
 ..D DELRCLL^RCTCSPD4 ; *315 CS DEL BILL RECALL in 433
"RTN","RCTCSPU",145,0)
 ;
"RTN","RCTCSPU",146,0)
 W !!,"Recall from Cross-Servicing has been deleted for this debtor."
"RTN","RCTCSPU",147,0)
 G SETDQ
"RTN","RCTCSPU",148,0)
 ;
"RTN","RCTCSPU",149,0)
EDSETD S DIR(0)="Y",DIR("A")="Do you wish to edit the Recall data for this debtor",DIR("B")="NO" D ^DIR G RCRSD:Y
"RTN","RCTCSPU",150,0)
SETDQ Q
"RTN","RCTCSPU",151,0)
 ;
"RTN","RCTCSPU",152,0)
DECADJ(RCBILLDA,RCTRANDA) ;decrease adjustment transaction history for 5b cross-servicing record
"RTN","RCTCSPU",153,0)
 ;rcbillda - file 430 bill ien
"RTN","RCTCSPU",154,0)
 ;rctranda - file 433 transaction ien
"RTN","RCTCSPU",155,0)
 N BILL,DIC,DA,DIE,DR,Y,X
"RTN","RCTCSPU",156,0)
 I '$D(RCBILLDA)!('$D(RCTRANDA)) Q
"RTN","RCTCSPU",157,0)
 S X=RCTRANDA
"RTN","RCTCSPU",158,0)
 S DIC="^PRCA(430,"_RCBILLDA_",17,",DIC(0)="L"
"RTN","RCTCSPU",159,0)
 I '$D(^PRCA(430,RCBILLDA,17,0)) S ^PRCA(430,RCBILLDA,17,0)="^430.0171PA^0^0"
"RTN","RCTCSPU",160,0)
 S DIC("P")=$P(^PRCA(430,RCBILLDA,17,0),"^",2)
"RTN","RCTCSPU",161,0)
 S DA(1)=RCBILLDA
"RTN","RCTCSPU",162,0)
 S BILL=RCBILLDA
"RTN","RCTCSPU",163,0)
 D ^DIC I Y=-1 K DIC,DA Q
"RTN","RCTCSPU",164,0)
 S DIE=DIC K DIC
"RTN","RCTCSPU",165,0)
 S DA=+Y
"RTN","RCTCSPU",166,0)
 S DR="1////1" D ^DIE ; Reinstated the 4 slashes
"RTN","RCTCSPU",167,0)
 Q
"RTN","RCTCSPU",168,0)
 ;
"RTN","RCTCSPU",169,0)
INCADJ(RCBILLDA,RCTRANDA) ;increase adjustment transaction history for 5b cross-servicing record 315/DRF
"RTN","RCTCSPU",170,0)
 ;rcbillda - file 430 bill ien
"RTN","RCTCSPU",171,0)
 ;rctranda - file 433 transaction ien
"RTN","RCTCSPU",172,0)
 N DIC,DA,DIE,DR,Y,X
"RTN","RCTCSPU",173,0)
 I '$D(RCBILLDA)!('$D(RCTRANDA)) Q
"RTN","RCTCSPU",174,0)
 S X=RCTRANDA
"RTN","RCTCSPU",175,0)
 S DIC="^PRCA(430,"_RCBILLDA_",17,",DIC(0)="L"
"RTN","RCTCSPU",176,0)
 I '$D(^PRCA(430,RCBILLDA,17,0)) S ^PRCA(430,RCBILLDA,17,0)="^430.0171PA^0^0"
"RTN","RCTCSPU",177,0)
 S DIC("P")=$P(^PRCA(430,RCBILLDA,17,0),"^",2)
"RTN","RCTCSPU",178,0)
 S DA(1)=RCBILLDA
"RTN","RCTCSPU",179,0)
 D ^DIC I Y=-1 K DIC,DA Q
"RTN","RCTCSPU",180,0)
 S DIE=DIC K DIC
"RTN","RCTCSPU",181,0)
 S DA=+Y
"RTN","RCTCSPU",182,0)
 S DR="1////1" D ^DIE
"RTN","RCTCSPU",183,0)
 Q
"RTN","RCTCSPU",184,0)
 ;
"RTN","RCTCSPU",185,0)
RCLLSETC ;Set Cross-Servicing recall for a case
"RTN","RCTCSPU",186,0)
 N DIC,DIE,DA,DR,DIR,Y,BILL,REASON
"RTN","RCTCSPU",187,0)
 S DIC=430,DIC(0)="AEQM" D ^DIC Q:Y<0
"RTN","RCTCSPU",188,0)
 S BILL=+Y
"RTN","RCTCSPU",189,0)
 I $P($G(^PRCA(430,BILL,15)),U,11) G DELSETC
"RTN","RCTCSPU",190,0)
 S DIR(0)="Y",DIR("B")="NO",DIR("A")="Are you sure you want to set this case to be recalled from Cross-Servicing" D ^DIR
"RTN","RCTCSPU",191,0)
 I 'Y W !,*7,"No action taken" Q
"RTN","RCTCSPU",192,0)
 I '$D(^PRCA(430,"TCSP",BILL)) W !,*7,"No action taken.  Case has not been referred to Cross-Servicing." Q
"RTN","RCTCSPU",193,0)
 ; 
"RTN","RCTCSPU",194,0)
RCRSC ;set case recall reason
"RTN","RCTCSPU",195,0)
 ;set recall data in file 430 for the bill and the case
"RTN","RCTCSPU",196,0)
 S REASON=15
"RTN","RCTCSPU",197,0)
 S $P(^PRCA(430,BILL,15),U,11,13)="1^^"_REASON
"RTN","RCTCSPU",198,0)
 S $P(^PRCA(430,BILL,15),U,2,4)="1^^"_REASON
"RTN","RCTCSPU",199,0)
 ;
"RTN","RCTCSPU",200,0)
 D RCRSC^RCTCSPD4 ; *315 CS CASE RECALL tx
"RTN","RCTCSPU",201,0)
 W !,"Setting this case for Recall from Cross-Servicing is complete"
"RTN","RCTCSPU",202,0)
 G SETCQ
"RTN","RCTCSPU",203,0)
 ;
"RTN","RCTCSPU",204,0)
DELSETC ;Allows Cross-Servicing Recall to be deleted for case
"RTN","RCTCSPU",205,0)
 W !!,*7,"This case has already been set for recall from Cross-Servicing."
"RTN","RCTCSPU",206,0)
 S DIR(0)="Y",DIR("A")="Do you wish to delete the Cross-Servicing Recall for this case",DIR("B")="NO" D ^DIR G SETCQ:'Y
"RTN","RCTCSPU",207,0)
 ;
"RTN","RCTCSPU",208,0)
 ;delete the case recall
"RTN","RCTCSPU",209,0)
 F I=11:1:13 S $P(^PRCA(430,BILL,15),U,I)=""
"RTN","RCTCSPU",210,0)
 F I=2:1:5 S $P(^PRCA(430,BILL,15),U,I)=""
"RTN","RCTCSPU",211,0)
 D DELSETC^RCTCSPD4 ; *315 Create CS Delete Case Recall comment tx in 433 
"RTN","RCTCSPU",212,0)
 W !!,"Recall from Cross-Servicing has been deleted for this case."
"RTN","RCTCSPU",213,0)
 G SETCQ
"RTN","RCTCSPU",214,0)
 ;
"RTN","RCTCSPU",215,0)
SETCQ Q
"RTN","RCTCSPU",216,0)
 ;
"RTN","RCTCSPU",217,0)
SSN(DEBT) ;Get SSN for debtor
"RTN","RCTCSPU",218,0)
 ;Input Debtor (340)
"RTN","RCTCSPU",219,0)
 ;Output: SSN # or null
"RTN","RCTCSPU",220,0)
 NEW Y
"RTN","RCTCSPU",221,0)
 S Y=-1 G:'$G(DEBT) Q1
"RTN","RCTCSPU",222,0)
 S:DEBT?1N.N DEBT=$P($G(^RCD(340,DEBT,0)),"^")
"RTN","RCTCSPU",223,0)
 I DEBT[";DPT(" S Y=$P($G(^DPT(+DEBT,0)),"^",9)
"RTN","RCTCSPU",224,0)
 I DEBT[";VA(200," S Y=$P($G(^VA(200,+DEBT,1)),"^",9)
"RTN","RCTCSPU",225,0)
Q1 Q Y
"RTN","RCTCSPU",226,0)
 ;
"RTN","RCTCSPU",227,0)
 Q
"RTN","RCTCSWL")
0^27^B155347163^n/a
"RTN","RCTCSWL",1,0)
RCTCSWL ;ALB/PAW-Cross Servicing Worklist ;30-SEP-2015
"RTN","RCTCSWL",2,0)
 ;;4.5;ACCOUNTS RECEIVABLE;**315**;Mar 20, 1995;Build 67
"RTN","RCTCSWL",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSWL",4,0)
 ;
"RTN","RCTCSWL",5,0)
 ; Call to EN^DGRPD supported by DBIA# 10037
"RTN","RCTCSWL",6,0)
 ; Call to EN1AR^IBECEA supported by DBIA# 4047
"RTN","RCTCSWL",7,0)
 ;
"RTN","RCTCSWL",8,0)
EN ; -- Main entry point for RCTCSP RECONCILIATION WORKLIST
"RTN","RCTCSWL",9,0)
 N FILTERS,RCRPT,RCDIVS,RCBEG,RCEND,DAT,RCSC1,RCSC2,DIV,RCDPFXIT,RCRSN,RCRPTX,RCIENS,RCDIV
"RTN","RCTCSWL",10,0)
 I '$$FILTER(.FILTERS) Q
"RTN","RCTCSWL",11,0)
 S RCRPT=$P($G(FILTERS(0)),U,1)
"RTN","RCTCSWL",12,0)
 K XQORS,VALMEVL
"RTN","RCTCSWL",13,0)
 D EN^VALM("RCTCSP WORKLIST")  ;Looks at List Template RCTCSP WORKLIST
"RTN","RCTCSWL",14,0)
 Q
"RTN","RCTCSWL",15,0)
 ;
"RTN","RCTCSWL",16,0)
INIT ; Initialize variables
"RTN","RCTCSWL",17,0)
 D KILLGLB
"RTN","RCTCSWL",18,0)
 S RCRPT=$P(FILTERS(0),U,1)
"RTN","RCTCSWL",19,0)
 ;
"RTN","RCTCSWL",20,0)
 I RCRPT["," F RCRSN=1:1 S RCRPTX=$P(RCRPT,",",RCRSN) Q:RCRPTX=""  D GETRPT^RCTCSWL1(RCRPTX)
"RTN","RCTCSWL",21,0)
 I RCRPT'["," D GETRPT^RCTCSWL1(RCRPT)
"RTN","RCTCSWL",22,0)
 I '$D(^TMP("RCTCSWL",$J)) D  Q
"RTN","RCTCSWL",23,0)
 .W !!,*7,"The report found no patient data that meets the criteria selected.",!
"RTN","RCTCSWL",24,0)
 .S DIR(0)="E"
"RTN","RCTCSWL",25,0)
 .D ^DIR
"RTN","RCTCSWL",26,0)
 .S VALMQUIT=1
"RTN","RCTCSWL",27,0)
 .D EXIT
"RTN","RCTCSWL",28,0)
 ; If Excel Selected
"RTN","RCTCSWL",29,0)
 I EXCEL D  Q
"RTN","RCTCSWL",30,0)
 .D EXCEL^RCTCSWL1
"RTN","RCTCSWL",31,0)
 .S DIR(0)="E"
"RTN","RCTCSWL",32,0)
 .D ^DIR
"RTN","RCTCSWL",33,0)
 .S VALMQUIT=1
"RTN","RCTCSWL",34,0)
 .D EXIT
"RTN","RCTCSWL",35,0)
 ; If List Manager Selected
"RTN","RCTCSWL",36,0)
 I 'EXCEL D BLDWL^RCTCSWL1
"RTN","RCTCSWL",37,0)
 Q
"RTN","RCTCSWL",38,0)
 ;
"RTN","RCTCSWL",39,0)
HDR ; Set header for CS Worklist
"RTN","RCTCSWL",40,0)
 N RCDIVS,RCX
"RTN","RCTCSWL",41,0)
 I SORTBY=2 S VALMCAP="    Bill No.     Pt ID  Patient                   Balance  Ret Rsn       "
"RTN","RCTCSWL",42,0)
 I SORTBY=3 S VALMCAP="    Ret Rsn Bill No.     Pt ID  Patient                    Balance       "
"RTN","RCTCSWL",43,0)
 S RCX=$P(FILTERS(0),U,1)  ;Report
"RTN","RCTCSWL",44,0)
 S VALMHDR(1)=$S(RCX=1:"Bankruptcy",RCX=2:"Deaths",RCX=3:"Uncollectible",RCX=4:"Paymt. in Full",RCX=5:"Satisfied PA",RCX=6:"Compromise",RCX=7:"All Returns",1:"")
"RTN","RCTCSWL",45,0)
 D
"RTN","RCTCSWL",46,0)
 . I RCX[7 S VALMHDR(1)="Reconciliation "_VALMHDR(1)_" Report" Q
"RTN","RCTCSWL",47,0)
 . ;I RCX'[7 S VALMHDR(1)="Reconciliation Reports Selected: "_$P(RCX,",",$TR(1,"Bankruptcy"))_", "_$TR(2,"Deaths")_", "_$TR(3,"Uncollectible")_", "_$TR(4,"Payment in Full")_", "_$TR(5,"Satisfied PA")_", "_$TR(6,"Compromise")
"RTN","RCTCSWL",48,0)
 . N X S X="" F I=1:1:6 I RCX[I S X=X_$S(X="":"",1:", "),X=X_$S(I=1:"Bankruptcy",I=2:"Deaths",I=3:"Uncollectbl.",I=4:"Pmt. In Full",I=5:"Satisfied PA",I=6:"Compromise",1:"")
"RTN","RCTCSWL",49,0)
 . S VALMHDR(1)="Types: "_X
"RTN","RCTCSWL",50,0)
 . W !,VALMHDR(1)
"RTN","RCTCSWL",51,0)
 ;S VALMHDR(1)=$S(RCX=1:"Bankruptcy",RCX=2:"Deaths",RCX=3:"Uncollectible",RCX=4:"Paymt. in Full",RCX=5:"Satisfied PA",RCX=6:"Compromise",RCX=7:"All Returns",1:"")
"RTN","RCTCSWL",52,0)
 ;I RCX[7 S VALMHDR(1)="Reconciliation "_VALMHDR(1)_" Report"
"RTN","RCTCSWL",53,0)
 ;I RCX'[7 S VALMHDR(1)="Reconciliation Reports Selected: "_$P(RCX,",",$TR(1,"Bankruptcy"))_", "_$TR(2,"Deaths")_", "_$TR(3,"Uncollectible")_", "_$TR(4,"Payment in Full")_", "_$TR(5,"Satisfied PA")_", "_$TR(6,"Compromise")
"RTN","RCTCSWL",54,0)
 S VALMHDR(2)="Selected Division(s): "
"RTN","RCTCSWL",55,0)
 I VAUTD=1 S VALMHDR(2)=VALMHDR(2)_"ALL"
"RTN","RCTCSWL",56,0)
 I VAUTD=0 D
"RTN","RCTCSWL",57,0)
 .S RCY=0 F  S RCY=$O(VAUTD(RCY)) Q:RCY=""  D 
"RTN","RCTCSWL",58,0)
 ..S VALMHDR(2)=VALMHDR(2)_RCY_" "
"RTN","RCTCSWL",59,0)
 Q
"RTN","RCTCSWL",60,0)
 ;
"RTN","RCTCSWL",61,0)
FILTER(FILTERS) ; Set filters
"RTN","RCTCSWL",62,0)
 ; Sets an array of filters to determine which entries to include in display
"RTN","RCTCSWL",63,0)
 ; Input:   None
"RTN","RCTCSWL",64,0)
 ; Output:  
"RTN","RCTCSWL",65,0)
 ; Returns: 0 if the user entered '^' or timed out, 1 otherwise
"RTN","RCTCSWL",66,0)
 ; FILTERS(0) = Piece 1 = 1=Bankruptcy,2=Deaths,3=Uncollectable,4=Payment in Full,5=Satisfied PA,6=Compromise,7=All Returns
"RTN","RCTCSWL",67,0)
 ;              Piece 3 = All (0) or Select (1) Patients
"RTN","RCTCSWL",68,0)
 ;
"RTN","RCTCSWL",69,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT,RCXX,X,XX,RCRRC,Y
"RTN","RCTCSWL",70,0)
 K FILTERS
"RTN","RCTCSWL",71,0)
 ;
"RTN","RCTCSWL",72,0)
 ; Select type of report
"RTN","RCTCSWL",73,0)
 W !,"Please Select Type of Report"
"RTN","RCTCSWL",74,0)
 W !!?11,"1        Bankruptcy"
"RTN","RCTCSWL",75,0)
 W !?11,"2        Deaths"
"RTN","RCTCSWL",76,0)
 W !?11,"3        Uncollectible"
"RTN","RCTCSWL",77,0)
 W !?11,"4        Payment in Full"
"RTN","RCTCSWL",78,0)
 W !?11,"5        Satisfied PA"
"RTN","RCTCSWL",79,0)
 W !?11,"6        Compromise"
"RTN","RCTCSWL",80,0)
 W !?11,"7        All Returns"
"RTN","RCTCSWL",81,0)
 W !
"RTN","RCTCSWL",82,0)
 S DIR(0)="L^1:7"
"RTN","RCTCSWL",83,0)
 W ! D ^DIR K DIR
"RTN","RCTCSWL",84,0)
 I $G(DIRUT) Q 0
"RTN","RCTCSWL",85,0)
 S X=$$UP^XLFSTR(X)
"RTN","RCTCSWL",86,0)
 S $P(FILTERS(0),U)=Y
"RTN","RCTCSWL",87,0)
 I Y[7 S $P(FILTERS(0),U)=$P(Y,",")
"RTN","RCTCSWL",88,0)
 I Y'[7 S $P(FILTERS(0),U)=Y
"RTN","RCTCSWL",89,0)
 ;
"RTN","RCTCSWL",90,0)
 ; Site (Division) Filter - Uses MEDICAL CENTER DIVISION file
"RTN","RCTCSWL",91,0)
 S DIR(0)="S",DIR("A")="Select(A)ll or (S)elected Division(s) ",DIR("B")="All"
"RTN","RCTCSWL",92,0)
 S DIR("?",1)="Enter 'A' to not filter by Division."
"RTN","RCTCSWL",93,0)
 S DIR("?")="Enter 'S' to view entries for selected Division(s)."
"RTN","RCTCSWL",94,0)
 S $P(DIR(0),U,2)="A:All Divisions;S:Selected Divisions"
"RTN","RCTCSWL",95,0)
 W ! D ^DIR K DIR
"RTN","RCTCSWL",96,0)
 I $G(DIRUT)!($G(DUOUT)) W !!,*7,"No Division(s) selected.  Quitting.",! Q 0
"RTN","RCTCSWL",97,0)
 S X=$$UP^XLFSTR(X)
"RTN","RCTCSWL",98,0)
 S $P(FILTERS(0),U,3)=$S(Y="S":1,1:0) S VAUTD=$S(Y="A":1,1:0)
"RTN","RCTCSWL",99,0)
 ; Set Division filter
"RTN","RCTCSWL",100,0)
 I $G(VAUTD)=1 S $P(FILTERS(0),U,3)=0,RCDIVS="All"
"RTN","RCTCSWL",101,0)
 I $P(FILTERS(0),U,3)=1 D
"RTN","RCTCSWL",102,0)
 .D ASKDIV(.FILTERS)
"RTN","RCTCSWL",103,0)
 ;
"RTN","RCTCSWL",104,0)
 I 'FILTERS(0) Q 0
"RTN","RCTCSWL",105,0)
 ;
"RTN","RCTCSWL",106,0)
 S SORTBY=1
"RTN","RCTCSWL",107,0)
 ; 
"RTN","RCTCSWL",108,0)
 ; Display Selection Criteria to Screen
"RTN","RCTCSWL",109,0)
 D SHOWFILT(.FILTERS)
"RTN","RCTCSWL",110,0)
 ;
"RTN","RCTCSWL",111,0)
 ; Excel or List Manager
"RTN","RCTCSWL",112,0)
 S DIR(0)="S^1:List Manager;2:Excel Format",DIR("A")="List Manager or Excel Format",DIR("B")=1
"RTN","RCTCSWL",113,0)
 S DIR("?",1)="Enter 1 to select List Manager."
"RTN","RCTCSWL",114,0)
 S DIR("?")="Enter 2 to select Excel Format."
"RTN","RCTCSWL",115,0)
 W ! D ^DIR K DIR
"RTN","RCTCSWL",116,0)
 I $G(DIRUT) Q 0
"RTN","RCTCSWL",117,0)
 S X=$$UP^XLFSTR(X)
"RTN","RCTCSWL",118,0)
 S EXCEL=$S(Y=1:0,1:1)
"RTN","RCTCSWL",119,0)
 S STOP=0
"RTN","RCTCSWL",120,0)
 I EXCEL=1 D
"RTN","RCTCSWL",121,0)
 .D EXCMSG^RCTCSJR ; Display Excel display message
"RTN","RCTCSWL",122,0)
 .S %ZIS="AEQ" D ^%ZIS I POP S STOP=1
"RTN","RCTCSWL",123,0)
 I STOP Q 0
"RTN","RCTCSWL",124,0)
 ;
"RTN","RCTCSWL",125,0)
 Q 1
"RTN","RCTCSWL",126,0)
 ;
"RTN","RCTCSWL",127,0)
SHOWFILT(FILTERS) ; Display
"RTN","RCTCSWL",128,0)
 ; Displays the currently selected filter selections for the
"RTN","RCTCSWL",129,0)
 ; Billing and NVC Precert Worklist display
"RTN","RCTCSWL",130,0)
 ; Input:   FILTERS()   - Array of filter settings. See FILTERS for a detailed
"RTN","RCTCSWL",131,0)
 ;                explanation of the FILTERS array
"RTN","RCTCSWL",132,0)
 ; Output:  Current Filter settings are displayed
"RTN","RCTCSWL",133,0)
 ;
"RTN","RCTCSWL",134,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT,IEN,LEN,RCXX,RCY,RCZ,RCYY
"RTN","RCTCSWL",135,0)
 W !!!,"Type of Report: "
"RTN","RCTCSWL",136,0)
 S RCRPT=$P(FILTERS(0),U,1)
"RTN","RCTCSWL",137,0)
 W $S(RCRPT[99:"All Returns",1:"Selected")
"RTN","RCTCSWL",138,0)
 ;
"RTN","RCTCSWL",139,0)
 W !,"Show All or Selected Divisions: "
"RTN","RCTCSWL",140,0)
 W $S($G(VAUTD)=0:"Selected",1:"All")
"RTN","RCTCSWL",141,0)
 ;
"RTN","RCTCSWL",142,0)
 W !,"All Patients"   ; or Selected Patients: "
"RTN","RCTCSWL",143,0)
 K DIR
"RTN","RCTCSWL",144,0)
 Q
"RTN","RCTCSWL",145,0)
 ;
"RTN","RCTCSWL",146,0)
ASKDIV(FILTERS) ; Sets a list of Divisions to be displayed in the Reconciliation Worklist
"RTN","RCTCSWL",147,0)
 ; Input: FILTERS - Current Array of filter settings
"RTN","RCTCSWL",148,0)
 ; Output: FILTERS - Updated Array of filter settings
"RTN","RCTCSWL",149,0)
 N DIC,DIR,DIVS,FIRST,IBIENS,IBIENS2,IEN,N,X,XX,Y
"RTN","RCTCSWL",150,0)
 S DIC=40.8,DIC(0)="AEM",FIRST=1
"RTN","RCTCSWL",151,0)
 F  D  Q:+IEN<1
"RTN","RCTCSWL",152,0)
 . D ONEDIV(.DIC,.IEN,.FIRST) ; One Division prompt
"RTN","RCTCSWL",153,0)
 . Q:+IEN<1
"RTN","RCTCSWL",154,0)
 . S IBIENS($P(IEN,U,2))=$P(IEN,U,1)
"RTN","RCTCSWL",155,0)
 . S IBIENS2($P(IEN,U,1))=$P(IEN,U,2)
"RTN","RCTCSWL",156,0)
 . S DIV=$P(IEN,U)
"RTN","RCTCSWL",157,0)
 . S RCDIV=$$GET1^DIQ(40.8,DIV_",",1,"E")
"RTN","RCTCSWL",158,0)
 . S VAUTD(RCDIV)=RCDIV
"RTN","RCTCSWL",159,0)
 I ($G(DUOUT))!('$D(IBIENS)) S FILTERS(0)=0 Q 0
"RTN","RCTCSWL",160,0)
 I '$D(IBIENS) S $P(FILTERS(0),U,3)=0
"RTN","RCTCSWL",161,0)
 ;
"RTN","RCTCSWL",162,0)
 ; Set the filter node responses in alphabetical order
"RTN","RCTCSWL",163,0)
 S XX=""
"RTN","RCTCSWL",164,0)
 F  D  Q:XX=""
"RTN","RCTCSWL",165,0)
 . S XX=$O(IBIENS(XX))
"RTN","RCTCSWL",166,0)
 . Q:XX=""
"RTN","RCTCSWL",167,0)
 . S N=IBIENS(XX)
"RTN","RCTCSWL",168,0)
 . S FILTERS(1,N)=""
"RTN","RCTCSWL",169,0)
 . D CHKFILT
"RTN","RCTCSWL",170,0)
 Q
"RTN","RCTCSWL",171,0)
 ;
"RTN","RCTCSWL",172,0)
ONEDIV(DIC,IEN,FIRST) ; Prompts the user for a Division
"RTN","RCTCSWL",173,0)
 ; Input: DIC - Variable/Array of settings needed for ^DIC call
"RTN","RCTCSWL",174,0)
 ; FIRST - Set to 1 initially and then 0 for subsequent calls
"RTN","RCTCSWL",175,0)
 ; Output: FIRST - Set to 0
"RTN","RCTCSWL",176,0)
 ; IEN - IEN of the selected Division
"RTN","RCTCSWL",177,0)
 ; null if no selection was made
"RTN","RCTCSWL",178,0)
 S DIC("A")=$S(FIRST:"Select a Division: ",1:"Select Another Division: ")
"RTN","RCTCSWL",179,0)
 D ^DIC
"RTN","RCTCSWL",180,0)
 I FIRST,X="" W !!,*7,"Division entry is required!",! D ONEDIV(.DIC,.IEN,.FIRST)
"RTN","RCTCSWL",181,0)
 I $G(DUOUT) W !!,*7,"User exited the option with '^',quitting.",! S IEN=Y,FILTERS(0)=0 Q 0
"RTN","RCTCSWL",182,0)
 S FIRST=0,IEN=Y_U_X
"RTN","RCTCSWL",183,0)
 Q
"RTN","RCTCSWL",184,0)
 ;
"RTN","RCTCSWL",185,0)
EXPAND ; ACTION - Expand Patient (EP)
"RTN","RCTCSWL",186,0)
 D FULL^VALM1
"RTN","RCTCSWL",187,0)
 N I,J,RCBILL,RCBILLEX,RCDFN,RCNAME,RCPTID,RCXX,VALMY,ECNT
"RTN","RCTCSWL",188,0)
 D EN^VALM2($G(XQORNOD(0)))
"RTN","RCTCSWL",189,0)
 I $D(VALMY) S RCXX=0 F  S RCXX=$O(VALMY(RCXX)) Q:'RCXX  D
"RTN","RCTCSWL",190,0)
 .K ^TMP("RCTCSWE",$J)
"RTN","RCTCSWL",191,0)
 .S ECNT=$G(^TMP("RCTCSWLX",$J,RCXX))
"RTN","RCTCSWL",192,0)
 .S RCDFN=$P(ECNT,U,1),RCNAME=$P(ECNT,U,2),RCPTID=$P(ECNT,U,3),RCBILL=$P(ECNT,U,5),RCBILLEX=$P(ECNT,U,6)
"RTN","RCTCSWL",193,0)
 .S ^TMP("RCTCSWE",$J)=RCDFN_U_RCNAME_U_RCPTID_U_RCBILL_U_RCBILLEX
"RTN","RCTCSWL",194,0)
 .D EN^VALM("RCTCSP WORKLIST EXPAND")
"RTN","RCTCSWL",195,0)
 .Q
"RTN","RCTCSWL",196,0)
 K ^TMP("RCTCSWE",$J)
"RTN","RCTCSWL",197,0)
 S VALMBCK="R"
"RTN","RCTCSWL",198,0)
 Q
"RTN","RCTCSWL",199,0)
 ;  
"RTN","RCTCSWL",200,0)
LINKI ; ACTION - View Patient Insurance (VI)
"RTN","RCTCSWL",201,0)
 D FULL^VALM1
"RTN","RCTCSWL",202,0)
 N I,J,DFN,RCXX,VALMY,ECNT,GOTPAT,REC,DIR,X,Y,DIRUT,DUOUT,DTOUT,DIROUT
"RTN","RCTCSWL",203,0)
 D EN^VALM2($G(XQORNOD(0)))
"RTN","RCTCSWL",204,0)
 I $D(VALMY) S RCXX=0 F  S RCXX=$O(VALMY(RCXX)) Q:'RCXX  D
"RTN","RCTCSWL",205,0)
 .S (ECNT,REC)=$G(^TMP("RCTCSWLX",$J,RCXX))
"RTN","RCTCSWL",206,0)
 .S DFN=$P(ECNT,U,1)  ;Need DFN for VI
"RTN","RCTCSWL",207,0)
 .I DFN="" W !!,"Debtor is not a VA Patient" D PAUSE^VALM1 Q
"RTN","RCTCSWL",208,0)
 .S ^TMP($J,"PATINS")=$P(REC,U,1),GOTPAT=1
"RTN","RCTCSWL",209,0)
 .D EN^VALM("IBCNS VIEW PAT INS")
"RTN","RCTCSWL",210,0)
 S VALMBCK="R"
"RTN","RCTCSWL",211,0)
 Q
"RTN","RCTCSWL",212,0)
 ;
"RTN","RCTCSWL",213,0)
ACCTPR ; ACTION - Account Profile (AP)
"RTN","RCTCSWL",214,0)
 D FULL^VALM1
"RTN","RCTCSWL",215,0)
 N I,J,DFN,RCXX,VALMY,ECNT,REC,RCDEBTDA
"RTN","RCTCSWL",216,0)
 D EN^VALM2($G(XQORNOD(0)))
"RTN","RCTCSWL",217,0)
 I $D(VALMY) S RCXX=0 F  S RCXX=$O(VALMY(RCXX)) Q:'RCXX  D  Q:$G(RCDPFXIT)     ; also get out of loop upon fast exit
"RTN","RCTCSWL",218,0)
 . S (ECNT,REC)=$G(^TMP("RCTCSWLX",$J,RCXX))
"RTN","RCTCSWL",219,0)
 . S RCDEBTDA=$P(ECNT,U,4)  ;Need DEBTOR for AP
"RTN","RCTCSWL",220,0)
 . D EN^VALM("PRCA TCSP ACCOUNT PROFILE")
"RTN","RCTCSWL",221,0)
 . Q
"RTN","RCTCSWL",222,0)
 S VALMBCK="R"
"RTN","RCTCSWL",223,0)
 I $G(RCDPFXIT) S VALMBCK="Q"    ; user wants to exit entirely
"RTN","RCTCSWL",224,0)
 Q
"RTN","RCTCSWL",225,0)
 ;
"RTN","RCTCSWL",226,0)
PTVW ; ACTION - View Patient (PT)
"RTN","RCTCSWL",227,0)
 D FULL^VALM1
"RTN","RCTCSWL",228,0)
 N I,J,DFN,RCXX,VALMY,ECNT,GOTPAT,REC,DIR,X,Y,DIRUT,DUOUT,DTOUT,DIROUT
"RTN","RCTCSWL",229,0)
 D EN^VALM2($G(XQORNOD(0)))
"RTN","RCTCSWL",230,0)
 I $D(VALMY) S RCXX=0 F  S RCXX=$O(VALMY(RCXX)) Q:'RCXX  D
"RTN","RCTCSWL",231,0)
 .S (ECNT,REC)=$G(^TMP("RCTCSWLX",$J,RCXX))
"RTN","RCTCSWL",232,0)
 .S DFN=$P(ECNT,U,1)  ;Need DFN for PT
"RTN","RCTCSWL",233,0)
 .I DFN="" W !!,"Debtor is not a VA Patient." D PAUSE^VALM1 Q
"RTN","RCTCSWL",234,0)
 .D EN^DGRPD         ; DBIA# 10037
"RTN","RCTCSWL",235,0)
 S VALMBCK="R"
"RTN","RCTCSWL",236,0)
 Q
"RTN","RCTCSWL",237,0)
 ;
"RTN","RCTCSWL",238,0)
CEA ; ACTION - CANCEL EDIT ADD (CN)
"RTN","RCTCSWL",239,0)
 N DFN,RCDEBTDA,GOTPAT
"RTN","RCTCSWL",240,0)
 D FULL^VALM1
"RTN","RCTCSWL",241,0)
 I '$D(ECNT) G CEAX    ; ECNT is set by the ACCTPR - Account Profile action protocol code and must be defined
"RTN","RCTCSWL",242,0)
 ;
"RTN","RCTCSWL",243,0)
 S DFN=+$P(ECNT,U,1)           ; patient ien
"RTN","RCTCSWL",244,0)
 S RCDEBTDA=+$P(ECNT,U,4)      ; AR debtor ien
"RTN","RCTCSWL",245,0)
 ;
"RTN","RCTCSWL",246,0)
 ; check on security key - same one used in the IB option IB CANCEL/EDIT/ADD CHARGES
"RTN","RCTCSWL",247,0)
 I '$D(^XUSEC("IB AUTHORIZE",DUZ)) D  G CEAX
"RTN","RCTCSWL",248,0)
 . W *7,!!?3,"You must hold the IB AUTHORIZE security key in order to access this option.",!
"RTN","RCTCSWL",249,0)
 . D PAUSE^VALM1
"RTN","RCTCSWL",250,0)
 . Q
"RTN","RCTCSWL",251,0)
 ;
"RTN","RCTCSWL",252,0)
 ; check to make sure we have a DFN here.  Debtor may not be a patient
"RTN","RCTCSWL",253,0)
 I 'DFN D  G CEAX
"RTN","RCTCSWL",254,0)
 . N DP,DEBTTYP
"RTN","RCTCSWL",255,0)
 . S DP=$P($G(^RCD(340,RCDEBTDA,0)),U,1)
"RTN","RCTCSWL",256,0)
 . S DEBTTYP=$S(DP["VA(200":"a VistA user",DP["DIC(36":"a 3rd party payer",DP["DIC(4":"a VA institution",DP["PRC(440":"an IFCAP vendor",1:"UNKNOWN!?")
"RTN","RCTCSWL",257,0)
 . W *7,!!?3,"The AR Debtor must be a patient for this action."
"RTN","RCTCSWL",258,0)
 . W !?3,"For this account, the AR Debtor is ",DEBTTYP,".",!
"RTN","RCTCSWL",259,0)
 . D PAUSE^VALM1
"RTN","RCTCSWL",260,0)
 . Q
"RTN","RCTCSWL",261,0)
 ;
"RTN","RCTCSWL",262,0)
 ; new a bunch of variables left hanging around after this call
"RTN","RCTCSWL",263,0)
 N %X,%Y,C,D,DA,DESC,DI,DIC,DICR,DIE,DIG,DIH,DILN,DIU,DIV,DIW,DQ,DR,ENT,FMSNUM1,IBAFY,IBATYPN,IBSTAR80,PRCA,RCREF
"RTN","RCTCSWL",264,0)
 N RCVXCTY,RCXQFL,RCXVBDT,RCXVBST,RCXVDA,X,Y
"RTN","RCTCSWL",265,0)
 S GOTPAT=1
"RTN","RCTCSWL",266,0)
 W !
"RTN","RCTCSWL",267,0)
 D EN1AR^IBECEA      ; DBIA 4047
"RTN","RCTCSWL",268,0)
 D INIT^RCDPAPLM     ; refresh account profile data
"RTN","RCTCSWL",269,0)
CEAX ;
"RTN","RCTCSWL",270,0)
 S VALMBCK="R"
"RTN","RCTCSWL",271,0)
 Q
"RTN","RCTCSWL",272,0)
 ;
"RTN","RCTCSWL",273,0)
PRTSTAT ; ACTION - PRINT A PAYMENT STATEMENT (PR)
"RTN","RCTCSWL",274,0)
 D FULL^VALM1
"RTN","RCTCSWL",275,0)
 N I,J,DFN,RCXX,VALMY,ECNT,GOTBILL,REC,PRCABN,DIR,X,Y,DIRUT,DUOUT,DTOUT,DIROUT
"RTN","RCTCSWL",276,0)
 D EN^VALM2($G(XQORNOD(0)))
"RTN","RCTCSWL",277,0)
 I $D(VALMY) S RCXX=0 F  S RCXX=$O(VALMY(RCXX)) Q:'RCXX  D  Q:$D(DIRUT)
"RTN","RCTCSWL",278,0)
 . S (ECNT,REC)=$G(^TMP("RCTCSWLX",$J,RCXX))
"RTN","RCTCSWL",279,0)
 . S PRCABN=$P(ECNT,U,5)  ;Need Bill IEN for PR
"RTN","RCTCSWL",280,0)
 . I $G(DIRUT) Q
"RTN","RCTCSWL",281,0)
 . S GOTBILL=1
"RTN","RCTCSWL",282,0)
 . D ^PRCACM K DTOUT
"RTN","RCTCSWL",283,0)
 . D PAUSE^VALM1
"RTN","RCTCSWL",284,0)
 . Q
"RTN","RCTCSWL",285,0)
 S VALMBCK="R"
"RTN","RCTCSWL",286,0)
 Q
"RTN","RCTCSWL",287,0)
 ;
"RTN","RCTCSWL",288,0)
REMOVE ; ACTION - REMOVE FROM WORKLIST (RM)
"RTN","RCTCSWL",289,0)
 D FULL^VALM1
"RTN","RCTCSWL",290,0)
 S VALMBCK="R"
"RTN","RCTCSWL",291,0)
 N I,J,DFN,RCXX,VALMY,ECNT,GOTPAT,REC,RCBILLDA,RCBILLEX,RCDATE,RCNAME,RCRRSN,RCEXTBL
"RTN","RCTCSWL",292,0)
 D EN^VALM2($G(XQORNOD(0))) Q:'$D(VALMY)
"RTN","RCTCSWL",293,0)
 S RCXX=0 F  S RCXX=$O(VALMY(RCXX)) Q:'RCXX  D
"RTN","RCTCSWL",294,0)
 .S (ECNT,REC)=$G(^TMP("RCTCSWLX",$J,RCXX))
"RTN","RCTCSWL",295,0)
 .S RCNAME=$P(ECNT,U,2)
"RTN","RCTCSWL",296,0)
 .S RCBILLDA=$P(ECNT,U,5)
"RTN","RCTCSWL",297,0)
 .S RCBILLEX=$P(ECNT,U,6)
"RTN","RCTCSWL",298,0)
 .S RCEXTBL=$P($G(^PRCA(430,+RCBILLDA,0)),U,1)   ; external bill#
"RTN","RCTCSWL",299,0)
 .S RCDATE=$P(ECNT,U,7)
"RTN","RCTCSWL",300,0)
 .S RCRRSN=$P(ECNT,U,8)
"RTN","RCTCSWL",301,0)
 .W !!,"Remove BILL "_RCBILLEX_" from Reconciliation Worklist Y/N? "
"RTN","RCTCSWL",302,0)
 .S %=2 D YN^DICN
"RTN","RCTCSWL",303,0)
 .I %=1 D
"RTN","RCTCSWL",304,0)
 ..N PRCAEN,PRCAA1,DR,DIE,DA,D0,PRCAD,RCASK,PRCAA2,PRCA,PRCATY,RCUSER
"RTN","RCTCSWL",305,0)
 ..S DIE="^PRCA(430,",DA=RCBILLDA
"RTN","RCTCSWL",306,0)
 ..S DR="309////1"
"RTN","RCTCSWL",307,0)
 ..D ^DIE ;Set flag to not display this bill on the reconciliation worklist
"RTN","RCTCSWL",308,0)
 ..K ^TMP("RCTCSWL",$J,RCNAME,RCEXTBL)
"RTN","RCTCSWL",309,0)
 ..W !,"BILL "_RCBILLEX_" has been removed from the worklist."
"RTN","RCTCSWL",310,0)
 ..D PAUSE^VALM1
"RTN","RCTCSWL",311,0)
 ..D CLEAN^VALM10
"RTN","RCTCSWL",312,0)
 ..;File AR transaction indicating CS RECON WORKED
"RTN","RCTCSWL",313,0)
 ..S RCUSER=DUZ
"RTN","RCTCSWL",314,0)
 ..S PRCABN=RCBILLDA
"RTN","RCTCSWL",315,0)
 ..D SETTR^PRCAUTL,PATTR^PRCAUTL Q:'$D(PRCAEN)
"RTN","RCTCSWL",316,0)
 ..S PRCAA1=$S($D(^PRCA(433,PRCAEN,4,0)):+$P(^(0),U,4),1:0)
"RTN","RCTCSWL",317,0)
 ..Q:PRCAA1'>0  S PRCAA2=$P(^(0),U,3)
"RTN","RCTCSWL",318,0)
 ..S DIE="^PRCA(433,",DA=PRCAEN
"RTN","RCTCSWL",319,0)
 ..S DR=".03///"_PRCABN ;Bill Number
"RTN","RCTCSWL",320,0)
 ..S DR=DR_";3///0" ;Calm Code Done
"RTN","RCTCSWL",321,0)
 ..S DR=DR_";12///"_$O(^PRCA(430.3,"AC",50,0)) ;Transaction Type
"RTN","RCTCSWL",322,0)
 ..S DR=DR_";15///0" ;Transaction Amount
"RTN","RCTCSWL",323,0)
 ..S DR=DR_";42///"_RCUSER ;Processed by user
"RTN","RCTCSWL",324,0)
 ..S DR=DR_";4///2" ;Transaction status (complete)
"RTN","RCTCSWL",325,0)
 ..D ^DIE
"RTN","RCTCSWL",326,0)
 ..; DIE seemed to fail with too many variables, so we run it twice.
"RTN","RCTCSWL",327,0)
 ..S DR="5.02///CS RECON WORKED"  ;Brief comment
"RTN","RCTCSWL",328,0)
 ..S DR=DR_";11///"_DT ;Transaction date
"RTN","RCTCSWL",329,0)
 ..D ^DIE
"RTN","RCTCSWL",330,0)
 ..I $P($G(^PRCA(433,PRCAEN,5)),"^",2)=""!('$P(^PRCA(433,PRCAEN,1),"^")) S PRCACOMM="TRANSACTION INCOMPLETE" D DELETE^PRCAWO1 K PRCACOMM Q
"RTN","RCTCSWL",331,0)
 ..I '$D(PRCAD("DELETE")) S RCASK=1 D TRANUP^PRCAUTL,UPPRIN^PRCADJ
"RTN","RCTCSWL",332,0)
 ..I $P($G(^RCD(340,+$P(^PRCA(430,PRCABN,0),"^",9),0)),"^")[";DPT(" S $P(^PRCA(433,PRCAEN,0),"^",10)=1
"RTN","RCTCSWL",333,0)
 ..Q
"RTN","RCTCSWL",334,0)
 .Q
"RTN","RCTCSWL",335,0)
 ;
"RTN","RCTCSWL",336,0)
 D BLDWL^RCTCSWL1
"RTN","RCTCSWL",337,0)
 S VALMBCK="R"
"RTN","RCTCSWL",338,0)
 Q
"RTN","RCTCSWL",339,0)
 ;
"RTN","RCTCSWL",340,0)
KILLGLB ; Kill Worklist Globals
"RTN","RCTCSWL",341,0)
 K ^TMP("RCTCSWL",$J)
"RTN","RCTCSWL",342,0)
 K ^TMP("RCTCSWLX",$J)
"RTN","RCTCSWL",343,0)
 K ^TMP("RCTCSWE",$J)
"RTN","RCTCSWL",344,0)
 K ^TMP("VALMAR",$J)
"RTN","RCTCSWL",345,0)
 K ^TMP("XQORS",$J)
"RTN","RCTCSWL",346,0)
 K ^TMP("RCTPAPLM",$J)
"RTN","RCTCSWL",347,0)
 K ^TMP("RCTCBPLM",$J)
"RTN","RCTCSWL",348,0)
 K RCFP,RCFPNO,RCFPNOT,RCFPNUM,RCINLN2,RCINV
"RTN","RCTCSWL",349,0)
 D CLEAR^VALM1
"RTN","RCTCSWL",350,0)
 Q
"RTN","RCTCSWL",351,0)
 ;
"RTN","RCTCSWL",352,0)
HELP ; -- help code
"RTN","RCTCSWL",353,0)
 S X="?" D DISP^XQORM1 W !!
"RTN","RCTCSWL",354,0)
 Q
"RTN","RCTCSWL",355,0)
 ;
"RTN","RCTCSWL",356,0)
EXIT ; -- exit code
"RTN","RCTCSWL",357,0)
 D KILLGLB
"RTN","RCTCSWL",358,0)
 K EXCEL,POP,SORTBY,VAUTC,VAUTD
"RTN","RCTCSWL",359,0)
 D CLEAN^VALM10
"RTN","RCTCSWL",360,0)
 D ^%ZISC
"RTN","RCTCSWL",361,0)
 Q
"RTN","RCTCSWL",362,0)
EXDIV ;
"RTN","RCTCSWL",363,0)
 D KILLGLB
"RTN","RCTCSWL",364,0)
 K EXCEL,POP,SORTBY,VAUTC,VAUTD
"RTN","RCTCSWL",365,0)
 Q
"RTN","RCTCSWL",366,0)
 ;
"RTN","RCTCSWL",367,0)
CHKFILT ; Check Filters
"RTN","RCTCSWL",368,0)
 N RCSTAT,RCXX,RCXXX,RCXXXX,RCFST,RCDIVS
"RTN","RCTCSWL",369,0)
 I '$D(RCIENS)=1 S $P(FILTERS(0),U,3)=0,RCDIVS="All"
"RTN","RCTCSWL",370,0)
 I $G(VAUTD)=0 D
"RTN","RCTCSWL",371,0)
 .I $D(RCIENS) S $P(FILTERS(0),U,3)=1
"RTN","RCTCSWL",372,0)
 .S RCSTAT=0,RCFST=1
"RTN","RCTCSWL",373,0)
 .F  S RCSTAT=$O(VAUTD(RCSTAT)) Q:RCSTAT=""  D
"RTN","RCTCSWL",374,0)
 ..S RCXX=$E($$GET1^DIQ(40.8,RCSTAT_",",.01),1,15)
"RTN","RCTCSWL",375,0)
 ..S RCXXX=$$GET1^DIQ(40.8,RCSTAT_",",1,"E")
"RTN","RCTCSWL",376,0)
 ..S RCXXXX=$$GET1^DIQ(40.8,RCSTAT_",",.07,"I")
"RTN","RCTCSWL",377,0)
 ..I 'RCFST S RCDIVS=RCDIVS_","_RCXX_"-"_RCXXX
"RTN","RCTCSWL",378,0)
 ..I RCFST S RCFST=0,RCDIVS=RCXX_"-"_RCXXX
"RTN","RCTCSWL",379,0)
 Q
"RTN","RCTCSWL1")
0^28^B54202527^n/a
"RTN","RCTCSWL1",1,0)
RCTCSWL1 ;ALB/PAW-Cross Servicing Worklist ;30-SEP-2015
"RTN","RCTCSWL1",2,0)
 ;;4.5;ACCOUNTS RECEIVABLE;**315**;Mar 20, 1995;Build 67
"RTN","RCTCSWL1",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSWL1",4,0)
 ;
"RTN","RCTCSWL1",5,0)
GETRPT(RCRPT) ; Create patient report based upon report selection
"RTN","RCTCSWL1",6,0)
 ; required input RCRPT (see comments below for number/report correlation)
"RTN","RCTCSWL1",7,0)
 ; output ^TMP("RCTCSWL",$J), containing auths for group queue
"RTN","RCTCSWL1",8,0)
 N RCBILLEX,RCDATE,RCDEBTOR,RCDFN,RCBILL,RCDBTRN,RCDFN,RCFND1,RCTRAN,RCRTCD,RCRTCDX,RCUNC,RCPIF,RCSPA,RCDIV,RCDIVX
"RTN","RCTCSWL1",9,0)
 ; Loop through ACCOUNTS RECEIVABLE File (#430) Cross-Servicing Index
"RTN","RCTCSWL1",10,0)
 S RCDATE="" F  S RCDATE=$O(^PRCA(430,"AN",RCDATE)) Q:RCDATE=""  D
"RTN","RCTCSWL1",11,0)
 .S RCBILL="" F  S RCBILL=$O(^PRCA(430,"AN",RCDATE,RCBILL)) Q:RCBILL=""  D
"RTN","RCTCSWL1",12,0)
 ..I +$P($G(^PRCA(430,RCBILL,30)),U,9) Q  ;Bill has been removed from CS Reconciliation Worklist
"RTN","RCTCSWL1",13,0)
 ..S RCDEBTOR=$P($G(^PRCA(430,RCBILL,0)),U,9)  ;Debtor in File 340
"RTN","RCTCSWL1",14,0)
 ..I $P($G(^RCD(340,RCDEBTOR,0)),U,1)["DPT" S RCDFN=+$P($G(^RCD(340,RCDEBTOR,0)),U,1)
"RTN","RCTCSWL1",15,0)
 ..S RCRTCD=$P($G(^PRCA(430,RCBILL,30)),U,2)
"RTN","RCTCSWL1",16,0)
 ..I RCRTCD="" Q
"RTN","RCTCSWL1",17,0)
 ..S RCRTCDX=$P(^PRCA(430.5,RCRTCD,0),U)
"RTN","RCTCSWL1",18,0)
 ..S RCBILLEX=$P(^PRCA(430,RCBILL,0),U)
"RTN","RCTCSWL1",19,0)
 ..; Check if running for specific Division - MEDICAL CENTER DIVISION File #40.8
"RTN","RCTCSWL1",20,0)
 ..S RCDIV=$P(RCBILLEX,"-")
"RTN","RCTCSWL1",21,0)
 ..S RCDIVX="" I VAUTD=0 I '$D(VAUTD(RCDIV)) Q
"RTN","RCTCSWL1",22,0)
 ..; Check if running for specific Patient
"RTN","RCTCSWL1",23,0)
 ..I $P(FILTERS(0),U,3)=1 I '$D(RCDFN) Q
"RTN","RCTCSWL1",24,0)
 ..I $P(FILTERS(0),U,3)=1 I '$D(FILTERS(2,RCDFN)) Q
"RTN","RCTCSWL1",25,0)
 ..; Specific checks for each type of report
"RTN","RCTCSWL1",26,0)
 ..I RCRPT=1 I RCRTCDX'="B" Q  ;Bankruptcy Return Reason code B
"RTN","RCTCSWL1",27,0)
 ..I RCRPT=2 I RCRTCDX'="D" Q  ;Death Return Reason Code D
"RTN","RCTCSWL1",28,0)
 ..I RCRPT=3 I RCRTCDX'="Z" Q  ;Uncollectable Return Reason Code Z
"RTN","RCTCSWL1",29,0)
 ..I RCRPT=4 I RCRTCDX'="F" Q  ;Payment in Full - Return Reason Code = F
"RTN","RCTCSWL1",30,0)
 ..I RCRPT=5 I RCRTCDX'="P" Q  ;Satisfied PA - Return Reason Code = P, but nothing in Compromise Field
"RTN","RCTCSWL1",31,0)
 ..I RCRPT=6 I RCRTCDX'="S" Q  ;Compromise Field set to Y
"RTN","RCTCSWL1",32,0)
 ..I RCRPT=7 I RCRTCDX="" Q  ;Any Return Reason Code
"RTN","RCTCSWL1",33,0)
 ..D BLDTMP
"RTN","RCTCSWL1",34,0)
 Q
"RTN","RCTCSWL1",35,0)
 ;
"RTN","RCTCSWL1",36,0)
BLDTMP ; Build ^TMP("RCTCSWL",$J) for the main list screen
"RTN","RCTCSWL1",37,0)
 N A1,A2,PRCA3,DFN,RCBAL,RCBILLEX,RCNAME,RCPTID,RCRTRSN,RCLINE,VA,VADM,VAERR,TRTYP,RCBIND
"RTN","RCTCSWL1",38,0)
 I $D(RCDFN) D
"RTN","RCTCSWL1",39,0)
 . S DFN=RCDFN
"RTN","RCTCSWL1",40,0)
 . D DEM^VADPT
"RTN","RCTCSWL1",41,0)
 . I VAERR K VADM
"RTN","RCTCSWL1",42,0)
 . S RCNAME=VADM(1)
"RTN","RCTCSWL1",43,0)
 . S RCPTID=$E(RCNAME,1)_VA("BID")
"RTN","RCTCSWL1",44,0)
 S A1=$P(^RCD(340,RCDEBTOR,0),";",1),A2=$P($P(^(0),U,1),";",2),PRCA3=U_A2_A1_",0)",RCNAME=$S($D(@PRCA3):$P(^(0),U,1),1:"")
"RTN","RCTCSWL1",45,0)
 S RCBAL=$$GET1^DIQ(430,RCBILL_",",11)
"RTN","RCTCSWL1",46,0)
 S RCBILLEX=$P($G(^PRCA(430,RCBILL,0)),U,1)  ;External Bill Number
"RTN","RCTCSWL1",47,0)
 ; Set historical indicator "y" when returned from Treasury
"RTN","RCTCSWL1",48,0)
 I $D(^PRCA(430,"AN",RCDATE,RCBILL)) S RCBIND="y"
"RTN","RCTCSWL1",49,0)
 S RCLINE=$G(RCNAME)_U_$G(RCPTID)_U_$G(RCBAL)_U_$G(DFN)_U_$G(RCBIND)_$G(RCBILLEX)_U_RCDEBTOR_U_RCBILL_U_RCDATE_U_RCRTCDX
"RTN","RCTCSWL1",50,0)
 ; Sort by Patient Name
"RTN","RCTCSWL1",51,0)
 I SORTBY=1 S ^TMP("RCTCSWL",$J,RCNAME,RCBILLEX)=RCLINE
"RTN","RCTCSWL1",52,0)
 ; Sort by Bill Number
"RTN","RCTCSWL1",53,0)
 I SORTBY=2 S ^TMP("RCTCSWL",$J,RCBILLEX,RCNAME)=RCLINE
"RTN","RCTCSWL1",54,0)
 ; Sort by Return Reason Code
"RTN","RCTCSWL1",55,0)
 I SORTBY=3 S ^TMP("RCTCSWL",$J,RCRTCDX,RCBILLEX)=RCLINE
"RTN","RCTCSWL1",56,0)
 ;
"RTN","RCTCSWL1",57,0)
BLDWL ; Format main list screen data lines
"RTN","RCTCSWL1",58,0)
 ; build display lines
"RTN","RCTCSWL1",59,0)
 K ^TMP("RCTCSWLX",$J)
"RTN","RCTCSWL1",60,0)
 N RCBILL,RCBILLEX,RCDATE,RCDEBTOR,RCDFN,RCNAME,RCPATNAM,RCPTID,RCRRSN,RCXX,RCY,RCYY,FIRST,LINE,VCNT
"RTN","RCTCSWL1",61,0)
 S (VALMCNT,FIRST,VCNT)=0
"RTN","RCTCSWL1",62,0)
 S RCY="" F  S RCY=$O(^TMP("RCTCSWL",$J,RCY)) Q:RCY=""  D
"RTN","RCTCSWL1",63,0)
 .S RCYY="" F  S RCYY=$O(^TMP("RCTCSWL",$J,RCY,RCYY)) Q:RCYY=""  D
"RTN","RCTCSWL1",64,0)
 ..S VCNT=VCNT+1
"RTN","RCTCSWL1",65,0)
 ..S LINE=$$LJ^XLFSTR(VCNT,6) ;line #
"RTN","RCTCSWL1",66,0)
 ..S RCXX=^TMP("RCTCSWL",$J,RCY,RCYY)
"RTN","RCTCSWL1",67,0)
 ..S RCPATNAM=$P(RCXX,U)
"RTN","RCTCSWL1",68,0)
 ..S RCPTID=$P(RCXX,U,2)
"RTN","RCTCSWL1",69,0)
 ..S RCDFN=$P(RCXX,U,4)
"RTN","RCTCSWL1",70,0)
 ..S RCBILLEX=$P(RCXX,U,5)
"RTN","RCTCSWL1",71,0)
 ..S RCDEBTOR=$P(RCXX,U,6)
"RTN","RCTCSWL1",72,0)
 ..S RCBILL=$P(RCXX,U,7)
"RTN","RCTCSWL1",73,0)
 ..S RCDATE=$P(RCXX,U,8)
"RTN","RCTCSWL1",74,0)
 ..S RCRRSN=$P(RCXX,U,9)
"RTN","RCTCSWL1",75,0)
 ..I SORTBY=1 D
"RTN","RCTCSWL1",76,0)
 ...;Patient^Patient ID^Bill No.^Balance^Ret Rsn
"RTN","RCTCSWL1",77,0)
 ...S LINE=$$SETL(LINE,$P(RCXX,U),"",4,27)
"RTN","RCTCSWL1",78,0)
 ...S LINE=$$SETL(LINE,$P(RCXX,U,2),"",32,5)
"RTN","RCTCSWL1",79,0)
 ...S LINE=$$SETL(LINE,$P(RCXX,U,5),"",40,12)
"RTN","RCTCSWL1",80,0)
 ...S LINE=$$SETL(LINE,$J($P(RCXX,U,3),10,2),"",55,12)
"RTN","RCTCSWL1",81,0)
 ...S LINE=$$SETL(LINE,$P(RCXX,U,9),"",67,3)
"RTN","RCTCSWL1",82,0)
 ..I SORTBY=2 D
"RTN","RCTCSWL1",83,0)
 ...;Bill No.^Patient ID^Patient^Balance^Ret Rsn
"RTN","RCTCSWL1",84,0)
 ...S LINE=$$SETL(LINE,$P(RCXX,U,5),"",4,12)
"RTN","RCTCSWL1",85,0)
 ...S LINE=$$SETL(LINE,$P(RCXX,U,2),"",17,5)
"RTN","RCTCSWL1",86,0)
 ...S LINE=$$SETL(LINE,$P(RCXX,U),"",24,27)
"RTN","RCTCSWL1",87,0)
 ...S LINE=$$SETL(LINE,$J($P(RCXX,U,3),10,2),"",55,12)
"RTN","RCTCSWL1",88,0)
 ...S LINE=$$SETL(LINE,$P(RCXX,U,9),"",67,3)
"RTN","RCTCSWL1",89,0)
 ..I SORTBY=3 D
"RTN","RCTCSWL1",90,0)
 ...;Ret Rsn^Bill No.^Pt ID^Patient^Balance  
"RTN","RCTCSWL1",91,0)
 ...S LINE=$$SETL(LINE,$P(RCXX,U,9),"",4,7)
"RTN","RCTCSWL1",92,0)
 ...S LINE=$$SETL(LINE,$P(RCXX,U,5),"",12,12)
"RTN","RCTCSWL1",93,0)
 ...S LINE=$$SETL(LINE,$P(RCXX,U,2),"",25,5)
"RTN","RCTCSWL1",94,0)
 ...S LINE=$$SETL(LINE,$P(RCXX,U),"",32,27)
"RTN","RCTCSWL1",95,0)
 ...S LINE=$$SETL(LINE,$J($P(RCXX,U,2),10,2),"",64,12)
"RTN","RCTCSWL1",96,0)
 ..S VALMCNT=VALMCNT+1
"RTN","RCTCSWL1",97,0)
 ..D SET^VALM10(VALMCNT,LINE,VCNT)
"RTN","RCTCSWL1",98,0)
 ..S ^TMP("RCTCSWLX",$J,VCNT)=RCDFN_U_RCPATNAM_U_RCPTID_U_RCDEBTOR_U_RCBILL_U_RCBILLEX_U_RCDATE_U_RCRRSN  ;This is set for ACTIONS
"RTN","RCTCSWL1",99,0)
 Q
"RTN","RCTCSWL1",100,0)
 ;
"RTN","RCTCSWL1",101,0)
SETL(LINE,DATA,LABEL,COL,LNG) ; Creates a line of data to be set into the body
"RTN","RCTCSWL1",102,0)
 ; of the worklist
"RTN","RCTCSWL1",103,0)
 ; Input: LINE - Current line being created
"RTN","RCTCSWL1",104,0)
 ; DATA - Information to be added to the end of the current line
"RTN","RCTCSWL1",105,0)
 ; LABEL - Label to describe the information being added
"RTN","RCTCSWL1",106,0)
 ; COL - Column position in line to add information add
"RTN","RCTCSWL1",107,0)
 ; LNG - Maximum length of data information to include on the line
"RTN","RCTCSWL1",108,0)
 ; Returns: Line updated with added information
"RTN","RCTCSWL1",109,0)
 S LINE=LINE_$J("",(COL-$L(LABEL)-$L(LINE)))_LABEL_$E(DATA,1,LNG)
"RTN","RCTCSWL1",110,0)
 Q LINE
"RTN","RCTCSWL1",111,0)
 ;
"RTN","RCTCSWL1",112,0)
EXCEL ;Format and Print EXCEL file
"RTN","RCTCSWL1",113,0)
 W @IOF
"RTN","RCTCSWL1",114,0)
 N RCX,RCXX,RCY,RCYY,RCZ,RCAMT
"RTN","RCTCSWL1",115,0)
 S RCX=$P(FILTERS(0),U,1)
"RTN","RCTCSWL1",116,0)
 S RCXX=$S(RCX=1:"Bankruptcy",RCX=2:"Deaths",RCX=3:"Uncollectible",RCX=4:"Payment in Full",1:"")
"RTN","RCTCSWL1",117,0)
 I $G(RCXX)="" S RCXX=$S(RCX=5:"Satisfied PA",RCX=6:"Compromise",RCX=7:"All Returns",1:"")
"RTN","RCTCSWL1",118,0)
 W !,RCXX_" Report"
"RTN","RCTCSWL1",119,0)
 I SORTBY=1 W !,"Patient Name^Patient ID^Bill Number^Current Amount^Rt Rsn Code"
"RTN","RCTCSWL1",120,0)
 I SORTBY=2 W !,"Bill Number^Patient ID^Patient Name^Current Amount^Rt Rsn Code"
"RTN","RCTCSWL1",121,0)
 I SORTBY=3 W !,"Rt Rsn Code^Bill Number^Patient ID^Patient Name^Current Amount"
"RTN","RCTCSWL1",122,0)
 S RCY="" F  S RCY=$O(^TMP("RCTCSWL",$J,RCY)) Q:RCY=""  D
"RTN","RCTCSWL1",123,0)
 .S RCYY="" F  S RCYY=$O(^TMP("RCTCSWL",$J,RCY,RCYY)) Q:RCYY=""  D
"RTN","RCTCSWL1",124,0)
 ..S RCZ=^TMP("RCTCSWL",$J,RCY,RCYY)
"RTN","RCTCSWL1",125,0)
 ..;Reformat Excel line, based upon sort
"RTN","RCTCSWL1",126,0)
 ..;Input from RCZ: PtName_U_PtID_U_CurBal_U_DFN_U_Bill No_U_Debtor_U_InternalBill_U_Date_U_ReturnReasonCode
"RTN","RCTCSWL1",127,0)
 ..S RCAMT=$P(RCZ,U,3)
"RTN","RCTCSWL1",128,0)
 ..I RCAMT="" S RCAMT=0
"RTN","RCTCSWL1",129,0)
 ..S RCAMT=$J(RCAMT,10,2)
"RTN","RCTCSWL1",130,0)
 ..I SORTBY=1 W !,$P(RCZ,U)_"^",$P(RCZ,U,2)_"^"_$P(RCZ,U,5)_"^"_RCAMT_"^"_$P(RCZ,U,9)
"RTN","RCTCSWL1",131,0)
 ..I SORTBY=2 W !,$P(RCZ,U,5)_"^",$P(RCZ,U,2)_"^"_$P(RCZ,U)_"^"_RCAMT_"^"_$P(RCZ,U,9)
"RTN","RCTCSWL1",132,0)
 ..I SORTBY=3 W !,$P(RCZ,U,9)_"^",$P(RCZ,U,5)_"^"_$P(RCZ,U,2)_"^"_$P(RCZ,U)_"^"_RCAMT
"RTN","RCTCSWL1",133,0)
 I $E(IOST,1,2)="C-",'EXCEL R !!,"END OF REPORT...PRESS RETURN TO CONTINUE",X:DTIME W @IOF
"RTN","RCTCSWL1",134,0)
 D:'$D(ZTQUEUED) ^%ZISC
"RTN","RCTCSWL1",135,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","RCTCSWL1",136,0)
 K IOP,%ZIS,ZTQUEUED
"RTN","RCTCSWL1",137,0)
 Q
"RTN","RCTCSWL1",138,0)
 ;
"RTN","RCTCSWL1",139,0)
 ;RCDIV() N DIC,DIR,DIRUT,DTOUT,DUOUT,X,Y
"RTN","RCTCSWL1",140,0)
 ;
"RTN","RCTCSWL1",141,0)
 ;Reset RCDIV array
"RTN","RCTCSWL1",142,0)
 K RCDIV
"RTN","RCTCSWL1",143,0)
 ;
"RTN","RCTCSWL1",144,0)
 ;First see if they want to enter individual divisions or ALL
"RTN","RCTCSWL1",145,0)
 S DIR(0)="S^D:DIVISION;A:ALL"
"RTN","RCTCSWL1",146,0)
 S DIR("A")="Select Certain (D)ivisions or (A)LL"
"RTN","RCTCSWL1",147,0)
 S DIR("L",1)="Select one of the following:"
"RTN","RCTCSWL1",148,0)
 S DIR("L",2)=""
"RTN","RCTCSWL1",149,0)
 S DIR("L",3)="     D         DIVISION"
"RTN","RCTCSWL1",150,0)
 S DIR("L",4)="     A         ALL"
"RTN","RCTCSWL1",151,0)
 D ^DIR K DIR
"RTN","RCTCSWL1",152,0)
 ;
"RTN","RCTCSWL1",153,0)
 ;Check for "^" or timeout, otherwise define BPPHARM
"RTN","RCTCSWL1",154,0)
 I ($G(DUOUT)=1)!($G(DTOUT)=1) S Y="^"
"RTN","RCTCSWL1",155,0)
 E  S RCDIV=$S(Y="A":0,1:1)
"RTN","RCTCSWL1",156,0)
 ;
"RTN","RCTCSWL1",157,0)
 ;If division selected, ask prompt
"RTN","RCTCSWL1",158,0)
 I $G(RCDIV)=1 F  D  Q:Y="^"!(Y="") 
"RTN","RCTCSWL1",159,0)
 .;
"RTN","RCTCSWL1",160,0)
 .;Prompt for entry
"RTN","RCTCSWL1",161,0)
 .K X S DIC(0)="QEAM",DIC=40.8,DIC("A")="Select Division(s): "
"RTN","RCTCSWL1",162,0)
 .W ! D ^DIC
"RTN","RCTCSWL1",163,0)
 .;
"RTN","RCTCSWL1",164,0)
 .;Check for "^" or timeout 
"RTN","RCTCSWL1",165,0)
 .I ($G(DUOUT)=1)!($G(DTOUT)=1) K RCDIV S Y="^" Q
"RTN","RCTCSWL1",166,0)
 .;
"RTN","RCTCSWL1",167,0)
 .;Check for blank entry, quit if no previous selections
"RTN","RCTCSWL1",168,0)
 .I $G(X)="" S Y=$S($D(RCDIV)>9:"",1:"^") K:Y="^" RCDIV Q
"RTN","RCTCSWL1",169,0)
 .;
"RTN","RCTCSWL1",170,0)
 .;Handle Deletes
"RTN","RCTCSWL1",171,0)
 .I $D(RCDIV(+Y)) D  Q:Y="^"  I 1
"RTN","RCTCSWL1",172,0)
 ..N P
"RTN","RCTCSWL1",173,0)
 ..S P=Y  ;Save Original Value
"RTN","RCTCSWL1",174,0)
 ..S DIR(0)="S^Y:YES;N:NO",DIR("A")="Delete "_$P(P,U,2)_" from your list?"
"RTN","RCTCSWL1",175,0)
 ..S DIR("B")="NO" D ^DIR
"RTN","RCTCSWL1",176,0)
 ..I ($G(DUOUT)=1)!($G(DTOUT)=1) K RCDIV S Y="^" Q
"RTN","RCTCSWL1",177,0)
 ..I Y="Y" K RCDIV(+P),RCDIV("B",$P(P,U,2),+P)
"RTN","RCTCSWL1",178,0)
 ..S Y=P  ;Restore Original Value
"RTN","RCTCSWL1",179,0)
 ..K P
"RTN","RCTCSWL1",180,0)
 .E  D
"RTN","RCTCSWL1",181,0)
 ..;Define new entries in RCDIV array
"RTN","RCTCSWL1",182,0)
 ..S VAUTD(+Y)=Y
"RTN","RCTCSWL1",183,0)
 ..S RCDIV("B",$P(Y,U,2),+Y)=""
"RTN","RCTCSWL1",184,0)
 .;
"RTN","RCTCSWL1",185,0)
 .;Display a list of selected divisions
"RTN","RCTCSWL1",186,0)
 .I $D(RCDIV)>9 D
"RTN","RCTCSWL1",187,0)
 ..N X
"RTN","RCTCSWL1",188,0)
 ..W !,?2,"Selected:"
"RTN","RCTCSWL1",189,0)
 ..S X="" F  S X=$O(RCDIV("B",X)) Q:X=""  W !,?10,X
"RTN","RCTCSWL1",190,0)
 ..K X
"RTN","RCTCSWL1",191,0)
 .Q
"RTN","RCTCSWL1",192,0)
 ;
"RTN","RCTCSWL1",193,0)
 K RCDIV("B")
"RTN","RCTCSWL1",194,0)
 Q Y
"RTN","RCTCSWL1",195,0)
 ;
"RTN","RCTCSWL1",196,0)
CSTOP(BILL) ;
"RTN","RCTCSWL1",197,0)
 ; Input:
"RTN","RCTCSWL1",198,0)
 ; BILL - Bill number from #430 - External Value (.01), not IEN
"RTN","RCTCSWL1",199,0)
 ; Output:
"RTN","RCTCSWL1",200,0)
 ; CSTOP - Cross-serviced status (blank = not found, 0 = not stopped, 1 = stopped)
"RTN","RCTCSWL1",201,0)
 ;
"RTN","RCTCSWL1",202,0)
 N CSTOP,IEN
"RTN","RCTCSWL1",203,0)
 I BILL="" Q ""  ;no bill #
"RTN","RCTCSWL1",204,0)
 I '$D(^PRCA(430,"TCSP",BILL)) Q ""
"RTN","RCTCSWL1",205,0)
 S CSTOP=$$GET1^DIQ(430,BILL,"157,","IE")
"RTN","RCTCSWL1",206,0)
 Q CSTOP
"RTN","RCTCSWL2")
0^29^B22529907^n/a
"RTN","RCTCSWL2",1,0)
RCTCSWL2 ;ALB/PAW-Cross Servicing Worklist ;30-SEP-2015
"RTN","RCTCSWL2",2,0)
 ;;4.5;ACCOUNTS RECEIVABLE;**315**;Mar 20, 1995;Build 67
"RTN","RCTCSWL2",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTCSWL2",4,0)
 ; 
"RTN","RCTCSWL2",5,0)
HDR ; -- header code for Expand Screen
"RTN","RCTCSWL2",6,0)
 N RCNAM,RCDFN,RCPTNAME,RCPTID,RCBILL,RCBILLEX,RCBDT,RCDOD2,RCX,LIST
"RTN","RCTCSWL2",7,0)
 S RCDFN=$P(ECNT,U,1),RCPTNAME=$P(ECNT,U,2),RCPTID=$P(ECNT,U,3),RCBILL=$P(ECNT,U,4),RCBILLEX=$P(ECNT,U,6)
"RTN","RCTCSWL2",8,0)
 S RCX=$P(FILTERS(0),U)
"RTN","RCTCSWL2",9,0)
 S VALMHDR(1)=$S(RCX=1:"Bankruptcy",RCX=2:"Deaths",RCX=3:"Uncollectible",RCX=4:"Paymt. in Full",RCX=5:"Satisfied PA",RCX=6:"Compromise",RCX=7:"All Returns",1:"")
"RTN","RCTCSWL2",10,0)
 S VALM("TITLE")="Expanded Bill Screen"
"RTN","RCTCSWL2",11,0)
 D
"RTN","RCTCSWL2",12,0)
 . I RCX[7 S VALMHDR(1)="Reconciliation "_VALMHDR(1)_" Report" Q
"RTN","RCTCSWL2",13,0)
 . ;I RCX'[7 S VALMHDR(1)="Reconciliation Reports Selected: "_$P(RCX,",",$TR(1,"Bankruptcy"))_", "_$TR(2,"Deaths")_", "_$TR(3,"Uncollectible")_", "_$TR(4,"Payment in Full")_", "_$TR(5,"Satisfied PA")_", "_$TR(6,"Compromise")
"RTN","RCTCSWL2",14,0)
 . N X S X="" F I=1:1:6 I RCX[I S X=X_$S(X="":"",1:", "),X=X_$S(I=1:"Bankruptcy",I=2:"Deaths",I=3:"Uncollectbl.",I=4:"Pmt. In Full",I=5:"Satisfied PA",I=6:"Compromise",1:"")
"RTN","RCTCSWL2",15,0)
 . S VALMHDR(1)="Types: "_X
"RTN","RCTCSWL2",16,0)
 S VALMHDR(2)="Bill Number: "_RCBILLEX
"RTN","RCTCSWL2",17,0)
 Q
"RTN","RCTCSWL2",18,0)
 ;
"RTN","RCTCSWL2",19,0)
INIT ; -- init variables and list array
"RTN","RCTCSWL2",20,0)
 ; input - ^TMP("RCTCSWE",$J)=RCDFN^RCNAME
"RTN","RCTCSWL2",21,0)
 ; output - Expanded worklist screen
"RTN","RCTCSWL2",22,0)
 I '$D(^TMP("RCTCSWE",$J)) Q
"RTN","RCTCSWL2",23,0)
 N ECNT,RCDFN,RCDFN2,RCPTNAME,RCPTID,RCBILL,RCBILLEX,VALMBCK
"RTN","RCTCSWL2",24,0)
 S ECNT=$G(^TMP("RCTCSWE",$J))
"RTN","RCTCSWL2",25,0)
 S RCDFN=$P(ECNT,U,1),RCPTNAME=$P(ECNT,U,2),RCPTID=$P(ECNT,U,3),RCBILL=$P(ECNT,U,4),RCBILLEX=$P(ECNT,U,5)
"RTN","RCTCSWL2",26,0)
 S RCDFN2=RCDFN
"RTN","RCTCSWL2",27,0)
 I RCDFN2="" S RCDFN2=" "
"RTN","RCTCSWL2",28,0)
 D BLD
"RTN","RCTCSWL2",29,0)
 D BLDEXP
"RTN","RCTCSWL2",30,0)
 S VALMBCK="R"
"RTN","RCTCSWL2",31,0)
 Q
"RTN","RCTCSWL2",32,0)
 ;
"RTN","RCTCSWL2",33,0)
BLD ; build data to display
"RTN","RCTCSWL2",34,0)
 N CNT,RCAMTPD,RCAMTRF,RCDEBT,RCBDT,RCDTRET,RCCORDT,RCDOD,RCFEE,RCRSN,RCDEBT,RCDIV,RCDIVNM,RCSTNUM,RC18
"RTN","RCTCSWL2",35,0)
 N CBEGDT,RCCOMP,RCDDT,RCBEGDT
"RTN","RCTCSWL2",36,0)
 S CNT=0
"RTN","RCTCSWL2",37,0)
 S RCDEBT=$E($$GET1^DIQ(430,RCBILL,9),1,16)
"RTN","RCTCSWL2",38,0)
 S RCDIV=$P(RCBILLEX,"-")
"RTN","RCTCSWL2",39,0)
 I RCDIV["y" S RCDIV=$P(RCDIV,"y",2)
"RTN","RCTCSWL2",40,0)
 S RCDIVNM=""
"RTN","RCTCSWL2",41,0)
 S RCDIVNM=$O(^DIC(4,"D",RCDIV,RCDIVNM))
"RTN","RCTCSWL2",42,0)
 I $G(RCDIVNM)'="" S RCDIVNM=$P(^DIC(4,RCDIVNM,0),U)
"RTN","RCTCSWL2",43,0)
 I RCBILLEX'["-" S RCDIV=""
"RTN","RCTCSWL2",44,0)
 S RCRSN=+$P($G(^PRCA(430,RCBILL,30)),U,2)
"RTN","RCTCSWL2",45,0)
 I RCRSN'="" S RCRSN=$P(^PRCA(430.5,RCRSN,0),U,2)
"RTN","RCTCSWL2",46,0)
 S RCAMTRF=$J($P($G(^PRCA(430,RCBILL,16)),U,9),10,2)
"RTN","RCTCSWL2",47,0)
 S RCAMTPD=RCAMTRF-$P($G(^PRCA(430,RCBILL,16)),U,10),RCAMTPD=$J(RCAMTPD,10,2)
"RTN","RCTCSWL2",48,0)
 S RCFEE=$J($P($G(^PRCA(430,RCBILL,7)),U,4),10,2)
"RTN","RCTCSWL2",49,0)
 S RCCORDT=$$FMTE^XLFDT($P($G(^PRCA(430,RCBILL,15)),U,3),"5DZ")
"RTN","RCTCSWL2",50,0)
 S RCBEGDT=$$FMTE^XLFDT($P($G(^PRCA(430,RCBILL,0)),U,10),"5DZ")
"RTN","RCTCSWL2",51,0)
 S RCDTRET=$$FMTE^XLFDT($P($G(^PRCA(430,RCBILL,30)),U),"5DZ")
"RTN","RCTCSWL2",52,0)
 S CNT=CNT+1,^TMP("RCTCSWE",$J,RCNAME,RCDFN2,CNT)=" Patient          : "_RCPTNAME_" (ID: "_RCPTID_")"
"RTN","RCTCSWL2",53,0)
 S CNT=CNT+1,^TMP("RCTCSWE",$J,RCNAME,RCDFN2,CNT)=" Debtor           : "_RCDEBT
"RTN","RCTCSWL2",54,0)
 S CNT=CNT+1,^TMP("RCTCSWE",$J,RCNAME,RCDFN2,CNT)=" Division         : "_$G(RCDIV)_" - "_$G(RCDIVNM)
"RTN","RCTCSWL2",55,0)
 S CNT=CNT+1,^TMP("RCTCSWE",$J,RCNAME,RCDFN2,CNT)=" Return Resn Code : "_$G(RCRSN)
"RTN","RCTCSWL2",56,0)
 S CNT=CNT+1,^TMP("RCTCSWE",$J,RCNAME,RCDFN2,CNT)=" Dt Bill Created  : "_$G(RCBEGDT)
"RTN","RCTCSWL2",57,0)
 S CNT=CNT+1,^TMP("RCTCSWE",$J,RCNAME,RCDFN2,CNT)=" Date Corr Rep/Rec: "_$G(RCCORDT)
"RTN","RCTCSWL2",58,0)
 S CNT=CNT+1,^TMP("RCTCSWE",$J,RCNAME,RCDFN2,CNT)=" Date Returned    : "_$G(RCDTRET)
"RTN","RCTCSWL2",59,0)
 S RCBDT=$$FMTE^XLFDT($P($G(^PRCA(430,RCBILL,30)),U,6),"5DZ")  ;Get Bankruptcy Date
"RTN","RCTCSWL2",60,0)
 S RCDDT=$$FMTE^XLFDT($P($G(^PRCA(430,RCBILL,30)),U,8),"5DZ")  ;Get Dissolution Date
"RTN","RCTCSWL2",61,0)
 S CNT=CNT+1,^TMP("RCTCSWE",$J,RCNAME,RCDFN2,CNT)=" Bankruptcy Date  : "_RCBDT
"RTN","RCTCSWL2",62,0)
 S CNT=CNT+1,^TMP("RCTCSWE",$J,RCNAME,RCDFN2,CNT)=" Dt of Dissolution: "_RCDDT
"RTN","RCTCSWL2",63,0)
 S RCDOD=$$FMTE^XLFDT($P($G(^PRCA(430,RCBILL,30)),U,7),"5DZ")
"RTN","RCTCSWL2",64,0)
 S CNT=CNT+1,^TMP("RCTCSWE",$J,RCNAME,RCDFN2,CNT)=" Death Notice Rcvd: "_RCDOD
"RTN","RCTCSWL2",65,0)
 S CNT=CNT+1,^TMP("RCTCSWE",$J,RCNAME,RCDFN2,CNT)=" Amount Referred  : "_$G(RCAMTRF)
"RTN","RCTCSWL2",66,0)
 S CNT=CNT+1,^TMP("RCTCSWE",$J,RCNAME,RCDFN2,CNT)=" Amount Paid      : "_$G(RCAMTPD)
"RTN","RCTCSWL2",67,0)
 S CNT=CNT+1,^TMP("RCTCSWE",$J,RCNAME,RCDFN2,CNT)=" Fees             : "_$G(RCFEE)
"RTN","RCTCSWL2",68,0)
 S RCCOMP=$J($P($G(^PRCA(430,RCBILL,30)),U,4),10,2)
"RTN","RCTCSWL2",69,0)
 S CNT=CNT+1,^TMP("RCTCSWE",$J,RCNAME,RCDFN2,CNT)=" Compromise Amount: "_RCCOMP
"RTN","RCTCSWL2",70,0)
 Q
"RTN","RCTCSWL2",71,0)
 ;
"RTN","RCTCSWL2",72,0)
BLDEXP ; Build expand screen 
"RTN","RCTCSWL2",73,0)
 D FULL^VALM1
"RTN","RCTCSWL2",74,0)
 N VALMCNT,RCXX,LINE
"RTN","RCTCSWL2",75,0)
 S VALMCNT=0
"RTN","RCTCSWL2",76,0)
 S RCXX=""
"RTN","RCTCSWL2",77,0)
 F  S RCXX=$O(^TMP("RCTCSWE",$J,RCNAME,RCDFN2,RCXX)) Q:+RCXX=0  D
"RTN","RCTCSWL2",78,0)
 . S LINE=^TMP("RCTCSWE",$J,RCNAME,RCDFN2,RCXX)
"RTN","RCTCSWL2",79,0)
 . S VALMCNT=VALMCNT+1
"RTN","RCTCSWL2",80,0)
 . D SET^VALM10(VALMCNT,LINE,"")
"RTN","RCTCSWL2",81,0)
 S VALMCNT=VALMCNT+1
"RTN","RCTCSWL2",82,0)
 Q
"RTN","RCTCSWL2",83,0)
 ; 
"RTN","RCTCSWL2",84,0)
HELP ; -- help code
"RTN","RCTCSWL2",85,0)
 N X
"RTN","RCTCSWL2",86,0)
 S X="?" D DISP^XQORM1 W !!
"RTN","RCTCSWL2",87,0)
 Q
"RTN","RCTCSWL2",88,0)
 ;
"RTN","RCTCSWL2",89,0)
EXIT ; -- exit code
"RTN","RCTCSWL2",90,0)
 K ^TMP("RCTCSWE",$J)
"RTN","RCTCSWL2",91,0)
 D ^%ZISC
"RTN","RCTCSWL2",92,0)
 S VALMBCK="R" Q
"RTN","RCTCSWL2",93,0)
 Q
"RTN","RCTOPD")
0^43^B71556644^B70123756
"RTN","RCTOPD",1,0)
RCTOPD ;WASH IRMFO@ALTOONA,PA/TJK-TOP TRANSMISSION ;2/11/00 3:34 PM
"RTN","RCTOPD",2,0)
V ;;4.5;Accounts Receivable;**141,187,224,236,229,301,315**;Mar 20, 1995;Build 67
"RTN","RCTOPD",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTOPD",4,0)
ENTER ;Entry point from nightly process
"RTN","RCTOPD",5,0)
 Q:'$D(RCDOC)
"RTN","RCTOPD",6,0)
 N DEBTOR,BILL,DEBTOR0,B0,B6,B7,P121DT,PRIN,INT,ADMIN,B4  ;PRCA*4.5*315 - P181Dt change to P121DT - FY16 HAPE RRE [TOPS]
"RTN","RCTOPD",7,0)
 N EFFDT,DFN,CNTR,SITE,LN,FN,MN,DOB,SITE,F60DT,VADM,DEBTOR4,DEBTOR6
"RTN","RCTOPD",8,0)
 N PHONE,QUIT,TOTAL,ZIPCODE,FULLNM,RCNT,REPAY,X1,X2
"RTN","RCTOPD",9,0)
 N ERROR,ADDR,CAT,BILLDT,P10YDT,CURRTOT,HOLD,SITECD,RCNEW,ACTDT
"RTN","RCTOPD",10,0)
 ;
"RTN","RCTOPD",11,0)
 ;initialize temporary global, variables
"RTN","RCTOPD",12,0)
 ;
"RTN","RCTOPD",13,0)
 K ^XTMP("RCTOPD") S ^XTMP("RCTOPD",0)=$$FMADD^XLFDT(DT,5)_"^"_DT   ;PRCA*4.5*315 Allow global to be purged in 5 days
"RTN","RCTOPD",14,0)
 S SITE=$E($$SITE^RCMSITE(),1,3),SITECD=$P(^RC(342,1,3),U,5)
"RTN","RCTOPD",15,0)
 S X1=DT,X2=-121 D C^%DTC S (P121DT,EFFDT)=X  ; PRCA*4.5*315 - FY16 HAPE RRE [TOPS] - change -181 to -121 (120 vs 180 days)
"RTN","RCTOPD",16,0)
 S X1=DT,X2=-3650 D C^%DTC S P10YDT=X
"RTN","RCTOPD",17,0)
 S X1=DT,X2=+60 D C^%DTC S F60DT=X
"RTN","RCTOPD",18,0)
 S ACTDT=3150801 ;activation date for all sites except beckley, little rock, upstate ny 
"RTN","RCTOPD",19,0)
 S:SITE=598 ACTDT=3150201 ;activation date for little rock
"RTN","RCTOPD",20,0)
 S:SITE=517 ACTDT=3150201 ;activation date for beckley
"RTN","RCTOPD",21,0)
 S:SITE=528 ACTDT=3150201 ;activation date for upstate ny
"RTN","RCTOPD",22,0)
 S (CNTR(1),CNTR(2),CNTR(4),DEBTOR,RCNT)=0
"RTN","RCTOPD",23,0)
 ;
"RTN","RCTOPD",24,0)
 ;branch if recertification document
"RTN","RCTOPD",25,0)
 I RCDOC="Y" D RECERT G EXIT
"RTN","RCTOPD",26,0)
 ;
"RTN","RCTOPD",27,0)
 ;branch to do update documents
"RTN","RCTOPD",28,0)
 D UPDATE I RCDOC="U" G EXIT
"RTN","RCTOPD",29,0)
 ;
"RTN","RCTOPD",30,0)
 ;master sheet compilation
"RTN","RCTOPD",31,0)
 ;
"RTN","RCTOPD",32,0)
 F  S DEBTOR=$O(^PRCA(430,"C",DEBTOR)) Q:DEBTOR'?1N.N  D
"RTN","RCTOPD",33,0)
 .N X,RCDFN
"RTN","RCTOPD",34,0)
 .S RCDFN=$G(^RCD(340,DEBTOR,0))
"RTN","RCTOPD",35,0)
 .I $P(RCDFN,";",2)["DPT",$$EMERES^PRCAUTL(+RCDFN)]"" Q  ;stop the master sheet compilation for hurricane Katrina sites (patients)
"RTN","RCTOPD",36,0)
    .Q:$D(^RCD(340,"TOP",DEBTOR))
"RTN","RCTOPD",37,0)
    .; quit if debtor address marked unknown
"RTN","RCTOPD",38,0)
    .Q:$P($G(^RCD(340,+DEBTOR,1)),"^",9)=1
"RTN","RCTOPD",39,0)
    .S DEBTOR6=$G(^RCD(340,DEBTOR,6)),DEBTOR0=$G(^(0)),HOLD=0,RCNEW=1
"RTN","RCTOPD",40,0)
    .I $P(DEBTOR6,U,2),'$P(DEBTOR6,U,3) Q
"RTN","RCTOPD",41,0)
    .S QUIT=1,FILE=$$FILE(DEBTOR0) Q:'FILE
"RTN","RCTOPD",42,0)
    .S EFFDT=P121DT
"RTN","RCTOPD",43,0)
    .D PROC(DEBTOR,.QUIT,FILE,.HOLD,.EFFDT) Q:QUIT
"RTN","RCTOPD",44,0)
    .D EN1^RCTOP2(DEBTOR,"M",FILE)
"RTN","RCTOPD",45,0)
    .D EN1^RCTOP1(DEBTOR,TOTAL,"M",EFFDT,0,FILE)
"RTN","RCTOPD",46,0)
    .;set hold date in file for employee, ex-employee, vendor records
"RTN","RCTOPD",47,0)
    .;Austin holds these for 60 days before transmitting to TOP
"RTN","RCTOPD",48,0)
    .I $G(HOLD) S $P(^RCD(340,DEBTOR,6),U,6)=F60DT
"RTN","RCTOPD",49,0)
    .Q
"RTN","RCTOPD",50,0)
 ;compile documents into mail messages--sets referral date in 430
"RTN","RCTOPD",51,0)
 D COMPILE
"RTN","RCTOPD",52,0)
EXIT K RCDOC,^XTMP("RCTOPD"),^TMP("RCTOPD"),XMDUZ D KVAR^VADPT
"RTN","RCTOPD",53,0)
 Q
"RTN","RCTOPD",54,0)
 ;
"RTN","RCTOPD",55,0)
UPDATE ;weekly update compilation
"RTN","RCTOPD",56,0)
 F  S DEBTOR=$O(^RCD(340,"TOP",DEBTOR)) Q:DEBTOR'?1N.N  D
"RTN","RCTOPD",57,0)
    .S QUIT=1,DEBTOR0=^RCD(340,DEBTOR,0),DEBTOR6=^(6),DEBTOR4=^(4),FILE=$$FILE(DEBTOR0),EFFDT=$P(DEBTOR4,U,6),RCNEW=0
"RTN","RCTOPD",58,0)
    .D EN1^RCTOP2(DEBTOR,"U",FILE)
"RTN","RCTOPD",59,0)
    .D PROC(DEBTOR,.QUIT,FILE,0,.EFFDT) I QUIT D  Q
"RTN","RCTOPD",60,0)
       ..;process type 4 document if necessary
"RTN","RCTOPD",61,0)
       ..S TAXID=$$TAXID^RCTOP1(DEBTOR,FILE),OTAXID=$P(DEBTOR4,U)
"RTN","RCTOPD",62,0)
       ..S NAME=$$NAME^RCTOP1(+DEBTOR0,FILE),ONAME=$P(DEBTOR4,U,2),NAME=$P(NAME,U)
"RTN","RCTOPD",63,0)
       ..I NAME=ONAME,TAXID=OTAXID Q
"RTN","RCTOPD",64,0)
       ..D EN1^RCTOP4(NAME,TAXID,DEBTOR4,DEBTOR,FILE)
"RTN","RCTOPD",65,0)
       ..Q
"RTN","RCTOPD",66,0)
    .D EN1^RCTOP1(DEBTOR,TOTAL,"U",EFFDT,0,FILE)
"RTN","RCTOPD",67,0)
    .Q
"RTN","RCTOPD",68,0)
 ;refund/refund reversal documents
"RTN","RCTOPD",69,0)
 D REFDOC
"RTN","RCTOPD",70,0)
 ;compile documents into mail messages--sets referral date in 430
"RTN","RCTOPD",71,0)
 D:$G(RCDOC)="U" COMPILE
"RTN","RCTOPD",72,0)
 Q
"RTN","RCTOPD",73,0)
 ;
"RTN","RCTOPD",74,0)
RECERT ;send yearly recertification documents
"RTN","RCTOPD",75,0)
 F  S DEBTOR=$O(^RCD(340,"TOP",DEBTOR)) Q:DEBTOR'?1N.N  D
"RTN","RCTOPD",76,0)
    .S DEBTOR4=$G(^RCD(340,DEBTOR,4)),TOTAL=$P(DEBTOR4,U,3),EFFDT=$P(DEBTOR4,U,6),DEBTOR0=$G(^(0)),FILE=$$FILE(DEBTOR0)
"RTN","RCTOPD",77,0)
    .I TOTAL D EN1^RCTOP1(DEBTOR,TOTAL,"Y",EFFDT,0,FILE)
"RTN","RCTOPD",78,0)
    .Q
"RTN","RCTOPD",79,0)
 ;compile documents into mail messages
"RTN","RCTOPD",80,0)
 D COMPILE
"RTN","RCTOPD",81,0)
 Q
"RTN","RCTOPD",82,0)
 ;
"RTN","RCTOPD",83,0)
REFDOC ; refund, refund reversal documents
"RTN","RCTOPD",84,0)
 N CODE,BILL,DEBTOR,TOTAL,EFFDT,FILE,RFCODE
"RTN","RCTOPD",85,0)
 F RFCODE=1,3 S CODE=$S(RFCODE=1:"R",1:"RV") D
"RTN","RCTOPD",86,0)
    .S BILL=0 F  S BILL=$O(^PRCA(430,"TREF",RFCODE,BILL)) Q:'BILL  D
"RTN","RCTOPD",87,0)
       ..S DEBTOR=$P($G(^PRCA(430,BILL,0)),U,9) Q:'DEBTOR
"RTN","RCTOPD",88,0)
       ..S TOTAL=$P($G(^(7)),U,18) Q:'TOTAL  ;NAKED TO LINE ABOVE
"RTN","RCTOPD",89,0)
       ..S EFFDT=$P($G(^RCD(340,+DEBTOR,4)),U,6),FILE=$$FILE(^(0))
"RTN","RCTOPD",90,0)
       ..D EN1^RCTOP1(DEBTOR,TOTAL,CODE,EFFDT,BILL,FILE)
"RTN","RCTOPD",91,0)
      ..Q
"RTN","RCTOPD",92,0)
    .Q
"RTN","RCTOPD",93,0)
 Q
"RTN","RCTOPD",94,0)
 ;
"RTN","RCTOPD",95,0)
COMPILE ;compiles documents into mail messages and transmits them
"RTN","RCTOPD",96,0)
 ;builds message array
"RTN","RCTOPD",97,0)
 N CNT,SEQ,REC,XMDUZ,DOCTYPE,LRTYPE,XMSUB,XMTEXT,XMY,TSEQ,DOCAMT
"RTN","RCTOPD",98,0)
 S (SEQ,TSEQ)=0
"RTN","RCTOPD",99,0)
 F I=1,2,4 S TSEQ=TSEQ+($G(CNTR(I))\150)+$S($G(CNTR(I))#150:1,1:0)
"RTN","RCTOPD",100,0)
 F DOCTYPE=1,2,4 D:$D(^XTMP("RCTOPD",$J,DOCTYPE)) COMPILE1(DOCTYPE,CNTR(DOCTYPE))
"RTN","RCTOPD",101,0)
 D USRMSG
"RTN","RCTOPD",102,0)
 Q
"RTN","RCTOPD",103,0)
COMPILE1(DOCTYPE,CNTR) ; compiles each type of document separately
"RTN","RCTOPD",104,0)
 S RCNT=RCNT+CNTR
"RTN","RCTOPD",105,0)
 I '$G(LRTYPE) F I=1,2,4 S:$D(^XTMP("RCTOPD",$J,I)) LRTYPE=I
"RTN","RCTOPD",106,0)
 F CNT=1:1:CNTR D
"RTN","RCTOPD",107,0)
    .D:CNT#150=1
"RTN","RCTOPD",108,0)
       ..K ^XTMP("RCTOPD",$J,"BUILD") S SEQ=SEQ+1
"RTN","RCTOPD",109,0)
       ..S REC=1,DOCAMT=0
"RTN","RCTOPD",110,0)
       ..Q
"RTN","RCTOPD",111,0)
    .S REC=REC+1,^XTMP("RCTOPD",$J,"BUILD",REC)=^XTMP("RCTOPD",$J,DOCTYPE,CNT)_U S:DOCTYPE=1 DOCAMT=DOCAMT+($E(^(REC),135,146)/100)
"RTN","RCTOPD",112,0)
    .I CNTR=CNT,LRTYPE=DOCTYPE S ^XTMP("RCTOPD",$J,"BUILD",REC+1)="END OF TRANSMISSION FOR SITE# "_SITE_":  TOTAL RECORDS: "_RCNT
"RTN","RCTOPD",113,0)
    .I $S(CNTR=CNT:1,CNT#150=0:1,1:0) D
"RTN","RCTOPD",114,0)
       ..S ^XTMP("RCTOPD",$J,"BUILD",1)=SITE_U_$TR($J(SEQ,2)," ",0)_U_$TR($J(TSEQ,2)," ",0)_U_(REC-1)_U_DOCAMT_U
"RTN","RCTOPD",115,0)
       ..S XMDUZ="AR PACKAGE"
"RTN","RCTOPD",116,0)
       ..S XMY("XXX@Q-TOP.DOMAIN.EXT")=""
"RTN","RCTOPD",117,0)
       ..S XMY("G.TOP")=""
"RTN","RCTOPD",118,0)
       ..S XMSUB=SITE_"/TOP TRANSMISSION/SEQ#: "_SEQ_"/"_$$NOW()
"RTN","RCTOPD",119,0)
       ..S XMTEXT="^XTMP(""RCTOPD"","_$J_",""BUILD"","
"RTN","RCTOPD",120,0)
       ..D ^XMD
"RTN","RCTOPD",121,0)
       ..Q
"RTN","RCTOPD",122,0)
    .Q
"RTN","RCTOPD",123,0)
 Q
"RTN","RCTOPD",124,0)
 ;
"RTN","RCTOPD",125,0)
USRMSG ;sends mailman message of documents sent to user
"RTN","RCTOPD",126,0)
 N XMY,XMDUZ,XMSUB,X,RCNT
"RTN","RCTOPD",127,0)
 S XMDUZ="AR PACKAGE",XMY("G.TOP")=""
"RTN","RCTOPD",128,0)
 S XMSUB="TOP "_$S(RCDOC="M":"MASTER/UPDATE",RCDOC="U":"UPDATE",1:"RECERTIFICATION")_" RECORDS SENT ON "_$E(DT,4,5)_"/"_$E(DT,6,7)_"/"_$E(DT,2,3)
"RTN","RCTOPD",129,0)
 S ^XTMP("RCTOPD",$J,"REC1",1)="Name                             TIN        TYPE       AMOUNT"
"RTN","RCTOPD",130,0)
 S ^XTMP("RCTOPD",$J,"REC1",2)="----                             ---        ----       ------"
"RTN","RCTOPD",131,0)
 S X="",RCNT=3 F  S X=$O(^XTMP("RCTOPD",$J,"REC",X)) Q:X=""  S ^XTMP("RCTOPD",$J,"REC1",RCNT)=^(X),RCNT=RCNT+1
"RTN","RCTOPD",132,0)
 S ^XTMP("RCTOPD",$J,"REC1",RCNT)="Total Records: "_(RCNT-3)
"RTN","RCTOPD",133,0)
 S XMTEXT="^XTMP(""RCTOPD"","_$J_",""REC1"","
"RTN","RCTOPD",134,0)
 D ^XMD
"RTN","RCTOPD",135,0)
 ;
"RTN","RCTOPD",136,0)
THIRD ;sends mailman message to user if no third letter found
"RTN","RCTOPD",137,0)
 Q:'$D(^XTMP("RCTOPD",$J,"THIRD"))
"RTN","RCTOPD",138,0)
 K ^XTMP("RCTOPD",$J,"REC1")
"RTN","RCTOPD",139,0)
 S XMDUZ="AR PACKAGE",XMY("G.TOP")=""
"RTN","RCTOPD",140,0)
 N TCT,TDEB,TDEB0,TBIL,TSP,FST
"RTN","RCTOPD",141,0)
 S XMSUB="TOP QUALIFIED/NO 3RD LETTER SENT ON "_$E(DT,4,5)_"/"_$E(DT,6,7)_"/"_$E(DT,2,3)
"RTN","RCTOPD",142,0)
 S ^XTMP("RCTOPD",$J,"REC1",1)="The following list of debtor bills were not sent to TOP."
"RTN","RCTOPD",143,0)
 S ^XTMP("RCTOPD",$J,"REC1",2)="Please review debtor's account to determine why the third"
"RTN","RCTOPD",144,0)
        S ^XTMP("RCTOPD",$J,"REC1",3)="notice letter has not been sent:"
"RTN","RCTOPD",145,0)
 S ^XTMP("RCTOPD",$J,"REC1",4)="Name                               Bill #"
"RTN","RCTOPD",146,0)
 S ^XTMP("RCTOPD",$J,"REC1",5)="----                               ------"
"RTN","RCTOPD",147,0)
 S TCT=6,TSP=0,TDEB=""
"RTN","RCTOPD",148,0)
 F  S TDEB=$O(^XTMP("RCTOPD",$J,"THIRD",TDEB)) Q:TDEB=""  D
"RTN","RCTOPD",149,0)
 .S FST=1,TBIL=""
"RTN","RCTOPD",150,0)
 .I FST,TCT'=6 S ^XTMP("RCTOPD",$J,"REC1",TCT)="",TCT=TCT+1,TSP=TSP+1
"RTN","RCTOPD",151,0)
 .F  S TBIL=$O(^XTMP("RCTOPD",$J,"THIRD",TDEB,TBIL)) Q:TBIL=""  D
"RTN","RCTOPD",152,0)
 ..S TDEB0=$S(FST:TDEB,1:"")
"RTN","RCTOPD",153,0)
 ..S ^XTMP("RCTOPD",$J,"REC1",TCT)=TDEB0_$J(" ",35-$L(TDEB0))_TBIL
"RTN","RCTOPD",154,0)
 ..S TCT=TCT+1,FST=0
"RTN","RCTOPD",155,0)
 S ^XTMP("RCTOPD",$J,"REC1",TCT)="Total records: "_(TCT-(6+TSP))
"RTN","RCTOPD",156,0)
 S XMTEXT="^XTMP(""RCTOPD"","_$J_",""REC1"","
"RTN","RCTOPD",157,0)
 D ^XMD
"RTN","RCTOPD",158,0)
COMPQ Q
"RTN","RCTOPD",159,0)
 ;
"RTN","RCTOPD",160,0)
PROC(DEBTOR,QUIT,FILE,HOLD,EFFDT) ;process bills for a specific debtor
"RTN","RCTOPD",161,0)
 K ^TMP("RCTOPD",$J,"BILL")
"RTN","RCTOPD",162,0)
 S DEBTOR0=$G(^RCD(340,DEBTOR,0))
"RTN","RCTOPD",163,0)
 Q:'FILE
"RTN","RCTOPD",164,0)
 I FILE=2 S DFN=+DEBTOR0 D DEM^VADPT Q:$E(VADM(2),1,5)="00000"
"RTN","RCTOPD",165,0)
 S (BILL,TOTAL,REPAY)=0
"RTN","RCTOPD",166,0)
 I RCNEW,FILE=440 S HOLD=1
"RTN","RCTOPD",167,0)
 I 'RCNEW,$P(^RCD(340,DEBTOR,6),U,2),'$P(^(6),U,3) G TOTAL
"RTN","RCTOPD",168,0)
 I RCNEW,$D(^RCD(340,"DMC",1,DEBTOR)) G TOTAL
"RTN","RCTOPD",169,0)
 F  S BILL=$O(^PRCA(430,"C",DEBTOR,BILL)) Q:BILL'?1N.N  D
"RTN","RCTOPD",170,0)
    .I FILE=2,+VADM(6) S TOTAL=0,REPAY=1 Q
"RTN","RCTOPD",171,0)
    .S B0=$G(^PRCA(430,BILL,0)),B4=$G(^(4)),B6=$G(^(6)),B7=$G(^(7)),B14=$G(^(14))
"RTN","RCTOPD",172,0)
    .Q:$P(B0,U,8)'=16
"RTN","RCTOPD",173,0)
    .Q:B4
"RTN","RCTOPD",174,0)
    .Q:'$P(B0,U,2)  S CAT=$P($G(^PRCA(430.2,$P(B0,U,2),0)),U,7)
"RTN","RCTOPD",175,0)
    .Q:'CAT  I ",16,17,21,22,23,26,27,33,"[(","_CAT_",") Q
"RTN","RCTOPD",176,0)
    .Q:$D(^PRCA(430,"TCSP",BILL))  ;cross-serviced bills
"RTN","RCTOPD",177,0)
    .I '+B14,($P(B6,U,21)'<ACTDT) I ",1,2,3,24,29,30,31,32,40,41,42,43,44,45,46,"[(","_CAT_",") Q  ;prca*4.5*301 cs activation date and 1st party bill
"RTN","RCTOPD",178,0)
    .;check for DOJ referral here
"RTN","RCTOPD",179,0)
    .I $P(B6,U,4),($P(B6,U,5)="DOJ") Q
"RTN","RCTOPD",180,0)
    .S BILLDT=$P(B6,U,21) I (BILLDT<P10YDT)!(BILLDT>P121DT)!(BILLDT<$P(DEBTOR6,U,3)) Q
"RTN","RCTOPD",181,0)
    .I '$P(B6,U,3) D  Q
"RTN","RCTOPD",182,0)
    ..;no 3rd letter being sent 
"RTN","RCTOPD",183,0)
    ..N TDEB,TFIL
"RTN","RCTOPD",184,0)
    ..S TDEB=$G(^RCD(340,DEBTOR,0)),TFIL=$$FILE(TDEB),TDEB=$$NAME^RCTOP1(+TDEB,TFIL),TDEB=$P(TDEB,U,2),^XTMP("RCTOPD",$J,"THIRD",TDEB,$P(B0,U))=""
"RTN","RCTOPD",185,0)
    .I RCNEW,CAT>12,CAT<15 S HOLD=1
"RTN","RCTOPD",186,0)
    .I BILLDT,BILLDT<EFFDT S EFFDT=BILLDT
"RTN","RCTOPD",187,0)
    .S TOTAL=TOTAL+$P(B7,U)+$P(B7,U,2)+$P(B7,U,3)+$P(B7,U,4)+$P(B7,U,5)
"RTN","RCTOPD",188,0)
    .S ^TMP("RCTOPD",$J,"BILL",BILL)=""
"RTN","RCTOPD",189,0)
    .Q
"RTN","RCTOPD",190,0)
 ;
"RTN","RCTOPD",191,0)
TOTAL ;set transmission total, reset quit variable
"RTN","RCTOPD",192,0)
 N RCSWINFO S RCSWINFO=$$SWSTAT^IBBAPI()                  ;PRCA*4.5*229
"RTN","RCTOPD",193,0)
 I RCNEW,'+RCSWINFO Q:TOTAL<25                            ;PRCA*4.5*229
"RTN","RCTOPD",194,0)
 I RCNEW,+RCSWINFO Q:TOTAL'>0                             ;PRCA*4.5*229
"RTN","RCTOPD",195,0)
 ;
"RTN","RCTOPD",196,0)
 I 'RCNEW S:TOTAL<25 TOTAL=0  S CURRTOT=$P($G(^RCD(340,DEBTOR,4)),U,3) Q:CURRTOT=TOTAL  S TOTAL=TOTAL-CURRTOT
"RTN","RCTOPD",197,0)
 S QUIT=0
"RTN","RCTOPD",198,0)
PROCQ Q
"RTN","RCTOPD",199,0)
 ;
"RTN","RCTOPD",200,0)
NOW() ;compiles current date,time
"RTN","RCTOPD",201,0)
 N X,Y,%,%H
"RTN","RCTOPD",202,0)
 S %H=$H D YX^%DTC
"RTN","RCTOPD",203,0)
 Q Y
"RTN","RCTOPD",204,0)
 ;
"RTN","RCTOPD",205,0)
FILE(DEBTOR0) ;gets file number for debtor
"RTN","RCTOPD",206,0)
 S FILE=$P($P(DEBTOR0,U),";",2)
"RTN","RCTOPD",207,0)
 S FILE=$S(FILE["DPT(":2,FILE["PRC(440":440,FILE["VA(200":200,1:0)
"RTN","RCTOPD",208,0)
FILEQ Q FILE
"RTN","RCTRAN")
0^36^B16424066^B16626175
"RTN","RCTRAN",1,0)
RCTRAN ;WASH-ISC@ALTOONA,PA/LDB-Transaction History Report ;1/19/95  4:33 PM
"RTN","RCTRAN",2,0)
 ;;4.5;Accounts Receivable;**104,154,315**;Mar 20, 1995;Build 67
"RTN","RCTRAN",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCTRAN",4,0)
 ;
"RTN","RCTRAN",5,0)
 N AMT,APP,BDATE,BILL,BY,CAT,DIC,DIR,DIRUT,EDATE,FUND,LINE,LN,NODE0,NODE1,NODE2,NODE3,PG,POP,PX2,RCX,RCX1,TDAT,TYP
"RTN","RCTRAN",6,0)
 N X,X1,X11,X12,X1A,X2,X3,XFND,XF1,Y,ZTDESC,ZTRTN,ZTSAVE,%ZIS
"RTN","RCTRAN",7,0)
EN S X=$$DATE^RCEVUTL1("")
"RTN","RCTRAN",8,0)
 Q:X<0
"RTN","RCTRAN",9,0)
 S BDATE=+X,EDATE=$P(X,"^",2)
"RTN","RCTRAN",10,0)
TYPE S DIC="^PRCA(430.3,",DIC(0)="QEMZ"
"RTN","RCTRAN",11,0)
 S Y=0 W !,"TRANSACTION TYPE: "_$S('$O(TYP("")):"ALL// ",1:"")
"RTN","RCTRAN",12,0)
 R X:DTIME I '$T!(X="^") Q
"RTN","RCTRAN",13,0)
 I ((X="")!(X="ALL")),'$O(TYP("")) S (TYP,X)="ALL" G CAT
"RTN","RCTRAN",14,0)
 I X="" G CAT
"RTN","RCTRAN",15,0)
 I X'="ALL" D ^DIC S TYP=+Y
"RTN","RCTRAN",16,0)
 I X["?" W !!,"Enter 'ALL' for all types of transactions in the AR TRANSACTION TYPE FILE",! G TYPE
"RTN","RCTRAN",17,0)
 ;I $P($G(^PRCA(430.3,+Y,0)),"^",3)>100 W !!,"This is a STATUS. Enter a transaction type only.",! G TYPE
"RTN","RCTRAN",18,0)
 I TYP'="ALL",(+TYP>0) S TYP(+TYP)="" G TYPE
"RTN","RCTRAN",19,0)
 G:+TYP<0 TYPE
"RTN","RCTRAN",20,0)
CAT K DIC S Y=0 W !,"CATEGORY OF BILL: "_$S('$O(CAT("")):"ALL// ",1:"")
"RTN","RCTRAN",21,0)
 R X:DTIME I '$T!(X="^") Q
"RTN","RCTRAN",22,0)
 I ((X="")!(X="ALL")),'$O(CAT("")) S (CAT,X)="ALL" G DEV
"RTN","RCTRAN",23,0)
 I X="" G DEV
"RTN","RCTRAN",24,0)
 I X'="ALL" S DIC="^PRCA(430.2,",DIC(0)="QEMZ" D ^DIC S CAT=+Y
"RTN","RCTRAN",25,0)
 I X["?" W !!,"Enter 'ALL' for all categories of bills.",! G CAT
"RTN","RCTRAN",26,0)
 I CAT'="ALL",(+CAT>0) S CAT(+CAT)="" G CAT
"RTN","RCTRAN",27,0)
 G:+CAT<0 CAT
"RTN","RCTRAN",28,0)
DEV W !!,"This report takes a long time to compile."
"RTN","RCTRAN",29,0)
 W !,"It is recommended that it be queued to print later.",!!
"RTN","RCTRAN",30,0)
 S %ZIS="AEQ" D ^%ZIS G:POP EXIT
"RTN","RCTRAN",31,0)
 I $D(IO("Q")) D  Q
"RTN","RCTRAN",32,0)
 .S ZTSAVE("BDATE")="",ZTSAVE("EDATE")="",ZTSAVE("TYP")="",ZTSAVE("CAT")="",ZTRTN="DQ^RCTRAN",ZTDESC="Transaction History Report"
"RTN","RCTRAN",33,0)
 .S:$O(TYP("")) ZTSAVE("TYP(")=""
"RTN","RCTRAN",34,0)
 .S:$O(CAT("")) ZTSAVE("CAT(")=""
"RTN","RCTRAN",35,0)
 .D ^%ZTLOAD,^%ZISC,EXIT K ZTSAVE,ZTRTN Q
"RTN","RCTRAN",36,0)
 ;
"RTN","RCTRAN",37,0)
DQ ;Call to build array of payment transactions
"RTN","RCTRAN",38,0)
 ;
"RTN","RCTRAN",39,0)
 U IO
"RTN","RCTRAN",40,0)
 D DT^DICRW W:$E(IOST,1,2)'="P-" @IOF S PG=0,LINE="",$P(LINE,"-",79)=""
"RTN","RCTRAN",41,0)
 K ^TMP($J) D TRANS^RCTRAN1
"RTN","RCTRAN",42,0)
 I '$D(^TMP($J)) D HDR^RCTRAN1 W !!,"There is no activity of this type during this time period."
"RTN","RCTRAN",43,0)
 I $D(^TMP($J)) D PRINT
"RTN","RCTRAN",44,0)
 K ^TMP($J) D ^%ZISC
"RTN","RCTRAN",45,0)
 Q
"RTN","RCTRAN",46,0)
 ;
"RTN","RCTRAN",47,0)
PRINT ;Print transactions of type within selected date range
"RTN","RCTRAN",48,0)
 D HDR^RCTRAN1
"RTN","RCTRAN",49,0)
 S (AMT("TOT"),RCX)=0
"RTN","RCTRAN",50,0)
 F  S RCX1=RCX,RCX=$O(^TMP($J,RCX)) Q:$D(DIRUT)!'RCX  S X11=0 F  S X12=X11,X11=$O(^TMP($J,RCX,X11)) Q:$D(DIRUT)  Q:'X11  S XFND="" F  S XFND=$O(^TMP($J,RCX,X11,XFND)) Q:$D(DIRUT)!(XFND="")  D FCHK D
"RTN","RCTRAN",51,0)
 .S AMT(X11)=0,X2=0,PX2=X2 F  S X2=$O(^TMP($J,RCX,X11,XFND,X2)) Q:$D(DIRUT)  D:'X2 SUB^RCTRAN1 Q:'X2  S X3=0 F  S AMT(X11,XFND)=0,X3=$O(^TMP($J,RCX,X11,XFND,X2,X3)) Q:'X3!$D(DIRUT)  D
"RTN","RCTRAN",52,0)
 ..W:$$SLH^RCFN01(X2)'=$$SLH^RCFN01(PX2)!'LN !,$$SLH^RCFN01(X2)
"RTN","RCTRAN",53,0)
 ..W:RCX'=RCX1!'LN ?12,$E($P($G(^PRCA(430.3,+RCX,0)),"^"),1,23)
"RTN","RCTRAN",54,0)
 ..W ?37,$P($G(^PRCA(430.2,+X11,0)),"^",2)
"RTN","RCTRAN",55,0)
 ..S BILL=$P(^TMP($J,RCX,X11,XFND,X2,X3),"^",2) W ?41,BILL
"RTN","RCTRAN",56,0)
 ..W ?55,$J(X3,8)
"RTN","RCTRAN",57,0)
 ..S AMT=+^TMP($J,RCX,X11,XFND,X2,X3)
"RTN","RCTRAN",58,0)
 ..I ",2,8,9,10,11,14,19,47,34,35,29,"[(","_TYP_",") I AMT'<0 S AMT=-AMT
"RTN","RCTRAN",59,0)
 ..I ",2,8,9,10,11,12,14,19,47,34,35,29,"'[(","_TYP_",") I AMT<0 S AMT=-AMT
"RTN","RCTRAN",60,0)
 ..I +CAT=26,TYP=1 I AMT'<0 S AMT=-AMT
"RTN","RCTRAN",61,0)
 ..I +CAT=26,TYP=35 I AMT'<0 S AMT=-AMT
"RTN","RCTRAN",62,0)
 ..S AMT("TOT")=AMT("TOT")+AMT
"RTN","RCTRAN",63,0)
 ..S AMT(X11)=AMT(X11)+AMT
"RTN","RCTRAN",64,0)
 ..S AMT(X11,XFND)=AMT(X11,XFND)+AMT
"RTN","RCTRAN",65,0)
 ..S:AMT<0 AMT=-AMT W ?64,$J(AMT,11,2)
"RTN","RCTRAN",66,0)
 ..S BY=$P(^TMP($J,RCX,X11,XFND,X2,X3),"^",3) S:BY BY=$P($G(^VA(200,+BY,0)),"^",2)
"RTN","RCTRAN",67,0)
 ..W ?76,BY
"RTN","RCTRAN",68,0)
 ..I RCX=45 W !?10,$P($G(^PRCA(433,+X3,5)),"^",2),!
"RTN","RCTRAN",69,0)
 ..S LN=LN+1
"RTN","RCTRAN",70,0)
 ..I $O(^TMP($J,RCX))!TYP,$Y+3>IOSL D
"RTN","RCTRAN",71,0)
 ...I $E(IOST,1,2)="C-" S DIR(0)="E" K DIRUT D ^DIR Q:$D(DIRUT)
"RTN","RCTRAN",72,0)
 ...W @IOF D HDR^RCTRAN1
"RTN","RCTRAN",73,0)
 Q:$D(DIRUT)
"RTN","RCTRAN",74,0)
 I $O(^TMP($J,RCX))!TYP,($Y+10>IOSL) D
"RTN","RCTRAN",75,0)
 .I $E(IOST,1,2)="C-" S DIR(0)="E" K DIRUT D ^DIR Q:$D(DIRUT)
"RTN","RCTRAN",76,0)
 .W @IOF D HDR^RCTRAN1
"RTN","RCTRAN",77,0)
 Q:$D(DIRUT)
"RTN","RCTRAN",78,0)
 S:AMT("TOT")<0 AMT("TOT")=-AMT("TOT") W:TYP !?64,"------------",!,?57,"TOTAL:",?64,$J(AMT("TOT"),12,2)
"RTN","RCTRAN",79,0)
 D KEY^RCTRAN1
"RTN","RCTRAN",80,0)
 Q
"RTN","RCTRAN",81,0)
 ;
"RTN","RCTRAN",82,0)
FCHK ;Check fund
"RTN","RCTRAN",83,0)
 W !,"FUND: ",XFND
"RTN","RCTRAN",84,0)
 Q
"RTN","RCTRAN",85,0)
 ;
"RTN","RCTRAN",86,0)
EXIT ;Exit routine
"RTN","RCTRAN",87,0)
 K ^TMP($J) D ^%ZISC Q
"RTN","RCWROFF")
0^31^B45523800^B40151788
"RTN","RCWROFF",1,0)
RCWROFF ;WISC/RFJ-write off, terminated ;1 Feb 2000
"RTN","RCWROFF",2,0)
 ;;4.5;Accounts Receivable;**168,204,309,301,307,315**;Mar 20, 1995;Build 67
"RTN","RCWROFF",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCWROFF",4,0)
 Q
"RTN","RCWROFF",5,0)
 ;
"RTN","RCWROFF",6,0)
 ;
"RTN","RCWROFF",7,0)
8 ;  terminated by fiscal officer (trantype=8) (menu option)
"RTN","RCWROFF",8,0)
 N RCDRSTRG
"RTN","RCWROFF",9,0)
 S RCDRSTRG="11TERMINATION DATE;"
"RTN","RCWROFF",10,0)
 S RCDRSTRG=RCDRSTRG_"17;"  ;termination reason
"RTN","RCWROFF",11,0)
 D MAIN("8^Fiscal Officer Termination",RCDRSTRG)
"RTN","RCWROFF",12,0)
 Q
"RTN","RCWROFF",13,0)
 ;
"RTN","RCWROFF",14,0)
 ;
"RTN","RCWROFF",15,0)
9 ;  terminated by compromise (trantype=9) (menu option)
"RTN","RCWROFF",16,0)
 N RCDRSTRG
"RTN","RCWROFF",17,0)
 S RCDRSTRG="11TERMINATION DATE;"
"RTN","RCWROFF",18,0)
 S RCDRSTRG=RCDRSTRG_"17;"  ;termination reason
"RTN","RCWROFF",19,0)
 D MAIN("9^Compromise Termination",RCDRSTRG)
"RTN","RCWROFF",20,0)
 Q
"RTN","RCWROFF",21,0)
 ;
"RTN","RCWROFF",22,0)
 ;
"RTN","RCWROFF",23,0)
A9 ;  compromised by rc/doj (use trantype=9) (menu option)
"RTN","RCWROFF",24,0)
 N RCDRSTRG
"RTN","RCWROFF",25,0)
 S RCDRSTRG="11TERMINATION DATE;"
"RTN","RCWROFF",26,0)
 S RCDRSTRG=RCDRSTRG_"17;"  ;termination reason
"RTN","RCWROFF",27,0)
 D MAIN("9^Compromise Termination by RC/DOJ",RCDRSTRG)
"RTN","RCWROFF",28,0)
 Q
"RTN","RCWROFF",29,0)
 ;
"RTN","RCWROFF",30,0)
 ;
"RTN","RCWROFF",31,0)
10 ;  waived in full transaction (trantype=10) (menu option)
"RTN","RCWROFF",32,0)
 D MAIN("10^Waiver","11WAIVED DATE;")
"RTN","RCWROFF",33,0)
 Q
"RTN","RCWROFF",34,0)
 ;
"RTN","RCWROFF",35,0)
 ;
"RTN","RCWROFF",36,0)
A10 ;  waived by rc/doj (use trantype=10) (menu option)
"RTN","RCWROFF",37,0)
 D MAIN("10^RC/DOJ Waiver","11WAIVED DATE;")
"RTN","RCWROFF",38,0)
 Q
"RTN","RCWROFF",39,0)
 ;
"RTN","RCWROFF",40,0)
 ;
"RTN","RCWROFF",41,0)
29 ;  terminated by rc/doj (trantype=29) (menu option)
"RTN","RCWROFF",42,0)
 N RCDRSTRG
"RTN","RCWROFF",43,0)
 S RCDRSTRG="11TERMINATION DATE;"
"RTN","RCWROFF",44,0)
 S RCDRSTRG=RCDRSTRG_"17;"  ;termination reason
"RTN","RCWROFF",45,0)
 D MAIN("29^RC/DOJ Termination",RCDRSTRG)
"RTN","RCWROFF",46,0)
 Q
"RTN","RCWROFF",47,0)
 ;
"RTN","RCWROFF",48,0)
 ;
"RTN","RCWROFF",49,0)
47 ;  suspended (trantype=47) (menu option)
"RTN","RCWROFF",50,0)
 N RCDRSTRG
"RTN","RCWROFF",51,0)
 S RCDRSTRG="11SUSPENDED DATE;"
"RTN","RCWROFF",52,0)
 S RCDRSTRG=RCDRSTRG_"90R;"  ;suspension type
"RTN","RCWROFF",53,0)
 S RCDRSTRG=RCDRSTRG_"S RCX=$$SUSTP^RCWROFF(X);"
"RTN","RCWROFF",54,0)
 S RCDRSTRG=RCDRSTRG_"5.02////^S X=RCX;"  ;brief comment
"RTN","RCWROFF",55,0)
 S RCDRSTRG=RCDRSTRG_"K RCX;"
"RTN","RCWROFF",56,0)
 D MAIN("47^Suspension",RCDRSTRG)
"RTN","RCWROFF",57,0)
 Q
"RTN","RCWROFF",58,0)
 ;
"RTN","RCWROFF",59,0)
SUSTP(X) ; suspension types for brief comment in *309
"RTN","RCWROFF",60,0)
 ; input-code between 0 to 11
"RTN","RCWROFF",61,0)
 ; output-text
"RTN","RCWROFF",62,0)
 N IBX
"RTN","RCWROFF",63,0)
 S IBX=$P($T(SUSTX+X),";;",2)
"RTN","RCWROFF",64,0)
 Q IBX
"RTN","RCWROFF",65,0)
 ;
"RTN","RCWROFF",66,0)
SUSTX ;;NOT CO-PAY SUSPENSION
"RTN","RCWROFF",67,0)
 ;;INITIAL CO-PAY WAIVER
"RTN","RCWROFF",68,0)
 ;;APPEAL CO-PAY WAIVER
"RTN","RCWROFF",69,0)
 ;;ADMINISTRATIVE SUSPENSION
"RTN","RCWROFF",70,0)
 ;;COMPROMISE
"RTN","RCWROFF",71,0)
 ;;TERMINATION
"RTN","RCWROFF",72,0)
 ;;BANKRUPTCY CHAP 7
"RTN","RCWROFF",73,0)
 ;;BANKRUPTCY CHAP 13
"RTN","RCWROFF",74,0)
 ;;BANKRUPTCY OTHER
"RTN","RCWROFF",75,0)
 ;;PROBATE
"RTN","RCWROFF",76,0)
 ;;CHOICE
"RTN","RCWROFF",77,0)
 ;;DISPUTE
"RTN","RCWROFF",78,0)
 ;
"RTN","RCWROFF",79,0)
 ;
"RTN","RCWROFF",80,0)
MAIN(RCTRTYPE,RCDRSTRG) ;  main subroutine to process a waiver, termination, suspended transaction
"RTN","RCWROFF",81,0)
 ;  rctrtype = transaction type^description, example 10^waiver
"RTN","RCWROFF",82,0)
 ;  rcdrstrg = dr string used when calling die
"RTN","RCWROFF",83,0)
 I '$G(GOTBILL) N RCBILLDA  ;PRCA*4.5*315 Pass in RCBILLDA
"RTN","RCWROFF",84,0)
 N BALANCE,DR,RCTRANDA,Y
"RTN","RCWROFF",85,0)
 F  D  Q:RCBILLDA<1!($G(GOTBILL))
"RTN","RCWROFF",86,0)
 .   K RCTRANDA  ;do not leave around in for loop
"RTN","RCWROFF",87,0)
 .   ;  select a bill
"RTN","RCWROFF",88,0)
 .   I '$G(GOTBILL) S RCBILLDA=$$GETABILL^RCBEUBIL I RCBILLDA<1 Q  ;PRCA*4.5*315
"RTN","RCWROFF",89,0)
 .   I $D(^PRCA(430,"TCSP",RCBILLDA)) W !,"BILL HAS BEEN REFERRED TO CROSS-SERVICING.",!,"NO TRANSACTIONS ARE ALLOWED." D  Q  ;prca*4.5*301
"RTN","RCWROFF",90,0)
 . .  I +RCTRTYPE=10!(+RCTRTYPE=47)!(+RCTRTYPE=9)!(+RCTRTYPE=8) W !,"** THE RECALL PROCESS MUST BE UTILIZED PRIOR TO PERFORMING THIS FUNCTION **"   ;prca*4.5*301  
"RTN","RCWROFF",91,0)
 .   ;  check to see if bill has been referred to rc/doj (6;4 = referral date)
"RTN","RCWROFF",92,0)
 .   I $P(RCTRTYPE,"^",2)["RC/DOJ",$P($G(^PRCA(430,RCBILLDA,6)),"^",4)="" W !,"THIS ACCOUNT IS NOT REFERRED TO RC/DOJ." Q
"RTN","RCWROFF",93,0)
 .   ;  lock the bill
"RTN","RCWROFF",94,0)
 .   L +^PRCA(430,RCBILLDA):5 I '$T W !,"ANOTHER USER IS CURRENTLY WORKING WITH THIS BILL." Q
"RTN","RCWROFF",95,0)
 .   D SHOWBILL^RCWROFF1(RCBILLDA)
"RTN","RCWROFF",96,0)
 .   I '$G(^PRCA(430,RCBILLDA,7)) W !,"THIS BILL HAS NO PRINCIPAL BALANCE." D UNLOCK Q
"RTN","RCWROFF",97,0)
 .   ;  ask to enter transaction
"RTN","RCWROFF",98,0)
 .   S Y=$$ASKOK($P(RCTRTYPE,"^",2))          ; prca*4.5*315 changes
"RTN","RCWROFF",99,0)
 .   I Y'=1 D  Q                              ; user said No, or no response, or ^/timeout
"RTN","RCWROFF",100,0)
 . .   D UNLOCK                               ; unlock bill and transaction
"RTN","RCWROFF",101,0)
 . .   I Y<0,'$G(GOTBILL) S RCBILLDA=0        ; ^ or timeout, get out of this loop
"RTN","RCWROFF",102,0)
 . .   I Y<0,$G(GOTBILL) S RCDPGQ=1           ; ^ or timeout, set special variable - see RCDPAPL1
"RTN","RCWROFF",103,0)
 . .   Q
"RTN","RCWROFF",104,0)
 .   ;
"RTN","RCWROFF",105,0)
 .   ;  add a new transaction to file 433
"RTN","RCWROFF",106,0)
 .   S RCTRANDA=$$ADD433^RCBEUTRA(RCBILLDA,$P(RCTRTYPE,"^")) I 'RCTRANDA W !,$P(RCTRANDA,"^",2) D UNLOCK Q
"RTN","RCWROFF",107,0)
 .   W !,"  Transaction number ",RCTRANDA," added ..."
"RTN","RCWROFF",108,0)
 .   ;
"RTN","RCWROFF",109,0)
 .   ;  set up dr string for die call  PRCA*4.5*307 - Move comment below balance sets
"RTN","RCWROFF",110,0)
 .   S DR=RCDRSTRG   ;_"41;"  ;comment
"RTN","RCWROFF",111,0)
 .   ;  bill amount moved to transaction amount
"RTN","RCWROFF",112,0)
 .   S BALANCE=$P($G(^PRCA(430,RCBILLDA,7)),"^",1,5)
"RTN","RCWROFF",113,0)
 .   S DR=DR_"15////"_($P(BALANCE,"^")+$P(BALANCE,"^",2)+$P(BALANCE,"^",3)+$P(BALANCE,"^",4)+$P(BALANCE,"^",5))_";"
"RTN","RCWROFF",114,0)
 .   I $P(BALANCE,"^",1) S DR=DR_"81////"_+$P(BALANCE,"^",1)_";"   ;principal
"RTN","RCWROFF",115,0)
 .   I $P(BALANCE,"^",2) S DR=DR_"82////"_+$P(BALANCE,"^",2)_";"   ;interest
"RTN","RCWROFF",116,0)
 .   I $P(BALANCE,"^",3) S DR=DR_"83////"_+$P(BALANCE,"^",3)_";"   ;admin
"RTN","RCWROFF",117,0)
 .   I $P(BALANCE,"^",4) S DR=DR_"84////"_+$P(BALANCE,"^",4)_";"   ;marshal fee
"RTN","RCWROFF",118,0)
 .   I $P(BALANCE,"^",5) S DR=DR_"85////"_+$P(BALANCE,"^",5)_";"   ;court cost
"RTN","RCWROFF",119,0)
 .   ;
"RTN","RCWROFF",120,0)
 .   ; PRCA*4.5*307 - Comment save is moved below balance sets
"RTN","RCWROFF",121,0)
 .   S DR=DR_"41;"
"RTN","RCWROFF",122,0)
 .   ;  edit the fields
"RTN","RCWROFF",123,0)
 .   S Y=$$EDIT433^RCBEUTRA(RCTRANDA,DR)
"RTN","RCWROFF",124,0)
 .   I 'Y W !,$P(Y,"^",2) D DEL433^RCBEUTRA(RCTRANDA,"",0),UNLOCK Q
"RTN","RCWROFF",125,0)
 .   ;  set the bill and transaction as RC/DOJ
"RTN","RCWROFF",126,0)
 .   I $P(RCTRTYPE,"^",2)["RC/DOJ" D SETRCDOJ^RCBEUBIL(RCBILLDA,RCTRANDA,"RC")
"RTN","RCWROFF",127,0)
 .   ;  change the status of the bill
"RTN","RCWROFF",128,0)
 .   I $P(RCTRTYPE,"^")'=47 D CHGSTAT^RCBEUBIL(RCBILLDA,23)  ;write off
"RTN","RCWROFF",129,0)
 .   I $P(RCTRTYPE,"^")=47 D CHGSTAT^RCBEUBIL(RCBILLDA,40)   ;suspended
"RTN","RCWROFF",130,0)
 .   ;  mark transaction as processed
"RTN","RCWROFF",131,0)
 .   D PROCESS^RCBEUTRA(RCTRANDA)
"RTN","RCWROFF",132,0)
 .   ;
"RTN","RCWROFF",133,0)
 .   ;  create fms write off document, if not accrued and not suspended (47) transaction
"RTN","RCWROFF",134,0)
 .   I '$$ACCK^PRCAACC(RCBILLDA),$P($G(^PRCA(433,RCTRANDA,1)),"^",2)'=47 D FMSDOC(RCTRANDA)
"RTN","RCWROFF",135,0)
 .   ;
"RTN","RCWROFF",136,0)
 .   W !,"  * * * * * ",$P(RCTRTYPE,"^",2)," has been PROCESSED! * * * * *"
"RTN","RCWROFF",137,0)
 .   I '$G(REFMS)&(DT>$$LDATE^RCRJR(DT)) S Y=$E($$FPS^RCAMFN01(DT,1),1,5)_"01" D DD^%DT W !!,"   * * * * Transmission will be held until "_Y_" * * * *"
"RTN","RCWROFF",138,0)
 .   D UNLOCK
"RTN","RCWROFF",139,0)
 Q
"RTN","RCWROFF",140,0)
 ;
"RTN","RCWROFF",141,0)
 ;
"RTN","RCWROFF",142,0)
FMSDOC(RCTRANDA) ;  create fms write off document
"RTN","RCWROFF",143,0)
 N Y
"RTN","RCWROFF",144,0)
 W !!,"Creating FMS Write-off document ... "
"RTN","RCWROFF",145,0)
 S Y=$$BUILDWR^RCXFMSW1(RCTRANDA)
"RTN","RCWROFF",146,0)
 I Y W $P(Y,"^",2)," created."
"RTN","RCWROFF",147,0)
 E  W "ERROR: ",$P(Y,"^",2)
"RTN","RCWROFF",148,0)
 Q
"RTN","RCWROFF",149,0)
 ;
"RTN","RCWROFF",150,0)
 ;
"RTN","RCWROFF",151,0)
UNLOCK ;  unlock bill and transaction
"RTN","RCWROFF",152,0)
 L -^PRCA(430,RCBILLDA)
"RTN","RCWROFF",153,0)
 I $G(RCTRANDA) L -^PRCA(433,RCTRANDA)
"RTN","RCWROFF",154,0)
 Q
"RTN","RCWROFF",155,0)
 ;
"RTN","RCWROFF",156,0)
 ;
"RTN","RCWROFF",157,0)
ASKOK(TRANTYPE) ;  ask record transaction
"RTN","RCWROFF",158,0)
 N DIR,DIQ2,DIRUT,DTOUT,DUOUT,X,Y
"RTN","RCWROFF",159,0)
 S DIR(0)="YO",DIR("B")="NO"
"RTN","RCWROFF",160,0)
 S DIR("A")="  Are you sure you want to record this bill as a "
"RTN","RCWROFF",161,0)
 I $L(TRANTYPE)<20 S DIR("A")=DIR("A")_TRANTYPE
"RTN","RCWROFF",162,0)
 E  S DIR("A",1)=DIR("A"),DIR("A")="  "_TRANTYPE
"RTN","RCWROFF",163,0)
 W ! D ^DIR
"RTN","RCWROFF",164,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1
"RTN","RCWROFF",165,0)
 Q Y
"RTN","RCXFMSPR")
0^49^B37660808^B27613579
"RTN","RCXFMSPR",1,0)
RCXFMSPR ;WISC/RFJ-print revenue source codes ;8/31/10 11:34am
"RTN","RCXFMSPR",2,0)
 ;;4.5;Accounts Receivable;**90,96,101,156,170,203,273,310,315**;Mar 20, 1995;Build 67
"RTN","RCXFMSPR",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCXFMSPR",4,0)
 W !,"This option will print out a list of the revenue source codes sent from"
"RTN","RCXFMSPR",5,0)
 W !,"the VISTA system to FMS."
"RTN","RCXFMSPR",6,0)
 ;
"RTN","RCXFMSPR",7,0)
 ;  select device
"RTN","RCXFMSPR",8,0)
 W ! S %ZIS="Q" D ^%ZIS Q:POP
"RTN","RCXFMSPR",9,0)
 I $D(IO("Q")) D  D ^%ZTLOAD K IO("Q"),ZTSK Q
"RTN","RCXFMSPR",10,0)
 .   S ZTDESC="Revenue Source Code Report",ZTRTN="DQ^RCXFMSPR"
"RTN","RCXFMSPR",11,0)
 .   S ZTSAVE("ZTREQ")="@"
"RTN","RCXFMSPR",12,0)
 W !!,"<*> please wait <*>"
"RTN","RCXFMSPR",13,0)
 ;
"RTN","RCXFMSPR",14,0)
DQ ;  queue starts here
"RTN","RCXFMSPR",15,0)
 N %,%I,BINARY,COL2DESC,COL3DESC,COLUMN1,COLUMN2,COLUMN3,COLUMN4
"RTN","RCXFMSPR",16,0)
 N DECIMAL,DESCRIP,NOW,PAGE,RCSTFLAG,SCREEN,X,Y
"RTN","RCXFMSPR",17,0)
 D NOW^%DTC S Y=% D DD^%DT S NOW=Y
"RTN","RCXFMSPR",18,0)
 S PAGE=1,SCREEN=0 I '$D(ZTQUEUED),IO=IO(0),$E(IOST)="C" S SCREEN=1
"RTN","RCXFMSPR",19,0)
 U IO D H
"RTN","RCXFMSPR",20,0)
 ;
"RTN","RCXFMSPR",21,0)
 S COLUMN1="A",COLUMN2="R",COLUMN3="R",COLUMN4="V",DESCRIP="Miscellaneous"
"RTN","RCXFMSPR",22,0)
 D WRITEIT
"RTN","RCXFMSPR",23,0)
 ;
"RTN","RCXFMSPR",24,0)
 ;  for now, column 1 is always 8 and column 4 is always Z
"RTN","RCXFMSPR",25,0)
 S COLUMN1=8,COLUMN4="Z"
"RTN","RCXFMSPR",26,0)
 F COLUMN2=1:1:9,"A","B","C","D","E","F","G","H","I","J","K","L","M","Q","R","S","T" D  Q:$G(RCSTFLAG)
"RTN","RCXFMSPR",27,0)
 .   S COL2DESC=$P($T(@("A"_COLUMN2)),";",3)
"RTN","RCXFMSPR",28,0)
 .   ;
"RTN","RCXFMSPR",29,0)
 .   S COLUMN3=$S(COLUMN2=5:"*",1:"Z")
"RTN","RCXFMSPR",30,0)
 .   S DESCRIP=COL2DESC D WRITEIT
"RTN","RCXFMSPR",31,0)
 .   ;
"RTN","RCXFMSPR",32,0)
 .   I $G(RCSTFLAG) Q
"RTN","RCXFMSPR",33,0)
 .   ;
"RTN","RCXFMSPR",34,0)
 .   ;  show hsif - disabled by patch 203
"RTN","RCXFMSPR",35,0)
 .   ;I COLUMN2="B"!(COLUMN2="C") S DESCRIP=DESCRIP_" HSIF",COLUMN3=1 D WRITEIT
"RTN","RCXFMSPR",36,0)
 ;
"RTN","RCXFMSPR",37,0)
 I $G(RCSTFLAG) D Q Q
"RTN","RCXFMSPR",38,0)
 ;
"RTN","RCXFMSPR",39,0)
 ;  print reimbursable health insurance rsc's
"RTN","RCXFMSPR",40,0)
 S COLUMN2=5
"RTN","RCXFMSPR",41,0)
 W !!?6,"For REIMBURSABLE HEALTH INSURANCE [85*Z]:"
"RTN","RCXFMSPR",42,0)
 F DECIMAL=0:1:31 D  Q:$G(RCSTFLAG)
"RTN","RCXFMSPR",43,0)
 .   I DECIMAL<10 S COLUMN3=DECIMAL
"RTN","RCXFMSPR",44,0)
 .   E  S COLUMN3=$C(65+DECIMAL-10)
"RTN","RCXFMSPR",45,0)
 .   ;
"RTN","RCXFMSPR",46,0)
 .   ;  convert decimal to binary (ex: 10011) so it can be
"RTN","RCXFMSPR",47,0)
 .   ;  parsed in rsc to get the description
"RTN","RCXFMSPR",48,0)
 .   S BINARY=$$CONVERT(DECIMAL)
"RTN","RCXFMSPR",49,0)
 .   S COL3DESC=$P($T(@("B"_$E(BINARY,1,2))),";",3)
"RTN","RCXFMSPR",50,0)
 .   S COL3DESC=COL3DESC_", "_$P($T(@("C"_$E(BINARY,3))),";",3)
"RTN","RCXFMSPR",51,0)
 .   S COL3DESC=COL3DESC_", "_$P($T(@("D"_$E(BINARY,4))),";",3)
"RTN","RCXFMSPR",52,0)
 .   S COL3DESC=COL3DESC_", "_$P($T(@("E"_$E(BINARY,5))),";",3)
"RTN","RCXFMSPR",53,0)
 .   S DESCRIP=COL3DESC
"RTN","RCXFMSPR",54,0)
 .   D WRITEIT
"RTN","RCXFMSPR",55,0)
 ;
"RTN","RCXFMSPR",56,0)
 ;  print fee basis reimbursable health insurance rsc's (PRCA*4.5*310/DRF)
"RTN","RCXFMSPR",57,0)
 S COLUMN2="F"
"RTN","RCXFMSPR",58,0)
 W !!?6,"For FEE REIMBURSABLE HEALTH INSURANCE [8F*Z]:"
"RTN","RCXFMSPR",59,0)
 F DECIMAL=1:1:2 D  Q:$G(RCSTFLAG)
"RTN","RCXFMSPR",60,0)
 .   S DESCRIP="FEE BASIS, NSC VET, MT CAT A, "_$S(DECIMAL=1:"INPATIENT",DECIMAL=2:"OUTPATIENT",1:"")
"RTN","RCXFMSPR",61,0)
 .   S COLUMN3=DECIMAL
"RTN","RCXFMSPR",62,0)
 .   D WRITEIT
"RTN","RCXFMSPR",63,0)
 ;
"RTN","RCXFMSPR",64,0)
 ;  print EMERGENCY/HUMANITARIAN REIMB.   PRCA*4.5*315
"RTN","RCXFMSPR",65,0)
 ;  8VZZ;HUMAN 3RD-PRTY OUTPATIENT
"RTN","RCXFMSPR",66,0)
 ;  8UZZ;HUMAN 3RD-PRTY INPATIENT
"RTN","RCXFMSPR",67,0)
 S COLUMN3="Z"
"RTN","RCXFMSPR",68,0)
 W !!?6,"For EMERGENCY/HUMANITARIAN REIMBURSABLE HEALTH INSURANCE [8*ZZ]:"
"RTN","RCXFMSPR",69,0)
 F DECIMAL="U","V" D  Q:$G(RCSTFLAG)
"RTN","RCXFMSPR",70,0)
 . S DESCRIP="EMERGENCY/HUMANITARIAN REIMB. INS.,  "_$S(DECIMAL="U":"INPATIENT",DECIMAL="V":"OUTPATIENT",1:"")
"RTN","RCXFMSPR",71,0)
 . S COLUMN2=DECIMAL
"RTN","RCXFMSPR",72,0)
 . D WRITEIT
"RTN","RCXFMSPR",73,0)
 ;
"RTN","RCXFMSPR",74,0)
 ;  print INELIGIBLE HOSP. REIMB.   PRCA*4.5*315
"RTN","RCXFMSPR",75,0)
 ;  841Z;INELI 3RD-PARTY INPATIENT
"RTN","RCXFMSPR",76,0)
 ;  842Z;INELI 3RD-PARTY OUTPATIENT 
"RTN","RCXFMSPR",77,0)
 S COLUMN2="4"
"RTN","RCXFMSPR",78,0)
 W !!?6,"For INELIGIBLE HOSPITAL REIMBURSABLE HEALTH INSURANCE [84*Z]:"
"RTN","RCXFMSPR",79,0)
 F DECIMAL=1,2 D  Q:$G(RCSTFLAG)
"RTN","RCXFMSPR",80,0)
 . S DESCRIP="INELIGIBLE HOSP. REIMB. INS., "_$S(DECIMAL=1:"INPATIENT",DECIMAL=2:"OUTPATIENT",1:"")
"RTN","RCXFMSPR",81,0)
 . S COLUMN3=DECIMAL
"RTN","RCXFMSPR",82,0)
 . D WRITEIT
"RTN","RCXFMSPR",83,0)
Q D ^%ZISC
"RTN","RCXFMSPR",84,0)
 Q
"RTN","RCXFMSPR",85,0)
 ;
"RTN","RCXFMSPR",86,0)
 ;
"RTN","RCXFMSPR",87,0)
GETDESC(RSC) ;  return the description for the revenue source code
"RTN","RCXFMSPR",88,0)
 N BINARY,COL3DESC,COLUMN2,COLUMN3,DESC
"RTN","RCXFMSPR",89,0)
 ;new resource codes for ineligible hosp reimb. and emergency/humanitarian reimb.  PRCA*4.5*315
"RTN","RCXFMSPR",90,0)
 I RSC="841Z" Q "Ineligible Hosp. Reimb. Ins., Inpatient"
"RTN","RCXFMSPR",91,0)
 I RSC="842Z" Q "Ineligible Hosp. Reimb. Ins., Outpatient"
"RTN","RCXFMSPR",92,0)
 I RSC="8UZZ" Q "Emergency/Humanitarian Reimb. Ins., Inpatient"
"RTN","RCXFMSPR",93,0)
 I RSC="8VZZ" Q "Emergency/Humanitarian Reimb. Ins., Outpatient"
"RTN","RCXFMSPR",94,0)
 I RSC="ARRV" Q "Miscellaneous"
"RTN","RCXFMSPR",95,0)
 I RSC=8046 Q "Administrative"
"RTN","RCXFMSPR",96,0)
 I RSC=8047 Q "Interest"
"RTN","RCXFMSPR",97,0)
 I RSC=8048 Q "Marshal Fee and Court Cost"
"RTN","RCXFMSPR",98,0)
 S DESC="UNKNOWN"
"RTN","RCXFMSPR",99,0)
 S COLUMN2=$E(RSC,2)
"RTN","RCXFMSPR",100,0)
 I "123456789ABCDEFGHIJKLMQRST"[COLUMN2 S DESC=$P($T(@("A"_COLUMN2)),";",3)
"RTN","RCXFMSPR",101,0)
 ; HSIF reference disabled by patch 203
"RTN","RCXFMSPR",102,0)
 ; I RSC="8B1Z"!(RSC="8C1Z") S DESC=DESC_" (HSIF)"
"RTN","RCXFMSPR",103,0)
 I COLUMN2'=5 Q DESC
"RTN","RCXFMSPR",104,0)
 ;
"RTN","RCXFMSPR",105,0)
 S COLUMN3=$E(RSC,3)
"RTN","RCXFMSPR",106,0)
 ;  convert alpha letters to decimal
"RTN","RCXFMSPR",107,0)
 I "0123456789"'[COLUMN3 S COLUMN3=$A(COLUMN3)-55
"RTN","RCXFMSPR",108,0)
 S BINARY=$$CONVERT(COLUMN3)
"RTN","RCXFMSPR",109,0)
 S COL3DESC=$P($T(@("B"_$E(BINARY,1,2))),";",3)
"RTN","RCXFMSPR",110,0)
 S COL3DESC=COL3DESC_", "_$P($T(@("C"_$E(BINARY,3))),";",3)
"RTN","RCXFMSPR",111,0)
 S COL3DESC=COL3DESC_", "_$P($T(@("D"_$E(BINARY,4))),";",3)
"RTN","RCXFMSPR",112,0)
 S COL3DESC=COL3DESC_", "_$P($T(@("E"_$E(BINARY,5))),";",3)
"RTN","RCXFMSPR",113,0)
 Q "RHI, "_COL3DESC
"RTN","RCXFMSPR",114,0)
 ;
"RTN","RCXFMSPR",115,0)
 ;
"RTN","RCXFMSPR",116,0)
CONVERT(DECIMAL) ;  convert decimal number to binary (5 digits)
"RTN","RCXFMSPR",117,0)
 N Y
"RTN","RCXFMSPR",118,0)
 S Y=""
"RTN","RCXFMSPR",119,0)
 F  S Y=$E("0123456789ABCDEF",DECIMAL#2+1)_Y,DECIMAL=DECIMAL\2 Q:DECIMAL<1
"RTN","RCXFMSPR",120,0)
 S Y=$E("00000",0,5-$L(Y))_Y
"RTN","RCXFMSPR",121,0)
 Q Y
"RTN","RCXFMSPR",122,0)
 ;
"RTN","RCXFMSPR",123,0)
 ;
"RTN","RCXFMSPR",124,0)
WRITEIT ;  display the rsc
"RTN","RCXFMSPR",125,0)
 W !,COLUMN1,COLUMN2,COLUMN3,COLUMN4,?6,DESCRIP
"RTN","RCXFMSPR",126,0)
 I $Y>(IOSL-5) D:SCREEN PAUSE Q:$G(RCSTFLAG)  D H
"RTN","RCXFMSPR",127,0)
 Q
"RTN","RCXFMSPR",128,0)
 ;
"RTN","RCXFMSPR",129,0)
 ;
"RTN","RCXFMSPR",130,0)
PAUSE ;  pause at end of page
"RTN","RCXFMSPR",131,0)
 N X U IO(0) W !,"Press RETURN to continue, '^' to exit:" R X:DTIME S:'$T X="^" S:X["^" RCSTFLAG=1 U IO
"RTN","RCXFMSPR",132,0)
 Q
"RTN","RCXFMSPR",133,0)
 ;
"RTN","RCXFMSPR",134,0)
 ;
"RTN","RCXFMSPR",135,0)
H ;  header
"RTN","RCXFMSPR",136,0)
 S %=NOW_"  PAGE "_PAGE,PAGE=PAGE+1 I PAGE'=2!(SCREEN) W @IOF
"RTN","RCXFMSPR",137,0)
 W $C(13),"REVENUE SOURCE CODE REPORT (VISTA TO FMS)",?(80-$L(%)),%
"RTN","RCXFMSPR",138,0)
 W !,"RSC",?6,"Description"
"RTN","RCXFMSPR",139,0)
 S %="",$P(%,"-",81)=""
"RTN","RCXFMSPR",140,0)
 W !,%
"RTN","RCXFMSPR",141,0)
 Q
"RTN","RCXFMSPR",142,0)
 ;
"RTN","RCXFMSPR",143,0)
 ;
"RTN","RCXFMSPR",144,0)
 ;  this is a listing of all column2 values with a description
"RTN","RCXFMSPR",145,0)
A1 ;;Hospital Care (NSC)
"RTN","RCXFMSPR",146,0)
A2 ;;Outpatient Care (NSC)
"RTN","RCXFMSPR",147,0)
A3 ;;Nursing Home Care (NSC)
"RTN","RCXFMSPR",148,0)
A4 ;;Ineligible Hospitalization
"RTN","RCXFMSPR",149,0)
A5 ;;Reimbursable Health Insurance
"RTN","RCXFMSPR",150,0)
A6 ;;Tort Feasor
"RTN","RCXFMSPR",151,0)
A7 ;;Workmans Compensation (Non-Federal)
"RTN","RCXFMSPR",152,0)
A8 ;;C (Means Test)
"RTN","RCXFMSPR",153,0)
A9 ;;Emergency/Humanitarian
"RTN","RCXFMSPR",154,0)
AA ;;No Fault Auto Accident
"RTN","RCXFMSPR",155,0)
AB ;;Pharmacy Co-Pay (SC Vet)
"RTN","RCXFMSPR",156,0)
AC ;;Pharmacy Co-Pay (NSC Vet)
"RTN","RCXFMSPR",157,0)
AD ;;Nursing Home Care Per Diem
"RTN","RCXFMSPR",158,0)
AE ;;Hospital Care Per Diem
"RTN","RCXFMSPR",159,0)
AF ;;Medicare
"RTN","RCXFMSPR",160,0)
AG ;;Adult Day Health Care (LTC)
"RTN","RCXFMSPR",161,0)
AH ;;Domiciliary (LTC)
"RTN","RCXFMSPR",162,0)
AI ;;Respite Care-Institutional (LTC)
"RTN","RCXFMSPR",163,0)
AJ ;;Respite Care-Non-Institutional (LTC)
"RTN","RCXFMSPR",164,0)
AK ;;Geriatric Eval-Institutional (LTC)
"RTN","RCXFMSPR",165,0)
AL ;;Geriatric Eval-Non-Institutional (LTC)
"RTN","RCXFMSPR",166,0)
AM ;;Nursing Home Care-Long Term Care (LTC)
"RTN","RCXFMSPR",167,0)
AQ ;;Pharmacy No Fault Auto Acc
"RTN","RCXFMSPR",168,0)
AR ;;Pharmacy Reimburs Health Ins
"RTN","RCXFMSPR",169,0)
AS ;;Pharmacy Tort Feasor
"RTN","RCXFMSPR",170,0)
AT ;;Pharmacy Workman's Comp
"RTN","RCXFMSPR",171,0)
 ;
"RTN","RCXFMSPR",172,0)
 ;
"RTN","RCXFMSPR",173,0)
 ;  this is a listing for the type of care, first 2 binary digits
"RTN","RCXFMSPR",174,0)
 ;  if column2 is reimbursable health insurance
"RTN","RCXFMSPR",175,0)
B00 ;;Inpatient (Hosp)
"RTN","RCXFMSPR",176,0)
B01 ;;Outpatient
"RTN","RCXFMSPR",177,0)
B10 ;;Nursing Home
"RTN","RCXFMSPR",178,0)
B11 ;;Other
"RTN","RCXFMSPR",179,0)
 ;
"RTN","RCXFMSPR",180,0)
 ;
"RTN","RCXFMSPR",181,0)
 ;  this is a listing for the service connected, binary digit 3
"RTN","RCXFMSPR",182,0)
C0 ;;SC for NSC
"RTN","RCXFMSPR",183,0)
C1 ;;NSC Vet
"RTN","RCXFMSPR",184,0)
 ;
"RTN","RCXFMSPR",185,0)
 ;
"RTN","RCXFMSPR",186,0)
 ;  this is a listing for means test, binary digit 4
"RTN","RCXFMSPR",187,0)
D0 ;;MT Cat A
"RTN","RCXFMSPR",188,0)
D1 ;;MT Cat C
"RTN","RCXFMSPR",189,0)
 ;
"RTN","RCXFMSPR",190,0)
 ;
"RTN","RCXFMSPR",191,0)
 ;  this is a listing for age group, binary digit 5
"RTN","RCXFMSPR",192,0)
E0 ;;Age <65
"RTN","RCXFMSPR",193,0)
E1 ;;Age 65+
"RTN","RCXFMSUF")
0^24^B38763717^B37450700
"RTN","RCXFMSUF",1,0)
RCXFMSUF ;WISC/RFJ-calculate fms fund code for a bill ;10/20/10 10:37am
"RTN","RCXFMSUF",2,0)
 ;;4.5;Accounts Receivable;**90,101,135,157,160,165,170,203,207,173,211,192,220,235,273,310,315**;Mar 20, 1995;Build 67
"RTN","RCXFMSUF",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCXFMSUF",4,0)
 Q
"RTN","RCXFMSUF",5,0)
 ;
"RTN","RCXFMSUF",6,0)
 ;
"RTN","RCXFMSUF",7,0)
GETFUNDO(TYPE) ;  return the fund for other type associated collections
"RTN","RCXFMSUF",8,0)
 ;  type can equal:
"RTN","RCXFMSUF",9,0)
 ;  I for interest         A for admin
"RTN","RCXFMSUF",10,0)
 ;  M for marshall fee     C for court cost
"RTN","RCXFMSUF",11,0)
 I TYPE="I" Q "1435"
"RTN","RCXFMSUF",12,0)
 I TYPE="A" Q "3220"
"RTN","RCXFMSUF",13,0)
 I TYPE="M" Q "0869"
"RTN","RCXFMSUF",14,0)
 I TYPE="C" Q "0869"
"RTN","RCXFMSUF",15,0)
 Q ""
"RTN","RCXFMSUF",16,0)
 ;
"RTN","RCXFMSUF",17,0)
 ;
"RTN","RCXFMSUF",18,0)
GETFUNDB(BILLDA,DONTSTOR,RCEFT) ;  return a bills fms fund code
"RTN","RCXFMSUF",19,0)
 ;  pass DONTSTOR equal 1 to prevent storing the fund code
"RTN","RCXFMSUF",20,0)
 ;  cannot rely on data in the fund field since it may reference the
"RTN","RCXFMSUF",21,0)
 ;  old funds S FUND=$P($G(^PRCA(430,BILLDA,11)),"^",17).  since there
"RTN","RCXFMSUF",22,0)
 ;  are reports which use 11;17, set it for a bill once its computed
"RTN","RCXFMSUF",23,0)
 ;  until all references to the fund are eliminated.
"RTN","RCXFMSUF",24,0)
 ;  rceft = 1 if processing an EFT deposit
"RTN","RCXFMSUF",25,0)
 ;
"RTN","RCXFMSUF",26,0)
 N ACTDATE,CATEGDA,FUND,NEWFUND
"RTN","RCXFMSUF",27,0)
 ;
"RTN","RCXFMSUF",28,0)
 ;  calculate a bills fund
"RTN","RCXFMSUF",29,0)
 I $G(RCEFT)=1 S FUND="5287"_$S(DT<3030926:"",DT'<3030926&(DT<$$ADDPTEDT^PRCAACC()):".4",1:"04") Q FUND
"RTN","RCXFMSUF",30,0)
 S CATEGDA=+$P($G(^PRCA(430,BILLDA,0)),"^",2)
"RTN","RCXFMSUF",31,0)
 I CATEGDA>47 Q ""
"RTN","RCXFMSUF",32,0)
 ;
"RTN","RCXFMSUF",33,0)
 ;  piece 5 is new fund, remove spaces
"RTN","RCXFMSUF",34,0)
 S FUND=$P($TR($T(@CATEGDA)," "),";",5)
"RTN","RCXFMSUF",35,0)
 ;
"RTN","RCXFMSUF",36,0)
 ;  set fund 528711 for 3rd party RX bills after 4/27/2011
"RTN","RCXFMSUF",37,0)
 I $$TYP^IBRFN(BILLDA)="PH" D
"RTN","RCXFMSUF",38,0)
 . I (CATEGDA=6)!(CATEGDA=7)!(CATEGDA=9)!(CATEGDA=10),$$CHECKRXS(BILLDA) S FUND=528711
"RTN","RCXFMSUF",39,0)
 ;
"RTN","RCXFMSUF",40,0)
 ;  if category is vendor(17), ex-employee(15), current employee(16)
"RTN","RCXFMSUF",41,0)
 ;  federal agency refund(13), federal agency reimb(14), military(12)
"RTN","RCXFMSUF",42,0)
 ;  set the fund to what is stored in the file.  This was entered
"RTN","RCXFMSUF",43,0)
 ;  by the user during the audit process.  If fund is in the file
"RTN","RCXFMSUF",44,0)
 ;  already, do not need to store it again.
"RTN","RCXFMSUF",45,0)
 ;  if category is nursing home proceeds (40), parking fees (41),
"RTN","RCXFMSUF",46,0)
 ;  cwt proceeds (42), comp & pen proceeds (43), enhanced use lease
"RTN","RCXFMSUF",47,0)
 ;  proceeds (44), set the fund to what is stored in the file.
"RTN","RCXFMSUF",48,0)
 ;  This was generated by the software at the time of bill enter.
"RTN","RCXFMSUF",49,0)
 I CATEGDA=17!(CATEGDA=15)!(CATEGDA=16)!(CATEGDA=13)!(CATEGDA=14)!(CATEGDA=12)!(CATEGDA=40)!(CATEGDA=41)!(CATEGDA=42)!(CATEGDA=43)!(CATEGDA=44) D
"RTN","RCXFMSUF",50,0)
 .   I $P($G(^PRCA(430,BILLDA,11)),"^",17)'="" S FUND=$P(^(11),"^",17),DONTSTOR=1
"RTN","RCXFMSUF",51,0)
 ;
"RTN","RCXFMSUF",52,0)
 ;  public law states that bills in the category ineligible (1),
"RTN","RCXFMSUF",53,0)
 ;  emerg/human (2), torts (10), or medicare (21) which are older 
"RTN","RCXFMSUF",54,0)
 ;  than oct 1, 1992 should be reported under fund 3220.
"RTN","RCXFMSUF",55,0)
 I CATEGDA=1!(CATEGDA=2)!(CATEGDA=10)!(CATEGDA=21) D
"RTN","RCXFMSUF",56,0)
 .   S ACTDATE=$P($G(^PRCA(430,BILLDA,6)),"^",21)
"RTN","RCXFMSUF",57,0)
 .   I ACTDATE,ACTDATE<2921001 S FUND=3220 Q
"RTN","RCXFMSUF",58,0)
 .   ;
"RTN","RCXFMSUF",59,0)
 .   ;  patch157 changes ineligibles.  an ineligible activated before
"RTN","RCXFMSUF",60,0)
 .   ;  oct 1, 1992 or after sep 30, 2000 will be recorded in fund 0160A1.
"RTN","RCXFMSUF",61,0)
 .   ;  otherwise it will be recorded in fund 5287.3 if before 3040928
"RTN","RCXFMSUF",62,0)
 .   ; if 3040928 or after,  fund should be 528703
"RTN","RCXFMSUF",63,0)
 .   I CATEGDA=1,ACTDATE,ACTDATE<3001001 S FUND=$S(DT<$$ADDPTEDT^PRCAACC():"5287.3",1:528703)
"RTN","RCXFMSUF",64,0)
 ;
"RTN","RCXFMSUF",65,0)
 ;  set the fund for the bill
"RTN","RCXFMSUF",66,0)
 ; PRCA*4.5*310/DRF Add Non-VA fund 528713
"RTN","RCXFMSUF",67,0)
 I $G(DONTSTOR)'=1 D STORE^RCXFMSUR(BILLDA,"",FUND)
"RTN","RCXFMSUF",68,0)
 ; 
"RTN","RCXFMSUF",69,0)
 I FUND>528704,FUND<528709!(FUND=528710)!(FUND=528711) Q FUND
"RTN","RCXFMSUF",70,0)
 I FUND=528713 Q FUND
"RTN","RCXFMSUF",71,0)
 ;
"RTN","RCXFMSUF",72,0)
 I $G(REPRODT),REPRODT<3030926,$E(FUND,1,4)=5287 Q 5287
"RTN","RCXFMSUF",73,0)
 I $G(REPRODT),REPRODT<3031001,$E(FUND,1,4)=5287,$G(REFMS) Q 5287
"RTN","RCXFMSUF",74,0)
 I DT<3030926,$E(FUND,1,4)=5287 Q 5287 ; Effective date
"RTN","RCXFMSUF",75,0)
 I $G(REPRODT),REPRODT<$$ADDPTEDT^PRCAACC(),FUND=528709 Q 4032 ;Effective date-528709
"RTN","RCXFMSUF",76,0)
 I $G(REPRODT),REPRODT<3041001,FUND=528709,$G(REFMS) Q 4032 ;Resubmitted documents not held
"RTN","RCXFMSUF",77,0)
 I $G(DATEEND),$E(DATEEND,2,5)<"0410",FUND=528709 Q 4032
"RTN","RCXFMSUF",78,0)
 I DT<$$ADDPTEDT^PRCAACC(),FUND=528709 Q 4032
"RTN","RCXFMSUF",79,0)
 I $G(REPRODT),REPRODT<$$ADDPTEDT^PRCAACC(),FUND=528701 Q 5287.1 ;Effective date-528701
"RTN","RCXFMSUF",80,0)
 I $G(REPRODT),REPRODT<3041001,FUND=528701,$G(REFMS) Q 5287.1 ;Resubmitted documents not held
"RTN","RCXFMSUF",81,0)
 I $G(DATEEND),$E(DATEEND,2,5)<"0410",FUND=528701 Q 5287.1
"RTN","RCXFMSUF",82,0)
 I DT<$$ADDPTEDT^PRCAACC(),FUND=528701 Q 5287.1
"RTN","RCXFMSUF",83,0)
 I $G(REPRODT),REPRODT<$$ADDPTEDT^PRCAACC(),FUND=528703 Q 5287.3 ;Effective date-528703
"RTN","RCXFMSUF",84,0)
 I $G(REPRODT),REPRODT<3041001,FUND=528703,$G(REFMS) Q 5287.3 ;Resubmitted documents not held
"RTN","RCXFMSUF",85,0)
 I $G(DATEEND),$E(DATEEND,2,5)<"0410",FUND=528703 Q 5287.3
"RTN","RCXFMSUF",86,0)
 I DT<$$ADDPTEDT^PRCAACC(),FUND=528703 Q 5287.3
"RTN","RCXFMSUF",87,0)
 I $G(REPRODT),REPRODT<$$ADDPTEDT^PRCAACC(),FUND=528704 Q 5287.4 ;Effective date-528704
"RTN","RCXFMSUF",88,0)
 I $G(REPRODT),REPRODT<3041001,FUND=528704,$G(REFMS) Q 5287.4 ;Resubmitted documents not held
"RTN","RCXFMSUF",89,0)
 I $G(DATEEND),$E(DATEEND,2,5)<"0410",FUND=528704 Q 5287.4
"RTN","RCXFMSUF",90,0)
 I DT<$$ADDPTEDT^PRCAACC(),FUND=528704 Q 5287.4
"RTN","RCXFMSUF",91,0)
 Q FUND
"RTN","RCXFMSUF",92,0)
 ;
"RTN","RCXFMSUF",93,0)
CHECKRXS(BILLDA) ; returns true (1) if bill has any scripts on or after 4/27/11
"RTN","RCXFMSUF",94,0)
 N RXNUM,NEWFUND,FILLDT,ARRXS
"RTN","RCXFMSUF",95,0)
 S NEWFUND=0
"RTN","RCXFMSUF",96,0)
 D SET^IBCSC5A(BILLDA,.ARRXS,)
"RTN","RCXFMSUF",97,0)
 S RXNUM=0,FILLDT=""
"RTN","RCXFMSUF",98,0)
 F  S RXNUM=$O(ARRXS(RXNUM)) Q:RXNUM'>0!(NEWFUND)  D
"RTN","RCXFMSUF",99,0)
 .  S FILLDT=$O(ARRXS(RXNUM,0))
"RTN","RCXFMSUF",100,0)
 .  I FILLDT'<3110427 S NEWFUND=1
"RTN","RCXFMSUF",101,0)
 Q NEWFUND
"RTN","RCXFMSUF",102,0)
 ;
"RTN","RCXFMSUF",103,0)
 ;  this is a listing of all categories and associated funds
"RTN","RCXFMSUF",104,0)
 ;  the label is from the internal entry number in the category
"RTN","RCXFMSUF",105,0)
 ;  file 430.2.  piece 3 is a description, piece 4 is the old fund,
"RTN","RCXFMSUF",106,0)
 ;  piece 5 is the new fund
"RTN","RCXFMSUF",107,0)
 ;  PRCA*4.5*310/DRF Added 45 - FEE REIMB INS to routine.
"RTN","RCXFMSUF",108,0)
0 ;;no fund                       ;       ;    
"RTN","RCXFMSUF",109,0)
1 ;;INELIGIBLE HOSP.              ;3220   ;0160A1
"RTN","RCXFMSUF",110,0)
2 ;;EMERGENCY/HUMANITARIAN        ;0160A1 ;528703
"RTN","RCXFMSUF",111,0)
3 ;;NURSING HOME CARE(NSC)        ;2431   ;528703
"RTN","RCXFMSUF",112,0)
4 ;;OUTPATIENT CARE(NSC)          ;2431   ;528703
"RTN","RCXFMSUF",113,0)
5 ;;HOSPITAL CARE (NSC)           ;2431   ;528703
"RTN","RCXFMSUF",114,0)
6 ;;WORKMAN'S COMP.               ;5014   ;528704
"RTN","RCXFMSUF",115,0)
7 ;;NO-FAULT AUTO ACC.            ;5014   ;528704
"RTN","RCXFMSUF",116,0)
8 ;;CRIME OF PER.VIO.             ;5014   ;528704
"RTN","RCXFMSUF",117,0)
9 ;;REIMBURS.HEALTH INS.          ;5014   ;528704
"RTN","RCXFMSUF",118,0)
10 ;;TORT FEASOR                   ;0160A1 ;528704
"RTN","RCXFMSUF",119,0)
11 ;;no entry                      ;       ;
"RTN","RCXFMSUF",120,0)
12 ;;MILITARY                      ;0160A1 ;0160A1
"RTN","RCXFMSUF",121,0)
13 ;;FEDERAL AGENCIES-REFUND       ;0160A1 ;0160A1
"RTN","RCXFMSUF",122,0)
14 ;;FEDERAL AGENCIES-REIMB.       ;0160A1 ;0160A1
"RTN","RCXFMSUF",123,0)
15 ;;EX-EMPLOYEE                   ;0160A1 ;0160A1
"RTN","RCXFMSUF",124,0)
16 ;;CURRENT EMP.                  ;0160A1 ;0160A1
"RTN","RCXFMSUF",125,0)
17 ;;VENDOR                        ;0160A1 ;0160A1
"RTN","RCXFMSUF",126,0)
18 ;;C (MEANS TEST)                ;2431   ;528703
"RTN","RCXFMSUF",127,0)
19 ;;SHARING AGREEMENTS            ;0160A1 ;0160A1
"RTN","RCXFMSUF",128,0)
20 ;;INTERAGENCY                   ;0160A1 ;0160A1
"RTN","RCXFMSUF",129,0)
21 ;;MEDICARE                      ;5014   ;528704
"RTN","RCXFMSUF",130,0)
22 ;;RX CO-PAYMENT/SC VET          ;5014   ;528701
"RTN","RCXFMSUF",131,0)
23 ;;RX CO-PAYMENT/NSC VET         ;5014   ;528701
"RTN","RCXFMSUF",132,0)
24 ;;NURSING HOME CARE PER DIEM    ;2431   ;528703
"RTN","RCXFMSUF",133,0)
25 ;;HOSPITAL CARE PER DIEM        ;2431   ;528703
"RTN","RCXFMSUF",134,0)
26 ;;PREPAYMENT                    ;5014   ;528703
"RTN","RCXFMSUF",135,0)
27 ;;CHAMPVA SUBSISTENCE           ;3220   ;3220
"RTN","RCXFMSUF",136,0)
28 ;;CHAMPVA THIRD PARTY           ;3220   ;0160A1
"RTN","RCXFMSUF",137,0)
29 ;;CHAMPVA                       ;0160A1 ;0160A1
"RTN","RCXFMSUF",138,0)
30 ;;TRICARE                       ;0160A1 ;0160A1
"RTN","RCXFMSUF",139,0)
31 ;;TRICARE PATIENT               ;0160A1 ;0160A1
"RTN","RCXFMSUF",140,0)
32 ;;TRICARE THIRD PARTY           ;0160A1 ;0160A1
"RTN","RCXFMSUF",141,0)
33 ;;ADULT DAY HEALTH CARE         ;4032   ;528709
"RTN","RCXFMSUF",142,0)
34 ;;DOMICILIARY                   ;4032   ;528709
"RTN","RCXFMSUF",143,0)
35 ;;RESPITE CARE-INSTITUTIONAL    ;4032   ;528709
"RTN","RCXFMSUF",144,0)
36 ;;RESPITE CARE-NON-INSTITUTIONAL;4032   ;528709
"RTN","RCXFMSUF",145,0)
37 ;;GERIATRIC EVAL-INSTITUTIONAL  ;4032   ;528709
"RTN","RCXFMSUF",146,0)
38 ;;GERIATRIC EVAL-NON-INSTITUTION;4032   ;528709
"RTN","RCXFMSUF",147,0)
39 ;;NURSING HOME CARE-LTC         ;4032   ;528709
"RTN","RCXFMSUF",148,0)
40 ;;NURSING HOME PROCEEDS         ;       ;528705
"RTN","RCXFMSUF",149,0)
41 ;;PARKING FEES                  ;       ;528706
"RTN","RCXFMSUF",150,0)
42 ;;CWT PROCEEDS                  ;       ;528707
"RTN","RCXFMSUF",151,0)
43 ;;COMP & PEN PROCEEDS           ;       ;528708
"RTN","RCXFMSUF",152,0)
44 ;;ENHANCED USE LEASE PROCEEDS   ;5358.3 ;528710
"RTN","RCXFMSUF",153,0)
45 ;;FEE REIMB INS                 ;       ;528713
"RTN","RCXFMSUF",154,0)
46 ;;EMERGENCY/HUMANITARIAN REIMB. ;       ;528704  ;315
"RTN","RCXFMSUF",155,0)
47 ;;INELIGIBLE REIMB. INS.        ;       ;0160A1  ;315
"RTN","RCXFMSUF",156,0)
 ;    
"RTN","RCXFMSUR")
0^25^B63503809^B60950863
"RTN","RCXFMSUR",1,0)
RCXFMSUR ;WISC/RFJ-revenue source codes ;10/19/10 1:47pm
"RTN","RCXFMSUR",2,0)
 ;;4.5;Accounts Receivable;**90,101,170,203,173,220,231,273,310,315**;Mar 20, 1995;Build 67
"RTN","RCXFMSUR",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCXFMSUR",4,0)
 Q
"RTN","RCXFMSUR",5,0)
 ;
"RTN","RCXFMSUR",6,0)
 ;
"RTN","RCXFMSUR",7,0)
CALCRSC(BILLDA,RCEFT) ;  calculate the revenue source code for a bill
"RTN","RCXFMSUR",8,0)
 ;  rceft = 1 if processing an EFT deposit
"RTN","RCXFMSUR",9,0)
 ;  returns the 4 column (character) rsc
"RTN","RCXFMSUR",10,0)
 N CATEGDA,COLUMN1,COLUMN2,COLUMN3,COLUMN4,RSC
"RTN","RCXFMSUR",11,0)
 ;  if rsc already calculated, return it
"RTN","RCXFMSUR",12,0)
 I $G(RCEFT)=1 S RSC="8NZZ" Q RSC
"RTN","RCXFMSUR",13,0)
 S RSC=$P($G(^PRCA(430,BILLDA,11)),"^",23)
"RTN","RCXFMSUR",14,0)
 I $L(RSC)=4,RSC'="ARRV" Q RSC
"RTN","RCXFMSUR",15,0)
 ;
"RTN","RCXFMSUR",16,0)
 ;  calculate it and store it
"RTN","RCXFMSUR",17,0)
 S CATEGDA=+$P($G(^PRCA(430,BILLDA,0)),"^",2)
"RTN","RCXFMSUR",18,0)
 ;
"RTN","RCXFMSUR",19,0)
 ;  if prepayment, send ARRV
"RTN","RCXFMSUR",20,0)
 I CATEGDA=26 D STORE(BILLDA,"ARRV") Q "ARRV"
"RTN","RCXFMSUR",21,0)
 ;
"RTN","RCXFMSUR",22,0)
 S COLUMN1=$$COLUMN1
"RTN","RCXFMSUR",23,0)
 ;
"RTN","RCXFMSUR",24,0)
 ; check for 3rd party RX bills after 4/27/2011 for col 2
"RTN","RCXFMSUR",25,0)
 N RX3P S RX3P=0
"RTN","RCXFMSUR",26,0)
 I ("PH"=$$TYP^IBRFN(BILLDA)) D
"RTN","RCXFMSUR",27,0)
 .  S RX3P=$$CHECKRXS^RCXFMSUF(BILLDA)
"RTN","RCXFMSUR",28,0)
 ;
"RTN","RCXFMSUR",29,0)
 S COLUMN2=$$COLUMN2
"RTN","RCXFMSUR",30,0)
 ;
"RTN","RCXFMSUR",31,0)
 ;  if column2 cannot be determined, return the rsc of ARRV
"RTN","RCXFMSUR",32,0)
 I COLUMN2="" D STORE(BILLDA,"ARRV") Q "ARRV"
"RTN","RCXFMSUR",33,0)
 ;
"RTN","RCXFMSUR",34,0)
 ;  if column2 is not a 5 for reimbursable health insurance, or category not 45 (FEE REIMB INS)
"RTN","RCXFMSUR",35,0)
 ;  return ZZ in columns 3 and 4
"RTN","RCXFMSUR",36,0)
 I COLUMN2'=5,CATEGDA'=45 D STORE(BILLDA,COLUMN1_COLUMN2_"ZZ") Q COLUMN1_COLUMN2_"ZZ"
"RTN","RCXFMSUR",37,0)
 ;
"RTN","RCXFMSUR",38,0)
 ;  for reimbursable health insurance, compute columns 3 and 4
"RTN","RCXFMSUR",39,0)
 S COLUMN3=$$COLUMN3
"RTN","RCXFMSUR",40,0)
 S COLUMN4=$$COLUMN4
"RTN","RCXFMSUR",41,0)
 ;
"RTN","RCXFMSUR",42,0)
 D STORE(BILLDA,COLUMN1_COLUMN2_COLUMN3_COLUMN4)
"RTN","RCXFMSUR",43,0)
 Q COLUMN1_COLUMN2_COLUMN3_COLUMN4
"RTN","RCXFMSUR",44,0)
 ;
"RTN","RCXFMSUR",45,0)
 ;
"RTN","RCXFMSUR",46,0)
STORE(DA,RSC,FUND) ;  store the revenue source code  or fund in the file
"RTN","RCXFMSUR",47,0)
 I $G(^PRCA(430,DA,0))="" Q
"RTN","RCXFMSUR",48,0)
 N D,D0,DI,DIC,DIE,DQ,DR,X,Y
"RTN","RCXFMSUR",49,0)
 S DR=""
"RTN","RCXFMSUR",50,0)
 I $G(RSC)'="" S DR="255.1////"_RSC_";"
"RTN","RCXFMSUR",51,0)
 I $G(FUND)'="" S DR=DR_"203////"_FUND_";"
"RTN","RCXFMSUR",52,0)
 S (DIC,DIE)="^PRCA(430,"
"RTN","RCXFMSUR",53,0)
 D ^DIE
"RTN","RCXFMSUR",54,0)
 Q
"RTN","RCXFMSUR",55,0)
 ;
"RTN","RCXFMSUR",56,0)
 ;
"RTN","RCXFMSUR",57,0)
COLUMN1() ;  return column 1 number
"RTN","RCXFMSUR",58,0)
 Q 8
"RTN","RCXFMSUR",59,0)
 ;
"RTN","RCXFMSUR",60,0)
 ;
"RTN","RCXFMSUR",61,0)
COLUMN2() ;  return column 2 number
"RTN","RCXFMSUR",62,0)
 I CATEGDA=5 Q 1     ; hospital care (nsc)
"RTN","RCXFMSUR",63,0)
 I CATEGDA=4 Q 2     ; outpatient care (nsc)
"RTN","RCXFMSUR",64,0)
 I CATEGDA=3 Q 3     ; nursing home care (nsc)
"RTN","RCXFMSUR",65,0)
 I CATEGDA=1 Q 4     ; ineligible hospital
"RTN","RCXFMSUR",66,0)
 I CATEGDA=9&$G(RX3P) Q "R"    ; pharmacy reimbursable health insurance
"RTN","RCXFMSUR",67,0)
 I CATEGDA=9 Q 5     ; reimbursable health insurance
"RTN","RCXFMSUR",68,0)
 I CATEGDA=10&$G(RX3P) Q "S"     ; pharmacy tort feasor
"RTN","RCXFMSUR",69,0)
 I CATEGDA=10 Q 6    ; tort feasor
"RTN","RCXFMSUR",70,0)
 I CATEGDA=6&$G(RX3P) Q "T"     ;pharmacy workman's comp
"RTN","RCXFMSUR",71,0)
 I CATEGDA=6 Q 7     ; workmans comp
"RTN","RCXFMSUR",72,0)
 I CATEGDA=18 Q 8    ; c (means test)
"RTN","RCXFMSUR",73,0)
 I CATEGDA=2 Q 9     ; emergency/humanitarian
"RTN","RCXFMSUR",74,0)
 I CATEGDA=7&$G(RX3P) Q "Q"     ;pharmacy no fault auto acc
"RTN","RCXFMSUR",75,0)
 I CATEGDA=7 Q "A"   ; no fault auto accident
"RTN","RCXFMSUR",76,0)
 I CATEGDA=22 Q "B"  ; rx copay/sc vet
"RTN","RCXFMSUR",77,0)
 I CATEGDA=23 Q "C"  ; rx copay/nsc vet
"RTN","RCXFMSUR",78,0)
 I CATEGDA=24 Q "D"  ; nursing home care per diem
"RTN","RCXFMSUR",79,0)
 I CATEGDA=25 Q "E"  ; hospital care per diem
"RTN","RCXFMSUR",80,0)
 I CATEGDA=21 Q "F"  ; medicare
"RTN","RCXFMSUR",81,0)
 I CATEGDA=33 Q "G"  ; adult day health care
"RTN","RCXFMSUR",82,0)
 I CATEGDA=34 Q "H"  ; domiciliary
"RTN","RCXFMSUR",83,0)
 I CATEGDA=35 Q "I"  ; respite care - institutional
"RTN","RCXFMSUR",84,0)
 I CATEGDA=36 Q "J"  ; respite care - non-institutional
"RTN","RCXFMSUR",85,0)
 I CATEGDA=37 Q "K"  ; geriatric evaluation - institutional
"RTN","RCXFMSUR",86,0)
 I CATEGDA=38 Q "L"  ; geriatric evaluation - non-institutional
"RTN","RCXFMSUR",87,0)
 I CATEGDA=39 Q "M"  ; nursing home care - ltc
"RTN","RCXFMSUR",88,0)
 I CATEGDA=45 Q "F"  ; Fee Basis
"RTN","RCXFMSUR",89,0)
 I CATEGDA=46 D  Q COLUMN2
"RTN","RCXFMSUR",90,0)
 . N COL
"RTN","RCXFMSUR",91,0)
 . D DIQ399(BILLDA)
"RTN","RCXFMSUR",92,0)
 . S COL=$G(IBCNDATA(399,BILLDA,.05,"I"))
"RTN","RCXFMSUR",93,0)
 . S COLUMN2=$S(COL=1:"U",COL=2:"U",COL=3:"V",1:"V")
"RTN","RCXFMSUR",94,0)
 Q ""
"RTN","RCXFMSUR",95,0)
 ;
"RTN","RCXFMSUR",96,0)
 ;
"RTN","RCXFMSUR",97,0)
COLUMN3() ;  return the column 3 number
"RTN","RCXFMSUR",98,0)
 N AGE,DECIMAL,DFN,IBCNDATA,TYPEAGE,TYPECARE,TYPEMEAN,TYPESERV,VA,VADM,VAERR
"RTN","RCXFMSUR",99,0)
 ;
"RTN","RCXFMSUR",100,0)
 D DIQ399(BILLDA)
"RTN","RCXFMSUR",101,0)
 ;
"RTN","RCXFMSUR",102,0)
 ;  PRCA*4.5*310/DRF
"RTN","RCXFMSUR",103,0)
 ;  for Fee Basis, column3 = 1 (inpatient) or 2 (outpatient)
"RTN","RCXFMSUR",104,0)
 I CATEGDA=45 S COLUMN3=$S($G(IBCNDATA(399,BILLDA,.05,"I"))=1:1,$G(IBCNDATA(399,BILLDA,.05,"I"))=2:2,1:2) Q COLUMN3
"RTN","RCXFMSUR",105,0)
 ;
"RTN","RCXFMSUR",106,0)
 D TYPECARE
"RTN","RCXFMSUR",107,0)
 ;
"RTN","RCXFMSUR",108,0)
 ;  compute service connected at time of care (1 digit binary)
"RTN","RCXFMSUR",109,0)
 ;  type of service connected is set as follows:
"RTN","RCXFMSUR",110,0)
 ;        0 = SC Vet                   1 = NSC Vet
"RTN","RCXFMSUR",111,0)
 S TYPESERV=1
"RTN","RCXFMSUR",112,0)
 ;  service connected at time of care (.18) = yes (1)
"RTN","RCXFMSUR",113,0)
 I $G(IBCNDATA(399,BILLDA,.18,"I"))=1 S TYPESERV=0
"RTN","RCXFMSUR",114,0)
 ;
"RTN","RCXFMSUR",115,0)
 S DFN=$P($G(^PRCA(430,BILLDA,0)),"^",7)
"RTN","RCXFMSUR",116,0)
 D DEM^VADPT
"RTN","RCXFMSUR",117,0)
 ;
"RTN","RCXFMSUR",118,0)
 ;  compute means test at time of care (1 digit binary)
"RTN","RCXFMSUR",119,0)
 ;  type of means test is set as follows:
"RTN","RCXFMSUR",120,0)
 ;        0 = Cat A                    1 = Cat C
"RTN","RCXFMSUR",121,0)
 S TYPEMEAN=0
"RTN","RCXFMSUR",122,0)
 I $$BIL^DGMTUB(DFN,$G(IBCNDATA(399,BILLDA,151,"I")))=1 S TYPEMEAN=1
"RTN","RCXFMSUR",123,0)
 ;
"RTN","RCXFMSUR",124,0)
 ;  compute patient age at time of care (1 digit binary)
"RTN","RCXFMSUR",125,0)
 ;  type of age is set as follows:
"RTN","RCXFMSUR",126,0)
 ;        0 = under 65                 1 = 65 and older
"RTN","RCXFMSUR",127,0)
 S AGE=$$FMDIFF^XLFDT($G(IBCNDATA(399,BILLDA,151,"I")),$P($G(VADM(3)),"^"))\365.25
"RTN","RCXFMSUR",128,0)
 S TYPEAGE=1
"RTN","RCXFMSUR",129,0)
 I AGE<65 S TYPEAGE=0
"RTN","RCXFMSUR",130,0)
 ;
"RTN","RCXFMSUR",131,0)
 ;  convert to decimal  typecare  typeserv  typemean  typeage
"RTN","RCXFMSUR",132,0)
 ;             binary=  1   1         1         1         1
"RTN","RCXFMSUR",133,0)
 ;            decimal= 16 + 8     +   4     +   2     +   1
"RTN","RCXFMSUR",134,0)
 S DECIMAL=$S(TYPECARE="11":24,TYPECARE="10":16,TYPECARE="01":8,1:0)
"RTN","RCXFMSUR",135,0)
 I TYPESERV S DECIMAL=DECIMAL+4
"RTN","RCXFMSUR",136,0)
 I TYPEMEAN S DECIMAL=DECIMAL+2
"RTN","RCXFMSUR",137,0)
 I TYPEAGE S DECIMAL=DECIMAL+1
"RTN","RCXFMSUR",138,0)
 I DECIMAL<10 Q DECIMAL
"RTN","RCXFMSUR",139,0)
 Q $C(65+DECIMAL-10)
"RTN","RCXFMSUR",140,0)
 ;
"RTN","RCXFMSUR",141,0)
 ;
"RTN","RCXFMSUR",142,0)
COLUMN4() ;  return the column 4 number (reserved for future expansion)
"RTN","RCXFMSUR",143,0)
 Q "Z"
"RTN","RCXFMSUR",144,0)
 ;
"RTN","RCXFMSUR",145,0)
 ;
"RTN","RCXFMSUR",146,0)
DIQ399(DA)  ;  get data from file 399
"RTN","RCXFMSUR",147,0)
 N D0,DIC,DIQ,DIQ2,DR
"RTN","RCXFMSUR",148,0)
 K IBCNDATA
"RTN","RCXFMSUR",149,0)
 S DIQ(0)="IE",DIC="^DGCR(399,",DIQ="IBCNDATA",DR=".04;.05;.18;151;" D EN^DIQ1
"RTN","RCXFMSUR",150,0)
 Q
"RTN","RCXFMSUR",151,0)
 ;
"RTN","RCXFMSUR",152,0)
 ;
"RTN","RCXFMSUR",153,0)
TYPECARE ;  compute type of care (2 digit binary)
"RTN","RCXFMSUR",154,0)
 ;  type of care is set as follows:
"RTN","RCXFMSUR",155,0)
 ;      00 = inpatient (hospital)    01 = outpatient
"RTN","RCXFMSUR",156,0)
 ;      10 = nursing home            11 = other
"RTN","RCXFMSUR",157,0)
 ;  default is other if it cannot be computed
"RTN","RCXFMSUR",158,0)
 S TYPECARE="11"
"RTN","RCXFMSUR",159,0)
 ;  bill classification (.05) = outpatient (3) or human.emerg(opt) (4)
"RTN","RCXFMSUR",160,0)
 I $G(IBCNDATA(399,BILLDA,.05,"I"))=3!($G(IBCNDATA(399,BILLDA,.05,"I"))=4) S TYPECARE="01" Q
"RTN","RCXFMSUR",161,0)
 ;  location of care (.04) = hospital inpt or outpt (1)
"RTN","RCXFMSUR",162,0)
 I $G(IBCNDATA(399,BILLDA,.04,"I"))=1 S TYPECARE="00" Q
"RTN","RCXFMSUR",163,0)
 ;  location of care (.04) = skilled nursing (nhcu) (2)
"RTN","RCXFMSUR",164,0)
 I $G(IBCNDATA(399,BILLDA,.04,"I"))=2 S TYPECARE="10"
"RTN","RCXFMSUR",165,0)
 Q
"RTN","RCXFMSUR",166,0)
 ;
"RTN","RCXFMSUR",167,0)
 ;
"RTN","RCXFMSUR",168,0)
ADDEDIT ;  enter/edit revenue source codes for fund 0160A1 bills.  These
"RTN","RCXFMSUR",169,0)
 ;  bills have the rsc entered by the user.  The user can select
"RTN","RCXFMSUR",170,0)
 ;  from rscs in file 347.3
"RTN","RCXFMSUR",171,0)
 W !!,"This option should be used with CAUTION.  This option will allow the"
"RTN","RCXFMSUR",172,0)
 W !,"user owning the PRCASVC supervisor security key, to add or edit the"
"RTN","RCXFMSUR",173,0)
 W !,"Revenue Source Codes selectable for non MCCF bills.  If an invalid"
"RTN","RCXFMSUR",174,0)
 W !,"Revenue Source Code is entered or changed, all code sheets sent to"
"RTN","RCXFMSUR",175,0)
 W !,"FMS referencing the invalid Revenue Source Code will reject.  Be"
"RTN","RCXFMSUR",176,0)
 W !,"cautious when entering new Revenue Source Codes or editing existing"
"RTN","RCXFMSUR",177,0)
 W !,"Revenue Source Codes.  New Revenue Source Codes should only be added"
"RTN","RCXFMSUR",178,0)
 W !,"after they have been added in FMS."
"RTN","RCXFMSUR",179,0)
 ;
"RTN","RCXFMSUR",180,0)
 I '$D(^XUSEC("PRCASVC",DUZ)) W !!,"You are not an owner of the PRCASVC security key." Q
"RTN","RCXFMSUR",181,0)
 ;
"RTN","RCXFMSUR",182,0)
 N %,%Y,C,D,D0,DA,DI,DIC,DIE,DLAYGO,DQ,DR,RCRJFLAG,X,X1,X2,X3,Y
"RTN","RCXFMSUR",183,0)
 ;
"RTN","RCXFMSUR",184,0)
 F  D  Q:$G(RCRJFLAG)
"RTN","RCXFMSUR",185,0)
 . S (DIC,DIE)="^RC(347.3,",DIC(0)="QEL",DLAYGO=347.3
"RTN","RCXFMSUR",186,0)
 . R !!,"Select REVENUE SOURCE CODE: ",X:DTIME
"RTN","RCXFMSUR",187,0)
 . S X1=X,X=$$UPPER^VALM1(X)
"RTN","RCXFMSUR",188,0)
 . I $E(X)="?",X?."?" D ^DIC Q:Y<1
"RTN","RCXFMSUR",189,0)
 . I X=""!($E(X)=U) S RCRJFLAG=1 Q
"RTN","RCXFMSUR",190,0)
 . I $D(^RC(347.3,"B",X)) S Y=+$O(^(X,0)) W "   ",X,"  ",$P($G(^RC(347.3,Y,0)),U,2) W:$P(^(0),U,3) "  INACTIVE" D UPD Q 
"RTN","RCXFMSUR",191,0)
 . S X2=$L(X1),X3=$C($A($E(X1,X2))-1),X3=$E(X1,1,X2-1)_X3,X3=$O(^RC(347.3,"C",X3)) I $E(X3,1,X2)=X1 S X=X1
"RTN","RCXFMSUR",192,0)
 . S D="C" D IX^DIC Q:Y<1  D UPD Q
"RTN","RCXFMSUR",193,0)
 Q
"RTN","RCXFMSUR",194,0)
UPD S DIE="^RC(347.3,",DA=+Y,DR=".02;.03" D ^DIE
"RTN","RCXFMSUR",195,0)
 Q
"RTN","RCXFMSUR",196,0)
 ;
"RTN","RCXFMSUR",197,0)
 ;
"RTN","RCXFMSUR",198,0)
RSC ;revenue code (#430/255)
"RTN","RCXFMSUR",199,0)
 I $P($G(^RC(347.3,X,0)),"^",3) D EN^DDIOL("THIS REVENUE SOURCE CODE IS INACTIVE.") K X Q
"RTN","RCXFMSUR",200,0)
 S X=$P(^RC(347.3,X,0),"^")
"RTN","RCXFMSUR",201,0)
 Q
"RTN","RCXFMSUR",202,0)
 ;
"RTN","RCXFMSUR",203,0)
SHOW ;  show/calculate revenue source code for a selected bill
"RTN","RCXFMSUR",204,0)
 W !!,"This option will show the calculated Revenue Source Code for a selected"
"RTN","RCXFMSUR",205,0)
 W !,"bill.  The Revenue Source Code is only calculated for accrued bills in"
"RTN","RCXFMSUR",206,0)
 I DT'<$$ADDPTEDT^PRCAACC() W !,"funds 528701,528703,528704,528709/4032,528711,528713"
"RTN","RCXFMSUR",207,0)
 I DT<$$ADDPTEDT^PRCAACC() W !,"funds 5287.1,5287.3,5287.4,4032"
"RTN","RCXFMSUR",208,0)
 ;
"RTN","RCXFMSUR",209,0)
 N %,%Y,BILLDA,C,DIC,FUND,I,RCRJFLAG,RSC,X,Y
"RTN","RCXFMSUR",210,0)
 ;
"RTN","RCXFMSUR",211,0)
 F  D  Q:$G(RCRJFLAG)
"RTN","RCXFMSUR",212,0)
 .   S DIC="^PRCA(430,",DIC(0)="QEAM"
"RTN","RCXFMSUR",213,0)
 .   W ! D ^DIC
"RTN","RCXFMSUR",214,0)
 .   I Y<1 S RCRJFLAG=1 Q
"RTN","RCXFMSUR",215,0)
 .   S BILLDA=+Y
"RTN","RCXFMSUR",216,0)
 .   S FUND=$$GETFUNDB^RCXFMSUF(BILLDA,1)
"RTN","RCXFMSUR",217,0)
 .   W !!,"        Bill Number: ",$P($G(^PRCA(430,BILLDA,0)),"^")
"RTN","RCXFMSUR",218,0)
 .   W !,"               Fund: ",FUND
"RTN","RCXFMSUR",219,0)
 .   I '$$PTACCT^PRCAACC(FUND),FUND'=4032 D  Q
"RTN","RCXFMSUR",220,0)
 .   .   W !,"  The Revenue Source Code cannot be calculated for non-accrued bills."
"RTN","RCXFMSUR",221,0)
 .   .   W !,"  The Revenue Source Code for non-accrued bills are input by the user."
"RTN","RCXFMSUR",222,0)
 .   .   W !,"  The Revenue Source Code is currently entered as: "
"RTN","RCXFMSUR",223,0)
 .   .   S RSC=$P($G(^PRCA(430,BILLDA,11)),"^",6)
"RTN","RCXFMSUR",224,0)
 .   .   W $S(RSC="":"<not entered>",1:RSC)
"RTN","RCXFMSUR",225,0)
 .   ;
"RTN","RCXFMSUR",226,0)
 .   S RSC=$$CALCRSC(BILLDA)
"RTN","RCXFMSUR",227,0)
 .   W !,"Revenue Source Code: ",RSC
"RTN","RCXFMSUR",228,0)
 Q
"RTN","RCXFMSUV")
0^38^B15839120^B13868854
"RTN","RCXFMSUV",1,0)
RCXFMSUV ;WISC/RFJ-fms vendor id ;9/17/98  11:42 AM
"RTN","RCXFMSUV",2,0)
 ;;4.5;Accounts Receivable;**90,119,98,165,192,220,315**;Mar 20, 1995;Build 67
"RTN","RCXFMSUV",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCXFMSUV",4,0)
 Q
"RTN","RCXFMSUV",5,0)
 ;
"RTN","RCXFMSUV",6,0)
 ;
"RTN","RCXFMSUV",7,0)
VENDORID(BILLDA) ;  return the vendorid for a bill (used on a BD document)
"RTN","RCXFMSUV",8,0)
 ;  returns null if vendor id is not required
"RTN","RCXFMSUV",9,0)
 ;  returns UNKNOWN if vendor id is required but could not be determined
"RTN","RCXFMSUV",10,0)
 N ACCRUAL,CATEGORY,DEBTOR,RSC,VENDORID,VENDOR,DIR,VENFLAG
"RTN","RCXFMSUV",11,0)
 ;
"RTN","RCXFMSUV",12,0)
 ;  accrued bills get sent to mccf 5287 fund, no vendor id
"RTN","RCXFMSUV",13,0)
 S ACCRUAL=$$ACCK^PRCAACC(BILLDA)
"RTN","RCXFMSUV",14,0)
 ;
"RTN","RCXFMSUV",15,0)
 ;  if not a category, cannot determine vendor id
"RTN","RCXFMSUV",16,0)
 S CATEGORY=$P($G(^PRCA(430,BILLDA,0)),"^",2)
"RTN","RCXFMSUV",17,0)
 I 'CATEGORY Q ""
"RTN","RCXFMSUV",18,0)
 I ACCRUAL Q "" ;
"RTN","RCXFMSUV",19,0)
 ;
"RTN","RCXFMSUV",20,0)
 ;
"RTN","RCXFMSUV",21,0)
 ;  if vendor(17) or military(12) or federal agencies refund(13)
"RTN","RCXFMSUV",22,0)
 ;  or federal agencies-reimb(14) or interagency(20)
"RTN","RCXFMSUV",23,0)
 ;  sharing agreements(19),nursing Home Proceeds (40)
"RTN","RCXFMSUV",24,0)
 ;  parking fees (41), cwt proceeds (42), comp & pen proceeds (43)
"RTN","RCXFMSUV",25,0)
 ;  Enhanced Use Lease Proceeds (44), then get vendor id
"RTN","RCXFMSUV",26,0)
 S VENFLAG=$S(CATEGORY=17:2,CATEGORY=12:1,CATEGORY=13:1,CATEGORY=14:1,CATEGORY=20:1,CATEGORY=19:1,CATEGORY=40:2,CATEGORY=41:2,CATEGORY=42:2,CATEGORY=43:2,CATEGORY=44:2,CATEGORY=47:1,1:0)
"RTN","RCXFMSUV",27,0)
 I VENFLAG D  Q VENDORID
"RTN","RCXFMSUV",28,0)
    .S DEBTOR=+$P($G(^PRCA(430,BILLDA,0)),"^",9),VENDOR=$P($G(^RCD(340,DEBTOR,0)),U)
"RTN","RCXFMSUV",29,0)
    .I VENDOR="" S VENDORID="UNKNOWN" Q
"RTN","RCXFMSUV",30,0)
    .I VENFLAG=2,VENDOR["VA(" S VENDORID="PERSONOTH" D STORE(BILLDA,"PERSONOTH") Q
"RTN","RCXFMSUV",31,0)
    .I VENDOR["PRC(" D  Q
"RTN","RCXFMSUV",32,0)
       ..S VENDORID=$$VEN^PRCHUTL(+VENDOR)
"RTN","RCXFMSUV",33,0)
       ..I VENDORID'="" D STORE(BILLDA,VENDORID) Q
"RTN","RCXFMSUV",34,0)
       ..I VENFLAG=2 D  Q
"RTN","RCXFMSUV",35,0)
         ...S DIR(0)="Y",DIR("A")="Can this bill be offset by FMS "
"RTN","RCXFMSUV",36,0)
         ...S DIR("B")="YES" D ^DIR
"RTN","RCXFMSUV",37,0)
         ...S VENDORID=$S(Y=0:"PERSONOTH",1:"UNKNOWN")
"RTN","RCXFMSUV",38,0)
         ...D:VENDORID="PERSONOTH" STORE(BILLDA,"PERSONOTH")
"RTN","RCXFMSUV",39,0)
         ...Q
"RTN","RCXFMSUV",40,0)
       ..S VENDORID="UNKNOWN"
"RTN","RCXFMSUV",41,0)
       ..Q
"RTN","RCXFMSUV",42,0)
    .S VENDOR=$P(^RCD(340,+DEBTOR,0),U,6)
"RTN","RCXFMSUV",43,0)
    .I VENDOR'="" S VENDORID=$$VEN^PRCHUTL(VENDOR) D  Q
"RTN","RCXFMSUV",44,0)
       ..I VENDORID="" S VENDORID="UNKNOWN" Q
"RTN","RCXFMSUV",45,0)
       ..D STORE(BILLDA,VENDORID)
"RTN","RCXFMSUV",46,0)
       ..Q
"RTN","RCXFMSUV",47,0)
    .I '$D(^XUSEC("PRCA VENDOR",DUZ)) S VENDORID="LINK" Q
"RTN","RCXFMSUV",48,0)
    .W !!,"DEBTOR MUST BE LINKED TO VENDOR FILE"
"RTN","RCXFMSUV",49,0)
    .S VENDOR=$$VENSEL^PRCHUTL()
"RTN","RCXFMSUV",50,0)
    .I VENDOR<0 S VENDORID="LINK" Q
"RTN","RCXFMSUV",51,0)
    .S VENDORID=$$VEN^PRCHUTL(VENDOR)
"RTN","RCXFMSUV",52,0)
    .I VENDORID="" S VENDORID="UNKNOWN" Q
"RTN","RCXFMSUV",53,0)
    .D STORE(BILLDA,VENDORID),STOREL(+DEBTOR,VENDOR)
"RTN","RCXFMSUV",54,0)
    .Q
"RTN","RCXFMSUV",55,0)
 ;
"RTN","RCXFMSUV",56,0)
 ;  for ineligible send INELIG
"RTN","RCXFMSUV",57,0)
 I CATEGORY=1 D STORE(BILLDA,"INELIG") Q "INELIG"
"RTN","RCXFMSUV",58,0)
 ;  for ex-employee send XEMPL
"RTN","RCXFMSUV",59,0)
 I CATEGORY=15 D STORE(BILLDA,"XEMPL") Q "XEMPL"
"RTN","RCXFMSUV",60,0)
 ;  for current employee send CUREMPL
"RTN","RCXFMSUV",61,0)
 I CATEGORY=16 D STORE(BILLDA,"CUREMPL") Q "CUREMPL"
"RTN","RCXFMSUV",62,0)
 ;
"RTN","RCXFMSUV",63,0)
 ;
"RTN","RCXFMSUV",64,0)
 ;  for INELIGIBLE HOSP. REIMB. 
"RTN","RCXFMSUV",65,0)
 ;  841Z;INELI  3RD-PARTY INPATIENT
"RTN","RCXFMSUV",66,0)
 ;  842Z;INELI  3RD-PARTY OUTPATIENT 
"RTN","RCXFMSUV",67,0)
 I CATEGORY=47 D   Q VENDORID
"RTN","RCXFMSUV",68,0)
 . S RSC=$P($G(^PRCA(430,BILLDA,11)),"^",6)
"RTN","RCXFMSUV",69,0)
 . I RSC'="" D  Q
"RTN","RCXFMSUV",70,0)
 ..I RSC="841Z" S VENDORID="INE3PINP"
"RTN","RCXFMSUV",71,0)
 ..I RSC="842Z" S VENDORID="INE3POUT"
"RTN","RCXFMSUV",72,0)
 . D STORE(BILLDA,VENDORID)
"RTN","RCXFMSUV",73,0)
 ;
"RTN","RCXFMSUV",74,0)
 ;  champva subsitence(27), champva third party(28)
"RTN","RCXFMSUV",75,0)
 I CATEGORY=27 D STORE(BILLDA,"CHMPVA1ST") Q "CHMPVA1ST"
"RTN","RCXFMSUV",76,0)
 I CATEGORY=28 D STORE(BILLDA,"CHMPVA3RD") Q "CHMPVA3RD"
"RTN","RCXFMSUV",77,0)
 ;  champva(29) does not get sent to FMS, code commented out
"RTN","RCXFMSUV",78,0)
 ;I CATEGORY=29 Q ""
"RTN","RCXFMSUV",79,0)
 ;
"RTN","RCXFMSUV",80,0)
 ;  tricare(30), tricare patient(31), tricare third party(32)
"RTN","RCXFMSUV",81,0)
 ;  test for tricare by looking at the revenue source code
"RTN","RCXFMSUV",82,0)
 S RSC=$P($G(^PRCA(430,BILLDA,11)),"^",6)
"RTN","RCXFMSUV",83,0)
 I RSC>8027,RSC<8031 D  D STORE(BILLDA,VENDORID) Q VENDORID
"RTN","RCXFMSUV",84,0)
    .S VENDORID=$S(RSC=8028:"TRIINPAT",RSC=8029:"TRIOUTPAT",1:"TRIOTH")
"RTN","RCXFMSUV",85,0)
    .Q
"RTN","RCXFMSUV",86,0)
 I CATEGORY>29,CATEGORY<33 D  D STORE(BILLDA,VENDORID) Q VENDORID
"RTN","RCXFMSUV",87,0)
    .S VENDORID=$S(CATEGORY=30:"TRICAROTH",CATEGORY=31:"TRICAROPT",1:"TRICARINP")
"RTN","RCXFMSUV",88,0)
    .Q
"RTN","RCXFMSUV",89,0)
 ;  vendor id not known, process should never reach this line of code
"RTN","RCXFMSUV",90,0)
 Q "UNKNOWN"
"RTN","RCXFMSUV",91,0)
 ;
"RTN","RCXFMSUV",92,0)
 ;
"RTN","RCXFMSUV",93,0)
LINKASK ;ENTRY POINT FOR MENU OPTION TO STORE LINK
"RTN","RCXFMSUV",94,0)
 N DIC,Y
"RTN","RCXFMSUV",95,0)
 S DIC=340,DIC(0)="AEQM",DIC("A")="Enter Debtor to be linked to Vendor File: ",DIC("S")="I $P(^RCD(340,+Y,0),U)'[""PRC(""" D ^DIC Q:Y<0  S DEBTOR=+Y
"RTN","RCXFMSUV",96,0)
LINK ;LINKS DEBTOR TO VENDOR FILE
"RTN","RCXFMSUV",97,0)
 S VENDOR=$$VENSEL^PRCHUTL() I VENDOR<0 S VENDOR="LINK" Q
"RTN","RCXFMSUV",98,0)
 D STOREL(DEBTOR,VENDOR) Q
"RTN","RCXFMSUV",99,0)
 ;
"RTN","RCXFMSUV",100,0)
 ;
"RTN","RCXFMSUV",101,0)
STOREL(DA,VENDOR) ;  store the link from the debtor file to the vendor file
"RTN","RCXFMSUV",102,0)
 N D,D0,DI,DIC,DIE,DQ,DR,X,Y
"RTN","RCXFMSUV",103,0)
 S DR=".06////"_VENDOR_";"
"RTN","RCXFMSUV",104,0)
 S (DIC,DIE)="^RCD(340,"
"RTN","RCXFMSUV",105,0)
 D ^DIE
"RTN","RCXFMSUV",106,0)
 Q
"RTN","RCXFMSUV",107,0)
 ;
"RTN","RCXFMSUV",108,0)
 ;
"RTN","RCXFMSUV",109,0)
STORE(DA,VENDORID) ;STORES THE VENDOR ID WITH THE BILL
"RTN","RCXFMSUV",110,0)
 I $G(^PRCA(430,DA,0))="" Q
"RTN","RCXFMSUV",111,0)
 N D0,DI,DIC,DIE,DQ,DR,X,Y,D
"RTN","RCXFMSUV",112,0)
 S DR="265////"_VENDORID_";"
"RTN","RCXFMSUV",113,0)
 S (DIC,DIE)="^PRCA(430,"
"RTN","RCXFMSUV",114,0)
 D ^DIE
"RTN","RCXFMSUV",115,0)
 Q
"UP",430,430.0171,-1)
430^17
"UP",430,430.0171,0)
430.0171
"VER")
8.0^22.2
"^DD",343,343,0)
FIELD^^2^3
"^DD",343,343,0,"DT")
2931013
"^DD",343,343,0,"ID",2)
W:$D(^(2)) "   ",$P(^(2),U,1)
"^DD",343,343,0,"IX","B",343,.01)

"^DD",343,343,0,"NM","AR FORM LETTER")

"^DD",343,343,0,"VRPK")
PRCA
"^DD",343,343,.01,0)
NAME^RFI^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",343,343,.01,1,0)
^.1
"^DD",343,343,.01,1,1,0)
343^B
"^DD",343,343,.01,1,1,1)
S ^RC(343,"B",$E(X,1,30),DA)=""
"^DD",343,343,.01,1,1,2)
K ^RC(343,"B",$E(X,1,30),DA)
"^DD",343,343,.01,1,1,3)
Needed to Look-up AR FORM LETTERS by name.
"^DD",343,343,.01,1,1,"%D",0)
^^3^3^2930609^
"^DD",343,343,.01,1,1,"%D",1,0)
This cross reference is used to look-up follow-up letters by name
"^DD",343,343,.01,1,1,"%D",2,0)
for users and also when printing follow-up letters for patient
"^DD",343,343,.01,1,1,"%D",3,0)
statements and bills.
"^DD",343,343,.01,3)
Answer must be 3-30 characters in length.
"^DD",343,343,.01,21,0)
^^8^8^2930604^^
"^DD",343,343,.01,21,1,0)
The AR form letter name identifies the Form Letter number.  Follow-up
"^DD",343,343,.01,21,2,0)
letters are sent to debtor's based on the bill(s) existing for the
"^DD",343,343,.01,21,3,0)
debtor.  When a certain bill is to be generated, the AR package will
"^DD",343,343,.01,21,4,0)
print the appropriate letter to be attached to the bill.
"^DD",343,343,.01,21,5,0)
 
"^DD",343,343,.01,21,6,0)
The name of the letter SHOULD NEVER be edited as the AR package looks
"^DD",343,343,.01,21,7,0)
for letters based on the name.  If the name is changed, then this will
"^DD",343,343,.01,21,8,0)
cause the letter not to be generated.
"^DD",343,343,.01,"DT")
2940321
"^DD",343,343,1,0)
MAIN FORM BODY^343.01^^1;0
"^DD",343,343,1,21,0)
^^3^3^2931116^^^^
"^DD",343,343,1,21,1,0)
The Main Body of the letter is stored as a word-processing field so that
"^DD",343,343,1,21,2,0)
it can be edited by the user.  All letters have a 'header' and 'trailer'
"^DD",343,343,1,21,3,0)
that follow the main body that is not editable.
"^DD",343,343,2,0)
DESCRIPTION^RF^^2;1^K:$L(X)>65!($L(X)<3) X
"^DD",343,343,2,3)
Answer must be 3-65 characters in length.
"^DD",343,343,2,21,0)
^^2^2^2930609^^
"^DD",343,343,2,21,1,0)
The description of the letter gives a brief over-view of the purpose
"^DD",343,343,2,21,2,0)
of the letter and the conditions that letter should be printed.
"^DD",343,343,2,"DT")
2930518
"^DD",343,343.01,0)
MAIN FORM BODY SUB-FIELD^^.01^1
"^DD",343,343.01,0,"DT")
2931013
"^DD",343,343.01,0,"NM","MAIN FORM BODY")

"^DD",343,343.01,0,"UP")
343
"^DD",343,343.01,.01,0)
MAIN FORM BODY^W^^0;1^Q
"^DD",343,343.01,.01,21,0)
^^3^3^2931116^^^
"^DD",343,343.01,.01,21,1,0)
The Main Body of the letter is stored as a word-processing field so that
"^DD",343,343.01,.01,21,2,0)
it can be edited by the user.  All letters have a "header" and "trailer"
"^DD",343,343.01,.01,21,3,0)
that follow the main body that is not editable.
"^DD",343,343.01,.01,"DT")
2931013
"^DD",430,430,156,0)
ORIGINAL DATE REFERRED TO TCSP^D^^21;1^S %DT="EX" D ^%DT S X=Y K:X<1 X
"^DD",430,430,156,3)
Type the original date that the debt was referred to Cross-Servicing.
"^DD",430,430,156,21,0)
^^8^8^3171204^
"^DD",430,430,156,21,1,0)
The original date that the debt was referred to Cross-Servicing. This 
"^DD",430,430,156,21,2,0)
field is only set once, when the debt is first referred to 
"^DD",430,430,156,21,3,0)
Cross-Servicing. Since this field was added after Cross-Servicing 
"^DD",430,430,156,21,4,0)
originated, it may not be accurate. It is not deleted or reset with
"^DD",430,430,156,21,5,0)
subsequent actions on the debt. The purpose of this field is to act as a
"^DD",430,430,156,21,6,0)
flag to determine whether the account has ever been sent to
"^DD",430,430,156,21,7,0)
Cross-Servicing, regardless of its current status. It should not be used
"^DD",430,430,156,21,8,0)
for aging or other computations.
"^DD",430,430,156,23,0)
^^5^5^3171204^
"^DD",430,430,156,23,1,0)
This date may be set by the original referral to Cross-Servicing or by 
"^DD",430,430,156,23,2,0)
other Cross-Servicing activities. It should not be used as an accurate 
"^DD",430,430,156,23,3,0)
date to age Cross-Servicing bills. It is designed to be used as an 
"^DD",430,430,156,23,4,0)
indicator of whether the bill has ever been referred to Cross-Servicing
"^DD",430,430,156,23,5,0)
regardless of its current status.
"^DD",430,430,156,"DT")
3171204
"^DD",430,430,171,0)
CS ADJ TRANS NUMBER^430.0171PA^^17;0
"^DD",430,430,171,21,0)
^^3^3^3170601^
"^DD",430,430,171,21,1,0)
The transaction numbers in the AR Transaction
"^DD",430,430,171,21,2,0)
file (#433) for transactions to be included
"^DD",430,430,171,21,3,0)
in a 5B record to be sent to Cross-Servicing.
"^DD",430,430,171,"DT")
3170601
"^DD",430,430,301,0)
RETURNED DATE^D^^30;1^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",430,430,301,1,0)
^.1
"^DD",430,430,301,1,1,0)
430^AN
"^DD",430,430,301,1,1,1)
S ^PRCA(430,"AN",$E(X,1,30),DA)=""
"^DD",430,430,301,1,1,2)
K ^PRCA(430,"AN",$E(X,1,30),DA)
"^DD",430,430,301,1,1,"%D",0)
^^1^1^3170216^
"^DD",430,430,301,1,1,"%D",1,0)
Cross-servicing Returned Date Index
"^DD",430,430,301,1,1,"DT")
3170216
"^DD",430,430,301,3)
Type the returned date for this reconciliation record.
"^DD",430,430,301,21,0)
^.001^3^3^3170216^^^^
"^DD",430,430,301,21,1,0)
The returned date field on the reconciliation
"^DD",430,430,301,21,2,0)
file for records returned by Treasury from
"^DD",430,430,301,21,3,0)
Cross-Servicing.
"^DD",430,430,301,"DT")
3170216
"^DD",430,430,309,0)
REMOVED FROM RECONCILATION?^S^0:no, not removed;1:yes, removed;^30;9^Q
"^DD",430,430,309,3)
Type 0 to display on worklist or 1 to prevent display.
"^DD",430,430,309,21,0)
^^5^5^3180206^
"^DD",430,430,309,21,1,0)
This field determines whether this bill will display on the
"^DD",430,430,309,21,2,0)
Cross-Servicing Reconciliation Worklist. A null value or a zero will
"^DD",430,430,309,21,3,0)
display this bill on the worklist. A 1 in this field means the bill has
"^DD",430,430,309,21,4,0)
been processed and removed from the Cross-Servicing Reconciliation
"^DD",430,430,309,21,5,0)
Worklist, and it will not display on the worklist again.
"^DD",430,430,309,"DT")
3180206
"^DD",430,430,310,0)
REC ORIGINAL TCSP AMOUNT^NJ10,2^^30;10^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999999)!(X<0)!(X?.E1"."3.N) X
"^DD",430,430,310,3)
Type a dollar amount between 0 and 9999999, 2 decimal digits.
"^DD",430,430,310,21,0)
^^1^1^3180224^
"^DD",430,430,310,21,1,0)
The original amount referred to Cross-Servicing.
"^DD",430,430,310,23,0)
^^1^1^3180224^
"^DD",430,430,310,23,1,0)
Saved from field #169 when the 16 node is deleted by a return record.
"^DD",430,430,310,"DT")
3180224
"^DD",430,430,311,0)
REC CURRENT TCSP AMOUNT^NJ10,2^^30;11^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999999)!(X<0)!(X?.E1"."3.N) X
"^DD",430,430,311,3)
Type a dollar amount between 0 and 9999999, 2 decimal digits.
"^DD",430,430,311,21,0)
^^1^1^3180224^
"^DD",430,430,311,21,1,0)
The current debt amount at Cross-Servicing.
"^DD",430,430,311,23,0)
^^1^1^3180224^
"^DD",430,430,311,23,1,0)
Saved from field #169.1 when the 16 node is deleted by a return record.
"^DD",430,430,311,"DT")
3180224
"^DD",430,430,312,0)
REC TCSP RECALL EFF. DATE^D^^30;12^S %DT="EX" D ^%DT S X=Y K:3140101>X X
"^DD",430,430,312,3)
Type a date greater than 1/1/2014.
"^DD",430,430,312,21,0)
^^1^1^3180224^
"^DD",430,430,312,21,1,0)
The date that the recall flag is set for the debt.
"^DD",430,430,312,23,0)
^^1^1^3180224^
"^DD",430,430,312,23,1,0)
Saved from field #153 when the 15 node is deleted by a return record.
"^DD",430,430,312,"DT")
3180224
"^DD",430,430.0171,0)
CS ADJ TRANS NUMBER SUB-FIELD^^1^2
"^DD",430,430.0171,0,"NM","CS ADJ TRANS NUMBER")

"^DD",430,430.0171,.01,0)
CS ADJ TRANS NUMBER^P433'^PRCA(433,^0;1^Q
"^DD",430,430.0171,.01,1,0)
^.1
"^DD",430,430.0171,.01,1,1,0)
430.0171^B
"^DD",430,430.0171,.01,1,1,1)
S ^PRCA(430,DA(1),17,"B",$E(X,1,30),DA)=""
"^DD",430,430.0171,.01,1,1,2)
K ^PRCA(430,DA(1),17,"B",$E(X,1,30),DA)
"^DD",430,430.0171,.01,3)
Enter a transaction number for the 5B record.
"^DD",430,430.0171,.01,21,0)
^^3^3^3170601^
"^DD",430,430.0171,.01,21,1,0)
The transaction number in the AR Transaction
"^DD",430,430.0171,.01,21,2,0)
file (#433) for transactions to be included
"^DD",430,430.0171,.01,21,3,0)
in a 5B record to be sent to Cross-Servicing.
"^DD",430,430.0171,.01,"DT")
3170601
"^DD",430.3,430.3,0)
FIELD^^5^6
"^DD",430.3,430.3,0,"DT")
3170810
"^DD",430.3,430.3,0,"IX","AC",430.3,2)

"^DD",430.3,430.3,0,"IX","B",430.3,.01)

"^DD",430.3,430.3,0,"IX","C",430.3,1)

"^DD",430.3,430.3,0,"NM","ACCOUNTS RECEIVABLE TRANS.TYPE")

"^DD",430.3,430.3,0,"PT",349.4,2)

"^DD",430.3,430.3,0,"PT",430,8)

"^DD",430.3,430.3,0,"PT",430,95)

"^DD",430.3,430.3,0,"PT",433,12)

"^DD",430.3,430.3,0,"PT",433,18)

"^DD",430.3,430.3,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",430.3,430.3,.01,.1)
TRANSACTION TYPE
"^DD",430.3,430.3,.01,1,0)
^.1
"^DD",430.3,430.3,.01,1,1,0)
430.3^B
"^DD",430.3,430.3,.01,1,1,1)
S ^PRCA(430.3,"B",$E(X,1,30),DA)=""
"^DD",430.3,430.3,.01,1,1,2)
K ^PRCA(430.3,"B",$E(X,1,30),DA)
"^DD",430.3,430.3,.01,1,1,3)
Needed to look-up AR Transactions by name
"^DD",430.3,430.3,.01,1,1,"%D",0)
^^2^2^2930602^^
"^DD",430.3,430.3,.01,1,1,"%D",1,0)
This cross-reference is used for sorting and file look-up
"^DD",430.3,430.3,.01,1,1,"%D",2,0)
by the AR Transaction Type.
"^DD",430.3,430.3,.01,3)
Enter Transaction Type, 3-30 characters.
"^DD",430.3,430.3,.01,21,0)
^^2^2^2881007^^
"^DD",430.3,430.3,.01,21,1,0)
This is the type used to identify transactions in the Transaction
"^DD",430.3,430.3,.01,21,2,0)
File (No. 433).
"^DD",430.3,430.3,.01,"DT")
3170227
"^DD",430.3,430.3,1,0)
ABBREVIATION^RF^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>2!($L(X)<1) X
"^DD",430.3,430.3,1,1,0)
^.1
"^DD",430.3,430.3,1,1,1,0)
430.3^C
"^DD",430.3,430.3,1,1,1,1)
S ^PRCA(430.3,"C",$E(X,1,30),DA)=""
"^DD",430.3,430.3,1,1,1,2)
K ^PRCA(430.3,"C",$E(X,1,30),DA)
"^DD",430.3,430.3,1,1,1,3)
Needed to look-up AR Transaction types by abbreviation
"^DD",430.3,430.3,1,1,1,"%D",0)
^^2^2^2930602^^
"^DD",430.3,430.3,1,1,1,"%D",1,0)
This cross-reference is used for look-up and sorting
"^DD",430.3,430.3,1,1,1,"%D",2,0)
transaction types by Abbreviation.
"^DD",430.3,430.3,1,3)
Enter a unique abbreviation, 1-2 characters.
"^DD",430.3,430.3,1,21,0)
^^2^2^2880826^^
"^DD",430.3,430.3,1,21,1,0)
This is an abbreviation that can be used to enter or look-up
"^DD",430.3,430.3,1,21,2,0)
the transaction.
"^DD",430.3,430.3,1,"DT")
3170810
"^DD",430.3,430.3,2,0)
STATUS NUMBER^NJ3,0X^^0;3^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X I $D(X),$O(^PRCA(430.3,"AC",X,0))>0,$O(^(0))'=DA K X
"^DD",430.3,430.3,2,1,0)
^.1
"^DD",430.3,430.3,2,1,1,0)
430.3^AC^MUMPS
"^DD",430.3,430.3,2,1,1,1)
S ^PRCA(430.3,"AC",X,DA)=""
"^DD",430.3,430.3,2,1,1,2)
K ^PRCA(430.3,"AC",X,DA)
"^DD",430.3,430.3,2,1,1,3)
Needed to look-up AR Transactions by number
"^DD",430.3,430.3,2,1,1,"%D",0)
^^2^2^2930602^^^^
"^DD",430.3,430.3,2,1,1,"%D",1,0)
This cross-reference is used for look-up by Status Number.
"^DD",430.3,430.3,2,1,1,"%D",2,0)
 
"^DD",430.3,430.3,2,3)
Enter a whole number between 0 and 999.
"^DD",430.3,430.3,2,21,0)
^^2^2^2880826^
"^DD",430.3,430.3,2,21,1,0)
This is an internal number which the system uses to prevent
"^DD",430.3,430.3,2,21,2,0)
duplicate transaction types. The user will not see this number.
"^DD",430.3,430.3,2,"DT")
3170419
"^DD",430.3,430.3,3,0)
CALM CODE TYPE^S^0:NO;1:YES;^0;4^Q
"^DD",430.3,430.3,3,3)
Enter 1 if the Transaction Type needs a CALM Code Sheet, or 0 if it doesn't.
"^DD",430.3,430.3,3,21,0)
^^2^2^2880826^
"^DD",430.3,430.3,3,21,1,0)
This is a code used to indicate whether or not this transaction
"^DD",430.3,430.3,3,21,2,0)
type needs to generate a CALM code sheet.
"^DD",430.3,430.3,3,"DT")
2880331
"^DD",430.3,430.3,4,0)
OLD BILL STATUS^S^0:NO;1:YES;^0;5^Q
"^DD",430.3,430.3,4,3)
ANSWER IF THIS TYPE CAN BE STATUS OF THE 'OLD BILL'
"^DD",430.3,430.3,4,21,0)
^^3^3^2880928^^^^
"^DD",430.3,430.3,4,21,1,0)
This field is set to a flag that will not allow the transaction
"^DD",430.3,430.3,4,21,2,0)
type to be used with old bills that are back-loaded into the
"^DD",430.3,430.3,4,21,3,0)
system.
"^DD",430.3,430.3,4,"DT")
2880928
"^DD",430.3,430.3,5,0)
CBO EXTRACT FLAG^S^1:Include;0:Do not Include;^0;6^Q
"^DD",430.3,430.3,5,3)
Enter '1' to include records with this transaction type for the data extract.
"^DD",430.3,430.3,5,21,0)
^^5^5^3030722^
"^DD",430.3,430.3,5,21,1,0)
This field will be used as a flag to determine if a record with
"^DD",430.3,430.3,5,21,2,0)
this transaction type should be included in the CBOC data extract.
"^DD",430.3,430.3,5,21,3,0)
  
"^DD",430.3,430.3,5,21,4,0)
'1' will include this type and no entry or '0' will not include this
"^DD",430.3,430.3,5,21,5,0)
type.
"^DD",430.3,430.3,5,"DT")
3031119
"^DIC",343,343,0)
AR FORM LETTER^343I
"^DIC",343,343,0,"GL")
^RC(343,
"^DIC",343,343,"%D",0)
^^5^5^2941108^^^
"^DIC",343,343,"%D",1,0)
This file holds all the follow-up letters that the AR package supports.
"^DIC",343,343,"%D",2,0)
These letters can either be manually generated by the user or automatically
"^DIC",343,343,"%D",3,0)
generated by the AR package.
"^DIC",343,343,"%D",4,0)
 
"^DIC",343,343,"%D",5,0)
Per VHA Directive 10-93-142, this file definition should not be modified.
"^DIC",343,"B","AR FORM LETTER",343)

"^DIC",430.3,430.3,0)
ACCOUNTS RECEIVABLE TRANS.TYPE^430.3
"^DIC",430.3,430.3,0,"GL")
^PRCA(430.3,
"^DIC",430.3,430.3,"%D",0)
^^9^9^3180314^
"^DIC",430.3,430.3,"%D",1,0)
This file stores the type categories used to identify transactions in the
"^DIC",430.3,430.3,"%D",2,0)
Transaction File (No. 433) along with flags that are set to control their
"^DIC",430.3,430.3,"%D",3,0)
use. DO NOT EDIT THIS FILE !
"^DIC",430.3,430.3,"%D",4,0)
 
"^DIC",430.3,430.3,"%D",5,0)
The contents of this file are verified by the PRCA Background Job every 
"^DIC",430.3,430.3,"%D",6,0)
night. It is imperative that you update the verification routine(s) 
"^DIC",430.3,430.3,"%D",7,0)
anytime you add or delete records from this file.
"^DIC",430.3,430.3,"%D",8,0)
 
"^DIC",430.3,430.3,"%D",9,0)
Per VHA Directive 10-93-142, this file definition should not be modified.
"^DIC",430.3,"B","ACCOUNTS RECEIVABLE TRANS.TYPE",430.3)

"BLD",10191,6)
^293
**END**
**END**

