Released PRCA*4.5*355 SEQ #313
Extracted from mail message
**KIDS**:PRCA*4.5*355^

**INSTALL NAME**
PRCA*4.5*355
"BLD",11472,0)
PRCA*4.5*355^ACCOUNTS RECEIVABLE^0^3190711^y
"BLD",11472,4,0)
^9.64PA^^
"BLD",11472,6.3)
10
"BLD",11472,"ABPKG")
n
"BLD",11472,"INID")
y^y
"BLD",11472,"INIT")
POSTINS^PRCA355P
"BLD",11472,"KRN",0)
^9.67PA^1.5^24
"BLD",11472,"KRN",.4,0)
.4
"BLD",11472,"KRN",.401,0)
.401
"BLD",11472,"KRN",.402,0)
.402
"BLD",11472,"KRN",.403,0)
.403
"BLD",11472,"KRN",.5,0)
.5
"BLD",11472,"KRN",.84,0)
.84
"BLD",11472,"KRN",1.5,0)
1.5
"BLD",11472,"KRN",1.6,0)
1.6
"BLD",11472,"KRN",1.61,0)
1.61
"BLD",11472,"KRN",1.62,0)
1.62
"BLD",11472,"KRN",3.6,0)
3.6
"BLD",11472,"KRN",3.8,0)
3.8
"BLD",11472,"KRN",9.2,0)
9.2
"BLD",11472,"KRN",9.8,0)
9.8
"BLD",11472,"KRN",19,0)
19
"BLD",11472,"KRN",19.1,0)
19.1
"BLD",11472,"KRN",101,0)
101
"BLD",11472,"KRN",409.61,0)
409.61
"BLD",11472,"KRN",771,0)
771
"BLD",11472,"KRN",779.2,0)
779.2
"BLD",11472,"KRN",870,0)
870
"BLD",11472,"KRN",8989.51,0)
8989.51
"BLD",11472,"KRN",8989.52,0)
8989.52
"BLD",11472,"KRN",8994,0)
8994
"BLD",11472,"KRN","B",.4,.4)

"BLD",11472,"KRN","B",.401,.401)

"BLD",11472,"KRN","B",.402,.402)

"BLD",11472,"KRN","B",.403,.403)

"BLD",11472,"KRN","B",.5,.5)

"BLD",11472,"KRN","B",.84,.84)

"BLD",11472,"KRN","B",1.5,1.5)

"BLD",11472,"KRN","B",1.6,1.6)

"BLD",11472,"KRN","B",1.61,1.61)

"BLD",11472,"KRN","B",1.62,1.62)

"BLD",11472,"KRN","B",3.6,3.6)

"BLD",11472,"KRN","B",3.8,3.8)

"BLD",11472,"KRN","B",9.2,9.2)

"BLD",11472,"KRN","B",9.8,9.8)

"BLD",11472,"KRN","B",19,19)

"BLD",11472,"KRN","B",19.1,19.1)

"BLD",11472,"KRN","B",101,101)

"BLD",11472,"KRN","B",409.61,409.61)

"BLD",11472,"KRN","B",771,771)

"BLD",11472,"KRN","B",779.2,779.2)

"BLD",11472,"KRN","B",870,870)

"BLD",11472,"KRN","B",8989.51,8989.51)

"BLD",11472,"KRN","B",8989.52,8989.52)

"BLD",11472,"KRN","B",8994,8994)

"BLD",11472,"PRE")
PRCA355E
"BLD",11472,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",11472,"QUES",0)
^9.62^^0
"BLD",11472,"REQB",0)
^9.611^^
"INIT")
POSTINS^PRCA355P
"MBREQ")
0
"PKG",142,-1)
1^1
"PKG",142,0)
ACCOUNTS RECEIVABLE^PRCA^BILL COLLECTIONS
"PKG",142,22,0)
^9.49I^1^1
"PKG",142,22,1,0)
4.5^^2950320
"PKG",142,22,1,"PAH",1,0)
355^3190711
"PKG",142,22,1,"PAH",1,1,0)
^^10^10^3190701
"PKG",142,22,1,"PAH",1,1,1,0)
Statement Schedule Update:
"PKG",142,22,1,"PAH",1,1,2,0)
As an Accounts Receivable Business Owner...
"PKG",142,22,1,"PAH",1,1,3,0)
I want To modify the day of the month that 16 specific sites are assigned 
"PKG",142,22,1,"PAH",1,1,4,0)
in VistA.
"PKG",142,22,1,"PAH",1,1,5,0)
 
"PKG",142,22,1,"PAH",1,1,6,0)
Sites: 438, 501, 504, 542, 562, 565, 568, 621, 649, 656, 658, 664, 671, 
"PKG",142,22,1,"PAH",1,1,7,0)
688, 740, and 756 ...
"PKG",142,22,1,"PAH",1,1,8,0)
 
"PKG",142,22,1,"PAH",1,1,9,0)
So that The workload is redistributed more evenly across the days of the 
"PKG",142,22,1,"PAH",1,1,10,0)
month.
"PRE")
PRCA355E
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","PRCA355E")
0^^B4119342^n/a
"RTN","PRCA355E",1,0)
PRCA355E ;ALB/JSG - PATCH PRCA*4.5*355 ENVIRONMENT CHECKING ROUTINE ;5/28/19 6:22pm
"RTN","PRCA355E",2,0)
 ;;4.5;Accounts Receivable;**355**;Mar 20, 1995;Build 10
"RTN","PRCA355E",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCA355E",4,0)
 ;
"RTN","PRCA355E",5,0)
ENV ; "Environment" checking
"RTN","PRCA355E",6,0)
 N STDY
"RTN","PRCA355E",7,0)
 ;
"RTN","PRCA355E",8,0)
 S XPDNOQUE=1   ; don't allow anyone to queue the install no matter what they say.
"RTN","PRCA355E",9,0)
 ;
"RTN","PRCA355E",10,0)
 ; Get the statement day
"RTN","PRCA355E",11,0)
 S STDY=$$GETDOM
"RTN","PRCA355E",12,0)
 ;
"RTN","PRCA355E",13,0)
 ; due to monthly statement processing, only allowed to install this patch on certain days each month.
"RTN","PRCA355E",14,0)
 I STDY>0,'$$ALLOWED(DT) D  ; Site is one of the 16 sites listed below and is not allowed to install on this day
"RTN","PRCA355E",15,0)
 . S XPDQUIT=1
"RTN","PRCA355E",16,0)
 . W !,"** Installation of PRCA*4.5*355 is not allowed into your production account on today's date **"
"RTN","PRCA355E",17,0)
 . W !,"Please re-attempt on any day of the month other than the period from days 17 through 28 inclusive.",!
"RTN","PRCA355E",18,0)
 E  D
"RTN","PRCA355E",19,0)
 . W !,"Installation of PRCA*4.5*355 is allowed.",!
"RTN","PRCA355E",20,0)
 Q
"RTN","PRCA355E",21,0)
 ;
"RTN","PRCA355E",22,0)
ALLOWED(DATE) ; Allow installation outside of the inclusive period of days 17-28
"RTN","PRCA355E",23,0)
 ;
"RTN","PRCA355E",24,0)
 ; Input:   Date in VistA/FileMan format
"RTN","PRCA355E",25,0)
 ;
"RTN","PRCA355E",26,0)
 ; Output:  Flg - 1 (Allow installation) or
"RTN","PRCA355E",27,0)
 ;                0 (Do not allow installation)
"RTN","PRCA355E",28,0)
 ;
"RTN","PRCA355E",29,0)
 N DAY
"RTN","PRCA355E",30,0)
 ; Get today's day of the month
"RTN","PRCA355E",31,0)
 S DAY=$E(DATE,$L(DATE)-1,$L(DATE))
"RTN","PRCA355E",32,0)
 ; 
"RTN","PRCA355E",33,0)
 ; Installation allowed on days outside the period of days 17-28 inclusive
"RTN","PRCA355E",34,0)
 Q $S(DAY<17:1,DAY>28:1,1:0)
"RTN","PRCA355E",35,0)
 ;
"RTN","PRCA355E",36,0)
GETDOM() ; Get site and statement day
"RTN","PRCA355E",37,0)
 ; Input:  None
"RTN","PRCA355E",38,0)
 ;
"RTN","PRCA355E",39,0)
 ; Output:  New statement day or flag
"RTN","PRCA355E",40,0)
 ;     0 - Flag for sites that do not need to get new statement day
"RTN","PRCA355E",41,0)
 ;    26 - New statement day for 10 selected sites
"RTN","PRCA355E",42,0)
 ;    28 - New statement day for 6 selected sites
"RTN","PRCA355E",43,0)
 ;
"RTN","PRCA355E",44,0)
 N FLG,SITE,SITES26,SITES28
"RTN","PRCA355E",45,0)
 S SITE=+$$SITE^VASITE
"RTN","PRCA355E",46,0)
 S SITES26=$P($T(SITES26),";",3)
"RTN","PRCA355E",47,0)
 S SITES28=$P($T(SITES28),";",3)
"RTN","PRCA355E",48,0)
 S FLG=$S(SITES26[(","_SITE_","):26,SITES28[(","_SITE_","):28,1:0)
"RTN","PRCA355E",49,0)
 Q FLG
"RTN","PRCA355E",50,0)
 ;
"RTN","PRCA355E",51,0)
 ; From PRCA*4.5*355 Patch Description:
"RTN","PRCA355E",52,0)
 ;
"RTN","PRCA355E",53,0)
 ; Sites with new statement day = 26
"RTN","PRCA355E",54,0)
SITES26 ;;,438,501,504,542,562,568,649,656,688,756,
"RTN","PRCA355E",55,0)
 ;
"RTN","PRCA355E",56,0)
 ; Sites with new statement day = 28
"RTN","PRCA355E",57,0)
SITES28 ;;,565,621,658,664,671,740,
"RTN","PRCA355P")
0^^B3717658^n/a
"RTN","PRCA355P",1,0)
PRCA355P ;ALB/JSG - PATCH PRCA*4.5*355 PRE/POST-INSTALL ROUTINE ;5/28/19 6:22pm
"RTN","PRCA355P",2,0)
 ;;4.5;Accounts Receivable;**355**;Mar 20, 1995;Build 10
"RTN","PRCA355P",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCA355P",4,0)
 ;
"RTN","PRCA355P",5,0)
 ; DBIA#10141
"RTN","PRCA355P",6,0)
 ;
"RTN","PRCA355P",7,0)
 Q
"RTN","PRCA355P",8,0)
 ;
"RTN","PRCA355P",9,0)
BMSG(MESS) ; spit out message (preceded by a blank line 
"RTN","PRCA355P",10,0)
 D BMES^XPDUTL(MESS)
"RTN","PRCA355P",11,0)
 Q
"RTN","PRCA355P",12,0)
 ;
"RTN","PRCA355P",13,0)
POSTINS ;
"RTN","PRCA355P",14,0)
 Q:($$PROD^XUPROD(1))&($$INSTALDT^XPDUTL("PRCA*4.5*355"))  ; DBIA#10141
"RTN","PRCA355P",15,0)
 D CHGSTDAY  ; Change statement day
"RTN","PRCA355P",16,0)
 ;
"RTN","PRCA355P",17,0)
 Q
"RTN","PRCA355P",18,0)
 ;
"RTN","PRCA355P",19,0)
CHGSTDAY ; Change statement day
"RTN","PRCA355P",20,0)
 ;
"RTN","PRCA355P",21,0)
 ; Get the statement day
"RTN","PRCA355P",22,0)
 N DOM
"RTN","PRCA355P",23,0)
 S DOM=$$GETDOM
"RTN","PRCA355P",24,0)
 Q:DOM=0  ; Not one of the 16 sites needing new statement day
"RTN","PRCA355P",25,0)
 D BMSG("Reset Site Parameter - SITE STATEMENT DAY to "_DOM)
"RTN","PRCA355P",26,0)
 N DA,DR,DIE,X,RCT
"RTN","PRCA355P",27,0)
 S DIE="^RC(342,"
"RTN","PRCA355P",28,0)
 S DA=1
"RTN","PRCA355P",29,0)
 S DR=".11///"_DOM ; Stuff field value (Validated)
"RTN","PRCA355P",30,0)
 D ^DIE
"RTN","PRCA355P",31,0)
 ;
"RTN","PRCA355P",32,0)
 ; set of Patient Statement Day dependent upon site (must be a patient - DPT)
"RTN","PRCA355P",33,0)
 D BMES^XPDUTL("Resetting Patient Statement Day to "_DOM)
"RTN","PRCA355P",34,0)
 N DEBT,DIE
"RTN","PRCA355P",35,0)
 S DIE="^RCD(340,"
"RTN","PRCA355P",36,0)
 S DEBT=""
"RTN","PRCA355P",37,0)
 F  S DEBT=$O(^RCD(340,"AB","DPT(",DEBT)) Q:DEBT=""  D
"RTN","PRCA355P",38,0)
 . N DA,DR
"RTN","PRCA355P",39,0)
 . S DA=DEBT
"RTN","PRCA355P",40,0)
 . S DR=".03////"_DOM ; Stuff field value (Unvalidated)
"RTN","PRCA355P",41,0)
 . D ^DIE
"RTN","PRCA355P",42,0)
 Q 
"RTN","PRCA355P",43,0)
 ;
"RTN","PRCA355P",44,0)
GETDOM() ; Get site and statement day
"RTN","PRCA355P",45,0)
 ; Input:  None
"RTN","PRCA355P",46,0)
 ;
"RTN","PRCA355P",47,0)
 ; Output:  New statement day or flag
"RTN","PRCA355P",48,0)
 ;     0 - Flag for sites that do not need to get new statement day
"RTN","PRCA355P",49,0)
 ;    26 - New statement day for 10 selected sites
"RTN","PRCA355P",50,0)
 ;    28 - New statement day for 6 selected sites
"RTN","PRCA355P",51,0)
 ;
"RTN","PRCA355P",52,0)
 N FLG,SITE,SITES26,SITES28
"RTN","PRCA355P",53,0)
 S SITE=+$$SITE^VASITE
"RTN","PRCA355P",54,0)
 S SITES26=$P($T(SITES26),";",3)
"RTN","PRCA355P",55,0)
 S SITES28=$P($T(SITES28),";",3)
"RTN","PRCA355P",56,0)
 S FLG=$S(SITES26[(","_SITE_","):26,SITES28[(","_SITE_","):28,1:0)
"RTN","PRCA355P",57,0)
 Q FLG
"RTN","PRCA355P",58,0)
 ;
"RTN","PRCA355P",59,0)
 ; From PRCA*4.5*355 Patch Description:
"RTN","PRCA355P",60,0)
 ;
"RTN","PRCA355P",61,0)
 ; Sites with new statement day = 26
"RTN","PRCA355P",62,0)
SITES26 ;;,438,501,504,542,562,568,649,656,688,756,
"RTN","PRCA355P",63,0)
 ;
"RTN","PRCA355P",64,0)
 ; Sites with new statement day = 28
"RTN","PRCA355P",65,0)
SITES28 ;;,565,621,658,664,671,740,
"VER")
8.0^22.2
"BLD",11472,6)
^313
**END**
**END**

