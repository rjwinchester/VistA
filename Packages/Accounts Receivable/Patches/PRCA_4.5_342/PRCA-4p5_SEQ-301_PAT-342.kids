Released PRCA*4.5*342 SEQ #301
Extracted from mail message
**KIDS**:PRCA*4.5*342^

**INSTALL NAME**
PRCA*4.5*342
"BLD",11159,0)
PRCA*4.5*342^ACCOUNTS RECEIVABLE^0^3180830^y
"BLD",11159,1,0)
^^10^10^3180830^
"BLD",11159,1,1,0)
This patch addresses the following issue(s):
"BLD",11159,1,2,0)
 
"BLD",11159,1,3,0)
1. A <PARAMETER> error occurs when running the Accounts Receivable Nightly
"BLD",11159,1,4,0)
Process Background Job [PRCA NIGHTLY PROCESS] when one of the records 
"BLD",11159,1,5,0)
processed is locked.
"BLD",11159,1,6,0)
 
"BLD",11159,1,7,0)
2. A <SUBSCRIPT> error occurs while running the Status Listing
"BLD",11159,1,8,0)
For Bills [PRCAL STATUS LIST] option when an ACCOUNTS RECEIVABLE
"BLD",11159,1,9,0)
(#430) bill has a CURRENT STATUS (#8) of SUSPENDED and does not
"BLD",11159,1,10,0)
have any associated transactions in the AR TRANSACTION (#433) file.
"BLD",11159,4,0)
^9.64PA^^
"BLD",11159,6.3)
7
"BLD",11159,"KRN",0)
^9.67PA^779.2^20
"BLD",11159,"KRN",.4,0)
.4
"BLD",11159,"KRN",.401,0)
.401
"BLD",11159,"KRN",.402,0)
.402
"BLD",11159,"KRN",.403,0)
.403
"BLD",11159,"KRN",.5,0)
.5
"BLD",11159,"KRN",.84,0)
.84
"BLD",11159,"KRN",3.6,0)
3.6
"BLD",11159,"KRN",3.8,0)
3.8
"BLD",11159,"KRN",9.2,0)
9.2
"BLD",11159,"KRN",9.8,0)
9.8
"BLD",11159,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",11159,"KRN",9.8,"NM",1,0)
PRCAUDT^^0^B53661295
"BLD",11159,"KRN",9.8,"NM",2,0)
PRCAPCL^^0^B42880971
"BLD",11159,"KRN",9.8,"NM","B","PRCAPCL",2)

"BLD",11159,"KRN",9.8,"NM","B","PRCAUDT",1)

"BLD",11159,"KRN",19,0)
19
"BLD",11159,"KRN",19.1,0)
19.1
"BLD",11159,"KRN",101,0)
101
"BLD",11159,"KRN",409.61,0)
409.61
"BLD",11159,"KRN",771,0)
771
"BLD",11159,"KRN",779.2,0)
779.2
"BLD",11159,"KRN",870,0)
870
"BLD",11159,"KRN",8989.51,0)
8989.51
"BLD",11159,"KRN",8989.52,0)
8989.52
"BLD",11159,"KRN",8994,0)
8994
"BLD",11159,"KRN","B",.4,.4)

"BLD",11159,"KRN","B",.401,.401)

"BLD",11159,"KRN","B",.402,.402)

"BLD",11159,"KRN","B",.403,.403)

"BLD",11159,"KRN","B",.5,.5)

"BLD",11159,"KRN","B",.84,.84)

"BLD",11159,"KRN","B",3.6,3.6)

"BLD",11159,"KRN","B",3.8,3.8)

"BLD",11159,"KRN","B",9.2,9.2)

"BLD",11159,"KRN","B",9.8,9.8)

"BLD",11159,"KRN","B",19,19)

"BLD",11159,"KRN","B",19.1,19.1)

"BLD",11159,"KRN","B",101,101)

"BLD",11159,"KRN","B",409.61,409.61)

"BLD",11159,"KRN","B",771,771)

"BLD",11159,"KRN","B",779.2,779.2)

"BLD",11159,"KRN","B",870,870)

"BLD",11159,"KRN","B",8989.51,8989.51)

"BLD",11159,"KRN","B",8989.52,8989.52)

"BLD",11159,"KRN","B",8994,8994)

"BLD",11159,"QDEF")
^^^^^^^^^^YES
"BLD",11159,"QUES",0)
^9.62^^
"BLD",11159,"REQB",0)
^9.611^2^2
"BLD",11159,"REQB",1,0)
PRCA*4.5*321^2
"BLD",11159,"REQB",2,0)
PRCA*4.5*315^2
"BLD",11159,"REQB","B","PRCA*4.5*315",2)

"BLD",11159,"REQB","B","PRCA*4.5*321",1)

"MBREQ")
0
"PKG",142,-1)
1^1
"PKG",142,0)
ACCOUNTS RECEIVABLE^PRCA^BILL COLLECTIONS
"PKG",142,20,0)
^9.402P^1^1
"PKG",142,20,1,0)
2^^PRCAMRG
"PKG",142,20,1,1)

"PKG",142,20,"B",2,1)

"PKG",142,22,0)
^9.49I^1^1
"PKG",142,22,1,0)
4.5^^2950320
"PKG",142,22,1,"PAH",1,0)
342^3180830
"PKG",142,22,1,"PAH",1,1,0)
^^10^10^3180830
"PKG",142,22,1,"PAH",1,1,1,0)
This patch addresses the following issue(s):
"PKG",142,22,1,"PAH",1,1,2,0)
 
"PKG",142,22,1,"PAH",1,1,3,0)
1. A <PARAMETER> error occurs when running the Accounts Receivable Nightly
"PKG",142,22,1,"PAH",1,1,4,0)
Process Background Job [PRCA NIGHTLY PROCESS] when one of the records 
"PKG",142,22,1,"PAH",1,1,5,0)
processed is locked.
"PKG",142,22,1,"PAH",1,1,6,0)
 
"PKG",142,22,1,"PAH",1,1,7,0)
2. A <SUBSCRIPT> error occurs while running the Status Listing
"PKG",142,22,1,"PAH",1,1,8,0)
For Bills [PRCAL STATUS LIST] option when an ACCOUNTS RECEIVABLE
"PKG",142,22,1,"PAH",1,1,9,0)
(#430) bill has a CURRENT STATUS (#8) of SUSPENDED and does not
"PKG",142,22,1,"PAH",1,1,10,0)
have any associated transactions in the AR TRANSACTION (#433) file.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","PRCAPCL")
0^2^B42880971^B41751936
"RTN","PRCAPCL",1,0)
PRCAPCL ;WASH-ISC@ALTOONA,PA/NYB-Print Bill Status Report ;8/19/94  10:21 AM
"RTN","PRCAPCL",2,0)
V ;;4.5;Accounts Receivable;**72,63,143,154,315,342**;Mar 20, 1995;Build 7
"RTN","PRCAPCL",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCAPCL",4,0)
 N BAL,BN,CAT,DEAD,DEBT,DIR,DIROUT,DUOUT,DP,DP2,HDR,IOP,N430
"RTN","PRCAPCL",5,0)
 N PAGE,POP,PRCAE,PRCATOT,PRCATOT2,PRCAT,PRCAT2,PRCY,RCDOJ,TDT,ST,STT
"RTN","PRCAPCL",6,0)
 S (PAGE,PRCAT,PRCAT2,PRCATOT,PRCATOT2,HDR)=0
"RTN","PRCAPCL",7,0)
 D NOW^%DTC S Y=% X ^DD("DD") S TDT=Y
"RTN","PRCAPCL",8,0)
 I $G(STAT)="ALL" S STT=0 F  S STT=($O(^PRCA(430.3,"AC",STT))) Q:STT=""  D
"RTN","PRCAPCL",9,0)
 . I STT<100!(STT=107) Q
"RTN","PRCAPCL",10,0)
 . S STAT($O(^PRCA(430.3,"AC",STT,0)))=""
"RTN","PRCAPCL",11,0)
 . Q
"RTN","PRCAPCL",12,0)
 S STAT=0 F  S STAT=$O(STAT(STAT)) Q:STAT=""!($D(DIROUT))!($D(DUOUT))  D
"RTN","PRCAPCL",13,0)
 . N NDE
"RTN","PRCAPCL",14,0)
 . D HDR
"RTN","PRCAPCL",15,0)
 . F PRCAE=0:0 S PRCAE=$O(^PRCA(430,"AC",STAT,PRCAE)),X="" Q:'PRCAE!($D(DIROUT)!($D(DUOUT)))  I $P($G(^PRCA(430,PRCAE,100)),"^",2)[$G(SER),$S($G(SER):+$G(^PRCA(430,PRCAE,100)),1:1) D  Q:$D(DIROUT)!($D(DUOUT))  D PRNTL
"RTN","PRCAPCL",16,0)
 .. I $Y+4>IOSL D TOP,HDR
"RTN","PRCAPCL",17,0)
 . I $Y+4>IOSL D TOP,HDR Q:$D(DIROUT)!($D(DUOUT))
"RTN","PRCAPCL",18,0)
 . S DP1=$S(+DAT>0:+DAT,1:0)
"RTN","PRCAPCL",19,0)
 . S DP2=$S(+$P($G(DAT),"^",2)=0:"",1:+$P($G(DAT),"^",2))
"RTN","PRCAPCL",20,0)
 . S ST="" F  S ST=$O(^TMP($J,"PRCAE",ST)) Q:ST=""!($D(DIROUT)!($D(DUOUT)))  D
"RTN","PRCAPCL",21,0)
 .. I STAT=40 D STHDR
"RTN","PRCAPCL",22,0)
 .. S DP=0 F  S DP=$O(^TMP($J,"PRCAE",ST,DP)) Q:'DP!($D(DIROUT)!($D(DUOUT)))  D
"RTN","PRCAPCL",23,0)
 ... S BN="" F  S BN=$O(^TMP($J,"PRCAE",ST,DP,BN)) Q:BN=""!($D(DIROUT)!($D(DUOUT)))  D
"RTN","PRCAPCL",24,0)
 .... S NDE=^TMP($J,"PRCAE",ST,DP,BN)
"RTN","PRCAPCL",25,0)
 .... S Y=DP X ^DD("DD") S DP2=Y K Y
"RTN","PRCAPCL",26,0)
 .... S RCDOJ=$$REFST^RCRCUTL(+$O(^PRCA(430,"B",BN,0)))
"RTN","PRCAPCL",27,0)
 .... W $G(DP2),?15,$S(RCDOJ&$G(BN):$G(BN)_"r",1:$G(BN)),?30,$P(NDE,U,2),?45,$P(NDE,U,3)
"RTN","PRCAPCL",28,0)
 .... W ?65,$J($P(NDE,U,4),9,2),!
"RTN","PRCAPCL",29,0)
 .... S PRCATOT2=PRCATOT2+$P(NDE,U,4),PRCAT2=PRCAT2+1
"RTN","PRCAPCL",30,0)
 .... S PRCATOT=PRCATOT+$P(NDE,U,4),PRCAT=PRCAT+1
"RTN","PRCAPCL",31,0)
 .... I $Y+4>IOSL D TOP,HDR Q:$D(DIROUT)!($D(DUOUT))  I STAT=40 D STHDR
"RTN","PRCAPCL",32,0)
 .... K ^TMP($J,"PRCAE",ST,DP,BN)
"RTN","PRCAPCL",33,0)
 . I X'="^" W !!!,"SUBTOTAL: ",$J(PRCATOT2,10,2),!,"SUBCOUNT: ",$J(PRCAT2,10),?30 Q:$D(DIROUT)!($D(DUOUT))
"RTN","PRCAPCL",34,0)
 . S (PRCATOT2,PRCAT2)=0
"RTN","PRCAPCL",35,0)
 . Q:$D(DIROUT)!($D(DUOUT))
"RTN","PRCAPCL",36,0)
 . I $O(STAT(STAT))="" Q
"RTN","PRCAPCL",37,0)
 . I $O(STAT(STAT))'="" W !! D TOP
"RTN","PRCAPCL",38,0)
 I X'="^" W !!!,"TOTAL: ",$J(PRCATOT,10,2),!,"COUNT: ",$J(PRCAT,10),!," MEAN: ",$J($S('PRCAT:0,1:PRCATOT/PRCAT),10,2),?30,"* -indicates that patient is deceased",!,?30,"r -indicates that bill is referred"
"RTN","PRCAPCL",39,0)
 W:$E(IOST)="P" @IOF Q
"RTN","PRCAPCL",40,0)
TOP ;
"RTN","PRCAPCL",41,0)
 I $E(IOST)="C" S X="" S DIR(0)="E" D ^DIR Q:$D(DIROUT)!($D(DUOUT))
"RTN","PRCAPCL",42,0)
Q2 Q
"RTN","PRCAPCL",43,0)
PRNTL ;
"RTN","PRCAPCL",44,0)
 N BAL,DEAD,DEBT,ST
"RTN","PRCAPCL",45,0)
 S X=$S($D(^PRCA(430,PRCAE,0)):^(0),1:"") G:X="" PQ
"RTN","PRCAPCL",46,0)
 S BN=$P($G(X),U),DP=$P($G(X),U,14),PRCY=$P($G(X),U,2) G:BN="" PQ
"RTN","PRCAPCL",47,0)
 S BEG=+DAT-1,END=+$P(DAT,U,2)
"RTN","PRCAPCL",48,0)
 S ST=999 I STAT=40 D SUST ;PRCA*4.5*315/DRF Find suspended type
"RTN","PRCAPCL",49,0)
 I BEG,DP'>BEG Q
"RTN","PRCAPCL",50,0)
 I END,DP>END Q
"RTN","PRCAPCL",51,0)
 I STAT=40,$G(PRSELST)'="",PRSELST'[(","_ST_",") Q  ;PRCA*4.5*315/DRF Quit if suspended type is not selected
"RTN","PRCAPCL",52,0)
 S (CAT,PRCY)=$S(PRCY="":PRCY,$D(^PRCA(430.2,PRCY,0))#2:$P(^(0),U),1:PRCY)
"RTN","PRCAPCL",53,0)
 S PRCY=$S($D(^RCD(340,+$P(X,U,9),0)):$P(^(0),U),1:"")
"RTN","PRCAPCL",54,0)
 I PRCY["DPT" S DFN=+PRCY D DEM^VADPT S:+VADM(6) DEAD="*" D KVAR^VADPT K VA,VADM
"RTN","PRCAPCL",55,0)
 I PRCY]"" S (DEBT,PRCY)=$S($D(@("^"_$P(PRCY,";",2)_+PRCY_",0)")):^(0),1:"")
"RTN","PRCAPCL",56,0)
 S PRCY=$S($D(^PRCA(430,PRCAE,7)):^(7),1:"")
"RTN","PRCAPCL",57,0)
 I 'PRCY,(STAT=$O(^PRCA(430.3,"AC",104,0))!((STAT=20)&($G(^PRCA(430,PRCAE,100)))))
"RTN","PRCAPCL",58,0)
 S (BAL,PRCY)=$P(PRCY,U)+$P(PRCY,U,2)+$P(PRCY,U,3)+$P(PRCY,U,4)+$P(PRCY,U,5)
"RTN","PRCAPCL",59,0)
 I DP'="" S ^TMP($J,"PRCAE",ST,DP,BN)=U_$E(CAT,1,13)_U_$G(DEAD)_$E($P($G(DEBT),U),1,15)_U_$G(BAL)_U_$G(PRCATOT2)_U_$G(PRCAT2)
"RTN","PRCAPCL",60,0)
 I $G(SER),(STAT=31!(STAT=32)) S Y=$G(^PRCA(430,PRCAE,3)) D
"RTN","PRCAPCL",61,0)
 . W:$P(Y,U)]"" !,"Date: ",$E($P(Y,U),4,5),"/",$E($P(Y,U),6,7),"/",$E($P(Y,U),2,3)
"RTN","PRCAPCL",62,0)
 . W:$P(Y,U,2)]"" "  By: ",$P($G(^VA(200,+$P(Y,U,2),0)),U)
"RTN","PRCAPCL",63,0)
 . W:$P(Y,U,6)]"" "  Reason: ",$P(Y,U,6)
"RTN","PRCAPCL",64,0)
 . Q
"RTN","PRCAPCL",65,0)
 I $E(IOST)="",$Y+4>IOSL D TOP
"RTN","PRCAPCL",66,0)
PQ Q
"RTN","PRCAPCL",67,0)
HDR ;
"RTN","PRCAPCL",68,0)
 I $E(IOST)="C"!PAGE W @IOF
"RTN","PRCAPCL",69,0)
 S PAGE=PAGE+1
"RTN","PRCAPCL",70,0)
 W !,"BILL STATUS LISTING REPORT"
"RTN","PRCAPCL",71,0)
 W ?40,$G(TDT),?72,$G(PAGE)
"RTN","PRCAPCL",72,0)
 W !,"Sort Criteria for Date Last Updated Range: "_SC1_" to "_SC2
"RTN","PRCAPCL",73,0)
 W !,"Date Last",!," Updated",?15,"Bill no.",?30,"Category"
"RTN","PRCAPCL",74,0)
 W ?50,"Debtor",?68,"Balance",!
"RTN","PRCAPCL",75,0)
 S X="",$P(X,"-",IOM-1)="" W X,!
"RTN","PRCAPCL",76,0)
 W !,?5,"Status: ",$P($S($D(^PRCA(430.3,STAT,0)):^(0),1:""),U)
"RTN","PRCAPCL",77,0)
 S HDR=1
"RTN","PRCAPCL",78,0)
 W !!
"RTN","PRCAPCL",79,0)
 Q
"RTN","PRCAPCL",80,0)
DT I Y X ^DD("DD") S DP2=Y
"RTN","PRCAPCL",81,0)
 Q
"RTN","PRCAPCL",82,0)
STAT(SER) W ! ;Bill Status Listing
"RTN","PRCAPCL",83,0)
 N BEG,CH,DAT,END,I,PRSELST,PRSUS,SC1,SC2,STAT,STT,XX
"RTN","PRCAPCL",84,0)
 K ^TMP($J)
"RTN","PRCAPCL",85,0)
 S DAT=$$DATE^RCEVUTL1("")
"RTN","PRCAPCL",86,0)
 Q:$G(DAT)=-1
"RTN","PRCAPCL",87,0)
 S BEG=+DAT,END=+$P(DAT,U,2)
"RTN","PRCAPCL",88,0)
 S SC1=$S(BEG=0:"First",1:BEG-1) I +$G(SC1) S Y=SC1+1 X ^DD("DD") S SC1=Y
"RTN","PRCAPCL",89,0)
 S SC2=$S(END=0:"Last",1:END) I +$G(SC2) S Y=SC2 X ^DD("DD") S SC2=Y
"RTN","PRCAPCL",90,0)
 S XX=^DD(433,90,0),XX=$P(XX,"^",3) F I=1:1 S CH=$P(XX,";",I) Q:CH=""  S PRSUS($P(CH,":",1))=$P(CH,":",2)
"RTN","PRCAPCL",91,0)
 D ST
"RTN","PRCAPCL",92,0)
 Q:STAT="^"
"RTN","PRCAPCL",93,0)
 D TSK,Q1
"RTN","PRCAPCL",94,0)
 Q
"RTN","PRCAPCL",95,0)
ST N DIC,X,Y
"RTN","PRCAPCL",96,0)
 S DIC="^PRCA(430.3,",DIC(0)="QEMZ"
"RTN","PRCAPCL",97,0)
 S DIC("S")="I $P(^(0),""^"",3)>100,($P(^(0),""^"",3)'=107)"
"RTN","PRCAPCL",98,0)
 S Y=0 W !,"STATUS: "_$S('$O(STAT("")):"ALL// ",1:"")
"RTN","PRCAPCL",99,0)
 R X:DTIME I '$T!(X="^") S STAT="^" Q
"RTN","PRCAPCL",100,0)
 I ((X="")!(X="ALL")),'$O(STAT("")) S (STAT,X)="ALL" Q
"RTN","PRCAPCL",101,0)
 I X="" Q
"RTN","PRCAPCL",102,0)
 D ^DIC S STAT=+Y,SER=$G(SER)
"RTN","PRCAPCL",103,0)
 I X["?" W !!,"Enter 'ALL' for all status types.",! G ST
"RTN","PRCAPCL",104,0)
 I STAT'="ALL",(+STAT>0) S STAT(+STAT)="" D:STAT=40 SUSTYP G ST
"RTN","PRCAPCL",105,0)
 G:+STAT<0 ST
"RTN","PRCAPCL",106,0)
 Q
"RTN","PRCAPCL",107,0)
SUSTYP ;If SUSPENDED is chosen, prompt for which suspended bills to display PRCA*4.5*315/DRF
"RTN","PRCAPCL",108,0)
 N X,CH,LAST,PRPRT
"RTN","PRCAPCL",109,0)
 S LAST=$O(PRSUS(""),-1),PRSUS(LAST+1)="NONE"
"RTN","PRCAPCL",110,0)
 S PRSUS(LAST+2)="ALL OF THE ABOVE"
"RTN","PRCAPCL",111,0)
 S PRPRT="Choose from SUSPENDED TYPE:"
"RTN","PRCAPCL",112,0)
 S PRSELST=$$MLTP0(PRPRT,.PRSUS,1)
"RTN","PRCAPCL",113,0)
 Q
"RTN","PRCAPCL",114,0)
SUST ;Look for suspended type for a suspended bill PRCA*4.5*315/DRF
"RTN","PRCAPCL",115,0)
 N TRANS
"RTN","PRCAPCL",116,0)
 S TRANS=$O(^PRCA(433,"C",PRCAE,""),-1) I TRANS="" S ST=12 Q  ;Quit if no transactions for this entry, PRCA*4.5*342
"RTN","PRCAPCL",117,0)
 S ST=$P($G(^PRCA(433,TRANS,1)),U,11)
"RTN","PRCAPCL",118,0)
 I ST="" S ST=12
"RTN","PRCAPCL",119,0)
 Q
"RTN","PRCAPCL",120,0)
STHDR ;Display Suspended Type PRCA*4.5*315/DRF
"RTN","PRCAPCL",121,0)
 I 'HDR W !
"RTN","PRCAPCL",122,0)
 W ?30,"Suspend Type: ",PRSUS(ST),!!
"RTN","PRCAPCL",123,0)
 S HDR=0
"RTN","PRCAPCL",124,0)
 Q
"RTN","PRCAPCL",125,0)
TSK ;
"RTN","PRCAPCL",126,0)
 N POP,ZTSK
"RTN","PRCAPCL",127,0)
 W *7,!,"Report should be QUEUED it could take some time to run!"
"RTN","PRCAPCL",128,0)
 S POP=0,%ZIS="MQ" D ^%ZIS G:POP Q1
"RTN","PRCAPCL",129,0)
 I '$D(IO("Q")) U IO D PRCAPCL U IO(0) G Q1
"RTN","PRCAPCL",130,0)
 S ZTRTN="^PRCAPCL"
"RTN","PRCAPCL",131,0)
 S (ZTSAVE("BEG"),ZTSAVE("DAT"),ZTSAVE("END"),ZTSAVE("SER"))=""
"RTN","PRCAPCL",132,0)
 S (ZTSAVE("STAT"),ZTSAVE("STAT("),ZTSAVE("SC1"),ZTSAVE("SC2"))=""
"RTN","PRCAPCL",133,0)
 S (ZTSAVE("PRSELST"),ZTSAVE("PRSUS("))=""
"RTN","PRCAPCL",134,0)
 S ZTDESC="Bill Status Listing" D ^%ZTLOAD
"RTN","PRCAPCL",135,0)
Q1 D ^%ZISC Q
"RTN","PRCAPCL",136,0)
 ;
"RTN","PRCAPCL",137,0)
 ;Choose multiple items from a list including value 0 - PRCA*4.5*315/DRF
"RTN","PRCAPCL",138,0)
MLTP0(PRPT,OPT,ALL) ; Function for multiple value selection
"RTN","PRCAPCL",139,0)
 ; Input: PRPT - String to be prompted to the user, before listing options
"RTN","PRCAPCL",140,0)
 ;        OPT  - Array containing the possible entries (indexed by code)
"RTN","PRCAPCL",141,0)
 ;               Obs: Code must be sequential starting with 0
"RTN","PRCAPCL",142,0)
 ;        ALL  - Flag indicating if the last option is ALL OF THE ABOVE
"RTN","PRCAPCL",143,0)
 ;
"RTN","PRCAPCL",144,0)
 ; Output: MLTP - User selection, i.e. "1,2,3," or "1," or NULL (nothing
"RTN","PRCAPCL",145,0)
 ;                 was selected)
"RTN","PRCAPCL",146,0)
 ;
"RTN","PRCAPCL",147,0)
 N A,DIR,DIRUT,DTOUT,DUOUT,DIROUT,I,IX,LST,MLTP
"RTN","PRCAPCL",148,0)
 ;
"RTN","PRCAPCL",149,0)
PRPT S MLTP="",ALL=+$G(ALL)
"RTN","PRCAPCL",150,0)
 S LST=$O(OPT(""),-1)
"RTN","PRCAPCL",151,0)
 S DIR(0)="LO^0:"_LST_"^K:+$P(X,""-"",2)>"_LST_" X"
"RTN","PRCAPCL",152,0)
 S DIR("A",1)=$G(PRPT),DIR("A",2)=""
"RTN","PRCAPCL",153,0)
 S A="",IX=3
"RTN","PRCAPCL",154,0)
 F  S A=$O(OPT(A))  Q:A=""  D
"RTN","PRCAPCL",155,0)
 . S DIR("A",IX)="   "_A_" - "_$G(OPT(A)),IX=IX+1
"RTN","PRCAPCL",156,0)
 S DIR("A",IX)="",DIR("A")="Select",DIR("B")=LST,DIR("T")=DTIME W !
"RTN","PRCAPCL",157,0)
 D ^DIR K DIR I $D(DIRUT)!$D(DTOUT)!$D(DUOUT)!$D(DIROUT) S MLTP="" G QT
"RTN","PRCAPCL",158,0)
 S MLTP=Y K DIROUT,DTOUT,DUOUT,DIRUT
"RTN","PRCAPCL",159,0)
 S DIR(0)="Y",DIR("A",1)="You have selected",DIR("A",2)=""
"RTN","PRCAPCL",160,0)
 S A="",IX=3
"RTN","PRCAPCL",161,0)
 F I=1:1:($L(MLTP,",")-1) D
"RTN","PRCAPCL",162,0)
 . S DIR("A",IX)="    "_$P(MLTP,",",I)_" - "_$G(OPT($P(MLTP,",",I)))
"RTN","PRCAPCL",163,0)
 . S IX=IX+1
"RTN","PRCAPCL",164,0)
 S DIR("A",IX)=""
"RTN","PRCAPCL",165,0)
 S DIR("A")="Are you sure",DIR("B")="NO",DIR("T")=DTIME W !
"RTN","PRCAPCL",166,0)
 D ^DIR K DIR I $D(DIRUT)!$D(DTOUT)!$D(DUOUT)!$D(DIROUT) S MLTP="" G QT
"RTN","PRCAPCL",167,0)
 K DIROUT,DTOUT,DUOUT,DIRUT I 'Y K DIR G PRPT
"RTN","PRCAPCL",168,0)
 I ALL,MLTP[LST S MLTP="" G QT
"RTN","PRCAPCL",169,0)
 S MLTP=","_MLTP
"RTN","PRCAPCL",170,0)
 ;
"RTN","PRCAPCL",171,0)
QT Q MLTP
"RTN","PRCAUDT")
0^1^B53661295^B53225243
"RTN","PRCAUDT",1,0)
PRCAUDT ;SF - ISC/YJK-AUDIT A NEW BILL/EDIT INCOMPLETE AR ;10/17/96  5:33 PM
"RTN","PRCAUDT",2,0)
V ;;4.5;Accounts Receivable;**1,21,57,97,143,107,173,321,342**;Mar 20, 1995;Build 7
"RTN","PRCAUDT",3,0)
 ;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCAUDT",4,0)
 NEW X,Y,LOOP,DIR
"RTN","PRCAUDT",5,0)
 W ! S DIR("B")="YES",DIR("A")="Do you want to loop thru 'NEW BILLS'",DIR(0)="Y" D ^DIR K DIR G:$D(DIRUT) END S LOOP=+Y
"RTN","PRCAUDT",6,0)
 D AUDITB(0,0,LOOP)
"RTN","PRCAUDT",7,0)
 Q
"RTN","PRCAUDT",8,0)
 ;
"RTN","PRCAUDT",9,0)
AUDITB(PRCABN,PRAUTOA,LOOP) ;
"RTN","PRCAUDT",10,0)
 ; PRCABN = the ien of the entry to audit or 0 for batch entry above
"RTN","PRCAUDT",11,0)
 ; PRAUTOA = 1 for auto-audit
"RTN","PRCAUDT",12,0)
 ; LOOP = 1 if looping through bills, 0 if not
"RTN","PRCAUDT",13,0)
 N PRCA,PRCASEG,PREND,PRQUIT,X,XX,Y ; PRCA*4.5*321
"RTN","PRCAUDT",14,0)
 S PREND=0,PRCA("AUTO_AUDIT")=PRAUTOA
"RTN","PRCAUDT",15,0)
 F  D  Q:$S(PREND:1,PRAUTOA:1,1:0)
"RTN","PRCAUDT",16,0)
 . K PRCABT
"RTN","PRCAUDT",17,0)
 . S PRQUIT=0 ; PRCA*4.5*321
"RTN","PRCAUDT",18,0)
 . S PRCA("MESG")="*** AUDITED AND RELEASED ***"
"RTN","PRCAUDT",19,0)
 . I LOOP,'$O(^PRCA(430,"AC",18,PRCABN)) W !!,"*** Loop Done ***",!! S PREND=1 Q
"RTN","PRCAUDT",20,0)
 . I PRAUTOA S PRCA("CKSITE")="",PRCA("SITE")=$P($$BILL(PRCABN),"-") K PRCAT
"RTN","PRCAUDT",21,0)
 . I '$D(PRCA("CKSITE")) D CKSITE K:$D(PRCA("CKSITE")) PRCAT I '$D(PRCA("CKSITE")) S PREND=1 Q
"RTN","PRCAUDT",22,0)
 . I LOOP S PRCABN=$O(^PRCA(430,"AC",18,PRCABN)) I 'PRCABN S PREND=1 Q
"RTN","PRCAUDT",23,0)
 . I LOOP!PRAUTOA D  Q:PRQUIT
"RTN","PRCAUDT",24,0)
 .. I $$BILLREJ(PRCABN) S PRQUIT=1 Q   ; PRCA*4.5*321 - claim has reject messages, do not audit
"RTN","PRCAUDT",25,0)
 .. S PRCATY=$P(^PRCA(430,PRCABN,0),U,2),PRCA("SEG")=$S(+$P(^(0),U,21)>240:$P(^(0),U,21),1:"")
"RTN","PRCAUDT",26,0)
 .. S PRCA("STATUS")=$P(^PRCA(430,PRCABN,0),U,8),PRCA("APPR")=$P(^(0),U,18)
"RTN","PRCAUDT",27,0)
 . E  D  Q:PREND!PRQUIT
"RTN","PRCAUDT",28,0)
 .. S DIC("S")="S Z0=$S($D(^PRCA(430.3,+$P(^(0),U,8),0)):$P(^(0),U,3),1:0) I Z0=104"
"RTN","PRCAUDT",29,0)
 .. D DIC I '$G(PRCABN) S PREND=1 Q
"RTN","PRCAUDT",30,0)
 .. I $$BILLREJ(PRCABN) D  S PRQUIT=1 Q   ; PRCA*4.5*321
"RTN","PRCAUDT",31,0)
 ... D PAUSE("Claim has reject messages, can not be audited")
"RTN","PRCAUDT",32,0)
 . ;
"RTN","PRCAUDT",33,0)
 . S PRCAKT=$S($P(^PRCA(430,PRCABN,0),U,2)]"":$P(^(0),U,2),1:"")
"RTN","PRCAUDT",34,0)
 . I +PRCAKT'>0 D:$G(PRAUTOA) SETERR("NO CATEGORY DEFINED FOR BILL "_$$BILL(PRCABN)) D END Q
"RTN","PRCAUDT",35,0)
 . S PRCARI=$O(^PRCA(430.2,"AC",21,0))
"RTN","PRCAUDT",36,0)
 . I $P(^PRCA(430,PRCABN,0),U,21)="" S X=PRCABN D:PRCARI=PRCAKT SEGMT S:'$D(Y) Y=-1 S PRCASEG=$S(PRCARI=PRCAKT&(Y<1):"",PRCARI=PRCAKT:Y,$D(^PRCA(430.2,PRCAKT,0)):$P(^(0),U,3),1:""),$P(^PRCA(430,PRCABN,0),U,21)=PRCASEG
"RTN","PRCAUDT",37,0)
 . S PRCAT=$S($D(^PRCA(430.2,PRCAKT,0)):$P(^(0),U,6),1:"") I PRCAT="" D:$G(PRAUTOA) SETERR("NO CATEGORY TYPE DEFINED FOR BILL "_$$BILL(PRCABN)) D END Q
"RTN","PRCAUDT",38,0)
 . I $P(^PRCA(430.2,PRCAKT,0),U,7)=24 S PRCAT("C")=1,Z0=$P(^PRCA(430,PRCABN,0),U,16) S:+Z0'>0 Z0=PRCAKT S $P(^PRCA(430,PRCABN,0),U,21)=$S($D(^PRCA(430.2,+Z0,0)):$P(^(0),U,3),1:0) K Z0,PRCAKT
"RTN","PRCAUDT",39,0)
 . ;
"RTN","PRCAUDT",40,0)
 . I '$G(PRAUTOA) D DISPL,DISPLACC^PRCAFUT D  Q:PREND
"RTN","PRCAUDT",41,0)
 .. I $D(PRCA("EXIT")) S PREND=1 Q 
"RTN","PRCAUDT",42,0)
 .. D MESSG
"RTN","PRCAUDT",43,0)
 . S PRCARETN=0,PRCAOK=$G(PRAUTOA)
"RTN","PRCAUDT",44,0)
 . I '$G(PRAUTOA) D ASK I $D(PRCA("EXIT")) D END S PREND=1 Q
"RTN","PRCAUDT",45,0)
 . I PRCAOK=1 D  D:$D(PRCA("EXIT")) END Q
"RTN","PRCAUDT",46,0)
 .. K PRCA("EXIT") D MTCHK I $D(PRCA("EXIT")) Q
"RTN","PRCAUDT",47,0)
 .. D:PRCAT="T" THIRD^PRCAUDT1
"RTN","PRCAUDT",48,0)
 .. I +$P(^PRCA(430,PRCABN,0),U,5)'>0 D CAUSED^PRCAUDT1 Q:PRCAOK=0
"RTN","PRCAUDT",49,0)
 .. D COMMENTS^PRCAUT3 Q:$D(PRCA("EXIT"))
"RTN","PRCAUDT",50,0)
 .. S PRCASIG=0 D SIG K PRCA("EXIT") Q:PRCASIG=0
"RTN","PRCAUDT",51,0)
 .. D UPBALN^PRCAUDT1,UPSEG
"RTN","PRCAUDT",52,0)
 .. I '$$ACCK^PRCAACC(PRCABN),("^28^29^"'[("^"_$G(PRCAKT)_"^")) D EN^PRCAFBD(PRCABN,.ERR)
"RTN","PRCAUDT",53,0)
 .. I $G(PRCAKT)=28 D EN^PRCACPV(PRCABN,.ERR) S:ERR<0 PRCA("MESG")="FMS document created . . . "
"RTN","PRCAUDT",54,0)
 .. K PRCA("EXIT")
"RTN","PRCAUDT",55,0)
 .. I +$G(ERR)>0 D  D END Q
"RTN","PRCAUDT",56,0)
 ... N Z,Z0,Z1
"RTN","PRCAUDT",57,0)
 ... S Z="Unable to create FMS Billing Document: ",Z0=$P(ERR,U,2),Z1="Status remains NEW BILL."
"RTN","PRCAUDT",58,0)
 ... I '$G(PRAUTOA) D
"RTN","PRCAUDT",59,0)
 .... W *7,!!,Z,!,?10,Z0,!!,Z1,!! H 3
"RTN","PRCAUDT",60,0)
 ... E  D
"RTN","PRCAUDT",61,0)
 .... D SETERR(Z),SETERR(Z0),SETERR(Z1)
"RTN","PRCAUDT",62,0)
 ... S PRCA("STATUS")=18 D UPSTATS^PRCAUT2
"RTN","PRCAUDT",63,0)
 ... ;
"RTN","PRCAUDT",64,0)
 .. I '$G(PRAUTOA) D SIG1 W !,PRCA("MESG")
"RTN","PRCAUDT",65,0)
 .. D END
"RTN","PRCAUDT",66,0)
 . I PRCARETN=1,'$G(PRAUTOA) D RETN^PRCAUDT1 Q
"RTN","PRCAUDT",67,0)
 . D END
"RTN","PRCAUDT",68,0)
 D END
"RTN","PRCAUDT",69,0)
 Q
"RTN","PRCAUDT",70,0)
 ;
"RTN","PRCAUDT",71,0)
END L -^PRCA(430,+$G(PRCABN)) K %,DA,PRCAKT,PRCATY,PRCANM,PRCARETN,PRCAOK,PRCAT,DIC,DIE,DR,ERR,PRCASIG,J,Z0,D0,DI,PRC,PRCARI,DIR,DIRUT,DIROUT,DUOUT
"RTN","PRCAUDT",72,0)
 D CLEAN^DILF
"RTN","PRCAUDT",73,0)
 Q
"RTN","PRCAUDT",74,0)
 ;
"RTN","PRCAUDT",75,0)
 ;======================== SUBROUTINES ==========================
"RTN","PRCAUDT",76,0)
BULL(PRCABN) ; Send a bulletin for auto audit errors
"RTN","PRCAUDT",77,0)
 ; PRCABN = ien of bill in file 430
"RTN","PRCAUDT",78,0)
 N XMBODY,XMB,XMINSTR,XMTYPE,XMFULL,XMTO,XMZ,XMERR,PRCAE,CT,Z
"RTN","PRCAUDT",79,0)
 S XMTO("I:G.RCDPE PAYMENTS")="",CT=0
"RTN","PRCAUDT",80,0)
 S CT=CT+1,PRCAE(CT)="The following problem(s) were encountered when attempting to auto-audit a bill",CT=CT+1,PRCAE(CT)="from IB's electronic return messages"
"RTN","PRCAUDT",81,0)
 S CT=CT+1,PRCAE(CT)=" ",Z=0
"RTN","PRCAUDT",82,0)
 F  S Z=$O(^TMP($J,"PRCA_AUTO_AUDIT_ERROR",Z)) Q:'Z  S CT=CT+1,PRCAE(CT)=$G(^(Z))
"RTN","PRCAUDT",83,0)
 S XMBODY="PRCAE"
"RTN","PRCAUDT",84,0)
 D SENDMSG^XMXAPI("","AUTO AUDIT FAILED FOR BILL "_$$BILL(PRCABN),XMBODY,.XMTO)
"RTN","PRCAUDT",85,0)
 Q
"RTN","PRCAUDT",86,0)
 ;
"RTN","PRCAUDT",87,0)
DIC S DIC="^PRCA(430,",DIC(0)="AEQM" D BILLN^PRCAUTL Q
"RTN","PRCAUDT",88,0)
DIE W ! S DA=PRCABN,DIC="^PRCA(430,",PRCA("LOCK")=0 D LOCKF^PRCAWO1 Q:PRCA("LOCK")=1  S DIE=DIC
"RTN","PRCAUDT",89,0)
 I '$$ACCK^PRCAACC(PRCABN),("^27^28^"'[("^"_PRCAKT_"^")) D CPLK^PRCAFUT(PRCABN)
"RTN","PRCAUDT",90,0)
 Q:$D(PRCA("EXIT"))  S DR="[PRCAE AUDIT]" D ^DIE K DIE,DR Q
"RTN","PRCAUDT",91,0)
DISPL ;display the accounts receivable data user has entered.
"RTN","PRCAUDT",92,0)
 Q:'$D(PRCABN)  NEW DIC,L,FR,TO,FLDS,IOP,BY
"RTN","PRCAUDT",93,0)
 S IOP=IO(0),DIC="^PRCA(430,",FLDS="[PRCA DISP AUDIT]",(FR,TO)=PRCABN,L=0,BY="@NUMBER" D EN1^DIP,WOBIL^PRCAUDT1 Q
"RTN","PRCAUDT",94,0)
ASK S %=2 W !,"IS THIS DATA CORRECT" D YN^DICN I %<0 S PRCA("EXIT")="" Q
"RTN","PRCAUDT",95,0)
 I %=0 D M1^PRCAMESG G ASK
"RTN","PRCAUDT",96,0)
 I %=1 S PRCAOK=1 Q
"RTN","PRCAUDT",97,0)
ASK1 S %=2 W !!,"Do you want to edit this information " D YN^DICN I %<0 S PRCA("EXIT")="" Q
"RTN","PRCAUDT",98,0)
 I %=0 D M2^PRCAMESG G ASK1
"RTN","PRCAUDT",99,0)
 I %=1 D DIE,DISPL,DISPLACC^PRCAFUT G ASK
"RTN","PRCAUDT",100,0)
ASK2 S %=2 W !!,"Then do you want to return this bill to the service" D YN^DICN I %<0 S PRCA("EXIT")="" Q
"RTN","PRCAUDT",101,0)
 Q:%=2  I %=0 W !,"Answer 'Y' (YES) or 'N' (NO)" G ASK2
"RTN","PRCAUDT",102,0)
ASK3 S %=2 W !,"Are you sure you want to return" D YN^DICN I %<0 S PRCA("EXIT")="" Q
"RTN","PRCAUDT",103,0)
 I %=0 W "Answer 'Y' (YES) if you want to return this bill to the service that originated it.  If not, answer 'N' (NO)." G ASK3
"RTN","PRCAUDT",104,0)
 I %=1 S PRCARETN=1 Q
"RTN","PRCAUDT",105,0)
 Q  ;end of ASK
"RTN","PRCAUDT",106,0)
SIG N PRCADUZ
"RTN","PRCAUDT",107,0)
 I $G(PRAUTOA) S PRCADUZ=+$O(^VA(200,"B","PRCA,AUTOAUDIT",0)),PRCANM="AUTO-AUDIT"
"RTN","PRCAUDT",108,0)
 I '$G(PRAUTOA) S DA=PRCABN D SIG^PRCASIG
"RTN","PRCAUDT",109,0)
 D NOW^%DTC I $D(PRCANM) S $P(^PRCA(430,PRCABN,9),U,1,3)=$S('$G(PRAUTOA):+DUZ,1:PRCADUZ)_U_PRCANM_U_%,PRCASIG=1
"RTN","PRCAUDT",110,0)
 Q
"RTN","PRCAUDT",111,0)
SIG1 S PRCANM=$P($G(^VA(200,DUZ,20)),U,2) I PRCANM]"" D EN^PRCASIG(.PRCANM,DUZ,PRCABN_+$P(^PRCA(430,PRCABN,0),U,3)) S $P(^PRCA(430,PRCABN,9),U,2)=PRCANM
"RTN","PRCAUDT",112,0)
 Q
"RTN","PRCAUDT",113,0)
MESSG Q
"RTN","PRCAUDT",114,0)
SEGMT D:$D(^DGCR(399,PRCABN)) ^IBCAMS S:'$D(^DGCR(399,PRCABN)) Y=297 Q
"RTN","PRCAUDT",115,0)
UPSEG ;
"RTN","PRCAUDT",116,0)
 S PRCAT=$P(^PRCA(430,PRCABN,0),U,2),$P(^(0),U,21)=""
"RTN","PRCAUDT",117,0)
 D SEGMT^PRCAEOL
"RTN","PRCAUDT",118,0)
 Q
"RTN","PRCAUDT",119,0)
CKSITE ;check site parameter and user number.
"RTN","PRCAUDT",120,0)
 NEW DIC
"RTN","PRCAUDT",121,0)
 S DIC="^DIC(4,",DIC(0)="QEAM",DIC("B")=$P($G(^RC(342,1,0)),"^"),DIC("A")="SITE: " D ^DIC Q:Y<0  S PRCA("SITE")=+$$GET1^DIQ(4,+Y,99) Q:'PRCA("SITE")
"RTN","PRCAUDT",122,0)
 S PRCA("CKSITE")="" Q
"RTN","PRCAUDT",123,0)
MTCHK N PRCAI,PRCAMT,PRCAMT1,Z,Z0
"RTN","PRCAUDT",124,0)
 S PRCAMT1=0 F PRCAI=0:0 S PRCAI=$O(^PRCA(430,PRCABN,2,PRCAI)) Q:'PRCAI  S PRCAMT=+$P($G(^(PRCAI,0)),"^",8) I PRCAMT S PRCAMT1=PRCAMT1+1
"RTN","PRCAUDT",125,0)
 I PRCAMT1=1 Q
"RTN","PRCAUDT",126,0)
 S Z="Currently, just one Fiscal Year amount is sent to FMS.",Z0="This bill has "_PRCAMT1_" entered and should be returned to the service."
"RTN","PRCAUDT",127,0)
 I '$G(PRAUTOA) D
"RTN","PRCAUDT",128,0)
 . W !!,?3,Z,?3,Z0,!
"RTN","PRCAUDT",129,0)
 E  D
"RTN","PRCAUDT",130,0)
 . D SETERR("BILL: "_$$BILL(PRCABN)),SETERR(Z),SETERR(Z0)
"RTN","PRCAUDT",131,0)
 S PRCA("EXIT")=""
"RTN","PRCAUDT",132,0)
 Q
"RTN","PRCAUDT",133,0)
 ;ZZPJH WIP 8/21/17
"RTN","PRCAUDT",134,0)
AUDITX(PRCABN) ; Auto audit a bill
"RTN","PRCAUDT",135,0)
 N PRAUTOA
"RTN","PRCAUDT",136,0)
 K ^TMP($J,"PRCA_AUTO_AUDIT_ERROR")
"RTN","PRCAUDT",137,0)
 L +^PRCA(430,+$G(PRCABN)):$G(DILOCKTM,5) I '$T D SETERR("ANOTHER USER HAS LOCKED BILL "_$$BILL(PRCABN)) ;PRCA*4.5*342, Pass text only
"RTN","PRCAUDT",138,0)
 I '$D(^TMP($J,"PRCA_AUTO_AUDIT_ERROR")) D AUDITB(PRCABN,1,0)
"RTN","PRCAUDT",139,0)
 ;
"RTN","PRCAUDT",140,0)
 I $D(^TMP($J,"PRCA_AUTO_AUDIT_ERROR")) D BULL(PRCABN)
"RTN","PRCAUDT",141,0)
 K ^TMP($J,"PRCA_AUTO_AUDIT_ERROR")
"RTN","PRCAUDT",142,0)
 Q
"RTN","PRCAUDT",143,0)
 ;
"RTN","PRCAUDT",144,0)
SETERR(TEXT) ;
"RTN","PRCAUDT",145,0)
 S ^TMP($J,"PRCA_AUTO_AUDIT_ERROR",+$O(^TMP($J,"PRCA_AUTO_AUDIT_ERROR",""),-1)+1)=TEXT
"RTN","PRCAUDT",146,0)
 Q
"RTN","PRCAUDT",147,0)
 ;
"RTN","PRCAUDT",148,0)
BILL(PRCABN) ; Returns AR bill number in external format
"RTN","PRCAUDT",149,0)
 Q $P($G(^PRCA(430,+$G(PRCABN),0)),U)
"RTN","PRCAUDT",150,0)
 ;
"RTN","PRCAUDT",151,0)
BILLREJ(PRCABN) ; EP Check if bill has reject messages. Added for PRCA*4.5*321
"RTN","PRCAUDT",152,0)
 ; Input - PRCABN - Internal Entry number from ACCOUNTS RECEIVABLE file [#430]
"RTN","PRCAUDT",153,0)
 ; (Note - file #399 has same IEN as file #430)
"RTN","PRCAUDT",154,0)
 ; Output - 1 - Reject messages 0 - No Reject messages
"RTN","PRCAUDT",155,0)
 N BILLNO,RETURN
"RTN","PRCAUDT",156,0)
 S BILLNO=$$GET1^DIQ(399,PRCABN_",",.01,"I")
"RTN","PRCAUDT",157,0)
 S RETURN=$$BILLREJ^IBJTU6(BILLNO) ; API call covered by IA 6060
"RTN","PRCAUDT",158,0)
 Q RETURN
"RTN","PRCAUDT",159,0)
 ;
"RTN","PRCAUDT",160,0)
PAUSE(MSG) ; Display message and pause till user responds
"RTN","PRCAUDT",161,0)
 ; INPUT - MSG - Message to display to user
"RTN","PRCAUDT",162,0)
 ; Output - None
"RTN","PRCAUDT",163,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,Y
"RTN","PRCAUDT",164,0)
 W !!,MSG,!
"RTN","PRCAUDT",165,0)
 S DIR(0)="EA"
"RTN","PRCAUDT",166,0)
 S DIR("A")="Type <Enter> to continue: "
"RTN","PRCAUDT",167,0)
 D ^DIR
"RTN","PRCAUDT",168,0)
 Q
"VER")
8.0^22.2
"BLD",11159,6)
^301
**END**
**END**

