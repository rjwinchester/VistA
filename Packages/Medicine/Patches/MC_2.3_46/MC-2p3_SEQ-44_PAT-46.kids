Released MC*2.3*46 SEQ #44
Extracted from mail message
**KIDS**:MC*2.3*46^

**INSTALL NAME**
MC*2.3*46
"BLD",10091,0)
MC*2.3*46^MEDICINE^0^3170117^y
"BLD",10091,1,0)
^^7^7^3170117^
"BLD",10091,1,1,0)
After the release of VistA patch MC*2.3*25, diffusion calculations were 
"BLD",10091,1,2,0)
no longer valid on the Pulmonary Function Test Report, giving an inflated 
"BLD",10091,1,3,0)
calculation of the % of predicted. OI&T developed code to fix this and 
"BLD",10091,1,4,0)
gave it to some sites. This code was supposed to be released in a patch 
"BLD",10091,1,5,0)
to correct the calculation, however the patch was not released since the 
"BLD",10091,1,6,0)
Medicine package was subsequently placed in Maintenance.  This is needed 
"BLD",10091,1,7,0)
for VistA Std.
"BLD",10091,4,0)
^9.64PA^^
"BLD",10091,6.3)
1
"BLD",10091,"ABPKG")
n
"BLD",10091,"KRN",0)
^9.67PA^779.2^20
"BLD",10091,"KRN",.4,0)
.4
"BLD",10091,"KRN",.401,0)
.401
"BLD",10091,"KRN",.402,0)
.402
"BLD",10091,"KRN",.403,0)
.403
"BLD",10091,"KRN",.5,0)
.5
"BLD",10091,"KRN",.84,0)
.84
"BLD",10091,"KRN",3.6,0)
3.6
"BLD",10091,"KRN",3.8,0)
3.8
"BLD",10091,"KRN",9.2,0)
9.2
"BLD",10091,"KRN",9.8,0)
9.8
"BLD",10091,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10091,"KRN",9.8,"NM",1,0)
MCPFTP2A^^0^B17848713
"BLD",10091,"KRN",9.8,"NM","B","MCPFTP2A",1)

"BLD",10091,"KRN",19,0)
19
"BLD",10091,"KRN",19.1,0)
19.1
"BLD",10091,"KRN",101,0)
101
"BLD",10091,"KRN",409.61,0)
409.61
"BLD",10091,"KRN",771,0)
771
"BLD",10091,"KRN",779.2,0)
779.2
"BLD",10091,"KRN",870,0)
870
"BLD",10091,"KRN",8989.51,0)
8989.51
"BLD",10091,"KRN",8989.52,0)
8989.52
"BLD",10091,"KRN",8994,0)
8994
"BLD",10091,"KRN","B",.4,.4)

"BLD",10091,"KRN","B",.401,.401)

"BLD",10091,"KRN","B",.402,.402)

"BLD",10091,"KRN","B",.403,.403)

"BLD",10091,"KRN","B",.5,.5)

"BLD",10091,"KRN","B",.84,.84)

"BLD",10091,"KRN","B",3.6,3.6)

"BLD",10091,"KRN","B",3.8,3.8)

"BLD",10091,"KRN","B",9.2,9.2)

"BLD",10091,"KRN","B",9.8,9.8)

"BLD",10091,"KRN","B",19,19)

"BLD",10091,"KRN","B",19.1,19.1)

"BLD",10091,"KRN","B",101,101)

"BLD",10091,"KRN","B",409.61,409.61)

"BLD",10091,"KRN","B",771,771)

"BLD",10091,"KRN","B",779.2,779.2)

"BLD",10091,"KRN","B",870,870)

"BLD",10091,"KRN","B",8989.51,8989.51)

"BLD",10091,"KRN","B",8989.52,8989.52)

"BLD",10091,"KRN","B",8994,8994)

"BLD",10091,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",10091,"QUES",0)
^9.62^^
"BLD",10091,"REQB",0)
^9.611^^
"MBREQ")
0
"PKG",216,-1)
1^1
"PKG",216,0)
MEDICINE^MC^MEDICINE PACKAGE INCLUDES ALL AREAS OF MEDICINE
"PKG",216,20,0)
^9.402P^^
"PKG",216,22,0)
^9.49I^1^1
"PKG",216,22,1,0)
2.3^2960913^2961110^1
"PKG",216,22,1,"PAH",1,0)
46^3170117
"PKG",216,22,1,"PAH",1,1,0)
^^7^7^3170117
"PKG",216,22,1,"PAH",1,1,1,0)
After the release of VistA patch MC*2.3*25, diffusion calculations were 
"PKG",216,22,1,"PAH",1,1,2,0)
no longer valid on the Pulmonary Function Test Report, giving an inflated 
"PKG",216,22,1,"PAH",1,1,3,0)
calculation of the % of predicted. OI&T developed code to fix this and 
"PKG",216,22,1,"PAH",1,1,4,0)
gave it to some sites. This code was supposed to be released in a patch 
"PKG",216,22,1,"PAH",1,1,5,0)
to correct the calculation, however the patch was not released since the 
"PKG",216,22,1,"PAH",1,1,6,0)
Medicine package was subsequently placed in Maintenance.  This is needed 
"PKG",216,22,1,"PAH",1,1,7,0)
for VistA Std.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","MCPFTP2A")
0^1^B17848713^B17926565
"RTN","MCPFTP2A",1,0)
MCPFTP2A ;WISC/TJK-PFT REPORT-FLOWS ; 17 Jan 2017  4:41 PM
"RTN","MCPFTP2A",2,0)
 ;;2.3;Medicine;**25,46**;09/13/1996;Build 1
"RTN","MCPFTP2A",3,0)
FLOW G DIF:'$D(^MCAR(700,MCARGDA,4)),DIF:'$O(^(4,0)) S MCX=0
"RTN","MCPFTP2A",4,0)
 ;I '$D(HEAD1) S HEAD1="FLOWS" D HEAD1^MCPFTP2,HEAD2^MCPFTP2
"RTN","MCPFTP2A",5,0)
 ;E  S HEAD1="FLOWS" D @$S(($Y>(IOSL-5)):"MCFF1",1:"HEAD2^MCPFTP2") Q:$D(MCOUT)
"RTN","MCPFTP2A",6,0)
 X:$Y>(IOSL-5) MCFF
"RTN","MCPFTP2A",7,0)
 S HEAD1="FLOWS" D HEAD1^MCPFTP2,HEAD2^MCPFTP2
"RTN","MCPFTP2A",8,0)
 Q:$D(MCOUT)
"RTN","MCPFTP2A",9,0)
 I MC17'="" S MC17A=$P(MC17,U,2) W ?3,"MACHINE: ",$S(MC17A="F":"FLOW TURBINE",MC17A="P":"PNEUMOTACH",MC17A="A":"ANEMOMETER",MC17A="DS":"DRY WATER SEAL",MC17A="WS":"WATER SEAL",MC17A="W":"WEDGE",1:"") X MCFF K MC17A Q:$D(MCOUT)
"RTN","MCPFTP2A",10,0)
FLOW1 S MCX=$O(^MCAR(700,MCARGDA,4,MCX)) G DIF:MCX'?1N.N S MCREC=^(MCX,0),TYPE=$P(MCREC,U)
"RTN","MCPFTP2A",11,0)
 W !! X MCFF Q:$D(MCOUT)
"RTN","MCPFTP2A",12,0)
 S ND="AF",ND1=4 D PRETEST^MCPFTP2
"RTN","MCPFTP2A",13,0)
 W ?5,$S(TYPE="S":"STANDARD STUDY",TYPE="B":"AFTER BRONCHODILATOR",TYPE="I":"AFTER INHALATION CHALLENGE",1:"AFTER EXERCISE") X MCFF Q:$D(MCOUT)  D PREVDATE^MCPFTP2
"RTN","MCPFTP2A",14,0)
 I $P(MCREC,U,6)'="" W !,?5,"(NOTES): ",$P(MCREC,U,6) X MCFF Q:$D(MCOUT)
"RTN","MCPFTP2A",15,0)
 S ACT=$P(MCREC,U,2) I ACT S MEAS="FVC",UNITS="L",PRED=FVC X:$D(MCRC1) MCRC1 S PC=2,CI95=$S(PRED:PRED-CFVC,1:"") D PRTLINE S:TYPE="S" MCIFA=ACT,MCIFL=CI95 Q:$D(MCOUT)
"RTN","MCPFTP2A",16,0)
 S ACT=$P(MCREC,U,3) I ACT S MEAS="FEV1",UNITS="L",PRED=FEV1 X:$D(MCRC1) MCRC1 S PC=3,CI95=$S(PRED:PRED-CFEV1,1:"") D PRTLINE S:TYPE="S" MCIFE=ACT Q:$D(MCOUT)
"RTN","MCPFTP2A",17,0)
 S MCDL=3,MCLNG=6,ACT=$P(MCREC,U,4) I ACT S MEAS="PF",UNITS="L/SEC",PRED=PF,PC=4,CI95=$S(PRED:PRED-CPF,1:"") D PRTLINE Q:$D(MCOUT)
"RTN","MCPFTP2A",18,0)
 S ACT=$P(MCREC,U,5) I ACT S MEAS="FEF25-75",UNITS="L/SEC",PRED=FEF2575 X:$D(MCRC4) MCRC4 S PC=5,CI95=$S(PRED:PRED-CFEF2575,1:"") D PRTLINE Q:$D(MCOUT)
"RTN","MCPFTP2A",19,0)
 S MCDL=2,MCLNG=5,ACT=$P(MCREC,U,7) I ACT S MEAS="MVV",UNITS="L/MIN",PRED=MVV X:$D(MCRC5) MCRC5 S PC=7,CI95=$S(PRED:PRED-CMVV,1:"") S:TYPE="S" MCMVVN=ACT D PRTLINE Q:$D(MCOUT)
"RTN","MCPFTP2A",20,0)
 I $P(MCREC,U,2),$P(MCREC,U,3) W !,?5,"FEV1/FVC",?17,"%" S ACT=$P(MCREC,U,3)/$P(MCREC,U,2) W ?35,$J(ACT*100,5,0) S:TYPE="S" MCIFV=ACT X MCFF Q:$D(MCOUT)
"RTN","MCPFTP2A",21,0)
 G FLOW1
"RTN","MCPFTP2A",22,0)
DIF K CFVC,CFEV1,CPF,CFEF2575,CMVV G ABG:'$D(^MCAR(700,MCARGDA,5)) S (ACT,MCIDA)=^(5) G ABG:'ACT
"RTN","MCPFTP2A",23,0)
 I '$D(HEAD1) S HEAD1="DIFFUSION" D HEAD1^MCPFTP2,HEAD2^MCPFTP2
"RTN","MCPFTP2A",24,0)
 E  S HEAD1="DIFFUSION" W ! D HEAD2^MCPFTP2
"RTN","MCPFTP2A",25,0)
 Q:$D(MCOUT)  I MC17'="" S MC17A=$P(MC17,U,4) W ?3,"METHOD: ",$S(MC17A=1:"SINGLE BREATH",MC17A=2:"STEADY STATE",1:"") X MCFF K MC17A Q:$D(MCOUT)
"RTN","MCPFTP2A",26,0)
DIF0 S (MCIDP,PRED)=DLCOSB,UNITS="L",MEAS="DLCO-SB",PC=1
"RTN","MCPFTP2A",27,0)
 S (P1,P2)="" S RDATE1=$O(^MCAR(700,"ADI",DFN,RDATE)) I RDATE1 S P1=$O(^(RDATE1,0))
"RTN","MCPFTP2A",28,0)
 G DIF1:'P1 S MCP1=$G(^MCAR(700,P1,5))
"RTN","MCPFTP2A",29,0)
 S RDATE2=$O(^MCAR(700,"ADI",DFN,RDATE1)) I RDATE2 S P2=$O(^(RDATE2,0)) I P2 S MCP2=$G(^MCAR(700,P2,5))
"RTN","MCPFTP2A",30,0)
DIF1 D:P1 PREVDATE^MCPFTP2 S (MCIDL,CI95)=$S(PRED:PRED-CDLCOSB,1:"") D PRTLINE Q:$D(MCOUT)
"RTN","MCPFTP2A",31,0)
 G ABG:'$D(^MCAR(700,MCARGDA,6))
"RTN","MCPFTP2A",32,0)
 I $G(MCPV)<1 S MCPV=$$MCPV^MCPFTP1(MCARGDA)
"RTN","MCPFTP2A",33,0)
 S MCHB=$G(^MCAR(700.1,MCPV,"HB")),MCCOHB=$G(^("COHB"))
"RTN","MCPFTP2A",34,0)
 I MCHB="",MCCOHB="" G ABG
"RTN","MCPFTP2A",35,0)
 G HB:$P(MCCOHB,U)="" S MCCOHB=$G(^MCAR(700.2,MCCOHB,0)) G HB:MCCOHB="" S COHB=""
"RTN","MCPFTP2A",36,0)
 S I=0 F  S I=$O(^MCAR(700,MCARGDA,6,I)) Q:I'?1N.N  I $D(^(I,0)),$P(^(0),U,7) S COHB=$P(^(0),U,7)
"RTN","MCPFTP2A",37,0)
 G HB:COHB="" X "S MCCOHB="_$P(MCCOHB,U)
"RTN","MCPFTP2A",38,0)
 ;W !,"Corrected DLCO for COHB: ",$J(MCCOHB,6,2)
"RTN","MCPFTP2A",39,0)
HB G ABG:$P(MCHB,U)="" S MCHB=$G(^MCAR(700.2,MCHB,0)) G ABG:MCHB=""
"RTN","MCPFTP2A",40,0)
 S HB="",I=0 F  S I=$O(^MCAR(700,MCARGDA,6,I)) Q:I'?1N.N  I $D(^(I,0)),$P(^(0),U,2) S HB=$P(^(0),U,2)
"RTN","MCPFTP2A",41,0)
 G ABG:'HB X "S MCHB="_$P(MCHB,U)
"RTN","MCPFTP2A",42,0)
 W !,"Corr DLCO for HB & COHB:",?19,$J(PRED,6,2),?32,$J(MCHB,8,2),?42,$S(+PRED'=0:$J(MCHB/PRED*100,8,1),1:"")
"RTN","MCPFTP2A",43,0)
ABG K HB,COHB,MCHB,MCCOHB G ^MCPFTP3
"RTN","MCPFTP2A",44,0)
PRTLINE S MCP1=$G(MCP1),MCP2=$G(MCP2)
"RTN","MCPFTP2A",45,0)
 W !,?5,MEAS,?15,UNITS,?25,$S(PRED:$J(PRED,MCLNG,MCDL),1:""),?35,$J(ACT,MCLNG,MCDL),?45,$S(PRED:$J(ACT/PRED*100,5,1),1:"") W:$P(MCP1,U,PC) ?55,$J($P(MCP1,U,PC),MCLNG,MCDL) W:$P(MCP2,U,PC) ?65,$J($P(MCP2,U,PC),MCLNG,MCDL)
"RTN","MCPFTP2A",46,0)
 W:(CI95)&(CI95'=PRED) ?72,$J(CI95,6,2) X MCFF Q
"RTN","MCPFTP2A",47,0)
MCFF1 X MCFF Q
"VER")
8.0^22.2
"BLD",10091,6)
^44
**END**
**END**

