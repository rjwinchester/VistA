Released LA*5.2*96 SEQ #70
Extracted from mail message
**KIDS**:LA*5.2*96^

**INSTALL NAME**
LA*5.2*96
"BLD",10521,0)
LA*5.2*96^AUTOMATED LAB INSTRUMENTS^0^3180207^y
"BLD",10521,1,0)
^^11^11^3170414^
"BLD",10521,1,1,0)
This patch addresses one (1) Laboratory Electronic Data Interchange (LEDI)
"BLD",10521,1,2,0)
issue:
"BLD",10521,1,3,0)
 
"BLD",10521,1,4,0)
Mycology organism comments are stored under the "Bacteriology Report 
"BLD",10521,1,5,0)
Comment" section of VistA Lab reports rather than with each Mycology 
"BLD",10521,1,6,0)
organism's section.
"BLD",10521,1,7,0)
 
"BLD",10521,1,8,0)
Associated CA-SDM ticket:
"BLD",10521,1,9,0)
==========================
"BLD",10521,1,10,0)
 
"BLD",10521,1,11,0)
I9858894FY16 : LEDI Mycology Organism Comment Issue
"BLD",10521,4,0)
^9.64PA^^
"BLD",10521,6.3)
2
"BLD",10521,"ABPKG")
n
"BLD",10521,"KRN",0)
^9.67PA^779.2^20
"BLD",10521,"KRN",.4,0)
.4
"BLD",10521,"KRN",.401,0)
.401
"BLD",10521,"KRN",.402,0)
.402
"BLD",10521,"KRN",.403,0)
.403
"BLD",10521,"KRN",.5,0)
.5
"BLD",10521,"KRN",.84,0)
.84
"BLD",10521,"KRN",3.6,0)
3.6
"BLD",10521,"KRN",3.8,0)
3.8
"BLD",10521,"KRN",9.2,0)
9.2
"BLD",10521,"KRN",9.8,0)
9.8
"BLD",10521,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10521,"KRN",9.8,"NM",1,0)
LA7VIN2A^^0^B34810805
"BLD",10521,"KRN",9.8,"NM","B","LA7VIN2A",1)

"BLD",10521,"KRN",19,0)
19
"BLD",10521,"KRN",19.1,0)
19.1
"BLD",10521,"KRN",101,0)
101
"BLD",10521,"KRN",409.61,0)
409.61
"BLD",10521,"KRN",771,0)
771
"BLD",10521,"KRN",779.2,0)
779.2
"BLD",10521,"KRN",870,0)
870
"BLD",10521,"KRN",8989.51,0)
8989.51
"BLD",10521,"KRN",8989.52,0)
8989.52
"BLD",10521,"KRN",8994,0)
8994
"BLD",10521,"KRN","B",.4,.4)

"BLD",10521,"KRN","B",.401,.401)

"BLD",10521,"KRN","B",.402,.402)

"BLD",10521,"KRN","B",.403,.403)

"BLD",10521,"KRN","B",.5,.5)

"BLD",10521,"KRN","B",.84,.84)

"BLD",10521,"KRN","B",3.6,3.6)

"BLD",10521,"KRN","B",3.8,3.8)

"BLD",10521,"KRN","B",9.2,9.2)

"BLD",10521,"KRN","B",9.8,9.8)

"BLD",10521,"KRN","B",19,19)

"BLD",10521,"KRN","B",19.1,19.1)

"BLD",10521,"KRN","B",101,101)

"BLD",10521,"KRN","B",409.61,409.61)

"BLD",10521,"KRN","B",771,771)

"BLD",10521,"KRN","B",779.2,779.2)

"BLD",10521,"KRN","B",870,870)

"BLD",10521,"KRN","B",8989.51,8989.51)

"BLD",10521,"KRN","B",8989.52,8989.52)

"BLD",10521,"KRN","B",8994,8994)

"BLD",10521,"QUES",0)
^9.62^^
"BLD",10521,"REQB",0)
^9.611^1^1
"BLD",10521,"REQB",1,0)
LA*5.2*90^1
"BLD",10521,"REQB","B","LA*5.2*90",1)

"MBREQ")
0
"PKG",53,-1)
1^1
"PKG",53,0)
AUTOMATED LAB INSTRUMENTS^LA
"PKG",53,20,0)
^9.402P^^
"PKG",53,22,0)
^9.49I^1^1
"PKG",53,22,1,0)
5.2^2940927^2981028^66481
"PKG",53,22,1,"PAH",1,0)
96^3180207
"PKG",53,22,1,"PAH",1,1,0)
^^11^11^3180207
"PKG",53,22,1,"PAH",1,1,1,0)
This patch addresses one (1) Laboratory Electronic Data Interchange (LEDI)
"PKG",53,22,1,"PAH",1,1,2,0)
issue:
"PKG",53,22,1,"PAH",1,1,3,0)
 
"PKG",53,22,1,"PAH",1,1,4,0)
Mycology organism comments are stored under the "Bacteriology Report 
"PKG",53,22,1,"PAH",1,1,5,0)
Comment" section of VistA Lab reports rather than with each Mycology 
"PKG",53,22,1,"PAH",1,1,6,0)
organism's section.
"PKG",53,22,1,"PAH",1,1,7,0)
 
"PKG",53,22,1,"PAH",1,1,8,0)
Associated CA-SDM ticket:
"PKG",53,22,1,"PAH",1,1,9,0)
==========================
"PKG",53,22,1,"PAH",1,1,10,0)
 
"PKG",53,22,1,"PAH",1,1,11,0)
I9858894FY16 : LEDI Mycology Organism Comment Issue
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","LA7VIN2A")
0^1^B34810805^B34485992
"RTN","LA7VIN2A",1,0)
LA7VIN2A ;DALOI/JMC - Process Incoming UI Msgs, continued ;12/20/16  11:20
"RTN","LA7VIN2A",2,0)
 ;;5.2;AUTOMATED LAB INSTRUMENTS;**74,88,90,96**;Sep 27, 1994;Build 2
"RTN","LA7VIN2A",3,0)
 ;
"RTN","LA7VIN2A",4,0)
 ;This routine is a continuation of LA7VIN2 and is only called from there.
"RTN","LA7VIN2A",5,0)
 Q
"RTN","LA7VIN2A",6,0)
 ;
"RTN","LA7VIN2A",7,0)
NTE ; Process NTE segment
"RTN","LA7VIN2A",8,0)
 ; NTE segments contain comments from instruments or other facilities.
"RTN","LA7VIN2A",9,0)
 ; NTE segments following OBR's contain comments which refer to the entire test battery.
"RTN","LA7VIN2A",10,0)
 ; NTE segments following OBX's contain comments which are test specific.
"RTN","LA7VIN2A",11,0)
 ;
"RTN","LA7VIN2A",12,0)
 ; For comments in ORU messages:
"RTN","LA7VIN2A",13,0)
 ;  Test specific comments can be prefaced with a site defined prefix -
"RTN","LA7VIN2A",14,0)
 ;  see field REMARK PREFIX (#19) in CHEM TEST multiple of AUTOMATED INSTRUMENT (#62.4 file.
"RTN","LA7VIN2A",15,0)
 ;  There can be more than one NTE, each will be stored as a comment in ^LAH.
"RTN","LA7VIN2A",16,0)
 ;
"RTN","LA7VIN2A",17,0)
 N LA7,LA7CMTYP,LA7I,LA7NTE,LA7SOC,X,Y
"RTN","LA7VIN2A",18,0)
 ;
"RTN","LA7VIN2A",19,0)
 S LA7SOC=$$P^LA7VHLU(.LA7SEG,3,LA7FS)
"RTN","LA7VIN2A",20,0)
 S LA7NTE=$$P^LA7VHLU(.LA7SEG,4,LA7FS)
"RTN","LA7VIN2A",21,0)
 S LA7CMTYP=$$P^LA7VHLU(.LA7SEG,5,LA7FS)
"RTN","LA7VIN2A",22,0)
 D FLD2ARR^LA7VHLU7(.LA7CMTYP,LA7FS_LA7ECH)
"RTN","LA7VIN2A",23,0)
 ;
"RTN","LA7VIN2A",24,0)
 ; Trim trailing spaces.
"RTN","LA7VIN2A",25,0)
 I LA7NTE'="" S LA7NTE=$$TRIM^XLFSTR(LA7NTE,"R"," ")
"RTN","LA7VIN2A",26,0)
 I LA7NTE="" S LA7NTE=" "
"RTN","LA7VIN2A",27,0)
 ;
"RTN","LA7VIN2A",28,0)
 I LA7MTYP="ORM" D OCOM Q
"RTN","LA7VIN2A",29,0)
 ;
"RTN","LA7VIN2A",30,0)
 ; Check for repeating comments in NTE segment and process
"RTN","LA7VIN2A",31,0)
 ; If "^" in remark then translate to "~" to store.
"RTN","LA7VIN2A",32,0)
 F LA7I=1:1:$L(LA7NTE,$E(LA7ECH,2)) D
"RTN","LA7VIN2A",33,0)
 . S LA7RMK=$P(LA7NTE,$E(LA7ECH,2),LA7I)
"RTN","LA7VIN2A",34,0)
 . I LA7RMK="" Q
"RTN","LA7VIN2A",35,0)
 . S LA7RMK=$$UNESC^LA7VHLU3(LA7RMK,LA7FS_LA7ECH)
"RTN","LA7VIN2A",36,0)
 . I LA7RMK["^" S LA7RMK=$TR(LA7RMK,"^","~")
"RTN","LA7VIN2A",37,0)
 . I LA7MTYP="ORU" D RCOM Q
"RTN","LA7VIN2A",38,0)
 . I LA7MTYP="ORR",$G(LA7OTYPE)="UA" D RCOM Q
"RTN","LA7VIN2A",39,0)
 ;
"RTN","LA7VIN2A",40,0)
 ; Clean up LA7RMK except for LA7RMK(0)
"RTN","LA7VIN2A",41,0)
 K X M X=LA7RMK(0) K LA7RMK M LA7RMK(0)=X
"RTN","LA7VIN2A",42,0)
 ;
"RTN","LA7VIN2A",43,0)
 Q
"RTN","LA7VIN2A",44,0)
 ;
"RTN","LA7VIN2A",45,0)
 ;
"RTN","LA7VIN2A",46,0)
RCOM ; Store result comments in ORU messages
"RTN","LA7VIN2A",47,0)
 ;
"RTN","LA7VIN2A",48,0)
 ; Check there's pointers to LAH
"RTN","LA7VIN2A",49,0)
 I $G(LA7LWL)=""!($G(LA7ISQN)="") Q
"RTN","LA7VIN2A",50,0)
 ;
"RTN","LA7VIN2A",51,0)
 ; Don't store remark if same as specimen comment (without "~").
"RTN","LA7VIN2A",52,0)
 I $G(LA7AA),$G(LA7AD),$G(LA7AN),LA7RMK=$TR($P($G(^LRO(68,LA7AA,1,LA7AD,1,LA7AN,3)),"^",6),"~") Q
"RTN","LA7VIN2A",53,0)
 ; Or patient info (#.091 in file 63) - info previously downloaded
"RTN","LA7VIN2A",54,0)
 I $G(LA7AA),$G(LA7AD),$G(LA7AN),LA7RMK=$G(^LR(+$G(^LRO(68,LA7AA,1,LA7AD,1,LA7AN,0)),.091)) Q
"RTN","LA7VIN2A",55,0)
 ;
"RTN","LA7VIN2A",56,0)
 ; If test specific, store comment prefix with comments (see LA7VIN5)
"RTN","LA7VIN2A",57,0)
 I $G(LA7SS)="CH",$O(LA7RMK(0,0)) D  Q
"RTN","LA7VIN2A",58,0)
 . N LA7I
"RTN","LA7VIN2A",59,0)
 . S LA7I=0
"RTN","LA7VIN2A",60,0)
 . F  S LA7I=$O(LA7RMK(0,LA7I)) Q:'LA7I  D
"RTN","LA7VIN2A",61,0)
 . . I $G(LA7AUTORELEASE) D RMKSET^LASET(LA7LWL,LA7ISQN,LA7RMK,$P(LA7RMK(0,LA7I),"^",2)) Q
"RTN","LA7VIN2A",62,0)
 . . I '$P(LA7RMK(0,LA7I),"^") Q
"RTN","LA7VIN2A",63,0)
 . . ; Don't store if status not "FINAL"
"RTN","LA7VIN2A",64,0)
 . . I $P(LA7RMK(0,LA7I),"^")=2,"CFUX"'[$G(LA7ORS) Q
"RTN","LA7VIN2A",65,0)
 . . D RMKSET^LASET(LA7LWL,LA7ISQN,LA7RMK,$P(LA7RMK(0,LA7I),"^",2))
"RTN","LA7VIN2A",66,0)
 ;
"RTN","LA7VIN2A",67,0)
 ; Store comment in 1 node of ^LAH global
"RTN","LA7VIN2A",68,0)
 I $G(LA7SS)="CH" D  Q
"RTN","LA7VIN2A",69,0)
 . I $P(LA7624(0),"^",17)!($G(LA7AUTORELEASE)) D RMKSET^LASET(LA7LWL,LA7ISQN,LA7RMK,"")
"RTN","LA7VIN2A",70,0)
 ;
"RTN","LA7VIN2A",71,0)
 ; Store "MI" subscript comments/remarks in specific places.
"RTN","LA7VIN2A",72,0)
 ;  - Don't store comments from ORR messages - handled by mail bulletin
"RTN","LA7VIN2A",73,0)
 I $G(LA7SS)="MI",LA7MTYP'="ORR" D  Q
"RTN","LA7VIN2A",74,0)
 . N LA7ISQN2,LA7ISQN3,LA7ISQN4,LA7ND,LACONCPT,LAPREFIX
"RTN","LA7VIN2A",75,0)
 . S (LA7ISQN2,LA7ISQN3,LA7ISQN4,LA7ND)=""
"RTN","LA7VIN2A",76,0)
 . I $G(LA7CMTYP(3))="HL70364",$E($G(LA7CMTYP(1)),1,7)="VA-LRMI" D MISPC
"RTN","LA7VIN2A",77,0)
 . S LACONCPT=$P($G(LA7RMK(0,0)),"^"),LAPREFIX=$P($G(LA7RMK(0,0)),"^",3)
"RTN","LA7VIN2A",78,0)
 . D MICMT,UPD0
"RTN","LA7VIN2A",79,0)
 ;
"RTN","LA7VIN2A",80,0)
 ; Store AP subscripts comments/remarks in specific places.
"RTN","LA7VIN2A",81,0)
 ; - Don't store comments from ORR messages - handled by mail bulletin
"RTN","LA7VIN2A",82,0)
 I $G(LA7SS)'="","SPCYEM"[LA7SS,LA7MTYP'="ORR" D  Q
"RTN","LA7VIN2A",83,0)
 . N LA7ISQN2,LAPREFIX
"RTN","LA7VIN2A",84,0)
 . S LA7ND=99,LAPREFIX=$P($G(LA7RMK(0,0)),"^",3),(LA7ISQN2,LA7ISQN3,LA7ISQN4)=""
"RTN","LA7VIN2A",85,0)
 . S LA7ISQN2=$O(^LAH(LA7LWL,1,LA7ISQN,LA7SS,99,"A"),-1)+1
"RTN","LA7VIN2A",86,0)
 . S ^LAH(LWL,1,LA7ISQN,LA7SS,99,LA7ISQN2,0)=LAPREFIX_LA7RMK
"RTN","LA7VIN2A",87,0)
 . D UPD0
"RTN","LA7VIN2A",88,0)
 ;
"RTN","LA7VIN2A",89,0)
 Q
"RTN","LA7VIN2A",90,0)
 ;
"RTN","LA7VIN2A",91,0)
 ;
"RTN","LA7VIN2A",92,0)
OCOM ; Store order comments from ORM messages in file #69.6
"RTN","LA7VIN2A",93,0)
 ; Check for repeating comments in NTE segment and process
"RTN","LA7VIN2A",94,0)
 ; If "^" in remark then translate to "~" to store.
"RTN","LA7VIN2A",95,0)
 ;
"RTN","LA7VIN2A",96,0)
 ; If source of comment (LA7SOC) is "RQ" then comment is from CHCS which
"RTN","LA7VIN2A",97,0)
 ; uses a composite data type for NTE-3. VistA only extracts component #9
"RTN","LA7VIN2A",98,0)
 ; which contains the external value of the comment.
"RTN","LA7VIN2A",99,0)
 ;
"RTN","LA7VIN2A",100,0)
 N LA7DIE,LA7RMK,LA7WP,X
"RTN","LA7VIN2A",101,0)
 I $G(LA7696)<1 Q
"RTN","LA7VIN2A",102,0)
 F LA7I=1:1:$L(LA7NTE,$E(LA7ECH,2)) D
"RTN","LA7VIN2A",103,0)
 . S LA7RMK=$P(LA7NTE,$E(LA7ECH,2),LA7I)
"RTN","LA7VIN2A",104,0)
 . I LA7SOC="RQ" D
"RTN","LA7VIN2A",105,0)
 . . S X=$P(LA7RMK,$E(LA7ECH),9)
"RTN","LA7VIN2A",106,0)
 . . I X'="" S LA7RMK=X
"RTN","LA7VIN2A",107,0)
 . I LA7RMK="" Q
"RTN","LA7VIN2A",108,0)
 . S LA7RMK=$$UNESC^LA7VHLU3(LA7RMK,LA7FS_LA7ECH)
"RTN","LA7VIN2A",109,0)
 . I LA7RMK["^" S LA7RMK=$TR(LA7RMK,"^","~")
"RTN","LA7VIN2A",110,0)
 . S LA7WP(LA7I,0)=LA7RMK
"RTN","LA7VIN2A",111,0)
 D WP^DIE(69.6,LA7696_",",99,"A","LA7WP","LA7DIE(99)")
"RTN","LA7VIN2A",112,0)
 Q
"RTN","LA7VIN2A",113,0)
 ;
"RTN","LA7VIN2A",114,0)
 ;
"RTN","LA7VIN2A",115,0)
MISPC ; Process special VistA Lab MI preliminary reports/test/remarks comment types
"RTN","LA7VIN2A",116,0)
 ;
"RTN","LA7VIN2A",117,0)
 N LA7I
"RTN","LA7VIN2A",118,0)
 S LA7I=+$E(LA7CMTYP(1),8,99)
"RTN","LA7VIN2A",119,0)
 ;
"RTN","LA7VIN2A",120,0)
 ; Comment on Specimen: VA-LRMI001 node = 99
"RTN","LA7VIN2A",121,0)
 ; Bacterial preliminary/report/tests remark: VA-LRMI010:VA-LRMI013 nodes = 4,19,26,25
"RTN","LA7VIN2A",122,0)
 ; Parasite preliminary/report/tests remark: VA-LRMI020:VA-LRMI023 nodes = 7,21,27,24
"RTN","LA7VIN2A",123,0)
 ; Fungal preliminary/report/tests remark: VA-LRMI030:VA-LRMI033 nodes = 10,22,28,15
"RTN","LA7VIN2A",124,0)
 ; Mycobacteria preliminary/report/tests remark: VA-LRMI040:VA-LRMI042 nodes = 13,23,29
"RTN","LA7VIN2A",125,0)
 ; Viral preliminary/report/tests remark: VA-LRMI050:VA-LRMI052 nodes = 18,20,30
"RTN","LA7VIN2A",126,0)
 ; Sterility Results: VA-LRMI060 node = 31
"RTN","LA7VIN2A",127,0)
 ;
"RTN","LA7VIN2A",128,0)
 S LA7ND=$P("99^^^^^^^^^4^19^26^25^^^^^^^7^21^27^24^^^^^^^10^22^28^15^^^^^^^13^23^29^^^^^^^^18^20^30^^^^^^^^31","^",LA7I)
"RTN","LA7VIN2A",129,0)
 ;
"RTN","LA7VIN2A",130,0)
 Q
"RTN","LA7VIN2A",131,0)
 ;
"RTN","LA7VIN2A",132,0)
 ;
"RTN","LA7VIN2A",133,0)
MICMT ; Store MI comments/remarks
"RTN","LA7VIN2A",134,0)
 ; From above
"RTN","LA7VIN2A",135,0)
 I LACONCPT=13 D  Q
"RTN","LA7VIN2A",136,0)
 . S LA7ND=6,LA7ISQN2=$P($P(LA7RMK(0,0),"^",2),","),LA7ISQN3=$P($P(LA7RMK(0,0),"^",2),",",2)
"RTN","LA7VIN2A",137,0)
 . S LA7ISQN4=$O(^LAH(LWL,1,LA7ISQN,"MI",6,LA7ISQN2,1,LA7ISQN3,1,"A"),-1)+1
"RTN","LA7VIN2A",138,0)
 . S ^LAH(LWL,1,LA7ISQN,"MI",6,LA7ISQN2,1,LA7ISQN3,1,LA7ISQN4,0)=LAPREFIX_LA7RMK
"RTN","LA7VIN2A",139,0)
 ;
"RTN","LA7VIN2A",140,0)
 I LACONCPT=3!(LACONCPT=7)!(LACONCPT=10)!(LACONCPT=4)!(LACONCPT=9) D  Q
"RTN","LA7VIN2A",141,0)
 . S LA7ND=$S(LACONCPT=4:12,LACONCPT=9:9,1:3)
"RTN","LA7VIN2A",142,0)
 . S LA7ISQN2=$P($P(LA7RMK(0,0),"^",2),","),LA7ISQN3=$O(^LAH(LWL,1,LA7ISQN,"MI",LA7ND,LA7ISQN2,1,"A"),-1)+1
"RTN","LA7VIN2A",143,0)
 . S ^LAH(LWL,1,LA7ISQN,"MI",LA7ND,LA7ISQN2,1,LA7ISQN3,0)=LAPREFIX_LA7RMK
"RTN","LA7VIN2A",144,0)
 ;
"RTN","LA7VIN2A",145,0)
 ; Store all other concepts here.
"RTN","LA7VIN2A",146,0)
 I LA7ND="" S LA7ND=$S(LACONCPT<2:4,LACONCPT=12:7,LACONCPT=15:10,LACONCPT=22:13,LACONCPT=79:13,LACONCPT=85:13,LACONCPT=30:18,1:4)
"RTN","LA7VIN2A",147,0)
 S LA7ISQN2=$O(^LAH(LWL,1,LA7ISQN,"MI",LA7ND,"A"),-1)+1
"RTN","LA7VIN2A",148,0)
 S ^LAH(LWL,1,LA7ISQN,"MI",LA7ND,LA7ISQN2,0)=LAPREFIX_LA7RMK
"RTN","LA7VIN2A",149,0)
 ;
"RTN","LA7VIN2A",150,0)
 Q
"RTN","LA7VIN2A",151,0)
 ;
"RTN","LA7VIN2A",152,0)
 ;
"RTN","LA7VIN2A",153,0)
UPD0 ; Update the remarks/comments zeroth node with status
"RTN","LA7VIN2A",154,0)
 ;
"RTN","LA7VIN2A",155,0)
 N LA7STAT,LA7PL,LA7X
"RTN","LA7VIN2A",156,0)
 ;
"RTN","LA7VIN2A",157,0)
 ; Don't update status/performing lab when processing Lab UI interface (1) messages.
"RTN","LA7VIN2A",158,0)
 ;   User releasing report indicates status and performing lab.
"RTN","LA7VIN2A",159,0)
 I LA7INTYP=1 Q
"RTN","LA7VIN2A",160,0)
 ;
"RTN","LA7VIN2A",161,0)
 ; Attempt to identify performing lab from OBX-15 (NTE following OBX) or OBR-32 (NTE following OBR)
"RTN","LA7VIN2A",162,0)
 S LA7PL=$G(LA7PRODID)
"RTN","LA7VIN2A",163,0)
 I LA7PL="",$G(LA7OBR32(7))'="" S LA7PL=$$RESFID^LA7VHLU2(LA7OBR32(7),LA7SFAC,LA7CS)
"RTN","LA7VIN2A",164,0)
 ;
"RTN","LA7VIN2A",165,0)
 S LA7STAT=$S($G(LA7ORS)'="":LA7ORS,1:$G(LA7OBR25))
"RTN","LA7VIN2A",166,0)
 ;
"RTN","LA7VIN2A",167,0)
 I LA7ISQN4 D  Q
"RTN","LA7VIN2A",168,0)
 . I LA7PL'="" S $P(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,LA7ISQN2,1,LA7ISQN3,1,0),"^")=LA7PL
"RTN","LA7VIN2A",169,0)
 . I $P($G(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,LA7ISQN2,1,LA7ISQN3,0)),"^",4)'="" Q
"RTN","LA7VIN2A",170,0)
 . I LA7STAT'="" S $P(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,LA7ISQN2,1,LA7ISQN3,1,0),"^",4)=LA7STAT
"RTN","LA7VIN2A",171,0)
 ;
"RTN","LA7VIN2A",172,0)
 I LA7ISQN3 D  Q
"RTN","LA7VIN2A",173,0)
 . I LA7PL'="" S $P(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,LA7ISQN2,1,0),"^")=LA7PL
"RTN","LA7VIN2A",174,0)
 . I $P($G(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,LA7ISQN2,0)),"^",4)'="" Q
"RTN","LA7VIN2A",175,0)
 . S $P(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,LA7ISQN2,1,0),"^",4)=LA7STAT
"RTN","LA7VIN2A",176,0)
 ;
"RTN","LA7VIN2A",177,0)
 I LA7ISQN2 D  Q
"RTN","LA7VIN2A",178,0)
 . I LA7PL'="" S $P(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,0),"^")=LA7PL
"RTN","LA7VIN2A",179,0)
 . I $P($G(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,0)),"^",4)'="" Q
"RTN","LA7VIN2A",180,0)
 . S $P(^LAH(LWL,1,LA7ISQN,LA7SS,LA7ND,0),"^",4)=LA7STAT
"RTN","LA7VIN2A",181,0)
 Q
"VER")
8.0^22.2
"BLD",10521,6)
^70
**END**
**END**

