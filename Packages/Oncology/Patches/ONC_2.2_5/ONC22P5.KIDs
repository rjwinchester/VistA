KIDS Distribution saved on Aug 17, 2016@09:53:57
ONCOLOGY PATCH ONC*2.2*5
**KIDS**:ONC*2.2*5^

**INSTALL NAME**
ONC*2.2*5
"BLD",9231,0)
ONC*2.2*5^ONCOLOGY^0^3160817^y
"BLD",9231,4,0)
^9.64PA^165.5^1
"BLD",9231,4,165.5,0)
165.5
"BLD",9231,4,165.5,2,0)
^9.641^165.5^1
"BLD",9231,4,165.5,2,165.5,0)
ONCOLOGY PRIMARY  (File-top level)
"BLD",9231,4,165.5,2,165.5,1,0)
^9.6411^284.9^24
"BLD",9231,4,165.5,2,165.5,1,35,0)
SEER SUMMARY STAGE 2000
"BLD",9231,4,165.5,2,165.5,1,51.4,0)
RADIATION @FACILITY
"BLD",9231,4,165.5,2,165.5,1,53.3,0)
CHEMOTHERAPY @FAC
"BLD",9231,4,165.5,2,165.5,1,54.3,0)
HORMONE THERAPY @FAC
"BLD",9231,4,165.5,2,165.5,1,55.3,0)
IMMUNOTHERAPY @FAC
"BLD",9231,4,165.5,2,165.5,1,57.3,0)
OTHER TREATMENT @FAC
"BLD",9231,4,165.5,2,165.5,1,70,0)
DATE OF FIRST RECURRENCE
"BLD",9231,4,165.5,2,165.5,1,90,0)
DATE CASE COMPLETED
"BLD",9231,4,165.5,2,165.5,1,153.2,0)
HEMA TRANS/ENDOCRINE PROC @FAC
"BLD",9231,4,165.5,2,165.5,1,153.3,0)
HEMA TRANS/ENDOCRINE PR@FAC DT
"BLD",9231,4,165.5,2,165.5,1,198,0)
DATE CASE LAST CHANGED
"BLD",9231,4,165.5,2,165.5,1,227,0)
PERFORMANCE STATUS AT DX
"BLD",9231,4,165.5,2,165.5,1,241,0)
TNM CLIN DESCRIPTOR
"BLD",9231,4,165.5,2,165.5,1,242,0)
TNM PATH DESCRIPTOR
"BLD",9231,4,165.5,2,165.5,1,284,0)
UDF1
"BLD",9231,4,165.5,2,165.5,1,284.1,0)
UDF2
"BLD",9231,4,165.5,2,165.5,1,284.2,0)
UDF3
"BLD",9231,4,165.5,2,165.5,1,284.3,0)
UDF4
"BLD",9231,4,165.5,2,165.5,1,284.4,0)
UDF5
"BLD",9231,4,165.5,2,165.5,1,284.5,0)
UDF6
"BLD",9231,4,165.5,2,165.5,1,284.6,0)
UDF7
"BLD",9231,4,165.5,2,165.5,1,284.7,0)
UDF8
"BLD",9231,4,165.5,2,165.5,1,284.8,0)
UDF9
"BLD",9231,4,165.5,2,165.5,1,284.9,0)
UDF10
"BLD",9231,4,165.5,222)
y^y^p^^^^n^^n
"BLD",9231,4,165.5,224)

"BLD",9231,4,"APDD",165.5,165.5)

"BLD",9231,4,"APDD",165.5,165.5,35)

"BLD",9231,4,"APDD",165.5,165.5,51.4)

"BLD",9231,4,"APDD",165.5,165.5,53.3)

"BLD",9231,4,"APDD",165.5,165.5,54.3)

"BLD",9231,4,"APDD",165.5,165.5,55.3)

"BLD",9231,4,"APDD",165.5,165.5,57.3)

"BLD",9231,4,"APDD",165.5,165.5,70)

"BLD",9231,4,"APDD",165.5,165.5,90)

"BLD",9231,4,"APDD",165.5,165.5,153.2)

"BLD",9231,4,"APDD",165.5,165.5,153.3)

"BLD",9231,4,"APDD",165.5,165.5,198)

"BLD",9231,4,"APDD",165.5,165.5,227)

"BLD",9231,4,"APDD",165.5,165.5,241)

"BLD",9231,4,"APDD",165.5,165.5,242)

"BLD",9231,4,"APDD",165.5,165.5,284)

"BLD",9231,4,"APDD",165.5,165.5,284.1)

"BLD",9231,4,"APDD",165.5,165.5,284.2)

"BLD",9231,4,"APDD",165.5,165.5,284.3)

"BLD",9231,4,"APDD",165.5,165.5,284.4)

"BLD",9231,4,"APDD",165.5,165.5,284.5)

"BLD",9231,4,"APDD",165.5,165.5,284.6)

"BLD",9231,4,"APDD",165.5,165.5,284.7)

"BLD",9231,4,"APDD",165.5,165.5,284.8)

"BLD",9231,4,"APDD",165.5,165.5,284.9)

"BLD",9231,4,"B",165.5,165.5)

"BLD",9231,6.3)
6
"BLD",9231,"INIT")
ONC2PS05
"BLD",9231,"KRN",0)
^9.67PA^779.2^20
"BLD",9231,"KRN",.4,0)
.4
"BLD",9231,"KRN",.4,"NM",0)
^9.68A^1^1
"BLD",9231,"KRN",.4,"NM",1,0)
ONCOY55    FILE #165.5^165.5^0
"BLD",9231,"KRN",.4,"NM","B","ONCOY55    FILE #165.5",1)

"BLD",9231,"KRN",.401,0)
.401
"BLD",9231,"KRN",.402,0)
.402
"BLD",9231,"KRN",.402,"NM",0)
^9.68A^1^1
"BLD",9231,"KRN",.402,"NM",1,0)
ONCO ABSTRACT-I    FILE #165.5^165.5^0
"BLD",9231,"KRN",.402,"NM","B","ONCO ABSTRACT-I    FILE #165.5",1)

"BLD",9231,"KRN",.403,0)
.403
"BLD",9231,"KRN",.5,0)
.5
"BLD",9231,"KRN",.84,0)
.84
"BLD",9231,"KRN",3.6,0)
3.6
"BLD",9231,"KRN",3.8,0)
3.8
"BLD",9231,"KRN",9.2,0)
9.2
"BLD",9231,"KRN",9.8,0)
9.8
"BLD",9231,"KRN",9.8,"NM",0)
^9.68A^38^34
"BLD",9231,"KRN",9.8,"NM",1,0)
ONCACDU2^^0^B119516553
"BLD",9231,"KRN",9.8,"NM",2,0)
ONCODSR^^0^B90897333
"BLD",9231,"KRN",9.8,"NM",4,0)
ONCOCOS^^0^B10736400
"BLD",9231,"KRN",9.8,"NM",5,0)
ONCODIS^^0^B774104
"BLD",9231,"KRN",9.8,"NM",6,0)
ONCCS2^^0^B114251425
"BLD",9231,"KRN",9.8,"NM",7,0)
ONCCS3^^0^B129668253
"BLD",9231,"KRN",9.8,"NM",8,0)
ONCOAIP^^0^B111415051
"BLD",9231,"KRN",9.8,"NM",9,0)
ONC2PS05^^0^B15386240
"BLD",9231,"KRN",9.8,"NM",10,0)
ONCOEDC1^^0^B41015408
"BLD",9231,"KRN",9.8,"NM",13,0)
ONCOEDC^^0^B30501240
"BLD",9231,"KRN",9.8,"NM",14,0)
ONCACD0^^0^B184758090
"BLD",9231,"KRN",9.8,"NM",15,0)
ONCACD1^^0^B71259107
"BLD",9231,"KRN",9.8,"NM",16,0)
ONCOTN^^0^B122391694
"BLD",9231,"KRN",9.8,"NM",17,0)
ONCX10^^0^B13514830
"BLD",9231,"KRN",9.8,"NM",18,0)
ONCXURL^^0^B3753041
"BLD",9231,"KRN",9.8,"NM",19,0)
ONCOCFP^^0^B60703734
"BLD",9231,"KRN",9.8,"NM",20,0)
ONCACDU1^^0^B47366223
"BLD",9231,"KRN",9.8,"NM",22,0)
ONCCS4^^0^B112818523
"BLD",9231,"KRN",9.8,"NM",23,0)
ONCDTX1^^0^B19374560
"BLD",9231,"KRN",9.8,"NM",24,0)
ONCOAIP2^^0^B24643610
"BLD",9231,"KRN",9.8,"NM",25,0)
ONCOCC^^0^B50012224
"BLD",9231,"KRN",9.8,"NM",26,0)
ONCOPA1^^0^B58176942
"BLD",9231,"KRN",9.8,"NM",27,0)
ONCOPA2^^0^B46065983
"BLD",9231,"KRN",9.8,"NM",28,0)
ONCPTX^^0^B86311833
"BLD",9231,"KRN",9.8,"NM",29,0)
ONCUTX1^^0^B36437776
"BLD",9231,"KRN",9.8,"NM",30,0)
ONCATF1^^0^B52321975
"BLD",9231,"KRN",9.8,"NM",31,0)
ONCNTX1^^0^B62064130
"BLD",9231,"KRN",9.8,"NM",32,0)
ONCCS^^0^B58774411
"BLD",9231,"KRN",9.8,"NM",33,0)
ONCTIME^^0^B15284666
"BLD",9231,"KRN",9.8,"NM",34,0)
ONCPAT1^^0^B8598027
"BLD",9231,"KRN",9.8,"NM",35,0)
ONCODSP^^0^B55463101
"BLD",9231,"KRN",9.8,"NM",36,0)
ONCOCRF^^0^B18529127
"BLD",9231,"KRN",9.8,"NM",37,0)
ONCOAIF^^0^B52773252
"BLD",9231,"KRN",9.8,"NM",38,0)
ONCDTX^^0^B80330484
"BLD",9231,"KRN",9.8,"NM","B","ONC2PS05",9)

"BLD",9231,"KRN",9.8,"NM","B","ONCACD0",14)

"BLD",9231,"KRN",9.8,"NM","B","ONCACD1",15)

"BLD",9231,"KRN",9.8,"NM","B","ONCACDU1",20)

"BLD",9231,"KRN",9.8,"NM","B","ONCACDU2",1)

"BLD",9231,"KRN",9.8,"NM","B","ONCATF1",30)

"BLD",9231,"KRN",9.8,"NM","B","ONCCS",32)

"BLD",9231,"KRN",9.8,"NM","B","ONCCS2",6)

"BLD",9231,"KRN",9.8,"NM","B","ONCCS3",7)

"BLD",9231,"KRN",9.8,"NM","B","ONCCS4",22)

"BLD",9231,"KRN",9.8,"NM","B","ONCDTX",38)

"BLD",9231,"KRN",9.8,"NM","B","ONCDTX1",23)

"BLD",9231,"KRN",9.8,"NM","B","ONCNTX1",31)

"BLD",9231,"KRN",9.8,"NM","B","ONCOAIF",37)

"BLD",9231,"KRN",9.8,"NM","B","ONCOAIP",8)

"BLD",9231,"KRN",9.8,"NM","B","ONCOAIP2",24)

"BLD",9231,"KRN",9.8,"NM","B","ONCOCC",25)

"BLD",9231,"KRN",9.8,"NM","B","ONCOCFP",19)

"BLD",9231,"KRN",9.8,"NM","B","ONCOCOS",4)

"BLD",9231,"KRN",9.8,"NM","B","ONCOCRF",36)

"BLD",9231,"KRN",9.8,"NM","B","ONCODIS",5)

"BLD",9231,"KRN",9.8,"NM","B","ONCODSP",35)

"BLD",9231,"KRN",9.8,"NM","B","ONCODSR",2)

"BLD",9231,"KRN",9.8,"NM","B","ONCOEDC",13)

"BLD",9231,"KRN",9.8,"NM","B","ONCOEDC1",10)

"BLD",9231,"KRN",9.8,"NM","B","ONCOPA1",26)

"BLD",9231,"KRN",9.8,"NM","B","ONCOPA2",27)

"BLD",9231,"KRN",9.8,"NM","B","ONCOTN",16)

"BLD",9231,"KRN",9.8,"NM","B","ONCPAT1",34)

"BLD",9231,"KRN",9.8,"NM","B","ONCPTX",28)

"BLD",9231,"KRN",9.8,"NM","B","ONCTIME",33)

"BLD",9231,"KRN",9.8,"NM","B","ONCUTX1",29)

"BLD",9231,"KRN",9.8,"NM","B","ONCX10",17)

"BLD",9231,"KRN",9.8,"NM","B","ONCXURL",18)

"BLD",9231,"KRN",19,0)
19
"BLD",9231,"KRN",19,"NM",0)
^9.68A^^0
"BLD",9231,"KRN",19.1,0)
19.1
"BLD",9231,"KRN",101,0)
101
"BLD",9231,"KRN",409.61,0)
409.61
"BLD",9231,"KRN",771,0)
771
"BLD",9231,"KRN",779.2,0)
779.2
"BLD",9231,"KRN",870,0)
870
"BLD",9231,"KRN",8989.51,0)
8989.51
"BLD",9231,"KRN",8989.52,0)
8989.52
"BLD",9231,"KRN",8994,0)
8994
"BLD",9231,"KRN","B",.4,.4)

"BLD",9231,"KRN","B",.401,.401)

"BLD",9231,"KRN","B",.402,.402)

"BLD",9231,"KRN","B",.403,.403)

"BLD",9231,"KRN","B",.5,.5)

"BLD",9231,"KRN","B",.84,.84)

"BLD",9231,"KRN","B",3.6,3.6)

"BLD",9231,"KRN","B",3.8,3.8)

"BLD",9231,"KRN","B",9.2,9.2)

"BLD",9231,"KRN","B",9.8,9.8)

"BLD",9231,"KRN","B",19,19)

"BLD",9231,"KRN","B",19.1,19.1)

"BLD",9231,"KRN","B",101,101)

"BLD",9231,"KRN","B",409.61,409.61)

"BLD",9231,"KRN","B",771,771)

"BLD",9231,"KRN","B",779.2,779.2)

"BLD",9231,"KRN","B",870,870)

"BLD",9231,"KRN","B",8989.51,8989.51)

"BLD",9231,"KRN","B",8989.52,8989.52)

"BLD",9231,"KRN","B",8994,8994)

"BLD",9231,"QUES",0)
^9.62^^
"BLD",9231,"REQB",0)
^9.611^1^1
"BLD",9231,"REQB",1,0)
ONC*2.2*7^2
"BLD",9231,"REQB","B","ONC*2.2*7",1)

"FIA",165.5)
ONCOLOGY PRIMARY
"FIA",165.5,0)
^ONCO(165.5,
"FIA",165.5,0,0)
165.5IsP
"FIA",165.5,0,1)
y^y^p^^^^n^^n
"FIA",165.5,0,10)

"FIA",165.5,0,11)

"FIA",165.5,0,"RLRO")

"FIA",165.5,0,"VR")
2.2^ONC
"FIA",165.5,165.5)
1
"FIA",165.5,165.5,35)

"FIA",165.5,165.5,51.4)

"FIA",165.5,165.5,53.3)

"FIA",165.5,165.5,54.3)

"FIA",165.5,165.5,55.3)

"FIA",165.5,165.5,57.3)

"FIA",165.5,165.5,70)

"FIA",165.5,165.5,90)

"FIA",165.5,165.5,153.2)

"FIA",165.5,165.5,153.3)

"FIA",165.5,165.5,198)

"FIA",165.5,165.5,227)

"FIA",165.5,165.5,241)

"FIA",165.5,165.5,242)

"FIA",165.5,165.5,284)

"FIA",165.5,165.5,284.1)

"FIA",165.5,165.5,284.2)

"FIA",165.5,165.5,284.3)

"FIA",165.5,165.5,284.4)

"FIA",165.5,165.5,284.5)

"FIA",165.5,165.5,284.6)

"FIA",165.5,165.5,284.7)

"FIA",165.5,165.5,284.8)

"FIA",165.5,165.5,284.9)

"INIT")
ONC2PS05
"KRN",.4,1074,-1)
0^1
"KRN",.4,1074,0)
ONCOY55^3160209.1144^^165.5^^@^3160211
"KRN",.4,1074,"DXS",1,82)
Not administered/contraindicated
"KRN",.4,1074,"DXS",1,85)
Pt died prior to tx
"KRN",.4,1074,"DXS",1,86)
Recommended, not admin, no reason 
"KRN",.4,1074,"DXS",1,87)
Refusal
"KRN",.4,1074,"DXS",1,88)
Recommended, unknown if admin
"KRN",.4,1074,"DXS",1,99)
Unknown
"KRN",.4,1074,"DXS",1,"00")
None
"KRN",.4,1074,"DXS",1,"01")
Chemotherapy, NOS
"KRN",.4,1074,"DXS",1,"02")
Single-agent
"KRN",.4,1074,"DXS",1,"03")
Multiagent
"KRN",.4,1074,"DXS",2,82)
Not administered/contraindicated
"KRN",.4,1074,"DXS",2,85)
Pt died prior to tx
"KRN",.4,1074,"DXS",2,86)
Recommended, not admin, no reason 
"KRN",.4,1074,"DXS",2,87)
Refusal
"KRN",.4,1074,"DXS",2,88)
Recommended, unknown if admin
"KRN",.4,1074,"DXS",2,99)
Unknown
"KRN",.4,1074,"DXS",2,"00")
None
"KRN",.4,1074,"DXS",2,"01")
Chemotherapy, NOS
"KRN",.4,1074,"DXS",2,"02")
Single-agent
"KRN",.4,1074,"DXS",2,"03")
Multiagent
"KRN",.4,1074,"DXS",3,82)
Not administered/contraindicated
"KRN",.4,1074,"DXS",3,85)
Pt died prior to tx
"KRN",.4,1074,"DXS",3,86)
Recommended, not admin, no reason 
"KRN",.4,1074,"DXS",3,87)
Refusal
"KRN",.4,1074,"DXS",3,88)
Recommended, unknown if admin
"KRN",.4,1074,"DXS",3,99)
Unknown
"KRN",.4,1074,"DXS",3,"00")
None
"KRN",.4,1074,"DXS",3,"01")
Hormone therapy
"KRN",.4,1074,"DXS",4,82)
Not administered/contraindicated
"KRN",.4,1074,"DXS",4,85)
Pt died prior to tx
"KRN",.4,1074,"DXS",4,86)
Recommended, not admin, no reason 
"KRN",.4,1074,"DXS",4,87)
Refusal
"KRN",.4,1074,"DXS",4,88)
Recommended, unknown if admin
"KRN",.4,1074,"DXS",4,99)
Unknown
"KRN",.4,1074,"DXS",4,"00")
None
"KRN",.4,1074,"DXS",4,"01")
Hormone therapy
"KRN",.4,1074,"DXS",5,82)
Not administered/contraindicated
"KRN",.4,1074,"DXS",5,85)
Pt died prior to tx
"KRN",.4,1074,"DXS",5,86)
Recommended, not admin, no reason 
"KRN",.4,1074,"DXS",5,87)
Refusal
"KRN",.4,1074,"DXS",5,88)
Recommended, unknown if admin
"KRN",.4,1074,"DXS",5,99)
Unknown
"KRN",.4,1074,"DXS",5,"00")
None
"KRN",.4,1074,"DXS",5,"01")
Immunotherapy
"KRN",.4,1074,"DXS",6,82)
Not administered/contraindicated
"KRN",.4,1074,"DXS",6,85)
Pt died prior to tx
"KRN",.4,1074,"DXS",6,86)
Recommended, not admin, no reason 
"KRN",.4,1074,"DXS",6,87)
Refusal
"KRN",.4,1074,"DXS",6,88)
Recommended, unknown if admin
"KRN",.4,1074,"DXS",6,99)
Unknown
"KRN",.4,1074,"DXS",6,"00")
None
"KRN",.4,1074,"DXS",6,"01")
Immunotherapy
"KRN",.4,1074,"DXS",7,0)
None
"KRN",.4,1074,"DXS",7,1)
Other
"KRN",.4,1074,"DXS",7,2)
Other - Experimental
"KRN",.4,1074,"DXS",7,3)
Other - Double Blind
"KRN",.4,1074,"DXS",7,6)
Other - Unproven
"KRN",.4,1074,"DXS",7,7)
Refusal
"KRN",.4,1074,"DXS",7,8)
Recommended, unknown if administer
"KRN",.4,1074,"DXS",7,9)
Unknown
"KRN",.4,1074,"DXS",8,0)
None
"KRN",.4,1074,"DXS",8,1)
Other
"KRN",.4,1074,"DXS",8,2)
Other - Experimental
"KRN",.4,1074,"DXS",8,3)
Other - Double Blind
"KRN",.4,1074,"DXS",8,6)
Other - Unproven
"KRN",.4,1074,"DXS",8,7)
Refusal
"KRN",.4,1074,"DXS",8,8)
Recommended, unknown if administer
"KRN",.4,1074,"DXS",8,9)
Unknown
"KRN",.4,1074,"DXS",9,0)
Not available
"KRN",.4,1074,"DXS",9,1)
On protocol
"KRN",.4,1074,"DXS",9,2)
Ineligible (age,stage,etc.)
"KRN",.4,1074,"DXS",9,3)
Ineligible (comorbidity, preexist cond)
"KRN",.4,1074,"DXS",9,4)
Entered but withdrawn
"KRN",.4,1074,"DXS",9,6)
Eligible, not entered
"KRN",.4,1074,"DXS",9,7)
Eligible, refused
"KRN",.4,1074,"DXS",9,8)
Not recommended
"KRN",.4,1074,"DXS",9,9)
Unknown
"KRN",.4,1074,"DXS",10,10)
ACS
"KRN",.4,1074,"DXS",10,11)
National protocol, NOS
"KRN",.4,1074,"DXS",10,12)
Local protocol, NOS
"KRN",.4,1074,"DXS",10,99)
Unknown
"KRN",.4,1074,"DXS",10,"00")
Not on/NA
"KRN",.4,1074,"DXS",10,"01")
NSABP
"KRN",.4,1074,"DXS",10,"02")
GOG
"KRN",.4,1074,"DXS",10,"03")
RTOG
"KRN",.4,1074,"DXS",10,"04")
SWOG
"KRN",.4,1074,"DXS",10,"05")
ECOG
"KRN",.4,1074,"DXS",10,"06")
POG
"KRN",.4,1074,"DXS",10,"07")
CCG
"KRN",.4,1074,"DXS",10,"08")
CALGB
"KRN",.4,1074,"DXS",10,"09")
NCI
"KRN",.4,1074,"F",1)
"Chemotherapy..................:";C3;S1~53;C35~53.2;C46;L34~"Chemotherapy @Fac.............:";C3~53.4;C35~53.3;C46;L34~
"KRN",.4,1074,"F",2)
"Hormone Therapy...............:";S1;C3~54;C35~54.2;C46;L34~"Hormone Therapy @Fac..........:";C3~54.4;C35~54.3;C46;L34~
"KRN",.4,1074,"F",3)
"Immunotherapy.................:";S1;C3~55;C35~55.2;C46;L34~"Immunotherapy @Fac............:";C3~55.4;C35~55.3;C46;L34~
"KRN",.4,1074,"F",4)
"Hema Trans/Endocrine Proc.....:";S1;C3~153.1;C35~153;C46;L34~"Hema Trans/Endocrine Proc@Fac.:";C3~153.3;C35~153.2;C46;L34~
"KRN",.4,1074,"F",5)
"Other Treatment...............:";S1;C3~57;C35~57.2;C46;L34~"Other Treatment @Fac..........:";C3~57.4;C35~57.3;C46;L34~
"KRN",.4,1074,"F",6)
"Protocol Eligibility Status...:";C3;S1~346;C35~"Year Put on Protocol..........:";C3~133;C35~"Protocol Participation........:";C3~560;C35~
"KRN",.4,1074,"F",7)
"Text-Remarks:";C3;S1~113,.01;C3~
"KRN",.4,1074,"H")
@
"KRN",.4,1074,"IOM")
80
"KRN",.4,1074,"LAST")

"KRN",.4,1074,"ROU")
^ONCOY55
"KRN",.4,1074,"ROUOLD")
ONCOY55
"KRN",.4,1074,"SUB")
1
"KRN",.402,1256,-1)
0^1
"KRN",.402,1256,0)
ONCO ABSTRACT-I^3160504.1437^^165.5^^^3160816
"KRN",.402,1256,"%D",0)
^.4021^2^2^3140508^^^^
"KRN",.402,1256,"%D",1,0)
Template for complete abstract for fields in Primary file: data relevant
"KRN",.402,1256,"%D",2,0)
to particular cancer only as opposed to specific to Patient.
"KRN",.402,1256,"DR",1,165.5)
@0;D MEN^ONCOAIP;.01;.05;.06;.07;S Y="@0";@1;D PAT^ONCOAIP;.03//^S X=$P($G(^ONCO(160.19,IIN,0)),U,2);S FACPNT=$P($G(^ONCO(165.5,DA,0)),U,3) D FNPI^ONCNPI;11;8;8.2;9;8.1;16;10;147//^S X="000000";
"KRN",.402,1256,"DR",1,165.5,1)
I $P($G(^ONCO(165.5,DA,0)),U,16)'="",$P($G(^ONCO(165.5,DA,0)),U,16)<3070000 S Y=2.1;2.2;S PHYPNT=$P($G(^ONCO(165.5,DA,0)),U,13) D PNPI^ONCNPI;2.1;S PHYPNT=$P($G(^ONCO(165.5,DA,0)),U,12) D PNPI^ONCNPI;2;
"KRN",.402,1256,"DR",1,165.5,2)
S PHYPNT=$P($G(^ONCO(165.5,DA,0)),U,11) D PNPI^ONCNPI;2.3;S PHYPNT=$P($G(^ONCO(165.5,DA,0)),U,14) D PNPI^ONCNPI;2.4;S PHYPNT=$P($G(^ONCO(165.5,DA,0)),U,15) D PNPI^ONCNPI;18;1.2;W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";
"KRN",.402,1256,"DR",1,165.5,3)
D PHCDSP^ONCPHC;148//^S X=PHCDEF;I X=1 S Y="@11";148.1////@;148.2////@;148.3////@;148.4////@;S Y="@12";@11;W !;148.1//^S X=PHCDEF(1);148.2//^S X=PHCDEF(2);148.3//^S X=PHCDEF(3);148.4//^S X=PHCDEF(4);@12;
"KRN",.402,1256,"DR",1,165.5,4)
W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";S Y=$S(ONCOANS="A":"@2",1:"@0");@2;D CAN^ONCOAIP;.04;S COC=$E($$GET1^DIQ(165.5,DA,.04,"E"),1,2);
"KRN",.402,1256,"DR",1,165.5,5)
I (+COC<10)!(+COC>14) S $P(^ONCO(165.5,DA,2.2),U,4)="",$P(^ONCO(165.5,DA,2.2),U,5)="",$P(^ONCO(165.5,DA,2.2),U,6)="",Y="@20";171;172;173;@20;I COC="00" S RFDEF="NONE" S Y=6;
"KRN",.402,1256,"DR",1,165.5,6)
I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14) S RFDEF="NONE",TFDEF="NONE";6//^S X=$G(RFDEF);K RFDEF;S FACPNT=$P($G(^ONCO(165.5,DA,0)),U,18) D FNPI^ONCNPI;I (COC=20)!(COC=21)!(COC=22) S TFDEF="NONE";7//^S X=$G(TFDEF);K TFDEF;
"KRN",.402,1256,"DR",1,165.5,7)
S FACPNT=$P($G(^ONCO(165.5,DA,0)),U,19) D FNPI^ONCNPI;237;S FEEB=$$GET1^DIQ(165.5,DA,237,"I");I FEEB'=1 S Y="@155";237.1;@155;155;3;I $P($G(^ONCO(165.5,DA,0)),U,16)<3100000 S Y="@14";233;@14;
"KRN",.402,1256,"DR",1,165.5,8)
I $P($G(^ONCO(165.5,DA,0)),U,16)<3070000!($P($G(^ONCO(165.5,DA,0)),U,16)>3121231) S Y="@15";159;I X=0 S $P(^ONCO(165.5,DA,24),U,13)="8888888" W !,"DATE OF CONCLUSIVE DX: 88/88/8888" S Y="@15";
"KRN",.402,1256,"DR",1,165.5,9)
I X=1 S $P(^ONCO(165.5,DA,24),U,13)="0000000" W !,"DATE OF CONCLUSIVE DX: 00/00/0000" S Y="@15";I X=9 S $P(^ONCO(165.5,DA,24),U,13)="9999999" W !,"DATE OF CONCLUSIVE DX: 99/99/9999" S Y="@15";193;@15;
"KRN",.402,1256,"DR",1,165.5,10)
I (COC="00")!(COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14) S DFDEF=$E(RH,1,30);5//^S X=$G(DFDEF);K DFDEF;238;20;S PS=X;D PAIR^ONCOAIP;S Y=$$TOP^ONCOAIT;21.5;S Y=100;21.51;S Y=100;21.52;100;28;
"KRN",.402,1256,"DR",1,165.5,11)
I $P($G(^ONCO(165.5,DA,0)),U,16)>3001231 S Y=22.3;22;D DEFH3^ONCOHICD;22.3//^S X=$G(H3DEF);K H3DEF;W !,"HISTOLOGY CODE: ",$$GET1^DIQ(165.5,D0,22.1);D HISTXT^ONCOAIP;S X=X;101;D ^ONCSUBS;240;@623;I $G(TOP)'=67619 S Y=24;
"KRN",.402,1256,"DR",1,165.5,12)
I $G(TOP)=67619,$P($G(^ONCO(165.5,D0,0)),U,16)>3101231 S $P(^ONCO(165.5,D0,"CS"),U,8)=988;623;250;684;96;102;I X=9 S Y="@156";156;S Y=24;@156;156////0000000;W !,"DRE DATE: 00/00/0000";28;24;
"KRN",.402,1256,"DR",1,165.5,13)
I $P($G(^ONCO(165.5,DA,0)),U,16)<3100000 S Y="@157";24.1;24.2;S:($E($$HIST^ONCFUNC(D0),1,4)'=8935)&($E($$HIST^ONCFUNC(D0),1,4)'=8936) Y="@157";239;@157;
"KRN",.402,1256,"DR",1,165.5,14)
I $P($G(^ONCO(165.5,DA,0)),U,16)<3070000!($P($G(^ONCO(165.5,DA,0)),U,16)>3121231) S Y=83;I ($P($G(^ONCO(165.5,D0,2)),U,1)=67809)!($$LEUKEMIA^ONCOAIP2(D0))!($$LYMPHOMA^ONCFUNC(D0)) D NA^ONCMPH;194;D MTRAOP^ONCMPH;195;196;83;26;
"KRN",.402,1256,"DR",1,165.5,15)
I ($$GET1^DIQ(165.5,D0,.01,"E")'="LIVER")&($G(TOP)'=67220) S Y="@251";1010;@251;I $P($G(^ONCO(165.5,DA,0)),U,16)>3021231 S Y="@27";D TMARKER^ONCOU55 I TM1=0 S Y="@21";D TM^ONCOTM(D0,1);@2510;I $G(TM2)=0 S Y="@22";D TM^ONCOTM(D0,2);
"KRN",.402,1256,"DR",1,165.5,16)
@2520;I $G(TM3)=0 S Y="@23";D TM^ONCOTM(D0,3);@2530;S Y="@27";@21;25.1///9;W !,"TUMOR MARKER 1: Unknown or no information";@22;25.2///9;W !,"TUMOR MARKER 2: Unknown or no information";@23;25.3///9;
"KRN",.402,1256,"DR",1,165.5,17)
W !,"TUMOR MARKER 3: Unknown or no information";S Y="@27";25.1;25.2;25.3;@27;120;I X=0 S Y="@1210";I X=9 S Y="@1219";121;S Y="@28";@1210;121////0000000;W !,"DATE OF CANCER CONF: 00/00/0000";S Y="@28";@1219;121////9999999;
"KRN",.402,1256,"DR",1,165.5,18)
W !,"DATE OF CANCER CONF: 99/99/9999";@28;21;W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";I (+COC<10)!(+COC>14) S Y="@105";S PS=$P($G(^ONCO(165.5,D0,2)),U,1);I $E($G(PS),3,4)=34 S Y="@174";
"KRN",.402,1256,"DR",1,165.5,19)
I ($E($G(PS),3,4)=18)!($G(PS)=67199)!($G(PS)=67209) S Y="@180";S Y="@105";@174;D ^ONCSYMP;174;I (X=0)!(X=9) S PIECE=18 D STUFF^ONCSYMP S Y=186;174.1;186;I (X=0)!(X=9) S PIECE=33 D STUFF^ONCSYMP S Y=187;186.1;187;
"KRN",.402,1256,"DR",1,165.5,20)
I (X=0)!(X=9) S PIECE=35 D STUFF^ONCSYMP S Y=188;187.1;188;I (X=0)!(X=9) S PIECE=37 D STUFF^ONCSYMP S Y=189;188.1;189;I (X=0)!(X=9) S PIECE=39 D STUFF^ONCSYMP S Y=190;189.1;190;175;I (X=0)!(X=9) S PIECE=19 D STUFF^ONCSYMP S Y=176;
"KRN",.402,1256,"DR",1,165.5,21)
175.1;176;I (X=0)!(X=9) S PIECE=20 D STUFF^ONCSYMP S Y=177;176.1;177;I (X=0)!(X=9) S PIECE=21 D STUFF^ONCSYMP S Y=178;177.1;178;I (X=0)!(X=9) S PIECE=22 D STUFF^ONCSYMP S Y=179;178.1;179;
"KRN",.402,1256,"DR",1,165.5,22)
I (X=0)!(X=9) S PIECE=23 D STUFF^ONCSYMP S Y="@105";179.1;S Y="@105";@180;D COLON^ONCSYMP;191;711;712;809;713;192;180;I (X=0)!(X=9) S PIECE=24 D STUFF^ONCSYMP S Y=181;180.1;181;I (X=0)!(X=9) S PIECE=25 D STUFF^ONCSYMP S Y=182;
"KRN",.402,1256,"DR",1,165.5,23)
181.1;182;I (X=0)!(X=9) S PIECE=27 D STUFF^ONCSYMP S Y=183;182.1;183;I (X=0)!(X=9) S PIECE=28 D STUFF^ONCSYMP S Y=185;183.1;185;I (X=0)!(X=9) S PIECE=30 D STUFF^ONCSYMP S Y=184;185.1;184;
"KRN",.402,1256,"DR",1,165.5,24)
I (X=0)!(X=9) S PIECE=31 D STUFF^ONCSYMP S Y=179;184.1;179;I (X=0)!(X=9) S PIECE=23 D STUFF^ONCSYMP S Y="@105";179.1;@105;S SECTION="Cancer Identification" D SECTION^ONCOAIP;W !;104;S FLDNUM=104,NODE=10,LIMIT=1000 D ^ONCTEXT;W !;
"KRN",.402,1256,"DR",1,165.5,25)
105;S FLDNUM=105,NODE=11,LIMIT=1000 D ^ONCTEXT;W !;106;S FLDNUM=106,NODE=12,LIMIT=1000 D ^ONCTEXT;W !;116;S FLDNUM=116,NODE=22,LIMIT=1000 D ^ONCTEXT;W !;103;S FLDNUM=103,NODE=9,LIMIT=1000 D ^ONCTEXT;W !;107;
"KRN",.402,1256,"DR",1,165.5,26)
S FLDNUM=107,NODE=13,LIMIT=1000 D ^ONCTEXT;W !;S Y=$S(ONCOANS="A":"@3",1:"@0");@3;D EXT^ONCOAIP;@31;D MO^ONCOAIP2;41;I $G(AWHFLG)=0 S Y=30 K AWHFLG;227;I $G(ONCSKP39)=1 S Y=39 K ONCSKP39;29;
"KRN",.402,1256,"DR",1,165.5,27)
I $P($G(^ONCO(165.5,DA,0)),U,16)<3040000 S Y=30;29.2;30;I $P($G(^ONCO(165.5,DA,0)),U,16)<3040000 S Y="@305";30.2;29.1;@305;D PGPE^ONCOAIP2;30.1;
"KRN",.402,1256,"DR",1,165.5,28)
I X=99,$P($G(^ONCO(165.5,D0,0)),U,16)>3031231 S $P(^ONCO(165.5,D0,"CS"),U,7)=970 F SSF=3,4,5 S $P(^ONCO(165.5,D0,"CS2"),U,SSF)=998;@231;D LN^ONCOAIP2;31;S L=X;I $$LYMPHOMA^ONCFUNC(D0) S $P(^ONCO(165.5,D0,2),U,12,13)="99^99";S X=X;
"KRN",.402,1256,"DR",1,165.5,29)
I $P($G(^ONCO(165.5,DA,0)),U,16)<3040000 S Y=33;31.1;32.1;33;I X=0 S Y="@24";I X=99 S Y="@25";32;S Y="@26";@24;32////98;W !,"REGIONAL LYMPH NODES POSITIVE: No nodes were examined";S Y="@26";@25;32////99;
"KRN",.402,1256,"DR",1,165.5,30)
W !,"REGIONAL LYMPH NODES POSITIVE: Unknown if nodes +, NA, not stated";@26;35;I (X'="")&(X'=7) S Y="@310";34;S:X=0 Y="@32";34.1;S:X=0 Y="@33";34.2;S Y="@34";@310;34////0;W !,"SITE OF DISTANT METASTASIS #1: None";@32;34.1////0;
"KRN",.402,1256,"DR",1,165.5,31)
W !,"SITE OF DISTANT METASTASIS #2: None";@33;34.2////0;W !,"SITE OF DISTANT METASTASIS #3: None";@34;I $P($G(^ONCO(165.5,DA,0)),U,16)<3040000 S Y="@341";34.3;
"KRN",.402,1256,"DR",1,165.5,32)
I X="00" S $P(^ONCO(165.5,DA,"CS1"),U,20)=0 W !,"METS AT DX-BONE:  None";I X=98 S $P(^ONCO(165.5,DA,"CS1"),U,20)=8 W !,"METS AT DX-BONE:  NA";I X="00" S $P(^ONCO(165.5,DA,"CS1"),U,21)=0 W !,"METS AT DX-BRAIN: None";
"KRN",.402,1256,"DR",1,165.5,33)
I X=98 S $P(^ONCO(165.5,DA,"CS1"),U,21)=8 W !,"METS AT DX-BRAIN: NA";I X="00" S $P(^ONCO(165.5,DA,"CS1"),U,22)=0 W !,"METS AT DX-LIVER: None";I X=98 S $P(^ONCO(165.5,DA,"CS1"),U,22)=8 W !,"METS AT DX-LIVER: NA";
"KRN",.402,1256,"DR",1,165.5,34)
I X="00" S $P(^ONCO(165.5,DA,"CS1"),U,23)=0 W !,"METS AT DX-LUNG:  None" S Y=34.4;I X=98 S $P(^ONCO(165.5,DA,"CS1"),U,23)=8 W !,"METS AT DX-LUNG:  NA" S Y=34.4;34.31;34.32;34.33;34.34;34.4;@341;D ^ONCOTN;@69;
"KRN",.402,1256,"DR",1,165.5,35)
I $P($G(^ONCO(165.5,DA,0)),U,16)>3069999 S Y="@300";69;@300;D BLOOD^ONCOAIP2;30.5;@301;W !;S:$E($$HIST^ONCFUNC(D0),1,3)'=951 Y=37.1;69.1;37.1;D CN2^ONCOTN;37.2;37.3;I '$$GTT^ONCOU55(D0) S Y="@38";134;@38;
"KRN",.402,1256,"DR",1,165.5,36)
I '$$T^ONCOU55(D0) S Y="@39";136;@39;38;241;19;280;280.1;280.2;W !;69.4;85;D CN4^ONCOTN;86;87;I '$$GTT^ONCOU55(D0) S Y="@311";135;@311;I '$$T^ONCOU55(D0) S Y="@312";136;@312;88;242;89;W !;149;S Y="@313";@376;D CTNM88^ONCOTN;38;241;
"KRN",.402,1256,"DR",1,165.5,37)
19;W !;D PTNM88^ONCOTN;88;242;89;W !;@313;39;W !;65;S:X="" Y="@82";66;@82;248;249;W !;25;S X=X;44;W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";I $P($G(^ONCO(165.5,DA,0)),U,16)<3040000 S Y="@399";@292;D ^ONCCS2;D ^ONCPCS;29.2;30.2;29.1;
"KRN",.402,1256,"DR",1,165.5,38)
31.1;32.1;33;I X=0 S Y="@241";I X=99 S Y="@252";32;S Y="@261";@241;32////98;W !,"REGIONAL LYMPH NODES POSITIVE: No nodes were examined";S Y="@261";@252;32////99;
"KRN",.402,1256,"DR",1,165.5,39)
W !,"REGIONAL LYMPH NODES POSITIVE: Unknown if nodes +, NA, not stated";@261;34.3;I X="00" S $P(^ONCO(165.5,DA,"CS1"),U,20)=0 W !,"METS AT DX-BONE:  None";I X=98 S $P(^ONCO(165.5,DA,"CS1"),U,20)=8 W !,"METS AT DX-BONE:  NA";
"KRN",.402,1256,"DR",1,165.5,40)
I X="00" S $P(^ONCO(165.5,DA,"CS1"),U,21)=0 W !,"METS AT DX-BRAIN: None";I X=98 S $P(^ONCO(165.5,DA,"CS1"),U,21)=8 W !,"METS AT DX-BRAIN: NA";I X="00" S $P(^ONCO(165.5,DA,"CS1"),U,22)=0 W !,"METS AT DX-LIVER: None";
"KRN",.402,1256,"DR",1,165.5,41)
I X=98 S $P(^ONCO(165.5,DA,"CS1"),U,22)=8 W !,"METS AT DX-LIVER: NA";I X="00" S $P(^ONCO(165.5,DA,"CS1"),U,23)=0 W !,"METS AT DX-LUNG:  None" S Y="@344";
"KRN",.402,1256,"DR",1,165.5,42)
I X=98 S $P(^ONCO(165.5,DA,"CS1"),U,23)=8 W !,"METS AT DX-LUNG:  NA" S Y="@344";34.31;34.32;34.33;34.34;@344;34.4;44.1;44.2;44.3;44.4;44.5;44.6;44.7;44.8;44.9;44.101;44.11;44.12;44.13;44.14;44.15;44.16;44.17;44.18;44.19;44.201;
"KRN",.402,1256,"DR",1,165.5,43)
44.21;44.22;44.23;44.24;44.25;I $P($G(^ONCO(165.5,DA,"CS3")),U,2)'=1 S Y="@398";247;@398;D ^ONCCS;D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";@399;S Y=$S(ONCOANS="A":"@4",1:"@0");@4;D NCDS^ONCPTX;S X=X;58.1;
"KRN",.402,1256,"DR",1,165.5,44)
I X="" S TXNUL=1,$P(^ONCO(165.5,D0,3),U,31)="",Y="@35";I (X=0)!(X="00") D NCDS^ONCNTX S Y="@35";I (X=9)!(X="09") D NCDS^ONCUTX S Y="@35";58.3;@35;58.4;I X="" S $P(^ONCO(165.5,D0,3.1),U,6)="",Y="@36";
"KRN",.402,1256,"DR",1,165.5,45)
I (X=0)!(X="00") D NCDSATF^ONCNTX1 S Y="@36";I (X=9)!(X="09") D NCDSATF^ONCUTX1 S Y="@36";58.5;@36;W !;I $P($G(^ONCO(165.5,DA,0)),U,16)<3100000 S Y="@124";235;I (X=1)!(X=9) D DNTDEL^ONCOCC S Y="@41";@124;124;
"KRN",.402,1256,"DR",1,165.5,46)
I (X="0000000")!(X=9999999) S Y="@41";I X="" D CHKTS^ONCODSR;D NTX^ONCOAIP;@41;I $P($G(^ONCO(165.5,DA,0)),U,16)>3021231 S Y="@429";D ROADS^ONCPTX;58.2;D SPSR^ONCATF;I X="" S TXNUL=1,$P(^ONCO(165.5,D0,3),U,38)="",Y="@426";S X=X;
"KRN",.402,1256,"DR",1,165.5,47)
S SPS=$P($G(^ONCO(165.5,D0,3)),U,38);I SPS=("00")!(SPS=1) D SURR^ONCNTX S TXNO=1,Y="@426";S TPX=$P($G(^ONCO(165.5,D0,2)),U,1);S SGRP=$P($G(^ONCO(164,TPX,0)),U,16);I $E(TPX,3,4)=77 S SGRP=67422;
"KRN",.402,1256,"DR",1,165.5,48)
I $G(^ONCO(164,SGRP,"SPS",SPS,0))[99 D SURR^ONCUTX S TXUNK=1 S Y="@426";D SATFDFR^ONCOCC;74;@426;D DSPSPSR^ONCATF;W !;50.2//^S X=$G(SPSDF);@427;W !;D CHKPRMR^ONCUTX1;138;D SCPR^ONCATF;S X=X;S SCOPE=$P($G(^ONCO(165.5,D0,3)),U,40);
"KRN",.402,1256,"DR",1,165.5,49)
I SCOPE="" S $P(^ONCO(165.5,D0,3),U,42)="",TXNUL=1,Y="@1381";I SCOPE=1 D NODER^ONCNTX S TXNO=1,Y="@1381";S TPX=$P($G(^ONCO(165.5,D0,2)),U,1) I TPX="" S Y="@428";S SGRP=$P($G(^ONCO(164,TPX,0)),U,16) I SGRP="" S Y="@428";
"KRN",.402,1256,"DR",1,165.5,50)
I $G(^ONCO(164,SGRP,"SC5",SCOPE,0))["Unknown" D NODER^ONCUTX S TXUNK=1,Y="@1381";140;D NUMND^ONCATF;@1381;D DSPSCPR^ONCATF;W !;D SCOPER^ONCOCC;138.1//^S X=$G(SCPDF);S X=X;S SCPATF=$P($G(^ONCO(165.5,D0,3.1)),U,9);
"KRN",.402,1256,"DR",1,165.5,51)
I SCPATF="" S $P(^ONCO(165.5,D0,3.1),U,11)="",Y="@139";I SCPATF=1 D NODATFR^ONCNTX1 S Y="@139";S TPX=$P($G(^ONCO(165.5,D0,2)),U,1) I TPX="" S Y="@428";S SGRP=$P($G(^ONCO(164,TPX,0)),U,16) I SGRP="" S Y="@428";
"KRN",.402,1256,"DR",1,165.5,52)
I $G(^ONCO(164,SGRP,"SC5",SCPATF,0))["Unknown" D NODATFR^ONCUTX1 S Y="@139";D NUMN^ONCOCC;140.1//^S X=$G(NUMDF);@139;W !;139;D SOSNR^ONCATF;S X=X;S SOSN=$P($G(^ONCO(165.5,D0,3)),U,41) I SOSN="" S TXNUL=1,Y="@1391";
"KRN",.402,1256,"DR",1,165.5,53)
I SOSN=1 D SOSNR^ONCNTX S TXNO=1,Y="@1391";S TPX=$P($G(^ONCO(165.5,D0,2)),U,1) I TPX="" S Y="@428";S SGRP=$P($G(^ONCO(164,TPX,0)),U,16) I SGRP="" S Y="@428";I $G(^ONCO(164,SGRP,"SO5",SOSN,0))["Unknown" S TXUNK=1;@1391;
"KRN",.402,1256,"DR",1,165.5,54)
D DSPSOSR^ONCATF;D SOSNR^ONCOCC;139.1//^S X=$G(SOSNDF);S X=X;@428;W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";@429;D FORDS^ONCPTX;S X=X;58.6;D SPS^ONCATF;I X="" S TXNUL=1,$P(^ONCO(165.5,D0,3.1),U,29)="",Y="@42";S X=X;
"KRN",.402,1256,"DR",1,165.5,55)
S SPS=$P($G(^ONCO(165.5,D0,3.1)),U,29);I SPS="00"!(SPS=1) D SUR^ONCNTX,SA^ONCNTX,SM^ONCNTX,DSD^ONCNTX S TXNO=1,Y="@42";S TPX=$P($G(^ONCO(165.5,D0,2)),U,1);S SGRP=$P($G(^ONCO(164,TPX,0)),U,16);
"KRN",.402,1256,"DR",1,165.5,56)
I $G(^ONCO(164,SGRP,"SPS",SPS,0))[99 D SUR^ONCUTX S TXUNK=1,Y="@42";50;435;14;D SPSDT^ONCATF;D SATFDEF^ONCOCC;59;@42;D DSPSPS^ONCATF;W !;58.7//^S X=$G(SPSDF);I X="" S $P(^ONCO(165.5,D0,3.1),U,8)="",Y="@43";S X=X;
"KRN",.402,1256,"DR",1,165.5,57)
S SPSATF=$P($G(^ONCO(165.5,D0,3.1)),U,30) I SPSATF="" S $P(^ONCO(165.5,D0,3.1),U,8)="",Y="@43";I SPSATF="00"!(SPSATF=1) D SURATF^ONCNTX1 S Y="@43";S TPX=$P($G(^ONCO(165.5,D0,2)),U,1) I TPX="" S Y="@44";
"KRN",.402,1256,"DR",1,165.5,58)
S SGRP=$P($G(^ONCO(164,TPX,0)),U,16) I SGRP="" S Y="@44";I $G(^ONCO(164,SGRP,"SPS",SPSATF,0))[99 D SURATF^ONCUTX1 S Y="@43";234;50.3//^S X=$G(SPSDTDF);I $P($G(^ONCO(165.5,DA,0)),U,16)<3100000 S Y="@43";@43;W !;D RFNS^ONCATF1;58;
"KRN",.402,1256,"DR",1,165.5,59)
@431;W !;D CHKPRMF^ONCUTX1;138.4;D SCP^ONCATF;S X=X;S SCOPE=$P($G(^ONCO(165.5,D0,3.1)),U,31) I SCOPE="" S $P(^ONCO(165.5,D0,3.1),U,22)="",$P(^ONCO(165.5,D0,3),U,42)="",TXNUL=1,Y="@45";I SCOPE=0 D NODE^ONCNTX S TXNO=1,Y="@45";
"KRN",.402,1256,"DR",1,165.5,60)
I SCOPE=9 D NODE^ONCUTX S TXUNK=1,Y="@45";138.2;D SCPDT^ONCATF;@45;D DSPSCP^ONCATF;W !;D SCOPE^ONCOCC;138.5//^S X=$G(SCPDF);S X=X;
"KRN",.402,1256,"DR",1,165.5,61)
S SCPATF=$P($G(^ONCO(165.5,D0,3.1)),U,32) I SCPATF="" S $P(^ONCO(165.5,D0,3.1),U,23)="",$P(^ONCO(165.5,D0,3.1),U,11)="",Y="@46";I SCPATF=0 D NODEATF^ONCNTX1 S Y="@46";I SCPATF=9 D NODEATF^ONCUTX1 S Y="@46";138.3//^S X=$G(SCPDTDF);
"KRN",.402,1256,"DR",1,165.5,62)
@46;W !;139.4;D SOSN^ONCATF;S X=X;S SOSN=$P($G(^ONCO(165.5,D0,3.1)),U,33) I SOSN="" S $P(^ONCO(165.5,D0,3.1),U,24)="",TXNUL=1,Y="@47";I SOSN=0 D SOSN^ONCNTX S TXNO=1,Y="@47";I SOSN=9 D SOSN^ONCUTX S TXUNK=1,Y="@47";139.2;
"KRN",.402,1256,"DR",1,165.5,63)
D SOSNDT^ONCATF;@47;S:(SOSN=3)!(SOSN=4) Y="@4725";139.6////0;139.7////0000000;W !!,"METS SITE RESECTED: 0";W !,"METS SITE RESECTED DATE: 00/00/0000";S Y="@475";@4725;139.6;139.7;@475;D DSPSOSN^ONCATF;W !;D SOSN^ONCOCC;
"KRN",.402,1256,"DR",1,165.5,64)
139.5//^S X=$G(SOSNDF);S X=X;S SOSNATF=$P($G(^ONCO(165.5,D0,3.1)),U,34) I SOSNATF="" S $P(^ONCO(165.5,D0,3.1),U,25)="",Y="@48";I SOSNATF=0 D SOSNATF^ONCNTX1 S Y="@48";I SOSNATF=9 D SOSNATF^ONCUTX1 S Y="@48";
"KRN",.402,1256,"DR",1,165.5,65)
139.3//^S X=$G(SOSNDTDF);@48;W !;170;I $P($G(^ONCO(165.5,DA,0)),U,16)>3021231 S Y=108;D DEFAULT^ONCTXSM;23//^S X=$G(RRDF);W !;108;S FLDNUM=108,NODE=14,LIMIT=1000 D ^ONCTEXT;W !;@44;46;
"KRN",.402,1256,"DR",1,165.5,66)
I (X=1)!(X=9) S $P(^ONCO(165.5,DA,7),U,20)="" S Y="@441";47;@441;281;228;229;230;231;232;245;W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";D RAD^ONCPTX;51.2;D RAD^ONCATF1;S R=$S(X&(X<7):1,1:0);
"KRN",.402,1256,"DR",1,165.5,67)
I X="" S $P(^ONCO(165.5,D0,3),U,4)="",TXNUL=1,Y="@49";I (X=0)!(X=7) D RAD1^ONCNTX,RAD2^ONCNTX S TXNO=1,Y="@49";I (X=8)!(X=9) D RAD^ONCUTX S TXUNK=1,Y="@49";51;D RADDT^ONCATF1;D RATFDEF^ONCOCC;126;125;363;
"KRN",.402,1256,"DR",1,165.5,68)
I X'="" S RTMCODE=$P($G(^ONCO(166.13,X,0)),U,1) I (RTMCODE>49)&(RTMCODE<63) S $P(^ONCO(165.5,DA,"THY1"),U,43)=88888 W !,"REGIONAL DOSE: cGy: NA, brachytherapy/radioisotopes administered" S Y=363.1;442;363.1;
"KRN",.402,1256,"DR",1,165.5,69)
I X'="" S RTMCODE=$P($G(^ONCO(166.13,X,0)),U,1) I (RTMCODE>49)&(RTMCODE<63) S $P(^ONCO(165.5,DA,"THY1"),U,44)=88888 W !,"BOOST DOSE: cGy: NA, brachytherapy/radioisotopes administered" S Y=56;443;56;361;@49;D DSPRAD^ONCATF1;W !;
"KRN",.402,1256,"DR",1,165.5,70)
51.4//^S X=$G(RADDF);I X="" S $P(^ONCO(165.5,D0,3.1),U,13)="",Y="@411";I (X=0)!(X=7) D RADATF^ONCNTX1 S Y="@411";I (X=8)!(X=9) D RADATF^ONCUTX1 S Y="@411";51.5//^S X=$G(RADDTDF);@411;D RS^ONCOAIP;S X=X;W !;51.3;D RFNR^ONCATF1;W !;
"KRN",.402,1256,"DR",1,165.5,71)
75;S RFNR=X D ^ONCRFNR W:$G(RFNRMSG)'="" !!,RFNRMSG;W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";S RVAR=$P($G(^ONCO(165.5,D0,3)),U,6);I RVAR=""!(RVAR=0)!(RVAR=9) S Y="@413";@412;W !;109;S FLDNUM=109,NODE=15,LIMIT=1000 D ^ONCTEXT;@413;
"KRN",.402,1256,"DR",1,165.5,72)
D ST^ONCPTX;53.2;D CHEM^ONCATF1;I X="" S $P(^ONCO(165.5,D0,3),U,11)="",TXNUL=1,Y="@414";I (X="00")!(X=82)!(X=85)!(X=86)!(X=87) D CHE^ONCNTX S TXNO=1,Y="@414";I (X=88)!(X=99) S XX=X D CHE^ONCUTX S TXUNK=1,Y="@414";53;
"KRN",.402,1256,"DR",1,165.5,73)
D CHEMDT^ONCATF1;D CATFDEF^ONCOCC;@414;D DSPCHEM^ONCATF1;W !;53.3//^S X=$G(CHEMDF);I X="" S $P(^ONCO(165.5,D0,3.1),U,15)="",Y="@415";I (X="00")!(X=82)!(X=85)!(X=86)!(X=87) D CMATFDT^ONCNTX1 S Y="@415";
"KRN",.402,1256,"DR",1,165.5,74)
I (X=88)!(X=99) D CHEMATF^ONCUTX1 S Y="@415";53.4//^S X=$G(CHMDTDF);@415;S CVAR=$P($G(^ONCO(165.5,D0,3)),U,13);I (CVAR="")!(CVAR="00")!(CVAR=99)!(CVAR=82)!(CVAR=85)!(CVAR=86)!(X=87) S Y="@416";W !;1423;I X="" S Y="@4151";1423.1;
"KRN",.402,1256,"DR",1,165.5,75)
I X="" S Y="@4151";1423.2;I X="" S Y="@4151";1423.3;I X="" S Y="@4151";1423.4;@4151;W !;111;S FLDNUM=111,NODE=17,LIMIT=1000 D ^ONCTEXT;@416;W !;54.2;D HT^ONCATF1;I X="" S $P(^ONCO(165.5,D0,3),U,14)="",TXNUL=1,Y="@417";
"KRN",.402,1256,"DR",1,165.5,76)
I (X="00")!(X=82)!(X=85)!(X=86)!(X=87) D HOR^ONCNTX1 S TXNO=1,Y="@417";I (X=88)!(X=99) S XX=X D HOR^ONCUTX S TXUNK=1,Y="@417";54;D HTDT^ONCATF1;D HATFDEF^ONCOCC;@417;D DSPHT^ONCATF1;W !;54.3//^S X=$G(HTDF);
"KRN",.402,1256,"DR",1,165.5,77)
I X="" S $P(^ONCO(165.5,D0,3.1),U,17)="",Y="@418";I (X="00")!(X=82)!(X=85)!(X=86)!(X=87) D HTATFDT^ONCNTX1 S Y="@418";I (X=88)!(X=99) D HTATF^ONCUTX1 S Y="@418";54.4//^S X=$G(HTDTDF);@418;W !;S HVAR=$P($G(^ONCO(165.5,D0,3)),U,16);
"KRN",.402,1256,"DR",1,165.5,78)
I (HVAR="")!(HVAR="00")!(HVAR=99)!(HVAR=82)!(HVAR=85)!(HVAR=86)!(X=87) S Y="@419";112;S FLDNUM=112,NODE=18,LIMIT=1000 D ^ONCTEXT;@419;55.2;D IMM^ONCATF1;I X="" S $P(^ONCO(165.5,D0,3),U,17)="",TXNUL=1,Y="@420";
"KRN",.402,1256,"DR",1,165.5,79)
I (X="00")!(X=82)!(X=85)!(X=86)!(X=87) D IMM^ONCNTX1 S TXNO=1,Y="@420";I (X=88)!(X=99) S XX=X D IMM^ONCUTX S TXUNK=1,Y="@420";55;D IMMDT^ONCATF1;D IATFDEF^ONCOCC;@420;D DSPIMM^ONCATF1;W !;55.3//^S X=$G(IMMDF);
"KRN",.402,1256,"DR",1,165.5,80)
I X="" S $P(^ONCO(165.5,D0,3.1),U,19)="",Y="@421";I (X="00")!(X=82)!(X=85)!(X=86)!(X=87) D IMATFDT^ONCNTX1 S Y="@421";I (X=88)!(X=99) D IMMATF^ONCUTX1 S Y="@421";55.4//^S X=$G(IMMDTDF);@421;W !;
"KRN",.402,1256,"DR",1,165.5,81)
S IVAR=$P($G(^ONCO(165.5,D0,3)),U,19);I (IVAR="")!(IVAR="00")!(IVAR=99)!(IVAR=82)!(IVAR=85)!(IVAR=86)!(X=87) S Y="@422";114;S FLDNUM=114,NODE=20,LIMIT=1000 D ^ONCTEXT;@422;153;D HTEP^ONCATF1;
"KRN",.402,1256,"DR",1,165.5,82)
I X="" S $P(^ONCO(165.5,D0,3.1),U,35)="",TXNUL=1,Y="@4201";S HE=$P(^ONCO(167,X,0),U,1);I (HE="00")!(HE=82)!(HE=85)!(HE=86)!(HE=87) D HTEP^ONCNTX1 S TXNO=1,Y="@4201";I (HE=88)!(HE=99) D HTEP^ONCUTX S TXUNK=1,Y="@4201";153.1;
"KRN",.402,1256,"DR",1,165.5,83)
D HTEPDT^ONCATF1;D HEATFDEF^ONCOCC;@4201;D DSPHTEP^ONCATF1;W !;153.2//^S X=$G(HTEPDF);I X="" S $P(^ONCO(165.5,D0,3.2),U,3)="",Y="@42015";S HEATF=$P(^ONCO(167,X,0),U,1);
"KRN",.402,1256,"DR",1,165.5,84)
I (HEATF="00")!(HEATF=82)!(HEATF=85)!(HEATF=86)!(HEATF=87) D HEATFDT^ONCNTX1 S Y="@42015";I (HEATF=88)!(HEATF=99) D HTEPATF^ONCUTX1 S Y="@42015";153.3//^S X=$G(HTEPDTDF);@42015;W !;
"KRN",.402,1256,"DR",1,165.5,85)
I $P($G(^ONCO(165.5,DA,0)),U,16)<3060000 S Y="@4202";D SSS^ONCOAIP1;S X=X;W !;15;@4202;W ! D PAUSE^ONCOPA2A I PAUSE=U S Y="@0";D OTH^ONCPTX;57.2;D OTH^ONCATF1;I X="" S $P(^ONCO(165.5,D0,3),U,23)="",TXNUL=1,Y="@423";
"KRN",.402,1256,"DR",1,165.5,86)
I (X=0)!(X=7) D OTH^ONCNTX1 S TXNO=$S(X=0:1,1:""),Y="@423";I (X=8)!(X=9) D OTH^ONCUTX S TXUNK=$S(X=9:1,1:""),Y="@423";57;D OTHDT^ONCATF1;D OATFDEF^ONCOCC;@423;D DSPOTH^ONCATF1;W !;57.3//^S X=$G(OTHDF);
"KRN",.402,1256,"DR",1,165.5,87)
I X="" S $P(^ONCO(165.5,D0,3.1),U,21)="" S Y="@424";I X=0!(X=7) D OTHATF^ONCNTX1 S Y="@424";I X=8!(X=9) D OTHATF^ONCUTX1 S Y="@424";57.4//^S X=$G(OTHDTDF);@424;W !;S OVAR=$P($G(^ONCO(165.5,D0,3)),U,25);
"KRN",.402,1256,"DR",1,165.5,88)
I OVAR=""!(OVAR=0)!(OVAR=9) S Y="@425";115;S FLDNUM=115,NODE=21,LIMIT=1000 D ^ONCTEXT;@425;D PRO^ONCPTX;12;@13;D PP^ONCATF1;D PATFDEF^ONCOCC;13//^S X=$G(PPDF);279;346;I X=9 D PRO^ONCUTX S Y="@113";
"KRN",.402,1256,"DR",1,165.5,89)
I (X=0)!(X=2)!(X=3)!(X=4)!(X=5)!(X=6)!(X=7)!(X=8) D PRO^ONCNTX1 S Y="@113";560;133;@113;W !;113;S FLDNUM=113,NODE=19,LIMIT=1000 D ^ONCTEXT;S Y=$S(ONCOANS="A":"@5",1:"@0");@5;D ^ONCOPCE;S Y=$S(ONCOANS="A":"@9",1:"@0");@6;
"KRN",.402,1256,"DR",1,165.5,90)
D ORF^ONCOAIP;205;206;207;208;209;210;211;212;213;214;215;216;217;218;219;220;221;222;223;224;225;226;S Y="@0";@7;D AB^ONCOAIP;91;I $G(EDIT)="YES" S Y="@0";S:$P(^ONCO(165.5,D0,7),U,4)="" Y="@83";W !!?5,"Selected for QA=>",!;63;
"KRN",.402,1256,"DR",1,165.5,91)
S:X="N" Y="@83";64;64.1;64.2;@83;S Y="";62;@999999;62;S Y=$S(ONCOANS=8:"@8",1:"");@8;D EDTMOD^ONCOAIP2;999.26;999.27;999.28;999.29;W !;999.1;999.2;999.3;999.4;999.5;999.6;999.7;999.8;999.9;999.11;999.12;999.13;999.14;999.15;999.16;
"KRN",.402,1256,"DR",1,165.5,92)
999.17;999.18;999.19;999.21;999.22;999.23;999.24;999.25;S Y="@0";@9;D UDFMOD^ONCOAIP2;284;284.1;284.2;284.3;284.4;284.5;284.6;284.7;284.8;284.9;S Y=$S(ONCOANS="A":"@7",1:"@0");
"MBREQ")
0
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"PKG",14,-1)
1^1
"PKG",14,0)
ONCOLOGY^ONC^Oncology treatment tracking & tumor registry package.
"PKG",14,20,0)
^9.402P^^
"PKG",14,22,0)
^9.49I^1^1
"PKG",14,22,1,0)
2.2
"PKG",14,22,1,"PAH",1,0)
5^3160817
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
34
"RTN","ONC2PS05")
0^9^B15386240
"RTN","ONC2PS05",1,0)
ONC2PS05 ;Hines OIFO/RTK - Post-Install Routine for Patch ONC*2.2*5 ;09/3/15
"RTN","ONC2PS05",2,0)
 ;;2.2;ONCOLOGY;**5**;Jul 31, 2013;Build 6
"RTN","ONC2PS05",3,0)
 ;
"RTN","ONC2PS05",4,0)
 N RC
"RTN","ONC2PS05",5,0)
 ;NEW Washington DC production server.
"RTN","ONC2PS05",6,0)
 ;S RC=$$UPDCSURL^ONCSAPIU("http://127.0.0.1:83/cgi_bin/oncsrv.exe")
"RTN","ONC2PS05",7,0)
 ;NEW Washington DC test server, comment out for final release.
"RTN","ONC2PS05",8,0)
 ;S RC=$$UPDCSURL^ONCSAPIU("http://127.0.0.1:81/cgi_bin/oncsrv.exe")
"RTN","ONC2PS05",9,0)
 ;
"RTN","ONC2PS05",10,0)
 D ADDSPS,ADDOSFO,TNMADD,DELOPT,CNVFPST
"RTN","ONC2PS05",11,0)
 K ONC164N,ONCSNAME Q
"RTN","ONC2PS05",12,0)
 ;
"RTN","ONC2PS05",13,0)
ADDSPS ;Add text to 5TH ED-SURGERY PRIMARY SITE (#111) multiple field-code #15
"RTN","ONC2PS05",14,0)
 ;for entry 67340 (LUNG) of the ICDO TOPOGRAPGY (#164) file
"RTN","ONC2PS05",15,0)
 S ONC164N=$O(^ONCO(164,67340,"SPS","C",15,"")) Q:ONC164N=""
"RTN","ONC2PS05",16,0)
 S DIE="^ONCO(164,67340,""SPS"","
"RTN","ONC2PS05",17,0)
 S DA(1)=67340,DA=ONC164N,ONCSNAME="Local tumor destruction, NOS; RFA"
"RTN","ONC2PS05",18,0)
 S DR=".01///^S X=ONCSNAME" D ^DIE
"RTN","ONC2PS05",19,0)
 K DA,DIE,DR
"RTN","ONC2PS05",20,0)
 Q
"RTN","ONC2PS05",21,0)
ADDOSFO ;Add new entries to the OTHER STAGING FOR ONCOLOGY (#164.3) file
"RTN","ONC2PS05",22,0)
 I '$D(^ONCO(164.3,"B","BCLC A0")) D
"RTN","ONC2PS05",23,0)
 .S DIC="^ONCO(164.3,",DIC(0)="L",X="BCLC A0" D FILE^DICN
"RTN","ONC2PS05",24,0)
 I '$D(^ONCO(164.3,"B","BCLC A1")) D
"RTN","ONC2PS05",25,0)
 .S DIC="^ONCO(164.3,",DIC(0)="L",X="BCLC A1" D FILE^DICN
"RTN","ONC2PS05",26,0)
 I '$D(^ONCO(164.3,"B","BCLC A2")) D
"RTN","ONC2PS05",27,0)
 .S DIC="^ONCO(164.3,",DIC(0)="L",X="BCLC A2" D FILE^DICN
"RTN","ONC2PS05",28,0)
 I '$D(^ONCO(164.3,"B","BCLC A3")) D
"RTN","ONC2PS05",29,0)
 .S DIC="^ONCO(164.3,",DIC(0)="L",X="BCLC A3" D FILE^DICN
"RTN","ONC2PS05",30,0)
 I '$D(^ONCO(164.3,"B","BCLC A4")) D
"RTN","ONC2PS05",31,0)
 .S DIC="^ONCO(164.3,",DIC(0)="L",X="BCLC A4" D FILE^DICN
"RTN","ONC2PS05",32,0)
 I '$D(^ONCO(164.3,"B","BCLC B")) D
"RTN","ONC2PS05",33,0)
 .S DIC="^ONCO(164.3,",DIC(0)="L",X="BCLC B" D FILE^DICN
"RTN","ONC2PS05",34,0)
 I '$D(^ONCO(164.3,"B","BCLC C")) D
"RTN","ONC2PS05",35,0)
 .S DIC="^ONCO(164.3,",DIC(0)="L",X="BCLC C" D FILE^DICN
"RTN","ONC2PS05",36,0)
 I '$D(^ONCO(164.3,"B","BCLC D")) D
"RTN","ONC2PS05",37,0)
 .S DIC="^ONCO(164.3,",DIC(0)="L",X="BCLC D" D FILE^DICN
"RTN","ONC2PS05",38,0)
 I '$D(^ONCO(164.3,"B","UNOS T1")) D
"RTN","ONC2PS05",39,0)
 .S DIC="^ONCO(164.3,",DIC(0)="L",X="UNOS T1" D FILE^DICN
"RTN","ONC2PS05",40,0)
 I '$D(^ONCO(164.3,"B","UNOS T2")) D
"RTN","ONC2PS05",41,0)
 .S DIC="^ONCO(164.3,",DIC(0)="L",X="UNOS T2" D FILE^DICN
"RTN","ONC2PS05",42,0)
 I '$D(^ONCO(164.3,"B","UNOS T3")) D
"RTN","ONC2PS05",43,0)
 .S DIC="^ONCO(164.3,",DIC(0)="L",X="UNOS T3" D FILE^DICN
"RTN","ONC2PS05",44,0)
 I '$D(^ONCO(164.3,"B","UNOS T4a")) D
"RTN","ONC2PS05",45,0)
 .S DIC="^ONCO(164.3,",DIC(0)="L",X="UNOS T4a" D FILE^DICN
"RTN","ONC2PS05",46,0)
 I '$D(^ONCO(164.3,"B","UNOS T4b")) D
"RTN","ONC2PS05",47,0)
 .S DIC="^ONCO(164.3,",DIC(0)="L",X="UNOS T4b" D FILE^DICN
"RTN","ONC2PS05",48,0)
 Q
"RTN","ONC2PS05",49,0)
TNMADD ;Add 88 to some T,N,M codes/help text for various entries in
"RTN","ONC2PS05",50,0)
 ;the ICDO TOPOGRAPGY (#164) file
"RTN","ONC2PS05",51,0)
 S ^ONCO(164,67440,11,13,0)="T88  NA"
"RTN","ONC2PS05",52,0)
 S $P(^ONCO(164,67440,11,0),"^",3)=13
"RTN","ONC2PS05",53,0)
 S $P(^ONCO(164,67440,11,0),"^",4)=13
"RTN","ONC2PS05",54,0)
 S ONCNWACT="S ACDANS=$$ADDDXST~ONCACDU1(IEN)"  ;set for all 3 extracts
"RTN","ONC2PS05",55,0)
 S DA=405,DA(1)=67440,DIE="^ONCO(164,"_DA(1)_",""N7"","
"RTN","ONC2PS05",56,0)
 S DR="4///^S X=ONCNWACT"
"RTN","ONC2PS05",57,0)
 D ^DIE
"RTN","ONC2PS05",58,0)
TESTZX9 ;Add 88 entry for 7TH ED N-CODE, 67440 IN (#164) file
"RTN","ONC2PS05",59,0)
 N D0,DA,DD,DIC,X,Y K DD,DO
"RTN","ONC2PS05",60,0)
 Q:$D(^ONCO(164,67440,"N7","B",88))
"RTN","ONC2PS05",61,0)
 S DA(1)=67440,DIC="^ONCO(164,"_DA(1)_",""N7"",",DIC(0)="L"
"RTN","ONC2PS05",62,0)
 F X=88 D FILE^DICN
"RTN","ONC2PS05",63,0)
 Q
"RTN","ONC2PS05",64,0)
DELOPT ;Delete ONCO ABSTRACT-BRIEF (80c) option from the ONCO ABSTRACT MENU
"RTN","ONC2PS05",65,0)
 S ZZDELO=$$DELETE^XPDMENU("ONCO ABSTRACT MENU","ONCO ABSTRACT-BRIEF 80")
"RTN","ONC2PS05",66,0)
 K ZZDELO
"RTN","ONC2PS05",67,0)
 Q
"RTN","ONC2PS05",68,0)
CNVFPST ;Convert/correct the FOLLOW-UP STATUS (#160, #15.2) field
"RTN","ONC2PS05",69,0)
 ; First Re-index "AFS" cross-reference on (file #160, field #15.2)
"RTN","ONC2PS05",70,0)
 ;IA #10013 - ENALL2^DIK and ENALL^DIK
"RTN","ONC2PS05",71,0)
 ;IA #10141 - BMES^XPDUTL
"RTN","ONC2PS05",72,0)
 N DIK
"RTN","ONC2PS05",73,0)
 S DIK="^ONCO(160,",DIK(1)="15.2^AFS"
"RTN","ONC2PS05",74,0)
 D BMES^XPDUTL("Re-indexing 'AFS' cross-reference of file #160...")
"RTN","ONC2PS05",75,0)
 D ENALL2^DIK ;Kill existing "AFS" cross-reference.
"RTN","ONC2PS05",76,0)
 D ENALL^DIK ;Re-create "AFS" cross-reference.
"RTN","ONC2PS05",77,0)
 D BMES^XPDUTL("Done Re-indexing the 'AFS' cross-reference...Converting FOLLOW-UP STATUS field...")
"RTN","ONC2PS05",78,0)
 ;
"RTN","ONC2PS05",79,0)
 ;SEARCH FOLLOW-UP SOURCE VALUES FOR PROBLEMS
"RTN","ONC2PS05",80,0)
 S ZZDOTS=0 F ZZFL=0:0 S ZZFL=$O(^ONCO(160,"AFS",ZZFL)) Q:ZZFL'>0  D
"RTN","ONC2PS05",81,0)
 .F ZZPT=0:0 S ZZPT=$O(^ONCO(160,"AFS",ZZFL,ZZPT)) Q:ZZPT'>0  D
"RTN","ONC2PS05",82,0)
 ..;CHECK IF PATIENT HAS SINGLE PRIMARY ONLY & CLASS OF CASE 00 OR 30-99
"RTN","ONC2PS05",83,0)
 ..S ZZPRI=0,ZZPRCNT=0,ZZDOTS=ZZDOTS+1 I ZZDOTS#100=0 W "."
"RTN","ONC2PS05",84,0)
 ..F  S ZZPRI=$O(^ONCO(165.5,"C",ZZPT,ZZPRI)) Q:ZZPRI'>0  D
"RTN","ONC2PS05",85,0)
 ...S ZZPRCNT=ZZPRCNT+1
"RTN","ONC2PS05",86,0)
 ..I ZZPRCNT=1 D  ; if patient has exactly 1 primary
"RTN","ONC2PS05",87,0)
 ...S ZZPRENT=$O(^ONCO(165.5,"C",ZZPT,0)) Q:ZZPRENT'>0  ; get primary IEN
"RTN","ONC2PS05",88,0)
 ...S ZZPRCOC=$P($G(^ONCO(165.5,ZZPRENT,0)),"^",4)  ; get the COC
"RTN","ONC2PS05",89,0)
 ...I ZZPRCOC=1!(ZZPRCOC>9) D
"RTN","ONC2PS05",90,0)
 ....S $P(^ONCO(160,ZZPT,1),"^",7)=0
"RTN","ONC2PS05",91,0)
 ....K ^ONCO(160,"AFS",ZZFL,ZZPT)
"RTN","ONC2PS05",92,0)
 ....S ^ONCO(160,"AFS",0,ZZPT)=""
"RTN","ONC2PS05",93,0)
 K ZZFL,ZZPT,ZZPRI,ZZPRCNT,ZZPRENT,ZZPRCOC
"RTN","ONC2PS05",94,0)
 Q
"RTN","ONCACD0")
0^14^B184758090
"RTN","ONCACD0",1,0)
ONCACD0 ;Hines OIFO/GWB - NAACCR extract driver ;09/22/11
"RTN","ONCACD0",2,0)
 ;;2.2;ONCOLOGY;**1,4,5**;Jul 31, 2013;Build 6
"RTN","ONCACD0",3,0)
 ;
"RTN","ONCACD0",4,0)
EN1(DEVICE,STEXT) ;Entry point
"RTN","ONCACD0",5,0)
EN2 N ACO,BDT,DATE,DIAGYR,EDT,EXTRACT,NCDB,ONCSPIEN,QUEUE,SDT,STAT,STAT1,STAT2,YESNO,DATE1,ONCDATE,ONCDT,ONCLDT
"RTN","ONCACD0",6,0)
 N ACCN,ONCDT11,ONCDATE1,SCREEN,CYR,ONC91AS,PTR,CLASSOFCASE,ONCPHI,ONCCLCA,ONCR12
"RTN","ONCACD0",7,0)
 K ^TMP($J),RQRS
"RTN","ONCACD0",8,0)
 S DEVICE=$G(DEVICE,0),STEXT=$G(STEXT,0),EXT=""
"RTN","ONCACD0",9,0)
 S (EDT,EXTRACT,DATE,OUT,QUEUE,SDT,STAT,ONCDT)=0
"RTN","ONCACD0",10,0)
 ;P2.2*4
"RTN","ONCACD0",11,0)
 W !
"RTN","ONCACD0",12,0)
 S DIR("A")=" Exclude PHI COMORBIDITY codes: "
"RTN","ONCACD0",13,0)
 S DIR("B")="YES",DIR(0)="Y"
"RTN","ONCACD0",14,0)
 S DIR("?")=" "
"RTN","ONCACD0",15,0)
 S DIR("?",1)=" Answer 'YES' if you want to exclude PHI COMORBIDITY codes."
"RTN","ONCACD0",16,0)
 S DIR("?",2)=" Answer 'NO' if you want to include PHI COMORBIDITY codes."
"RTN","ONCACD0",17,0)
 D ^DIR
"RTN","ONCACD0",18,0)
 I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",19,0)
 S ONCPHI=Y
"RTN","ONCACD0",20,0)
 ;
"RTN","ONCACD0",21,0)
 I (STEXT=0)!(STEXT=2)!(STEXT=3) S EXTRACT=$O(^ONCO(160.16,"B","NCDB EXTRACT V15.0",0))
"RTN","ONCACD0",22,0)
 I STEXT=1 D GETREC(.EXTRACT,.OUT)
"RTN","ONCACD0",23,0)
 I 'OUT S STAT=$$GETHOSP
"RTN","ONCACD0",24,0)
 I 'STAT S OUT=1
"RTN","ONCACD0",25,0)
 I 'OUT S STAT1=$P(STAT,U,1),STAT2=$P(STAT,U,2)
"RTN","ONCACD0",26,0)
 I 'OUT D GETDATE(.DATE,.DATE1,.OUT)
"RTN","ONCACD0",27,0)
 I 'OUT,STEXT=1 D GETDT(.SDT,.EDT,DATE,.OUT)
"RTN","ONCACD0",28,0)
 I 'OUT,STEXT=3 D RQRS(.SDT,.EDT,DATE,.OUT) S RQRS=1
"RTN","ONCACD0",29,0)
 I 'OUT D VERIFY(STAT,DATE,SDT,EDT,STEXT,.YESNO,.OUT)
"RTN","ONCACD0",30,0)
 I 'OUT G:'YESNO EN2
"RTN","ONCACD0",31,0)
 I 'OUT D DEVICE(DEVICE,.OUT)
"RTN","ONCACD0",32,0)
 I 'OUT D:'QUEUE PRINT(DEVICE,.OUT)
"RTN","ONCACD0",33,0)
 D EXIT
"RTN","ONCACD0",34,0)
 Q
"RTN","ONCACD0",35,0)
 ;
"RTN","ONCACD0",36,0)
GETREC(EXTRACT,OUT) ;Select VACCR or STATE record layout
"RTN","ONCACD0",37,0)
 W !!," Available record layouts:",!
"RTN","ONCACD0",38,0)
 W !,"  1) VACCR Record Layout v15.0 (VA Registry)"
"RTN","ONCACD0",39,0)
 W !,"  2) NAACCR State Record Layout v15.0"
"RTN","ONCACD0",40,0)
 W !
"RTN","ONCACD0",41,0)
 N DIR,X,Y
"RTN","ONCACD0",42,0)
 S DIR(0)="SAO^1:VACCR Record Layout v15.0;2:NAACCR State Record Layout v15.0"
"RTN","ONCACD0",43,0)
 S DIR("A")=" Select record layout: "
"RTN","ONCACD0",44,0)
 S DIR("?")="Select the record layout to use"
"RTN","ONCACD0",45,0)
 D ^DIR
"RTN","ONCACD0",46,0)
 I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",47,0)
 I +Y<1 S OUT=1 Q
"RTN","ONCACD0",48,0)
 I Y=1 S EXT="VACCR",EXTRACT=$O(^ONCO(160.16,"B","VACCR EXTRACT V15.0",0))
"RTN","ONCACD0",49,0)
 I Y=2 S EXT="STATE",EXTRACT=$O(^ONCO(160.16,"B","STATE EXTRACT V15.0",0))
"RTN","ONCACD0",50,0)
 Q
"RTN","ONCACD0",51,0)
 ;
"RTN","ONCACD0",52,0)
GETHOSP() ;Facility Identification Number (FIN)
"RTN","ONCACD0",53,0)
 N STAT,STATI,ALLOK
"RTN","ONCACD0",54,0)
 S STAT=0,ALLOK=$$GETDXH(.STAT)
"RTN","ONCACD0",55,0)
 I STAT S STATI=6_STAT_0,STAT=STAT_"^"_STATI
"RTN","ONCACD0",56,0)
 Q STAT
"RTN","ONCACD0",57,0)
 ;
"RTN","ONCACD0",58,0)
GETDXH(DXH) ;INSTITUTION ID NUMBER (160.1,27)
"RTN","ONCACD0",59,0)
 N OKHERE,DIE,DA,DR,ONCOL
"RTN","ONCACD0",60,0)
 W !
"RTN","ONCACD0",61,0)
 S DIE=160.1
"RTN","ONCACD0",62,0)
 S DA=$O(^ONCO(160.1,"C",DUZ(2),0))
"RTN","ONCACD0",63,0)
 I DA="" S DA=$O(^ONCO(160.1,0))
"RTN","ONCACD0",64,0)
 S ONCSPIEN=DA
"RTN","ONCACD0",65,0)
 S DR=27_$J("",1)_"Facility Identification Number (FIN)"
"RTN","ONCACD0",66,0)
 S ONCOL=0
"RTN","ONCACD0",67,0)
 L +^ONCO(160.1,DA):0 I $T D ^DIE L -^ONCO(160.1,DA) S ONCOL=1
"RTN","ONCACD0",68,0)
 I 'ONCOL W !,"This ONCOLOGY SITE PARAMETERS record is being edited by another user."
"RTN","ONCACD0",69,0)
 K ONCOL,DIE
"RTN","ONCACD0",70,0)
 I $D(Y)=0 S DXH=$$GET1^DIQ(160.19,X,.01,"I")
"RTN","ONCACD0",71,0)
 I X'="" S ACDSTATE=$P($G(^ONCO(160.19,X,0)),U,4)
"RTN","ONCACD0",72,0)
 S OKHERE=($D(Y)=0)
"RTN","ONCACD0",73,0)
 Q OKHERE
"RTN","ONCACD0",74,0)
 ;
"RTN","ONCACD0",75,0)
RQRS(SDT,EDT,DATE,OUT) ;Process RQRS data
"RTN","ONCACD0",76,0)
 ;
"RTN","ONCACD0",77,0)
 W !
"RTN","ONCACD0",78,0)
 S ONCR12=0
"RTN","ONCACD0",79,0)
 K DIR
"RTN","ONCACD0",80,0)
 S DIR(0)="SAO^1:COLON, RECTUM and BREAST only;2:All Analytic Cases only"
"RTN","ONCACD0",81,0)
 S DIR("A")=" Select cases for inclusion: "
"RTN","ONCACD0",82,0)
 S DIR("?")="Select cases or primaries for RQRS download"
"RTN","ONCACD0",83,0)
 D ^DIR
"RTN","ONCACD0",84,0)
 I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",85,0)
 I Y<1 S OUT=1 Q
"RTN","ONCACD0",86,0)
 S ONCR12=Y
"RTN","ONCACD0",87,0)
 W !
"RTN","ONCACD0",88,0)
 ;
"RTN","ONCACD0",89,0)
 K DIR
"RTN","ONCACD0",90,0)
 S DIR(0)="SAO^1:Date DX;2:Date Case Last Changed;3:Accession Number"
"RTN","ONCACD0",91,0)
 S DIR("A")=" Select date field to be used for Start/End range: "
"RTN","ONCACD0",92,0)
 S DIR("?")="Select the date field you wish to use for this download's Start/End range prompts."
"RTN","ONCACD0",93,0)
 D ^DIR
"RTN","ONCACD0",94,0)
 I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",95,0)
 I Y<1 S OUT=1 Q
"RTN","ONCACD0",96,0)
 S (NCDB,ONCLDT)=Y
"RTN","ONCACD0",97,0)
 K DIR
"RTN","ONCACD0",98,0)
 S ONCDT11=3080101
"RTN","ONCACD0",99,0)
 I $G(ONCLDT)=3 D ACCN Q
"RTN","ONCACD0",100,0)
 ;S CYR=1700+($E(DT,1,3)),SCREEN="K:X>CYR X"
"RTN","ONCACD0",101,0)
 S DIR(0)="DO^3080101:"_DT_":EP"
"RTN","ONCACD0",102,0)
 ;S DIR("B")=$E(ONCDT11,4,5)_"/"_$E(ONCDT11,6,7)_"/"_$E(ONCDT11,2,3)
"RTN","ONCACD0",103,0)
 I $G(ONCLDT)=1 D
"RTN","ONCACD0",104,0)
 .S DIR("A")=" Start, Date DX: "
"RTN","ONCACD0",105,0)
 .S DIR("?",1)="   Enter the DATE of Diagnosis of the"
"RTN","ONCACD0",106,0)
 .S DIR("?",2)="   FIRST abstract you would like to report."
"RTN","ONCACD0",107,0)
 I $G(ONCLDT)=2 D
"RTN","ONCACD0",108,0)
 .S DIR("A")=" Start, Date Case Last Changed: "
"RTN","ONCACD0",109,0)
 .S DIR("?",1)="   Enter the DATE CASE LAST CHANGED of the"
"RTN","ONCACD0",110,0)
 .S DIR("?",2)="   FIRST abstract you would like to report."
"RTN","ONCACD0",111,0)
 D ^DIR I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",112,0)
 S SDT=Y
"RTN","ONCACD0",113,0)
 I $E(SDT,4,7)="0000" S SDT=$E(SDT,1,3)_"0101"
"RTN","ONCACD0",114,0)
 K DIR
"RTN","ONCACD0",115,0)
 S CYR=1700+($E(DT,1,3)),SCREEN="K:(X>CYR)!(X<SDT) X"
"RTN","ONCACD0",116,0)
 S DIR(0)="DO^"_SDT_":"_DT_":EP"
"RTN","ONCACD0",117,0)
 S DIR("?")="   End Date must be greater than the Start Date."
"RTN","ONCACD0",118,0)
 I $G(ONCLDT)=1 D
"RTN","ONCACD0",119,0)
 .S DIR("A")="   End, Date DX: "
"RTN","ONCACD0",120,0)
 .S DIR("?",1)="   Enter the DATE of Diagnosis of the"
"RTN","ONCACD0",121,0)
 .S DIR("?",2)="   LAST abstract you would like to report."
"RTN","ONCACD0",122,0)
 I $G(ONCLDT)=2 D
"RTN","ONCACD0",123,0)
 .S DIR("A")="   End, Date Case Last Changed: "
"RTN","ONCACD0",124,0)
 .S DIR("?",1)="   Enter the DATE CASE LAST CHANGED  of the"
"RTN","ONCACD0",125,0)
 .S DIR("?",2)="   LAST abstract you would like to report."
"RTN","ONCACD0",126,0)
 S DIR("B")="TODAY"
"RTN","ONCACD0",127,0)
 D ^DIR I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",128,0)
 S EDT=Y I $E(EDT,4,7)="0000" S EDT=$E(EDT,1,3)_1231
"RTN","ONCACD0",129,0)
 ;
"RTN","ONCACD0",130,0)
 Q
"RTN","ONCACD0",131,0)
 ;
"RTN","ONCACD0",132,0)
GETDT(SDT,EDT,DATE,OUT) ; Select a date range
"RTN","ONCACD0",133,0)
 K DIR
"RTN","ONCACD0",134,0)
 S DIR(0)="SAO^1:Date Case Completed;2:Date Case Last Changed;3:Accession Number"
"RTN","ONCACD0",135,0)
 S DIR("A")=" Select date field to be used for Start/End range: "
"RTN","ONCACD0",136,0)
 S DIR("?")="Select the date field you wish to use for this download's Start/End range prompts."
"RTN","ONCACD0",137,0)
 D ^DIR
"RTN","ONCACD0",138,0)
 I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",139,0)
 I Y<1 S OUT=1 Q
"RTN","ONCACD0",140,0)
 S ONCLDT=Y
"RTN","ONCACD0",141,0)
 S ONCDT11=3000101
"RTN","ONCACD0",142,0)
DCLC K DIR
"RTN","ONCACD0",143,0)
 I $G(ONCLDT)=3 D ACCN Q:OUT=1  G ACJ
"RTN","ONCACD0",144,0)
 S CYR=DT,SCREEN="K:(X>CYR)!(X<ONCDT11) X"
"RTN","ONCACD0",145,0)
 S DIR(0)="DO^"_ONCDT11_":"_DT_":EP"
"RTN","ONCACD0",146,0)
 ;S DIR("B")=$E(ONCDT11,4,5)_"/"_$E(ONCDT11,6,7)_"/"_$E(ONCDT11,2,3)
"RTN","ONCACD0",147,0)
 I $G(ONCLDT)=1 D
"RTN","ONCACD0",148,0)
 .S DIR("A")=" Start, Date Case Completed: "
"RTN","ONCACD0",149,0)
 .S DIR("?",1)="   Enter the DATE CASE COMPLETED of the"
"RTN","ONCACD0",150,0)
 .S DIR("?",2)="   FIRST abstract you would like to report."
"RTN","ONCACD0",151,0)
 I ($G(ONCLDT)=2)!($G(NCDB)=2) D
"RTN","ONCACD0",152,0)
 .S DIR("A")=" Start, Date Case Last Changed: "
"RTN","ONCACD0",153,0)
 .S DIR("?",1)="   Enter the DATE CASE LAST CHANGED of the"
"RTN","ONCACD0",154,0)
 .S DIR("?",2)="   FIRST abstract you would like to report."
"RTN","ONCACD0",155,0)
 D ^DIR I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",156,0)
 S (SDT,BDT)=Y
"RTN","ONCACD0",157,0)
 K DIR
"RTN","ONCACD0",158,0)
 S CYR=DT,SCREEN="K:(X>CYR)!(X<SDT) X"
"RTN","ONCACD0",159,0)
 S DIR(0)="DO^"_SDT_":"_DT_":EP"
"RTN","ONCACD0",160,0)
 S DIR("B")="TODAY"
"RTN","ONCACD0",161,0)
 S DIR("?")="   End Date must be greater than the Start Date."
"RTN","ONCACD0",162,0)
 I $G(ONCLDT)=1 D
"RTN","ONCACD0",163,0)
 .S DIR("A")="   End, Date Case Completed: "
"RTN","ONCACD0",164,0)
 .I EXT="VACCR",$P($G(^ONCO(160.1,ONCSPIEN,0)),U,8)'="" S ONCED89=$$GET1^DIQ(160.1,ONCSPIEN,61)
"RTN","ONCACD0",165,0)
 .I EXT="STATE",$P($G(^ONCO(160.1,ONCSPIEN,0)),U,9)'="" S ONCED89=$$GET1^DIQ(160.1,ONCSPIEN,62)
"RTN","ONCACD0",166,0)
 .S DIR("?",1)="   Enter the DATE CASE COMPLETED of the"
"RTN","ONCACD0",167,0)
 .S DIR("?",2)="   LAST abstract you would like to report."
"RTN","ONCACD0",168,0)
 I ($G(ONCLDT)=2)!($G(NCDB)=2) D
"RTN","ONCACD0",169,0)
 .S DIR("A")="   End, Date Case Last Changed: "
"RTN","ONCACD0",170,0)
 .I EXT="VACCR",$P($G(^ONCO(160.1,ONCSPIEN,0)),U,10)'="" S ONCED89=$$GET1^DIQ(160.1,ONCSPIEN,63)
"RTN","ONCACD0",171,0)
 .I EXT="STATE",$P($G(^ONCO(160.1,ONCSPIEN,0)),U,11)'="" S ONCED89=$$GET1^DIQ(160.1,ONCSPIEN,64)
"RTN","ONCACD0",172,0)
 .S DIR("?",1)="   Enter the DATE CASE LAST CHANGED  of the"
"RTN","ONCACD0",173,0)
 .S DIR("?",2)="   LAST abstract you would like to report."
"RTN","ONCACD0",174,0)
 ;S:$G(ONCED89) DIR("B")=$E(ONCED89,4,5)_"/"_$E(ONCED89,6,7)_"/"_$E(ONCED89,2,3)
"RTN","ONCACD0",175,0)
 D ^DIR I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",176,0)
 S EDT=Y
"RTN","ONCACD0",177,0)
ACJ I EXT="" Q
"RTN","ONCACD0",178,0)
 I $G(NCDB)=2 Q
"RTN","ONCACD0",179,0)
 I EXT="VACCR" Q
"RTN","ONCACD0",180,0)
 K DIR
"RTN","ONCACD0",181,0)
 S DIR("A")=" Analytic cases only"
"RTN","ONCACD0",182,0)
 S DIR("B")="YES"
"RTN","ONCACD0",183,0)
 S DIR(0)="Y"
"RTN","ONCACD0",184,0)
 S DIR("?")=" "
"RTN","ONCACD0",185,0)
 S DIR("?",1)=" Answer 'YES' if you want only analytic cases (CLASS OF CASE 0-2) extracted."
"RTN","ONCACD0",186,0)
 S DIR("?",2)=" Answer  'NO' if you want all cases (analytic and non-analytic) extracted."
"RTN","ONCACD0",187,0)
 D ^DIR
"RTN","ONCACD0",188,0)
 I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",189,0)
 S ACO=Y
"RTN","ONCACD0",190,0)
 Q
"RTN","ONCACD0",191,0)
 ;
"RTN","ONCACD0",192,0)
DATEDX(SDT,EDT,DATE,OUT) ;Select DATE DX range
"RTN","ONCACD0",193,0)
 K DIR
"RTN","ONCACD0",194,0)
 S CYR=1700+($E(DT,1,3)),SCREEN="K:X>CYR X"
"RTN","ONCACD0",195,0)
 ;S DIR(0)="DO^3000101:"_DT_":EP"
"RTN","ONCACD0",196,0)
 ;S DIR(0)="D^::X"
"RTN","ONCACD0",197,0)
 S DIR("A")=" Start, Date Dx: "
"RTN","ONCACD0",198,0)
 S DIR("?",1)="   Enter the DATE DX of the FIRST"
"RTN","ONCACD0",199,0)
 S DIR("?",2)="   abstract you would like to report."
"RTN","ONCACD0",200,0)
 D ^DIR I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",201,0)
 S (SDT,BDT)=Y
"RTN","ONCACD0",202,0)
 K DIR
"RTN","ONCACD0",203,0)
 S CYR=1700+($E(DT,1,3)),SCREEN="K:(X>CYR)!(X<SDT) X"
"RTN","ONCACD0",204,0)
 S DIR(0)="DO^"_SDT_":"_DT_":EP"
"RTN","ONCACD0",205,0)
 ;S DIR(0)="D^::X"
"RTN","ONCACD0",206,0)
 S DIR("A")="   End, Date Dx:"
"RTN","ONCACD0",207,0)
 S DIR("?",1)="   Enter the DATE DX of the LAST abstract you would"
"RTN","ONCACD0",208,0)
 S DIR("?",2)="   like to report and must be greater than Start, Date Dx."
"RTN","ONCACD0",209,0)
 D ^DIR I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",210,0)
 S EDT=Y
"RTN","ONCACD0",211,0)
 Q
"RTN","ONCACD0",212,0)
 ;
"RTN","ONCACD0",213,0)
PRINT(DEVICE,OUT) ;Capture output data
"RTN","ONCACD0",214,0)
 I 'DEVICE D  Q:OUT
"RTN","ONCACD0",215,0)
 .N X
"RTN","ONCACD0",216,0)
 .W !!
"RTN","ONCACD0",217,0)
 .W !,?6,"--------------------------------------------------------------"
"RTN","ONCACD0",218,0)
 .W !,?6,"|Please activate your PC capture program.  The data will be  |"
"RTN","ONCACD0",219,0)
 .W !,?6,"|sent in 2 minutes or when you press the return key.         |"
"RTN","ONCACD0",220,0)
 .W !,?6,"--------------------------------------------------------------"
"RTN","ONCACD0",221,0)
 .W !!!
"RTN","ONCACD0",222,0)
 .R X:120
"RTN","ONCACD0",223,0)
 .I X="^" S OUT=1
"RTN","ONCACD0",224,0)
 U IO D EN1^ONCACD1
"RTN","ONCACD0",225,0)
 Q
"RTN","ONCACD0",226,0)
 ;
"RTN","ONCACD0",227,0)
EXIT ;Exit
"RTN","ONCACD0",228,0)
 K ACDSTATE,DIC,EXT,OUT,X,Y
"RTN","ONCACD0",229,0)
 I '$D(^TMP($J)) W !?3,"No records extracted." G EX
"RTN","ONCACD0",230,0)
 W !
"RTN","ONCACD0",231,0)
 S DIC="^ONCO(165.5,",L=0,FLDS="[ONC EXTRACT REPORT]",BY(0)="^TMP($J,",L(0)=1
"RTN","ONCACD0",232,0)
 S:DEVICE IOP=ION
"RTN","ONCACD0",233,0)
 I STEXT=0 S DHD=$P(^ONCO(160.16,EXTRACT,0),U,1) W !
"RTN","ONCACD0",234,0)
 I (STEXT=1)!(STEXT=2) S DHD=$P(^ONCO(160.16,EXTRACT,0),U,1)_" "_$$FMTE^XLFDT(BDT,"2D")_" - "_$$FMTE^XLFDT(EDT,"2D")
"RTN","ONCACD0",235,0)
 D EN1^DIP
"RTN","ONCACD0",236,0)
 I $E(IOST,1,2)="C-" K DIR S DIR(0)="E" D ^DIR Q:'Y
"RTN","ONCACD0",237,0)
 ;
"RTN","ONCACD0",238,0)
EX K ^TMP($J)
"RTN","ONCACD0",239,0)
 K %ZIS
"RTN","ONCACD0",240,0)
 D ^%ZISC
"RTN","ONCACD0",241,0)
 K ACDANS,BY,CCEX,DHD,EXT,FLDS,FR,IOP,L,POP,STEXT,TO
"RTN","ONCACD0",242,0)
 Q
"RTN","ONCACD0",243,0)
 ;
"RTN","ONCACD0",244,0)
DEVICE(DEVICE,OUT) ;Select output device
"RTN","ONCACD0",245,0)
 Q:'DEVICE
"RTN","ONCACD0",246,0)
 S %ZIS="Q"
"RTN","ONCACD0",247,0)
 D ^%ZIS
"RTN","ONCACD0",248,0)
 I POP S OUT=1 Q
"RTN","ONCACD0",249,0)
 I $D(IO("Q")) D
"RTN","ONCACD0",250,0)
 .S ZTRTN="PRINT^ONCACD0(DEVICE,.OUT)"
"RTN","ONCACD0",251,0)
 .S ZTDESC=$S('STEXT:"ONC NCDB Extract",STEXT:"ONC State Extract",1:"")
"RTN","ONCACD0",252,0)
 .S ZTSAVE("STAT1")=""
"RTN","ONCACD0",253,0)
 .S ZTSAVE("DATE")=""
"RTN","ONCACD0",254,0)
 .S ZTSAVE("DATE1")=""
"RTN","ONCACD0",255,0)
 .S ZTSAVE("ONCDT")=""
"RTN","ONCACD0",256,0)
 .S ZTSAVE("ONCLDT")=""
"RTN","ONCACD0",257,0)
 .S ZTSAVE("STEXT")=""
"RTN","ONCACD0",258,0)
 .S ZTSAVE("DEVICE")=""
"RTN","ONCACD0",259,0)
 .S ZTSAVE("OUT")=""
"RTN","ONCACD0",260,0)
 .S ZTSAVE("BDT")=""
"RTN","ONCACD0",261,0)
 .S ZTSAVE("SDT")=""
"RTN","ONCACD0",262,0)
 .S ZTSAVE("EDT")=""
"RTN","ONCACD0",263,0)
 .S ZTSAVE("EXT")=""
"RTN","ONCACD0",264,0)
 .S ZTSAVE("EXTRACT")=""
"RTN","ONCACD0",265,0)
 .S ZTSAVE("NCDB")=""
"RTN","ONCACD0",266,0)
 .D ^%ZTLOAD
"RTN","ONCACD0",267,0)
 .I $D(ZTSK)[0 S OUT=1 W !!,?20,"Report Canceled!"
"RTN","ONCACD0",268,0)
 .E  W !!,?20,"Report Queued!" S QUEUE=1
"RTN","ONCACD0",269,0)
 .D HOME^%ZIS
"RTN","ONCACD0",270,0)
 K ZTDESC,ZTRTN,ZTSAVE,ZTSK
"RTN","ONCACD0",271,0)
 Q
"RTN","ONCACD0",272,0)
 ;
"RTN","ONCACD0",273,0)
VERIFY(STAT,DATE,SDT,EDT,STEXT,YESNO,OUT) ;Verify settings
"RTN","ONCACD0",274,0)
 N DIR,Y,RL
"RTN","ONCACD0",275,0)
 S RL=$P(^ONCO(160.16,EXTRACT,0),U,1)
"RTN","ONCACD0",276,0)
 I STEXT=3 S RL="RQRS EXTRACT"
"RTN","ONCACD0",277,0)
 W !!," These are your current settings:"
"RTN","ONCACD0",278,0)
 W !
"RTN","ONCACD0",279,0)
 W !," Record layout.......................: ",RL
"RTN","ONCACD0",280,0)
 W !," Facility Identification Number (FIN): ",STAT1
"RTN","ONCACD0",281,0)
 I EXT="STATE" D
"RTN","ONCACD0",282,0)
 .W !," State to be extracted...............: ",ACDSTATE
"RTN","ONCACD0",283,0)
 I STEXT=0 D
"RTN","ONCACD0",284,0)
 .W !," Diagnosis Year......................: ",DIAGYR
"RTN","ONCACD0",285,0)
 .W !," Selection criterion.................: ",$S(NCDB=1:"All cases",NCDB=2:"Date Case Last Changed date range",NCDB=3:"Accession Number",1:"")
"RTN","ONCACD0",286,0)
 I STEXT=3 D
"RTN","ONCACD0",287,0)
 .W !," Selection criterion.................: ",$S(NCDB=1:"Date DX",NCDB=2:"Date Case Last Changed date range",NCDB=3:"Accession Number",1:"")
"RTN","ONCACD0",288,0)
 I (STEXT=1)!(STEXT=2)!(STEXT=3),(($G(NCDB)'=3)&($G(ONCLDT)'=3)) D
"RTN","ONCACD0",289,0)
 .W !," Start date..........................: ",$$FMTE^XLFDT(SDT,"2D")
"RTN","ONCACD0",290,0)
 .W !," End date............................: ",$$FMTE^XLFDT(EDT,"2D")
"RTN","ONCACD0",291,0)
 I ($G(ONCLDT)=3)!($G(NCDB)=3) D
"RTN","ONCACD0",292,0)
 .W !," Accession Number Start..........: ",SDT
"RTN","ONCACD0",293,0)
 .W !," Accession Number End............: ",EDT
"RTN","ONCACD0",294,0)
 I EXT="STATE" D
"RTN","ONCACD0",295,0)
 .W !," Analytic cases only.................: ",$S(ACO=1:"YES",1:"NO")
"RTN","ONCACD0",296,0)
 I STEXT=3 D
"RTN","ONCACD0",297,0)
 .W !," Primary Sites.......................: ",$S(ONCR12=1:"BREAST, COLON and RECTUM",ONCR12=2:"All Analytic Cases",1:"")
"RTN","ONCACD0",298,0)
 W !
"RTN","ONCACD0",299,0)
 S DIR("A")=" Are these settings correct"
"RTN","ONCACD0",300,0)
 S DIR("B")="YES"
"RTN","ONCACD0",301,0)
 S DIR(0)="Y"
"RTN","ONCACD0",302,0)
 D ^DIR
"RTN","ONCACD0",303,0)
 I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",304,0)
 S YESNO=Y
"RTN","ONCACD0",305,0)
 I STEXT=1,EXT="VACCR" S $P(^ONCO(160.1,ONCSPIEN,0),U,8)=EDT
"RTN","ONCACD0",306,0)
 I STEXT=1,EXT="STATE" S $P(^ONCO(160.1,ONCSPIEN,0),U,9)=EDT
"RTN","ONCACD0",307,0)
 I STEXT=2,EXT="VACCR" S $P(^ONCO(160.1,ONCSPIEN,0),U,10)=EDT
"RTN","ONCACD0",308,0)
 I STEXT=2,EXT="STATE" S $P(^ONCO(160.1,ONCSPIEN,0),U,11)=EDT
"RTN","ONCACD0",309,0)
 Q
"RTN","ONCACD0",310,0)
 ;
"RTN","ONCACD0",311,0)
GETDATE(ONCDT,DATE1,OUT) ;Select Diagnosis Year
"RTN","ONCACD0",312,0)
 Q:STEXT>0
"RTN","ONCACD0",313,0)
 N CYR,DIR,SCREEN,Y
"RTN","ONCACD0",314,0)
 S ONCDT=0
"RTN","ONCACD0",315,0)
 S CYR=1700+($E(DT,1,3)),SCREEN="K:X>CYR X"
"RTN","ONCACD0",316,0)
 S DIR(0)="NAO^1900:"_CYR_":0^"_SCREEN
"RTN","ONCACD0",317,0)
 S DIR("A")=" Diagnosis Year Start: "
"RTN","ONCACD0",318,0)
 D ^DIR
"RTN","ONCACD0",319,0)
 I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",320,0)
 ;S (ONCDT,DIAGYR)=Y
"RTN","ONCACD0",321,0)
 S (ONCDATE,ONCDT)=Y
"RTN","ONCACD0",322,0)
 S ONCDT=ONCDT-1700
"RTN","ONCACD0",323,0)
 S ONCDT11=ONCDT_"0101"
"RTN","ONCACD0",324,0)
 S ONCDT=ONCDT_"0000"
"RTN","ONCACD0",325,0)
 S (ONCDT,ONCLDT)=ONCDT-1
"RTN","ONCACD0",326,0)
 ;Diagnosis Year End
"RTN","ONCACD0",327,0)
 K DIR
"RTN","ONCACD0",328,0)
 S DATE1=ONCDATE
"RTN","ONCACD0",329,0)
 S CYR=1700+($E(DT,1,3)),SCREEN="K:(X>CYR)!(X<ONCDATE) X"
"RTN","ONCACD0",330,0)
 S DIR(0)="NAO^1900:"_CYR_":0^"_SCREEN
"RTN","ONCACD0",331,0)
 S DIR("A")=" Diagnosis Year End: "
"RTN","ONCACD0",332,0)
 S DIR("?")=" Diagnosis Year End must be a number and greater than the Start year."
"RTN","ONCACD0",333,0)
 D ^DIR
"RTN","ONCACD0",334,0)
 I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",335,0)
 S (ONCDATE1,DATE1)=Y
"RTN","ONCACD0",336,0)
 S DIAGYR=ONCDATE_"-"_Y
"RTN","ONCACD0",337,0)
 S DATE1=DATE1+1
"RTN","ONCACD0",338,0)
 S DATE1=DATE1-1700
"RTN","ONCACD0",339,0)
 S DATE1=DATE1_"0000"
"RTN","ONCACD0",340,0)
 S DATE1=DATE1-1
"RTN","ONCACD0",341,0)
 K DIR
"RTN","ONCACD0",342,0)
 W !," Diagnosis Years: ",DIAGYR
"RTN","ONCACD0",343,0)
 W !
"RTN","ONCACD0",344,0)
 W !,?6,"Select one of the following:"
"RTN","ONCACD0",345,0)
 W !
"RTN","ONCACD0",346,0)
 W !,?11,"1 All eligible cases for this year"
"RTN","ONCACD0",347,0)
 W !,?11,"2 Cases within a 'Date Case Last Changed' date range"
"RTN","ONCACD0",348,0)
 W !,?11,"3 Accession Number"
"RTN","ONCACD0",349,0)
 W !
"RTN","ONCACD0",350,0)
 S DIR(0)="SAO^1:All cases;2:Cases within a date range;3:Accession Number"
"RTN","ONCACD0",351,0)
 S DIR("A")=" Select extraction criterion: "
"RTN","ONCACD0",352,0)
 S DIR("B")="All cases"
"RTN","ONCACD0",353,0)
 S DIR("?")=" "
"RTN","ONCACD0",354,0)
 S DIR("?",1)=" Select 'All cases' if you want to extract all"
"RTN","ONCACD0",355,0)
 S DIR("?",2)=" of the eligible cases for this Diagnosis Year."
"RTN","ONCACD0",356,0)
 S DIR("?",3)=""
"RTN","ONCACD0",357,0)
 S DIR("?",4)=" Select 'Cases within a date range' if you want"
"RTN","ONCACD0",358,0)
 S DIR("?",5)=" to specify a 'Date Case Last Changed' date range"
"RTN","ONCACD0",359,0)
 S DIR("?",6)=" for this Diagnosis Year."
"RTN","ONCACD0",360,0)
 S DIR("?",7)=" "
"RTN","ONCACD0",361,0)
 S DIR("?",8)="Select 'Accession Number-Seq' if you want to specify"
"RTN","ONCACD0",362,0)
 S DIR("?",9)="the extract by Accession Number range."
"RTN","ONCACD0",363,0)
 D ^DIR
"RTN","ONCACD0",364,0)
 I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",365,0)
 I Y<1 S OUT=1 Q
"RTN","ONCACD0",366,0)
 S NCDB=Y
"RTN","ONCACD0",367,0)
 I NCDB=2 W ! D DCLC
"RTN","ONCACD0",368,0)
 I NCDB=3 W ! D ACCN
"RTN","ONCACD0",369,0)
 Q
"RTN","ONCACD0",370,0)
ACCN ;Accession Number
"RTN","ONCACD0",371,0)
 N ONCACST,ONCACEN
"RTN","ONCACD0",372,0)
 S ONCACST=$O(^ONCO(165.5,"AA",0)),ONCACEN=$O(^ONCO(165.5,"AA",""),-1)
"RTN","ONCACD0",373,0)
 S:$D(ONCDATE) ONCACST=ONCDATE_"00000" S:$D(ONCDATE1) ONCACEN=ONCDATE1_"99999"
"RTN","ONCACD0",374,0)
 S ONCACST=$O(^ONCO(165.5,"AA",ONCACST)),ONCACEN=$O(^ONCO(165.5,"AA",ONCACEN),-1)
"RTN","ONCACD0",375,0)
 K DIR
"RTN","ONCACD0",376,0)
 S DIR("B")=ONCACST
"RTN","ONCACD0",377,0)
 S DIR(0)="NO^"_ONCACST_":"_ONCACEN
"RTN","ONCACD0",378,0)
 S DIR("A")="Enter the Accession Number Start "
"RTN","ONCACD0",379,0)
 S DIR("?")="Enter a number from "_ONCACST_" to "_ONCACEN
"RTN","ONCACD0",380,0)
 D ^DIR I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",381,0)
 S (BDT,SDT)=Y
"RTN","ONCACD0",382,0)
 K DIR
"RTN","ONCACD0",383,0)
 S DIR("B")=ONCACEN
"RTN","ONCACD0",384,0)
 S DIR(0)="NO^"_BDT_":"_ONCACEN
"RTN","ONCACD0",385,0)
 S DIR("A")="Enter the Accession Number End "
"RTN","ONCACD0",386,0)
 S DIR("?")="Enter a number from "_BDT_" to "_ONCACEN
"RTN","ONCACD0",387,0)
 D ^DIR I $D(DIRUT) S OUT=1 K DIRUT Q
"RTN","ONCACD0",388,0)
 S EDT=Y
"RTN","ONCACD0",389,0)
 Q
"RTN","ONCACD1")
0^15^B71259107
"RTN","ONCACD1",1,0)
ONCACD1 ;Hines OIFO/GWB - Extract NAACCR/STATE/VACCR data ;09/06/11
"RTN","ONCACD1",2,0)
 ;;2.2;ONCOLOGY;**1,4,5**;Jul 31, 2013;Build 6
"RTN","ONCACD1",3,0)
 ;
"RTN","ONCACD1",4,0)
 ;P5 added in RQRS the Analytic Cases selection.
"RTN","ONCACD1",5,0)
EN1 ;Entry point
"RTN","ONCACD1",6,0)
 K ^TMP($J)
"RTN","ONCACD1",7,0)
 N EXPORT,PAGE,STOPDT,OIEN,ZTREQ
"RTN","ONCACD1",8,0)
 S PAGE=1,OIEN=0
"RTN","ONCACD1",9,0)
 S EXPORT="YES"
"RTN","ONCACD1",10,0)
 D SETUP
"RTN","ONCACD1",11,0)
 I 'DEVICE W $C(26) H 30
"RTN","ONCACD1",12,0)
 Q
"RTN","ONCACD1",13,0)
 ;
"RTN","ONCACD1",14,0)
SETUP ;Loop through appropriate cross-reference
"RTN","ONCACD1",15,0)
 I 'DEVICE S X=0 X ^%ZOSF("RM") ;Disable autowrap
"RTN","ONCACD1",16,0)
 N BLANK,DCLC,FDNUM,IEN,NC,NINE,TPG,ZERO,ZNINE,X
"RTN","ONCACD1",17,0)
 S BLANK=" "
"RTN","ONCACD1",18,0)
 S (IEN,ZERO)=0
"RTN","ONCACD1",19,0)
 S NINE=9,ZNINE="09"
"RTN","ONCACD1",20,0)
 S OUT=$G(OUT,0)
"RTN","ONCACD1",21,0)
 ;
"RTN","ONCACD1",22,0)
 ;NCDB EXTRACT
"RTN","ONCACD1",23,0)
 ;Loop through DATE DX (165.5,3) "ADX" cross-reference
"RTN","ONCACD1",24,0)
 S ONCDT=DATE
"RTN","ONCACD1",25,0)
 I STEXT=0 F  S ONCDT=$O(^ONCO(165.5,"ADX",ONCDT)) Q:(ONCDT>DATE1)!(ONCDT="")  S IEN=0 F  S IEN=$O(^ONCO(165.5,"ADX",ONCDT,IEN)) Q:IEN=""  I $$DIV^ONCFUNC(IEN)=DUZ(2) D  Q:OUT
"RTN","ONCACD1",26,0)
 .I $G(NCDB)=2 S DCLC=$P($G(^ONCO(165.5,IEN,7)),U,21) Q:(DCLC<SDT)!(DCLC>EDT)
"RTN","ONCACD1",27,0)
 .I $G(NCDB)=3 S ACCN=$P($G(^ONCO(165.5,IEN,0)),U,5) Q:(ACCN<SDT)!(ACCN>EDT)
"RTN","ONCACD1",28,0)
 .D LOOP
"RTN","ONCACD1",29,0)
 ;
"RTN","ONCACD1",30,0)
 ;VACCR/STATE EXTRACT
"RTN","ONCACD1",31,0)
 ;Loop through DATE CASE COMPLETED (165.5,90) "AAD" cross-reference
"RTN","ONCACD1",32,0)
 I STEXT=1,($G(ONCLDT)=1) S SDT=SDT-1 F  S SDT=$O(^ONCO(165.5,"AAD",SDT)) Q:(SDT<1)!(SDT>EDT)!(OUT=1)  F  S IEN=$O(^ONCO(165.5,"AAD",SDT,IEN)) Q:IEN<1  I $$DIV^ONCFUNC(IEN)=DUZ(2) D  Q:OUT
"RTN","ONCACD1",33,0)
 .Q:$G(^ONCO(165.5,IEN,0))=""
"RTN","ONCACD1",34,0)
 .D LOOP
"RTN","ONCACD1",35,0)
 ;Loop through DATE CASE LAST CHANGED (165.5,198) "AAE" cross-reference
"RTN","ONCACD1",36,0)
 I STEXT=1,($G(ONCLDT)=2) S SDT=SDT-1 F  S SDT=$O(^ONCO(165.5,"AAE",SDT)) Q:(SDT<1)!(SDT>EDT)!(OUT=1)  F  S IEN=$O(^ONCO(165.5,"AAE",SDT,IEN)) Q:IEN<1  I $$DIV^ONCFUNC(IEN)=DUZ(2) D  Q:OUT
"RTN","ONCACD1",37,0)
 .Q:$G(^ONCO(165.5,IEN,0))=""
"RTN","ONCACD1",38,0)
 .D LOOP
"RTN","ONCACD1",39,0)
 ;Loop through ACCESSION NUMBER (165.5,.05) "AA" cross-reference
"RTN","ONCACD1",40,0)
 I STEXT=1,($G(ONCLDT)=3) S SDT=SDT-1 F  S SDT=$O(^ONCO(165.5,"AA",SDT)) Q:(SDT<1)!(SDT>EDT)!(OUT=1)  F  S IEN=$O(^ONCO(165.5,"AA",SDT,IEN)) Q:IEN<1  I $$DIV^ONCFUNC(IEN)=DUZ(2) D  Q:OUT
"RTN","ONCACD1",41,0)
 .Q:$G(^ONCO(165.5,IEN,0))=""
"RTN","ONCACD1",42,0)
 .D LOOP
"RTN","ONCACD1",43,0)
 ;
"RTN","ONCACD1",44,0)
 ;VACCR/STATE EXTRACT
"RTN","ONCACD1",45,0)
 ;Loop through DATE CASE LAST CHANGED (165.5,198) "AAE" cross-reference
"RTN","ONCACD1",46,0)
 I STEXT=2 S SDT=SDT-1 F  S SDT=$O(^ONCO(165.5,"AAE",SDT)) Q:(SDT<1)!(SDT>EDT)!(OUT=1)  F  S IEN=$O(^ONCO(165.5,"AAE",SDT,IEN)) Q:IEN<1  I $$DIV^ONCFUNC(IEN)=DUZ(2) D  Q:OUT
"RTN","ONCACD1",47,0)
 .Q:$G(^ONCO(165.5,IEN,0))=""
"RTN","ONCACD1",48,0)
 .D LOOP
"RTN","ONCACD1",49,0)
 ;
"RTN","ONCACD1",50,0)
 ;RQRS EXTRACT
"RTN","ONCACD1",51,0)
 ;Loop through DATE DX (165.5,3) "ADX" cross-reference
"RTN","ONCACD1",52,0)
 I STEXT=3,($G(ONCLDT)=1) S SDT=SDT-1 F  S SDT=$O(^ONCO(165.5,"ADX",SDT)) Q:(SDT<1)!(SDT>EDT)!(OUT=1)  F  S IEN=$O(^ONCO(165.5,"ADX",SDT,IEN)) Q:IEN<1  I $$DIV^ONCFUNC(IEN)=DUZ(2) D  Q:OUT
"RTN","ONCACD1",53,0)
 .Q:$G(^ONCO(165.5,IEN,0))=""
"RTN","ONCACD1",54,0)
 .S TPG=$P($G(^ONCO(165.5,IEN,2)),U,1)
"RTN","ONCACD1",55,0)
 .S NC=0
"RTN","ONCACD1",56,0)
 .F FDNUM=.03,.04,.05,.06,3,9,20,22.3,37.1,37.2,37.3,38,58.6,58.7,85,86,88 I $$GET1^DIQ(165.5,IEN,FDNUM,"I")="" S NC=1
"RTN","ONCACD1",57,0)
 .I $$GET1^DIQ(165.5,IEN,3,"I")<3100000,$$GET1^DIQ(165.5,IEN,87,"I")="" S NC=1
"RTN","ONCACD1",58,0)
 .Q:NC=1
"RTN","ONCACD1",59,0)
 .S ONCCLCA=$E($$GET1^DIQ(165.5,IEN,.04),1,2)
"RTN","ONCACD1",60,0)
 .I ($G(ONCR12)=2),((ONCCLCA=0)!(ONCCLCA>0)&(ONCCLCA<23)) D LOOP Q
"RTN","ONCACD1",61,0)
 .I ($G(ONCR12)=1),(($E(TPG,3,4)=50)!($E(TPG,3,4)=18)!($E(TPG,3,4)=20))&(TPG'=67181) D LOOP  ; screen out 67181 (appendix) cases - p2.2*4
"RTN","ONCACD1",62,0)
 ;Loop through DATE CASE LAST CHANGED (165.5,198) "AAE" cross-reference
"RTN","ONCACD1",63,0)
 ;Quit if "ADX" is before 2008 - p2.2*4
"RTN","ONCACD1",64,0)
 I STEXT=3,($G(ONCLDT)=2) S SDT=SDT-1 F  S SDT=$O(^ONCO(165.5,"AAE",SDT)) Q:(SDT<1)!(SDT>EDT)!(OUT=1)  F  S IEN=$O(^ONCO(165.5,"AAE",SDT,IEN)) Q:IEN<1  I $$DIV^ONCFUNC(IEN)=DUZ(2) D  Q:OUT
"RTN","ONCACD1",65,0)
 .Q:$G(^ONCO(165.5,IEN,0))=""
"RTN","ONCACD1",66,0)
 .Q:$P($G(^ONCO(165.5,IEN,0)),U,16)<3080101
"RTN","ONCACD1",67,0)
 .S TPG=$P($G(^ONCO(165.5,IEN,2)),U,1)
"RTN","ONCACD1",68,0)
 .S NC=0
"RTN","ONCACD1",69,0)
 .F FDNUM=.03,.04,.05,.06,3,9,20,22.3,37.1,37.2,37.3,38,58.6,58.7,85,86,88 I $$GET1^DIQ(165.5,IEN,FDNUM,"I")="" S NC=1
"RTN","ONCACD1",70,0)
 .I $$GET1^DIQ(165.5,IEN,3,"I")<3100000,$$GET1^DIQ(165.5,IEN,87,"I")="" S NC=1
"RTN","ONCACD1",71,0)
 .Q:NC=1
"RTN","ONCACD1",72,0)
 .S ONCCLCA=$E($$GET1^DIQ(165.5,IEN,.04),1,2)
"RTN","ONCACD1",73,0)
 .I ($G(ONCR12)=2),((ONCCLCA=0)!(ONCCLCA>0)&(ONCCLCA<23)) D LOOP Q
"RTN","ONCACD1",74,0)
 .I ($G(ONCR12)=1),($E(TPG,3,4)=50)!($E(TPG,3,4)=18)!($E(TPG,3,4)=20)&(TPG'=67181) D LOOP
"RTN","ONCACD1",75,0)
 ;Loop through ACCESSION NUMBER (165.5,.05) "AA" cross-reference
"RTN","ONCACD1",76,0)
 I STEXT=3,($G(ONCLDT)=3) S SDT=SDT-1 F  S SDT=$O(^ONCO(165.5,"AA",SDT)) Q:(SDT<1)!(SDT>EDT)!(OUT=1)  F  S IEN=$O(^ONCO(165.5,"AA",SDT,IEN)) Q:IEN<1  I $$DIV^ONCFUNC(IEN)=DUZ(2) D  Q:OUT
"RTN","ONCACD1",77,0)
 .Q:$G(^ONCO(165.5,IEN,0))=""
"RTN","ONCACD1",78,0)
 .Q:$P($G(^ONCO(165.5,IEN,0)),U,16)<3080101
"RTN","ONCACD1",79,0)
 .S TPG=$P($G(^ONCO(165.5,IEN,2)),U,1)
"RTN","ONCACD1",80,0)
 .S NC=0
"RTN","ONCACD1",81,0)
 .F FDNUM=.03,.04,.05,.06,3,9,20,22.3,37.1,37.2,37.3,38,58.6,58.7,85,86,88 I $$GET1^DIQ(165.5,IEN,FDNUM,"I")="" S NC=1
"RTN","ONCACD1",82,0)
 .I $$GET1^DIQ(165.5,IEN,3,"I")<3100000,$$GET1^DIQ(165.5,IEN,87,"I")="" S NC=1
"RTN","ONCACD1",83,0)
 .Q:NC=1
"RTN","ONCACD1",84,0)
 .S ONCCLCA=$E($$GET1^DIQ(165.5,IEN,.04),1,2)
"RTN","ONCACD1",85,0)
 .I ($G(ONCR12)=2),((ONCCLCA=0)!(ONCCLCA>0)&(ONCCLCA<23)) D LOOP Q
"RTN","ONCACD1",86,0)
 .I ($G(ONCR12)=1),($E(TPG,3,4)=50)!($E(TPG,3,4)=18)!($E(TPG,3,4)=20)&(TPG'=67181) D LOOP
"RTN","ONCACD1",87,0)
 Q
"RTN","ONCACD1",88,0)
 ;
"RTN","ONCACD1",89,0)
LOOP ;Apply extract selection rules
"RTN","ONCACD1",90,0)
 N LINE,RULES,VALID,JUMP
"RTN","ONCACD1",91,0)
 S RULES=0
"RTN","ONCACD1",92,0)
 F  S RULES=$O(^ONCO(160.16,EXTRACT,"RULES",RULES)) Q:RULES<1  D
"RTN","ONCACD1",93,0)
 .S LINE=^ONCO(160.16,EXTRACT,"RULES",RULES,0)
"RTN","ONCACD1",94,0)
 .X LINE
"RTN","ONCACD1",95,0)
 Q:'VALID
"RTN","ONCACD1",96,0)
 S ^TMP($J,IEN)=""
"RTN","ONCACD1",97,0)
 D OUTPUT(IEN,EXTRACT,JUMP,.OUT)
"RTN","ONCACD1",98,0)
 I 'DEVICE W !
"RTN","ONCACD1",99,0)
 Q
"RTN","ONCACD1",100,0)
 ;
"RTN","ONCACD1",101,0)
OUTPUT(IEN,EXTRACT,JUMP,OUT) ;Output
"RTN","ONCACD1",102,0)
 S ACD160=$P(^ONCO(165.5,IEN,0),U,2)
"RTN","ONCACD1",103,0)
 I DEVICE D HEAD(IEN,.OUT) Q:OUT
"RTN","ONCACD1",104,0)
 N POS S POS=0
"RTN","ONCACD1",105,0)
 F  S POS=$O(^ONCO(160.16,EXTRACT,"FIELD","B",POS)) Q:POS<1  D  Q:OUT
"RTN","ONCACD1",106,0)
 .N NODE S NODE=0
"RTN","ONCACD1",107,0)
 .F  S NODE=$O(^ONCO(160.16,EXTRACT,"FIELD","B",POS,NODE)) Q:NODE<1  D  Q:OUT
"RTN","ONCACD1",108,0)
 ..N STRING,DEFAULT,FILL,LEN
"RTN","ONCACD1",109,0)
 ..Q:$G(^ONCO(160.16,EXTRACT,"FIELD",NODE,0))=""
"RTN","ONCACD1",110,0)
 ..D DISPLAY(DEVICE,$P(^ONCO(160.16,EXTRACT,"FIELD",NODE,0),U,1)_U_$P(^ONCO(160.16,EXTRACT,"FIELD",NODE,0),U,4),.OUT)
"RTN","ONCACD1",111,0)
 ..Q:OUT
"RTN","ONCACD1",112,0)
 ..S LEN=$P(^ONCO(160.16,EXTRACT,"FIELD",NODE,0),U,2)
"RTN","ONCACD1",113,0)
 ..S STRING=$TR(^ONCO(160.16,EXTRACT,"FIELD",NODE,1),"~","^")
"RTN","ONCACD1",114,0)
 ..S DEFAULT=$P(^ONCO(160.16,EXTRACT,"FIELD",NODE,2),U,1)
"RTN","ONCACD1",115,0)
 ..S FILL=$P(^ONCO(160.16,EXTRACT,"FIELD",NODE,3),U,1)
"RTN","ONCACD1",116,0)
 ..D DATA(IEN,ACD160,STRING,DEFAULT,FILL,LEN,JUMP,NODE,POS)
"RTN","ONCACD1",117,0)
 ..;=========================================================
"RTN","ONCACD1",118,0)
 ..; This Code supports the PCE Extracts (currently disabled)
"RTN","ONCACD1",119,0)
 ..;=========================================================
"RTN","ONCACD1",120,0)
 ..I $G(^ONCO(160.16,EXTRACT,0))["ZZNCDB" D
"RTN","ONCACD1",121,0)
 ...I $O(^ONCO(160.16,EXTRACT,"FIELD","B",POS))>1 Q  ;QUIT if not end
"RTN","ONCACD1",122,0)
 ...N EXTRACT,NODE,POS
"RTN","ONCACD1",123,0)
 ...S EXTRACT=100,JUMP=0
"RTN","ONCACD1",124,0)
 ...;S:$D(^ONCO(165.5,"APCE","BLA",IEN)) EXTRACT=1
"RTN","ONCACD1",125,0)
 ...; ^==== Bladder 95,90,85
"RTN","ONCACD1",126,0)
 ...;S:$D(^ONCO(165.5,"APCE","THY",IEN)) EXTRACT=2
"RTN","ONCACD1",127,0)
 ...; ^==== Thyroid 96,91,86
"RTN","ONCACD1",128,0)
 ...;S:$D(^ONCO(165.5,"APCE","STS",IEN)) EXTRACT=3
"RTN","ONCACD1",129,0)
 ...; ^==== Soft Tissue 96,91,86
"RTN","ONCACD1",130,0)
 ...;S:$D(^ONCO(165.5,"APCE","COL",IEN)) EXTRACT=4
"RTN","ONCACD1",131,0)
 ...; ^==== Colorectal 97,92,87
"RTN","ONCACD1",132,0)
 ...;S:$D(^ONCO(165.5,"APCE","NHL",IEN)) EXTRACT=5
"RTN","ONCACD1",133,0)
 ...; ^==== Non-Hodgkins 97,92,87
"RTN","ONCACD1",134,0)
 ...;S:$D(^ONCO(165.5,"APCE","BRE",IEN)) EXTRACT=6
"RTN","ONCACD1",135,0)
 ...; ^==== Breast 98,93,88
"RTN","ONCACD1",136,0)
 ...;S:$D(^ONCO(165.5,"APCE","PRO2",IEN)) EXTRACT=7
"RTN","ONCACD1",137,0)
 ...; ^==== Prostate 98,93,88
"RTN","ONCACD1",138,0)
 ...;S:$D(^ONCO(165.5,"APCE","MEL",IEN)) EXTRACT=8
"RTN","ONCACD1",139,0)
 ...; ^==== Melanoma 99,94,89
"RTN","ONCACD1",140,0)
 ...;S:$D(^ONCO(165.5,"APCE","HEP",IEN)) EXTRACT=9
"RTN","ONCACD1",141,0)
 ...; ^==== Hepatocellular Cancers 00,95,90
"RTN","ONCACD1",142,0)
 ...;S:$D(^ONCO(165.5,"APCE","CNS",IEN)) EXTRACT=10
"RTN","ONCACD1",143,0)
 ...; ^==== Primary Intracranial/CNS Tumors 00,95,90
"RTN","ONCACD1",144,0)
 ...;S:$D(^ONCO(165.5,"APCE","LNG",IEN)) EXTRACT=11
"RTN","ONCACD1",145,0)
 ...; ^==== Lung (NSCLC) 01,96,91
"RTN","ONCACD1",146,0)
 ...;S:$D(^ONCO(165.5,"APCE","GAS",IEN)) EXTRACT=12
"RTN","ONCACD1",147,0)
 ...; ^==== Gastric Cancers 01,96,91
"RTN","ONCACD1",148,0)
 ...S POS=0
"RTN","ONCACD1",149,0)
 ...F  S POS=$O(^ONCO(160.17,EXTRACT,"FIELD","B",POS)) Q:POS<1  D  Q:OUT
"RTN","ONCACD1",150,0)
 ....N NODE S NODE=0
"RTN","ONCACD1",151,0)
 ....F  S NODE=$O(^ONCO(160.17,EXTRACT,"FIELD","B",POS,NODE)) Q:NODE<1  D  Q:OUT
"RTN","ONCACD1",152,0)
 .....N DEFAULT,FILL,LEN,STRING
"RTN","ONCACD1",153,0)
 .....Q:$G(^ONCO(160.17,EXTRACT,"FIELD",NODE,0))=""
"RTN","ONCACD1",154,0)
 .....D DISPLAY(DEVICE,$P(^ONCO(160.17,EXTRACT,"FIELD",NODE,0),U,1)_U_$P(^ONCO(160.17,EXTRACT,"FIELD",NODE,0),U,4),.OUT)
"RTN","ONCACD1",155,0)
 .....Q:OUT
"RTN","ONCACD1",156,0)
 .....S STRING=$TR(^ONCO(160.17,EXTRACT,"FIELD",NODE,1),"~","^")
"RTN","ONCACD1",157,0)
 .....S DEFAULT=^ONCO(160.17,EXTRACT,"FIELD",NODE,2)
"RTN","ONCACD1",158,0)
 .....S FILL=^ONCO(160.17,EXTRACT,"FIELD",NODE,3)
"RTN","ONCACD1",159,0)
 .....S LEN=$P(^ONCO(160.17,EXTRACT,"FIELD",NODE,0),U,2)
"RTN","ONCACD1",160,0)
 .....D DATA(IEN,ACD160,STRING,DEFAULT,FILL,LEN,JUMP,NODE,POS)
"RTN","ONCACD1",161,0)
 Q
"RTN","ONCACD1",162,0)
 ;
"RTN","ONCACD1",163,0)
HEAD(IEN,OUT) ;Preview End-of-Page
"RTN","ONCACD1",164,0)
 N FLG
"RTN","ONCACD1",165,0)
 I IEN=OIEN S FLG=0
"RTN","ONCACD1",166,0)
 I IEN'=OIEN S OIEN=IEN,FLG=1
"RTN","ONCACD1",167,0)
 I 'FLG Q:$Y+4<IOSL
"RTN","ONCACD1",168,0)
 I PAGE'=1 D  Q:OUT
"RTN","ONCACD1",169,0)
 .Q:$E(IOST,1,2)'="C-"
"RTN","ONCACD1",170,0)
 .N DIR,Y
"RTN","ONCACD1",171,0)
 .S DIR(0)="E" D ^DIR
"RTN","ONCACD1",172,0)
 .I 'Y S OUT=1 Q
"RTN","ONCACD1",173,0)
 D HEADER
"RTN","ONCACD1",174,0)
 Q
"RTN","ONCACD1",175,0)
 ;
"RTN","ONCACD1",176,0)
HEADER ;Preview Header
"RTN","ONCACD1",177,0)
 I PAGE'=1 W @IOF
"RTN","ONCACD1",178,0)
 I PAGE=1,$E(IOST,1,2)="C-" W @IOF
"RTN","ONCACD1",179,0)
 I STEXT=3 W !,"RQRS EXTRACT",?70,"Page: ",PAGE S PAGE=PAGE+1
"RTN","ONCACD1",180,0)
 E  W !,$P(^ONCO(160.16,EXTRACT,0),U),?70,"Page: ",PAGE S PAGE=PAGE+1
"RTN","ONCACD1",181,0)
 W !,"Patient: ",$$GET1^DIQ(160,ACD160,.01,"E")
"RTN","ONCACD1",182,0)
 W ?55,"SSN: ",$$GET1^DIQ(160,ACD160,2,"E")
"RTN","ONCACD1",183,0)
 W !,"Col#",?5,"Item name",?51,"Value",!
"RTN","ONCACD1",184,0)
 F I=1:1:79 W "="
"RTN","ONCACD1",185,0)
 Q
"RTN","ONCACD1",186,0)
 ;
"RTN","ONCACD1",187,0)
DISPLAY(DEVICE,WRITE,OUT) ; Display preview
"RTN","ONCACD1",188,0)
 Q:'DEVICE
"RTN","ONCACD1",189,0)
 N DOTS,COL,ITEM
"RTN","ONCACD1",190,0)
 I DEVICE,($Y+5)>IOSL D HEAD(0,.OUT) Q:OUT
"RTN","ONCACD1",191,0)
 S COL=$P(WRITE,U,1)
"RTN","ONCACD1",192,0)
 S COL=$S($L(COL)=1:"   "_COL,$L(COL)=2:"  "_COL,$L(COL)=3:" "_COL,1:COL)
"RTN","ONCACD1",193,0)
 S ITEM=$P(WRITE,U,2),ITEM=$E(ITEM,1,45)
"RTN","ONCACD1",194,0)
 S DOTS=(46-$L(ITEM))
"RTN","ONCACD1",195,0)
 W !,COL,?5,ITEM
"RTN","ONCACD1",196,0)
 F I=1:1:DOTS W "."
"RTN","ONCACD1",197,0)
 Q
"RTN","ONCACD1",198,0)
 ;
"RTN","ONCACD1",199,0)
DATA(IEN,ACD160,STRING,DEFAULT,FILL,LEN,JUMP,NODE,POS) ;Compute extract value
"RTN","ONCACD1",200,0)
 N ACDANS,EXIT S EXIT=0
"RTN","ONCACD1",201,0)
 I JUMP'="0" D
"RTN","ONCACD1",202,0)
 .I POS<$P(JUMP,U) Q
"RTN","ONCACD1",203,0)
 .I POS>$P(JUMP,U,2) Q
"RTN","ONCACD1",204,0)
 .N I
"RTN","ONCACD1",205,0)
 .S EXIT=1
"RTN","ONCACD1",206,0)
 .F I=1:1:LEN W BLANK
"RTN","ONCACD1",207,0)
 Q:EXIT
"RTN","ONCACD1",208,0)
 X STRING
"RTN","ONCACD1",209,0)
 ;
"RTN","ONCACD1",210,0)
 ;If value = "", extract DEFAULT value
"RTN","ONCACD1",211,0)
 I ACDANS="" D  Q
"RTN","ONCACD1",212,0)
 .N I,X S X=""
"RTN","ONCACD1",213,0)
 .I DEFAULT=8 D  Q
"RTN","ONCACD1",214,0)
 ..F I=1:1:LEN W DEFAULT
"RTN","ONCACD1",215,0)
 .I @DEFAULT="09" W @DEFAULT Q
"RTN","ONCACD1",216,0)
 .F I=1:1:LEN W @DEFAULT
"RTN","ONCACD1",217,0)
 ;
"RTN","ONCACD1",218,0)
 ;If value too long, truncate to LENGTH (160.161,1)
"RTN","ONCACD1",219,0)
 ;If value too short, pad with FILL (160.161,6)
"RTN","ONCACD1",220,0)
 I $L(ACDANS)=LEN W ACDANS Q
"RTN","ONCACD1",221,0)
 I $L(ACDANS)>LEN W $E(ACDANS,1,LEN) Q
"RTN","ONCACD1",222,0)
 E  D  Q
"RTN","ONCACD1",223,0)
 .N JUST,STUFF,I,REM,CAL
"RTN","ONCACD1",224,0)
 .S JUST=$P(FILL,","),STUFF=$P(FILL,",",2)
"RTN","ONCACD1",225,0)
 .S REM=LEN-$L(ACDANS)
"RTN","ONCACD1",226,0)
 .I JUST="R" W ACDANS
"RTN","ONCACD1",227,0)
 .F I=1:1:REM W @STUFF
"RTN","ONCACD1",228,0)
 .I JUST="L" W ACDANS
"RTN","ONCACD1",229,0)
 Q
"RTN","ONCACD1",230,0)
 ;
"RTN","ONCACD1",231,0)
CLEANUP ;Cleanup
"RTN","ONCACD1",232,0)
 K DATE,EDT,NCDB,SDT,STEXT
"RTN","ONCACDU1")
0^20^B47366223
"RTN","ONCACDU1",1,0)
ONCACDU1 ;Hines OIFO/GWB - NAACCR extract utilities #1 ;05/08/12
"RTN","ONCACDU1",2,0)
 ;;2.2;ONCOLOGY;**1,4,7,5**;Jul 31, 2013;Build 6
"RTN","ONCACDU1",3,0)
 ;
"RTN","ONCACDU1",4,0)
BDATE(ACD160) ;Date of Birth [240] 196-203
"RTN","ONCACDU1",5,0)
 N D0,X,Y
"RTN","ONCACDU1",6,0)
 S D0=ACD160
"RTN","ONCACDU1",7,0)
 D DOB1^ONCOES
"RTN","ONCACDU1",8,0)
 S X=$G(X)
"RTN","ONCACDU1",9,0)
 Q X
"RTN","ONCACDU1",10,0)
 ;
"RTN","ONCACDU1",11,0)
BEHAV(IEN) ;Behavior Code (called by extract RULES)
"RTN","ONCACDU1",12,0)
 N BEHAV
"RTN","ONCACDU1",13,0)
 S BEHAV=$E($$HIST^ONCFUNC(IEN),5)
"RTN","ONCACDU1",14,0)
 Q BEHAV
"RTN","ONCACDU1",15,0)
 ;
"RTN","ONCACDU1",16,0)
ICD9(ACD160,ONIEN) ;COMOR/COMP 1-10 for ICD9 and Secondary Diagnosis for ICD10
"RTN","ONCACDU1",17,0)
 N ONCDANS
"RTN","ONCACDU1",18,0)
 S ONCDANS=$$GET1^DIQ(160,ACD160,ONIEN,"I")
"RTN","ONCACDU1",19,0)
 S:ONCDANS'="" ONCDANS=$$GET1^DIQ(80,ONCDANS,.01,"I")
"RTN","ONCACDU1",20,0)
 ;ICD10 invalid code
"RTN","ONCACDU1",21,0)
 I ($E(ONCDANS,1,7)="Invalid")!($E(ONCDANS,1,3)="-1") S ONCDANS="" Q ONCDANS
"RTN","ONCACDU1",22,0)
 ;
"RTN","ONCACDU1",23,0)
 I $G(ONCPHI)=0 S ONCDANS=$P(ONCDANS,".",1)_$P(ONCDANS,".",2) Q ONCDANS
"RTN","ONCACDU1",24,0)
 ;
"RTN","ONCACDU1",25,0)
 N ONCMO1,ONCMO2,ONCI1,ONCJ1
"RTN","ONCACDU1",26,0)
 K ^TMP($J,"ONCOMO")
"RTN","ONCACDU1",27,0)
 F ONCI1=1:1 S ONCMO1=$P($T(COMO+ONCI1),";",3) Q:ONCMO1=""  F ONCJ1=1:1 S ONCMO2=$P(ONCMO1,"^",ONCJ1) Q:ONCMO2=""  D
"RTN","ONCACDU1",28,0)
 .S ^TMP($J,"ONCOMO",ONCMO2)=""
"RTN","ONCACDU1",29,0)
 I $G(ONCPHI),(ONCDANS'=""),($D(^TMP($J,"ONCOMO",ONCDANS))) S ONCDANS=""
"RTN","ONCACDU1",30,0)
 K ^TMP($J,"ONCOMO")
"RTN","ONCACDU1",31,0)
 S ONCDANS=$P(ONCDANS,".",1)_$P(ONCDANS,".",2)
"RTN","ONCACDU1",32,0)
 Q ONCDANS
"RTN","ONCACDU1",33,0)
 ;
"RTN","ONCACDU1",34,0)
COMO ;ICD10 PHI Code.
"RTN","ONCACDU1",35,0)
 ;;F10.10^F10.20^F10.21^F10.27^F10.929^F10.950^F10.951^F10.96^F10.99^F10.231^F10.239^F10.159^F10.180^F10.181^F10.182
"RTN","ONCACDU1",36,0)
 ;;F10.282^F10.982^F10.188^F10.259^F10.280^F10.281^F10.288^F10.229^F11.10^F11.20^F11.21^F12.10^F12.20^F12.21^F12.90
"RTN","ONCACDU1",37,0)
 ;;F13.10^F13.20^F13.21^F14.10^F14.20^F14.21^F15.10^F15.20^F15.21^F16.10^F16.20^F16.21^F18.10^F19.10^F19.20^F19.21
"RTN","ONCACDU1",38,0)
 ;;291.81^291.82^291.89^142.6^B20^B20.^B97.35^G62.1^K70.0^K74.0^K74.60^K74.69^K74.1^K76.9^K29.20^K29.21^K70.10^K70.30^K70.9
"RTN","ONCACDU1",39,0)
 ;;P04.3^R78.0^R97.0^R97.1^R97.8^R75^D57.1^D57.00^D57.01^D57.02^D57.80^D57.819^D57.40^D57.419^Z63.72^Z13.89^Z21^Z71.7
"RTN","ONCACDU1",40,0)
 ;;T50.991A^T51.91^T51.1X1A^T51.1X2A^T51.1X3A^T51.1X4A^T51.2X1A^T51.2X2A^T51.2X3A^T51.2X4A^T51.9X1A^T51.9X2A^T51.9X3A
"RTN","ONCACDU1",41,0)
 ;;T51.9X4A^T51.0X1A^T51.0X2A^T51.0X3A^T51.0X4A^T51.6X1A^T51.8X1A^T51.8X2A^T51.8X3A^T51.8X4A
"RTN","ONCACDU1",42,0)
 Q
"RTN","ONCACDU1",43,0)
 ;
"RTN","ONCACDU1",44,0)
DATE(ACDANS) ;Convert date to NAACCR format CCYYMMDD
"RTN","ONCACDU1",45,0)
 N DATE,X
"RTN","ONCACDU1",46,0)
 S DATE=""
"RTN","ONCACDU1",47,0)
 S X=ACDANS
"RTN","ONCACDU1",48,0)
 D DATEOT^ONCOES
"RTN","ONCACDU1",49,0)
 I X'="" D
"RTN","ONCACDU1",50,0)
 .I X="00/00/0000" S DATE="" Q
"RTN","ONCACDU1",51,0)
 .I X="88/88/8888" S DATE="" Q
"RTN","ONCACDU1",52,0)
 .I X="99/99/9999" S DATE="" Q
"RTN","ONCACDU1",53,0)
 .S DATE=$E(X,7,10)_$E(X,1,2)_$E(X,4,5)
"RTN","ONCACDU1",54,0)
 .S DATE=$S($E(DATE,5,8)=9999:$E(DATE,1,4),$E(DATE,7,8)=99:$E(DATE,1,6),1:DATE)
"RTN","ONCACDU1",55,0)
 Q DATE
"RTN","ONCACDU1",56,0)
 ;
"RTN","ONCACDU1",57,0)
DTFLAG(ACDANS,ITEM) ;Compute Date Flag
"RTN","ONCACDU1",58,0)
 N FLAG,N,REC
"RTN","ONCACDU1",59,0)
 S FLAG=""
"RTN","ONCACDU1",60,0)
 S N=ITEM
"RTN","ONCACDU1",61,0)
 D CHKFLGS  ;first check the Date Flag fields, make sure nothing entered
"RTN","ONCACDU1",62,0)
 I ONCDTFLG'="" S FLAG=ONCDTFLG G FLAG
"RTN","ONCACDU1",63,0)
 ;patch *2.2*4
"RTN","ONCACDU1",64,0)
 I (N=1861),(ACDANS'=""),(ACDANS'="9999999"),(ACDANS'="0000000"),(ACDANS'="8888888") G FLAG
"RTN","ONCACDU1",65,0)
 I N=1861 I ($$GET1^DIQ(165.5,IEN,71,"I")=4)!($$GET1^DIQ(165.5,IEN,71,"I")=5) S FLAG=11 G FLAG
"RTN","ONCACDU1",66,0)
 I ACDANS="" D
"RTN","ONCACDU1",67,0)
 .S FLAG=$S(N=1751:12,N=1861:10,1:"") Q
"RTN","ONCACDU1",68,0)
 I ACDANS="9999999" D
"RTN","ONCACDU1",69,0)
 .S FLAG=$S((N=391)!(N=439)!(N=581)!(N=1751):12,(N=448)!(N=591)!(N=601)!(N=1201)!(N=1211)!(N=1221)!(N=1231)!(N=1241)!(N=1251)!(N=1271)!(N=1281)!(N=1661)!(N=1681)!(N=1701)!(N=1861)!(N=3171)!(N=3181)!(N=3221)!(N=3231):10,1:"") Q
"RTN","ONCACDU1",70,0)
 I ACDANS="8888888" D
"RTN","ONCACDU1",71,0)
 .S FLAG=$S((N=448)!(N=439):11,N=391:12,(N=1211)!(N=1221)!(N=1231)!(N=1241)!(N=3221)!(N=3231):15,1:"") Q
"RTN","ONCACDU1",72,0)
 I ACDANS="0000000" D
"RTN","ONCACDU1",73,0)
 .S FLAG=$S((N=591)!(N=601)!(N=1201)!(N=1211)!(N=1221)!(N=1231)!(N=1241)!(N=1251)!(N=1271)!(N=1281)!(N=1661)!(N=1681)!(N=1701)!(N=1861)!(N=3171)!(N=3181)!(N=3221)!(N=3231):11,N=391:12,(N=448)!(N=439):15,1:"") Q
"RTN","ONCACDU1",74,0)
FLAG K ONCDTFLG,ZZFLDNUM
"RTN","ONCACDU1",75,0)
 Q FLAG
"RTN","ONCACDU1",76,0)
 ;
"RTN","ONCACDU1",77,0)
CHKFLGS ;CHECK THE DATE FLAG FIELDS IF USER NEEDED TO OVERRIDE VALUE
"RTN","ONCACDU1",78,0)
 ; if the DATE FLAG field is not NULL use that value to override the
"RTN","ONCACDU1",79,0)
 ; calculated value from DTFLAG entry point above
"RTN","ONCACDU1",80,0)
 S ONCDTFLG=""
"RTN","ONCACDU1",81,0)
 S ZZFLDNUM=$S(N=391:999.1,N=448:999.2,N=439:999.3,N=581:999.4,N=591:999.5,N=601:999.6,N=1271:999.7,N=1201:999.8,1:"")
"RTN","ONCACDU1",82,0)
 I ZZFLDNUM="" S ZZFLDNUM=$S(N=3171:999.9,N=3181:999.11,N=1211:999.12,N=3221:999.13,N=3231:999.14,N=1221:999.15,N=1231:999.16,N=1241:999.17,1:"")
"RTN","ONCACDU1",83,0)
 I ZZFLDNUM="" S ZZFLDNUM=$S(N=1251:999.18,N=1281:999.19,N=1861:999.21,N=1751:999.22,N=1661:999.23,N=1681:999.24,N=1701:999.25,1:"")
"RTN","ONCACDU1",84,0)
 I ZZFLDNUM="" Q
"RTN","ONCACDU1",85,0)
 S ONCDTFLG=$$GET1^DIQ(165.5,IEN,ZZFLDNUM,"I")
"RTN","ONCACDU1",86,0)
 Q
"RTN","ONCACDU1",87,0)
 ;
"RTN","ONCACDU1",88,0)
ADDDXST(IEN) ;Addr at DX--State [80] 145-146
"RTN","ONCACDU1",89,0)
 S ITEM=80 D CHKADDS I ONCADDF'="" Q ONCADDF  ;check overrides
"RTN","ONCACDU1",90,0)
 S XX=$S($$GET1^DIQ(165.5,IEN,16,"I")'="":$$GET1^DIQ(5,$$GET1^DIQ(165.5,IEN,16,"I"),1,"I"),1:"")
"RTN","ONCACDU1",91,0)
 S XX=$S(XX="CANAD":"CD",XX="EU":"YY",XX="FG":"YY",XX="MX":"XX",XX="NF":"NL",XX="PH":"XX",XX="UN":"ZZ",1:XX)
"RTN","ONCACDU1",92,0)
 Q XX
"RTN","ONCACDU1",93,0)
 ;
"RTN","ONCACDU1",94,0)
CHKADDS ;CHECK THE ADDRESS--STATE & COUNTRY FIELDS IF USER NEEDED TO OVERRIDE
"RTN","ONCACDU1",95,0)
 ; if the ADDRESS--STATE/COUNTRY field is not NULL use that value to
"RTN","ONCACDU1",96,0)
 ; overwrite the calculated value from the ADDDXST entry point and the
"RTN","ONCACDU1",97,0)
 ; CSTST,ADDCTRY entry points in ONCACDU2
"RTN","ONCACDU1",98,0)
 S ONCADDF="",N=ITEM
"RTN","ONCACDU1",99,0)
 S ZZFLDNUM=$S(N=80:999.26,N=102:999.27,N=1820:999.28,N=1832:999.29,1:"")
"RTN","ONCACDU1",100,0)
 I ZZFLDNUM="" Q
"RTN","ONCACDU1",101,0)
 S ONCADDF=$$GET1^DIQ(165.5,IEN,ZZFLDNUM,"I")
"RTN","ONCACDU1",102,0)
 K N,ZZFLDNUM Q
"RTN","ONCACDU1",103,0)
 ;
"RTN","ONCACDU1",104,0)
CNTY(IEN) ;COUNTY AT DX [90] 156-158
"RTN","ONCACDU1",105,0)
 N FIPSCODE
"RTN","ONCACDU1",106,0)
 S FIPSCODE=$$GET1^DIQ(165.5,IEN,10,"I")
"RTN","ONCACDU1",107,0)
 I (FIPSCODE=998)!(FIPSCODE=999) G QCNTY
"RTN","ONCACDU1",108,0)
 S FIPSCODE=$E($$GET1^DIQ(165.5,IEN,10,"I"),3,5)
"RTN","ONCACDU1",109,0)
QCNTY Q FIPSCODE
"RTN","ONCACDU1",110,0)
 ;
"RTN","ONCACDU1",111,0)
AGEDX(IEN) ;Age at Diagnosis [230] 119-121
"RTN","ONCACDU1",112,0)
 N ACDAGE,D0,X
"RTN","ONCACDU1",113,0)
 S D0=IEN
"RTN","ONCACDU1",114,0)
 D AGE^ONCOCOM S ACDAGE=$S(X=""!(X<0)!(X>999):"",1:X)
"RTN","ONCACDU1",115,0)
 Q ACDAGE
"RTN","ONCACDU1",116,0)
 ;
"RTN","ONCACDU1",117,0)
OCCUP(ACD160) ;Text--Usual Occupation [310] 143-182
"RTN","ONCACDU1",118,0)
 N X,OCCUP
"RTN","ONCACDU1",119,0)
 S X="UNKNOWN"
"RTN","ONCACDU1",120,0)
 S OCCUP=$O(^ONCO(160,ACD160,7,0))
"RTN","ONCACDU1",121,0)
 I OCCUP'<1 D
"RTN","ONCACDU1",122,0)
 .N OCC
"RTN","ONCACDU1",123,0)
 .S OCC=$P($G(^ONCO(160,ACD160,7,OCCUP,0)),U,1)
"RTN","ONCACDU1",124,0)
 .Q:OCC=""
"RTN","ONCACDU1",125,0)
 .S X=OCC
"RTN","ONCACDU1",126,0)
 Q X
"RTN","ONCACDU1",127,0)
 ;
"RTN","ONCACDU1",128,0)
IND(ACD160) ;Text--Usual Industry [320] 183-222
"RTN","ONCACDU1",129,0)
 N X,OCCUP
"RTN","ONCACDU1",130,0)
 S X="UNKNOWN"
"RTN","ONCACDU1",131,0)
 S OCCUP=$O(^ONCO(160,ACD160,7,0))
"RTN","ONCACDU1",132,0)
 I OCCUP'<1 D
"RTN","ONCACDU1",133,0)
 .N IND
"RTN","ONCACDU1",134,0)
 .S IND=$P($G(^ONCO(160,ACD160,7,OCCUP,0)),U,4)
"RTN","ONCACDU1",135,0)
 .Q:IND=""
"RTN","ONCACDU1",136,0)
 .S X=IND
"RTN","ONCACDU1",137,0)
 Q X
"RTN","ONCACDU1",138,0)
 ;
"RTN","ONCACDU1",139,0)
TOB(IEN) ;Tobacco History [340] 224-224 VACCR extract only
"RTN","ONCACDU1",140,0)
 N X,AASTOB
"RTN","ONCACDU1",141,0)
 S X=$P($G(^ONCO(160,ACD160,8)),U,2)
"RTN","ONCACDU1",142,0)
 S AASTOB=$S(X="Y":"Y",X="N":0,X="U":9,1:X)
"RTN","ONCACDU1",143,0)
 I AASTOB="Y" D
"RTN","ONCACDU1",144,0)
 .N X S X=""
"RTN","ONCACDU1",145,0)
 .S X=$O(^ONCO(160,ACD160,5,X),-1)
"RTN","ONCACDU1",146,0)
 .I X'<1 I $G(^ONCO(160,ACD160,5,X,0))'="" D
"RTN","ONCACDU1",147,0)
 ..N Y S Y=^ONCO(160,ACD160,5,X,0)
"RTN","ONCACDU1",148,0)
 ..I $P(Y,U,3)'="" S AASTOB=5 Q  ;Previous use
"RTN","ONCACDU1",149,0)
 ..S AASTOB=$S($P(Y,U)=1:1,$P(Y,U)=2:2,$P(Y,U)=3:2,$P(Y,U)=4:3,$P(Y,U)=5:3,$P(Y,U)=7:4,1:9)
"RTN","ONCACDU1",150,0)
 .I AASTOB="Y" S AASTOB=9
"RTN","ONCACDU1",151,0)
 Q AASTOB
"RTN","ONCACDU1",152,0)
 ;
"RTN","ONCACDU1",153,0)
ALC(IEN) ;Alcohol History [350] 225-225 VACCR extract only
"RTN","ONCACDU1",154,0)
 N X,AASALCO
"RTN","ONCACDU1",155,0)
 S X=$P($G(^ONCO(160,ACD160,8)),U,3)
"RTN","ONCACDU1",156,0)
 S AASALCO=$S(X="Y":"Y",X="N":0,X="U":9,1:X)
"RTN","ONCACDU1",157,0)
 I AASALCO="Y" D
"RTN","ONCACDU1",158,0)
 .N X S X=""
"RTN","ONCACDU1",159,0)
 .S X=$O(^ONCO(160,ACD160,6,X),-1)
"RTN","ONCACDU1",160,0)
 .I X'<1 I $G(^ONCO(160,ACD160,6,X,0))'="" D
"RTN","ONCACDU1",161,0)
 ..N Y S Y=^ONCO(160,ACD160,6,X,0)
"RTN","ONCACDU1",162,0)
 ..I $P(Y,U,4)'="" S AASALCO=2 Q  ;Past history of alcohol use
"RTN","ONCACDU1",163,0)
 ..S AASALCO=1
"RTN","ONCACDU1",164,0)
 .I AASALCO="Y" S AASALCO=9
"RTN","ONCACDU1",165,0)
 Q AASALCO
"RTN","ONCACDU1",166,0)
 ;
"RTN","ONCACDU1",167,0)
SG(IEN,TYPE) ;TNM Stage Groups
"RTN","ONCACDU1",168,0)
 ;TNM Path Stage Group  [910]  569-570
"RTN","ONCACDU1",169,0)
 ;TNM Clin Stage Group  [970]  579-580
"RTN","ONCACDU1",170,0)
 N GS
"RTN","ONCACDU1",171,0)
 S GS=""
"RTN","ONCACDU1",172,0)
 I TYPE="" Q GS
"RTN","ONCACDU1",173,0)
 I TYPE="P" S GS=$$GET1^DIQ(165.5,IEN,88,"I")
"RTN","ONCACDU1",174,0)
 I TYPE="C" S GS=$$GET1^DIQ(165.5,IEN,38,"I")
"RTN","ONCACDU1",175,0)
 Q GS
"RTN","ONCACDU1",176,0)
 ;
"RTN","ONCACDU1",177,0)
CC ;Comorbid/Complication 1-10
"RTN","ONCACDU1",178,0)
 ;No longer needed.  Used by NAACCR v11.3.
"RTN","ONCACDU1",179,0)
 ;[3110] 675-679
"RTN","ONCACDU1",180,0)
 ;[3120] 680-684
"RTN","ONCACDU1",181,0)
 ;[3130] 685-689
"RTN","ONCACDU1",182,0)
 ;[3140] 690-694
"RTN","ONCACDU1",183,0)
 ;[3150] 695-699
"RTN","ONCACDU1",184,0)
 ;[3160] 700-704
"RTN","ONCACDU1",185,0)
 ;[3161] 717-721
"RTN","ONCACDU1",186,0)
 ;[3162] 722-726
"RTN","ONCACDU1",187,0)
 ;[3163] 727-731
"RTN","ONCACDU1",188,0)
 ;[3164] 732-736
"RTN","ONCACDU1",189,0)
 ;S CCEX(1)="00000"
"RTN","ONCACDU1",190,0)
 ;F CCSUB=1:1:10 S CC(CCSUB)=""
"RTN","ONCACDU1",191,0)
 ;S CCSUB=0
"RTN","ONCACDU1",192,0)
 ;F FLD=25:.1:25.9 S CC=$$GET1^DIQ(160,ACD160,FLD,"I") S:CC'="" CC=$$GET1^DIQ(80,CC,.01,"I") S CCSUB=CCSUB+1,CC(CCSUB)=$P(CC," ",1)
"RTN","ONCACDU1",193,0)
 ;F CCEXSUB=1:1:10 S CCEX(CCEXSUB)=""
"RTN","ONCACDU1",194,0)
 ;I CC(1)="" Q
"RTN","ONCACDU1",195,0)
 ;I EXT="VACCR" F CCSUB=1:1:10 S CCEX(CCSUB)=$P(CC(CCSUB),".",1)_$P(CC(CCSUB),".",2) G CCEX
"RTN","ONCACDU1",196,0)
 ;S CCEXSUB=0
"RTN","ONCACDU1",197,0)
 ;S CCSUB=0 F  S CCSUB=$O(CC(CCSUB)) Q:CCSUB'>0  D
"RTN","ONCACDU1",198,0)
 ;.I ($E(CC(CCSUB),1)="E")!($E(CC(CCSUB),1)="V")!((+CC(CCSUB)>99.9)&(+CC(CCSUB)<290))!(+CC(CCSUB)>319) S CCEXSUB=CCEXSUB+1,CCEX(CCEXSUB)=$P(CC(CCSUB),".",1)_$P(CC(CCSUB),".",2)
"RTN","ONCACDU1",199,0)
CCEX ;K CC,CCEXSUB,CCSUB,FLD
"RTN","ONCACDU1",200,0)
 Q
"RTN","ONCACDU1",201,0)
 ;
"RTN","ONCACDU1",202,0)
RXCOD(IEN) ;RX Coding System--Current [1460] 888-889
"RTN","ONCACDU1",203,0)
 N OUT
"RTN","ONCACDU1",204,0)
 S OUT="06"
"RTN","ONCACDU1",205,0)
 Q OUT
"RTN","ONCACDU1",206,0)
 ;
"RTN","ONCACDU1",207,0)
FHCT ;Family History of Cancer Text 1456-1505 VACCR extract only
"RTN","ONCACDU1",208,0)
 K ONC S IEN160=ACD160_"," D GETS^DIQ(160,IEN160,"44*","","ONC")
"RTN","ONCACDU1",209,0)
 S (ACDANS,FHCTIEN)=""
"RTN","ONCACDU1",210,0)
 F  S FHCTIEN=$O(ONC(160.044,FHCTIEN)) Q:FHCTIEN'>0  D
"RTN","ONCACDU1",211,0)
 .S FHCT=ONC(160.044,FHCTIEN,.01)_"("_ONC(160.044,FHCTIEN,1)_")"
"RTN","ONCACDU1",212,0)
 .Q:($L(ACDANS)+$L(FHCT))>50
"RTN","ONCACDU1",213,0)
 .S ACDANS=ACDANS_FHCT_"/"
"RTN","ONCACDU1",214,0)
 S ACDANS=$E(ACDANS,1,$L(ACDANS)-1)
"RTN","ONCACDU1",215,0)
 K ONC,IEN160,FHCTIEN,FHCT
"RTN","ONCACDU1",216,0)
 Q
"RTN","ONCACDU1",217,0)
 ;
"RTN","ONCACDU1",218,0)
PHCT ;Patient History of Cancer Text 1785-1804 VACCR extract only
"RTN","ONCACDU1",219,0)
 S ACDANS=""
"RTN","ONCACDU1",220,0)
 F I=148.1,148.2,148.3,148.4 S PHCTPT=$$GET1^DIQ(165.5,IEN,I,"I") D
"RTN","ONCACDU1",221,0)
 .Q:PHCTPT=""
"RTN","ONCACDU1",222,0)
 .S PHCT=$$GET1^DIQ(164.2,PHCTPT,.01,"I")
"RTN","ONCACDU1",223,0)
 .Q:PHCT="NOT APPLICABLE"
"RTN","ONCACDU1",224,0)
 .Q:($L(ACDANS)+$L(PHCT))>20
"RTN","ONCACDU1",225,0)
 .S ACDANS=ACDANS_PHCT_"/"
"RTN","ONCACDU1",226,0)
 S ACDANS=$E(ACDANS,1,$L(ACDANS)-1)
"RTN","ONCACDU1",227,0)
 K I,PHCTPT,PHCT
"RTN","ONCACDU1",228,0)
 Q
"RTN","ONCACDU1",229,0)
 ;
"RTN","ONCACDU1",230,0)
NL ;Name--Last [2230] 1947-1971
"RTN","ONCACDU1",231,0)
 S ACDANS=$$STRIP^XLFSTR(ACDANS," !""""#$%&'()*+,./:;<=>?[>]^_\{|}~`")
"RTN","ONCACDU1",232,0)
 Q
"RTN","ONCACDU2")
0^1^B119516553
"RTN","ONCACDU2",1,0)
ONCACDU2 ;Hines OIFO/GWB - Utility routine ;05/03/12
"RTN","ONCACDU2",2,0)
 ;;2.2;ONCOLOGY;**1,4,7,5**;Jul 31, 2013;Build 6
"RTN","ONCACDU2",3,0)
 ;
"RTN","ONCACDU2",4,0)
VAFLD(ACDANS) ;Convert data to NAACCR format
"RTN","ONCACDU2",5,0)
 I ACDANS="N" S ACDANS=0
"RTN","ONCACDU2",6,0)
 I ACDANS="Y" S ACDANS=1
"RTN","ONCACDU2",7,0)
 I ACDANS="U" S ACDANS=9
"RTN","ONCACDU2",8,0)
 Q ACDANS
"RTN","ONCACDU2",9,0)
 ;
"RTN","ONCACDU2",10,0)
ICN(ACD160) ;Patient ICN (2,991.01 & 991.02) [72-94]
"RTN","ONCACDU2",11,0)
 ;  ICN OR X =999999999999V999999 format
"RTN","ONCACDU2",12,0)
 N X,ONC201,ONCPT01
"RTN","ONCACDU2",13,0)
 S X=""
"RTN","ONCACDU2",14,0)
 I ACD160="" Q X
"RTN","ONCACDU2",15,0)
 S ONC201=$P($G(^ONCO(160,ACD160,0)),U,1)
"RTN","ONCACDU2",16,0)
 S ONCPT01=$P(ONC201,";",1)
"RTN","ONCACDU2",17,0)
 S X=$$GETICN^MPIF001(ONCPT01)
"RTN","ONCACDU2",18,0)
 I $P(X,U,1)="-1" S X=""
"RTN","ONCACDU2",19,0)
 Q X
"RTN","ONCACDU2",20,0)
 ;
"RTN","ONCACDU2",21,0)
VASIT() ;VISN (160.1,7) [2340-2341]
"RTN","ONCACDU2",22,0)
 N X
"RTN","ONCACDU2",23,0)
 S OSPIEN=$O(^ONCO(160.1,0))
"RTN","ONCACDU2",24,0)
 S X=$P($G(^ONCO(160.1,OSPIEN,1)),U,7)
"RTN","ONCACDU2",25,0)
 K OSPIEN
"RTN","ONCACDU2",26,0)
 Q X
"RTN","ONCACDU2",27,0)
 ;
"RTN","ONCACDU2",28,0)
COCACC() ;COC ACCREDITATION (160.1,68) [2547-2548]
"RTN","ONCACDU2",29,0)
 N X
"RTN","ONCACDU2",30,0)
 S OSPIEN=$O(^ONCO(160.1,0))
"RTN","ONCACDU2",31,0)
 S X=$P($G(^ONCO(160.1,OSPIEN,7)),U,2)
"RTN","ONCACDU2",32,0)
 K OSPIEN
"RTN","ONCACDU2",33,0)
 Q X
"RTN","ONCACDU2",34,0)
 ;
"RTN","ONCACDU2",35,0)
SNCNT(IEN) ;Sequence Number--Central [380] 281-282
"RTN","ONCACDU2",36,0)
 N BEHAV,DATEDX,HIST,PRIMST,X
"RTN","ONCACDU2",37,0)
 S DATEDX=$E($$GET1^DIQ(165.5,IEN,3,"I"),1,3)
"RTN","ONCACDU2",38,0)
 S PRIMST=$$GET1^DIQ(165.5,IEN,20,"I")
"RTN","ONCACDU2",39,0)
 S HIST=$E($$GET1^DIQ(165.5,IEN,22.3,"I"),1,4)
"RTN","ONCACDU2",40,0)
 S BEHAV=$E($$GET1^DIQ(165.5,IEN,22.3,"I"),5)
"RTN","ONCACDU2",41,0)
 S X=""
"RTN","ONCACDU2",42,0)
 I DATEDX>295,DATEDX<303,$E(PRIMST,3,4)=53,HIST<9590,BEHAV=2 S X=98
"RTN","ONCACDU2",43,0)
 Q X
"RTN","ONCACDU2",44,0)
 ;
"RTN","ONCACDU2",45,0)
COCO(IEN) ;COC Coding Sys--Original [2150] 1202-1203
"RTN","ONCACDU2",46,0)
 N X
"RTN","ONCACDU2",47,0)
 S DATEDX=$$GET1^DIQ(165.5,IEN,3,"I")
"RTN","ONCACDU2",48,0)
 S X=$S(DATEDX>3021231:"08",DATEDX>2951231:"07",1:"05")
"RTN","ONCACDU2",49,0)
 Q X
"RTN","ONCACDU2",50,0)
 ;
"RTN","ONCACDU2",51,0)
VENDOR() ;Vendor Name [2170] 1204-1213
"RTN","ONCACDU2",52,0)
 N X,VERSION,EXTR,SUFFIX
"RTN","ONCACDU2",53,0)
 S EXTR=$G(^ONCO(160.16,EXTRACT,0))
"RTN","ONCACDU2",54,0)
 S SUFFIX=$S(EXTR["VACCR":"A",EXTR["STATE":"B",1:"")
"RTN","ONCACDU2",55,0)
 S VERSION=$P($G(^ONCO(160.16,EXTRACT,0))," ",3)
"RTN","ONCACDU2",56,0)
 S X="VA"_VERSION_$E($T(LOGO+3^ONCODIS),62,64)_SUFFIX
"RTN","ONCACDU2",57,0)
 Q X
"RTN","ONCACDU2",58,0)
 ;
"RTN","ONCACDU2",59,0)
WORD(IEN,NODE,LEN) ;Get word processing data
"RTN","ONCACDU2",60,0)
 N X
"RTN","ONCACDU2",61,0)
 S X=""
"RTN","ONCACDU2",62,0)
 I $D(^ONCO(165.5,IEN,NODE,0)) D
"RTN","ONCACDU2",63,0)
 .N CNT,LINE,ONCLINE
"RTN","ONCACDU2",64,0)
 .S CNT=0
"RTN","ONCACDU2",65,0)
 .S (LINE,ONCLINE)=""
"RTN","ONCACDU2",66,0)
 .F  S CNT=$O(^ONCO(165.5,IEN,NODE,CNT)) Q:CNT<1  D  Q:($L(ONCLINE)>LEN)
"RTN","ONCACDU2",67,0)
 ..Q:'$D(^ONCO(165.5,IEN,NODE,CNT,0))
"RTN","ONCACDU2",68,0)
 ..S ONCLINE=LINE_^ONCO(165.5,IEN,NODE,CNT,0)_" "
"RTN","ONCACDU2",69,0)
 ..I ($L(ONCLINE)>LEN) S LINE=$E(ONCLINE,1,LEN) Q
"RTN","ONCACDU2",70,0)
 ..S LINE=LINE_^ONCO(165.5,IEN,NODE,CNT,0)_" "
"RTN","ONCACDU2",71,0)
 .S X=LINE
"RTN","ONCACDU2",72,0)
 S X=$TR(X,$C(10,12,13),"   ")
"RTN","ONCACDU2",73,0)
 Q X
"RTN","ONCACDU2",74,0)
 ;
"RTN","ONCACDU2",75,0)
STAGE(IEN,TYPE) ;TNM Descriptors
"RTN","ONCACDU2",76,0)
 ;TNM Path Descriptor [910] 956-956
"RTN","ONCACDU2",77,0)
 ;TNM Clin Descriptor [980] 974-974
"RTN","ONCACDU2",78,0)
 N CD,LOC,PD,X
"RTN","ONCACDU2",79,0)
 S X=""
"RTN","ONCACDU2",80,0)
 S CD=$$GET1^DIQ(165.5,IEN,241,"I")
"RTN","ONCACDU2",81,0)
 S PD=$$GET1^DIQ(165.5,IEN,242,"I")
"RTN","ONCACDU2",82,0)
 I TYPE="C",CD'="" S X=CD G STAGEEX
"RTN","ONCACDU2",83,0)
 I TYPE="P",PD'="" S X=PD G STAGEEX
"RTN","ONCACDU2",84,0)
 S LOC=$S(TYPE="P":89.1,TYPE="C":37,1:"")
"RTN","ONCACDU2",85,0)
 I TYPE'="" D
"RTN","ONCACDU2",86,0)
 .N STRING
"RTN","ONCACDU2",87,0)
 .S STRING=$$GET1^DIQ(165.5,IEN,LOC,"E")
"RTN","ONCACDU2",88,0)
 .I ($P(STRING," ")["m")&($P(STRING," ")["y") S X=6 Q
"RTN","ONCACDU2",89,0)
 .I $P(STRING," ")["m" S X=3 Q
"RTN","ONCACDU2",90,0)
 .I TYPE="P",$P(STRING," ")["y" S X=4 Q
"RTN","ONCACDU2",91,0)
STAGEEX Q X
"RTN","ONCACDU2",92,0)
 ;
"RTN","ONCACDU2",93,0)
CCOUNTY(ACD160) ;County--Current [1840] 2192-2194
"RTN","ONCACDU2",94,0)
 I $$DPTLRT^ONCOES(ACD160)="LRT" S X="" G CCEX
"RTN","ONCACDU2",95,0)
 N DPT,DPTPNT,X
"RTN","ONCACDU2",96,0)
 S DPT=$$GET1^DIQ(160,ACD160,.01,"I")
"RTN","ONCACDU2",97,0)
 S DPTPNT=$P(DPT,";",1)
"RTN","ONCACDU2",98,0)
 S X=$$GET1^DIQ(2,DPTPNT,.117)
"RTN","ONCACDU2",99,0)
CCEX Q X
"RTN","ONCACDU2",100,0)
 ;
"RTN","ONCACDU2",101,0)
SUB(IEN,CNT,FIELD) ;
"RTN","ONCACDU2",102,0)
 ;Subsq RX 2nd Course Date [1660] 988-995
"RTN","ONCACDU2",103,0)
 N HEMA,HEMAPT,I,X
"RTN","ONCACDU2",104,0)
 S CNT=CNT-1
"RTN","ONCACDU2",105,0)
 S X=""
"RTN","ONCACDU2",106,0)
 I $O(^ONCO(165.5,IEN,4,0)) D
"RTN","ONCACDU2",107,0)
 .N IENS,SUB,SUBFLD,ENTRY,SUBIEN
"RTN","ONCACDU2",108,0)
 .S SUBIEN=0 F I=1:1 S SUBIEN=$O(^ONCO(165.5,IEN,4,SUBIEN)) Q:(I=CNT)!(SUBIEN'>0)
"RTN","ONCACDU2",109,0)
 .I SUBIEN="" S X="" Q
"RTN","ONCACDU2",110,0)
 .S IENS=SUBIEN_","_IEN
"RTN","ONCACDU2",111,0)
 .S ENTRY=$$GET1^DIQ(165.51,IENS,FIELD,"I") I ENTRY="",FIELD'=".07",FIELD'=".08" S X="" Q
"RTN","ONCACDU2",112,0)
 .S HEMA=""
"RTN","ONCACDU2",113,0)
 .S HEMAPT=$$GET1^DIQ(165.51,IENS,.02,"I")
"RTN","ONCACDU2",114,0)
 .S:HEMAPT'="" HEMA=$P($G(^ONCO(167,HEMAPT,0)),U,1)
"RTN","ONCACDU2",115,0)
 .I $S(FIELD=".01":1,FIELD=".05":1,FIELD=".06":1,FIELD=".07":1,FIELD=".08":1,FIELD=".09":1,FIELD="37":1,FIELD=".041":1,FIELD=".051":1,FIELD=".061":1,FIELD=".071":1,FIELD=".081":1,FIELD=".091":1,1:0) D  Q
"RTN","ONCACDU2",116,0)
 ..I FIELD=".06" S X=$S(ENTRY="01":1,ENTRY="02":2,ENTRY="03":3,$E(ENTRY,1)=8:0,1:ENTRY) Q
"RTN","ONCACDU2",117,0)
 ..I FIELD=".07" S X=$S(ENTRY="00":0,ENTRY="01":1,$E(ENTRY,1)=8:0,ENTRY=99:9,1:"") Q:X'=""  S X=$S(HEMA=30:2,HEMA=40:2,1:"") Q
"RTN","ONCACDU2",118,0)
 ..I FIELD=".08" S X=$S(ENTRY="01":1,ENTRY=87:7,ENTRY=88:8,$E(ENTRY,1)=8:0,ENTRY=99:9,1:ENTRY) Q:X'=""  S X=$S(HEMA=10:4,HEMA=11:2,HEMA=12:3,HEMA=20:5,1:"") Q
"RTN","ONCACDU2",119,0)
 ..S X=ENTRY
"RTN","ONCACDU2",120,0)
 .I $$GET1^DIQ(165.5,IEN,3,"I")<2980000 S X=ENTRY Q
"RTN","ONCACDU2",121,0)
 .S SUBFLD=$S(FIELD=33:"RR5",FIELD=35:"SC5",FIELD=36:"SO5",FIELD=.04:"SPS",1:"") I SUBFLD="" S X="" Q
"RTN","ONCACDU2",122,0)
 .S X=$$SUB164^ONCACDU2(IEN,SUBFLD,ENTRY)
"RTN","ONCACDU2",123,0)
 I FIELD=.04,$L(X)=1 S X="0"_X
"RTN","ONCACDU2",124,0)
 Q X
"RTN","ONCACDU2",125,0)
 ;
"RTN","ONCACDU2",126,0)
SUB164(IEN,SUBFLD,ENTRY) ;ICDO TOPOGRAPHY (164)
"RTN","ONCACDU2",127,0)
 N X,TOP1,TOP2
"RTN","ONCACDU2",128,0)
 S X=""
"RTN","ONCACDU2",129,0)
 S TOP1=$$GET1^DIQ(165.5,IEN,20,"I") D:TOP1'=""
"RTN","ONCACDU2",130,0)
 .S TOP2=$$GET1^DIQ(164,TOP1,107,"I")
"RTN","ONCACDU2",131,0)
 .I (TOP1=67420)!(TOP1=67421)!(TOP1=67423)!(TOP1=67424)!($E(TOP1,3,4)=76)!(TOP1=67809),($G(FIELD)=58.6)!($G(FIELD)=58.7) S TOP2=67420
"RTN","ONCACDU2",132,0)
 .I ($G(FIELD)=58.2)!($G(FIELD)=50.2)!($G(FIELD)=138)!($G(FIELD)=138.1)!($G(FIELD)=139)!($G(FIELD)=139.1)!($G(FIELD)=74)!($G(FIELD)=23),($E(TOP1,3,4)=76)!(TOP1=67809)!(TOP1=67420)!(TOP1=67421)!(TOP1=67423)!(TOP1=67424) S TOP2=67141
"RTN","ONCACDU2",133,0)
 .;I $$HEMATO^ONCFUNC(IEN),TOP1=67179 S TOP2=67420
"RTN","ONCACDU2",134,0)
 .I $$HEMATO^ONCFUNC(IEN) S TOP2=67420  ;all Hematopoeitic
"RTN","ONCACDU2",135,0)
 .I ($G(FIELD)=58.2)!($G(FIELD)=50.2),TOP1=67422 S TOP2=67770
"RTN","ONCACDU2",136,0)
 .I $G(SUBFLD)="SUA",($E(TOP1,3,4)=77) S TOP2=67141
"RTN","ONCACDU2",137,0)
 .D:TOP2'=""
"RTN","ONCACDU2",138,0)
 ..S X=$P($G(^ONCO(164,TOP2,SUBFLD,ENTRY,0)),U,2)
"RTN","ONCACDU2",139,0)
 Q X
"RTN","ONCACDU2",140,0)
 ;
"RTN","ONCACDU2",141,0)
RXPRI(IEN,FIELD,SUBFLD) ;
"RTN","ONCACDU2",142,0)
 ;RX Hosp--Surg Prim Site    [670] 457-458
"RTN","ONCACDU2",143,0)
 ;RX Hosp--Surg Site 98-02   [746] 478-479
"RTN","ONCACDU2",144,0)
 ;RX Hosp--Scope Reg 98-02   [747] 480-480
"RTN","ONCACDU2",145,0)
 ;RX Hosp--Surg Oth 98-02    [748] 481-481
"RTN","ONCACDU2",146,0)
 ;RX Summ--Surg Prim Site   [1290] 859-860
"RTN","ONCACDU2",147,0)
 ;RX Summ--Surgical Approch [1310] 865-865
"RTN","ONCACDU2",148,0)
 ;RX Summ--Reconstruct 1st  [1330] 867-867
"RTN","ONCACDU2",149,0)
 ;RX Summ--Surg Site 98-02  [1646] 939-940
"RTN","ONCACDU2",150,0)
 ;RX Summ--Scope Reg 98-02  [1647] 941-941
"RTN","ONCACDU2",151,0)
 ;RX Summ--Surg Oth 98-02   [1648] 942-942
"RTN","ONCACDU2",152,0)
 N X,ENTRY
"RTN","ONCACDU2",153,0)
 S X=""
"RTN","ONCACDU2",154,0)
 S TOP1=$$GET1^DIQ(165.5,IEN,20,"I")
"RTN","ONCACDU2",155,0)
 S ENTRY=$$GET1^DIQ(165.5,IEN,FIELD,"I") D:ENTRY'=""
"RTN","ONCACDU2",156,0)
 .I (TOP1=67420)!(TOP1=67421)!(TOP1=67423)!(TOP1=67424)!($E(TOP1,3,4)=76)!(TOP1=67809),($G(FIELD)=58.6)!($G(FIELD)=58.7) S X=$$SUB164^ONCACDU2(IEN,SUBFLD,ENTRY) Q
"RTN","ONCACDU2",157,0)
 .I $$GET1^DIQ(165.5,IEN,3,"I")<2980000,(FIELD=23)!(FIELD=74)!(FIELD=50.2)!(FIELD=58.2)!(FIELD=58.6)!(FIELD=58.7) S X=$S(FIELD=23:$$GET1^DIQ(160.4,ENTRY,.01,"I"),FIELD=74:$$GET1^DIQ(160.6,ENTRY,.01,"I"),1:ENTRY) Q
"RTN","ONCACDU2",158,0)
 .S X=$$SUB164^ONCACDU2(IEN,SUBFLD,ENTRY)
"RTN","ONCACDU2",159,0)
 Q X
"RTN","ONCACDU2",160,0)
 ;
"RTN","ONCACDU2",161,0)
FNODE(ACD160,FIELD) ;FOLLOW-UP (160,400)
"RTN","ONCACDU2",162,0)
 ;Date of Last Contact     [1750] 1294-1301
"RTN","ONCACDU2",163,0)
 ;Vital Status             [1760] 1302-1302
"RTN","ONCACDU2",164,0)
 ;Quality of Survival      [1780] 1304-1304
"RTN","ONCACDU2",165,0)
 ;Follow-Up Source         [1790] 1305-1305
"RTN","ONCACDU2",166,0)
 ;Next Follow-Up Source    [1800] 1306-1306
"RTN","ONCACDU2",167,0)
 ;Unusual Follow-Up Method [1850] 1341-1341
"RTN","ONCACDU2",168,0)
 ;Following Registry       [2440] 2475-2484
"RTN","ONCACDU2",169,0)
 N FNODE,X
"RTN","ONCACDU2",170,0)
 S FNODE=$$LAST(ACD160),X=""
"RTN","ONCACDU2",171,0)
 I FNODE'="" D
"RTN","ONCACDU2",172,0)
 .N IENS
"RTN","ONCACDU2",173,0)
 .S IENS=FNODE_","_ACD160_","
"RTN","ONCACDU2",174,0)
 .S X=$$GET1^DIQ(160.04,IENS,FIELD,"I")
"RTN","ONCACDU2",175,0)
 Q X
"RTN","ONCACDU2",176,0)
 ;
"RTN","ONCACDU2",177,0)
LAST(ACD160) ;Get last FOLLOW-UP(160,400)
"RTN","ONCACDU2",178,0)
 N DLC
"RTN","ONCACDU2",179,0)
 S X="",DLC=0
"RTN","ONCACDU2",180,0)
 S DLC=$O(^ONCO(160,ACD160,"F","AA",DLC))
"RTN","ONCACDU2",181,0)
 S:DLC'="" X=$O(^ONCO(160,ACD160,"F","AA",DLC,0))
"RTN","ONCACDU2",182,0)
 I X'>0 S X=""
"RTN","ONCACDU2",183,0)
 Q X
"RTN","ONCACDU2",184,0)
 ;
"RTN","ONCACDU2",185,0)
FCNODE(ACD160,FIELD,IE) ;FOLLOW-UP CONTACT (160,420)
"RTN","ONCACDU2",186,0)
 ;Follow-Up Contact--City  [1842] 1357-1376
"RTN","ONCACDU2",187,0)
 ;Follow-Up Contact--State [1844] 1377-1378
"RTN","ONCACDU2",188,0)
 ;Follow-Up Contact--Postal[1846] 1379-1387
"RTN","ONCACDU2",189,0)
 ;Follow-Up Contact--Name  [2394] 2284-2313
"RTN","ONCACDU2",190,0)
 ;Follow-Up Contact--No&St [2392] 2314-2353
"RTN","ONCACDU2",191,0)
 ;Follow-Up Contact--Suppl [2393] 2354-2393
"RTN","ONCACDU2",192,0)
 N CONTACT,FCNODE,X
"RTN","ONCACDU2",193,0)
 S X=""
"RTN","ONCACDU2",194,0)
 S FCNODE=$O(^ONCO(160,ACD160,"C","B"),-1)
"RTN","ONCACDU2",195,0)
 I FCNODE'="" D
"RTN","ONCACDU2",196,0)
 .N IENS
"RTN","ONCACDU2",197,0)
 .S IENS=FCNODE_","_ACD160_","
"RTN","ONCACDU2",198,0)
 .S CONTACT=$$GET1^DIQ(160.03,IENS,1,"I")
"RTN","ONCACDU2",199,0)
 I $G(CONTACT) S X=$$GET1^DIQ(165,CONTACT,FIELD,IE)
"RTN","ONCACDU2",200,0)
 Q X
"RTN","ONCACDU2",201,0)
 ;
"RTN","ONCACDU2",202,0)
CS(IEN) ;Cancer Status [1770] 1303-1303
"RTN","ONCACDU2",203,0)
 N X,Z,FNODE
"RTN","ONCACDU2",204,0)
 S FNODE=0
"RTN","ONCACDU2",205,0)
 S X=""
"RTN","ONCACDU2",206,0)
 S FNODE=$O(^ONCO(165.5,IEN,"TS",FNODE))
"RTN","ONCACDU2",207,0)
 I FNODE>0 D
"RTN","ONCACDU2",208,0)
 .N IENS,PT
"RTN","ONCACDU2",209,0)
 .S FNODE=$O(^ONCO(165.5,IEN,"TS"," "),-1)
"RTN","ONCACDU2",210,0)
 .Q:FNODE<1
"RTN","ONCACDU2",211,0)
 .S IENS=FNODE_","_IEN_","
"RTN","ONCACDU2",212,0)
 .S PT=$$GET1^DIQ(165.573,IENS,.02,"I")
"RTN","ONCACDU2",213,0)
 .Q:PT<1
"RTN","ONCACDU2",214,0)
 .S X=$$GET1^DIQ(164.42,PT,1,"I")
"RTN","ONCACDU2",215,0)
 Q X
"RTN","ONCACDU2",216,0)
 ;
"RTN","ONCACDU2",217,0)
CCTST(ACD160) ;
"RTN","ONCACDU2",218,0)
 ;Addr Current--City      [1810] 1307-1326
"RTN","ONCACDU2",219,0)
 N D0,PT,X
"RTN","ONCACDU2",220,0)
 S D0=ACD160
"RTN","ONCACDU2",221,0)
 S X="" S PT=$P($G(^ONCO(160,D0,0)),";",1)
"RTN","ONCACDU2",222,0)
 I $$DPTLRT^ONCOES(D0)="LRT" S X=$$GET1^DIQ(67,PT,.114,"E")
"RTN","ONCACDU2",223,0)
 I $$DPTLRT^ONCOES(D0)="DPT" S X=$$GET1^DIQ(2,PT,.114,"E")
"RTN","ONCACDU2",224,0)
 S X=$$STRIP^XLFSTR(X,"!""""#$%&'()*+,-./:;<=>?[>]^_\{|}~`")
"RTN","ONCACDU2",225,0)
 Q X
"RTN","ONCACDU2",226,0)
 ;
"RTN","ONCACDU2",227,0)
CSTST(ACD160) ;
"RTN","ONCACDU2",228,0)
 ;Addr Current--State [1820] 1327-1328
"RTN","ONCACDU2",229,0)
 N ONCX,XPT,XX,PT
"RTN","ONCACDU2",230,0)
 S (XPT,XX)=""
"RTN","ONCACDU2",231,0)
 S ITEM=1820 D CHKADDS^ONCACDU1 I ONCADDF'="" Q ONCADDF  ;check override
"RTN","ONCACDU2",232,0)
 S ONCX=$$GET1^DIQ(160,ACD160,.115,"E")
"RTN","ONCACDU2",233,0)
 ;S X=$S(X="CANAD":"CD",X="EU":"YY",X="MX":"XX",X="NF":"NL",X="PH":"XX",X="UN":"ZZ",1:X)
"RTN","ONCACDU2",234,0)
 I ONCX="" S PT=$P($G(^ONCO(160,ACD160,0)),";",1) D
"RTN","ONCACDU2",235,0)
 .I $$DPTLRT(ACD160)="LRT" S XPT=$$GET1^DIQ(67,PT,.115,"I") S:$G(XPT) XX=$$GET1^DIQ(5,XPT,1,"E")
"RTN","ONCACDU2",236,0)
 .I $$DPTLRT(ACD160)="DPT" S XPT=$$GET1^DIQ(2,PT,.1173,"I") S:$G(XPT) XX=$$GET1^DIQ(779.004,XPT,.01,"E") D:XPT=""
"RTN","ONCACDU2",237,0)
 ..S XPT=$$GET1^DIQ(2,PT,.115,"I") S:$G(XPT) XX=$$GET1^DIQ(5,XPT,1,"E")
"RTN","ONCACDU2",238,0)
 I (ONCX=""),(XX'=""),(XX'="USA"),(XX'="CAN") S ONCX="XX"
"RTN","ONCACDU2",239,0)
 I (ONCX=""),(XX="") S ONCX="YY"
"RTN","ONCACDU2",240,0)
 I (ONCX=""),(XX="USA") S ONCX="US"
"RTN","ONCACDU2",241,0)
 I (ONCX=""),(XX="CAN") S ONCX="CD"
"RTN","ONCACDU2",242,0)
 I ONCX="UN" S ONCX="ZZ"
"RTN","ONCACDU2",243,0)
 Q ONCX
"RTN","ONCACDU2",244,0)
 ;
"RTN","ONCACDU2",245,0)
ADDCTRY(IEN,ITEM) ;
"RTN","ONCACDU2",246,0)
 ;Addr at DX--Country [102] 436-438
"RTN","ONCACDU2",247,0)
 ;Addr Current--Country [1832] 439-441
"RTN","ONCACDU2",248,0)
 ;Followup Contact--Country [1847] 447-449
"RTN","ONCACDU2",249,0)
 ; Value derived from:
"RTN","ONCACDU2",250,0)
 ;    ITEM #102 - STATE AT DX (#165.5,16) pointer to File #5
"RTN","ONCACDU2",251,0)
 ;    ITEM #1832 - COUNTRY FILE (#2,.1173) pointer to File #779.004 or State File (#2,.115) to File #5
"RTN","ONCACDU2",252,0)
 ;    ITEM #1847 - ZIP CODE (#165,.119 --> #5.11,3) pointer to File #5
"RTN","ONCACDU2",253,0)
 ;
"RTN","ONCACDU2",254,0)
 ; IF VALUE IS NOT FILLED IN OR NOT FOUND, DEFAULT TO "ZZU" (UNKNOWN)
"RTN","ONCACDU2",255,0)
 ;
"RTN","ONCACDU2",256,0)
 N XX
"RTN","ONCACDU2",257,0)
 D CHKADDS^ONCACDU1 I ONCADDF'="" Q ONCADDF  ;check override
"RTN","ONCACDU2",258,0)
 S ACDANS="USA"
"RTN","ONCACDU2",259,0)
 I ITEM=102 S XX=$S($$GET1^DIQ(165.5,IEN,16,"I")'="":$$GET1^DIQ(5,$$GET1^DIQ(165.5,IEN,16,"I"),1,"I"),1:"")
"RTN","ONCACDU2",260,0)
 I ITEM=1832 D
"RTN","ONCACDU2",261,0)
 .S (X,XX)="" S PT=$P($G(^ONCO(160,ACD160,0)),";",1)
"RTN","ONCACDU2",262,0)
 .I $$DPTLRT(ACD160)="LRT" S X=$$GET1^DIQ(67,PT,.115,"I") S:$G(X) XX=$$GET1^DIQ(5,X,1,"E")
"RTN","ONCACDU2",263,0)
 .I $$DPTLRT(ACD160)="DPT" S X=$$GET1^DIQ(2,PT,.1173,"I") S:$G(X) (XX,ACDANS)=$$GET1^DIQ(779.004,X,.01,"E")
"RTN","ONCACDU2",264,0)
 .S X=$$GET1^DIQ(2,PT,.115,"I") S:$G(X) XX=$$GET1^DIQ(5,X,1,"E")
"RTN","ONCACDU2",265,0)
 I ITEM=1847 S XX="",VICPNT=$$FCNODE^ONCACDU2(ACD160,.119,"I") S:$G(VICPNT) STATE=$P($G(^VIC(5.11,VICPNT,0)),U,4) S:$G(STATE)'="" XX=$$GET1^DIQ(5,STATE,1,"I") K STATE,VICPNT
"RTN","ONCACDU2",266,0)
 I XX="QC"!(XX="AB")!(XX="ZZMB")!(XX="NB")!(XX="NF")!(XX="NS")!(XX="NT")!(XX="ON")!(XX="PE")!(XX="SK")!(XX="YT")!(XX="CANAD")!(XX="MB")!(XX="NU")!(XX="BC") S ACDANS="CAN"
"RTN","ONCACDU2",267,0)
 I XX="FM" S ACDANS="FSM"
"RTN","ONCACDU2",268,0)
 I XX="GU" S ACDANS="GUM"
"RTN","ONCACDU2",269,0)
 I XX="MH" S ACDANS="MHL"
"RTN","ONCACDU2",270,0)
 I XX="MP" S ACDANS="MNP"
"RTN","ONCACDU2",271,0)
 I XX="PW" S ACDANS="PWL"
"RTN","ONCACDU2",272,0)
 I XX="UM" S ACDANS="UMI"
"RTN","ONCACDU2",273,0)
 I XX="FG" S ACDANS="ZZX"
"RTN","ONCACDU2",274,0)
 I XX="MX" S ACDANS="MEX"
"RTN","ONCACDU2",275,0)
 I XX="EU" S ACDANS="ZZE"
"RTN","ONCACDU2",276,0)
 I XX="PH" S ACDANS="PHL"
"RTN","ONCACDU2",277,0)
 I XX="AS" S ACDANS="ASM"
"RTN","ONCACDU2",278,0)
 I XX="PR" S ACDANS="PRI"
"RTN","ONCACDU2",279,0)
 I XX="VI" S ACDANS="VIR"
"RTN","ONCACDU2",280,0)
 I XX="ZZEQ" S ACDANS="KIR"
"RTN","ONCACDU2",281,0)
 I XX="ZZIQ" S ACDANS="ZZP"
"RTN","ONCACDU2",282,0)
 I XX="ZZYQ" S ACDANS="JPN"
"RTN","ONCACDU2",283,0)
 I XX="UN"!(XX="") S ACDANS="ZZU"
"RTN","ONCACDU2",284,0)
 Q ACDANS
"RTN","ONCACDU2",285,0)
 ;
"RTN","ONCACDU2",286,0)
DPTLRT(ACD160) ;check if pt from Patient or Referral file
"RTN","ONCACDU2",287,0)
 N DPTLRT
"RTN","ONCACDU2",288,0)
 S DPTLRT=""
"RTN","ONCACDU2",289,0)
 I $P($G(^ONCO(160,ACD160,0)),U,1)["LRT" S DPTLRT="LRT"
"RTN","ONCACDU2",290,0)
 I $P($G(^ONCO(160,ACD160,0)),U,1)["DPT" S DPTLRT="DPT"
"RTN","ONCACDU2",291,0)
 Q DPTLRT
"RTN","ONCACDU2",292,0)
 ;
"RTN","ONCACDU2",293,0)
ICD(ICD) ;ICD Code
"RTN","ONCACDU2",294,0)
 ;Use ICD API (IA #3990) instead of direct global read.
"RTN","ONCACDU2",295,0)
 N X
"RTN","ONCACDU2",296,0)
 S ICD=$S(ICD'="":$$GET1^DIQ(80,ICD,.01),1:"0000")
"RTN","ONCACDU2",297,0)
 I ICD["." S ICD=$P(ICD,".")_$P(ICD,".",2)
"RTN","ONCACDU2",298,0)
 S:$L(ICD)=3 ICD=ICD_9
"RTN","ONCACDU2",299,0)
 S:$L(ICD)<4 ICD=$E("0000",1,4-$L(ICD))_ICD
"RTN","ONCACDU2",300,0)
 S:$L(ICD)>4 ICD=$E(ICD,1,4)
"RTN","ONCACDU2",301,0)
 I $E(ICD,4)="X"!($E(ICD,4)="-") S ICD=$E(ICD,1,3)_9
"RTN","ONCACDU2",302,0)
 Q ICD
"RTN","ONCACDU2",303,0)
 ;
"RTN","ONCACDU2",304,0)
ICDR(ICD) ;ICD Revision Number [1920] 1392-1392
"RTN","ONCACDU2",305,0)
 N ICDR
"RTN","ONCACDU2",306,0)
 S ICD=$$ICD(ICD)
"RTN","ONCACDU2",307,0)
 S ICDR=$S(ICD="    ":0,1:$$GET1^DIQ(160,ACD160,20,"I"))
"RTN","ONCACDU2",308,0)
 S:ICDR="" ICDR=0
"RTN","ONCACDU2",309,0)
 Q ICDR
"RTN","ONCACDU2",310,0)
 ;
"RTN","ONCACDU2",311,0)
PPAY(IEN) ;PRIMARY PAYER AT DX (165.5,18)
"RTN","ONCACDU2",312,0)
 N X
"RTN","ONCACDU2",313,0)
 S X=$$GET1^DIQ(165.5,IEN,18,"I")
"RTN","ONCACDU2",314,0)
 S X=$$GET1^DIQ(160.3,$S(X'="":X,1:99),.01,"I")
"RTN","ONCACDU2",315,0)
 S X=$S(X<42:X,X>47:X,1:X-1)
"RTN","ONCACDU2",316,0)
 Q X
"RTN","ONCACDU2",317,0)
 ;
"RTN","ONCACDU2",318,0)
DS(IEN) ;RX Date--Surgery [1200] 755-762
"RTN","ONCACDU2",319,0)
 N X
"RTN","ONCACDU2",320,0)
 S X=$$GET1^DIQ(165.5,IEN,50,"I") I X'="" S SURGDT(X)=""
"RTN","ONCACDU2",321,0)
 S X=$$GET1^DIQ(165.5,IEN,138.2,"I") I X'="" S SURGDT(X)=""
"RTN","ONCACDU2",322,0)
 S X=$$GET1^DIQ(165.5,IEN,139.2,"I") I X'="" S SURGDT(X)=""
"RTN","ONCACDU2",323,0)
 S SURGDT=$O(SURGDT(0))
"RTN","ONCACDU2",324,0)
 S X=$$DATE^ONCACDU1(SURGDT)
"RTN","ONCACDU2",325,0)
 K SURGDT
"RTN","ONCACDU2",326,0)
 Q X
"RTN","ONCACDU2",327,0)
STRIP ;Replace punctuation marks with spaces
"RTN","ONCACDU2",328,0)
 S ACDANS=$TR(ACDANS,"!""""@#$%&'()*+,-./:;<=>?[>]^_\{|}~`","                                    ")
"RTN","ONCACDU2",329,0)
 S ACDANS=$$TRIM^XLFSTR(ACDANS)
"RTN","ONCACDU2",330,0)
 Q
"RTN","ONCACDU2",331,0)
 ;
"RTN","ONCACDU2",332,0)
STRIP1 ;Strip out punctuation marks
"RTN","ONCACDU2",333,0)
 S ACDANS=$$STRIP^XLFSTR(ACDANS,"!""""#$%&'()*+,-./:;<=>?[>]^_\{|}~`")
"RTN","ONCACDU2",334,0)
 Q
"RTN","ONCACDU2",335,0)
 ;
"RTN","ONCACDU2",336,0)
STNUM ;get 3-digit state number for state extract. reporting facility must be the same w/ 160.1 entry.
"RTN","ONCACDU2",337,0)
 ;if no 3-digit number, use the initial from file #200
"RTN","ONCACDU2",338,0)
 N ONC3DIG,ONC1601,ONC3IEN,ONC16019
"RTN","ONCACDU2",339,0)
 S ONC3DIG=""
"RTN","ONCACDU2",340,0)
 S ONC16019=$$GET1^DIQ(165.5,IEN,.03,"I"),ONC1601=0
"RTN","ONCACDU2",341,0)
 F  S ONC1601=$O(^ONCO(160.1,"D",ACDANS,ONC1601)) Q:ONC1601'>0  D
"RTN","ONCACDU2",342,0)
 .I $D(^ONCO(160.1,ONC1601,1)),$P(^(1),U,4)'=ONC16019 Q
"RTN","ONCACDU2",343,0)
 .S ONC3IEN=$O(^ONCO(160.1,"D",ACDANS,ONC1601,0)) S:$G(ONC3IEN) ONC3DIG=$P(^ONCO(160.1,ONC1601,"REG",ONC3IEN,0),U,2)
"RTN","ONCACDU2",344,0)
 S:ONC3DIG="" ACDANS=$E($$GET1^DIQ(200,ACDANS,1,"I"),1,3)
"RTN","ONCACDU2",345,0)
 I ONC3DIG'="" S ACDANS=$S($L(ONC3DIG)=1:"00"_ONC3DIG,$L(ONC3DIG)=2:"0"_ONC3DIG,1:ONC3DIG)
"RTN","ONCACDU2",346,0)
 Q
"RTN","ONCACDU2",347,0)
 ;
"RTN","ONCACDU2",348,0)
CLEANUP ;Cleanup
"RTN","ONCACDU2",349,0)
 K EXTRACT
"RTN","ONCATF1")
0^30^B52321975
"RTN","ONCATF1",1,0)
ONCATF1 ;Hines OIFO/RTK - Treatment AT THIS FACILITY stuffing (cont.); 06/23/10
"RTN","ONCATF1",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCATF1",3,0)
 ;
"RTN","ONCATF1",4,0)
RAD ;Radiation @fac
"RTN","ONCATF1",5,0)
 N COC
"RTN","ONCATF1",6,0)
 S RAUP=1 D RFNR^ONCATF1
"RTN","ONCATF1",7,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF1",8,0)
 S $P(^ONCO(165.5,D0,3.1),U,12)=$P($G(^ONCO(165.5,D0,3)),U,6)
"RTN","ONCATF1",9,0)
 Q
"RTN","ONCATF1",10,0)
 ;
"RTN","ONCATF1",11,0)
RADDT ;Radiation @fac date
"RTN","ONCATF1",12,0)
 N COC
"RTN","ONCATF1",13,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF1",14,0)
 S $P(^ONCO(165.5,D0,3.1),U,13)=$P($G(^ONCO(165.5,D0,3)),U,4)
"RTN","ONCATF1",15,0)
 Q
"RTN","ONCATF1",16,0)
 ;
"RTN","ONCATF1",17,0)
DSPRAD ;Display Radiation @fac fields
"RTN","ONCATF1",18,0)
 N COC
"RTN","ONCATF1",19,0)
 D CHKCOC I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) D  K TXNO,TXUNK,TXNUL S Y="@411" Q
"RTN","ONCATF1",20,0)
 .S NTX=1 W ! D RADATF^ONCNTX1 K NTX
"RTN","ONCATF1",21,0)
 .I $G(DRATF)=1 K DRATF,TXNUL Q
"RTN","ONCATF1",22,0)
 I $G(DRATF)=1 K DRATF,TXNUL S Y="@411" Q
"RTN","ONCATF1",23,0)
 I COC'=37 D  Q
"RTN","ONCATF1",24,0)
 .I $G(TXNO)=1 S NTX=1 W ! D RADATF^ONCNTX1 K NTX,TXNO S Y="@411" Q
"RTN","ONCATF1",25,0)
 .I $G(TXUNK)=1 S NTX=1 W ! D RADATF^ONCUTX1 K NTX,TXUNK S Y="@411" Q
"RTN","ONCATF1",26,0)
 .I $G(TXNUL)=1 K TXNUL S Y="@411" Q
"RTN","ONCATF1",27,0)
 N DI,DIC,DA,DR,DIQ,ONC
"RTN","ONCATF1",28,0)
 S DIC="^ONCO(165.5,",DA=D0,DIQ="ONC(",DIQ(0)="E",DR="51.4;51.5"
"RTN","ONCATF1",29,0)
 D EN^DIQ1
"RTN","ONCATF1",30,0)
 W !!,$P(^DD(165.5,51.4,0),U,1),"............: "_$E(ONC(165.5,DA,51.4,"E"),1,47)
"RTN","ONCATF1",31,0)
 W !,$P(^DD(165.5,51.5,0),U,1),".......: "_ONC(165.5,DA,51.5,"E")
"RTN","ONCATF1",32,0)
 K TXNO,TXUNK,TXNUL S Y="@411" Q
"RTN","ONCATF1",33,0)
 ;
"RTN","ONCATF1",34,0)
CHEM ;Chemotherapy @fac
"RTN","ONCATF1",35,0)
 N COC
"RTN","ONCATF1",36,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF1",37,0)
 S $P(^ONCO(165.5,D0,3.1),U,14)=$P($G(^ONCO(165.5,D0,3)),U,13)
"RTN","ONCATF1",38,0)
 Q
"RTN","ONCATF1",39,0)
 ;
"RTN","ONCATF1",40,0)
CHEMDT ;Chemotherapy @fac date
"RTN","ONCATF1",41,0)
 N COC
"RTN","ONCATF1",42,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF1",43,0)
 S $P(^ONCO(165.5,D0,3.1),U,15)=$P($G(^ONCO(165.5,D0,3)),U,11)
"RTN","ONCATF1",44,0)
 Q
"RTN","ONCATF1",45,0)
 ;
"RTN","ONCATF1",46,0)
DSPCHEM ;Display Chemotherapy @fac fields
"RTN","ONCATF1",47,0)
 N COC
"RTN","ONCATF1",48,0)
 D CHKCOC I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) D  K TXNO,TXUNK,TXNUL S Y="@415" Q
"RTN","ONCATF1",49,0)
 .S NTX=1 W ! D CHEMATF^ONCNTX1 K NTX
"RTN","ONCATF1",50,0)
 .I $G(DCATF)=1 K DCATF,TXNUL Q
"RTN","ONCATF1",51,0)
 I $G(DCATF)=1 K DCATF,TXNUL S Y="@415" Q
"RTN","ONCATF1",52,0)
 I COC'=37 D  Q
"RTN","ONCATF1",53,0)
 .I $G(TXNO)=1 S NTX=1 W ! D CHEMATF^ONCNTX1 K NTX,TXNO S Y="@415" Q
"RTN","ONCATF1",54,0)
 .I $G(TXUNK)=1 S NTX=1 W ! D CHEMATF^ONCUTX1 K NTX,TXUNK S Y="@415" Q
"RTN","ONCATF1",55,0)
 .I $G(TXNUL)=1 K TXNUL S Y="@415" Q
"RTN","ONCATF1",56,0)
 K DIQ,ONC
"RTN","ONCATF1",57,0)
 S DIC="^ONCO(165.5,",DA=DA,DIQ="ONC(",DIQ(0)="E",DR="53.3;53.4"
"RTN","ONCATF1",58,0)
 D EN^DIQ1
"RTN","ONCATF1",59,0)
 W !!,$P(^DD(165.5,53.3,0),U,1),"........: "_$E(ONC(165.5,DA,53.3,"E"),1,47)
"RTN","ONCATF1",60,0)
 W !,$P(^DD(165.5,53.4,0),U,1),"...: "_ONC(165.5,DA,53.4,"E")
"RTN","ONCATF1",61,0)
 K TXNO,TXUNK,TXNUL S Y="@415" Q
"RTN","ONCATF1",62,0)
 ;
"RTN","ONCATF1",63,0)
HT ;Hormone therapy @fac
"RTN","ONCATF1",64,0)
 N COC
"RTN","ONCATF1",65,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF1",66,0)
 S $P(^ONCO(165.5,D0,3.1),U,16)=$P($G(^ONCO(165.5,D0,3)),U,16)
"RTN","ONCATF1",67,0)
 Q
"RTN","ONCATF1",68,0)
 ;
"RTN","ONCATF1",69,0)
HTDT ;Hormone therapy @fac date
"RTN","ONCATF1",70,0)
 N COC
"RTN","ONCATF1",71,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF1",72,0)
 S $P(^ONCO(165.5,D0,3.1),U,17)=$P($G(^ONCO(165.5,D0,3)),U,14)
"RTN","ONCATF1",73,0)
 Q
"RTN","ONCATF1",74,0)
 ;
"RTN","ONCATF1",75,0)
DSPHT ;Display Hormone Therapy @fac fields
"RTN","ONCATF1",76,0)
 N COC
"RTN","ONCATF1",77,0)
 D CHKCOC I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) D  K TXNO,TXUNK,TXNUL S Y="@418" Q
"RTN","ONCATF1",78,0)
 .S NTX=1 W ! D HTATF^ONCNTX1 K NTX
"RTN","ONCATF1",79,0)
 .I $G(DHATF)=1 K DHATF,TXNUL Q
"RTN","ONCATF1",80,0)
 I $G(DHATF)=1 K DHATF,TXNUL S Y="@418" Q
"RTN","ONCATF1",81,0)
 I COC'=37 D  Q
"RTN","ONCATF1",82,0)
 .I $G(TXNO)=1 S NTX=1 W ! D HTATF^ONCNTX1 K NTX,TXNO S Y="@418" Q
"RTN","ONCATF1",83,0)
 .I $G(TXUNK)=1 S NTX=1 W ! D HTATF^ONCUTX1 K NTX,TXUNK S Y="@418" Q
"RTN","ONCATF1",84,0)
 .I $G(TXNUL)=1 K TXNUL S Y="@418" Q
"RTN","ONCATF1",85,0)
 K DIQ,ONC
"RTN","ONCATF1",86,0)
 S DIC="^ONCO(165.5,",DA=DA,DIQ="ONC(",DIQ(0)="E",DR="54.3;54.4"
"RTN","ONCATF1",87,0)
 D EN^DIQ1
"RTN","ONCATF1",88,0)
 W !!,$P(^DD(165.5,54.3,0),U,1),".....: "_$E(ONC(165.5,DA,54.3,"E"),1,47)
"RTN","ONCATF1",89,0)
 W !,$P(^DD(165.5,54.4,0),U,1),": "_ONC(165.5,DA,54.4,"E")
"RTN","ONCATF1",90,0)
 K TXNO,TXUNK,TXNUL S Y="@418"
"RTN","ONCATF1",91,0)
 Q
"RTN","ONCATF1",92,0)
 ;
"RTN","ONCATF1",93,0)
IMM ;Immunotherapy @fac
"RTN","ONCATF1",94,0)
 N COC
"RTN","ONCATF1",95,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF1",96,0)
 S $P(^ONCO(165.5,D0,3.1),U,18)=$P($G(^ONCO(165.5,D0,3)),U,19)
"RTN","ONCATF1",97,0)
 Q
"RTN","ONCATF1",98,0)
 ;
"RTN","ONCATF1",99,0)
IMMDT ;Immunotherapy @fac date
"RTN","ONCATF1",100,0)
 N COC
"RTN","ONCATF1",101,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF1",102,0)
 S $P(^ONCO(165.5,D0,3.1),U,19)=$P($G(^ONCO(165.5,D0,3)),U,17)
"RTN","ONCATF1",103,0)
 Q
"RTN","ONCATF1",104,0)
 ;
"RTN","ONCATF1",105,0)
DSPIMM ;Display Immunotherapy @fac fields
"RTN","ONCATF1",106,0)
 N COC
"RTN","ONCATF1",107,0)
 D CHKCOC I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) D  K TXNO,TXUNK,TXNUL S Y="@421" Q
"RTN","ONCATF1",108,0)
 .S NTX=1 W ! D IMMATF^ONCNTX1 K NTX
"RTN","ONCATF1",109,0)
 .I $G(DIATF)=1 K DIATF,TXNUL Q
"RTN","ONCATF1",110,0)
 I $G(DIATF)=1 K DIATF,TXNUL S Y="@421" Q
"RTN","ONCATF1",111,0)
 I COC'=37 D  Q
"RTN","ONCATF1",112,0)
 .I $G(TXNO)=1 S NTX=1 W ! D IMMATF^ONCNTX1 K NTX,TXNO S Y="@421" Q
"RTN","ONCATF1",113,0)
 .I $G(TXUNK)=1 S NTX=1 W ! D IMMATF^ONCUTX1 K NTX,TXUNK S Y="@421" Q
"RTN","ONCATF1",114,0)
 .I $G(TXNUL)=1 K TXNUL S Y="@421" Q
"RTN","ONCATF1",115,0)
 K DIQ,ONC
"RTN","ONCATF1",116,0)
 S DIC="^ONCO(165.5,",DA=DA,DIQ="ONC(",DIQ(0)="E",DR="55.3;55.4"
"RTN","ONCATF1",117,0)
 D EN^DIQ1
"RTN","ONCATF1",118,0)
 W !!,$P(^DD(165.5,55.3,0),U,1),".......: "_ONC(165.5,DA,55.3,"E")
"RTN","ONCATF1",119,0)
 W !,$P(^DD(165.5,55.4,0),U,1),"..: "_ONC(165.5,DA,55.4,"E")
"RTN","ONCATF1",120,0)
 K TXNO,TXUNK,TXNUL S Y="@421" Q
"RTN","ONCATF1",121,0)
 ;
"RTN","ONCATF1",122,0)
HTEP ;Hema Trans/Endocrine Proc @fac
"RTN","ONCATF1",123,0)
 N COC
"RTN","ONCATF1",124,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF1",125,0)
 S $P(^ONCO(165.5,D0,3.2),U,2)=$P($G(^ONCO(165.5,D0,3.1)),U,36)
"RTN","ONCATF1",126,0)
 Q
"RTN","ONCATF1",127,0)
 ;
"RTN","ONCATF1",128,0)
HTEPDT ;Hema Trans/Endocrine Proc @fac date
"RTN","ONCATF1",129,0)
 N COC
"RTN","ONCATF1",130,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF1",131,0)
 S $P(^ONCO(165.5,D0,3.2),U,3)=$P($G(^ONCO(165.5,D0,3.1)),U,35)
"RTN","ONCATF1",132,0)
 Q
"RTN","ONCATF1",133,0)
 ;
"RTN","ONCATF1",134,0)
DSPHTEP ;Display Hema Trans/Endocrine Proc @fac fields
"RTN","ONCATF1",135,0)
 N COC
"RTN","ONCATF1",136,0)
 D CHKCOC I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) D  K TXNO,TXUNK,TXNUL S Y="@42015" Q
"RTN","ONCATF1",137,0)
 .S NTX=1 W ! D HTEPATF^ONCNTX1 K NTX
"RTN","ONCATF1",138,0)
 .I $G(DEATF)=1 K DEATF,TXNUL Q
"RTN","ONCATF1",139,0)
 I $G(DEATF)=1 K DEATF,TXNUL S Y="@42015" Q
"RTN","ONCATF1",140,0)
 I COC'=37 D  Q
"RTN","ONCATF1",141,0)
 .I $G(TXNO)=1 S NTX=1 W ! D HTEPATF^ONCNTX1 K NTX,TXNO S Y="@42015" Q
"RTN","ONCATF1",142,0)
 .I $G(TXUNK)=1 S NTX=1 W ! D HTEPATF^ONCUTX1 K NTX,TXUNK S Y="@42015" Q
"RTN","ONCATF1",143,0)
 .I $G(TXNUL)=1 K TXNUL S Y="@42015" Q
"RTN","ONCATF1",144,0)
 K DIQ,ONC
"RTN","ONCATF1",145,0)
 S DIC="^ONCO(165.5,",DA=DA,DIQ="ONC(",DIQ(0)="E",DR="153.2;153.3"
"RTN","ONCATF1",146,0)
 D EN^DIQ1
"RTN","ONCATF1",147,0)
 W !!,$P(^DD(165.5,153.2,0),U,1),".......: "_ONC(165.5,DA,153.2,"E")
"RTN","ONCATF1",148,0)
 W !,$P(^DD(165.5,153.3,0),U,1),"..: "_ONC(165.5,DA,153.3,"E")
"RTN","ONCATF1",149,0)
 K TXNO,TXUNK,TXNUL S Y="@42015" Q
"RTN","ONCATF1",150,0)
 ;
"RTN","ONCATF1",151,0)
OTH ;Other therapy @fac
"RTN","ONCATF1",152,0)
 N COC
"RTN","ONCATF1",153,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF1",154,0)
 S $P(^ONCO(165.5,D0,3.1),U,20)=$P($G(^ONCO(165.5,D0,3)),U,25)
"RTN","ONCATF1",155,0)
 Q
"RTN","ONCATF1",156,0)
 ;
"RTN","ONCATF1",157,0)
OTHDT ;Other therapy @fac date
"RTN","ONCATF1",158,0)
 N COC
"RTN","ONCATF1",159,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF1",160,0)
 S $P(^ONCO(165.5,D0,3.1),U,21)=$P($G(^ONCO(165.5,D0,3)),U,23)
"RTN","ONCATF1",161,0)
 Q
"RTN","ONCATF1",162,0)
 ;
"RTN","ONCATF1",163,0)
DSPOTH ;Display Other Treatment @fac fields
"RTN","ONCATF1",164,0)
 N COC
"RTN","ONCATF1",165,0)
 D CHKCOC I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) D  K TXNO,TXUNK,TXNUL S Y="@424" Q
"RTN","ONCATF1",166,0)
 .S NTX=1 W ! D OTHATF^ONCNTX1 K NTX
"RTN","ONCATF1",167,0)
 .I $G(DOATF)=1 K DOATF,TXNUL Q
"RTN","ONCATF1",168,0)
 I $G(DOATF)=1 K DOATF,TXNUL S Y="@424" Q
"RTN","ONCATF1",169,0)
 I COC'=37 D  Q
"RTN","ONCATF1",170,0)
 .I $G(TXNO)=1 S NTX=1 W ! D OTHATF^ONCNTX1 K NTX,TXNO S Y="@424" Q
"RTN","ONCATF1",171,0)
 .I $G(TXUNK)=1 S NTX=1 W ! D OTHATF^ONCUTX1 K NTX,TXUNK S Y="@424" Q
"RTN","ONCATF1",172,0)
 .I $G(TXNUL)=1 K TXNUL S Y="@424" Q
"RTN","ONCATF1",173,0)
 K DIQ,ONC
"RTN","ONCATF1",174,0)
 S DIC="^ONCO(165.5,",DA=DA,DIQ="ONC(",DIQ(0)="E",DR="57.3;57.4"
"RTN","ONCATF1",175,0)
 D EN^DIQ1
"RTN","ONCATF1",176,0)
 W !!,$P(^DD(165.5,57.3,0),U,1),".....: "_$E(ONC(165.5,DA,57.3,"E"),1,47)
"RTN","ONCATF1",177,0)
 W !,$P(^DD(165.5,57.4,0),U,1),": "_ONC(165.5,DA,57.4,"E")
"RTN","ONCATF1",178,0)
 K TXNO,TXUNK,TXNUL S Y="@424" Q
"RTN","ONCATF1",179,0)
 ;
"RTN","ONCATF1",180,0)
PP ;Palliative Procedure @fac
"RTN","ONCATF1",181,0)
 N COC
"RTN","ONCATF1",182,0)
 D CHKCOC I COC'=37 Q
"RTN","ONCATF1",183,0)
 S $P(^ONCO(165.5,D0,3.1),U,27)=$P($G(^ONCO(165.5,D0,3.1)),U,26)
"RTN","ONCATF1",184,0)
 Q
"RTN","ONCATF1",185,0)
 ;
"RTN","ONCATF1",186,0)
CHKCOC ;CLASS OF CASE
"RTN","ONCATF1",187,0)
 S COC=$E($$GET1^DIQ(165.5,DA,.04),1,2)
"RTN","ONCATF1",188,0)
 Q
"RTN","ONCATF1",189,0)
 ;
"RTN","ONCATF1",190,0)
RFNS ;If SURGERY OF PRIMARY (F) (165.5,58.6) and SURGERY OF PRIMARY @FAC (F)
"RTN","ONCATF1",191,0)
 ;(165.5,58.7) are anything but 00 or 99, set REASON NO SURGERY OF
"RTN","ONCATF1",192,0)
 ;PRIMARY (165.5,58) to 0 (Surgery performed)
"RTN","ONCATF1",193,0)
 N FLAG1,FLAG2,SGRP,SPS,SPSATF,TPX
"RTN","ONCATF1",194,0)
 S (FLAG1,FLAG2)=1
"RTN","ONCATF1",195,0)
 S SPS=$P($G(^ONCO(165.5,D0,3.1)),U,29) I SPS="" S FLAG1=0
"RTN","ONCATF1",196,0)
 S SPSATF=$P($G(^ONCO(165.5,D0,3.1)),U,30) I SPSATF="" S FLAG2=0
"RTN","ONCATF1",197,0)
 S TPX=$P($G(^ONCO(165.5,D0,2)),U,1) I TPX="" W !!,"PRIMARY SITE is not defined" H 3 S Y="@0" Q
"RTN","ONCATF1",198,0)
 S SGRP=$P($G(^ONCO(164,TPX,0)),U,16)
"RTN","ONCATF1",199,0)
 I SPS'="" I (SPS=1)!(SPS="00")!($G(^ONCO(164,SGRP,"SPS",SPS,0))[99) S FLAG1=0
"RTN","ONCATF1",200,0)
 I SPSATF'="" I (SPSATF=1)!(SPSATF="00")!($G(^ONCO(164,SGRP,"SPS",SPSATF,0))[99) S FLAG2=0
"RTN","ONCATF1",201,0)
 I FLAG1=0,FLAG2=0 Q
"RTN","ONCATF1",202,0)
 S $P(^ONCO(165.5,D0,3),U,26)=0
"RTN","ONCATF1",203,0)
 I $G(SUUP)=1 K SUUP Q
"RTN","ONCATF1",204,0)
 W !,$P($G(^DD(165.5,58,0)),U,1)_"...: Surgery performed"
"RTN","ONCATF1",205,0)
 S Y="@431" Q
"RTN","ONCATF1",206,0)
 ;
"RTN","ONCATF1",207,0)
RFNR ;If RADIATION, set REASON FOR NO RADIATION = 0 (Radiation administered)
"RTN","ONCATF1",208,0)
 N RDTX,RDTXATF
"RTN","ONCATF1",209,0)
 S RDTX=$P($G(^ONCO(165.5,D0,3)),U,6)
"RTN","ONCATF1",210,0)
 S RDTXATF=$P($G(^ONCO(165.5,D0,3.1)),U,12)
"RTN","ONCATF1",211,0)
 I ((RDTX="")!(RDTX=0)!(RDTX=9))&((RDTXATF="")!(RDTXATF=0)!(RDTXATF=9)) Q
"RTN","ONCATF1",212,0)
 S $P(^ONCO(165.5,D0,3),U,35)=0
"RTN","ONCATF1",213,0)
 I $G(RAUP)=1 K RAUP Q
"RTN","ONCATF1",214,0)
 W !,$P($G(^DD(165.5,75,0)),U,1)_"........: Radiation administered"
"RTN","ONCATF1",215,0)
 S Y="@412" Q
"RTN","ONCATF1",216,0)
 Q
"RTN","ONCATF1",217,0)
 ;
"RTN","ONCATF1",218,0)
CLEANUP ;Cleanup
"RTN","ONCATF1",219,0)
 K D0,Y
"RTN","ONCCS")
0^32^B58774411
"RTN","ONCCS",1,0)
ONCCS ;Hines OIFO/GWB - Collaborative Staging ;06/23/10
"RTN","ONCCS",2,0)
 ;;2.2;ONCOLOGY;**1,4,5**;Jul 31, 2013;Build 6
"RTN","ONCCS",3,0)
 ;
"RTN","ONCCS",4,0)
 N DIR,IEN,LV,PS,RC,X
"RTN","ONCCS",5,0)
 W !
"RTN","ONCCS",6,0)
 S DIR("A")=" Compute Collaborative Staging"
"RTN","ONCCS",7,0)
 S DIR(0)="Y",DIR("B")="Yes" D ^DIR
"RTN","ONCCS",8,0)
 I (Y=0)!(Y="")!(Y[U) S Y=$S(ONCOANS="A":"@4",1:"@0") Q
"RTN","ONCCS",9,0)
 ;
"RTN","ONCCS",10,0)
 ;re-initialize if 96703
"RTN","ONCCS",11,0)
 I ($P($G(^ONCO(165.5,D0,2.2)),U,3)=96703),($P($G(^ONCO(165.5,D0,0)),U,16)>3120000) D  Q
"RTN","ONCCS",12,0)
 .D CLNCS
"RTN","ONCCS",13,0)
 .W !!,"96703 is obsolete for primaries starting 2012!!!"
"RTN","ONCCS",14,0)
 ;
"RTN","ONCCS",15,0)
 S IEN=D0
"RTN","ONCCS",16,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,1,9)=U_U_U_U_U_U_U_U
"RTN","ONCCS",17,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,11)=""
"RTN","ONCCS",18,0)
 ;
"RTN","ONCCS",19,0)
 K INPUT,STORE,DISPLAY,STATUS,ONCSAPI
"RTN","ONCCS",20,0)
 D CLEAR^ONCSAPIE(1)
"RTN","ONCCS",21,0)
 ;
"RTN","ONCCS",22,0)
 S PS=$$GET1^DIQ(165.5,IEN,20,"I")
"RTN","ONCCS",23,0)
 S:PS'="" PS=$TR($$GET1^DIQ(164,PS,1,"I"),".","")
"RTN","ONCCS",24,0)
 S INPUT("SITE")=PS
"RTN","ONCCS",25,0)
 ;
"RTN","ONCCS",26,0)
 S INPUT("HIST")=$E($$GET1^DIQ(165.5,IEN,22.3,"I"),1,4)
"RTN","ONCCS",27,0)
 ;
"RTN","ONCCS",28,0)
 S INPUT("DIAGNOSIS_YEAR")=$E($$DATE^ONCACDU1($$GET1^DIQ(165.5,IEN,3,"I")),1,4)
"RTN","ONCCS",29,0)
 ;
"RTN","ONCCS",30,0)
 ;S INPUT("CSVER_ORIGINAL")=$P($$VERSION^ONCSAPIV,U,2)
"RTN","ONCCS",31,0)
 S INPUT("CSVER_ORIGINAL")=$$GET1^DIQ(165.5,IEN,169.1,"I")
"RTN","ONCCS",32,0)
 S:INPUT("CSVER_ORIGINAL")="" INPUT("CSVER_ORIGINAL")=$P($$VERSION^ONCSAPIV,U,2)
"RTN","ONCCS",33,0)
 ;
"RTN","ONCCS",34,0)
 S INPUT("BEHAV")=$E($$GET1^DIQ(165.5,IEN,22.3,"I"),5)
"RTN","ONCCS",35,0)
 ;
"RTN","ONCCS",36,0)
 S INPUT("GRADE")=$$GET1^DIQ(165.5,IEN,24,"I")
"RTN","ONCCS",37,0)
 ;
"RTN","ONCCS",38,0)
 S INPUT("AGE")=$$AGEDX^ONCACDU1(IEN)
"RTN","ONCCS",39,0)
 S:$L(INPUT("AGE"))=1 INPUT("AGE")="00"_INPUT("AGE")
"RTN","ONCCS",40,0)
 S:$L(INPUT("AGE"))=2 INPUT("AGE")=0_INPUT("AGE")
"RTN","ONCCS",41,0)
 ;
"RTN","ONCCS",42,0)
 S LV=$$GET1^DIQ(165.5,IEN,149,"I")_$$GET1^DIQ(165.5,IEN,151,"I")
"RTN","ONCCS",43,0)
 S INPUT("LVI")=$S(LV[1:1,LV[2:1,LV[0:0,LV["X":9,1:8)
"RTN","ONCCS",44,0)
 ;
"RTN","ONCCS",45,0)
 S INPUT("SIZE")=$$GET1^DIQ(165.5,IEN,29.2,"I")
"RTN","ONCCS",46,0)
 ;
"RTN","ONCCS",47,0)
 S INPUT("EXT")=$$GET1^DIQ(165.5,IEN,30.2,"I")
"RTN","ONCCS",48,0)
 ;
"RTN","ONCCS",49,0)
 S INPUT("EXTEVAL")=$$GET1^DIQ(165.5,IEN,29.1,"I")
"RTN","ONCCS",50,0)
 ;
"RTN","ONCCS",51,0)
 S INPUT("NODES")=$$GET1^DIQ(165.5,IEN,31.1,"I")
"RTN","ONCCS",52,0)
 ;
"RTN","ONCCS",53,0)
 S INPUT("LNPOS")=$$GET1^DIQ(165.5,IEN,32,"I")
"RTN","ONCCS",54,0)
 S:$L(INPUT("LNPOS"))=1 INPUT("LNPOS")=0_INPUT("LNPOS")
"RTN","ONCCS",55,0)
 ;
"RTN","ONCCS",56,0)
 S INPUT("LNEXAM")=$$GET1^DIQ(165.5,IEN,33,"I")
"RTN","ONCCS",57,0)
 S:$L(INPUT("LNEXAM"))=1 INPUT("LNEXAM")=0_INPUT("LNEXAM")
"RTN","ONCCS",58,0)
 ;
"RTN","ONCCS",59,0)
 S INPUT("NODESEVAL")=$$GET1^DIQ(165.5,IEN,32.1,"I")
"RTN","ONCCS",60,0)
 ;
"RTN","ONCCS",61,0)
 S INPUT("METS")=$$GET1^DIQ(165.5,IEN,34.3,"I")
"RTN","ONCCS",62,0)
 ;
"RTN","ONCCS",63,0)
 S INPUT("METSEVAL")=$$GET1^DIQ(165.5,IEN,34.4,"I")
"RTN","ONCCS",64,0)
 ;
"RTN","ONCCS",65,0)
 S INPUT("SSF1")=$$GET1^DIQ(165.5,IEN,44.1,"I")
"RTN","ONCCS",66,0)
 S INPUT("SSF2")=$$GET1^DIQ(165.5,IEN,44.2,"I")
"RTN","ONCCS",67,0)
 S INPUT("SSF3")=$$GET1^DIQ(165.5,IEN,44.3,"I")
"RTN","ONCCS",68,0)
 S INPUT("SSF4")=$$GET1^DIQ(165.5,IEN,44.4,"I")
"RTN","ONCCS",69,0)
 S INPUT("SSF5")=$$GET1^DIQ(165.5,IEN,44.5,"I")
"RTN","ONCCS",70,0)
 S INPUT("SSF6")=$$GET1^DIQ(165.5,IEN,44.6,"I")
"RTN","ONCCS",71,0)
 S INPUT("SSF7")=$$GET1^DIQ(165.5,IEN,44.7,"I")
"RTN","ONCCS",72,0)
 S INPUT("SSF8")=$$GET1^DIQ(165.5,IEN,44.8,"I")
"RTN","ONCCS",73,0)
 S INPUT("SSF9")=$$GET1^DIQ(165.5,IEN,44.9,"I")
"RTN","ONCCS",74,0)
 S INPUT("SSF10")=$$GET1^DIQ(165.5,IEN,44.101,"I")
"RTN","ONCCS",75,0)
 S INPUT("SSF11")=$$GET1^DIQ(165.5,IEN,44.11,"I")
"RTN","ONCCS",76,0)
 S INPUT("SSF12")=$$GET1^DIQ(165.5,IEN,44.12,"I")
"RTN","ONCCS",77,0)
 S INPUT("SSF13")=$$GET1^DIQ(165.5,IEN,44.13,"I")
"RTN","ONCCS",78,0)
 S INPUT("SSF14")=$$GET1^DIQ(165.5,IEN,44.14,"I")
"RTN","ONCCS",79,0)
 S INPUT("SSF15")=$$GET1^DIQ(165.5,IEN,44.15,"I")
"RTN","ONCCS",80,0)
 S INPUT("SSF16")=$$GET1^DIQ(165.5,IEN,44.16,"I")
"RTN","ONCCS",81,0)
 S INPUT("SSF17")=$$GET1^DIQ(165.5,IEN,44.17,"I")
"RTN","ONCCS",82,0)
 S INPUT("SSF18")=$$GET1^DIQ(165.5,IEN,44.18,"I")
"RTN","ONCCS",83,0)
 S INPUT("SSF19")=$$GET1^DIQ(165.5,IEN,44.19,"I")
"RTN","ONCCS",84,0)
 S INPUT("SSF20")=$$GET1^DIQ(165.5,IEN,44.201,"I")
"RTN","ONCCS",85,0)
 S INPUT("SSF21")=$$GET1^DIQ(165.5,IEN,44.21,"I")
"RTN","ONCCS",86,0)
 S INPUT("SSF22")=$$GET1^DIQ(165.5,IEN,44.22,"I")
"RTN","ONCCS",87,0)
 S INPUT("SSF23")=$$GET1^DIQ(165.5,IEN,44.23,"I")
"RTN","ONCCS",88,0)
 S INPUT("SSF24")=$$GET1^DIQ(165.5,IEN,44.24,"I")
"RTN","ONCCS",89,0)
 I $P($G(^ONCO(165.5,IEN,"CS3")),U,1)'="" D
"RTN","ONCCS",90,0)
 .S $P(^ONCO(165.5,IEN,"CS2"),U,19)=$P($G(^ONCO(165.5,IEN,"CS3")),U,1)
"RTN","ONCCS",91,0)
 S INPUT("SSF25")=$$GET1^DIQ(165.5,IEN,44.25,"I")
"RTN","ONCCS",92,0)
 S:INPUT("SSF25")="" INPUT("SSF25")="   "
"RTN","ONCCS",93,0)
 ;
"RTN","ONCCS",94,0)
 S RC=$$CALC^ONCSAPI3(.ONCSAPI,.INPUT,.STORE,.DISPLAY,.STATUS)
"RTN","ONCCS",95,0)
 I RC D PRTERRS^ONCSAPIE() R "Press return to continue",X:DTIME
"RTN","ONCCS",96,0)
 ;
"RTN","ONCCS",97,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,1)=STORE("T")
"RTN","ONCCS",98,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,2)=STORE("TDESCR")
"RTN","ONCCS",99,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,3)=STORE("N")
"RTN","ONCCS",100,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,4)=STORE("NDESCR")
"RTN","ONCCS",101,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,5)=STORE("M")
"RTN","ONCCS",102,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,6)=STORE("MDESCR")
"RTN","ONCCS",103,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,7)=STORE("AJCC")
"RTN","ONCCS",104,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,13)=STORE("AJCC7-T")
"RTN","ONCCS",105,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,14)=STORE("AJCC7-TDESCR")
"RTN","ONCCS",106,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,15)=STORE("AJCC7-N")
"RTN","ONCCS",107,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,16)=STORE("AJCC7-NDESCR")
"RTN","ONCCS",108,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,17)=STORE("AJCC7-M")
"RTN","ONCCS",109,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,18)=STORE("AJCC7-MDESCR")
"RTN","ONCCS",110,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,19)=STORE("AJCC7-STAGE")
"RTN","ONCCS",111,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,8)=STORE("SS1977")
"RTN","ONCCS",112,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,9)=STORE("SS2000")
"RTN","ONCCS",113,0)
 S $P(^ONCO(165.5,IEN,"CS1"),U,11)=$G(STATUS("APIVER"))
"RTN","ONCCS",114,0)
 S:$P(^ONCO(165.5,IEN,"CS1"),U,12)="" $P(^ONCO(165.5,IEN,"CS1"),U,12)=$G(STATUS("APIVER"))
"RTN","ONCCS",115,0)
 D ^ONCPCS
"RTN","ONCCS",116,0)
 I $P(RC,U,1)=0 W !," Collaborative Staging was successful" Q
"RTN","ONCCS",117,0)
 I $P(RC,U,1)=-10 W !," CS server unavailable.  Contact IRM." Q
"RTN","ONCCS",118,0)
 I $P(RC,U,1)=-22 W !," Invalid COLLABORATIVE STAGING URL value in ONCOLOGY SITE PARAMETERS" Q
"RTN","ONCCS",119,0)
 I $P(RC,U,1)<0 W !," You have encountered a CS error" G CSERR
"RTN","ONCCS",120,0)
 I $P(RC,U,1)>0 W !," You have encountered a CS warning" G CSERR
"RTN","ONCCS",121,0)
 ;
"RTN","ONCCS",122,0)
CSERR N DIR,X
"RTN","ONCCS",123,0)
 S DIR("A")="Do you wish to re-enter the CS input values"
"RTN","ONCCS",124,0)
 S DIR(0)="Y",DIR("B")="Yes" D ^DIR
"RTN","ONCCS",125,0)
 I Y=1 S Y="@292" Q
"RTN","ONCCS",126,0)
 I Y[U S Y="@0" Q
"RTN","ONCCS",127,0)
 S Y=$S(ONCOANS="A":"@4",1:"@0")
"RTN","ONCCS",128,0)
 Q
"RTN","ONCCS",129,0)
 ;
"RTN","ONCCS",130,0)
INIT ;Initialize CS fields when HISTOLOGY (ICD-O-3) (165.5,22.3) changes
"RTN","ONCCS",131,0)
 N FND,HISTNAM,HSTFLD,HSTI,LNS,LSC,MEL,OLDHST,SITEGRP,TEXT,Z,ZZHSTLST
"RTN","ONCCS",132,0)
 ;
"RTN","ONCCS",133,0)
 I ($P($G(^ONCO(165.5,D0,0)),U,16)>3010000),(X=94211) D  Q
"RTN","ONCCS",134,0)
 .W !!,"94211 is obsolete for primaries starting 2001!!!"
"RTN","ONCCS",135,0)
 .K X
"RTN","ONCCS",136,0)
 I ($P($G(^ONCO(165.5,D0,0)),U,16)>3120000),(X=96703) D  Q
"RTN","ONCCS",137,0)
 .W !!,"96703 is obsolete for primaries starting 2012!!!"
"RTN","ONCCS",138,0)
 .K X
"RTN","ONCCS",139,0)
 I $P($G(^ONCO(165.5,D0,0)),U,16)>3100000 D  I FND=1 Q
"RTN","ONCCS",140,0)
 .S FND=0
"RTN","ONCCS",141,0)
 .S ZZHSTLST="96543^96613^96623^96643^96653^96673^96703^96753^96843^97283^97293^97333^97503^97511^97521^97531^97543^97603^97643^98053^98353^98363^99603^99843^99873"
"RTN","ONCCS",142,0)
 .F Z=1:1:27 I $P(ZZHSTLST,U,Z)=X S FND=1
"RTN","ONCCS",143,0)
 .I FND=1 W !!,X," is obsolete for primaries starting 2010!!!" K X
"RTN","ONCCS",144,0)
 S LNS=$O(^ONCO(164.2,"B","LUNG NOS",0))
"RTN","ONCCS",145,0)
 S LSC=$O(^ONCO(164.2,"B","LUNG SMALL CELL",0))
"RTN","ONCCS",146,0)
 S MEL=$O(^ONCO(164.2,"B","MELANOMA",0))
"RTN","ONCCS",147,0)
 S SITEGRP=$P($G(^ONCO(165.5,D0,0)),U,1)
"RTN","ONCCS",148,0)
 S OLDHST=$P($G(^ONCO(165.5,D0,2.2)),U,3)
"RTN","ONCCS",149,0)
 I (OLDHST=96703),($P($G(^ONCO(165.5,D0,0)),U,16)>3120000) D CLNCS  ;re-initialized if 96703, obsolete histology.
"RTN","ONCCS",150,0)
 I X=OLDHST Q
"RTN","ONCCS",151,0)
 I SITEGRP=LNS D
"RTN","ONCCS",152,0)
 .I ($E(X,1,4)=8041)!($E(X,1,4)=8042)!($E(X,1,4)=8043)!($E(X,1,4)=8044)!($E(X,1,4)=8045)!($E(X,1,4)=8246) D  W !!," SITE/GP changed to LUNG SMALL CELL",!
"RTN","ONCCS",153,0)
 ..S $P(^ONCO(165.5,D0,0),U,1)=LSC
"RTN","ONCCS",154,0)
 ..K ^ONCO(165.5,"B",LNS,D0)
"RTN","ONCCS",155,0)
 ..S ^ONCO(165.5,"B",LSC,D0)=""
"RTN","ONCCS",156,0)
 I SITEGRP=LSC D
"RTN","ONCCS",157,0)
 .I ($E(X,1,4)'=8041)&($E(X,1,4)'=8042)&($E(X,1,4)'=8043)&($E(X,1,4)'=8044)&($E(X,1,4)'=8045)&($E(X,1,4)'=8246) D  W !!," SITE/GP changed to LUNG NOS",!
"RTN","ONCCS",158,0)
 ..S $P(^ONCO(165.5,D0,0),U,1)=LNS
"RTN","ONCCS",159,0)
 ..K ^ONCO(165.5,"B",LSC,D0)
"RTN","ONCCS",160,0)
 ..S ^ONCO(165.5,"B",LNS,D0)=""
"RTN","ONCCS",161,0)
 I SITEGRP'=MEL D
"RTN","ONCCS",162,0)
 .I (X'<87200)&(X<87910) D  W !!," SITE/GP changed to MELANOMA",!
"RTN","ONCCS",163,0)
 ..S $P(^ONCO(165.5,D0,0),U,1)=MEL
"RTN","ONCCS",164,0)
 ..K ^ONCO(165.5,"B",SITEGRP,D0)
"RTN","ONCCS",165,0)
 ..S ^ONCO(165.5,"B",MEL,D0)=""
"RTN","ONCCS",166,0)
 I SITEGRP=MEL D
"RTN","ONCCS",167,0)
 .I (X<87200)!(X>87900) D
"RTN","ONCCS",168,0)
 ..W !
"RTN","ONCCS",169,0)
 ..W !," WARNING: SITE/GP and HISTOLOGY discrepancy"
"RTN","ONCCS",170,0)
 ..W !,"          SITE/GP   = MELANOMA"
"RTN","ONCCS",171,0)
 ..W !,"          HISTOLOGY = ",$P(Y,U,1),"  ",$P(Y,U,2)
"RTN","ONCCS",172,0)
 ..W !
"RTN","ONCCS",173,0)
 I OLDHST="" Q
"RTN","ONCCS",174,0)
 S HSTI=$$HIST^ONCFUNC(D0,.HSTFLD,.HISTNAM)
"RTN","ONCCS",175,0)
 S TEXT=HISTNAM
"RTN","ONCCS",176,0)
 S $P(^ONCO(165.5,D0,8),U,2)=$E(TEXT,1,40)
"RTN","ONCCS",177,0)
 I $P($G(^ONCO(165.5,D0,0)),U,16)<3040000 Q
"RTN","ONCCS",178,0)
 W !
"RTN","ONCCS",179,0)
 W !?3,"You have changed the HISTOLOGY (ICD-O-3).  This change may"
"RTN","ONCCS",180,0)
 W !?3,"affect the validity of the COLLABORATIVE STAGING data."
"RTN","ONCCS",181,0)
 W !?3,"Therefore, the CS fields have been initialized and need to"
"RTN","ONCCS",182,0)
 W !?3,"be re-entered."
"RTN","ONCCS",183,0)
 W !
"RTN","ONCCS",184,0)
CLNCS ;re-initialize if Histology 96703
"RTN","ONCCS",185,0)
 F PIECE=1:1:12 S $P(^ONCO(165.5,D0,"CS"),U,PIECE)=""
"RTN","ONCCS",186,0)
 F PIECE=1:1:19 S $P(^ONCO(165.5,D0,"CS1"),U,PIECE)=""
"RTN","ONCCS",187,0)
 F PIECE=1:1:19 S $P(^ONCO(165.5,D0,"CS2"),U,PIECE)=""
"RTN","ONCCS",188,0)
 S $P(^ONCO(165.5,D0,"CS3"),U,1)=""
"RTN","ONCCS",189,0)
 K PIECE
"RTN","ONCCS",190,0)
 Q
"RTN","ONCCS",191,0)
 ;
"RTN","ONCCS",192,0)
CLEANUP ;Cleanup
"RTN","ONCCS",193,0)
 K D0,ONCOANS,Y
"RTN","ONCCS2")
0^6^B114251425
"RTN","ONCCS2",1,0)
ONCCS2 ;Hines OIFO/GWB - Collaborative Staging v2 Stuffing ;06/23/10
"RTN","ONCCS2",2,0)
 ;;2.2;ONCOLOGY;**1,4,5**;Jul 31, 2013;Build 6
"RTN","ONCCS2",3,0)
 ;
"RTN","ONCCS2",4,0)
 S SCHEMA="Unable to compute schema"
"RTN","ONCCS2",5,0)
 N ONCDISC S ONCDISC="" ;variable for discontinued items, set=1 if D/C
"RTN","ONCCS2",6,0)
 Q:$G(TOP)=""
"RTN","ONCCS2",7,0)
 N DISCRIM,HIST,MO,SCHNAME,SITE
"RTN","ONCCS2",8,0)
 S MO=$$HIST^ONCFUNC(D0)
"RTN","ONCCS2",9,0)
 S SITE=$TR($$GET1^DIQ(164,TOP,1,"I"),".","")
"RTN","ONCCS2",10,0)
 S HIST=$E(MO,1,4)
"RTN","ONCCS2",11,0)
 S DISCRIM=$$GET1^DIQ(165.5,D0,240)
"RTN","ONCCS2",12,0)
 S SCHEMA=+$$SCHEMA^ONCSAPIS(.ONCSAPI,SITE,HIST,DISCRIM)
"RTN","ONCCS2",13,0)
 Q:SCHEMA<0
"RTN","ONCCS2",14,0)
 S SCHEMA=SCHNAME
"RTN","ONCCS2",15,0)
 ;
"RTN","ONCCS2",16,0)
 I $G(SCHEMA)="AdnexaUterineOther" D  Q
"RTN","ONCCS2",17,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",18,0)
 .D EVAL
"RTN","ONCCS2",19,0)
 ;
"RTN","ONCCS2",20,0)
 I $G(SCHEMA)="AdrenalGland" D  Q
"RTN","ONCCS2",21,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,5)="" 1
"RTN","ONCCS2",22,0)
 .D 4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",23,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2,3    ;CS V02.05
"RTN","ONCCS2",24,0)
 ;
"RTN","ONCCS2",25,0)
 I $G(SCHEMA)="AmpullaVater" D  Q
"RTN","ONCCS2",26,0)
 .D 4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",27,0)
 .I DATEDX>3131231 S ONCDISC=1 D 1,2,3    ;CS V02.05
"RTN","ONCCS2",28,0)
 ;
"RTN","ONCCS2",29,0)
 I $G(SCHEMA)="Anus" D  Q
"RTN","ONCCS2",30,0)
 .D 2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",31,0)
 .I DATEDX>3131231 S ONCDISC=1 D 1    ;CS V02.05
"RTN","ONCCS2",32,0)
 ;
"RTN","ONCCS2",33,0)
 I $G(SCHEMA)="Appendix" D  Q
"RTN","ONCCS2",34,0)
 .D 5,6,8,9,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",35,0)
 .I DATEDX>3131231 S ONCDISC=1 D 4,7,10,12    ;CS V02.05
"RTN","ONCCS2",36,0)
 ;
"RTN","ONCCS2",37,0)
 I $G(SCHEMA)="BileDuctsDistal" D  Q
"RTN","ONCCS2",38,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,15,16,17,18,19,20,21,22,23,24
"RTN","ONCCS2",39,0)
 .I DATEDX>3131231 S ONCDISC=1 D 12,13,14    ;CS V02.05
"RTN","ONCCS2",40,0)
 ;
"RTN","ONCCS2",41,0)
 I $G(SCHEMA)="BileDuctsIntraHepat" D  Q
"RTN","ONCCS2",42,0)
 .D 4,5,6,7,8,9,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",43,0)
 .I DATEDX>3131231 S ONCDISC=1 D 3,12    ;CS V02.05
"RTN","ONCCS2",44,0)
 ;
"RTN","ONCCS2",45,0)
 I $G(SCHEMA)="BileDuctsPerihilar" D  Q
"RTN","ONCCS2",46,0)
 .D 1,2,3,4,5,6,7,8,9,15,16,17,18,19,20,21,22,23,24
"RTN","ONCCS2",47,0)
 .I DATEDX>3131231 S ONCDISC=1 D 10,12,13,14    ;CS V02.05
"RTN","ONCCS2",48,0)
 ;
"RTN","ONCCS2",49,0)
 I $G(SCHEMA)="BiliaryOther" D  Q
"RTN","ONCCS2",50,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",51,0)
 ;
"RTN","ONCCS2",52,0)
 I $G(SCHEMA)="Bladder" D  Q
"RTN","ONCCS2",53,0)
 .D 4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",54,0)
 ;
"RTN","ONCCS2",55,0)
 I $G(SCHEMA)="Bone" D  Q
"RTN","ONCCS2",56,0)
 .D 5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",57,0)
 .I DATEDX>3131231 S ONCDISC=1 D 1,2,4    ;CS V02.05
"RTN","ONCCS2",58,0)
 ;
"RTN","ONCCS2",59,0)
 I $G(SCHEMA)="Brain" D  Q
"RTN","ONCCS2",60,0)
 .D 9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",61,0)
 .D EVAL,LN
"RTN","ONCCS2",62,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2,3,7,8    ;CS V02.05
"RTN","ONCCS2",63,0)
 ;
"RTN","ONCCS2",64,0)
 I $G(SCHEMA)="Breast" D  Q
"RTN","ONCCS2",65,0)
 .D 25
"RTN","ONCCS2",66,0)
 .I DATEDX>3131231 S ONCDISC=1 D 17,18,19,20,24    ;CS V02.05
"RTN","ONCCS2",67,0)
 ;
"RTN","ONCCS2",68,0)
 I $G(SCHEMA)="BuccalMucosa" D  Q
"RTN","ONCCS2",69,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS2",70,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",71,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS2",72,0)
 ;
"RTN","ONCCS2",73,0)
 I $G(SCHEMA)="CarcinoidAppendix" D  Q
"RTN","ONCCS2",74,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,5)="" 1
"RTN","ONCCS2",75,0)
 .D 3,4,5,6,7,8,9,10,11,12,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",76,0)
 .I DATEDX>3131231 S ONCDISC=1 D 13    ;CS V02.05
"RTN","ONCCS2",77,0)
 ;
"RTN","ONCCS2",78,0)
 I $G(SCHEMA)="Cervix" D  Q
"RTN","ONCCS2",79,0)
 .D 10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",80,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2,3,4,5,6,7,8,9    ;CS V02.05
"RTN","ONCCS2",81,0)
 ;
"RTN","ONCCS2",82,0)
 I $G(SCHEMA)="CNSOther" D  Q
"RTN","ONCCS2",83,0)
 .D 9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",84,0)
 .D EVAL,LN
"RTN","ONCCS2",85,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2,3,7,8    ;CS V02.05
"RTN","ONCCS2",86,0)
 ;
"RTN","ONCCS2",87,0)
 I $G(SCHEMA)="Colon" D  Q
"RTN","ONCCS2",88,0)
 .D 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",89,0)
 .I DATEDX>3131231 S ONCDISC=1 D 5,7,10    ;CS V02.05
"RTN","ONCCS2",90,0)
 ;
"RTN","ONCCS2",91,0)
 I $G(SCHEMA)="Conjunctiva" D  Q
"RTN","ONCCS2",92,0)
 .D 3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",93,0)
 .D:$P($G(^ONCO(165.5,D0,"CS1")),U,10)="" TS
"RTN","ONCCS2",94,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2    ;CS V02.05
"RTN","ONCCS2",95,0)
 ;
"RTN","ONCCS2",96,0)
 I $G(SCHEMA)="CorpusAdenosarcoma" D  Q
"RTN","ONCCS2",97,0)
 .D 9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",98,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8    ;CS V02.05
"RTN","ONCCS2",99,0)
 ;
"RTN","ONCCS2",100,0)
 I $G(SCHEMA)="CorpusCarcinoma" D  Q
"RTN","ONCCS2",101,0)
 .D 9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",102,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8    ;CS V02.05
"RTN","ONCCS2",103,0)
 ;
"RTN","ONCCS2",104,0)
 I $G(SCHEMA)="CorpusSarcoma" D  Q
"RTN","ONCCS2",105,0)
 .D 9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",106,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8    ;CS V02.05
"RTN","ONCCS2",107,0)
 ;
"RTN","ONCCS2",108,0)
 I $G(SCHEMA)="CysticDuct" D  Q
"RTN","ONCCS2",109,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24
"RTN","ONCCS2",110,0)
 ;
"RTN","ONCCS2",111,0)
 I $G(SCHEMA)="DigestiveOther" D  Q
"RTN","ONCCS2",112,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",113,0)
 .D EVAL
"RTN","ONCCS2",114,0)
 ;
"RTN","ONCCS2",115,0)
 I $G(SCHEMA)="EndocrineOther" D  Q
"RTN","ONCCS2",116,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,5)="" 1
"RTN","ONCCS2",117,0)
 .D 2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",118,0)
 .D EVAL
"RTN","ONCCS2",119,0)
 ;
"RTN","ONCCS2",120,0)
 I $G(SCHEMA)="EpiglottisAnterior" D  Q
"RTN","ONCCS2",121,0)
 .D 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",122,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS2",123,0)
 ;
"RTN","ONCCS2",124,0)
 I $G(SCHEMA)="Esophagus" D  Q
"RTN","ONCCS2",125,0)
 .D 6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",126,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2,3,4,5    ;CS V02.05
"RTN","ONCCS2",127,0)
 ;
"RTN","ONCCS2",128,0)
 I $G(SCHEMA)="EsophagusGEJunction" D  Q
"RTN","ONCCS2",129,0)
 .D 2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24
"RTN","ONCCS2",130,0)
 .I DATEDX>3131231 S ONCDISC=1 D 3,4,5    ;CS V02.05
"RTN","ONCCS2",131,0)
 ;
"RTN","ONCCS2",132,0)
 I $G(SCHEMA)="EyeOther" D  Q
"RTN","ONCCS2",133,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",134,0)
 .D EVAL
"RTN","ONCCS2",135,0)
 ;
"RTN","ONCCS2",136,0)
 I $G(SCHEMA)="FallopianTube" D  Q
"RTN","ONCCS2",137,0)
 .D 8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",138,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2,3    ;CS V02.05
"RTN","ONCCS2",139,0)
 ;
"RTN","ONCCS2",140,0)
 I $G(SCHEMA)="FloorMouth" D  Q
"RTN","ONCCS2",141,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS2",142,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",143,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS2",144,0)
 ;
"RTN","ONCCS2",145,0)
 I $G(SCHEMA)="Gallbladder" D  Q
"RTN","ONCCS2",146,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,12,13,14,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",147,0)
 .I DATEDX>3131231 S ONCDISC=1 D 15,16    ;CS V02.05
"RTN","ONCCS2",148,0)
 ;
"RTN","ONCCS2",149,0)
 I $G(SCHEMA)="GenitalFemaleOther" D  Q
"RTN","ONCCS2",150,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",151,0)
 .D EVAL
"RTN","ONCCS2",152,0)
 ;
"RTN","ONCCS2",153,0)
 I $G(SCHEMA)="GenitalMaleOther" D  Q
"RTN","ONCCS2",154,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",155,0)
 .D EVAL
"RTN","ONCCS2",156,0)
 ;
"RTN","ONCCS2",157,0)
 I $G(SCHEMA)="GISTAppendix" D  Q
"RTN","ONCCS2",158,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,5)="" 1
"RTN","ONCCS2",159,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS2",160,0)
 .D 3,4,5,6,7,8,9,10,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",161,0)
 .I DATEDX>3131231 S ONCDISC=1 D 13,14,15    ;CS V02.05
"RTN","ONCCS2",162,0)
 ;
"RTN","ONCCS2",163,0)
 I $G(SCHEMA)="GISTColon" D  Q
"RTN","ONCCS2",164,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,5)="" 1
"RTN","ONCCS2",165,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS2",166,0)
 .D 3,4,5,6,7,8,9,10,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",167,0)
 .I DATEDX>3131231 S ONCDISC=1 D 13,14,15    ;CS V02.05
"RTN","ONCCS2",168,0)
 ;
"RTN","ONCCS2",169,0)
 I $G(SCHEMA)="GISTEsophagus" D  Q
"RTN","ONCCS2",170,0)
 .D 1,2,3,4,5,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",171,0)
 .I DATEDX>3131231 S ONCDISC=1 D 8,9,10    ;CS V02.05
"RTN","ONCCS2",172,0)
 ;
"RTN","ONCCS2",173,0)
 I $G(SCHEMA)="GISTPeritoneum" D  Q
"RTN","ONCCS2",174,0)
 .D 1,2,3,4,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",175,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,9    ;CS V02.05
"RTN","ONCCS2",176,0)
 ;
"RTN","ONCCS2",177,0)
 I $G(SCHEMA)="GISTRectum" D  Q
"RTN","ONCCS2",178,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,5)="" 1
"RTN","ONCCS2",179,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS2",180,0)
 .D 3,4,5,6,7,8,9,10,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",181,0)
 .I DATEDX>3131231 S ONCDISC=1 D 13,14,15    ;CS V02.05
"RTN","ONCCS2",182,0)
 ;
"RTN","ONCCS2",183,0)
 I $G(SCHEMA)="GISTSmallIntestine" D  Q
"RTN","ONCCS2",184,0)
 .D 1,2,3,4,5,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",185,0)
 .I DATEDX>3131231 S ONCDISC=1 D 8,9,10    ;CS V02.05
"RTN","ONCCS2",186,0)
 ;
"RTN","ONCCS2",187,0)
 I $G(SCHEMA)="GISTStomach" D  Q
"RTN","ONCCS2",188,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,5)="" 1
"RTN","ONCCS2",189,0)
 .D 2,3,4,5,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",190,0)
 .I DATEDX>3131231 S ONCDISC=1 D 8,9,10    ;CS V02.05
"RTN","ONCCS2",191,0)
 ;
"RTN","ONCCS2",192,0)
 I $G(SCHEMA)="GumLower" D  Q
"RTN","ONCCS2",193,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS2",194,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",195,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS2",196,0)
 ;
"RTN","ONCCS2",197,0)
 I $G(SCHEMA)="GumOther" D  Q
"RTN","ONCCS2",198,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS2",199,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",200,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS2",201,0)
 ;
"RTN","ONCCS2",202,0)
 I $G(SCHEMA)="GumUpper" D  Q
"RTN","ONCCS2",203,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS2",204,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",205,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS2",206,0)
 ;
"RTN","ONCCS2",207,0)
 I $G(SCHEMA)="HeartMediastinum" D  Q
"RTN","ONCCS2",208,0)
 .D 5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",209,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2,4    ;CS V02.05
"RTN","ONCCS2",210,0)
 ;
"RTN","ONCCS2",211,0)
 I $G(SCHEMA)="HemeRetic" D  Q
"RTN","ONCCS2",212,0)
 .D 2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",213,0)
 .D TS,EVAL,LN,METS
"RTN","ONCCS2",214,0)
 ;
"RTN","ONCCS2",215,0)
 I $G(SCHEMA)="Hypopharynx" D  Q
"RTN","ONCCS2",216,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS2",217,0)
 .D 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",218,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8    ;CS V02.05
"RTN","ONCCS2",219,0)
 ;
"RTN","ONCCS2",220,0)
 I $G(SCHEMA)="IllDefinedOther" D  Q
"RTN","ONCCS2",221,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",222,0)
 .D EXT,EVAL,LN,METS
"RTN","ONCCS2",223,0)
 ;
"RTN","ONCCS2",224,0)
 I $G(SCHEMA)="IntracranialGland" D  Q
"RTN","ONCCS2",225,0)
 .D 3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",226,0)
 .D EVAL
"RTN","ONCCS2",227,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2    ;CS V02.05
"RTN","ONCCS2",228,0)
 ;
"RTN","ONCCS2",229,0)
 I $G(SCHEMA)="KaposiSarcoma" D  Q
"RTN","ONCCS2",230,0)
 .D 2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS2",231,0)
 .D TS,EVAL
"RTN","ONCCS2",232,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2,3    ;CS V02.05
"RTN","ONCCS2",233,0)
 ;
"RTN","ONCCS2",234,0)
 D ^ONCCS3
"RTN","ONCCS2",235,0)
 K ONCDISC Q
"RTN","ONCCS2",236,0)
 ;
"RTN","ONCCS2",237,0)
1 ;SSF1 = 988
"RTN","ONCCS2",238,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,5)'="" Q
"RTN","ONCCS2",239,0)
 S $P(^ONCO(165.5,D0,"CS"),U,5)=988
"RTN","ONCCS2",240,0)
 Q
"RTN","ONCCS2",241,0)
 ;
"RTN","ONCCS2",242,0)
2 ;SSF2 = 988
"RTN","ONCCS2",243,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,6)'="" Q
"RTN","ONCCS2",244,0)
 S $P(^ONCO(165.5,D0,"CS"),U,6)=988
"RTN","ONCCS2",245,0)
 Q
"RTN","ONCCS2",246,0)
 ;
"RTN","ONCCS2",247,0)
3 ;SSF3 = 988
"RTN","ONCCS2",248,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,7)'="" Q
"RTN","ONCCS2",249,0)
 S $P(^ONCO(165.5,D0,"CS"),U,7)=988
"RTN","ONCCS2",250,0)
 Q
"RTN","ONCCS2",251,0)
 ;
"RTN","ONCCS2",252,0)
4 ;SSF4 = 988
"RTN","ONCCS2",253,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,8)'="" Q
"RTN","ONCCS2",254,0)
 S $P(^ONCO(165.5,D0,"CS"),U,8)=988
"RTN","ONCCS2",255,0)
 Q
"RTN","ONCCS2",256,0)
 ;
"RTN","ONCCS2",257,0)
5 ;SSF5 = 988
"RTN","ONCCS2",258,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,9)'="" Q
"RTN","ONCCS2",259,0)
 S $P(^ONCO(165.5,D0,"CS"),U,9)=988
"RTN","ONCCS2",260,0)
 Q
"RTN","ONCCS2",261,0)
 ;
"RTN","ONCCS2",262,0)
6 ;SSF6 = 988
"RTN","ONCCS2",263,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,10)'="" Q
"RTN","ONCCS2",264,0)
 S $P(^ONCO(165.5,D0,"CS"),U,10)=988
"RTN","ONCCS2",265,0)
 Q
"RTN","ONCCS2",266,0)
 ;
"RTN","ONCCS2",267,0)
7 ;SSF7 = 988
"RTN","ONCCS2",268,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,1)'="" Q
"RTN","ONCCS2",269,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,1)=988
"RTN","ONCCS2",270,0)
 Q
"RTN","ONCCS2",271,0)
 ;
"RTN","ONCCS2",272,0)
8 ;SSF8 = 988
"RTN","ONCCS2",273,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,2)'="" Q
"RTN","ONCCS2",274,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,2)=988
"RTN","ONCCS2",275,0)
 Q
"RTN","ONCCS2",276,0)
 ;
"RTN","ONCCS2",277,0)
9 ;SSF9 = 988
"RTN","ONCCS2",278,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,3)'="" Q
"RTN","ONCCS2",279,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,3)=988
"RTN","ONCCS2",280,0)
 Q
"RTN","ONCCS2",281,0)
 ;
"RTN","ONCCS2",282,0)
10 ;SSF10 = 988
"RTN","ONCCS2",283,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,4)'="" Q
"RTN","ONCCS2",284,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,4)=988
"RTN","ONCCS2",285,0)
 Q
"RTN","ONCCS2",286,0)
 ;
"RTN","ONCCS2",287,0)
11 ;SSF11 = 988
"RTN","ONCCS2",288,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,5)'="" Q
"RTN","ONCCS2",289,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,5)=988
"RTN","ONCCS2",290,0)
 Q
"RTN","ONCCS2",291,0)
 ;
"RTN","ONCCS2",292,0)
12 ;SSF12 = 988
"RTN","ONCCS2",293,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,6)'="" Q
"RTN","ONCCS2",294,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,6)=988
"RTN","ONCCS2",295,0)
 Q
"RTN","ONCCS2",296,0)
 ;
"RTN","ONCCS2",297,0)
13 ;SSF13 = 988
"RTN","ONCCS2",298,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,7)'="" Q
"RTN","ONCCS2",299,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,7)=988
"RTN","ONCCS2",300,0)
 Q
"RTN","ONCCS2",301,0)
 ;
"RTN","ONCCS2",302,0)
14 ;SSF14 = 988
"RTN","ONCCS2",303,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,8)'="" Q
"RTN","ONCCS2",304,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,8)=988
"RTN","ONCCS2",305,0)
 Q
"RTN","ONCCS2",306,0)
 ;
"RTN","ONCCS2",307,0)
15 ;SSF15 = 988
"RTN","ONCCS2",308,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,9)'="" Q
"RTN","ONCCS2",309,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,9)=988
"RTN","ONCCS2",310,0)
 Q
"RTN","ONCCS2",311,0)
 ;
"RTN","ONCCS2",312,0)
16 ;SSF16 = 988
"RTN","ONCCS2",313,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,10)'="" Q
"RTN","ONCCS2",314,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,10)=988
"RTN","ONCCS2",315,0)
 Q
"RTN","ONCCS2",316,0)
 ;
"RTN","ONCCS2",317,0)
17 ;SSF17 = 988
"RTN","ONCCS2",318,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,11)'="" Q
"RTN","ONCCS2",319,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,11)=988
"RTN","ONCCS2",320,0)
 Q
"RTN","ONCCS2",321,0)
 ;
"RTN","ONCCS2",322,0)
18 ;SSF18 = 988
"RTN","ONCCS2",323,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,12)'="" Q
"RTN","ONCCS2",324,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,12)=988
"RTN","ONCCS2",325,0)
 Q
"RTN","ONCCS2",326,0)
 ;
"RTN","ONCCS2",327,0)
19 ;SSF19 = 988
"RTN","ONCCS2",328,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,13)'="" Q
"RTN","ONCCS2",329,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,13)=988
"RTN","ONCCS2",330,0)
 Q
"RTN","ONCCS2",331,0)
 ;
"RTN","ONCCS2",332,0)
20 ;SSF20 = 988
"RTN","ONCCS2",333,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,14)'="" Q
"RTN","ONCCS2",334,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,14)=988
"RTN","ONCCS2",335,0)
 Q
"RTN","ONCCS2",336,0)
 ;
"RTN","ONCCS2",337,0)
21 ;SSF21 = 988
"RTN","ONCCS2",338,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,15)'="" Q
"RTN","ONCCS2",339,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,15)=988
"RTN","ONCCS2",340,0)
 Q
"RTN","ONCCS2",341,0)
 ;
"RTN","ONCCS2",342,0)
22 ;SSF22 = 988
"RTN","ONCCS2",343,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,16)'="" Q
"RTN","ONCCS2",344,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,16)=988
"RTN","ONCCS2",345,0)
 Q
"RTN","ONCCS2",346,0)
 ;
"RTN","ONCCS2",347,0)
23 ;SSF23 = 988
"RTN","ONCCS2",348,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,17)'="" Q
"RTN","ONCCS2",349,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,17)=988
"RTN","ONCCS2",350,0)
 Q
"RTN","ONCCS2",351,0)
 ;
"RTN","ONCCS2",352,0)
24 ;SSF24 = 988
"RTN","ONCCS2",353,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,18)'="" Q
"RTN","ONCCS2",354,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,18)=988
"RTN","ONCCS2",355,0)
 Q
"RTN","ONCCS2",356,0)
 ;
"RTN","ONCCS2",357,0)
25 ;SSF25 = 988
"RTN","ONCCS2",358,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,19)'="" Q
"RTN","ONCCS2",359,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,19)=988
"RTN","ONCCS2",360,0)
 Q
"RTN","ONCCS2",361,0)
 ;
"RTN","ONCCS2",362,0)
TS ;TUMOR SIZE (CS) = 988
"RTN","ONCCS2",363,0)
 S $P(^ONCO(165.5,D0,"CS1"),U,10)=988
"RTN","ONCCS2",364,0)
 Q
"RTN","ONCCS2",365,0)
 ;
"RTN","ONCCS2",366,0)
EXT ;EXTENSION (CS) = 988
"RTN","ONCCS2",367,0)
 S $P(^ONCO(165.5,D0,"CS"),U,11)=988
"RTN","ONCCS2",368,0)
 Q
"RTN","ONCCS2",369,0)
 ;
"RTN","ONCCS2",370,0)
EVAL ;TUMOR SIZE/EXT EVAL (CS) = 9
"RTN","ONCCS2",371,0)
 ;LYMPH NODES EVAL (CS) = 9
"RTN","ONCCS2",372,0)
 ;METS EVAL (CS) = 9
"RTN","ONCCS2",373,0)
 S $P(^ONCO(165.5,D0,"CS"),U,1)=9
"RTN","ONCCS2",374,0)
 S $P(^ONCO(165.5,D0,"CS"),U,2)=9
"RTN","ONCCS2",375,0)
 S $P(^ONCO(165.5,D0,"CS"),U,4)=9
"RTN","ONCCS2",376,0)
 Q
"RTN","ONCCS2",377,0)
 ;
"RTN","ONCCS2",378,0)
EVAL1 ;LYMPH NODES EVAL (CS) = 9
"RTN","ONCCS2",379,0)
 ;METS EVAL (CS) = 9
"RTN","ONCCS2",380,0)
 S $P(^ONCO(165.5,D0,"CS"),U,2)=9
"RTN","ONCCS2",381,0)
 S $P(^ONCO(165.5,D0,"CS"),U,4)=9
"RTN","ONCCS2",382,0)
 Q
"RTN","ONCCS2",383,0)
 ;
"RTN","ONCCS2",384,0)
EVAL2 ;LYMPH NODES EVAL (CS) = 9
"RTN","ONCCS2",385,0)
 S $P(^ONCO(165.5,D0,"CS"),U,2)=9
"RTN","ONCCS2",386,0)
 Q
"RTN","ONCCS2",387,0)
 ;
"RTN","ONCCS2",388,0)
LN ;LYMPH NODES (CS) = 988
"RTN","ONCCS2",389,0)
 ;REGIONAL LYMPH NODES EXAMINED = 99
"RTN","ONCCS2",390,0)
 ;REGIONAL LYMPH NODES POSITIVE = 99
"RTN","ONCCS2",391,0)
 S $P(^ONCO(165.5,D0,"CS"),U,12)=988
"RTN","ONCCS2",392,0)
 S $P(^ONCO(165.5,D0,2),U,12)=99
"RTN","ONCCS2",393,0)
 S $P(^ONCO(165.5,D0,2),U,13)=99
"RTN","ONCCS2",394,0)
 Q
"RTN","ONCCS2",395,0)
 ;
"RTN","ONCCS2",396,0)
METS ;METS AT DX (CS) = 98
"RTN","ONCCS2",397,0)
 S $P(^ONCO(165.5,D0,"CS"),U,3)=98
"RTN","ONCCS2",398,0)
 Q
"RTN","ONCCS2",399,0)
 ;
"RTN","ONCCS2",400,0)
CLEANUP ;Cleanup
"RTN","ONCCS2",401,0)
 K D0,ONCSAPI,SCHEMA,TOP
"RTN","ONCCS3")
0^7^B129668253
"RTN","ONCCS3",1,0)
ONCCS3 ;Hines OIFO/GWB - Collaborative Staging v2 Stuffing ;06/16/11
"RTN","ONCCS3",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCCS3",3,0)
 ;
"RTN","ONCCS3",4,0)
 I $G(SCHEMA)="KidneyParenchyma" D  Q
"RTN","ONCCS3",5,0)
 .D 9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",6,0)
 .I DATEDX>3131231 S ONCDISC=1 D 5,7    ;CS V02.05
"RTN","ONCCS3",7,0)
 ;
"RTN","ONCCS3",8,0)
 I $G(SCHEMA)="KidneyRenalPelvis" D  Q
"RTN","ONCCS3",9,0)
 .D 3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",10,0)
 ;
"RTN","ONCCS3",11,0)
 I $G(SCHEMA)="LacrimalGland" D  Q
"RTN","ONCCS3",12,0)
 .D 9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24
"RTN","ONCCS3",13,0)
 .I DATEDX>3131231 S ONCDISC=1 D 1,2,3,5,7    ;CS V02.05
"RTN","ONCCS3",14,0)
 ;
"RTN","ONCCS3",15,0)
 I $G(SCHEMA)="LacrimalSac" D  Q
"RTN","ONCCS3",16,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24
"RTN","ONCCS3",17,0)
 ;
"RTN","ONCCS3",18,0)
 I $G(SCHEMA)="LarynxGlottic" D  Q
"RTN","ONCCS3",19,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",20,0)
 .D 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",21,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",22,0)
 ;
"RTN","ONCCS3",23,0)
 I $G(SCHEMA)="LarynxOther" D  Q
"RTN","ONCCS3",24,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",25,0)
 .D 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",26,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",27,0)
 ;
"RTN","ONCCS3",28,0)
 I $G(SCHEMA)="LarynxSubglottic" D  Q
"RTN","ONCCS3",29,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",30,0)
 .D 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",31,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",32,0)
 ;
"RTN","ONCCS3",33,0)
 I $G(SCHEMA)="LarynxSupraglottic" D  Q
"RTN","ONCCS3",34,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",35,0)
 .D 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",36,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",37,0)
 ;
"RTN","ONCCS3",38,0)
 I $G(SCHEMA)="LipLower" D  Q
"RTN","ONCCS3",39,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",40,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",41,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",42,0)
 ;
"RTN","ONCCS3",43,0)
 I $G(SCHEMA)="LipOther" D  Q
"RTN","ONCCS3",44,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",45,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",46,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",47,0)
 ;
"RTN","ONCCS3",48,0)
 I $G(SCHEMA)="LipUpper" D  Q
"RTN","ONCCS3",49,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",50,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",51,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",52,0)
 ;
"RTN","ONCCS3",53,0)
 I $G(SCHEMA)="Liver" D  Q
"RTN","ONCCS3",54,0)
 .D 9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",55,0)
 ;
"RTN","ONCCS3",56,0)
 I $G(SCHEMA)="Lung" D  Q
"RTN","ONCCS3",57,0)
 .D 3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",58,0)
 ;
"RTN","ONCCS3",59,0)
 I $G(SCHEMA)="Lymphoma" D  Q
"RTN","ONCCS3",60,0)
 .D 6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",61,0)
 .D TS,EVAL1,LN,METS
"RTN","ONCCS3",62,0)
 .I DATEDX>3131231 S ONCDISC=1 D 4,5    ;CS V02.05
"RTN","ONCCS3",63,0)
 ;
"RTN","ONCCS3",64,0)
 I $G(SCHEMA)="LymphomaOcularAdnexa" D  Q
"RTN","ONCCS3",65,0)
 .D 14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",66,0)
 .I DATEDX>3131231 S ONCDISC=1 D 4,5,7,8,9,10,11,12,13    ;CS V02.05
"RTN","ONCCS3",67,0)
 ;
"RTN","ONCCS3",68,0)
 I $G(SCHEMA)="MelanomaBuccalMucosa" D  Q
"RTN","ONCCS3",69,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",70,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",71,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",72,0)
 ;
"RTN","ONCCS3",73,0)
 I $G(SCHEMA)="MelanomaChoroid" D  Q
"RTN","ONCCS3",74,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,5)="" 1
"RTN","ONCCS3",75,0)
 .D 15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",76,0)
 .D:$P($G(^ONCO(165.5,D0,"CS1")),U,10)="" TS
"RTN","ONCCS3",77,0)
 .I DATEDX>3131231 S ONCDISC=1 D 8,14    ;CS V02.05
"RTN","ONCCS3",78,0)
 ;
"RTN","ONCCS3",79,0)
 I $G(SCHEMA)="MelanomaCiliaryBody" D  Q
"RTN","ONCCS3",80,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,5)="" 1
"RTN","ONCCS3",81,0)
 .D 15,16,17,18,19,20,21,22,23,24
"RTN","ONCCS3",82,0)
 .D:$P($G(^ONCO(165.5,D0,"CS1")),U,10)="" TS
"RTN","ONCCS3",83,0)
 .I DATEDX>3131231 S ONCDISC=1 D 8,14    ;CS V02.05
"RTN","ONCCS3",84,0)
 ;
"RTN","ONCCS3",85,0)
 I $G(SCHEMA)="MelanomaConjunctiva" D  Q
"RTN","ONCCS3",86,0)
 .D 4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",87,0)
 .I DATEDX>3131231 S ONCDISC=1 D 3    ;CS V02.05
"RTN","ONCCS3",88,0)
 ;
"RTN","ONCCS3",89,0)
 I $G(SCHEMA)="MelanomaEpiglottisAnterior" D  Q
"RTN","ONCCS3",90,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",91,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",92,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",93,0)
 ;
"RTN","ONCCS3",94,0)
 I $G(SCHEMA)="MelanomaEyeOther" D  Q
"RTN","ONCCS3",95,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",96,0)
 ;
"RTN","ONCCS3",97,0)
 I $G(SCHEMA)="MelanomaFloorMouth" D  Q
"RTN","ONCCS3",98,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",99,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",100,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",101,0)
 ;
"RTN","ONCCS3",102,0)
 I $G(SCHEMA)="MelanomaGumLower" D  Q
"RTN","ONCCS3",103,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",104,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",105,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",106,0)
 ;
"RTN","ONCCS3",107,0)
 I $G(SCHEMA)="MelanomaGumOther" D  Q
"RTN","ONCCS3",108,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",109,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",110,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",111,0)
 ;
"RTN","ONCCS3",112,0)
 I $G(SCHEMA)="MelanomaGumUpper" D  Q
"RTN","ONCCS3",113,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",114,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",115,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",116,0)
 ;
"RTN","ONCCS3",117,0)
 I $G(SCHEMA)="MelanomaHypopharynx" D  Q
"RTN","ONCCS3",118,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",119,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",120,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",121,0)
 ;
"RTN","ONCCS3",122,0)
 I $G(SCHEMA)="MelanomaIris" D  Q
"RTN","ONCCS3",123,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,5)="" 1
"RTN","ONCCS3",124,0)
 .D 15,16,17,18,19,20,21,22,23,24
"RTN","ONCCS3",125,0)
 .D:$P($G(^ONCO(165.5,D0,"CS1")),U,10)="" TS
"RTN","ONCCS3",126,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2,8,14    ;CS V02.05
"RTN","ONCCS3",127,0)
 ;
"RTN","ONCCS3",128,0)
 I $G(SCHEMA)="MelanomaLarynxGlottic" D  Q
"RTN","ONCCS3",129,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",130,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",131,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",132,0)
 ;
"RTN","ONCCS3",133,0)
 I $G(SCHEMA)="MelanomaLarynxOther" D  Q
"RTN","ONCCS3",134,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",135,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",136,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",137,0)
 ;
"RTN","ONCCS3",138,0)
 I $G(SCHEMA)="MelanomaLarynxSubglottic" D  Q
"RTN","ONCCS3",139,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",140,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",141,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",142,0)
 ;
"RTN","ONCCS3",143,0)
 I $G(SCHEMA)="MelanomaLarynxSupraglottic" D  Q
"RTN","ONCCS3",144,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",145,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",146,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",147,0)
 ;
"RTN","ONCCS3",148,0)
 I $G(SCHEMA)="MelanomaLipLower" D  Q
"RTN","ONCCS3",149,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",150,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",151,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",152,0)
 ;
"RTN","ONCCS3",153,0)
 I $G(SCHEMA)="MelanomaLipOther" D  Q
"RTN","ONCCS3",154,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",155,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",156,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",157,0)
 ;
"RTN","ONCCS3",158,0)
 I $G(SCHEMA)="MelanomaLipUpper" D  Q
"RTN","ONCCS3",159,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",160,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",161,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",162,0)
 ;
"RTN","ONCCS3",163,0)
 I $G(SCHEMA)="MelanomaMouthOther" D  Q
"RTN","ONCCS3",164,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",165,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",166,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",167,0)
 ;
"RTN","ONCCS3",168,0)
 I $G(SCHEMA)="MelanomaNasalCavity" D  Q
"RTN","ONCCS3",169,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",170,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",171,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",172,0)
 ;
"RTN","ONCCS3",173,0)
 I $G(SCHEMA)="MelanomaNasopharynx" D  Q
"RTN","ONCCS3",174,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",175,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",176,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",177,0)
 ;
"RTN","ONCCS3",178,0)
 I $G(SCHEMA)="MelanomaOropharynx" D  Q
"RTN","ONCCS3",179,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",180,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",181,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",182,0)
 ;
"RTN","ONCCS3",183,0)
 I $G(SCHEMA)="MelanomaPalateHard" D  Q
"RTN","ONCCS3",184,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",185,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",186,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",187,0)
 ;
"RTN","ONCCS3",188,0)
 I $G(SCHEMA)="MelanomaPalateSoft" D  Q
"RTN","ONCCS3",189,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",190,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",191,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",192,0)
 ;
"RTN","ONCCS3",193,0)
 I $G(SCHEMA)="MelanomaPharynxOther" D  Q
"RTN","ONCCS3",194,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",195,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",196,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",197,0)
 ;
"RTN","ONCCS3",198,0)
 I $G(SCHEMA)="MelanomaSinusEthmoid" D  Q
"RTN","ONCCS3",199,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",200,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",201,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",202,0)
 ;
"RTN","ONCCS3",203,0)
 I $G(SCHEMA)="MelanomaSinusMaxillary" D  Q
"RTN","ONCCS3",204,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",205,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",206,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",207,0)
 ;
"RTN","ONCCS3",208,0)
 I $G(SCHEMA)="MelanomaSinusOther" D  Q
"RTN","ONCCS3",209,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",210,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",211,0)
 .D EVAL
"RTN","ONCCS3",212,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",213,0)
 ;
"RTN","ONCCS3",214,0)
 I $G(SCHEMA)="MelanomaSkin" D  Q
"RTN","ONCCS3",215,0)
 .D 10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",216,0)
 .I DATEDX>3131231 S ONCDISC=1 D 8,9    ;CS V02.05
"RTN","ONCCS3",217,0)
 ;
"RTN","ONCCS3",218,0)
 I $G(SCHEMA)="MelanomaTongueAnterior" D  Q
"RTN","ONCCS3",219,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",220,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",221,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",222,0)
 ;
"RTN","ONCCS3",223,0)
 I $G(SCHEMA)="MelanomaTongueBase" D  Q
"RTN","ONCCS3",224,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",225,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",226,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",227,0)
 ;
"RTN","ONCCS3",228,0)
 I $G(SCHEMA)="MerkelCellPenis" D  Q
"RTN","ONCCS3",229,0)
 .D 2,4,5,6,7,8,9,10,11,12,13,14,15,23,24,25
"RTN","ONCCS3",230,0)
 .I DATEDX>3131231 S ONCDISC=1 D 19,20,21    ;CS V02.05
"RTN","ONCCS3",231,0)
 ;
"RTN","ONCCS3",232,0)
 I $G(SCHEMA)="MerkelCellScrotum" D  Q
"RTN","ONCCS3",233,0)
 .D 2,4,5,6,7,8,9,10,11,12,13,14,15,23,24,25
"RTN","ONCCS3",234,0)
 .I DATEDX>3131231 S ONCDISC=1 D 19,20,21    ;CS V02.05
"RTN","ONCCS3",235,0)
 ;
"RTN","ONCCS3",236,0)
 I $G(SCHEMA)="MerkelCellSkin" D  Q
"RTN","ONCCS3",237,0)
 .D 2,4,5,6,7,8,9,10,11,12,13,14,15,23,24,25
"RTN","ONCCS3",238,0)
 .I DATEDX>3131231 S ONCDISC=1 D 19,20,21    ;CS V02.05
"RTN","ONCCS3",239,0)
 ;
"RTN","ONCCS3",240,0)
 I $G(SCHEMA)="MerkelCellVulva" D  Q
"RTN","ONCCS3",241,0)
 .D 2,4,5,6,7,8,9,10,11,12,13,14,15,23,24,25
"RTN","ONCCS3",242,0)
 .I DATEDX>3131231 S ONCDISC=1 D 19,20,21    ;CS V02.05
"RTN","ONCCS3",243,0)
 ;
"RTN","ONCCS3",244,0)
 I $G(SCHEMA)="MiddleEar" D  Q
"RTN","ONCCS3",245,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS3",246,0)
 .D 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS3",247,0)
 .D EVAL
"RTN","ONCCS3",248,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS3",249,0)
 ;
"RTN","ONCCS3",250,0)
 D ^ONCCS4
"RTN","ONCCS3",251,0)
 Q
"RTN","ONCCS3",252,0)
 ;
"RTN","ONCCS3",253,0)
1 ;SSF1 = 988
"RTN","ONCCS3",254,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,5)'="" Q
"RTN","ONCCS3",255,0)
 S $P(^ONCO(165.5,D0,"CS"),U,5)=988
"RTN","ONCCS3",256,0)
 Q
"RTN","ONCCS3",257,0)
 ;
"RTN","ONCCS3",258,0)
2 ;SSF2 = 988
"RTN","ONCCS3",259,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,6)'="" Q
"RTN","ONCCS3",260,0)
 S $P(^ONCO(165.5,D0,"CS"),U,6)=988
"RTN","ONCCS3",261,0)
 Q
"RTN","ONCCS3",262,0)
 ;
"RTN","ONCCS3",263,0)
3 ;SSF3 = 988
"RTN","ONCCS3",264,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,7)'="" Q
"RTN","ONCCS3",265,0)
 S $P(^ONCO(165.5,D0,"CS"),U,7)=988
"RTN","ONCCS3",266,0)
 Q
"RTN","ONCCS3",267,0)
 ;
"RTN","ONCCS3",268,0)
4 ;SSF4 = 988
"RTN","ONCCS3",269,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,8)'="" Q
"RTN","ONCCS3",270,0)
 S $P(^ONCO(165.5,D0,"CS"),U,8)=988
"RTN","ONCCS3",271,0)
 Q
"RTN","ONCCS3",272,0)
 ;
"RTN","ONCCS3",273,0)
5 ;SSF5 = 988
"RTN","ONCCS3",274,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,9)'="" Q
"RTN","ONCCS3",275,0)
 S $P(^ONCO(165.5,D0,"CS"),U,9)=988
"RTN","ONCCS3",276,0)
 Q
"RTN","ONCCS3",277,0)
 ;
"RTN","ONCCS3",278,0)
6 ;SSF6 = 988
"RTN","ONCCS3",279,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,10)'="" Q
"RTN","ONCCS3",280,0)
 S $P(^ONCO(165.5,D0,"CS"),U,10)=988
"RTN","ONCCS3",281,0)
 Q
"RTN","ONCCS3",282,0)
 ;
"RTN","ONCCS3",283,0)
7 ;SSF7 = 988
"RTN","ONCCS3",284,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,1)'="" Q
"RTN","ONCCS3",285,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,1)=988
"RTN","ONCCS3",286,0)
 Q
"RTN","ONCCS3",287,0)
 ;
"RTN","ONCCS3",288,0)
8 ;SSF8 = 988
"RTN","ONCCS3",289,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,2)'="" Q
"RTN","ONCCS3",290,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,2)=988
"RTN","ONCCS3",291,0)
 Q
"RTN","ONCCS3",292,0)
 ;
"RTN","ONCCS3",293,0)
9 ;SSF9 = 988
"RTN","ONCCS3",294,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,3)'="" Q
"RTN","ONCCS3",295,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,3)=988
"RTN","ONCCS3",296,0)
 Q
"RTN","ONCCS3",297,0)
 ;
"RTN","ONCCS3",298,0)
10 ;SSF10 = 988
"RTN","ONCCS3",299,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,4)'="" Q
"RTN","ONCCS3",300,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,4)=988
"RTN","ONCCS3",301,0)
 Q
"RTN","ONCCS3",302,0)
 ;
"RTN","ONCCS3",303,0)
11 ;SSF11 = 988
"RTN","ONCCS3",304,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,5)'="" Q
"RTN","ONCCS3",305,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,5)=988
"RTN","ONCCS3",306,0)
 Q
"RTN","ONCCS3",307,0)
 ;
"RTN","ONCCS3",308,0)
12 ;SSF12 = 988
"RTN","ONCCS3",309,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,6)'="" Q
"RTN","ONCCS3",310,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,6)=988
"RTN","ONCCS3",311,0)
 Q
"RTN","ONCCS3",312,0)
 ;
"RTN","ONCCS3",313,0)
13 ;SSF13 = 988
"RTN","ONCCS3",314,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,7)'="" Q
"RTN","ONCCS3",315,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,7)=988
"RTN","ONCCS3",316,0)
 Q
"RTN","ONCCS3",317,0)
 ;
"RTN","ONCCS3",318,0)
14 ;SSF14 = 988
"RTN","ONCCS3",319,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,8)'="" Q
"RTN","ONCCS3",320,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,8)=988
"RTN","ONCCS3",321,0)
 Q
"RTN","ONCCS3",322,0)
 ;
"RTN","ONCCS3",323,0)
15 ;SSF15 = 988
"RTN","ONCCS3",324,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,9)'="" Q
"RTN","ONCCS3",325,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,9)=988
"RTN","ONCCS3",326,0)
 Q
"RTN","ONCCS3",327,0)
 ;
"RTN","ONCCS3",328,0)
16 ;SSF16 = 988
"RTN","ONCCS3",329,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,10)'="" Q
"RTN","ONCCS3",330,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,10)=988
"RTN","ONCCS3",331,0)
 Q
"RTN","ONCCS3",332,0)
 ;
"RTN","ONCCS3",333,0)
17 ;SSF17 = 988
"RTN","ONCCS3",334,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,11)'="" Q
"RTN","ONCCS3",335,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,11)=988
"RTN","ONCCS3",336,0)
 Q
"RTN","ONCCS3",337,0)
 ;
"RTN","ONCCS3",338,0)
18 ;SSF18 = 988
"RTN","ONCCS3",339,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,12)'="" Q
"RTN","ONCCS3",340,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,12)=988
"RTN","ONCCS3",341,0)
 Q
"RTN","ONCCS3",342,0)
 ;
"RTN","ONCCS3",343,0)
19 ;SSF19 = 988
"RTN","ONCCS3",344,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,13)'="" Q
"RTN","ONCCS3",345,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,13)=988
"RTN","ONCCS3",346,0)
 Q
"RTN","ONCCS3",347,0)
 ;
"RTN","ONCCS3",348,0)
20 ;SSF20 = 988
"RTN","ONCCS3",349,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,14)'="" Q
"RTN","ONCCS3",350,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,14)=988
"RTN","ONCCS3",351,0)
 Q
"RTN","ONCCS3",352,0)
 ;
"RTN","ONCCS3",353,0)
21 ;SSF21 = 988
"RTN","ONCCS3",354,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,15)'="" Q
"RTN","ONCCS3",355,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,15)=988
"RTN","ONCCS3",356,0)
 Q
"RTN","ONCCS3",357,0)
 ;
"RTN","ONCCS3",358,0)
22 ;SSF22 = 988
"RTN","ONCCS3",359,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,16)'="" Q
"RTN","ONCCS3",360,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,16)=988
"RTN","ONCCS3",361,0)
 Q
"RTN","ONCCS3",362,0)
 ;
"RTN","ONCCS3",363,0)
23 ;SSF23 = 988
"RTN","ONCCS3",364,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,17)'="" Q
"RTN","ONCCS3",365,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,17)=988
"RTN","ONCCS3",366,0)
 Q
"RTN","ONCCS3",367,0)
 ;
"RTN","ONCCS3",368,0)
24 ;SSF24 = 988
"RTN","ONCCS3",369,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,18)'="" Q
"RTN","ONCCS3",370,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,18)=988
"RTN","ONCCS3",371,0)
 Q
"RTN","ONCCS3",372,0)
 ;
"RTN","ONCCS3",373,0)
25 ;SSF25 = 988
"RTN","ONCCS3",374,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,19)'="" Q
"RTN","ONCCS3",375,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,19)=988
"RTN","ONCCS3",376,0)
 Q
"RTN","ONCCS3",377,0)
 ;
"RTN","ONCCS3",378,0)
TS ;TUMOR SIZE (CS) = 988
"RTN","ONCCS3",379,0)
 S $P(^ONCO(165.5,D0,"CS1"),U,10)=988
"RTN","ONCCS3",380,0)
 Q
"RTN","ONCCS3",381,0)
 ;
"RTN","ONCCS3",382,0)
EXT ;EXTENSION (CS) = 988
"RTN","ONCCS3",383,0)
 S $P(^ONCO(165.5,D0,"CS"),U,11)=988
"RTN","ONCCS3",384,0)
 Q
"RTN","ONCCS3",385,0)
 ;
"RTN","ONCCS3",386,0)
EVAL ;TUMOR SIZE/EXT EVAL (CS) = 9
"RTN","ONCCS3",387,0)
 ;LYMPH NODES EVAL (CS) = 9
"RTN","ONCCS3",388,0)
 ;METS EVAL (CS) = 9
"RTN","ONCCS3",389,0)
 S $P(^ONCO(165.5,D0,"CS"),U,1)=9
"RTN","ONCCS3",390,0)
 S $P(^ONCO(165.5,D0,"CS"),U,2)=9
"RTN","ONCCS3",391,0)
 S $P(^ONCO(165.5,D0,"CS"),U,4)=9
"RTN","ONCCS3",392,0)
 Q
"RTN","ONCCS3",393,0)
 ;
"RTN","ONCCS3",394,0)
EVAL1 ;LYMPH NODES EVAL (CS) = 9
"RTN","ONCCS3",395,0)
 ;METS EVAL (CS) = 9
"RTN","ONCCS3",396,0)
 S $P(^ONCO(165.5,D0,"CS"),U,2)=9
"RTN","ONCCS3",397,0)
 S $P(^ONCO(165.5,D0,"CS"),U,4)=9
"RTN","ONCCS3",398,0)
 Q
"RTN","ONCCS3",399,0)
 ;
"RTN","ONCCS3",400,0)
EVAL2 ;LYMPH NODES EVAL (CS) = 9
"RTN","ONCCS3",401,0)
 S $P(^ONCO(165.5,D0,"CS"),U,2)=9
"RTN","ONCCS3",402,0)
 Q
"RTN","ONCCS3",403,0)
 ;
"RTN","ONCCS3",404,0)
LN ;LYMPH NODES (CS) = 988
"RTN","ONCCS3",405,0)
 ;REGIONAL LYMPH NODES EXAMINED = 99
"RTN","ONCCS3",406,0)
 ;REGIONAL LYMPH NODES POSITIVE = 99
"RTN","ONCCS3",407,0)
 S $P(^ONCO(165.5,D0,"CS"),U,12)=988
"RTN","ONCCS3",408,0)
 S $P(^ONCO(165.5,D0,2),U,12)=99
"RTN","ONCCS3",409,0)
 S $P(^ONCO(165.5,D0,2),U,13)=99
"RTN","ONCCS3",410,0)
 Q
"RTN","ONCCS3",411,0)
 ;
"RTN","ONCCS3",412,0)
METS ;METS AT DX (CS) = 98
"RTN","ONCCS3",413,0)
 S $P(^ONCO(165.5,D0,"CS"),U,3)=98
"RTN","ONCCS3",414,0)
 Q
"RTN","ONCCS3",415,0)
 ;
"RTN","ONCCS3",416,0)
SSF25 ;SSF25 = CS SCHEMA DISCRIMINATOR (165.5,240)
"RTN","ONCCS3",417,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,19)=$P($G(^ONCO(165.5,D0,"CS3")),U,1)
"RTN","ONCCS3",418,0)
 Q
"RTN","ONCCS3",419,0)
 ;
"RTN","ONCCS3",420,0)
CLEANUP ;Cleanup
"RTN","ONCCS3",421,0)
 K D0,SCHEMA
"RTN","ONCCS4")
0^22^B112818523
"RTN","ONCCS4",1,0)
ONCCS4 ;Hines OIFO/GWB - Collaborative Staging v2 Stuffing ;06/16/11
"RTN","ONCCS4",2,0)
 ;;2.2;ONCOLOGY;**5**;Jul 31, 2013;Build 6
"RTN","ONCCS4",3,0)
 ;
"RTN","ONCCS4",4,0)
 I $G(SCHEMA)="MouthOther" D  Q
"RTN","ONCCS4",5,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",6,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",7,0)
 .I DATEDX>3131231 S ONCDISC=1 D 8,10    ;CS V02.05
"RTN","ONCCS4",8,0)
 ;
"RTN","ONCCS4",9,0)
 I $G(SCHEMA)="MycosisFungoides" D  Q
"RTN","ONCCS4",10,0)
 .D 2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",11,0)
 ;
"RTN","ONCCS4",12,0)
 I $G(SCHEMA)="MyelomaPlasmaCellDisorder" D  Q
"RTN","ONCCS4",13,0)
 .D 4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",14,0)
 .D TS
"RTN","ONCCS4",15,0)
 .D EVAL
"RTN","ONCCS4",16,0)
 .S $P(^ONCO(165.5,D0,2),U,12)=99
"RTN","ONCCS4",17,0)
 .S $P(^ONCO(165.5,D0,2),U,13)=99
"RTN","ONCCS4",18,0)
 ;
"RTN","ONCCS4",19,0)
 I $G(SCHEMA)="NasalCavity" D  Q
"RTN","ONCCS4",20,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",21,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",22,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS4",23,0)
 ;
"RTN","ONCCS4",24,0)
 I $G(SCHEMA)="Nasopharynx" D  Q
"RTN","ONCCS4",25,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",26,0)
 .D 11,12,13,14,15,16,17,18,19,20,21,22,23,24
"RTN","ONCCS4",27,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8    ;CS V02.05
"RTN","ONCCS4",28,0)
 ;
"RTN","ONCCS4",29,0)
 I $G(SCHEMA)="NETAmpulla" D  Q
"RTN","ONCCS4",30,0)
 .D 1,2,3,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",31,0)
 .I DATEDX>3131231 S ONCDISC=1 D 4    ;CS V02.05
"RTN","ONCCS4",32,0)
 ;
"RTN","ONCCS4",33,0)
 I $G(SCHEMA)="NETColon" D  Q
"RTN","ONCCS4",34,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,5)="" 1
"RTN","ONCCS4",35,0)
 .D 3,4,5,6,7,8,9,10,12,13,14,15,18,19,20,21,22,23,24,25
"RTN","ONCCS4",36,0)
 .I DATEDX>3131231 S ONCDISC=1 D 11    ;CS V02.05
"RTN","ONCCS4",37,0)
 ;
"RTN","ONCCS4",38,0)
 I $G(SCHEMA)="NETRectum" D  Q
"RTN","ONCCS4",39,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,5)="" 1
"RTN","ONCCS4",40,0)
 .D 3,4,5,7,8,9,10,12,13,14,15,18,19,20,21,22,23,24,25
"RTN","ONCCS4",41,0)
 .I DATEDX>3131231 S ONCDISC=1 D 11    ;CS V02.05
"RTN","ONCCS4",42,0)
 ;
"RTN","ONCCS4",43,0)
 I $G(SCHEMA)="NETSmallIntestine" D  Q
"RTN","ONCCS4",44,0)
 .D 1,2,3,4,5,7,8,9,10,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",45,0)
 .I DATEDX>3131231 S ONCDISC=1 D 6    ;CS V02.05
"RTN","ONCCS4",46,0)
 ;
"RTN","ONCCS4",47,0)
 I $G(SCHEMA)="NETStomach" D  Q
"RTN","ONCCS4",48,0)
 .D 2,3,4,5,7,8,9,10,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",49,0)
 .I DATEDX>3131231 S ONCDISC=1 D 6    ;CS V02.05
"RTN","ONCCS4",50,0)
 ;
"RTN","ONCCS4",51,0)
 I $G(SCHEMA)="Orbit" D  Q
"RTN","ONCCS4",52,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",53,0)
 ;
"RTN","ONCCS4",54,0)
 I $G(SCHEMA)="Oropharynx" D  Q
"RTN","ONCCS4",55,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",56,0)
 .D 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",57,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8    ;CS V02.05
"RTN","ONCCS4",58,0)
 ;
"RTN","ONCCS4",59,0)
 I $G(SCHEMA)="Ovary" D  Q
"RTN","ONCCS4",60,0)
 .D 6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",61,0)
 .I DATEDX>3131231 S ONCDISC=1 D 4,5    ;CS V02.05
"RTN","ONCCS4",62,0)
 ;
"RTN","ONCCS4",63,0)
 I $G(SCHEMA)="PalateHard" D  Q
"RTN","ONCCS4",64,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",65,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",66,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS4",67,0)
 ;
"RTN","ONCCS4",68,0)
 I $G(SCHEMA)="PalateSoft" D  Q
"RTN","ONCCS4",69,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",70,0)
 .D 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",71,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8    ;CS V02.05
"RTN","ONCCS4",72,0)
 ;
"RTN","ONCCS4",73,0)
 I $G(SCHEMA)="PancreasBodyTail" D  Q
"RTN","ONCCS4",74,0)
 .D 4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",75,0)
 .I DATEDX>3131231 S ONCDISC=1 D 1,2,3    ;CS V02.05
"RTN","ONCCS4",76,0)
 ;
"RTN","ONCCS4",77,0)
 I $G(SCHEMA)="PancreasHead" D  Q
"RTN","ONCCS4",78,0)
 .D 4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",79,0)
 .I DATEDX>3131231 S ONCDISC=1 D 1,2,3    ;CS V02.05
"RTN","ONCCS4",80,0)
 ;
"RTN","ONCCS4",81,0)
 I $G(SCHEMA)="PancreasOther" D  Q
"RTN","ONCCS4",82,0)
 .D 4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",83,0)
 .I DATEDX>3131231 S ONCDISC=1 D 1,2,3    ;CS V02.05
"RTN","ONCCS4",84,0)
 ;
"RTN","ONCCS4",85,0)
 I $G(SCHEMA)="ParotidGland" D  Q
"RTN","ONCCS4",86,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",87,0)
 .D 10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",88,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8    ;CS V02.05
"RTN","ONCCS4",89,0)
 ;
"RTN","ONCCS4",90,0)
 I $G(SCHEMA)="Penis" D  Q
"RTN","ONCCS4",91,0)
 .D 1,2,3,4,5,6,7,8,9,13,14,15,18,19,20,21,22,23,24,25
"RTN","ONCCS4",92,0)
 .I DATEDX>3131231 S ONCDISC=1 D 11,12,16    ;CS V02.05
"RTN","ONCCS4",93,0)
 ;
"RTN","ONCCS4",94,0)
 I $G(SCHEMA)="Peritoneum" D  Q
"RTN","ONCCS4",95,0)
 .D 5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24
"RTN","ONCCS4",96,0)
 .D SSF25
"RTN","ONCCS4",97,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2,3,4    ;CS V02.05
"RTN","ONCCS4",98,0)
 ;
"RTN","ONCCS4",99,0)
 I $G(SCHEMA)="PeritoneumFemaleGen" D  Q
"RTN","ONCCS4",100,0)
 .D 6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24
"RTN","ONCCS4",101,0)
 .I DATEDX>3131231 S ONCDISC=1 D 4,5    ;CS V02.05
"RTN","ONCCS4",102,0)
 ;
"RTN","ONCCS4",103,0)
 I $G(SCHEMA)="PharyngealTonsil" D  Q
"RTN","ONCCS4",104,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",105,0)
 .D 11,12,13,14,15,16,17,18,19,20,21,22,23,24
"RTN","ONCCS4",106,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8    ;CS V02.05
"RTN","ONCCS4",107,0)
 ;
"RTN","ONCCS4",108,0)
 I $G(SCHEMA)="PharynxOther" D  Q
"RTN","ONCCS4",109,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",110,0)
 .D 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",111,0)
 .D EVAL
"RTN","ONCCS4",112,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8    ;CS V02.05
"RTN","ONCCS4",113,0)
 ;
"RTN","ONCCS4",114,0)
 I $G(SCHEMA)="Placenta" D  Q
"RTN","ONCCS4",115,0)
 .D 3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",116,0)
 .D EVAL2,LN
"RTN","ONCCS4",117,0)
 ;
"RTN","ONCCS4",118,0)
 I $G(SCHEMA)="Pleura" D  Q
"RTN","ONCCS4",119,0)
 .D 6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",120,0)
 .I DATEDX>3131231 S ONCDISC=1 D 3,4,5    ;CS V02.05
"RTN","ONCCS4",121,0)
 ;
"RTN","ONCCS4",122,0)
 I $G(SCHEMA)="Prostate" D  Q
"RTN","ONCCS4",123,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,9)="" 5
"RTN","ONCCS4",124,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,10)="" 6
"RTN","ONCCS4",125,0)
 .D 16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",126,0)
 .I DATEDX>3131231 S ONCDISC=1 D 14,15    ;CS V02.05
"RTN","ONCCS4",127,0)
 ;
"RTN","ONCCS4",128,0)
 I $G(SCHEMA)="Rectum" D  Q
"RTN","ONCCS4",129,0)
 .D 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",130,0)
 .I DATEDX>3131231 S ONCDISC=1 D 5,7,10    ;CS V02.05
"RTN","ONCCS4",131,0)
 ;
"RTN","ONCCS4",132,0)
 I $G(SCHEMA)="RespiratoryOther" D  Q
"RTN","ONCCS4",133,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",134,0)
 .D EVAL
"RTN","ONCCS4",135,0)
 ;
"RTN","ONCCS4",136,0)
 I $G(SCHEMA)="Retinoblastoma" D  Q
"RTN","ONCCS4",137,0)
 .D 7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",138,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2,3,4,5,6    ;CS V02.05
"RTN","ONCCS4",139,0)
 ;
"RTN","ONCCS4",140,0)
 I $G(SCHEMA)="Retroperitoneum" D  Q
"RTN","ONCCS4",141,0)
 .D 5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",142,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2,3,4    ;CS V02.05
"RTN","ONCCS4",143,0)
 ;
"RTN","ONCCS4",144,0)
 I $G(SCHEMA)="SalivaryGlandOther" D  Q
"RTN","ONCCS4",145,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",146,0)
 .D 10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",147,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8    ;CS V02.05
"RTN","ONCCS4",148,0)
 ;
"RTN","ONCCS4",149,0)
 I $G(SCHEMA)="Scrotum" D  Q
"RTN","ONCCS4",150,0)
 .D 2,3,4,5,6,7,8,9,13,14,15,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",151,0)
 .I DATEDX>3131231 S ONCDISC=1 D 10,11    ;CS V02.05
"RTN","ONCCS4",152,0)
 ;
"RTN","ONCCS4",153,0)
 I $G(SCHEMA)="SinusEthmoid" D  Q
"RTN","ONCCS4",154,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",155,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",156,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS4",157,0)
 ;
"RTN","ONCCS4",158,0)
 I $G(SCHEMA)="SinusMaxillary" D  Q
"RTN","ONCCS4",159,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",160,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",161,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS4",162,0)
 ;
"RTN","ONCCS4",163,0)
 I $G(SCHEMA)="SinusOther" D  Q
"RTN","ONCCS4",164,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",165,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",166,0)
 .D EVAL
"RTN","ONCCS4",167,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS4",168,0)
 ;
"RTN","ONCCS4",169,0)
 I $G(SCHEMA)="Skin" D  Q
"RTN","ONCCS4",170,0)
 .D 2,3,4,5,6,7,8,9,13,14,15,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",171,0)
 .I DATEDX>3131231 S ONCDISC=1 D 10    ;CS V02.05
"RTN","ONCCS4",172,0)
 ;
"RTN","ONCCS4",173,0)
 I $G(SCHEMA)="SkinEyelid" D  Q
"RTN","ONCCS4",174,0)
 .D 17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",175,0)
 .I DATEDX>3131231 S ONCDISC=1 D 1,2,4,5,7,9,11,12,13,14,15,16 ;CS V02.05
"RTN","ONCCS4",176,0)
 ;
"RTN","ONCCS4",177,0)
 I $G(SCHEMA)="SmallIntestine" D  Q
"RTN","ONCCS4",178,0)
 .D 6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",179,0)
 .I DATEDX>3131231 S ONCDISC=1 D 4,5    ;CS V02.05
"RTN","ONCCS4",180,0)
 ;
"RTN","ONCCS4",181,0)
 I $G(SCHEMA)="SoftTissue" D  Q
"RTN","ONCCS4",182,0)
 .D 5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",183,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2,4    ;CS V02.05
"RTN","ONCCS4",184,0)
 ;
"RTN","ONCCS4",185,0)
 I $G(SCHEMA)="Stomach" D  Q
"RTN","ONCCS4",186,0)
 .D 3,4,5,6,7,8,9,10,11,12,16,17,18,19,20,21,22,23,24
"RTN","ONCCS4",187,0)
 .I DATEDX>3131231 S ONCDISC=1 D 2,13,14,15    ;CS V02.05
"RTN","ONCCS4",188,0)
 ;
"RTN","ONCCS4",189,0)
 I $G(SCHEMA)="SubmandibularGland" D  Q
"RTN","ONCCS4",190,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",191,0)
 .D 10,11,12,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",192,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8    ;CS V02.05
"RTN","ONCCS4",193,0)
 ;
"RTN","ONCCS4",194,0)
 I $G(SCHEMA)="Testis" D  Q
"RTN","ONCCS4",195,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,5)="" 1
"RTN","ONCCS4",196,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",197,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,7)="" 3
"RTN","ONCCS4",198,0)
 .;D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",199,0)
 .D 11,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",200,0)
 .I DATEDX>3131231 S ONCDISC=1 D 12,14    ;CS V02.05
"RTN","ONCCS4",201,0)
 ;
"RTN","ONCCS4",202,0)
 I $G(SCHEMA)="Thyroid" D  Q
"RTN","ONCCS4",203,0)
 .D 2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",204,0)
 ;
"RTN","ONCCS4",205,0)
 I $G(SCHEMA)="TongueAnterior" D  Q
"RTN","ONCCS4",206,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",207,0)
 .D 12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",208,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8,10    ;CS V02.05
"RTN","ONCCS4",209,0)
 ;
"RTN","ONCCS4",210,0)
 I $G(SCHEMA)="TongueBase" D  Q
"RTN","ONCCS4",211,0)
 .D:$P($G(^ONCO(165.5,D0,"CS")),U,6)="" 2
"RTN","ONCCS4",212,0)
 .D 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",213,0)
 .I DATEDX>3131231 S ONCDISC=1 D 7,8    ;CS V02.05
"RTN","ONCCS4",214,0)
 ;
"RTN","ONCCS4",215,0)
 I $G(SCHEMA)="Trachea" D  Q
"RTN","ONCCS4",216,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",217,0)
 .D EVAL
"RTN","ONCCS4",218,0)
 ;
"RTN","ONCCS4",219,0)
 I $G(SCHEMA)="Urethra" D  Q
"RTN","ONCCS4",220,0)
 .D 2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",221,0)
 ;
"RTN","ONCCS4",222,0)
 I $G(SCHEMA)="UrinaryOther" D  Q
"RTN","ONCCS4",223,0)
 .D 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",224,0)
 .D EVAL
"RTN","ONCCS4",225,0)
 ;
"RTN","ONCCS4",226,0)
 I $G(SCHEMA)="Vagina" D  Q
"RTN","ONCCS4",227,0)
 .D 8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",228,0)
 ;
"RTN","ONCCS4",229,0)
 I $G(SCHEMA)="Vulva" D  Q
"RTN","ONCCS4",230,0)
 .D 1,2,3,4,5,6,7,8,9,16,17,18,19,20,21,22,23,24,25
"RTN","ONCCS4",231,0)
 .I DATEDX>3131231 S ONCDISC=1 D 12,13,14,15    ;CS V02.05
"RTN","ONCCS4",232,0)
 ;
"RTN","ONCCS4",233,0)
 Q
"RTN","ONCCS4",234,0)
 ;
"RTN","ONCCS4",235,0)
1 ;SSF1 = 988
"RTN","ONCCS4",236,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,5)'="" Q
"RTN","ONCCS4",237,0)
 S $P(^ONCO(165.5,D0,"CS"),U,5)=988
"RTN","ONCCS4",238,0)
 Q
"RTN","ONCCS4",239,0)
 ;
"RTN","ONCCS4",240,0)
2 ;SSF2 = 988
"RTN","ONCCS4",241,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,6)'="" Q
"RTN","ONCCS4",242,0)
 S $P(^ONCO(165.5,D0,"CS"),U,6)=988
"RTN","ONCCS4",243,0)
 Q
"RTN","ONCCS4",244,0)
 ;
"RTN","ONCCS4",245,0)
3 ;SSF3 = 988
"RTN","ONCCS4",246,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,7)'="" Q
"RTN","ONCCS4",247,0)
 S $P(^ONCO(165.5,D0,"CS"),U,7)=988
"RTN","ONCCS4",248,0)
 Q
"RTN","ONCCS4",249,0)
 ;
"RTN","ONCCS4",250,0)
4 ;SSF4 = 988
"RTN","ONCCS4",251,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,8)'="" Q
"RTN","ONCCS4",252,0)
 S $P(^ONCO(165.5,D0,"CS"),U,8)=988
"RTN","ONCCS4",253,0)
 Q
"RTN","ONCCS4",254,0)
 ;
"RTN","ONCCS4",255,0)
5 ;SSF5 = 988
"RTN","ONCCS4",256,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,9)'="" Q
"RTN","ONCCS4",257,0)
 S $P(^ONCO(165.5,D0,"CS"),U,9)=988
"RTN","ONCCS4",258,0)
 Q
"RTN","ONCCS4",259,0)
 ;
"RTN","ONCCS4",260,0)
6 ;SSF6 = 988
"RTN","ONCCS4",261,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS")),U,10)'="" Q
"RTN","ONCCS4",262,0)
 S $P(^ONCO(165.5,D0,"CS"),U,10)=988
"RTN","ONCCS4",263,0)
 Q
"RTN","ONCCS4",264,0)
 ;
"RTN","ONCCS4",265,0)
7 ;SSF7 = 988
"RTN","ONCCS4",266,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,1)'="" Q
"RTN","ONCCS4",267,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,1)=988
"RTN","ONCCS4",268,0)
 Q
"RTN","ONCCS4",269,0)
 ;
"RTN","ONCCS4",270,0)
8 ;SSF8 = 988
"RTN","ONCCS4",271,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,2)'="" Q
"RTN","ONCCS4",272,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,2)=988
"RTN","ONCCS4",273,0)
 Q
"RTN","ONCCS4",274,0)
 ;
"RTN","ONCCS4",275,0)
9 ;SSF9 = 988
"RTN","ONCCS4",276,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,3)'="" Q
"RTN","ONCCS4",277,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,3)=988
"RTN","ONCCS4",278,0)
 Q
"RTN","ONCCS4",279,0)
 ;
"RTN","ONCCS4",280,0)
10 ;SSF10 = 988
"RTN","ONCCS4",281,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,4)'="" Q
"RTN","ONCCS4",282,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,4)=988
"RTN","ONCCS4",283,0)
 Q
"RTN","ONCCS4",284,0)
 ;
"RTN","ONCCS4",285,0)
11 ;SSF11 = 988
"RTN","ONCCS4",286,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,5)'="" Q
"RTN","ONCCS4",287,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,5)=988
"RTN","ONCCS4",288,0)
 Q
"RTN","ONCCS4",289,0)
 ;
"RTN","ONCCS4",290,0)
12 ;SSF12 = 988
"RTN","ONCCS4",291,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,6)'="" Q
"RTN","ONCCS4",292,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,6)=988
"RTN","ONCCS4",293,0)
 Q
"RTN","ONCCS4",294,0)
 ;
"RTN","ONCCS4",295,0)
13 ;SSF13 = 988
"RTN","ONCCS4",296,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,7)'="" Q
"RTN","ONCCS4",297,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,7)=988
"RTN","ONCCS4",298,0)
 Q
"RTN","ONCCS4",299,0)
 ;
"RTN","ONCCS4",300,0)
14 ;SSF14 = 988
"RTN","ONCCS4",301,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,8)'="" Q
"RTN","ONCCS4",302,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,8)=988
"RTN","ONCCS4",303,0)
 Q
"RTN","ONCCS4",304,0)
 ;
"RTN","ONCCS4",305,0)
15 ;SSF15 = 988
"RTN","ONCCS4",306,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,9)'="" Q
"RTN","ONCCS4",307,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,9)=988
"RTN","ONCCS4",308,0)
 Q
"RTN","ONCCS4",309,0)
 ;
"RTN","ONCCS4",310,0)
16 ;SSF16 = 988
"RTN","ONCCS4",311,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,10)'="" Q
"RTN","ONCCS4",312,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,10)=988
"RTN","ONCCS4",313,0)
 Q
"RTN","ONCCS4",314,0)
 ;
"RTN","ONCCS4",315,0)
17 ;SSF17 = 988
"RTN","ONCCS4",316,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,11)'="" Q
"RTN","ONCCS4",317,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,11)=988
"RTN","ONCCS4",318,0)
 Q
"RTN","ONCCS4",319,0)
 ;
"RTN","ONCCS4",320,0)
18 ;SSF18 = 988
"RTN","ONCCS4",321,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,12)'="" Q
"RTN","ONCCS4",322,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,12)=988
"RTN","ONCCS4",323,0)
 Q
"RTN","ONCCS4",324,0)
 ;
"RTN","ONCCS4",325,0)
19 ;SSF19 = 988
"RTN","ONCCS4",326,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,13)'="" Q
"RTN","ONCCS4",327,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,13)=988
"RTN","ONCCS4",328,0)
 Q
"RTN","ONCCS4",329,0)
 ;
"RTN","ONCCS4",330,0)
20 ;SSF20 = 988
"RTN","ONCCS4",331,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,14)'="" Q
"RTN","ONCCS4",332,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,14)=988
"RTN","ONCCS4",333,0)
 Q
"RTN","ONCCS4",334,0)
 ;
"RTN","ONCCS4",335,0)
21 ;SSF21 = 988
"RTN","ONCCS4",336,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,15)'="" Q
"RTN","ONCCS4",337,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,15)=988
"RTN","ONCCS4",338,0)
 Q
"RTN","ONCCS4",339,0)
 ;
"RTN","ONCCS4",340,0)
22 ;SSF22 = 988
"RTN","ONCCS4",341,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,16)'="" Q
"RTN","ONCCS4",342,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,16)=988
"RTN","ONCCS4",343,0)
 Q
"RTN","ONCCS4",344,0)
 ;
"RTN","ONCCS4",345,0)
23 ;SSF23 = 988
"RTN","ONCCS4",346,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,17)'="" Q
"RTN","ONCCS4",347,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,17)=988
"RTN","ONCCS4",348,0)
 Q
"RTN","ONCCS4",349,0)
 ;
"RTN","ONCCS4",350,0)
24 ;SSF24 = 988
"RTN","ONCCS4",351,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,18)'="" Q
"RTN","ONCCS4",352,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,18)=988
"RTN","ONCCS4",353,0)
 Q
"RTN","ONCCS4",354,0)
 ;
"RTN","ONCCS4",355,0)
25 ;SSF25 = 988
"RTN","ONCCS4",356,0)
 I ONCDISC=1,$P($G(^ONCO(165.5,D0,"CS2")),U,19)'="" Q
"RTN","ONCCS4",357,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,19)=988
"RTN","ONCCS4",358,0)
 Q
"RTN","ONCCS4",359,0)
 ;
"RTN","ONCCS4",360,0)
TS ;TUMOR SIZE (CS) = 988
"RTN","ONCCS4",361,0)
 S $P(^ONCO(165.5,D0,"CS1"),U,10)=988
"RTN","ONCCS4",362,0)
 Q
"RTN","ONCCS4",363,0)
 ;
"RTN","ONCCS4",364,0)
EXT ;EXTENSION (CS) = 988
"RTN","ONCCS4",365,0)
 S $P(^ONCO(165.5,D0,"CS"),U,11)=988
"RTN","ONCCS4",366,0)
 Q
"RTN","ONCCS4",367,0)
 ;
"RTN","ONCCS4",368,0)
EVAL ;TUMOR SIZE/EXT EVAL (CS) = 9
"RTN","ONCCS4",369,0)
 ;LYMPH NODES EVAL (CS) = 9
"RTN","ONCCS4",370,0)
 ;METS EVAL (CS) = 9
"RTN","ONCCS4",371,0)
 S $P(^ONCO(165.5,D0,"CS"),U,1)=9
"RTN","ONCCS4",372,0)
 S $P(^ONCO(165.5,D0,"CS"),U,2)=9
"RTN","ONCCS4",373,0)
 S $P(^ONCO(165.5,D0,"CS"),U,4)=9
"RTN","ONCCS4",374,0)
 Q
"RTN","ONCCS4",375,0)
 ;
"RTN","ONCCS4",376,0)
EVAL1 ;LYMPH NODES EVAL (CS) = 9
"RTN","ONCCS4",377,0)
 ;METS EVAL (CS) = 9
"RTN","ONCCS4",378,0)
 S $P(^ONCO(165.5,D0,"CS"),U,2)=9
"RTN","ONCCS4",379,0)
 S $P(^ONCO(165.5,D0,"CS"),U,4)=9
"RTN","ONCCS4",380,0)
 Q
"RTN","ONCCS4",381,0)
 ;
"RTN","ONCCS4",382,0)
EVAL2 ;LYMPH NODES EVAL (CS) = 9
"RTN","ONCCS4",383,0)
 S $P(^ONCO(165.5,D0,"CS"),U,2)=9
"RTN","ONCCS4",384,0)
 Q
"RTN","ONCCS4",385,0)
 ;
"RTN","ONCCS4",386,0)
LN ;LYMPH NODES (CS) = 988
"RTN","ONCCS4",387,0)
 ;REGIONAL LYMPH NODES EXAMINED = 99
"RTN","ONCCS4",388,0)
 ;REGIONAL LYMPH NODES POSITIVE = 99
"RTN","ONCCS4",389,0)
 S $P(^ONCO(165.5,D0,"CS"),U,12)=988
"RTN","ONCCS4",390,0)
 S $P(^ONCO(165.5,D0,2),U,12)=99
"RTN","ONCCS4",391,0)
 S $P(^ONCO(165.5,D0,2),U,13)=99
"RTN","ONCCS4",392,0)
 Q
"RTN","ONCCS4",393,0)
 ;
"RTN","ONCCS4",394,0)
METS ;METS AT DX (CS) = 98
"RTN","ONCCS4",395,0)
 S $P(^ONCO(165.5,D0,"CS"),U,3)=98
"RTN","ONCCS4",396,0)
 Q
"RTN","ONCCS4",397,0)
 ;
"RTN","ONCCS4",398,0)
SSF25 ;SSF25 = CS SCHEMA DISCRIMINATOR (165.5,240)
"RTN","ONCCS4",399,0)
 S $P(^ONCO(165.5,D0,"CS2"),U,19)=$P($G(^ONCO(165.5,D0,"CS3")),U,1)
"RTN","ONCCS4",400,0)
 Q
"RTN","ONCCS4",401,0)
 ;
"RTN","ONCCS4",402,0)
CLEANUP ;Cleanup
"RTN","ONCCS4",403,0)
 K D0,SCHEMA
"RTN","ONCDTX")
0^38^B80330484
"RTN","ONCDTX",1,0)
ONCDTX ;Hines OIFO/GWB - Delete treatment data ;06/23/10
"RTN","ONCDTX",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCDTX",3,0)
 ;
"RTN","ONCDTX",4,0)
DEL ;Delete all First Course of Treatment data
"RTN","ONCDTX",5,0)
 I '$D(DATEDX) Q
"RTN","ONCDTX",6,0)
 ;
"RTN","ONCDTX",7,0)
 ;DATE FIRST SURGICAL PROCEDURE (165.5,170)
"RTN","ONCDTX",8,0)
 N TXDT
"RTN","ONCDTX",9,0)
 S TXDT=$P(^ONCO(165.5,DA,3.1),U,38)_"S0"
"RTN","ONCDTX",10,0)
 S $P(^ONCO(165.5,DA,3.1),U,38)=""
"RTN","ONCDTX",11,0)
 K ^ONCO(165.5,"ATX",DA,TXDT)
"RTN","ONCDTX",12,0)
 ;
"RTN","ONCDTX",13,0)
 S $P(^ONCO(165.5,DA,3),U,38)="" D SURR
"RTN","ONCDTX",14,0)
 S $P(^ONCO(165.5,DA,3.1),U,29)="" D SUR
"RTN","ONCDTX",15,0)
 S $P(^ONCO(165.5,DA,3),U,40)="" D SCOPER
"RTN","ONCDTX",16,0)
 S $P(^ONCO(165.5,DA,3.1),U,31)="" D SCOPE
"RTN","ONCDTX",17,0)
 S $P(^ONCO(165.5,DA,3),U,41)="" D SOSNR
"RTN","ONCDTX",18,0)
 S $P(^ONCO(165.5,DA,3.1),U,33)="" D SOSN
"RTN","ONCDTX",19,0)
 S $P(^ONCO(165.5,DA,3),U,33)=""
"RTN","ONCDTX",20,0)
 S $P(^ONCO(165.5,DA,3),U,6)="" D RAD
"RTN","ONCDTX",21,0)
 S $P(^ONCO(165.5,DA,3),U,35)=""
"RTN","ONCDTX",22,0)
 S $P(^ONCO(165.5,DA,3),U,13)="" D CHE
"RTN","ONCDTX",23,0)
 S $P(^ONCO(165.5,DA,3),U,16)="" D HOR
"RTN","ONCDTX",24,0)
 S $P(^ONCO(165.5,DA,3),U,19)="" D IMM
"RTN","ONCDTX",25,0)
 S $P(^ONCO(165.5,DA,3.1),U,36)="" D HTEP
"RTN","ONCDTX",26,0)
 S $P(^ONCO(165.5,DA,3.1),U,39)=""
"RTN","ONCDTX",27,0)
 S $P(^ONCO(165.5,DA,3),U,25)="" D OTH
"RTN","ONCDTX",28,0)
 S $P(^ONCO(165.5,DA,7),U,19)=""
"RTN","ONCDTX",29,0)
 D DELATF^ONCDTX1
"RTN","ONCDTX",30,0)
 K NTDEL
"RTN","ONCDTX",31,0)
 Q
"RTN","ONCDTX",32,0)
 ;
"RTN","ONCDTX",33,0)
SURR ;SURGERY OF PRIMARY (R) (165.5,58.2)
"RTN","ONCDTX",34,0)
 Q:$P(^ONCO(165.5,DA,3),U,38)'=""
"RTN","ONCDTX",35,0)
 S $P(^ONCO(165.5,DA,3),U,34)=""
"RTN","ONCDTX",36,0)
 I $D(NTDEL) Q
"RTN","ONCDTX",37,0)
 W !!,"Deleting data from the following fields...",!
"RTN","ONCDTX",38,0)
 W !,"  SURGERY OF PRIMARY (R)"
"RTN","ONCDTX",39,0)
 W !,"  SURGICAL APPROACH (R)"
"RTN","ONCDTX",40,0)
 N COC,DSATF
"RTN","ONCDTX",41,0)
 D CHKCOC^ONCATF
"RTN","ONCDTX",42,0)
 I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) Q
"RTN","ONCDTX",43,0)
 S DSATF=1,$P(^ONCO(165.5,D0,3.1),U,7)=""
"RTN","ONCDTX",44,0)
 D SPSATFR^ONCDTX1
"RTN","ONCDTX",45,0)
 Q
"RTN","ONCDTX",46,0)
 ;
"RTN","ONCDTX",47,0)
SUR ;SURGERY OF PRIMARY (F) (165.5,58.6)
"RTN","ONCDTX",48,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,29)'=""
"RTN","ONCDTX",49,0)
 S TXDT=$P(^ONCO(165.5,DA,3),U,1)_"S1"
"RTN","ONCDTX",50,0)
 S $P(^ONCO(165.5,DA,3),U,1)=""
"RTN","ONCDTX",51,0)
 K ^ONCO(165.5,"ATX",DA,TXDT)
"RTN","ONCDTX",52,0)
 K TXDT
"RTN","ONCDTX",53,0)
 S $P(^ONCO(165.5,DA,2.3),U,4)=""
"RTN","ONCDTX",54,0)
 S $P(^ONCO(165.5,DA,3),U,28)=""
"RTN","ONCDTX",55,0)
 S $P(^ONCO(165.5,DA,"THY1"),U,36)=""
"RTN","ONCDTX",56,0)
 S $P(^ONCO(165.5,DA,3.1),U,28)=""
"RTN","ONCDTX",57,0)
 S $P(^ONCO(165.5,DA,3),U,26)=""
"RTN","ONCDTX",58,0)
 I $D(NTDEL) Q
"RTN","ONCDTX",59,0)
 W !!,"Deleting data from the following fields...",!
"RTN","ONCDTX",60,0)
 W !,"  SURGERY OF PRIMARY (F)"
"RTN","ONCDTX",61,0)
 W !,"  MOST DEFINITIVE SURG DATE"
"RTN","ONCDTX",62,0)
 W !,"  APPROACH"
"RTN","ONCDTX",63,0)
 W !,"  SURGICAL MARGINS"
"RTN","ONCDTX",64,0)
 W !,"  DATE OF SURGICAL DISCHARGE"
"RTN","ONCDTX",65,0)
 W !,"  READMISSION W/I 30 DAYS/SURG"
"RTN","ONCDTX",66,0)
 W !,"  REASON NO SURGERY OF PRIMARY"
"RTN","ONCDTX",67,0)
 N COC,DSATF
"RTN","ONCDTX",68,0)
 D CHKCOC^ONCATF
"RTN","ONCDTX",69,0)
 I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) Q
"RTN","ONCDTX",70,0)
 S DSATF=1,$P(^ONCO(165.5,D0,3.1),U,30)=""
"RTN","ONCDTX",71,0)
 D SPSATF^ONCDTX1
"RTN","ONCDTX",72,0)
 Q
"RTN","ONCDTX",73,0)
 ;
"RTN","ONCDTX",74,0)
SCOPER ;SCOPE OF LN SURGERY (R) (165.5,138)
"RTN","ONCDTX",75,0)
 Q:$P(^ONCO(165.5,DA,3),U,40)'=""
"RTN","ONCDTX",76,0)
 S $P(^ONCO(165.5,DA,3),U,42)=""
"RTN","ONCDTX",77,0)
 I $D(NTDEL) Q
"RTN","ONCDTX",78,0)
 W !!,"Deleting data from the following fields...",!
"RTN","ONCDTX",79,0)
 W !,"  SCOPE OF LN SURGERY (R)"
"RTN","ONCDTX",80,0)
 W !,"  NUMBER OF LN REMOVED (R)"
"RTN","ONCDTX",81,0)
 N COC,DSCATF
"RTN","ONCDTX",82,0)
 D CHKCOC^ONCATF
"RTN","ONCDTX",83,0)
 I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) Q
"RTN","ONCDTX",84,0)
 S DSCATF=1,$P(^ONCO(165.5,D0,3.1),U,9)=""
"RTN","ONCDTX",85,0)
 D SCPATFR^ONCDTX1
"RTN","ONCDTX",86,0)
 Q
"RTN","ONCDTX",87,0)
 ;
"RTN","ONCDTX",88,0)
SCOPE ;SCOPE OF LN SURGERY (F) (165.5,138.4)
"RTN","ONCDTX",89,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,31)'=""
"RTN","ONCDTX",90,0)
 S TXDT=$P($G(^ONCO(165.5,DA,3.1)),U,22)_"S2"
"RTN","ONCDTX",91,0)
 S $P(^ONCO(165.5,DA,3.1),U,22)=""
"RTN","ONCDTX",92,0)
 K ^ONCO(165.5,"ATX",DA,TXDT)
"RTN","ONCDTX",93,0)
 K TXDT
"RTN","ONCDTX",94,0)
 I $D(NTDEL) Q
"RTN","ONCDTX",95,0)
 W !!,"Deleting data from the following fields...",!
"RTN","ONCDTX",96,0)
 W !,"  SCOPE OF LN SURGERY (F)"
"RTN","ONCDTX",97,0)
 W !,"  SCOPE OF LN SURGERY DATE"
"RTN","ONCDTX",98,0)
 N COC,DSCATF
"RTN","ONCDTX",99,0)
 D CHKCOC^ONCATF
"RTN","ONCDTX",100,0)
 I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) Q
"RTN","ONCDTX",101,0)
 S DSCATF=1,$P(^ONCO(165.5,D0,3.1),U,32)=""
"RTN","ONCDTX",102,0)
 D SCPATF^ONCDTX1
"RTN","ONCDTX",103,0)
 Q
"RTN","ONCDTX",104,0)
 ;
"RTN","ONCDTX",105,0)
SOSNR ;SURG PROC/OTHER SITE (R) (165.5,139)
"RTN","ONCDTX",106,0)
 Q:$P(^ONCO(165.5,DA,3),U,41)'=""
"RTN","ONCDTX",107,0)
 I $D(NTDEL) Q
"RTN","ONCDTX",108,0)
 W !!,"Deleting data from the following fields...",!
"RTN","ONCDTX",109,0)
 W !,"  SURG PROC/OTHER SITE (R)"
"RTN","ONCDTX",110,0)
 N COC,DSOATF
"RTN","ONCDTX",111,0)
 D CHKCOC^ONCATF
"RTN","ONCDTX",112,0)
 I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) Q
"RTN","ONCDTX",113,0)
 S DSOATF=1,$P(^ONCO(165.5,D0,3.1),U,10)=""
"RTN","ONCDTX",114,0)
 D SOSATFR^ONCDTX1
"RTN","ONCDTX",115,0)
 Q
"RTN","ONCDTX",116,0)
 ;
"RTN","ONCDTX",117,0)
SOSN ;SURG PROC/OTHER SITE (F) (165.5,139.4)
"RTN","ONCDTX",118,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,33)'=""
"RTN","ONCDTX",119,0)
 S TXDT=$P($G(^ONCO(165.5,DA,3.1)),U,24)_"S3"
"RTN","ONCDTX",120,0)
 S $P(^ONCO(165.5,DA,3.1),U,24)=""
"RTN","ONCDTX",121,0)
 K ^ONCO(165.5,"ATX",DA,TXDT)
"RTN","ONCDTX",122,0)
 K TXDT
"RTN","ONCDTX",123,0)
 I $D(NTDEL) Q
"RTN","ONCDTX",124,0)
 W !!,"Deleting data from the following fields...",!
"RTN","ONCDTX",125,0)
 W !,"  SURG PROC/OTHER SITE (F)"
"RTN","ONCDTX",126,0)
 W !,"  SURG PROC/OTHER SITE DATE"
"RTN","ONCDTX",127,0)
 N COC,DSOATF
"RTN","ONCDTX",128,0)
 D CHKCOC^ONCATF
"RTN","ONCDTX",129,0)
 I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) Q
"RTN","ONCDTX",130,0)
 S DSOATF=1,$P(^ONCO(165.5,D0,3.1),U,34)=""
"RTN","ONCDTX",131,0)
 D SOSNATF^ONCDTX1
"RTN","ONCDTX",132,0)
 Q
"RTN","ONCDTX",133,0)
 ;
"RTN","ONCDTX",134,0)
RAD ;RADIATON (165.5,51.2)
"RTN","ONCDTX",135,0)
 Q:$P(^ONCO(165.5,DA,3),U,6)'=""
"RTN","ONCDTX",136,0)
 S TXDT=$P(^ONCO(165.5,DA,3),U,4)_"R"
"RTN","ONCDTX",137,0)
 S $P(^ONCO(165.5,DA,3),U,4)=""
"RTN","ONCDTX",138,0)
 K ^ONCO(165.5,"ATX",DA,TXDT)
"RTN","ONCDTX",139,0)
 K TXDT
"RTN","ONCDTX",140,0)
 S $P(^ONCO(165.5,DA,3),U,22)=""
"RTN","ONCDTX",141,0)
 S $P(^ONCO(165.5,DA,3),U,21)=""
"RTN","ONCDTX",142,0)
 S $P(^ONCO(165.5,DA,"BLA2"),U,18)=""
"RTN","ONCDTX",143,0)
 S $P(^ONCO(165.5,DA,"THY1"),U,43)=""
"RTN","ONCDTX",144,0)
 S $P(^ONCO(165.5,DA,24),U,9)=""
"RTN","ONCDTX",145,0)
 S $P(^ONCO(165.5,DA,"THY1"),U,44)=""
"RTN","ONCDTX",146,0)
 S $P(^ONCO(165.5,DA,3),U,20)=""
"RTN","ONCDTX",147,0)
 S $P(^ONCO(165.5,DA,3),U,7)=""
"RTN","ONCDTX",148,0)
 S $P(^ONCO(165.5,DA,"BLA2"),U,16)=""
"RTN","ONCDTX",149,0)
 S $P(^ONCO(165.5,DA,3),U,35)=""
"RTN","ONCDTX",150,0)
 K ^ONCO(165.5,DA,15)
"RTN","ONCDTX",151,0)
 I $D(NTDEL) Q
"RTN","ONCDTX",152,0)
 W !!,"Deleting data from the following fields...",!
"RTN","ONCDTX",153,0)
 W !,"  RADIATION"
"RTN","ONCDTX",154,0)
 W !,"  DATE RADIATION STARTED"
"RTN","ONCDTX",155,0)
 W !,"  LOCATION OF RADIATION TX"
"RTN","ONCDTX",156,0)
 W !,"  RADIATION TREATMENT VOLUME"
"RTN","ONCDTX",157,0)
 W !,"  REGIONAL TREATMENT MODALITY"
"RTN","ONCDTX",158,0)
 W !,"  REGIONAL DOSE:cGy"
"RTN","ONCDTX",159,0)
 W !,"  BOOST TREATMENT MODALITY"
"RTN","ONCDTX",160,0)
 W !,"  BOOST DOSE:cGy"
"RTN","ONCDTX",161,0)
 W !,"  NUMBER OF TXS TO THIS VOLUME"
"RTN","ONCDTX",162,0)
 W !,"  RADIATION/SURGERY SEQUENCE"
"RTN","ONCDTX",163,0)
 W !,"  DATE RADIATION ENDED"
"RTN","ONCDTX",164,0)
 W !,"  REASON FOR NO RADIATION"
"RTN","ONCDTX",165,0)
 W !,"  RX TEXT-RADIATION"
"RTN","ONCDTX",166,0)
 N COC,DRATF
"RTN","ONCDTX",167,0)
 D CHKCOC^ONCATF
"RTN","ONCDTX",168,0)
 I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) Q
"RTN","ONCDTX",169,0)
 S DRATF=1,$P(^ONCO(165.5,D0,3.1),U,12)=""
"RTN","ONCDTX",170,0)
 D RADATF^ONCDTX1
"RTN","ONCDTX",171,0)
 Q
"RTN","ONCDTX",172,0)
 ;
"RTN","ONCDTX",173,0)
CHE ;CHEMOTHERAPY (165.5,53.2)
"RTN","ONCDTX",174,0)
 Q:$P(^ONCO(165.5,DA,3),U,13)'=""
"RTN","ONCDTX",175,0)
 S TXDT=$P(^ONCO(165.5,DA,3),U,11)_"C"
"RTN","ONCDTX",176,0)
 S $P(^ONCO(165.5,DA,3),U,11)=""
"RTN","ONCDTX",177,0)
 K ^ONCO(165.5,"ATX",DA,TXDT)
"RTN","ONCDTX",178,0)
 K TXDT
"RTN","ONCDTX",179,0)
 K ^ONCO(165.5,DA,17)
"RTN","ONCDTX",180,0)
 S $P(^ONCO(165.5,DA,3),U,36)=""
"RTN","ONCDTX",181,0)
 I $D(NTDEL) Q
"RTN","ONCDTX",182,0)
 W !!,"Deleting data from the following fields...",!
"RTN","ONCDTX",183,0)
 W !,"  CHEMOTHERAPY"
"RTN","ONCDTX",184,0)
 W !,"  CHEMOTHERAPY DATE"
"RTN","ONCDTX",185,0)
 W !,"  RX TEXT-CHEMO"
"RTN","ONCDTX",186,0)
 N COC,DCATF
"RTN","ONCDTX",187,0)
 D CHKCOC^ONCATF
"RTN","ONCDTX",188,0)
 I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) Q
"RTN","ONCDTX",189,0)
 S DCATF=1,$P(^ONCO(165.5,D0,3.1),U,14)=""
"RTN","ONCDTX",190,0)
 D CHEMATF^ONCDTX1
"RTN","ONCDTX",191,0)
 Q
"RTN","ONCDTX",192,0)
 ;
"RTN","ONCDTX",193,0)
HOR ;HORMONE THERAPY (165.5,54.2)
"RTN","ONCDTX",194,0)
 Q:$P(^ONCO(165.5,DA,3),U,16)'=""
"RTN","ONCDTX",195,0)
 S TXDT=$P(^ONCO(165.5,DA,3),U,14)_"H"
"RTN","ONCDTX",196,0)
 S $P(^ONCO(165.5,DA,3),U,14)=""
"RTN","ONCDTX",197,0)
 K ^ONCO(165.5,"ATX",DA,TXDT)
"RTN","ONCDTX",198,0)
 K TXDT
"RTN","ONCDTX",199,0)
 K ^ONCO(165.5,DA,18)
"RTN","ONCDTX",200,0)
 S $P(^ONCO(165.5,DA,3),U,37)=""
"RTN","ONCDTX",201,0)
 I $D(NTDEL) Q
"RTN","ONCDTX",202,0)
 W !!,"Deleting data from the following fields...",!
"RTN","ONCDTX",203,0)
 W !,"  HORMONE THERAPY"
"RTN","ONCDTX",204,0)
 W !,"  HORMONE THERAPY DATE"
"RTN","ONCDTX",205,0)
 W !,"  RX TEXT-HORMONE"
"RTN","ONCDTX",206,0)
 N COC,DHATF
"RTN","ONCDTX",207,0)
 D CHKCOC^ONCATF
"RTN","ONCDTX",208,0)
 I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) Q
"RTN","ONCDTX",209,0)
 S DHATF=1,$P(^ONCO(165.5,D0,3.1),U,16)=""
"RTN","ONCDTX",210,0)
 D HORATF^ONCDTX1
"RTN","ONCDTX",211,0)
 Q
"RTN","ONCDTX",212,0)
 ;
"RTN","ONCDTX",213,0)
IMM ;IMMUNOTHERAPY (165.5,55.2)
"RTN","ONCDTX",214,0)
 Q:$P(^ONCO(165.5,DA,3),U,19)'=""
"RTN","ONCDTX",215,0)
 S TXDT=$P(^ONCO(165.5,DA,3),U,17)_"B"
"RTN","ONCDTX",216,0)
 S $P(^ONCO(165.5,DA,3),U,17)=""
"RTN","ONCDTX",217,0)
 K ^ONCO(165.5,"ATX",DA,TXDT)
"RTN","ONCDTX",218,0)
 K TXDT
"RTN","ONCDTX",219,0)
 K ^ONCO(165.5,DA,20)
"RTN","ONCDTX",220,0)
 I $D(NTDEL) Q
"RTN","ONCDTX",221,0)
 W !!,"Deleting data from the following fields...",!
"RTN","ONCDTX",222,0)
 W !,"  IMMUNOTHERAPY"
"RTN","ONCDTX",223,0)
 W !,"  IMMUNOTHERAPY DATE"
"RTN","ONCDTX",224,0)
 W !,"  RX TEXT-BRM"
"RTN","ONCDTX",225,0)
 N COC,DIATF
"RTN","ONCDTX",226,0)
 D CHKCOC^ONCATF
"RTN","ONCDTX",227,0)
 I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) Q
"RTN","ONCDTX",228,0)
 S DIATF=1,$P(^ONCO(165.5,D0,3.1),U,18)=""
"RTN","ONCDTX",229,0)
 D IMMATF^ONCDTX1
"RTN","ONCDTX",230,0)
 Q
"RTN","ONCDTX",231,0)
 ;
"RTN","ONCDTX",232,0)
HTEP ;HEMA TRANS/ENDOCRINE PROC (165.5,53)
"RTN","ONCDTX",233,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,36)'=""
"RTN","ONCDTX",234,0)
 S TXDT=$P(^ONCO(165.5,DA,3.1),U,35)_"E"
"RTN","ONCDTX",235,0)
 S $P(^ONCO(165.5,DA,3.1),U,35)=""
"RTN","ONCDTX",236,0)
 K ^ONCO(165.5,"ATX",DA,TXDT)
"RTN","ONCDTX",237,0)
 K TXDT
"RTN","ONCDTX",238,0)
 I $D(NTDEL) Q
"RTN","ONCDTX",239,0)
 W !!,"Deleting data from the following fields...",!
"RTN","ONCDTX",240,0)
 W !,"  HEMA TRANS/ENDOCRINE PROC"
"RTN","ONCDTX",241,0)
 W !,"  HEMA TRANS/ENDOCRINE PROC DATE"
"RTN","ONCDTX",242,0)
 N COC,DEATF
"RTN","ONCDTX",243,0)
 D CHKCOC^ONCATF
"RTN","ONCDTX",244,0)
 I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) Q
"RTN","ONCDTX",245,0)
 S DEATF=1,$P(^ONCO(165.5,D0,3.2),U,2)=""
"RTN","ONCDTX",246,0)
 D HTEATF^ONCDTX1
"RTN","ONCDTX",247,0)
 Q
"RTN","ONCDTX",248,0)
 ;
"RTN","ONCDTX",249,0)
OTH ;OTHER TREATMENT (165.5,57.2)
"RTN","ONCDTX",250,0)
 Q:$P(^ONCO(165.5,DA,3),U,25)'=""
"RTN","ONCDTX",251,0)
 S TXDT=$P(^ONCO(165.5,DA,3),U,23)_"O"
"RTN","ONCDTX",252,0)
 S $P(^ONCO(165.5,DA,3),U,23)=""
"RTN","ONCDTX",253,0)
 K ^ONCO(165.5,"ATX",DA,TXDT)
"RTN","ONCDTX",254,0)
 K TXDT
"RTN","ONCDTX",255,0)
 K ^ONCO(165.5,DA,21)
"RTN","ONCDTX",256,0)
 I $D(NTDEL) Q
"RTN","ONCDTX",257,0)
 W !!,"Deleting data from the following fields...",!
"RTN","ONCDTX",258,0)
 W !,"  OTHER TREATMENT"
"RTN","ONCDTX",259,0)
 W !,"  OTHER TREATMENT START DATE"
"RTN","ONCDTX",260,0)
 W !,"  RX TEXT-OTHER"
"RTN","ONCDTX",261,0)
 N COC,DOATF
"RTN","ONCDTX",262,0)
 D CHKCOC^ONCATF
"RTN","ONCDTX",263,0)
 I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) Q
"RTN","ONCDTX",264,0)
 S DOATF=1,$P(^ONCO(165.5,D0,3.1),U,20)=""
"RTN","ONCDTX",265,0)
 D OTHATF^ONCDTX1
"RTN","ONCDTX",266,0)
 Q
"RTN","ONCDTX",267,0)
 ;
"RTN","ONCDTX",268,0)
PP ;PALLIATIVE CARE (165.5,12)
"RTN","ONCDTX",269,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,26)'=""
"RTN","ONCDTX",270,0)
 N COC
"RTN","ONCDTX",271,0)
 D CHKCOC^ONCATF
"RTN","ONCDTX",272,0)
 I (COC="00")!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=40)!(COC=41) Q
"RTN","ONCDTX",273,0)
 W !!,"Deleting data from the following fields...",!
"RTN","ONCDTX",274,0)
 S $P(^ONCO(165.5,DA,3.1),U,27)=""
"RTN","ONCDTX",275,0)
 W !,"  PALLIATIVE CARE @FAC",!
"RTN","ONCDTX",276,0)
 Q
"RTN","ONCDTX",277,0)
 ;
"RTN","ONCDTX",278,0)
NCDS ;SURGICAL DX/STAGING PROC (165.5,58.1)
"RTN","ONCDTX",279,0)
 Q:$P(^ONCO(165.5,DA,3),U,27)'=""
"RTN","ONCDTX",280,0)
 S $P(^ONCO(165.5,DA,3),U,31)=""
"RTN","ONCDTX",281,0)
 W !!,"Deleting data from the following fields...",!
"RTN","ONCDTX",282,0)
 W !," SURGICAL DX/STAGING PROC"
"RTN","ONCDTX",283,0)
 W !," SURGICAL DX/STAGING PROC DATE"
"RTN","ONCDTX",284,0)
 N COC,DNCATF
"RTN","ONCDTX",285,0)
 D CHKCOC^ONCATF
"RTN","ONCDTX",286,0)
 I (COC=20)!(COC=21)!(COC=22)!(COC=30)!(COC=31)!(COC=32)!(COC=33)!(COC=36)!(COC=37) Q
"RTN","ONCDTX",287,0)
 S DNCATF=1,$P(^ONCO(165.5,D0,3.1),U,5)=""
"RTN","ONCDTX",288,0)
 D NCDSATF^ONCDTX1
"RTN","ONCDTX",289,0)
 Q
"RTN","ONCDTX",290,0)
 ;
"RTN","ONCDTX",291,0)
SCT ;SUBSEQUENT COURSE OF TREATMENT (165.5,60)
"RTN","ONCDTX",292,0)
 Q:$P(^ONCO(165.5,DA(1),4,DA,0),U,4)'=""
"RTN","ONCDTX",293,0)
 S $P(^ONCO(165.5,DA(1),4,DA,0),U,11)=""
"RTN","ONCDTX",294,0)
 W !!,"Deleting data from the following fields...",!
"RTN","ONCDTX",295,0)
 W !,"  SURGERY OF PRIMARY SITE"
"RTN","ONCDTX",296,0)
 W !,"  SURGERY OF PRIMARY SITE DATE",!
"RTN","ONCDTX",297,0)
 Q
"RTN","ONCDTX",298,0)
 ;
"RTN","ONCDTX",299,0)
CLEANUP ;Cleanup
"RTN","ONCDTX",300,0)
 K D0,DA,DATEDX
"RTN","ONCDTX1")
0^23^B19374560
"RTN","ONCDTX1",1,0)
ONCDTX1 ;Hines OIFO/RTK;DELETE @FAC TREATMENT FIELDS; 09/25/98
"RTN","ONCDTX1",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCDTX1",3,0)
 ;
"RTN","ONCDTX1",4,0)
DELATF ;Delete all treatment @fac
"RTN","ONCDTX1",5,0)
 S $P(^ONCO(165.5,DA,3.1),U,7)="" D SPSATFR    ;50.2
"RTN","ONCDTX1",6,0)
 S $P(^ONCO(165.5,DA,3.1),U,30)="" D SPSATF    ;58.7
"RTN","ONCDTX1",7,0)
 S $P(^ONCO(165.5,DA,3.1),U,9)="" D SCPATFR    ;138.1
"RTN","ONCDTX1",8,0)
 S $P(^ONCO(165.5,DA,3.1),U,32)="" D SCPATF    ;138.5
"RTN","ONCDTX1",9,0)
 S $P(^ONCO(165.5,DA,3.1),U,10)="" D SOSATFR   ;139.1
"RTN","ONCDTX1",10,0)
 S $P(^ONCO(165.5,DA,3.1),U,34)="" D SOSNATF   ;139.5
"RTN","ONCDTX1",11,0)
 S $P(^ONCO(165.5,DA,3.1),U,12)="" D RADATF    ;51.2
"RTN","ONCDTX1",12,0)
 S $P(^ONCO(165.5,DA,3.1),U,14)="" D CHEMATF   ;53.2
"RTN","ONCDTX1",13,0)
 S $P(^ONCO(165.5,DA,3.1),U,16)="" D HORATF    ;54.2
"RTN","ONCDTX1",14,0)
 S $P(^ONCO(165.5,DA,3.1),U,18)="" D IMMATF    ;55.2
"RTN","ONCDTX1",15,0)
 S $P(^ONCO(165.5,DA,3.2),U,2)="" D HTEATF     ;153.2
"RTN","ONCDTX1",16,0)
 S $P(^ONCO(165.5,DA,3.1),U,20)="" D OTHATF    ;57.2
"RTN","ONCDTX1",17,0)
 K NTDEL Q
"RTN","ONCDTX1",18,0)
 ;
"RTN","ONCDTX1",19,0)
NCDSATF ;SURG DX/STAGING PROC @FAC (165.5,58.4)
"RTN","ONCDTX1",20,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,5)'=""
"RTN","ONCDTX1",21,0)
 S $P(^ONCO(165.5,DA,3.1),U,6)=""
"RTN","ONCDTX1",22,0)
 W:$G(DNCATF)'=1 !!,"Deleting data from the following fields...",!
"RTN","ONCDTX1",23,0)
 W !," SURG DX/STAGING PROC @FAC"
"RTN","ONCDTX1",24,0)
 W !," SURG DX/STAGING PROC @FAC DATE"
"RTN","ONCDTX1",25,0)
 Q
"RTN","ONCDTX1",26,0)
 ;
"RTN","ONCDTX1",27,0)
SPSATFR ;SURGERY OF PRIMARY @FAC (R) (165.5,50.2)
"RTN","ONCDTX1",28,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,7)'=""
"RTN","ONCDTX1",29,0)
 I $D(NTDEL) Q
"RTN","ONCDTX1",30,0)
 W:$G(DSATF)'=1 !!,"Deleting data from the following fields...",!
"RTN","ONCDTX1",31,0)
 W !,"  SURGERY OF PRIMARY @FAC (R)"
"RTN","ONCDTX1",32,0)
 Q
"RTN","ONCDTX1",33,0)
 ;
"RTN","ONCDTX1",34,0)
SPSATF ;SURGERY OF PRIMARY @FAC (F) (165.5,58.7)
"RTN","ONCDTX1",35,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,30)'=""
"RTN","ONCDTX1",36,0)
 S $P(^ONCO(165.5,DA,3.1),U,8)=""
"RTN","ONCDTX1",37,0)
 I $D(NTDEL) Q
"RTN","ONCDTX1",38,0)
 W:$G(DSATF)'=1 !!,"Deleting data from the following fields...",!
"RTN","ONCDTX1",39,0)
 W !,"  SURGERY OF PRIMARY @FAC (F)"
"RTN","ONCDTX1",40,0)
 W !,"  MOST DEFINITIVE SURG @FAC DATE"
"RTN","ONCDTX1",41,0)
 Q
"RTN","ONCDTX1",42,0)
 ;
"RTN","ONCDTX1",43,0)
SCPATFR ;SCOPE OF LN SURGERY @FAC (R) (165.5,138.1)
"RTN","ONCDTX1",44,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,9)'=""
"RTN","ONCDTX1",45,0)
 S $P(^ONCO(165.5,DA,3.1),U,11)=""
"RTN","ONCDTX1",46,0)
 I $D(NTDEL) Q
"RTN","ONCDTX1",47,0)
 W:$G(DSCATF)'=1 !!,"Deleting data from the following fields...",!
"RTN","ONCDTX1",48,0)
 W !,"  SCOPE OF LN SURGERY @FAC (R)"
"RTN","ONCDTX1",49,0)
 W !,"  NUMBER OF LN REMOVED @FAC (R)"
"RTN","ONCDTX1",50,0)
 Q
"RTN","ONCDTX1",51,0)
 ;
"RTN","ONCDTX1",52,0)
SCPATF ;SCOPE OF LN SURGERY @FAC (F) (165.5,138.5)
"RTN","ONCDTX1",53,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,32)'=""
"RTN","ONCDTX1",54,0)
 S $P(^ONCO(165.5,DA,3.1),U,23)=""
"RTN","ONCDTX1",55,0)
 I $D(NTDEL) Q
"RTN","ONCDTX1",56,0)
 W:$G(DSCATF)'=1 !!,"Deleting data from the following fields...",!
"RTN","ONCDTX1",57,0)
 W !,"  SCOPE OF LN SURGERY @FAC (F)"
"RTN","ONCDTX1",58,0)
 W !,"  SCOPE OF LN SURGERY @FAC DATE"
"RTN","ONCDTX1",59,0)
 Q
"RTN","ONCDTX1",60,0)
 ;
"RTN","ONCDTX1",61,0)
SOSATFR ;SURG PROC/OTHER SITE @FAC (R) (165.5,139.1)
"RTN","ONCDTX1",62,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,10)'=""
"RTN","ONCDTX1",63,0)
 I $D(NTDEL) Q
"RTN","ONCDTX1",64,0)
 W:$G(DSOATF)'=1 !!,"Deleting data from the following fields...",!
"RTN","ONCDTX1",65,0)
 W !,"  SURG PROC/OTHER SITE @FAC (R)"
"RTN","ONCDTX1",66,0)
 Q
"RTN","ONCDTX1",67,0)
 ;
"RTN","ONCDTX1",68,0)
SOSNATF ;SURG PROC/OTHER SITE @FAC (F) (165.5,139.5)
"RTN","ONCDTX1",69,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,34)'=""
"RTN","ONCDTX1",70,0)
 S $P(^ONCO(165.5,DA,3.1),U,25)=""
"RTN","ONCDTX1",71,0)
 I $D(NTDEL) Q
"RTN","ONCDTX1",72,0)
 W:$G(DSOATF)'=1 !!,"Deleting data from the following fields...",!
"RTN","ONCDTX1",73,0)
 W !,"  SURG PROC/OTHER SITE @FAC (F)"
"RTN","ONCDTX1",74,0)
 W !,"  SURG PROC/OTHER SITE @FAC DATE"
"RTN","ONCDTX1",75,0)
 Q
"RTN","ONCDTX1",76,0)
 ;
"RTN","ONCDTX1",77,0)
RADATF ;Radiation @fac
"RTN","ONCDTX1",78,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,12)'=""
"RTN","ONCDTX1",79,0)
 S $P(^ONCO(165.5,DA,3.1),U,13)=""
"RTN","ONCDTX1",80,0)
 I $D(NTDEL) Q
"RTN","ONCDTX1",81,0)
 W:$G(DRATF)'=1 !!,"Deleting data from the following fields...",!
"RTN","ONCDTX1",82,0)
 W !,"  RADIATION @FAC"
"RTN","ONCDTX1",83,0)
 I $G(DRATF)=1 W ?40
"RTN","ONCDTX1",84,0)
 I $G(DRATF)'=1 W !,"  "
"RTN","ONCDTX1",85,0)
 W "RADIATION @FAC DATE"
"RTN","ONCDTX1",86,0)
 Q
"RTN","ONCDTX1",87,0)
 ;
"RTN","ONCDTX1",88,0)
CHEMATF ;Chemotherapy @fac
"RTN","ONCDTX1",89,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,14)'=""   ;53.3
"RTN","ONCDTX1",90,0)
 S $P(^ONCO(165.5,DA,3.1),U,15)=""    ;53.4
"RTN","ONCDTX1",91,0)
 I $D(NTDEL) Q
"RTN","ONCDTX1",92,0)
 W:$G(DCATF)'=1 !!,"Deleting data from the following fields...",!
"RTN","ONCDTX1",93,0)
 W !,"  CHEMOTHERAPY @FAC"
"RTN","ONCDTX1",94,0)
 W !,"  CHEMOTHERAPY @FAC DATE"
"RTN","ONCDTX1",95,0)
 Q
"RTN","ONCDTX1",96,0)
 ;
"RTN","ONCDTX1",97,0)
HORATF ;Hormone therapy @fac
"RTN","ONCDTX1",98,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,16)'=""   ;54.3
"RTN","ONCDTX1",99,0)
 S $P(^ONCO(165.5,DA,3.1),U,17)=""    ;54.4
"RTN","ONCDTX1",100,0)
 I $D(NTDEL) Q
"RTN","ONCDTX1",101,0)
 W:$G(DHATF)'=1 !!,"Deleting data from the following fields...",!
"RTN","ONCDTX1",102,0)
 W !,"  HORMONE THERAPY @FAC"
"RTN","ONCDTX1",103,0)
 W !,"  HORMONE THERAPY @FAC DATE"
"RTN","ONCDTX1",104,0)
 Q
"RTN","ONCDTX1",105,0)
 ;
"RTN","ONCDTX1",106,0)
IMMATF ;Immunotherapy @fac
"RTN","ONCDTX1",107,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,18)'=""   ;55.3
"RTN","ONCDTX1",108,0)
 S $P(^ONCO(165.5,DA,3.1),U,19)=""    ;55.4
"RTN","ONCDTX1",109,0)
 I $D(NTDEL) Q
"RTN","ONCDTX1",110,0)
 W:$G(DIATF)'=1 !!,"Deleting data from the following fields...",!
"RTN","ONCDTX1",111,0)
 W !,"  IMMUNOTHERAPY @FAC"
"RTN","ONCDTX1",112,0)
 W !,"  IMMUNOTHERAPY @FAC DATE"
"RTN","ONCDTX1",113,0)
 Q
"RTN","ONCDTX1",114,0)
 ;
"RTN","ONCDTX1",115,0)
HTEATF ;Hema Trans/Endocrine Procedure @fac
"RTN","ONCDTX1",116,0)
 Q:$P(^ONCO(165.5,DA,3.2),U,2)'=""   ;153.2
"RTN","ONCDTX1",117,0)
 S $P(^ONCO(165.5,DA,3.2),U,3)=""    ;153.3
"RTN","ONCDTX1",118,0)
 I $D(NTDEL) Q
"RTN","ONCDTX1",119,0)
 W:$G(DEATF)'=1 !!,"Deleting data from the following fields...",!
"RTN","ONCDTX1",120,0)
 W !,"  HEMA TRANS/ENDOCRINE PROC @FAC"
"RTN","ONCDTX1",121,0)
 W !,"  HEMA TRANS/ENDOCRINE PR@FAC DT"
"RTN","ONCDTX1",122,0)
 Q
"RTN","ONCDTX1",123,0)
 ;
"RTN","ONCDTX1",124,0)
OTHATF ;Other treatment @fac
"RTN","ONCDTX1",125,0)
 Q:$P(^ONCO(165.5,DA,3.1),U,20)'=""   ;57.3
"RTN","ONCDTX1",126,0)
 S $P(^ONCO(165.5,DA,3.1),U,21)=""    ;57.4
"RTN","ONCDTX1",127,0)
 I $D(NTDEL) Q
"RTN","ONCDTX1",128,0)
 W:$G(DOATF)'=1 !!,"Deleting data from the following fields...",!
"RTN","ONCDTX1",129,0)
 W !,"  OTHER TREATMENT @FAC"
"RTN","ONCDTX1",130,0)
 W !,"  OTHER TREATMENT @FAC DATE"
"RTN","ONCDTX1",131,0)
 Q
"RTN","ONCNTX1")
0^31^B62064130
"RTN","ONCNTX1",1,0)
ONCNTX1 ;Hines OIFO/GWB - No treatment stuffing ;09/09/10
"RTN","ONCNTX1",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCNTX1",3,0)
 ;
"RTN","ONCNTX1",4,0)
NCDSATF ;SURG DX/STAGING PROC @FAC (165.5,58.4)
"RTN","ONCNTX1",5,0)
 S $P(^ONCO(165.5,DA,3.1),U,5)="00"
"RTN","ONCNTX1",6,0)
 S $P(^ONCO(165.5,D0,3.1),U,6)="0000000"
"RTN","ONCNTX1",7,0)
 S DR="58.4;58.5" D DIQ1^ONCNTX
"RTN","ONCNTX1",8,0)
 W:$D(NTX) !,"SURG DX/STAGING PROC @FAC.....: "_ONC(165.5,DA,58.4,"E")
"RTN","ONCNTX1",9,0)
 W !,"SURG DX/STAGING PROC @FAC DATE: ",ONC(165.5,DA,58.5,"E")
"RTN","ONCNTX1",10,0)
 Q
"RTN","ONCNTX1",11,0)
 ;
"RTN","ONCNTX1",12,0)
SURATFR ;SURGERY OF PRIMARY @FAC (R) (165.5,50.2)
"RTN","ONCNTX1",13,0)
 S $P(^ONCO(165.5,DA,3.1),U,7)=$S(DATEDX>2971231:1,1:"00")
"RTN","ONCNTX1",14,0)
 S DR=50.2 D DIQ1^ONCNTX
"RTN","ONCNTX1",15,0)
 W:$D(NTX) !,"SURGERY OF PRIMARY @FAC.....(R): ",ONC(165.5,DA,50.2,"E")
"RTN","ONCNTX1",16,0)
 K ONC
"RTN","ONCNTX1",17,0)
 Q
"RTN","ONCNTX1",18,0)
 ;
"RTN","ONCNTX1",19,0)
SURATF ;SURGERY OF PRIMARY @FAC (F) (165.5,58.7)
"RTN","ONCNTX1",20,0)
 N TOPX
"RTN","ONCNTX1",21,0)
 S TOPX=$P($G(^ONCO(165.5,DA,2)),U,1)
"RTN","ONCNTX1",22,0)
 I (TOPX=67420)!(TOPX=67421)!(TOPX=67423)!(TOPX=67424)!($E(TOPX,3,4)=76)!(TOPX=67809) D  G SUR1
"RTN","ONCNTX1",23,0)
 .S $P(^ONCO(165.5,DA,3.1),U,30)=1
"RTN","ONCNTX1",24,0)
 S $P(^ONCO(165.5,DA,3.1),U,30)=$S(DATEDX>2971231:1,1:"00")
"RTN","ONCNTX1",25,0)
SUR1 S $P(^ONCO(165.5,DA,3.1),U,8)="0000000"
"RTN","ONCNTX1",26,0)
 S $P(^ONCO(165.5,DA,2.3),U,4)=0
"RTN","ONCNTX1",27,0)
 S DR="58.7;50.3;234" D DIQ1^ONCNTX
"RTN","ONCNTX1",28,0)
 W:$D(NTX) !,"SURGERY OF PRIMARY @FAC.....(F): ",ONC(165.5,DA,58.7,"E")
"RTN","ONCNTX1",29,0)
 W !,"APPROACH.......................: ",ONC(165.5,DA,234,"E")
"RTN","ONCNTX1",30,0)
 W !,"MOST DEFINITIVE SURG @FAC DATE.: ",ONC(165.5,DA,50.3,"E")
"RTN","ONCNTX1",31,0)
 K ONC,TXDT Q
"RTN","ONCNTX1",32,0)
 ;
"RTN","ONCNTX1",33,0)
NODATFR ;SCOPE OF LN SURGERY @FAC (R) (165.5,138.1)
"RTN","ONCNTX1",34,0)
 S $P(^ONCO(165.5,DA,3.1),U,9)=1
"RTN","ONCNTX1",35,0)
 S $P(^ONCO(165.5,DA,3.1),U,11)="00"
"RTN","ONCNTX1",36,0)
 S DR="138.1;140.1" D DIQ1^ONCNTX
"RTN","ONCNTX1",37,0)
 W:$D(NTX) !,"SCOPE OF LN SURGERY @FAC....(R): ",ONC(165.5,DA,138.1,"E")
"RTN","ONCNTX1",38,0)
 W !,"NUMBER OF LN REMOVED @FAC...(R): ",ONC(165.5,DA,140.1,"E")
"RTN","ONCNTX1",39,0)
 Q
"RTN","ONCNTX1",40,0)
 ;
"RTN","ONCNTX1",41,0)
NODEATF ;SCOPE OF LN SURGERY @FAC (F) (165.5,138.5)
"RTN","ONCNTX1",42,0)
 S $P(^ONCO(165.5,DA,3.1),U,32)=0
"RTN","ONCNTX1",43,0)
 S $P(^ONCO(165.5,D0,3.1),U,23)="0000000"
"RTN","ONCNTX1",44,0)
 S DR="138.5;138.3" D DIQ1^ONCNTX
"RTN","ONCNTX1",45,0)
 W:$D(NTX) !,"SCOPE OF LN SURGERY @FAC....(F): ",ONC(165.5,DA,138.5,"E")
"RTN","ONCNTX1",46,0)
 W !,"SCOPE OF LN SURGERY @FAC DATE..: ",ONC(165.5,DA,138.3,"E")
"RTN","ONCNTX1",47,0)
 Q
"RTN","ONCNTX1",48,0)
 ;
"RTN","ONCNTX1",49,0)
SPOATFR ;SURG PROC/OTHER SITE @FAC (R) (165.5,139.1)
"RTN","ONCNTX1",50,0)
 S $P(^ONCO(165.5,DA,3.1),U,10)=1
"RTN","ONCNTX1",51,0)
 S DR=139.1 D DIQ1^ONCNTX
"RTN","ONCNTX1",52,0)
 W:$D(NTX) !,"SURG PROC/OTHER SITE @FAC...(R): ",ONC(165.5,DA,139.1,"E")
"RTN","ONCNTX1",53,0)
 Q
"RTN","ONCNTX1",54,0)
 ;
"RTN","ONCNTX1",55,0)
SOSATFR ;SURG PROC/OTHER SITE @FAC (R) (165.5,139.1)
"RTN","ONCNTX1",56,0)
 S $P(^ONCO(165.5,DA,3.1),U,10)=1
"RTN","ONCNTX1",57,0)
 S DR=139.1 D DIQ1^ONCNTX
"RTN","ONCNTX1",58,0)
 W:$D(NTX) !,"SURG PROC/OTHER SITE @FAC...(R): ",ONC(165.5,DA,139.1,"E")
"RTN","ONCNTX1",59,0)
 Q
"RTN","ONCNTX1",60,0)
 ;
"RTN","ONCNTX1",61,0)
SOSNATF ;SURG PROC/OTHER SITE @FAC (F) (165.5,139.5)
"RTN","ONCNTX1",62,0)
 S $P(^ONCO(165.5,DA,3.1),U,34)=0
"RTN","ONCNTX1",63,0)
 S $P(^ONCO(165.5,D0,3.1),U,25)="0000000"
"RTN","ONCNTX1",64,0)
 S DR="139.5;139.3" D DIQ1^ONCNTX
"RTN","ONCNTX1",65,0)
 W:$D(NTX) !,"SURG PROC/OTHER SITE @FAC...(F): ",ONC(165.5,DA,139.5,"E")
"RTN","ONCNTX1",66,0)
 W !,"SURG PROC/OTHER SITE @FAC DATE.: ",ONC(165.5,DA,139.3,"E")
"RTN","ONCNTX1",67,0)
 Q
"RTN","ONCNTX1",68,0)
 ;
"RTN","ONCNTX1",69,0)
RADATF ;RADIATION @FAC (165.5,51.4)
"RTN","ONCNTX1",70,0)
 N RFNR
"RTN","ONCNTX1",71,0)
 S $P(^ONCO(165.5,DA,3.1),U,12)=0
"RTN","ONCNTX1",72,0)
 S RFNR=$P($G(^ONCO(165.5,DA,3)),U,35)
"RTN","ONCNTX1",73,0)
 I RFNR'=8 D
"RTN","ONCNTX1",74,0)
 .S $P(^ONCO(165.5,DA,3.1),U,13)="0000000"
"RTN","ONCNTX1",75,0)
 I RFNR=8 D
"RTN","ONCNTX1",76,0)
 .S $P(^ONCO(165.5,DA,3.1),U,13)=8888888
"RTN","ONCNTX1",77,0)
 S DR="51.4;51.5" D DIQ1^ONCNTX
"RTN","ONCNTX1",78,0)
 W:$D(NTX) !,"RADIATION @FAC.................: "_ONC(165.5,DA,51.4,"E")
"RTN","ONCNTX1",79,0)
 W !,"RADIATION @FAC DATE............: ",ONC(165.5,DA,51.5,"E")
"RTN","ONCNTX1",80,0)
 Q
"RTN","ONCNTX1",81,0)
 ;
"RTN","ONCNTX1",82,0)
RSSQ ;RADIATION/SURGERY SEQUENCE (165.5,51.3)
"RTN","ONCNTX1",83,0)
 S $P(^ONCO(165.5,DA,3),U,7)=0
"RTN","ONCNTX1",84,0)
 W !,"RADIATION/SURGERY SEQUENCE.....: No rad and/or surg"
"RTN","ONCNTX1",85,0)
 Q
"RTN","ONCNTX1",86,0)
 ;
"RTN","ONCNTX1",87,0)
CHEMATF ;CHEMOTHERAPY @FAC (165.5,53.3)
"RTN","ONCNTX1",88,0)
 S $P(^ONCO(165.5,DA,3.1),U,14)="00"
"RTN","ONCNTX1",89,0)
 I $D(NTX) D
"RTN","ONCNTX1",90,0)
 .N DIE,DL,DP,DQ,DR
"RTN","ONCNTX1",91,0)
 .I COC=38 D
"RTN","ONCNTX1",92,0)
 ..W !,"CHEMOTHERAPY @FAC.............: None"
"RTN","ONCNTX1",93,0)
 .E  S DIE="^ONCO(165.5,",DR=53.3 D ^DIE
"RTN","ONCNTX1",94,0)
CMATFDT S $P(^ONCO(165.5,DA,3.1),U,15)="0000000"
"RTN","ONCNTX1",95,0)
 S DR=53.4 D DIQ1^ONCNTX
"RTN","ONCNTX1",96,0)
 W !,"CHEMOTHERAPY @FAC DATE........: ",ONC(165.5,DA,53.4,"E")
"RTN","ONCNTX1",97,0)
 W !
"RTN","ONCNTX1",98,0)
 Q
"RTN","ONCNTX1",99,0)
 ;
"RTN","ONCNTX1",100,0)
HTATF ;HORMONE THERAPY @FAC (165.5,54.3)
"RTN","ONCNTX1",101,0)
 S $P(^ONCO(165.5,DA,3.1),U,16)="00"
"RTN","ONCNTX1",102,0)
 I $D(NTX) D
"RTN","ONCNTX1",103,0)
 .N DIE,DR,DP,DL,DQ
"RTN","ONCNTX1",104,0)
 .I COC=38 D
"RTN","ONCNTX1",105,0)
 ..W !,"HORMONE THERAPY @FAC..........: None"
"RTN","ONCNTX1",106,0)
 .E  S DIE="^ONCO(165.5,",DR=54.3 D ^DIE
"RTN","ONCNTX1",107,0)
HTATFDT S $P(^ONCO(165.5,DA,3.1),U,17)="0000000"
"RTN","ONCNTX1",108,0)
 S DR=54.4 D DIQ1^ONCNTX
"RTN","ONCNTX1",109,0)
 W !,"HORMONE THERAPY @FAC DATE.....: ",ONC(165.5,DA,54.4,"E")
"RTN","ONCNTX1",110,0)
 W !
"RTN","ONCNTX1",111,0)
 Q
"RTN","ONCNTX1",112,0)
 ;
"RTN","ONCNTX1",113,0)
IMMATF ;IMMUNOTHERAPY @FAC (165.5,55.3)
"RTN","ONCNTX1",114,0)
 S $P(^ONCO(165.5,DA,3.1),U,18)="00"
"RTN","ONCNTX1",115,0)
 I $D(NTX) D
"RTN","ONCNTX1",116,0)
 .N DIE,DR,DP,DL,DQ
"RTN","ONCNTX1",117,0)
 .I COC=38 D
"RTN","ONCNTX1",118,0)
 ..W !,"IMMUNOTHERAPY @FAC............: None"
"RTN","ONCNTX1",119,0)
 .E  S DIE="^ONCO(165.5,",DR=55.3 D ^DIE
"RTN","ONCNTX1",120,0)
IMATFDT S $P(^ONCO(165.5,DA,3.1),U,19)="0000000"
"RTN","ONCNTX1",121,0)
 S DR=55.4 D DIQ1^ONCNTX
"RTN","ONCNTX1",122,0)
 W !,"IMMUNOTHERAPY @FAC DATE.......: ",ONC(165.5,DA,55.4,"E")
"RTN","ONCNTX1",123,0)
 W !
"RTN","ONCNTX1",124,0)
 Q
"RTN","ONCNTX1",125,0)
 ;
"RTN","ONCNTX1",126,0)
HTEPATF ;HEMA TRANS/ENDOCRINE PROC @FAC (165.5,153.2)
"RTN","ONCNTX1",127,0)
 S $P(^ONCO(165.5,DA,3.2),U,2)=1
"RTN","ONCNTX1",128,0)
 I $D(NTX) D
"RTN","ONCNTX1",129,0)
 .N DIE,DR,DP,DL,DQ
"RTN","ONCNTX1",130,0)
 .I COC=38 D
"RTN","ONCNTX1",131,0)
 ..W !,"HEMA TRANS/ENDOCRINE PROC @FAC............: None"
"RTN","ONCNTX1",132,0)
 .E  S DIE="^ONCO(165.5,",DR=153.2 D ^DIE
"RTN","ONCNTX1",133,0)
HEATFDT S $P(^ONCO(165.5,DA,3.2),U,3)="0000000"
"RTN","ONCNTX1",134,0)
 S DR=153.3 D DIQ1^ONCNTX
"RTN","ONCNTX1",135,0)
 W !,"HEMA TRANS/ENDOCRINE PROC @FAC DATE.......: ",ONC(165.5,DA,153.3,"E")
"RTN","ONCNTX1",136,0)
 W !
"RTN","ONCNTX1",137,0)
 Q
"RTN","ONCNTX1",138,0)
 ;
"RTN","ONCNTX1",139,0)
OTHATF ;OTHER TREATMENT @FAC (165.5,57.3)
"RTN","ONCNTX1",140,0)
 I $G(X)'=7 S $P(^ONCO(165.5,DA,3.1),U,20)=0
"RTN","ONCNTX1",141,0)
 S $P(^ONCO(165.5,DA,3.1),U,21)="0000000"
"RTN","ONCNTX1",142,0)
 S DR="57.3;57.4" D DIQ1^ONCNTX
"RTN","ONCNTX1",143,0)
 W:$D(NTX) !,"OTHER TREATMENT @FAC..........: "_ONC(165.5,DA,57.3,"E")
"RTN","ONCNTX1",144,0)
 W !,"OTHER TREATMENT @FAC DATE.....: ",ONC(165.5,DA,57.4,"E")
"RTN","ONCNTX1",145,0)
 Q
"RTN","ONCNTX1",146,0)
 ;
"RTN","ONCNTX1",147,0)
HOR ;HORMONE THERAPY (165.5,54.2)
"RTN","ONCNTX1",148,0)
 I $D(NTX) D
"RTN","ONCNTX1",149,0)
 .N DIE,DR,DP,DL,DQ
"RTN","ONCNTX1",150,0)
 .I COC=38 D
"RTN","ONCNTX1",151,0)
 ..W !,"HORMONE THERAPY...............: None"
"RTN","ONCNTX1",152,0)
 .E  S DIE="^ONCO(165.5,",DR=54.2 D ^DIE
"RTN","ONCNTX1",153,0)
 S TXDT=$P(^ONCO(165.5,DA,3),U,14)_"H"
"RTN","ONCNTX1",154,0)
 K ^ONCO(165.5,"ATX",DA,TXDT)
"RTN","ONCNTX1",155,0)
 S $P(^ONCO(165.5,DA,3),U,14)="0000000" D HTDT^ONCATF1
"RTN","ONCNTX1",156,0)
 S ^ONCO(165.5,"ATX",DA,"0000000H")=""
"RTN","ONCNTX1",157,0)
 N DI,DIC,DIQ K ONC S DIC="^ONCO(165.5,",DA=DA,DIQ="ONC(",DIQ(0)="E"
"RTN","ONCNTX1",158,0)
 S DR=54 D EN^DIQ1
"RTN","ONCNTX1",159,0)
 W !,"HORMONE THERAPY DATE..........: ",ONC(165.5,DA,54,"E")
"RTN","ONCNTX1",160,0)
 K ONC Q
"RTN","ONCNTX1",161,0)
 ;
"RTN","ONCNTX1",162,0)
IMM ;IMMUNOTHERAPY (165.5,55.2)
"RTN","ONCNTX1",163,0)
 I $D(NTX) D
"RTN","ONCNTX1",164,0)
 .N DIE,DR,DP,DL,DQ
"RTN","ONCNTX1",165,0)
 .I COC=38 D
"RTN","ONCNTX1",166,0)
 ..W !,"IMMUNOTHERAPY.................: None"
"RTN","ONCNTX1",167,0)
 .E  S DIE="^ONCO(165.5,",DR=55.2 D ^DIE
"RTN","ONCNTX1",168,0)
 S TXDT=$P(^ONCO(165.5,DA,3),U,17)_"B"
"RTN","ONCNTX1",169,0)
 K ^ONCO(165.5,"ATX",DA,TXDT)
"RTN","ONCNTX1",170,0)
 S $P(^ONCO(165.5,DA,3),U,17)="0000000" D IMMDT^ONCATF1
"RTN","ONCNTX1",171,0)
 S ^ONCO(165.5,"ATX",DA,"0000000B")=""
"RTN","ONCNTX1",172,0)
 N DI,DIC,DIQ,X K ONC S DIC="^ONCO(165.5,",DA=DA,DIQ="ONC(",DIQ(0)="E"
"RTN","ONCNTX1",173,0)
 S DR=55 D EN^DIQ1
"RTN","ONCNTX1",174,0)
 W !,"IMMUNOTHERAPY DATE:...........: ",ONC(165.5,DA,55,"E")
"RTN","ONCNTX1",175,0)
 K ONC Q
"RTN","ONCNTX1",176,0)
 ;
"RTN","ONCNTX1",177,0)
HTEP ;HEMA TRANS/ENDOCRINE PROC (165.5,153)
"RTN","ONCNTX1",178,0)
 I $D(NTX) D
"RTN","ONCNTX1",179,0)
 .N DIE,DR,DP,DL,DQ
"RTN","ONCNTX1",180,0)
 .I COC=38 D
"RTN","ONCNTX1",181,0)
 ..W !,"HEMA TRANS/ENDOCRINE PROC.....: No transplant proc/endocrine tx"
"RTN","ONCNTX1",182,0)
 .E  S DIE="^ONCO(165.5,",DR=153 D ^DIE
"RTN","ONCNTX1",183,0)
 S TXDT=$P(^ONCO(165.5,DA,3.1),U,35)_"E"
"RTN","ONCNTX1",184,0)
 K ^ONCO(165.5,"ATX",DA,TXDT)
"RTN","ONCNTX1",185,0)
 S $P(^ONCO(165.5,DA,3.1),U,35)="0000000"
"RTN","ONCNTX1",186,0)
 S ^ONCO(165.5,"ATX",DA,"0000000E")=""
"RTN","ONCNTX1",187,0)
 N DI,DIC,DIQ,X K ONC S DIC="^ONCO(165.5,",DA=DA,DIQ="ONC(",DIQ(0)="E"
"RTN","ONCNTX1",188,0)
 S DR=153.1 D EN^DIQ1
"RTN","ONCNTX1",189,0)
 W !,"HEMA TRANS/ENDOCRINE PROC DATE: ",ONC(165.5,DA,153.1,"E")
"RTN","ONCNTX1",190,0)
 K ONC W ! Q
"RTN","ONCNTX1",191,0)
 ;
"RTN","ONCNTX1",192,0)
SSS ;SYSTEMIC/SURGERY SEQUENCE (165.5,15)
"RTN","ONCNTX1",193,0)
 S $P(^ONCO(165.5,DA,3.1),U,39)=0
"RTN","ONCNTX1",194,0)
 W !,"SYSTEMIC/SURGERY SEQUENCE.....: No systemic and/or surgery"
"RTN","ONCNTX1",195,0)
 W !
"RTN","ONCNTX1",196,0)
 Q
"RTN","ONCNTX1",197,0)
 ;
"RTN","ONCNTX1",198,0)
OTH ;OTHER TREATMENT (165.5,57.2)
"RTN","ONCNTX1",199,0)
 S TXDT=$P(^ONCO(165.5,DA,3),U,23)_"O"
"RTN","ONCNTX1",200,0)
 K ^ONCO(165.5,"ATX",DA,TXDT)
"RTN","ONCNTX1",201,0)
 S $P(^ONCO(165.5,DA,3),U,23)="0000000" D OTHDT^ONCATF1
"RTN","ONCNTX1",202,0)
 S ^ONCO(165.5,"ATX",DA,"0000000O")=""
"RTN","ONCNTX1",203,0)
 N DI,DIC,DIQ,X K ONC S DIC="^ONCO(165.5,",DA=DA,DIQ="ONC(",DIQ(0)="E"
"RTN","ONCNTX1",204,0)
 S DR="57.2;57" D EN^DIQ1
"RTN","ONCNTX1",205,0)
 W:$D(NTX) !,"OTHER TREATMENT...............: ",ONC(165.5,DA,57.2,"E")
"RTN","ONCNTX1",206,0)
 W !,"OTHER TREATMENT DATE:.........: ",ONC(165.5,DA,57,"E")
"RTN","ONCNTX1",207,0)
 K ONC Q
"RTN","ONCNTX1",208,0)
 ;
"RTN","ONCNTX1",209,0)
PRO ;PROTOCOL PARTICIPATION (165.5,560)
"RTN","ONCNTX1",210,0)
 S $P(^ONCO(165.5,DA,"STS2"),U,31)="00"
"RTN","ONCNTX1",211,0)
 S $P(^ONCO(165.5,DA,3.1),U,4)="0000"
"RTN","ONCNTX1",212,0)
 N DI,DIC,DIQ K ONC S DIC="^ONCO(165.5,",DA=DA,DIQ="ONC(",DIQ(0)="E"
"RTN","ONCNTX1",213,0)
 S DR="133;560" D EN^DIQ1
"RTN","ONCNTX1",214,0)
 W !,"PROTOCOL PARTICIPATION........: ",ONC(165.5,DA,560,"E")
"RTN","ONCNTX1",215,0)
 W !,"YEAR PUT ON PROTOCOL..........: ",ONC(165.5,DA,133,"E")
"RTN","ONCNTX1",216,0)
 K ONC Q
"RTN","ONCNTX1",217,0)
 ;
"RTN","ONCNTX1",218,0)
RR ;RECONSTRUCTION/RESTORATION (165.5,23)
"RTN","ONCNTX1",219,0)
 N LAST,NUM,RR,RTK
"RTN","ONCNTX1",220,0)
 F RTK=0:0 S RTK=$O(^ONCO(164,RTK)) Q:RTK'>0  D
"RTN","ONCNTX1",221,0)
 .I '$D(^ONCO(164,RTK,"RR5",0)) Q
"RTN","ONCNTX1",222,0)
 .W !,RTK
"RTN","ONCNTX1",223,0)
 .S NUM=$O(^ONCO(164,RTK,"RR5",0))
"RTN","ONCNTX1",224,0)
 .W !?3,"FIRST:",?11,NUM,?14,$G(^ONCO(164,RTK,"RR5",NUM,0))
"RTN","ONCNTX1",225,0)
 .F RR=0:0 S RR=$O(^ONCO(164,RTK,"RR5",RR)) Q:RR="B"  S LAST=RR
"RTN","ONCNTX1",226,0)
 .W !?3,"LAST :",?11,LAST,?14,$G(^ONCO(164,RTK,"RR5",LAST,0))
"RTN","ONCNTX1",227,0)
 Q
"RTN","ONCNTX1",228,0)
 ;
"RTN","ONCNTX1",229,0)
RRDEFIT ;RECONSTRUCTION/RESTORATION default (165.5,23)
"RTN","ONCNTX1",230,0)
 I X="No reconstruction/restoration" S X=0 Q
"RTN","ONCNTX1",231,0)
 I X="NA"!(X["Unknown; not stated") S X=9 Q
"RTN","ONCNTX1",232,0)
 Q
"RTN","ONCNTX1",233,0)
 ;
"RTN","ONCNTX1",234,0)
RFNSHLP ;REASON NO SURGERY OF PRIMARY (165.5,58) help
"RTN","ONCNTX1",235,0)
 W !,"   Record the reason that no surgery was perforned on the primary site."
"RTN","ONCNTX1",236,0)
 Q
"RTN","ONCNTX1",237,0)
 ;
"RTN","ONCNTX1",238,0)
RFNRHLP ;REASON FOR NO RADIATION (165.5,75) help
"RTN","ONCNTX1",239,0)
 W !,"   Records the reason that no regional radiation"
"RTN","ONCNTX1",240,0)
 W !,"   therapy was administered to the primary site."
"RTN","ONCNTX1",241,0)
 W !
"RTN","ONCNTX1",242,0)
 W !,"   For further information see FORDS page 168."
"RTN","ONCNTX1",243,0)
 Q
"RTN","ONCNTX1",244,0)
 ;
"RTN","ONCNTX1",245,0)
EXIT W ! S Y="@424"
"RTN","ONCNTX1",246,0)
 Q
"RTN","ONCNTX1",247,0)
 ;
"RTN","ONCNTX1",248,0)
CLEANUP ;Cleanup
"RTN","ONCNTX1",249,0)
 K COC,D0,DA,DATEDX,NTX,Y
"RTN","ONCOAIF")
0^37^B52773252
"RTN","ONCOAIF",1,0)
ONCOAIF ;Hines OIFO/GWB - [PF Post/Edit Follow-up] ;11/08/10
"RTN","ONCOAIF",2,0)
 ;;2.2;ONCOLOGY;**1,4,5**;Jul 31, 2013;Build 6
"RTN","ONCOAIF",3,0)
 ;
"RTN","ONCOAIF",4,0)
BEG W @IOF,!," Post/Edit Follow-up"
"RTN","ONCOAIF",5,0)
 W !," -------------------",!
"RTN","ONCOAIF",6,0)
 Q
"RTN","ONCOAIF",7,0)
 ;
"RTN","ONCOAIF",8,0)
PAT ;[PF Post/Edit Follow-up]
"RTN","ONCOAIF",9,0)
 N ONCDUZ,ONCDT
"RTN","ONCOAIF",10,0)
 S ONCDUZ=DUZ,ONCDT=DT
"RTN","ONCOAIF",11,0)
 D BEG
"RTN","ONCOAIF",12,0)
 S DIC("A")=" Post/Edit Follow-Up for patient: "
"RTN","ONCOAIF",13,0)
 S DIC="^ONCO(160,",DIC(0)="AEMQZ" D ^DIC K DIC
"RTN","ONCOAIF",14,0)
 G KILL:Y<0
"RTN","ONCOAIF",15,0)
 S (ONCOD0,DA,D0)=+Y,ONCONM=Y(0,0)
"RTN","ONCOAIF",16,0)
 D SUM,LST^ONCODLF G DIE
"RTN","ONCOAIF",17,0)
 ;
"RTN","ONCOAIF",18,0)
LST ;Follow-Up
"RTN","ONCOAIF",19,0)
 W @IOF,!!," **********FOLLOW-UP**********",!!
"RTN","ONCOAIF",20,0)
 W " Patient: ",ONCONM
"RTN","ONCOAIF",21,0)
 W:$D(XDD) !," Date of Inpatient Discharge: ",XDD
"RTN","ONCOAIF",22,0)
 Q
"RTN","ONCOAIF",23,0)
 ;
"RTN","ONCOAIF",24,0)
EN ;FOLLOW-UP entry when patient has been pre-selected
"RTN","ONCOAIF",25,0)
 K F,DIC,DO,ONCOD1,LC,VS,NF,XDT,XDD,XR
"RTN","ONCOAIF",26,0)
 S ONCDUZ=DUZ,ONCDT=DT
"RTN","ONCOAIF",27,0)
 S PRESEL=1
"RTN","ONCOAIF",28,0)
 ;S XDT=$S('$D(ONCOD0P):"",1:$$GET1^DIQ(165.5,ONCOD0P,1.1,"I"))
"RTN","ONCOAIF",29,0)
 S XDT=""
"RTN","ONCOAIF",30,0)
 I (XDT="")!(XDT="0000000")!(XDT="9999999") D LST G DIE
"RTN","ONCOAIF",31,0)
 D DD S F=$P($G(^ONCO(160,ONCOD0,"F",0)),U,4)
"RTN","ONCOAIF",32,0)
 I F<1 D DLC,LST S F=1 G DIE
"RTN","ONCOAIF",33,0)
RF S D0=ONCOD0 W !! K DXS,DIOT D BEG W ! D LST^ONCODLF G DIE
"RTN","ONCOAIF",34,0)
 ;
"RTN","ONCOAIF",35,0)
DIE K DXS
"RTN","ONCOAIF",36,0)
 S ONCDUZ=DUZ,ONCDT=DT
"RTN","ONCOAIF",37,0)
 S ONCOSTAT=1,DA=ONCOD0,DR="[ONCO FOLLOWUP]",DIE="^ONCO(160,",FG=0
"RTN","ONCOAIF",38,0)
 W ! D ^DIE
"RTN","ONCOAIF",39,0)
 I 'FG S ONCOVS="" D UPOUT,CHKCMP I $G(FOLINP)="YES" G DIE
"RTN","ONCOAIF",40,0)
 I $O(^ONCO(160,ONCOD0,"F",0))="" Q
"RTN","ONCOAIF",41,0)
 D CHKCHG
"RTN","ONCOAIF",42,0)
 S XD0=ONCOD0 D DUPPRI^ONCFUNC
"RTN","ONCOAIF",43,0)
 I 'FG Q
"RTN","ONCOAIF",44,0)
 ;
"RTN","ONCOAIF",45,0)
UPDAT S D0=ONCOD0 K DXS,DIOT W ! D LST^ONCODLF,UPD^ONCOCRF
"RTN","ONCOAIF",46,0)
 N Y,ONCOD
"RTN","ONCOAIF",47,0)
 K DIQ,ONC S DIC="^ONCO(160,",DR=".01;16;15;15.2",DA=ONCOD0,DIQ="ONC"
"RTN","ONCOAIF",48,0)
 D EN^DIQ1 W !
"RTN","ONCOAIF",49,0)
 W !," Name..: ",ONC(160,ONCOD0,.01)
"RTN","ONCOAIF",50,0)
 W ?35,"Date Last Contact: ",ONC(160,ONCOD0,16)
"RTN","ONCOAIF",51,0)
 W !," Status: ",ONC(160,ONCOD0,15)
"RTN","ONCOAIF",52,0)
 W ?35,"Follow-Up Status.: ",ONC(160,ONCOD0,15.2)
"RTN","ONCOAIF",53,0)
 D SUM
"RTN","ONCOAIF",54,0)
C K DIR S DIR("A")="DATA OK",DIR("B")="Yes",DIR(0)="Y"
"RTN","ONCOAIF",55,0)
 D ^DIR Q:(Y=U)!(Y="")  G DIE:'Y
"RTN","ONCOAIF",56,0)
 I ONCOVS G KILL:$G(ONCRFOPT)=1 S ONCFRMPF=1 G REC  ;G KILL:$D(PRESEL) G PAT:'$D(REC),REC
"RTN","ONCOAIF",57,0)
 W !! D DEAD^ONCOFDP
"RTN","ONCOAIF",58,0)
 Q:$D(ONCOAI)  G REC:$D(REC) D KILL K ONCONM S ONCOD=1 Q
"RTN","ONCOAIF",59,0)
 ;
"RTN","ONCOAIF",60,0)
UPOUT ;Up-arrow out check before deleting
"RTN","ONCOAIF",61,0)
 Q:'$D(ONCOD1)
"RTN","ONCOAIF",62,0)
 Q:'$D(^ONCO(160,ONCOD0,"F",ONCOD1,0))
"RTN","ONCOAIF",63,0)
 Q:$P(^ONCO(160,ONCOD0,"F",ONCOD1,0),U,8)=1
"RTN","ONCOAIF",64,0)
 D DEL
"RTN","ONCOAIF",65,0)
 Q
"RTN","ONCOAIF",66,0)
 ;
"RTN","ONCOAIF",67,0)
DEL ;Delete FOLLOW-UP entry
"RTN","ONCOAIF",68,0)
 S DA(1)=ONCOD0,DA=ONCOD1,DIK="^ONCO(160,"_DA(1)_",""F"","
"RTN","ONCOAIF",69,0)
 D ^DIK S ONCOVS=""
"RTN","ONCOAIF",70,0)
 W:$D(^ONCO(160,ONCOD0,"F",ONCOD1,0)) $P(^(0),U,8)
"RTN","ONCOAIF",71,0)
 W !!," *********************ENTRY DELETED*************************"
"RTN","ONCOAIF",72,0)
 W !!," You have not entered all of the required information."
"RTN","ONCOAIF",73,0)
 W !!,"(Last Tumor Status(es) have been reset for this patient's primary site(s).)",!!
"RTN","ONCOAIF",74,0)
 H 1
"RTN","ONCOAIF",75,0)
 Q
"RTN","ONCOAIF",76,0)
 ;
"RTN","ONCOAIF",77,0)
CHKCMP ;Check for 'Complete" abstracts with no follow-up
"RTN","ONCOAIF",78,0)
 N AN,ASTAT,PID,PN,PRIM,PSCODE,SEQ
"RTN","ONCOAIF",79,0)
 Q:$O(^ONCO(160,ONCOD0,"F",0))'=""
"RTN","ONCOAIF",80,0)
 S PRIM=0 F  S PRIM=$O(^ONCO(165.5,"C",ONCOD0,PRIM)) Q:PRIM'>0  D
"RTN","ONCOAIF",81,0)
 .I $P($G(^ONCO(165.5,PRIM,7)),U,2)=3 S ASTAT(PRIM)=""
"RTN","ONCOAIF",82,0)
 Q:'$D(ASTAT)
"RTN","ONCOAIF",83,0)
 W !
"RTN","ONCOAIF",84,0)
 W !," There is no follow-up information for this patient."
"RTN","ONCOAIF",85,0)
 W !," This patient has a 'Complete' abstract."
"RTN","ONCOAIF",86,0)
 W !," A 'Complete' abstract requires at least one follow-up."
"RTN","ONCOAIF",87,0)
 W !
"RTN","ONCOAIF",88,0)
 K DIR
"RTN","ONCOAIF",89,0)
 S DIR("A")=" Do you wish to enter a follow-up at this time"
"RTN","ONCOAIF",90,0)
 S DIR("B")="YES",DIR(0)="Y" D ^DIR
"RTN","ONCOAIF",91,0)
 I Y=1 S FOLINP="YES" Q
"RTN","ONCOAIF",92,0)
 S FOLINP="NO"
"RTN","ONCOAIF",93,0)
 S PRIM=0 F  S PRIM=$O(ASTAT(PRIM)) Q:PRIM'>0  D
"RTN","ONCOAIF",94,0)
 .S DIE="^ONCO(165.5,"
"RTN","ONCOAIF",95,0)
 .S DA=PRIM
"RTN","ONCOAIF",96,0)
 .S DR="90///@;91///0;92///@;197///@"
"RTN","ONCOAIF",97,0)
 .D ^DIE
"RTN","ONCOAIF",98,0)
 W !!," The ABSTRACT STATUS has been changed to 0 (Incomplete)"
"RTN","ONCOAIF",99,0)
 W !," for the following abstracts:",!
"RTN","ONCOAIF",100,0)
 S PRIM=0 F  S PRIM=$O(ASTAT(PRIM)) Q:PRIM'>0  D
"RTN","ONCOAIF",101,0)
 .S PN=$$GET1^DIQ(165.5,PRIM,.02)
"RTN","ONCOAIF",102,0)
 .S AN=$$GET1^DIQ(165.5,PRIM,.05)
"RTN","ONCOAIF",103,0)
 .S SEQ=$$GET1^DIQ(165.5,PRIM,.06)
"RTN","ONCOAIF",104,0)
 .S PID=$$GET1^DIQ(165.5,PRIM,61)
"RTN","ONCOAIF",105,0)
 .S PSCODE=$$GET1^DIQ(165.5,PRIM,20.1)
"RTN","ONCOAIF",106,0)
 .W !?1,PID,"  ",PSCODE,"  ",AN,"/",SEQ
"RTN","ONCOAIF",107,0)
 .W !
"RTN","ONCOAIF",108,0)
 K DIR S DIR(0)="E" D ^DIR
"RTN","ONCOAIF",109,0)
 Q
"RTN","ONCOAIF",110,0)
 ;
"RTN","ONCOAIF",111,0)
CHKCHG ;Check for checksum changes to 'Complete' abstracts
"RTN","ONCOAIF",112,0)
 N CHECKSUM,CNT,ONCDST,ONCDTTIM
"RTN","ONCOAIF",113,0)
 D NOW^%DTC S ONCDTTIM=%
"RTN","ONCOAIF",114,0)
 S CNT=0 W !!," Checking for changes to 'Complete' abstracts" S PRIM=0 F  S PRIM=$O(^ONCO(165.5,"C",ONCOD0,PRIM)) Q:PRIM'>0  D
"RTN","ONCOAIF",115,0)
 .W "."
"RTN","ONCOAIF",116,0)
 .S DIE="^ONCO(165.5,",DA=PRIM,DR="198///^S X=ONCDTTIM" D ^DIE
"RTN","ONCOAIF",117,0)
 .I $P($G(^ONCO(165.5,PRIM,7)),U,2)=3 D
"RTN","ONCOAIF",118,0)
 ..S EDITS="NO" S D0=PRIM D NAACCR^ONCGENED K EDITS
"RTN","ONCOAIF",119,0)
 ..S CHECKSUM=$$CRC32^ONCSNACR(.ONCDST)
"RTN","ONCOAIF",120,0)
 ..I CHECKSUM'=$P($G(^ONCO(165.5,PRIM,"EDITS")),U,1) D
"RTN","ONCOAIF",121,0)
 ...S $P(^ONCO(165.5,PRIM,"EDITS"),U,1)=CHECKSUM
"RTN","ONCOAIF",122,0)
 ...W !!," Re-computing checksum value for 'Complete' abstract ",$$GET1^DIQ(165.5,PRIM,.061)
"RTN","ONCOAIF",123,0)
 ...S CNT=CNT+1
"RTN","ONCOAIF",124,0)
 W:CNT=0 " No changes found."
"RTN","ONCOAIF",125,0)
 Q
"RTN","ONCOAIF",126,0)
 ;
"RTN","ONCOAIF",127,0)
REC ;[RF Recurrence/Sub Tx Follow-up]
"RTN","ONCOAIF",128,0)
 N D,ONCDUZ,ONCDT,TX
"RTN","ONCOAIF",129,0)
 S ONCDUZ=DUZ,ONCDT=DT
"RTN","ONCOAIF",130,0)
 S XR=1,REC="" W @IOF,!," Recurrence/Sub Tx Follow-up"
"RTN","ONCOAIF",131,0)
 W !," ---------------------------",!
"RTN","ONCOAIF",132,0)
 I $G(ONCFRMPF)=1 G RECPF ;if pt pre-selected from ^PF skip pt select
"RTN","ONCOAIF",133,0)
 S ONCRFOPT=1,DIC("A")="Select Patient for Recurrence: "
"RTN","ONCOAIF",134,0)
 S DIC="^ONCO(160,",DIC(0)="AEQMZ" D ^DIC K DIC
"RTN","ONCOAIF",135,0)
 G KILL:Y<0
"RTN","ONCOAIF",136,0)
 S (D0,ONCOD0)=+Y,ONCONM=Y(0,0)
"RTN","ONCOAIF",137,0)
 N Y
"RTN","ONCOAIF",138,0)
RECPF K DIQ,ONC S DIC="^ONCO(160,",DR=".01;2;3;8;10;15",DA=ONCOD0,DIQ="ONC"
"RTN","ONCOAIF",139,0)
 D EN^DIQ1 W !
"RTN","ONCOAIF",140,0)
 W !?2,"Name.........: ",ONC(160,ONCOD0,.01)
"RTN","ONCOAIF",141,0)
 W ?35,"Race.........: ",ONC(160,ONCOD0,8)
"RTN","ONCOAIF",142,0)
 W !?2,"SSN..........: ",ONC(160,ONCOD0,2)
"RTN","ONCOAIF",143,0)
 W ?35,"Sex..........: ",ONC(160,ONCOD0,10)
"RTN","ONCOAIF",144,0)
 W !?2,"Date of Birth: ",ONC(160,ONCOD0,3)
"RTN","ONCOAIF",145,0)
 W ?35,"Status.......: ",ONC(160,ONCOD0,15)
"RTN","ONCOAIF",146,0)
 D SUM
"RTN","ONCOAIF",147,0)
 K DIC W !?1,"Select Primary for Recurrence: ",!
"RTN","ONCOAIF",148,0)
 ;S D="C",DIC="^ONCO(165.5,",X=ONCOD0,DIC(0)="EFZ" D IX^DIC G:Y<0 REC
"RTN","ONCOAIF",149,0)
 ;added Type of First Recurrence P *2.2*4
"RTN","ONCOAIF",150,0)
 N ONC16012,ONC1655
"RTN","ONCOAIF",151,0)
 S D="C",DIC="^ONCO(165.5,",X=ONCOD0,DIC(0)="EFZ"
"RTN","ONCOAIF",152,0)
 S DIC("W")="S ONC16012=$P($G(^(5)),U,2),ONC1655=+Y D FST^ONCODSP"
"RTN","ONCOAIF",153,0)
 D IX^DIC G:Y<0 KILL
"RTN","ONCOAIF",154,0)
 I Y'=" " S (ONCOD0P,DA)=+Y,DR="[ONCO RECURRENCE FOLLOWUP]",DIE="^ONCO(165.5,",DATEDX=$P(^ONCO(165.5,DA,0),U,16),TX=$P($G(^ONCO(165.5,DA,2)),U,1) D ^DIE D CHKCHG S AB=2,ONCOD0P=D0 G EN:$D(ONCRFOPT)
"RTN","ONCOAIF",155,0)
 G KILL Q
"RTN","ONCOAIF",156,0)
 ;
"RTN","ONCOAIF",157,0)
RE ;Recurrence
"RTN","ONCOAIF",158,0)
 W !!," Recurrence"," ----------"
"RTN","ONCOAIF",159,0)
 ; If Type of First Recurrence is not set yet, then check the
"RTN","ONCOAIF",160,0)
 ; Cancer Status field of Tumor Status multiple to set defaults for
"RTN","ONCOAIF",161,0)
 ; Type of First Rec, Rec Date 1st-Flag & Distant Sites 1-3 fields
"RTN","ONCOAIF",162,0)
 ;  -- Called from [ONCO RECURRENCE FOLLOWUP] template --
"RTN","ONCOAIF",163,0)
 S ONCTOFR=$P($G(^ONCO(165.5,ONCOD0P,5)),"^",2) I ONCTOFR'="" K ONCTOFR Q
"RTN","ONCOAIF",164,0)
 S ONCTSDAT=$O(^ONCO(165.5,ONCOD0P,"TS","AA",0)) Q:ONCTSDAT=""
"RTN","ONCOAIF",165,0)
 S ONCTSIEN=$O(^ONCO(165.5,ONCOD0P,"TS","AA",ONCTSDAT,0)) Q:ONCTSIEN=""
"RTN","ONCOAIF",166,0)
 S ONCTSCS=$P($G(^ONCO(165.5,ONCOD0P,"TS",ONCTSIEN,0)),"^",2)
"RTN","ONCOAIF",167,0)
 S ONCTOFRV=""
"RTN","ONCOAIF",168,0)
 I ONCTSCS=1 S ONCTOFRV=$O(^ONCO(160.12,"B","00","")),ONCRD1F=11
"RTN","ONCOAIF",169,0)
 I ONCTSCS=2 S ONCTOFRV=$O(^ONCO(160.12,"B",70,"")),ONCRD1F=11
"RTN","ONCOAIF",170,0)
 I ONCTSCS=9 S ONCTOFRV=$O(^ONCO(160.12,"B",99,"")),ONCRD1F=10
"RTN","ONCOAIF",171,0)
 ;Hard set the nodes since we are within an Input Template when called
"RTN","ONCOAIF",172,0)
 ;so ^DIE not working - there are no X-refs to set
"RTN","ONCOAIF",173,0)
 S $P(^ONCO(165.5,ONCOD0P,5),U,2,5)=ONCTOFRV_"^0^0^0"
"RTN","ONCOAIF",174,0)
 S $P(^ONCO(165.5,ONCOD0P,27),U,26)=ONCRD1F
"RTN","ONCOAIF",175,0)
 ;
"RTN","ONCOAIF",176,0)
 K ONCRD1F,ONCTOFR,ONCTOFRV,ONCTSDAT,ONCTSIEN,ONCTSCS Q
"RTN","ONCOAIF",177,0)
 ;
"RTN","ONCOAIF",178,0)
STX ;Subsequent Course of Treatment
"RTN","ONCOAIF",179,0)
 W !!," Subsequent Course of Treatment"
"RTN","ONCOAIF",180,0)
 W !," ------------------------------"
"RTN","ONCOAIF",181,0)
 Q
"RTN","ONCOAIF",182,0)
 ;
"RTN","ONCOAIF",183,0)
KILL ;Kill variables
"RTN","ONCOAIF",184,0)
 K ONCOSTAT,XR,DA,DIC,DIE,DIK,DIOT,DIR,DO,DR,DXS,F,FG,FOLINP
"RTN","ONCOAIF",185,0)
 K ONCOD1,ONCOLC,X,XD1,XD0,LC,ONCOVS,REC
"RTN","ONCOAIF",186,0)
 K AB,DATEDX,PRESEL,ONCFRMPF,ONCRFOPT
"RTN","ONCOAIF",187,0)
 Q
"RTN","ONCOAIF",188,0)
 ;
"RTN","ONCOAIF",189,0)
DD ;Date format
"RTN","ONCOAIF",190,0)
 S XDD=$E(XDT,4,5)_"/"_$E(XDT,6,7)_"/"_($E(XDT,1,3)+1700) Q
"RTN","ONCOAIF",191,0)
 ;
"RTN","ONCOAIF",192,0)
DLC ;Create FOLLOW-UP
"RTN","ONCOAIF",193,0)
 K DA
"RTN","ONCOAIF",194,0)
 S DA(1)=ONCOD0,DIC="^ONCO(160,"_DA(1)_","_"""F"""_","
"RTN","ONCOAIF",195,0)
 S DLAYGO=160,X=XDT,DIC(0)="ZL"
"RTN","ONCOAIF",196,0)
 I '$D(^ONCO(160,DA(1),"F")) S ^ONCO(160,DA(1),"F",0)="^160.04DAI^^"
"RTN","ONCOAIF",197,0)
 D FILE^DICN S ONCOLC=XDT,DIE=DIC,DR="1////1;2////2;" D ^DIE
"RTN","ONCOAIF",198,0)
 K DA,DIC,DLAYGO,DIE
"RTN","ONCOAIF",199,0)
 Q
"RTN","ONCOAIF",200,0)
 ;
"RTN","ONCOAIF",201,0)
SUM ;Primary summary
"RTN","ONCOAIF",202,0)
 S XD0=D0
"RTN","ONCOAIF",203,0)
 N J,XD1 W !!
"RTN","ONCOAIF",204,0)
 S J=0,XD1=0 F  S XD1=$O(^ONCO(165.5,"C",XD0,XD1)) Q:XD1'>0  I $D(^ONCO(165.5,XD1,0)) S J=J+1 D ^ONCOCOML
"RTN","ONCOAIF",205,0)
 Q
"RTN","ONCOAIF",206,0)
 ;
"RTN","ONCOAIF",207,0)
CLEANUP ;Cleanup
"RTN","ONCOAIF",208,0)
 K D0,ONCOAI,ONCOD0,ONCOD0P
"RTN","ONCOAIP")
0^8^B111415051
"RTN","ONCOAIP",1,0)
ONCOAIP ;Hines OIFO/GWB - [EE Abstract Edit Primary] ;09/26/11
"RTN","ONCOAIP",2,0)
 ;;2.2;ONCOLOGY;**1,4,5**;Jul 31, 2013;Build 6
"RTN","ONCOAIP",3,0)
 ;
"RTN","ONCOAIP",4,0)
ED ;[EE Abstract Edit Primary]
"RTN","ONCOAIP",5,0)
 W @IOF,!
"RTN","ONCOAIP",6,0)
 S DIC="^ONCO(165.5,",DIC(0)="AEQZM"
"RTN","ONCOAIP",7,0)
 S DIC("A")=" Select primary or patient name: "
"RTN","ONCOAIP",8,0)
 D ^DIC K DIC G EX:Y<0
"RTN","ONCOAIP",9,0)
 S ONCOD0P=+Y
"RTN","ONCOAIP",10,0)
 S ONCOD0=$P(^ONCO(165.5,+Y,0),U,2)
"RTN","ONCOAIP",11,0)
 S ONCONM=$$GET1^DIQ(160,ONCOD0,.01,"E")
"RTN","ONCOAIP",12,0)
 S ONCOEDIT=1
"RTN","ONCOAIP",13,0)
 ;
"RTN","ONCOAIP",14,0)
EN N CHECKVER
"RTN","ONCOAIP",15,0)
 S ONCOYR=($$TNMED^ONCOU55(ONCOD0P)>3)
"RTN","ONCOAIP",16,0)
 S ABSTAT=$P($G(^ONCO(165.5,ONCOD0P,7)),U,2)
"RTN","ONCOAIP",17,0)
 S CHECKSUM=$P($G(^ONCO(165.5,ONCOD0P,"EDITS")),U,1)
"RTN","ONCOAIP",18,0)
 S CHECKVER=$P($G(^ONCO(165.5,ONCOD0P,"EDITS")),U,2)
"RTN","ONCOAIP",19,0)
 I ABSTAT=3,((CHECKSUM="")!(CHECKVER<12)) D
"RTN","ONCOAIP",20,0)
 .W !,"Recalculating checksum..."
"RTN","ONCOAIP",21,0)
 .S EDITS="NO" S D0=ONCOD0P D NAACCR^ONCGENED K EDITS
"RTN","ONCOAIP",22,0)
 .S CHECKSUM=$$CRC32^ONCSNACR(.ONCDST)
"RTN","ONCOAIP",23,0)
 .S $P(^ONCO(165.5,ONCOD0P,"EDITS"),U,1)=CHECKSUM
"RTN","ONCOAIP",24,0)
 .S $P(^ONCO(165.5,ONCOD0P,"EDITS"),U,2)=EXTVER
"RTN","ONCOAIP",25,0)
 S DIE="^ONCO(165.5,",DA=ONCOD0P,DR="[ONCO ABSTRACT-I]",ONCOL1=0
"RTN","ONCOAIP",26,0)
 L +^ONCO(165.5,DA):0 I $T D ^DIE L -^ONCO(165.5,DA) S ONCOL1=1
"RTN","ONCOAIP",27,0)
 I 'ONCOL1 W !!,"This primary is being edited by another user" H 3 Q:'$D(ONCOEDIT)  K ONCOL1 G ED
"RTN","ONCOAIP",28,0)
 ;I $D(Y) G EN
"RTN","ONCOAIP",29,0)
 S ABSTAT=$P($G(^ONCO(165.5,ONCOD0P,7)),U,2)
"RTN","ONCOAIP",30,0)
 I ABSTAT'=3 D
"RTN","ONCOAIP",31,0)
 .S DIE="^ONCO(165.5,"
"RTN","ONCOAIP",32,0)
 .S DA=ONCOD0P
"RTN","ONCOAIP",33,0)
 .S DR="197///@"
"RTN","ONCOAIP",34,0)
 .D ^DIE
"RTN","ONCOAIP",35,0)
 I ABSTAT=3 D CHANGE^ONCGENED I $G(Y)="@0" G EN
"RTN","ONCOAIP",36,0)
 D FOL^ONCOAI
"RTN","ONCOAIP",37,0)
 I CHECKSUM'=$P($G(^ONCO(165.5,ONCOD0P,"EDITS")),U,1) D
"RTN","ONCOAIP",38,0)
 .N ONCDTTIM
"RTN","ONCOAIP",39,0)
 .D NOW^%DTC S ONCDTTIM=%
"RTN","ONCOAIP",40,0)
 .S DIE="^ONCO(165.5,",DA=ONCOD0P,DR="198///^S X=ONCDTTIM" D ^DIE
"RTN","ONCOAIP",41,0)
 K ONCOL1,LYMPHOMA,RFDEF,TFDEF,DFDEF
"RTN","ONCOAIP",42,0)
 I $D(ONCOOUT) Q
"RTN","ONCOAIP",43,0)
 I $D(Y) Q:'$D(ONCOEDIT)  G ED
"RTN","ONCOAIP",44,0)
 Q
"RTN","ONCOAIP",45,0)
 ;
"RTN","ONCOAIP",46,0)
PAIR ;LATERALITY (165.5,28)
"RTN","ONCOAIP",47,0)
 D TOPNAM
"RTN","ONCOAIP",48,0)
 S DATEDX=$P($G(^ONCO(165.5,D0,0)),U,16)
"RTN","ONCOAIP",49,0)
 Q:TOP=""
"RTN","ONCOAIP",50,0)
 I TOP=67342,$P(^ONCO(165.5,D0,2),U,8)="" S $P(^ONCO(165.5,D0,2),U,8)=1 Q
"RTN","ONCOAIP",51,0)
 S PO=$P($G(^ONCO(164,TOP,0)),U,7)
"RTN","ONCOAIP",52,0)
 I PO="",$P(^ONCO(165.5,D0,2),U,8)="" S $P(^ONCO(165.5,D0,2),U,8)=0
"RTN","ONCOAIP",53,0)
 I DATEDX<3040000,(TOP=67700)!(TOP=67710)!(TOP=67711)!(TOP=67712)!(TOP=67713)!(TOP=67714)!(TOP=67722)!(TOP=67723)!(TOP=67724)!(TOP=67725),$P(^ONCO(165.5,D0,2),U,8)="" S $P(^ONCO(165.5,D0,2),U,8)=0
"RTN","ONCOAIP",54,0)
 K PO
"RTN","ONCOAIP",55,0)
 ;
"RTN","ONCOAIP",56,0)
 ;Stuff TEXT-PRIMARY SITE TITLE (165.5,100)
"RTN","ONCOAIP",57,0)
 S TEXT=$P($G(^ONCO(164,TOP,0)),U,1)
"RTN","ONCOAIP",58,0)
 S:$P($G(^ONCO(165.5,D0,8)),U,1)="" $P(^ONCO(165.5,D0,8),U,1)=TEXT
"RTN","ONCOAIP",59,0)
 K TEXT
"RTN","ONCOAIP",60,0)
 Q
"RTN","ONCOAIP",61,0)
 ;
"RTN","ONCOAIP",62,0)
HISTXT ;Stuff TEXT-HISTOLOGY TITLE (165.5,101)
"RTN","ONCOAIP",63,0)
 S HSTI=$$HIST^ONCFUNC(D0,.HSTFLD,.HISTNAM)
"RTN","ONCOAIP",64,0)
 S TEXT=HISTNAM
"RTN","ONCOAIP",65,0)
 S:$P($G(^ONCO(165.5,D0,8)),U,2)="" $P(^ONCO(165.5,D0,8),U,2)=$E(TEXT,1,100)
"RTN","ONCOAIP",66,0)
 K HSTI,TEXT
"RTN","ONCOAIP",67,0)
 D:$P($G(^ONCO(165.5,D0,0)),U,16)>3031231 ^ONCCS2
"RTN","ONCOAIP",68,0)
 Q
"RTN","ONCOAIP",69,0)
 ;
"RTN","ONCOAIP",70,0)
MEN ;Primary Menu Options
"RTN","ONCOAIP",71,0)
 K DXS,ONCOOUT,DASHES,PATNAM,SITEGP,SSN
"RTN","ONCOAIP",72,0)
 S $P(DASHES,"-",80)="-"
"RTN","ONCOAIP",73,0)
 S NODE0=^ONCO(165.5,D0,0)
"RTN","ONCOAIP",74,0)
 S S=$P(NODE0,U,1),SITEGP=$P(^ONCO(164.2,S,0),U,1)
"RTN","ONCOAIP",75,0)
 S Y=$P(NODE0,U,2),C=$P(^DD(165.5,.02,0),U,2) D Y^DIQ S PATNAM=Y
"RTN","ONCOAIP",76,0)
 S SAVED0=D0 S D0=$P(NODE0,U,2) D SSN^ONCOES S SSN=X,D0=SAVED0
"RTN","ONCOAIP",77,0)
 S DATEDX=$P(NODE0,U,16)
"RTN","ONCOAIP",78,0)
 D ^ONCPHC
"RTN","ONCOAIP",79,0)
 S COC=$E($$GET1^DIQ(165.5,D0,.04),1,2)
"RTN","ONCOAIP",80,0)
 S OSP=$O(^ONCO(160.1,"C",DUZ(2),0))
"RTN","ONCOAIP",81,0)
 I OSP="" S OSP=$O(^ONCO(160.1,0))
"RTN","ONCOAIP",82,0)
 S IIN=$P($G(^ONCO(160.1,OSP,1)),U,4)
"RTN","ONCOAIP",83,0)
 S RH=$P($G(^ONCO(160.19,IIN,0)),U,2)
"RTN","ONCOAIP",84,0)
 K OSP
"RTN","ONCOAIP",85,0)
 D TOPNAM
"RTN","ONCOAIP",86,0)
 W @IOF
"RTN","ONCOAIP",87,0)
 W !,?1,PATNAM,?SITTAB,SITEGP,!,?1,SSN,?TOPTAB,TOPNAM," ",TOPCOD,!,DASHES
"RTN","ONCOAIP",88,0)
 W !,?25,"Primary Menu Options",!,DASHES
"RTN","ONCOAIP",89,0)
 W !?22,"1. Patient Identification"
"RTN","ONCOAIP",90,0)
 W !?22,"2. Cancer Identification"
"RTN","ONCOAIP",91,0)
 W !?22,"3. Stage of Disease at Diagnosis"
"RTN","ONCOAIP",92,0)
 W !?22,"   Collaborative Staging (2004+ cases)"
"RTN","ONCOAIP",93,0)
 W !?22,"4. First Course of Treatment"
"RTN","ONCOAIP",94,0)
 W !?22,"5. Performance Measures"
"RTN","ONCOAIP",95,0)
 W !?22,"6. Over-ride Flags"
"RTN","ONCOAIP",96,0)
 W !?22,"7. Case Administration"
"RTN","ONCOAIP",97,0)
 W !?22,"8. EDIT Modifiers"
"RTN","ONCOAIP",98,0)
 W !?22,"9. User-Defined Fields"
"RTN","ONCOAIP",99,0)
 W !!?22,"A  All - Complete Abstract"
"RTN","ONCOAIP",100,0)
 ;
"RTN","ONCOAIP",101,0)
A K ONCOANS,X,Y
"RTN","ONCOAIP",102,0)
 R !!?25,"Enter option: All//",X:DTIME
"RTN","ONCOAIP",103,0)
 S:X="" (ONCOANS,X)="A"
"RTN","ONCOAIP",104,0)
 G:X["?" HP
"RTN","ONCOAIP",105,0)
 I X=U!'$T S Y="",ONCOOUT=U Q
"RTN","ONCOAIP",106,0)
 I (X="A")!(X="ALL")!(X="all")!(X="All") S ONCOANS="A",Y=1 G Y
"RTN","ONCOAIP",107,0)
 I X="CS",$P($G(^ONCO(165.5,D0,0)),U,16)>3039999 S ONCOANS=3,Y=292 G Y
"RTN","ONCOAIP",108,0)
 S (ONCOANS,Y)=X I X<1!(X>9) W "??" G A
"RTN","ONCOAIP",109,0)
 ;
"RTN","ONCOAIP",110,0)
Y S Y="@"_Y
"RTN","ONCOAIP",111,0)
 Q
"RTN","ONCOAIP",112,0)
 ;
"RTN","ONCOAIP",113,0)
HP W !!,?10,"Select 'A' for the complete abstract"
"RTN","ONCOAIP",114,0)
 W !?10,"Select 1-9 for the desired subsection",!
"RTN","ONCOAIP",115,0)
 G A
"RTN","ONCOAIP",116,0)
 ;
"RTN","ONCOAIP",117,0)
PAT ;Patient Identification
"RTN","ONCOAIP",118,0)
 S SECTION="Patient Identification" D SECTION
"RTN","ONCOAIP",119,0)
 K DXS,DIOT D PI^ONCPCI
"RTN","ONCOAIP",120,0)
 Q
"RTN","ONCOAIP",121,0)
 ;
"RTN","ONCOAIP",122,0)
CAN S SECTION="Cancer Identification" D SECTION
"RTN","ONCOAIP",123,0)
 D PAIR
"RTN","ONCOAIP",124,0)
 K DXS,DIOT S D0=ONCOD0P D CI^ONCPCI
"RTN","ONCOAIP",125,0)
 Q
"RTN","ONCOAIP",126,0)
 ;
"RTN","ONCOAIP",127,0)
EXT S SECTION="Stage of Disease at Diagnosis" D SECTION
"RTN","ONCOAIP",128,0)
 S SY="@31"
"RTN","ONCOAIP",129,0)
 S S=$P(^ONCO(165.5,D0,0),U,1)
"RTN","ONCOAIP",130,0)
 S T=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCOAIP",131,0)
 S H=$$HIST^ONCFUNC(D0)
"RTN","ONCOAIP",132,0)
 I (S=35)!($$LEUKEMIA^ONCOAIP2(D0))!((S>64)&(S<71)) D  G PSD
"RTN","ONCOAIP",133,0)
 .I $P($G(^ONCO(165.5,D0,0)),U,16)>3111231,$E(T,3,4)=77,H=98233 Q
"RTN","ONCOAIP",134,0)
 .;I H=97613,S=77 Q
"RTN","ONCOAIP",135,0)
 .S N=$S($E(H,1,4)=9731:"999^10^9",1:"999^80^9") ;Plasmacytoma, NOS
"RTN","ONCOAIP",136,0)
 .S N=$S(S=65:"999^99^9^99^99^9^9^9^9",1:N_"^99^99^9^9^9^7") ;Unk primary
"RTN","ONCOAIP",137,0)
 .I (T=67422)&(L'=1)&(H'=91403) S $P(N,U,2)=99,$P(N,U,9)=9   ;Spleen
"RTN","ONCOAIP",138,0)
 .S $P(^ONCO(165.5,D0,2),U,9,17)=N
"RTN","ONCOAIP",139,0)
 .D NOSTAGE
"RTN","ONCOAIP",140,0)
 .;S SY="@313"  ;skip to Other Staging System (165.5,39)
"RTN","ONCOAIP",141,0)
 .S SY=227,ONCSKP39=1  ;ONC*2.2*5 goto field (165.5,227) then skip to 39
"RTN","ONCOAIP",142,0)
 .I S=65 W !?18,"====> UNKNOWN PRIMARY - No EOD/TNM coding <====" Q
"RTN","ONCOAIP",143,0)
 .W !?18,"====> SYSTEMIC DISEASE - No EOD/TMN coding <===="
"RTN","ONCOAIP",144,0)
 ;
"RTN","ONCOAIP",145,0)
PSD K DXS,DIOT S D0=ONCOD0P D ^ONCPSD K DXS
"RTN","ONCOAIP",146,0)
 S Y=SY
"RTN","ONCOAIP",147,0)
 Q
"RTN","ONCOAIP",148,0)
 ;
"RTN","ONCOAIP",149,0)
NOSTAGE ;No staging
"RTN","ONCOAIP",150,0)
 S $P(^ONCO(165.5,D0,2),U,25)=88   ;37.1 CT
"RTN","ONCOAIP",151,0)
 S $P(^ONCO(165.5,D0,2),U,26)=88   ;37.2 CN
"RTN","ONCOAIP",152,0)
 S $P(^ONCO(165.5,D0,2),U,27)=88   ;37.3 CM
"RTN","ONCOAIP",153,0)
 S $P(^ONCO(165.5,D0,2),U,20)=88   ;38   C Stage Group
"RTN","ONCOAIP",154,0)
 S $P(^ONCO(165.5,D0,3),U,32)=8    ;19   Staged By (C)
"RTN","ONCOAIP",155,0)
 S $P(^ONCO(165.5,D0,7),U,17)="N"  ;69.4 Multimodality Therapy (P)
"RTN","ONCOAIP",156,0)
 S $P(^ONCO(165.5,D0,2.1),U,1)=88  ;85   PT
"RTN","ONCOAIP",157,0)
 S $P(^ONCO(165.5,D0,2.1),U,2)=88  ;86   PN
"RTN","ONCOAIP",158,0)
 S $P(^ONCO(165.5,D0,2.1),U,3)=88  ;87   PM
"RTN","ONCOAIP",159,0)
 S $P(^ONCO(165.5,D0,2.1),U,4)=88  ;88   P Stage Group
"RTN","ONCOAIP",160,0)
 S $P(^ONCO(165.5,D0,2.1),U,5)=8   ;89   Staged By (P)
"RTN","ONCOAIP",161,0)
 S $P(^ONCO(165.5,D0,2),U,28)="NA" ;38.5 Stage Grouping-AJCC
"RTN","ONCOAIP",162,0)
 S:$P($G(^ONCO(165.5,D0,7)),U,7)="" $P(^ONCO(165.5,D0,7),U,7)="0000000"
"RTN","ONCOAIP",163,0)
 S:$P($G(^ONCO(165.5,D0,7)),U,14)="" $P(^ONCO(165.5,D0,7),U,14)="0000000"
"RTN","ONCOAIP",164,0)
 Q
"RTN","ONCOAIP",165,0)
 ;
"RTN","ONCOAIP",166,0)
FST S SECTION="First Course of Treatment" D SECTION
"RTN","ONCOAIP",167,0)
 Q
"RTN","ONCOAIP",168,0)
 ;
"RTN","ONCOAIP",169,0)
ORF S SECTION="Over-ride Flags" D SECTION
"RTN","ONCOAIP",170,0)
 K DXS,DIOT D ^ONCORF
"RTN","ONCOAIP",171,0)
 Q
"RTN","ONCOAIP",172,0)
 ;
"RTN","ONCOAIP",173,0)
NTX ;DATE OF NO TREATMENT (165.5,124)
"RTN","ONCOAIP",174,0)
 I '$D(NTDD) S Y="@425" Q
"RTN","ONCOAIP",175,0)
 K NTDD
"RTN","ONCOAIP",176,0)
 W !!?5,"You have entered a DATE OF NO TREATMENT.  All treatment fields"
"RTN","ONCOAIP",177,0)
 W !?5,"will be stuffed with the appropriate value indicating no"
"RTN","ONCOAIP",178,0)
 W !?5,"treatment.",!
"RTN","ONCOAIP",179,0)
 K DIR S DIR("A")="Are you sure you want to do this",DIR("B")="No"
"RTN","ONCOAIP",180,0)
 S DIR(0)="Y" D ^DIR
"RTN","ONCOAIP",181,0)
 I (Y=0)!(Y="") D  S Y=124 W ! Q
"RTN","ONCOAIP",182,0)
 .S TXDT=$P(^ONCO(165.5,D0,2.1),U,11)_"N"
"RTN","ONCOAIP",183,0)
 .K ^ONCO(165.5,"ATX",D0,TXDT)
"RTN","ONCOAIP",184,0)
 .S $P(^ONCO(165.5,D0,2.1),U,11)=""
"RTN","ONCOAIP",185,0)
 I Y[U S $P(^ONCO(165.5,D0,2.1),U,11)="",Y="@0" Q
"RTN","ONCOAIP",186,0)
 S NTX="" D NTX^ONCNTX K NTX
"RTN","ONCOAIP",187,0)
 Q
"RTN","ONCOAIP",188,0)
 ;
"RTN","ONCOAIP",189,0)
RS ;RADIATION/SURGERY SEQUENCE (165.5,51.3)
"RTN","ONCOAIP",190,0)
 Q:$P($G(^ONCO(165.5,D0,3)),U,7)'=""
"RTN","ONCOAIP",191,0)
 S S=$E($$GET1^DIQ(165.5,D0,58.6,"E"),1,2)
"RTN","ONCOAIP",192,0)
 S SATF=$E($$GET1^DIQ(165.5,D0,58.7,"E"),1,2)
"RTN","ONCOAIP",193,0)
 S SCP=$P($G(^ONCO(165.5,D0,3.1)),U,31)
"RTN","ONCOAIP",194,0)
 S SCPATF=$P($G(^ONCO(165.5,D0,3.1)),U,32)
"RTN","ONCOAIP",195,0)
 S SOTH=$P($G(^ONCO(165.5,D0,3.1)),U,33)
"RTN","ONCOAIP",196,0)
 S SOTHATF=$P($G(^ONCO(165.5,D0,3.1)),U,34)
"RTN","ONCOAIP",197,0)
 S R=$$GET1^DIQ(165.5,D0,51.2,"I")
"RTN","ONCOAIP",198,0)
 S RATF=$$GET1^DIQ(165.5,D0,51.4,"I")
"RTN","ONCOAIP",199,0)
 I ((S="00")!(S=99)!(S=98)!(S=""))&((SATF="00")!(SATF=99)!(SATF=98)!(SATF=""))&((SCP=0)!(SCP="")!(SCP=9))&((SCPATF=0)!(SCPATF="")!(SCPATF=9))&((SOTH=0)!(SOTH=""))&((SOTHATF=0)!(SOTHATF="")) S SR=0
"RTN","ONCOAIP",200,0)
 E  S SR=1
"RTN","ONCOAIP",201,0)
 I ((R=0)!(R=7)!(R=8)!(R=9)!(R=""))&((RATF=0)!(RATF=7)!(RATF=8)!(RATF=9)!(RATF="")) S R=0
"RTN","ONCOAIP",202,0)
 E  S R=1
"RTN","ONCOAIP",203,0)
 I ($G(SR)&$G(R)) D  K S,SATF,SCP,SCPATF,SOTH,SOTHATF,R,RATF,SR,SDT,SATFDT,SCPDT,SCPATFDT,SOTDT,SOTATFDT,RDT,RATFDT,RSSEQ,FSDT,FRDT
"RTN","ONCOAIP",204,0)
 .S SDT=$P($G(^ONCO(165.5,D0,3)),U,1)
"RTN","ONCOAIP",205,0)
 .S:SDT'="" RSSEQ("S",SDT)="S",RSSEQ(SDT)="S"
"RTN","ONCOAIP",206,0)
 .S SATFDT=$P($G(^ONCO(165.5,D0,3.1)),U,8)
"RTN","ONCOAIP",207,0)
 .S:SATFDT'="" RSSEQ("S",SATFDT)="S",RSSEQ(SATFDT)="S"
"RTN","ONCOAIP",208,0)
 .S SCPDT=$P($G(^ONCO(165.5,D0,3.1)),U,22)
"RTN","ONCOAIP",209,0)
 .S:SCPDT'="" RSSEQ("S",SCPDT)="S",RSSEQ(SCPDT)="S"
"RTN","ONCOAIP",210,0)
 .S SCPATFDT=$P($G(^ONCO(165.5,D0,3.1)),U,23)
"RTN","ONCOAIP",211,0)
 .S:SCPATFDT'="" RSSEQ("S",SCPATFDT)="S",RSSEQ(SCPATFDT)="S"
"RTN","ONCOAIP",212,0)
 .S SOTDT=$P($G(^ONCO(165.5,D0,3.1)),U,24)
"RTN","ONCOAIP",213,0)
 .S:SOTDT'="" RSSEQ("S",SOTDT)="S",RSSEQ(SOTDT)="S"
"RTN","ONCOAIP",214,0)
 .S SOTATFDT=$P($G(^ONCO(165.5,D0,3.1)),U,25)
"RTN","ONCOAIP",215,0)
 .S:SOTATFDT'="" RSSEQ("S",SOTATFDT)="S",RSSEQ(SOTATFDT)="S"
"RTN","ONCOAIP",216,0)
 .S RDT=$P($G(^ONCO(165.5,D0,3)),U,4)
"RTN","ONCOAIP",217,0)
 .S:RDT'="" RSSEQ("R",RDT)="R",RSSEQ(RDT)="R"
"RTN","ONCOAIP",218,0)
 .S RATFDT=$P($G(^ONCO(165.5,D0,3.1)),U,13)
"RTN","ONCOAIP",219,0)
 .S:RATFDT'="" RSSEQ("R",RATFDT)="R",RSSEQ(RATFDT)="R"
"RTN","ONCOAIP",220,0)
 .S FSDT=$O(RSSEQ("S",0)),FRDT=$O(RSSEQ("R",0))
"RTN","ONCOAIP",221,0)
 .I FSDT=FRDT Q 
"RTN","ONCOAIP",222,0)
 .S RSSEQ=$O(RSSEQ(0))
"RTN","ONCOAIP",223,0)
 .I RSSEQ(RSSEQ)="R" S $P(^ONCO(165.5,D0,3),U,7)=2
"RTN","ONCOAIP",224,0)
 .I RSSEQ(RSSEQ)="S" S $P(^ONCO(165.5,D0,3),U,7)=3
"RTN","ONCOAIP",225,0)
 E  D
"RTN","ONCOAIP",226,0)
 .S $P(^ONCO(165.5,D0,3),U,7)=0
"RTN","ONCOAIP",227,0)
 Q
"RTN","ONCOAIP",228,0)
 ;
"RTN","ONCOAIP",229,0)
AB ;Abstract Status
"RTN","ONCOAIP",230,0)
 S SECTION="Case Administration" D SECTION
"RTN","ONCOAIP",231,0)
 N DI,DIC,DR,DA,DIQ,ONC,ONCDTEMP
"RTN","ONCOAIP",232,0)
 S DIC="^ONCO(165.5,"
"RTN","ONCOAIP",233,0)
 S DR="90:92;198;199;155;157.1;236;244"
"RTN","ONCOAIP",234,0)
 S DA=D0,DIQ="ONC" D EN^DIQ1
"RTN","ONCOAIP",235,0)
 S X=ONC(165.5,D0,91) D UCASE^ONCPCI S ONC(165.5,D0,91)=X
"RTN","ONCOAIP",236,0)
 S X=ONC(165.5,D0,157.1) D UCASE^ONCPCI S ONC(165.5,D0,157.1)=X
"RTN","ONCOAIP",237,0)
 W !," Abstract Status.............: ",ONC(165.5,D0,91)
"RTN","ONCOAIP",238,0)
 W !," Date Case Initiated.........: ",ONC(165.5,D0,236)
"RTN","ONCOAIP",239,0)
 W !," Initiated By................: ",ONC(165.5,D0,244)
"RTN","ONCOAIP",240,0)
 W !," Date of First Contact.......: ",ONC(165.5,D0,155)
"RTN","ONCOAIP",241,0)
 W !," Date Case Completed.........: " S ONCDTEMP=$P($G(^ONCO(165.5,D0,7)),U,1) W $$FMTE^XLFDT(ONCDTEMP,"5P")
"RTN","ONCOAIP",242,0)
 W !," Elapsed Days to Completion..: ",$$GET1^DIQ(165.5,D0,157,"E")
"RTN","ONCOAIP",243,0)
 ;W !," Elapsed Months to Completion: ",ONC(165.5,D0,157.1)
"RTN","ONCOAIP",244,0)
 W !," Abstracted by...............: ",ONC(165.5,D0,92)
"RTN","ONCOAIP",245,0)
 W !," Date Case Last Changed......: " S ONCDTEMP=$P($G(^ONCO(165.5,D0,7)),U,21) W $$FMTE^XLFDT(ONCDTEMP,"5P")
"RTN","ONCOAIP",246,0)
 W !," Case Last Changed by........: ",ONC(165.5,D0,199)
"RTN","ONCOAIP",247,0)
 W !,DASHES
"RTN","ONCOAIP",248,0)
 Q
"RTN","ONCOAIP",249,0)
 ;
"RTN","ONCOAIP",250,0)
NAN ;NEW ACC #
"RTN","ONCOAIP",251,0)
 K DIR S DIR(0)="N^:"_($E(DT,1,3)+1700),DIR("A")="YEAR of Accession Number: ",DIR("B")=($E(DT,1,3)+1700) W !! D ^DIR Q:(Y=U)!(Y="")
"RTN","ONCOAIP",252,0)
NA S YR=Y,MR=YR_"0001",XR=999999-((YR+1)_"0000"),NR=$O(^ONCO(165.5,"AF",XR))
"RTN","ONCOAIP",253,0)
 I NR<(990002-MR) W !!?5,"SYSTEM appears out of numbers-looking for unassigned ones" G FND
"RTN","ONCOAIP",254,0)
 I NR>(999999-MR) S NR=""
"RTN","ONCOAIP",255,0)
 S AC=$S(NR="":YR_"0001",1:(1000000-NR)),SEQ="00"
"RTN","ONCOAIP",256,0)
 Q
"RTN","ONCOAIP",257,0)
 ;
"RTN","ONCOAIP",258,0)
FND ;SEARCH for unused #s
"RTN","ONCOAIP",259,0)
 S NR=YR_"0000",MR=(YR+1)_"0000"
"RTN","ONCOAIP",260,0)
NR S NR=NR+1 I NR<MR G:$D(^ONCO(165.5,"AA",NR)) NR S AC=NR,SEQ="00" Q
"RTN","ONCOAIP",261,0)
 W !!?10,"OUT of ACCESSION Numbers for 19"_YR S Y=U
"RTN","ONCOAIP",262,0)
 Q
"RTN","ONCOAIP",263,0)
 ;
"RTN","ONCOAIP",264,0)
TOPNAM ;PRIMARY SITE and PRIMARY SITE CODE for header
"RTN","ONCOAIP",265,0)
 K SITTAB
"RTN","ONCOAIP",266,0)
 S TOP=$P($G(^ONCO(165.5,D0,2)),U,1),TOPCOD="",TOPNAM=""
"RTN","ONCOAIP",267,0)
 I TOP'="" S TOPNAM=$P($G(^ONCO(164,TOP,0)),U,1),TOPCOD=$P($G(^ONCO(164,TOP,0)),U,2)
"RTN","ONCOAIP",268,0)
 S SITTAB=79-$L(SITEGP),TOPTAB=79-$L(TOPNAM_" "_TOPCOD)
"RTN","ONCOAIP",269,0)
 S NOS=TOPTAB-$L(PATNAM),NOS=NOS-1 K SPACES S $P(SPACES," ",NOS)=" "
"RTN","ONCOAIP",270,0)
 Q
"RTN","ONCOAIP",271,0)
 ;
"RTN","ONCOAIP",272,0)
SECTION S HDL=$L(SECTION),TAB=(80-HDL)\2,TAB=TAB-1
"RTN","ONCOAIP",273,0)
 W @IOF,DASHES
"RTN","ONCOAIP",274,0)
 W !,?1,PATNAM,?TAB,SECTION,?SITTAB,SITEGP
"RTN","ONCOAIP",275,0)
 W !,?1,SSN,?TOPTAB,TOPNAM," ",TOPCOD
"RTN","ONCOAIP",276,0)
 W !,DASHES
"RTN","ONCOAIP",277,0)
 Q
"RTN","ONCOAIP",278,0)
 ;
"RTN","ONCOAIP",279,0)
EX ;Exit
"RTN","ONCOAIP",280,0)
 D KILL^ONCOAI
"RTN","ONCOAIP",281,0)
 K ABSTAT,AC,C,CHECKSUM,D0,DASHES,DATEDX,DIE,H,HDL,HISTNAM,HSTFLD,IIN
"RTN","ONCOAIP",282,0)
 K L,MR,N,NODE0,NOS,NR,ONCDST,ONCOD0,ONCOD0P,ONCOEDIT,ONCONM,ONCOYR
"RTN","ONCOAIP",283,0)
 K PATNAM,RH,SAVED0,SECTION,SEQ,SITEGP,SITTAB,SSN,SY,T,TAB
"RTN","ONCOAIP",284,0)
 K TOP,TOPCOD,TOPNAM,TOPTAB,TXDT,X,XR,YR
"RTN","ONCOAIP",285,0)
 Q
"RTN","ONCOAIP",286,0)
 ;
"RTN","ONCOAIP",287,0)
CLEANUP ;Cleanup
"RTN","ONCOAIP",288,0)
 K COC,EXTVER
"RTN","ONCOAIP2")
0^24^B24643610
"RTN","ONCOAIP2",1,0)
ONCOAIP2 ;Hines OIFO/GWB,RTK - ONCO ABSTRACT-I SUB-ROUTINES ;04/12/01
"RTN","ONCOAIP2",2,0)
 ;;2.2;ONCOLOGY;**1,4,5**;Jul 31, 2013;Build 6
"RTN","ONCOAIP2",3,0)
 ;
"RTN","ONCOAIP2",4,0)
LEUKEMIA(REC) ;Systemic diseases
"RTN","ONCOAIP2",5,0)
 N H,HISTNAM,HSTFLD,ICDFILE,ICDNUM
"RTN","ONCOAIP2",6,0)
 S L=0
"RTN","ONCOAIP2",7,0)
 S H=$E($$HIST^ONCFUNC(REC,.HSTFLD,.HISTNAM,.ICDFILE,.ICDNUM),1,4)
"RTN","ONCOAIP2",8,0)
 I ICDNUM=2 I ((H'<9720)&(H'>9732))!((H'<9760)&(H'>9989)) S L=1
"RTN","ONCOAIP2",9,0)
 I ICDNUM=3 I ((H'<9731)&(H'>9734))!((H'<9750)&(H'>9989)) S L=1
"RTN","ONCOAIP2",10,0)
 Q L
"RTN","ONCOAIP2",11,0)
 ;
"RTN","ONCOAIP2",12,0)
MO ;ASSOCIATED WITH HIV (165.5,41)
"RTN","ONCOAIP2",13,0)
 S M=$$HIST^ONCFUNC(D0)
"RTN","ONCOAIP2",14,0)
 S AWHFLG=0
"RTN","ONCOAIP2",15,0)
 I $$LYMPHOMA^ONCFUNC(D0) S Y=41,AWHFLG=1 Q
"RTN","ONCOAIP2",16,0)
 S M=$E(M,1,4)
"RTN","ONCOAIP2",17,0)
 I M=9140 S Y=41
"RTN","ONCOAIP2",18,0)
 E  S Y=227
"RTN","ONCOAIP2",19,0)
 Q:Y=227  S $P(^ONCO(165.5,D0,2),U,9)=999
"RTN","ONCOAIP2",20,0)
 K M
"RTN","ONCOAIP2",21,0)
 Q
"RTN","ONCOAIP2",22,0)
 ;
"RTN","ONCOAIP2",23,0)
BLOOD ;PERIPHERAL BLOOD INVOLVEMENT (165.5,30.5)
"RTN","ONCOAIP2",24,0)
 ;Mycosis fungoides and Sezary's Disease (9700-9701)
"RTN","ONCOAIP2",25,0)
 N CHK,TMP
"RTN","ONCOAIP2",26,0)
 S TMP=$$HIST^ONCFUNC(DA),Y="@301"
"RTN","ONCOAIP2",27,0)
 F CHK="97002","97003","97012","97013" I CHK=TMP S Y=30.5 Q
"RTN","ONCOAIP2",28,0)
 Q
"RTN","ONCOAIP2",29,0)
 ;
"RTN","ONCOAIP2",30,0)
PGPE ;PATHOLOGIC EXTENSION (165.5,30.1)
"RTN","ONCOAIP2",31,0)
 ;Prostate C61.9
"RTN","ONCOAIP2",32,0)
 S Y="@231"
"RTN","ONCOAIP2",33,0)
 N TMP S TMP=$P($G(^ONCO(165.5,DA,2)),U,1)
"RTN","ONCOAIP2",34,0)
 I TMP=67619 S Y=30.1 Q
"RTN","ONCOAIP2",35,0)
 S $P(^ONCO(165.5,DA,2.2),U,2)=""
"RTN","ONCOAIP2",36,0)
 Q
"RTN","ONCOAIP2",37,0)
 ;
"RTN","ONCOAIP2",38,0)
LN ;BRAIN AND CEREBRAL MENINGES (SEER EOD)
"RTN","ONCOAIP2",39,0)
 ;OTHER PARTS OF CENTRAL NERVOUS SYSTEM (SEER EOD)
"RTN","ONCOAIP2",40,0)
 N T
"RTN","ONCOAIP2",41,0)
 S T=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCOAIP2",42,0)
 I (T=67700)!($E(T,3,4)=71)!($E(T,3,4)=72) D  S Y="@26" Q
"RTN","ONCOAIP2",43,0)
 .S $P(^ONCO(165.5,D0,2),U,11)=9  ;Lymph Nodes
"RTN","ONCOAIP2",44,0)
 .S $P(^ONCO(165.5,D0,2),U,12)=99 ;Regional Nodes Positive
"RTN","ONCOAIP2",45,0)
 .S $P(^ONCO(165.5,D0,2),U,13)=99 ;Regional Nodes Examined
"RTN","ONCOAIP2",46,0)
 .W !,"LYMPH NODES............: Not Applicable"
"RTN","ONCOAIP2",47,0)
 .W !,"REGIONAL NODES EXAMINED: Unk; not stated; death cert only"
"RTN","ONCOAIP2",48,0)
 .W !,"REGIONAL NODES POSITIVE: Unk if nodes + or -, NA"
"RTN","ONCOAIP2",49,0)
 S Y=31
"RTN","ONCOAIP2",50,0)
 Q
"RTN","ONCOAIP2",51,0)
 ;
"RTN","ONCOAIP2",52,0)
EDTMOD ;EXTRACT EDITS THAT NEED TO BE MANUALLY FIXED TO PASS
"RTN","ONCOAIP2",53,0)
 S SECTION="EDITS Modifications" D SECTION^ONCOAIP
"RTN","ONCOAIP2",54,0)
 N DI,DIC,DR,DA,DIQ,ONC
"RTN","ONCOAIP2",55,0)
 S DIC="^ONCO(165.5,"
"RTN","ONCOAIP2",56,0)
 S DR="999.1:999.99"
"RTN","ONCOAIP2",57,0)
 S DA=D0,DIQ="ONC" D EN^DIQ1
"RTN","ONCOAIP2",58,0)
 ;S X=ONC(165.5,D0,91) D UCASE^ONCPCI S ONC(165.5,D0,91)=X
"RTN","ONCOAIP2",59,0)
 W !," Address at DX--State........: ",ONC(165.5,D0,999.26),?40,"Address at DX--Country......: ",ONC(165.5,D0,999.27)
"RTN","ONCOAIP2",60,0)
 W !," Address Current--State .....: ",ONC(165.5,D0,999.28),?40,"Address Current--Country....: ",ONC(165.5,D0,999.29)
"RTN","ONCOAIP2",61,0)
 W !!," Date of Diagnosis Flag......: ",ONC(165.5,D0,999.1),?40,"RX Date-Systemic Flag.......: ",ONC(165.5,D0,999.14)
"RTN","ONCOAIP2",62,0)
 W !," Date Conclusive DX Flag.....: ",ONC(165.5,D0,999.2),?40,"RX Date-Chemo Flag..........: ",ONC(165.5,D0,999.15)
"RTN","ONCOAIP2",63,0)
 W !," Date of Mult Tumors Flag....: ",ONC(165.5,D0,999.3),?40,"RX Date-Hormone Flag........: ",ONC(165.5,D0,999.16)
"RTN","ONCOAIP2",64,0)
 W !," Date of First Contact Flag..: ",ONC(165.5,D0,999.4),?40,"RX Date-BRM Flag............: ",ONC(165.5,D0,999.17)
"RTN","ONCOAIP2",65,0)
 W !," Date of Inpt Adm Flag.......: ",ONC(165.5,D0,999.5),?40,"RX Date-Other Flag..........: ",ONC(165.5,D0,999.18)
"RTN","ONCOAIP2",66,0)
 W !," Date of Inpt Disch Flag.....: ",ONC(165.5,D0,999.6),?40,"RX Date-DX/Stg Proc Flag....: ",ONC(165.5,D0,999.19)
"RTN","ONCOAIP2",67,0)
 W !," Date 1st CRS RX Flag........: ",ONC(165.5,D0,999.7),?40,"Recurrence Date-1st Flag....: ",ONC(165.5,D0,999.21)
"RTN","ONCOAIP2",68,0)
 W !," RX Date-Surgery Flag........: ",ONC(165.5,D0,999.8),?40,"Date of Last Contact Flag...: ",ONC(165.5,D0,999.22)
"RTN","ONCOAIP2",69,0)
 W !," RX Date-Mst Defn Srg Flag...: ",ONC(165.5,D0,999.9),?40,"Subsq RX 2nd Crs Date Flag..: ",ONC(165.5,D0,999.23)
"RTN","ONCOAIP2",70,0)
 W !," RX Date-Surg Disch Flag.....: ",ONC(165.5,D0,999.11),?40,"Subsq RX 3rd Crs Date Flag..: ",ONC(165.5,D0,999.24)
"RTN","ONCOAIP2",71,0)
 W !," RX Date-Radiation Flag......: ",ONC(165.5,D0,999.12),?40,"Subsq RX 4th Crs Date Flag..: ",ONC(165.5,D0,999.25)
"RTN","ONCOAIP2",72,0)
 W !," RX Date-Rad Ended Flag......: ",ONC(165.5,D0,999.13)
"RTN","ONCOAIP2",73,0)
 W !,DASHES
"RTN","ONCOAIP2",74,0)
 W !,"* * * These fields should ONLY be used to correct an EDIT that can't * * *",!,"* * * be cleared.  Otherwise these fields should NOT be modified.    * * *"
"RTN","ONCOAIP2",75,0)
 Q
"RTN","ONCOAIP2",76,0)
 ;
"RTN","ONCOAIP2",77,0)
UDFMOD ;ALLOW USERS TO ENTER/EDIT USER-DEFINED FIELDS
"RTN","ONCOAIP2",78,0)
 S SECTION="User Defined Fields" D SECTION^ONCOAIP
"RTN","ONCOAIP2",79,0)
 N DI,DIC,DR,DA,DIQ,ONC,OSPIEN
"RTN","ONCOAIP2",80,0)
 S DIC="^ONCO(165.5,"
"RTN","ONCOAIP2",81,0)
 S DR="284:285"
"RTN","ONCOAIP2",82,0)
 S DA=D0,DIQ="ONC" D EN^DIQ1
"RTN","ONCOAIP2",83,0)
 W !," User Defined Field #1........: ",ONC(165.5,D0,284),?40," User Defined Field #2........: ",ONC(165.5,D0,284.1)
"RTN","ONCOAIP2",84,0)
 W !," User Defined Field #3........: ",ONC(165.5,D0,284.2),?40," User Defined Field #4........: ",ONC(165.5,D0,284.3)
"RTN","ONCOAIP2",85,0)
 W !," User Defined Field #5........: ",ONC(165.5,D0,284.4),?40," User Defined Field #6........: ",ONC(165.5,D0,284.5)
"RTN","ONCOAIP2",86,0)
 W !," User Defined Field #7........: ",ONC(165.5,D0,284.6),?40," User Defined Field #8........: ",ONC(165.5,D0,284.7)
"RTN","ONCOAIP2",87,0)
 W !," User Defined Field #9........: ",ONC(165.5,D0,284.8),?40," User Defined Field #10.......: ",ONC(165.5,D0,284.9)
"RTN","ONCOAIP2",88,0)
 W !,DASHES
"RTN","ONCOAIP2",89,0)
 Q
"RTN","ONCOAIP2",90,0)
 ;
"RTN","ONCOCC")
0^25^B50012224
"RTN","ONCOCC",1,0)
ONCOCC ;HINES OIFO/GWB - CLASS OF CASE stuffing and @FAC defaults ;06/23/10
"RTN","ONCOCC",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCOCC",3,0)
 ;
"RTN","ONCOCC",4,0)
 ;CLASS OF CASE (165.5,.04) = 38 (Dx by autopsy at reporting facility)
"RTN","ONCOCC",5,0)
 N COC,NTX,PAUSE
"RTN","ONCOCC",6,0)
 S COC=$E($$GET1^DIQ(165.5,DA,.04,"E"),1,2)
"RTN","ONCOCC",7,0)
 I COC=38 D  S Y=$S(PAUSE[U:"",ONCOANS="A":"@7",1:"@0")
"RTN","ONCOCC",8,0)
 .W !?5,"CLASS OF CASE = 38 (Dx by autopsy at reporting facility)"
"RTN","ONCOCC",9,0)
 .W !!?5,"All treatment fields will be stuffed with the appropriate"
"RTN","ONCOCC",10,0)
 .W !?5,"value indicating no treatment.",!
"RTN","ONCOCC",11,0)
 .D PAUSE I PAUSE[U Q
"RTN","ONCOCC",12,0)
 .S NTX="" D NTX^ONCNTX
"RTN","ONCOCC",13,0)
 .D HDR^ONCNTX
"RTN","ONCOCC",14,0)
 .S $P(^ONCO(165.5,DA,3.1),U,26)=0
"RTN","ONCOCC",15,0)
 .S $P(^ONCO(165.5,DA,3.1),U,27)=0
"RTN","ONCOCC",16,0)
 .S $P(^ONCO(165.5,DA,"BLA2"),U,1)=0
"RTN","ONCOCC",17,0)
 .S $P(^ONCO(165.5,DA,"STS"),U,31)="00"
"RTN","ONCOCC",18,0)
 .S $P(^ONCO(165.5,DA,3.1),U,4)="0000"
"RTN","ONCOCC",19,0)
 .W !,"PALLIATIVE CARE................: No palliative care"
"RTN","ONCOCC",20,0)
 .W !,"PALLIATIVE CARE @FAC...........: No palliative care"
"RTN","ONCOCC",21,0)
 .W !
"RTN","ONCOCC",22,0)
 .W !,"PROTOCOL ELIGIBILITY STATUS....: Not available"
"RTN","ONCOCC",23,0)
 .W !,"PROTOCOL PARTICIPATION.........: Not on/NA"
"RTN","ONCOCC",24,0)
 .W !,"YEAR PUT ON PROTOCOL...........: 0000"
"RTN","ONCOCC",25,0)
 .W !
"RTN","ONCOCC",26,0)
 .D PAUSE
"RTN","ONCOCC",27,0)
 Q
"RTN","ONCOCC",28,0)
 ;
"RTN","ONCOCC",29,0)
PAUSE ;Enter RETURN to coninue" prompt
"RTN","ONCOCC",30,0)
 W ! R "Enter RETURN to continue or '^' to exit: ",PAUSE:30
"RTN","ONCOCC",31,0)
 I PAUSE="" Q
"RTN","ONCOCC",32,0)
 I PAUSE=U Q
"RTN","ONCOCC",33,0)
 G PAUSE
"RTN","ONCOCC",34,0)
 ;
"RTN","ONCOCC",35,0)
DNTDEL ;Delete DATE OF NO TREATMENT (165.5,124)
"RTN","ONCOCC",36,0)
 N TXDT
"RTN","ONCOCC",37,0)
 I $P($G(^ONCO(165.5,DA,2.1)),U,11)'="" D
"RTN","ONCOCC",38,0)
 .S TXDT=$P(^ONCO(165.5,DA,2.1),U,11)_"N"
"RTN","ONCOCC",39,0)
 .S $P(^ONCO(165.5,DA,2.1),U,11)=""
"RTN","ONCOCC",40,0)
 .K ^ONCO(165.5,"ATX",DA,TXDT)
"RTN","ONCOCC",41,0)
 Q
"RTN","ONCOCC",42,0)
 ;
"RTN","ONCOCC",43,0)
SATFDFR ;SURGERY OF PRIMARY @FAC (R) (165.5,50.2) default
"RTN","ONCOCC",44,0)
 N SGRP,SPS,TPG
"RTN","ONCOCC",45,0)
 S SPS=$P($G(^ONCO(165.5,D0,3)),U,38)
"RTN","ONCOCC",46,0)
 D SGROUP I TPG="" Q
"RTN","ONCOCC",47,0)
 I (SPS="00")!(SPS=1)!($G(^ONCO(164,SGRP,"SPS",SPS,0))["Unknown") S Y="@427" Q
"RTN","ONCOCC",48,0)
 S SPSDF="" I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=20)!(COC=21)!(COC=22) D  Q
"RTN","ONCOCC",49,0)
 .S SPSDF=$P($G(^ONCO(164,SGRP,"SPS",SPS,0)),U,1)
"RTN","ONCOCC",50,0)
 .S:$P($G(^ONCO(165.5,D0,0)),U,16)<2980000 SPSDF=""
"RTN","ONCOCC",51,0)
 Q
"RTN","ONCOCC",52,0)
 ;
"RTN","ONCOCC",53,0)
SATFDEF ;SURGERY OF PRIMARY @FAC (F) (165.5,58.7) default
"RTN","ONCOCC",54,0)
 N SGRP,SPS,TPG
"RTN","ONCOCC",55,0)
 S SPS=$P($G(^ONCO(165.5,D0,3.1)),U,29)
"RTN","ONCOCC",56,0)
 I SPS="" Q
"RTN","ONCOCC",57,0)
 D SGROUP I TPG="" Q
"RTN","ONCOCC",58,0)
 I (SPS="00")!(SPS=1)!($G(^ONCO(164,SGRP,"SPS",SPS,0))["Unknown") S Y="@43" Q
"RTN","ONCOCC",59,0)
 S (SPSDF,SPSDTDF)="" I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=20)!(COC=21)!(COC=22) D  Q
"RTN","ONCOCC",60,0)
 .S SPSDF=$P($G(^ONCO(164,SGRP,"SPS",SPS,0)),U,1)
"RTN","ONCOCC",61,0)
 .S SPSDTDF=$$GET1^DIQ(165.5,D0,50,"E")
"RTN","ONCOCC",62,0)
 .S:$P($G(^ONCO(165.5,D0,0)),U,16)<2980000 (SPSDF,SPSDTDF)=""
"RTN","ONCOCC",63,0)
 Q
"RTN","ONCOCC",64,0)
 ;
"RTN","ONCOCC",65,0)
RATFDEF ;RADIATION @FACILITY (165.5,51.4) default
"RTN","ONCOCC",66,0)
 N RD,XX,YY
"RTN","ONCOCC",67,0)
 S RD=$P($G(^ONCO(165.5,D0,3)),U,6)
"RTN","ONCOCC",68,0)
 S RADDF="",RADDTDF="" I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=20)!(COC=21)!(COC=22) D  Q
"RTN","ONCOCC",69,0)
 .I RD'="" D
"RTN","ONCOCC",70,0)
 ..S XX=$F(^DD(165.5,51.2,0),RD_":")
"RTN","ONCOCC",71,0)
 ..S YY=$F(^DD(165.5,51.2,0),";",XX)
"RTN","ONCOCC",72,0)
 ..S RADDF=$E(^DD(165.5,51.2,0),XX,YY-2)
"RTN","ONCOCC",73,0)
 .S RADDTDF=$P($G(^ONCO(165.5,D0,3)),U,4)
"RTN","ONCOCC",74,0)
 Q
"RTN","ONCOCC",75,0)
 ;
"RTN","ONCOCC",76,0)
CATFDEF ;CHEMOTHERAPY @FAC (165.5,53.3) default
"RTN","ONCOCC",77,0)
 N CH
"RTN","ONCOCC",78,0)
 S CH=$P($G(^ONCO(165.5,D0,3)),U,13)
"RTN","ONCOCC",79,0)
 S CHEMDF="",CHMDTDF="" I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=20)!(COC=21)!(COC=22) D  Q
"RTN","ONCOCC",80,0)
 .I CH'="" D
"RTN","ONCOCC",81,0)
 ..S XX=$F(^DD(165.5,53.2,0),CH_":")
"RTN","ONCOCC",82,0)
 ..S YY=$F(^DD(165.5,53.2,0),";",XX)
"RTN","ONCOCC",83,0)
 ..S CHEMDF=$E(^DD(165.5,53.2,0),XX,YY-2)
"RTN","ONCOCC",84,0)
 .S CHMDTDF=$P($G(^ONCO(165.5,D0,3)),U,11)
"RTN","ONCOCC",85,0)
 Q
"RTN","ONCOCC",86,0)
 ;
"RTN","ONCOCC",87,0)
HATFDEF ;HORMONE THERAPY @FAC (165.5,54.3) default
"RTN","ONCOCC",88,0)
 N HT
"RTN","ONCOCC",89,0)
 S HT=$P($G(^ONCO(165.5,D0,3)),U,16)
"RTN","ONCOCC",90,0)
 S HTDF="",HTDTDF="" I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=20)!(COC=21)!(COC=22) D  Q
"RTN","ONCOCC",91,0)
 .I HT'="" D
"RTN","ONCOCC",92,0)
 ..S XX=$F(^DD(165.5,54.2,0),HT_":")
"RTN","ONCOCC",93,0)
 ..S YY=$F(^DD(165.5,54.2,0),";",XX)
"RTN","ONCOCC",94,0)
 ..S HTDF=$E(^DD(165.5,54.2,0),XX,YY-2)
"RTN","ONCOCC",95,0)
 .S HTDTDF=$P($G(^ONCO(165.5,D0,3)),U,14)
"RTN","ONCOCC",96,0)
 Q
"RTN","ONCOCC",97,0)
 ;
"RTN","ONCOCC",98,0)
IATFDEF ;IMMUNOTHERAPY @FAC (165.5,55.3) default
"RTN","ONCOCC",99,0)
 N IMM
"RTN","ONCOCC",100,0)
 S IMM=$P($G(^ONCO(165.5,D0,3)),U,19)
"RTN","ONCOCC",101,0)
 S IMMDF="",IMMDTDF="" I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=20)!(COC=21)!(COC=22) D  Q
"RTN","ONCOCC",102,0)
 .I IMM'="" D
"RTN","ONCOCC",103,0)
 ..S XX=$F(^DD(165.5,55.2,0),IMM_":")
"RTN","ONCOCC",104,0)
 ..S YY=$F(^DD(165.5,55.2,0),";",XX)
"RTN","ONCOCC",105,0)
 ..S IMMDF=$E(^DD(165.5,55.2,0),XX,YY-2)
"RTN","ONCOCC",106,0)
 .S IMMDTDF=$P($G(^ONCO(165.5,D0,3)),U,17)
"RTN","ONCOCC",107,0)
 Q
"RTN","ONCOCC",108,0)
 ;
"RTN","ONCOCC",109,0)
HEATFDEF ;HEMA TRANS/ENDOCRINE PROC @FAC (165.5,153.2) default
"RTN","ONCOCC",110,0)
 N HTEP
"RTN","ONCOCC",111,0)
 S HTEP=$P($G(^ONCO(165.5,D0,3.1)),U,36)
"RTN","ONCOCC",112,0)
 S HTEPDF="",HTEPDTDF="" I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=20)!(COC=21)!(COC=22) D  Q
"RTN","ONCOCC",113,0)
 .I HTEP'="" D
"RTN","ONCOCC",114,0)
 ..S HTEPDF=$S(HTEP=1:"00",HTEP=2:10,HTEP=3:11,HTEP=4:12,HTEP=5:20,HTEP=6:30,HTEP=7:40,HTEP=8:82,HTEP=9:85,HTEP=10:86,HTEP=11:87,HTEP=12:88,HTEP=13:99,1:"")
"RTN","ONCOCC",115,0)
 ..S HTEPDTDF=$P($G(^ONCO(165.5,D0,3.1)),U,35)
"RTN","ONCOCC",116,0)
 Q
"RTN","ONCOCC",117,0)
 ;
"RTN","ONCOCC",118,0)
OATFDEF ;OTHER TREATMENT @FAC (165.5,57.3) default
"RTN","ONCOCC",119,0)
 N OTH
"RTN","ONCOCC",120,0)
 S OTH=$P($G(^ONCO(165.5,D0,3)),U,25)
"RTN","ONCOCC",121,0)
 S OTHDF="",OTHDTDF="" I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=20)!(COC=21)!(COC=22) D  Q
"RTN","ONCOCC",122,0)
 .I OTH'="" D
"RTN","ONCOCC",123,0)
 ..S XX=$F(^DD(165.5,57.2,0),OTH_":")
"RTN","ONCOCC",124,0)
 ..S YY=$F(^DD(165.5,57.2,0),";",XX)
"RTN","ONCOCC",125,0)
 ..S OTHDF=$E(^DD(165.5,57.2,0),XX,YY-2)
"RTN","ONCOCC",126,0)
 .S OTHDTDF=$P($G(^ONCO(165.5,D0,3)),U,23)
"RTN","ONCOCC",127,0)
 Q
"RTN","ONCOCC",128,0)
 ;
"RTN","ONCOCC",129,0)
PATFDEF ;PALLIATIVE PROCEDURE @FAC (165.5,13) default
"RTN","ONCOCC",130,0)
 N COC,PP
"RTN","ONCOCC",131,0)
 S COC=$E($$GET1^DIQ(165.5,DA,.04,"E"),1,2)
"RTN","ONCOCC",132,0)
 S PP=$P($G(^ONCO(165.5,D0,3.1)),U,26)
"RTN","ONCOCC",133,0)
 S PPDF="" I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=20)!(COC=21)!(COC=22) D  Q
"RTN","ONCOCC",134,0)
 .I PP'="" D
"RTN","ONCOCC",135,0)
 ..S XX=$F(^DD(165.5,12,0),PP_":")
"RTN","ONCOCC",136,0)
 ..S YY=$F(^DD(165.5,12,0),";",XX)
"RTN","ONCOCC",137,0)
 ..S PPDF=$E(^DD(165.5,12,0),XX,YY-2)
"RTN","ONCOCC",138,0)
 Q
"RTN","ONCOCC",139,0)
 ;
"RTN","ONCOCC",140,0)
SCOPER ;SCOPE OF LN SURGERY @FAC (R) (165.5,138.1) default
"RTN","ONCOCC",141,0)
 N SGRP,SCOPE,TPG
"RTN","ONCOCC",142,0)
 S SCOPE=$P($G(^ONCO(165.5,D0,3)),U,40) I SCOPE="" Q
"RTN","ONCOCC",143,0)
 D SGROUP I TPG="" Q
"RTN","ONCOCC",144,0)
 S SCPDF="" I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=20)!(COC=21)!(COC=22) D  Q
"RTN","ONCOCC",145,0)
 .S SCPDF=$P($G(^ONCO(164,SGRP,"SC5",SCOPE,0)),U,1)
"RTN","ONCOCC",146,0)
 Q
"RTN","ONCOCC",147,0)
 ;
"RTN","ONCOCC",148,0)
SCOPE ;SCOPE OF LN SURGERY @FAC (F) (165.5,138.5) default
"RTN","ONCOCC",149,0)
 ;SCOPE OF LN SURGERY @FAC DATE (165.5,138.3) default
"RTN","ONCOCC",150,0)
 N SCOPE
"RTN","ONCOCC",151,0)
 S SCOPE=$P($G(^ONCO(165.5,D0,3.1)),U,31) I SCOPE="" Q
"RTN","ONCOCC",152,0)
 S (SCPDF,SCPDTDF)="" I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=20)!(COC=21)!(COC=22) D  Q
"RTN","ONCOCC",153,0)
 .I SCOPE'="" D
"RTN","ONCOCC",154,0)
 ..S XX=$F(^DD(165.5,138.5,0),SCOPE_":")
"RTN","ONCOCC",155,0)
 ..S YY=$F(^DD(165.5,138.5,0),";",XX)
"RTN","ONCOCC",156,0)
 ..S SCPDF=$E(^DD(165.5,138.5,0),XX,YY-2)
"RTN","ONCOCC",157,0)
 .S SCPDTDF=$P($G(^ONCO(165.5,D0,3.1)),U,22)
"RTN","ONCOCC",158,0)
 Q
"RTN","ONCOCC",159,0)
 ;
"RTN","ONCOCC",160,0)
NUMN ;NUMBER OF LN REMOVED @FAC (R) (165.5,140.1) default
"RTN","ONCOCC",161,0)
 N NODES
"RTN","ONCOCC",162,0)
 S NODES=$P($G(^ONCO(165.5,D0,3)),U,42)
"RTN","ONCOCC",163,0)
 S NUMDF="" I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=20)!(COC=21)!(COC=22) D  Q
"RTN","ONCOCC",164,0)
 .S NUMDF=NODES
"RTN","ONCOCC",165,0)
 .I NUMDF="00" S NUMDF=NUMDF_"  No nodes removed"
"RTN","ONCOCC",166,0)
 .I NUMDF="90" S NUMDF=NUMDF_"  90 or more nodes removed"
"RTN","ONCOCC",167,0)
 .I NUMDF="95" S NUMDF=NUMDF_"  No nodes removed, aspiration performed"
"RTN","ONCOCC",168,0)
 .I NUMDF="96" S NUMDF=NUMDF_"  Node removal as a sampling, number unknown"
"RTN","ONCOCC",169,0)
 .I NUMDF="97" S NUMDF=NUMDF_"  Node removal as dissection, number unknown"
"RTN","ONCOCC",170,0)
 .I NUMDF="98" S NUMDF=NUMDF_"  Nodes surgically removed, number unknown"
"RTN","ONCOCC",171,0)
 .I NUMDF="99" S NUMDF=NUMDF_"  Unknown, not stated, death cert ONLY"
"RTN","ONCOCC",172,0)
 Q
"RTN","ONCOCC",173,0)
 ;
"RTN","ONCOCC",174,0)
SOSNR ;SURG PROC/OTHER SITE @FAC (R) (165.5,139.1) default
"RTN","ONCOCC",175,0)
 N SGRP,SOSN,TPG
"RTN","ONCOCC",176,0)
 S SOSN=$P($G(^ONCO(165.5,D0,3)),U,41) I SOSN="" Q
"RTN","ONCOCC",177,0)
 D SGROUP I TPG="" Q
"RTN","ONCOCC",178,0)
 S SOSNDF="" I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=20)!(COC=21)!(COC=22) D  Q
"RTN","ONCOCC",179,0)
 .S SOSNDF=$P($G(^ONCO(164,SGRP,"SO5",SOSN,0)),U,1)
"RTN","ONCOCC",180,0)
 Q
"RTN","ONCOCC",181,0)
 ;
"RTN","ONCOCC",182,0)
SOSN ;SURG PROC/OTHER SITE @FAC (F) (165.5,139.5) default
"RTN","ONCOCC",183,0)
 N SOSN
"RTN","ONCOCC",184,0)
 S SOSN=$P($G(^ONCO(165.5,D0,3.1)),U,33) I SOSN="" Q
"RTN","ONCOCC",185,0)
 S (SOSNDF,SOSNDTDF)="" I (COC=10)!(COC=11)!(COC=12)!(COC=13)!(COC=14)!(COC=20)!(COC=21)!(COC=22) D  Q
"RTN","ONCOCC",186,0)
 .I SOSN'="" D
"RTN","ONCOCC",187,0)
 ..S XX=$F(^DD(165.5,139.5,0),SOSN_":")
"RTN","ONCOCC",188,0)
 ..S YY=$F(^DD(165.5,139.5,0),";",XX)
"RTN","ONCOCC",189,0)
 ..S SOSNDF=$E(^DD(165.5,139.5,0),XX,YY-2)
"RTN","ONCOCC",190,0)
 .S SOSNDTDF=$P($G(^ONCO(165.5,D0,3.1)),U,24)
"RTN","ONCOCC",191,0)
 Q
"RTN","ONCOCC",192,0)
 ;
"RTN","ONCOCC",193,0)
SGROUP S TPG=$P($G(^ONCO(165.5,D0,2)),U,1) I TPG="" Q
"RTN","ONCOCC",194,0)
 S SGRP=$P($G(^ONCO(164,TPG,0)),U,16)
"RTN","ONCOCC",195,0)
 Q
"RTN","ONCOCC",196,0)
 ;
"RTN","ONCOCC",197,0)
CLEANUP ;Cleanup
"RTN","ONCOCC",198,0)
 K CHEMDF,CHMDTDF,D0,DA,HTDF,HTDTDF,IMMDF,IMMDTDF,NUMDF,OTHDF,OTHDTDF
"RTN","ONCOCC",199,0)
 K PPDF,RADDF,RADDTDF,SCPDF,SCPDTDF,SOSNDF,SOSNDTDF,SPSDF,SPSDTDF,Y
"RTN","ONCOCC",200,0)
 K HTEPDF,HTEPDTDF
"RTN","ONCOCFP")
0^19^B60703734
"RTN","ONCOCFP",1,0)
ONCOCFP ;Hines OIFO/GWB - [PT Automatic Casefinding-PTF Search] ;05/03/12
"RTN","ONCOCFP",2,0)
 ;;2.2;ONCOLOGY;**1,7,5**;Jul 31, 2013;Build 6
"RTN","ONCOCFP",3,0)
 ;
"RTN","ONCOCFP",4,0)
 ; rvd - 0403/12 p56. Use ICD API (#3990) instead of direct global call
"RTN","ONCOCFP",5,0)
 ; P2.2*7 - icd10 CASEFINDING
"RTN","ONCOCFP",6,0)
 W @IOF
"RTN","ONCOCFP",7,0)
 W !!!?10,"****************** PTF CASEFINDING ******************",!
"RTN","ONCOCFP",8,0)
 W !?10,"This option will search the PRINCIPLE DIAGNOSIS and"
"RTN","ONCOCFP",9,0)
 W !?10,"SECONDARY DIAGNOSIS fields of the PTF file for ICD"
"RTN","ONCOCFP",10,0)
 W !?10,"codes which identify cases to be added to the Suspense"
"RTN","ONCOCFP",11,0)
 W !?10,"list."
"RTN","ONCOCFP",12,0)
 ;
"RTN","ONCOCFP",13,0)
T ;Start Date/End Date
"RTN","ONCOCFP",14,0)
 N SDDEF
"RTN","ONCOCFP",15,0)
 W !
"RTN","ONCOCFP",16,0)
 S OSP=$O(^ONCO(160.1,"C",DUZ(2),0))
"RTN","ONCOCFP",17,0)
 I OSP="" D  Q
"RTN","ONCOCFP",18,0)
 .W !?10,"Casefinding requires an ONCOLOGY SITE PARAMETER"
"RTN","ONCOCFP",19,0)
 .W !?10,"entry which matches the user's login DIVISION."
"RTN","ONCOCFP",20,0)
 .W !?10,"There is no ONCOLOGY SITE PARAMETER for DIVISION:"
"RTN","ONCOCFP",21,0)
 .W !?10,$P($G(^DIC(4,DUZ(2),0)),U,1)
"RTN","ONCOCFP",22,0)
 S SDDEF=$P(^ONCO(160.1,OSP,0),U,7)
"RTN","ONCOCFP",23,0)
 I SDDEF="" S SDDEF=DT
"RTN","ONCOCFP",24,0)
 S SDDEF=$E(SDDEF,4,5)_"-"_$E(SDDEF,6,7)_"-"_($E(SDDEF,1,3)+1700)
"RTN","ONCOCFP",25,0)
SD K DIR
"RTN","ONCOCFP",26,0)
 S DIR(0)="D"
"RTN","ONCOCFP",27,0)
 S DIR("A")="          Start Date"
"RTN","ONCOCFP",28,0)
 S DIR("B")=SDDEF
"RTN","ONCOCFP",29,0)
 D ^DIR
"RTN","ONCOCFP",30,0)
 G EX:(Y="")!(Y[U)
"RTN","ONCOCFP",31,0)
 I (Y>DT) W "  Future dates not allowed" G SD
"RTN","ONCOCFP",32,0)
 S (SD,X)=Y D DD^%DT W "  ",Y
"RTN","ONCOCFP",33,0)
ED K DIR
"RTN","ONCOCFP",34,0)
 S DIR(0)="D"
"RTN","ONCOCFP",35,0)
 S DIR("A")="            End Date"
"RTN","ONCOCFP",36,0)
 D ^DIR
"RTN","ONCOCFP",37,0)
 G EX:(Y="")!(Y[U)
"RTN","ONCOCFP",38,0)
 I (Y<SD) W "  Invalid date sequence" G T
"RTN","ONCOCFP",39,0)
 I (Y>DT) W "  Future dates not allowed" G ED
"RTN","ONCOCFP",40,0)
 S $P(^ONCO(160.1,OSP,0),U,7)=Y
"RTN","ONCOCFP",41,0)
 S (ED,X)=Y D DD^%DT W "  ",Y
"RTN","ONCOCFP",42,0)
 W !
"RTN","ONCOCFP",43,0)
 K DIR
"RTN","ONCOCFP",44,0)
 S DIR(0)="Y"
"RTN","ONCOCFP",45,0)
 S DIR("A")="          Dates OK"
"RTN","ONCOCFP",46,0)
 S DIR("B")="Y"
"RTN","ONCOCFP",47,0)
 D ^DIR
"RTN","ONCOCFP",48,0)
 G EX:(Y="")!(Y[U)
"RTN","ONCOCFP",49,0)
 G T:'Y
"RTN","ONCOCFP",50,0)
 S ONCO("SD")=SD,ONCO("ED")=ED
"RTN","ONCOCFP",51,0)
 ;
"RTN","ONCOCFP",52,0)
 ;Include Squamous and Basal cell neoplasms (Y/N?)
"RTN","ONCOCFP",53,0)
 W !
"RTN","ONCOCFP",54,0)
 S SBCIND="NO"
"RTN","ONCOCFP",55,0)
 K DIR
"RTN","ONCOCFP",56,0)
 S DIR(0)="Y"
"RTN","ONCOCFP",57,0)
 S DIR("A")="          Include Squamous and Basal cell neoplasms"
"RTN","ONCOCFP",58,0)
 S DIR("B")="Yes"
"RTN","ONCOCFP",59,0)
 S DIR("?")=" "
"RTN","ONCOCFP",60,0)
 S DIR("?",1)=" Answer 'YES' if you want to include squamous and basal cell neoplasms."
"RTN","ONCOCFP",61,0)
 S DIR("?",2)=" Answer  'NO' if you want to exclude these neoplasms."
"RTN","ONCOCFP",62,0)
 D ^DIR
"RTN","ONCOCFP",63,0)
 G EX:(Y="")!(Y[U)
"RTN","ONCOCFP",64,0)
 S:Y=1 SBCIND="YES"
"RTN","ONCOCFP",65,0)
 K DIR
"RTN","ONCOCFP",66,0)
 ;
"RTN","ONCOCFP",67,0)
 W !!?3,"The following ICD codes will be searched for:"
"RTN","ONCOCFP",68,0)
 W !
"RTN","ONCOCFP",69,0)
 W !?3,"140-239        NEOPLASMS"
"RTN","ONCOCFP",70,0)
 W !?3,"               (excluding benign neoplasms 210-229 unless listed below)"
"RTN","ONCOCFP",71,0)
 W !?3,"042.2          HIV WITH SPECIFIED MALIGNANT NEOPLASMS"
"RTN","ONCOCFP",72,0)
 W !?3,"225.0-225.9    BENIGN NEOPLASMS OF BRAIN AND OTHER PARTS OF NERVOUS SYSTEM"
"RTN","ONCOCFP",73,0)
 W !?3,"227.3          BENIGN NEOPLASM OF PITUITARY GLAND AND CRANIOPHARYNGEAL DUCT"
"RTN","ONCOCFP",74,0)
 W !?3,"227.4          BENIGN NEOPLASM OF PINEAL GLAND"
"RTN","ONCOCFP",75,0)
 W !?3,"228.02         HEMANGIOMA INTRACRANIAL"
"RTN","ONCOCFP",76,0)
 W !?3,"259.2          CARCINOID SYNDROME"
"RTN","ONCOCFP",77,0)
 W !?3,"273.1-273.9    DISORDERS OF PLASMA PROTEIN METABOLISM"
"RTN","ONCOCFP",78,0)
 W !?3,"284.9          ANAPLASTIC ANEMIA, UNSPECIFIED"
"RTN","ONCOCFP",79,0)
 W !?3,"285.0          SIDEROBLASTIC ANEMIA"
"RTN","ONCOCFP",80,0)
 W !?3,"288.3          EOSINOPHILIA"
"RTN","ONCOCFP",81,0)
 W !?3,"288.4          HEMOPHAGOCYTIC SYNDROMES"
"RTN","ONCOCFP",82,0)
 W !?3,"289.6          FAMILIAL POLYCYTHEMIA"
"RTN","ONCOCFP",83,0)
 W !?3,"289.8          OTHER SPECIFIED DISEASES OF BLOOD AND BLOOD-FORMING ORGANS"
"RTN","ONCOCFP",84,0)
 W !?3,"289.83         MYELOFIBROSIS"
"RTN","ONCOCFP",85,0)
 W !?3,"795.06         PAPANICOLAOU SMEAR OF CERVIX WITH CYTOLOGIC EVIDENCE OF"
"RTN","ONCOCFP",86,0)
 W !?3,"               MALIGNANCY"
"RTN","ONCOCFP",87,0)
 W !?3,"795.16         PAP SMR VAG-CYTOL MALIG"
"RTN","ONCOCFP",88,0)
 W !?3,"796.76         PAP SMR ANUS-CYTOL MALIG"
"RTN","ONCOCFP",89,0)
 ;
"RTN","ONCOCFP",90,0)
 ;NOTE: Code 795.76 is incorrect in the ICD DIAGNOSIS (80) file.
"RTN","ONCOCFP",91,0)
 ;      It is appears as 796.76.  PTF casefinding will look for both
"RTN","ONCOCFP",92,0)
 ;      795.76 and 796.76.
"RTN","ONCOCFP",93,0)
 ;
"RTN","ONCOCFP",94,0)
 W !?3,"V07.3          NEED FOR OTHER PROPHYLACTIC CHEMOTHERAPY"
"RTN","ONCOCFP",95,0)
 W !?3,"V07.8          NEED FOR OTHER SPECIFIED PROPHYLACTIC MEASURE"
"RTN","ONCOCFP",96,0)
 W !?3,"V10.00-V10.09  GASTROINTESINAL TRACT"
"RTN","ONCOCFP",97,0)
 W !?3,"V12.41         PERS HX BENIGN NEOPL OF BRAIN"
"RTN","ONCOCFP",98,0)
 W !?3,"V58.0          ENCOUNTER FOR RADIOTHERAPY"
"RTN","ONCOCFP",99,0)
 W !?3,"V58.1          ENCOUNTER FOR CHEMOTHERAPY"
"RTN","ONCOCFP",100,0)
 W !?3,"V58.11         ANTINEOPLASTIC CHEMO ENC"
"RTN","ONCOCFP",101,0)
 W !?3,"V58.12         IMMUNOTHERAPY ENCOUNTER"
"RTN","ONCOCFP",102,0)
 W !?3,"V66.1-V66.2    CONVALESCENCE FOLLOWING RADIOTHERAPY/CHEMOTHERAPY"
"RTN","ONCOCFP",103,0)
 W !?3,"V67.1-V67.2    FOLLOW-UP EXAMINATION FOLLOWING RADIOTHERAPY/CHEMOTHERAPY"
"RTN","ONCOCFP",104,0)
 W !?3,"V71.1          OBSV-SUSPCT MAL NEOPLASM"
"RTN","ONCOCFP",105,0)
 W !?3,"V76.0-V76.9    SPECIAL SCREENING FOR MALIGNANT NEOPLASMS"
"RTN","ONCOCFP",106,0)
 W !
"RTN","ONCOCFP",107,0)
 ;List of ICD10
"RTN","ONCOCFP",108,0)
 D L10^ONCOCFP1
"RTN","ONCOCFP",109,0)
 W !
"RTN","ONCOCFP",110,0)
 ;
"RTN","ONCOCFP",111,0)
 S %ZIS="Q" D ^%ZIS I POP G EX
"RTN","ONCOCFP",112,0)
 I '$D(IO("Q")) D SER^ONCOCFP G EX
"RTN","ONCOCFP",113,0)
 S ZTRTN="SER^ONCOCFP",ZTSAVE("ONCO*")="",ZTSAVE("SBCIND")="",ZTDESC="ONCOLOGY PTF SEARCH"
"RTN","ONCOCFP",114,0)
 D ^%ZTLOAD
"RTN","ONCOCFP",115,0)
 G EX
"RTN","ONCOCFP",116,0)
 ;
"RTN","ONCOCFP",117,0)
SER ;Search PTF file (#45) file
"RTN","ONCOCFP",118,0)
 ;Supported by IA #418
"RTN","ONCOCFP",119,0)
 S AFFDIV=$G(DUZ(2)),ONCDIVSP=$O(^ONCO(160.1,"C",AFFDIV,""))
"RTN","ONCOCFP",120,0)
 I ONCDIVSP="" W !!,"User does not have an associated DIVISION",!! G EX
"RTN","ONCOCFP",121,0)
 F Z=0:0 S Z=$O(^ONCO(160.1,ONCDIVSP,6,Z)) Q:Z'>0  S AFFDIV=AFFDIV_U_$G(^ONCO(160.1,ONCDIVSP,6,Z,0))
"RTN","ONCOCFP",122,0)
 K ^TMP("ONCO",$J)
"RTN","ONCOCFP",123,0)
 S XDT=ONCO("SD")-.1111111
"RTN","ONCOCFP",124,0)
 S XED=ONCO("ED")+.9999999
"RTN","ONCOCFP",125,0)
 S ^TMP("ONCO",$J,0)=0
"RTN","ONCOCFP",126,0)
 F  S XDT=$O(^DGPT("ADS",XDT)) Q:(XDT>XED)!(XDT="")  S D0=$O(^(XDT,0)),X70=$G(^DGPT(D0,70)),X71=$G(^DGPT(D0,71)) I X70'="" D IC
"RTN","ONCOCFP",127,0)
 I $G(^TMP("ONCO",$J,0))=0 G WP
"RTN","ONCOCFP",128,0)
 E  D
"RTN","ONCOCFP",129,0)
 .S DIC="^ONCO(160,"
"RTN","ONCOCFP",130,0)
 .S BY="@75,INTERNAL(#3),75,.01"
"RTN","ONCOCFP",131,0)
 .S FR=DUZ(2)_","_ONCO("SD"),TO=DUZ(2)_","_ONCO("ED")
"RTN","ONCOCFP",132,0)
 .S FLDS="[ONCO PTF-CASEFINDING RPT]"
"RTN","ONCOCFP",133,0)
 S L=0,IOP=ION,DIOEND="D WP^ONCOCFP"
"RTN","ONCOCFP",134,0)
 D EN1^DIP Q
"RTN","ONCOCFP",135,0)
 ;
"RTN","ONCOCFP",136,0)
WP ;Wrap-up report
"RTN","ONCOCFP",137,0)
 W !?3,$G(^TMP("ONCO",$J,0))_" PTF cases added to Suspense"
"RTN","ONCOCFP",138,0)
 Q
"RTN","ONCOCFP",139,0)
 ;
"RTN","ONCOCFP",140,0)
IC ;Search for ICD codes
"RTN","ONCOCFP",141,0)
 K HT,IC9,IC,ICD,ICP,CI10
"RTN","ONCOCFP",142,0)
 S P="",CI=0,CI10=0
"RTN","ONCOCFP",143,0)
 F F=10,16:1:24 S ICP=+$P(X70,U,F) I ICP>0 S IC9=$$GET1^DIQ(80,ICP,.01,"I") D FD Q:(CI=1)!(CI10=1)
"RTN","ONCOCFP",144,0)
 I (X71'=""),(CI=0),(CI10=0) F F=1:1:15 S ICP=+$P(X71,U,F) I ICP>0 S IC9=$$GET1^DIQ(80,ICP,.01,"I") D FD Q:(CI=1)!(CI10=1)
"RTN","ONCOCFP",145,0)
 ;I CI=0 D IC10^ONCOCFP1
"RTN","ONCOCFP",146,0)
 I (CI=0),(CI10=0) Q
"RTN","ONCOCFP",147,0)
 G CK
"RTN","ONCOCFP",148,0)
 ;
"RTN","ONCOCFP",149,0)
FD I ((IC9>139.9)&(IC9<210)) S CI=1 Q
"RTN","ONCOCFP",150,0)
 I ((IC9>224.9)&(IC9<226)) S CI=1 Q
"RTN","ONCOCFP",151,0)
 I (IC9=227.3)!(IC9=227.4)!(IC9=228.02) S CI=1 Q
"RTN","ONCOCFP",152,0)
 I ((IC9>229.9)&(IC9<240)) S CI=1 Q
"RTN","ONCOCFP",153,0)
 I (IC9=259.2)!(IC9=273.1)!(IC9=273.2)!(IC9=273.3)!(IC9=273.9)!(IC9=284.9)!(IC9=288.3)!(IC9=288.4)!(IC9=289.6)!(IC9=289.8)!(IC9=289.83)!(IC9=795.06)!(IC9=795.16)!(IC9=795.76)!(IC9=796.76)!(IC9="042.2")!(IC9="285.0") S CI=1 Q
"RTN","ONCOCFP",154,0)
 I $E(IC9)="V" S CD=$E(IC9,2,5) I ((CD>9)&(CD<11))!(CD=12.41)!(CD="58.0")!(CD=58.1)!(CD=66.1)!(CD=66.2)!(CD=67.1)!(CD=67.2)!(CD=71.1)!(CD="07.3")!(CD="07.8")!($E(CD,1,2)=76) S CI=1 Q
"RTN","ONCOCFP",155,0)
 S IC10=IC9 D FD10^ONCOCFP1
"RTN","ONCOCFP",156,0)
 Q
"RTN","ONCOCFP",157,0)
 ;
"RTN","ONCOCFP",158,0)
CK ;Check ONCOLOGY PATIENT (160) file
"RTN","ONCOCFP",159,0)
 ;Supported by IA #418
"RTN","ONCOCFP",160,0)
 I ($G(IC9)=""),($G(IC10)="") Q
"RTN","ONCOCFP",161,0)
 D DIV Q:DVMTCH=0
"RTN","ONCOCFP",162,0)
 S X=^DGPT(D0,0),ADT=$P($P(X,U,2),"."),X=$P(X,U)_";DPT("
"RTN","ONCOCFP",163,0)
 S XD0=$O(^ONCO(160,"B",X,0)),ONCIEN=XD0 I XD0="" G MR
"RTN","ONCOCFP",164,0)
 I XD0'="" S ONCDIVS="",ONCS="" F  S ONCS=$O(^ONCO(160,XD0,"SUS","C",ONCS)) Q:ONCS'>0  S ONCDIVS=ONCDIVS_U_ONCS
"RTN","ONCOCFP",165,0)
 I ONCDIVS[DUZ(2) Q
"RTN","ONCOCFP",166,0)
 S DA=XD0 I '$D(^ONCO(165.5,"C",XD0)) G N2
"RTN","ONCOCFP",167,0)
 ;
"RTN","ONCOCFP",168,0)
CKP ;Check ONCOLOGY PRIMARY (165.5) file
"RTN","ONCOCFP",169,0)
 S XD1=0 F  S XD1=$O(^ONCO(165.5,"C",XD0,XD1)) Q:XD1'>0  I $$DIV^ONCFUNC(XD1)=DUZ(2) D
"RTN","ONCOCFP",170,0)
 .S XDX=$P($G(^ONCO(165.5,XD1,0)),U,16) I XDT>(ADT-1)&(XDX<($P(XDT,".")+1)) S HT=1 Q
"RTN","ONCOCFP",171,0)
 .S XDX=$P($G(^ONCO(165.5,XD1,1)),U,10) I XDX=XDT S HT=1 Q
"RTN","ONCOCFP",172,0)
 Q
"RTN","ONCOCFP",173,0)
 ;
"RTN","ONCOCFP",174,0)
MR ;Create ONCOLOGY PATIENT (160) record
"RTN","ONCOCFP",175,0)
 Q:$D(HT)
"RTN","ONCOCFP",176,0)
 K DO S DIC="^ONCO(160,",DIC(0)="Z" D FILE^DICN K DO
"RTN","ONCOCFP",177,0)
 S (ONCIEN,XD0,DA)=+Y
"RTN","ONCOCFP",178,0)
 ;
"RTN","ONCOCFP",179,0)
N2 ;Create SUSPENSE (160.075) record
"RTN","ONCOCFP",180,0)
 N DD,PTFDT,X1,X2
"RTN","ONCOCFP",181,0)
 S X1=ADT,X2=1 D C^%DTC S SDT=X
"RTN","ONCOCFP",182,0)
 S X1=ONCO("SD"),X2=1 D C^%DTC S WSD=X
"RTN","ONCOCFP",183,0)
 S DA(1)=ONCIEN,DIC="^ONCO(160,"_DA(1)_",""SUS"","
"RTN","ONCOCFP",184,0)
 K DO S DIC(0)="L",DIC("P")=$P(^DD(160,75,0),U,2),X=$S(SDT<WSD:WSD,1:SDT)
"RTN","ONCOCFP",185,0)
 D FILE^DICN K DO
"RTN","ONCOCFP",186,0)
 K DIE S DA(1)=ONCIEN,DIE="^ONCO(160,"_DA(1)_",""SUS"","
"RTN","ONCOCFP",187,0)
 S (ONCSUB,DA)=+Y,PTFDT=$P(XDT,".")
"RTN","ONCOCFP",188,0)
 S DR="1///^S X=DT;2///^S X=""PT"";3////^S X=DUZ(2);7///^S X=PTFDT;8////^S X=ICP"
"RTN","ONCOCFP",189,0)
 D ^DIE
"RTN","ONCOCFP",190,0)
 S ^TMP("ONCO",$J,0)=^TMP("ONCO",$J,0)+1
"RTN","ONCOCFP",191,0)
 Q
"RTN","ONCOCFP",192,0)
 ;
"RTN","ONCOCFP",193,0)
DIV ;DIVISION match
"RTN","ONCOCFP",194,0)
 ;Supported by IAs #417 and #1378
"RTN","ONCOCFP",195,0)
 N PTFD0,PTMV,WL
"RTN","ONCOCFP",196,0)
 S DVMTCH=1,INST=""
"RTN","ONCOCFP",197,0)
 S PTFD0=D0,PTMV=$O(^DGPM("APTF",PTFD0,"")) I PTMV="" Q
"RTN","ONCOCFP",198,0)
 S WL=$P($G(^DGPM(PTMV,0)),U,6) I WL="" Q
"RTN","ONCOCFP",199,0)
 S MCDV=$P($G(^DIC(42,WL,0)),U,11) I MCDV="" Q
"RTN","ONCOCFP",200,0)
 S INST=$P($G(^DG(40.8,MCDV,0)),U,7) I INST="" Q
"RTN","ONCOCFP",201,0)
 I AFFDIV'[INST S DVMTCH=0 Q
"RTN","ONCOCFP",202,0)
 Q
"RTN","ONCOCFP",203,0)
 ;
"RTN","ONCOCFP",204,0)
EX ;KILL variables
"RTN","ONCOCFP",205,0)
 K %DT,%T,%ZIS,ADT,AFFDIV,BY,CD,CI,D0,DA,DD,DIC,DIE,DIOEND,DIR,DO,DR
"RTN","ONCOCFP",206,0)
 K DVMTCH,ED,F,FLDS,FR,GLO,HT,IC,IC9,ICD,ICP,INST,IOP,L,MCDV,NM,O2,CI10,IC10,SBCIND
"RTN","ONCOCFP",207,0)
 K ONCDIVS,ONCDIVSP,ONCIEN,ONCO,ONCS,ONCSUB,OSP,P,POP,PTFD0,PTFDT,PTMV
"RTN","ONCOCFP",208,0)
 K SD,SDDEF,SDT,TO,WED,WSD,X,X1,X2,X70,X71,XD0,XD1,XDT,XDX,XED,Y,Z
"RTN","ONCOCFP",209,0)
 K ZTDESC,ZTRTN,ZTSAVE
"RTN","ONCOCFP",210,0)
 K ^TMP("ONCO",$J)
"RTN","ONCOCFP",211,0)
 D ^%ZISC
"RTN","ONCOCFP",212,0)
 Q
"RTN","ONCOCOS")
0^4^B10736400
"RTN","ONCOCOS",1,0)
ONCOCOS ;Hines OIFO/GWB 'COMPUTED-FIELD' EXPRESSIONS ;11/30/11
"RTN","ONCOCOS",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCOCOS",3,0)
 ;
"RTN","ONCOCOS",4,0)
SICD ;SELECTED SITES (165.5,.015)
"RTN","ONCOCOS",5,0)
 S X=$P(^ONCO(165.5,D0,0),U,1)
"RTN","ONCOCOS",6,0)
 S X=$S(X=31:"LUNG NOS",X=62:"LYMPHOMA",X=63:"N-H LYMPHOMA",X=54:"BLADDER",X=17:"COLON",X>65&(X<70):"LEUKEMIA",X=39:"MELANOMA",X=50:"PROSTATE",X=9:"ORAL CAVITY",1:"OTHER")
"RTN","ONCOCOS",7,0)
 Q
"RTN","ONCOCOS",8,0)
 ;
"RTN","ONCOCOS",9,0)
SYS ;SYSTEMS (165.5,.017)
"RTN","ONCOCOS",10,0)
 S X=$P(^ONCO(165.5,D0,0),U,1)
"RTN","ONCOCOS",11,0)
 S X=$S(X=63:"LYMPH-NH",X=62:"LYMPH",1:"") Q:X'=""
"RTN","ONCOCOS",12,0)
 S X=$P($G(^ONCO(165.5,D0,0)),U,22) Q:X=""
"RTN","ONCOCOS",13,0)
 S X=$S(X<6715:"H&N",X<6726:"DS",X<6739:"RS",X<6747:"MS",(X>6751&(X<6768)):"GU",X=6747!(X>6769&(X<6772)):"NS",1:"OTH")
"RTN","ONCOCOS",14,0)
 Q
"RTN","ONCOCOS",15,0)
 ;
"RTN","ONCOCOS",16,0)
RSX ;RACE-SEX (165.5,.13)
"RTN","ONCOCOS",17,0)
 D GT G RSXEX:XD0=""
"RTN","ONCOCOS",18,0)
 S X=$S(SX=1:"-M",SX=2:"-F",1:"")
"RTN","ONCOCOS",19,0)
 S XRX=$S(RC=1:"White"_X,RC=2:"Black"_X,1:"Other"_X)
"RTN","ONCOCOS",20,0)
 S X=XRX
"RTN","ONCOCOS",21,0)
RSXEX K XD0,SX,RC,XRX
"RTN","ONCOCOS",22,0)
 Q
"RTN","ONCOCOS",23,0)
 ;
"RTN","ONCOCOS",24,0)
SXR ;SEX-RACE (165.5,.14)
"RTN","ONCOCOS",25,0)
 D GT G SXREX:XD0=""
"RTN","ONCOCOS",26,0)
 S X=$S(RC=1:"W",RC=2:"B",1:"O")
"RTN","ONCOCOS",27,0)
 S XRX=$S(SX=1:"Male-"_X,SX=2:"Female-"_X,1:X)
"RTN","ONCOCOS",28,0)
 S X=XRX
"RTN","ONCOCOS",29,0)
SXREX K XD0,SX,RC,XRX
"RTN","ONCOCOS",30,0)
 Q
"RTN","ONCOCOS",31,0)
 ;
"RTN","ONCOCOS",32,0)
GT ;RACE 1 (160,8)
"RTN","ONCOCOS",33,0)
 ;SEX (160,10)
"RTN","ONCOCOS",34,0)
 N XP0
"RTN","ONCOCOS",35,0)
 S XD0=$S($D(^ONCO(165.5,D0,0)):$P(^(0),U,2),1:"") Q:XD0=""
"RTN","ONCOCOS",36,0)
 Q:'$D(^ONCO(160,XD0,0))
"RTN","ONCOCOS",37,0)
 S XP0=^ONCO(160,XD0,0)
"RTN","ONCOCOS",38,0)
 S RC=$P(XP0,U,6)
"RTN","ONCOCOS",39,0)
 S SX=$P(XP0,U,8)
"RTN","ONCOCOS",40,0)
 Q
"RTN","ONCOCOS",41,0)
 ;
"RTN","ONCOCOS",42,0)
GSS ;SEER SUMMARY STAGE ABBREVIATED (165.5,35.1)
"RTN","ONCOCOS",43,0)
 S X=$P($G(^ONCO(165.5,D0,2)),U,17)
"RTN","ONCOCOS",44,0)
 S X=$S(X=0:"In Situ",X=1:"Local",X=2:"Reg Ext",X=3:"Reg Nodes",X=4:"Reg Ext/Nodes",X=5:"Reg NOS",X=7:"Dist Met/Sys",X=8:"NA/Benign",X=9:"Unk",1:"")
"RTN","ONCOCOS",45,0)
 Q
"RTN","ONCOCOS",46,0)
 ;
"RTN","ONCOCOS",47,0)
SSG1 ;GP-I AJCC SUMMARY STAGE (165.5,38.1)
"RTN","ONCOCOS",48,0)
 D SG
"RTN","ONCOCOS",49,0)
 S X=$S(+X=1:"I"_$E(X,2),1:"")
"RTN","ONCOCOS",50,0)
 Q
"RTN","ONCOCOS",51,0)
 ;
"RTN","ONCOCOS",52,0)
SSG2 ;GP-II AJCC SUMMARY STAGE (165.5,38.2)
"RTN","ONCOCOS",53,0)
 D SG
"RTN","ONCOCOS",54,0)
 S X=$S(+X=2:"II"_$E(X,2),1:"")
"RTN","ONCOCOS",55,0)
 Q
"RTN","ONCOCOS",56,0)
 ;
"RTN","ONCOCOS",57,0)
SSG3 ;GP-III AJCC SUMMARY STAGE (165.5,38.3)
"RTN","ONCOCOS",58,0)
 D SG
"RTN","ONCOCOS",59,0)
 S X=$S(+X=3:"III"_$E(X,2),1:"")
"RTN","ONCOCOS",60,0)
 Q
"RTN","ONCOCOS",61,0)
 ;
"RTN","ONCOCOS",62,0)
SSG4 ;GP-IV AJCC SUMMARY STAGE (165.5,38.4)
"RTN","ONCOCOS",63,0)
 D SG
"RTN","ONCOCOS",64,0)
 S X=$S(+X=4:"IV"_$E(X,2),1:"")
"RTN","ONCOCOS",65,0)
 Q
"RTN","ONCOCOS",66,0)
 ;
"RTN","ONCOCOS",67,0)
SG ;STAGE GROUP CLINICAL (165.5,38)
"RTN","ONCOCOS",68,0)
 S X=$S($D(^ONCO(165.5,D0,2)):$P(^(2),U,20),1:"")
"RTN","ONCOCOS",69,0)
 Q
"RTN","ONCOCOS",70,0)
 ;
"RTN","ONCOCOS",71,0)
TXS ;TREATMENT ABBREVIATED (165.5,42)
"RTN","ONCOCOS",72,0)
 S XD0=D0,XX=0
"RTN","ONCOCOS",73,0)
 F  S XX=$O(^ONCO(165.5,"ATX",XD0,XX)) Q:XX=""  D
"RTN","ONCOCOS",74,0)
 .I $E(XX,1,7)="0000000" Q
"RTN","ONCOCOS",75,0)
 .I $E(XX,1,7)=9999999 Q
"RTN","ONCOCOS",76,0)
 .S T=$E(XX,8,9)
"RTN","ONCOCOS",77,0)
 .I T["S",T'="S1" Q
"RTN","ONCOCOS",78,0)
 .I T["S",X["S" Q
"RTN","ONCOCOS",79,0)
 .S X=$S(X="":$E(XX,8),1:X_"/"_$E(XX,8))
"RTN","ONCOCOS",80,0)
 S X=$S(X="":"UNKNOWN",1:X)
"RTN","ONCOCOS",81,0)
 K XD0,XX,T
"RTN","ONCOCOS",82,0)
 Q
"RTN","ONCOCOS",83,0)
 ;
"RTN","ONCOCOS",84,0)
TX ;TREATMENT (165.5,43)
"RTN","ONCOCOS",85,0)
 S XD0=D0,XX=0
"RTN","ONCOCOS",86,0)
 F  S XX=$O(^ONCO(165.5,"ATX",XD0,XX)) Q:XX=""  D
"RTN","ONCOCOS",87,0)
 .I $E(XX,1,7)="0000000" Q
"RTN","ONCOCOS",88,0)
 .I $E(XX,1,7)=9999999 Q
"RTN","ONCOCOS",89,0)
 .S T=$E(XX,8,9)
"RTN","ONCOCOS",90,0)
 .I T["S",X["SUR" Q
"RTN","ONCOCOS",91,0)
 .S TX=$S(T="S1":"SUR",T="C":"CMX",T="R":"XRT",T="H":"HOR",T="B":"BRM",T="P":"CNS",T="N":"NTX",T="E":"HEM",T="O":"OTR",1:"XXX")
"RTN","ONCOCOS",92,0)
 .S:TX'="XXX" X=$S(X="":TX,1:X_"/"_TX)
"RTN","ONCOCOS",93,0)
 S X=$S(X="":"NONE",1:X)
"RTN","ONCOCOS",94,0)
 K XD0,XX,T,TX
"RTN","ONCOCOS",95,0)
 Q
"RTN","ONCOCOS",96,0)
 ;
"RTN","ONCOCOS",97,0)
TRS ;STATUS/LAST TUMOR STATUS (165.5,95.1)
"RTN","ONCOCOS",98,0)
 S XD0=D0
"RTN","ONCOCOS",99,0)
 S XTS=$P($G(^ONCO(165.5,XD0,7)),U,6)
"RTN","ONCOCOS",100,0)
 S XTS=$S(XTS=1:"No Evidence",XTS=2:"CA Evidence",1:"Unknown")
"RTN","ONCOCOS",101,0)
 S XD1=$P(^ONCO(165.5,XD0,0),U,2)
"RTN","ONCOCOS",102,0)
 S VS=$$GET1^DIQ(160,XD1,15)
"RTN","ONCOCOS",103,0)
 S X=VS_"/"_XTS
"RTN","ONCOCOS",104,0)
 K XD0,XTS,XD1,VS
"RTN","ONCOCOS",105,0)
 Q
"RTN","ONCOCOS",106,0)
 ;
"RTN","ONCOCOS",107,0)
CLEANUP ;Cleanup
"RTN","ONCOCOS",108,0)
 K D0,X
"RTN","ONCOCRF")
0^36^B18529127
"RTN","ONCOCRF",1,0)
ONCOCRF ;Hines OIFO/GWB - FOLLOW-UP ;07/13/00
"RTN","ONCOCRF",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCOCRF",3,0)
 ;
"RTN","ONCOCRF",4,0)
LD ;DATE OF LAST CONTACT OR DEATH (160.04,.01)
"RTN","ONCOCRF",5,0)
 N O1,O2,STOP S LD="",STOP=0
"RTN","ONCOCRF",6,0)
 S O1=""
"RTN","ONCOCRF",7,0)
 F  S O1=$O(^ONCO(160,XD0,"F","B",O1)) Q:'O1  D  Q:STOP
"RTN","ONCOCRF",8,0)
 .S O2=""
"RTN","ONCOCRF",9,0)
 .F  S O2=$O(^ONCO(160,XD0,"F","B",O1,O2)) Q:'O2  D  Q:STOP
"RTN","ONCOCRF",10,0)
 ..S LD=$G(^ONCO(160,XD0,"F",O2,0))
"RTN","ONCOCRF",11,0)
 ..I $P(LD,U,2)=0 S STOP=1 ;VITAL STATUS (160.04,1)="Dead"
"RTN","ONCOCRF",12,0)
 Q
"RTN","ONCOCRF",13,0)
 ;
"RTN","ONCOCRF",14,0)
R1 ;Kill STATUS (160,15) "AS" and DUE FOLLOW-UP (160,27) "AD"
"RTN","ONCOCRF",15,0)
 ;cross-references
"RTN","ONCOCRF",16,0)
 S XD=$G(^ONCO(160,XD0,1)) Q:XD=""
"RTN","ONCOCRF",17,0)
 S OS=$P(XD,U,1) K:OS'="" ^ONCO(160,"AS",OS,XD0)
"RTN","ONCOCRF",18,0)
 S OD=$P(XD,U,2) K:OD'="" ^ONCO(160,"AD",OD,XD0)
"RTN","ONCOCRF",19,0)
 Q
"RTN","ONCOCRF",20,0)
 ;
"RTN","ONCOCRF",21,0)
LDXT ;Return follow-up record for last date of contact excluding this one
"RTN","ONCOCRF",22,0)
 S LD=$O(^ONCO(160,XD0,"F","AA",0)) I LD'="" S:$D(^(LD,DA)) LD=$O(^ONCO(160,XD0,"F","AA",LD)) I LD'="" S LD=+$O(^(LD,0)),LD=$G(^ONCO(160,XD0,"F",LD,0))
"RTN","ONCOCRF",23,0)
 Q
"RTN","ONCOCRF",24,0)
 ;
"RTN","ONCOCRF",25,0)
SLF ;Set DATE OF LAST CONTACT OR DEATH (160.04,.01) "AA" cross-reference
"RTN","ONCOCRF",26,0)
 ;Set REGISTRAR (160.04,11) and DATE ENTERED (160.04)
"RTN","ONCOCRF",27,0)
 N ONCDUZ,ONCDT
"RTN","ONCOCRF",28,0)
 S XD0=DA(1),X1=9999999-X,^ONCO(160,XD0,"F","AA",X1,DA)=""
"RTN","ONCOCRF",29,0)
 S ONCDUZ=DUZ
"RTN","ONCOCRF",30,0)
 S ONCDT=DT
"RTN","ONCOCRF",31,0)
 S:$P(^ONCO(160,XD0,"F",DA,0),U,10)="" $P(^ONCO(160,XD0,"F",DA,0),U,10)=ONCDUZ
"RTN","ONCOCRF",32,0)
 S:$P(^ONCO(160,XD0,"F",DA,0),U,11)="" $P(^ONCO(160,XD0,"F",DA,0),U,11)=ONCDT
"RTN","ONCOCRF",33,0)
 G EX
"RTN","ONCOCRF",34,0)
 ;
"RTN","ONCOCRF",35,0)
KLF ;Kill .01 of FOLLOW-UP MULTIPLE-RESETS: #16(1;2), STATUS #15(1;1), FOLLOWUP STATUS #15.2(1;7), DUE FOLLOW-UP #27(2;3), if alive, DATE DEATH #29 (1;8)
"RTN","ONCOCRF",36,0)
 ;CODE MODIFIED TO ELIMINATE FM RE-INDEXING DATA LOSS
"RTN","ONCOCRF",37,0)
 ;CHANGE MADE TO PREVENT DELETING DEATH DATA, IN FM CROSS-REFERENCING
"RTN","ONCOCRF",38,0)
 S XD0=DA(1),X1=9999999-X K ^ONCO(160,XD0,"F","AA",X1,DA) G EX
"RTN","ONCOCRF",39,0)
 ;
"RTN","ONCOCRF",40,0)
SVS ;VITAL STATUS->STATUS (160,15) trigger AND UPDATE DUE FOLLOW-UP IF DEAD
"RTN","ONCOCRF",41,0)
 ;Invoked by "AC" xref on VITAL STATUS sub-field (160.04,1)
"RTN","ONCOCRF",42,0)
 S XD0=DA(1) D LD ;get the last sub-record alive (or the first dead)
"RTN","ONCOCRF",43,0)
 D UVS^ONCOCRFA   ;update vital status
"RTN","ONCOCRF",44,0)
 Q
"RTN","ONCOCRF",45,0)
 ;
"RTN","ONCOCRF",46,0)
KVS ;Kill: reset STATUS
"RTN","ONCOCRF",47,0)
 S XD0=DA(1) D LDXT ;get the last sub-record (excluding this one)
"RTN","ONCOCRF",48,0)
 D UVS^ONCOCRFA     ;update vital status
"RTN","ONCOCRF",49,0)
 Q
"RTN","ONCOCRF",50,0)
 ;
"RTN","ONCOCRF",51,0)
NF ;Set DUE FOLLOW-UP (160,27)
"RTN","ONCOCRF",52,0)
 S NF=$S(FS=0:"",1:$E(LC,1,3)+1_$E(LC,4,5)_"00")
"RTN","ONCOCRF",53,0)
 S $P(^ONCO(160,XD0,1),U,2)=NF
"RTN","ONCOCRF",54,0)
 I NF'="" S ^ONCO(160,"AD",NF,XD0)=""
"RTN","ONCOCRF",55,0)
 Q
"RTN","ONCOCRF",56,0)
 ;
"RTN","ONCOCRF",57,0)
UPD ;Update the following fields with the most recent FOLLOW-UP (160,400)
"RTN","ONCOCRF",58,0)
 ;data:
"RTN","ONCOCRF",59,0)
 ;STATUS             (160,15)   1;1
"RTN","ONCOCRF",60,0)
 ;FOLLOW-UP STATUS   (160,15.2) 1;7
"RTN","ONCOCRF",61,0)
 ;ICD REVSION        (160,20)   1;4
"RTN","ONCOCRF",62,0)
 ;DUE FOLLOW-UP      (160,27)   1;2
"RTN","ONCOCRF",63,0)
 ;DATE@TIME OF DEATH (160,29)   1;8
"RTN","ONCOCRF",64,0)
 I '$D(XD0) Q:'$D(D0)  S XD0=D0
"RTN","ONCOCRF",65,0)
 D LD,R1 G EX:LD=""
"RTN","ONCOCRF",66,0)
 S LC=$P(LD,U,1),ONCOVS=$P(LD,U,2),NM=$P(LD,U,6)
"RTN","ONCOCRF",67,0)
 S FS=0 D SGPRCOC I DNTSKP=1 S FS=$S(NM="":1,NM<8:1,ONCOVS=0:0,1:0)
"RTN","ONCOCRF",68,0)
 I FS S X1=DT,X2=LC D ^%DTC S FS=$S(X>456.25:8,1:FS)
"RTN","ONCOCRF",69,0)
 S DIE="^ONCO(160,",DA=XD0,DR="15///"_ONCOVS_";15.2///"_FS D ^DIE
"RTN","ONCOCRF",70,0)
 K DIE,DR
"RTN","ONCOCRF",71,0)
 S $P(^ONCO(160,XD0,1),U,4)=$S(ONCOVS=0:9,1:0)
"RTN","ONCOCRF",72,0)
 D NF I FS S Y=NF D DD^%DT W !!?20,"Due follow-up: ",Y G EX
"RTN","ONCOCRF",73,0)
 S:ONCOVS=0 $P(^ONCO(160,XD0,1),U,8)=LC
"RTN","ONCOCRF",74,0)
 W !!," Patient not followed"
"RTN","ONCOCRF",75,0)
 G EX
"RTN","ONCOCRF",76,0)
 ;
"RTN","ONCOCRF",77,0)
SGPRCOC ;CHECK IF PATIENT HAS SINGLE PRIMARY ONLY & CLASS OF CASE 00 OR 30-99
"RTN","ONCOCRF",78,0)
 ;called from UDP above when setting FS for Follow-Up Source
"RTN","ONCOCRF",79,0)
 ; don't set FS to 1 (Active) or 8 (LTF) if single primary, COC 00,30-99
"RTN","ONCOCRF",80,0)
 S DNTSKP=1
"RTN","ONCOCRF",81,0)
 S PRI=0,PRICNT=0 F  S PRI=$O(^ONCO(165.5,"C",XD0,PRI)) Q:PRI'>0  I $P($G(^ONCO(165.5,PRI,"DIV")),U,1)=DUZ(2) D
"RTN","ONCOCRF",82,0)
 .S PRICNT=PRICNT+1
"RTN","ONCOCRF",83,0)
 I PRICNT=1 D  ; if patient has exactly 1 primary
"RTN","ONCOCRF",84,0)
 .S ZZPRENT=$O(^ONCO(165.5,"C",XD0,0)) Q:ZZPRENT'>0  ; get primary IEN
"RTN","ONCOCRF",85,0)
 .S ZZPRCOC=$P($G(^ONCO(165.5,ZZPRENT,0)),"^",4)  ; get the COC
"RTN","ONCOCRF",86,0)
 .I ZZPRCOC=1!(ZZPRCOC>9) S DNTSKP=0
"RTN","ONCOCRF",87,0)
 K PRI,PRICNT,ZZPRENT,ZZPRCOC
"RTN","ONCOCRF",88,0)
 Q
"RTN","ONCOCRF",89,0)
LFU ;LAST FOLLOW-UP SUMMARY-SELECTED DATA from Last Follow-up
"RTN","ONCOCRF",90,0)
 S XD0=D0 D GD I X="" W !?10,"NO Last Contact Information on Patient",! G EX
"RTN","ONCOCRF",91,0)
DLC ;DATE LAST CONTACT (160,16) from "AF" cross-reference
"RTN","ONCOCRF",92,0)
 S XD0=D0 D GD G EX
"RTN","ONCOCRF",93,0)
 ;
"RTN","ONCOCRF",94,0)
CAS ;CANCER STATUS Last Date Contact
"RTN","ONCOCRF",95,0)
DOD ;computed Date of Death
"RTN","ONCOCRF",96,0)
 I $D(^ONCO(160,D0,1)),$P(^(1),U,1)=0 G DLC
"RTN","ONCOCRF",97,0)
 S X="" G EX
"RTN","ONCOCRF",98,0)
GD ;DATE LAST CONTACT (160,16)
"RTN","ONCOCRF",99,0)
 S X=$S('$D(^ONCO(160,XD0,"F","AA")):"",1:9999999-$O(^ONCO(160,XD0,"F","AA",0)))
"RTN","ONCOCRF",100,0)
 Q
"RTN","ONCOCRF",101,0)
 ;
"RTN","ONCOCRF",102,0)
PDLC ;DATE LAST CONTACT (165.5,200)
"RTN","ONCOCRF",103,0)
 S X=$S('$D(^ONCO(165.5,D0,"TS","AA")):"",1:9999999-$O(^ONCO(165.5,D0,"TS","AA",0))) G EX
"RTN","ONCOCRF",104,0)
 ;
"RTN","ONCOCRF",105,0)
PDLC1 ;DATE LAST CONTACT FILMANAGER FORMAT
"RTN","ONCOCRF",106,0)
 D P0 G EX:XD0="" D GD G EX
"RTN","ONCOCRF",107,0)
 ;
"RTN","ONCOCRF",108,0)
P0 S XD0=$P($G(^ONCO(165.5,D0,0)),U,2)
"RTN","ONCOCRF",109,0)
 Q
"RTN","ONCOCRF",110,0)
 ;
"RTN","ONCOCRF",111,0)
SDA ;SURVIVAL DAYS
"RTN","ONCOCRF",112,0)
 D P0 G EX:XD0="" D SD G EX ;PRESENTS SURVIVAL IN DAYS
"RTN","ONCOCRF",113,0)
 ;
"RTN","ONCOCRF",114,0)
SUR ;SURVIVAL (MONTHS)
"RTN","ONCOCRF",115,0)
 D P0 G EX:XD0="" D SD G EX:X="" S X=X/30.4375 G EX
"RTN","ONCOCRF",116,0)
 ;
"RTN","ONCOCRF",117,0)
SYR ;SURVIVAL YEARS
"RTN","ONCOCRF",118,0)
 D P0 G EX:XD0="" D SD G EX:X="" S X=X/365.25 G EX
"RTN","ONCOCRF",119,0)
 ;
"RTN","ONCOCRF",120,0)
SWK ;WEEKS FOLLOWUP
"RTN","ONCOCRF",121,0)
 D P0 G EX:XD0="" D SD G EX:X="" S X=X/7 G EX
"RTN","ONCOCRF",122,0)
 ;
"RTN","ONCOCRF",123,0)
SD S XDX=$P(^ONCO(165.5,D0,0),U,16) D GD,DC
"RTN","ONCOCRF",124,0)
 Q
"RTN","ONCOCRF",125,0)
DC ;DATE COMPARE
"RTN","ONCOCRF",126,0)
 S X2=XDX,X1=X S X=$S(X2="":"",X1="":"",1:0) Q:X=""  I X2>X1 S X="" Q
"RTN","ONCOCRF",127,0)
 D ^%DTC Q
"RTN","ONCOCRF",128,0)
DD ;DATE FORMATING
"RTN","ONCOCRF",129,0)
 S XD=$S(XD="":"",$E(XD,6,7)="00":$E(XD,4,5)_"/"_($E(XD,1,3)+1700),1:$E(XD,4,5)_"/"_$E(XD,6,7)_"/"_($E(XD,1,3)+1700))
"RTN","ONCOCRF",130,0)
 Q
"RTN","ONCOCRF",131,0)
SDF ;DUE FOLLOW-UP-TIGGERED BY NEXT FOLLOW-UP METHOD of FOLLOW-UP MULTIPLE
"RTN","ONCOCRF",132,0)
 Q
"RTN","ONCOCRF",133,0)
KDF ;KILL DUE FOLLOW-UP
"RTN","ONCOCRF",134,0)
 Q
"RTN","ONCOCRF",135,0)
 ;
"RTN","ONCOCRF",136,0)
EX ;KILL variables
"RTN","ONCOCRF",137,0)
 K DNTSKP,FS,LC,LD,NF,NM,OD,ONCDT,ONCDUZ,ONCVS,OS,X1,X2,XD,XD0,XDX,Y
"RTN","ONCOCRF",138,0)
 Q
"RTN","ONCODIS")
0^5^B774104
"RTN","ONCODIS",1,0)
ONCODIS ;Hines OIFO/GWB - OncoTrax Banner ;09/13/11
"RTN","ONCODIS",2,0)
 ;;2.2;ONCOLOGY;**1,4,7,5**;Jul 31, 2013;Build 6
"RTN","ONCODIS",3,0)
 ;
"RTN","ONCODIS",4,0)
MAIN ;OncoTrax Banner
"RTN","ONCODIS",5,0)
 S RC=$$CHKVER^ONCSAPIV()
"RTN","ONCODIS",6,0)
 D LOGO
"RTN","ONCODIS",7,0)
 K I,RC
"RTN","ONCODIS",8,0)
 Q
"RTN","ONCODIS",9,0)
 ;
"RTN","ONCODIS",10,0)
LOGO ;Display banner
"RTN","ONCODIS",11,0)
 W @IOF W !!!!!! F I=1:1:9 W !,?22,$P($T(DISP+I),";",3)
"RTN","ONCODIS",12,0)
 W !!,?22,"Department of Veterans Affairs"
"RTN","ONCODIS",13,0)
 W !?22,"OncoTraX V2.2 P5" Q
"RTN","ONCODIS",14,0)
DISP ;
"RTN","ONCODIS",15,0)
 ;;VVVV            VVAA
"RTN","ONCODIS",16,0)
 ;; VVVV          VVAAAA
"RTN","ONCODIS",17,0)
 ;;  VVVV        VVAAAAAA
"RTN","ONCODIS",18,0)
 ;;   VVVV      VVAA  AAAA
"RTN","ONCODIS",19,0)
 ;;    VVVV    VVAA    AAAA
"RTN","ONCODIS",20,0)
 ;;     VVVV  VVAA      AAAA
"RTN","ONCODIS",21,0)
 ;;      VVVVVVAA        AAAA
"RTN","ONCODIS",22,0)
 ;;       VVVVAA   AAAAAAAAAAA
"RTN","ONCODIS",23,0)
 ;;        VVAA     AAAAAAAAAAA
"RTN","ONCODSP")
0^35^B55463101
"RTN","ONCODSP",1,0)
ONCODSP ;Hines OIFO/GWB,RTK - MISCELLANEOUS OPTIONS ;05/05/10
"RTN","ONCODSP",2,0)
 ;;2.2;ONCOLOGY;**1,4,5**;Jul 31, 2013;Build 6
"RTN","ONCODSP",3,0)
 ;
"RTN","ONCODSP",4,0)
TR ;[TR Define Tumor Registry Parameters]
"RTN","ONCODSP",5,0)
 W ! S DIC="^ONCO(160.1,",DIC(0)="AEMLQ",DLAYGO=160.1 D ^DIC
"RTN","ONCODSP",6,0)
 I Y=-1 G EX
"RTN","ONCODSP",7,0)
 W @IOF,!,"  ONCOLOGY SITE PARAMETERS"
"RTN","ONCODSP",8,0)
 W !,"  ------------------------"
"RTN","ONCODSP",9,0)
 S DIE="^ONCO(160.1,",DA=+Y
"RTN","ONCODSP",10,0)
 S DR=""
"RTN","ONCODSP",11,0)
 S DR(1,160.1,1)=".01  HOSPITAL NAME....."
"RTN","ONCODSP",12,0)
 S DR(1,160.1,2)=".02  STREET ADDRESS...."
"RTN","ONCODSP",13,0)
 S DR(1,160.1,3)=".03  ZIPCODE..........."
"RTN","ONCODSP",14,0)
 ;S DR(1,160.1,3.1)="W !,""  CITY..............: "",$$GET1^DIQ(160.1,DA,66)"
"RTN","ONCODSP",15,0)
 ;S DR(1,160.1,3.2)="W !,""  STATE.............: "",$$GET1^DIQ(160.1,DA,67)"
"RTN","ONCODSP",16,0)
 S DR(1,160.1,4)=".04  REFERENCE DATE...."
"RTN","ONCODSP",17,0)
 S DR(1,160.1,5)="1  TUMOR REGISTRAR..."
"RTN","ONCODSP",18,0)
 S DR(1,160.1,6)="1.02  PHONE NUMBER......"
"RTN","ONCODSP",19,0)
 S DR(1,160.1,7)="1.03  STATE HOSPITAL #.."
"RTN","ONCODSP",20,0)
 S DR(1,160.1,8)="27  FACILITY ID #....."
"RTN","ONCODSP",21,0)
 S DR(1,160.1,8.1)="S FACPNT=$P($G(^ONCO(160.1,DA,1)),U,4) D FNPI^ONCNPI"
"RTN","ONCODSP",22,0)
 S DR(1,160.1,9)="28  CENTRAL REGISTRY #"
"RTN","ONCODSP",23,0)
 S DR(1,160.1,10)="7  VISN.............."
"RTN","ONCODSP",24,0)
 S DR(1,160.1,10.1)="19  CS/EDITS URL......"
"RTN","ONCODSP",25,0)
 S DR(1,160.1,11)="6  DIVISION.........."
"RTN","ONCODSP",26,0)
 S DR(1,160.1,11.1)="68  COC ACCREDITATION."
"RTN","ONCODSP",27,0)
 S DR(1,160.1,12)="W !"
"RTN","ONCODSP",28,0)
 S DR(1,160.1,13)="8  AFFILIATED DIVISION."
"RTN","ONCODSP",29,0)
 S DR(1,160.1,14)="W !"
"RTN","ONCODSP",30,0)
 S DR(1,160.1,15)="5  AUTHORIZED QA USER.."
"RTN","ONCODSP",31,0)
 S DR(1,160.1,16)="W !"
"RTN","ONCODSP",32,0)
 S DR(1,160.1,17)="105  ABSTRACTOR/REGISTRAR"
"RTN","ONCODSP",33,0)
 D ^DIE
"RTN","ONCODSP",34,0)
 W ! K DIR S DIR(0)="E" D ^DIR S:$D(DIRUT) OUT="Y"
"RTN","ONCODSP",35,0)
 G EX
"RTN","ONCODSP",36,0)
 ;
"RTN","ONCODSP",37,0)
TDSNIT() ;Input Transform for 3 Digit State Number multiple (160.1,105)
"RTN","ONCODSP",38,0)
 I $D(^ONCO(160.1,"E",X,DA(1))) W !!,"That number has already been assigned!! " Q 1
"RTN","ONCODSP",39,0)
 W ! Q 0
"RTN","ONCODSP",40,0)
 ;
"RTN","ONCODSP",41,0)
DIVID ;DIVISION (160.1,6) identifier
"RTN","ONCODSP",42,0)
 S ONCDIV=""
"RTN","ONCODSP",43,0)
 Q:'$D(^ONCO(160.1,Y,1))
"RTN","ONCODSP",44,0)
 S INSPTR=$P(^ONCO(160.1,Y,1),U,8)
"RTN","ONCODSP",45,0)
 Q:'$D(^DIC(4,INSPTR,99))
"RTN","ONCODSP",46,0)
 S ONCDIV=$P(^DIC(4,INSPTR,99),U,1)
"RTN","ONCODSP",47,0)
 W ?30,ONCDIV
"RTN","ONCODSP",48,0)
 K ONCDIV,INSPTR
"RTN","ONCODSP",49,0)
 Q
"RTN","ONCODSP",50,0)
 ;
"RTN","ONCODSP",51,0)
WS ;[WS Edit/print worksheet]
"RTN","ONCODSP",52,0)
 K DIR
"RTN","ONCODSP",53,0)
 S DIR("A")=" Action",DIR(0)="SO^E:Edit worksheet;P:Print worksheet"
"RTN","ONCODSP",54,0)
 D ^DIR G EW:Y="E",PW:Y="P",EX
"RTN","ONCODSP",55,0)
 ;
"RTN","ONCODSP",56,0)
EW ;Edit worksheet
"RTN","ONCODSP",57,0)
 S DIE="^ONCO(160.2,",DA=5,DR=1 D ^DIE
"RTN","ONCODSP",58,0)
 G WS
"RTN","ONCODSP",59,0)
 ;
"RTN","ONCODSP",60,0)
PW ;Print Worksheet
"RTN","ONCODSP",61,0)
 S DIC="^ONCO(160.2,",L=0,(NUMBER,DA)=5
"RTN","ONCODSP",62,0)
 S BY="@NUMBER",FR=NUMBER,TO=NUMBER,FLDS="[ONCO WORKSHEET]"
"RTN","ONCODSP",63,0)
 D EN1^DIP
"RTN","ONCODSP",64,0)
 G WS
"RTN","ONCODSP",65,0)
FST ;Type of First Recurrence for RF option.
"RTN","ONCODSP",66,0)
 ;added label FST in p *2.2*4
"RTN","ONCODSP",67,0)
 W:$G(ONC1655) ?28,$E($$GET1^DIQ(165.5,ONC1655,20),1,15),?45,$E($$GET1^DIQ(165.5,ONC1655,.02),1,11)
"RTN","ONCODSP",68,0)
 W:$G(ONC16012) ?58,$P($G(^ONCO(160.12,ONC16012,0)),U,2)
"RTN","ONCODSP",69,0)
 Q
"RTN","ONCODSP",70,0)
 ;
"RTN","ONCODSP",71,0)
RSR ;[RS Registry Summary Reports]
"RTN","ONCODSP",72,0)
 S ONCOS("T")="T",DIR("A")=" Select"
"RTN","ONCODSP",73,0)
 S DIR(0)="S^T:Today;A:Annual;F:Follow-Up",DIR("B")="Today"
"RTN","ONCODSP",74,0)
 D ^DIR G EX:Y=""!(Y[U) G @Y
"RTN","ONCODSP",75,0)
 ;
"RTN","ONCODSP",76,0)
A ;[RS Registry Summary Reports - Annual]
"RTN","ONCODSP",77,0)
 S BYR=$O(^ONCO(165.5,"AY",0))
"RTN","ONCODSP",78,0)
 F YR=$E(DT,1)+17_$E(DT,2,3)-1:-1:BYR-1 S EYR=$O(^ONCO(165.5,"AY",YR))  Q:EYR'=""
"RTN","ONCODSP",79,0)
 W !!
"RTN","ONCODSP",80,0)
 K DIR
"RTN","ONCODSP",81,0)
 S YR=$E(DT,1)+17_$E(DT,2,3)
"RTN","ONCODSP",82,0)
 S DIR("A")=" Select year for summary"
"RTN","ONCODSP",83,0)
 S DIR("B")=YR-1 S:DIR("B")<BYR DIR("B")=BYR
"RTN","ONCODSP",84,0)
 S DIR(0)="N^"_BYR_":"_EYR D ^DIR K DIR
"RTN","ONCODSP",85,0)
 G EX:Y[U!(Y=""),A:Y>YR,A:Y'?1.N S ONCOS("T")=Y
"RTN","ONCODSP",86,0)
 K DIR
"RTN","ONCODSP",87,0)
 S DIR("A")=" Analytic cases only"
"RTN","ONCODSP",88,0)
 S DIR("B")="YES"
"RTN","ONCODSP",89,0)
 S DIR(0)="Y"
"RTN","ONCODSP",90,0)
 S DIR("?")=" "
"RTN","ONCODSP",91,0)
 S DIR("?",1)=" Answer 'YES' if you want only analytic cases (CLASS OF CASE 00-22) displayed."
"RTN","ONCODSP",92,0)
 S DIR("?",2)=" Answer  'NO' if you want all cases (analytic and non-analytic) displayed."
"RTN","ONCODSP",93,0)
 D ^DIR
"RTN","ONCODSP",94,0)
 I $D(DIRUT) Q
"RTN","ONCODSP",95,0)
 S ACO=Y
"RTN","ONCODSP",96,0)
 ;
"RTN","ONCODSP",97,0)
T ;[RS Registry Summary Reports - Today]
"RTN","ONCODSP",98,0)
 K IO("Q") S %ZIS="Q" W !! D ^%ZIS I POP S ONCOUT="" G EX
"RTN","ONCODSP",99,0)
 I '$D(IO("Q")) D WAIT^DICD,TK^ONCODSP G EX
"RTN","ONCODSP",100,0)
 S ZTSAVE("ONCOS*")="",ZTSAVE("ACO")=""
"RTN","ONCODSP",101,0)
 S ZTRTN="TK^ONCODSP",ZTDESC="REGISTRY SUMMARY RPT"
"RTN","ONCODSP",102,0)
 D ^%ZTLOAD G EX
"RTN","ONCODSP",103,0)
 ;
"RTN","ONCODSP",104,0)
F ;[RS Registry Summary Reports - Follow-Up]
"RTN","ONCODSP",105,0)
 K DIR
"RTN","ONCODSP",106,0)
 W !!," Follow-up rate calculation parameters (select 1 or 2):",!
"RTN","ONCODSP",107,0)
 W !," 1) All analytic patients from the cancer registry reference date"
"RTN","ONCODSP",108,0)
 W !," 2) All analytic patients diagnosed within the last five years, or"
"RTN","ONCODSP",109,0)
 W !,"    from the cancer registry reference date, whichever is shorter"
"RTN","ONCODSP",110,0)
 W !
"RTN","ONCODSP",111,0)
 N DIR,X,Y
"RTN","ONCODSP",112,0)
 S DIR(0)="SAO^1:From cancer registry reference date;2:Within last 5 years or reference date (whichever is shorter)"
"RTN","ONCODSP",113,0)
 S DIR("A")=" Select follow-up rate calculation parameter: "
"RTN","ONCODSP",114,0)
 S DIR("?")="Select the starting point to compute the follow-up rate"
"RTN","ONCODSP",115,0)
 D ^DIR G EX:Y=""!(Y[U) S ONCOS("F")=Y
"RTN","ONCODSP",116,0)
 K IO("Q") S %ZIS="Q" W !! D ^%ZIS I POP S ONCOUT="" G EX
"RTN","ONCODSP",117,0)
 I '$D(IO("Q")) D WAIT^DICD G FR^ONCOCOF
"RTN","ONCODSP",118,0)
 S ZTSAVE("ONCOS*")="",ZTRTN="FR^ONCOCOF",ZTDESC="FOLLOWUP RATE REPORT"
"RTN","ONCODSP",119,0)
 D ^%ZTLOAD G EX
"RTN","ONCODSP",120,0)
 ;
"RTN","ONCODSP",121,0)
TK ;Tasked [RS Registry Summary Reports - Today] report 
"RTN","ONCODSP",122,0)
 S YR=ONCOS("T")
"RTN","ONCODSP",123,0)
 G AN:YR'="T"
"RTN","ONCODSP",124,0)
 S V(9)=0,F(8)=0 F I=0,1 S G(I)=0,V(I)=0,F(I)=0
"RTN","ONCODSP",125,0)
 ;S G=0,XD0=0 F  S XD0=$O(^ONCO(165.5,"AG",G,XD0)) Q:XD0'>0  I $$DIV^ONCFUNC(XD0)=DUZ(2) S G(G)=G(G)+1
"RTN","ONCODSP",126,0)
 ;S G=1,XD0=0 F  S XD0=$O(^ONCO(165.5,"AG",G,XD0)) Q:XD0'>0  I $$DIV^ONCFUNC(XD0)=DUZ(2) S G(G)=G(G)+1
"RTN","ONCODSP",127,0)
 S G=0,XD0=0 F  S XD0=$O(^ONCO(165.5,"AG",G,XD0)) Q:XD0'>0  I $$DIV^ONCFUNC(XD0)=DUZ(2),$P($G(^ONCO(165.5,XD0,7)),"^",2)'="A" S G(G)=G(G)+1
"RTN","ONCODSP",128,0)
 S G=1,XD0=0 F  S XD0=$O(^ONCO(165.5,"AG",G,XD0)) Q:XD0'>0  I $$DIV^ONCFUNC(XD0)=DUZ(2),$P($G(^ONCO(165.5,XD0,7)),"^",2)'="A" S G(G)=G(G)+1
"RTN","ONCODSP",129,0)
 S W=0,X0=0 F  S X0=$O(^ONCO(160,"ADX",X0)) Q:'X0  S X1=0 F  S X1=$O(^ONCO(160,"ADX",X0,X1)) Q:'X1  S X2=0 F  S X2=$O(^ONCO(160,"ADX",X0,X1,X2)) Q:'X2  I $$SUSDIV^ONCFUNC(X1,X2)=DUZ(2) S W=W+1
"RTN","ONCODSP",130,0)
 ;F I=0:1:3 S W(I)=0
"RTN","ONCODSP",131,0)
 ;F I=0:1:3 S X0=0 F  S X0=$O(^ONCO(165.5,"AS",I,X0)) Q:X0'>0  I $$DIV^ONCFUNC(X0)=DUZ(2) S W(I)=W(I)+1
"RTN","ONCODSP",132,0)
 F I=0,1,2,3,"A" S W(I)=0
"RTN","ONCODSP",133,0)
 F I=0,1,2,3,"A" S X0=0 F  S X0=$O(^ONCO(165.5,"AS",I,X0)) Q:X0'>0  I $$DIV^ONCFUNC(X0)=DUZ(2) S W(I)=W(I)+1
"RTN","ONCODSP",134,0)
 W !!?30,"Analytical: ",$J(G(1),5)
"RTN","ONCODSP",135,0)
 W !?26,"Non-Analytical: ",$J(G(0),5)
"RTN","ONCODSP",136,0)
 W !?26,"Accession Only: ",$J(W("A"),5)
"RTN","ONCODSP",137,0)
 W !?42,"-----"
"RTN","ONCODSP",138,0)
 ;W !?35,"Total: ",$J(G(0)+G(1),5),!!
"RTN","ONCODSP",139,0)
 W !?35,"Total: ",$J(G(0)+G(1)+W("A"),5),!!
"RTN","ONCODSP",140,0)
 W !,?30,"WORKLOAD STATISTICS",!!
"RTN","ONCODSP",141,0)
 ;W "Suspense: ",W,?15,"Incomplete: ",W(0),?35,"Minimal: ",W(1),?50,"Partial: ",W(2),?65,"Complete: ",W(3),!!
"RTN","ONCODSP",142,0)
 W "Suspense: ",W,!!,"Incomplete: ",W(0),?19,"Minimal: ",W(1),?34,"Partial: ",W(2),?49,"Complete: ",W(3),?65,"Acc Only: ",W("A"),!
"RTN","ONCODSP",143,0)
 W "---------------",!,"Total: ",W(0)+W(1)+W(2)+W(3)+W("A")
"RTN","ONCODSP",144,0)
 Q
"RTN","ONCODSP",145,0)
 ;
"RTN","ONCODSP",146,0)
AN ;[RS Registry Summary Reports - Annual]
"RTN","ONCODSP",147,0)
 K ^TMP($J,"ANNSUM")
"RTN","ONCODSP",148,0)
 S ^ONCO(164.08,"YR")=YR
"RTN","ONCODSP",149,0)
 S XD0=0 F  S XD0=$O(^ONCO(164.08,XD0)) Q:XD0'>0  F J="CC","RS","SG" S ^ONCO(164.08,XD0,J)=""
"RTN","ONCODSP",150,0)
 S ^TMP($J,"ANNSUM","YR")=YR
"RTN","ONCODSP",151,0)
 S XD0=0 F  S XD0=$O(^ONCO(164.08,XD0)) Q:XD0'>0  S ^TMP($J,"ANNSUM",XD0,0)=$G(^ONCO(164.08,XD0,0)) F J="CC","RS","SG" S ^TMP($J,"ANNSUM",XD0,J)=""
"RTN","ONCODSP",152,0)
 S XD0=0 F  S XD0=$O(^ONCO(165.5,"AY",YR,XD0)) Q:XD0'>0  I $$DIV^ONCFUNC(XD0)=DUZ(2) S X0=^ONCO(165.5,XD0,0),CSG=$P($G(^ONCO(165.5,XD0,2)),U,20),PSG=$P($G(^ONCO(165.5,XD0,2.1)),U,4),SG=$P($G(^ONCO(165.5,XD0,2)),U,28) D
"RTN","ONCODSP",153,0)
 .I $P($G(^ONCO(165.5,XD0,7)),U,2)="A" Q
"RTN","ONCODSP",154,0)
 .S COCANAL=$$GET1^DIQ(165.5,XD0,.042)
"RTN","ONCODSP",155,0)
 .I ACO=1,COCANAL="NONANALYTIC" Q
"RTN","ONCODSP",156,0)
 .I SG'="" S SG=$S(SG=0:0,SG="I":1,SG="II":2,SG="III":3,SG="IV":4,SG="U":99,SG="NA":88,1:"")
"RTN","ONCODSP",157,0)
 .I SG="" S SG=7 ;incomplete=7 (will put them in 8th piece of SG node)
"RTN","ONCODSP",158,0)
 .S ST=$P(X0,U),IC=$P(X0,U,22),PT=$P(X0,U,2),CC=$P(X0,U,20) Q:IC=""
"RTN","ONCODSP",159,0)
 .I IC=6799 S IC=6780
"RTN","ONCODSP",160,0)
 .S P0=$G(^ONCO(160,PT,0)) Q:P0=""  S RC=+$P(P0,U,6),SX=$P(P0,U,8),R=$S(RC=1:"W",RC=2:"B",1:"O"),S=$S(SX=1:"M",1:"F"),RS=R_S
"RTN","ONCODSP",161,0)
 .S CC=$S(CC=0:3,1:2),RS=$S(RS="WM":1,RS="WF":2,RS="BM":3,RS="BF":4,RS="OM":5,1:6)
"RTN","ONCODSP",162,0)
 .S SG=+SG+1,SG=$S(SG=100:6,SG=89:7,1:SG)
"RTN","ONCODSP",163,0)
 .S $P(^TMP($J,"ANNSUM",IC,"CC"),U,CC)=$P(^TMP($J,"ANNSUM",IC,"CC"),U,CC)+1,$P(^TMP($J,"ANNSUM",IC,"CC"),U)=$P(^TMP($J,"ANNSUM",IC,"CC"),U)+1
"RTN","ONCODSP",164,0)
 .S $P(^TMP($J,"ANNSUM",IC,"RS"),U,RS)=$P(^TMP($J,"ANNSUM",IC,"RS"),U,RS)+1
"RTN","ONCODSP",165,0)
 .S $P(^TMP($J,"ANNSUM",IC,"SG"),U,SG)=$P(^TMP($J,"ANNSUM",IC,"SG"),U,SG)+1
"RTN","ONCODSP",166,0)
 ;
"RTN","ONCODSP",167,0)
PRT ;Print report
"RTN","ONCODSP",168,0)
 D ^ONCODSP1
"RTN","ONCODSP",169,0)
 ;
"RTN","ONCODSP",170,0)
EX ;EXIT
"RTN","ONCODSP",171,0)
 K BY,BYR,CC,CSG,EYR,F,FLDS,FR,G,I,IC,J,L,NUMBER,ONCOS,ONCOUT
"RTN","ONCODSP",172,0)
 K P0,PSG,PT,R,RC,RS,SG,ST,SX,TO,V,W,X,X0,X1,X2,XD0,Y,YR
"RTN","ONCODSP",173,0)
 K DA,DIC,DIE,DIR,DIRUT,DLAYGO,DR,SITEPARAM
"RTN","ONCODSP",174,0)
 K ^TMP($J)
"RTN","ONCODSP",175,0)
 Q
"RTN","ONCODSP",176,0)
 ;
"RTN","ONCODSP",177,0)
CLEANUP ;Cleanup
"RTN","ONCODSP",178,0)
 K %ZIS,ACO,COCANAL,OUT,POP,S,ZTDESC,ZTRTN,ZTSAVE
"RTN","ONCODSR")
0^2^B90897333
"RTN","ONCODSR",1,0)
ONCODSR ;Hines OIFO/GWB - Surgery of Primary Site ;06/23/10
"RTN","ONCODSR",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCODSR",3,0)
 ;
"RTN","ONCODSR",4,0)
 ;^ONCO(164.2,9,"S",1-10) hold SURGICAL DX/STAGING PROC codes 0-9
"RTN","ONCODSR",5,0)
 ;^ONCO(164.2,SITE/GP,"S",11-100) holds surgery coes 10-99
"RTN","ONCODSR",6,0)
 ;
"RTN","ONCODSR",7,0)
CDSIT ;SURGERY OF PRIMARY SITE (165.5,58.2) INPUT TRANSFORM
"RTN","ONCODSR",8,0)
 N T,TOPGRPHY,SS
"RTN","ONCODSR",9,0)
 K:$L(X)>2!(X'?1.N) X G EX:'$D(X)
"RTN","ONCODSR",10,0)
 I X="00" D EN^DDIOL("  00 No surgical procedure") G EX
"RTN","ONCODSR",11,0)
 S TOPGRPHY=$$TOPGRPHY(D0) G ER:TOPGRPHY=""
"RTN","ONCODSR",12,0)
 S SS=+$P($G(^ONCO(164,TOPGRPHY,"SR")),U,$$EDITION^ONCOU55(D0))
"RTN","ONCODSR",13,0)
 I '$D(^ONCO(164.5,SS,1,X+1,0)) K X G EX
"RTN","ONCODSR",14,0)
 I ($P(^ONCO(165.5,D0,0),U,16)>2951231),$E(X,2)=8 K X G EX
"RTN","ONCODSR",15,0)
 D EN^DDIOL("  "_^ONCO(164.5,SS,1,X+1,0)) G EX
"RTN","ONCODSR",16,0)
 ;
"RTN","ONCODSR",17,0)
NCDSIT ;SURGICAL DX/STAGING PROC (165.5,58.1) INPUT TRANSFORM
"RTN","ONCODSR",18,0)
 I '$D(^ONCO(160.14,"B",X)) K X G EX
"RTN","ONCODSR",19,0)
 I $L(X)'=2 K X G EX
"RTN","ONCODSR",20,0)
 S NCDSIEN=$O(^ONCO(160.14,"B",X,0))
"RTN","ONCODSR",21,0)
 D EN^DDIOL("  "_$P(^ONCO(160.14,NCDSIEN,0),U,2))
"RTN","ONCODSR",22,0)
 K NCDSIEN Q
"RTN","ONCODSR",23,0)
 ;
"RTN","ONCODSR",24,0)
NCDSOT ;SURGICAL DX/STAGING PROC (165.5,58.1 & 58.4) OUTPUT TRANSFORM
"RTN","ONCODSR",25,0)
 Q:Y=""
"RTN","ONCODSR",26,0)
 N NCDSIEN
"RTN","ONCODSR",27,0)
 S NCDSIEN=$O(^ONCO(160.14,"B",Y,0))
"RTN","ONCODSR",28,0)
 I NCDSIEN'="" S Y=Y_" "_$P(^ONCO(160.14,NCDSIEN,0),U,2)
"RTN","ONCODSR",29,0)
 Q
"RTN","ONCODSR",30,0)
 ;
"RTN","ONCODSR",31,0)
HP0 ;SURGICAL DX/STAGING PROC (165.5,58.1) HELP
"RTN","ONCODSR",32,0)
 F XX="00","01","02","03","04","05","06","07","09" S NCDSIEN=$O(^ONCO(160.14,"B",XX,0)) D EN^DDIOL($P(^ONCO(160.14,NCDSIEN,0),U,1)_"  "_$P(^ONCO(160.14,NCDSIEN,0),U,2),,"!?2")
"RTN","ONCODSR",33,0)
 K NCDSIEN G EX
"RTN","ONCODSR",34,0)
 ;
"RTN","ONCODSR",35,0)
CDSOT ;SURGERY OF PRIMARY SITE (165.5,58.2) OUTPUT TRANSFORM
"RTN","ONCODSR",36,0)
 I Y="00" S Y="00 No surgical procedure" G EX
"RTN","ONCODSR",37,0)
 N TOPGRPHY,SS
"RTN","ONCODSR",38,0)
 S TOPGRPHY=$$TOPGRPHY(D0) G EX:TOPGRPHY=""
"RTN","ONCODSR",39,0)
 S SS=+$P($G(^ONCO(164,TOPGRPHY,"SR")),U,$$EDITION^ONCOU55(D0))
"RTN","ONCODSR",40,0)
 S Y=Y_" "_$G(^ONCO(164.5,SS,1,Y+1,0)) G EX
"RTN","ONCODSR",41,0)
 ;
"RTN","ONCODSR",42,0)
HP1 ;SURGERY OF PRIMARY SITE (165.5,58.2) HELP
"RTN","ONCODSR",43,0)
 N TOPGRPHY,TPGRPHYR,SS,XX,XXX
"RTN","ONCODSR",44,0)
 S TOPGRPHY=$$TOPGRPHY(D0) G:TOPGRPHY="" ER
"RTN","ONCODSR",45,0)
 S TPGRPHYR=^ONCO(164,TOPGRPHY,0)
"RTN","ONCODSR",46,0)
 S SS=$P($G(^ONCO(164,TOPGRPHY,"SR")),U,$$EDITION^ONCOU55(D0))
"RTN","ONCODSR",47,0)
 D EN^DDIOL("SURGERY OF PRIMARY SITE Codes for site "_$P(TPGRPHYR,U,2)_" "_$P(TPGRPHYR,U),,"!?5")
"RTN","ONCODSR",48,0)
 D EN^DDIOL("("_$P(^ONCO(164.5,SS,0),U)_")",,"!?5")
"RTN","ONCODSR",49,0)
 D EN^DDIOL("00  No surgical procedure",,"!!?1")
"RTN","ONCODSR",50,0)
 D EN^DDIOL(,,"!")
"RTN","ONCODSR",51,0)
 S XX=10 F  S XX=$O(^ONCO(164.5,SS,1,XX)) Q:XX'=+XX  D
"RTN","ONCODSR",52,0)
 .S XXX=XX-1
"RTN","ONCODSR",53,0)
 .I ($P(^ONCO(165.5,D0,0),U,16)<2960000)!($E(XXX,2)'=8) D EN^DDIOL(" "_(XX-1)_"  "_^ONCO(164.5,SS,1,XX,0))
"RTN","ONCODSR",54,0)
 G EX
"RTN","ONCODSR",55,0)
 ;
"RTN","ONCODSR",56,0)
ER ;ERROR
"RTN","ONCODSR",57,0)
 D EN^DDIOL("ICDO CODE NOT defined!! - cannot continue",,"!!?10")
"RTN","ONCODSR",58,0)
 G EX
"RTN","ONCODSR",59,0)
 ;
"RTN","ONCODSR",60,0)
EX ;EXIT
"RTN","ONCODSR",61,0)
 K AN,SS,ONCOSR
"RTN","ONCODSR",62,0)
 D EN^DDIOL(,,"!")
"RTN","ONCODSR",63,0)
 Q
"RTN","ONCODSR",64,0)
 ;
"RTN","ONCODSR",65,0)
TOPGRPHY(PRIMIX) ; returns ICDO-2 topography code for primary site PRIMIX
"RTN","ONCODSR",66,0)
 Q $P($G(^ONCO(165.5,PRIMIX,2)),U)
"RTN","ONCODSR",67,0)
 ;
"RTN","ONCODSR",68,0)
ESSPIT ;INPUT TRANSFORM FOR EXTRANODAL SITE SURGICAL PROCEDURE #856
"RTN","ONCODSR",69,0)
 N T,TOPGRPHY,SS
"RTN","ONCODSR",70,0)
 K:$L(X)>2!(X'?1.N) X G EX:'$D(X)
"RTN","ONCODSR",71,0)
 I X="00" D EN^DDIOL("  No additional surgical procedure") G EX
"RTN","ONCODSR",72,0)
 S TOPGRPHY=$P($G(^ONCO(165.5,D0,"NHL2")),U,10) G ER:TOPGRPHY=""
"RTN","ONCODSR",73,0)
 I TOPGRPHY="C888"!(TOPGRPHY="C999") K X G EX
"RTN","ONCODSR",74,0)
 S TOPGRPHY="67"_$E(TOPGRPHY,2,4)
"RTN","ONCODSR",75,0)
 S SS=+$P($G(^ONCO(164,TOPGRPHY,"SR")),U,$$EDITION^ONCOU55(D0))
"RTN","ONCODSR",76,0)
 I '$D(^ONCO(164.5,SS,1,X+1,0)) K X G EX
"RTN","ONCODSR",77,0)
 I ($P(^ONCO(165.5,D0,0),U,16)>2951231),$E(X,2)=8 K X G EX
"RTN","ONCODSR",78,0)
 D EN^DDIOL(^ONCO(164.5,SS,1,X+1,0),,"!?2") G EX
"RTN","ONCODSR",79,0)
 ;
"RTN","ONCODSR",80,0)
ESSPOT ;OUTPUT TRANSFORM FOR EXTRANODAL SITE SURGICAL PROCEDURE #856
"RTN","ONCODSR",81,0)
 I Y="00" S Y=Y_"  No additional surgical procedure" G EX
"RTN","ONCODSR",82,0)
 N TOPGRPHY,SS
"RTN","ONCODSR",83,0)
 S TOPGRPHY=$P($G(^ONCO(165.5,D0,"NHL2")),U,10) G EX:TOPGRPHY=""
"RTN","ONCODSR",84,0)
 I TOPGRPHY="C888"!(TOPGRPHY="C999") G EX
"RTN","ONCODSR",85,0)
 S TOPGRPHY="67"_$E(TOPGRPHY,2,4)
"RTN","ONCODSR",86,0)
 S SS=+$P($G(^ONCO(164,TOPGRPHY,"SR")),U,$$EDITION^ONCOU55(D0))
"RTN","ONCODSR",87,0)
 S Y=Y_" "_$G(^ONCO(164.5,SS,1,Y+1,0)) G EX
"RTN","ONCODSR",88,0)
 ;
"RTN","ONCODSR",89,0)
ESSHP ;EXECUTABLE HELP FOR EXTRANODAL SITE SURGICAL PROCEDURE #856
"RTN","ONCODSR",90,0)
 N TOPGRPHY,TPGRPHYR,SS,XX
"RTN","ONCODSR",91,0)
 S TOPGRPHY=$P($G(^ONCO(165.5,D0,"NHL2")),U,10) G ER:TOPGRPHY=""
"RTN","ONCODSR",92,0)
 I TOPGRPHY="C888"!(TOPGRPHY="C999") D EN^DDIOL("No extranodal site or unknown extranodal site!!",,"!!?5") D EN^DDIOL("00 No additional surgical procedure",,"!?5") G EX
"RTN","ONCODSR",93,0)
 S TOPGRPHY="67"_$E(TOPGRPHY,2,4)
"RTN","ONCODSR",94,0)
 S TPGRPHYR=^ONCO(164,TOPGRPHY,0)
"RTN","ONCODSR",95,0)
 S SS=$P($G(^ONCO(164,TOPGRPHY,"SR")),U,$$EDITION^ONCOU55(D0))
"RTN","ONCODSR",96,0)
 D EN^DDIOL("SURGERY OF PRIMARY SITE Codes for site ",$P(TPGRPHYR,U,2)_" "_$P(TPGRPHYR,U),,"!!")
"RTN","ONCODSR",97,0)
 D EN^DDIOL("("_$P(^ONCO(164.5,SS,0),U)_")",,"!")
"RTN","ONCODSR",98,0)
 D EN^DDIOL("00 No additional surgical procedure",,"!!?1")
"RTN","ONCODSR",99,0)
 D EN^DDIOL(,,"!")
"RTN","ONCODSR",100,0)
 S XX=10 F  S XX=$O(^ONCO(164.5,SS,1,XX)) Q:XX'=+XX  D
"RTN","ONCODSR",101,0)
 .S XXX=XX-1
"RTN","ONCODSR",102,0)
 .I ($P(^ONCO(165.5,D0,0),U,16)<2960000)!($E(XXX,2)'=8) D EN^DDIOL(" "_(XX-1)_" "_^ONCO(164.5,SS,1,XX,0)) D EN^DDIOL(,,"!")
"RTN","ONCODSR",103,0)
 D EN^DDIOL("Enter a code from the above list.",,"!") G EX
"RTN","ONCODSR",104,0)
 Q
"RTN","ONCODSR",105,0)
 ;
"RTN","ONCODSR",106,0)
FADIT ;DATE OF FIRST CONTACT (165.5,155) Input Transform
"RTN","ONCODSR",107,0)
 D NINES Q:'$D(X)  Q:X=9999999
"RTN","ONCODSR",108,0)
 I $D(X) S %DT="EP",%DT(0)="-NOW" D ^%DT S X=Y K:Y<1 X K %DT
"RTN","ONCODSR",109,0)
 Q
"RTN","ONCODSR",110,0)
 ;
"RTN","ONCODSR",111,0)
DSDTIT ;DATE OF INPATIENT DISCHARGE (165.5,1.1) Input Transform
"RTN","ONCODSR",112,0)
 ;Must be >= DATE OF INPATIENT ADMISSION (165.5,1)
"RTN","ONCODSR",113,0)
 N FAD
"RTN","ONCODSR",114,0)
 D ZS9S Q:'$D(X)  Q:(X="0000000")!(X=9999999)
"RTN","ONCODSR",115,0)
 I $D(X) S %DT="EP",%DT(0)="-NOW" D ^%DT S X=Y K:Y<1 X I $D(X) S FAD=$P($G(^ONCO(165.5,D0,0)),U,8) I FAD'="" K:X<FAD X K %DT
"RTN","ONCODSR",116,0)
 Q
"RTN","ONCODSR",117,0)
 ;
"RTN","ONCODSR",118,0)
DFSPIT ;DATE FIRST SURGICAL PROCEDURE (165.5,170) Input Transform
"RTN","ONCODSR",119,0)
 D ZS9S Q:'$D(X)  Q:(X="0000000")!(X=9999999)
"RTN","ONCODSR",120,0)
 I $D(X) S %DT="EP",%DT(0)="-NOW" D ^%DT S X=Y K:Y<1 X K %DT
"RTN","ONCODSR",121,0)
 I $D(X) S SDT=$P($G(^ONCO(165.5,D0,3)),U,1) I SDT'="",SDT'="0000000",SDT'="9999999" I X>SDT K X D EN^DDIOL("DATE FIRST SURGICAL PROCEDURE later than MOST DEFINITIVE SURG DATE",,"!!?3") K %DT,SDT Q
"RTN","ONCODSR",122,0)
 I $D(X) S SDT=$P($G(^ONCO(165.5,D0,3.1)),U,8) I SDT'="",SDT'="0000000",SDT'="9999999" I X>SDT K X D EN^DDIOL("DATE FIRST SURGICAL PROCEDURE later than MOST DEFINITIVE SURG @FAC DATE",,"!!") K %DT,SDT Q
"RTN","ONCODSR",123,0)
 I $D(X) S SDT=$P($G(^ONCO(165.5,D0,3.1)),U,22) I SDT'="",SDT'="0000000",SDT'="9999999" I X>SDT K X D EN^DDIOL("DATE FIRST SURGICAL PROCEDURE later than SCOPE OF LN SURGERY DATE",,"!!") K %DT,SDT Q
"RTN","ONCODSR",124,0)
 I $D(X) S SDT=$P($G(^ONCO(165.5,D0,3.1)),U,23) I SDT'="",SDT'="0000000",SDT'="9999999" I X>SDT K X D EN^DDIOL("DATE FIRST SURGICAL PROCEDURE later than SCOPE OF LN SURGERY @FAC DATE",,"!!") K %DT,SDT Q
"RTN","ONCODSR",125,0)
 I $D(X) S SDT=$P($G(^ONCO(165.5,D0,3.1)),U,24) I SDT'="",SDT'="0000000",SDT'="9999999" I X>SDT K X D EN^DDIOL("DATE FIRST SURGICAL PROCEDURE later than SURG PROC/OTHER SITE DATE",,"!!")
"RTN","ONCODSR",126,0)
 I $D(X) S SDT=$P($G(^ONCO(165.5,D0,3.1)),U,25) I SDT'="",SDT'="0000000",SDT'="9999999" I X>SDT K X D EN^DDIOL("DATE FIRST SURGICAL PROCEDURE later than SURG PROC/OTHER SITE @FAC DATE",,"!!")
"RTN","ONCODSR",127,0)
 K %DT,SDT
"RTN","ONCODSR",128,0)
 Q
"RTN","ONCODSR",129,0)
 ;
"RTN","ONCODSR",130,0)
DFIT ;INPUT TRANSFORM for date fields
"RTN","ONCODSR",131,0)
 ;No future dates and date must be > or = DATE DX (165.5,3)
"RTN","ONCODSR",132,0)
 N DFSP,DTDXE,DTDXI,FAIL,ZS9S
"RTN","ONCODSR",133,0)
 I $G(DIFLD)=124 S NTDD=""
"RTN","ONCODSR",134,0)
 D ZS9S Q:ZS9S=1 
"RTN","ONCODSR",135,0)
 S %DT="EP"
"RTN","ONCODSR",136,0)
 I $G(DIFLD)=90 S %DT="ESTX"  ;added in p5
"RTN","ONCODSR",137,0)
 S %DT(0)="-NOW" D ^%DT
"RTN","ONCODSR",138,0)
 S X=Y I Y<1 K X D EN^DDIOL("Future dates are not allowed.",,"!!?5") K %DT Q
"RTN","ONCODSR",139,0)
 S X=X
"RTN","ONCODSR",140,0)
 S DTDXI=$$GET1^DIQ(165.5,D0,3,"I")
"RTN","ONCODSR",141,0)
 I DTDXI=8888888!9999999 Q
"RTN","ONCODSR",142,0)
 S DTDXE=$$GET1^DIQ(165.5,D0,3,"E")
"RTN","ONCODSR",143,0)
 S FAIL=""
"RTN","ONCODSR",144,0)
 I X<DTDXI S FAIL=FAIL_"X"
"RTN","ONCODSR",145,0)
 I FAIL'="" D  Q
"RTN","ONCODSR",146,0)
 .K X
"RTN","ONCODSR",147,0)
 .D EN^DDIOL("The date entered must be later than or equal to the",,"!!?5")
"RTN","ONCODSR",148,0)
 .I FAIL["X" D EN^DDIOL("DATE DX which is "_DTDXE_($S(FAIL["A":" and the",1:".")),,"!?5")
"RTN","ONCODSR",149,0)
 .D EN^DDIOL(,,"!")
"RTN","ONCODSR",150,0)
 S DFSP=$P($G(^ONCO(165.5,D0,3.1)),U,38)
"RTN","ONCODSR",151,0)
 I $D(X),$G(DIFLD)=50 D  D EN^DDIOL(,,"!") Q
"RTN","ONCODSR",152,0)
 .I DFSP'="",DFSP'="0000000",DFSP'="9999999" I X<DFSP K X D EN^DDIOL("MOST DEFINITIVE SURG DATE earlier than DATE FIRST SURGICAL PROCEDURE",,"!!?3")
"RTN","ONCODSR",153,0)
 I $D(X),$G(DIFLD)=50.3 D  Q
"RTN","ONCODSR",154,0)
 .I DFSP'="",DFSP'="0000000",DFSP'="9999999" I X<DFSP K X D EN^DDIOL("MOST DEFINITIVE SURG @FAC DATE earlier than DATE FIRST SURGICAL PROCEDURE",,"!!?3")
"RTN","ONCODSR",155,0)
 I $D(X),$G(DIFLD)=138.2 D  Q
"RTN","ONCODSR",156,0)
 .I DFSP'="",DFSP'="0000000",DFSP'="9999999" I X<DFSP K X D EN^DDIOL("SCOPE OF LN SURGERY DATE earlier than DATE FIRST SURGICAL PROCEDURE",,"!!?3")
"RTN","ONCODSR",157,0)
 I $D(X),$G(DIFLD)=138.3 D  Q
"RTN","ONCODSR",158,0)
 .I DFSP'="",DFSP'="0000000",DFSP'="9999999" I X<DFSP K X D EN^DDIOL("SCOPE OF LN SURGERY @FAC DATE earlier than DATE FIRST SURGICAL PROCEDURE",,"!!?3")
"RTN","ONCODSR",159,0)
 I $D(X),$G(DIFLD)=139.2 D  Q
"RTN","ONCODSR",160,0)
 .I DFSP'="",DFSP'="0000000",DFSP'="9999999" I X<DFSP K X D EN^DDIOL("SURG PROC/OTHER SITE DATE earlier than DATE FIRST SURGICAL PROCEDURE",,"!!?3")
"RTN","ONCODSR",161,0)
 I $D(X),$G(DIFLD)=139.3 D  Q
"RTN","ONCODSR",162,0)
 .I DFSP'="",DFSP'="0000000",DFSP'="9999999" I X<DFSP K X D EN^DDIOL("SURG PROC/OTHER SITE @FAC DATE earlier than DATE FIRST SURGICAL PROCEDURE",,"!!?3")
"RTN","ONCODSR",163,0)
 Q
"RTN","ONCODSR",164,0)
 ;
"RTN","ONCODSR",165,0)
NTIT ;DATE OF NO TREATMENT (165.5,124) INPUT TRANSFORM
"RTN","ONCODSR",166,0)
 ;(NO FUTURE DATES AND >= DATE DX)
"RTN","ONCODSR",167,0)
 N DTDX
"RTN","ONCODSR",168,0)
 S NTDD=""
"RTN","ONCODSR",169,0)
 I (X="00/00/00")!(X="00/00/0000")!(X="00000000") K X Q
"RTN","ONCODSR",170,0)
 I (X="99/99/99")!(X="99/99/9999")!(X="99999999") K X Q
"RTN","ONCODSR",171,0)
 S %DT="EP",%DT(0)="-NOW" D ^%DT S X=Y I Y<1 K X D EN^DDIOL("Future dates are not allowed.",,"!!?5") K %DT Q
"RTN","ONCODSR",172,0)
 S DTDX=$P($G(^ONCO(165.5,D0,0)),U,16)
"RTN","ONCODSR",173,0)
 I DTDX=8888888!9999999 Q
"RTN","ONCODSR",174,0)
 I DTDX'="" I X<DTDX K X D EN^DDIOL("This date must be later than or equal to the DATE DX of "_$E(DTDX,4,5)_"/"_$E(DTDX,6,7)_"/"_($E(DTDX,1,3)+1700)_".",,"!!?5") K DTDX Q
"RTN","ONCODSR",175,0)
 Q
"RTN","ONCODSR",176,0)
 ;
"RTN","ONCODSR",177,0)
NT ;DATE OF NO TREATMENT (Input transform for treatment fields)
"RTN","ONCODSR",178,0)
 S NTDD=$P($G(^ONCO(165.5,D0,2.1)),U,11)
"RTN","ONCODSR",179,0)
 I (NTDD'="")&(X'=V) K X D EN^DDIOL("This primary has a DATE OF NO TREATMENT of "_$E(NTDD,4,5)_"/"_$E(NTDD,6,7)_"/"_($E(NTDD,1,3)+1700)_".",,"!!?5") D EN^DDIOL("Treatments are not allowed unless the DATE OF NO TREATMENT is deleted.",,"!!?5")
"RTN","ONCODSR",180,0)
 K NTDD,V Q
"RTN","ONCODSR",181,0)
 ;
"RTN","ONCODSR",182,0)
CHKTS ;Check TREATMENT STATUS (165.5,235)
"RTN","ONCODSR",183,0)
 N TS,TSI
"RTN","ONCODSR",184,0)
 S TS=$$GET1^DIQ(165.5,D0,235)
"RTN","ONCODSR",185,0)
 S TSI=$$GET1^DIQ(165.5,D0,235,"I")
"RTN","ONCODSR",186,0)
 I (TSI=0)!(TSI=2) D
"RTN","ONCODSR",187,0)
 .D EN^DDIOL("TREATMENT STATUS = "_TS,,"!!?5")
"RTN","ONCODSR",188,0)
 .D EN^DDIOL("DATE OF NO TREATMENT cannot be blank.",,"!!?5")
"RTN","ONCODSR",189,0)
 .D EN^DDIOL(,,"!")
"RTN","ONCODSR",190,0)
 .S Y=124
"RTN","ONCODSR",191,0)
 E  S Y="@41"
"RTN","ONCODSR",192,0)
 Q
"RTN","ONCODSR",193,0)
 ;
"RTN","ONCODSR",194,0)
DBTS ;DATE BRACHYTHERAPY STARTED INPUT TRANSFORM (NOT FUTURE, DX<=DBS<=DBE)
"RTN","ONCODSR",195,0)
 N DBE
"RTN","ONCODSR",196,0)
 S %DT="EP",%DT(0)="-NOW" D ^%DT S X=Y K:Y<1 X Q:'$D(X)
"RTN","ONCODSR",197,0)
 S DBE=$P($G(^ONCO(165.5,D0,"STS2")),U,13),DTDX=$P($G(^ONCO(165.5,D0,0)),U,16)
"RTN","ONCODSR",198,0)
 I DBE'="" K:X>DBE X Q:'$D(X)
"RTN","ONCODSR",199,0)
 I DTDX'="" K:X<DTDX X K %DT
"RTN","ONCODSR",200,0)
 Q
"RTN","ONCODSR",201,0)
 ;
"RTN","ONCODSR",202,0)
DBTE ;DATE BRACHYTHERAPY ENDED INPUT TRANSFORM (NOT FUTURE, DBS<=DBE)
"RTN","ONCODSR",203,0)
 N DBS
"RTN","ONCODSR",204,0)
 S %DT="EP",%DT(0)="-NOW" D ^%DT S X=Y K:Y<1 X I $D(X) S DBS=$P($G(^ONCO(165.5,D0,"STS2")),U,12) I DBS'="" K:X<DBS X K %DT
"RTN","ONCODSR",205,0)
 Q
"RTN","ONCODSR",206,0)
 ;
"RTN","ONCODSR",207,0)
ZS9S ;00/00/0000, 88/88/8888 and 99/99/9999 INPUT TRANSFORMS
"RTN","ONCODSR",208,0)
 S ZS9S=1
"RTN","ONCODSR",209,0)
 I X="00/00/00" D EN^DDIOL("00/00/00 is ambiguous.  Enter a 4 digit year. ",,"!?5") K X Q
"RTN","ONCODSR",210,0)
 I X="00/00/0000" S X="0000000" Q
"RTN","ONCODSR",211,0)
 I X="00000000" S X="0000000" Q
"RTN","ONCODSR",212,0)
 ;
"RTN","ONCODSR",213,0)
NINES ;99/99/9999 INPUT TRANSFORM
"RTN","ONCODSR",214,0)
 I X="99/99/99" D EN^DDIOL("99/99/99 is ambiguous.  Enter a 4 digit year. ",,"!?5") K X Q
"RTN","ONCODSR",215,0)
 I X="99/99/9999" S X=9999999 Q
"RTN","ONCODSR",216,0)
 I X="99999999" S X=9999999 Q
"RTN","ONCODSR",217,0)
 ;
"RTN","ONCODSR",218,0)
EIGHTS ;88/88/8888 INPUT TRANSFORM
"RTN","ONCODSR",219,0)
 I ($G(DIFLD)=193)!($G(DIFLD)=195) D  K FLD Q:'$D(X)  Q:X=8888888
"RTN","ONCODSR",220,0)
 .I X="88/88/88" D EN^DDIOL("88/88/88 is ambiguous.  Enter a 4 digit year. ",,"!?5") K X Q
"RTN","ONCODSR",221,0)
 .I X="88/88/8888" S X=8888888
"RTN","ONCODSR",222,0)
 .I X="88888888" S X=8888888
"RTN","ONCODSR",223,0)
 S ZS9S=0
"RTN","ONCODSR",224,0)
 Q
"RTN","ONCODSR",225,0)
 ;
"RTN","ONCODSR",226,0)
CLEANUP ;Cleanup
"RTN","ONCODSR",227,0)
 K D0,DIFLD,Y
"RTN","ONCOEDC")
0^13^B30501240
"RTN","ONCOEDC",1,0)
ONCOEDC ;Hines OIFO/GWB - ABSTRACT STATUS (165.5,91) Input Transform ;10/19/11
"RTN","ONCOEDC",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCOEDC",3,0)
 ;
"RTN","ONCOEDC",4,0)
CHECK ;Required field check
"RTN","ONCOEDC",5,0)
 ;CLASS OF CASE   = 00-22
"RTN","ONCOEDC",6,0)
 ;SEQUENCE NUMBER = 00-59 or 99
"RTN","ONCOEDC",7,0)
 ;DATE DX > 12/31/95
"RTN","ONCOEDC",8,0)
 ;
"RTN","ONCOEDC",9,0)
 N ABSTAT,CC,CMPLT,CNT,DCC,DCLC,DTDX,ERRFLG,EX,FDNUM,FLDNAME,FN,LINE
"RTN","ONCOEDC",10,0)
 N NODE0,ONCANL,ONCFILE,PAUSE,PRM,PTN,SQN
"RTN","ONCOEDC",11,0)
 ;next line added to set Abstracted By field for Accession Only cases
"RTN","ONCOEDC",12,0)
 I X="A",$P(^ONCO(165.5,D0,7),U,3)="" S $P(^ONCO(165.5,D0,7),U,3)=DUZ
"RTN","ONCOEDC",13,0)
 I (X=0)!(X=1)!(X=2)!(X="A") Q
"RTN","ONCOEDC",14,0)
 S PRM=D0
"RTN","ONCOEDC",15,0)
 S PTN=$P($G(^ONCO(165.5,D0,0)),U,2)
"RTN","ONCOEDC",16,0)
 S CMPLT=1,NODE0=$G(^ONCO(165.5,D0,0)),ONCTYP="",ONCANL="" K LIST
"RTN","ONCOEDC",17,0)
 S (COC,CC)=$E($$GET1^DIQ(165.5,D0,.04),1,2)
"RTN","ONCOEDC",18,0)
 S SQN=$P(NODE0,U,6),DTDX=$P(NODE0,U,16)
"RTN","ONCOEDC",19,0)
 S ABSTAT=$P($G(^ONCO(165.5,D0,7)),U,2)
"RTN","ONCOEDC",20,0)
 I CC="" D  S ONCTYP="" K X Q
"RTN","ONCOEDC",21,0)
 .W !
"RTN","ONCOEDC",22,0)
 .W !?5,"CLASS OF CLASS is blank."
"RTN","ONCOEDC",23,0)
 .W !?5,"""Required"" field checking requires CLASS OF CASE."
"RTN","ONCOEDC",24,0)
 .W !
"RTN","ONCOEDC",25,0)
 I +CC<23,(+SQN<60)!(SQN=99),DTDX>2951231 S ONCANL=1 D CHKFLDS
"RTN","ONCOEDC",26,0)
 ;follow-up and approach fields must be entered.
"RTN","ONCOEDC",27,0)
 N ONCFOLDT,ONCAUDT
"RTN","ONCOEDC",28,0)
 I $D(^ONCO(160,PTN,1)) S ONCAUDT=$P(^ONCO(160,PTN,1),U,9)
"RTN","ONCOEDC",29,0)
 S ONCFOLDT=$O(^ONCO(160,PTN,"F","B",9999999),-1)
"RTN","ONCOEDC",30,0)
 I '$G(ONCAUDT) D
"RTN","ONCOEDC",31,0)
 .I (ONCFOLDT="")!(ONCFOLDT<DTDX) S LIST("DATE OF LAST CONTACT OR DEATH")="" S CMPLT=0
"RTN","ONCOEDC",32,0)
 I (DTDX>3091231),($$GET1^DIQ(165.5,PRM,234,"I")="") S CMPLT=0,LIST($P($G(^DD(165.5,234,0)),U,1))=""
"RTN","ONCOEDC",33,0)
 ;
"RTN","ONCOEDC",34,0)
 I CMPLT=0 S ONCTYP="A" K X Q
"RTN","ONCOEDC",35,0)
 I CMPLT=1 D
"RTN","ONCOEDC",36,0)
 .I $G(ONCANL)=1 D
"RTN","ONCOEDC",37,0)
 ..W !!," All required data fields have been entered."
"RTN","ONCOEDC",38,0)
 ..W !!," Beginning inter-field edit checks..." Q
"RTN","ONCOEDC",39,0)
 .W ! D ^ONCEDIT
"RTN","ONCOEDC",40,0)
 I CMPLT=1 W !," No inter-field edit check warnings.",! D EDITS Q
"RTN","ONCOEDC",41,0)
 I $G(OVERRIDE)="NO" G QUIT
"RTN","ONCOEDC",42,0)
 K DIR S DIR(0)="YA"
"RTN","ONCOEDC",43,0)
 S DIR("A",1)=" This abstract has inter-field WARNINGS."
"RTN","ONCOEDC",44,0)
 S DIR("A")=" Do you wish to ignore them and proceed to the EDITS API? "
"RTN","ONCOEDC",45,0)
 S DIR("B")="No" D ^DIR K DIR
"RTN","ONCOEDC",46,0)
 I Y=1 S X=3 W ! D EDITS Q
"RTN","ONCOEDC",47,0)
QUIT K OVERRIDE
"RTN","ONCOEDC",48,0)
 S EDIT="YES"
"RTN","ONCOEDC",49,0)
 S ONCTYP="B" W ! S X=ABSTAT Q
"RTN","ONCOEDC",50,0)
 ;
"RTN","ONCOEDC",51,0)
CHKFLDS ;Check ONCOLOGY PRIMARY (165.5) and ONCOLOGY PATIENT (160)
"RTN","ONCOEDC",52,0)
 S ONCFILE=165.5 D F1655^ONCOEDC1
"RTN","ONCOEDC",53,0)
 S ONCFILE=160 D F160
"RTN","ONCOEDC",54,0)
 Q
"RTN","ONCOEDC",55,0)
 ;
"RTN","ONCOEDC",56,0)
F160 ;ONCOLOGY PATIENT (160)
"RTN","ONCOEDC",57,0)
 F FDNUM=2,3,7,8,9,10,38,39,43  D
"RTN","ONCOEDC",58,0)
 .D:$$GET1^DIQ(160,PTN,FDNUM,"I")="" CMPLT
"RTN","ONCOEDC",59,0)
 Q
"RTN","ONCOEDC",60,0)
 ;
"RTN","ONCOEDC",61,0)
CMPLT ;Set CMPLT = 0 and add field to list of fields needed to be filled in.
"RTN","ONCOEDC",62,0)
 S FLDNAME=$P($G(^DD(ONCFILE,FDNUM,0)),U,1) S FDNUM=""
"RTN","ONCOEDC",63,0)
 S CMPLT=0,LIST(FLDNAME)=""
"RTN","ONCOEDC",64,0)
 Q
"RTN","ONCOEDC",65,0)
 ;
"RTN","ONCOEDC",66,0)
PRINT ;Display results
"RTN","ONCOEDC",67,0)
 I $G(ONCTYP)="" Q
"RTN","ONCOEDC",68,0)
 I ONCTYP="A" D REQ
"RTN","ONCOEDC",69,0)
 I ONCTYP="B" D INTER
"RTN","ONCOEDC",70,0)
 W !
"RTN","ONCOEDC",71,0)
 K ONCTYP
"RTN","ONCOEDC",72,0)
 Q
"RTN","ONCOEDC",73,0)
 ;
"RTN","ONCOEDC",74,0)
REQ ;Missing "required" data item list
"RTN","ONCOEDC",75,0)
 W !,"  ABSTRACT STATUS may not be set to COMPLETE unless"
"RTN","ONCOEDC",76,0)
 W !,"  all ""required"" data items have been entered.",!
"RTN","ONCOEDC",77,0)
 W !,"  The following ""required"" data items have not been"
"RTN","ONCOEDC",78,0)
 W !,"  entered for this primary:",!
"RTN","ONCOEDC",79,0)
 S EX="",LINE=$S($E(IOST,1,2)="C-":IOSL-2,1:IOSL-6),CNT=0
"RTN","ONCOEDC",80,0)
 S FN=""
"RTN","ONCOEDC",81,0)
 F  S FN=$O(LIST(FN)),CNT=CNT+1 Q:FN=""  W !,?2,FN I CNT>14 D PCHK Q:EX=U
"RTN","ONCOEDC",82,0)
 Q
"RTN","ONCOEDC",83,0)
 ;
"RTN","ONCOEDC",84,0)
INTER ;Interfield edit warnings
"RTN","ONCOEDC",85,0)
 ;W !?5,"ABSTRACT STATUS may not be set to COMPLETE until all interfield"
"RTN","ONCOEDC",86,0)
 ;W !?5,"warnings listed above have been cleared."
"RTN","ONCOEDC",87,0)
 Q
"RTN","ONCOEDC",88,0)
 ;
"RTN","ONCOEDC",89,0)
PCHK ;Enter RETURN to continue or '^' to exit:
"RTN","ONCOEDC",90,0)
 I ($Y'<(LINE-1)) D  Q:EX=U  W !
"RTN","ONCOEDC",91,0)
 .W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","ONCOEDC",92,0)
 .W @IOF Q
"RTN","ONCOEDC",93,0)
 Q
"RTN","ONCOEDC",94,0)
 ;
"RTN","ONCOEDC",95,0)
EDITS ;Call to EDITS API
"RTN","ONCOEDC",96,0)
 W !," Calling EDITS API..."
"RTN","ONCOEDC",97,0)
 N ONCDST,ONCSAPI,ONCDTTIM,ONCDTEMP
"RTN","ONCOEDC",98,0)
 D NOW^%DTC S ONCDTTIM=%
"RTN","ONCOEDC",99,0)
 S DCC=$P($G(^ONCO(165.5,D0,7)),U,1)
"RTN","ONCOEDC",100,0)
 S DCLC=$P($G(^ONCO(165.5,D0,7)),U,21)
"RTN","ONCOEDC",101,0)
 I DCC="" D
"RTN","ONCOEDC",102,0)
 .S $P(^ONCO(165.5,PRM,7),U,1)=ONCDTTIM
"RTN","ONCOEDC",103,0)
 .S ^ONCO(165.5,"AAD",DT,PRM)=""
"RTN","ONCOEDC",104,0)
 .S $P(^ONCO(165.5,PRM,7),U,3)=DUZ
"RTN","ONCOEDC",105,0)
 .S $P(^ONCO(165.5,PRM,"EDITS"),U,3)="N"
"RTN","ONCOEDC",106,0)
 I ABSTAT=3,$P($G(^ONCO(165.5,D0,7)),U,3)="" S $P(^ONCO(165.5,PRM,7),U,3)=DUZ
"RTN","ONCOEDC",107,0)
 I DCC'="",$P($G(^ONCO(165.5,D0,7)),U,3)="" S $P(^ONCO(165.5,PRM,7),U,3)=DUZ
"RTN","ONCOEDC",108,0)
 D ^ONCGENED
"RTN","ONCOEDC",109,0)
 K EDIT
"RTN","ONCOEDC",110,0)
 I ERRFLG'=0 D  Q
"RTN","ONCOEDC",111,0)
 .I ABSTAT=3 W !!,"EDITS errors were encountered. ABSTRACT STATUS changed to 0 (Incomplete).",!
"RTN","ONCOEDC",112,0)
 .I ABSTAT'=3 W !!,"EDITS errors were encountered. ABSTRACT STATUS is unchanged.",!
"RTN","ONCOEDC",113,0)
 .I DCC="" D
"RTN","ONCOEDC",114,0)
 ..S $P(^ONCO(165.5,D0,7),U,1)=""
"RTN","ONCOEDC",115,0)
 ..K ^ONCO(165.5,"AAD",DT,PRM)
"RTN","ONCOEDC",116,0)
 ..S $P(^ONCO(165.5,D0,7),U,3)=""
"RTN","ONCOEDC",117,0)
 ..S $P(^ONCO(165.5,D0,"EDITS"),U,3)=""
"RTN","ONCOEDC",118,0)
 .K DIR S DIR(0)="YA"
"RTN","ONCOEDC",119,0)
 .S DIR("A")=" Do you wish to return to the Primary Menu Options? "
"RTN","ONCOEDC",120,0)
 .S DIR("B")="Yes" D ^DIR K DIR
"RTN","ONCOEDC",121,0)
 .I Y=1 S EDIT="YES"
"RTN","ONCOEDC",122,0)
 .S X=$S(ABSTAT=3:0,1:ABSTAT)
"RTN","ONCOEDC",123,0)
 W !," No EDITS errors or warnings."
"RTN","ONCOEDC",124,0)
 S SAVEX=3,$P(^ONCO(165.5,D0,7),U,2)=3,^ONCO(165.5,"AS",3,D0)=""
"RTN","ONCOEDC",125,0)
 ;S ONCEDC3=1,DIE="^ONCO(165.5,",DA=D0,DR="91///^S X=3" D ^DIE K ONCEDC3
"RTN","ONCOEDC",126,0)
 I DCC'="" D
"RTN","ONCOEDC",127,0)
 .I DCLC'="" K ^ONCO(165.5,"AAE",DCLC,PRM)
"RTN","ONCOEDC",128,0)
 .S $P(^ONCO(165.5,PRM,7),U,21)=ONCDTTIM
"RTN","ONCOEDC",129,0)
 .S ^ONCO(165.5,"AAE",DT,PRM)=""
"RTN","ONCOEDC",130,0)
 .S $P(^ONCO(165.5,PRM,7),U,22)=DUZ
"RTN","ONCOEDC",131,0)
 .S:$P(^ONCO(165.5,PRM,7),U,3)="" $P(^ONCO(165.5,PRM,7),U,3)=DUZ
"RTN","ONCOEDC",132,0)
 W !
"RTN","ONCOEDC",133,0)
 W !," ABSTRACT STATUS.............: ",$$GET1^DIQ(165.5,D0,91,"E")
"RTN","ONCOEDC",134,0)
 W !," DATE CASE INITIATED.........: ",$$GET1^DIQ(165.5,D0,236,"E")
"RTN","ONCOEDC",135,0)
 W !," INITIATED BY................: ",$$GET1^DIQ(165.5,D0,244,"E")
"RTN","ONCOEDC",136,0)
 W !," DATE OF FIRST CONTACT.......: ",$$GET1^DIQ(165.5,D0,155,"E")
"RTN","ONCOEDC",137,0)
 W !," DATE CASE COMPLETED.........: " S ONCDTEMP=$P($G(^ONCO(165.5,D0,7)),U,1) W $$FMTE^XLFDT(ONCDTEMP,"5P")
"RTN","ONCOEDC",138,0)
 W !," ELAPSED DAYS TO COMPLETION..: ",$$GET1^DIQ(165.5,D0,157,"E")
"RTN","ONCOEDC",139,0)
 ;W !," ELAPSED MONTHS TO COMPLETION: ",$$GET1^DIQ(165.5,D0,157.1,"E")
"RTN","ONCOEDC",140,0)
 W !," ABSTRACTED BY...............: ",$$GET1^DIQ(165.5,D0,92,"E")
"RTN","ONCOEDC",141,0)
 W !," DATE CASE LAST CHANGED......: " S ONCDTEMP=$P($G(^ONCO(165.5,D0,7)),U,21) W $$FMTE^XLFDT(ONCDTEMP,"5P")
"RTN","ONCOEDC",142,0)
 W !," CASE LAST CHANGED BY........: ",$$GET1^DIQ(165.5,D0,199,"E")
"RTN","ONCOEDC",143,0)
 W !
"RTN","ONCOEDC",144,0)
 S EDITS="NO" D NAACCR^ONCGENED K EDITS
"RTN","ONCOEDC",145,0)
 D CHKSUM^ONCGENED
"RTN","ONCOEDC",146,0)
 W ! R "Enter RETURN to continue: ",PAUSE:30
"RTN","ONCOEDC",147,0)
 I $G(SAVEX)=3 S X=3
"RTN","ONCOEDC",148,0)
 Q
"RTN","ONCOEDC",149,0)
 ;
"RTN","ONCOEDC",150,0)
CLEANUP ;Cleanup
"RTN","ONCOEDC",151,0)
 K COC,D0,Y
"RTN","ONCOEDC1")
0^10^B41015408
"RTN","ONCOEDC1",1,0)
ONCOEDC1 ;Hines OIFO/GWB - "Required" data item check ;06/23/10
"RTN","ONCOEDC1",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCOEDC1",3,0)
 ;
"RTN","ONCOEDC1",4,0)
F1655 ;If data item blank, S CMPLT=0 and add field to list
"RTN","ONCOEDC1",5,0)
 I (DTDX>3091231),($$GET1^DIQ(165.5,PRM,234,"I")="") S FDNUM=234 D CMPLT
"RTN","ONCOEDC1",6,0)
 I $$GET1^DIQ(165.5,PRM,361,"I")="" S FDNUM=361 D CMPLT
"RTN","ONCOEDC1",7,0)
 I $$GET1^DIQ(165.5,PRM,155,"I")="" S FDNUM=155 D CMPLT
"RTN","ONCOEDC1",8,0)
 I $$GET1^DIQ(165.5,PRM,56,"I")="" S FDNUM=56 D CMPLT
"RTN","ONCOEDC1",9,0)
 I $$GET1^DIQ(165.5,PRM,125,"I")="" S FDNUM=125 D CMPLT
"RTN","ONCOEDC1",10,0)
 I $$GET1^DIQ(165.5,PRM,126,"I")="" S FDNUM=126 D CMPLT
"RTN","ONCOEDC1",11,0)
 I $$GET1^DIQ(165.5,PRM,363,"I")="" S FDNUM=363 D CMPLT
"RTN","ONCOEDC1",12,0)
 I $$GET1^DIQ(165.5,PRM,.03,"I")="" S FDNUM=.03 D CMPLT
"RTN","ONCOEDC1",13,0)
 I $$GET1^DIQ(165.5,PRM,.05,"I")="" S FDNUM=.05 D CMPLT
"RTN","ONCOEDC1",14,0)
 I $$GET1^DIQ(165.5,PRM,.06,"I")="" S FDNUM=.06 D CMPLT
"RTN","ONCOEDC1",15,0)
 I $$GET1^DIQ(165.5,PRM,.07,"I")="" S FDNUM=.07 D CMPLT
"RTN","ONCOEDC1",16,0)
 I $$GET1^DIQ(165.5,PRM,8,"I")="" S FDNUM=8 D CMPLT
"RTN","ONCOEDC1",17,0)
 I $$GET1^DIQ(165.5,PRM,8.1,"I")="" S FDNUM=8.1 D CMPLT
"RTN","ONCOEDC1",18,0)
 I $$GET1^DIQ(165.5,PRM,16,"I")="" S FDNUM=16 D CMPLT
"RTN","ONCOEDC1",19,0)
 I $$GET1^DIQ(165.5,PRM,11,"I")="" S FDNUM=11 D CMPLT
"RTN","ONCOEDC1",20,0)
 I $$GET1^DIQ(165.5,PRM,9,"I")="" S FDNUM=9 D CMPLT
"RTN","ONCOEDC1",21,0)
 I $$GET1^DIQ(165.5,PRM,10,"I")="" S FDNUM=10 D CMPLT
"RTN","ONCOEDC1",22,0)
 I $$GET1^DIQ(165.5,PRM,4,"E")="" S FDNUM=4 D CMPLT
"RTN","ONCOEDC1",23,0)
 I $$GET1^DIQ(165.5,PRM,1.2,"I")="" S FDNUM=1.2 D CMPLT
"RTN","ONCOEDC1",24,0)
 I $$GET1^DIQ(165.5,PRM,2.1,"I")="" S FDNUM=2.1 D CMPLT
"RTN","ONCOEDC1",25,0)
 I $$GET1^DIQ(165.5,PRM,18,"I")="" S FDNUM=18 D CMPLT
"RTN","ONCOEDC1",26,0)
 I $$GET1^DIQ(165.5,PRM,.04,"I")="" S FDNUM=.04 D CMPLT
"RTN","ONCOEDC1",27,0)
 I $$GET1^DIQ(165.5,PRM,12,"I")="" S FDNUM=12 D CMPLT
"RTN","ONCOEDC1",28,0)
 I $$GET1^DIQ(165.5,PRM,3,"I")="" S FDNUM=3 D CMPLT
"RTN","ONCOEDC1",29,0)
 I $$GET1^DIQ(165.5,PRM,147,"I")="" S FDNUM=147 D CMPLT
"RTN","ONCOEDC1",30,0)
 I $$GET1^DIQ(165.5,PRM,20,"I")="" S FDNUM=20 D CMPLT
"RTN","ONCOEDC1",31,0)
 I $$GET1^DIQ(165.5,PRM,28,"I")="" S FDNUM=28 D CMPLT
"RTN","ONCOEDC1",32,0)
 I $$GET1^DIQ(165.5,PRM,22.3,"I")="" S FDNUM=22.3 D CMPLT
"RTN","ONCOEDC1",33,0)
 I $$GET1^DIQ(165.5,PRM,24,"I")="" S FDNUM=24 D CMPLT
"RTN","ONCOEDC1",34,0)
 I $$GET1^DIQ(165.5,PRM,26,"I")="" S FDNUM=26 D CMPLT
"RTN","ONCOEDC1",35,0)
 I $$GET1^DIQ(165.5,PRM,29,"I")="" S FDNUM=29 D CMPLT
"RTN","ONCOEDC1",36,0)
 I $$GET1^DIQ(165.5,PRM,30,"I")="" S FDNUM=30 D CMPLT
"RTN","ONCOEDC1",37,0)
 I $$GET1^DIQ(165.5,PRM,31,"I")="" S FDNUM=31 D CMPLT
"RTN","ONCOEDC1",38,0)
 I $$GET1^DIQ(165.5,PRM,33,"I")="" S FDNUM=33 D CMPLT
"RTN","ONCOEDC1",39,0)
 I DTDX<3040000 D
"RTN","ONCOEDC1",40,0)
 .I $$GET1^DIQ(165.5,PRM,34,"I")="" S FDNUM=34 D CMPLT
"RTN","ONCOEDC1",41,0)
 .I $$GET1^DIQ(165.5,PRM,34.1,"I")="" S FDNUM=34.1 D CMPLT
"RTN","ONCOEDC1",42,0)
 .I $$GET1^DIQ(165.5,PRM,34.2,"I")="" S FDNUM=34.2 D CMPLT
"RTN","ONCOEDC1",43,0)
 .I $$GET1^DIQ(165.5,PRM,35,"I")="" S FDNUM=35 D CMPLT
"RTN","ONCOEDC1",44,0)
 I $$GET1^DIQ(165.5,PRM,32,"I")="" S FDNUM=32 D CMPLT
"RTN","ONCOEDC1",45,0)
 ;I $$GET1^DIQ(165.5,PRM,37.1,"I")="" S FDNUM=37.1  D CMPLT
"RTN","ONCOEDC1",46,0)
 ;I $$GET1^DIQ(165.5,PRM,85,"I")="" S FDNUM=85 D CMPLT
"RTN","ONCOEDC1",47,0)
 ;I '$$GTT^ONCOU55(PRM),$$GET1^DIQ(165.5,PRM,37.2,"I")="" S FDNUM=37.2 D CMPLT
"RTN","ONCOEDC1",48,0)
 ;I '$$GTT^ONCOU55(PRM),$$GET1^DIQ(165.5,PRM,86,"I")="" S FDNUM=86 D CMPLT
"RTN","ONCOEDC1",49,0)
 ;I $$GET1^DIQ(165.5,PRM,37.3,"I")="" S FDNUM=37.3 D CMPLT
"RTN","ONCOEDC1",50,0)
 I DTDX<3100000 D
"RTN","ONCOEDC1",51,0)
 .I $$GET1^DIQ(165.5,PRM,87,"I")="" S FDNUM=87 D CMPLT
"RTN","ONCOEDC1",52,0)
 I DTDX<3030000 D
"RTN","ONCOEDC1",53,0)
 .I $$GET1^DIQ(165.5,PRM,25.1,"I")="" S FDNUM=25.1 D CMPLT
"RTN","ONCOEDC1",54,0)
 .I $$GET1^DIQ(165.5,PRM,25.2,"I")="" S FDNUM=25.2 D CMPLT
"RTN","ONCOEDC1",55,0)
 .I $$GET1^DIQ(165.5,PRM,25.3,"I")="" S FDNUM=25.3 D CMPLT
"RTN","ONCOEDC1",56,0)
 I $$GET1^DIQ(165.5,PRM,38,"I")="" S FDNUM=38 D CMPLT
"RTN","ONCOEDC1",57,0)
 I $$GET1^DIQ(165.5,PRM,88,"I")="" S FDNUM=88 D CMPLT
"RTN","ONCOEDC1",58,0)
 I $$GET1^DIQ(165.5,PRM,19,"I")="" S FDNUM=19 D CMPLT
"RTN","ONCOEDC1",59,0)
 I $$GET1^DIQ(165.5,PRM,89,"I")="" S FDNUM=89 D CMPLT
"RTN","ONCOEDC1",60,0)
 I $$GET1^DIQ(165.5,PRM,58.3,"I")="" S FDNUM=58.3 D CMPLT
"RTN","ONCOEDC1",61,0)
 I $$GET1^DIQ(165.5,PRM,58.1,"I")="" S FDNUM=58.1 D CMPLT
"RTN","ONCOEDC1",62,0)
 I $$GET1^DIQ(165.5,PRM,560,"I")="" S FDNUM=560 D CMPLT
"RTN","ONCOEDC1",63,0)
 I $$GET1^DIQ(165.5,PRM,49,"E")="" S FDNUM=49 D CMPLT
"RTN","ONCOEDC1",64,0)
 I $$GET1^DIQ(165.5,PRM,50,"I")="" S FDNUM=50 D CMPLT
"RTN","ONCOEDC1",65,0)
 I $$GET1^DIQ(165.5,PRM,58,"I")="" S FDNUM=58 D CMPLT
"RTN","ONCOEDC1",66,0)
 I $$GET1^DIQ(165.5,PRM,58.6,"I")="" S FDNUM=58.6 D CMPLT
"RTN","ONCOEDC1",67,0)
 I $$GET1^DIQ(165.5,PRM,75,"I")="" S FDNUM=75 D CMPLT
"RTN","ONCOEDC1",68,0)
 I $$GET1^DIQ(165.5,PRM,59,"I")="" S FDNUM=59 D CMPLT
"RTN","ONCOEDC1",69,0)
 I DTDX<3030000 D
"RTN","ONCOEDC1",70,0)
 .I $$GET1^DIQ(165.5,PRM,23,"I")="" S FDNUM=23 D CMPLT
"RTN","ONCOEDC1",71,0)
 I $$GET1^DIQ(165.5,PRM,51,"I")="" S FDNUM=51 D CMPLT
"RTN","ONCOEDC1",72,0)
 I $$GET1^DIQ(165.5,PRM,51.2,"I")="" S FDNUM=51.2 D CMPLT
"RTN","ONCOEDC1",73,0)
 I $$GET1^DIQ(165.5,PRM,51.3,"I")="" S FDNUM=51.3 D CMPLT
"RTN","ONCOEDC1",74,0)
 I $$GET1^DIQ(165.5,PRM,53,"I")="" S FDNUM=53 D CMPLT
"RTN","ONCOEDC1",75,0)
 I $$GET1^DIQ(165.5,PRM,53.2,"I")="" S FDNUM=53.2 D CMPLT
"RTN","ONCOEDC1",76,0)
 I $$GET1^DIQ(165.5,PRM,54,"I")="" S FDNUM=54 D CMPLT
"RTN","ONCOEDC1",77,0)
 I $$GET1^DIQ(165.5,PRM,54.2,"I")="" S FDNUM=54.2 D CMPLT
"RTN","ONCOEDC1",78,0)
 I $$GET1^DIQ(165.5,PRM,55,"I")="" S FDNUM=55 D CMPLT
"RTN","ONCOEDC1",79,0)
 I $$GET1^DIQ(165.5,PRM,55.2,"I")="" S FDNUM=55.2 D CMPLT
"RTN","ONCOEDC1",80,0)
 I $$GET1^DIQ(165.5,PRM,57,"I")="" S FDNUM=57 D CMPLT
"RTN","ONCOEDC1",81,0)
 I $$GET1^DIQ(165.5,PRM,57.2,"I")="" S FDNUM=57.2 D CMPLT
"RTN","ONCOEDC1",82,0)
 I DTDX<3030000 D
"RTN","ONCOEDC1",83,0)
 .I $$GET1^DIQ(165.5,PRM,74,"I")="" S FDNUM=74 D CMPLT
"RTN","ONCOEDC1",84,0)
 .I $$GET1^DIQ(165.5,PRM,58.2,"I")="" S FDNUM=58.2 D CMPLT
"RTN","ONCOEDC1",85,0)
 .I $$GET1^DIQ(165.5,PRM,50.2,"I")="" S FDNUM=50.2 D CMPLT
"RTN","ONCOEDC1",86,0)
 .I $$GET1^DIQ(165.5,PRM,138,"I")="" S FDNUM=138 D CMPLT
"RTN","ONCOEDC1",87,0)
 .I $$GET1^DIQ(165.5,PRM,138.1,"I")="" S FDNUM=138.1 D CMPLT
"RTN","ONCOEDC1",88,0)
 .I $$GET1^DIQ(165.5,PRM,139,"I")="" S FDNUM=139 D CMPLT
"RTN","ONCOEDC1",89,0)
 .I $$GET1^DIQ(165.5,PRM,139.1,"I")="" S FDNUM=139.1 D CMPLT
"RTN","ONCOEDC1",90,0)
 .I $$GET1^DIQ(165.5,PRM,140,"I")="" S FDNUM=140 D CMPLT
"RTN","ONCOEDC1",91,0)
 .I $$GET1^DIQ(165.5,PRM,140.1,"I")="" S FDNUM=140.1 D CMPLT
"RTN","ONCOEDC1",92,0)
 I DTDX'=9999999,DTDX>3061231,DTDX<3130101 D
"RTN","ONCOEDC1",93,0)
 .I $$GET1^DIQ(165.5,PRM,159,"I")="" S FDNUM=159 D CMPLT
"RTN","ONCOEDC1",94,0)
 .I $$GET1^DIQ(165.5,PRM,193,"I")="" S FDNUM=193 D CMPLT
"RTN","ONCOEDC1",95,0)
 .I $$GET1^DIQ(165.5,PRM,194,"I")="" S FDNUM=194 D CMPLT
"RTN","ONCOEDC1",96,0)
 .I $$GET1^DIQ(165.5,PRM,195,"I")="" S FDNUM=195 D CMPLT
"RTN","ONCOEDC1",97,0)
 .I $$GET1^DIQ(165.5,PRM,196,"I")="" S FDNUM=196 D CMPLT
"RTN","ONCOEDC1",98,0)
 I DTDX'=9999999,DTDX>2971231 D
"RTN","ONCOEDC1",99,0)
 .I $$GET1^DIQ(165.5,PRM,138.4,"I")="" S FDNUM=138.4 D CMPLT
"RTN","ONCOEDC1",100,0)
 .I $$GET1^DIQ(165.5,PRM,139.4,"I")="" S FDNUM=139.4 D CMPLT
"RTN","ONCOEDC1",101,0)
 .I $$GET1^DIQ(165.5,PRM,138.5,"I")="" S FDNUM=138.5 D CMPLT
"RTN","ONCOEDC1",102,0)
 .I $$GET1^DIQ(165.5,PRM,139.5,"I")="" S FDNUM=139.5 D CMPLT
"RTN","ONCOEDC1",103,0)
 .I $$GET1^DIQ(165.5,PRM,435,"I")="" S FDNUM=435 D CMPLT
"RTN","ONCOEDC1",104,0)
 .I $$GET1^DIQ(165.5,PRM,14,"I")="" S FDNUM=14 D CMPLT
"RTN","ONCOEDC1",105,0)
 .I $$GET1^DIQ(165.5,PRM,58.7,"I")="" S FDNUM=58.7 D CMPLT
"RTN","ONCOEDC1",106,0)
 .I $$GET1^DIQ(165.5,PRM,51.4,"I")="" S FDNUM=51.4 D CMPLT
"RTN","ONCOEDC1",107,0)
 .I $$GET1^DIQ(165.5,PRM,53.3,"I")="" S FDNUM=53.3 D CMPLT
"RTN","ONCOEDC1",108,0)
 .I $$GET1^DIQ(165.5,PRM,54.3,"I")="" S FDNUM=54.3 D CMPLT
"RTN","ONCOEDC1",109,0)
 .I $$GET1^DIQ(165.5,PRM,55.3,"I")="" S FDNUM=55.3 D CMPLT
"RTN","ONCOEDC1",110,0)
 .I $$GET1^DIQ(165.5,PRM,57.3,"I")="" S FDNUM=57.3 D CMPLT
"RTN","ONCOEDC1",111,0)
 .I $$GET1^DIQ(165.5,PRM,58.4,"I")="" S FDNUM=58.4 D CMPLT
"RTN","ONCOEDC1",112,0)
 I DTDX'=9999999,DTDX>2961231 I $$GET1^DIQ(165.5,PRM,442,"I")="" S FDNUM=442 D CMPLT
"RTN","ONCOEDC1",113,0)
 I DTDX'=9999999,DTDX>3031231 D
"RTN","ONCOEDC1",114,0)
 .I $$GET1^DIQ(165.5,PRM,29.2,"I")="" S FDNUM=29.2 D CMPLT
"RTN","ONCOEDC1",115,0)
 .I $$GET1^DIQ(165.5,PRM,30.2,"I")="" S FDNUM=30.2 D CMPLT
"RTN","ONCOEDC1",116,0)
 .I $$GET1^DIQ(165.5,PRM,29.1,"I")="" S FDNUM=29.1 D CMPLT
"RTN","ONCOEDC1",117,0)
 .I $$GET1^DIQ(165.5,PRM,31.1,"I")="" S FDNUM=31.1 D CMPLT
"RTN","ONCOEDC1",118,0)
 .I $$GET1^DIQ(165.5,PRM,32.1,"I")="" S FDNUM=32.1 D CMPLT
"RTN","ONCOEDC1",119,0)
 .I $$GET1^DIQ(165.5,PRM,34.3,"I")="" S FDNUM=34.3 D CMPLT
"RTN","ONCOEDC1",120,0)
 .I $$GET1^DIQ(165.5,PRM,34.4,"I")="" S FDNUM=34.4 D CMPLT
"RTN","ONCOEDC1",121,0)
 .I $$GET1^DIQ(165.5,PRM,44.1,"I")="" S FDNUM=44.1 D CMPLT
"RTN","ONCOEDC1",122,0)
 .I $$GET1^DIQ(165.5,PRM,44.2,"I")="" S FDNUM=44.2 D CMPLT
"RTN","ONCOEDC1",123,0)
 .I $$GET1^DIQ(165.5,PRM,44.3,"I")="" S FDNUM=44.3 D CMPLT
"RTN","ONCOEDC1",124,0)
 .I $$GET1^DIQ(165.5,PRM,44.4,"I")="" S FDNUM=44.4 D CMPLT
"RTN","ONCOEDC1",125,0)
 .I $$GET1^DIQ(165.5,PRM,44.5,"I")="" S FDNUM=44.5 D CMPLT
"RTN","ONCOEDC1",126,0)
 .I $$GET1^DIQ(165.5,PRM,44.6,"I")="" S FDNUM=44.6 D CMPLT
"RTN","ONCOEDC1",127,0)
 .I $$GET1^DIQ(165.5,PRM,160,"I")="" S FDNUM=160 D CMPLT
"RTN","ONCOEDC1",128,0)
 .I $$GET1^DIQ(165.5,PRM,161,"I")="" S FDNUM=161 D CMPLT
"RTN","ONCOEDC1",129,0)
 .I $$GET1^DIQ(165.5,PRM,162,"I")="" S FDNUM=162 D CMPLT
"RTN","ONCOEDC1",130,0)
 .I $$GET1^DIQ(165.5,PRM,163,"I")="" S FDNUM=163 D CMPLT
"RTN","ONCOEDC1",131,0)
 .I $$GET1^DIQ(165.5,PRM,164,"I")="" S FDNUM=164 D CMPLT
"RTN","ONCOEDC1",132,0)
 .I $$GET1^DIQ(165.5,PRM,165,"I")="" S FDNUM=165 D CMPLT
"RTN","ONCOEDC1",133,0)
 .I $$GET1^DIQ(165.5,PRM,166,"I")="" S FDNUM=166 D CMPLT
"RTN","ONCOEDC1",134,0)
 .I $$GET1^DIQ(165.5,PRM,167,"I")="" S FDNUM=167 D CMPLT
"RTN","ONCOEDC1",135,0)
 .I $$GET1^DIQ(165.5,PRM,168,"I")="" S FDNUM=168 D CMPLT
"RTN","ONCOEDC1",136,0)
 Q
"RTN","ONCOEDC1",137,0)
 ;
"RTN","ONCOEDC1",138,0)
CMPLT ;Set CMPLT = 0 and add FLD to LIST of fields needed to be filled in.
"RTN","ONCOEDC1",139,0)
 S FLDNAME=$P($G(^DD(ONCFILE,FDNUM,0)),U,1) S FDNUM=""
"RTN","ONCOEDC1",140,0)
 S CMPLT=0,LIST(FLDNAME)=""
"RTN","ONCOEDC1",141,0)
 Q
"RTN","ONCOEDC1",142,0)
 ;
"RTN","ONCOEDC1",143,0)
CLEANUP ;Cleanup
"RTN","ONCOEDC1",144,0)
 K CMPLT,DTDX,FDNUM,FLDNAME,LIST,ONCFILE,PRM
"RTN","ONCOEDC1",145,0)
 Q
"RTN","ONCOPA1")
0^26^B58176942
"RTN","ONCOPA1",1,0)
ONCOPA1 ;Hines OIFO/GWB - [PA Print Complete Abstract (132c)] ;09/22/11
"RTN","ONCOPA1",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCOPA1",3,0)
 ;
"RTN","ONCOPA1",4,0)
 ;Replaces print templates ONCOX1-X11.
"RTN","ONCOPA1",5,0)
 ;
"RTN","ONCOPA1",6,0)
 K IOP,%ZIS S %ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP EXIT
"RTN","ONCOPA1",7,0)
 I $D(IO("Q")) S ONCOLST="ONCOIEN^PTIEN^STARS^LENGTH^TITLE^PRTPCE^ONCODA^ESPD" D TASK G EXIT
"RTN","ONCOPA1",8,0)
 U IO D PRINT D ^%ZISC K %ZIS,IOP G EXIT
"RTN","ONCOPA1",9,0)
 ;
"RTN","ONCOPA1",10,0)
PRINT ;Print
"RTN","ONCOPA1",11,0)
 Q:$G(ONCOIEN)=""
"RTN","ONCOPA1",12,0)
 W @IOF
"RTN","ONCOPA1",13,0)
 S (IEN,D0)=ONCOIEN,PTIEN=$P($G(^ONCO(165.5,IEN,0)),U,2)
"RTN","ONCOPA1",14,0)
 S PG=0,EX="",LINE=$S($E(IOST,1,2)="C-":IOSL-2,1:IOSL-6)
"RTN","ONCOPA1",15,0)
 S STARS="******************************************************************************"
"RTN","ONCOPA1",16,0)
 S DATEDX=$P($G(^ONCO(165.5,IEN,0)),U,16)
"RTN","ONCOPA1",17,0)
 D NOW^%DTC S Y=% K % D DD^%DT S PRTDATE=Y
"RTN","ONCOPA1",18,0)
 K DIQ S DIC="^ONCO(160,",DIQ(0)="C"
"RTN","ONCOPA1",19,0)
 S DR=".111:.131;2;7:10;13;18.9:21;22.9:29;38:44;48;50;51;52;61;55;56;62;63;64;65;66;67;68;1006"
"RTN","ONCOPA1",20,0)
 S DA=PTIEN,DIQ="ONCAB" D EN^DIQ1
"RTN","ONCOPA1",21,0)
 K DIQ S DIC="^ONCO(165.5,",DIQ(0)="C"
"RTN","ONCOPA1",22,0)
 S DR=".01:.07;1.2;2:2.4;3;3.5:19;20.1;22:35.1;37:40.2;41;49:59;62:67;70:71.3;74:79;83;85:92;95;100;101;108;117:130;132;133;137:146;200;346;363;363.1;442;443;560;787;50.2;361;623;684;1010;153:153.3;435;149;151;154:156;170;171:192;711:713;809"
"RTN","ONCOPA1",23,0)
 S DA=ONCOIEN,DIQ="ONCAB" D EN^DIQ1
"RTN","ONCOPA1",24,0)
 K DIQ S DIC="^ONCO(165.5,",DIQ(0)="IE"
"RTN","ONCOPA1",25,0)
 S DR="29.2;30.2;29.1;31.1;32.1;32;33;34.3;34.4;44.1:44.9;160:168;148:148.4;15;21;25;44;46;47;96;102;159;193;194;195;196;2.2;227:235;1423:1423.4;157.1;24.1;24.2;237;34.31:34.4;241;242;245;250;279:281"
"RTN","ONCOPA1",26,0)
 S DA=ONCOIEN,DIQ="ONCAB" D EN^DIQ1
"RTN","ONCOPA1",27,0)
 K DIQ S DIC="^ONCO(165.5,",DIQ(0)="C"
"RTN","ONCOPA1",28,0)
 S DR="72",DA=ONCOIEN,DR(165.572)=".01;.02;.03;.031;.032",DIQ="ONCAB"
"RTN","ONCOPA1",29,0)
 F SR=0:0 S SR=$O(^ONCO(165.5,IEN,23,SR)) Q:SR'>0  D
"RTN","ONCOPA1",30,0)
 .S DA(165.572)=SR D EN^DIQ1 Q
"RTN","ONCOPA1",31,0)
 K DIQ S DIC="^ONCO(165.5,",DIQ(0)="C"
"RTN","ONCOPA1",32,0)
 S DR="60",DA=ONCOIEN,DR(165.51)=".01:2;33:37",DIQ="ONCAB"
"RTN","ONCOPA1",33,0)
 F SCT=0:0 S SCT=$O(^ONCO(165.5,IEN,4,SCT)) Q:SCT'>0  D
"RTN","ONCOPA1",34,0)
 .S DA(165.51)=SCT D EN^DIQ1 Q
"RTN","ONCOPA1",35,0)
 K DIQ S DIC="^ONCO(160,",DIQ(0)="C"
"RTN","ONCOPA1",36,0)
 S DR="44",DA=PTIEN,DR(160.044)=".01:1",DIQ="ONCAB"
"RTN","ONCOPA1",37,0)
 F CHST=0:0 S CHST=$O(^ONCO(160,PTIEN,9,CHST)) Q:CHST'>0  D
"RTN","ONCOPA1",38,0)
 .S DA(160.044)=CHST D EN^DIQ1 Q
"RTN","ONCOPA1",39,0)
 I $G(ESPD)=1 D
"RTN","ONCOPA1",40,0)
 .S ONCAB(165.5,IEN,.02)="XXXXX,XXXXX"
"RTN","ONCOPA1",41,0)
 .S ONCAB(160,PTIEN,2)="XXX-XX-XXXX"
"RTN","ONCOPA1",42,0)
 .S ONCAB(160,PTIEN,.119)="XXXXXXXXXX"
"RTN","ONCOPA1",43,0)
 .S $P(ONCAB(160,PTIEN,.116),",",1)="XXXXX"
"RTN","ONCOPA1",44,0)
 .S ONCAB(160,PTIEN,.131)="XXX-XXX-XXXX"
"RTN","ONCOPA1",45,0)
 .S ONCAB(165.5,IEN,8)="XXXXXXXXXX"
"RTN","ONCOPA1",46,0)
 .S ONCAB(165.5,IEN,8.2)="XXXXXXXXXX"
"RTN","ONCOPA1",47,0)
 .S ONCAB(165.5,IEN,8.1)="XXXXX"
"RTN","ONCOPA1",48,0)
 S PATNAME=$G(ONCAB(165.5,IEN,.02)),SSAN=$G(ONCAB(160,PTIEN,2))
"RTN","ONCOPA1",49,0)
 S NAME="CANCER REGISTRY ABSTRACT" D FORMAT
"RTN","ONCOPA1",50,0)
 S CRA=TITLE W !!,TITLE
"RTN","ONCOPA1",51,0)
 W !!?21,$E(ONCAB(165.5,IEN,.03),1,26)
"RTN","ONCOPA1",52,0)
 W "    ACOS #:  ",ONCAB(165.5,IEN,67)
"RTN","ONCOPA1",53,0)
 W ?76,"Print Date:  ",PRTDATE D P Q:EX=U
"RTN","ONCOPA1",54,0)
 W !,"      Patient Name:  ",ONCAB(165.5,IEN,.02),?76,"SSN:  ",ONCAB(160,PTIEN,2) D P Q:EX=U
"RTN","ONCOPA1",55,0)
 S DOB="",VRBLPTR=$P($G(^ONCO(160,PTIEN,0)),U,1) I VRBLPTR'="" D
"RTN","ONCOPA1",56,0)
 .S FILE=U_$P(VRBLPTR,";",2)_$P(VRBLPTR,";",1)_",0)"
"RTN","ONCOPA1",57,0)
 .S Y=$S($D(@FILE):$P(@FILE,U,3),1:"") I Y'="" D DD^%DT S DOB=Y Q
"RTN","ONCOPA1",58,0)
 W !,"      Home Address:  ",ONCAB(160,PTIEN,.119) D P Q:EX=U
"RTN","ONCOPA1",59,0)
 W !,"                     ",ONCAB(160,PTIEN,.118) D P Q:EX=U
"RTN","ONCOPA1",60,0)
 W !,"            County:  ",ONCAB(160,PTIEN,.12) D P Q:EX=U
"RTN","ONCOPA1",61,0)
 W !,"               Sex:  ",$E(ONCAB(160,PTIEN,10),1,14),?44,"Race:  ",$E(ONCAB(160,PTIEN,8),1,21),?76,"Ethnicity:  ",ONCAB(160,PTIEN,9) D P Q:EX=U
"RTN","ONCOPA1",62,0)
 W !,"     Date of Birth:  ",DOB
"RTN","ONCOPA1",63,0)
 W ?38," Age at DX:  ",ONCAB(165.5,IEN,4) D P Q:EX=U
"RTN","ONCOPA1",64,0)
 ;
"RTN","ONCOPA1",65,0)
CI ;Cancer Identification
"RTN","ONCOPA1",66,0)
 S NAME="CANCER IDENTIFICATION" D FORMAT
"RTN","ONCOPA1",67,0)
 W !!,TITLE
"RTN","ONCOPA1",68,0)
 S NODE2=$G(^ONCO(165.5,IEN,2))
"RTN","ONCOPA1",69,0)
 S COC=$E($$GET1^DIQ(165.5,IEN,.04),1,2)
"RTN","ONCOPA1",70,0)
 W !!,"       Accession Number: ",ONCAB(165.5,IEN,.05),?38,"Accession Year:  ",ONCAB(165.5,IEN,.07),?76,"Sequence Number:  ",ONCAB(165.5,IEN,.06) D P Q:EX=U
"RTN","ONCOPA1",71,0)
 W !,"                    Date Dx: ",ONCAB(165.5,IEN,3) D P Q:EX=U
"RTN","ONCOPA1",72,0)
 I DATEDX>3061231 D
"RTN","ONCOPA1",73,0)
 .W !,"   Ambiguous Terminology Dx: ",ONCAB(165.5,IEN,159,"E") D P Q:EX=U
"RTN","ONCOPA1",74,0)
 .W !,"      Date of Conclusive Dx: ",ONCAB(165.5,IEN,193,"E") D P Q:EX=U
"RTN","ONCOPA1",75,0)
 W !,"                Dx Facility: ",ONCAB(165.5,IEN,5) D P Q:EX=U
"RTN","ONCOPA1",76,0)
 W !,"      Date of First Contact: ",ONCAB(165.5,IEN,155) D P Q:EX=U
"RTN","ONCOPA1",77,0)
 I DATEDX>3091231 D
"RTN","ONCOPA1",78,0)
 .W !,"           Inpatient Status: ",ONCAB(165.5,IEN,233,"E") D P Q:EX=U
"RTN","ONCOPA1",79,0)
 W !,"              Class of Case: ",ONCAB(165.5,IEN,.04) D P Q:EX=U
"RTN","ONCOPA1",80,0)
 W !,"     Date of First Symptoms: ",ONCAB(165.5,IEN,171) D P Q:EX=U
"RTN","ONCOPA1",81,0)
 W !,"  Date Start Workup Ordered: ",ONCAB(165.5,IEN,172) D P Q:EX=U
"RTN","ONCOPA1",82,0)
 W !,"        Date Workup Started: ",ONCAB(165.5,IEN,173) D P Q:EX=U
"RTN","ONCOPA1",83,0)
 W !,"   Type of Reporting Source: ",ONCAB(165.5,IEN,1.2) D P Q:EX=U
"RTN","ONCOPA1",84,0)
 W !,"                    Site/Gp: ",ONCAB(165.5,IEN,.01) D P Q:EX=U
"RTN","ONCOPA1",85,0)
 W !,"          Primary Site Code: ",ONCAB(165.5,IEN,20.1),"  "
"RTN","ONCOPA1",86,0)
 S TOP=$P(NODE2,U,1) I TOP'="" W $P(^ONCO(164,TOP,0),U,1) D P Q:EX=U
"RTN","ONCOPA1",87,0)
 W !,"    Text-Primary Site Title: ",ONCAB(165.5,IEN,100) D P Q:EX=U
"RTN","ONCOPA1",88,0)
 I DATEDX>3061231 D
"RTN","ONCOPA1",89,0)
 .W !,"   Mult Tum Rpt as One Prim: ",ONCAB(165.5,IEN,194,"E") D P Q:EX=U
"RTN","ONCOPA1",90,0)
 .W !,"    Date of Multiple Tumors: ",ONCAB(165.5,IEN,195,"E") D P Q:EX=U
"RTN","ONCOPA1",91,0)
 .W !,"       Multiplicity Counter: ",ONCAB(165.5,IEN,196,"E") D P Q:EX=U
"RTN","ONCOPA1",92,0)
 W !,"                 Laterality: ",ONCAB(165.5,IEN,28) D P Q:EX=U
"RTN","ONCOPA1",93,0)
 S HIST=$$HIST^ONCFUNC(IEN,.HSTFLD)
"RTN","ONCOPA1",94,0)
 W !,"                  Histology: ",ONCAB(165.5,IEN,HSTFLD) D P Q:EX=U
"RTN","ONCOPA1",95,0)
 W !,"       Text-Histology Title: ",ONCAB(165.5,IEN,101) D P Q:EX=U
"RTN","ONCOPA1",96,0)
 W:TOP=67619 !,"       Gleason Score (Clin): ",ONCAB(165.5,IEN,623)
"RTN","ONCOPA1",97,0)
 W:TOP=67619 !,"       Gleason Score (Path): ",ONCAB(165.5,IEN,250,"E")
"RTN","ONCOPA1",98,0)
 W:TOP=67619 !,"                        PSA: ",ONCAB(165.5,IEN,684)
"RTN","ONCOPA1",99,0)
 W:TOP=67619 !,"                   PSA Date: ",ONCAB(165.5,IEN,96,"E")
"RTN","ONCOPA1",100,0)
 W:TOP=67619 !,"                    DRE +/-: ",ONCAB(165.5,IEN,102,"E")
"RTN","ONCOPA1",101,0)
 W:TOP=67619 !,"                   DRE Date: ",ONCAB(165.5,IEN,156)
"RTN","ONCOPA1",102,0)
 W !,"      Grade/Differentiation: ",ONCAB(165.5,IEN,24),"  "
"RTN","ONCOPA1",103,0)
 S GR=$P(NODE2,U,5) I GR'="" W $P(^ONCO(164.43,GR,0),U,2) D P Q:EX=U
"RTN","ONCOPA1",104,0)
 I DATEDX>3091231 D
"RTN","ONCOPA1",105,0)
 .W !,"          Grade Path System: ",ONCAB(165.5,IEN,24.1,"E") D P Q:EX=U
"RTN","ONCOPA1",106,0)
 .W !,"           Grade Path Value: ",ONCAB(165.5,IEN,24.2,"E") D P Q:EX=U
"RTN","ONCOPA1",107,0)
 W !,"         AFIP/JPC Submission: ",ONCAB(165.5,IEN,83) D P Q:EX=U
"RTN","ONCOPA1",108,0)
 W !,"    Diagnostic Confirmation: ",ONCAB(165.5,IEN,26) D P Q:EX=U
"RTN","ONCOPA1",109,0)
 W:TOP=67220 !,"                Hepatitis C: ",ONCAB(165.5,IEN,1010)
"RTN","ONCOPA1",110,0)
 S TM1=$$PRINT^ONCOTM(IEN,1)
"RTN","ONCOPA1",111,0)
 I TM1["UMOR" S $E(TM1,2,5)="umor" I TM1["ARKER" S $E(TM1,8,12)="arker"
"RTN","ONCOPA1",112,0)
 S TM2=$$PRINT^ONCOTM(IEN,2)
"RTN","ONCOPA1",113,0)
 I TM2["UMOR" S $E(TM2,2,5)="umor" I TM2["ARKER" S $E(TM2,8,12)="arker"
"RTN","ONCOPA1",114,0)
 S TM3=$$PRINT^ONCOTM(IEN,3)
"RTN","ONCOPA1",115,0)
 I TM3["UMOR" S $E(TM3,2,5)="umor" I TM3["ARKER" S $E(TM3,8,12)="arker"
"RTN","ONCOPA1",116,0)
 S LEN=$L(TM1) W !?(27-LEN),TM1,": ",ONCAB(165.5,IEN,25.1) D P Q:EX=U
"RTN","ONCOPA1",117,0)
 S LEN=$L(TM2) W !?(27-LEN),TM2,": ",ONCAB(165.5,IEN,25.2) D P Q:EX=U
"RTN","ONCOPA1",118,0)
 S LEN=$L(TM3) W !?(27-LEN),TM3,": ",ONCAB(165.5,IEN,25.3) D P Q:EX=U
"RTN","ONCOPA1",119,0)
 W !,"     Facility Referred From: ",ONCAB(165.5,IEN,6) D P Q:EX=U
"RTN","ONCOPA1",120,0)
 W !,"       Facility Referred To: ",ONCAB(165.5,IEN,7) D P Q:EX=U
"RTN","ONCOPA1",121,0)
 W !,"                  Fee Basis: ",ONCAB(165.5,IEN,237,"E") D P Q:EX=U
"RTN","ONCOPA1",122,0)
 W !,"Presentation at Cancer Conf: ",ONCAB(165.5,IEN,120) D P Q:EX=U
"RTN","ONCOPA1",123,0)
 W !,"  Date of Cancer Conference: ",ONCAB(165.5,IEN,121) D P Q:EX=U
"RTN","ONCOPA1",124,0)
 W !,"         Casefinding Source: ",ONCAB(165.5,IEN,21,"E")
"RTN","ONCOPA1",125,0)
 ;
"RTN","ONCOPA1",126,0)
 I $E(IOST,1,2)="C-" W ! K DIR S DIR(0)="E",DIR("A")="Enter RETURN to continue with this abstract" D ^DIR Q:'Y  D HDR G PA1A
"RTN","ONCOPA1",127,0)
 D P Q:EX=U
"RTN","ONCOPA1",128,0)
PA1A D ^ONCOPA1A
"RTN","ONCOPA1",129,0)
 ;
"RTN","ONCOPA1",130,0)
EXIT ;KILL variables
"RTN","ONCOPA1",131,0)
 K CHST,CMIEN,CNTR,COC,CRA,D0,DA,DATEDX,DIC,DIQ,DIR,DOB,DR,DTE,DXDT,EX
"RTN","ONCOPA1",132,0)
 K FHDT,FHIEN,FHZN,FILE,FLG,FM,FOLH,FR,GR,HIST,HSTFLD,IC,ICDCD,IEN,LEN
"RTN","ONCOPA1",133,0)
 K LENGTH,LINE,NAME,NF,NODE2,NOK,NUM,ONCAB,ONCOIEN,ONCOLST,OTHPRI,PATH
"RTN","ONCOPA1",134,0)
 K PATNAME,PG,POP,PRI,PRTDATE,PRTPCE,PRZN,PTIEN,QS,RCDT,REG,REG1,RK,RK1
"RTN","ONCOPA1",135,0)
 K SCT,SITE,SR,SSAN,ST,STARS,TITLE,TM1,TM2,TM3,TOP,TPX,TSIEN,TSTAT,UF
"RTN","ONCOPA1",136,0)
 K VRBLPTR,VS,Y,ZN
"RTN","ONCOPA1",137,0)
 Q
"RTN","ONCOPA1",138,0)
 ;
"RTN","ONCOPA1",139,0)
P ;Enter RETURN to continue
"RTN","ONCOPA1",140,0)
 I $Y>(IOSL-10) D  Q:EX=U  W !
"RTN","ONCOPA1",141,0)
 .I $E(IOST,1,2)="C-" W ! K DIR S DIR(0)="E",DIR("A")="Enter RETURN to continue with this abstract" D ^DIR I 'Y S EX=U Q
"RTN","ONCOPA1",142,0)
 .D HDR Q
"RTN","ONCOPA1",143,0)
 Q
"RTN","ONCOPA1",144,0)
 ;
"RTN","ONCOPA1",145,0)
FORMAT ;
"RTN","ONCOPA1",146,0)
 S LENGTH=$L(NAME),NUM=(((132-LENGTH)/2)\1)-10
"RTN","ONCOPA1",147,0)
 S TITLE="     "_$E(STARS,1,NUM)_"     "_NAME_"     "_$E(STARS,1,NUM)
"RTN","ONCOPA1",148,0)
 Q
"RTN","ONCOPA1",149,0)
 ;
"RTN","ONCOPA1",150,0)
TASK ;Report Queued
"RTN","ONCOPA1",151,0)
 K ZTUCI,ZTDTH,ZTIO,ZTSAVE
"RTN","ONCOPA1",152,0)
 S ZTRTN="PRINT^ONCOPA1",ZTREQ="@",ZTSAVE("ZTREQ")=""
"RTN","ONCOPA1",153,0)
 S ZTDESC="Print Complete Abstract"
"RTN","ONCOPA1",154,0)
 F RK=1:1 S RK1=$P(ONCOLST,U,RK) Q:RK1=""  S ZTSAVE(RK1)=""
"RTN","ONCOPA1",155,0)
 D ^%ZTLOAD D ^%ZISC U IO W !,"Report Queued",!
"RTN","ONCOPA1",156,0)
 K ZTDESC,ZTREQ,ZTRTN,ZTSAVE,ZTSK
"RTN","ONCOPA1",157,0)
 Q
"RTN","ONCOPA1",158,0)
 ;
"RTN","ONCOPA1",159,0)
HDR ;Header
"RTN","ONCOPA1",160,0)
 W @IOF S PG=PG+1
"RTN","ONCOPA1",161,0)
 W CRA,!
"RTN","ONCOPA1",162,0)
 W ?5," Patient Name:  ",PATNAME,?84,"SSN:  ",SSAN,!
"RTN","ONCOPA1",163,0)
 Q
"RTN","ONCOPA1",164,0)
 ;
"RTN","ONCOPA1",165,0)
MULT ;Entry point for option ABS...MA...3).
"RTN","ONCOPA1",166,0)
 ;Also called from PCEPRT2^ONCOGEN.
"RTN","ONCOPA1",167,0)
 I $D(IO("Q")) S ONCOLST="ONCOIEN^PTIEN^STARS^LENGTH^TITLE^PRTPCE^ONCODA^ESPD" D TASK G EXIT
"RTN","ONCOPA1",168,0)
 U IO D PRINT K %ZIS,IOP G EXIT
"RTN","ONCOPA1",169,0)
 Q
"RTN","ONCOPA1",170,0)
 ;
"RTN","ONCOPA1",171,0)
CLEANUP ;Cleanup
"RTN","ONCOPA1",172,0)
 K ESPD
"RTN","ONCOPA2")
0^27^B46065983
"RTN","ONCOPA2",1,0)
ONCOPA2 ;Hines OIFO/GWB [PA Print Complete Abstract (132c)] continued ;10/05/11
"RTN","ONCOPA2",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCOPA2",3,0)
 ;
"RTN","ONCOPA2",4,0)
 N TX
"RTN","ONCOPA2",5,0)
 S NAME="FIRST COURSE OF TREATMENT" D FORMAT^ONCOPA1
"RTN","ONCOPA2",6,0)
 W !!,TITLE
"RTN","ONCOPA2",7,0)
 W ! D P Q:EX=U
"RTN","ONCOPA2",8,0)
 W !,"   Surgical Dx/Staging Proc:       ",ONCAB(165.5,IEN,58.1) D P Q:EX=U
"RTN","ONCOPA2",9,0)
 W !,"   Surgical Dx/Staging Proc Date:  ",ONCAB(165.5,IEN,58.3) D P Q:EX=U
"RTN","ONCOPA2",10,0)
 W !,"   Surg Dx/Staging Proc @Fac:      ",ONCAB(165.5,IEN,58.4) D P Q:EX=U
"RTN","ONCOPA2",11,0)
 W !,"   Surg Dx/Staging Proc @Fac Date: ",ONCAB(165.5,IEN,58.5) D P Q:EX=U
"RTN","ONCOPA2",12,0)
 W ! D P Q:EX=U
"RTN","ONCOPA2",13,0)
 W:DATEDX>3091231 !,"   Treatment Status:               ",ONCAB(165.5,IEN,235,"E") D P Q:EX=U
"RTN","ONCOPA2",14,0)
 W !,"   Date of no treatment:           ",ONCAB(165.5,IEN,124) D P Q:EX=U
"RTN","ONCOPA2",15,0)
 W ! D P Q:EX=U
"RTN","ONCOPA2",16,0)
 W !,"   Date First Surgical Procedure:  ",ONCAB(165.5,IEN,170) D P Q:EX=U
"RTN","ONCOPA2",17,0)
 W !,"   Surgery of Primary (F):         ",ONCAB(165.5,IEN,58.6) D P Q:EX=U
"RTN","ONCOPA2",18,0)
 W !,"   Most Definitive Surg Date:      ",ONCAB(165.5,IEN,50) D P Q:EX=U
"RTN","ONCOPA2",19,0)
 W !,"   Surgery of Primary @Fac (F):    ",ONCAB(165.5,IEN,58.7) D P Q:EX=U
"RTN","ONCOPA2",20,0)
 W !,"   Most Definitive Surg @Fac Date: ",ONCAB(165.5,IEN,50.3) D P Q:EX=U
"RTN","ONCOPA2",21,0)
 W:DATEDX>3091231 !,"   Approach:                       ",ONCAB(165.5,IEN,234,"E") D P Q:EX=U
"RTN","ONCOPA2",22,0)
 W !,"   Surgical Margins:               ",ONCAB(165.5,IEN,59) D P Q:EX=U
"RTN","ONCOPA2",23,0)
 W !,"   Scope of LN Surgery (F):        ",ONCAB(165.5,IEN,138.4) D P Q:EX=U
"RTN","ONCOPA2",24,0)
 W !,"   Scope of LN Surgery Date:       ",ONCAB(165.5,IEN,138.2) D P Q:EX=U
"RTN","ONCOPA2",25,0)
 W !,"   Scope of LN Surgery @Fac (F):   ",ONCAB(165.5,IEN,138.5) D P Q:EX=U
"RTN","ONCOPA2",26,0)
 W !,"   Scope of LN Surgery @Fac Date:  ",ONCAB(165.5,IEN,138.3) D P Q:EX=U
"RTN","ONCOPA2",27,0)
 W !,"   Surg Proc/Other Site (F):       ",ONCAB(165.5,IEN,139.4) D P Q:EX=U
"RTN","ONCOPA2",28,0)
 W !,"   Surg Proc/Other Site Date:      ",ONCAB(165.5,IEN,139.2) D P Q:EX=U
"RTN","ONCOPA2",29,0)
 W !,"   Surg Proc/Other Site @Fac (F):  ",ONCAB(165.5,IEN,139.5) D P Q:EX=U
"RTN","ONCOPA2",30,0)
 W !,"   Surg Proc/Other Site @Fac Date: ",ONCAB(165.5,IEN,139.3) D P Q:EX=U
"RTN","ONCOPA2",31,0)
 W:DATEDX<3030000 !,"   Reconstruction/Restoration:     ",ONCAB(165.5,IEN,23) D P Q:EX=U
"RTN","ONCOPA2",32,0)
 W !,"   Date of Surgical Discharge:     ",ONCAB(165.5,IEN,435) D P Q:EX=U
"RTN","ONCOPA2",33,0)
 W !,"   Readmission w/i 30 Days/Surg:   ",ONCAB(165.5,IEN,14) D P Q:EX=U
"RTN","ONCOPA2",34,0)
 W ! D P Q:EX=U
"RTN","ONCOPA2",35,0)
 W !,"   Reason No Surgery of Primary:   ",ONCAB(165.5,IEN,58) D P Q:EX=U
"RTN","ONCOPA2",36,0)
 W !!,"   RX Text-Surgery: " F TX=0:0 S TX=$O(^ONCO(165.5,IEN,14,TX)) Q:TX'>0  W !?6,^ONCO(165.5,IEN,14,TX,0) D P Q:EX=U
"RTN","ONCOPA2",37,0)
 W !,"   CAP Protocol Review:            ",ONCAB(165.5,IEN,46,"E") D P Q:EX=U
"RTN","ONCOPA2",38,0)
 W:ONCAB(165.5,IEN,46,"I")=0 !,"   CAP Text:                       ",ONCAB(165.5,IEN,47,"E") D P Q:EX=U
"RTN","ONCOPA2",39,0)
 W !,"   Tx Guidelines Discussion:       ",ONCAB(165.5,IEN,281,"E") D P Q:EX=U
"RTN","ONCOPA2",40,0)
 W !,"   Treatment Guideline #1:         ",ONCAB(165.5,IEN,228,"E") D P Q:EX=U
"RTN","ONCOPA2",41,0)
 W !,"   Treatment Guideline #2:         ",ONCAB(165.5,IEN,229,"E") D P Q:EX=U
"RTN","ONCOPA2",42,0)
 W !,"   Treatment Guideline #3:         ",ONCAB(165.5,IEN,230,"E") D P Q:EX=U
"RTN","ONCOPA2",43,0)
 W !,"   Treatment Guideline Location:   ",ONCAB(165.5,IEN,231,"E") D P Q:EX=U
"RTN","ONCOPA2",44,0)
 W !,"   Treatment Guideline Doc Date:   ",ONCAB(165.5,IEN,232,"E") D P Q:EX=U
"RTN","ONCOPA2",45,0)
 W !,"   Neoadjuvant therapy:            ",ONCAB(165.5,IEN,245,"E") D P Q:EX=U
"RTN","ONCOPA2",46,0)
 W ! D P Q:EX=U
"RTN","ONCOPA2",47,0)
 W !,"   Radiation:                      ",ONCAB(165.5,IEN,51.2) D P Q:EX=U
"RTN","ONCOPA2",48,0)
 W !,"   Date Radiation Started:         ",ONCAB(165.5,IEN,51) D P Q:EX=U
"RTN","ONCOPA2",49,0)
 W !,"   Location of Radiation Tx:       ",ONCAB(165.5,IEN,126) D P Q:EX=U
"RTN","ONCOPA2",50,0)
 W !,"   Radiation Treatment Volume:     ",ONCAB(165.5,IEN,125) D P Q:EX=U
"RTN","ONCOPA2",51,0)
 W !,"   Regional Treatment Modality:    ",ONCAB(165.5,IEN,363) D P Q:EX=U
"RTN","ONCOPA2",52,0)
 W !,"   Regional Dose: cGy:             ",ONCAB(165.5,IEN,442) D P Q:EX=U
"RTN","ONCOPA2",53,0)
 W !,"   Boost Treatment Modality:       ",ONCAB(165.5,IEN,363.1) D P Q:EX=U
"RTN","ONCOPA2",54,0)
 W !,"   Boost Dose: cGy:                ",ONCAB(165.5,IEN,443) D P Q:EX=U
"RTN","ONCOPA2",55,0)
 W !,"   Number of Txs to this Volume:   ",ONCAB(165.5,IEN,56) D P Q:EX=U
"RTN","ONCOPA2",56,0)
 W !,"   Date Radiation Ended:           ",ONCAB(165.5,IEN,361) D P Q:EX=U
"RTN","ONCOPA2",57,0)
 W !,"   Radiation @Fac:                 ",ONCAB(165.5,IEN,51.4) D P Q:EX=U
"RTN","ONCOPA2",58,0)
 W !,"   Radiation @Fac Date:            ",ONCAB(165.5,IEN,51.5) D P Q:EX=U
"RTN","ONCOPA2",59,0)
 W !,"   Radiation/Surgery Sequence:     ",ONCAB(165.5,IEN,51.3) D P Q:EX=U
"RTN","ONCOPA2",60,0)
 W !,"   Reason for No Radiation:        ",ONCAB(165.5,IEN,75) D P Q:EX=U
"RTN","ONCOPA2",61,0)
 W !!,"   RX Text-Radiation (Beam):  " F TX=0:0 S TX=$O(^ONCO(165.5,IEN,15,TX)) Q:TX'>0  W !?6,^ONCO(165.5,IEN,15,TX,0) D P Q:EX=U
"RTN","ONCOPA2",62,0)
 W !,"   RX Text-Radiation Other:  " F TX=0:0 S TX=$O(^ONCO(165.5,IEN,16,TX)) Q:TX'>0  W !?6,^ONCO(165.5,IEN,16,TX,0) D P Q:EX=U
"RTN","ONCOPA2",63,0)
CHEM W !!,"   Chemotherapy:  ",ONCAB(165.5,IEN,53.2) D P Q:EX=U
"RTN","ONCOPA2",64,0)
 W !,"   Chemotherapy Date:  ",ONCAB(165.5,IEN,53) D P Q:EX=U
"RTN","ONCOPA2",65,0)
 W !,"   Chemotherapy @Fac:  ",ONCAB(165.5,IEN,53.3) D P Q:EX=U
"RTN","ONCOPA2",66,0)
 W !,"   Chemotherapy @Fac Date:  ",ONCAB(165.5,IEN,53.4) D P Q:EX=U
"RTN","ONCOPA2",67,0)
 W !,"   Chemotherapeutic Agent #1:  ",ONCAB(165.5,IEN,1423,"E") D P Q:EX=U
"RTN","ONCOPA2",68,0)
 W !,"   Chemotherapeutic Agent #2:  ",ONCAB(165.5,IEN,1423.1,"E") D P Q:EX=U
"RTN","ONCOPA2",69,0)
 W !,"   Chemotherapeutic Agent #3:  ",ONCAB(165.5,IEN,1423.2,"E") D P Q:EX=U
"RTN","ONCOPA2",70,0)
 W !,"   Chemotherapeutic Agent #4:  ",ONCAB(165.5,IEN,1423.3,"E") D P Q:EX=U
"RTN","ONCOPA2",71,0)
 W !,"   Chemotherapeutic Agent #5:  ",ONCAB(165.5,IEN,1423.4,"E") D P Q:EX=U
"RTN","ONCOPA2",72,0)
 W !,"   RX Text-Chemo:  " F TX=0:0 S TX=$O(^ONCO(165.5,IEN,17,TX)) Q:TX'>0  W !?6,^ONCO(165.5,IEN,17,TX,0) D P Q:EX=U
"RTN","ONCOPA2",73,0)
HT W !!,"   Hormone Therapy:  ",ONCAB(165.5,IEN,54.2) D P Q:EX=U
"RTN","ONCOPA2",74,0)
 W !,"   Hormone Therapy Date:  ",ONCAB(165.5,IEN,54) D P Q:EX=U
"RTN","ONCOPA2",75,0)
 W !,"   Hormone Therapy @Fac:  ",ONCAB(165.5,IEN,54.3) D P Q:EX=U
"RTN","ONCOPA2",76,0)
 W !,"   Hormone Therapy @Fac Date:  ",ONCAB(165.5,IEN,54.4) D P Q:EX=U
"RTN","ONCOPA2",77,0)
 W !,"   RX Text-Hormone:  " F TX=0:0 S TX=$O(^ONCO(165.5,IEN,18,TX)) Q:TX'>0  W !?6,^ONCO(165.5,IEN,18,TX,0) D P Q:EX=U
"RTN","ONCOPA2",78,0)
IMM W !!,"   Immunotherapy:  ",ONCAB(165.5,IEN,55.2) D P Q:EX=U
"RTN","ONCOPA2",79,0)
 I $P($G(^ONCO(165.5,IEN,3)),U,19)=0 G OTH
"RTN","ONCOPA2",80,0)
 W !,"   Immunotherapy Date:  ",ONCAB(165.5,IEN,55) D P Q:EX=U
"RTN","ONCOPA2",81,0)
 W !,"   Immunotherapy @Fac:  ",ONCAB(165.5,IEN,55.3) D P Q:EX=U
"RTN","ONCOPA2",82,0)
 W !,"   Immunotherapy @Fac Date:  ",ONCAB(165.5,IEN,55.4) D P Q:EX=U
"RTN","ONCOPA2",83,0)
 W !,"   RX Text-BRM:  " F TX=0:0 S TX=$O(^ONCO(165.5,IEN,20,TX)) Q:TX'>0  W !?6,^ONCO(165.5,IEN,20,TX,0) D P Q:EX=U
"RTN","ONCOPA2",84,0)
 W !,"   Hema Trans/Endocrine Proc:  ",ONCAB(165.5,IEN,153) D P Q:EX=U
"RTN","ONCOPA2",85,0)
 W !,"   Hema Trans/Endocrine Proc Date:  ",ONCAB(165.5,IEN,153.1) D P Q:EX=U
"RTN","ONCOPA2",86,0)
 W !,"   Hema Trans/Endocrine Proc @Fac:  ",ONCAB(165.5,IEN,153.2) D P Q:EX=U
"RTN","ONCOPA2",87,0)
 W !,"   Hema Trans/Endocrine Proc @Fac Date:  ",ONCAB(165.5,IEN,153.3) D P Q:EX=U
"RTN","ONCOPA2",88,0)
 W ! D P Q:EX=U
"RTN","ONCOPA2",89,0)
 W !,"   Systemic/Surgery Sequence:  ",ONCAB(165.5,IEN,15) D P Q:EX=U
"RTN","ONCOPA2",90,0)
OTH W !!,"   Other Treatment:  ",ONCAB(165.5,IEN,57.2) D P Q:EX=U
"RTN","ONCOPA2",91,0)
 I $P($G(^ONCO(165.5,IEN,3)),U,25)=0 G PES
"RTN","ONCOPA2",92,0)
 W !,"   Other Treatment Date:  ",ONCAB(165.5,IEN,57) D P Q:EX=U
"RTN","ONCOPA2",93,0)
 W !,"   Other Treatment @Fac:  ",ONCAB(165.5,IEN,57.3) D P Q:EX=U
"RTN","ONCOPA2",94,0)
 W !,"   Other Treatment @Fac Date:  ",ONCAB(165.5,IEN,57.4) D P Q:EX=U
"RTN","ONCOPA2",95,0)
 W !,"   RX Text-Other:  " F TX=0:0 S TX=$O(^ONCO(165.5,IEN,21,TX)) Q:TX'>0  W !?6,^ONCO(165.5,IEN,21,TX,0) D P Q:EX=U
"RTN","ONCOPA2",96,0)
PES W !,"   Palliative Care:  ",ONCAB(165.5,IEN,12) D P Q:EX=U
"RTN","ONCOPA2",97,0)
 W !,"   Palliative Care @Fac:  ",ONCAB(165.5,IEN,13) D P Q:EX=U
"RTN","ONCOPA2",98,0)
 W !,"   Clinical Trials Discussion:  ",ONCAB(165.5,IEN,279,"E") D P Q:EX=U
"RTN","ONCOPA2",99,0)
 W !,"   Protocol Eligibility Status:  ",ONCAB(165.5,IEN,346) D P Q:EX=U
"RTN","ONCOPA2",100,0)
 W !,"   Protocol Participation:  ",ONCAB(165.5,IEN,560) D P Q:EX=U
"RTN","ONCOPA2",101,0)
 W !,"   Year Put on Protocol:  ",ONCAB(165.5,IEN,133) D P Q:EX=U
"RTN","ONCOPA2",102,0)
 ;
"RTN","ONCOPA2",103,0)
 I $E(IOST,1,2)="C-" W ! K DIR S DIR(0)="E",DIR("A")="Enter RETURN to continue with this abstract" D ^DIR Q:'Y  D HDR G PA2A
"RTN","ONCOPA2",104,0)
 D P Q:EX=U
"RTN","ONCOPA2",105,0)
PA2A D ^ONCOPA2A
"RTN","ONCOPA2",106,0)
 ; WILL CALL ONCOPA2A ROUTINE TO CONTINUE...
"RTN","ONCOPA2",107,0)
 Q
"RTN","ONCOPA2",108,0)
P ;
"RTN","ONCOPA2",109,0)
 I ($Y'<(LINE-1)) D  Q:EX=U  W !
"RTN","ONCOPA2",110,0)
 .I $E(IOST,1,2)="C-" W ! K DIR S DIR(0)="E",DIR("A")="Enter RETURN to continue with this abstract" D ^DIR I 'Y S EX=U Q
"RTN","ONCOPA2",111,0)
 .D HDR Q
"RTN","ONCOPA2",112,0)
 Q
"RTN","ONCOPA2",113,0)
HDR ; Header
"RTN","ONCOPA2",114,0)
 W @IOF S PG=PG+1
"RTN","ONCOPA2",115,0)
 W CRA,!
"RTN","ONCOPA2",116,0)
 W ?5," Patient Name:  ",PATNAME,?84,"SSN:  ",SSAN,!
"RTN","ONCOPA2",117,0)
 Q
"RTN","ONCOPA2",118,0)
 ;
"RTN","ONCOPA2",119,0)
CLEANUP ;Cleanup
"RTN","ONCOPA2",120,0)
 K CRA,DATEDX,EX,IEN,LINE,NAME,ONCAB,PATNAME,PG,SSAN,TITLE,Y
"RTN","ONCOTN")
0^16^B122391694
"RTN","ONCOTN",1,0)
ONCOTN ;Hines OIFO/GWB - TNM Staging ;02/28/11
"RTN","ONCOTN",2,0)
 ;;2.2;ONCOLOGY;**1,4,5**;Jul 31, 2013;Build 6
"RTN","ONCOTN",3,0)
 ;
"RTN","ONCOTN",4,0)
 N DATEDX,H,ONCED,S,YR
"RTN","ONCOTN",5,0)
 S DATEDX=$P(^ONCO(165.5,D0,0),U,16)
"RTN","ONCOTN",6,0)
 S YR=$E(DATEDX,1,3)
"RTN","ONCOTN",7,0)
 S ONCED=$S(YR<283:1,YR<288:2,YR<292:3,YR<298:4,YR<303:5,YR<310:6,1:7)
"RTN","ONCOTN",8,0)
 S S=$P(^ONCO(165.5,D0,0),U,1)
"RTN","ONCOTN",9,0)
 S T=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCOTN",10,0)
 I T="" W !!?5,"PRIMARY SITE not defined.",! S Y=20 Q
"RTN","ONCOTN",11,0)
 S H=$$HIST^ONCFUNC(D0)
"RTN","ONCOTN",12,0)
 S HT14=$E(H,1,4)
"RTN","ONCOTN",13,0)
 S SD=$P($G(^ONCO(165.5,D0,"CS3")),U,1)
"RTN","ONCOTN",14,0)
 I H="" W !!?5,"HISTOLOGY not defined.",! S Y=$S(DATEDX>3001231:22.3,1:22) Q
"RTN","ONCOTN",15,0)
 S Y="@69"
"RTN","ONCOTN",16,0)
 ;
"RTN","ONCOTN",17,0)
 ;Dermatofibrosarcomas of the skin 
"RTN","ONCOTN",18,0)
 I (HT14=8832)!(HT14=8833),($E(T,3,4)=44) D  S Y="@313" Q
"RTN","ONCOTN",19,0)
 .W !!?3,"AJCC does not define staging for dermatofibrosarcomas of the skin.",!
"RTN","ONCOTN",20,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",21,0)
 ;
"RTN","ONCOTN",22,0)
 ;Laryngeal cartilage C32.3 - 7th Edition
"RTN","ONCOTN",23,0)
 ;Removed from 7th Edition Larynx chapter 5
"RTN","ONCOTN",24,0)
 I ONCED>6,T=67323 D  Q
"RTN","ONCOTN",25,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",26,0)
 ;
"RTN","ONCOTN",27,0)
7 ;Major Salivary Glands - 7th Edition
"RTN","ONCOTN",28,0)
 I ONCED>6,($E(T,3,4)="07")!($E(T,3,4)="08"),(HT14<8000)!((HT14>8576)&(HT14<8940))!((HT14>8950)&(HT14<8980))!(HT14>8981) D  Q
"RTN","ONCOTN",29,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",30,0)
 ;
"RTN","ONCOTN",31,0)
8 ;Mycosis fungoides and Sezary Disease of Skin, Vulva, Penis, Scrotum
"RTN","ONCOTN",32,0)
 I (H=97003)!(H=97013),($E(T,3,4)=44)!($E(T,3,4)=51)!($E(T,3,4)=60)!(T=67632),ONCED>5 Q
"RTN","ONCOTN",33,0)
 ;
"RTN","ONCOTN",34,0)
 I (S=62)!($$LYMPHOMA^ONCFUNC(D0)) D  Q
"RTN","ONCOTN",35,0)
 .I ONCED>6,(T=67441)!(T=67690)!(T=67695)!(T=67696) Q
"RTN","ONCOTN",36,0)
 .W !!?3,"No TNM classification is available for Lymphoid Neoplasms.",!
"RTN","ONCOTN",37,0)
 .;D CTNM88,PTNM88 ;changed to call these from within the input template
"RTN","ONCOTN",38,0)
 .S Y="@376"
"RTN","ONCOTN",39,0)
 ;
"RTN","ONCOTN",40,0)
 I (T=67301)!(T=67339)!(T=67379)!($E(T,1,4)=6739)!(T=67630)!(T=67631)!(T=67637)!(T=67638)!(T=67639)!(T=67691)!(T=67750)!(T=67754)!(T=67755)!(T=67758)!(T=67759)!($E(T,1,4)=6776)!($E(T,1,4)=6726) D  S Y="@313" Q
"RTN","ONCOTN",41,0)
 .W !!?3,"AJCC does not define staging for this site.",!
"RTN","ONCOTN",42,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",43,0)
 ;
"RTN","ONCOTN",44,0)
 I $E(T,1,4)=6774,ONCED<7 D  S Y="@313" Q
"RTN","ONCOTN",45,0)
 .W !!?3,"AJCC does not define staging for this site.",!
"RTN","ONCOTN",46,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",47,0)
 ;
"RTN","ONCOTN",48,0)
 I (T=67248)!(T=67249),ONCED>6 D  S Y="@313" Q
"RTN","ONCOTN",49,0)
 .W !!?3,"AJCC does not define staging for this site.",!
"RTN","ONCOTN",50,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",51,0)
 ;
"RTN","ONCOTN",52,0)
 I T=67695,SD="020",ONCED>6 D  S Y="@313" Q
"RTN","ONCOTN",53,0)
 .W !!?3,"AJCC does not define staging for lacrimal sac.",!
"RTN","ONCOTN",54,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",55,0)
 ;
"RTN","ONCOTN",56,0)
 I (T=67254)!(T=67312)!(T=67313)!(T=67318)!(T=67319) D  S Y="@313" Q
"RTN","ONCOTN",57,0)
 .W !!?3,"AJCC does not define staging for this site.",!
"RTN","ONCOTN",58,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",59,0)
 ;
"RTN","ONCOTN",60,0)
 I ONCED=6,$$MELANOMA^ONCOU55(D0),($E(T,3,4)=44)!($E(T,3,4)=51)!($E(T,3,4)=60)!(T=67632),(H=87233)!(H=87283)!(H=87303)!(H=87403)!(H=87412)!(H=87413)!(H=87463)!(H=87703)!(H=87733)!(H=87743)!(H=87422) D  S Y="@313" Q
"RTN","ONCOTN",61,0)
 .W !!?1,"Histology ",$E(H,1,4)_"/"_$E(H,5)," is not appropriate for or relevant to the staging of melanoma.",!
"RTN","ONCOTN",62,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",63,0)
 ;
"RTN","ONCOTN",64,0)
 I (ONCED<7),((H<8020)!(H>8090)),(T=67140)!(T=67142)!(T=67148) D   S Y="@313" Q 
"RTN","ONCOTN",65,0)
 .W !!?3,"AJCC does not define staging for this site.",!
"RTN","ONCOTN",66,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",67,0)
 ;
"RTN","ONCOTN",68,0)
 I (T=67250)!($E(T,1,4)=6715)!($E(T,1,4)=6716)!($E(T,1,4)=6717)!($E(T,1,4)=6718),$E(H,1,4)=8936,ONCED=6 D   S Y="@313" Q 
"RTN","ONCOTN",69,0)
 .W !!," No TNM coding/staging available for GASTROINTESTINAL STROMA of ",$S($E(T,1,4)=6715:"ESOPHAGUS",$E(T,1,4)=6716:"STOMACH",$E(T,1,4)=6717:"SMALL INTESTINE",$E(T,1,4)=6718:"COLON",T=67250:"PANCREAS, HEAD",1:""),".",!
"RTN","ONCOTN",70,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",71,0)
 ;
"RTN","ONCOTN",72,0)
 ;Carcinoid Tumors
"RTN","ONCOTN",73,0)
 I ($E(T,3,4)=16)!($E(T,3,4)=17)!($E(T,3,4)=18)!(T=67199)!(T=67209)!($E(T,3,4)=21)!(T=67239)!($E(T,3,4)=24)!($E(T,3,4)=25),($E(H,1,4)=8249)!($E(H,1,4)=9091) D  Q
"RTN","ONCOTN",74,0)
 .I ONCED>6,($E(T,3,4)=16)!($E(T,3,4)=17)!(T=67180)!(T=67181)!(T=67182)!(T=67183)!(T=67184)!(T=67185)!(T=67186)!(T=67187)!(T=67188)!(T=67189)!(T=67199)!(T=67209)!(T=67241) Q
"RTN","ONCOTN",75,0)
 .W !!?3,"No TNM coding/staging is available for carcinoid tumors" D
"RTN","ONCOTN",76,0)
 ..I ($E(T,3,4)=16)!($E(T,3,4)=17)!($E(T,3,4)=18)!($E(T,3,4)=21)!(T=67239)!($E(T,3,4)=24)!(T=67241)!($E(T,3,4)=25) W !?3,"of the ",$P($G(^ONCO(164,T,0)),U,1),"."
"RTN","ONCOTN",77,0)
 ..W !
"RTN","ONCOTN",78,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",79,0)
 .S Y="@313"
"RTN","ONCOTN",80,0)
 ;
"RTN","ONCOTN",81,0)
 I $E(T,1,4)=6734 D ^ONCLNG,^ONCLNG1 I $D(ONCLUNG(H)) D   S Y="@313" Q 
"RTN","ONCOTN",82,0)
 .W !!?3,"No TNM coding/staging available for sarcomas and rare tumors of the lung.",!
"RTN","ONCOTN",83,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",84,0)
 .K ONCLUNG
"RTN","ONCOTN",85,0)
 K ONCLUNG
"RTN","ONCOTN",86,0)
 ;
"RTN","ONCOTN",87,0)
 ;I (T=67380)!(T=67381)!(T=67382)!(T=67383)!(T=67388)!($E(T,1,4)=6747)!($E(T,1,4)=6748)!($E(T,1,4)=6749),(H=91203)!(H=89903) D   S Y="@313" Q 
"RTN","ONCOTN",88,0)
 ;.W !!?3,"No TNM coding/staging available for angiosarcoma or malignant mesenchymoma.",! D   ;removed these in p5
"RTN","ONCOTN",89,0)
 ;.D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",90,0)
 ;
"RTN","ONCOTN",91,0)
 I $E(T,1,4)=6748,H=90503 D   S Y="@313" Q 
"RTN","ONCOTN",92,0)
 .W !!?3,"No TNM coding/staging available for malignant peritoneal mesothelioma.",! D
"RTN","ONCOTN",93,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",94,0)
 ;
"RTN","ONCOTN",95,0)
 ;I (T=67300)!(T=67310)!(T=67311),(H=95223) D   S Y="@313" Q 
"RTN","ONCOTN",96,0)
 ;.W !!," No TNM coding available for OLFACTORY NEUROMBLASTOMA of ",$S(T=67300:"NASAL CAVITY",T=67310:"SINUS, MAXILLARY",T=67311:"SINUS ETHMOID",1:""),".",!
"RTN","ONCOTN",97,0)
 ;.D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",98,0)
 ;
"RTN","ONCOTN",99,0)
 ;Fallopian Tube (C57.0)
"RTN","ONCOTN",100,0)
 ;Other/unspecified female genitalia (C57.1-C57.9)
"RTN","ONCOTN",101,0)
 I ((T=67570)&(ONCED<5))!(($E(T,1,4)=6757)&(T'=67570)) D  S Y="@313" Q
"RTN","ONCOTN",102,0)
 .W !!?3,"AJCC does not define staging for this site.",!
"RTN","ONCOTN",103,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",104,0)
 ;
"RTN","ONCOTN",105,0)
 ;Paraurethral gland (C68.1)
"RTN","ONCOTN",106,0)
 ;Overlapping lesion of urinary organs (C68.8)
"RTN","ONCOTN",107,0)
 ;Urinary system, NOS (C68.9)
"RTN","ONCOTN",108,0)
 I ONCED>5,((T=67681)!(T=67688)!(T=67689)) D  S Y="@313" Q
"RTN","ONCOTN",109,0)
 .W !!?3,"AJCC does not define staging for this site.",!
"RTN","ONCOTN",110,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",111,0)
 ;
"RTN","ONCOTN",112,0)
 ;Melanoma of the Eyelid
"RTN","ONCOTN",113,0)
 I ONCED<5,T=67441,$$MELANOMA^ONCOU55(D0) D  S Y=37.2 Q
"RTN","ONCOTN",114,0)
 .W !!?3,"No classification is recommended at present.",!
"RTN","ONCOTN",115,0)
 .S $P(^ONCO(165.5,D0,2),U,25)=88
"RTN","ONCOTN",116,0)
 .W !,"CLINICAL T: T88 NA"
"RTN","ONCOTN",117,0)
 ;
"RTN","ONCOTN",118,0)
 ;Brain and Spinal Cord
"RTN","ONCOTN",119,0)
 I ONCED>4,(T=67700)!(T=67701)!(T=67709)!(T=67751)!(T=67752)!(T=67753)!($E(T,3,4)=71)!($E(T,3,4)=72) D  S Y="@313" Q
"RTN","ONCOTN",120,0)
 .W !!?3,"Central Nervous System Tumors have no TNM designation.",!
"RTN","ONCOTN",121,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",122,0)
 ;
"RTN","ONCOTN",123,0)
 ;Kaposi's sarcoma
"RTN","ONCOTN",124,0)
 I H=91403 D  S Y="@313" Q
"RTN","ONCOTN",125,0)
 .W !!?3,"No TNM classification or staging is available for Kaposi's sarcoma.",!
"RTN","ONCOTN",126,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",127,0)
 ;
"RTN","ONCOTN",128,0)
 I $P(^ONCO(164,T,0),U,11)="" D  S Y="@313" Q
"RTN","ONCOTN",129,0)
 .W !!?3,"No stage grouping is presently recommended.",!
"RTN","ONCOTN",130,0)
 .D CTNM88,CSTG88,CSB,PTNM88,PSTG88,PSB
"RTN","ONCOTN",131,0)
 Q
"RTN","ONCOTN",132,0)
 ;
"RTN","ONCOTN",133,0)
CN2 ;GTT - clinical
"RTN","ONCOTN",134,0)
 S T=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCOTN",135,0)
 I T=67589 D  S Y=37.3 Q
"RTN","ONCOTN",136,0)
 .W !!,"  Regional lymph node (N) classification does not apply to these tumors.",!
"RTN","ONCOTN",137,0)
 .S $P(^ONCO(165.5,D0,2),U,26)=""
"RTN","ONCOTN",138,0)
 .W !,"CLINICAL N:"
"RTN","ONCOTN",139,0)
 Q
"RTN","ONCOTN",140,0)
 ;
"RTN","ONCOTN",141,0)
CN4 ;GTT - pathologic
"RTN","ONCOTN",142,0)
 S T=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCOTN",143,0)
 I T=67589 D  S Y=87 Q
"RTN","ONCOTN",144,0)
 .W !!,"   Regional lymph node (N) classification does not apply to these tumors.",!
"RTN","ONCOTN",145,0)
 .S $P(^ONCO(165.5,D0,2.1),U,2)=""
"RTN","ONCOTN",146,0)
 .W !,"PATHOLOGIC N:"
"RTN","ONCOTN",147,0)
 Q
"RTN","ONCOTN",148,0)
 ;
"RTN","ONCOTN",149,0)
CN5 ;GTT - other
"RTN","ONCOTN",150,0)
 S T=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCOTN",151,0)
 I T=67589 D  S Y=99 Q
"RTN","ONCOTN",152,0)
 .W !!,"   Regional lymph node (N) classification does not apply to these tumors.",!
"RTN","ONCOTN",153,0)
 .S $P(^ONCO(165.5,D0,2.1),U,7)=""
"RTN","ONCOTN",154,0)
 .W !,"OTHER N:"
"RTN","ONCOTN",155,0)
 Q
"RTN","ONCOTN",156,0)
 ;
"RTN","ONCOTN",157,0)
RECN ;GTT - Subsequent Recurrences - other
"RTN","ONCOTN",158,0)
 S T=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCOTN",159,0)
 I T=67589 D  S Y=3 Q
"RTN","ONCOTN",160,0)
 .W !!,"   Regional lymph node (N) classification does not apply to these tumors.",!
"RTN","ONCOTN",161,0)
 .S $P(^ONCO(165.5,D0,23,D1,0),U,8)=""
"RTN","ONCOTN",162,0)
 .W !,"OTHER N:"
"RTN","ONCOTN",163,0)
 Q
"RTN","ONCOTN",164,0)
 ;
"RTN","ONCOTN",165,0)
ES ;Automatic Staging
"RTN","ONCOTN",166,0)
 N CM,G,HT,HT14,N,M,SD,SP,STGTYP,T,TX,XX,XXX,YR
"RTN","ONCOTN",167,0)
 S YR=$E($P($G(^ONCO(165.5,D0,0)),U,16),1,3)
"RTN","ONCOTN",168,0)
 S ONCED=$S(YR<283:1,YR<288:2,YR<292:3,YR<298:4,YR<303:5,YR<310:6,1:7)
"RTN","ONCOTN",169,0)
 I ONCED<3 D  Q
"RTN","ONCOTN",170,0)
 .W !!,"DATE DX prior to 1988.  Automatic staging unavailable.",!
"RTN","ONCOTN",171,0)
 S STGTYP=$S(STGIND="C":"CLINICAL",STGIND="P":"PATHOLOGIC",STGIND="O":"OTHER",STGIND="R":"RECURRENCE",1:"")
"RTN","ONCOTN",172,0)
 S XX=$G(^ONCO(165.5,D0,2))
"RTN","ONCOTN",173,0)
 G EX:XX=""
"RTN","ONCOTN",174,0)
 S ST=$P(^ONCO(165.5,D0,0),U,1)
"RTN","ONCOTN",175,0)
 S G=$P(^ONCO(165.5,D0,2),U,5)
"RTN","ONCOTN",176,0)
 S TX=$P(^ONCO(165.5,D0,2),U,1)
"RTN","ONCOTN",177,0)
 S HT=$$HIST^ONCFUNC(D0)
"RTN","ONCOTN",178,0)
 S SP=$P($G(^ONCO(164,+TX,0)),U,11)
"RTN","ONCOTN",179,0)
 S SD=$P($G(^ONCO(165.5,D0,"CS3")),U,1)
"RTN","ONCOTN",180,0)
 I STGIND="C" D
"RTN","ONCOTN",181,0)
 .S XXX=$G(^ONCO(165.5,D0,2))
"RTN","ONCOTN",182,0)
 .S T=$P(XXX,U,25)
"RTN","ONCOTN",183,0)
 .S N=$P(XXX,U,26)
"RTN","ONCOTN",184,0)
 .S M=$P(XXX,U,27)
"RTN","ONCOTN",185,0)
 I STGIND="P" D
"RTN","ONCOTN",186,0)
 .S XXX=$G(^ONCO(165.5,D0,2.1))
"RTN","ONCOTN",187,0)
 .S T=$P(XXX,U,1)
"RTN","ONCOTN",188,0)
 .S N=$P(XXX,U,2)
"RTN","ONCOTN",189,0)
 .S M=$P(XXX,U,3)
"RTN","ONCOTN",190,0)
 .S CM=$P($G(^ONCO(165.5,D0,2)),U,27)
"RTN","ONCOTN",191,0)
 .I (T'="X")!(N'="X"),$E(M,1)'=1,CM'="X" D
"RTN","ONCOTN",192,0)
 ..S M=CM
"RTN","ONCOTN",193,0)
 ..W !!?12,"CLINICAL M will be used to calculate PATHOLOGIC STAGE GROUPING."
"RTN","ONCOTN",194,0)
 I STGIND="O" D
"RTN","ONCOTN",195,0)
 .S XXX=$G(^ONCO(165.5,D0,2.1))
"RTN","ONCOTN",196,0)
 .S T=$P(XXX,U,6)
"RTN","ONCOTN",197,0)
 .S N=$P(XXX,U,7)
"RTN","ONCOTN",198,0)
 .S M=$P(XXX,U,8)
"RTN","ONCOTN",199,0)
 I STGIND="R" D
"RTN","ONCOTN",200,0)
 .S XXX=$G(^ONCO(165.5,D0,23,DA,0))
"RTN","ONCOTN",201,0)
 .S T=$P(XXX,U,6)
"RTN","ONCOTN",202,0)
 .S N=$P(XXX,U,7)
"RTN","ONCOTN",203,0)
 .S M=$P(XXX,U,8)
"RTN","ONCOTN",204,0)
 I T="" D  G SG
"RTN","ONCOTN",205,0)
 .W !!?3,"No ",STGTYP," T category has been assigned."
"RTN","ONCOTN",206,0)
 .S SG=99
"RTN","ONCOTN",207,0)
 I N="",ST'=58,'$$GTT^ONCOU55(D0) D  G SG
"RTN","ONCOTN",208,0)
 .W !!?3,"No ",STGTYP," N category has been assigned."
"RTN","ONCOTN",209,0)
 .S SG=99
"RTN","ONCOTN",210,0)
 I M="",'$$OCULAR D  G SG
"RTN","ONCOTN",211,0)
 .W !?3,"No ",STGTYP," M category has been assigned."
"RTN","ONCOTN",212,0)
 .S SG=99
"RTN","ONCOTN",213,0)
 ;
"RTN","ONCOTN",214,0)
 ;Gastrointestinal Stromal Tumor (Gist) 8935-8936
"RTN","ONCOTN",215,0)
 I ($E(HT,1,4)=8935)!($E(HT,1,4)=8936),(($E(TX,3,4)=15)!($E(TX,3,4)=16)!($E(TX,3,4)=17)!($E(TX,3,4)=18)!($E(TX,3,4)=21)!($E(TX,3,4)=48)!(TX=67199)!(TX=67209)),ONCED>6 S AG="121" G AG
"RTN","ONCOTN",216,0)
 ;
"RTN","ONCOTN",217,0)
 ;Neuroendocrine Tumor 8153, 8240-8242, 8246, 8249
"RTN","ONCOTN",218,0)
 I ONCED>6,(($E(HT,1,4)=8153)!($E(HT,1,4)=8240)!($E(HT,1,4)=8241)!($E(HT,1,4)=8242)!($E(HT,1,4)=8246)!($E(HT,1,4)=8249)),(($E(TX,3,4)=16)!($E(TX,3,4)=17)!($E(TX,3,4)=18)!(TX=67241)!(TX=67199)!(TX=67209)) S AG=122 G AG
"RTN","ONCOTN",219,0)
 ;
"RTN","ONCOTN",220,0)
 ;Esophagus/GE Junction C16.0-C16.2
"RTN","ONCOTN",221,0)
 I TX=67160,ONCED>6 S AG="9" G AG
"RTN","ONCOTN",222,0)
 I TX=67161!(TX=67162),ONCED>6,SD="010"!(SD="020")!(SD="040")!(SD="060") S AG="9" G AG
"RTN","ONCOTN",223,0)
 ;
"RTN","ONCOTN",224,0)
 ;Gallbladder
"RTN","ONCOTN",225,0)
 ;Distal Bile Duct
"RTN","ONCOTN",226,0)
 I TX=67240,ONCED>6,(SD="040")!(SD="070") S AG=63 G AG
"RTN","ONCOTN",227,0)
 I TX=67240,ONCED>6,SD="030" S AG=14 G AG
"RTN","ONCOTN",228,0)
 ;
"RTN","ONCOTN",229,0)
 ;Melanoma of the Eyelid (C44.1)
"RTN","ONCOTN",230,0)
 I TX=67441,ONCED<5,$$MELANOMA^ONCOU55(D0) S AG=37 G AG
"RTN","ONCOTN",231,0)
 ;
"RTN","ONCOTN",232,0)
 ;Melanoma of the Skin
"RTN","ONCOTN",233,0)
 I $$MELANOMA^ONCOU55(D0),$P($G(^ONCO(164,+TX,0)),U,15) S AG=22 G AG
"RTN","ONCOTN",234,0)
 ;
"RTN","ONCOTN",235,0)
 ;Merkel Cell Carcinoma
"RTN","ONCOTN",236,0)
 I $E(HT,1,4)=8247,ONCED>6 S AG=21 G AG
"RTN","ONCOTN",237,0)
 ;
"RTN","ONCOTN",238,0)
 ;Ovary and Primary Peritoneal Carcinoma - 7th edition
"RTN","ONCOTN",239,0)
 S HT14=$E(HT,1,4)
"RTN","ONCOTN",240,0)
 I ONCED>6,(TX=67481)!(TX=67482)!(TX=67488),(HT14>7999)&(HT14<8577)!(HT14>8929)&(HT14<9111) S AG=26,SP=67569 G AG
"RTN","ONCOTN",241,0)
 ;
"RTN","ONCOTN",242,0)
 ;GTT
"RTN","ONCOTN",243,0)
 I TX=67589 S AG=54 G AG
"RTN","ONCOTN",244,0)
 ;
"RTN","ONCOTN",245,0)
 ;Urethra (C68.9)
"RTN","ONCOTN",246,0)
 ;Urothelial (Transitional Cell) Carcinoma of the Prostate
"RTN","ONCOTN",247,0)
 I ONCED>4,TX=67619,(HT=81203)!(HT=81303)!(HT=81223)!(HT=81202) D  G AG
"RTN","ONCOTN",248,0)
 .S AG=35
"RTN","ONCOTN",249,0)
 ;
"RTN","ONCOTN",250,0)
 ;Melanoma of the Conjunctiva
"RTN","ONCOTN",251,0)
 I $$MELANOMA^ONCOU55(D0),TX=67690 S AG=39 G AG
"RTN","ONCOTN",252,0)
 ;
"RTN","ONCOTN",253,0)
 ;Melanoma of the Uvea
"RTN","ONCOTN",254,0)
 I $$MELANOMA^ONCOU55(D0),((TX=67693)!(TX=67694)) S AG=40 G AG
"RTN","ONCOTN",255,0)
 ;
"RTN","ONCOTN",256,0)
 ;Ocular Adnexa Lymphoma
"RTN","ONCOTN",257,0)
 I ONCED>6,$$LYMPHOMA^ONCFUNC(D0),((TX=67441)!(TX=67690)!(TX=67695)!(TX=67696)) S AG=431 G AG
"RTN","ONCOTN",258,0)
 ;
"RTN","ONCOTN",259,0)
 ;Lymphoid Neoplasms
"RTN","ONCOTN",260,0)
 ;Mycosis fungoides (9700/3)
"RTN","ONCOTN",261,0)
 ;Sezary Disease    (9701/3)
"RTN","ONCOTN",262,0)
 I ONCED>5,(HT=97003)!(HT=97013) S AG=55 G AG
"RTN","ONCOTN",263,0)
 ;
"RTN","ONCOTN",264,0)
 S AG=$P($G(^ONCO(164,+TX,0)),U,12)
"RTN","ONCOTN",265,0)
 ;
"RTN","ONCOTN",266,0)
AG ;DO staging subroutine
"RTN","ONCOTN",267,0)
 S SG=99
"RTN","ONCOTN",268,0)
 I T=88,N=88,M=88 S SG=88 G SG
"RTN","ONCOTN",269,0)
 S ONCOED=ONCED
"RTN","ONCOTN",270,0)
 D @(AG_"^ONCOTN0")
"RTN","ONCOTN",271,0)
 W:SG=99 !!,?12,"TNM combination not in staging table."
"RTN","ONCOTN",272,0)
 ;
"RTN","ONCOTN",273,0)
SG ;Computed stage
"RTN","ONCOTN",274,0)
 I STGIND="C" S $P(^ONCO(165.5,D0,2),U,20)=SG
"RTN","ONCOTN",275,0)
 I STGIND="P" S $P(^ONCO(165.5,D0,2.1),U,4)=SG
"RTN","ONCOTN",276,0)
 I STGIND="O" S $P(^ONCO(165.5,D0,2.1),U,9)=SG
"RTN","ONCOTN",277,0)
 I STGIND="R" S $P(^ONCO(165.5,D0,23,DA,0),U,9)=SG
"RTN","ONCOTN",278,0)
 I SG'="" S X=SG D KSG^ONCOCRC D
"RTN","ONCOTN",279,0)
 .I STGIND="C" D CSSG^ONCOCRC Q
"RTN","ONCOTN",280,0)
 .I STGIND="P" D PSSG^ONCOCRC Q
"RTN","ONCOTN",281,0)
 N CMPFLG S CMPFLG="COMPUTING TNM"
"RTN","ONCOTN",282,0)
 W !!?12,"Computed "_$S(STGIND="C":"CLINICAL",STGIND="P":"PATHOLOGIC",STGIND="O":"OTHER",STGIND="R":"RECURRENCE",1:"")," STAGE GROUPING: ",$$SGOUT^ONCOTNO(D0),!
"RTN","ONCOTN",283,0)
EX Q
"RTN","ONCOTN",284,0)
 ;
"RTN","ONCOTN",285,0)
CTNM88 ;CLINICAL TNM 88
"RTN","ONCOTN",286,0)
 S $P(^ONCO(165.5,D0,2),U,25)=88
"RTN","ONCOTN",287,0)
 S $P(^ONCO(165.5,D0,2),U,26)=88
"RTN","ONCOTN",288,0)
 S $P(^ONCO(165.5,D0,2),U,27)=88
"RTN","ONCOTN",289,0)
 W !,"CLINICAL T: T88 NA"
"RTN","ONCOTN",290,0)
 W !,"CLINICAL N: N88 NA"
"RTN","ONCOTN",291,0)
 W !,"CLINICAL M: M88 NA",!
"RTN","ONCOTN",292,0)
 I $$LYMPHOMA^ONCFUNC(D0) Q
"RTN","ONCOTN",293,0)
 S:$P($G(^ONCO(165.5,D0,7)),U,7)="" $P(^ONCO(165.5,D0,7),U,7)="0000000"
"RTN","ONCOTN",294,0)
 S:$P($G(^ONCO(165.5,D0,7)),U,14)="" $P(^ONCO(165.5,D0,7),U,14)="0000000"
"RTN","ONCOTN",295,0)
 Q
"RTN","ONCOTN",296,0)
 ;
"RTN","ONCOTN",297,0)
CSB I DATEDX>2951231 D
"RTN","ONCOTN",298,0)
 .S $P(^ONCO(165.5,D0,3),U,32)=0
"RTN","ONCOTN",299,0)
 .W !,"STAGED BY (CLINICAL STAGE): Not staged",!
"RTN","ONCOTN",300,0)
 Q
"RTN","ONCOTN",301,0)
 ;
"RTN","ONCOTN",302,0)
PTNM88 ;PATHOLOGIC TNM 88
"RTN","ONCOTN",303,0)
 S $P(^ONCO(165.5,D0,7),U,17)="N"
"RTN","ONCOTN",304,0)
 S $P(^ONCO(165.5,D0,2.1),U,1)=88
"RTN","ONCOTN",305,0)
 S $P(^ONCO(165.5,D0,2.1),U,2)=88
"RTN","ONCOTN",306,0)
 S $P(^ONCO(165.5,D0,2.1),U,3)=88
"RTN","ONCOTN",307,0)
 W !,"MULTIMODALITY THERAPY: NO"
"RTN","ONCOTN",308,0)
 W !,"PATHOLOGIC T: T88 NA"
"RTN","ONCOTN",309,0)
 W !,"PATHOLOGIC N: N88 NA"
"RTN","ONCOTN",310,0)
 W !,"PATHOLOGIC M: M88 NA",!
"RTN","ONCOTN",311,0)
 Q
"RTN","ONCOTN",312,0)
 ;
"RTN","ONCOTN",313,0)
PSB I DATEDX>2951231 D
"RTN","ONCOTN",314,0)
 .S $P(^ONCO(165.5,D0,2.1),U,5)=0
"RTN","ONCOTN",315,0)
 .W !,"STAGED BY (PATHOLOGIC STAGE): Not staged",!
"RTN","ONCOTN",316,0)
 Q
"RTN","ONCOTN",317,0)
 ;
"RTN","ONCOTN",318,0)
CSTG88 ;CLINICAL STAGE 88
"RTN","ONCOTN",319,0)
 S $P(^ONCO(165.5,D0,2),U,20)=88
"RTN","ONCOTN",320,0)
 W !,"STAGE GROUP CLINICAL: NA",!
"RTN","ONCOTN",321,0)
 S TMP=$G(X),X=88 D CSSG^ONCOCRC S X=TMP
"RTN","ONCOTN",322,0)
 K TMP
"RTN","ONCOTN",323,0)
 Q
"RTN","ONCOTN",324,0)
 ;
"RTN","ONCOTN",325,0)
PSTG88 ;PATHOLOGIC STAGE 88
"RTN","ONCOTN",326,0)
 S $P(^ONCO(165.5,D0,2.1),U,4)=88
"RTN","ONCOTN",327,0)
 W !,"STAGE GROUP PATHOLOGIC: NA",!
"RTN","ONCOTN",328,0)
 S TMP=$G(X),X=88 D PSSG^ONCOCRC S X=TMP
"RTN","ONCOTN",329,0)
 K TMP
"RTN","ONCOTN",330,0)
 Q
"RTN","ONCOTN",331,0)
 ;
"RTN","ONCOTN",332,0)
OCULAR() ;
"RTN","ONCOTN",333,0)
 I $G(HT14)="" S HT14=$E(HT,1,4)
"RTN","ONCOTN",334,0)
 I ONCED>6,$$LYMPHOMA^ONCFUNC(D0),((TX=67441)!(TX=67690)!(TX=67695)!(TX=67696)),((HT14>9589)&(HT14<9700)!(HT14>9701)&(HT14<9739)!(HT14>9810)&(HT14<9819)!(HT14>9819)&(HT14<9838)) Q 1
"RTN","ONCOTN",335,0)
 Q 0
"RTN","ONCOTN",336,0)
 ;
"RTN","ONCOTN",337,0)
CN1 ;No longer used. Called by PCEs.
"RTN","ONCOTN",338,0)
CN3 ;No longer used. Called by PCEs.
"RTN","ONCOTN",339,0)
 Q
"RTN","ONCOTN",340,0)
 ;
"RTN","ONCOTN",341,0)
CLEANUP ;Cleanup
"RTN","ONCOTN",342,0)
 K AG,D0,D1,DA,ONCOED,SG,ST,STGIND,X,Y
"RTN","ONCPAT1")
0^34^B8598027
"RTN","ONCPAT1",1,0)
ONCPAT1 ;Hines OIFO/GWB - PATIENT IDENTIFICATION (continued) ;10/07/11
"RTN","ONCPAT1",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCPAT1",3,0)
 ;
"RTN","ONCPAT1",4,0)
CC W !,"    Source Comorbidity..........: ",ONC(160,D0,1006)
"RTN","ONCPAT1",5,0)
 W !,"    Comorbidity/Complication  #1.: ",ONC(160,D0,25)
"RTN","ONCPAT1",6,0)
 W !,"    Comorbidity/Complication  #2.: ",ONC(160,D0,25.1)
"RTN","ONCPAT1",7,0)
 W !,"    Comorbidity/Complication  #3.: ",ONC(160,D0,25.2)
"RTN","ONCPAT1",8,0)
 W !,"    Comorbidity/Complication  #4.: ",ONC(160,D0,25.3)
"RTN","ONCPAT1",9,0)
 W !,"    Comorbidity/Complication  #5.: ",ONC(160,D0,25.4)
"RTN","ONCPAT1",10,0)
 W !,"    Comorbidity/Complication  #6.: ",ONC(160,D0,25.5)
"RTN","ONCPAT1",11,0)
 W !,"    Comorbidity/Complication  #7.: ",ONC(160,D0,25.6)
"RTN","ONCPAT1",12,0)
 W !,"    Comorbidity/Complication  #8.: ",ONC(160,D0,25.7)
"RTN","ONCPAT1",13,0)
 W !,"    Comorbidity/Complication  #9.: ",ONC(160,D0,25.8)
"RTN","ONCPAT1",14,0)
 W !,"    Comorbidity/Complication #10.: ",ONC(160,D0,25.9)
"RTN","ONCPAT1",15,0)
 Q
"RTN","ONCPAT1",16,0)
 ;
"RTN","ONCPAT1",17,0)
CC2 W !,"    COMORBIDITY/COMPLICATION #2:"
"RTN","ONCPAT1",18,0)
CC3 W !,"    COMORBIDITY/COMPLICATION #3:"
"RTN","ONCPAT1",19,0)
CC4 W !,"    COMORBIDITY/COMPLICATION #4:"
"RTN","ONCPAT1",20,0)
CC5 W !,"    COMORBIDITY/COMPLICATION #5:"
"RTN","ONCPAT1",21,0)
CC6 W !,"    COMORBIDITY/COMPLICATION #6:"
"RTN","ONCPAT1",22,0)
CC7 W !,"    COMORBIDITY/COMPLICATION #7:"
"RTN","ONCPAT1",23,0)
CC8 W !,"    COMORBIDITY/COMPLICATION #8:"
"RTN","ONCPAT1",24,0)
CC9 W !,"    COMORBIDITY/COMPLICATION #9:"
"RTN","ONCPAT1",25,0)
CC10 W !,"    COMORBIDITY/COMPLICATION #10:"
"RTN","ONCPAT1",26,0)
 Q
"RTN","ONCPAT1",27,0)
 ;
"RTN","ONCPAT1",28,0)
SD W !,"    Secondary Diagnosis  #1.: ",ONC(160,D0,25.91)
"RTN","ONCPAT1",29,0)
 W !,"    Secondary Diagnosis  #2.: ",ONC(160,D0,25.92)
"RTN","ONCPAT1",30,0)
 W !,"    Secondary Diagnosis  #3.: ",ONC(160,D0,25.93)
"RTN","ONCPAT1",31,0)
 W !,"    Secondary Diagnosis  #4.: ",ONC(160,D0,25.94)
"RTN","ONCPAT1",32,0)
 W !,"    Secondary Diagnosis  #5.: ",ONC(160,D0,25.95)
"RTN","ONCPAT1",33,0)
 W !,"    Secondary Diagnosis  #6.: ",ONC(160,D0,25.96)
"RTN","ONCPAT1",34,0)
 W !,"    Secondary Diagnosis  #7.: ",ONC(160,D0,25.97)
"RTN","ONCPAT1",35,0)
 W !,"    Secondary Diagnosis  #8.: ",ONC(160,D0,25.98)
"RTN","ONCPAT1",36,0)
 W !,"    Secondary Diagnosis  #9.: ",ONC(160,D0,25.99)
"RTN","ONCPAT1",37,0)
 W !,"    Secondary Diagnosis #10.: ",ONC(160,D0,25.9901)
"RTN","ONCPAT1",38,0)
 ;
"RTN","ONCPAT1",39,0)
 N DIR,X S SAVEY=Y,ONCSDPMT="" W !
"RTN","ONCPAT1",40,0)
 S DIR("A")=" Would you like to edit the SECONDARY DIAGNOSIS #1-10 prompts"
"RTN","ONCPAT1",41,0)
 S DIR(0)="Y",DIR("B")="Yes" D ^DIR
"RTN","ONCPAT1",42,0)
 I Y=1 W ! S ONCSDPMT=1
"RTN","ONCPAT1",43,0)
 S Y=SAVEY Q
"RTN","ONCPAT1",44,0)
 Q
"RTN","ONCPAT1",45,0)
 ;
"RTN","ONCPAT1",46,0)
SD2 W !,"    SECONDARY DIAGNOSIS #2:"
"RTN","ONCPAT1",47,0)
SD3 W !,"    SECONDARY DIAGNOSIS #3:"
"RTN","ONCPAT1",48,0)
SD4 W !,"    SECONDARY DIAGNOSIS #4:"
"RTN","ONCPAT1",49,0)
SD5 W !,"    SECONDARY DIAGNOSIS #5:"
"RTN","ONCPAT1",50,0)
SD6 W !,"    SECONDARY DIAGNOSIS #6:"
"RTN","ONCPAT1",51,0)
SD7 W !,"    SECONDARY DIAGNOSIS #7:"
"RTN","ONCPAT1",52,0)
SD8 W !,"    SECONDARY DIAGNOSIS #8:"
"RTN","ONCPAT1",53,0)
SD9 W !,"    SECONDARY DIAGNOSIS #9:"
"RTN","ONCPAT1",54,0)
SD10 W !,"    SECONDARY DIAGNOSIS #10:"
"RTN","ONCPAT1",55,0)
 Q
"RTN","ONCPAT1",56,0)
 ;
"RTN","ONCPAT1",57,0)
SDSTF2 S $P(^ONCO(160,D0,3),"^",2)=""
"RTN","ONCPAT1",58,0)
SDSTF3 S $P(^ONCO(160,D0,3),"^",3)=""
"RTN","ONCPAT1",59,0)
SDSTF4 S $P(^ONCO(160,D0,3),"^",4)=""
"RTN","ONCPAT1",60,0)
SDSTF5 S $P(^ONCO(160,D0,3),"^",5)=""
"RTN","ONCPAT1",61,0)
SDSTF6 S $P(^ONCO(160,D0,3),"^",6)=""
"RTN","ONCPAT1",62,0)
SDSTF7 S $P(^ONCO(160,D0,3),"^",7)=""
"RTN","ONCPAT1",63,0)
SDSTF8 S $P(^ONCO(160,D0,3),"^",8)=""
"RTN","ONCPAT1",64,0)
SDSTF9 S $P(^ONCO(160,D0,3),"^",9)=""
"RTN","ONCPAT1",65,0)
SDSTF10 S $P(^ONCO(160,D0,3),"^",10)=""
"RTN","ONCPAT1",66,0)
 Q
"RTN","ONCPAT1",67,0)
 ;
"RTN","ONCPAT1",68,0)
CLEANUP ;Cleanup
"RTN","ONCPAT1",69,0)
 K D0,ONC
"RTN","ONCPTX")
0^28^B86311833
"RTN","ONCPTX",1,0)
ONCPTX ;Hines OIFO/GWB - First Course of Treatment ;10/05/11
"RTN","ONCPTX",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCPTX",3,0)
 ;
"RTN","ONCPTX",4,0)
 N DATEDX
"RTN","ONCPTX",5,0)
 S DATEDX=$P($G(^ONCO(165.5,D0,0)),U,16)
"RTN","ONCPTX",6,0)
 ;
"RTN","ONCPTX",7,0)
NCDS ;Surgical Diagnostic and Staging Procedure
"RTN","ONCPTX",8,0)
 N COC,TXDT
"RTN","ONCPTX",9,0)
 S COC=$E($$GET1^DIQ(165.5,D0,.04,"E"),1,2)
"RTN","ONCPTX",10,0)
 I COC=38 D
"RTN","ONCPTX",11,0)
 .S $P(^ONCO(165.5,D0,3),U,27)="00"
"RTN","ONCPTX",12,0)
 .S $P(^ONCO(165.5,D0,3.1),U,5)="00"
"RTN","ONCPTX",13,0)
 .S $P(^ONCO(165.5,D0,3),U,31)="0000000"
"RTN","ONCPTX",14,0)
 .S $P(^ONCO(165.5,D0,3.1),U,6)="0000000"
"RTN","ONCPTX",15,0)
 .S:$P($G(^ONCO(165.5,D0,0)),U,16)>3091239 $P(^ONCO(165.5,D0,2.3),U,5)=0
"RTN","ONCPTX",16,0)
 .I $P(^ONCO(165.5,D0,2.1),U,11)'="" D
"RTN","ONCPTX",17,0)
 ..S TXDT=$P(^ONCO(165.5,D0,2.1),U,11)_"N"
"RTN","ONCPTX",18,0)
 ..S $P(^ONCO(165.5,D0,2.1),U,11)=""
"RTN","ONCPTX",19,0)
 ..K ^ONCO(165.5,"ATX",D0,TXDT)
"RTN","ONCPTX",20,0)
 N DASHES S $P(DASHES,"-",80)="-"
"RTN","ONCPTX",21,0)
 N DA,DI,DIC,DIQ,DR K ONC
"RTN","ONCPTX",22,0)
 S DIC="^ONCO(165.5,"
"RTN","ONCPTX",23,0)
 S DR="58.1;58.3;58.4;58.5;235;124"
"RTN","ONCPTX",24,0)
 S DA=D0,DIQ="ONC(" D EN^DIQ1
"RTN","ONCPTX",25,0)
 F I=58.1,58.4,235 S X=ONC(165.5,D0,I) D UCASE S ONC(165.5,D0,I)=X
"RTN","ONCPTX",26,0)
 D FST^ONCOAIP
"RTN","ONCPTX",27,0)
 W !," SURGICAL DIAGNOSTIC AND STAGING PROCEDURE"
"RTN","ONCPTX",28,0)
 W !," -----------------------------------------"
"RTN","ONCPTX",29,0)
 S TXT=ONC(165.5,D0,58.1),LEN=38 D TXT
"RTN","ONCPTX",30,0)
 W !," Surgical Dx/Staging Proc.....: ",$E(ONC(165.5,D0,58.3),1,6)_$E(ONC(165.5,D0,58.3),9,10),?41,TXT1
"RTN","ONCPTX",31,0)
 W:TXT2'="" !?41,TXT2
"RTN","ONCPTX",32,0)
 S TXT=ONC(165.5,D0,58.4),LEN=38 D TXT
"RTN","ONCPTX",33,0)
 W !," Surg Dx/Staging Proc @fac....: ",$E(ONC(165.5,D0,58.5),1,6)_$E(ONC(165.5,D0,58.5),9,10),?41,TXT1
"RTN","ONCPTX",34,0)
 W:TXT2'="" !?41,TXT2
"RTN","ONCPTX",35,0)
 W:DATEDX>3091231 !!," Treatment Status.............: ",ONC(165.5,D0,235)
"RTN","ONCPTX",36,0)
 W:ONC(165.5,D0,124)'="" !," Date of No Treatment.........: ",ONC(165.5,D0,124)
"RTN","ONCPTX",37,0)
 W !,DASHES
"RTN","ONCPTX",38,0)
 I COC=38 D ^ONCOCC
"RTN","ONCPTX",39,0)
 D EXIT
"RTN","ONCPTX",40,0)
 Q
"RTN","ONCPTX",41,0)
 ;
"RTN","ONCPTX",42,0)
ROADS ;Surgical Procedures (ROADS)
"RTN","ONCPTX",43,0)
 N DASHES S $P(DASHES,"-",80)="-"
"RTN","ONCPTX",44,0)
 N DI,DIC,DR,DA,DIQ K ONC
"RTN","ONCPTX",45,0)
 S DIC="^ONCO(165.5,"
"RTN","ONCPTX",46,0)
 S DR="50;58.6;50.3;58.7;59;138:138.5;139:139.5;435;14;58;23;74;58.2;50.2;140;140.1"
"RTN","ONCPTX",47,0)
 S DA=D0,DIQ="ONC(" D EN^DIQ1
"RTN","ONCPTX",48,0)
 F I=58.6,58.7,59,138,138.1,138.4,138.5,139,139.1,139.4,139.5,435,14,58,23,74,58.2,50.2,140,140.1 S X=ONC(165.5,D0,I) D UCASE S ONC(165.5,D0,I)=X
"RTN","ONCPTX",49,0)
 D FST^ONCOAIP
"RTN","ONCPTX",50,0)
 ;W !," SURGICAL PROCEDURES (ROADS)"
"RTN","ONCPTX",51,0)
 W !," Pre-2003 cases require the following ROADS surgery items to be coded:"
"RTN","ONCPTX",52,0)
 W !,DASHES
"RTN","ONCPTX",53,0)
 S TXT=ONC(165.5,D0,58.2),LEN=48 D TXT
"RTN","ONCPTX",54,0)
 W !," Surgery of primary........(R): ",TXT1 W:TXT2'="" !?32,TXT2
"RTN","ONCPTX",55,0)
 W !," Surgical Approach.........(R): ",ONC(165.5,DA,74)
"RTN","ONCPTX",56,0)
 S TXT=ONC(165.5,D0,50.2),LEN=48 D TXT
"RTN","ONCPTX",57,0)
 W !," Surgery of primary @fac...(R): ",TXT1 W:TXT2'="" !?32,TXT2
"RTN","ONCPTX",58,0)
 S TXT=ONC(165.5,D0,138),LEN=48 D TXT
"RTN","ONCPTX",59,0)
 W !," Scope of ln surgery.......(R): ",TXT1 W:TXT2'="" !?32,TXT2
"RTN","ONCPTX",60,0)
 W !," Number of LN removed..... (R): ",ONC(165.5,D0,140)
"RTN","ONCPTX",61,0)
 S TXT=ONC(165.5,D0,138.1),LEN=48 D TXT
"RTN","ONCPTX",62,0)
 W !," Scope of ln surgery @fac..(R): ",TXT1 W:TXT2'="" !?32,TXT2
"RTN","ONCPTX",63,0)
 W !," Number of LN removed @fac.(R): ",ONC(165.5,D0,140.1)
"RTN","ONCPTX",64,0)
 S TXT=ONC(165.5,D0,139),LEN=48 D TXT
"RTN","ONCPTX",65,0)
 W !," Surg proc/other site......(R): ",TXT1 W:TXT2'="" !?32,TXT2
"RTN","ONCPTX",66,0)
 S TXT=ONC(165.5,D0,139.1),LEN=48 D TXT
"RTN","ONCPTX",67,0)
 W !," Surg proc/other site @fac.(R): ",TXT1 W:TXT2'="" !?32,TXT2
"RTN","ONCPTX",68,0)
 W !,DASHES
"RTN","ONCPTX",69,0)
 D EXIT
"RTN","ONCPTX",70,0)
 Q
"RTN","ONCPTX",71,0)
 ;
"RTN","ONCPTX",72,0)
FORDS ;Surgical Procedures (FORDS)
"RTN","ONCPTX",73,0)
 N DASHES S $P(DASHES,"-",80)="-"
"RTN","ONCPTX",74,0)
 S TOPX=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCPTX",75,0)
 I (TOPX=67420)!(TOPX=67421)!(TOPX=67423)!(TOPX=67424)!($E(TOPX,3,4)=76)!(TOPX=67809) D
"RTN","ONCPTX",76,0)
 .S $P(^ONCO(165.5,D0,3.1),U,29)=1
"RTN","ONCPTX",77,0)
 .S $P(^ONCO(165.5,D0,3),U,1)="0000000"
"RTN","ONCPTX",78,0)
 N DI,DIC,DR,DA,DIQ K ONC
"RTN","ONCPTX",79,0)
 S DIC="^ONCO(165.5,"
"RTN","ONCPTX",80,0)
 S DR="50;58.6;50.3;58.7;59;138:138.5;139:139.7;435;14;58;23;74;58.2;50.2;140;140.1;170;46;47;228;229;230;231;232;234;281"
"RTN","ONCPTX",81,0)
 S DA=D0,DIQ="ONC(" D EN^DIQ1
"RTN","ONCPTX",82,0)
 F I=58.6,58.7,59,138,138.1,138.4,138.5,139,139.1,139.4,139.5,139.6,435,14,58,23,74,58.2,50.2,140,140.1,234,46,47,281 S X=ONC(165.5,D0,I) D UCASE S ONC(165.5,D0,I)=X
"RTN","ONCPTX",83,0)
 D FST^ONCOAIP
"RTN","ONCPTX",84,0)
 ;W !," SURGICAL PROCEDURES (FORDS)"
"RTN","ONCPTX",85,0)
 ;W !," ---------------------------"
"RTN","ONCPTX",86,0)
 S TXT=ONC(165.5,D0,58.6),LEN=38 D TXT
"RTN","ONCPTX",87,0)
 W !," Surgery of primary........(F): ",$E(ONC(165.5,D0,50),1,6)_$E(ONC(165.5,D0,50),9,10),?41,TXT1
"RTN","ONCPTX",88,0)
 W:TXT2'="" !?41,TXT2
"RTN","ONCPTX",89,0)
 S TXT=ONC(165.5,D0,58.7),LEN=38 D TXT
"RTN","ONCPTX",90,0)
 W !," Surgery of primary @fac...(F): ",$E(ONC(165.5,D0,50.3),1,6)_$E(ONC(165.5,D0,50.3),9,10),?41,TXT1
"RTN","ONCPTX",91,0)
 W:TXT2'="" !?41,TXT2
"RTN","ONCPTX",92,0)
 W !," Surgical margins.............: ",ONC(165.5,DA,59)
"RTN","ONCPTX",93,0)
 W:DATEDX>3091231 !," Approach.....................: ",ONC(165.5,DA,234)
"RTN","ONCPTX",94,0)
 S TXT=ONC(165.5,D0,138.4),LEN=38 D TXT
"RTN","ONCPTX",95,0)
 W !," Scope of ln surgery.......(F): ",$E(ONC(165.5,D0,138.2),1,6)_$E(ONC(165.5,D0,138.2),9,10),?41,TXT1
"RTN","ONCPTX",96,0)
 W:TXT2'="" !?41,TXT2
"RTN","ONCPTX",97,0)
 S TXT=ONC(165.5,D0,138.5),LEN=38 D TXT
"RTN","ONCPTX",98,0)
 W !," Scope of ln surgery @fac..(F): ",$E(ONC(165.5,D0,138.3),1,6)_$E(ONC(165.5,D0,138.3),9,10),?41,TXT1
"RTN","ONCPTX",99,0)
 W:TXT2'="" !?41,TXT2
"RTN","ONCPTX",100,0)
 S TXT=ONC(165.5,D0,139.4),LEN=38 D TXT
"RTN","ONCPTX",101,0)
 W !," Surg proc/other site......(F): ",$E(ONC(165.5,D0,139.2),1,6)_$E(ONC(165.5,D0,139.2),9,10),?41,TXT1
"RTN","ONCPTX",102,0)
 W:TXT2'="" !?41,TXT2
"RTN","ONCPTX",103,0)
 S TXT=ONC(165.5,D0,139.6),LEN=38 D TXT
"RTN","ONCPTX",104,0)
 W !," METS site resected...........: ",$E(ONC(165.5,D0,139.7),1,6)_$E(ONC(165.5,D0,139.7),9,10),?41,TXT1
"RTN","ONCPTX",105,0)
 W:TXT2'="" !?41,TXT2
"RTN","ONCPTX",106,0)
 S TXT=ONC(165.5,D0,139.5),LEN=38 D TXT
"RTN","ONCPTX",107,0)
 W !," Surg proc/other site @fac.(F): ",$E(ONC(165.5,D0,139.3),1,6)_$E(ONC(165.5,D0,139.3),9,10),?41,TXT1
"RTN","ONCPTX",108,0)
 W:TXT2'="" !?41,TXT2
"RTN","ONCPTX",109,0)
 W !," Date First Surgical Procedure: ",$E(ONC(165.5,D0,170),1,6)_$E(ONC(165.5,D0,170),9,10)
"RTN","ONCPTX",110,0)
 S TXT=ONC(165.5,D0,23),LEN=38 D TXT
"RTN","ONCPTX",111,0)
 W:DATEDX<3030000 !," Reconstruction/restoration...: ",TXT1
"RTN","ONCPTX",112,0)
 W:TXT2'="" !?41,TXT2
"RTN","ONCPTX",113,0)
 W !," Date of surgical discharge...: ",$E(ONC(165.5,D0,435),1,6)_$E(ONC(165.5,D0,435),9,10)
"RTN","ONCPTX",114,0)
 W !," Readmission w/i 30 days/surg.: ",ONC(165.5,D0,14)
"RTN","ONCPTX",115,0)
 W !," Reason no surgery of primary.: ",ONC(165.5,D0,58)
"RTN","ONCPTX",116,0)
 W !," CAP Protocol Review..........: ",ONC(165.5,D0,46)
"RTN","ONCPTX",117,0)
 W:ONC(165.5,D0,46)="FAILED" !," CAP Text.....................: ",ONC(165.5,D0,47)
"RTN","ONCPTX",118,0)
 W !," Tx Guidelines Discussion.....: ",ONC(165.5,D0,281)
"RTN","ONCPTX",119,0)
 S TXGL=""
"RTN","ONCPTX",120,0)
 I ONC(165.5,D0,228)'="" S TXGL=ONC(165.5,D0,228)
"RTN","ONCPTX",121,0)
 I ONC(165.5,D0,229)'="" S TXGL=TXGL_"/"_ONC(165.5,D0,229)
"RTN","ONCPTX",122,0)
 I ONC(165.5,D0,230)'="" S TXGL=TXGL_"/"_ONC(165.5,D0,230)
"RTN","ONCPTX",123,0)
 W !," Treatment Guideline(s).......: ",TXGL
"RTN","ONCPTX",124,0)
 W:TXGL'="" !," Treatment Guideline Location.: ",ONC(165.5,D0,231)
"RTN","ONCPTX",125,0)
 W:TXGL'="" !," Treatment Guideline Doc Date.: ",ONC(165.5,D0,232)
"RTN","ONCPTX",126,0)
 W !,DASHES
"RTN","ONCPTX",127,0)
 D EXIT
"RTN","ONCPTX",128,0)
 Q
"RTN","ONCPTX",129,0)
 ;
"RTN","ONCPTX",130,0)
RAD ;Radiation
"RTN","ONCPTX",131,0)
 D FST^ONCOAIP
"RTN","ONCPTX",132,0)
 N DASHES S $P(DASHES,"-",80)="-"
"RTN","ONCPTX",133,0)
 ;W !," RADIATION"
"RTN","ONCPTX",134,0)
 ;W !," ---------"
"RTN","ONCPTX",135,0)
 N DI,DIC,DR,DA,DIQ K ONC
"RTN","ONCPTX",136,0)
 S DIC="^ONCO(165.5,"
"RTN","ONCPTX",137,0)
 S DR="51;51.2;51.3;51.4;51.5;56;75;125;126;363;442;363.1;443;361"
"RTN","ONCPTX",138,0)
 S DA=D0,DIQ="ONC(" D EN^DIQ1
"RTN","ONCPTX",139,0)
 F I=51.2,126,125,363,363.1,56,51.3,51.4,75,442,443 S X=ONC(165.5,D0,I) D UCASE S ONC(165.5,D0,I)=X
"RTN","ONCPTX",140,0)
 W !," Radiation....................: ",ONC(165.5,DA,51.2)
"RTN","ONCPTX",141,0)
 W !," Date radiation started.......: ",ONC(165.5,DA,51)
"RTN","ONCPTX",142,0)
 W !," Radiation @fac...............: ",ONC(165.5,DA,51.5)," ",ONC(165.5,DA,51.4)
"RTN","ONCPTX",143,0)
 W !," Location of radiation tx.....: ",ONC(165.5,DA,126)
"RTN","ONCPTX",144,0)
 W !," Radiation treatment volume...: ",ONC(165.5,DA,125)
"RTN","ONCPTX",145,0)
 W !," Regional treatment modality..: ",ONC(165.5,DA,363)
"RTN","ONCPTX",146,0)
 W !," Regional dose:cGy............: ",ONC(165.5,DA,442)
"RTN","ONCPTX",147,0)
 W !," Boost treatment modality.....: ",ONC(165.5,DA,363.1)
"RTN","ONCPTX",148,0)
 W !," Boost dose:cGy...............: ",ONC(165.5,DA,443)
"RTN","ONCPTX",149,0)
 W !," Number of txs to this volume.: ",ONC(165.5,DA,56)
"RTN","ONCPTX",150,0)
 W !," Radiation/surgery sequence...: ",ONC(165.5,DA,51.3)
"RTN","ONCPTX",151,0)
 W !," Date radiation ended.........: ",ONC(165.5,DA,361)
"RTN","ONCPTX",152,0)
 W !," Reason for no radiation......: ",ONC(165.5,DA,75)
"RTN","ONCPTX",153,0)
 W !,DASHES
"RTN","ONCPTX",154,0)
 D EXIT
"RTN","ONCPTX",155,0)
 Q
"RTN","ONCPTX",156,0)
 ;
"RTN","ONCPTX",157,0)
ST ;Systemic Therapy
"RTN","ONCPTX",158,0)
 D FST^ONCOAIP
"RTN","ONCPTX",159,0)
 N DASHES S $P(DASHES,"-",80)="-"
"RTN","ONCPTX",160,0)
 ;W !," SYSTEMIC THERAPY"
"RTN","ONCPTX",161,0)
 ;W !," ----------------"
"RTN","ONCPTX",162,0)
 N DI,DIC,DR,DA,DIQ K ONC
"RTN","ONCPTX",163,0)
 S DIC="^ONCO(165.5,"
"RTN","ONCPTX",164,0)
 S DR="152;53;53.2;53.3;53.4;54;54.2;54.3;54.4;55;55.2;55.3;55.4;153:153.3;15;1423:1423.4"
"RTN","ONCPTX",165,0)
 S DA=D0,DIQ="ONC(" D EN^DIQ1
"RTN","ONCPTX",166,0)
 F I=53.2,53.3,54.2,54.3,55.2,55.3,153,153.2,15 S X=ONC(165.5,D0,I) D UCASE S ONC(165.5,D0,I)=X
"RTN","ONCPTX",167,0)
 W !," Date systemic therapy started.: ",ONC(165.5,DA,152)
"RTN","ONCPTX",168,0)
 W !," Chemotherapy..................: ",ONC(165.5,DA,53)," ",$E(ONC(165.5,DA,53.2),1,34)
"RTN","ONCPTX",169,0)
 W !," Chemotherapy @fac.............: ",ONC(165.5,DA,53.4)," ",$E(ONC(165.5,DA,53.3),1,34)
"RTN","ONCPTX",170,0)
 W:ONC(165.5,DA,1423)'="" !," Chemotherapeutic agent #1.....: ",ONC(165.5,DA,1423)
"RTN","ONCPTX",171,0)
 W:ONC(165.5,DA,1423.1)'="" !," Chemotherapeutic agent #2.....: ",ONC(165.5,DA,1423.1)
"RTN","ONCPTX",172,0)
 W:ONC(165.5,DA,1423.2)'="" !," Chemotherapeutic agent #3.....: ",ONC(165.5,DA,1423.2)
"RTN","ONCPTX",173,0)
 W:ONC(165.5,DA,1423.3)'="" !," Chemotherapeutic agent #4.....: ",ONC(165.5,DA,1423.3)
"RTN","ONCPTX",174,0)
 W:ONC(165.5,DA,1423.4)'="" !," Chemotherapeutic agent #5.....: ",ONC(165.5,DA,1423.4)
"RTN","ONCPTX",175,0)
 W !," Hormone therapy...............: ",ONC(165.5,DA,54)," ",$E(ONC(165.5,DA,54.2),1,34)
"RTN","ONCPTX",176,0)
 W !," Hormone therapy @fac..........: ",ONC(165.5,DA,54.4)," ",$E(ONC(165.5,DA,54.3),1,34)
"RTN","ONCPTX",177,0)
 W !," Immunotherapy.................: ",ONC(165.5,DA,55)," ",$E(ONC(165.5,DA,55.2),1,34)
"RTN","ONCPTX",178,0)
 W !," Immunotherapy @fac............: ",ONC(165.5,DA,55.4)," ",$E(ONC(165.5,DA,55.3),1,34)
"RTN","ONCPTX",179,0)
 W !," Hema Trans/Endocrine Proc.....: ",ONC(165.5,DA,153.1)," ",$E(ONC(165.5,DA,153),1,34)
"RTN","ONCPTX",180,0)
 W !," Hema Trans/Endocrine Proc @fac: ",ONC(165.5,DA,153.3)," ",$E(ONC(165.5,DA,153.2),1,34)
"RTN","ONCPTX",181,0)
 W:DATEDX>3051231 !," Systemic/Surgery Sequence.....: ",ONC(165.5,DA,15)
"RTN","ONCPTX",182,0)
 W !,DASHES
"RTN","ONCPTX",183,0)
 D EXIT
"RTN","ONCPTX",184,0)
 Q
"RTN","ONCPTX",185,0)
 ;
"RTN","ONCPTX",186,0)
OTH ;Other Treatment
"RTN","ONCPTX",187,0)
 D FST^ONCOAIP
"RTN","ONCPTX",188,0)
 N DASHES S $P(DASHES,"-",80)="-"
"RTN","ONCPTX",189,0)
 ;W !," OTHER TREATMENT"
"RTN","ONCPTX",190,0)
 ;W !," ---------------"
"RTN","ONCPTX",191,0)
 N DI,DIC,DR,DA,DIQ K ONC
"RTN","ONCPTX",192,0)
 S DIC="^ONCO(165.5,"
"RTN","ONCPTX",193,0)
 S DR="57;57.2;57.3;57.4"
"RTN","ONCPTX",194,0)
 S DA=D0,DIQ="ONC(" D EN^DIQ1
"RTN","ONCPTX",195,0)
 F I=57,57.2,57.3,57.4 S X=ONC(165.5,D0,I) D UCASE S ONC(165.5,D0,I)=X
"RTN","ONCPTX",196,0)
 W !," Other treatment...............: ",ONC(165.5,DA,57)," ",ONC(165.5,DA,57.2)
"RTN","ONCPTX",197,0)
 W !," Other treatment @fac..........: ",ONC(165.5,DA,57.4)," ",ONC(165.5,DA,57.3)
"RTN","ONCPTX",198,0)
 W !,DASHES
"RTN","ONCPTX",199,0)
 D EXIT
"RTN","ONCPTX",200,0)
 Q
"RTN","ONCPTX",201,0)
 ;
"RTN","ONCPTX",202,0)
PRO ;Palliative Care/Protocol Participation
"RTN","ONCPTX",203,0)
 D FST^ONCOAIP
"RTN","ONCPTX",204,0)
 N DASHES S $P(DASHES,"-",80)="-"
"RTN","ONCPTX",205,0)
 ;W !," PALLIATIVE CARE/PROTOCOL PARTICIPATION"
"RTN","ONCPTX",206,0)
 ;W !," -------------------------------------------"
"RTN","ONCPTX",207,0)
 N DI,DIC,DR,DA,DIQ K ONC
"RTN","ONCPTX",208,0)
 S DIC="^ONCO(165.5,"
"RTN","ONCPTX",209,0)
 S DR="133;560;154;12;13;346;279"
"RTN","ONCPTX",210,0)
 S DA=D0,DIQ="ONC(" D EN^DIQ1
"RTN","ONCPTX",211,0)
 F I=560,154,12,13,346,279 S X=ONC(165.5,D0,I) D UCASE S ONC(165.5,D0,I)=X
"RTN","ONCPTX",212,0)
 W !," Palliative care...............: ",ONC(165.5,DA,12)
"RTN","ONCPTX",213,0)
 W !," Palliative care @fac..........: ",ONC(165.5,DA,13)
"RTN","ONCPTX",214,0)
 W !
"RTN","ONCPTX",215,0)
 W !," Clinical Trials Discussion....: "_ONC(165.5,DA,279)
"RTN","ONCPTX",216,0)
 W !
"RTN","ONCPTX",217,0)
 W !," Protocol eligibility status...: "_ONC(165.5,DA,346)
"RTN","ONCPTX",218,0)
 W !," Protocol participation........: "_ONC(165.5,DA,560)
"RTN","ONCPTX",219,0)
 W !," Year put on protocol..........: "_ONC(165.5,DA,133)
"RTN","ONCPTX",220,0)
 W !,DASHES
"RTN","ONCPTX",221,0)
 D EXIT
"RTN","ONCPTX",222,0)
 Q
"RTN","ONCPTX",223,0)
 ;
"RTN","ONCPTX",224,0)
TXT ;Text formatting
"RTN","ONCPTX",225,0)
 N LOS,NOP
"RTN","ONCPTX",226,0)
 S (TXT1,TXT2)="",LOS=$L(TXT) I LOS<LEN S TXT1=TXT Q
"RTN","ONCPTX",227,0)
 S NOP=$L($E(TXT,1,LEN)," ")
"RTN","ONCPTX",228,0)
 S TXT1=$P(TXT," ",1,NOP-1),TXT2=$P(TXT," ",NOP,999)
"RTN","ONCPTX",229,0)
 Q
"RTN","ONCPTX",230,0)
 ;
"RTN","ONCPTX",231,0)
UCASE ;Mixed case to upper case conversion
"RTN","ONCPTX",232,0)
 S X=$TR(X,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","ONCPTX",233,0)
 Q
"RTN","ONCPTX",234,0)
 ;
"RTN","ONCPTX",235,0)
EXIT ;KILL local varibles
"RTN","ONCPTX",236,0)
 K I,LEN,ONC,TOPX,TXGL,TXT,TXT1,TXT2,X
"RTN","ONCPTX",237,0)
 Q
"RTN","ONCPTX",238,0)
 ;
"RTN","ONCPTX",239,0)
CLEANUP ;Cleanup
"RTN","ONCPTX",240,0)
 K D0
"RTN","ONCTIME")
0^33^B15284666
"RTN","ONCTIME",1,0)
ONCTIME ;Hines OIFO/GWB [Timeliness report] ;11/01/10
"RTN","ONCTIME",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCTIME",3,0)
 ;
"RTN","ONCTIME",4,0)
TIME ;[Timeliness report]
"RTN","ONCTIME",5,0)
 K ^TMP("ONC",$J)
"RTN","ONCTIME",6,0)
 N DIC,SDT,EDT,IEN,CNT,LESCNT,GTRCNT,RPTDATE,DIVISION,ACO
"RTN","ONCTIME",7,0)
 N COC,NCRPT,BY,DHD,FLDS,FR,L,TO,DIRUT,EMTC,END,START,TIMEPCT,Y
"RTN","ONCTIME",8,0)
 W @IOF
"RTN","ONCTIME",9,0)
 W !?3,"Timeliness report",!
"RTN","ONCTIME",10,0)
 S %DT="AEX",%DT("A")="   Start Date of First Contact: "
"RTN","ONCTIME",11,0)
 D ^%DT K %DT
"RTN","ONCTIME",12,0)
 Q:Y<1  S START=Y,SDT=Y-1
"RTN","ONCTIME",13,0)
 S %DT="AEX",%DT("A")="   End Date of First Contact..: "
"RTN","ONCTIME",14,0)
 D ^%DT K %DT
"RTN","ONCTIME",15,0)
 Q:Y<1  S (END,EDT)=Y
"RTN","ONCTIME",16,0)
 W !
"RTN","ONCTIME",17,0)
 K DIR
"RTN","ONCTIME",18,0)
 S DIR("A")="   Analytic cases only"
"RTN","ONCTIME",19,0)
 S DIR("B")="YES"
"RTN","ONCTIME",20,0)
 S DIR(0)="Y"
"RTN","ONCTIME",21,0)
 S DIR("?")=" "
"RTN","ONCTIME",22,0)
 S DIR("?",1)=" Answer 'YES' if you want only analytic cases (CLASS OF CASE 0-2) counted."
"RTN","ONCTIME",23,0)
 S DIR("?",2)=" Answer  'NO' if you want all cases (analytic and non-analytic) counted."
"RTN","ONCTIME",24,0)
 D ^DIR
"RTN","ONCTIME",25,0)
 I $D(DIRUT) S OUT=1 Q
"RTN","ONCTIME",26,0)
 S ACO=Y
"RTN","ONCTIME",27,0)
 W !
"RTN","ONCTIME",28,0)
 K DIR
"RTN","ONCTIME",29,0)
 S DIR("A")="   Do you want to print a list of non-compliant cases"
"RTN","ONCTIME",30,0)
 S DIR("B")="YES"
"RTN","ONCTIME",31,0)
 S DIR(0)="Y"
"RTN","ONCTIME",32,0)
 S DIR("?")=" "
"RTN","ONCTIME",33,0)
 S DIR("?",1)=" Answer 'YES' if you want to include a list of non-compliant cases."
"RTN","ONCTIME",34,0)
 S DIR("?",2)=" Answer  'NO' if you want to only want the Timeliness Report."
"RTN","ONCTIME",35,0)
 D ^DIR
"RTN","ONCTIME",36,0)
 I $D(DIRUT) S OUT=1 Q
"RTN","ONCTIME",37,0)
 S NCRPT=Y
"RTN","ONCTIME",38,0)
 W !
"RTN","ONCTIME",39,0)
 N %ZIS,IOP,POP
"RTN","ONCTIME",40,0)
 S %ZIS="MQ"
"RTN","ONCTIME",41,0)
 D ^%ZIS  Q:$G(POP)
"RTN","ONCTIME",42,0)
 I $D(IO("Q")) D TASK G EXIT
"RTN","ONCTIME",43,0)
 U IO D COMP D ^%ZISC K %ZIS,IOP G EXIT
"RTN","ONCTIME",44,0)
 ;
"RTN","ONCTIME",45,0)
COMP S (CNT,LESCNT,GTRCNT)=0
"RTN","ONCTIME",46,0)
 F  S SDT=$O(^ONCO(165.5,"AFC",SDT)) Q:(SDT="")!(SDT>EDT)  S IEN=0 F  S IEN=$O(^ONCO(165.5,"AFC",SDT,IEN)) Q:IEN=""  I $$DIV^ONCFUNC(IEN)=DUZ(2) D
"RTN","ONCTIME",47,0)
 .S COC=$E($$GET1^DIQ(165.5,IEN,.04),1,2)
"RTN","ONCTIME",48,0)
 .I ACO=1,COC>22 Q
"RTN","ONCTIME",49,0)
 .;S EMTC=$$GET1^DIQ(165.5,IEN,157.1)
"RTN","ONCTIME",50,0)
 .S EMTC=$$GET1^DIQ(165.5,IEN,157)  ;P5
"RTN","ONCTIME",51,0)
 .I (EMTC["Unknown")!(EMTC["NA") Q
"RTN","ONCTIME",52,0)
 .S CNT=CNT+1
"RTN","ONCTIME",53,0)
 .I EMTC<184 S LESCNT=LESCNT+1
"RTN","ONCTIME",54,0)
 .I EMTC>183 S GTRCNT=GTRCNT+1 S ^TMP("ONC",$J,IEN)=""
"RTN","ONCTIME",55,0)
 I CNT=0 D  D:$E(IOST,1,2)="C-" PAUSE^ONCOPA2A G EXIT
"RTN","ONCTIME",56,0)
 .W !,?3,"No cases found in this date range.",!
"RTN","ONCTIME",57,0)
 S TIMEPCT=LESCNT/CNT
"RTN","ONCTIME",58,0)
 S TIMEPCT=$J(TIMEPCT,3,2)*100_"%"
"RTN","ONCTIME",59,0)
 S Y=DT D DD^%DT S RPTDATE=Y
"RTN","ONCTIME",60,0)
 S DIVISION=$P(^DIC(4,DUZ(2),0),U,1)
"RTN","ONCTIME",61,0)
 S Y=START D DD^%DT S START=Y
"RTN","ONCTIME",62,0)
 S Y=END D DD^%DT S END=Y
"RTN","ONCTIME",63,0)
 W !
"RTN","ONCTIME",64,0)
 W !?3,"TIMELINESS REPORT",?60,RPTDATE
"RTN","ONCTIME",65,0)
 W !
"RTN","ONCTIME",66,0)
 W !?3,"Start Date of First Contact.......: ",START
"RTN","ONCTIME",67,0)
 W !?3,"End Date of First Contact.........: ",END
"RTN","ONCTIME",68,0)
 W !?3,"Division..........................: ",DIVISION
"RTN","ONCTIME",69,0)
 W !?3,"Analytic cases only...............: ",$S(ACO=1:"YES",1:"NO")
"RTN","ONCTIME",70,0)
 W !?3,"Cases Completed within 183 days...: ",LESCNT  ;p5 change months to days
"RTN","ONCTIME",71,0)
 W !?3,"Cases Completed > 183 days........: ",GTRCNT
"RTN","ONCTIME",72,0)
 W !?3,"Pct of 'Completed' cases compliant: ",TIMEPCT
"RTN","ONCTIME",73,0)
 I $E(IOST,1,2)="C-" W ! D PAUSE^ONCOPA2A
"RTN","ONCTIME",74,0)
 I $G(NCRPT)=0 G CLOSE
"RTN","ONCTIME",75,0)
 W @IOF
"RTN","ONCTIME",76,0)
 S DIC="^ONCO(165.5,",L=0,L(0)=1
"RTN","ONCTIME",77,0)
 S FLDS="!61;C2;L5,155;C10;L10;""FIRST CONTACT"",90;C23;L10;""COMPLETED"",157;C36"
"RTN","ONCTIME",78,0)
 S BY="90"
"RTN","ONCTIME",79,0)
 S BY(0)="^TMP(""ONC"",$J,"
"RTN","ONCTIME",80,0)
 S (FR,TO)=""
"RTN","ONCTIME",81,0)
 S DHD="TIMELINESS NON-COMPLIANCE REPORT"
"RTN","ONCTIME",82,0)
 S IOP=ION
"RTN","ONCTIME",83,0)
 D EN1^DIP
"RTN","ONCTIME",84,0)
CLOSE D ^%ZISC
"RTN","ONCTIME",85,0)
 Q
"RTN","ONCTIME",86,0)
 ;
"RTN","ONCTIME",87,0)
TASK ;Queue a task
"RTN","ONCTIME",88,0)
 K IO("Q"),ZTUCI,ZTDTH,ZTIO,ZTSAVE
"RTN","ONCTIME",89,0)
 S ZTRTN="COMP^ONCTIME",ZTREQ="@",ZTSAVE("ZTREQ")=""
"RTN","ONCTIME",90,0)
 S ZTDESC="Timeliness Report"
"RTN","ONCTIME",91,0)
 S ZTSAVE("SDT")="",ZTSAVE("EDT")="",ZTSAVE("START")="",ZTSAVE("END")=""
"RTN","ONCTIME",92,0)
 S ZTSAVE("ACO")=""
"RTN","ONCTIME",93,0)
 S ZTSAVE("NCRPT")=""
"RTN","ONCTIME",94,0)
 D ^%ZTLOAD D ^%ZISC U IO W !,"Request Queued",!
"RTN","ONCTIME",95,0)
 K ZTSK
"RTN","ONCTIME",96,0)
 Q
"RTN","ONCTIME",97,0)
 ;
"RTN","ONCTIME",98,0)
EXIT ;Exit
"RTN","ONCTIME",99,0)
 K ^TMP("ONC",$J)
"RTN","ONCTIME",100,0)
 Q
"RTN","ONCTIME",101,0)
 ;
"RTN","ONCTIME",102,0)
CLEANUP ;Cleanup
"RTN","ONCTIME",103,0)
 K OUT,ZTDESC,ZTREQ,ZTRTN
"RTN","ONCUTX1")
0^29^B36437776
"RTN","ONCUTX1",1,0)
ONCUTX1 ;Hines OIFO/RTK; UNKNOWN TREATMENT STUFFING; 09/09/10
"RTN","ONCUTX1",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCUTX1",3,0)
 ;
"RTN","ONCUTX1",4,0)
NCDSATF ;SURG DX/STAGING PROC @FAC (165.5,58.4)
"RTN","ONCUTX1",5,0)
 S $P(^ONCO(165.5,D0,3.1),U,5)="09"
"RTN","ONCUTX1",6,0)
 S $P(^ONCO(165.5,D0,3.1),U,6)=9999999
"RTN","ONCUTX1",7,0)
 S DR="58.4;58.5" D DIQ1^ONCNTX
"RTN","ONCUTX1",8,0)
 W:$D(NTX) !,"SURG DX/STAGING PROC @FAC.....: "_ONC(165.5,DA,58.4,"E")
"RTN","ONCUTX1",9,0)
 W !,"SURG DX/STAGING PROC @FAC DATE: "_ONC(165.5,DA,58.5,"E")
"RTN","ONCUTX1",10,0)
 Q
"RTN","ONCUTX1",11,0)
 ;
"RTN","ONCUTX1",12,0)
SURATFR ;SURGERY OF PRIMARY @FAC (R) (165.5,50.2)
"RTN","ONCUTX1",13,0)
 D SGRP
"RTN","ONCUTX1",14,0)
 I $E(SGRP,3,4)=77 S SGRP=67422
"RTN","ONCUTX1",15,0)
 F SPS=0:0 S SPS=$O(^ONCO(164,SGRP,"SPS",SPS)) Q:$P(^ONCO(164,SGRP,"SPS",SPS,0),U,1)["Unknown;"
"RTN","ONCUTX1",16,0)
 S $P(^ONCO(165.5,DA,3.1),U,7)=$S(DATEDX>2971231:SPS,1:"00")
"RTN","ONCUTX1",17,0)
 N DI K ONC S DIC="^ONCO(165.5,",DA=DA,DIQ="ONC(",DIQ(0)="E"
"RTN","ONCUTX1",18,0)
 S DR=50.2 D EN^DIQ1
"RTN","ONCUTX1",19,0)
 W:$D(NTX) !,"SURGERY OF PRIMARY @FAC.....(R): "_ONC(165.5,DA,50.2,"E")
"RTN","ONCUTX1",20,0)
 Q
"RTN","ONCUTX1",21,0)
 ;
"RTN","ONCUTX1",22,0)
SURATF ;SURGERY OF PRIMARY @FAC (F) (165.5,58.7)
"RTN","ONCUTX1",23,0)
 D SGRP
"RTN","ONCUTX1",24,0)
 F SPS=0:0 S SPS=$O(^ONCO(164,SGRP,"SPS",SPS)) Q:$P(^ONCO(164,SGRP,"SPS",SPS,0),U,1)["Unknown;"
"RTN","ONCUTX1",25,0)
 S $P(^ONCO(165.5,DA,3.1),U,30)=SPS
"RTN","ONCUTX1",26,0)
 S $P(^ONCO(165.5,DA,3.1),U,8)=9999999
"RTN","ONCUTX1",27,0)
 S $P(^ONCO(165.5,DA,2.3),U,4)=9
"RTN","ONCUTX1",28,0)
 N DI K ONC S DIC="^ONCO(165.5,",DA=DA,DIQ="ONC(",DIQ(0)="E"
"RTN","ONCUTX1",29,0)
 S DR="58.7;50.3;234" D EN^DIQ1
"RTN","ONCUTX1",30,0)
 W:$D(NTX) !,"SURGERY OF PRIMARY @FAC.....(F): "_ONC(165.5,DA,58.7,"E")
"RTN","ONCUTX1",31,0)
 W !,"APPROACH.......................: "_ONC(165.5,DA,234,"E")
"RTN","ONCUTX1",32,0)
 W !,"MOST DEFINITIVE SURG @FAC DATE.: "_ONC(165.5,DA,50.3,"E")
"RTN","ONCUTX1",33,0)
 Q
"RTN","ONCUTX1",34,0)
 ;
"RTN","ONCUTX1",35,0)
NODATFR ;SCOPE OF LN SURGERY @FAC (R) (165.5,138.1)
"RTN","ONCUTX1",36,0)
 D SGRP
"RTN","ONCUTX1",37,0)
 I ($E(TPG,3,4)=76)!(TPG=67809)!(TPG=67420)!(TPG=67421)!(TPG=67423)!(TPG=67424) S SGRP=67141
"RTN","ONCUTX1",38,0)
 F SC=0:0 S SC=$O(^ONCO(164,SGRP,"SC5",SC)) Q:SC="B"  S LAST=SC
"RTN","ONCUTX1",39,0)
 S $P(^ONCO(165.5,DA,3.1),U,9)=LAST
"RTN","ONCUTX1",40,0)
 S $P(^ONCO(165.5,D0,3.1),U,11)=99
"RTN","ONCUTX1",41,0)
 N DI K ONC S DIC="^ONCO(165.5,",DA=DA,DIQ="ONC(",DIQ(0)="E"
"RTN","ONCUTX1",42,0)
 S DR="138.1;140.1" D DIQ1^ONCNTX
"RTN","ONCUTX1",43,0)
 W:$D(NTX) !,"SCOPE OF LN SURGERY @FAC....(R): "_ONC(165.5,DA,138.1,"E")
"RTN","ONCUTX1",44,0)
 W !,"NUMBER OF LN REMOVED @FAC...(R): "_ONC(165.5,DA,140.1,"E")
"RTN","ONCUTX1",45,0)
 Q
"RTN","ONCUTX1",46,0)
 ;
"RTN","ONCUTX1",47,0)
NODEATF ;SCOPE OF LN SURGERY @FAC (F) (165.5,138.5)
"RTN","ONCUTX1",48,0)
 D SGRP
"RTN","ONCUTX1",49,0)
 S $P(^ONCO(165.5,DA,3.1),U,32)=9
"RTN","ONCUTX1",50,0)
 S $P(^ONCO(165.5,DA,3.1),U,23)="0000000"
"RTN","ONCUTX1",51,0)
 N DI K ONC S DIC="^ONCO(165.5,",DA=DA,DIQ="ONC(",DIQ(0)="E"
"RTN","ONCUTX1",52,0)
 S DR="138.5;138.3" D DIQ1^ONCNTX
"RTN","ONCUTX1",53,0)
 W:$D(NTX) !,"SCOPE OF LN SURGERY @FAC....(F): "_ONC(165.5,DA,138.5,"E")
"RTN","ONCUTX1",54,0)
 W !,"SCOPE OF LN SURGERY @FAC DATE..: "_ONC(165.5,DA,138.3,"E")
"RTN","ONCUTX1",55,0)
 Q
"RTN","ONCUTX1",56,0)
 ;
"RTN","ONCUTX1",57,0)
SOSATFR ;SURG PROC/OTHER SITE @FAC (R) (165.5,139.1)
"RTN","ONCUTX1",58,0)
 D SGRP
"RTN","ONCUTX1",59,0)
 F SO=0:0 S SO=$O(^ONCO(164,SGRP,"SO5",SO)) Q:SO="B"  S LAST=SO
"RTN","ONCUTX1",60,0)
 S $P(^ONCO(165.5,DA,3.1),U,10)=$S(DATEDX>2971231:LAST,1:"")
"RTN","ONCUTX1",61,0)
 S DR=139.1 D DIQ1^ONCNTX
"RTN","ONCUTX1",62,0)
 W:$D(NTX) !,"SURG PROC/OTHER SIT @FAC...(R): "_ONC(165.5,DA,139.1,"E")
"RTN","ONCUTX1",63,0)
 Q
"RTN","ONCUTX1",64,0)
 ;
"RTN","ONCUTX1",65,0)
SOSNATF ;SURG PROC/OTHER SITE @FAC (F) (165.5,139.5)
"RTN","ONCUTX1",66,0)
 S $P(^ONCO(165.5,DA,3.1),U,34)=9
"RTN","ONCUTX1",67,0)
 S $P(^ONCO(165.5,D0,3.1),U,25)=9999999
"RTN","ONCUTX1",68,0)
 S DR="139.5;139.3" D DIQ1^ONCNTX
"RTN","ONCUTX1",69,0)
 W:$D(NTX) !,"SURGICAL PROC/OTHER SITE @FAC..: "_ONC(165.5,DA,139.5,"E")
"RTN","ONCUTX1",70,0)
 W !,"SURG PROC/OTHER SITE @FAC DATE.: "_ONC(165.5,DA,139.3,"E")
"RTN","ONCUTX1",71,0)
 Q
"RTN","ONCUTX1",72,0)
 ;
"RTN","ONCUTX1",73,0)
RADATF ;RADIATION @FAC (165.5,51.4)
"RTN","ONCUTX1",74,0)
 S $P(^ONCO(165.5,DA,3.1),U,12)=9
"RTN","ONCUTX1",75,0)
 S $P(^ONCO(165.5,DA,3.1),U,13)=9999999
"RTN","ONCUTX1",76,0)
 S DR="51.4;51.5" D DIQ1^ONCNTX
"RTN","ONCUTX1",77,0)
 W:$D(NTX) !,"RADIATION @FAC.................: "_ONC(165.5,DA,51.4,"E")
"RTN","ONCUTX1",78,0)
 W !,"RADIATION @FAC DATE............: ",ONC(165.5,DA,51.5,"E")
"RTN","ONCUTX1",79,0)
 Q
"RTN","ONCUTX1",80,0)
 ;
"RTN","ONCUTX1",81,0)
CHEMATF ;CHEMOTHERAPY @FAC (165.5,53.3)
"RTN","ONCUTX1",82,0)
 I $G(XX)=88 D
"RTN","ONCUTX1",83,0)
 .S $P(^ONCO(165.5,DA,3.1),U,14)=88
"RTN","ONCUTX1",84,0)
 .S $P(^ONCO(165.5,DA,3.1),U,15)=8888888
"RTN","ONCUTX1",85,0)
 I $G(XX)=99 D
"RTN","ONCUTX1",86,0)
 .S $P(^ONCO(165.5,DA,3.1),U,14)=99
"RTN","ONCUTX1",87,0)
 .S $P(^ONCO(165.5,DA,3.1),U,15)=9999999
"RTN","ONCUTX1",88,0)
 S DR="53.3;53.4" D DIQ1^ONCNTX
"RTN","ONCUTX1",89,0)
 W:$D(NTX) !,"CHEMOTHERAPY @FAC..............: "_ONC(165.5,DA,53.3,"E")
"RTN","ONCUTX1",90,0)
 W !,"CHEMOTHERAPY @FAC DATE.........: ",ONC(165.5,DA,53.4,"E")
"RTN","ONCUTX1",91,0)
 Q
"RTN","ONCUTX1",92,0)
 ;
"RTN","ONCUTX1",93,0)
HTATF ;HORMONE THERAPY @FAC (165.5,54.3)
"RTN","ONCUTX1",94,0)
 I $G(XX)=88 D
"RTN","ONCUTX1",95,0)
 .S $P(^ONCO(165.5,DA,3.1),U,16)=88
"RTN","ONCUTX1",96,0)
 .S $P(^ONCO(165.5,DA,3.1),U,17)=8888888
"RTN","ONCUTX1",97,0)
 I $G(XX)=99 D
"RTN","ONCUTX1",98,0)
 .S $P(^ONCO(165.5,DA,3.1),U,16)=99
"RTN","ONCUTX1",99,0)
 .S $P(^ONCO(165.5,DA,3.1),U,17)=9999999
"RTN","ONCUTX1",100,0)
 S DR="54.3;54.4" D DIQ1^ONCNTX
"RTN","ONCUTX1",101,0)
 W:$D(NTX) !,"HORMONE THERAPY @FAC...........: "_ONC(165.5,DA,54.3,"E")
"RTN","ONCUTX1",102,0)
 W !,"HORMONE THERAPY @FAC DATE......: ",ONC(165.5,DA,54.4,"E")
"RTN","ONCUTX1",103,0)
 Q
"RTN","ONCUTX1",104,0)
 ;
"RTN","ONCUTX1",105,0)
IMMATF ;IMMUNOTHERAPY @FAC (165.5,55.3)
"RTN","ONCUTX1",106,0)
 I $G(XX)=88 D
"RTN","ONCUTX1",107,0)
 .S $P(^ONCO(165.5,DA,3.1),U,18)=88
"RTN","ONCUTX1",108,0)
 .S $P(^ONCO(165.5,DA,3.1),U,19)=8888888
"RTN","ONCUTX1",109,0)
 I $G(XX)=99 D
"RTN","ONCUTX1",110,0)
 .S $P(^ONCO(165.5,DA,3.1),U,18)=99
"RTN","ONCUTX1",111,0)
 .S $P(^ONCO(165.5,DA,3.1),U,19)=9999999
"RTN","ONCUTX1",112,0)
 S DR="55.3;55.4" D DIQ1^ONCNTX
"RTN","ONCUTX1",113,0)
 W:$D(NTX) !,"IMMUNOTHERAPY @FAC.............: "_ONC(165.5,DA,55.3,"E")
"RTN","ONCUTX1",114,0)
 W !,"IMMUNOTHERAPY @FAC DATE........: ",ONC(165.5,DA,55.4,"E")
"RTN","ONCUTX1",115,0)
 Q
"RTN","ONCUTX1",116,0)
 ;
"RTN","ONCUTX1",117,0)
HTEPATF ;HEMA TRANS/ENDOCRINE PROC @FAC (165.5,153.2)
"RTN","ONCUTX1",118,0)
 I $G(XX)=88 D
"RTN","ONCUTX1",119,0)
 .S $P(^ONCO(165.5,DA,3.2),U,2)=88
"RTN","ONCUTX1",120,0)
 .S $P(^ONCO(165.5,DA,3.2),U,3)=8888888
"RTN","ONCUTX1",121,0)
 I $G(XX)=99 D
"RTN","ONCUTX1",122,0)
 .S $P(^ONCO(165.5,DA,3.2),U,2)=99
"RTN","ONCUTX1",123,0)
 .S $P(^ONCO(165.5,DA,3.2),U,3)=9999999
"RTN","ONCUTX1",124,0)
 S DR="153.2;153.3" D DIQ1^ONCNTX
"RTN","ONCUTX1",125,0)
 W:$D(NTX) !,"HEMA TRANS/ENDOCRINE PROC @FAC.............: "_ONC(165.5,DA,153.2,"E")
"RTN","ONCUTX1",126,0)
 W !,"HEMA TRANS/ENDOCRINE @FAC DATE........: ",ONC(165.5,DA,153.3,"E")
"RTN","ONCUTX1",127,0)
 Q
"RTN","ONCUTX1",128,0)
 ;
"RTN","ONCUTX1",129,0)
OTHATF ;OTHER TREATMENT @FAC (165.5,57.3)
"RTN","ONCUTX1",130,0)
 I $G(X)'=8 S $P(^ONCO(165.5,DA,3.1),U,20)=9
"RTN","ONCUTX1",131,0)
 S $P(^ONCO(165.5,DA,3.1),U,21)=9999999
"RTN","ONCUTX1",132,0)
 S DR="57.3;57.4" D DIQ1^ONCNTX
"RTN","ONCUTX1",133,0)
 W:$D(NTX) !,"OTHER TREATMENT @FAC...........: "_ONC(165.5,DA,57.3,"E")
"RTN","ONCUTX1",134,0)
 W !,"OTHER TREATMENT @FAC DATE......: ",ONC(165.5,DA,57.4,"E")
"RTN","ONCUTX1",135,0)
 Q
"RTN","ONCUTX1",136,0)
 ;
"RTN","ONCUTX1",137,0)
CHKPRIM ;If Primary Site UNKNOWN, BRAIN, HEMATOPOIETIC or LEUKEMIA,
"RTN","ONCUTX1",138,0)
 ;stuff SCOPE OF LN SURGERY (R) (165.5,138) and
"RTN","ONCUTX1",139,0)
 ;      SCOPE OF LN SURGERY (F) (165.5,138.4) with 9s
"RTN","ONCUTX1",140,0)
CHKPRMR ;ROADS
"RTN","ONCUTX1",141,0)
 S SITE=$P(^ONCO(165.5,DA,0),U,1)
"RTN","ONCUTX1",142,0)
 I (SITE=35)!(SITE=58)!(SITE=63)!(SITE=65)!($$LYMPHOMA^ONCFUNC(DA)=1) D
"RTN","ONCUTX1",143,0)
 .D SGRP
"RTN","ONCUTX1",144,0)
 .I ($E(TPG,3,4)=76)!(TPG=67809)!(TPG=67420)!(TPG=67421)!(TPG=67423)!(TPG=67424) S SGRP=67141
"RTN","ONCUTX1",145,0)
 .F SC=0:0 S SC=$O(^ONCO(164,SGRP,"SC5",SC)) Q:SC="B"  S LAST=SC
"RTN","ONCUTX1",146,0)
 .S $P(^ONCO(165.5,DA,3),U,40)=LAST
"RTN","ONCUTX1",147,0)
 .W !,"SCOPE OF LN SURGERY.........(R): ",$P(^ONCO(164,SGRP,"SC5",LAST,0),U)
"RTN","ONCUTX1",148,0)
 .D NODER^ONCUTX W !
"RTN","ONCUTX1",149,0)
 .S NTX=1 D NODATFR K NTX
"RTN","ONCUTX1",150,0)
 .S Y="@139"
"RTN","ONCUTX1",151,0)
 Q
"RTN","ONCUTX1",152,0)
 ;
"RTN","ONCUTX1",153,0)
CHKPRMF ;SCOPE OF LN SURGERY (F) (165.5,138.4) Code 9 stuffing
"RTN","ONCUTX1",154,0)
 ;FORDS pages 138-139
"RTN","ONCUTX1",155,0)
 S TOP=$P($G(^ONCO(165.5,DA,2)),U,1)
"RTN","ONCUTX1",156,0)
 S MO=$$HIST^ONCFUNC(DA)
"RTN","ONCUTX1",157,0)
 I ($E(TOP,1,4)=6770)!($E(TOP,1,4)=6771)!($E(TOP,1,4)=6772)!($E(TOP,1,4)=6776)!(($$LYMPHOMA^ONCFUNC(DA)=1)&($E(TOP,1,4)=6777))!($E(TOP,1,4)=6776)!(TOP=67809)!(TOP=67420)!(TOP=67421)!(TOP=67423)!(TOP=67424)!((MO'<97310)&(MO'>99899)) D
"RTN","ONCUTX1",158,0)
 .S $P(^ONCO(165.5,DA,3.1),U,31)=9
"RTN","ONCUTX1",159,0)
 .W !,"SCOPE OF LN SURGERY.........(F): Unknown/NA"
"RTN","ONCUTX1",160,0)
 .D NODE^ONCUTX W !
"RTN","ONCUTX1",161,0)
 .S NTX=1 D NODEATF K NTX
"RTN","ONCUTX1",162,0)
 .S Y="@46"
"RTN","ONCUTX1",163,0)
 Q
"RTN","ONCUTX1",164,0)
 ;
"RTN","ONCUTX1",165,0)
SGRP S TPG=$P($G(^ONCO(165.5,D0,2)),U,1)
"RTN","ONCUTX1",166,0)
 S SGRP=$P($G(^ONCO(164,TPG,0)),U,16)
"RTN","ONCUTX1",167,0)
 ;pre-2003 C76.0-C76.8, C80.9 cases
"RTN","ONCUTX1",168,0)
 ;see ROADS page D-cxliii
"RTN","ONCUTX1",169,0)
 I DATEDX<3030000,($E(TPG,3,4)=76)!(TPG=67809) S SGRP=67141
"RTN","ONCUTX1",170,0)
 Q
"RTN","ONCUTX1",171,0)
 ;
"RTN","ONCUTX1",172,0)
CLEANUP ;Cleanup
"RTN","ONCUTX1",173,0)
 K D0,DA,DATEDX,DIC,DIQ,DR,LAST,MO,SC,SGRP,SITE,SO,SPS,TOP,TPG,X,XX,Y
"RTN","ONCX10")
0^17^B13514830
"RTN","ONCX10",1,0)
ONCX10 ;HCIOFO/SG - HTTP 1.0 CLIENT ; 6/20/06 9:29am
"RTN","ONCX10",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCX10",3,0)
 ;
"RTN","ONCX10",4,0)
 Q
"RTN","ONCX10",5,0)
 ;
"RTN","ONCX10",6,0)
 ;***** GETS THE DATA FROM THE PROVIDED URL USING HTTP 1.0
"RTN","ONCX10",7,0)
 ;
"RTN","ONCX10",8,0)
 ; URL           URL (http://host:port/path)
"RTN","ONCX10",9,0)
 ;
"RTN","ONCX10",10,0)
 ; [ONC8FLG]     Timeout and flags to control processing
"RTN","ONCX10",11,0)
 ;                 If a value of  this parameter starts from a number 
"RTN","ONCX10",12,0)
 ;                 then this number is used as a value of the timeout 
"RTN","ONCX10",13,0)
 ;                 (in seconds). Otherwise, the default value of 3
"RTN","ONCX10",14,0)
 ;                 seconds is used.
"RTN","ONCX10",15,0)
 ;
"RTN","ONCX10",16,0)
 ; [ONC8RDAT]    Closed root of the variable where the message
"RTN","ONCX10",17,0)
 ;               body is returned. Data is stored in consecutive
"RTN","ONCX10",18,0)
 ;               nodes (numbers starting from 1). If a line is
"RTN","ONCX10",19,0)
 ;               longer than 245 characters, only 245 characters
"RTN","ONCX10",20,0)
 ;               are stored in the corresponding node. After that,
"RTN","ONCX10",21,0)
 ;               overflow sub-nodes are created. For example:
"RTN","ONCX10",22,0)
 ;
"RTN","ONCX10",23,0)
 ;                 @ONC8DATA@(1)="<html>"
"RTN","ONCX10",24,0)
 ;                 @ONC8DATA@(2)="<head><title>VistA</title></head>"
"RTN","ONCX10",25,0)
 ;                 @ONC8DATA@(3)="<body>"
"RTN","ONCX10",26,0)
 ;                 @ONC8DATA@(4)="<p>"
"RTN","ONCX10",27,0)
 ;                 @ONC8DATA@(5)="Beginning of a very long line"
"RTN","ONCX10",28,0)
 ;                 @ONC8DATA@(5,1)="Continuation #1 of the long line"
"RTN","ONCX10",29,0)
 ;                 @ONC8DATA@(5,2)="Continuation #2 of the long line"
"RTN","ONCX10",30,0)
 ;                 @ONC8DATA@(5,...)=...
"RTN","ONCX10",31,0)
 ;                 @ONC8DATA@(6)="</p>"
"RTN","ONCX10",32,0)
 ;                 ...
"RTN","ONCX10",33,0)
 ;
"RTN","ONCX10",34,0)
 ; [.ONC8RHDR]   Reference to a local variable where the parsed
"RTN","ONCX10",35,0)
 ;               headers are returned. Header names are converted to
"RTN","ONCX10",36,0)
 ;               upper case; the values are left "as is". The root
"RTN","ONCX10",37,0)
 ;               node contains the status line. For example:
"RTN","ONCX10",38,0)
 ;
"RTN","ONCX10",39,0)
 ;                 ONC8HDR="HTTP/1.0 200 OK"
"RTN","ONCX10",40,0)
 ;                 ONC8HDR("CACHE-CONTROL")="private"
"RTN","ONCX10",41,0)
 ;                 ONC8HDR("CONNECTION")="Keep-Alive"
"RTN","ONCX10",42,0)
 ;                 ONC8HDR("CONTENT-LENGTH")="2690"
"RTN","ONCX10",43,0)
 ;                 ONC8HDR("CONTENT-TYPE")="text/html"
"RTN","ONCX10",44,0)
 ;                 ONC8HDR("DATE")="Fri, 26 Sep 2003 16:04:10 GMT"
"RTN","ONCX10",45,0)
 ;                 ONC8HDR("SERVER")="GWS/2.1"
"RTN","ONCX10",46,0)
 ;
"RTN","ONCX10",47,0)
 ; [ONC8SDAT]    Closed root of a variable containing body of the
"RTN","ONCX10",48,0)
 ;               request message. Data should be formatted as
"RTN","ONCX10",49,0)
 ;               described earlier (see the ONC8RDAT parameter).
"RTN","ONCX10",50,0)
 ;
"RTN","ONCX10",51,0)
 ;         NOTE: If this parameter is defined, not empty, and the
"RTN","ONCX10",52,0)
 ;               referenced array contains data then the POST request
"RTN","ONCX10",53,0)
 ;               is generated. Otherwise, the GET request is sent.
"RTN","ONCX10",54,0)
 ;
"RTN","ONCX10",55,0)
 ; [.ONC8SHDR]   Reference to a local variable containing header
"RTN","ONCX10",56,0)
 ;               values, which will be added to the request.
"RTN","ONCX10",57,0)
 ;
"RTN","ONCX10",58,0)
 ; [REDIR]       This IS NOT a published parameter. It is used
"RTN","ONCX10",59,0)
 ;               internally to limit number of redirections.
"RTN","ONCX10",60,0)
 ;
"RTN","ONCX10",61,0)
 ; Return values:
"RTN","ONCX10",62,0)
 ;
"RTN","ONCX10",63,0)
 ;       <0  Error Descriptor
"RTN","ONCX10",64,0)
 ;           (see the $$ERROR^ONCXERR for descriptor structure
"RTN","ONCX10",65,0)
 ;            and the MSGLIST^ONCXERR for list of error)
"RTN","ONCX10",66,0)
 ;
"RTN","ONCX10",67,0)
 ;       >0  HTTP Status Code^Description
"RTN","ONCX10",68,0)
 ;
"RTN","ONCX10",69,0)
 ;    Most common HTTP status codes:
"RTN","ONCX10",70,0)
 ;
"RTN","ONCX10",71,0)
 ;      200  Ok
"RTN","ONCX10",72,0)
 ;
"RTN","ONCX10",73,0)
 ;      301  Moved Permanently (The application should either
"RTN","ONCX10",74,0)
 ;           automatically update the URL with the new one from
"RTN","ONCX10",75,0)
 ;           the Location response header or instruct the user
"RTN","ONCX10",76,0)
 ;           how to do this).
"RTN","ONCX10",77,0)
 ;
"RTN","ONCX10",78,0)
 ;      302  Moved Temporarily (The application should continue
"RTN","ONCX10",79,0)
 ;           using the original URL).
"RTN","ONCX10",80,0)
 ;
"RTN","ONCX10",81,0)
 ;           NOTE: You will not see this code for GET requests.
"RTN","ONCX10",82,0)
 ;                 They are redirected automatically.
"RTN","ONCX10",83,0)
 ;
"RTN","ONCX10",84,0)
 ;      303  See Other (The resource has moved to another URL
"RTN","ONCX10",85,0)
 ;           given by the Location response header, and should
"RTN","ONCX10",86,0)
 ;           be automatically retrieved by the client using the
"RTN","ONCX10",87,0)
 ;           GET method. This is often used by a CGI script to
"RTN","ONCX10",88,0)
 ;           redirect the client to an existing file).
"RTN","ONCX10",89,0)
 ;
"RTN","ONCX10",90,0)
 ;           NOTE: You will not see this status code because it
"RTN","ONCX10",91,0)
 ;                 is handled automatically inside the function.
"RTN","ONCX10",92,0)
 ;
"RTN","ONCX10",93,0)
 ;      400  Bad Request
"RTN","ONCX10",94,0)
 ;
"RTN","ONCX10",95,0)
 ;      404  Not Found
"RTN","ONCX10",96,0)
 ;
"RTN","ONCX10",97,0)
 ;      500  Server Error (An unexpected server error. The most
"RTN","ONCX10",98,0)
 ;           common cause is a server-side script that has bad
"RTN","ONCX10",99,0)
 ;           syntax, fails, or otherwise can't run correctly).
"RTN","ONCX10",100,0)
 ;
"RTN","ONCX10",101,0)
 ; See the http://www.faqs.org/rfcs/rfc1945.html for more details.
"RTN","ONCX10",102,0)
 ;
"RTN","ONCX10",103,0)
GETURL(URL,ONC8FLG,ONC8RDAT,ONC8RHDR,ONC8SDAT,ONC8SHDR,REDIR) ;
"RTN","ONCX10",104,0)
 N $ESTACK,$ETRAP,HOST,I,IP,IPADDR,PATH,PORT,RQS,STATUS,X
"RTN","ONCX10",105,0)
 S ONC8FLG=$G(ONC8FLG)  S:ONC8FLG'?1.N.E ONC8FLG="3"_ONC8FLG
"RTN","ONCX10",106,0)
 S I=$$PARSE^ONCXURL(URL,.HOST,.PORT,.PATH)  Q:I<0 I
"RTN","ONCX10",107,0)
 ;--- Check the host name/address
"RTN","ONCX10",108,0)
 I $$VALIDATE^XLFIPV(HOST)'=1  D  Q:IPADDR="" $$ERROR^ONCXERR(-2,,HOST)
"RTN","ONCX10",109,0)
 . ;--- Resolve the host name into IP address(es)
"RTN","ONCX10",110,0)
 . S IPADDR=$$ADDRESS^XLFNSLK(HOST)  Q:IPADDR=""
"RTN","ONCX10",111,0)
 . ;--- Check for the Host header value
"RTN","ONCX10",112,0)
 . S I=""
"RTN","ONCX10",113,0)
 . F  S I=$O(ONC8SHDR(I))  Q:(I="")!($$UP^XLFSTR(I)="HOST")
"RTN","ONCX10",114,0)
 . S:I="" ONC8SHDR("Host")=HOST
"RTN","ONCX10",115,0)
 E  S IPADDR=HOST
"RTN","ONCX10",116,0)
 ;--- Connect to the host
"RTN","ONCX10",117,0)
 F I=1:1  S IP=$P(IPADDR,",",I)  Q:IP=""  D  Q:'$G(POP)
"RTN","ONCX10",118,0)
 . D CALL^%ZISTCP(IP,PORT,+ONC8FLG)
"RTN","ONCX10",119,0)
 Q:$G(POP) $$ERROR^ONCXERR(-3,,IPADDR)
"RTN","ONCX10",120,0)
 ;--- Perform the transaction
"RTN","ONCX10",121,0)
 K STATUS  D  S:'$D(STATUS) STATUS=$$ERROR^ONCXERR(-6)
"RTN","ONCX10",122,0)
 . ;--- Setup the error processing
"RTN","ONCX10",123,0)
 . S X="ERRTRAP^ONCX10",@^%ZOSF("TRAP"),$ETRAP=""
"RTN","ONCX10",124,0)
 . ;--- Send the request and get the response
"RTN","ONCX10",125,0)
 . S RQS=$$REQUEST^ONCX10A(PATH,$G(ONC8SDAT),.ONC8SHDR)
"RTN","ONCX10",126,0)
 . I RQS<0  S STATUS=RQS  Q
"RTN","ONCX10",127,0)
 . S STATUS=$$RECEIVE^ONCX10A(+ONC8FLG,$G(ONC8RDAT),.ONC8RHDR)
"RTN","ONCX10",128,0)
 ;--- Close the socket
"RTN","ONCX10",129,0)
 D CLOSE^%ZISTCP
"RTN","ONCX10",130,0)
 ;--- Redirect if requested by the server
"RTN","ONCX10",131,0)
 S I=+STATUS
"RTN","ONCX10",132,0)
 I (I\100)=3  D:$S(I=303:1,I=301:0,1:RQS="GET")
"RTN","ONCX10",133,0)
 . I $G(REDIR)>5  S STATUS=$$ERROR^ONCXERR(-5)  Q
"RTN","ONCX10",134,0)
 . S URL=$G(ONC8RHDR("LOCATION"))
"RTN","ONCX10",135,0)
 . I URL=""  S STATUS=$$ERROR^ONCXERR(-4)  Q
"RTN","ONCX10",136,0)
 . I RQS="POST"  N ONC8SDAT  ; Force the GET request
"RTN","ONCX10",137,0)
 . S STATUS=$$GETURL(URL,ONC8FLG,$G(ONC8RDAT),.ONC8RHDR,$G(ONC8SDAT),.ONC8SHDR,$G(REDIR)+1)
"RTN","ONCX10",138,0)
 ;--- Return the status
"RTN","ONCX10",139,0)
 Q STATUS
"RTN","ONCX10",140,0)
 ;
"RTN","ONCX10",141,0)
ERRTRAP D @^%ZOSF("ERRTN")  Q
"RTN","ONCXURL")
0^18^B3753041
"RTN","ONCXURL",1,0)
ONCXURL ;HCIOFO/SG - HTTP AND WEB SERVICES (URL TOOLS) ; 5/14/04 11:00am
"RTN","ONCXURL",2,0)
 ;;2.2;ONCOLOGY;**1,5**;Jul 31, 2013;Build 6
"RTN","ONCXURL",3,0)
 ;
"RTN","ONCXURL",4,0)
 Q
"RTN","ONCXURL",5,0)
 ;
"RTN","ONCXURL",6,0)
 ;***** CREATES URL FROM COMPONENTS
"RTN","ONCXURL",7,0)
 ;
"RTN","ONCXURL",8,0)
 ; HOST          Host name
"RTN","ONCXURL",9,0)
 ; [PORT]        Port number (80, by default)
"RTN","ONCXURL",10,0)
 ; [PATH]        Resource path ("/", by default)
"RTN","ONCXURL",11,0)
 ;
"RTN","ONCXURL",12,0)
 ; [.QUERY]      Reference to a local variable containing values of
"RTN","ONCXURL",13,0)
 ;               the query parameters: QUERY(Name)=Value.
"RTN","ONCXURL",14,0)
 ;
"RTN","ONCXURL",15,0)
 ; Return values:
"RTN","ONCXURL",16,0)
 ;       <0  Error Descriptor
"RTN","ONCXURL",17,0)
 ;      ...  Resulting URL
"RTN","ONCXURL",18,0)
 ;
"RTN","ONCXURL",19,0)
CREATE(HOST,PORT,PATH,QUERY) ;
"RTN","ONCXURL",20,0)
 N NAME,QSTR,VAL
"RTN","ONCXURL",21,0)
 S:HOST'["://" HOST="http://"_HOST
"RTN","ONCXURL",22,0)
 S PORT=$S($G(PORT)>0:":"_(+PORT),1:"")
"RTN","ONCXURL",23,0)
 ;---
"RTN","ONCXURL",24,0)
 S (NAME,QSTR)=""
"RTN","ONCXURL",25,0)
 F  S NAME=$O(QUERY(NAME))  Q:NAME=""  D
"RTN","ONCXURL",26,0)
 . S VAL=$G(QUERY(NAME))
"RTN","ONCXURL",27,0)
 . S QSTR=QSTR_"&"_$$ENCODE(NAME)_"="_$$ENCODE(VAL)
"RTN","ONCXURL",28,0)
 S:QSTR'="" $E(QSTR,1)="?"
"RTN","ONCXURL",29,0)
 ;---
"RTN","ONCXURL",30,0)
 Q HOST_PORT_$$PATH($G(PATH)_QSTR)
"RTN","ONCXURL",31,0)
 ;
"RTN","ONCXURL",32,0)
 ;***** ENCODES THE STRING
"RTN","ONCXURL",33,0)
 ;
"RTN","ONCXURL",34,0)
 ; STR           String to be encoded
"RTN","ONCXURL",35,0)
 ;
"RTN","ONCXURL",36,0)
ENCODE(STR) ;
"RTN","ONCXURL",37,0)
 N CH,I
"RTN","ONCXURL",38,0)
 F I=1:1  S CH=$E(STR,I)  Q:CH=""  I CH?1CP  D
"RTN","ONCXURL",39,0)
 . I CH=" "  S $E(STR,I)="+"  Q
"RTN","ONCXURL",40,0)
 . S $E(STR,I)="%"_$$RJ^XLFSTR($$CNV^XLFUTL($A(CH),16),2,"0"),I=I+2
"RTN","ONCXURL",41,0)
 Q STR
"RTN","ONCXURL",42,0)
 ;
"RTN","ONCXURL",43,0)
 ;***** PARSES THE URL INTO COMPONENTS
"RTN","ONCXURL",44,0)
 ;
"RTN","ONCXURL",45,0)
 ; URL           Source URL
"RTN","ONCXURL",46,0)
 ;
"RTN","ONCXURL",47,0)
 ; .HOST         Reference to a local variable for the host name
"RTN","ONCXURL",48,0)
 ; .PORT         Reference to a local variable for the port number
"RTN","ONCXURL",49,0)
 ; .PATH         Reference to a local variable for the path
"RTN","ONCXURL",50,0)
 ;
"RTN","ONCXURL",51,0)
 ; Return values:
"RTN","ONCXURL",52,0)
 ;       <0  Error Descriptor
"RTN","ONCXURL",53,0)
 ;        0  Ok
"RTN","ONCXURL",54,0)
 ;
"RTN","ONCXURL",55,0)
PARSE(URL,HOST,PORT,PATH) ;
"RTN","ONCXURL",56,0)
 S:$F(URL,"://") URL=$P(URL,"://",2,999)
"RTN","ONCXURL",57,0)
 S HOST=$TR($P(URL,"/")," ")
"RTN","ONCXURL",58,0)
 S PATH=$$PATH($P(URL,"/",2,999))
"RTN","ONCXURL",59,0)
 I HOST["."  D
"RTN","ONCXURL",60,0)
 .S PORT=$P(HOST,":",2),HOST=$P(HOST,":")
"RTN","ONCXURL",61,0)
 E  S PORT=$P(HOST,"]:",2),HOST=$P($P(HOST,"]:"),"[",2)
"RTN","ONCXURL",62,0)
 Q:HOST?." " $$ERROR^ONCXERR(-1,,URL)
"RTN","ONCXURL",63,0)
 S:PORT'>0 PORT=80
"RTN","ONCXURL",64,0)
 Q 0
"RTN","ONCXURL",65,0)
 ;
"RTN","ONCXURL",66,0)
 ;***** DEFAULT PATH PROCESSING (NORMALIZATION)
"RTN","ONCXURL",67,0)
 ;
"RTN","ONCXURL",68,0)
 ; PATH          Source path
"RTN","ONCXURL",69,0)
 ;
"RTN","ONCXURL",70,0)
PATH(PATH) ;
"RTN","ONCXURL",71,0)
 N LAST
"RTN","ONCXURL",72,0)
 ;--- Make sure the path has a leading slash if it
"RTN","ONCXURL",73,0)
 ;--- is not empty and has no query string
"RTN","ONCXURL",74,0)
 I $E(PATH,1)'="/"  S:$E(PATH,1)'="?" PATH="/"_PATH
"RTN","ONCXURL",75,0)
 ;--- Append a trailing slash to the path if it has
"RTN","ONCXURL",76,0)
 ;--- neither a file name nor a query string
"RTN","ONCXURL",77,0)
 S LAST=$L(PATH,"/"),LAST=$P(PATH,"/",LAST)
"RTN","ONCXURL",78,0)
 I LAST'="",LAST'["?",LAST'["."  S PATH=PATH_"/"
"RTN","ONCXURL",79,0)
 Q PATH
"VER")
8.0^22.0
"^DD",165.5,165.5,35,0)
SEER SUMMARY STAGE 2000^*S^0:In situ;1:Localized;2:Regional by direct extension;3:Regional to lymph nodes;4:Regional by extension & to nodes;5:Regional, NOS;7:Distant metastasis/systemic disease;8:NA/Benign;9:Unknown;^2;17^Q
"^DD",165.5,165.5,35,.1)

"^DD",165.5,165.5,35,3)
Enter the code which indicates the extent of disease at time of diagnosis.
"^DD",165.5,165.5,35,4)

"^DD",165.5,165.5,35,10)

"^DD",165.5,165.5,35,12)
Codes 0, 2, 3, 4 and 8 are not valid for HODGKIN AND NON-HODGKIN LYMPHOMAS.
"^DD",165.5,165.5,35,12.1)
S DIC("S")="I ('$$LYMPHOMA^ONCFUNC(D0))!((Y'=0)&(Y'=2)&(Y'=3)&(Y'=4)&(Y'=8))"
"^DD",165.5,165.5,35,20,0)
^.3LA^^0
"^DD",165.5,165.5,35,21,0)
^.001^5^5^3160210^^^^
"^DD",165.5,165.5,35,21,1,0)

"^DD",165.5,165.5,35,21,2,0)
Provides a site-specific description of
"^DD",165.5,165.5,35,21,3,0)
the extent of disease at diagnosis.
"^DD",165.5,165.5,35,21,4,0)

"^DD",165.5,165.5,35,21,5,0)
For further information see FORDS page 124.
"^DD",165.5,165.5,35,"DT")
3150908
"^DD",165.5,165.5,51.4,0)
RADIATION @FACILITY^*SX^0:None;1:Beam radiation;2:Radioactive implants;3:Radioisotopes;4:Beam + implants or radioisotopes;5:Radiation, NOS;7:Refused radiation;8:Recommended, unknown if given;9:Unknown if administered;^3.1;12^S V=0 D NT^ONCODSR
"^DD",165.5,165.5,51.4,1,0)
^.1
"^DD",165.5,165.5,51.4,1,1,0)
165.5^AU^MUMPS
"^DD",165.5,165.5,51.4,1,1,1)
Q
"^DD",165.5,165.5,51.4,1,1,2)
D RADATF^ONCDTX1
"^DD",165.5,165.5,51.4,1,1,"%D",0)
^.101^4^4^3160211^^
"^DD",165.5,165.5,51.4,1,1,"%D",1,0)
When the value of this field is deleted, the KILL logic will delete 
"^DD",165.5,165.5,51.4,1,1,"%D",2,0)
the following associated field value:
"^DD",165.5,165.5,51.4,1,1,"%D",3,0)
 
"^DD",165.5,165.5,51.4,1,1,"%D",4,0)
RADIATION @FACILITY DATE (165.5,51.5)
"^DD",165.5,165.5,51.4,1,1,"DT")
2981001
"^DD",165.5,165.5,51.4,1,1,"NOREINDEX")
1
"^DD",165.5,165.5,51.4,3)
Enter the type of radiation administered to the primary site or any metastatic site at this facility
"^DD",165.5,165.5,51.4,12)
Codes 7 and 8 should not be used for primaries with a DATE DX > 12/31/95.
"^DD",165.5,165.5,51.4,12.1)
S DIC("S")="I ($P(^ONCO(165.5,DA,0),U,16)<2960101)!((Y'=7)&(Y'=8))"
"^DD",165.5,165.5,51.4,21,0)
^.001^5^5^3160211^^^^
"^DD",165.5,165.5,51.4,21,1,0)

"^DD",165.5,165.5,51.4,21,2,0)
Records the type of radiation administered to the primary site or any
"^DD",165.5,165.5,51.4,21,3,0)
metastatic site AT THIS FACILITY.  Includes all procedures that are part
"^DD",165.5,165.5,51.4,21,4,0)
of the first course of treatment.
"^DD",165.5,165.5,51.4,21,5,0)

"^DD",165.5,165.5,51.4,"DT")
2981001
"^DD",165.5,165.5,53.3,0)
CHEMOTHERAPY @FAC^S^00:None;01:Chemotherapy, NOS;02:Single-agent;03:Multiagent;82:Not administered/contraindicated;85:Pt died prior to tx;86:Recommended, not admin, no reason given;87:Refusal;88:Recommended, unknown if admin;99:Unknown;^3.1;14^Q
"^DD",165.5,165.5,53.3,1,0)
^.1
"^DD",165.5,165.5,53.3,1,1,0)
165.5^AV^MUMPS
"^DD",165.5,165.5,53.3,1,1,1)
Q
"^DD",165.5,165.5,53.3,1,1,2)
D CHEMATF^ONCDTX1
"^DD",165.5,165.5,53.3,1,1,"%D",0)
^.101^2^2^3160211^^^
"^DD",165.5,165.5,53.3,1,1,"%D",1,0)
When the value of this field is deleted, the KILL logic will delete all of
"^DD",165.5,165.5,53.3,1,1,"%D",2,0)
the associated field values.
"^DD",165.5,165.5,53.3,1,1,"DT")
2981001
"^DD",165.5,165.5,53.3,1,1,"NOREINDEX")
1
"^DD",165.5,165.5,53.3,3)
Enter the type of chemotherapy administered as first course of treatment at this facility
"^DD",165.5,165.5,53.3,21,0)
^.001^9^9^3160211^^^^
"^DD",165.5,165.5,53.3,21,1,0)

"^DD",165.5,165.5,53.3,21,2,0)
Records the type of chemotherapy administered as first course of
"^DD",165.5,165.5,53.3,21,3,0)
treatment at this facility.  If chemotherapy was not administered,
"^DD",165.5,165.5,53.3,21,4,0)
then this item records the reason it was not administered to the
"^DD",165.5,165.5,53.3,21,5,0)
patient.  Chemotherapy consists of a group of anticancer drugs
"^DD",165.5,165.5,53.3,21,6,0)
that inhibit the reproduction of cancer cells by interfering with
"^DD",165.5,165.5,53.3,21,7,0)
DNA synthesis and mitosis.
"^DD",165.5,165.5,53.3,21,8,0)

"^DD",165.5,165.5,53.3,21,9,0)
For further information see FORDS pages 173-174.
"^DD",165.5,165.5,53.3,"DT")
3160211
"^DD",165.5,165.5,54.3,0)
HORMONE THERAPY @FAC^S^00:None;01:Hormone therapy;82:Not administered/contraindicated;85:Pt died prior to tx;86:Recommended, not admin, no reason given;87:Refusal;88:Recommended, unknown if admin;99:Unknown;^3.1;16^Q
"^DD",165.5,165.5,54.3,1,0)
^.1
"^DD",165.5,165.5,54.3,1,1,0)
165.5^AW^MUMPS
"^DD",165.5,165.5,54.3,1,1,1)
Q
"^DD",165.5,165.5,54.3,1,1,2)
D HORATF^ONCDTX1
"^DD",165.5,165.5,54.3,1,1,"%D",0)
^.101^2^2^3160211^^^
"^DD",165.5,165.5,54.3,1,1,"%D",1,0)
When the value of this field is deleted, the KILL logic will delete all of
"^DD",165.5,165.5,54.3,1,1,"%D",2,0)
the associated field values.
"^DD",165.5,165.5,54.3,1,1,"DT")
2981001
"^DD",165.5,165.5,54.3,1,1,"NOREINDEX")
1
"^DD",165.5,165.5,54.3,3)
Enter the type of hormone therapy administered as first course of treatment at this facility
"^DD",165.5,165.5,54.3,21,0)
^.001^9^9^3160211^^^^
"^DD",165.5,165.5,54.3,21,1,0)

"^DD",165.5,165.5,54.3,21,2,0)
Records the type of hormone therapy administered as first
"^DD",165.5,165.5,54.3,21,3,0)
course treatment at this facility.  If hormone therapy was
"^DD",165.5,165.5,54.3,21,4,0)
not administered, then this item records the reason it was
"^DD",165.5,165.5,54.3,21,5,0)
not administered to the patient.  Hormone therapy consists
"^DD",165.5,165.5,54.3,21,6,0)
of a group of drugs that may affect the long-term control of
"^DD",165.5,165.5,54.3,21,7,0)
a cancer's growth.  It is not usually used as a curative measure.
"^DD",165.5,165.5,54.3,21,8,0)

"^DD",165.5,165.5,54.3,21,9,0)
For further information see FORDS pages 177-178.
"^DD",165.5,165.5,54.3,"DT")
3060629
"^DD",165.5,165.5,55.3,0)
IMMUNOTHERAPY @FAC^S^00:None;01:Immunotherapy;82:Not administered/contraindicated;85:Pt died prior to tx;86:Recommended, not admin, no reason given;87:Refusal;88:Recommended, unknown if admin;99:Unknown;^3.1;18^Q
"^DD",165.5,165.5,55.3,1,0)
^.1
"^DD",165.5,165.5,55.3,1,1,0)
165.5^AX^MUMPS
"^DD",165.5,165.5,55.3,1,1,1)
Q
"^DD",165.5,165.5,55.3,1,1,2)
D IMMATF^ONCDTX1
"^DD",165.5,165.5,55.3,1,1,"%D",0)
^.101^2^2^3160211^^^
"^DD",165.5,165.5,55.3,1,1,"%D",1,0)
When the value of this field is deleted, the KILL logic will delete all of
"^DD",165.5,165.5,55.3,1,1,"%D",2,0)
the associated field values.
"^DD",165.5,165.5,55.3,1,1,"DT")
2981001
"^DD",165.5,165.5,55.3,1,1,"NOREINDEX")
1
"^DD",165.5,165.5,55.3,3)
Enter the type of immunotherapy administered as first course of treatment at this facility
"^DD",165.5,165.5,55.3,21,0)
^.001^9^9^3160211^^^^
"^DD",165.5,165.5,55.3,21,1,0)

"^DD",165.5,165.5,55.3,21,2,0)
Records the type of immunotherapy administered as first course
"^DD",165.5,165.5,55.3,21,3,0)
treatment at this facility.  If immunotherapy was not administered,
"^DD",165.5,165.5,55.3,21,4,0)
then this item records the reason it was not administered to the
"^DD",165.5,165.5,55.3,21,5,0)
patient.  Immunotherapy consists of biological or chemical agents
"^DD",165.5,165.5,55.3,21,6,0)
that alter the immune system or change the host's response to the
"^DD",165.5,165.5,55.3,21,7,0)
tumor cells.
"^DD",165.5,165.5,55.3,21,8,0)

"^DD",165.5,165.5,55.3,21,9,0)
For further information see FORDS page 181.
"^DD",165.5,165.5,55.3,"DT")
3030129
"^DD",165.5,165.5,57.3,0)
OTHER TREATMENT @FAC^SX^0:None;1:Other;2:Other - Experimental;3:Other - Double Blind;6:Other - Unproven;7:Refusal;8:Recommended, unknown if administered;9:Unknown;^3.1;20^Q
"^DD",165.5,165.5,57.3,1,0)
^.1
"^DD",165.5,165.5,57.3,1,1,0)
165.5^AZ^MUMPS
"^DD",165.5,165.5,57.3,1,1,1)
Q
"^DD",165.5,165.5,57.3,1,1,2)
D OTHATF^ONCDTX1
"^DD",165.5,165.5,57.3,1,1,"%D",0)
^.101^2^2^3160211^^
"^DD",165.5,165.5,57.3,1,1,"%D",1,0)
When the value of this field is deleted, the KILL logic will delete all of
"^DD",165.5,165.5,57.3,1,1,"%D",2,0)
the associated field values.
"^DD",165.5,165.5,57.3,1,1,"DT")
2981001
"^DD",165.5,165.5,57.3,1,1,"NOREINDEX")
1
"^DD",165.5,165.5,57.3,3)
Enter other treatment given at this facility that cannot be defined as surgery, radiation or systemic therapy
"^DD",165.5,165.5,57.3,21,0)
^.001^6^6^3160211^^^^
"^DD",165.5,165.5,57.3,21,1,0)

"^DD",165.5,165.5,57.3,21,2,0)
Identifies other treatment given at this facility that cannot be
"^DD",165.5,165.5,57.3,21,3,0)
defined as surgery, radiation, or systemic therapy according to
"^DD",165.5,165.5,57.3,21,4,0)
the defined data elements in the FORDS manual.
"^DD",165.5,165.5,57.3,21,5,0)

"^DD",165.5,165.5,57.3,21,6,0)
For further information see FORDS page 187.
"^DD",165.5,165.5,57.3,"DT")
3030909
"^DD",165.5,165.5,70,0)
DATE OF FIRST RECURRENCE^DOX^^5;1^S ITFLAG="NO" D DATEIT^ONCOPCE Q:ITFLAG="YES"  D DFIT^ONCODSR
"^DD",165.5,165.5,70,.1)

"^DD",165.5,165.5,70,1,0)
^.1
"^DD",165.5,165.5,70,1,1,0)
^^TRIGGER^165.5^999.21
"^DD",165.5,165.5,70,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^ONCO(165.5,D0,27)):^(27),1:"") S X=$P(Y(1),U,26),X=X S DIU=X K Y S X="" S DIH=$G(^ONCO(165.5,DIV(0),27)),DIV=X S $P(^(27),U,26)=DIV,DIH=165.5,DIG=999.21 D ^DICR
"^DD",165.5,165.5,70,1,1,2)
Q
"^DD",165.5,165.5,70,1,1,"%D",0)
^^2^2^3150902^
"^DD",165.5,165.5,70,1,1,"%D",1,0)
If DATE OF FIRST RECURRENCE field is entered then delete
"^DD",165.5,165.5,70,1,1,"%D",2,0)
the RECURRENCE DATE-1ST FLAG field value.
"^DD",165.5,165.5,70,1,1,"CREATE VALUE")
@
"^DD",165.5,165.5,70,1,1,"DELETE VALUE")
NO EFFECT
"^DD",165.5,165.5,70,1,1,"DT")
3150902
"^DD",165.5,165.5,70,1,1,"FIELD")
RECURRENCE DATE-1ST F
"^DD",165.5,165.5,70,2)
S Y(0)=Y S X=Y D DATEOT^ONCOPCE
"^DD",165.5,165.5,70,2.1)
S X=Y D DATEOT^ONCOPCE
"^DD",165.5,165.5,70,3)
*** DATE OF FIRST RECURRENCE MUST BE AFTER OR EQUAL TO DATE DX ***
"^DD",165.5,165.5,70,10)

"^DD",165.5,165.5,70,20,0)
^.3LA^^0
"^DD",165.5,165.5,70,21,0)
^.001^4^4^3160210^^^^
"^DD",165.5,165.5,70,21,1,0)

"^DD",165.5,165.5,70,21,2,0)
Records the date of the first recurrence.
"^DD",165.5,165.5,70,21,3,0)

"^DD",165.5,165.5,70,21,4,0)
For further information see FORDS pages 195-196.
"^DD",165.5,165.5,70,"DT")
3150902
"^DD",165.5,165.5,90,0)
DATE CASE COMPLETED^DX^^7;1^D DFIT^ONCODSR
"^DD",165.5,165.5,90,1,0)
^.1
"^DD",165.5,165.5,90,1,1,0)
165.5^AAD^MUMPS
"^DD",165.5,165.5,90,1,1,1)
S ^ONCO(165.5,"AAD",X,DA)=""
"^DD",165.5,165.5,90,1,1,2)
K ^ONCO(165.5,"AAD",X,DA)
"^DD",165.5,165.5,90,1,1,"%D",0)
^.101^1^1^3120802^^
"^DD",165.5,165.5,90,1,1,"%D",1,0)
Used for QA - 10% abstracts completed in particular timeframe
"^DD",165.5,165.5,90,1,1,"DT")
2920401
"^DD",165.5,165.5,90,2)
S Y(0)=Y S X=Y D DATEOT^ONCOES
"^DD",165.5,165.5,90,2.1)
S X=Y D DATEOT^ONCOES
"^DD",165.5,165.5,90,3)
*** DATE CASE COMPLETED MUST BE AFTER OR EQUAL TO DATE DX ***
"^DD",165.5,165.5,90,21,0)
^.001^3^3^3160331^^^^
"^DD",165.5,165.5,90,21,1,0)
 
"^DD",165.5,165.5,90,21,2,0)
The date that: (1) the abstractor decided that the case was
"^DD",165.5,165.5,90,21,3,0)
complete, and (2) the abstract passed all edit checks.
"^DD",165.5,165.5,90,"DT")
3060920
"^DD",165.5,165.5,153.2,0)
HEMA TRANS/ENDOCRINE PROC @FAC^P167'O^ONCO(167,^3.2;2^Q
"^DD",165.5,165.5,153.2,1,0)
^.1
"^DD",165.5,165.5,153.2,1,1,0)
165.5^AE^MUMPS
"^DD",165.5,165.5,153.2,1,1,1)
Q
"^DD",165.5,165.5,153.2,1,1,2)
D HTEATF^ONCDTX1
"^DD",165.5,165.5,153.2,1,1,"%D",0)
^.101^2^2^3160211^^^^
"^DD",165.5,165.5,153.2,1,1,"%D",1,0)
When the value of this field is deleted, the KILL logic will delete all of
"^DD",165.5,165.5,153.2,1,1,"%D",2,0)
the associated field values.
"^DD",165.5,165.5,153.2,1,1,"DT")
3160210
"^DD",165.5,165.5,153.2,1,1,"NOREINDEX")
1
"^DD",165.5,165.5,153.2,2)
S Y(0)=Y I Y'="" S Y=$P($G(^ONCO(167,Y,0)),U,2)
"^DD",165.5,165.5,153.2,2.1)
I Y'="" S Y=$P($G(^ONCO(167,Y,0)),U,2)
"^DD",165.5,165.5,153.2,3)
Enter a Hematologic Transplant Endocrine Procedure at this facility administered for this primary.
"^DD",165.5,165.5,153.2,21,0)
^.001^9^9^3160210^^^^
"^DD",165.5,165.5,153.2,21,1,0)

"^DD",165.5,165.5,153.2,21,2,0)
Identifies systemic therapeutic procedures administered as part
"^DD",165.5,165.5,153.2,21,3,0)
of the first course of treatment at this and all other facilities.
"^DD",165.5,165.5,153.2,21,4,0)
If none of these procedures were administered, then this item
"^DD",165.5,165.5,153.2,21,5,0)
records the reason they were not performed.  These include bone
"^DD",165.5,165.5,153.2,21,6,0)
marrow transplants, stem cell harvests, surgical and/or radiation
"^DD",165.5,165.5,153.2,21,7,0)
endocrine therapy.
"^DD",165.5,165.5,153.2,21,8,0)

"^DD",165.5,165.5,153.2,21,9,0)
For further information see FORDS pages 182-183.
"^DD",165.5,165.5,153.2,"DT")
3160210
"^DD",165.5,165.5,153.3,0)
HEMA TRANS/ENDOCRINE PR@FAC DT^DXO^^3.2;3^D DFIT^ONCODSR I $D(X) S V="0000000" D NT^ONCODSR
"^DD",165.5,165.5,153.3,1,0)
^.1^^0
"^DD",165.5,165.5,153.3,2)
S Y(0)=Y S X=Y D DATEOT^ONCOES
"^DD",165.5,165.5,153.3,2.1)
S X=Y D DATEOT^ONCOES
"^DD",165.5,165.5,153.3,3)
*** HEMATOLOGIC TRANSPLANT ENDOCRINE PROCEDURE AT THIS FACILITY DATE MUST BE AFTER OR EQUAL TO DATE DX ***
"^DD",165.5,165.5,153.3,21,0)
^.001^3^3^3160210^^^^
"^DD",165.5,165.5,153.3,21,1,0)

"^DD",165.5,165.5,153.3,21,2,0)
Records the date on which hematologic transplant
"^DD",165.5,165.5,153.3,21,3,0)
and endocrine procedures were performed.
"^DD",165.5,165.5,153.3,"DT")
3160210
"^DD",165.5,165.5,198,0)
DATE CASE LAST CHANGED^DX^^7;21^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",165.5,165.5,198,1,0)
^.1
"^DD",165.5,165.5,198,1,1,0)
165.5^AAE
"^DD",165.5,165.5,198,1,1,1)
S ^ONCO(165.5,"AAE",$E(X,1,30),DA)=""
"^DD",165.5,165.5,198,1,1,2)
K ^ONCO(165.5,"AAE",$E(X,1,30),DA)
"^DD",165.5,165.5,198,1,1,"%D",0)
^.101^2^2^3160211^^
"^DD",165.5,165.5,198,1,1,"%D",1,0)
This cross-reference will be used to facilitate the extraction
"^DD",165.5,165.5,198,1,1,"%D",2,0)
of the data from specified start/end dates.
"^DD",165.5,165.5,198,1,1,"DT")
3070326
"^DD",165.5,165.5,198,1,2,0)
^^TRIGGER^165.5^199
"^DD",165.5,165.5,198,1,2,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^ONCO(165.5,D0,7)):^(7),1:"") S X=$P(Y(1),U,22),X=X S DIU=X K Y S X=DIV S X=DUZ S DIH=$G(^ONCO(165.5,DIV(0),7)),DIV=X S $P(^(7),U,22)=DIV,DIH=165.5,DIG=199 D ^DICR
"^DD",165.5,165.5,198,1,2,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^ONCO(165.5,D0,7)):^(7),1:"") S X=$P(Y(1),U,22),X=X S DIU=X K Y S X="" S DIH=$G(^ONCO(165.5,DIV(0),7)),DIV=X S $P(^(7),U,22)=DIV,DIH=165.5,DIG=199 D ^DICR
"^DD",165.5,165.5,198,1,2,"%D",0)
^^2^2^3160211^
"^DD",165.5,165.5,198,1,2,"%D",1,0)
This trigger cross-reference is used to set the CASE LAST CHANGED
"^DD",165.5,165.5,198,1,2,"%D",2,0)
BY (#199) field to the DUZ of the user who created/modified the case.
"^DD",165.5,165.5,198,1,2,"CREATE VALUE")
S X=DUZ
"^DD",165.5,165.5,198,1,2,"DELETE VALUE")
@
"^DD",165.5,165.5,198,1,2,"DT")
3150820
"^DD",165.5,165.5,198,1,2,"FIELD")
CASE LAST CHANGED BY
"^DD",165.5,165.5,198,2)
S Y(0)=Y S X=Y D DATEOT^ONCOES
"^DD",165.5,165.5,198,2.1)
S X=Y D DATEOT^ONCOES
"^DD",165.5,165.5,198,3)
Record the date in which this case was last changed or updated.
"^DD",165.5,165.5,198,21,0)
^.001^1^1^3160210^^^
"^DD",165.5,165.5,198,21,1,0)
Date the case was last changed or updated.
"^DD",165.5,165.5,198,"DT")
3150820
"^DD",165.5,165.5,227,0)
PERFORMANCE STATUS AT DX^S^0:ECOG 0;1:ECOG 1;2:ECOG 2;3:ECOG 3;4:ECOG 4;5:ECOG 5;9:UNKNOWN;10:KPS 10;20:KPS 20;30:KPS 30;40:KPS 40;50:KPS 50;60:KPS 60;70:KPS 70;80:KPS 80;90:KPS 90;100:KPS 100;^1;7^Q
"^DD",165.5,165.5,227,3)
Enter the score which indicates the patient's general well-being.
"^DD",165.5,165.5,227,21,0)
^.001^46^46^3160325^^^^
"^DD",165.5,165.5,227,21,1,0)
 
"^DD",165.5,165.5,227,21,2,0)
Records an attempt to quantify the patient's general well-being.
"^DD",165.5,165.5,227,21,3,0)
 
"^DD",165.5,165.5,227,21,4,0)
ECOG 0 - Fully active, able to carry on all pre-disease
"^DD",165.5,165.5,227,21,5,0)
         activities without restriction
"^DD",165.5,165.5,227,21,6,0)
 
"^DD",165.5,165.5,227,21,7,0)
ECOG 1 - Restricted in physically strenuous activity but ambulatory
"^DD",165.5,165.5,227,21,8,0)
         and able to carry out work of a light or sedentary nature.
"^DD",165.5,165.5,227,21,9,0)
         For example, light housework, office work
"^DD",165.5,165.5,227,21,10,0)
 
"^DD",165.5,165.5,227,21,11,0)
ECOG 2 - Ambulatory and capable of all self care but unable to carry out
"^DD",165.5,165.5,227,21,12,0)
         and any work activities. Up and about more than 50% of waking
"^DD",165.5,165.5,227,21,13,0)
         hours
"^DD",165.5,165.5,227,21,14,0)
 
"^DD",165.5,165.5,227,21,15,0)
ECOG 3 - Capable of only limited self-care, confined to bed or chair
"^DD",165.5,165.5,227,21,16,0)
         50% or more of waking hours
"^DD",165.5,165.5,227,21,17,0)
 
"^DD",165.5,165.5,227,21,18,0)
ECOG 4 - Completely disabled. Cannot carry on any self-care.
"^DD",165.5,165.5,227,21,19,0)
         Totally confined to bed or chair)
"^DD",165.5,165.5,227,21,20,0)
 
"^DD",165.5,165.5,227,21,21,0)
UNKNOWN - Unknown/not documented
"^DD",165.5,165.5,227,21,22,0)
 
"^DD",165.5,165.5,227,21,23,0)
KPS 100 - Normal, no complaints; no evidence of disease
"^DD",165.5,165.5,227,21,24,0)
 
"^DD",165.5,165.5,227,21,25,0)
KPS 90  - Able to carry on normal activity; minor signs or symptoms 
"^DD",165.5,165.5,227,21,26,0)
          of disease
"^DD",165.5,165.5,227,21,27,0)
 
"^DD",165.5,165.5,227,21,28,0)
KPS 80  - Normal activity with effort, some signs or symptoms of disease
"^DD",165.5,165.5,227,21,29,0)
 
"^DD",165.5,165.5,227,21,30,0)
KPS 70  - Cares for self but unable to carry on normal activity or 
"^DD",165.5,165.5,227,21,31,0)
          to do active work
"^DD",165.5,165.5,227,21,32,0)
 
"^DD",165.5,165.5,227,21,33,0)
KPS 60  - Requires occasional assistance but is able to care 
"^DD",165.5,165.5,227,21,34,0)
          for most of personal needs
"^DD",165.5,165.5,227,21,35,0)
 
"^DD",165.5,165.5,227,21,36,0)
KPS 50  - Requires considerable assistance and frequent medical care
"^DD",165.5,165.5,227,21,37,0)
 
"^DD",165.5,165.5,227,21,38,0)
KPS 40  - Disabled; requires special care and assistance
"^DD",165.5,165.5,227,21,39,0)
 
"^DD",165.5,165.5,227,21,40,0)
KPS 30  - Severely disabled; hospitalization is indicated
"^DD",165.5,165.5,227,21,41,0)
          although death not imminent
"^DD",165.5,165.5,227,21,42,0)
 
"^DD",165.5,165.5,227,21,43,0)
KPS 20  - Very ill; hospitalization and active
"^DD",165.5,165.5,227,21,44,0)
          supportive care necessary
"^DD",165.5,165.5,227,21,45,0)
 
"^DD",165.5,165.5,227,21,46,0)
KPS 10  - Moribund
"^DD",165.5,165.5,227,"DT")
3160325
"^DD",165.5,165.5,241,0)
TNM CLIN DESCRIPTOR^S^0:None;1:E (Extranodal);2:S (Spleen);3:M (Multiple primary tumors in a single site);5:E&S (Extranodal and spleen);9:Unknown, not stated in patient record;^24;22^Q
"^DD",165.5,165.5,241,3)
Enter the appropriate descriptor suffix.
"^DD",165.5,165.5,241,21,0)
^.001^23^23^3160204^^^^
"^DD",165.5,165.5,241,21,1,0)
 
"^DD",165.5,165.5,241,21,2,0)
Identifies the AJCC clinical stage (suffix) descriptor as recorded 
"^DD",165.5,165.5,241,21,3,0)
by the physician. AJCC stage descriptors identify special cases that
"^DD",165.5,165.5,241,21,4,0)
need separate data analysis.  The descriptors are adjuncts to and do
"^DD",165.5,165.5,241,21,5,0)
not change the stage group.
"^DD",165.5,165.5,241,21,6,0)
 
"^DD",165.5,165.5,241,21,7,0)
0 - None:  There are no prefix or suffix descriptors that would be used
"^DD",165.5,165.5,241,21,8,0)
          for this case
"^DD",165.5,165.5,241,21,9,0)
 
"^DD",165.5,165.5,241,21,10,0)
1 E - Extranodal, lymphomas only:  A lymphoma case involving an
"^DD",165.5,165.5,241,21,11,0)
        extranodal site.
"^DD",165.5,165.5,241,21,12,0)
 
"^DD",165.5,165.5,241,21,13,0)
2 S - Spleen, lymphomas only:  A lymphoma case involving the spleen
"^DD",165.5,165.5,241,21,14,0)
 
"^DD",165.5,165.5,241,21,15,0)
3 M - Multiple primary tumors in a single site:  This is one primary
"^DD",165.5,165.5,241,21,16,0)
        with multiple tumors in the organ of origin at the time
"^DD",165.5,165.5,241,21,17,0)
        of diagnosis
"^DD",165.5,165.5,241,21,18,0)
 
"^DD",165.5,165.5,241,21,19,0)
5 E&S - Extranodal and spleen, lymphomas only:  A lymphoma case with
"^DD",165.5,165.5,241,21,20,0)
        involvement of both an extranodal site and the spleen
"^DD",165.5,165.5,241,21,21,0)
 
"^DD",165.5,165.5,241,21,22,0)
9 - Unknown, not stated in patient record:  A prefix or suffix would
"^DD",165.5,165.5,241,21,23,0)
        describe this stage, but it is not known which would be correct
"^DD",165.5,165.5,241,"DT")
3160204
"^DD",165.5,165.5,242,0)
TNM PATH DESCRIPTOR^S^0:None;1:E (Extranodal);2:S (Spleen);3:M (Multiple primary tumors);4:Y (Initial multimodality therapy);5:E&S (Extranodal and spleen);6:M&Y (Multiple and multimodality);9:Unknown;^24;23^Q
"^DD",165.5,165.5,242,3)
Enter the appropriate descriptor suffix.
"^DD",165.5,165.5,242,21,0)
^.001^28^28^3160204^^^^
"^DD",165.5,165.5,242,21,1,0)
 
"^DD",165.5,165.5,242,21,2,0)
Identifies the AJCC clinical stage (suffix) descriptor as recorded 
"^DD",165.5,165.5,242,21,3,0)
by the physician. AJCC stage descriptors identify special cases that
"^DD",165.5,165.5,242,21,4,0)
need separate data analysis.  The descriptors are adjuncts to and do
"^DD",165.5,165.5,242,21,5,0)
not change the stage group.
"^DD",165.5,165.5,242,21,6,0)
 
"^DD",165.5,165.5,242,21,7,0)
0 - None:  There are no prefix or suffix descriptors that would be used
"^DD",165.5,165.5,242,21,8,0)
           for this case
"^DD",165.5,165.5,242,21,9,0)
 
"^DD",165.5,165.5,242,21,10,0)
1 E - Extranodal, lymphomas only:  A lymphoma case involving an
"^DD",165.5,165.5,242,21,11,0)
        extranodal site
"^DD",165.5,165.5,242,21,12,0)
 
"^DD",165.5,165.5,242,21,13,0)
2 S - Spleen, lymphomas only:  A lymphoma case involving the spleen
"^DD",165.5,165.5,242,21,14,0)
 
"^DD",165.5,165.5,242,21,15,0)
3 M - Multiple primary tumors in a single site:  This is one primary
"^DD",165.5,165.5,242,21,16,0)
        with multiple tumors in the organ of origin at the time
"^DD",165.5,165.5,242,21,17,0)
        of diagnosis
"^DD",165.5,165.5,242,21,18,0)
 
"^DD",165.5,165.5,242,21,19,0)
4 Y - Classification during or after initial multimodality therapy
"^DD",165.5,165.5,242,21,20,0)
 
"^DD",165.5,165.5,242,21,21,0)
5 E&S - Extranodal and spleen, lymphomas only:  A lymphoma case
"^DD",165.5,165.5,242,21,22,0)
        with involvement of both an extranodal site and the spleen
"^DD",165.5,165.5,242,21,23,0)
 
"^DD",165.5,165.5,242,21,24,0)
6 M&Y - Multiple primary tumors and initial multimodality therapy:
"^DD",165.5,165.5,242,21,25,0)
        A case meeting the parameters of both codes 3 and 4
"^DD",165.5,165.5,242,21,26,0)
 
"^DD",165.5,165.5,242,21,27,0)
9 - Unknown, not stated in patient record:  A prefix or suffix would
"^DD",165.5,165.5,242,21,28,0)
        describe this stage, but it's not known which would be correct
"^DD",165.5,165.5,242,"DT")
3160204
"^DD",165.5,165.5,284,0)
UDF1^F^^25;9^K:$L(X)>10!($L(X)<1) X
"^DD",165.5,165.5,284,3)
Answer must be 1-10 characters in length.
"^DD",165.5,165.5,284,21,0)
^.001^1^1^3151022^^
"^DD",165.5,165.5,284,21,1,0)
This will be a User Defined Field.
"^DD",165.5,165.5,284,"DT")
3151022
"^DD",165.5,165.5,284.1,0)
UDF2^F^^25;10^K:$L(X)>10!($L(X)<1) X
"^DD",165.5,165.5,284.1,3)
Answer must be 1-10 characters in length.
"^DD",165.5,165.5,284.1,21,0)
^^1^1^3151022^
"^DD",165.5,165.5,284.1,21,1,0)
This will be a User Defined Field.
"^DD",165.5,165.5,284.1,"DT")
3151022
"^DD",165.5,165.5,284.2,0)
UDF3^F^^25;11^K:$L(X)>10!($L(X)<1) X
"^DD",165.5,165.5,284.2,3)
Answer must be 1-10 characters in length.
"^DD",165.5,165.5,284.2,21,0)
^^1^1^3151022^
"^DD",165.5,165.5,284.2,21,1,0)
This will be a User Defined Field.
"^DD",165.5,165.5,284.2,"DT")
3151022
"^DD",165.5,165.5,284.3,0)
UDF4^F^^25;12^K:$L(X)>10!($L(X)<1) X
"^DD",165.5,165.5,284.3,3)
Answer must be 1-10 characters in length.
"^DD",165.5,165.5,284.3,21,0)
^^1^1^3151022^
"^DD",165.5,165.5,284.3,21,1,0)
This will be a User Defined Field.
"^DD",165.5,165.5,284.3,"DT")
3151022
"^DD",165.5,165.5,284.4,0)
UDF5^F^^25;13^K:$L(X)>10!($L(X)<1) X
"^DD",165.5,165.5,284.4,3)
Answer must be 1-10 characters in length.
"^DD",165.5,165.5,284.4,21,0)
^^1^1^3151022^
"^DD",165.5,165.5,284.4,21,1,0)
This will be a User Defined Field.
"^DD",165.5,165.5,284.4,"DT")
3151022
"^DD",165.5,165.5,284.5,0)
UDF6^F^^25;14^K:$L(X)>10!($L(X)<1) X
"^DD",165.5,165.5,284.5,3)
Answer must be 1-10 characters in length.
"^DD",165.5,165.5,284.5,21,0)
^^1^1^3151022^
"^DD",165.5,165.5,284.5,21,1,0)
This will be a User Defined Field.
"^DD",165.5,165.5,284.5,"DT")
3151022
"^DD",165.5,165.5,284.6,0)
UDF7^F^^25;15^K:$L(X)>10!($L(X)<1) X
"^DD",165.5,165.5,284.6,3)
Answer must be 1-10 characters in length.
"^DD",165.5,165.5,284.6,21,0)
^^1^1^3151022^
"^DD",165.5,165.5,284.6,21,1,0)
This will be a User Defined Field.
"^DD",165.5,165.5,284.6,"DT")
3151022
"^DD",165.5,165.5,284.7,0)
UDF8^F^^25;16^K:$L(X)>10!($L(X)<1) X
"^DD",165.5,165.5,284.7,3)
Answer must be 1-10 characters in length.
"^DD",165.5,165.5,284.7,21,0)
^^1^1^3151022^
"^DD",165.5,165.5,284.7,21,1,0)
This will be a User Defined Field.
"^DD",165.5,165.5,284.7,"DT")
3151022
"^DD",165.5,165.5,284.8,0)
UDF9^F^^25;17^K:$L(X)>10!($L(X)<1) X
"^DD",165.5,165.5,284.8,3)
Answer must be 1-10 characters in length.
"^DD",165.5,165.5,284.8,21,0)
^^1^1^3151022^
"^DD",165.5,165.5,284.8,21,1,0)
This will be a User Defined Field.
"^DD",165.5,165.5,284.8,"DT")
3151022
"^DD",165.5,165.5,284.9,0)
UDF10^F^^25;18^K:$L(X)>10!($L(X)<1) X
"^DD",165.5,165.5,284.9,3)
Answer must be 1-10 characters in length.
"^DD",165.5,165.5,284.9,21,0)
^^1^1^3151022^
"^DD",165.5,165.5,284.9,21,1,0)
This will be a User Defined Field.
"^DD",165.5,165.5,284.9,"DT")
3151022
**END**
**END**
