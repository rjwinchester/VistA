EMERGENCY Released ONC*2.2*7 SEQ #3
Extracted from mail message
**KIDS**:ONC*2.2*7^

**INSTALL NAME**
ONC*2.2*7
"BLD",9300,0)
ONC*2.2*7^ONCOLOGY^0^3160111^y
"BLD",9300,4,0)
^9.64PA^160^1
"BLD",9300,4,160,0)
160
"BLD",9300,4,160,2,0)
^9.641^160^1
"BLD",9300,4,160,2,160,0)
ONCOLOGY PATIENT  (File-top level)
"BLD",9300,4,160,2,160,1,0)
^9.6411^19^11
"BLD",9300,4,160,2,160,1,19,0)
CAUSE OF DEATH
"BLD",9300,4,160,2,160,1,25.91,0)
SECONDARY DIAGNOSIS #1
"BLD",9300,4,160,2,160,1,25.92,0)
SECONDARY DIAGNOSIS #2
"BLD",9300,4,160,2,160,1,25.93,0)
SECONDARY DIAGNOSIS #3
"BLD",9300,4,160,2,160,1,25.94,0)
SECONDARY DIAGNOSIS #4
"BLD",9300,4,160,2,160,1,25.95,0)
SECONDARY DIAGNOSIS #5
"BLD",9300,4,160,2,160,1,25.96,0)
SECONDARY DIAGNOSIS #6
"BLD",9300,4,160,2,160,1,25.97,0)
SECONDARY DIAGNOSIS #7
"BLD",9300,4,160,2,160,1,25.98,0)
SECONDARY DIAGNOSIS #8
"BLD",9300,4,160,2,160,1,25.99,0)
SECONDARY DIAGNOSIS #9
"BLD",9300,4,160,2,160,1,25.9901,0)
SECONDARY DIAGNOSIS #10
"BLD",9300,4,160,222)
y^y^p^^^^n^^n
"BLD",9300,4,160,224)

"BLD",9300,4,"APDD",160,160)

"BLD",9300,4,"APDD",160,160,19)

"BLD",9300,4,"APDD",160,160,25.91)

"BLD",9300,4,"APDD",160,160,25.92)

"BLD",9300,4,"APDD",160,160,25.93)

"BLD",9300,4,"APDD",160,160,25.94)

"BLD",9300,4,"APDD",160,160,25.95)

"BLD",9300,4,"APDD",160,160,25.96)

"BLD",9300,4,"APDD",160,160,25.97)

"BLD",9300,4,"APDD",160,160,25.98)

"BLD",9300,4,"APDD",160,160,25.99)

"BLD",9300,4,"APDD",160,160,25.9901)

"BLD",9300,4,"B",160,160)

"BLD",9300,6.3)
5
"BLD",9300,"ABPKG")
n
"BLD",9300,"KRN",0)
^9.67PA^779.2^20
"BLD",9300,"KRN",.4,0)
.4
"BLD",9300,"KRN",.4,"NM",0)
^9.68A^3^3
"BLD",9300,"KRN",.4,"NM",1,0)
ONCOY58    FILE #165.5^165.5^0
"BLD",9300,"KRN",.4,"NM",2,0)
ONCO XABSTRACT RECORD    FILE #165.5^165.5^0
"BLD",9300,"KRN",.4,"NM",3,0)
ONC DISEASE INDEX    FILE #9000010.07^9000010.07^0
"BLD",9300,"KRN",.4,"NM","B","ONC DISEASE INDEX    FILE #9000010.07",3)

"BLD",9300,"KRN",.4,"NM","B","ONCO XABSTRACT RECORD    FILE #165.5",2)

"BLD",9300,"KRN",.4,"NM","B","ONCOY58    FILE #165.5",1)

"BLD",9300,"KRN",.401,0)
.401
"BLD",9300,"KRN",.402,0)
.402
"BLD",9300,"KRN",.403,0)
.403
"BLD",9300,"KRN",.5,0)
.5
"BLD",9300,"KRN",.84,0)
.84
"BLD",9300,"KRN",3.6,0)
3.6
"BLD",9300,"KRN",3.8,0)
3.8
"BLD",9300,"KRN",9.2,0)
9.2
"BLD",9300,"KRN",9.8,0)
9.8
"BLD",9300,"KRN",9.8,"NM",0)
^9.68A^10^10
"BLD",9300,"KRN",9.8,"NM",1,0)
ONCODIS^^0^B774180
"BLD",9300,"KRN",9.8,"NM",2,0)
ONCACDU2^^0^B117684945
"BLD",9300,"KRN",9.8,"NM",3,0)
ONCACDU1^^0^B36326632
"BLD",9300,"KRN",9.8,"NM",4,0)
ONCPL^^0^B3172227
"BLD",9300,"KRN",9.8,"NM",5,0)
ONCOPRT1^^0^B85682347
"BLD",9300,"KRN",9.8,"NM",6,0)
ONCOCOC^^0^B6585655
"BLD",9300,"KRN",9.8,"NM",7,0)
ONCOANC1^^0^B21183660
"BLD",9300,"KRN",9.8,"NM",8,0)
ONCOCFP^^0^B60462094
"BLD",9300,"KRN",9.8,"NM",9,0)
ONCOCFP1^^0^B82107874
"BLD",9300,"KRN",9.8,"NM",10,0)
ONCFUNC^^0^B52220927
"BLD",9300,"KRN",9.8,"NM","B","ONCACDU1",3)

"BLD",9300,"KRN",9.8,"NM","B","ONCACDU2",2)

"BLD",9300,"KRN",9.8,"NM","B","ONCFUNC",10)

"BLD",9300,"KRN",9.8,"NM","B","ONCOANC1",7)

"BLD",9300,"KRN",9.8,"NM","B","ONCOCFP",8)

"BLD",9300,"KRN",9.8,"NM","B","ONCOCFP1",9)

"BLD",9300,"KRN",9.8,"NM","B","ONCOCOC",6)

"BLD",9300,"KRN",9.8,"NM","B","ONCODIS",1)

"BLD",9300,"KRN",9.8,"NM","B","ONCOPRT1",5)

"BLD",9300,"KRN",9.8,"NM","B","ONCPL",4)

"BLD",9300,"KRN",19,0)
19
"BLD",9300,"KRN",19.1,0)
19.1
"BLD",9300,"KRN",101,0)
101
"BLD",9300,"KRN",409.61,0)
409.61
"BLD",9300,"KRN",771,0)
771
"BLD",9300,"KRN",779.2,0)
779.2
"BLD",9300,"KRN",870,0)
870
"BLD",9300,"KRN",8989.51,0)
8989.51
"BLD",9300,"KRN",8989.52,0)
8989.52
"BLD",9300,"KRN",8994,0)
8994
"BLD",9300,"KRN","B",.4,.4)

"BLD",9300,"KRN","B",.401,.401)

"BLD",9300,"KRN","B",.402,.402)

"BLD",9300,"KRN","B",.403,.403)

"BLD",9300,"KRN","B",.5,.5)

"BLD",9300,"KRN","B",.84,.84)

"BLD",9300,"KRN","B",3.6,3.6)

"BLD",9300,"KRN","B",3.8,3.8)

"BLD",9300,"KRN","B",9.2,9.2)

"BLD",9300,"KRN","B",9.8,9.8)

"BLD",9300,"KRN","B",19,19)

"BLD",9300,"KRN","B",19.1,19.1)

"BLD",9300,"KRN","B",101,101)

"BLD",9300,"KRN","B",409.61,409.61)

"BLD",9300,"KRN","B",771,771)

"BLD",9300,"KRN","B",779.2,779.2)

"BLD",9300,"KRN","B",870,870)

"BLD",9300,"KRN","B",8989.51,8989.51)

"BLD",9300,"KRN","B",8989.52,8989.52)

"BLD",9300,"KRN","B",8994,8994)

"BLD",9300,"QUES",0)
^9.62^^
"BLD",9300,"REQB",0)
^9.611^1^1
"BLD",9300,"REQB",1,0)
ONC*2.2*4^2
"BLD",9300,"REQB","B","ONC*2.2*4",1)

"FIA",160)
ONCOLOGY PATIENT
"FIA",160,0)
^ONCO(160,
"FIA",160,0,0)
160V
"FIA",160,0,1)
y^y^p^^^^n^^n
"FIA",160,0,10)

"FIA",160,0,11)

"FIA",160,0,"RLRO")

"FIA",160,0,"VR")
2.2^ONC
"FIA",160,160)
1
"FIA",160,160,19)

"FIA",160,160,25.91)

"FIA",160,160,25.92)

"FIA",160,160,25.93)

"FIA",160,160,25.94)

"FIA",160,160,25.95)

"FIA",160,160,25.96)

"FIA",160,160,25.97)

"FIA",160,160,25.98)

"FIA",160,160,25.99)

"FIA",160,160,25.9901)

"KRN",.4,1077,-1)
0^1
"KRN",.4,1077,0)
ONCOY58^3151005.1019^^165.5^^@^3151005
"KRN",.4,1077,"DXS",1,0)
Dead
"KRN",.4,1077,"DXS",1,1)
Alive
"KRN",.4,1077,"DXS",2,0)
Patient alive at last follow-up
"KRN",.4,1077,"DXS",2,8)
ICDA-8
"KRN",.4,1077,"DXS",2,9)
ICD-9
"KRN",.4,1077,"DXS",3,7777)
State death certificate or listing not availa
"KRN",.4,1077,"DXS",3,7797)
State death cert available, cause of death no
"KRN",.4,1077,"DXS",4,0)
Patient alive
"KRN",.4,1077,"DXS",4,1)
Autopsy performed
"KRN",.4,1077,"DXS",4,2)
No autopsy performed
"KRN",.4,1077,"DXS",4,9)
Patient expired, unknown if autopsy performed
"KRN",.4,1077,"F",1)
"* FOLLOW-UP *";S1~K FUQA;Z;"K FUQA"~150~
"KRN",.4,1077,"F",2)
-160,^ONCO(160,^^S I(0,0)=D0 S DIP(1)=$S($D(^ONCO(165.5,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X  S D(0)=+X;Z;"PATIENT NAME:"~
"KRN",.4,1077,"F",3)
-160,"Status........................:";C3;S1~-160,15;C35~
"KRN",.4,1077,"F",4)
-160,I $P($G(^ONCO(160,D0,1)),U,1)=1 G A1R^ONCOY58;Z;"I $P($G(^ONCO(160,D0,1)),U,1)=1 G A1R^ONCOY58"~-160,"Cause of Death................:";C3~-160,19;C35~
"KRN",.4,1077,"F",5)
-160,"ICD Revision..................:";C3~-160,20;C35~-160,"State Death Cert..............:";C3~-160,19.1;C35;L45~-160,"Autopsy.......................:";C3~
"KRN",.4,1077,"F",6)
-160,22.9;C35~
"KRN",.4,1077,"H")
@
"KRN",.4,1077,"IOM")
80
"KRN",.4,1077,"LAST")

"KRN",.4,1077,"ROU")
^ONCOY58
"KRN",.4,1077,"ROUOLD")
ONCOY58
"KRN",.4,1077,"SUB")
1
"KRN",.4,1087,-1)
0^2
"KRN",.4,1087,0)
ONCO XABSTRACT RECORD^3151005.1022^^165.5^^@^3151118
"KRN",.4,1087,"DXS",1,1)
Male
"KRN",.4,1087,"DXS",1,2)
Female
"KRN",.4,1087,"DXS",1,3)
Other (hermaphrodite)
"KRN",.4,1087,"DXS",1,4)
Transsexual, NOS
"KRN",.4,1087,"DXS",1,5)
Transsexual, natal male
"KRN",.4,1087,"DXS",1,6)
Transsexual, natal female
"KRN",.4,1087,"DXS",1,9)
Not stated
"KRN",.4,1087,"DXS",2,0)
Dead
"KRN",.4,1087,"DXS",2,1)
Alive
"KRN",.4,1087,"DXS",3,0)
Incomplete
"KRN",.4,1087,"DXS",3,1)
Minimal data
"KRN",.4,1087,"DXS",3,2)
Partial
"KRN",.4,1087,"DXS",3,3)
Complete
"KRN",.4,1087,"DXS",3,"A")
Accession only
"KRN",.4,1087,"F",1)
W @IOF;Z;"W @IOF"~.03;C3~
"KRN",.4,1087,"F",2)
S X="PATIENT SUMMARY",X=$J("",$S($D(DIWR)+$D(DIWL)=2:DIWR-DIWL+1,$D(IOM):IOM,1:80)-$L(X)\2-$X)_X W X K DIP;X;Z;"CENTER("PATIENT SUMMARY")"~
"KRN",.4,1087,"F",3)
N %I,%H,% D NOW^%DTC S Y=X D DT K DIP;C68;L11;d;Z;"TODAY"~W !,"";Z;"W !,"""~
"KRN",.4,1087,"F",4)
-160,^ONCO(160,^^S I(0,0)=D0 S DIP(1)=$S($D(^ONCO(165.5,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X  S D(0)=+X;Z;"PATIENT NAME:"~-160,"Name: ";C3~
"KRN",.4,1087,"F",5)
-160,.01;X;C9~-160,"SSN: ";C40~-160,2;X;C47~-160,"Sex: ";C3~-160,10;X;C9~-160,"DOB: ";C40~-160,3;X;C47~-160,"Race: ";C3~-160,8;X;C9~-160,"Status: ";C40~
"KRN",.4,1087,"F",6)
-160,15;X;C48~-160,W !," ";Z;"W !," ""~-160,D DLC^ONCOCRF,DATEOT^ONCOES;Z;"D DLC^ONCOCRF,DATEOT^ONCOES"~-160,"Date of Last Contact or Death:";C3~
"KRN",.4,1087,"F",7)
-160,W X;C34;Z;"W X"~-160,"Autopsy Date/Time: ";C3~-160,23;X;C34~-160,"Autopsy #: ";C3~-160,24;X;C34~-160,"Cause of Death: ";C3~-160,19;X;C34~
"KRN",.4,1087,"F",8)
W !!," ";Z;"W !!," ""~"Abstract Status: ";C3~91;X~"Date Case Completed: ";C40~90;X~"Acc/Seq Number: ";C3~.061;X;C20;L13~"Date Dx: ";C3~3;X;C20;L10~
"KRN",.4,1087,"F",9)
"Site/Gp: ";C3~.01;X;C20~"Primary Site: ";C3~20;X;C20~"Histology: ";C3~22.3;X;C20~
"KRN",.4,1087,"H")
@
"KRN",.4,1087,"IOM")
80
"KRN",.4,1087,"LAST")

"KRN",.4,1087,"ROU")
^ONCOXU
"KRN",.4,1087,"ROUOLD")
ONCOXU
"KRN",.4,1087,"SUB")
1
"KRN",.4,2126,-1)
0^3
"KRN",.4,2126,0)
ONC DISEASE INDEX^3151006.1156^@^9000010.07^^@^3151030
"KRN",.4,2126,"F",1)
-9000001,^AUPNPAT(^^S I(0,0)=D0 S DIP(1)=$S($D(^AUPNVPOV(D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X  S D(0)=+X;Z;"PATIENT:"~
"KRN",.4,2126,"F",2)
-9000001,-2,^DPT(^^S I(100,0)=D0 S DIP(101)=$S($D(^AUPNPAT(D0,0)):^(0),1:"") S X=$P(DIP(101),U,1),X=X  S D(0)=+X;Z;"NAME:"~-9000001,-2,.0905;N;"PID"~
"KRN",.4,2126,"F",3)
.02;N;L25~.01;"DIAGNOSIS";C35;X~S ICD=$P(^AUPNVPOV(D0,0),U,1);X;Z;"S ICD=$P(^AUPNVPOV(D0,0),U,1)"~
"KRN",.4,2126,"F",4)
W ?42,$E($P($$ICDDX^ICDEX($$GET1^DIQ(80,ICD,.01)),U,4),1,25);"";Z;"W ?42,$E($P($$ICDDX^ICDEX($$GET1^DIQ(80,ICD,.01)),U,4),1,25)"~
"KRN",.4,2126,"F",5)
S DIP(1)=$S($D(^AUPNVPOV(D0,0)):^(0),1:"") S X=$P($G(^AUPNVSIT(+$P(DIP(1),U,3),0)),U),X=$P(X,".",1) S Y=X D DT K DIP;C69;"VISIT";d;L18;X;Z;"DATE(VISIT)"~
"KRN",.4,2126,"H")
DISEASE INDEX
"MBREQ")
0
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"PKG",14,-1)
1^1
"PKG",14,0)
ONCOLOGY^ONC^Oncology treatment tracking & tumor registry package.
"PKG",14,20,0)
^9.402P^^
"PKG",14,22,0)
^9.49I^1^1
"PKG",14,22,1,0)
2.2
"PKG",14,22,1,"PAH",1,0)
7^3160111
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
10
"RTN","ONCACDU1")
0^3^B36326632^B36708524
"RTN","ONCACDU1",1,0)
ONCACDU1 ;Hines OIFO/GWB - NAACCR extract utilities #1 ;05/08/12
"RTN","ONCACDU1",2,0)
 ;;2.2;ONCOLOGY;**1,4,7**;Jul 31, 2013;Build 5
"RTN","ONCACDU1",3,0)
 ;
"RTN","ONCACDU1",4,0)
BDATE(ACD160) ;Date of Birth [240] 196-203
"RTN","ONCACDU1",5,0)
 N D0,X,Y
"RTN","ONCACDU1",6,0)
 S D0=ACD160
"RTN","ONCACDU1",7,0)
 D DOB1^ONCOES
"RTN","ONCACDU1",8,0)
 S X=$G(X)
"RTN","ONCACDU1",9,0)
 Q X
"RTN","ONCACDU1",10,0)
 ;
"RTN","ONCACDU1",11,0)
BEHAV(IEN) ;Behavior Code (called by extract RULES)
"RTN","ONCACDU1",12,0)
 N BEHAV
"RTN","ONCACDU1",13,0)
 S BEHAV=$E($$HIST^ONCFUNC(IEN),5)
"RTN","ONCACDU1",14,0)
 Q BEHAV
"RTN","ONCACDU1",15,0)
 ;
"RTN","ONCACDU1",16,0)
ICD9(ACD160,ONIEN) ;COMOR/COMP 1-10 for ICD9 and Secondary Diagnosis for ICD10
"RTN","ONCACDU1",17,0)
 N ONCDANS
"RTN","ONCACDU1",18,0)
 S ONCDANS=$$GET1^DIQ(160,ACD160,ONIEN,"I")
"RTN","ONCACDU1",19,0)
 S:ONCDANS'="" ONCDANS=$$GET1^DIQ(80,ONCDANS,.01,"I")
"RTN","ONCACDU1",20,0)
 ;ICD10 invalid code
"RTN","ONCACDU1",21,0)
 I ($E(ONCDANS,1,7)="Invalid")!($E(ONCDANS,1,3)="-1") S ONCDANS=""
"RTN","ONCACDU1",22,0)
 S ONCDANS=$P(ONCDANS,".",1)_$P(ONCDANS,".",2)
"RTN","ONCACDU1",23,0)
 Q ONCDANS
"RTN","ONCACDU1",24,0)
 ;
"RTN","ONCACDU1",25,0)
DATE(ACDANS) ;Convert date to NAACCR format CCYYMMDD
"RTN","ONCACDU1",26,0)
 N DATE,X
"RTN","ONCACDU1",27,0)
 S DATE=""
"RTN","ONCACDU1",28,0)
 S X=ACDANS
"RTN","ONCACDU1",29,0)
 D DATEOT^ONCOES
"RTN","ONCACDU1",30,0)
 I X'="" D
"RTN","ONCACDU1",31,0)
 .I X="00/00/0000" S DATE="" Q
"RTN","ONCACDU1",32,0)
 .I X="88/88/8888" S DATE="" Q
"RTN","ONCACDU1",33,0)
 .I X="99/99/9999" S DATE="" Q
"RTN","ONCACDU1",34,0)
 .S DATE=$E(X,7,10)_$E(X,1,2)_$E(X,4,5)
"RTN","ONCACDU1",35,0)
 .S DATE=$S($E(DATE,5,8)=9999:$E(DATE,1,4),$E(DATE,7,8)=99:$E(DATE,1,6),1:DATE)
"RTN","ONCACDU1",36,0)
 Q DATE
"RTN","ONCACDU1",37,0)
 ;
"RTN","ONCACDU1",38,0)
DTFLAG(ACDANS,ITEM) ;Compute Date Flag
"RTN","ONCACDU1",39,0)
 N FLAG,N,REC
"RTN","ONCACDU1",40,0)
 S FLAG=""
"RTN","ONCACDU1",41,0)
 S N=ITEM
"RTN","ONCACDU1",42,0)
 D CHKFLGS  ;first check the Date Flag fields, make sure nothing entered
"RTN","ONCACDU1",43,0)
 I ONCDTFLG'="" S FLAG=ONCDTFLG G FLAG
"RTN","ONCACDU1",44,0)
 ;patch *2.2*4
"RTN","ONCACDU1",45,0)
 I (N=1861),(ACDANS'=""),(ACDANS'="9999999"),(ACDANS'="0000000"),(ACDANS'="8888888") G FLAG
"RTN","ONCACDU1",46,0)
 I N=1861 I ($$GET1^DIQ(165.5,IEN,71,"I")=4)!($$GET1^DIQ(165.5,IEN,71,"I")=5) S FLAG=11 G FLAG
"RTN","ONCACDU1",47,0)
 I ACDANS="" D
"RTN","ONCACDU1",48,0)
 .S FLAG=$S(N=1751:12,N=1861:10,1:"") Q
"RTN","ONCACDU1",49,0)
 I ACDANS="9999999" D
"RTN","ONCACDU1",50,0)
 .S FLAG=$S((N=391)!(N=439)!(N=581)!(N=1751):12,(N=448)!(N=591)!(N=601)!(N=1201)!(N=1211)!(N=1221)!(N=1231)!(N=1241)!(N=1251)!(N=1271)!(N=1281)!(N=1661)!(N=1681)!(N=1701)!(N=1861)!(N=3171)!(N=3181)!(N=3221)!(N=3231):10,1:"") Q
"RTN","ONCACDU1",51,0)
 I ACDANS="8888888" D
"RTN","ONCACDU1",52,0)
 .S FLAG=$S((N=448)!(N=439):11,N=391:12,(N=1211)!(N=1221)!(N=1231)!(N=1241)!(N=3221)!(N=3231):15,1:"") Q
"RTN","ONCACDU1",53,0)
 I ACDANS="0000000" D
"RTN","ONCACDU1",54,0)
 .S FLAG=$S((N=591)!(N=601)!(N=1201)!(N=1211)!(N=1221)!(N=1231)!(N=1241)!(N=1251)!(N=1271)!(N=1281)!(N=1661)!(N=1681)!(N=1701)!(N=1861)!(N=3171)!(N=3181)!(N=3221)!(N=3231):11,N=391:12,(N=448)!(N=439):15,1:"") Q
"RTN","ONCACDU1",55,0)
FLAG K ONCDTFLG,ZZFLDNUM
"RTN","ONCACDU1",56,0)
 Q FLAG
"RTN","ONCACDU1",57,0)
 ;
"RTN","ONCACDU1",58,0)
CHKFLGS ;CHECK THE DATE FLAG FIELDS IF USER NEEDED TO OVERRIDE VALUE
"RTN","ONCACDU1",59,0)
 ; if the DATE FLAG field is not NULL use that value to override the
"RTN","ONCACDU1",60,0)
 ; calculated value from DTFLAG entry point above
"RTN","ONCACDU1",61,0)
 S ONCDTFLG=""
"RTN","ONCACDU1",62,0)
 S ZZFLDNUM=$S(N=391:999.1,N=448:999.2,N=439:999.3,N=581:999.4,N=591:999.5,N=601:999.6,N=1271:999.7,N=1201:999.8,1:"")
"RTN","ONCACDU1",63,0)
 I ZZFLDNUM="" S ZZFLDNUM=$S(N=3171:999.9,N=3181:999.11,N=1211:999.12,N=3221:999.13,N=3231:999.14,N=1221:999.15,N=1231:999.16,N=1241:999.17,1:"")
"RTN","ONCACDU1",64,0)
 I ZZFLDNUM="" S ZZFLDNUM=$S(N=1251:999.18,N=1281:999.19,N=1861:999.21,N=1751:999.22,N=1661:999.23,N=1681:999.24,N=1701:999.25,1:"")
"RTN","ONCACDU1",65,0)
 I ZZFLDNUM="" Q
"RTN","ONCACDU1",66,0)
 S ONCDTFLG=$$GET1^DIQ(165.5,IEN,ZZFLDNUM,"I")
"RTN","ONCACDU1",67,0)
 Q
"RTN","ONCACDU1",68,0)
 ;
"RTN","ONCACDU1",69,0)
ADDDXST(IEN) ;Addr at DX--State [80] 145-146
"RTN","ONCACDU1",70,0)
 S ITEM=80 D CHKADDS I ONCADDF'="" Q ONCADDF  ;check overrides
"RTN","ONCACDU1",71,0)
 S XX=$S($$GET1^DIQ(165.5,IEN,16,"I")'="":$$GET1^DIQ(5,$$GET1^DIQ(165.5,IEN,16,"I"),1,"I"),1:"")
"RTN","ONCACDU1",72,0)
 S XX=$S(XX="CANAD":"CD",XX="EU":"YY",XX="FG":"YY",XX="MX":"XX",XX="NF":"NL",XX="PH":"XX",XX="UN":"ZZ",1:XX)
"RTN","ONCACDU1",73,0)
 Q XX
"RTN","ONCACDU1",74,0)
 ;
"RTN","ONCACDU1",75,0)
CHKADDS ;CHECK THE ADDRESS--STATE & COUNTRY FIELDS IF USER NEEDED TO OVERRIDE
"RTN","ONCACDU1",76,0)
 ; if the ADDRESS--STATE/COUNTRY field is not NULL use that value to
"RTN","ONCACDU1",77,0)
 ; overwrite the calculated value from the ADDDXST entry point and the
"RTN","ONCACDU1",78,0)
 ; CSTST,ADDCTRY entry points in ONCACDU2
"RTN","ONCACDU1",79,0)
 S ONCADDF="",N=ITEM
"RTN","ONCACDU1",80,0)
 S ZZFLDNUM=$S(N=80:999.26,N=102:999.27,N=1820:999.28,N=1832:999.29,1:"")
"RTN","ONCACDU1",81,0)
 I ZZFLDNUM="" Q
"RTN","ONCACDU1",82,0)
 S ONCADDF=$$GET1^DIQ(165.5,IEN,ZZFLDNUM,"I")
"RTN","ONCACDU1",83,0)
 K N,ZZFLDNUM Q
"RTN","ONCACDU1",84,0)
 ;
"RTN","ONCACDU1",85,0)
CNTY(IEN) ;COUNTY AT DX [90] 156-158
"RTN","ONCACDU1",86,0)
 N FIPSCODE
"RTN","ONCACDU1",87,0)
 S FIPSCODE=$$GET1^DIQ(165.5,IEN,10,"I")
"RTN","ONCACDU1",88,0)
 I (FIPSCODE=998)!(FIPSCODE=999) G QCNTY
"RTN","ONCACDU1",89,0)
 S FIPSCODE=$E($$GET1^DIQ(165.5,IEN,10,"I"),3,5)
"RTN","ONCACDU1",90,0)
QCNTY Q FIPSCODE
"RTN","ONCACDU1",91,0)
 ;
"RTN","ONCACDU1",92,0)
AGEDX(IEN) ;Age at Diagnosis [230] 119-121
"RTN","ONCACDU1",93,0)
 N ACDAGE,D0,X
"RTN","ONCACDU1",94,0)
 S D0=IEN
"RTN","ONCACDU1",95,0)
 D AGE^ONCOCOM S ACDAGE=$S(X=""!(X<0)!(X>999):"",1:X)
"RTN","ONCACDU1",96,0)
 Q ACDAGE
"RTN","ONCACDU1",97,0)
 ;
"RTN","ONCACDU1",98,0)
OCCUP(ACD160) ;Text--Usual Occupation [310] 143-182
"RTN","ONCACDU1",99,0)
 N X,OCCUP
"RTN","ONCACDU1",100,0)
 S X="UNKNOWN"
"RTN","ONCACDU1",101,0)
 S OCCUP=$O(^ONCO(160,ACD160,7,0))
"RTN","ONCACDU1",102,0)
 I OCCUP'<1 D
"RTN","ONCACDU1",103,0)
 .N OCC
"RTN","ONCACDU1",104,0)
 .S OCC=$P($G(^ONCO(160,ACD160,7,OCCUP,0)),U,1)
"RTN","ONCACDU1",105,0)
 .Q:OCC=""
"RTN","ONCACDU1",106,0)
 .S X=OCC
"RTN","ONCACDU1",107,0)
 Q X
"RTN","ONCACDU1",108,0)
 ;
"RTN","ONCACDU1",109,0)
IND(ACD160) ;Text--Usual Industry [320] 183-222
"RTN","ONCACDU1",110,0)
 N X,OCCUP
"RTN","ONCACDU1",111,0)
 S X="UNKNOWN"
"RTN","ONCACDU1",112,0)
 S OCCUP=$O(^ONCO(160,ACD160,7,0))
"RTN","ONCACDU1",113,0)
 I OCCUP'<1 D
"RTN","ONCACDU1",114,0)
 .N IND
"RTN","ONCACDU1",115,0)
 .S IND=$P($G(^ONCO(160,ACD160,7,OCCUP,0)),U,4)
"RTN","ONCACDU1",116,0)
 .Q:IND=""
"RTN","ONCACDU1",117,0)
 .S X=IND
"RTN","ONCACDU1",118,0)
 Q X
"RTN","ONCACDU1",119,0)
 ;
"RTN","ONCACDU1",120,0)
TOB(IEN) ;Tobacco History [340] 224-224 VACCR extract only
"RTN","ONCACDU1",121,0)
 N X,AASTOB
"RTN","ONCACDU1",122,0)
 S X=$P($G(^ONCO(160,ACD160,8)),U,2)
"RTN","ONCACDU1",123,0)
 S AASTOB=$S(X="Y":"Y",X="N":0,X="U":9,1:X)
"RTN","ONCACDU1",124,0)
 I AASTOB="Y" D
"RTN","ONCACDU1",125,0)
 .N X S X=""
"RTN","ONCACDU1",126,0)
 .S X=$O(^ONCO(160,ACD160,5,X),-1)
"RTN","ONCACDU1",127,0)
 .I X'<1 I $G(^ONCO(160,ACD160,5,X,0))'="" D
"RTN","ONCACDU1",128,0)
 ..N Y S Y=^ONCO(160,ACD160,5,X,0)
"RTN","ONCACDU1",129,0)
 ..I $P(Y,U,3)'="" S AASTOB=5 Q  ;Previous use
"RTN","ONCACDU1",130,0)
 ..S AASTOB=$S($P(Y,U)=1:1,$P(Y,U)=2:2,$P(Y,U)=3:2,$P(Y,U)=4:3,$P(Y,U)=5:3,$P(Y,U)=7:4,1:9)
"RTN","ONCACDU1",131,0)
 .I AASTOB="Y" S AASTOB=9
"RTN","ONCACDU1",132,0)
 Q AASTOB
"RTN","ONCACDU1",133,0)
 ;
"RTN","ONCACDU1",134,0)
ALC(IEN) ;Alcohol History [350] 225-225 VACCR extract only
"RTN","ONCACDU1",135,0)
 N X,AASALCO
"RTN","ONCACDU1",136,0)
 S X=$P($G(^ONCO(160,ACD160,8)),U,3)
"RTN","ONCACDU1",137,0)
 S AASALCO=$S(X="Y":"Y",X="N":0,X="U":9,1:X)
"RTN","ONCACDU1",138,0)
 I AASALCO="Y" D
"RTN","ONCACDU1",139,0)
 .N X S X=""
"RTN","ONCACDU1",140,0)
 .S X=$O(^ONCO(160,ACD160,6,X),-1)
"RTN","ONCACDU1",141,0)
 .I X'<1 I $G(^ONCO(160,ACD160,6,X,0))'="" D
"RTN","ONCACDU1",142,0)
 ..N Y S Y=^ONCO(160,ACD160,6,X,0)
"RTN","ONCACDU1",143,0)
 ..I $P(Y,U,4)'="" S AASALCO=2 Q  ;Past history of alcohol use
"RTN","ONCACDU1",144,0)
 ..S AASALCO=1
"RTN","ONCACDU1",145,0)
 .I AASALCO="Y" S AASALCO=9
"RTN","ONCACDU1",146,0)
 Q AASALCO
"RTN","ONCACDU1",147,0)
 ;
"RTN","ONCACDU1",148,0)
SG(IEN,TYPE) ;TNM Stage Groups
"RTN","ONCACDU1",149,0)
 ;TNM Path Stage Group  [910]  569-570
"RTN","ONCACDU1",150,0)
 ;TNM Clin Stage Group  [970]  579-580
"RTN","ONCACDU1",151,0)
 N GS
"RTN","ONCACDU1",152,0)
 S GS=""
"RTN","ONCACDU1",153,0)
 I TYPE="" Q GS
"RTN","ONCACDU1",154,0)
 I TYPE="P" S GS=$$GET1^DIQ(165.5,IEN,88,"I")
"RTN","ONCACDU1",155,0)
 I TYPE="C" S GS=$$GET1^DIQ(165.5,IEN,38,"I")
"RTN","ONCACDU1",156,0)
 Q GS
"RTN","ONCACDU1",157,0)
 ;
"RTN","ONCACDU1",158,0)
CC ;Comorbid/Complication 1-10
"RTN","ONCACDU1",159,0)
 ;No longer needed.  Used by NAACCR v11.3.
"RTN","ONCACDU1",160,0)
 ;[3110] 675-679
"RTN","ONCACDU1",161,0)
 ;[3120] 680-684
"RTN","ONCACDU1",162,0)
 ;[3130] 685-689
"RTN","ONCACDU1",163,0)
 ;[3140] 690-694
"RTN","ONCACDU1",164,0)
 ;[3150] 695-699
"RTN","ONCACDU1",165,0)
 ;[3160] 700-704
"RTN","ONCACDU1",166,0)
 ;[3161] 717-721
"RTN","ONCACDU1",167,0)
 ;[3162] 722-726
"RTN","ONCACDU1",168,0)
 ;[3163] 727-731
"RTN","ONCACDU1",169,0)
 ;[3164] 732-736
"RTN","ONCACDU1",170,0)
 ;S CCEX(1)="00000"
"RTN","ONCACDU1",171,0)
 ;F CCSUB=1:1:10 S CC(CCSUB)=""
"RTN","ONCACDU1",172,0)
 ;S CCSUB=0
"RTN","ONCACDU1",173,0)
 ;F FLD=25:.1:25.9 S CC=$$GET1^DIQ(160,ACD160,FLD,"I") S:CC'="" CC=$$GET1^DIQ(80,CC,.01,"I") S CCSUB=CCSUB+1,CC(CCSUB)=$P(CC," ",1)
"RTN","ONCACDU1",174,0)
 ;F CCEXSUB=1:1:10 S CCEX(CCEXSUB)=""
"RTN","ONCACDU1",175,0)
 ;I CC(1)="" Q
"RTN","ONCACDU1",176,0)
 ;I EXT="VACCR" F CCSUB=1:1:10 S CCEX(CCSUB)=$P(CC(CCSUB),".",1)_$P(CC(CCSUB),".",2) G CCEX
"RTN","ONCACDU1",177,0)
 ;S CCEXSUB=0
"RTN","ONCACDU1",178,0)
 ;S CCSUB=0 F  S CCSUB=$O(CC(CCSUB)) Q:CCSUB'>0  D
"RTN","ONCACDU1",179,0)
 ;.I ($E(CC(CCSUB),1)="E")!($E(CC(CCSUB),1)="V")!((+CC(CCSUB)>99.9)&(+CC(CCSUB)<290))!(+CC(CCSUB)>319) S CCEXSUB=CCEXSUB+1,CCEX(CCEXSUB)=$P(CC(CCSUB),".",1)_$P(CC(CCSUB),".",2)
"RTN","ONCACDU1",180,0)
CCEX ;K CC,CCEXSUB,CCSUB,FLD
"RTN","ONCACDU1",181,0)
 Q
"RTN","ONCACDU1",182,0)
 ;
"RTN","ONCACDU1",183,0)
RXCOD(IEN) ;RX Coding System--Current [1460] 888-889
"RTN","ONCACDU1",184,0)
 N OUT
"RTN","ONCACDU1",185,0)
 S OUT="06"
"RTN","ONCACDU1",186,0)
 Q OUT
"RTN","ONCACDU1",187,0)
 ;
"RTN","ONCACDU1",188,0)
FHCT ;Family History of Cancer Text 1456-1505 VACCR extract only
"RTN","ONCACDU1",189,0)
 K ONC S IEN160=ACD160_"," D GETS^DIQ(160,IEN160,"44*","","ONC")
"RTN","ONCACDU1",190,0)
 S (ACDANS,FHCTIEN)=""
"RTN","ONCACDU1",191,0)
 F  S FHCTIEN=$O(ONC(160.044,FHCTIEN)) Q:FHCTIEN'>0  D
"RTN","ONCACDU1",192,0)
 .S FHCT=ONC(160.044,FHCTIEN,.01)_"("_ONC(160.044,FHCTIEN,1)_")"
"RTN","ONCACDU1",193,0)
 .Q:($L(ACDANS)+$L(FHCT))>50
"RTN","ONCACDU1",194,0)
 .S ACDANS=ACDANS_FHCT_"/"
"RTN","ONCACDU1",195,0)
 S ACDANS=$E(ACDANS,1,$L(ACDANS)-1)
"RTN","ONCACDU1",196,0)
 K ONC,IEN160,FHCTIEN,FHCT
"RTN","ONCACDU1",197,0)
 Q
"RTN","ONCACDU1",198,0)
 ;
"RTN","ONCACDU1",199,0)
PHCT ;Patient History of Cancer Text 1785-1804 VACCR extract only
"RTN","ONCACDU1",200,0)
 S ACDANS=""
"RTN","ONCACDU1",201,0)
 F I=148.1,148.2,148.3,148.4 S PHCTPT=$$GET1^DIQ(165.5,IEN,I,"I") D
"RTN","ONCACDU1",202,0)
 .Q:PHCTPT=""
"RTN","ONCACDU1",203,0)
 .S PHCT=$$GET1^DIQ(164.2,PHCTPT,.01,"I")
"RTN","ONCACDU1",204,0)
 .Q:PHCT="NOT APPLICABLE"
"RTN","ONCACDU1",205,0)
 .Q:($L(ACDANS)+$L(PHCT))>20
"RTN","ONCACDU1",206,0)
 .S ACDANS=ACDANS_PHCT_"/"
"RTN","ONCACDU1",207,0)
 S ACDANS=$E(ACDANS,1,$L(ACDANS)-1)
"RTN","ONCACDU1",208,0)
 K I,PHCTPT,PHCT
"RTN","ONCACDU1",209,0)
 Q
"RTN","ONCACDU1",210,0)
 ;
"RTN","ONCACDU1",211,0)
NL ;Name--Last [2230] 1947-1971
"RTN","ONCACDU1",212,0)
 S ACDANS=$$STRIP^XLFSTR(ACDANS," !""""#$%&'()*+,./:;<=>?[>]^_\{|}~`")
"RTN","ONCACDU1",213,0)
 Q
"RTN","ONCACDU2")
0^2^B117684945^B117837157
"RTN","ONCACDU2",1,0)
ONCACDU2 ;Hines OIFO/GWB - Utility routine ;05/03/12
"RTN","ONCACDU2",2,0)
 ;;2.2;ONCOLOGY;**1,4,7**;Jul 31, 2013;Build 5
"RTN","ONCACDU2",3,0)
 ;
"RTN","ONCACDU2",4,0)
VAFLD(ACDANS) ;Convert data to NAACCR format
"RTN","ONCACDU2",5,0)
 I ACDANS="N" S ACDANS=0
"RTN","ONCACDU2",6,0)
 I ACDANS="Y" S ACDANS=1
"RTN","ONCACDU2",7,0)
 I ACDANS="U" S ACDANS=9
"RTN","ONCACDU2",8,0)
 Q ACDANS
"RTN","ONCACDU2",9,0)
 ;
"RTN","ONCACDU2",10,0)
ICN(ACD160) ;Patient ICN (2,991.01 & 991.02) [72-94]
"RTN","ONCACDU2",11,0)
 ;  ICN OR X =999999999999V999999 format
"RTN","ONCACDU2",12,0)
 N X,ONC201,ONCPT01
"RTN","ONCACDU2",13,0)
 S X=""
"RTN","ONCACDU2",14,0)
 I ACD160="" Q X
"RTN","ONCACDU2",15,0)
 S ONC201=$P($G(^ONCO(160,ACD160,0)),U,1)
"RTN","ONCACDU2",16,0)
 S ONCPT01=$P(ONC201,";",1)
"RTN","ONCACDU2",17,0)
 S X=$$GETICN^MPIF001(ONCPT01)
"RTN","ONCACDU2",18,0)
 I $P(X,U,1)="-1" S X=""
"RTN","ONCACDU2",19,0)
 Q X
"RTN","ONCACDU2",20,0)
 ;
"RTN","ONCACDU2",21,0)
VASIT() ;VISN (160.1,7) [2340-2341]
"RTN","ONCACDU2",22,0)
 N X
"RTN","ONCACDU2",23,0)
 S OSPIEN=$O(^ONCO(160.1,0))
"RTN","ONCACDU2",24,0)
 S X=$P($G(^ONCO(160.1,OSPIEN,1)),U,7)
"RTN","ONCACDU2",25,0)
 K OSPIEN
"RTN","ONCACDU2",26,0)
 Q X
"RTN","ONCACDU2",27,0)
 ;
"RTN","ONCACDU2",28,0)
COCACC() ;COC ACCREDITATION (160.1,68) [2547-2548]
"RTN","ONCACDU2",29,0)
 N X
"RTN","ONCACDU2",30,0)
 S OSPIEN=$O(^ONCO(160.1,0))
"RTN","ONCACDU2",31,0)
 S X=$P($G(^ONCO(160.1,OSPIEN,7)),U,2)
"RTN","ONCACDU2",32,0)
 K OSPIEN
"RTN","ONCACDU2",33,0)
 Q X
"RTN","ONCACDU2",34,0)
 ;
"RTN","ONCACDU2",35,0)
SNCNT(IEN) ;Sequence Number--Central [380] 281-282
"RTN","ONCACDU2",36,0)
 N BEHAV,DATEDX,HIST,PRIMST,X
"RTN","ONCACDU2",37,0)
 S DATEDX=$E($$GET1^DIQ(165.5,IEN,3,"I"),1,3)
"RTN","ONCACDU2",38,0)
 S PRIMST=$$GET1^DIQ(165.5,IEN,20,"I")
"RTN","ONCACDU2",39,0)
 S HIST=$E($$GET1^DIQ(165.5,IEN,22.3,"I"),1,4)
"RTN","ONCACDU2",40,0)
 S BEHAV=$E($$GET1^DIQ(165.5,IEN,22.3,"I"),5)
"RTN","ONCACDU2",41,0)
 S X=""
"RTN","ONCACDU2",42,0)
 I DATEDX>295,DATEDX<303,$E(PRIMST,3,4)=53,HIST<9590,BEHAV=2 S X=98
"RTN","ONCACDU2",43,0)
 Q X
"RTN","ONCACDU2",44,0)
 ;
"RTN","ONCACDU2",45,0)
COCO(IEN) ;COC Coding Sys--Original [2150] 1202-1203
"RTN","ONCACDU2",46,0)
 N X
"RTN","ONCACDU2",47,0)
 S DATEDX=$$GET1^DIQ(165.5,IEN,3,"I")
"RTN","ONCACDU2",48,0)
 S X=$S(DATEDX>3021231:"08",DATEDX>2951231:"07",1:"05")
"RTN","ONCACDU2",49,0)
 Q X
"RTN","ONCACDU2",50,0)
 ;
"RTN","ONCACDU2",51,0)
VENDOR() ;Vendor Name [2170] 1204-1213
"RTN","ONCACDU2",52,0)
 N X,VERSION,EXTR,SUFFIX
"RTN","ONCACDU2",53,0)
 S EXTR=$G(^ONCO(160.16,EXTRACT,0))
"RTN","ONCACDU2",54,0)
 S SUFFIX=$S(EXTR["VACCR":"A",EXTR["STATE":"B",1:"")
"RTN","ONCACDU2",55,0)
 S VERSION=$P($G(^ONCO(160.16,EXTRACT,0))," ",3)
"RTN","ONCACDU2",56,0)
 S X="VA"_VERSION_$E($T(LOGO+3^ONCODIS),62,64)_SUFFIX
"RTN","ONCACDU2",57,0)
 Q X
"RTN","ONCACDU2",58,0)
 ;
"RTN","ONCACDU2",59,0)
WORD(IEN,NODE,LEN) ;Get word processing data
"RTN","ONCACDU2",60,0)
 N X
"RTN","ONCACDU2",61,0)
 S X=""
"RTN","ONCACDU2",62,0)
 I $D(^ONCO(165.5,IEN,NODE,0)) D
"RTN","ONCACDU2",63,0)
 .N CNT,LINE,ONCLINE
"RTN","ONCACDU2",64,0)
 .S CNT=0
"RTN","ONCACDU2",65,0)
 .S (LINE,ONCLINE)=""
"RTN","ONCACDU2",66,0)
 .F  S CNT=$O(^ONCO(165.5,IEN,NODE,CNT)) Q:CNT<1  D  Q:($L(ONCLINE)>LEN)
"RTN","ONCACDU2",67,0)
 ..Q:'$D(^ONCO(165.5,IEN,NODE,CNT,0))
"RTN","ONCACDU2",68,0)
 ..S ONCLINE=LINE_^ONCO(165.5,IEN,NODE,CNT,0)_" "
"RTN","ONCACDU2",69,0)
 ..I ($L(ONCLINE)>LEN) S LINE=$E(ONCLINE,1,LEN) Q
"RTN","ONCACDU2",70,0)
 ..S LINE=LINE_^ONCO(165.5,IEN,NODE,CNT,0)_" "
"RTN","ONCACDU2",71,0)
 .S X=LINE
"RTN","ONCACDU2",72,0)
 S X=$TR(X,$C(10,12,13),"   ")
"RTN","ONCACDU2",73,0)
 Q X
"RTN","ONCACDU2",74,0)
 ;
"RTN","ONCACDU2",75,0)
STAGE(IEN,TYPE) ;TNM Descriptors
"RTN","ONCACDU2",76,0)
 ;TNM Path Descriptor [910] 956-956
"RTN","ONCACDU2",77,0)
 ;TNM Clin Descriptor [980] 974-974
"RTN","ONCACDU2",78,0)
 N CD,LOC,PD,X
"RTN","ONCACDU2",79,0)
 S X=""
"RTN","ONCACDU2",80,0)
 S CD=$$GET1^DIQ(165.5,IEN,241,"I")
"RTN","ONCACDU2",81,0)
 S PD=$$GET1^DIQ(165.5,IEN,242,"I")
"RTN","ONCACDU2",82,0)
 I TYPE="C",CD'="" S X=CD G STAGEEX
"RTN","ONCACDU2",83,0)
 I TYPE="P",PD'="" S X=PD G STAGEEX
"RTN","ONCACDU2",84,0)
 S LOC=$S(TYPE="P":89.1,TYPE="C":37,1:"")
"RTN","ONCACDU2",85,0)
 I TYPE'="" D
"RTN","ONCACDU2",86,0)
 .N STRING
"RTN","ONCACDU2",87,0)
 .S STRING=$$GET1^DIQ(165.5,IEN,LOC,"E")
"RTN","ONCACDU2",88,0)
 .I ($P(STRING," ")["m")&($P(STRING," ")["y") S X=6 Q
"RTN","ONCACDU2",89,0)
 .I $P(STRING," ")["m" S X=3 Q
"RTN","ONCACDU2",90,0)
 .I TYPE="P",$P(STRING," ")["y" S X=4 Q
"RTN","ONCACDU2",91,0)
STAGEEX Q X
"RTN","ONCACDU2",92,0)
 ;
"RTN","ONCACDU2",93,0)
CCOUNTY(ACD160) ;County--Current [1840] 2192-2194
"RTN","ONCACDU2",94,0)
 I $$DPTLRT^ONCOES(ACD160)="LRT" S X="" G CCEX
"RTN","ONCACDU2",95,0)
 N DPT,DPTPNT,X
"RTN","ONCACDU2",96,0)
 S DPT=$$GET1^DIQ(160,ACD160,.01,"I")
"RTN","ONCACDU2",97,0)
 S DPTPNT=$P(DPT,";",1)
"RTN","ONCACDU2",98,0)
 S X=$$GET1^DIQ(2,DPTPNT,.117)
"RTN","ONCACDU2",99,0)
CCEX Q X
"RTN","ONCACDU2",100,0)
 ;
"RTN","ONCACDU2",101,0)
SUB(IEN,CNT,FIELD) ;
"RTN","ONCACDU2",102,0)
 ;Subsq RX 2nd Course Date [1660] 988-995
"RTN","ONCACDU2",103,0)
 N HEMA,HEMAPT,I,X
"RTN","ONCACDU2",104,0)
 S CNT=CNT-1
"RTN","ONCACDU2",105,0)
 S X=""
"RTN","ONCACDU2",106,0)
 I $O(^ONCO(165.5,IEN,4,0)) D
"RTN","ONCACDU2",107,0)
 .N IENS,SUB,SUBFLD,ENTRY,SUBIEN
"RTN","ONCACDU2",108,0)
 .S SUBIEN=0 F I=1:1 S SUBIEN=$O(^ONCO(165.5,IEN,4,SUBIEN)) Q:(I=CNT)!(SUBIEN'>0)
"RTN","ONCACDU2",109,0)
 .I SUBIEN="" S X="" Q
"RTN","ONCACDU2",110,0)
 .S IENS=SUBIEN_","_IEN
"RTN","ONCACDU2",111,0)
 .S ENTRY=$$GET1^DIQ(165.51,IENS,FIELD,"I") I ENTRY="",FIELD'=".07",FIELD'=".08" S X="" Q
"RTN","ONCACDU2",112,0)
 .S HEMA=""
"RTN","ONCACDU2",113,0)
 .S HEMAPT=$$GET1^DIQ(165.51,IENS,.02,"I")
"RTN","ONCACDU2",114,0)
 .S:HEMAPT'="" HEMA=$P($G(^ONCO(167,HEMAPT,0)),U,1)
"RTN","ONCACDU2",115,0)
 .I $S(FIELD=".01":1,FIELD=".05":1,FIELD=".06":1,FIELD=".07":1,FIELD=".08":1,FIELD=".09":1,FIELD="37":1,FIELD=".041":1,FIELD=".051":1,FIELD=".061":1,FIELD=".071":1,FIELD=".081":1,FIELD=".091":1,1:0) D  Q
"RTN","ONCACDU2",116,0)
 ..I FIELD=".06" S X=$S(ENTRY="01":1,ENTRY="02":2,ENTRY="03":3,$E(ENTRY,1)=8:0,1:ENTRY) Q
"RTN","ONCACDU2",117,0)
 ..I FIELD=".07" S X=$S(ENTRY="00":0,ENTRY="01":1,$E(ENTRY,1)=8:0,ENTRY=99:9,1:"") Q:X'=""  S X=$S(HEMA=30:2,HEMA=40:2,1:"") Q
"RTN","ONCACDU2",118,0)
 ..I FIELD=".08" S X=$S(ENTRY="01":1,ENTRY=87:7,ENTRY=88:8,$E(ENTRY,1)=8:0,ENTRY=99:9,1:ENTRY) Q:X'=""  S X=$S(HEMA=10:4,HEMA=11:2,HEMA=12:3,HEMA=20:5,1:"") Q
"RTN","ONCACDU2",119,0)
 ..S X=ENTRY
"RTN","ONCACDU2",120,0)
 .I $$GET1^DIQ(165.5,IEN,3,"I")<2980000 S X=ENTRY Q
"RTN","ONCACDU2",121,0)
 .S SUBFLD=$S(FIELD=33:"RR5",FIELD=35:"SC5",FIELD=36:"SO5",FIELD=.04:"SPS",1:"") I SUBFLD="" S X="" Q
"RTN","ONCACDU2",122,0)
 .S X=$$SUB164^ONCACDU2(IEN,SUBFLD,ENTRY)
"RTN","ONCACDU2",123,0)
 I FIELD=.04,$L(X)=1 S X="0"_X
"RTN","ONCACDU2",124,0)
 Q X
"RTN","ONCACDU2",125,0)
 ;
"RTN","ONCACDU2",126,0)
SUB164(IEN,SUBFLD,ENTRY) ;ICDO TOPOGRAPHY (164)
"RTN","ONCACDU2",127,0)
 N X,TOP1,TOP2
"RTN","ONCACDU2",128,0)
 S X=""
"RTN","ONCACDU2",129,0)
 S TOP1=$$GET1^DIQ(165.5,IEN,20,"I") D:TOP1'=""
"RTN","ONCACDU2",130,0)
 .S TOP2=$$GET1^DIQ(164,TOP1,107,"I")
"RTN","ONCACDU2",131,0)
 .I (TOP1=67420)!(TOP1=67421)!(TOP1=67423)!(TOP1=67424)!($E(TOP1,3,4)=76)!(TOP1=67809),($G(FIELD)=58.6)!($G(FIELD)=58.7) S TOP2=67420
"RTN","ONCACDU2",132,0)
 .I ($G(FIELD)=58.2)!($G(FIELD)=50.2)!($G(FIELD)=138)!($G(FIELD)=138.1)!($G(FIELD)=139)!($G(FIELD)=139.1)!($G(FIELD)=74)!($G(FIELD)=23),($E(TOP1,3,4)=76)!(TOP1=67809)!(TOP1=67420)!(TOP1=67421)!(TOP1=67423)!(TOP1=67424) S TOP2=67141
"RTN","ONCACDU2",133,0)
 .I ($G(FIELD)=58.2)!($G(FIELD)=50.2),TOP1=67422 S TOP2=67770
"RTN","ONCACDU2",134,0)
 .I $G(SUBFLD)="SUA",($E(TOP1,3,4)=77) S TOP2=67141
"RTN","ONCACDU2",135,0)
 .D:TOP2'=""
"RTN","ONCACDU2",136,0)
 ..S X=$P($G(^ONCO(164,TOP2,SUBFLD,ENTRY,0)),U,2)
"RTN","ONCACDU2",137,0)
 Q X
"RTN","ONCACDU2",138,0)
 ;
"RTN","ONCACDU2",139,0)
RXPRI(IEN,FIELD,SUBFLD) ;
"RTN","ONCACDU2",140,0)
 ;RX Hosp--Surg Prim Site    [670] 457-458
"RTN","ONCACDU2",141,0)
 ;RX Hosp--Surg Site 98-02   [746] 478-479
"RTN","ONCACDU2",142,0)
 ;RX Hosp--Scope Reg 98-02   [747] 480-480
"RTN","ONCACDU2",143,0)
 ;RX Hosp--Surg Oth 98-02    [748] 481-481
"RTN","ONCACDU2",144,0)
 ;RX Summ--Surg Prim Site   [1290] 859-860
"RTN","ONCACDU2",145,0)
 ;RX Summ--Surgical Approch [1310] 865-865
"RTN","ONCACDU2",146,0)
 ;RX Summ--Reconstruct 1st  [1330] 867-867
"RTN","ONCACDU2",147,0)
 ;RX Summ--Surg Site 98-02  [1646] 939-940
"RTN","ONCACDU2",148,0)
 ;RX Summ--Scope Reg 98-02  [1647] 941-941
"RTN","ONCACDU2",149,0)
 ;RX Summ--Surg Oth 98-02   [1648] 942-942
"RTN","ONCACDU2",150,0)
 N X,ENTRY
"RTN","ONCACDU2",151,0)
 S X=""
"RTN","ONCACDU2",152,0)
 S TOP1=$$GET1^DIQ(165.5,IEN,20,"I")
"RTN","ONCACDU2",153,0)
 S ENTRY=$$GET1^DIQ(165.5,IEN,FIELD,"I") D:ENTRY'=""
"RTN","ONCACDU2",154,0)
 .I (TOP1=67420)!(TOP1=67421)!(TOP1=67423)!(TOP1=67424)!($E(TOP1,3,4)=76)!(TOP1=67809),($G(FIELD)=58.6)!($G(FIELD)=58.7) S X=$$SUB164^ONCACDU2(IEN,SUBFLD,ENTRY) Q
"RTN","ONCACDU2",155,0)
 .I $$GET1^DIQ(165.5,IEN,3,"I")<2980000,(FIELD=23)!(FIELD=74)!(FIELD=50.2)!(FIELD=58.2)!(FIELD=58.6)!(FIELD=58.7) S X=$S(FIELD=23:$$GET1^DIQ(160.4,ENTRY,.01,"I"),FIELD=74:$$GET1^DIQ(160.6,ENTRY,.01,"I"),1:ENTRY) Q
"RTN","ONCACDU2",156,0)
 .S X=$$SUB164^ONCACDU2(IEN,SUBFLD,ENTRY)
"RTN","ONCACDU2",157,0)
 Q X
"RTN","ONCACDU2",158,0)
 ;
"RTN","ONCACDU2",159,0)
FNODE(ACD160,FIELD) ;FOLLOW-UP (160,400)
"RTN","ONCACDU2",160,0)
 ;Date of Last Contact     [1750] 1294-1301
"RTN","ONCACDU2",161,0)
 ;Vital Status             [1760] 1302-1302
"RTN","ONCACDU2",162,0)
 ;Quality of Survival      [1780] 1304-1304
"RTN","ONCACDU2",163,0)
 ;Follow-Up Source         [1790] 1305-1305
"RTN","ONCACDU2",164,0)
 ;Next Follow-Up Source    [1800] 1306-1306
"RTN","ONCACDU2",165,0)
 ;Unusual Follow-Up Method [1850] 1341-1341
"RTN","ONCACDU2",166,0)
 ;Following Registry       [2440] 2475-2484
"RTN","ONCACDU2",167,0)
 N FNODE,X
"RTN","ONCACDU2",168,0)
 S FNODE=$$LAST(ACD160),X=""
"RTN","ONCACDU2",169,0)
 I FNODE'="" D
"RTN","ONCACDU2",170,0)
 .N IENS
"RTN","ONCACDU2",171,0)
 .S IENS=FNODE_","_ACD160_","
"RTN","ONCACDU2",172,0)
 .S X=$$GET1^DIQ(160.04,IENS,FIELD,"I")
"RTN","ONCACDU2",173,0)
 Q X
"RTN","ONCACDU2",174,0)
 ;
"RTN","ONCACDU2",175,0)
LAST(ACD160) ;Get last FOLLOW-UP(160,400)
"RTN","ONCACDU2",176,0)
 N DLC
"RTN","ONCACDU2",177,0)
 S X="",DLC=0
"RTN","ONCACDU2",178,0)
 S DLC=$O(^ONCO(160,ACD160,"F","AA",DLC))
"RTN","ONCACDU2",179,0)
 S:DLC'="" X=$O(^ONCO(160,ACD160,"F","AA",DLC,0))
"RTN","ONCACDU2",180,0)
 I X'>0 S X=""
"RTN","ONCACDU2",181,0)
 Q X
"RTN","ONCACDU2",182,0)
 ;
"RTN","ONCACDU2",183,0)
FCNODE(ACD160,FIELD,IE) ;FOLLOW-UP CONTACT (160,420)
"RTN","ONCACDU2",184,0)
 ;Follow-Up Contact--City  [1842] 1357-1376
"RTN","ONCACDU2",185,0)
 ;Follow-Up Contact--State [1844] 1377-1378
"RTN","ONCACDU2",186,0)
 ;Follow-Up Contact--Postal[1846] 1379-1387
"RTN","ONCACDU2",187,0)
 ;Follow-Up Contact--Name  [2394] 2284-2313
"RTN","ONCACDU2",188,0)
 ;Follow-Up Contact--No&St [2392] 2314-2353
"RTN","ONCACDU2",189,0)
 ;Follow-Up Contact--Suppl [2393] 2354-2393
"RTN","ONCACDU2",190,0)
 N CONTACT,FCNODE,X
"RTN","ONCACDU2",191,0)
 S X=""
"RTN","ONCACDU2",192,0)
 S FCNODE=$O(^ONCO(160,ACD160,"C","B"),-1)
"RTN","ONCACDU2",193,0)
 I FCNODE'="" D
"RTN","ONCACDU2",194,0)
 .N IENS
"RTN","ONCACDU2",195,0)
 .S IENS=FCNODE_","_ACD160_","
"RTN","ONCACDU2",196,0)
 .S CONTACT=$$GET1^DIQ(160.03,IENS,1,"I")
"RTN","ONCACDU2",197,0)
 I $G(CONTACT) S X=$$GET1^DIQ(165,CONTACT,FIELD,IE)
"RTN","ONCACDU2",198,0)
 Q X
"RTN","ONCACDU2",199,0)
 ;
"RTN","ONCACDU2",200,0)
CS(IEN) ;Cancer Status [1770] 1303-1303
"RTN","ONCACDU2",201,0)
 N X,Z,FNODE
"RTN","ONCACDU2",202,0)
 S FNODE=0
"RTN","ONCACDU2",203,0)
 S X=""
"RTN","ONCACDU2",204,0)
 S FNODE=$O(^ONCO(165.5,IEN,"TS",FNODE))
"RTN","ONCACDU2",205,0)
 I FNODE>0 D
"RTN","ONCACDU2",206,0)
 .N IENS,PT
"RTN","ONCACDU2",207,0)
 .S FNODE=$O(^ONCO(165.5,IEN,"TS"," "),-1)
"RTN","ONCACDU2",208,0)
 .Q:FNODE<1
"RTN","ONCACDU2",209,0)
 .S IENS=FNODE_","_IEN_","
"RTN","ONCACDU2",210,0)
 .S PT=$$GET1^DIQ(165.573,IENS,.02,"I")
"RTN","ONCACDU2",211,0)
 .Q:PT<1
"RTN","ONCACDU2",212,0)
 .S X=$$GET1^DIQ(164.42,PT,1,"I")
"RTN","ONCACDU2",213,0)
 Q X
"RTN","ONCACDU2",214,0)
 ;
"RTN","ONCACDU2",215,0)
CCTST(ACD160) ;
"RTN","ONCACDU2",216,0)
 ;Addr Current--City      [1810] 1307-1326
"RTN","ONCACDU2",217,0)
 N D0,PT,X
"RTN","ONCACDU2",218,0)
 S D0=ACD160
"RTN","ONCACDU2",219,0)
 S X="" S PT=$P($G(^ONCO(160,D0,0)),";",1)
"RTN","ONCACDU2",220,0)
 I $$DPTLRT^ONCOES(D0)="LRT" S X=$$GET1^DIQ(67,PT,.114,"E")
"RTN","ONCACDU2",221,0)
 I $$DPTLRT^ONCOES(D0)="DPT" S X=$$GET1^DIQ(2,PT,.114,"E")
"RTN","ONCACDU2",222,0)
 S X=$$STRIP^XLFSTR(X,"!""""#$%&'()*+,-./:;<=>?[>]^_\{|}~`")
"RTN","ONCACDU2",223,0)
 Q X
"RTN","ONCACDU2",224,0)
 ;
"RTN","ONCACDU2",225,0)
CSTST(ACD160) ;
"RTN","ONCACDU2",226,0)
 ;Addr Current--State [1820] 1327-1328
"RTN","ONCACDU2",227,0)
 N ONCX,XPT,XX,PT
"RTN","ONCACDU2",228,0)
 S (XPT,XX)=""
"RTN","ONCACDU2",229,0)
 S ITEM=1820 D CHKADDS^ONCACDU1 I ONCADDF'="" Q ONCADDF  ;check override
"RTN","ONCACDU2",230,0)
 S ONCX=$$GET1^DIQ(160,ACD160,.115,"E")
"RTN","ONCACDU2",231,0)
 ;S X=$S(X="CANAD":"CD",X="EU":"YY",X="MX":"XX",X="NF":"NL",X="PH":"XX",X="UN":"ZZ",1:X)
"RTN","ONCACDU2",232,0)
 I ONCX="" S PT=$P($G(^ONCO(160,ACD160,0)),";",1) D
"RTN","ONCACDU2",233,0)
 .I $$DPTLRT(ACD160)="LRT" S XPT=$$GET1^DIQ(67,PT,.115,"I") S:$G(XPT) XX=$$GET1^DIQ(5,XPT,1,"E")
"RTN","ONCACDU2",234,0)
 .I $$DPTLRT(ACD160)="DPT" S XPT=$$GET1^DIQ(2,PT,.1173,"I") S:$G(XPT) XX=$$GET1^DIQ(779.004,XPT,.01,"E") D:XPT=""
"RTN","ONCACDU2",235,0)
 ..S XPT=$$GET1^DIQ(2,PT,.115,"I") S:$G(XPT) XX=$$GET1^DIQ(5,XPT,1,"E")
"RTN","ONCACDU2",236,0)
 I (ONCX=""),(XX'=""),(XX'="USA"),(XX'="CAN") S ONCX="XX"
"RTN","ONCACDU2",237,0)
 I (ONCX=""),(XX="") S ONCX="YY"
"RTN","ONCACDU2",238,0)
 I (ONCX=""),(XX="USA") S ONCX="US"
"RTN","ONCACDU2",239,0)
 I (ONCX=""),(XX="CAN") S ONCX="CD"
"RTN","ONCACDU2",240,0)
 I ONCX="UN" S ONCX="ZZ"
"RTN","ONCACDU2",241,0)
 Q ONCX
"RTN","ONCACDU2",242,0)
 ;
"RTN","ONCACDU2",243,0)
ADDCTRY(IEN,ITEM) ;
"RTN","ONCACDU2",244,0)
 ;Addr at DX--Country [102] 436-438
"RTN","ONCACDU2",245,0)
 ;Addr Current--Country [1832] 439-441
"RTN","ONCACDU2",246,0)
 ;Followup Contact--Country [1847] 447-449
"RTN","ONCACDU2",247,0)
 ; Value derived from:
"RTN","ONCACDU2",248,0)
 ;    ITEM #102 - STATE AT DX (#165.5,16) pointer to File #5
"RTN","ONCACDU2",249,0)
 ;    ITEM #1832 - COUNTRY FILE (#2,.1173) pointer to File #779.004 or State File (#2,.115) to File #5
"RTN","ONCACDU2",250,0)
 ;    ITEM #1847 - ZIP CODE (#165,.119 --> #5.11,3) pointer to File #5
"RTN","ONCACDU2",251,0)
 ;
"RTN","ONCACDU2",252,0)
 ; IF VALUE IS NOT FILLED IN OR NOT FOUND, DEFAULT TO "ZZU" (UNKNOWN)
"RTN","ONCACDU2",253,0)
 ;
"RTN","ONCACDU2",254,0)
 N XX
"RTN","ONCACDU2",255,0)
 D CHKADDS^ONCACDU1 I ONCADDF'="" Q ONCADDF  ;check override
"RTN","ONCACDU2",256,0)
 S ACDANS="USA"
"RTN","ONCACDU2",257,0)
 I ITEM=102 S XX=$S($$GET1^DIQ(165.5,IEN,16,"I")'="":$$GET1^DIQ(5,$$GET1^DIQ(165.5,IEN,16,"I"),1,"I"),1:"")
"RTN","ONCACDU2",258,0)
 I ITEM=1832 D
"RTN","ONCACDU2",259,0)
 .S (X,XX)="" S PT=$P($G(^ONCO(160,ACD160,0)),";",1)
"RTN","ONCACDU2",260,0)
 .I $$DPTLRT(ACD160)="LRT" S X=$$GET1^DIQ(67,PT,.115,"I") S:$G(X) XX=$$GET1^DIQ(5,X,1,"E")
"RTN","ONCACDU2",261,0)
 .I $$DPTLRT(ACD160)="DPT" S X=$$GET1^DIQ(2,PT,.1173,"I") S:$G(X) (XX,ACDANS)=$$GET1^DIQ(779.004,X,.01,"E")
"RTN","ONCACDU2",262,0)
 .S X=$$GET1^DIQ(2,PT,.115,"I") S:$G(X) XX=$$GET1^DIQ(5,X,1,"E")
"RTN","ONCACDU2",263,0)
 I ITEM=1847 S XX="",VICPNT=$$FCNODE^ONCACDU2(ACD160,.119,"I") S:$G(VICPNT) STATE=$P($G(^VIC(5.11,VICPNT,0)),U,4) S:$G(STATE)'="" XX=$$GET1^DIQ(5,STATE,1,"I") K STATE,VICPNT
"RTN","ONCACDU2",264,0)
 I XX="QC"!(XX="AB")!(XX="ZZMB")!(XX="NB")!(XX="NF")!(XX="NS")!(XX="NT")!(XX="ON")!(XX="PE")!(XX="SK")!(XX="YT")!(XX="CANAD")!(XX="MB")!(XX="NU")!(XX="BC") S ACDANS="CAN"
"RTN","ONCACDU2",265,0)
 I XX="FM" S ACDANS="FSM"
"RTN","ONCACDU2",266,0)
 I XX="GU" S ACDANS="GUM"
"RTN","ONCACDU2",267,0)
 I XX="MH" S ACDANS="MHL"
"RTN","ONCACDU2",268,0)
 I XX="MP" S ACDANS="MNP"
"RTN","ONCACDU2",269,0)
 I XX="PW" S ACDANS="PWL"
"RTN","ONCACDU2",270,0)
 I XX="UM" S ACDANS="UMI"
"RTN","ONCACDU2",271,0)
 I XX="FG" S ACDANS="ZZX"
"RTN","ONCACDU2",272,0)
 I XX="MX" S ACDANS="MEX"
"RTN","ONCACDU2",273,0)
 I XX="EU" S ACDANS="ZZE"
"RTN","ONCACDU2",274,0)
 I XX="PH" S ACDANS="PHL"
"RTN","ONCACDU2",275,0)
 I XX="AS" S ACDANS="ASM"
"RTN","ONCACDU2",276,0)
 I XX="PR" S ACDANS="PRI"
"RTN","ONCACDU2",277,0)
 I XX="VI" S ACDANS="VIR"
"RTN","ONCACDU2",278,0)
 I XX="ZZEQ" S ACDANS="KIR"
"RTN","ONCACDU2",279,0)
 I XX="ZZIQ" S ACDANS="ZZP"
"RTN","ONCACDU2",280,0)
 I XX="ZZYQ" S ACDANS="JPN"
"RTN","ONCACDU2",281,0)
 I XX="UN"!(XX="") S ACDANS="ZZU"
"RTN","ONCACDU2",282,0)
 Q ACDANS
"RTN","ONCACDU2",283,0)
 ;
"RTN","ONCACDU2",284,0)
DPTLRT(ACD160) ;check if pt from Patient or Referral file
"RTN","ONCACDU2",285,0)
 N DPTLRT
"RTN","ONCACDU2",286,0)
 S DPTLRT=""
"RTN","ONCACDU2",287,0)
 I $P($G(^ONCO(160,ACD160,0)),U,1)["LRT" S DPTLRT="LRT"
"RTN","ONCACDU2",288,0)
 I $P($G(^ONCO(160,ACD160,0)),U,1)["DPT" S DPTLRT="DPT"
"RTN","ONCACDU2",289,0)
 Q DPTLRT
"RTN","ONCACDU2",290,0)
 ;
"RTN","ONCACDU2",291,0)
ICD(ICD) ;ICD Code
"RTN","ONCACDU2",292,0)
 ;Use ICD API (IA #3990) instead of direct global read.
"RTN","ONCACDU2",293,0)
 N X
"RTN","ONCACDU2",294,0)
 S ICD=$S(ICD'="":$$GET1^DIQ(80,ICD,.01),1:"0000")
"RTN","ONCACDU2",295,0)
 I ICD["." S ICD=$P(ICD,".")_$P(ICD,".",2)
"RTN","ONCACDU2",296,0)
 S:$L(ICD)=3 ICD=ICD_9
"RTN","ONCACDU2",297,0)
 S:$L(ICD)<4 ICD=$E("0000",1,4-$L(ICD))_ICD
"RTN","ONCACDU2",298,0)
 S:$L(ICD)>4 ICD=$E(ICD,1,4)
"RTN","ONCACDU2",299,0)
 I $E(ICD,4)="X"!($E(ICD,4)="-") S ICD=$E(ICD,1,3)_9
"RTN","ONCACDU2",300,0)
 Q ICD
"RTN","ONCACDU2",301,0)
 ;
"RTN","ONCACDU2",302,0)
ICDR(ICD) ;ICD Revision Number [1920] 1392-1392
"RTN","ONCACDU2",303,0)
 N ICDR
"RTN","ONCACDU2",304,0)
 S ICD=$$ICD(ICD)
"RTN","ONCACDU2",305,0)
 S ICDR=$S(ICD="    ":0,1:$$GET1^DIQ(160,ACD160,20,"I"))
"RTN","ONCACDU2",306,0)
 S:ICDR="" ICDR=0
"RTN","ONCACDU2",307,0)
 Q ICDR
"RTN","ONCACDU2",308,0)
 ;
"RTN","ONCACDU2",309,0)
PPAY(IEN) ;PRIMARY PAYER AT DX (165.5,18)
"RTN","ONCACDU2",310,0)
 N X
"RTN","ONCACDU2",311,0)
 S X=$$GET1^DIQ(165.5,IEN,18,"I")
"RTN","ONCACDU2",312,0)
 S X=$$GET1^DIQ(160.3,$S(X'="":X,1:99),.01,"I")
"RTN","ONCACDU2",313,0)
 S X=$S(X<42:X,X>47:X,1:X-1)
"RTN","ONCACDU2",314,0)
 Q X
"RTN","ONCACDU2",315,0)
 ;
"RTN","ONCACDU2",316,0)
DS(IEN) ;RX Date--Surgery [1200] 755-762
"RTN","ONCACDU2",317,0)
 N X
"RTN","ONCACDU2",318,0)
 S X=$$GET1^DIQ(165.5,IEN,50,"I") I X'="" S SURGDT(X)=""
"RTN","ONCACDU2",319,0)
 S X=$$GET1^DIQ(165.5,IEN,138.2,"I") I X'="" S SURGDT(X)=""
"RTN","ONCACDU2",320,0)
 S X=$$GET1^DIQ(165.5,IEN,139.2,"I") I X'="" S SURGDT(X)=""
"RTN","ONCACDU2",321,0)
 S SURGDT=$O(SURGDT(0))
"RTN","ONCACDU2",322,0)
 S X=$$DATE^ONCACDU1(SURGDT)
"RTN","ONCACDU2",323,0)
 K SURGDT
"RTN","ONCACDU2",324,0)
 Q X
"RTN","ONCACDU2",325,0)
STRIP ;Replace punctuation marks with spaces
"RTN","ONCACDU2",326,0)
 S ACDANS=$TR(ACDANS,"!""""@#$%&'()*+,-./:;<=>?[>]^_\{|}~`","                                    ")
"RTN","ONCACDU2",327,0)
 S ACDANS=$$TRIM^XLFSTR(ACDANS)
"RTN","ONCACDU2",328,0)
 Q
"RTN","ONCACDU2",329,0)
 ;
"RTN","ONCACDU2",330,0)
STRIP1 ;Strip out punctuation marks
"RTN","ONCACDU2",331,0)
 S ACDANS=$$STRIP^XLFSTR(ACDANS,"!""""#$%&'()*+,-./:;<=>?[>]^_\{|}~`")
"RTN","ONCACDU2",332,0)
 Q
"RTN","ONCACDU2",333,0)
 ;
"RTN","ONCACDU2",334,0)
STNUM ;get 3-digit state number for state extract. reporting facility must be the same w/ 160.1 entry.
"RTN","ONCACDU2",335,0)
 ;if no 3-digit number, use the initial from file #200
"RTN","ONCACDU2",336,0)
 N ONC3DIG,ONC1601,ONC3IEN,ONC16019
"RTN","ONCACDU2",337,0)
 S ONC3DIG=""
"RTN","ONCACDU2",338,0)
 S ONC16019=$$GET1^DIQ(165.5,IEN,.03,"I"),ONC1601=0
"RTN","ONCACDU2",339,0)
 F  S ONC1601=$O(^ONCO(160.1,"D",ACDANS,ONC1601)) Q:ONC1601'>0  D
"RTN","ONCACDU2",340,0)
 .I $D(^ONCO(160.1,ONC1601,1)),$P(^(1),U,4)'=ONC16019 Q
"RTN","ONCACDU2",341,0)
 .S ONC3IEN=$O(^ONCO(160.1,"D",ACDANS,ONC1601,0)) S:$G(ONC3IEN) ONC3DIG=$P(^ONCO(160.1,ONC1601,"REG",ONC3IEN,0),U,2)
"RTN","ONCACDU2",342,0)
 S:ONC3DIG="" ACDANS=$E($$GET1^DIQ(200,ACDANS,1,"I"),1,3)
"RTN","ONCACDU2",343,0)
 I ONC3DIG'="" S ACDANS=$S($L(ONC3DIG)=1:"00"_ONC3DIG,$L(ONC3DIG)=2:"0"_ONC3DIG,1:ONC3DIG)
"RTN","ONCACDU2",344,0)
 Q
"RTN","ONCACDU2",345,0)
 ;
"RTN","ONCACDU2",346,0)
CLEANUP ;Cleanup
"RTN","ONCACDU2",347,0)
 K EXTRACT
"RTN","ONCFUNC")
0^10^B52220927^B47880653
"RTN","ONCFUNC",1,0)
ONCFUNC ;Hines OIFO/GWB - OncoTrax functions ;05/03/12
"RTN","ONCFUNC",2,0)
 ;;2.2;ONCOLOGY;**1,7**;Jul 31, 2013;Build 5
"RTN","ONCFUNC",3,0)
 ;
"RTN","ONCFUNC",4,0)
 ;
"RTN","ONCFUNC",5,0)
SHN() ;STATE HOSPITAL NUMBER (160.1,1.03)
"RTN","ONCFUNC",6,0)
 N OSP,SHN
"RTN","ONCFUNC",7,0)
 S OSP=$O(^ONCO(160.1,"C",DUZ(2),0))
"RTN","ONCFUNC",8,0)
 I OSP="" S OSP=$O(^ONCO(160.1,0))
"RTN","ONCFUNC",9,0)
 S SHN=$$GET1^DIQ(160.1,OSP,1.03,"I")
"RTN","ONCFUNC",10,0)
 Q SHN
"RTN","ONCFUNC",11,0)
 ;
"RTN","ONCFUNC",12,0)
IIN() ;INSTITUTION ID NUMBER (160.1,27)
"RTN","ONCFUNC",13,0)
 N IIN,OSP
"RTN","ONCFUNC",14,0)
 S OSP=$O(^ONCO(160.1,"C",DUZ(2),0))
"RTN","ONCFUNC",15,0)
 I OSP="" S OSP=$O(^ONCO(160.1,0))
"RTN","ONCFUNC",16,0)
 S IIN=$$GET1^DIQ(160.1,OSP,27,"I")
"RTN","ONCFUNC",17,0)
 S IIN=$$GET1^DIQ(160.19,IIN,.01,"I")
"RTN","ONCFUNC",18,0)
 Q IIN
"RTN","ONCFUNC",19,0)
 ;
"RTN","ONCFUNC",20,0)
FLNAME(NAME) ;COMPUTED EXPRESSION for FIRST-LAST (160,.012)
"RTN","ONCFUNC",21,0)
 N DFN,FIRST,LAST,MIDDLE,PL,SUFFIX,TNAME
"RTN","ONCFUNC",22,0)
 S TNAME=NAME,DFN=D0
"RTN","ONCFUNC",23,0)
 S LAST=$P(TNAME,","),TNAME=$P(TNAME,",",2)
"RTN","ONCFUNC",24,0)
 S FIRST=$P(TNAME," "),MIDDLE=$P(TNAME," ",2)
"RTN","ONCFUNC",25,0)
 S SUFFIX=$P(TNAME," ",3)
"RTN","ONCFUNC",26,0)
 I MIDDLE["""" S MIDDLE=""
"RTN","ONCFUNC",27,0)
 S TNAME=FIRST_" "_MIDDLE_" "_LAST_" "_SUFFIX
"RTN","ONCFUNC",28,0)
SP I $F(TNAME,"  ") S PL=$F(TNAME,"  "),TNAME=$E(TNAME,1,PL-2)_$E(TNAME,PL,$L(TNAME)) G SP
"RTN","ONCFUNC",29,0)
 Q TNAME
"RTN","ONCFUNC",30,0)
 ;
"RTN","ONCFUNC",31,0)
DIV(IEN) ;DIVISION (165.5,2000)
"RTN","ONCFUNC",32,0)
 N DIV
"RTN","ONCFUNC",33,0)
 S DIV=$G(^ONCO(165.5,IEN,"DIV"))
"RTN","ONCFUNC",34,0)
 Q DIV
"RTN","ONCFUNC",35,0)
 ;
"RTN","ONCFUNC",36,0)
SUSDIV(IEN,SUSIEN) ;DIVISION (160,30)
"RTN","ONCFUNC",37,0)
 N DIV
"RTN","ONCFUNC",38,0)
 S DIV=$P($G(^ONCO(160,IEN,"SUS",SUSIEN,0)),U,4)
"RTN","ONCFUNC",39,0)
 Q DIV
"RTN","ONCFUNC",40,0)
 ;
"RTN","ONCFUNC",41,0)
PFTD(IEN) ;Primaries for this division
"RTN","ONCFUNC",42,0)
 N PFTD,PRI
"RTN","ONCFUNC",43,0)
 S PFTD="N"
"RTN","ONCFUNC",44,0)
 S PRI=0 F  S PRI=$O(^ONCO(165.5,"C",IEN,PRI)) Q:PRI'>0  I $P($G(^ONCO(165.5,PRI,"DIV")),U,1)=DUZ(2) S PFTD="Y"
"RTN","ONCFUNC",45,0)
 Q PFTD
"RTN","ONCFUNC",46,0)
 ;
"RTN","ONCFUNC",47,0)
PRICNT ;TOTAL PRIMARIES FOR PATIENT (160,17)
"RTN","ONCFUNC",48,0)
 S PRI=0,PRICNT=0 F  S PRI=$O(^ONCO(165.5,"C",D0,PRI)) Q:PRI'>0  I $P($G(^ONCO(165.5,PRI,"DIV")),U,1)=DUZ(2) D
"RTN","ONCFUNC",49,0)
 .S PRICNT=PRICNT+1
"RTN","ONCFUNC",50,0)
 S X=PRICNT
"RTN","ONCFUNC",51,0)
 K PRI,PRICNT
"RTN","ONCFUNC",52,0)
 Q
"RTN","ONCFUNC",53,0)
 ;
"RTN","ONCFUNC",54,0)
DIDIV(IEN) ;Disease Index DIVISION screen
"RTN","ONCFUNC",55,0)
 ;Supported by IAs #417 and #2028
"RTN","ONCFUNC",56,0)
 N DIVMATCH
"RTN","ONCFUNC",57,0)
 S DIVMATCH="N"
"RTN","ONCFUNC",58,0)
 S VIPNT=$P($G(^AUPNVPOV(D0,0)),U,3) G:VIPNT="" DIDIVEX
"RTN","ONCFUNC",59,0)
 S HLPNT=$P($G(^AUPNVSIT(VIPNT,0)),U,22) G:HLPNT="" DIDIVEX
"RTN","ONCFUNC",60,0)
 S MCPNT=$P($G(^SC(HLPNT,0)),U,15) G:MCPNT="" DIDIVEX
"RTN","ONCFUNC",61,0)
 S INPNT=$P($G(^DG(40.8,MCPNT,0)),U,7)
"RTN","ONCFUNC",62,0)
 I (INPNT=DUZ(2))!(AFLDIV[INPNT) S DIVMATCH="Y"
"RTN","ONCFUNC",63,0)
DIDIVEX K HLPNT,INPNT,MCPNT,VIPNT
"RTN","ONCFUNC",64,0)
 Q DIVMATCH
"RTN","ONCFUNC",65,0)
 ;
"RTN","ONCFUNC",66,0)
HIST(IEN,HSTFLD,HISTNAM,ICDFILE,ICDNUM) ;
"RTN","ONCFUNC",67,0)
 ;Histology ICD-O-2 (165.5,22) or Histology ICD-O-3 (165.5,22.3)
"RTN","ONCFUNC",68,0)
 N HISTICD,HNODE,ONCDTDX
"RTN","ONCFUNC",69,0)
 S ONCDTDX=$P($G(^ONCO(165.5,IEN,0)),U,16)
"RTN","ONCFUNC",70,0)
 S ICDNUM=3 I ONCDTDX<3010000 S ICDNUM=2
"RTN","ONCFUNC",71,0)
 S HNODE=$S(ICDNUM=3:2.2,1:2),ICDFILE=$S(ICDNUM=3:169.3,1:164.1)
"RTN","ONCFUNC",72,0)
 S HSTFLD=$S(ICDNUM=3:22.3,1:22)
"RTN","ONCFUNC",73,0)
 S HISTICD=$P($G(^ONCO(165.5,IEN,HNODE)),U,3)
"RTN","ONCFUNC",74,0)
 S HISTNAM=""
"RTN","ONCFUNC",75,0)
 I HISTICD'="" S HISTNAM=$P($G(^ONCO(ICDFILE,HISTICD,0)),U,1)
"RTN","ONCFUNC",76,0)
 Q HISTICD
"RTN","ONCFUNC",77,0)
 ;
"RTN","ONCFUNC",78,0)
LYMPHOMA(IEN) ;Hodgkin and non-Hodgkin Lymphomas
"RTN","ONCFUNC",79,0)
 N LYMPHOMA
"RTN","ONCFUNC",80,0)
 S LYMPHOMA=0
"RTN","ONCFUNC",81,0)
 S ONCDTDX=$P($G(^ONCO(165.5,IEN,0)),U,16)
"RTN","ONCFUNC",82,0)
 S HSTICD=$$HIST^ONCFUNC(IEN)
"RTN","ONCFUNC",83,0)
 S HST123=$E(HSTICD,1,3)
"RTN","ONCFUNC",84,0)
 I ONCDTDX<3010000,(HST123>958)&(HST123<972) S LYMPHOMA=1
"RTN","ONCFUNC",85,0)
 I ONCDTDX>3001231,(HST123>958)&(HST123<973) S LYMPHOMA=1
"RTN","ONCFUNC",86,0)
 I ONCDTDX>3091231,(HSTICD=97353)!(HSTICD=97373)!(HSTICD=97383) S LYMPHOMA=1
"RTN","ONCFUNC",87,0)
 K HST123,HSTICD,ONCDTDX
"RTN","ONCFUNC",88,0)
 Q LYMPHOMA
"RTN","ONCFUNC",89,0)
 ;
"RTN","ONCFUNC",90,0)
LYMPH(IEN) ;Lymphomas
"RTN","ONCFUNC",91,0)
 N LYMPHOMA
"RTN","ONCFUNC",92,0)
 S LYMPHOMA=0
"RTN","ONCFUNC",93,0)
 S ONCDTDX=$P($G(^ONCO(165.5,IEN,0)),U,16)
"RTN","ONCFUNC",94,0)
 S HSTICD=$$HIST^ONCFUNC(IEN)
"RTN","ONCFUNC",95,0)
 S HST14=$E(HSTICD,1,4)
"RTN","ONCFUNC",96,0)
 I ONCDTDX<3100000 D
"RTN","ONCFUNC",97,0)
 .I ((HST14>9589)&(HST14<9597))!((HST14>9649)&(HST14<9720))!((HST14>9726)&(HST14<9730)) S LYMPHOMA=1
"RTN","ONCFUNC",98,0)
 I ONCDTDX>3091221 D
"RTN","ONCFUNC",99,0)
 .I ((HST14>9589)&(HST14<9727))!((HST14>9727)&(HST14<9733))!((HST14>9733)&(HST14<9741))!((HST14>9749)&(HST14<9763))!((HST14>9810)&(HST14<9832))!(HST14=9940)!(HST14=9980)!(HST14=9971) S LYMPHOMA=1
"RTN","ONCFUNC",100,0)
 K HST14,HSTICD,ONCDTDX
"RTN","ONCFUNC",101,0)
 Q LYMPHOMA
"RTN","ONCFUNC",102,0)
 ;
"RTN","ONCFUNC",103,0)
HEMATO(IEN) ;Hematopoietic, reticuloendothelial, immunoproliferative or
"RTN","ONCFUNC",104,0)
 ; myeloproliferative disease
"RTN","ONCFUNC",105,0)
 N HEMATO
"RTN","ONCFUNC",106,0)
 S HEMATO=0
"RTN","ONCFUNC",107,0)
 S ONCDTDX=$P($G(^ONCO(165.5,IEN,0)),U,16)
"RTN","ONCFUNC",108,0)
 S HSTICD=$$HIST^ONCFUNC(IEN)
"RTN","ONCFUNC",109,0)
 S HST14=$E(HSTICD,1,4)
"RTN","ONCFUNC",110,0)
 I ONCDTDX<3100000 D
"RTN","ONCFUNC",111,0)
 .I (HST14=9750)!((HST14>9759)&(HST14<9765))!((HST14>9799)&(HST14<9821))!(HST14=9826)!((HST14>9830)&(HST14<9921))!((HST14>9930)&(HST14<9965))!((HST14>9979)&(HST14<9990)) S HEMATO=1
"RTN","ONCFUNC",112,0)
 I ONCDTDX>3091221 D
"RTN","ONCFUNC",113,0)
 .I (HST14=9727)!(HST14=9733)!(HST14=9741)!(HST14=9742)!((HST14>9763)&(HST14<9810))!(HST14=9832)!((HST14>9839)&(HST14<9932))!(HST14=9945)!(HST14=9946)!((HST14>9949)&(HST14<9968))!((HST14>9974)&(HST14<9993)) S HEMATO=1
"RTN","ONCFUNC",114,0)
 K HST14,HSTICD,ONCDTDX
"RTN","ONCFUNC",115,0)
 Q HEMATO
"RTN","ONCFUNC",116,0)
 ;
"RTN","ONCFUNC",117,0)
CC ;COMORBIDITY/COMPLICATION #1-10 (160,25-25.9) screen
"RTN","ONCFUNC",118,0)
 ;
"RTN","ONCFUNC",119,0)
 ;Use ICD API (#3990) instead of direct global read.
"RTN","ONCFUNC",120,0)
 N ONCICDY,ONCFLAG,ONC80I
"RTN","ONCFUNC",121,0)
 S ONCFLAG=0
"RTN","ONCFUNC",122,0)
 S ONC80I=$G(^ICD9(+Y,0))
"RTN","ONCFUNC",123,0)
 S ONCICDY=$$ICDDX^ICDEXC(ONC80I,,1) Q:ONCICDY=-1
"RTN","ONCFUNC",124,0)
 I $E($P(ONCICDY,U,2),1)="V",+($E($P(ONCICDY,U,2),2,9)>7.1)&+($E($P(ONCICDY,U,2),2,9)<7.4) S ONCFLAG=1
"RTN","ONCFUNC",125,0)
 I $E($P(ONCICDY,U,2),1)="V",+($E($P(ONCICDY,U,2),2,9)>9.91)&+($E($P(ONCICDY,U,2),2,9)<16) S ONCFLAG=1
"RTN","ONCFUNC",126,0)
 I $E($P(ONCICDY,U,2),1)="V",+($E($P(ONCICDY,U,2),2,9)>21.9)&+($E($P(ONCICDY,U,2),2,9)<23.2) S ONCFLAG=1
"RTN","ONCFUNC",127,0)
 I $E($P(ONCICDY,U,2),1)="V",+($E($P(ONCICDY,U,2),2,9)>25.3)&+($E($P(ONCICDY,U,2),2,9)<25.5) S ONCFLAG=1
"RTN","ONCFUNC",128,0)
 I $E($P(ONCICDY,U,2),1)="V",+($E($P(ONCICDY,U,2),2,9)>43.89)&+($E($P(ONCICDY,U,2),2,9)<46) S ONCFLAG=1
"RTN","ONCFUNC",129,0)
 I $E($P(ONCICDY,U,2),1)="V",+($E($P(ONCICDY,U,2),2,9)>50.4)&+($E($P(ONCICDY,U,2),2,9)<50.8) S ONCFLAG=1
"RTN","ONCFUNC",130,0)
 I $E($P(ONCICDY,U,2),1)'="V",$E($P(ONCICDY,U,2),1)="E",($E($P(ONCICDY,U,2),2,9)>869.9)&($E($P(ONCICDY,U,2),2,9)<880) S ONCFLAG=1
"RTN","ONCFUNC",131,0)
 I $E($P(ONCICDY,U,2),1)'="V",$E($P(ONCICDY,U,2),1)="E",($E($P(ONCICDY,U,2),2,9)>929.9)&($E($P(ONCICDY,U,2),2,9)<950) S ONCFLAG=1
"RTN","ONCFUNC",132,0)
 I $E($P(ONCICDY,U,2),1)'="V",$E($P(ONCICDY,U,2),1)'="E",($P(ONCICDY,U,2)<140)!($P(ONCICDY,U,2)>239.9) S ONCFLAG=1
"RTN","ONCFUNC",133,0)
 I ($P(ONCICDY,U,1)="-1")!($P(ONCICDY,U,1)>499999) S ONCFLAG=0
"RTN","ONCFUNC",134,0)
 I ONCFLAG=1 Q
"RTN","ONCFUNC",135,0)
 Q
"RTN","ONCFUNC",136,0)
SDIAG ;Secondary Diagnosis 1 - 10
"RTN","ONCFUNC",137,0)
 ;Use ICD API (#3990) instead of direct global read.
"RTN","ONCFUNC",138,0)
 N ONCICDY,ONCFLAG,ONC80I
"RTN","ONCFUNC",139,0)
 S ONCFLAG=0
"RTN","ONCFUNC",140,0)
 S ONC80I=$G(^ICD9(Y,0))
"RTN","ONCFUNC",141,0)
 S ONCICDY=$$ICDDX^ICDEXC(ONC80I,,30) Q:ONCICDY=-1
"RTN","ONCFUNC",142,0)
 I ($P(ONCICDY,U,1)>499999) S ONCFLAG=1
"RTN","ONCFUNC",143,0)
 I ($P(ONCICDY,U,1)="-1") S ONCFLAG=0
"RTN","ONCFUNC",144,0)
 I ONCFLAG=1 Q
"RTN","ONCFUNC",145,0)
 Q
"RTN","ONCFUNC",146,0)
 ;
"RTN","ONCFUNC",147,0)
SDOT ;ICD CODE OUTPUT TRANSFORM
"RTN","ONCFUNC",148,0)
 N ONCICD,CODE,SPACE
"RTN","ONCFUNC",149,0)
 I Y'="" S ONCICD=$$GET1^DIQ(80,Y,.01),ONCICD=$$ICDDX^ICDEX(ONCICD) S:($P(ONCICD,U,1)=-1) Y=-1 S:(Y'=-1) CODE=$P(ONCICD,U,2),SPACE=$S($L(CODE)=4:"   ",$L(CODE)=5:"  ",1:" "),(X,Y)=CODE_SPACE_$P(ONCICD,U,4)
"RTN","ONCFUNC",150,0)
 Q
"RTN","ONCFUNC",151,0)
 ;
"RTN","ONCFUNC",152,0)
DSTS(IEN) ;DATE SYSTEMIC THERAPY STARTED
"RTN","ONCFUNC",153,0)
 N X
"RTN","ONCFUNC",154,0)
 S X=$$GET1^DIQ(165.5,IEN,53,"I") I X'="" S DSTSDT(X)=""
"RTN","ONCFUNC",155,0)
 S X=$$GET1^DIQ(165.5,IEN,54,"I") I X'="" S DSTSDT(X)=""
"RTN","ONCFUNC",156,0)
 S X=$$GET1^DIQ(165.5,IEN,55,"I") I X'="" S DSTSDT(X)=""
"RTN","ONCFUNC",157,0)
 S DSTS=$O(DSTSDT(0))
"RTN","ONCFUNC",158,0)
 S X=$$DATE^ONCACDU1(DSTS)
"RTN","ONCFUNC",159,0)
 K DSTS,DSTSDT
"RTN","ONCFUNC",160,0)
 Q X
"RTN","ONCFUNC",161,0)
 ;
"RTN","ONCFUNC",162,0)
DUPPRI ;Check for duplicate primaries belonging to another DIVISION
"RTN","ONCFUNC",163,0)
 K TMP
"RTN","ONCFUNC",164,0)
 S XD1=0
"RTN","ONCFUNC",165,0)
 F  S XD1=$O(^ONCO(165.5,"C",XD0,XD1)) Q:XD1'>0  D
"RTN","ONCFUNC",166,0)
 .S PS=$$GET1^DIQ(165.5,XD1,20,"I")
"RTN","ONCFUNC",167,0)
 .S SN=$$GET1^DIQ(165.5,XD1,.06,"I")
"RTN","ONCFUNC",168,0)
 .S DIV=$$GET1^DIQ(165.5,XD1,2000,"I")
"RTN","ONCFUNC",169,0)
 .S TMP(PS_U_SN,DIV)=XD1
"RTN","ONCFUNC",170,0)
 .S TMP(PS_U_SN)=$G(TMP(PS_U_SN))+1
"RTN","ONCFUNC",171,0)
 S PSSN="" F  S PSSN=$O(TMP(PSSN)) Q:PSSN'>0  I TMP(PSSN)>1 D
"RTN","ONCFUNC",172,0)
 .S DIV="" F  S DIV=$O(TMP(PSSN,DIV)) Q:DIV'>0  I DIV=DUZ(2) D  Q 
"RTN","ONCFUNC",173,0)
 ..W !
"RTN","ONCFUNC",174,0)
 ..W !," NOTE: This patient has more than one primary with the same"
"RTN","ONCFUNC",175,0)
 ..W !,"       SEQUENCE NUMBER and PRIMARY SITE.  These primaries"
"RTN","ONCFUNC",176,0)
 ..W !,"       belong to different divisions.  You may wish to notify"
"RTN","ONCFUNC",177,0)
 ..W !,"       the other division of any significant changes for this patient."
"RTN","ONCFUNC",178,0)
 ..W !
"RTN","ONCFUNC",179,0)
 ..S J=0,XD1=0 F  S XD1=$O(^ONCO(165.5,"C",XD0,XD1)) Q:XD1'>0  I $D(^ONCO(165.5,XD1,0)) S J=J+1 D ^ONCOCOML
"RTN","ONCFUNC",180,0)
 ..K DIR S DIR(0)="E" D ^DIR
"RTN","ONCFUNC",181,0)
 K DIR,DIV,J,PS,PSSN,SN,TMP,XD0,XD1
"RTN","ONCFUNC",182,0)
 ;
"RTN","ONCFUNC",183,0)
CLEANUP ;Cleanup
"RTN","ONCFUNC",184,0)
 K AFLDIV,D0,Y
"RTN","ONCOANC1")
0^7^B21183660^B21219299
"RTN","ONCOANC1",1,0)
ONCOANC1 ;Hines OIFO/GWB - CONTINUE ONCOANC2 ;05/03/12
"RTN","ONCOANC1",2,0)
 ;;2.2;ONCOLOGY;**1,7**;Jul 31, 2013;Build 5
"RTN","ONCOANC1",3,0)
 ;rvd - 05/03/12 p56. Use ICD API (#3990) instead of direct global read.
"RTN","ONCOANC1",4,0)
 ;
"RTN","ONCOANC1",5,0)
AASTEOD ; STAGE/EXTENT OF DISEASE
"RTN","ONCOANC1",6,0)
 S AASEODS=$P(AAS1655("N2"),U,17) S AASEODS=$S(AASEODS="":9,AASEODS<0:9,AASEODS>9:9,AASEODS=8:9,1:AASEODS)
"RTN","ONCOANC1",7,0)
 S AASEODT=$P(AAS1655("N2"),U,9) S AASEODT=$S(AASEODT="":999,AASEODT[".":999,AASEODT<0:999,AASEODT>999:999,1:AASEODT)
"RTN","ONCOANC1",8,0)
 S:$L(AASEODT)<3 AASEODT=$E(AASZERO,1,3-$L(AASEODT))_AASEODT
"RTN","ONCOANC1",9,0)
 S AASEODE=$P(AAS1655("N2"),U,10) S AASEODE=$S(AASEODE="":"  ",AASEODE<0:"  ",AASEODE>99:"  ",1:AASEODE)
"RTN","ONCOANC1",10,0)
 S:$L(AASEODE)<2 AASEODE=$E(AASZERO,1,2-$L(AASEODE))_AASEODE
"RTN","ONCOANC1",11,0)
 S AASEODL=$P(AAS1655("N2"),U,11) S AASEODL=$S(AASEODL="":" ",AASEODL<0:" ",AASEODL>9:" ",1:AASEODL)
"RTN","ONCOANC1",12,0)
 S AASNP=$P(AAS1655("N2"),U,12) S AASNP=$S(AASNP="":99,AASNP[".":99,AASNP<0:99,AASNP>99:99,1:AASNP)
"RTN","ONCOANC1",13,0)
 S:$L(AASNP)<2 AASNP=$E(AASZERO,1,2-$L(AASNP))_AASNP
"RTN","ONCOANC1",14,0)
 S AASNE=$P(AAS1655("N2"),U,13) S AASNE=$S(AASNE="":99,AASNE[".":99,AASNE<0:99,AASNE>99:99,1:AASNE)
"RTN","ONCOANC1",15,0)
 S:$L(AASNE)<2 AASNE=$E(AASZERO,1,2-$L(AASNE))_AASNE
"RTN","ONCOANC1",16,0)
 S AASTNME=$$EDT^ONCOANC3($E(AASDXDT,7,8)) ;(AASTNME=2
"RTN","ONCOANC1",17,0)
 N AASTC,AASNC,AASMC,AASAJSM,AASTC2,AASNC2,AASMC2,AASJSM2
"RTN","ONCOANC1",18,0)
 D TNM^ONCOANC3(.AASTC,.AASNC,.AASMC,.AASAJSM,.AASTC2,.AASNC2,.AASMC2,.AASJSM2)
"RTN","ONCOANC1",19,0)
 S AASITME=$$MET^ONCOANC3(AAS1655("N2"))
"RTN","ONCOANC1",20,0)
 S:$L(AASITME)<3 AASITME=AASITME_$E(AASBLNK,1,3-$L(AASITME))
"RTN","ONCOANC1",21,0)
 S AASRT=$P(AAS1655("N3"),U,28) S AASRT=$S(AASRT="":" ",AASRT<0:" ",AASRT>9:" ",1:AASRT)
"RTN","ONCOANC1",22,0)
 I AASRT>2&(AASRT<9) S AASRT=" "
"RTN","ONCOANC1",23,0)
 S AASTM1=$P(AAS1655("N24"),U,2) S AASTM1=$S(AASTM1="":" ",1:$P(^ONCO(164.15,AASTM1,0),U))
"RTN","ONCOANC1",24,0)
 S AASTM2=$P(AAS1655("N24"),U,3) S AASTM2=$S(AASTM2="":" ",1:$P(^ONCO(164.15,AASTM2,0),U))
"RTN","ONCOANC1",25,0)
 S ^TMP($J,D0,225)=^TMP($J,D0,225)_AASEODS_" "_AASEODT_AASEODE_AASEODL_AASNP_AASNE_$E(AASBLNK,1,19)_AASTC_AASNC_AASMC_AASAJSM_AASTC2_AASNC2_AASMC2_AASJSM2
"RTN","ONCOANC1",26,0)
 S ^TMP($J,D0,299)=AASTNME_AASITME_AASRT_$E(AASBLNK,1,4)_AASTM1_AASTM2_$E(AASBLNK,1,12)
"RTN","ONCOANC1",27,0)
AASRXTR ;   TREATMENT(RX)-ENTIRE(SUMMARY) FIRST COURSE
"RTN","ONCOANC1",28,0)
 S AASRTR=1
"RTN","ONCOANC1",29,0)
 S AASRDSR=$$AASDC^ONCOANC4($P(AAS1655("N3"),U))
"RTN","ONCOANC1",30,0)
 S AASRDRA=$$AASDC^ONCOANC4($P(AAS1655("N3"),U,4))
"RTN","ONCOANC1",31,0)
 S AASRDCH=$$AASDC^ONCOANC4($P(AAS1655("N3"),U,11))
"RTN","ONCOANC1",32,0)
 S AASRDHO=$$AASDC^ONCOANC4($P(AAS1655("N3"),U,14))
"RTN","ONCOANC1",33,0)
 S AASRDBR=$$AASDC^ONCOANC4($P(AAS1655("N3"),U,17))
"RTN","ONCOANC1",34,0)
 S AASRDOT=$$AASDC^ONCOANC4($P(AAS1655("N3"),U,23))
"RTN","ONCOANC1",35,0)
 S AASX=$O(^ONCO(165.5,"ATX",D0,0)) S:AASX'="" AASX=$E(AASX,1,7)
"RTN","ONCOANC1",36,0)
 S AASRXBDT=$$AASDC^ONCOANC4(AASX,"ZERO")
"RTN","ONCOANC1",37,0)
 S AASRXREA=$P(AAS1655("N3"),U,26) I AASRXREA=""!(AASRXREA<0)!(AASRXREA>9)!(AASRXREA>2&(AASRXREA<6)) S AASRXREA=9
"RTN","ONCOANC1",38,0)
 S AASRXCN=$P(AAS1655("N3"),U,10) I AASRXCN=""!(AASRXCN<0)!(AASRXCN>9)!(AASRXCN>1&(AASRXCN<7)) S AASRXCN=9
"RTN","ONCOANC1",39,0)
 S AASRXSEQ=$P(AAS1655("N3"),U,7) I AASRXSEQ=""!(AASRXSEQ<0)!(AASRXSEQ>6)!(AASRXSEQ=1) S AASRXSEQ=9
"RTN","ONCOANC1",40,0)
 S AASRDSB=$$AASDC^ONCOANC4($P(AAS1655("N5"),U))
"RTN","ONCOANC1",41,0)
 S ^TMP($J,D0,299)=^TMP($J,D0,299)_AASRTR_AASRDSR_AASRDRA_AASRDCH_AASRDHO_AASRDBR_AASRDOT
"RTN","ONCOANC1",42,0)
 D FOLLOW^ONCOANC3
"RTN","ONCOANC1",43,0)
AASFLUP ;  FOLLOW UP
"RTN","ONCOANC1",44,0)
 S AASDTLC=$$AASDC^ONCOANC4($P(AAS160("NF"),U))
"RTN","ONCOANC1",45,0)
 S ^TMP($J,D0,425)=^TMP($J,D0,425)_$E(AASBLNK,1,20)_AASDTLC
"RTN","ONCOANC1",46,0)
 S AASVSTA=$S($G(AASDTLC):$P(AAS160("NF"),U,2),1:" ") S:AASVSTA=""!(AASVSTA<0)!(AASVSTA>1) AASVSTA=1
"RTN","ONCOANC1",47,0)
 S AASCSTA=$S($G(AASDTLC):$P(AAS1655("N7"),U,6),1:" ") S AASCSTA=$S((AASCSTA="")!(AASCSTA<0)!(AASCSTA>5):9,(AASCSTA=4)!(AASCSTA=5):2,1:AASCSTA)
"RTN","ONCOANC1",48,0)
 S AASQS=$S($G(AASDTLC):$P(AAS160("NF"),U,5),1:" ") S:AASQS=""!(AASQS<0)!(AASQS>9)!(AASQS>4&(AASQS<8)) AASQS=9
"RTN","ONCOANC1",49,0)
 S AASROT=$P(AAS1655("N5"),U,2) I AASROT=""!(AASROT<0)!(AASROT>4) S AASROT=9
"RTN","ONCOANC1",50,0)
 S AASFSIT=$P(AAS1655("N5"),U,3) I AASFSIT=""!(AASFSIT<0)!(AASFSIT>9) S AASFSIT=9
"RTN","ONCOANC1",51,0)
 S:$L(AASFSIT)<3 AASFSIT=AASFSIT_$E(AASBLNK,1,3-$L(AASFSIT))
"RTN","ONCOANC1",52,0)
ASSD ;   CAUSE OF DEATH
"RTN","ONCOANC1",53,0)
 S AASCOD=$P(AAS160("N1"),U,3) S AASCOD=$S(AASCOD'="":$$GET1^DIQ(80,AASCOD,.01,"I"),1:"0000")
"RTN","ONCOANC1",54,0)
 I AASCOD["." S AASCOD=$P(AASCOD,".")_$P(AASCOD,".",2)
"RTN","ONCOANC1",55,0)
 S:$L(AASCOD)=3 AASCOD=AASCOD_9
"RTN","ONCOANC1",56,0)
 S:$L(AASCOD)<4 AASCOD=$E(AASZERO,1,4-$L(AASCOD))_AASCOD
"RTN","ONCOANC1",57,0)
 S:$L(AASCOD)>4 AASCOD=$E(AASCOD,1,4)
"RTN","ONCOANC1",58,0)
 I $E(AASCOD,4)="X"!($E(AASCOD,4)="-") S AASCOD=$E(AASCOD,1,3)_9
"RTN","ONCOANC1",59,0)
 S AASICDR=$S(AASCOD="0000":0,1:$P(AAS160("N1"),U,4))
"RTN","ONCOANC1",60,0)
 S:AASICDR="" AASICDR=0
"RTN","ONCOANC1",61,0)
 S ^TMP($J,D0,477)=AASVSTA_AASCSTA_AASQS_$E(AASBLNK,1,32)_AASRDSB_AASROT_AASFSIT_AASCOD_AASICDR
"RTN","ONCOANC1",62,0)
 S AASACDS=5
"RTN","ONCOANC1",63,0)
 S AASVNAM="VETAFFAIRS" ;    vendor name
"RTN","ONCOANC1",64,0)
 S AASRVER=1 ;    AACCR record version
"RTN","ONCOANC1",65,0)
 S ^TMP($J,D0,550)=$E(AASBLNK,1,45)_AASACDS_$E(AASBLNK,1,2)_AASVNAM_AASRVER_"              "
"RTN","ONCOANC1",66,0)
 D ^ONCOANC5
"RTN","ONCOANC1",67,0)
 S MLHIX=MLHIX+1
"RTN","ONCOANC1",68,0)
 I $G(ONCOREP)=1 D TPREP^ONCOANC2,CU1P^ONCOANC9 Q
"RTN","ONCOANC1",69,0)
 I $G(ONCOREQ)=1 D REQREP^ONCOANC2,CU1P^ONCOANC9 Q
"RTN","ONCOANC1",70,0)
 F INDEX=76,149,225,299,352,425,477,550,628,706,784,850,925,1000 Q:AASTYPNC="I"&(INDEX>550)  W ^TMP($J,D0,INDEX),"^",!
"RTN","ONCOANC1",71,0)
 I AASTYPNC="A" F INDEX=1075:75:4675 W ^TMP($J,D0,INDEX),"^",!
"RTN","ONCOANC1",72,0)
 W !!!
"RTN","ONCOANC1",73,0)
 D CU1P^ONCOANC9 ;K ^TMP($J)
"RTN","ONCOANC1",74,0)
 Q  ;G AASRETN^ONCOANC0
"RTN","ONCOANC1",75,0)
 ;
"RTN","ONCOANC1",76,0)
MLHTEST S X="" F I=76,149,225,299,352 S X=X_^TMP($J,D0,I)
"RTN","ONCOANC1",77,0)
 Q  ;
"RTN","ONCOCFP")
0^8^B60462094^B50437593
"RTN","ONCOCFP",1,0)
ONCOCFP ;Hines OIFO/GWB - [PT Automatic Casefinding-PTF Search] ;05/03/12
"RTN","ONCOCFP",2,0)
 ;;2.2;ONCOLOGY;**1,7**;Jul 31, 2013;Build 5
"RTN","ONCOCFP",3,0)
 ;
"RTN","ONCOCFP",4,0)
 ; rvd - 0403/12 p56. Use ICD API (#3990) instead of direct global call
"RTN","ONCOCFP",5,0)
 ; P2.2*7 - icd10 CASEFINDING
"RTN","ONCOCFP",6,0)
 W @IOF
"RTN","ONCOCFP",7,0)
 W !!!?10,"****************** PTF CASEFINDING ******************",!
"RTN","ONCOCFP",8,0)
 W !?10,"This option will search the PRINCIPLE DIAGNOSIS and"
"RTN","ONCOCFP",9,0)
 W !?10,"SECONDARY DIAGNOSIS fields of the PTF file for ICD"
"RTN","ONCOCFP",10,0)
 W !?10,"codes which identify cases to be added to the Suspense"
"RTN","ONCOCFP",11,0)
 W !?10,"list."
"RTN","ONCOCFP",12,0)
 ;
"RTN","ONCOCFP",13,0)
T ;Start Date/End Date
"RTN","ONCOCFP",14,0)
 N SDDEF
"RTN","ONCOCFP",15,0)
 W !
"RTN","ONCOCFP",16,0)
 S OSP=$O(^ONCO(160.1,"C",DUZ(2),0))
"RTN","ONCOCFP",17,0)
 I OSP="" D  Q
"RTN","ONCOCFP",18,0)
 .W !?10,"Casefinding requires an ONCOLOGY SITE PARAMETER"
"RTN","ONCOCFP",19,0)
 .W !?10,"entry which matches the user's login DIVISION."
"RTN","ONCOCFP",20,0)
 .W !?10,"There is no ONCOLOGY SITE PARAMETER for DIVISION:"
"RTN","ONCOCFP",21,0)
 .W !?10,$P($G(^DIC(4,DUZ(2),0)),U,1)
"RTN","ONCOCFP",22,0)
 S SDDEF=$P(^ONCO(160.1,OSP,0),U,7)
"RTN","ONCOCFP",23,0)
 I SDDEF="" S SDDEF=DT
"RTN","ONCOCFP",24,0)
 S SDDEF=$E(SDDEF,4,5)_"-"_$E(SDDEF,6,7)_"-"_($E(SDDEF,1,3)+1700)
"RTN","ONCOCFP",25,0)
SD K DIR
"RTN","ONCOCFP",26,0)
 S DIR(0)="D"
"RTN","ONCOCFP",27,0)
 S DIR("A")="          Start Date"
"RTN","ONCOCFP",28,0)
 S DIR("B")=SDDEF
"RTN","ONCOCFP",29,0)
 D ^DIR
"RTN","ONCOCFP",30,0)
 G EX:(Y="")!(Y[U)
"RTN","ONCOCFP",31,0)
 I (Y>DT) W "  Future dates not allowed" G SD
"RTN","ONCOCFP",32,0)
 S (SD,X)=Y D DD^%DT W "  ",Y
"RTN","ONCOCFP",33,0)
ED K DIR
"RTN","ONCOCFP",34,0)
 S DIR(0)="D"
"RTN","ONCOCFP",35,0)
 S DIR("A")="            End Date"
"RTN","ONCOCFP",36,0)
 D ^DIR
"RTN","ONCOCFP",37,0)
 G EX:(Y="")!(Y[U)
"RTN","ONCOCFP",38,0)
 I (Y<SD) W "  Invalid date sequence" G T
"RTN","ONCOCFP",39,0)
 I (Y>DT) W "  Future dates not allowed" G ED
"RTN","ONCOCFP",40,0)
 S $P(^ONCO(160.1,OSP,0),U,7)=Y
"RTN","ONCOCFP",41,0)
 S (ED,X)=Y D DD^%DT W "  ",Y
"RTN","ONCOCFP",42,0)
 W !
"RTN","ONCOCFP",43,0)
 K DIR
"RTN","ONCOCFP",44,0)
 S DIR(0)="Y"
"RTN","ONCOCFP",45,0)
 S DIR("A")="          Dates OK"
"RTN","ONCOCFP",46,0)
 S DIR("B")="Y"
"RTN","ONCOCFP",47,0)
 D ^DIR
"RTN","ONCOCFP",48,0)
 G EX:(Y="")!(Y[U)
"RTN","ONCOCFP",49,0)
 G T:'Y
"RTN","ONCOCFP",50,0)
 S ONCO("SD")=SD,ONCO("ED")=ED
"RTN","ONCOCFP",51,0)
 ;
"RTN","ONCOCFP",52,0)
 ;Include Squamous and Basal cell neoplasms (Y/N?)
"RTN","ONCOCFP",53,0)
 W !
"RTN","ONCOCFP",54,0)
 S SBCIND="NO"
"RTN","ONCOCFP",55,0)
 K DIR
"RTN","ONCOCFP",56,0)
 S DIR(0)="Y"
"RTN","ONCOCFP",57,0)
 S DIR("A")="          Include Squamous and Basal cell neoplasms"
"RTN","ONCOCFP",58,0)
 S DIR("B")="Yes"
"RTN","ONCOCFP",59,0)
 S DIR("?")=" "
"RTN","ONCOCFP",60,0)
 S DIR("?",1)=" Answer 'YES' if you want to include squamous and basal cell neoplasms."
"RTN","ONCOCFP",61,0)
 S DIR("?",2)=" Answer  'NO' if you want to exclude these neoplasms."
"RTN","ONCOCFP",62,0)
 D ^DIR
"RTN","ONCOCFP",63,0)
 G EX:(Y="")!(Y[U)
"RTN","ONCOCFP",64,0)
 S:Y=1 SBCIND="YES"
"RTN","ONCOCFP",65,0)
 K DIR
"RTN","ONCOCFP",66,0)
 ;
"RTN","ONCOCFP",67,0)
 W !!?3,"The following ICD codes will be searched for:"
"RTN","ONCOCFP",68,0)
 W !
"RTN","ONCOCFP",69,0)
 W !?3,"140-239        NEOPLASMS"
"RTN","ONCOCFP",70,0)
 W !?3,"               (excluding benign neoplasms 210-229 unless listed below)"
"RTN","ONCOCFP",71,0)
 W !?3,"042.2          HIV WITH SPECIFIED MALIGNANT NEOPLASMS"
"RTN","ONCOCFP",72,0)
 W !?3,"225.0-225.9    BENIGN NEOPLASMS OF BRAIN AND OTHER PARTS OF NERVOUS SYSTEM"
"RTN","ONCOCFP",73,0)
 W !?3,"227.3          BENIGN NEOPLASM OF PITUITARY GLAND AND CRANIOPHARYNGEAL DUCT"
"RTN","ONCOCFP",74,0)
 W !?3,"227.4          BENIGN NEOPLASM OF PINEAL GLAND"
"RTN","ONCOCFP",75,0)
 W !?3,"228.02         HEMANGIOMA INTRACRANIAL"
"RTN","ONCOCFP",76,0)
 W !?3,"259.2          CARCINOID SYNDROME"
"RTN","ONCOCFP",77,0)
 W !?3,"273.1-273.9    DISORDERS OF PLASMA PROTEIN METABOLISM"
"RTN","ONCOCFP",78,0)
 W !?3,"284.9          ANAPLASTIC ANEMIA, UNSPECIFIED"
"RTN","ONCOCFP",79,0)
 W !?3,"285.0          SIDEROBLASTIC ANEMIA"
"RTN","ONCOCFP",80,0)
 W !?3,"288.3          EOSINOPHILIA"
"RTN","ONCOCFP",81,0)
 W !?3,"288.4          HEMOPHAGOCYTIC SYNDROMES"
"RTN","ONCOCFP",82,0)
 W !?3,"289.6          FAMILIAL POLYCYTHEMIA"
"RTN","ONCOCFP",83,0)
 W !?3,"289.8          OTHER SPECIFIED DISEASES OF BLOOD AND BLOOD-FORMING ORGANS"
"RTN","ONCOCFP",84,0)
 W !?3,"289.83         MYELOFIBROSIS"
"RTN","ONCOCFP",85,0)
 W !?3,"795.06         PAPANICOLAOU SMEAR OF CERVIX WITH CYTOLOGIC EVIDENCE OF"
"RTN","ONCOCFP",86,0)
 W !?3,"               MALIGNANCY"
"RTN","ONCOCFP",87,0)
 W !?3,"795.16         PAP SMR VAG-CYTOL MALIG"
"RTN","ONCOCFP",88,0)
 W !?3,"796.76         PAP SMR ANUS-CYTOL MALIG"
"RTN","ONCOCFP",89,0)
 ;
"RTN","ONCOCFP",90,0)
 ;NOTE: Code 795.76 is incorrect in the ICD DIAGNOSIS (80) file.
"RTN","ONCOCFP",91,0)
 ;      It is appears as 796.76.  PTF casefinding will look for both
"RTN","ONCOCFP",92,0)
 ;      795.76 and 796.76.
"RTN","ONCOCFP",93,0)
 ;
"RTN","ONCOCFP",94,0)
 W !?3,"V07.3          NEED FOR OTHER PROPHYLACTIC CHEMOTHERAPY"
"RTN","ONCOCFP",95,0)
 W !?3,"V07.8          NEED FOR OTHER SPECIFIED PROPHYLACTIC MEASURE"
"RTN","ONCOCFP",96,0)
 W !?3,"V10.00-V10.09  GASTROINTESINAL TRACT"
"RTN","ONCOCFP",97,0)
 W !?3,"V12.41         PERS HX BENIGN NEOPL OF BRAIN"
"RTN","ONCOCFP",98,0)
 W !?3,"V58.0          ENCOUNTER FOR RADIOTHERAPY"
"RTN","ONCOCFP",99,0)
 W !?3,"V58.1          ENCOUNTER FOR CHEMOTHERAPY"
"RTN","ONCOCFP",100,0)
 W !?3,"V58.11         ANTINEOPLASTIC CHEMO ENC"
"RTN","ONCOCFP",101,0)
 W !?3,"V58.12         IMMUNOTHERAPY ENCOUNTER"
"RTN","ONCOCFP",102,0)
 W !?3,"V66.1-V66.2    CONVALESCENCE FOLLOWING RADIOTHERAPY/CHEMOTHERAPY"
"RTN","ONCOCFP",103,0)
 W !?3,"V67.1-V67.2    FOLLOW-UP EXAMINATION FOLLOWING RADIOTHERAPY/CHEMOTHERAPY"
"RTN","ONCOCFP",104,0)
 W !?3,"V71.1          OBSV-SUSPCT MAL NEOPLASM"
"RTN","ONCOCFP",105,0)
 W !?3,"V76.0-V76.9    SPECIAL SCREENING FOR MALIGNANT NEOPLASMS"
"RTN","ONCOCFP",106,0)
 W !
"RTN","ONCOCFP",107,0)
 ;List of ICD10
"RTN","ONCOCFP",108,0)
 D L10^ONCOCFP1
"RTN","ONCOCFP",109,0)
 W !
"RTN","ONCOCFP",110,0)
 ;
"RTN","ONCOCFP",111,0)
 S %ZIS="Q" D ^%ZIS I POP G EX
"RTN","ONCOCFP",112,0)
 I '$D(IO("Q")) D SER^ONCOCFP G EX
"RTN","ONCOCFP",113,0)
 S ZTRTN="SER^ONCOCFP",ZTSAVE("ONCO*")="",ZTDESC="ONCOLOGY PTF SEARCH"
"RTN","ONCOCFP",114,0)
 D ^%ZTLOAD
"RTN","ONCOCFP",115,0)
 G EX
"RTN","ONCOCFP",116,0)
 ;
"RTN","ONCOCFP",117,0)
SER ;Search PTF file (#45) file
"RTN","ONCOCFP",118,0)
 ;Supported by IA #418
"RTN","ONCOCFP",119,0)
 S AFFDIV=$G(DUZ(2)),ONCDIVSP=$O(^ONCO(160.1,"C",AFFDIV,""))
"RTN","ONCOCFP",120,0)
 I ONCDIVSP="" W !!,"User does not have an associated DIVISION",!! G EX
"RTN","ONCOCFP",121,0)
 F Z=0:0 S Z=$O(^ONCO(160.1,ONCDIVSP,6,Z)) Q:Z'>0  S AFFDIV=AFFDIV_U_$G(^ONCO(160.1,ONCDIVSP,6,Z,0))
"RTN","ONCOCFP",122,0)
 K ^TMP("ONCO",$J)
"RTN","ONCOCFP",123,0)
 S XDT=ONCO("SD")-.1111111
"RTN","ONCOCFP",124,0)
 S XED=ONCO("ED")+.9999999
"RTN","ONCOCFP",125,0)
 S ^TMP("ONCO",$J,0)=0
"RTN","ONCOCFP",126,0)
 F  S XDT=$O(^DGPT("ADS",XDT)) Q:(XDT>XED)!(XDT="")  S D0=$O(^(XDT,0)),X70=$G(^DGPT(D0,70)),X71=$G(^DGPT(D0,71)) I X70'="" D IC
"RTN","ONCOCFP",127,0)
 I $G(^TMP("ONCO",$J,0))=0 G WP
"RTN","ONCOCFP",128,0)
 E  D
"RTN","ONCOCFP",129,0)
 .S DIC="^ONCO(160,"
"RTN","ONCOCFP",130,0)
 .S BY="@75,INTERNAL(#3),75,.01"
"RTN","ONCOCFP",131,0)
 .S FR=DUZ(2)_","_ONCO("SD"),TO=DUZ(2)_","_ONCO("ED")
"RTN","ONCOCFP",132,0)
 .S FLDS="[ONCO PTF-CASEFINDING RPT]"
"RTN","ONCOCFP",133,0)
 S L=0,IOP=ION,DIOEND="D WP^ONCOCFP"
"RTN","ONCOCFP",134,0)
 D EN1^DIP Q
"RTN","ONCOCFP",135,0)
 ;
"RTN","ONCOCFP",136,0)
WP ;Wrap-up report
"RTN","ONCOCFP",137,0)
 W !?3,$G(^TMP("ONCO",$J,0))_" PTF cases added to Suspense"
"RTN","ONCOCFP",138,0)
 Q
"RTN","ONCOCFP",139,0)
 ;
"RTN","ONCOCFP",140,0)
IC ;Search for ICD codes
"RTN","ONCOCFP",141,0)
 K HT,IC9,IC,ICD,ICP,CI10
"RTN","ONCOCFP",142,0)
 S P="",CI=0,CI10=0
"RTN","ONCOCFP",143,0)
 F F=10,16:1:24 S ICP=+$P(X70,U,F) I ICP>0 S IC9=$$GET1^DIQ(80,ICP,.01,"I") D FD Q:(CI=1)!(CI10=1)
"RTN","ONCOCFP",144,0)
 I (X71'=""),(CI=0),(CI10=0) F F=1:1:15 S ICP=+$P(X71,U,F) I ICP>0 S IC9=$$GET1^DIQ(80,ICP,.01,"I") D FD Q:(CI=1)!(CI10=1)
"RTN","ONCOCFP",145,0)
 ;I CI=0 D IC10^ONCOCFP1
"RTN","ONCOCFP",146,0)
 I (CI=0),(CI10=0) Q
"RTN","ONCOCFP",147,0)
 G CK
"RTN","ONCOCFP",148,0)
 ;
"RTN","ONCOCFP",149,0)
FD I ((IC9>139.9)&(IC9<210)) S CI=1 Q
"RTN","ONCOCFP",150,0)
 I ((IC9>224.9)&(IC9<226)) S CI=1 Q
"RTN","ONCOCFP",151,0)
 I (IC9=227.3)!(IC9=227.4)!(IC9=228.02) S CI=1 Q
"RTN","ONCOCFP",152,0)
 I ((IC9>229.9)&(IC9<240)) S CI=1 Q
"RTN","ONCOCFP",153,0)
 I (IC9=259.2)!(IC9=273.1)!(IC9=273.2)!(IC9=273.3)!(IC9=273.9)!(IC9=284.9)!(IC9=288.3)!(IC9=288.4)!(IC9=289.6)!(IC9=289.8)!(IC9=289.83)!(IC9=795.06)!(IC9=795.16)!(IC9=795.76)!(IC9=796.76)!(IC9="042.2")!(IC9="285.0") S CI=1 Q
"RTN","ONCOCFP",154,0)
 I $E(IC9)="V" S CD=$E(IC9,2,5) I ((CD>9)&(CD<11))!(CD=12.41)!(CD="58.0")!(CD=58.1)!(CD=66.1)!(CD=66.2)!(CD=67.1)!(CD=67.2)!(CD=71.1)!(CD="07.3")!(CD="07.8")!($E(CD,1,2)=76) S CI=1 Q
"RTN","ONCOCFP",155,0)
 S IC10=IC9 D FD10^ONCOCFP1
"RTN","ONCOCFP",156,0)
 Q
"RTN","ONCOCFP",157,0)
 ;
"RTN","ONCOCFP",158,0)
CK ;Check ONCOLOGY PATIENT (160) file
"RTN","ONCOCFP",159,0)
 ;Supported by IA #418
"RTN","ONCOCFP",160,0)
 I ($G(IC9)=""),($G(IC10)="") Q
"RTN","ONCOCFP",161,0)
 D DIV Q:DVMTCH=0
"RTN","ONCOCFP",162,0)
 S X=^DGPT(D0,0),ADT=$P($P(X,U,2),"."),X=$P(X,U)_";DPT("
"RTN","ONCOCFP",163,0)
 S XD0=$O(^ONCO(160,"B",X,0)),ONCIEN=XD0 I XD0="" G MR
"RTN","ONCOCFP",164,0)
 I XD0'="" S ONCDIVS="",ONCS="" F  S ONCS=$O(^ONCO(160,XD0,"SUS","C",ONCS)) Q:ONCS'>0  S ONCDIVS=ONCDIVS_U_ONCS
"RTN","ONCOCFP",165,0)
 I ONCDIVS[DUZ(2) Q
"RTN","ONCOCFP",166,0)
 S DA=XD0 I '$D(^ONCO(165.5,"C",XD0)) G N2
"RTN","ONCOCFP",167,0)
 ;
"RTN","ONCOCFP",168,0)
CKP ;Check ONCOLOGY PRIMARY (165.5) file
"RTN","ONCOCFP",169,0)
 S XD1=0 F  S XD1=$O(^ONCO(165.5,"C",XD0,XD1)) Q:XD1'>0  I $$DIV^ONCFUNC(XD1)=DUZ(2) D
"RTN","ONCOCFP",170,0)
 .S XDX=$P($G(^ONCO(165.5,XD1,0)),U,16) I XDT>(ADT-1)&(XDX<($P(XDT,".")+1)) S HT=1 Q
"RTN","ONCOCFP",171,0)
 .S XDX=$P($G(^ONCO(165.5,XD1,1)),U,10) I XDX=XDT S HT=1 Q
"RTN","ONCOCFP",172,0)
 Q
"RTN","ONCOCFP",173,0)
 ;
"RTN","ONCOCFP",174,0)
MR ;Create ONCOLOGY PATIENT (160) record
"RTN","ONCOCFP",175,0)
 Q:$D(HT)
"RTN","ONCOCFP",176,0)
 K DO S DIC="^ONCO(160,",DIC(0)="Z" D FILE^DICN K DO
"RTN","ONCOCFP",177,0)
 S (ONCIEN,XD0,DA)=+Y
"RTN","ONCOCFP",178,0)
 ;
"RTN","ONCOCFP",179,0)
N2 ;Create SUSPENSE (160.075) record
"RTN","ONCOCFP",180,0)
 N DD,PTFDT,X1,X2
"RTN","ONCOCFP",181,0)
 S X1=ADT,X2=1 D C^%DTC S SDT=X
"RTN","ONCOCFP",182,0)
 S X1=ONCO("SD"),X2=1 D C^%DTC S WSD=X
"RTN","ONCOCFP",183,0)
 S DA(1)=ONCIEN,DIC="^ONCO(160,"_DA(1)_",""SUS"","
"RTN","ONCOCFP",184,0)
 K DO S DIC(0)="L",DIC("P")=$P(^DD(160,75,0),U,2),X=$S(SDT<WSD:WSD,1:SDT)
"RTN","ONCOCFP",185,0)
 D FILE^DICN K DO
"RTN","ONCOCFP",186,0)
 K DIE S DA(1)=ONCIEN,DIE="^ONCO(160,"_DA(1)_",""SUS"","
"RTN","ONCOCFP",187,0)
 S (ONCSUB,DA)=+Y,PTFDT=$P(XDT,".")
"RTN","ONCOCFP",188,0)
 S DR="1///^S X=DT;2///^S X=""PT"";3////^S X=DUZ(2);7///^S X=PTFDT;8////^S X=ICP"
"RTN","ONCOCFP",189,0)
 D ^DIE
"RTN","ONCOCFP",190,0)
 S ^TMP("ONCO",$J,0)=^TMP("ONCO",$J,0)+1
"RTN","ONCOCFP",191,0)
 Q
"RTN","ONCOCFP",192,0)
 ;
"RTN","ONCOCFP",193,0)
DIV ;DIVISION match
"RTN","ONCOCFP",194,0)
 ;Supported by IAs #417 and #1378
"RTN","ONCOCFP",195,0)
 N PTFD0,PTMV,WL
"RTN","ONCOCFP",196,0)
 S DVMTCH=1,INST=""
"RTN","ONCOCFP",197,0)
 S PTFD0=D0,PTMV=$O(^DGPM("APTF",PTFD0,"")) I PTMV="" Q
"RTN","ONCOCFP",198,0)
 S WL=$P($G(^DGPM(PTMV,0)),U,6) I WL="" Q
"RTN","ONCOCFP",199,0)
 S MCDV=$P($G(^DIC(42,WL,0)),U,11) I MCDV="" Q
"RTN","ONCOCFP",200,0)
 S INST=$P($G(^DG(40.8,MCDV,0)),U,7) I INST="" Q
"RTN","ONCOCFP",201,0)
 I AFFDIV'[INST S DVMTCH=0 Q
"RTN","ONCOCFP",202,0)
 Q
"RTN","ONCOCFP",203,0)
 ;
"RTN","ONCOCFP",204,0)
EX ;KILL variables
"RTN","ONCOCFP",205,0)
 K %DT,%T,%ZIS,ADT,AFFDIV,BY,CD,CI,D0,DA,DD,DIC,DIE,DIOEND,DIR,DO,DR
"RTN","ONCOCFP",206,0)
 K DVMTCH,ED,F,FLDS,FR,GLO,HT,IC,IC9,ICD,ICP,INST,IOP,L,MCDV,NM,O2,CI10,IC10,SBCIND
"RTN","ONCOCFP",207,0)
 K ONCDIVS,ONCDIVSP,ONCIEN,ONCO,ONCS,ONCSUB,OSP,P,POP,PTFD0,PTFDT,PTMV
"RTN","ONCOCFP",208,0)
 K SD,SDDEF,SDT,TO,WED,WSD,X,X1,X2,X70,X71,XD0,XD1,XDT,XDX,XED,Y,Z
"RTN","ONCOCFP",209,0)
 K ZTDESC,ZTRTN,ZTSAVE
"RTN","ONCOCFP",210,0)
 K ^TMP("ONCO",$J)
"RTN","ONCOCFP",211,0)
 D ^%ZISC
"RTN","ONCOCFP",212,0)
 Q
"RTN","ONCOCFP1")
0^9^B82107874^n/a
"RTN","ONCOCFP1",1,0)
ONCOCFP1 ;Hines OIFO/RVD - [PT Automatic Casefinding-PTF Search 1] ;09/10/15
"RTN","ONCOCFP1",2,0)
 ;;2.2;ONCOLOGY;**7**;Jul 31, 2013;Build 5
"RTN","ONCOCFP1",3,0)
 ;
"RTN","ONCOCFP1",4,0)
 ; rvd - 0403/12 p56. Use ICD API (#3990) instead of direct global call
"RTN","ONCOCFP1",5,0)
L10 ;
"RTN","ONCOCFP1",6,0)
 W !
"RTN","ONCOCFP1",7,0)
 ;List of ICD10
"RTN","ONCOCFP1",8,0)
 W !?3,"*** COMPREHENSIVE ICD-10-CM Casefinding Code List for Reportable Tumors"
"RTN","ONCOCFP1",9,0)
 W !?3,"          (Effective 10/1/2015-9/30/2016). ***"
"RTN","ONCOCFP1",10,0)
 W !
"RTN","ONCOCFP1",11,0)
 W !?3,"C00._- C43._,C45._-C96._  Malignant neoplasms (excluding category C44),"
"RTN","ONCOCFP1",12,0)
 W !?3,"                  stated or presumed to be primary (of specified site)"
"RTN","ONCOCFP1",13,0)
 W !?3,"                  and certain specified histologies"
"RTN","ONCOCFP1",14,0)
 W !?3,"C44.00_, C44.09    Unspecified/other malignant neoplasm of skin of lip"
"RTN","ONCOCFP1",15,0)
 W !?3,"C44.10_, C44.19_  Unspecified/other malignant neoplasm of skin of eyelid"
"RTN","ONCOCFP1",16,0)
 W !?3,"C44.20_, C44.29_  Unspecified/other malignant neoplasm skin of ear and"
"RTN","ONCOCFP1",17,0)
 W !?3,"                  external auricular canal"
"RTN","ONCOCFP1",18,0)
 W !?3,"C44.30_, C44.39_  Unspecified/other malignant neoplasm of skin of"
"RTN","ONCOCFP1",19,0)
 W !?3,"                  other/unspecified parts of face"
"RTN","ONCOCFP1",20,0)
 W !?3,"C44.40_, C44.49   Unspecified/other malignant neoplasm of skin of"
"RTN","ONCOCFP1",21,0)
 W !?3,"                  scalp & neck"
"RTN","ONCOCFP1",22,0)
 W !?3,"C44.50_, C44.59_  Unspecified/other malignant neoplasm of skin of trunk"
"RTN","ONCOCFP1",23,0)
 W !?3,"C44.60_, C44.69_  Unspecified/other malignant neoplasm of skin of upper"
"RTN","ONCOCFP1",24,0)
 W !?3,"                  limb, incl. shoulder"
"RTN","ONCOCFP1",25,0)
 W !?3,"C44.70_, C44.79_  Unspecified/other malignant neoplasm of skin of lower "
"RTN","ONCOCFP1",26,0)
 W !?3,"                   limb, including hip"
"RTN","ONCOCFP1",27,0)
 W !?3,"C44.80_, C44.89   Unspecified/other malignant neoplasm of skin of"
"RTN","ONCOCFP1",28,0)
 W !?3,"                   overlapping sites of skin"
"RTN","ONCOCFP1",29,0)
 W !?3,"C44.90_, C44.99   Unspecified/other malignant neoplasm of skin of"
"RTN","ONCOCFP1",30,0)
 W !?3,"                   unspecified sites of skin"
"RTN","ONCOCFP1",31,0)
 W !?3,"D00._- D09._      In-situ neoplasms (Note: Carcinoma in situ of the cervix"
"RTN","ONCOCFP1",32,0)
 W !?3,"                   (C/N III-8077/2) and Prostatic Intraepithelial Carcinoma"
"RTN","ONCOCFP1",33,0)
 W !?3,"                   (PIN III-8148/2) are not reportable)."
"RTN","ONCOCFP1",34,0)
 W !?3,"D18.02            Hemangioma of intracranial structures and any site"
"RTN","ONCOCFP1",35,0)
 W !?3,"D18.1             Lymphangioma, any site (Note: Includes Lymphangiomas of"
"RTN","ONCOCFP1",36,0)
 W !?3,"                   Brain, Other parts of nervous system and endocrine glands,"
"RTN","ONCOCFP1",37,0)
 W !?3,"                   which are reportable)"
"RTN","ONCOCFP1",38,0)
 W !?3,"D32._          Benign neoplasm of meninges (cerebral, spinal and unspecified)"
"RTN","ONCOCFP1",39,0)
 W !?3,"D33._          Benign neoplasm of brain and other parts of central nervous"
"RTN","ONCOCFP1",40,0)
 W !?3,"                   system"
"RTN","ONCOCFP1",41,0)
 W !?3,"D35.2 - D35.4  Benign neoplasm of pituitary gland, craniopharyngeal duct and"
"RTN","ONCOCFP1",42,0)
 W !?3,"                   pineal gland"
"RTN","ONCOCFP1",43,0)
 W !?3,"D42._, D43._   Neoplasm of uncertain or unknown behavior of meninges, brain,"
"RTN","ONCOCFP1",44,0)
 W !?3,"                   CNS"
"RTN","ONCOCFP1",45,0)
 W !?3,"D44.3 - D44.5  Neoplasm of uncertain or unknown behavior of pituitary gland,"
"RTN","ONCOCFP1",46,0)
 W !?3,"                   craniopharyngeal duct and pineal gland"
"RTN","ONCOCFP1",47,0)
 W !?3,"D45            Polycythemia vera (9950/3)"
"RTN","ONCOCFP1",48,0)
 W !?3,"D46._          Myelodysplastic syndromes (9980, 9982, 9983, 9985, 9986, 9989,"
"RTN","ONCOCFP1",49,0)
 W !?3,"                  9991, 9992)"
"RTN","ONCOCFP1",50,0)
 W !?3,"D47.1          Chronic myeloproliferative disease (9963/3)"
"RTN","ONCOCFP1",51,0)
 W !?3,"D47.3          Essential (hemorrhagic) thrombocythemia (9962/3)"
"RTN","ONCOCFP1",52,0)
 W !?3,"D47.4          Osteomyelofibrosis (9961/3)"
"RTN","ONCOCFP1",53,0)
 W !?3,"D47.7          Other specified neoplasms of uncertain/unknown behavior of"
"RTN","ONCOCFP1",54,0)
 W !?3,"             lymphoid, hematopoietic (9965/3, 9966/3, 9967/3, 9971/3, 9975/3)"
"RTN","ONCOCFP1",55,0)
 W !?3,"D47.Z_         Other neoplasms of uncertain behavior of lymphoid,"
"RTN","ONCOCFP1",56,0)
 W !?3,"                  hematopoietic related tissue"
"RTN","ONCOCFP1",57,0)
 W !?3,"D47.9          Neoplasm of uncertain behavior of lymphoid, hematopoietic and"
"RTN","ONCOCFP1",58,0)
 W !?3,"                    related tissue, unspecified (9970/1, 9931/3)"
"RTN","ONCOCFP1",59,0)
 W !?3,"D49.6, D49.7   Neoplasm of unspecified behavior of brain, endocrine glands"
"RTN","ONCOCFP1",60,0)
 W !?3,"                    and other CNS"
"RTN","ONCOCFP1",61,0)
 ;
"RTN","ONCOCFP1",62,0)
 I SBCIND="YES" D
"RTN","ONCOCFP1",63,0)
 .W !?3,"C44.01, C44.02   Basal/squamous cell carcinoma of skin of lip"
"RTN","ONCOCFP1",64,0)
 .W !?3,"C44.11_, C44.12_ Basal/squamous cell carcinoma of skin of eyelid"
"RTN","ONCOCFP1",65,0)
 .W !?3,"C44.21_, C44.22_ Basal/squamous cell carcinoma of skin of ear and"
"RTN","ONCOCFP1",66,0)
 .W !?3,"                   external auricular canal"
"RTN","ONCOCFP1",67,0)
 .W !?3,"C44.31_, C44.32_ Basal/squamous cell carcinoma of skin of other and"
"RTN","ONCOCFP1",68,0)
 .W !?3,"                   unspecified parts of face"
"RTN","ONCOCFP1",69,0)
 .W !?3,"C44.41, C44.42   Basal/squamous cell carcinoma of skin of scalp and neck"
"RTN","ONCOCFP1",70,0)
 .W !?3,"C44.51_, C44.52_ Basal/squamous cell carcinoma of skin of trunk"
"RTN","ONCOCFP1",71,0)
 .W !?3,"C44.61_, C44.62_ Basal/squamous cell carcinoma of skin of upper limb,"
"RTN","ONCOCFP1",72,0)
 .W !?3,"                   including shoulder"
"RTN","ONCOCFP1",73,0)
 .W !?3,"C44.71_, C44.72_ Basal/squamous cell carcinoma of skin of lower limb,"
"RTN","ONCOCFP1",74,0)
 .W !?3,"                   including hip"
"RTN","ONCOCFP1",75,0)
 .W !?3,"C44.81, C44.82  Basal/squamous cell carcinoma of skin of overlapping sites"
"RTN","ONCOCFP1",76,0)
 .W !?3,"                   of skin"
"RTN","ONCOCFP1",77,0)
 .W !?3,"C44.91, C44.92  Basal/squamous cell carcinoma of skin of unspecified sites"
"RTN","ONCOCFP1",78,0)
 .W !?3,"                   of skin"
"RTN","ONCOCFP1",79,0)
 ;
"RTN","ONCOCFP1",80,0)
 W !?3,"D47.2           Monoclonal gammopathy"
"RTN","ONCOCFP1",81,0)
 W !
"RTN","ONCOCFP1",82,0)
 W !?3,"*** Note: Screen for incorrectly coded Waldenstrom's macro globulinemia ***"
"RTN","ONCOCFP1",83,0)
 W !
"RTN","ONCOCFP1",84,0)
 W !?3,"D64.81         Anemia due to antineoplastic chemotherapy"
"RTN","ONCOCFP1",85,0)
 W !?3,"D70.1          Agranulocytosis secondary to cancer chemotherapy"
"RTN","ONCOCFP1",86,0)
 W !?3,"D72.1          Eosinophilia (Note: Code for eosinophilia (9964/3). Not every"
"RTN","ONCOCFP1",87,0)
 W !?3,"                 case of eosinophilia is a malignancy. Reportable Diagnosis"
"RTN","ONCOCFP1",88,0)
 W !?3,"                 is Hypereosonophilic syndrome.)"
"RTN","ONCOCFP1",89,0)
 W !?3,"D76._          Other specified diseases with participation of lymphoreticular"
"RTN","ONCOCFP1",90,0)
 W !?3,"                  and reticulohistiocytic tissue"
"RTN","ONCOCFP1",91,0)
 W !?3,"E34.0          Carcinoid syndrome"
"RTN","ONCOCFP1",92,0)
 W !?3,"E88.3          Tumor lysis syndrome (following antineoplastic chemotherapy)"
"RTN","ONCOCFP1",93,0)
 W !?3,"K22.711        Barrett's esophagus with high grade dysplasia"
"RTN","ONCOCFP1",94,0)
 W !?3,"K92.81         Gastrointestinal mucositis (ulcerated) (due to antineoplastic"
"RTN","ONCOCFP1",95,0)
 W !?3,"                  therapy)"
"RTN","ONCOCFP1",96,0)
 W !?3,"R18.0          Malignant ascites"
"RTN","ONCOCFP1",97,0)
 W !?3,"R53.0          Neoplastic (malignant) related fatigue"
"RTN","ONCOCFP1",98,0)
 W !?3,"T45.1          Poisoning by, adverse effect of and under dosing of"
"RTN","ONCOCFP1",99,0)
 W !?3,"                 antineoplastic and immunosuppressive drugs"
"RTN","ONCOCFP1",100,0)
 W !?3,"T66             Unspecified effects of radiation"
"RTN","ONCOCFP1",101,0)
 W !?3,"Y63.2           Overdose of radiation given during therapy"
"RTN","ONCOCFP1",102,0)
 W !?3,"Y84.2           Radiological procedure and radiotherapy as the cause of"
"RTN","ONCOCFP1",103,0)
 W !?3,"                 abnormal reaction of the patient, or of later complication,"
"RTN","ONCOCFP1",104,0)
 W !?3,"                 without mention of misadventure at the time of the procedure"
"RTN","ONCOCFP1",105,0)
 W !?3,"Z08             Encounter for follow-up examination after completed"
"RTN","ONCOCFP1",106,0)
 W !?3,"                 treatment for malignant neoplasm"
"RTN","ONCOCFP1",107,0)
 W !?3,"Z12._           Encounter for screening for malignant neoplasms"
"RTN","ONCOCFP1",108,0)
 W !?3,"Z17.0, Z17.1    Estrogen receptor positive and negative status"
"RTN","ONCOCFP1",109,0)
 W !?3,"Z40.0_          Encounter for prophylactic surgery for risk factors related"
"RTN","ONCOCFP1",110,0)
 W !?3,"                  to malignant neoplasms"
"RTN","ONCOCFP1",111,0)
 W !?3,"Z42.1           Encounter for breast reconstruction following mastectomy"
"RTN","ONCOCFP1",112,0)
 W !?3,"Z48.290         Encounter for aftercare following bone marrow transplant"
"RTN","ONCOCFP1",113,0)
 W !?3,"Z51.0           Encounter for antineoplastic radiation therapy"
"RTN","ONCOCFP1",114,0)
 W !?3,"Z51.1_          Encounter for antineoplastic chemotherapy and immunotherapy"
"RTN","ONCOCFP1",115,0)
 W !?3,"Z51.5, Z51.89   Encounter for palliative care and other specified aftercare"
"RTN","ONCOCFP1",116,0)
 W !?3,"Z85._           Personal history of malignant neoplasm"
"RTN","ONCOCFP1",117,0)
 W !?3,"Z86.0_, Z86.01_,Z86.03  Personal history of in situ and benign neoplasms and"
"RTN","ONCOCFP1",118,0)
 W !?3,"                          neoplasms of uncertain behavior"
"RTN","ONCOCFP1",119,0)
 W !?3,"Z92.21, Z92.23, Z92.25,Z92.3  Personal history of antineoplastic"
"RTN","ONCOCFP1",120,0)
 W !?3,"                      chemotherapy, estrogen therapy, immunosuppression"
"RTN","ONCOCFP1",121,0)
 W !?3,"                      therapy or irradiation (radiation)"
"RTN","ONCOCFP1",122,0)
 W !?3,"Z94.81, Z94.84  Bone marrow and stem cell transplant status"
"RTN","ONCOCFP1",123,0)
 W !
"RTN","ONCOCFP1",124,0)
 Q
"RTN","ONCOCFP1",125,0)
 ;
"RTN","ONCOCFP1",126,0)
IC10 ;Search for ICD10 codes
"RTN","ONCOCFP1",127,0)
 I X71'="",CI10=0 F F=5:1:15 S ICP=+$P(X71,U,F) I ICP>0 S IC10=$$GET1^DIQ(80,ICP,.01,"I") D FD10 Q:CI10=1
"RTN","ONCOCFP1",128,0)
 Q
"RTN","ONCOCFP1",129,0)
 ;
"RTN","ONCOCFP1",130,0)
FD10 ;Check for valid ICD10 CM code for Oncology.
"RTN","ONCOCFP1",131,0)
 I (SBCIND="YES"),($E(IC10)="C") S CI10=1 Q
"RTN","ONCOCFP1",132,0)
 I (SBCIND="NO"),($E(IC10)="C") D  Q
"RTN","ONCOCFP1",133,0)
 .I ($E(IC10,2,7)<44.01)!($E(IC10,2,7)>44.92) S CI10=1
"RTN","ONCOCFP1",134,0)
 .Q
"RTN","ONCOCFP1",135,0)
 I ((IC10="D18.02")!(IC10="D18.1")!(IC10="D35.2")!(IC10="D35.4")!(IC10="D45")!(IC10="D47.2")!(IC10="D64.81")) S CI10=1 Q
"RTN","ONCOCFP1",136,0)
 I ((IC10="D47.1")!(IC10="D47.3")!(IC10="D47.4")!(IC10="D47.7")!(IC10="D47.9")!(IC10="D49.6")!(IC10="D49.7")) S CI10=1 Q
"RTN","ONCOCFP1",137,0)
 I ((IC10="D70.1")!(IC10="D72.1")!(IC10="E34.0")!(IC10="E88.3")!(IC10="K22.711")!(IC10="K92.81")!(IC10="R18.0")) S CI10=1 Q
"RTN","ONCOCFP1",138,0)
 I ((IC10="R53.0")!(IC10="T66")!(IC10="Y63.2")!(IC10="Y84.2")!(IC10="Z08")!(IC10="Z17.0")!(IC10="Z17.1")) S CI10=1 Q
"RTN","ONCOCFP1",139,0)
 I ((IC10="Z42.1")!(IC10="Z48.290")!(IC10="Z51.0")!(IC10="Z51.5")!(IC10="Z51.89")!(IC10="Z86.03")!(IC10="Z92.21")) S CI10=1 Q
"RTN","ONCOCFP1",140,0)
 I ((IC10="Z92.23")!(IC10="Z92.25")!(IC10="Z92.3")!(IC10="Z94.81")!(IC10="Z94.84")) S CI10=1 Q
"RTN","ONCOCFP1",141,0)
 I ($E(IC10)="D"),(($E(IC10,2,7)>00)&($E(IC10,2,7)<09.9999)) S CI10=1 Q
"RTN","ONCOCFP1",142,0)
 I ($E(IC10)="D"),(($E(IC10,2,7)>32)&($E(IC10,2,7)<33.9999)) S CI10=1 Q
"RTN","ONCOCFP1",143,0)
 I ($E(IC10)="D"),(($E(IC10,2,7)>42)&($E(IC10,2,7)<43.9999)) S CI10=1 Q
"RTN","ONCOCFP1",144,0)
 I ($E(IC10)="D"),(($E(IC10,2,7)>44.29999)&($E(IC10,2,7)<44.5555)) S CI10=1 Q
"RTN","ONCOCFP1",145,0)
 I ($E(IC10)="D"),(($E(IC10,2,7)>46)&($E(IC10,2,7)<46.9999)) S CI10=1 Q
"RTN","ONCOCFP1",146,0)
 I ($E(IC10,1,5)="D47.Z"),(($E(IC10,6,7)>0)&($E(IC10,6,7)<9999)) S CI10=1 Q
"RTN","ONCOCFP1",147,0)
 I ($E(IC10)="D"),(($E(IC10,2,7)>75.9999)&($E(IC10,2,7)<76.9999)) S CI10=1 Q
"RTN","ONCOCFP1",148,0)
 I ($E(IC10)="T"),(($E(IC10,2,7)>45.1)&($E(IC10,2,7)<45.1999)) S CI10=1 Q
"RTN","ONCOCFP1",149,0)
 I ($E(IC10)="Z"),(($E(IC10,2,7)>11.9999)&($E(IC10,2,7)<12.9999)) S CI10=1 Q
"RTN","ONCOCFP1",150,0)
 I ($E(IC10)="Z"),(($E(IC10,2,7)>40.0)&($E(IC10,2,7)<40.0999)) S CI10=1 Q
"RTN","ONCOCFP1",151,0)
 I ($E(IC10)="Z"),(($E(IC10,2,7)>51.1)&($E(IC10,2,7)<51.1999)) S CI10=1 Q
"RTN","ONCOCFP1",152,0)
 I ($E(IC10)="Z"),(($E(IC10,2,7)>85)&($E(IC10,2,7)<86.0199)) S CI10=1 Q
"RTN","ONCOCFP1",153,0)
 Q
"RTN","ONCOCFP1",154,0)
 ;
"RTN","ONCOCFP1",155,0)
EX ;KILL variables
"RTN","ONCOCFP1",156,0)
 K %DT,%T,%ZIS,ADT,AFFDIV,BY,CD,CI,D0,DA,DD,DIC,DIE,DIOEND,DIR,DO,DR
"RTN","ONCOCFP1",157,0)
 K DVMTCH,ED,F,FLDS,FR,GLO,HT,IC,IC9,ICD,ICP,INST,IOP,L,MCDV,NM,O2
"RTN","ONCOCFP1",158,0)
 K ONCDIVS,ONCDIVSP,ONCIEN,ONCO,ONCS,ONCSUB,OSP,P,POP,PTFD0,PTFDT,PTMV
"RTN","ONCOCFP1",159,0)
 K SD,SDDEF,SDT,TO,WED,WSD,X,X1,X2,X70,X71,XD0,XD1,XDT,XDX,XED,Y,Z
"RTN","ONCOCFP1",160,0)
 K ZTDESC,ZTRTN,ZTSAVE
"RTN","ONCOCFP1",161,0)
 K ^TMP("ONCO",$J)
"RTN","ONCOCFP1",162,0)
 D ^%ZISC
"RTN","ONCOCFP1",163,0)
 Q
"RTN","ONCOCOC")
0^6^B6585655^B6349998
"RTN","ONCOCOC",1,0)
ONCOCOC ;Hines OIFO/GWB - COMPUTED FIELDS FOR CASEFINDING REPORTS ;05/25/00
"RTN","ONCOCOC",2,0)
 ;;2.2;ONCOLOGY;**1,7**;Jul 31, 2013;Build 5
"RTN","ONCOCOC",3,0)
 ;
"RTN","ONCOCOC",4,0)
LAB ;LAB CASEFINDING REPORT (160,53)
"RTN","ONCOCOC",5,0)
 N X
"RTN","ONCOCOC",6,0)
 D GET G EX:O2=""
"RTN","ONCOCOC",7,0)
 S SR=$P(O2,U,3) G EX:$E(SR,1)'="L"
"RTN","ONCOCOC",8,0)
 S SR=$E(SR,2),LRSS=$S(SR="S":"SP",SR="C":"CY",SR="E":"EM",1:"AU")
"RTN","ONCOCOC",9,0)
 S XDT=$P(O2,U,1),MO=$P(O2,U,5),TO=$P(O2,U,6),DZ=$P(O2,U,14)
"RTN","ONCOCOC",10,0)
 S TO=$S(TO="":"None",1:"T-"_$P(^LAB(61,+TO,0),U,2)_"  "_$P(^LAB(61,+TO,0),U,1))
"RTN","ONCOCOC",11,0)
 S MODZ="None"
"RTN","ONCOCOC",12,0)
 I MO S MODZ=$G(^LAB(61.1,+MO,0)),MODZ=$E($P(MODZ,U,2),1,4)_"/"_$E($P(MODZ,U,2),5)_"  "_$P(MODZ,U,1)
"RTN","ONCOCOC",13,0)
 I DZ S MODZ=$G(^LAB(61.4,+DZ,0)),MODZ=$P(MODZ,U,2)_"  "_$P(MODZ,U,1)
"RTN","ONCOCOC",14,0)
 D DT
"RTN","ONCOCOC",15,0)
 W $E(XNM,1,20),?22,$E(XSN,1,6),?29,XDT,?44,LRSS
"RTN","ONCOCOC",16,0)
 I $D(^ONCO(165.5,"C",D0)) D DLC^ONCOCRF,DATEOT^ONCOES W ?54,X
"RTN","ONCOCOC",17,0)
 W !
"RTN","ONCOCOC",18,0)
 W "Topography:",?12,TO,!
"RTN","ONCOCOC",19,0)
 W:MO "Morphology:",?13,MODZ
"RTN","ONCOCOC",20,0)
 W:DZ "Disease:",?15,MODZ
"RTN","ONCOCOC",21,0)
 D SDD^ONCOCOM
"RTN","ONCOCOC",22,0)
 W !,"-------------------------------------------------------------------------------"
"RTN","ONCOCOC",23,0)
 W ! G EX
"RTN","ONCOCOC",24,0)
 ;
"RTN","ONCOCOC",25,0)
PTF ;PTF CASEFINDING REPORT (160,54)
"RTN","ONCOCOC",26,0)
 N ONCIC
"RTN","ONCOCOC",27,0)
 D GET G EX:O2=""
"RTN","ONCOCOC",28,0)
 S SR=$P(O2,U,3) G EX:$E(SR,1)'="P"
"RTN","ONCOCOC",29,0)
 S ONCIC=$$GET1^DIQ(80,+$P(O2,U,9),.01,"I")
"RTN","ONCOCOC",30,0)
 S IC=$$ICDDX^ICDEXC(ONCIC) G EX:+IC=-1
"RTN","ONCOCOC",31,0)
 S XDT=+$P(O2,U,8)
"RTN","ONCOCOC",32,0)
 D DT
"RTN","ONCOCOC",33,0)
 S XDD=XDT,XDT=$P(O2,U,1)
"RTN","ONCOCOC",34,0)
 D DT
"RTN","ONCOCOC",35,0)
 W $E(XNM,1,20),?22,XSN,?29,XDT_" - "_XDD,!
"RTN","ONCOCOC",36,0)
 W "Diagnosis:",?11,$P(IC,U,2),?19,$P(IC,U,4),!!
"RTN","ONCOCOC",37,0)
 G LST
"RTN","ONCOCOC",38,0)
 ;
"RTN","ONCOCOC",39,0)
RAD ;RADIOLOGY CASEFINDING REPORT (160,58)
"RTN","ONCOCOC",40,0)
 D GET G EX:O2=""
"RTN","ONCOCOC",41,0)
 S SR=$P(O2,U,3) G EX:$E(SR,1)'="R"
"RTN","ONCOCOC",42,0)
 S XDT=$P(O2,U,1),RAD=$P($G(^RAMIS(71,+$P(O2,U,7),0)),U) G EX:RAD=""
"RTN","ONCOCOC",43,0)
 D DT
"RTN","ONCOCOC",44,0)
 ;B "L"
"RTN","ONCOCOC",45,0)
 W $E(XNM,1,29),?31,XSN,?38,XDT,?50,$E(RAD,1,30)
"RTN","ONCOCOC",46,0)
 G LST
"RTN","ONCOCOC",47,0)
 ;
"RTN","ONCOCOC",48,0)
GET ;Set variables
"RTN","ONCOCOC",49,0)
 S XD0=$G(^ONCO(160,D0,0)),GLO="" I XD0="" Q
"RTN","ONCOCOC",50,0)
 S LRDFN=$P(XD0,U,2)
"RTN","ONCOCOC",51,0)
 S VPR=$P(XD0,U)
"RTN","ONCOCOC",52,0)
 S GLO=U_$P(VPR,";",2)_$P(VPR,";"),GL0=GLO_",0)"
"RTN","ONCOCOC",53,0)
 S XPI=$G(@GL0),XNM=$P(XPI,U),SN=$P(XPI,U,9),XSN=$E(XNM,1)_$E(SN,6,9)
"RTN","ONCOCOC",54,0)
 S O2="" I $D(^ONCO(160,D0,"SUS","C",DUZ(2))) D  K SUSIEN
"RTN","ONCOCOC",55,0)
 .S SUSIEN=$O(^ONCO(160,D0,"SUS","C",DUZ(2),0))
"RTN","ONCOCOC",56,0)
 .S O2=^ONCO(160,D0,"SUS",SUSIEN,0)
"RTN","ONCOCOC",57,0)
 Q
"RTN","ONCOCOC",58,0)
 ;
"RTN","ONCOCOC",59,0)
DT ;Format date
"RTN","ONCOCOC",60,0)
 S XDT=$E(XDT,4,5)_"/"_$E(XDT,6,7)_"/"_($E(XDT,1,3)+1700)
"RTN","ONCOCOC",61,0)
 Q
"RTN","ONCOCOC",62,0)
 ;
"RTN","ONCOCOC",63,0)
LST ;Display DATE LAST CONTACT  (160,16) and primary list
"RTN","ONCOCOC",64,0)
 G EX:'$D(^ONCO(165.5,"C",D0))
"RTN","ONCOCOC",65,0)
 D DLC^ONCOCRF,DATEOT^ONCOES
"RTN","ONCOCOC",66,0)
 W !!?25,"Last Contact: ",X
"RTN","ONCOCOC",67,0)
 D SDD^ONCOCOM
"RTN","ONCOCOC",68,0)
 W ! G EX
"RTN","ONCOCOC",69,0)
 ;
"RTN","ONCOCOC",70,0)
EX ;Exit
"RTN","ONCOCOC",71,0)
 S X=""
"RTN","ONCOCOC",72,0)
 K DZ,GL0,GLO,IC,LRDFN,LRSS,MO,MODZ,O2,RAD,SN,SR,TO,VPR,XDT,XD0,XDD,XMO
"RTN","ONCOCOC",73,0)
 K XM1,XNM,XPI,XSN
"RTN","ONCOCOC",74,0)
 Q
"RTN","ONCODIS")
0^1^B774180^B774066
"RTN","ONCODIS",1,0)
ONCODIS ;Hines OIFO/GWB - OncoTrax Banner ;09/13/11
"RTN","ONCODIS",2,0)
 ;;2.2;ONCOLOGY;**1,4,7**;Jul 31, 2013;Build 5
"RTN","ONCODIS",3,0)
 ;
"RTN","ONCODIS",4,0)
MAIN ;OncoTrax Banner
"RTN","ONCODIS",5,0)
 S RC=$$CHKVER^ONCSAPIV()
"RTN","ONCODIS",6,0)
 D LOGO
"RTN","ONCODIS",7,0)
 K I,RC
"RTN","ONCODIS",8,0)
 Q
"RTN","ONCODIS",9,0)
 ;
"RTN","ONCODIS",10,0)
LOGO ;Display banner
"RTN","ONCODIS",11,0)
 W @IOF W !!!!!! F I=1:1:9 W !,?22,$P($T(DISP+I),";",3)
"RTN","ONCODIS",12,0)
 W !!,?22,"Department of Veterans Affairs"
"RTN","ONCODIS",13,0)
 W !?22,"OncoTraX V2.2 P7" Q
"RTN","ONCODIS",14,0)
DISP ;
"RTN","ONCODIS",15,0)
 ;;VVVV            VVAA
"RTN","ONCODIS",16,0)
 ;; VVVV          VVAAAA
"RTN","ONCODIS",17,0)
 ;;  VVVV        VVAAAAAA
"RTN","ONCODIS",18,0)
 ;;   VVVV      VVAA  AAAA
"RTN","ONCODIS",19,0)
 ;;    VVVV    VVAA    AAAA
"RTN","ONCODIS",20,0)
 ;;     VVVV  VVAA      AAAA
"RTN","ONCODIS",21,0)
 ;;      VVVVVVAA        AAAA
"RTN","ONCODIS",22,0)
 ;;       VVVVAA   AAAAAAAAAAA
"RTN","ONCODIS",23,0)
 ;;        VVAA     AAAAAAAAAAA
"RTN","ONCOPRT1")
0^5^B85682347^B57470448
"RTN","ONCOPRT1",1,0)
ONCOPRT1 ;Hines OIFO/RVD - OncoTrax Reports ICD ;05/14/12
"RTN","ONCOPRT1",2,0)
 ;;2.2;ONCOLOGY;**1,7**;Jul 31, 2013;Build 5
"RTN","ONCOPRT1",3,0)
 ;This routine invokes Integration Agreement #3151 and #3990.
"RTN","ONCOPRT1",4,0)
 ;
"RTN","ONCOPRT1",5,0)
ICD ;check for particular ICD code.
"RTN","ONCOPRT1",6,0)
 I SORT="[ONC DISEASE INDEX CASEFINDING]" D
"RTN","ONCOPRT1",7,0)
 .S DIS(1)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"") I (CODE>139.99)&(CODE<208.93)"
"RTN","ONCOPRT1",8,0)
 .S DIS(2)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"") I (CODE>208.99)&(CODE<209.30)"
"RTN","ONCOPRT1",9,0)
 .S DIS(3)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=209.30"
"RTN","ONCOPRT1",10,0)
 .S DIS(4)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"") I (CODE>209.30)&(CODE<209.37)"
"RTN","ONCOPRT1",11,0)
 .S DIS(5)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"") I (CODE>209.69)&(CODE<209.80)"
"RTN","ONCOPRT1",12,0)
 .S DIS(6)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"") I (CODE>224.99)&(CODE<226)"
"RTN","ONCOPRT1",13,0)
 .S DIS(7)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=227.3"
"RTN","ONCOPRT1",14,0)
 .S DIS(8)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=227.4"
"RTN","ONCOPRT1",15,0)
 .S DIS(9)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=227.9"
"RTN","ONCOPRT1",16,0)
 .S DIS(10)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=228.02"
"RTN","ONCOPRT1",17,0)
 .S DIS(11)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=228.1"
"RTN","ONCOPRT1",18,0)
 .S DIS(12)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"") I (CODE>229.99)&(CODE<235)"
"RTN","ONCOPRT1",19,0)
 .S DIS(13)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""236.0"""
"RTN","ONCOPRT1",20,0)
 .S DIS(14)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"") I (CODE>236.99)&(CODE<238)"
"RTN","ONCOPRT1",21,0)
 .S DIS(15)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=238.4"
"RTN","ONCOPRT1",22,0)
 .S DIS(16)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=238.6"
"RTN","ONCOPRT1",23,0)
 .S DIS(17)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=238.7"
"RTN","ONCOPRT1",24,0)
 .S DIS(18)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=238.71"
"RTN","ONCOPRT1",25,0)
 .S DIS(19)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=238.72"
"RTN","ONCOPRT1",26,0)
 .S DIS(20)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=238.73"
"RTN","ONCOPRT1",27,0)
 .S DIS(21)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=238.74"
"RTN","ONCOPRT1",28,0)
 .S DIS(22)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=238.75"
"RTN","ONCOPRT1",29,0)
 .S DIS(23)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=238.76"
"RTN","ONCOPRT1",30,0)
 .S DIS(24)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=238.77"
"RTN","ONCOPRT1",31,0)
 .S DIS(25)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=238.79"
"RTN","ONCOPRT1",32,0)
 .S DIS(26)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=239.6"
"RTN","ONCOPRT1",33,0)
 .S DIS(27)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=239.7"
"RTN","ONCOPRT1",34,0)
 .S DIS(28)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"") I (CODE>239.80)&(CODE<239.90)"
"RTN","ONCOPRT1",35,0)
 .S DIS(29)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=273.2"
"RTN","ONCOPRT1",36,0)
 .S DIS(30)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=273.3"
"RTN","ONCOPRT1",37,0)
 .S DIS(31)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=288.3"
"RTN","ONCOPRT1",38,0)
 .S DIS(32)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=795.06"
"RTN","ONCOPRT1",39,0)
 .S DIS(33)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=795.16"
"RTN","ONCOPRT1",40,0)
 .S DIS(34)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=795.76"
"RTN","ONCOPRT1",41,0)
 .S DIS(35)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")[""V10"""
"RTN","ONCOPRT1",42,0)
 .S DIS(36)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V12.41"""
"RTN","ONCOPRT1",43,0)
 .S DIS(37)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"") I (CODE>258.01)&(CODE<258.04)"
"RTN","ONCOPRT1",44,0)
 .S DIS(38)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=338.3"
"RTN","ONCOPRT1",45,0)
 .S DIS(39)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=511.81"
"RTN","ONCOPRT1",46,0)
 .S DIS(40)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=789.51"
"RTN","ONCOPRT1",47,0)
 .S DIS(41)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""042."""
"RTN","ONCOPRT1",48,0)
 .S DIS(42)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""079.4"""
"RTN","ONCOPRT1",49,0)
 .S DIS(43)="S CODE=+$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"") I (CODE>79.49)&(CODE<79.60)"
"RTN","ONCOPRT1",50,0)
 .S DIS(44)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"") I (CODE>209.9)&(CODE<230)"
"RTN","ONCOPRT1",51,0)
 .S DIS(45)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"") I (CODE>234.9)&(CODE<236.7)"
"RTN","ONCOPRT1",52,0)
 .S DIS(46)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"") I (CODE>237.9)&(CODE<240)"
"RTN","ONCOPRT1",53,0)
 .S DIS(47)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=253.6"
"RTN","ONCOPRT1",54,0)
 .S DIS(48)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=259.2"
"RTN","ONCOPRT1",55,0)
 .S DIS(49)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""273.0"""
"RTN","ONCOPRT1",56,0)
 .S DIS(50)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=273.1"
"RTN","ONCOPRT1",57,0)
 .S DIS(51)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=273.9"
"RTN","ONCOPRT1",58,0)
 .S DIS(52)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=275.42"
"RTN","ONCOPRT1",59,0)
 .S DIS(53)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=277.88"
"RTN","ONCOPRT1",60,0)
 .S DIS(54)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""279.00"""
"RTN","ONCOPRT1",61,0)
 .S DIS(55)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"") I (CODE>279.01)&(CODE<279.07)"
"RTN","ONCOPRT1",62,0)
 .S DIS(56)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""279.10"""
"RTN","ONCOPRT1",63,0)
 .S DIS(57)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=279.12"
"RTN","ONCOPRT1",64,0)
 .S DIS(58)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=279.13"
"RTN","ONCOPRT1",65,0)
 .S DIS(59)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"") I (CODE>279.1)&(CODE<280)"
"RTN","ONCOPRT1",66,0)
 .S DIS(60)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=284.81"
"RTN","ONCOPRT1",67,0)
 .S DIS(61)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=284.89"
"RTN","ONCOPRT1",68,0)
 .S DIS(62)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=285.22"
"RTN","ONCOPRT1",69,0)
 .S DIS(63)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=285.3"
"RTN","ONCOPRT1",70,0)
 .S DIS(64)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=288.03"
"RTN","ONCOPRT1",71,0)
 .S DIS(65)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=289.83"
"RTN","ONCOPRT1",72,0)
 .S DIS(66)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=323.81"
"RTN","ONCOPRT1",73,0)
 .S DIS(67)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=379.59"
"RTN","ONCOPRT1",74,0)
 .S DIS(68)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=528.01"
"RTN","ONCOPRT1",75,0)
 .S DIS(69)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=686.01"
"RTN","ONCOPRT1",76,0)
 .S DIS(70)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=695.89"
"RTN","ONCOPRT1",77,0)
 .S DIS(71)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=701.2"
"RTN","ONCOPRT1",78,0)
 .S DIS(72)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=710.3"
"RTN","ONCOPRT1",79,0)
 .S DIS(73)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=710.4"
"RTN","ONCOPRT1",80,0)
 .S DIS(74)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=785.6"
"RTN","ONCOPRT1",81,0)
 .S DIS(75)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=790.93"
"RTN","ONCOPRT1",82,0)
 .S DIS(76)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=795.8"
"RTN","ONCOPRT1",83,0)
 .S DIS(77)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=795.81"
"RTN","ONCOPRT1",84,0)
 .S DIS(78)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=795.82"
"RTN","ONCOPRT1",85,0)
 .S DIS(79)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=795.89"
"RTN","ONCOPRT1",86,0)
 .S DIS(80)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=999.31"
"RTN","ONCOPRT1",87,0)
 .S DIS(81)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=999.81"
"RTN","ONCOPRT1",88,0)
 .S DIS(82)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""E879.2"""
"RTN","ONCOPRT1",89,0)
 .S DIS(83)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""E930.7"""
"RTN","ONCOPRT1",90,0)
 .S DIS(84)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""E933.1"""
"RTN","ONCOPRT1",91,0)
 .S DIS(85)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V07.3"""
"RTN","ONCOPRT1",92,0)
 .S DIS(86)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V07.8"""
"RTN","ONCOPRT1",93,0)
 .S DIS(87)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V12.72"""
"RTN","ONCOPRT1",94,0)
 .S DIS(88)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V15.3"""
"RTN","ONCOPRT1",95,0)
 .S DIS(89)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V42.81"""
"RTN","ONCOPRT1",96,0)
 .S DIS(90)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V42.82"""
"RTN","ONCOPRT1",97,0)
 .S DIS(91)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V51.0"""
"RTN","ONCOPRT1",98,0)
 .S DIS(92)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V52.4"""
"RTN","ONCOPRT1",99,0)
 .S DIS(93)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V54.2"""
"RTN","ONCOPRT1",100,0)
 .S DIS(94)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V58.0"""
"RTN","ONCOPRT1",101,0)
 .S DIS(95)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V58.1"""
"RTN","ONCOPRT1",102,0)
 .S DIS(96)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V58.11"""
"RTN","ONCOPRT1",103,0)
 .S DIS(97)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V58.12"""
"RTN","ONCOPRT1",104,0)
 .S DIS(98)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V58.42"""
"RTN","ONCOPRT1",105,0)
 .S DIS(99)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V66.1"""
"RTN","ONCOPRT1",106,0)
 .S DIS(100)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V66.2"""
"RTN","ONCOPRT1",107,0)
 .S DIS(101)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V67.1"""
"RTN","ONCOPRT1",108,0)
 .S DIS(102)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V67.2"""
"RTN","ONCOPRT1",109,0)
 .S DIS(103)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")[""V76"""
"RTN","ONCOPRT1",110,0)
 .S DIS(104)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")[""V78"""
"RTN","ONCOPRT1",111,0)
 .S DIS(105)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V82.71"""
"RTN","ONCOPRT1",112,0)
 .S DIS(106)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V82.79"""
"RTN","ONCOPRT1",113,0)
 .S DIS(107)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V82.89"""
"RTN","ONCOPRT1",114,0)
 .S DIS(108)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V82.9"""
"RTN","ONCOPRT1",115,0)
 .S DIS(109)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V84.01"""
"RTN","ONCOPRT1",116,0)
 .S DIS(110)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V84.02"""
"RTN","ONCOPRT1",117,0)
 .S DIS(111)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V84.03"""
"RTN","ONCOPRT1",118,0)
 .S DIS(112)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V84.04"""
"RTN","ONCOPRT1",119,0)
 .S DIS(113)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V84.09"""
"RTN","ONCOPRT1",120,0)
 .S DIS(114)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V84.81"""
"RTN","ONCOPRT1",121,0)
 .S DIS(115)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V86.0"""
"RTN","ONCOPRT1",122,0)
 .S DIS(116)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V86.1"""
"RTN","ONCOPRT1",123,0)
 .S DIS(117)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=""V87.41"""
"RTN","ONCOPRT1",124,0)
 .S DIS(118)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=259.8"
"RTN","ONCOPRT1",125,0)
 .S DIS(119)="I $$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01,""I"")=624.01"
"RTN","ONCOPRT1",126,0)
 .;ICD10 Search Logic
"RTN","ONCOPRT1",127,0)
 .S DIS(120)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ($E(CODE)=""C"")"
"RTN","ONCOPRT1",128,0)
 .S DIS(121)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ((CODE=""D18.02"")!(CODE=""D18.1"")!(CODE=""D35.2"")!(CODE=""D35.4"")!(CODE=""D45"")!(CODE=""D47.2"")!(CODE=""D64.81""))"
"RTN","ONCOPRT1",129,0)
 .S DIS(122)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ((CODE=""D47.01"")!(CODE=""D47.3"")!(CODE=""D47.4"")!CODE=""D47.7"")!(CODE=""47.9"")!(CODE=""D49.6"")!(CODE=""D49.7"")!(CODE=""D49.7"")"
"RTN","ONCOPRT1",130,0)
 .S DIS(123)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ((CODE=""D70.1"")!(CODE=""D72.1"")!(CODE=""E34.0"")!(CODE=""E88.3"")!(CODE=""K22.711"")!(CODE=""K92.81"")!(CODE=""R18.0""))"
"RTN","ONCOPRT1",131,0)
 .S DIS(124)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ((CODE=""R53.0"")!(CODE=""T66"")!(CODE=""Y63.2"")!(CODE=""Y84.2"")!(CODE=""Z08"")!(CODE=""Z17.0"")!(CODE=""Z17.1""))"
"RTN","ONCOPRT1",132,0)
 .S DIS(125)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ((CODE=""Z42.1"")!(CODE=""Z48.290"")!(CODE=""Z51.0"")!(CODE=""Z51.5"")!(CODE=""Z51.89"")!(CODE=""Z86.03"")!(CODE=""Z92.21""))"
"RTN","ONCOPRT1",133,0)
 .S DIS(126)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ((CODE=""Z92.23"")!(CODE=""Z92.25"")!(CODE=""Z92.3"")!(CODE=""Z94.81"")!(CODE=""Z94.84""))"
"RTN","ONCOPRT1",134,0)
 .S DIS(127)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ($E(CODE)=""D""),(($E(CODE,2,7)>00)&($E(CODE,2,7)<09.9999))"
"RTN","ONCOPRT1",135,0)
 .S DIS(128)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ($E(CODE)=""D""),(($E(CODE,2,7)>42)&($E(CODE,2,7)<43.9999))"
"RTN","ONCOPRT1",136,0)
 .S DIS(129)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ($E(CODE)=""D""),(($E(CODE,2,7)>44.29999)&($E(CODE,2,7)<44.5555))"
"RTN","ONCOPRT1",137,0)
 .S DIS(130)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ($E(CODE)=""D""),(($E(CODE,2,7)>46)&($E(CODE,2,7)<46.9999))"
"RTN","ONCOPRT1",138,0)
 .S DIS(131)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ($E(CODE,1,5)=""D47.Z""),(($E(CODE,6,7)>0)&($E(CODE,6,7)<9999))"
"RTN","ONCOPRT1",139,0)
 .S DIS(132)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ($E(CODE)=""D""),(($E(CODE,2,7)>75.9999)&($E(CODE,2,7)<76.9999))"
"RTN","ONCOPRT1",140,0)
 .S DIS(133)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ($E(CODE)=""T""),(($E(CODE,2,7)>45.1)&($E(CODE,2,7)<45.1999))"
"RTN","ONCOPRT1",141,0)
 .S DIS(134)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ($E(CODE)=""Z""),(($E(CODE,2,7)>11.9999)&($E(CODE,2,7)<12.9999))"
"RTN","ONCOPRT1",142,0)
 .S DIS(135)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ($E(CODE)=""Z""),(($E(CODE,2,7)>40.0)&($E(CODE,2,7)<40.0999))"
"RTN","ONCOPRT1",143,0)
 .S DIS(136)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ($E(CODE)=""Z""),(($E(CODE,2,7)>51.1)&($E(CODE,2,7)<51.1999))"
"RTN","ONCOPRT1",144,0)
 .S DIS(137)="S CODE=$$GET1^DIQ(80,$P($G(^AUPNVPOV(D0,0)),U,1),.01) I ($E(CODE)=""Z""),(($E(CODE,2,7)>85)&($E(CODE,2,7)<86.0199))"
"RTN","ONCOPRT1",145,0)
 Q
"RTN","ONCPL")
0^4^B3172227^B3168179
"RTN","ONCPL",1,0)
ONCPL ;Hines OIFO/GWB - ONCOLOGY PROBLEM LIST ;07/14/04
"RTN","ONCPL",2,0)
 ;;2.2;ONCOLOGY;**1,7**;Jul 31, 2013;Build 5
"RTN","ONCPL",3,0)
 ;
"RTN","ONCPL",4,0)
 K ONCPL,PL
"RTN","ONCPL",5,0)
 N DIR,DPTIEN,ICD,ONS,ONSDT,SAVEY,SUB,X
"RTN","ONCPL",6,0)
 S SAVEY=Y
"RTN","ONCPL",7,0)
 W !
"RTN","ONCPL",8,0)
 W !," Would you like to see a PROBLEM LIST for this patient to assist"
"RTN","ONCPL",9,0)
 W !," you in entering the COMORBIDITY/COMPLICATION #1-10"
"RTN","ONCPL",10,0)
 W !," Secondary Diagnosis #1-10 prompts"
"RTN","ONCPL",11,0)
 W !
"RTN","ONCPL",12,0)
 S DIR(0)="Y",DIR("B")="Yes" D ^DIR
"RTN","ONCPL",13,0)
 I (Y=0)!(Y="") W ! S Y=SAVEY Q
"RTN","ONCPL",14,0)
 I Y[U S Y=SAVEY Q
"RTN","ONCPL",15,0)
 I $P(^ONCO(160,D0,0),U,1)["LRT" W !!," No PROBLEM LIST for this patient." W ! S Y=SAVEY Q
"RTN","ONCPL",16,0)
 S DPTIEN=$P(^ONCO(160,D0,0),";",1)
"RTN","ONCPL",17,0)
 ;Supported by IA #928
"RTN","ONCPL",18,0)
 D ACTIVE^GMPLUTL(DPTIEN,.ONCPL)
"RTN","ONCPL",19,0)
 I ONCPL(0)=0 W !!," No PROBLEM LIST for this patient." W ! S Y=SAVEY Q
"RTN","ONCPL",20,0)
 S SUB=0 F  S SUB=$O(ONCPL(SUB)) Q:SUB'>0  D
"RTN","ONCPL",21,0)
 .S ONS=$P(ONCPL(SUB,3),U,1) S:ONS="" ONS="UNKNOWN"_SUB
"RTN","ONCPL",22,0)
 .S PL(ONS)=$P(ONCPL(SUB,2),U,2)_U_$P(ONCPL(SUB,1),U,2)
"RTN","ONCPL",23,0)
 I '$D(PL) W !!," No PROBLEM LIST for this patient." W ! S Y=SAVEY Q
"RTN","ONCPL",24,0)
 W !
"RTN","ONCPL",25,0)
 W !,"DATE OF ONSET","  ","ICD DIAGNOSIS"
"RTN","ONCPL",26,0)
 W !,"-------------  -------------------------------------------"
"RTN","ONCPL",27,0)
 S ONS=0 F  S ONS=$O(PL(ONS)) Q:ONS=""  D
"RTN","ONCPL",28,0)
 .I ONS["UNKNOWN" S ONSDT="UNKNOWN"
"RTN","ONCPL",29,0)
 .I ONS'["UNKNOWN" S Y=ONS D DD^%DT S ONSDT=Y
"RTN","ONCPL",30,0)
 .W !,ONSDT,?15,$P(PL(ONS),U,1),?24,$P(PL(ONS),U,2)
"RTN","ONCPL",31,0)
 W !
"RTN","ONCPL",32,0)
 S Y=SAVEY Q
"VER")
8.0^22.0
"^DD",160,160,19,0)
CAUSE OF DEATH^P80'O^ICD9(^1;3^Q
"^DD",160,160,19,.1)

"^DD",160,160,19,1,0)
^.1
"^DD",160,160,19,1,1,0)
^^TRIGGER^160^19.1
"^DD",160,160,19,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^ONCO(160,D0,1)):^(1),1:"") S X=$P(Y(1),U,14),X=X S DIU=X K Y S X="" S DIH=$G(^ONCO(160,DIV(0),1)),DIV=X S $P(^(1),U,14)=DIV,DIH=160,DIG=19.1 D ^DICR
"^DD",160,160,19,1,1,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^ONCO(160,D0,1)):^(1),1:"") S X=$P(Y(1),U,14),X=X S DIU=X K Y S X="" S DIH=$G(^ONCO(160,DIV(0),1)),DIV=X S $P(^(1),U,14)=DIV,DIH=160,DIG=19.1 D ^DICR
"^DD",160,160,19,1,1,"%D",0)
^^2^2^3151015^
"^DD",160,160,19,1,1,"%D",1,0)
When CAUSE OF DEATH field is stuffed, the STATE DEATH CERT field will be 
"^DD",160,160,19,1,1,"%D",2,0)
deleted.
"^DD",160,160,19,1,1,"CREATE VALUE")
@
"^DD",160,160,19,1,1,"DELETE VALUE")
NO EFFECT
"^DD",160,160,19,1,1,"DT")
3151015
"^DD",160,160,19,1,1,"FIELD")
STATE DEATH CERT
"^DD",160,160,19,2)
S Y(0)=Y S X=Y D SDOT^ONCFUNC
"^DD",160,160,19,2.1)
S X=Y D SDOT^ONCFUNC
"^DD",160,160,19,3)
Enter a valid ICD code.
"^DD",160,160,19,10)

"^DD",160,160,19,20,0)
^.3LA^^0
"^DD",160,160,19,21,0)
^^5^5^2991201^^^^
"^DD",160,160,19,21,1,0)

"^DD",160,160,19,21,2,0)
Record the CAUSE OF DEATH listed on the death certificate.  Central
"^DD",160,160,19,21,3,0)
registries are the primary users of this data item.  Use the underlying
"^DD",160,160,19,21,4,0)
CAUSE OF DEATH (ICD code) identified by state health department.
"^DD",160,160,19,21,5,0)

"^DD",160,160,19,23,0)
^^1^1^2991201^^^
"^DD",160,160,19,23,1,0)
This field is referenced directly by UVSALIVE^ONCOCRFA.
"^DD",160,160,19,"DT")
3151015
"^DD",160,160,25.91,0)
SECONDARY DIAGNOSIS #1^*P80'O^ICD9(^3;1^S DIC("S")="D SDIAG^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.91,2)
S Y(0)=Y S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.91,2.1)
S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.91,3)
Enter a valid ICD-10-CM code.
"^DD",160,160,25.91,12)
Record the patient's 1st pre-existing condition and/or complication using ICD-10-CM code.
"^DD",160,160,25.91,12.1)
S DIC("S")="D SDIAG^ONCFUNC"
"^DD",160,160,25.91,21,0)
^^10^10^3140326^
"^DD",160,160,25.91,21,1,0)
 
"^DD",160,160,25.91,21,2,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.91,21,3,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.91,21,4,0)
hospital stay for the treatment of this cancer using ICD-10-CM codes.
"^DD",160,160,25.91,21,5,0)
All are considered secondary diagnoses.
"^DD",160,160,25.91,21,6,0)
 
"^DD",160,160,25.91,21,7,0)
NOTE: If no comorbid conditions or complications were documented,
"^DD",160,160,25.91,21,8,0)
      leave this field blank.  When this item is extracted for
"^DD",160,160,25.91,21,9,0)
      export a blank value will be converted to "0000000" as per
"^DD",160,160,25.91,21,10,0)
      the NAACCR instructions. 
"^DD",160,160,25.91,"DT")
3151014
"^DD",160,160,25.92,0)
SECONDARY DIAGNOSIS #2^*P80'O^ICD9(^3;2^S DIC("S")="D SDIAG^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.92,2)
S Y(0)=Y S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.92,2.1)
S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.92,3)
Enter a valid ICD-10-CM code.
"^DD",160,160,25.92,12)
Record the patient's 2nd pre-existing condition and/or complication using ICD-10-CM code.
"^DD",160,160,25.92,12.1)
S DIC("S")="D SDIAG^ONCFUNC"
"^DD",160,160,25.92,21,0)
^^7^7^3140326^
"^DD",160,160,25.92,21,1,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.92,21,2,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.92,21,3,0)
hospital stay for the treatment of this cancer using ICD-10-CM codes.
"^DD",160,160,25.92,21,4,0)
All are considered secondary diagnoses.
"^DD",160,160,25.92,21,5,0)
 
"^DD",160,160,25.92,21,6,0)
NOTE: If no comorbid conditions or complications were documented,
"^DD",160,160,25.92,21,7,0)
      leave this field blank. 
"^DD",160,160,25.92,"DT")
3151014
"^DD",160,160,25.93,0)
SECONDARY DIAGNOSIS #3^*P80'O^ICD9(^3;3^S DIC("S")="D SDIAG^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.93,2)
S Y(0)=Y S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.93,2.1)
S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.93,3)
Enter a valid ICD-10-CM code.
"^DD",160,160,25.93,12)
Record the patient's 3rd pre-existing condition and/or complication using the ICD-10-CM code.
"^DD",160,160,25.93,12.1)
S DIC("S")="D SDIAG^ONCFUNC"
"^DD",160,160,25.93,21,0)
^^7^7^3140326^^
"^DD",160,160,25.93,21,1,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.93,21,2,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.93,21,3,0)
hospital stay for the treatment of this cancer using ICD-10-CM codes.
"^DD",160,160,25.93,21,4,0)
All are considered secondary diagnoses.
"^DD",160,160,25.93,21,5,0)
 
"^DD",160,160,25.93,21,6,0)
NOTE: If no comorbid conditions or complications were documented,
"^DD",160,160,25.93,21,7,0)
      leave this field blank. 
"^DD",160,160,25.93,"DT")
3151014
"^DD",160,160,25.94,0)
SECONDARY DIAGNOSIS #4^*P80'O^ICD9(^3;4^S DIC("S")="D SDIAG^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.94,2)
S Y(0)=Y S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.94,2.1)
S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.94,3)
Enter a valid ICD-10-CM code.
"^DD",160,160,25.94,12)
Record the patient's 4th pre-existing condition and/or complication using the ICD-10-CM code.
"^DD",160,160,25.94,12.1)
S DIC("S")="D SDIAG^ONCFUNC"
"^DD",160,160,25.94,21,0)
^^7^7^3140326^^
"^DD",160,160,25.94,21,1,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.94,21,2,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.94,21,3,0)
hospital stay for the treatment of this cancer using ICD-10-CM codes.
"^DD",160,160,25.94,21,4,0)
All are considered secondary diagnoses.
"^DD",160,160,25.94,21,5,0)
 
"^DD",160,160,25.94,21,6,0)
NOTE: If no comorbid conditions or complications were documented,
"^DD",160,160,25.94,21,7,0)
      leave this field blank. 
"^DD",160,160,25.94,"DT")
3151014
"^DD",160,160,25.95,0)
SECONDARY DIAGNOSIS #5^*P80'O^ICD9(^3;5^S DIC("S")="D SDIAG^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.95,2)
S Y(0)=Y S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.95,2.1)
S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.95,3)
Enter a valid ICD-10-CM code.
"^DD",160,160,25.95,12)
Record the patient's 5th pre-existing condition and/or complication using the ICD-10-CM code.
"^DD",160,160,25.95,12.1)
S DIC("S")="D SDIAG^ONCFUNC"
"^DD",160,160,25.95,21,0)
^^7^7^3140326^
"^DD",160,160,25.95,21,1,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.95,21,2,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.95,21,3,0)
hospital stay for the treatment of this cancer using ICD-10-CM codes.
"^DD",160,160,25.95,21,4,0)
All are considered secondary diagnoses.
"^DD",160,160,25.95,21,5,0)
 
"^DD",160,160,25.95,21,6,0)
NOTE: If no comorbid conditions or complications were documented,
"^DD",160,160,25.95,21,7,0)
      leave this field blank. 
"^DD",160,160,25.95,"DT")
3151014
"^DD",160,160,25.96,0)
SECONDARY DIAGNOSIS #6^*P80'O^ICD9(^3;6^S DIC("S")="D SDIAG^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.96,2)
S Y(0)=Y S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.96,2.1)
S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.96,3)
Enter a valid ICD-10-CM code.
"^DD",160,160,25.96,12)
Record the patient's pre-existing condition and/or complication using the ICD-10-CM code.
"^DD",160,160,25.96,12.1)
S DIC("S")="D SDIAG^ONCFUNC"
"^DD",160,160,25.96,21,0)
^^7^7^3140326^
"^DD",160,160,25.96,21,1,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.96,21,2,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.96,21,3,0)
hospital stay for the treatment of this cancer using ICD-10-CM codes.
"^DD",160,160,25.96,21,4,0)
All are considered secondary diagnoses.
"^DD",160,160,25.96,21,5,0)
 
"^DD",160,160,25.96,21,6,0)
NOTE: If no comorbid conditions or complications were documented,
"^DD",160,160,25.96,21,7,0)
      leave this field blank. 
"^DD",160,160,25.96,"DT")
3151014
"^DD",160,160,25.97,0)
SECONDARY DIAGNOSIS #7^*P80'O^ICD9(^3;7^S DIC("S")="D SDIAG^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.97,2)
S Y(0)=Y S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.97,2.1)
S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.97,3)
Enter a valid ICD-10-CM code.
"^DD",160,160,25.97,12)
Record the patient's pre-existing condition and/or complication using the ICD-10-CM code.
"^DD",160,160,25.97,12.1)
S DIC("S")="D SDIAG^ONCFUNC"
"^DD",160,160,25.97,21,0)
^^7^7^3140326^
"^DD",160,160,25.97,21,1,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.97,21,2,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.97,21,3,0)
hospital stay for the treatment of this cancer using ICD-10-CM codes.
"^DD",160,160,25.97,21,4,0)
All are considered secondary diagnoses.
"^DD",160,160,25.97,21,5,0)
 
"^DD",160,160,25.97,21,6,0)
NOTE: If no comorbid conditions or complications were documented,
"^DD",160,160,25.97,21,7,0)
      leave this field blank. 
"^DD",160,160,25.97,"DT")
3151014
"^DD",160,160,25.98,0)
SECONDARY DIAGNOSIS #8^*P80'O^ICD9(^3;8^S DIC("S")="D SDIAG^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.98,2)
S Y(0)=Y S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.98,2.1)
S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.98,3)
Enter a valid ICD-10-CM code.
"^DD",160,160,25.98,12)
Record the patient's pre-existing condition and/or complication using the ICD-10-CM code.
"^DD",160,160,25.98,12.1)
S DIC("S")="D SDIAG^ONCFUNC"
"^DD",160,160,25.98,21,0)
^^7^7^3140326^
"^DD",160,160,25.98,21,1,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.98,21,2,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.98,21,3,0)
hospital stay for the treatment of this cancer using ICD-10-CM codes.
"^DD",160,160,25.98,21,4,0)
All are considered secondary diagnoses.
"^DD",160,160,25.98,21,5,0)
 
"^DD",160,160,25.98,21,6,0)
NOTE: If no comorbid conditions or complications were documented,
"^DD",160,160,25.98,21,7,0)
      leave this field blank. 
"^DD",160,160,25.98,"DT")
3151014
"^DD",160,160,25.99,0)
SECONDARY DIAGNOSIS #9^*P80'O^ICD9(^3;9^S DIC("S")="D SDIAG^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.99,2)
S Y(0)=Y S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.99,2.1)
S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.99,3)
Enter a valid ICD-10-CM code.
"^DD",160,160,25.99,12)
Record the patient's pre-existing condition and/or complication using the ICD-10-CM code.
"^DD",160,160,25.99,12.1)
S DIC("S")="D SDIAG^ONCFUNC"
"^DD",160,160,25.99,21,0)
^^7^7^3140326^
"^DD",160,160,25.99,21,1,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.99,21,2,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.99,21,3,0)
hospital stay for the treatment of this cancer using ICD-10-CM codes.
"^DD",160,160,25.99,21,4,0)
All are considered secondary diagnoses.
"^DD",160,160,25.99,21,5,0)
 
"^DD",160,160,25.99,21,6,0)
NOTE: If no comorbid conditions or complications were documented,
"^DD",160,160,25.99,21,7,0)
      leave this field blank. 
"^DD",160,160,25.99,"DT")
3151014
"^DD",160,160,25.9901,0)
SECONDARY DIAGNOSIS #10^*P80'O^ICD9(^3;10^S DIC("S")="D SDIAG^ONCFUNC" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",160,160,25.9901,2)
S Y(0)=Y S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.9901,2.1)
S X=Y D SDOT^ONCFUNC
"^DD",160,160,25.9901,3)
Enter a valid ICD-10-CM code.
"^DD",160,160,25.9901,12)
Record the patient's pre-existing condition and/or complication using ICD-10-CM code.
"^DD",160,160,25.9901,12.1)
S DIC("S")="D SDIAG^ONCFUNC"
"^DD",160,160,25.9901,21,0)
^^7^7^3140326^
"^DD",160,160,25.9901,21,1,0)
Records the patient's preexisting medical conditions, factors
"^DD",160,160,25.9901,21,2,0)
influencing health status, and/or complications during the patient's
"^DD",160,160,25.9901,21,3,0)
hospital stay for the treatment of this cancer using ICD-10-CM codes.
"^DD",160,160,25.9901,21,4,0)
All are considered secondary diagnoses.
"^DD",160,160,25.9901,21,5,0)
 
"^DD",160,160,25.9901,21,6,0)
NOTE: If no comorbid conditions or complications were documented,
"^DD",160,160,25.9901,21,7,0)
      leave this field blank. 
"^DD",160,160,25.9901,"DT")
3151014
"BLD",9300,6)
^3
**END**
**END**

