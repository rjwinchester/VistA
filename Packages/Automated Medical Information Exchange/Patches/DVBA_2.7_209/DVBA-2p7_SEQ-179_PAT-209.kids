Released DVBA*2.7*209 SEQ #179
Extracted from mail message
**KIDS**:DVBA*2.7*209^

**INSTALL NAME**
DVBA*2.7*209
"BLD",9656,0)
DVBA*2.7*209^AUTOMATED MED INFO EXCHANGE^0^3190320^y
"BLD",9656,1,0)
^^30^30^3190204^
"BLD",9656,1,1,0)
The Separation Health Assessment (SHA) is a comprehensive medical 
"BLD",9656,1,2,0)
examination conducted by either the Veterans Affairs (VA) or Department of
"BLD",9656,1,3,0)
Defense (DoD) for Separating Service Members (SSMs) who file pre-discharge
"BLD",9656,1,4,0)
claims under the Benefits Delivery at Discharge (BDD) Program.  The SHA is
"BLD",9656,1,5,0)
used by both the Veterans Benefits Administration (VBA) and DoD to
"BLD",9656,1,6,0)
evaluate a SSM's disability(ies) and determine benefits eligibility
"BLD",9656,1,7,0)
according to a common standard. The VA and DoD need the ability
"BLD",9656,1,8,0)
to share the SHA results as soon as it they become available (on or prior 
"BLD",9656,1,9,0)
to the Release from Active Duty [RAD] date). To avoid duplication of
"BLD",9656,1,10,0)
health assessments between the two departments, VA assessments are used by
"BLD",9656,1,11,0)
DoD.
"BLD",9656,1,12,0)
 
"BLD",9656,1,13,0)
 
"BLD",9656,1,14,0)
Patch DVBA*2.7*209 will also fix the following issues:
"BLD",9656,1,15,0)
  
"BLD",9656,1,16,0)
-2507 Request without Regional Office (RO) values
"BLD",9656,1,17,0)
-Copy & Paste crash issues
"BLD",9656,1,18,0)
-Inconsistent routing locations on 7131 requests
"BLD",9656,1,19,0)
-7131 requests automatically closing in AMIE
"BLD",9656,1,20,0)
-2507 Requests not closing out properly when an exam is cancelled
"BLD",9656,1,21,0)
-"Validate Remote Connections" validation issues
"BLD",9656,1,22,0)
-Enterprise search issues with validating the "Connect To" site
"BLD",9656,1,23,0)
-Enterprise search allowing search with all required data
"BLD",9656,1,24,0)
-A delay between mouse cursor loading symbol changing back to pointer
"BLD",9656,1,25,0)
-Capri Gui not recognizing version control
"BLD",9656,1,26,0)
-GUI logger code default status change to improve performance
"BLD",9656,1,27,0)
-C&P exams not transferring if patient is not registered at new receiving 
"BLD",9656,1,28,0)
 site
"BLD",9656,1,29,0)
-DVBA C Check  2507 Integrity Report findings listing all exams
"BLD",9656,1,30,0)
-New C&P Divisions being set to active automatically
"BLD",9656,4,0)
^9.64PA^396.15^1
"BLD",9656,4,396.15,0)
396.15
"BLD",9656,4,396.15,2,0)
^9.641^396.15^1
"BLD",9656,4,396.15,2,396.15,0)
CAPRI DIVISION EXAM LIST  (File-top level)
"BLD",9656,4,396.15,2,396.15,1,0)
^9.6411^4^1
"BLD",9656,4,396.15,2,396.15,1,4,0)
DISABLE ALL C&P EXAMS?
"BLD",9656,4,396.15,222)
y^n^p^^^^n^^n
"BLD",9656,4,396.15,224)

"BLD",9656,4,"APDD",396.15,396.15)

"BLD",9656,4,"APDD",396.15,396.15,4)

"BLD",9656,4,"B",396.15,396.15)

"BLD",9656,6.3)
17
"BLD",9656,"ABPKG")
n
"BLD",9656,"INI")
EN^DVBC209P
"BLD",9656,"INID")
^^n
"BLD",9656,"KRN",0)
^9.67PA^1.61^23
"BLD",9656,"KRN",.4,0)
.4
"BLD",9656,"KRN",.401,0)
.401
"BLD",9656,"KRN",.402,0)
.402
"BLD",9656,"KRN",.403,0)
.403
"BLD",9656,"KRN",.5,0)
.5
"BLD",9656,"KRN",.84,0)
.84
"BLD",9656,"KRN",1.6,0)
1.6
"BLD",9656,"KRN",1.61,0)
1.61
"BLD",9656,"KRN",1.62,0)
1.62
"BLD",9656,"KRN",3.6,0)
3.6
"BLD",9656,"KRN",3.8,0)
3.8
"BLD",9656,"KRN",9.2,0)
9.2
"BLD",9656,"KRN",9.8,0)
9.8
"BLD",9656,"KRN",9.8,"NM",0)
^9.68A^5^5
"BLD",9656,"KRN",9.8,"NM",1,0)
DVBCCHKR^^0^B29585944
"BLD",9656,"KRN",9.8,"NM",2,0)
DVBCXFRB^^0^B17997517
"BLD",9656,"KRN",9.8,"NM",3,0)
DVBC209P^^0^B3191615
"BLD",9656,"KRN",9.8,"NM",4,0)
DVBCXFRC^^0^B54996630
"BLD",9656,"KRN",9.8,"NM",5,0)
DVBCENQ^^0^B4653684
"BLD",9656,"KRN",9.8,"NM","B","DVBC209P",3)

"BLD",9656,"KRN",9.8,"NM","B","DVBCCHKR",1)

"BLD",9656,"KRN",9.8,"NM","B","DVBCENQ",5)

"BLD",9656,"KRN",9.8,"NM","B","DVBCXFRB",2)

"BLD",9656,"KRN",9.8,"NM","B","DVBCXFRC",4)

"BLD",9656,"KRN",19,0)
19
"BLD",9656,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",9656,"KRN",19,"NM",1,0)
DVBA CAPRI GUI^^0
"BLD",9656,"KRN",19,"NM","B","DVBA CAPRI GUI",1)

"BLD",9656,"KRN",19.1,0)
19.1
"BLD",9656,"KRN",101,0)
101
"BLD",9656,"KRN",409.61,0)
409.61
"BLD",9656,"KRN",771,0)
771
"BLD",9656,"KRN",779.2,0)
779.2
"BLD",9656,"KRN",870,0)
870
"BLD",9656,"KRN",8989.51,0)
8989.51
"BLD",9656,"KRN",8989.52,0)
8989.52
"BLD",9656,"KRN",8994,0)
8994
"BLD",9656,"KRN",8994,"NM",0)
^9.68A^1^1
"BLD",9656,"KRN",8994,"NM",1,0)
DVBA CAPRI GET EDIPI^^0
"BLD",9656,"KRN",8994,"NM","B","DVBA CAPRI GET EDIPI",1)

"BLD",9656,"KRN","B",.4,.4)

"BLD",9656,"KRN","B",.401,.401)

"BLD",9656,"KRN","B",.402,.402)

"BLD",9656,"KRN","B",.403,.403)

"BLD",9656,"KRN","B",.5,.5)

"BLD",9656,"KRN","B",.84,.84)

"BLD",9656,"KRN","B",1.6,1.6)

"BLD",9656,"KRN","B",1.61,1.61)

"BLD",9656,"KRN","B",1.62,1.62)

"BLD",9656,"KRN","B",3.6,3.6)

"BLD",9656,"KRN","B",3.8,3.8)

"BLD",9656,"KRN","B",9.2,9.2)

"BLD",9656,"KRN","B",9.8,9.8)

"BLD",9656,"KRN","B",19,19)

"BLD",9656,"KRN","B",19.1,19.1)

"BLD",9656,"KRN","B",101,101)

"BLD",9656,"KRN","B",409.61,409.61)

"BLD",9656,"KRN","B",771,771)

"BLD",9656,"KRN","B",779.2,779.2)

"BLD",9656,"KRN","B",870,870)

"BLD",9656,"KRN","B",8989.51,8989.51)

"BLD",9656,"KRN","B",8989.52,8989.52)

"BLD",9656,"KRN","B",8994,8994)

"BLD",9656,"QUES",0)
^9.62^^
"BLD",9656,"REQB",0)
^9.611^1^1
"BLD",9656,"REQB",1,0)
DVBA*2.7*193^2
"BLD",9656,"REQB","B","DVBA*2.7*193",1)

"FIA",396.15)
CAPRI DIVISION EXAM LIST
"FIA",396.15,0)
^DVB(396.15,
"FIA",396.15,0,0)
396.15P
"FIA",396.15,0,1)
y^n^p^^^^n^^n
"FIA",396.15,0,10)

"FIA",396.15,0,11)

"FIA",396.15,0,"RLRO")

"FIA",396.15,0,"VR")
2.7^DVBA
"FIA",396.15,396.15)
1
"FIA",396.15,396.15,4)

"INI")
EN^DVBC209P
"KRN",19,9510,-1)
0^1
"KRN",19,9510,0)
DVBA CAPRI GUI^Capri GUI (Broker)^^B^^^^^^^^AUTOMATED MED INFO EXCHANGE^^1
"KRN",19,9510,1,0)
^19.06^2^2^3190203^^^^
"KRN",19,9510,1,1,0)
This is the 'B' type option used by CAPRI GUI client application. It
"KRN",19,9510,1,2,0)
contains all the RPCs used by the CAPRI GUI application.
"KRN",19,9510,20)
 
"KRN",19,9510,25)
 
"KRN",19,9510,99.1)
64875,28290
"KRN",19,9510,"RPC",0)
^19.05P^175^170
"KRN",19,9510,"RPC",1,0)
DVBAB REPORT LISTS
"KRN",19,9510,"RPC",2,0)
DVBAB APPOINTMENT LIST
"KRN",19,9510,"RPC",3,0)
DVBAB CHECK CREDENTIALS
"KRN",19,9510,"RPC",4,0)
DVBAB FIND EXAMS
"KRN",19,9510,"RPC",5,0)
DVBAB PTINQ
"KRN",19,9510,"RPC",6,0)
DVBAB INCREASE EXAM COUNT
"KRN",19,9510,"RPC",7,0)
DVBAB SEND MSG
"KRN",19,9510,"RPC",8,0)
DVBAB REPORT CHECKLIST
"KRN",19,9510,"RPC",9,0)
DDR FILER
"KRN",19,9510,"RPC",10,0)
DDR LISTER
"KRN",19,9510,"RPC",11,0)
DDR VALIDATOR
"KRN",19,9510,"RPC",12,0)
DDR GETS ENTRY DATA
"KRN",19,9510,"RPC",14,0)
XWB GET VARIABLE VALUE
"KRN",19,9510,"RPC",15,0)
DVBAB HEALTH SUMMARY TEXT
"KRN",19,9510,"RPC",16,0)
TIU DOCUMENTS BY CONTEXT
"KRN",19,9510,"RPC",17,0)
TIU GET RECORD TEXT
"KRN",19,9510,"RPC",18,0)
ORQQCN LIST
"KRN",19,9510,"RPC",19,0)
ORQQCN DETAIL
"KRN",19,9510,"RPC",20,0)
DVBAB INST LIST
"KRN",19,9510,"RPC",22,0)
ORWRP REPORT TEXT
"KRN",19,9510,"RPC",23,0)
ORWORR AGET
"KRN",19,9510,"RPC",24,0)
ORWRA IMAGING EXAMS
"KRN",19,9510,"RPC",25,0)
ORWRP1 LISTNUTR
"KRN",19,9510,"RPC",26,0)
ORWMC PATIENT PROCEDURES
"KRN",19,9510,"RPC",27,0)
ORQQPL PROBLEM LIST
"KRN",19,9510,"RPC",28,0)
ORWORR GET4LST
"KRN",19,9510,"RPC",29,0)
ORWLR CUMULATIVE REPORT
"KRN",19,9510,"RPC",32,0)
DVBAB DATETIME
"KRN",19,9510,"RPC",34,0)
ORWPT ADMITLST
"KRN",19,9510,"RPC",35,0)
DVBAB SC VETERAN REPORT
"KRN",19,9510,"RPC",36,0)
ORQQVS VISITS/APPTS
"KRN",19,9510,"RPC",37,0)
ORWU DT
"KRN",19,9510,"RPC",38,0)
ORWLRR CHART
"KRN",19,9510,"RPC",39,0)
DG SENSITIVE RECORD ACCESS
"KRN",19,9510,"RPC",40,0)
DG SENSITIVE RECORD BULLETIN
"KRN",19,9510,"RPC",41,0)
DVBAB REPORT EXAM CHKLIST
"KRN",19,9510,"RPC",42,0)
DVBAB REPORT ADMINQ
"KRN",19,9510,"RPC",43,0)
DVBAB REPORT INCOMPVET
"KRN",19,9510,"RPC",44,0)
DVBAB REPORT DISCHARGE
"KRN",19,9510,"RPC",45,0)
DVBAB REPORT READMIT
"KRN",19,9510,"RPC",46,0)
DVBAB REPORT ADMISSIONS
"KRN",19,9510,"RPC",47,0)
DVBAB REPORT 7131INQ
"KRN",19,9510,"RPC",48,0)
DVBAB PENDING C&P REPORT
"KRN",19,9510,"RPC",49,0)
DVBAB REPORT CPDETAILS
"KRN",19,9510,"RPC",50,0)
DVBAB AMIS REPORT
"KRN",19,9510,"RPC",51,0)
DVBAB REPORT PENDING7131
"KRN",19,9510,"RPC",52,0)
DVBAB LABLIST
"KRN",19,9510,"RPC",53,0)
DVBAB VERSION
"KRN",19,9510,"RPC",54,0)
DDR DELETE ENTRY
"KRN",19,9510,"RPC",55,0)
ORWRP REPORT LISTS
"KRN",19,9510,"RPC",57,0)
DVBAB DIVISION
"KRN",19,9510,"RPC",58,0)
DVBAB TEAM PATIENTS
"KRN",19,9510,"RPC",59,0)
ORWCIRN FACLIST
"KRN",19,9510,"RPC",60,0)
XWB REMOTE STATUS CHECK
"KRN",19,9510,"RPC",61,0)
XWB REMOTE GETDATA
"KRN",19,9510,"RPC",63,0)
ORWPT DIEDON
"KRN",19,9510,"RPC",66,0)
XWB REMOTE RPC
"KRN",19,9510,"RPC",68,0)
DDR FIND1
"KRN",19,9510,"RPC",69,0)
DVBAB REPORTS
"KRN",19,9510,"RPC",70,0)
ORWRP2 COMPABV
"KRN",19,9510,"RPC",71,0)
DVBAB SURGERY CASE
"KRN",19,9510,"RPC",72,0)
ORWRP2 COMPDISP
"KRN",19,9510,"RPC",73,0)
ORWRP2 HS COMPONENTS
"KRN",19,9510,"RPC",74,0)
ORWRP2 HS COMPONENT SUBS
"KRN",19,9510,"RPC",75,0)
ORWRP2 HS COMP FILES
"KRN",19,9510,"RPC",76,0)
ORWRP2 SAVLKUP
"KRN",19,9510,"RPC",77,0)
ORWRP2 HS REPORT TEXT
"KRN",19,9510,"RPC",78,0)
ORWRP2 GETLKUP
"KRN",19,9510,"RPC",79,0)
ORWRP2 HS FILE LOOKUP
"KRN",19,9510,"RPC",80,0)
ORWRP2 HS SUBITEMS
"KRN",19,9510,"RPC",81,0)
DVBAB MAIL INIT
"KRN",19,9510,"RPC",82,0)
ORWLRR MICRO
"KRN",19,9510,"RPC",83,0)
TIU CREATE RECORD
"KRN",19,9510,"RPC",84,0)
DVBAB MPI ASSIGN ICN
"KRN",19,9510,"RPC",85,0)
TIU SIGN RECORD
"KRN",19,9510,"RPC",86,0)
TIU DELETE RECORD
"KRN",19,9510,"RPC",87,0)
TIU REQUIRES COSIGNATURE
"KRN",19,9510,"RPC",88,0)
DVBAB REPORT ADMISSION INQUIRY
"KRN",19,9510,"RPC",89,0)
DVBAB REPORT NEW NOTICES DC
"KRN",19,9510,"RPC",90,0)
DVBAB NOTE TITLES
"KRN",19,9510,"RPC",91,0)
DVBAB TEMPLATE DEFINITION
"KRN",19,9510,"RPC",92,0)
DDR FINDER
"KRN",19,9510,"RPC",93,0)
ORWCV VST
"KRN",19,9510,"RPC",94,0)
TIU LOAD BOILERPLATE TEXT
"KRN",19,9510,"RPC",95,0)
DVBAB GET VISIT INFO
"KRN",19,9510,"RPC",96,0)
DVBAB REPORT SPECIAL
"KRN",19,9510,"RPC",97,0)
DVBAB SAVE FORM
"KRN",19,9510,"RPC",98,0)
DVBAB EXAMS BY DATE
"KRN",19,9510,"RPC",99,0)
TIU GET SITE PARAMETERS
"KRN",19,9510,"RPC",100,0)
TIU GET ALERT INFO
"KRN",19,9510,"RPC",101,0)
ORWU VALIDSIG
"KRN",19,9510,"RPC",103,0)
ORWORB FASTUSER
"KRN",19,9510,"RPC",104,0)
DVBAB TEMPLATE LIST
"KRN",19,9510,"RPC",105,0)
DVBAB LOAD FORM
"KRN",19,9510,"RPC",106,0)
DVBAB TEMPLATE REPORT FULL
"KRN",19,9510,"RPC",107,0)
DVBAB FETCH 1U4N
"KRN",19,9510,"RPC",108,0)
DVBAB FORM DATA BACKUP DELETE
"KRN",19,9510,"RPC",109,0)
DVBAB FORM DATA BACKUP RESTORE
"KRN",19,9510,"RPC",110,0)
DDR LOCK/UNLOCK NODE
"KRN",19,9510,"RPC",111,0)
DVBAB FORM COPY
"KRN",19,9510,"RPC",112,0)
DVBAB FIND DUPS
"KRN",19,9510,"RPC",113,0)
DVBAB NEW PERSON FILE
"KRN",19,9510,"RPC",114,0)
DVBAB FORM DATA BACKUP
"KRN",19,9510,"RPC",116,0)
DVBAB SET DIVISION
"KRN",19,9510,"RPC",117,0)
DVBAB GET URL
"KRN",19,9510,"RPC",118,0)
ORPRF TRIGGER POPUP
"KRN",19,9510,"RPC",119,0)
ORPRF HASFLG
"KRN",19,9510,"RPC",120,0)
ORPRF HASCAT1
"KRN",19,9510,"RPC",121,0)
ORPRF GETFLG
"KRN",19,9510,"RPC",122,0)
ORPRF CLEAR
"KRN",19,9510,"RPC",123,0)
TIU SET DOCUMENT TEXT
"KRN",19,9510,"RPC",124,0)
DVBAB ORIGINAL PROCESSING DATE
"KRN",19,9510,"RPC",125,0)
TIU CREATE ADDENDUM RECORD
"KRN",19,9510,"RPC",126,0)
TIU UPDATE RECORD
"KRN",19,9510,"RPC",128,0)
XUS SET VISITOR
"KRN",19,9510,"RPC",129,0)
XUS GET VISITOR
"KRN",19,9510,"RPC",130,0)
DVBAB RESTRICTED LIST PATIENTS
"KRN",19,9510,"RPC",131,0)
DVBAB DOD INFO
"KRN",19,9510,"RPC",132,0)
DVBAB DOD REPORT
"KRN",19,9510,"RPC",133,0)
DVBAB DOD REPORT TYPES
"KRN",19,9510,"RPC",134,0)
DVBAB FIND DFN BY ICN
"KRN",19,9510,"RPC",135,0)
DVBAB CCOW
"KRN",19,9510,"RPC",136,0)
DVBAB ZIP2CITY
"KRN",19,9510,"RPC",137,0)
DVBA CHECK PATCH
"KRN",19,9510,"RPC",138,0)
DVBAB GET SET
"KRN",19,9510,"RPC",139,0)
DVBAB GET VVA TOKEN
"KRN",19,9510,"RPC",140,0)
VAFCTFU CONVERT ICN TO DFN
"KRN",19,9510,"RPC",141,0)
DVBAB 8861 NOTIFICATIONS
"KRN",19,9510,"RPC",142,0)
DVBA MVI GET CORRESPONDING IDS
"KRN",19,9510,"RPC",143,0)
DVBA MVI SEARCH PERSON
"KRN",19,9510,"RPC",144,0)
DVBAB SEND MSG TWO
"KRN",19,9510,"RPC",145,0)
DVBAD CONTRACTED EXAM REPORTS
"KRN",19,9510,"RPC",146,0)
DVBAD CONTRACTED EXAM CRYPTO
"KRN",19,9510,"RPC",147,0)
DVBA CAPRI GET EXAM IEN
"KRN",19,9510,"RPC",148,0)
DVBA CAPRI EXAM LINK TIU
"KRN",19,9510,"RPC",149,0)
DVBA CAPRI EXAM XML
"KRN",19,9510,"RPC",150,0)
DVBA CAPRI SEND REROUTE
"KRN",19,9510,"RPC",151,0)
DVBA CAPRI REROUTE STATUS
"KRN",19,9510,"RPC",152,0)
DVBA CAPRI REROUTE INFO
"KRN",19,9510,"RPC",153,0)
DVBA CAPRI GET REROUTE
"KRN",19,9510,"RPC",154,0)
DVBA CAPRI GET DIVISION
"KRN",19,9510,"RPC",155,0)
DVBA CAPRI GET DIV EXAM
"KRN",19,9510,"RPC",156,0)
DVBA CAPRI GETSPCLCONSID
"KRN",19,9510,"RPC",157,0)
DVBA CAPRI GET DIV COMMENT
"KRN",19,9510,"RPC",158,0)
DVBA CAPRI GET REROUTE CODE
"KRN",19,9510,"RPC",159,0)
DVBA CAPRI REROUTE VAMC
"KRN",19,9510,"RPC",160,0)
DVBA CAPRI LISTCLAIMTYPE
"KRN",19,9510,"RPC",161,0)
DVBA CAPRI SETCLAIMTYPE
"KRN",19,9510,"RPC",162,0)
DVBA CAPRI GETCONTREMARKS
"KRN",19,9510,"RPC",163,0)
DVBA CAPRI SETCONTREMARKS
"KRN",19,9510,"RPC",164,0)
XWB DIRECT RPC
"KRN",19,9510,"RPC",165,0)
DVBA CAPRI GETCLAIMTYPE
"KRN",19,9510,"RPC",166,0)
DVBA CAPRI LISTSPCLCONSID
"KRN",19,9510,"RPC",167,0)
DVBA CAPRI SETSPCLCONSID
"KRN",19,9510,"RPC",168,0)
DVBA CAPRI GETCANCELREASON
"KRN",19,9510,"RPC",174,0)
DVBA CAPRI LISTINSUFRSN
"KRN",19,9510,"RPC",175,0)
DVBA CAPRI GET EDIPI
"KRN",19,9510,"U")
CAPRI GUI (BROKER)
"KRN",8994,3542,-1)
0^1
"KRN",8994,3542,0)
DVBA CAPRI GET EDIPI^EDIPIQ^DVBCENQ^1^R^0^^0^1
"KRN",8994,3542,1,0)
^^1^1^3190203^
"KRN",8994,3542,1,1,0)
CAPRI REMOTE PROCEDURE CALL RETURNS EDIPI TO BE SENT VIA DBQ'S TO DOD
"KRN",8994,3542,2,0)
^8994.02A^1^1
"KRN",8994,3542,2,1,0)
DFN^1^30^1^1
"KRN",8994,3542,2,"B","DFN",1)

"KRN",8994,3542,2,"PARAMSEQ",1,1)

"MBREQ")
0
"ORD",16,8994)
8994;16;1;;;;RPCE1^XPDIA1;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",223,-1)
1^1
"PKG",223,0)
AUTOMATED MED INFO EXCHANGE^DVBA^The entire AMIE package 7131/2507.
"PKG",223,22,0)
^9.49I^1^1
"PKG",223,22,1,0)
2.7^2950410^3010328
"PKG",223,22,1,"PAH",1,0)
209^3190320
"PKG",223,22,1,"PAH",1,1,0)
^^30^30^3190320
"PKG",223,22,1,"PAH",1,1,1,0)
The Separation Health Assessment (SHA) is a comprehensive medical 
"PKG",223,22,1,"PAH",1,1,2,0)
examination conducted by either the Veterans Affairs (VA) or Department of
"PKG",223,22,1,"PAH",1,1,3,0)
Defense (DoD) for Separating Service Members (SSMs) who file pre-discharge
"PKG",223,22,1,"PAH",1,1,4,0)
claims under the Benefits Delivery at Discharge (BDD) Program.  The SHA is
"PKG",223,22,1,"PAH",1,1,5,0)
used by both the Veterans Benefits Administration (VBA) and DoD to
"PKG",223,22,1,"PAH",1,1,6,0)
evaluate a SSM's disability(ies) and determine benefits eligibility
"PKG",223,22,1,"PAH",1,1,7,0)
according to a common standard. The VA and DoD need the ability
"PKG",223,22,1,"PAH",1,1,8,0)
to share the SHA results as soon as it they become available (on or prior 
"PKG",223,22,1,"PAH",1,1,9,0)
to the Release from Active Duty [RAD] date). To avoid duplication of
"PKG",223,22,1,"PAH",1,1,10,0)
health assessments between the two departments, VA assessments are used by
"PKG",223,22,1,"PAH",1,1,11,0)
DoD.
"PKG",223,22,1,"PAH",1,1,12,0)
 
"PKG",223,22,1,"PAH",1,1,13,0)
 
"PKG",223,22,1,"PAH",1,1,14,0)
Patch DVBA*2.7*209 will also fix the following issues:
"PKG",223,22,1,"PAH",1,1,15,0)
  
"PKG",223,22,1,"PAH",1,1,16,0)
-2507 Request without Regional Office (RO) values
"PKG",223,22,1,"PAH",1,1,17,0)
-Copy & Paste crash issues
"PKG",223,22,1,"PAH",1,1,18,0)
-Inconsistent routing locations on 7131 requests
"PKG",223,22,1,"PAH",1,1,19,0)
-7131 requests automatically closing in AMIE
"PKG",223,22,1,"PAH",1,1,20,0)
-2507 Requests not closing out properly when an exam is cancelled
"PKG",223,22,1,"PAH",1,1,21,0)
-"Validate Remote Connections" validation issues
"PKG",223,22,1,"PAH",1,1,22,0)
-Enterprise search issues with validating the "Connect To" site
"PKG",223,22,1,"PAH",1,1,23,0)
-Enterprise search allowing search with all required data
"PKG",223,22,1,"PAH",1,1,24,0)
-A delay between mouse cursor loading symbol changing back to pointer
"PKG",223,22,1,"PAH",1,1,25,0)
-Capri Gui not recognizing version control
"PKG",223,22,1,"PAH",1,1,26,0)
-GUI logger code default status change to improve performance
"PKG",223,22,1,"PAH",1,1,27,0)
-C&P exams not transferring if patient is not registered at new receiving 
"PKG",223,22,1,"PAH",1,1,28,0)
 site
"PKG",223,22,1,"PAH",1,1,29,0)
-DVBA C Check  2507 Integrity Report findings listing all exams
"PKG",223,22,1,"PAH",1,1,30,0)
-New C&P Divisions being set to active automatically
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
5
"RTN","DVBC209P")
0^3^B3191615^n/a
"RTN","DVBC209P",1,0)
DVBC209P ;ALB/BG;PATCH 209 POST INSTALL ; 2/25/19 6:01pm
"RTN","DVBC209P",2,0)
 ;;2.7;AMIE;**209**;Apr 10, 1995 ;Build 17
"RTN","DVBC209P",3,0)
 ;Per VHA Directive 6402 this routine should not be modified
"RTN","DVBC209P",4,0)
 ;Converts Null values for file DVB(396.15)
"RTN","DVBC209P",5,0)
 ;Updates Capri Minimum version
"RTN","DVBC209P",6,0)
 Q
"RTN","DVBC209P",7,0)
 ;
"RTN","DVBC209P",8,0)
EN ;
"RTN","DVBC209P",9,0)
 W !!,"****************************************************"
"RTN","DVBC209P",10,0)
 N DVBCX
"RTN","DVBC209P",11,0)
 S DVBCX=0
"RTN","DVBC209P",12,0)
 F  S DVBCX=$O(^DVB(396.15,DVBCX)) Q:DVBCX=""  D
"RTN","DVBC209P",13,0)
 .I $P($G(^DVB(396.15,DVBCX,3)),U)="" S $P(^DVB(396.15,DVBCX,3),U)="N"
"RTN","DVBC209P",14,0)
 W !!,"File 396.15 Updated"
"RTN","DVBC209P",15,0)
 W !!,"****************************************************"
"RTN","DVBC209P",16,0)
 ;
"RTN","DVBC209P",17,0)
 ;
"RTN","DVBC209P",18,0)
 ;
"RTN","DVBC209P",19,0)
PMAIN ;-- update DVBAB CAPRI MINIMUM VERSION Parameter.
"RTN","DVBC209P",20,0)
 ;
"RTN","DVBC209P",21,0)
 N DVBERR
"RTN","DVBC209P",22,0)
 W !!,"*************************************************"
"RTN","DVBC209P",23,0)
 W !!,"Start DVBAB CAPRI Minimum Version Parameter Update"
"RTN","DVBC209P",24,0)
 W !,"-------------------------",!
"RTN","DVBC209P",25,0)
 ;
"RTN","DVBC209P",26,0)
 S DVBERR=$$ENXPAR("PKG","DVBAB CAPRI MINIMUM VERSION","CAPRI GUI V2.7*209.1*1*A*3190528")
"RTN","DVBC209P",27,0)
 D UPDMSG("CAPRI Minimum Version",DVBERR)
"RTN","DVBC209P",28,0)
 ;
"RTN","DVBC209P",29,0)
 W !!,"-------------------------"
"RTN","DVBC209P",30,0)
 W !,"End DVBAB CAPRI Minimum Version Parameter Updates"
"RTN","DVBC209P",31,0)
 W !,"****************************************************",!!
"RTN","DVBC209P",32,0)
 Q
"RTN","DVBC209P",33,0)
ENXPAR(DVBENT,DVBPAR,DVBVAL) ;
"RTN","DVBC209P",34,0)
 ;
"RTN","DVBC209P",35,0)
 N DVBERR
"RTN","DVBC209P",36,0)
 D EN^XPAR(DVBENT,DVBPAR,1,DVBVAL,.DVBERR)
"RTN","DVBC209P",37,0)
 Q DVBERR
"RTN","DVBC209P",38,0)
 ;
"RTN","DVBC209P",39,0)
 ;
"RTN","DVBC209P",40,0)
UPDMSG(DVBPAR,DVBERR) ;
"RTN","DVBC209P",41,0)
 ;
"RTN","DVBC209P",42,0)
 I DVBERR D
"RTN","DVBC209P",43,0)
 . D MES^XPDUTL(DVBPAR_" update FAILURE.")
"RTN","DVBC209P",44,0)
 . D MES^XPDUTL("  Failure reason: "_DVBERR)
"RTN","DVBC209P",45,0)
 E  D
"RTN","DVBC209P",46,0)
 . D MES^XPDUTL(DVBPAR_" Update Successful")
"RTN","DVBC209P",47,0)
 Q
"RTN","DVBC209P",48,0)
 ;
"RTN","DVBCCHKR")
0^1^B29585944^B29140314
"RTN","DVBCCHKR",1,0)
DVBCCHKR ;ALB/GTS-557/THM-CHECK C&P REQUEST FOR CRITICAL DATA ; 3/20/19 7:56am
"RTN","DVBCCHKR",2,0)
 ;;2.7;AMIE;**17,194,193,209**;Apr 10, 1995;Build 17
"RTN","DVBCCHKR",3,0)
 ;
"RTN","DVBCCHKR",4,0)
 ;** Version Changes
"RTN","DVBCCHKR",5,0)
 ; 2.7 - GTS/C&P appt links report (Enhc 13)
"RTN","DVBCCHKR",6,0)
 ;
"RTN","DVBCCHKR",7,0)
 S DVBCMAN="" G EN
"RTN","DVBCCHKR",8,0)
 ;
"RTN","DVBCCHKR",9,0)
CHECK N OLDX
"RTN","DVBCCHKR",10,0)
 S OLDX=X,DTA=^DVB(396.3,DA,0),DTB=$S($D(^DVB(396.3,DA,1)):^(1),1:"")
"RTN","DVBCCHKR",11,0)
 ;RRA DVBA*194 priority of exam no longer populated so remove from validation list
"RTN","DVBCCHKR",12,0)
 ;AJF;Request Status conversion
"RTN","DVBCCHKR",13,0)
 ;Patch 209, reverting report screeing back to before 193
"RTN","DVBCCHKR",14,0)
 Q:($P(DTA,U,18)=6)!($P(DTA,U,18)=7)  F XI=2,3,4,18 I $P(^DVB(396.3,DA,0),U,XI)="" S X=X_XI_U
"RTN","DVBCCHKR",15,0)
 I $P(DTB,U,4)="" S X=X_99_U
"RTN","DVBCCHKR",16,0)
 I $O(^DVB(396.4,"C",DA,0))="" S X=X_98_U ;no exams selected
"RTN","DVBCCHKR",17,0)
 S REQDA=DA,NAME=$P(^DPT(DFN,0),U,1) D:STYLEIND'="4" LINKCK
"RTN","DVBCCHKR",18,0)
 I OLDX'=X DO
"RTN","DVBCCHKR",19,0)
 .S:$E(X,$L(X))="^" X=$E(X,1,($L(X)-1))
"RTN","DVBCCHKR",20,0)
 .S X=X_";"_DA_"~"
"RTN","DVBCCHKR",21,0)
 I X]"" S ^TMP($J,NAME,DFN)=X
"RTN","DVBCCHKR",22,0)
 Q
"RTN","DVBCCHKR",23,0)
 ;
"RTN","DVBCCHKR",24,0)
PRINT D HDR S NAME=""
"RTN","DVBCCHKR",25,0)
 F XI=0:0 S NAME=$O(^TMP($J,NAME)) Q:NAME=""!($D(DVBCQUIT))  DO
"RTN","DVBCCHKR",26,0)
 .S (DVBAPC,DVBADTA)=""
"RTN","DVBCCHKR",27,0)
 .F DFN=0:0 S DFN=$O(^TMP($J,NAME,DFN)) Q:DFN=""!($D(DVBCQUIT))  DO
"RTN","DVBCCHKR",28,0)
 ..I (IOST?1"C-".E),($Y>(IOSL-9)) D TERM^DVBCUTL3 S:$D(GETOUT) DVBCQUIT=""
"RTN","DVBCCHKR",29,0)
 ..I '$D(DVBCQUIT) DO
"RTN","DVBCCHKR",30,0)
 ...D:($Y>(IOSL-9)) HDR
"RTN","DVBCCHKR",31,0)
 ...D NAMELN ;**Output name
"RTN","DVBCCHKR",32,0)
 ...F DVBAPC=1:1 S DVBADTA=$P(^TMP($J,NAME,DFN),"~",DVBAPC) Q:DVBADTA=""  DO
"RTN","DVBCCHKR",33,0)
 ....W !
"RTN","DVBCCHKR",34,0)
 ....S DTA=$P(DVBADTA,";",1),REQDA=$P(DVBADTA,";",2) ;**DVBADTA=Prob pce
"RTN","DVBCCHKR",35,0)
 ....F DVBCX=1:1 S DVBAY=$P(DTA,U,DVBCX) Q:DVBAY=""!($D(DVBCQUIT))  I DVBAY]"" D PRINT1
"RTN","DVBCCHKR",36,0)
 .K DVBAPC,DVBADTA
"RTN","DVBCCHKR",37,0)
 I '$D(DVBCQUIT)&(IOST?1"C-".E) D TERM^DVBCUTL3 S:$D(GETOUT) DVBCQUIT=""
"RTN","DVBCCHKR",38,0)
 Q
"RTN","DVBCCHKR",39,0)
 ;
"RTN","DVBCCHKR",40,0)
PRINT1 I (IOST?1"C-".E),($Y>(IOSL-2)) D TERM^DVBCUTL3 S:$D(GETOUT) DVBCQUIT=""
"RTN","DVBCCHKR",41,0)
 I '$D(DVBCQUIT) DO
"RTN","DVBCCHKR",42,0)
 .I ($Y>(IOSL-2)) D HDR,NAMELN
"RTN","DVBCCHKR",43,0)
 .W ?50,$S(DVBAY=2:"Request date",DVBAY=3:"Regional office number",DVBAY=4:"Requester",DVBAY=10:"Priority of exam",DVBAY=18:"Request status",DVBAY=99:"Routing location",1:"")
"RTN","DVBCCHKR",44,0)
 .W:DVBAY=98 ?50,"** No exams selected **"
"RTN","DVBCCHKR",45,0)
 .W:DVBAY=199 ?50,"** No C&P Appt's linked **"
"RTN","DVBCCHKR",46,0)
 .W !
"RTN","DVBCCHKR",47,0)
 Q
"RTN","DVBCCHKR",48,0)
 ;
"RTN","DVBCCHKR",49,0)
EN D HOME^%ZIS S FF=IOF
"RTN","DVBCCHKR",50,0)
 W @FF,!!,"This report will check the 2507 REQUEST file for missing crucial data.",!!,"All requests will be checked and those found missing any of the following",!,"will be reported:",!!
"RTN","DVBCCHKR",51,0)
 W "1)  Request date",!,"2)  Regional office number",!,"3)  Requester",!
"RTN","DVBCCHKR",52,0)
 W "4)  Request status",!,"5)  Routing location",!,"6)  No exams selected"
"RTN","DVBCCHKR",53,0)
 D SETSTYLE
"RTN","DVBCCHKR",54,0)
 W:STYLEIND=4 !
"RTN","DVBCCHKR",55,0)
 W:STYLEIND'="4" !,"7)  Requests older than 3 days without C&P Appt links ",!
"RTN","DVBCCHKR",56,0)
 W ! K PARAMDA
"RTN","DVBCCHKR",57,0)
 ;
"RTN","DVBCCHKR",58,0)
ASK W "Do you want to continue" S %=2 D YN^DICN G:$D(DTOUT) EXIT
"RTN","DVBCCHKR",59,0)
 I $D(%Y),%Y["?" W !!,"Enter Y to print the report or N to quit.",!! H 2 G ASK
"RTN","DVBCCHKR",60,0)
 I $D(%),%'=1 G EXIT
"RTN","DVBCCHKR",61,0)
 ;
"RTN","DVBCCHKR",62,0)
DEV W !! S %ZIS="AEQ" D ^%ZIS K %ZIS G:POP EXIT I $D(IO("Q")) S ZTIO=ION,ZTDESC="2507 exam integrity report",ZTRTN="GO^DVBCCHKR" F I="FF" S ZTSAVE(I)=""
"RTN","DVBCCHKR",63,0)
 I  D ^%ZTLOAD W:$D(ZTSK) !!,"Request queued",!! G EXIT
"RTN","DVBCCHKR",64,0)
 ;
"RTN","DVBCCHKR",65,0)
GO D:'$D(STYLEIND) SETSTYLE
"RTN","DVBCCHKR",66,0)
 K ^TMP($J),LN,DVBCQUIT,GETOUT S (ITEMS,PG)=0,$P(LN,"-",80)="-",HD="C & P Exam Integrity Report",DVBCDT=$$FMTE^XLFDT(DT,"5DZ")
"RTN","DVBCCHKR",67,0)
 U IO F DFN=0:0 S X="",DFN=$O(^DVB(396.3,"B",DFN)) Q:DFN=""  F DA=0:0 S DA=$O(^DVB(396.3,"B",DFN,DA)) Q:DA=""  D CHECK
"RTN","DVBCCHKR",68,0)
 I '$D(^TMP($J)) D HDR W !!!!!?25,"Nothing found to report",!!
"RTN","DVBCCHKR",69,0)
 I $D(^TMP($J)) D PRINT
"RTN","DVBCCHKR",70,0)
 I ('$D(^TMP("DVBA",$J))&((+STYLEIND'="4")&(+$$RPTCHK=1))) DO
"RTN","DVBCCHKR",71,0)
 .D NOW^%DTC S Y=X X ^DD("DD")
"RTN","DVBCCHKR",72,0)
 .S TODAYDT=Y K Y,X
"RTN","DVBCCHKR",73,0)
 .S SITE=$$SITE^DVBCUTL4
"RTN","DVBCCHKR",74,0)
 .D RPTHD^DVBCULAP W !!!!!?25,"Nothing found to report",!!
"RTN","DVBCCHKR",75,0)
 .I (IOST?1"C-".E) D PAUSE^DVBCUTL4
"RTN","DVBCCHKR",76,0)
 .K TODAYDT,SITE
"RTN","DVBCCHKR",77,0)
 I $D(^TMP("DVBA",$J)) D:(+$$RPTCHK=1) ^DVBCULAP
"RTN","DVBCCHKR",78,0)
 ;
"RTN","DVBCCHKR",79,0)
EXIT D ^%ZISC
"RTN","DVBCCHKR",80,0)
 S FF=IOF W:'$D(ZTQUEUED) @FF,!!!
"RTN","DVBCCHKR",81,0)
 I $D(ZTQUEUED)&($D(DVBCMAN)) D KILL^%ZTLOAD
"RTN","DVBCCHKR",82,0)
 K %,%Y,DTA,DTB,DTOUT,DVBCDT,FF,HD,NAME,PG,I,ZTSAVE,POP,X,XI,Y
"RTN","DVBCCHKR",83,0)
 K ZTQUEUED,ZTDESC,ZTIO,ZTRTN,ZTSK,ITEMS,PRINT,DFN,DA,LN,DVBCMAN,DVBCQUIT,GETOUT,DVBCX,HDRPRT
"RTN","DVBCCHKR",84,0)
 K ^TMP("DVBA",$J),^TMP($J),REQDA,STYLEIND,DVBAY,DIQ,DIR,DIRUT,DUOUT
"RTN","DVBCCHKR",85,0)
 K DR,DIC
"RTN","DVBCCHKR",86,0)
 Q
"RTN","DVBCCHKR",87,0)
 ;
"RTN","DVBCCHKR",88,0)
HDR S PG=PG+1,HDRPRT="" W @IOF
"RTN","DVBCCHKR",89,0)
 W !,DVBCDT,?(80-$L(HD)\2),HD,?69,"Page: ",PG,!,?(80-$L($$SITE^DVBCUTL4)\2),$$SITE^DVBCUTL4,!!,"Veteran name",?28,"Social Sec #",?50,"Missing items",!
"RTN","DVBCCHKR",90,0)
 Q
"RTN","DVBCCHKR",91,0)
 ;
"RTN","DVBCCHKR",92,0)
LINKCK ;** Patient DFN's w/ 2507's >3 days w/out links
"RTN","DVBCCHKR",93,0)
 ;** Called - 2507 C&P INTEG RPT'=OFF
"RTN","DVBCCHKR",94,0)
 ;** $D(DVBAFND) - 2507 >3 days old w/out links
"RTN","DVBCCHKR",95,0)
 N DVBAX,DVBADAYS
"RTN","DVBCCHKR",96,0)
 S:'$D(X) X=""
"RTN","DVBCCHKR",97,0)
 S DVBAX=X ;**Save X (prob report var)
"RTN","DVBCCHKR",98,0)
 I +$$STYLE^DVBCUTL8(REQDA)=1 DO
"RTN","DVBCCHKR",99,0)
 .K X,X1,X2
"RTN","DVBCCHKR",100,0)
 .D NOW^%DTC
"RTN","DVBCCHKR",101,0)
 .S X2=($P(^DVB(396.3,REQDA,0),U,5)\1),X1=X\1
"RTN","DVBCCHKR",102,0)
 .K X D ^%DTC
"RTN","DVBCCHKR",103,0)
 .S DVBADAYS=X K X
"RTN","DVBCCHKR",104,0)
 .S X=DVBAX ;**Reset X (prob var)
"RTN","DVBCCHKR",105,0)
 .I +DVBADAYS>3 DO  ;**2507 >3 days old, check links
"RTN","DVBCCHKR",106,0)
 ..N APPTDA S APPTDA=""
"RTN","DVBCCHKR",107,0)
 ..K DVBAFND
"RTN","DVBCCHKR",108,0)
 ..I +$O(^DVB(396.95,"AR",REQDA,APPTDA))'>0 DO
"RTN","DVBCCHKR",109,0)
 ...S:$$TRANCHK^DVBCUTA4(REQDA)=0 DVBAFND="" ;**2507 w/out links
"RTN","DVBCCHKR",110,0)
 ..I $D(DVBAFND) DO  ;**Unlinked 2507 >3 days old
"RTN","DVBCCHKR",111,0)
 ...S:(+$$RPTCHK=1) ^TMP("DVBA",$J,NAME,DFN)="" ;**TMP("DVBA") - unlinked 2507's
"RTN","DVBCCHKR",112,0)
 ...S X=X_"199^"
"RTN","DVBCCHKR",113,0)
 K DVBAFND
"RTN","DVBCCHKR",114,0)
 Q
"RTN","DVBCCHKR",115,0)
 ;
"RTN","DVBCCHKR",116,0)
RPTCHK() ;**Check C&P Report Param field - 396.1
"RTN","DVBCCHKR",117,0)
 N PARAMDA,PARAMVAL S PARAMDA=0
"RTN","DVBCCHKR",118,0)
 S PARAMDA=$O(^DVB(396.1,PARAMDA))
"RTN","DVBCCHKR",119,0)
 S PARAMVAL=$P(^DVB(396.1,PARAMDA,0),U,19)
"RTN","DVBCCHKR",120,0)
 Q PARAMVAL
"RTN","DVBCCHKR",121,0)
 ;
"RTN","DVBCCHKR",122,0)
NAMELN W LN,!!,NAME,?28,$P(^DPT(DFN,0),U,9)
"RTN","DVBCCHKR",123,0)
 Q
"RTN","DVBCCHKR",124,0)
 ;
"RTN","DVBCCHKR",125,0)
SETSTYLE ;
"RTN","DVBCCHKR",126,0)
 S PARAMDA=0
"RTN","DVBCCHKR",127,0)
 S PARAMDA=$O(^DVB(396.1,PARAMDA))
"RTN","DVBCCHKR",128,0)
 S STYLEIND=$P(^DVB(396.1,PARAMDA,0),U,15)
"RTN","DVBCCHKR",129,0)
 Q
"RTN","DVBCENQ")
0^5^B4653684^B3945315
"RTN","DVBCENQ",1,0)
DVBCENQ ;ALB/GTS-557/THM-2507 INQUIRY ; 2/24/19 7:09pm
"RTN","DVBCENQ",2,0)
 ;;2.7;AMIE;**209**;Apr 10, 1995;Build 17
"RTN","DVBCENQ",3,0)
 ;
"RTN","DVBCENQ",4,0)
 G EN
"RTN","DVBCENQ",5,0)
PRINT D VARS^DVBCUTIL,^DVBCENQ1
"RTN","DVBCENQ",6,0)
 I $D(ZTQUEUED) G EXIT ;entry point for TaskMan
"RTN","DVBCENQ",7,0)
 S (NAME,SSN,CNUM,ADR1,ADR2,ADR3,CITY,STATE,ZIP,HOMPHON,BUSPHON,OTHDIS)=""
"RTN","DVBCENQ",8,0)
 Q
"RTN","DVBCENQ",9,0)
 ;
"RTN","DVBCENQ",10,0)
EN K ^TMP($J) S Y=DT X ^DD("DD") S FDT(0)=Y D HOME^%ZIS S FF=IOF
"RTN","DVBCENQ",11,0)
 W @FF,"2507 Request Inquiry",!!!
"RTN","DVBCENQ",12,0)
 S DIC="^DVB(396.3,",DIC(0)="AEQM",DIC("W")="W ""    Date of request: "" S DVBCDT=$P(^(0),U,2) W $E(DVBCDT,4,5)_""/""_$E(DVBCDT,6,7)_""/""_$E(DVBCDT,2,3)",DIC("A")="Enter VETERAN NAME: " D ^DIC G:X=""!(X=U) EXIT
"RTN","DVBCENQ",13,0)
 I +Y<0 W "  ???",*7 G EN
"RTN","DVBCENQ",14,0)
 S JI=$P(Y,U,2),(DA,DA(1),REQDA)=+Y
"RTN","DVBCENQ",15,0)
 ;
"RTN","DVBCENQ",16,0)
DEVICE W ! S %ZIS="AEQ",%ZIS("B")="HOME",%ZIS("A")="Output device: " D ^%ZIS G:POP EXIT
"RTN","DVBCENQ",17,0)
 I $D(IO("Q")) S ZTRTN="PRINT^DVBCENQ",ZTIO=ION,ZTDESC="C&P Request Inquiry" F I="FDT(0)","DA*","REQDA","DVBC*","Y","JI","DUZ","FDT(0)" S ZTSAVE(I)=""
"RTN","DVBCENQ",18,0)
 I  D ^%ZTLOAD G:'$D(ZTSK) EXIT W !!,"Request queued",!! G EXIT
"RTN","DVBCENQ",19,0)
 U IO D PRINT D ^%ZISC G EN
"RTN","DVBCENQ",20,0)
 ;
"RTN","DVBCENQ",21,0)
EXIT K ^TMP($J),TSTA1,TSTAT,XCNP
"RTN","DVBCENQ",22,0)
 D:$D(ZTQUEUED) KILL^%ZTLOAD G KILL^DVBCUTIL
"RTN","DVBCENQ",23,0)
 ;
"RTN","DVBCENQ",24,0)
EDIPIQ(Y,DFN) ;
"RTN","DVBCENQ",25,0)
 K Y,DVEDIPI S Y=""
"RTN","DVBCENQ",26,0)
 I $G(DFN)="" S Y=0 Q
"RTN","DVBCENQ",27,0)
 S DVBED="" F  S DVBED=$O(^DGCN(391.91,"B",DFN,DVBED)) D  Q:DVBED=""
"RTN","DVBCENQ",28,0)
 .Q:DVBED=""
"RTN","DVBCENQ",29,0)
 .I $P($G(^DGCN(391.91,DVBED,2)),U)'["DOD" Q
"RTN","DVBCENQ",30,0)
 .S DVEDIPI=$P(^DGCN(391.91,DVBED,2),U,2)
"RTN","DVBCENQ",31,0)
 S Y=$G(DVEDIPI) I Y="" S Y=0
"RTN","DVBCENQ",32,0)
 Q
"RTN","DVBCXFRB")
0^2^B17997517^B16864719
"RTN","DVBCXFRB",1,0)
DVBCXFRB ;ALB/GTS-557/THM-LOAD TRANSFER MAIL MESSAGE ; 1/12/19 3:48pm
"RTN","DVBCXFRB",2,0)
 ;;2.7;AMIE;**149,193,209**;Apr 10, 1995;Build 17
"RTN","DVBCXFRB",3,0)
 ;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","DVBCXFRB",4,0)
 ;
"RTN","DVBCXFRB",5,0)
EN ;file 2
"RTN","DVBCXFRB",6,0)
 N DVBSBRCH,DVBDTYPE
"RTN","DVBCXFRB",7,0)
 K ^TMP("DVBCXFR",$J),L S X=^DVB(396.3,REQDA,0),DFN=$P(X,U,1)
"RTN","DVBCXFRB",8,0)
 S X=^DPT(DFN,0),PNAM=$P(X,U,1),DOB=$P(X,U,3),SEX=$P(X,U,2),SSN=$P(X,U,9),POBC=$P(X,U,11),POBS=$P(X,U,12)
"RTN","DVBCXFRB",9,0)
 S X=$S($D(^DPT(DFN,.11)):^(.11),1:""),ADR1=$P(X,U,1),ADR2=$P(X,U,2),ADR3=$P(X,U,3),CITY=$P(X,U,4),STATE=$P(X,U,5),ZIP=$P(X,U,6),CNTY=$P(X,U,7),ZIP4=$P(X,U,12)
"RTN","DVBCXFRB",10,0)
 S CNTY=$S($D(^DIC(5,+STATE,1,+CNTY,0)):$P(^(0),U,1),1:""),STATE=$S($D(^DIC(5,+STATE,0)):$P(^(0),U,1),1:"")
"RTN","DVBCXFRB",11,0)
 S X=$S($D(^DPT(DFN,.13)):^(.13),1:"") S HOMPHON=$P(X,U,1),BUSPHON=$P(X,U,2)
"RTN","DVBCXFRB",12,0)
 S X=$S($D(^DPT(DFN,.3)):^(.3),1:""),SRVCON=$P(X,U,1),SRVPCT=$P(X,U,2)
"RTN","DVBCXFRB",13,0)
 S X=$S($D(^DPT(DFN,.31)):^(.31),1:""),CNUM=$P(X,U,3)
"RTN","DVBCXFRB",14,0)
 S CFLOC=$$STATION^DVBAUTL1(DFN)
"RTN","DVBCXFRB",15,0)
 S:CFLOC=-1 CFLOC=""
"RTN","DVBCXFRB",16,0)
 S X=$S($D(^DPT(DFN,.32)):^(.32),1:""),PDSRV=$P(X,U,3),PDSRV=$S($D(^DIC(21,+PDSRV,0)):$P(^(0),U,3),1:"")
"RTN","DVBCXFRB",17,0)
 S X=$$SVC^DVBCUTIL(DFN,"I"),SRVEDT=$P(X,U),SRVSDT=$P(X,U,2)
"RTN","DVBCXFRB",18,0)
 S X=$$SVC^DVBCUTIL(DFN,"E"),DVBSBRCH=$P(X,U,3),DVBDTYPE=$P(X,U,4)
"RTN","DVBCXFRB",19,0)
 S X=$S($D(^DPT(DFN,.36)):^(.36),1:""),ELIGCOD=$P(X,U,1),ELIGCOD=$S($D(^DIC(8,+ELIGCOD,0)):$P(^(0),U,9),1:"")
"RTN","DVBCXFRB",20,0)
 S X=$S($D(^DPT(DFN,.361)):^(.361),1:""),ELIGST=$P(X,U,1),ELIGSDT=$P(X,U,2)
"RTN","DVBCXFRB",21,0)
 S X=$S($D(^DPT(DFN,.52)):^(.52),1:""),POWSTAT=$P(X,U,5)
"RTN","DVBCXFRB",22,0)
 S X=$S($D(^DPT(DFN,"VET")):^("VET"),1:""),VETST=$P(X,U,1)
"RTN","DVBCXFRB",23,0)
 S X=$S($D(^DPT(DFN,"TYPE")):^("TYPE"),1:"") S TYPE=$S(X]"":$P(^DG(391,X,0),U,1),1:"")
"RTN","DVBCXFRB",24,0)
 S ICN=$$GETICN^MPIF001(DFN),CSPT=$P($G(^DGSL(38.1,DFN,0)),U,2)
"RTN","DVBCXFRB",25,0)
 S PREF=$P($G(^DPT(DFN,"ENR")),"^",2)
"RTN","DVBCXFRB",26,0)
 S LINE(1)="$DEM0 "_PNAM_U_DOB_U_SEX_U_SSN_U_POBC_U_POBS_U_ICN_U_PREF_U_CSPT
"RTN","DVBCXFRB",27,0)
 ;S LINE(1)="$DEM0 "_PNAM_U_DOB_U_SEX_U_SSN
"RTN","DVBCXFRB",28,0)
 S LINE(2)="$DEM1 "_ADR1_U_ADR2_U_ADR3_U_CITY_U_STATE_U_CNTY_U_ZIP_U_HOMPHON_U_BUSPHON_U_ZIP4
"RTN","DVBCXFRB",29,0)
 S LINE(3)="$ELIG "_SRVCON_U_SRVPCT_U_CFLOC_U_CNUM_U_PDSRV_U_SRVEDT_U_SRVSDT_U_ELIGCOD_U_ELIGST_U_ELIGSDT_U_POWSTAT_U_VETST_U_TYPE_U_DVBSBRCH_U_DVBDTYPE
"RTN","DVBCXFRB",30,0)
 ;
"RTN","DVBCXFRB",31,0)
 ;file 396.3
"RTN","DVBCXFRB",32,0)
EN1 S X=^DVB(396.3,REQDA,0),RO=$P(X,U,3),RONAM=$P($G(^DIC(4,+RO,99)),U,1),REQDT=$P(X,U,2),FEXM=$P(X,U,9),PRIO=$P(X,U,10),OTHDIS=$P(X,U,11),LREXMDT=$P(X,U,20)
"RTN","DVBCXFRB",33,0)
 S X=$S($D(^DVB(396.3,REQDA,1)):^(1),1:""),CFREQ=$P(X,U,2),OTHDOC=$P(X,U,3),LREXMDT=$P(X,U,7),OTHDIS1=$P(X,U,9),OTHDIS2=$P(X,U,10)
"RTN","DVBCXFRB",34,0)
 S LINE(4)="$REQ0 "_REQDA_U_RO_U_PRIO_U_CFLOC_U_LREXMDT_U_CFREQ_U_LREXMDT_U_RONAM_U_U_REQDT
"RTN","DVBCXFRB",35,0)
 S LINE(5)="$ODIS "_OTHDIS_U_OTHDIS1_U_OTHDIS2
"RTN","DVBCXFRB",36,0)
 S EXAMS="$EXAM "_EXAMS,LINE(6)=EXAMS
"RTN","DVBCXFRB",37,0)
 ;**NOTE: RONAM is now RO NUMBER
"RTN","DVBCXFRB",38,0)
LOAD S L=1,^TMP("DVBCXFR",$J,L,0)="$TRANSFER IN",L=L+1
"RTN","DVBCXFRB",39,0)
 F X=1:1 Q:'$D(LINE(X))  S ^TMP("DVBCXFR",$J,L,0)=LINE(X),L=L+1
"RTN","DVBCXFRB",40,0)
 F JI=0:0 S JI=$O(^DVB(396.3,REQDA,2,JI)) Q:JI=""  S ^TMP("DVBCXFR",$J,L,0)="$REMK "_^DVB(396.3,REQDA,2,JI,0),L=L+1
"RTN","DVBCXFRB",41,0)
 S SITE=$P(^XMB(1,1,0),U,1),SITE1=$P(^DIC(4.2,SITE,0),U,1)
"RTN","DVBCXFRB",42,0)
 S USERNM=$P(^VA(200,DUZ,0),U,1),^TMP("DVBCXFR",$J,L,0)="$USER "_USERNM_U_SITE_U_SITE1,L=L+1
"RTN","DVBCXFRB",43,0)
 S ^TMP("DVBCXFR",$J,L,0)="$END "
"RTN","DVBCXFRB",44,0)
 N XMNODE
"RTN","DVBCXFRB",45,0)
 S XMNODE=0
"RTN","DVBCXFRB",46,0)
 F X=(L+1):1:(L+XMCNT) DO
"RTN","DVBCXFRB",47,0)
 .S XMNODE=XMNODE+1
"RTN","DVBCXFRB",48,0)
 .S ^TMP("DVBCXFR",$J,X,0)=XMVAR(XMNODE)
"RTN","DVBCXFRB",49,0)
 S ^TMP("DVBCXFR",$J,X+1,0)="$END1 "
"RTN","DVBCXFRB",50,0)
 ;
"RTN","DVBCXFRB",51,0)
SEND K XMZ
"RTN","DVBCXFRB",52,0)
 ;S XMY("POSTMASTER@"_DOMNAM)=DOMNUM
"RTN","DVBCXFRB",53,0)
 S XMY(DUZ)="",XMY("S.DVBA C PROCESS MAIL MESSAGE@"_DOMNAM)=DOMNUM,XMSUB="Transfer of C&P Exams",XMTEXT="^TMP(""DVBCXFR"",$J,",XMDUZ=DUZ D ^XMD
"RTN","DVBCXFRB",54,0)
 I $D(XMZ) W !!,"Transmitted as message # "_XMZ_" from this site to "_DOMNAM,! H 3
"RTN","DVBCXFRB",55,0)
 I '$D(XMZ) W !!,*7,"Message transmission error!",!,"Request WILL NOT be transferred!",!!,"Press RETURN  " R ANS:DTIME S OUT=1 G KILL^DVBCUTIL
"RTN","DVBCXFRB",56,0)
 ;if all ok, update main, sub-file
"RTN","DVBCXFRB",57,0)
 F III=0:0 S III=$O(XEXAMS(III)) Q:III=""  S DIE="^DVB(396.4,",DA=III,DR=".04///T;62///"_DOMNAM_";60////"_DT_";61///"_USERNM D ^DIE
"RTN","DVBCXFRB",58,0)
 K DIE,DA,DR S DIE="^DVB(396.3,",DA=REQDA,DR="31///y;32///N"
"RTN","DVBCXFRB",59,0)
 D ^DIE ;set transfer items
"RTN","DVBCXFRB",60,0)
 K LINE,DOMNUM,DOMNUM1,^TMP("DVBCXFR",$J),XMDUZ,III,L,JI,JY,XMY,XMZ,XMSUB,XMTEXT,XMDUZ,DIE,DA,DR,TYPE
"RTN","DVBCXFRB",61,0)
 G KILL^DVBCUTIL
"RTN","DVBCXFRC")
0^4^B54996630^B92188379
"RTN","DVBCXFRC",1,0)
DVBCXFRC ;ALB/GTS-557/THM-PROCESS TRANSFER-IN MAIL MESSAGE ; 1/12/19 6:52pm
"RTN","DVBCXFRC",2,0)
 ;;2.7;AMIE;**1,6,18,65,149,193,209**;Apr 10, 1995;Build 17
"RTN","DVBCXFRC",3,0)
 ;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","DVBCXFRC",4,0)
 ;
"RTN","DVBCXFRC",5,0)
EN1 ;N XMB,RDAT,RSTS,CM,SP,UP K OUT,CNT
"RTN","DVBCXFRC",6,0)
 ;S (CNTA,OUT,RDAT)=0,SP="",CM=",",UP="^"
"RTN","DVBCXFRC",7,0)
 ;X XMREC I XMRG["TRANSFER OUT" G EN1^DVBCXFRS
"RTN","DVBCXFRC",8,0)
 ;F DVBCI=0:0 X XMREC Q:XMER<0!(XMRG["$END")  S XLN=XMRG,SUB=$E(XLN,2,5),XLN=$E(XLN,7,245) D @SUB
"RTN","DVBCXFRC",9,0)
 N XMB K OUT,CNT S (CNTA,OUT)=0 X XMREC I XMRG["TRANSFER OUT" G EN1^DVBCXFRS
"RTN","DVBCXFRC",10,0)
 F DVBCI=0:0 X XMREC Q:XMER<0!(XMRG["$END")  S XLN=XMRG,SUB=$E(XLN,2,5),XLN=$E(XLN,7,245) D @SUB
"RTN","DVBCXFRC",11,0)
 ;check for existence of primary division
"RTN","DVBCXFRC",12,0)
 S DVBCDIV=$$PRIM^VASITE I DVBCDIV=""!(DVBCDIV=-1) D BULL8^DVBCXFRD G EXIT
"RTN","DVBCXFRC",13,0)
 ;check for unique regional office station# using variable ronam
"RTN","DVBCXFRC",14,0)
 S RO=$$FIND1^DIC(4,,"X",RONAM,"D",,"DVBCERR") I RO=""!(RO=0) S OUT=1 D BULL11^DVBCXFRD G EXIT
"RTN","DVBCXFRC",15,0)
 ;if primary division and regional office station# ok, then proceed
"RTN","DVBCXFRC",16,0)
 K XLN,CNTA I XMRG["$END" S OUT=0 D PATEDIT G:OUT EXIT D REQEDIT
"RTN","DVBCXFRC",17,0)
 I $D(DVBCNEW) S XMB="DVBA C NEW C&P VETERAN",XMB(1)=PNAM,XMB(2)=SSN,XMB(3)=$S($D(^VA(200,+DUZ,0)):$P(^(0),U),1:"Unknown user"),Y=DT X ^DD("DD") S XMB(4)=Y D ^XMB
"RTN","DVBCXFRC",18,0)
 ;
"RTN","DVBCXFRC",19,0)
EXIT D DELSER^DVBCUTL4 ;deletes the server message
"RTN","DVBCXFRC",20,0)
 K DGMSGF,TYPE,REASONS,DVBADMNM,EXMRS,XMORPV,DVBSBRCH,DVBDTYPE
"RTN","DVBCXFRC",21,0)
 K ADR1,ADR2,ADR3,BUSPHON,CFLOC,CFREQ,CITY,CLTY,CNTY,CNUM,DFN,DOB
"RTN","DVBCXFRC",22,0)
 K DVBCDIV,DVBCI,ECF,ELIGCOD,ELIGST,ELIGSDT,EXAMS,EXM,HOMPHON,I,II,LREXMDT
"RTN","DVBCXFRC",23,0)
 K OLREQDA,OREQDA,OTHDIS,OTHDIS1,OTHDIS2,PDSRV,REMK,REASONS,RIEN,RRIF,RRF
"RTN","DVBCXFRC",24,0)
 K PIEN,PNAM,POWSTAT,PRIO,RD,RDIV,REQDA,REQDT,RR,RONAM,RO,RRDT,RRDIV,RRT,RQDT
"RTN","DVBCXFRC",25,0)
 K RRFD,RRIEN,RRR,RRST,RRXM,SEX,SITE,SITE1,SPEC,SRVCON,SRVEDT,SRVSDT
"RTN","DVBCXFRC",26,0)
 K SSN,STATE,USERNM,VETST,X,XEXAMS,XMCNT,XMVAR,ZIP,ZIP4,RRUP,SRVPCT
"RTN","DVBCXFRC",27,0)
 K SUB,TYPEPTR,USER,XMER,XMRG,XMREC,ZI,PREF,POBC,POBS,CSPT,DVP
"RTN","DVBCXFRC",28,0)
 G KILL^DVBCUTIL
"RTN","DVBCXFRC",29,0)
 ;
"RTN","DVBCXFRC",30,0)
DEM0 S PNAM=$E($P(XLN,U,1),1,28),DOB=$P(XLN,U,2),SEX=$P(XLN,U,3),SSN=$P(XLN,U,4)
"RTN","DVBCXFRC",31,0)
 ;S SSN=$P(XLN,U,4),POBC=$P(XLN,U,5),POBS=$P(XLN,U,6),ICN=$P(XLN,U,7)
"RTN","DVBCXFRC",32,0)
 ;S PREF=$P(XLN,U,8),CSPT=$P(XLN,U,9)
"RTN","DVBCXFRC",33,0)
 Q
"RTN","DVBCXFRC",34,0)
 ;
"RTN","DVBCXFRC",35,0)
USER S USER=$P(XLN,U,1),SITE=$P(XLN,U,2),SITE1=$P(XLN,U,3)
"RTN","DVBCXFRC",36,0)
 Q
"RTN","DVBCXFRC",37,0)
 ;
"RTN","DVBCXFRC",38,0)
DEM1 S ADR1=$P(XLN,U,1),ADR2=$P(XLN,U,2),ADR3=$P(XLN,U,3),CITY=$P(XLN,U,4),STATE=$P(XLN,U,5),CNTY=$P(XLN,U,6),ZIP=$P(XLN,U,7),HOMPHON=$P(XLN,U,8),BUSPHON=$P(XLN,U,9),ZIP4=$P(XLN,U,10)
"RTN","DVBCXFRC",39,0)
 I STATE?.E1A.E S STATE=$O(^DIC(5,"B",STATE,0)) DO
"RTN","DVBCXFRC",40,0)
 .I CNTY?.E1A.E S CNTY=$O(^DIC(5,+STATE,1,"B",CNTY,0)) Q
"RTN","DVBCXFRC",41,0)
 I 'STATE S STATE=""
"RTN","DVBCXFRC",42,0)
 I 'CNTY S CNTY=""
"RTN","DVBCXFRC",43,0)
 Q
"RTN","DVBCXFRC",44,0)
 ;
"RTN","DVBCXFRC",45,0)
ELIG S SRVCON=$P(XLN,U,1),SRVPCT=$P(XLN,U,2),CFLOC=$P(XLN,U,3),CNUM=$P(XLN,U,4),PDSRV=$P(XLN,U,5),SRVEDT=$P(XLN,U,6),SRVSDT=$P(XLN,U,7),ELIGCOD=$P(XLN,U,8),ELIGST=$P(XLN,U,9),ELIGSDT=$P(XLN,U,10),POWSTAT=$P(XLN,U,11),VETST=$P(XLN,U,12)
"RTN","DVBCXFRC",46,0)
 S TYPE=$P(XLN,U,13),DVBSBRCH=$P(XLN,U,14),DVBDTYPE=$P(XLN,U,15),TYPEPTR=""
"RTN","DVBCXFRC",47,0)
 S:TYPE]"" TYPEPTR=$O(^DG(391,"B",TYPE,TYPEPTR))
"RTN","DVBCXFRC",48,0)
 S ELIGCOD=$O(^DIC(8,"D",+ELIGCOD,0))
"RTN","DVBCXFRC",49,0)
 S ELIGCOD=$S(ELIGCOD="":"",$D(^DIC(8,"D",+ELIGCOD)):$O(^DIC(8,"D",+ELIGCOD,0)),1:"")
"RTN","DVBCXFRC",50,0)
 S PDSRV=$S(PDSRV="":"",$D(^DIC(21,"D",PDSRV)):$O(^DIC(21,"D",PDSRV,0)),1:"")
"RTN","DVBCXFRC",51,0)
 Q
"RTN","DVBCXFRC",52,0)
 ;
"RTN","DVBCXFRC",53,0)
 ; $REQ0 "_REQDA_U_RO_U_PRIO_U_CFLOC_U_LREXMDT_U_CFREQ_U_LREXMDT_U_RONAM_U_RDIV_U_REQDT_U_DMAS
"RTN","DVBCXFRC",54,0)
 ;
"RTN","DVBCXFRC",55,0)
REQ0 S OLREQDA=$P(XLN,U,1),RO=$P(XLN,U,2),RONAM=$P(XLN,U,8)
"RTN","DVBCXFRC",56,0)
 S PRIO=$P(XLN,U,3),CFLOC=+$P(XLN,U,4),LREXMDT=$P(XLN,U,5),CFREQ=$P(XLN,U,6)
"RTN","DVBCXFRC",57,0)
 ;S LREXMDT=$P(XLN,U,7),RQDT=$P(XLN,U,10),DMAS=$P(XLN,U,11)
"RTN","DVBCXFRC",58,0)
 S CFLOC=$O(^DIC(4,"D",CFLOC,""))
"RTN","DVBCXFRC",59,0)
 S:'$D(^DIC(4,+CFLOC,0)) CFLOC=""
"RTN","DVBCXFRC",60,0)
 Q
"RTN","DVBCXFRC",61,0)
 ;
"RTN","DVBCXFRC",62,0)
ODIS S OTHDIS=$P(XLN,U,1),OTHDIS1=$P(XLN,U,2),OTHDIS2=$P(XLN,U,3)
"RTN","DVBCXFRC",63,0)
 Q
"RTN","DVBCXFRC",64,0)
 ;
"RTN","DVBCXFRC",65,0)
EXAM S EXAMS=$P(XLN,"^^",1),REASONS=$P(XLN,"^^",2)
"RTN","DVBCXFRC",66,0)
 Q
"RTN","DVBCXFRC",67,0)
 ;
"RTN","DVBCXFRC",68,0)
REMK S:'$D(CNT) CNT=0 S CNT=CNT+1,REMK(CNT)=XLN
"RTN","DVBCXFRC",69,0)
 Q
"RTN","DVBCXFRC",70,0)
 ;
"RTN","DVBCXFRC",71,0)
 ; AJF ; 2507 Reroute fields
"RTN","DVBCXFRC",72,0)
RDAT ;S OREQDA=$P(XLN,"^",1),PIEN=$P(XLN,"^",2),RRF=$P(XLN,"^",3)
"RTN","DVBCXFRC",73,0)
 ;S RR=$P(XLN,"^",4),RD=$P(XLN,"^",5),RRT=$P(XLN,"^",6)
"RTN","DVBCXFRC",74,0)
 ;S RRDT=$P(XLN,"^",7),CLTY=$P(XLN,"^",8),ECF=$P(XLN,"^",9)
"RTN","DVBCXFRC",75,0)
 ;S RRFD=$P(XLN,"^",10),RRFIEN=$P(XLN,"^",11),RRFSTN=$P(XLN,"^",12)
"RTN","DVBCXFRC",76,0)
 ;S STN=$P(XLN,"^",13),INUM=$P(XLN,"^",14)
"RTN","DVBCXFRC",77,0)
 ;S RDAT=1
"RTN","DVBCXFRC",78,0)
 ;Q
"RTN","DVBCXFRC",79,0)
 ;
"RTN","DVBCXFRC",80,0)
SPEC ;F II=1:1  S SPEC(II)=$P(XLN,"^",II) Q:SPEC(II)=""
"RTN","DVBCXFRC",81,0)
 ;Q
"RTN","DVBCXFRC",82,0)
 ;
"RTN","DVBCXFRC",83,0)
REQEDIT ;  ** Add entry to file #396.3 (request)
"RTN","DVBCXFRC",84,0)
 K DD,DO,DA,DR,DIC,X,Y
"RTN","DVBCXFRC",85,0)
 ;I '$D(DFN) S OUT=1 D BULL1^DVBCXFRD Q 
"RTN","DVBCXFRC",86,0)
 ;
"RTN","DVBCXFRC",87,0)
 S DIC="^DVB(396.3,",DLAYGO=396.3,DIC(0)="L",X=DFN
"RTN","DVBCXFRC",88,0)
 S DIC("DR")="1///NOW;2////"_RO_";3////.5;9////"_PRIO_";28///"_SITE1_";30////"_OLREQDA_";33////"_DT
"RTN","DVBCXFRC",89,0)
 D FILE^DICN K DLAYGO
"RTN","DVBCXFRC",90,0)
 S (DA,REQDA)=+Y I DA<0 S OUT=1 D BULL1^DVBCXFRD Q
"RTN","DVBCXFRC",91,0)
 ;Give Med Center Primary Division as routing location (DVBCDIV)
"RTN","DVBCXFRC",92,0)
 S DIE="^DVB(396.3,"
"RTN","DVBCXFRC",93,0)
 S DR="10////"_OTHDIS_";10.1////"_OTHDIS1_";10.2////"_OTHDIS2_";17////NT" D ^DIE
"RTN","DVBCXFRC",94,0)
 S DR="21////"_CFREQ_";23.3////"_LREXMDT_";24////"_DVBCDIV
"RTN","DVBCXFRC",95,0)
 D ^DIE K DIC,DIE,DD,DO
"RTN","DVBCXFRC",96,0)
 S CNT=0 I '$D(^DVB(396.3,REQDA,2,0)) S ^(0)="^^0^0^"_DT_"^^^^"
"RTN","DVBCXFRC",97,0)
 F ZI=0:0 S ZI=$O(REMK(ZI)) Q:ZI=""  S X=REMK(ZI) S CNT=CNT+1,^DVB(396.3,REQDA,2,CNT,0)=X F Y=3,4 S $P(^DVB(396.3,REQDA,2,0),U,Y)=CNT
"RTN","DVBCXFRC",98,0)
 S X="",DVBADMNM=$P(SITE1,".",1)
"RTN","DVBCXFRC",99,0)
 F I=1:1 S EXM=$P(EXAMS,U,I) Q:EXM=""  D SETVARS Q:OUT
"RTN","DVBCXFRC",100,0)
 ;if adding exams failed, then delete request
"RTN","DVBCXFRC",101,0)
 I OUT S DA=REQDA,DIK="^DVB(396.3," D ^DIK K DA,DIK
"RTN","DVBCXFRC",102,0)
 Q
"RTN","DVBCXFRC",103,0)
 ;
"RTN","DVBCXFRC",104,0)
PATEDIT ;  ** Lookup and/or Add entry to file #2 (patient)
"RTN","DVBCXFRC",105,0)
 N DVBCPT,DVBCARAY,DVBCERR,DVBCIENS,DOB2,NAME1,NAME2,BYEAR,X,Y
"RTN","DVBCXFRC",106,0)
 K DVBCNEW S DVBCPT=$$FIND1^DIC(2,,"X",SSN,"SSN",,"DVBCERR")
"RTN","DVBCXFRC",107,0)
 ;if error returned, send error msg
"RTN","DVBCXFRC",108,0)
 I DVBCPT="" S OUT=1 D BULL9^DVBCXFRD Q
"RTN","DVBCXFRC",109,0)
 ;if found matching ssn, make sure the name and dob also match
"RTN","DVBCXFRC",110,0)
 I +DVBCPT>0 D  Q
"RTN","DVBCXFRC",111,0)
 .S DVBCIENS=DVBCPT_"," K DVBCERR
"RTN","DVBCXFRC",112,0)
 .D GETS^DIQ(2,DVBCIENS,".01;.03;.09","I","DVBCARAY","DVBCERR")
"RTN","DVBCXFRC",113,0)
 .;if fm returned an error msg and no data, send error msg
"RTN","DVBCXFRC",114,0)
 .I '$D(DVBCARAY(2,DVBCIENS)) S OUT=1 D BULL10^DVBCXFRD Q
"RTN","DVBCXFRC",115,0)
 .;make sure about that ssn
"RTN","DVBCXFRC",116,0)
 .I SSN'=DVBCARAY(2,DVBCIENS,.09,"I") S OUT=1,DVBCERR(1)="Possible 'SSN' index problem.",DVBCERR(2)=""
"RTN","DVBCXFRC",117,0)
 .;if name and/or dob don't match, send error msg
"RTN","DVBCXFRC",118,0)
 .I (PNAM'=DVBCARAY(2,DVBCIENS,.01,"I"))!(DOB'=DVBCARAY(2,DVBCIENS,.03,"I")) D  Q:OUT
"RTN","DVBCXFRC",119,0)
 ..S X=$P(PNAM,",",1),NAME1(1)=$P(X," ",1),X=$P(PNAM,",",2),NAME1(2)=$P(X," ",1)
"RTN","DVBCXFRC",120,0)
 ..S X=$P(DVBCARAY(2,DVBCIENS,.01,"I"),",",1),NAME2(1)=$P(X," ",1),X=$P(DVBCARAY(2,DVBCIENS,.01,"I"),",",2),NAME2(2)=$P(X," ",1)
"RTN","DVBCXFRC",121,0)
 ..I (NAME1(1)'=NAME2(1))!(NAME1(2)'=NAME2(2)) S OUT=1
"RTN","DVBCXFRC",122,0)
 ..S BYEAR(1)=$E(DOB,1,3),BYEAR(2)=$E(DVBCARAY(2,DVBCIENS,.03,"I"),1,3)
"RTN","DVBCXFRC",123,0)
 ..I BYEAR(1)'=BYEAR(2) S OUT=1
"RTN","DVBCXFRC",124,0)
 ..I OUT D
"RTN","DVBCXFRC",125,0)
 ...S DVBCERR(1)="Patient name and/or DOB at target site does not match transfer request."
"RTN","DVBCXFRC",126,0)
 ...S DOB2=DVBCARAY(2,DVBCIENS,.03,"I") S Y=DOB2 X ^DD("DD") S DOB2=Y
"RTN","DVBCXFRC",127,0)
 ...S DVBCERR(2)="Name: "_DVBCARAY(2,DVBCIENS,.01,"I")_"   DOB: "_DOB2
"RTN","DVBCXFRC",128,0)
 ...D BULL10^DVBCXFRD
"RTN","DVBCXFRC",129,0)
 .S DFN=+DVBCPT K X,Y,DIC
"RTN","DVBCXFRC",130,0)
 ;if no match, then add record
"RTN","DVBCXFRC",131,0)
 I +DVBCPT=0 D  Q
"RTN","DVBCXFRC",132,0)
 .K DA,DR,DIC,DO,DD,X,Y S DVBCNEW=1
"RTN","DVBCXFRC",133,0)
 .S DLAYGO=2,DIC="^DPT(",DIC(0)="L",X=PNAM,DIC("DR")=".02////"_SEX_";.03////"_DOB_";.09////"_SSN
"RTN","DVBCXFRC",134,0)
 .D FILE^DICN K DLAYGO S (DFN,DA)=+Y
"RTN","DVBCXFRC",135,0)
 .I DA<0 D BULL3^DVBCXFRD S OUT=1 Q
"RTN","DVBCXFRC",136,0)
 .S DGMSGF=1 ;why is this variable needed?
"RTN","DVBCXFRC",137,0)
 .D ADDEDIT
"RTN","DVBCXFRC",138,0)
 .S DIE="^DPT(",DA=DFN
"RTN","DVBCXFRC",139,0)
 .S DR(1,2,1)=".301////"_SRVCON_";.302////"_SRVPCT_";.314////"_CFLOC_";.313////"_CNUM_";.323////"_PDSRV_$S('+$$VFILE^DILFD(2.3216):";.326////"_SRVEDT_";.327////"_SRVSDT,1:"")_";.361////"_ELIGCOD
"RTN","DVBCXFRC",140,0)
 .S DR(1,2,2)=".3611////"_ELIGST_";.3612////"_ELIGSDT_";.525////"_POWSTAT_";1901////"_VETST
"RTN","DVBCXFRC",141,0)
 .S:TYPEPTR]"" DR(1,2,3)="391////"_TYPEPTR
"RTN","DVBCXFRC",142,0)
 .D ^DIE
"RTN","DVBCXFRC",143,0)
 .;MSE data now to be stored in .3216 subfile in the PATIENT File (2)
"RTN","DVBCXFRC",144,0)
 .;after Patch DG*5.3*797 has been installed. Editing of the fields
"RTN","DVBCXFRC",145,0)
 .;.326 and .327 above can be removed once DG*5.3*797 has been released.
"RTN","DVBCXFRC",146,0)
 .D:((+$$VFILE^DILFD(2.3216))&(SRVEDT]"")) CRTMSE
"RTN","DVBCXFRC",147,0)
 Q
"RTN","DVBCXFRC",148,0)
 ;
"RTN","DVBCXFRC",149,0)
SETVARS ;  ** Add entry to file #396.4 (exam) **
"RTN","DVBCXFRC",150,0)
 I REASONS'="" DO
"RTN","DVBCXFRC",151,0)
 .S EXMRS=$P(REASONS,U,I) ;**Stuff Insufficient Reason
"RTN","DVBCXFRC",152,0)
 .S XMORPV="Transferred from "_DVBADMNM ;**Stuff Original Provider
"RTN","DVBCXFRC",153,0)
 S DIC="^DVB(396.4,"
"RTN","DVBCXFRC",154,0)
 S DIC(0)="L",DLAYGO=396.4
"RTN","DVBCXFRC",155,0)
 S DIC("DR")=".02////"_REQDA_";.03////"_EXM_";.04////O;63////"_DT
"RTN","DVBCXFRC",156,0)
 S:REASONS'="" DIC("DR")=DIC("DR")_";.11///"_EXMRS_";.12///"_XMORPV
"RTN","DVBCXFRC",157,0)
 S X=$$EXAM^DVBCUTL4 I 'X S OUT=1 D BULL2^DVBCXFRD Q
"RTN","DVBCXFRC",158,0)
 K DD,DO D FILE^DICN
"RTN","DVBCXFRC",159,0)
 I +Y=-1 S OUT=1 D BULL2^DVBCXFRD
"RTN","DVBCXFRC",160,0)
 K DLAYGO,DIC,X,Y
"RTN","DVBCXFRC",161,0)
 Q
"RTN","DVBCXFRC",162,0)
 ;
"RTN","DVBCXFRC",163,0)
ADDEDIT ;  ** Add Patient address **
"RTN","DVBCXFRC",164,0)
 S DA=DFN,DIE="^DPT("
"RTN","DVBCXFRC",165,0)
 S DR=".111////"_ADR1_";.112////"_ADR2_";.113////"_ADR3_";.114////"_CITY_";.115////"_STATE
"RTN","DVBCXFRC",166,0)
 S DR=DR_$S(ZIP4]"":";.1112////"_ZIP4,1:";.116////"_ZIP)_";.117////"_CNTY_";.131////"_HOMPHON_";.132////"_BUSPHON
"RTN","DVBCXFRC",167,0)
 D ^DIE K DIE,DA
"RTN","DVBCXFRC",168,0)
 Q
"RTN","DVBCXFRC",169,0)
 ;
"RTN","DVBCXFRC",170,0)
CRTMSE ;create LAST MSE entry for patient in sub-file 2.3216
"RTN","DVBCXFRC",171,0)
 N DIC,X,Y,DA,DTOUT,DUOUT,DLAYGO
"RTN","DVBCXFRC",172,0)
 S DIC="^DPT("_DFN_",.3216,",DA(1)=DFN
"RTN","DVBCXFRC",173,0)
 S DIC(0)="FL",DLAYGO=2
"RTN","DVBCXFRC",174,0)
 S X=SRVEDT  ;.01 SERVICE ENTRY DATE
"RTN","DVBCXFRC",175,0)
 ;SERVICE SEPARATION DATE ; SERVICE BRANCH ; SERVICE DISCHARGE TYPE
"RTN","DVBCXFRC",176,0)
 S DIC("DR")=".02////"_SRVSDT_";.03///"_DVBSBRCH_";.06///"_DVBDTYPE
"RTN","DVBCXFRC",177,0)
 K DO D FILE^DICN K DLAYGO
"RTN","DVBCXFRC",178,0)
 Q
"VER")
8.0^22.2
"^DD",396.15,396.15,4,0)
DISABLE ALL C&P EXAMS?^RS^Y:YES;N:NO;^3;1^Q
"^DD",396.15,396.15,4,3)
Set to "YES" to hide the division. If "NO" then the division will show.  If the division is to be a routine location for C&P examinations set to "NO", otherwise set to "YES"
"^DD",396.15,396.15,4,21,0)
^.001^2^2^3190103^^
"^DD",396.15,396.15,4,21,1,0)
Used to determine if a division should show in the list of routing 
"^DD",396.15,396.15,4,21,2,0)
locations in the CAPRI GUI.
"^DD",396.15,396.15,4,23,0)
^^1^1^3190103^
"^DD",396.15,396.15,4,23,1,0)
Set to "YES" to hide the division.  If "NO" then the division will show.
"^DD",396.15,396.15,4,"DT")
3190103
"BLD",9656,6)
^179
**END**
**END**

