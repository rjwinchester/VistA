Released DVBA*2.7*186 SEQ #164
Extracted from mail message
**KIDS**:DVBA*2.7*186^

**INSTALL NAME**
DVBA*2.7*186
"BLD",8585,0)
DVBA*2.7*186^AUTOMATED MED INFO EXCHANGE^0^3140404^y
"BLD",8585,1,0)
^^1^1^3140115^
"BLD",8585,1,1,0)
VLER DAS BUILD - REFER TO PATCH DESCRIPTION FOR MORE INFORMATION.
"BLD",8585,4,0)
^9.64PA^396.17^2
"BLD",8585,4,396.17,0)
396.17
"BLD",8585,4,396.17,222)
y^y^f^^^^n^^n
"BLD",8585,4,396.17,224)

"BLD",8585,4,396.4,0)
396.4
"BLD",8585,4,396.4,2,0)
^9.641^396.4^1
"BLD",8585,4,396.4,2,396.4,0)
2507 EXAM  (File-top level)
"BLD",8585,4,396.4,2,396.4,1,0)
^9.6411^74^3
"BLD",8585,4,396.4,2,396.4,1,72,0)
EXAM RESULTS XML
"BLD",8585,4,396.4,2,396.4,1,73,0)
XML DAS Conformation
"BLD",8585,4,396.4,2,396.4,1,74,0)
XML Transmission Date/Time
"BLD",8585,4,396.4,222)
y^y^p^^^^n^^n
"BLD",8585,4,396.4,224)

"BLD",8585,4,"APDD",396.4,396.4)

"BLD",8585,4,"APDD",396.4,396.4,72)

"BLD",8585,4,"APDD",396.4,396.4,73)

"BLD",8585,4,"APDD",396.4,396.4,74)

"BLD",8585,4,"B",396.17,396.17)

"BLD",8585,4,"B",396.4,396.4)

"BLD",8585,6.3)
21
"BLD",8585,"ABPKG")
n
"BLD",8585,"INID")
^n
"BLD",8585,"INIT")
POST^DVBA186P
"BLD",8585,"KRN",0)
^9.67PA^779.2^20
"BLD",8585,"KRN",.4,0)
.4
"BLD",8585,"KRN",.401,0)
.401
"BLD",8585,"KRN",.402,0)
.402
"BLD",8585,"KRN",.403,0)
.403
"BLD",8585,"KRN",.5,0)
.5
"BLD",8585,"KRN",.84,0)
.84
"BLD",8585,"KRN",3.6,0)
3.6
"BLD",8585,"KRN",3.8,0)
3.8
"BLD",8585,"KRN",9.2,0)
9.2
"BLD",8585,"KRN",9.8,0)
9.8
"BLD",8585,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",8585,"KRN",9.8,"NM",1,0)
DVBAXML^^0^B4264387
"BLD",8585,"KRN",9.8,"NM",2,0)
DVBABURL^^0^B7360044
"BLD",8585,"KRN",9.8,"NM",3,0)
DVBA186P^^0^B5933861
"BLD",8585,"KRN",9.8,"NM",4,0)
DVBACER1^^0^B135356111
"BLD",8585,"KRN",9.8,"NM","B","DVBA186P",3)

"BLD",8585,"KRN",9.8,"NM","B","DVBABURL",2)

"BLD",8585,"KRN",9.8,"NM","B","DVBACER1",4)

"BLD",8585,"KRN",9.8,"NM","B","DVBAXML",1)

"BLD",8585,"KRN",19,0)
19
"BLD",8585,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",8585,"KRN",19,"NM",1,0)
DVBA CAPRI GUI^^0
"BLD",8585,"KRN",19,"NM","B","DVBA CAPRI GUI",1)

"BLD",8585,"KRN",19.1,0)
19.1
"BLD",8585,"KRN",101,0)
101
"BLD",8585,"KRN",409.61,0)
409.61
"BLD",8585,"KRN",771,0)
771
"BLD",8585,"KRN",779.2,0)
779.2
"BLD",8585,"KRN",870,0)
870
"BLD",8585,"KRN",8989.51,0)
8989.51
"BLD",8585,"KRN",8989.51,"NM",0)
^9.68A^2^2
"BLD",8585,"KRN",8989.51,"NM",1,0)
DVBAB CAPRI VLER DAS CH3 URL^^0
"BLD",8585,"KRN",8989.51,"NM",2,0)
DVBAB CAPRI VLER DAS PROD URL^^0
"BLD",8585,"KRN",8989.51,"NM","B","DVBAB CAPRI VLER DAS CH3 URL",1)

"BLD",8585,"KRN",8989.51,"NM","B","DVBAB CAPRI VLER DAS PROD URL",2)

"BLD",8585,"KRN",8989.52,0)
8989.52
"BLD",8585,"KRN",8989.52,"NM",0)
^9.68A^^
"BLD",8585,"KRN",8994,0)
8994
"BLD",8585,"KRN",8994,"NM",0)
^9.68A^3^3
"BLD",8585,"KRN",8994,"NM",1,0)
DVBA CAPRI EXAM XML^^0
"BLD",8585,"KRN",8994,"NM",2,0)
DVBA CAPRI EXAM LINK TIU^^0
"BLD",8585,"KRN",8994,"NM",3,0)
DVBA CAPRI GET EXAM IEN^^0
"BLD",8585,"KRN",8994,"NM","B","DVBA CAPRI EXAM LINK TIU",2)

"BLD",8585,"KRN",8994,"NM","B","DVBA CAPRI EXAM XML",1)

"BLD",8585,"KRN",8994,"NM","B","DVBA CAPRI GET EXAM IEN",3)

"BLD",8585,"KRN","B",.4,.4)

"BLD",8585,"KRN","B",.401,.401)

"BLD",8585,"KRN","B",.402,.402)

"BLD",8585,"KRN","B",.403,.403)

"BLD",8585,"KRN","B",.5,.5)

"BLD",8585,"KRN","B",.84,.84)

"BLD",8585,"KRN","B",3.6,3.6)

"BLD",8585,"KRN","B",3.8,3.8)

"BLD",8585,"KRN","B",9.2,9.2)

"BLD",8585,"KRN","B",9.8,9.8)

"BLD",8585,"KRN","B",19,19)

"BLD",8585,"KRN","B",19.1,19.1)

"BLD",8585,"KRN","B",101,101)

"BLD",8585,"KRN","B",409.61,409.61)

"BLD",8585,"KRN","B",771,771)

"BLD",8585,"KRN","B",779.2,779.2)

"BLD",8585,"KRN","B",870,870)

"BLD",8585,"KRN","B",8989.51,8989.51)

"BLD",8585,"KRN","B",8989.52,8989.52)

"BLD",8585,"KRN","B",8994,8994)

"BLD",8585,"QUES",0)
^9.62^^
"BLD",8585,"REQB",0)
^9.611^2^2
"BLD",8585,"REQB",1,0)
DVBA*2.7*181^2
"BLD",8585,"REQB",2,0)
DVBA*2.7*185^2
"BLD",8585,"REQB","B","DVBA*2.7*181",1)

"BLD",8585,"REQB","B","DVBA*2.7*185",2)

"FIA",396.17)
CAPRI TEMPLATES
"FIA",396.17,0)
^DVB(396.17,
"FIA",396.17,0,0)
396.17PI
"FIA",396.17,0,1)
y^y^f^^^^n^^n
"FIA",396.17,0,10)

"FIA",396.17,0,11)

"FIA",396.17,0,"RLRO")

"FIA",396.17,0,"VR")
2.7^DVBA
"FIA",396.17,396.17)
0
"FIA",396.17,396.1714)
0
"FIA",396.17,396.17144)
0
"FIA",396.17,396.1715)
0
"FIA",396.17,396.17153)
0
"FIA",396.17,396.1718)
0
"FIA",396.17,396.176)
0
"FIA",396.17,396.178)
0
"FIA",396.17,396.19)
0
"FIA",396.17,396.191)
0
"FIA",396.17,396.193)
0
"FIA",396.4)
2507 EXAM
"FIA",396.4,0)
^DVB(396.4,
"FIA",396.4,0,0)
396.4I
"FIA",396.4,0,1)
y^y^p^^^^n^^n
"FIA",396.4,0,10)

"FIA",396.4,0,11)

"FIA",396.4,0,"RLRO")

"FIA",396.4,0,"VR")
2.7^DVBA
"FIA",396.4,396.4)
1
"FIA",396.4,396.4,72)

"FIA",396.4,396.4,73)

"FIA",396.4,396.4,74)

"FIA",396.4,396.472)
0
"INIT")
POST^DVBA186P
"IX",396.17,396.17,"TIU",0)
396.17^TIU^Cross reference the TIU document for lookup purposes.^R^^F^IR^I^396.17^^^^^LS
"IX",396.17,396.17,"TIU",1)
S ^DVB(396.17,"TIU",X,DA)=""
"IX",396.17,396.17,"TIU",2)
K ^DVB(396.17,"TIU",X,DA)
"IX",396.17,396.17,"TIU",2.5)
K ^DVB(396.17,"TIU")
"IX",396.17,396.17,"TIU",11.1,0)
^.114IA^1^1
"IX",396.17,396.17,"TIU",11.1,1,0)
1^F^396.17^23^^1^F
"IX",396.17,396.17,"TIU",11.1,1,3)

"KRN",19,9510,-1)
0^1
"KRN",19,9510,0)
DVBA CAPRI GUI^Capri GUI (Broker)^^B^^^^^^^^AUTOMATED MED INFO EXCHANGE^^1
"KRN",19,9510,1,0)
^19.06^2^2^3130829^^^^
"KRN",19,9510,1,1,0)
This is the 'B' type option used by CAPRI GUI client application. It
"KRN",19,9510,1,2,0)
contains all the RPCs used by the CAPRI GUI application.
"KRN",19,9510,20)
 
"KRN",19,9510,25)
 
"KRN",19,9510,99.1)
62972,33301
"KRN",19,9510,"RPC",0)
^19.05P^149^149
"KRN",19,9510,"RPC",1,0)
DVBAB REPORT LISTS
"KRN",19,9510,"RPC",2,0)
DVBAB APPOINTMENT LIST
"KRN",19,9510,"RPC",3,0)
DVBAB CHECK CREDENTIALS
"KRN",19,9510,"RPC",4,0)
DVBAB FIND EXAMS
"KRN",19,9510,"RPC",5,0)
DVBAB PTINQ
"KRN",19,9510,"RPC",6,0)
DVBAB INCREASE EXAM COUNT
"KRN",19,9510,"RPC",7,0)
DVBAB SEND MSG
"KRN",19,9510,"RPC",8,0)
DVBAB REPORT CHECKLIST
"KRN",19,9510,"RPC",9,0)
DDR FILER
"KRN",19,9510,"RPC",10,0)
DDR LISTER
"KRN",19,9510,"RPC",11,0)
DDR VALIDATOR
"KRN",19,9510,"RPC",12,0)
DDR GETS ENTRY DATA
"KRN",19,9510,"RPC",14,0)
XWB GET VARIABLE VALUE
"KRN",19,9510,"RPC",15,0)
DVBAB HEALTH SUMMARY TEXT
"KRN",19,9510,"RPC",16,0)
TIU DOCUMENTS BY CONTEXT
"KRN",19,9510,"RPC",17,0)
TIU GET RECORD TEXT
"KRN",19,9510,"RPC",18,0)
ORQQCN LIST
"KRN",19,9510,"RPC",19,0)
ORQQCN DETAIL
"KRN",19,9510,"RPC",20,0)
DVBAB INST LIST
"KRN",19,9510,"RPC",22,0)
ORWRP REPORT TEXT
"KRN",19,9510,"RPC",23,0)
ORWORR AGET
"KRN",19,9510,"RPC",24,0)
ORWRA IMAGING EXAMS
"KRN",19,9510,"RPC",25,0)
ORWRP1 LISTNUTR
"KRN",19,9510,"RPC",26,0)
ORWMC PATIENT PROCEDURES
"KRN",19,9510,"RPC",27,0)
ORQQPL PROBLEM LIST
"KRN",19,9510,"RPC",28,0)
ORWORR GET4LST
"KRN",19,9510,"RPC",29,0)
ORWLR CUMULATIVE REPORT
"KRN",19,9510,"RPC",32,0)
DVBAB DATETIME
"KRN",19,9510,"RPC",34,0)
ORWPT ADMITLST
"KRN",19,9510,"RPC",35,0)
DVBAB SC VETERAN REPORT
"KRN",19,9510,"RPC",36,0)
ORQQVS VISITS/APPTS
"KRN",19,9510,"RPC",37,0)
ORWU DT
"KRN",19,9510,"RPC",38,0)
ORWLRR CHART
"KRN",19,9510,"RPC",39,0)
DG SENSITIVE RECORD ACCESS
"KRN",19,9510,"RPC",40,0)
DG SENSITIVE RECORD BULLETIN
"KRN",19,9510,"RPC",41,0)
DVBAB REPORT EXAM CHKLIST
"KRN",19,9510,"RPC",42,0)
DVBAB REPORT ADMINQ
"KRN",19,9510,"RPC",43,0)
DVBAB REPORT INCOMPVET
"KRN",19,9510,"RPC",44,0)
DVBAB REPORT DISCHARGE
"KRN",19,9510,"RPC",45,0)
DVBAB REPORT READMIT
"KRN",19,9510,"RPC",46,0)
DVBAB REPORT ADMISSIONS
"KRN",19,9510,"RPC",47,0)
DVBAB REPORT 7131INQ
"KRN",19,9510,"RPC",48,0)
DVBAB PENDING C&P REPORT
"KRN",19,9510,"RPC",49,0)
DVBAB REPORT CPDETAILS
"KRN",19,9510,"RPC",50,0)
DVBAB AMIS REPORT
"KRN",19,9510,"RPC",51,0)
DVBAB REPORT PENDING7131
"KRN",19,9510,"RPC",52,0)
DVBAB LABLIST
"KRN",19,9510,"RPC",53,0)
DVBAB VERSION
"KRN",19,9510,"RPC",54,0)
DDR DELETE ENTRY
"KRN",19,9510,"RPC",55,0)
ORWRP REPORT LISTS
"KRN",19,9510,"RPC",57,0)
DVBAB DIVISION
"KRN",19,9510,"RPC",58,0)
DVBAB TEAM PATIENTS
"KRN",19,9510,"RPC",59,0)
ORWCIRN FACLIST
"KRN",19,9510,"RPC",60,0)
XWB REMOTE STATUS CHECK
"KRN",19,9510,"RPC",61,0)
XWB REMOTE GETDATA
"KRN",19,9510,"RPC",63,0)
ORWPT DIEDON
"KRN",19,9510,"RPC",66,0)
XWB REMOTE RPC
"KRN",19,9510,"RPC",68,0)
DDR FIND1
"KRN",19,9510,"RPC",69,0)
DVBAB REPORTS
"KRN",19,9510,"RPC",70,0)
ORWRP2 COMPABV
"KRN",19,9510,"RPC",71,0)
DVBAB SURGERY CASE
"KRN",19,9510,"RPC",72,0)
ORWRP2 COMPDISP
"KRN",19,9510,"RPC",73,0)
ORWRP2 HS COMPONENTS
"KRN",19,9510,"RPC",74,0)
ORWRP2 HS COMPONENT SUBS
"KRN",19,9510,"RPC",75,0)
ORWRP2 HS COMP FILES
"KRN",19,9510,"RPC",76,0)
ORWRP2 SAVLKUP
"KRN",19,9510,"RPC",77,0)
ORWRP2 HS REPORT TEXT
"KRN",19,9510,"RPC",78,0)
ORWRP2 GETLKUP
"KRN",19,9510,"RPC",79,0)
ORWRP2 HS FILE LOOKUP
"KRN",19,9510,"RPC",80,0)
ORWRP2 HS SUBITEMS
"KRN",19,9510,"RPC",81,0)
DVBAB MAIL INIT
"KRN",19,9510,"RPC",82,0)
ORWLRR MICRO
"KRN",19,9510,"RPC",83,0)
TIU CREATE RECORD
"KRN",19,9510,"RPC",84,0)
DVBAB MPI ASSIGN ICN
"KRN",19,9510,"RPC",85,0)
TIU SIGN RECORD
"KRN",19,9510,"RPC",86,0)
TIU DELETE RECORD
"KRN",19,9510,"RPC",87,0)
TIU REQUIRES COSIGNATURE
"KRN",19,9510,"RPC",88,0)
DVBAB REPORT ADMISSION INQUIRY
"KRN",19,9510,"RPC",89,0)
DVBAB REPORT NEW NOTICES DC
"KRN",19,9510,"RPC",90,0)
DVBAB NOTE TITLES
"KRN",19,9510,"RPC",91,0)
DVBAB TEMPLATE DEFINITION
"KRN",19,9510,"RPC",92,0)
DDR FINDER
"KRN",19,9510,"RPC",93,0)
ORWCV VST
"KRN",19,9510,"RPC",94,0)
TIU LOAD BOILERPLATE TEXT
"KRN",19,9510,"RPC",95,0)
DVBAB GET VISIT INFO
"KRN",19,9510,"RPC",96,0)
DVBAB REPORT SPECIAL
"KRN",19,9510,"RPC",97,0)
DVBAB SAVE FORM
"KRN",19,9510,"RPC",98,0)
DVBAB EXAMS BY DATE
"KRN",19,9510,"RPC",99,0)
TIU GET SITE PARAMETERS
"KRN",19,9510,"RPC",100,0)
TIU GET ALERT INFO
"KRN",19,9510,"RPC",101,0)
ORWU VALIDSIG
"KRN",19,9510,"RPC",103,0)
ORWORB FASTUSER
"KRN",19,9510,"RPC",104,0)
DVBAB TEMPLATE LIST
"KRN",19,9510,"RPC",105,0)
DVBAB LOAD FORM
"KRN",19,9510,"RPC",106,0)
DVBAB TEMPLATE REPORT FULL
"KRN",19,9510,"RPC",107,0)
DVBAB FETCH 1U4N
"KRN",19,9510,"RPC",108,0)
DVBAB FORM DATA BACKUP DELETE
"KRN",19,9510,"RPC",109,0)
DVBAB FORM DATA BACKUP RESTORE
"KRN",19,9510,"RPC",110,0)
DDR LOCK/UNLOCK NODE
"KRN",19,9510,"RPC",111,0)
DVBAB FORM COPY
"KRN",19,9510,"RPC",112,0)
DVBAB FIND DUPS
"KRN",19,9510,"RPC",113,0)
DVBAB NEW PERSON FILE
"KRN",19,9510,"RPC",114,0)
DVBAB FORM DATA BACKUP
"KRN",19,9510,"RPC",116,0)
DVBAB SET DIVISION
"KRN",19,9510,"RPC",117,0)
DVBAB GET URL
"KRN",19,9510,"RPC",118,0)
ORPRF TRIGGER POPUP
"KRN",19,9510,"RPC",119,0)
ORPRF HASFLG
"KRN",19,9510,"RPC",120,0)
ORPRF HASCAT1
"KRN",19,9510,"RPC",121,0)
ORPRF GETFLG
"KRN",19,9510,"RPC",122,0)
ORPRF CLEAR
"KRN",19,9510,"RPC",123,0)
TIU SET DOCUMENT TEXT
"KRN",19,9510,"RPC",124,0)
DVBAB ORIGINAL PROCESSING DATE
"KRN",19,9510,"RPC",125,0)
TIU CREATE ADDENDUM RECORD
"KRN",19,9510,"RPC",126,0)
TIU UPDATE RECORD
"KRN",19,9510,"RPC",128,0)
XUS SET VISITOR
"KRN",19,9510,"RPC",129,0)
XUS GET VISITOR
"KRN",19,9510,"RPC",130,0)
DVBAB RESTRICTED LIST PATIENTS
"KRN",19,9510,"RPC",131,0)
DVBAB DOD INFO
"KRN",19,9510,"RPC",132,0)
DVBAB DOD REPORT
"KRN",19,9510,"RPC",133,0)
DVBAB DOD REPORT TYPES
"KRN",19,9510,"RPC",134,0)
DVBAB FIND DFN BY ICN
"KRN",19,9510,"RPC",135,0)
DVBAB CCOW
"KRN",19,9510,"RPC",136,0)
DVBAB ZIP2CITY
"KRN",19,9510,"RPC",137,0)
DVBA CHECK PATCH
"KRN",19,9510,"RPC",138,0)
DVBAB GET SET
"KRN",19,9510,"RPC",139,0)
DVBAB GET VVA TOKEN
"KRN",19,9510,"RPC",140,0)
VAFCTFU CONVERT ICN TO DFN
"KRN",19,9510,"RPC",141,0)
DVBAB 8861 NOTIFICATIONS
"KRN",19,9510,"RPC",142,0)
DVBA MVI GET CORRESPONDING IDS
"KRN",19,9510,"RPC",143,0)
DVBA MVI SEARCH PERSON
"KRN",19,9510,"RPC",144,0)
DVBAB SEND MSG TWO
"KRN",19,9510,"RPC",145,0)
DVBAD CONTRACTED EXAM REPORTS
"KRN",19,9510,"RPC",146,0)
DVBAD CONTRACTED EXAM CRYPTO
"KRN",19,9510,"RPC",147,0)
DVBA CAPRI GET EXAM IEN
"KRN",19,9510,"RPC",148,0)
DVBA CAPRI EXAM LINK TIU
"KRN",19,9510,"RPC",149,0)
DVBA CAPRI EXAM XML
"KRN",19,9510,"U")
CAPRI GUI (BROKER)
"KRN",8989.5,3209,0)
223;DIC(9.4,^DVBAB CAPRI VLER DAS CH3 URL^1
"KRN",8989.5,3209,1)
https://CAPRIAuthSvrTest.domain.ext:7003/CapriProxyServlet
"KRN",8989.5,3210,0)
223;DIC(9.4,^DVBAB CAPRI VLER DAS PROD URL^1
"KRN",8989.5,3210,1)
https://CAPRIAuthSvrProd.domain.ext:7003/CapriProxyServlet
"KRN",8989.51,701,-1)
0^1
"KRN",8989.51,701,0)
DVBAB CAPRI VLER DAS CH3 URL^VLER DAS development channel 3 URL^0
"KRN",8989.51,701,1)
F^^Enter the URL of the development channel 3 VLER DAS server.
"KRN",8989.51,701,20,0)
^8989.512^2^2^3140324^^^^
"KRN",8989.51,701,20,1,0)
This is the URL that CAPRI utilizes to connect to the VLER DAS 
"KRN",8989.51,701,20,2,0)
development channel 3 server.
"KRN",8989.51,701,30,0)
^8989.513I^1^1
"KRN",8989.51,701,30,1,0)
1^9.4
"KRN",8989.51,702,-1)
0^2
"KRN",8989.51,702,0)
DVBAB CAPRI VLER DAS PROD URL^VLER DAS Production URL^0
"KRN",8989.51,702,1)
F^^Enter the URL of the Production VLER DAS server.
"KRN",8989.51,702,20,0)
^8989.512^2^2^3140324^^^
"KRN",8989.51,702,20,1,0)
This is the URL that CAPRI utilizes to connect to the VLER DAS production 
"KRN",8989.51,702,20,2,0)
server.
"KRN",8989.51,702,30,0)
^8989.513I^1^1
"KRN",8989.51,702,30,1,0)
1^9.4
"KRN",8994,1606,-1)
0^1
"KRN",8994,1606,0)
DVBA CAPRI EXAM XML^FILEIN^DVBAXML^1^S
"KRN",8994,1606,1,0)
^8994.01^2^2^3130829^^^^
"KRN",8994,1606,1,1,0)
This RPC allows for the filling of the 2507 EXAM template in the XML 
"KRN",8994,1606,1,2,0)
version.
"KRN",8994,1606,2,0)
^8994.02A^4^4
"KRN",8994,1606,2,1,0)
EXAMIEN^1^30^1^1
"KRN",8994,1606,2,1,1,0)
^^1^1^3130618^
"KRN",8994,1606,2,1,1,1,0)
2507 Exam IEN
"KRN",8994,1606,2,2,0)
DAS^1^250^1^2
"KRN",8994,1606,2,2,1,0)
^^1^1^3130618^
"KRN",8994,1606,2,2,1,1,0)
DAS is the XML DAS Conformation message
"KRN",8994,1606,2,3,0)
DATTIM^1^^1^3
"KRN",8994,1606,2,3,1,0)
^^1^1^3130618^
"KRN",8994,1606,2,3,1,1,0)
DATTIM is the XML Transmission Date/Time
"KRN",8994,1606,2,4,0)
XML^2^^1^4
"KRN",8994,1606,2,4,1,0)
^^1^1^3130618^
"KRN",8994,1606,2,4,1,1,0)
XML is the array list format of the template being stored
"KRN",8994,1606,2,"B","DAS",2)

"KRN",8994,1606,2,"B","DATTIM",3)

"KRN",8994,1606,2,"B","EXAMIEN",1)

"KRN",8994,1606,2,"B","XML",4)

"KRN",8994,1606,2,"PARAMSEQ",1,1)

"KRN",8994,1606,2,"PARAMSEQ",2,2)

"KRN",8994,1606,2,"PARAMSEQ",3,3)

"KRN",8994,1606,2,"PARAMSEQ",4,4)

"KRN",8994,1606,3,0)
^8994.03^1^1^3130820^^
"KRN",8994,1606,3,1,0)
Y Returns successful filing status or error message
"KRN",8994,1608,-1)
0^2
"KRN",8994,1608,0)
DVBA CAPRI EXAM LINK TIU^LINK^DVBAXML^1^S^^^^1
"KRN",8994,1608,1,0)
^8994.01^1^1^3130829^^^
"KRN",8994,1608,1,1,0)
Links an exam in CAPRI TEMPLATES #396.17 to TIU DOCUMENT #8925
"KRN",8994,1608,2,0)
^8994.02A^2^2
"KRN",8994,1608,2,1,0)
EXAMIEN^1^^1^1
"KRN",8994,1608,2,1,1,0)
^8994.021^1^1^3130829^^
"KRN",8994,1608,2,1,1,1,0)
the exam ien in CAPRI TEMPLATES #396.17
"KRN",8994,1608,2,2,0)
TIUIEN^1^^1^2
"KRN",8994,1608,2,2,1,0)
^8994.021^1^1^3130829^^
"KRN",8994,1608,2,2,1,1,0)
the tiu ien in TIU DOCUMENT #8925
"KRN",8994,1608,2,"B","EXAMIEN",1)

"KRN",8994,1608,2,"B","TIUIEN",2)

"KRN",8994,1608,2,"PARAMSEQ",1,1)

"KRN",8994,1608,2,"PARAMSEQ",2,2)

"KRN",8994,1608,3,0)
^8994.03^2^2^3130829^^
"KRN",8994,1608,3,1,0)
returns 1 if the exam has been successfully linked to the TIU DOCUMENT;
"KRN",8994,1608,3,2,0)
otherwise return 0^error message
"KRN",8994,1609,-1)
0^3
"KRN",8994,1609,0)
DVBA CAPRI GET EXAM IEN^GETEXAM^DVBAXML^1^S^^^^1
"KRN",8994,1609,1,0)
^8994.01^2^2^3130829^^^^
"KRN",8994,1609,1,1,0)
get an exam ien from the CAPRI TEMMPLATE #396.17 given a
"KRN",8994,1609,1,2,0)
tiu ien from TIU DOCUMENT #8925
"KRN",8994,1609,2,0)
^8994.02A^1^1
"KRN",8994,1609,2,1,0)
TIUIEN^1^^1^1
"KRN",8994,1609,2,1,1,0)
^8994.021^1^1^3130829^^
"KRN",8994,1609,2,1,1,1,0)
the tiu ien in TIU DOCUMENT #8925
"KRN",8994,1609,2,"B","TIUIEN",1)

"KRN",8994,1609,2,"PARAMSEQ",1,1)

"KRN",8994,1609,3,0)
^8994.03^2^2^3130829^^^
"KRN",8994,1609,3,1,0)
returns a integer greater than zero if the exam can be found;
"KRN",8994,1609,3,2,0)
otherwise return -1^error message
"MBREQ")
0
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"ORD",20,8989.51)
8989.51;20;;;PAR1E1^XPDTA2;PAR1F1^XPDIA3;PAR1E1^XPDIA3;PAR1F2^XPDIA3;;PAR1DEL^XPDIA3(%)
"ORD",20,8989.51,0)
PARAMETER DEFINITION
"PKG",223,-1)
1^1
"PKG",223,0)
AUTOMATED MED INFO EXCHANGE^DVBA^The entire AMIE package 7131/2507.
"PKG",223,20,0)
^9.402P^^
"PKG",223,22,0)
^9.49I^1^1
"PKG",223,22,1,0)
2.7^2950410^3010328
"PKG",223,22,1,"PAH",1,0)
186^3140404
"PKG",223,22,1,"PAH",1,1,0)
^^1^1^3140404
"PKG",223,22,1,"PAH",1,1,1,0)
VLER DAS BUILD - REFER TO PATCH DESCRIPTION FOR MORE INFORMATION.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","DVBA186P")
0^3^B5933861^n/a
"RTN","DVBA186P",1,0)
DVBA186P ;ALB/DJS - DVBA*2.7*186 POST-INIT ROUTINE ; 8/27/13
"RTN","DVBA186P",2,0)
 ;;2.7;AMIE;**186**;Apr 10, 1995;Build 21
"RTN","DVBA186P",3,0)
 ;
"RTN","DVBA186P",4,0)
 Q  ;NO DIRECT ENTRY
"RTN","DVBA186P",5,0)
 ;
"RTN","DVBA186P",6,0)
POST ; Main entry point for post-int item
"RTN","DVBA186P",7,0)
 ; Populate VLER DAS URL parameter definitions  
"RTN","DVBA186P",8,0)
 ;
"RTN","DVBA186P",9,0)
 N DVBERR
"RTN","DVBA186P",10,0)
 S DVBERR=$$ENXPAR("PKG","DVBAB CAPRI VLER DAS CH3 URL","https://CAPRIAuthSvrTest.domain.ext:7003/CapriProxyServlet")
"RTN","DVBA186P",11,0)
 D UPDMSG("DVBAB CAPRI VLER DAS CH3 URL",DVBERR)
"RTN","DVBA186P",12,0)
 S DVBERR=$$ENXPAR("PKG","DVBAB CAPRI VLER DAS PROD URL","https://CAPRIAuthSvrProd.domain.ext:7003/CapriProxyServlet")
"RTN","DVBA186P",13,0)
 D UPDMSG("DVBAB CAPRI VLER DAS PROD URL",DVBERR)
"RTN","DVBA186P",14,0)
 ;
"RTN","DVBA186P",15,0)
POST2 ; Create record to add & update file
"RTN","DVBA186P",16,0)
 ; This TAG adds an entry to the REMOTE APPLICATION file (#8994.5) for VLER DAS - CAPRI
"RTN","DVBA186P",17,0)
 N IEN,OPTNM,ARY,OPTIEN
"RTN","DVBA186P",18,0)
 S IEN="" F  S IEN=$O(^DIC(19,IEN)) Q:IEN=""  D
"RTN","DVBA186P",19,0)
 . S OPTNM=$P($G(^DIC(19,IEN,0)),U,1) Q:OPTNM'="DVBA CAPRI GUI"  S OPTIEN=IEN
"RTN","DVBA186P",20,0)
 S ARY(8994.5,"?+1,",.01)="VLER DAS-CAPRI"  ;Remote application name
"RTN","DVBA186P",21,0)
 S ARY(8994.5,"?+1,",.02)=OPTIEN  ;Context option IEN FOR "DVBA CAPRI GUI"
"RTN","DVBA186P",22,0)
 S ARY(8994.5,"?+1,",.03)=">:6IZRxZG-axn7]oX3S"  ;Application code
"RTN","DVBA186P",23,0)
 S ARY(8994.51,"?+2,?+1,",.01)="S"  ;Callback type
"RTN","DVBA186P",24,0)
 S ARY(8994.51,"?+2,?+1,",.02)=-1  ;Callback port
"RTN","DVBA186P",25,0)
 S ARY(8994.51,"?+2,?+1,",.03)="XXX"  ;Callback server
"RTN","DVBA186P",26,0)
 D UPDATE^DIE("","ARY","","MSG")  ;Update Remote Application file with new VLER DAS-CAPRI entry
"RTN","DVBA186P",27,0)
 I $G(MSG("DIERR"))'="" D
"RTN","DVBA186P",28,0)
 .N ERR,LN,LN2
"RTN","DVBA186P",29,0)
 .S (ERR,LN2)=0
"RTN","DVBA186P",30,0)
 .F  S ERR=+$O(MSG("DIERR",ERR)) Q:'ERR  D
"RTN","DVBA186P",31,0)
 ..S LN=0
"RTN","DVBA186P",32,0)
 ..F  S LN=+$O(MSG("DIERR",ERR,"TEXT",LN)) Q:'LN  D
"RTN","DVBA186P",33,0)
 ...S LN2=LN2+1
"RTN","DVBA186P",34,0)
 ...S X(LN2)=MSG("DIERR",ERR,"TEXT",LN)
"RTN","DVBA186P",35,0)
 ...D BMES^XPDUTL(X(LN2))
"RTN","DVBA186P",36,0)
 Q
"RTN","DVBA186P",37,0)
 ;
"RTN","DVBA186P",38,0)
ENXPAR(DVBENT,DVBPAR,DVBVAL) ;Update Parameter values
"RTN","DVBA186P",39,0)
 ;
"RTN","DVBA186P",40,0)
 ;  Input:
"RTN","DVBA186P",41,0)
 ;    DVBENT - Parameter Entity
"RTN","DVBA186P",42,0)
 ;    DVBPAR - Parameter Name
"RTN","DVBA186P",43,0)
 ;    DVBVAL - Parameter Value
"RTN","DVBA186P",44,0)
 ;
"RTN","DVBA186P",45,0)
 ;  Output:
"RTN","DVBA186P",46,0)
 ;    Function value - returns "0" on success;
"RTN","DVBA186P",47,0)
 ;                     otherwise returns error#^errortext
"RTN","DVBA186P",48,0)
 ;
"RTN","DVBA186P",49,0)
 N DVBERR
"RTN","DVBA186P",50,0)
 D EN^XPAR(DVBENT,DVBPAR,1,DVBVAL,.DVBERR)
"RTN","DVBA186P",51,0)
 Q DVBERR
"RTN","DVBA186P",52,0)
 ; 
"RTN","DVBA186P",53,0)
UPDMSG(DVBPAR,DVBERR) ;display update message
"RTN","DVBA186P",54,0)
 ;
"RTN","DVBA186P",55,0)
 ;  Input:
"RTN","DVBA186P",56,0)
 ;    DVBPAR - Parameter Name
"RTN","DVBA186P",57,0)
 ;    DVBERR - Parameter Update result
"RTN","DVBA186P",58,0)
 ;
"RTN","DVBA186P",59,0)
 ;  Output: none
"RTN","DVBA186P",60,0)
 ; 
"RTN","DVBA186P",61,0)
 I DVBERR D
"RTN","DVBA186P",62,0)
 . D MES^XPDUTL(DVBPAR_" update FAILURE.")
"RTN","DVBA186P",63,0)
 . D MES^XPDUTL("  Failure reason: "_DVBERR)
"RTN","DVBA186P",64,0)
 E  D
"RTN","DVBA186P",65,0)
 . D MES^XPDUTL(DVBPAR_" update SUCCESS.")
"RTN","DVBA186P",66,0)
 Q
"RTN","DVBA186P",67,0)
 ;
"RTN","DVBABURL")
0^2^B7360044^B6313636
"RTN","DVBABURL",1,0)
DVBABURL ;ALB/SPH - CAPRI URL ;14/MAY/2012
"RTN","DVBABURL",2,0)
 ;;2.7;AMIE;**104,136,143,149,168,181,186**;Apr 10, 1995;Build 21
"RTN","DVBABURL",3,0)
 ;
"RTN","DVBABURL",4,0)
URL(Y,WHICH) ;
"RTN","DVBABURL",5,0)
 ;This procedure supports the DVBAB GET URL remote procedure 
"RTN","DVBABURL",6,0)
 S Y=""
"RTN","DVBABURL",7,0)
 ; 1=VBA's AMIE Worksheet Website
"RTN","DVBABURL",8,0)
 ; 2=CAPRI training website
"RTN","DVBABURL",9,0)
 ; 3=VistAWeb website
"RTN","DVBABURL",10,0)
 ; 5=HIA download website
"RTN","DVBABURL",11,0)
 ; 6=VIRTUAL VA web service server
"RTN","DVBABURL",12,0)
 ; 8=VLER DAS web service server
"RTN","DVBABURL",13,0)
 ; 999=Debug/Test Code
"RTN","DVBABURL",14,0)
 I WHICH=1 S Y="http://152.124.238.193/bl/21/rating/Medical/exams/index.htm"
"RTN","DVBABURL",15,0)
 I WHICH=2 S Y="http://vaww.demo.domain.ext/"
"RTN","DVBABURL",16,0)
 I WHICH=3 D
"RTN","DVBABURL",17,0)
 . I '$$PROD^XUPROD S Y="-1^VistAWeb disabled for non-production systems." Q
"RTN","DVBABURL",18,0)
 . S Y="https://vistaweb.domain.ext/CapriPage.aspx"
"RTN","DVBABURL",19,0)
 I WHICH=4 S Y="M21-1, Part VI, Rating Board Procedures^http://152.124.238.193/bl/21/Publicat/Manuals/Part6/601.htm#Exam"
"RTN","DVBABURL",20,0)
 I WHICH=5 S Y=$$GET^XPAR("PKG","DVBAB CAPRI HIA UPDATE URL",1,"Q")
"RTN","DVBABURL",21,0)
 I WHICH=6 D  ;Virtual VA web service server
"RTN","DVBABURL",22,0)
 . I $$PROD^XUPROD D
"RTN","DVBABURL",23,0)
 . . S Y=$$GET^XPAR("PKG","DVBAB CAPRI VIRTUALVA PROD URL",1,"Q")
"RTN","DVBABURL",24,0)
 . E  D
"RTN","DVBABURL",25,0)
 . . S Y=$$GET^XPAR("PKG","DVBAB CAPRI VIRTUALVA TEST URL",1,"Q")
"RTN","DVBABURL",26,0)
 I WHICH=8 D  ;VLER DAS web service server
"RTN","DVBABURL",27,0)
 . I $$PROD^XUPROD D
"RTN","DVBABURL",28,0)
 . . S Y=$$GET^XPAR("PKG","DVBAB CAPRI VLER DAS PROD URL",1,"Q")
"RTN","DVBABURL",29,0)
 . E  D
"RTN","DVBABURL",30,0)
 . . S Y=$$GET^XPAR("PKG","DVBAB CAPRI VLER DAS CH3 URL",1,"Q")
"RTN","DVBABURL",31,0)
 I WHICH=999 S Y="http://vhaannweb2.v11.domain.ext/VwDesktop/CapriPage.aspx"
"RTN","DVBABURL",32,0)
 Q
"RTN","DVBABURL",33,0)
 ;
"RTN","DVBABURL",34,0)
VVATOKEN(DVBAUTH) ;retrieve and return the Virtual VA authorization credentials
"RTN","DVBABURL",35,0)
 ;This procedure supports the DVBA GET VVA TOKEN remote procedure and
"RTN","DVBABURL",36,0)
 ;retrieves the user, password, and token value required to login to the Virtual
"RTN","DVBABURL",37,0)
 ;VA web service.  The procedure supports returning differerent values based on
"RTN","DVBABURL",38,0)
 ;whether the system is a production system or a test/development system.
"RTN","DVBABURL",39,0)
 ;  
"RTN","DVBABURL",40,0)
 ; Returns user^password^token on success; otherwise returns ""
"RTN","DVBABURL",41,0)
 ; Example: "capri^XXXXX^Username-1"
"RTN","DVBABURL",42,0)
 ;
"RTN","DVBABURL",43,0)
 N DVBUSER
"RTN","DVBABURL",44,0)
 N DVBPWD
"RTN","DVBABURL",45,0)
 N DVBTOKEN
"RTN","DVBABURL",46,0)
 ;
"RTN","DVBABURL",47,0)
 I $$PROD^XUPROD D  ;return values for production system
"RTN","DVBABURL",48,0)
 . S DVBUSER=$$GET^XPAR("PKG","DVBAB CAPRI VVA USER",1,"Q")
"RTN","DVBABURL",49,0)
 . S DVBPWD=$$GET^XPAR("PKG","DVBAB CAPRI VVA PROD PASSWD",1,"Q")
"RTN","DVBABURL",50,0)
 . S DVBTOKEN=$$GET^XPAR("PKG","DVBAB CAPRI VVA PROD TOKEN",1,"Q")
"RTN","DVBABURL",51,0)
 E  D  ;return values for test/development system
"RTN","DVBABURL",52,0)
 . S DVBUSER=$$GET^XPAR("PKG","DVBAB CAPRI VVA USER",1,"Q")
"RTN","DVBABURL",53,0)
 . S DVBPWD=$$GET^XPAR("PKG","DVBAB CAPRI VVA TEST PASSWD",1,"Q")
"RTN","DVBABURL",54,0)
 . S DVBTOKEN=$$GET^XPAR("PKG","DVBAB CAPRI VVA TEST TOKEN",1,"Q")
"RTN","DVBABURL",55,0)
 I DVBUSER'="",DVBPWD'="",DVBTOKEN'="" D  ;success
"RTN","DVBABURL",56,0)
 . S DVBAUTH=DVBUSER_U_DVBPWD_U_DVBTOKEN
"RTN","DVBABURL",57,0)
 E  D  ;failure
"RTN","DVBABURL",58,0)
 . S DVBAUTH=""
"RTN","DVBABURL",59,0)
 Q
"RTN","DVBACER1")
0^4^B135356111^B97387784
"RTN","DVBACER1",1,0)
DVBACER1 ;BEST/JFW - DEMTRAN CONTRACTED EXAM REPORTS ; 6/27/12 3:56pm
"RTN","DVBACER1",2,0)
 ;;2.7;AMIE;**178,185,186**;Apr 10, 1995;Build 21
"RTN","DVBACER1",3,0)
 ;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","DVBACER1",4,0)
 ;
"RTN","DVBACER1",5,0)
 ;  - RPC: DVBAD CONTRACTED EXAM REPORTS
"RTN","DVBACER1",6,0)
 ;  
"RTN","DVBACER1",7,0)
 ;  Creates Detailed, Summary, or Timeliness Contracted Exam Reports
"RTN","DVBACER1",8,0)
 ;  for the Disability Examination Management Tracking, Referral and
"RTN","DVBACER1",9,0)
 ;  Notification application (demTRAN).
"RTN","DVBACER1",10,0)
 ;
"RTN","DVBACER1",11,0)
 ;Input:
"RTN","DVBACER1",12,0)
 ;     DVBALST:   Global array to hold results to be returned
"RTN","DVBACER1",13,0)
 ;     DVBARTYP:  Report Type to Generate (Required)
"RTN","DVBACER1",14,0)
 ;                 D : Detailed
"RTN","DVBACER1",15,0)
 ;                 S : Summary
"RTN","DVBACER1",16,0)
 ;                 T : Timeliness
"RTN","DVBACER1",17,0)
 ;     DVBAFLTRS: Report Filters (Optional)
"RTN","DVBACER1",18,0)
 ;        ("DATE")       = FM From Date ^ FM To Date (Inclusive) 
"RTN","DVBACER1",19,0)
 ;        ("CONTRACTOR") = IEN of Contractor in 396.45
"RTN","DVBACER1",20,0)
 ;        ("PENDING")    = 1 indicating Pending Exams Only ^
"RTN","DVBACER1",21,0)
 ;                         # of Days Referral Exceeded (Optional)
"RTN","DVBACER1",22,0)
 ;        ("SORT")       = 1 indicating Contractor sorted else
"RTN","DVBACER1",23,0)
 ;                         Request DTM sorted (Detailed Reports Only)
"RTN","DVBACER1",24,0)
 ;        ("DELIMITTED") = 1 indicating Report returned Delimitted
"RTN","DVBACER1",25,0)
 ;                         (Detailed Reports Only)
"RTN","DVBACER1",26,0)
 ;
"RTN","DVBACER1",27,0)
CERPTS(DVBALST,DVBARTYP,DVBAFLTRS) ;Contracted Exam Reports
"RTN","DVBACER1",28,0)
 N DVBAQ,DVBASDTE,DVBAEDTE,DVBACIEN,DVBAPEXMS,DVBAPDAYS,DVBAHFS
"RTN","DVBACER1",29,0)
 N DVBARIEN,DVBAEIEN,DVBAENDE,DVBAGLBL,DVBARSLTS,DVBASCRH
"RTN","DVBACER1",30,0)
 N DVBACSRT,DVBADLMT,X1,X2,X,%H,%Y
"RTN","DVBACER1",31,0)
 N GETARY,ERARY,RSTAT
"RTN","DVBACER1",32,0)
 K ^TMP($J,"DVBACER1")
"RTN","DVBACER1",33,0)
 S DVBAHFS=$$GETHFS()
"RTN","DVBACER1",34,0)
 S DVBASCRH=$NA(^TMP($J,"DVBASCRATCH"))
"RTN","DVBACER1",35,0)
 S DVBAGLBL=$NA(^TMP($J,"DVBA"_$G(DVBARTYP)_"RPTS"))
"RTN","DVBACER1",36,0)
 S DVBARSLTS=$NA(^TMP("DVBA"_$G(DVBARTYP)_"RSLTS",$J,1))
"RTN","DVBACER1",37,0)
 K @DVBAGLBL,@DVBARSLTS,@DVBASCRH
"RTN","DVBACER1",38,0)
 Q:($$OPENHFS("DVBRP",DVBAHFS,"W",DVBARSLTS))  ;Quit if error
"RTN","DVBACER1",39,0)
 U IO
"RTN","DVBACER1",40,0)
 ; Initial start values if filters undefined
"RTN","DVBACER1",41,0)
 S (DVBAEDTE,DVBACIEN)=""
"RTN","DVBACER1",42,0)
 S (DVBASDTE,DVBAPEXMS,DVBAPDAYS,DVBACSRT,DVBADLMT)=0
"RTN","DVBACER1",43,0)
 ;
"RTN","DVBACER1",44,0)
 ;Date filter defined, set loop conditions
"RTN","DVBACER1",45,0)
 D:($D(DVBAFLTRS("DATE")))
"RTN","DVBACER1",46,0)
 .S DVBASDTE=$P($G(DVBAFLTRS("DATE")),"^")_".2359"
"RTN","DVBACER1",47,0)
 .S X1=DVBASDTE,X2=-1 D C^%DTC S DVBASDTE=X
"RTN","DVBACER1",48,0)
 .S DVBAEDTE=$P($G(DVBAFLTRS("DATE")),"^",2)_".2359"
"RTN","DVBACER1",49,0)
 ;Contractor filter defined
"RTN","DVBACER1",50,0)
 S:($D(DVBAFLTRS("CONTRACTOR"))) DVBACIEN=$G(DVBAFLTRS("CONTRACTOR"))
"RTN","DVBACER1",51,0)
 ;Pending Exam filter defined
"RTN","DVBACER1",52,0)
 D:($D(DVBAFLTRS("PENDING")))
"RTN","DVBACER1",53,0)
 .S DVBAPEXMS=1,DVBAPDAYS=+$P($G(DVBAFLTRS("PENDING")),"^",2)
"RTN","DVBACER1",54,0)
 ;Sorting (Contractor or Request DTM - for Detailed Reports Only)
"RTN","DVBACER1",55,0)
 S:($D(DVBAFLTRS("SORT"))) DVBACSRT=1
"RTN","DVBACER1",56,0)
 ;Delimitted Output (for Detailed Reports Only)
"RTN","DVBACER1",57,0)
 S:($D(DVBAFLTRS("DELIMITTED"))) DVBADLMT=1
"RTN","DVBACER1",58,0)
 ;
"RTN","DVBACER1",59,0)
 ;Get Contractor(s) list for Timeliness and Summary Reports
"RTN","DVBACER1",60,0)
 ; if specific contractor NOT defined
"RTN","DVBACER1",61,0)
 D:(($G(DVBARTYP)'="D")&(DVBACIEN']"")) CONLST(DVBACIEN,DVBARSLTS)
"RTN","DVBACER1",62,0)
 ;
"RTN","DVBACER1",63,0)
 ;Use "C" X-REF so results are in Date/Time Order
"RTN","DVBACER1",64,0)
 F  S DVBASDTE=$O(^DVB(396.3,"C",DVBASDTE)) Q:('+DVBASDTE)!((DVBAEDTE]"")&(DVBASDTE>DVBAEDTE))  D
"RTN","DVBACER1",65,0)
 .S DVBARIEN=""  ;In case there is more than 1 request ien for dtm
"RTN","DVBACER1",66,0)
 .F  S DVBARIEN=$O(^DVB(396.3,"C",DVBASDTE,DVBARIEN)) Q:'+DVBARIEN  D
"RTN","DVBACER1",67,0)
 ..;Use "C" X-REF for retrieving exams for request IEN
"RTN","DVBACER1",68,0)
 ..I ($G(DVBARTYP)="T") D CERPTS2 Q
"RTN","DVBACER1",69,0)
 ..S DVBAEIEN=""
"RTN","DVBACER1",70,0)
 ..F  S DVBAEIEN=$O(^DVB(396.4,"C",DVBARIEN,DVBAEIEN)) Q:'+DVBAEIEN  D
"RTN","DVBACER1",71,0)
 ...S DVBAENDE=$G(^DVB(396.4,DVBAEIEN,"CNTRCTR"))
"RTN","DVBACER1",72,0)
 ...;Ignore exams that have NOT been contracted out
"RTN","DVBACER1",73,0)
 ...;Q:($P(DVBAENDE,"^",2)']"")
"RTN","DVBACER1",74,0)
 ...I ($P(DVBAENDE,"^",2)']"") Q
"RTN","DVBACER1",75,0)
 ...;Ignore exams NOT for specified contractor if defined
"RTN","DVBACER1",76,0)
 ...;Q:((DVBACIEN]"")&(DVBACIEN'=(+DVBAENDE)))
"RTN","DVBACER1",77,0)
 ...I ((DVBACIEN]"")&(DVBACIEN'=(+DVBAENDE))) Q
"RTN","DVBACER1",78,0)
 ...;DETAILED & SUMMARY REPORTING
"RTN","DVBACER1",79,0)
 ...D:($G(DVBARTYP)'="T")
"RTN","DVBACER1",80,0)
 ....S DVBAQ=0
"RTN","DVBACER1",81,0)
 ....I (DVBAPEXMS) D  Q:(DVBAQ)  ;Pending Exams
"RTN","DVBACER1",82,0)
 .....;Ignore Exams NOT received back from contractor
"RTN","DVBACER1",83,0)
 .....S:($P(DVBAENDE,"^",3)]"") DVBAQ=1
"RTN","DVBACER1",84,0)
 .....D:(('DVBAQ)&(DVBAPDAYS]""))
"RTN","DVBACER1",85,0)
 ......;Ignore Pending Exams less than requested days
"RTN","DVBACER1",86,0)
 ......S X1=DT,X2=$P(DVBAENDE,"^",2) D ^%DTC
"RTN","DVBACER1",87,0)
 ......S:(X<=DVBAPDAYS) DVBAQ=1
"RTN","DVBACER1",88,0)
 ....D:($G(DVBARTYP)="D") DRPTS(DVBACSRT,DVBARIEN,DVBAEIEN,DVBASCRH)
"RTN","DVBACER1",89,0)
 ....D:($G(DVBARTYP)="S") SRPTS(DVBARIEN,DVBAENDE,DVBAGLBL,DVBARSLTS)
"RTN","DVBACER1",90,0)
 ..D:($G(DVBARTYP)="T") TRPTS3(DVBAGLBL,DVBARSLTS)
"RTN","DVBACER1",91,0)
 D:($G(DVBARTYP)="D") DSPLYDTL(DVBACSRT,DVBACIEN,DVBAPEXMS,DVBASCRH,DVBADLMT)  ;Rpt Details
"RTN","DVBACER1",92,0)
 D CLOSEHFS("DVBRP",DVBAHFS,DVBARSLTS)
"RTN","DVBACER1",93,0)
 S DVBALST=$NA(@DVBARSLTS)
"RTN","DVBACER1",94,0)
 K @DVBAGLBL,@DVBASCRH
"RTN","DVBACER1",95,0)
 Q
"RTN","DVBACER1",96,0)
 ;
"RTN","DVBACER1",97,0)
 ;
"RTN","DVBACER1",98,0)
CERPTS2 ;Logic for timeliness report
"RTN","DVBACER1",99,0)
 N EXSTAT
"RTN","DVBACER1",100,0)
 K ^TMP($J,"DVBACER1")
"RTN","DVBACER1",101,0)
 S DVBAEIEN=""
"RTN","DVBACER1",102,0)
 F  S DVBAEIEN=$O(^DVB(396.4,"C",DVBARIEN,DVBAEIEN)) Q:'+DVBAEIEN  D
"RTN","DVBACER1",103,0)
 .S DVBAENDE=$G(^DVB(396.4,DVBAEIEN,"CNTRCTR"))
"RTN","DVBACER1",104,0)
 .;Ignore exams that have NOT been contracted out
"RTN","DVBACER1",105,0)
 .Q:($P(DVBAENDE,"^",2)']"")
"RTN","DVBACER1",106,0)
 .;Ignore exams NOT for specified contractor if defined
"RTN","DVBACER1",107,0)
 .Q:((DVBACIEN]"")&(DVBACIEN'=(+DVBAENDE)))
"RTN","DVBACER1",108,0)
 .;TIMELINESS REPORTING
"RTN","DVBACER1",109,0)
 .;Innore exams that have been canceled
"RTN","DVBACER1",110,0)
 .S EXSTAT=$P(^DVB(396.4,DVBAEIEN,0),"^",4)
"RTN","DVBACER1",111,0)
 .Q:EXSTAT="X"!(EXSTAT="RX") 
"RTN","DVBACER1",112,0)
 .D TRPTS2(DVBAENDE)
"RTN","DVBACER1",113,0)
 D TRPTS3(DVBAGLBL,DVBARSLTS)
"RTN","DVBACER1",114,0)
 Q
"RTN","DVBACER1",115,0)
 ;
"RTN","DVBACER1",116,0)
 ;Input  DVBACIEN - Specific Contrator Data Requested
"RTN","DVBACER1",117,0)
 ;       DVBARSLTS - Global Refernece for results
"RTN","DVBACER1",118,0)
 ;Output Global Array Entries Added for Contractor(s)
"RTN","DVBACER1",119,0)
 ;       ^TMP("DVBATRSLTS",$J)
"RTN","DVBACER1",120,0)
CONLST(DVBACIEN,DVBARSLTS) ;Get Contractor List
"RTN","DVBACER1",121,0)
 ;Used in Timeliness and Summary Reports
"RTN","DVBACER1",122,0)
 N DVBACNDE
"RTN","DVBACER1",123,0)
 ;Specific Contractor Info Requested
"RTN","DVBACER1",124,0)
 I (DVBACIEN]"") D  Q
"RTN","DVBACER1",125,0)
 .S DVBACNDE=$G(^DVB(396.45,DVBACIEN,0))
"RTN","DVBACER1",126,0)
 .S @DVBARSLTS@(DVBACIEN)=$P(DVBACNDE,"^")_"^"_$P(DVBACNDE,"^",3)_"^"
"RTN","DVBACER1",127,0)
 ;All Contractor Info Requested
"RTN","DVBACER1",128,0)
 S DVBACIEN=0 F  S DVBACIEN=$O(^DVB(396.45,DVBACIEN)) Q:'+DVBACIEN  D
"RTN","DVBACER1",129,0)
 .S DVBACNDE=$G(^DVB(396.45,DVBACIEN,0))
"RTN","DVBACER1",130,0)
 .;Create list of contractor info and initialize counters
"RTN","DVBACER1",131,0)
 .; for the specific report to 0
"RTN","DVBACER1",132,0)
 .S @DVBARSLTS@($P(DVBACNDE,"^"),DVBACIEN)=$P(DVBACNDE,"^")_"^"_$P(DVBACNDE,"^",3)_"^0"
"RTN","DVBACER1",133,0)
 .S:($G(DVBARTYP)="S") @DVBARSLTS@($P(DVBACNDE,"^"),DVBACIEN)=@DVBARSLTS@($P(DVBACNDE,"^"),DVBACIEN)_"^0"
"RTN","DVBACER1",134,0)
 Q
"RTN","DVBACER1",135,0)
 ;
"RTN","DVBACER1",136,0)
 ;Input  DVBACSRT - 1/0 if report should be sorted by Contractor
"RTN","DVBACER1",137,0)
 ;                  Name (1) or by Request Date (0)
"RTN","DVBACER1",138,0)
 ;       DVBARIEN - IEN of Request (396.3) associated with Exam
"RTN","DVBACER1",139,0)
 ;       DVBAEIEN - IEN of Exam (396.4)
"RTN","DVBACER1",140,0)
 ;       DVBASCRH - Global Reference for results (Scratch Global)
"RTN","DVBACER1",141,0)
 ;Output Global Array Entry Added (Sorted) - ^TMP($J,"DVBASCRH")
"RTN","DVBACER1",142,0)
DRPTS(DVBACSRT,DVBARIEN,DVBAEIEN,DVBASCRH) ; Detailed Report Processing
"RTN","DVBACER1",143,0)
 N DVBACNME,DVBAENME,DVBARDTM,DVBAEXM
"RTN","DVBACER1",144,0)
 ;Retrieve Exam Info
"RTN","DVBACER1",145,0)
 D GETS^DIQ(396.4,DVBAEIEN_",",".03;100","E","DVBAEXM")
"RTN","DVBACER1",146,0)
 S DVBACNME=$G(DVBAEXM(396.4,DVBAEIEN_",",100,"E"))  ;Contractor
"RTN","DVBACER1",147,0)
 S:(DVBACNME']"") DVBACNME="UNKNOWN"
"RTN","DVBACER1",148,0)
 S DVBAENME=$G(DVBAEXM(396.4,DVBAEIEN_",",.03,"E"))  ;Exam Name
"RTN","DVBACER1",149,0)
 S:(DVBAENME']"") DVBAENME="UNKNOWN"
"RTN","DVBACER1",150,0)
 S DVBAENME=$TR(DVBAENME,","," ")  ;Remove Commas
"RTN","DVBACER1",151,0)
 S DVBARDTM=$P($G(^DVB(396.3,DVBARIEN,0)),"^",2)  ;Request DateTime
"RTN","DVBACER1",152,0)
 S:('DVBACSRT) @DVBASCRH@(DVBARDTM,DVBARIEN,DVBAENME,DVBAEIEN)=""
"RTN","DVBACER1",153,0)
 S:(DVBACSRT) @DVBASCRH@($TR(DVBACNME,","," "),DVBARDTM,DVBARIEN,DVBAENME,DVBAEIEN)=DVBACNME
"RTN","DVBACER1",154,0)
 Q
"RTN","DVBACER1",155,0)
 ;
"RTN","DVBACER1",156,0)
 ;Input  DVBACSRT - 1/0 if report should be sorted by Contractor
"RTN","DVBACER1",157,0)
 ;                  Name (1) or by Request Date (0)
"RTN","DVBACER1",158,0)
 ;       DVBAEIEN  - IEN of Exam (396.4)
"RTN","DVBACER1",159,0)
 ;       DVBAPEXMS - 1/0 Indicates if only pending exams report
"RTN","DVBACER1",160,0)
 ;       DVBASCRH  - Global Reference for results (Scratch Global)
"RTN","DVBACER1",161,0)
 ;       DVBADLMT  - 1/0 if report output should be delimitted
"RTN","DVBACER1",162,0)
 ;                   Delimitted Output (1) or Formatted Output (0)
"RTN","DVBACER1",163,0)
 ;Output Write Report Details
"RTN","DVBACER1",164,0)
DSPLYDTL(DVBACSRT,DVBACIEN,DVBAPEXMS,DVBASCRH,DVBADLMT) ;Display Sorted Detailed Report Info
"RTN","DVBACER1",165,0)
 N DVBAREF,DVBACNME,DVBARIEN,DVBAINFO,DVBAOFST
"RTN","DVBACER1",166,0)
 N DVBASPCG,DVBALNE,DFN,VADM,X
"RTN","DVBACER1",167,0)
 D DRPTSPCG(DVBACSRT,DVBADLMT,.DVBASPCG)
"RTN","DVBACER1",168,0)
 S DVBAREF=DVBASCRH,DVBAOFST=0,(DVBACNME,DVBARIEN)=""
"RTN","DVBACER1",169,0)
 S:('DVBACSRT) DVBAOFST=1
"RTN","DVBACER1",170,0)
 ;Quit if no results found
"RTN","DVBACER1",171,0)
 Q:('$D(@DVBASCRH))
"RTN","DVBACER1",172,0)
 ;Report Column Header Info
"RTN","DVBACER1",173,0)
 W:((DVBACIEN']"")&(DVBACSRT)) "Contractor",$S(DVBADLMT:"^",1:"")
"RTN","DVBACER1",174,0)
 W:((DVBACIEN']"")&(DVBACSRT)&('DVBADLMT)) !
"RTN","DVBACER1",175,0)
 W ?DVBASPCG(1),"Request Date",$S(DVBADLMT:"^",1:""),?DVBASPCG(2),"SSN",$S(DVBADLMT:"^",1:"")
"RTN","DVBACER1",176,0)
 W ?DVBASPCG(3),"Patient Name",$S(DVBADLMT:"^",1:""),?DVBASPCG(4),"Status",$S(DVBADLMT:"^",1:"")
"RTN","DVBACER1",177,0)
 W:('DVBADLMT) !
"RTN","DVBACER1",178,0)
 W ?DVBASPCG(5),"Examinations",$S(DVBADLMT:"^",1:"")
"RTN","DVBACER1",179,0)
 W:(('DVBACSRT)&(DVBACIEN']"")) ?DVBASPCG(6),"Contractor",$S(DVBADLMT:"^",1:"")
"RTN","DVBACER1",180,0)
 W ?DVBASPCG(7),"Referred"
"RTN","DVBACER1",181,0)
 S DVBALNE=(DVBASPCG(7)+18)
"RTN","DVBACER1",182,0)
 D:('DVBAPEXMS) 
"RTN","DVBACER1",183,0)
 .W ?DVBASPCG(8),$S(DVBADLMT:"^",1:""),"Received"
"RTN","DVBACER1",184,0)
 .S DVBALNE=(DVBASPCG(8)+12)
"RTN","DVBACER1",185,0)
 S X="" S $P(X,"-",DVBALNE)="-" W:('DVBADLMT) !,X  ;Header Line
"RTN","DVBACER1",186,0)
 F  S DVBAREF=$Q(@DVBAREF) Q:(DVBAREF'[$P(DVBASCRH,")"))  D
"RTN","DVBACER1",187,0)
 .;Display Contractor Name, if NOT specific contractor report
"RTN","DVBACER1",188,0)
 .D:((DVBACIEN']"")&(DVBACSRT)&(DVBADLMT))  ; Delimitted Output
"RTN","DVBACER1",189,0)
 ..W !,@DVBAREF_"^"
"RTN","DVBACER1",190,0)
 .D:((DVBACNME'=@DVBAREF)&(DVBACIEN']"")&(DVBACSRT)&('DVBADLMT))  ;Formatted Output
"RTN","DVBACER1",191,0)
 ..W:(DVBACNME]"") !  ;Extra Line Space between Contractors
"RTN","DVBACER1",192,0)
 ..S DVBACNME=@DVBAREF
"RTN","DVBACER1",193,0)
 ..W !,DVBACNME
"RTN","DVBACER1",194,0)
 .;Display Request Info (Multiple Exams)
"RTN","DVBACER1",195,0)
 .D:(DVBARIEN'=$P(DVBAREF,",",(5-DVBAOFST)))
"RTN","DVBACER1",196,0)
 ..S DVBARIEN=$P(DVBAREF,",",(5-DVBAOFST))
"RTN","DVBACER1",197,0)
 ..S DFN=+$G(^DVB(396.3,DVBARIEN,0))  ; Patient
"RTN","DVBACER1",198,0)
 ..D DEM^VADPT  ;DBIA: 10061
"RTN","DVBACER1",199,0)
 ..D GETS^DIQ(396.3,DVBARIEN_",","17","E","DVBAINFO")
"RTN","DVBACER1",200,0)
 ..D:('DVBADLMT)  ;Formatted Report
"RTN","DVBACER1",201,0)
 ...W !?DVBASPCG(1),$$FMTE^XLFDT($P(DVBAREF,",",(4-DVBAOFST)),"M")  ;No Seconds
"RTN","DVBACER1",202,0)
 ...W ?DVBASPCG(2),$P($G(VADM(2)),"^",2),?DVBASPCG(3),$G(VADM(1))
"RTN","DVBACER1",203,0)
 ...W ?DVBASPCG(4),$G(DVBAINFO(396.3,DVBARIEN_",",17,"E"))
"RTN","DVBACER1",204,0)
 .D:(DVBADLMT)  ;Detailed Report
"RTN","DVBACER1",205,0)
 ..W:'((DVBACIEN']"")&(DVBACSRT)) !
"RTN","DVBACER1",206,0)
 ..W $$FMTE^XLFDT($P(DVBAREF,",",(4-DVBAOFST)),"M")_"^"  ;No Seconds
"RTN","DVBACER1",207,0)
 ..W $P($G(VADM(2)),"^",2)_"^"_$G(VADM(1))_"^"
"RTN","DVBACER1",208,0)
 ..W $G(DVBAINFO(396.3,DVBARIEN_",",17,"E"))_"^"
"RTN","DVBACER1",209,0)
 .;Exam Info for Request
"RTN","DVBACER1",210,0)
 .D EXMINFO(DVBAPEXMS,+$P(DVBAREF,",",(7-DVBAOFST)),DVBACSRT,DVBADLMT,.DVBASPCG)
"RTN","DVBACER1",211,0)
 K DVBAINFO,VADM
"RTN","DVBACER1",212,0)
 Q
"RTN","DVBACER1",213,0)
 ;
"RTN","DVBACER1",214,0)
 ;Input  DVBAPEXMS - 1/0 Indicates if only pending exams report
"RTN","DVBACER1",215,0)
 ;       DVBAEIEN  - IEN of Exam (396.4)
"RTN","DVBACER1",216,0)
 ;       DVBACSRT  - 1/0 if report should be sorted by Contractor
"RTN","DVBACER1",217,0)
 ;                   Name (1) or by Request Date (0)
"RTN","DVBACER1",218,0)
 ;       DVBADLMT  - 1/0 if report output should be delimitted
"RTN","DVBACER1",219,0)
 ;                   Delimitted Output (1) or Formatted Output (0)
"RTN","DVBACER1",220,0)
 ;       DVBASPCG  - Array to store spacing (By Ref)
"RTN","DVBACER1",221,0)
 ;Output Write EXAM Info for request to report
"RTN","DVBACER1",222,0)
EXMINFO(DVBAPEXMS,DVBAEIEN,DVBACSRT,DVBADLMT,DVBASPCG) ;Display Exam Info
"RTN","DVBACER1",223,0)
 N DVBAEXM
"RTN","DVBACER1",224,0)
 ;Retrieve exam info for display on report
"RTN","DVBACER1",225,0)
 D GETS^DIQ(396.4,DVBAEIEN_",",".03;100;101;102","EI","DVBAEXM")
"RTN","DVBACER1",226,0)
 W:('DVBADLMT) !
"RTN","DVBACER1",227,0)
 W ?DVBASPCG(5),$G(DVBAEXM(396.4,DVBAEIEN_",",.03,"E")),$S(DVBADLMT:"^",1:"")
"RTN","DVBACER1",228,0)
 W:('DVBACSRT) ?DVBASPCG(6),$G(DVBAEXM(396.4,DVBAEIEN_",",100,"E")),$S(DVBADLMT:"^",1:"")
"RTN","DVBACER1",229,0)
 W ?DVBASPCG(7),$$FMTE^XLFDT($P($G(DVBAEXM(396.4,DVBAEIEN_",",101,"I")),"@"),"M"),$S(DVBADLMT:"^",1:"")
"RTN","DVBACER1",230,0)
 W:('DVBAPEXMS) ?DVBASPCG(8),$P($G(DVBAEXM(396.4,DVBAEIEN_",",102,"E")),"@")
"RTN","DVBACER1",231,0)
 Q
"RTN","DVBACER1",232,0)
 ;
"RTN","DVBACER1",233,0)
 ;Input  DVBACSRT - 1/0 if report should be sorted by Contractor
"RTN","DVBACER1",234,0)
 ;                  Name (1) or by Request Date (0)
"RTN","DVBACER1",235,0)
 ;       DVBADLMT - 1/0 if report output should be delimitted
"RTN","DVBACER1",236,0)
 ;                  Delimitted Output (1) or Formatted Output (0)
"RTN","DVBACER1",237,0)
 ;       DVBASPCG - Array to store spacing (By Ref)
"RTN","DVBACER1",238,0)
DRPTSPCG(DVBACSRT,DVBADLMT,DVBASPCG) ;Setup Detailed Report Spacing
"RTN","DVBACER1",239,0)
 N DVBAOFST,DVBAI
"RTN","DVBACER1",240,0)
 S DVBAOFST=0 S:('DVBACSRT&'DVBADLMT) DVBAOFST=3
"RTN","DVBACER1",241,0)
 K DVBASPCG
"RTN","DVBACER1",242,0)
 D:(DVBADLMT)
"RTN","DVBACER1",243,0)
 .F DVBAI=1:1:8  S DVBASPCG(DVBAI)=0
"RTN","DVBACER1",244,0)
 D:('DVBADLMT)
"RTN","DVBACER1",245,0)
 .S DVBASPCG(1)=3-DVBAOFST,DVBASPCG(2)=23-DVBAOFST
"RTN","DVBACER1",246,0)
 .S DVBASPCG(3)=36-DVBAOFST,DVBASPCG(4)=68-DVBAOFST
"RTN","DVBACER1",247,0)
 .S DVBASPCG(5)=5-DVBAOFST,DVBASPCG(6)=70-DVBAOFST
"RTN","DVBACER1",248,0)
 .S:(DVBACSRT) DVBASPCG(7)=70-DVBAOFST,DVBASPCG(8)=91-DVBAOFST
"RTN","DVBACER1",249,0)
 .S:('DVBACSRT) DVBASPCG(7)=101,DVBASPCG(8)=121
"RTN","DVBACER1",250,0)
 Q
"RTN","DVBACER1",251,0)
 ;
"RTN","DVBACER1",252,0)
 ;Input  DVBARIEN - IEN of Request (396.3) associated with Exam
"RTN","DVBACER1",253,0)
 ;       DVBACNDE - CNTRCTR Node for Exam IEN in 396.4
"RTN","DVBACER1",254,0)
 ;       DVBAGLBL - Global Reference for Requests Counted
"RTN","DVBACER1",255,0)
 ;       DVBARSLTS - Global Reference for results
"RTN","DVBACER1",256,0)
 ;Output Global Array Entries Updated for Contractor if applicable
"RTN","DVBACER1",257,0)
 ;       ^TMP($J,"DVBATRPTS") / ^TMP("DVBATRSLTS",$J)
"RTN","DVBACER1",258,0)
SRPTS(DVBARIEN,DVBACNDE,DVBAGLBL,DVBARSLTS) ;Summary Report Processing
"RTN","DVBACER1",259,0)
 N DVBACNTR,DVBACNME
"RTN","DVBACER1",260,0)
 S DVBACNME=$P($G(^DVB(396.45,+$P(DVBACNDE,"^"),0)),"^")
"RTN","DVBACER1",261,0)
 ;Retrieve current number of exams referred by contractor
"RTN","DVBACER1",262,0)
 S DVBACNTR=$P($G(@DVBARSLTS@(DVBACNME,+$P(DVBACNDE,"^"))),"^",3)
"RTN","DVBACER1",263,0)
 ;Increment Number of Exams referred for contractor
"RTN","DVBACER1",264,0)
 S $P(@DVBARSLTS@(DVBACNME,+$P(DVBACNDE,"^")),"^",3)=DVBACNTR+1
"RTN","DVBACER1",265,0)
 ;Increment 2507 Request Counter if IEN NOT already counted for Contractor
"RTN","DVBACER1",266,0)
 D:('$D(@DVBAGLBL@(+$P(DVBACNDE,"^"),DVBARIEN)))
"RTN","DVBACER1",267,0)
 .S @DVBAGLBL@(+$P(DVBACNDE,"^"),DVBARIEN)=""  ;Add request IEN to list
"RTN","DVBACER1",268,0)
 .S DVBACNTR=$P($G(@DVBARSLTS@(DVBACNME,+$P(DVBACNDE,"^"))),"^",4)
"RTN","DVBACER1",269,0)
 .;Increment # of 2507 Request referred to contractor
"RTN","DVBACER1",270,0)
 .S $P(@DVBARSLTS@(DVBACNME,+$P(DVBACNDE,"^")),"^",4)=DVBACNTR+1
"RTN","DVBACER1",271,0)
 Q
"RTN","DVBACER1",272,0)
 ;
"RTN","DVBACER1",273,0)
 ;Input  DVBACNDE - CNTRCTR Node for Exam IEN in 396.4
"RTN","DVBACER1",274,0)
 ;       DVBAGLBL - Global Reference for Timeliness counters
"RTN","DVBACER1",275,0)
 ;       DVBARSLTS - Global Reference for results
"RTN","DVBACER1",276,0)
 ;Output Global Array Entries Updated for Contractor if applicable
"RTN","DVBACER1",277,0)
 ;       ^TMP($J,"DVBATRPTS") / ^TMP("DVBATRSLTS",$J)
"RTN","DVBACER1",278,0)
TRPTS(DVBACNDE,DVBAGLBL,DVBARSLTS,DVBATVAL) ;Timeliness Report Processing
"RTN","DVBACER1",279,0)
 N DVBACNME,DVBANDAYS,DVBANEXMS
"RTN","DVBACER1",280,0)
 ;Ignore Exams NOT returned (Checked-In) by Contractor
"RTN","DVBACER1",281,0)
 S DVBANDAYS=+$G(@DVBAGLBL@(+$P(DVBACNDE,"^"),"DAYS"))
"RTN","DVBACER1",282,0)
 S DVBANEXMS=+$G(@DVBAGLBL@(+$P(DVBACNDE,"^"),"EXMS"))
"RTN","DVBACER1",283,0)
 ;Increment Timeliness Counter (Total # of Days)
"RTN","DVBACER1",284,0)
 S @DVBAGLBL@(+$P(DVBACNDE,"^"),"DAYS")=DVBANDAYS+DVBATVAL
"RTN","DVBACER1",285,0)
 ;Increment Number of Exams Found
"RTN","DVBACER1",286,0)
 S @DVBAGLBL@(+$P(DVBACNDE,"^"),"EXMS")=DVBANEXMS+1
"RTN","DVBACER1",287,0)
 S DVBACNME=$P($G(^DVB(396.45,+$P(DVBACNDE,"^"),0)),"^")
"RTN","DVBACER1",288,0)
 ;Update Average Timeliness result for Contractor
"RTN","DVBACER1",289,0)
 S $P(@DVBARSLTS@(DVBACNME,+$P(DVBACNDE,"^")),"^",3)=$FN((DVBANDAYS+DVBATVAL)/(DVBANEXMS+1),"",0)
"RTN","DVBACER1",290,0)
 Q
"RTN","DVBACER1",291,0)
 ;
"RTN","DVBACER1",292,0)
TRPTS2(DVBACNDE) ;Timeliness include logic
"RTN","DVBACER1",293,0)
 N DVBACNME,DVBATVAL,DVBANDAYS,DVBANEXMS,X1,X2,X,%Y
"RTN","DVBACER1",294,0)
 N DVBAEXM2,STAT
"RTN","DVBACER1",295,0)
 K ^TMP($J,"DVBACER1.FLAG")
"RTN","DVBACER1",296,0)
 D GETS^DIQ(396.4,DVBAEIEN_",",".03;.04;100;101;102","EI","DVBAEXM2")
"RTN","DVBACER1",297,0)
 S STAT=$G(DVBAEXM2(396.4,DVBAEIEN_",",.04,"I"))
"RTN","DVBACER1",298,0)
 S CNTR=$G(DVBAEXM2(396.4,DVBAEIEN_",",100,"I")) S:$G(CNTR)="" CNTR="X"
"RTN","DVBACER1",299,0)
 S X1=$P(DVBACNDE,"^",3),X2=$P(DVBACNDE,"^",2) D ^%DTC
"RTN","DVBACER1",300,0)
 I $P(DVBACNDE,"^",3)="" S ^TMP($J,"DVBACER1.FLAG",CNTR)=1
"RTN","DVBACER1",301,0)
 S DVBATVAL=X  ;# Days between CheckIn and CheckOut
"RTN","DVBACER1",302,0)
 S:DVBATVAL="" DVBATVAL=0
"RTN","DVBACER1",303,0)
 S ^TMP($J,"DVBACER1",CNTR,DVBATVAL)=DVBACNDE_"|"_STAT
"RTN","DVBACER1",304,0)
 Q
"RTN","DVBACER1",305,0)
 ;
"RTN","DVBACER1",306,0)
TRPTS3(DVBAGLBL,DVBARSLTS) ;Timeliness calculation section
"RTN","DVBACER1",307,0)
 Q:'$D(^TMP($J,"DVBACER1"))
"RTN","DVBACER1",308,0)
 N OPENEXM,CNTR,DVBATVAL
"RTN","DVBACER1",309,0)
 S CNTR="" F  S CNTR=$O(^TMP($J,"DVBACER1",CNTR)) Q:CNTR=""  D
"RTN","DVBACER1",310,0)
 .Q:CNTR="X"
"RTN","DVBACER1",311,0)
 .Q:$G(^TMP($J,"DVBACER1.FLAG",CNTR))=1
"RTN","DVBACER1",312,0)
 .S OPENEXM(CNTR)=0
"RTN","DVBACER1",313,0)
 .S DVBATVAL="" F  S DVBATVAL=$O(^TMP($J,"DVBACER1",CNTR,DVBATVAL)) Q:DVBATVAL=""!(OPENEXM(CNTR)=1)  D
"RTN","DVBACER1",314,0)
 ..I $P(^TMP($J,"DVBACER1",CNTR,DVBATVAL),"|",2)'="C" S OPENEXM(CNTR)=1 Q
"RTN","DVBACER1",315,0)
 S CNTR="" F  S CNTR=$O(OPENEXM(CNTR)) Q:CNTR=""  D
"RTN","DVBACER1",316,0)
 .Q:OPENEXM(CNTR)=1
"RTN","DVBACER1",317,0)
 .S DVBATVAL=$O(^TMP($J,"DVBACER1",CNTR,""),-1),DVBACNDE=$P(^TMP($J,"DVBACER1",CNTR,DVBATVAL),"|",1) D 
"RTN","DVBACER1",318,0)
 ..Q:DVBATVAL=0
"RTN","DVBACER1",319,0)
 ..D TRPTS(DVBACNDE,DVBAGLBL,DVBARSLTS,DVBATVAL)
"RTN","DVBACER1",320,0)
 K ^TMP($J,"DVBACER1")
"RTN","DVBACER1",321,0)
 K ^TMP($J,"DVBACER1.FLAG")
"RTN","DVBACER1",322,0)
 ;
"RTN","DVBACER1",323,0)
GETHFS() ;Get HFS File Name
"RTN","DVBACER1",324,0)
 N DVBAH
"RTN","DVBACER1",325,0)
 S DVBAH=$H
"RTN","DVBACER1",326,0)
 Q "DVBA_"_$J_"_"_$P(DVBAH,",")_"_"_$P(DVBAH,",",2)_".DAT"
"RTN","DVBACER1",327,0)
 ;
"RTN","DVBACER1",328,0)
OPENHFS(DVBAHNDL,DVBAHFS,DVBAMODE,DVBARSLTS) ;Open HFS File
"RTN","DVBACER1",329,0)
 N DVBAERR,POP
"RTN","DVBACER1",330,0)
 S DVBAERR=0
"RTN","DVBACER1",331,0)
 D OPEN^%ZISH(DVBAHNDL,,DVBAHFS,$G(DVBAMODE,"W")) D:POP  Q:POP
"RTN","DVBACER1",332,0)
 .S DVBAERR=1,@DVBARSLTS@(1)="0^Unable to open HFS file."
"RTN","DVBACER1",333,0)
 Q DVBAERR
"RTN","DVBACER1",334,0)
 ;
"RTN","DVBACER1",335,0)
CLOSEHFS(DVBAHNDL,DVBAHFS,DVBARSLTS) ;Close HFS and unload data
"RTN","DVBACER1",336,0)
 N DVBADEL,X,%ZIS
"RTN","DVBACER1",337,0)
 D CLOSE^%ZISH(DVBAHNDL)
"RTN","DVBACER1",338,0)
 S DVBADEL(DVBAHFS)=""
"RTN","DVBACER1",339,0)
 S X=$$FTG^%ZISH(,DVBAHFS,$NA(@DVBARSLTS@(1)),4)
"RTN","DVBACER1",340,0)
 S X=$$DEL^%ZISH(,$NA(DVBADEL))
"RTN","DVBACER1",341,0)
 Q
"RTN","DVBACER1",342,0)
 ;
"RTN","DVBAXML")
0^1^B4264387^n/a
"RTN","DVBAXML",1,0)
DVBAXML ;ALB/GAK - CAPRI Exam Complete Email Driver ; 8/29/13 10:39am
"RTN","DVBAXML",2,0)
 ;;2.7;AMIE;**186**;Apr 10, 1995;Build 21
"RTN","DVBAXML",3,0)
 ;
"RTN","DVBAXML",4,0)
 ;
"RTN","DVBAXML",5,0)
FILEIN(MSG,EXAMIEN,DAS,XML) ;Entry point
"RTN","DVBAXML",6,0)
 ;
"RTN","DVBAXML",7,0)
 ;RPC: DVBA CAPRI EXAM XML
"RTN","DVBAXML",8,0)
 ;
"RTN","DVBAXML",9,0)
 ; Y Returns successful filing status or error message
"RTN","DVBAXML",10,0)
 ; EXAMIEN is the IEN of the 2507 EXAM file entry #396.4
"RTN","DVBAXML",11,0)
 ; DAS is the XML DAS Conformation message
"RTN","DVBAXML",12,0)
 ; XML is the array list format of the template being stored
"RTN","DVBAXML",13,0)
 ;
"RTN","DVBAXML",14,0)
 S MSG=""
"RTN","DVBAXML",15,0)
 I $G(EXAMIEN)="" S MSG="ERROR EXAM IEN IS MISSING" Q MSG
"RTN","DVBAXML",16,0)
 I $G(DAS)="" S MSG="ERROR DAS Conformation IS MISSING" Q MSG
"RTN","DVBAXML",17,0)
 I $D(XML)<10 S MSG="ERROR XML MESSAGE IS MISSING" Q MSG
"RTN","DVBAXML",18,0)
 ;
"RTN","DVBAXML",19,0)
 N WPERR,ERRMSG,DVBAFDA,DVBAERR,DATTIM,Y,X,%,%H
"RTN","DVBAXML",20,0)
 ;
"RTN","DVBAXML",21,0)
 S %H=$H
"RTN","DVBAXML",22,0)
 D YX^%DTC
"RTN","DVBAXML",23,0)
 S DATTIM=X_%
"RTN","DVBAXML",24,0)
 ;
"RTN","DVBAXML",25,0)
 S DAS=$E(DAS,1,250)
"RTN","DVBAXML",26,0)
 ;
"RTN","DVBAXML",27,0)
 ;
"RTN","DVBAXML",28,0)
 D WP^DIE(396.4,EXAMIEN_",",72,"K","XML","WPERR")
"RTN","DVBAXML",29,0)
 I $D(WPERR) D  Q MSG
"RTN","DVBAXML",30,0)
 . S ERRMSG=""
"RTN","DVBAXML",31,0)
 . S ERRMSG=$G(WPERR("DIERR",1,"TEXT",1))
"RTN","DVBAXML",32,0)
 . S MSG="ERROR XML MESSAGE DID NOT FILE "_ERRMSG
"RTN","DVBAXML",33,0)
 S MSG="SUCCESSFUL"
"RTN","DVBAXML",34,0)
 ;
"RTN","DVBAXML",35,0)
 S DVBAFDA(396.4,EXAMIEN_",",73)=DAS
"RTN","DVBAXML",36,0)
 S DVBAFDA(396.4,EXAMIEN_",",74)=DATTIM
"RTN","DVBAXML",37,0)
 D FILE^DIE("","DVBAFDA","DVBAERR")
"RTN","DVBAXML",38,0)
 ;
"RTN","DVBAXML",39,0)
 ;
"RTN","DVBAXML",40,0)
 Q MSG
"RTN","DVBAXML",41,0)
LINK(RV,EXAMIEN,TIUIEN) ;Link Exam TIU document
"RTN","DVBAXML",42,0)
 ;
"RTN","DVBAXML",43,0)
 ; RPC: DVBA CAPRI EXAM LINK TIU
"RTN","DVBAXML",44,0)
 ;
"RTN","DVBAXML",45,0)
 ; RV - return value; returns 1 if the exam has been successfully
"RTN","DVBAXML",46,0)
 ;      linked to the TIU Document; otherwise return 0^error message
"RTN","DVBAXML",47,0)
 ; EXAMIEN - the exam ien in CAPRI TEMPLATES #396.17
"RTN","DVBAXML",48,0)
 ; TIUIEN  - the tiu ien in TIU DOCUMENT #8925
"RTN","DVBAXML",49,0)
 ;
"RTN","DVBAXML",50,0)
 I +$G(EXAMIEN)=0 S RV="0"_U_"EXAM IEN IS REQUIRED" Q
"RTN","DVBAXML",51,0)
 I +$G(TIUIEN)=0 S RV="0"_U_"TIU IEN IS REQUIRED" Q
"RTN","DVBAXML",52,0)
 ;
"RTN","DVBAXML",53,0)
 N FDAROOT,MSGROOT
"RTN","DVBAXML",54,0)
 ;
"RTN","DVBAXML",55,0)
 S FDAROOT(396.17,EXAMIEN_",",23)="`"_TIUIEN
"RTN","DVBAXML",56,0)
 D FILE^DIE("E","FDAROOT","MSGROOT")
"RTN","DVBAXML",57,0)
 ;
"RTN","DVBAXML",58,0)
 I $D(MSGROOT)=0 S RV="1"
"RTN","DVBAXML",59,0)
 E  S RV="0"_U_"FAILED TO BUILD LINK FROM EXAM TO TIU"
"RTN","DVBAXML",60,0)
 Q
"RTN","DVBAXML",61,0)
GETEXAM(RV,TIUIEN) ;Return TIU IEN
"RTN","DVBAXML",62,0)
 ;
"RTN","DVBAXML",63,0)
 ; RPC: DVBA CAPRI GET EXAM IEN
"RTN","DVBAXML",64,0)
 ;
"RTN","DVBAXML",65,0)
 ; RV - return value; returns a integer greater than zero if the exam
"RTN","DVBAXML",66,0)
 ;      can be found; otherwise return -1^error message
"RTN","DVBAXML",67,0)
 ; TIUIEN - the tiu ien in TIU DOCUMENT #8925
"RTN","DVBAXML",68,0)
 ;
"RTN","DVBAXML",69,0)
 I +$G(TIUIEN)=0 S RV="-1"_U_"TIU IEN IS REQUIRED" Q
"RTN","DVBAXML",70,0)
 ;
"RTN","DVBAXML",71,0)
 S RV=$O(^DVB(396.17,"TIU",TIUIEN,0))
"RTN","DVBAXML",72,0)
 I +RV<=0 S RV="-1"_U_"TIU DOCUMENT NOT CROSS REFERENCED"
"RTN","DVBAXML",73,0)
 Q
"SEC","^DIC",396.17,396.17,0,"AUDIT")
@
"SEC","^DIC",396.17,396.17,0,"DD")
@
"SEC","^DIC",396.17,396.17,0,"DEL")
@
"SEC","^DIC",396.17,396.17,0,"LAYGO")
@
"SEC","^DIC",396.17,396.17,0,"RD")
@
"SEC","^DIC",396.17,396.17,0,"WR")
@
"UP",396.4,396.472,-1)
396.4^3
"UP",396.4,396.472,0)
396.472
"VER")
8.0^22.0
"^DD",396.17,396.17,0)
FIELD^^23^23
"^DD",396.17,396.17,0,"DDA")
N
"^DD",396.17,396.17,0,"DT")
3140320
"^DD",396.17,396.17,0,"ID",9)
W:$D(^(4)) "   ",$P(^(4),U,1)
"^DD",396.17,396.17,0,"IX","AC",396.17,16)

"^DD",396.17,396.17,0,"IX","AT",396.17,2)

"^DD",396.17,396.17,0,"IX","B",396.17,.01)

"^DD",396.17,396.17,0,"IX","C",396.17,5)

"^DD",396.17,396.17,0,"IX","FT",396.17,9)

"^DD",396.17,396.17,0,"IX","ID",396.1715,2)

"^DD",396.17,396.17,0,"IX","RS",396.17,11)

"^DD",396.17,396.17,0,"IX","TR",396.17,10)

"^DD",396.17,396.17,0,"NM","CAPRI TEMPLATES")
 
"^DD",396.17,396.17,0,"PT",396.4,1)

"^DD",396.17,396.17,0,"VRPK")
DVBA
"^DD",396.17,396.17,.001,0)
NUMBER^NJ12,0a^^ ^K:+X'=X!(X>999999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",396.17,396.17,.001,3)
Type a Number between 0 and 999999999999, 0 Decimal Digits
"^DD",396.17,396.17,.001,21,0)
^^2^2^3030530^
"^DD",396.17,396.17,.001,21,1,0)
This field is used to maintain a tracking ID # used internally in 
"^DD",396.17,396.17,.001,21,2,0)
the CAPRI Delphi client.
"^DD",396.17,396.17,.001,"AUDIT")
e
"^DD",396.17,396.17,.001,"DT")
3060428
"^DD",396.17,396.17,.01,0)
NAME^P2'a^DPT(^0;1^Q
"^DD",396.17,396.17,.01,1,0)
^.1
"^DD",396.17,396.17,.01,1,1,0)
396.17^B
"^DD",396.17,396.17,.01,1,1,1)
S ^DVB(396.17,"B",$E(X,1,30),DA)=""
"^DD",396.17,396.17,.01,1,1,2)
K ^DVB(396.17,"B",$E(X,1,30),DA)
"^DD",396.17,396.17,.01,3)
 
"^DD",396.17,396.17,.01,21,0)
^.001^1^1^3050428^^
"^DD",396.17,396.17,.01,21,1,0)
Pointer field to the PATIENT (#2) file to link the document to a patient.
"^DD",396.17,396.17,.01,"AUDIT")
e
"^DD",396.17,396.17,.01,"DT")
3060428
"^DD",396.17,396.17,2,0)
AUTHOR^P200'^VA(200,^0;2^Q
"^DD",396.17,396.17,2,1,0)
^.1
"^DD",396.17,396.17,2,1,1,0)
396.17^AT
"^DD",396.17,396.17,2,1,1,1)
S ^DVB(396.17,"AT",$E(X,1,30),DA)=""
"^DD",396.17,396.17,2,1,1,2)
K ^DVB(396.17,"AT",$E(X,1,30),DA)
"^DD",396.17,396.17,2,1,1,"DT")
3030530
"^DD",396.17,396.17,2,21,0)
^^2^2^3030530^
"^DD",396.17,396.17,2,21,1,0)
Pointer field to NEW PERSON (#200) file to link document to a user 
"^DD",396.17,396.17,2,21,2,0)
responsible for managing the document in CAPRI.
"^DD",396.17,396.17,2,"DT")
3030530
"^DD",396.17,396.17,3,0)
DATE/TIME ENTERED^Da^^0;3^S %DT="ESTR" D ^%DT S X=Y K:Y<1 X
"^DD",396.17,396.17,3,21,0)
^^2^2^3030530^
"^DD",396.17,396.17,3,21,1,0)
This field is used to record the exact date/time the document was 
"^DD",396.17,396.17,3,21,2,0)
originally started.  
"^DD",396.17,396.17,3,"AUDIT")
e
"^DD",396.17,396.17,3,"DT")
3060428
"^DD",396.17,396.17,4,0)
DATE/TIME UPDATED^Da^^0;4^S %DT="ESTR" D ^%DT S X=Y K:Y<1 X
"^DD",396.17,396.17,4,21,0)
^^4^4^3030530^
"^DD",396.17,396.17,4,21,1,0)
This field records the last time data was saved back to VistA.  It will 
"^DD",396.17,396.17,4,21,2,0)
be updated during auto-saves, at signature, and if the user saves their 
"^DD",396.17,396.17,4,21,3,0)
document from within CAPRI.  It will not be updated if a reviewer works 
"^DD",396.17,396.17,4,21,4,0)
with the document unless information is changed in the form fields.
"^DD",396.17,396.17,4,"AUDIT")
e
"^DD",396.17,396.17,4,"DT")
3060428
"^DD",396.17,396.17,5,0)
DATE/TIME LOCKED^D^^0;5^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",396.17,396.17,5,1,0)
^.1
"^DD",396.17,396.17,5,1,1,0)
396.17^C
"^DD",396.17,396.17,5,1,1,1)
S ^DVB(396.17,"C",$E(X,1,30),DA)=""
"^DD",396.17,396.17,5,1,1,2)
K ^DVB(396.17,"C",$E(X,1,30),DA)
"^DD",396.17,396.17,5,1,1,"DT")
3021024
"^DD",396.17,396.17,5,21,0)
^^3^3^3030530^
"^DD",396.17,396.17,5,21,1,0)
This field will be filled in at the time the note is transferred to TIU.  
"^DD",396.17,396.17,5,21,2,0)
This will prevent further modification of the document contents by 
"^DD",396.17,396.17,5,21,3,0)
reviewer or author.
"^DD",396.17,396.17,5,"DT")
3030530
"^DD",396.17,396.17,6,0)
TEMPLATES UTILIZED^396.176^^1;0
"^DD",396.17,396.17,6,21,0)
^^3^3^3030530^
"^DD",396.17,396.17,6,21,1,0)
A document may be made up of more than one of the predefined C&P 
"^DD",396.17,396.17,6,21,2,0)
templates.  This word processing field will store each template utilized
"^DD",396.17,396.17,6,21,3,0)
during the documentation process on a separate line.
"^DD",396.17,396.17,7,0)
TIU DOCUMENT NUMBER^NJ15,0^^2;1^K:+X'=X!(X>999999999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",396.17,396.17,7,3)
Type a Number between 0 and 999999999999999, 0 Decimal Digits
"^DD",396.17,396.17,7,21,0)
^^3^3^3030530^
"^DD",396.17,396.17,7,21,1,0)
After the document is completed and transferred into TIU as an ASCII 
"^DD",396.17,396.17,7,21,2,0)
report, the new TIU file/document number will be stored in this field for 
"^DD",396.17,396.17,7,21,3,0)
auditing/validation purposes later. 
"^DD",396.17,396.17,7,"DT")
3030530
"^DD",396.17,396.17,8,0)
FORM DATA^396.178^^3;0
"^DD",396.17,396.17,8,21,0)
^.001^6^6^3030530^^^
"^DD",396.17,396.17,8,21,1,0)
All of the MS Windows generated ascii code to re-populate GUI form fields
"^DD",396.17,396.17,8,21,2,0)
will be stored in this field.  A standard Windows API is used to generate
"^DD",396.17,396.17,8,21,3,0)
this text.
"^DD",396.17,396.17,8,21,4,0)
 
"^DD",396.17,396.17,8,21,5,0)
WARNING:  DO NOT EDIT THIS FIELD OR THE DOCUMENT MAY BECOME CORRUPT AND
"^DD",396.17,396.17,8,21,6,0)
INACCESSIBLE FROM THE GUI.
"^DD",396.17,396.17,8.5,0)
FORM SAVE BUFFER^396.19D^^9;0
"^DD",396.17,396.17,8.5,21,0)
^.001^5^5^3050314^^^^
"^DD",396.17,396.17,8.5,21,1,0)
Snapshots of the user's template data each time they exit the template in 
"^DD",396.17,396.17,8.5,21,2,0)
the GUI will be stored here.  They'll be used in case of template 
"^DD",396.17,396.17,8.5,21,3,0)
corruption or if the user wishes to revert to an earlier version of their 
"^DD",396.17,396.17,8.5,21,4,0)
work.  Once a form is signed and successfully in TIU, then the data in 
"^DD",396.17,396.17,8.5,21,5,0)
this field will be removed.
"^DD",396.17,396.17,9,0)
FORM TITLE^F^^4;1^K:$L(X)>250!($L(X)<1) X
"^DD",396.17,396.17,9,1,0)
^.1
"^DD",396.17,396.17,9,1,1,0)
396.17^FT
"^DD",396.17,396.17,9,1,1,1)
S ^DVB(396.17,"FT",$E(X,1,30),DA)=""
"^DD",396.17,396.17,9,1,1,2)
K ^DVB(396.17,"FT",$E(X,1,30),DA)
"^DD",396.17,396.17,9,1,1,"DT")
3030530
"^DD",396.17,396.17,9,3)
Answer must be 1-250 characters in length.
"^DD",396.17,396.17,9,21,0)
^.001^2^2^3031009^^
"^DD",396.17,396.17,9,21,1,0)
The text in this field will be displayed in CAPRI as the document title 
"^DD",396.17,396.17,9,21,2,0)
in lists and reports.
"^DD",396.17,396.17,9,"DT")
3031009
"^DD",396.17,396.17,10,0)
TRANSCRIBER^P200'^VA(200,^5;1^Q
"^DD",396.17,396.17,10,1,0)
^.1
"^DD",396.17,396.17,10,1,1,0)
396.17^TR
"^DD",396.17,396.17,10,1,1,1)
S ^DVB(396.17,"TR",$E(X,1,30),DA)=""
"^DD",396.17,396.17,10,1,1,2)
K ^DVB(396.17,"TR",$E(X,1,30),DA)
"^DD",396.17,396.17,10,1,1,"DT")
3030530
"^DD",396.17,396.17,10,21,0)
^^3^3^3030530^
"^DD",396.17,396.17,10,21,1,0)
If the document is created for someone, the individual who created the 
"^DD",396.17,396.17,10,21,2,0)
document will be placed into this field.  For example, a clerk may create 
"^DD",396.17,396.17,10,21,3,0)
a document for a physician in advance of an appointment.
"^DD",396.17,396.17,10,"DT")
3030530
"^DD",396.17,396.17,11,0)
REVIEW STATUS^Sa^P:REVIEW PENDING;N:NOT REQUIRED;S:SENT BACK;C:COMPLETE;D:DRAFT/NOT READY;A:AWAITING SIGNATURE;U:UNCOSIGNED;L:DELETED;^5;2^Q
"^DD",396.17,396.17,11,1,0)
^.1
"^DD",396.17,396.17,11,1,1,0)
396.17^RS
"^DD",396.17,396.17,11,1,1,1)
S ^DVB(396.17,"RS",$E(X,1,30),DA)=""
"^DD",396.17,396.17,11,1,1,2)
K ^DVB(396.17,"RS",$E(X,1,30),DA)
"^DD",396.17,396.17,11,1,1,"DT")
3030530
"^DD",396.17,396.17,11,21,0)
^.001^7^7^3060519^^^
"^DD",396.17,396.17,11,21,1,0)
This field is used when the reviewer functionality is activated within 
"^DD",396.17,396.17,11,21,2,0)
the CAPRI GUI to find documents that may be new and need review.  In 
"^DD",396.17,396.17,11,21,3,0)
addition, if the field is set to SENT BACK, then the original author will 
"^DD",396.17,396.17,11,21,4,0)
be notified in the CAPRI GUI that they have a document returned to them 
"^DD",396.17,396.17,11,21,5,0)
from the reviewer.  The field will be set to the current document status 
"^DD",396.17,396.17,11,21,6,0)
and may be cycled through several values before the document is finally 
"^DD",396.17,396.17,11,21,7,0)
completed.
"^DD",396.17,396.17,11,"AUDIT")
y
"^DD",396.17,396.17,11,"DT")
3060519
"^DD",396.17,396.17,14,0)
REVIEW DATE/TIME^396.1714D^^6;0
"^DD",396.17,396.17,15,0)
FORM SAVED DATA^396.1715^^7;0
"^DD",396.17,396.17,16,0)
LOCKED?^S^0:NO;1:YES;^8;1^Q
"^DD",396.17,396.17,16,1,0)
^.1
"^DD",396.17,396.17,16,1,1,0)
396.17^AC
"^DD",396.17,396.17,16,1,1,1)
S ^DVB(396.17,"AC",$E(X,1,30),DA)=""
"^DD",396.17,396.17,16,1,1,2)
K ^DVB(396.17,"AC",$E(X,1,30),DA)
"^DD",396.17,396.17,16,1,1,"DT")
3031113
"^DD",396.17,396.17,16,21,0)
^^3^3^3031113^
"^DD",396.17,396.17,16,21,1,0)
This field is used to find forms that require some action by the user.
"^DD",396.17,396.17,16,21,2,0)
Once the template has been uploaded to TIU, the value in this field will 
"^DD",396.17,396.17,16,21,3,0)
be deleted.
"^DD",396.17,396.17,16,"DT")
3031113
"^DD",396.17,396.17,17,0)
IN USE^F^^8;2^K:$L(X)>200!($L(X)<3) X
"^DD",396.17,396.17,17,3)
Answer must be 3-200 characters in length.
"^DD",396.17,396.17,17,21,0)
^^11^11^3050128^
"^DD",396.17,396.17,17,21,1,0)
Once a form has been opened in the GUI, this field will be populated with 
"^DD",396.17,396.17,17,21,2,0)
identifying information - user DUZ^date/time file was opened.  It 
"^DD",396.17,396.17,17,21,3,0)
will be left in edit mode in the GUI fileman components until the user 
"^DD",396.17,396.17,17,21,4,0)
exits.  The data will then be cleared and the field exited on the GUI 
"^DD",396.17,396.17,17,21,5,0)
side. If the application is terminated prematurely, the lock is
"^DD",396.17,396.17,17,21,6,0)
automatically dropped.
"^DD",396.17,396.17,17,21,7,0)
 
"^DD",396.17,396.17,17,21,8,0)
By leaving the field in edit mode throughout the session, until the user 
"^DD",396.17,396.17,17,21,9,0)
closes their template, other CAPRI instances will be able to tell that 
"^DD",396.17,396.17,17,21,10,0)
someone is using the record and prevent other users from changing the 
"^DD",396.17,396.17,17,21,11,0)
data until the first user exits.
"^DD",396.17,396.17,17,"DT")
3050128
"^DD",396.17,396.17,18,0)
AMIE EXAMS^396.1718P^^10;0
"^DD",396.17,396.17,19,0)
FLAG NEW^S^0:N;1:Y;^11;1^Q
"^DD",396.17,396.17,19,"DT")
3051103
"^DD",396.17,396.17,20,0)
FLAG GREEN FLAG^S^0:N;1:Y;^11;2^Q
"^DD",396.17,396.17,20,"DT")
3051103
"^DD",396.17,396.17,21,0)
FLAG EXCLAMATION^S^0:N;1:Y;^11;3^Q
"^DD",396.17,396.17,21,"DT")
3051103
"^DD",396.17,396.17,22,0)
PERFORMANCE USE DATA^F^^12;1^K:$L(X)>250!($L(X)<1) X
"^DD",396.17,396.17,22,3)
Answer must be 1-250 characters in length.
"^DD",396.17,396.17,22,21,0)
^^4^4^3060619^
"^DD",396.17,396.17,22,21,1,0)
THIS FIELD IS USED FOR DATA ANALYSIS AND QUALITY IMPROVEMENT.
"^DD",396.17,396.17,22,21,2,0)
DATA WILL BE STORED IN THIS FORMAT:
"^DD",396.17,396.17,22,21,3,0)
MERGED TEMPATE (Y/N)^TOTAL TIME FORM WAS IN USE^DOCUMENTATION CLUSTERS^
"^DD",396.17,396.17,22,21,4,0)
DOCUMENTATION CLUSTER TIME INTERVAL
"^DD",396.17,396.17,22,"DT")
3060619
"^DD",396.17,396.17,23,0)
TIU DOCUMENT^P8925'^TIU(8925,^13;1^Q
"^DD",396.17,396.17,23,3)
Enter the TIU document for this template
"^DD",396.17,396.17,23,21,0)
^.001^1^1^3140320^^
"^DD",396.17,396.17,23,21,1,0)
This field is used to link the completed template with the TIU document.
"^DD",396.17,396.17,23,"DT")
3140320
"^DD",396.17,396.1714,0)
REVIEW DATE/TIME SUB-FIELD^^4^5
"^DD",396.17,396.1714,0,"DT")
3030530
"^DD",396.17,396.1714,0,"IX","B",396.1714,.01)

"^DD",396.17,396.1714,0,"NM","REVIEW DATE/TIME")
 
"^DD",396.17,396.1714,0,"UP")
396.17
"^DD",396.17,396.1714,.01,0)
REVIEW DATE/TIME^MDa^^0;1^S %DT="ESTR" D ^%DT S X=Y K:Y<1 X
"^DD",396.17,396.1714,.01,1,0)
^.1
"^DD",396.17,396.1714,.01,1,1,0)
396.1714^B
"^DD",396.17,396.1714,.01,1,1,1)
S ^DVB(396.17,DA(1),6,"B",$E(X,1,30),DA)=""
"^DD",396.17,396.1714,.01,1,1,2)
K ^DVB(396.17,DA(1),6,"B",$E(X,1,30),DA)
"^DD",396.17,396.1714,.01,21,0)
^^2^2^3030530^
"^DD",396.17,396.1714,.01,21,1,0)
An entry will be made here each time a new "needs review" action is 
"^DD",396.17,396.1714,.01,21,2,0)
activated in the CAPRI GUI.
"^DD",396.17,396.1714,.01,"AUDIT")
y
"^DD",396.17,396.1714,.01,"DT")
3060428
"^DD",396.17,396.1714,1,0)
REVIEWER NAME^P200'^VA(200,^0;2^Q
"^DD",396.17,396.1714,1,21,0)
^^3^3^3030530^
"^DD",396.17,396.1714,1,21,1,0)
This field will remain blank until one of the C&P Exam reviewers picks up
"^DD",396.17,396.1714,1,21,2,0)
on the document from within the GUI and activates it using their
"^DD",396.17,396.1714,1,21,3,0)
reviewer-specific dialogs.
"^DD",396.17,396.1714,1,"DT")
3030530
"^DD",396.17,396.1714,2,0)
DATE/TIME MARKED COMPLETE^D^^0;3^S %DT="ESTR" D ^%DT S X=Y K:Y<1 X
"^DD",396.17,396.1714,2,21,0)
^^2^2^3030530^
"^DD",396.17,396.1714,2,21,1,0)
Once the reviewer is satisfied with the document and transfers it to TIU, 
"^DD",396.17,396.1714,2,21,2,0)
this field will be completed automatically by the CAPRI GUI.
"^DD",396.17,396.1714,2,"DT")
3030530
"^DD",396.17,396.1714,3,0)
DATE/TIME SENT BACK^D^^0;4^S %DT="ESTR" D ^%DT S X=Y K:Y<1 X
"^DD",396.17,396.1714,3,21,0)
^^3^3^3030530^
"^DD",396.17,396.1714,3,21,1,0)
If during the review activity, the review would like the original author 
"^DD",396.17,396.1714,3,21,2,0)
to re-address the document, then this field will be populated.  
"^DD",396.17,396.1714,3,21,3,0)
Otherwise, it will remain blank.
"^DD",396.17,396.1714,3,"DT")
3030530
"^DD",396.17,396.1714,4,0)
SENT BACK COMMENTS^396.17144^^1;0
"^DD",396.17,396.1714,4,21,0)
^^4^4^3030530^
"^DD",396.17,396.1714,4,21,1,0)
This field contains a list of comments the reviewer wishes to send to the 
"^DD",396.17,396.1714,4,21,2,0)
document author.  Normally, it will contain required or suggested changes 
"^DD",396.17,396.1714,4,21,3,0)
to the document.  These comments will not be part of the final TIU/AMIE 
"^DD",396.17,396.1714,4,21,4,0)
examination report document.
"^DD",396.17,396.17144,0)
SENT BACK COMMENTS SUB-FIELD^^.01^1
"^DD",396.17,396.17144,0,"DT")
3030530
"^DD",396.17,396.17144,0,"NM","SENT BACK COMMENTS")
 
"^DD",396.17,396.17144,0,"UP")
396.1714
"^DD",396.17,396.17144,.01,0)
SENT BACK COMMENTS^W^^0;1^Q
"^DD",396.17,396.17144,.01,"DT")
3030530
"^DD",396.17,396.1715,0)
FORM SAVED DATA SUB-FIELD^^3^4
"^DD",396.17,396.1715,0,"DT")
3031002
"^DD",396.17,396.1715,0,"IX","B",396.1715,.01)

"^DD",396.17,396.1715,0,"NM","FORM SAVED DATA")
 
"^DD",396.17,396.1715,0,"UP")
396.17
"^DD",396.17,396.1715,.01,0)
CONTROL NAME^MF^^0;1^K:$L(X)>200!($L(X)<3) X
"^DD",396.17,396.1715,.01,1,0)
^.1
"^DD",396.17,396.1715,.01,1,1,0)
396.1715^B
"^DD",396.17,396.1715,.01,1,1,1)
S ^DVB(396.17,DA(1),7,"B",$E(X,1,30),DA)=""
"^DD",396.17,396.1715,.01,1,1,2)
K ^DVB(396.17,DA(1),7,"B",$E(X,1,30),DA)
"^DD",396.17,396.1715,.01,3)
Answer must be 3-200 characters in length.
"^DD",396.17,396.1715,.01,"DT")
3031002
"^DD",396.17,396.1715,1,0)
CONTROL TYPE^F^^0;2^K:$L(X)>20!($L(X)<3) X
"^DD",396.17,396.1715,1,3)
Answer must be 3-20 characters in length.
"^DD",396.17,396.1715,1,"DT")
3031001
"^DD",396.17,396.1715,2,0)
OBJECT ID^F^^0;3^K:$L(X)>15!($L(X)<1) X
"^DD",396.17,396.1715,2,1,0)
^.1
"^DD",396.17,396.1715,2,1,1,0)
396.17^ID
"^DD",396.17,396.1715,2,1,1,1)
S ^DVB(396.17,"ID",$E(X,1,30),DA(1),DA)=""
"^DD",396.17,396.1715,2,1,1,2)
K ^DVB(396.17,"ID",$E(X,1,30),DA(1),DA)
"^DD",396.17,396.1715,2,1,1,"DT")
3031001
"^DD",396.17,396.1715,2,3)
Answer must be 1-15 characters in length.
"^DD",396.17,396.1715,2,"DT")
3031001
"^DD",396.17,396.1715,3,0)
DATA^396.17153^^1;0
"^DD",396.17,396.17153,0)
DATA SUB-FIELD^^.01^1
"^DD",396.17,396.17153,0,"DT")
3031001
"^DD",396.17,396.17153,0,"NM","DATA")
 
"^DD",396.17,396.17153,0,"UP")
396.1715
"^DD",396.17,396.17153,.01,0)
DATA^WL^^0;1^Q
"^DD",396.17,396.17153,.01,"DT")
3031001
"^DD",396.17,396.1718,0)
AMIE EXAMS SUB-FIELD^^.01^1
"^DD",396.17,396.1718,0,"DT")
3050518
"^DD",396.17,396.1718,0,"IX","B",396.1718,.01)

"^DD",396.17,396.1718,0,"NM","AMIE EXAMS")
 
"^DD",396.17,396.1718,0,"UP")
396.17
"^DD",396.17,396.1718,.01,0)
AMIE EXAMS^MP396.4'^DVB(396.4,^0;1^Q
"^DD",396.17,396.1718,.01,1,0)
^.1
"^DD",396.17,396.1718,.01,1,1,0)
396.1718^B
"^DD",396.17,396.1718,.01,1,1,1)
S ^DVB(396.17,DA(1),10,"B",$E(X,1,30),DA)=""
"^DD",396.17,396.1718,.01,1,1,2)
K ^DVB(396.17,DA(1),10,"B",$E(X,1,30),DA)
"^DD",396.17,396.1718,.01,21,0)
^^2^2^3050518^
"^DD",396.17,396.1718,.01,21,1,0)
Contains references to the AMIE exams being closed at the point this exam 
"^DD",396.17,396.1718,.01,21,2,0)
template is signed in TIU.
"^DD",396.17,396.1718,.01,"DT")
3050518
"^DD",396.17,396.176,0)
TEMPLATES UTILIZED SUB-FIELD^^.01^1
"^DD",396.17,396.176,0,"DT")
3021003
"^DD",396.17,396.176,0,"NM","TEMPLATES UTILIZED")
 
"^DD",396.17,396.176,0,"UP")
396.17
"^DD",396.17,396.176,.01,0)
TEMPLATES UTILIZED^WL^^0;1^Q
"^DD",396.17,396.176,.01,"DT")
3030530
"^DD",396.17,396.178,0)
FORM DATA SUB-FIELD^^.01^1
"^DD",396.17,396.178,0,"DT")
3021001
"^DD",396.17,396.178,0,"NM","FORM DATA")
 
"^DD",396.17,396.178,0,"UP")
396.17
"^DD",396.17,396.178,.01,0)
FORM DATA^WL^^0;1^Q
"^DD",396.17,396.178,.01,"DT")
3030530
"^DD",396.17,396.19,0)
FORM SAVE BUFFER SUB-FIELD^^3^4
"^DD",396.17,396.19,0,"DT")
3050314
"^DD",396.17,396.19,0,"IX","B",396.19,.01)

"^DD",396.17,396.19,0,"NM","FORM SAVE BUFFER")
 
"^DD",396.17,396.19,0,"UP")
396.17
"^DD",396.17,396.19,.01,0)
DATE/TIME^MRDa^^0;1^S %DT="ESTR" D ^%DT S X=Y K:Y<1 X
"^DD",396.17,396.19,.01,1,0)
^.1
"^DD",396.17,396.19,.01,1,1,0)
396.19^B
"^DD",396.17,396.19,.01,1,1,1)
S ^DVB(396.17,DA(1),9,"B",$E(X,1,30),DA)=""
"^DD",396.17,396.19,.01,1,1,2)
K ^DVB(396.17,DA(1),9,"B",$E(X,1,30),DA)
"^DD",396.17,396.19,.01,3)
 
"^DD",396.17,396.19,.01,"AUDIT")
y
"^DD",396.17,396.19,.01,"DT")
3060428
"^DD",396.17,396.19,1,0)
SAVE DATA^396.191^^1;0
"^DD",396.17,396.19,2,0)
COMMENTS^F^^2;1^K:$L(X)>80!($L(X)<1) X
"^DD",396.17,396.19,2,3)
Answer must be 1-80 characters in length.
"^DD",396.17,396.19,2,"DT")
3050310
"^DD",396.17,396.19,3,0)
TEMPLATES UTILIZED^396.193^^3;0
"^DD",396.17,396.191,0)
SAVE DATA SUB-FIELD^^.01^1
"^DD",396.17,396.191,0,"DT")
3050308
"^DD",396.17,396.191,0,"NM","SAVE DATA")
 
"^DD",396.17,396.191,0,"UP")
396.19
"^DD",396.17,396.191,.01,0)
SAVE DATA^W^^0;1^Q
"^DD",396.17,396.191,.01,"DT")
3050308
"^DD",396.17,396.193,0)
TEMPLATES UTILIZED SUB-FIELD^^.01^1
"^DD",396.17,396.193,0,"DT")
3050314
"^DD",396.17,396.193,0,"NM","TEMPLATES UTILIZED")
 
"^DD",396.17,396.193,0,"UP")
396.19
"^DD",396.17,396.193,.01,0)
TEMPLATES UTILIZED^WL^^0;1^Q
"^DD",396.17,396.193,.01,"DT")
3050314
"^DD",396.4,396.4,72,0)
EXAM RESULTS XML^396.472^^3;0
"^DD",396.4,396.4,72,21,0)
^^2^2^3140324^
"^DD",396.4,396.4,72,21,1,0)
This is a file that contains VLER DAS service requests and 
"^DD",396.4,396.4,72,21,2,0)
responses.
"^DD",396.4,396.4,73,0)
XML DAS CONFIRMATION^F^^4;1^K:$L(X)>250!($L(X)<1) X
"^DD",396.4,396.4,73,3)
Answer must be 1-250 characters in length.
"^DD",396.4,396.4,73,21,0)
^^1^1^3130712^
"^DD",396.4,396.4,73,21,1,0)
This is the DAS status confirmation returned by VLER DAS.
"^DD",396.4,396.4,73,"DT")
3130712
"^DD",396.4,396.4,74,0)
XML TRANSMISSION DATE/TIME^D^^TRAN;6^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",396.4,396.4,74,3)
Enter the Date and Time of XML transmission.
"^DD",396.4,396.4,74,21,0)
^^1^1^3130712^
"^DD",396.4,396.4,74,21,1,0)
This is the system date and time stamp of when the VLER DAS XML was filed.
"^DD",396.4,396.4,74,"DT")
3130712
"^DD",396.4,396.472,0)
EXAM RESULTS XML SUB-FIELD^^.01^1
"^DD",396.4,396.472,0,"DT")
3130618
"^DD",396.4,396.472,0,"NM","EXAM RESULTS XML")

"^DD",396.4,396.472,0,"UP")
396.4
"^DD",396.4,396.472,.01,0)
EXAM RESULTS XML^Wx^^0;1
"^DD",396.4,396.472,.01,3)
This is a Zip file that contains VLER DAS web service requests and responses.
"^DD",396.4,396.472,.01,"DT")
3140324
"^DIC",396.17,396.17,0)
CAPRI TEMPLATES^396.17
"^DIC",396.17,396.17,0,"GL")
^DVB(396.17,
"^DIC",396.17,396.17,"%",0)
^1.005^^0
"^DIC",396.17,396.17,"%D",0)
^^6^6^3030603^
"^DIC",396.17,396.17,"%D",1,0)
This file holds the definitions generated by users of the CAPRI C&P 
"^DIC",396.17,396.17,"%D",2,0)
Worksheet Module (CPWM) that are used to re-generate GUI screens.  CPWM 
"^DIC",396.17,396.17,"%D",3,0)
allows point-n-click entry of C&P examinations and will store ASCII 
"^DIC",396.17,396.17,"%D",4,0)
reports in AMIE and TIU when the user has finished the documentation 
"^DIC",396.17,396.17,"%D",5,0)
process.  This file serves to track documents in progress as well as 
"^DIC",396.17,396.17,"%D",6,0)
documents that have been already completed and sent to TIU and AMIE.
"^DIC",396.17,"B","CAPRI TEMPLATES",396.17)

"BLD",8585,6)
^164
**END**
**END**

