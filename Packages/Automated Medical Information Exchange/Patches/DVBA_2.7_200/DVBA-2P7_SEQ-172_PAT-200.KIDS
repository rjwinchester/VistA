Released DVBA*2.7*200 SEQ #172
Extracted from mail message
**KIDS**:DVBA*2.7*200^

**INSTALL NAME**
DVBA*2.7*200
"BLD",10567,0)
DVBA*2.7*200^AUTOMATED MED INFO EXCHANGE^0^3170523^y
"BLD",10567,1,0)
^^4^4^3170523^
"BLD",10567,1,1,0)
This patch will update the display date for reports in CAPRI to
"BLD",10567,1,2,0)
display the report date rather than the date the report was run.
"BLD",10567,1,3,0)
It also fixes several incorrect uses of the TEMP global and 
"BLD",10567,1,4,0)
fixes formatting issues with the 7131 Requests Report.
"BLD",10567,4,0)
^9.64PA^^
"BLD",10567,6.3)
2
"BLD",10567,"KRN",0)
^9.67PA^779.2^20
"BLD",10567,"KRN",.4,0)
.4
"BLD",10567,"KRN",.401,0)
.401
"BLD",10567,"KRN",.402,0)
.402
"BLD",10567,"KRN",.403,0)
.403
"BLD",10567,"KRN",.5,0)
.5
"BLD",10567,"KRN",.84,0)
.84
"BLD",10567,"KRN",3.6,0)
3.6
"BLD",10567,"KRN",3.8,0)
3.8
"BLD",10567,"KRN",9.2,0)
9.2
"BLD",10567,"KRN",9.8,0)
9.8
"BLD",10567,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",10567,"KRN",9.8,"NM",1,0)
DVBCRPR1^^0^B11824487
"BLD",10567,"KRN",9.8,"NM",2,0)
DVBCANRS^^0^B1110899
"BLD",10567,"KRN",9.8,"NM",3,0)
DVBAB67^^0^B25055150
"BLD",10567,"KRN",9.8,"NM","B","DVBAB67",3)

"BLD",10567,"KRN",9.8,"NM","B","DVBCANRS",2)

"BLD",10567,"KRN",9.8,"NM","B","DVBCRPR1",1)

"BLD",10567,"KRN",19,0)
19
"BLD",10567,"KRN",19.1,0)
19.1
"BLD",10567,"KRN",101,0)
101
"BLD",10567,"KRN",409.61,0)
409.61
"BLD",10567,"KRN",771,0)
771
"BLD",10567,"KRN",779.2,0)
779.2
"BLD",10567,"KRN",870,0)
870
"BLD",10567,"KRN",8989.51,0)
8989.51
"BLD",10567,"KRN",8989.52,0)
8989.52
"BLD",10567,"KRN",8994,0)
8994
"BLD",10567,"KRN","B",.4,.4)

"BLD",10567,"KRN","B",.401,.401)

"BLD",10567,"KRN","B",.402,.402)

"BLD",10567,"KRN","B",.403,.403)

"BLD",10567,"KRN","B",.5,.5)

"BLD",10567,"KRN","B",.84,.84)

"BLD",10567,"KRN","B",3.6,3.6)

"BLD",10567,"KRN","B",3.8,3.8)

"BLD",10567,"KRN","B",9.2,9.2)

"BLD",10567,"KRN","B",9.8,9.8)

"BLD",10567,"KRN","B",19,19)

"BLD",10567,"KRN","B",19.1,19.1)

"BLD",10567,"KRN","B",101,101)

"BLD",10567,"KRN","B",409.61,409.61)

"BLD",10567,"KRN","B",771,771)

"BLD",10567,"KRN","B",779.2,779.2)

"BLD",10567,"KRN","B",870,870)

"BLD",10567,"KRN","B",8989.51,8989.51)

"BLD",10567,"KRN","B",8989.52,8989.52)

"BLD",10567,"KRN","B",8994,8994)

"BLD",10567,"QUES",0)
^9.62^^
"BLD",10567,"REQB",0)
^9.611^3^3
"BLD",10567,"REQB",1,0)
DVBA*2.7*189^1
"BLD",10567,"REQB",2,0)
DVBA*2.7*185^1
"BLD",10567,"REQB",3,0)
DVBA*2.7*156^1
"BLD",10567,"REQB","B","DVBA*2.7*156",3)

"BLD",10567,"REQB","B","DVBA*2.7*185",2)

"BLD",10567,"REQB","B","DVBA*2.7*189",1)

"MBREQ")
0
"PKG",223,-1)
1^1
"PKG",223,0)
AUTOMATED MED INFO EXCHANGE^DVBA^The entire AMIE package 7131/2507.
"PKG",223,20,0)
^9.402P^^
"PKG",223,22,0)
^9.49I^1^1
"PKG",223,22,1,0)
2.7^2950410^2950508
"PKG",223,22,1,"PAH",1,0)
200^3170523
"PKG",223,22,1,"PAH",1,1,0)
^^4^4^3170523
"PKG",223,22,1,"PAH",1,1,1,0)
This patch will update the display date for reports in CAPRI to
"PKG",223,22,1,"PAH",1,1,2,0)
display the report date rather than the date the report was run.
"PKG",223,22,1,"PAH",1,1,3,0)
It also fixes several incorrect uses of the TEMP global and 
"PKG",223,22,1,"PAH",1,1,4,0)
fixes formatting issues with the 7131 Requests Report.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","DVBAB67")
0^3^B25055150^B24962244
"RTN","DVBAB67",1,0)
DVBAB67 ;ALB/KLB - CAPRI PENDING REPORT - PART 2 (called by DVBAB57) ;09/09/00
"RTN","DVBAB67",2,0)
 ;;2.7;AMIE;**35,90,185,200**;Apr 10, 1995;Build 2
"RTN","DVBAB67",3,0)
 ;
"RTN","DVBAB67",4,0)
DCHGDT S DCHGDT="",DCHPTR=$P(^DGPM(XJ,0),U,17),XADMDT=$P(^(0),U,1) I DCHPTR]"",$D(^DGPM(+DCHPTR,0)) S DCHGDT=$P(^DGPM(+DCHPTR,0),U,1)
"RTN","DVBAB67",5,0)
 K DCHPTR
"RTN","DVBAB67",6,0)
 Q
"RTN","DVBAB67",7,0)
 ;
"RTN","DVBAB67",8,0)
PRINT S DOCTYPE=$S($D(^DVB(396,DA,2)):$P(^(2),U,10),1:""),DFN=$P(^DVB(396,DA,0),U,1),ADMDT=$P(^(0),U,4),RDATE=$P(^(1),U,1)
"RTN","DVBAB67",9,0)
 S XI=$G(^DPT(DFN,0)),PNAM=$P(XI,U,1),SSN=$P(XI,U,9) Q:PNAM=""!'SSN
"RTN","DVBAB67",10,0)
 S CNUM=$P($G(^DPT(DFN,.31)),U,3) S:CNUM="" CNUM="UNKNOWN"
"RTN","DVBAB67",11,0)
 I RO="Y" S CFLOC=$$STATION^DVBAUTL1(DFN),CFLOC=$S(CFLOC>0:CFLOC,1:9999) Q:CFLOC'=RONUM&(CFLOC'=0)&(CFLOC'=376)
"RTN","DVBAB67",12,0)
 K ^TMP("DVBA","ADMIT",$J)
"RTN","DVBAB67",13,0)
 F XI=0:0 S XI=$O(^DGPM("APTT1",DFN,XI)) Q:XI=""  F XJ=0:0 S XJ=$O(^DGPM("APTT1",DFN,XI,XJ)) Q:XJ=""  D DCHGDT S ^TMP("DVBA","ADMIT",$J,XADMDT,DFN)=XI_U_DCHGDT
"RTN","DVBAB67",14,0)
 I $G(DVBADLMTR)="," D PRINTDLM G CONT
"RTN","DVBAB67",15,0)
 S:SELDIV="Y" ^TMP("CAPRI",MSGCNT)="Division: "_ADIV_"^",MSGCNT=MSGCNT+1,^TMP("CAPRI",MSGCNT)="^",MSGCNT=MSGCNT+1
"RTN","DVBAB67",16,0)
 S:SELDIV="N" ^TMP("CAPRI",MSGCNT)="Original Division: "_ADIV_"^",MSGCNT=MSGCNT+1,^TMP("CAPRI",MSGCNT)="^",MSGCNT=MSGCNT+1
"RTN","DVBAB67",17,0)
 S ^TMP("CAPRI",MSGCNT)=PNAM_"^",MSGCNT=MSGCNT+1,^TMP("CAPRI",MSGCNT)="SSN: "_SSN_"^",MSGCNT=MSGCNT+1,^TMP("CAPRI",MSGCNT)="Claim no: "_CNUM_"^",MSGCNT=MSGCNT+1
"RTN","DVBAB67",18,0)
 S ^TMP("CAPRI",MSGCNT)=$S(DOCTYPE="L":" Activity date: ",1:"Admission date: ")_$$FMTE^XLFDT(ADMDT,"5DZ")_"^",MSGCNT=MSGCNT+1,^TMP("CAPRI",MSGCNT)="Request date: "_$$FMTE^XLFDT(RDATE,"5DZ")_"^"
"RTN","DVBAB67",19,0)
 ;
"RTN","DVBAB67",20,0)
CONT ; Continue print output creation
"RTN","DVBAB67",21,0)
 S DCHGDT=""
"RTN","DVBAB67",22,0)
 I $D(^TMP("DVBA","ADMIT",$J,+ADMDT,DFN)) S:DOCTYPE="A" DCHGDT=$P(^TMP("DVBA","ADMIT",$J,+ADMDT,DFN),U,2)
"RTN","DVBAB67",23,0)
 D ELAPSED
"RTN","DVBAB67",24,0)
 I $G(DVBADLMTR)="," D PRINTDL2 G ITEMS
"RTN","DVBAB67",25,0)
 I DCHGDT]""_"^" S Y=DCHGDT X ^DD("DD") S ^TMP("CAPRI",MSGCNT)="",MSGCNT=MSGCNT+1,^TMP("CAPRI",MSGCNT)="** Discharged: "_Y_"^",MSGCNT=MSGCNT+1
"RTN","DVBAB67",26,0)
 S ^TMP("CAPRI",MSGCNT)="Elapsed days: "_EDAYS_"^",MSGCNT=MSGCNT+1,^TMP("CAPRI",MSGCNT)="Items Pending:"_"^",MSGCNT=MSGCNT+1
"RTN","DVBAB67",27,0)
 ;
"RTN","DVBAB67",28,0)
ITEMS F Q=9,11,13,15,17,19,21,23,26,28 I $P(^DVB(396,DA,0),U,Q)="P" D PRINT1 Q:DVBAQUIT=1
"RTN","DVBAB67",29,0)
 S Q=7 I $P(^DVB(396,DA,1),U,Q)="P" D PRINT1 Q:DVBAQUIT=1
"RTN","DVBAB67",30,0)
 I $G(DVBADLMTR)=0 D
"RTN","DVBAB67",31,0)
 . S:$D(^DVB(396,DA,2)) ^TMP("CAPRI",MSGCNT)="Requested by: "_$S($P(^DVB(396,DA,2),U,8)]"":$P(^(2),U,8),1:" (Not specified) ")_" AT "_$S($P(^(2),U,7)]"":$P(^(2),U,7),1:" (Not specified) ")_"^",MSGCNT=MSGCNT+1
"RTN","DVBAB67",32,0)
 . S $P(^TMP("CAPRI",MSGCNT),"-")="-^",MSGCNT=MSGCNT+1
"RTN","DVBAB67",33,0)
 . S ^TMP("CAPRI",MSGCNT)="^",MSGCNT=MSGCNT+1
"RTN","DVBAB67",34,0)
 Q
"RTN","DVBAB67",35,0)
 ;
"RTN","DVBAB67",36,0)
PRINT1 S:$D(^DVB(396,DA,6)) GDIVPTR=$P(^DVB(396,DA,6),"^",Q)
"RTN","DVBAB67",37,0)
 S:'$D(^DVB(396,DA,6)) GDIVPTR=$P(^DVB(396,DA,2),"^",9)
"RTN","DVBAB67",38,0)
 S:+GDIVPTR>0 GDIVNAM=$P(^DG(40.8,GDIVPTR,0),"^",1)
"RTN","DVBAB67",39,0)
 S:+GDIVPTR'>0 GDIVNAM=""
"RTN","DVBAB67",40,0)
 S NODTA=1 I $G(DVBADLMTR)=0 D  Q
"RTN","DVBAB67",41,0)
 . I QQ S MC=$T(@Q),MD=$P(MC,";;",2) S GDIV=" ("_$E(GDIVNAM,1,(9+(23-$L(MC))))_")" S ^TMP("CAPRI",MSGCNT)="        "_MD_GDIV_"^",MSGCNT=MSGCNT+1 S QQ='QQ Q
"RTN","DVBAB67",42,0)
 . I 'QQ S MC=$T(@Q),MD=$P(MC,";;",2) S GDIV=" ("_$E(GDIVNAM,1,(9+(23-$L(MC))))_")" S ^TMP("CAPRI",MSGCNT)="                                    "_MD_GDIV_"^",MSGCNT=MSGCNT+1 S QQ='QQ I $Y>22 Q:DVBAQUIT=1
"RTN","DVBAB67",43,0)
 . Q
"RTN","DVBAB67",44,0)
 I (QQ&($G(DVBADLMTR)=",")) S MC=$T(@Q),MD=$P(MC,";;",2),GDIV=" ("_GDIVNAM_")",^TMP("CAPRI",$J,MSGCNT)=PRTREC_""""_MD_GDIV_""""_DVBADLMTR D PRINTDL3
"RTN","DVBAB67",45,0)
 Q
"RTN","DVBAB67",46,0)
 ;
"RTN","DVBAB67",47,0)
ELAPSED K EDAYS S X1=DT,X=RDATE D ^XUWORKDY
"RTN","DVBAB67",48,0)
 S EDAYS=X
"RTN","DVBAB67",49,0)
 Q
"RTN","DVBAB67",50,0)
 ;
"RTN","DVBAB67",51,0)
PRINTDLM ; Print delimited format output details
"RTN","DVBAB67",52,0)
 S PRFX=$S(DOCTYPE="L":"ActivDt  ",1:"AdmitDt  ")
"RTN","DVBAB67",53,0)
 D DEM^VADPT I $G(VADM(1))'="" S SSN=$S($G(DVBADLMTR)=",":$P($G(VADM(2)),U,2),1:$P($G(VADM(2)),U,1))
"RTN","DVBAB67",54,0)
 S PRTREC=""""_ADIV_""""_DVBADLMTR_""""_PNAM_""""_DVBADLMTR_SSN_DVBADLMTR_$C(160)_CNUM_DVBADLMTR_$S($G(ADMDT)]"":PRFX_$$FMTE^XLFDT(ADMDT,"5DZ"),1:"")_DVBADLMTR_$$FMTE^XLFDT(RDATE,"5DZ")_DVBADLMTR
"RTN","DVBAB67",55,0)
 Q
"RTN","DVBAB67",56,0)
 ;
"RTN","DVBAB67",57,0)
PRINTDL2 ; Continue creating delimited format output
"RTN","DVBAB67",58,0)
 I DCHGDT]""_"^" S Y=DCHGDT X ^DD("DD") S PRTREC=PRTREC_""""_Y_""""_DVBADLMTR
"RTN","DVBAB67",59,0)
 I DCHGDT']""_"^" S Y="",PRTREC=PRTREC_Y_DVBADLMTR
"RTN","DVBAB67",60,0)
 S PRTREC=PRTREC_EDAYS_DVBADLMTR
"RTN","DVBAB67",61,0)
 Q
"RTN","DVBAB67",62,0)
 ;
"RTN","DVBAB67",63,0)
PRINTDL3 ; Last print fields for delimited output 
"RTN","DVBAB67",64,0)
 S:$D(^DVB(396,DA,2)) ^TMP("CAPRI",$J,MSGCNT)=^TMP("CAPRI",$J,MSGCNT)_$S($P(^DVB(396,DA,2),U,8)]"":""""_$P(^(2),U,8)_"""",1:"(Not specified) ")_DVBADLMTR_$S($P(^(2),U,7)]"":""""_$P(^(2),U,7)_"""",1:"(Not specified) ")_$C(13),MSGCNT=MSGCNT+1
"RTN","DVBAB67",65,0)
 Q
"RTN","DVBAB67",66,0)
 ;
"RTN","DVBAB67",67,0)
FIELDS ;
"RTN","DVBAB67",68,0)
7 ;;ADMISSION RPT
"RTN","DVBAB67",69,0)
9 ;;NOTICE OF DISCHARGE
"RTN","DVBAB67",70,0)
11 ;;HOSPITAL SUMMARY
"RTN","DVBAB67",71,0)
13 ;;21-DAY CERTIFICATE
"RTN","DVBAB67",72,0)
15 ;;OTHER/EXAM REVIEW RMKS
"RTN","DVBAB67",73,0)
17 ;;SPECIAL REPORT
"RTN","DVBAB67",74,0)
19 ;;COMPETENCY REPORT
"RTN","DVBAB67",75,0)
21 ;;VA FORM 21-2680
"RTN","DVBAB67",76,0)
23 ;;ASSET INFORMATION
"RTN","DVBAB67",77,0)
26 ;;OPT TREATMENT REPORT
"RTN","DVBAB67",78,0)
28 ;;BEGINNING DATE/CARE
"RTN","DVBAB67",79,0)
 Q 
"RTN","DVBCANRS")
0^2^B1110899^B1041993
"RTN","DVBCANRS",1,0)
DVBCANRS ;ALB/RTW - PATCH DVBA*2.7*189 CANCEL REASON AND COMMENTS ROUTINE;08/08/2014
"RTN","DVBCANRS",2,0)
 ;;2.7;AMIE;**189,200**;Apr 10, 1995;Build 2
"RTN","DVBCANRS",3,0)
 ; At CANRSN This routine adds new 2507 cancellation reasons and hides reasons no longer needed in file 396.5 for VLER DAS-CAPRI
"RTN","DVBCANRS",4,0)
 ;
"RTN","DVBCANRS",5,0)
 Q  ;NO DIRECT ACCESS
"RTN","DVBCANRS",6,0)
CANRSN(DVBARRAY) ; RPC" DVBA CAPRI GETCANCELREASON
"RTN","DVBCANRS",7,0)
 ;This gets only active 2507 Cancellation reasons; they are stored in xref "D",1
"RTN","DVBCANRS",8,0)
 N DVBCR
"RTN","DVBCANRS",9,0)
 K ^TMP("DVB",$J)
"RTN","DVBCANRS",10,0)
 S X=0
"RTN","DVBCANRS",11,0)
 S DVBCR="" F  S DVBCR=$O(^DVB(396.5,"D",1,DVBCR)) Q:'DVBCR  D
"RTN","DVBCANRS",12,0)
 .S DVBNM=$$GET1^DIQ(396.5,DVBCR,"NAME")
"RTN","DVBCANRS",13,0)
 .Q:DVBNM=""
"RTN","DVBCANRS",14,0)
 .S ^TMP("DVB",$J,DVBNM,DVBCR)=""
"RTN","DVBCANRS",15,0)
 .Q
"RTN","DVBCANRS",16,0)
 S DVBCNT=1,DVBCNA="" F  S DVBCNA=$O(^TMP("DVB",$J,DVBCNA)) Q:DVBCNA=""  D
"RTN","DVBCANRS",17,0)
 .S DVBCA=1 F  S DVBCA=$O(^TMP("DVB",$J,DVBCNA,DVBCA)) Q:'DVBCA  D
"RTN","DVBCANRS",18,0)
 ..S DVBARRAY(DVBCNT)=DVBCA_"^"_DVBCNA
"RTN","DVBCANRS",19,0)
 ..S DVBCNT=DVBCNT+1
"RTN","DVBCANRS",20,0)
 K DVBNM,DVBCR,DVBCNT,DVBCA,DVBCRA,DVBCNA,X
"RTN","DVBCANRS",21,0)
 K ^TMP("DVB",$J)
"RTN","DVBCANRS",22,0)
 Q
"RTN","DVBCRPR1")
0^1^B11824487^B11695100
"RTN","DVBCRPR1",1,0)
DVBCRPR1 ;ALBANY-ISC/GTS-REPRINT C&P REPORT CONTINUED ;4/28/93
"RTN","DVBCRPR1",2,0)
 ;;2.7;AMIE;**2,119,156,200**;Apr 10, 1995;Build 2
"RTN","DVBCRPR1",3,0)
 ;
"RTN","DVBCRPR1",4,0)
 ;  ** Entry points called only from DVBCRPRT **
"RTN","DVBCRPR1",5,0)
 ;  ** All TAGS are entry points **
"RTN","DVBCRPR1",6,0)
HDR S PG=PG+1
"RTN","DVBCRPR1",7,0)
 I +$G(DVBGUI)&(PG>1) Q
"RTN","DVBCRPR1",8,0)
 I PG>1 D HDR3^DVBCUTL2 Q
"RTN","DVBCRPR1",9,0)
 S:ZPR'="E" TOTTIME=$$PROCDAY^DVBCUTL2(DA(1))
"RTN","DVBCRPR1",10,0)
 S:ZPR="E" TOTTIME=$$INSFTME^DVBCUTA1(DA(1))
"RTN","DVBCRPR1",11,0)
 S OUTTIME="Processing time: "_TOTTIME
"RTN","DVBCRPR1",12,0)
 I (IOST?1"C-".E)!($D(DVBAON2)) W @IOF
"RTN","DVBCRPR1",13,0)
 S:('$D(DVBAON2)) DVBAON2=""
"RTN","DVBCRPR1",14,0)
 W !,"Date: ",DVBCDT(0),?(80-$L(PGHD)\2),PGHD,?71,"Page: ",PG,!?(80-$L(DVBCSITE)\2),DVBCSITE,!
"RTN","DVBCRPR1",15,0)
 W ?29,"** REPRINT OF FINAL **",! W ?(80-$L(OUTTIME)\2),OUTTIME,!
"RTN","DVBCRPR1",16,0)
 W ?(80-$L(EXHD)\2),EXHD,! F LNE=1:1:80 W "="
"RTN","DVBCRPR1",17,0)
 K LNE S:EXHD["AGENT ORANGE" DVBCAO=1 I EXHD'["AGENT ORANGE" K DVBCAO
"RTN","DVBCRPR1",18,0)
 D SSNOUT^DVBCUTIL
"RTN","DVBCRPR1",19,0)
 W !!?2,"Name: ",PNAM,?56,"SSN: ",DVBCSSNO,!?51,"C-Number: ",CNUM,!?56,"DOB: " S Y=DOB X XDD W Y,!?2,"Address: ",ADR1,! W:ADR2]"" ?11,ADR2,! W:ADR3]"" ?11,ADR3,!!
"RTN","DVBCRPR1",20,0)
 K DVBCSSNO
"RTN","DVBCRPR1",21,0)
 W !?2,"City,State,Zip+4: ",?48,"Res Phone: ",HOMPHON,!?5,CITY,"  ",STATE,"  ",ZIP,?48,"Bus Phone: ",BUSPHON,!
"RTN","DVBCRPR1",22,0)
 W !,"Entered active service: " S Y=EOD X XDD S:Y="" Y="Not specified" W Y,?40,"Last rating exam date: ",LREXMDT,! S Y=RAD X XDD S:Y="" Y="Not specified" W "Released active service: " W Y,!!,"Priority of exam: ",PRIO,!
"RTN","DVBCRPR1",23,0)
 F LNE=1:1:80 W "="
"RTN","DVBCRPR1",24,0)
 W !
"RTN","DVBCRPR1",25,0)
 Q
"RTN","DVBCRPR1",26,0)
 ;
"RTN","DVBCRPR1",27,0)
UP F XIX=$Y:1:(IOSL-8) W !  ;DVBA*156 add more lines for footer padding
"RTN","DVBCRPR1",28,0)
 Q
"RTN","DVBCRPR1",29,0)
 ;
"RTN","DVBCRPR1",30,0)
BOT I '$D(AUTO),$D(PRINT) D UP W ?7,"This exam has been reviewed and approved by the examining physician" W:$D(DVBCAO) !?27,"and signed by the veteran" W ".",!!,"VA Form 2507",! ;for RO
"RTN","DVBCRPR1",31,0)
 I $D(AUTO),$D(PRINT) D UP W ?7,"Adequated by: ___________________________________     Date: _____________",!!
"RTN","DVBCRPR1",32,0)
 I $D(AUTO),$D(PRINT) W "Physician signature: ___________________________________     Date: _____________",!!,"VA Form 2507",!
"RTN","DVBCRPR1",33,0)
 Q
"RTN","DVBCRPR1",34,0)
 ;
"RTN","DVBCRPR1",35,0)
HDA S:'$D(XPG) XPG=0 S XPG=XPG+1
"RTN","DVBCRPR1",36,0)
 I (IOST?1"C-".E)!($D(DVBAON2)) W @IOF
"RTN","DVBCRPR1",37,0)
 S:('$D(DVBAON2)) DVBAON2=""
"RTN","DVBCRPR1",38,0)
 ;CHANGE PRINT DATE TO REFLECT THE DATE THE REPORT WAS RUN FOR - NOT THE DATE THE REPORT WAS RUN
"RTN","DVBCRPR1",39,0)
 ;RRA DVBA*2.7*200 I7344966FY16
"RTN","DVBCRPR1",40,0)
 W !,"Final C&P Reports for print date " S Y=RUNDATE X XDD W Y,!!,"Operator: ",$S($D(^VA(200,+DUZ,0)):$P(^(0),U,1),1:"Unknown operator"),!,"Location: ",$S($D(^DIC(4,+DUZ(2),0)):$P(^(0),U,1),1:"Unknown location"),!
"RTN","DVBCRPR1",41,0)
 W !,"Veteran Name",?28,"SSN",?43,"C-Number",?55,"Request date",!
"RTN","DVBCRPR1",42,0)
 F XXLN=1:1:79 W "-"
"RTN","DVBCRPR1",43,0)
 W !!
"RTN","DVBCRPR1",44,0)
 Q
"VER")
8.0^22.2
"BLD",10567,6)
^172
**END**
**END**

