Released DVBA*2.7*189 SEQ #167
Extracted from mail message
**KIDS**:DVBA*2.7*189^

**INSTALL NAME**
DVBA*2.7*189
"BLD",8598,0)
DVBA*2.7*189^AUTOMATED MED INFO EXCHANGE^0^3150302^y
"BLD",8598,1,0)
^^3^3^3141209^
"BLD",8598,1,1,0)
Updates to the CAPRI file system to handle Exam Request Cancelations, 
"BLD",8598,1,2,0)
Claim Type, Special Considerations, Insufficient Reasons, Insufficient 
"BLD",8598,1,3,0)
Request Y/N, and Exam cancellation free text.
"BLD",8598,4,0)
^9.64PA^396.4^6
"BLD",8598,4,396.25,0)
396.25
"BLD",8598,4,396.25,222)
y^y^f^^^^n
"BLD",8598,4,396.27,0)
396.27
"BLD",8598,4,396.27,222)
y^y^f^^^^n
"BLD",8598,4,396.3,0)
396.3
"BLD",8598,4,396.3,2,0)
^9.641^396.3^3
"BLD",8598,4,396.3,2,396.3,0)
2507 REQUEST  (File-top level)
"BLD",8598,4,396.3,2,396.3,1,0)
^9.6411^51^1
"BLD",8598,4,396.3,2,396.3,1,51,0)
INSUFFICIENT REQUEST
"BLD",8598,4,396.3,2,396.31,0)
SPECIAL CONSIDERATIONS  (sub-file)
"BLD",8598,4,396.3,2,396.31,1,0)
^9.6411^^0
"BLD",8598,4,396.3,2,396.32,0)
CLAIM TYPE  (sub-file)
"BLD",8598,4,396.3,2,396.32,1,0)
^9.6411^^0
"BLD",8598,4,396.3,222)
y^y^p^^^^n^^n
"BLD",8598,4,396.3,224)

"BLD",8598,4,396.4,0)
396.4
"BLD",8598,4,396.4,2,0)
^9.641^396.4^1
"BLD",8598,4,396.4,2,396.4,0)
2507 EXAM  (File-top level)
"BLD",8598,4,396.4,2,396.4,1,0)
^9.6411^53^1
"BLD",8598,4,396.4,2,396.4,1,53,0)
CANCELLATION COMMENTS
"BLD",8598,4,396.4,222)
y^y^p^^^^n^^n
"BLD",8598,4,396.4,224)

"BLD",8598,4,396.5,0)
396.5
"BLD",8598,4,396.5,2,0)
^9.641^396.5^1
"BLD",8598,4,396.5,2,396.5,0)
2507 CANCELLATION REASON  (File-top level)
"BLD",8598,4,396.5,2,396.5,1,0)
^9.6411^.01^2
"BLD",8598,4,396.5,2,396.5,1,.01,0)
NAME
"BLD",8598,4,396.5,2,396.5,1,.02,0)
STATUS
"BLD",8598,4,396.5,222)
y^y^p^^^^n^^n
"BLD",8598,4,396.5,224)

"BLD",8598,4,396.94,0)
396.94
"BLD",8598,4,396.94,2,0)
^9.641^396.94^1
"BLD",8598,4,396.94,2,396.94,0)
2507 INSUFFICIENT REASONS  (File-top level)
"BLD",8598,4,396.94,2,396.94,1,0)
^9.6411^1^1
"BLD",8598,4,396.94,2,396.94,1,1,0)
INACTIVE
"BLD",8598,4,396.94,222)
y^y^p^^^^n^^n
"BLD",8598,4,396.94,224)

"BLD",8598,4,"APDD",396.3,396.3)

"BLD",8598,4,"APDD",396.3,396.3,51)

"BLD",8598,4,"APDD",396.3,396.31)

"BLD",8598,4,"APDD",396.3,396.32)

"BLD",8598,4,"APDD",396.4,396.4)

"BLD",8598,4,"APDD",396.4,396.4,53)

"BLD",8598,4,"APDD",396.5,396.5)

"BLD",8598,4,"APDD",396.5,396.5,.01)

"BLD",8598,4,"APDD",396.5,396.5,.02)

"BLD",8598,4,"APDD",396.94,396.94)

"BLD",8598,4,"APDD",396.94,396.94,1)

"BLD",8598,4,"B",396.25,396.25)

"BLD",8598,4,"B",396.27,396.27)

"BLD",8598,4,"B",396.3,396.3)

"BLD",8598,4,"B",396.4,396.4)

"BLD",8598,4,"B",396.5,396.5)

"BLD",8598,4,"B",396.94,396.94)

"BLD",8598,6.3)
22
"BLD",8598,"ABPKG")
n
"BLD",8598,"INID")
^n
"BLD",8598,"INIT")
ENTER^DVBA189P
"BLD",8598,"KRN",0)
^9.67PA^779.2^20
"BLD",8598,"KRN",.4,0)
.4
"BLD",8598,"KRN",.401,0)
.401
"BLD",8598,"KRN",.402,0)
.402
"BLD",8598,"KRN",.403,0)
.403
"BLD",8598,"KRN",.5,0)
.5
"BLD",8598,"KRN",.84,0)
.84
"BLD",8598,"KRN",3.6,0)
3.6
"BLD",8598,"KRN",3.8,0)
3.8
"BLD",8598,"KRN",9.2,0)
9.2
"BLD",8598,"KRN",9.8,0)
9.8
"BLD",8598,"KRN",9.8,"NM",0)
^9.68A^5^5
"BLD",8598,"KRN",9.8,"NM",1,0)
DVBACPR1^^0^B24355117
"BLD",8598,"KRN",9.8,"NM",2,0)
DVBAB1A^^0^B41988424
"BLD",8598,"KRN",9.8,"NM",3,0)
DVBCBULL^^0^B29784919
"BLD",8598,"KRN",9.8,"NM",4,0)
DVBARSBD^^0^B106348391
"BLD",8598,"KRN",9.8,"NM",5,0)
DVBCANRS^^0^B1041993
"BLD",8598,"KRN",9.8,"NM","B","DVBAB1A",2)

"BLD",8598,"KRN",9.8,"NM","B","DVBACPR1",1)

"BLD",8598,"KRN",9.8,"NM","B","DVBARSBD",4)

"BLD",8598,"KRN",9.8,"NM","B","DVBCANRS",5)

"BLD",8598,"KRN",9.8,"NM","B","DVBCBULL",3)

"BLD",8598,"KRN",19,0)
19
"BLD",8598,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",8598,"KRN",19,"NM",1,0)
DVBA CAPRI GUI^^0
"BLD",8598,"KRN",19,"NM","B","DVBA CAPRI GUI",1)

"BLD",8598,"KRN",19.1,0)
19.1
"BLD",8598,"KRN",101,0)
101
"BLD",8598,"KRN",409.61,0)
409.61
"BLD",8598,"KRN",771,0)
771
"BLD",8598,"KRN",779.2,0)
779.2
"BLD",8598,"KRN",870,0)
870
"BLD",8598,"KRN",8989.51,0)
8989.51
"BLD",8598,"KRN",8989.52,0)
8989.52
"BLD",8598,"KRN",8994,0)
8994
"BLD",8598,"KRN",8994,"NM",0)
^9.68A^13^8
"BLD",8598,"KRN",8994,"NM",1,0)
DVBA CAPRI LISTSPCLCONSID^^0
"BLD",8598,"KRN",8994,"NM",2,0)
DVBA CAPRI GETSPCLCONSID^^0
"BLD",8598,"KRN",8994,"NM",4,0)
DVBA CAPRI LISTINSUFRSN^^0
"BLD",8598,"KRN",8994,"NM",5,0)
DVBA CAPRI LISTCLAIMTYPE^^0
"BLD",8598,"KRN",8994,"NM",6,0)
DVBA CAPRI GETCLAIMTYPE^^0
"BLD",8598,"KRN",8994,"NM",7,0)
DVBA CAPRI SETCLAIMTYPE^^0
"BLD",8598,"KRN",8994,"NM",12,0)
DVBA CAPRI GETCANCELREASON^^0
"BLD",8598,"KRN",8994,"NM",13,0)
DVBA CAPRI SETSPCLCONSID^^0
"BLD",8598,"KRN",8994,"NM","B","DVBA CAPRI GETCANCELREASON",12)

"BLD",8598,"KRN",8994,"NM","B","DVBA CAPRI GETCLAIMTYPE",6)

"BLD",8598,"KRN",8994,"NM","B","DVBA CAPRI GETSPCLCONSID",2)

"BLD",8598,"KRN",8994,"NM","B","DVBA CAPRI LISTCLAIMTYPE",5)

"BLD",8598,"KRN",8994,"NM","B","DVBA CAPRI LISTINSUFRSN",4)

"BLD",8598,"KRN",8994,"NM","B","DVBA CAPRI LISTSPCLCONSID",1)

"BLD",8598,"KRN",8994,"NM","B","DVBA CAPRI SETCLAIMTYPE",7)

"BLD",8598,"KRN",8994,"NM","B","DVBA CAPRI SETSPCLCONSID",13)

"BLD",8598,"KRN","B",.4,.4)

"BLD",8598,"KRN","B",.401,.401)

"BLD",8598,"KRN","B",.402,.402)

"BLD",8598,"KRN","B",.403,.403)

"BLD",8598,"KRN","B",.5,.5)

"BLD",8598,"KRN","B",.84,.84)

"BLD",8598,"KRN","B",3.6,3.6)

"BLD",8598,"KRN","B",3.8,3.8)

"BLD",8598,"KRN","B",9.2,9.2)

"BLD",8598,"KRN","B",9.8,9.8)

"BLD",8598,"KRN","B",19,19)

"BLD",8598,"KRN","B",19.1,19.1)

"BLD",8598,"KRN","B",101,101)

"BLD",8598,"KRN","B",409.61,409.61)

"BLD",8598,"KRN","B",771,771)

"BLD",8598,"KRN","B",779.2,779.2)

"BLD",8598,"KRN","B",870,870)

"BLD",8598,"KRN","B",8989.51,8989.51)

"BLD",8598,"KRN","B",8989.52,8989.52)

"BLD",8598,"KRN","B",8994,8994)

"BLD",8598,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",8598,"QUES",0)
^9.62^^
"BLD",8598,"REQB",0)
^9.611^2^2
"BLD",8598,"REQB",1,0)
DVBA*2.7*184^2
"BLD",8598,"REQB",2,0)
DVBA*2.7*187^2
"BLD",8598,"REQB","B","DVBA*2.7*184",1)

"BLD",8598,"REQB","B","DVBA*2.7*187",2)

"FIA",396.25)
2507 SPECIAL CONSIDERATIONS
"FIA",396.25,0)
^DVB(396.25,
"FIA",396.25,0,0)
396.25
"FIA",396.25,0,1)
y^y^f^^^^n
"FIA",396.25,0,10)

"FIA",396.25,0,11)

"FIA",396.25,0,"RLRO")

"FIA",396.25,0,"VR")
2.7^DVBA
"FIA",396.25,396.25)
0
"FIA",396.27)
2507 CLAIM TYPE
"FIA",396.27,0)
^DVB(396.27,
"FIA",396.27,0,0)
396.27
"FIA",396.27,0,1)
y^y^f^^^^n
"FIA",396.27,0,10)

"FIA",396.27,0,11)

"FIA",396.27,0,"RLRO")

"FIA",396.27,0,"VR")
2.7^DVBA
"FIA",396.27,396.27)
0
"FIA",396.3)
2507 REQUEST
"FIA",396.3,0)
^DVB(396.3,
"FIA",396.3,0,0)
396.3IP
"FIA",396.3,0,1)
y^y^p^^^^n^^n
"FIA",396.3,0,10)

"FIA",396.3,0,11)

"FIA",396.3,0,"RLRO")

"FIA",396.3,0,"VR")
2.7^DVBA
"FIA",396.3,396.3)
1
"FIA",396.3,396.3,9.1)

"FIA",396.3,396.3,50)

"FIA",396.3,396.3,51)

"FIA",396.3,396.31)
0
"FIA",396.3,396.32)
0
"FIA",396.4)
2507 EXAM
"FIA",396.4,0)
^DVB(396.4,
"FIA",396.4,0,0)
396.4I
"FIA",396.4,0,1)
y^y^p^^^^n^^n
"FIA",396.4,0,10)

"FIA",396.4,0,11)

"FIA",396.4,0,"RLRO")

"FIA",396.4,0,"VR")
2.7^DVBA
"FIA",396.4,396.4)
1
"FIA",396.4,396.4,53)

"FIA",396.4,396.453)
0
"FIA",396.5)
2507 CANCELLATION REASON
"FIA",396.5,0)
^DVB(396.5,
"FIA",396.5,0,0)
396.5
"FIA",396.5,0,1)
y^y^p^^^^n^^n
"FIA",396.5,0,10)

"FIA",396.5,0,11)

"FIA",396.5,0,"RLRO")

"FIA",396.5,0,"VR")
2.7^DVBA
"FIA",396.5,396.5)
1
"FIA",396.5,396.5,.01)

"FIA",396.5,396.5,.02)

"FIA",396.94)
2507 INSUFFICIENT REASONS
"FIA",396.94,0)
^DVB(396.94,
"FIA",396.94,0,0)
396.94
"FIA",396.94,0,1)
y^y^p^^^^n^^n
"FIA",396.94,0,10)

"FIA",396.94,0,11)

"FIA",396.94,0,"RLRO")

"FIA",396.94,0,"VR")
2.7^DVBA
"FIA",396.94,396.94)
1
"FIA",396.94,396.94,1)

"INIT")
ENTER^DVBA189P
"KRN",19,9510,-1)
0^1
"KRN",19,9510,0)
DVBA CAPRI GUI^Capri GUI (Broker)^^B^^^^^^^^AUTOMATED MED INFO EXCHANGE^^1
"KRN",19,9510,1,0)
^19.06^2^2^3150120^^^^
"KRN",19,9510,1,1,0)
This is the 'B' type option used by CAPRI GUI client application. It
"KRN",19,9510,1,2,0)
contains all the RPCs used by the CAPRI GUI application.
"KRN",19,9510,20)
 
"KRN",19,9510,25)
 
"KRN",19,9510,99.1)
63505,45940
"KRN",19,9510,"RPC",0)
^19.05P^164^161
"KRN",19,9510,"RPC",1,0)
DVBAB REPORT LISTS
"KRN",19,9510,"RPC",2,0)
DVBAB APPOINTMENT LIST
"KRN",19,9510,"RPC",3,0)
DVBAB CHECK CREDENTIALS
"KRN",19,9510,"RPC",4,0)
DVBAB FIND EXAMS
"KRN",19,9510,"RPC",5,0)
DVBAB PTINQ
"KRN",19,9510,"RPC",6,0)
DVBAB INCREASE EXAM COUNT
"KRN",19,9510,"RPC",7,0)
DVBAB SEND MSG
"KRN",19,9510,"RPC",8,0)
DVBAB REPORT CHECKLIST
"KRN",19,9510,"RPC",9,0)
DDR FILER
"KRN",19,9510,"RPC",10,0)
DDR LISTER
"KRN",19,9510,"RPC",11,0)
DDR VALIDATOR
"KRN",19,9510,"RPC",12,0)
DDR GETS ENTRY DATA
"KRN",19,9510,"RPC",14,0)
XWB GET VARIABLE VALUE
"KRN",19,9510,"RPC",15,0)
DVBAB HEALTH SUMMARY TEXT
"KRN",19,9510,"RPC",16,0)
TIU DOCUMENTS BY CONTEXT
"KRN",19,9510,"RPC",17,0)
TIU GET RECORD TEXT
"KRN",19,9510,"RPC",18,0)
ORQQCN LIST
"KRN",19,9510,"RPC",19,0)
ORQQCN DETAIL
"KRN",19,9510,"RPC",20,0)
DVBAB INST LIST
"KRN",19,9510,"RPC",22,0)
ORWRP REPORT TEXT
"KRN",19,9510,"RPC",23,0)
ORWORR AGET
"KRN",19,9510,"RPC",24,0)
ORWRA IMAGING EXAMS
"KRN",19,9510,"RPC",25,0)
ORWRP1 LISTNUTR
"KRN",19,9510,"RPC",26,0)
ORWMC PATIENT PROCEDURES
"KRN",19,9510,"RPC",27,0)
ORQQPL PROBLEM LIST
"KRN",19,9510,"RPC",28,0)
ORWORR GET4LST
"KRN",19,9510,"RPC",29,0)
ORWLR CUMULATIVE REPORT
"KRN",19,9510,"RPC",32,0)
DVBAB DATETIME
"KRN",19,9510,"RPC",34,0)
ORWPT ADMITLST
"KRN",19,9510,"RPC",35,0)
DVBAB SC VETERAN REPORT
"KRN",19,9510,"RPC",36,0)
ORQQVS VISITS/APPTS
"KRN",19,9510,"RPC",37,0)
ORWU DT
"KRN",19,9510,"RPC",38,0)
ORWLRR CHART
"KRN",19,9510,"RPC",39,0)
DG SENSITIVE RECORD ACCESS
"KRN",19,9510,"RPC",40,0)
DG SENSITIVE RECORD BULLETIN
"KRN",19,9510,"RPC",41,0)
DVBAB REPORT EXAM CHKLIST
"KRN",19,9510,"RPC",42,0)
DVBAB REPORT ADMINQ
"KRN",19,9510,"RPC",43,0)
DVBAB REPORT INCOMPVET
"KRN",19,9510,"RPC",44,0)
DVBAB REPORT DISCHARGE
"KRN",19,9510,"RPC",45,0)
DVBAB REPORT READMIT
"KRN",19,9510,"RPC",46,0)
DVBAB REPORT ADMISSIONS
"KRN",19,9510,"RPC",47,0)
DVBAB REPORT 7131INQ
"KRN",19,9510,"RPC",48,0)
DVBAB PENDING C&P REPORT
"KRN",19,9510,"RPC",49,0)
DVBAB REPORT CPDETAILS
"KRN",19,9510,"RPC",50,0)
DVBAB AMIS REPORT
"KRN",19,9510,"RPC",51,0)
DVBAB REPORT PENDING7131
"KRN",19,9510,"RPC",52,0)
DVBAB LABLIST
"KRN",19,9510,"RPC",53,0)
DVBAB VERSION
"KRN",19,9510,"RPC",54,0)
DDR DELETE ENTRY
"KRN",19,9510,"RPC",55,0)
ORWRP REPORT LISTS
"KRN",19,9510,"RPC",57,0)
DVBAB DIVISION
"KRN",19,9510,"RPC",58,0)
DVBAB TEAM PATIENTS
"KRN",19,9510,"RPC",59,0)
ORWCIRN FACLIST
"KRN",19,9510,"RPC",60,0)
XWB REMOTE STATUS CHECK
"KRN",19,9510,"RPC",61,0)
XWB REMOTE GETDATA
"KRN",19,9510,"RPC",63,0)
ORWPT DIEDON
"KRN",19,9510,"RPC",66,0)
XWB REMOTE RPC
"KRN",19,9510,"RPC",68,0)
DDR FIND1
"KRN",19,9510,"RPC",69,0)
DVBAB REPORTS
"KRN",19,9510,"RPC",70,0)
ORWRP2 COMPABV
"KRN",19,9510,"RPC",71,0)
DVBAB SURGERY CASE
"KRN",19,9510,"RPC",72,0)
ORWRP2 COMPDISP
"KRN",19,9510,"RPC",73,0)
ORWRP2 HS COMPONENTS
"KRN",19,9510,"RPC",74,0)
ORWRP2 HS COMPONENT SUBS
"KRN",19,9510,"RPC",75,0)
ORWRP2 HS COMP FILES
"KRN",19,9510,"RPC",76,0)
ORWRP2 SAVLKUP
"KRN",19,9510,"RPC",77,0)
ORWRP2 HS REPORT TEXT
"KRN",19,9510,"RPC",78,0)
ORWRP2 GETLKUP
"KRN",19,9510,"RPC",79,0)
ORWRP2 HS FILE LOOKUP
"KRN",19,9510,"RPC",80,0)
ORWRP2 HS SUBITEMS
"KRN",19,9510,"RPC",81,0)
DVBAB MAIL INIT
"KRN",19,9510,"RPC",82,0)
ORWLRR MICRO
"KRN",19,9510,"RPC",83,0)
TIU CREATE RECORD
"KRN",19,9510,"RPC",84,0)
DVBAB MPI ASSIGN ICN
"KRN",19,9510,"RPC",85,0)
TIU SIGN RECORD
"KRN",19,9510,"RPC",86,0)
TIU DELETE RECORD
"KRN",19,9510,"RPC",87,0)
TIU REQUIRES COSIGNATURE
"KRN",19,9510,"RPC",88,0)
DVBAB REPORT ADMISSION INQUIRY
"KRN",19,9510,"RPC",89,0)
DVBAB REPORT NEW NOTICES DC
"KRN",19,9510,"RPC",90,0)
DVBAB NOTE TITLES
"KRN",19,9510,"RPC",91,0)
DVBAB TEMPLATE DEFINITION
"KRN",19,9510,"RPC",92,0)
DDR FINDER
"KRN",19,9510,"RPC",93,0)
ORWCV VST
"KRN",19,9510,"RPC",94,0)
TIU LOAD BOILERPLATE TEXT
"KRN",19,9510,"RPC",95,0)
DVBAB GET VISIT INFO
"KRN",19,9510,"RPC",96,0)
DVBAB REPORT SPECIAL
"KRN",19,9510,"RPC",97,0)
DVBAB SAVE FORM
"KRN",19,9510,"RPC",98,0)
DVBAB EXAMS BY DATE
"KRN",19,9510,"RPC",99,0)
TIU GET SITE PARAMETERS
"KRN",19,9510,"RPC",100,0)
TIU GET ALERT INFO
"KRN",19,9510,"RPC",101,0)
ORWU VALIDSIG
"KRN",19,9510,"RPC",103,0)
ORWORB FASTUSER
"KRN",19,9510,"RPC",104,0)
DVBAB TEMPLATE LIST
"KRN",19,9510,"RPC",105,0)
DVBAB LOAD FORM
"KRN",19,9510,"RPC",106,0)
DVBAB TEMPLATE REPORT FULL
"KRN",19,9510,"RPC",107,0)
DVBAB FETCH 1U4N
"KRN",19,9510,"RPC",108,0)
DVBAB FORM DATA BACKUP DELETE
"KRN",19,9510,"RPC",109,0)
DVBAB FORM DATA BACKUP RESTORE
"KRN",19,9510,"RPC",110,0)
DDR LOCK/UNLOCK NODE
"KRN",19,9510,"RPC",111,0)
DVBAB FORM COPY
"KRN",19,9510,"RPC",112,0)
DVBAB FIND DUPS
"KRN",19,9510,"RPC",113,0)
DVBAB NEW PERSON FILE
"KRN",19,9510,"RPC",114,0)
DVBAB FORM DATA BACKUP
"KRN",19,9510,"RPC",116,0)
DVBAB SET DIVISION
"KRN",19,9510,"RPC",117,0)
DVBAB GET URL
"KRN",19,9510,"RPC",118,0)
ORPRF TRIGGER POPUP
"KRN",19,9510,"RPC",119,0)
ORPRF HASFLG
"KRN",19,9510,"RPC",120,0)
ORPRF HASCAT1
"KRN",19,9510,"RPC",121,0)
ORPRF GETFLG
"KRN",19,9510,"RPC",122,0)
ORPRF CLEAR
"KRN",19,9510,"RPC",123,0)
TIU SET DOCUMENT TEXT
"KRN",19,9510,"RPC",124,0)
DVBAB ORIGINAL PROCESSING DATE
"KRN",19,9510,"RPC",125,0)
TIU CREATE ADDENDUM RECORD
"KRN",19,9510,"RPC",126,0)
TIU UPDATE RECORD
"KRN",19,9510,"RPC",128,0)
XUS SET VISITOR
"KRN",19,9510,"RPC",129,0)
XUS GET VISITOR
"KRN",19,9510,"RPC",130,0)
DVBAB RESTRICTED LIST PATIENTS
"KRN",19,9510,"RPC",131,0)
DVBAB DOD INFO
"KRN",19,9510,"RPC",132,0)
DVBAB DOD REPORT
"KRN",19,9510,"RPC",133,0)
DVBAB DOD REPORT TYPES
"KRN",19,9510,"RPC",134,0)
DVBAB FIND DFN BY ICN
"KRN",19,9510,"RPC",135,0)
DVBAB CCOW
"KRN",19,9510,"RPC",136,0)
DVBAB ZIP2CITY
"KRN",19,9510,"RPC",137,0)
DVBA CHECK PATCH
"KRN",19,9510,"RPC",138,0)
DVBAB GET SET
"KRN",19,9510,"RPC",139,0)
DVBAB GET VVA TOKEN
"KRN",19,9510,"RPC",140,0)
VAFCTFU CONVERT ICN TO DFN
"KRN",19,9510,"RPC",141,0)
DVBAB 8861 NOTIFICATIONS
"KRN",19,9510,"RPC",142,0)
DVBA MVI GET CORRESPONDING IDS
"KRN",19,9510,"RPC",143,0)
DVBA MVI SEARCH PERSON
"KRN",19,9510,"RPC",144,0)
DVBAB SEND MSG TWO
"KRN",19,9510,"RPC",145,0)
DVBAD CONTRACTED EXAM REPORTS
"KRN",19,9510,"RPC",146,0)
DVBAD CONTRACTED EXAM CRYPTO
"KRN",19,9510,"RPC",147,0)
DVBA CAPRI GET EXAM IEN
"KRN",19,9510,"RPC",148,0)
DVBA CAPRI EXAM LINK TIU
"KRN",19,9510,"RPC",149,0)
DVBA CAPRI EXAM XML
"KRN",19,9510,"RPC",151,0)
DVBA CAPRI GETSPCLCONSID
"KRN",19,9510,"RPC",152,0)
DVBA CAPRI LISTINSUFRSN
"KRN",19,9510,"RPC",155,0)
DVBA CAPRI LISTCLAIMTYPE
"KRN",19,9510,"RPC",158,0)
DVBA CAPRI GETCANCELREASON
"KRN",19,9510,"RPC",161,0)
DVBA CAPRI LISTSPCLCONSID
"KRN",19,9510,"RPC",162,0)
DVBA CAPRI SETSPCLCONSID
"KRN",19,9510,"RPC",163,0)
DVBA CAPRI GETCLAIMTYPE
"KRN",19,9510,"RPC",164,0)
DVBA CAPRI SETCLAIMTYPE
"KRN",19,9510,"U")
CAPRI GUI (BROKER)
"KRN",8994,1673,-1)
0^2
"KRN",8994,1673,0)
DVBA CAPRI GETSPCLCONSID^GETSC^DVBACPR1^2
"KRN",8994,1673,1,0)
^8994.01^2^2^3140813^^^
"KRN",8994,1673,1,1,0)
This RPC returns an array of special considerations linked to a 2507 
"KRN",8994,1673,1,2,0)
request.
"KRN",8994,1673,2,0)
^8994.02A^1^1
"KRN",8994,1673,2,1,0)
2507 REQUEST IEN^1^^1^1
"KRN",8994,1673,2,"B","2507 REQUEST IEN",1)

"KRN",8994,1673,2,"PARAMSEQ",1,1)

"KRN",8994,1674,-1)
0^1
"KRN",8994,1674,0)
DVBA CAPRI LISTSPCLCONSID^LSTSC^DVBACPR1^2
"KRN",8994,1674,1,0)
^8994.01^2^2^3141216^^^
"KRN",8994,1674,1,1,0)
This RPC returns an array (listing) of valid special considerations that 
"KRN",8994,1674,1,2,0)
can be linked to a 2507 request.
"KRN",8994,1675,-1)
0^13
"KRN",8994,1675,0)
DVBA CAPRI SETSPCLCONSID^SETSC^DVBACPR1^1
"KRN",8994,1675,1,0)
^8994.01^2^2^3141231^^^
"KRN",8994,1675,1,1,0)
This RPC sets the passed-in special considerations and links them to the 
"KRN",8994,1675,1,2,0)
passed-in 2507 request.
"KRN",8994,1675,2,0)
^8994.02A^3^2
"KRN",8994,1675,2,1,0)
2507 REQUEST IEN^1^^1^1
"KRN",8994,1675,2,3,0)
SPECIAL CONSIDERATION LIST^2^^1^2
"KRN",8994,1675,2,"B","2507 REQUEST IEN",1)

"KRN",8994,1675,2,"B","SPECIAL CONSIDERATION LIST",3)

"KRN",8994,1675,2,"PARAMSEQ",1,1)

"KRN",8994,1675,2,"PARAMSEQ",2,3)

"KRN",8994,1677,-1)
0^4
"KRN",8994,1677,0)
DVBA CAPRI LISTINSUFRSN^LSTIR^DVBACPR1^2
"KRN",8994,1677,1,0)
^8994.01^2^2^3150106^^^
"KRN",8994,1677,1,1,0)
This RPC returns a list (array) of valid Insufficient Reasons that can be 
"KRN",8994,1677,1,2,0)
linked to a 2507 exam.
"KRN",8994,1677,2,0)
^8994.02A
"KRN",8994,1684,-1)
0^5
"KRN",8994,1684,0)
DVBA CAPRI LISTCLAIMTYPE^LSTCT^DVBACPR1^2
"KRN",8994,1684,1,0)
^8994.01^1^1^3141110^^
"KRN",8994,1684,1,1,0)
This RPC returns a list (array) of valid Claim Types
"KRN",8994,1684,3,0)
^^1^1^3140820^
"KRN",8994,1684,3,1,0)
List of valid Claim Types
"KRN",8994,1685,-1)
0^6
"KRN",8994,1685,0)
DVBA CAPRI GETCLAIMTYPE^GETCT^DVBACPR1^2
"KRN",8994,1685,1,0)
^8994.01^2^2^3141231^^^^
"KRN",8994,1685,1,1,0)
This RPC returns a list (array) of Claim Types associated with a valid 
"KRN",8994,1685,1,2,0)
2507 Request
"KRN",8994,1685,2,0)
^8994.02A^1^1
"KRN",8994,1685,2,1,0)
REQIEN^1^^1^1
"KRN",8994,1685,2,1,1,0)
^8994.021^1^1^3141231^^^^
"KRN",8994,1685,2,1,1,1,0)
This is the valid 2507 Request IEN
"KRN",8994,1685,2,"B","REQIEN",1)

"KRN",8994,1685,2,"PARAMSEQ",1,1)

"KRN",8994,1685,3,0)
^8994.03^1^1^3141231^^^^
"KRN",8994,1685,3,1,0)
Returns all Claim Types associated to the valid 2507 Request
"KRN",8994,1686,-1)
0^7
"KRN",8994,1686,0)
DVBA CAPRI SETCLAIMTYPE^SETCT^DVBACPR1^2
"KRN",8994,1686,1,0)
^8994.01^2^2^3141117^^^
"KRN",8994,1686,1,1,0)
This RPC returns the status of Claim Types passed to be set to a valid 
"KRN",8994,1686,1,2,0)
2507 Request
"KRN",8994,1686,2,0)
^8994.02A^2^2
"KRN",8994,1686,2,1,0)
REQIEN^1^^1^1
"KRN",8994,1686,2,1,1,0)
^8994.021^1^1^3141110^^
"KRN",8994,1686,2,1,1,1,0)
This is the valid 2507 Request IEN
"KRN",8994,1686,2,2,0)
ARRAYCT^2^^1^2
"KRN",8994,1686,2,2,1,0)
^8994.021^1^1^3141117^^^
"KRN",8994,1686,2,2,1,1,0)
This is the list of Claim Types to be set to the valid 2507 Request
"KRN",8994,1686,2,"B","ARRAYCT",2)

"KRN",8994,1686,2,"B","REQIEN",1)

"KRN",8994,1686,2,"PARAMSEQ",1,1)

"KRN",8994,1686,2,"PARAMSEQ",2,2)

"KRN",8994,1686,3,0)
^8994.03^1^1^3141117^^^
"KRN",8994,1686,3,1,0)
Returns status of Claim Type sets
"KRN",8994,2753,-1)
0^12
"KRN",8994,2753,0)
DVBA CAPRI GETCANCELREASON^CANRSN^DVBCANRS^2^R^0^^1^189
"KRN",8994,2753,1,0)
^8994.01^3^3^3150106^^^^
"KRN",8994,2753,1,1,0)
This returns an array of active 2507 EXAM Cancellation Reasons. New 
"KRN",8994,2753,1,2,0)
active reasons added with Patch DVB*2.7*189. Old list of cancellation 
"KRN",8994,2753,1,3,0)
reasons set to inactive.
"KRN",8994,2753,2,0)
^8994.02A^1^1
"KRN",8994,2753,2,1,0)
LIST^2^^1^1
"KRN",8994,2753,2,1,1,0)
^8994.021^1^1^3150106^^^^
"KRN",8994,2753,2,1,1,1,0)
THE ARRAY OF ACTIVE REASONS
"KRN",8994,2753,2,"B","LIST",1)

"KRN",8994,2753,2,"PARAMSEQ",1,1)

"KRN",8994,2753,3,0)
^8994.03^1^1^3150106^^^^
"KRN",8994,2753,3,1,0)
Returns a 1 when completed
"MBREQ")
0
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",223,-1)
1^1
"PKG",223,0)
AUTOMATED MED INFO EXCHANGE^DVBA^The entire AMIE package 7131/2507.
"PKG",223,20,0)
^9.402P^^
"PKG",223,22,0)
^9.49I^1^1
"PKG",223,22,1,0)
2.7^2950410^3010328
"PKG",223,22,1,"PAH",1,0)
189^3150302
"PKG",223,22,1,"PAH",1,1,0)
^^3^3^3150302
"PKG",223,22,1,"PAH",1,1,1,0)
Updates to the CAPRI file system to handle Exam Request Cancelations, 
"PKG",223,22,1,"PAH",1,1,2,0)
Claim Type, Special Considerations, Insufficient Reasons, Insufficient 
"PKG",223,22,1,"PAH",1,1,3,0)
Request Y/N, and Exam cancellation free text.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
6
"RTN","DVBA189P")
0^^B62924382^n/a
"RTN","DVBA189P",1,0)
DVBA189P ;ALB/GAK - PATCH DVBA*2.7*189 POST-INSTALL ROUTINE;08/08/2014
"RTN","DVBA189P",2,0)
 ;;2.7;AMIE;**189**;Apr 10, 1995;Build 22
"RTN","DVBA189P",3,0)
 ; This routine adds an entry to the REMOTE APPLICATION file (#8994.5) for VLER DAS-CAPRI
"RTN","DVBA189P",4,0)
 ; ALB/RTW -This routine adds new and hides old 2507 Cancelation Reasons in global (#396.5) for VLER DAS-CAPRI 
"RTN","DVBA189P",5,0)
 Q
"RTN","DVBA189P",6,0)
 ;
"RTN","DVBA189P",7,0)
ENTER ;
"RTN","DVBA189P",8,0)
 D INRSN
"RTN","DVBA189P",9,0)
 D SPCON
"RTN","DVBA189P",10,0)
 D CLMTYP
"RTN","DVBA189P",11,0)
 D CANRSN
"RTN","DVBA189P",12,0)
 Q
"RTN","DVBA189P",13,0)
 ;
"RTN","DVBA189P",14,0)
 ;
"RTN","DVBA189P",15,0)
INRSN ;SETUP THE INSUFFICIENT REASON FILE #396.94
"RTN","DVBA189P",16,0)
 ;HIDE REQUESTED INSUFFICIENT REASONS
"RTN","DVBA189P",17,0)
 N DVBAI,DVBLINE,FIND,OUT,IRIEN,RSN,CODE,REPORT
"RTN","DVBA189P",18,0)
 F DVBAI=1:1 S DVBLINE=$P($T(IRHIDE+DVBAI),";;",2) Q:DVBLINE="QUIT"  D
"RTN","DVBA189P",19,0)
 . K FIND,OUT
"RTN","DVBA189P",20,0)
 . S FIND=DVBLINE
"RTN","DVBA189P",21,0)
 . D FIND^DIC(396.94,"",.01,"X",.FIND,"","","","","OUT")
"RTN","DVBA189P",22,0)
 . S IRIEN=$G(OUT("DILIST",2,1))
"RTN","DVBA189P",23,0)
 . I IRIEN="" D BMES^XPDUTL("INSUFFICIENT REASON NOT ON FILE TO HIDE: "_DVBLINE) Q
"RTN","DVBA189P",24,0)
 . I '$D(^DVB(396.94,IRIEN)) D BMES^XPDUTL("INSUFFICIENT REASON NOT ON FILE TO HIDE: "_DVBLINE) Q
"RTN","DVBA189P",25,0)
 . ;
"RTN","DVBA189P",26,0)
 . Q:$P(^DVB(396.94,IRIEN,0),"^",4)'=""
"RTN","DVBA189P",27,0)
 . ;
"RTN","DVBA189P",28,0)
 . K FDA,ERR,KEYIEN
"RTN","DVBA189P",29,0)
 . S FDA(396.94,IRIEN_",",1)="Y"
"RTN","DVBA189P",30,0)
 . S KEYIEN(1)=IRIEN
"RTN","DVBA189P",31,0)
 . D UPDATE^DIE("","FDA","KEYIEN","ERR")
"RTN","DVBA189P",32,0)
 . I $G(ERR)'="" D BMES^XPDUTL("INSUFFICIENT REASON: "_DVBLINE_" COULD NOT BE DEACTIVATED BY POST-INSTALL ROUTINE. PLEASE SET INACTIVE FIELD TO YES.") Q
"RTN","DVBA189P",33,0)
 . D BMES^XPDUTL("INSUFFICIENT REASON: "_DVBLINE_" HAS BEEN DEACTIVATED.") Q
"RTN","DVBA189P",34,0)
 ;
"RTN","DVBA189P",35,0)
 ;NEW REQUESTED INSUFFICIENT REASONS
"RTN","DVBA189P",36,0)
 N DVBAI,DVBLINE,FIND,OUT
"RTN","DVBA189P",37,0)
 F DVBAI=1:1 S DVBLINE=$P($T(IRNEW+DVBAI),";;",2) Q:DVBLINE="QUIT"  D
"RTN","DVBA189P",38,0)
 . K FIND,OUT
"RTN","DVBA189P",39,0)
 . S FIND=$TR($P(DVBLINE,"^",1),"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","DVBA189P",40,0)
 . D FIND^DIC(396.94,"",.01,"X",.FIND,"","","","","OUT")
"RTN","DVBA189P",41,0)
 . I $G(OUT("DILIST",2,1))'="" D BMES^XPDUTL("INSUFFICIENT REASON: "_FIND_" HAS ALREADY BEEN ADDED.") D  Q
"RTN","DVBA189P",42,0)
 . . S DVBABIEN=OUT("DILIST","2",1)
"RTN","DVBA189P",43,0)
 . . S DVBAFDA(396.94,DVBABIEN_",",1)="N"
"RTN","DVBA189P",44,0)
 . . D FILE^DIE("","DVBAFDA","DVBAERR")
"RTN","DVBA189P",45,0)
 . K RSN,CODE,REPORT
"RTN","DVBA189P",46,0)
 . S RSN=$TR($P(DVBLINE,"^",1),"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","DVBA189P",47,0)
 . S CODE=$P(DVBLINE,"^",2)
"RTN","DVBA189P",48,0)
 . S REPORT=$P(DVBLINE,"^",3)
"RTN","DVBA189P",49,0)
 . K FDA,ERR
"RTN","DVBA189P",50,0)
 . S FDA(396.94,"+1,",.01)=RSN
"RTN","DVBA189P",51,0)
 . S FDA(396.94,"+1,",.02)=CODE
"RTN","DVBA189P",52,0)
 . S FDA(396.94,"+1,",.03)=REPORT
"RTN","DVBA189P",53,0)
 . S FDA(396.94,"+1,",1)="N"
"RTN","DVBA189P",54,0)
 . D UPDATE^DIE("","FDA","","ERR")
"RTN","DVBA189P",55,0)
 . I $G(ERR)'="" D BMES^XPDUTL("INSUFFICIENT REASON: "_RSN_" COULD NOT BE ADDED BY POST-INSTALL ROUTINE.") Q
"RTN","DVBA189P",56,0)
 . D BMES^XPDUTL("INSUFFICIENT REASON: "_RSN_" HAS BEEN ADDED.") Q
"RTN","DVBA189P",57,0)
 ;
"RTN","DVBA189P",58,0)
 Q
"RTN","DVBA189P",59,0)
 ;
"RTN","DVBA189P",60,0)
IRHIDE ;INACTIVATE THE FOLLOWING REASONS
"RTN","DVBA189P",61,0)
 ;;DIAGNOSIS INCONSISTENT WITH EVIDENCE
"RTN","DVBA189P",62,0)
 ;;EXAM PREVIOUSLY RETURNED AS INSUFFICIENT, RETURN AGAIN INSUFFICIENT
"RTN","DVBA189P",63,0)
 ;;EYE EXAM IS INSUFFICIENT
"RTN","DVBA189P",64,0)
 ;;FAILED TO PERFORM REQUESTED SPECIALIST EXAM
"RTN","DVBA189P",65,0)
 ;;FAILED TO PROVIDE ADDITIONAL EXAM RECOMMENDED BY EXAMINING PHYSICIAN
"RTN","DVBA189P",66,0)
 ;;FAILED TO PROVIDE RANGE OF MOTION
"RTN","DVBA189P",67,0)
 ;;FAILED TO PROVIDE REQUESTED MEDICAL OPINION
"RTN","DVBA189P",68,0)
 ;;FAILED TO PROVIDE TEST ROUTINELY DONE FOR SPECIFIC CONDITION
"RTN","DVBA189P",69,0)
 ;;FAILED TO REVIEW TEST RESULTS BEFORE MAKING DIAGNOSIS
"RTN","DVBA189P",70,0)
 ;;OTHER
"RTN","DVBA189P",71,0)
 ;;QUIT
"RTN","DVBA189P",72,0)
 Q
"RTN","DVBA189P",73,0)
 ;
"RTN","DVBA189P",74,0)
IRNEW ;ADD THE FOLLOWING NEW REASONS
"RTN","DVBA189P",75,0)
 ;;Failed to provide requested/required information^FRI^Failed to provide requested/required information
"RTN","DVBA189P",76,0)
 ;;Failed to provide medical opinion^FMO^Failed to provide medical opinion
"RTN","DVBA189P",77,0)
 ;;Failed to comply with BVA Remand Instructions^FBVA^Failed to comply with BVA Remand Instructions
"RTN","DVBA189P",78,0)
 ;;Failed to provide diagnosis^FPD^Failed to provide diagnosis
"RTN","DVBA189P",79,0)
 ;;Failed to provide rationale^FPR^Failed to provide rationale
"RTN","DVBA189P",80,0)
 ;;Conflicting information in report^CIR^Conflicting information in report
"RTN","DVBA189P",81,0)
 ;;Failed to address all conditions requested^FAC^Failed to address all conditions requested
"RTN","DVBA189P",82,0)
 ;;In-person examination was not performed^IPN^In-person examination was not performed
"RTN","DVBA189P",83,0)
 ;;Case required exam by a specialist^CRS^Case required exam by a specialist
"RTN","DVBA189P",84,0)
 ;;QUIT
"RTN","DVBA189P",85,0)
 Q
"RTN","DVBA189P",86,0)
 ;
"RTN","DVBA189P",87,0)
 ;
"RTN","DVBA189P",88,0)
SPCON ;SETUP THE 2507 SPECIAL CONSIDERATIONS FILE #396.25
"RTN","DVBA189P",89,0)
 ;NEW REQUESTED SPECIAL CONSIDERATIONS
"RTN","DVBA189P",90,0)
 N DVBAI,DVBLINE,DVBLINE,FIND,OUT
"RTN","DVBA189P",91,0)
 F DVBAI=1:1 S DVBLINE=$P($T(SCNEW+DVBAI),";;",2) Q:DVBLINE="QUIT"  D
"RTN","DVBA189P",92,0)
 . K FIND,OUT
"RTN","DVBA189P",93,0)
 . S FIND=$TR(DVBLINE,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","DVBA189P",94,0)
 . D FIND^DIC(396.25,"",.01,"X",.FIND,"","","","","OUT")
"RTN","DVBA189P",95,0)
 . I $G(OUT("DILIST",2,1))'="" D BMES^XPDUTL("SPECIAL CONSIDERATION: "_FIND_" HAS ALREADY BEEN ADDED.") Q
"RTN","DVBA189P",96,0)
 . K FDA,ERR
"RTN","DVBA189P",97,0)
 . S DVBLINE=$TR(DVBLINE,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","DVBA189P",98,0)
 . S FDA(396.25,"+1,",.01)=DVBLINE
"RTN","DVBA189P",99,0)
 . D UPDATE^DIE("","FDA","","ERR")
"RTN","DVBA189P",100,0)
 . I $G(ERR)'="" D BMES^XPDUTL("SPECIAL CONSIDERATION: "_DVBLINE_" COULD NOT BE ADDED BY POST-INSTALL ROUTINE.") Q
"RTN","DVBA189P",101,0)
 . D BMES^XPDUTL("SPECIAL CONSIDERATION: "_DVBLINE_" HAS BEEN ADDED.") Q
"RTN","DVBA189P",102,0)
 ;
"RTN","DVBA189P",103,0)
 Q
"RTN","DVBA189P",104,0)
 ;
"RTN","DVBA189P",105,0)
SCNEW ;ADD THE FOLLOWING NEW SPECIAL CONSIDERATIONS
"RTN","DVBA189P",106,0)
 ;;AGE OF CLAIM
"RTN","DVBA189P",107,0)
 ;;FDC
"RTN","DVBA189P",108,0)
 ;;HOMELESS
"RTN","DVBA189P",109,0)
 ;;NOT APPLICABLE
"RTN","DVBA189P",110,0)
 ;;POW
"RTN","DVBA189P",111,0)
 ;;TERMINAL
"RTN","DVBA189P",112,0)
 ;;QUIT
"RTN","DVBA189P",113,0)
 Q
"RTN","DVBA189P",114,0)
 ;
"RTN","DVBA189P",115,0)
 ;
"RTN","DVBA189P",116,0)
CLMTYP ;SETUP THE 2507 CLAIM TYPE FILE #396.27
"RTN","DVBA189P",117,0)
 ;NEW REQUESTED CLAIM TYPES
"RTN","DVBA189P",118,0)
 N DVBAI,DVBLINE,DVBLINE,FIND,OUT
"RTN","DVBA189P",119,0)
 F DVBAI=1:1 S DVBLINE=$P($T(CTNEW+DVBAI),";;",2) Q:DVBLINE="QUIT"  D
"RTN","DVBA189P",120,0)
 . K FIND,OUT
"RTN","DVBA189P",121,0)
 . S FIND=$TR(DVBLINE,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","DVBA189P",122,0)
 . D FIND^DIC(396.27,"",.01,"X",.FIND,"","","","","OUT")
"RTN","DVBA189P",123,0)
 . I $G(OUT("DILIST",2,1))'="" D BMES^XPDUTL("CLAIM TYPE: "_FIND_" HAS ALREADY BEEN ADDED.") Q
"RTN","DVBA189P",124,0)
 . K FDA,ERR
"RTN","DVBA189P",125,0)
 . S DVBLINE=$TR(DVBLINE,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","DVBA189P",126,0)
 . S FDA(396.27,"+1,",.01)=DVBLINE
"RTN","DVBA189P",127,0)
 . D UPDATE^DIE("","FDA","","ERR")
"RTN","DVBA189P",128,0)
 . I $G(ERR)'="" D BMES^XPDUTL("CLAIM TYPE: "_DVBLINE_" COULD NOT BE ADDED BY POST-INSTALL ROUTINE.") Q
"RTN","DVBA189P",129,0)
 . D BMES^XPDUTL("CLAIM TYPE: "_DVBLINE_" HAS BEEN ADDED.") Q
"RTN","DVBA189P",130,0)
 ;
"RTN","DVBA189P",131,0)
 Q
"RTN","DVBA189P",132,0)
 ;
"RTN","DVBA189P",133,0)
CTNEW ;ADD THE FOLLOWING NEW CLAIM TYPES
"RTN","DVBA189P",134,0)
 ;;BDD
"RTN","DVBA189P",135,0)
 ;;BDD - DOD SHA
"RTN","DVBA189P",136,0)
 ;;IDES
"RTN","DVBA189P",137,0)
 ;;INCREASE ONLY
"RTN","DVBA189P",138,0)
 ;;ORIGINAL
"RTN","DVBA189P",139,0)
 ;;QUICK START
"RTN","DVBA189P",140,0)
 ;;SUPPLEMENTAL
"RTN","DVBA189P",141,0)
 ;;QUIT
"RTN","DVBA189P",142,0)
 Q
"RTN","DVBA189P",143,0)
 ;
"RTN","DVBA189P",144,0)
CANRSN ;SETUP THE CANCELLATION REASON FILE #396.5
"RTN","DVBA189P",145,0)
 ;HIDE REQUESTED CANCELLATION REASONS
"RTN","DVBA189P",146,0)
 N DVBAI,DVBLINE,FIND,OUT,IRIEN,RSN,CODE,REPORT
"RTN","DVBA189P",147,0)
 F DVBAI=1:1 S DVBLINE=$P($T(CANHIDE+DVBAI),";;",2) Q:DVBLINE="QUIT"  D
"RTN","DVBA189P",148,0)
 . K FIND,OUT
"RTN","DVBA189P",149,0)
 . S FIND=DVBLINE
"RTN","DVBA189P",150,0)
 . D FIND^DIC(396.5,"",.01,"X",.FIND,"","","","","OUT")
"RTN","DVBA189P",151,0)
 . S IRIEN=$G(OUT("DILIST",2,1))
"RTN","DVBA189P",152,0)
 . I IRIEN="" D BMES^XPDUTL("CANCELLATION REASON NOT ON FILE TO HIDE: "_DVBLINE) Q
"RTN","DVBA189P",153,0)
 . I '$D(^DVB(396.5,IRIEN)) D BMES^XPDUTL("CANCELLATION REASON NOT ON FILE TO HIDE: "_DVBLINE) Q
"RTN","DVBA189P",154,0)
 . ;
"RTN","DVBA189P",155,0)
 . Q:$P(^DVB(396.5,IRIEN,0),"^",4)'=""
"RTN","DVBA189P",156,0)
 . ;
"RTN","DVBA189P",157,0)
 . K FDA,ERR,KEYIEN
"RTN","DVBA189P",158,0)
 . S FDA(396.5,IRIEN_",",.02)=0
"RTN","DVBA189P",159,0)
 . S KEYIEN(1)=IRIEN
"RTN","DVBA189P",160,0)
 . D UPDATE^DIE("","FDA","KEYIEN","ERR")
"RTN","DVBA189P",161,0)
 . I $G(ERR)'="" D BMES^XPDUTL("CANCELLATION REASON: "_DVBLINE_" COULD NOT BE DEACTIVATED BY POST-INSTALL ROUTINE. PLEASE SET INACTIVE FIELD TO YES.") Q
"RTN","DVBA189P",162,0)
 . D BMES^XPDUTL("CANCELLATION REASON: "_DVBLINE_" HAS BEEN DEACTIVATED.") Q
"RTN","DVBA189P",163,0)
 ;
"RTN","DVBA189P",164,0)
CANNEW ;NEW REQUESTED CANCELLATION REASONS
"RTN","DVBA189P",165,0)
 N DVBAI,DVBLINE,FIND,OUT
"RTN","DVBA189P",166,0)
 F DVBAI=1:1 S DVBLINE=$P($T(CANRNEW+DVBAI),";;",2) Q:DVBLINE="QUIT"  D
"RTN","DVBA189P",167,0)
 . K FIND,OUT
"RTN","DVBA189P",168,0)
 . S FIND=$P(DVBLINE,"^",1)
"RTN","DVBA189P",169,0)
 . D FIND^DIC(396.5,"",.01,"X",.FIND,"","","","","OUT")
"RTN","DVBA189P",170,0)
 . I $G(OUT("DILIST",2,1))'="" D BMES^XPDUTL("CANCELLATION REASON: "_FIND_" HAS ALREADY BEEN ADDED.") D  Q
"RTN","DVBA189P",171,0)
 . . S DVBABIEN=OUT("DILIST","2",1)
"RTN","DVBA189P",172,0)
 . . S DVBAFDA(396.5,DVBABIEN_",",.02)="1"
"RTN","DVBA189P",173,0)
 . . D FILE^DIE("","DVBAFDA","DVBAERR")
"RTN","DVBA189P",174,0)
 . K CRSN,CODE,REPORT
"RTN","DVBA189P",175,0)
 . S CRSN=$P(DVBLINE,"^",1)
"RTN","DVBA189P",176,0)
 . K FDA,ERR
"RTN","DVBA189P",177,0)
 . S FDA(396.5,"+1,",.01)=CRSN
"RTN","DVBA189P",178,0)
 . S FDA(396.5,"+1,",.02)="1"
"RTN","DVBA189P",179,0)
 . D UPDATE^DIE("","FDA","","ERR")
"RTN","DVBA189P",180,0)
 . I $G(ERR)'="" D BMES^XPDUTL("CANCELLATION REASON: "_CRSN_" COULD NOT BE ADDED BY POST-INSTALL ROUTINE.") Q
"RTN","DVBA189P",181,0)
 . D BMES^XPDUTL("CANCELLATION REASON: "_CRSN_" HAS BEEN ADDED.") Q
"RTN","DVBA189P",182,0)
 ;
"RTN","DVBA189P",183,0)
 Q
"RTN","DVBA189P",184,0)
 ;
"RTN","DVBA189P",185,0)
CANHIDE ;INACTIVATE THE FOLLOWING CANCELLATION REASONS
"RTN","DVBA189P",186,0)
 ;;ADEQUATE MEDICAL EVIDENCE
"RTN","DVBA189P",187,0)
 ;;DUPLICATE EXAM
"RTN","DVBA189P",188,0)
 ;;EMPLOYEE
"RTN","DVBA189P",189,0)
 ;;EXAM NAME DELETED FROM FILE
"RTN","DVBA189P",190,0)
 ;;FAILED TO REPORT
"RTN","DVBA189P",191,0)
 ;;INCORRECT JURISDICTION
"RTN","DVBA189P",192,0)
 ;;INCORRECT TEST ORDERED
"RTN","DVBA189P",193,0)
 ;;NO EXAMS ORDERED
"RTN","DVBA189P",194,0)
 ;;NOT ENOUGH INFORMATION
"RTN","DVBA189P",195,0)
 ;;UNDELIVERED NOTIFICATION
"RTN","DVBA189P",196,0)
 ;;VET REFUSED EXAM THIS LOCATION
"RTN","DVBA189P",197,0)
 ;;VETERAN CANCELLED EXAM FOR DBQ
"RTN","DVBA189P",198,0)
 ;;VETERAN WITHDREW CLAIM
"RTN","DVBA189P",199,0)
 ;;QUIT
"RTN","DVBA189P",200,0)
 Q
"RTN","DVBA189P",201,0)
 ;
"RTN","DVBA189P",202,0)
CANRNEW ;ADD THE FOLLOWING NEW CANCELLATION REASONS
"RTN","DVBA189P",203,0)
 ;;DUPLICATE REQUEST
"RTN","DVBA189P",204,0)
 ;;EXAM REQUESTED AT DIFFERENT LOCATION
"RTN","DVBA189P",205,0)
 ;;EXAM REQUESTED IN ERROR
"RTN","DVBA189P",206,0)
 ;;INCOMPLETE REQUEST
"RTN","DVBA189P",207,0)
 ;;UNABLE TO CONTACT VETERAN
"RTN","DVBA189P",208,0)
 ;;VETERAN DIED
"RTN","DVBA189P",209,0)
 ;;VETERAN FAILED TO REPORT
"RTN","DVBA189P",210,0)
 ;;VETERAN FAILED TO RSVP
"RTN","DVBA189P",211,0)
 ;;VETERAN HOSPITALIZED
"RTN","DVBA189P",212,0)
 ;;VETERAN IS EMPLOYEE
"RTN","DVBA189P",213,0)
 ;;VETERAN REFUSED EXAM
"RTN","DVBA189P",214,0)
 ;;QUIT
"RTN","DVBA189P",215,0)
 Q
"RTN","DVBAB1A")
0^2^B41988424^B29208076
"RTN","DVBAB1A",1,0)
DVBAB1A ;ALB/GAK - CAPRI Exam Complete Email Driver ; 03/13/2013 11:23 AM
"RTN","DVBAB1A",2,0)
 ;;2.7;AMIE;**185,187,189**;Apr 10, 1995;Build 22
"RTN","DVBAB1A",3,0)
 ;
"RTN","DVBAB1A",4,0)
 Q
"RTN","DVBAB1A",5,0)
 ; 
"RTN","DVBAB1A",6,0)
MSG2(ERR,DUZ,RIEN,ELIST) ;
"RTN","DVBAB1A",7,0)
 ;
"RTN","DVBAB1A",8,0)
 ;DUZ     PERSON FILE DFN
"RTN","DVBAB1A",9,0)
 ;RIEN    2507 REQUEST IEN #396.3
"RTN","DVBAB1A",10,0)
 ;ELIST   2507 EXAM LIST #396.4
"RTN","DVBAB1A",11,0)
 ;
"RTN","DVBAB1A",12,0)
 N DVBOPEN,DVBOPENS,DVBOPENC,J
"RTN","DVBAB1A",13,0)
 N PNAM,PSSN,CNUM,ERR3,ERR2,ERR4,RTN,RTN2,XX
"RTN","DVBAB1A",14,0)
 ;N POE
"RTN","DVBAB1A",15,0)
 N MSG1,MERR1,CTR1
"RTN","DVBAB1A",16,0)
 N MSG2,MERR2,CTR2
"RTN","DVBAB1A",17,0)
 N CLMTYP
"RTN","DVBAB1A",18,0)
 N EIEN,EARY,EERR,ENAM,ESTA
"RTN","DVBAB1A",19,0)
 N XMTEXT,L,XMSUB,XMY
"RTN","DVBAB1A",20,0)
 N MSG,MERR
"RTN","DVBAB1A",21,0)
 ;
"RTN","DVBAB1A",22,0)
 S ERR=""
"RTN","DVBAB1A",23,0)
 I DUZ="" S ERR="NO DUZ PASSED" Q ERR
"RTN","DVBAB1A",24,0)
 I RIEN="" S ERR="NO REQUEST IEN PASSED" Q ERR
"RTN","DVBAB1A",25,0)
 I $D(ELIST)'>1 S ERR="NO EXAM LIST PASSED" Q ERR
"RTN","DVBAB1A",26,0)
 ;
"RTN","DVBAB1A",27,0)
 K ^TMP($J,"DVBAB1A")
"RTN","DVBAB1A",28,0)
 K ^TMP($J,"AMIE")
"RTN","DVBAB1A",29,0)
 K ^TMP($J,"AMIE1")
"RTN","DVBAB1A",30,0)
 ;
"RTN","DVBAB1A",31,0)
 S J=""
"RTN","DVBAB1A",32,0)
 F  S J=$O(ELIST(J)) Q:J=""  D
"RTN","DVBAB1A",33,0)
 . S ^TMP($J,"DVBAB1A","ELIST",J)=J
"RTN","DVBAB1A",34,0)
 ;
"RTN","DVBAB1A",35,0)
 ;Determine and count number of open exams on 2507 request
"RTN","DVBAB1A",36,0)
 S DVBOPEN=""
"RTN","DVBAB1A",37,0)
 S DVBOPENS=0,DVBOPENC=0
"RTN","DVBAB1A",38,0)
 D FINDEXAM^DVBAB1(.DVBOPEN,RIEN)
"RTN","DVBAB1A",39,0)
 S J="" F  S J=$O(DVBOPEN(J)) Q:J=""  D
"RTN","DVBAB1A",40,0)
 . I $E(DVBOPEN(J),($L(DVBOPEN(J))-5),$L(DVBOPEN(J)))="[OPEN]" S DVBOPENS=1,DVBOPENC=DVBOPENC+1
"RTN","DVBAB1A",41,0)
 ;
"RTN","DVBAB1A",42,0)
 ;Determine patient name, SSN and C-Number
"RTN","DVBAB1A",43,0)
 S (PNAM,PSSN,CNUM,ERR3,ERR2,RTN,RTN2,XX)=""
"RTN","DVBAB1A",44,0)
 K RTN,ERR3
"RTN","DVBAB1A",45,0)
 D GETS^DIQ(396.3,RIEN,".01","I","RTN","ERR3")
"RTN","DVBAB1A",46,0)
 I $D(RTN) D
"RTN","DVBAB1A",47,0)
 . S XX=""_".01;.09;.313"_""
"RTN","DVBAB1A",48,0)
 . K RTN2,ERR2
"RTN","DVBAB1A",49,0)
 . D GETS^DIQ(2,RTN(396.3,RIEN_",",.01,"I"),XX,"E","RTN2","ERR2")
"RTN","DVBAB1A",50,0)
 . S PNAM=$G(RTN2(2,RTN(396.3,RIEN_",",.01,"I")_",",.01,"E"))
"RTN","DVBAB1A",51,0)
 . S PSSN=$G(RTN2(2,RTN(396.3,RIEN_",",.01,"I")_",",.09,"E"))
"RTN","DVBAB1A",52,0)
 . S CNUM=$G(RTN2(2,RTN(396.3,RIEN_",",.01,"I")_",",.313,"E"))
"RTN","DVBAB1A",53,0)
 S:'$D(PNAM) PNAM=""
"RTN","DVBAB1A",54,0)
 S:'$D(PSSN) PSSN=""
"RTN","DVBAB1A",55,0)
 S:'$D(CNUM) CNUM=""
"RTN","DVBAB1A",56,0)
 ;
"RTN","DVBAB1A",57,0)
 ;Build Exam Array Info
"RTN","DVBAB1A",58,0)
 K ^TMP($J,"DVBAB1A","ELIST")
"RTN","DVBAB1A",59,0)
 S J=""
"RTN","DVBAB1A",60,0)
 F  S J=$O(ELIST(J)) Q:J=""  D
"RTN","DVBAB1A",61,0)
 . S EIEN=ELIST(J)
"RTN","DVBAB1A",62,0)
 . K EARY,EERR
"RTN","DVBAB1A",63,0)
 . D GETS^DIQ(396.4,EIEN,".03;.04","IE","EARY","EERR")
"RTN","DVBAB1A",64,0)
 . Q:'$D(EARY(396.4,EIEN_",",.03,"E"))
"RTN","DVBAB1A",65,0)
 . S ENAM=$G(EARY(396.4,EIEN_",",.03,"E"))
"RTN","DVBAB1A",66,0)
 . S ESTA=$G(EARY(396.4,EIEN_",",.04,"E"))
"RTN","DVBAB1A",67,0)
 . S ^TMP($J,"DVBAB1A","ELIST",J)=ENAM_$E("                                   ",1,35-$L(ENAM))_" "_ESTA
"RTN","DVBAB1A",68,0)
 ;
"RTN","DVBAB1A",69,0)
 ;Determine Priority of Exam
"RTN","DVBAB1A",70,0)
 ;K ERR4
"RTN","DVBAB1A",71,0)
 ;S POE=$$GET1^DIQ(396.3,RIEN_",",9,"E","","ERR4")
"RTN","DVBAB1A",72,0)
 ;I '$D(POE) S POE=""
"RTN","DVBAB1A",73,0)
 ;
"RTN","DVBAB1A",74,0)
 ;Build Claim Type Info
"RTN","DVBAB1A",75,0)
 N MSG1,MERR1,CTR1
"RTN","DVBAB1A",76,0)
 K ^TMP($J,"DVBAB1A","CT")
"RTN","DVBAB1A",77,0)
 S MSG1="",MERR1="",CTR1=1
"RTN","DVBAB1A",78,0)
 D GETS^DIQ(396.3,RIEN_",","9.1*","E","MSG1","MERR1")
"RTN","DVBAB1A",79,0)
 I $G(MERR1)'="" S ^TMP($J,"DVBAB1A","CT",CTR1)="ERROR GETTING CLAIM TYPE CODES"
"RTN","DVBAB1A",80,0)
 S J=""
"RTN","DVBAB1A",81,0)
 F  S J=$O(MSG1(396.32,J)) Q:J=""  D
"RTN","DVBAB1A",82,0)
 . S CTR1=CTR1+1
"RTN","DVBAB1A",83,0)
 . S ^TMP($J,"DVBAB1A","CT",CTR1)=$G(MSG1(396.32,J,.01,"E"))
"RTN","DVBAB1A",84,0)
 ;
"RTN","DVBAB1A",85,0)
 ;Build Special Considerations Info
"RTN","DVBAB1A",86,0)
 N MSG2,MERR2,CTR2
"RTN","DVBAB1A",87,0)
 K ^TMP($J,"DVBAB1A","SC")
"RTN","DVBAB1A",88,0)
 S MSG2="",MERR2="",CTR2=1
"RTN","DVBAB1A",89,0)
 D GETS^DIQ(396.3,RIEN,"50*","IE","MSG2","MERR2")
"RTN","DVBAB1A",90,0)
 I $G(MERR2)'="" S ^TMP($J,"DVBAB1A","SC",CTR2)="ERROR GETTING SPECIAL CONSIDERATION CODES"
"RTN","DVBAB1A",91,0)
 S J=""
"RTN","DVBAB1A",92,0)
 F  S J=$O(MSG2(396.31,J)) Q:J=""  D
"RTN","DVBAB1A",93,0)
 . S CTR2=CTR2+1
"RTN","DVBAB1A",94,0)
 . S ^TMP($J,"DVBAB1A","SC",CTR2)=$G(MSG2(396.31,J,.01,"E"))
"RTN","DVBAB1A",95,0)
 ;
"RTN","DVBAB1A",96,0)
 ;
"RTN","DVBAB1A",97,0)
 D ONEEMAIL
"RTN","DVBAB1A",98,0)
 ;
"RTN","DVBAB1A",99,0)
 K ^TMP($J,"DVBAB1A","ELIST")
"RTN","DVBAB1A",100,0)
 K ^TMP($J,"DVBAB1A","CT")
"RTN","DVBAB1A",101,0)
 K ^TMP($J,"DVBAB1A","SC")
"RTN","DVBAB1A",102,0)
 K ^TMP($J,"AMIE")
"RTN","DVBAB1A",103,0)
 K ^TMP($J,"AMIE1")
"RTN","DVBAB1A",104,0)
 I $D(ERR) Q ERR
"RTN","DVBAB1A",105,0)
 ;
"RTN","DVBAB1A",106,0)
 Q
"RTN","DVBAB1A",107,0)
 ;
"RTN","DVBAB1A",108,0)
 ;
"RTN","DVBAB1A",109,0)
 ;
"RTN","DVBAB1A",110,0)
ONEEMAIL ;
"RTN","DVBAB1A",111,0)
 K ERR
"RTN","DVBAB1A",112,0)
 N DVBA0,DVBADFN,DVBASITE,DVBADT,DVBAREQ,DVBAEA
"RTN","DVBAB1A",113,0)
 S XMDUZ=DUZ
"RTN","DVBAB1A",114,0)
 ;following call supported by IA 3858
"RTN","DVBAB1A",115,0)
 N DUZ
"RTN","DVBAB1A",116,0)
 ;SINCE MAILMAN DOES NOT ALLOW MESSAGES TO BE SENT FROM USERS WITHOUT ACCESS CODES OR MAILBOXES
"RTN","DVBAB1A",117,0)
 ;WHICH CAPRI REMOTE USER DO NOT HAVE, WE HAVE TO NEW DUZ AND CHANGE XMDUZ TO THE NAME OF THE USER
"RTN","DVBAB1A",118,0)
 ;AS A STRING SO THE PROCESS IS STILL LINKED TO THE USER SENDING/TRIGGERING THE MESSAGE
"RTN","DVBAB1A",119,0)
 ;
"RTN","DVBAB1A",120,0)
 S XMDUZ=$P($G(^VA(200,XMDUZ,0)),"^",1)_" CAPRI"
"RTN","DVBAB1A",121,0)
 I $G(^DVB(396.3,RIEN,0))="" S ERR="INVALID REQUEST 396.3 TOP NODE" Q
"RTN","DVBAB1A",122,0)
 S DVBA0=$G(^DVB(396.3,RIEN,0))
"RTN","DVBAB1A",123,0)
 S DVBADFN=$P(DVBA0,"^",1),DVBAREQ=$P(DVBA0,"^",4),DVBADT=$$FMTE^XLFDT($P(DVBA0,"^",2))
"RTN","DVBAB1A",124,0)
 ;following call supported by IA 3858
"RTN","DVBAB1A",125,0)
 ;rra 938270 make sure email address exists prior to attempting to send notification
"RTN","DVBAB1A",126,0)
 S DVBAEA=$P($G(^VA(200,DVBAREQ,.15)),"^",1)
"RTN","DVBAB1A",127,0)
 I DVBAEA="" Q
"RTN","DVBAB1A",128,0)
 S XMY(DVBAEA)=""
"RTN","DVBAB1A",129,0)
 ;
"RTN","DVBAB1A",130,0)
 S DVBASITE=$$SITE^VASITE
"RTN","DVBAB1A",131,0)
 I '$D(DVBASITE) S DVBASITE="^"
"RTN","DVBAB1A",132,0)
 ;
"RTN","DVBAB1A",133,0)
 S XMSUB="CAPRI: Completion of 2507 Exams"
"RTN","DVBAB1A",134,0)
 ;
"RTN","DVBAB1A",135,0)
 S L=0
"RTN","DVBAB1A",136,0)
 S L=L+1
"RTN","DVBAB1A",137,0)
 S ^TMP($J,"AMIE",L)="The following veteran had one or more 2507 exams completed.",L=L+1
"RTN","DVBAB1A",138,0)
 I DVBOPENS=0 S ^TMP($J,"AMIE",L)="A 2507 request as described below has been completed and released to the regional office and is now available in CAPRI.",L=L+1
"RTN","DVBAB1A",139,0)
 S ^TMP($J,"AMIE",L)=" ",L=L+1
"RTN","DVBAB1A",140,0)
 S ^TMP($J,"AMIE",L)="DFN: `"_DVBADFN_"       SITE: "_$P($G(DVBASITE),"^",2)_"       Request Date: "_DVBADT
"RTN","DVBAB1A",141,0)
 S L=L+1
"RTN","DVBAB1A",142,0)
 S ^TMP($J,"AMIE",L)=" ",L=L+1
"RTN","DVBAB1A",143,0)
 ;
"RTN","DVBAB1A",144,0)
 S ^TMP($J,"AMIE",L)="  Special Consideration(s):",L=L+1
"RTN","DVBAB1A",145,0)
 S J=""
"RTN","DVBAB1A",146,0)
 F  S J=$O(^TMP($J,"DVBAB1A","SC",J)) Q:J=""  D
"RTN","DVBAB1A",147,0)
 . S ^TMP($J,"AMIE",L)="    "_^TMP($J,"DVBAB1A","SC",J),L=L+1
"RTN","DVBAB1A",148,0)
 S ^TMP($J,"AMIE",L)=" ",L=L+1
"RTN","DVBAB1A",149,0)
 ;
"RTN","DVBAB1A",150,0)
 ;S ^TMP($J,"AMIE",L)="  Priority of Exam: "_POE,L=L+1
"RTN","DVBAB1A",151,0)
 ;S ^TMP($J,"AMIE",L)=" ",L=L+1
"RTN","DVBAB1A",152,0)
 ;
"RTN","DVBAB1A",153,0)
 S ^TMP($J,"AMIE",L)="  Claim Type:",L=L+1
"RTN","DVBAB1A",154,0)
 S J=""
"RTN","DVBAB1A",155,0)
 F  S J=$O(^TMP($J,"DVBAB1A","CT",J)) Q:J=""  D
"RTN","DVBAB1A",156,0)
 . S ^TMP($J,"AMIE",L)="    "_^TMP($J,"DVBAB1A","CT",J),L=L+1
"RTN","DVBAB1A",157,0)
 S ^TMP($J,"AMIE",L)=" ",L=L+1
"RTN","DVBAB1A",158,0)
 ;
"RTN","DVBAB1A",159,0)
 S ^TMP($J,"AMIE",L)="Exam(s)",L=L+1
"RTN","DVBAB1A",160,0)
 S ^TMP($J,"AMIE",L)="   EXAM TYPE                          STATUS",L=L+1
"RTN","DVBAB1A",161,0)
 ;
"RTN","DVBAB1A",162,0)
 S J=""
"RTN","DVBAB1A",163,0)
 F  S J=$O(^TMP($J,"DVBAB1A","ELIST",J)) Q:J=""  D
"RTN","DVBAB1A",164,0)
 . S ^TMP($J,"AMIE",L)="   "_^TMP($J,"DVBAB1A","ELIST",J),L=L+1
"RTN","DVBAB1A",165,0)
 ;
"RTN","DVBAB1A",166,0)
 S ^TMP($J,"AMIE",L)=" ",L=L+1
"RTN","DVBAB1A",167,0)
 S ^TMP($J,"AMIE",L)=" ",L=L+1
"RTN","DVBAB1A",168,0)
 ;
"RTN","DVBAB1A",169,0)
 I DVBOPENS=1 S ^TMP($J,"AMIE",L)="*** Number of exams still open on this request: "_DVBOPENC_" ***",L=L+1
"RTN","DVBAB1A",170,0)
 I DVBOPENS=0 S ^TMP($J,"AMIE",L)="*** This is the last exam to be completed on this 2507 request. ***",L=L+1
"RTN","DVBAB1A",171,0)
 ;
"RTN","DVBAB1A",172,0)
 S ^TMP($J,"AMIE",L)=" ",L=L+1
"RTN","DVBAB1A",173,0)
 S ^TMP($J,"AMIE",L)=" ",L=L+1
"RTN","DVBAB1A",174,0)
 S ^TMP($J,"AMIE",L)="** NOTE: To view the patient using the DFN, paste the DFN number into the CAPRI **",L=L+1
"RTN","DVBAB1A",175,0)
 S ^TMP($J,"AMIE",L)="** Patient Selector 'Patient ID' field to find the patient. Be sure to include  **",L=L+1
"RTN","DVBAB1A",176,0)
 S ^TMP($J,"AMIE",L)="** the ` (backward-apostrophe) character.                                       **",L=L+1
"RTN","DVBAB1A",177,0)
 S ^TMP($J,"AMIE",L)=" ",L=L+1
"RTN","DVBAB1A",178,0)
 S ^TMP($J,"AMIE",L)="*****This is an auto-generated email.  Do not respond to this email address.*****",L=L+1
"RTN","DVBAB1A",179,0)
 ;
"RTN","DVBAB1A",180,0)
 S XMTEXT="^TMP($J,""AMIE"","
"RTN","DVBAB1A",181,0)
 ;
"RTN","DVBAB1A",182,0)
 D ^XMD
"RTN","DVBAB1A",183,0)
 ;
"RTN","DVBAB1A",184,0)
 I $D(XMMG) S ERR=XMMG
"RTN","DVBAB1A",185,0)
 I $D(XMZ) S ERR="MESSAGE SENT"
"RTN","DVBAB1A",186,0)
 ;
"RTN","DVBAB1A",187,0)
 Q
"RTN","DVBACPR1")
0^1^B24355117^n/a
"RTN","DVBACPR1",1,0)
DVBACPR1 ;ALB/GAK - PATCH DVBA*2.7*189 introduced field utility RPCs;08/08/2014
"RTN","DVBACPR1",2,0)
 ;;2.7;AMIE;**189**;Apr 10, 1995;Build 22
"RTN","DVBACPR1",3,0)
 ; This routine provides list, get and set features for several CAPRI RPCs
"RTN","DVBACPR1",4,0)
 Q
"RTN","DVBACPR1",5,0)
 ;
"RTN","DVBACPR1",6,0)
LSTCT(RTRN) ;
"RTN","DVBACPR1",7,0)
 ;LIST VALID CLAIM TYPES
"RTN","DVBACPR1",8,0)
 ;RPC: DVBA CAPRI LISTCLAIMTYPE
"RTN","DVBACPR1",9,0)
 N CTIEN,CODE,CTR
"RTN","DVBACPR1",10,0)
 K ^TEMP($J,"LSTCT")
"RTN","DVBACPR1",11,0)
 S CTIEN=0
"RTN","DVBACPR1",12,0)
 F  S CTIEN=$O(^DVB(396.27,CTIEN)) Q:CTIEN=""!('CTIEN)  D
"RTN","DVBACPR1",13,0)
 . Q:$G(^DVB(396.27,CTIEN,0))=""
"RTN","DVBACPR1",14,0)
 . S ^TEMP($J,"LSTCT",$P(^DVB(396.27,CTIEN,0),"^",1))=CTIEN
"RTN","DVBACPR1",15,0)
 S CODE="",CTR=0
"RTN","DVBACPR1",16,0)
 F  S CODE=$O(^TEMP($J,"LSTCT",CODE)) Q:CODE=""  D
"RTN","DVBACPR1",17,0)
 . S CTR=CTR+1
"RTN","DVBACPR1",18,0)
 . S RTRN(CTR)=CODE_"^"_^TEMP($J,"LSTCT",CODE)
"RTN","DVBACPR1",19,0)
 K ^TEMP($J,"LSTCT")
"RTN","DVBACPR1",20,0)
 Q
"RTN","DVBACPR1",21,0)
 ;
"RTN","DVBACPR1",22,0)
GETCT(RTRN,REQIEN) ;
"RTN","DVBACPR1",23,0)
 ;GET CLAIM TYPE
"RTN","DVBACPR1",24,0)
 ;RPC: DVBA CAPRI GETCLAIMTYPE
"RTN","DVBACPR1",25,0)
 I $G(REQIEN)="" S RTRN(1)="INVALID REQUEST IEN" Q
"RTN","DVBACPR1",26,0)
 I '$D(^DVB(396.3,$G(REQIEN))) S RTRN(1)="INVALID REQUEST IEN" Q
"RTN","DVBACPR1",27,0)
 N MSG,ERR,CTR,MSGIEN,FIND,OUT
"RTN","DVBACPR1",28,0)
 D GETS^DIQ(396.3,REQIEN_",","9.1*","E","MSG","ERR")
"RTN","DVBACPR1",29,0)
 I $D(ERR)>1 S RTRN(1)="NO CLAIM TYPE ON FILE" Q
"RTN","DVBACPR1",30,0)
 S CTR=0
"RTN","DVBACPR1",31,0)
 S MSGIEN="" F  S MSGIEN=$O(MSG(396.32,MSGIEN)) Q:MSGIEN=""  D
"RTN","DVBACPR1",32,0)
 . S CTR=CTR+1
"RTN","DVBACPR1",33,0)
 . K FIND,OUT
"RTN","DVBACPR1",34,0)
 . S FIND=MSG(396.32,MSGIEN,.01,"E")
"RTN","DVBACPR1",35,0)
 . D FIND^DIC(396.27,"",.01,"",.FIND,"","","","","OUT")
"RTN","DVBACPR1",36,0)
 . S RTRN(CTR)=MSG(396.32,MSGIEN,.01,"E")_"^"_$G(OUT("DILIST",2,1))
"RTN","DVBACPR1",37,0)
 Q
"RTN","DVBACPR1",38,0)
 ;
"RTN","DVBACPR1",39,0)
SETCT(RTRN,REQIEN,ARRAYCT) ;
"RTN","DVBACPR1",40,0)
 ;SET CLAIM TYPE
"RTN","DVBACPR1",41,0)
 ;RPC: DVBA CAPRI SETCLAIMTYPE
"RTN","DVBACPR1",42,0)
 ;
"RTN","DVBACPR1",43,0)
 N VAL,SUB,DA,DIK
"RTN","DVBACPR1",44,0)
 S VAL="" F  S VAL=$O(^DVB(396.3,REQIEN,9,"B",VAL)) Q:VAL=""  D
"RTN","DVBACPR1",45,0)
 . S SUB="" F  S SUB=$O(^DVB(396.3,REQIEN,9,"B",VAL,SUB)) Q:SUB=""  D 
"RTN","DVBACPR1",46,0)
 .. K DA,DIK
"RTN","DVBACPR1",47,0)
 .. S DA(1)=REQIEN
"RTN","DVBACPR1",48,0)
 .. S DA=SUB
"RTN","DVBACPR1",49,0)
 .. S DIK="^DVB(396.3,"_DA(1)_",""9"","
"RTN","DVBACPR1",50,0)
 .. D ^DIK
"RTN","DVBACPR1",51,0)
 ;
"RTN","DVBACPR1",52,0)
 I $G(REQIEN)="" S RTRN(1)="INVALID REQUEST IEN" Q
"RTN","DVBACPR1",53,0)
 I '$D(^DVB(396.3,$G(REQIEN))) S RTRN(1)="INVALID EXAM IEN" Q
"RTN","DVBACPR1",54,0)
 N ARYIEN,CTR,FDA,ERR,KEYIEN,FIND
"RTN","DVBACPR1",55,0)
 S CTR=0
"RTN","DVBACPR1",56,0)
 S ARYIEN="" F  S ARYIEN=$O(ARRAYCT(ARYIEN)) Q:ARYIEN=""  D
"RTN","DVBACPR1",57,0)
 . S CTR=CTR+1
"RTN","DVBACPR1",58,0)
 . K FIND,OUT
"RTN","DVBACPR1",59,0)
 . S FIND=ARRAYCT(ARYIEN)
"RTN","DVBACPR1",60,0)
 . D FIND^DIC(396.27,"",.01,"",.FIND,"","","","","OUT")
"RTN","DVBACPR1",61,0)
 . I $G(OUT("DILIST",2,1))="" S RTRN(CTR)=FIND_"^"_"NOT A VALID CLAIM TYPE" Q
"RTN","DVBACPR1",62,0)
 . K FDA,ERR,KEYIEN
"RTN","DVBACPR1",63,0)
 . S KEYIEN=OUT("DILIST",2,1)
"RTN","DVBACPR1",64,0)
 . S FDA(396.32,"+2,"_REQIEN_",",.01)=KEYIEN
"RTN","DVBACPR1",65,0)
 . D UPDATE^DIE("","FDA","KEYIEN","ERR")
"RTN","DVBACPR1",66,0)
 . I $D(ERR)>1 S RTRN(CTR)=FIND_"^"_"COULD NOT BE FILED" Q
"RTN","DVBACPR1",67,0)
 . S RTRN(CTR)=FIND_"^"_"FILED"
"RTN","DVBACPR1",68,0)
 ;
"RTN","DVBACPR1",69,0)
 Q
"RTN","DVBACPR1",70,0)
 ;
"RTN","DVBACPR1",71,0)
LSTSC(RTRN) ;
"RTN","DVBACPR1",72,0)
 ;LIST SPECIAL CONSIDERATION
"RTN","DVBACPR1",73,0)
 ;RPC: DVBA CAPRI LISTSPCLCONSID
"RTN","DVBACPR1",74,0)
 N SCIEN,CTR,CODE
"RTN","DVBACPR1",75,0)
 K ^TEMP($J,"LSTSC")
"RTN","DVBACPR1",76,0)
 S SCIEN=0
"RTN","DVBACPR1",77,0)
 F  S SCIEN=$O(^DVB(396.25,SCIEN)) Q:SCIEN=""!('SCIEN)  D
"RTN","DVBACPR1",78,0)
 . Q:$G(^DVB(396.25,SCIEN,0))=""
"RTN","DVBACPR1",79,0)
 . S ^TEMP($J,"LSTSC",$P(^DVB(396.25,SCIEN,0),"^",1))=SCIEN
"RTN","DVBACPR1",80,0)
 S CODE="",CTR=0
"RTN","DVBACPR1",81,0)
 F  S CODE=$O(^TEMP($J,"LSTSC",CODE)) Q:CODE=""  D
"RTN","DVBACPR1",82,0)
 . S CTR=CTR+1
"RTN","DVBACPR1",83,0)
 . S RTRN(CTR)=CODE_"^"_^TEMP($J,"LSTSC",CODE)
"RTN","DVBACPR1",84,0)
 K ^TEMP($J,"LSTSC")
"RTN","DVBACPR1",85,0)
 Q
"RTN","DVBACPR1",86,0)
 ;
"RTN","DVBACPR1",87,0)
GETSC(RTRN,REQIEN) ;
"RTN","DVBACPR1",88,0)
 ;GET SPECIAL CONSIDERATION
"RTN","DVBACPR1",89,0)
 ;RPC: DVBA CAPRI GETSPCLCONSID
"RTN","DVBACPR1",90,0)
 I $G(REQIEN)="" S RTRN(1)="INVALID REQUEST IEN" Q
"RTN","DVBACPR1",91,0)
 I '$D(^DVB(396.3,$G(REQIEN))) S RTRN(1)="INVALID REQUEST IEN" Q
"RTN","DVBACPR1",92,0)
 N MSG,ERR,CTR,MSGIEN,FIND,OUT
"RTN","DVBACPR1",93,0)
 D GETS^DIQ(396.3,REQIEN_",","50*","E","MSG","ERR")
"RTN","DVBACPR1",94,0)
 I $D(ERR)>1 S RTRN(1)="NO SPECIAL CONSIDERATIONS ON FILE" Q
"RTN","DVBACPR1",95,0)
 S CTR=0
"RTN","DVBACPR1",96,0)
 S MSGIEN="" F  S MSGIEN=$O(MSG(396.31,MSGIEN)) Q:MSGIEN=""  D
"RTN","DVBACPR1",97,0)
 . S CTR=CTR+1
"RTN","DVBACPR1",98,0)
 . K FIND,OUT
"RTN","DVBACPR1",99,0)
 . S FIND=MSG(396.31,MSGIEN,.01,"E")
"RTN","DVBACPR1",100,0)
 . D FIND^DIC(396.25,"",.01,"",.FIND,"","","","","OUT")
"RTN","DVBACPR1",101,0)
 . S RTRN(CTR)=MSG(396.31,MSGIEN,.01,"E")_"^"_$G(OUT("DILIST",2,1))
"RTN","DVBACPR1",102,0)
 Q
"RTN","DVBACPR1",103,0)
 ;
"RTN","DVBACPR1",104,0)
SETSC(RTRN,REQIEN,ARRAYSC) ;
"RTN","DVBACPR1",105,0)
 ;SET SPECIAL CONSIDERATION
"RTN","DVBACPR1",106,0)
 ;RPC: DVBA CAPRI SETSPCLCONSID
"RTN","DVBACPR1",107,0)
 ;
"RTN","DVBACPR1",108,0)
 N VAL,SUB,DA,DIK
"RTN","DVBACPR1",109,0)
 S VAL="" F  S VAL=$O(^DVB(396.3,REQIEN,8,"B",VAL)) Q:VAL=""  D
"RTN","DVBACPR1",110,0)
 . S SUB="" F  S SUB=$O(^DVB(396.3,REQIEN,8,"B",VAL,SUB)) Q:SUB=""  D 
"RTN","DVBACPR1",111,0)
 .. K DA,DIK
"RTN","DVBACPR1",112,0)
 .. S DA(1)=REQIEN
"RTN","DVBACPR1",113,0)
 .. S DA=SUB
"RTN","DVBACPR1",114,0)
 .. S DIK="^DVB(396.3,"_DA(1)_",""8"","
"RTN","DVBACPR1",115,0)
 .. D ^DIK
"RTN","DVBACPR1",116,0)
 ;
"RTN","DVBACPR1",117,0)
 I $G(REQIEN)="" S RTRN(1)="INVALID REQUEST IEN" Q
"RTN","DVBACPR1",118,0)
 I '$D(^DVB(396.3,$G(REQIEN))) S RTRN(1)="INVALID REQUEST IEN" Q
"RTN","DVBACPR1",119,0)
 N ARYIEN,CTR,FDA,ERR,KEYIEN,FIND
"RTN","DVBACPR1",120,0)
 S CTR=0
"RTN","DVBACPR1",121,0)
 S ARYIEN="" F  S ARYIEN=$O(ARRAYSC(ARYIEN)) Q:ARYIEN=""  D
"RTN","DVBACPR1",122,0)
 . S CTR=CTR+1
"RTN","DVBACPR1",123,0)
 . K FIND,OUT
"RTN","DVBACPR1",124,0)
 . S FIND=ARRAYSC(ARYIEN)
"RTN","DVBACPR1",125,0)
 . D FIND^DIC(396.25,"",.01,"",.FIND,"","","","","OUT")
"RTN","DVBACPR1",126,0)
 . I $G(OUT("DILIST",2,1))="" S RTRN(CTR)=FIND_"^"_"NOT A VALID SPECIAL CONSIDERATION" Q
"RTN","DVBACPR1",127,0)
 . K FDA,ERR,KEYIEN
"RTN","DVBACPR1",128,0)
 . S KEYIEN=OUT("DILIST",2,1)
"RTN","DVBACPR1",129,0)
 . S FDA(396.31,"+2,"_REQIEN_",",.01)=KEYIEN
"RTN","DVBACPR1",130,0)
 . D UPDATE^DIE("","FDA","KEYIEN","ERR")
"RTN","DVBACPR1",131,0)
 . I $D(ERR)>1 S RTRN(CTR)=FIND_"^"_"COULD NOT BE FILED" Q
"RTN","DVBACPR1",132,0)
 . S RTRN(CTR)=FIND_"^"_"FILED"
"RTN","DVBACPR1",133,0)
 ;
"RTN","DVBACPR1",134,0)
 Q
"RTN","DVBACPR1",135,0)
 ;
"RTN","DVBACPR1",136,0)
LSTIR(RTRN) ;
"RTN","DVBACPR1",137,0)
 ;LIST INSUFFICIENT REASON
"RTN","DVBACPR1",138,0)
 ;RPC: DVBA CAPRI LISTINSUFRSN
"RTN","DVBACPR1",139,0)
 ;FILE #396.4 FIELD .11 --> FILE #396.94
"RTN","DVBACPR1",140,0)
 ;BUILD LIST OF VALID (ACTIVE) REASONS
"RTN","DVBACPR1",141,0)
 N IRIEN,CTR,CODE
"RTN","DVBACPR1",142,0)
 K ^TEMP($J,"LSTIR")
"RTN","DVBACPR1",143,0)
 S IRIEN=0
"RTN","DVBACPR1",144,0)
 F  S IRIEN=$O(^DVB(396.94,IRIEN)) Q:IRIEN=""!('IRIEN)  D
"RTN","DVBACPR1",145,0)
 . Q:$G(^DVB(396.94,IRIEN,0))=""
"RTN","DVBACPR1",146,0)
 . Q:$P(^DVB(396.94,IRIEN,0),"^",4)="Y"
"RTN","DVBACPR1",147,0)
 . S ^TEMP($J,"LSTIR",$P(^DVB(396.94,IRIEN,0),"^",1))=IRIEN
"RTN","DVBACPR1",148,0)
 S CODE="",CTR=0
"RTN","DVBACPR1",149,0)
 F  S CODE=$O(^TEMP($J,"LSTIR",CODE)) Q:CODE=""  D
"RTN","DVBACPR1",150,0)
 . S CTR=CTR+1
"RTN","DVBACPR1",151,0)
 . S RTRN(CTR)=CODE_"^"_^TEMP($J,"LSTIR",CODE)
"RTN","DVBACPR1",152,0)
 Q
"RTN","DVBACPR1",153,0)
 ;
"RTN","DVBARSBD")
0^4^B106348391^B58585815
"RTN","DVBARSBD",1,0)
DVBARSBD ;ALB/RPM - CAPRI 2507 REQUEST STATUS BY DT RANGE REPORT ; 01/24/12
"RTN","DVBARSBD",2,0)
 ;;2.7;AMIE;**179,185,189**;Apr 10, 1995;Build 22
"RTN","DVBARSBD",3,0)
 ;
"RTN","DVBARSBD",4,0)
 Q  ;NO DIRECT ENTRY
"RTN","DVBARSBD",5,0)
 ;
"RTN","DVBARSBD",6,0)
REQSTAT(DVBSDAT,DVBEDAT,DVBRSTAT,DVBDELIM,DVBNODT) ;entry for request status by dt range
"RTN","DVBARSBD",7,0)
 ;
"RTN","DVBARSBD",8,0)
 ;  Input:
"RTN","DVBARSBD",9,0)
 ;    DVBSDAT - start date (FM format)
"RTN","DVBARSBD",10,0)
 ;    DVBEDAT - end date (FM format)
"RTN","DVBARSBD",11,0)
 ;    DVBRSTAT - request status (internal format)
"RTN","DVBARSBD",12,0)
 ;    DVBDELIM - return delimited results (0=no;1=yes)
"RTN","DVBARSBD",13,0)
 ;    DVBNODT - ignore date range (0=no;1=yes)
"RTN","DVBARSBD",14,0)
 ;
"RTN","DVBARSBD",15,0)
 N EXSTAT  ;request status (external format)
"RTN","DVBARSBD",16,0)
 N EXSDAT  ;start date (external format: MM/DD/YYYY)
"RTN","DVBARSBD",17,0)
 N EXEDAT  ;end date (external format: MM/DD/YYYY)
"RTN","DVBARSBD",18,0)
 N DVBARS  ;request status conversion results
"RTN","DVBARSBD",19,0)
 N DVBERR  ;FM error msg
"RTN","DVBARSBD",20,0)
 N DVBCNT   ;returned record count
"RTN","DVBARSBD",21,0)
 ;
"RTN","DVBARSBD",22,0)
 K ^TMP("DVBREQ",$J),^TMP("DVBREQN",$J)
"RTN","DVBARSBD",23,0)
 S EXSDAT=$$FMTE^XLFDT(DVBSDAT,"5DZ")
"RTN","DVBARSBD",24,0)
 S EXEDAT=$$FMTE^XLFDT(DVBEDAT,"5DZ")
"RTN","DVBARSBD",25,0)
 I DVBRSTAT="A" S EXSTAT="ALL"
"RTN","DVBARSBD",26,0)
 E  D
"RTN","DVBARSBD",27,0)
 . D CHK^DIE(396.3,17,"E",DVBRSTAT,.DVBARS,"DVBERR")
"RTN","DVBARSBD",28,0)
 . S EXSTAT=$G(DVBARS(0))
"RTN","DVBARSBD",29,0)
 S DVBCNT=1
"RTN","DVBARSBD",30,0)
 S DVBAD=$S(DVBDELIM=1:",",1:0)
"RTN","DVBARSBD",31,0)
 ;
"RTN","DVBARSBD",32,0)
 ;collect records matching search criteria
"RTN","DVBARSBD",33,0)
 I DVBNODT D
"RTN","DVBARSBD",34,0)
 . S EXSDAT="NO START DATE"
"RTN","DVBARSBD",35,0)
 . S EXEDAT="NO END DATE"
"RTN","DVBARSBD",36,0)
 . I DVBDELIM D DELIMHDR(EXSDAT,EXEDAT,EXSTAT)
"RTN","DVBARSBD",37,0)
 . D GETRECSN(DVBRSTAT,.DVBCNT)
"RTN","DVBARSBD",38,0)
 E  D
"RTN","DVBARSBD",39,0)
 . I DVBDELIM D DELIMHDR(EXSDAT,EXEDAT,EXSTAT)
"RTN","DVBARSBD",40,0)
 . D GETRECS(DVBSDAT,DVBEDAT,DVBRSTAT,.DVBCNT)
"RTN","DVBARSBD",41,0)
 ;
"RTN","DVBARSBD",42,0)
 ;output results
"RTN","DVBARSBD",43,0)
 I 'DVBCNT D
"RTN","DVBARSBD",44,0)
 . W "NO DATA FOUND"
"RTN","DVBARSBD",45,0)
 E  D
"RTN","DVBARSBD",46,0)
 . I 'DVBDELIM D PLAINHDR(EXSDAT,EXEDAT,EXSTAT),PLAIN  ;plain text format
"RTN","DVBARSBD",47,0)
 . I DVBDELIM D DELIM  ;comma delimited format
"RTN","DVBARSBD",48,0)
 ;
"RTN","DVBARSBD",49,0)
END ;Clean up local variables
"RTN","DVBARSBD",50,0)
 K DIWF,DIWL,DIWR,DVBAD,DVBAX,DVBAY,DVBCNRS,DVBEXAM,DVBIEN4,DVBI2,DVBX,DVBXCNT,LINE,X
"RTN","DVBARSBD",51,0)
 K ^TMP("DVBREQ"),^TMP("DVBREQH")
"RTN","DVBARSBD",52,0)
 Q
"RTN","DVBARSBD",53,0)
 ;
"RTN","DVBARSBD",54,0)
GETRECS(SDAT,EDAT,RSTAT,CNT) ;collect 2507 REQUEST record matches
"RTN","DVBARSBD",55,0)
 ;This procedure collects all 2507 REQUEST records that have a
"RTN","DVBARSBD",56,0)
 ;DATE STATUS LAST CHANGED within the start and end dates and have
"RTN","DVBARSBD",57,0)
 ;a REQUEST STATUS that matches the input request status parameter.
"RTN","DVBARSBD",58,0)
 ;
"RTN","DVBARSBD",59,0)
 ;  Input:
"RTN","DVBARSBD",60,0)
 ;    SDAT - start date (FM format)
"RTN","DVBARSBD",61,0)
 ;    EDAT - end date (FM format)
"RTN","DVBARSBD",62,0)
 ;    RSTAT - request status (internal format)
"RTN","DVBARSBD",63,0)
 ;    CNT - record count (passed by reference)
"RTN","DVBARSBD",64,0)
 ;
"RTN","DVBARSBD",65,0)
 N CHGDAT  ;change date
"RTN","DVBARSBD",66,0)
 N DVBIEN  ;2507 REQUEST IEN
"RTN","DVBARSBD",67,0)
 N DVBSTAT ;2507 REQUEST STATUS
"RTN","DVBARSBD",68,0)
 N FLD     ;field array in external format
"RTN","DVBARSBD",69,0)
 ;
"RTN","DVBARSBD",70,0)
 S CHGDAT=SDAT-1
"RTN","DVBARSBD",71,0)
 S DVBIEN=0,CNT=0 F  S CHGDAT=$O(^DVB(396.3,"AH",CHGDAT)) Q:'CHGDAT!(CHGDAT>EDAT)  D
"RTN","DVBARSBD",72,0)
 . F  S DVBIEN=$O(^DVB(396.3,"AH",CHGDAT,DVBIEN)) Q:'DVBIEN  D
"RTN","DVBARSBD",73,0)
 . . S DVBSTAT=$$GET1^DIQ(396.3,DVBIEN_",",17,"I","","")
"RTN","DVBARSBD",74,0)
 . . I RSTAT="A"!(DVBSTAT=RSTAT) D
"RTN","DVBARSBD",75,0)
 . . . K FLD
"RTN","DVBARSBD",76,0)
 . . . I $$SETFLDS(DVBIEN,.FLD) D
"RTN","DVBARSBD",77,0)
 . . . . S CNT=CNT+1,DVBXCNT=1
"RTN","DVBARSBD",78,0)
 . . . . I $G(DVBAD)'="," S ^TMP("DVBREQ",$J,CNT)=FLD("IEN")_U_FLD("SS")_U_FLD("NM")_U_FLD("REQDT")_U_FLD("RELDT")_U_FLD("PRTDT")_U_FLD("RS")_U_FLD("CANDT")_U_FLD("RO")_U_FLD("CANRS",DVBXCNT)_U_FLD("CANCOM",DVBXCNT)_U_FLD("EXAM",DVBXCNT) D
"RTN","DVBARSBD",79,0)
 . . . . . S DVBXCNT=DVBXCNT+1 Q
"RTN","DVBARSBD",80,0)
 . . . . I $G(DVBAD)="," D
"RTN","DVBARSBD",81,0)
 . . . . . S ^TMP("DVBREQ",$J,CNT)=FLD("SS")_DVBAD_""""_FLD("NM")_""""_DVBAD_FLD("REQDT")_DVBAD_FLD("RELDT")_DVBAD_FLD("PRTDT")_DVBAD
"RTN","DVBARSBD",82,0)
 . . . . . S ^TMP("DVBREQ",$J,CNT)=^TMP("DVBREQ",$J,CNT)_""""_FLD("RS")_""""_DVBAD_FLD("CANDT")_DVBAD_""""_FLD("RO")_""""_DVBAD
"RTN","DVBARSBD",83,0)
 . . . . . S DVBX=0 F  S DVBX=$O(FLD("IEN4",DVBX)) Q:'DVBX  D
"RTN","DVBARSBD",84,0)
 . . . . . . S ^TMP("DVBREQ",$J,CNT,DVBX)=^TMP("DVBREQ",$J,CNT)_$C(13)_FLD("SS")_DVBAD_DVBAD_DVBAD_DVBAD_DVBAD_DVBAD_DVBAD_DVBAD_""""_FLD("EXAM",DVBXCNT)_""""_DVBAD_""""_FLD("CANRS",DVBXCNT)_""""_DVBAD_""""_FLD("CANCOM",DVBXCNT)_""""_$C(13)
"RTN","DVBARSBD",85,0)
 . . . . . . S DVBXCNT=DVBXCNT+1
"RTN","DVBARSBD",86,0)
 Q
"RTN","DVBARSBD",87,0)
 ;
"RTN","DVBARSBD",88,0)
SETFLDS(DVBIEN,DVBFLDS) ;build field array in external format
"RTN","DVBARSBD",89,0)
 ;This function formats the collected record data in external format
"RTN","DVBARSBD",90,0)
 ;and returns the results TRUE and an array on success.  Otherwise,
"RTN","DVBARSBD",91,0)
 ;the function returns FALSE.
"RTN","DVBARSBD",92,0)
 ;
"RTN","DVBARSBD",93,0)
 ;  Integration Reference #10061 - DEM^VADPT
"RTN","DVBARSBD",94,0)
 ;
"RTN","DVBARSBD",95,0)
 ;  Input:
"RTN","DVBARSBD",96,0)
 ;    DVBIEN - 2507 REQUEST IEN
"RTN","DVBARSBD",97,0)
 ;    DVBFLDS - field array passed by reference
"RTN","DVBARSBD",98,0)
 ;
"RTN","DVBARSBD",99,0)
 ;  Output:
"RTN","DVBARSBD",100,0)
 ;    DVBFLDS("IEN") - 2507 REQUEST IEN
"RTN","DVBARSBD",101,0)
 ;    DVBFLDS("NM") - patient name
"RTN","DVBARSBD",102,0)
 ;    DVBFLDS("SS") - social security number
"RTN","DVBARSBD",103,0)
 ;    DVBFLDS("RS") - request status
"RTN","DVBARSBD",104,0)
 ;    DVBFLDS("REQDT") - request date
"RTN","DVBARSBD",105,0)
 ;    DVBFLDS("RELDT") - release date
"RTN","DVBARSBD",106,0)
 ;    DVBFLDS("PRTDT") - print date
"RTN","DVBARSBD",107,0)
 ;    DVBFLDS("CANDT") - canceled date
"RTN","DVBARSBD",108,0)
 ;    DVBFLDS("RO") - regional office
"RTN","DVBARSBD",109,0)
 ;    DVBFLDS("IREQDT") - request date in internal FM format
"RTN","DVBARSBD",110,0)
 ;    DVBFLDS("EXAM") - added with patch DVB*2.7*189; HOLDS THE 2507 EXAM name   
"RTN","DVBARSBD",111,0)
 ;    DVBFLDS("CANRS") - added with patch DVB*2.7*189; HOLDS THE 2507 EXAM CANCELLATION REASON name
"RTN","DVBARSBD",112,0)
 ;    DVBFLDS("CANCOM") - added with patch DVB*2.7*189; HOLDS THE 2507 EXAM CANCELLATION COMMENTS name
"RTN","DVBARSBD",113,0)
 ;    Function Result - return 1 on success; otherwise returns 0
"RTN","DVBARSBD",114,0)
 ;
"RTN","DVBARSBD",115,0)
 N DFN  ;PATIENT file IEN used in VADPT call
"RTN","DVBARSBD",116,0)
 N DVBDAT  ;2507 REQUEST data field array
"RTN","DVBARSBD",117,0)
 N DVBIENS  ;FM IENS value
"RTN","DVBARSBD",118,0)
 N DVBRSLT  ;function result
"RTN","DVBARSBD",119,0)
 N VADM  ;VADPT return array
"RTN","DVBARSBD",120,0)
 N DVBIEN4 ;the IEN FROM 2507 EXAM FILE 396.4
"RTN","DVBARSBD",121,0)
 N DVBALAST ;number of lines in the wp cancellation comments
"RTN","DVBARSBD",122,0)
 N DVBAI  ;for loop index
"RTN","DVBARSBD",123,0)
 N DVBAX ;
"RTN","DVBARSBD",124,0)
 ;
"RTN","DVBARSBD",125,0)
 S DVBRSLT=0
"RTN","DVBARSBD",126,0)
 S DVBIENS=+$G(DVBIEN)_","
"RTN","DVBARSBD",127,0)
 D GETS^DIQ(396.3,DVBIENS,".01;1;2;13;15;17;19","IE","DVBDAT","")
"RTN","DVBARSBD",128,0)
 S DFN=$G(DVBDAT(396.3,DVBIENS,.01,"I"))
"RTN","DVBARSBD",129,0)
 D DEM^VADPT
"RTN","DVBARSBD",130,0)
 I $G(VADM(1))'="" D  ;only return record when name is resolved
"RTN","DVBARSBD",131,0)
 . S DVBFLDS("IEN")=DVBIEN
"RTN","DVBARSBD",132,0)
 . S DVBFLDS("NM")=$G(VADM(1))
"RTN","DVBARSBD",133,0)
 . S DVBFLDS("SS")=$S(DVBDELIM:$P($G(VADM(2)),U,2),1:$P($G(VADM(2)),U,1))
"RTN","DVBARSBD",134,0)
 . S DVBFLDS("RS")=$G(DVBDAT(396.3,DVBIENS,17,"E"))
"RTN","DVBARSBD",135,0)
 . S DVBFLDS("REQDT")=$$FMTE^XLFDT($G(DVBDAT(396.3,DVBIENS,1,"I")),"5DZ")
"RTN","DVBARSBD",136,0)
 . S DVBFLDS("RELDT")=$$FMTE^XLFDT($G(DVBDAT(396.3,DVBIENS,13,"I")),"5DZ")
"RTN","DVBARSBD",137,0)
 . S DVBFLDS("PRTDT")=$$FMTE^XLFDT($G(DVBDAT(396.3,DVBIENS,15,"I")),"5DZ")
"RTN","DVBARSBD",138,0)
 . S DVBFLDS("CANDT")=$$FMTE^XLFDT($G(DVBDAT(396.3,DVBIENS,19,"I")),"5DZ")
"RTN","DVBARSBD",139,0)
 . S DVBFLDS("RO")=$G(DVBDAT(396.3,DVBIEN,2,"E"))
"RTN","DVBARSBD",140,0)
 . S DVBXCNT=1
"RTN","DVBARSBD",141,0)
 . S (DVBFLDS("EXAM",DVBXCNT),DVBFLDS("CANRS",DVBXCNT),DVBFLDS("CANCOM",DVBXCNT),DVBFLDS("IEN4"))=""
"RTN","DVBARSBD",142,0)
 . S DVBIEN4=0 F  S DVBIEN4=$O(^DVB(396.4,"C",DVBIEN,DVBIEN4)) Q:'DVBIEN4  D
"RTN","DVBARSBD",143,0)
 . . I $D(^DVB(396.4,DVBIEN4,"CAN")) D
"RTN","DVBARSBD",144,0)
 . . . S DVBAY=($P($P(^DVB(396.4,DVBIEN4,"CAN"),"^",1),".",1)) I DVBAY>(DVBSDAT-1)&DVBAY<(DVBEDAT+1) D
"RTN","DVBARSBD",145,0)
 . . . . S DVBFLDS("EXAM",DVBXCNT)=$$GET1^DIQ(396.4,DVBIEN4,.03),DVBFLDS("CANRS",DVBXCNT)=$$GET1^DIQ(396.4,DVBIEN4,52)
"RTN","DVBARSBD",146,0)
 . . . . I $D(^DVB(396.4,DVBIEN4,5)) D
"RTN","DVBARSBD",147,0)
 . . . . . S DVBFLDS("IEN4",DVBXCNT)=DVBIEN4
"RTN","DVBARSBD",148,0)
 . . . . . K WP S DVBAX=$$GET1^DIQ(396.4,DVBIEN4,53,"Z","WP") ; this puts the wordprocessing field into an array 'WP(#,0)=' next it gets put into one entry of the DVBFLDS ARRAY so we can handle any comma's that aren't delimiters
"RTN","DVBARSBD",149,0)
 . . . . . ;DVBALAST gets the number of WP lines to loop through in the for loop
"RTN","DVBARSBD",150,0)
 . . . . . S DVBALAST=$P(^DVB(396.4,DVBIEN4,5,0),U,3) S DVBAI="",DVBFLDS("CANCOM",DVBXCNT)=WP(1,0) F DVBAI=2:1:DVBALAST S DVBFLDS("CANCOM",DVBXCNT)=DVBFLDS("CANCOM",DVBXCNT)_WP(DVBAI,0)
"RTN","DVBARSBD",151,0)
 . . . . . S DVBXCNT=DVBXCNT+1
"RTN","DVBARSBD",152,0)
 . S DVBFLDS("IREQDT")=$G(DVBDAT(396.3,DVBIENS,1,"I"))
"RTN","DVBARSBD",153,0)
 . S DVBRSLT=1
"RTN","DVBARSBD",154,0)
 Q DVBRSLT
"RTN","DVBARSBD",155,0)
 ;
"RTN","DVBARSBD",156,0)
DELIMHDR(EXSDAT,EXEDAT,EXSTAT) ;output delimited format header
"RTN","DVBARSBD",157,0)
 ;  Input:
"RTN","DVBARSBD",158,0)
 ;    EXSDAT - start date (external format)
"RTN","DVBARSBD",159,0)
 ;    EXEDAT - end date (external format)
"RTN","DVBARSBD",160,0)
 ;    EXSTAT - request status (external format)
"RTN","DVBARSBD",161,0)
 S ^TMP("DVBREQH",$J,DVBCNT)="Request Status by Date Range Report",DVBCNT=DVBCNT+1
"RTN","DVBARSBD",162,0)
 S ^TMP("DVBREQH",$J,DVBCNT)="Date Range: "_EXSDAT_" - "_EXEDAT,DVBCNT=DVBCNT+1
"RTN","DVBARSBD",163,0)
 S ^TMP("DVBREQH",$J,DVBCNT)=""""_"Request Status: "_EXSTAT_""""_$C(13),DVBCNT=DVBCNT+1
"RTN","DVBARSBD",164,0)
 S ^TMP("DVBREQH",$J,DVBCNT)="SSN"_DVBAD_"PatientName"_DVBAD_"RequestDT"_DVBAD_"DTReleased"_DVBAD_"DTPrinted"_DVBAD_"RequestStatus"_DVBAD_"DtCanceled"_DVBAD_"Station"_DVBAD_"EXAM"_DVBAD_"CANCEL RSN"_DVBAD_"CANCEL CMNTS",DVBCNT=DVBCNT+1
"RTN","DVBARSBD",165,0)
 Q
"RTN","DVBARSBD",166,0)
 ;
"RTN","DVBARSBD",167,0)
DELIM ;output delimited format
"RTN","DVBARSBD",168,0)
 ;
"RTN","DVBARSBD",169,0)
 N DVBI     ;generic counter
"RTN","DVBARSBD",170,0)
 N DVBREQ   ;request record
"RTN","DVBARSBD",171,0)
 ;
"RTN","DVBARSBD",172,0)
 U IO
"RTN","DVBARSBD",173,0)
 S DVBI=0
"RTN","DVBARSBD",174,0)
 F  S DVBI=$O(^TMP("DVBREQH",$J,DVBI)) Q:'DVBI  D
"RTN","DVBARSBD",175,0)
 . S DVBREQ=^TMP("DVBREQH",$J,DVBI)
"RTN","DVBARSBD",176,0)
 . W !,DVBREQ
"RTN","DVBARSBD",177,0)
 S DVBI=0 F  S DVBI=$O(^TMP("DVBREQ",$J,DVBI)) Q:'DVBI  D
"RTN","DVBARSBD",178,0)
 . S DVBREQ=^TMP("DVBREQ",$J,DVBI)
"RTN","DVBARSBD",179,0)
 . W !,DVBREQ
"RTN","DVBARSBD",180,0)
 . S DVBI2=0 F  S DVBI2=$O(^TMP("DVBREQ",$J,DVBI,DVBI2)) Q:'DVBI2  D
"RTN","DVBARSBD",181,0)
 . .S DVBREQ=^TMP("DVBREQ",$J,DVBI,DVBI2)
"RTN","DVBARSBD",182,0)
 . .W !,DVBREQ
"RTN","DVBARSBD",183,0)
 Q
"RTN","DVBARSBD",184,0)
 ;
"RTN","DVBARSBD",185,0)
PLAINHDR(EXSDAT,EXEDAT,EXSTAT)  ;output plain text header
"RTN","DVBARSBD",186,0)
 ;Populate the header information.
"RTN","DVBARSBD",187,0)
 ;CAUTION:  The CAPRI GUI pulls this information to populate the header
"RTN","DVBARSBD",188,0)
 ;for each page when creating a printed report.  Do not modify the
"RTN","DVBARSBD",189,0)
 ;content or line count of the header information without validating
"RTN","DVBARSBD",190,0)
 ;against the CAPRI GUI interface.
"RTN","DVBARSBD",191,0)
 ;
"RTN","DVBARSBD",192,0)
 ;CAPRI GUI to populate 
"RTN","DVBARSBD",193,0)
 ;  Input:
"RTN","DVBARSBD",194,0)
 ;    EXSDAT - start date (external format)
"RTN","DVBARSBD",195,0)
 ;    EXEDAT - end date (external format)
"RTN","DVBARSBD",196,0)
 ;    EXSTAT - request status (external format)
"RTN","DVBARSBD",197,0)
 ;
"RTN","DVBARSBD",198,0)
 N DVBLINE  ;header separator
"RTN","DVBARSBD",199,0)
 ;
"RTN","DVBARSBD",200,0)
 U IO
"RTN","DVBARSBD",201,0)
 S $P(DVBLINE,"-",131)=""
"RTN","DVBARSBD",202,0)
 W "Date Range: "_EXSDAT_" - "_EXEDAT
"RTN","DVBARSBD",203,0)
 W !,"Request Status: ",EXSTAT
"RTN","DVBARSBD",204,0)
 W !
"RTN","DVBARSBD",205,0)
 W !,"SSN",?11,"PATIENT NAME",?33,"REQUEST DT",?45,"DT RELEASED"
"RTN","DVBARSBD",206,0)
 W ?57,"DT PRINTED",?69,"STATUS",?98,"DT CANCELED",?110,"STATION"
"RTN","DVBARSBD",207,0)
 W !,?2,"EXAM",?65,"CANCELLATION REASON"
"RTN","DVBARSBD",208,0)
 W !,?2,"CANCELLATION COMMENTS"
"RTN","DVBARSBD",209,0)
 W !,DVBLINE
"RTN","DVBARSBD",210,0)
 Q
"RTN","DVBARSBD",211,0)
 ;
"RTN","DVBARSBD",212,0)
PLAIN ;output plain text format
"RTN","DVBARSBD",213,0)
 ;Output formatted text format.  The patient name and station name
"RTN","DVBARSBD",214,0)
 ;are truncated at 20 characters to maintain 132 character report.
"RTN","DVBARSBD",215,0)
 ;
"RTN","DVBARSBD",216,0)
 N DVBI     ;generic counter
"RTN","DVBARSBD",217,0)
 N DVBREQ   ;request record
"RTN","DVBARSBD",218,0)
 ;
"RTN","DVBARSBD",219,0)
 U IO
"RTN","DVBARSBD",220,0)
 S DVBI=0
"RTN","DVBARSBD",221,0)
 F  S DVBI=$O(^TMP("DVBREQ",$J,DVBI)) Q:'DVBI  D
"RTN","DVBARSBD",222,0)
 . S DVBREQ=^TMP("DVBREQ",$J,DVBI)
"RTN","DVBARSBD",223,0)
 . W !,$P(DVBREQ,U,2),?11,$E($P(DVBREQ,U,3),1,20),?33,$P(DVBREQ,U,4)
"RTN","DVBARSBD",224,0)
 . W ?45,$P(DVBREQ,U,5),?57,$P(DVBREQ,U,6),?69,$P(DVBREQ,U,7)
"RTN","DVBARSBD",225,0)
 . W ?98,$P(DVBREQ,U,8),?110,$E($P(DVBREQ,U,9),1,20),!
"RTN","DVBARSBD",226,0)
 . S DVBIEN=$P(^TMP("DVBREQ",$J,DVBI),U,1)
"RTN","DVBARSBD",227,0)
 . S DVBIEN4=0 F  S DVBIEN4=$O(^DVB(396.4,"C",DVBIEN,DVBIEN4)) Q:'DVBIEN4  D
"RTN","DVBARSBD",228,0)
 . . I $D(^DVB(396.4,DVBIEN4,"CAN")) D
"RTN","DVBARSBD",229,0)
 . . . S DVBAY=($P($P(^DVB(396.4,DVBIEN4,"CAN"),"^",1),".",1)) I DVBAY>(DVBSDAT-1)&DVBAY<(DVBEDAT+1) D
"RTN","DVBARSBD",230,0)
 . . . . S DVBEXAM=$$GET1^DIQ(396.4,DVBIEN4,.03) S DVBCNRS=$$GET1^DIQ(396.4,DVBIEN4,52) D
"RTN","DVBARSBD",231,0)
 . . . . . W !,?2,"CANCELED EXAM: ",DVBEXAM,?65,"CANCELLATION REASON: ",DVBCNRS,!
"RTN","DVBARSBD",232,0)
 . . . . I $D(^DVB(396.4,DVBIEN4,5)) D
"RTN","DVBARSBD",233,0)
 . . . . . K ^UTILITY($J,"W")
"RTN","DVBARSBD",234,0)
 . . . . . W !,?2,"CANCELLATION COMMENTS:  " F LINE=0:0 S LINE=$O(^DVB(396.4,DVBIEN4,5,LINE)) Q:LINE=""  S X=^(LINE,0),DIWL=5,DIWR=75,DIWF="NW" D ^DIWP
"RTN","DVBARSBD",235,0)
 . . . . . W !
"RTN","DVBARSBD",236,0)
 Q 
"RTN","DVBARSBD",237,0)
 ;
"RTN","DVBARSBD",238,0)
GETRECSN(RSTAT,CNT) ;collect 2507 REQUEST status matches and ignore date range
"RTN","DVBARSBD",239,0)
 ;This procedure collects all 2507 REQUEST records that have a REQUEST STATUS
"RTN","DVBARSBD",240,0)
 ;that matches the input request status parameter regardless of the LAST
"RTN","DVBARSBD",241,0)
 ;STATUS CHANGE DATE range.  The procedure uses the "AF" index which sorts
"RTN","DVBARSBD",242,0)
 ;by REQUEST STATUS and REGIONAL OFFICE.
"RTN","DVBARSBD",243,0)
 ;
"RTN","DVBARSBD",244,0)
 ;  Input:
"RTN","DVBARSBD",245,0)
 ;    RSTAT - request status (internal format)
"RTN","DVBARSBD",246,0)
 ;    CNT - record count (passed by reference)
"RTN","DVBARSBD",247,0)
 ;
"RTN","DVBARSBD",248,0)
 N CHGDAT  ;change date
"RTN","DVBARSBD",249,0)
 N SRTDAT  ;sort date
"RTN","DVBARSBD",250,0)
 N DVBIEN  ;2507 REQUEST IEN
"RTN","DVBARSBD",251,0)
 N FLD     ;field array in external format
"RTN","DVBARSBD",252,0)
 N DVBRO   ;regional office
"RTN","DVBARSBD",253,0)
 ;
"RTN","DVBARSBD",254,0)
 ;create list sorted by LAST STATUS CHANGE DATE
"RTN","DVBARSBD",255,0)
 S DVBRO=0
"RTN","DVBARSBD",256,0)
 F  S DVBRO=$O(^DVB(396.3,"AF",RSTAT,DVBRO)) Q:'DVBRO  D
"RTN","DVBARSBD",257,0)
 . S DVBIEN=0
"RTN","DVBARSBD",258,0)
 . F  S DVBIEN=$O(^DVB(396.3,"AF",RSTAT,DVBRO,DVBIEN)) Q:'DVBIEN  D
"RTN","DVBARSBD",259,0)
 . . K FLD
"RTN","DVBARSBD",260,0)
 . . I $$SETFLDS(DVBIEN,.FLD) D
"RTN","DVBARSBD",261,0)
 . . . ;use request date as sort for blank date
"RTN","DVBARSBD",262,0)
 . . . S SRTDAT=+$G(FLD("IREQDT"))
"RTN","DVBARSBD",263,0)
 . . . I $G(DVBAD)'="," S ^TMP("DVBREQN",$J,SRTDAT,DVBIEN)=FLD("SS")_U_FLD("NM")_U_FLD("REQDT")_U_FLD("RELDT")_U_FLD("PRTDT")_U_FLD("RS")_U_FLD("CANDT")_U_FLD("RO")_U_FLD("EXAM")_U_FLD("CANRS")_U_FLD("CANCOM")
"RTN","DVBARSBD",264,0)
 . . . I $G(DVBAD)="," D
"RTN","DVBARSBD",265,0)
 . . . . S ^TMP("DVBREQN",$J,SRTDAT,DVBIEN)=FLD("SS")_DVBAD_""""_FLD("NM")_""""_DVBAD_FLD("REQDT")_DVBAD_FLD("RELDT")_DVBAD_FLD("PRTDT")_DVBAD
"RTN","DVBARSBD",266,0)
 . . . . S ^TMP("DVBREQN",$J,SRTDAT,DVBIEN)=^TMP("DVBREQN",$J,SRTDAT,DVBIEN)_""""_FLD("RS")_""""_DVBAD_FLD("CANDT")_DVBAD_""""_FLD("RO")_""""_DVBAD_FLD("EXAM")_""""_DVBAD_FLD("CANRS")_""""_DVBAD_FLD("CANCOM")_""""
"RTN","DVBARSBD",267,0)
 ;
"RTN","DVBARSBD",268,0)
 ;load output global with sorted list
"RTN","DVBARSBD",269,0)
 S CHGDAT="",CNT=0  ;use "" because value could be zero ("0")
"RTN","DVBARSBD",270,0)
 F  S CHGDAT=$O(^TMP("DVBREQN",$J,CHGDAT)) Q:(CHGDAT="")  D
"RTN","DVBARSBD",271,0)
 . S DVBIEN=0
"RTN","DVBARSBD",272,0)
 . F  S DVBIEN=$O(^TMP("DVBREQN",$J,CHGDAT,DVBIEN)) Q:'DVBIEN  D
"RTN","DVBARSBD",273,0)
 . . S CNT=CNT+1
"RTN","DVBARSBD",274,0)
 . . S ^TMP("DVBREQ",$J,CNT)=^TMP("DVBREQN",$J,CHGDAT,DVBIEN)
"RTN","DVBARSBD",275,0)
 Q
"RTN","DVBCANRS")
0^5^B1041993^n/a
"RTN","DVBCANRS",1,0)
DVBCANRS ;ALB/RTW - PATCH DVBA*2.7*189 CANCEL REASON AND COMMENTS ROUTINE;08/08/2014
"RTN","DVBCANRS",2,0)
 ;;2.7;AMIE;**189**;Apr 10, 1995;Build 22
"RTN","DVBCANRS",3,0)
 ; At CANRSN This routine adds new 2507 cancellation reasons and hides reasons no longer needed in file 396.5 for VLER DAS-CAPRI
"RTN","DVBCANRS",4,0)
 ;
"RTN","DVBCANRS",5,0)
 Q  ;NO DIRECT ACCESS
"RTN","DVBCANRS",6,0)
CANRSN(DVBARRAY) ; RPC" DVBA CAPRI GETCANCELREASON
"RTN","DVBCANRS",7,0)
 ;This gets only active 2507 Cancellation reasons; they are stored in xref "D",1
"RTN","DVBCANRS",8,0)
 N DVBCR
"RTN","DVBCANRS",9,0)
 K ^TMP("DVB")
"RTN","DVBCANRS",10,0)
 S X=0
"RTN","DVBCANRS",11,0)
 S DVBCR="" F  S DVBCR=$O(^DVB(396.5,"D",1,DVBCR)) Q:'DVBCR  D
"RTN","DVBCANRS",12,0)
 .S DVBNM=$$GET1^DIQ(396.5,DVBCR,"NAME")
"RTN","DVBCANRS",13,0)
 .Q:DVBNM=""
"RTN","DVBCANRS",14,0)
 .S ^TMP("DVB",DVBNM,DVBCR)=""
"RTN","DVBCANRS",15,0)
 .Q
"RTN","DVBCANRS",16,0)
 S DVBCNT=1,DVBCNA="" F  S DVBCNA=$O(^TMP("DVB",DVBCNA)) Q:DVBCNA=""  D
"RTN","DVBCANRS",17,0)
 .S DVBCA=1 F  S DVBCA=$O(^TMP("DVB",DVBCNA,DVBCA)) Q:'DVBCA  D
"RTN","DVBCANRS",18,0)
 ..S DVBARRAY(DVBCNT)=DVBCA_"^"_DVBCNA
"RTN","DVBCANRS",19,0)
 ..S DVBCNT=DVBCNT+1
"RTN","DVBCANRS",20,0)
 K DVBNM,DVBCR,DVBCNT,DVBCA,DVBCRA,DVBCNA,X
"RTN","DVBCANRS",21,0)
 Q
"RTN","DVBCBULL")
0^3^B29784919^B19523211
"RTN","DVBCBULL",1,0)
DVBCBULL ;ALB/GTS - 557/THM-SEND CANCELLATION BULLETIN ; 6/25/91  11:01 AM
"RTN","DVBCBULL",2,0)
 ;;2.7;AMIE;**42,184,189**;Apr 10, 1995;Build 22
"RTN","DVBCBULL",3,0)
 ;
"RTN","DVBCBULL",4,0)
 N MSG1,MERR1,CNT1,MSG2,MERR2,CNT2,RIEN
"RTN","DVBCBULL",5,0)
 K ^TMP("DVBC","BULL",$J),^TMP("DVBC","CMNT",$J) S DIC="^TMP(""DVBC"",""CMNT"",$J,99,",DWPK=1 W @IOF,!!,"Cancellation comments:",!! D EN^DIWE
"RTN","DVBCBULL",6,0)
 K DWPK I $O(^TMP("DVBC","CMNT",$J,99,0))]"" S ^TMP("DVBC","BULL",$J,98,0)=" ",^TMP("DVBC","BULL",$J,97,0)="==========================<  Additional comments  >=========================="
"RTN","DVBCBULL",7,0)
 F I=0:0 S I=$O(^TMP("DVBC","CMNT",$J,99,I)) Q:I=""  S ^TMP("DVBC","BULL",$J,(I+99),0)=^TMP("DVBC","CMNT",$J,99,I,0)
"RTN","DVBCBULL",8,0)
 K ^TMP("DVBC","CMNT",$J) S $P(DOTS,".",45)="." W !!,"A bulletin will now be sent to the 2507 Cancellation mail group.",!
"RTN","DVBCBULL",9,0)
 ;
"RTN","DVBCBULL",10,0)
 ;Build Claim Type Info
"RTN","DVBCBULL",11,0)
 S RIEN=DA
"RTN","DVBCBULL",12,0)
 K ^TMP($J,"DVBCBULL","CT")
"RTN","DVBCBULL",13,0)
 N MSG1,MERR1,CTR1
"RTN","DVBCBULL",14,0)
 S (MSG1,MERR1)="",CTR1=1
"RTN","DVBCBULL",15,0)
 D GETS^DIQ(396.3,RIEN_",","9.1*","E","MSG1","MERR1")
"RTN","DVBCBULL",16,0)
 I $G(MERR1)'="" S ^TMP($J,"DVBCBULL","CT",CTR1)="ERROR GETTING CLAIM TYPE CODES"
"RTN","DVBCBULL",17,0)
 S J=""
"RTN","DVBCBULL",18,0)
 F  S J=$O(MSG1(396.32,J)) Q:J=""  D
"RTN","DVBCBULL",19,0)
 . S CTR1=CTR1+1
"RTN","DVBCBULL",20,0)
 . S ^TMP($J,"DVBCBULL","CT",CTR1)=$G(MSG1(396.32,J,.01,"E"))
"RTN","DVBCBULL",21,0)
 ;
"RTN","DVBCBULL",22,0)
 ;Build Special Considerations Info
"RTN","DVBCBULL",23,0)
 K ^TMP($J,"DVBCBULL","SC")
"RTN","DVBCBULL",24,0)
 N MSG2,MERR2,CTR2
"RTN","DVBCBULL",25,0)
 S (MSG2,MERR2)="",CTR2=1
"RTN","DVBCBULL",26,0)
 D GETS^DIQ(396.3,RIEN,"50*","IE","MSG2","MERR2")
"RTN","DVBCBULL",27,0)
 I $G(MERR2)'="" S ^TMP($J,"DVBCBULL","SC",CTR2)="ERROR GETTING SPECIAL CONSIDERATION CODES"
"RTN","DVBCBULL",28,0)
 S J=""
"RTN","DVBCBULL",29,0)
 F  S J=$O(MSG2(396.31,J)) Q:J=""  D
"RTN","DVBCBULL",30,0)
 . S CTR2=CTR2+1
"RTN","DVBCBULL",31,0)
 . S ^TMP($J,"DVBCBULL","SC",CTR2)=$G(MSG2(396.31,J,.01,"E"))
"RTN","DVBCBULL",32,0)
 ;
"RTN","DVBCBULL",33,0)
GO S L=1,^TMP("DVBC","BULL",$J,L,0)="The following veteran had one or more 2507 exams cancelled:",L=L+1
"RTN","DVBCBULL",34,0)
 S ^TMP("DVBC","BULL",$J,L,0)="   ",L=L+1
"RTN","DVBCBULL",35,0)
 S ^TMP("DVBC","BULL",$J,L,0)="  DFN: `"_DFN_$E("                    ",1,20-$L(DFN))_"SITE: "_DVBCSITE,L=L+1
"RTN","DVBCBULL",36,0)
 S ^TMP("DVBC","BULL",$J,L,0)="  REQUEST DATE: "_DVBCRDAT,L=L+1
"RTN","DVBCBULL",37,0)
 S ^TMP("DVBC","BULL",$J,L,0)="  ",L=L+1
"RTN","DVBCBULL",38,0)
 S ^TMP("DVBC","BULL",$J,L,0)="  Claim Type:",L=L+1
"RTN","DVBCBULL",39,0)
 F  S J=$O(^TMP($J,"DVBCBULL","CT",J)) Q:J=""  D
"RTN","DVBCBULL",40,0)
 . S ^TMP("DVBC","BULL",$J,L,0)="    "_^TMP($J,"DVBCBULL","CT",J),L=L+1
"RTN","DVBCBULL",41,0)
 S ^TMP("DVBC","BULL",$J,L,0)=" ",L=L+1
"RTN","DVBCBULL",42,0)
 S ^TMP("DVBC","BULL",$J,L,0)="  Special Consideration(s):",L=L+1
"RTN","DVBCBULL",43,0)
 S J=""
"RTN","DVBCBULL",44,0)
 F  S J=$O(^TMP($J,"DVBCBULL","SC",J)) Q:J=""  D
"RTN","DVBCBULL",45,0)
 . S ^TMP("DVBC","BULL",$J,L,0)="    "_^TMP($J,"DVBCBULL","SC",J),L=L+1
"RTN","DVBCBULL",46,0)
 S ^TMP("DVBC","BULL",$J,L,0)=" ",L=L+1
"RTN","DVBCBULL",47,0)
 S ^TMP("DVBC","BULL",$J,L,0)="Exams cancelled                               Reason",L=L+1
"RTN","DVBCBULL",48,0)
 S ^TMP("DVBC","BULL",$J,L,0)="  ",L=L+1
"RTN","DVBCBULL",49,0)
 S EXAM="",RSTAT=$P(^DVB(396.3,REQDA,0),U,18)
"RTN","DVBCBULL",50,0)
 F JI=0:0 S EXAM=$O(CANC(EXAM)) Q:EXAM=""  I $P(CANC(EXAM),U,1)="X"!($P(CANC(EXAM),U,1)="RX") S REAS=+$P(CANC(EXAM),U,2) D EXAMS
"RTN","DVBCBULL",51,0)
 S ^TMP("DVBC","BULL",$J,L,0)=" ",L=L+1,COMP=1,CMPC=0
"RTN","DVBCBULL",52,0)
 ;
"RTN","DVBCBULL",53,0)
 S ^TMP("DVBC","BULL",$J,L,0)="  ",L=L+1
"RTN","DVBCBULL",54,0)
 S ^TMP("DVBC","BULL",$J,L,0)="** NOTE: To view the patient using the DFN, paste the DFN number into the    **",L=L+1
"RTN","DVBCBULL",55,0)
 S ^TMP("DVBC","BULL",$J,L,0)="** CAPRI Patient Selector 'Patient ID' field to find the patient. Be sure to **",L=L+1
"RTN","DVBCBULL",56,0)
 S ^TMP("DVBC","BULL",$J,L,0)="** include the ' (backward-apostrophe) character.                            **",L=L+1
"RTN","DVBCBULL",57,0)
 S ^TMP("DVBC","BULL",$J,L,0)="  ",L=L+1
"RTN","DVBCBULL",58,0)
 ;
"RTN","DVBCBULL",59,0)
 K ^TMP("DVBC","CMNT",$J)
"RTN","DVBCBULL",60,0)
 I RSTAT["X" S ^TMP("DVBC","BULL",$J,L,0)=" *** All exams on this request are now CANCELLED. ***",L=L+1,^TMP("DVBC","BULL",$J,L,0)=" ",L=L+1
"RTN","DVBCBULL",61,0)
 S ^TMP("DVBC","BULL",$J,L,0)="** This is an auto-generated email.  Do not respond to this email address.   **",L=L+1
"RTN","DVBCBULL",62,0)
 G SEND
"RTN","DVBCBULL",63,0)
 S ECNT=0
"RTN","DVBCBULL",64,0)
 F JZ=0:0 S JZ=$O(^DVB(396.4,"C",REQDA,JZ)) Q:JZ=""  S STAT=$P(^DVB(396.4,JZ,0),U,4) S:STAT="C" CMPC=1 I STAT'="C"&(STAT'["X") S COMP=0,ECNT=ECNT+1
"RTN","DVBCBULL",65,0)
 ;CMPC=completed exam COMP=open exam
"RTN","DVBCBULL",66,0)
 ;both are toggled, depending on exam status.  Both must be 1 to put release banner on message
"RTN","DVBCBULL",67,0)
 I RSTAT'["X",COMP=0 S ^TMP("DVBC","BULL",$J,L,0)=" *** There "_$S(ECNT=1:"is",1:"are")_" still "_ECNT_" exam"_$S(ECNT=1:"",1:"s")_" open on this request. ***",L=L+1,^TMP("DVBC","BULL",$J,L,0)=" ",L=L+1 G SEND
"RTN","DVBCBULL",68,0)
 I COMP=1&(CMPC=1),RSTAT'["X" S ^TMP("DVBC","BULL",$J,L,0)=" *** This request is now COMPLETE and should be released by MAS ***",L=L+1
"RTN","DVBCBULL",69,0)
 I COMP=1&(CMPC=1),RSTAT'["X" S ^TMP("DVBC","BULL",$J,L,0)=" ",L=L+1 ;spacer
"RTN","DVBCBULL",70,0)
 ;
"RTN","DVBCBULL",71,0)
SEND ;remote sites get bulletins only on total cancellations
"RTN","DVBCBULL",72,0)
 S DIC="^XMB(3.8,",DIC(0)="QM",X="DVBA C 2507 CANCELLATION" D ^DIC S MG=+Y I +Y<0 W !!,*7,"2507 mail group NOT found!  Bulletin not sent.",!! H 3 Q
"RTN","DVBCBULL",73,0)
 F JI=0:0 S JI=$O(^XMB(3.8,MG,1,"B",JI)) Q:JI=""  S XMY(JI)=""
"RTN","DVBCBULL",74,0)
 F JI=0:0 S JI=$O(XMY(JI)) Q:JI=""!(+JI=0)  I '$D(^VA(200,JI,2,+REQRO))&'$D(^VA(200,JI,2,+REQRO))&('$D(^XUSEC("DVBA C SUPERVISOR",JI))) K XMY(JI)
"RTN","DVBCBULL",75,0)
 S:REQSTR="" REQSTR=.5 S XMY(REQSTR)="",XMY(DUZ)="",XMSUB="Cancellation of 2507 Exams",XMTEXT="^TMP(""DVBC"",""BULL"",$J,",XMDUZ=DUZ
"RTN","DVBCBULL",76,0)
 I '$D(^VA(200,DUZ,.15)) S XMY(XMDUZ)="" G XMD
"RTN","DVBCBULL",77,0)
 I $D(^VA(200,DUZ,.15))&($P(^VA(200,DUZ,.15),"^",1)="") S XMY(XMDUZ)="" G XMD
"RTN","DVBCBULL",78,0)
 I $D(^VA(200,DUZ,.15)) S XMY($P(^VA(200,DUZ,.15),"^",1))=""
"RTN","DVBCBULL",79,0)
XMD D ^XMD
"RTN","DVBCBULL",80,0)
 K ^TMP("DVBC","BULL",$J),XMDUZ,DOTS,COMP,CMPC,XEXAM,REASON,L,JI,JY,XMY,XMSUB,XMTEXT,XMDUZ,ECNT
"RTN","DVBCBULL",81,0)
 K ^TMP($J,"DVBCBULL","CT"),^TMP($J,"DVBCBULL","SC")
"RTN","DVBCBULL",82,0)
 Q
"RTN","DVBCBULL",83,0)
 ;
"RTN","DVBCBULL",84,0)
EXAMS S REASON=$S($D(^DVB(396.5,+REAS,0)):$P(^(0),U,1),1:"Undetermined")
"RTN","DVBCBULL",85,0)
 S XEXAM=$E(EXAM,1,25),^TMP("DVBC","BULL",$J,L,0)="     "_XEXAM_" "_$E(DOTS,1,35-$L(XEXAM))_" "_REASON S L=L+1
"RTN","DVBCBULL",86,0)
 Q
"SEC","^DD",396.4,396.4,53,9)
"@"
"SEC","^DD",396.4,396.453,.01,9)
"@"
"SEC","^DD",396.5,396.5,.02,9)
"@"
"SEC","^DIC",396.25,396.25,0,"AUDIT")
@
"SEC","^DIC",396.25,396.25,0,"DD")
@
"SEC","^DIC",396.25,396.25,0,"DEL")
@
"SEC","^DIC",396.25,396.25,0,"LAYGO")
@
"SEC","^DIC",396.25,396.25,0,"RD")
@
"SEC","^DIC",396.25,396.25,0,"WR")
@
"SEC","^DIC",396.27,396.27,0,"AUDIT")
@
"SEC","^DIC",396.27,396.27,0,"DD")
@
"SEC","^DIC",396.27,396.27,0,"DEL")
@
"SEC","^DIC",396.27,396.27,0,"LAYGO")
@
"SEC","^DIC",396.27,396.27,0,"RD")
@
"SEC","^DIC",396.27,396.27,0,"WR")
@
"UP",396.3,396.31,-1)
396.3^8
"UP",396.3,396.31,0)
396.31
"UP",396.3,396.32,-1)
396.3^9
"UP",396.3,396.32,0)
396.32
"UP",396.4,396.453,-1)
396.4^5
"UP",396.4,396.453,0)
396.453
"VER")
8.0^22.0
"^DD",396.25,396.25,0)
FIELD^^.01^1
"^DD",396.25,396.25,0,"DDA")
N
"^DD",396.25,396.25,0,"DT")
3140813
"^DD",396.25,396.25,0,"IX","B",396.25,.01)

"^DD",396.25,396.25,0,"NM","2507 SPECIAL CONSIDERATIONS")

"^DD",396.25,396.25,0,"PT",396.31,.01)

"^DD",396.25,396.25,.01,0)
NAME^RF^^0;1^K:$L(X)>75!($L(X)<3)!'(X'?1P.E) X
"^DD",396.25,396.25,.01,1,0)
^.1
"^DD",396.25,396.25,.01,1,1,0)
396.25^B
"^DD",396.25,396.25,.01,1,1,1)
S ^DVB(396.25,"B",$E(X,1,30),DA)=""
"^DD",396.25,396.25,.01,1,1,2)
K ^DVB(396.25,"B",$E(X,1,30),DA)
"^DD",396.25,396.25,.01,3)
Answer must be 3-75 characters in length.
"^DD",396.25,396.25,.01,21,0)
^^2^2^3140813^
"^DD",396.25,396.25,.01,21,1,0)
This field contains the name of the Special Consideration for the 2507 
"^DD",396.25,396.25,.01,21,2,0)
Request.
"^DD",396.25,396.25,.01,"DT")
3140813
"^DD",396.27,396.27,0)
FIELD^^.01^1
"^DD",396.27,396.27,0,"DDA")
N
"^DD",396.27,396.27,0,"DT")
3141114
"^DD",396.27,396.27,0,"IX","B",396.27,.01)

"^DD",396.27,396.27,0,"NM","2507 CLAIM TYPE")

"^DD",396.27,396.27,0,"PT",396.32,.01)

"^DD",396.27,396.27,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",396.27,396.27,.01,1,0)
^.1
"^DD",396.27,396.27,.01,1,1,0)
396.27^B
"^DD",396.27,396.27,.01,1,1,1)
S ^DVB(396.27,"B",$E(X,1,30),DA)=""
"^DD",396.27,396.27,.01,1,1,2)
K ^DVB(396.27,"B",$E(X,1,30),DA)
"^DD",396.27,396.27,.01,3)
Answer must be 3-30 characters in length.
"^DD",396.27,396.27,.01,21,0)
^^1^1^3141114^
"^DD",396.27,396.27,.01,21,1,0)
This field is the description name of the 2507 Claim Type
"^DD",396.27,396.27,.01,"DT")
3141114
"^DD",396.3,396.3,9.1,0)
CLAIM TYPE^396.32P^^9;0
"^DD",396.3,396.3,9.1,21,0)
^.001^1^1^3150217^^^
"^DD",396.3,396.3,9.1,21,1,0)
This is a list of Claim Types for this request.
"^DD",396.3,396.3,50,0)
SPECIAL CONSIDERATIONS^396.31P^^8;0
"^DD",396.3,396.3,50,21,0)
^.001^1^1^3141215^^
"^DD",396.3,396.3,50,21,1,0)
This is the list of special considerations for this request.
"^DD",396.3,396.3,51,0)
INSUFFICIENT REQUEST^S^Y:YES;N:NO;^10;1^Q
"^DD",396.3,396.3,51,1,0)
^.1
"^DD",396.3,396.3,51,1,1,0)
396.3^G
"^DD",396.3,396.3,51,1,1,1)
S ^DVB(396.3,"G",$E(X,1,30),DA)=""
"^DD",396.3,396.3,51,1,1,2)
K ^DVB(396.3,"G",$E(X,1,30),DA)
"^DD",396.3,396.3,51,1,1,"%D",0)
^^1^1^3141203^
"^DD",396.3,396.3,51,1,1,"%D",1,0)
The whole file cross reference for the Insufficient request field field
"^DD",396.3,396.3,51,1,1,"DT")
3141203
"^DD",396.3,396.3,51,3)
Enter the insufficient request.
"^DD",396.3,396.3,51,21,0)
^.001^2^2^3141204^^
"^DD",396.3,396.3,51,21,1,0)
The CAPRI GUI will mark this field Yes or No. If this request is marked 
"^DD",396.3,396.3,51,21,2,0)
Insufficient, then this field will be set to Y(es) by the CAPRI GUI.
"^DD",396.3,396.3,51,"DT")
3141203
"^DD",396.3,396.31,0)
SPECIAL CONSIDERATIONS SUB-FIELD^^.01^1
"^DD",396.3,396.31,0,"DT")
3141104
"^DD",396.3,396.31,0,"IX","B",396.31,.01)

"^DD",396.3,396.31,0,"NM","SPECIAL CONSIDERATIONS")

"^DD",396.3,396.31,0,"UP")
396.3
"^DD",396.3,396.31,.01,0)
SPECIAL CONSIDERATIONS^P396.25'^DVB(396.25,^0;1^Q
"^DD",396.3,396.31,.01,1,0)
^.1
"^DD",396.3,396.31,.01,1,1,0)
396.31^B
"^DD",396.3,396.31,.01,1,1,1)
S ^DVB(396.3,DA(1),8,"B",$E(X,1,30),DA)=""
"^DD",396.3,396.31,.01,1,1,2)
K ^DVB(396.3,DA(1),8,"B",$E(X,1,30),DA)
"^DD",396.3,396.31,.01,1,2,0)
396.3^D
"^DD",396.3,396.31,.01,1,2,1)
S ^DVB(396.3,"D",$E(X,1,30),DA(1),DA)=""
"^DD",396.3,396.31,.01,1,2,2)
K ^DVB(396.3,"D",$E(X,1,30),DA(1),DA)
"^DD",396.3,396.31,.01,1,2,"%D",0)
^^4^4^3141215^
"^DD",396.3,396.31,.01,1,2,"%D",1,0)
This is a whole file cross reference. It records the SPECIAL
"^DD",396.3,396.31,.01,1,2,"%D",2,0)
CONSIDERATIONS NAME ien from global 396.25; then the 2507 request ien from
"^DD",396.3,396.31,.01,1,2,"%D",3,0)
396.3; and finally the increment number of SPECIAL CONSIDERATIONS NAME
"^DD",396.3,396.31,.01,1,2,"%D",4,0)
assigned to a request.
"^DD",396.3,396.31,.01,1,2,"DT")
3141121
"^DD",396.3,396.31,.01,3)
Enter Special Consideration
"^DD",396.3,396.31,.01,21,0)
^.001^1^1^3141215^^
"^DD",396.3,396.31,.01,21,1,0)
Select the special considerations from the active special considerations.
"^DD",396.3,396.31,.01,"DT")
3141121
"^DD",396.3,396.32,0)
CLAIM TYPE SUB-FIELD^^.01^1
"^DD",396.3,396.32,0,"DT")
3141114
"^DD",396.3,396.32,0,"IX","B",396.32,.01)

"^DD",396.3,396.32,0,"NM","CLAIM TYPE")

"^DD",396.3,396.32,0,"UP")
396.3
"^DD",396.3,396.32,.01,0)
CLAIM TYPE^P396.27'^DVB(396.27,^0;1^Q
"^DD",396.3,396.32,.01,1,0)
^.1
"^DD",396.3,396.32,.01,1,1,0)
396.32^B
"^DD",396.3,396.32,.01,1,1,1)
S ^DVB(396.3,DA(1),9,"B",$E(X,1,30),DA)=""
"^DD",396.3,396.32,.01,1,1,2)
K ^DVB(396.3,DA(1),9,"B",$E(X,1,30),DA)
"^DD",396.3,396.32,.01,1,2,0)
396.3^F
"^DD",396.3,396.32,.01,1,2,1)
S ^DVB(396.3,"F",$E(X,1,30),DA(1),DA)=""
"^DD",396.3,396.32,.01,1,2,2)
K ^DVB(396.3,"F",$E(X,1,30),DA(1),DA)
"^DD",396.3,396.32,.01,1,2,"%D",0)
^^3^3^3141215^
"^DD",396.3,396.32,.01,1,2,"%D",1,0)
This a whole file cross reference. It records the claim type ien from
"^DD",396.3,396.32,.01,1,2,"%D",2,0)
global 396.27; then the 2507 request ien from 396.3; and finally the
"^DD",396.3,396.32,.01,1,2,"%D",3,0)
increment number of claim types assigned to a request.
"^DD",396.3,396.32,.01,1,2,"DT")
3141121
"^DD",396.3,396.32,.01,3)
Select the claim type from the list of active claim types
"^DD",396.3,396.32,.01,"DT")
3141121
"^DD",396.4,396.4,53,0)
CANCELLATION COMMENTS^396.453^^5;0
"^DD",396.4,396.4,53,21,0)
^.001^2^2^3141202^^^
"^DD",396.4,396.4,53,21,1,0)
This field captures the comments from the CAPRI GUI comments field of the
"^DD",396.4,396.4,53,21,2,0)
2507 EXAM Details Screen.
"^DD",396.4,396.4,53,23,0)
^.001^2^2^3141202^^^^
"^DD",396.4,396.4,53,23,1,0)
THis field saves the cancellation comments from the CAPRI GUI when an 
"^DD",396.4,396.4,53,23,2,0)
exam is cancelled.
"^DD",396.4,396.453,0)
CANCELLATION COMMENTS SUB-FIELD^^.01^1
"^DD",396.4,396.453,0,"DT")
3141020
"^DD",396.4,396.453,0,"NM","CANCELLATION COMMENTS")

"^DD",396.4,396.453,0,"UP")
396.4
"^DD",396.4,396.453,.01,0)
CANCELLATION COMMENTS^Wx^^0;1^Q
"^DD",396.4,396.453,.01,3)
Enter comments connected to a 2507 EXAM cancellation
"^DD",396.4,396.453,.01,21,0)
^.001^2^2^3141202^^^
"^DD",396.4,396.453,.01,21,1,0)
This field captures the comments from the CAPRI GUI comments field of the
"^DD",396.4,396.453,.01,21,2,0)
2507 EXAM Details Screen.
"^DD",396.4,396.453,.01,"DT")
3141020
"^DD",396.5,396.5,.01,0)
NAME^RF^^0;1^K:$L(X)>40!($L(X)<3)!'(X'?1P.E) X
"^DD",396.5,396.5,.01,1,0)
^.1^^-1
"^DD",396.5,396.5,.01,1,1,0)
396.5^B
"^DD",396.5,396.5,.01,1,1,1)
S ^DVB(396.5,"B",$E(X,1,30),DA)=""
"^DD",396.5,396.5,.01,1,1,2)
K ^DVB(396.5,"B",$E(X,1,30),DA)
"^DD",396.5,396.5,.01,1,1,"DT")
3150113
"^DD",396.5,396.5,.01,3)
Answer must be 3-40 characters in length.
"^DD",396.5,396.5,.01,21,0)
^.001^2^2^3150114^^^^
"^DD",396.5,396.5,.01,21,1,0)
This field holds the values of possible reasons a user may select whenever
"^DD",396.5,396.5,.01,21,2,0)
cancelling a 2507 exam.
"^DD",396.5,396.5,.01,23,0)
^.001^2^2^3150114^^^^
"^DD",396.5,396.5,.01,23,1,0)
A record in this file is pointed to by CANCELLATION REASON field in the
"^DD",396.5,396.5,.01,23,2,0)
file 396.4.
"^DD",396.5,396.5,.01,"DT")
3150130
"^DD",396.5,396.5,.02,0)
STATUS^RS^0:INACTIVE;1:ACTIVE;^0;3^Q
"^DD",396.5,396.5,.02,1,0)
^.1
"^DD",396.5,396.5,.02,1,1,0)
396.5^D
"^DD",396.5,396.5,.02,1,1,1)
S ^DVB(396.5,"D",$E(X,1,30),DA)=""
"^DD",396.5,396.5,.02,1,1,2)
K ^DVB(396.5,"D",$E(X,1,30),DA)
"^DD",396.5,396.5,.02,1,1,"%D",0)
^.101^2^2^3141209^^
"^DD",396.5,396.5,.02,1,1,"%D",1,0)
This cross reference is for the STATUS field. "0" represents 
"^DD",396.5,396.5,.02,1,1,"%D",2,0)
"INACTIVE" and "1" is for "ACTIVE
"^DD",396.5,396.5,.02,1,1,"DT")
3141009
"^DD",396.5,396.5,.02,3)
Type '0' or 'I' to Inactivate '1' or 'A' to Activate a Cancellation Reason
"^DD",396.5,396.5,.02,21,0)
^.001^1^1^3150114^^^^
"^DD",396.5,396.5,.02,21,1,0)
Used to prevent display/selection of inactive Cancellation Reasons
"^DD",396.5,396.5,.02,"DT")
3141120
"^DD",396.94,396.94,1,0)
INACTIVE^S^Y:YES;N:NO;^0;4^Q
"^DD",396.94,396.94,1,3)
Enter Y denoting this INSUFFICIENT REASON is inactive.
"^DD",396.94,396.94,1,21,0)
^.001^3^3^3141211^^
"^DD",396.94,396.94,1,21,1,0)
This field denotes if the INSUFFICIENT REASON is inactive. The valid 
"^DD",396.94,396.94,1,21,2,0)
values for this field is from a set of code. Y for Yes, denoting the 
"^DD",396.94,396.94,1,21,3,0)
INSUFFICIENT REASON is inactive. N for No, denoting the field is active.
"^DD",396.94,396.94,1,"DT")
3141104
"^DIC",396.25,396.25,0)
2507 SPECIAL CONSIDERATIONS^396.25
"^DIC",396.25,396.25,0,"GL")
^DVB(396.25,
"^DIC",396.25,396.25,"%",0)
^1.005^^
"^DIC",396.25,396.25,"%D",0)
^^1^1^3141105^
"^DIC",396.25,396.25,"%D",1,0)
This file contains a list of valid Special Considerations.
"^DIC",396.25,"B","2507 SPECIAL CONSIDERATIONS",396.25)

"^DIC",396.27,396.27,0)
2507 CLAIM TYPE^396.27
"^DIC",396.27,396.27,0,"GL")
^DVB(396.27,
"^DIC",396.27,396.27,"%",0)
^1.005^^
"^DIC",396.27,396.27,"%D",0)
^^1^1^3141114^
"^DIC",396.27,396.27,"%D",1,0)
This file contains a list of valid Claim Types.
"^DIC",396.27,"B","2507 CLAIM TYPE",396.27)

"BLD",8598,6)
^167
**END**
**END**

