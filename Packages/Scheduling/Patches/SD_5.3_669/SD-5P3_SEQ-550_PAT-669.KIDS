Released SD*5.3*669 SEQ #550
Extracted from mail message
**KIDS**:SD*5.3*669^

**INSTALL NAME**
SD*5.3*669
"BLD",10347,0)
SD*5.3*669^SCHEDULING^0^3170621^y
"BLD",10347,4,0)
^9.64PA^409.86^1
"BLD",10347,4,409.86,0)
409.86
"BLD",10347,4,409.86,222)
y^y^f^^n^^n^m^n
"BLD",10347,4,"B",409.86,409.86)

"BLD",10347,6)
5^
"BLD",10347,6.3)
16
"BLD",10347,"ABPKG")
n
"BLD",10347,"KRN",0)
^9.67PA^779.2^20
"BLD",10347,"KRN",.4,0)
.4
"BLD",10347,"KRN",.4,"NM",0)
^9.68A^^0
"BLD",10347,"KRN",.401,0)
.401
"BLD",10347,"KRN",.401,"NM",0)
^9.68A^^0
"BLD",10347,"KRN",.402,0)
.402
"BLD",10347,"KRN",.402,"NM",0)
^9.68A^^0
"BLD",10347,"KRN",.403,0)
.403
"BLD",10347,"KRN",.5,0)
.5
"BLD",10347,"KRN",.5,"NM",0)
^9.68A^^0
"BLD",10347,"KRN",.84,0)
.84
"BLD",10347,"KRN",3.6,0)
3.6
"BLD",10347,"KRN",3.6,"NM",0)
^9.68A^^0
"BLD",10347,"KRN",3.8,0)
3.8
"BLD",10347,"KRN",3.8,"NM",0)
^9.68A^^0
"BLD",10347,"KRN",9.2,0)
9.2
"BLD",10347,"KRN",9.8,0)
9.8
"BLD",10347,"KRN",9.8,"NM",0)
^9.68A^6^6
"BLD",10347,"KRN",9.8,"NM",1,0)
SDECEP^^0^B20201129
"BLD",10347,"KRN",9.8,"NM",2,0)
SDECEPT^^0^B134242125
"BLD",10347,"KRN",9.8,"NM",3,0)
SDECCON^^0^B15794027
"BLD",10347,"KRN",9.8,"NM",4,0)
SDECELG^^0^B1142489
"BLD",10347,"KRN",9.8,"NM",5,0)
SDEC07^^0^B186068449
"BLD",10347,"KRN",9.8,"NM",6,0)
SDEC07B^^0^B55538827
"BLD",10347,"KRN",9.8,"NM","B","SDEC07",5)

"BLD",10347,"KRN",9.8,"NM","B","SDEC07B",6)

"BLD",10347,"KRN",9.8,"NM","B","SDECCON",3)

"BLD",10347,"KRN",9.8,"NM","B","SDECELG",4)

"BLD",10347,"KRN",9.8,"NM","B","SDECEP",1)

"BLD",10347,"KRN",9.8,"NM","B","SDECEPT",2)

"BLD",10347,"KRN",19,0)
19
"BLD",10347,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",10347,"KRN",19,"NM",1,0)
SDECRPC^^0
"BLD",10347,"KRN",19,"NM","B","SDECRPC",1)

"BLD",10347,"KRN",19.1,0)
19.1
"BLD",10347,"KRN",101,0)
101
"BLD",10347,"KRN",409.61,0)
409.61
"BLD",10347,"KRN",771,0)
771
"BLD",10347,"KRN",779.2,0)
779.2
"BLD",10347,"KRN",870,0)
870
"BLD",10347,"KRN",8989.51,0)
8989.51
"BLD",10347,"KRN",8989.52,0)
8989.52
"BLD",10347,"KRN",8994,0)
8994
"BLD",10347,"KRN",8994,"NM",0)
^9.68A^17^17
"BLD",10347,"KRN",8994,"NM",1,0)
SDEC EP CLASSIFICATION^^0
"BLD",10347,"KRN",8994,"NM",2,0)
SDEC EP CPT^^0
"BLD",10347,"KRN",8994,"NM",3,0)
SDEC EP DEMOGRAPHICS^^0
"BLD",10347,"KRN",8994,"NM",4,0)
SDEC EP DIAGNOSIS^^0
"BLD",10347,"KRN",8994,"NM",5,0)
SDEC EP EVENT LOG^^0
"BLD",10347,"KRN",8994,"NM",6,0)
SDEC EP PROVIDER^^0
"BLD",10347,"KRN",8994,"NM",7,0)
SDEC EP PT INFO^^0
"BLD",10347,"KRN",8994,"NM",8,0)
SDEC EP STOP CODE^^0
"BLD",10347,"KRN",8994,"NM",9,0)
SDEC EP WAIT TIME^^0
"BLD",10347,"KRN",8994,"NM",10,0)
SDEC APPT STATUS^^0
"BLD",10347,"KRN",8994,"NM",11,0)
SDEC ELIGIBILITY^^0
"BLD",10347,"KRN",8994,"NM",12,0)
SDEC CONTACT DISPLAY^^0
"BLD",10347,"KRN",8994,"NM",13,0)
SDEC CONTACT MULTI-DISPLAY^^0
"BLD",10347,"KRN",8994,"NM",14,0)
SDEC CONTACT NEW^^0
"BLD",10347,"KRN",8994,"NM",15,0)
SDEC CONTACT SEQUENCE^^0
"BLD",10347,"KRN",8994,"NM",16,0)
SDEC CONTACT STOP CODE^^0
"BLD",10347,"KRN",8994,"NM",17,0)
SDEC CONTACT UPDATE^^0
"BLD",10347,"KRN",8994,"NM","B","SDEC APPT STATUS",10)

"BLD",10347,"KRN",8994,"NM","B","SDEC CONTACT DISPLAY",12)

"BLD",10347,"KRN",8994,"NM","B","SDEC CONTACT MULTI-DISPLAY",13)

"BLD",10347,"KRN",8994,"NM","B","SDEC CONTACT NEW",14)

"BLD",10347,"KRN",8994,"NM","B","SDEC CONTACT SEQUENCE",15)

"BLD",10347,"KRN",8994,"NM","B","SDEC CONTACT STOP CODE",16)

"BLD",10347,"KRN",8994,"NM","B","SDEC CONTACT UPDATE",17)

"BLD",10347,"KRN",8994,"NM","B","SDEC ELIGIBILITY",11)

"BLD",10347,"KRN",8994,"NM","B","SDEC EP CLASSIFICATION",1)

"BLD",10347,"KRN",8994,"NM","B","SDEC EP CPT",2)

"BLD",10347,"KRN",8994,"NM","B","SDEC EP DEMOGRAPHICS",3)

"BLD",10347,"KRN",8994,"NM","B","SDEC EP DIAGNOSIS",4)

"BLD",10347,"KRN",8994,"NM","B","SDEC EP EVENT LOG",5)

"BLD",10347,"KRN",8994,"NM","B","SDEC EP PROVIDER",6)

"BLD",10347,"KRN",8994,"NM","B","SDEC EP PT INFO",7)

"BLD",10347,"KRN",8994,"NM","B","SDEC EP STOP CODE",8)

"BLD",10347,"KRN",8994,"NM","B","SDEC EP WAIT TIME",9)

"BLD",10347,"KRN","B",.4,.4)

"BLD",10347,"KRN","B",.401,.401)

"BLD",10347,"KRN","B",.402,.402)

"BLD",10347,"KRN","B",.403,.403)

"BLD",10347,"KRN","B",.5,.5)

"BLD",10347,"KRN","B",.84,.84)

"BLD",10347,"KRN","B",3.6,3.6)

"BLD",10347,"KRN","B",3.8,3.8)

"BLD",10347,"KRN","B",9.2,9.2)

"BLD",10347,"KRN","B",9.8,9.8)

"BLD",10347,"KRN","B",19,19)

"BLD",10347,"KRN","B",19.1,19.1)

"BLD",10347,"KRN","B",101,101)

"BLD",10347,"KRN","B",409.61,409.61)

"BLD",10347,"KRN","B",771,771)

"BLD",10347,"KRN","B",779.2,779.2)

"BLD",10347,"KRN","B",870,870)

"BLD",10347,"KRN","B",8989.51,8989.51)

"BLD",10347,"KRN","B",8989.52,8989.52)

"BLD",10347,"KRN","B",8994,8994)

"BLD",10347,"QUES",0)
^9.62^^
"BLD",10347,"REQB",0)
^9.611^2^1
"BLD",10347,"REQB",2,0)
SD*5.3*665^2
"BLD",10347,"REQB","B","SD*5.3*665",2)

"FIA",409.86)
SDEC CONTACT
"FIA",409.86,0)
^SDEC(409.86,
"FIA",409.86,0,0)
409.86P
"FIA",409.86,0,1)
y^y^f^^n^^n^m^n
"FIA",409.86,0,10)

"FIA",409.86,0,11)

"FIA",409.86,0,"RLRO")

"FIA",409.86,0,"VR")
5.3^SD
"FIA",409.86,409.86)
0
"FIA",409.86,409.863)
0
"KRN",19,2921747,-1)
0^1
"KRN",19,2921747,0)
SDECRPC^CLINICAL SCHEDULING PROCEDURE CALLS^^B^^^^^^^^
"KRN",19,2921747,1,0)
^19.06^2^2^3170524^^^
"KRN",19,2921747,1,1,0)
This option hosts RPCs in the SDEC namespace.  CLINICAL SCHEDULING users 
"KRN",19,2921747,1,2,0)
must have access to this option in order to use CLINICAL SCHEDULING.
"KRN",19,2921747,99.1)
64281,43176
"KRN",19,2921747,"RPC",0)
^19.05P^202^202
"KRN",19,2921747,"RPC",1,0)
SDEC ACCGPTYG
"KRN",19,2921747,"RPC",2,0)
SDEC ACCGROUP
"KRN",19,2921747,"RPC",3,0)
SDEC ACCTYPE
"KRN",19,2921747,"RPC",4,0)
SDEC ADDACCG
"KRN",19,2921747,"RPC",5,0)
SDEC ADDACCTY
"KRN",19,2921747,"RPC",6,0)
SDEC ADDAGI
"KRN",19,2921747,"RPC",7,0)
SDEC ADDRES
"KRN",19,2921747,"RPC",8,0)
SDEC ADDRESU
"KRN",19,2921747,"RPC",9,0)
SDEC ADDRG
"KRN",19,2921747,"RPC",10,0)
SDEC ADDRGI
"KRN",19,2921747,"RPC",11,0)
SDEC APBLKALL
"KRN",19,2921747,"RPC",12,0)
SDEC APBLKOV
"KRN",19,2921747,"RPC",13,0)
SDEC APPADD
"KRN",19,2921747,"RPC",14,0)
SDEC APPDEL
"KRN",19,2921747,"RPC",15,0)
SDEC APPTEVLG
"KRN",19,2921747,"RPC",16,0)
SDEC APPTLETR
"KRN",19,2921747,"RPC",17,0)
SDEC APPTYPES
"KRN",19,2921747,"RPC",18,0)
SDEC AVADD
"KRN",19,2921747,"RPC",19,0)
SDEC AVDEL
"KRN",19,2921747,"RPC",20,0)
SDEC AVDELDT
"KRN",19,2921747,"RPC",21,0)
SDEC CANCKOUT
"KRN",19,2921747,"RPC",22,0)
SDEC CANREAS
"KRN",19,2921747,"RPC",23,0)
SDEC CHECKIN
"KRN",19,2921747,"RPC",24,0)
SDEC CHECKOUT
"KRN",19,2921747,"RPC",25,0)
SDEC CLINALL
"KRN",19,2921747,"RPC",26,0)
SDEC CLINCAN
"KRN",19,2921747,"RPC",27,0)
SDEC CLINDIS
"KRN",19,2921747,"RPC",28,0)
SDEC CLINDISW
"KRN",19,2921747,"RPC",29,0)
SDEC CLINLET
"KRN",19,2921747,"RPC",30,0)
SDEC CLINLETW
"KRN",19,2921747,"RPC",31,0)
SDEC CLINPROV
"KRN",19,2921747,"RPC",32,0)
SDEC CLINSET
"KRN",19,2921747,"RPC",33,0)
SDEC CLINSTOP
"KRN",19,2921747,"RPC",34,0)
SDEC COPYAPPT
"KRN",19,2921747,"RPC",35,0)
SDEC CPCANC
"KRN",19,2921747,"RPC",36,0)
SDEC CPSTAT
"KRN",19,2921747,"RPC",37,0)
SDEC CRSCHED
"KRN",19,2921747,"RPC",38,0)
SDEC CSLOTSCH
"KRN",19,2921747,"RPC",39,0)
SDEC CURFACG
"KRN",19,2921747,"RPC",40,0)
SDEC CVARAPPT
"KRN",19,2921747,"RPC",41,0)
SDEC DELAG
"KRN",19,2921747,"RPC",42,0)
SDEC DELAGI
"KRN",19,2921747,"RPC",43,0)
SDEC DELRESGP
"KRN",19,2921747,"RPC",44,0)
SDEC DELRGI
"KRN",19,2921747,"RPC",45,0)
SDEC DELRU
"KRN",19,2921747,"RPC",46,0)
SDEC EDITAPPT
"KRN",19,2921747,"RPC",47,0)
SDEC EHRPT
"KRN",19,2921747,"RPC",48,0)
SDEC GETFAC
"KRN",19,2921747,"RPC",49,0)
SDEC GETREGA
"KRN",19,2921747,"RPC",50,0)
SDEC HLTHSUMM
"KRN",19,2921747,"RPC",51,0)
SDEC HOLIDAY
"KRN",19,2921747,"RPC",52,0)
SDEC HOSPLOC
"KRN",19,2921747,"RPC",53,0)
SDEC IMHERE
"KRN",19,2921747,"RPC",54,0)
SDEC NEWPERS
"KRN",19,2921747,"RPC",55,0)
SDEC NOSHOPAT
"KRN",19,2921747,"RPC",56,0)
SDEC NOSHOW
"KRN",19,2921747,"RPC",57,0)
SDEC OVBOOK
"KRN",19,2921747,"RPC",58,0)
SDEC PATAPPTD
"KRN",19,2921747,"RPC",59,0)
SDEC PATAPPTH
"KRN",19,2921747,"RPC",60,0)
SDEC PROVALL
"KRN",19,2921747,"RPC",61,0)
SDEC PROVCLIN
"KRN",19,2921747,"RPC",62,0)
SDEC PTLOOKRS
"KRN",19,2921747,"RPC",63,0)
SDEC PWH
"KRN",19,2921747,"RPC",64,0)
SDEC RAISEVNT
"KRN",19,2921747,"RPC",65,0)
SDEC REBKCLIN
"KRN",19,2921747,"RPC",66,0)
SDEC REBKLIST
"KRN",19,2921747,"RPC",67,0)
SDEC REBKNEXT
"KRN",19,2921747,"RPC",68,0)
SDEC REGEVENT
"KRN",19,2921747,"RPC",69,0)
SDEC RESGPUSR
"KRN",19,2921747,"RPC",70,0)
SDEC RESGRPUS
"KRN",19,2921747,"RPC",71,0)
SDEC RESLETRF
"KRN",19,2921747,"RPC",72,0)
SDEC RESLETRS
"KRN",19,2921747,"RPC",73,0)
SDEC RESOURCE
"KRN",19,2921747,"RPC",74,0)
SDEC RESUSER
"KRN",19,2921747,"RPC",75,0)
SDEC SCHUSR
"KRN",19,2921747,"RPC",76,0)
SDEC SEARCHAV
"KRN",19,2921747,"RPC",77,0)
SDEC SETFAC
"KRN",19,2921747,"RPC",78,0)
SDEC SETRBOOK
"KRN",19,2921747,"RPC",79,0)
SDEC SPACEBAR
"KRN",19,2921747,"RPC",80,0)
SDEC SUSRINFO
"KRN",19,2921747,"RPC",81,0)
SDEC SVSPALL
"KRN",19,2921747,"RPC",82,0)
SDEC SYSSTAT
"KRN",19,2921747,"RPC",83,0)
SDEC TPBLKOV
"KRN",19,2921747,"RPC",84,0)
SDEC UNDOCANA
"KRN",19,2921747,"RPC",85,0)
SDEC UNREGEV
"KRN",19,2921747,"RPC",86,0)
SDEC WAITLIST
"KRN",19,2921747,"RPC",87,0)
SDEC WLCLOSE
"KRN",19,2921747,"RPC",88,0)
SDEC WLGET
"KRN",19,2921747,"RPC",89,0)
SDEC WLSET
"KRN",19,2921747,"RPC",90,0)
SDEC PREFGET
"KRN",19,2921747,"RPC",91,0)
SDEC PREFGETV
"KRN",19,2921747,"RPC",92,0)
SDEC PREFSET
"KRN",19,2921747,"RPC",93,0)
SDEC FAPPTGET
"KRN",19,2921747,"RPC",94,0)
SDEC RECAPGET
"KRN",19,2921747,"RPC",95,0)
SDEC RECDSET
"KRN",19,2921747,"RPC",96,0)
SDEC RECGET
"KRN",19,2921747,"RPC",97,0)
SDEC RECPRGET
"KRN",19,2921747,"RPC",98,0)
SDEC RECSET
"KRN",19,2921747,"RPC",99,0)
SDEC REQGET
"KRN",19,2921747,"RPC",100,0)
SDEC PCSTGET
"KRN",19,2921747,"RPC",101,0)
SDEC PCST2GET
"KRN",19,2921747,"RPC",102,0)
SDEC PCSGET
"KRN",19,2921747,"RPC",103,0)
SDEC PTSET
"KRN",19,2921747,"RPC",104,0)
SDEC PTINQ
"KRN",19,2921747,"RPC",105,0)
SDEC SUMMGET
"KRN",19,2921747,"RPC",106,0)
SDEC SUMMAGET
"KRN",19,2921747,"RPC",107,0)
SDEC APPIDGET
"KRN",19,2921747,"RPC",108,0)
SDEC FACLIST
"KRN",19,2921747,"RPC",109,0)
SDEC CGET
"KRN",19,2921747,"RPC",110,0)
SDEC ETHGET
"KRN",19,2921747,"RPC",111,0)
SDEC ETHCMGET
"KRN",19,2921747,"RPC",112,0)
SDEC RACEGET
"KRN",19,2921747,"RPC",113,0)
SDEC REP1GET
"KRN",19,2921747,"RPC",114,0)
SDEC WLPCSET
"KRN",19,2921747,"RPC",115,0)
SDEC APPSDGET
"KRN",19,2921747,"RPC",116,0)
SDEC WLOPEN
"KRN",19,2921747,"RPC",117,0)
SDEC ARCLOSE
"KRN",19,2921747,"RPC",118,0)
SDEC ARDGET
"KRN",19,2921747,"RPC",119,0)
SDEC ARGET
"KRN",19,2921747,"RPC",120,0)
SDEC ARMRTGET
"KRN",19,2921747,"RPC",121,0)
SDEC ARMRTSET
"KRN",19,2921747,"RPC",122,0)
SDEC AROPEN
"KRN",19,2921747,"RPC",123,0)
SDEC ARPCSET
"KRN",19,2921747,"RPC",124,0)
SDEC ARSET
"KRN",19,2921747,"RPC",125,0)
SDEC HIDE
"KRN",19,2921747,"RPC",126,0)
SDEC PRIV
"KRN",19,2921747,"RPC",127,0)
SDEC WLHIDE
"KRN",19,2921747,"RPC",128,0)
SDECAR ARAPPT
"KRN",19,2921747,"RPC",129,0)
SDECAR ARMRTC
"KRN",19,2921747,"RPC",130,0)
SDECDEV DEVICE
"KRN",19,2921747,"RPC",131,0)
SDECDIS DISABIL
"KRN",19,2921747,"RPC",132,0)
SDECIDX GETREC
"KRN",19,2921747,"RPC",133,0)
SDECIDX RECCNT
"KRN",19,2921747,"RPC",134,0)
SDECLK LOCK
"KRN",19,2921747,"RPC",135,0)
SDECLK UNLOCK
"KRN",19,2921747,"RPC",136,0)
SDECLOC PRIVLOC
"KRN",19,2921747,"RPC",137,0)
SDECLOC UPDPRIV
"KRN",19,2921747,"RPC",138,0)
SDECRMG RECCNT
"KRN",19,2921747,"RPC",139,0)
SDECRMG RMG
"KRN",19,2921747,"RPC",140,0)
SDECRMG2 URGENCY
"KRN",19,2921747,"RPC",141,0)
DG SENSITIVE RECORD ACCESS
"KRN",19,2921747,"RPC",142,0)
DG CHK BS5 XREF ARRAY
"KRN",19,2921747,"RPC",143,0)
ORPRF HASFLG
"KRN",19,2921747,"RPC",144,0)
ORPRF GETFLG
"KRN",19,2921747,"RPC",145,0)
ORWPT DIEDON
"KRN",19,2921747,"RPC",146,0)
ORWPT ID INFO
"KRN",19,2921747,"RPC",147,0)
ORWPT LAST5
"KRN",19,2921747,"RPC",148,0)
ORWPT LAST5 RPL
"KRN",19,2921747,"RPC",149,0)
ORWU USERINFO
"KRN",19,2921747,"RPC",150,0)
SD VSE FILTER RPC
"KRN",19,2921747,"RPC",151,0)
SD VSE REPORT RPC
"KRN",19,2921747,"RPC",152,0)
SDEC APPSLOTS
"KRN",19,2921747,"RPC",154,0)
SDEC NETLOC
"KRN",19,2921747,"RPC",155,0)
SDEC NOAVAIL
"KRN",19,2921747,"RPC",156,0)
SDECAPP GETYPE
"KRN",19,2921747,"RPC",157,0)
SDECAR ARMULT
"KRN",19,2921747,"RPC",158,0)
SDECAR AUDITGET
"KRN",19,2921747,"RPC",159,0)
SDECCAP CAN
"KRN",19,2921747,"RPC",160,0)
SDECCAP GET
"KRN",19,2921747,"RPC",161,0)
SDECCAP SET
"KRN",19,2921747,"RPC",162,0)
SDECWL AUDITGET
"KRN",19,2921747,"RPC",163,0)
ROR LIST STATES
"KRN",19,2921747,"RPC",164,0)
XUS SIGNON SETUP
"KRN",19,2921747,"RPC",165,0)
XUS GET VISITOR
"KRN",19,2921747,"RPC",166,0)
XUS SET VISITOR
"KRN",19,2921747,"RPC",167,0)
XUS AV CODE
"KRN",19,2921747,"RPC",168,0)
SDEC01 CLINICS
"KRN",19,2921747,"RPC",169,0)
SDEC57 OBM
"KRN",19,2921747,"RPC",170,0)
SDECAR3 AREDIT
"KRN",19,2921747,"RPC",171,0)
SDECDEM MARITAL
"KRN",19,2921747,"RPC",172,0)
SDECDEM RELIGION
"KRN",19,2921747,"RPC",173,0)
SDECDEM ZIPLINK
"KRN",19,2921747,"RPC",174,0)
SDECDEV DEV
"KRN",19,2921747,"RPC",175,0)
SDECDEV PRINT
"KRN",19,2921747,"RPC",176,0)
SDECRMGP GETRMGUP
"KRN",19,2921747,"RPC",177,0)
SDECRMGP PUTRMGUP
"KRN",19,2921747,"RPC",178,0)
SDECU4 GETFONT
"KRN",19,2921747,"RPC",179,0)
SDECU4 PUTFONT
"KRN",19,2921747,"RPC",180,0)
ORWU CLINLOC
"KRN",19,2921747,"RPC",181,0)
XUS GET USER INFO
"KRN",19,2921747,"RPC",182,0)
XUS GET CCOW TOKEN
"KRN",19,2921747,"RPC",183,0)
ORWPT SHARE
"KRN",19,2921747,"RPC",184,0)
ORWPT TOP
"KRN",19,2921747,"RPC",185,0)
DG SENSITIVE RECORD BULLETIN
"KRN",19,2921747,"RPC",186,0)
SDEC EP CLASSIFICATION
"KRN",19,2921747,"RPC",187,0)
SDEC EP CPT
"KRN",19,2921747,"RPC",188,0)
SDEC EP DEMOGRAPHICS
"KRN",19,2921747,"RPC",189,0)
SDEC EP DIAGNOSIS
"KRN",19,2921747,"RPC",190,0)
SDEC EP EVENT LOG
"KRN",19,2921747,"RPC",191,0)
SDEC EP PROVIDER
"KRN",19,2921747,"RPC",192,0)
SDEC EP PT INFO
"KRN",19,2921747,"RPC",193,0)
SDEC EP STOP CODE
"KRN",19,2921747,"RPC",194,0)
SDEC EP WAIT TIME
"KRN",19,2921747,"RPC",195,0)
SDEC APPT STATUS
"KRN",19,2921747,"RPC",196,0)
SDEC ELIGIBILITY
"KRN",19,2921747,"RPC",197,0)
SDEC CONTACT DISPLAY
"KRN",19,2921747,"RPC",198,0)
SDEC CONTACT MULTI-DISPLAY
"KRN",19,2921747,"RPC",199,0)
SDEC CONTACT NEW
"KRN",19,2921747,"RPC",200,0)
SDEC CONTACT SEQUENCE
"KRN",19,2921747,"RPC",201,0)
SDEC CONTACT STOP CODE
"KRN",19,2921747,"RPC",202,0)
SDEC CONTACT UPDATE
"KRN",19,2921747,"U")
CLINICAL SCHEDULING PROCEDURE 
"KRN",8994,4189,-1)
0^10
"KRN",8994,4189,0)
SDEC APPT STATUS^APPT^SDECEP^1^R^0^^^^^
"KRN",8994,4189,1,0)
^8994.01^1^1^3170524^^^^
"KRN",8994,4189,1,1,0)
Returns patient appointment status from the Patient file.
"KRN",8994,4189,2,0)
^8994.02A^2^2
"KRN",8994,4189,2,1,0)
DFN^1^14^1^1
"KRN",8994,4189,2,1,1,0)
^^1^1^3170519^
"KRN",8994,4189,2,1,1,1,0)
PATIENT IEN
"KRN",8994,4189,2,2,0)
APP^1^14^1^2
"KRN",8994,4189,2,2,1,0)
^8994.021^1^1^3170524^^^
"KRN",8994,4189,2,2,1,1,0)
Appointment date/time
"KRN",8994,4189,2,"B","APP",2)

"KRN",8994,4189,2,"B","DFN",1)

"KRN",8994,4189,2,"PARAMSEQ",1,1)

"KRN",8994,4189,2,"PARAMSEQ",2,2)

"KRN",8994,4189,3,0)
^8994.03^8^8^3170524^^^^
"KRN",8994,4189,3,1,0)
'N' for NO-SHOW
"KRN",8994,4189,3,2,0)
'C' for CANCELLED BY CLINIC
"KRN",8994,4189,3,3,0)
'NA' for NO-SHOW & AUTO RE-BOOK
"KRN",8994,4189,3,4,0)
'CA' for CANCELLED BY CLINIC & AUTO RE-BOOK
"KRN",8994,4189,3,5,0)
'I' for INPATIENT APPOINTMENT
"KRN",8994,4189,3,6,0)
'PC' for CANCELLED BY PATIENT
"KRN",8994,4189,3,7,0)
'PCA' for CANCELLED BY PATIENT & AUTO-REBOOK
"KRN",8994,4189,3,8,0)
'NT' for NO ACTION TAKEN
"KRN",8994,4190,-1)
0^3
"KRN",8994,4190,0)
SDEC EP DEMOGRAPHICS^GETDEM^SDECEPT^1^R
"KRN",8994,4190,1,0)
^8994.01^2^2^3170519^^^^
"KRN",8994,4190,1,1,0)
Provide Scheduling Expanded Entry elements to VSE for displaying in
"KRN",8994,4190,1,2,0)
the VS Gui.
"KRN",8994,4190,2,0)
^8994.02A^2^2
"KRN",8994,4190,2,1,0)
DFN^1^14^1^1
"KRN",8994,4190,2,1,1,0)
^8994.021^1^1^3170519^^
"KRN",8994,4190,2,1,1,1,0)
Patient IEN
"KRN",8994,4190,2,2,0)
ADT^1^14^1^2
"KRN",8994,4190,2,2,1,0)
^8994.021^1^1^3170519^^^^
"KRN",8994,4190,2,2,1,1,0)
Date and Time of Appointment in fileman format
"KRN",8994,4190,2,"B","ADT",2)

"KRN",8994,4190,2,"B","DFN",1)

"KRN",8994,4190,2,"PARAMSEQ",1,1)

"KRN",8994,4190,2,"PARAMSEQ",2,2)

"KRN",8994,4190,3,0)
^8994.03^17^17^3170519^^^^
"KRN",8994,4190,3,1,0)
String Delimited by ^
"KRN",8994,4190,3,2,0)
Pieces: 
"KRN",8994,4190,3,3,0)
0.  Name
"KRN",8994,4190,3,4,0)
1.  Clinic
"KRN",8994,4190,3,5,0)
2.  SSN
"KRN",8994,4190,3,6,0)
3.  Appointment Date Time
"KRN",8994,4190,3,7,0)
4.  Status
"KRN",8994,4190,3,8,0)
5.  Purpose of Visit
"KRN",8994,4190,3,9,0)
6.  Lenght of Appointment
"KRN",8994,4190,3,10,0)
7.  Appointment Type
"KRN",8994,4190,3,11,0)
8.  Lab Date Time
"KRN",8994,4190,3,12,0)
9.  Eligibilty of Appointment
"KRN",8994,4190,3,13,0)
10. X-Ray Date Time
"KRN",8994,4190,3,14,0)
11. Overbook 
"KRN",8994,4190,3,15,0)
12. EKG Date Time
"KRN",8994,4190,3,16,0)
13. Collateral Appointment 
"KRN",8994,4190,3,17,0)
14. Other
"KRN",8994,4191,-1)
0^5
"KRN",8994,4191,0)
SDEC EP EVENT LOG^GETEVT^SDECEPT^1^R^^^1
"KRN",8994,4191,1,0)
^8994.01^3^3^3170519^^^^
"KRN",8994,4191,1,1,0)
Provide Scheduling Expanded Entry Appointment Event Log to
"KRN",8994,4191,1,2,0)
VSE for displaying in the GUI
"KRN",8994,4191,1,3,0)
the VS Gui.
"KRN",8994,4191,2,0)
^8994.02A^2^2
"KRN",8994,4191,2,1,0)
DFN^1^14^1^1
"KRN",8994,4191,2,1,1,0)
^8994.021^1^1^3170519^^
"KRN",8994,4191,2,1,1,1,0)
Patient IEN
"KRN",8994,4191,2,2,0)
ADT^1^14^1^2
"KRN",8994,4191,2,2,1,0)
^8994.021^1^1^3170519^^^^
"KRN",8994,4191,2,2,1,1,0)
Date and Time of appointment in fileman format
"KRN",8994,4191,2,"B","ADT",2)

"KRN",8994,4191,2,"B","DFN",1)

"KRN",8994,4191,2,"PARAMSEQ",1,1)

"KRN",8994,4191,2,"PARAMSEQ",2,2)

"KRN",8994,4191,3,0)
^8994.03^14^14^3170519^^^^
"KRN",8994,4191,3,1,0)
String Delimited by ^
"KRN",8994,4191,3,2,0)
Pieces:
"KRN",8994,4191,3,3,0)
0.  Appointment Made Date 
"KRN",8994,4191,3,4,0)
1.  Appointment Made User 
"KRN",8994,4191,3,5,0)
2.  Check In Date
"KRN",8994,4191,3,6,0)
3.  Check In User
"KRN",8994,4191,3,7,0)
4.  Check Out Date
"KRN",8994,4191,3,8,0)
5.  Check Out User
"KRN",8994,4191,3,9,0)
6.  Check Out Entered Date
"KRN",8994,4191,3,10,0)
7.  No-Show/Cancel Date
"KRN",8994,4191,3,11,0)
8.  No-Show/Cancel User
"KRN",8994,4191,3,12,0)
9. Cancel Reason
"KRN",8994,4191,3,13,0)
10. Cancel Remark
"KRN",8994,4191,3,14,0)
11. Rebook Date
"KRN",8994,4192,-1)
0^9
"KRN",8994,4192,0)
SDEC EP WAIT TIME^GETWT^SDECEPT^1^R
"KRN",8994,4192,1,0)
^8994.01^2^2^3170519^^^^
"KRN",8994,4192,1,1,0)
Provide Scheduling Expanded Entry Wait Time to VSE for displaying in
"KRN",8994,4192,1,2,0)
the VS Gui.
"KRN",8994,4192,2,0)
^8994.02A^2^2
"KRN",8994,4192,2,1,0)
DFN^1^14^1^1
"KRN",8994,4192,2,1,1,0)
^8994.021^1^1^3170519^^
"KRN",8994,4192,2,1,1,1,0)
Patient IEN
"KRN",8994,4192,2,2,0)
ADT^1^14^1^2
"KRN",8994,4192,2,2,1,0)
^8994.021^1^1^3170519^^^^
"KRN",8994,4192,2,2,1,1,0)
Date and Time of Appointment in fileman format
"KRN",8994,4192,2,"B","ADT",2)

"KRN",8994,4192,2,"B","DFN",1)

"KRN",8994,4192,2,"PARAMSEQ",1,1)

"KRN",8994,4192,2,"PARAMSEQ",2,2)

"KRN",8994,4192,3,0)
^8994.03^8^8^3170519^^^
"KRN",8994,4192,3,1,0)
String Delimited by ^
"KRN",8994,4192,3,2,0)
Pieces: 
"KRN",8994,4192,3,3,0)
0.  Request Type
"KRN",8994,4192,3,4,0)
1.  Next Available Type
"KRN",8994,4192,3,5,0)
2.  CID/Preferred Date
"KRN",8994,4192,3,6,0)
3.  Follow-Up Visit
"KRN",8994,4192,3,7,0)
4.  Clinic Wait Time 1
"KRN",8994,4192,3,8,0)
5.  Clinic Wait Time 2
"KRN",8994,4193,-1)
0^7
"KRN",8994,4193,0)
SDEC EP PT INFO^GETPTIN^SDECEPT^1^R^^^1
"KRN",8994,4193,1,0)
^8994.01^3^3^3170519^^^^
"KRN",8994,4193,1,1,0)
Provide Scheduling Expanded Entry Patient Information to
"KRN",8994,4193,1,2,0)
VSE for displaying in
"KRN",8994,4193,1,3,0)
the VS Gui.
"KRN",8994,4193,2,0)
^8994.02A^2^2
"KRN",8994,4193,2,1,0)
DFN^1^14^1^1
"KRN",8994,4193,2,1,1,0)
^8994.021^1^1^3170519^^
"KRN",8994,4193,2,1,1,1,0)
Patient IEN
"KRN",8994,4193,2,2,0)
ADT^1^14^1^2
"KRN",8994,4193,2,2,1,0)
^8994.021^1^1^3170519^^^^
"KRN",8994,4193,2,2,1,1,0)
Date and Time of Appointment in Fileman Format
"KRN",8994,4193,2,"B","ADT",2)

"KRN",8994,4193,2,"B","DFN",1)

"KRN",8994,4193,2,"PARAMSEQ",1,1)

"KRN",8994,4193,2,"PARAMSEQ",2,2)

"KRN",8994,4193,3,0)
^8994.03^24^24^3170519^^^^
"KRN",8994,4193,3,1,0)
String Delimited by ^
"KRN",8994,4193,3,2,0)
Pieces:
"KRN",8994,4193,3,3,0)
0.  Date Of Birth
"KRN",8994,4193,3,4,0)
1.  SSN
"KRN",8994,4193,3,5,0)
2.  Sex
"KRN",8994,4193,3,6,0)
3.  Marital Status
"KRN",8994,4193,3,7,0)
4.  Religious Preference
"KRN",8994,4193,3,8,0)
5.  Primay Eligibility  
"KRN",8994,4193,3,9,0)
6.  POS???
"KRN",8994,4193,3,10,0)
7.  Address
"KRN",8994,4193,3,11,0)
8.  Phone Number
"KRN",8994,4193,3,12,0)
9.  Cell Phone Number
"KRN",8994,4193,3,13,0)
10. Pager Number
"KRN",8994,4193,3,14,0)
11. Email Address
"KRN",8994,4193,3,15,0)
12. Radiation Exposure
"KRN",8994,4193,3,16,0)
13. Status
"KRN",8994,4193,3,17,0)
14. Prisoner of War
"KRN",8994,4193,3,18,0)
15. Last Admit/Lodger Date
"KRN",8994,4193,3,19,0)
16. Agent Orange Exposure Location (AO Exp/Loc)
"KRN",8994,4193,3,20,0)
17. Last Disch./Lodger Date
"KRN",8994,4193,3,21,0)
18. Combat Veteran 
"KRN",8994,4193,3,22,0)
19. Combat Veteran End Date
"KRN",8994,4193,3,23,0)
20. Proj 112/SHAD
"KRN",8994,4193,3,24,0)
21. SW Asia Conditions
"KRN",8994,4194,-1)
0^1
"KRN",8994,4194,0)
SDEC EP CLASSIFICATION^CLASS^SDECEP^1^R^^^1
"KRN",8994,4194,1,0)
^8994.01^2^2^3170519^^^
"KRN",8994,4194,1,1,0)
Provide expanded entry patientclassification information for display
"KRN",8994,4194,1,2,0)
in the VS Gui.
"KRN",8994,4194,2,0)
^8994.02A^2^2
"KRN",8994,4194,2,1,0)
DFN^1^14^1^1
"KRN",8994,4194,2,1,1,0)
^8994.021^1^1^3170519^^^
"KRN",8994,4194,2,1,1,1,0)
PATIENT dfn
"KRN",8994,4194,2,2,0)
ADT^1^14^1^2
"KRN",8994,4194,2,2,1,0)
^8994.021^1^1^3170519^^^^
"KRN",8994,4194,2,2,1,1,0)
Patient appointment date/time.
"KRN",8994,4194,2,"B","ADT",2)

"KRN",8994,4194,2,"B","DFN",1)

"KRN",8994,4194,2,"PARAMSEQ",1,1)

"KRN",8994,4194,2,"PARAMSEQ",2,2)

"KRN",8994,4194,3,0)
^8994.03^8^8^3170519^^^^
"KRN",8994,4194,3,1,0)
1 Agent Orange Exposure
"KRN",8994,4194,3,2,0)
2 Ionizing Radiation Exposure
"KRN",8994,4194,3,3,0)
3 Treatment for SC Condition
"KRN",8994,4194,3,4,0)
4 SW Asia Conditions
"KRN",8994,4194,3,5,0)
5 Military Sexual Trauma
"KRN",8994,4194,3,6,0)
6 Head and/or Neck Cancer
"KRN",8994,4194,3,7,0)
7 Combat Vet (Combat Related)
"KRN",8994,4194,3,8,0)
8 PROJ 112/SHAD
"KRN",8994,4195,-1)
0^4
"KRN",8994,4195,0)
SDEC EP DIAGNOSIS^DIAGN^SDECEP^1^R^^^^^^1
"KRN",8994,4195,1,0)
^8994.01^2^2^3170519^^^^
"KRN",8994,4195,1,1,0)
Returns patient diagnosis information to display in VS Gui when using the 
"KRN",8994,4195,1,2,0)
expanded display option.
"KRN",8994,4195,2,0)
^8994.02A^2^2
"KRN",8994,4195,2,1,0)
DFN^1^14^1^1
"KRN",8994,4195,2,1,1,0)
^8994.021^1^1^3170519^^^^
"KRN",8994,4195,2,1,1,1,0)
Patient IEN.
"KRN",8994,4195,2,2,0)
APP^1^14^1^2
"KRN",8994,4195,2,2,1,0)
^8994.021^1^1^3170519^^^^
"KRN",8994,4195,2,2,1,1,0)
Patient appointment date/time.
"KRN",8994,4195,2,"B","APP",2)

"KRN",8994,4195,2,"B","DFN",1)

"KRN",8994,4195,2,"PARAMSEQ",1,1)

"KRN",8994,4195,2,"PARAMSEQ",2,2)

"KRN",8994,4195,3,0)
^8994.03^1^1^3170519^^^^
"KRN",8994,4195,3,1,0)
Diagnosis code and description.
"KRN",8994,4196,-1)
0^6
"KRN",8994,4196,0)
SDEC EP PROVIDER^PROV^SDECEP^1^R^^^1
"KRN",8994,4196,1,0)
^8994.01^2^2^3170519^^^^
"KRN",8994,4196,1,1,0)
Returns patient appointment provider information to display in 
"KRN",8994,4196,1,2,0)
VS Gui when using the expanded entry option.
"KRN",8994,4196,2,0)
^8994.02A^3^2
"KRN",8994,4196,2,2,0)
DFN^1^^1^1
"KRN",8994,4196,2,2,1,0)
^8994.021^1^1^3170419^^
"KRN",8994,4196,2,2,1,1,0)
Patient IEN
"KRN",8994,4196,2,3,0)
APPT^1^^1^2
"KRN",8994,4196,2,3,1,0)
^8994.021^1^1^3170519^^^^
"KRN",8994,4196,2,3,1,1,0)
Patient appointment date/time in FM format.
"KRN",8994,4196,2,"B","APPT",3)

"KRN",8994,4196,2,"B","DFN",2)

"KRN",8994,4196,2,"PARAMSEQ",1,2)

"KRN",8994,4196,2,"PARAMSEQ",2,3)

"KRN",8994,4196,3,0)
^8994.03^1^1^3170519^^^^
"KRN",8994,4196,3,1,0)
Providers who provided care for the given appointment.
"KRN",8994,4197,-1)
0^2
"KRN",8994,4197,0)
SDEC EP CPT^CPT^SDECEP^1^R^^^1
"KRN",8994,4197,1,0)
^8994.01^2^2^3170519^^^^
"KRN",8994,4197,1,1,0)
Provides prccedures performed during a patient appointment to the VS Gui 
"KRN",8994,4197,1,2,0)
when using the expanded entry option.
"KRN",8994,4197,2,0)
^8994.02A^4^2
"KRN",8994,4197,2,3,0)
DFN^1^14^1^1
"KRN",8994,4197,2,3,1,0)
^8994.021^1^1^3170519^^^^
"KRN",8994,4197,2,3,1,1,0)
Patient DFN.
"KRN",8994,4197,2,4,0)
APP^1^14^1^2
"KRN",8994,4197,2,4,1,0)
^8994.021^1^1^3170519^^^^
"KRN",8994,4197,2,4,1,1,0)
Patient appointment date/time in FM format.
"KRN",8994,4197,2,"B","APP",4)

"KRN",8994,4197,2,"B","DFN",3)

"KRN",8994,4197,2,"PARAMSEQ",1,3)

"KRN",8994,4197,2,"PARAMSEQ",2,4)

"KRN",8994,4197,3,0)
^^1^1^3170519^
"KRN",8994,4197,3,1,0)
Return patient appointment CPT codes.
"KRN",8994,4198,-1)
0^8
"KRN",8994,4198,0)
SDEC EP STOP CODE^SCODE^SDECEP^1^R^^^1
"KRN",8994,4198,1,0)
^8994.01^1^1^3170519^^
"KRN",8994,4198,1,1,0)
Returns stop code information to the VSE to display in the VS GUI.
"KRN",8994,4198,2,0)
^8994.02A^2^2
"KRN",8994,4198,2,1,0)
DFN^1^14^1^1
"KRN",8994,4198,2,1,1,0)
^8994.021^1^1^3170519^^
"KRN",8994,4198,2,1,1,1,0)
Patient IEN.
"KRN",8994,4198,2,2,0)
APP^1^14^1^2
"KRN",8994,4198,2,2,1,0)
^8994.021^1^1^3170519^^
"KRN",8994,4198,2,2,1,1,0)
Date/time of appointment in FM format.
"KRN",8994,4198,2,"B","APP",2)

"KRN",8994,4198,2,"B","DFN",1)

"KRN",8994,4198,2,"PARAMSEQ",1,1)

"KRN",8994,4198,2,"PARAMSEQ",2,2)

"KRN",8994,4198,3,0)
^^1^1^3170519^
"KRN",8994,4198,3,1,0)
Returns primary and secondary stop code for appointment.
"KRN",8994,4199,-1)
0^11
"KRN",8994,4199,0)
SDEC ELIGIBILITY^START^SDECELG^1^R^^^1
"KRN",8994,4199,1,0)
^8994.01^1^1^3170520^^^^
"KRN",8994,4199,1,1,0)
Returns patient eligibility to the VSE VS Gui.
"KRN",8994,4199,2,0)
^8994.02A^1^1
"KRN",8994,4199,2,1,0)
DFN^1^14^1^1
"KRN",8994,4199,2,1,1,0)
^8994.021^1^1^3170520^^^^
"KRN",8994,4199,2,1,1,1,0)
Patient DFN from Patient(#2) file.
"KRN",8994,4199,2,"B","DFN",1)

"KRN",8994,4199,2,"PARAMSEQ",1,1)

"KRN",8994,4199,3,0)
^8994.03^1^1^3170520^^^
"KRN",8994,4199,3,1,0)
Returns Patient Primary and Secondary Eligibility.
"KRN",8994,4200,-1)
0^17
"KRN",8994,4200,0)
SDEC CONTACT UPDATE^UPDATE^SDECCON^1^R
"KRN",8994,4200,1,0)
^8994.01^2^2^3170524^^
"KRN",8994,4200,1,1,0)
Updates entries in  the SDEC Contact (#409.86) file when a new contactis
"KRN",8994,4200,1,2,0)
added to a current entry.
"KRN",8994,4200,2,0)
^8994.02A^7^7
"KRN",8994,4200,2,1,0)
IEN^1^14^1^1
"KRN",8994,4200,2,1,1,0)
^^1^1^3170427^
"KRN",8994,4200,2,1,1,1,0)
IEN of the entry in SDEC Contact (#409.86) file.
"KRN",8994,4200,2,2,0)
DFN^1^14^1^2
"KRN",8994,4200,2,2,1,0)
^^1^1^3170427^
"KRN",8994,4200,2,2,1,1,0)
Patient DFN from the Patient(#2) file.
"KRN",8994,4200,2,3,0)
CONDT^1^14^1^3
"KRN",8994,4200,2,3,1,0)
^^1^1^3170427^
"KRN",8994,4200,2,3,1,1,0)
Contact date/time.
"KRN",8994,4200,2,4,0)
REQT^1^1^1^4
"KRN",8994,4200,2,4,1,0)
^^1^1^3170427^
"KRN",8994,4200,2,4,1,1,0)
Contact Request Type. 
"KRN",8994,4200,2,5,0)
COMM^3^80^0^5
"KRN",8994,4200,2,5,1,0)
^^1^1^3170427^
"KRN",8994,4200,2,5,1,1,0)
Contact Request comments.
"KRN",8994,4200,2,6,0)
LMES^1^1^0^6
"KRN",8994,4200,2,6,1,0)
^^1^1^3170427^
"KRN",8994,4200,2,6,1,1,0)
Left message 0 or 1 (n or y).
"KRN",8994,4200,2,7,0)
SEQ^1^2^0^7
"KRN",8994,4200,2,7,1,0)
^^1^1^3170427^
"KRN",8994,4200,2,7,1,1,0)
Contact sequence.
"KRN",8994,4200,2,"B","COMM",5)

"KRN",8994,4200,2,"B","CONDT",3)

"KRN",8994,4200,2,"B","DFN",2)

"KRN",8994,4200,2,"B","IEN",1)

"KRN",8994,4200,2,"B","LMES",6)

"KRN",8994,4200,2,"B","REQT",4)

"KRN",8994,4200,2,"B","SEQ",7)

"KRN",8994,4200,2,"PARAMSEQ",1,1)

"KRN",8994,4200,2,"PARAMSEQ",2,2)

"KRN",8994,4200,2,"PARAMSEQ",3,3)

"KRN",8994,4200,2,"PARAMSEQ",4,4)

"KRN",8994,4200,2,"PARAMSEQ",5,5)

"KRN",8994,4200,2,"PARAMSEQ",6,6)

"KRN",8994,4200,2,"PARAMSEQ",7,7)

"KRN",8994,4201,-1)
0^12
"KRN",8994,4201,0)
SDEC CONTACT DISPLAY^DISPLAY^SDECCON^1^R
"KRN",8994,4201,1,0)
^8994.01^2^2^3170524^^
"KRN",8994,4201,1,1,0)
Return zero node from SDEC CONTACT (#409.86) file for display in the 
"KRN",8994,4201,1,2,0)
VSE VS Gui.
"KRN",8994,4201,2,0)
^8994.02A^4^4
"KRN",8994,4201,2,1,0)
DFN^1^14^1^1
"KRN",8994,4201,2,1,1,0)
^8994.021^1^1^3170524^^
"KRN",8994,4201,2,1,1,1,0)
Patient DFN form the Patient(#2) file.
"KRN",8994,4201,2,2,0)
CLN^1^14^1^2
"KRN",8994,4201,2,2,1,0)
^^1^1^3170430^
"KRN",8994,4201,2,2,1,1,0)
CLINIC(#44)file IEN.
"KRN",8994,4201,2,3,0)
PDT^1^14^1^3
"KRN",8994,4201,2,3,1,0)
^^1^1^3170430^
"KRN",8994,4201,2,3,1,1,0)
Preferred Date from the SDEC CONTACT(#409.86) file.
"KRN",8994,4201,2,4,0)
REQT^1^14^1^4
"KRN",8994,4201,2,4,1,0)
^8994.021^1^1^3170524^^
"KRN",8994,4201,2,4,1,1,0)
Request Type from the SDEC CONTACT(#409.86) file.
"KRN",8994,4201,2,"B","CLN",2)

"KRN",8994,4201,2,"B","DFN",1)

"KRN",8994,4201,2,"B","PDT",3)

"KRN",8994,4201,2,"B","REQT",4)

"KRN",8994,4201,2,"PARAMSEQ",1,1)

"KRN",8994,4201,2,"PARAMSEQ",2,2)

"KRN",8994,4201,2,"PARAMSEQ",3,3)

"KRN",8994,4201,2,"PARAMSEQ",4,4)

"KRN",8994,4201,3,0)
^8994.03^1^1^3170524^^
"KRN",8994,4201,3,1,0)
Return zero node of the SDEC CONTACT(#409.86) file.
"KRN",8994,4202,-1)
0^13
"KRN",8994,4202,0)
SDEC CONTACT MULTI-DISPLAY^DISMULT^SDECCON^1^R
"KRN",8994,4202,1,0)
^8994.01^1^1^3170524^^^
"KRN",8994,4202,1,1,0)
Return SDEC CONTACT(#409.86) file contact multiple.
"KRN",8994,4202,2,0)
^8994.02A^4^4
"KRN",8994,4202,2,1,0)
DFN^1^14^1^1
"KRN",8994,4202,2,1,1,0)
^^1^1^3170430^
"KRN",8994,4202,2,1,1,1,0)
Patient DFN form the Patient(#2) file.
"KRN",8994,4202,2,2,0)
CLI^1^14^1^2
"KRN",8994,4202,2,2,1,0)
^^1^1^3170430^
"KRN",8994,4202,2,2,1,1,0)
CLINIC(#44)file IEN.
"KRN",8994,4202,2,3,0)
PERD^1^14^1^3
"KRN",8994,4202,2,3,1,0)
^8994.021^1^1^3170430^^
"KRN",8994,4202,2,3,1,1,0)
Preferred Date from the SDEC CONTACT(#409.86) file.
"KRN",8994,4202,2,4,0)
RTYPE^1^14^1^4
"KRN",8994,4202,2,4,1,0)
^8994.021^1^1^3170524^^^
"KRN",8994,4202,2,4,1,1,0)
Request Type from the SDEC CONTACT(#409.86) file.
"KRN",8994,4202,2,"B","CLI",2)

"KRN",8994,4202,2,"B","DFN",1)

"KRN",8994,4202,2,"B","PERD",3)

"KRN",8994,4202,2,"B","RTYPE",4)

"KRN",8994,4202,2,"PARAMSEQ",1,1)

"KRN",8994,4202,2,"PARAMSEQ",2,2)

"KRN",8994,4202,2,"PARAMSEQ",3,3)

"KRN",8994,4202,2,"PARAMSEQ",4,4)

"KRN",8994,4202,3,0)
^8994.03^1^1^3170524^^
"KRN",8994,4202,3,1,0)
Return SDEC CONTACT(#409.86) file contact multiple.
"KRN",8994,4203,-1)
0^14
"KRN",8994,4203,0)
SDEC CONTACT NEW^NEW^SDECCON^1^R
"KRN",8994,4203,1,0)
^8994.01^1^1^3170430^^
"KRN",8994,4203,1,1,0)
Used to enter new contact entries into the SDEC CONTACT(#409.86) file.
"KRN",8994,4203,2,0)
^8994.02A^12^12
"KRN",8994,4203,2,1,0)
DFN^1^14^1^1
"KRN",8994,4203,2,1,1,0)
^^1^1^3170430^
"KRN",8994,4203,2,1,1,1,0)
Patient DFN from the Patient(#2) file.
"KRN",8994,4203,2,2,0)
CLI^1^14^1^2
"KRN",8994,4203,2,2,1,0)
^^1^1^3170430^
"KRN",8994,4203,2,2,1,1,0)
Clinic IEN for the HOSPITAL LOCATION(#44) file.
"KRN",8994,4203,2,3,0)
DTP^1^14^1^3
"KRN",8994,4203,2,3,1,0)
^^1^1^3170430^
"KRN",8994,4203,2,3,1,1,0)
Perferred date.
"KRN",8994,4203,2,4,0)
REQT^1^14^1^4
"KRN",8994,4203,2,4,1,0)
^^1^1^3170430^
"KRN",8994,4203,2,4,1,1,0)
Request type.
"KRN",8994,4203,2,5,0)
SEQ^1^2^^5
"KRN",8994,4203,2,5,1,0)
^^1^1^3170430^
"KRN",8994,4203,2,5,1,1,0)
Main Sequence number.
"KRN",8994,4203,2,6,0)
DTCON^1^14^1^6
"KRN",8994,4203,2,6,1,0)
^^1^1^3170430^
"KRN",8994,4203,2,6,1,1,0)
Date time of contact.
"KRN",8994,4203,2,7,0)
CONT^1^14^1^7
"KRN",8994,4203,2,7,1,0)
^^1^1^3170430^
"KRN",8994,4203,2,7,1,1,0)
Contact Type.
"KRN",8994,4203,2,8,0)
COM^1^80^^8
"KRN",8994,4203,2,8,1,0)
^^1^1^3170430^
"KRN",8994,4203,2,8,1,1,0)
Contacts comments.
"KRN",8994,4203,2,9,0)
LMES^1^6^^9
"KRN",8994,4203,2,9,1,0)
^8994.021^1^1^3170430^^
"KRN",8994,4203,2,9,1,1,0)
Left message 
"KRN",8994,4203,2,10,0)
SEQ2^1^2^1^10
"KRN",8994,4203,2,10,1,0)
^^1^1^3170430^
"KRN",8994,4203,2,10,1,1,0)
Multi node sequence.
"KRN",8994,4203,2,11,0)
USER^1^20^1^11
"KRN",8994,4203,2,11,1,0)
^^1^1^3170430^
"KRN",8994,4203,2,11,1,1,0)
User entering contact.
"KRN",8994,4203,2,12,0)
DTENT^1^14^1^12
"KRN",8994,4203,2,12,1,0)
^^1^1^3170430^
"KRN",8994,4203,2,12,1,1,0)
Date time entered.
"KRN",8994,4203,2,"B","CLI",2)

"KRN",8994,4203,2,"B","COM",8)

"KRN",8994,4203,2,"B","CONT",7)

"KRN",8994,4203,2,"B","DFN",1)

"KRN",8994,4203,2,"B","DTCON",6)

"KRN",8994,4203,2,"B","DTENT",12)

"KRN",8994,4203,2,"B","DTP",3)

"KRN",8994,4203,2,"B","LMES",9)

"KRN",8994,4203,2,"B","REQT",4)

"KRN",8994,4203,2,"B","SEQ",5)

"KRN",8994,4203,2,"B","SEQ2",10)

"KRN",8994,4203,2,"B","USER",11)

"KRN",8994,4203,2,"PARAMSEQ",1,1)

"KRN",8994,4203,2,"PARAMSEQ",2,2)

"KRN",8994,4203,2,"PARAMSEQ",3,3)

"KRN",8994,4203,2,"PARAMSEQ",4,4)

"KRN",8994,4203,2,"PARAMSEQ",5,5)

"KRN",8994,4203,2,"PARAMSEQ",6,6)

"KRN",8994,4203,2,"PARAMSEQ",7,7)

"KRN",8994,4203,2,"PARAMSEQ",8,8)

"KRN",8994,4203,2,"PARAMSEQ",9,9)

"KRN",8994,4203,2,"PARAMSEQ",10,10)

"KRN",8994,4203,2,"PARAMSEQ",11,11)

"KRN",8994,4203,2,"PARAMSEQ",12,12)

"KRN",8994,4204,-1)
0^15
"KRN",8994,4204,0)
SDEC CONTACT SEQUENCE^SEQ^SDECCON^1
"KRN",8994,4204,2,0)
^8994.02A^4^4
"KRN",8994,4204,2,1,0)
DF1^1^14^1^1
"KRN",8994,4204,2,2,0)
CL1^1^14^0^2
"KRN",8994,4204,2,3,0)
PDATE^1^14^1^3
"KRN",8994,4204,2,4,0)
SRR^1^14^0^4
"KRN",8994,4204,2,"B","CL1",2)

"KRN",8994,4204,2,"B","DF1",1)

"KRN",8994,4204,2,"B","PDATE",3)

"KRN",8994,4204,2,"B","SRR",4)

"KRN",8994,4204,2,"PARAMSEQ",1,1)

"KRN",8994,4204,2,"PARAMSEQ",2,2)

"KRN",8994,4204,2,"PARAMSEQ",3,3)

"KRN",8994,4204,2,"PARAMSEQ",4,4)

"KRN",8994,4205,-1)
0^16
"KRN",8994,4205,0)
SDEC CONTACT STOP CODE^GETSTC^SDECCON^1^R
"KRN",8994,4205,1,0)
^8994.01^1^1^3170504^^
"KRN",8994,4205,1,1,0)
Return Stop Code and Credit Stop to VSE VS GUI.
"KRN",8994,4205,2,0)
^8994.02A^1^1
"KRN",8994,4205,2,1,0)
CLIEN^1^14^1^1
"KRN",8994,4205,2,1,1,0)
^^1^1^3170504^
"KRN",8994,4205,2,1,1,1,0)
Clinic (#44) file entry IEN.
"KRN",8994,4205,2,"B","CLIEN",1)

"KRN",8994,4205,2,"PARAMSEQ",1,1)

"MBREQ")
0
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813^2930930
"PKG",16,22,1,"PAH",1,0)
669^3170621^520736675
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
6
"RTN","SDEC07")
0^5^B186068449^B185524828
"RTN","SDEC07",1,0)
SDEC07 ;ALB/SAT - VISTA SCHEDULING RPCS ;MAY 15, 2017
"RTN","SDEC07",2,0)
 ;;5.3;Scheduling;**627,642,651,658,665,669**;Aug 13, 1993;Build 16
"RTN","SDEC07",3,0)
 ;
"RTN","SDEC07",4,0)
 ;Reference is made to ICR #4837
"RTN","SDEC07",5,0)
 Q
"RTN","SDEC07",6,0)
 ;
"RTN","SDEC07",7,0)
APPADD(SDECY,SDECSTART,SDECEND,DFN,SDECRES,SDECLEN,SDECNOTE,SDECATID,SDECCR,SDMRTC,SDDDT,SDREQBY,SDLAB,PROVIEN,SDID,SDAPTYP,SDSVCP,SDSVCPR,SDCL,SDEKG,SDXRAY,APPTYPE,EESTAT,OVB,SDPARENT,SDEL) ;ADD NEW APPOINTMENT
"RTN","SDEC07",8,0)
 ;
"RTN","SDEC07",9,0)
 N SDAPPTYP
"RTN","SDEC07",10,0)
 N SDECERR,SDECIEN,SDECDEP,SDECI,SDECJ,SDECAPPTI,SDECDJ,SDECRESD,SDECRNOD,SDECC,SDECERR,SDECWKIN
"RTN","SDEC07",11,0)
 N SDECNOEV,SDECDEV,SDECDERR,SDECTMP,SAVESTRT
"RTN","SDEC07",12,0)
 N %DT,X,Y,DGQUIET,OBM,RET
"RTN","SDEC07",13,0)
 S SDECNOEV=1 ;Don't execute SDEC ADD APPOINTMENT protocol
"RTN","SDEC07",14,0)
 K ^TMP("SDEC07",$J)
"RTN","SDEC07",15,0)
 S SDECERR=0
"RTN","SDEC07",16,0)
 S SDECI=0
"RTN","SDEC07",17,0)
 S SDECY="^TMP(""SDEC07"","_$J_")"
"RTN","SDEC07",18,0)
 S ^TMP("SDEC07",$J,SDECI)="I00020APPOINTMENTID^T00020ERRORID"_$C(30)
"RTN","SDEC07",19,0)
 S SDECI=SDECI+1
"RTN","SDEC07",20,0)
 ;Check input data for errors
"RTN","SDEC07",21,0)
 S SAVESTRT=SDECSTART         ;MGH save date/time for consult request
"RTN","SDEC07",22,0)
 S:SDECSTART["@0000" SDECSTART=$P(SDECSTART,"@")
"RTN","SDEC07",23,0)
 S:SDECEND["@0000" SDECEND=$P(SDECEND,"@")
"RTN","SDEC07",24,0)
 S %DT="RXT",X=SDECSTART D ^%DT S SDECSTART=Y
"RTN","SDEC07",25,0)
 I SDECSTART=-1 D ERR(SDECI+1,"SDEC07 Error: Invalid Start Time") Q
"RTN","SDEC07",26,0)
 S %DT="RXT",X=SDECEND D ^%DT S SDECEND=Y
"RTN","SDEC07",27,0)
 I SDECEND=-1 D ERR(SDECI+1,"SDEC07 Error: Invalid End Time") Q
"RTN","SDEC07",28,0)
 I $L(SDECEND,".")=1 D ERR(SDECI+1,"SDEC07 Error: Invalid End Time") Q
"RTN","SDEC07",29,0)
 I SDECSTART>SDECEND S SDECTMP=SDECEND,SDECEND=SDECSTART,SDECSTART=SDECTMP
"RTN","SDEC07",30,0)
 S DFN=$G(DFN)
"RTN","SDEC07",31,0)
 I DFN="" D ERR(SDECI+1,"SDEC07: Patient ID required.") Q
"RTN","SDEC07",32,0)
 I '$D(^DPT(DFN,0)) D ERR(SDECI+1,"SDEC07 Error: Invalid Patient ID") Q
"RTN","SDEC07",33,0)
 L +^DPT(DFN):3 I '$T D ERR(SDECI+1,"Patient is being edited. Try again later.") Q   ;alb/sat 665
"RTN","SDEC07",34,0)
 ;Validate Resource
"RTN","SDEC07",35,0)
 S SDECERR=0 K SDECRESD
"RTN","SDEC07",36,0)
 S SDECRES=$G(SDECRES)
"RTN","SDEC07",37,0)
 I +SDECRES,'$D(^SDEC(409.831,SDECRES,0)) D ERR(SDECI+1,"SDEC07 Error: Invalid Resource ID") Q
"RTN","SDEC07",38,0)
 I '+SDECRES,'$D(^SDEC(409.831,"B",SDECRES)) D ERR(SDECI+1,"SDEC07 Error: Invalid Resource ID") Q
"RTN","SDEC07",39,0)
 S SDECRESD=$S(+SDECRES:+SDECRES,1:$O(^SDEC(409.831,"B",SDECRES,0)))
"RTN","SDEC07",40,0)
 S SDECRNOD=$G(^SDEC(409.831,SDECRESD,0))
"RTN","SDEC07",41,0)
 I SDECRNOD="" D ERR(SDECI+1,"SDEC07 Error: Unable to add appointment -- invalid Resource entry.") Q
"RTN","SDEC07",42,0)
 S SDECWKIN=0
"RTN","SDEC07",43,0)
 S SDECATID=$G(SDECATID)
"RTN","SDEC07",44,0)
 I SDECATID="WALKIN" S SDECWKIN=1
"RTN","SDEC07",45,0)
 I SDECATID'?.N&(SDECATID'="WALKIN") S SDECATID=""
"RTN","SDEC07",46,0)
 ;validate appointment length - if passed in, must be 5-120
"RTN","SDEC07",47,0)
 S SDECLEN=$G(SDECLEN)
"RTN","SDEC07",48,0)
 ;I SDECLEN'="",(+SDECLEN<5)!(SDECLEN>120) D ERR(SDECI+1,"SDEC07 Error: Appointment length must be between 5 - 120.") Q
"RTN","SDEC07",49,0)
 ;validate MTRC flag (optional)
"RTN","SDEC07",50,0)
 S SDMRTC=$$UP^XLFSTR($G(SDMRTC))
"RTN","SDEC07",51,0)
 S SDMRTC=$S(SDMRTC="TRUE":1,1:0)
"RTN","SDEC07",52,0)
 ;validate desired date of appt (optional)
"RTN","SDEC07",53,0)
 S SDDDT=$G(SDDDT)
"RTN","SDEC07",54,0)
 I SDDDT'="" S %DT="" S X=$P(SDDDT,"@",1) D ^%DT S SDDDT=Y I Y=-1 S SDDDT=""
"RTN","SDEC07",55,0)
 I SDDDT="",SDECATID'="WALKIN" S SDDDT=$P(SDECSTART,".",1)
"RTN","SDEC07",56,0)
 ;validate requested by
"RTN","SDEC07",57,0)
 S SDREQBY=$$UP^XLFSTR($G(SDREQBY))
"RTN","SDEC07",58,0)
 I SDREQBY'="" S SDREQBY=$S(SDREQBY="PROVIDER":1,SDREQBY="PATIENT":2,1:0)
"RTN","SDEC07",59,0)
 ;validate lab date/time (optional)
"RTN","SDEC07",60,0)
 S SDLAB=$G(SDLAB)
"RTN","SDEC07",61,0)
 I SDLAB'="" S %DT="T" S X=SDLAB D ^%DT S SDLAB=Y I Y=-1 S SDLAB=""
"RTN","SDEC07",62,0)
 ;validate EKG date/time (optional)
"RTN","SDEC07",63,0)
 S SDEKG=$G(SDEKG)
"RTN","SDEC07",64,0)
 I SDEKG'="" S %DT="T" S X=SDEKG D ^%DT S SDEKG=Y I Y=-1 S SDEKG=""
"RTN","SDEC07",65,0)
 ;validate XRAY date/time (optional)
"RTN","SDEC07",66,0)
 S SDXRAY=$G(SDXRAY)
"RTN","SDEC07",67,0)
 I SDXRAY'="" S %DT="T" S X=SDXRAY D ^%DT S SDXRAY=Y I Y=-1 S SDXRAY=""
"RTN","SDEC07",68,0)
 ;validate provider
"RTN","SDEC07",69,0)
 I '$D(^VA(200,+$G(PROVIEN),0)) S PROVIEN=""
"RTN","SDEC07",70,0)
 S SDID=$G(SDID)
"RTN","SDEC07",71,0)
 ;validate clinic
"RTN","SDEC07",72,0)
 S SDCL=$G(SDCL)
"RTN","SDEC07",73,0)
 I SDCL'="" I '$D(^SC(SDCL,0)) S SDCL=""
"RTN","SDEC07",74,0)
 I SDCL="" S SDCL=$$GET1^DIQ(409.831,SDECRESD_",",.04,"I")   ;clinic ID   ;support for single HOSPITAL LOCATION in SDEC RESOURCE
"RTN","SDEC07",75,0)
 S OVB=+$G(OVB)  ;alb/sat 665
"RTN","SDEC07",76,0)
 I 'OVB S OBM=$$OBM1^SDEC57(SDCL,SDECSTART,SDMRTC,,+SDECWKIN) I OBM'="",+OBM'=1 S SDECAPPTID=0 D ERR(SDECI+1,"OBM"_OBM) Q   ;alb/sat 658 check if overbook ;alb/sat 665 clear SDECAPPTID
"RTN","SDEC07",77,0)
 ;validate appt request type (required)
"RTN","SDEC07",78,0)
 S SDAPTYP=$G(SDAPTYP)
"RTN","SDEC07",79,0)
 I SDAPTYP'="" D
"RTN","SDEC07",80,0)
 .I $P(SDAPTYP,"|",1)="E" I '$D(^SDWL(409.3,+$P(SDAPTYP,"|",2),0)) S SDAPTYP=""
"RTN","SDEC07",81,0)
 .I $P(SDAPTYP,"|",1)="R" I '$D(^SD(403.5,+$P(SDAPTYP,"|",2),0)) S SDAPTYP=""
"RTN","SDEC07",82,0)
 .I $P(SDAPTYP,"|",1)="C" I '$D(^GMR(123,+$P(SDAPTYP,"|",2),0)) S SDAPTYP=""  ;ICR 4837
"RTN","SDEC07",83,0)
 .I $P(SDAPTYP,"|",1)="A" I '$D(^SDEC(409.85,+$P(SDAPTYP,"|",2),0)) S SDAPTYP=""
"RTN","SDEC07",84,0)
 .;I SDAPTYP="" D ERR(SDECI+1,"SDEC07 Error: Invalid appointment request type.") Q   ;support for multiple HOSPITAL LOCATIONs are implemented in SDEC RESOURCE
"RTN","SDEC07",85,0)
 I SDCL="" D
"RTN","SDEC07",86,0)
 .S:$P(SDAPTYP,"|",1)="E" SDCL=$$GET1^DIQ(409.3,$P(SDAPTYP,"|",2)_",",13.2,"I")
"RTN","SDEC07",87,0)
 .S:$P(SDAPTYP,"|",1)="R" SDCL=$$GET1^DIQ(403.5,$P(SDAPTYP,"|",2)_",",4.5,"I")
"RTN","SDEC07",88,0)
 .S:$P(SDAPTYP,"|",1)="C" SDCL=$P($G(^GMR(123,+$P(SDAPTYP,"|",2),0)),U,4)       ;ICR 4837 ICR states 'Zero node read into variable'
"RTN","SDEC07",89,0)
 .S:$P(SDAPTYP,"|",1)="A" SDCL=$$GET1^DIQ(409.85,$P(SDAPTYP,"|",2)_",",8,"I")
"RTN","SDEC07",90,0)
 I SDCL="" D ERR(SDECI+1,"SDEC07 Error: Invalid clinic ID.") Q
"RTN","SDEC07",91,0)
 I $$INACTIVE^SDEC32(SDCL) D ERR(SDECI+1,"SDEC07 Error: "_$$GET1^DIQ(44,SDCL_",",.01)_" is an inactive clinic.") Q
"RTN","SDEC07",92,0)
 ;validate service connected
"RTN","SDEC07",93,0)
 S SDSVCPR=$G(SDSVCPR)
"RTN","SDEC07",94,0)
 I SDSVCPR'="" S:(+SDSVCPR<0)!(+SDSVCPR>100) SDSVCPR=""
"RTN","SDEC07",95,0)
 S SDSVCP=$G(SDSVCP)
"RTN","SDEC07",96,0)
 S SDSVCP=$S(SDSVCP=0:0,SDSVCP="NO":0,SDSVCP=1:1,SDSVCP="YES":1,1:"")
"RTN","SDEC07",97,0)
 ;validate note
"RTN","SDEC07",98,0)
 S SDECNOTE=$G(SDECNOTE) S:SDECNOTE'="" SDECNOTE=$TR($E(SDECNOTE,1,150),"^"," ")   ;alb/sat 658 - only use 1st 150 characters
"RTN","SDEC07",99,0)
 ;validate APPTYPE
"RTN","SDEC07",100,0)
 S APPTYPE=$G(APPTYPE) I APPTYPE'="",'$D(^SD(409.1,+APPTYPE,0)) S APPTYPE=""
"RTN","SDEC07",101,0)
 ;validate Patient Status (EESTAT)
"RTN","SDEC07",102,0)
 S EESTAT=$G(EESTAT)
"RTN","SDEC07",103,0)
 I EESTAT="" D
"RTN","SDEC07",104,0)
 .I $P(SDAPTYP,"|",1)="E" S EESTAT=$$GET1^DIQ(409.3,$P(SDAPTYP,"|",2)_",",27,"I")
"RTN","SDEC07",105,0)
 .I $P(SDAPTYP,"|",1)="A" S EESTAT=$$GET1^DIQ(409.3,$P(SDAPTYP,"|",2)_",",.02,"I")
"RTN","SDEC07",106,0)
 S EESTAT=$S(EESTAT="N":"N",EESTAT="NEW":"N",EESTAT="E":"E",EESTAT="ESTABLISHED":"E",1:"")
"RTN","SDEC07",107,0)
 ;validate OVB (overbook)
"RTN","SDEC07",108,0)
 S OVB=+$G(OVB)
"RTN","SDEC07",109,0)
 I 'OVB D
"RTN","SDEC07",110,0)
 .D OVBOOK^SDEC(.RET,SDCL,SDECSTART,SDECRES)
"RTN","SDEC07",111,0)
 D
"RTN","SDEC07",112,0)
 .S SDAPPTYP=+APPTYPE
"RTN","SDEC07",113,0)
 .I 'SDAPPTYP D
"RTN","SDEC07",114,0)
 ..I $P(SDAPTYP,"|",1)="E" S SDAPPTYP=$$GET1^DIQ(409.3,+$P(SDAPTYP,"|",2)_",",8.7,"I")
"RTN","SDEC07",115,0)
 ..I $P(SDAPTYP,"|",1)="A" S SDAPPTYP=$$GET1^DIQ(409.85,+$P(SDAPTYP,"|",2)_",",8.7,"I")
"RTN","SDEC07",116,0)
 ..I $P(SDAPTYP,"|",1)="C",+APPTYPE S SDAPPTYP=+APPTYPE
"RTN","SDEC07",117,0)
 .S:'SDAPPTYP SDAPPTYP=$O(^SD(409.1,"B","REGULAR",0))
"RTN","SDEC07",118,0)
 ;Lock SDEC node
"RTN","SDEC07",119,0)
 L +^SDEC(409.84,DFN):5 I '$T D ERR(SDECI+1,"Another user is working with this patient's record.  Please try again later") Q
"RTN","SDEC07",120,0)
 ;
"RTN","SDEC07",121,0)
 ;TSTART
"RTN","SDEC07",122,0)
 S SDECAPPTID=$$SDECADD(SDECSTART,SDECEND,DFN,SDECRESD,SDECATID,SDDDT,SDID,SDAPTYP,PROVIEN,SDCL,SDECNOTE,SAVESTRT,SDECRES,SDAPPTYP,EESTAT,1,+SDECLEN)  ;alb/sat 665 add SDECLEN
"RTN","SDEC07",123,0)
 I 'SDECAPPTID D ERR(SDECI+1,"SDEC07 Error: Unable to add appointment to SDEC APPOINTMENT file.") Q
"RTN","SDEC07",124,0)
 ;Save the Appointment and start a new transaction that will get rolled back if there's an error
"RTN","SDEC07",125,0)
 ;TCOMMIT
"RTN","SDEC07",126,0)
 ;TSTART
"RTN","SDEC07",127,0)
 ; call chart request
"RTN","SDEC07",128,0)
 S SDECDEV=""  ;$$GET1^DIQ(9009020.2,$$DIV^SDECU,.05) I SDECDEV="" S SDECDERR="SDEC07 Error: No file room printer is defined for the chart request."
"RTN","SDEC07",129,0)
 I SDECATID="WALKIN",$G(SDECCR),$G(SDECDEV)'="" S DGQUIET=1 D WISD^SDECRT(DFN,$P(SDECSTART,"."),"",SDECDEV)
"RTN","SDEC07",130,0)
 I SDECNOTE]"" D SDECWP(SDECAPPTID,SDECNOTE)
"RTN","SDEC07",131,0)
 ;
"RTN","SDEC07",132,0)
 ;Create Appointment in VistA ;TODO: have this call APPVISTA^SDEC07B
"RTN","SDEC07",133,0)
 I +SDCL,$D(^SC(SDCL,0)) D  I +SDECERR D ERR(SDECI+1,$P(SDECERR,U,2))
"RTN","SDEC07",134,0)
 . S SDECC("PAT")=DFN
"RTN","SDEC07",135,0)
 . S SDECC("CLN")=SDCL
"RTN","SDEC07",136,0)
 . S SDECC("TYP")=$S(+SDECWKIN:4,SDAPPTYP=1:1,1:3)   ;3 for scheduled appts, 4 for walkins
"RTN","SDEC07",137,0)
 . S SDECC("COL")=$S(SDAPPTYP=7:1,1:"")   ;collateral visit if appointment type is COLLATERAL OF VET.
"RTN","SDEC07",138,0)
 . S SDECC("APT")=SDAPPTYP
"RTN","SDEC07",139,0)
 . S SDECC("ADT")=SDECSTART
"RTN","SDEC07",140,0)
 . S SDECC("LEN")=SDECLEN
"RTN","SDEC07",141,0)
 . S SDECC("OI")=$E($G(SDECNOTE),1,150) ;File 44 has 150 character limit on OTHER field
"RTN","SDEC07",142,0)
 . S SDECC("OI")=$TR(SDECC("OI"),";"," ") ;No semicolons allowed
"RTN","SDEC07",143,0)
 . S SDECC("OI")=$$STRIP(SDECC("OI")) ;Strip control characters from note
"RTN","SDEC07",144,0)
 . S SDECC("RES")=SDECRESD
"RTN","SDEC07",145,0)
 . S SDECC("USR")=DUZ
"RTN","SDEC07",146,0)
 . S SDECC("MTR")=$G(SDMRTC)
"RTN","SDEC07",147,0)
 . S SDECC("DDT")=SDDDT
"RTN","SDEC07",148,0)
 . S SDECC("REQ")=SDREQBY
"RTN","SDEC07",149,0)
 . S SDECC("LAB")=SDLAB
"RTN","SDEC07",150,0)
 . S SDECC("XRA")=SDXRAY
"RTN","SDEC07",151,0)
 . S SDECC("EKG")=SDEKG
"RTN","SDEC07",152,0)
 . S SDECC("OVB")=+OVB
"RTN","SDEC07",153,0)
 . S SDECC("ELG")=SDEL
"RTN","SDEC07",154,0)
 . S:$P(SDAPTYP,"|",1)="C" SDECC("CON")=$P(SDAPTYP,"|",2)
"RTN","SDEC07",155,0)
 . S SDECERR=$$MAKE^SDEC07B(.SDECC)
"RTN","SDEC07",156,0)
 . Q:SDECERR
"RTN","SDEC07",157,0)
 . ;Update Clinic availability
"RTN","SDEC07",158,0)
 . D AVUPDT(SDCL,SDECSTART,SDECLEN)
"RTN","SDEC07",159,0)
 . ;L
"RTN","SDEC07",160,0)
 . Q
"RTN","SDEC07",161,0)
 ;update wait list
"RTN","SDEC07",162,0)
 I $P(SDAPTYP,"|",1)="E" D EWL^SDEC07A($P(SDAPTYP,"|",2),SDECSTART,SDCL,SDSVCPR,SDSVCP,,SDAPPTYP)  ;alb/sat 658 do not pass note
"RTN","SDEC07",163,0)
 ;update appt request
"RTN","SDEC07",164,0)
 I $P(SDAPTYP,"|",1)="A" D
"RTN","SDEC07",165,0)
 .D UPDATE^SDECAR2($P(SDAPTYP,"|",2),SDECSTART,SDCL,SDSVCPR,SDSVCP,,SDAPPTYP)  ;alb/sat 658 do not pass note
"RTN","SDEC07",166,0)
 .I $G(SDMRTC),$G(SDPARENT) D AR433^SDECAR2(SDPARENT,SDECAPPTID_"~"_$P(SDAPTYP,"|",2))
"RTN","SDEC07",167,0)
 .D:$G(SDPARENT) AR438^SDECAR2($P(SDAPTYP,"|",2),SDPARENT)
"RTN","SDEC07",168,0)
 ;
"RTN","SDEC07",169,0)
 ;Return Recordset
"RTN","SDEC07",170,0)
 ;TCOMMIT
"RTN","SDEC07",171,0)
 L -^SDEC(409.84,DFN)
"RTN","SDEC07",172,0)
 L -^DPT(DFN)
"RTN","SDEC07",173,0)
 S SDECI=SDECI+1
"RTN","SDEC07",174,0)
 S ^TMP("SDEC07",$J,SDECI)=SDECAPPTID_"^"_$G(SDECDERR)_$C(30)
"RTN","SDEC07",175,0)
 S SDECI=SDECI+1
"RTN","SDEC07",176,0)
 S ^TMP("SDEC07",$J,SDECI)=$C(31)
"RTN","SDEC07",177,0)
 Q
"RTN","SDEC07",178,0)
 ;
"RTN","SDEC07",179,0)
STRIP(SDECZ) ;Replace control characters with spaces
"RTN","SDEC07",180,0)
 N SDECI
"RTN","SDEC07",181,0)
 F SDECI=1:1:$L(SDECZ) I (32>$A($E(SDECZ,SDECI))) S SDECZ=$E(SDECZ,1,SDECI-1)_" "_$E(SDECZ,SDECI+1,999)
"RTN","SDEC07",182,0)
 Q SDECZ
"RTN","SDEC07",183,0)
 ;
"RTN","SDEC07",184,0)
 ;ADD SDEC APPOINTMENT ENTRY
"RTN","SDEC07",185,0)
SDECADD(SDECSTART,SDECEND,DFN,SDECRESD,SDECATID,SDDDT,SDID,SDAPTYP,PROVIEN,SDCL,SDECNOTE,SAVESTRT,SDECRES,SDAPPTYP,EESTAT,SDF,SDECLEN)  ;alb/sat 665 add SDECLEN
"RTN","SDEC07",186,0)
 ;SDF       - (optional) flags
"RTN","SDEC07",187,0)
 ;                       1. called from GUI (update consult only if called from GUI)
"RTN","SDEC07",188,0)
 ;Returns ien in SDECAPPT or 0 if failed
"RTN","SDEC07",189,0)
 ;called from SDEC APPADD rpc and from VistA via SDM1A
"RTN","SDEC07",190,0)
 ;Create entry in SDEC APPOINTMENT
"RTN","SDEC07",191,0)
 N SDIEN,SDECAPPTID,SDECFDA,SDECIEN,SDECMSG,SL,X
"RTN","SDEC07",192,0)
 S SDECSTART=$G(SDECSTART)
"RTN","SDEC07",193,0)
 S SAVESTRT=$G(SAVESTRT),SDECRES=$G(SDECRES)         ;MGH save date/time for consult request
"RTN","SDEC07",194,0)
 S DFN=$G(DFN)
"RTN","SDEC07",195,0)
 S SDECRESD=$G(SDECRESD)
"RTN","SDEC07",196,0)
 S SDECATID=$G(SDECATID)
"RTN","SDEC07",197,0)
 S SDDDT=$G(SDDDT)
"RTN","SDEC07",198,0)
 S SDID=$G(SDID)
"RTN","SDEC07",199,0)
 S SDAPTYP=$G(SDAPTYP)
"RTN","SDEC07",200,0)
 S SDAPPTYP=$G(SDAPPTYP)
"RTN","SDEC07",201,0)
 S PROVIEN=$G(PROVIEN)
"RTN","SDEC07",202,0)
 S SDCL=$G(SDCL)
"RTN","SDEC07",203,0)
 S SDECEND=$G(SDECEND)
"RTN","SDEC07",204,0)
 ;alb/sat 665 begin modification
"RTN","SDEC07",205,0)
 S SDECLEN=$G(SDECLEN)
"RTN","SDEC07",206,0)
 I SDECLEN="",SDECEND="" S SDECLEN=+$G(^SC(SDCL,"SL")) S:'+SDECLEN SDECLEN=30 S SDECEND=$$FMADD^XLFDT(SDECSTART,,,+SDECLEN)   ;no length or end date/time
"RTN","SDEC07",207,0)
 I SDECLEN="",SDECEND'="" S SDECLEN=$$FMDIFF^XLFDT(SDECEND,SDECSTART,2)\60  ;no length
"RTN","SDEC07",208,0)
 I SDECLEN'="",SDECEND="" S SDECEND=$$FMADD^XLFDT(SDECSTART,,,+SDECLEN)  ;no end date/time
"RTN","SDEC07",209,0)
 ;alb/sat 665 end modification
"RTN","SDEC07",210,0)
 S SDECNOTE=$G(SDECNOTE)
"RTN","SDEC07",211,0)
 S SDF=$G(SDF,0)
"RTN","SDEC07",212,0)
 I PROVIEN="" D
"RTN","SDEC07",213,0)
 .S PROVIEN=$$GET1^DIQ(44,SDCL_",",16,"I")
"RTN","SDEC07",214,0)
 S SDIEN=$$APPTGET^SDECUTL(DFN,SDECSTART,SDCL)
"RTN","SDEC07",215,0)
 S SDIEN=$S(SDIEN'="":SDIEN_",",1:"+1,")
"RTN","SDEC07",216,0)
 S SDECFDA(409.84,SDIEN,.01)=SDECSTART
"RTN","SDEC07",217,0)
 S SDECFDA(409.84,SDIEN,.02)=SDECEND
"RTN","SDEC07",218,0)
 S SDECFDA(409.84,SDIEN,.05)=DFN
"RTN","SDEC07",219,0)
 S:+SDAPPTYP SDECFDA(409.84,SDIEN,.06)=SDAPPTYP
"RTN","SDEC07",220,0)
 ;S:SDECATID?.N SDECFDA(409.84,SDIEN,.06)=SDECATID
"RTN","SDEC07",221,0)
 S SDECFDA(409.84,SDIEN,.07)=SDECRESD
"RTN","SDEC07",222,0)
 S SDECFDA(409.84,SDIEN,.08)=$G(DUZ)
"RTN","SDEC07",223,0)
 S SDECFDA(409.84,SDIEN,.09)=$P($$NOW^XLFDT,".",1)
"RTN","SDEC07",224,0)
 S SDECFDA(409.84,SDIEN,.1)=""
"RTN","SDEC07",225,0)
 S SDECFDA(409.84,SDIEN,.101)=""
"RTN","SDEC07",226,0)
 S SDECFDA(409.84,SDIEN,.102)=""
"RTN","SDEC07",227,0)
 S SDECFDA(409.84,SDIEN,.11)=""
"RTN","SDEC07",228,0)
 S SDECFDA(409.84,SDIEN,.12)=""
"RTN","SDEC07",229,0)
 S SDECFDA(409.84,SDIEN,.121)=""
"RTN","SDEC07",230,0)
 S SDECFDA(409.84,SDIEN,.122)=""
"RTN","SDEC07",231,0)
 S:SDECATID="WALKIN" SDECFDA(409.84,SDIEN,.13)="y"
"RTN","SDEC07",232,0)
 S:PROVIEN'="" SDECFDA(409.84,SDIEN,.16)=PROVIEN
"RTN","SDEC07",233,0)
 S SDECFDA(409.84,SDIEN,.17)=""
"RTN","SDEC07",234,0)
 S:$G(SDECLEN)'="" SDECFDA(409.84,SDIEN,.18)=SDECLEN
"RTN","SDEC07",235,0)
 S SDECFDA(409.84,SDIEN,.2)=SDDDT
"RTN","SDEC07",236,0)
 S:$G(SDID)'="" SDECFDA(409.84,SDIEN,.21)=SDID
"RTN","SDEC07",237,0)
 S:SDAPTYP'="" SDECFDA(409.84,SDIEN,.22)=$P(SDAPTYP,"|",2)_";"_$S($P(SDAPTYP,"|",1)="E":"SDWL(409.3,",$P(SDAPTYP,"|",1)="C":"GMR(123,",$P(SDAPTYP,"|",1)="R":"SD(403.5,",$P(SDAPTYP,"|",1)="A":"SDEC(409.85,",1:"")
"RTN","SDEC07",238,0)
 S:$G(EESTAT)'="" SDECFDA(409.84,SDIEN,.23)=EESTAT
"RTN","SDEC07",239,0)
 K SDECIEN,SDECMSG
"RTN","SDEC07",240,0)
 D UPDATE^DIE("","SDECFDA","SDECIEN","SDECMSG")
"RTN","SDEC07",241,0)
 S SDECAPPTID=$S(SDIEN'="+1,":+SDIEN,1:+$G(SDECIEN(1)))
"RTN","SDEC07",242,0)
 K SDECMSG
"RTN","SDEC07",243,0)
 I SDECNOTE="" D WP^DIE(409.84,$S(+$G(SDECAPPTID):SDECAPPTID_",",1:SDIEN_","),1,"","@","SDECMSG")
"RTN","SDEC07",244,0)
 I SDECNOTE'="" N ARR D WP^SDECUTL(.ARR,SDECNOTE) D WP^DIE(409.84,$S(+$G(SDECAPPTID):SDECAPPTID_",",1:SDIEN_","),1,"","ARR","SDECMSG")
"RTN","SDEC07",245,0)
 I SDECAPPTID'="" D
"RTN","SDEC07",246,0)
 .I $P(SDAPTYP,"|",1)="C",SDF D
"RTN","SDEC07",247,0)
 ..D REQSET^SDEC07A($P(SDAPTYP,"|",2),PROVIEN,"",1,"",SDECNOTE,SAVESTRT,SDECRES)   ;MGH added 3 parameters to this call
"RTN","SDEC07",248,0)
 Q SDECAPPTID
"RTN","SDEC07",249,0)
 ;
"RTN","SDEC07",250,0)
SDECWP(SDECAPPTID,SDECNOTE) ;
"RTN","SDEC07",251,0)
 ;Add WP field
"RTN","SDEC07",252,0)
 I SDECNOTE]"" S SDECNOTE(.5)=SDECNOTE,SDECNOTE=""
"RTN","SDEC07",253,0)
 I $D(SDECNOTE(0)) S SDECNOTE(.5)=SDECNOTE(0) K SDECNOTE(0)
"RTN","SDEC07",254,0)
 I $D(SDECNOTE(.5)) D
"RTN","SDEC07",255,0)
 . D WP^DIE(409.84,SDECAPPTID_",",1,"","SDECNOTE","SDECMSG")
"RTN","SDEC07",256,0)
 Q
"RTN","SDEC07",257,0)
 ;
"RTN","SDEC07",258,0)
ADDEVT(DFN,SDECSTART,SDECSC,SDCLA) ;EP
"RTN","SDEC07",259,0)
 ;Called by SDEC ADD APPOINTMENT protocol
"RTN","SDEC07",260,0)
 ;SDECSC=IEN of clinic in ^SC
"RTN","SDEC07",261,0)
 ;SDCLA=IEN for ^SC(SDECSC,"S",SDECSTART,1,SDCLA). Use to get Length & Note
"RTN","SDEC07",262,0)
 ;
"RTN","SDEC07",263,0)
 N SDECNOD,SDECLEN,SDECAPPTID,SDECNODP,SDECWKIN,SDECRES
"RTN","SDEC07",264,0)
 Q:+$G(SDECNOEV)
"RTN","SDEC07",265,0)
 I $D(^SDEC(409.831,"ALOC",SDECSC)) S SDECRES=$O(^SDEC(409.831,"ALOC",SDECSC,0))
"RTN","SDEC07",266,0)
 Q:'+$G(SDECRES)
"RTN","SDEC07",267,0)
 S SDECNOD=$G(^SC(SDECSC,"S",SDECSTART,1,SDCLA,0))
"RTN","SDEC07",268,0)
 Q:SDECNOD=""
"RTN","SDEC07",269,0)
 S SDECNODP=$G(^DPT(DFN,"S",SDECSTART,0))
"RTN","SDEC07",270,0)
 S SDECWKIN=""
"RTN","SDEC07",271,0)
 S:$P(SDECNODP,U,7)=4 SDECWKIN="WALKIN" ;Purpose of Visit field of DPT Appointment subfile
"RTN","SDEC07",272,0)
 S SDECLEN=$P(SDECNOD,U,2)
"RTN","SDEC07",273,0)
 Q:'+SDECLEN
"RTN","SDEC07",274,0)
 S SDECEND=$$FMADD^XLFDT(SDECSTART,0,0,SDECLEN,0)
"RTN","SDEC07",275,0)
 S SDECAPPTID=$$SDECADD(SDECSTART,SDECEND,DFN,SDECRES,SDECWKIN,,,,,SDECSC,,,,,,1,+SDECLEN)  ;alb/sat 665 add SDECLEN
"RTN","SDEC07",276,0)
 Q:'+SDECAPPTID
"RTN","SDEC07",277,0)
 S SDECNOTE=$P(SDECNOD,U,4)
"RTN","SDEC07",278,0)
 I SDECNOTE]"" D SDECWP(SDECAPPTID,SDECNOTE)
"RTN","SDEC07",279,0)
 D ADDEVT3(SDECRES)
"RTN","SDEC07",280,0)
 Q
"RTN","SDEC07",281,0)
 ;
"RTN","SDEC07",282,0)
ADDEVT3(SDECRES) ;
"RTN","SDEC07",283,0)
 ;Call RaiseEvent to notify GUI clients
"RTN","SDEC07",284,0)
 Q
"RTN","SDEC07",285,0)
 ;
"RTN","SDEC07",286,0)
ERR(SDECI,SDECERR) ;Error processing
"RTN","SDEC07",287,0)
 S SDECI=SDECI+1
"RTN","SDEC07",288,0)
 S SDECERR=$TR(SDECERR,"^","~")
"RTN","SDEC07",289,0)
 S ^TMP("SDEC07",$J,SDECI)=$G(SDECAPPTID,0)_"^"_SDECERR_$C(30)
"RTN","SDEC07",290,0)
 S SDECI=SDECI+1
"RTN","SDEC07",291,0)
 S ^TMP("SDEC07",$J,SDECI)=$C(31)
"RTN","SDEC07",292,0)
 L
"RTN","SDEC07",293,0)
 Q
"RTN","SDEC07",294,0)
 ;
"RTN","SDEC07",295,0)
ETRAP ;EP Error trap entry
"RTN","SDEC07",296,0)
 D ^%ZTER
"RTN","SDEC07",297,0)
 I '$D(SDECI) N SDECI S SDECI=999999
"RTN","SDEC07",298,0)
 S SDECI=SDECI+1
"RTN","SDEC07",299,0)
 D ERR(SDECI,"SDEC07 Error")
"RTN","SDEC07",300,0)
 Q
"RTN","SDEC07",301,0)
DAY ;;^SUN^MON^TUES^WEDNES^THURS^FRI^SATUR
"RTN","SDEC07",302,0)
 ;
"RTN","SDEC07",303,0)
DOW N SDTMP S SDTMP=$E(X,1,3),Y=$E(X,4,5),Y=Y>2&'(SDTMP#4)+$E("144025036146",Y)
"RTN","SDEC07",304,0)
 F SDTMP=SDTMP:-1:281 S Y=SDTMP#4=1+1+Y
"RTN","SDEC07",305,0)
 S Y=$E(X,6,7)+Y#7
"RTN","SDEC07",306,0)
 Q
"RTN","SDEC07",307,0)
 ;
"RTN","SDEC07",308,0)
AVUPDT(SDCL,SDECSTART,SDECLEN) ;Update Clinic availability
"RTN","SDEC07",309,0)
 ;SEE SDM1
"RTN","SDEC07",310,0)
 N %,ABORT,SDNOT,Y,DFN,SDVAL
"RTN","SDEC07",311,0)
 N SL,STARTDAY,X,SC,SB,HSI,SI,STR,SDDIF,SDMAX,SDDATE,SDDMAX,SDSDATE,CCXN,MXOK,COV,SDPROG
"RTN","SDEC07",312,0)
 N X1,SDEDT,X2,SD,SM,SS,S,SDLOCK,ST,I,SDECINC
"RTN","SDEC07",313,0)
 S Y=SDCL   ;,DFN=DFN  ;renamed SDECPATID to DFN
"RTN","SDEC07",314,0)
 S SL=$G(^SC(+Y,"SL")),X=$P(SL,U,3),STARTDAY=$S($L(X):X,1:8),SC=Y,SB=STARTDAY-1/100,X=$P(SL,U,6),HSI=$S(X=1:X,X:X,1:4),SI=$S(X="":4,X<3:4,X:X,1:4),STR="#@!$* XXWVUTSRQPONMLKJIHGFEDCBA0123456789jklmnopqrstuvwxyz",SDDIF=$S(HSI<3:8/HSI,1:2) K Y
"RTN","SDEC07",315,0)
 ;Determine maximum days for scheduling
"RTN","SDEC07",316,0)
 S SDMAX(1)=$P($G(^SC(+SC,"SDP")),U,2) S:'SDMAX(1) SDMAX(1)=365
"RTN","SDEC07",317,0)
 S (SDMAX,SDDMAX)=$$FMADD^XLFDT(DT,SDMAX(1))
"RTN","SDEC07",318,0)
 S SDDATE=SDECSTART
"RTN","SDEC07",319,0)
 S SDSDATE=SDDATE,SDDATE=SDDATE\1
"RTN","SDEC07",320,0)
1 ;L  Q:$D(SDXXX)  S CCXN=0 K MXOK,COV,SDPROT Q:DFN<0  S SC=+SC
"RTN","SDEC07",321,0)
 ;Q:$D(SDXXX)
"RTN","SDEC07",322,0)
 S CCXN=0 K MXOK,COV,SDPROT Q:$G(DFN)<0  S SC=+SC
"RTN","SDEC07",323,0)
 S X1=DT,SDEDT=365 S:$D(^SC(SC,"SDP")) SDEDT=$P(^SC(SC,"SDP"),"^",2)
"RTN","SDEC07",324,0)
 S X2=SDEDT D C^%DTC S SDEDT=X
"RTN","SDEC07",325,0)
 S Y=SDECSTART
"RTN","SDEC07",326,0)
EN1 S (X,SD)=Y,SM=0 D DOW
"RTN","SDEC07",327,0)
S I '$D(^SC(SC,"ST",$P(SD,"."),1)) S SS=+$O(^SC(+SC,"T"_Y,SD)) Q:SS'>0  Q:^(SS,1)=""  S ^SC(+SC,"ST",$P(SD,"."),1)=$E($P($T(DAY),U,Y+2),1,2)_" "_$E(SD,6,7)_$J("",SI+SI-6)_^(1),^(0)=$P(SD,".")
"RTN","SDEC07",328,0)
 S S=SDECLEN
"RTN","SDEC07",329,0)
 ;Check if SDECLEN evenly divisible by appointment length
"RTN","SDEC07",330,0)
 S SDVAL=$P(SL,U)
"RTN","SDEC07",331,0)
 I SDECLEN<SDVAL S SDECLEN=SDVAL
"RTN","SDEC07",332,0)
 I SDECLEN#SDVAL'=0 D
"RTN","SDEC07",333,0)
 . S SDECINC=SDECLEN\SDVAL
"RTN","SDEC07",334,0)
 . S SDECINC=SDECINC+1
"RTN","SDEC07",335,0)
 . S SDECLEN=SDVAL*SDECINC
"RTN","SDEC07",336,0)
 S SL=S_U_$P(SL,U,2,99)
"RTN","SDEC07",337,0)
SC S SDLOCK=$S('$D(SDLOCK):1,1:SDLOCK+1) Q:SDLOCK>9
"RTN","SDEC07",338,0)
 L +^SC(SC,"ST",$P(SD,"."),1):5 G:'$T SC
"RTN","SDEC07",339,0)
 S SDLOCK=0,S=^SC(SC,"ST",$P(SD,"."),1)
"RTN","SDEC07",340,0)
 S I=SD#1-SB*100,ST=I#1*SI\.6+($P(I,".")*SI),SS=SL*HSI/60*SDDIF+ST+ST
"RTN","SDEC07",341,0)
 I (I<1!'$F(S,"["))&(S'["CAN") L -^SC(SC,"ST",$P(SD,"."),1) Q
"RTN","SDEC07",342,0)
 I SM<7 S %=$F(S,"[",SS-1) S:'%!($P(SL,"^",6)<3) %=999 I $F(S,"]",SS)'<%!(SDDIF=2&$E(S,ST+ST+1,SS-1)["[") S SM=7
"RTN","SDEC07",343,0)
 ;
"RTN","SDEC07",344,0)
SP I ST+ST>$L(S),$L(S)<80 S S=S_" " G SP
"RTN","SDEC07",345,0)
 S SDNOT=1
"RTN","SDEC07",346,0)
 S ABORT=0
"RTN","SDEC07",347,0)
 F I=ST+ST:SDDIF:SS-SDDIF D  Q:ABORT
"RTN","SDEC07",348,0)
 . S ST=$E(S,I+1) S:ST="" ST=" "
"RTN","SDEC07",349,0)
 . S Y=$E(STR,$F(STR,ST)-2)
"RTN","SDEC07",350,0)
 . I S["CAN"!(ST="X"&($D(^SC(+SC,"ST",$P(SD,"."),"CAN")))) S ABORT=1 Q
"RTN","SDEC07",351,0)
 . I Y="" S ABORT=1 Q
"RTN","SDEC07",352,0)
 . S:Y'?1NL&(SM<6) SM=6 S ST=$E(S,I+2,999) S:ST="" ST=" " S S=$E(S,1,I)_Y_ST
"RTN","SDEC07",353,0)
 . Q
"RTN","SDEC07",354,0)
 S ^SC(SC,"ST",$P(SD,"."),1)=S
"RTN","SDEC07",355,0)
 L -^SC(SC,"ST",$P(SD,"."),1)
"RTN","SDEC07",356,0)
 Q
"RTN","SDEC07",357,0)
 ;
"RTN","SDEC07",358,0)
ERROR ;
"RTN","SDEC07",359,0)
 D ERR1("Error")
"RTN","SDEC07",360,0)
 Q
"RTN","SDEC07",361,0)
 ;
"RTN","SDEC07",362,0)
ERR1(SDECERR) ;Error processing
"RTN","SDEC07",363,0)
 S SDECI=SDECI+1
"RTN","SDEC07",364,0)
 S ^TMP("SDEC07",$J,SDECI)=SDECERR_$C(30)
"RTN","SDEC07",365,0)
 S SDECI=SDECI+1
"RTN","SDEC07",366,0)
 S ^TMP("SDEC07",$J,SDECI)=$C(31)
"RTN","SDEC07B")
0^6^B55538827^B54807714
"RTN","SDEC07B",1,0)
SDEC07B ;ALB/SAT - VISTA SCHEDULING RPCS ;MAY 15, 2017
"RTN","SDEC07B",2,0)
 ;;5.3;Scheduling;**627,658,665,669**;Aug 13, 1993;Build 16
"RTN","SDEC07B",3,0)
 ;
"RTN","SDEC07B",4,0)
 Q
"RTN","SDEC07B",5,0)
 ;
"RTN","SDEC07B",6,0)
MAKE(BSDR) ;PEP; call to store appt made
"RTN","SDEC07B",7,0)
 ;
"RTN","SDEC07B",8,0)
 ; Make call using: S ERR=$$MAKE^SDEC07B(.ARRAY)
"RTN","SDEC07B",9,0)
 ;
"RTN","SDEC07B",10,0)
 ; Input Array -
"RTN","SDEC07B",11,0)
 ; BSDR("PAT") = ien of patient in file 2
"RTN","SDEC07B",12,0)
 ; BSDR("CLN") = ien of clinic in file 44
"RTN","SDEC07B",13,0)
 ; BSDR("TYP") = C&P if appointment type is C&P, 3 for scheduled appts, 4 for walkins
"RTN","SDEC07B",14,0)
 ; BSDR("COL") = collateral if appointment type is COLLATERAL OF VET.
"RTN","SDEC07B",15,0)
 ; BSDR("APT") = Appointment type pointer to APPOINTMENT TYPE file 409.1
"RTN","SDEC07B",16,0)
 ; BSDR("ADT") = appointment date and time
"RTN","SDEC07B",17,0)
 ; BSDR("LEN") = appointment length in minutes (5-120)
"RTN","SDEC07B",18,0)
 ; BSDR("OI")  = reason for appt - up to 150 characters
"RTN","SDEC07B",19,0)
 ; BSDR("USR") = user who made appt
"RTN","SDEC07B",20,0)
 ; BSDR("RES") = resource pointer to SDEC RESOURCE ^SDEC(409.831,
"RTN","SDEC07B",21,0)
 ; BSDR("MTR") = MTRC flag (multiple appointments) 0=False (default)  1=True
"RTN","SDEC07B",22,0)
 ; BSDR("DDT") = Desired Date of Appt in fm format
"RTN","SDEC07B",23,0)
 ; BSDR("REQ") = Requested By - valid values are 1=PROVIDER  2=PATIENT or ""
"RTN","SDEC07B",24,0)
 ; BSDR("LAB") = LAB date/time in fm format
"RTN","SDEC07B",25,0)
 ; BSDR("EKG") = EKG date/time in fm format
"RTN","SDEC07B",26,0)
 ; BSDR("XRA") = XRAY date/time in fm format
"RTN","SDEC07B",27,0)
 ; BSDR("CON") = Consult link - pointer to file 123
"RTN","SDEC07B",28,0)
 ; BSDR("OVB") = overbook flag - 1=yes, this is an overbook
"RTN","SDEC07B",29,0)
 ; BSDR("ELG") = Patient Eligibilty
"RTN","SDEC07B",30,0)
 ; 
"RTN","SDEC07B",31,0)
 ;Output: error status and message
"RTN","SDEC07B",32,0)
 ;   = 0 or null:  everything okay
"RTN","SDEC07B",33,0)
 ;   = 1^message:  error and reason
"RTN","SDEC07B",34,0)
 ;
"RTN","SDEC07B",35,0)
 I '$D(^DPT(+$G(BSDR("PAT")),0)) Q 1_U_"Patient not on file: "_$G(BSDR("PAT"))
"RTN","SDEC07B",36,0)
 I '$D(^SC(+$G(BSDR("CLN")),0)) Q 1_U_"Clinic not on file: "_$G(BSDR("CLN"))
"RTN","SDEC07B",37,0)
 I "1234"'[$G(BSDR("TYP")) Q 1_U_"Appt Type error: "_$G(BSDR("TYP"))
"RTN","SDEC07B",38,0)
 I $G(BSDR("ADT")) S BSDR("ADT")=+$E(BSDR("ADT"),1,12)  ;remove seconds
"RTN","SDEC07B",39,0)
 I $G(BSDR("ADT"))'?7N1".".4N Q 1_U_"Appt Date/Time error: "_$G(BSDR("ADT"))
"RTN","SDEC07B",40,0)
 ;
"RTN","SDEC07B",41,0)
 I ($G(BSDR("LEN"))<5)!($G(BSDR("LEN"))>240) Q 1_U_"Appt Length error: "_$G(BSDR("LEN"))
"RTN","SDEC07B",42,0)
 I '$D(^VA(200,+$G(BSDR("USR")),0)) Q 1_U_"User Who Made Appt Error: "_$G(BSDR("USR"))
"RTN","SDEC07B",43,0)
 I $D(^DPT(BSDR("PAT"),"S",BSDR("ADT"),0)),$P(^DPT(BSDR("PAT"),"S",BSDR("ADT"),0),U,2)'="C",$P(^DPT(BSDR("PAT"),"S",BSDR("ADT"),0),U,2)'="PC" Q 1_U_"Patient "_$$GET1^DIQ(2,BSDR("PAT")_",",.01)_" already has appt at "_$$FMTE^XLFDT(BSDR("ADT"))
"RTN","SDEC07B",44,0)
 ;
"RTN","SDEC07B",45,0)
 N DIC,DA,Y,X,DD,DO,DLAYGO
"RTN","SDEC07B",46,0)
 N SDECERR
"RTN","SDEC07B",47,0)
 N SDFU,SDNA,SDRET,SDSRT
"RTN","SDEC07B",48,0)
 ;
"RTN","SDEC07B",49,0)
 S BSDR("APT")=+$G(BSDR("APT"))
"RTN","SDEC07B",50,0)
 S BSDR("COL")=+$G(BSDR("COL"))
"RTN","SDEC07B",51,0)
 ;get scheduling request type AND next ava. appt. indicator
"RTN","SDEC07B",52,0)
 S SDSRT=$$SDSRT(BSDR("TYP"),BSDR("MTR"),BSDR("DDT"),BSDR("REQ"))
"RTN","SDEC07B",53,0)
 ; next ava.appt. indicator field 26
"RTN","SDEC07B",54,0)
 S SDNA=$P(SDSRT,U,2)
"RTN","SDEC07B",55,0)
 ; scheduling request type field 25
"RTN","SDEC07B",56,0)
 S SDSRT=$P(SDSRT,U,1)
"RTN","SDEC07B",57,0)
 ;determine if Follow-up visit field 28
"RTN","SDEC07B",58,0)
 S SDRET=""
"RTN","SDEC07B",59,0)
 D PCSTGET^SDEC(.SDRET,BSDR("PAT"),BSDR("CLN"))
"RTN","SDEC07B",60,0)
 S SDFU=$P($P(@SDRET@(1),U,2),$C(30,31),1)
"RTN","SDEC07B",61,0)
 S SDFU=$S(SDFU="YES":1,1:0)
"RTN","SDEC07B",62,0)
 K @SDRET
"RTN","SDEC07B",63,0)
 ;store
"RTN","SDEC07B",64,0)
 I $D(^DPT(BSDR("PAT"),"S",BSDR("ADT"),0)),(($P(^DPT(BSDR("PAT"),"S",BSDR("ADT"),0),U,2)="C")!($P(^DPT(BSDR("PAT"),"S",BSDR("ADT"),0),U,2)="PC")) D
"RTN","SDEC07B",65,0)
 . ; "un-cancel" existing appt in file 2
"RTN","SDEC07B",66,0)
 . N SDECFDA,SDECIENS,SDECMSG
"RTN","SDEC07B",67,0)
 . S SDECIENS=BSDR("ADT")_","_BSDR("PAT")_","
"RTN","SDEC07B",68,0)
 . S SDECFDA(2.98,SDECIENS,".01")=BSDR("CLN")
"RTN","SDEC07B",69,0)
 . S SDECFDA(2.98,SDECIENS,"3")=$S($G(^DPT(+$G(BSDR("PAT")),.1))'="":"I",1:"")
"RTN","SDEC07B",70,0)
 . S SDECFDA(2.98,SDECIENS,"5")=BSDR("LAB")    ;lab date/time
"RTN","SDEC07B",71,0)
 . S SDECFDA(2.98,SDECIENS,"6")=BSDR("XRA")    ;xray date/time
"RTN","SDEC07B",72,0)
 . S SDECFDA(2.98,SDECIENS,"7")=BSDR("EKG")    ;ekg date/time
"RTN","SDEC07B",73,0)
 . S SDECFDA(2.98,SDECIENS,"9")=BSDR("TYP")
"RTN","SDEC07B",74,0)
 . S:+BSDR("APT") SDECFDA(2.98,SDECIENS,"9.5")=BSDR("APT")
"RTN","SDEC07B",75,0)
 . S:+BSDR("COL") SDECFDA(2.98,SDECIENS,"13")=BSDR("COL")
"RTN","SDEC07B",76,0)
 . S SDECFDA(2.98,SDECIENS,"14")=""
"RTN","SDEC07B",77,0)
 . S SDECFDA(2.98,SDECIENS,"15")=""
"RTN","SDEC07B",78,0)
 . S SDECFDA(2.98,SDECIENS,"16")=""
"RTN","SDEC07B",79,0)
 . S SDECFDA(2.98,SDECIENS,"17")=""   ;alb/sat 658
"RTN","SDEC07B",80,0)
 . S SDECFDA(2.98,SDECIENS,"19")=DUZ           ;data entry clerk
"RTN","SDEC07B",81,0)
 . S SDECFDA(2.98,SDECIENS,"20")=$$NOW^XLFDT
"RTN","SDEC07B",82,0)
 . S SDECFDA(2.98,SDECIENS,"25")=SDSRT         ;scheduling request type
"RTN","SDEC07B",83,0)
 . S SDECFDA(2.98,SDECIENS,"26")=SDNA          ;next ava. appt. indicator
"RTN","SDEC07B",84,0)
 . S SDECFDA(2.98,SDECIENS,"27")=BSDR("DDT")   ;desired date of appt
"RTN","SDEC07B",85,0)
 . S SDECFDA(2.98,SDECIENS,"28")=SDFU          ;follow-up visit  yes/no
"RTN","SDEC07B",86,0)
 . D FILE^DIE("","SDECFDA","SDECMSG")
"RTN","SDEC07B",87,0)
 . N SDECTEMP S SDECTEMP=$G(SDECMSG)
"RTN","SDEC07B",88,0)
 E  D  I $G(SDECERR(1)) Q 1_U_"FileMan add to DPT error: Patient="_BSDR("PAT")_" Appt="_BSDR("ADT")
"RTN","SDEC07B",89,0)
 . ; add appt to file 2
"RTN","SDEC07B",90,0)
 . N SDECFDA,SDECIENS,SDECMSG
"RTN","SDEC07B",91,0)
 . S SDECIENS="?+2,"_BSDR("PAT")_","
"RTN","SDEC07B",92,0)
 . S SDECIENS(2)=BSDR("ADT")
"RTN","SDEC07B",93,0)
 . S SDECFDA(2.98,SDECIENS,.01)=BSDR("CLN")
"RTN","SDEC07B",94,0)
 . S SDECFDA(2.98,SDECIENS,"3")=$S($G(^DPT(+$G(BSDR("PAT")),.1))'="":"I",1:"")
"RTN","SDEC07B",95,0)
 . S SDECFDA(2.98,SDECIENS,"5")=BSDR("LAB")    ;lab date/time
"RTN","SDEC07B",96,0)
 . S SDECFDA(2.98,SDECIENS,"6")=BSDR("XRA")    ;xray date/time
"RTN","SDEC07B",97,0)
 . S SDECFDA(2.98,SDECIENS,"7")=BSDR("EKG")    ;ekg date/time
"RTN","SDEC07B",98,0)
 . S SDECFDA(2.98,SDECIENS,"9")=BSDR("TYP")
"RTN","SDEC07B",99,0)
 . S:+BSDR("APT") SDECFDA(2.98,SDECIENS,"9.5")=BSDR("APT")
"RTN","SDEC07B",100,0)
 . S:+BSDR("COL") SDECFDA(2.98,SDECIENS,"13")=BSDR("COL")
"RTN","SDEC07B",101,0)
 . S SDECFDA(2.98,SDECIENS,"14")=""
"RTN","SDEC07B",102,0)
 . S SDECFDA(2.98,SDECIENS,"15")=""
"RTN","SDEC07B",103,0)
 . S SDECFDA(2.98,SDECIENS,"16")=""
"RTN","SDEC07B",104,0)
 . S SDECFDA(2.98,SDECIENS,"17")=""   ;alb/sat 658
"RTN","SDEC07B",105,0)
 . S SDECFDA(2.98,SDECIENS,"19")=DUZ           ;data entry clerk
"RTN","SDEC07B",106,0)
 . S SDECFDA(2.98,SDECIENS,"20")=$$NOW^XLFDT
"RTN","SDEC07B",107,0)
 . S SDECFDA(2.98,SDECIENS,"25")=SDSRT         ;scheduling request type
"RTN","SDEC07B",108,0)
 . S SDECFDA(2.98,SDECIENS,"26")=SDNA          ;next ava. appt. indicator
"RTN","SDEC07B",109,0)
 . S SDECFDA(2.98,SDECIENS,"27")=BSDR("DDT")   ;desired date of appt
"RTN","SDEC07B",110,0)
 . S SDECFDA(2.98,SDECIENS,"28")=SDFU          ;follow-up visit  yes/no
"RTN","SDEC07B",111,0)
 . D UPDATE^DIE("","SDECFDA","SDECIENS","SDECERR(1)")
"RTN","SDEC07B",112,0)
 ;
"RTN","SDEC07B",113,0)
 ; add appt to file 44
"RTN","SDEC07B",114,0)
 K DIC,DA,X,Y,DLAYGO,DD,DO
"RTN","SDEC07B",115,0)
 I '$D(^SC(BSDR("CLN"),"S",0)) S ^SC(BSDR("CLN"),"S",0)="^44.001DA^^"
"RTN","SDEC07B",116,0)
 I '$D(^SC(BSDR("CLN"),"S",BSDR("ADT"),0)) D  I Y<1 Q 1_U_"Error adding date to file 44: Clinic="_BSDR("CLN")_" Date="_BSDR("ADT")
"RTN","SDEC07B",117,0)
 . S DIC="^SC("_BSDR("CLN")_",""S"",",DA(1)=BSDR("CLN"),(X,DINUM)=BSDR("ADT")
"RTN","SDEC07B",118,0)
 . S DIC("P")="44.001DA",DIC(0)="L",DLAYGO=44.001
"RTN","SDEC07B",119,0)
 . S Y=1 I '$D(@(DIC_X_")")) D FILE^DICN
"RTN","SDEC07B",120,0)
 ;
"RTN","SDEC07B",121,0)
 K DIC,DA,X,Y,DLAYGO,DD,DO,DINUM
"RTN","SDEC07B",122,0)
 S DIC="^SC("_BSDR("CLN")_",""S"","_BSDR("ADT")_",1,"
"RTN","SDEC07B",123,0)
 S DA(2)=BSDR("CLN"),DA(1)=BSDR("ADT"),X=BSDR("PAT")
"RTN","SDEC07B",124,0)
 S DIC("DR")="1////"_BSDR("LEN")_";3///"_$E($G(BSDR("OI")),1,150)_";7////"_BSDR("USR")_";8////"_$$NOW^XLFDT_";30////"_BSDR("ELG")_$S(+$G(BSDR("OVB")):";9////O",1:"")
"RTN","SDEC07B",125,0)
 S DIC("P")="44.003PA",DIC(0)="L",DLAYGO=44.003
"RTN","SDEC07B",126,0)
 D FILE^DICN
"RTN","SDEC07B",127,0)
 ;add consult link
"RTN","SDEC07B",128,0)
 I $G(BSDR("CON")) D
"RTN","SDEC07B",129,0)
 .N SDFDA,SDIEN
"RTN","SDEC07B",130,0)
 .S SDIEN=+Y
"RTN","SDEC07B",131,0)
 .Q:SDIEN=-1
"RTN","SDEC07B",132,0)
 .S SDFDA(44.003,SDIEN_","_BSDR("ADT")_","_BSDR("CLN")_",",688)=BSDR("CON")
"RTN","SDEC07B",133,0)
 .D UPDATE^DIE("","SDFDA")
"RTN","SDEC07B",134,0)
 ;
"RTN","SDEC07B",135,0)
 Q 0
"RTN","SDEC07B",136,0)
 ; call event driver
"RTN","SDEC07B",137,0)
 NEW DFN,SDT,SDCL,SDDA,SDMODE
"RTN","SDEC07B",138,0)
 S DFN=BSDR("PAT"),SDT=BSDR("ADT"),SDCL=BSDR("CLN"),SDMODE=2
"RTN","SDEC07B",139,0)
 S SDDA=$$SCIEN^SDECU2(BSDR("PAT"),BSDR("CLN"),BSDR("ADT"))
"RTN","SDEC07B",140,0)
 D MAKE^SDAMEVT(DFN,SDT,SDCL,SDDA,SDMODE)
"RTN","SDEC07B",141,0)
 Q 0
"RTN","SDEC07B",142,0)
 ;
"RTN","SDEC07B",143,0)
SDSRT(TYP,MTR,DDT,REQ) ;get SCHEDULING REQUEST TYPE and NEXT AVA.APPT. INDICATOR
"RTN","SDEC07B",144,0)
 ;INPUT:
"RTN","SDEC07B",145,0)
 ; TYP =  3 for scheduled appts, 4 for walkins
"RTN","SDEC07B",146,0)
 ; MTR = MTRC flag (multiple appointments) 0=False (default)  1=True
"RTN","SDEC07B",147,0)
 ; DDT = Desired Date of Appt in fm format
"RTN","SDEC07B",148,0)
 ; REQ = Requested By - valid values are 1=PROVIDER  2=PATIENT or ""
"RTN","SDEC07B",149,0)
 ;RETURN: 2 ^ pieces:
"RTN","SDEC07B",150,0)
 ;     1 - SCHEDULING REQUEST TYPE  internal format - valid values:
"RTN","SDEC07B",151,0)
 ;          N:'NEXT AVAILABLE' APPT.
"RTN","SDEC07B",152,0)
 ;          C:OTHER THAN 'NEXT AVA.' (CLINICIAN REQ.)
"RTN","SDEC07B",153,0)
 ;          P:OTHER THAN 'NEXT AVA.' (PATIENT REQ.)
"RTN","SDEC07B",154,0)
 ;          W:WALKIN APPT.
"RTN","SDEC07B",155,0)
 ;          M:MULTIPLE APPT. BOOKING
"RTN","SDEC07B",156,0)
 ;          A:AUTO REBOOK
"RTN","SDEC07B",157,0)
 ;          O:OTHER THAN 'NEXT AVA.' APPT.
"RTN","SDEC07B",158,0)
 ;     2 - NEXT AVA. APPT. INDICATOR  internal format - valid values:
"RTN","SDEC07B",159,0)
 ;          N:'NEXT AVAILABLE' APPT.
"RTN","SDEC07B",160,0)
 ;          C:OTHER THAN 'NEXT AVA.' (CLINICIAN REQ.)
"RTN","SDEC07B",161,0)
 ;          P:OTHER THAN 'NEXT AVA.' (PATIENT REQ.)
"RTN","SDEC07B",162,0)
 ;          W:WALKIN APPT.
"RTN","SDEC07B",163,0)
 ;          M:MULTIPLE APPT. BOOKING
"RTN","SDEC07B",164,0)
 ;          A:AUTO REBOOK
"RTN","SDEC07B",165,0)
 ;          O:OTHER THAN 'NEXT AVA.' APPT.
"RTN","SDEC07B",166,0)
 ;
"RTN","SDEC07B",167,0)
 N RET
"RTN","SDEC07B",168,0)
 S RET=""
"RTN","SDEC07B",169,0)
 ;1. If user creates a walkin appointment would be W:WALKIN APPT, 0:NOT INDICATED TO BE A 'NEXT AVA.' APPT
"RTN","SDEC07B",170,0)
 I TYP=4 Q "W^0"
"RTN","SDEC07B",171,0)
 ;2. If user creates an rm request with MTRC flagged
"RTN","SDEC07B",172,0)
 ;   AND desired date is 'today'
"RTN","SDEC07B",173,0)
 ; would be M:MULTIPLE APPT. BOOKING, 3:'NEXT AVA.' APPT. INDICATED BY USER & CALCULATION
"RTN","SDEC07B",174,0)
 I +MTR,$P($$NOW^XLFDT,".",1)=DDT Q "M^3"
"RTN","SDEC07B",175,0)
 ;3. If user creates an rm request with MTRC flagged
"RTN","SDEC07B",176,0)
 ;   AND desired date is not 'today'
"RTN","SDEC07B",177,0)
 ; would be M:MULTIPLE APPT. BOOKING, 0:'NOT INDICATED TO BE A 'NEXT AVA.' APPT
"RTN","SDEC07B",178,0)
 I +MTR,$P($$NOW^XLFDT,".",1)'=DDT Q "M^0"
"RTN","SDEC07B",179,0)
 ;4. If the user enters a desired date for the clinic stop that is today
"RTN","SDEC07B",180,0)
 ;  then N:'NEXT AVAILABLE' APPT., 1:'NEXT AVA.' APPT. INDICATED BY USER
"RTN","SDEC07B",181,0)
 I $P($$NOW^XLFDT(),".",1)=DDT Q "N^1"
"RTN","SDEC07B",182,0)
 ;5. If the user enters a desired date not today
"RTN","SDEC07B",183,0)
 ;   AND the request is by patient
"RTN","SDEC07B",184,0)
 ; then P:OTHER THAN 'NEXT AVA.' (PATIENT REQ.); 0:NOT INDICATED TO BE A 'NEXT AVA.' APPT.
"RTN","SDEC07B",185,0)
 I $P($$NOW^XLFDT(),".",1)'=DDT,REQ=2 Q "P^0"
"RTN","SDEC07B",186,0)
 ;6. If the user enters a desired date not today
"RTN","SDEC07B",187,0)
 ;   AND the request is by provider
"RTN","SDEC07B",188,0)
 ; then C:OTHER THAN 'NEXT AVA.' (CLINICIAN REQ.); 0:NOT INDICATED TO BE A 'NEXT AVA.' APPT.
"RTN","SDEC07B",189,0)
 I $P($$NOW^XLFDT(),".",1)'=DDT,REQ=1 Q "C^0"
"RTN","SDEC07B",190,0)
 Q RET
"RTN","SDEC07B",191,0)
 ;
"RTN","SDEC07B",192,0)
 ;Create Appointment  ;alb/sat 665 moved from SDEC07
"RTN","SDEC07B",193,0)
APPVISTA(SDECLEN,SDECNOTE,DFN,SDECRESD,SDECSTART,SDECWKIN,SDCL,SDECI) ;
"RTN","SDEC07B",194,0)
 N SDECC,SDECERR,SDECRNOD
"RTN","SDEC07B",195,0)
 S SDECRNOD=$G(^SDEC(409.831,SDECRESD,0))
"RTN","SDEC07B",196,0)
 I SDECRNOD="" D ERR^SDEC07(SDECI+1,"SDEC07 Error: Unable to add appointment -- invalid Resource entry.") Q 1
"RTN","SDEC07B",197,0)
 S SDECERR=""
"RTN","SDEC07B",198,0)
 I +SDCL,$D(^SC(SDCL,0)) D  I +SDECERR D ERR^SDEC07(SDECI+1,SDECERR) Q SDECERR
"RTN","SDEC07B",199,0)
 . S SDECC("PAT")=DFN
"RTN","SDEC07B",200,0)
 . S SDECC("CLN")=SDCL
"RTN","SDEC07B",201,0)
 . S SDECC("TYP")=3 ;3 for scheduled appts, 4 for walkins
"RTN","SDEC07B",202,0)
 . S:SDECWKIN SDECC("TYP")=4
"RTN","SDEC07B",203,0)
 . S SDECC("ADT")=SDECSTART
"RTN","SDEC07B",204,0)
 . S SDECC("LEN")=SDECLEN
"RTN","SDEC07B",205,0)
 . S SDECC("OI")=$E($G(SDECNOTE),1,150) ;File 44 has 150 character limit on OTHER field
"RTN","SDEC07B",206,0)
 . S SDECC("OI")=$TR(SDECC("OI"),";"," ") ;No semicolons allowed
"RTN","SDEC07B",207,0)
 . S SDECC("OI")=$$STRIP^SDEC07(SDECC("OI")) ;Strip control characters from note
"RTN","SDEC07B",208,0)
 . S SDECC("RES")=SDECRESD
"RTN","SDEC07B",209,0)
 . S SDECC("USR")=DUZ
"RTN","SDEC07B",210,0)
 . S SDECERR=$$MAKE^SDEC07B(.SDECC)
"RTN","SDEC07B",211,0)
 . Q:SDECERR
"RTN","SDEC07B",212,0)
 . D AVUPDT^SDEC07(SDCL,SDECSTART,SDECLEN)
"RTN","SDEC07B",213,0)
 . ;L
"RTN","SDEC07B",214,0)
 . Q
"RTN","SDEC07B",215,0)
 Q +SDECERR
"RTN","SDECCON")
0^3^B15794027^n/a
"RTN","SDECCON",1,0)
SDECCON ;SPFO/DMR SCHEDULING ENHANCEMENTS VSE CONTACT API
"RTN","SDECCON",2,0)
 ;;5.3;Scheduling;**669**;Aug 13 1993;Build 16
"RTN","SDECCON",3,0)
 ;
"RTN","SDECCON",4,0)
 ;This API provides SDEC CONTACT(#409.86)file information to the VSE VS GUI.
"RTN","SDECCON",5,0)
 ;
"RTN","SDECCON",6,0)
 Q
"RTN","SDECCON",7,0)
DISPLAY(RTU,DFN,CLN,PDT,REQT,SER) ;
"RTN","SDECCON",8,0)
 Q:'$G(DFN)
"RTN","SDECCON",9,0)
 Q:'$G(PDT)
"RTN","SDECCON",10,0)
 Q:'$D(REQT)
"RTN","SDECCON",11,0)
 S (CC,CC1,CC2,REC)=""
"RTN","SDECCON",12,0)
 ;
"RTN","SDECCON",13,0)
 S CC="" F  S CC=$O(^SDEC(409.86,"B",DFN,CC)) Q:CC=""  D
"RTN","SDECCON",14,0)
 .S REC="" S REC=^SDEC(409.86,CC,0)
"RTN","SDECCON",15,0)
 .Q:PDT'=$P($G(REC),"^",3)
"RTN","SDECCON",16,0)
 .I $G(CLN)'="" Q:$G(CLN)'=$P($G(REC),"^",2)
"RTN","SDECCON",17,0)
 .I $G(SER)'="" Q:$G(SER)'=$P($G(REC),"^",6)
"RTN","SDECCON",18,0)
 .Q:REQT'=$P($G(REC),"^",4)
"RTN","SDECCON",19,0)
 .S RTU=CC_"^"_REC
"RTN","SDECCON",20,0)
 .Q
"RTN","SDECCON",21,0)
 D EXIT
"RTN","SDECCON",22,0)
 Q
"RTN","SDECCON",23,0)
DISMULT(RTT,CIEN) ;
"RTN","SDECCON",24,0)
 Q:'$G(CIEN)
"RTN","SDECCON",25,0)
 ;
"RTN","SDECCON",26,0)
 S (CC1,CC2,REC1,REC2,RTT,ENDT)=""
"RTN","SDECCON",27,0)
 ;
"RTN","SDECCON",28,0)
 S CC2="" F  S CC2=$O(^SDEC(409.86,CIEN,1,CC2)) Q:CC2=""  D
"RTN","SDECCON",29,0)
 .S REC2="" S REC2=$G(^SDEC(409.86,CIEN,1,CC2,1)) Q:REC2=""  D
"RTN","SDECCON",30,0)
 ..S ENDT="" S ENDT=$P($G(^SDEC(409.86,CIEN,1,CC2,0)),"^",1)
"RTN","SDECCON",31,0)
 ..S (ENTU,ENTUN)="" S ENTUN=$P(REC2,"^",5) I ENTUN>0 D
"RTN","SDECCON",32,0)
 ...S ENTU=$$GET1^DIQ(200,ENTUN,.01,"E")
"RTN","SDECCON",33,0)
 ..S RTT=RTT_CC1_"^"_REC2_"^"_ENTU_"^"_ENDT_";"
"RTN","SDECCON",34,0)
 ..Q
"RTN","SDECCON",35,0)
 D EXIT
"RTN","SDECCON",36,0)
 Q
"RTN","SDECCON",37,0)
 ;
"RTN","SDECCON",38,0)
NEW(RET,DFN,CLI,DTP,REQT,SRV,DTCON,CONT,COM,DTENT) ;
"RTN","SDECCON",39,0)
 Q:'$G(DFN)
"RTN","SDECCON",40,0)
 Q:'$G(DTP)
"RTN","SDECCON",41,0)
 Q:'$D(REQT)
"RTN","SDECCON",42,0)
 Q:'$G(DTCON)
"RTN","SDECCON",43,0)
 Q:'$D(CONT)
"RTN","SDECCON",44,0)
 Q:'$G(DTENT)
"RTN","SDECCON",45,0)
 I '$D(COM) S COM=""
"RTN","SDECCON",46,0)
 I '$G(CLI) S CLI=""
"RTN","SDECCON",47,0)
 I '$G(SRV) S SRV=""
"RTN","SDECCON",48,0)
 ;
"RTN","SDECCON",49,0)
 S (DFN2,CC1,CC2)=""
"RTN","SDECCON",50,0)
 ;
"RTN","SDECCON",51,0)
 S DFN2="" F  S DFN2=$O(^SDEC(409.86,"B",DFN2)) Q:DFN2=""  D
"RTN","SDECCON",52,0)
 .S CC1="" F  S CC1=$O(^SDEC(409.86,"B",DFN2,CC1)) Q:CC1=""  D
"RTN","SDECCON",53,0)
 ..S CC2=CC2+1
"RTN","SDECCON",54,0)
 ..Q
"RTN","SDECCON",55,0)
 S CC2=CC2+1 D
"RTN","SDECCON",56,0)
 .S ^SDEC(409.86,0)="SDEC CONTACT^409.86P^"_CC2_"^"_CC2
"RTN","SDECCON",57,0)
 .S ^SDEC(409.86,CC2,0)=DFN_"^"_CLI_"^"_DTP_"^"_REQT_"^"_1_SRV
"RTN","SDECCON",58,0)
 .S ^SDEC(409.86,CC2,1,0)="^409.863D^1^1"
"RTN","SDECCON",59,0)
 .S ^SDEC(409.86,CC2,1,1,0)=DTCON
"RTN","SDECCON",60,0)
 .S ^SDEC(409.86,CC2,1,1,1)=CONT_"^"_COM_"^"_0_"^"_1_"^"_DUZ_"^"_DTENT
"RTN","SDECCON",61,0)
 .S ^SDEC(409.86,"B",DFN,CC2)=""
"RTN","SDECCON",62,0)
 .S ^SDEC(409.86,CC2,1,"B",DTCON,1)=""
"RTN","SDECCON",63,0)
 .Q
"RTN","SDECCON",64,0)
 D EXIT
"RTN","SDECCON",65,0)
 Q
"RTN","SDECCON",66,0)
SEQ(RE1,DF1,CL1,PDATE,RTYPE,SRR) ;
"RTN","SDECCON",67,0)
 Q:'$G(DF1)
"RTN","SDECCON",68,0)
 Q:'$G(PDATE)
"RTN","SDECCON",69,0)
 I '$G(CL1) S CL1=""
"RTN","SDECCON",70,0)
 I '$G(SRR) S SRR=""
"RTN","SDECCON",71,0)
 ;
"RTN","SDECCON",72,0)
 S (JJ,JJ1,RCD,SQU,DF2)=""
"RTN","SDECCON",73,0)
 ;
"RTN","SDECCON",74,0)
 S JJ="" F  S JJ=$O(^SDEC(409.86,"B",DF1,JJ)) Q:JJ=""  D
"RTN","SDECCON",75,0)
 .S RCD="" S RCD=$G(^SDEC(409.86,JJ,0)) Q:RCD=""  D
"RTN","SDECCON",76,0)
 ..S SQU="" S SQU=$P($G(^SDEC(409.86,JJ,1,0)),"^",3) D
"RTN","SDECCON",77,0)
 ...Q:$G(SQU)=""
"RTN","SDECCON",78,0)
 ...Q:PDATE'=$P($G(RCD),"^",3)
"RTN","SDECCON",79,0)
 ...Q:RTYPE'=$P($G(RCD),"^",4)
"RTN","SDECCON",80,0)
 ...I $P($G(RCD),"^",2)=CL1 D
"RTN","SDECCON",81,0)
 ....S $P(^SDEC(409.86,JJ,0),"^",5)=SQU+1
"RTN","SDECCON",82,0)
 ....S RE1=SQU+1
"RTN","SDECCON",83,0)
 ....Q
"RTN","SDECCON",84,0)
 ...I $P($G(RCD),"^",6)=SRR D
"RTN","SDECCON",85,0)
 ....S $P(^SDEC(409.86,JJ,0),"^",5)=SQU+1
"RTN","SDECCON",86,0)
 ....S RE1=SQU+1
"RTN","SDECCON",87,0)
 ....Q
"RTN","SDECCON",88,0)
 D EXIT
"RTN","SDECCON",89,0)
 Q
"RTN","SDECCON",90,0)
UPDATE(RTT,IEN,CONDT,CTYPE,COMM,DTEN) ;
"RTN","SDECCON",91,0)
 Q:'$G(IEN)
"RTN","SDECCON",92,0)
 Q:'$G(CONDT)
"RTN","SDECCON",93,0)
 Q:'$D(CTYPE) 
"RTN","SDECCON",94,0)
 I '$D(COMM) S COMM=""
"RTN","SDECCON",95,0)
 I '$G(DTEN) S DTEN=""
"RTN","SDECCON",96,0)
 ;
"RTN","SDECCON",97,0)
 S (MULT,RTT,CC,CCC,COUNT,MULTN)=""
"RTN","SDECCON",98,0)
 ;
"RTN","SDECCON",99,0)
 S MULT="" S MULT=$G(^SDEC(409.86,IEN,1,0)) I MULT'="" D
"RTN","SDECCON",100,0)
 .S MULTN=$P(MULT,"^",4) I MULTN'="" D
"RTN","SDECCON",101,0)
 ..S COUNT=MULTN
"RTN","SDECCON",102,0)
 .Q
"RTN","SDECCON",103,0)
 I COUNT'="" S COUNT=COUNT+1 D
"RTN","SDECCON",104,0)
 .S ^SDEC(409.86,IEN,1,0)="^409.863D^"_COUNT_"^"_COUNT
"RTN","SDECCON",105,0)
 .S ^SDEC(409.86,IEN,1,COUNT,0)=CONDT
"RTN","SDECCON",106,0)
 .S ^SDEC(409.86,IEN,1,COUNT,1)=CTYPE_"^"_COMM_"^"_0_"^"_COUNT_"^"_DUZ_"^"_DTEN
"RTN","SDECCON",107,0)
 .S ^SDEC(409.86,IEN,1,"B",CONDT,COUNT)=""
"RTN","SDECCON",108,0)
 .Q
"RTN","SDECCON",109,0)
 D EXIT
"RTN","SDECCON",110,0)
 Q 
"RTN","SDECCON",111,0)
GETSTC(RET,CLIEN) ;
"RTN","SDECCON",112,0)
 Q:CLIEN=""
"RTN","SDECCON",113,0)
 ;
"RTN","SDECCON",114,0)
 ;CLIEN=Clinic IEN
"RTN","SDECCON",115,0)
 ;HLF0=Hospital Location File 0 node
"RTN","SDECCON",116,0)
 ;SNUM=Stopc Code IEN [0,7]
"RTN","SDECCON",117,0)
 ;STPC=Stop Code 40.7
"RTN","SDECCON",118,0)
 ;CSNUM=Credit Stop IEN [0,18]
"RTN","SDECCON",119,0)
 ;CSTPC=Credit Stop Code 40.7
"RTN","SDECCON",120,0)
 ;
"RTN","SDECCON",121,0)
 S (HLF0,SNUM,STPC,CSNUM,CSTPC)=""
"RTN","SDECCON",122,0)
 ;
"RTN","SDECCON",123,0)
 S HLF0=$G(^SC(CLIEN,0)) I HLF0'="" D
"RTN","SDECCON",124,0)
 .S SNUM=$P($G(HLF0),"^",7) I SNUM'="" D
"RTN","SDECCON",125,0)
 ..S STPC=$$GET1^DIQ(40.7,SNUM,1)
"RTN","SDECCON",126,0)
 .S CNUM=$P($G(HLF0),"^",18) I CNUM'="" D
"RTN","SDECCON",127,0)
 ..S CSTPC=$$GET1^DIQ(40.7,CNUM,1)
"RTN","SDECCON",128,0)
 S RET=STPC_"^"_CSTPC
"RTN","SDECCON",129,0)
 K HLF0,SNUM,STPC,CSNUM,CSTPC
"RTN","SDECCON",130,0)
 Q
"RTN","SDECCON",131,0)
EXIT ;
"RTN","SDECCON",132,0)
 K MULT,CC,CCC,COUNT,COMM,DTEN,ENDT
"RTN","SDECCON",133,0)
 K JJ,JJ1,RCD,SQU,DF2,DFN2,CC1,CC2,RCD,SQU
"RTN","SDECCON",134,0)
 K REC1,REC2,ENDT,MULTN,CLN,PDT,REQT,SER
"RTN","SDECCON",135,0)
 Q
"RTN","SDECELG")
0^4^B1142489^n/a
"RTN","SDECELG",1,0)
SDECELG ;SPFO/DMR SCHEDULING ENHANCEMENTS VSE API
"RTN","SDECELG",2,0)
 ;;5.3;Scheduling;**669**;Aug 13 1993;Build 16
"RTN","SDECELG",3,0)
 ;
"RTN","SDECELG",4,0)
 ;This API gets the all patient eligibility
"RTN","SDECELG",5,0)
 ;
"RTN","SDECELG",6,0)
 Q
"RTN","SDECELG",7,0)
START(RRN,DFN) ;
"RTN","SDECELG",8,0)
 S (NM,NM2,MECN,VET,VET1,ELGN,REO,RRN)=""
"RTN","SDECELG",9,0)
 ;
"RTN","SDECELG",10,0)
 S ELGN=0 F  S ELGN=$O(^DPT(DFN,"E",ELGN)) Q:ELGN="B"!(ELGN="")  D
"RTN","SDECELG",11,0)
 .S NM="" S NM=$P(^DIC(8,ELGN,0),"^",1)
"RTN","SDECELG",12,0)
 .Q:NM=""  S MECN="" S MECN=$P($G(^DIC(8,ELGN,0)),"^",9)
"RTN","SDECELG",13,0)
 .Q:'$G(MECN)  S NM2="" S NM2=$P(^DIC(8.1,MECN,0),"^",1)
"RTN","SDECELG",14,0)
 .Q:'$D(NM2)  S (VET,VET1)="" S VET=$P(^DIC(8.1,MECN,0),"^",5)
"RTN","SDECELG",15,0)
 .Q:'$D(VET)  S VET1=$S(VET="N":"NON-VETERAN",VET="Y":"VETERAN")
"RTN","SDECELG",16,0)
 .S REO=":"_ELGN_"^"_NM_"^"_NM2_"^"_VET1
"RTN","SDECELG",17,0)
 .S RRN=RRN_REO
"RTN","SDECELG",18,0)
 .Q
"RTN","SDECELG",19,0)
 K NM,NM2,MECN,VET,VET1,ELGN,REO
"RTN","SDECELG",20,0)
 Q
"RTN","SDECEP")
0^1^B20201129^n/a
"RTN","SDECEP",1,0)
SDECEP ;SPFO/DMR SCHEDULING ENHANCEMENTS VSE EP API
"RTN","SDECEP",2,0)
 ;;5.3;Scheduling;**669**;Aug 13 1993;Build 16
"RTN","SDECEP",3,0)
 ;
"RTN","SDECEP",4,0)
 ;The API provides Extended Profile Appt info the VS Gui.
"RTN","SDECEP",5,0)
 ;INPUT - DFN required
"RTN","SDECEP",6,0)
 ;        APP appointment date/time required
"RTN","SDECEP",7,0)
 Q
"RTN","SDECEP",8,0)
 ;
"RTN","SDECEP",9,0)
CLASS(RTT,DFN,APT) ;
"RTN","SDECEP",10,0)
 Q:'$G(DFN)
"RTN","SDECEP",11,0)
 Q:'$G(APT)
"RTN","SDECEP",12,0)
 S U="^"
"RTN","SDECEP",13,0)
 ;
"RTN","SDECEP",14,0)
 ; Each Clasification set to Not Applicable
"RTN","SDECEP",15,0)
 ; 1 Agent Orange Exposure: Not Applicable
"RTN","SDECEP",16,0)
 ; 2 Ionizing Radiation Exposure: Not Applicable
"RTN","SDECEP",17,0)
 ; 3 Treatment for SC Condition: Not Applicable
"RTN","SDECEP",18,0)
 ; 4 SW Asia Conditions: Not Applicable
"RTN","SDECEP",19,0)
 ; 5 Military Sexual Trauma: Not Applicable
"RTN","SDECEP",20,0)
 ; 6 Head and/or Neck Cancer: Not Applicable
"RTN","SDECEP",21,0)
 ; 7 Combat Vet (Combat Related): Not Applicable
"RTN","SDECEP",22,0)
 ;
"RTN","SDECEP",23,0)
 S NA="Not Applicable"
"RTN","SDECEP",24,0)
 S RTT=NA_U_NA_U_NA_U_NA_U_NA_U_NA_U_NA_U_NA
"RTN","SDECEP",25,0)
 ;
"RTN","SDECEP",26,0)
 S (ENCN,CC,CL)=""
"RTN","SDECEP",27,0)
 ;
"RTN","SDECEP",28,0)
 S ENCN=$P($G(^DPT(DFN,"S",APT,0)),"^",20)
"RTN","SDECEP",29,0)
 I ENCN'="" D CLOE^SDCO21(ENCN,.RR)
"RTN","SDECEP",30,0)
 F CC=1:1:8 S CL=$G(RR(CC)) D
"RTN","SDECEP",31,0)
 .I $P($G(CL),"^",2)=1 S $P(RTT,"^",CC)="YES"
"RTN","SDECEP",32,0)
 .I $P($G(CL),"^",2)=0 S $P(RTT,"^",CC)="NO"
"RTN","SDECEP",33,0)
 K ENCN,CC,CL
"RTN","SDECEP",34,0)
 Q
"RTN","SDECEP",35,0)
 ;
"RTN","SDECEP",36,0)
DIAGN(REN,DFN,APP) ;
"RTN","SDECEP",37,0)
 Q:'$G(DFN)
"RTN","SDECEP",38,0)
 Q:'$G(APP)
"RTN","SDECEP",39,0)
 ;
"RTN","SDECEP",40,0)
 S (ENUM,CNT,CNT1,CC,NAME,REN)=""
"RTN","SDECEP",41,0)
 S ENUM=$P($G(^DPT(DFN,"S",APP,0)),"^",20)
"RTN","SDECEP",42,0)
 I ENUM'="" D SET^SDCO4(ENUM)
"RTN","SDECEP",43,0)
 Q:SDCNT=""
"RTN","SDECEP",44,0)
 F CC=1:1:SDCNT S ICDN=$P($G(SDDXY(CC)),"^",2) D
"RTN","SDECEP",45,0)
 .Q:ICDN=""
"RTN","SDECEP",46,0)
 .S NAME="" S NAME=$$GET1^DIQ(80,ICDN,.01)
"RTN","SDECEP",47,0)
 .S CNT="" S CNT=$P($G(^ICD9(ICDN,67,0)),"^",3)
"RTN","SDECEP",48,0)
 .S CNT1="" S CNT1=$P(^ICD9(ICDN,67,CNT,0),"^",2)
"RTN","SDECEP",49,0)
 .S REN=REN_NAME_" "_CNT1_"^"
"RTN","SDECEP",50,0)
 .Q
"RTN","SDECEP",51,0)
 K ENUM,CNT,CNT1,CC,NAME
"RTN","SDECEP",52,0)
 Q
"RTN","SDECEP",53,0)
PROV(RET,DFN,APPT) ;
"RTN","SDECEP",54,0)
 Q:'$G(DFN)
"RTN","SDECEP",55,0)
 Q:'$G(APPT)
"RTN","SDECEP",56,0)
 ;
"RTN","SDECEP",57,0)
 S EN="" S EN=$P($G(^DPT(DFN,"S",APPT,0)),"^",20)
"RTN","SDECEP",58,0)
 Q:EN=""
"RTN","SDECEP",59,0)
 ;
"RTN","SDECEP",60,0)
 S (CC,NAME,NAM,RET)=""
"RTN","SDECEP",61,0)
 ;
"RTN","SDECEP",62,0)
 K PLIST
"RTN","SDECEP",63,0)
 D GETPRV^SDOE(EN,"PLIST")
"RTN","SDECEP",64,0)
 Q:PLIST=""
"RTN","SDECEP",65,0)
 F  S CC=$O(PLIST(CC)) Q:CC=""  D
"RTN","SDECEP",66,0)
 .S NAM="" S NAM=$P(PLIST(CC),"^",1)
"RTN","SDECEP",67,0)
 .S NAME="" S NAME=$$GET1^DIQ(200,NAM,.01)
"RTN","SDECEP",68,0)
 .I NAME'="" S RET=RET_NAME_"^"
"RTN","SDECEP",69,0)
 .Q
"RTN","SDECEP",70,0)
 K CC,NAME,NAM
"RTN","SDECEP",71,0)
 Q
"RTN","SDECEP",72,0)
 ;
"RTN","SDECEP",73,0)
CPT(REC,DFN,APP) ;
"RTN","SDECEP",74,0)
 Q:'$G(APP)
"RTN","SDECEP",75,0)
 Q:'$G(DFN)
"RTN","SDECEP",76,0)
 ;
"RTN","SDECEP",77,0)
 S ENN="" S ENN=$P($G(^DPT(DFN,"S",APP,0)),"^",20)
"RTN","SDECEP",78,0)
 Q:ENN=""
"RTN","SDECEP",79,0)
 S (CNT,CC,CCC,CPT,PNAR,PNARN,QTY,CPTM,REC)=""
"RTN","SDECEP",80,0)
 ;
"RTN","SDECEP",81,0)
 K CPTL
"RTN","SDECEP",82,0)
 D GETCPT^SDOE(ENN,"CPTL")
"RTN","SDECEP",83,0)
 S CC="" F  S CC=$O(CPTL(CC)) Q:CC=""  D
"RTN","SDECEP",84,0)
 .S CPT="" S CPT=$P($G(CPTL(CC,0)),"^",1)
"RTN","SDECEP",85,0)
 .S QTY="" S QTY=$P($G(CPTL(CC,0)),"^",16)
"RTN","SDECEP",86,0)
 .S PNARN="" S PNARN=$P($G(CPTL(CC,0)),"^",4)
"RTN","SDECEP",87,0)
 .I PNARN'="" S PNAR="" S PNAR=$$GET1^DIQ(9999999.27,PNARN,.01)
"RTN","SDECEP",88,0)
 .S REC=REC_"^"_CPT_" "_QTY_" "_PNAR
"RTN","SDECEP",89,0)
 .I $D(CPTL(CC,1,0)) D
"RTN","SDECEP",90,0)
 ..S (CNN,CMM,CCC)="" S CCC=$P($G(CPTL(CC,1,0)),"^",4)
"RTN","SDECEP",91,0)
 ..F CNT=1:1:CCC S CNN=$P($G(CPTL(CC,1,CNT,0)),"^",1) D
"RTN","SDECEP",92,0)
 ...I CNN>0 D
"RTN","SDECEP",93,0)
 ....S CPTMN="" S CPTMN=$$GET1^DIQ(81.3,CNN,.02)
"RTN","SDECEP",94,0)
 ....S CMM="" S CMM=$$GET1^DIQ(81.3,CNN,.01)
"RTN","SDECEP",95,0)
 ...S CPTM=CPTM_":"_CMM_":"_CPTMN
"RTN","SDECEP",96,0)
 ...S REC=REC_CPTM
"RTN","SDECEP",97,0)
 ...Q
"RTN","SDECEP",98,0)
 K ENN,CNT,CC,CCC,CPT,PNAR,PNARN,QTY,CPTM
"RTN","SDECEP",99,0)
 Q
"RTN","SDECEP",100,0)
 ;
"RTN","SDECEP",101,0)
SCODE(RTU,DFN,APP) ;
"RTN","SDECEP",102,0)
 Q:'$G(DFN)
"RTN","SDECEP",103,0)
 Q:'$G(APP)
"RTN","SDECEP",104,0)
 ;
"RTN","SDECEP",105,0)
 S ENU="" S ENU=$P($G(^DPT(DFN,"S",APP,0)),"^",20)
"RTN","SDECEP",106,0)
 Q:ENU=""
"RTN","SDECEP",107,0)
 S (SNAM,SNUM,SNAM1,SNUM1,LOC,LNUM,AMIS,AMIS1,RTU)=""
"RTN","SDECEP",108,0)
 ;
"RTN","SDECEP",109,0)
 S LNUM="" S LNUM=$P($G(^SCE(ENU,0)),"^",4)
"RTN","SDECEP",110,0)
 Q:LNUM=""
"RTN","SDECEP",111,0)
 S (SNAM,SNUM)="" S SNAM=$$GET1^DIQ(44,LNUM,8,"E") S SNUM=$$GET1^DIQ(44,LNUM,8,"I")
"RTN","SDECEP",112,0)
 I SNUM'="" S AMIS="" S AMIS=$$GET1^DIQ(40.7,SNUM,1)
"RTN","SDECEP",113,0)
 S (SNAM1,SNUM1)="" S SNAM1=$$GET1^DIQ(44,LNUM,2503,"E") S SNUM1=$$GET1^DIQ(44,LNUM,2503,"I")
"RTN","SDECEP",114,0)
 I SNUM1'="" S AMIS1="" S AMIS1=$$GET1^DIQ(40.7,SNUM1,1)
"RTN","SDECEP",115,0)
 S RTU=AMIS_" "_SNAM_"^"_AMIS1_" "_SNAM1_"^"
"RTN","SDECEP",116,0)
 K SNAM,SNUM,SNAM1,SNUM1,LOC,LNUM,AMIS,AMIS1
"RTN","SDECEP",117,0)
 Q
"RTN","SDECEP",118,0)
 ;
"RTN","SDECEP",119,0)
INP(REN,DFN) ;
"RTN","SDECEP",120,0)
 Q:'$G(DFN)
"RTN","SDECEP",121,0)
 ;
"RTN","SDECEP",122,0)
 S (ADMDT,DISDT,DNUM,LSTAT,SDST,SDSTA,REN)=""
"RTN","SDECEP",123,0)
 I '$D(^DGPM("C",DFN)) S LSTAT="NO INPT./LOD. ACT." Q
"RTN","SDECEP",124,0)
 ;
"RTN","SDECEP",125,0)
 S VAIP("D")="L",VAIP("L")="" D INP^DGPMV10
"RTN","SDECEP",126,0)
 S A=$S("^3^5^"[("^"_+DGPMVI(2)_"^"):0,1:+DGPMVI(2)),SDST=$S('A:"IN",1:"")_"ACTIVE ",SDSTA=$S("^4^5^"[("^"_+DGPMVI(2)_"^"):"LODGER",1:"INPATIENT")
"RTN","SDECEP",127,0)
 S LSTAT="" S LSTAT=SDST_" "_SDSTA
"RTN","SDECEP",128,0)
 S ADMDT="" S ADMDT=$P($G(DGPMVI(13,1)),"^",2)
"RTN","SDECEP",129,0)
 S DNUM="" S DNUM=$G(DGPMV1(17)) I DNUM'="" D
"RTN","SDECEP",130,0)
 .S DISDT="" S DISDT=$$GET1^DIQ(405,DNUM,.01)
"RTN","SDECEP",131,0)
 S REN=LSTAT_"^"_ADMDT_"^"_DISDT
"RTN","SDECEP",132,0)
 K ADMDT,DISDT,DNUM,LSTAT,SDST,SDSTA
"RTN","SDECEP",133,0)
 Q
"RTN","SDECEP",134,0)
APPT(RET,DFN1,APP1) ;
"RTN","SDECEP",135,0)
 Q:'$G(DFN1)
"RTN","SDECEP",136,0)
 Q:'$G(APP1)
"RTN","SDECEP",137,0)
 S RET=$P($G(^DPT(DFN1,"S",APP1,0)),"^",2)
"RTN","SDECEP",138,0)
 Q
"RTN","SDECEPT")
0^2^B134242125^n/a
"RTN","SDECEPT",1,0)
SDECEPT ;SPFO/RT SCHEDULING ENHANCEMENTS VSE EP API
"RTN","SDECEPT",2,0)
 ;;5.3;Scheduling;**669**;Aug 13 1993;Build 16
"RTN","SDECEPT",3,0)
 ;
"RTN","SDECEPT",4,0)
 ;The API provides Extended Profile Appt info the VS Gui.
"RTN","SDECEPT",5,0)
 ;INPUT - DFN required
"RTN","SDECEPT",6,0)
 ;        APP appointment date/time required
"RTN","SDECEPT",7,0)
 Q
"RTN","SDECEPT",8,0)
 ;
"RTN","SDECEPT",9,0)
INIT ;
"RTN","SDECEPT",10,0)
 S (PAT0,PAM0,CLIEN,HLF0,HLAPIEN,HLAP0)=""
"RTN","SDECEPT",11,0)
 ;
"RTN","SDECEPT",12,0)
 ; PAT0=Global location 0 from Patient file
"RTN","SDECEPT",13,0)
 ; PAM0=Global location 0 from Patient Appointment Multiple
"RTN","SDECEPT",14,0)
 ; CLIEN=Clinic IEN
"RTN","SDECEPT",15,0)
 ; HLF0=Global location 0 from Hospital Location File
"RTN","SDECEPT",16,0)
 ; HLAPIEN=Hospital Location Appointment Multiple IEN
"RTN","SDECEPT",17,0)
 ; HLAP0=Global location 0 from Hospital Appointment Multiple
"RTN","SDECEPT",18,0)
 ;
"RTN","SDECEPT",19,0)
 ; SET HELPERS
"RTN","SDECEPT",20,0)
 S U="^"
"RTN","SDECEPT",21,0)
 ;
"RTN","SDECEPT",22,0)
 S PAT0=$G(^DPT(DFN,0))
"RTN","SDECEPT",23,0)
 S PAM0=$G(^DPT(DFN,"S",ADT,0)) I PAM0'="" D
"RTN","SDECEPT",24,0)
 .S CLIEN=$P($G(PAM0),U,1) I CLIEN'="" D
"RTN","SDECEPT",25,0)
 ..S HLF0=$G(^SC(CLIEN,0))
"RTN","SDECEPT",26,0)
 ..S HLAPIEN=+$$FIND^SDAM2(DFN,ADT,CLIEN) I HLAPIEN'="" D
"RTN","SDECEPT",27,0)
 ...S HLAP0=$G(^SC(CLIEN,"S",ADT,1,HLAPIEN,0))
"RTN","SDECEPT",28,0)
 Q
"RTN","SDECEPT",29,0)
 ;
"RTN","SDECEPT",30,0)
GETDEM(RET,DFN,ADT) ;
"RTN","SDECEPT",31,0)
 ; REQUIRE DFN AND APPOINTMENT DATE TIME
"RTN","SDECEPT",32,0)
 Q:'$G(DFN)
"RTN","SDECEPT",33,0)
 Q:'$G(ADT)
"RTN","SDECEPT",34,0)
 ;
"RTN","SDECEPT",35,0)
 D INIT
"RTN","SDECEPT",36,0)
 ;
"RTN","SDECEPT",37,0)
 ; INITIALIZE VARIABLES
"RTN","SDECEPT",38,0)
 S (PATN,RSSN,SSN,PAMS,LAB,XRAY,EKG,PCODE,POV,ATIEN)=""
"RTN","SDECEPT",39,0)
 S (PAMAT,CCODE,COLL,CLN,LOA,OTH,ECODE,EGIL,PAMSC)=""
"RTN","SDECEPT",40,0)
 S (ENROLC)=""
"RTN","SDECEPT",41,0)
 ;
"RTN","SDECEPT",42,0)
 ;PATN=Patient Name - Patient File [0,1]
"RTN","SDECEPT",43,0)
 ;RSSN=Raw Social Securty Number  - Patient File [0,9]
"RTN","SDECEPT",44,0)
 ;SSN=Formatted Social Security Number
"RTN","SDECEPT",45,0)
 ;PAMSC=Patient Appointment Multiple Status - PATIENT/APPOINTMENT MULTIPLE [0,2]
"RTN","SDECEPT",46,0)
 ;PAMS=Patient Appointment Multiple Status
"RTN","SDECEPT",47,0)
 ;LAB=Date/Time of Labs - PATIENT/APPOINTMENT MULTIPLE [0,3]
"RTN","SDECEPT",48,0)
 ;XRAY=Date/Time of x-ray - PATIENT/APPOINTMENT MULTIPLE [0,4]
"RTN","SDECEPT",49,0)
 ;EKG=Date/Time of EKG - PATIENT/APPOINTMENT MULTIPLE [0,5]
"RTN","SDECEPT",50,0)
 ;PCODE=Purpose of Visit Code - PATIENT/APPOINTMENT MULTIPLE [0,7]
"RTN","SDECEPT",51,0)
 ;POV=Purpose of Visit
"RTN","SDECEPT",52,0)
 ;ATIEN=Appointment Type IEN - PATIENT/APPOINTMENT MULTIPLE [0,16]
"RTN","SDECEPT",53,0)
 ;PAMAT=Patient Appointment Multiple Appointment Type
"RTN","SDECEPT",54,0)
 ;CCODE=Collateral Code - PATIENT/APPOINTMENT MULTIPLE [0,11]
"RTN","SDECEPT",55,0)
 ;COLL=Collateral Yes or No
"RTN","SDECEPT",56,0)
 ;CLN=Clinic Name - Hospital Location File [0,1]
"RTN","SDECEPT",57,0)
 ;LOA=Length of Appointment - Hospital Location Appointment Multiple [0,2]
"RTN","SDECEPT",58,0)
 ;ECODE=Eligibility Code - Hospital Location Appointment Multiple [0,10]
"RTN","SDECEPT",59,0)
 ;EGIL=Eligibility of Appointment
"RTN","SDECEPT",60,0)
 ;OCODE=Overbook Code - Hospital Location Appointment Multiple [QB]
"RTN","SDECEPT",61,0)
 ;OVB=Overbook
"RTN","SDECEPT",62,0)
 ;PATEN0=Patient Enrollment Clinic - Patient File Enrollment Clinic Multiple [B]
"RTN","SDECEPT",63,0)
 ;ENROLC=Enrolled in Clinic Yes/No
"RTN","SDECEPT",64,0)
 ;ERCNUM=Enrolled Clinic Number 
"RTN","SDECEPT",65,0)
 ;LPNUM=Loop Number 
"RTN","SDECEPT",66,0)
 ; 
"RTN","SDECEPT",67,0)
 ; -PATIENT FILE GLOBAL LOCATION 0
"RTN","SDECEPT",68,0)
 I PAT0'="" D
"RTN","SDECEPT",69,0)
 .S PATN=$P($G(PAT0),U,1)
"RTN","SDECEPT",70,0)
 .S RSSN=$P($G(PAT0),U,9) I RSSN'="" D
"RTN","SDECEPT",71,0)
 ..S SSN=$E(RSSN,1,3)_"-"_$E(RSSN,4,5)_"-"_$E(RSSN,6,9)
"RTN","SDECEPT",72,0)
 ;
"RTN","SDECEPT",73,0)
 ; -PATIENT/APPOINTMENT MULTIPLE GLOBAL LOCATION 0
"RTN","SDECEPT",74,0)
 I PAM0'="" D
"RTN","SDECEPT",75,0)
 .S PAMSC=$P($G(PAM0),U,2) I PAMSC'="" D
"RTN","SDECEPT",76,0)
 ..I PAMSC="N" S PAMS="No-Show"
"RTN","SDECEPT",77,0)
 ..I PAMSC="NA" S PAMS="No-Show & Auto Re-book"
"RTN","SDECEPT",78,0)
 ..I PAMSC="CA" S PAMS="Cancelled By Clinic & Auto Re-book"
"RTN","SDECEPT",79,0)
 ..I PAMSC="I" S PAMS="Inpatient Appointment"
"RTN","SDECEPT",80,0)
 ..I PAMSC="PC" S PAMS="Cancelled By Patient"
"RTN","SDECEPT",81,0)
 ..I PAMSC="PCA" S PAMS="Cancelled By Patient & Auto Re-book"
"RTN","SDECEPT",82,0)
 ..I PAMSC="NT" S PAMS="No Action Taken"
"RTN","SDECEPT",83,0)
 .S LAB=$P($G(PAM0),U,3)
"RTN","SDECEPT",84,0)
 .S XRAY=$P($G(PAM0),U,4)
"RTN","SDECEPT",85,0)
 .S EKG=$P($G(PAM0),U,5)
"RTN","SDECEPT",86,0)
 .S PCODE=$P($G(PAM0),U,7) I PCODE'="" D
"RTN","SDECEPT",87,0)
 ..S POV=$S(PCODE=1:"C&P",PCODE=2:"10-10",PCODE=3:"SCHEDULED",PCODE=4:"UNSCHEDULED",1:"UNKNOWN")
"RTN","SDECEPT",88,0)
 .S ATIEN=$P($G(PAM0),U,16) I ATIEN'="" D
"RTN","SDECEPT",89,0)
 ..S PAMAT=$$GET1^DIQ(409.1,ATIEN,.01)
"RTN","SDECEPT",90,0)
 .S CCODE=$P($G(PAM0),U,11)
"RTN","SDECEPT",91,0)
 .S COLL="No" I CCODE=1 S COLL="Yes"
"RTN","SDECEPT",92,0)
 ;
"RTN","SDECEPT",93,0)
 ; -HOSPITAL LOCATION FILE GLOBAL LOCATION 0
"RTN","SDECEPT",94,0)
 I HLF0'="" D
"RTN","SDECEPT",95,0)
 .S CLN=$P($G(HLF0),U,1)
"RTN","SDECEPT",96,0)
 ;
"RTN","SDECEPT",97,0)
 ; -HOSPITAL LOCATION/APPOINTMENT/PATIENT MULTIPLE GLOBAL LOCATION 0
"RTN","SDECEPT",98,0)
 I HLAP0'="" D
"RTN","SDECEPT",99,0)
 .S LOA=+$P($G(HLAP0),U,2)
"RTN","SDECEPT",100,0)
 .S OTH=$P($G(HLAP0),U,4)
"RTN","SDECEPT",101,0)
 .S ECODE=$P($G(HLAP0),U,10) I ECODE'="" D
"RTN","SDECEPT",102,0)
 ..S EGIL=$$GET1^DIQ(8,ECODE,.01)
"RTN","SDECEPT",103,0)
 ;
"RTN","SDECEPT",104,0)
 ; -HOSPITAL LOCATION/APPOINTMENT/PATIENT MULTIPLE GLOBAL LOCATION OB
"RTN","SDECEPT",105,0)
 S OCODE=$G(^SC(CLIEN,"S",ADT,1,HLAPIEN,"OB"))
"RTN","SDECEPT",106,0)
 S OVB="" I OCODE="O" S OVB="OVERBOOK"
"RTN","SDECEPT",107,0)
 ;
"RTN","SDECEPT",108,0)
 ; -PATIENT FILE ENROLLMENT CLINIC MULTIPLE
"RTN","SDECEPT",109,0)
 S ENROLC="No"
"RTN","SDECEPT",110,0)
 S LPNUM=0 F  S LPNUM=$O(^DPT(DFN,"DE",LPNUM)) Q:LPNUM=""  D
"RTN","SDECEPT",111,0)
 .S ERCNUM=$P($G(^DPT(DFN,"DE",LPNUM,0)),"^",1)
"RTN","SDECEPT",112,0)
 .Q:ERCNUM'=CLIEN
"RTN","SDECEPT",113,0)
 .I $P($G(^DPT(DFN,"DE",LPNUM,0)),"^",2)="" D
"RTN","SDECEPT",114,0)
 ..S ENROLC="Yes"
"RTN","SDECEPT",115,0)
 ..Q
"RTN","SDECEPT",116,0)
 ;
"RTN","SDECEPT",117,0)
 ; -CONVERT DATES TO EXTERNAL
"RTN","SDECEPT",118,0)
 S Y=ADT D D^DIQ S ADT=Y
"RTN","SDECEPT",119,0)
 I LAB'="" S Y=LAB D D^DIQ S LAB=Y
"RTN","SDECEPT",120,0)
 I XRAY'="" S Y=XRAY D D^DIQ S XRAY=Y
"RTN","SDECEPT",121,0)
 I EKG'="" S Y=EKG D D^DIQ S EKG=Y
"RTN","SDECEPT",122,0)
 ;
"RTN","SDECEPT",123,0)
 S RET=PATN_U_CLN_U_SSN_U_ADT_U_PAMS_U_POV_U_LOA_U_PAMAT_U_LAB_U_EGIL_U_XRAY_U_OVB_U_EKG_U_COLL_U_OTH_U_ENROLC
"RTN","SDECEPT",124,0)
 ;
"RTN","SDECEPT",125,0)
 D EXIT
"RTN","SDECEPT",126,0)
 Q
"RTN","SDECEPT",127,0)
 ;
"RTN","SDECEPT",128,0)
GETEVT(RET,DFN,ADT) ;
"RTN","SDECEPT",129,0)
 ; REQUIRE DFN AND APPOINTMENT DATE TIME
"RTN","SDECEPT",130,0)
 Q:'$G(DFN)
"RTN","SDECEPT",131,0)
 Q:'$G(ADT)
"RTN","SDECEPT",132,0)
 ;
"RTN","SDECEPT",133,0)
 D INIT
"RTN","SDECEPT",134,0)
 ;
"RTN","SDECEPT",135,0)
 ; INITIALIZE VARIABLES
"RTN","SDECEPT",136,0)
 S (AMUIEN,AMU,AMD,HLAPC,CID,CIUIEN,CIUN,COD,COUIEN,CREAC)=""
"RTN","SDECEPT",137,0)
 S (COUN,COED,NCD,NCUIEN,NCUN,CANREA,RBD,CANREM,AMUN)=""
"RTN","SDECEPT",138,0)
 ;
"RTN","SDECEPT",139,0)
 ;AMUIEN=Appointment Made User IEN - Hospital Location Appointment Multiple [0,6]
"RTN","SDECEPT",140,0)
 ;AMUN=Appointment Made User Name - New Person File Field .01
"RTN","SDECEPT",141,0)
 ;AMD=Appointment Made Date - Hospital Location Appointment Multiple [0,7]
"RTN","SDECEPT",142,0)
 ;HLAPC=Global location C from Hospital Location Appointment Multiple
"RTN","SDECEPT",143,0)
 ;CID=Check-in Date - Hospital Location Appointment Multiple [C,1]
"RTN","SDECEPT",144,0)
 ;CIUIEN=Check-in User IEN - Hospital Location Appointment Multiple [C,2]
"RTN","SDECEPT",145,0)
 ;CIUN=Check-in User Name - New Person File Field .01
"RTN","SDECEPT",146,0)
 ;COD=Check Out Date - Hospital Location Appointment Multiple [C,3]
"RTN","SDECEPT",147,0)
 ;COUIEN=Check Out User IEN - Hospital Location Appointment Multiple [C,4]
"RTN","SDECEPT",148,0)
 ;COUN=Check Out User Name - New Person File Field .01
"RTN","SDECEPT",149,0)
 ;COED=Check Out Entered Date - Hospital Location Appointment Multiple [C,3]
"RTN","SDECEPT",150,0)
 ;NCD=No-Show/Cancel Date - PATIENT/APPOINTMENT MULTIPLE [0,14]
"RTN","SDECEPT",151,0)
 ;NCUIEN=No-Show/Cancel User IEN - PATIENT/APPOINTMENT MULTIPLE [0,12]
"RTN","SDECEPT",152,0)
 ;NCUN=No-Show/Cancel User Name - New Person File Field .01
"RTN","SDECEPT",153,0)
 ;CREAC=Cancel Reason Code - PATIENT/APPOINTMENT MULTIPLE [0,15]
"RTN","SDECEPT",154,0)
 ;CANREA=Cancel Reason - CANCELLATION REASONS [0,1]
"RTN","SDECEPT",155,0)
 ;RBD=Rebook Date - PATIENT/APPOINTMENT MULTIPLE [0,10]
"RTN","SDECEPT",156,0)
 ;CANREM=Cancel Remarks - PATIENT/APPOINTMENT MULTIPLE [R,1]
"RTN","SDECEPT",157,0)
 ;
"RTN","SDECEPT",158,0)
 ; -HOSPITAL LOCATION/APPOINTMENT/PATIENT MULTIPLE GLOBAL LOCATION 0
"RTN","SDECEPT",159,0)
 I HLAP0'="" D
"RTN","SDECEPT",160,0)
 .S AMUIEN=$P($G(HLAP0),U,6) I AMUIEN'="" D
"RTN","SDECEPT",161,0)
 ..S AMUN=$$GET1^DIQ(200,AMUIEN,.01,"E")
"RTN","SDECEPT",162,0)
 .S AMD=$P($G(HLAP0),U,7)
"RTN","SDECEPT",163,0)
 ;
"RTN","SDECEPT",164,0)
 ; -HOSPITAL LOCATION/APPOINTMENT/PATIENT MULTIPLE GLOBAL LOCATION C
"RTN","SDECEPT",165,0)
 S HLAPC=$G(^SC(CLIEN,"S",ADT,1,HLAPIEN,"C")) I HLAPC'="" D
"RTN","SDECEPT",166,0)
 .S CID=$P($G(HLAPC),U,1) I CID'="" D
"RTN","SDECEPT",167,0)
 ..S CIUIEN=$P($G(HLAPC),U,2) I CIUIEN'="" D
"RTN","SDECEPT",168,0)
 ...S CIUN=$$GET1^DIQ(200,CIUIEN,.01,"E")
"RTN","SDECEPT",169,0)
 .S COD=$P($G(HLAPC),U,3) I COD'="" D
"RTN","SDECEPT",170,0)
 ..S COUIEN=$P($G(HLAPC),U,4) I COUIEN'="" D
"RTN","SDECEPT",171,0)
 ...S COUN=$$GET1^DIQ(200,COUIEN,.01,"E")
"RTN","SDECEPT",172,0)
 ..S COED=$P($G(HLAPC),U,6)
"RTN","SDECEPT",173,0)
 ;
"RTN","SDECEPT",174,0)
 ; -PATIENT/APPOINTMENT MULTIPLE GLOBAL LOCATION 0
"RTN","SDECEPT",175,0)
 I PAM0'="" D
"RTN","SDECEPT",176,0)
 .S NCD=$P($G(PAM0),U,14) I NCD'="" D
"RTN","SDECEPT",177,0)
 ..S NCUIEN=$P($G(PAM0),U,12) I NCUIEN'="" D
"RTN","SDECEPT",178,0)
 ...S NCUN=$$GET1^DIQ(200,NCUIEN,.01,"E")
"RTN","SDECEPT",179,0)
 .S CREAC=$P($G(PAM0),U,15) I NCUIEN'="" D
"RTN","SDECEPT",180,0)
 ..S CANREA=$$GET1^DIQ(409.2,CREAC,.01)
"RTN","SDECEPT",181,0)
 .S RBD=$P($G(PAM0),U,10)
"RTN","SDECEPT",182,0)
 I AMUN="" D
"RTN","SDECEPT",183,0)
 .S AMUIEN=$P($G(PAM0),U,18) I AMUIEN'="" D
"RTN","SDECEPT",184,0)
 ..S AMUN=$$GET1^DIQ(200,AMUIEN,.01,"E")
"RTN","SDECEPT",185,0)
 I AMD="" D
"RTN","SDECEPT",186,0)
 .S AMD=$P($G(PAM0),U,19)
"RTN","SDECEPT",187,0)
 ;
"RTN","SDECEPT",188,0)
 ; -PATIENT/APPOINTMENT MULTIPLE GLOBAL LOCATION R
"RTN","SDECEPT",189,0)
 S PAMR=$G(^DPT(DFN,"S",ADT,"R")) I PAMR'="" D
"RTN","SDECEPT",190,0)
 .S CANREM=$P($G(PAMR),U,1)
"RTN","SDECEPT",191,0)
 ;
"RTN","SDECEPT",192,0)
 ; -CONVERT DATES TO EXTERNAL
"RTN","SDECEPT",193,0)
 I AMD'="" S Y=AMD D D^DIQ S AMD=Y
"RTN","SDECEPT",194,0)
 I CID'="" S Y=CID D D^DIQ S CID=Y
"RTN","SDECEPT",195,0)
 I COD'="" S Y=COD D D^DIQ S COD=Y
"RTN","SDECEPT",196,0)
 I COED'="" S Y=COED D D^DIQ S COED=Y
"RTN","SDECEPT",197,0)
 I NCD'="" S Y=NCD D D^DIQ S NCD=Y
"RTN","SDECEPT",198,0)
 ;
"RTN","SDECEPT",199,0)
 S RET=AMD_U_AMUN_U_CID_U_CIUN_U_COD_U_COUN_U_COED_U_NCD_U_NCUN_U_CANREA_U_CANREM_U_RBD
"RTN","SDECEPT",200,0)
 ;
"RTN","SDECEPT",201,0)
 D EXIT
"RTN","SDECEPT",202,0)
 Q
"RTN","SDECEPT",203,0)
 ;
"RTN","SDECEPT",204,0)
GETWT(RET,DFN,ADT) ;
"RTN","SDECEPT",205,0)
 ; REQUIRE DFN AND APPOINTMENT DATE TIME
"RTN","SDECEPT",206,0)
 Q:'$G(DFN)
"RTN","SDECEPT",207,0)
 Q:'$G(ADT)
"RTN","SDECEPT",208,0)
 ;
"RTN","SDECEPT",209,0)
 D INIT
"RTN","SDECEPT",210,0)
 ;
"RTN","SDECEPT",211,0)
 S (REQTC,REQT,NATCODE,NAT,AMD,PAM1,CID,FUVCODE,FUV,CWT1,CWT2)=""
"RTN","SDECEPT",212,0)
 ;
"RTN","SDECEPT",213,0)
 ;REQTC=Request Type Code - Patient File Appointment Multiple [0,25]
"RTN","SDECEPT",214,0)
 ;REQT=Request Type
"RTN","SDECEPT",215,0)
 ;NATCODE=Next Available Type Code - Patient File Appointment Multiple [0,26]
"RTN","SDECEPT",216,0)
 ;NAT=Next Available Type
"RTN","SDECEPT",217,0)
 ;AMD=Appointment Made Date - Patient File Appointment Multiple [0,19]
"RTN","SDECEPT",218,0)
 ;PAM1=Global Location 1 of the Patient File Appointment Multiple
"RTN","SDECEPT",219,0)
 ;CID=Clinic Indicated Date/Preferred Date - Patient File Appointment Multiple [1,1]
"RTN","SDECEPT",220,0)
 ;FUVCODE=Follow-Up Visit Code 1=Yes 0=No - Patient File Appointment Multiple [1,2]
"RTN","SDECEPT",221,0)
 ;FUV=Follow-Up Visit
"RTN","SDECEPT",222,0)
 ;CWT1=Clinic Wait Time 1
"RTN","SDECEPT",223,0)
 ;CWT2=Clinic Wait Time 2
"RTN","SDECEPT",224,0)
 ;
"RTN","SDECEPT",225,0)
 ; -PATIENT/APPOINTMENT MULTIPLE GLOBAL LOCATION 0
"RTN","SDECEPT",226,0)
 I PAM0'="" D
"RTN","SDECEPT",227,0)
 .S REQTC=$P($G(PAM0),U,25) I REQTC'="" D
"RTN","SDECEPT",228,0)
 ..I REQTC="N" S REQT="'NEXT AVAILABLE' APPT."
"RTN","SDECEPT",229,0)
 ..I REQTC="C" S REQT="OTHER THAN 'NEXT AVA.' (CLINICIAN REQ.)"
"RTN","SDECEPT",230,0)
 ..I REQTC="P" S REQT="OTHER THAN 'NEXT AVA.' (PATIENT REQ.)"
"RTN","SDECEPT",231,0)
 ..I REQTC="W" S REQT="WALKIN APPT."
"RTN","SDECEPT",232,0)
 ..I REQTC="M" S REQT="MULTIPLE APPT. BOOKING"
"RTN","SDECEPT",233,0)
 ..I REQTC="A" S REQT="AUTO REBOOK"
"RTN","SDECEPT",234,0)
 ..I REQTC="O" S REQT="OTHER THAN 'NEXT AVA.' APPT."
"RTN","SDECEPT",235,0)
 .S NATCODE=$P($G(PAM0),U,26) I NATCODE'="" D
"RTN","SDECEPT",236,0)
 ..I NATCODE=0 S NAT="NOT INDICATED TO BE A 'NEXT AVA.' APPT."
"RTN","SDECEPT",237,0)
 ..I NATCODE=1 S NAT="'NEXT AVA.' APPT. INDICATED BY USER"
"RTN","SDECEPT",238,0)
 ..I NATCODE=3 S NAT="'NEXT AVA.' APPT. INDICATED BY CALCULATION"
"RTN","SDECEPT",239,0)
 ..I NATCODE=4 S NAT="'NEXT AVA.' APPT. INDICATED BY USER & CALCULATION"
"RTN","SDECEPT",240,0)
 .S AMD=$P($G(PAM0),U,19)
"RTN","SDECEPT",241,0)
 ;
"RTN","SDECEPT",242,0)
 ; -PATIENT/APPOINTMENT MULTIPLE GLOBAL LOCATION 1
"RTN","SDECEPT",243,0)
 S PAM1=$G(^DPT(DFN,"S",ADT,1)) I PAM1'="" D
"RTN","SDECEPT",244,0)
 .S CID=$P($G(PAM1),U,1)
"RTN","SDECEPT",245,0)
 .S FUVCODE=$P($G(PAM1),U,2)
"RTN","SDECEPT",246,0)
 .S FUV="No" I FUVCODE=1 S FUV="Yes"
"RTN","SDECEPT",247,0)
 ;
"RTN","SDECEPT",248,0)
 ; CALULATE WAIT TIMES
"RTN","SDECEPT",249,0)
 S (X,X1,X2)=""
"RTN","SDECEPT",250,0)
 I AMD'="" D
"RTN","SDECEPT",251,0)
 .S X1=ADT S X2=AMD D ^%DTC S CWT1=X
"RTN","SDECEPT",252,0)
 I CID'="" D
"RTN","SDECEPT",253,0)
 .S X1=ADT S X2=CID D ^%DTC S CWT2=X
"RTN","SDECEPT",254,0)
 ;
"RTN","SDECEPT",255,0)
 ; -CONVERT DATES TO EXTERNAL
"RTN","SDECEPT",256,0)
 I CID'="" S Y=CID D D^DIQ S CID=Y
"RTN","SDECEPT",257,0)
 ;
"RTN","SDECEPT",258,0)
 S RET=REQT_U_NAT_U_CID_U_FUV_U_CWT1_U_CWT2
"RTN","SDECEPT",259,0)
 ;
"RTN","SDECEPT",260,0)
 D EXIT
"RTN","SDECEPT",261,0)
 Q
"RTN","SDECEPT",262,0)
 ;
"RTN","SDECEPT",263,0)
 ;STATUS, LAST ADMIT/LODGER DATE, LAST DISCHARGE/LODGER DATE
"RTN","SDECEPT",264,0)
INP ;
"RTN","SDECEPT",265,0)
 Q:'$G(DFN)
"RTN","SDECEPT",266,0)
 ;
"RTN","SDECEPT",267,0)
 S (LADMT,LDIS,DNUM,STAT,SDST,SDSTA,REN,A)=""
"RTN","SDECEPT",268,0)
 I '$D(^DGPM("C",DFN)) S LSTAT="NO INPT./LOD. ACT." Q
"RTN","SDECEPT",269,0)
 ;
"RTN","SDECEPT",270,0)
 S VAIP("D")="L",VAIP("L")="" D INP^DGPMV10
"RTN","SDECEPT",271,0)
 S A=$S("^3^5^"[("^"_+DGPMVI(2)_"^"):0,1:+DGPMVI(2)),SDST=$S('A:"IN",1:"")_"ACTIVE ",SDSTA=$S("^4^5^"[("^"_+DGPMVI(2)_"^"):"LODGER",1:"INPATIENT")
"RTN","SDECEPT",272,0)
 S STAT="" S STAT=SDST_SDSTA
"RTN","SDECEPT",273,0)
 S LADMT="" S LADMT=$P($G(DGPMVI(13,1)),"^",2)
"RTN","SDECEPT",274,0)
 S DNUM="" S DNUM=$G(DGPMV1(17)) I DNUM'="" D
"RTN","SDECEPT",275,0)
 .S LDIS="" S LDIS=$$GET1^DIQ(405,DNUM,.01)
"RTN","SDECEPT",276,0)
 Q
"RTN","SDECEPT",277,0)
GETPTIN(RET,DFN,ADT) ;
"RTN","SDECEPT",278,0)
 ;REQUIRE DFN AND APPOINTMENT DATE TIME
"RTN","SDECEPT",279,0)
 Q:'$G(DFN)
"RTN","SDECEPT",280,0)
 Q:'$G(ADT)
"RTN","SDECEPT",281,0)
 ;
"RTN","SDECEPT",282,0)
 D INIT
"RTN","SDECEPT",283,0)
 ;
"RTN","SDECEPT",284,0)
 S (DOB,RSSN,SSN,SEX,MARSIEN,MARS,RELGP,PAT36,PELIG,POS,SADDR1,SWASIAC)=""
"RTN","SDECEPT",285,0)
 S (SADDR2,SADDR3,CITY,STATEN,STATE,CNTY,ADDR,PHN,CPHN,PGER,EMAIL,RADEXC)=""
"RTN","SDECEPT",286,0)
 S (RADEX,STAT,POW,LADMT,AOEXLC,AOEXL,LDIS,CMBTVC,CMBTV,CMBTVED,PROJ112)=""
"RTN","SDECEPT",287,0)
 S (PROCODE,SWASIA,PAT36,PAT11,PAT13,PAT36,PAT52,PAT321,PAT322,POWCODE)=""
"RTN","SDECEPT",288,0)
 S (RELGPN,PELIGN,POSN)=""
"RTN","SDECEPT",289,0)
 ;
"RTN","SDECEPT",290,0)
 ;DOB=Date Of Birth - Patient File [0,3]
"RTN","SDECEPT",291,0)
 ;RSSN=Raw Social Security Number - Patient File [0,9]
"RTN","SDECEPT",292,0)
 ;SSN=Formatted Social Security Number
"RTN","SDECEPT",293,0)
 ;SEX=Male or Female - Patient File [0,2]
"RTN","SDECEPT",294,0)
 ;MARSIEN=Marital Status IEN - Patient File [0,5] 
"RTN","SDECEPT",295,0)
 ;MARS=Marital Status - Marital Status File (11) Field .01
"RTN","SDECEPT",296,0)
 ;RELGPN=Religious Preference IEN - Patient File [0,8]
"RTN","SDECEPT",297,0)
 ;RELGP=Religious Preference - file 13 field .01 (Name)
"RTN","SDECEPT",298,0)
 ;PELIGN=Preimary Eligibility IEN - Patient File [.36,1]
"RTN","SDECEPT",299,0)
 ;PELIG=Primary Eligibility - File 8 field .01 (name) 
"RTN","SDECEPT",300,0)
 ;POSN=Period of Servic IEN
"RTN","SDECEPT",301,0)
 ;POS=Period of Service - File 21 Field .01 (Name)
"RTN","SDECEPT",302,0)
 ;SADDR1=Street Address 1 - Patient File [.11,1]
"RTN","SDECEPT",303,0)
 ;SADDR2=Street Address 2 - Patient File [.11,2]
"RTN","SDECEPT",304,0)
 ;SADDR3=Street Address 2 - Patient File [.11,3]
"RTN","SDECEPT",305,0)
 ;CITY=City - Patient File [.11,4]
"RTN","SDECEPT",306,0)
 ;STATEN=State IEN - Patient File [.11,5]
"RTN","SDECEPT",307,0)
 ;STATE=State - State File (5) Field .01
"RTN","SDECEPT",308,0)
 ;CNTYIEN=Country IEN - Patient File [.11,10]
"RTN","SDECEPT",309,0)
 ;CNTY=Country - Country Code File (779.004) Field .01
"RTN","SDECEPT",310,0)
 ;ADDR=Address
"RTN","SDECEPT",311,0)
 ;PHN=Phone Number - Patient File [.13,1]
"RTN","SDECEPT",312,0)
 ;CPHN=Cell Phone Number - Patient File [.13,4]
"RTN","SDECEPT",313,0)
 ;PGER=Pager Number - Patient File [.13,5]
"RTN","SDECEPT",314,0)
 ;EMAIL=Email Address - Patient File [.13,3]
"RTN","SDECEPT",315,0)
 ;RADEXC=Radiation Exposure CODE Y=Yes N=No U=Unknown - Patient File [.321,3]
"RTN","SDECEPT",316,0)
 ;RADEX=Radiation Exposure
"RTN","SDECEPT",317,0)
 ;
"RTN","SDECEPT",318,0)
 ;STAT=Status ???
"RTN","SDECEPT",319,0)
 ;
"RTN","SDECEPT",320,0)
 ;POWCODE=Prisoner Of War CODE Y=Yes N=No U=Unknown - Patient File [.52,5]
"RTN","SDECEPT",321,0)
 ;POW=Prisoner Of War
"RTN","SDECEPT",322,0)
 ;
"RTN","SDECEPT",323,0)
 ;LADMT=Last Admit/Lodger Date ???
"RTN","SDECEPT",324,0)
 ;
"RTN","SDECEPT",325,0)
 ;AOEXLC=Agent Orange Exposure Location CODE K=Korean DMZ V=Vietnam O=Other - Patient File [.321,13]
"RTN","SDECEPT",326,0)
 ;AOEXL=Agent Orange Exposure Location
"RTN","SDECEPT",327,0)
 ;
"RTN","SDECEPT",328,0)
 ;LDIS=Last Discharge/Lodger Date ???
"RTN","SDECEPT",329,0)
 ;
"RTN","SDECEPT",330,0)
 ;CMBTVC=Combat Veteran CODE Y=Yes N=No - Patient File [.52,11]
"RTN","SDECEPT",331,0)
 ;CMBTV=Combat Veteran
"RTN","SDECEPT",332,0)
 ;CMBTVED=Combat Veteran End Date - Patient File [.52,14]
"RTN","SDECEPT",333,0)
 ;PROCODE=Project 112/SHAD CODE 0=No 1=Yes - Patient File [.321,15]
"RTN","SDECEPT",334,0)
 ;PROJ112=Project 112/SHAD
"RTN","SDECEPT",335,0)
 ;SWASIAC=SW Asia Conditions Code Y=Yes N=No U=Unknown - Patient File [.322,13]
"RTN","SDECEPT",336,0)
 ;SWASIA=SW Asia Conditions
"RTN","SDECEPT",337,0)
 ; 
"RTN","SDECEPT",338,0)
 ; -PATIENT FILE GLOBAL LOCATION 0
"RTN","SDECEPT",339,0)
 I PAT0'="" D
"RTN","SDECEPT",340,0)
 .S DOB=$P($G(PAT0),U,3)
"RTN","SDECEPT",341,0)
 .S RSSN=$P($G(PAT0),U,9) I RSSN'="" D
"RTN","SDECEPT",342,0)
 ..S SSN=$E(RSSN,1,3)_"-"_$E(RSSN,4,5)_"-"_$E(RSSN,6,9)
"RTN","SDECEPT",343,0)
 .S SEXCODE=$P($G(PAT0),U,2) I SEXCODE'="" D
"RTN","SDECEPT",344,0)
 ..I SEXCODE="M" S SEX="Male"
"RTN","SDECEPT",345,0)
 ..I SEXCODE="F" S SEX="Female"
"RTN","SDECEPT",346,0)
 .S MARSIEN=$P($G(PAT0),U,5) I MARSIEN'="" D
"RTN","SDECEPT",347,0)
 ..S MARS=$$GET1^DIQ(11,MARSIEN,.01)
"RTN","SDECEPT",348,0)
 .S RELGPN=$P($G(PAT0),U,8) I RELGPN'="" D
"RTN","SDECEPT",349,0)
 ..S RELGP=$$GET1^DIQ(13,RELGPN,.01)
"RTN","SDECEPT",350,0)
 ;
"RTN","SDECEPT",351,0)
 ; -PATIENT FILE GLOBAL LOCATION .11
"RTN","SDECEPT",352,0)
 S PAT11=$G(^DPT(DFN,.11)) I PAT11'="" D
"RTN","SDECEPT",353,0)
 .S SADDR1=$P($G(PAT11),U,1)
"RTN","SDECEPT",354,0)
 .S SADDR2=$P($G(PAT11),U,2)
"RTN","SDECEPT",355,0)
 .S SADDR3=$P($G(PAT11),U,3)
"RTN","SDECEPT",356,0)
 .S CITY=$P($G(PAT11),U,4)
"RTN","SDECEPT",357,0)
 .S STATEN=$P($G(PAT11),U,5) I STATEN'="" D
"RTN","SDECEPT",358,0)
 ..S STATE=$$GET1^DIQ(5,STATEN,.01)
"RTN","SDECEPT",359,0)
 .S ZCODE=$P($G(PAT11),U,6)
"RTN","SDECEPT",360,0)
 .S CNTYIEN=$P($G(PAT11),U,10) I CNTYIEN'="" D
"RTN","SDECEPT",361,0)
 ..S CNTY=$$GET1^DIQ(779.004,CNTYIEN,.01)
"RTN","SDECEPT",362,0)
 .S SADDR=SADDR1 I SADDR2'="" D
"RTN","SDECEPT",363,0)
 ..S SADDR=SADDR1_" "_SADDR2 I SADDR3'="" D
"RTN","SDECEPT",364,0)
 ...S SADDR=SADDR1_" "_SADDR2_" "_SADDR3
"RTN","SDECEPT",365,0)
 .S ADDR=SADDR_" "_CITY_", "_STATE_" "_ZCODE_" "_CNTY
"RTN","SDECEPT",366,0)
 ;
"RTN","SDECEPT",367,0)
 ; -PATIENT FILE GLOBAL LOCATION .13
"RTN","SDECEPT",368,0)
 S PAT13=$G(^DPT(DFN,.13)) I PAT13'="" D
"RTN","SDECEPT",369,0)
 .S PHN=$P($G(PAT13),U,1)
"RTN","SDECEPT",370,0)
 .S CPHN=$P($G(PAT13),U,4)
"RTN","SDECEPT",371,0)
 .S PGER=$P($G(PAT13),U,5)
"RTN","SDECEPT",372,0)
 .S EMAIL=$P($G(PAT13),U,3)
"RTN","SDECEPT",373,0)
 ;
"RTN","SDECEPT",374,0)
 ; -PATIENT FILE GLOBAL LOCATION .36
"RTN","SDECEPT",375,0)
 S PAT36=$G(^DPT(DFN,.36)) I PAT36'="" D
"RTN","SDECEPT",376,0)
 .S PELIGN=$P($G(PAT36),U,1) I PELIGN'="" D
"RTN","SDECEPT",377,0)
 ..S PELIG=$$GET1^DIQ(8,RELGPN,.01,"E")
"RTN","SDECEPT",378,0)
 ;
"RTN","SDECEPT",379,0)
 ; -PATIENT FILE GLOBAL LOCATION .52
"RTN","SDECEPT",380,0)
 S PAT52=$G(^DPT(DFN,.52)) I PAT52'="" D
"RTN","SDECEPT",381,0)
 .S POWCODE=$P($G(PAT52),U,5) I POWCODE'="" D
"RTN","SDECEPT",382,0)
 ..I POWCODE="Y" S POW="Yes"
"RTN","SDECEPT",383,0)
 ..I POWCODE="N" S POW="No"
"RTN","SDECEPT",384,0)
 ..I POWCODE="U" S POW="Unknown"
"RTN","SDECEPT",385,0)
 .S CMBTVC=$P($G(PAT52),U,11) I CMBTVC'="" D
"RTN","SDECEPT",386,0)
 ..S CMBTV="No"
"RTN","SDECEPT",387,0)
 ..I CMBTVC="Y" S CMBTV="Yes"
"RTN","SDECEPT",388,0)
 .S CMBTVED=$P($G(PAT52),U,14) I CMBTV="No" D
"RTN","SDECEPT",389,0)
 ..S CMBTVED="N/A"
"RTN","SDECEPT",390,0)
 ;
"RTN","SDECEPT",391,0)
 ; -PATIENT FILE GLOBAL LOCATION .321
"RTN","SDECEPT",392,0)
 S PAT321=$G(^DPT(DFN,.52)) I PAT321'="" D
"RTN","SDECEPT",393,0)
 .S RADEXC=$P($G(PAT321),U,3) I RADEXC'="" D
"RTN","SDECEPT",394,0)
 ..I RADEXC="Y" S RADEX="Yes"
"RTN","SDECEPT",395,0)
 ..I RADEXC="N" S RADEX="No"
"RTN","SDECEPT",396,0)
 ..I RADEXC="U" S RADEX="Unknown"
"RTN","SDECEPT",397,0)
 .S AOEXLC=$P($G(PAT321),U,13) I AOEXLC'="" D
"RTN","SDECEPT",398,0)
 ..I AOEXLC="K" S AOEXL="Korean DMZ"
"RTN","SDECEPT",399,0)
 ..I AOEXLC="V" S AOEXL="Vietnam"
"RTN","SDECEPT",400,0)
 ..I AOEXLC="O" S AOEXL="Other (Not Korean DMZ or Vietnam)"
"RTN","SDECEPT",401,0)
 .S PROCODE=$P($G(PAT321),U,15) I PROCODE'="" D
"RTN","SDECEPT",402,0)
 ..I PROCODE=2 S PROJ112="No"
"RTN","SDECEPT",403,0)
 ..I PROCODE=1 S PROJ112="Yes"
"RTN","SDECEPT",404,0)
 ;
"RTN","SDECEPT",405,0)
 ; -PATIENT FILE GLOBAL LOCATION .322
"RTN","SDECEPT",406,0)
 S PAT322=$G(^DPT(DFN,.52)) I PAT322'="" D
"RTN","SDECEPT",407,0)
 .S SWASIAC=$P($G(PAT322),U,13) I SWASIAC'="" D
"RTN","SDECEPT",408,0)
 ..I SWASIAC="Y" S SWASIA="Yes"
"RTN","SDECEPT",409,0)
 ..I SWASIAC="N" S SWASIA="No"
"RTN","SDECEPT",410,0)
 ..I SWASIAC="U" S SWASIA="Unknown"
"RTN","SDECEPT",411,0)
 ;
"RTN","SDECEPT",412,0)
 ; -CONVERT DATES TO EXTERNAL
"RTN","SDECEPT",413,0)
 I DOB'="" S Y=DOB D D^DIQ S DOB=Y
"RTN","SDECEPT",414,0)
 ;
"RTN","SDECEPT",415,0)
 ; -PERIOD OF SERVICE
"RTN","SDECEPT",416,0)
 S (POSN,POS)="" S POSN=$$GET1^DIQ(2,DFN_",",.323,"I") I POSN'="" S POS=$$GET1^DIQ(21,POSN,.01,"E")
"RTN","SDECEPT",417,0)
 ;
"RTN","SDECEPT",418,0)
 ; -GET STAT, LADMT, LDIS
"RTN","SDECEPT",419,0)
 D INP
"RTN","SDECEPT",420,0)
 ; 
"RTN","SDECEPT",421,0)
 S RET=DOB_U_SSN_U_SEX_U_MARS_U_RELGP_U_PELIG_U_POS_U_ADDR_U_PHN_U_CPHN_U_PGER_U_EMAIL_U_RADEX_U_STAT_U_POW_U_LADMT_U_AOEXL_U_LDIS_U_CMBTV_U_CMBTVED_U_PROJ112_U_SWASIA
"RTN","SDECEPT",422,0)
 ;
"RTN","SDECEPT",423,0)
 D EXIT
"RTN","SDECEPT",424,0)
 Q
"RTN","SDECEPT",425,0)
 ;
"RTN","SDECEPT",426,0)
EXIT ;
"RTN","SDECEPT",427,0)
 K PAT0,PAM0,CLIEN,HLF0,HLAPIEN,HLAP0,RSSN,PAMS,PCODE,ATIEN,CCODE,ECODE,PAMSC
"RTN","SDECEPT",428,0)
 K AMUIEN,AMU,HLAPC,CIUIEN,COUIEN,NCUIEN,PAT36,SADDR1,SWASIAC,SADDR2,SADDR3
"RTN","SDECEPT",429,0)
 K CITY,STATEN,STATE,CNTY,RADEXC,AOEXLC,CMBTVC,PROCODE,PAT36,PAT11,PAT13,PAT52
"RTN","SDECEPT",430,0)
 K PAT321,PAT322,ENROLC
"RTN","SDECEPT",431,0)
 Q
"SEC","^DD",409.86,409.863,5,9)

"SEC","^DIC",409.86,409.86,0,"AUDIT")
@
"SEC","^DIC",409.86,409.86,0,"DD")
@
"SEC","^DIC",409.86,409.86,0,"DEL")
@
"SEC","^DIC",409.86,409.86,0,"LAYGO")
@
"SEC","^DIC",409.86,409.86,0,"RD")
@
"SEC","^DIC",409.86,409.86,0,"WR")
@
"VER")
8.0^22.2
"^DD",409.86,409.86,0)
FIELD^^1.1^7
"^DD",409.86,409.86,0,"DDA")
N
"^DD",409.86,409.86,0,"DT")
3170616
"^DD",409.86,409.86,0,"ID",1)
S %I=Y,Y=$S('$D(^(0)):"",$D(^SC(+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(44,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",409.86,409.86,0,"ID","W1.1")
S %I=Y,Y=$S('$D(^(0)):"",$D(^DIC(40.7,+$P(^(0),U,6),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(40.7,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",409.86,409.86,0,"ID","W2")
W "   ",$$NAKED^DIUTL("$$DATE^DIUTL($P(^(0),U,3))")
"^DD",409.86,409.86,0,"IX","B",409.86,.01)

"^DD",409.86,409.86,0,"NM","SDEC CONTACT")

"^DD",409.86,409.86,0,"VRPK")
SD
"^DD",409.86,409.86,.01,0)
PATIENT^RP2'^DPT(^0;1^Q
"^DD",409.86,409.86,.01,1,0)
^.1
"^DD",409.86,409.86,.01,1,1,0)
409.86^B
"^DD",409.86,409.86,.01,1,1,1)
S ^SDEC(409.86,"B",$E(X,1,30),DA)=""
"^DD",409.86,409.86,.01,1,1,2)
K ^SDEC(409.86,"B",$E(X,1,30),DA)
"^DD",409.86,409.86,.01,3)
Please enter current Patient!
"^DD",409.86,409.86,.01,21,0)
^^1^1^3170611^
"^DD",409.86,409.86,.01,21,1,0)
This is the Patient for this contact.
"^DD",409.86,409.86,.01,23,0)
^^1^1^3170611^
"^DD",409.86,409.86,.01,23,1,0)
Pointer to the Patient(#2) file.
"^DD",409.86,409.86,.01,"DT")
3170417
"^DD",409.86,409.86,1,0)
CLINIC^P44'^SC(^0;2^Q
"^DD",409.86,409.86,1,3)
Please enter contact clinic!
"^DD",409.86,409.86,1,21,0)
^^1^1^3170611^
"^DD",409.86,409.86,1,21,1,0)
This is the Clinic for this contact.
"^DD",409.86,409.86,1,23,0)
^^1^1^3170611^
"^DD",409.86,409.86,1,23,1,0)
Pointer to the Hospital Location(#44) file.
"^DD",409.86,409.86,1,"DT")
3170502
"^DD",409.86,409.86,1.1,0)
SERVICE^P40.7'^DIC(40.7,^0;6^Q
"^DD",409.86,409.86,1.1,3)
Please enter Service for this contact.
"^DD",409.86,409.86,1.1,21,0)
^.001^1^1^3170611^^
"^DD",409.86,409.86,1.1,21,1,0)
This is the Service for this contact.
"^DD",409.86,409.86,1.1,23,0)
^.001^1^1^3170611^^
"^DD",409.86,409.86,1.1,23,1,0)
Pointer to the CLINIC STOP(#40.7) file.
"^DD",409.86,409.86,1.1,"DT")
3170611
"^DD",409.86,409.86,2,0)
PREFERRED DATE^D^^0;3^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",409.86,409.86,2,3)
Please enter Preferred Date of appointment.
"^DD",409.86,409.86,2,21,0)
^^1^1^3170611^
"^DD",409.86,409.86,2,21,1,0)
This is the Preferred Date of Appointment for this contact.
"^DD",409.86,409.86,2,23,0)
^^2^2^3170611^
"^DD",409.86,409.86,2,23,1,0)
This date field contains the Preferred Date of Appointment for this 
"^DD",409.86,409.86,2,23,2,0)
contact.
"^DD",409.86,409.86,2,"DT")
3170611
"^DD",409.86,409.86,2.1,0)
REQUEST TYPE^RS^A:APPOINTMENT;C:CONSULT;R:RECALL;V:VETERAN;M:MOBILE;P:PROCEDURE;E:EWL;W:W2VA;RTC:RETURN TO CLINIC;^0;4^Q
"^DD",409.86,409.86,2.1,3)
Select the Request Type for this contact!
"^DD",409.86,409.86,2.1,21,0)
^^1^1^3170611^
"^DD",409.86,409.86,2.1,21,1,0)
This is the Request Type of this contact.
"^DD",409.86,409.86,2.1,23,0)
^^1^1^3170611^
"^DD",409.86,409.86,2.1,23,1,0)
Contact Request Type is a set of codes.
"^DD",409.86,409.86,2.1,"DT")
3170612
"^DD",409.86,409.86,2.2,0)
MAIN SEQUENCE^NJ2,0^^0;5^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",409.86,409.86,2.2,3)
Type a number between 0 and 99, 0 decimal digits.
"^DD",409.86,409.86,2.2,21,0)
^.001^1^1^3170611^^^
"^DD",409.86,409.86,2.2,21,1,0)
The Main Sequence field keeps track of the number of contacts.
"^DD",409.86,409.86,2.2,23,0)
^^2^2^3170611^
"^DD",409.86,409.86,2.2,23,1,0)
The Main Sequence is a numeric field that tracks the number contact of 
"^DD",409.86,409.86,2.2,23,2,0)
attempts.
"^DD",409.86,409.86,2.2,"DT")
3170429
"^DD",409.86,409.86,3,0)
DATE/TIME of CONTACT^409.863D^^1;0
"^DD",409.86,409.86,3,21,0)
^.001^1^1^3170612^^
"^DD",409.86,409.86,3,21,1,0)
This is the DATE/TIME multiple of the contact.
"^DD",409.86,409.86,3,23,0)
^^2^2^3170612^
"^DD",409.86,409.86,3,23,1,0)
DATE/TIME of CONTACT multiple tracks the number of contacts for this 
"^DD",409.86,409.86,3,23,2,0)
patient.
"^DD",409.86,409.863,0)
DATE/TIME of CONTACT SUB-FIELD^^6^7
"^DD",409.86,409.863,0,"DT")
3170612
"^DD",409.86,409.863,0,"IX","B",409.863,.01)

"^DD",409.86,409.863,0,"NM","DATE/TIME of CONTACT")

"^DD",409.86,409.863,0,"UP")
409.86
"^DD",409.86,409.863,.01,0)
DATE/TIME of CONTACT^MRD^^0;1^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",409.86,409.863,.01,1,0)
^.1^^-1
"^DD",409.86,409.863,.01,1,1,0)
409.863^B
"^DD",409.86,409.863,.01,1,1,1)
S ^SDEC(409.86,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",409.86,409.863,.01,1,1,2)
K ^SDEC(409.86,DA(1),1,"B",$E(X,1,30),DA)
"^DD",409.86,409.863,.01,3)
Please enter DATE/TIME of CONTACT.
"^DD",409.86,409.863,.01,21,0)
^^1^1^3170611^
"^DD",409.86,409.863,.01,21,1,0)
This is the Date/Time of contact for this patient.
"^DD",409.86,409.863,.01,23,0)
^^2^2^3170611^
"^DD",409.86,409.863,.01,23,1,0)
This is a date/time field used to record the date/time a contact is 
"^DD",409.86,409.863,.01,23,2,0)
entered.
"^DD",409.86,409.863,.01,"DT")
3170501
"^DD",409.86,409.863,1,0)
CONTACT TYPE^S^C:CALL;L:LETTER;^1;1^Q
"^DD",409.86,409.863,1,1,0)
^.1^^0
"^DD",409.86,409.863,1,3)
Select Contact Type!
"^DD",409.86,409.863,1,21,0)
^^1^1^3170611^
"^DD",409.86,409.863,1,21,1,0)
This field Contact Type is how the patient is contacted.
"^DD",409.86,409.863,1,23,0)
^^1^1^3170611^
"^DD",409.86,409.863,1,23,1,0)
This field Contact Type is a set of codes of how a patient is contacted.
"^DD",409.86,409.863,1,"DT")
3170611
"^DD",409.86,409.863,2,0)
COMMENTS^FJ80^^1;2^K:$L(X)>80!($L(X)<1) X
"^DD",409.86,409.863,2,3)
Answer must be 1-80 characters in length.
"^DD",409.86,409.863,2,21,0)
^^1^1^3170611^
"^DD",409.86,409.863,2,21,1,0)
This is any comments associated with this contact.
"^DD",409.86,409.863,2,23,0)
^^1^1^3170611^
"^DD",409.86,409.863,2,23,1,0)
This is a Free Text field used to enter comments for this contact. 
"^DD",409.86,409.863,2,"DT")
3170611
"^DD",409.86,409.863,3,0)
LEFT MESSAGE^S^0:NO;1:YES;^1;3^Q
"^DD",409.86,409.863,3,3)
Enter 'YES' if patient was left a message, else enter 'NO'.
"^DD",409.86,409.863,3,21,0)
^.001^1^1^3170612^^
"^DD",409.86,409.863,3,21,1,0)
This field is if the patient was left a message.
"^DD",409.86,409.863,3,23,0)
^.001^1^1^3170612^^
"^DD",409.86,409.863,3,23,1,0)
The Left Message field is a set of codes.
"^DD",409.86,409.863,3,"DT")
3170612
"^DD",409.86,409.863,4,0)
SEQUENCE^RNJ2,0^^1;4^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",409.86,409.863,4,3)
Type a number between 1 and 99, 0 decimal digits.
"^DD",409.86,409.863,4,21,0)
^^1^1^3170611^
"^DD",409.86,409.863,4,21,1,0)
This is the Sequence of this contact.
"^DD",409.86,409.863,4,23,0)
^^1^1^3170611^
"^DD",409.86,409.863,4,23,1,0)
This field sequence is a numeric field.
"^DD",409.86,409.863,4,"DT")
3170417
"^DD",409.86,409.863,5,0)
USER ENTERED CONTACT^P200'^VA(200,^1;5^Q
"^DD",409.86,409.863,5,3)
Enter user who entered the contact!
"^DD",409.86,409.863,5,21,0)
^^1^1^3170611^
"^DD",409.86,409.863,5,21,1,0)
This is the user who entered the contact.
"^DD",409.86,409.863,5,23,0)
^^1^1^3170611^
"^DD",409.86,409.863,5,23,1,0)
The User Entered Contact field is a pointer to file NEW PERSON(#200).
"^DD",409.86,409.863,5,"DT")
3170611
"^DD",409.86,409.863,6,0)
DATE/TIME ENTERED^D^^1;6^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",409.86,409.863,6,3)
Enter date/time contact was entered.
"^DD",409.86,409.863,6,21,0)
^.001^1^1^3170612^^
"^DD",409.86,409.863,6,21,1,0)
This is the date/time the contact was entered.
"^DD",409.86,409.863,6,23,0)
^.001^1^1^3170612^^
"^DD",409.86,409.863,6,23,1,0)
This is a date/time field for when the contact was entered.
"^DD",409.86,409.863,6,"DT")
3170612
"^DIC",409.86,409.86,0)
SDEC CONTACT^409.86
"^DIC",409.86,409.86,0,"GL")
^SDEC(409.86,
"^DIC",409.86,409.86,"%",0)
^1.005^^0
"^DIC",409.86,409.86,"%D",0)
^^4^4^3170612^
"^DIC",409.86,409.86,"%D",1,0)
This file is used by the VSE VS GUI. The file contains patient contact
"^DIC",409.86,409.86,"%D",2,0)
information regarding appointment follow up each time a patient is
"^DIC",409.86,409.86,"%D",3,0)
contacted. This file should not be edited using Fileman, the file is
"^DIC",409.86,409.86,"%D",4,0)
updated using the VSE VS GUI.
"^DIC",409.86,"B","SDEC CONTACT",409.86)

"BLD",10347,6)
^550
**END**
**END**

