Released SD*5.3*659 SEQ #548
Extracted from mail message
**KIDS**:SD*5.3*659^

**INSTALL NAME**
SD*5.3*659
"BLD",10299,0)
SD*5.3*659^SCHEDULING^0^3170315^y
"BLD",10299,1,0)
^^50^50^3170315^
"BLD",10299,1,1,0)
This patch will delete the "trigger" cross references listed below and
"BLD",10299,1,2,0)
delete data in the PCMM HL7 EVENT FILE.
"BLD",10299,1,3,0)
 
"BLD",10299,1,4,0)
Files:
"BLD",10299,1,5,0)
PATIENT TEAM POSITION ASSIGNMENT FILE (#404.43)
"BLD",10299,1,6,0)
.01    PATIENT TEAM ASSIGNMENT
"BLD",10299,1,7,0)
  Xref-AEVENT1
"BLD",10299,1,8,0)
.02    TEAM POSITION
"BLD",10299,1,9,0)
  Xref-AEVENT3
"BLD",10299,1,10,0)
.03    POSITION ASSIGNED DATE
"BLD",10299,1,11,0)
  Xref-AEVENT4
"BLD",10299,1,12,0)
.04    POSITION UNASSIGNED DATE
"BLD",10299,1,13,0)
  Xref-AEVENT5
"BLD",10299,1,14,0)
.05    PC ROLE
"BLD",10299,1,15,0)
  Xref-AEVENT2
"BLD",10299,1,16,0)
 
"BLD",10299,1,17,0)
POSITION ASSIGNMENT HISTORY FILE (#404.52)
"BLD",10299,1,18,0)
.01    TEAM POSITION
"BLD",10299,1,19,0)
  Xref-AEVENT1
"BLD",10299,1,20,0)
.02    EFFECTIVE DATE
"BLD",10299,1,21,0)
  Xref-AEVENT2
"BLD",10299,1,22,0)
.03    PRACTITIONER
"BLD",10299,1,23,0)
  Xref-AEVENT3
"BLD",10299,1,24,0)
.04    STATUS
"BLD",10299,1,25,0)
  Xref-ASTATUS
"BLD",10299,1,26,0)
.09    FTEE EQUIVALENT
"BLD",10299,1,27,0)
  Xref-AFTEE
"BLD",10299,1,28,0)
 
"BLD",10299,1,29,0)
PRECEPTOR ASSIGNMENT HISTORY FILE (#404.53)
"BLD",10299,1,30,0)
.01    TEAM POSITION
"BLD",10299,1,31,0)
  Xref-AEVENT1
"BLD",10299,1,32,0)
.02    EFFECTIVE DATE
"BLD",10299,1,33,0)
  Xref-AEVENT2
"BLD",10299,1,34,0)
.04    STATUS
"BLD",10299,1,35,0)
  Xref-AEVENT3
"BLD",10299,1,36,0)
.06    PRECEPTOR TEAM POSITION
"BLD",10299,1,37,0)
  Xref-AEVENT4
"BLD",10299,1,38,0)
 
"BLD",10299,1,39,0)
TEAM POSITION FILE (#404.57)
"BLD",10299,1,40,0)
.04    POSSIBLE PRIMARY PRACTITIONER?
"BLD",10299,1,41,0)
  FIELD INDEX: AE (#208)
"BLD",10299,1,42,0)
.08    MAX NUMBER OF PATIENTS
"BLD",10299,1,43,0)
  FIELD INDEX: AD (#207)
"BLD",10299,1,44,0)
 
"BLD",10299,1,45,0)
TEAM POSITION HISTORY FILE (#404.59)
"BLD",10299,1,46,0)
.03    STATUS
"BLD",10299,1,47,0)
  FIELD INDEX: AC (#209)
"BLD",10299,1,48,0)
 
"BLD",10299,1,49,0)
The entry points in routine SCMCHLX called by the cross references and
"BLD",10299,1,50,0)
indexes were modified to exit immediately.
"BLD",10299,4,0)
^9.64PA^^
"BLD",10299,6.3)
5
"BLD",10299,"ABPKG")
n
"BLD",10299,"INIT")
EN^SD659PST
"BLD",10299,"KRN",0)
^9.67PA^779.2^20
"BLD",10299,"KRN",.4,0)
.4
"BLD",10299,"KRN",.401,0)
.401
"BLD",10299,"KRN",.402,0)
.402
"BLD",10299,"KRN",.403,0)
.403
"BLD",10299,"KRN",.5,0)
.5
"BLD",10299,"KRN",.84,0)
.84
"BLD",10299,"KRN",3.6,0)
3.6
"BLD",10299,"KRN",3.8,0)
3.8
"BLD",10299,"KRN",9.2,0)
9.2
"BLD",10299,"KRN",9.8,0)
9.8
"BLD",10299,"KRN",9.8,"NM",0)
^9.68A^3^2
"BLD",10299,"KRN",9.8,"NM",1,0)
SCMCHLX^^0^B5611206
"BLD",10299,"KRN",9.8,"NM",3,0)
SD659PST^^0^B24793542
"BLD",10299,"KRN",9.8,"NM","B","SCMCHLX",1)

"BLD",10299,"KRN",9.8,"NM","B","SD659PST",3)

"BLD",10299,"KRN",19,0)
19
"BLD",10299,"KRN",19.1,0)
19.1
"BLD",10299,"KRN",101,0)
101
"BLD",10299,"KRN",409.61,0)
409.61
"BLD",10299,"KRN",771,0)
771
"BLD",10299,"KRN",779.2,0)
779.2
"BLD",10299,"KRN",870,0)
870
"BLD",10299,"KRN",8989.51,0)
8989.51
"BLD",10299,"KRN",8989.52,0)
8989.52
"BLD",10299,"KRN",8994,0)
8994
"BLD",10299,"KRN","B",.4,.4)

"BLD",10299,"KRN","B",.401,.401)

"BLD",10299,"KRN","B",.402,.402)

"BLD",10299,"KRN","B",.403,.403)

"BLD",10299,"KRN","B",.5,.5)

"BLD",10299,"KRN","B",.84,.84)

"BLD",10299,"KRN","B",3.6,3.6)

"BLD",10299,"KRN","B",3.8,3.8)

"BLD",10299,"KRN","B",9.2,9.2)

"BLD",10299,"KRN","B",9.8,9.8)

"BLD",10299,"KRN","B",19,19)

"BLD",10299,"KRN","B",19.1,19.1)

"BLD",10299,"KRN","B",101,101)

"BLD",10299,"KRN","B",409.61,409.61)

"BLD",10299,"KRN","B",771,771)

"BLD",10299,"KRN","B",779.2,779.2)

"BLD",10299,"KRN","B",870,870)

"BLD",10299,"KRN","B",8989.51,8989.51)

"BLD",10299,"KRN","B",8989.52,8989.52)

"BLD",10299,"KRN","B",8994,8994)

"BLD",10299,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",10299,"QUES",0)
^9.62^^
"BLD",10299,"REQB",0)
^9.611^3^3
"BLD",10299,"REQB",1,0)
SD*5.3*272^1
"BLD",10299,"REQB",2,0)
SD*5.3*603^1
"BLD",10299,"REQB",3,0)
SD*5.3*624^1
"BLD",10299,"REQB","B","SD*5.3*272",1)

"BLD",10299,"REQB","B","SD*5.3*603",2)

"BLD",10299,"REQB","B","SD*5.3*624",3)

"INIT")
EN^SD659PST
"MBREQ")
0
"PKG",48,-1)
1^1
"PKG",48,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",48,20,0)
^9.402P^^
"PKG",48,22,0)
^9.49I^1^1
"PKG",48,22,1,0)
5.3^3051119^2960613
"PKG",48,22,1,"PAH",1,0)
659^3170315
"PKG",48,22,1,"PAH",1,1,0)
^^50^50^3170315
"PKG",48,22,1,"PAH",1,1,1,0)
This patch will delete the "trigger" cross references listed below and
"PKG",48,22,1,"PAH",1,1,2,0)
delete data in the PCMM HL7 EVENT FILE.
"PKG",48,22,1,"PAH",1,1,3,0)
 
"PKG",48,22,1,"PAH",1,1,4,0)
Files:
"PKG",48,22,1,"PAH",1,1,5,0)
PATIENT TEAM POSITION ASSIGNMENT FILE (#404.43)
"PKG",48,22,1,"PAH",1,1,6,0)
.01    PATIENT TEAM ASSIGNMENT
"PKG",48,22,1,"PAH",1,1,7,0)
  Xref-AEVENT1
"PKG",48,22,1,"PAH",1,1,8,0)
.02    TEAM POSITION
"PKG",48,22,1,"PAH",1,1,9,0)
  Xref-AEVENT3
"PKG",48,22,1,"PAH",1,1,10,0)
.03    POSITION ASSIGNED DATE
"PKG",48,22,1,"PAH",1,1,11,0)
  Xref-AEVENT4
"PKG",48,22,1,"PAH",1,1,12,0)
.04    POSITION UNASSIGNED DATE
"PKG",48,22,1,"PAH",1,1,13,0)
  Xref-AEVENT5
"PKG",48,22,1,"PAH",1,1,14,0)
.05    PC ROLE
"PKG",48,22,1,"PAH",1,1,15,0)
  Xref-AEVENT2
"PKG",48,22,1,"PAH",1,1,16,0)
 
"PKG",48,22,1,"PAH",1,1,17,0)
POSITION ASSIGNMENT HISTORY FILE (#404.52)
"PKG",48,22,1,"PAH",1,1,18,0)
.01    TEAM POSITION
"PKG",48,22,1,"PAH",1,1,19,0)
  Xref-AEVENT1
"PKG",48,22,1,"PAH",1,1,20,0)
.02    EFFECTIVE DATE
"PKG",48,22,1,"PAH",1,1,21,0)
  Xref-AEVENT2
"PKG",48,22,1,"PAH",1,1,22,0)
.03    PRACTITIONER
"PKG",48,22,1,"PAH",1,1,23,0)
  Xref-AEVENT3
"PKG",48,22,1,"PAH",1,1,24,0)
.04    STATUS
"PKG",48,22,1,"PAH",1,1,25,0)
  Xref-ASTATUS
"PKG",48,22,1,"PAH",1,1,26,0)
.09    FTEE EQUIVALENT
"PKG",48,22,1,"PAH",1,1,27,0)
  Xref-AFTEE
"PKG",48,22,1,"PAH",1,1,28,0)
 
"PKG",48,22,1,"PAH",1,1,29,0)
PRECEPTOR ASSIGNMENT HISTORY FILE (#404.53)
"PKG",48,22,1,"PAH",1,1,30,0)
.01    TEAM POSITION
"PKG",48,22,1,"PAH",1,1,31,0)
  Xref-AEVENT1
"PKG",48,22,1,"PAH",1,1,32,0)
.02    EFFECTIVE DATE
"PKG",48,22,1,"PAH",1,1,33,0)
  Xref-AEVENT2
"PKG",48,22,1,"PAH",1,1,34,0)
.04    STATUS
"PKG",48,22,1,"PAH",1,1,35,0)
  Xref-AEVENT3
"PKG",48,22,1,"PAH",1,1,36,0)
.06    PRECEPTOR TEAM POSITION
"PKG",48,22,1,"PAH",1,1,37,0)
  Xref-AEVENT4
"PKG",48,22,1,"PAH",1,1,38,0)
 
"PKG",48,22,1,"PAH",1,1,39,0)
TEAM POSITION FILE (#404.57)
"PKG",48,22,1,"PAH",1,1,40,0)
.04    POSSIBLE PRIMARY PRACTITIONER?
"PKG",48,22,1,"PAH",1,1,41,0)
  FIELD INDEX: AE (#208)
"PKG",48,22,1,"PAH",1,1,42,0)
.08    MAX NUMBER OF PATIENTS
"PKG",48,22,1,"PAH",1,1,43,0)
  FIELD INDEX: AD (#207)
"PKG",48,22,1,"PAH",1,1,44,0)
 
"PKG",48,22,1,"PAH",1,1,45,0)
TEAM POSITION HISTORY FILE (#404.59)
"PKG",48,22,1,"PAH",1,1,46,0)
.03    STATUS
"PKG",48,22,1,"PAH",1,1,47,0)
  FIELD INDEX: AC (#209)
"PKG",48,22,1,"PAH",1,1,48,0)
 
"PKG",48,22,1,"PAH",1,1,49,0)
The entry points in routine SCMCHLX called by the cross references and
"PKG",48,22,1,"PAH",1,1,50,0)
indexes were modified to exit immediately.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","SCMCHLX")
0^1^B5611206^B3910159
"RTN","SCMCHLX",1,0)
SCMCHLX ;BP/DJB,ALB/ART - PCMM HL7 EVENT File Xref APIs ;12/06/2016
"RTN","SCMCHLX",2,0)
 ;;5.3;Scheduling;**177,264,272,659**;May 01, 1999;Build 5
"RTN","SCMCHLX",3,0)
 ;
"RTN","SCMCHLX",4,0)
 ;Reference routine: SCDXFX01
"RTN","SCMCHLX",5,0)
AACXMIT(IFN,SET,OLDEVPTR) ;Logic for AACXMIT* xrefs on PCMM HL7 EVENT
"RTN","SCMCHLX",6,0)
 ;                 file (#404.48).
"RTN","SCMCHLX",7,0)
 ;
"RTN","SCMCHLX",8,0)
 ; Input: IFN: Pointer to entry in file
"RTN","SCMCHLX",9,0)
 ;        SET: 1 = Set xref
"RTN","SCMCHLX",10,0)
 ;             0 = Kill xref
"RTN","SCMCHLX",11,0)
 ;            -1 = Check value of TRANSMISSION REQUIRED field (#.04).
"RTN","SCMCHLX",12,0)
 ;                   If "YES"- Set xref
"RTN","SCMCHLX",13,0)
 ;                   If "NO" - Kill xref
"RTN","SCMCHLX",14,0)
 ;   OLDEVPTR: Previous value of EVENT POINTER field (#.07).
"RTN","SCMCHLX",15,0)
 ;             Only valid when KILLing xref is due to data in this
"RTN","SCMCHLX",16,0)
 ;             field changing.
"RTN","SCMCHLX",17,0)
 ;Output: None
"RTN","SCMCHLX",18,0)
 ;
"RTN","SCMCHLX",19,0)
 ;Check input
"RTN","SCMCHLX",20,0)
 Q:'$G(IFN)
"RTN","SCMCHLX",21,0)
 Q:'$D(^SCPT(404.48,IFN))
"RTN","SCMCHLX",22,0)
 S:$G(SET)="" SET=-1
"RTN","SCMCHLX",23,0)
 S OLDEVPTR=+$G(OLDEVPTR)
"RTN","SCMCHLX",24,0)
 ;
"RTN","SCMCHLX",25,0)
 ;Declare variables
"RTN","SCMCHLX",26,0)
 NEW EVPTR,EVENT,ND,XMIT
"RTN","SCMCHLX",27,0)
 ;
"RTN","SCMCHLX",28,0)
 ;Get data
"RTN","SCMCHLX",29,0)
 S ND=$G(^SCPT(404.48,IFN,0)) ;....Get zero node
"RTN","SCMCHLX",30,0)
 S XMIT=+$P(ND,"^",3) ;............Transmission Required field
"RTN","SCMCHLX",31,0)
 S EVPTR=$P(ND,"^",7) ;............Event Pointer field
"RTN","SCMCHLX",32,0)
 I 'SET,OLDEVPTR S EVPTR=OLDEVPTR ;Use old Event Pointer if killing
"RTN","SCMCHLX",33,0)
 ;                                 due to value changing.
"RTN","SCMCHLX",34,0)
 Q:'EVPTR  ;.......................Quit if no Event Pointer
"RTN","SCMCHLX",35,0)
 ;
"RTN","SCMCHLX",36,0)
 ;Set/Kill logic based on value of TRANSMISSION REQUIRED
"RTN","SCMCHLX",37,0)
 I SET=-1 S SET=$S(XMIT=1:1,1:0)
"RTN","SCMCHLX",38,0)
 ;
"RTN","SCMCHLX",39,0)
 ;Set/Kill xref
"RTN","SCMCHLX",40,0)
 I SET S ^SCPT(404.48,"AACXMIT",EVPTR,IFN)="" ;..Set xref
"RTN","SCMCHLX",41,0)
 E  KILL ^SCPT(404.48,"AACXMIT",EVPTR,IFN) ;.....Kill xref
"RTN","SCMCHLX",42,0)
 Q
"RTN","SCMCHLX",43,0)
 ;
"RTN","SCMCHLX",44,0)
TXREF(IFN) ;Logic for AEVENT* xrefs on TEAM file. Create entry in
"RTN","SCMCHLX",45,0)
 ;  PCMM HL7 EVENT file.
"RTN","SCMCHLX",46,0)
 ;
"RTN","SCMCHLX",47,0)
 ;***THIS CALL NOT USED***
"RTN","SCMCHLX",48,0)
 ;bp/djb 6/15/99
"RTN","SCMCHLX",49,0)
 ;No longer sending Primary Care Team data to Austin.
"RTN","SCMCHLX",50,0)
 ;
"RTN","SCMCHLX",51,0)
 D TXREF^SCMCHLX1($G(IFN))
"RTN","SCMCHLX",52,0)
 Q
"RTN","SCMCHLX",53,0)
 ;
"RTN","SCMCHLX",54,0)
PTXREF(IFN,OLDTYPE) ;Logic for AEVENT* xrefs on PATIENT TEAM ASSIGN file.
"RTN","SCMCHLX",55,0)
 ;           Create entry in PCMM HL7 EVENT file.
"RTN","SCMCHLX",56,0)
 ;
"RTN","SCMCHLX",57,0)
 ;***THIS CALL NOT USED***
"RTN","SCMCHLX",58,0)
 ;bp/djb 6/15/99
"RTN","SCMCHLX",59,0)
 ;No longer sending Primary Care Team data to Austin.
"RTN","SCMCHLX",60,0)
 ;
"RTN","SCMCHLX",61,0)
 D PTXREF^SCMCHLX1($G(IFN),$G(OLDTYPE))
"RTN","SCMCHLX",62,0)
 Q
"RTN","SCMCHLX",63,0)
 ;
"RTN","SCMCHLX",64,0)
PTPXREF(IFN,OLDROLE) ;Logic for AEVENT* xrefs on PATIENT TEAM POSITION
"RTN","SCMCHLX",65,0)
 ;            ASSIGN file. Create entry in PCMM HL7 EVENT file.
"RTN","SCMCHLX",66,0)
 QUIT  ;disable SD*5.3*659, HL7 no longer used by PCMM
"RTN","SCMCHLX",67,0)
 D PTPXREF^SCMCHLX1($G(IFN),$G(OLDROLE))
"RTN","SCMCHLX",68,0)
 Q
"RTN","SCMCHLX",69,0)
 ;
"RTN","SCMCHLX",70,0)
POSHXREF(IFN) ;Logic for AEVENT* xrefs on POSITION ASSIGNMENT HISTORY file.
"RTN","SCMCHLX",71,0)
 ;     Create entry in PCMM HL7 EVENT file.
"RTN","SCMCHLX",72,0)
 QUIT  ;disable SD*5.3*659, HL7 no longer used by PCMM
"RTN","SCMCHLX",73,0)
 D POSHXREF^SCMCHLX1($G(IFN))
"RTN","SCMCHLX",74,0)
 Q
"RTN","SCMCHLX",75,0)
 ;
"RTN","SCMCHLX",76,0)
PREHXREF(IFN) ;Logic for AEVENT* xrefs on PRECEPTOR ASSIGNMENT HISTORY file.
"RTN","SCMCHLX",77,0)
 ;     Create entry in PCMM HL7 EVENT file.
"RTN","SCMCHLX",78,0)
 QUIT  ;disable SD*5.3*659, HL7 no longer used by PCMM
"RTN","SCMCHLX",79,0)
 D PREHXREF^SCMCHLX1($G(IFN))
"RTN","SCMCHLX",80,0)
 Q
"RTN","SCMCHLX",81,0)
POSBXREF(IFN,FILE) ;Logic for Bookable Hour Cross reference
"RTN","SCMCHLX",82,0)
 ;Create entry in PCMM HL7 EVENT file
"RTN","SCMCHLX",83,0)
 QUIT  ;disable SD*5.3*659, HL7 no longer used by PCMM
"RTN","SCMCHLX",84,0)
 D POSBXREF^SCMCHLX1(+$G(IFN),$G(FILE))
"RTN","SCMCHLX",85,0)
 Q
"RTN","SD659PST")
0^3^B24793542^n/a
"RTN","SD659PST",1,0)
SD659PST ;ALB/ART - SD*5.3*659 Post Install ;02/16/2017
"RTN","SD659PST",2,0)
 ;;5.3;Scheduling;**659**;Aug 13, 1993;Build 5
"RTN","SD659PST",3,0)
 ;
"RTN","SD659PST",4,0)
 QUIT
"RTN","SD659PST",5,0)
 ;
"RTN","SD659PST",6,0)
 ;Public, Supported ICRs
"RTN","SD659PST",7,0)
 ; #2916  - Data Base Server API: DD Modification Utilities (DDMOD)
"RTN","SD659PST",8,0)
 ; #10013 - Classic FileMan API: Entry Deletion & File Reindexing (DIK)
"RTN","SD659PST",9,0)
 ; #10141 - XPDUTL - Public APIs for KIDS
"RTN","SD659PST",10,0)
 ;
"RTN","SD659PST",11,0)
 ;Private ICRs
"RTN","SD659PST",12,0)
 ; #6966 - READ ACCESS TO DD(404.43
"RTN","SD659PST",13,0)
 ; #6721 - READ ACCESS TO DD(404.52
"RTN","SD659PST",14,0)
 ; #6722 - READ ACCESS TO DD(404.53
"RTN","SD659PST",15,0)
 ;
"RTN","SD659PST",16,0)
EN ;
"RTN","SD659PST",17,0)
 ;
"RTN","SD659PST",18,0)
 ;delete cross references and indexes
"RTN","SD659PST",19,0)
 DO DEL
"RTN","SD659PST",20,0)
 ;delete records in PCMM HL7 EVENT file
"RTN","SD659PST",21,0)
 DO DELEVNTS
"RTN","SD659PST",22,0)
 ;
"RTN","SD659PST",23,0)
 QUIT
"RTN","SD659PST",24,0)
 ;
"RTN","SD659PST",25,0)
DEL ;
"RTN","SD659PST",26,0)
 ;
"RTN","SD659PST",27,0)
 NEW SDFILE,SDFIELD,SDXREFNM,SDINDEX
"RTN","SD659PST",28,0)
 ;
"RTN","SD659PST",29,0)
 ;Delete the AEVENT1 Xref in 404.43
"RTN","SD659PST",30,0)
 SET SDFILE=404.43
"RTN","SD659PST",31,0)
 SET SDFIELD=.01
"RTN","SD659PST",32,0)
 SET SDXREFNM="AEVENT1"
"RTN","SD659PST",33,0)
 DO DELXREF(SDFILE,SDFIELD,SDXREFNM)
"RTN","SD659PST",34,0)
 ;
"RTN","SD659PST",35,0)
 ;Delete the AEVENT3 Xref in 404.43
"RTN","SD659PST",36,0)
 SET SDFILE=404.43
"RTN","SD659PST",37,0)
 SET SDFIELD=.02
"RTN","SD659PST",38,0)
 SET SDXREFNM="AEVENT3"
"RTN","SD659PST",39,0)
 DO DELXREF(SDFILE,SDFIELD,SDXREFNM)
"RTN","SD659PST",40,0)
 ;
"RTN","SD659PST",41,0)
 ;Delete the AEVENT4 Xref in 404.43
"RTN","SD659PST",42,0)
 SET SDFILE=404.43
"RTN","SD659PST",43,0)
 SET SDFIELD=.03
"RTN","SD659PST",44,0)
 SET SDXREFNM="AEVENT4"
"RTN","SD659PST",45,0)
 DO DELXREF(SDFILE,SDFIELD,SDXREFNM)
"RTN","SD659PST",46,0)
 ;
"RTN","SD659PST",47,0)
 ;Delete the AEVENT5 Xref in 404.43
"RTN","SD659PST",48,0)
 SET SDFILE=404.43
"RTN","SD659PST",49,0)
 SET SDFIELD=.04
"RTN","SD659PST",50,0)
 SET SDXREFNM="AEVENT5"
"RTN","SD659PST",51,0)
 DO DELXREF(SDFILE,SDFIELD,SDXREFNM)
"RTN","SD659PST",52,0)
 ;
"RTN","SD659PST",53,0)
 ;Delete the AEVENT2 Xref in 404.43
"RTN","SD659PST",54,0)
 SET SDFILE=404.43
"RTN","SD659PST",55,0)
 SET SDFIELD=.05
"RTN","SD659PST",56,0)
 SET SDXREFNM="AEVENT2"
"RTN","SD659PST",57,0)
 DO DELXREF(SDFILE,SDFIELD,SDXREFNM)
"RTN","SD659PST",58,0)
 ;
"RTN","SD659PST",59,0)
 ;Delete the AEVENT1 Xref in 404.52
"RTN","SD659PST",60,0)
 SET SDFILE=404.52
"RTN","SD659PST",61,0)
 SET SDFIELD=.01
"RTN","SD659PST",62,0)
 SET SDXREFNM="AEVENT1"
"RTN","SD659PST",63,0)
 DO DELXREF(SDFILE,SDFIELD,SDXREFNM)
"RTN","SD659PST",64,0)
 ;
"RTN","SD659PST",65,0)
 ;Delete the AEVENT2 Xref in 404.52
"RTN","SD659PST",66,0)
 SET SDFILE=404.52
"RTN","SD659PST",67,0)
 SET SDFIELD=.02
"RTN","SD659PST",68,0)
 SET SDXREFNM="AEVENT2"
"RTN","SD659PST",69,0)
 DO DELXREF(SDFILE,SDFIELD,SDXREFNM)
"RTN","SD659PST",70,0)
 ;
"RTN","SD659PST",71,0)
 ;Delete the AEVENT3 Xref in 404.52
"RTN","SD659PST",72,0)
 SET SDFILE=404.52
"RTN","SD659PST",73,0)
 SET SDFIELD=.03
"RTN","SD659PST",74,0)
 SET SDXREFNM="AEVENT3"
"RTN","SD659PST",75,0)
 DO DELXREF(SDFILE,SDFIELD,SDXREFNM)
"RTN","SD659PST",76,0)
 ;
"RTN","SD659PST",77,0)
 ;Delete the ASTATUS Xref in 404.52
"RTN","SD659PST",78,0)
 SET SDFILE=404.52
"RTN","SD659PST",79,0)
 SET SDFIELD=.04
"RTN","SD659PST",80,0)
 SET SDXREFNM="ASTATUS"
"RTN","SD659PST",81,0)
 DO DELXREF(SDFILE,SDFIELD,SDXREFNM)
"RTN","SD659PST",82,0)
 ;
"RTN","SD659PST",83,0)
 ;Delete the AFTEE Xref in 404.52
"RTN","SD659PST",84,0)
 SET SDFILE=404.52
"RTN","SD659PST",85,0)
 SET SDFIELD=.09
"RTN","SD659PST",86,0)
 SET SDXREFNM="AFTEE"
"RTN","SD659PST",87,0)
 DO DELXREF(SDFILE,SDFIELD,SDXREFNM)
"RTN","SD659PST",88,0)
 ;
"RTN","SD659PST",89,0)
 ;Delete the AEVENT1 Xref in 404.53
"RTN","SD659PST",90,0)
 SET SDFILE=404.53
"RTN","SD659PST",91,0)
 SET SDFIELD=.01
"RTN","SD659PST",92,0)
 SET SDXREFNM="AEVENT1"
"RTN","SD659PST",93,0)
 DO DELXREF(SDFILE,SDFIELD,SDXREFNM)
"RTN","SD659PST",94,0)
 ;
"RTN","SD659PST",95,0)
 ;Delete the AEVENT2 Xref in 404.53
"RTN","SD659PST",96,0)
 SET SDFILE=404.53
"RTN","SD659PST",97,0)
 SET SDFIELD=.02
"RTN","SD659PST",98,0)
 SET SDXREFNM="AEVENT2"
"RTN","SD659PST",99,0)
 DO DELXREF(SDFILE,SDFIELD,SDXREFNM)
"RTN","SD659PST",100,0)
 ;
"RTN","SD659PST",101,0)
 ;Delete the AEVENT3 Xref in 404.53
"RTN","SD659PST",102,0)
 SET SDFILE=404.53
"RTN","SD659PST",103,0)
 SET SDFIELD=.04
"RTN","SD659PST",104,0)
 SET SDXREFNM="AEVENT3"
"RTN","SD659PST",105,0)
 DO DELXREF(SDFILE,SDFIELD,SDXREFNM)
"RTN","SD659PST",106,0)
 ;
"RTN","SD659PST",107,0)
 ;Delete the AEVENT4 Xref in 404.53
"RTN","SD659PST",108,0)
 SET SDFILE=404.53
"RTN","SD659PST",109,0)
 SET SDFIELD=.06
"RTN","SD659PST",110,0)
 SET SDXREFNM="AEVENT4"
"RTN","SD659PST",111,0)
 DO DELXREF(SDFILE,SDFIELD,SDXREFNM)
"RTN","SD659PST",112,0)
 ;
"RTN","SD659PST",113,0)
 ;Delete the AE Index in 404.57
"RTN","SD659PST",114,0)
 SET SDFILE=404.57
"RTN","SD659PST",115,0)
 SET SDINDEX="AE"
"RTN","SD659PST",116,0)
 DO DELINDEX(SDFILE,SDINDEX)
"RTN","SD659PST",117,0)
 ;
"RTN","SD659PST",118,0)
 ;Delete the AD Index in 404.57
"RTN","SD659PST",119,0)
 SET SDFILE=404.57
"RTN","SD659PST",120,0)
 SET SDINDEX="AD"
"RTN","SD659PST",121,0)
 DO DELINDEX(SDFILE,SDINDEX)
"RTN","SD659PST",122,0)
 ;
"RTN","SD659PST",123,0)
 ;Delete the AC Index in 404.59
"RTN","SD659PST",124,0)
 SET SDFILE=404.59
"RTN","SD659PST",125,0)
 SET SDINDEX="AC"
"RTN","SD659PST",126,0)
 DO DELINDEX(SDFILE,SDINDEX)
"RTN","SD659PST",127,0)
 ;
"RTN","SD659PST",128,0)
 QUIT
"RTN","SD659PST",129,0)
 ;
"RTN","SD659PST",130,0)
DELXREF(SDFILE,SDFIELD,SDXREFNM) ; Delete traditional cross reference
"RTN","SD659PST",131,0)
 ;Inputs: SDFILE - file number
"RTN","SD659PST",132,0)
 ;        SDFIELD - field number
"RTN","SD659PST",133,0)
 ;        SDXREFNM - xref name
"RTN","SD659PST",134,0)
 ;
"RTN","SD659PST",135,0)
 NEW SDHIT,SDOUT,SDERR,SDXREF
"RTN","SD659PST",136,0)
 DO BMES^XPDUTL("Delete the "_SDXREFNM_" xref in "_SDFILE_"/"_SDFIELD_".")
"RTN","SD659PST",137,0)
 ;
"RTN","SD659PST",138,0)
 SET SDHIT=0
"RTN","SD659PST",139,0)
 SET SDXREF=0
"RTN","SD659PST",140,0)
 FOR  SET SDXREF=$O(^DD(SDFILE,SDFIELD,1,SDXREF)) QUIT:('+SDXREF)!(SDHIT)  DO
"RTN","SD659PST",141,0)
 . IF $GET(^DD(SDFILE,SDFIELD,1,SDXREF,0))[SDXREFNM DO
"RTN","SD659PST",142,0)
 . . ;W !,"SDXREF: ",SDXREF,"   Node: ",^DD(SDFILE,SDFIELD,1,SDXREF,0),!
"RTN","SD659PST",143,0)
 . . DO DELIX^DDMOD(SDFILE,SDFIELD,SDXREF,"","SDOUT","SDERR")
"RTN","SD659PST",144,0)
 . . IF '$DATA(SDERR) DO
"RTN","SD659PST",145,0)
 . . . DO MES^XPDUTL("The "_SDXREFNM_" cross reference was deleted.")
"RTN","SD659PST",146,0)
 . . . SET SDHIT=1
"RTN","SD659PST",147,0)
 . . ELSE  DO
"RTN","SD659PST",148,0)
 . . . DO MES^XPDUTL("ERROR encountered deleting the "_SDXREFNM_" cross reference.")
"RTN","SD659PST",149,0)
 ;
"RTN","SD659PST",150,0)
 DO:'SDHIT MES^XPDUTL("The "_SDXREFNM_" cross reference was not found.")
"RTN","SD659PST",151,0)
 ;
"RTN","SD659PST",152,0)
 QUIT
"RTN","SD659PST",153,0)
 ;
"RTN","SD659PST",154,0)
DELINDEX(SDFILE,SDINDEX) ; Delete a new style index
"RTN","SD659PST",155,0)
 ;Inputs: SDFILE - file number
"RTN","SD659PST",156,0)
 ;        SDINDEX - index name
"RTN","SD659PST",157,0)
 ;
"RTN","SD659PST",158,0)
 NEW SDOUT,SDERR
"RTN","SD659PST",159,0)
 DO BMES^XPDUTL("Delete the "_SDINDEX_" Index in "_SDFILE_".")
"RTN","SD659PST",160,0)
 ;
"RTN","SD659PST",161,0)
 DO DELIXN^DDMOD(SDFILE,SDINDEX,"","SDOUT","SDERR")
"RTN","SD659PST",162,0)
 IF '$DATA(SDERR) DO
"RTN","SD659PST",163,0)
 . DO MES^XPDUTL("The "_SDINDEX_" Index in "_SDFILE_" was deleted.")
"RTN","SD659PST",164,0)
 ELSE  DO
"RTN","SD659PST",165,0)
 . DO MES^XPDUTL("ERROR encountered deleting the "_SDINDEX_" Index in "_SDFILE_".")
"RTN","SD659PST",166,0)
 QUIT
"RTN","SD659PST",167,0)
 ;
"RTN","SD659PST",168,0)
DELEVNTS ; Delete records in PCMM HL7 EVENT FILE (#404.48)
"RTN","SD659PST",169,0)
 NEW DA,DIK
"RTN","SD659PST",170,0)
 SET DA=0
"RTN","SD659PST",171,0)
 FOR  SET DA=$ORDER(^SCPT(404.48,DA)) QUIT:'+DA  DO
"RTN","SD659PST",172,0)
 . SET DIK="^SCPT(404.48,"
"RTN","SD659PST",173,0)
 . DO ^DIK
"RTN","SD659PST",174,0)
 ;
"RTN","SD659PST",175,0)
 DO BMES^XPDUTL("  Records were deleted from PCMM HL7 EVENT FILE.")
"RTN","SD659PST",176,0)
 QUIT
"RTN","SD659PST",177,0)
 ;
"VER")
8.0^22.0
"BLD",10299,6)
^548
**END**
**END**

