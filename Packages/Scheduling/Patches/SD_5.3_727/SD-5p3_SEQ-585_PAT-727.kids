Released SD*5.3*727 SEQ #585
Extracted from mail message
**KIDS**:SD*5.3*727^

**INSTALL NAME**
SD*5.3*727
"BLD",11479,0)
SD*5.3*727^SCHEDULING^0^3190521^y
"BLD",11479,1,0)
^^4^4^3190521^^^
"BLD",11479,1,1,0)
This patch addresses one issue:
"BLD",11479,1,2,0)
 
"BLD",11479,1,3,0)
1. when queuing Recall Clinic Letter Report, an <UNDEFINED>SORT+14^SDRRREP
"BLD",11479,1,4,0)
   error occurred.
"BLD",11479,4,0)
^9.64PA^^
"BLD",11479,6.3)
2
"BLD",11479,"KRN",0)
^9.67PA^1.5^24
"BLD",11479,"KRN",.4,0)
.4
"BLD",11479,"KRN",.401,0)
.401
"BLD",11479,"KRN",.402,0)
.402
"BLD",11479,"KRN",.403,0)
.403
"BLD",11479,"KRN",.5,0)
.5
"BLD",11479,"KRN",.84,0)
.84
"BLD",11479,"KRN",1.5,0)
1.5
"BLD",11479,"KRN",1.6,0)
1.6
"BLD",11479,"KRN",1.61,0)
1.61
"BLD",11479,"KRN",1.62,0)
1.62
"BLD",11479,"KRN",3.6,0)
3.6
"BLD",11479,"KRN",3.8,0)
3.8
"BLD",11479,"KRN",9.2,0)
9.2
"BLD",11479,"KRN",9.8,0)
9.8
"BLD",11479,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",11479,"KRN",9.8,"NM",1,0)
SDRRREP^^0^B12047275
"BLD",11479,"KRN",9.8,"NM","B","SDRRREP",1)

"BLD",11479,"KRN",19,0)
19
"BLD",11479,"KRN",19.1,0)
19.1
"BLD",11479,"KRN",101,0)
101
"BLD",11479,"KRN",409.61,0)
409.61
"BLD",11479,"KRN",771,0)
771
"BLD",11479,"KRN",779.2,0)
779.2
"BLD",11479,"KRN",870,0)
870
"BLD",11479,"KRN",8989.51,0)
8989.51
"BLD",11479,"KRN",8989.52,0)
8989.52
"BLD",11479,"KRN",8994,0)
8994
"BLD",11479,"KRN","B",.4,.4)

"BLD",11479,"KRN","B",.401,.401)

"BLD",11479,"KRN","B",.402,.402)

"BLD",11479,"KRN","B",.403,.403)

"BLD",11479,"KRN","B",.5,.5)

"BLD",11479,"KRN","B",.84,.84)

"BLD",11479,"KRN","B",1.5,1.5)

"BLD",11479,"KRN","B",1.6,1.6)

"BLD",11479,"KRN","B",1.61,1.61)

"BLD",11479,"KRN","B",1.62,1.62)

"BLD",11479,"KRN","B",3.6,3.6)

"BLD",11479,"KRN","B",3.8,3.8)

"BLD",11479,"KRN","B",9.2,9.2)

"BLD",11479,"KRN","B",9.8,9.8)

"BLD",11479,"KRN","B",19,19)

"BLD",11479,"KRN","B",19.1,19.1)

"BLD",11479,"KRN","B",101,101)

"BLD",11479,"KRN","B",409.61,409.61)

"BLD",11479,"KRN","B",771,771)

"BLD",11479,"KRN","B",779.2,779.2)

"BLD",11479,"KRN","B",870,870)

"BLD",11479,"KRN","B",8989.51,8989.51)

"BLD",11479,"KRN","B",8989.52,8989.52)

"BLD",11479,"KRN","B",8994,8994)

"BLD",11479,"QDEF")
^^^^NO^^^^^^YES
"BLD",11479,"QUES",0)
^9.62^^
"BLD",11479,"REQB",0)
^9.611^1^1
"BLD",11479,"REQB",1,0)
SD*5.3*672^2
"BLD",11479,"REQB","B","SD*5.3*672",1)

"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
727^3190521
"PKG",16,22,1,"PAH",1,1,0)
^^4^4^3190521
"PKG",16,22,1,"PAH",1,1,1,0)
This patch addresses one issue:
"PKG",16,22,1,"PAH",1,1,2,0)
 
"PKG",16,22,1,"PAH",1,1,3,0)
1. when queuing Recall Clinic Letter Report, an <UNDEFINED>SORT+14^SDRRREP
"PKG",16,22,1,"PAH",1,1,4,0)
   error occurred.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","SDRRREP")
0^1^B12047275^B11839336
"RTN","SDRRREP",1,0)
SDRRREP ;ALB/SAT - RECALL REMINDERS REPORTS ;JUL 26, 2017
"RTN","SDRRREP",2,0)
 ;;5.3;Scheduling;**643,672,727**;Aug 13, 1993;Build 2
"RTN","SDRRREP",3,0)
 ;
"RTN","SDRRREP",4,0)
LETTER ;REPORT - RECALL REMINDERS where associated Clinic does not have a Recall Letter defined
"RTN","SDRRREP",5,0)
 N SDRRDESC,SDRRRTN,SDTMP
"RTN","SDRRREP",6,0)
 N %ZIS,IO,IOP,IOSL,IOST,POP,ZTDESC,ZTQUEUED,ZTREQ,ZTRTN,ZTSK,ZTSAVE
"RTN","SDRRREP",7,0)
 D INIT
"RTN","SDRRREP",8,0)
 ;
"RTN","SDRRREP",9,0)
 K %ZIS,IOP S %ZIS="MQ" W ! D ^%ZIS I POP D EXIT Q
"RTN","SDRRREP",10,0)
 ;
"RTN","SDRRREP",11,0)
 I $D(IO("Q")) D  Q 
"RTN","SDRRREP",12,0)
 . S ZTDESC=SDRRDESC
"RTN","SDRRREP",13,0)
 . S ZTRTN="PROCESS^SDRRREP"
"RTN","SDRRREP",14,0)
 . S ZTSAVE("*")=""  ;*727
"RTN","SDRRREP",15,0)
 . D TASK
"RTN","SDRRREP",16,0)
 ;
"RTN","SDRRREP",17,0)
 D PROCESS
"RTN","SDRRREP",18,0)
 Q
"RTN","SDRRREP",19,0)
 ;
"RTN","SDRRREP",20,0)
INIT ;
"RTN","SDRRREP",21,0)
 S SDRRRTN="SDRRREP"
"RTN","SDRRREP",22,0)
 S SDRRDESC="Recall Letter Report"
"RTN","SDRRREP",23,0)
 S SDTMP=$NA(^TMP(SDRRRTN,$J))
"RTN","SDRRREP",24,0)
 K @SDTMP
"RTN","SDRRREP",25,0)
 Q
"RTN","SDRRREP",26,0)
 ;
"RTN","SDRRREP",27,0)
PROCESS ;
"RTN","SDRRREP",28,0)
 N SDDTIM,SDQUIT,SDRPAGE,SDTIME,SDTODAY,SDUNDL
"RTN","SDRRREP",29,0)
 D SETUP,SORT,RPT
"RTN","SDRRREP",30,0)
 I '$D(@SDTMP) W !!?26,"* * * NO DATA TO PRINT * * *",!!
"RTN","SDRRREP",31,0)
 D EXIT
"RTN","SDRRREP",32,0)
 Q
"RTN","SDRRREP",33,0)
 ;
"RTN","SDRRREP",34,0)
SETUP ;
"RTN","SDRRREP",35,0)
 S (SDQUIT,SDRPAGE)=0
"RTN","SDRRREP",36,0)
 S SDDTIM=$$HTE^XLFDT($H,1)
"RTN","SDRRREP",37,0)
 S SDTIME=$P(SDDTIM,"@",2)
"RTN","SDRRREP",38,0)
 S SDTODAY=$P(SDDTIM,"@")_"  "_$E(SDTIME,1,5)
"RTN","SDRRREP",39,0)
 S $P(SDUNDL,"-",78)="-"
"RTN","SDRRREP",40,0)
 Q
"RTN","SDRRREP",41,0)
 ;
"RTN","SDRRREP",42,0)
SORT ; get recall entries associated to clinics with no recall letter
"RTN","SDRRREP",43,0)
 N DFN,SDC,SDCL,SDATE,SDCLN,SDI,SDNAM,SSN
"RTN","SDRRREP",44,0)
 S SDC=0
"RTN","SDRRREP",45,0)
 S SDCL=0 F  S SDCL=$O(^SD(403.5,"E",SDCL)) Q:SDCL=""  D
"RTN","SDRRREP",46,0)
 .Q:$O(^SD(403.52,"B",SDCL,0))
"RTN","SDRRREP",47,0)
 .S SDCLN=$$GET1^DIQ(44,SDCL_",",.01)
"RTN","SDRRREP",48,0)
 .Q:SDCLN=""   ;alb/sat 672 - skip if clinic name not defined
"RTN","SDRRREP",49,0)
 .S SDI=0 F  S SDI=$O(^SD(403.5,"E",SDCL,SDI)) Q:SDI=""  D
"RTN","SDRRREP",50,0)
 ..S DFN=$$GET1^DIQ(403.5,SDI_",",.01,"I")
"RTN","SDRRREP",51,0)
 ..Q:(DFN="")!('$D(^DPT(+DFN,0)))   ;alb/sat 672 - skip if patient not defined
"RTN","SDRRREP",52,0)
 ..S SDNAM=$$GET1^DIQ(2,DFN_",",.01) S:SDNAM="" SDNAM="No Name"  ;alb/sat 672 - make sure a value is in SDNAM
"RTN","SDRRREP",53,0)
 ..S SDATE=$$GET1^DIQ(403.5,SDI_",",5)
"RTN","SDRRREP",54,0)
 ..S:SDATE="" SDATE=0   ;alb/sat 672 - make sure a value is in SDATE
"RTN","SDRRREP",55,0)
 ..S SSN=$E($P(^DPT(DFN,0),"^",9),6,9) S:SSN="" SSN=0
"RTN","SDRRREP",56,0)
 ..S SDC=SDC+1 S @SDTMP@(SDCLN,SDATE,SDNAM,SSN,SDC)=""   ;alb/sat 672 - use SDNAM
"RTN","SDRRREP",57,0)
 Q
"RTN","SDRRREP",58,0)
 ;
"RTN","SDRRREP",59,0)
RPT ; Print the report
"RTN","SDRRREP",60,0)
 N SDATE,SDC,SDCLN,SDNAME,SDSSN
"RTN","SDRRREP",61,0)
 U IO
"RTN","SDRRREP",62,0)
 ;
"RTN","SDRRREP",63,0)
 D HEADER
"RTN","SDRRREP",64,0)
 ; Loop through the Sorted data.
"RTN","SDRRREP",65,0)
 S SDCLN="" F  S SDCLN=$O(@SDTMP@(SDCLN)) Q:SDCLN=""  D  Q:SDQUIT
"RTN","SDRRREP",66,0)
 .S SDATE="" F  S SDATE=$O(@SDTMP@(SDCLN,SDATE)) Q:SDATE=""  D  Q:SDQUIT
"RTN","SDRRREP",67,0)
 ..S SDNAME="" F  S SDNAME=$O(@SDTMP@(SDCLN,SDATE,SDNAME)) Q:SDNAME=""  D  Q:SDQUIT
"RTN","SDRRREP",68,0)
 ...S SDSSN="" F  S SDSSN=$O(@SDTMP@(SDCLN,SDATE,SDNAME,SDSSN)) Q:SDSSN=""  D  Q:SDQUIT
"RTN","SDRRREP",69,0)
 ....S SDC="" F  S SDC=$O(@SDTMP@(SDCLN,SDATE,SDNAME,SDSSN,SDC)) Q:SDC=""  D  Q:SDQUIT
"RTN","SDRRREP",70,0)
 .....I $Y>(IOSL-6) D HEADER Q:SDQUIT
"RTN","SDRRREP",71,0)
 .....W !,SDCLN,?30,SDATE,?43,SDNAME,?74,$S(SDSSN=0:"",1:SDSSN)
"RTN","SDRRREP",72,0)
 Q
"RTN","SDRRREP",73,0)
 ;
"RTN","SDRRREP",74,0)
HEADER ;
"RTN","SDRRREP",75,0)
 N DIR,Y
"RTN","SDRRREP",76,0)
 S SDRPAGE=SDRPAGE+1
"RTN","SDRRREP",77,0)
 I SDRPAGE>1 D  Q:SDQUIT
"RTN","SDRRREP",78,0)
 . W $C(7)
"RTN","SDRRREP",79,0)
 . I $E(IOST)="C" K DIR S DIR(0)="E" D ^DIR S SDQUIT=$S(Y'>0:1,1:0)
"RTN","SDRRREP",80,0)
 ;
"RTN","SDRRREP",81,0)
 W:$E(IOST)="C"!(SDRPAGE>1) @IOF
"RTN","SDRRREP",82,0)
 W !,SDRRDESC,?48,SDTODAY,?70,"PAGE ",SDRPAGE
"RTN","SDRRREP",83,0)
 W !,"Clinic",?30,"Recall Date",?43,"Patient Name",?75,"SSN"
"RTN","SDRRREP",84,0)
 W !,SDUNDL
"RTN","SDRRREP",85,0)
 ;
"RTN","SDRRREP",86,0)
 Q
"RTN","SDRRREP",87,0)
 ;
"RTN","SDRRREP",88,0)
EXIT ;
"RTN","SDRRREP",89,0)
 W ! D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","SDRRREP",90,0)
 K @SDTMP
"RTN","SDRRREP",91,0)
 Q
"RTN","SDRRREP",92,0)
 ;
"RTN","SDRRREP",93,0)
TASK ;set variables for call to ^%ZTLOAD
"RTN","SDRRREP",94,0)
 D ^%ZTLOAD
"RTN","SDRRREP",95,0)
 I $G(ZTSK) W !,"Task Number: ",ZTSK
"RTN","SDRRREP",96,0)
 Q
"VER")
8.0^22.2
"BLD",11479,6)
^585
**END**
**END**

