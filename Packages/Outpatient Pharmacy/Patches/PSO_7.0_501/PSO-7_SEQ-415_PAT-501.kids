Released PSO*7*501 SEQ #415
Extracted from mail message
**KIDS**:PSO*7.0*501^

**INSTALL NAME**
PSO*7.0*501
"BLD",10721,0)
PSO*7.0*501^OUTPATIENT PHARMACY^0^3171130^y
"BLD",10721,1,0)
^^4^4^3171130^
"BLD",10721,1,1,0)
This patch will resolve the following issues.
"BLD",10721,1,2,0)
 
"BLD",10721,1,3,0)
 1. Speed refill message displays too quickly to be read. 
"BLD",10721,1,4,0)
 2. Pharmacist Enter/Edit option display issue.
"BLD",10721,4,0)
^9.64PA^^
"BLD",10721,6.3)
8
"BLD",10721,"INID")
^
"BLD",10721,"INIT")

"BLD",10721,"KRN",0)
^9.67PA^779.2^20
"BLD",10721,"KRN",.4,0)
.4
"BLD",10721,"KRN",.401,0)
.401
"BLD",10721,"KRN",.402,0)
.402
"BLD",10721,"KRN",.403,0)
.403
"BLD",10721,"KRN",.5,0)
.5
"BLD",10721,"KRN",.84,0)
.84
"BLD",10721,"KRN",3.6,0)
3.6
"BLD",10721,"KRN",3.8,0)
3.8
"BLD",10721,"KRN",9.2,0)
9.2
"BLD",10721,"KRN",9.8,0)
9.8
"BLD",10721,"KRN",9.8,"NM",0)
^9.68A^3^2
"BLD",10721,"KRN",9.8,"NM",1,0)
PSOSUP^^0^B8330003
"BLD",10721,"KRN",9.8,"NM",3,0)
PSOREF0^^0^B39490179
"BLD",10721,"KRN",9.8,"NM","B","PSOREF0",3)

"BLD",10721,"KRN",9.8,"NM","B","PSOSUP",1)

"BLD",10721,"KRN",19,0)
19
"BLD",10721,"KRN",19.1,0)
19.1
"BLD",10721,"KRN",101,0)
101
"BLD",10721,"KRN",409.61,0)
409.61
"BLD",10721,"KRN",771,0)
771
"BLD",10721,"KRN",779.2,0)
779.2
"BLD",10721,"KRN",870,0)
870
"BLD",10721,"KRN",8989.51,0)
8989.51
"BLD",10721,"KRN",8989.52,0)
8989.52
"BLD",10721,"KRN",8994,0)
8994
"BLD",10721,"KRN","B",.4,.4)

"BLD",10721,"KRN","B",.401,.401)

"BLD",10721,"KRN","B",.402,.402)

"BLD",10721,"KRN","B",.403,.403)

"BLD",10721,"KRN","B",.5,.5)

"BLD",10721,"KRN","B",.84,.84)

"BLD",10721,"KRN","B",3.6,3.6)

"BLD",10721,"KRN","B",3.8,3.8)

"BLD",10721,"KRN","B",9.2,9.2)

"BLD",10721,"KRN","B",9.8,9.8)

"BLD",10721,"KRN","B",19,19)

"BLD",10721,"KRN","B",19.1,19.1)

"BLD",10721,"KRN","B",101,101)

"BLD",10721,"KRN","B",409.61,409.61)

"BLD",10721,"KRN","B",771,771)

"BLD",10721,"KRN","B",779.2,779.2)

"BLD",10721,"KRN","B",870,870)

"BLD",10721,"KRN","B",8989.51,8989.51)

"BLD",10721,"KRN","B",8989.52,8989.52)

"BLD",10721,"KRN","B",8994,8994)

"BLD",10721,"QDEF")
^^^^NO^^^^^^NO
"BLD",10721,"QUES",0)
^9.62^^
"BLD",10721,"REQB",0)
^9.611^2^2
"BLD",10721,"REQB",1,0)
PSO*7.0*268^2
"BLD",10721,"REQB",2,0)
PSO*7.0*388^2
"BLD",10721,"REQB","B","PSO*7.0*268",1)

"BLD",10721,"REQB","B","PSO*7.0*388",2)

"MBREQ")
0
"PKG",206,-1)
1^1
"PKG",206,0)
OUTPATIENT PHARMACY^PSO^OUTPATIENT LABELS, PROFILE, INVENTORY, PRESCRIPTIONS
"PKG",206,20,0)
^9.402P^^
"PKG",206,22,0)
^9.49I^1^1
"PKG",206,22,1,0)
7.0^3021122^3021202^66481
"PKG",206,22,1,"PAH",1,0)
501^3171130
"PKG",206,22,1,"PAH",1,1,0)
^^4^4^3171130
"PKG",206,22,1,"PAH",1,1,1,0)
This patch will resolve the following issues.
"PKG",206,22,1,"PAH",1,1,2,0)
 
"PKG",206,22,1,"PAH",1,1,3,0)
 1. Speed refill message displays too quickly to be read. 
"PKG",206,22,1,"PAH",1,1,4,0)
 2. Pharmacist Enter/Edit option display issue.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","PSOREF0")
0^3^B39490179^B38701454
"RTN","PSOREF0",1,0)
PSOREF0 ;IHS/JCM - REFILL CON'T ; 6/17/11 6:02pm
"RTN","PSOREF0",2,0)
 ;;7.0;OUTPATIENT PHARMACY;**14,152,180,186,204,306,382,388,501**;DEC 1997;Build 8
"RTN","PSOREF0",3,0)
 ;External reference to ^PSDRUG supported by DBIA 221
"RTN","PSOREF0",4,0)
 ;
"RTN","PSOREF0",5,0)
 ;PSO*186 add check for DEA Special handling field refill restrictions
"RTN","PSOREF0",6,0)
PROCESS ;
"RTN","PSOREF0",7,0)
 K PSODF S PSOREF("RX0")=^PSRX(PSOREF("IRXN"),0),PSOREF("RX2")=^(2),PSOREF("RX3")=^(3),PSOREF("STA")=+$G(^("STA")),PSOREF("SIG")=$P($G(^("SIG")),"^"),PSOREF("PSODFN")=$P(PSOREF("RX0"),"^",2)
"RTN","PSOREF0",8,0)
 S PSOREF("DAYS SUPPLY")=$P(PSOREF("RX0"),"^",8)
"RTN","PSOREF0",9,0)
 I $D(PSORX("BAR CODE")),PSODFN'=PSOREF("PSODFN") D NEWPT
"RTN","PSOREF0",10,0)
 W !,"Now refilling Rx# ",$P(PSOREF("RX0"),"^")_"   Drug: "_$P(^PSDRUG($P(PSOREF("RX0"),"^",6),0),"^")
"RTN","PSOREF0",11,0)
 K ZD(PSOREF("IRXN"))   ;*306
"RTN","PSOREF0",12,0)
 S PSOREF("DFLG")=0 D DSPLY G:PSOREF("DFLG") PROCESSX
"RTN","PSOREF0",13,0)
 I $G(PSOHRC) S PSOREF("QS")="S",PSOREF("MAIL/WINDOW")="M",PSORX("MAIL/WINDOW")="M",PSOHRCF=1 K VALMHDR
"RTN","PSOREF0",14,0)
 D CHECK G:$G(PSODF) PROCESS G:PSOREF("DFLG") PROCESSX D EN^PSOR52(.PSOREF)
"RTN","PSOREF0",15,0)
 S:$G(PSOREF("MAIL/WINDOW"))["W" BINGRTE="W",BINGCRT=1
"RTN","PSOREF0",16,0)
PROCESSX D:$G(PSOREF("OLD FILL DATE"))]"" SUSDATEK^PSOUTIL(.PSOREF)
"RTN","PSOREF0",17,0)
 Q
"RTN","PSOREF0",18,0)
DSPLY ;W !!,$P(PSOREF("RX0"),"^"),?12," ",$P(^PSDRUG($P(PSOREF("RX0"),"^",6),0),"^"),?45," SIG: "_PSOREF("SIG"),?60," QTY: ",$P(PSOREF("RX0"),"^",7)
"RTN","PSOREF0",19,0)
 K FSIG,BSIG I $P($G(^PSRX(PSOREF("IRXN"),"SIG")),"^",2) D FSIG^PSOUTLA("R",PSOREF("IRXN"),54) F PSREV=1:1 Q:'$D(FSIG(PSREV))  S BSIG(PSREV)=FSIG(PSREV)
"RTN","PSOREF0",20,0)
 K FSIG,PSREV I '$P($G(^PSRX(PSOREF("IRXN"),"SIG")),"^",2) D EN2^PSOUTLA1(PSOREF("IRXN"),54)
"RTN","PSOREF0",21,0)
 W !!,"Qty: ",$P(PSOREF("RX0"),"^",7),?19,"Sig: ",$G(BSIG(1))
"RTN","PSOREF0",22,0)
 I $O(BSIG(1)) F PSREV=1:0 S PSREV=$O(BSIG(PSREV)) Q:'PSREV  W !?24,$G(BSIG(PSREV))
"RTN","PSOREF0",23,0)
 K BSIG,PSREV
"RTN","PSOREF0",24,0)
DSPLYX Q
"RTN","PSOREF0",25,0)
CHECK ;
"RTN","PSOREF0",26,0)
 I '$P(PSOPAR,"^",11),$G(^PSDRUG($P(PSOREF("RX0"),"^",6),"I"))]"",DT>$G(^("I")) D  G CKQ
"RTN","PSOREF0",27,0)
 .W $C(7),!!," *** Drug is inactive for Rx # "_$P(PSOREF("RX0"),"^")_" cannot be refilled ***",!
"RTN","PSOREF0",28,0)
 I '$D(PSORX("BAR CODE")),PSOREF("PSODFN")'=PSODFN W !!,?5,$C(7),"Can't refill Rx # "_$P(PSOREF("RX0"),"^")_", it is not for this patient." G CKQ
"RTN","PSOREF0",29,0)
 S (PSOX,PSOY,STA)=""
"RTN","PSOREF0",30,0)
 I $G(PSOSD) F  S STA=$O(PSOSD(STA)) Q:STA=""  F  S PSOX=$O(PSOSD(STA,PSOX)) Q:PSOX']""!(PSOREF("DFLG"))  I PSOREF("IRXN")=+PSOSD(STA,PSOX) S PSOY=PSOSD(STA,PSOX) I $P(PSOY,"^",4)]"" D
"RTN","PSOREF0",31,0)
 . S PSOREF("DFLG")=1 W:'$G(PSOERR) !,$C(7),"Cannot refill Rx # "_$P(PSOREF("RX0"),"^") S PSOREA=$P(PSOY,"^",4),PSOSTAT=PSOREF("STA")
"RTN","PSOREF0",32,0)
 . D STATUS^PSOUTIL(PSOREA,PSOSTAT) K PSOREA,PSOSTAT
"RTN","PSOREF0",33,0)
 . Q
"RTN","PSOREF0",34,0)
 I PSOY="" W !,$C(7),"Cannot refill, Rx is discontinued or expired.  Later Rx may exist.",! D  I $G(PSODF) Q
"RTN","PSOREF0",35,0)
 .D LOOK^PSOREF2 I $G(PSODF) Q
"RTN","PSOREF0",36,0)
 .S PSOREF("DFLG")=1
"RTN","PSOREF0",37,0)
 K PSOX,PSOY G:PSOREF("DFLG") CHECKX
"RTN","PSOREF0",38,0)
 I $O(^PS(52.5,"B",PSOREF("IRXN"),0)),'$G(^PS(52.5,+$O(^PS(52.5,"B",PSOREF("IRXN"),0)),"P")) W !,$C(7),"Rx is in suspense and cannot be refilled" S PSOREF("DFLG")=1 G CHECKX
"RTN","PSOREF0",39,0)
 ;
"RTN","PSOREF0",40,0)
 S PSOREF("RXSTATUS")=PSOREF("STA")
"RTN","PSOREF0",41,0)
 I PSOREF("RXSTATUS"),PSOREF("RXSTATUS")'=6 D  G CHECKX
"RTN","PSOREF0",42,0)
 . S PSOY=";"_PSOREF("RXSTATUS"),PSOX=$P(^DD(52,100,0),"^",3),PSOY=$F(PSOX,PSOY),PSOY=$P($E(PSOX,PSOY,999),";",1)
"RTN","PSOREF0",43,0)
 . W !,$C(7),"Rx is in "_PSOY_" status, cannot be refilled" S PSOREF("DFLG")=1
"RTN","PSOREF0",44,0)
 D CHKDIV G:PSOREF("DFLG") CHECKX
"RTN","PSOREF0",45,0)
 D NUMBER I PSOREF("NUMBER")>$P(PSOREF("RX0"),"^",9) W !?5,"Can't refill, no refills remaining." S PSOREF("DFLG")=1 G CHECKX
"RTN","PSOREF0",46,0)
 ;
"RTN","PSOREF0",47,0)
 ;PSO*7*186  check DEA, SPEC HNDLG field, in case changed, and apply
"RTN","PSOREF0",48,0)
 N PSODRG,PSODEA,PSODAY,PSOCHECK
"RTN","PSOREF0",49,0)
 S PSODRG=$G(^PSDRUG($P(PSOREF("RX0"),U,6),0)),PSODEA=$P(PSODRG,U,3)
"RTN","PSOREF0",50,0)
 S PSODAY=$P(PSOREF("RX0"),U,8)
"RTN","PSOREF0",51,0)
 S PSOCHECK=$$DEACHK^PSOUTLA1(PSOREF("IRXN"),PSODEA,PSODAY)
"RTN","PSOREF0",52,0)
 I PSOCHECK S PSOREF("DFLG")=1 W $C(7),!! D  G CHECKX
"RTN","PSOREF0",53,0)
 . I PSOCHECK=1 W "Requested refill exceeds maximum allowable days supply for Rx.",! Q  ;*388
"RTN","PSOREF0",54,0)
 . W "Current drug DEA/SPECIAL HANDLING code does not allow refills.",! ;*388
"RTN","PSOREF0",55,0)
 . N DIR,DIRUT,DUOUT,DTOUT S DIR(0)="E",DIR("A")="Press Return to Continue" D ^DIR ;*501
"RTN","PSOREF0",56,0)
 ;
"RTN","PSOREF0",57,0)
 D DATES
"RTN","PSOREF0",58,0)
CHECKX Q
"RTN","PSOREF0",59,0)
CKQ ;
"RTN","PSOREF0",60,0)
 S PSOREF("DFLG")=1 D PAUSE^VALM1 G CHECKX
"RTN","PSOREF0",61,0)
 Q
"RTN","PSOREF0",62,0)
 ;
"RTN","PSOREF0",63,0)
CHKDIV G:$P(PSOREF("RX2"),"^",9)=+PSOSITE CHKDIVX
"RTN","PSOREF0",64,0)
 W !?5,$C(7),"RX # ",$P(PSOREF("RX0"),"^")," is for (",$P(^PS(59,$P(PSOREF("RX2"),"^",9),0),"^"),") division."
"RTN","PSOREF0",65,0)
 I '$P($G(PSOSYS),"^",2) S (PSOREF("DFLG"),PSOMHV)=1 W !,"********* Not Refilled *********" G CHKDIVX
"RTN","PSOREF0",66,0)
 D:$P($G(PSOSYS),"^",3) DIR
"RTN","PSOREF0",67,0)
CHKDIVX Q
"RTN","PSOREF0",68,0)
 ;
"RTN","PSOREF0",69,0)
NUMBER K PSOX,PSOY S PSOREF("# OF REFILLS")=0
"RTN","PSOREF0",70,0)
 I $G(^PSRX(PSOREF("IRXN"),1,0))]"" F PSOX=0:0 S PSOX=$O(^PSRX(PSOREF("IRXN"),1,PSOX)) Q:'PSOX  S PSOREF("# OF REFILLS")=PSOX
"RTN","PSOREF0",71,0)
 S PSOREF("NUMBER")=PSOREF("# OF REFILLS")+1
"RTN","PSOREF0",72,0)
 Q
"RTN","PSOREF0",73,0)
 ;
"RTN","PSOREF0",74,0)
DATES S PSOREF("STOP DATE")=$P(PSOREF("RX2"),"^",6) D NEXT^PSOUTIL(.PSOREF)
"RTN","PSOREF0",75,0)
 D:$G(PSOBBC("QFLG"))&($P(PSOPAR,"^",6)) EDATE Q:$G(PSOREF("DFLG"))
"RTN","PSOREF0",76,0)
 S PSOREF("FILL DATE")=$S($G(PSOREF("FILL DATE")):PSOREF("FILL DATE"),1:DT)
"RTN","PSOREF0",77,0)
 I $P(PSOPAR,"^",6),PSOREF("FILL DATE")<$P(PSOREF("RX3"),"^",2) D SUSDATE^PSOUTIL(.PSOREF)
"RTN","PSOREF0",78,0)
 ;
"RTN","PSOREF0",79,0)
 I PSOREF("FILL DATE")>PSOREF("STOP DATE") D
"RTN","PSOREF0",80,0)
 . W !!?5,$C(7),"Can't refill, Refill Date ",$E(PSOREF("FILL DATE"),4,5),"/",$E(PSOREF("FILL DATE"),6,7),"/"
"RTN","PSOREF0",81,0)
 . W $E(PSOREF("FILL DATE"),2,3)," is past Expiration Date ",$E(PSOREF("STOP DATE"),4,5),"/",$E(PSOREF("STOP DATE"),6,7),"/"
"RTN","PSOREF0",82,0)
 . W $E(PSOREF("STOP DATE"),2,3) S PSOREF("DFLG")=1
"RTN","PSOREF0",83,0)
EDATE S PSOREF("LAST REFILL DATE")=$P(PSOREF("RX3"),"^",1)
"RTN","PSOREF0",84,0)
 I PSOREF("LAST REFILL DATE"),PSOREF("FILL DATE")=PSOREF("LAST REFILL DATE") D  G DATESX
"RTN","PSOREF0",85,0)
 . W !?5,"Can't refill, Fill Date already exists for ",$E(PSOREF("FILL DATE"),4,5),"/",$E(PSOREF("FILL DATE"),6,7),"/",$E(PSOREF("FILL DATE"),2,3)
"RTN","PSOREF0",86,0)
 . S PSOREF("DFLG")=1
"RTN","PSOREF0",87,0)
 I PSOREF("LAST REFILL DATE"),PSOREF("FILL DATE")<PSOREF("LAST REFILL DATE") D  G DATESX
"RTN","PSOREF0",88,0)
 . W !?5,"Can't refill, later Refill Date already exists for ",$E(PSOREF("LAST REFILL DATE"),4,5),"/",$E(PSOREF("LAST REFILL DATE"),6,7),"/",$E(PSOREF("LAST REFILL DATE"),2,3)
"RTN","PSOREF0",89,0)
 . S PSOREF("DFLG")=1
"RTN","PSOREF0",90,0)
 I '$P(PSOPAR,"^",6),'$D(PSOREF("EAOK")),$P(PSOREF("RX3"),"^",2)>PSOREF("FILL DATE") D
"RTN","PSOREF0",91,0)
 . S PSOX1=(PSOREF("NUMBER")+1)*PSOREF("DAYS SUPPLY")-10
"RTN","PSOREF0",92,0)
 . W !?5,$C(7),"LESS THAN ",PSOX1," DAYS FOR ",PSOREF("NUMBER")+1," FILLS",! D DIR K PSOX1
"RTN","PSOREF0",93,0)
 I '$P(PSOPAR,"^",6),$G(PSOREF("EAOK"))=0,$P(PSOREF("RX3"),"^",2)>PSOREF("FILL DATE") D
"RTN","PSOREF0",94,0)
 . S Y=$P(PSOREF("RX3"),"^",2) D DD^%DT W !!,$C(7),"Cannot be refilled until "_Y_"." S (PSOREF("DFLG"),PSOMHV)=1 K Y
"RTN","PSOREF0",95,0)
DATESX Q
"RTN","PSOREF0",96,0)
DIR K DIR,X,Y S DIR(0)="Y",DIR("A")="Continue ",DIR("B")="N",DIR("?")="Answer YES to Refill, NO to bypass"
"RTN","PSOREF0",97,0)
 D ^DIR K DIR S:$D(DIRUT)!('Y) (PSOREF("DFLG"),PSOMHV)=1 K DIRUT,DTOUT,DUOUT,X,Y
"RTN","PSOREF0",98,0)
 Q
"RTN","PSOREF0",99,0)
NEWPT S PSOQFLG=0,(DFN,PSODFN)=PSOREF("PSODFN") D ^PSOPTPST I PSOQFLG S PSOREF("DFLG")=1,PSOQFLG=0 G NEWPTX
"RTN","PSOREF0",100,0)
 D PROFILE^PSOREF1
"RTN","PSOREF0",101,0)
NEWPTX Q
"RTN","PSOREF0",102,0)
 ;
"RTN","PSOREF0",103,0)
EN(PSOREF)         ; Entry Point for Batch Barcode Option
"RTN","PSOREF0",104,0)
 D PROCESS K DRUG,PSODF
"RTN","PSOREF0",105,0)
 Q
"RTN","PSOSUP")
0^1^B8330003^B7482949
"RTN","PSOSUP",1,0)
PSOSUP ;BHAM ISC/SAB-ENTER PHARMACISTS ; 07/13/92 16:43
"RTN","PSOSUP",2,0)
 ;;7.0;OUTPATIENT PHARMACY;**10,268,501**;DEC 1997;Build 8
"RTN","PSOSUP",3,0)
 D EX
"RTN","PSOSUP",4,0)
 W @IOF
"RTN","PSOSUP",5,0)
 I DUZ(0)'="@",'$D(^XUSEC("XUMGR",DUZ)),'$D(^XUSEC("PSORPH",DUZ)) W !,$C(7),"You Must Hold the 'PSORPH' key in order to be able to use this option!",! G EX
"RTN","PSOSUP",6,0)
ASK R !!,"Select PHARMACIST: ",X:DTIME I '$T!(X="") S X="^"
"RTN","PSOSUP",7,0)
 G:X["^" EX D PHASK:X["?" G PSOSUP:$G(PSOSTOP)
"RTN","PSOSUP",8,0)
 S DIC=200,DIC(0)="EQMZ" D ^DIC
"RTN","PSOSUP",9,0)
 G PSOSUP:X["?"!(Y<0) S PHARM=$P(Y(0),"^"),PSN=+Y
"RTN","PSOSUP",10,0)
 S DA=PSN,DIC(0)="EQMZ",(DIE,DIC)=200 D ^DIC I Y>0 S DA=+Y,DIE=DIC,DR="51///PSORPH",DR(51,200.051)=".01///PSORPH;1////"_$S($G(DUZ):DUZ,1:"")_";2///"_DT L +^VA(200,DA):$S(+$G(^DD("DILOCKTM"))>0:+^DD("DILOCKTM"),1:3) D ^DIE L -^VA(200,DA)
"RTN","PSOSUP",11,0)
 I $D(Y)!('$D(^XUSEC("PSORPH",PSN))) W !,$P(^VA(200,PSN,0),"^")_" DOES NOT hold the 'PSORPH' Security Key",! D EX G ASK
"RTN","PSOSUP",12,0)
 W !,$P(^VA(200,PSN,0),"^")_" now holds the 'PSORPH' Security Key",! G ASK
"RTN","PSOSUP",13,0)
EX K %,X,Y,%Y,C,D0,D1,DA,DI,DIE,DIQ,DIH,DIU,DIV,DLAYGO,DQ,DR,I,PSN,PHARM,Z,DIC,DIG,PSOSTOP
"RTN","PSOSUP",14,0)
 Q
"RTN","PSOSUP",15,0)
PHASK W !,"The pharmacist is an entry in the NEW PERSON file and holds the PSORPH",!,"key in the SECURITY KEY file.",!,"To delete a pharmacist, enter the name at the Select Pharmacist prompt and"
"RTN","PSOSUP",16,0)
 W !,"when the key PSORPH is shown as a default enter @ press return.",!,"The current list of PSORPH holders are:"
"RTN","PSOSUP",17,0)
 S A="",C=0,G=18,PSOFIRST=1
"RTN","PSOSUP",18,0)
 F J=0:0 S J=$O(^XUSEC("PSORPH",J)) Q:'J!($G(PSOSTOP))  W !?5,$P($G(^VA(200,J,0)),"^") S PSOSCRY=$G(PSOSCRY)+1 I $S(PSOFIRST:PSOSCRY+7>IOSL,1:PSOSCRY+2>IOSL) D
"RTN","PSOSUP",19,0)
 .R !,"Enter '^' to stop",A:DTIME S:A["^" PSOSTOP=1 S PSOSCRY=1,PSOFIRST=0
"RTN","PSOSUP",20,0)
 K A,H,J,PSOSCRY,PSOFIRST Q
"VER")
8.0^22.2
"BLD",10721,6)
^415
**END**
**END**

