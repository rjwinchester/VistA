Released PSO*7*455 SEQ #387
Extracted from mail message
**KIDS**:PSO*7.0*455^

**INSTALL NAME**
PSO*7.0*455
"BLD",10073,0)
PSO*7.0*455^OUTPATIENT PHARMACY^0^3160406^y
"BLD",10073,1,0)
^^18^18^3160406^
"BLD",10073,1,1,0)
This patch addresses five issues:
"BLD",10073,1,2,0)
         1. The calculation of the dosage of a prescription will not 
"BLD",10073,1,3,0)
populate when creating an order and entering the schedule in all lower 
"BLD",10073,1,4,0)
case. 
"BLD",10073,1,5,0)
        2. Schedules are not expanding to SPANISH. The labels aren't 
"BLD",10073,1,6,0)
printing in Spanish translated from English as necessary when creating a 
"BLD",10073,1,7,0)
prescription in outpatient pharmacy. 
"BLD",10073,1,8,0)
 
"BLD",10073,1,9,0)
        3. In the Computerized Patient Record System (CPRS) Non-VA 
"BLD",10073,1,10,0)
medications that have a sig longer than 3 words will not display in the 
"BLD",10073,1,11,0)
meds tab.
"BLD",10073,1,12,0)
 
"BLD",10073,1,13,0)
        4. If a Health Level 7 (HL7) delimiter character is inserted
"BLD",10073,1,14,0)
into the comment field for Non-VA meds, the escape character is 
"BLD",10073,1,15,0)
incorrectly stored in the global.
"BLD",10073,1,16,0)
 
"BLD",10073,1,17,0)
        5. Non-VA meds do not display on the Meds Tab in CPRS if the
"BLD",10073,1,18,0)
Start Date is set to NOW when creating the Non-VA med.
"BLD",10073,4,0)
^9.64PA^^
"BLD",10073,6)
3^
"BLD",10073,6.3)
14
"BLD",10073,"ABPKG")
n
"BLD",10073,"KRN",0)
^9.67PA^779.2^20
"BLD",10073,"KRN",.4,0)
.4
"BLD",10073,"KRN",.401,0)
.401
"BLD",10073,"KRN",.402,0)
.402
"BLD",10073,"KRN",.403,0)
.403
"BLD",10073,"KRN",.5,0)
.5
"BLD",10073,"KRN",.84,0)
.84
"BLD",10073,"KRN",3.6,0)
3.6
"BLD",10073,"KRN",3.8,0)
3.8
"BLD",10073,"KRN",9.2,0)
9.2
"BLD",10073,"KRN",9.8,0)
9.8
"BLD",10073,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",10073,"KRN",9.8,"NM",1,0)
PSOSPSIG^^0^B64981310
"BLD",10073,"KRN",9.8,"NM",2,0)
PSOSIG^^0^B65860748
"BLD",10073,"KRN",9.8,"NM",3,0)
PSONVNEW^^0^B29560779
"BLD",10073,"KRN",9.8,"NM","B","PSONVNEW",3)

"BLD",10073,"KRN",9.8,"NM","B","PSOSIG",2)

"BLD",10073,"KRN",9.8,"NM","B","PSOSPSIG",1)

"BLD",10073,"KRN",19,0)
19
"BLD",10073,"KRN",19.1,0)
19.1
"BLD",10073,"KRN",101,0)
101
"BLD",10073,"KRN",409.61,0)
409.61
"BLD",10073,"KRN",771,0)
771
"BLD",10073,"KRN",779.2,0)
779.2
"BLD",10073,"KRN",870,0)
870
"BLD",10073,"KRN",8989.51,0)
8989.51
"BLD",10073,"KRN",8989.52,0)
8989.52
"BLD",10073,"KRN",8994,0)
8994
"BLD",10073,"KRN","B",.4,.4)

"BLD",10073,"KRN","B",.401,.401)

"BLD",10073,"KRN","B",.402,.402)

"BLD",10073,"KRN","B",.403,.403)

"BLD",10073,"KRN","B",.5,.5)

"BLD",10073,"KRN","B",.84,.84)

"BLD",10073,"KRN","B",3.6,3.6)

"BLD",10073,"KRN","B",3.8,3.8)

"BLD",10073,"KRN","B",9.2,9.2)

"BLD",10073,"KRN","B",9.8,9.8)

"BLD",10073,"KRN","B",19,19)

"BLD",10073,"KRN","B",19.1,19.1)

"BLD",10073,"KRN","B",101,101)

"BLD",10073,"KRN","B",409.61,409.61)

"BLD",10073,"KRN","B",771,771)

"BLD",10073,"KRN","B",779.2,779.2)

"BLD",10073,"KRN","B",870,870)

"BLD",10073,"KRN","B",8989.51,8989.51)

"BLD",10073,"KRN","B",8989.52,8989.52)

"BLD",10073,"KRN","B",8994,8994)

"BLD",10073,"QDEF")
^^^^NO^^^^^^NO
"BLD",10073,"QUES",0)
^9.62^^
"BLD",10073,"REQB",0)
^9.611^1^1
"BLD",10073,"REQB",1,0)
PSO*7.0*282^2
"BLD",10073,"REQB","B","PSO*7.0*282",1)

"MBREQ")
0
"PKG",206,-1)
1^1
"PKG",206,0)
OUTPATIENT PHARMACY^PSO^OUTPATIENT LABELS, PROFILE, INVENTORY, PRESCRIPTIONS
"PKG",206,20,0)
^9.402P^^
"PKG",206,22,0)
^9.49I^1^1
"PKG",206,22,1,0)
7.0^3021122^3021202^66481
"PKG",206,22,1,"PAH",1,0)
455^3160406^123456952
"PKG",206,22,1,"PAH",1,1,0)
^^18^18^3160406
"PKG",206,22,1,"PAH",1,1,1,0)
This patch addresses five issues:
"PKG",206,22,1,"PAH",1,1,2,0)
         1. The calculation of the dosage of a prescription will not 
"PKG",206,22,1,"PAH",1,1,3,0)
populate when creating an order and entering the schedule in all lower 
"PKG",206,22,1,"PAH",1,1,4,0)
case. 
"PKG",206,22,1,"PAH",1,1,5,0)
        2. Schedules are not expanding to SPANISH. The labels aren't 
"PKG",206,22,1,"PAH",1,1,6,0)
printing in Spanish translated from English as necessary when creating a 
"PKG",206,22,1,"PAH",1,1,7,0)
prescription in outpatient pharmacy. 
"PKG",206,22,1,"PAH",1,1,8,0)
 
"PKG",206,22,1,"PAH",1,1,9,0)
        3. In the Computerized Patient Record System (CPRS) Non-VA 
"PKG",206,22,1,"PAH",1,1,10,0)
medications that have a sig longer than 3 words will not display in the 
"PKG",206,22,1,"PAH",1,1,11,0)
meds tab.
"PKG",206,22,1,"PAH",1,1,12,0)
 
"PKG",206,22,1,"PAH",1,1,13,0)
        4. If a Health Level 7 (HL7) delimiter character is inserted
"PKG",206,22,1,"PAH",1,1,14,0)
into the comment field for Non-VA meds, the escape character is 
"PKG",206,22,1,"PAH",1,1,15,0)
incorrectly stored in the global.
"PKG",206,22,1,"PAH",1,1,16,0)
 
"PKG",206,22,1,"PAH",1,1,17,0)
        5. Non-VA meds do not display on the Meds Tab in CPRS if the
"PKG",206,22,1,"PAH",1,1,18,0)
Start Date is set to NOW when creating the Non-VA med.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","PSONVNEW")
0^3^B29560779^B22533044
"RTN","PSONVNEW",1,0)
PSONVNEW ;BIR/SAB - Add Non-VA Med orders ;2/13/07 11:35am
"RTN","PSONVNEW",2,0)
 ;;7.0;OUTPATIENT PHARMACY;**132,118,203,265,282,455**;DEC 1997;Build 14
"RTN","PSONVNEW",3,0)
 ;External reference ^PS(50.606 supported by DBIA 2174
"RTN","PSONVNEW",4,0)
 ;External reference ^PS(50.7 supported by DBIA 2223
"RTN","PSONVNEW",5,0)
 ;External reference ^PS(55 supported by DBIA 2228
"RTN","PSONVNEW",6,0)
 ;External reference to ^PS(51.2 supported by DBIA 2226
"RTN","PSONVNEW",7,0)
 ;External reference to ^ORHLSEC supported by DBIA 4922
"RTN","PSONVNEW",8,0)
 ;adds new non-va med to #55
"RTN","PSONVNEW",9,0)
 ;
"RTN","PSONVNEW",10,0)
 ;*203 change 3 fields from "///" to "////" they can be larger than
"RTN","PSONVNEW",11,0)
 ;      defined and need to be put in as is to prevent hard crash.
"RTN","PSONVNEW",12,0)
 ;*265 change update of Dosage & Sched fields DR strings, can contain ;      free form char ";"
"RTN","PSONVNEW",13,0)
 ;
"RTN","PSONVNEW",14,0)
 I '$D(^PS(55,DFN,0)) D
"RTN","PSONVNEW",15,0)
 .K DD,DO S DIC(0)="L",(DINUM,X)=DFN,DIC("DR")="52.1////2" D FILE^DICN D:Y<1  K DIC,DA,DR,DD,DO
"RTN","PSONVNEW",16,0)
 ..S $P(^PS(55,DFN,0),"^")=DFN,$P(^(0),"^",6)=2
"RTN","PSONVNEW",17,0)
 ..K DIK S DA=DFN,DIK="^PS(55,",DIK(1)=.01 D EN^DIK K DIK
"RTN","PSONVNEW",18,0)
 ;
"RTN","PSONVNEW",19,0)
 N PSONVA,DSC K PCOM
"RTN","PSONVNEW",20,0)
 F I=0:0 S I=$O(MSG(I)) Q:'I  D
"RTN","PSONVNEW",21,0)
 .I $P(MSG(I),"|")="NTE",$P(MSG(I),"|",2)=6 S DSC=$G(DSC)+1 S PCOM(DSC)=$P(MSG(I),"|",4) F T=0:0 S T=$O(MSG(I,T)) Q:'T  S DSC=DSC+1,PCOM(DSC)=MSG(I,T)
"RTN","PSONVNEW",22,0)
 .I $P(MSG(I),"|")="ORC" S STDT=$P(MSG(I),"|",8),STRDT=$$HL7TFM^XLFDT($P(STDT,"^",4))
"RTN","PSONVNEW",23,0)
 ;
"RTN","PSONVNEW",24,0)
 ; - Files the Non-VA Med order into the "NVA" multiple in File #55
"RTN","PSONVNEW",25,0)
 K DR,DIC,DD,DA,DO,DINUM S DA(1)=DFN,X=PSORDITE
"RTN","PSONVNEW",26,0)
 ;*203,*265 fix DR & dose & sched fields
"RTN","PSONVNEW",27,0)
 S PSODOS=$G(PSOLQ1I(1)),PSOSCH=$$SCHED($P($G(QTARRAY(1)),"^"))
"RTN","PSONVNEW",28,0)
 S DR="1////"_PSODDRUG_";2////^S X=PSODOS;3////"_$$ROUTE($G(ROUTE(1)))
"RTN","PSONVNEW",29,0)
 S DR=DR_";4////^S X=PSOSCH;7////"_$G(PLACER)_";8///"_$P($G(STRDT),".") ;*455 - ONLY STORE DATE, NOT TIME
"RTN","PSONVNEW",30,0)
 S DR=DR_";11///"_$G(PSOLOG)_";12////"_$G(ENTERED)_";13////"_$G(LOCATION)
"RTN","PSONVNEW",31,0)
 S DIC("DR")=DR,DIC(0)="L",DIC="^PS(55,"_DFN_",""NVA"",",DLAYGO=55.05
"RTN","PSONVNEW",32,0)
 D FILE^DICN S PSONVA=+Y K DR,DIC,DD,DA,DO,DINUM
"RTN","PSONVNEW",33,0)
 K PSODOS,PSOSCH
"RTN","PSONVNEW",34,0)
 ;
"RTN","PSONVNEW",35,0)
 K DSC,STDT
"RTN","PSONVNEW",36,0)
 I $P(PSODSC,"^",2)]"" D
"RTN","PSONVNEW",37,0)
 .S DSC=1,^PS(55,DFN,"NVA",PSONVA,"DSC",1,0)=$P(PSODSC,"^",2)
"RTN","PSONVNEW",38,0)
 .S ^PS(55,DFN,"NVA",PSONVA,"DSC",0)="^55.052^1^1^"_DT_"^^^^"
"RTN","PSONVNEW",39,0)
 I $O(PSODSC(0)) D
"RTN","PSONVNEW",40,0)
 .F T=0:0 S T=$O(PSODSC(T)) Q:'T  S DSC=$G(DSC)+1,^PS(55,DFN,"NVA",PSONVA,"DSC",DSC,0)=PSODSC(T)
"RTN","PSONVNEW",41,0)
 .S ^PS(55,DFN,"NVA",PSONVA,"DSC",0)="^55.052^"_DSC_"^"_DSC_"^"_DT_"^^^^"
"RTN","PSONVNEW",42,0)
 I $O(PCOM(0)) F T=0:0 S T=$O(PCOM(T)) Q:'T  D
"RTN","PSONVNEW",43,0)
 .S DSC=$G(DSC)+1,^PS(55,DFN,"NVA",PSONVA,"DSC",DSC,0)=$$UNESC^ORHLESC(PCOM(T)) ;*455
"RTN","PSONVNEW",44,0)
 .S ^PS(55,DFN,"NVA",PSONVA,"DSC",0)="^55.052^"_DSC_"^"_DSC_"^"_DT_"^^^^"
"RTN","PSONVNEW",45,0)
 .S ^PS(55,DFN,"NVA",PSONVA,1,T,0)=$$UNESC^ORHLESC(PCOM(T)) ;*455
"RTN","PSONVNEW",46,0)
 .S ^PS(55,DFN,"NVA",PSONVA,1,0)="^^"_T_"^"_T_"^"_DT_"^"
"RTN","PSONVNEW",47,0)
 I $G(OCOUNT) S ^PS(55,DFN,"NVA",PSONVA,"OCK",0)="^55.051^"_OCOUNT_"^"_OCOUNT F OCOUNT=1:1:OCOUNT D
"RTN","PSONVNEW",48,0)
 .S ^PS(55,DFN,"NVA",PSONVA,"OCK",OCOUNT,0)=$G(OBXAR(OCOUNT,1))_"^"_PROV
"RTN","PSONVNEW",49,0)
 .I $G(OBXAR(OCOUNT,1))]"" S ^PS(55,DFN,"NVA",PSONVA,"OCK","B",$E(OBXAR(OCOUNT,1),1,30),OCOUNT)=""
"RTN","PSONVNEW",50,0)
 .S PSOBCT=1 F LLL=2:1 Q:'$D(OBXAR(OCOUNT,LLL))  S ^PS(55,DFN,"NVA",PSONVA,"OCK",OCOUNT,"OVR",1,0)=OBXAR(OCOUNT,LLL)
"RTN","PSONVNEW",51,0)
 K HOLD,SCH,SCHED,SDL,SGL,A,W,WW,CHR,STRDT
"RTN","PSONVNEW",52,0)
 ;
"RTN","PSONVNEW",53,0)
 M PMSG=MSG
"RTN","PSONVNEW",54,0)
REIN K MSG S NULLFLDS="F JJ=0:1:LIMIT S FIELD(JJ)="""""
"RTN","PSONVNEW",55,0)
 K ^UTILITY("DIQ1",$J),DIQ S DA=$P($$SITE^VASITE(),"^")
"RTN","PSONVNEW",56,0)
 I $G(DA) S DIC=4,DIQ(0)="I",DR="99" D EN^DIQ1 S PSOHINST=$G(^UTILITY("DIQ1",$J,4,DA,99,"I")) K ^UTILITY("DIQ1",$J),DA,DR,DIQ,DIC
"RTN","PSONVNEW",57,0)
 S MSG(1)="MSH|^~\&|PHARMACY|"_$G(PSOHINST)_"|||||ORR"
"RTN","PSONVNEW",58,0)
 ;
"RTN","PSONVNEW",59,0)
 S COUNT=1,LIMIT=5 X NULLFLDS D DEM^VADPT S NAME=$G(VADM(1)) K VADM
"RTN","PSONVNEW",60,0)
 S FIELD(0)="PID",FIELD(3)=DFN,FIELD(5)=NAME
"RTN","PSONVNEW",61,0)
 D SEG^PSOHLSN1
"RTN","PSONVNEW",62,0)
 ;
"RTN","PSONVNEW",63,0)
 ;
"RTN","PSONVNEW",64,0)
 S LIMIT=19 X NULLFLDS
"RTN","PSONVNEW",65,0)
 S FIELD(0)="PV1",FIELD(2)="O",FIELD(3)=LOCATION
"RTN","PSONVNEW",66,0)
 D SEG^PSOHLSN1
"RTN","PSONVNEW",67,0)
 ;
"RTN","PSONVNEW",68,0)
 S LIMIT=15 X NULLFLDS
"RTN","PSONVNEW",69,0)
 S FIELD(0)="ORC",FIELD(1)=$S($G(REIN):"SC",1:"OK"),FIELD(2)=PLACER_"^OR",FIELD(3)=PSONVA_"N^PS",FIELD(5)="CM"
"RTN","PSONVNEW",70,0)
 S FIELD(10)=$P(^PS(55,DFN,"NVA",PSONVA,0),"^",11)_"^"_$P(^VA(200,$P(^PS(55,DFN,"NVA",PSONVA,0),"^",11),0),"^")
"RTN","PSONVNEW",71,0)
 D SEG^PSOHLSN1
"RTN","PSONVNEW",72,0)
 I $G(REIN) S MSG(COUNT)=MSG(COUNT)_"|^^^^DATE OF DEATH DELETED BY MAS.^"
"RTN","PSONVNEW",73,0)
 ;
"RTN","PSONVNEW",74,0)
 S LIMIT=1 X NULLFLDS
"RTN","PSONVNEW",75,0)
 S FIELD(0)="RXO",OI=$P(^PS(55,DFN,"NVA",PSONVA,0),"^")
"RTN","PSONVNEW",76,0)
 S FIELD(1)="^^^"_OI_"^"_$P($G(^PS(50.7,OI,0)),"^")_" "_$P($G(^PS(50.606,+$P($G(^(0)),"^",2),0)),"^")_"^99PSP"
"RTN","PSONVNEW",77,0)
 D SEG^PSOHLSN1
"RTN","PSONVNEW",78,0)
 ;
"RTN","PSONVNEW",79,0)
 S LIMIT=1 X NULLFLDS
"RTN","PSONVNEW",80,0)
 S FIELD(0)="RXE"
"RTN","PSONVNEW",81,0)
 S PSOPSTRT="",X=$P(^PS(55,DFN,"NVA",PSONVA,0),"^",9) I X S PSOPSTRT=$$FMTHL7^XLFDT(X)
"RTN","PSONVNEW",82,0)
 K X S FIELD(1)="^^^"_$G(PSOPSTRT)_"^"
"RTN","PSONVNEW",83,0)
 D SEG^PSOHLSN1
"RTN","PSONVNEW",84,0)
 ;
"RTN","PSONVNEW",85,0)
 D SEND^PSOHLSN1 K FIELDS,LIMIT,PSODSC,PSONVA,OI Q:$G(REIN)
"RTN","PSONVNEW",86,0)
 ;dc change order
"RTN","PSONVNEW",87,0)
DC F OO=0:0 S OO=$O(PMSG(OO)) Q:'OO  I $P(PMSG(OO),"|")="ORC",$P(PMSG(OO),"|",2)="XO" D  Q
"RTN","PSONVNEW",88,0)
 .F XO=0:0 S XO=$O(PMSG(XO)) Q:'XO  I $P(PMSG(XO),"|")="ZRX" S POERR("PSOFILNM")=$P(PMSG(XO),"|",2) Q
"RTN","PSONVNEW",89,0)
 I +$G(POERR("PSOFILNM")),$G(^PS(55,DFN,"NVA",+$G(POERR("PSOFILNM")),0)) S PDFN=DFN D XO^PSOORUTL
"RTN","PSONVNEW",90,0)
 K XO,OO,PMSG
"RTN","PSONVNEW",91,0)
 Q
"RTN","PSONVNEW",92,0)
SCHED(SCH) ; Returns the SCHEDULE description
"RTN","PSONVNEW",93,0)
 ;SCH = Schedule entered
"RTN","PSONVNEW",94,0)
 ;Returns Expanded Schedule, or ""
"RTN","PSONVNEW",95,0)
 N SCHEX,SPCT
"RTN","PSONVNEW",96,0)
 S SCH=$$UPPER(SCH)
"RTN","PSONVNEW",97,0)
 I SCH="" Q ""
"RTN","PSONVNEW",98,0)
 S SPCT=0 F I=1:1:$L(SCH) I $E(SCH,I)=" " S SPCT=SPCT+1
"RTN","PSONVNEW",99,0)
 S SCHEX=$$EXP(SCH) I SCHEX]"" Q SCHEX
"RTN","PSONVNEW",100,0)
 Q:SPCT=0 SCH
"RTN","PSONVNEW",101,0)
 Q $$SCHED($P(SCH," ",1,SPCT))_" "_$$SCHED($P(SCH," ",SPCT+1))
"RTN","PSONVNEW",102,0)
EXP(X) ; expand based on 51.1 and 51
"RTN","PSONVNEW",103,0)
 N PSIN,SCFLG,SCHEX
"RTN","PSONVNEW",104,0)
 S PSIN=0 F  S PSIN=$O(^PS(51.1,"APPSJ",X,PSIN)) Q:'PSIN!$G(SCFLG)  I $P(^PS(51.1,PSIN,0),"^",8)'="" S SCHEX=$P($G(^(0)),"^",8),SCFLG=1
"RTN","PSONVNEW",105,0)
 Q:$G(SCFLG) SCHEX
"RTN","PSONVNEW",106,0)
 S PSIN=0 F  S PSIN=$O(^PS(51,"B",X,PSIN)) Q:'PSIN!$G(SCLFL)  I PSIN,($P(^PS(51,PSIN,0),"^",4)<2)&($P($G(^PS(51,"A",X)),"^")'="") S SCHEX=$P(^(X),"^"),SCFLG=1
"RTN","PSONVNEW",107,0)
 Q:$G(SCFLG) SCHEX
"RTN","PSONVNEW",108,0)
 Q ""
"RTN","PSONVNEW",109,0)
UPPER(PSOSCUP) ;
"RTN","PSONVNEW",110,0)
 Q $TR(PSOSCUP,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","PSONVNEW",111,0)
ROUTE(RTIEN) ; Returns the ROUTE description
"RTN","PSONVNEW",112,0)
 N X
"RTN","PSONVNEW",113,0)
 Q:'$G(RTIEN) "" S X=$G(^PS(51.2,RTIEN,0))
"RTN","PSONVNEW",114,0)
 Q $S($P(X,"^",2)'="":$P(X,"^",2),1:$P(X,"^"))
"RTN","PSONVNEW",115,0)
 ;
"RTN","PSONVNEW",116,0)
APSOD ;dc non-va meds because of date of death entry called from psocan3
"RTN","PSONVNEW",117,0)
 N PDA,PDFN ;,POERR("PSOFILNM")
"RTN","PSONVNEW",118,0)
 F PDA=0:0 S PDA=$O(^PS(55,PSODFN,"NVA",PDA)) Q:'PDA  I '$P(^PS(55,PSODFN,"NVA",PDA,0),"^",6),'$P(^(0),"^",7) D
"RTN","PSONVNEW",119,0)
 .S POERR("PSOFILNM")=PDA,PDFN=PSODFN D XO^PSOORUTL
"RTN","PSONVNEW",120,0)
 Q
"RTN","PSOSIG")
0^2^B65860748^B65537760
"RTN","PSOSIG",1,0)
PSOSIG ;BIR/RTR-Utility to create SIG ;6/04/00
"RTN","PSOSIG",2,0)
 ;;7.0;OUTPATIENT PHARMACY;**46,99,114,391,313,282,455**;DEC 1997;Build 14
"RTN","PSOSIG",3,0)
 ;External reference to PS(51 supported by DBIA 2224
"RTN","PSOSIG",4,0)
 ;External reference to PS(51.1 supported by DBIA 2225
"RTN","PSOSIG",5,0)
 ;External reference to PSDRUG( supported by DBIA 221
"RTN","PSOSIG",6,0)
 ;
"RTN","PSOSIG",7,0)
EN(PSOSIGX) ;
"RTN","PSOSIG",8,0)
 N VARIABLE
"RTN","PSOSIG",9,0)
 Q
"RTN","PSOSIG",10,0)
SCH ;*282 Preserve old functionality
"RTN","PSOSIG",11,0)
 S SCHEX=$$SCHE(SCH)
"RTN","PSOSIG",12,0)
 Q
"RTN","PSOSIG",13,0)
 ;
"RTN","PSOSIG",14,0)
 ;SCHE is the new schedule expander
"RTN","PSOSIG",15,0)
SCHE(SCH) ;
"RTN","PSOSIG",16,0)
 ;SCH = Schedule entered
"RTN","PSOSIG",17,0)
 ;Returns Expanded Schedule, or ""
"RTN","PSOSIG",18,0)
 N SCHEX,SPCT
"RTN","PSOSIG",19,0)
 I SCH[""""!($A(SCH)=45)!(SCH?.E1C.E)!($L(SCH," ")>$S(SCH["PRN":4,1:3))!($L(SCH)>20)!($L(SCH)<1) K SCH Q ""
"RTN","PSOSIG",20,0)
 S SCH=$$UPPER(SCH)
"RTN","PSOSIG",21,0)
 S SPCT=0 F I=1:1:$L(SCH) I $E(SCH,I)=" " S SPCT=SPCT+1
"RTN","PSOSIG",22,0)
 S SCHEX=$$EXP(SCH) I SCHEX]"" Q SCHEX
"RTN","PSOSIG",23,0)
 Q:SPCT=0 SCH
"RTN","PSOSIG",24,0)
 Q $$SCHE($P(SCH," ",1,SPCT))_" "_$$SCHE($P(SCH," ",SPCT+1))
"RTN","PSOSIG",25,0)
EXP(X) ; expand based on 51.1 and 51
"RTN","PSOSIG",26,0)
 N PSIN,SCFLG,SCHEX
"RTN","PSOSIG",27,0)
 S PSIN=0 F  S PSIN=$O(^PS(51.1,"APPSJ",X,PSIN)) Q:'PSIN!$G(SCFLG)  I $P(^PS(51.1,PSIN,0),"^",8)'="" S SCHEX=$P($G(^(0)),"^",8),SCFLG=1
"RTN","PSOSIG",28,0)
 Q:$G(SCFLG) SCHEX
"RTN","PSOSIG",29,0)
 S PSIN=0 F  S PSIN=$O(^PS(51,"B",X,PSIN)) Q:'PSIN!$G(SCLFL)  I PSIN,($P(^PS(51,PSIN,0),"^",4)<2)&($P($G(^PS(51,"A",X)),"^")'="") S SCHEX=$P(^(X),"^"),SCFLG=1
"RTN","PSOSIG",30,0)
 Q:$G(SCFLG) SCHEX
"RTN","PSOSIG",31,0)
 Q ""
"RTN","PSOSIG",32,0)
 ;
"RTN","PSOSIG",33,0)
QTY(PSOQX) ;
"RTN","PSOSIG",34,0)
 N QDOSE
"RTN","PSOSIG",35,0)
 K PSOQX("QTY")
"RTN","PSOSIG",36,0)
 I $G(PSOFDR),'$G(CPRN) N PSOQTYQT,PSOLPSD S PSOQTYQT=0 D  I $G(PSOQTYQT) Q
"RTN","PSOSIG",37,0)
 .S PSOLPSD="" F  S PSOLPSD=$O(PSONEW("SCHEDULE",PSOLPSD)) Q:PSOLPSD=""!(PSOQTYQT)  I $G(PSONEW("SCHEDULE",PSOLPSD))["PRN"!($G(PSONEW("SCHEDULE",PSOLPSD))["prn")!($G(PSONEW("SCHEDULE",PSOLPSD))["Prn") S PSOQTYQT=1 Q
"RTN","PSOSIG",38,0)
 N PSOOUTQT S PSOOUTQT=1
"RTN","PSOSIG",39,0)
QTYCP ;CPRS qty call comes through here
"RTN","PSOSIG",40,0)
 N PSQQUIT,QTSH,PSQ,PSQMIN,PSQMINZ,PSOQRND,PSOLOWER,PSOLOWX,PSOLOWXL,PSOLOWST
"RTN","PSOSIG",41,0)
 K PSOFRQ S PSQQUIT=0
"RTN","PSOSIG",42,0)
 I '$G(PSOCPRQT) S QDOSE=0 F PSQ=0:0 S PSQ=$O(PSOQX("DOSE",PSQ)) Q:'PSQ  S QDOSE=PSQ S:'$G(PSOQX("DOSE ORDERED",PSQ)) PSQQUIT=1
"RTN","PSOSIG",43,0)
 ;Q:PSQQUIT!('QDOSE)
"RTN","PSOSIG",44,0)
 I '$G(PSOCPRQT) Q:PSQQUIT
"RTN","PSOSIG",45,0)
 Q:'$G(PSOQX("DAYS SUPPLY"))
"RTN","PSOSIG",46,0)
 Q:'$G(QDOSE)
"RTN","PSOSIG",47,0)
 G:QDOSE>1 COMP
"RTN","PSOSIG",48,0)
 Q:'$G(PSOQX("DOSE ORDERED",1))
"RTN","PSOSIG",49,0)
 Q:'$G(PSOQX("DAYS SUPPLY"))&('$G(PSOQX("DURATION",1)))
"RTN","PSOSIG",50,0)
 S PSOLOWER=0
"RTN","PSOSIG",51,0)
 I $G(PSOQX("DURATION",1)) D
"RTN","PSOSIG",52,0)
 .S PSOLOWX=$L(PSOQX("DURATION",1))
"RTN","PSOSIG",53,0)
 .S PSOLOWXL=$S($E(PSOQX("DURATION",1),PSOLOWX)="M":1,$E(PSOQX("DURATION",1),PSOLOWX)="H":60,$E(PSOQX("DURATION",1),PSOLOWX)="S":.01666,$E(PSOQX("DURATION",1),PSOLOWX)="W":10080,$E(PSOQX("DURATION",1),PSOLOWX)="L":43200,1:1440)
"RTN","PSOSIG",54,0)
 .S PSOLOWER=PSOLOWXL*(+$G(PSOQX("DURATION",1)))
"RTN","PSOSIG",55,0)
 S PSOLOWX=0 I +$G(PSOQX("DAYS SUPPLY")) S PSOLOWX=1440*+$G(PSOQX("DAYS SUPPLY"))
"RTN","PSOSIG",56,0)
 Q:'$G(PSOLOWER)&('$G(PSOLOWX))
"RTN","PSOSIG",57,0)
 S QTSH=$G(PSOQX("SCHEDULE",1)) D QTS Q:PSQQUIT!('$G(PSOFRQ))
"RTN","PSOSIG",58,0)
 S PSOLOWST=$S('$G(PSOLOWER):$G(PSOLOWX),'$G(PSOLOWX):$G(PSOLOWER),$G(PSOLOWER)>$G(PSOLOWX):$G(PSOLOWX),$G(PSOLOWX)>$G(PSOLOWER):$G(PSOLOWER),$G(PSOLOWX)=$G(PSOLOWER):$G(PSOLOWER),1:0)
"RTN","PSOSIG",59,0)
 Q:'$G(PSOLOWST)
"RTN","PSOSIG",60,0)
 S PSQMIN=+$G(PSOLOWST)
"RTN","PSOSIG",61,0)
 S PSQMINZ=PSQMIN/PSOFRQ
"RTN","PSOSIG",62,0)
 S PSOQRND=PSQMINZ*+$G(PSOQX("DOSE ORDERED",1)) Q:'PSOQRND
"RTN","PSOSIG",63,0)
 D ROUND G QEND
"RTN","PSOSIG",64,0)
 Q
"RTN","PSOSIG",65,0)
COMP ;COMPLEX DOSE HERE
"RTN","PSOSIG",66,0)
 N PSOQEXC,PSOQAND,PSOQTHEN,PSQL,PSQMNL,PSQMNLX,PSODUTOT,PSODUDIF,PSODUMIS,PSODUREP,PSQ1,PSODUX,PSODUXX,PSODSMIN
"RTN","PSOSIG",67,0)
 ;PSODUTOT = TOTAL OF ALL DURATIONS
"RTN","PSOSIG",68,0)
 ;PSODUDIF = DIFF. OF DURATION VS DAYS SUPPLY
"RTN","PSOSIG",69,0)
 ;PSODUMIS = # OF SEQUENCES MISSING A DURATION IF >1 CAN'T DEFAULT
"RTN","PSOSIG",70,0)
 ;PSODUREP = SEQUENCE # THAT IS MISSING DURATION
"RTN","PSOSIG",71,0)
 ;PSODSMIN = MINUTES OF DAYS SUPPLY
"RTN","PSOSIG",72,0)
 S (PSODUTOT,PSODUDIF,PSODUMIS,PSODUREP,PSODSMIN,PSOQAND,PSOQTHEN,PSOQEXC)=0
"RTN","PSOSIG",73,0)
 F PSQL=1:1:QDOSE S:$G(PSOQX("CONJUNCTION",PSQL))["A" PSOQAND=1 S:$G(PSOQX("CONJUNCTION",PSQL))["T" PSOQTHEN=1 S:$G(PSOQX("CONJUNCTION",PSQL))["X" PSOQEXC=1
"RTN","PSOSIG",74,0)
 I $G(PSOQEXC) G QEND
"RTN","PSOSIG",75,0)
 I $G(PSOQAND) G COMP^PSOSIGCX
"RTN","PSOSIG",76,0)
 F PSQ1=1:1:QDOSE D  Q:PSODUMIS>1
"RTN","PSOSIG",77,0)
 .I '$G(PSOQX("DURATION",PSQ1)) S PSODUMIS=PSODUMIS+1,PSODUREP=PSQ1 Q
"RTN","PSOSIG",78,0)
 .S PSODUX=$L(PSOQX("DURATION",PSQ1))
"RTN","PSOSIG",79,0)
 .S PSODUXX=$S($E(PSOQX("DURATION",PSQ1),PSODUX)="M":1,$E(PSOQX("DURATION",PSQ1),PSODUX)="H":60,$E(PSOQX("DURATION",PSQ1),PSODUX)="S":.01666,$E(PSOQX("DURATION",PSQ1),PSODUX)="W":10080,$E(PSOQX("DURATION",PSQ1),PSODUX)="L":43200,1:1440)
"RTN","PSOSIG",80,0)
 .S PSODUTOT=PSODUTOT+(PSODUXX*(+$G(PSOQX("DURATION",PSQ1))))
"RTN","PSOSIG",81,0)
 G:PSODUMIS>1 QEND ; More than 1 sequence missing a duration
"RTN","PSOSIG",82,0)
 I $G(PSODUMIS),'$G(PSOQX("DAYS SUPPLY")) G QEND ; missing 1 duration, no days supply
"RTN","PSOSIG",83,0)
 S PSODSMIN=1440*+$G(PSOQX("DAYS SUPPLY"))
"RTN","PSOSIG",84,0)
 I $G(PSODSMIN),$G(PSODSMIN)<$G(PSODUTOT) G QEND
"RTN","PSOSIG",85,0)
 I '$G(PSODUMIS),$G(PSODSMIN),$G(PSODUTOT)>$G(PSODSMIN) G QEND ; no missing durations, but total durations are greater than days supply
"RTN","PSOSIG",86,0)
 I $G(PSODUMIS),$G(PSODSMIN),$G(PSODSMIN)'>$G(PSODUTOT) G QEND ; 1 missing duration, and total of other durations are not less than days supply
"RTN","PSOSIG",87,0)
 I '$G(PSODSMIN),$G(PSODUMIS) G QEND ; no days supply, missing a duration
"RTN","PSOSIG",88,0)
 I $G(PSODUREP) S PSODUDIF=$G(PSODSMIN)-$G(PSODUTOT)
"RTN","PSOSIG",89,0)
 F PSQ=1:1:QDOSE D  Q:$G(PSQQUIT)
"RTN","PSOSIG",90,0)
 .I '$G(PSOQX("DOSE ORDERED",PSQ))!($G(PSOQX("SCHEDULE",PSQ))="") S PSQQUIT=1 Q
"RTN","PSOSIG",91,0)
 .S QTSH=$G(PSOQX("SCHEDULE",PSQ)) D QTS S:'$G(PSOFRQ) PSQQUIT=1 Q:$G(PSQQUIT)
"RTN","PSOSIG",92,0)
 .I $G(PSOQX("DURATION",PSQ)) S PSQMNL=$L(PSOQX("DURATION",PSQ)) D
"RTN","PSOSIG",93,0)
 ..S PSQMNLX=$S($E(PSOQX("DURATION",PSQ),PSQMNL)="M":1,$E(PSOQX("DURATION",PSQ),PSQMNL)="H":60,$E(PSOQX("DURATION",PSQ),PSQMNL)="S":.01666,$E(PSOQX("DURATION",PSQ),PSQMNL)="W":10080,$E(PSOQX("DURATION",PSQ),PSQMNL)="L":43200,1:1440)
"RTN","PSOSIG",94,0)
 ..S PSQMIN=PSQMNLX*(+$G(PSOQX("DURATION",PSQ)))
"RTN","PSOSIG",95,0)
 .I '$G(PSOQX("DURATION",PSQ)) S PSQMIN=$G(PSODUDIF)
"RTN","PSOSIG",96,0)
 .S PSQMINZ=PSQMIN/PSOFRQ
"RTN","PSOSIG",97,0)
 .S PSOQRND=$S('$G(PSOQRND):PSQMINZ*+$G(PSOQX("DOSE ORDERED",PSQ)),1:$G(PSOQRND)+(PSQMINZ*+$G(PSOQX("DOSE ORDERED",PSQ))))
"RTN","PSOSIG",98,0)
 I $G(PSQQUIT) G QEND
"RTN","PSOSIG",99,0)
 I $G(PSOQRND) D ROUND
"RTN","PSOSIG",100,0)
 G QEND
"RTN","PSOSIG",101,0)
QTS ;*282 Preserve Old Functionality
"RTN","PSOSIG",102,0)
 S PSOFRQ=$$QTSCH(QTSH)
"RTN","PSOSIG",103,0)
 I '$G(PSOFRQ) S PSQQUIT=1
"RTN","PSOSIG",104,0)
 Q
"RTN","PSOSIG",105,0)
 ;
"RTN","PSOSIG",106,0)
QTSCH(QTSH) ; 
"RTN","PSOSIG",107,0)
 ; Return Frequency for Schedule QTSH
"RTN","PSOSIG",108,0)
 ; Otherwise return ""
"RTN","PSOSIG",109,0)
 N PSOFRQ,SPCT,FOUND
"RTN","PSOSIG",110,0)
 Q:$G(QTSH)="" ""
"RTN","PSOSIG",111,0)
 Q:$E(QTSH,1)=" " ""
"RTN","PSOSIG",112,0)
 S QTSH=$$UPPER(QTSH)
"RTN","PSOSIG",113,0)
 S SPCT=1,PSOFRQ=0 F I=1:1:$L(QTSH) I $E(QTSH,I)=" " S SPCT=SPCT+1
"RTN","PSOSIG",114,0)
 F I=0:1:SPCT-1 S SCHTMP=$P(QTSH," ",1,SPCT-I) Q:PSOFRQ  D
"RTN","PSOSIG",115,0)
 . F II=0:0 S II=$O(^PS(51.1,"APPSJ",SCHTMP,II)) Q:'II!PSOFRQ  S PSOFRQ=$P(^PS(51.1,II,0),"^",3)
"RTN","PSOSIG",116,0)
 Q:PSOFRQ PSOFRQ
"RTN","PSOSIG",117,0)
  F I=0:1:SPCT-1 S SCHTMP=$P(QTSH," ",1,SPCT-I) Q:PSOFRQ  D
"RTN","PSOSIG",118,0)
 . F II=0:0 S II=$O(^PS(51,"B",SCHTMP,II)) Q:'II!PSOFRQ  I $P(^PS(51,II,0),"^",4)<2 S PSOFRQ=$P(^PS(51,II,0),"^",8)
"RTN","PSOSIG",119,0)
 Q:PSOFRQ PSOFRQ
"RTN","PSOSIG",120,0)
 Q ""
"RTN","PSOSIG",121,0)
 ;
"RTN","PSOSIG",122,0)
QEND ;
"RTN","PSOSIG",123,0)
 ; PSOMTFLG variable indicates a Maintenance Rx (Titration/Maintenance)
"RTN","PSOSIG",124,0)
 K PSOFRQ
"RTN","PSOSIG",125,0)
 I $G(PSOOUTQT),$G(QTYHLD),$G(PSOQX("QTY")),$G(QTYHLD)'=$G(PSOQX("QTY")) W !!!,"Quantity has been changed from "_QTYHLD_" to "_PSOQX("QTY") D  I '$G(PSOMTFLG) W ! N DIR S DIR(0)="E",DIR("A")="Press Return to Continue" D ^DIR W !
"RTN","PSOSIG",126,0)
 .I $G(PSONEW("FLD"))=8,$P($G(OR0),"^",24),$G(PSODRUG("IEN")),$D(^PSDRUG(+$G(PSODRUG("IEN")),0)) D
"RTN","PSOSIG",127,0)
 ..I $P(^PSDRUG(PSODRUG("IEN"),0),"^",3)[2!($P(^PSDRUG(PSODRUG("IEN"),0),"^",3)["F") Q
"RTN","PSOSIG",128,0)
 ..N ZRFA S ZRFA=$S($G(CLOZPAT)=2&(PSOQX("DAYS SUPPLY")=14):1,$G(CLOZPAT)=2&(PSOQX("DAYS SUPPLY")=7):3,$G(CLOZPAT)=1&(PSOQX("DAYS SUPPLY")=7):1,$D(CLOZPAT):0,1:5)
"RTN","PSOSIG",129,0)
 ..N ZREF,ZTQ S ZREF=QTYHLD\PSOQX("QTY") I ZREF>0 D
"RTN","PSOSIG",130,0)
 ...S ZTQ=QTYHLD*(PSOQX("# OF REFILLS")+1),ZTQ=ZTQ-PSOQX("QTY"),ZREF=ZTQ\PSOQX("QTY") S:ZREF>ZRFA ZREF=ZRFA
"RTN","PSOSIG",131,0)
 ...I ZREF'=PSOQX("# OF REFILLS") W !,"# of Refills has been changed from "_PSOQX("# OF REFILLS")_" to "_ZREF S PSOQX("# OF REFILLS")=ZREF
"RTN","PSOSIG",132,0)
 Q
"RTN","PSOSIG",133,0)
ROUND ;
"RTN","PSOSIG",134,0)
 Q:'$G(PSOQRND)
"RTN","PSOSIG",135,0)
 I PSOQRND'["." S PSOQX("QTY")=PSOQRND Q
"RTN","PSOSIG",136,0)
 S PSOQX("QTY")=$P(PSOQRND,".")+1
"RTN","PSOSIG",137,0)
 Q
"RTN","PSOSIG",138,0)
DAY(DATE) ;First 5 digits of FileMan date
"RTN","PSOSIG",139,0)
 N X
"RTN","PSOSIG",140,0)
 I DATE'?5N Q -1
"RTN","PSOSIG",141,0)
 S X=$E(DATE,4,5) I X<1!(X>12) Q -1
"RTN","PSOSIG",142,0)
 S X=DATE+1+(X=12*88)_"01"
"RTN","PSOSIG",143,0)
 Q $E($$FMADD^XLFDT(X,-1),6,7)
"RTN","PSOSIG",144,0)
 ;
"RTN","PSOSIG",145,0)
QTYX(PSOQX) ;
"RTN","PSOSIG",146,0)
 N PSOQLP,PSOQLN,PSOQAR,PSOCPRQT,QDOSE,QDOSEX S PSOCPRQT=1 F PSOQLP=0:0 S PSOQLP=$O(PSOQX("DURATION",PSOQLP)) Q:'PSOQLP  D
"RTN","PSOSIG",147,0)
 .S PSOQAR("DURATION",PSOQLP)=$G(PSOQX("DURATION",PSOQLP))
"RTN","PSOSIG",148,0)
 .I $E(PSOQX("DURATION",PSOQLP))?1A S PSOQLN=$L(PSOQX("DURATION",PSOQLP)) S PSOQX("DURATION",PSOQLP)=$E(PSOQX("DURATION",PSOQLP),2,PSOQLN)_$E(PSOQX("DURATION",PSOQLP))
"RTN","PSOSIG",149,0)
 S QDOSE=0 F QDOSEX=0:0 S QDOSEX=$O(PSOQX("DOSE ORDERED",QDOSEX)) Q:'QDOSEX  S QDOSE=QDOSE+1
"RTN","PSOSIG",150,0)
 I '$G(PSOQX("QTY")) D QTYCP G QPASS
"RTN","PSOSIG",151,0)
 D QTYCP^PSOSIGDS
"RTN","PSOSIG",152,0)
QPASS F PSOQLP=0:0 S PSOQLP=$O(PSOQAR("DURATION",PSOQLP)) Q:'PSOQLP  D
"RTN","PSOSIG",153,0)
 .S PSOQX("DURATION",PSOQLP)=$G(PSOQAR("DURATION",PSOQLP))
"RTN","PSOSIG",154,0)
 K PSOCPRQT
"RTN","PSOSIG",155,0)
 Q
"RTN","PSOSIG",156,0)
DAYS(PSOQX) ;Entry point for Days Supply calc for PSO
"RTN","PSOSIG",157,0)
 ;Kill days supply here
"RTN","PSOSIG",158,0)
 Q:'$G(PSOQX("QTY"))
"RTN","PSOSIG",159,0)
 D QTYOPS^PSOSIGDS
"RTN","PSOSIG",160,0)
 Q
"RTN","PSOSIG",161,0)
 ;
"RTN","PSOSIG",162,0)
UPPER(PSOSCUP) ;
"RTN","PSOSIG",163,0)
 Q $TR(PSOSCUP,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","PSOSPSIG")
0^1^B64981310^B53180136
"RTN","PSOSPSIG",1,0)
PSOSPSIG ;BIR/RTR,SAB-Parse out and create other lang. Sig ;9/24/01
"RTN","PSOSPSIG",2,0)
 ;;7.0;OUTPATIENT PHARMACY;**117,333,282,455**;DEC 1997;Build 14
"RTN","PSOSPSIG",3,0)
 ;PSSORPH - DBIA 3234 ;^PS(50.606 - DBIA 2174 ;^PS(50.7 - DBIA 2223
"RTN","PSOSPSIG",4,0)
 ;^PS(51.2 - DBIA 2226 ;^PS(51 - DBIA 2224 ;^PSDRUG - DBIA 221
"RTN","PSOSPSIG",5,0)
 ;^PS(59.7 - DBIA 694 ;^PS(51.1 - DBIA 2225
"RTN","PSOSPSIG",6,0)
 ;
"RTN","PSOSPSIG",7,0)
EN(PSOFX) ;
"RTN","PSOSPSIG",8,0)
 K SIG9,PSNOUN,PSOROUTE,SIG0 S OI=$P($G(^PSRX(RX,"OR1")),"^") Q:'$G(OI)
"RTN","PSOSPSIG",9,0)
 S (FND,TODOSE)=0 F WW=0:0 S WW=$O(PSOFX("DOSE",WW)) Q:'WW  S TODOSE=WW
"RTN","PSOSPSIG",10,0)
 S:TODOSE FND=1 Q:'TODOSE  S SIGDS=+$P($G(^PS(50.7,OI,0)),"^",2)
"RTN","PSOSPSIG",11,0)
 S PREP=$S($P($G(^PS(50.606,SIGDS,"MISC1")),"^",2)]"":$P(^PS(50.606,SIGDS,"MISC1"),"^",2),1:$P($G(^PS(50.606,SIGDS,"MISC")),"^",3))
"RTN","PSOSPSIG",12,0)
 S RTCNT=0 K RTC,RTCA,RTCF F SSS=1:1:TODOSE D
"RTN","PSOSPSIG",13,0)
 .S SIG0(SSS)=$S($G(PSOFX("DOSE ORDERED",SSS))'="":$G(PSOFX("DOSE ORDERED",SSS)),1:$G(PSOFX("DOSE",SSS))) ;local dosage check
"RTN","PSOSPSIG",14,0)
 .I $G(PSOFX("DOSE ORDERED",SSS))="" S LODS=$O(^PSDRUG($P(^PSRX(RX,0),"^",6),"DOS2","B",SIG0(SSS),0)) I LODS D
"RTN","PSOSPSIG",15,0)
 ..S:$P(^PSDRUG($P(^PSRX(RX,0),"^",6),"DOS2",LODS,0),"^",4)]"" PSOFX("DOSE ORDERED",SSS)=$P(^PSDRUG($P(^PSRX(RX,0),"^",6),"DOS2",LODS,0),"^",4) K LODS
"RTN","PSOSPSIG",16,0)
 .S VERBX(SSS)=$S($G(PSOFX("VERB",SSS))]""&($P($G(^PS(50.606,SIGDS,"MISC1")),"^")]""):$P(^PS(50.606,SIGDS,"MISC1"),"^"),1:$G(PSOFX("VERB",SSS)))
"RTN","PSOSPSIG",17,0)
 .I $G(PSOFX("NOUN",SSS))]"" D NON
"RTN","PSOSPSIG",18,0)
 .S RTC=+$G(PSOFX("ROUTE",SSS)) I RTC S:'RTCNT RTCA=RTC S RTCNT=RTCNT+1
"RTN","PSOSPSIG",19,0)
 .I RTCNT>1,$G(RTC),$G(RTC)'=$G(RTCA) S RTCF=1
"RTN","PSOSPSIG",20,0)
 .S PSOROUTE(SSS)=$S($P($G(^PS(51.2,+$G(PSOFX("ROUTE",SSS)),0)),"^",7)]"":$P(^(0),"^",7),$P($G(^(0)),"^",2)]"":$P(^(0),"^",2),$P($G(^(0)),"^",3)]"":$P(^(0),"^",3),1:$P($G(^(0)),"^"))
"RTN","PSOSPSIG",21,0)
 .S MEDEXP(SSS)=$S($P($G(^PS(51.2,+$G(PSOFX("ROUTE",SSS)),0)),"^",2)="":0,1:1)
"RTN","PSOSPSIG",22,0)
 .S PDAYS(SSS)=$G(PSOFX("DURATION",SSS))
"RTN","PSOSPSIG",23,0)
 .I $G(PSOFX("DURATION",SSS))]"",($E(PSOFX("DURATION",SSS),$L(PSOFX("DURATION",SSS)))'?1A) S PDAYS(SSS)=PDAYS(SSS)_"D"
"RTN","PSOSPSIG",24,0)
 .S FOR=$O(^PS(59.7,"AOTH","FOR","")) S FOR=$S(FOR]"":FOR,1:"FOR")
"RTN","PSOSPSIG",25,0)
 .S PSDUR(SSS)=$S($G(PDAYS(SSS))']"":"NULL",1:FOR_" "_$E($G(PDAYS(SSS)),1,($L($G(PDAYS(SSS)))-1))) D  I PSDUR(SSS)'="NULL" S PSDUR(SSS)=PSDUR(SSS)_" "_INTERVAL
"RTN","PSOSPSIG",26,0)
 ..I PSDUR(SSS)'="NULL" S INTERVAL=$E(PDAYS(SSS),$L(PDAYS(SSS))),INTERVAL=$S(INTERVAL="D":"DAYS",INTERVAL="W":"WEEKS",INTERVAL="H":"HOURS",INTERVAL="L":"MONTHS",INTERVAL="M":"MINUTES",INTERVAL="S":"SECONDS",1:"") D
"RTN","PSOSPSIG",27,0)
 ...Q:$G(INTERVAL)']""  S INTERVAL=$O(^PS(59.7,"AOTH",INTERVAL,""))
"RTN","PSOSPSIG",28,0)
 ...I $G(PSOFX("DURATION",SSS)),$G(PSOFX("DURATION",SSS))'>1 S INTERVAL=$E(INTERVAL,1,($L(INTERVAL)-1))
"RTN","PSOSPSIG",29,0)
 ;Schedule Expander
"RTN","PSOSPSIG",30,0)
 F GGG=1:1:TODOSE S ZSCHED(GGG)=$G(PSOFX("SCHEDULE",GGG)) D
"RTN","PSOSPSIG",31,0)
 .I $G(ZSCHED(GGG))="" S SCHED(GGG)="" Q
"RTN","PSOSPSIG",32,0)
 .S ZSCHED(GGG)=$$UPPER(ZSCHED(GGG))
"RTN","PSOSPSIG",33,0)
 .S SGLFLAG=0 F WW=0:0 S WW=$O(^PS(51.1,"B",ZSCHED(GGG),WW)) Q:'WW!($G(SGLFLAG))  D
"RTN","PSOSPSIG",34,0)
 ..I $G(^PS(51.1,WW,3))]"" S SCHED(GGG)=^(3),SGLFLAG=1 Q
"RTN","PSOSPSIG",35,0)
 ..I $P($G(^PS(51.1,WW,0)),"^",8)'="" S SCHED(GGG)=$P($G(^(0)),"^",8),SGLFLAG=1
"RTN","PSOSPSIG",36,0)
 .Q:$G(SGLFLAG)
"RTN","PSOSPSIG",37,0)
 .I $O(^PS(51,"B",ZSCHED(GGG),0)) S IN=$O(^PS(51,"B",ZSCHED(GGG),0)) I $P($G(^PS(51,IN,4)),"^")]"" S SCHED(GGG)=$P(^PS(51,IN,4),"^") K IN Q
"RTN","PSOSPSIG",38,0)
 .I $G(^PS(51,"A",ZSCHED(GGG)))'="" S SCHED(GGG)=$P(^(ZSCHED(GGG)),"^") Q
"RTN","PSOSPSIG",39,0)
 .K IN S ZZSB=0 F ZZS=1:1:$L(ZSCHED(GGG)) S SZZ=$E(ZSCHED(GGG),ZZS) I SZZ=" " S ZZSB=ZZSB+1
"RTN","PSOSPSIG",40,0)
 .S ZZSB=ZZSB+1
"RTN","PSOSPSIG",41,0)
 .K SCHHOLD F GGGZ=1:1:ZZSB S (SDL,SCHHOLD(GGGZ))=$P(ZSCHED(GGG)," ",GGGZ) D
"RTN","PSOSPSIG",42,0)
 ..Q:$G(SDL)=""
"RTN","PSOSPSIG",43,0)
 ..S SGLFLAG=0 F WW=0:0 S WW=$O(^PS(51.1,"B",SDL,WW)) Q:'WW!($G(SGLFLAG))  D
"RTN","PSOSPSIG",44,0)
 ...I $G(^PS(51.1,WW,3))]"" S SCHED(GGG)=^(3),SCHHOLD(GGGZ)=^(3),SGLFLAG=1 Q
"RTN","PSOSPSIG",45,0)
 ...I $P($G(^PS(51.1,WW,0)),"^",8)]"" S SCHHOLD(GGGZ)=$P($G(^(0)),"^",8),SGLFLAG=1
"RTN","PSOSPSIG",46,0)
 ..Q:$G(SGLFLAG)
"RTN","PSOSPSIG",47,0)
 ..I $G(^PS(51,"A",SDL))]"" S IN=$O(^PS(51,"B",SDL,0)) D:IN  Q
"RTN","PSOSPSIG",48,0)
 ...S SCHHOLD(GGGZ)=$S($G(^PS(51,IN,4))]"":^PS(51,IN,4),1:$P(^PS(51,"A",SDL),"^"))
"RTN","PSOSPSIG",49,0)
 .S SCHED(GGG)="",SGLFLAG=0 F WW=1:1:ZZSB S SCHED(GGG)=SCHED(GGG)_$S($G(SGLFLAG):" ",1:"")_$G(SCHHOLD(WW)),SGLFLAG=1
"RTN","PSOSPSIG",50,0)
 S (RTC,RTCA,PSOBDCT)=0 F FFF=0:0 S FFF=$O(SIG0(FFF)) Q:'FFF  D
"RTN","PSOSPSIG",51,0)
 .K PSOSG1,PSOSG2 S VERB=$G(VERBX(FFF)) D VERB D:$G(PSNOUN(FFF))'=""&('$G(PSOSG1)) SSS
"RTN","PSOSPSIG",52,0)
 .D FRAC
"RTN","PSOSPSIG",53,0)
 .S SIG2(FFF)=$S($G(VERB)'=""&('$G(PSOSG1)):$G(VERB)_" ",1:"")_$S($G(PSOFX("DOSE ORDERED",FFF))'="":$S($G(PSOFRAC)'="":$G(PSOFRAC),1:$G(PSOFX("DOSE ORDERED",FFF)))_" ",1:$G(PSOFX("DOSE",FFF))_" ")
"RTN","PSOSPSIG",54,0)
 .S PSOBDCT=PSOBDCT+1
"RTN","PSOSPSIG",55,0)
 .K PSOFRAC,PSOFRACX
"RTN","PSOSPSIG",56,0)
 .I RTC>0,$G(PSOROUTE(FFF))'="",'$G(RTCF) S RTCA=1
"RTN","PSOSPSIG",57,0)
 .I $G(PSOROUTE(FFF))'="" S RTC=RTC+1
"RTN","PSOSPSIG",58,0)
 .S SIG2(FFF)=SIG2(FFF)_$S($G(PSNOUN(FFF))'=""&('$G(PSOSG2)):$G(PSNOUN(FFF))_" ",1:"")_$S(PREP'=""&($G(MEDEXP(FFF)))&('RTCA):PREP_" ",1:"")
"RTN","PSOSPSIG",59,0)
 .S SIG2(FFF)=SIG2(FFF)_$S(PSOROUTE(FFF)'=""&('RTCA):PSOROUTE(FFF)_" ",1:"")
"RTN","PSOSPSIG",60,0)
 .S SIG2(FFF)=SIG2(FFF)_$S(SCHED(FFF)'="":SCHED(FFF)_$S($G(PSDUR(FFF))="NULL"&($G(PSOFX("CONJUNCTION",FFF))="")&('$O(SIG0(FFF))):"",1:" "),1:"")
"RTN","PSOSPSIG",61,0)
 .S PSOCJ=$E($G(PSOFX("CONJUNCTION",FFF)))
"RTN","PSOSPSIG",62,0)
 .S CON=$S($G(PSOCJ)="A":"AND",$G(PSOCJ)="T":"THEN",$G(PSOCJ)="S":"THEN",$G(PSOCJ)="X":"EXCEPT",1:"") I CON]"" S CON=$O(^PS(59.7,"AOTH",CON,""))
"RTN","PSOSPSIG",63,0)
 .S SIG2(FFF)=SIG2(FFF)_$S(PSDUR(FFF)'="NULL":PSDUR(FFF)_$S($G(PSOFX("CONJUNCTION",FFF))=""&('$O(SIG0(FFF))):"",1:", "),1:"")_CON
"RTN","PSOSPSIG",64,0)
 .K PSOSG1,PSOSG2
"RTN","PSOSPSIG",65,0)
 .K PSOUCS S SIG2(FFF)=$$UPPER(SIG2(FFF)) K PSOUCS
"RTN","PSOSPSIG",66,0)
 S PSODCT="" F  S PSODCT=$O(PSOFX("SIG",PSODCT)) Q:PSODCT=""  S PSOBDCT=PSOBDCT+1 S SIG2(PSOBDCT)=$G(PSOFX("SIG",PSODCT)) K PSOUCS S SIG2(PSOBDCT)=$$UPPER(SIG2(PSOBDCT)) K PSOUCS
"RTN","PSOSPSIG",67,0)
STUFF ;
"RTN","PSOSPSIG",68,0)
 S DCOUNT=0
"RTN","PSOSPSIG",69,0)
 I '$D(SIG2(1)) G QUIT
"RTN","PSOSPSIG",70,0)
 I '$O(SIG2(1)),$L(SIG2(1))<71 S SIG9(1)=SIG2(1)
"RTN","PSOSPSIG",71,0)
 S (VAR,VAR1)="",II=1
"RTN","PSOSPSIG",72,0)
 F FF=0:0 S FF=$O(SIG2(FF)) Q:'FF  S CT=0 F NN=1:1:$L(SIG2(FF)) I $E(SIG2(FF),NN)=" "!($L(SIG2(FF))=NN) S CT=CT+1 D  I $L(VAR)>70 S SIG9(II)=LIM_" ",II=II+1,VAR=VAR1
"RTN","PSOSPSIG",73,0)
 .S VAR1=$P(SIG2(FF)," ",(CT))
"RTN","PSOSPSIG",74,0)
 .S LIM=VAR
"RTN","PSOSPSIG",75,0)
 .S VAR=$S(VAR="":VAR1,1:VAR_" "_VAR1)
"RTN","PSOSPSIG",76,0)
 I $G(VAR)'="" S SIG9(II)=VAR
"RTN","PSOSPSIG",77,0)
QUIT K SSS,TT,DCOUNT,PREP,VERB,FFF,GGG,SIGDS,SIGRT,PSOROUTE,PSOSG1,PSOSG2 Q
"RTN","PSOSPSIG",78,0)
SIG1 ;
"RTN","PSOSPSIG",79,0)
 F FFF=0:0 S FFF=$O(SIG0(FFF)) Q:'FFF  S SIG2(FFF)=SIG0(FFF)
"RTN","PSOSPSIG",80,0)
 Q
"RTN","PSOSPSIG",81,0)
DAYS I +$E($P(SIG1(TT),"^",2))!($E($P(SIG1(TT),"^",2))=0) S $P(SIG1(TT),"^",2)="D"_$P(SIG1(TT),"^",2)
"RTN","PSOSPSIG",82,0)
 Q
"RTN","PSOSPSIG",83,0)
NON ;
"RTN","PSOSPSIG",84,0)
 S NN=PSOFX("NOUN",SSS)
"RTN","PSOSPSIG",85,0)
 S NOUN=$O(^PS(50.606,SIGDS,"NOUN","B",NN,0)) I NOUN S PSNOUN(SSS)=$S($G(^PS(50.606,SIGDS,"NOUN",NOUN,1))]"":^PS(50.606,SIGDS,"NOUN",NOUN,1),1:NN) K NN Q
"RTN","PSOSPSIG",86,0)
 N PSONN S PSONN=NN K NN,NOUN D DOSE^PSSORPH(.XDOSE,$P(^PSRX(RX,0),"^",6),"O") I $P($G(XDOSE("DD",$P(^PSRX(RX,0),"^",6))),"^",9)="" S PSNOUN(SSS)=PSONN Q  ;*333
"RTN","PSOSPSIG",87,0)
 S NN=$P(XDOSE("DD",$P(^PSRX(RX,0),"^",6)),"^",9),NOUN=$O(^PS(50.606,SIGDS,"NOUN","B",NN,0))
"RTN","PSOSPSIG",88,0)
 I NOUN S PSNOUN(SSS)=$S($G(^PS(50.606,SIGDS,"NOUN",NOUN,1))]"":^PS(50.606,SIGDS,"NOUN",NOUN,1),1:NN)
"RTN","PSOSPSIG",89,0)
 K XDOSE,NN Q
"RTN","PSOSPSIG",90,0)
VERB ;Check if verb and noun need to be added to SIG
"RTN","PSOSPSIG",91,0)
 K PSOLCS,PSOUCS,PSOISL,PSOVL
"RTN","PSOSPSIG",92,0)
 I $G(VERB)'="" S PSOVL=$L(VERB),PSOISL=$E($G(SIG0(FFF)),1,$G(PSOVL)) I $G(PSOISL)'="" D
"RTN","PSOSPSIG",93,0)
 .S PSOUCS=VERB
"RTN","PSOSPSIG",94,0)
 .S PSOUCS=$$UPPER(PSOUCS) I PSOUCS=PSOISL S PSOSG1=1 Q
"RTN","PSOSPSIG",95,0)
 .S PSOUCS=$$LOWER(PSOUCS) I PSOUCS=PSOISL S PSOSG1=1 Q
"RTN","PSOSPSIG",96,0)
 .S PSOUCS=$$UPPER($E(PSOUCS,1))_$$LOWER($E(PSOUCS,2,99)) I PSOUCS=PSOISL S PSOSG1=1 Q
"RTN","PSOSPSIG",97,0)
 I $G(PSNOUN(FFF))="" G VERBEX
"RTN","PSOSPSIG",98,0)
 S PSOISL=$G(SIG0(FFF)) I $G(PSOISL)="" G VERBEX
"RTN","PSOSPSIG",99,0)
 S PSOVL=$F(PSNOUN(FFF),"(")
"RTN","PSOSPSIG",100,0)
 I $G(PSOVL)>2 S PSOUCS=$E(PSNOUN(FFF),1,(PSOVL-2))
"RTN","PSOSPSIG",101,0)
 I $G(PSOVL)'>2 S PSOUCS=PSNOUN(FFF)
"RTN","PSOSPSIG",102,0)
 I $G(PSOISL)'="" D
"RTN","PSOSPSIG",103,0)
 .S PSOUCS=$$UPPER(PSOUCS) I PSOISL[PSOUCS S PSOSG2=1 Q
"RTN","PSOSPSIG",104,0)
 .S PSOUCS=$$LOWER(PSOUCS) I PSOISL[PSOUCS S PSOSG2=1 Q
"RTN","PSOSPSIG",105,0)
 .S PSOUCS=$$UPPER($E(PSOUCS,1))_$$LOWER($E(PSOUCS,2,99)) I PSOISL[PSOUCS S PSOSG2=1
"RTN","PSOSPSIG",106,0)
VERBEX K PSOLCS,PSOUCS,PSOISL,PSOVL Q
"RTN","PSOSPSIG",107,0)
 ;
"RTN","PSOSPSIG",108,0)
UPPER(PSOUCS) ;
"RTN","PSOSPSIG",109,0)
 Q $TR(PSOUCS,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","PSOSPSIG",110,0)
 ;
"RTN","PSOSPSIG",111,0)
LOWER(PSOLCS) ;
"RTN","PSOSPSIG",112,0)
 Q $TR(PSOLCS,"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")
"RTN","PSOSPSIG",113,0)
 Q
"RTN","PSOSPSIG",114,0)
 ;
"RTN","PSOSPSIG",115,0)
SSS ;
"RTN","PSOSPSIG",116,0)
 K PSOFNL,PSOFNLF,PSOFNLX
"RTN","PSOSPSIG",117,0)
 Q:$G(PSNOUN(FFF))=""
"RTN","PSOSPSIG",118,0)
 Q:$L(PSNOUN(FFF))'>3
"RTN","PSOSPSIG",119,0)
 Q:'$G(PSOFX("DOSE ORDERED",FFF))
"RTN","PSOSPSIG",120,0)
 S PSOFNL=$E(PSNOUN(FFF),($L(PSNOUN(FFF))-2),$L(PSNOUN(FFF)))
"RTN","PSOSPSIG",121,0)
 I $G(PSOFNL)="(S)"!($G(PSOFNL)="(s)") D
"RTN","PSOSPSIG",122,0)
 .I $G(PSOFX("DOSE ORDERED",FFF))'>1 S PSNOUN(FFF)=$E(PSNOUN(FFF),1,($L(PSNOUN(FFF))-3))
"RTN","PSOSPSIG",123,0)
 .I $G(PSOFX("DOSE ORDERED",FFF))>1 S PSNOUN(FFF)=$E(PSNOUN(FFF),1,($L(PSNOUN(FFF))-3))_$E(PSOFNL,2)
"RTN","PSOSPSIG",124,0)
 Q
"RTN","PSOSPSIG",125,0)
FRAC ;
"RTN","PSOSPSIG",126,0)
 K PSOFRAC,PSOFRACX,PSOFRAC1,PSOFRAC2
"RTN","PSOSPSIG",127,0)
 I $G(PSOFX("DOSE ORDERED",FFF))="" Q
"RTN","PSOSPSIG",128,0)
 I $G(PSOFX("DOSE ORDERED",FFF))'["." S (PSOFRAC1,PSOFRAC)=$G(PSOFX("DOSE ORDERED",FFF)) D NUM D  G FRACQ
"RTN","PSOSPSIG",129,0)
 .I $G(PSOFRAC1)=$G(PSOFRAC) K PSOFRAC,PSOFRAC1 Q
"RTN","PSOSPSIG",130,0)
 .S PSOFRAC=$G(PSOFRAC1)
"RTN","PSOSPSIG",131,0)
 S PSOFRAC1=$P(PSOFX("DOSE ORDERED",FFF),"."),PSOFRAC2=$P(PSOFX("DOSE ORDERED",FFF),".",2)
"RTN","PSOSPSIG",132,0)
 S PSOFRACX="."_$G(PSOFRAC2)
"RTN","PSOSPSIG",133,0)
 S PSOFRAC=$S(PSOFRACX=".5":"ONE-HALF",PSOFRACX=".25":"ONE-FOURTH",PSOFRACX=".33":"ONE-THIRD",PSOFRACX=".34":"ONE-THIRD",PSOFRACX=".50":"ONE-HALF",PSOFRACX=".66":"TWO-THIRDS",PSOFRACX=".67":"TWO-THIRDS",PSOFRACX=".75":"THREE-FOURTHS",1:PSOFRACX)
"RTN","PSOSPSIG",134,0)
 S PSOFRAC9=$O(^PS(59.7,"AOTH",PSOFRAC,"")) I PSOFRAC9]"" S PSOFRAC=PSOFRAC9
"RTN","PSOSPSIG",135,0)
 K PSOFRAC9
"RTN","PSOSPSIG",136,0)
 I $G(PSOFRAC)="" K PSOFRAC G FRACQ
"RTN","PSOSPSIG",137,0)
 I $G(PSOFRAC1)'="",+$G(PSOFRAC1) D
"RTN","PSOSPSIG",138,0)
 .D NUM S AND=$O(^PS(59.7,"AOTH","AND",""))
"RTN","PSOSPSIG",139,0)
 .S PSOFRAC=$G(PSOFRAC1)_" "_$S(AND]"":AND,1:"AND")_" "_$S($E($G(PSOFRAC),1)=".":"0",1:"")_$G(PSOFRAC)
"RTN","PSOSPSIG",140,0)
 I $E($G(PSOFRAC),1)="." S PSOFRAC="0"_$G(PSOFRAC)
"RTN","PSOSPSIG",141,0)
FRACQ K PSOFRAC1,PSOFRAC2,AND
"RTN","PSOSPSIG",142,0)
 Q
"RTN","PSOSPSIG",143,0)
NUM ;
"RTN","PSOSPSIG",144,0)
 Q:$G(PSOFRAC1)=""
"RTN","PSOSPSIG",145,0)
 S PSOFRAC1=$S(PSOFRAC1="1":"ONE",PSOFRAC1="2":"TWO",PSOFRAC1="3":"THREE",PSOFRAC1="4":"FOUR",PSOFRAC1="5":"FIVE",PSOFRAC1="6":"SIX",PSOFRAC1="7":"SEVEN",PSOFRAC1="8":"EIGHT",PSOFRAC1="9":"NINE",PSOFRAC1="10":"TEN",1:PSOFRAC1)
"RTN","PSOSPSIG",146,0)
 S PSOFRAC9=$O(^PS(59.7,"AOTH",PSOFRAC1,"")) I PSOFRAC9]"" S PSOFRAC1=PSOFRAC9
"RTN","PSOSPSIG",147,0)
 K PSOFRAC9
"RTN","PSOSPSIG",148,0)
 Q
"VER")
8.0^22.0
"BLD",10073,6)
^387
**END**
**END**

