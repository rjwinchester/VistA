Released PSO*7*490 SEQ #412
Extracted from mail message
**KIDS**:PSO*7.0*490^

**INSTALL NAME**
PSO*7.0*490
"BLD",10670,0)
PSO*7.0*490^OUTPATIENT PHARMACY^0^3171101^y
"BLD",10670,1,0)
^^2^2^3171030^
"BLD",10670,1,1,0)
This patch will fix the following issue.
"BLD",10670,1,2,0)
  I9914094FY16  OTH, PRO, OP screen flashes by within seconds
"BLD",10670,4,0)
^9.64PA^^
"BLD",10670,6.3)
23
"BLD",10670,"ABPKG")
n
"BLD",10670,"KRN",0)
^9.67PA^779.2^20
"BLD",10670,"KRN",.4,0)
.4
"BLD",10670,"KRN",.401,0)
.401
"BLD",10670,"KRN",.402,0)
.402
"BLD",10670,"KRN",.403,0)
.403
"BLD",10670,"KRN",.5,0)
.5
"BLD",10670,"KRN",.84,0)
.84
"BLD",10670,"KRN",3.6,0)
3.6
"BLD",10670,"KRN",3.8,0)
3.8
"BLD",10670,"KRN",9.2,0)
9.2
"BLD",10670,"KRN",9.8,0)
9.8
"BLD",10670,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10670,"KRN",9.8,"NM",1,0)
PSODSPL^^0^B22299198
"BLD",10670,"KRN",9.8,"NM","B","PSODSPL",1)

"BLD",10670,"KRN",19,0)
19
"BLD",10670,"KRN",19.1,0)
19.1
"BLD",10670,"KRN",101,0)
101
"BLD",10670,"KRN",409.61,0)
409.61
"BLD",10670,"KRN",771,0)
771
"BLD",10670,"KRN",779.2,0)
779.2
"BLD",10670,"KRN",870,0)
870
"BLD",10670,"KRN",8989.51,0)
8989.51
"BLD",10670,"KRN",8989.52,0)
8989.52
"BLD",10670,"KRN",8994,0)
8994
"BLD",10670,"KRN","B",.4,.4)

"BLD",10670,"KRN","B",.401,.401)

"BLD",10670,"KRN","B",.402,.402)

"BLD",10670,"KRN","B",.403,.403)

"BLD",10670,"KRN","B",.5,.5)

"BLD",10670,"KRN","B",.84,.84)

"BLD",10670,"KRN","B",3.6,3.6)

"BLD",10670,"KRN","B",3.8,3.8)

"BLD",10670,"KRN","B",9.2,9.2)

"BLD",10670,"KRN","B",9.8,9.8)

"BLD",10670,"KRN","B",19,19)

"BLD",10670,"KRN","B",19.1,19.1)

"BLD",10670,"KRN","B",101,101)

"BLD",10670,"KRN","B",409.61,409.61)

"BLD",10670,"KRN","B",771,771)

"BLD",10670,"KRN","B",779.2,779.2)

"BLD",10670,"KRN","B",870,870)

"BLD",10670,"KRN","B",8989.51,8989.51)

"BLD",10670,"KRN","B",8989.52,8989.52)

"BLD",10670,"KRN","B",8994,8994)

"BLD",10670,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",10670,"QUES",0)
^9.62^^
"BLD",10670,"REQB",0)
^9.611^3^1
"BLD",10670,"REQB",3,0)
PSO*7.0*375^2
"BLD",10670,"REQB","B","PSO*7.0*375",3)

"MBREQ")
0
"PKG",206,-1)
1^1
"PKG",206,0)
OUTPATIENT PHARMACY^PSO^OUTPATIENT LABELS, PROFILE, INVENTORY, PRESCRIPTIONS
"PKG",206,20,0)
^9.402P^^
"PKG",206,22,0)
^9.49I^1^1
"PKG",206,22,1,0)
7.0^3021122^3021202^66481
"PKG",206,22,1,"PAH",1,0)
490^3171101
"PKG",206,22,1,"PAH",1,1,0)
^^2^2^3171101
"PKG",206,22,1,"PAH",1,1,1,0)
This patch will fix the following issue.
"PKG",206,22,1,"PAH",1,1,2,0)
  I9914094FY16  OTH, PRO, OP screen flashes by within seconds
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSODSPL")
0^1^B22299198^B21224855
"RTN","PSODSPL",1,0)
PSODSPL ;IHS/DSD/JCM - DISPLAY RX PROFILE TO SCREEN ;03/07/93 18:11
"RTN","PSODSPL",2,0)
 ;;7.0;OUTPATIENT PHARMACY;**132,251,375,490**;DEC 1997;Build 23
"RTN","PSODSPL",3,0)
 ; Input Variables: PSOSD(,
"RTN","PSODSPL",4,0)
 ; Optional Input Variables: PSOOPT
"RTN","PSODSPL",5,0)
 ;
"RTN","PSODSPL",6,0)
 ; display profiles needs PSOOPT=3 from new PSOOPT=4 from refill, 
"RTN","PSODSPL",7,0)
 ; or PSOOPT=0 from anywhere
"RTN","PSODSPL",8,0)
 ; PSOOPT=-1 to get numbered list but no refill/renew message
"RTN","PSODSPL",9,0)
 ;---------------------------------------------------------------
"RTN","PSODSPL",10,0)
START ;
"RTN","PSODSPL",11,0)
 I '$G(PSOSD) W $C(7),!!,"This patient has no prescriptions",!! S DIR(0)="EA",DIR("A")="Press RETURN to continue: " D ^DIR K DIR G END
"RTN","PSODSPL",12,0)
 D EOJ,SHOW
"RTN","PSODSPL",13,0)
END D EOJ
"RTN","PSODSPL",14,0)
 Q
"RTN","PSODSPL",15,0)
 ;-----------------------------------------------------------------
"RTN","PSODSPL",16,0)
SHOW ;
"RTN","PSODSPL",17,0)
 N PSODRUG,PSOSTA,PSODATA,PSOQFLG,PSOCT,PSOCNT,PSODLQT
"RTN","PSODSPL",18,0)
 S PSOPENFL=0
"RTN","PSODSPL",19,0)
 S (PSOSTA,PSODRUG)="",(PSOCNT,PSOQFLG)=0
"RTN","PSODSPL",20,0)
 D HD^PSODDPR2() Q:$G(PSODLQT)
"RTN","PSODSPL",21,0)
 D HD F PSCNT=0:0 S PSOSTA=$O(PSOSD(PSOSTA)) Q:PSOSTA=""!($G(PSOQFLG))  D STA F PSOCT=0:0 S PSODRUG=$O(PSOSD(PSOSTA,PSODRUG)) Q:PSODRUG=""  Q:PSOCNT>1000!PSOQFLG  D
"RTN","PSODSPL",22,0)
 .S PSODATA=PSOSD(PSOSTA,PSODRUG),PSOCNT=PSOCNT+1 I PSOSTA="PENDING" D PEN Q
"RTN","PSODSPL",23,0)
 .I PSOSTA="ZNONVA" D  Q
"RTN","PSODSPL",24,0)
 ..W !,"  "_$P(PSODRUG,"^")_" "_$P(PSODATA,"^",6)_" "_$P(PSODATA,"^",8)
"RTN","PSODSPL",25,0)
 ..I ($L("  "_$P(PSODRUG,"^")_" "_$P(PSODATA,"^",6)_" "_$P(PSODATA,"^",8))+20)>70 W !
"RTN","PSODSPL",26,0)
 ..W ?50,"Date Documented: "_$E($P(PSODATA,"^",9),4,5)_"/"_$E($P(PSODATA,"^",9),6,7)_"/"_$E($P(PSODATA,"^",9),2,3)
"RTN","PSODSPL",27,0)
 .S:'$D(^PSRX(+PSODATA,0)) PSOCNT=PSOCNT-1 D:$D(^(0)) DISPL Q:$G(PSODLQT)
"RTN","PSODSPL",28,0)
 W !
"RTN","PSODSPL",29,0)
 I $G(INPAT),'$G(PSODLQT) K DIR S DIR(0)="EA",DIR("A")="Press RETURN to continue: " D ^DIR K DIR G SHOWX ;*490
"RTN","PSODSPL",30,0)
 D HD^PSODDPR2()  ;*490
"RTN","PSODSPL",31,0)
SHOWX K DIRUT,DTOUT,DUOUT,DIROUT S PSOCNT=PSOCNT-1 ;K PSODRUG
"RTN","PSODSPL",32,0)
 Q
"RTN","PSODSPL",33,0)
 ;
"RTN","PSODSPL",34,0)
HD ;
"RTN","PSODSPL",35,0)
 Q:$G(PSODLQT)
"RTN","PSODSPL",36,0)
 I $Y+5>IOSL S (DX,DY)=0 X ^%ZOSF("XY") K DX,DY
"RTN","PSODSPL",37,0)
 Q:$G(PSOPENFL)  K LINE
"RTN","PSODSPL",38,0)
 W !!,?61,"ISSUE",?68,"LAST",?73,"REF DAY",!,?4,"RX #",?17,"DRUG",?54,"QTY",?58,"ST",?62,"DATE",?68,"FILL",?73,"REM",?77,"SUP" S $P(LINE,"-",80)="-" W !,LINE K LINE
"RTN","PSODSPL",39,0)
 Q
"RTN","PSODSPL",40,0)
DISPL W ! I $G(PSOOPT) W $J(PSOCNT,2)
"RTN","PSODSPL",41,0)
 S PSODQLZ=$L($P(PSODRUG,"^"))+$L($P(^PSRX(+PSODATA,0),"^",7))
"RTN","PSODSPL",42,0)
 W ?3,$P(^PSRX(+PSODATA,0),"^")_$S($G(^PSRX(+PSODATA,"IB")):"$",1:"")
"RTN","PSODSPL",43,0)
 S PSOQTLZ=57-$L($P(^PSRX(+PSODATA,0),"^",7)) I PSODQLZ<39 W ?17,$P(PSODRUG,"^"),?PSOQTLZ,$P(^PSRX(+PSODATA,0),"^",7)
"RTN","PSODSPL",44,0)
 E  W ?17,$P(PSODRUG,"^")
"RTN","PSODSPL",45,0)
 N PSOCMOP,STATL
"RTN","PSODSPL",46,0)
 I $D(^PSDRUG("AQ",$P(^PSRX(+PSODATA,0),"^",6))) S PSOCMOP=">"
"RTN","PSODSPL",47,0)
 N X S X="PSXOPUTL" X ^%ZOSF("TEST") K X I $T D
"RTN","PSODSPL",48,0)
 .N DA S DA=+PSODATA D ^PSXOPUTL K DA
"RTN","PSODSPL",49,0)
 .I $G(PSXZ(PSXZ("L")))=0!($G(PSXZ(PSXZ("L")))=2) S PSOCMOP="T"
"RTN","PSODSPL",50,0)
 .K PSXZ
"RTN","PSODSPL",51,0)
 S STA="A^N^R^H^N^S^^^^^^E^DC^^DP^DE^HP^P^"
"RTN","PSODSPL",52,0)
 S STATL=$P(STA,"^",$P(PSODATA,"^",2)+1) D
"RTN","PSODSPL",53,0)
 .I $G(^PSRX(+PSODATA,"DDSTA"))]"" S STATL="DD" Q
"RTN","PSODSPL",54,0)
 .S STATL=$S($P($G(^PSRX(+PSODATA,7)),"^")=1:"DA",$P($G(^PSRX(+PSODATA,7)),"^")=2:"DF",1:STATL)
"RTN","PSODSPL",55,0)
 W ?58,STATL W $G(PSOCMOP) K STA
"RTN","PSODSPL",56,0)
 S PSOID=$P(^PSRX(+PSODATA,0),"^",13),PSOLF=+^(3) W ?61,$E(PSOID,4,5)_"-"_$E(PSOID,6,7)
"RTN","PSODSPL",57,0)
 F PSOX=0:0 S PSOX=$O(^PSRX(+PSODATA,1,PSOX)) Q:'PSOX  I +^PSRX(+PSODATA,1,PSOX,0)=PSOLF,$P(^PSRX(+PSODATA,1,PSOX,0),"^",16) S PSOLF=PSOLF_"^R"
"RTN","PSODSPL",58,0)
 I '$O(^PSRX(+PSODATA,1,0)),$P(^PSRX(+PSODATA,2),"^",15) S PSOLF=PSOLF_"^R"
"RTN","PSODSPL",59,0)
 W ?67,$S(+PSOLF:$E(PSOLF,4,5)_"-"_$E(PSOLF,6,7),1:"  -  "),$P(PSOLF,"^",2)
"RTN","PSODSPL",60,0)
 W ?74,$J($P(PSODATA,"^",6),2)
"RTN","PSODSPL",61,0)
 W ?78,$J($P(PSODATA,"^",8),2)
"RTN","PSODSPL",62,0)
 I PSODQLZ>38 S PSOQTLZ=PSOQTLZ-5 W !?PSOQTLZ,"Qty: ",$P(^PSRX(+PSODATA,0),"^",7)
"RTN","PSODSPL",63,0)
 K PSODQLZ,PSOQTLZ,PSODATA,PSOID,PSOLF,PSOX
"RTN","PSODSPL",64,0)
 ;
"RTN","PSODSPL",65,0)
EOF I $Y+5>IOSL,$O(PSOSD(PSOSTA,PSODRUG))]"" K DIR S DIR(0)="E" D ^DIR K DIR S:$D(DUOUT)!$G(DTOUT)!($G(DIRUT)) PSOHI=PSOCNT,PSODLQT=1,PSOQFLG=1 K DIRUT,DTOUT,DUOUT,DIROUT D:'PSOQFLG HD,STA
"RTN","PSODSPL",66,0)
 ;
"RTN","PSODSPL",67,0)
 Q
"RTN","PSODSPL",68,0)
STA ;
"RTN","PSODSPL",69,0)
 Q:$G(PSOQFLG)!($G(PSODLQT))
"RTN","PSODSPL",70,0)
 I PSOSTA="ZNONVA" S ZSTA=PSOSTA,PSOSTA="Non-VA MEDS (Not dispensed by VA)"
"RTN","PSODSPL",71,0)
 S STR=($L(PSOSTA)+IOM/2)-$L(PSOSTA),STP=IOM-(STR+$L(PSOSTA)) W ! F I=1:1:STR W "-"
"RTN","PSODSPL",72,0)
 W PSOSTA F I=1:1:STP W "-"
"RTN","PSODSPL",73,0)
 I $G(ZSTA)]"" W "-" S PSOSTA=ZSTA K ZSTA
"RTN","PSODSPL",74,0)
 Q
"RTN","PSODSPL",75,0)
EOJ ;
"RTN","PSODSPL",76,0)
 K PSOHI,PSOQFLG,PSODATA,PSOID,PSOLF,PSOCNT,PSOLO1,PSOPENFL
"RTN","PSODSPL",77,0)
 Q
"RTN","PSODSPL",78,0)
PEN ;
"RTN","PSODSPL",79,0)
 N PSCMOPR S PSCMOPR=0 I $P($G(PSODATA),"^",11),$D(^PSDRUG("AQ",$P(PSODATA,"^",11))) S PSCMOPR=1
"RTN","PSODSPL",80,0)
 W ! I $G(PSOOPT) W $J(PSOCNT,2)
"RTN","PSODSPL",81,0)
 S PSOPENFL=1
"RTN","PSODSPL",82,0)
 S PSODQLZ=$L($P(PSODRUG,"^")),PSOQTLZ=$L($P(PSODATA,"^",8))
"RTN","PSODSPL",83,0)
 W ?3,$P(PSODRUG,"^") I +$G(PSODQLZ)>37 W !
"RTN","PSODSPL",84,0)
 ;W ?49,"ISDT: ",$S('$P(PSODATA,"^",9):"     ",1:$E($P(PSODATA,"^",9),4,5)_"-"_$E($P(PSODATA,"^",9),6,7))_"  QTY: "_$S(PSOQTLZ=1:"  ",PSOQTLZ=2:" ",1:"")_$P(PSODATA,"^",8)_"  REF: "_$J($P(PSODATA,"^",6),2)
"RTN","PSODSPL",85,0)
 W ?42,"QTY: ",$P(PSODATA,"^",8),?59,"ISDT: ",$S('$P(PSODATA,"^",9):"     ",1:$E($P(PSODATA,"^",9),4,5)_"-"_$E($P(PSODATA,"^",9),6,7))_$S($G(PSCMOPR):"> ",1:"  ")_"REF: "_$J($P(PSODATA,"^",6),2)
"RTN","PSODSPL",86,0)
 K PSODATA,PSOID,PSOLF,PSODQLZ,PSOQTLZ D EOF
"RTN","PSODSPL",87,0)
 Q
"VER")
8.0^22.2
"BLD",10670,6)
^412
**END**
**END**

