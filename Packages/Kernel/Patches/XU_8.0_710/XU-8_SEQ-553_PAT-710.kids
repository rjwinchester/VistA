Released XU*8*710 SEQ #553
Extracted from mail message
**KIDS**:XU*8.0*710^

**INSTALL NAME**
XU*8.0*710
"BLD",3411,0)
XU*8.0*710^KERNEL^0^3190905^y
"BLD",3411,1,0)
^9.61A^3^3^3190904^^
"BLD",3411,1,1,0)
KERNEL VISTA ENHANCEMENTS - EHRM SUPPORT
"BLD",3411,1,2,0)
Refer to patch XU*8.0*710 in the FORUM Patch Module for a complete
"BLD",3411,1,3,0)
description.
"BLD",3411,4,0)
^9.64PA^^
"BLD",3411,6.3)
2
"BLD",3411,"KRN",0)
^9.67PA^1.5^24
"BLD",3411,"KRN",.4,0)
.4
"BLD",3411,"KRN",.401,0)
.401
"BLD",3411,"KRN",.402,0)
.402
"BLD",3411,"KRN",.403,0)
.403
"BLD",3411,"KRN",.5,0)
.5
"BLD",3411,"KRN",.84,0)
.84
"BLD",3411,"KRN",1.5,0)
1.5
"BLD",3411,"KRN",1.6,0)
1.6
"BLD",3411,"KRN",1.61,0)
1.61
"BLD",3411,"KRN",1.62,0)
1.62
"BLD",3411,"KRN",3.6,0)
3.6
"BLD",3411,"KRN",3.8,0)
3.8
"BLD",3411,"KRN",9.2,0)
9.2
"BLD",3411,"KRN",9.8,0)
9.8
"BLD",3411,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",3411,"KRN",9.8,"NM",1,0)
XUMVINPB^^0^B45050310
"BLD",3411,"KRN",9.8,"NM",2,0)
XUMVINPU^^0^B125047049
"BLD",3411,"KRN",9.8,"NM",3,0)
XUMVIDTA^^0^B10198216
"BLD",3411,"KRN",9.8,"NM",4,0)
XLFNAME2^^0^B11304736
"BLD",3411,"KRN",9.8,"NM","B","XLFNAME2",4)

"BLD",3411,"KRN",9.8,"NM","B","XUMVIDTA",3)

"BLD",3411,"KRN",9.8,"NM","B","XUMVINPB",1)

"BLD",3411,"KRN",9.8,"NM","B","XUMVINPU",2)

"BLD",3411,"KRN",19,0)
19
"BLD",3411,"KRN",19.1,0)
19.1
"BLD",3411,"KRN",101,0)
101
"BLD",3411,"KRN",409.61,0)
409.61
"BLD",3411,"KRN",771,0)
771
"BLD",3411,"KRN",779.2,0)
779.2
"BLD",3411,"KRN",870,0)
870
"BLD",3411,"KRN",8989.51,0)
8989.51
"BLD",3411,"KRN",8989.52,0)
8989.52
"BLD",3411,"KRN",8994,0)
8994
"BLD",3411,"KRN",8994,"NM",0)
^9.68A^2^2
"BLD",3411,"KRN",8994,"NM",1,0)
XUS MVI NEW PERSON BULK GET^^0
"BLD",3411,"KRN",8994,"NM",2,0)
XUS MVI NEW PERSON UPDATE^^0
"BLD",3411,"KRN",8994,"NM","B","XUS MVI NEW PERSON BULK GET",1)

"BLD",3411,"KRN",8994,"NM","B","XUS MVI NEW PERSON UPDATE",2)

"BLD",3411,"KRN","B",.4,.4)

"BLD",3411,"KRN","B",.401,.401)

"BLD",3411,"KRN","B",.402,.402)

"BLD",3411,"KRN","B",.403,.403)

"BLD",3411,"KRN","B",.5,.5)

"BLD",3411,"KRN","B",.84,.84)

"BLD",3411,"KRN","B",1.5,1.5)

"BLD",3411,"KRN","B",1.6,1.6)

"BLD",3411,"KRN","B",1.61,1.61)

"BLD",3411,"KRN","B",1.62,1.62)

"BLD",3411,"KRN","B",3.6,3.6)

"BLD",3411,"KRN","B",3.8,3.8)

"BLD",3411,"KRN","B",9.2,9.2)

"BLD",3411,"KRN","B",9.8,9.8)

"BLD",3411,"KRN","B",19,19)

"BLD",3411,"KRN","B",19.1,19.1)

"BLD",3411,"KRN","B",101,101)

"BLD",3411,"KRN","B",409.61,409.61)

"BLD",3411,"KRN","B",771,771)

"BLD",3411,"KRN","B",779.2,779.2)

"BLD",3411,"KRN","B",870,870)

"BLD",3411,"KRN","B",8989.51,8989.51)

"BLD",3411,"KRN","B",8989.52,8989.52)

"BLD",3411,"KRN","B",8994,8994)

"BLD",3411,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",3411,"QUES",0)
^9.62^^
"BLD",3411,"REQB",0)
^9.611^2^2
"BLD",3411,"REQB",1,0)
XU*8.0*343^2
"BLD",3411,"REQB",2,0)
XU*8.0*711^2
"BLD",3411,"REQB","B","XU*8.0*343",1)

"BLD",3411,"REQB","B","XU*8.0*711",2)

"KRN",8994,721,-1)
0^2
"KRN",8994,721,0)
XUS MVI NEW PERSON UPDATE^UPDATE^XUMVINPU^1^A^^^^1^^0
"KRN",8994,721,1,0)
^8994.01^2^2^3190813^^^^
"KRN",8994,721,1,1,0)
This restricted RPC is used exclusively by the Master Veteran Index (MVI) 
"KRN",8994,721,1,2,0)
to update an entry (by DUZ) in the VistA NEW PERSON file (#200).
"KRN",8994,721,2,0)
^8994.02A^2^1
"KRN",8994,721,2,2,0)
XUARR^2^255^1^1
"KRN",8994,721,2,2,1,0)
^^14^14^3190813^
"KRN",8994,721,2,2,1,1,0)
The IEN (DUZ) for the NEW PERSON (#200) file is required to file the other
"KRN",8994,721,2,2,1,2,0)
fields.
"KRN",8994,721,2,2,1,3,0)
 
"KRN",8994,721,2,2,1,4,0)
  XUARR(#) = FILE #;FIELD #^FIELD NAME^INTERNAL VALUE^EXTERNAL VALUE
"KRN",8994,721,2,2,1,5,0)
  XUARR(0)="200;IEN^DUZ^^"
"KRN",8994,721,2,2,1,6,0)
  XUARR(#)="200;.01^NAME^^"
"KRN",8994,721,2,2,1,7,0)
  XUARR(#)="200;.151^EMAIL ADDRESS^^"
"KRN",8994,721,2,2,1,8,0)
  XUARR(#)="200;41.99^NPI^^^"
"KRN",8994,721,2,2,1,9,0)
  XUARR(#)="200;205.1^SECID^^"
"KRN",8994,721,2,2,1,10,0)
  XUARR(#)="200;205.2^SUBJECT ORGANIZATION^^"
"KRN",8994,721,2,2,1,11,0)
  XUARR(#)="200;205.3^SUBJECT ORGANIZATION ID^^"
"KRN",8994,721,2,2,1,12,0)
  XUARR(#)="200;205.4^UNIQUE USER ID^^"
"KRN",8994,721,2,2,1,13,0)
  XUARR(#)="200;205.5^ADUPN^^"
"KRN",8994,721,2,2,1,14,0)
  XUARR(#)="200;501.1^NETWORK USERNAME^^"
"KRN",8994,721,2,"B","XUARR",2)

"KRN",8994,721,2,"PARAMSEQ",1,2)

"KRN",8994,721,3,0)
^8994.03^12^12^3190813^^^
"KRN",8994,721,3,1,0)
  Success:
"KRN",8994,721,3,2,0)
   XURET(0) = 1
"KRN",8994,721,3,3,0)
 
"KRN",8994,721,3,4,0)
  Fail:
"KRN",8994,721,3,5,0)
   XURET(0) = "-1^No data passed"
"KRN",8994,721,3,6,0)
   XURET(0) = "-1^Invalid User DUZ (null)"
"KRN",8994,721,3,7,0)
   XURET(0) = "-1^User '"_XUDUZ_"' does not exist"
"KRN",8994,721,3,8,0)
   XURET(0) = "-1^Invalid Name Component IEN"
"KRN",8994,721,3,9,0)
   XURET(0) = "-1^No Data for Name Component IEN: "_NCIEN
"KRN",8994,721,3,10,0)
   XURET(0) = "-1^No data to file for record '"_XUDUZ_"' in file 200 
"KRN",8994,721,3,11,0)
   XURET(0) = "-1^Unable to lock record '"_XUDUZ_"' in file 200" 
"KRN",8994,721,3,12,0)
   XURET(0) = "-1^"_$G(XUERR("DIERR",1,"TEXT",1))
"KRN",8994,1061,-1)
0^1
"KRN",8994,1061,0)
XUS MVI NEW PERSON BULK GET^BULKGET^XUMVINPB^4^A^^^1^1^^0
"KRN",8994,1061,1,0)
^8994.01^2^2^3190904^^^^
"KRN",8994,1061,1,1,0)
This restricted RPC is used exclusively by the Master Veteran Index (MVI)
"KRN",8994,1061,1,2,0)
to retrieve data in bulk from the VistA NEW PERSON file (#200).
"KRN",8994,1061,2,0)
^8994.02A^1^1
"KRN",8994,1061,2,1,0)
XUDUZ^1^40^0^1
"KRN",8994,1061,2,1,1,0)
^^1^1^3190905^
"KRN",8994,1061,2,1,1,1,0)
The File IEN in the NEW PERSON file (#200)
"KRN",8994,1061,2,"B","XUDUZ",1)

"KRN",8994,1061,2,"PARAMSEQ",1,1)

"KRN",8994,1061,3,0)
^^42^42^3190904^
"KRN",8994,1061,3,1,0)
  Success:
"KRN",8994,1061,3,2,0)
   XURET = ^TMP("XUMVINPU",$J)
"KRN",8994,1061,3,3,0)
    @XURET@(#) = FILE #;FIELD #<;SUBFIELD #><;FILE POINTER>^FIELD 
"KRN",8994,1061,3,4,0)
 NAME^<COUNTER #>^INTERNAL VALUE^EXTERNAL VALUE
"KRN",8994,1061,3,5,0)
      <> Denotes optional values. If Counter populated, denotes multiple 
"KRN",8994,1061,3,6,0)
         value <1-n>
"KRN",8994,1061,3,7,0)
    @XURET@(#)="200;IEN^DUZ^^^"
"KRN",8994,1061,3,8,0)
    @XURET@(#)="200;.01^NAME^^^"
"KRN",8994,1061,3,9,0)
    @XURET@(#)="200;.111^STREET ADDRESS 1^^^"
"KRN",8994,1061,3,10,0)
    @XURET@(#)="200;.112^STREET ADDRESS 2^^^"
"KRN",8994,1061,3,11,0)
    @XURET@(#)="200;.113^STREET ADDRESS 3^^^"
"KRN",8994,1061,3,12,0)
    @XURET@(#)="200;.114^CITY^^^"
"KRN",8994,1061,3,13,0)
    @XURET@(#)="200;.115^STATE^^^"
"KRN",8994,1061,3,14,0)
    @XURET@(#)="200;.116^ZIP CODE^^^"
"KRN",8994,1061,3,15,0)
    @XURET@(#)="200;.132^OFFICE PHONE^^^"
"KRN",8994,1061,3,16,0)
    @XURET@(#)="200;.151^EMAIL ADDRESS^^^"
"KRN",8994,1061,3,17,0)
    @XURET@(#)="200;4^SEX^^^"
"KRN",8994,1061,3,18,0)
    @XURET@(#)="200;5^DOB^^^"
"KRN",8994,1061,3,19,0)
    @XURET@(#)="200;9^SSN^^^"
"KRN",8994,1061,3,20,0)
    @XURET@(#)="200;16;.01^DIVISION^<1 to n>^^"
"KRN",8994,1061,3,21,0)
    @XURET@(#)="200;10.1^NAME COMPONENTS^^^"
"KRN",8994,1061,3,22,0)
    @XURET@(#)="20;1^FAMILY (LAST) NAME^^^"
"KRN",8994,1061,3,23,0)
    @XURET@(#)="20;2^GIVEN (FIRST) NAME^^^"
"KRN",8994,1061,3,24,0)
    @XURET@(#)="20;3^MIDDLE NAME^^^"
"KRN",8994,1061,3,25,0)
    @XURET@(#)="20;4^PREFIX^^^"
"KRN",8994,1061,3,26,0)
    @XURET@(#)="20;5^SUFFIX^^^"
"KRN",8994,1061,3,27,0)
    @XURET@(#)="20;6^DEGREE^^^"
"KRN",8994,1061,3,28,0)
    @XURET@(#)="200;205.2^SUBJECT ORGANIZATION^^^"
"KRN",8994,1061,3,29,0)
    @XURET@(#)="200;205.3^SUBJECT ORGANIZATION ID^^^"
"KRN",8994,1061,3,30,0)
    @XURET@(#)="200;205.4^UNIQUE USER ID^^^"
"KRN",8994,1061,3,31,0)
    @XURET@(#)="200;501.1^NETWORK USERNAME^^^"
"KRN",8994,1061,3,32,0)
    @XURET@(#)="200;41.99^NPI^^^"
"KRN",8994,1061,3,33,0)
    @XURET@(#)="200;53.2^DEA#^^^"
"KRN",8994,1061,3,34,0)
    @XURET@(#)="200;747.44^DEA EXPIRATION DATE^^^"
"KRN",8994,1061,3,35,0)
    @XURET@(#)="200;201^PRIMARY MENU OPTION^^^"
"KRN",8994,1061,3,36,0)
    @XURET@(#)="200;203;.01^SECONDARY MENU OPTIONS^<1 to n>^^"
"KRN",8994,1061,3,37,0)
    @XURET@(#)="200;51;.01^KEY^<1 to n>^^"
"KRN",8994,1061,3,38,0)
 
"KRN",8994,1061,3,39,0)
    @XURET@(#)="200;EOF^EOF^" - if end of new person file reached 
"KRN",8994,1061,3,40,0)
 
"KRN",8994,1061,3,41,0)
  Fail:
"KRN",8994,1061,3,42,0)
   XURET = ^TMP("XUMVINPU",$J)
"MBREQ")
0
"ORD",16,8994)
8994;16;1;;;;RPCE1^XPDIA1;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"PKG",138,-1)
1^1
"PKG",138,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^
"PKG",138,22,0)
^9.49I^1^1
"PKG",138,22,1,0)
8.0^2950703^2951127^12541
"PKG",138,22,1,"PAH",1,0)
710^3190905
"PKG",138,22,1,"PAH",1,1,0)
^^3^3^3190905
"PKG",138,22,1,"PAH",1,1,1,0)
KERNEL VISTA ENHANCEMENTS - EHRM SUPPORT
"PKG",138,22,1,"PAH",1,1,2,0)
Refer to patch XU*8.0*710 in the FORUM Patch Module for a complete
"PKG",138,22,1,"PAH",1,1,3,0)
description.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","XLFNAME2")
0^4^B11304736^B10615051
"RTN","XLFNAME2",1,0)
XLFNAME2 ;CIOFO-SF/MKO-UPDATE ENTRY POINTS ;21 Aug 2019  12:15 PM
"RTN","XLFNAME2",2,0)
 ;;8.0;KERNEL;**134,211,301,343,710**;Jul 10, 1995;Build 2
"RTN","XLFNAME2",3,0)
 ;
"RTN","XLFNAME2",4,0)
UPDNAME(XUFIL,XUREC,XUFLD,XUCOMP,XUFLAG) ;Update source name field
"RTN","XLFNAME2",5,0)
 ;Called from "ANAME" MUMPS xref on file #20.
"RTN","XLFNAME2",6,0)
 ;
"RTN","XLFNAME2",7,0)
 N XUIENS,XUFDA,XULEN,XUMAX,XUMSG,XUNAME,DIERR
"RTN","XLFNAME2",8,0)
 I '$G(XUNOTRIG) N XUNOTRIG S XUNOTRIG=1
"RTN","XLFNAME2",9,0)
 S:$G(XUFLAG)="" XUFLAG="CLS"
"RTN","XLFNAME2",10,0)
 ;
"RTN","XLFNAME2",11,0)
 ;Get IENS from XUREC
"RTN","XLFNAME2",12,0)
 I $G(XUREC)'["," S XUIENS=$$IENS^DILF(.XUREC)
"RTN","XLFNAME2",13,0)
 E  S XUIENS=XUREC S:XUIENS'?.E1"," XUIENS=XUIENS_","
"RTN","XLFNAME2",14,0)
 ;
"RTN","XLFNAME2",15,0)
 ;Get maximum length of source field; **710,Story 1102755 (mko): Make sure length doesn't exceed this length
"RTN","XLFNAME2",16,0)
 S XUMAX=+$$GET1^DID(XUFIL,XUFLD,"","FIELD LENGTH","","XUMSG") K DIERR,XUMSG
"RTN","XLFNAME2",17,0)
 S XULEN=+$P($G(XUFLAG),"L",2)
"RTN","XLFNAME2",18,0)
 I 'XULEN!(XULEN>XUMAX) S XULEN=XUMAX
"RTN","XLFNAME2",19,0)
 ;
"RTN","XLFNAME2",20,0)
 ;Get name from components; quit if source name = new name
"RTN","XLFNAME2",21,0)
 S XUNAME=$$BLDNAME^XLFNAME8(.XUCOMP,XULEN) ;**710,Story 1102755 (mko): Pass the specified length or max field length
"RTN","XLFNAME2",22,0)
 ;S XUNAME=$$NAMEFMT^XLFNAME(.XUCOMP,"F",XUFLAG)
"RTN","XLFNAME2",23,0)
 ;
"RTN","XLFNAME2",24,0)
 Q:XUNAME=$$GET1^DIQ(XUFIL,XUIENS,XUFLD,"I","","XUMSG")  K DIERR,XUMSG
"RTN","XLFNAME2",25,0)
 ;
"RTN","XLFNAME2",26,0)
 ;Call Filer to edit entry in source file
"RTN","XLFNAME2",27,0)
 S XUFDA(XUFIL,XUIENS,XUFLD)=XUNAME
"RTN","XLFNAME2",28,0)
 D FILE^DIE("","XUFDA","XUMSG") K DIERR,XUMSG
"RTN","XLFNAME2",29,0)
 Q
"RTN","XLFNAME2",30,0)
 ;
"RTN","XLFNAME2",31,0)
UPDCOMP(XUFIL,XUREC,XUFLD,XUNAME,XUPTR,XUPVAL,XUFLAG) ;Update Name Components entry
"RTN","XLFNAME2",32,0)
 ;Called from set logic of "ANAME" MUMPS xref of file #200,
"RTN","XLFNAME2",33,0)
 ;Called from UPDATE^XLFNAME3 to update components during conversion.
"RTN","XLFNAME2",34,0)
 N XUDEG,XUIEN,XUIENS,XUFDA,XUMSG,DIERR
"RTN","XLFNAME2",35,0)
 I '$G(XUNOTRIG) N XUNOTRIG S XUNOTRIG=1
"RTN","XLFNAME2",36,0)
 ;
"RTN","XLFNAME2",37,0)
 ;Get IENS from XUREC
"RTN","XLFNAME2",38,0)
 I $G(XUREC)'["," S XUIENS=$$IENS^DILF(.XUREC)
"RTN","XLFNAME2",39,0)
 E  S XUIENS=XUREC S:XUIENS'?.E1"," XUIENS=XUIENS_","
"RTN","XLFNAME2",40,0)
 ;
"RTN","XLFNAME2",41,0)
 ;Get name components from XUNAME
"RTN","XLFNAME2",42,0)
 I $D(XUNAME)=1,XUNAME]"" D NAMECOMP^XLFNAME(.XUNAME)
"RTN","XLFNAME2",43,0)
 ;
"RTN","XLFNAME2",44,0)
 ;Call updater to add or edit entry in Name Component file
"RTN","XLFNAME2",45,0)
 S XUFDA(20,"?+1,",.01)=XUFIL
"RTN","XLFNAME2",46,0)
 S XUFDA(20,"?+1,",.02)=XUFLD
"RTN","XLFNAME2",47,0)
 S XUFDA(20,"?+1,",.03)=XUIENS
"RTN","XLFNAME2",48,0)
 S:$D(XUNAME("FAMILY"))#2 XUFDA(20,"?+1,",1)=XUNAME("FAMILY")
"RTN","XLFNAME2",49,0)
 S:$D(XUNAME("GIVEN"))#2 XUFDA(20,"?+1,",2)=XUNAME("GIVEN")
"RTN","XLFNAME2",50,0)
 S:$D(XUNAME("MIDDLE"))#2 XUFDA(20,"?+1,",3)=XUNAME("MIDDLE")
"RTN","XLFNAME2",51,0)
 S:$D(XUNAME("PREFIX"))#2 XUFDA(20,"?+1,",4)=XUNAME("PREFIX")
"RTN","XLFNAME2",52,0)
 S:$D(XUNAME("SUFFIX"))#2 XUFDA(20,"?+1,",5)=XUNAME("SUFFIX")
"RTN","XLFNAME2",53,0)
 S:$D(XUNAME("DEGREE"))#2 XUFDA(20,"?+1,",6)=XUNAME("DEGREE")
"RTN","XLFNAME2",54,0)
 S:$D(XUNAME("NOTES"))#2 XUFDA(20,"?+1,",11)=XUNAME("NOTES")
"RTN","XLFNAME2",55,0)
 S:$D(XUFLAG)#2 XUFDA(20,"?+1,",7)=XUFLAG
"RTN","XLFNAME2",56,0)
 D UPDATE^DIE("K","XUFDA","XUIEN","XUMSG") K DIERR,XUMSG
"RTN","XLFNAME2",57,0)
 ;
"RTN","XLFNAME2",58,0)
 ;Update pointer
"RTN","XLFNAME2",59,0)
 I $G(XUPTR),$G(XUIEN(1)),$G(XUIEN(1))'=$G(XUPVAL) D
"RTN","XLFNAME2",60,0)
 . S XUPVAL=XUIEN(1)
"RTN","XLFNAME2",61,0)
 . S XUFDA(XUFIL,XUIENS,XUPTR)=XUPVAL
"RTN","XLFNAME2",62,0)
 . D FILE^DIE("","XUFDA","XUMSG") K DIERR,XUMSG
"RTN","XLFNAME2",63,0)
 Q
"RTN","XLFNAME2",64,0)
 ;
"RTN","XLFNAME2",65,0)
DELCOMP(XUFIL,XUREC,XUFLD,XUPTR) ;Delete Name Components entry
"RTN","XLFNAME2",66,0)
 ;Called from kill logic "ANAME" MUMPS xref of file #200
"RTN","XLFNAME2",67,0)
 N DA,DIK,XUFDA,XUIENS,XUMSG,XUVAL,DIERR
"RTN","XLFNAME2",68,0)
 ;
"RTN","XLFNAME2",69,0)
 ;Get IENS from XUREC
"RTN","XLFNAME2",70,0)
 I $G(XUREC)'["," S XUIENS=$$IENS^DILF(.XUREC)
"RTN","XLFNAME2",71,0)
 E  S XUIENS=XUREC S:XUIENS'?.E1"," XUIENS=XUIENS_","
"RTN","XLFNAME2",72,0)
 ;
"RTN","XLFNAME2",73,0)
 ;Lookup entry in Name Components file
"RTN","XLFNAME2",74,0)
 S XUVAL(1)=XUFIL,XUVAL(2)=XUFLD,XUVAL(3)=XUIENS
"RTN","XLFNAME2",75,0)
 S DA=$$FIND1^DIC(20,"","X",.XUVAL,"BB","","XUMSG") ;8*301
"RTN","XLFNAME2",76,0)
 Q:$G(DIERR)
"RTN","XLFNAME2",77,0)
 ;
"RTN","XLFNAME2",78,0)
 ;Delete entry from Name Components file
"RTN","XLFNAME2",79,0)
 S DIK="^VA(20,"
"RTN","XLFNAME2",80,0)
 D ^DIK
"RTN","XLFNAME2",81,0)
 ;
"RTN","XLFNAME2",82,0)
 ;Delete pointer value
"RTN","XLFNAME2",83,0)
 I $G(XUPTR) D
"RTN","XLFNAME2",84,0)
 . K XUFDA S XUFDA(XUFIL,XUIENS,XUPTR)=""
"RTN","XLFNAME2",85,0)
 . D FILE^DIE("","XUFDA","XUMSG") K XUMSG,DIERR
"RTN","XLFNAME2",86,0)
 Q
"RTN","XLFNAME2",87,0)
 ;
"RTN","XLFNAME2",88,0)
CHKPTR ;Make sure entry contains a valid pointer to Name Components file.
"RTN","XLFNAME2",89,0)
 ;Called from the pre-action on the XUEXISTING USER form.
"RTN","XLFNAME2",90,0)
 N AIEN,DEG,FDA,NAM,PTR,DIERR
"RTN","XLFNAME2",91,0)
 ;
"RTN","XLFNAME2",92,0)
 ;Get current pointer value
"RTN","XLFNAME2",93,0)
 S PTR=+$P($G(^VA(200,DA,3.1)),U)
"RTN","XLFNAME2",94,0)
 ;
"RTN","XLFNAME2",95,0)
 ;If not valid, get standard name, and update the Name Components file
"RTN","XLFNAME2",96,0)
 I 'PTR!($D(^VA(20,PTR,0))[0) D
"RTN","XLFNAME2",97,0)
 . K PTR
"RTN","XLFNAME2",98,0)
 . S NAM=$P($G(^VA(200,DA,0)),U)
"RTN","XLFNAME2",99,0)
 . S DEG=$P($G(^VA(200,DA,3.1)),U,6)
"RTN","XLFNAME2",100,0)
 . D STDNAME^XLFNAME(.NAM,"C")
"RTN","XLFNAME2",101,0)
 . D UPDCOMP(200,DA_",",.01,.NAM,10.1)
"RTN","XLFNAME2",102,0)
 Q
"RTN","XUMVIDTA")
0^3^B10198216^B9059477
"RTN","XUMVIDTA",1,0)
XUMVIDTA ;MVI/CKN - MVI New Person Data Analysis ;8/20/19  11:03
"RTN","XUMVIDTA",2,0)
 ;;8.0;KERNEL;**705,711,710**;Jul 10, 1995;Build 2
"RTN","XUMVIDTA",3,0)
 Q
"RTN","XUMVIDTA",4,0)
EP(RETURN,SEL,ACTSEL) ;
"RTN","XUMVIDTA",5,0)
 ;RPC - XUS MVI NEW PERSON DATA
"RTN","XUMVIDTA",6,0)
 ;This RPC is called by MPI to get data analysis report from
"RTN","XUMVIDTA",7,0)
 ;NEW PERSON file (#200) for active VistA sites
"RTN","XUMVIDTA",8,0)
 ;Input:
"RTN","XUMVIDTA",9,0)
 ;    SEL (Required) - 1 : All - Active New Person and  Non Active New Person
"RTN","XUMVIDTA",10,0)
 ;                     2 : Active New Person
"RTN","XUMVIDTA",11,0)
 ;                     3 : Non Active New Person
"RTN","XUMVIDTA",12,0)
 ; ACTSEL (Optional for Non Active) - 1 : All
"RTN","XUMVIDTA",13,0)
 ;                     1 : All
"RTN","XUMVIDTA",14,0)
 ;                     2 : Active records having a SecID value
"RTN","XUMVIDTA",15,0)
 ;                     3 : Active records having an Email value
"RTN","XUMVIDTA",16,0)
 ;                     4 : Active records having a NT USERNAME value
"RTN","XUMVIDTA",17,0)
 ;Output:
"RTN","XUMVIDTA",18,0)
 ; RETURN - Total Count^Total Non Active^Total Active^Total SECID^Total Email
"RTN","XUMVIDTA",19,0)
 ;          ^Total NT User^Total Visitors
"RTN","XUMVIDTA",20,0)
 ;
"RTN","XUMVIDTA",21,0)
 N XUDUZ,U,TOTVIS,TOTCNT,NONACT,ACT,TOTNACT,TOTACT,TOTSECID,TOTEMAIL,TOTNTUSR,ARR
"RTN","XUMVIDTA",22,0)
 S (TOTCNT,TOTNACT,TOTACT,TOTSECID,TOTEMAIL,TOTNTUSR,TOTVIS)=0
"RTN","XUMVIDTA",23,0)
 S U="^"
"RTN","XUMVIDTA",24,0)
 S XUDUZ=.9 F  S XUDUZ=$O(^VA(200,XUDUZ)) Q:+XUDUZ=0  D
"RTN","XUMVIDTA",25,0)
 .K ARR
"RTN","XUMVIDTA",26,0)
 .S TOTCNT=TOTCNT+1
"RTN","XUMVIDTA",27,0)
 .D GET(XUDUZ,.ARR)
"RTN","XUMVIDTA",28,0)
 .I $G(ARR("VISITOR"))=1 S TOTVIS=TOTVIS+1 ; Visitor records ;**710 - STORY_952862 (dri) remove QUIT to stop filtering, allow person to also be counted as active
"RTN","XUMVIDTA",29,0)
 .;Inactive New Person
"RTN","XUMVIDTA",30,0)
 .I SEL=3 D  Q
"RTN","XUMVIDTA",31,0)
 ..S NONACT=$$NONACT(.ARR)
"RTN","XUMVIDTA",32,0)
 ..I NONACT S TOTNACT=TOTNACT+1
"RTN","XUMVIDTA",33,0)
 .;Active New Person
"RTN","XUMVIDTA",34,0)
 .I SEL=2 D  Q
"RTN","XUMVIDTA",35,0)
 ..S ACT=$$ACT(.ARR) I 'ACT Q
"RTN","XUMVIDTA",36,0)
 ..S TOTACT=TOTACT+1
"RTN","XUMVIDTA",37,0)
 ..D GETACT(ACTSEL,.ARR)
"RTN","XUMVIDTA",38,0)
 .;All Active and Inactive New Person
"RTN","XUMVIDTA",39,0)
 .I SEL=1 D
"RTN","XUMVIDTA",40,0)
 ..S NONACT=$$NONACT(.ARR) I NONACT S TOTNACT=TOTNACT+1 Q
"RTN","XUMVIDTA",41,0)
 ..I '$$ACT(.ARR) Q
"RTN","XUMVIDTA",42,0)
 ..S TOTACT=TOTACT+1
"RTN","XUMVIDTA",43,0)
 ..D GETACT(ACTSEL,.ARR)
"RTN","XUMVIDTA",44,0)
 ;
"RTN","XUMVIDTA",45,0)
 ;RETURN - Total Count^Total Non Active^Total Active^Total SECID^Total Email
"RTN","XUMVIDTA",46,0)
 ;         ^Total NT User^Total Visitors
"RTN","XUMVIDTA",47,0)
 S RETURN=TOTCNT_U_TOTNACT_U_TOTACT_U_TOTSECID_U_TOTEMAIL_U_TOTNTUSR_U_TOTVIS
"RTN","XUMVIDTA",48,0)
 Q
"RTN","XUMVIDTA",49,0)
GET(XUDUZ,ARR) ;
"RTN","XUMVIDTA",50,0)
 ;Get all necessary fields from New Person file (#200)
"RTN","XUMVIDTA",51,0)
 N NPDATA
"RTN","XUMVIDTA",52,0)
 S DR="201;205.1;205.5;501.1;7;9.2",DIC=200,DA=XUDUZ,DIQ="NPDATA",DIQ(0)="I" D EN^DIQ1
"RTN","XUMVIDTA",53,0)
 S ARR("PRIMOPT")=$G(NPDATA(200,XUDUZ,201,"I"))
"RTN","XUMVIDTA",54,0)
 S ARR("SECID")=$G(NPDATA(200,XUDUZ,205.1,"I"))
"RTN","XUMVIDTA",55,0)
 S ARR("EMAIL")=$G(NPDATA(200,XUDUZ,205.5,"I"))
"RTN","XUMVIDTA",56,0)
 S ARR("NTUSR")=$G(NPDATA(200,XUDUZ,501.1,"I"))
"RTN","XUMVIDTA",57,0)
 S ARR("DISUSR")=$G(NPDATA(200,XUDUZ,7,"I"))
"RTN","XUMVIDTA",58,0)
 S ARR("TERMDT")=$G(NPDATA(200,XUDUZ,9.2,"I"))
"RTN","XUMVIDTA",59,0)
 I $O(^VA(200,XUDUZ,8910,0)) S ARR("VSTDATA")=1
"RTN","XUMVIDTA",60,0)
 I $G(ARR("VSTDATA")),$G(ARR("PRIMOPT"))'="" S ARR("VISITOR")=1
"RTN","XUMVIDTA",61,0)
 K DIC,DA,DR,DIQ
"RTN","XUMVIDTA",62,0)
 Q
"RTN","XUMVIDTA",63,0)
NONACT(ARR) ;
"RTN","XUMVIDTA",64,0)
 ;Inactive Person - Disuser=Y and/or Termination date is not a future date
"RTN","XUMVIDTA",65,0)
 I $G(ARR("DISUSR"))=1!(($G(ARR("TERMDT"))'="")&($G(ARR("TERMDT"))'>DT)) Q 1
"RTN","XUMVIDTA",66,0)
 Q 0
"RTN","XUMVIDTA",67,0)
ACT(ARR) ;
"RTN","XUMVIDTA",68,0)
 ;Active Person - not Disuser=Y and/or no Termination date.
"RTN","XUMVIDTA",69,0)
 ;**711 Story 977780 (ckn) - Add check for primary option assigned.
"RTN","XUMVIDTA",70,0)
 I $G(ARR("DISUSR"))'=1,($G(ARR("TERMDT"))=""!($G(ARR("TERMDT"))>DT)),($G(ARR("PRIMOPT"))'="") Q 1
"RTN","XUMVIDTA",71,0)
 Q 0
"RTN","XUMVIDTA",72,0)
GETACT(ACTSEL,ARR) ;
"RTN","XUMVIDTA",73,0)
 ;Aggregate total Active records has a SECID value
"RTN","XUMVIDTA",74,0)
 I ACTSEL=2,$G(ARR("SECID"))'="" S TOTSECID=TOTSECID+1 Q
"RTN","XUMVIDTA",75,0)
 ;Agreegate total Active records has an Email value
"RTN","XUMVIDTA",76,0)
 I ACTSEL=3,$G(ARR("EMAIL"))'="" S TOTEMAIL=TOTEMAIL+1 Q
"RTN","XUMVIDTA",77,0)
 ;Aggregate total Active records has a NT UserName value
"RTN","XUMVIDTA",78,0)
 I ACTSEL=4,$G(ARR("NTUSR"))'="" S TOTNTUSR=TOTNTUSR+1 Q
"RTN","XUMVIDTA",79,0)
 ;Aggregate all - SECID, AUPDN and NT UserName
"RTN","XUMVIDTA",80,0)
 I ACTSEL=1 D
"RTN","XUMVIDTA",81,0)
 .I $G(ARR("SECID"))'="" S TOTSECID=TOTSECID+1
"RTN","XUMVIDTA",82,0)
 .I $G(ARR("EMAIL"))'="" S TOTEMAIL=TOTEMAIL+1
"RTN","XUMVIDTA",83,0)
 .I $G(ARR("NTUSR"))'="" S TOTNTUSR=TOTNTUSR+1
"RTN","XUMVIDTA",84,0)
 Q
"RTN","XUMVINPB")
0^1^B45050310^n/a
"RTN","XUMVINPB",1,0)
XUMVINPB ;MVI/DRI - Master Veteran Index New Person Bulk Pull RPC ;9/4/19  11:44
"RTN","XUMVINPB",2,0)
 ;;8.0;KERNEL;**710**;Jul 10, 1995;Build 2
"RTN","XUMVINPB",3,0)
 ;Per VA Directive 6402, this routine should not be modified.
"RTN","XUMVINPB",4,0)
 ;
"RTN","XUMVINPB",5,0)
 ;**710 - STORY_952862 (dri) new routine
"RTN","XUMVINPB",6,0)
 ;
"RTN","XUMVINPB",7,0)
 ;Reference to ^XWB2HL7 supported by IA #3144
"RTN","XUMVINPB",8,0)
 ;
"RTN","XUMVINPB",9,0)
BULKGET(XURET,XUDUZ) ;rpc to retrieve bulk pull of new person file data
"RTN","XUMVINPB",10,0)
 ; 
"RTN","XUMVINPB",11,0)
 ; called from rpc: XUS MVI NEW PERSON BULK GET
"RTN","XUMVINPB",12,0)
 ;
"RTN","XUMVINPB",13,0)
 ; Input:
"RTN","XUMVINPB",14,0)
 ;  XUDUZ = NEW PERSON IEN TO BEGIN LOOPING
"RTN","XUMVINPB",15,0)
 ;
"RTN","XUMVINPB",16,0)
 ; Output:
"RTN","XUMVINPB",17,0)
 ;  Success:
"RTN","XUMVINPB",18,0)
 ;   XURET = ^TMP("XUMVINPB",$J)
"RTN","XUMVINPB",19,0)
 ;    @XURET@(#) = FILE #;FIELD #<;SUBFIELD #><;FILE POINTER>^FIELD NAME^<COUNTER #>^INTERNAL VALUE^EXTERNAL VALUE
"RTN","XUMVINPB",20,0)
 ;      If Counter populated, denotes multiple value <1 to n>.
"RTN","XUMVINPB",21,0)
 ;    @XURET@(#)="200;IEN^DUZ^^^"
"RTN","XUMVINPB",22,0)
 ;    @XURET@(#)="200;.01^NAME^^^"
"RTN","XUMVINPB",23,0)
 ;    @XURET@(#)="200;.111^STREET ADDRESS 1^^^"
"RTN","XUMVINPB",24,0)
 ;    @XURET@(#)="200;.112^STREET ADDRESS 2^^^"
"RTN","XUMVINPB",25,0)
 ;    @XURET@(#)="200;.113^STREET ADDRESS 3^^^"
"RTN","XUMVINPB",26,0)
 ;    @XURET@(#)="200;.114^CITY^^^"
"RTN","XUMVINPB",27,0)
 ;    @XURET@(#)="200;.115^STATE^^^"
"RTN","XUMVINPB",28,0)
 ;    @XURET@(#)="200;.116^ZIP CODE^^^"
"RTN","XUMVINPB",29,0)
 ;    @XURET@(#)="200;.132^OFFICE PHONE^^^"
"RTN","XUMVINPB",30,0)
 ;    @XURET@(#)="200;.151^EMAIL ADDRESS^^^"
"RTN","XUMVINPB",31,0)
 ;    @XURET@(#)="200;4^SEX^^^"
"RTN","XUMVINPB",32,0)
 ;    @XURET@(#)="200;5^DOB^^^"
"RTN","XUMVINPB",33,0)
 ;    @XURET@(#)="200;9^SSN^^^"
"RTN","XUMVINPB",34,0)
 ;    @XURET@(#)="200;16;.01^DIVISION^<1 to n>^^"
"RTN","XUMVINPB",35,0)
 ;    @XURET@(#)="200;10.1^NAME COMPONENTS^^^"
"RTN","XUMVINPB",36,0)
 ;    @XURET@(#)="20;1^FAMILY (LAST) NAME^^^"
"RTN","XUMVINPB",37,0)
 ;    @XURET@(#)="20;2^GIVEN (FIRST) NAME^^^"
"RTN","XUMVINPB",38,0)
 ;    @XURET@(#)="20;3^MIDDLE NAME^^^"
"RTN","XUMVINPB",39,0)
 ;    @XURET@(#)="20;4^PREFIX^^^"
"RTN","XUMVINPB",40,0)
 ;    @XURET@(#)="20;5^SUFFIX^^^"
"RTN","XUMVINPB",41,0)
 ;    @XURET@(#)="20;6^DEGREE^^^"
"RTN","XUMVINPB",42,0)
 ;    @XURET@(#)="200;205.2^SUBJECT ORGANIZATION^^^"
"RTN","XUMVINPB",43,0)
 ;    @XURET@(#)="200;205.3^SUBJECT ORGANIZATION ID^^^"
"RTN","XUMVINPB",44,0)
 ;    @XURET@(#)="200;205.4^UNIQUE USER ID^^^"
"RTN","XUMVINPB",45,0)
 ;    @XURET@(#)="200;501.1^NETWORK USERNAME^^^"
"RTN","XUMVINPB",46,0)
 ;    @XURET@(#)="200;41.99^NPI^^^"
"RTN","XUMVINPB",47,0)
 ;    @XURET@(#)="200;53.2^DEA#^^^"
"RTN","XUMVINPB",48,0)
 ;    @XURET@(#)="200;747.44^DEA EXPIRATION DATE^^^"
"RTN","XUMVINPB",49,0)
 ;    @XURET@(#)="200;201^PRIMARY MENU OPTION^^^"
"RTN","XUMVINPB",50,0)
 ;    @XURET@(#)="200;203;.01^SECONDARY MENU OPTIONS^<1 to n>^^"
"RTN","XUMVINPB",51,0)
 ;    @XURET@(#)="200;51;.01^KEY^<1 to n>^^"
"RTN","XUMVINPB",52,0)
 ;
"RTN","XUMVINPB",53,0)
 ;    @XURET@(#)="200;EOF^EOF^" - if end of new person file reached
"RTN","XUMVINPB",54,0)
 ;
"RTN","XUMVINPB",55,0)
 ;  Fail:
"RTN","XUMVINPB",56,0)
 ;   XURET = ^TMP("XUMVINPB",$J)
"RTN","XUMVINPB",57,0)
 ;   @XURET@(1)="-1^No Data to Retrieve"
"RTN","XUMVINPB",58,0)
 ;
"RTN","XUMVINPB",59,0)
 ; Example calling rpc from VistA:
"RTN","XUMVINPB",60,0)
 ;  >D BULKGET^XUMVINPB(.XURET,12595)
"RTN","XUMVINPB",61,0)
 ;  >ZW XURET
"RTN","XUMVINPB",62,0)
 ;  >XURET="^TMP(""XUMVINPB"",17226)"
"RTN","XUMVINPB",63,0)
 ;
"RTN","XUMVINPB",64,0)
 ;  D ^%G would return:
"RTN","XUMVINPB",65,0)
 ;    ^TMP("XUMVINPB",17226,1)="200;IEN^DUZ^12596^12596"
"RTN","XUMVINPB",66,0)
 ;                          2)="200;.01^NAME^LAST,FIRST MIDDLE SUFFIX^LAST,FIRST MIDDLE SUFFIX"
"RTN","XUMVINPB",67,0)
 ;                          3)="200;.111^STREET ADDRESS 1^^STREET ADDRESS 1^STREET ADDRESS 1"
"RTN","XUMVINPB",68,0)
 ;                          4)="200;.112^STREET ADDRESS 2^^STREET ADDRESS 2^STREET ADDRESS 2"
"RTN","XUMVINPB",69,0)
 ;                          #)=continuation of returned data
"RTN","XUMVINPB",70,0)
 ;
"RTN","XUMVINPB",71,0)
 ; Example calling rpc from MVI:
"RTN","XUMVINPB",72,0)
 ;  D DIRECT^XWB2HL7(.XURET,SITE,"XUS MVI NEW PERSON BULK GET","",$G(XUDUZ))
"RTN","XUMVINPB",73,0)
 ;
"RTN","XUMVINPB",74,0)
 ;
"RTN","XUMVINPB",75,0)
 K XURET
"RTN","XUMVINPB",76,0)
 N I,CNT,FILE,FLD,FLDS,FLDNM,SUBFILE,SUBFLD,XUGBL
"RTN","XUMVINPB",77,0)
 ;
"RTN","XUMVINPB",78,0)
 S XUGBL="^TMP("_"""XUMVINPB"""_","_$J_")"
"RTN","XUMVINPB",79,0)
 K @XUGBL
"RTN","XUMVINPB",80,0)
 ;
"RTN","XUMVINPB",81,0)
 I '$D(XUDUZ) S XUDUZ=.5 ;skip over postmaster
"RTN","XUMVINPB",82,0)
 ;
"RTN","XUMVINPB",83,0)
 ;lets only get the labels once per bulk run
"RTN","XUMVINPB",84,0)
 S FILE=200
"RTN","XUMVINPB",85,0)
 S FLDS=".01;.111;.112;.113;.114;.115;.116;.132;.151;4;5;9;16*;10.1;205.2;205.3;205.4;501.1;41.99;53.2;747.44;201;203*;51*"
"RTN","XUMVINPB",86,0)
 F I=1:1:$L(FLDS,";") S FLD=$P($P(FLDS,";",I),"*") D
"RTN","XUMVINPB",87,0)
 .D FIELD^DID(FILE,FLD,"","LABEL","FLDNM(FILE,FLD)")
"RTN","XUMVINPB",88,0)
 .I FLD=16 S SUBFILE=200.02,SUBFLD=.01 D FIELD^DID(SUBFILE,SUBFLD,"","LABEL","FLDNM(SUBFILE,SUBFLD)") ;division multiple
"RTN","XUMVINPB",89,0)
 .I FLD=10.1 S SUBFILE=20 F SUBFLD=1,2,3,4,5,6 D FIELD^DID(SUBFILE,SUBFLD,"","LABEL","FLDNM(SUBFILE,SUBFLD)") ;name components
"RTN","XUMVINPB",90,0)
 .I FLD=51 S SUBFILE=200.051,SUBFLD=.01 D FIELD^DID(SUBFILE,SUBFLD,"","LABEL","FLDNM(SUBFILE,SUBFLD)") ;keys
"RTN","XUMVINPB",91,0)
 .I FLD=203 S SUBFILE=200.03,SUBFLD=.01 D FIELD^DID(SUBFILE,SUBFLD,"","LABEL","FLDNM(SUBFILE,SUBFLD)") ;secondary menu options multiple
"RTN","XUMVINPB",92,0)
 ;
"RTN","XUMVINPB",93,0)
 S CNT=1
"RTN","XUMVINPB",94,0)
 F  S XUDUZ=$O(^VA(200,XUDUZ)) Q:'XUDUZ  I $$ACTIVE(XUDUZ) D  Q  ;get next active new person
"RTN","XUMVINPB",95,0)
 .N XUARR
"RTN","XUMVINPB",96,0)
 .D GETS^DIQ(FILE,+XUDUZ_",",FLDS,"EI","XUARR") ;retrieve data
"RTN","XUMVINPB",97,0)
 .;
"RTN","XUMVINPB",98,0)
 .S @XUGBL@(CNT)=FILE_";IEN^DUZ^^"_XUDUZ_"^"_XUDUZ S CNT=CNT+1
"RTN","XUMVINPB",99,0)
 .;
"RTN","XUMVINPB",100,0)
 .F I=1:1:$L(FLDS,";") S FLD=$P($P(FLDS,";",I),"*") D
"RTN","XUMVINPB",101,0)
 ..I FLD=16 D  Q  ;division multiple
"RTN","XUMVINPB",102,0)
 ...N IENS,MCNT,SUBFILE,SUBFLD
"RTN","XUMVINPB",103,0)
 ...S MCNT=1,SUBFILE=200.02,SUBFLD=.01
"RTN","XUMVINPB",104,0)
 ...I '$D(XUARR(SUBFILE)) S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_"^"_(FLDNM(SUBFILE,SUBFLD,"LABEL"))_"^"_MCNT_"^^" S CNT=CNT+1 Q
"RTN","XUMVINPB",105,0)
 ...S IENS="" F  S IENS=$O(XUARR(SUBFILE,IENS)) Q:IENS=""  S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_"^"_(FLDNM(SUBFILE,SUBFLD,"LABEL"))_"^"_MCNT_"^"_$G(XUARR(SUBFILE,IENS,SUBFLD,"I"))_"^"_$G(XUARR(SUBFILE,IENS,SUBFLD,"E")) S MCNT=MCNT+1,CNT=CNT+1
"RTN","XUMVINPB",106,0)
 ..;
"RTN","XUMVINPB",107,0)
 ..I FLD=10.1 D  Q  ;name components
"RTN","XUMVINPB",108,0)
 ...S @XUGBL@(CNT)=FILE_";"_FLD_"^"_(FLDNM(FILE,FLD,"LABEL"))_"^^"_$G(XUARR(FILE,XUDUZ_",",FLD,"I"))_"^"_$G(XUARR(FILE,XUDUZ_",",FLD,"E")) S CNT=CNT+1
"RTN","XUMVINPB",109,0)
 ...N NCFILE,NCFLD
"RTN","XUMVINPB",110,0)
 ...S NCFILE=20
"RTN","XUMVINPB",111,0)
 ...D GETS^DIQ(NCFILE,+$G(XUARR(FILE,XUDUZ_",",FLD,"I"))_",","1;2;3;4;5;6","EI","XUARR") ;retrieve name component data
"RTN","XUMVINPB",112,0)
 ...F NCFLD=1,2,3,4,5,6 D
"RTN","XUMVINPB",113,0)
 ....S @XUGBL@(CNT)=NCFILE_";"_NCFLD_"^"_(FLDNM(NCFILE,NCFLD,"LABEL"))_"^^"_$G(XUARR(NCFILE,+$G(XUARR(FILE,XUDUZ_",",FLD,"I"))_",",NCFLD,"I"))_"^"_$G(XUARR(NCFILE,+$G(XUARR(FILE,XUDUZ_",",FLD,"I"))_",",NCFLD,"E")) S CNT=CNT+1
"RTN","XUMVINPB",114,0)
 ..;
"RTN","XUMVINPB",115,0)
 ..I FLD=51 D  Q  ;KEYS multiple
"RTN","XUMVINPB",116,0)
 ...N IENS,MCNT,SUBFILE,SUBFLD
"RTN","XUMVINPB",117,0)
 ...S MCNT=1,SUBFILE=200.051,SUBFLD=.01
"RTN","XUMVINPB",118,0)
 ...I '$D(XUARR(SUBFILE)) S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_"^"_(FLDNM(SUBFILE,SUBFLD,"LABEL"))_"^"_MCNT_"^^",CNT=CNT+1 Q
"RTN","XUMVINPB",119,0)
 ...S IENS="" F  S IENS=$O(XUARR(SUBFILE,IENS)) Q:IENS=""  S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_"^"_(FLDNM(SUBFILE,SUBFLD,"LABEL"))_"^"_MCNT_"^"_$G(XUARR(SUBFILE,IENS,SUBFLD,"I"))_"^"_$G(XUARR(SUBFILE,IENS,SUBFLD,"E")),MCNT=MCNT+1,CNT=CNT+1
"RTN","XUMVINPB",120,0)
 ..;
"RTN","XUMVINPB",121,0)
 ..I FLD=203 D  Q  ;secondary menu options multiple
"RTN","XUMVINPB",122,0)
 ...N IENS,MCNT,SUBFILE,SUBFLD
"RTN","XUMVINPB",123,0)
 ...S MCNT=1,SUBFILE=200.03,SUBFLD=.01
"RTN","XUMVINPB",124,0)
 ...I '$D(XUARR(SUBFILE)) S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_"^"_(FLDNM(SUBFILE,SUBFLD,"LABEL"))_"^"_MCNT_"^^" S CNT=CNT+1 Q
"RTN","XUMVINPB",125,0)
 ...S IENS="" F  S IENS=$O(XUARR(SUBFILE,IENS)) Q:IENS=""  S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_"^"_(FLDNM(SUBFILE,SUBFLD,"LABEL"))_"^"_MCNT_"^"_$G(XUARR(SUBFILE,IENS,SUBFLD,"I"))_"^"_$G(XUARR(SUBFILE,IENS,SUBFLD,"E")) S MCNT=MCNT+1,CNT=CNT+1
"RTN","XUMVINPB",126,0)
 ..;
"RTN","XUMVINPB",127,0)
 ..S @XUGBL@(CNT)=FILE_";"_FLD_"^"_(FLDNM(FILE,FLD,"LABEL"))_"^^"_$G(XUARR(FILE,XUDUZ_",",FLD,"I"))_"^"_$G(XUARR(FILE,XUDUZ_",",FLD,"E")) S CNT=CNT+1 ;all other fields
"RTN","XUMVINPB",128,0)
 ;
"RTN","XUMVINPB",129,0)
 I 'XUDUZ S @XUGBL@(CNT)=FILE_";EOF^EOF^" ;end of file, no more new persons
"RTN","XUMVINPB",130,0)
 I '$D(@XUGBL) S @XUGBL@(CNT)="-1^No Data to Retrieve"
"RTN","XUMVINPB",131,0)
 ;
"RTN","XUMVINPB",132,0)
 S XURET=$NA(@XUGBL)
"RTN","XUMVINPB",133,0)
 Q
"RTN","XUMVINPB",134,0)
 ;
"RTN","XUMVINPB",135,0)
ACTIVE(XUDUZ) ;active person
"RTN","XUMVINPB",136,0)
 N FILE,FLDS,XUARR
"RTN","XUMVINPB",137,0)
 S FILE=200,FLDS="7;9.2;201" ;disuser; termination date; primary menu option
"RTN","XUMVINPB",138,0)
 D GETS^DIQ(FILE,+XUDUZ_",",FLDS,"EI","XUARR") ;retrieve data
"RTN","XUMVINPB",139,0)
 I $G(XUARR(FILE,+XUDUZ_",",7,"I"))'=1,($G(XUARR(FILE,+XUDUZ_",",9.2,"I"))=""!($G(XUARR(FILE,+XUDUZ_",",9.2,"I"))>DT)),($G(XUARR(FILE,+XUDUZ_",",201,"I"))'="") Q 1
"RTN","XUMVINPB",140,0)
 Q 0
"RTN","XUMVINPB",141,0)
 ;
"RTN","XUMVINPU")
0^2^B125047049^B124825166
"RTN","XUMVINPU",1,0)
XUMVINPU ;MVI/DRI - Master Veteran Index New Person Utilities ;3/21/18  10:15
"RTN","XUMVINPU",2,0)
 ;;8.0;KERNEL;**691,711,710**;Jul 10, 1995;Build 2
"RTN","XUMVINPU",3,0)
 ;Per VA Directive 6402, this routine should not be modified.
"RTN","XUMVINPU",4,0)
 ;
"RTN","XUMVINPU",5,0)
 ;**711, Story 977780 (jfw)
"RTN","XUMVINPU",6,0)
 ;   - Added NPI/SSN as additional lookup values/parameters
"RTN","XUMVINPU",7,0)
 ;   - Added the following additional traits to return:
"RTN","XUMVINPU",8,0)
 ;       STREET ADDRESS 2 (.112)
"RTN","XUMVINPU",9,0)
 ;       STREET ADDRESS 3 (.113)
"RTN","XUMVINPU",10,0)
 ;       CITY (.114)
"RTN","XUMVINPU",11,0)
 ;       STATE (.115)
"RTN","XUMVINPU",12,0)
 ;       ZIP CODE (.116)
"RTN","XUMVINPU",13,0)
 ;       FAX NUMBER (.136)
"RTN","XUMVINPU",14,0)
 ;       SEX (4)
"RTN","XUMVINPU",15,0)
 ;       TITLE (8)
"RTN","XUMVINPU",16,0)
 ;       NPI (41.99)
"RTN","XUMVINPU",17,0)
 ;       KEYS (51)
"RTN","XUMVINPU",18,0)
 ;       PERSON CLASS (8932.1)
"RTN","XUMVINPU",19,0)
 ;         Effective Date (2)
"RTN","XUMVINPU",20,0)
 ;         Expiration Date (3)
"RTN","XUMVINPU",21,0)
 ;       AUTHORIZED TO WRITE MED ORDERS (53.1)
"RTN","XUMVINPU",22,0)
 ;       DETOX/MAINTENANCE ID NUMBER (53.11)
"RTN","XUMVINPU",23,0)
 ;       DEA# (53.2)
"RTN","XUMVINPU",24,0)
 ;       INACTIVE DATE (53.4)
"RTN","XUMVINPU",25,0)
 ;       PROVIDER CLASS (53.5)
"RTN","XUMVINPU",26,0)
 ;       PROVIDER TYPE (53.6)
"RTN","XUMVINPU",27,0)
 ;       REMARKS (53.9)
"RTN","XUMVINPU",28,0)
 ;       NON-VA PRESCRIBER (53.91)
"RTN","XUMVINPU",29,0)
 ;       TAX ID (53.92)
"RTN","XUMVINPU",30,0)
 ;       SCHEDULE II NARCOTIC (55.1)
"RTN","XUMVINPU",31,0)
 ;       SCHEDULE II NON-NARCOTIC (55.2)
"RTN","XUMVINPU",32,0)
 ;       SCHEDULE III NARCOTIC (55.3)
"RTN","XUMVINPU",33,0)
 ;       SCHEDULE III NON-NARCOTIC (55.4)
"RTN","XUMVINPU",34,0)
 ;       SCHEDULE IV (55.5)
"RTN","XUMVINPU",35,0)
 ;       SCHEDULE V (55.6)
"RTN","XUMVINPU",36,0)
 ;       DEA EXPIRATION DATE (747.44)
"RTN","XUMVINPU",37,0)
 ;
"RTN","XUMVINPU",38,0)
 ;       The following will be returned if patch XU*8.0*688 installed
"RTN","XUMVINPU",39,0)
 ;         DETOX CALCULATED (9001)
"RTN","XUMVINPU",40,0)
 ;         DEA NUMBER (53.2...01)
"RTN","XUMVINPU",41,0)
 ;         INDIVIDUAL DEA SUFFIX (53.2...02)
"RTN","XUMVINPU",42,0)
 ;         All fields in DEA NUMBERS (#8991.9) file if DEA NUMBER exists 
"RTN","XUMVINPU",43,0)
 ;          (Except .01 which is being returned from File #200 above)
"RTN","XUMVINPU",44,0)
 ;          
"RTN","XUMVINPU",45,0)
 ;
"RTN","XUMVINPU",46,0)
GET(XURET,XUDUZ,SECID,NPI,SSN) ;rpc to retrieve new person file data
"RTN","XUMVINPU",47,0)
 ; 
"RTN","XUMVINPU",48,0)
 ; called from rpc: XUS MVI NEW PERSON GET
"RTN","XUMVINPU",49,0)
 ;
"RTN","XUMVINPU",50,0)
 ; Input (ONE of the following):
"RTN","XUMVINPU",51,0)
 ;  XUDUZ = NEW PERSON IEN
"RTN","XUMVINPU",52,0)
 ;  SECID = SECURITY ID
"RTN","XUMVINPU",53,0)
 ;  NPI   = NATIONAL PROVIDER IDENTIFIER
"RTN","XUMVINPU",54,0)
 ;  SSN   = SOCIAL SECURITY NUMBER
"RTN","XUMVINPU",55,0)
 ;
"RTN","XUMVINPU",56,0)
 ; Output:
"RTN","XUMVINPU",57,0)
 ;  Success:
"RTN","XUMVINPU",58,0)
 ;   XURET = ^TMP("XUMVINPU",$J)
"RTN","XUMVINPU",59,0)
 ;    @XURET@(#) = FILE #;FIELD #<;SUBFIELD #><;FILE POINTER>^FIELD NAME^<COUNTER #>^INTERNAL VALUE^EXTERNAL VALUE
"RTN","XUMVINPU",60,0)
 ;      <> Denotes optional values. If Counter populated, denotes multiple value <1-n>.
"RTN","XUMVINPU",61,0)
 ;    @XURET@(#)="200;IEN^DUZ^^^"
"RTN","XUMVINPU",62,0)
 ;    @XURET@(#)="200;.01^NAME^^^"
"RTN","XUMVINPU",63,0)
 ;    @XURET@(#)="200;4^SEX^^^"
"RTN","XUMVINPU",64,0)
 ;    @XURET@(#)="200;8^TITLE^^^"
"RTN","XUMVINPU",65,0)
 ;    @XURET@(#)="200;7^DISUSER^^^"
"RTN","XUMVINPU",66,0)
 ;    @XURET@(#)="200;9.2^TERMINATION DATE^^^"
"RTN","XUMVINPU",67,0)
 ;    @XURET@(#)="200;9.4^Termination Reason^^^"
"RTN","XUMVINPU",68,0)
 ;    @XURET@(#)="200;15^PROHIBITED TIMES FOR SIGN-ON^^^"
"RTN","XUMVINPU",69,0)
 ;    @XURET@(#)="200;11.2^DATE VERIFY CODE LAST CHANGED^^^"
"RTN","XUMVINPU",70,0)
 ;    @XURET@(#)="200;.111^STREET ADDRESS 1^^^"
"RTN","XUMVINPU",71,0)
 ;    @XURET@(#)="200;.112^STREET ADDRESS 2^^^"
"RTN","XUMVINPU",72,0)
 ;    @XURET@(#)="200;.113^STREET ADDRESS 3^^^"
"RTN","XUMVINPU",73,0)
 ;    @XURET@(#)="200;.114^CITY^^^"
"RTN","XUMVINPU",74,0)
 ;    @XURET@(#)="200;.115^STATE^^^"
"RTN","XUMVINPU",75,0)
 ;    @XURET@(#)="200;.116^ZIP CODE^^^"
"RTN","XUMVINPU",76,0)
 ;    @XURET@(#)="200;.132^OFFICE PHONE^^^"
"RTN","XUMVINPU",77,0)
 ;    @XURET@(#)="200;.136^FAX NUMBER^^^"
"RTN","XUMVINPU",78,0)
 ;    @XURET@(#)="200;.151^EMAIL ADDRESS^^^"
"RTN","XUMVINPU",79,0)
 ;    @XURET@(#)="200;30^DATE ENTERED^^^"
"RTN","XUMVINPU",80,0)
 ;    @XURET@(#)="200;31^CREATOR^^^"
"RTN","XUMVINPU",81,0)
 ;    @XURET@(#)="200;41.99^NPI^^^"
"RTN","XUMVINPU",82,0)
 ;    @XURET@(#)="200;9^SSN^^^"
"RTN","XUMVINPU",83,0)
 ;    @XURET@(#)="200;202^LAST SIGN-ON DATE/TIME^^^"
"RTN","XUMVINPU",84,0)
 ;    @XURET@(#)="200;202.02^XUS Logon Attempt Count^^^"
"RTN","XUMVINPU",85,0)
 ;    @XURET@(#)="200;202.03^XUS Active User^^^"
"RTN","XUMVINPU",86,0)
 ;    @XURET@(#)="200;202.04^Entry Last Edit Date^^^"
"RTN","XUMVINPU",87,0)
 ;    @XURET@(#)="200;202.05^LOCKOUT USER UNTIL^^^"
"RTN","XUMVINPU",88,0)
 ;    @XURET@(#)="200;16;.01^DIVISION^<1-n>^^"
"RTN","XUMVINPU",89,0)
 ;    @XURET@(#)="200;10.1^NAME COMPONENTS^^^"
"RTN","XUMVINPU",90,0)
 ;    @XURET@(#)="20;1^FAMILY (LAST) NAME^^^"
"RTN","XUMVINPU",91,0)
 ;    @XURET@(#)="20;2^GIVEN (FIRST) NAME^^^"
"RTN","XUMVINPU",92,0)
 ;    @XURET@(#)="20;3^MIDDLE NAME^^^"
"RTN","XUMVINPU",93,0)
 ;    @XURET@(#)="20;4^PREFIX^^^"
"RTN","XUMVINPU",94,0)
 ;    @XURET@(#)="20;5^SUFFIX^^^"
"RTN","XUMVINPU",95,0)
 ;    @XURET@(#)="20;6^DEGREE^^^"
"RTN","XUMVINPU",96,0)
 ;    @XURET@(#)="200;29^SERVICE/SECTION^^^"
"RTN","XUMVINPU",97,0)
 ;    @XURET@(#)="200;201^PRIMARY MENU OPTION^^^"
"RTN","XUMVINPU",98,0)
 ;    @XURET@(#)="200;203;.01^SECONDARY MENU OPTIONS^<1-n>^^"
"RTN","XUMVINPU",99,0)
 ;    @XURET@(#)="200;51;.01^KEYS^<1-n>^^"
"RTN","XUMVINPU",100,0)
 ;    @XURET@(#)="200;205.1^SECID^^^"
"RTN","XUMVINPU",101,0)
 ;    @XURET@(#)="200;205.2^SUBJECT ORGANIZATION^^^"
"RTN","XUMVINPU",102,0)
 ;    @XURET@(#)="200;205.3^SUBJECT ORGANIZATION ID^^^"
"RTN","XUMVINPU",103,0)
 ;    @XURET@(#)="200;205.4^UNIQUE USER ID^^^"
"RTN","XUMVINPU",104,0)
 ;    @XURET@(#)="200;205.5^ADUPN^^^"
"RTN","XUMVINPU",105,0)
 ;    @XURET@(#)="200;501.1^NETWORK USERNAME^^^"
"RTN","XUMVINPU",106,0)
 ;    @XURET@(#)="200;8932.1;.01^PERSON CLASS^<1-n>^^"
"RTN","XUMVINPU",107,0)
 ;    @XURET@(#)="200;8932.1;2^EFFECTIVE DATE^<#>^^"
"RTN","XUMVINPU",108,0)
 ;    @XURET@(#)="200;8932.1;3^EXPIRATION DATE^<#>^^"
"RTN","XUMVINPU",109,0)
 ;    @XURET@(#)="200;53.1^AUTHORIZED TO WRITE MED ORDERS^^^"
"RTN","XUMVINPU",110,0)
 ;    @XURET@(#)="200;53.11^DETOX/MAINTENANCE ID NUMBER^^^" 
"RTN","XUMVINPU",111,0)
 ;    @XURET@(#)="200;53.2^DEA#^^^"
"RTN","XUMVINPU",112,0)
 ;    @XURET@(#)="200;747.44^DEA EXPIRATION DATE^^^"
"RTN","XUMVINPU",113,0)
 ;    @XURET@(#)="200;53.4^INACTIVE DATE^^^"
"RTN","XUMVINPU",114,0)
 ;    @XURET@(#)="200;53.5^PROVIDER CLASS^^^"
"RTN","XUMVINPU",115,0)
 ;    @XURET@(#)="200;53.6^PROVIDER TYPE^^^"
"RTN","XUMVINPU",116,0)
 ;    @XURET@(#)="200;53.9^REMARKS^^^"
"RTN","XUMVINPU",117,0)
 ;    @XURET@(#)="200;53.91^NON-VA PRESCRIBER^^^"
"RTN","XUMVINPU",118,0)
 ;    @XURET@(#)="200;53.92^TAX ID^^^"
"RTN","XUMVINPU",119,0)
 ;    @XURET@(#)="200;55.1^SCHEDULE II NARCOTIC^^^"
"RTN","XUMVINPU",120,0)
 ;    @XURET@(#)="200;55.2^SCHEDULE II NON-NARCOTIC^^^"
"RTN","XUMVINPU",121,0)
 ;    @XURET@(#)="200;55.3^SCHEDULE III NARCOTIC^^^"
"RTN","XUMVINPU",122,0)
 ;    @XURET@(#)="200;55.4^SCHEDULE III NON-NARCOTIC^^^"
"RTN","XUMVINPU",123,0)
 ;    @XURET@(#)="200;55.5^SCHEDULE IV^^^"
"RTN","XUMVINPU",124,0)
 ;    @XURET@(#)="200;55.6^SCHEDULE V^^^"
"RTN","XUMVINPU",125,0)
 ;
"RTN","XUMVINPU",126,0)
 ;    **The following are ONLY returned if patch
"RTN","XUMVINPU",127,0)
 ;    **XU*8.0*688 has been installed.
"RTN","XUMVINPU",128,0)
 ;    **Subscript Counter (#) will denote the DEA Data that belongs to the DEA NUMBER subscript
"RTN","XUMVINPU",129,0)
 ;    ** New DEA Data will always follow the DEA NUMBER entry!
"RTN","XUMVINPU",130,0)
 ;    @XURET@(#)="200;9001^DETOX CALCULATED^^^"
"RTN","XUMVINPU",131,0)
 ;    @XURET@(#)="200;53.21;.01;8991.9^DEA NUMBER^<1-n>^^"
"RTN","XUMVINPU",132,0)
 ;    @XURET@(#)="200;53.21;.02^INDIVIDUAL DEA SUFFIX^<#>^^"
"RTN","XUMVINPU",133,0)
 ;    **Only returned if there is a DEA NUMBER (200.5321) value!!**
"RTN","XUMVINPU",134,0)
 ;    @XURET@(#)="8991.9;.02^BUSINESS ACTIVITY CODE^<#>^^"
"RTN","XUMVINPU",135,0)
 ;    @XURET@(#)="8991.9;.03^DETOX NUMBER^<#>^^"
"RTN","XUMVINPU",136,0)
 ;    @XURET@(#)="8991.9;.04^EXPIRATION DATE^<#>^^"
"RTN","XUMVINPU",137,0)
 ;    @XURET@(#)="8991.9;.06^USE FOR INPATIENT ORDERS?^<#>^^"
"RTN","XUMVINPU",138,0)
 ;    @XURET@(#)="8991.9;.07^TYPE^<#>^^"
"RTN","XUMVINPU",139,0)
 ;    @XURET@(#)="8991.9;1.1^NAME (PROVIDER OR INSTITUTION)^<#>^^"
"RTN","XUMVINPU",140,0)
 ;    @XURET@(#)="8991.9;1.2^STREET ADDRESS 1^<#>^^"
"RTN","XUMVINPU",141,0)
 ;    @XURET@(#)="8991.9;1.3^STREET ADDRESS 2^<#>^^"
"RTN","XUMVINPU",142,0)
 ;    @XURET@(#)="8991.9;1.4^STREET ADDRESS 3^<#>^^"
"RTN","XUMVINPU",143,0)
 ;    @XURET@(#)="8991.9;1.5^CITY^<#>^^"
"RTN","XUMVINPU",144,0)
 ;    @XURET@(#)="8991.9;1.6^STATE^<#>^^"
"RTN","XUMVINPU",145,0)
 ;    @XURET@(#)="8991.9;1.7^ZIP CODE^<#>^^"
"RTN","XUMVINPU",146,0)
 ;    @XURET@(#)="8991.9;2.1^SCHEDULE II NARCOTIC?^<#>^^"
"RTN","XUMVINPU",147,0)
 ;    @XURET@(#)="8991.9;2.2^SCHEDULE II NON-NARCOTIC?^<#>^^"
"RTN","XUMVINPU",148,0)
 ;    @XURET@(#)="8991.9;2.3^SCHEDULE III NARCOTIC?^<#>^^"
"RTN","XUMVINPU",149,0)
 ;    @XURET@(#)="8991.9;2.4^SCHEDULE III NON-NARCOTIC?^<#>^^"
"RTN","XUMVINPU",150,0)
 ;    @XURET@(#)="8991.9;2.5^SCHEDULE IV?^<#>^^"
"RTN","XUMVINPU",151,0)
 ;    @XURET@(#)="8991.9;2.6^SCHEDULE V?^<#>^^"
"RTN","XUMVINPU",152,0)
 ;    @XURET@(#)="8991.9;10.1^LAST UPDATED BY^<#>^^"
"RTN","XUMVINPU",153,0)
 ;    @XURET@(#)="8991.9;10.2^LAST UPDATED DATE/TIME^<#>^^"
"RTN","XUMVINPU",154,0)
 ;    @XURET@(#)="8991.9;10.3^LAST DOJ UPDATE DATE/TIME^<#>^^"
"RTN","XUMVINPU",155,0)
 ;
"RTN","XUMVINPU",156,0)
 ;  Fail:
"RTN","XUMVINPU",157,0)
 ;   XURET = ^TMP("XUMVINPU",$J)
"RTN","XUMVINPU",158,0)
 ;   @XURET@(1)="-1^Invalid User"
"RTN","XUMVINPU",159,0)
 ;            or
"RTN","XUMVINPU",160,0)
 ;   @XURET@(1)="-1^No Data for User: ######"
"RTN","XUMVINPU",161,0)
 ;
"RTN","XUMVINPU",162,0)
 ; Example calling rpc from VistA:
"RTN","XUMVINPU",163,0)
 ;  >D GET^XUMVINPU(.XURET,12596)
"RTN","XUMVINPU",164,0)
 ;  >ZW XURET
"RTN","XUMVINPU",165,0)
 ;  >XURET="^TMP(""XUMVINPU"",17226)"
"RTN","XUMVINPU",166,0)
 ;
"RTN","XUMVINPU",167,0)
 ;  D ^%G would return:
"RTN","XUMVINPU",168,0)
 ;    ^TMP("XUMVINPU",17226,1)="200;IEN^DUZ^12596^12596"
"RTN","XUMVINPU",169,0)
 ;                          2)="200;.01^NAME^LAST,FIRST^LAST,FIRST"
"RTN","XUMVINPU",170,0)
 ;                          3)="200;7^DISUSER^^"
"RTN","XUMVINPU",171,0)
 ;                          #)=continuation of returned data
"RTN","XUMVINPU",172,0)
 ;
"RTN","XUMVINPU",173,0)
 ; Example calling rpc from MVI:
"RTN","XUMVINPU",174,0)
 ;  D DIRECT^XWB2HL7(.XURET,SITE,"XUS MVI NEW PERSON GET","",$G(XUDUZ),$G(SECID),$G(NPI),$G(SSN))
"RTN","XUMVINPU",175,0)
 ;
"RTN","XUMVINPU",176,0)
 ;
"RTN","XUMVINPU",177,0)
 K XURET
"RTN","XUMVINPU",178,0)
 N I,CNT,FILE,FLD,FLDS,FLDCNT,FLDNM,XUARR,XUGBL
"RTN","XUMVINPU",179,0)
 S XUGBL="^TMP("_"""XUMVINPU"""_","_$J_")"
"RTN","XUMVINPU",180,0)
 K @XUGBL
"RTN","XUMVINPU",181,0)
 ;
"RTN","XUMVINPU",182,0)
 S CNT=1,FILE=200
"RTN","XUMVINPU",183,0)
 I $G(SECID)'="" S XUDUZ=$O(^VA(FILE,"ASECID",SECID,0))
"RTN","XUMVINPU",184,0)
 I $G(NPI)'="" S XUDUZ=$O(^VA(FILE,"ANPI",NPI,0))
"RTN","XUMVINPU",185,0)
 I $G(SSN)'="" S XUDUZ=$O(^VA(FILE,"SSN",SSN,0))
"RTN","XUMVINPU",186,0)
 I $G(XUDUZ)="" S @XUGBL@(CNT)="-1^Invalid User" S XURET=$NA(@XUGBL) Q
"RTN","XUMVINPU",187,0)
 I '$D(^VA(FILE,XUDUZ)) S @XUGBL@(CNT)="-1^No Data for User: "_XUDUZ S XURET=$NA(@XUGBL) Q
"RTN","XUMVINPU",188,0)
 ;
"RTN","XUMVINPU",189,0)
 S @XUGBL@(CNT)=FILE_";IEN^DUZ^^"_XUDUZ_"^"_XUDUZ S CNT=CNT+1
"RTN","XUMVINPU",190,0)
 ;
"RTN","XUMVINPU",191,0)
 S FLDS=".01;4;8;7;9.2;9.4;15;11.2;.111;.112;.113;.114;.115;.116;.132;.136;.151;30;31;41.99;9;202;202.02;202.03;"
"RTN","XUMVINPU",192,0)
 S FLDS=FLDS_"202.04;202.05;16*;10.1;29;201;203*;51*;205.1;205.2;205.3;205.4;205.5;501.1;8932.1*;53.1;53.11;53.2;"
"RTN","XUMVINPU",193,0)
 S FLDS=FLDS_"747.44;53.4;53.5;53.6;53.9;53.91;53.92;55.1;55.2;55.3;55.4;55.5;55.6"
"RTN","XUMVINPU",194,0)
 S:($$PATCH^XPDUTL("XU*8.0*688")) FLDS=FLDS_";9001;53.21*"  ;NEW DETOX CALCULATED and DEA #'S multiple | DBIA #10141 (Supported)
"RTN","XUMVINPU",195,0)
 S FLDCNT=$L(FLDS,";")
"RTN","XUMVINPU",196,0)
 ;
"RTN","XUMVINPU",197,0)
 D GETS^DIQ(FILE,+XUDUZ_",",FLDS,"EI","XUARR") ;retrieve data
"RTN","XUMVINPU",198,0)
 ;
"RTN","XUMVINPU",199,0)
 F I=1:1:FLDCNT D
"RTN","XUMVINPU",200,0)
 .S FLD=$P($P(FLDS,";",I),"*")
"RTN","XUMVINPU",201,0)
 .D FIELD^DID(FILE,FLD,"","LABEL","FLDNM")
"RTN","XUMVINPU",202,0)
 .;
"RTN","XUMVINPU",203,0)
 .I FLD=16 D  Q  ;division multiple
"RTN","XUMVINPU",204,0)
 ..N IENS,MCNT,SUBFILE,SUBFLD
"RTN","XUMVINPU",205,0)
 ..S MCNT=1,SUBFILE=200.02,SUBFLD=.01
"RTN","XUMVINPU",206,0)
 ..D FIELD^DID(SUBFILE,SUBFLD,"","LABEL","FLDNM")
"RTN","XUMVINPU",207,0)
 ..I '$D(XUARR(SUBFILE)) S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_"^"_(FLDNM("LABEL"))_"^"_MCNT_"^^" S CNT=CNT+1 Q
"RTN","XUMVINPU",208,0)
 ..S IENS="" F  S IENS=$O(XUARR(SUBFILE,IENS)) Q:IENS=""  S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_"^"_(FLDNM("LABEL"))_"^"_MCNT_"^"_$G(XUARR(SUBFILE,IENS,SUBFLD,"I"))_"^"_$G(XUARR(SUBFILE,IENS,SUBFLD,"E")) S MCNT=MCNT+1,CNT=CNT+1
"RTN","XUMVINPU",209,0)
 .;
"RTN","XUMVINPU",210,0)
 .I FLD=10.1 D  Q  ;name components
"RTN","XUMVINPU",211,0)
 ..S @XUGBL@(CNT)=FILE_";"_FLD_"^"_(FLDNM("LABEL"))_"^^"_$G(XUARR(FILE,XUDUZ_",",FLD,"I"))_"^"_$G(XUARR(FILE,XUDUZ_",",FLD,"E")) S CNT=CNT+1
"RTN","XUMVINPU",212,0)
 ..N NCFILE,NCFLD
"RTN","XUMVINPU",213,0)
 ..S NCFILE=20
"RTN","XUMVINPU",214,0)
 ..D GETS^DIQ(NCFILE,+$G(XUARR(FILE,XUDUZ_",",FLD,"I"))_",","1;2;3;4;5;6","EI","XUARR") ;retrieve name component data
"RTN","XUMVINPU",215,0)
 ..F NCFLD=1,2,3,4,5,6 D
"RTN","XUMVINPU",216,0)
 ...D FIELD^DID(NCFILE,NCFLD,"","LABEL","FLDNM")
"RTN","XUMVINPU",217,0)
 ...S @XUGBL@(CNT)=NCFILE_";"_NCFLD_"^"_(FLDNM("LABEL"))_"^^"_XUARR(NCFILE,+$G(XUARR(FILE,XUDUZ_",",FLD,"I"))_",",NCFLD,"I")_"^"_XUARR(NCFILE,+$G(XUARR(FILE,XUDUZ_",",FLD,"I"))_",",NCFLD,"E") S CNT=CNT+1
"RTN","XUMVINPU",218,0)
 .;
"RTN","XUMVINPU",219,0)
 .I FLD=51 D  Q  ;KEYS multiple
"RTN","XUMVINPU",220,0)
 ..N IENS,MCNT,SUBFILE,SUBFLD
"RTN","XUMVINPU",221,0)
 ..S MCNT=1,SUBFILE=200.051,SUBFLD=.01
"RTN","XUMVINPU",222,0)
 ..D FIELD^DID(SUBFILE,SUBFLD,"","LABEL","FLDNM")
"RTN","XUMVINPU",223,0)
 ..I '$D(XUARR(SUBFILE)) S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_"^"_(FLDNM("LABEL"))_"^"_MCNT_"^^",CNT=CNT+1 Q
"RTN","XUMVINPU",224,0)
 ..S IENS="" F  S IENS=$O(XUARR(SUBFILE,IENS)) Q:IENS=""  S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_"^"_(FLDNM("LABEL"))_"^"_MCNT_"^"_$G(XUARR(SUBFILE,IENS,SUBFLD,"I"))_"^"_$G(XUARR(SUBFILE,IENS,SUBFLD,"E")),MCNT=MCNT+1,CNT=CNT+1
"RTN","XUMVINPU",225,0)
 .;
"RTN","XUMVINPU",226,0)
 .I FLD=53.21 D  Q  ;NEW DEA #'s multiple
"RTN","XUMVINPU",227,0)
 ..N I,IEN,IENS,MCNT,SUBFILE,SUBFLD,DEAARR,DEAFILE,DEAFLD,DEAFLDS,DEAFLDCNT
"RTN","XUMVINPU",228,0)
 ..S MCNT=1,SUBFILE=200.5321,SUBFLD=.01,DEAFILE=8991.9
"RTN","XUMVINPU",229,0)
 ..D FIELD^DID(SUBFILE,SUBFLD,"","LABEL","FLDNM")
"RTN","XUMVINPU",230,0)
 ..I '$D(XUARR(SUBFILE)) D  Q
"RTN","XUMVINPU",231,0)
 ...S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_";8991.9^"_(FLDNM("LABEL"))_"^"_MCNT_"^^",CNT=CNT+1
"RTN","XUMVINPU",232,0)
 ...D FIELD^DID(SUBFILE,.02,"","LABEL","FLDNM")
"RTN","XUMVINPU",233,0)
 ...S @XUGBL@(CNT)=FILE_";"_FLD_";"_.02_"^"_(FLDNM("LABEL"))_"^"_MCNT_"^^",CNT=CNT+1
"RTN","XUMVINPU",234,0)
 ..S DEAFLDS=".02;.03;.04;.06;.07;1.1;1.2;1.3;1.4;1.5;1.6;1.7;2.1;2.2;2.3;2.4;2.5;2.6;10.1;10.2;10.3"
"RTN","XUMVINPU",235,0)
 ..S DEAFLDCNT=$L(DEAFLDS,";")
"RTN","XUMVINPU",236,0)
 ..S IENS="" F  S IENS=$O(XUARR(SUBFILE,IENS)) Q:IENS=""  D
"RTN","XUMVINPU",237,0)
 ...S IEN=$G(XUARR(SUBFILE,IENS,.03,"I"))
"RTN","XUMVINPU",238,0)
 ...D FIELD^DID(SUBFILE,SUBFLD,"","LABEL","FLDNM")
"RTN","XUMVINPU",239,0)
 ...S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_";8991.9^"_(FLDNM("LABEL"))_"^"_MCNT_"^"_IEN_"^"_$G(XUARR(SUBFILE,IENS,.03,"E")),CNT=CNT+1
"RTN","XUMVINPU",240,0)
 ...D FIELD^DID(SUBFILE,.02,"","LABEL","FLDNM")
"RTN","XUMVINPU",241,0)
 ...S @XUGBL@(CNT)=FILE_";"_FLD_";.02^"_(FLDNM("LABEL"))_"^"_MCNT_"^"_$G(XUARR(SUBFILE,IENS,.02,"I"))_"^"_$G(XUARR(SUBFILE,IENS,.02,"E")),CNT=CNT+1
"RTN","XUMVINPU",242,0)
 ...D GETS^DIQ(DEAFILE,IEN_",",DEAFLDS,"EI","DEAARR")  ;retrieve DEA data
"RTN","XUMVINPU",243,0)
 ...F I=1:1:DEAFLDCNT D
"RTN","XUMVINPU",244,0)
 ....S DEAFLD=$P(DEAFLDS,";",I)
"RTN","XUMVINPU",245,0)
 ....D FIELD^DID(DEAFILE,DEAFLD,"","LABEL","FLDNM")
"RTN","XUMVINPU",246,0)
 ....S @XUGBL@(CNT)=DEAFILE_";"_DEAFLD_"^"_(FLDNM("LABEL"))_"^"_MCNT_"^"_$G(DEAARR(DEAFILE,IEN_",",DEAFLD,"I"))_"^"_$G(DEAARR(DEAFILE,IEN_",",DEAFLD,"E")),CNT=CNT+1
"RTN","XUMVINPU",247,0)
 ...S MCNT=MCNT+1
"RTN","XUMVINPU",248,0)
 .;
"RTN","XUMVINPU",249,0)
 .I FLD=203 D  Q  ;secondary menu options multiple
"RTN","XUMVINPU",250,0)
 ..N IENS,MCNT,SUBFILE,SUBFLD
"RTN","XUMVINPU",251,0)
 ..S MCNT=1,SUBFILE=200.03,SUBFLD=.01
"RTN","XUMVINPU",252,0)
 ..D FIELD^DID(SUBFILE,SUBFLD,"","LABEL","FLDNM")
"RTN","XUMVINPU",253,0)
 ..I '$D(XUARR(SUBFILE)) S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_"^"_(FLDNM("LABEL"))_"^"_MCNT_"^^" S CNT=CNT+1 Q
"RTN","XUMVINPU",254,0)
 ..S IENS="" F  S IENS=$O(XUARR(SUBFILE,IENS)) Q:IENS=""  S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_"^"_(FLDNM("LABEL"))_"^"_MCNT_"^"_$G(XUARR(SUBFILE,IENS,SUBFLD,"I"))_"^"_$G(XUARR(SUBFILE,IENS,SUBFLD,"E")) S MCNT=MCNT+1,CNT=CNT+1
"RTN","XUMVINPU",255,0)
 .;
"RTN","XUMVINPU",256,0)
 .I FLD=8932.1 D  Q  ;PERSON CLASS multiple
"RTN","XUMVINPU",257,0)
 ..N IENS,MCNT,SUBFILE,SUBFLD
"RTN","XUMVINPU",258,0)
 ..S MCNT=1,SUBFILE=200.05
"RTN","XUMVINPU",259,0)
 ..I '$D(XUARR(SUBFILE)) D  Q  ;No Person Class(es)
"RTN","XUMVINPU",260,0)
 ...F SUBFLD=.01,2,3  D
"RTN","XUMVINPU",261,0)
 ....D FIELD^DID(SUBFILE,SUBFLD,"","LABEL","FLDNM")
"RTN","XUMVINPU",262,0)
 ....S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_"^"_(FLDNM("LABEL"))_"^"_MCNT_"^^",CNT=CNT+1
"RTN","XUMVINPU",263,0)
 ..S IENS="" F  S IENS=$O(XUARR(SUBFILE,IENS)) Q:IENS=""  D
"RTN","XUMVINPU",264,0)
 ...F SUBFLD=.01,2,3  D
"RTN","XUMVINPU",265,0)
 ....D FIELD^DID(SUBFILE,SUBFLD,"","LABEL","FLDNM")
"RTN","XUMVINPU",266,0)
 ....S @XUGBL@(CNT)=FILE_";"_FLD_";"_SUBFLD_"^"_(FLDNM("LABEL"))_"^"_MCNT_"^"_$G(XUARR(SUBFILE,IENS,SUBFLD,"I"))_"^"_$G(XUARR(SUBFILE,IENS,SUBFLD,"E")),CNT=CNT+1
"RTN","XUMVINPU",267,0)
 ...S MCNT=MCNT+1
"RTN","XUMVINPU",268,0)
 .;
"RTN","XUMVINPU",269,0)
 .S @XUGBL@(CNT)=FILE_";"_FLD_"^"_(FLDNM("LABEL"))_"^^"_XUARR(FILE,XUDUZ_",",FLD,"I")_"^"_XUARR(FILE,XUDUZ_",",FLD,"E") S CNT=CNT+1 ;all other fields
"RTN","XUMVINPU",270,0)
 ;
"RTN","XUMVINPU",271,0)
 S XURET=$NA(@XUGBL)
"RTN","XUMVINPU",272,0)
 Q
"RTN","XUMVINPU",273,0)
 ;
"RTN","XUMVINPU",274,0)
 ;
"RTN","XUMVINPU",275,0)
UPDATE(XURET,XUARR) ;rpc to update new person file data
"RTN","XUMVINPU",276,0)
 ;
"RTN","XUMVINPU",277,0)
 ; called from rpc: XUS MVI NEW PERSON UPDATE
"RTN","XUMVINPU",278,0)
 ;
"RTN","XUMVINPU",279,0)
 ; Input:
"RTN","XUMVINPU",280,0)
 ;   XUARR(#) = FILE #;FIELD #<;SUBFIELD #><;FILE POINTER>^FIELD NAME^<COUNTER #>^INTERNAL VALUE^EXTERNAL VALUE
"RTN","XUMVINPU",281,0)
 ;      <> Denotes optional values. If Counter populated, denotes multiple value <1-n>.
"RTN","XUMVINPU",282,0)
 ;   XUARR(0)="200;IEN^DUZ^^^"
"RTN","XUMVINPU",283,0)
 ;   XUARR(#)="200;.01^NAME^^^"
"RTN","XUMVINPU",284,0)
 ;   XUARR(#)="200;205.1^SECID^^"
"RTN","XUMVINPU",285,0)
 ;   XUARR(#)="200;205.2^SUBJECT ORGANIZATION^^^"
"RTN","XUMVINPU",286,0)
 ;   XUARR(#)="200;205.3^SUBJECT ORGANIZATION ID^^^"
"RTN","XUMVINPU",287,0)
 ;   XUARR(#)="200;205.4^UNIQUE USER ID^^^"
"RTN","XUMVINPU",288,0)
 ;   XUARR(#)="200;205.5^ADUPN^^^"
"RTN","XUMVINPU",289,0)
 ;   **711, Story 977821 (jfw) - Allow additional fields to be updated.
"RTN","XUMVINPU",290,0)
 ;   XUARR(#)="200;.151^EMAIL ADDRESS^^^"
"RTN","XUMVINPU",291,0)
 ;   XUARR(#)="200;501.1^NETWORK USERNAME^^^"
"RTN","XUMVINPU",292,0)
 ;   **710, Story 1100018 (jfw) - Add NPI field to be updated.
"RTN","XUMVINPU",293,0)
 ;   XUARR(#)="200;41.99^NPI^^^"
"RTN","XUMVINPU",294,0)
 ;
"RTN","XUMVINPU",295,0)
 ;  Success:
"RTN","XUMVINPU",296,0)
 ;   XURET(0) = 1
"RTN","XUMVINPU",297,0)
 ;
"RTN","XUMVINPU",298,0)
 ;  Fail:
"RTN","XUMVINPU",299,0)
 ;   XURET(0) = "-1^No data passed"
"RTN","XUMVINPU",300,0)
 ;   XURET(0) = "-1^Invalid User DUZ (null)"
"RTN","XUMVINPU",301,0)
 ;   XURET(0) = "-1^User '"_XUDUZ_"' does not exist"
"RTN","XUMVINPU",302,0)
 ;   XURET(0) = "-1^Invalid Name Component IEN"
"RTN","XUMVINPU",303,0)
 ;   XURET(0) = "-1^No Data for Name Component IEN: "_NCIEN
"RTN","XUMVINPU",304,0)
 ;   XURET(0) = "-1^No data to file for record '"_XUDUZ_"' in file 200"
"RTN","XUMVINPU",305,0)
 ;   XURET(0) = "-1^Unable to lock record '"_XUDUZ_"' in file 200" 
"RTN","XUMVINPU",306,0)
 ;   XURET(0) = "-1^"_$G(XUERR("DIERR",1,"TEXT",1))
"RTN","XUMVINPU",307,0)
 ;
"RTN","XUMVINPU",308,0)
 ; Example calling rpc from VistA:
"RTN","XUMVINPU",309,0)
 ;  >D UPDATE^XUMVINPU(.XURET,.XUARR)
"RTN","XUMVINPU",310,0)
 ;  >ZW XURET
"RTN","XUMVINPU",311,0)
 ;  >XURET(0)=1
"RTN","XUMVINPU",312,0)
 ;
"RTN","XUMVINPU",313,0)
 ;
"RTN","XUMVINPU",314,0)
 ; Example calling rpc from MVI:
"RTN","XUMVINPU",315,0)
 ;  D DIRECT^XWB2HL7(.XURET,SITE,"XUS MVI NEW PERSON UPDATE","",.XUARR)
"RTN","XUMVINPU",316,0)
 ;
"RTN","XUMVINPU",317,0)
 ;
"RTN","XUMVINPU",318,0)
 K XURET
"RTN","XUMVINPU",319,0)
 N ARR,FDA,FILENUM,FLDNAM,FLDNUM,IDATA,NCIEN,XUDUZ,XUERR
"RTN","XUMVINPU",320,0)
 ;
"RTN","XUMVINPU",321,0)
 I '$D(XUARR) S XURET(0)="-1^No data passed" Q
"RTN","XUMVINPU",322,0)
 ;
"RTN","XUMVINPU",323,0)
 S ARR="XUARR"
"RTN","XUMVINPU",324,0)
 F  S ARR=$Q(@ARR) Q:ARR=""  S FILENUM=+$P($P(@ARR,"^",1),";",1),FLDNUM=+$P($P(@ARR,"^",1),";",2),FLDNAM=$P(@ARR,"^",2),IDATA=$P(@ARR,"^",4) D  I $G(XURET) Q
"RTN","XUMVINPU",325,0)
 . I FLDNAM="DUZ" D  Q  ;first parameter passed
"RTN","XUMVINPU",326,0)
 . . S XUDUZ=IDATA ;duz ien
"RTN","XUMVINPU",327,0)
 . . I $G(XUDUZ)="" S XURET(0)="-1^Invalid User DUZ (null)" Q
"RTN","XUMVINPU",328,0)
 . . I '$D(^VA(FILENUM,XUDUZ,0)) S XURET(0)="-1^User '"_XUDUZ_"' does not exist"  Q
"RTN","XUMVINPU",329,0)
 . I FLDNAM="NAME COMPONENTS" D  Q
"RTN","XUMVINPU",330,0)
 . . S NCIEN=IDATA ;name component ien
"RTN","XUMVINPU",331,0)
 . . I $G(NCIEN)="" S XURET(0)="-1^Invalid Name Component IEN"
"RTN","XUMVINPU",332,0)
 . . I '$D(^VA(20,NCIEN,0)) S XURET(0)="-1^No Data for Name Componet IEN: "_NCIEN
"RTN","XUMVINPU",333,0)
 . S FDA(FILENUM,$S(FILENUM=200:+$G(XUDUZ),1:+$G(NCIEN))_",",FLDNUM)=IDATA
"RTN","XUMVINPU",334,0)
 ;
"RTN","XUMVINPU",335,0)
 I '$D(FDA) S XURET(0)="-1^No data to file for record '"_XUDUZ_"' in file 200" Q
"RTN","XUMVINPU",336,0)
 ;
"RTN","XUMVINPU",337,0)
 L +^VA(200,XUDUZ):10 I '$T S XURET(0)="-1^Unable to lock record '"_XUDUZ_"' in file 200" Q
"RTN","XUMVINPU",338,0)
 ;**710, Story 1100018 (jfw) - Process fields as External Values now so Input Transform checks fire
"RTN","XUMVINPU",339,0)
 D FILE^DIE("E","FDA","XUERR") I $D(XUERR("DIERR")) S XURET(0)="-1^"_$G(XUERR("DIERR",1,"TEXT",1)) Q
"RTN","XUMVINPU",340,0)
 L -^VA(200,XUDUZ)
"RTN","XUMVINPU",341,0)
 ;
"RTN","XUMVINPU",342,0)
 S XURET(0)=1 ;successfully filed
"RTN","XUMVINPU",343,0)
 Q
"RTN","XUMVINPU",344,0)
 ;
"VER")
8.0^22.2
"BLD",3411,6)
^553
**END**
**END**

