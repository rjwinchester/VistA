Released XU*8*679 SEQ #545
Extracted from mail message
**KIDS**:XU*8.0*679^

**INSTALL NAME**
XU*8.0*679
"BLD",10049,0)
XU*8.0*679^KERNEL^0^3180606^y
"BLD",10049,4,0)
^9.64PA^20^3
"BLD",10049,4,20,0)
20
"BLD",10049,4,20,2,0)
^9.641^20^1
"BLD",10049,4,20,2,20,0)
NAME COMPONENTS  (File-top level)
"BLD",10049,4,20,2,20,1,0)
^9.6411^6^1
"BLD",10049,4,20,2,20,1,6,0)
DEGREE
"BLD",10049,4,20,222)
y^n^p^^^^n^^n
"BLD",10049,4,20,224)

"BLD",10049,4,20.11,0)
20.11
"BLD",10049,4,20.11,222)
y^n^f^^y^^y^o^n
"BLD",10049,4,200,0)
200
"BLD",10049,4,200,2,0)
^9.641^200^1
"BLD",10049,4,200,2,200,0)
NEW PERSON  (File-top level)
"BLD",10049,4,200,2,200,1,0)
^9.6411^10.6^1
"BLD",10049,4,200,2,200,1,10.6,0)
DEGREE
"BLD",10049,4,200,222)
y^n^p^^^^n^^n
"BLD",10049,4,200,224)

"BLD",10049,4,"APDD",20,20)

"BLD",10049,4,"APDD",20,20,6)

"BLD",10049,4,"APDD",200,200)

"BLD",10049,4,"APDD",200,200,10.6)

"BLD",10049,4,"B",20,20)

"BLD",10049,4,"B",20.11,20.11)

"BLD",10049,4,"B",200,200)

"BLD",10049,6)
^367
"BLD",10049,6.3)
27
"BLD",10049,"ABPKG")
n
"BLD",10049,"INI")
FIX^XU8P679
"BLD",10049,"INID")
^^y
"BLD",10049,"KRN",0)
^9.67PA^779.2^20
"BLD",10049,"KRN",.4,0)
.4
"BLD",10049,"KRN",.4,"NM",0)
^9.68A^^
"BLD",10049,"KRN",.401,0)
.401
"BLD",10049,"KRN",.402,0)
.402
"BLD",10049,"KRN",.403,0)
.403
"BLD",10049,"KRN",.5,0)
.5
"BLD",10049,"KRN",.84,0)
.84
"BLD",10049,"KRN",3.6,0)
3.6
"BLD",10049,"KRN",3.8,0)
3.8
"BLD",10049,"KRN",9.2,0)
9.2
"BLD",10049,"KRN",9.8,0)
9.8
"BLD",10049,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",10049,"KRN",9.8,"NM",1,0)
XUSESIG^^0^B13254632
"BLD",10049,"KRN",9.8,"NM",2,0)
XUSESIG2^^0^B3406621
"BLD",10049,"KRN",9.8,"NM",3,0)
XUSESIG3^^0^B5931967
"BLD",10049,"KRN",9.8,"NM","B","XUSESIG",1)

"BLD",10049,"KRN",9.8,"NM","B","XUSESIG2",2)

"BLD",10049,"KRN",9.8,"NM","B","XUSESIG3",3)

"BLD",10049,"KRN",19,0)
19
"BLD",10049,"KRN",19,"NM",0)
^9.68A^4^4
"BLD",10049,"KRN",19,"NM",1,0)
XUSESIG BLOCK^^0
"BLD",10049,"KRN",19,"NM",2,0)
XUSESIG DEG^^0
"BLD",10049,"KRN",19,"NM",3,0)
XUSER^^2
"BLD",10049,"KRN",19,"NM",4,0)
XUSESIG^^0
"BLD",10049,"KRN",19,"NM","B","XUSER",3)

"BLD",10049,"KRN",19,"NM","B","XUSESIG",4)

"BLD",10049,"KRN",19,"NM","B","XUSESIG BLOCK",1)

"BLD",10049,"KRN",19,"NM","B","XUSESIG DEG",2)

"BLD",10049,"KRN",19.1,0)
19.1
"BLD",10049,"KRN",19.1,"NM",0)
^9.68A^2^1
"BLD",10049,"KRN",19.1,"NM",2,0)
XUSIG^^0
"BLD",10049,"KRN",19.1,"NM","B","XUSIG",2)

"BLD",10049,"KRN",101,0)
101
"BLD",10049,"KRN",409.61,0)
409.61
"BLD",10049,"KRN",771,0)
771
"BLD",10049,"KRN",779.2,0)
779.2
"BLD",10049,"KRN",870,0)
870
"BLD",10049,"KRN",8989.51,0)
8989.51
"BLD",10049,"KRN",8989.51,"NM",0)
^9.68A^1^1
"BLD",10049,"KRN",8989.51,"NM",1,0)
XU SIG BLOCK DISABLE^^0
"BLD",10049,"KRN",8989.51,"NM","B","XU SIG BLOCK DISABLE",1)

"BLD",10049,"KRN",8989.52,0)
8989.52
"BLD",10049,"KRN",8994,0)
8994
"BLD",10049,"KRN","B",.4,.4)

"BLD",10049,"KRN","B",.401,.401)

"BLD",10049,"KRN","B",.402,.402)

"BLD",10049,"KRN","B",.403,.403)

"BLD",10049,"KRN","B",.5,.5)

"BLD",10049,"KRN","B",.84,.84)

"BLD",10049,"KRN","B",3.6,3.6)

"BLD",10049,"KRN","B",3.8,3.8)

"BLD",10049,"KRN","B",9.2,9.2)

"BLD",10049,"KRN","B",9.8,9.8)

"BLD",10049,"KRN","B",19,19)

"BLD",10049,"KRN","B",19.1,19.1)

"BLD",10049,"KRN","B",101,101)

"BLD",10049,"KRN","B",409.61,409.61)

"BLD",10049,"KRN","B",771,771)

"BLD",10049,"KRN","B",779.2,779.2)

"BLD",10049,"KRN","B",870,870)

"BLD",10049,"KRN","B",8989.51,8989.51)

"BLD",10049,"KRN","B",8989.52,8989.52)

"BLD",10049,"KRN","B",8994,8994)

"BLD",10049,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",10049,"QUES",0)
^9.62^^
"BLD",10049,"REQB",0)
^9.611^^
"DATA",20.11,5,0)
BACHELOR OF ARTS^^BA
"DATA",20.11,10,0)
ASSOCIATE DEGREE IN NURSING^^AD
"DATA",20.11,11,0)
BACHELOR'S DEGREE IN NURSING^^BSN
"DATA",20.11,12,0)
DOCTORAL DEGREE IN NURSING^^DNSC
"DATA",20.11,13,0)
NURSING DIPLOMA^^DIP
"DATA",20.11,14,0)
MASTER'S DEGREE IN NURSING^^MSN
"DATA",20.11,16,0)
CERTIFIED NURSING ASSISTANT^^CNA
"DATA",20.11,17,0)
CLINICAL HYPNOTHERAPIST^^CH
"DATA",20.11,18,0)
CERTIFIED NURSE MIDWIFE^^CNM
"DATA",20.11,19,0)
CERTIFIED NURSE SPECIALIST^^CNS
"DATA",20.11,20,0)
CLINICAL SOCIAL WORKER^^CSW
"DATA",20.11,21,0)
DOCTOR OF OSTEOPATHIC MEDICINE^^DO
"DATA",20.11,22,0)
DOCTOR OF PODIATRIC MEDICINE^^DPM
"DATA",20.11,23,0)
DOCTOR OF EDUCATION^^EDD
"DATA",20.11,24,0)
MEDICAL DOCTOR^^MD
"DATA",20.11,25,0)
NURSE PRACTITIONER^^NP
"DATA",20.11,26,0)
DOCTOR OF OPTOMETRY^^OD
"DATA",20.11,27,0)
PHYSICIAN ASSISTANT^^PA
"DATA",20.11,28,0)
DOCTOR OF PHILOSOPHY^^PHD
"DATA",20.11,29,0)
DOCTOR OF PSYCHOLOGY^^PSY
"DATA",20.11,30,0)
CERTIFICATE OF PROFICIENCY^^CP
"DATA",20.11,31,0)
ASSOCIATE OF ARTS^^AA
"DATA",20.11,32,0)
REGISTERED DIETITIAN^^RD
"DATA",20.11,33,0)
REGISTERED PHARMACIST^^RPH
"DATA",20.11,34,0)
OCCUPATIONAL THERAPIST^^OT
"DATA",20.11,35,0)
PHYSICAL THERAPIST^^PT
"DATA",20.11,36,0)
DOCTOR OF DENTAL SURGERY^^DDS
"DATA",20.11,37,0)
DOCTOR OF MED IN DENTISTRY^^DMD
"DATA",20.11,38,0)
MASTER OF ARTS^^MA
"DATA",20.11,39,0)
MASTER OF SCIENCE^^MS
"DATA",20.11,40,0)
DOCTOR OF AUDIOLOGY^^AUD
"DATA",20.11,41,0)
BACHELOR OF SCIENCE^^BS
"DATA",20.11,42,0)
ASSOCIATE OF SCIENCE^^AS
"FIA",20)
NAME COMPONENTS
"FIA",20,0)
^VA(20,
"FIA",20,0,0)
20IA
"FIA",20,0,1)
y^n^p^^^^n^^n
"FIA",20,0,10)

"FIA",20,0,11)

"FIA",20,0,"RLRO")

"FIA",20,0,"VR")
8.0^XU
"FIA",20,20)
1
"FIA",20,20,6)

"FIA",20.11)
EDUCATION
"FIA",20.11,0)
^DIC(20.11,
"FIA",20.11,0,0)
20.11I
"FIA",20.11,0,1)
y^n^f^^y^^y^o^n
"FIA",20.11,0,10)

"FIA",20.11,0,11)

"FIA",20.11,0,"RLRO")

"FIA",20.11,0,"VR")
8.0^XU
"FIA",20.11,20.11)
0
"FIA",200)
NEW PERSON
"FIA",200,0)
^VA(200,
"FIA",200,0,0)
200Is
"FIA",200,0,1)
y^n^p^^^^n^^n
"FIA",200,0,10)

"FIA",200,0,11)

"FIA",200,0,"RLRO")

"FIA",200,0,"VR")
8.0^XU
"FIA",200,200)
1
"FIA",200,200,10.6)

"INI")
FIX^XU8P679
"IX",20,20,"ADEG",0)
20^ADEG^Update the DEGREE field in the New Person file, if necessary.^MU^^R^IR^I^20^^^^^A
"IX",20,20,"ADEG",.1,0)
^^4^4^3000105^^
"IX",20,20,"ADEG",.1,1,0)
If this entry in the Name Components file corresponds to an entry in the
"IX",20,20,"ADEG",.1,2,0)
New Person file, this MUMPS cross-reference updates the DEGREE field in
"IX",20,20,"ADEG",.1,3,0)
the New Person file when the DEGREE field in the Name Components file is
"IX",20,20,"ADEG",.1,4,0)
changed, to ensure that the two fields are in synch.
"IX",20,20,"ADEG",1)
I '$G(XUNODEGT),X(1)=200,X(2)=.01,X2(4)]"" N XUNODEGT,DIERR,FDA,MSG S XUNODEGT=1,FDA(200,X(3),10.6)=X(4) D FILE^DIE("","FDA","MSG")
"IX",20,20,"ADEG",2)
I '$G(XUNODEGT),X(1)=200,X(2)=.01,X2(4)="" N XUNODEGT,DIERR,FDA,MSG S XUNODEGT=1,FDA(200,X(3),10.6)="@" D FILE^DIE("","FDA","MSG")
"IX",20,20,"ADEG",11.1,0)
^.114IA^4^4
"IX",20,20,"ADEG",11.1,1,0)
1^F^20^.01^^^F
"IX",20,20,"ADEG",11.1,2,0)
2^F^20^.02^^^F
"IX",20,20,"ADEG",11.1,3,0)
3^F^20^.03^^^F
"IX",20,20,"ADEG",11.1,4,0)
4^F^20^6^^^F
"IX",200,200,"ADEG",0)
200^ADEG^Update the DEGREE field in the Name Components file.^MU^^F^IR^I^200^^^^^A
"IX",200,200,"ADEG",.1,0)
^^2^2^3000105^^
"IX",200,200,"ADEG",.1,1,0)
This cross-reference keeps the DEGREE field in the New Person file in
"IX",200,200,"ADEG",.1,2,0)
synch with the DEGREE field in the Name Components file.
"IX",200,200,"ADEG",1)
I '$G(XUNODEGT),X2(1)]"" N XUNODEGT,XUPVAL,DIERR,XUFDA,XUMSG S XUPVAL=$P($G(^VA(200,DA,3.1)),U) I XUPVAL S XUNODEGT=1,XUFDA(20,XUPVAL_",",6)=X D FILE^DIE("","XUFDA","XUMSG")
"IX",200,200,"ADEG",2)
I '$G(XUNODEGT),X2(1)="" N XUNODEGT,XUPVAL,DIERR,XUFDA,XUMSG S XUPVAL=$P($G(^VA(200,DA,3.1)),U) I XUPVAL S XUNODEGT=1,XUFDA(20,XUPVAL_",",6)="@" D FILE^DIE("","XUFDA","XUMSG")
"IX",200,200,"ADEG",11.1,0)
^.114IA^1^1
"IX",200,200,"ADEG",11.1,1,0)
1^F^200^10.6^^1^F
"KRN",19,122,-1)
2^3
"KRN",19,122,0)
XUSER^User Management^^M^1^^98^^^^^^n^^
"KRN",19,122,10,0)
^19.01IP^25^17
"KRN",19,122,10,18,0)
2911429
"KRN",19,122,10,18,"^")
XUSESIG BLOCK
"KRN",19,122,10,25,0)
2921940
"KRN",19,122,10,25,"^")
XUSESIG DEG
"KRN",19,122,"U")
USER MANAGEMENT
"KRN",19,3900,-1)
0^4
"KRN",19,3900,0)
XUSESIG^Electronic Signature Code Edit^^R^^^^^^^^^^
"KRN",19,3900,1,0)
^19.06^2^2^3170124^^^
"KRN",19,3900,1,1,0)
This option allows the users to edit their INITALS, SIGNATURE BLOCK TITLE,
"KRN",19,3900,1,2,0)
ELECTRONIC SIGNATURE CODE, and OFFICE PHONE.
"KRN",19,3900,25)
XUSESIG
"KRN",19,3900,"U")
ELECTRONIC SIGNATURE CODE EDIT
"KRN",19,2911429,-1)
0^1
"KRN",19,2911429,0)
XUSESIG BLOCK^Electronic Signature Block Edit^^R^^^^^^^^^y
"KRN",19,2911429,1,0)
^19.06^5^5^3170213^^
"KRN",19,2911429,1,1,0)
This option gives access to the Signature Block of the Electronic
"KRN",19,2911429,1,2,0)
Signature.  This is automatically set by a cross reference of the name
"KRN",19,2911429,1,3,0)
field. If it is changed with this option, it must contain the last name
"KRN",19,2911429,1,4,0)
from the name field. Also, if the name field is changed this field will be
"KRN",19,2911429,1,5,0)
changed also and may need to be re-edited.
"KRN",19,2911429,25)
EN^XUSESIG2
"KRN",19,2911429,30)

"KRN",19,2911429,31)

"KRN",19,2911429,50)

"KRN",19,2911429,51)

"KRN",19,2911429,99.1)
64310,49293
"KRN",19,2911429,"U")
ELECTRONIC SIGNATURE BLOCK EDI
"KRN",19,2921940,-1)
0^2
"KRN",19,2921940,0)
XUSESIG DEG^EDUCATION (Degree) file edit^^E^^XUSIG^^^^^^
"KRN",19,2921940,1,0)
^^3^3^3170213^
"KRN",19,2921940,1,1,0)
This option allows a user to update entries in the EDUCATION (#20.11) file
"KRN",19,2921940,1,2,0)
used for input into the DEGREE (#10.6) field of the NEW PERSON (#200)
"KRN",19,2921940,1,3,0)
file.
"KRN",19,2921940,30)
DIC(20.11,
"KRN",19,2921940,31)
AELMQ
"KRN",19,2921940,50)
DIC(20.11,
"KRN",19,2921940,51)
.01;1
"KRN",19,2921940,99.1)
64331,58532
"KRN",19,2921940,"U")
EDUCATION (DEGREE) FILE EDIT
"KRN",19.1,906,-1)
0^2
"KRN",19.1,906,0)
XUSIG^Allow Signature edits^l^n
"KRN",19.1,906,1,0)
^^1^1^3170108^
"KRN",19.1,906,1,1,0)
This key allows the user to perform signature code edits.
"KRN",8989.51,867,-1)
0^1
"KRN",8989.51,867,0)
XU SIG BLOCK DISABLE^Disable Sig Block edit^0^^Sig Block Disable
"KRN",8989.51,867,1)
S^0:NO;1:YES^Enter a 1 to turn the Sig Block editing ON, or a '0' to turn it OFF.
"KRN",8989.51,867,20,0)
^^5^5^3161222^
"KRN",8989.51,867,20,1,0)
This parameter is used to turn on the functionality delivered in 
"KRN",8989.51,867,20,2,0)
XU*8.0*679.  The parameter will allow a site to only provide the Signature
"KRN",8989.51,867,20,3,0)
Block edit in the NEW PERSON (#200) file to individuals that have the XU
"KRN",8989.51,867,20,4,0)
SIG BLOCK EDIT security key assigned in their NEW PERSON (#200) file
"KRN",8989.51,867,20,5,0)
entry.
"KRN",8989.51,867,30,0)
^8989.513I^1^1
"KRN",8989.51,867,30,1,0)
1^4.2
"MBREQ")
0
"ORD",3,19.1)
19.1;3;;;KEY^XPDTA1;KEYF1^XPDIA1;KEYE1^XPDIA1;KEYF2^XPDIA1;;KEYDEL^XPDIA1
"ORD",3,19.1,0)
SECURITY KEY
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"ORD",20,8989.51)
8989.51;20;;;PAR1E1^XPDTA2;PAR1F1^XPDIA3;PAR1E1^XPDIA3;PAR1F2^XPDIA3;;PAR1DEL^XPDIA3(%)
"ORD",20,8989.51,0)
PARAMETER DEFINITION
"PKG",173,-1)
1^1
"PKG",173,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^
"PKG",173,20,0)
^9.402P^2^2
"PKG",173,20,1,0)
200^^XDRM200N
"PKG",173,20,1,1)

"PKG",173,20,2,0)
2^^RGDRM03
"PKG",173,20,2,1)

"PKG",173,20,"B",2,2)

"PKG",173,20,"B",200,1)

"PKG",173,22,0)
^9.49I^1^1
"PKG",173,22,1,0)
8.0^2950703^2951015^1
"PKG",173,22,1,"PAH",1,0)
679^3180606
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","XU8P679")
0^^B429199^n/a
"RTN","XU8P679",1,0)
XU8P679 ; XU/LLB - EPIP XU*8.0*679 Preinstall routine ;Feb 8,2018@17:20
"RTN","XU8P679",2,0)
 ;;8.0;KERNEL;**679**;Jul 10, 1995;Build 27
"RTN","XU8P679",3,0)
FIX ; Deletes existing entries in EDUCATION file (#20.11) before install
"RTN","XU8P679",4,0)
 D BMES^XPDUTL("EDUCATION file (#20.11) is being cleared.")
"RTN","XU8P679",5,0)
 N DIK,D1
"RTN","XU8P679",6,0)
 S DIK="^DIC(20.11,"
"RTN","XU8P679",7,0)
 S D1=0
"RTN","XU8P679",8,0)
 I '$D(^DIC(20.11)) Q 
"RTN","XU8P679",9,0)
 F  S D1=$O(^DIC(20.11,D1)) Q:(D1'?.N)!(D1=0)  S DA=D1 D ^DIK
"RTN","XU8P679",10,0)
 D BMES^XPDUTL("File clearing is complete.")
"RTN","XU8P679",11,0)
 Q
"RTN","XUSESIG")
0^1^B13254632^B11503633
"RTN","XUSESIG",1,0)
XUSESIG ;SF/RWF - ROUTINE TO ENTER OR CHANGE ELECTRONIC SIGNATURE CODE ; 09 Mar 2017  10:17 AM
"RTN","XUSESIG",2,0)
 ;;8.0;KERNEL;**14,55,437,679**;Jul 10, 1995;Build 27
"RTN","XUSESIG",3,0)
 ;
"RTN","XUSESIG",4,0)
 ; ^XUSEC read supported by ICR #10076.
"RTN","XUSESIG",5,0)
 ;
"RTN","XUSESIG",6,0)
A ;Called by others from the top. See DBIC #936
"RTN","XUSESIG",7,0)
 I $D(DUZ)[0 W "NO ACTION CAN BE TAKEN ON YOUR REQUEST     " Q
"RTN","XUSESIG",8,0)
 S DA=DUZ
"RTN","XUSESIG",9,0)
A2 N DIE,DR,X1,K
"RTN","XUSESIG",10,0)
 S:$D(^VA(200,DA,0))[0 DA=0
"RTN","XUSESIG",11,0)
 I DA'>0 W !,"You don't have an entry in the NEW PERSON file, See your site manager" G OUT
"RTN","XUSESIG",12,0)
 W !,"This option is designed to permit you to enter or change your Initials,",!
"RTN","XUSESIG",13,0)
 N XUSGBLK S XUSGBLK=0
"RTN","XUSESIG",14,0)
 I $$GET^XPAR("ALL","XU SIG BLOCK DISABLE") S XUSGBLK=1
"RTN","XUSESIG",15,0)
 I 'XUSGBLK W "Signature Block Information, "
"RTN","XUSESIG",16,0)
 W "Office Phone number, and Voice and Digital Pagers "
"RTN","XUSESIG",17,0)
 I 'XUSGBLK W !
"RTN","XUSESIG",18,0)
 W "numbers."
"RTN","XUSESIG",19,0)
 W !,"In addition, you are permitted to enter a new Electronic Signature Code"
"RTN","XUSESIG",20,0)
 W !,"or to change an existing code.",!!
"RTN","XUSESIG",21,0)
 S DIE="^VA(200,",DR="1;.132;.137;.138"
"RTN","XUSESIG",22,0)
 I 'XUSGBLK S DR="1;20.2;20.3;.132;.137;.138"
"RTN","XUSESIG",23,0)
 D ^DIE
"RTN","XUSESIG",24,0)
 I $P($G(^VA(200,DA,20)),U,2)="" W !,"You must have a SIGNATURE BLOCK PRINTED NAME before you can have",!,"an ELECTRONIC SIGNATURE CODE." G OUT1
"RTN","XUSESIG",25,0)
 S X1=$P($G(^VA(200,DA,20)),"^",4) I X1]"" S K=0 D S2 G:X1="" OUT1
"RTN","XUSESIG",26,0)
 S X1=$$NEW() W !,$S(X1:"DONE",1:"  OPTION ABORTED."_$C(7))
"RTN","XUSESIG",27,0)
 G OUT1
"RTN","XUSESIG",28,0)
 ;
"RTN","XUSESIG",29,0)
NEW() ;Enter a NEW E-Sig code, return 0 for fail, 1 if done, 2 skip.
"RTN","XUSESIG",30,0)
 N K,X,X1 S K=0
"RTN","XUSESIG",31,0)
 W !!,"Your typing will not show."
"RTN","XUSESIG",32,0)
N2 W !,"ENTER NEW SIGNATURE CODE: " D R Q:X=""!(X="^") 2
"RTN","XUSESIG",33,0)
 I X'?.UNP!($L(X)>20)!($L(X)<6) W *7,!,"Signature code must be 6 to 20 characters in length",!," With no control or lowercase characters.",! G N2
"RTN","XUSESIG",34,0)
 S X1=X W !,"RE-ENTER SIGNATURE CODE FOR VERIFICATION: " D R G:X=""!(X="^") N5
"RTN","XUSESIG",35,0)
 I X'=X1 W "  CODE NOT VERIFIED, TRY AGAIN.",*7,! S K=K+1 G N5:K>3 G N2
"RTN","XUSESIG",36,0)
 D HASH^XUSHSHP
"RTN","XUSESIG",37,0)
 I X=$P(^VA(200,DA,20),U,4) W *7,!,"You can't use the same one.",! G N2
"RTN","XUSESIG",38,0)
 S $P(^VA(200,DA,20),"^",4)=X
"RTN","XUSESIG",39,0)
 F XUS=0:0 S XUS=$O(^DD(200,20.4,1,XUS)) Q:XUS'>0  X ^(XUS,1)
"RTN","XUSESIG",40,0)
N4 Q 1 ;OK
"RTN","XUSESIG",41,0)
N5 Q 0 ;FAIL
"RTN","XUSESIG",42,0)
 ;
"RTN","XUSESIG",43,0)
R X ^%ZOSF("EOFF") R X:60 X ^%ZOSF("EON") S:'$T X="^" Q
"RTN","XUSESIG",44,0)
 ;
"RTN","XUSESIG",45,0)
OUT W !,"  OPTION ABORTED.",*7
"RTN","XUSESIG",46,0)
OUT1 K %,D,D0,DA,DIC,DIE,DQ,DR,X,X1,A,K,I,Z,XUSGBLK Q
"RTN","XUSESIG",47,0)
 ;
"RTN","XUSESIG",48,0)
SIG ;Call with DUZ; Return X1="" if fail else hashed ESC.
"RTN","XUSESIG",49,0)
 N X2,K
"RTN","XUSESIG",50,0)
 S X2=$G(^VA(200,+$G(DUZ),20)),X1=$P(X2,U,4) I X1="" W !,"No Electronic Signature code to check." Q
"RTN","XUSESIG",51,0)
 S K=0 D S2 Q:X1=""
"RTN","XUSESIG",52,0)
 Q  ;Following code was to force code change
"RTN","XUSESIG",53,0)
 N LIFE S LIFE=$$KSP^XUPARAM("LIFETIME")
"RTN","XUSESIG",54,0)
 S X2=+X2 I X2>0,(X2+LIFE)'>(+$H) D  I X1="" W !,*7,"Verification with held until new code entered.",!
"RTN","XUSESIG",55,0)
 . W !!,"Your Electronic Signature Code has expired, you need to create a new one."
"RTN","XUSESIG",56,0)
 . N DA S DA=DUZ S:$$NEW()'=1 X1=""
"RTN","XUSESIG",57,0)
 . Q
"RTN","XUSESIG",58,0)
 Q
"RTN","XUSESIG",59,0)
 ;
"RTN","XUSESIG",60,0)
S2 W !!,"Enter your Current Signature Code: " D R G:X=""!(X="^") S9
"RTN","XUSESIG",61,0)
 I X?1.2"?" W !,"Enter your current Electronic Signature Code so it can be verified.",! G S2
"RTN","XUSESIG",62,0)
 S K=K+1 D HASH^XUSHSHP I X1'=X W "  ??",*7 S X="" G S2:K<3,S9
"RTN","XUSESIG",63,0)
 W "   SIGNATURE VERIFIED"
"RTN","XUSESIG",64,0)
S9 S:X=""!(X="^") X1=""
"RTN","XUSESIG",65,0)
 Q
"RTN","XUSESIG",66,0)
TEXT ;;
"RTN","XUSESIG",67,0)
CLEAR ;Clear (delete) a users ESC to allow entering a new one.
"RTN","XUSESIG",68,0)
 S DIC=200,DIC(0)="AEMQ" D ^DIC G OUT:Y'>0 S DA=+Y,DIR(0)="Y"
"RTN","XUSESIG",69,0)
 W !,"Clear SIGNATURE CODE from user ",$P(Y,U,2) D ^DIR G OUT1:Y'=1
"RTN","XUSESIG",70,0)
 S DIE=DIC,DR="20.4///@" D ^DIE G OUT1
"RTN","XUSESIG",71,0)
 Q
"RTN","XUSESIG",72,0)
 ;;
"RTN","XUSESIG2")
0^2^B3406621^n/a
"RTN","XUSESIG2",1,0)
XUSESIG2 ;EPIP/LLB - ROUTINE TO ENTER OR CHNAGE ELECTRONIC SIGNATURE REVISED; 10 Feb 2017  11:15 AM ; 09 Mar 2017  10:09 AM
"RTN","XUSESIG2",2,0)
 ;;8.0;KERNEL;**679**;02/02/2017;Build 27
"RTN","XUSESIG2",3,0)
 ;
"RTN","XUSESIG2",4,0)
 ; ^XUSEC(KEY,DUZ) is supported by ICR #10076
"RTN","XUSESIG2",5,0)
 ;
"RTN","XUSESIG2",6,0)
 Q  ;Must be called from a tag.
"RTN","XUSESIG2",7,0)
 ; Function to test if patch XU*8.0*679 is active and if the user has the proper credentials
"RTN","XUSESIG2",8,0)
 ; to edit field 10.6 (Degree) in the NEW PERSON file (#200).
"RTN","XUSESIG2",9,0)
EN ;
"RTN","XUSESIG2",10,0)
 I '$G(DUZ) W "USER NOT SIGNED IN" Q  ; Test if user is signed in
"RTN","XUSESIG2",11,0)
 ; Test if the system parameter "Electronic Signature Block Edit" is on
"RTN","XUSESIG2",12,0)
 ;
"RTN","XUSESIG2",13,0)
 S DA=DUZ
"RTN","XUSESIG2",14,0)
 ; If the switch is ON then check user and is security key XUSIG is present.
"RTN","XUSESIG2",15,0)
 ; $$GET^XPAR does not error if the system parameter does not exist. Returns null
"RTN","XUSESIG2",16,0)
 I '$$GET^XPAR("ALL","XU SIG BLOCK DISABLE") D
"RTN","XUSESIG2",17,0)
 . N DIC K DIC
"RTN","XUSESIG2",18,0)
 . S DIC="^VA(200,",DIC(0)="AEMQ"
"RTN","XUSESIG2",19,0)
 . D ^DIC S DA=+Y
"RTN","XUSESIG2",20,0)
 . S DIE=DIC K DIC S DR="20.2;10.6" D ^DIE
"RTN","XUSESIG2",21,0)
 E  D  ; Get person to lookup and check for security key.
"RTN","XUSESIG2",22,0)
 . N DIC,DIR
"RTN","XUSESIG2",23,0)
 . ;check for security key. If not present denie access and quit.
"RTN","XUSESIG2",24,0)
 . I '$D(^XUSEC("XUSIG",DUZ)) D  Q
"RTN","XUSESIG2",25,0)
 . . ;W !,"Edit Access Denied. Press <ENTER> to Continue. "
"RTN","XUSESIG2",26,0)
 . . S DIR(0)="FO^1",DIR("A")="Edit Access Denied. Contact your CAC/ADPAC for assistance. Press <ENTER> to Continue. "
"RTN","XUSESIG2",27,0)
 . . D ^DIR K DIR
"RTN","XUSESIG2",28,0)
 . K DIC
"RTN","XUSESIG2",29,0)
 . S DIC="^VA(200,",DIC(0)="QEAL",DIC("A")="Enter Person to Edit: "
"RTN","XUSESIG2",30,0)
 . D ^DIC
"RTN","XUSESIG2",31,0)
 . K DIC
"RTN","XUSESIG2",32,0)
 . S DA=+Y
"RTN","XUSESIG2",33,0)
 . D PNM^XUSESIG3 ; Edit Signature Block Printed Name & Title
"RTN","XUSESIG2",34,0)
 . D DEGREE^XUSESIG3 ; Edit DEGREE field in NEW PERSON (#200) file
"RTN","XUSESIG2",35,0)
 Q
"RTN","XUSESIG2",36,0)
 ;
"RTN","XUSESIG3")
0^3^B5931967^n/a
"RTN","XUSESIG3",1,0)
XUSESIG3 ;EPIP/WLC - ROUTINE TO ENTER OR CHNAGE ELECTRONIC SIGNATURE REVISED; 10 Feb 2017  11:15 AM ; 21 Feb 2017  8:31 AM
"RTN","XUSESIG3",2,0)
 ;;8.0;KERNEL;**679**;02/02/17;Build 27
"RTN","XUSESIG3",3,0)
 Q
"RTN","XUSESIG3",4,0)
PNM ; Signature Block Printed Name & Title edit
"RTN","XUSESIG3",5,0)
 ;S DIC="^VA(200,",DIC(0)="AEMQ",DIC("A")="Enter Employee to edit:  "
"RTN","XUSESIG3",6,0)
 ;D ^DIC Q:Y<1
"RTN","XUSESIG3",7,0)
 ;S DA=+Y
"RTN","XUSESIG3",8,0)
 N DIE S DIE=200,DR="20.2;20.3" D ^DIE
"RTN","XUSESIG3",9,0)
 Q
"RTN","XUSESIG3",10,0)
 ;
"RTN","XUSESIG3",11,0)
DEG ; Old method
"RTN","XUSESIG3",12,0)
 N DIE
"RTN","XUSESIG3",13,0)
 S DIE=200,DR="10.6" D ^DIE
"RTN","XUSESIG3",14,0)
 Q
"RTN","XUSESIG3",15,0)
 ;
"RTN","XUSESIG3",16,0)
DEGREE ; test input for DEGREE field
"RTN","XUSESIG3",17,0)
 N DEF,DIR,X,Y,I,FLAG
"RTN","XUSESIG3",18,0)
 S FLAG=0,DEF=$$GET1^DIQ(200,DA,10.6)
"RTN","XUSESIG3",19,0)
 F I=1:1 D  Q:FLAG
"RTN","XUSESIG3",20,0)
 . W !!,$$GET1^DIQ(200,DA,.01),!
"RTN","XUSESIG3",21,0)
 . W !,"Current entry for DEGREE is:  ",DEF
"RTN","XUSESIG3",22,0)
 . W !! S DIR("A")="(A)ppend/Enter or (R)eplace " S DIR(0)="F:O^1:1^I ""AaRr""'[X K X"
"RTN","XUSESIG3",23,0)
 . S DIR("?",1)="Enter ""A"" to create a new entry or to append an additional"
"RTN","XUSESIG3",24,0)
 . S DIR("?",2)="degree to the existing string. Enter ""R"" to start over and"
"RTN","XUSESIG3",25,0)
 . S DIR("?",3)="replace the entire contents of degree with a new value"
"RTN","XUSESIG3",26,0)
 . S DIR("?")="or ""R"" with no value to delete the contents of DEGREE."
"RTN","XUSESIG3",27,0)
 . D ^DIR
"RTN","XUSESIG3",28,0)
 . I $D(DIRUT) S FLAG=1 Q
"RTN","XUSESIG3",29,0)
 . I Y="R"!(Y="r") D
"RTN","XUSESIG3",30,0)
 . . S FDA(200,DA_",",10.6)="" D FILE^DIE("","FDA",) K DIR("B") S DEF=""
"RTN","XUSESIG3",31,0)
 . S DIR(0)="PO^20.11:EMOZ",DIR("A")="Enter degree mnemonic ",DIR("?")="Enter the type of degree using a mnemonic/acronym."
"RTN","XUSESIG3",32,0)
 . D ^DIR
"RTN","XUSESIG3",33,0)
 . I $D(DIRUT) S FLAG=1 Q
"RTN","XUSESIG3",34,0)
 . S DELIM=" " S:$G(DEF)="" DELIM=""
"RTN","XUSESIG3",35,0)
 . S DEF=DEF_DELIM_$P(^DIC(20.11,+Y,0),U,3)
"RTN","XUSESIG3",36,0)
 . I $L(DEF)>10 S DEF=$$GET1^DIQ(200,DA_",",10.6) W !,"*****  Entry too long.  Try Again. *****",!,"Entry must be less than ten (10) characters." Q
"RTN","XUSESIG3",37,0)
 . N FDA,FDAERR S FDA(200,DA_",",10.6)=DEF D FILE^DIE("","FDA","FDAERR")
"RTN","XUSESIG3",38,0)
 . I '$D(FDAERR) Q
"RTN","XUSESIG3",39,0)
 . I $D(FDAERR) W !,"Error in filing data.  Please try again." Q
"RTN","XUSESIG3",40,0)
 Q
"RTN","XUSESIG3",41,0)
 ;
"VER")
8.0^22.2
"^DD",20,20,6,0)
DEGREE^FXJ10^^1;6^K:$L(X)>10!($L(X)<1) X  I $G(X)'="" N I,Z S Z=X F I=1:1:$L(Z," ") I $D(^DIC(20.11,"C",$P(Z," ",I))) K X
"^DD",20,20,6,3)
Answer must be 1-10 characters in length and a valid code from the EDUCATION (#20.11) file. The field can contain multiple degree codes delimited by blank spaces up to the 10 character field length.
"^DD",20,20,6,21,0)
^^5^5^3171222^
"^DD",20,20,6,21,1,0)
This field holds any academic or professional degree that have been 
"^DD",20,20,6,21,2,0)
earned by the user. This would be things like BS, BA, MD, and PHD. Each 
"^DD",20,20,6,21,3,0)
degree must be a valid code from the DUCATION (#20.11) file. The field 
"^DD",20,20,6,21,4,0)
can contain multiple degrees delimited by blank space up to the 10 
"^DD",20,20,6,21,5,0)
character field length. This would be like PHD MD or BA CNA etc.
"^DD",20,20,6,"DT")
3180328
"^DD",20.11,20.11,0)
FIELD^^1^2
"^DD",20.11,20.11,0,"DT")
3170206
"^DD",20.11,20.11,0,"ID",1)
W "   ",$P(^(0),U,3)
"^DD",20.11,20.11,0,"IX","B",20.11,.01)

"^DD",20.11,20.11,0,"IX","C",20.11,1)

"^DD",20.11,20.11,0,"NM","EDUCATION")

"^DD",20.11,20.11,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",20.11,20.11,.01,1,0)
^.1
"^DD",20.11,20.11,.01,1,1,0)
20.11^B
"^DD",20.11,20.11,.01,1,1,1)
S ^DIC(20.11,"B",$E(X,1,30),DA)=""
"^DD",20.11,20.11,.01,1,1,2)
K ^DIC(20.11,"B",$E(X,1,30),DA)
"^DD",20.11,20.11,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",20.11,20.11,.01,"DT")
3170203
"^DD",20.11,20.11,1,0)
CODE^F^^0;3^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>4!($L(X)<1) X
"^DD",20.11,20.11,1,1,0)
^.1
"^DD",20.11,20.11,1,1,1,0)
20.11^C
"^DD",20.11,20.11,1,1,1,1)
S ^DIC(20.11,"C",$E(X,1,30),DA)=""
"^DD",20.11,20.11,1,1,1,2)
K ^DIC(20.11,"C",$E(X,1,30),DA)
"^DD",20.11,20.11,1,3)
ANSWER MUST BE 1-4 CHARACTERS IN LENGTH
"^DD",20.11,20.11,1,"DT")
3180323
"^DD",200,200,10.6,0)
DEGREE^FJ10X^^3.1;6^K:$L(X)>10!($L(X)<1) X  I $G(X)'="" N I,Z S Z=X F I=1:1:$L(Z," ") I '$D(^DIC(20.11,"C",$P(Z," ",I))) K X
"^DD",200,200,10.6,1,0)
^.1^^0
"^DD",200,200,10.6,3)
Answer must be 1-10 characters in length and a valid code from the EDUCATION (#20.11) file. The field can contain multiple degree codes delimited by blank spaces up to the 10 character length
"^DD",200,200,10.6,4)

"^DD",200,200,10.6,21,0)
^^4^4^3180323^^
"^DD",200,200,10.6,21,1,0)
This field holds any academic or professional degree that have been earned
"^DD",200,200,10.6,21,2,0)
by the user. This would be things like BS, BA, MD, and PHD. The field can 
"^DD",200,200,10.6,21,3,0)
contain multiple degrees delimited by blank space up to the 10 character 
"^DD",200,200,10.6,21,4,0)
field length. This would be like PHD MD or BA CNA etc.
"^DD",200,200,10.6,"DT")
3180328
"^DIC",20.11,20.11,0)
EDUCATION^20.11I
"^DIC",20.11,20.11,0,"GL")
^DIC(20.11,
"^DIC",20.11,"B","EDUCATION",20.11)

"BLD",10049,6)
^545
**END**
**END**

