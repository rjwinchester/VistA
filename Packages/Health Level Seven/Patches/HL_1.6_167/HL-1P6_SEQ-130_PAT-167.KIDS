Released HL*1.6*167 SEQ #130
Extracted from mail message
**KIDS**:HL*1.6*167^

**INSTALL NAME**
HL*1.6*167
"BLD",10288,0)
HL*1.6*167^HEALTH LEVEL SEVEN^0^3160614^y
"BLD",10288,1,0)
^^2^2^3160614^
"BLD",10288,1,1,0)
This patch modifies the Fileman validation logic to account
"BLD",10288,1,2,0)
for the upgrade to Fileman V22.2.
"BLD",10288,4,0)
^9.64PA^^
"BLD",10288,6.3)
2
"BLD",10288,"KRN",0)
^9.67PA^779.2^20
"BLD",10288,"KRN",.4,0)
.4
"BLD",10288,"KRN",.401,0)
.401
"BLD",10288,"KRN",.402,0)
.402
"BLD",10288,"KRN",.403,0)
.403
"BLD",10288,"KRN",.5,0)
.5
"BLD",10288,"KRN",.84,0)
.84
"BLD",10288,"KRN",3.6,0)
3.6
"BLD",10288,"KRN",3.8,0)
3.8
"BLD",10288,"KRN",9.2,0)
9.2
"BLD",10288,"KRN",9.8,0)
9.8
"BLD",10288,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10288,"KRN",9.8,"NM",1,0)
HLCSRPT^^0^B35887757
"BLD",10288,"KRN",9.8,"NM","B","HLCSRPT",1)

"BLD",10288,"KRN",19,0)
19
"BLD",10288,"KRN",19.1,0)
19.1
"BLD",10288,"KRN",101,0)
101
"BLD",10288,"KRN",409.61,0)
409.61
"BLD",10288,"KRN",771,0)
771
"BLD",10288,"KRN",779.2,0)
779.2
"BLD",10288,"KRN",870,0)
870
"BLD",10288,"KRN",8989.51,0)
8989.51
"BLD",10288,"KRN",8989.52,0)
8989.52
"BLD",10288,"KRN",8994,0)
8994
"BLD",10288,"KRN","B",.4,.4)

"BLD",10288,"KRN","B",.401,.401)

"BLD",10288,"KRN","B",.402,.402)

"BLD",10288,"KRN","B",.403,.403)

"BLD",10288,"KRN","B",.5,.5)

"BLD",10288,"KRN","B",.84,.84)

"BLD",10288,"KRN","B",3.6,3.6)

"BLD",10288,"KRN","B",3.8,3.8)

"BLD",10288,"KRN","B",9.2,9.2)

"BLD",10288,"KRN","B",9.8,9.8)

"BLD",10288,"KRN","B",19,19)

"BLD",10288,"KRN","B",19.1,19.1)

"BLD",10288,"KRN","B",101,101)

"BLD",10288,"KRN","B",409.61,409.61)

"BLD",10288,"KRN","B",771,771)

"BLD",10288,"KRN","B",779.2,779.2)

"BLD",10288,"KRN","B",870,870)

"BLD",10288,"KRN","B",8989.51,8989.51)

"BLD",10288,"KRN","B",8989.52,8989.52)

"BLD",10288,"KRN","B",8994,8994)

"BLD",10288,"QUES",0)
^9.62^^
"BLD",10288,"REQB",0)
^9.611^1^1
"BLD",10288,"REQB",1,0)
HL*1.6*50^1
"BLD",10288,"REQB","B","HL*1.6*50",1)

"MBREQ")
0
"PKG",243,-1)
1^1
"PKG",243,0)
HEALTH LEVEL SEVEN^HL^DHCP IMPLEMENTATION OF HEALTH LEVEL SEVEN
"PKG",243,20,0)
^9.402P^^
"PKG",243,22,0)
^9.49I^1^1
"PKG",243,22,1,0)
1.6^2951013^2981102^66481
"PKG",243,22,1,"PAH",1,0)
167^3160614
"PKG",243,22,1,"PAH",1,1,0)
^^2^2^3160614
"PKG",243,22,1,"PAH",1,1,1,0)
This patch modifies the Fileman validation logic to account
"PKG",243,22,1,"PAH",1,1,2,0)
for the upgrade to Fileman V22.2.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","HLCSRPT")
0^1^B35887757^B35882711
"RTN","HLCSRPT",1,0)
HLCSRPT ;ISC-SF/RAH-TRANS LOG CONTROL & MISC ;06/23/99  11:10 AM
"RTN","HLCSRPT",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**19,50,167**;Oct 13, 1995;Build 2
"RTN","HLCSRPT",3,0)
 ;
"RTN","HLCSRPT",4,0)
 Q
"RTN","HLCSRPT",5,0)
 ;
"RTN","HLCSRPT",6,0)
EN ; Entry Point
"RTN","HLCSRPT",7,0)
 I '$$TEST^DDBRT S IOP="HOME" D ^%ZIS I '$$TEST^DDBRT W !!," ===>> Screen Attributes NOT Defined. Use ^ZU or ^XUP before invoking.",!! D EXIT H 3 Q
"RTN","HLCSRPT",8,0)
 D SCREEN
"RTN","HLCSRPT",9,0)
 S HLCSNREC=BLDON_" ===>>>  NO MATCHING RECORDS  <<<=== "_BLDOFF
"RTN","HLCSRPT",10,0)
 S HLCSPTR=1,HLCSRNO=1
"RTN","HLCSRPT",11,0)
 S VERS22=""
"RTN","HLCSRPT",12,0)
 I 22'>+$$VERSION^XPDUTL("DI")!($$PATCH^XPDUTL("DI*21.0*32")) S VERS22="YES"
"RTN","HLCSRPT",13,0)
 I VERS22'="YES" S ^TMP("DDBPF1Z",$J)="D SHOWMSG^HLCSRPT Q"
"RTN","HLCSRPT",14,0)
 S ^TMP($J,"LIST","MESSAGE TEXT")="^TMP($J,""MESSAGE"",HLCSRNO)"
"RTN","HLCSRPT",15,0)
 S ^TMP($J,"LIST","IEN RECORD #   MESSAGE ID #         Log Link   Msg:Evn IO Sndg Apl Rcvr Apl HDR")="^TMP(""TLOG"",$J)"
"RTN","HLCSRPT",16,0)
 ;
"RTN","HLCSRPT",17,0)
REEN ; Internal Re-entry Point
"RTN","HLCSRPT",18,0)
 W @IOF,! S HLCSHDR="Search Transmission Log" D HLCSBAR
"RTN","HLCSRPT",19,0)
 K DIR,OUT,DIC,STOP,Y W !!
"RTN","HLCSRPT",20,0)
 S DIR("A")="Selection"
"RTN","HLCSRPT",21,0)
 S DIR(0)="SO^M:Message Search;P:Pending Transmissions;E:Error Listing;Q:Quit (also uparrow, or <RETURN>)"
"RTN","HLCSRPT",22,0)
 D ^DIR G:$D(DIRUT)!(X="") EXIT S ACTION=X,ACTION=$TR(ACTION,"mpeq","MPEQ")
"RTN","HLCSRPT",23,0)
 K DIR,X,Y
"RTN","HLCSRPT",24,0)
 S (HLCSAL,HLCSLS,HLCSES)=0
"RTN","HLCSRPT",25,0)
 I ACTION="Q" G EXIT
"RTN","HLCSRPT",26,0)
 I "MPE"'[ACTION G ENEND
"RTN","HLCSRPT",27,0)
 I ACTION="P" S HLCSPS=1 D EN^HLCSRPT1 G REEN
"RTN","HLCSRPT",28,0)
 I ACTION="E" S HLCSERR=1 D EN^HLCSRPT2 G REEN
"RTN","HLCSRPT",29,0)
 I ACTION="M" D ADVSRCH^HLCSRPT3 G REEN
"RTN","HLCSRPT",30,0)
 ;
"RTN","HLCSRPT",31,0)
ENEND ;
"RTN","HLCSRPT",32,0)
 K DIR,OUT,DIC,STOP,X,Y,ACTION
"RTN","HLCSRPT",33,0)
 G REEN
"RTN","HLCSRPT",34,0)
 ;
"RTN","HLCSRPT",35,0)
GETTIME ;
"RTN","HLCSRPT",36,0)
 W @IOF,! S HLCSHDR="Start/Stop Time Selection" D HLCSBAR
"RTN","HLCSRPT",37,0)
GETSTART ;
"RTN","HLCSRPT",38,0)
 W !!,"  Enter START Date and Time. Date is required.",!
"RTN","HLCSRPT",39,0)
 S DIR(0)="D^::AEPSTX",DIR("?")="^D HELP^%DTC",DIR("B")="T"
"RTN","HLCSRPT",40,0)
 D ^DIR S:$D(DIRUT)!(X="") STOP=1 I $D(STOP) K DIR,X,Y Q
"RTN","HLCSRPT",41,0)
 I Y'["." S Y=Y_".000001"
"RTN","HLCSRPT",42,0)
 S HLCSST=Y K DIR,X,Y
"RTN","HLCSRPT",43,0)
GETEND ;
"RTN","HLCSRPT",44,0)
 W !!,"  Enter END Date and Time. Date is required.",!
"RTN","HLCSRPT",45,0)
 S DIR(0)="D^::AESTX",DIR("?")="^D HELP^%DTC",DIR("B")="NOW"
"RTN","HLCSRPT",46,0)
 D ^DIR S:$D(DIRUT)!(X="") STOP=1 I $D(STOP) K DIR,X,Y Q
"RTN","HLCSRPT",47,0)
 I Y'["." S Y=Y_".235959"
"RTN","HLCSRPT",48,0)
 S HLCSET=Y K DIR,X,Y
"RTN","HLCSRPT",49,0)
 Q
"RTN","HLCSRPT",50,0)
 ;
"RTN","HLCSRPT",51,0)
DISPLAY ; common display method
"RTN","HLCSRPT",52,0)
 ; clean-up here
"RTN","HLCSRPT",53,0)
 S HLCSPTR=$P(^TMP("TLOG",$J,1)," "),HLCSK=$O(^HLMA("C",HLCSPTR,0))
"RTN","HLCSRPT",54,0)
 S HLCSPTR=+$P($G(^HLMA(+HLCSK,0)),U)
"RTN","HLCSRPT",55,0)
 I VERS22'="YES" D DOCLIST^DDBR("^TMP($J,""LIST"")","NR")
"RTN","HLCSRPT",56,0)
 E  D BROWSE^DDBR("^TMP(""TLOG"",$J)","NA",HLCSTITL)
"RTN","HLCSRPT",57,0)
 Q
"RTN","HLCSRPT",58,0)
 ;
"RTN","HLCSRPT",59,0)
FORMAT ; Format a report line
"RTN","HLCSRPT",60,0)
 S HLCSY=""
"RTN","HLCSRPT",61,0)
 S HLCSRNO=HLCSJ,SPACE20="                    "
"RTN","HLCSRPT",62,0)
 I VERS22'="YES" D
"RTN","HLCSRPT",63,0)
 . S HLCSRNO=HLCSRNO_SPACE20 S HLCSRNO=$E(HLCSRNO,1,14) S HLCSY=HLCSRNO_" "
"RTN","HLCSRPT",64,0)
 . S HLCSMID=$P(HLCSX,U,2),HLCSMX=HLCSMID,HLCSPTR=$P(HLCSX,U,1)
"RTN","HLCSRPT",65,0)
 . S HLCSMID=HLCSMID_SPACE20 S HLCSMID=$E(HLCSMID,1,20)
"RTN","HLCSRPT",66,0)
 . S HLCSY=HLCSY_HLCSMID_" "
"RTN","HLCSRPT",67,0)
 I VERS22="YES" D
"RTN","HLCSRPT",68,0)
 . S HLCSMID=$P(HLCSX,U,2),HLCSMX=HLCSMID,HLCSPTR=$P(HLCSX,U,1)
"RTN","HLCSRPT",69,0)
 . S HLCSMID="$.%$CREF$^TMP($J,""MESSAGE"","_HLCSRNO_")$CREF$^"_HLCSMX_"$.%"
"RTN","HLCSRPT",70,0)
 . S Y=$L(HLCSMX),X=$E(SPACE20,1,20-Y) S HLCSMID=HLCSMID_X K X,Y
"RTN","HLCSRPT",71,0)
 . S HLCSY=HLCSMID_" "
"RTN","HLCSRPT",72,0)
 . S HLCSDTE=$P(HLCSX,U,1)
"RTN","HLCSRPT",73,0)
 . S HLCSDTE=$P(^HL(772,HLCSDTE,0),U,1)
"RTN","HLCSRPT",74,0)
 . S YR=$E(HLCSDTE,2,3),MO=$E(HLCSDTE,4,5),DAY=$E(HLCSDTE,6,7)
"RTN","HLCSRPT",75,0)
 . S HLCSDTE=MO_DAY_YR_"."_$P(HLCSDTE,".",2)
"RTN","HLCSRPT",76,0)
 . S HLCSDTE=HLCSDTE_SPACE20,HLCSDTE=$E(HLCSDTE,1,14)
"RTN","HLCSRPT",77,0)
 . S HLCSY=HLCSY_HLCSDTE_" "
"RTN","HLCSRPT",78,0)
 S HLCSY=HLCSY_$E(HLCSLNK_SPACE20,1,10)_" "
"RTN","HLCSRPT",79,0)
 S HLCSY=HLCSY_HLCSEVN_" "
"RTN","HLCSRPT",80,0)
 S HLCSTYP=$P(HLCSX,U,3) S:HLCSTYP="O" HLCSTYP="OT" S:HLCSTYP="I" HLCSTYP="IN"
"RTN","HLCSRPT",81,0)
 S HLCSY=HLCSY_$E(HLCSTYP_SPACE20,1,2)_" "
"RTN","HLCSRPT",82,0)
 S HLCSSRVR=$P(HLCSX,U,11) I HLCSSRVR'="",($D(^HL(771,HLCSSRVR,0))) S HLCSSRVR=$P(^HL(771,HLCSSRVR,0),U,1)
"RTN","HLCSRPT",83,0)
 S HLCSY=HLCSY_$E(HLCSSRVR_SPACE20,1,8)_" "
"RTN","HLCSRPT",84,0)
 S HLCSCLNT=$P(HLCSX,U,12) I HLCSCLNT'="",($D(^HL(771,HLCSCLNT,0))) S HLCSCLNT=$P(^HL(771,HLCSCLNT,0),U,1)
"RTN","HLCSRPT",85,0)
 S HLCSY=HLCSY_$E(HLCSCLNT_SPACE20,1,8)
"RTN","HLCSRPT",86,0)
 S HLCSLN=HLCSLN+1
"RTN","HLCSRPT",87,0)
 I VERS22'="YES" S HLCSY=HLCSY_" " I $D(^HLMA(HLCSJ,"MSH",1,0)) S HLCSY=HLCSY_^HLMA(HLCSJ,"MSH",1,0)
"RTN","HLCSRPT",88,0)
 S ^TMP("TLOG",$J,HLCSLN)=HLCSY
"RTN","HLCSRPT",89,0)
 I VERS22="YES" S ^TMP($J,"MESSAGE",HLCSJ)="$XC$^D SHOWMSG^HLCSRPT1("_HLCSJ_","_HLCSPTR_")$XC$^MESSAGE"
"RTN","HLCSRPT",90,0)
 Q
"RTN","HLCSRPT",91,0)
 ;
"RTN","HLCSRPT",92,0)
HLCSBAR ; Center Title on Top Line of Screen
"RTN","HLCSRPT",93,0)
 W RVON,?(80-$L(HLCSHDR)\2),HLCSHDR,$E(SPACE,$X,77),RVOFF,!
"RTN","HLCSRPT",94,0)
 Q
"RTN","HLCSRPT",95,0)
 ;
"RTN","HLCSRPT",96,0)
EXIT ;
"RTN","HLCSRPT",97,0)
 K DIR,OUT,DIC,STOP,I,X,Y,ACTION,DIRUT,DTOUT,DUOUT
"RTN","HLCSRPT",98,0)
 K HLCSHDR,HLCSLN,HLCSI,HLCSJ,HLCSY,HLCSX,HLCSRNO
"RTN","HLCSRPT",99,0)
 K HLCSLINK,HLCSLNK,HLCSEVNT,HLCSEVN,HLCSMID,HLCSTYP,HLCSSRVR,HLCSCLNT
"RTN","HLCSRPT",100,0)
 K RVON,RVOFF,CEOP,BLDON,BLDOFF,SPACE,SPACE20
"RTN","HLCSRPT",101,0)
 K HLCSTEVN,HLCSTEV1,HLCSTEV2,HLCSEVN1,HLCSEVN2
"RTN","HLCSRPT",102,0)
 K HLCSTLNK,HLCSDTP,HLCSDTE,HLCSET,HLCSN,HLCSNREC,HLCSST
"RTN","HLCSRPT",103,0)
 K HLCSTITL,HLCSPTR,HLCSK,SPACE25,SPACE30,SPACE80
"RTN","HLCSRPT",104,0)
 K HLCSAL,HLCSLS,HLCSES,HLCSES1,HLCSES2,HLCSIO,HLCSPS
"RTN","HLCSRPT",105,0)
 K YR,MO,DAY,VERS22,XXY,XXZ,YY1,YY2,Y1Y2,HLCSMX
"RTN","HLCSRPT",106,0)
 K ^TMP($J,"LIST"),^TMP("DDBPF1Z",$J),^TMP("TLOG",$J)
"RTN","HLCSRPT",107,0)
 K ^TMP($J,"MESSAGE")
"RTN","HLCSRPT",108,0)
 Q
"RTN","HLCSRPT",109,0)
 ;
"RTN","HLCSRPT",110,0)
SHOWMSG ; Enable switching to specific message (used by PF1Z).
"RTN","HLCSRPT",111,0)
 ; If VERS22 installed, won't get here.
"RTN","HLCSRPT",112,0)
 W @IOF
"RTN","HLCSRPT",113,0)
 S DIR(0)="F:AE",DIR("A")="Enter Record Number: "
"RTN","HLCSRPT",114,0)
 D ^DIR Q:$D(DIRUT)
"RTN","HLCSRPT",115,0)
 I Y=-1!(X="") Q
"RTN","HLCSRPT",116,0)
 S HLCSRNO=X I '$D(^HLMA(HLCSRNO,0)) D  Q
"RTN","HLCSRPT",117,0)
 . W !!,BLDON,"  ==>  NO SUCH RECORD NUMBER <== ",BLDOFF H 3
"RTN","HLCSRPT",118,0)
 S HLCSPTR=$P(^HLMA(HLCSRNO,0),"^",1)
"RTN","HLCSRPT",119,0)
 S XXY=HLCSRNO,XXZ=HLCSPTR D SHOWMSG^HLCSRPT1(XXY,XXZ)
"RTN","HLCSRPT",120,0)
 D SWITCH
"RTN","HLCSRPT",121,0)
 Q
"RTN","HLCSRPT",122,0)
SWITCH ; per interim DBIA, until VA Fileman v22.0 released.
"RTN","HLCSRPT",123,0)
 N DDBLN,DDBZ,DIC,DIR,X,Y,DIRUT,DIROUT,DUOUT,DILN
"RTN","HLCSRPT",124,0)
 S DILN=DDBRSA(DDBRSA,"DDBSRL")-2
"RTN","HLCSRPT",125,0)
 S:$G(DDBLST)="" DDBLST="^TMP(""DDBLST"",$J)" S DDBLN=$S($D(@DDBLST@("A",DDBSA)):^(DDBSA),1:$O(@DDBLST@(" "),-1)+1)
"RTN","HLCSRPT",126,0)
 I $D(@DDBLST) D
"RTN","HLCSRPT",127,0)
 .I $O(@DDBLST@(" "),-1)=1,$G(@DDBLST@(1,"DDBSA"))=DDBSA Q
"RTN","HLCSRPT",128,0)
 .S DDBZ=$G(@DDBLST@("A",DDBSA),0)
"RTN","HLCSRPT",129,0)
 .S Y=2
"RTN","HLCSRPT",130,0)
 .D SAVEDDB^DDBR2(DDBLST,DDBLN),USAVEDDB^DDBR2(DDBLST,+Y)
"RTN","HLCSRPT",131,0)
 .S DIROUT=1
"RTN","HLCSRPT",132,0)
 N DDBLNA
"RTN","HLCSRPT",133,0)
 I $G(DDBLNA,-1)=-1 G PS
"RTN","HLCSRPT",134,0)
 I $G(DDBLNA(6))=DDBSA G PS  ;if current doc re-selected
"RTN","HLCSRPT",135,0)
 I $G(DDBLNA(6))]"",$D(@DDBLST@("APSA",DDBSA)) G PS  ;on list
"RTN","HLCSRPT",136,0)
 D:DDBLNA>0 SAVEDDB^DDBR2(DDBLST,DDBLN),WP^DDBR2(.DDBLNA)
"RTN","HLCSRPT",137,0)
PS D PSR^DDBR0(1)
"RTN","HLCSRPT",138,0)
 Q
"RTN","HLCSRPT",139,0)
 ;
"RTN","HLCSRPT",140,0)
HELP ;
"RTN","HLCSRPT",141,0)
 W !,"DATE AND TIME ARE BOTH REQUIRED"
"RTN","HLCSRPT",142,0)
 Q
"RTN","HLCSRPT",143,0)
 ;
"RTN","HLCSRPT",144,0)
SCREEN ;screen I/O parameteters
"RTN","HLCSRPT",145,0)
 S SPACE80=" "
"RTN","HLCSRPT",146,0)
 F I=1:1:80 S SPACE80=SPACE80_" "
"RTN","HLCSRPT",147,0)
 S SPACE=SPACE80
"RTN","HLCSRPT",148,0)
 S SPACE20=$E(SPACE,1,20),SPACE25=$E(SPACE,1,25),SPACE30=$E(SPACE,1,30)
"RTN","HLCSRPT",149,0)
 S X="IORVON;IORVOFF;IOINHI;IOINLOW" D ENDR^%ZISS
"RTN","HLCSRPT",150,0)
 S RVON=IORVON,RVOFF=IORVOFF,BLDON=IOINHI,BLDOFF=IOINLOW
"RTN","HLCSRPT",151,0)
 D KILL^%ZISS
"RTN","HLCSRPT",152,0)
 Q
"VER")
8.0^22.0
"BLD",10288,6)
^130
**END**
**END**

