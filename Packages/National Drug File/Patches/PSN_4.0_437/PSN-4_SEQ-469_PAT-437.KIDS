Released PSN*4*437 SEQ #469
Extracted from mail message
**KIDS**:PSN*4.0*437^

**INSTALL NAME**
PSN*4.0*437
"BLD",9950,0)
PSN*4.0*437^NATIONAL DRUG FILE^0^3151014^y
"BLD",9950,1,0)
^^4^4^3150813^^^
"BLD",9950,1,1,0)
Patch PSN*4.0*437 addresses the following issue:
"BLD",9950,1,2,0)
 
"BLD",9950,1,3,0)
In preparation for the VA's transition from IPv4 to IPv6 the National 
"BLD",9950,1,4,0)
Drug File (NDF) package will require modifications to make it IPv6 ready.
"BLD",9950,4,0)
^9.64PA^^
"BLD",9950,6.3)
8
"BLD",9950,"INI")

"BLD",9950,"INID")
^^
"BLD",9950,"KRN",0)
^9.67PA^779.2^20
"BLD",9950,"KRN",.4,0)
.4
"BLD",9950,"KRN",.401,0)
.401
"BLD",9950,"KRN",.402,0)
.402
"BLD",9950,"KRN",.403,0)
.403
"BLD",9950,"KRN",.5,0)
.5
"BLD",9950,"KRN",.84,0)
.84
"BLD",9950,"KRN",3.6,0)
3.6
"BLD",9950,"KRN",3.8,0)
3.8
"BLD",9950,"KRN",9.2,0)
9.2
"BLD",9950,"KRN",9.8,0)
9.8
"BLD",9950,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",9950,"KRN",9.8,"NM",1,0)
PSNFDAMG^^0^B31921678
"BLD",9950,"KRN",9.8,"NM","B","PSNFDAMG",1)

"BLD",9950,"KRN",19,0)
19
"BLD",9950,"KRN",19.1,0)
19.1
"BLD",9950,"KRN",101,0)
101
"BLD",9950,"KRN",409.61,0)
409.61
"BLD",9950,"KRN",771,0)
771
"BLD",9950,"KRN",779.2,0)
779.2
"BLD",9950,"KRN",870,0)
870
"BLD",9950,"KRN",8989.51,0)
8989.51
"BLD",9950,"KRN",8989.52,0)
8989.52
"BLD",9950,"KRN",8994,0)
8994
"BLD",9950,"KRN","B",.4,.4)

"BLD",9950,"KRN","B",.401,.401)

"BLD",9950,"KRN","B",.402,.402)

"BLD",9950,"KRN","B",.403,.403)

"BLD",9950,"KRN","B",.5,.5)

"BLD",9950,"KRN","B",.84,.84)

"BLD",9950,"KRN","B",3.6,3.6)

"BLD",9950,"KRN","B",3.8,3.8)

"BLD",9950,"KRN","B",9.2,9.2)

"BLD",9950,"KRN","B",9.8,9.8)

"BLD",9950,"KRN","B",19,19)

"BLD",9950,"KRN","B",19.1,19.1)

"BLD",9950,"KRN","B",101,101)

"BLD",9950,"KRN","B",409.61,409.61)

"BLD",9950,"KRN","B",771,771)

"BLD",9950,"KRN","B",779.2,779.2)

"BLD",9950,"KRN","B",870,870)

"BLD",9950,"KRN","B",8989.51,8989.51)

"BLD",9950,"KRN","B",8989.52,8989.52)

"BLD",9950,"KRN","B",8994,8994)

"BLD",9950,"QDEF")
^^^^NO^^^^NO^^YES
"BLD",9950,"QUES",0)
^9.62^^
"BLD",9950,"REQB",0)
^9.611^1^1
"BLD",9950,"REQB",1,0)
PSN*4.0*264^2
"BLD",9950,"REQB","B","PSN*4.0*264",1)

"MBREQ")
0
"PKG",479,-1)
1^1
"PKG",479,0)
NATIONAL DRUG FILE^PSN^This is the National Drug File Package V 3.16
"PKG",479,20,0)
^9.402P^^
"PKG",479,22,0)
^9.49I^1^1
"PKG",479,22,1,0)
4.0
"PKG",479,22,1,"PAH",1,0)
437^3151014
"PKG",479,22,1,"PAH",1,1,0)
^^4^4^3151014
"PKG",479,22,1,"PAH",1,1,1,0)
Patch PSN*4.0*437 addresses the following issue:
"PKG",479,22,1,"PAH",1,1,2,0)
 
"PKG",479,22,1,"PAH",1,1,3,0)
In preparation for the VA's transition from IPv4 to IPv6 the National 
"PKG",479,22,1,"PAH",1,1,4,0)
Drug File (NDF) package will require modifications to make it IPv6 ready.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSNFDAMG")
0^1^B31921678^B31156358
"RTN","PSNFDAMG",1,0)
PSNFDAMG ;BIR/DMA - On-Demand FDA Med Guide Display ; 14 Oct 2015  8:26 AM
"RTN","PSNFDAMG",2,0)
 ;;4.0;NATIONAL DRUG FILE;**108,263,264,437**; 30 Oct 98;Build 8
"RTN","PSNFDAMG",3,0)
 ;Reference to ^PS(59.7 supported by DBIA #2613
"RTN","PSNFDAMG",4,0)
 ;
"RTN","PSNFDAMG",5,0)
EN(VAPRDIEN) ; Entry point for FDA Med Guide On-Demand Printing
"RTN","PSNFDAMG",6,0)
 N FDAMGFN,FDAMGURL,PCURL,STATUS,X,PSNIP
"RTN","PSNFDAMG",7,0)
 S FDAMGFN=$$FDAMG^PSNAPIS(VAPRDIEN)
"RTN","PSNFDAMG",8,0)
 I FDAMGFN="" D  Q
"RTN","PSNFDAMG",9,0)
 . W !!,"There is no FDA Medication Guide associated with this medication.",!
"RTN","PSNFDAMG",10,0)
 . D PAUSE
"RTN","PSNFDAMG",11,0)
 ;
"RTN","PSNFDAMG",12,0)
 W !!,"The following URL provides the link to the FDA Medication Guide associated"
"RTN","PSNFDAMG",13,0)
 W !,"with this medication. Thin Client users: copy/paste the URL below into a"
"RTN","PSNFDAMG",14,0)
 W !,"browser to access the FDA Medication Guide for this drug:"
"RTN","PSNFDAMG",15,0)
 W !!
"RTN","PSNFDAMG",16,0)
 ;
"RTN","PSNFDAMG",17,0)
 ; Concatenating the Web Server URL to the FDA Med Guide file name
"RTN","PSNFDAMG",18,0)
 S FDAMGURL=$$GET1^DIQ(59.7,1,100)_FDAMGFN
"RTN","PSNFDAMG",19,0)
 ;
"RTN","PSNFDAMG",20,0)
 D PRTURL(FDAMGURL)
"RTN","PSNFDAMG",21,0)
 ;
"RTN","PSNFDAMG",22,0)
 S PSNIP=$S($G(IO("IP"))'="":IO("IP"),1:"127.0.0.1")
"RTN","PSNFDAMG",23,0)
 I $$VERSION^XLFIPV S PSNIP="["_$$CONVERT^XLFIPV(PSNIP)_"]"
"RTN","PSNFDAMG",24,0)
 S PCURL="http://"_PSNIP_":8091/viewmg="
"RTN","PSNFDAMG",25,0)
 ;
"RTN","PSNFDAMG",26,0)
 W !!,"Please wait...",!
"RTN","PSNFDAMG",27,0)
 ;
"RTN","PSNFDAMG",28,0)
 ;Invoking Kernel HTTP Toolkit
"RTN","PSNFDAMG",29,0)
 S STATUS=$$GETURL^XTHC10(PCURL_FDAMGURL)
"RTN","PSNFDAMG",30,0)
 ;
"RTN","PSNFDAMG",31,0)
 I +STATUS'=200 D
"RTN","PSNFDAMG",32,0)
 . W !,"The system is unable to display FDA Med Guide automatically."
"RTN","PSNFDAMG",33,0)
 . W !
"RTN","PSNFDAMG",34,0)
 . W !,"The FDA Medication Guide will not automatically open on Thin Client and some"
"RTN","PSNFDAMG",35,0)
 . W !,"types of encrypted sessions. If you do not believe this is the reason contact"
"RTN","PSNFDAMG",36,0)
 . W !,"your local technical support for assistance."
"RTN","PSNFDAMG",37,0)
 . W !
"RTN","PSNFDAMG",38,0)
 . W !,"You can copy/paste the link above into your browser's address bar to retrieve"
"RTN","PSNFDAMG",39,0)
 . W !,"the FDA Medication Guide."
"RTN","PSNFDAMG",40,0)
 . W !
"RTN","PSNFDAMG",41,0)
 ;
"RTN","PSNFDAMG",42,0)
 D PAUSE
"RTN","PSNFDAMG",43,0)
 Q
"RTN","PSNFDAMG",44,0)
 ;
"RTN","PSNFDAMG",45,0)
PAUSE ;
"RTN","PSNFDAMG",46,0)
 N DIR
"RTN","PSNFDAMG",47,0)
 S DIR("A")="Enter RETURN to continue, '?' for HELP, or '^' to exit",DIR(0)="E"
"RTN","PSNFDAMG",48,0)
 S DIR("?")="^D HELP^PSNFDAMG("""_$G(FDAMGURL)_""")" D ^DIR
"RTN","PSNFDAMG",49,0)
 Q
"RTN","PSNFDAMG",50,0)
 ;
"RTN","PSNFDAMG",51,0)
HELP(MGURL) ; Help Text
"RTN","PSNFDAMG",52,0)
 N DIR,DIRUT,DIROUT
"RTN","PSNFDAMG",53,0)
 W !,"When unable to get the FDA Medication Guide to display, review the following"
"RTN","PSNFDAMG",54,0)
 W !,"suggestion(s) for troubleshooting potential problems:"
"RTN","PSNFDAMG",55,0)
 W !
"RTN","PSNFDAMG",56,0)
 I $G(MGURL)'="" D
"RTN","PSNFDAMG",57,0)
 . W !,"1) The browser did not open automatically. This may be due to the following:"
"RTN","PSNFDAMG",58,0)
 . W !,"   - You might be connected to VistA via Thin Client or an encrypted session"
"RTN","PSNFDAMG",59,0)
 . W !,"     that prevents the FDA Med Guide from automatically displaying. Please"
"RTN","PSNFDAMG",60,0)
 . W !,"     copy and paste the URL link below into your browser's address bar to"
"RTN","PSNFDAMG",61,0)
 . W !,"     retrieve the FDA Medication Guide:"
"RTN","PSNFDAMG",62,0)
 . W !!  D PRTURL(MGURL) W !
"RTN","PSNFDAMG",63,0)
 . W !,"   - The computer might not have the required Java software component"
"RTN","PSNFDAMG",64,0)
 . W !,"     installed or the software might not be functioning properly. Please,"
"RTN","PSNFDAMG",65,0)
 . W !,"     contact technical support for assistance."
"RTN","PSNFDAMG",66,0)
 . W !
"RTN","PSNFDAMG",67,0)
 . S DIR("A")="Enter RETURN to continue" D PAUSE^VALM1 Q:($G(DIRUT)!$G(DIROUT))
"RTN","PSNFDAMG",68,0)
 . ;
"RTN","PSNFDAMG",69,0)
 . W !,"2) When doing a copy/paste of the link into the browser's address and an HTTP"
"RTN","PSNFDAMG",70,0)
 . W !,"   404 - File Not Found error is received. This may be due to the following:"
"RTN","PSNFDAMG",71,0)
 . W !,"   - A common issue exists when the link is displayed in two lines in the"
"RTN","PSNFDAMG",72,0)
 . W !,"     terminal screen. When you copy both lines at the same time and paste it"
"RTN","PSNFDAMG",73,0)
 . W !,"     into the browser's address, the second line is ignored by the browser"
"RTN","PSNFDAMG",74,0)
 . W !,"     resulting in a 'broken' link. To resolve this issue, copy and paste one"
"RTN","PSNFDAMG",75,0)
 . W !,"     line at a time from the terminal screen into the browser's address to"
"RTN","PSNFDAMG",76,0)
 . W !,"     make sure the complete link is used."
"RTN","PSNFDAMG",77,0)
 . W !,"   - The FDA Medication Guide Server may be down at the moment. Please, wait"
"RTN","PSNFDAMG",78,0)
 . W !,"     a few minutes and try again. If the problem persists, contact technical"
"RTN","PSNFDAMG",79,0)
 . W !,"     support for assistance."
"RTN","PSNFDAMG",80,0)
 . ;
"RTN","PSNFDAMG",81,0)
 . W !!,"3) The browser opened automatically, however you receive an HTTP 404 - File"
"RTN","PSNFDAMG",82,0)
 . W !,"   Not Found error. This may be due to the following:"
"RTN","PSNFDAMG",83,0)
 . W !,"   - The FDA Medication Guide Server may be down at the moment. Please, wait"
"RTN","PSNFDAMG",84,0)
 . W !,"     a few minutes and try again. If the problem persists, contact technical"
"RTN","PSNFDAMG",85,0)
 . W !,"     support for assistance."
"RTN","PSNFDAMG",86,0)
 . W !
"RTN","PSNFDAMG",87,0)
 E  D
"RTN","PSNFDAMG",88,0)
 . W !,"1) If no FDA Medication Guide exists for a product that you believe should"
"RTN","PSNFDAMG",89,0)
 . W !,"   have one, confirm that one is required by visiting the FDA website"
"RTN","PSNFDAMG",90,0)
 . W !,"   (www.fda.gov). If one is required, log a support ticket to request its"
"RTN","PSNFDAMG",91,0)
 . W !,"   addition. Please understand that there may be a delay between the time"
"RTN","PSNFDAMG",92,0)
 . W !,"   that a new Medication Guide is posted to the FDA website and when it is"
"RTN","PSNFDAMG",93,0)
 . W !,"   made available in VistA through a National Drug File data update patch."
"RTN","PSNFDAMG",94,0)
 Q
"RTN","PSNFDAMG",95,0)
 ;
"RTN","PSNFDAMG",96,0)
PRTURL(FDAMGURL) ; Prints the FDA Med Guide URL
"RTN","PSNFDAMG",97,0)
 S X=$G(FDAMGURL) I $$LOW^XLFSTR($E(X,1,7))="http://" S X=$E(X,8,999)
"RTN","PSNFDAMG",98,0)
 W $E(X,1,80) I $L(X)>80 D
"RTN","PSNFDAMG",99,0)
 . F  Q:$E(X,81,999)=""  S X=$E(X,81,999) W !,$E(X,1,80)
"RTN","PSNFDAMG",100,0)
 Q
"VER")
8.0^22.0
"BLD",9950,6)
^469
**END**
**END**

