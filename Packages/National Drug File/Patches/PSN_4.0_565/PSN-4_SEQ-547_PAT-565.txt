$TXT Created by               at ROR1S1.AAC.DOMAIN.EXT  (KIDS) on Thursday, 08/23/18 at 08:45
=============================================================================
Run Date: NOV 15, 2018                     Designation: PSN*4*565
Package : PSN - NATIONAL DRUG FILE            Priority: Mandatory
Version : 4       SEQ #547                      Status: Released
                  Compliance Date: DEC 15, 2018
=============================================================================

Associated patches: (v)PSN*4*563   <<= must be installed BEFORE `PSN*4*565'

Subject: GCNSEQNO FIELD,PPS-N EMAIL ADDRESS,HAZARDOUS WASTE

Category: 
  - Routine

Description:
============

  
 This patch will resolve the following issues.
  
 1. Unable to do remote order checks where the remote drug is now inactive 
    and the GCNSEQNO is blank.
  
 2. PPS-N VistA Email FROM Address requires update.
     
 3. Hazardous waste file causing error on Vista side.  
  
  
 Defect Tracking System Ticket(s) & Overview:
 --------------------------------------------
 INC1229364 - Unable to do remote order checks where the remote drug is now
              inactive and the GCNSEQNO is blank
 INC1436473 - PPS-N VistA Email FROM Address requires update
 INC1719552 - Hazardous waste file causing error on Vista side
  
  
 1. INC1229364 - Unable to do remote order checks where the remote drug is 
                 now inactive and the GCNSEQNO is blank.
 Problem: 
 ========
 It was reported that upon installation of the PPS-N .DAT file, the 
 GCNSEQNO field (#11) of the VA product file (#50.68) was getting deleted 
 for those items which were not updated or changed by the new .DAT file. 
 The GCNSEQNO field value is necessary for the system to perform enhanced 
 order checks (MOCHA). 
  
  
 Resolution:
 ===========
 This patch fixes the PPS-N data update process to prevent deletion of the 
 GCNSEQNO field (#11) of the VA PRODUCT file (#50.68) for the products 
 that are not included in the .DAT file. 
  
 This patch restores the GCNSEQNO field for all products that were affected
 with this issue. Routines PSNPPSNV, PSN565P1 and PSN565PO are modified.
  
  
 2. INC1436473 - PPS-N VistA Email FROM Address requires update 
  
 Problem: 
 ========
 It was noticed that one out of the set of many emails generated by the
 PPS-N ".DAT" file upload was reportedly sent by "NOREPLY.DOMAIN.EXT" instead
 of the intended "NOREPLY@DOMAIN.EXT".
  
 Resolution:
 ===========
 This patch updates the (.) to an at-sign (@) in GROUP+17^PSNPPSMG 
 routine for consistency. Routinse PSNPPSCL and PSNPPSMG are modified.
  
  
 3. INC1719552 - Hazardous waste file causing error on Vista side
  
 Problem:
 ========
 It was noticed that during PPS-N .DAT file installation, if the 
 installer does not have developer privilege and hazardous waste field are 
 to be updated, this will generate "'DELETE ACCESS' REQUIRED!!  <NOTHING 
 DELETED>" error.
  
 Resolution:
 ===========
 This patch fixes the error and normal user should install .DAT file with 
 no such error reported. Routine PSNPPSI3 is being modified.
  
  
 Test Sites:
 ===========
 Central Plains HCS 
  
  
  
 Pre/Post Installation Overview:  
 ------------------------------- 
 This patch includes post-installation processes within the routines
 PSN565PO and PSN565P1.
  
 The post-installation process performs the following actions:
 - Restore the missing GCNSEQNO field (#11) of the VA PRODUCT file 
  (#50.68) for the provided products
 - Generates a MailMan message with all updated entries and it will be sent
   to the patch installer as well as all "PSNMGR" key holders.
  
  
 The routines PSN565PO and PSN565P1 are deleted at the end of patch
 installation.
  
  
 Pre-Installation Instructions:
 ------------------------------ 
 This patch may be installed with users on the system although it is 
 recommended that it be installed during non-peak hours to minimize
 potential disruption to users.  This patch should take less than 2 
 minutes to install.
  
  
 Installation Instructions:
 --------------------------
 This patch should take less than 2 minutes to install.
  
 1. Choose the PackMan message containing this patch.
  
 2. Choose the INSTALL/CHECK MESSAGE PackMan option. 
  
 3. From the Kernel Installation and Distribution System Menu, select 
    the Installation Menu.  From this menu, you may elect to use the
    following options. When prompted for the INSTALL NAME enter the patch
    PSN*4.0*565.
  
   a. Backup a Transport Global - This option will create a backup 
      message of any routines exported with this patch. It will not backup
      any other changes such as DDs or templates.
  
   b. Compare Transport Global to Current System - This option will allow
      you to view all changes that will be made when this patch is
      installed.  (It compares all components of this patch routines,
      DDs, templates, etc.).
  
   c. Verify Checksums in Transport Global - This option will allow you 
      to ensure the integrity of the routines that are in the transport
      global.
  
 4. From the Installation Menu, select the Install Package(s) option 
    and choose the patch to install.
  
 5. When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
    NO//', respond 'NO'.
  
 6. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
    Protocols? NO//', respond 'NO'.
  
 7. If prompted 'Delay Install (Minutes): (0-60): 0//' respond 0. 
  
  
 Installation Verification
 -------------------------
 Successful installation can be verified by reviewing the first 2 lines of
 the routines contained in the patch. The second line will contain the 
 patch number in the [PATCH LIST] section.
   
 4.0;NATIONAL DRUG FILE;**[PATCH LIST]**; 30 Oct 98
    
 The option Calculate and Show Checksum Values [XTSUMBLD-CHECK] can be run 
 to compare the routine checksums to what is documented in the patch
 description.
  
  
 Back-out Procedures
 -------------------
 Back-out will be done only with the concurrence and participation of
 development team and appropriate VA site/region personnel. The decision to
 back-out or rollback software will be a joint decision between development
 team, VA site/region personnel and other appropriate VA personnel.
  
 Prior to installing an updated KIDS package, the site/region should have
 saved a backup of the routines in a mail message using the Backup a
 Transport Global [XPD BACKUP] menu option (this is done at time of 
 install). The message containing the backup routines can be loaded with
 the "Xtract PackMan" function at the Message Action prompt. The Packman
 function "INSTALL/CHECK MESSAGE" is then used to install the backed up
 routines onto the VistA System.
  
  
 Validation of Roll Back Procedure
 ---------------------------------
 The Roll Back Procedure can be verified by printing the first 2 lines of 
 the PSN Routines contained in this patch using the option First Line
 Routine Print [XU FIRST LINE PRINT]. Once the routines contained in the
 PSN*4.0*565 patch have been rolled back, the first two lines of the
 Routines will no longer contain the designation of patch PSN*4.0*565 in
 the patch list section on line 2.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;4.0;NATIONAL DRUG FILE;**[Patch List]**; 30 Oct 98;Build 16

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSN565P1
    Before:       n/a   After:B168859524  **565**
Routine Name: PSN565PO
    Before:       n/a   After:B185112151  **565**
Routine Name: PSNPPSCL
    Before: B48571285   After: B48603605  **513,565**
Routine Name: PSNPPSI3
    Before: B48818890   After: B49256931  **513,565**
Routine Name: PSNPPSMG
    Before: B90560472   After: B90569826  **513,565**
Routine Name: PSNPPSNV
    Before:B182428423   After:B185469053  **513,563,565**
 
Routine list of preceding patches: 563

=============================================================================
User Information:
Entered By  :                               Date Entered  : JUL 25, 2018
Completed By:                               Date Completed: NOV 09, 2018
Released By :                               Date Released : NOV 15, 2018
=============================================================================


Packman Mail Message:
=====================

$END TXT
