Released PSJ*5*340 SEQ #297
Extracted from mail message
**KIDS**:PSJ*5.0*340^

**INSTALL NAME**
PSJ*5.0*340
"BLD",10539,0)
PSJ*5.0*340^INPATIENT MEDICATIONS^0^3171117^y
"BLD",10539,1,0)
^^10^10^3171016^^^
"BLD",10539,1,1,0)
This patch addresses one (1) issue:
"BLD",10539,1,2,0)
 
"BLD",10539,1,3,0)
1.  Orders in the Inpatient Pharmacy package may not have had their 
"BLD",10539,1,4,0)
    status updated to "EXPIRED", in the past, if the order STOP DATE/
"BLD",10539,1,5,0)
    TIME value matched the start time of the ORMTIME RUN background
"BLD",10539,1,6,0)
    job.  This happened because ORMTIME RUN and the pharmacy code 
"BLD",10539,1,7,0)
    compared the expiration time differently.
"BLD",10539,1,8,0)
 
"BLD",10539,1,9,0)
    This was corrected with patch PSJ*5*339, but a clean-up effort must
"BLD",10539,1,10,0)
    be undertaken to place the old/stopped orders into expired status.
"BLD",10539,4,0)
^9.64PA^^
"BLD",10539,6.3)
16
"BLD",10539,"ABPKG")
n
"BLD",10539,"INID")
^n
"BLD",10539,"INIT")
EN^PSJ5P340
"BLD",10539,"KRN",0)
^9.67PA^779.2^20
"BLD",10539,"KRN",.4,0)
.4
"BLD",10539,"KRN",.4,"NM",0)
^9.68A^^0
"BLD",10539,"KRN",.401,0)
.401
"BLD",10539,"KRN",.402,0)
.402
"BLD",10539,"KRN",.402,"NM",0)
^9.68A^^0
"BLD",10539,"KRN",.403,0)
.403
"BLD",10539,"KRN",.5,0)
.5
"BLD",10539,"KRN",.84,0)
.84
"BLD",10539,"KRN",3.6,0)
3.6
"BLD",10539,"KRN",3.8,0)
3.8
"BLD",10539,"KRN",3.8,"NM",0)
^9.68A^^0
"BLD",10539,"KRN",9.2,0)
9.2
"BLD",10539,"KRN",9.8,0)
9.8
"BLD",10539,"KRN",9.8,"NM",0)
^9.68A^2^1
"BLD",10539,"KRN",9.8,"NM",2,0)
PSJ5P340^^0^B40902281
"BLD",10539,"KRN",9.8,"NM","B","PSJ5P340",2)

"BLD",10539,"KRN",19,0)
19
"BLD",10539,"KRN",19.1,0)
19.1
"BLD",10539,"KRN",101,0)
101
"BLD",10539,"KRN",409.61,0)
409.61
"BLD",10539,"KRN",409.61,"NM",0)
^9.68A^^0
"BLD",10539,"KRN",771,0)
771
"BLD",10539,"KRN",779.2,0)
779.2
"BLD",10539,"KRN",870,0)
870
"BLD",10539,"KRN",870,"NM",0)
^9.68A^^0
"BLD",10539,"KRN",8989.51,0)
8989.51
"BLD",10539,"KRN",8989.51,"NM",0)
^9.68A^^0
"BLD",10539,"KRN",8989.52,0)
8989.52
"BLD",10539,"KRN",8989.52,"NM",0)
^9.68A^^
"BLD",10539,"KRN",8994,0)
8994
"BLD",10539,"KRN","B",.4,.4)

"BLD",10539,"KRN","B",.401,.401)

"BLD",10539,"KRN","B",.402,.402)

"BLD",10539,"KRN","B",.403,.403)

"BLD",10539,"KRN","B",.5,.5)

"BLD",10539,"KRN","B",.84,.84)

"BLD",10539,"KRN","B",3.6,3.6)

"BLD",10539,"KRN","B",3.8,3.8)

"BLD",10539,"KRN","B",9.2,9.2)

"BLD",10539,"KRN","B",9.8,9.8)

"BLD",10539,"KRN","B",19,19)

"BLD",10539,"KRN","B",19.1,19.1)

"BLD",10539,"KRN","B",101,101)

"BLD",10539,"KRN","B",409.61,409.61)

"BLD",10539,"KRN","B",771,771)

"BLD",10539,"KRN","B",779.2,779.2)

"BLD",10539,"KRN","B",870,870)

"BLD",10539,"KRN","B",8989.51,8989.51)

"BLD",10539,"KRN","B",8989.52,8989.52)

"BLD",10539,"KRN","B",8994,8994)

"BLD",10539,"QDEF")
^^^^NO^^^^^^NO
"BLD",10539,"QUES",0)
^9.62^^
"BLD",10539,"REQB",0)
^9.611^^0
"INIT")
EN^PSJ5P340
"MBREQ")
0
"PKG",471,-1)
1^1
"PKG",471,0)
INPATIENT MEDICATIONS^PSJ^UNIT DOSE AND IVS
"PKG",471,20,0)
^9.402P^^
"PKG",471,22,0)
^9.49I^1^1
"PKG",471,22,1,0)
5.0^2971215^2990325^66481
"PKG",471,22,1,"PAH",1,0)
340^3171117
"PKG",471,22,1,"PAH",1,1,0)
^^10^10^3171117
"PKG",471,22,1,"PAH",1,1,1,0)
This patch addresses one (1) issue:
"PKG",471,22,1,"PAH",1,1,2,0)
 
"PKG",471,22,1,"PAH",1,1,3,0)
1.  Orders in the Inpatient Pharmacy package may not have had their 
"PKG",471,22,1,"PAH",1,1,4,0)
    status updated to "EXPIRED", in the past, if the order STOP DATE/
"PKG",471,22,1,"PAH",1,1,5,0)
    TIME value matched the start time of the ORMTIME RUN background
"PKG",471,22,1,"PAH",1,1,6,0)
    job.  This happened because ORMTIME RUN and the pharmacy code 
"PKG",471,22,1,"PAH",1,1,7,0)
    compared the expiration time differently.
"PKG",471,22,1,"PAH",1,1,8,0)
 
"PKG",471,22,1,"PAH",1,1,9,0)
    This was corrected with patch PSJ*5*339, but a clean-up effort must
"PKG",471,22,1,"PAH",1,1,10,0)
    be undertaken to place the old/stopped orders into expired status.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSJ5P340")
0^2^B40902281^n/a
"RTN","PSJ5P340",1,0)
PSJ5P340 ;PAW - Patch 340 Post Install Routine;4/25/2017
"RTN","PSJ5P340",2,0)
 ;;5.0;INPATIENT MEDICATIONS;**340**;DEC 1997;Build 16
"RTN","PSJ5P340",3,0)
 ;
"RTN","PSJ5P340",4,0)
 ;Reference to ^PS(55 is supported by DBIA# 2191.
"RTN","PSJ5P340",5,0)
 ;
"RTN","PSJ5P340",6,0)
 ;This post-installation routine will identify ACTIVE UD and IV orders with a
"RTN","PSJ5P340",7,0)
 ;STOP DATE prior to today.  It will then change the order status to EXPIRED.
"RTN","PSJ5P340",8,0)
 Q
"RTN","PSJ5P340",9,0)
 ;
"RTN","PSJ5P340",10,0)
EN ; Begin post-installation routine 
"RTN","PSJ5P340",11,0)
 I $G(DUZ)="" W !,"Your DUZ is not defined.  It must be defined to run this routine." Q
"RTN","PSJ5P340",12,0)
 N NAMSP,PATCH,JOBN,ZTSK,ZTRTN,ZTIO,ZTDTH,ZTDESC,Y,ZTQUEUED,ZTREQ,ZTSAVE,CNT,SBJM
"RTN","PSJ5P340",13,0)
 S NAMSP="PSJ5P340"
"RTN","PSJ5P340",14,0)
 S JOBN="PSJ*5.0*340 Post-Installation"
"RTN","PSJ5P340",15,0)
 S PATCH="PSJ*5.0*340"
"RTN","PSJ5P340",16,0)
 S Y=$$NOW^XLFDT S ZTDTH=$$FMTH^XLFDT(Y)
"RTN","PSJ5P340",17,0)
 D BMES^XPDUTL("=============================================================")
"RTN","PSJ5P340",18,0)
 D MES^XPDUTL("Queuing background job for "_JOBN_"...")
"RTN","PSJ5P340",19,0)
 D MES^XPDUTL("Start time: "_$$HTE^XLFDT(ZTDTH))
"RTN","PSJ5P340",20,0)
 D MES^XPDUTL("A MailMan message will be sent to the installer upon Post")
"RTN","PSJ5P340",21,0)
 D MES^XPDUTL("Install Completion.  This may take an hour or more, depending")
"RTN","PSJ5P340",22,0)
 D MES^XPDUTL("upon site size.")
"RTN","PSJ5P340",23,0)
 D MES^XPDUTL("==============================================================")
"RTN","PSJ5P340",24,0)
 ;
"RTN","PSJ5P340",25,0)
 S ZTRTN="ENQN^"_NAMSP,ZTIO=""
"RTN","PSJ5P340",26,0)
 S (SBJM,ZTDESC)="Background job for "_JOBN
"RTN","PSJ5P340",27,0)
 S ZTSAVE("JOBN")="",ZTSAVE("ZTDTH")="",ZTSAVE("DUZ")="",ZTSAVE("SBJM")=""
"RTN","PSJ5P340",28,0)
 D ^%ZTLOAD
"RTN","PSJ5P340",29,0)
 D:$D(ZTSK)
"RTN","PSJ5P340",30,0)
 . D MES^XPDUTL("*** Task #"_ZTSK_" Queued! ***")
"RTN","PSJ5P340",31,0)
 . D BMES^XPDUTL("")
"RTN","PSJ5P340",32,0)
 . S ZTSAVE("ZTSK")=""
"RTN","PSJ5P340",33,0)
 D BMES^XPDUTL("")
"RTN","PSJ5P340",34,0)
 K XPDQUES
"RTN","PSJ5P340",35,0)
 Q
"RTN","PSJ5P340",36,0)
 ;
"RTN","PSJ5P340",37,0)
ENQN N DFN,CNT,ORSTA,ORSTOP,PSGPO,PSIVACT,PSJCOR,PSJCREAT,PSJEXPR,PSJPO,PSJSTART,STATUS,UIEN,UIEN1,UDIV,UDIV1
"RTN","PSJ5P340",38,0)
 D NOW^%DTC S PSJSTART=$E(%,1,12),PSJCREAT=$E(%,1,7),PSJEXPR=$$FMADD^XLFDT(PSJCREAT,60,0,0,0)
"RTN","PSJ5P340",39,0)
 K ^XTMP("PSJ5P340",$J),^TMP("PSJ5P340R",$J)
"RTN","PSJ5P340",40,0)
 S (CNT,DFN)=0
"RTN","PSJ5P340",41,0)
 F  S DFN=$O(^PS(55,DFN)) Q:DFN=""  D UD,IV
"RTN","PSJ5P340",42,0)
 I CNT'=0 D UPDATE
"RTN","PSJ5P340",43,0)
 D STOP
"RTN","PSJ5P340",44,0)
 Q
"RTN","PSJ5P340",45,0)
 ;
"RTN","PSJ5P340",46,0)
UD ; Process Unit Dose Orders
"RTN","PSJ5P340",47,0)
 S UIEN=""
"RTN","PSJ5P340",48,0)
 F  S UIEN=$O(^PS(55,DFN,5,UIEN)) Q:UIEN=""  D
"RTN","PSJ5P340",49,0)
 . S ORSTA=$S($P($G(^PS(55,DFN,5,UIEN,0)),U,9)="A":1,1:0)
"RTN","PSJ5P340",50,0)
 . S ORSTOP=($P($G(^PS(55,DFN,5,UIEN,2)),U,4))
"RTN","PSJ5P340",51,0)
 . I ORSTA=1,ORSTOP'>DT S ^XTMP("PSJ5P340",$J,DFN,"UD",UIEN)="",CNT=CNT+1
"RTN","PSJ5P340",52,0)
 Q
"RTN","PSJ5P340",53,0)
 ;
"RTN","PSJ5P340",54,0)
IV ; Process IV Orders
"RTN","PSJ5P340",55,0)
 S UIEN=""
"RTN","PSJ5P340",56,0)
 F  S UIEN=$O(^PS(55,DFN,"IV",UIEN)) Q:UIEN=""  D
"RTN","PSJ5P340",57,0)
 . S ORSTA=$S($P($G(^PS(55,DFN,"IV",UIEN,0)),U,17)="A":1,1:0)
"RTN","PSJ5P340",58,0)
 . S ORSTOP=($P($G(^PS(55,DFN,"IV",UIEN,0)),U,3))
"RTN","PSJ5P340",59,0)
 . I ORSTA=1,ORSTOP'>DT S ^XTMP("PSJ5P340",$J,DFN,"IV",UIEN)="",CNT=CNT+1
"RTN","PSJ5P340",60,0)
 Q
"RTN","PSJ5P340",61,0)
 ; 
"RTN","PSJ5P340",62,0)
UPDATE ; Loop to Update Status on Unit Dose and IV Orders 
"RTN","PSJ5P340",63,0)
 S DFN="" F  S DFN=$O(^XTMP("PSJ5P340",$J,DFN)) Q:DFN=""  D
"RTN","PSJ5P340",64,0)
 . S UDIV="" F  S UDIV=$O(^XTMP("PSJ5P340",$J,DFN,UDIV)) Q:UDIV=""  D
"RTN","PSJ5P340",65,0)
 .. S UIEN="" F  S UIEN=$O(^XTMP("PSJ5P340",$J,DFN,UDIV,UIEN)) Q:UIEN=""  D
"RTN","PSJ5P340",66,0)
 ... D UPDATE1
"RTN","PSJ5P340",67,0)
 Q
"RTN","PSJ5P340",68,0)
 ;
"RTN","PSJ5P340",69,0)
UPDATE1 ; Update Status on Unit Dose and IV Orders
"RTN","PSJ5P340",70,0)
 S UDIV1=$S(UDIV="UD":5,1:"IV")
"RTN","PSJ5P340",71,0)
 I $G(^PS(55,DFN,UDIV1,UIEN,0))="" Q  ;This record is very corrupt and should not be updated.
"RTN","PSJ5P340",72,0)
 S PSJCOR=0
"RTN","PSJ5P340",73,0)
 I '$D(^PS(55,DFN,UDIV1,UIEN,2)) S PSJCOR=1  ;Set incomplete record indicator.
"RTN","PSJ5P340",74,0)
 I PSJCOR,UDIV="UD" D CORRUPT Q  ;Update manually, due to corrupt data. 
"RTN","PSJ5P340",75,0)
 S STATUS="E",(PSGPO,PSIVACT)=1,DA=UIEN,DA(1)=DFN,DIE=$S(UDIV="IV":"^PS(55,"_DA(1)_",""IV"",",1:"^PS(55,"_DA(1)_",5,"),DR=$S(UDIV="IV":"100////E",1:"28////E") D ^DIE
"RTN","PSJ5P340",76,0)
 S UIEN1=$S(UDIV="IV":UIEN_"V",1:UIEN_"U")
"RTN","PSJ5P340",77,0)
 D EN1^PSJHL2(DFN,"SC",UIEN1)
"RTN","PSJ5P340",78,0)
 Q
"RTN","PSJ5P340",79,0)
 ;
"RTN","PSJ5P340",80,0)
CORRUPT ; Corrupt Unit Dose Data Found
"RTN","PSJ5P340",81,0)
 N PSJORD
"RTN","PSJ5P340",82,0)
 S $P(^PS(55,DFN,UDIV1,UIEN,0),"^",9)="E"
"RTN","PSJ5P340",83,0)
 K DIK,DA S DA(1)=DFN,DA=UIEN,DIK="^PS(55,"_DFN_",5,",DIK(1)="28^AL28^AOERRS" D EN2^DIK K DIK
"RTN","PSJ5P340",84,0)
 S ^XTMP("PSJ5P340",$J,DFN,UDIV,UIEN)=""
"RTN","PSJ5P340",85,0)
 S PSJORD=$P($G(^PS(55,DFN,UDIV1,UIEN,0)),"^",21)
"RTN","PSJ5P340",86,0)
 I PSJORD'="" S ^XTMP("PSJ5P340C",DFN,UDIV,UIEN)=PSJORD  ;Log corrupt data if link found to Order file
"RTN","PSJ5P340",87,0)
 Q
"RTN","PSJ5P340",88,0)
 ;
"RTN","PSJ5P340",89,0)
STOP K DA,DIE,DR,NUM,CPS,CPSX,DFN,ORSTA,ORSTOP,UDIV,UIEN,UIEN1,%
"RTN","PSJ5P340",90,0)
 D XMAIL1
"RTN","PSJ5P340",91,0)
 D XMAIL2
"RTN","PSJ5P340",92,0)
 S:$D(^XTMP("PSJ5P340")) ^XTMP("PSJ5P340",0)=PSJEXPR_"^"_PSJCREAT
"RTN","PSJ5P340",93,0)
 S:$D(^XTMP("PSJ5P340C")) ^XTMP("PSJ5P340C",0)=PSJEXPR_"^"_PSJCREAT
"RTN","PSJ5P340",94,0)
 Q
"RTN","PSJ5P340",95,0)
 ;
"RTN","PSJ5P340",96,0)
XMAIL1 ; Post-installation Notification for Installer
"RTN","PSJ5P340",97,0)
 K PSG,XMY S XMDUZ=.5,XMSUB="PATCH PSJ*5.0*340 INSTALLATION COMPLETE",XMTEXT="PSG(",XMY(DUZ)="" D NOW^%DTC S Y=% X ^DD("DD")
"RTN","PSJ5P340",98,0)
 S PSG(1,0)="  -- INSTALLER --"
"RTN","PSJ5P340",99,0)
 S PSG(2,0)="  The post-install for PSJ*5.0*340 completed "_Y_"."
"RTN","PSJ5P340",100,0)
 D ^XMD
"RTN","PSJ5P340",101,0)
 Q
"RTN","PSJ5P340",102,0)
 ;
"RTN","PSJ5P340",103,0)
XMAIL2 ; Post-installation Notification for Users 
"RTN","PSJ5P340",104,0)
 N DRG,PSJX,PSJORD
"RTN","PSJ5P340",105,0)
 S XMSUB="PSJ*5.0*340 Pharmacy Expired Order Status Change"
"RTN","PSJ5P340",106,0)
 S XMDUZ=.5
"RTN","PSJ5P340",107,0)
 S ^TMP("PSJ5P340R",$J,1)=" Patch PSJ*5.0*340 post-installation routine has updated"
"RTN","PSJ5P340",108,0)
 S ^TMP("PSJ5P340R",$J,2)=" the status of "_CNT_" stopped / expired pharmacy patient"
"RTN","PSJ5P340",109,0)
 S ^TMP("PSJ5P340R",$J,3)=" orders from ACTIVE to EXPIRED."
"RTN","PSJ5P340",110,0)
 S ^TMP("PSJ5P340R",$J,4)=" "
"RTN","PSJ5P340",111,0)
 S ^TMP("PSJ5P340R",$J,5)=" Information identifying orders that have had status"
"RTN","PSJ5P340",112,0)
 S ^TMP("PSJ5P340R",$J,6)=" updates from ACTIVE to EXPIRED will remain in"
"RTN","PSJ5P340",113,0)
 S ^TMP("PSJ5P340R",$J,7)=" ^XTMP(""PSJ5P340"",$J,DFN,IV/UD,UIEN) for 60 days."
"RTN","PSJ5P340",114,0)
 S ^TMP("PSJ5P340R",$J,8)=""
"RTN","PSJ5P340",115,0)
 S ^TMP("PSJ5P340R",$J,9)=" The following Pharmacy Patient file (#55) entries contain"
"RTN","PSJ5P340",116,0)
 S ^TMP("PSJ5P340R",$J,10)=" corrupt data and should be manually checked in FileMan."
"RTN","PSJ5P340",117,0)
 S ^TMP("PSJ5P340R",$J,11)=" You can use the Order File# to manually change the Order"
"RTN","PSJ5P340",118,0)
 S ^TMP("PSJ5P340R",$J,12)=" file (#100) STATUS field to EXPIRED via FileMan."
"RTN","PSJ5P340",119,0)
 S ^TMP("PSJ5P340R",$J,13)=""
"RTN","PSJ5P340",120,0)
 S ^TMP("PSJ5P340R",$J,14)=" DFN          Type   Order IEN   Order file#"
"RTN","PSJ5P340",121,0)
 S ^TMP("PSJ5P340R",$J,15)=" ----------   ----   ---------   -----------"
"RTN","PSJ5P340",122,0)
 S CNT=15
"RTN","PSJ5P340",123,0)
 S DFN="" F  S DFN=$O(^XTMP("PSJ5P340C",DFN)) Q:DFN=""  D
"RTN","PSJ5P340",124,0)
 . S UDIV="" F  S UDIV=$O(^XTMP("PSJ5P340C",DFN,UDIV)) Q:UDIV=""  D
"RTN","PSJ5P340",125,0)
 .. S UIEN="" F  S UIEN=$O(^XTMP("PSJ5P340C",DFN,UDIV,UIEN)) Q:UIEN=""  D
"RTN","PSJ5P340",126,0)
 ... S CNT=CNT+1
"RTN","PSJ5P340",127,0)
 ... S PSJORD=^XTMP("PSJ5P340C",DFN,UDIV,UIEN)
"RTN","PSJ5P340",128,0)
 ... S ^TMP("PSJ5P340R",$J,CNT)=" "_$J(DFN,10)_"   "_$J(UDIV,4)_"   "_$J(UIEN,9)_"   "_$J(PSJORD,11)
"RTN","PSJ5P340",129,0)
 S PSJX="" F  S PSJX=$O(^XUSEC("PSJI MGR",PSJX)) Q:'PSJX  S XMY(PSJX)=""
"RTN","PSJ5P340",130,0)
 S PSJX="" F  S PSJX=$O(^XUSEC("PSJU MGR",PSJX)) Q:'PSJX  S XMY(PSJX)=""
"RTN","PSJ5P340",131,0)
 S PSJX="" F  S PSJX=$O(^XUSEC("PSJU RPH",PSJX)) Q:'PSJX  S XMY(PSJX)=""
"RTN","PSJ5P340",132,0)
 S PSJX="" F  S PSJX=$O(^XUSEC("PSJ RPHARM",PSJX)) Q:'PSJX  S XMY(PSJX)=""
"RTN","PSJ5P340",133,0)
 S DRG=0 F  S DRG=$O(^XUSEC("PSNMGR",DRG)) Q:DRG'>0  S XMY(DRG)=""
"RTN","PSJ5P340",134,0)
 S XMY(DUZ)=""
"RTN","PSJ5P340",135,0)
 S XMTEXT="^TMP(""PSJ5P340R"",$J," N DIFROM D ^XMD
"RTN","PSJ5P340",136,0)
 K CNT,XMSUB,XMDUZ,XMY,XMTEXT,^TMP("PSJ5P340R",$J)
"RTN","PSJ5P340",137,0)
 Q
"RTN","PSJ5P340",138,0)
 ;
"VER")
8.0^22.2
"BLD",10539,6)
^297
**END**
**END**

