Released PSJ*5*302 SEQ #262
Extracted from mail message
**KIDS**:PSJ*5.0*302^

**INSTALL NAME**
PSJ*5.0*302
"BLD",9296,0)
PSJ*5.0*302^INPATIENT MEDICATIONS^0^3140327^y
"BLD",9296,1,0)
^^5^5^3140327^
"BLD",9296,1,1,0)
This patch will resolve the following issues in the Inpatient Medications 
"BLD",9296,1,2,0)
package:
"BLD",9296,1,3,0)
 
"BLD",9296,1,4,0)
-IV orders can be placed for deceased patient
"BLD",9296,1,5,0)
-Dose Limit problem for Day-of-the-Week schedules
"BLD",9296,4,0)
^9.64PA^^
"BLD",9296,6)
1^
"BLD",9296,6.3)
2
"BLD",9296,"KRN",0)
^9.67PA^779.2^20
"BLD",9296,"KRN",.4,0)
.4
"BLD",9296,"KRN",.401,0)
.401
"BLD",9296,"KRN",.402,0)
.402
"BLD",9296,"KRN",.403,0)
.403
"BLD",9296,"KRN",.5,0)
.5
"BLD",9296,"KRN",.84,0)
.84
"BLD",9296,"KRN",3.6,0)
3.6
"BLD",9296,"KRN",3.8,0)
3.8
"BLD",9296,"KRN",9.2,0)
9.2
"BLD",9296,"KRN",9.8,0)
9.8
"BLD",9296,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",9296,"KRN",9.8,"NM",1,0)
PSJOE0^^0^B26555549
"BLD",9296,"KRN",9.8,"NM",2,0)
PSGDL^^0^B14139634
"BLD",9296,"KRN",9.8,"NM","B","PSGDL",2)

"BLD",9296,"KRN",9.8,"NM","B","PSJOE0",1)

"BLD",9296,"KRN",19,0)
19
"BLD",9296,"KRN",19.1,0)
19.1
"BLD",9296,"KRN",101,0)
101
"BLD",9296,"KRN",409.61,0)
409.61
"BLD",9296,"KRN",771,0)
771
"BLD",9296,"KRN",779.2,0)
779.2
"BLD",9296,"KRN",870,0)
870
"BLD",9296,"KRN",8989.51,0)
8989.51
"BLD",9296,"KRN",8989.52,0)
8989.52
"BLD",9296,"KRN",8994,0)
8994
"BLD",9296,"KRN","B",.4,.4)

"BLD",9296,"KRN","B",.401,.401)

"BLD",9296,"KRN","B",.402,.402)

"BLD",9296,"KRN","B",.403,.403)

"BLD",9296,"KRN","B",.5,.5)

"BLD",9296,"KRN","B",.84,.84)

"BLD",9296,"KRN","B",3.6,3.6)

"BLD",9296,"KRN","B",3.8,3.8)

"BLD",9296,"KRN","B",9.2,9.2)

"BLD",9296,"KRN","B",9.8,9.8)

"BLD",9296,"KRN","B",19,19)

"BLD",9296,"KRN","B",19.1,19.1)

"BLD",9296,"KRN","B",101,101)

"BLD",9296,"KRN","B",409.61,409.61)

"BLD",9296,"KRN","B",771,771)

"BLD",9296,"KRN","B",779.2,779.2)

"BLD",9296,"KRN","B",870,870)

"BLD",9296,"KRN","B",8989.51,8989.51)

"BLD",9296,"KRN","B",8989.52,8989.52)

"BLD",9296,"KRN","B",8994,8994)

"BLD",9296,"QUES",0)
^9.62^^
"BLD",9296,"REQB",0)
^9.611^2^2
"BLD",9296,"REQB",1,0)
PSJ*5.0*275^2
"BLD",9296,"REQB",2,0)
PSJ*5.0*170^2
"BLD",9296,"REQB","B","PSJ*5.0*170",2)

"BLD",9296,"REQB","B","PSJ*5.0*275",1)

"MBREQ")
0
"PKG",221,-1)
1^1
"PKG",221,0)
INPATIENT MEDICATIONS^PSJ^UNIT DOSE AND IVS
"PKG",221,22,0)
^9.49I^1^1
"PKG",221,22,1,0)
5.0^2971215^2981113^1
"PKG",221,22,1,"PAH",1,0)
302^3140327^520736428
"PKG",221,22,1,"PAH",1,1,0)
^^5^5^3140327
"PKG",221,22,1,"PAH",1,1,1,0)
This patch will resolve the following issues in the Inpatient Medications 
"PKG",221,22,1,"PAH",1,1,2,0)
package:
"PKG",221,22,1,"PAH",1,1,3,0)
 
"PKG",221,22,1,"PAH",1,1,4,0)
-IV orders can be placed for deceased patient
"PKG",221,22,1,"PAH",1,1,5,0)
-Dose Limit problem for Day-of-the-Week schedules
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","PSGDL")
0^2^B14139634^B13848268
"RTN","PSGDL",1,0)
PSGDL ;BIR/CML3-CALCULATE STOP DATE/TIME WITH DOSE LIMIT ;27 Aug 98 / 8:47 AM
"RTN","PSGDL",2,0)
 ;;5.0;INPATIENT MEDICATIONS;**16,50,64,58,111,170,302**;16 DEC 97;Build 2
"RTN","PSGDL",3,0)
 ;
"RTN","PSGDL",4,0)
 ; Reference to ^PS(55 is supported by DBIA #2191.
"RTN","PSGDL",5,0)
 ;
"RTN","PSGDL",6,0)
EN ;
"RTN","PSGDL",7,0)
 K PSGDLS S ND2=^PS(53.1,DA,2) I $P(ND2,"^",5)!$P(ND2,"^",6) W " ...Dose Limit... " G ENGO
"RTN","PSGDL",8,0)
 G DONE
"RTN","PSGDL",9,0)
 ;
"RTN","PSGDL",10,0)
ENE ;
"RTN","PSGDL",11,0)
 S ND2=PSGSCH_"^"_PSGSD_"^^^"_PSGAT_"^"_PSGS0XT G ENGO
"RTN","PSGDL",12,0)
 ;
"RTN","PSGDL",13,0)
EN1 ;
"RTN","PSGDL",14,0)
 S ND2=$P(PSGNEDFD,"^",4)_"^"_PSGNESD_"^^^"_PSGS0Y_"^"_PSGS0XT G ENGO
"RTN","PSGDL",15,0)
 ;
"RTN","PSGDL",16,0)
EN2 ;
"RTN","PSGDL",17,0)
 K PSGDLS S ND2=^PS(55,DA(1),5,DA,2) I '$P(ND2,"^",5),'$P(ND2,"^",6) G DONE
"RTN","PSGDL",18,0)
 W " ...Dose Limit... "
"RTN","PSGDL",19,0)
 ;
"RTN","PSGDL",20,0)
ENGO ;
"RTN","PSGDL",21,0)
 S SCH=$P(ND2,"^")
"RTN","PSGDL",22,0)
 S ST=$S($D(PSGDLS):PSGDLS,1:$P(ND2,"^",2))
"RTN","PSGDL",23,0)
 S TS=$P(ND2,"^",5),MN=$P(ND2,"^",6)
"RTN","PSGDL",24,0)
 I $P(PSJSYSW0,U,5)=2 D
"RTN","PSGDL",25,0)
 . Q:'TS  S:TS'[$P(ST,".",2) $P(PSJSYSW0,U,5)=1 D
"RTN","PSGDL",26,0)
 .. S X=$G(PSGSD),%DT="T" D ^%DT I Y'=-1 N PSGSD S PSGSD=Y
"RTN","PSGDL",27,0)
 .. S X=$G(PSGFD),%DT="T" D ^%DT I Y'=-1 N PSGFD S PSGFD=Y
"RTN","PSGDL",28,0)
 .. I '$G(PSGSD) N PSGSD S PSGSD=$$DATE^PSJUTL2
"RTN","PSGDL",29,0)
 .. I '$G(PSGFD) N PSGFD S PSGFD=$$FMADD^XLFDT(PSGSD,30)
"RTN","PSGDL",30,0)
 .. N STRING,ND2,SCH,TS,MN S STRING=$G(PSGSD)_"^"_$G(PSGFD)_"^"_$G(PSGSCH)_"^"_$G(PSGST)_"^"_$G(PSGPDRG)_"^"_$G(PSGAT)
"RTN","PSGDL",31,0)
 .. I $G(PSGP) S ST=$$ENQ^PSJORP2(PSGP,STRING) S:'ST ST=$S($D(PSGDLS):PSGDLS,1:$P(ND2,"^",2))
"RTN","PSGDL",32,0)
 . S $P(PSJSYSW0,U,5)=2
"RTN","PSGDL",33,0)
 G MWF:SCH["@",DONE:'TS&'MN
"RTN","PSGDL",34,0)
 I 'TS S AM=MN*PSGDL,X=$$EN^PSGCT(ST,AM) G DONE
"RTN","PSGDL",35,0)
 S TM=$E(ST_"00000",9,8+$L($P(TS,"-")))
"RTN","PSGDL",36,0)
 F Q=1:1 Q:$P(TS,"-",Q)=""!(TM<$P(TS,"-",Q))
"RTN","PSGDL",37,0)
 S X=ST\1,C=0 F Q=Q:1 D:$P(TS,"-",Q)="" ADD S C=C+1 I C=PSGDL S X=X_"."_$P(TS,"-",Q) G DONE
"RTN","PSGDL",38,0)
 ;
"RTN","PSGDL",39,0)
MWF ; if schedule is similar to monday-wednesday-friday
"RTN","PSGDL",40,0)
 ;*302 - PSGDL changed to (PSGDL+1)
"RTN","PSGDL",41,0)
 S TS=$P(SCH,"@",2),SCH=$P(SCH,"@"),X=$P(ST,"."),C=0 D SCHK G:C=(PSGDL+1) DONE F Q=1:1 S X1=$P(ST,"."),X2=Q D C^%DTC S X1=X D DW^%DTC D CHK G:C=(PSGDL+1) DONE
"RTN","PSGDL",42,0)
SCHK S X1=X D DW^%DTC F Q=1:1:$L(SCH,"-") S WKD=$P(SCH,"-",Q) I WKD=$E(X,1,$L(WKD)) Q
"RTN","PSGDL",43,0)
 E  Q
"RTN","PSGDL",44,0)
 ;*302 - < changed to '>
"RTN","PSGDL",45,0)
 S TM=$E(ST_"00000",9,8+$L($P(TS,"-"))) F Q=1:1:$L(TS,"-") I TM'>$P(TS,"-",Q) S C=C+1 I C=(PSGDL+1) S X=X1_"."_$P(TS,"-",Q) Q
"RTN","PSGDL",46,0)
 Q
"RTN","PSGDL",47,0)
CHK F QQ=1:1:$L(SCH,"-") S WKD=$P(SCH,"-",QQ) I WKD=$E(X,1,$L(WKD)) D TS Q
"RTN","PSGDL",48,0)
 Q
"RTN","PSGDL",49,0)
TS F Q1=1:1:$L(TS,"-") S C=C+1 I C=(PSGDL+1) S X=X1_"."_$P(TS,"-",Q1) Q
"RTN","PSGDL",50,0)
 Q
"RTN","PSGDL",51,0)
 ;
"RTN","PSGDL",52,0)
DONE ;
"RTN","PSGDL",53,0)
 K %H,%T,%Y,MN,ND2,ND4,PSGDLS,PSGDL,Q1,QQ,SCH,TM,WKD,TS,X1,X2 Q
"RTN","PSGDL",54,0)
 ;
"RTN","PSGDL",55,0)
ADD ;
"RTN","PSGDL",56,0)
 S X1=$P(X,"."),X2=$S(MN&'(MN#1440):MN\1440,1:1) D C^%DTC S Q=1 Q
"RTN","PSGDL",57,0)
 ;
"RTN","PSGDL",58,0)
ENPREV ; when "P" is enter at start date
"RTN","PSGDL",59,0)
 W "REVIOUS" S (X,Y)=0 I '$D(PSGP)!'$D(PSGPDRG) G:$D(DA)[0 POUT S PSGP=$P($G(^PS(53.1,DA,0)),"^",15),PSGPDRG=+$G(^(.2)),Y=1 I 'PSGP!'PSGPDRG W:'PSGPDRG !?17,"Must have drug from formulary list." G POUT
"RTN","PSGDL",60,0)
 F Q=0:0 S Q=$O(^PS(53.1,"AC",PSGP,Q)) Q:'Q  I +$G(^PS(53.1,Q,.2))=PSGPDRG,$D(^PS(53.1,Q,2)),$P(^(2),"^",4)>X S X=$P(^(2),"^",4)
"RTN","PSGDL",61,0)
 F Q=0:0 S Q=$O(^PS(55,PSGP,5,"C",PSGPDRG,Q)) Q:'Q  I $D(^PS(55,PSGP,5,Q,2)),$P(^(2),"^",4)>X S X=$P(^(2),"^",4)
"RTN","PSGDL",62,0)
 W:'X !?17,"No other order found with this drug."
"RTN","PSGDL",63,0)
 ;
"RTN","PSGDL",64,0)
POUT ;
"RTN","PSGDL",65,0)
 K:'X X K:Y PSGPDRG,PSGP,Q Q
"RTN","PSGDL",66,0)
ENDL(SCH,DL) ;validate that dose limit should be allowed with this schedule
"RTN","PSGDL",67,0)
 ;and that the dose limit is a whole number
"RTN","PSGDL",68,0)
 I $G(SCH)="" Q 1
"RTN","PSGDL",69,0)
 I ",ON CALL,ON-CALL,ONCALL,"[(","_SCH_",")!($$ONE^PSJBCMA(DFN,"",SCH)="O") W " Dose limit invalid with this schedule" Q 0
"RTN","PSGDL",70,0)
 I DL'?1N.N W " Dose limit must be a whole number" Q 0
"RTN","PSGDL",71,0)
 Q 1
"RTN","PSJOE0")
0^1^B26555549^B26253829
"RTN","PSJOE0",1,0)
PSJOE0 ;BIR/CML3-INPATIENT PROFILE AND ORDER ENTRY ; 4/15/10 2:45pm
"RTN","PSJOE0",2,0)
 ;;5.0;INPATIENT MEDICATIONS;**47,56,110,133,162,241,267,275,302**;16 DEC 97;Build 2
"RTN","PSJOE0",3,0)
 ;
"RTN","PSJOE0",4,0)
 ; Reference to ^PS(51.2 is supported by DBIA 2178.
"RTN","PSJOE0",5,0)
 ; Reference to ^PS(55 is supported by DBIA 2191.
"RTN","PSJOE0",6,0)
 ; Reference to ^VA(200 is supported by DBIA 10060.
"RTN","PSJOE0",7,0)
 ; Reference to ^DIR is supported by DBIA 10026.
"RTN","PSJOE0",8,0)
 ;
"RTN","PSJOE0",9,0)
START ; print orders
"RTN","PSJOE0",10,0)
 W:X]"" $P("^PROFILE",X,2) D ENL^PSJO3 G:PSJOL="^" DONE Q:PSJOL="N"  K PSJPR S PSGOEAV=0,PSJNARC=1 D ^PSJO I 'PSJON Q
"RTN","PSJOE0",11,0)
 ;
"RTN","PSJOE0",12,0)
ENVW ; ask user to select or view any of the orders shown
"RTN","PSJOE0",13,0)
 S (PSGONC,PSGONR,PSGONV)=0,PSGLMT=PSJON S:$D(PSJPRF) PSGPRF=1 D ENASR^PSGON K PSGPRF
"RTN","PSJOE0",14,0)
 G:X["^" DONE I X]"" S PSGOEA=""
"RTN","PSJOE0",15,0)
 K PSJDLW
"RTN","PSJOE0",16,0)
 I  F PSJOE=1:1:PSGODDD S PSGOE=PSJOE F PSJOE1=1:1:$L(PSGODDD(PSJOE),",")-1 S PSJOE2=$P(PSGODDD(PSJOE),",",PSJOE1),(PSGORD,PSJORD)=^TMP("PSJON",$J,PSJOE2) G:$D(PSJDLW) DONE D 
"RTN","PSJOE0",17,0)
 .I PSJORD=+PSJORD N PSJO,PSJO1 S PSJO=PSJORD,PSJO1=0 F  S PSJO1=$O(^PS(53.1,"ACX",PSJO,PSJO1)) Q:'PSJO1  Q:PSGOEA["^"  Q:$D(PSJDLW)  S PSJORD=PSJO1_"P" D GODO S PSJORD=""
"RTN","PSJOE0",18,0)
 .Q:PSJORD=""  Q:PSGOEA["^"
"RTN","PSJOE0",19,0)
 .D GODO Q:PSGOEA["^"
"RTN","PSJOE0",20,0)
 Q
"RTN","PSJOE0",21,0)
 ;
"RTN","PSJOE0",22,0)
LMNEW(PSGP,PSJPROT) ;Entry point for new order entry from listman.
"RTN","PSJOE0",23,0)
 ; PSGP = DFN
"RTN","PSJOE0",24,0)
 ; PSJPROT=1:UD ONLY; 2:IV ONLY; 3:BOTH
"RTN","PSJOE0",25,0)
 ;
"RTN","PSJOE0",26,0)
 N PSJDEC D CKNEW Q:$G(PSJDEC)  N PSJUDPRF S PSJNEWOE=1
"RTN","PSJOE0",27,0)
 S PSGPTS=PSJPTS,PSGOEAV=$P(PSJSYSP0,U,9)&PSJSYSU,PSGOEDMR=$O(^PS(51.2,"B","ORAL",0)),PSGOEPR=$S($D(^PS(55,PSGP,5.1)):$P(^(5.1),"^",2),1:0),PSJORQF=0,PSJOEPF=""
"RTN","PSJOE0",28,0)
 I PSGOEPR>0,$D(^VA(200,+PSGOEPR,"PS")) S PSGOEPR=$S('$P(^("PS"),"^",4):PSGOEPR,($P(^("PS"),"^",4)<DT):0,1:PSGOEPR)
"RTN","PSJOE0",29,0)
 S:'PSGOEPR PSGOEPR=PSJPTSP
"RTN","PSJOE0",30,0)
 S PSJPCAF=$S($G(PSJPCAF):PSJPCAF,1:"1")
"RTN","PSJOE0",31,0)
 F PSJOE=0:0 Q:PSJORQF!('$P(PSJPCAF,"^",2)&(PSJPROT'>1))!('(PSJPCAF&(PSJPROT'=2))&(PSJPROT'>1))  D KILL^PSJBCMA5(+$G(PSJSYSP)) D:PSJPCAF&($P(PSJPCAF,"^",2))&(PSJPROT'=2) EN^PSJOE1 K PSGEFN,PSGOEF I PSJPROT>1 D ENIN^PSIVORE
"RTN","PSJOE0",32,0)
 Q
"RTN","PSJOE0",33,0)
 ;
"RTN","PSJOE0",34,0)
DONE ;
"RTN","PSJOE0",35,0)
 K PSG,PSGDL,PSGDLS,PSGDO,PSGDRG,PSGDRGN,PSGFD,PSGHSM,PSGMR,PSGMRN,PSGNEDFD,PSGNEFD,PSGNESD,PSGOES,PSGOPR,PSGORD,PSGOROE1,PSGPR,PSGPRN,PSGS0XT,PSGS0Y,PSGSCH,PSGSD,PSGSI,PSGSM,PSGST,PSGSTN,PSGUD,PSGX,PSJDLW,PSJLM,PSJNARC,PSIVAC
"RTN","PSJOE0",36,0)
 K P,PSGEFN,PSGOEEF
"RTN","PSJOE0",37,0)
 Q
"RTN","PSJOE0",38,0)
 ;
"RTN","PSJOE0",39,0)
CKNEW ;
"RTN","PSJOE0",40,0)
 K CF,CHK,OD,PSGLMT,PSGODDD,PSGOEA,PSGON,PSGONC,PSGONR,PSGONV,PSGORD,PSJCOM,PSJOE1,PSJOE2 Q:$D(PSJPRF)
"RTN","PSJOE0",41,0)
 D DEM^VADPT I $G(VADM(6)) W !!?2,"Patient is shown as deceased.  You may not enter orders for this patient." S PSJDEC=1 D CONT Q
"RTN","PSJOE0",42,0)
 I 'PSJPCAF W !!,"(NOTE: You cannot enter Unit Dose orders for this patient.)" D CONT
"RTN","PSJOE0",43,0)
 Q
"RTN","PSJOE0",44,0)
 ;
"RTN","PSJOE0",45,0)
CONT ;
"RTN","PSJOE0",46,0)
 K DIR S DIR(0)="EA",DIR("A")="Press Return to continue..." D ^DIR
"RTN","PSJOE0",47,0)
 Q
"RTN","PSJOE0",48,0)
 ;
"RTN","PSJOE0",49,0)
GODO ;Display selected order.
"RTN","PSJOE0",50,0)
 S PSIVAC="C" I $S(PSJORD["V":1,PSJORD["P":$P($G(^PS(53.1,+PSJORD,0)),"^",4)="F",1:0) D @$S($D(PSJPRP):"ENINP^PSIVOPT(DFN,PSJORD)",1:"ENIN^PSIVOPT") G GODO1
"RTN","PSJOE0",51,0)
 I '$D(PSJPRP),(PSJORD["P"),($P($G(^PS(53.1,+PSJORD,0)),U,4)="I") D ASKTYP Q:$D(DIRUT)  I Y="I" D ENIN^PSIVOPT G GODO1
"RTN","PSJOE0",52,0)
 S PSGORD=PSJORD D EN2^PSGVW,^PSGOE1:'$D(PSJPRF)
"RTN","PSJOE0",53,0)
GODO1 ;
"RTN","PSJOE0",54,0)
 I $D(PSJPRP),'PSJPR K DIR S DIR(0)="E" D ^DIR K DIR S:$D(DUOUT)!$D(DTOUT) PSJDLW=1 Q:$D(PSJDLW)  W:$Y @IOF
"RTN","PSJOE0",55,0)
 Q
"RTN","PSJOE0",56,0)
 ;
"RTN","PSJOE0",57,0)
ASKTYP ; Ask if completing as IV or UD.
"RTN","PSJOE0",58,0)
 Q
"RTN","PSJOE0",59,0)
 W !! D PIV^PSIVUTL(+PSJORD_"P")
"RTN","PSJOE0",60,0)
 I $G(PSJPDD) S DIR(0)="E" D ^DIR S Y="I" Q
"RTN","PSJOE0",61,0)
 W ! K DIR S DIR(0)="SOA^U:Unit Dose;I:IV Medication",DIR("A")="Do you wish to complete this as an IV or Unit Dose order (I/U)? ",DIR("?")="^D PENDIU^PSJO3" D ^DIR
"RTN","PSJOE0",62,0)
 Q
"RTN","PSJOE0",63,0)
 ;
"RTN","PSJOE0",64,0)
OLDCOM(DFN,PSJORD) ;
"RTN","PSJOE0",65,0)
 Q:$$COMPLEX^PSJOE(DFN,PSJORD)
"RTN","PSJOE0",66,0)
 N DURFLG S DURFLG=$S($G(PSJORD)["P":$G(^PS(53.1,+PSJORD,2.5)),$G(PSJORD)["V":$G(^PS(55,DFN,"IV",+PSJORD,2.5)),1:$G(^PS(55,DFN,5,+PSJORD,2.5))) I $P(DURFLG,"^",2)]"" D
"RTN","PSJOE0",67,0)
 . D CLEAR^VALM1 W !!!!!?21," * WARNING * "
"RTN","PSJOE0",68,0)
 . W !!!?5,"The following order contains a Requested Duration"
"RTN","PSJOE0",69,0)
 . W !?12,"and may be part of a complex dose!"
"RTN","PSJOE0",70,0)
 . W !!," Review the entire profile to determine appropriate action(s).",!!!!!!! D PAUSE^VALM1
"RTN","PSJOE0",71,0)
 Q
"RTN","PSJOE0",72,0)
AM ;
"RTN","PSJOE0",73,0)
 W !!?2,"Enter a 'Y' (or press the RETURN key) to enter new INPATIENT orders for this",!,"patient.  Enter an 'N' (or an '^') if there are no new orders for this patient."
"RTN","PSJOE0",74,0)
 W:'PSJPCAF !!?2,"PLEASE NOTE: The patient selected is NOT shown as currently admitted.",!,"Therefore, you cannot enter Unit Dose orders for this patient.  (You can enter",!,"IV orders.)" Q
"VER")
8.0^22.0
"BLD",9296,6)
^262
**END**
**END**

