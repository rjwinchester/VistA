Released CRHD*1*7 SEQ #4
Extracted from mail message
**KIDS**:CRHD*1.0*7^

**INSTALL NAME**
CRHD*1.0*7
"BLD",10453,0)
CRHD*1.0*7^SHIFT CHANGE HANDOFF TOOL^0^3170824^y
"BLD",10453,4,0)
^9.64PA^^
"BLD",10453,6.3)
1
"BLD",10453,"KRN",0)
^9.67PA^779.2^20
"BLD",10453,"KRN",.4,0)
.4
"BLD",10453,"KRN",.401,0)
.401
"BLD",10453,"KRN",.402,0)
.402
"BLD",10453,"KRN",.403,0)
.403
"BLD",10453,"KRN",.5,0)
.5
"BLD",10453,"KRN",.84,0)
.84
"BLD",10453,"KRN",3.6,0)
3.6
"BLD",10453,"KRN",3.8,0)
3.8
"BLD",10453,"KRN",9.2,0)
9.2
"BLD",10453,"KRN",9.8,0)
9.8
"BLD",10453,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",10453,"KRN",9.8,"NM",1,0)
CRHD9^^0^B77778864
"BLD",10453,"KRN",9.8,"NM","B","CRHD9",1)

"BLD",10453,"KRN",19,0)
19
"BLD",10453,"KRN",19.1,0)
19.1
"BLD",10453,"KRN",101,0)
101
"BLD",10453,"KRN",409.61,0)
409.61
"BLD",10453,"KRN",771,0)
771
"BLD",10453,"KRN",779.2,0)
779.2
"BLD",10453,"KRN",870,0)
870
"BLD",10453,"KRN",8989.51,0)
8989.51
"BLD",10453,"KRN",8989.52,0)
8989.52
"BLD",10453,"KRN",8994,0)
8994
"BLD",10453,"KRN","B",.4,.4)

"BLD",10453,"KRN","B",.401,.401)

"BLD",10453,"KRN","B",.402,.402)

"BLD",10453,"KRN","B",.403,.403)

"BLD",10453,"KRN","B",.5,.5)

"BLD",10453,"KRN","B",.84,.84)

"BLD",10453,"KRN","B",3.6,3.6)

"BLD",10453,"KRN","B",3.8,3.8)

"BLD",10453,"KRN","B",9.2,9.2)

"BLD",10453,"KRN","B",9.8,9.8)

"BLD",10453,"KRN","B",19,19)

"BLD",10453,"KRN","B",19.1,19.1)

"BLD",10453,"KRN","B",101,101)

"BLD",10453,"KRN","B",409.61,409.61)

"BLD",10453,"KRN","B",771,771)

"BLD",10453,"KRN","B",779.2,779.2)

"BLD",10453,"KRN","B",870,870)

"BLD",10453,"KRN","B",8989.51,8989.51)

"BLD",10453,"KRN","B",8989.52,8989.52)

"BLD",10453,"KRN","B",8994,8994)

"BLD",10453,"QUES",0)
^9.62^^
"BLD",10453,"REQB",0)
^9.611^^
"MBREQ")
0
"PKG",649,-1)
1^1
"PKG",649,0)
SHIFT CHANGE HANDOFF TOOL^CRHD^CAIRO PRODUCT CONVERSION TO CLASS I PRODUCT
"PKG",649,20,0)
^9.402P^^
"PKG",649,22,0)
^9.49I^1^1
"PKG",649,22,1,0)
1.0^3080513^3110228^520728530
"PKG",649,22,1,"PAH",1,0)
7^3170824
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","CRHD9")
0^1^B77778864^B77313307
"RTN","CRHD9",1,0)
CRHD9 ; CAIRO/CLC - HANDOFF TEAM LIST ;4/24/08  12:49
"RTN","CRHD9",2,0)
 ;;1.0;CRHD;**2,7**;Jan 28, 2008;Build 1
"RTN","CRHD9",3,0)
 ;=================================================================
"RTN","CRHD9",4,0)
 ;04/22/2009 BAY/KAM CRHD*1*2 Remedy Call 264027 Correct Issue of not
"RTN","CRHD9",5,0)
 ;                            being able to display/print patients
"RTN","CRHD9",6,0)
 ;                            with identical names
"RTN","CRHD9",7,0)
HOTMSAVE(CRHDRTN,CRHDTM) ;
"RTN","CRHD9",8,0)
 ;create a team name
"RTN","CRHD9",9,0)
 N CRHDFDA,CRHDOUT,CRHDERR
"RTN","CRHD9",10,0)
 K CRHDRTN
"RTN","CRHD9",11,0)
 S CRHDRTN=0
"RTN","CRHD9",12,0)
 I (CRHDTM'?1A.E)&(CRHDTM'?1N.E) Q
"RTN","CRHD9",13,0)
 S CRHDFDA(183.3,"?+1,",.01)=CRHDTM
"RTN","CRHD9",14,0)
 D UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD9",15,0)
 I '$D(CRHDERR) S CRHDRTN=CRHDOUT(1)
"RTN","CRHD9",16,0)
 Q
"RTN","CRHD9",17,0)
HOTMDEL(CRHDRTN,CRHDTM) ;
"RTN","CRHD9",18,0)
 ;delete a Hand off team
"RTN","CRHD9",19,0)
 N DIK,DA
"RTN","CRHD9",20,0)
 K CRHDRTN
"RTN","CRHD9",21,0)
 S CRHDRTN=0
"RTN","CRHD9",22,0)
 I +CRHDTM S DIK="^CRHD(183.3,",DA=+CRHDTM D ^DIK S CRHDRTN=1
"RTN","CRHD9",23,0)
 Q
"RTN","CRHD9",24,0)
HOLIST(CRHDRTN) ;
"RTN","CRHD9",25,0)
 ;return a list of teams
"RTN","CRHD9",26,0)
 N CRHDX,CRHDX1,CRHDTDT,CRHDCT
"RTN","CRHD9",27,0)
 K CRHDRTN
"RTN","CRHD9",28,0)
 S CRHDX=""
"RTN","CRHD9",29,0)
 S CRHDCT=0
"RTN","CRHD9",30,0)
 S CRHDRTN(0)="0^No List Found"
"RTN","CRHD9",31,0)
 F  S CRHDX=$O(^CRHD(183.3,"B",CRHDX)) Q:CRHDX=""  D
"RTN","CRHD9",32,0)
 .S CRHDX1=0
"RTN","CRHD9",33,0)
 .F  S CRHDX1=$O(^CRHD(183.3,"B",CRHDX,CRHDX1)) Q:'CRHDX1  D
"RTN","CRHD9",34,0)
 ..;check to see if team list is active, if date is less then today then inactive
"RTN","CRHD9",35,0)
 ..S CRHDTDT=$P($G(^CRHD(183.3,CRHDX1,0)),"^",2)
"RTN","CRHD9",36,0)
 ..I CRHDTDT&(CRHDTDT<$$DT^XLFDT) Q
"RTN","CRHD9",37,0)
 ..S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDX1_"^"_CRHDX_"^"_"HOTEAM"
"RTN","CRHD9",38,0)
 I CRHDCT>0 K CRHDRTN(0)
"RTN","CRHD9",39,0)
 Q
"RTN","CRHD9",40,0)
HOPLIST(CRHDRTN,CRHDTM) ;
"RTN","CRHD9",41,0)
 ;Get list of Patients for a HO team
"RTN","CRHD9",42,0)
 N CRHDX,CRHDPT,CRHDPD,CRHDTLST,CRHDCT,CRHDPD2,VAIP,DFN,DIE,DA,DR
"RTN","CRHD9",43,0)
 K CRHDRTN
"RTN","CRHD9",44,0)
 ;p.7 HPS/MWA "No Patients Found" is expected to be in the second piece...added "^"
"RTN","CRHD9",45,0)
 S CRHDRTN(1)="^No Patients Found"
"RTN","CRHD9",46,0)
 Q:'CRHDTM
"RTN","CRHD9",47,0)
 I '$D(^CRHD(183.3,"B",$P(CRHDTM,"^",2),+CRHDTM)) Q
"RTN","CRHD9",48,0)
 S CRHDX=0
"RTN","CRHD9",49,0)
 F  S CRHDX=$O(^CRHD(183.3,+CRHDTM,1,CRHDX)) Q:'CRHDX  D
"RTN","CRHD9",50,0)
 .S CRHDPT=+$G(^CRHD(183.3,+CRHDTM,1,CRHDX,0))
"RTN","CRHD9",51,0)
 .;check to see if patient has been discharged, if so delete from list
"RTN","CRHD9",52,0)
 .S DFN=CRHDPT D IN5^VADPT
"RTN","CRHD9",53,0)
 .I VAIP(1)="" D  Q
"RTN","CRHD9",54,0)
 ..S DA(1)=+CRHDTM,DIE="^CRHD(183.3,"_DA(1)_",1,",DA=CRHDX,DR=".01///@" D ^DIE
"RTN","CRHD9",55,0)
 .S CRHDPD=$$PATDATA(CRHDPT)
"RTN","CRHD9",56,0)
 .K CRHDPD2
"RTN","CRHD9",57,0)
 .D PATPRV(.CRHDPD2,CRHDTM,CRHDPT)
"RTN","CRHD9",58,0)
 . ;04/22/2009 BAY/KAM CRHD*1*2 Remedy Call 264027 Concatenated the
"RTN","CRHD9",59,0)
 . ;                            patient IEN to the subscript for
"RTN","CRHD9",60,0)
 . ;                            uniqueness in the next two lines
"RTN","CRHD9",61,0)
 . I $P(CRHDPD,"^",1)'="" S CRHDTLST($P(CRHDPD,"^",2)_$P(CRHDPD,"^",1))=CRHDPD
"RTN","CRHD9",62,0)
 . ;I $P(CRHDPD,"^",1)'="" S CRHDTLST($P(CRHDPD,"^",2))=CRHDPD ; ORIGINAL CODE
"RTN","CRHD9",63,0)
 . I $G(CRHDPD2)'="" S CRHDTLST($P(CRHDPD,"^",2)_$P(CRHDPD,"^",1))=CRHDTLST($P(CRHDPD,"^",2)_$P(CRHDPD,"^",1))_"^*"_CRHDPD2
"RTN","CRHD9",64,0)
 . ;I $G(CRHDPD2)'="" S CRHDTLST($P(CRHDPD,"^",2))=CRHDTLST($P(CRHDPD,"^",2))_"^*"_CRHDPD2 ; ORIGINAL CODE
"RTN","CRHD9",65,0)
 I $D(CRHDTLST) D
"RTN","CRHD9",66,0)
 .S CRHDCT=0
"RTN","CRHD9",67,0)
 .S CRHDX=""
"RTN","CRHD9",68,0)
 .F  S CRHDX=$O(CRHDTLST(CRHDX)) Q:CRHDX=""  S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDTLST(CRHDX)
"RTN","CRHD9",69,0)
 Q
"RTN","CRHD9",70,0)
PATDATA(DFN) ;
"RTN","CRHD9",71,0)
 ;
"RTN","CRHD9",72,0)
 N CRHDNAME,CRHDSSN,CRHDDOB,CRHDAGE,CRHDSEX,VAIP,VADM
"RTN","CRHD9",73,0)
 K VAIP,VADM
"RTN","CRHD9",74,0)
 D DEM^VADPT,IN5^VADPT
"RTN","CRHD9",75,0)
 S CRHDNAME=VADM(1),CRHDSSN=$P(VADM(2),U,1),CRHDDOB=$P(VADM(3),U,1)
"RTN","CRHD9",76,0)
 S CRHDAGE=VADM(4),CRHDSEX=$P(VADM(5),U,1)
"RTN","CRHD9",77,0)
 K VAIP,VADM
"RTN","CRHD9",78,0)
 Q DFN_U_CRHDNAME_U_CRHDSSN_U_CRHDDOB_U_CRHDAGE_U_CRHDSEX
"RTN","CRHD9",79,0)
 ;
"RTN","CRHD9",80,0)
HODLIST(CRHDRTN,CRHDTM) ;Get list of Providers for a HO team
"RTN","CRHD9",81,0)
 N CRHDX,CRHDPRV,CRHDTLST,CRHDCT,CRHDZ0,CRHDSORT,CRHDUT
"RTN","CRHD9",82,0)
 N CRHDPX,CRHDPX0,CRHDNAM
"RTN","CRHD9",83,0)
 K CRHDRTN
"RTN","CRHD9",84,0)
 I '$D(^CRHD(183.3,"B",$P(CRHDTM,"^",2),+CRHDTM)) Q
"RTN","CRHD9",85,0)
 S CRHDX=0
"RTN","CRHD9",86,0)
 F  S CRHDX=$O(^CRHD(183.3,+CRHDTM,2,CRHDX)) Q:'CRHDX  D
"RTN","CRHD9",87,0)
 .S CRHDPRV=+$G(^CRHD(183.3,+CRHDTM,2,CRHDX,0))
"RTN","CRHD9",88,0)
 .S CRHDNAM=$$GET1^DIQ(200,+CRHDPRV,.01,"E")
"RTN","CRHD9",89,0)
 .;Delete Provider if inactive, 1st check to see if assigned to a patient, if so remove
"RTN","CRHD9",90,0)
 .I '$$ACTIVE^XUSER(+CRHDPRV) D  Q
"RTN","CRHD9",91,0)
 ..S CRHDPX=0 F  S CRHDPX=$O(^CRHD(183.3,+CRHDTM,1,CRHDPX)) Q:'CRHDPX  D
"RTN","CRHD9",92,0)
 ...S CRHDPX0=^CRHD(183.3,+CRHDTM,1,CRHDPX,0)
"RTN","CRHD9",93,0)
 ...I CRHDPX0[+CRHDPRV F CRHDI=2:1:$L(CRHDPX0,"^") I $P(CRHDPX0,"^",CRHDI)=+CRHDPRV S $P(^CRHD(183.3,+CRHDTM,1,CRHDPX,0),"^",CRHDI)=""
"RTN","CRHD9",94,0)
 ..S DA(1)=+CRHDTM,DIE="^CRHD(183.3,"_DA(1)_",2,",DA=CRHDX,DR=".01///@" D ^DIE
"RTN","CRHD9",95,0)
 .I CRHDNAM'="" D
"RTN","CRHD9",96,0)
 ..S CRHDZ0=$G(^CRHD(183.3,+CRHDTM,2,+CRHDX,0))
"RTN","CRHD9",97,0)
 ..S CRHDUT=$P(CRHDZ0,"^",2)
"RTN","CRHD9",98,0)
 ..I CRHDUT="" S CRHDUT="ZNOTYPE"
"RTN","CRHD9",99,0)
 ..S CRHDSORT(CRHDUT,CRHDNAM)=CRHDPRV_"^"_CRHDNAM_"^"_$P(CRHDZ0,"^",2)_"^"_+$P(CRHDZ0,"^",3)_"^"_+$P(CRHDZ0,"^",4)_"^"_$P(CRHDZ0,"^",5)_"^"_$P(CRHDZ0,"^",6)
"RTN","CRHD9",100,0)
 S CRHDI=""
"RTN","CRHD9",101,0)
 F  S CRHDI=$O(CRHDSORT(CRHDI)) Q:CRHDI=""  D
"RTN","CRHD9",102,0)
 .S CRHDPRV=""
"RTN","CRHD9",103,0)
 .F  S CRHDPRV=$O(CRHDSORT(CRHDI,CRHDPRV)) Q:CRHDPRV=""  D
"RTN","CRHD9",104,0)
 ..S CRHDTLST(CRHDPRV)=CRHDSORT(CRHDI,CRHDPRV)
"RTN","CRHD9",105,0)
 ..;S CRHDTLST(CRHDNAM)=CRHDPRV_"^"_CRHDNAM_"^"_$P(CRHDZ0,"^",2)_"^"_+$P(CRHDZ0,"^",3)_"^"_+$P(CRHDZ0,"^",4)_"^"_$P(CRHDZ0,"^",5)_"^"_$P(CRHDZ0,"^",6)
"RTN","CRHD9",106,0)
 I $D(CRHDTLST) D
"RTN","CRHD9",107,0)
 .S CRHDCT=0
"RTN","CRHD9",108,0)
 .S CRHDX=""
"RTN","CRHD9",109,0)
 .F  S CRHDX=$O(CRHDTLST(CRHDX)) Q:CRHDX=""  S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDTLST(CRHDX)
"RTN","CRHD9",110,0)
 Q
"RTN","CRHD9",111,0)
CANEDIT(CRHDRTN,CRHDTM,DUZ) ;
"RTN","CRHD9",112,0)
 ;Can user edit team list
"RTN","CRHD9",113,0)
 N CRHDPRV,CRHDMGR,CRHDA
"RTN","CRHD9",114,0)
 Q:CRHDTM=""
"RTN","CRHD9",115,0)
 ;S CRHDRTN="1^1"
"RTN","CRHD9",116,0)
 S CRHDA=$$GET1^DIQ(200,+DUZ,3,"I")
"RTN","CRHD9",117,0)
 S CRHDRTN="0^0"
"RTN","CRHD9",118,0)
 I CRHDA["@" S CRHDRTN="1^1" Q
"RTN","CRHD9",119,0)
 D HOTMMGR^CRHD1(.CRHDMGR,DUZ)
"RTN","CRHD9",120,0)
 I CRHDMGR S CRHDRTN="1^1" Q
"RTN","CRHD9",121,0)
 S CRHDPRV=$O(^CRHD(183.3,+CRHDTM,2,"B",+DUZ,0))
"RTN","CRHD9",122,0)
 I 'CRHDPRV Q
"RTN","CRHD9",123,0)
 E  S CRHDRTN=+$P($G(^CRHD(183.3,+CRHDTM,2,+CRHDPRV,0)),"^",3)_"^"_+$P($G(^CRHD(183.3,+CRHDTM,2,+CRHDPRV,0)),"^",4)
"RTN","CRHD9",124,0)
 Q
"RTN","CRHD9",125,0)
PATPRV(CRHDRTN,CRHDTM,CRHDDFN) ;
"RTN","CRHD9",126,0)
 ;return Providers assigned to patient on list
"RTN","CRHD9",127,0)
 N CRHDPAT,CRHDNAM,CRHDZ0,CRHDP,CRHDATTN,CRHDRES,CRHDINT,CRHDFEL,CRHDMST,CRHDNUR,CRHDVP,CRHDI,CRHDI2
"RTN","CRHD9",128,0)
 S CRHDVP="^CRHDATTN^CRHDRES^CRHDINT^CRHDFEL^CRHDMST^CRHDNUR"
"RTN","CRHD9",129,0)
 S CRHDPAT=$O(^CRHD(183.3,+CRHDTM,1,"B",+CRHDDFN,0))
"RTN","CRHD9",130,0)
 I 'CRHDPAT Q
"RTN","CRHD9",131,0)
 S CRHDZ0=$G(^CRHD(183.3,+CRHDTM,1,+CRHDPAT,0))
"RTN","CRHD9",132,0)
 ;I need to add, if the physician is not on team list delete from patient.
"RTN","CRHD9",133,0)
 F CRHDI=2:1:7 S CRHDP=$P(CRHDZ0,"^",CRHDI) D
"RTN","CRHD9",134,0)
 .I '$D(@$P(CRHDVP,"^",CRHDI)) S @$P(CRHDVP,"^",CRHDI)=""
"RTN","CRHD9",135,0)
 .I CRHDP["," D
"RTN","CRHD9",136,0)
 ..F CRHDI2=1:1:$L(CRHDP,",") D
"RTN","CRHD9",137,0)
 ...I '$D(^CRHD(183.3,CRHDTM,2,"B",$P(CRHDP,",",CRHDI2))) Q
"RTN","CRHD9",138,0)
 ...S CRHDNAM=$$GET1^DIQ(200,+$P(CRHDP,",",CRHDI2),.01,"E")
"RTN","CRHD9",139,0)
 ...S @$P(CRHDVP,"^",CRHDI)=@$P(CRHDVP,"^",CRHDI)_+$P(CRHDP,",",CRHDI2)_"^"_CRHDNAM_"+"
"RTN","CRHD9",140,0)
 .;E  S:+CRHDP&($D(^CRHD(183.3,+CRHDTM,2,"B",+CRHDP))) @$P(CRHDVP,"^",CRHDI)=+CRHDP_"^"_$$GET1^DIQ(200,+CRHDP,.01,"E")
"RTN","CRHD9",141,0)
 .E  S:+CRHDP @$P(CRHDVP,"^",CRHDI)=+CRHDP_"^"_$$GET1^DIQ(200,+CRHDP,.01,"E")
"RTN","CRHD9",142,0)
 F CRHDI=2:1:7 I $E(@$P(CRHDVP,"^",CRHDI),$L(@$P(CRHDVP,"^",CRHDI)))="+" S @$P(CRHDVP,"^",CRHDI)=$E(@$P(CRHDVP,"^",CRHDI),1,$L(@$P(CRHDVP,"^",CRHDI))-1)
"RTN","CRHD9",143,0)
 S CRHDRTN=CRHDDFN_";"_$G(CRHDATTN)_";"_$G(CRHDRES)_";"_$G(CRHDINT)_";"_$G(CRHDFEL)_";"_$G(CRHDMST)_";"_$G(CRHDNUR)
"RTN","CRHD9",144,0)
 Q
"RTN","CRHD9",145,0)
USERPHPG(CRHDRTN,DUZ) ;
"RTN","CRHD9",146,0)
 N CRHDOP,CRHDPG
"RTN","CRHD9",147,0)
 S CRHDOP=$$GET1^DIQ(200,+DUZ_",",.132,"E")             ;OFFICE PHONE
"RTN","CRHD9",148,0)
 S CRHDPG=$$GET1^DIQ(200,+DUZ_",",.138,"E")             ;PAGER
"RTN","CRHD9",149,0)
 S CRHDRTN=$S($L(CRHDOP)>2:CRHDOP,1:"")_"^"_$S($L(CRHDPG)>2:CRHDPG,1:"")
"RTN","CRHD9",150,0)
 Q
"RTN","CRHD9",151,0)
PRVINFO(CRHDRTN,CRHDTM,DUZ) ;
"RTN","CRHD9",152,0)
 ;return user information
"RTN","CRHD9",153,0)
 N CRHDPRV,CRHDZ0,CRHDMGR
"RTN","CRHD9",154,0)
 Q:CRHDTM=""
"RTN","CRHD9",155,0)
 ;S CRHDRTN(1)="0^0"
"RTN","CRHD9",156,0)
 S CRHDPRV=$O(^CRHD(183.3,+CRHDTM,2,"B",+DUZ,0))
"RTN","CRHD9",157,0)
 I 'CRHDPRV Q
"RTN","CRHD9",158,0)
 S CRHDZ0=$G(^CRHD(183.3,+CRHDTM,2,+CRHDPRV,0))
"RTN","CRHD9",159,0)
 D MGR^CRHD7(.CRHDMGR,DUZ)
"RTN","CRHD9",160,0)
 I ($$GET1^DIQ(200,+DUZ,3,"E")["@")!(+CRHDMGR) S $P(CRHDZ0,"^",3)=1,$P(CRHDZ0,"^",4)=1
"RTN","CRHD9",161,0)
 S CRHDRTN=$P(CRHDZ0,"^",1)_"^"_$$GET1^DIQ(200,+CRHDZ0,.01,"E")_"^"_$P(CRHDZ0,"^",2,$L(CRHDZ0,"^"))
"RTN","CRHD9",162,0)
 Q
"RTN","CRHD9",163,0)
MOD(CRHDRTN,CRHDTM,CRHDLTYP,CRHDTXT,CRHDKFG) ;
"RTN","CRHD9",164,0)
 N CRHDX,CRHDFDA,CRHDOUT,CRHDERR
"RTN","CRHD9",165,0)
 K CRHDRTN
"RTN","CRHD9",166,0)
 S CRHDRTN(0)=0
"RTN","CRHD9",167,0)
 I '$D(^CRHD(183.3,"B",$P(CRHDTM,"^",2),+CRHDTM)) Q
"RTN","CRHD9",168,0)
 I CRHDLTYP="P" D
"RTN","CRHD9",169,0)
 .K:CRHDKFG ^CRHD(183.3,+CRHDTM,1)
"RTN","CRHD9",170,0)
 .S CRHDX=0
"RTN","CRHD9",171,0)
 .F  S CRHDX=$O(CRHDTXT(CRHDX)) Q:'CRHDX  D
"RTN","CRHD9",172,0)
 ..I CRHDTXT(CRHDX)["~" S CRHDTXT(CRHDX)=$P(CRHDTXT(CRHDX),"~",2)
"RTN","CRHD9",173,0)
 ..S CRHDFDA(183.31,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",.01)=+$P(CRHDTXT(CRHDX),"^",1)
"RTN","CRHD9",174,0)
 ..S CRHDFDA(183.31,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",1)=+$P(CRHDTXT(CRHDX),";",2)
"RTN","CRHD9",175,0)
 ..S CRHDFDA(183.31,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",2)=+$P(CRHDTXT(CRHDX),";",3)
"RTN","CRHD9",176,0)
 ..S CRHDFDA(183.31,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",3)=+$P(CRHDTXT(CRHDX),";",4)
"RTN","CRHD9",177,0)
 ..S CRHDFDA(183.31,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",4)=+$P(CRHDTXT(CRHDX),";",5)
"RTN","CRHD9",178,0)
 ..S CRHDFDA(183.31,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",5)=+$P(CRHDTXT(CRHDX),";",6)
"RTN","CRHD9",179,0)
 ..S CRHDFDA(183.31,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",6)=+$P(CRHDTXT(CRHDX),";",7)
"RTN","CRHD9",180,0)
 .D UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD9",181,0)
 .I '$D(CRHDERR) S CRHDRTN(0)=1
"RTN","CRHD9",182,0)
 .E  S CRHDRTN(1)=1
"RTN","CRHD9",183,0)
 I CRHDLTYP="D" D
"RTN","CRHD9",184,0)
 .K:CRHDKFG ^CRHD(183.3,+CRHDTM,2)
"RTN","CRHD9",185,0)
 .S CRHDX=0
"RTN","CRHD9",186,0)
 .F  S CRHDX=$O(CRHDTXT(CRHDX)) Q:'CRHDX  D
"RTN","CRHD9",187,0)
 ..I CRHDTXT(CRHDX)["~" S CRHDTXT(CRHDX)=$P(CRHDTXT(CRHDX),"~",2)
"RTN","CRHD9",188,0)
 ..S CRHDFDA(183.32,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",.01)=$P(CRHDTXT(CRHDX),"^",1)
"RTN","CRHD9",189,0)
 ..S CRHDFDA(183.32,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",1)=$P(CRHDTXT(CRHDX),"^",3)
"RTN","CRHD9",190,0)
 ..S CRHDFDA(183.32,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",2)=$P(CRHDTXT(CRHDX),"^",4)
"RTN","CRHD9",191,0)
 ..S CRHDFDA(183.32,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",3)=$P(CRHDTXT(CRHDX),"^",5)
"RTN","CRHD9",192,0)
 ..S CRHDFDA(183.32,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",4)=$P(CRHDTXT(CRHDX),"^",6)
"RTN","CRHD9",193,0)
 ..S CRHDFDA(183.32,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",5)=$P(CRHDTXT(CRHDX),"^",7)
"RTN","CRHD9",194,0)
 .D UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD9",195,0)
 .I '$D(CRHDERR) S CRHDRTN(0)=1
"RTN","CRHD9",196,0)
 .E  S CRHDRTN(1)=1
"RTN","CRHD9",197,0)
 K CRHDFDA,CRHDOUT,CRHDERR
"RTN","CRHD9",198,0)
 Q
"RTN","CRHD9",199,0)
FILENSAV(CRHDRTN,CRHDTM,CRHDFNM) ;
"RTN","CRHD9",200,0)
 ;save filename for a team
"RTN","CRHD9",201,0)
 N CRHDFDA,CRHDOUT,CRHDERR,CRHDA
"RTN","CRHD9",202,0)
 K CRHDRTN
"RTN","CRHD9",203,0)
 S CRHDRTN=0
"RTN","CRHD9",204,0)
 ;I CRHDTM'?1A.E Q
"RTN","CRHD9",205,0)
 S CRHDFDA(183.4,"?+1,",.01)=$P(CRHDTM,"^",2)
"RTN","CRHD9",206,0)
 D UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD9",207,0)
 I '$D(CRHDERR) D
"RTN","CRHD9",208,0)
 .S CRHDA=CRHDOUT(1)
"RTN","CRHD9",209,0)
 .K CRHDFDA,CRHDOUT
"RTN","CRHD9",210,0)
 .I CRHDA D
"RTN","CRHD9",211,0)
 ..S CRHDFDA(183.4,CRHDA_",",2)=CRHDFNM
"RTN","CRHD9",212,0)
 ..D FILE^DIE("","CRHDFDA")
"RTN","CRHD9",213,0)
 ..S CRHDRTN=1
"RTN","CRHD9",214,0)
 Q
"RTN","CRHD9",215,0)
FILENGET(CRHDRTN,CRHDTM) ;
"RTN","CRHD9",216,0)
 ;get filename for a team
"RTN","CRHD9",217,0)
 S CRHDRTN=$$GET1^DIQ(183.4,+$$FIND1^DIC(183.4,"","X",$P(CRHDTM,"^",2),"","","ERR")_",",2,"I")
"RTN","CRHD9",218,0)
 Q
"VER")
8.0^22.2
"BLD",10453,6)
^4
**END**
**END**

