Released YS*5.01*117 SEQ #102
Extracted from mail message
**KIDS**:YS*5.01*117^

**INSTALL NAME**
YS*5.01*117
"BLD",9449,0)
YS*5.01*117^MENTAL HEALTH^0^3141028^y
"BLD",9449,4,0)
^9.64PA^^
"BLD",9449,6.3)
1
"BLD",9449,"ABPKG")
n
"BLD",9449,"KRN",0)
^9.67PA^779.2^20
"BLD",9449,"KRN",.4,0)
.4
"BLD",9449,"KRN",.401,0)
.401
"BLD",9449,"KRN",.402,0)
.402
"BLD",9449,"KRN",.403,0)
.403
"BLD",9449,"KRN",.5,0)
.5
"BLD",9449,"KRN",.84,0)
.84
"BLD",9449,"KRN",3.6,0)
3.6
"BLD",9449,"KRN",3.8,0)
3.8
"BLD",9449,"KRN",9.2,0)
9.2
"BLD",9449,"KRN",9.8,0)
9.8
"BLD",9449,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",9449,"KRN",9.8,"NM",1,0)
YSDX3A^^0^B10504249
"BLD",9449,"KRN",9.8,"NM","B","YSDX3A",1)

"BLD",9449,"KRN",19,0)
19
"BLD",9449,"KRN",19,"NM",0)
^9.68A^^
"BLD",9449,"KRN",19.1,0)
19.1
"BLD",9449,"KRN",101,0)
101
"BLD",9449,"KRN",409.61,0)
409.61
"BLD",9449,"KRN",771,0)
771
"BLD",9449,"KRN",779.2,0)
779.2
"BLD",9449,"KRN",870,0)
870
"BLD",9449,"KRN",8989.51,0)
8989.51
"BLD",9449,"KRN",8989.52,0)
8989.52
"BLD",9449,"KRN",8994,0)
8994
"BLD",9449,"KRN","B",.4,.4)

"BLD",9449,"KRN","B",.401,.401)

"BLD",9449,"KRN","B",.402,.402)

"BLD",9449,"KRN","B",.403,.403)

"BLD",9449,"KRN","B",.5,.5)

"BLD",9449,"KRN","B",.84,.84)

"BLD",9449,"KRN","B",3.6,3.6)

"BLD",9449,"KRN","B",3.8,3.8)

"BLD",9449,"KRN","B",9.2,9.2)

"BLD",9449,"KRN","B",9.8,9.8)

"BLD",9449,"KRN","B",19,19)

"BLD",9449,"KRN","B",19.1,19.1)

"BLD",9449,"KRN","B",101,101)

"BLD",9449,"KRN","B",409.61,409.61)

"BLD",9449,"KRN","B",771,771)

"BLD",9449,"KRN","B",779.2,779.2)

"BLD",9449,"KRN","B",870,870)

"BLD",9449,"KRN","B",8989.51,8989.51)

"BLD",9449,"KRN","B",8989.52,8989.52)

"BLD",9449,"KRN","B",8994,8994)

"BLD",9449,"QUES",0)
^9.62^^
"BLD",9449,"REQB",0)
^9.611^1^1
"BLD",9449,"REQB",1,0)
YS*5.01*107^2
"BLD",9449,"REQB","B","YS*5.01*107",1)

"MBREQ")
0
"PKG",100,-1)
1^1
"PKG",100,0)
MENTAL HEALTH^YS^Version 5.01 of Mental Health
"PKG",100,20,0)
^9.402P^^
"PKG",100,22,0)
^9.49I^1^1
"PKG",100,22,1,0)
5.01^2941230^2960821
"PKG",100,22,1,"PAH",1,0)
117^3141028
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","YSDX3A")
0^1^B10504249^B10489909
"RTN","YSDX3A",1,0)
YSDX3A ;SLC/DJP - Entry of Axis 3 Diagnosis for the Mental Health Med Rec ; 17 Oct 2014  9:46 AM
"RTN","YSDX3A",2,0)
 ;;5.01;MENTAL HEALTH;**33,107,117**;Dec 30, 1994;Build 1
"RTN","YSDX3A",3,0)
 ;D RECORD^YSDX0001("YSDX3A^YSDX3A") ;Used for testing.  Inactivated in YSDX0001...
"RTN","YSDX3A",4,0)
 ;
"RTN","YSDX3A",5,0)
 ;  Called from routines YSCEN1, YSDX3
"RTN","YSDX3A",6,0)
AXIS3 ;
"RTN","YSDX3A",7,0)
 ;D RECORD^YSDX0001("AXIS3^YSDX3A") ;Used for testing.  Inactivated in YSDX0001...
"RTN","YSDX3A",8,0)
 K YSDXDA,YSDA,YSDTY,YSNO,P1 W @IOF,!!?10,"ENTRY OF DIAGNOSIS - Continued - ",$E(YSNM,1,25) S YSAX=3,YSDTY="A",P1=0 K P2 W !!,"ACTIVE ICD DIAGNOSES (Axis 3): ",! D LIST^YSDX3U G:$D(YSNO) QUES2
"RTN","YSDX3A",9,0)
 I '$D(YSDXN) W !!?3,"No active ICD diagnosis on file for ",YSNM,".",!
"RTN","YSDX3A",10,0)
 D INQ^YSDX3U Q:$D(YSQT)
"RTN","YSDX3A",11,0)
QUES2 ;Subroutine presents questions for Axis 3
"RTN","YSDX3A",12,0)
 ;D RECORD^YSDX0001("QUES2^YSDX3A") ;Used for testing.  Inactivated in YSDX0001...
"RTN","YSDX3A",13,0)
 I $G(YSDXDAT)="" S YSDXDAT=DT
"RTN","YSDX3A",14,0)
 N YSACSREC,YSACS S YSACSREC=$$ACTDT^YSDXUTL(YSDXDAT),YSACS=$P(YSACSREC,U,3)
"RTN","YSDX3A",15,0)
 I YSACS["-" S YSACS=$P(YSACS,"-",1,2)
"RTN","YSDX3A",16,0)
 I '$D(^XUSEC("YSD",DUZ)) W !!,"You must hold correct security key to enter ",YSACS," diagnosis." Q
"RTN","YSDX3A",17,0)
 I $P(YSACSREC,U,1)'="ICD" D  G:$G(X2)?1N.N QUES2B G:YSRETV'<0 DUPLCK
"RTN","YSDX3A",18,0)
 . K X2 S YSDT=YSDXDAT D EN^YSLXDG Q:YSRETV<0  I $P(YSRETV,U,1)?.N S X2=$P(YSRETV,U,1)
"RTN","YSDX3A",19,0)
 . S (YSDXDA,Y)=$P($$ICDDATA^ICDXCODE("DIAG",$P($P(YSRETV,U,1),";",2),YSDXDAT,"E"),U,1)
"RTN","YSDX3A",20,0)
 I $G(YSRETV)<0 K YSRETV Q
"RTN","YSDX3A",21,0)
 W !!,"Enter ",YSACS," DIAGNOSIS:  " R X2:DTIME S YSTOUT='$T,YSUOUT=X2["^" I YSTOUT!YSUOUT S YSQT=1 Q
"RTN","YSDX3A",22,0)
QUES2B Q:X2="" 
"RTN","YSDX3A",23,0)
 I X2="???" S X2="??"
"RTN","YSDX3A",24,0)
 I X2?.N I X2<(P1+1) D ICDP^YSDX3UA G:'$D(YSY) QUES2 S:$D(S1) YSDXDA=$P(S1,";")
"RTN","YSDX3A",25,0)
 I '$D(YSY) S X2=$$UP^XLFSTR(X2) D ICDLK^YSDX3UA G:Y<0 QUES2
"RTN","YSDX3A",26,0)
DUPLCK ;Checks for and displays possible duplicate entries
"RTN","YSDX3A",27,0)
 ;D RECORD^YSDX0001("DUPLCK^YSDX3A") ;Used for testing.  Inactivated in YSDX0001...
"RTN","YSDX3A",28,0)
 S:'$D(YSDXDA) YSDXDA=+Y S:'$D(S2) S2=+Y S W2="",W1=S2_";"_"ICD9(" F I=1:1 S W2=$O(^YSD(627.8,"AG","I",YSDFN,W1,W2)) Q:W2=""  S YSDUPDA=W2 D DUPL^YSDX3UA
"RTN","YSDX3A",29,0)
CORR ;
"RTN","YSDX3A",30,0)
 ;D RECORD^YSDX0001("CORR^YSDX3A") ;Used for testing.  Inactivated in YSDX0001...
"RTN","YSDX3A",31,0)
 N YSDXDATA S YSDXDATA=$$ICDDATA^ICDXCODE("DIAG",YSDXDA,YSDXDAT,"I")
"RTN","YSDX3A",32,0)
 I $P(YSDXDATA,U,1)=-1 W !!,"Invalid Diagnosis for DATE/TIME OF DIAGNOSIS that was entered." K YSY G QUES2
"RTN","YSDX3A",33,0)
 ;S YSW=$P(^ICD9(YSDXDA,0),U),YSWN=$P(^(0),U,3)
"RTN","YSDX3A",34,0)
 S YSW=$P(YSDXDATA,U,2),YSWN=$P(YSDXDATA,U,4)
"RTN","YSDX3A",35,0)
 S %=0 F  Q:$G(%)  W !!?10,YSW_" "_YSWN,!!,"Is this the ICD diagnosis you wish to select" S %=2 D
"RTN","YSDX3A",36,0)
 .D YN^DICN S YSTOUT=$D(DTOUT),YSUOUT=$D(DUOUT) I YSTOUT!YSUOUT Q
"RTN","YSDX3A",37,0)
 .I '% W !!,"""YES"" indicates the diagnosis entered applies to ",YSNM,"."
"RTN","YSDX3A",38,0)
 I %=2 K YSDXDA,YSY,X2,S2 G QUES2
"RTN","YSDX3A",39,0)
 Q:%=-1
"RTN","YSDX3A",40,0)
FILE ;
"RTN","YSDX3A",41,0)
 ;D RECORD^YSDX0001("FILE^YSDX3A") ;Used for testing.  Inactivated in YSDX0001...
"RTN","YSDX3A",42,0)
 ;S DIC="^YSD(627.8,",DIC(0)="L",X="""N""",DLAYGO=627 D ^DIC Q:Y'>0  S YSDA=+Y,YSDXDA=YSDXDA_";ICD9("
"RTN","YSDX3A",43,0)
 K DD,DO,DA,DINUM
"RTN","YSDX3A",44,0)
 S X="NOW",%DT="TR" D ^%DT S X=Y
"RTN","YSDX3A",45,0)
 S DIC="^YSD(627.8,",DIC(0)="L",DLAYGO=627.8 D FILE^DICN Q:Y'>0  S YSDA=+Y,YSDXDA=YSDXDA_";ICD9("
"RTN","YSDX3A",46,0)
 D FILE^YSDX3UA
"RTN","YSDX3A",47,0)
 K YSDXDA,YSDA,YSDTY,YSDXDA1,YSDXDT,YSDXN,YSDXNN,YSDXST,YSMOD,YSW,YSWN,YSALZ,YSY,F1,F2,F3,K1,K2,K3,K4,K5,K6,L2,L3,L4,L5,L7,P3,P4,P5,S2,W1,W2,W3,W4,W5,W6,X,X2 G:'$D(YSPLIC) QUES2
"VER")
8.0^22.0
"BLD",9449,6)
^102
**END**
**END**

