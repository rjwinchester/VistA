Released RMPR*3*199 SEQ #175
Extracted from mail message
**KIDS**:RMPR*3.0*199^

**INSTALL NAME**
RMPR*3.0*199
"BLD",11267,0)
RMPR*3.0*199^PROSTHETICS^0^3181026^y
"BLD",11267,1,0)
^^3^3^3181025^
"BLD",11267,1,1,0)
Associated end user does not get the warning message "No open sequence
"BLD",11267,1,2,0)
number available for ### for transaction entry ###" when creating an  
"BLD",11267,1,3,0)
eyeglass order in VistA.
"BLD",11267,4,0)
^9.64PA^^
"BLD",11267,6.3)
2
"BLD",11267,"KRN",0)
^9.67PA^1.61^23
"BLD",11267,"KRN",.4,0)
.4
"BLD",11267,"KRN",.401,0)
.401
"BLD",11267,"KRN",.402,0)
.402
"BLD",11267,"KRN",.403,0)
.403
"BLD",11267,"KRN",.5,0)
.5
"BLD",11267,"KRN",.84,0)
.84
"BLD",11267,"KRN",1.6,0)
1.6
"BLD",11267,"KRN",1.61,0)
1.61
"BLD",11267,"KRN",1.62,0)
1.62
"BLD",11267,"KRN",3.6,0)
3.6
"BLD",11267,"KRN",3.8,0)
3.8
"BLD",11267,"KRN",9.2,0)
9.2
"BLD",11267,"KRN",9.8,0)
9.8
"BLD",11267,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",11267,"KRN",9.8,"NM",1,0)
RMPR21^^0^B24634995
"BLD",11267,"KRN",9.8,"NM","B","RMPR21",1)

"BLD",11267,"KRN",19,0)
19
"BLD",11267,"KRN",19.1,0)
19.1
"BLD",11267,"KRN",101,0)
101
"BLD",11267,"KRN",409.61,0)
409.61
"BLD",11267,"KRN",771,0)
771
"BLD",11267,"KRN",779.2,0)
779.2
"BLD",11267,"KRN",870,0)
870
"BLD",11267,"KRN",8989.51,0)
8989.51
"BLD",11267,"KRN",8989.52,0)
8989.52
"BLD",11267,"KRN",8994,0)
8994
"BLD",11267,"KRN","B",.4,.4)

"BLD",11267,"KRN","B",.401,.401)

"BLD",11267,"KRN","B",.402,.402)

"BLD",11267,"KRN","B",.403,.403)

"BLD",11267,"KRN","B",.5,.5)

"BLD",11267,"KRN","B",.84,.84)

"BLD",11267,"KRN","B",1.6,1.6)

"BLD",11267,"KRN","B",1.61,1.61)

"BLD",11267,"KRN","B",1.62,1.62)

"BLD",11267,"KRN","B",3.6,3.6)

"BLD",11267,"KRN","B",3.8,3.8)

"BLD",11267,"KRN","B",9.2,9.2)

"BLD",11267,"KRN","B",9.8,9.8)

"BLD",11267,"KRN","B",19,19)

"BLD",11267,"KRN","B",19.1,19.1)

"BLD",11267,"KRN","B",101,101)

"BLD",11267,"KRN","B",409.61,409.61)

"BLD",11267,"KRN","B",771,771)

"BLD",11267,"KRN","B",779.2,779.2)

"BLD",11267,"KRN","B",870,870)

"BLD",11267,"KRN","B",8989.51,8989.51)

"BLD",11267,"KRN","B",8989.52,8989.52)

"BLD",11267,"KRN","B",8994,8994)

"BLD",11267,"QDEF")
^^^^^^^^^^YES
"BLD",11267,"QUES",0)
^9.62^^
"BLD",11267,"REQB",0)
^9.611^1^1
"BLD",11267,"REQB",1,0)
RMPR*3.0*62^2
"BLD",11267,"REQB","B","RMPR*3.0*62",1)

"MBREQ")
0
"PKG",280,-1)
1^1
"PKG",280,0)
PROSTHETICS^RMPR^PROSTHETICS VERSION 3.0 ALPHA
"PKG",280,22,0)
^9.49I^1^1
"PKG",280,22,1,0)
3.0^2960209^2970624
"PKG",280,22,1,"PAH",1,0)
199^3181026
"PKG",280,22,1,"PAH",1,1,0)
^^3^3^3181026
"PKG",280,22,1,"PAH",1,1,1,0)
Associated end user does not get the warning message "No open sequence
"PKG",280,22,1,"PAH",1,1,2,0)
number available for ### for transaction entry ###" when creating an  
"PKG",280,22,1,"PAH",1,1,3,0)
eyeglass order in VistA.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","RMPR21")
0^1^B24634995^B22480800
"RTN","RMPR21",1,0)
RMPR21 ;PHX/HNB/JLT - CREATE 1358 TRANSACTION, POST TO 2319 ;8/29/1994
"RTN","RMPR21",2,0)
 ;;3.0;PROSTHETICS;**12,41,62,199**;Feb 09, 1996;Build 2
"RTN","RMPR21",3,0)
 ;RVD patch #62 - pce api
"RTN","RMPR21",4,0)
 ;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","RMPR21",5,0)
 K ^TMP($J,"RMPRPCE")
"RTN","RMPR21",6,0)
 S PRCS("A")="Select OBLIGATION NUMBER: " D EN1^PRCS58 G:Y=-1 EXIT
"RTN","RMPR21",7,0)
 S RMPROB=$P(Y,U,2) D BAL^RMPRPSC
"RTN","RMPR21",8,0)
ST S RMPRR="",(RMPRCT,R1,RMPRQT,RMPRTO,RMPRDS,RMPRIS,B2)=0,B1=1
"RTN","RMPR21",9,0)
 W !,"This will Create"_$S('$D(RMPRF):" a NO FORM ",RMPRF=1:" a PSC 10-55 ",RMPRF=2:" a 10-2421 ",RMPRF=8:" an EYEGLASS 10-2914 ",1:" ALL OTHER ")
"RTN","RMPR21",10,0)
A S %=1 R "Do you wish to Continue" D YN^DICN G:%=1 EN1 G:%=0 H
"RTN","RMPR21",11,0)
 K RMPROB G EXIT
"RTN","RMPR21",12,0)
EN1 D GETPAT^RMPRUTIL
"RTN","RMPR21",13,0)
 G:'$D(RMPRDFN) EXT
"RTN","RMPR21",14,0)
 K DIC,DINUM,DIC("DR")
"RTN","RMPR21",15,0)
 S X=DT,DIC("DR")="1////^S X=RMPRDFN"
"RTN","RMPR21",16,0)
 S DIC="^RMPR(664,",DIC(0)="AELQM",DLAYGO=664
"RTN","RMPR21",17,0)
 K DD,DO
"RTN","RMPR21",18,0)
 D FILE^DICN K DLAYGO,DIC Q:Y<0
"RTN","RMPR21",19,0)
 S (RMPRK,RMPRA)=+Y
"RTN","RMPR21",20,0)
 S DFN=RMPRDFN D DEM^VADPT
"RTN","RMPR21",21,0)
VIEW ;VIEW 10-2319
"RTN","RMPR21",22,0)
 S RMPRBAC1=1 D ^RMPRPAT K RMPRBAC1 G:$D(RMPRKILL) KILL
"RTN","RMPR21",23,0)
 I RMPRF=10 D EN2520^RMPRM G:'$D(RMPRF) KILL
"RTN","RMPR21",24,0)
 I RMPRF=1!(RMPRF=10) S RMPRFLAG=1 D DIS^RMPRAP G:$D(RMPRDIE) KILL
"RTN","RMPR21",25,0)
 S DIE="^RMPR(664,",DA=RMPRA
"RTN","RMPR21",26,0)
 S RMPRDR=$S(RMPRF=9:"NOFORM",RMPRF=1:"[RMPR55]",RMPRF=8:"[RMPREYE]",RMPRF=2:"2421",RMPRF=10:"[RMPR 2520]",1:"NOFORM")
"RTN","RMPR21",27,0)
 G:RMPRDR["2421" P24^RMPR21A
"RTN","RMPR21",28,0)
 G:RMPRDR["NOFORM" COT^RMPR21A
"RTN","RMPR21",29,0)
 G:RMPRDR["RMPREYE" EYE^RMPRPSC
"RTN","RMPR21",30,0)
CON K DR
"RTN","RMPR21",31,0)
 S DR=RMPRDR D ^DIE G:'$P(^RMPR(664,RMPRA,0),U,4) KILL
"RTN","RMPR21",32,0)
CHK D CHK1
"RTN","RMPR21",33,0)
 I 'FL W !!,$C(7),?5,"REQUIRED FIELDS DO NOT EXIST ON THIS FORM",! G KILL
"RTN","RMPR21",34,0)
 S $P(^RMPR(664,RMPRA,0),U,9)=DUZ
"RTN","RMPR21",35,0)
 ;I $D(DTOUT)!($D(Y(0))) W !,$C(7),$C(7),"Please Try Later!" G KILL
"RTN","RMPR21",36,0)
ASK ;POST TRANSACTION QUESTION
"RTN","RMPR21",37,0)
 S %=2 W !!,"Are you ready to POST to IFCAP and 10-2319 NOW"
"RTN","RMPR21",38,0)
 D YN^DICN G:%=1 FILE^RMPR21B G:$D(DTOUT) KILL
"RTN","RMPR21",39,0)
 I %=0 W !,"This will Create a Daily Transaction in the 1358 Module of IFCAP,",!,"and Create an Entry on the Prosthetic 10-2319 Record." G ASK
"RTN","RMPR21",40,0)
DEL ;
"RTN","RMPR21",41,0)
 I %=-1 S %=2 R !,"Do you want to Delete this Transaction" D YN^DICN I $D(DTOUT)!(%=1) S:$D(RMPRA) RMPRK=RMPRA G KILL
"RTN","RMPR21",42,0)
 I %=0 W !!,"ENTER YES OR NO!!",$C(7) S %=-1 G DEL
"RTN","RMPR21",43,0)
 D ^RMPRLI I RMPRX]"" G ASK
"RTN","RMPR21",44,0)
L W !!!,"Enter Item to Edit: " R X:DTIME G:'$T KILL
"RTN","RMPR21",45,0)
 G:X["^"!(X="") ASK I X["?" D ZDSP^RMPR21A G L
"RTN","RMPR21",46,0)
 S DIC="^RMPR(664,"_RMPRA_",1,",DIC(0)="EQMZ" D ^DIC
"RTN","RMPR21",47,0)
 I +Y'>0 K DA,Y G L
"RTN","RMPR21",48,0)
 S DA=+Y,DA(1)=RMPRA,DIE=DIC
"RTN","RMPR21",49,0)
 ;HCPCS code
"RTN","RMPR21",50,0)
 S DR="8;9;I $P(^RMPR(664,DA(1),1,DA,0),U,10)=4 S Y=""@1"";.01;16;1;14;3;2;4;7;S Y="""";@1;10;16;1;14;3;2;4;7"
"RTN","RMPR21",51,0)
 ;S DR=".01;1;14;16;8;9;I $P(^RMPR(664,DA(1),1,DA,0),U,10)=4 S Y=""@1"";3;2;4;7;S Y="""";@1;10;3;2;4;7"
"RTN","RMPR21",52,0)
 ;HCPCS code
"RTN","RMPR21",53,0)
 S:RMPRDR["RMPREYE" DR="8;9;I $P(^RMPR(664,DA(1),1,DA,0),U,10)=4 S Y=""@1"";.01;16;1;3;2;4;7;S Y="""";@1;10;16;1;3;2;4;7" D ^DIE
"RTN","RMPR21",54,0)
 ;S:RMPRDR["RMPREYE" DR=".01;16;8;9;I $P(^RMPR(664,DA(1),1,DA,0),U,10)=4 S Y=""@1"";1;3;2;4;7;S Y="""";@1;10;1;3;2;4;7" D ^DIE
"RTN","RMPR21",55,0)
 D CHK
"RTN","RMPR21",56,0)
 I '$D(FL) W !!,$C(7),?5,"REQUIRED FIELDS DO NOT EXIST ON THIS FORM",! G KILL
"RTN","RMPR21",57,0)
 S DIE="^RMPR(664,",DA=RMPRA,DR=11 D ^DIE G L
"RTN","RMPR21",58,0)
H W !,"This will create a transaction, post to IFCAP, and update the 2319 report",! G A
"RTN","RMPR21",59,0)
 ;
"RTN","RMPR21",60,0)
CHK1 ;CHECK FOR EXISTENCE OF ITEMS ON PURCHASING FORMS
"RTN","RMPR21",61,0)
 S FL=1
"RTN","RMPR21",62,0)
 I $D(^RMPR(664,RMPRA,1)) S (FL,RI)=0 F  S RI=$O(^RMPR(664,RMPRA,1,RI)) Q:RI'>0  Q:'$D(^(RI,0))  D
"RTN","RMPR21",63,0)
 .S FL=1
"RTN","RMPR21",64,0)
 .S RB=^RMPR(664,RMPRA,1,RI,0)
"RTN","RMPR21",65,0)
 .I $P(RB,U,3)=""!($P(RB,U,4)="")!($P(RB,U,5)="")!($P(RB,U,9)="")!($P(RB,U,10)="") S FL=0 Q
"RTN","RMPR21",66,0)
 .S DA(1)=RMPRA,DA=RI D CHKCPT^RMPR21A
"RTN","RMPR21",67,0)
 Q
"RTN","RMPR21",68,0)
 ;
"RTN","RMPR21",69,0)
ERROR ;ERROR MESSAGE FOR FAILED POSTING
"RTN","RMPR21",70,0)
 I $G(MSG)'="" W !,MSG,! ;Write error message, RMPR*3*199
"RTN","RMPR21",71,0)
 W !,$C(7),?5,"***PLEASE CONTACT YOUR FISCAL SERVICE***",!,Y
"RTN","RMPR21",72,0)
KILL ;DELETE PURCHASING ENTRY
"RTN","RMPR21",73,0)
 Q:'$D(RMPRK)
"RTN","RMPR21",74,0)
 S DA=RMPRK,DIK="^RMPR(664," D ^DIK W !,$C(7),?20,"Deleted..." K RMPRDOD,RMPROB
"RTN","RMPR21",75,0)
 I $D(RMPRWO),$D(^RMPR(664.2,+RMPRWO,0)) D  K DIK
"RTN","RMPR21",76,0)
TMP .S DA=0
"RTN","RMPR21",77,0)
 .F  S DA=$O(^RMPR(664.2,RMPRWO,1,"AC",RMPRA,DA)) Q:$G(DA)'>0
"RTN","RMPR21",78,0)
 .S DIK="^RMPR(664.2,"_RMPRWO_",1,",DA(1)=RMPRWO
"RTN","RMPR21",79,0)
 .D ^DIK
"RTN","RMPR21",80,0)
EXIT ;EXIT AND KILL VARIABLES. SET UP OBLIGATION NUMBER QUESTION
"RTN","RMPR21",81,0)
 S DIR(0)="FAO",DIR("A")="Press ENTER to continue " D ^DIR  ;Require user to hit enter, RMPR*3*199
"RTN","RMPR21",82,0)
 D:'$D(DTOUT) LINK^RMPRS D KVAR^VADPT
"RTN","RMPR21",83,0)
 I $G(RMPRF)=2419 S RMPRSF=RMPRF S RMPRSDA=RMPRDA,RMPRSA=RMPRA
"RTN","RMPR21",84,0)
EXT K RMPRFLAG,RMPRG,RD,RMPRPSC,RMPRCONT,RMPRSH,RMPRDS,RMPRTO,RMPRCT,RMPRQT,R1,B2,D1,RMPRI,%,B1,DA,DIC,DIK,PRCS,PRCSCPAN,RMPRIN,RMPRPC,RMPRAMIS,RMPRARD,RMPRCNT,RMPRIT,RMPRIT1,RMPRU,SR,TYPE,RAC,FL,RMPRCTK,PRCSIP,PQTY,FL1,RMPRNOB,HY,RMPRGO
"RTN","RMPR21",85,0)
 K ^TMP($J,"RMPRPCE")
"RTN","RMPR21",86,0)
 K RMPRDIE,RMPRDR,RMPRDES,DIE,RMPRSR,DR,DTOUT,RMPRDOB,RMPRSC,RMPRTRN,RMPRX,RMPRK,RMPR660,RMPRA,RMPRDFN,RMPRDIS,RMPRIS,RMPRNAM,RMPRR,RMPRS,RMPRSSN
"RTN","RMPR21",87,0)
 K RMPRSSNE,RMPRT,RMPRTN,RMPRV,Y,LINE,RMPRUP,RMPRSR,RMPRPI,RI,RA,RMPRI1,RMPRDELN,RDP,Y,RMPRSER,NAME,RMTYP,RMCAT,RMSPE,MSG ;Clean up MSG variable - RMPR*3*199
"RTN","RMPR21",88,0)
 I $D(RMPRWO),RMPRWO D POST^RMPR29U Q
"RTN","RMPR21",89,0)
 I $D(RMPRDA) Q
"RTN","RMPR21",90,0)
 I $D(RMPROB) D PRCS^RMPRPSC G:(X'="^")!(X'["^") ST
"RTN","RMPR21",91,0)
 K RMPROB,RMPRF,PRC,PRCS,RBL,RDA,RVA,RX,RMPRKILL Q
"VER")
8.0^22.2
"BLD",11267,6)
^175
**END**
**END**

